function kne(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const S of p)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function l(p){const S={};return p.integrity&&(S.integrity=p.integrity),p.referrerPolicy&&(S.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?S.credentials="include":p.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function f(p){if(p.ep)return;p.ep=!0;const S=l(p);fetch(p.href,S)}})();var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var JF={exports:{}},K0={},e3={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=Symbol.for("react.element"),Iq=Symbol.for("react.portal"),bq=Symbol.for("react.fragment"),Cq=Symbol.for("react.strict_mode"),Rq=Symbol.for("react.profiler"),Nq=Symbol.for("react.provider"),xq=Symbol.for("react.context"),Mq=Symbol.for("react.forward_ref"),Dq=Symbol.for("react.suspense"),Pq=Symbol.for("react.memo"),Oq=Symbol.for("react.lazy"),OP=Symbol.iterator;function Lq(i){return i===null||typeof i!="object"?null:(i=OP&&i[OP]||i["@@iterator"],typeof i=="function"?i:null)}var t3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n3=Object.assign,r3={};function Th(i,o,l){this.props=i,this.context=o,this.refs=r3,this.updater=l||t3}Th.prototype.isReactComponent={};Th.prototype.setState=function(i,o){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,o,"setState")};Th.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function i3(){}i3.prototype=Th.prototype;function _b(i,o,l){this.props=i,this.context=o,this.refs=r3,this.updater=l||t3}var Tb=_b.prototype=new i3;Tb.constructor=_b;n3(Tb,Th.prototype);Tb.isPureReactComponent=!0;var LP=Array.isArray,o3=Object.prototype.hasOwnProperty,Sb={current:null},a3={key:!0,ref:!0,__self:!0,__source:!0};function s3(i,o,l){var f,p={},S=null,b=null;if(o!=null)for(f in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(S=""+o.key),o)o3.call(o,f)&&!a3.hasOwnProperty(f)&&(p[f]=o[f]);var g=arguments.length-2;if(g===1)p.children=l;else if(1<g){for(var w=Array(g),F=0;F<g;F++)w[F]=arguments[F+2];p.children=w}if(i&&i.defaultProps)for(f in g=i.defaultProps,g)p[f]===void 0&&(p[f]=g[f]);return{$$typeof:Wg,type:i,key:S,ref:b,props:p,_owner:Sb.current}}function kq(i,o){return{$$typeof:Wg,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}}function wb(i){return typeof i=="object"&&i!==null&&i.$$typeof===Wg}function Fq(i){var o={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(l){return o[l]})}var kP=/\/+/g;function u1(i,o){return typeof i=="object"&&i!==null&&i.key!=null?Fq(""+i.key):o.toString(36)}function e0(i,o,l,f,p){var S=typeof i;(S==="undefined"||S==="boolean")&&(i=null);var b=!1;if(i===null)b=!0;else switch(S){case"string":case"number":b=!0;break;case"object":switch(i.$$typeof){case Wg:case Iq:b=!0}}if(b)return b=i,p=p(b),i=f===""?"."+u1(b,0):f,LP(p)?(l="",i!=null&&(l=i.replace(kP,"$&/")+"/"),e0(p,o,l,"",function(F){return F})):p!=null&&(wb(p)&&(p=kq(p,l+(!p.key||b&&b.key===p.key?"":(""+p.key).replace(kP,"$&/")+"/")+i)),o.push(p)),1;if(b=0,f=f===""?".":f+":",LP(i))for(var g=0;g<i.length;g++){S=i[g];var w=f+u1(S,g);b+=e0(S,o,l,w,p)}else if(w=Lq(i),typeof w=="function")for(i=w.call(i),g=0;!(S=i.next()).done;)S=S.value,w=f+u1(S,g++),b+=e0(S,o,l,w,p);else if(S==="object")throw o=String(i),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return b}function Ny(i,o,l){if(i==null)return i;var f=[],p=0;return e0(i,f,"","",function(S){return o.call(l,S,p++)}),f}function Uq(i){if(i._status===-1){var o=i._result;o=o(),o.then(function(l){(i._status===0||i._status===-1)&&(i._status=1,i._result=l)},function(l){(i._status===0||i._status===-1)&&(i._status=2,i._result=l)}),i._status===-1&&(i._status=0,i._result=o)}if(i._status===1)return i._result.default;throw i._result}var Ta={current:null},t0={transition:null},Bq={ReactCurrentDispatcher:Ta,ReactCurrentBatchConfig:t0,ReactCurrentOwner:Sb};function u3(){throw Error("act(...) is not supported in production builds of React.")}Fr.Children={map:Ny,forEach:function(i,o,l){Ny(i,function(){o.apply(this,arguments)},l)},count:function(i){var o=0;return Ny(i,function(){o++}),o},toArray:function(i){return Ny(i,function(o){return o})||[]},only:function(i){if(!wb(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};Fr.Component=Th;Fr.Fragment=bq;Fr.Profiler=Rq;Fr.PureComponent=_b;Fr.StrictMode=Cq;Fr.Suspense=Dq;Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bq;Fr.act=u3;Fr.cloneElement=function(i,o,l){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var f=n3({},i.props),p=i.key,S=i.ref,b=i._owner;if(o!=null){if(o.ref!==void 0&&(S=o.ref,b=Sb.current),o.key!==void 0&&(p=""+o.key),i.type&&i.type.defaultProps)var g=i.type.defaultProps;for(w in o)o3.call(o,w)&&!a3.hasOwnProperty(w)&&(f[w]=o[w]===void 0&&g!==void 0?g[w]:o[w])}var w=arguments.length-2;if(w===1)f.children=l;else if(1<w){g=Array(w);for(var F=0;F<w;F++)g[F]=arguments[F+2];f.children=g}return{$$typeof:Wg,type:i.type,key:p,ref:S,props:f,_owner:b}};Fr.createContext=function(i){return i={$$typeof:xq,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:Nq,_context:i},i.Consumer=i};Fr.createElement=s3;Fr.createFactory=function(i){var o=s3.bind(null,i);return o.type=i,o};Fr.createRef=function(){return{current:null}};Fr.forwardRef=function(i){return{$$typeof:Mq,render:i}};Fr.isValidElement=wb;Fr.lazy=function(i){return{$$typeof:Oq,_payload:{_status:-1,_result:i},_init:Uq}};Fr.memo=function(i,o){return{$$typeof:Pq,type:i,compare:o===void 0?null:o}};Fr.startTransition=function(i){var o=t0.transition;t0.transition={};try{i()}finally{t0.transition=o}};Fr.unstable_act=u3;Fr.useCallback=function(i,o){return Ta.current.useCallback(i,o)};Fr.useContext=function(i){return Ta.current.useContext(i)};Fr.useDebugValue=function(){};Fr.useDeferredValue=function(i){return Ta.current.useDeferredValue(i)};Fr.useEffect=function(i,o){return Ta.current.useEffect(i,o)};Fr.useId=function(){return Ta.current.useId()};Fr.useImperativeHandle=function(i,o,l){return Ta.current.useImperativeHandle(i,o,l)};Fr.useInsertionEffect=function(i,o){return Ta.current.useInsertionEffect(i,o)};Fr.useLayoutEffect=function(i,o){return Ta.current.useLayoutEffect(i,o)};Fr.useMemo=function(i,o){return Ta.current.useMemo(i,o)};Fr.useReducer=function(i,o,l){return Ta.current.useReducer(i,o,l)};Fr.useRef=function(i){return Ta.current.useRef(i)};Fr.useState=function(i){return Ta.current.useState(i)};Fr.useSyncExternalStore=function(i,o,l){return Ta.current.useSyncExternalStore(i,o,l)};Fr.useTransition=function(){return Ta.current.useTransition()};Fr.version="18.3.1";e3.exports=Fr;var pn=e3.exports;const $o=Eb(pn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jq=pn,Zq=Symbol.for("react.element"),Gq=Symbol.for("react.fragment"),qq=Object.prototype.hasOwnProperty,Hq=jq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kq={key:!0,ref:!0,__self:!0,__source:!0};function l3(i,o,l){var f,p={},S=null,b=null;l!==void 0&&(S=""+l),o.key!==void 0&&(S=""+o.key),o.ref!==void 0&&(b=o.ref);for(f in o)qq.call(o,f)&&!Kq.hasOwnProperty(f)&&(p[f]=o[f]);if(i&&i.defaultProps)for(f in o=i.defaultProps,o)p[f]===void 0&&(p[f]=o[f]);return{$$typeof:Zq,type:i,key:S,ref:b,props:p,_owner:Hq.current}}K0.Fragment=Gq;K0.jsx=l3;K0.jsxs=l3;JF.exports=K0;var xt=JF.exports,uI={},c3={exports:{}},hs={},f3={exports:{}},d3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(Ze,tt){var ut=Ze.length;Ze.push(tt);e:for(;0<ut;){var $e=ut-1>>>1,lt=Ze[$e];if(0<p(lt,tt))Ze[$e]=tt,Ze[ut]=lt,ut=$e;else break e}}function l(Ze){return Ze.length===0?null:Ze[0]}function f(Ze){if(Ze.length===0)return null;var tt=Ze[0],ut=Ze.pop();if(ut!==tt){Ze[0]=ut;e:for(var $e=0,lt=Ze.length,wt=lt>>>1;$e<wt;){var Oe=2*($e+1)-1,Qe=Ze[Oe],ct=Oe+1,Xt=Ze[ct];if(0>p(Qe,ut))ct<lt&&0>p(Xt,Qe)?(Ze[$e]=Xt,Ze[ct]=ut,$e=ct):(Ze[$e]=Qe,Ze[Oe]=ut,$e=Oe);else if(ct<lt&&0>p(Xt,ut))Ze[$e]=Xt,Ze[ct]=ut,$e=ct;else break e}}return tt}function p(Ze,tt){var ut=Ze.sortIndex-tt.sortIndex;return ut!==0?ut:Ze.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;i.unstable_now=function(){return S.now()}}else{var b=Date,g=b.now();i.unstable_now=function(){return b.now()-g}}var w=[],F=[],C=1,y=null,v=3,D=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ze){for(var tt=l(F);tt!==null;){if(tt.callback===null)f(F);else if(tt.startTime<=Ze)f(F),tt.sortIndex=tt.expirationTime,o(w,tt);else break;tt=l(F)}}function R(Ze){if(T=!1,I(Ze),!m)if(l(w)!==null)m=!0,Xe(Z);else{var tt=l(F);tt!==null&&Ae(R,tt.startTime-Ze)}}function Z(Ze,tt){m=!1,T&&(T=!1,x($),$=-1),D=!0;var ut=v;try{for(I(tt),y=l(w);y!==null&&(!(y.expirationTime>tt)||Ze&&!X());){var $e=y.callback;if(typeof $e=="function"){y.callback=null,v=y.priorityLevel;var lt=$e(y.expirationTime<=tt);tt=i.unstable_now(),typeof lt=="function"?y.callback=lt:y===l(w)&&f(w),I(tt)}else f(w);y=l(w)}if(y!==null)var wt=!0;else{var Oe=l(F);Oe!==null&&Ae(R,Oe.startTime-tt),wt=!1}return wt}finally{y=null,v=ut,D=!1}}var z=!1,W=null,$=-1,le=5,N=-1;function X(){return!(i.unstable_now()-N<le)}function ce(){if(W!==null){var Ze=i.unstable_now();N=Ze;var tt=!0;try{tt=W(!0,Ze)}finally{tt?oe():(z=!1,W=null)}}else z=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,be=he.port2;he.port1.onmessage=ce,oe=function(){be.postMessage(null)}}else oe=function(){U(ce,0)};function Xe(Ze){W=Ze,z||(z=!0,oe())}function Ae(Ze,tt){$=U(function(){Ze(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ze){Ze.callback=null},i.unstable_continueExecution=function(){m||D||(m=!0,Xe(Z))},i.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<Ze?Math.floor(1e3/Ze):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return l(w)},i.unstable_next=function(Ze){switch(v){case 1:case 2:case 3:var tt=3;break;default:tt=v}var ut=v;v=tt;try{return Ze()}finally{v=ut}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ze,tt){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var ut=v;v=Ze;try{return tt()}finally{v=ut}},i.unstable_scheduleCallback=function(Ze,tt,ut){var $e=i.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?$e+ut:$e):ut=$e,Ze){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=ut+lt,Ze={id:C++,callback:tt,priorityLevel:Ze,startTime:ut,expirationTime:lt,sortIndex:-1},ut>$e?(Ze.sortIndex=ut,o(F,Ze),l(w)===null&&Ze===l(F)&&(T?(x($),$=-1):T=!0,Ae(R,ut-$e))):(Ze.sortIndex=lt,o(w,Ze),m||D||(m=!0,Xe(Z))),Ze},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(Ze){var tt=v;return function(){var ut=v;v=tt;try{return Ze.apply(this,arguments)}finally{v=ut}}}})(d3);f3.exports=d3;var Vq=f3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zq=pn,ds=Vq;function jn(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h3=new Set,Cg={};function Sf(i,o){dh(i,o),dh(i+"Capture",o)}function dh(i,o){for(Cg[i]=o,i=0;i<o.length;i++)h3.add(o[i])}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lI=Object.prototype.hasOwnProperty,Yq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FP={},UP={};function Wq(i){return lI.call(UP,i)?!0:lI.call(FP,i)?!1:Yq.test(i)?UP[i]=!0:(FP[i]=!0,!1)}function $q(i,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Xq(i,o,l,f){if(o===null||typeof o>"u"||$q(i,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function Sa(i,o,l,f,p,S,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=S,this.removeEmptyString=b}var Zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Zo[i]=new Sa(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];Zo[o]=new Sa(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Zo[i]=new Sa(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Zo[i]=new Sa(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Zo[i]=new Sa(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Zo[i]=new Sa(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Zo[i]=new Sa(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Zo[i]=new Sa(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Zo[i]=new Sa(i,5,!1,i.toLowerCase(),null,!1,!1)});var Ab=/[\-:]([a-z])/g;function Ib(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Ab,Ib);Zo[o]=new Sa(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Ab,Ib);Zo[o]=new Sa(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Ab,Ib);Zo[o]=new Sa(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Zo[i]=new Sa(i,1,!1,i.toLowerCase(),null,!1,!1)});Zo.xlinkHref=new Sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Zo[i]=new Sa(i,1,!1,i.toLowerCase(),null,!0,!0)});function bb(i,o,l,f){var p=Zo.hasOwnProperty(o)?Zo[o]:null;(p!==null?p.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Xq(o,l,p,f)&&(l=null),f||p===null?Wq(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,f=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,f?i.setAttributeNS(f,o,l):i.setAttribute(o,l))))}var wl=zq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xy=Symbol.for("react.element"),Kd=Symbol.for("react.portal"),Vd=Symbol.for("react.fragment"),Cb=Symbol.for("react.strict_mode"),cI=Symbol.for("react.profiler"),p3=Symbol.for("react.provider"),g3=Symbol.for("react.context"),Rb=Symbol.for("react.forward_ref"),fI=Symbol.for("react.suspense"),dI=Symbol.for("react.suspense_list"),Nb=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),m3=Symbol.for("react.offscreen"),BP=Symbol.iterator;function Jp(i){return i===null||typeof i!="object"?null:(i=BP&&i[BP]||i["@@iterator"],typeof i=="function"?i:null)}var Vi=Object.assign,l1;function fg(i){if(l1===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);l1=o&&o[1]||""}return"\n"+l1+i}var c1=!1;function f1(i,o){if(!i||c1)return"";c1=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(F){var f=F}Reflect.construct(i,[],o)}else{try{o.call()}catch(F){f=F}i.call(o.prototype)}else{try{throw Error()}catch(F){f=F}i()}}catch(F){if(F&&f&&typeof F.stack=="string"){for(var p=F.stack.split("\n"),S=f.stack.split("\n"),b=p.length-1,g=S.length-1;1<=b&&0<=g&&p[b]!==S[g];)g--;for(;1<=b&&0<=g;b--,g--)if(p[b]!==S[g]){if(b!==1||g!==1)do if(b--,g--,0>g||p[b]!==S[g]){var w="\n"+p[b].replace(" at new "," at ");return i.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",i.displayName)),w}while(1<=b&&0<=g);break}}}finally{c1=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?fg(i):""}function Qq(i){switch(i.tag){case 5:return fg(i.type);case 16:return fg("Lazy");case 13:return fg("Suspense");case 19:return fg("SuspenseList");case 0:case 2:case 15:return i=f1(i.type,!1),i;case 11:return i=f1(i.type.render,!1),i;case 1:return i=f1(i.type,!0),i;default:return""}}function hI(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Vd:return"Fragment";case Kd:return"Portal";case cI:return"Profiler";case Cb:return"StrictMode";case fI:return"Suspense";case dI:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case g3:return(i.displayName||"Context")+".Consumer";case p3:return(i._context.displayName||"Context")+".Provider";case Rb:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Nb:return o=i.displayName||null,o!==null?o:hI(i.type)||"Memo";case Ql:o=i._payload,i=i._init;try{return hI(i(o))}catch(l){}}return null}function Jq(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hI(o);case 8:return o===Cb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function hc(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function v3(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function e9(i){var o=v3(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,S=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(b){f=""+b,S.call(this,b)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(b){f=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function My(i){i._valueTracker||(i._valueTracker=e9(i))}function y3(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return i&&(f=v3(i)?i.checked?"true":"false":i.value),i=f,i!==l?(o.setValue(i),!0):!1}function g0(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(o){return i.body}}function pI(i,o){var l=o.checked;return Vi({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:i._wrapperState.initialChecked})}function jP(i,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=hc(o.value!=null?o.value:l),i._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function E3(i,o){o=o.checked,o!=null&&bb(i,"checked",o,!1)}function gI(i,o){E3(i,o);var l=hc(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?mI(i,o.type,l):o.hasOwnProperty("defaultValue")&&mI(i,o.type,hc(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ZP(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function mI(i,o,l){(o!=="number"||g0(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var dg=Array.isArray;function ah(i,o,l,f){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&f&&(i[l].defaultSelected=!0)}else{for(l=""+hc(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,f&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function vI(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Vi({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function GP(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(jn(92));if(dg(l)){if(1<l.length)throw Error(jn(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:hc(l)}}function _3(i,o){var l=hc(o.value),f=hc(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),f!=null&&(i.defaultValue=""+f)}function qP(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function T3(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yI(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?T3(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Dy,S3=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,f,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Dy=Dy||document.createElement("div"),Dy.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Dy.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Rg(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var yg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t9=["Webkit","ms","Moz","O"];Object.keys(yg).forEach(function(i){t9.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),yg[o]=yg[i]})});function w3(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||yg.hasOwnProperty(i)&&yg[i]?(""+o).trim():o+"px"}function A3(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,p=w3(l,o[l],f);l==="float"&&(l="cssFloat"),f?i.setProperty(l,p):i[l]=p}}var n9=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function EI(i,o){if(o){if(n9[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(jn(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(jn(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(jn(61))}if(o.style!=null&&typeof o.style!="object")throw Error(jn(62))}}function _I(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TI=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var SI=null,sh=null,uh=null;function HP(i){if(i=Qg(i)){if(typeof SI!="function")throw Error(jn(280));var o=i.stateNode;o&&(o=$0(o),SI(i.stateNode,i.type,o))}}function I3(i){sh?uh?uh.push(i):uh=[i]:sh=i}function b3(){if(sh){var i=sh,o=uh;if(uh=sh=null,HP(i),o)for(i=0;i<o.length;i++)HP(o[i])}}function C3(i,o){return i(o)}function R3(){}var d1=!1;function N3(i,o,l){if(d1)return i(o,l);d1=!0;try{return C3(i,o,l)}finally{d1=!1,(sh!==null||uh!==null)&&(R3(),b3())}}function Ng(i,o){var l=i.stateNode;if(l===null)return null;var f=$0(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(jn(231,o,typeof l));return l}var wI=!1;if(El)try{var eg={};Object.defineProperty(eg,"passive",{get:function(){wI=!0}}),window.addEventListener("test",eg,eg),window.removeEventListener("test",eg,eg)}catch(i){wI=!1}function r9(i,o,l,f,p,S,b,g,w){var F=Array.prototype.slice.call(arguments,3);try{o.apply(l,F)}catch(C){this.onError(C)}}var Eg=!1,m0=null,v0=!1,AI=null,i9={onError:function(i){Eg=!0,m0=i}};function o9(i,o,l,f,p,S,b,g,w){Eg=!1,m0=null,r9.apply(i9,arguments)}function a9(i,o,l,f,p,S,b,g,w){if(o9.apply(this,arguments),Eg){if(Eg){var F=m0;Eg=!1,m0=null}else throw Error(jn(198));v0||(v0=!0,AI=F)}}function wf(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function x3(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function KP(i){if(wf(i)!==i)throw Error(jn(188))}function s9(i){var o=i.alternate;if(!o){if(o=wf(i),o===null)throw Error(jn(188));return o!==i?null:i}for(var l=i,f=o;;){var p=l.return;if(p===null)break;var S=p.alternate;if(S===null){if(f=p.return,f!==null){l=f;continue}break}if(p.child===S.child){for(S=p.child;S;){if(S===l)return KP(p),i;if(S===f)return KP(p),o;S=S.sibling}throw Error(jn(188))}if(l.return!==f.return)l=p,f=S;else{for(var b=!1,g=p.child;g;){if(g===l){b=!0,l=p,f=S;break}if(g===f){b=!0,f=p,l=S;break}g=g.sibling}if(!b){for(g=S.child;g;){if(g===l){b=!0,l=S,f=p;break}if(g===f){b=!0,f=S,l=p;break}g=g.sibling}if(!b)throw Error(jn(189))}}if(l.alternate!==f)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?i:o}function M3(i){return i=s9(i),i!==null?D3(i):null}function D3(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=D3(i);if(o!==null)return o;i=i.sibling}return null}var P3=ds.unstable_scheduleCallback,VP=ds.unstable_cancelCallback,u9=ds.unstable_shouldYield,l9=ds.unstable_requestPaint,co=ds.unstable_now,c9=ds.unstable_getCurrentPriorityLevel,Mb=ds.unstable_ImmediatePriority,O3=ds.unstable_UserBlockingPriority,y0=ds.unstable_NormalPriority,f9=ds.unstable_LowPriority,L3=ds.unstable_IdlePriority,V0=null,Mu=null;function d9(i){if(Mu&&typeof Mu.onCommitFiberRoot=="function")try{Mu.onCommitFiberRoot(V0,i,void 0,(i.current.flags&128)===128)}catch(o){}}var ou=Math.clz32?Math.clz32:g9,h9=Math.log,p9=Math.LN2;function g9(i){return i>>>=0,i===0?32:31-(h9(i)/p9|0)|0}var Py=64,Oy=4194304;function hg(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function E0(i,o){var l=i.pendingLanes;if(l===0)return 0;var f=0,p=i.suspendedLanes,S=i.pingedLanes,b=l&268435455;if(b!==0){var g=b&~p;g!==0?f=hg(g):(S&=b,S!==0&&(f=hg(S)))}else b=l&~p,b!==0?f=hg(b):S!==0&&(f=hg(S));if(f===0)return 0;if(o!==0&&o!==f&&!(o&p)&&(p=f&-f,S=o&-o,p>=S||p===16&&(S&4194240)!==0))return o;if(f&4&&(f|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)l=31-ou(o),p=1<<l,f|=i[l],o&=~p;return f}function m9(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v9(i,o){for(var l=i.suspendedLanes,f=i.pingedLanes,p=i.expirationTimes,S=i.pendingLanes;0<S;){var b=31-ou(S),g=1<<b,w=p[b];w===-1?(!(g&l)||g&f)&&(p[b]=m9(g,o)):w<=o&&(i.expiredLanes|=g),S&=~g}}function II(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function k3(){var i=Py;return Py<<=1,!(Py&4194240)&&(Py=64),i}function h1(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function $g(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-ou(o),i[o]=l}function y9(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-ou(l),S=1<<p;o[p]=0,f[p]=-1,i[p]=-1,l&=~S}}function Db(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var f=31-ou(l),p=1<<f;p&o|i[f]&o&&(i[f]|=o),l&=~p}}var hi=0;function F3(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var U3,Pb,B3,j3,Z3,bI=!1,Ly=[],ic=null,oc=null,ac=null,xg=new Map,Mg=new Map,ec=[],E9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zP(i,o){switch(i){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":oc=null;break;case"mouseover":case"mouseout":ac=null;break;case"pointerover":case"pointerout":xg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mg.delete(o.pointerId)}}function tg(i,o,l,f,p,S){return i===null||i.nativeEvent!==S?(i={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:S,targetContainers:[p]},o!==null&&(o=Qg(o),o!==null&&Pb(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function _9(i,o,l,f,p){switch(o){case"focusin":return ic=tg(ic,i,o,l,f,p),!0;case"dragenter":return oc=tg(oc,i,o,l,f,p),!0;case"mouseover":return ac=tg(ac,i,o,l,f,p),!0;case"pointerover":var S=p.pointerId;return xg.set(S,tg(xg.get(S)||null,i,o,l,f,p)),!0;case"gotpointercapture":return S=p.pointerId,Mg.set(S,tg(Mg.get(S)||null,i,o,l,f,p)),!0}return!1}function G3(i){var o=sf(i.target);if(o!==null){var l=wf(o);if(l!==null){if(o=l.tag,o===13){if(o=x3(l),o!==null){i.blockedOn=o,Z3(i.priority,function(){B3(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function n0(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=CI(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);TI=f,l.target.dispatchEvent(f),TI=null}else return o=Qg(l),o!==null&&Pb(o),i.blockedOn=l,!1;o.shift()}return!0}function YP(i,o,l){n0(i)&&l.delete(o)}function T9(){bI=!1,ic!==null&&n0(ic)&&(ic=null),oc!==null&&n0(oc)&&(oc=null),ac!==null&&n0(ac)&&(ac=null),xg.forEach(YP),Mg.forEach(YP)}function ng(i,o){i.blockedOn===o&&(i.blockedOn=null,bI||(bI=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,T9)))}function Dg(i){function o(p){return ng(p,i)}if(0<Ly.length){ng(Ly[0],i);for(var l=1;l<Ly.length;l++){var f=Ly[l];f.blockedOn===i&&(f.blockedOn=null)}}for(ic!==null&&ng(ic,i),oc!==null&&ng(oc,i),ac!==null&&ng(ac,i),xg.forEach(o),Mg.forEach(o),l=0;l<ec.length;l++)f=ec[l],f.blockedOn===i&&(f.blockedOn=null);for(;0<ec.length&&(l=ec[0],l.blockedOn===null);)G3(l),l.blockedOn===null&&ec.shift()}var lh=wl.ReactCurrentBatchConfig,_0=!0;function S9(i,o,l,f){var p=hi,S=lh.transition;lh.transition=null;try{hi=1,Ob(i,o,l,f)}finally{hi=p,lh.transition=S}}function w9(i,o,l,f){var p=hi,S=lh.transition;lh.transition=null;try{hi=4,Ob(i,o,l,f)}finally{hi=p,lh.transition=S}}function Ob(i,o,l,f){if(_0){var p=CI(i,o,l,f);if(p===null)w1(i,o,f,T0,l),zP(i,f);else if(_9(p,i,o,l,f))f.stopPropagation();else if(zP(i,f),o&4&&-1<E9.indexOf(i)){for(;p!==null;){var S=Qg(p);if(S!==null&&U3(S),S=CI(i,o,l,f),S===null&&w1(i,o,f,T0,l),S===p)break;p=S}p!==null&&f.stopPropagation()}else w1(i,o,f,null,l)}}var T0=null;function CI(i,o,l,f){if(T0=null,i=xb(f),i=sf(i),i!==null)if(o=wf(i),o===null)i=null;else if(l=o.tag,l===13){if(i=x3(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return T0=i,null}function q3(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c9()){case Mb:return 1;case O3:return 4;case y0:case f9:return 16;case L3:return 536870912;default:return 16}default:return 16}}var nc=null,Lb=null,r0=null;function H3(){if(r0)return r0;var i,o=Lb,l=o.length,f,p="value"in nc?nc.value:nc.textContent,S=p.length;for(i=0;i<l&&o[i]===p[i];i++);var b=l-i;for(f=1;f<=b&&o[l-f]===p[S-f];f++);return r0=p.slice(i,1<f?1-f:void 0)}function i0(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ky(){return!0}function WP(){return!1}function ps(i){function o(l,f,p,S,b){this._reactName=l,this._targetInst=p,this.type=f,this.nativeEvent=S,this.target=b,this.currentTarget=null;for(var g in i)i.hasOwnProperty(g)&&(l=i[g],this[g]=l?l(S):S[g]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ky:WP,this.isPropagationStopped=WP,this}return Vi(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ky)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ky)},persist:function(){},isPersistent:ky}),o}var Sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kb=ps(Sh),Xg=Vi({},Sh,{view:0,detail:0}),A9=ps(Xg),p1,g1,rg,z0=Vi({},Xg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fb,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==rg&&(rg&&i.type==="mousemove"?(p1=i.screenX-rg.screenX,g1=i.screenY-rg.screenY):g1=p1=0,rg=i),p1)},movementY:function(i){return"movementY"in i?i.movementY:g1}}),$P=ps(z0),I9=Vi({},z0,{dataTransfer:0}),b9=ps(I9),C9=Vi({},Xg,{relatedTarget:0}),m1=ps(C9),R9=Vi({},Sh,{animationName:0,elapsedTime:0,pseudoElement:0}),N9=ps(R9),x9=Vi({},Sh,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),M9=ps(x9),D9=Vi({},Sh,{data:0}),XP=ps(D9),P9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k9(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=L9[i])?!!o[i]:!1}function Fb(){return k9}var F9=Vi({},Xg,{key:function(i){if(i.key){var o=P9[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=i0(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?O9[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fb,charCode:function(i){return i.type==="keypress"?i0(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?i0(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),U9=ps(F9),B9=Vi({},z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QP=ps(B9),j9=Vi({},Xg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fb}),Z9=ps(j9),G9=Vi({},Sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),q9=ps(G9),H9=Vi({},z0,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),K9=ps(H9),V9=[9,13,27,32],Ub=El&&"CompositionEvent"in window,_g=null;El&&"documentMode"in document&&(_g=document.documentMode);var z9=El&&"TextEvent"in window&&!_g,K3=El&&(!Ub||_g&&8<_g&&11>=_g),JP=" ",eO=!1;function V3(i,o){switch(i){case"keyup":return V9.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z3(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var zd=!1;function Y9(i,o){switch(i){case"compositionend":return z3(o);case"keypress":return o.which!==32?null:(eO=!0,JP);case"textInput":return i=o.data,i===JP&&eO?null:i;default:return null}}function W9(i,o){if(zd)return i==="compositionend"||!Ub&&V3(i,o)?(i=H3(),r0=Lb=nc=null,zd=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return K3&&o.locale!=="ko"?null:o.data;default:return null}}var $9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tO(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!$9[i.type]:o==="textarea"}function Y3(i,o,l,f){I3(f),o=S0(o,"onChange"),0<o.length&&(l=new kb("onChange","change",null,l,f),i.push({event:l,listeners:o}))}var Tg=null,Pg=null;function X9(i){oU(i,0)}function Y0(i){var o=$d(i);if(y3(o))return i}function Q9(i,o){if(i==="change")return o}var W3=!1;if(El){var v1;if(El){var y1="oninput"in document;if(!y1){var nO=document.createElement("div");nO.setAttribute("oninput","return;"),y1=typeof nO.oninput=="function"}v1=y1}else v1=!1;W3=v1&&(!document.documentMode||9<document.documentMode)}function rO(){Tg&&(Tg.detachEvent("onpropertychange",$3),Pg=Tg=null)}function $3(i){if(i.propertyName==="value"&&Y0(Pg)){var o=[];Y3(o,Pg,i,xb(i)),N3(X9,o)}}function J9(i,o,l){i==="focusin"?(rO(),Tg=o,Pg=l,Tg.attachEvent("onpropertychange",$3)):i==="focusout"&&rO()}function eH(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Y0(Pg)}function tH(i,o){if(i==="click")return Y0(o)}function nH(i,o){if(i==="input"||i==="change")return Y0(o)}function rH(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var uu=typeof Object.is=="function"?Object.is:rH;function Og(i,o){if(uu(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var p=l[f];if(!lI.call(o,p)||!uu(i[p],o[p]))return!1}return!0}function iO(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function oO(i,o){var l=iO(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=o&&f>=o)return{node:l,offset:o-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=iO(l)}}function X3(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?X3(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Q3(){for(var i=window,o=g0();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch(f){l=!1}if(l)i=o.contentWindow;else break;o=g0(i.document)}return o}function Bb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function iH(i){var o=Q3(),l=i.focusedElem,f=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&X3(l.ownerDocument.documentElement,l)){if(f!==null&&Bb(l)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,S=Math.min(f.start,p);f=f.end===void 0?S:Math.min(f.end,p),!i.extend&&S>f&&(p=f,f=S,S=p),p=oO(l,S);var b=oO(l,f);p&&b&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),S>f?(i.addRange(o),i.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var oH=El&&"documentMode"in document&&11>=document.documentMode,Yd=null,RI=null,Sg=null,NI=!1;function aO(i,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;NI||Yd==null||Yd!==g0(f)||(f=Yd,"selectionStart"in f&&Bb(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Sg&&Og(Sg,f)||(Sg=f,f=S0(RI,"onSelect"),0<f.length&&(o=new kb("onSelect","select",null,o,l),i.push({event:o,listeners:f}),o.target=Yd)))}function Fy(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Wd={animationend:Fy("Animation","AnimationEnd"),animationiteration:Fy("Animation","AnimationIteration"),animationstart:Fy("Animation","AnimationStart"),transitionend:Fy("Transition","TransitionEnd")},E1={},J3={};El&&(J3=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function W0(i){if(E1[i])return E1[i];if(!Wd[i])return i;var o=Wd[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in J3)return E1[i]=o[l];return i}var eU=W0("animationend"),tU=W0("animationiteration"),nU=W0("animationstart"),rU=W0("transitionend"),iU=new Map,sO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gc(i,o){iU.set(i,o),Sf(o,[i])}for(var _1=0;_1<sO.length;_1++){var T1=sO[_1],aH=T1.toLowerCase(),sH=T1[0].toUpperCase()+T1.slice(1);gc(aH,"on"+sH)}gc(eU,"onAnimationEnd");gc(tU,"onAnimationIteration");gc(nU,"onAnimationStart");gc("dblclick","onDoubleClick");gc("focusin","onFocus");gc("focusout","onBlur");gc(rU,"onTransitionEnd");dh("onMouseEnter",["mouseout","mouseover"]);dh("onMouseLeave",["mouseout","mouseover"]);dh("onPointerEnter",["pointerout","pointerover"]);dh("onPointerLeave",["pointerout","pointerover"]);Sf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uH=new Set("cancel close invalid load scroll toggle".split(" ").concat(pg));function uO(i,o,l){var f=i.type||"unknown-event";i.currentTarget=l,a9(f,o,void 0,i),i.currentTarget=null}function oU(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],p=f.event;f=f.listeners;e:{var S=void 0;if(o)for(var b=f.length-1;0<=b;b--){var g=f[b],w=g.instance,F=g.currentTarget;if(g=g.listener,w!==S&&p.isPropagationStopped())break e;uO(p,g,F),S=w}else for(b=0;b<f.length;b++){if(g=f[b],w=g.instance,F=g.currentTarget,g=g.listener,w!==S&&p.isPropagationStopped())break e;uO(p,g,F),S=w}}}if(v0)throw i=AI,v0=!1,AI=null,i}function xi(i,o){var l=o[OI];l===void 0&&(l=o[OI]=new Set);var f=i+"__bubble";l.has(f)||(aU(o,i,2,!1),l.add(f))}function S1(i,o,l){var f=0;o&&(f|=4),aU(l,i,f,o)}var Uy="_reactListening"+Math.random().toString(36).slice(2);function Lg(i){if(!i[Uy]){i[Uy]=!0,h3.forEach(function(l){l!=="selectionchange"&&(uH.has(l)||S1(l,!1,i),S1(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Uy]||(o[Uy]=!0,S1("selectionchange",!1,o))}}function aU(i,o,l,f){switch(q3(o)){case 1:var p=S9;break;case 4:p=w9;break;default:p=Ob}l=p.bind(null,o,l,i),p=void 0,!wI||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),f?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function w1(i,o,l,f,p){var S=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var g=f.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(b===4)for(b=f.return;b!==null;){var w=b.tag;if((w===3||w===4)&&(w=b.stateNode.containerInfo,w===p||w.nodeType===8&&w.parentNode===p))return;b=b.return}for(;g!==null;){if(b=sf(g),b===null)return;if(w=b.tag,w===5||w===6){f=S=b;continue e}g=g.parentNode}}f=f.return}N3(function(){var F=S,C=xb(l),y=[];e:{var v=iU.get(i);if(v!==void 0){var D=kb,m=i;switch(i){case"keypress":if(i0(l)===0)break e;case"keydown":case"keyup":D=U9;break;case"focusin":m="focus",D=m1;break;case"focusout":m="blur",D=m1;break;case"beforeblur":case"afterblur":D=m1;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=$P;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=b9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Z9;break;case eU:case tU:case nU:D=N9;break;case rU:D=q9;break;case"scroll":D=A9;break;case"wheel":D=K9;break;case"copy":case"cut":case"paste":D=M9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=QP}var T=(o&4)!==0,U=!T&&i==="scroll",x=T?v!==null?v+"Capture":null:v;T=[];for(var _=F,I;_!==null;){I=_;var R=I.stateNode;if(I.tag===5&&R!==null&&(I=R,x!==null&&(R=Ng(_,x),R!=null&&T.push(kg(_,R,I)))),U)break;_=_.return}0<T.length&&(v=new D(v,m,null,l,C),y.push({event:v,listeners:T}))}}if(!(o&7)){e:{if(v=i==="mouseover"||i==="pointerover",D=i==="mouseout"||i==="pointerout",v&&l!==TI&&(m=l.relatedTarget||l.fromElement)&&(sf(m)||m[_l]))break e;if((D||v)&&(v=C.window===C?C:(v=C.ownerDocument)?v.defaultView||v.parentWindow:window,D?(m=l.relatedTarget||l.toElement,D=F,m=m?sf(m):null,m!==null&&(U=wf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(D=null,m=F),D!==m)){if(T=$P,R="onMouseLeave",x="onMouseEnter",_="mouse",(i==="pointerout"||i==="pointerover")&&(T=QP,R="onPointerLeave",x="onPointerEnter",_="pointer"),U=D==null?v:$d(D),I=m==null?v:$d(m),v=new T(R,_+"leave",D,l,C),v.target=U,v.relatedTarget=I,R=null,sf(C)===F&&(T=new T(x,_+"enter",m,l,C),T.target=I,T.relatedTarget=U,R=T),U=R,D&&m)t:{for(T=D,x=m,_=0,I=T;I;I=Bd(I))_++;for(I=0,R=x;R;R=Bd(R))I++;for(;0<_-I;)T=Bd(T),_--;for(;0<I-_;)x=Bd(x),I--;for(;_--;){if(T===x||x!==null&&T===x.alternate)break t;T=Bd(T),x=Bd(x)}T=null}else T=null;D!==null&&lO(y,v,D,T,!1),m!==null&&U!==null&&lO(y,U,m,T,!0)}}e:{if(v=F?$d(F):window,D=v.nodeName&&v.nodeName.toLowerCase(),D==="select"||D==="input"&&v.type==="file")var Z=Q9;else if(tO(v))if(W3)Z=nH;else{Z=eH;var z=J9}else(D=v.nodeName)&&D.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(Z=tH);if(Z&&(Z=Z(i,F))){Y3(y,Z,l,C);break e}z&&z(i,v,F),i==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&mI(v,"number",v.value)}switch(z=F?$d(F):window,i){case"focusin":(tO(z)||z.contentEditable==="true")&&(Yd=z,RI=F,Sg=null);break;case"focusout":Sg=RI=Yd=null;break;case"mousedown":NI=!0;break;case"contextmenu":case"mouseup":case"dragend":NI=!1,aO(y,l,C);break;case"selectionchange":if(oH)break;case"keydown":case"keyup":aO(y,l,C)}var W;if(Ub)e:{switch(i){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else zd?V3(i,l)&&($="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&($="onCompositionStart");$&&(K3&&l.locale!=="ko"&&(zd||$!=="onCompositionStart"?$==="onCompositionEnd"&&zd&&(W=H3()):(nc=C,Lb="value"in nc?nc.value:nc.textContent,zd=!0)),z=S0(F,$),0<z.length&&($=new XP($,i,null,l,C),y.push({event:$,listeners:z}),W?$.data=W:(W=z3(l),W!==null&&($.data=W)))),(W=z9?Y9(i,l):W9(i,l))&&(F=S0(F,"onBeforeInput"),0<F.length&&(C=new XP("onBeforeInput","beforeinput",null,l,C),y.push({event:C,listeners:F}),C.data=W))}oU(y,o)})}function kg(i,o,l){return{instance:i,listener:o,currentTarget:l}}function S0(i,o){for(var l=o+"Capture",f=[];i!==null;){var p=i,S=p.stateNode;p.tag===5&&S!==null&&(p=S,S=Ng(i,l),S!=null&&f.unshift(kg(i,S,p)),S=Ng(i,o),S!=null&&f.push(kg(i,S,p))),i=i.return}return f}function Bd(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function lO(i,o,l,f,p){for(var S=o._reactName,b=[];l!==null&&l!==f;){var g=l,w=g.alternate,F=g.stateNode;if(w!==null&&w===f)break;g.tag===5&&F!==null&&(g=F,p?(w=Ng(l,S),w!=null&&b.unshift(kg(l,w,g))):p||(w=Ng(l,S),w!=null&&b.push(kg(l,w,g)))),l=l.return}b.length!==0&&i.push({event:o,listeners:b})}var lH=/\r\n?/g,cH=/\u0000|\uFFFD/g;function cO(i){return(typeof i=="string"?i:""+i).replace(lH,"\n").replace(cH,"")}function By(i,o,l){if(o=cO(o),cO(i)!==o&&l)throw Error(jn(425))}function w0(){}var xI=null,MI=null;function DI(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var PI=typeof setTimeout=="function"?setTimeout:void 0,fH=typeof clearTimeout=="function"?clearTimeout:void 0,fO=typeof Promise=="function"?Promise:void 0,dH=typeof queueMicrotask=="function"?queueMicrotask:typeof fO<"u"?function(i){return fO.resolve(null).then(i).catch(hH)}:PI;function hH(i){setTimeout(function(){throw i})}function A1(i,o){var l=o,f=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(f===0){i.removeChild(p),Dg(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=p}while(l);Dg(o)}function sc(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function dO(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var wh=Math.random().toString(36).slice(2),xu="__reactFiber$"+wh,Fg="__reactProps$"+wh,_l="__reactContainer$"+wh,OI="__reactEvents$"+wh,pH="__reactListeners$"+wh,gH="__reactHandles$"+wh;function sf(i){var o=i[xu];if(o)return o;for(var l=i.parentNode;l;){if(o=l[_l]||l[xu]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=dO(i);i!==null;){if(l=i[xu])return l;i=dO(i)}return o}i=l,l=i.parentNode}return null}function Qg(i){return i=i[xu]||i[_l],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function $d(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(jn(33))}function $0(i){return i[Fg]||null}var LI=[],Xd=-1;function mc(i){return{current:i}}function Mi(i){0>Xd||(i.current=LI[Xd],LI[Xd]=null,Xd--)}function bi(i,o){Xd++,LI[Xd]=i.current,i.current=o}var pc={},Jo=mc(pc),Ba=mc(!1),gf=pc;function hh(i,o){var l=i.type.contextTypes;if(!l)return pc;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var p={},S;for(S in l)p[S]=o[S];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function ja(i){return i=i.childContextTypes,i!=null}function A0(){Mi(Ba),Mi(Jo)}function hO(i,o,l){if(Jo.current!==pc)throw Error(jn(168));bi(Jo,o),bi(Ba,l)}function sU(i,o,l){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var p in f)if(!(p in o))throw Error(jn(108,Jq(i)||"Unknown",p));return Vi({},l,f)}function I0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||pc,gf=Jo.current,bi(Jo,i),bi(Ba,Ba.current),!0}function pO(i,o,l){var f=i.stateNode;if(!f)throw Error(jn(169));l?(i=sU(i,o,gf),f.__reactInternalMemoizedMergedChildContext=i,Mi(Ba),Mi(Jo),bi(Jo,i)):Mi(Ba),bi(Ba,l)}var gl=null,X0=!1,I1=!1;function uU(i){gl===null?gl=[i]:gl.push(i)}function mH(i){X0=!0,uU(i)}function vc(){if(!I1&&gl!==null){I1=!0;var i=0,o=hi;try{var l=gl;for(hi=1;i<l.length;i++){var f=l[i];do f=f(!0);while(f!==null)}gl=null,X0=!1}catch(p){throw gl!==null&&(gl=gl.slice(i+1)),P3(Mb,vc),p}finally{hi=o,I1=!1}}return null}var Qd=[],Jd=0,b0=null,C0=0,As=[],Is=0,mf=null,ml=1,vl="";function nf(i,o){Qd[Jd++]=C0,Qd[Jd++]=b0,b0=i,C0=o}function lU(i,o,l){As[Is++]=ml,As[Is++]=vl,As[Is++]=mf,mf=i;var f=ml;i=vl;var p=32-ou(f)-1;f&=~(1<<p),l+=1;var S=32-ou(o)+p;if(30<S){var b=p-p%5;S=(f&(1<<b)-1).toString(32),f>>=b,p-=b,ml=1<<32-ou(o)+p|l<<p|f,vl=S+i}else ml=1<<S|l<<p|f,vl=i}function jb(i){i.return!==null&&(nf(i,1),lU(i,1,0))}function Zb(i){for(;i===b0;)b0=Qd[--Jd],Qd[Jd]=null,C0=Qd[--Jd],Qd[Jd]=null;for(;i===mf;)mf=As[--Is],As[Is]=null,vl=As[--Is],As[Is]=null,ml=As[--Is],As[Is]=null}var fs=null,ls=null,Ui=!1,eu=null;function cU(i,o){var l=Cs(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function gO(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,fs=i,ls=sc(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,fs=i,ls=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=mf!==null?{id:ml,overflow:vl}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Cs(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,fs=i,ls=null,!0):!1;default:return!1}}function kI(i){return(i.mode&1)!==0&&(i.flags&128)===0}function FI(i){if(Ui){var o=ls;if(o){var l=o;if(!gO(i,o)){if(kI(i))throw Error(jn(418));o=sc(l.nextSibling);var f=fs;o&&gO(i,o)?cU(f,l):(i.flags=i.flags&-4097|2,Ui=!1,fs=i)}}else{if(kI(i))throw Error(jn(418));i.flags=i.flags&-4097|2,Ui=!1,fs=i}}}function mO(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;fs=i}function jy(i){if(i!==fs)return!1;if(!Ui)return mO(i),Ui=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!DI(i.type,i.memoizedProps)),o&&(o=ls)){if(kI(i))throw fU(),Error(jn(418));for(;o;)cU(i,o),o=sc(o.nextSibling)}if(mO(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(jn(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){ls=sc(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}ls=null}}else ls=fs?sc(i.stateNode.nextSibling):null;return!0}function fU(){for(var i=ls;i;)i=sc(i.nextSibling)}function ph(){ls=fs=null,Ui=!1}function Gb(i){eu===null?eu=[i]:eu.push(i)}var vH=wl.ReactCurrentBatchConfig;function ig(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var f=l.stateNode}if(!f)throw Error(jn(147,i));var p=f,S=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===S?o.ref:(o=function(b){var g=p.refs;b===null?delete g[S]:g[S]=b},o._stringRef=S,o)}if(typeof i!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,i))}return i}function Zy(i,o){throw i=Object.prototype.toString.call(o),Error(jn(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function vO(i){var o=i._init;return o(i._payload)}function dU(i){function o(x,_){if(i){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function l(x,_){if(!i)return null;for(;_!==null;)o(x,_),_=_.sibling;return null}function f(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function p(x,_){return x=fc(x,_),x.index=0,x.sibling=null,x}function S(x,_,I){return x.index=I,i?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function b(x){return i&&x.alternate===null&&(x.flags|=2),x}function g(x,_,I,R){return _===null||_.tag!==6?(_=D1(I,x.mode,R),_.return=x,_):(_=p(_,I),_.return=x,_)}function w(x,_,I,R){var Z=I.type;return Z===Vd?C(x,_,I.props.children,R,I.key):_!==null&&(_.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ql&&vO(Z)===_.type)?(R=p(_,I.props),R.ref=ig(x,_,I),R.return=x,R):(R=f0(I.type,I.key,I.props,null,x.mode,R),R.ref=ig(x,_,I),R.return=x,R)}function F(x,_,I,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=P1(I,x.mode,R),_.return=x,_):(_=p(_,I.children||[]),_.return=x,_)}function C(x,_,I,R,Z){return _===null||_.tag!==7?(_=df(I,x.mode,R,Z),_.return=x,_):(_=p(_,I),_.return=x,_)}function y(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=D1(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xy:return I=f0(_.type,_.key,_.props,null,x.mode,I),I.ref=ig(x,null,_),I.return=x,I;case Kd:return _=P1(_,x.mode,I),_.return=x,_;case Ql:var R=_._init;return y(x,R(_._payload),I)}if(dg(_)||Jp(_))return _=df(_,x.mode,I,null),_.return=x,_;Zy(x,_)}return null}function v(x,_,I,R){var Z=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Z!==null?null:g(x,_,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case xy:return I.key===Z?w(x,_,I,R):null;case Kd:return I.key===Z?F(x,_,I,R):null;case Ql:return Z=I._init,v(x,_,Z(I._payload),R)}if(dg(I)||Jp(I))return Z!==null?null:C(x,_,I,R,null);Zy(x,I)}return null}function D(x,_,I,R,Z){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(I)||null,g(_,x,""+R,Z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case xy:return x=x.get(R.key===null?I:R.key)||null,w(_,x,R,Z);case Kd:return x=x.get(R.key===null?I:R.key)||null,F(_,x,R,Z);case Ql:var z=R._init;return D(x,_,I,z(R._payload),Z)}if(dg(R)||Jp(R))return x=x.get(I)||null,C(_,x,R,Z,null);Zy(_,R)}return null}function m(x,_,I,R){for(var Z=null,z=null,W=_,$=_=0,le=null;W!==null&&$<I.length;$++){W.index>$?(le=W,W=null):le=W.sibling;var N=v(x,W,I[$],R);if(N===null){W===null&&(W=le);break}i&&W&&N.alternate===null&&o(x,W),_=S(N,_,$),z===null?Z=N:z.sibling=N,z=N,W=le}if($===I.length)return l(x,W),Ui&&nf(x,$),Z;if(W===null){for(;$<I.length;$++)W=y(x,I[$],R),W!==null&&(_=S(W,_,$),z===null?Z=W:z.sibling=W,z=W);return Ui&&nf(x,$),Z}for(W=f(x,W);$<I.length;$++)le=D(W,x,$,I[$],R),le!==null&&(i&&le.alternate!==null&&W.delete(le.key===null?$:le.key),_=S(le,_,$),z===null?Z=le:z.sibling=le,z=le);return i&&W.forEach(function(X){return o(x,X)}),Ui&&nf(x,$),Z}function T(x,_,I,R){var Z=Jp(I);if(typeof Z!="function")throw Error(jn(150));if(I=Z.call(I),I==null)throw Error(jn(151));for(var z=Z=null,W=_,$=_=0,le=null,N=I.next();W!==null&&!N.done;$++,N=I.next()){W.index>$?(le=W,W=null):le=W.sibling;var X=v(x,W,N.value,R);if(X===null){W===null&&(W=le);break}i&&W&&X.alternate===null&&o(x,W),_=S(X,_,$),z===null?Z=X:z.sibling=X,z=X,W=le}if(N.done)return l(x,W),Ui&&nf(x,$),Z;if(W===null){for(;!N.done;$++,N=I.next())N=y(x,N.value,R),N!==null&&(_=S(N,_,$),z===null?Z=N:z.sibling=N,z=N);return Ui&&nf(x,$),Z}for(W=f(x,W);!N.done;$++,N=I.next())N=D(W,x,$,N.value,R),N!==null&&(i&&N.alternate!==null&&W.delete(N.key===null?$:N.key),_=S(N,_,$),z===null?Z=N:z.sibling=N,z=N);return i&&W.forEach(function(ce){return o(x,ce)}),Ui&&nf(x,$),Z}function U(x,_,I,R){if(typeof I=="object"&&I!==null&&I.type===Vd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case xy:e:{for(var Z=I.key,z=_;z!==null;){if(z.key===Z){if(Z=I.type,Z===Vd){if(z.tag===7){l(x,z.sibling),_=p(z,I.props.children),_.return=x,x=_;break e}}else if(z.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ql&&vO(Z)===z.type){l(x,z.sibling),_=p(z,I.props),_.ref=ig(x,z,I),_.return=x,x=_;break e}l(x,z);break}else o(x,z);z=z.sibling}I.type===Vd?(_=df(I.props.children,x.mode,R,I.key),_.return=x,x=_):(R=f0(I.type,I.key,I.props,null,x.mode,R),R.ref=ig(x,_,I),R.return=x,x=R)}return b(x);case Kd:e:{for(z=I.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(x,_.sibling),_=p(_,I.children||[]),_.return=x,x=_;break e}else{l(x,_);break}else o(x,_);_=_.sibling}_=P1(I,x.mode,R),_.return=x,x=_}return b(x);case Ql:return z=I._init,U(x,_,z(I._payload),R)}if(dg(I))return m(x,_,I,R);if(Jp(I))return T(x,_,I,R);Zy(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(x,_.sibling),_=p(_,I),_.return=x,x=_):(l(x,_),_=D1(I,x.mode,R),_.return=x,x=_),b(x)):l(x,_)}return U}var gh=dU(!0),hU=dU(!1),R0=mc(null),N0=null,eh=null,qb=null;function Hb(){qb=eh=N0=null}function Kb(i){var o=R0.current;Mi(R0),i._currentValue=o}function UI(i,o,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===l)break;i=i.return}}function ch(i,o){N0=i,qb=eh=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ua=!0),i.firstContext=null)}function Ns(i){var o=i._currentValue;if(qb!==i)if(i={context:i,memoizedValue:o,next:null},eh===null){if(N0===null)throw Error(jn(308));eh=i,N0.dependencies={lanes:0,firstContext:i}}else eh=eh.next=i;return o}var uf=null;function Vb(i){uf===null?uf=[i]:uf.push(i)}function pU(i,o,l,f){var p=o.interleaved;return p===null?(l.next=l,Vb(o)):(l.next=p.next,p.next=l),o.interleaved=l,Tl(i,f)}function Tl(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Jl=!1;function zb(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gU(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function yl(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function uc(i,o,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,Xr&2){var p=f.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),f.pending=o,Tl(i,l)}return p=f.interleaved,p===null?(o.next=o,Vb(f)):(o.next=p.next,p.next=o),f.interleaved=o,Tl(i,l)}function o0(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Db(i,l)}}function yO(i,o){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var p=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?p=S=b:S=S.next=b,l=l.next}while(l!==null);S===null?p=S=o:S=S.next=o}else p=S=o;l={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:S,shared:f.shared,effects:f.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function x0(i,o,l,f){var p=i.updateQueue;Jl=!1;var S=p.firstBaseUpdate,b=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var w=g,F=w.next;w.next=null,b===null?S=F:b.next=F,b=w;var C=i.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==b&&(g===null?C.firstBaseUpdate=F:g.next=F,C.lastBaseUpdate=w))}if(S!==null){var y=p.baseState;b=0,C=F=w=null,g=S;do{var v=g.lane,D=g.eventTime;if((f&v)===v){C!==null&&(C=C.next={eventTime:D,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=i,T=g;switch(v=o,D=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){y=m.call(D,y,v);break e}y=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,v=typeof m=="function"?m.call(D,y,v):m,v==null)break e;y=Vi({},y,v);break e;case 2:Jl=!0}}g.callback!==null&&g.lane!==0&&(i.flags|=64,v=p.effects,v===null?p.effects=[g]:v.push(g))}else D={eventTime:D,lane:v,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(F=C=D,w=y):C=C.next=D,b|=v;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;v=g,g=v.next,v.next=null,p.lastBaseUpdate=v,p.shared.pending=null}}while(!0);if(C===null&&(w=y),p.baseState=w,p.firstBaseUpdate=F,p.lastBaseUpdate=C,o=p.shared.interleaved,o!==null){p=o;do b|=p.lane,p=p.next;while(p!==o)}else S===null&&(p.shared.lanes=0);yf|=b,i.lanes=b,i.memoizedState=y}}function EO(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],p=f.callback;if(p!==null){if(f.callback=null,f=l,typeof p!="function")throw Error(jn(191,p));p.call(f)}}}var Jg={},Du=mc(Jg),Ug=mc(Jg),Bg=mc(Jg);function lf(i){if(i===Jg)throw Error(jn(174));return i}function Yb(i,o){switch(bi(Bg,o),bi(Ug,i),bi(Du,Jg),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:yI(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=yI(o,i)}Mi(Du),bi(Du,o)}function mh(){Mi(Du),Mi(Ug),Mi(Bg)}function mU(i){lf(Bg.current);var o=lf(Du.current),l=yI(o,i.type);o!==l&&(bi(Ug,i),bi(Du,l))}function Wb(i){Ug.current===i&&(Mi(Du),Mi(Ug))}var qi=mc(0);function M0(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var b1=[];function $b(){for(var i=0;i<b1.length;i++)b1[i]._workInProgressVersionPrimary=null;b1.length=0}var a0=wl.ReactCurrentDispatcher,C1=wl.ReactCurrentBatchConfig,vf=0,Ki=null,To=null,xo=null,D0=!1,wg=!1,jg=0,yH=0;function Yo(){throw Error(jn(321))}function Xb(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!uu(i[l],o[l]))return!1;return!0}function Qb(i,o,l,f,p,S){if(vf=S,Ki=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,a0.current=i===null||i.memoizedState===null?SH:wH,i=l(f,p),wg){S=0;do{if(wg=!1,jg=0,25<=S)throw Error(jn(301));S+=1,xo=To=null,o.updateQueue=null,a0.current=AH,i=l(f,p)}while(wg)}if(a0.current=P0,o=To!==null&&To.next!==null,vf=0,xo=To=Ki=null,D0=!1,o)throw Error(jn(300));return i}function Jb(){var i=jg!==0;return jg=0,i}function Nu(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xo===null?Ki.memoizedState=xo=i:xo=xo.next=i,xo}function xs(){if(To===null){var i=Ki.alternate;i=i!==null?i.memoizedState:null}else i=To.next;var o=xo===null?Ki.memoizedState:xo.next;if(o!==null)xo=o,To=i;else{if(i===null)throw Error(jn(310));To=i,i={memoizedState:To.memoizedState,baseState:To.baseState,baseQueue:To.baseQueue,queue:To.queue,next:null},xo===null?Ki.memoizedState=xo=i:xo=xo.next=i}return xo}function Zg(i,o){return typeof o=="function"?o(i):o}function R1(i){var o=xs(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=i;var f=To,p=f.baseQueue,S=l.pending;if(S!==null){if(p!==null){var b=p.next;p.next=S.next,S.next=b}f.baseQueue=p=S,l.pending=null}if(p!==null){S=p.next,f=f.baseState;var g=b=null,w=null,F=S;do{var C=F.lane;if((vf&C)===C)w!==null&&(w=w.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),f=F.hasEagerState?F.eagerState:i(f,F.action);else{var y={lane:C,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};w===null?(g=w=y,b=f):w=w.next=y,Ki.lanes|=C,yf|=C}F=F.next}while(F!==null&&F!==S);w===null?b=f:w.next=g,uu(f,o.memoizedState)||(Ua=!0),o.memoizedState=f,o.baseState=b,o.baseQueue=w,l.lastRenderedState=f}if(i=l.interleaved,i!==null){p=i;do S=p.lane,Ki.lanes|=S,yf|=S,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function N1(i){var o=xs(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=i;var f=l.dispatch,p=l.pending,S=o.memoizedState;if(p!==null){l.pending=null;var b=p=p.next;do S=i(S,b.action),b=b.next;while(b!==p);uu(S,o.memoizedState)||(Ua=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),l.lastRenderedState=S}return[S,f]}function vU(){}function yU(i,o){var l=Ki,f=xs(),p=o(),S=!uu(f.memoizedState,p);if(S&&(f.memoizedState=p,Ua=!0),f=f.queue,eC(TU.bind(null,l,f,i),[i]),f.getSnapshot!==o||S||xo!==null&&xo.memoizedState.tag&1){if(l.flags|=2048,Gg(9,_U.bind(null,l,f,p,o),void 0,null),Mo===null)throw Error(jn(349));vf&30||EU(l,o,p)}return p}function EU(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function _U(i,o,l,f){o.value=l,o.getSnapshot=f,SU(o)&&wU(i)}function TU(i,o,l){return l(function(){SU(o)&&wU(i)})}function SU(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!uu(i,l)}catch(f){return!0}}function wU(i){var o=Tl(i,1);o!==null&&au(o,i,1,-1)}function _O(i){var o=Nu();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zg,lastRenderedState:i},o.queue=i,i=i.dispatch=TH.bind(null,Ki,i),[o.memoizedState,i]}function Gg(i,o,l,f){return i={tag:i,create:o,destroy:l,deps:f,next:null},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,o.lastEffect=i)),i}function AU(){return xs().memoizedState}function s0(i,o,l,f){var p=Nu();Ki.flags|=i,p.memoizedState=Gg(1|o,l,void 0,f===void 0?null:f)}function Q0(i,o,l,f){var p=xs();f=f===void 0?null:f;var S=void 0;if(To!==null){var b=To.memoizedState;if(S=b.destroy,f!==null&&Xb(f,b.deps)){p.memoizedState=Gg(o,l,S,f);return}}Ki.flags|=i,p.memoizedState=Gg(1|o,l,S,f)}function TO(i,o){return s0(8390656,8,i,o)}function eC(i,o){return Q0(2048,8,i,o)}function IU(i,o){return Q0(4,2,i,o)}function bU(i,o){return Q0(4,4,i,o)}function CU(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function RU(i,o,l){return l=l!=null?l.concat([i]):null,Q0(4,4,CU.bind(null,o,i),l)}function tC(){}function NU(i,o){var l=xs();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Xb(o,f[1])?f[0]:(l.memoizedState=[i,o],i)}function xU(i,o){var l=xs();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Xb(o,f[1])?f[0]:(i=i(),l.memoizedState=[i,o],i)}function MU(i,o,l){return vf&21?(uu(l,o)||(l=k3(),Ki.lanes|=l,yf|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ua=!0),i.memoizedState=l)}function EH(i,o){var l=hi;hi=l!==0&&4>l?l:4,i(!0);var f=C1.transition;C1.transition={};try{i(!1),o()}finally{hi=l,C1.transition=f}}function DU(){return xs().memoizedState}function _H(i,o,l){var f=cc(i);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},PU(i))OU(o,l);else if(l=pU(i,o,l,f),l!==null){var p=_a();au(l,i,f,p),LU(l,o,f)}}function TH(i,o,l){var f=cc(i),p={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(PU(i))OU(o,p);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var b=o.lastRenderedState,g=S(b,l);if(p.hasEagerState=!0,p.eagerState=g,uu(g,b)){var w=o.interleaved;w===null?(p.next=p,Vb(o)):(p.next=w.next,w.next=p),o.interleaved=p;return}}catch(F){}finally{}l=pU(i,o,p,f),l!==null&&(p=_a(),au(l,i,f,p),LU(l,o,f))}}function PU(i){var o=i.alternate;return i===Ki||o!==null&&o===Ki}function OU(i,o){wg=D0=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function LU(i,o,l){if(l&4194240){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Db(i,l)}}var P0={readContext:Ns,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},SH={readContext:Ns,useCallback:function(i,o){return Nu().memoizedState=[i,o===void 0?null:o],i},useContext:Ns,useEffect:TO,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,s0(4194308,4,CU.bind(null,o,i),l)},useLayoutEffect:function(i,o){return s0(4194308,4,i,o)},useInsertionEffect:function(i,o){return s0(4,2,i,o)},useMemo:function(i,o){var l=Nu();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var f=Nu();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=_H.bind(null,Ki,i),[f.memoizedState,i]},useRef:function(i){var o=Nu();return i={current:i},o.memoizedState=i},useState:_O,useDebugValue:tC,useDeferredValue:function(i){return Nu().memoizedState=i},useTransition:function(){var i=_O(!1),o=i[0];return i=EH.bind(null,i[1]),Nu().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var f=Ki,p=Nu();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=o(),Mo===null)throw Error(jn(349));vf&30||EU(f,o,l)}p.memoizedState=l;var S={value:l,getSnapshot:o};return p.queue=S,TO(TU.bind(null,f,S,i),[i]),f.flags|=2048,Gg(9,_U.bind(null,f,S,l,o),void 0,null),l},useId:function(){var i=Nu(),o=Mo.identifierPrefix;if(Ui){var l=vl,f=ml;l=(f&~(1<<32-ou(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=jg++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=yH++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},wH={readContext:Ns,useCallback:NU,useContext:Ns,useEffect:eC,useImperativeHandle:RU,useInsertionEffect:IU,useLayoutEffect:bU,useMemo:xU,useReducer:R1,useRef:AU,useState:function(){return R1(Zg)},useDebugValue:tC,useDeferredValue:function(i){var o=xs();return MU(o,To.memoizedState,i)},useTransition:function(){var i=R1(Zg)[0],o=xs().memoizedState;return[i,o]},useMutableSource:vU,useSyncExternalStore:yU,useId:DU,unstable_isNewReconciler:!1},AH={readContext:Ns,useCallback:NU,useContext:Ns,useEffect:eC,useImperativeHandle:RU,useInsertionEffect:IU,useLayoutEffect:bU,useMemo:xU,useReducer:N1,useRef:AU,useState:function(){return N1(Zg)},useDebugValue:tC,useDeferredValue:function(i){var o=xs();return To===null?o.memoizedState=i:MU(o,To.memoizedState,i)},useTransition:function(){var i=N1(Zg)[0],o=xs().memoizedState;return[i,o]},useMutableSource:vU,useSyncExternalStore:yU,useId:DU,unstable_isNewReconciler:!1};function Qs(i,o){if(i&&i.defaultProps){o=Vi({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function BI(i,o,l,f){o=i.memoizedState,l=l(f,o),l=l==null?o:Vi({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var J0={isMounted:function(i){return(i=i._reactInternals)?wf(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var f=_a(),p=cc(i),S=yl(f,p);S.payload=o,l!=null&&(S.callback=l),o=uc(i,S,p),o!==null&&(au(o,i,p,f),o0(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var f=_a(),p=cc(i),S=yl(f,p);S.tag=1,S.payload=o,l!=null&&(S.callback=l),o=uc(i,S,p),o!==null&&(au(o,i,p,f),o0(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=_a(),f=cc(i),p=yl(l,f);p.tag=2,o!=null&&(p.callback=o),o=uc(i,p,f),o!==null&&(au(o,i,f,l),o0(o,i,f))}};function SO(i,o,l,f,p,S,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,S,b):o.prototype&&o.prototype.isPureReactComponent?!Og(l,f)||!Og(p,S):!0}function kU(i,o,l){var f=!1,p=pc,S=o.contextType;return typeof S=="object"&&S!==null?S=Ns(S):(p=ja(o)?gf:Jo.current,f=o.contextTypes,S=(f=f!=null)?hh(i,p):pc),o=new o(l,S),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=J0,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=S),o}function wO(i,o,l,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==i&&J0.enqueueReplaceState(o,o.state,null)}function jI(i,o,l,f){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},zb(i);var S=o.contextType;typeof S=="object"&&S!==null?p.context=Ns(S):(S=ja(o)?gf:Jo.current,p.context=hh(i,S)),p.state=i.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(BI(i,o,S,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&J0.enqueueReplaceState(p,p.state,null),x0(i,l,p,f),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function vh(i,o){try{var l="",f=o;do l+=Qq(f),f=f.return;while(f);var p=l}catch(S){p="\nError generating stack: "+S.message+"\n"+S.stack}return{value:i,source:o,stack:p,digest:null}}function x1(i,o,l){return{value:i,source:null,stack:l!=null?l:null,digest:o!=null?o:null}}function ZI(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var IH=typeof WeakMap=="function"?WeakMap:Map;function FU(i,o,l){l=yl(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){L0||(L0=!0,XI=f),ZI(i,o)},l}function UU(i,o,l){l=yl(-1,l),l.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var p=o.value;l.payload=function(){return f(p)},l.callback=function(){ZI(i,o)}}var S=i.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){ZI(i,o),typeof f!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),l}function AO(i,o,l){var f=i.pingCache;if(f===null){f=i.pingCache=new IH;var p=new Set;f.set(o,p)}else p=f.get(o),p===void 0&&(p=new Set,f.set(o,p));p.has(l)||(p.add(l),i=BH.bind(null,i,o,l),o.then(i,i))}function IO(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function bO(i,o,l,f,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=yl(-1,1),o.tag=2,uc(l,o,1))),l.lanes|=1),i)}var bH=wl.ReactCurrentOwner,Ua=!1;function ya(i,o,l,f){o.child=i===null?hU(o,null,l,f):gh(o,i.child,l,f)}function CO(i,o,l,f,p){l=l.render;var S=o.ref;return ch(o,p),f=Qb(i,o,l,f,S,p),l=Jb(),i!==null&&!Ua?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Sl(i,o,p)):(Ui&&l&&jb(o),o.flags|=1,ya(i,o,f,p),o.child)}function RO(i,o,l,f,p){if(i===null){var S=l.type;return typeof S=="function"&&!lC(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=S,BU(i,o,S,f,p)):(i=f0(l.type,null,f,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(S=i.child,!(i.lanes&p)){var b=S.memoizedProps;if(l=l.compare,l=l!==null?l:Og,l(b,f)&&i.ref===o.ref)return Sl(i,o,p)}return o.flags|=1,i=fc(S,f),i.ref=o.ref,i.return=o,o.child=i}function BU(i,o,l,f,p){if(i!==null){var S=i.memoizedProps;if(Og(S,f)&&i.ref===o.ref)if(Ua=!1,o.pendingProps=f=S,(i.lanes&p)!==0)i.flags&131072&&(Ua=!0);else return o.lanes=i.lanes,Sl(i,o,p)}return GI(i,o,l,f,p)}function jU(i,o,l){var f=o.pendingProps,p=f.children,S=i!==null?i.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(nh,us),us|=l;else{if(!(l&1073741824))return i=S!==null?S.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,bi(nh,us),us|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=S!==null?S.baseLanes:l,bi(nh,us),us|=f}else S!==null?(f=S.baseLanes|l,o.memoizedState=null):f=l,bi(nh,us),us|=f;return ya(i,o,p,l),o.child}function ZU(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function GI(i,o,l,f,p){var S=ja(l)?gf:Jo.current;return S=hh(o,S),ch(o,p),l=Qb(i,o,l,f,S,p),f=Jb(),i!==null&&!Ua?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Sl(i,o,p)):(Ui&&f&&jb(o),o.flags|=1,ya(i,o,l,p),o.child)}function NO(i,o,l,f,p){if(ja(l)){var S=!0;I0(o)}else S=!1;if(ch(o,p),o.stateNode===null)u0(i,o),kU(o,l,f),jI(o,l,f,p),f=!0;else if(i===null){var b=o.stateNode,g=o.memoizedProps;b.props=g;var w=b.context,F=l.contextType;typeof F=="object"&&F!==null?F=Ns(F):(F=ja(l)?gf:Jo.current,F=hh(o,F));var C=l.getDerivedStateFromProps,y=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function";y||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==f||w!==F)&&wO(o,b,f,F),Jl=!1;var v=o.memoizedState;b.state=v,x0(o,f,b,p),w=o.memoizedState,g!==f||v!==w||Ba.current||Jl?(typeof C=="function"&&(BI(o,l,C,f),w=o.memoizedState),(g=Jl||SO(o,l,g,f,v,w,F))?(y||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=w),b.props=f,b.state=w,b.context=F,f=g):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,gU(i,o),g=o.memoizedProps,F=o.type===o.elementType?g:Qs(o.type,g),b.props=F,y=o.pendingProps,v=b.context,w=l.contextType,typeof w=="object"&&w!==null?w=Ns(w):(w=ja(l)?gf:Jo.current,w=hh(o,w));var D=l.getDerivedStateFromProps;(C=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==y||v!==w)&&wO(o,b,f,w),Jl=!1,v=o.memoizedState,b.state=v,x0(o,f,b,p);var m=o.memoizedState;g!==y||v!==m||Ba.current||Jl?(typeof D=="function"&&(BI(o,l,D,f),m=o.memoizedState),(F=Jl||SO(o,l,F,f,v,m,w)||!1)?(C||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,m,w),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,m,w)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=m),b.props=f,b.state=m,b.context=w,f=F):(typeof b.componentDidUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=1024),f=!1)}return qI(i,o,l,f,S,p)}function qI(i,o,l,f,p,S){ZU(i,o);var b=(o.flags&128)!==0;if(!f&&!b)return p&&pO(o,l,!1),Sl(i,o,S);f=o.stateNode,bH.current=o;var g=b&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&b?(o.child=gh(o,i.child,null,S),o.child=gh(o,null,g,S)):ya(i,o,g,S),o.memoizedState=f.state,p&&pO(o,l,!0),o.child}function GU(i){var o=i.stateNode;o.pendingContext?hO(i,o.pendingContext,o.pendingContext!==o.context):o.context&&hO(i,o.context,!1),Yb(i,o.containerInfo)}function xO(i,o,l,f,p){return ph(),Gb(p),o.flags|=256,ya(i,o,l,f),o.child}var HI={dehydrated:null,treeContext:null,retryLane:0};function KI(i){return{baseLanes:i,cachePool:null,transitions:null}}function qU(i,o,l){var f=o.pendingProps,p=qi.current,S=!1,b=(o.flags&128)!==0,g;if((g=b)||(g=i!==null&&i.memoizedState===null?!1:(p&2)!==0),g?(S=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),bi(qi,p&1),i===null)return FI(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=f.children,i=f.fallback,S?(f=o.mode,S=o.child,b={mode:"hidden",children:b},!(f&1)&&S!==null?(S.childLanes=0,S.pendingProps=b):S=nE(b,f,0,null),i=df(i,f,l,null),S.return=o,i.return=o,S.sibling=i,o.child=S,o.child.memoizedState=KI(l),o.memoizedState=HI,i):nC(o,b));if(p=i.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return CH(i,o,b,f,g,p,l);if(S){S=f.fallback,b=o.mode,p=i.child,g=p.sibling;var w={mode:"hidden",children:f.children};return!(b&1)&&o.child!==p?(f=o.child,f.childLanes=0,f.pendingProps=w,o.deletions=null):(f=fc(p,w),f.subtreeFlags=p.subtreeFlags&14680064),g!==null?S=fc(g,S):(S=df(S,b,l,null),S.flags|=2),S.return=o,f.return=o,f.sibling=S,o.child=f,f=S,S=o.child,b=i.child.memoizedState,b=b===null?KI(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},S.memoizedState=b,S.childLanes=i.childLanes&~l,o.memoizedState=HI,f}return S=i.child,i=S.sibling,f=fc(S,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=f,o.memoizedState=null,f}function nC(i,o){return o=nE({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Gy(i,o,l,f){return f!==null&&Gb(f),gh(o,i.child,null,l),i=nC(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function CH(i,o,l,f,p,S,b){if(l)return o.flags&256?(o.flags&=-257,f=x1(Error(jn(422))),Gy(i,o,b,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(S=f.fallback,p=o.mode,f=nE({mode:"visible",children:f.children},p,0,null),S=df(S,p,b,null),S.flags|=2,f.return=o,S.return=o,f.sibling=S,o.child=f,o.mode&1&&gh(o,i.child,null,b),o.child.memoizedState=KI(b),o.memoizedState=HI,S);if(!(o.mode&1))return Gy(i,o,b,null);if(p.data==="$!"){if(f=p.nextSibling&&p.nextSibling.dataset,f)var g=f.dgst;return f=g,S=Error(jn(419)),f=x1(S,f,void 0),Gy(i,o,b,f)}if(g=(b&i.childLanes)!==0,Ua||g){if(f=Mo,f!==null){switch(b&-b){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(f.suspendedLanes|b)?0:p,p!==0&&p!==S.retryLane&&(S.retryLane=p,Tl(i,p),au(f,i,p,-1))}return uC(),f=x1(Error(jn(421))),Gy(i,o,b,f)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=jH.bind(null,i),p._reactRetry=o,null):(i=S.treeContext,ls=sc(p.nextSibling),fs=o,Ui=!0,eu=null,i!==null&&(As[Is++]=ml,As[Is++]=vl,As[Is++]=mf,ml=i.id,vl=i.overflow,mf=o),o=nC(o,f.children),o.flags|=4096,o)}function MO(i,o,l){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),UI(i.return,o,l)}function M1(i,o,l,f,p){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:p}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=l,S.tailMode=p)}function HU(i,o,l){var f=o.pendingProps,p=f.revealOrder,S=f.tail;if(ya(i,o,f.children,l),f=qi.current,f&2)f=f&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&MO(i,l,o);else if(i.tag===19)MO(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(bi(qi,f),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&M0(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),M1(o,!1,p,l,S);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&M0(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}M1(o,!0,l,null,S);break;case"together":M1(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function u0(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Sl(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),yf|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(jn(153));if(o.child!==null){for(i=o.child,l=fc(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=fc(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function RH(i,o,l){switch(o.tag){case 3:GU(o),ph();break;case 5:mU(o);break;case 1:ja(o.type)&&I0(o);break;case 4:Yb(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,p=o.memoizedProps.value;bi(R0,f._currentValue),f._currentValue=p;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(bi(qi,qi.current&1),o.flags|=128,null):l&o.child.childLanes?qU(i,o,l):(bi(qi,qi.current&1),i=Sl(i,o,l),i!==null?i.sibling:null);bi(qi,qi.current&1);break;case 19:if(f=(l&o.childLanes)!==0,i.flags&128){if(f)return HU(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),bi(qi,qi.current),f)break;return null;case 22:case 23:return o.lanes=0,jU(i,o,l)}return Sl(i,o,l)}var KU,VI,VU,zU;KU=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};VI=function(){};VU=function(i,o,l,f){var p=i.memoizedProps;if(p!==f){i=o.stateNode,lf(Du.current);var S=null;switch(l){case"input":p=pI(i,p),f=pI(i,f),S=[];break;case"select":p=Vi({},p,{value:void 0}),f=Vi({},f,{value:void 0}),S=[];break;case"textarea":p=vI(i,p),f=vI(i,f),S=[];break;default:typeof p.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=w0)}EI(l,f);var b;l=null;for(F in p)if(!f.hasOwnProperty(F)&&p.hasOwnProperty(F)&&p[F]!=null)if(F==="style"){var g=p[F];for(b in g)g.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Cg.hasOwnProperty(F)?S||(S=[]):(S=S||[]).push(F,null));for(F in f){var w=f[F];if(g=p!=null?p[F]:void 0,f.hasOwnProperty(F)&&w!==g&&(w!=null||g!=null))if(F==="style")if(g){for(b in g)!g.hasOwnProperty(b)||w&&w.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in w)w.hasOwnProperty(b)&&g[b]!==w[b]&&(l||(l={}),l[b]=w[b])}else l||(S||(S=[]),S.push(F,l)),l=w;else F==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,g=g?g.__html:void 0,w!=null&&g!==w&&(S=S||[]).push(F,w)):F==="children"?typeof w!="string"&&typeof w!="number"||(S=S||[]).push(F,""+w):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Cg.hasOwnProperty(F)?(w!=null&&F==="onScroll"&&xi("scroll",i),S||g===w||(S=[])):(S=S||[]).push(F,w))}l&&(S=S||[]).push("style",l);var F=S;(o.updateQueue=F)&&(o.flags|=4)}};zU=function(i,o,l,f){l!==f&&(o.flags|=4)};function og(i,o){if(!Ui)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Wo(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags&14680064,f|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=f,i.childLanes=l,o}function NH(i,o,l){var f=o.pendingProps;switch(Zb(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(o),null;case 1:return ja(o.type)&&A0(),Wo(o),null;case 3:return f=o.stateNode,mh(),Mi(Ba),Mi(Jo),$b(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(jy(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,eu!==null&&(eb(eu),eu=null))),VI(i,o),Wo(o),null;case 5:Wb(o);var p=lf(Bg.current);if(l=o.type,i!==null&&o.stateNode!=null)VU(i,o,l,f,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(jn(166));return Wo(o),null}if(i=lf(Du.current),jy(o)){f=o.stateNode,l=o.type;var S=o.memoizedProps;switch(f[xu]=o,f[Fg]=S,i=(o.mode&1)!==0,l){case"dialog":xi("cancel",f),xi("close",f);break;case"iframe":case"object":case"embed":xi("load",f);break;case"video":case"audio":for(p=0;p<pg.length;p++)xi(pg[p],f);break;case"source":xi("error",f);break;case"img":case"image":case"link":xi("error",f),xi("load",f);break;case"details":xi("toggle",f);break;case"input":jP(f,S),xi("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!S.multiple},xi("invalid",f);break;case"textarea":GP(f,S),xi("invalid",f)}EI(l,S),p=null;for(var b in S)if(S.hasOwnProperty(b)){var g=S[b];b==="children"?typeof g=="string"?f.textContent!==g&&(S.suppressHydrationWarning!==!0&&By(f.textContent,g,i),p=["children",g]):typeof g=="number"&&f.textContent!==""+g&&(S.suppressHydrationWarning!==!0&&By(f.textContent,g,i),p=["children",""+g]):Cg.hasOwnProperty(b)&&g!=null&&b==="onScroll"&&xi("scroll",f)}switch(l){case"input":My(f),ZP(f,S,!0);break;case"textarea":My(f),qP(f);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(f.onclick=w0)}f=p,o.updateQueue=f,f!==null&&(o.flags|=4)}else{b=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=T3(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=b.createElement(l,{is:f.is}):(i=b.createElement(l),l==="select"&&(b=i,f.multiple?b.multiple=!0:f.size&&(b.size=f.size))):i=b.createElementNS(i,l),i[xu]=o,i[Fg]=f,KU(i,o,!1,!1),o.stateNode=i;e:{switch(b=_I(l,f),l){case"dialog":xi("cancel",i),xi("close",i),p=f;break;case"iframe":case"object":case"embed":xi("load",i),p=f;break;case"video":case"audio":for(p=0;p<pg.length;p++)xi(pg[p],i);p=f;break;case"source":xi("error",i),p=f;break;case"img":case"image":case"link":xi("error",i),xi("load",i),p=f;break;case"details":xi("toggle",i),p=f;break;case"input":jP(i,f),p=pI(i,f),xi("invalid",i);break;case"option":p=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},p=Vi({},f,{value:void 0}),xi("invalid",i);break;case"textarea":GP(i,f),p=vI(i,f),xi("invalid",i);break;default:p=f}EI(l,p),g=p;for(S in g)if(g.hasOwnProperty(S)){var w=g[S];S==="style"?A3(i,w):S==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&S3(i,w)):S==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&Rg(i,w):typeof w=="number"&&Rg(i,""+w):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Cg.hasOwnProperty(S)?w!=null&&S==="onScroll"&&xi("scroll",i):w!=null&&bb(i,S,w,b))}switch(l){case"input":My(i),ZP(i,f,!1);break;case"textarea":My(i),qP(i);break;case"option":f.value!=null&&i.setAttribute("value",""+hc(f.value));break;case"select":i.multiple=!!f.multiple,S=f.value,S!=null?ah(i,!!f.multiple,S,!1):f.defaultValue!=null&&ah(i,!!f.multiple,f.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=w0)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Wo(o),null;case 6:if(i&&o.stateNode!=null)zU(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(jn(166));if(l=lf(Bg.current),lf(Du.current),jy(o)){if(f=o.stateNode,l=o.memoizedProps,f[xu]=o,(S=f.nodeValue!==l)&&(i=fs,i!==null))switch(i.tag){case 3:By(f.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&By(f.nodeValue,l,(i.mode&1)!==0)}S&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[xu]=o,o.stateNode=f}return Wo(o),null;case 13:if(Mi(qi),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ui&&ls!==null&&o.mode&1&&!(o.flags&128))fU(),ph(),o.flags|=98560,S=!1;else if(S=jy(o),f!==null&&f.dehydrated!==null){if(i===null){if(!S)throw Error(jn(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(jn(317));S[xu]=o}else ph(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Wo(o),S=!1}else eu!==null&&(eb(eu),eu=null),S=!0;if(!S)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(i===null||qi.current&1?So===0&&(So=3):uC())),o.updateQueue!==null&&(o.flags|=4),Wo(o),null);case 4:return mh(),VI(i,o),i===null&&Lg(o.stateNode.containerInfo),Wo(o),null;case 10:return Kb(o.type._context),Wo(o),null;case 17:return ja(o.type)&&A0(),Wo(o),null;case 19:if(Mi(qi),S=o.memoizedState,S===null)return Wo(o),null;if(f=(o.flags&128)!==0,b=S.rendering,b===null)if(f)og(S,!1);else{if(So!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(b=M0(i),b!==null){for(o.flags|=128,og(S,!1),f=b.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)S=l,i=f,S.flags&=14680066,b=S.alternate,b===null?(S.childLanes=0,S.lanes=i,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=b.childLanes,S.lanes=b.lanes,S.child=b.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=b.memoizedProps,S.memoizedState=b.memoizedState,S.updateQueue=b.updateQueue,S.type=b.type,i=b.dependencies,S.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return bi(qi,qi.current&1|2),o.child}i=i.sibling}S.tail!==null&&co()>yh&&(o.flags|=128,f=!0,og(S,!1),o.lanes=4194304)}else{if(!f)if(i=M0(b),i!==null){if(o.flags|=128,f=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),og(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!Ui)return Wo(o),null}else 2*co()-S.renderingStartTime>yh&&l!==1073741824&&(o.flags|=128,f=!0,og(S,!1),o.lanes=4194304);S.isBackwards?(b.sibling=o.child,o.child=b):(l=S.last,l!==null?l.sibling=b:o.child=b,S.last=b)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=co(),o.sibling=null,l=qi.current,bi(qi,f?l&1|2:l&1),o):(Wo(o),null);case 22:case 23:return sC(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?us&1073741824&&(Wo(o),o.subtreeFlags&6&&(o.flags|=8192)):Wo(o),null;case 24:return null;case 25:return null}throw Error(jn(156,o.tag))}function xH(i,o){switch(Zb(o),o.tag){case 1:return ja(o.type)&&A0(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return mh(),Mi(Ba),Mi(Jo),$b(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Wb(o),null;case 13:if(Mi(qi),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(jn(340));ph()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Mi(qi),null;case 4:return mh(),null;case 10:return Kb(o.type._context),null;case 22:case 23:return sC(),null;case 24:return null;default:return null}}var qy=!1,Xo=!1,MH=typeof WeakSet=="function"?WeakSet:Set,nr=null;function th(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){Ji(i,o,f)}else l.current=null}function zI(i,o,l){try{l()}catch(f){Ji(i,o,f)}}var DO=!1;function DH(i,o){if(xI=_0,i=Q3(),Bb(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var p=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{l.nodeType,S.nodeType}catch(R){l=null;break e}var b=0,g=-1,w=-1,F=0,C=0,y=i,v=null;t:for(;;){for(var D;y!==l||p!==0&&y.nodeType!==3||(g=b+p),y!==S||f!==0&&y.nodeType!==3||(w=b+f),y.nodeType===3&&(b+=y.nodeValue.length),(D=y.firstChild)!==null;)v=y,y=D;for(;;){if(y===i)break t;if(v===l&&++F===p&&(g=b),v===S&&++C===f&&(w=b),(D=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=D}l=g===-1||w===-1?null:{start:g,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(MI={focusedElem:i,selectionRange:l},_0=!1,nr=o;nr!==null;)if(o=nr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,nr=i;else for(;nr!==null;){o=nr;try{var m=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,x=o.stateNode,_=x.getSnapshotBeforeUpdate(o.elementType===o.type?T:Qs(o.type,T),U);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=o.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(R){Ji(o,o.return,R)}if(i=o.sibling,i!==null){i.return=o.return,nr=i;break}nr=o.return}return m=DO,DO=!1,m}function Ag(i,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var p=f=f.next;do{if((p.tag&i)===i){var S=p.destroy;p.destroy=void 0,S!==void 0&&zI(o,l,S)}p=p.next}while(p!==f)}}function eE(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function YI(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function YU(i){var o=i.alternate;o!==null&&(i.alternate=null,YU(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[xu],delete o[Fg],delete o[OI],delete o[pH],delete o[gH])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function WU(i){return i.tag===5||i.tag===3||i.tag===4}function PO(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||WU(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function WI(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=w0));else if(f!==4&&(i=i.child,i!==null))for(WI(i,o,l),i=i.sibling;i!==null;)WI(i,o,l),i=i.sibling}function $I(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for($I(i,o,l),i=i.sibling;i!==null;)$I(i,o,l),i=i.sibling}var Bo=null,Js=!1;function $l(i,o,l){for(l=l.child;l!==null;)$U(i,o,l),l=l.sibling}function $U(i,o,l){if(Mu&&typeof Mu.onCommitFiberUnmount=="function")try{Mu.onCommitFiberUnmount(V0,l)}catch(g){}switch(l.tag){case 5:Xo||th(l,o);case 6:var f=Bo,p=Js;Bo=null,$l(i,o,l),Bo=f,Js=p,Bo!==null&&(Js?(i=Bo,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Bo.removeChild(l.stateNode));break;case 18:Bo!==null&&(Js?(i=Bo,l=l.stateNode,i.nodeType===8?A1(i.parentNode,l):i.nodeType===1&&A1(i,l),Dg(i)):A1(Bo,l.stateNode));break;case 4:f=Bo,p=Js,Bo=l.stateNode.containerInfo,Js=!0,$l(i,o,l),Bo=f,Js=p;break;case 0:case 11:case 14:case 15:if(!Xo&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){p=f=f.next;do{var S=p,b=S.destroy;S=S.tag,b!==void 0&&(S&2||S&4)&&zI(l,o,b),p=p.next}while(p!==f)}$l(i,o,l);break;case 1:if(!Xo&&(th(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(g){Ji(l,o,g)}$l(i,o,l);break;case 21:$l(i,o,l);break;case 22:l.mode&1?(Xo=(f=Xo)||l.memoizedState!==null,$l(i,o,l),Xo=f):$l(i,o,l);break;default:$l(i,o,l)}}function OO(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new MH),o.forEach(function(f){var p=ZH.bind(null,i,f);l.has(f)||(l.add(f),f.then(p,p))})}}function $s(i,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];try{var S=i,b=o,g=b;e:for(;g!==null;){switch(g.tag){case 5:Bo=g.stateNode,Js=!1;break e;case 3:Bo=g.stateNode.containerInfo,Js=!0;break e;case 4:Bo=g.stateNode.containerInfo,Js=!0;break e}g=g.return}if(Bo===null)throw Error(jn(160));$U(S,b,p),Bo=null,Js=!1;var w=p.alternate;w!==null&&(w.return=null),p.return=null}catch(F){Ji(p,o,F)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)XU(o,i),o=o.sibling}function XU(i,o){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if($s(o,i),Iu(i),f&4){try{Ag(3,i,i.return),eE(3,i)}catch(T){Ji(i,i.return,T)}try{Ag(5,i,i.return)}catch(T){Ji(i,i.return,T)}}break;case 1:$s(o,i),Iu(i),f&512&&l!==null&&th(l,l.return);break;case 5:if($s(o,i),Iu(i),f&512&&l!==null&&th(l,l.return),i.flags&32){var p=i.stateNode;try{Rg(p,"")}catch(T){Ji(i,i.return,T)}}if(f&4&&(p=i.stateNode,p!=null)){var S=i.memoizedProps,b=l!==null?l.memoizedProps:S,g=i.type,w=i.updateQueue;if(i.updateQueue=null,w!==null)try{g==="input"&&S.type==="radio"&&S.name!=null&&E3(p,S),_I(g,b);var F=_I(g,S);for(b=0;b<w.length;b+=2){var C=w[b],y=w[b+1];C==="style"?A3(p,y):C==="dangerouslySetInnerHTML"?S3(p,y):C==="children"?Rg(p,y):bb(p,C,y,F)}switch(g){case"input":gI(p,S);break;case"textarea":_3(p,S);break;case"select":var v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!S.multiple;var D=S.value;D!=null?ah(p,!!S.multiple,D,!1):v!==!!S.multiple&&(S.defaultValue!=null?ah(p,!!S.multiple,S.defaultValue,!0):ah(p,!!S.multiple,S.multiple?[]:"",!1))}p[Fg]=S}catch(T){Ji(i,i.return,T)}}break;case 6:if($s(o,i),Iu(i),f&4){if(i.stateNode===null)throw Error(jn(162));p=i.stateNode,S=i.memoizedProps;try{p.nodeValue=S}catch(T){Ji(i,i.return,T)}}break;case 3:if($s(o,i),Iu(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Dg(o.containerInfo)}catch(T){Ji(i,i.return,T)}break;case 4:$s(o,i),Iu(i);break;case 13:$s(o,i),Iu(i),p=i.child,p.flags&8192&&(S=p.memoizedState!==null,p.stateNode.isHidden=S,!S||p.alternate!==null&&p.alternate.memoizedState!==null||(oC=co())),f&4&&OO(i);break;case 22:if(C=l!==null&&l.memoizedState!==null,i.mode&1?(Xo=(F=Xo)||C,$s(o,i),Xo=F):$s(o,i),Iu(i),f&8192){if(F=i.memoizedState!==null,(i.stateNode.isHidden=F)&&!C&&i.mode&1)for(nr=i,C=i.child;C!==null;){for(y=nr=C;nr!==null;){switch(v=nr,D=v.child,v.tag){case 0:case 11:case 14:case 15:Ag(4,v,v.return);break;case 1:th(v,v.return);var m=v.stateNode;if(typeof m.componentWillUnmount=="function"){f=v,l=v.return;try{o=f,m.props=o.memoizedProps,m.state=o.memoizedState,m.componentWillUnmount()}catch(T){Ji(f,l,T)}}break;case 5:th(v,v.return);break;case 22:if(v.memoizedState!==null){kO(y);continue}}D!==null?(D.return=v,nr=D):kO(y)}C=C.sibling}e:for(C=null,y=i;;){if(y.tag===5){if(C===null){C=y;try{p=y.stateNode,F?(S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(g=y.stateNode,w=y.memoizedProps.style,b=w!=null&&w.hasOwnProperty("display")?w.display:null,g.style.display=w3("display",b))}catch(T){Ji(i,i.return,T)}}}else if(y.tag===6){if(C===null)try{y.stateNode.nodeValue=F?"":y.memoizedProps}catch(T){Ji(i,i.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===i)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;C===y&&(C=null),y=y.return}C===y&&(C=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:$s(o,i),Iu(i),f&4&&OO(i);break;case 21:break;default:$s(o,i),Iu(i)}}function Iu(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(WU(l)){var f=l;break e}l=l.return}throw Error(jn(160))}switch(f.tag){case 5:var p=f.stateNode;f.flags&32&&(Rg(p,""),f.flags&=-33);var S=PO(i);$I(i,S,p);break;case 3:case 4:var b=f.stateNode.containerInfo,g=PO(i);WI(i,g,b);break;default:throw Error(jn(161))}}catch(w){Ji(i,i.return,w)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function PH(i,o,l){nr=i,QU(i)}function QU(i,o,l){for(var f=(i.mode&1)!==0;nr!==null;){var p=nr,S=p.child;if(p.tag===22&&f){var b=p.memoizedState!==null||qy;if(!b){var g=p.alternate,w=g!==null&&g.memoizedState!==null||Xo;g=qy;var F=Xo;if(qy=b,(Xo=w)&&!F)for(nr=p;nr!==null;)b=nr,w=b.child,b.tag===22&&b.memoizedState!==null?FO(p):w!==null?(w.return=b,nr=w):FO(p);for(;S!==null;)nr=S,QU(S),S=S.sibling;nr=p,qy=g,Xo=F}LO(i)}else p.subtreeFlags&8772&&S!==null?(S.return=p,nr=S):LO(i)}}function LO(i){for(;nr!==null;){var o=nr;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Xo||eE(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Xo)if(l===null)f.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Qs(o.type,l.memoizedProps);f.componentDidUpdate(p,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var S=o.updateQueue;S!==null&&EO(o,S,f);break;case 3:var b=o.updateQueue;if(b!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}EO(o,b,l)}break;case 5:var g=o.stateNode;if(l===null&&o.flags&4){l=g;var w=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var F=o.alternate;if(F!==null){var C=F.memoizedState;if(C!==null){var y=C.dehydrated;y!==null&&Dg(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Xo||o.flags&512&&YI(o)}catch(v){Ji(o,o.return,v)}}if(o===i){nr=null;break}if(l=o.sibling,l!==null){l.return=o.return,nr=l;break}nr=o.return}}function kO(i){for(;nr!==null;){var o=nr;if(o===i){nr=null;break}var l=o.sibling;if(l!==null){l.return=o.return,nr=l;break}nr=o.return}}function FO(i){for(;nr!==null;){var o=nr;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{eE(4,o)}catch(w){Ji(o,l,w)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var p=o.return;try{f.componentDidMount()}catch(w){Ji(o,p,w)}}var S=o.return;try{YI(o)}catch(w){Ji(o,S,w)}break;case 5:var b=o.return;try{YI(o)}catch(w){Ji(o,b,w)}}}catch(w){Ji(o,o.return,w)}if(o===i){nr=null;break}var g=o.sibling;if(g!==null){g.return=o.return,nr=g;break}nr=o.return}}var OH=Math.ceil,O0=wl.ReactCurrentDispatcher,rC=wl.ReactCurrentOwner,Rs=wl.ReactCurrentBatchConfig,Xr=0,Mo=null,go=null,jo=0,us=0,nh=mc(0),So=0,qg=null,yf=0,tE=0,iC=0,Ig=null,Fa=null,oC=0,yh=1/0,pl=null,L0=!1,XI=null,lc=null,Hy=!1,rc=null,k0=0,bg=0,QI=null,l0=-1,c0=0;function _a(){return Xr&6?co():l0!==-1?l0:l0=co()}function cc(i){return i.mode&1?Xr&2&&jo!==0?jo&-jo:vH.transition!==null?(c0===0&&(c0=k3()),c0):(i=hi,i!==0||(i=window.event,i=i===void 0?16:q3(i.type)),i):1}function au(i,o,l,f){if(50<bg)throw bg=0,QI=null,Error(jn(185));$g(i,l,f),(!(Xr&2)||i!==Mo)&&(i===Mo&&(!(Xr&2)&&(tE|=l),So===4&&tc(i,jo)),Za(i,f),l===1&&Xr===0&&!(o.mode&1)&&(yh=co()+500,X0&&vc()))}function Za(i,o){var l=i.callbackNode;v9(i,o);var f=E0(i,i===Mo?jo:0);if(f===0)l!==null&&VP(l),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(l!=null&&VP(l),o===1)i.tag===0?mH(UO.bind(null,i)):uU(UO.bind(null,i)),dH(function(){!(Xr&6)&&vc()}),l=null;else{switch(F3(f)){case 1:l=Mb;break;case 4:l=O3;break;case 16:l=y0;break;case 536870912:l=L3;break;default:l=y0}l=a4(l,JU.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function JU(i,o){if(l0=-1,c0=0,Xr&6)throw Error(jn(327));var l=i.callbackNode;if(fh()&&i.callbackNode!==l)return null;var f=E0(i,i===Mo?jo:0);if(f===0)return null;if(f&30||f&i.expiredLanes||o)o=F0(i,f);else{o=f;var p=Xr;Xr|=2;var S=t4();(Mo!==i||jo!==o)&&(pl=null,yh=co()+500,ff(i,o));do try{FH();break}catch(g){e4(i,g)}while(!0);Hb(),O0.current=S,Xr=p,go!==null?o=0:(Mo=null,jo=0,o=So)}if(o!==0){if(o===2&&(p=II(i),p!==0&&(f=p,o=JI(i,p))),o===1)throw l=qg,ff(i,0),tc(i,f),Za(i,co()),l;if(o===6)tc(i,f);else{if(p=i.current.alternate,!(f&30)&&!LH(p)&&(o=F0(i,f),o===2&&(S=II(i),S!==0&&(f=S,o=JI(i,S))),o===1))throw l=qg,ff(i,0),tc(i,f),Za(i,co()),l;switch(i.finishedWork=p,i.finishedLanes=f,o){case 0:case 1:throw Error(jn(345));case 2:rf(i,Fa,pl);break;case 3:if(tc(i,f),(f&130023424)===f&&(o=oC+500-co(),10<o)){if(E0(i,0)!==0)break;if(p=i.suspendedLanes,(p&f)!==f){_a(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=PI(rf.bind(null,i,Fa,pl),o);break}rf(i,Fa,pl);break;case 4:if(tc(i,f),(f&4194240)===f)break;for(o=i.eventTimes,p=-1;0<f;){var b=31-ou(f);S=1<<b,b=o[b],b>p&&(p=b),f&=~S}if(f=p,f=co()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*OH(f/1960))-f,10<f){i.timeoutHandle=PI(rf.bind(null,i,Fa,pl),f);break}rf(i,Fa,pl);break;case 5:rf(i,Fa,pl);break;default:throw Error(jn(329))}}}return Za(i,co()),i.callbackNode===l?JU.bind(null,i):null}function JI(i,o){var l=Ig;return i.current.memoizedState.isDehydrated&&(ff(i,o).flags|=256),i=F0(i,o),i!==2&&(o=Fa,Fa=l,o!==null&&eb(o)),i}function eb(i){Fa===null?Fa=i:Fa.push.apply(Fa,i)}function LH(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var p=l[f],S=p.getSnapshot;p=p.value;try{if(!uu(S(),p))return!1}catch(b){return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function tc(i,o){for(o&=~iC,o&=~tE,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-ou(o),f=1<<l;i[l]=-1,o&=~f}}function UO(i){if(Xr&6)throw Error(jn(327));fh();var o=E0(i,0);if(!(o&1))return Za(i,co()),null;var l=F0(i,o);if(i.tag!==0&&l===2){var f=II(i);f!==0&&(o=f,l=JI(i,f))}if(l===1)throw l=qg,ff(i,0),tc(i,o),Za(i,co()),l;if(l===6)throw Error(jn(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,rf(i,Fa,pl),Za(i,co()),null}function aC(i,o){var l=Xr;Xr|=1;try{return i(o)}finally{Xr=l,Xr===0&&(yh=co()+500,X0&&vc())}}function Ef(i){rc!==null&&rc.tag===0&&!(Xr&6)&&fh();var o=Xr;Xr|=1;var l=Rs.transition,f=hi;try{if(Rs.transition=null,hi=1,i)return i()}finally{hi=f,Rs.transition=l,Xr=o,!(Xr&6)&&vc()}}function sC(){us=nh.current,Mi(nh)}function ff(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,fH(l)),go!==null)for(l=go.return;l!==null;){var f=l;switch(Zb(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&A0();break;case 3:mh(),Mi(Ba),Mi(Jo),$b();break;case 5:Wb(f);break;case 4:mh();break;case 13:Mi(qi);break;case 19:Mi(qi);break;case 10:Kb(f.type._context);break;case 22:case 23:sC()}l=l.return}if(Mo=i,go=i=fc(i.current,null),jo=us=o,So=0,qg=null,iC=tE=yf=0,Fa=Ig=null,uf!==null){for(o=0;o<uf.length;o++)if(l=uf[o],f=l.interleaved,f!==null){l.interleaved=null;var p=f.next,S=l.pending;if(S!==null){var b=S.next;S.next=p,f.next=b}l.pending=f}uf=null}return i}function e4(i,o){do{var l=go;try{if(Hb(),a0.current=P0,D0){for(var f=Ki.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}D0=!1}if(vf=0,xo=To=Ki=null,wg=!1,jg=0,rC.current=null,l===null||l.return===null){So=1,qg=o,go=null;break}e:{var S=i,b=l.return,g=l,w=o;if(o=jo,g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=w,C=g,y=C.tag;if(!(C.mode&1)&&(y===0||y===11||y===15)){var v=C.alternate;v?(C.updateQueue=v.updateQueue,C.memoizedState=v.memoizedState,C.lanes=v.lanes):(C.updateQueue=null,C.memoizedState=null)}var D=IO(b);if(D!==null){D.flags&=-257,bO(D,b,g,S,o),D.mode&1&&AO(S,F,o),o=D,w=F;var m=o.updateQueue;if(m===null){var T=new Set;T.add(w),o.updateQueue=T}else m.add(w);break e}else{if(!(o&1)){AO(S,F,o),uC();break e}w=Error(jn(426))}}else if(Ui&&g.mode&1){var U=IO(b);if(U!==null){!(U.flags&65536)&&(U.flags|=256),bO(U,b,g,S,o),Gb(vh(w,g));break e}}S=w=vh(w,g),So!==4&&(So=2),Ig===null?Ig=[S]:Ig.push(S),S=b;do{switch(S.tag){case 3:S.flags|=65536,o&=-o,S.lanes|=o;var x=FU(S,w,o);yO(S,x);break e;case 1:g=w;var _=S.type,I=S.stateNode;if(!(S.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(lc===null||!lc.has(I)))){S.flags|=65536,o&=-o,S.lanes|=o;var R=UU(S,g,o);yO(S,R);break e}}S=S.return}while(S!==null)}r4(l)}catch(Z){o=Z,go===l&&l!==null&&(go=l=l.return);continue}break}while(!0)}function t4(){var i=O0.current;return O0.current=P0,i===null?P0:i}function uC(){(So===0||So===3||So===2)&&(So=4),Mo===null||!(yf&268435455)&&!(tE&268435455)||tc(Mo,jo)}function F0(i,o){var l=Xr;Xr|=2;var f=t4();(Mo!==i||jo!==o)&&(pl=null,ff(i,o));do try{kH();break}catch(p){e4(i,p)}while(!0);if(Hb(),Xr=l,O0.current=f,go!==null)throw Error(jn(261));return Mo=null,jo=0,So}function kH(){for(;go!==null;)n4(go)}function FH(){for(;go!==null&&!u9();)n4(go)}function n4(i){var o=o4(i.alternate,i,us);i.memoizedProps=i.pendingProps,o===null?r4(i):go=o,rC.current=null}function r4(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=xH(l,o),l!==null){l.flags&=32767,go=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{So=6,go=null;return}}else if(l=NH(l,o,us),l!==null){go=l;return}if(o=o.sibling,o!==null){go=o;return}go=o=i}while(o!==null);So===0&&(So=5)}function rf(i,o,l){var f=hi,p=Rs.transition;try{Rs.transition=null,hi=1,UH(i,o,l,f)}finally{Rs.transition=p,hi=f}return null}function UH(i,o,l,f){do fh();while(rc!==null);if(Xr&6)throw Error(jn(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(jn(177));i.callbackNode=null,i.callbackPriority=0;var S=l.lanes|l.childLanes;if(y9(i,S),i===Mo&&(go=Mo=null,jo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Hy||(Hy=!0,a4(y0,function(){return fh(),null})),S=(l.flags&15990)!==0,l.subtreeFlags&15990||S){S=Rs.transition,Rs.transition=null;var b=hi;hi=1;var g=Xr;Xr|=4,rC.current=null,DH(i,l),XU(l,i),iH(MI),_0=!!xI,MI=xI=null,i.current=l,PH(l),l9(),Xr=g,hi=b,Rs.transition=S}else i.current=l;if(Hy&&(Hy=!1,rc=i,k0=p),S=i.pendingLanes,S===0&&(lc=null),d9(l.stateNode),Za(i,co()),o!==null)for(f=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],f(p.value,{componentStack:p.stack,digest:p.digest});if(L0)throw L0=!1,i=XI,XI=null,i;return k0&1&&i.tag!==0&&fh(),S=i.pendingLanes,S&1?i===QI?bg++:(bg=0,QI=i):bg=0,vc(),null}function fh(){if(rc!==null){var i=F3(k0),o=Rs.transition,l=hi;try{if(Rs.transition=null,hi=16>i?16:i,rc===null)var f=!1;else{if(i=rc,rc=null,k0=0,Xr&6)throw Error(jn(331));var p=Xr;for(Xr|=4,nr=i.current;nr!==null;){var S=nr,b=S.child;if(nr.flags&16){var g=S.deletions;if(g!==null){for(var w=0;w<g.length;w++){var F=g[w];for(nr=F;nr!==null;){var C=nr;switch(C.tag){case 0:case 11:case 15:Ag(8,C,S)}var y=C.child;if(y!==null)y.return=C,nr=y;else for(;nr!==null;){C=nr;var v=C.sibling,D=C.return;if(YU(C),C===F){nr=null;break}if(v!==null){v.return=D,nr=v;break}nr=D}}}var m=S.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}nr=S}}if(S.subtreeFlags&2064&&b!==null)b.return=S,nr=b;else e:for(;nr!==null;){if(S=nr,S.flags&2048)switch(S.tag){case 0:case 11:case 15:Ag(9,S,S.return)}var x=S.sibling;if(x!==null){x.return=S.return,nr=x;break e}nr=S.return}}var _=i.current;for(nr=_;nr!==null;){b=nr;var I=b.child;if(b.subtreeFlags&2064&&I!==null)I.return=b,nr=I;else e:for(b=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:eE(9,g)}}catch(Z){Ji(g,g.return,Z)}if(g===b){nr=null;break e}var R=g.sibling;if(R!==null){R.return=g.return,nr=R;break e}nr=g.return}}if(Xr=p,vc(),Mu&&typeof Mu.onPostCommitFiberRoot=="function")try{Mu.onPostCommitFiberRoot(V0,i)}catch(Z){}f=!0}return f}finally{hi=l,Rs.transition=o}}return!1}function BO(i,o,l){o=vh(l,o),o=FU(i,o,1),i=uc(i,o,1),o=_a(),i!==null&&($g(i,1,o),Za(i,o))}function Ji(i,o,l){if(i.tag===3)BO(i,i,l);else for(;o!==null;){if(o.tag===3){BO(o,i,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(lc===null||!lc.has(f))){i=vh(l,i),i=UU(o,i,1),o=uc(o,i,1),i=_a(),o!==null&&($g(o,1,i),Za(o,i));break}}o=o.return}}function BH(i,o,l){var f=i.pingCache;f!==null&&f.delete(o),o=_a(),i.pingedLanes|=i.suspendedLanes&l,Mo===i&&(jo&l)===l&&(So===4||So===3&&(jo&130023424)===jo&&500>co()-oC?ff(i,0):iC|=l),Za(i,o)}function i4(i,o){o===0&&(i.mode&1?(o=Oy,Oy<<=1,!(Oy&130023424)&&(Oy=4194304)):o=1);var l=_a();i=Tl(i,o),i!==null&&($g(i,o,l),Za(i,l))}function jH(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),i4(i,l)}function ZH(i,o){var l=0;switch(i.tag){case 13:var f=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(jn(314))}f!==null&&f.delete(o),i4(i,l)}var o4;o4=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Ba.current)Ua=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return Ua=!1,RH(i,o,l);Ua=!!(i.flags&131072)}else Ua=!1,Ui&&o.flags&1048576&&lU(o,C0,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;u0(i,o),i=o.pendingProps;var p=hh(o,Jo.current);ch(o,l),p=Qb(null,o,f,i,p,l);var S=Jb();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ja(f)?(S=!0,I0(o)):S=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,zb(o),p.updater=J0,o.stateNode=p,p._reactInternals=o,jI(o,f,i,l),o=qI(null,o,f,!0,S,l)):(o.tag=0,Ui&&S&&jb(o),ya(null,o,p,l),o=o.child),o;case 16:f=o.elementType;e:{switch(u0(i,o),i=o.pendingProps,p=f._init,f=p(f._payload),o.type=f,p=o.tag=qH(f),i=Qs(f,i),p){case 0:o=GI(null,o,f,i,l);break e;case 1:o=NO(null,o,f,i,l);break e;case 11:o=CO(null,o,f,i,l);break e;case 14:o=RO(null,o,f,Qs(f.type,i),l);break e}throw Error(jn(306,f,""))}return o;case 0:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),GI(i,o,f,p,l);case 1:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),NO(i,o,f,p,l);case 3:e:{if(GU(o),i===null)throw Error(jn(387));f=o.pendingProps,S=o.memoizedState,p=S.element,gU(i,o),x0(o,f,null,l);var b=o.memoizedState;if(f=b.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){p=vh(Error(jn(423)),o),o=xO(i,o,f,l,p);break e}else if(f!==p){p=vh(Error(jn(424)),o),o=xO(i,o,f,l,p);break e}else for(ls=sc(o.stateNode.containerInfo.firstChild),fs=o,Ui=!0,eu=null,l=hU(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ph(),f===p){o=Sl(i,o,l);break e}ya(i,o,f,l)}o=o.child}return o;case 5:return mU(o),i===null&&FI(o),f=o.type,p=o.pendingProps,S=i!==null?i.memoizedProps:null,b=p.children,DI(f,p)?b=null:S!==null&&DI(f,S)&&(o.flags|=32),ZU(i,o),ya(i,o,b,l),o.child;case 6:return i===null&&FI(o),null;case 13:return qU(i,o,l);case 4:return Yb(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=gh(o,null,f,l):ya(i,o,f,l),o.child;case 11:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),CO(i,o,f,p,l);case 7:return ya(i,o,o.pendingProps,l),o.child;case 8:return ya(i,o,o.pendingProps.children,l),o.child;case 12:return ya(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,p=o.pendingProps,S=o.memoizedProps,b=p.value,bi(R0,f._currentValue),f._currentValue=b,S!==null)if(uu(S.value,b)){if(S.children===p.children&&!Ba.current){o=Sl(i,o,l);break e}}else for(S=o.child,S!==null&&(S.return=o);S!==null;){var g=S.dependencies;if(g!==null){b=S.child;for(var w=g.firstContext;w!==null;){if(w.context===f){if(S.tag===1){w=yl(-1,l&-l),w.tag=2;var F=S.updateQueue;if(F!==null){F=F.shared;var C=F.pending;C===null?w.next=w:(w.next=C.next,C.next=w),F.pending=w}}S.lanes|=l,w=S.alternate,w!==null&&(w.lanes|=l),UI(S.return,l,o),g.lanes|=l;break}w=w.next}}else if(S.tag===10)b=S.type===o.type?null:S.child;else if(S.tag===18){if(b=S.return,b===null)throw Error(jn(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),UI(b,l,o),b=S.sibling}else b=S.child;if(b!==null)b.return=S;else for(b=S;b!==null;){if(b===o){b=null;break}if(S=b.sibling,S!==null){S.return=b.return,b=S;break}b=b.return}S=b}ya(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,f=o.pendingProps.children,ch(o,l),p=Ns(p),f=f(p),o.flags|=1,ya(i,o,f,l),o.child;case 14:return f=o.type,p=Qs(f,o.pendingProps),p=Qs(f.type,p),RO(i,o,f,p,l);case 15:return BU(i,o,o.type,o.pendingProps,l);case 17:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),u0(i,o),o.tag=1,ja(f)?(i=!0,I0(o)):i=!1,ch(o,l),kU(o,f,p),jI(o,f,p,l),qI(null,o,f,!0,i,l);case 19:return HU(i,o,l);case 22:return jU(i,o,l)}throw Error(jn(156,o.tag))};function a4(i,o){return P3(i,o)}function GH(i,o,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(i,o,l,f){return new GH(i,o,l,f)}function lC(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qH(i){if(typeof i=="function")return lC(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Rb)return 11;if(i===Nb)return 14}return 2}function fc(i,o){var l=i.alternate;return l===null?(l=Cs(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function f0(i,o,l,f,p,S){var b=2;if(f=i,typeof i=="function")lC(i)&&(b=1);else if(typeof i=="string")b=5;else e:switch(i){case Vd:return df(l.children,p,S,o);case Cb:b=8,p|=8;break;case cI:return i=Cs(12,l,o,p|2),i.elementType=cI,i.lanes=S,i;case fI:return i=Cs(13,l,o,p),i.elementType=fI,i.lanes=S,i;case dI:return i=Cs(19,l,o,p),i.elementType=dI,i.lanes=S,i;case m3:return nE(l,p,S,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case p3:b=10;break e;case g3:b=9;break e;case Rb:b=11;break e;case Nb:b=14;break e;case Ql:b=16,f=null;break e}throw Error(jn(130,i==null?i:typeof i,""))}return o=Cs(b,l,o,p),o.elementType=i,o.type=f,o.lanes=S,o}function df(i,o,l,f){return i=Cs(7,i,f,o),i.lanes=l,i}function nE(i,o,l,f){return i=Cs(22,i,f,o),i.elementType=m3,i.lanes=l,i.stateNode={isHidden:!1},i}function D1(i,o,l){return i=Cs(6,i,null,o),i.lanes=l,i}function P1(i,o,l){return o=Cs(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function HH(i,o,l,f,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h1(0),this.expirationTimes=h1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h1(0),this.identifierPrefix=f,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function cC(i,o,l,f,p,S,b,g,w){return i=new HH(i,o,l,g,w),o===1?(o=1,S===!0&&(o|=8)):o=0,S=Cs(3,null,null,o),i.current=S,S.stateNode=i,S.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},zb(S),i}function KH(i,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kd,key:f==null?null:""+f,children:i,containerInfo:o,implementation:l}}function s4(i){if(!i)return pc;i=i._reactInternals;e:{if(wf(i)!==i||i.tag!==1)throw Error(jn(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(ja(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(jn(171))}if(i.tag===1){var l=i.type;if(ja(l))return sU(i,l,o)}return o}function u4(i,o,l,f,p,S,b,g,w){return i=cC(l,f,!0,i,p,S,b,g,w),i.context=s4(null),l=i.current,f=_a(),p=cc(l),S=yl(f,p),S.callback=o!=null?o:null,uc(l,S,p),i.current.lanes=p,$g(i,p,f),Za(i,f),i}function rE(i,o,l,f){var p=o.current,S=_a(),b=cc(p);return l=s4(l),o.context===null?o.context=l:o.pendingContext=l,o=yl(S,b),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=uc(p,o,b),i!==null&&(au(i,p,b,S),o0(i,p,b)),b}function U0(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function jO(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function fC(i,o){jO(i,o),(i=i.alternate)&&jO(i,o)}function VH(){return null}var l4=typeof reportError=="function"?reportError:function(i){console.error(i)};function dC(i){this._internalRoot=i}iE.prototype.render=dC.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(jn(409));rE(i,o,null,null)};iE.prototype.unmount=dC.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ef(function(){rE(null,i,null,null)}),o[_l]=null}};function iE(i){this._internalRoot=i}iE.prototype.unstable_scheduleHydration=function(i){if(i){var o=j3();i={blockedOn:null,target:i,priority:o};for(var l=0;l<ec.length&&o!==0&&o<ec[l].priority;l++);ec.splice(l,0,i),l===0&&G3(i)}};function hC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function oE(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ZO(){}function zH(i,o,l,f,p){if(p){if(typeof f=="function"){var S=f;f=function(){var F=U0(b);S.call(F)}}var b=u4(o,f,i,0,null,!1,!1,"",ZO);return i._reactRootContainer=b,i[_l]=b.current,Lg(i.nodeType===8?i.parentNode:i),Ef(),b}for(;p=i.lastChild;)i.removeChild(p);if(typeof f=="function"){var g=f;f=function(){var F=U0(w);g.call(F)}}var w=cC(i,0,!1,null,null,!1,!1,"",ZO);return i._reactRootContainer=w,i[_l]=w.current,Lg(i.nodeType===8?i.parentNode:i),Ef(function(){rE(o,w,l,f)}),w}function aE(i,o,l,f,p){var S=l._reactRootContainer;if(S){var b=S;if(typeof p=="function"){var g=p;p=function(){var w=U0(b);g.call(w)}}rE(o,b,i,p)}else b=zH(l,o,i,p,f);return U0(b)}U3=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=hg(o.pendingLanes);l!==0&&(Db(o,l|1),Za(o,co()),!(Xr&6)&&(yh=co()+500,vc()))}break;case 13:Ef(function(){var f=Tl(i,1);if(f!==null){var p=_a();au(f,i,1,p)}}),fC(i,1)}};Pb=function(i){if(i.tag===13){var o=Tl(i,134217728);if(o!==null){var l=_a();au(o,i,134217728,l)}fC(i,134217728)}};B3=function(i){if(i.tag===13){var o=cc(i),l=Tl(i,o);if(l!==null){var f=_a();au(l,i,o,f)}fC(i,o)}};j3=function(){return hi};Z3=function(i,o){var l=hi;try{return hi=i,o()}finally{hi=l}};SI=function(i,o,l){switch(o){case"input":if(gI(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==i&&f.form===i.form){var p=$0(f);if(!p)throw Error(jn(90));y3(f),gI(f,p)}}}break;case"textarea":_3(i,l);break;case"select":o=l.value,o!=null&&ah(i,!!l.multiple,o,!1)}};C3=aC;R3=Ef;var YH={usingClientEntryPoint:!1,Events:[Qg,$d,$0,I3,b3,aC]},ag={findFiberByHostInstance:sf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WH={bundleType:ag.bundleType,version:ag.version,rendererPackageName:ag.rendererPackageName,rendererConfig:ag.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=M3(i),i===null?null:i.stateNode},findFiberByHostInstance:ag.findFiberByHostInstance||VH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ky.isDisabled&&Ky.supportsFiber)try{V0=Ky.inject(WH),Mu=Ky}catch(i){}}hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YH;hs.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hC(o))throw Error(jn(200));return KH(i,o,null,l)};hs.createRoot=function(i,o){if(!hC(i))throw Error(jn(299));var l=!1,f="",p=l4;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=cC(i,1,!1,null,null,l,!1,f,p),i[_l]=o.current,Lg(i.nodeType===8?i.parentNode:i),new dC(o)};hs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(jn(188)):(i=Object.keys(i).join(","),Error(jn(268,i)));return i=M3(o),i=i===null?null:i.stateNode,i};hs.flushSync=function(i){return Ef(i)};hs.hydrate=function(i,o,l){if(!oE(o))throw Error(jn(200));return aE(null,i,o,!0,l)};hs.hydrateRoot=function(i,o,l){if(!hC(i))throw Error(jn(405));var f=l!=null&&l.hydratedSources||null,p=!1,S="",b=l4;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),o=u4(o,null,i,1,l!=null?l:null,p,!1,S,b),i[_l]=o.current,Lg(i),f)for(i=0;i<f.length;i++)l=f[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new iE(o)};hs.render=function(i,o,l){if(!oE(o))throw Error(jn(200));return aE(null,i,o,!1,l)};hs.unmountComponentAtNode=function(i){if(!oE(i))throw Error(jn(40));return i._reactRootContainer?(Ef(function(){aE(null,null,i,!1,function(){i._reactRootContainer=null,i[_l]=null})}),!0):!1};hs.unstable_batchedUpdates=aC;hs.unstable_renderSubtreeIntoContainer=function(i,o,l,f){if(!oE(l))throw Error(jn(200));if(i==null||i._reactInternals===void 0)throw Error(jn(38));return aE(i,o,l,!1,f)};hs.version="18.3.1-next-f1338f8080-20240426";function c4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c4)}catch(i){console.error(i)}}c4(),c3.exports=hs;var $H=c3.exports,GO=$H;uI.createRoot=GO.createRoot,uI.hydrateRoot=GO.hydrateRoot;var f4={exports:{}},O1,qO;function Af(){if(qO)return O1;qO=1;function i(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}return O1=i,O1}var L1,HO;function d4(){if(HO)return L1;HO=1;var i=typeof nu=="object"&&nu&&nu.Object===Object&&nu;return L1=i,L1}var k1,KO;function Pu(){if(KO)return k1;KO=1;var i=d4(),o=typeof self=="object"&&self&&self.Object===Object&&self,l=i||o||Function("return this")();return k1=l,k1}var F1,VO;function XH(){if(VO)return F1;VO=1;var i=Pu(),o=function(){return i.Date.now()};return F1=o,F1}var U1,zO;function QH(){if(zO)return U1;zO=1;var i=/\s/;function o(l){for(var f=l.length;f--&&i.test(l.charAt(f)););return f}return U1=o,U1}var B1,YO;function JH(){if(YO)return B1;YO=1;var i=QH(),o=/^\s+/;function l(f){return f&&f.slice(0,i(f)+1).replace(o,"")}return B1=l,B1}var j1,WO;function em(){if(WO)return j1;WO=1;var i=Pu(),o=i.Symbol;return j1=o,j1}var Z1,$O;function eK(){if($O)return Z1;$O=1;var i=em(),o=Object.prototype,l=o.hasOwnProperty,f=o.toString,p=i?i.toStringTag:void 0;function S(b){var g=l.call(b,p),w=b[p];try{b[p]=void 0;var F=!0}catch(y){}var C=f.call(b);return F&&(g?b[p]=w:delete b[p]),C}return Z1=S,Z1}var G1,XO;function tK(){if(XO)return G1;XO=1;var i=Object.prototype,o=i.toString;function l(f){return o.call(f)}return G1=l,G1}var q1,QO;function tm(){if(QO)return q1;QO=1;var i=em(),o=eK(),l=tK(),f="[object Null]",p="[object Undefined]",S=i?i.toStringTag:void 0;function b(g){return g==null?g===void 0?p:f:S&&S in Object(g)?o(g):l(g)}return q1=b,q1}var H1,JO;function Ah(){if(JO)return H1;JO=1;function i(o){return o!=null&&typeof o=="object"}return H1=i,H1}var K1,e2;function nm(){if(e2)return K1;e2=1;var i=tm(),o=Ah(),l="[object Symbol]";function f(p){return typeof p=="symbol"||o(p)&&i(p)==l}return K1=f,K1}var V1,t2;function nK(){if(t2)return V1;t2=1;var i=JH(),o=Af(),l=nm(),f=NaN,p=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,b=/^0o[0-7]+$/i,g=parseInt;function w(F){if(typeof F=="number")return F;if(l(F))return f;if(o(F)){var C=typeof F.valueOf=="function"?F.valueOf():F;F=o(C)?C+"":C}if(typeof F!="string")return F===0?F:+F;F=i(F);var y=S.test(F);return y||b.test(F)?g(F.slice(2),y?2:8):p.test(F)?f:+F}return V1=w,V1}var z1,n2;function h4(){if(n2)return z1;n2=1;var i=Af(),o=XH(),l=nK(),f="Expected a function",p=Math.max,S=Math.min;function b(g,w,F){var C,y,v,D,m,T,U=0,x=!1,_=!1,I=!0;if(typeof g!="function")throw new TypeError(f);w=l(w)||0,i(F)&&(x=!!F.leading,_="maxWait"in F,v=_?p(l(F.maxWait)||0,w):v,I="trailing"in F?!!F.trailing:I);function R(oe){var he=C,be=y;return C=y=void 0,U=oe,D=g.apply(be,he),D}function Z(oe){return U=oe,m=setTimeout($,w),x?R(oe):D}function z(oe){var he=oe-T,be=oe-U,Xe=w-he;return _?S(Xe,v-be):Xe}function W(oe){var he=oe-T,be=oe-U;return T===void 0||he>=w||he<0||_&&be>=v}function $(){var oe=o();if(W(oe))return le(oe);m=setTimeout($,z(oe))}function le(oe){return m=void 0,I&&C?R(oe):(C=y=void 0,D)}function N(){m!==void 0&&clearTimeout(m),U=0,C=T=y=m=void 0}function X(){return m===void 0?D:le(o())}function ce(){var oe=o(),he=W(oe);if(C=arguments,y=this,T=oe,he){if(m===void 0)return Z(T);if(_)return clearTimeout(m),m=setTimeout($,w),R(T)}return m===void 0&&(m=setTimeout($,w)),D}return ce.cancel=N,ce.flush=X,ce}return z1=b,z1}var Y1,r2;function p4(){if(r2)return Y1;r2=1;var i=tm(),o=Af(),l="[object AsyncFunction]",f="[object Function]",p="[object GeneratorFunction]",S="[object Proxy]";function b(g){if(!o(g))return!1;var w=i(g);return w==f||w==p||w==l||w==S}return Y1=b,Y1}var W1,i2;function rK(){if(i2)return W1;i2=1;var i=Pu(),o=i["__core-js_shared__"];return W1=o,W1}var $1,o2;function iK(){if(o2)return $1;o2=1;var i=rK(),o=function(){var f=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}();function l(f){return!!o&&o in f}return $1=l,$1}var X1,a2;function g4(){if(a2)return X1;a2=1;var i=Function.prototype,o=i.toString;function l(f){if(f!=null){try{return o.call(f)}catch(p){}try{return f+""}catch(p){}}return""}return X1=l,X1}var Q1,s2;function oK(){if(s2)return Q1;s2=1;var i=p4(),o=iK(),l=Af(),f=g4(),p=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,b=Function.prototype,g=Object.prototype,w=b.toString,F=g.hasOwnProperty,C=RegExp("^"+w.call(F).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(v){if(!l(v)||o(v))return!1;var D=i(v)?C:S;return D.test(f(v))}return Q1=y,Q1}var J1,u2;function aK(){if(u2)return J1;u2=1;function i(o,l){return o==null?void 0:o[l]}return J1=i,J1}var eS,l2;function If(){if(l2)return eS;l2=1;var i=oK(),o=aK();function l(f,p){var S=o(f,p);return i(S)?S:void 0}return eS=l,eS}var tS,c2;function sE(){if(c2)return tS;c2=1;var i=If(),o=i(Object,"create");return tS=o,tS}var nS,f2;function sK(){if(f2)return nS;f2=1;var i=sE();function o(){this.__data__=i?i(null):{},this.size=0}return nS=o,nS}var rS,d2;function uK(){if(d2)return rS;d2=1;function i(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}return rS=i,rS}var iS,h2;function lK(){if(h2)return iS;h2=1;var i=sE(),o="__lodash_hash_undefined__",l=Object.prototype,f=l.hasOwnProperty;function p(S){var b=this.__data__;if(i){var g=b[S];return g===o?void 0:g}return f.call(b,S)?b[S]:void 0}return iS=p,iS}var oS,p2;function cK(){if(p2)return oS;p2=1;var i=sE(),o=Object.prototype,l=o.hasOwnProperty;function f(p){var S=this.__data__;return i?S[p]!==void 0:l.call(S,p)}return oS=f,oS}var aS,g2;function fK(){if(g2)return aS;g2=1;var i=sE(),o="__lodash_hash_undefined__";function l(f,p){var S=this.__data__;return this.size+=this.has(f)?0:1,S[f]=i&&p===void 0?o:p,this}return aS=l,aS}var sS,m2;function dK(){if(m2)return sS;m2=1;var i=sK(),o=uK(),l=lK(),f=cK(),p=fK();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,sS=S,sS}var uS,v2;function hK(){if(v2)return uS;v2=1;function i(){this.__data__=[],this.size=0}return uS=i,uS}var lS,y2;function pC(){if(y2)return lS;y2=1;function i(o,l){return o===l||o!==o&&l!==l}return lS=i,lS}var cS,E2;function uE(){if(E2)return cS;E2=1;var i=pC();function o(l,f){for(var p=l.length;p--;)if(i(l[p][0],f))return p;return-1}return cS=o,cS}var fS,_2;function pK(){if(_2)return fS;_2=1;var i=uE(),o=Array.prototype,l=o.splice;function f(p){var S=this.__data__,b=i(S,p);if(b<0)return!1;var g=S.length-1;return b==g?S.pop():l.call(S,b,1),--this.size,!0}return fS=f,fS}var dS,T2;function gK(){if(T2)return dS;T2=1;var i=uE();function o(l){var f=this.__data__,p=i(f,l);return p<0?void 0:f[p][1]}return dS=o,dS}var hS,S2;function mK(){if(S2)return hS;S2=1;var i=uE();function o(l){return i(this.__data__,l)>-1}return hS=o,hS}var pS,w2;function vK(){if(w2)return pS;w2=1;var i=uE();function o(l,f){var p=this.__data__,S=i(p,l);return S<0?(++this.size,p.push([l,f])):p[S][1]=f,this}return pS=o,pS}var gS,A2;function lE(){if(A2)return gS;A2=1;var i=hK(),o=pK(),l=gK(),f=mK(),p=vK();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,gS=S,gS}var mS,I2;function gC(){if(I2)return mS;I2=1;var i=If(),o=Pu(),l=i(o,"Map");return mS=l,mS}var vS,b2;function yK(){if(b2)return vS;b2=1;var i=dK(),o=lE(),l=gC();function f(){this.size=0,this.__data__={hash:new i,map:new(l||o),string:new i}}return vS=f,vS}var yS,C2;function EK(){if(C2)return yS;C2=1;function i(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}return yS=i,yS}var ES,R2;function cE(){if(R2)return ES;R2=1;var i=EK();function o(l,f){var p=l.__data__;return i(f)?p[typeof f=="string"?"string":"hash"]:p.map}return ES=o,ES}var _S,N2;function _K(){if(N2)return _S;N2=1;var i=cE();function o(l){var f=i(this,l).delete(l);return this.size-=f?1:0,f}return _S=o,_S}var TS,x2;function TK(){if(x2)return TS;x2=1;var i=cE();function o(l){return i(this,l).get(l)}return TS=o,TS}var SS,M2;function SK(){if(M2)return SS;M2=1;var i=cE();function o(l){return i(this,l).has(l)}return SS=o,SS}var wS,D2;function wK(){if(D2)return wS;D2=1;var i=cE();function o(l,f){var p=i(this,l),S=p.size;return p.set(l,f),this.size+=p.size==S?0:1,this}return wS=o,wS}var AS,P2;function mC(){if(P2)return AS;P2=1;var i=yK(),o=_K(),l=TK(),f=SK(),p=wK();function S(b){var g=-1,w=b==null?0:b.length;for(this.clear();++g<w;){var F=b[g];this.set(F[0],F[1])}}return S.prototype.clear=i,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,AS=S,AS}var IS,O2;function AK(){if(O2)return IS;O2=1;var i="__lodash_hash_undefined__";function o(l){return this.__data__.set(l,i),this}return IS=o,IS}var bS,L2;function IK(){if(L2)return bS;L2=1;function i(o){return this.__data__.has(o)}return bS=i,bS}var CS,k2;function m4(){if(k2)return CS;k2=1;var i=mC(),o=AK(),l=IK();function f(p){var S=-1,b=p==null?0:p.length;for(this.__data__=new i;++S<b;)this.add(p[S])}return f.prototype.add=f.prototype.push=o,f.prototype.has=l,CS=f,CS}var RS,F2;function bK(){if(F2)return RS;F2=1;function i(o,l,f,p){for(var S=o.length,b=f+(p?1:-1);p?b--:++b<S;)if(l(o[b],b,o))return b;return-1}return RS=i,RS}var NS,U2;function CK(){if(U2)return NS;U2=1;function i(o){return o!==o}return NS=i,NS}var xS,B2;function RK(){if(B2)return xS;B2=1;function i(o,l,f){for(var p=f-1,S=o.length;++p<S;)if(o[p]===l)return p;return-1}return xS=i,xS}var MS,j2;function NK(){if(j2)return MS;j2=1;var i=bK(),o=CK(),l=RK();function f(p,S,b){return S===S?l(p,S,b):i(p,o,b)}return MS=f,MS}var DS,Z2;function xK(){if(Z2)return DS;Z2=1;var i=NK();function o(l,f){var p=l==null?0:l.length;return!!p&&i(l,f,0)>-1}return DS=o,DS}var PS,G2;function MK(){if(G2)return PS;G2=1;function i(o,l,f){for(var p=-1,S=o==null?0:o.length;++p<S;)if(f(l,o[p]))return!0;return!1}return PS=i,PS}var OS,q2;function vC(){if(q2)return OS;q2=1;function i(o,l){for(var f=-1,p=o==null?0:o.length,S=Array(p);++f<p;)S[f]=l(o[f],f,o);return S}return OS=i,OS}var LS,H2;function yC(){if(H2)return LS;H2=1;function i(o){return function(l){return o(l)}}return LS=i,LS}var kS,K2;function v4(){if(K2)return kS;K2=1;function i(o,l){return o.has(l)}return kS=i,kS}var FS,V2;function DK(){if(V2)return FS;V2=1;var i=m4(),o=xK(),l=MK(),f=vC(),p=yC(),S=v4(),b=200;function g(w,F,C,y){var v=-1,D=o,m=!0,T=w.length,U=[],x=F.length;if(!T)return U;C&&(F=f(F,p(C))),y?(D=l,m=!1):F.length>=b&&(D=S,m=!1,F=new i(F));e:for(;++v<T;){var _=w[v],I=C==null?_:C(_);if(_=y||_!==0?_:0,m&&I===I){for(var R=x;R--;)if(F[R]===I)continue e;U.push(_)}else D(F,I,y)||U.push(_)}return U}return FS=g,FS}var US,z2;function y4(){if(z2)return US;z2=1;function i(o,l){for(var f=-1,p=l.length,S=o.length;++f<p;)o[S+f]=l[f];return o}return US=i,US}var BS,Y2;function PK(){if(Y2)return BS;Y2=1;var i=tm(),o=Ah(),l="[object Arguments]";function f(p){return o(p)&&i(p)==l}return BS=f,BS}var jS,W2;function EC(){if(W2)return jS;W2=1;var i=PK(),o=Ah(),l=Object.prototype,f=l.hasOwnProperty,p=l.propertyIsEnumerable,S=i(function(){return arguments}())?i:function(b){return o(b)&&f.call(b,"callee")&&!p.call(b,"callee")};return jS=S,jS}var ZS,$2;function Ms(){if($2)return ZS;$2=1;var i=Array.isArray;return ZS=i,ZS}var GS,X2;function OK(){if(X2)return GS;X2=1;var i=em(),o=EC(),l=Ms(),f=i?i.isConcatSpreadable:void 0;function p(S){return l(S)||o(S)||!!(f&&S&&S[f])}return GS=p,GS}var qS,Q2;function E4(){if(Q2)return qS;Q2=1;var i=y4(),o=OK();function l(f,p,S,b,g){var w=-1,F=f.length;for(S||(S=o),g||(g=[]);++w<F;){var C=f[w];p>0&&S(C)?p>1?l(C,p-1,S,b,g):i(g,C):b||(g[g.length]=C)}return g}return qS=l,qS}var HS,J2;function rm(){if(J2)return HS;J2=1;function i(o){return o}return HS=i,HS}var KS,eL;function LK(){if(eL)return KS;eL=1;function i(o,l,f){switch(f.length){case 0:return o.call(l);case 1:return o.call(l,f[0]);case 2:return o.call(l,f[0],f[1]);case 3:return o.call(l,f[0],f[1],f[2])}return o.apply(l,f)}return KS=i,KS}var VS,tL;function kK(){if(tL)return VS;tL=1;var i=LK(),o=Math.max;function l(f,p,S){return p=o(p===void 0?f.length-1:p,0),function(){for(var b=arguments,g=-1,w=o(b.length-p,0),F=Array(w);++g<w;)F[g]=b[p+g];g=-1;for(var C=Array(p+1);++g<p;)C[g]=b[g];return C[p]=S(F),i(f,this,C)}}return VS=l,VS}var zS,nL;function FK(){if(nL)return zS;nL=1;function i(o){return function(){return o}}return zS=i,zS}var YS,rL;function UK(){if(rL)return YS;rL=1;var i=If(),o=function(){try{var l=i(Object,"defineProperty");return l({},"",{}),l}catch(f){}}();return YS=o,YS}var WS,iL;function BK(){if(iL)return WS;iL=1;var i=FK(),o=UK(),l=rm(),f=o?function(p,S){return o(p,"toString",{configurable:!0,enumerable:!1,value:i(S),writable:!0})}:l;return WS=f,WS}var $S,oL;function jK(){if(oL)return $S;oL=1;var i=800,o=16,l=Date.now;function f(p){var S=0,b=0;return function(){var g=l(),w=o-(g-b);if(b=g,w>0){if(++S>=i)return arguments[0]}else S=0;return p.apply(void 0,arguments)}}return $S=f,$S}var XS,aL;function ZK(){if(aL)return XS;aL=1;var i=BK(),o=jK(),l=o(i);return XS=l,XS}var QS,sL;function _4(){if(sL)return QS;sL=1;var i=rm(),o=kK(),l=ZK();function f(p,S){return l(o(p,S,i),p+"")}return QS=f,QS}var JS,uL;function _C(){if(uL)return JS;uL=1;var i=9007199254740991;function o(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=i}return JS=o,JS}var ew,lL;function im(){if(lL)return ew;lL=1;var i=p4(),o=_C();function l(f){return f!=null&&o(f.length)&&!i(f)}return ew=l,ew}var tw,cL;function GK(){if(cL)return tw;cL=1;var i=im(),o=Ah();function l(f){return o(f)&&i(f)}return tw=l,tw}var nw,fL;function qK(){if(fL)return nw;fL=1;var i=DK(),o=E4(),l=_4(),f=GK(),p=l(function(S,b){return f(S)?i(S,o(b,1,f,!0)):[]});return nw=p,nw}var rw,dL;function T4(){if(dL)return rw;dL=1;function i(o,l){for(var f=-1,p=o==null?0:o.length,S=0,b=[];++f<p;){var g=o[f];l(g,f,o)&&(b[S++]=g)}return b}return rw=i,rw}var iw,hL;function HK(){if(hL)return iw;hL=1;function i(o){return function(l,f,p){for(var S=-1,b=Object(l),g=p(l),w=g.length;w--;){var F=g[o?w:++S];if(f(b[F],F,b)===!1)break}return l}}return iw=i,iw}var ow,pL;function KK(){if(pL)return ow;pL=1;var i=HK(),o=i();return ow=o,ow}var aw,gL;function VK(){if(gL)return aw;gL=1;function i(o,l){for(var f=-1,p=Array(o);++f<o;)p[f]=l(f);return p}return aw=i,aw}var gg={exports:{}},sw,mL;function zK(){if(mL)return sw;mL=1;function i(){return!1}return sw=i,sw}gg.exports;var vL;function S4(){return vL||(vL=1,function(i,o){var l=Pu(),f=zK(),p=o&&!o.nodeType&&o,S=p&&!0&&i&&!i.nodeType&&i,b=S&&S.exports===p,g=b?l.Buffer:void 0,w=g?g.isBuffer:void 0,F=w||f;i.exports=F}(gg,gg.exports)),gg.exports}var uw,yL;function TC(){if(yL)return uw;yL=1;var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function l(f,p){var S=typeof f;return p=p==null?i:p,!!p&&(S=="number"||S!="symbol"&&o.test(f))&&f>-1&&f%1==0&&f<p}return uw=l,uw}var lw,EL;function YK(){if(EL)return lw;EL=1;var i=tm(),o=_C(),l=Ah(),f="[object Arguments]",p="[object Array]",S="[object Boolean]",b="[object Date]",g="[object Error]",w="[object Function]",F="[object Map]",C="[object Number]",y="[object Object]",v="[object RegExp]",D="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",Z="[object Int16Array]",z="[object Int32Array]",W="[object Uint8Array]",$="[object Uint8ClampedArray]",le="[object Uint16Array]",N="[object Uint32Array]",X={};X[_]=X[I]=X[R]=X[Z]=X[z]=X[W]=X[$]=X[le]=X[N]=!0,X[f]=X[p]=X[U]=X[S]=X[x]=X[b]=X[g]=X[w]=X[F]=X[C]=X[y]=X[v]=X[D]=X[m]=X[T]=!1;function ce(oe){return l(oe)&&o(oe.length)&&!!X[i(oe)]}return lw=ce,lw}var mg={exports:{}};mg.exports;var _L;function WK(){return _L||(_L=1,function(i,o){var l=d4(),f=o&&!o.nodeType&&o,p=f&&!0&&i&&!i.nodeType&&i,S=p&&p.exports===f,b=S&&l.process,g=function(){try{var w=p&&p.require&&p.require("util").types;return w||b&&b.binding&&b.binding("util")}catch(F){}}();i.exports=g}(mg,mg.exports)),mg.exports}var cw,TL;function w4(){if(TL)return cw;TL=1;var i=YK(),o=yC(),l=WK(),f=l&&l.isTypedArray,p=f?o(f):i;return cw=p,cw}var fw,SL;function $K(){if(SL)return fw;SL=1;var i=VK(),o=EC(),l=Ms(),f=S4(),p=TC(),S=w4(),b=Object.prototype,g=b.hasOwnProperty;function w(F,C){var y=l(F),v=!y&&o(F),D=!y&&!v&&f(F),m=!y&&!v&&!D&&S(F),T=y||v||D||m,U=T?i(F.length,String):[],x=U.length;for(var _ in F)(C||g.call(F,_))&&!(T&&(_=="length"||D&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,x)))&&U.push(_);return U}return fw=w,fw}var dw,wL;function XK(){if(wL)return dw;wL=1;var i=Object.prototype;function o(l){var f=l&&l.constructor,p=typeof f=="function"&&f.prototype||i;return l===p}return dw=o,dw}var hw,AL;function QK(){if(AL)return hw;AL=1;function i(o,l){return function(f){return o(l(f))}}return hw=i,hw}var pw,IL;function JK(){if(IL)return pw;IL=1;var i=QK(),o=i(Object.keys,Object);return pw=o,pw}var gw,bL;function eV(){if(bL)return gw;bL=1;var i=XK(),o=JK(),l=Object.prototype,f=l.hasOwnProperty;function p(S){if(!i(S))return o(S);var b=[];for(var g in Object(S))f.call(S,g)&&g!="constructor"&&b.push(g);return b}return gw=p,gw}var mw,CL;function SC(){if(CL)return mw;CL=1;var i=$K(),o=eV(),l=im();function f(p){return l(p)?i(p):o(p)}return mw=f,mw}var vw,RL;function wC(){if(RL)return vw;RL=1;var i=KK(),o=SC();function l(f,p){return f&&i(f,p,o)}return vw=l,vw}var yw,NL;function tV(){if(NL)return yw;NL=1;var i=im();function o(l,f){return function(p,S){if(p==null)return p;if(!i(p))return l(p,S);for(var b=p.length,g=f?b:-1,w=Object(p);(f?g--:++g<b)&&S(w[g],g,w)!==!1;);return p}}return yw=o,yw}var Ew,xL;function AC(){if(xL)return Ew;xL=1;var i=wC(),o=tV(),l=o(i);return Ew=l,Ew}var _w,ML;function nV(){if(ML)return _w;ML=1;var i=AC();function o(l,f){var p=[];return i(l,function(S,b,g){f(S,b,g)&&p.push(S)}),p}return _w=o,_w}var Tw,DL;function rV(){if(DL)return Tw;DL=1;var i=lE();function o(){this.__data__=new i,this.size=0}return Tw=o,Tw}var Sw,PL;function iV(){if(PL)return Sw;PL=1;function i(o){var l=this.__data__,f=l.delete(o);return this.size=l.size,f}return Sw=i,Sw}var ww,OL;function oV(){if(OL)return ww;OL=1;function i(o){return this.__data__.get(o)}return ww=i,ww}var Aw,LL;function aV(){if(LL)return Aw;LL=1;function i(o){return this.__data__.has(o)}return Aw=i,Aw}var Iw,kL;function sV(){if(kL)return Iw;kL=1;var i=lE(),o=gC(),l=mC(),f=200;function p(S,b){var g=this.__data__;if(g instanceof i){var w=g.__data__;if(!o||w.length<f-1)return w.push([S,b]),this.size=++g.size,this;g=this.__data__=new l(w)}return g.set(S,b),this.size=g.size,this}return Iw=p,Iw}var bw,FL;function A4(){if(FL)return bw;FL=1;var i=lE(),o=rV(),l=iV(),f=oV(),p=aV(),S=sV();function b(g){var w=this.__data__=new i(g);this.size=w.size}return b.prototype.clear=o,b.prototype.delete=l,b.prototype.get=f,b.prototype.has=p,b.prototype.set=S,bw=b,bw}var Cw,UL;function uV(){if(UL)return Cw;UL=1;function i(o,l){for(var f=-1,p=o==null?0:o.length;++f<p;)if(l(o[f],f,o))return!0;return!1}return Cw=i,Cw}var Rw,BL;function I4(){if(BL)return Rw;BL=1;var i=m4(),o=uV(),l=v4(),f=1,p=2;function S(b,g,w,F,C,y){var v=w&f,D=b.length,m=g.length;if(D!=m&&!(v&&m>D))return!1;var T=y.get(b),U=y.get(g);if(T&&U)return T==g&&U==b;var x=-1,_=!0,I=w&p?new i:void 0;for(y.set(b,g),y.set(g,b);++x<D;){var R=b[x],Z=g[x];if(F)var z=v?F(Z,R,x,g,b,y):F(R,Z,x,b,g,y);if(z!==void 0){if(z)continue;_=!1;break}if(I){if(!o(g,function(W,$){if(!l(I,$)&&(R===W||C(R,W,w,F,y)))return I.push($)})){_=!1;break}}else if(!(R===Z||C(R,Z,w,F,y))){_=!1;break}}return y.delete(b),y.delete(g),_}return Rw=S,Rw}var Nw,jL;function lV(){if(jL)return Nw;jL=1;var i=Pu(),o=i.Uint8Array;return Nw=o,Nw}var xw,ZL;function cV(){if(ZL)return xw;ZL=1;function i(o){var l=-1,f=Array(o.size);return o.forEach(function(p,S){f[++l]=[S,p]}),f}return xw=i,xw}var Mw,GL;function fV(){if(GL)return Mw;GL=1;function i(o){var l=-1,f=Array(o.size);return o.forEach(function(p){f[++l]=p}),f}return Mw=i,Mw}var Dw,qL;function dV(){if(qL)return Dw;qL=1;var i=em(),o=lV(),l=pC(),f=I4(),p=cV(),S=fV(),b=1,g=2,w="[object Boolean]",F="[object Date]",C="[object Error]",y="[object Map]",v="[object Number]",D="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",x="[object ArrayBuffer]",_="[object DataView]",I=i?i.prototype:void 0,R=I?I.valueOf:void 0;function Z(z,W,$,le,N,X,ce){switch($){case _:if(z.byteLength!=W.byteLength||z.byteOffset!=W.byteOffset)return!1;z=z.buffer,W=W.buffer;case x:return!(z.byteLength!=W.byteLength||!X(new o(z),new o(W)));case w:case F:case v:return l(+z,+W);case C:return z.name==W.name&&z.message==W.message;case D:case T:return z==W+"";case y:var oe=p;case m:var he=le&b;if(oe||(oe=S),z.size!=W.size&&!he)return!1;var be=ce.get(z);if(be)return be==W;le|=g,ce.set(z,W);var Xe=f(oe(z),oe(W),le,N,X,ce);return ce.delete(z),Xe;case U:if(R)return R.call(z)==R.call(W)}return!1}return Dw=Z,Dw}var Pw,HL;function hV(){if(HL)return Pw;HL=1;var i=y4(),o=Ms();function l(f,p,S){var b=p(f);return o(f)?b:i(b,S(f))}return Pw=l,Pw}var Ow,KL;function pV(){if(KL)return Ow;KL=1;function i(){return[]}return Ow=i,Ow}var Lw,VL;function gV(){if(VL)return Lw;VL=1;var i=T4(),o=pV(),l=Object.prototype,f=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,S=p?function(b){return b==null?[]:(b=Object(b),i(p(b),function(g){return f.call(b,g)}))}:o;return Lw=S,Lw}var kw,zL;function mV(){if(zL)return kw;zL=1;var i=hV(),o=gV(),l=SC();function f(p){return i(p,l,o)}return kw=f,kw}var Fw,YL;function vV(){if(YL)return Fw;YL=1;var i=mV(),o=1,l=Object.prototype,f=l.hasOwnProperty;function p(S,b,g,w,F,C){var y=g&o,v=i(S),D=v.length,m=i(b),T=m.length;if(D!=T&&!y)return!1;for(var U=D;U--;){var x=v[U];if(!(y?x in b:f.call(b,x)))return!1}var _=C.get(S),I=C.get(b);if(_&&I)return _==b&&I==S;var R=!0;C.set(S,b),C.set(b,S);for(var Z=y;++U<D;){x=v[U];var z=S[x],W=b[x];if(w)var $=y?w(W,z,x,b,S,C):w(z,W,x,S,b,C);if(!($===void 0?z===W||F(z,W,g,w,C):$)){R=!1;break}Z||(Z=x=="constructor")}if(R&&!Z){var le=S.constructor,N=b.constructor;le!=N&&"constructor"in S&&"constructor"in b&&!(typeof le=="function"&&le instanceof le&&typeof N=="function"&&N instanceof N)&&(R=!1)}return C.delete(S),C.delete(b),R}return Fw=p,Fw}var Uw,WL;function yV(){if(WL)return Uw;WL=1;var i=If(),o=Pu(),l=i(o,"DataView");return Uw=l,Uw}var Bw,$L;function EV(){if($L)return Bw;$L=1;var i=If(),o=Pu(),l=i(o,"Promise");return Bw=l,Bw}var jw,XL;function _V(){if(XL)return jw;XL=1;var i=If(),o=Pu(),l=i(o,"Set");return jw=l,jw}var Zw,QL;function TV(){if(QL)return Zw;QL=1;var i=If(),o=Pu(),l=i(o,"WeakMap");return Zw=l,Zw}var Gw,JL;function SV(){if(JL)return Gw;JL=1;var i=yV(),o=gC(),l=EV(),f=_V(),p=TV(),S=tm(),b=g4(),g="[object Map]",w="[object Object]",F="[object Promise]",C="[object Set]",y="[object WeakMap]",v="[object DataView]",D=b(i),m=b(o),T=b(l),U=b(f),x=b(p),_=S;return(i&&_(new i(new ArrayBuffer(1)))!=v||o&&_(new o)!=g||l&&_(l.resolve())!=F||f&&_(new f)!=C||p&&_(new p)!=y)&&(_=function(I){var R=S(I),Z=R==w?I.constructor:void 0,z=Z?b(Z):"";if(z)switch(z){case D:return v;case m:return g;case T:return F;case U:return C;case x:return y}return R}),Gw=_,Gw}var qw,ek;function wV(){if(ek)return qw;ek=1;var i=A4(),o=I4(),l=dV(),f=vV(),p=SV(),S=Ms(),b=S4(),g=w4(),w=1,F="[object Arguments]",C="[object Array]",y="[object Object]",v=Object.prototype,D=v.hasOwnProperty;function m(T,U,x,_,I,R){var Z=S(T),z=S(U),W=Z?C:p(T),$=z?C:p(U);W=W==F?y:W,$=$==F?y:$;var le=W==y,N=$==y,X=W==$;if(X&&b(T)){if(!b(U))return!1;Z=!0,le=!1}if(X&&!le)return R||(R=new i),Z||g(T)?o(T,U,x,_,I,R):l(T,U,W,x,_,I,R);if(!(x&w)){var ce=le&&D.call(T,"__wrapped__"),oe=N&&D.call(U,"__wrapped__");if(ce||oe){var he=ce?T.value():T,be=oe?U.value():U;return R||(R=new i),I(he,be,x,_,R)}}return X?(R||(R=new i),f(T,U,x,_,I,R)):!1}return qw=m,qw}var Hw,tk;function b4(){if(tk)return Hw;tk=1;var i=wV(),o=Ah();function l(f,p,S,b,g){return f===p?!0:f==null||p==null||!o(f)&&!o(p)?f!==f&&p!==p:i(f,p,S,b,l,g)}return Hw=l,Hw}var Kw,nk;function AV(){if(nk)return Kw;nk=1;var i=A4(),o=b4(),l=1,f=2;function p(S,b,g,w){var F=g.length,C=F,y=!w;if(S==null)return!C;for(S=Object(S);F--;){var v=g[F];if(y&&v[2]?v[1]!==S[v[0]]:!(v[0]in S))return!1}for(;++F<C;){v=g[F];var D=v[0],m=S[D],T=v[1];if(y&&v[2]){if(m===void 0&&!(D in S))return!1}else{var U=new i;if(w)var x=w(m,T,D,S,b,U);if(!(x===void 0?o(T,m,l|f,w,U):x))return!1}}return!0}return Kw=p,Kw}var Vw,rk;function C4(){if(rk)return Vw;rk=1;var i=Af();function o(l){return l===l&&!i(l)}return Vw=o,Vw}var zw,ik;function IV(){if(ik)return zw;ik=1;var i=C4(),o=SC();function l(f){for(var p=o(f),S=p.length;S--;){var b=p[S],g=f[b];p[S]=[b,g,i(g)]}return p}return zw=l,zw}var Yw,ok;function R4(){if(ok)return Yw;ok=1;function i(o,l){return function(f){return f==null?!1:f[o]===l&&(l!==void 0||o in Object(f))}}return Yw=i,Yw}var Ww,ak;function bV(){if(ak)return Ww;ak=1;var i=AV(),o=IV(),l=R4();function f(p){var S=o(p);return S.length==1&&S[0][2]?l(S[0][0],S[0][1]):function(b){return b===p||i(b,p,S)}}return Ww=f,Ww}var $w,sk;function IC(){if(sk)return $w;sk=1;var i=Ms(),o=nm(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;function p(S,b){if(i(S))return!1;var g=typeof S;return g=="number"||g=="symbol"||g=="boolean"||S==null||o(S)?!0:f.test(S)||!l.test(S)||b!=null&&S in Object(b)}return $w=p,$w}var Xw,uk;function CV(){if(uk)return Xw;uk=1;var i=mC(),o="Expected a function";function l(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new TypeError(o);var S=function(){var b=arguments,g=p?p.apply(this,b):b[0],w=S.cache;if(w.has(g))return w.get(g);var F=f.apply(this,b);return S.cache=w.set(g,F)||w,F};return S.cache=new(l.Cache||i),S}return l.Cache=i,Xw=l,Xw}var Qw,lk;function RV(){if(lk)return Qw;lk=1;var i=CV(),o=500;function l(f){var p=i(f,function(b){return S.size===o&&S.clear(),b}),S=p.cache;return p}return Qw=l,Qw}var Jw,ck;function NV(){if(ck)return Jw;ck=1;var i=RV(),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,f=i(function(p){var S=[];return p.charCodeAt(0)===46&&S.push(""),p.replace(o,function(b,g,w,F){S.push(w?F.replace(l,"$1"):g||b)}),S});return Jw=f,Jw}var eA,fk;function xV(){if(fk)return eA;fk=1;var i=em(),o=vC(),l=Ms(),f=nm(),p=1/0,S=i?i.prototype:void 0,b=S?S.toString:void 0;function g(w){if(typeof w=="string")return w;if(l(w))return o(w,g)+"";if(f(w))return b?b.call(w):"";var F=w+"";return F=="0"&&1/w==-p?"-0":F}return eA=g,eA}var tA,dk;function N4(){if(dk)return tA;dk=1;var i=xV();function o(l){return l==null?"":i(l)}return tA=o,tA}var nA,hk;function x4(){if(hk)return nA;hk=1;var i=Ms(),o=IC(),l=NV(),f=N4();function p(S,b){return i(S)?S:o(S,b)?[S]:l(f(S))}return nA=p,nA}var rA,pk;function fE(){if(pk)return rA;pk=1;var i=nm(),o=1/0;function l(f){if(typeof f=="string"||i(f))return f;var p=f+"";return p=="0"&&1/f==-o?"-0":p}return rA=l,rA}var iA,gk;function bC(){if(gk)return iA;gk=1;var i=x4(),o=fE();function l(f,p){p=i(p,f);for(var S=0,b=p.length;f!=null&&S<b;)f=f[o(p[S++])];return S&&S==b?f:void 0}return iA=l,iA}var oA,mk;function MV(){if(mk)return oA;mk=1;var i=bC();function o(l,f,p){var S=l==null?void 0:i(l,f);return S===void 0?p:S}return oA=o,oA}var aA,vk;function DV(){if(vk)return aA;vk=1;function i(o,l){return o!=null&&l in Object(o)}return aA=i,aA}var sA,yk;function PV(){if(yk)return sA;yk=1;var i=x4(),o=EC(),l=Ms(),f=TC(),p=_C(),S=fE();function b(g,w,F){w=i(w,g);for(var C=-1,y=w.length,v=!1;++C<y;){var D=S(w[C]);if(!(v=g!=null&&F(g,D)))break;g=g[D]}return v||++C!=y?v:(y=g==null?0:g.length,!!y&&p(y)&&f(D,y)&&(l(g)||o(g)))}return sA=b,sA}var uA,Ek;function OV(){if(Ek)return uA;Ek=1;var i=DV(),o=PV();function l(f,p){return f!=null&&o(f,p,i)}return uA=l,uA}var lA,_k;function LV(){if(_k)return lA;_k=1;var i=b4(),o=MV(),l=OV(),f=IC(),p=C4(),S=R4(),b=fE(),g=1,w=2;function F(C,y){return f(C)&&p(y)?S(b(C),y):function(v){var D=o(v,C);return D===void 0&&D===y?l(v,C):i(y,D,g|w)}}return lA=F,lA}var cA,Tk;function kV(){if(Tk)return cA;Tk=1;function i(o){return function(l){return l==null?void 0:l[o]}}return cA=i,cA}var fA,Sk;function FV(){if(Sk)return fA;Sk=1;var i=bC();function o(l){return function(f){return i(f,l)}}return fA=o,fA}var dA,wk;function UV(){if(wk)return dA;wk=1;var i=kV(),o=FV(),l=IC(),f=fE();function p(S){return l(S)?i(f(S)):o(S)}return dA=p,dA}var hA,Ak;function CC(){if(Ak)return hA;Ak=1;var i=bV(),o=LV(),l=rm(),f=Ms(),p=UV();function S(b){return typeof b=="function"?b:b==null?l:typeof b=="object"?f(b)?o(b[0],b[1]):i(b):p(b)}return hA=S,hA}var pA,Ik;function BV(){if(Ik)return pA;Ik=1;var i=T4(),o=nV(),l=CC(),f=Ms();function p(S,b){var g=f(S)?i:o;return g(S,l(b,3))}return pA=p,pA}var gA,bk;function jV(){if(bk)return gA;bk=1;function i(o,l,f){var p;return f(o,function(S,b,g){if(l(S,b,g))return p=b,!1}),p}return gA=i,gA}var mA,Ck;function ZV(){if(Ck)return mA;Ck=1;var i=jV(),o=wC(),l=CC();function f(p,S){return i(p,l(S,3),o)}return mA=f,mA}var vA,Rk;function GV(){if(Rk)return vA;Rk=1;function i(o){return o&&o.length?o[0]:void 0}return vA=i,vA}var yA,Nk;function qV(){return Nk||(Nk=1,yA=GV()),yA}var EA,xk;function HV(){if(xk)return EA;xk=1;function i(o,l){for(var f=-1,p=o==null?0:o.length;++f<p&&l(o[f],f,o)!==!1;);return o}return EA=i,EA}var _A,Mk;function M4(){if(Mk)return _A;Mk=1;var i=rm();function o(l){return typeof l=="function"?l:i}return _A=o,_A}var TA,Dk;function KV(){if(Dk)return TA;Dk=1;var i=HV(),o=AC(),l=M4(),f=Ms();function p(S,b){var g=f(S)?i:o;return g(S,l(b))}return TA=p,TA}var SA,Pk;function VV(){if(Pk)return SA;Pk=1;var i=wC(),o=M4();function l(f,p){return f&&i(f,o(p))}return SA=l,SA}var wA,Ok;function zV(){if(Ok)return wA;Ok=1;function i(){}return wA=i,wA}var AA,Lk;function YV(){if(Lk)return AA;Lk=1;var i=AC(),o=im();function l(f,p){var S=-1,b=o(f)?Array(f.length):[];return i(f,function(g,w,F){b[++S]=p(g,w,F)}),b}return AA=l,AA}var IA,kk;function WV(){if(kk)return IA;kk=1;function i(o,l){var f=o.length;for(o.sort(l);f--;)o[f]=o[f].value;return o}return IA=i,IA}var bA,Fk;function $V(){if(Fk)return bA;Fk=1;var i=nm();function o(l,f){if(l!==f){var p=l!==void 0,S=l===null,b=l===l,g=i(l),w=f!==void 0,F=f===null,C=f===f,y=i(f);if(!F&&!y&&!g&&l>f||g&&w&&C&&!F&&!y||S&&w&&C||!p&&C||!b)return 1;if(!S&&!g&&!y&&l<f||y&&p&&b&&!S&&!g||F&&p&&b||!w&&b||!C)return-1}return 0}return bA=o,bA}var CA,Uk;function XV(){if(Uk)return CA;Uk=1;var i=$V();function o(l,f,p){for(var S=-1,b=l.criteria,g=f.criteria,w=b.length,F=p.length;++S<w;){var C=i(b[S],g[S]);if(C){if(S>=F)return C;var y=p[S];return C*(y=="desc"?-1:1)}}return l.index-f.index}return CA=o,CA}var RA,Bk;function QV(){if(Bk)return RA;Bk=1;var i=vC(),o=bC(),l=CC(),f=YV(),p=WV(),S=yC(),b=XV(),g=rm(),w=Ms();function F(C,y,v){y.length?y=i(y,function(T){return w(T)?function(U){return o(U,T.length===1?T[0]:T)}:T}):y=[g];var D=-1;y=i(y,S(l));var m=f(C,function(T,U,x){var _=i(y,function(I){return I(T)});return{criteria:_,index:++D,value:T}});return p(m,function(T,U){return b(T,U,v)})}return RA=F,RA}var NA,jk;function JV(){if(jk)return NA;jk=1;var i=pC(),o=im(),l=TC(),f=Af();function p(S,b,g){if(!f(g))return!1;var w=typeof b;return(w=="number"?o(g)&&l(b,g.length):w=="string"&&b in g)?i(g[b],S):!1}return NA=p,NA}var xA,Zk;function e7(){if(Zk)return xA;Zk=1;var i=E4(),o=QV(),l=_4(),f=JV(),p=l(function(S,b){if(S==null)return[];var g=b.length;return g>1&&f(S,b[0],b[1])?b=[]:g>2&&f(b[0],b[1],b[2])&&(b=[b[0]]),o(S,i(b,1),[])});return xA=p,xA}var MA,Gk;function t7(){if(Gk)return MA;Gk=1;var i=h4(),o=Af(),l="Expected a function";function f(p,S,b){var g=!0,w=!0;if(typeof p!="function")throw new TypeError(l);return o(b)&&(g="leading"in b?!!b.leading:g,w="trailing"in b?!!b.trailing:w),i(p,S,{leading:g,maxWait:S,trailing:w})}return MA=f,MA}var DA,qk;function n7(){if(qk)return DA;qk=1;var i=N4(),o=0;function l(f){var p=++o;return i(f)+p}return DA=l,DA}(function(i,o){(function(l,f){i.exports=f(h4(),qK(),BV(),ZV(),qV(),KV(),VV(),zV(),e7(),t7(),n7(),pn)})(nu,function(l,f,p,S,b,g,w,F,C,y,v,D){return function(){var m={654:function(U,x,_){var I,R=this&&this.__assign||function(){return R=Object.assign||function(Ce){for(var re,Fe=1,O=arguments.length;Fe<O;Fe++)for(var M in re=arguments[Fe])Object.prototype.hasOwnProperty.call(re,M)&&(Ce[M]=re[M]);return Ce},R.apply(this,arguments)},Z=this&&this.__createBinding||(Object.create?function(Ce,re,Fe,O){O===void 0&&(O=Fe);var M=Object.getOwnPropertyDescriptor(re,Fe);M&&!("get"in M?!re.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return re[Fe]}}),Object.defineProperty(Ce,O,M)}:function(Ce,re,Fe,O){O===void 0&&(O=Fe),Ce[O]=re[Fe]}),z=this&&this.__setModuleDefault||(Object.create?function(Ce,re){Object.defineProperty(Ce,"default",{enumerable:!0,value:re})}:function(Ce,re){Ce.default=re}),W=this&&this.__importStar||function(Ce){if(Ce&&Ce.__esModule)return Ce;var re={};if(Ce!=null)for(var Fe in Ce)Fe!=="default"&&Object.prototype.hasOwnProperty.call(Ce,Fe)&&Z(re,Ce,Fe);return z(re,Ce),re},$=this&&this.__spreadArray||function(Ce,re,Fe){if(Fe||arguments.length===2)for(var O,M=0,q=re.length;M<q;M++)!O&&M in re||(O||(O=Array.prototype.slice.call(re,0,M)),O[M]=re[M]);return Ce.concat(O||Array.prototype.slice.call(re))},le=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(x,"__esModule",{value:!0}),x.doesFocusableExist=x.getCurrentFocusKey=x.updateAllLayouts=x.resume=x.pause=x.navigateByDirection=x.setFocus=x.setKeyMap=x.destroy=x.setThrottle=x.init=x.SpatialNavigation=x.ROOT_FOCUS_KEY=void 0;var N=le(_(150)),X=le(_(117)),ce=le(_(747)),oe=le(_(23)),he=le(_(842)),be=le(_(682)),Xe=le(_(784)),Ae=le(_(432)),Ze=le(_(67)),tt=le(_(35)),ut=le(_(119)),$e=W(_(964)),lt="left",wt="right",Oe="up",Qe="down",ct="enter",Xt=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);x.ROOT_FOCUS_KEY="SN:ROOT";var Kt=["#0FF","#FF0","#F0F"],_t={leading:!0,trailing:!1},At=function(){function Ce(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=ut.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Xt,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,N.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Ce.getCutoffCoordinate=function(re,Fe,O,M,q){var K=re?M.top:q===ut.default.LTR?M.left:M.right,_e=re?M.bottom:q===ut.default.LTR?M.right:M.left;return Fe?O?K:_e:O?_e:K},Ce.getRefCorners=function(re,Fe,O){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(re){case Oe:var q=Fe?O.bottom:O.top;M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case Qe:q=Fe?O.top:O.bottom,M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case lt:var K=Fe?O.right:O.left;M.a={x:K,y:O.top},M.b={x:K,y:O.bottom};break;case wt:K=Fe?O.left:O.right,M.a={x:K,y:O.top},M.b={x:K,y:O.bottom}}return M},Ce.isAdjacentSlice=function(re,Fe,O){var M=re.a,q=re.b,K=Fe.a,_e=Fe.b,de=O?"x":"y",He=M[de],Tt=q[de],ot=K[de],it=_e[de],et=.2*(Tt-He);return Math.max(0,Math.min(Tt,it)-Math.max(He,ot))>=et},Ce.getPrimaryAxisDistance=function(re,Fe,O){var M=re.a,q=Fe.a,K=O?"y":"x";return Math.abs(q[K]-M[K])},Ce.getSecondaryAxisDistance=function(re,Fe,O){var M=re.a,q=re.b,K=Fe.a,_e=Fe.b,de=O?"x":"y",He=M[de],Tt=q[de],ot=K[de],it=_e[de],et=[];return et.push(Math.abs(ot-He)),et.push(Math.abs(ot-Tt)),et.push(Math.abs(it-He)),et.push(Math.abs(it-Tt)),Math.min.apply(Math,et)},Ce.prototype.sortSiblingsByPriority=function(re,Fe,O,M){var q=this,K=O===Qe||O===Oe,_e=Ce.getRefCorners(O,!1,Fe);return(0,Ae.default)(re,function(de){var He=Ce.getRefCorners(O,!0,de.layout),Tt=Ce.isAdjacentSlice(_e,He,K),ot=Tt?Ce.getPrimaryAxisDistance:Ce.getSecondaryAxisDistance,it=Tt?Ce.getSecondaryAxisDistance:Ce.getPrimaryAxisDistance,et=ot(_e,He,K),ft=it(_e,He,K),vt=5*et+ft,Et=(vt+1)/(Tt?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(de.focusKey," relative to ").concat(M," is"),et,ft,vt),q.log("smartNavigate","priority for ".concat(de.focusKey," relative to ").concat(M," is"),Et),q.visualDebugger&&(q.visualDebugger.drawPoint(He.a.x,He.a.y,"yellow",6),q.visualDebugger.drawPoint(He.b.x,He.b.y,"yellow",6)),Et})},Ce.prototype.init=function(re){var Fe=re===void 0?{}:re,O=Fe.debug,M=O!==void 0&&O,q=Fe.visualDebug,K=q!==void 0&&q,_e=Fe.nativeMode,de=_e!==void 0&&_e,He=Fe.throttle,Tt=He===void 0?0:He,ot=Fe.throttleKeypresses,it=ot!==void 0&&ot,et=Fe.useGetBoundingClientRect,ft=et!==void 0&&et,vt=Fe.shouldFocusDOMNode,Et=vt!==void 0&&vt,Ct=Fe.shouldUseNativeEvents,hn=Ct!==void 0&&Ct,Qt=Fe.rtl,nn=Qt!==void 0&&Qt;this.enabled||(this.enabled=!0,this.nativeMode=de,this.throttleKeypresses=it,this.useGetBoundingClientRect=ft,this.shouldFocusDOMNode=Et&&!de,this.shouldUseNativeEvents=hn,this.writingDirection=nn?ut.default.RTL:ut.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(Tt)&&Tt>0&&(this.throttle=Tt),this.bindEventHandlers(),K&&(this.visualDebugger=new tt.default(this.writingDirection),this.startDrawLayouts())))},Ce.prototype.setThrottle=function(re){var Fe=re===void 0?{}:re,O=Fe.throttle,M=O===void 0?0:O,q=Fe.throttleKeypresses,K=q!==void 0&&q;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},Ce.prototype.startDrawLayouts=function(){var re=this,Fe=function(){requestAnimationFrame(function(){re.visualDebugger.clearLayouts(),(0,Xe.default)(re.focusableComponents,function(O,M){re.visualDebugger.drawLayout(O.layout,M,O.parentFocusKey)}),Fe()})};Fe()},Ce.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Xt,this.unbindEventHandlers())},Ce.prototype.getEventType=function(re){return(0,oe.default)(this.getKeyMap(),function(Fe){return Fe.includes(re)})},Ce.getKeyCode=function(re){return re.keyCode||re.code},Ce.prototype.bindEventHandlers=function(){var re=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Fe){if(re.paused!==!0){re.debug&&(re.logIndex+=1);var O=Ce.getKeyCode(Fe),M=re.getEventType(O);if(M){re.pressedKeys[M]=re.pressedKeys[M]?re.pressedKeys[M]+1:1,re.shouldUseNativeEvents||(Fe.preventDefault(),Fe.stopPropagation());var q={pressedKeys:re.pressedKeys};M===ct&&re.focusKey?re.onEnterPress(q):re.onArrowPress(M,q)===!1?(re.log("keyDownEventListener","default navigation prevented"),re.visualDebugger&&re.visualDebugger.clear()):re.onKeyEvent(Fe)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,Ze.default)(this.keyDownEventListener.bind(this),this.throttle,_t)),this.keyUpEventListener=function(Fe){var O=Ce.getKeyCode(Fe),M=re.getEventType(O);delete re.pressedKeys[M],re.throttle&&!re.throttleKeypresses&&re.keyDownEventListenerThrottled.cancel(),M===ct&&re.focusKey&&re.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Ce.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var re=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",re),this.keyDownEventListener=null}},Ce.prototype.onEnterPress=function(re){var Fe=this.focusableComponents[this.focusKey];Fe?Fe.focusable?Fe.onEnterPress&&Fe.onEnterPress(re):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Ce.prototype.onEnterRelease=function(){var re=this.focusableComponents[this.focusKey];re?re.focusable?re.onEnterRelease&&re.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Ce.prototype.onArrowPress=function(re,Fe){var O=this.focusableComponents[this.focusKey];if(O)return O&&O.onArrowPress&&O.onArrowPress(re,Fe);this.log("onArrowPress","noComponent")},Ce.prototype.navigateByDirection=function(re,Fe){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var O=[Qe,Oe,lt,wt];O.includes(re)?(this.log("navigateByDirection","direction",re),this.smartNavigate(re,null,Fe)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(re,"`, but you can use only these: "),O)}},Ce.prototype.onKeyEvent=function(re){this.visualDebugger&&this.visualDebugger.clear();var Fe=Ce.getKeyCode(re),O=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(Fe)});this.smartNavigate(O,null,{event:re})},Ce.prototype.smartNavigate=function(re,Fe,O){var M=this;if(!this.nativeMode){var q=re===Qe||re===Oe,K=re===Qe||(this.writingDirection===ut.default.LTR?re===wt:re===lt);this.log("smartNavigate","direction",re),this.log("smartNavigate","fromParentFocusKey",Fe),this.log("smartNavigate","this.focusKey",this.focusKey),Fe||(0,Xe.default)(this.focusableComponents,function(hn){hn.layoutUpdated=!1});var _e=this.focusableComponents[Fe||this.focusKey];if(Fe||_e){if(this.log("smartNavigate","currentComponent",_e?_e.focusKey:void 0,_e?_e.node:void 0,_e),_e){this.updateLayout(_e.focusKey);var de=_e.parentFocusKey,He=_e.focusKey,Tt=_e.layout,ot=Ce.getCutoffCoordinate(q,K,!1,Tt,this.writingDirection),it=(0,ce.default)(this.focusableComponents,function(hn){if(hn.parentFocusKey===de&&hn.focusable){M.updateLayout(hn.focusKey);var Qt=Ce.getCutoffCoordinate(q,K,!0,hn.layout,M.writingDirection);return q||M.writingDirection===ut.default.LTR?K?Qt>=ot:Qt<=ot:K?Qt<=ot:Qt>=ot}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",ot),this.log("smartNavigate","siblings","".concat(it.length," elements:"),it.map(function(hn){return hn.focusKey}).join(", "),it.map(function(hn){return hn.node}),it.map(function(hn){return hn}))),this.visualDebugger){var et=Ce.getRefCorners(re,!1,Tt);this.visualDebugger.drawPoint(et.a.x,et.a.y),this.visualDebugger.drawPoint(et.b.x,et.b.y)}var ft=this.sortSiblingsByPriority(it,Tt,re,He),vt=(0,he.default)(ft);if(this.log("smartNavigate","nextComponent",vt?vt.focusKey:void 0,vt?vt.node:void 0,vt),vt)this.setFocus(vt.focusKey,O);else{var Et=this.focusableComponents[de],Ct=Et!=null&&Et.isFocusBoundary?Et.focusBoundaryDirections||[re]:[];Et&&Ct.includes(re)||this.smartNavigate(re,de,O)}}}else this.setFocus(this.getForcedFocusKey())}},Ce.prototype.saveLastFocusedChildKey=function(re,Fe){re&&(this.log("saveLastFocusedChildKey","".concat(re.focusKey," lastFocusedChildKey set"),Fe),re.lastFocusedChildKey=Fe)},Ce.prototype.log=function(re,Fe){for(var O=[],M=2;M<arguments.length;M++)O[M-2]=arguments[M];this.debug&&console.log.apply(console,$(["%c".concat(re,"%c").concat(Fe),"background: ".concat(Kt[this.logIndex%Kt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],O,!1))},Ce.prototype.getCurrentFocusKey=function(){return this.focusKey},Ce.prototype.getForcedFocusKey=function(){var re,Fe=(0,ce.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),O=this.sortSiblingsByPriority(Fe,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",x.ROOT_FOCUS_KEY);return(re=(0,he.default)(O))===null||re===void 0?void 0:re.focusKey},Ce.prototype.getNextFocusKey=function(re){var Fe=this,O=this.focusableComponents[re];if(!O||this.nativeMode)return re;var M=(0,ce.default)(this.focusableComponents,function(de){return de.parentFocusKey===re&&de.focusable});if(M.length>0){var q=O.lastFocusedChildKey,K=O.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",K),q&&O.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);M.forEach(function(de){return Fe.updateLayout(de.focusKey)});var _e=function(de,He){var Tt=He===ut.default.LTR?function(it){var et=it.layout;return Math.abs(et.left)+Math.abs(et.top)}:function(it){var et=it.layout;return Math.abs(window.innerWidth-et.right)+Math.abs(et.top)},ot=(0,Ae.default)(de,Tt);return(0,he.default)(ot)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",_e),this.getNextFocusKey(_e)}return this.log("getNextFocusKey","targetFocusKey",re),re},Ce.prototype.addFocusable=function(re){var Fe=re.focusKey,O=re.node,M=re.parentFocusKey,q=re.onEnterPress,K=re.onEnterRelease,_e=re.onArrowPress,de=re.onFocus,He=re.onBlur,Tt=re.saveLastFocusedChild,ot=re.trackChildren,it=re.onUpdateFocus,et=re.onUpdateHasFocusedChild,ft=re.preferredChildFocusKey,vt=re.autoRestoreFocus,Et=re.forceFocus,Ct=re.focusable,hn=re.isFocusBoundary,Qt=re.focusBoundaryDirections;if(this.focusableComponents[Fe]={focusKey:Fe,node:O,parentFocusKey:M,onEnterPress:q,onEnterRelease:K,onArrowPress:_e,onFocus:de,onBlur:He,onUpdateFocus:it,onUpdateHasFocusedChild:et,saveLastFocusedChild:Tt,trackChildren:ot,preferredChildFocusKey:ft,focusable:Ct,isFocusBoundary:hn,focusBoundaryDirections:Qt,autoRestoreFocus:vt,forceFocus:Et,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:O},layoutUpdated:!1},O||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Fe]),!this.nativeMode){this.updateLayout(Fe),this.log("addFocusable","Component added: ",this.focusableComponents[Fe]),Fe===this.focusKey&&this.setFocus(ft||Fe);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===Fe){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},Ce.prototype.removeFocusable=function(re){var Fe=re.focusKey,O=this.focusableComponents[Fe];if(O){var M=O.parentFocusKey;(0,O.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",O),delete this.focusableComponents[Fe];var q=this.parentsHavingFocusedChild.includes(Fe);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(de){return de!==Fe});var K=this.focusableComponents[M],_e=Fe===this.focusKey;if(K&&K.lastFocusedChildKey===Fe&&(K.lastFocusedChildKey=null),this.nativeMode)return;(_e||q)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",_e?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},Ce.prototype.getNodeLayoutByFocusKey=function(re){var Fe=this.focusableComponents[re];return Fe?(this.updateLayout(Fe.focusKey),Fe.layout):null},Ce.prototype.setCurrentFocusedKey=function(re,Fe){if(this.isFocusableComponent(this.focusKey)&&re!==this.focusKey){var O=this.focusableComponents[this.focusKey];O.onUpdateFocus(!1),O.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onBlur",O)}if(this.focusKey=re,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onFocus",M)}},Ce.prototype.updateParentsHasFocusedChild=function(re,Fe){for(var O=this,M=[],q=this.focusableComponents[re];q;){var K=q.parentFocusKey,_e=this.focusableComponents[K];if(_e){var de=_e.focusKey;M.push(de)}q=_e}var He=(0,X.default)(this.parentsHavingFocusedChild,M),Tt=(0,X.default)(M,this.parentsHavingFocusedChild);(0,be.default)(He,function(ot){var it=O.focusableComponents[ot];it&&it.trackChildren&&it.onUpdateHasFocusedChild(!1),O.onIntermediateNodeBecameBlurred(ot,Fe)}),(0,be.default)(Tt,function(ot){var it=O.focusableComponents[ot];it&&it.trackChildren&&it.onUpdateHasFocusedChild(!0),O.onIntermediateNodeBecameFocused(ot,Fe)}),this.parentsHavingFocusedChild=M},Ce.prototype.updateParentsLastFocusedChild=function(re){for(var Fe=this.focusableComponents[re];Fe;){var O=Fe.parentFocusKey,M=this.focusableComponents[O];M&&this.saveLastFocusedChildKey(M,Fe.focusKey),Fe=M}},Ce.prototype.getKeyMap=function(){return this.keyMap},Ce.prototype.setKeyMap=function(re){this.keyMap=R(R({},this.getKeyMap()),function(Fe){var O={};return Object.entries(Fe).forEach(function(M){var q=M[0],K=M[1];O[q]=Array.isArray(K)?K:[K]}),O}(re))},Ce.prototype.isFocusableComponent=function(re){return!!this.focusableComponents[re]},Ce.prototype.isParticipatingFocusableComponent=function(re){return this.isFocusableComponent(re)&&this.focusableComponents[re].focusable},Ce.prototype.onIntermediateNodeBecameFocused=function(re,Fe){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onFocus(this.getNodeLayoutByFocusKey(re),Fe)},Ce.prototype.onIntermediateNodeBecameBlurred=function(re,Fe){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onBlur(this.getNodeLayoutByFocusKey(re),Fe)},Ce.prototype.pause=function(){this.paused=!0},Ce.prototype.resume=function(){this.paused=!1},Ce.prototype.setFocus=function(re,Fe){if(Fe===void 0&&(Fe={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",re),re&&re!==x.ROOT_FOCUS_KEY||(re=this.getForcedFocusKey());var O=this.getNextFocusKey(re);this.log("setFocus","newFocusKey",O),this.setCurrentFocusedKey(O,Fe),this.updateParentsHasFocusedChild(O,Fe),this.updateParentsLastFocusedChild(O)}},Ce.prototype.updateAllLayouts=function(){var re=this;this.enabled&&!this.nativeMode&&(0,Xe.default)(this.focusableComponents,function(Fe,O){re.updateLayout(O)})},Ce.prototype.updateLayout=function(re){var Fe=this.focusableComponents[re];if(Fe&&!this.nativeMode&&!Fe.layoutUpdated){var O=Fe.node,M=this.useGetBoundingClientRect?(0,$e.getBoundingClientRect)(O):(0,$e.default)(O);Fe.layout=R(R({},M),{node:O})}},Ce.prototype.updateFocusable=function(re,Fe){var O=Fe.node,M=Fe.preferredChildFocusKey,q=Fe.focusable,K=Fe.isFocusBoundary,_e=Fe.focusBoundaryDirections,de=Fe.onEnterPress,He=Fe.onEnterRelease,Tt=Fe.onArrowPress,ot=Fe.onFocus,it=Fe.onBlur;if(!this.nativeMode){var et=this.focusableComponents[re];et&&(et.preferredChildFocusKey=M,et.focusable=q,et.isFocusBoundary=K,et.focusBoundaryDirections=_e,et.onEnterPress=de,et.onEnterRelease=He,et.onArrowPress=Tt,et.onFocus=ot,et.onBlur=it,O&&(et.node=O))}},Ce.prototype.isNativeMode=function(){return this.nativeMode},Ce.prototype.doesFocusableExist=function(re){return!!this.focusableComponents[re]},Ce}();x.SpatialNavigation=new At,x.init=x.SpatialNavigation.init,x.setThrottle=x.SpatialNavigation.setThrottle,x.destroy=x.SpatialNavigation.destroy,x.setKeyMap=x.SpatialNavigation.setKeyMap,x.setFocus=x.SpatialNavigation.setFocus,x.navigateByDirection=x.SpatialNavigation.navigateByDirection,x.pause=x.SpatialNavigation.pause,x.resume=x.SpatialNavigation.resume,x.updateAllLayouts=x.SpatialNavigation.updateAllLayouts,x.getCurrentFocusKey=x.SpatialNavigation.getCurrentFocusKey,x.doesFocusableExist=x.SpatialNavigation.doesFocusableExist},35:function(U,x,_){var I=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(x,"__esModule",{value:!0});var R=I(_(119)),Z=typeof window<"u"&&window.document,z=Z?window.innerWidth:0,W=Z?window.innerHeight:0,$=function(){function le(N){Z&&(this.debugCtx=le.createCanvas("sn-debug","1010",N),this.layoutsCtx=le.createCanvas("sn-layouts","1000",N),this.writingDirection=N)}return le.createCanvas=function(N,X,ce){var oe=document.querySelector("#".concat(N))||document.createElement("canvas");oe.setAttribute("id",N),oe.setAttribute("dir",ce===R.default.LTR?"ltr":"rtl");var he=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=z,oe.height=W,he},le.prototype.clear=function(){Z&&this.debugCtx.clearRect(0,0,z,W)},le.prototype.clearLayouts=function(){Z&&this.layoutsCtx.clearRect(0,0,z,W)},le.prototype.drawLayout=function(N,X,ce){if(Z){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(N.left,N.top,N.width,N.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===R.default.LTR?"left":"right",he=N[oe];this.layoutsCtx.fillText(X,he,N.top+10),this.layoutsCtx.fillText(ce,he,N.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(he),he,N.top+40),this.layoutsCtx.fillText("top: ".concat(N.top),he,N.top+55)}},le.prototype.drawPoint=function(N,X,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),Z&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(N-oe/2,X-oe/2,oe,oe))},le}();x.default=$},119:function(U,x){var _;Object.defineProperty(x,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),x.default=_},607:function(U,x,_){var I=this&&this.__createBinding||(Object.create?function(Z,z,W,$){$===void 0&&($=W);var le=Object.getOwnPropertyDescriptor(z,W);le&&!("get"in le?!z.__esModule:le.writable||le.configurable)||(le={enumerable:!0,get:function(){return z[W]}}),Object.defineProperty(Z,$,le)}:function(Z,z,W,$){$===void 0&&($=W),Z[$]=z[W]}),R=this&&this.__exportStar||function(Z,z){for(var W in Z)W==="default"||Object.prototype.hasOwnProperty.call(z,W)||I(z,Z,W)};Object.defineProperty(x,"__esModule",{value:!0}),R(_(79),x),R(_(445),x),R(_(654),x)},964:function(U,x){Object.defineProperty(x,"__esModule",{value:!0}),x.getBoundingClientRect=void 0;var _=function(I){for(var R=I.offsetParent,Z=I.offsetHeight,z=I.offsetWidth,W=I.offsetLeft,$=I.offsetTop;R&&R.nodeType===1;)W+=R.offsetLeft-R.scrollLeft,$+=R.offsetTop-R.scrollTop,R=R.offsetParent;return{height:Z,left:W,top:$,width:z}};x.default=function(I){var R=I&&I.parentElement;if(I&&R){var Z=_(R),z=_(I),W=z.height,$=z.left,le=z.top,N=z.width;return{x:$-Z.left,y:le-Z.top,width:N,height:W,left:$,top:le,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},x.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var R=I.getBoundingClientRect();return{x:R.x,y:R.y,width:R.width,height:R.height,left:R.left,top:R.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,x,_){Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusContext=x.FocusContext=void 0;var I=_(156),R=_(654);x.FocusContext=(0,I.createContext)(R.ROOT_FOCUS_KEY),x.FocusContext.displayName="FocusContext",x.useFocusContext=function(){return(0,I.useContext)(x.FocusContext)}},79:function(U,x,_){var I=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusable=void 0;var R=_(156),Z=I(_(604)),z=I(_(461)),W=_(654),$=_(445);x.useFocusable=function(le){var N=le===void 0?{}:le,X=N.focusable,ce=X===void 0||X,oe=N.saveLastFocusedChild,he=oe===void 0||oe,be=N.trackChildren,Xe=be!==void 0&&be,Ae=N.autoRestoreFocus,Ze=Ae===void 0||Ae,tt=N.forceFocus,ut=tt!==void 0&&tt,$e=N.isFocusBoundary,lt=$e!==void 0&&$e,wt=N.focusBoundaryDirections,Oe=N.focusKey,Qe=N.preferredChildFocusKey,ct=N.onEnterPress,Xt=ct===void 0?Z.default:ct,Kt=N.onEnterRelease,_t=Kt===void 0?Z.default:Kt,At=N.onArrowPress,Ce=At===void 0?function(){return!0}:At,re=N.onFocus,Fe=re===void 0?Z.default:re,O=N.onBlur,M=O===void 0?Z.default:O,q=N.extraProps,K=(0,R.useCallback)(function(Ot){Xt(q,Ot)},[Xt,q]),_e=(0,R.useCallback)(function(){_t(q)},[_t,q]),de=(0,R.useCallback)(function(Ot,Un){return Ce(Ot,q,Un)},[q,Ce]),He=(0,R.useCallback)(function(Ot,Un){Fe(Ot,q,Un)},[q,Fe]),Tt=(0,R.useCallback)(function(Ot,Un){M(Ot,q,Un)},[q,M]),ot=(0,R.useRef)(null),it=(0,R.useState)(!1),et=it[0],ft=it[1],vt=(0,R.useState)(!1),Et=vt[0],Ct=vt[1],hn=(0,$.useFocusContext)(),Qt=(0,R.useMemo)(function(){return Oe||(0,z.default)("sn:focusable-item-")},[Oe]),nn=(0,R.useCallback)(function(Ot){Ot===void 0&&(Ot={}),W.SpatialNavigation.setFocus(Qt,Ot)},[Qt]);return(0,R.useEffect)(function(){var Ot=ot.current;return W.SpatialNavigation.addFocusable({focusKey:Qt,node:Ot,parentFocusKey:hn,preferredChildFocusKey:Qe,onEnterPress:K,onEnterRelease:_e,onArrowPress:de,onFocus:He,onBlur:Tt,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),ft(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Ct(Un)},saveLastFocusedChild:he,trackChildren:Xe,isFocusBoundary:lt,focusBoundaryDirections:wt,autoRestoreFocus:Ze,forceFocus:ut,focusable:ce}),function(){W.SpatialNavigation.removeFocusable({focusKey:Qt})}},[]),(0,R.useEffect)(function(){var Ot=ot.current;W.SpatialNavigation.updateFocusable(Qt,{node:Ot,preferredChildFocusKey:Qe,focusable:ce,isFocusBoundary:lt,focusBoundaryDirections:wt,onEnterPress:K,onEnterRelease:_e,onArrowPress:de,onFocus:He,onBlur:Tt})},[Qt,Qe,ce,lt,wt,K,_e,de,He,Tt]),{ref:ot,focusSelf:nn,focused:et,hasFocusedChild:Et,focusKey:Qt}}},150:function(U){U.exports=l},117:function(U){U.exports=f},747:function(U){U.exports=p},23:function(U){U.exports=S},842:function(U){U.exports=b},682:function(U){U.exports=g},784:function(U){U.exports=w},604:function(U){U.exports=F},432:function(U){U.exports=C},67:function(U){U.exports=y},461:function(U){U.exports=v},156:function(U){U.exports=D}},T={};return function U(x){var _=T[x];if(_!==void 0)return _.exports;var I=T[x]={exports:{}};return m[x].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(f4);var su=f4.exports;function r7(i){return{all:i=i||new Map,on:function(o,l){var f=i.get(o);f?f.push(l):i.set(o,[l])},off:function(o,l){var f=i.get(o);f&&(l?f.splice(f.indexOf(l)>>>0,1):i.set(o,[]))},emit:function(o,l){var f=i.get(o);f&&f.slice().map(function(p){p(l)}),(f=i.get("*"))&&f.slice().map(function(p){p(o,l)})}}}class bf{constructor(){this.emitter=r7()}emit(o,l){this.emitter.emit(o,l)}on(o,l){var f;(f=this.emitter)==null||f.on(o,l)}once(o,l){var p;const f=S=>{var b;(b=this.emitter)==null||b.off(o,f),l(S)};(p=this.emitter)==null||p.on(o,f)}off(o,l){var f;(f=this.emitter)==null||f.off(o,l)}onAny(o){this.emitter.on("*",o)}offAny(o){this.emitter.off("*",o)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var cf=256,D4=[],Hk=256,Vy;for(;cf--;)D4[cf]=(cf+256).toString(16).substring(1);function i7(i){var o=0,l=11;if(!Vy||cf+l>Hk*2)for(Vy="",cf=0;o<Hk;o++)Vy+=D4[Math.random()*256|0];return Vy.substring(cf,cf+++l)}const Kk={DEVICE_ID:"deviceId"};function P4(){const i=localStorage.getItem(Kk.DEVICE_ID);if(i)return i;const o=i7();return localStorage.setItem(Kk.DEVICE_ID,o),o}function o7(i){i=[...i].sort((l,f)=>l-f);const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o])/2}var Ea=(i=>(i.NEGOTIATE="negotiate",i.NEGOTIATE_TV="negotiate-tv",i.EVENT_STATUS="eventStatus",i.EVENT_META="eventMeta",i.GENERATE="generate",i.CONTENTFUL="contentful",i))(Ea||{});class sg extends Error{constructor(o,l,f,p){super(),this._name=o,this._title=l,this._code=p,this._message=f}get toString(){var o,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((o=this._title.toUpperCase())!=null?o:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(o){this._name=o}get message(){return this._message}set message(o){this._message=o}get title(){return this._title}set title(o){this._title=o}get code(){return this._code}set code(o){this._code=o}}var dc=(i=>(i.TIZEN="tizen",i.WEBOS="webos",i.WEBZEROS="web0s",i.WEB="web",i))(dc||{});function dE(){const i=navigator.userAgent.toLowerCase();return i.includes("tizen")?"tizen":i.includes("webos")||i.includes("web0s")?"webos":"web"}const O4=dE()==="webos"?"LG TV":"Samsung TV",Eh=P4(),a7="https://staging-api.gigset.io",s7="new",u7="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",l7="v203lmr0b15v",RC="setup-device-id",c7="_appContainer_1isul_1",f7="_pageContainer_1isul_53",d7="_input_1isul_67",h7="_ellipsis_1isul_1",p7={appContainer:c7,pageContainer:f7,input:d7,ellipsis:h7};class hf extends Error{constructor(o,l){const f=new.target.prototype;super("".concat(o,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=f}}class NC extends Error{constructor(o="A timeout occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class ru extends Error{constructor(o="An abort occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class g7 extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=f}}class m7 extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=f}}class v7 extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=f}}class Vk extends Error{constructor(o){const l=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class y7 extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.innerErrors=l,this.__proto__=f}}class L4{constructor(o,l,f){this.statusCode=o,this.statusText=l,this.content=f}}class hE{get(o,l){return this.send({...l,method:"GET",url:o})}post(o,l){return this.send({...l,method:"POST",url:o})}delete(o,l){return this.send({...l,method:"DELETE",url:o})}getCookieString(o){return""}}var wn;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None"})(wn||(wn={}));class Hg{constructor(){}log(o,l){}}Hg.instance=new Hg;const E7="8.0.0";class po{static isRequired(o,l){if(o==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(o,l){if(!o||o.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(o,l,f){if(!(o in l))throw new Error("Unknown ".concat(f," value: ").concat(o,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Kg(i,o){let l="";return _f(i)?(l="Binary data of length ".concat(i.byteLength),o&&(l+=". Content: '".concat(_7(i),"'"))):typeof i=="string"&&(l="String data of length ".concat(i.length),o&&(l+=". Content: '".concat(i,"'"))),l}function _7(i){const o=new Uint8Array(i);let l="";return o.forEach(f=>{const p=f<16?"0":"";l+="0x".concat(p).concat(f.toString(16)," ")}),l.substr(0,l.length-1)}function _f(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}async function k4(i,o,l,f,p,S){const b={},[g,w]=_h();b[g]=w,i.log(wn.Trace,"(".concat(o," transport) sending data. ").concat(Kg(p,S.logMessageContent),"."));const F=_f(p)?"arraybuffer":"text",C=await l.post(f,{content:p,headers:{...b,...S.headers},responseType:F,timeout:S.timeout,withCredentials:S.withCredentials});i.log(wn.Trace,"(".concat(o," transport) request complete. Response status: ").concat(C.statusCode,"."))}function T7(i){return i===void 0?new B0(wn.Information):i===null?Hg.instance:i.log!==void 0?i:new B0(i)}class S7{constructor(o,l){this._subject=o,this._observer=l}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class B0{constructor(o){this._minLevel=o,this.out=console}log(o,l){if(o>=this._minLevel){const f="[".concat(new Date().toISOString(),"] ").concat(wn[o],": ").concat(l);switch(o){case wn.Critical:case wn.Error:this.out.error(f);break;case wn.Warning:this.out.warn(f);break;case wn.Information:this.out.info(f);break;default:this.out.log(f);break}}}}function _h(){let i="X-SignalR-User-Agent";return Hi.isNode&&(i="User-Agent"),[i,w7(E7,A7(),b7(),I7())]}function w7(i,o,l,f){let p="Microsoft SignalR/";const S=i.split(".");return p+="".concat(S[0],".").concat(S[1]),p+=" (".concat(i,"; "),o&&o!==""?p+="".concat(o,"; "):p+="Unknown OS; ",p+="".concat(l),f?p+="; ".concat(f):p+="; Unknown Runtime Version",p+=")",p}function A7(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function I7(){if(Hi.isNode)return process.versions.node}function b7(){return Hi.isNode?"NodeJS":"Browser"}function zk(i){return i.stack?i.stack:i.message?i.message:"".concat(i)}function C7(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function R7(i){return typeof fetch>"u"||Hi.isNode?(i._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?i._fetchType=require("node-fetch"):i._fetchType=fetch,i._fetchType=require("fetch-cookie")(i._fetchType,i._jar),!0):!1}function N7(i){return typeof AbortController>"u"?(i._abortControllerType=require("abort-controller"),!0):!1}function x7(){return require("ws")}function M7(){return require("eventsource")}class D7 extends hE{constructor(o){super(),this._logger=o;const l={_fetchType:void 0,_jar:void 0};R7(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(C7()),this._abortControllerType=AbortController;const f={_abortControllerType:this._abortControllerType};N7(f)&&(this._abortControllerType=f._abortControllerType)}async send(o){if(o.abortSignal&&o.abortSignal.aborted)throw new ru;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const l=new this._abortControllerType;let f;o.abortSignal&&(o.abortSignal.onabort=()=>{l.abort(),f=new ru});let p=null;if(o.timeout){const w=o.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),f=new NC},w)}o.content===""&&(o.content=void 0),o.content&&(o.headers=o.headers||{},_f(o.content)?o.headers["Content-Type"]="application/octet-stream":o.headers["Content-Type"]="text/plain;charset=UTF-8");let S;try{S=await this._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:o.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw f||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{p&&clearTimeout(p),o.abortSignal&&(o.abortSignal.onabort=null)}if(!S.ok){const w=await Yk(S,"text");throw new hf(w||S.statusText,S.status)}const g=await Yk(S,o.responseType);return new L4(S.status,S.statusText,g)}getCookieString(o){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(o,(f,p)=>l=p.join("; ")),l}}function Yk(i,o){let l;switch(o){case"arraybuffer":l=i.arrayBuffer();break;case"text":l=i.text();break;case"blob":case"document":case"json":throw new Error("".concat(o," is not supported."));default:l=i.text();break}return l}class P7 extends hE{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new ru):o.method?o.url?new Promise((l,f)=>{const p=new XMLHttpRequest;p.open(o.method,o.url,!0),p.withCredentials=o.withCredentials===void 0?!0:o.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.content===""&&(o.content=void 0),o.content&&(_f(o.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const S=o.headers;S&&Object.keys(S).forEach(b=>{p.setRequestHeader(b,S[b])}),o.responseType&&(p.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{p.abort(),f(new ru)}),o.timeout&&(p.timeout=o.timeout),p.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new L4(p.status,p.statusText,p.response||p.responseText)):f(new hf(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),f(new hf(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),f(new NC)},p.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class O7 extends hE{constructor(o){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new D7(o);else if(typeof XMLHttpRequest<"u")this._httpClient=new P7(o);else throw new Error("No usable HttpClient found.")}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new ru):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}class cs{static write(o){return"".concat(o).concat(cs.RecordSeparator)}static parse(o){if(o[o.length-1]!==cs.RecordSeparator)throw new Error("Message is incomplete.");const l=o.split(cs.RecordSeparator);return l.pop(),l}}cs.RecordSeparatorCode=30;cs.RecordSeparator=String.fromCharCode(cs.RecordSeparatorCode);class L7{writeHandshakeRequest(o){return cs.write(JSON.stringify(o))}parseHandshakeResponse(o){let l,f;if(_f(o)){const g=new Uint8Array(o),w=g.indexOf(cs.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,F))),f=g.byteLength>F?g.slice(F).buffer:null}else{const g=o,w=g.indexOf(cs.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=g.substring(0,F),f=g.length>F?g.substring(F):null}const p=cs.parse(l),S=JSON.parse(p[0]);if(S.type)throw new Error("Expected a handshake response from the server.");return[f,S]}}var Ar;(function(i){i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence"})(Ar||(Ar={}));class k7{constructor(){this.observers=[]}next(o){for(const l of this.observers)l.next(o)}error(o){for(const l of this.observers)l.error&&l.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new S7(this,o)}}class F7{constructor(o,l,f){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=l,this._bufferSize=f}async _send(o){const l=this._protocol.writeMessage(o);let f=Promise.resolve();if(this._isInvocationMessage(o)){this._totalMessageCount++;let p=()=>{},S=()=>{};_f(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(f=new Promise((b,g)=>{p=b,S=g})),this._messages.push(new U7(l,this._totalMessageCount,p,S))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await f}_ack(o){let l=-1;for(let f=0;f<this._messages.length;f++){const p=this._messages[f];if(p._id<=o.sequenceId)l=f,_f(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(o){if(o.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const o=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:o}));const l=this._messages;for(const f of l)await this._connection.send(f._message);this._reconnectInProgress=!1}_dispose(o){o!=null||(o=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(o)}_isInvocationMessage(o){switch(o.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(o){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class U7{constructor(o,l,f,p){this._message=o,this._id=l,this._resolver=f,this._rejector=p}}const B7=30*1e3,j7=15*1e3,Z7=1e5;var Fi;(function(i){i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting"})(Fi||(Fi={}));class xC{static create(o,l,f,p,S,b,g){return new xC(o,l,f,p,S,b,g)}constructor(o,l,f,p,S,b,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},po.isRequired(o,"connection"),po.isRequired(l,"logger"),po.isRequired(f,"protocol"),this.serverTimeoutInMilliseconds=S!=null?S:B7,this.keepAliveIntervalInMilliseconds=b!=null?b:j7,this._statefulReconnectBufferSize=g!=null?g:Z7,this._logger=l,this._protocol=f,this.connection=o,this._reconnectPolicy=p,this._handshakeProtocol=new L7,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(o){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(o,"'.")),Promise.reject(o)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const o=new Promise((l,f)=>{this._handshakeResolver=l,this._handshakeRejecter=f});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const f={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(f)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await o,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new F7(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const o=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await o}catch(l){}}_stopInternal(o){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(o,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new ru("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(o){}}stream(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._createStreamInvocation(o,l,p);let b;const g=new k7;return g.cancelCallback=()=>{const w=this._createCancelInvocation(S.invocationId);return delete this._callbacks[S.invocationId],b.then(()=>this._sendWithProtocol(w))},this._callbacks[S.invocationId]=(w,F)=>{if(F){g.error(F);return}else w&&(w.type===Ar.Completion?w.error?g.error(new Error(w.error)):g.complete():g.next(w.item))},b=this._sendWithProtocol(S).catch(w=>{g.error(w),delete this._callbacks[S.invocationId]}),this._launchStreams(f,b),g}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._sendWithProtocol(this._createInvocation(o,l,!0,p));return this._launchStreams(f,S),S}invoke(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._createInvocation(o,l,!1,p);return new Promise((g,w)=>{this._callbacks[S.invocationId]=(C,y)=>{if(y){w(y);return}else C&&(C.type===Ar.Completion?C.error?w(new Error(C.error)):g(C.result):w(new Error("Unexpected message type: ".concat(C.type))))};const F=this._sendWithProtocol(S).catch(C=>{w(C),delete this._callbacks[S.invocationId]});this._launchStreams(f,F)})}on(o,l){!o||!l||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),this._methods[o].indexOf(l)===-1&&this._methods[o].push(l))}off(o,l){if(!o)return;o=o.toLowerCase();const f=this._methods[o];if(f)if(l){const p=f.indexOf(l);p!==-1&&(f.splice(p,1),f.length===0&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const l=this._protocol.parseMessages(o,this._logger);for(const f of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(f)))switch(f.type){case Ar.Invocation:this._invokeClientMethod(f);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[f.invocationId];if(p){f.type===Ar.Completion&&delete this._callbacks[f.invocationId];try{p(f)}catch(S){this._logger.log(wn.Error,"Stream callback threw error: ".concat(zk(S)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=f.error?new Error("Server returned an error on close: "+f.error):void 0;f.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(f);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(f);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(f.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let l,f;try{[f,l]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(p){const S="Error parsing handshake response: "+p;this._logger.log(wn.Error,S);const b=new Error(S);throw this._handshakeRejecter(b),b}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const S=new Error(p);throw this._handshakeRejecter(S),S}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),f}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let o=this._nextKeepAlive-new Date().getTime();o<0&&(o=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(o){const l=o.target.toLowerCase(),f=this._methods[l];if(!f){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),o.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)));return}const p=f.slice(),S=!!o.invocationId;let b,g,w;for(const F of p)try{const C=b;b=await F.apply(this,o.arguments),S&&b&&C&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),g=void 0}catch(C){g=C,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(C,"'."))}w?await this._sendWithProtocol(w):S?(g?w=this._createCompletionMessage(o.invocationId,"".concat(g),null):b!==void 0?w=this._createCompletionMessage(o.invocationId,null,b):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),w=this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):b&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(o){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(o,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||o||new ru("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(o):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===Fi.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o!=null?o:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[o]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(o,"' threw error '").concat(l,"'."))}}}async _reconnect(o){const l=Date.now();let f=0,p=o!==void 0?o:new Error("Attempting to reconnect due to a unknown error."),S=this._getNextRetryDelay(f++,0,p);if(S===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(o);return}if(this._connectionState=Fi.Reconnecting,o?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(b=>b.apply(this,[o]))}catch(b){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(o,"' threw error '").concat(b,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;S!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(f," will start in ").concat(S," ms.")),await new Promise(b=>{this._reconnectDelayHandle=setTimeout(b,S)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(b=>b.apply(this,[this.connection.connectionId]))}catch(b){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(b,"'."))}return}catch(b){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(b,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=b instanceof Error?b:new Error(b.toString()),S=this._getNextRetryDelay(f++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(f," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(o,l,f){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:o,retryReason:f})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(o,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(o){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(f=>{const p=l[f];try{p(null,o)}catch(S){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(o,"' threw error: ").concat(zk(S)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,l,f,p){if(f)return p.length!==0?{arguments:l,streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,target:o,type:Ar.Invocation};{const S=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:S.toString(),streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,invocationId:S.toString(),target:o,type:Ar.Invocation}}}_launchStreams(o,l){if(o.length!==0){l||(l=Promise.resolve());for(const f in o)o[f].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f)))},error:p=>{let S;p instanceof Error?S=p.message:p&&p.toString?S=p.toString():S="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f,S)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(f,p)))}})}}_replaceStreamingParams(o){const l=[],f=[];for(let p=0;p<o.length;p++){const S=o[p];if(this._isObservable(S)){const b=this._invocationId;this._invocationId++,l[b]=S,f.push(b.toString()),o.splice(p,1)}}return[l,f]}_isObservable(o){return o&&o.subscribe&&typeof o.subscribe=="function"}_createStreamInvocation(o,l,f){const p=this._invocationId;return this._invocationId++,f.length!==0?{arguments:l,invocationId:p.toString(),streamIds:f,target:o,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:o,type:Ar.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:Ar.CancelInvocation}}_createStreamItemMessage(o,l){return{invocationId:o,item:l,type:Ar.StreamItem}}_createCompletionMessage(o,l,f){return l?{error:l,invocationId:o,type:Ar.Completion}:{invocationId:o,result:f,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const G7=[0,2e3,1e4,3e4,null];class Wk{constructor(o){this._retryDelays=o!==void 0?[...o,null]:G7}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}class pf{}pf.Authorization="Authorization";pf.Cookie="Cookie";class q7 extends hE{constructor(o,l){super(),this._innerClient=o,this._accessTokenFactory=l}async send(o){let l=!0;this._accessTokenFactory&&(!this._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(o);const f=await this._innerClient.send(o);return l&&f.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(o),await this._innerClient.send(o)):f}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[pf.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&o.headers[pf.Authorization]&&delete o.headers[pf.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}var lo;(function(i){i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling"})(lo||(lo={}));var Qo;(function(i){i[i.Text=1]="Text",i[i.Binary=2]="Binary"})(Qo||(Qo={}));let H7=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class $k{get pollAborted(){return this._pollAbort.aborted}constructor(o,l,f){this._httpClient=o,this._logger=l,this._pollAbort=new H7,this._options=f,this._running=!1,this.onreceive=null,this.onclose=null}async connect(o,l){if(po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._url=o,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===Qo.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[f,p]=_h(),S={[f]:p,...this._options.headers},b={abortSignal:this._pollAbort.signal,headers:S,timeout:1e5,withCredentials:this._options.withCredentials};l===Qo.Binary&&(b.responseType="arraybuffer");const g="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const w=await this._httpClient.get(g,b);w.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new hf(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,b)}async _poll(o,l){try{for(;this._running;)try{const f="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(f,"."));const p=await this._httpClient.get(f,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new hf(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(Kg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(f){this._running?f instanceof NC?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=f,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(f.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(o){return this._running?k4(this._logger,"LongPolling",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const o={},[l,f]=_h();o[l]=f;const p={headers:{...o,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let S;try{await this._httpClient.delete(this._url,p)}catch(b){S=b}S?S instanceof hf&&(S.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(S))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(wn.Trace,o),this.onclose(this._closeError)}}}class K7{constructor(o,l,f,p){this._httpClient=o,this._accessToken=l,this._logger=f,this._options=p,this.onreceive=null,this.onclose=null}async connect(o,l){return po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=o,this._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((f,p)=>{let S=!1;if(l!==Qo.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let b;if(Hi.isBrowser||Hi.isWebWorker)b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(o),w={};w.Cookie=g;const[F,C]=_h();w[F]=C,b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{b.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(Kg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(w){this._close(w);return}},b.onerror=g=>{S?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},b.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=b,S=!0,f()}}catch(g){p(g);return}})}async send(o){return this._eventSource?k4(this._logger,"SSE",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class V7{constructor(o,l,f,p,S,b){this._logger=f,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=S,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=b}async connect(o,l){po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let f;return this._accessTokenFactory&&(f=await this._accessTokenFactory()),new Promise((p,S)=>{o=o.replace(/^http/,"ws");let b;const g=this._httpClient.getCookieString(o);let w=!1;if(Hi.isNode||Hi.isReactNative){const F={},[C,y]=_h();F[C]=y,f&&(F[pf.Authorization]="Bearer ".concat(f)),g&&(F[pf.Cookie]=g),b=new this._webSocketConstructor(o,void 0,{headers:{...F,...this._headers}})}else f&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(f)));b||(b=new this._webSocketConstructor(o)),l===Qo.Binary&&(b.binaryType="arraybuffer"),b.onopen=F=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(o,".")),this._webSocket=b,w=!0,p()},b.onerror=F=>{let C=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?C=F.error:C="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(C,"."))},b.onmessage=F=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(Kg(F.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(F.data)}catch(C){this._close(C);return}},b.onclose=F=>{if(w)this._close(F);else{let C=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?C=F.error:C="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",S(new Error(C))}}})}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(Kg(o,this._logMessageContent),".")),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(o)&&(o.wasClean===!1||o.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(o.code," (").concat(o.reason||"no reason given",")."))):o instanceof Error?this.onclose(o):this.onclose())}_isCloseEvent(o){return o&&typeof o.wasClean=="boolean"&&typeof o.code=="number"}}const Xk=100;class z7{constructor(o,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,po.isRequired(o,"url"),this._logger=T7(l.logger),this.baseUrl=this._resolveUrl(o),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let f=null,p=null;Hi.isNode&&typeof require<"u"&&(f=x7(),p=M7()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&f&&(l.WebSocket=f),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new q7(l.httpClient||new O7(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(o){if(o=o||Qo.Binary,po.isIn(o,Qo,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat(Qo[o],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(o),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new ru(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new ru(l))}this._connectionStarted=!0}send(o){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new MC(this.transport)),this._sendQueue.send(o))}async stop(o){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(o),await this._stopPromise}async _stopInternal(o){this._stopError=o;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(o){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===lo.WebSockets)this.transport=this._constructTransport(lo.WebSockets),await this._startTransport(l,o);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let f=null,p=0;do{if(f=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ru("The connection was stopped during negotiation.");if(f.error)throw new Error(f.error);if(f.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(f.url&&(l=f.url),f.accessToken){const S=f.accessToken;this._accessTokenFactory=()=>S,this._httpClient._accessToken=S,this._httpClient._accessTokenFactory=void 0}p++}while(f.url&&p<Xk);if(p===Xk&&f.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,f,o)}this.transport instanceof $k&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(f){return this._logger.log(wn.Error,"Failed to start the connection: "+f),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(f)}}async _getNegotiationResponse(o){const l={},[f,p]=_h();l[f]=p;const S=this._resolveNegotiateUrl(o);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(S,"."));try{const b=await this._httpClient.post(S,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(b.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(b.statusCode,"'")));const g=JSON.parse(b.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Vk("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(b){let g="Failed to complete negotiation with the server: "+b;return b instanceof hf&&b.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new Vk(g))}}_createConnectUrl(o,l){return l?o+(o.indexOf("?")===-1?"?":"&")+"id=".concat(l):o}async _createTransport(o,l,f,p){let S=this._createConnectUrl(o,f.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(S,p),this.connectionId=f.connectionId;return}const b=[],g=f.availableTransports||[];let w=f;for(const F of g){const C=this._resolveTransportOrError(F,l,p,(w==null?void 0:w.useStatefulReconnect)===!0);if(C instanceof Error)b.push("".concat(F.transport," failed:")),b.push(C);else if(this._isITransport(C)){if(this.transport=C,!w){try{w=await this._getNegotiationResponse(o)}catch(y){return Promise.reject(y)}S=this._createConnectUrl(o,w.connectionToken)}try{await this._startTransport(S,p),this.connectionId=w.connectionId;return}catch(y){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(F.transport,"': ").concat(y)),w=void 0,b.push(new v7("".concat(F.transport," failed: ").concat(y),lo[F.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,v),Promise.reject(new ru(v))}}}}return b.length>0?Promise.reject(new y7("Unable to connect to the server with any of the available transports. ".concat(b.join(" ")),b)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(o){switch(o){case lo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new V7(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case lo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new K7(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case lo.LongPolling:return new $k(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(o,"."))}}_startTransport(o,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async f=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(o,l),await this.features.resend()}catch(S){p=!0}else{this._stopConnection(f);return}p&&this._stopConnection(f)}:this.transport.onclose=f=>this._stopConnection(f),this.transport.connect(o,l)}_resolveTransportOrError(o,l,f,p){const S=lo[o.transport];if(S==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(o.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(o.transport,"' because it is not supported by this client."));if(Y7(l,S))if(o.transferFormats.map(g=>Qo[g]).indexOf(f)>=0){if(S===lo.WebSockets&&!this._options.WebSocket||S===lo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(lo[S],"' because it is not supported in your environment.'")),new g7("'".concat(lo[S],"' is not supported in your environment."),S);this._logger.log(wn.Debug,"Selecting transport '".concat(lo[S],"'."));try{return this.features.reconnect=S===lo.WebSockets?p:void 0,this._constructTransport(S)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(lo[S],"' because it does not support the requested transfer format '").concat(Qo[f],"'.")),new Error("'".concat(lo[S],"' does not support ").concat(Qo[f],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(lo[S],"' because it was disabled by the client.")),new m7("'".concat(lo[S],"' is disabled by the client."),S)}_isITransport(o){return o&&typeof o=="object"&&"connect"in o}_stopConnection(o){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(o,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(o,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),o?this._logger.log(wn.Error,"Connection disconnected with error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(o,") threw error '").concat(l,"'."))}}}_resolveUrl(o){if(o.lastIndexOf("https://",0)===0||o.lastIndexOf("http://",0)===0)return o;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(o,"'."));const l=window.document.createElement("a");return l.href=o,this._logger.log(wn.Information,"Normalizing '".concat(o,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(o){const l=new URL(o);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const f=new URLSearchParams(l.searchParams);return f.has("negotiateVersion")||f.append("negotiateVersion",this._negotiateVersion.toString()),f.has("useStatefulReconnect")?f.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&f.append("useStatefulReconnect","true"),l.search=f.toString(),l.toString()}}function Y7(i,o){return!i||(o&i)!==0}class MC{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new zy,this._transportResult=new zy,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new zy),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof o));this._buffer.push(o),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new zy;const o=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):MC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),o.resolve()}catch(f){o.reject(f)}}}static _concatBuffers(o){const l=o.map(S=>S.byteLength).reduce((S,b)=>S+b),f=new Uint8Array(l);let p=0;for(const S of o)f.set(new Uint8Array(S),p),p+=S.byteLength;return f.buffer}}class zy{constructor(){this.promise=new Promise((o,l)=>[this._resolver,this._rejecter]=[o,l])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}const W7="json";class $7{constructor(){this.name=W7,this.version=2,this.transferFormat=Qo.Text}parseMessages(o,l){if(typeof o!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];l===null&&(l=Hg.instance);const f=cs.parse(o),p=[];for(const S of f){const b=JSON.parse(S);if(typeof b.type!="number")throw new Error("Invalid payload.");switch(b.type){case Ar.Invocation:this._isInvocationMessage(b);break;case Ar.StreamItem:this._isStreamItemMessage(b);break;case Ar.Completion:this._isCompletionMessage(b);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(b);break;case Ar.Sequence:this._isSequenceMessage(b);break;default:l.log(wn.Information,"Unknown message type '"+b.type+"' ignored.");continue}p.push(b)}return p}writeMessage(o){return cs.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),o.invocationId!==void 0&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),o.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,l){if(typeof o!="string"||o==="")throw new Error(l)}}const X7={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function Q7(i){const o=X7[i.toLowerCase()];if(typeof o<"u")return o;throw new Error("Unknown log level: ".concat(i))}class Qk{configureLogging(o){if(po.isRequired(o,"logging"),J7(o))this.logger=o;else if(typeof o=="string"){const l=Q7(o);this.logger=new B0(l)}else this.logger=new B0(o);return this}withUrl(o,l){return po.isRequired(o,"url"),po.isNotEmpty(o,"url"),this.url=o,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(o){return po.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new Wk(o):this.reconnectPolicy=o:this.reconnectPolicy=new Wk,this}withServerTimeout(o){return po.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return po.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o==null?void 0:o.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(o.logger===void 0&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new z7(this.url,o);return xC.create(l,this.logger||Hg.instance,this.protocol||new $7,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function J7(i){return i.log!==void 0}class ez extends bf{constructor(o){var l;super(),this.options=o,this.hubConnection=o.hubConnection,this.updateIntervalFrequency=(l=o.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const o=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-o.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const o=this,l=12,f=1e4,p=20;let S;return await new Promise((b,g)=>{var T;const w=[];let F=0,C,y;function v(){var U;y=Date.now(),(U=o.hubConnection)==null||U.invoke("echo"),C=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},f)}function D(U){S=U,clearTimeout(C),w.push(Date.now()-y),F++,F<l?setTimeout(v,p):m()}(T=o.hubConnection)==null||T.on("echo",D);function m(){var x;if((x=o.hubConnection)==null||x.off("echo",D),S===void 0){g(new Error("Server timestamp is undefined"));return}let U;o.options.roundtripCalcStrategy==="mean"?U=w.reduce((_,I)=>_+I)/w.length:U=o7(w),b(new Date(S+U/2))}v()})}destroy(){clearTimeout(this.timeoutInstance)}}const Xs={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},tb={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class tz extends bf{constructor({deviceId:o,debug:l}){super(),this.hubConnection=null,this.globalHubConnection=null,this.connected=!1,this.serverTimeService=null,this.state=tb.IDLE,this.deviceId=o,this.debugLogging=l!=null?l:!1}setupTimeService(){this.serverTimeService=new ez({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",o=>{this.emit("serverTimeOffsetUpdate",o)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var o;console.log("SignalR: disconnect",Xs.CLIENT_DISCONNECT,{deviceId:this.deviceId}),this.connected=!1,await((o=this.hubConnection)==null?void 0:o.invoke(Xs.CLIENT_DISCONNECT))}globalDisconnect(){var o;console.log("Disconnecting global signalR...",this.deviceId),(o=this.globalHubConnection)==null||o.invoke(Xs.CLIENT_DISCONNECT)}connect({url:o,accessToken:l,groupName:f}){var p;this.groupName=f,this.hubConnection=new Qk().withUrl(o,{accessTokenFactory:()=>l,transport:lo.WebSockets}).withAutomaticReconnect().configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(p=this.hubConnection)==null||p.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.connected=!0,this.join()}).catch(S=>{console.error("Connection failed:",S)})}async globalConnect({url:o,accessToken:l}){return new Promise((f,p)=>{this.globalHubConnection=new Qk().withUrl(o,{accessTokenFactory:()=>l,transport:lo.WebSockets}).withAutomaticReconnect().build(),this.globalHubConnection.start().catch(S=>{console.error("Global signalR connection failed:",S),p()}),this.globalHubConnection.on(Xs.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:S,ticketCode:b})=>{localStorage.setItem("ticketCode",b),f({ticketCode:b,scanTvDeviceId:S})})})}connectEventHandlers(){var o,l,f,p,S,b;(o=this.hubConnection)==null||o.on(Xs.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(Xs.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.on(Xs.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on(Xs.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(S=this.hubConnection)==null||S.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(b=this.hubConnection)==null||b.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var o,l,f,p;(o=this.hubConnection)==null||o.off(Xs.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(Xs.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.off(Xs.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),(p=this.serverTimeService)==null||p.destroy(),super.destroy()}onReceiveGroupCommand(o){var l,f,p,S,b;switch(console.log("onReceiveGroupCommand",o),o.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(o.value.startDate)}),((l=o.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(f=o.value.rateClockState)==null?void 0:f.reference,start:(p=o.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(S=o.value.rateClockState)==null?void 0:S.reference,start:(b=o.value.rateClockState)==null?void 0:b.start});break;case"cast":this.emit("cast",{index:o.value});break;case"prepareCast":this.emit("prepareCast",{index:o.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(o){switch(console.log("onReceiveGlobalCommand",o),o.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(o){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[o]}))}emitCast(o){this.emit("cast",{index:o})}onStateUpdate(o){switch(this.state=o.state.$type,o.state.$type){case tb.CONNECTED_STATE:if(!o.state.sessionId)return;this.emit("connected",{sessionId:o.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(o){console.log("SetupStatusUpdate: ",o),this.emit("setupStatusUpdate",{deviceLists:o})}}async function Ih(i,o,l){var f;try{const p=await fetch(i,o);switch(p.status){case 401:throw new sg(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new sg(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const S=await p.json();if(!p.ok)throw new sg(l==null?void 0:l.name,(f=S.sys)==null?void 0:f.id,S.message,p.status);return S}catch(p){throw p instanceof sg?p:new sg(l.name,"Network Error",l.message||"Could not make the request")}}var nb={exports:{}};(function(i,o){(function(l,f){var p="1.0.38",S="",b="?",g="function",w="undefined",F="object",C="string",y="major",v="model",D="name",m="type",T="vendor",U="version",x="architecture",_="console",I="mobile",R="tablet",Z="smarttv",z="wearable",W="embedded",$=500,le="Amazon",N="Apple",X="ASUS",ce="BlackBerry",oe="Browser",he="Chrome",be="Edge",Xe="Firefox",Ae="Google",Ze="Huawei",tt="LG",ut="Microsoft",$e="Motorola",lt="Opera",wt="Samsung",Oe="Sharp",Qe="Sony",ct="Xiaomi",Xt="Zebra",Kt="Facebook",_t="Chromium OS",At="Mac OS",Ce=function(ft,vt){var Et={};for(var Ct in ft)vt[Ct]&&vt[Ct].length%2===0?Et[Ct]=vt[Ct].concat(ft[Ct]):Et[Ct]=ft[Ct];return Et},re=function(ft){for(var vt={},Et=0;Et<ft.length;Et++)vt[ft[Et].toUpperCase()]=ft[Et];return vt},Fe=function(ft,vt){return typeof ft===C?O(vt).indexOf(O(ft))!==-1:!1},O=function(ft){return ft.toLowerCase()},M=function(ft){return typeof ft===C?ft.replace(/[^\d\.]/g,S).split(".")[0]:f},q=function(ft,vt){if(typeof ft===C)return ft=ft.replace(/^\s\s*/,S),typeof vt===w?ft:ft.substring(0,$)},K=function(ft,vt){for(var Et=0,Ct,hn,Qt,nn,Ot,Un;Et<vt.length&&!Ot;){var gr=vt[Et],Pr=vt[Et+1];for(Ct=hn=0;Ct<gr.length&&!Ot&&gr[Ct];)if(Ot=gr[Ct++].exec(ft),Ot)for(Qt=0;Qt<Pr.length;Qt++)Un=Ot[++hn],nn=Pr[Qt],typeof nn===F&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):f:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):f:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):f):this[nn]=Un||f;Et+=2}},_e=function(ft,vt){for(var Et in vt)if(typeof vt[Et]===F&&vt[Et].length>0){for(var Ct=0;Ct<vt[Et].length;Ct++)if(Fe(vt[Et][Ct],ft))return Et===b?f:Et}else if(Fe(vt[Et],ft))return Et===b?f:Et;return ft},de={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[D,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[D,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[D,U],[/opios[\/ ]+([\w\.]+)/i],[U,[D,lt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[D,lt+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[D,lt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[D,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[D,U],[/\bddg\/([\w\.]+)/i],[U,[D,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[D,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[D,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[D,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[D,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[D,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[D,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[D,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[D,Xe+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[D,lt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[D,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[D,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[D,lt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[D,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[D,Xe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[D,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[D,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[D,wt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[D,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[D,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[D,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[D,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[D],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[D,Kt],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[D,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[D,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[D,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[D,he+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[D,he+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[D,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[D,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[D,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,D],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[D,[U,_e,de]],[/(webkit|khtml)\/([\w\.]+)/i],[D,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[D,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[D,Xe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[D,U],[/(cobalt)\/([\w\.]+)/i],[D,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,O]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,S,O]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,O]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[T,wt],[m,R]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[T,wt],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[T,N],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[T,N],[m,R]],[/(macintosh);/i],[v,[T,N]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[T,Oe],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[T,Ze],[m,R]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[T,Ze],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,R]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[v,[T,"OPPO"],[m,R]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[T,$e],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[T,$e],[m,R]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[T,tt],[m,R]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[T,tt],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[T,"Lenovo"],[m,R]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[v,[T,Ae],[m,R]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[T,Ae],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[T,Qe],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[T,Qe],[m,R]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[T,le],[m,R]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[T,le],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[v,T,[m,R]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[T,ce],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[T,X],[m,R]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[T,X],[m,I]],[/(nexus 9)/i],[v,[T,"HTC"],[m,R]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[v,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[T,"Acer"],[m,R]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,v,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,v,[m,R]],[/(surface duo)/i],[v,[T,ut],[m,R]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[v,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[v,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[v,[T,"RCA"],[m,R]],[/\b(venue[\d ]{2,7}) b/i],[v,[T,"Dell"],[m,R]],[/\b(q(?:mv|ta)\w+) b/i],[v,[T,"Verizon"],[m,R]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[T,"Barnes & Noble"],[m,R]],[/\b(tm\d{3}\w+) b/i],[v,[T,"NuVision"],[m,R]],[/\b(k88) b/i],[v,[T,"ZTE"],[m,R]],[/\b(nx\d{3}j) b/i],[v,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[v,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[v,[T,"Swiss"],[m,R]],[/\b((zeki)?tb.*\b) b/i],[v,[T,"Zeki"],[m,R]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],v,[m,R]],[/\b(ns-?\w{0,9}) b/i],[v,[T,"Insignia"],[m,R]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[T,"NextBook"],[m,R]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],v,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],v,[m,I]],[/\b(ph-1) /i],[v,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[T,"Envizen"],[m,R]],[/\b(trio[-\w\. ]+) b/i],[v,[T,"MachSpeed"],[m,R]],[/\btu_(1491) b/i],[v,[T,"Rotor"],[m,R]],[/(shield[\w ]+) b/i],[v,[T,"Nvidia"],[m,R]],[/(sprint) (\w+)/i],[T,v,[m,I]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[T,ut],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[T,Xt],[m,R]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[T,Xt],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,Z]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[T,wt],[m,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,tt],[m,Z]],[/(apple) ?tv/i],[T,[v,N+" TV"],[m,Z]],[/crkey/i],[[v,he+"cast"],[T,Ae],[m,Z]],[/droid.+aft(\w+)( bui|\))/i],[v,[T,le],[m,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[T,Oe],[m,Z]],[/(bravia[\w ]+)( bui|\))/i],[v,[T,Qe],[m,Z]],[/(mitv-\w{5}) bui/i],[v,[T,ct],[m,Z]],[/Hbbtv.*(technisat) (.*);/i],[T,v,[m,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[v,q],[m,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,Z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,v,[m,_]],[/droid.+; (shield) bui/i],[v,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[v,[T,Qe],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[T,ut],[m,_]],[/((pebble))app/i],[T,v,[m,z]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[T,N],[m,z]],[/droid.+; (glass) \d/i],[v,[T,Ae],[m,z]],[/droid.+; (wt63?0{2,3})\)/i],[v,[T,Xt],[m,z]],[/(quest( \d| pro)?)/i],[v,[T,Kt],[m,z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,W]],[/(aeobc)\b/i],[v,[T,le],[m,W]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[m,R]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,R]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[D,be+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[D,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[D,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,D]],os:[[/microsoft (windows) (vista|xp)/i],[D,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[D,[U,_e,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,_e,He],[D,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[D,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[D,At],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,D],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[D,U],[/\(bb(10);/i],[U,[D,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[D,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[D,Xe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[D,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[D,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[D,he+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[D,_t],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[D,U],[/(sunos) ?([\w\.\d]*)/i],[[D,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[D,U]]},ot=function(ft,vt){if(typeof ft===F&&(vt=ft,ft=f),!(this instanceof ot))return new ot(ft,vt).getResult();var Et=typeof l!==w&&l.navigator?l.navigator:f,Ct=ft||(Et&&Et.userAgent?Et.userAgent:S),hn=Et&&Et.userAgentData?Et.userAgentData:f,Qt=vt?Ce(Tt,vt):Tt,nn=Et&&Et.userAgent==Ct;return this.getBrowser=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Ct,Qt.browser),Ot[y]=M(Ot[U]),nn&&Et&&Et.brave&&typeof Et.brave.isBrave==g&&(Ot[D]="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot[x]=f,K.call(Ot,Ct,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[T]=f,Ot[v]=f,Ot[m]=f,K.call(Ot,Ct,Qt.device),nn&&!Ot[m]&&hn&&hn.mobile&&(Ot[m]=I),nn&&Ot[v]=="Macintosh"&&Et&&typeof Et.standalone!==w&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ot[v]="iPad",Ot[m]=R),Ot},this.getEngine=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Ct,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Ct,Qt.os),nn&&!Ot[D]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Ot[D]=hn.platform.replace(/chrome os/i,_t).replace(/macos/i,At)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===C&&Ot.length>$?q(Ot,$):Ot,this},this.setUA(Ct),this};ot.VERSION=p,ot.BROWSER=re([D,U,y]),ot.CPU=re([x]),ot.DEVICE=re([v,T,m,_,I,Z,R,z,W]),ot.ENGINE=ot.OS=re([D,U]),i.exports&&(o=i.exports=ot),o.UAParser=ot;var it=typeof l!==w&&(l.jQuery||l.Zepto);if(it&&!it.ua){var et=new ot;it.ua=et.getResult(),it.ua.get=function(){return et.getUA()},it.ua.set=function(ft){et.setUA(ft);var vt=et.getResult();for(var Et in vt)it.ua[Et]=vt[Et]}}})(typeof window=="object"?window:nu)})(nb,nb.exports);var nz=nb.exports;const Jk=new nz.UAParser;function rz(i){const o=Jk.getOS(),l=Jk.getBrowser();return"Gigset/".concat(i," (").concat(o.name," ").concat(o.version,"; ").concat(l.name," ").concat(l.version,")")}function Vg({sessionId:i,appVersion:o,apiVersion:l}){const f={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":rz(o),"Api-version":l!=null?l:"v1"};return i&&(f.Session=i),f}async function iz({deviceId:i,appVersion:o,baseUrl:l}){const f={deviceOsVersion:window.navigator.userAgent,deviceName:O4,deviceId:i};return(await Ih)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(f),headers:Vg({appVersion:o})},{name:Ea.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function oz({deviceId:i,ticketCode:o,scanTvDeviceId:l,appVersion:f,baseUrl:p,ticketPrefix:S}){let b=p;S&&(b="".concat(p));const g={ticketCode:o,deviceOsVersion:window.navigator.userAgent,deviceName:O4,deviceId:i,scanTvDeviceId:l};return(await Ih)("".concat(b,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:Vg({appVersion:f})},{name:Ea.NEGOTIATE,message:"could not fetch negotiate data"})}async function az({sessionId:i,appVersion:o,baseUrl:l,ticketPrefix:f,ticketCode:p}){let S=l;f&&(S="".concat(l,"/").concat(f));const b=await Ih("".concat(S,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:Vg({sessionId:i,appVersion:o})},{name:Ea.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(b.timelineUrl).concat(b.queryParameters),{method:"GET",headers:Vg({sessionId:i,appVersion:o})}).then(async w=>await w.json()),queryParameters:b.queryParameters,distributionUrl:b.distributionUrl}}async function sz({sessionId:i,appVersion:o,baseUrl:l,ticketCode:f}){return(await Ih)("".concat(l,"/static-api/event/").concat(f,"/status"),{method:"GET",headers:Vg({sessionId:i,appVersion:o})},{name:Ea.EVENT_STATUS,message:"failed to get event status data"})}function uz(i){return"".concat(i,"/timeline-api/drm/license?drm=widevine")}var of=(i=>(i.JUMPSPOT="jumpspot",i.FOLLOW="follow",i))(of||{});function DC(i){return[...i.places.flatMap((o,l)=>o.jumpSpots.map(f=>({camera:f.camera,title:f.title,type:"jumpspot",placeIndex:l,mapPosition:o.mapPosition,mapScale:o.mapScale,placeTitle:o.title}))),...i.follows.map(o=>({camera:o.camera,title:o.title,type:"follow",mapPosition:o.mapPositions}))].map((o,l)=>({...o,index:l}))}function PC(i,o){return DC(i).filter(f=>{const p=vi(f.camera.span.time,i.frameRate),S=vi(f.camera.span.time,i.frameRate)+vi(f.camera.span.duration,i.frameRate);return p<=o&&S>=o})}function F4(i,o,l,f){const p=PC(i,o+l+2);if(!p.length)return;if(f){const g=(f==null?void 0:f.placeIndex)!==void 0&&p.find(w=>w.type==="jumpspot"&&w.placeIndex===(f==null?void 0:f.placeIndex));if(g)return g}const S=p.find(g=>g.type==="jumpspot");if(S)return S;const b=p.find(g=>g.type==="follow");if(b)return b}function lz(i){const o=DC(i),l=i.frameRate;return o.sort((f,p)=>{const S=vi(f.camera.span.time,l)+vi(f.camera.span.duration,l);return vi(p.camera.span.time,l)+vi(p.camera.span.duration,l)-S}),o[0]}function vi(i,o){if(!i)return 0;const[l,f,p,S]=i.split(":").map(Number),b=l*60*60,g=f*60;if(o){const w=S/o;return b+g+p+w}else return b+g+p}function rb(i,o,l){return PC(o,l.getExpectedPositionInSeconds()).find(f=>f.index===i)}function ib(i,o){return DC(o).find(f=>f.camera.cameraID===i)}const cz=i=>{if(typeof i=="string")return"String!";if(typeof i=="number")return"Int";if(typeof i=="boolean")return"Boolean";if(typeof i=="object"&&"OR"in i)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof i))};function U4(i,o,l){const f=i.includes("staging")||i.includes("qa"),p={...l,preview:f},b=(Array.isArray(o)?o[0]:o).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([F,C])=>"$".concat(F,": ").concat(cz(C))).join(", "),w="query(".concat(g,")").concat(b);return JSON.stringify({query:w,variables:p})}const B4=i=>"https://graphql.contentful.com/content/v1/spaces/".concat(i,"/environments/master");function j4(i,o){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:i}}const fz=(i,o)=>U4(o,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:i});async function dz(i,o,l,f){var b,g;const p=fz(i.toUpperCase(),o),S=await Ih(B4(f),j4(p,l),{name:Ea.EVENT_META,message:"Could not fetch event meta."});return(g=(b=S==null?void 0:S.data)==null?void 0:b.eventCollection.items)==null?void 0:g[0]}function hz(i,o){const l=i.reduce((f,p)=>(f.OR.push({slug:p}),f),{OR:[]});return U4(o,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function pz(i,o,l){var S,b;const f=hz(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],i);return(b=(S=(await Ih(B4(l),j4(f,o),{name:Ea.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:S.resourceSetCollection)==null?void 0:b.items}const eF=.4,tF=.2;class gz{constructor(){switch(this._algorithmArray=[l=>{const f=this._videoElement;if(f){const p=l-f.currentTime-this._offset+.14;if((p>tF||p<-tF)&&!this._switchingInProgress)if(this._switchingInProgress=!0,setTimeout(()=>{this._switchingInProgress=!1},2e3),p>1)f.currentTime=f.currentTime+p+1.8;else{const S=p/2;f.playbackRate=Math.sign(p)===1?2:.5,setTimeout(()=>{f.playbackRate=1},Math.abs(S)*2200)}}},l=>{if(this._videoElement&&!this._switchingInProgress){const f=this._videoElement,p=l-f.currentTime-this._offset+.9;(p>eF||p<-eF)&&!this._switchingInProgress&&(this._switchingInProgress=!0,f.currentTime=f.currentTime+p,setTimeout(()=>{this._switchingInProgress=!1},3e3))}}],this._offset=0,this._switchingInProgress=!1,dE()){case dc.TIZEN:this._algorithm=0;break;case dc.WEBOS:this._algorithm=1;break;default:this._algorithm=0;break}}connectMediaElement(o,l=0){this._videoElement=o,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(o){this._algorithmArray[this._algorithm](o)}destroy(){}}class mz extends bf{constructor(o){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new gz,this.state="idle",this.startTime=o,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const o=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&o&&o>Date.now()}set loading(o){this.emit("playerLoadingState",o)}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const o=this._timelineData.frameRate,l=lz(this._timelineData);return this.adjustedStartTime+(vi(l.camera.span.time,o)+vi(l.camera.span.duration,o))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(o){this._timelineData=o}pausePlayStream(o,l,f){if(o==="pause"&&!this.isPaused)this.isPaused=!0;else if(o==="play"){if(l&&f){const p=new Date(l).getTime()/1e3,S=new Date(f).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-S}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const o=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(o)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(o,l=!1){this.startTime=o,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.adjustedStartTime<Date.now()&&this.state!=="started"?(this.emit("fetchTimeline",void 0),this.onStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(o){this.serverTimeOffset=o,this.emit("startTimeUpdated",void 0),this.preparePlayback()}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class vz extends bf{constructor(o,l,f){super(),this.eventClock=o,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=f!=null?f:2}updateTimelineData(o){this.timelineData=o}updatePlaying(o){var f,p,S;let l=!1;if(this.timelineData){const b=this.timelineData.frameRate,g=(S=(p=(f=o.camera.attentions)==null?void 0:f.filter(w=>w.scope==="global"))==null?void 0:p.sort((w,F)=>vi(w.time)-vi(F.time)))!=null?S:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const F=this.eventClock.getExpectedPositionInSeconds()-vi(o.camera.span.time,b),C=vi(o.camera.span.duration,b)-F;if(g.length){const y=g.find(D=>F<vi(D.time)),v=y?vi(y.time)-F:0;v>0&&v<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},v))}C<=this.nearEndThreshold+1&&C>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(C-this.nearEndThreshold)*1e3):C<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),C<=this.transitionThreshold+1&&C>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(C-this.transitionThreshold)*1e3)),C<=1&&C>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},C*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const yz="1.0.0";function Ez({baseUrl:i,contentfulAccessToken:o,contentfulSpaceId:l}){const[f,p]=pn.useState(),[S,b]=pn.useState(),g=pn.useCallback((w,F)=>{var C,y;return f&&((y=(C=f.find(v=>v.slug===w))==null?void 0:C.resourcesCollection.items.find(v=>v.key===F))==null?void 0:y.value)||""},[f]);return pn.useEffect(()=>{i&&o&&l&&(b(void 0),pz(i,o,l).then(w=>{p(w)}).catch(w=>{b(w)}))},[i,o,l]),{contentfulData:f,getContentfulValue:g,error:S}}const _z={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},wa=$o.createContext(_z);function Tz({children:i,baseUrl:o,preferredProfile:l,contentfulAccessToken:f,contentfulSpaceId:p,ticketCodeProp:S}){const b=P4(),g=yz,[w,F]=pn.useState(),[C,y]=pn.useState(),[v,D]=pn.useState(),[m,T]=pn.useState(),[U,x]=pn.useState(),[_,I]=pn.useState(),[R,Z]=pn.useState(""),[z,W]=pn.useState(),[$,le]=pn.useState(),[N,X]=pn.useState(),[ce,oe]=pn.useState(),[he,be]=pn.useState(),[Xe,Ae]=pn.useState([]),[Ze,tt]=pn.useState([]),[ut,$e]=pn.useState(!1),[lt,wt]=pn.useState(),Oe=pn.useRef(),Qe=pn.useRef(),{getContentfulValue:ct,error:Xt}=Ez({baseUrl:o,contentfulAccessToken:f,contentfulSpaceId:p}),Kt=3;function _t(At,Ce){return Ce.filter(re=>At!==re.name)}return pn.useEffect(()=>{Ae(Xt?At=>[...At,Xt]:At=>_t(Ea.CONTENTFUL,At))},[Xt]),pn.useEffect(()=>{setTimeout(()=>{Z(S),W("SCAN_DEVICE_ID")},500)},[S]),pn.useEffect(()=>{const At=()=>{Ae([])};return document.addEventListener("clearPreConnectErrors",At),()=>{document.removeEventListener("clearPreConnectErrors",At)}},[]),pn.useEffect(()=>{o&&b&&(async()=>{let Ce=0;const re=()=>iz({deviceId:b,appVersion:g,baseUrl:o});for(;Ce<Kt;)await re().then(Fe=>{be(Fe),Ce=Kt}).catch(Fe=>{Ce+=1,Ce===2&&console.error(Fe)})})()},[g,o,b]),pn.useEffect(()=>{if(!he)return;const At=new tz({deviceId:b,debug:!1});T(At),At.globalConnect(he).then(({ticketCode:Ce,scanTvDeviceId:re})=>{Z(Ce),W(re)})},[he]),pn.useEffect(()=>{!R||!z||!(m!=null&&m.globalHubConnection)||m.globalDisconnect()},[R,z,m==null?void 0:m.globalHubConnection]),pn.useEffect(()=>{if(!R||!z){oe(void 0);return}const At=R[0];Ae(Ce=>_t(Ea.NEGOTIATE,Ce)),oz({deviceId:b,deviceType:6,appVersion:g,ticketCode:R,scanTvDeviceId:z,ticketPrefix:At,baseUrl:o}).then(Ce=>{oe(Ce),$e(Ce.ticketType>3)}).catch(Ce=>{Ae(re=>[...re,Ce])})},[R,g,o,b,z]),pn.useEffect(()=>{if(!(ce!=null&&ce.accessToken)||!ce.url||!R)return;const At=new mz(new Date(0)),Ce=new vz(At);localStorage.setItem("ticketCode",R),m==null||m.connect({url:ce.url,accessToken:ce.accessToken,groupName:R});function re(Fe){x(Fe),tt(q=>_t(Ea.EVENT_STATUS,q));const O=()=>{sz({appVersion:g,baseUrl:o,ticketCode:R,sessionId:Fe}).then(q=>{if(y(q),q.broadcastStart&&Oe.current!==q.broadcastStart&&!Qe.current)if(Oe.current=q.broadcastStart,ut){const K=new Date;K.setHours(K.getHours()+1),At.updateStartTime(K,!0)}else At.updateStartTime(new Date(q.broadcastStart),!0)}).catch(q=>{tt(K=>[...K,q])})};O(),m==null||m.on("eventStatusChanged",O),dz(R[0],o,f,p).then(q=>{D(q)}).catch(q=>{tt(K=>[...K,q])}),tt(q=>_t(Ea.GENERATE,q));const M=()=>{az({sessionId:Fe,appVersion:g,baseUrl:o,ticketCode:R}).then(q=>{At.timelineData=q,F(q),Ce.updateTimelineData(q)}).catch(q=>{tt(K=>[...K,q])})};!w&&!At.playerSyncer._videoElement&&M(),At.on("fetchTimeline",M)}return m==null||m.on("setupStatusUpdate",({deviceLists:Fe})=>{var M;const O=(M=Fe.connectedDevices[0])==null?void 0:M.sessionId;wt(Fe.connectedDevices),console.log("signalRClient `setupStatusUpdate` connected with sessionId: ",O),re(O)}),m==null||m.on("stateUpdated",({state:Fe})=>{console.log(Fe,"stateUpdate"),I(Fe)}),m==null||m.on("serverTimeOffsetUpdate",({serverTimeOffset:Fe})=>{console.log("signalRClient: server time offset updated",Fe),At.updateServerTimeOffset(Fe)}),m==null||m.on("startTimeUpdated",({startTime:Fe})=>{Oe.current=Fe.toString(),Qe.current=Fe.toString(),At.updateStartTime(Fe,!0)}),m==null||m.on("connected",({sessionId:Fe})=>{console.log("signalRClient: `connected` with sessionId: ",Fe),x(Fe),re(Fe)}),le(At),X(Ce),()=>{I(void 0),wt(void 0),m==null||m.destroy(),Ce.destroy(),At.destroy()}},[ce,R,g,o,b,f,p,ut]),xt.jsx(wa.Provider,{value:{signalRClient:m,timelineData:w,eventStatus:C,eventMeta:v,hubState:_,sessionId:U,ticketCode:R,eventClock:$,orchestrator:N,preferredProfile:l,baseUrl:o,negotiateData:ce,isDev:ut,getContentfulValue:ct,preConnectErrors:Xe,postConnectErrors:Ze,connectedDevices:lt},children:i})}const Sz="_focused_17p1l_1",wz="_posterFocused_17p1l_11",Az="_qrCode_17p1l_31",ob={focused:Sz,posterFocused:wz,qrCode:Az};function iu({selfFocus:i,focusKey:o,...l}){const{ref:f,focused:p,focusSelf:S}=su.useFocusable({onEnterPress:()=>{l.onClick()},onBlur:()=>{l.onBlur&&l.onBlur()},focusKey:o});return pn.useEffect(()=>{i&&S()},[S,i]),xt.jsx("button",{...l,ref:f,className:"".concat(l.className||""," ").concat(p?ob.focused:"")})}function bh(){return pn.useContext(wa).signalRClient}function Ch(){return pn.useContext(wa).timelineData}function Z4(){return pn.useContext(wa).eventMeta}function Iz(){return pn.useContext(wa).hubState}function bz(){return pn.useContext(wa).sessionId}function Cz(){return pn.useContext(wa).ticketCode?[0]:null}function Ou(){return pn.useContext(wa).eventClock}function G4(){return pn.useContext(wa).isDev}function q4(){return pn.useContext(wa).getContentfulValue}function H4(){return pn.useContext(wa).preConnectErrors}function Rz(){return pn.useContext(wa).postConnectErrors}function om(){return pn.useContext(wa).orchestrator}function OC(){return pn.useContext(wa).connectedDevices}function K4(){const i=Ch(),o=Cz(),l=pn.useContext(wa);return pn.useMemo(()=>[i==null?void 0:i.profiles.find(f=>f.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?uz(l.baseUrl):void 0,i==null?void 0:i.queryParameters],[l.preferredProfile,o,i,l.baseUrl])}var V4={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(i,o){(function(l,f){i.exports=f()})(self,function(){return function(){var l={4593:function(b,g){var w,F,C,y,v,D=function(U){for(var x=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?x.push(I):I<2048?(x.push(192|I>>6),x.push(128|63&I)):I<65536?(x.push(224|I>>12),x.push(128|63&I>>6),x.push(128|63&I)):(x.push(240|I>>18),x.push(128|63&I>>12),x.push(128|63&I>>6),x.push(128|63&I))}return x},m=function(U){for(var x=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),x.push(String.fromCharCode(I))}return x.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(U){for(var x=0,_=[],I=0|U.length/3;0<I--;){var R=(U[x]<<16)+(U[x+1]<<8)+U[x+2];x+=3,_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push(w.charAt(63&R>>6)),_.push(w.charAt(63&R))}return U.length-x==2?(R=(U[x]<<16)+(U[x+1]<<8),_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push(w.charAt(63&R>>6)),_.push("=")):U.length-x==1&&(R=U[x]<<16,_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push("==")),_.join("")},C=function(){for(var U=[],x=0;x<w.length;++x)U[w.charCodeAt(x)]=x;return U[61]=0,U}(),y=function(U){for(var x=0,_=[],I=0|U.length/4;0<I--;){var R=(C[U.charCodeAt(x)]<<18)+(C[U.charCodeAt(x+1)]<<12)+(C[U.charCodeAt(x+2)]<<6)+C[U.charCodeAt(x+3)];_.push(255&R>>16),_.push(255&R>>8),_.push(255&R),x+=4}return _&&(U.charAt(x-2)=="="?(_.pop(),_.pop()):U.charAt(x-1)=="="&&_.pop()),_},v={encode:function(U){for(var x=[],_=0;_<U.length;++_)x.push(U.charCodeAt(_));return x},decode:function(U){for(var x=0;x<s.length;++x)a[x]=String.fromCharCode(a[x]);return a.join("")}},T.decodeArray=function(U){var x=y(U);return new Uint8Array(x)},T.encodeASCII=function(U){var x=v.encode(U);return F(x)},T.decodeASCII=function(U){var x=y(U);return v.decode(x)},T.encode=function(U){var x=D(U);return F(x)},T.decode=function(U){var x=y(U);return m(x)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(b,g){(function(w){var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},C=function(N){var X=N;return F.hasOwnProperty(N)&&(X=F[N]),String.fromCharCode(X)},y=15,v=32,D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},x=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(N){this.time=N},log:function(N,X){var ce=this.verboseFilter[N];this.verboseLevel>=ce&&console.log(this.time+" ["+N+"] "+X)}},I=function(N){for(var X=[],ce=0;ce<N.length;ce++)X.push(N[ce].toString(16));return X},R=function(N,X,ce,oe,he){this.foreground=N||"white",this.underline=X||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=he||!1};R.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(N){for(var X=["foreground","underline","italics","background","flash"],ce=0;ce<X.length;ce++){var oe=X[ce];N.hasOwnProperty(oe)&&(this[oe]=N[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(N){return this.foreground===N.foreground&&this.underline===N.underline&&this.italics===N.italics&&this.background===N.background&&this.flash===N.flash},copy:function(N){this.foreground=N.foreground,this.underline=N.underline,this.italics=N.italics,this.background=N.background,this.flash=N.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var Z=function(N,X,ce,oe,he,be){this.uchar=N||" ",this.penState=new R(X,ce,oe,he,be)};Z.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(N,X){this.uchar=N,this.penState.copy(X)},setPenState:function(N){this.penState.copy(N)},equals:function(N){return this.uchar===N.uchar&&this.penState.equals(N.penState)},copy:function(N){this.uchar=N.uchar,this.penState.copy(N.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var z=function(){this.chars=[];for(var N=0;N<v;N++)this.chars.push(new Z);this.pos=0,this.currPenState=new R};z.prototype={equals:function(N){for(var X=!0,ce=0;ce<v;ce++)if(!this.chars[ce].equals(N.chars[ce])){X=!1;break}return X},copy:function(N){for(var X=0;X<v;X++)this.chars[X].copy(N.chars[X])},isEmpty:function(){for(var N=!0,X=0;X<v;X++)if(!this.chars[X].isEmpty()){N=!1;break}return N},setCursor:function(N){this.pos!==N&&(this.pos=N),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},moveCursor:function(N){var X=this.pos+N;if(N>1)for(var ce=this.pos+1;ce<X+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(N){N>=144&&this.backSpace();var X=C(N);this.pos>=v?_.log("ERROR","Cannot insert "+N.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(N){var X;for(X=N;X<v;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var N=[],X=!0,ce=0;ce<v;ce++){var oe=this.chars[ce].uchar;oe!==" "&&(X=!1),N.push(oe)}return X?"":N.join("")},setPenStyles:function(N){this.currPenState.setStyles(N),this.chars[this.pos].setPenState(this.currPenState)}};var W=function(){this.rows=[];for(var N=0;N<y;N++)this.rows.push(new z);this.currRow=14,this.nrRollUpRows=null,this.reset()};W.prototype={reset:function(){for(var N=0;N<y;N++)this.rows[N].clear();this.currRow=14},equals:function(N){for(var X=!0,ce=0;ce<y;ce++)if(!this.rows[ce].equals(N.rows[ce])){X=!1;break}return X},copy:function(N){for(var X=0;X<y;X++)this.rows[X].copy(N.rows[X])},isEmpty:function(){for(var N=!0,X=0;X<y;X++)if(!this.rows[X].isEmpty()){N=!1;break}return N},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(N){this.rows[this.currRow].insertChar(N)},setPen:function(N){this.rows[this.currRow].setPenStyles(N)},moveCursor:function(N){this.rows[this.currRow].moveCursor(N)},setCursor:function(N){_.log("INFO","setCursor: "+N),this.rows[this.currRow].setCursor(N)},setPAC:function(N){_.log("INFO","pacData = "+JSON.stringify(N));var X=N.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var ce=this.rows[this.currRow];if(N.indent!==null){var oe=N.indent,he=Math.max(oe-1,0);ce.setCursor(N.indent),N.color=ce.chars[he].penState.foreground}var be={foreground:N.color,underline:N.underline,italics:N.italics,background:"black",flash:!1};this.setPen(be)},setBkgData:function(N){_.log("INFO","bkgData = "+JSON.stringify(N)),this.backSpace(),this.setPen(N),this.insertChar(32)},setRollUpRows:function(N){this.nrRollUpRows=N},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var N=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(N,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(N){N=N||!1;for(var X=[],ce="",oe=-1,he=0;he<y;he++){var be=this.rows[he].getTextString();be&&(oe=he+1,N?X.push("Row "+oe+': "'+be+'"'):X.push(be.trim()))}return X.length>0&&(ce=N?"["+X.join(" | ")+"]":X.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var $=function(N,X){this.chNr=N,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new W,this.nonDisplayedMemory=new W,this.lastOutputScreen=new W,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};$.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(N){this.outputFilter=N},setPAC:function(N){this.writeScreen.setPAC(N)},setBkgData:function(N){this.writeScreen.setBkgData(N)},setMode:function(N){N!==this.mode&&(this.mode=N,_.log("INFO","MODE="+N),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=N)},insertChars:function(N){for(var X=0;X<N.length;X++)this.writeScreen.insertChar(N[X]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(N){_.log("INFO","RU("+N+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(N)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var N=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=N,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(N){_.log("INFO","TO("+N+") - Tab Offset"),this.writeScreen.moveCursor(N)},cc_MIDROW:function(N){var X={flash:!1};if(X.underline=N%2==1,X.italics=N>=46,X.italics)X.foreground="white";else{var ce=Math.floor(N/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var N=_.time;N!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(N,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:N):this.cueStartTime=N,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(N){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.displayedMemory),this.cueStartTime=N))}};var le=function(N,X,ce){this.field=N||1,this.outputs=[X,ce],this.channels=[new $(1,X),new $(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};le.prototype={getHandler:function(N){return this.channels[N].getHandler()},setHandler:function(N,X){this.channels[N].setHandler(X)},addData:function(N,X){var ce,oe,he,be=!1;this.lastTime=N,_.setTime(N);for(var Xe=0;Xe<X.length;Xe+=2)oe=127&X[Xe],he=127&X[Xe+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&he===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,he])+") is dropped")):oe!==0||he!==0?(_.log("DATA","["+I([X[Xe],X[Xe+1]])+"] -> ("+I([oe,he])+")"),(ce=this.parseCmd(oe,he))||(ce=this.parseMidrow(oe,he)),ce||(ce=this.parsePAC(oe,he)),ce||(ce=this.parseBackgroundAttributes(oe,he)),ce||(be=this.parseChars(oe,he))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(be):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:be?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,he])+" orig: "+I([X[Xe],X[Xe+1]])))):this.dataCounters.padding+=2},parseCmd:function(N,X){var ce;if(!((N===20||N===21||N===28||N===29)&&32<=X&&X<=47||(N===23||N===31)&&33<=X&&X<=35))return!1;ce=N===20||N===21||N===23?1:2;var oe=this.channels[ce-1];return N===20||N===21||N===28||N===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=N,this.lastCmdB=X,this.currChNr=ce,!0},parseMidrow:function(N,X){var ce=null;if((N===17||N===25)&&32<=X&&X<=47){if((ce=N===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+I([N,X])+")"),this.lastCmdA=N,this.lastCmdB=X,!0}return!1},parsePAC:function(N,X){var ce,oe;if(!((17<=N&&N<=23||25<=N&&N<=31)&&64<=X&&X<=127||(N===16||N===24)&&64<=X&&X<=95))return!1;ce=N<=23?1:2,oe=64<=X&&X<=95?ce===1?D[N]:T[N]:ce===1?m[N]:U[N];var he=this.interpretPAC(oe,X);return this.channels[ce-1].setPAC(he),this.lastCmdA=N,this.lastCmdB=X,this.currChNr=ce,!0},interpretPAC:function(N,X){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:N};return ce=X>95?X-96:X-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(N,X){var ce=null,oe=null,he=null;if(N>=25?(ce=2,he=N-8):(ce=1,he=N),17<=he&&he<=19){var be;be=he===17?X+80:he===18?X+112:X+144,_.log("INFO","Special char '"+C(be)+"' in channel "+ce),oe=[be],this.lastCmdA=N,this.lastCmdB=X}else 32<=N&&N<=127&&(oe=X===0?[N]:[N,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Xe=I(oe);_.log("DEBUG","Char codes =  "+Xe.join(","))}return oe},parseBackgroundAttributes:function(N,X){var ce,oe,he;return((N===16||N===24)&&32<=X&&X<=47||(N===23||N===31)&&45<=X&&X<=47)&&(ce={},N===16||N===24?(oe=Math.floor((X-32)/2),ce.background=x[oe],X%2==1&&(ce.background=ce.background+"_semi")):X===45?ce.background="transparent":(ce.foreground="black",X===47&&(ce.underline=!0)),he=N<24?1:2,this.channels[he-1].setBkgData(ce),this.lastCmdA=N,this.lastCmdB=X,!0)},reset:function(){for(var N=0;N<this.channels.length;N++)this.channels[N]&&this.channels[N].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(N){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(N)}},w.logger=_,w.PenState=R,w.CaptionScreen=W,w.Cea608Parser=le,w.findCea608Nalus=function(N,X,ce){for(var oe=0,he=X,be=[],Xe=function($e,lt,wt,Oe){if($e!==4||lt<8)return null;var Qe=wt.getUint8(Oe),ct=wt.getUint16(Oe+1),Xt=wt.getUint32(Oe+3),Kt=wt.getUint8(Oe+7);return Qe==181&&ct==49&&Xt==1195456820&&Kt==3};he<X+ce;){if(oe=N.getUint32(he),(31&N.getUint8(he+4))==6)for(var Ae=he+5,Ze=-1;Ae<he+4+oe-1;){Ze=0;for(var tt=255;tt===255;)Ze+=tt=N.getUint8(Ae),Ae++;var ut=0;for(tt=255;tt===255;)ut+=tt=N.getUint8(Ae),Ae++;Xe(Ze,ut,N,Ae)&&be.push([Ae,ut]),Ae+=ut}he+=oe+4}return be},w.extractCea608DataFromRange=function(N,X){var ce=X[0],oe=[[],[]];ce+=8;var he=31&N.getUint8(ce);ce+=2;for(var be=0;be<he;be++){var Xe=N.getUint8(ce),Ae=4&Xe,Ze=3&Xe;ce++;var tt=N.getUint8(ce);ce++;var ut=N.getUint8(ce);ce++,Ae&&(127&tt)+(127&ut)!=0&&(Ze===0?(oe[0].push(tt),oe[0].push(ut)):Ze===1&&(oe[1].push(tt),oe[1].push(ut)))}return oe}})(g)},8416:function(b,g,w){var F=w(1139),C=w(5448),y=w(6398),v=w(2032),D=(w(5530),typeof window<"u"&&window||w.g),m=D.dashjs;m||(m=D.dashjs={}),m.MediaPlayer=F.Z,m.FactoryMaker=C.Z,m.Debug=y.Z,m.Version=(0,v.e)()},6398:function(b,g,w){var F=w(5595),C=w(8512),y=w(5448),v=1,D=2,m=3,T=4,U=5;function x(I){I=I||{};var R,Z,z,W,$=this.context,le=(0,F.Z)($).getInstance(),N=I.settings,X=[];function ce(tt){return tt&&tt.bind?tt.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var tt=arguments.length,ut=new Array(tt),$e=0;$e<tt;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[v,this].concat(ut))}function he(){for(var tt=arguments.length,ut=new Array(tt),$e=0;$e<tt;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[D,this].concat(ut))}function be(){for(var tt=arguments.length,ut=new Array(tt),$e=0;$e<tt;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[m,this].concat(ut))}function Xe(){for(var tt=arguments.length,ut=new Array(tt),$e=0;$e<tt;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[T,this].concat(ut))}function Ae(){for(var tt=arguments.length,ut=new Array(tt),$e=0;$e<tt;$e++)ut[$e]=arguments[$e];Ze.apply(void 0,[U,this].concat(ut))}function Ze(tt,ut){var $e="",lt=null;Z&&(lt=new Date().getTime(),$e+="["+(lt-W)+"]"),z&&ut&&ut.getClassName&&($e+="["+ut.getClassName()+"]",ut.getType&&($e+="["+ut.getType()+"]")),$e.length>0&&($e+=" ");for(var wt=arguments.length,Oe=new Array(wt>2?wt-2:0),Qe=2;Qe<wt;Qe++)Oe[Qe-2]=arguments[Qe];Array.apply(null,Oe).forEach(function(ct){$e+=ct+" "}),X[tt]&&N&&N.get().debug.logLevel>=tt&&X[tt]($e),N&&N.get().debug.dispatchEvent&&le.trigger(C.Z.LOG,{message:$e,level:tt})}return R={getLogger:function(tt){return{fatal:oe.bind(tt),error:he.bind(tt),warn:be.bind(tt),info:Xe.bind(tt),debug:Ae.bind(tt)}},setLogTimestampVisible:function(tt){Z=tt},setCalleeNameVisible:function(tt){z=tt}},Z=!0,z=!0,W=new Date().getTime(),typeof window<"u"&&window.console&&(X[v]=ce(window.console.error),X[D]=ce(window.console.error),X[m]=ce(window.console.warn),X[T]=ce(window.console.info),X[U]=ce(window.console.debug)),R}x.__dashjs_factory_name="Debug";var _=y.Z.getSingletonFactory(x);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=v,_.LOG_LEVEL_ERROR=D,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,y.Z.updateSingletonFactory(x.__dashjs_factory_name,_),g.Z=_},5595:function(b,g,w){var F=w(5448),C=w(8825);function y(){var D={};function m(U,x,_){var I=-1;return D[U]&&D[U].some(function(R,Z){if(R&&R.callback===x&&(!_||_===R.scope))return I=Z,!0}),I}var T={on:function(U,x,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!x||typeof x!="function")throw new Error("listener must be a function: "+x);var R=I.priority||0;if(!(m(U,x,_)>=0)){D[U]=D[U]||[];var Z={callback:x,scope:_,priority:R};_&&_.getStreamId&&(Z.streamId=_.getStreamId()),_&&_.getType&&(Z.mediaType=_.getType()),I&&I.mode&&(Z.mode=I.mode);var z=D[U].some(function(W,$){if(W&&R>W.priority)return D[U].splice($,0,Z),!0});z||D[U].push(Z)}},off:function(U,x,_){if(U&&x&&D[U]){var I=m(U,x,_);I<0||(D[U][I]=null)}},trigger:function(U){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&D[U]){if((x=x||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");x.type=U,_.streamId&&(x.streamId=_.streamId),_.mediaType&&(x.mediaType=_.mediaType),D[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===C.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,x)})}},reset:function(){D={}}};return T}y.__dashjs_factory_name="EventBus";var v=F.Z.getSingletonFactory(y);v.EVENT_PRIORITY_LOW=0,v.EVENT_PRIORITY_HIGH=5e3,F.Z.updateSingletonFactory(y.__dashjs_factory_name,v),g.Z=v},5448:function(b,g){var w=function(){var F,C=[],y={},v={};function D(x,_){for(var I in C){var R=C[I];if(R.context===x&&R.name===_)return R.instance}return null}function m(x,_){return _[x]}function T(x,_,I){x in I&&(I[x]=_)}function U(x,_,I){var R,Z=x.__dashjs_factory_name,z=_[Z];if(z){var W=z.instance;if(!z.override)return W.apply({context:_,factory:F},I);for(var $ in R=x.apply({context:_},I),W=W.apply({context:_,factory:F,parent:R},I))R.hasOwnProperty($)&&(R[$]=W[$])}else R=x.apply({context:_},I);return R.getClassName=function(){return Z},R}return F={extend:function(x,_,I,R){!R[x]&&_&&(R[x]={instance:_,override:I})},getSingletonInstance:D,setSingletonInstance:function(x,_,I){for(var R in C){var Z=C[R];if(Z.context===x&&Z.name===_)return void(C[R].instance=I)}C.push({name:_,context:x,instance:I})},deleteSingletonInstances:function(x){C=C.filter(function(_){return _.context!==x})},getSingletonFactory:function(x){var _=m(x.__dashjs_factory_name,y);return _||(_=function(I){var R;return I===void 0&&(I={}),{getInstance:function(){return R||(R=D(I,x.__dashjs_factory_name)),R||(R=U(x,I,arguments),C.push({name:x.__dashjs_factory_name,context:I,instance:R})),R}}},y[x.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(x){return m(x,y)},updateSingletonFactory:function(x,_){T(x,_,y)},getClassFactory:function(x){var _=m(x.__dashjs_factory_name,v);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(x,I,arguments)}}},v[x.__dashjs_factory_name]=_),_},getClassFactoryByName:function(x){return m(x,v)},updateClassFactory:function(x,_){T(x,_,v)}},F}();g.Z=w},1264:function(b,g,w){var F=w(5448),C=w(703),y=w(6398),v=w(3393),D=w(7855),m=w(5595),T=w(8512);function U(R){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},U(R)}function x(R,Z,z){return Z in R?Object.defineProperty(R,Z,{value:z,enumerable:!0,configurable:!0,writable:!0}):R[Z]=z,R}function _(){var R,Z,z=this.context,W=(0,m.Z)(z).getInstance(),$={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},le={debug:{logLevel:y.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:v.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:v.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(R={},x(R,D.w.MPD_TYPE,500),x(R,D.w.XLINK_EXPANSION_TYPE,500),x(R,D.w.MEDIA_SEGMENT_TYPE,1e3),x(R,D.w.INIT_SEGMENT_TYPE,1e3),x(R,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),x(R,D.w.INDEX_SEGMENT_TYPE,1e3),x(R,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),x(R,D.w.LICENSE,1e3),x(R,D.w.OTHER_TYPE,1e3),x(R,"lowLatencyReductionFactor",10),R),retryAttempts:(Z={},x(Z,D.w.MPD_TYPE,3),x(Z,D.w.XLINK_EXPANSION_TYPE,1),x(Z,D.w.MEDIA_SEGMENT_TYPE,3),x(Z,D.w.INIT_SEGMENT_TYPE,3),x(Z,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),x(Z,D.w.INDEX_SEGMENT_TYPE,3),x(Z,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),x(Z,D.w.LICENSE,3),x(Z,D.w.OTHER_TYPE,3),x(Z,"lowLatencyMultiplyFactor",5),Z),abr:{movingAverageMethod:v.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:v.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:v.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},N=C.Z.clone(le);function X(ce,oe,he){for(var be in ce)ce.hasOwnProperty(be)&&(oe.hasOwnProperty(be)?U(ce[be])!=="object"||ce[be]instanceof Array||ce[be]===null?(oe[be]=C.Z.clone(ce[be]),$[he+be]&&W.trigger($[he+be])):X(ce[be],oe[be],he.slice()+be+"."):console.error("Settings parameter "+he+be+" is not supported"))}return{get:function(){return N},update:function(ce){U(ce)==="object"&&X(ce,N,"")},reset:function(){N=C.Z.clone(le)}}}_.__dashjs_factory_name="Settings";var I=F.Z.getSingletonFactory(_);g.Z=I},703:function(b,g,w){var F=w(3875),C=w.n(F),y=w(1067);function v(T){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},v(T)}function D(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,x;return U=T,x=[{key:"mixin",value:function(_,I,R){var Z,z={};if(_)for(var W in I)I.hasOwnProperty(W)&&(Z=I[W],W in _&&(_[W]===Z||W in z&&z[W]===Z)||(v(_[W])==="object"&&_[W]!==null?_[W]=T.mixin(_[W],Z,R):_[W]=R(Z)));return _}},{key:"clone",value:function(_){if(!_||v(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var R=0,Z=_.length;R<Z;++R)R in _&&I.push(T.clone(_[R]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var R=new URL(_);return I.forEach(function(Z){Z.key&&Z.value&&R.searchParams.set(Z.key,Z.value)}),R.href}catch(Z){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var R=_.trim().split("\r\n"),Z=0,z=R.length;Z<z;Z++){var W=R[Z],$=W.indexOf(": ");$>0&&(I[W.substring(0,$)]=W.substring($+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var R=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?R:3&R|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var R=0;R<_.length;R++)I=(I<<5)-I+_.charCodeAt(R),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var R=new URL(_),Z=new URL(I);if(R.protocol=Z.protocol,R.origin!==Z.origin)return I;var z=C().relative(R.pathname.substr(0,R.pathname.lastIndexOf("/")),Z.pathname.substr(0,Z.pathname.lastIndexOf("/"))),W=z.length===0?1:0;return z+=Z.pathname.substr(Z.pathname.lastIndexOf("/")+W,Z.pathname.length-1),Z.pathname.length<z.length?Z.pathname:z}catch($){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,y.UAParser)(I)}catch(R){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],x&&D(U,x),T}();g.Z=m},2032:function(b,g,w){function F(){return"4.7.4"}w.d(g,{e:function(){return F}})},2230:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in D)!D.hasOwnProperty(x)||this[x]&&!T||U&&D[x].indexOf("public_")===-1||(this[x]=D[x])}}}])&&w(y.prototype,v),C}();g.Z=F},4351:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},C(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&C(I,R)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var Z=v(this).constructor;I=Reflect.construct(R,arguments,Z)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(w(8342).Z);g.Z=D},8512:function(b,g,w){function F(U){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},F(U)}function C(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")}function y(U,x){return y=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},y(U,x)}function v(U,x){return!x||F(x)!=="object"&&typeof x!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):x}function D(U){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},D(U)}var m=function(U){(function(Z,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(z&&z.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),z&&y(Z,z)})(R,U);var x,_,I=(x=R,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}(),function(){var Z,z=D(x);if(_){var W=D(this).constructor;Z=Reflect.construct(z,arguments,W)}else Z=z.apply(this,arguments);return v(this,Z)});function R(){return C(this,R),I.apply(this,arguments)}return R}(w(4351).Z),T=new m;g.Z=T},8342:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in D)!D.hasOwnProperty(x)||this[x]&&!T||U&&D[x].indexOf("public_")===-1||(this[x]=D[x])}}}])&&w(y.prototype,v),C}();g.Z=F},9326:function(b,g,w){var F=w(3186),C=w(7855),y=w(5448),v=w(8825),D=w(7387),m=w(1553);function T(U){var x,_,I,R,Z,z=(U=U||{}).eventBus,W=U.debug,$=U.urlUtils,le=U.type,N=U.streamInfo,X=U.segmentsController,ce=U.timelineConverter,oe=U.baseURLController;function he(){return le}function be(){I=null}function Xe($e,lt,wt){var Oe,Qe,ct=oe.resolve(wt.path),Xt={};return ct&&lt!==ct.url&&$.isRelative(lt)?(Oe=ct.url,Qe=ct.serviceLocation,Xt=ct.queryParams,lt&&(Oe=$.resolve(lt,Oe))):Oe=lt,!$.isRelative(Oe)&&($e.url=Oe,$e.serviceLocation=Qe,$e.queryParams=Xt,!0)}function Ae($e,lt){if(lt==null)return null;var wt=new F.Z,Oe=lt.representation,Qe=Oe.adaptation.period.mpd.manifest.Period_asArray[Oe.adaptation.period.index].AdaptationSet_asArray[Oe.adaptation.index].Representation_asArray[Oe.index].bandwidth,ct=lt.media;return ct=(0,D.vi)(ct,"Number",lt.replacementNumber),ct=(0,D.vi)(ct,"Time",lt.replacementTime),ct=(0,D.vi)(ct,"Bandwidth",Qe),ct=(0,D.Aj)(ct,Oe.id),ct=(0,D.eR)(ct),wt.mediaType=he(),wt.type=C.w.MEDIA_SEGMENT_TYPE,wt.range=lt.mediaRange,wt.startTime=lt.presentationStartTime,wt.mediaStartTime=lt.mediaStartTime,wt.duration=lt.duration,wt.timescale=Oe.timescale,wt.availabilityStartTime=lt.availabilityStartTime,wt.availabilityEndTime=lt.availabilityEndTime,wt.availabilityTimeComplete=Oe.availabilityTimeComplete,wt.wallStartTime=lt.wallStartTime,wt.quality=Oe.index,wt.index=lt.index,wt.mediaInfo=$e,wt.adaptationIndex=Oe.adaptation.index,wt.representationId=Oe.id,Xe(wt,ct,Oe)?wt:void 0}function Ze($e,lt,wt){var Oe=null;if(!lt||!lt.segmentInfoType)return Oe;var Qe=X.getSegmentByTime(lt,wt);return Qe&&(I=Qe,_.debug("Index for time "+wt+" is "+Qe.index),Oe=Ae($e,Qe)),Oe}function tt($e,lt,wt){var Oe=null,Qe=X.getSegmentByIndex(lt,wt,I?I.mediaStartTime:-1);if(Qe)Oe=Ae($e,Qe),I=Qe;else{if(R&&!Z)return _.debug(he()+" No segment found at index: "+wt+". Wait for next loop"),null;Z=!0}return Oe}function ut(){_.debug("Dynamic stream complete"),Z=!0}return x={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function($e,lt){return lt?function(wt,Oe,Qe){var ct=new F.Z,Xt=Oe.adaptation.period,Kt=Xt.start;if(ct.mediaType=Qe,ct.type=C.w.INIT_SEGMENT_TYPE,ct.range=Oe.range,ct.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(Kt,Oe,R),ct.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(Kt+Xt.duration,Oe,R),ct.quality=Oe.index,ct.mediaInfo=wt,ct.representationId=Oe.id,Xe(ct,Oe.initialization,Oe))return ct.url=(0,D.vi)(ct.url,"Bandwidth",Oe.bandwidth),ct}($e,lt,he()):null},getNextSegmentRequest:function($e,lt){return lt&&lt.segmentInfoType?tt($e,lt,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function($e,lt){var wt=I?I.index+1:0,Oe=X.getSegmentByIndex(lt,wt,I?I.mediaStartTime:-1);return Oe?Ae($e,Oe):null},getSegmentRequestForTime:Ze,getStreamId:function(){return N.id},getStreamInfo:function(){return N},getType:he,getValidTimeAheadOfTargetTime:function($e,lt,wt,Oe){try{if(isNaN($e)||!lt||!wt)return NaN;if($e<0&&($e=0),isNaN(Oe)&&(Oe=.5),Ze(lt,wt,$e))return $e;if(wt.adaptation.period.start+wt.adaptation.period.duration<$e)return NaN;for(var Qe=isFinite(wt.adaptation.period.duration)?wt.adaptation.period.start+wt.adaptation.period.duration:$e+30,ct=Math.min($e+Oe,Qe),Xt=NaN,Kt=null;ct<=Qe;){var _t=null;if(ct<=Qe&&(_t=Ze(lt,wt,ct)),_t){Xt=ct,Kt=_t;break}ct+=Oe}if(Kt){var At=Kt.startTime+Kt.duration;return $e>Kt.startTime&&At-$e>Oe?$e:!isNaN(Kt.startTime)&&$e<Kt.startTime&&Xt>Kt.startTime?Kt.startTime+.001:Math.min(At-Oe,Xt)}return Xt}catch(Ce){return NaN}},initialize:function($e){R=$e,Z=!1,X.initialize($e)},isLastSegmentRequested:function($e,lt){return!$e||!I?!1:Z?!0:!isFinite($e.adaptation.period.duration)||I.presentationStartTime+I.duration>lt?!1:$e.mediaFinishedInformation&&!isNaN($e.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=$e.mediaFinishedInformation.numberOfSegments-1&&(!R||$e.segmentInfoType===m.Z.SEGMENT_TEMPLATE||R&&$e.segmentInfoType===m.Z.SEGMENT_LIST&&$e.adaptation.period.nextPeriodId)?!0:!!(R&&$e.adaptation.period.nextPeriodId&&$e.segmentInfoType===m.Z.SEGMENT_TIMELINE&&$e.mediaFinishedInformation&&!isNaN($e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=$e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function($e,lt){return lt&&lt.segmentInfoType?tt($e,lt,I?I.index:0):null},reset:function(){be(),z.off(v.Z.DYNAMIC_TO_STATIC,ut,x)}},_=W.getLogger(x),be(),z.on(v.Z.DYNAMIC_TO_STATIC,ut,x),x}T.__dashjs_factory_name="DashHandler",g.Z=y.Z.getClassFactory(T)},1553:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(y.prototype,v),C}());g.Z=F},7802:function(b,g,w){var F=w(5448),C=w(1724),y=w(3636),v=w(1736),D=w(5246);function m(U){U=U||{};var x,_,I=this.context,R=U.dashConstants,Z=U.type,z=U.segmentBaseController;function W($){return $?$.segments?_[R.SEGMENT_BASE]:_[$.segmentInfoType]:null}return x={initialize:function($){_[R.SEGMENT_TIMELINE]=(0,C.Z)(I).create(U,$),_[R.SEGMENT_TEMPLATE]=(0,y.Z)(I).create(U,$),_[R.SEGMENT_LIST]=(0,v.Z)(I).create(U,$),_[R.SEGMENT_BASE]=(0,D.Z)(I).create(U,$)},updateInitData:function($,le){return le?Promise.resolve():z.getSegmentBaseInitSegment({representation:$,mediaType:Z})},updateSegmentData:function($,le){return le?Promise.resolve():z.getSegmentList({mimeType:$.mimeType,representation:$,mediaType:Z})},getSegmentByIndex:function($,le,N){var X=W($);return X?X.getSegmentByIndex($,le,N):null},getSegmentByTime:function($,le){var N=W($);return N?N.getSegmentByTime($,le):null},getMediaFinishedInformation:function($){var le=W($);return le?le.getMediaFinishedInformation($):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},x}m.__dashjs_factory_name="SegmentsController";var T=F.Z.getClassFactory(m);g.Z=T},1736:function(b,g,w){var F=w(5448),C=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,R){if(x(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=Z.SegmentURL_asArray.length,W=I&&!isNaN(I.startNumber)?I.startNumber:1,$=Math.max(W-1,0),le=Math.max(R-$,0),N=null;if(le<z){var X=Z.SegmentURL_asArray[le];(N=(0,y.NF)(U,T,I,R))&&(N.replacementTime=(W+R-1)*I.segmentDuration,N.media=X.media?X.media:"",N.mediaRange=X.mediaRange,N.indexRange=X.indexRange)}return N}return{getSegmentByIndex:_,getSegmentByTime:function(I,R){if(x(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,R);return _(I,Math.floor(z/Z))},getMediaFinishedInformation:function(I){var R={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return R;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=I&&!isNaN(I.startNumber)?I.startNumber:1,W=Math.max(z-1,0);return R.numberOfSegments=W+Z.SegmentURL_asArray.length,R}}}v.__dashjs_factory_name="ListSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},5246:function(b,g,w){var F=w(5448),C=w(3393);function y(D){var m=(D=D||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function U(x,_){if(T(),!x)return null;var I,R=x.segments?x.segments.length:-1;if(_<R&&(I=x.segments[_])&&I.index===_)return I;for(var Z=0;Z<R;Z++)if((I=x.segments[Z])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(x,_){T();var I=function(R,Z){if(!R)return-1;var z,W,$,le,N,X=R.segments,ce=X?X.length:null,oe=-1;if(X&&ce>0){for(N=0;N<ce;N++)if($=(W=X[N]).presentationStartTime,Z+(z=(le=W.duration)/2)>=$&&Z-z<$+le){oe=W.index;break}}return oe}(x,_);return U(x,I)},getMediaFinishedInformation:function(x){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return x&&x.segments&&(_.numberOfSegments=x.segments.length),_}}}y.__dashjs_factory_name="SegmentBaseGetter";var v=F.Z.getClassFactory(y);g.Z=v},7387:function(b,g,w){w.d(g,{Aj:function(){return v},NF:function(){return U},TJ:function(){return x},eR:function(){return y},vi:function(){return D}});var F=w(2011);function C(_,I){for(;_.length<I;)_="0"+_;return _}function y(_){return _&&_.split("$$").join("$")}function v(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var R=I.toString();return _.split("$RepresentationID$").join(R)}function D(_,I,R){var Z,z,W,$,le,N,X=I.length,ce=2;if(!_)return _;for(;;){if((Z=_.indexOf("$"+I))<0||(z=_.indexOf("$",Z+X))<0)return _;if((W=_.indexOf("%0",Z+X))>Z&&W<z)switch($=_.charAt(z-1),le=parseInt(_.substring(W+ce,z-1),10),$){case"d":case"i":case"u":N=C(R.toString(),le);break;case"x":N=C(R.toString(16),le);break;case"X":N=C(R.toString(16),le).toUpperCase();break;case"o":N=C(R.toString(8),le);break;default:return _}else N=R;_=_.substring(0,Z)+N+_.substring(z+1)}}function m(_,I,R,Z,z,W,$,le){var N,X=new F.Z;return X.representation=_,X.duration=I,X.presentationStartTime=R,X.mediaStartTime=Z,X.availabilityStartTime=z.calcAvailabilityStartTimeFromPresentationTime(W,_,$),X.availabilityEndTime=z.calcAvailabilityEndTimeFromPresentationTime(W+I,_,$),X.wallStartTime=z.calcWallTimeForSegment(X,$),X.replacementNumber=(N=le,X.representation.startNumber+N),X.index=le,X}function T(_,I,R,Z){var z=I.adaptation.period;if(isFinite(z.duration)&&z.start+z.duration<=R.presentationStartTime)return!1;if(Z){if(I.availabilityTimeOffset==="INF")return!0;var W=_.getClientReferenceTime();return R.availabilityStartTime.getTime()<=W&&(!isFinite(R.availabilityEndTime)||R.availabilityEndTime.getTime()>=W)}return!0}function U(_,I,R,Z){var z,W,$;z=R.segmentDuration,isNaN(z)&&(z=R.adaptation.period.duration),W=parseFloat((R.adaptation.period.start+Z*z).toFixed(5)),$=parseFloat((W+z).toFixed(5));var le=m(R,z,W,_.calcMediaTimeFromPresentationTime(W,R),_,$,I,Z);return T(_,R,le,I)?le:null}function x(_,I,R,Z,z,W,$,le,N,X){var ce,oe,he=Z/W,be=z/W;return ce=_.calcPresentationTimeFromMediaTime(he,R),T(_,R,oe=m(R,be,ce,he,_,ce+be,I,N),I)?(oe.replacementTime=X||Z,$=D($,"Number",oe.replacementNumber),$=D($,"Time",oe.replacementTime),oe.media=$,oe.mediaRange=le,oe):null}},3636:function(b,g,w){var F=w(5448),C=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,R){if(x(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;R=Math.max(R,0);var z=(0,y.NF)(U,T,I,R);if(z){z.replacementTime=Math.round((R-1)*I.segmentDuration*I.timescale,10);var W=Z.media;W=(0,y.vi)(W,"Number",z.replacementNumber),W=(0,y.vi)(W,"Time",z.replacementTime),z.media=W}return z}return{getSegmentByIndex:_,getSegmentByTime:function(I,R){if(x(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,R);return _(I,Math.floor(z/Z))},getMediaFinishedInformation:function(I){var R={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return R;var Z=I.segmentDuration;return isNaN(Z)?R.numberOfSegments=1:R.numberOfSegments=Math.ceil(I.adaptation.period.duration/Z),R}}}v.__dashjs_factory_name="TemplateSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},1724:function(b,g,w){var F=w(5448),C=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter,x=m.dashMetrics;function _(){if(!U)throw new Error(C.Z.MISSING_CONFIG_ERROR)}function I(Z,z){var W,$,le,N,X,ce,oe,he=Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList,be=he.SegmentTimeline,Xe=he.SegmentURL_asArray,Ae=0,Ze=-1;oe=Z.timescale;var tt=!1;for(le=0,N=(W=be.S_asArray).length;le<N&&!tt;le++)for(ce=0,($=W[le]).hasOwnProperty("r")&&(ce=$.r),$.hasOwnProperty("t")&&(Ae=$.t),ce<0&&(ce=R(Z,W[le+1],$,oe,Ae/oe)),X=0;X<=ce&&!tt;X++)(tt=z(Ae,he,Xe,$,oe,++Ze,le))&&(Z.segmentDuration=$.d/oe),Ae+=$.d}function R(Z,z,W,$,le){var N;if(z&&z.hasOwnProperty("t"))N=z.t/$;else try{var X=0;if(isNaN(Z.adaptation.period.start)||isNaN(Z.adaptation.period.duration)||!isFinite(Z.adaptation.period.duration)){var ce=x.getCurrentDVRInfo();X=isNaN(ce.end)?0:ce.end}else X=Z.adaptation.period.start+Z.adaptation.period.duration;N=U.calcMediaTimeFromPresentationTime(X,Z),Z.segmentDuration=W.d/$}catch(oe){N=0}return Math.max(Math.ceil((N-le)/(W.d/$))-1,0)}return{getSegmentByIndex:function(Z,z,W){if(_(),!Z)return null;var $=null,le=!1;return I(Z,function(N,X,ce,oe,he,be,Xe){if(le||W<0){var Ae=X.media,Ze=oe.mediaRange;return ce&&(Ae=ce[Xe].media||"",Ze=ce[Xe].mediaRange),$=(0,y.TJ)(U,T,Z,N,oe.d,he,Ae,Ze,be,oe.tManifest),!0}return N>=W*he-.5*oe.d&&(le=!0),!1}),$},getSegmentByTime:function(Z,z){if(_(),!Z)return null;z===void 0&&(z=null);var W=null,$=U.calcMediaTimeFromPresentationTime(z,Z);return I(Z,function(le,N,X,ce,oe,he,be){var Xe=parseFloat(($*oe).toPrecision(15));if(Xe<le+ce.d&&Xe>=le){var Ae=N.media,Ze=ce.mediaRange;return X&&(Ae=X[be].media||"",Ze=X[be].mediaRange),W=(0,y.TJ)(U,T,Z,le,ce.d,oe,Ae,Ze,he,ce.tManifest),!0}return!1}),W},getMediaFinishedInformation:function(Z){if(!Z)return 0;var z,W,$,le,N,X,ce,oe=(Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList).SegmentTimeline,he=0,be=0,Xe=0;for(ce=Z.timescale,le=(z=oe.S_asArray).length,$=0;$<le;$++)for(X=0,(W=z[$]).hasOwnProperty("r")&&(X=W.r),W.hasOwnProperty("t")&&(be=(he=W.t)/ce),X<0&&(X=R(Z,z[$+1],W,ce,be)),N=0;N<=X;N++)Xe++,be=(he+=W.d)/ce;return{numberOfSegments:Xe,mediaTimeOfLastSignaledSegment:be}}}}v.__dashjs_factory_name="TimelineSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},2011:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(b,g,w){w.d(g,{Z:function(){return Km}});var F=w(452),C=w.n(F),y=w(3393),v=w(1553),D=w(3860),m=w(5595),T=w(8512),U=w(5448),x=w(6398),_=w(8825);function I(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee,Le,we,je,j,ue,ae,se=this.context,Q=(0,m.Z)(se).getInstance();function Me(){pe(),ge=!1,Se=0,ye=0,Be=0,j=!1,ze=!0,Ee=!1,ue=!1,Le=NaN,De=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.off(T.Z.LOADING_PROGRESS,Lt,L),Q.off(T.Z.MANIFEST_UPDATED,qt,L),Q.off(T.Z.STREAMS_COMPOSED,Ve,L),Q.off(_.Z.PLAYBACK_ENDED,bt,L),Q.off(_.Z.STREAM_INITIALIZING,st,L),Q.off(_.Z.REPRESENTATION_SWITCH,nt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Wt(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",Nn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",It),H.removeEventListener("seeked",$t),H.removeEventListener("timeupdate",Zt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",vn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",xn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),fe=null,H=null,ie=null,me=null}function Ie(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ke(Ke)-at()).toFixed(5))}function ke(Ke){var Dt=Ke||ie;return Dt.start+Dt.duration}function Re(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Ke&&me&&dt(at()),H.play()):ge=!0}function pe(){ie&&H&&H.pause()}function Ne(Ke){var Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(Le)?H.getTime():Le;Ke!==sr&&((we=fn===!0)||(Le=Ke),P.info("Requesting seek to time: "+Ke+(we?" (internal)":"")),me&&Tn&&dt(Ke),H.setCurrentTime(Ke,Dt))}}function Ye(){if(ie&&H&&me){var Ke=B&&B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=ee.getCurrentDVRInfo(Ke);return Dt&&Dt.range?Dt.range.end:0}}function dt(Ke){var Dt=new Date(ne.getClientReferenceTime()),fn=J.getRegularPeriods()[0],Tn=ne.calcPresentationTimeFromWallTime(Dt,fn);Se=Tn-Ke}function at(){return ie&&H?H.getTime():null}function Je(){return ie&&H?H.isPaused():null}function ht(){return ie&&H?H.isSeeking():null}function Bt(){return ie&&H?H.isStalled():null}function Gt(){return ie&&H?H.getPlaybackRate():null}function kt(){return ie&&H?H.getEnded():null}function Ft(){return me}function An(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Je()&&me&&H.getReadyState()!==0&&!ht()&&!j){Ke||(Ke=B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO);var Dt=at(),fn=rt(Dt,Ke),Tn=!isNaN(fn)&&fn!==Dt;Tn&&!ht()&&(Bt()||je||H.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(Dt)),Ne(fn,!1,!1))}}function rt(Ke,Dt){var fn=ee.getCurrentDVRInfo(Dt),Tn=fn?fn.range:null;return Tn?Ke>Tn.end?Math.max(Tn.end-Se,Tn.start):Ke>0&&Ke+.25<Tn.start&&Math.abs(Ke-Tn.start)<31536e4?Ee?Math.max(Tn.end-Se,Tn.start):Tn.start:Ke:NaN}function mt(){fe===null&&(fe=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date}),Ft()){var Ke=Date.now();(isNaN(De)||Ke>De+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),Je()?function(){var Dt=Date.now();(!qe||Dt>qe+500)&&(qe=Dt,Zt())}():An(),De=Ke)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Wt(){clearInterval(fe),fe=null}function Nt(Ke){var Dt=J.convertRepresentationToRepresentationInfo(Ke.currentRepresentation),fn=Dt?Dt.mediaInfo.streamInfo:null;fn!==null&&ie.id===fn.id&&(ie=fn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Yt(Ke){Ke.streamId===B.getActiveStreamInfo().id&&(je=Ke.state===D.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Ke.mediaType,Ke.state===D.Z.BUFFER_EMPTY))}function Dn(){P.info("Native video element event: play"),An(),mt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:at()})}function Nn(){P.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:at()})}function rr(){P.info("Native video element event: playing"),we=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:at()})}function ir(){P.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:kt()})}function It(){if(!we){var Ke=at();isNaN(Le)||Le===Ke||(Ke=Le),Le=NaN,P.info("Seeking to: "+Ke),mt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Ke,streamId:ie.id})}}function $t(){P.info("Native video element event: seeked"),we=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Zt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:Ie(),time:at(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function vn(){var Ke=Gt();P.info("Native video element event: ratechange: ",Ke),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Ke})}function Pn(){P.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),mt()}function xn(){P.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){P.info("Native video element event: ended"),pe(),Wt();var Ke=B?B.getActiveStreamInfo():null;Ke&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:Ke.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function bt(Ke){if(fe&&Ke.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Dt=Ke.seekTime?Ke.seekTime:ke();H.setCurrentTime(Dt),pe(),Wt()}}function Sn(Ke){var Dt=Ke.target||Ke.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Dt.error})}function En(){me=!1}function Lt(Ke){if(Ke.stream===!1&&Ee&&!isNaN(Ke.request.duration)){var Dt=1.2*Ke.request.duration;Dt>Se&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Dt.toFixed(2)),Se=Dt,ye=Dt)}}function On(Ke){Q.trigger(T.Z.PLAYBACK_STALLED,{e:Ke})}function st(Ke){var Dt;(Dt=Ke.mediaInfo)&&Dt.supplementalProperties&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Ee=!0)}function nt(Ke){var Dt=B.getActiveStreamInfo();Ke&&Dt&&Ke.currentRepresentation&&Ke.streamId&&Ke.streamId===Dt.id&&Ke.mediaType&&(Ke.mediaType===y.Z.VIDEO||Ke.mediaType===y.Z.AUDIO)&&(ze=Ke.currentRepresentation.availabilityTimeComplete,(Ee=!ze)&&!ue&&(ue=!0))}function qt(){j=!0}function Ve(){j=!1}return L={initialize:function(Ke,Dt){ie=Ke,Dt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",Nn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",It),H.addEventListener("seeked",$t),H.addEventListener("timeupdate",Zt),H.addEventListener("progress",un),H.addEventListener("ratechange",vn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",xn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),me=ie.manifestInfo.isDynamic,je=!1,we=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.on(T.Z.LOADING_PROGRESS,Lt,L),Q.on(T.Z.MANIFEST_UPDATED,qt,L),Q.on(T.Z.STREAMS_COMPOSED,Ve,L),Q.on(_.Z.PLAYBACK_ENDED,bt,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,st,L),Q.on(_.Z.REPRESENTATION_SWITCH,nt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),ge&&(ge=!1,Re()))},setConfig:function(Ke){Ke&&(Ke.streamController&&(B=Ke.streamController),Ke.serviceDescriptionController&&(V=Ke.serviceDescriptionController),Ke.dashMetrics&&(ee=Ke.dashMetrics),Ke.adapter&&(J=Ke.adapter),Ke.videoModel&&(H=Ke.videoModel),Ke.timelineConverter&&(ne=Ke.timelineConverter),Ke.settings&&(ae=Ke.settings))},getTimeToStreamEnd:Ie,getBufferLevel:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Dt=null;return B.getActiveStreamProcessors().forEach(function(fn){if(!Ke||Ke.length===0||Ke.indexOf(fn.getType())===-1){var Tn=fn.getBufferLevel();Dt=Dt===null?Tn:Math.min(Dt,Tn)}}),Dt},getPlaybackStalled:function(){return je},getTime:at,getLowLatencyModeEnabled:function(){return Ee},getInitialCatchupModeActivated:function(){return ue},getIsManifestUpdateInProgress:function(){return j},getPlaybackRate:Gt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:kt,getIsDynamic:Ft,getStreamController:function(){return B},computeAndSetLiveDelay:function(Ke,Dt){var fn,Tn,sr,Zr=!isNaN(Ke)&&isFinite(Ke)?Ke:NaN,Ii=J.getSuggestedPresentationDelay(),zr=V.getServiceDescriptionSettings();return fn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ii!==null&&!isNaN(Ii)&&Ii>0?Ii:isNaN(Zr)?Dt&&!isNaN(Dt.minBufferTime)?4*Dt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Be=sr),Tn=Dt&&Dt.dvrWindowSize>0?Math.min(fn,Dt.dvrWindowSize):fn,Se=Tn,ye=Tn,Tn},getLiveDelay:function(){return Se},getOriginalLiveDelay:function(){return ye},getCurrentLiveLatency:function(){if(!me||isNaN(Be))return NaN;var Ke=at();if(isNaN(Ke)||Ke===0)return 0;var Dt=new Date().getTime()+1e3*ne.getClientTimeOffset();return Math.max(((Dt-Be-1e3*Ke)/1e3).toFixed(3),0)},play:Re,isPaused:Je,isStalled:Bt,pause:pe,isSeeking:ht,getStreamEndTime:ke,seek:Ne,seekToOriginalLive:function(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Ye();if(Tn!==0){var sr=Tn-(Se=ye);Ne(sr,Ke,Dt,fn)}},seekToCurrentLive:function(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Ye();if(Tn!==0){var sr=Tn-Se;Ne(sr,Ke,Dt,fn)}},reset:Me,updateCurrentTime:An,getAvailabilityStartTime:function(){return Be}},P=(0,x.Z)(se).getInstance().getLogger(L),Me(),L}I.__dashjs_factory_name="PlaybackController";var R=U.Z.getSingletonFactory(I),Z=w(3186),z="loading",W="executed",$="failed";function le(L){var P,B,V,ee,J=(L=L||{}).eventBus,H=L.events,ne=L.dashMetrics,fe=L.fragmentLoader,Se=L.debug,ye=L.streamInfo,ie=L.type;function me(j){var ue;return!!j&&(ue=!1,V.some(function(ae){if(se=j,Q=ae,!isNaN(se.index)&&se.startTime===Q.startTime&&se.adaptationIndex===Q.adaptationIndex&&se.type===Q.type||function(Me,Ie){return isNaN(Me.index)&&isNaN(Ie.index)&&Me.quality===Ie.quality}(j,ae)||function(Me,Ie){return Me.action===Z.Z.ACTION_COMPLETE&&Me.action===Ie.action}(j,ae))return ue=!0;var se,Q}),ue)}function ge(j){return isNaN(j.duration)?.25:Math.min(j.duration/8,.5)}function qe(j){V=V.filter(function(ue){var ae=ge(ue);return isNaN(ue.startTime)||j!==void 0&&ue.startTime>=j-ae})}function De(j,ue){ue<=j+.5||(V=V.filter(function(ae){var se=ge(ae);return isNaN(ae.startTime)||ae.startTime>=ue-se||isNaN(ae.duration)||ae.startTime+ae.duration<=j+se}))}function Be(j,ue,ae){for(var se=j.length-1;se>=0;se--){var Q=j[se],Me=Q.startTime,Ie=Me+Q.duration;if(ae=isNaN(ae)?ge(Q):ae,!isNaN(Me)&&!isNaN(Ie)&&ue+ae>=Me&&ue-ae<Ie||isNaN(Me)&&isNaN(ue))return Q}return null}function ze(j,ue){ne.addSchedulingInfo(j,ue),ne.addRequestsQueue(j.mediaType,ee,V)}function Ee(j){j.sender===fe&&(ee.splice(ee.indexOf(j.request),1),j.response&&!j.error&&V.push(j.request),ze(j.request,j.error?$:W),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:j.request,response:j.response,error:j.error,sender:this},{streamId:ye.id,mediaType:ie}))}function Le(j){j.sender===fe&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:j.request,response:j.response,error:j.error,sender:this},{streamId:ye.id,mediaType:ie})}function we(j){j.sender===fe&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:j.request},{streamId:ye.id,mediaType:ie})}function je(){V=[],ee=[]}return P={getStreamId:function(){return ye.id},getType:function(){return ie},getRequests:function(j){var ue=j?j.state instanceof Array?j.state:[j.state]:[],ae=[];return ue.forEach(function(se){var Q=function(Me){var Ie;switch(Me){case z:Ie=ee;break;case W:Ie=V;break;default:Ie=[]}return Ie}(se);ae=ae.concat(function(Me,Ie){return Ie.hasOwnProperty("time")?[Be(Me,Ie.time,Ie.threshold)]:Me.filter(function(ke){for(var Re in Ie)if(Re!=="state"&&Ie.hasOwnProperty(Re)&&ke[Re]!=Ie[Re])return!1;return!0})}(Q,j))}),ae},isFragmentLoaded:me,isFragmentLoadedOrPending:function(j){var ue,ae=!1,se=0;if(!(ae=me(j)))for(se=0;se<ee.length;se++)ue=ee[se],j.url===ue.url&&j.startTime===ue.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:qe,removeExecutedRequestsAfterTime:function(j){V=V.filter(function(ue){return isNaN(ue.startTime)||j!==void 0&&ue.startTime<j})},syncExecutedRequestsWithBufferedRange:function(j,ue){if(j&&j.length!==0){for(var ae=0,se=0,Q=j.length;se<Q;se++)De(ae,j.start(se)),ae=j.end(se);ue>0&&De(ae,ue)}else qe()},abortRequests:function(){B.debug("abort requests"),fe.abort(),ee=[]},executeRequest:function(j){j.action===Z.Z.ACTION_DOWNLOAD?(ze(j,z),ee.push(j),function(ue){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:ue},{streamId:ye.id,mediaType:ie}),fe.load(ue)}(j)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,Ee,this),J.off(H.LOADING_DATA_PROGRESS,Le,this),J.off(H.LOADING_ABANDONED,we,this),fe&&fe.reset(),je()},resetInitialSettings:je,addExecutedRequest:function(j){V.push(j)}},B=Se.getLogger(P),je(),J.on(H.LOADING_COMPLETED,Ee,P),J.on(H.LOADING_DATA_PROGRESS,Le,P),J.on(H.LOADING_ABANDONED,we,P),P}le.__dashjs_factory_name="FragmentModel";var N=U.Z.getClassFactory(le);N.FRAGMENT_MODEL_LOADING=z,N.FRAGMENT_MODEL_EXECUTED=W,N.FRAGMENT_MODEL_CANCELED="canceled",N.FRAGMENT_MODEL_FAILED=$,U.Z.updateClassFactory(le.__dashjs_factory_name,N);var X=N,ce=w(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},oe(L)}function he(L,P){return he=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},he(L,P)}function be(L,P){return!P||oe(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Xe(L){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Xe(L)}var Ae=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&he(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Xe(P);if(B){var ne=Xe(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return be(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(w(2230).Z)),Ze=w(1264),tt=w(7855);function ut(L){var P,B,V,ee,J,H,ne=this.context,fe=(0,Ze.Z)(ne).getInstance(),Se=L.textController,ye=L.eventBus,ie=[],me=[],ge=!1,qe=L.mediaSource,De=null;function Be(Q){return new Promise(function(Me){se(function(){ee.changeType&&ee.changeType(Q),Me()})})}function ze(Q){return ee=Se.getTextSourceBuffer(Q),Promise.resolve()}function Ee(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",ue,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(ue,50)}else H=setInterval(ue,50)}function Le(Q){return new Promise(function(Me){ee&&fe.get().streaming.buffer.useAppendWindow?se(function(){try{if(!ee)return void Me();var Ie=qe.duration,ke=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(Ie=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(ke=Q.start),ee.appendWindowEnd===Ie&&ee.appendWindowStart===ke||(ee.appendWindowStart=0,ee.appendWindowEnd=Ie+.01,ee.appendWindowStart=Math.max(ke-.1,0),V.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Me()}catch(Re){V.warn("Failed to set append window"),Me()}}):Me()})}function we(Q){return new Promise(function(Me){ee?se(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,V.debug("Set MSE timestamp offset to ".concat(Q))),Me()}catch(Ie){Me()}}):Me()})}function je(){if(!ge&&me.length>0){ge=!0;var Q=me[0];me.splice(0,1);var Me=function(){ge=!1,me.length>0&&je.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==tt.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{De=Q.request,Q.data.bytes.byteLength===0?Me.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),se(Me.bind(this)))}catch(Ie){V.fatal('SourceBuffer append failed "'+Ie+'"'),me.length>0?je():ge=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new ce.Z(Ie.code,Ie.message)})}}}function j(){ie.length>0&&(ee.updating||(ie.shift()(),j()))}function ue(){ee.updating||j()}function ae(Q){var Me,Ie,ke=Q.target||{};Me=T.Z.SOURCE_BUFFER_ERROR,Ie={error:ke,lastRequestAppended:De},ye.trigger(Me,Ie,{streamId:J.streamInfo.id,mediaType:B})}function se(Q){ie.push(Q),ee.updating||j()}return P={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return V.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Me=this,Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ke,Re){Q?(me.push({data:Q,promise:{resolve:ke,reject:Re},request:Ie}),se(je.bind(Me))):Re({chunk:Q,error:new ce.Z(Ae.APPEND_ERROR_CODE,Ae.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Me,Ie){var ke=Q.start,Re=Q.end;ke>=0&&Re>ke?se(function(){try{ee.remove(ke,Re),se(function(){Me({from:ke,to:Re,unintended:!1}),Q.resolve&&Q.resolve()})}catch(pe){Ie({from:ke,to:Re,unintended:!1,error:new ce.Z(Ae.REMOVE_ERROR_CODE,Ae.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(pe)}}):Me()})},abort:function(){return new Promise(function(Q){try{me=[],qe.readyState==="open"?se(function(){try{ee&&ee.abort(),Q()}catch(Me){Q()}}):(ee&&ee.setTextTrack&&qe.readyState==="ended"&&ee.abort(),Q())}catch(Me){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",ue,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){V.error(Q)}}(),ge=!1,me=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),qe.removeSourceBuffer(ee))}catch(Q){}ee=null}De=null},updateTimestampOffset:we,initializeForStreamSwitch:function(Q,Me,Ie){B=(J=Q).type;var ke=J.codec;(function(pe){ee=pe.getBuffer()})(Ie),Ee();var Re=[];return Re.push(new Promise(function(pe){se(function(){var Ne=ee.appendWindowStart,Ye=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=Ne,ee.appendWindowEnd=Ye),pe()})})),Re.push(Le(J.streamInfo)),fe.get().streaming.buffer.useChangeTypeForTrackSwitch&&Re.push(Be(ke)),Me&&Me.MSETimeOffset!==void 0&&Re.push(we(Me.MSETimeOffset)),Promise.all(Re)},initializeForFirstUse:function(Q,Me,Ie){B=(J=Me).type;var ke=J.codec;try{if(ke.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return ze(Q);ee=qe.addSourceBuffer(ke),Ee();var Re=[];return Re.push(Le(J.streamInfo)),Ie&&Ie.MSETimeOffset!==void 0&&Re.push(we(Ie.MSETimeOffset)),Promise.all(Re)}catch(pe){return J.type==y.Z.TEXT&&!J.isFragmented||ke.indexOf('codecs="stpp')!==-1||ke.indexOf('codecs="vtt')!==-1||ke.indexOf("text/vtt")!==-1?ze(Q):Promise.reject(pe)}},updateAppendWindow:Le,changeType:Be},V=(0,x.Z)(ne).getInstance().getLogger(P),P}ut.__dashjs_factory_name="SourceBufferSink";var $e=U.Z.getClassFactory(ut);function lt(L){var P,B,V,ee=this.context,J=[],H=L;function ne(fe,Se){return J=J.filter(function(ye){return!((isNaN(Se)||ye.start<Se)&&(isNaN(fe)||ye.end>fe))}),Promise.resolve()}return P={getAllBufferRanges:function(){for(var fe=[],Se=0;Se<J.length;Se++){var ye=J[Se];fe.length===0||ye.start>fe[fe.length-1].end?fe.push({start:ye.start,end:ye.end}):fe[fe.length-1].end=ye.end}var ie={start:function(me){return fe[me].start},end:function(me){return fe[me].end}};return Object.defineProperty(ie,"length",{get:function(){return fe.length}}),ie},append:function(fe){return fe.segmentType!=="InitializationSegment"?(J.push(fe),J.sort(function(Se,ye){return Se.start-ye.start}),V=null):V=fe,B.debug("PreBufferSink appended chunk s: "+fe.start+"; e: "+fe.end),H&&H({chunk:fe}),Promise.resolve()},remove:ne,abort:function(){return Promise.resolve()},discharge:function(fe,Se){var ye=function(ie,me){return J.filter(function(ge){return(isNaN(me)||ge.start<me)&&(isNaN(ie)||ge.end>ie)})}(fe,Se);return V&&(ye.push(V),V=null),ne(fe,Se),ye},reset:function(){J=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(fe){fe()},getBuffer:function(){return this}},B=(0,x.Z)(ee).getInstance().getLogger(P),P}lt.__dashjs_factory_name="PreBufferSink";var wt=U.Z.getClassFactory(lt);function Oe(){var L={};return{save:function(P){var B=P.streamId,V=P.representationId;L[B]=L[B]||{},L[B][V]=P},extract:function(P,B){return L&&L[P]&&L[P][B]?L[P][B]:null},reset:function(){L={}}}}Oe.__dashjs_factory_name="InitCache";var Qe=U.Z.getSingletonFactory(Oe),ct=.01,Xt="BufferController";function Kt(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee,Le,we,je,j=this.context,ue=(0,m.Z)(j).getInstance(),ae=L.errHandler,se=L.fragmentModel,Q=L.representationController,Me=L.adapter,Ie=L.textController,ke=L.abrController,Re=L.playbackController,pe=L.streamInfo,Ne=L.type,Ye=L.settings;function dt(nt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Ve,Ke){H=nt,Se&&qt&&typeof Se.discharge=="function"?(ye=Se,Je(qt).then(function(){Ve()}).catch(function(Dt){Ke(Dt)})):Ve()})}function at(nt){return Me.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(nt))}function Je(nt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ve,Ke){Ee&&nt?H?(ie=!1,Bt(nt,qt).then(function(Dt){Ve(Dt)}).catch(function(Dt){Ke(Dt)})):(ie=!0,ht().then(function(Dt){Ve(Dt)}).catch(function(Dt){Ke(Dt)})):Ve(null)})}function ht(){var nt=this;return new Promise(function(qt,Ve){var Ke=ke.getQualityFor(Ne,pe.id);Se=wt(j).create(rt.bind(nt)),Pn(at(Ke)).then(function(){qt(Se)}).catch(function(){Ve()})})}function Bt(nt,qt){return new Promise(function(Ve,Ke){var Dt=ke.getQualityFor(Ne,pe.id);Se=$e(j).create({mediaSource:H,textController:Ie,eventBus:ue}),function(fn,Tn,sr){var Zr=at(sr);return Tn&&Tn[Ne]&&(Ne===y.Z.VIDEO||Ne===y.Z.AUDIO)?Se.initializeForStreamSwitch(fn,Zr,Tn[Ne]):Se.initializeForFirstUse(pe,fn,Zr)}(nt,qt,Dt).then(function(){return Pn(at(Dt))}).then(function(){Ve(Se)}).catch(function(fn){B.fatal("Caught error on create SourceBuffer: "+fn),ae.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Ne)),Ke(fn)})})}function Gt(nt){Ye.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",Ne+"'s init cache"),Ee.save(nt.chunk)),B.debug("Append Init fragment",Ne," with representationId:",nt.chunk.representationId," and quality:",nt.chunk.quality,", data size:",nt.chunk.bytes.byteLength),Ft(nt.chunk)}function kt(nt){Ft(nt.chunk,nt.request)}function Ft(nt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Se&&(Se.append(nt,qt).then(function(Ve){rt(Ve)}).catch(function(Ve){rt(Ve)}),nt.mediaInfo.type===y.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:nt}))}function An(nt){if(nt&&nt.length>0)for(var qt=0,Ve=nt.length;qt<Ve;qt++)B.debug("Buffered range: "+nt.start(qt)+" - "+nt.end(qt)+", currentTime = ",Re.getTime())}function rt(nt){if(nt.error)return nt.error.code===22&&function(){if(ze=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var Ke=Math.max(.2*J,1),Dt=J-Ke,fn=Math.min(Ye.get().streaming.buffer.bufferTimeAtTopQuality,.9*Dt),Tn=Math.min(Ye.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Dt),sr={streaming:{buffer:{bufferToKeep:parseFloat(Ke.toFixed(5)),bufferTimeAtTopQuality:parseFloat(fn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};Ye.update(sr)}}(),void(nt.error.code!==22&&Lt()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:nt.chunk.start}),Zt($t())));if(Se&&(Dn(),ze=!1,(qe=nt.chunk)&&qe.endFragment)){qe&&!isNaN(qe.index)&&(ne=Math.max(qe.index,ne),Nn());var qt=Se.getAllBufferRanges();qe.segmentType===tt.w.MEDIA_SEGMENT_TYPE&&(An(qt),Nt(),function(){if(!isNaN(je)&&!ie)if(Ne===y.Z.AUDIO||Ne===y.Z.VIDEO){var Ke=Re.getTime(),Dt=Yt(Ke,0),fn=Yt(je,0);if(Dt&&fn&&Dt.start===fn.start)je=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Yt(je,Tn);sr&&(Ye.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ke-je)>Tn?je<=sr.end&&Re.seek(Math.max(je,sr.start),!1,!0):Ke<sr.start&&Re.seek(sr.start,!1,!0))}}else je=NaN}());var Ve=!1;me&&(me.indexOf(qe)>0&&(Ve=!0),me=null),qe&&!Ve&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:qe.quality,startTime:qe.start,index:qe.index,bufferedRanges:qt,segmentType:qe.segmentType,mediaType:Ne})}}function mt(){return new Promise(function(nt,qt){var Ve=Wt();if(!Ve||Ve.length===0)return Nt(),void nt();Zt(Ve).then(function(){nt()}).catch(function(Ke){qt(Ke)})})}function Wt(nt){var qt=[],Ve=Se.getAllBufferRanges();if(!Ve||Ve.length===0)return qt;if(!nt&&nt!==0||isNaN(nt))qt.push({start:Ve.start(0),end:Ve.end(Ve.length-1)+.5});else{var Ke=function(fn,Tn){var sr=Ye.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(fn-Zr>sr){var Ii=Math.max(0,fn-sr),zr=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(zr&&(Ii=Math.min(zr.startTime,Ii)),Ii>0)return{start:Zr,end:Ii}}return null}(nt,Ve),Dt=function(fn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(fn),Ii=pe.manifestInfo.duration>=Ye.get().streaming.buffer.longFormContentDurationThreshold?Ye.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Ye.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?fn:Math.min(Zr,fn+Ii);if(zr>=Tn.end(Tn.length-1))return null;var oo=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(oo&&(zr=Math.max(oo.startTime+oo.duration,zr)),Ye.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=fn&&fn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var js=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+fn+" and range to be pruned ["+js+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(nt,Ve);Ke&&qt.push(Ke),Dt&&qt.push(Dt)}return qt}function Nt(){(!we||Ne===y.Z.TEXT&&Ie.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),je=NaN}function Yt(nt,qt){if(!Se)return null;var Ve,Ke,Dt=Se.getAllBufferRanges(),fn=0,Tn=0,sr=null,Zr=null,Ii=0,zr=isNaN(qt)?.15:qt;if(Dt!=null){for(Ke=0,Ve=Dt.length;Ke<Ve;Ke++)if(fn=Dt.start(Ke),Tn=Dt.end(Ke),sr===null)Ii=Math.abs(fn-nt),(nt>=fn&&nt<Tn||Ii<=zr)&&(sr=fn,Zr=Tn);else{if(!((Ii=fn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(Re){var nt=Re.getTime()||0;ie&&(nt=isNaN(je)?0:je);var qt=Ye.get().streaming.gaps.jumpGaps&&!isNaN(Ye.get().streaming.gaps.smallGapLimit)?Ye.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(Ve,Ke){var Dt;return Ye.get().streaming.gaps.jumpGaps&&(Ke=Ye.get().streaming.gaps.smallGapLimit),(Dt=Yt(Ve,Ke))===null?0:Dt.end-Ve}(nt,qt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:Ne,bufferLevel:ee}),rr()}}function Nn(){var nt=ne>=fe-1,qt=Re.getTimeToStreamEnd(pe)-ee<1e-5;!nt&&!qt||V||(bt(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(pe.id," and type ").concat(Ne)))}function rr(){Ne!==y.Z.AUDIO&&Ne!==y.Z.VIDEO||((!Re.getLowLatencyModeEnabled()&&ee<Ye.get().streaming.buffer.stallThreshold||ee===0)&&!V?ir(D.Z.BUFFER_EMPTY):(V||ee>=Ye.get().streaming.buffer.stallThreshold||Re.getLowLatencyModeEnabled()&&ee>0)&&ir(D.Z.BUFFER_LOADED))}function ir(nt){ge===nt||nt===D.Z.BUFFER_EMPTY&&Re.getTime()===0||Ne===y.Z.TEXT&&!Ie.isTextEnabled()||(ge=nt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:nt}),On(nt===D.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(nt===D.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function It(){Se&&Ne!==y.Z.TEXT&&(V||Zt($t()))}function $t(){var nt=[],qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return nt;var Ve=Re.getTime(),Ke=Math.max(0,Ve-Ye.get().streaming.buffer.bufferToKeep),Dt=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ve,threshold:ct})[0];if(Dt)Ke=Math.min(Dt.startTime,Ke);else if(Ve===0&&Re.getIsDynamic())return[];if(qt.start(0)<=Ke){for(var fn={start:0,end:Ke},Tn=0;Tn<qt.length&&qt.end(Tn)<=Ke;Tn++)fn.end=qt.end(Tn);fn.start<fn.end&&nt.push(fn)}return nt}function Zt(nt){return new Promise(function(qt,Ve){if(nt&&Se&&nt.length!==0){var Ke=[];nt.forEach(function(Dt){Ke.push(function(fn){return new Promise(function(Tn,sr){fn.resolve=Tn,fn.reject=sr,Le.push(fn)})}(Dt))}),Be||un(),Promise.all(Ke).then(function(){qt()}).catch(function(Dt){Ve(Dt)})}else qt()})}function un(){try{if(Le.length===0||!Se)return B.debug("Nothing to prune, halt pruning"),Le=[],void(Be=!1);var nt=Se.getBuffer();if(!nt||!nt.buffered||nt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),Le=[],void(Be=!1);var qt=Le.shift();B.debug("".concat(Ne,": Removing buffer from: ").concat(qt.start," to ").concat(qt.end)),Be=!0,Re.getTime()<qt.end&&bt(!1),Se.remove(qt).then(function(Ve){vn(Ve)}).catch(function(Ve){vn(Ve)})}catch(Ve){Be=!1}}function vn(nt){B.debug("onRemoved buffer from:",nt.from,"to",nt.to),Se&&(An(Se.getAllBufferRanges()),Le.length===0&&(Be=!1,Dn()),nt.unintended&&(B.warn("Detected unintended removal from:",nt.from,"to",nt.to,"setting streamprocessor time to",nt.from),On(T.Z.SEEK_TARGET,{time:nt.from})),Be?un():(we?we=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:nt.from,to:nt.to,unintended:nt.unintended,hasEnoughSpaceToAppend:Lt(),quotaExceeded:ze})))}function Pn(nt){return new Promise(function(qt){nt&&nt.MSETimeOffset!==void 0&&Se&&Se.updateTimestampOffset?Se.updateTimestampOffset(nt.MSETimeOffset).then(function(){qt()}).catch(function(){qt()}):qt()})}function xn(){return Se&&!V?Se.updateAppendWindow(pe):Promise.resolve()}function Fn(){++De*(Ye.get().streaming.wallclockTimeUpdateInterval/1e3)>=Ye.get().streaming.buffer.bufferPruningInterval&&(De=0,It())}function Gn(){rr()}function bt(nt){(V=nt)?On(T.Z.BUFFERING_COMPLETED):fe=Number.POSITIVE_INFINITY}function Sn(){try{var nt,qt,Ve=Se.getAllBufferRanges(),Ke=0;if(!Ve)return Ke;for(qt=0,nt=Ve.length;qt<nt;qt++)Ke+=Ve.end(qt)-Ve.start(qt);return Ke}catch(Dt){return 0}}function En(nt){try{var qt=nt,Ve=Se.getAllBufferRanges();if(!Ve||Ve.length===0)return NaN;for(var Ke=0;qt===nt&&Ke<Ve.length;){var Dt=Ve.start(Ke),fn=Ve.end(Ke);qt>=Dt&&qt<=fn&&(qt=fn),Ke+=1}return qt===nt?NaN:qt}catch(Tn){}}function Lt(){var nt=Sn();return isNaN(nt)||nt<J}function On(nt,qt){var Ve=qt||{};ue.trigger(nt,Ve,{streamId:pe.id,mediaType:Ne})}function st(nt,qt){if(J=Number.POSITIVE_INFINITY,ge=void 0,fe=Number.POSITIVE_INFINITY,ne=0,qe=null,V=!1,Be=!1,ze=!1,ee=0,De=0,Le=[],je=NaN,ie=!1,Se){var Ve=Se;Se=null,nt||qt||Ve.abort().then(function(){Ve.reset(qt),Ve=null})}we=!1}return P={initialize:function(nt){dt(nt),ue.on(T.Z.INIT_FRAGMENT_LOADED,Gt,P),ue.on(T.Z.MEDIA_FRAGMENT_LOADED,kt,P),ue.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,P),ue.on(_.Z.PLAYBACK_PLAYING,Jt,P),ue.on(_.Z.PLAYBACK_PROGRESS,Nt,P),ue.on(_.Z.PLAYBACK_TIME_UPDATED,Nt,P),ue.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,P),ue.on(_.Z.PLAYBACK_STALLED,en,P)},getStreamId:function(){return pe.id},getType:function(){return Ne},getBufferControllerType:function(){return Xt},createBufferSink:Je,dischargePreBuffer:function(){if(Se&&ye&&typeof ye.discharge=="function"){var nt=ye.getAllBufferRanges();if(nt.length>0){for(var qt="Beginning "+Ne+"PreBuffer discharge, adding buffer for:",Ve=0;Ve<nt.length;Ve++)qt+=" start: "+nt.start(Ve)+", end: "+nt.end(Ve)+";";B.debug(qt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");me=[];for(var Ke=ye.discharge(),Dt=null,fn=0;fn<Ke.length;fn++){var Tn=Ke[fn];if(Tn.segmentType!==tt.w.INIT_SEGMENT_TYPE){var sr=Ee.extract(Tn.streamId,Tn.representationId);sr&&Dt!==sr&&(me.push(sr),Se.append(sr),Dt=sr)}me.push(Tn),Se.append(Tn)}ye.reset(),ye=null}},getBuffer:function(){return Se},getBufferLevel:function(){return ee},getRangeAt:Yt,hasBufferAtTime:function(nt){try{var qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return!1;for(var Ve=0;Ve<qt.length;){var Ke=qt.start(Ve),Dt=qt.end(Ve);if(nt>=Ke&&nt<=Dt)return!0;Ve+=1}return!1}catch(fn){return B.error(fn),!1}},pruneBuffer:It,setMediaSource:dt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(nt){var qt=Ee.extract(pe.id,nt);return!!qt&&(B.info("Append Init fragment",Ne," with representationId:",qt.representationId," and quality:",qt.quality,", data size:",qt.bytes.byteLength),Ft(qt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:bt,getIsPruningInProgress:function(){return Be},reset:function(nt,qt){ue.off(T.Z.INIT_FRAGMENT_LOADED,Gt,this),ue.off(T.Z.MEDIA_FRAGMENT_LOADED,kt,this),ue.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),ue.off(_.Z.PLAYBACK_PLAYING,Jt,this),ue.off(_.Z.PLAYBACK_PROGRESS,Nt,this),ue.off(_.Z.PLAYBACK_TIME_UPDATED,Nt,this),ue.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),ue.off(_.Z.PLAYBACK_STALLED,en,this),st(nt,qt)},prepareForPlaybackSeek:function(){return V&&bt(!1),Se.abort()},prepareForReplacementTrackSwitch:function(nt){return new Promise(function(qt,Ve){Se.abort().then(function(){return xn()}).then(function(){return Ye.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(nt):Promise.resolve()}).then(function(){return mt()}).then(function(){bt(!1),qt()}).catch(function(Ke){Ve(Ke)})})},prepareForNonReplacementTrackSwitch:function(nt){return new Promise(function(qt,Ve){xn().then(function(){return Ye.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(nt):Promise.resolve()}).then(function(){qt()}).catch(function(Ke){Ve(Ke)})})},prepareForForceReplacementQualitySwitch:function(nt){return new Promise(function(qt,Ve){Se.abort().then(function(){return xn()}).then(function(){return mt()}).then(function(){return Pn(nt)}).then(function(){bt(!1),qt()}).catch(function(Ke){Ve(Ke)})})},updateAppendWindow:xn,getAllRangesWithSafetyFactor:Wt,getContinuousBufferTimeForTargetTime:En,clearBuffers:Zt,pruneAllSafely:mt,updateBufferTimestampOffset:Pn,setSeekTarget:function(nt){je=nt},segmentRequestingCompleted:function(nt){isNaN(nt)||(fe=nt,Nn())}},B=(0,x.Z)(j).getInstance().getLogger(P),Ee=Qe(j).getInstance(),st(),P}Kt.__dashjs_factory_name=Xt;var _t=U.Z.getClassFactory(Kt),At="NotFragmentedTextBufferController";function Ce(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,fe=(0,m.Z)(ne).getInstance(),Se=L.textController,ye=L.errHandler,ie=L.streamInfo,me=L.type;function ge(Be){ee=Be}function qe(Be){var ze,Ee;B!==Be&&(B=Be)&&(ze=T.Z.BUFFERING_COMPLETED,Ee={},fe.trigger(ze,Ee,{streamId:ie.id,mediaType:me}))}function De(Be){Be.chunk.bytes&&!B&&(H.save(Be.chunk),J.append(Be.chunk),qe(!0))}return P={initialize:function(Be){ge(Be)},getStreamId:function(){return ie.id},getType:function(){return me},getBufferControllerType:function(){return At},createBufferSink:function(Be){return new Promise(function(ze,Ee){try{(J=$e(ne).create({mediaSource:ee,textController:Se,eventBus:fe})).initializeForFirstUse(ie,Be),V||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),V=!0),ze(J)}catch(Le){ye.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),Ee(Le)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ge,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Be){return H.extract(ie.id,Be)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:qe,getIsPruningInProgress:function(){return!1},reset:function(Be){fe.off(T.Z.INIT_FRAGMENT_LOADED,De,P),!Be&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,ee=null,B=!1,H=Qe(ne).getInstance(),fe.on(T.Z.INIT_FRAGMENT_LOADED,De,P),P}Ce.__dashjs_factory_name=At;var re=U.Z.getClassFactory(Ce);function Fe(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=L.dashMetrics,ze=L.mediaPlayerModel,Ee=L.fragmentModel,Le=L.abrController,we=L.playbackController,je=L.textController,j=L.type,ue=L.bufferController,ae=L.representationController,se=L.settings;function Q(){me=!0}function Me(){me=!1}function Ie(Bt){if(!ue.getIsBufferingCompleted()){ke();var Gt=isNaN(Bt)?0:Bt;J=setTimeout(Re,Gt)}}function ke(){J&&(clearTimeout(J),J=null)}function Re(){try{if(function(){try{return j===y.Z.TEXT&&!je.isTextEnabled()||we.isPaused()&&(!we.getStreamController().getInitialPlayback()||!we.getStreamController().getAutoPlay())&&!se.get().streaming.scheduling.scheduleWhilePaused}catch(kt){return!1}}())return void ke();if(function(){try{return!!me&&ae.getCurrentRepresentationInfo()&&(isNaN(Se)||ye||(kt=B.id,Ft=Le.getMaxAllowedIndexFor(j,kt),!(!isNaN(fe)&&fe==Ft||(V.info("Top quality "+j+" index has changed from "+fe+" to "+Ft),fe=Ft,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!j||!An||Be.getCurrentBufferLevel(j)<pe()}())}catch(An){return!1}var kt,Ft}()){var Bt=!1;ge&&(Bt=Le.checkPlaybackQuality(j,B.id)),Bt||(Gt=ae.getCurrentRepresentationInfo(),ie||Gt.quality!==Se||ye?(ye?(V.debug("Switch track for "+j+", representation id = "+Gt.id),ye=!1):V.debug("Quality has changed, get init request for representationid = "+Gt.id),De.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Gt.id,sender:P},{streamId:B.id,mediaType:j}),ge=!1,ie=!1):(V.debug("Media segment needed for ".concat(j," and stream id ").concat(B.id)),De.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:j}),ge=!0))}else Ie(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}catch(kt){Ie(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}var Gt}function pe(){var Bt=NaN,Gt=ae.getCurrentRepresentationInfo();return j&&Gt&&(Bt=j===y.Z.TEXT?function(){try{if(je.isTextEnabled()){var kt=ae.getCurrentRepresentationInfo();if(isNaN(kt.fragmentDuration)){var Ft=Be.getCurrentSchedulingInfo(D.Z.SCHEDULING_INFO);return Ft?Ft.duration:0}return kt.fragmentDuration}return 0}catch(An){return 0}}():j===y.Z.AUDIO&&H?function(){try{var kt=Be.getCurrentBufferLevel(y.Z.VIDEO),Ft=ae.getCurrentRepresentationInfo();return isNaN(Ft.fragmentDuration)?kt+1:Math.max(kt+1,Ft.fragmentDuration)}catch(An){return 0}}():function(){try{var kt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Le.isPlayingAtTopQuality(kt)?kt.manifestInfo.duration>=se.get().streaming.buffer.longFormContentDurationThreshold?se.get().streaming.buffer.bufferTimeAtTopQualityLongForm:se.get().streaming.buffer.bufferTimeAtTopQuality:ze.getStableBufferTime()}catch(Ft){return ze.getStableBufferTime()}}()),Bt}function Ne(){Ye(!0)}function Ye(Bt){if(we&&Ee){var Gt=Ee.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:we.getTime(),threshold:0})[0];Gt&&we.getTime()>=Gt.startTime&&((!ne.mediaInfo||Gt.mediaInfo.type===ne.mediaInfo.type&&Gt.mediaInfo.index!==ne.mediaInfo.index)&&Bt&&De.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:j,oldMediaInfo:ne.mediaInfo,newMediaInfo:Gt.mediaInfo,streamId:B.id}),Gt.quality===ne.quality&&Gt.adaptationIndex===ne.adaptationIndex||!Bt||(V.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(j)),De.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:j,oldQuality:ne.quality,newQuality:Gt.quality,streamId:B.id})),ne={mediaInfo:Gt.mediaInfo,quality:Gt.quality,adaptationIndex:Gt.adaptationIndex})}}function dt(){Ee.abortRequests(),ke()}function at(){se.get().streaming.scheduling.scheduleWhilePaused||Ie()}function Je(Bt){Be.updatePlayListTraceMetrics({playbackspeed:Bt.playbackRate.toString()})}function ht(){ge=!0,ee=0,Se=NaN,ne={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},fe=NaN,ye=!1,ie=!1,me=!0}return P={initialize:function(Bt){H=Bt,De.on(T.Z.URL_RESOLUTION_FAILED,dt,P),De.on(_.Z.PLAYBACK_STARTED,at,P),De.on(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.on(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P)},getType:function(){return j},getStreamId:function(){return B.id},setTimeToLoadDelay:function(Bt){ee=Bt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(Bt){ye=Bt},getSwitchTrack:function(){return ye},startScheduleTimer:Ie,clearScheduleTimer:ke,reset:function(){De.off(T.Z.URL_RESOLUTION_FAILED,dt,P),De.off(_.Z.PLAYBACK_STARTED,at,P),De.off(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.off(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P),ke(),Ye(!1),ht(),B=null},getBufferTarget:pe,getPlaybackController:function(){return we},setCheckPlaybackQuality:function(Bt){ge=Bt},setInitSegmentRequired:function(Bt){ie=Bt},setLastInitializedQuality:function(Bt){Se=Bt}},V=(0,x.Z)(qe).getInstance().getLogger(P),ht(),B=L.streamInfo,P}Fe.__dashjs_factory_name="ScheduleController";var O=U.Z.getClassFactory(Fe),M=w(7387);function q(L){var P,B,V,ee,J,H,ne=(L=L||{}).eventBus,fe=L.events,Se=L.abrController,ye=L.dashMetrics,ie=L.playbackController,me=L.timelineConverter,ge=L.type,qe=L.streamInfo,De=L.dashConstants,Be=L.segmentsController,ze=L.isDynamic,Ee=L.adapter;function Le(){return ge}function we(){return V}function je(){return H}function j(){B=null,V=!0,ee=[],J=null}function ue(ke){return new Promise(function(Re,pe){var Ne=ke.hasInitialization(),Ye=ke.hasSegments(),dt=[];dt.push(Be.updateInitData(ke,Ne)),dt.push(Be.updateSegmentData(ke,Ye)),Promise.all(dt).then(function(at){var Je;at[0]&&!at[0].error&&(ke=function(ht,Bt){return Bt&&!Bt.error&&Bt.representation?Bt.representation:ht}(ke,at[0])),at[1]&&!at[1].error&&(ke=function(ht,Bt){if(Bt&&!Bt.error){var Gt,kt,Ft,An,rt=Bt.segments,mt=[],Wt=0;for(Gt=0,kt=rt?rt.length:0;Gt<kt;Gt++)Ft=rt[Gt],(An=(0,M.TJ)(me,ze,ht,Ft.startTime,Ft.duration,Ft.timescale,Ft.media,Ft.mediaRange,Wt))&&(mt.push(An),An=null,Wt++);return mt.length>0&&(ht.segments=mt),ht}}(ke,at[1])),(Je=ke).mediaFinishedInformation=Be.getMediaFinishedInformation(Je),function(ht){if(we()){var Bt,Gt,kt=ye.getCurrentManifestUpdate(),Ft=!1;if(kt){for(var An=0;An<kt.representationInfo.length;An++)if((Bt=kt.representationInfo[An]).index===ht.index&&Bt.mediaType===Le()){Ft=!0;break}Ft||ye.addManifestUpdateRepresentationInfo(ht,Le())}if(function(){for(var mt=0,Wt=ee.length;mt<Wt;mt++){var Nt=ee[mt].segmentInfoType;if(!ee[mt].hasInitialization()||(Nt===De.SEGMENT_BASE||Nt===De.BASE_URL)&&!ee[mt].segments)return!1}return!0}()){Se.setPlaybackQuality(ge,qe,(Gt=H,ee.indexOf(Gt)));var rt=ye.getCurrentDVRInfo(ge);rt&&ye.updateManifestUpdateInfo({latency:rt.range.end-ie.getTime()}),ye.getCurrentRepresentationSwitch(je().adaptation.type)||ae(),Q()}}}(ke),Re()}).catch(function(at){pe(at)})})}function ae(){(function(){if(!(Se&&ye&&ie&&me))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var ke=new Date,Re=je(),pe=1e3*ie.getTime();Re&&ye.addRepresentationSwitch(Re.adaptation.type,ke,pe,Re.id),ne.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ge,streamId:qe.id,currentRepresentation:Re,numberOfRepresentations:ee.length},{streamId:qe.id,mediaType:ge})}function se(ke){return ke==null||ke>=ee.length?null:ee[ke]}function Q(ke){V=!1,ne.trigger(fe.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:ke},{streamId:qe.id,mediaType:ge})}function Me(ke){H=ke,J=Ee.convertRepresentationToRepresentationInfo(H)}function Ie(ke){if(ke.newDuration){var Re=je();Re&&Re.adaptation.period&&(Re.adaptation.period.duration=ke.newDuration)}}return P={getStreamId:function(){return qe.id},getType:Le,getData:function(){return B},isUpdating:we,updateData:function(ke,Re,pe,Ne,Ye){return new Promise(function(dt,at){if(V=!0,ee=Re,B=ke,Me(se(Ye)),pe!==y.Z.VIDEO&&pe!==y.Z.AUDIO&&(pe!==y.Z.TEXT||!Ne))return Q(),void dt();for(var Je=[],ht=0,Bt=ee.length;ht<Bt;ht++){var Gt=ee[ht];Je.push(ue(Gt))}Promise.all(Je).then(function(){Me(se(Ye)),dt()}).catch(function(kt){at(kt)})})},getCurrentRepresentation:je,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:se,prepareQualityChange:function(ke){Me(se(ke)),ae()},reset:function(){ne.off(_.Z.MANIFEST_VALIDITY_CHANGED,Ie,P),j()}},j(),ne.on(_.Z.MANIFEST_VALIDITY_CHANGED,Ie,P),P}q.__dashjs_factory_name="RepresentationController";var K=U.Z.getClassFactory(q),_e=w(3106),de=w(9326),He=w(7473),Tt=w(2594);function ot(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var it=function L(){ot(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};it.INITIAL_PLAYOUT_START_REASON="initial_playout",it.SEEK_START_REASON="seek",it.RESUME_FROM_PAUSE_START_REASON="resume",it.METRICS_COLLECTION_START_REASON="metrics_collection_start";var et=function L(){ot(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};et.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",et.REBUFFERING_REASON="rebuffering",et.USER_REQUEST_STOP_REASON="user_request",et.END_OF_PERIOD_STOP_REASON="end_of_period",et.END_OF_CONTENT_STOP_REASON="end_of_content",et.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",et.FAILURE_STOP_REASON="failure";var ft=w(7802);function vt(){return{ntpToUTC:function(L){var P=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(P.getTime()+L).getTime()}}}vt.__dashjs_factory_name="TimeUtils";var Et=U.Z.getSingletonFactory(vt);function Ct(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),Ee=L.streamInfo,Le=L.type,we=L.errHandler,je=L.mimeType,j=L.timelineConverter,ue=L.adapter,ae=L.manifestModel,se=L.mediaPlayerModel,Q=L.fragmentModel,Me=L.abrController,Ie=L.playbackController,ke=L.mediaController,Re=L.textController,pe=L.dashMetrics,Ne=L.settings,Ye=L.boxParser,dt=L.segmentBlacklistController;function at(){return Ee.id}function Je(){return Le}function ht(){return ue.getIsTextTrack(fe.getData())}function Bt(){J=[],ee=null,qe=0,Se=!1,ye=!1,ie=!1,De=null}function Gt(st){return!isNaN(st)&&!isNaN(Ee.duration)&&isFinite(Ee.duration)&&st>=Ee.start+Ee.duration}function kt(st){var nt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(st.sender){if(Ie.getIsManifestUpdateInProgress())Wt();else if((!ht()||Re.isTextEnabled())&&H&&st.representationId&&!H.appendInitSegmentFromCache(st.representationId)){var qt=fe.getCurrentRepresentation();if(qt.range===0)return void Ft();var Ve=me?me.getInitRequest(ee,qt):null;Ve?Q.executeRequest(Ve):nt&&(ne.setInitSegmentRequired(!0),Wt())}}}function Ft(st){var nt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ie.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Wt();else{var qt=mt();qt?(Se=!1,ye=!1,An(qt)):rt(nt)}}function An(st){isNaN(st.startTime+st.duration)||(qe=st.startTime+st.duration),st.delayLoadingTime=new Date().getTime()+ne.getTimeToLoadDelay(),ne.setTimeToLoadDelay(0),function(nt){var qt=nt.url;return nt.range&&(qt=qt.concat("_",nt.range)),dt.contains(qt)}(st)?(B.warn("Fragment request url ".concat(st.url," for stream id ").concat(Ee.id," and media type ").concat(Le," is on the ignore list and will be skipped")),Wt()):(B.debug("Next fragment request url for stream id ".concat(Ee.id," and media type ").concat(Le," is ").concat(st.url)),Q.executeRequest(st))}function rt(st){var nt,qt=fe.getCurrentRepresentation();if(!Ne.get().streaming.gaps.enableSeekFix||!Se&&Ie.getTime()!==0||(V?V&&qt.segmentInfoType===v.Z.SEGMENT_TIMELINE&&(nt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,Ne.get().streaming.gaps.threshold)):nt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,Ne.get().streaming.gaps.threshold),isNaN(nt)||nt===qe)){if(me.isLastSegmentRequested(qt,qe)){var Ve=me.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(Ee.id," has finished")),ze.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ve},{streamId:Ee.id,mediaType:Le}),H.segmentRequestingCompleted(Ve),void ne.clearScheduleTimer()}st&&Wt()}else Ie.isSeeking()||Ie.getTime()===0?(B.warn("Adjusting playback time ".concat(nt," because of gap in the manifest. Seeking by ").concat(nt-qe)),Ie.seek(nt,!1,!1)):(B.warn("Adjusting buffering time ".concat(nt," because of gap in the manifest. Adjusting time by ").concat(nt-qe)),On(nt),st&&Wt())}function mt(){var st,nt=xn();if(isNaN(qe)||Je()===y.Z.TEXT&&!Re.isTextEnabled())return null;if(me){var qt=fe&&nt?fe.getRepresentationForQuality(nt.quality):null;st=Se?me.getSegmentRequestForTime(ee,qt,qe):ye?me.repeatSegmentRequest(ee,qt):me.getNextSegmentRequest(ee,qt)}return st}function Wt(){ne.startScheduleTimer(Ie.getLowLatencyModeEnabled()?Ne.get().streaming.scheduling.lowLatencyTimeout:Ne.get().streaming.scheduling.defaultTimeout)}function Nt(st){st.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(st.currentRepresentation)}function en(st){pe.addBufferState(Le,st.state,ne.getBufferTarget()),st.state!==D.Z.BUFFER_EMPTY||Ie.isSeeking()||(B.info("Buffer is empty! Stalling!"),pe.pushPlayListTraceMetrics(new Date,et.REBUFFERING_REASON))}function Jt(st){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),Ee.duration),st.quotaExceeded&&st.from>Ie.getTime()&&On(st.from),st.hasEnoughSpaceToAppend&&st.quotaExceeded&&ne.startScheduleTimer()}function Yt(st){if(st&&st.lastRequestAppended&&st.lastRequestAppended.url){var nt=st.lastRequestAppended.url;st.lastRequestAppended.range&&(nt=nt.concat("_",st.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(nt)),dt.add(nt)}}function Dn(st){if(B.debug("Appended bytes for ".concat(st.mediaType," and stream id ").concat(st.streamId)),st.segmentType===tt.w.INIT_SEGMENT_TYPE){var nt=st.quality;ne.setLastInitializedQuality(nt),B.info("["+Le+"] lastInitializedRepresentationInfo changed to "+st.quality)}De?Nn(De):ne.startScheduleTimer(0)}function Nn(st){var nt=Q.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(nt&&nt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(De=st);H.updateBufferTimestampOffset(st).then(function(){ne.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?ne.startScheduleTimer():En(),De=null,ie=!1}).catch(function(){De=null,ie=!1})}function rr(st){B.info("onFragmentLoadingAbandoned request: "+st.request.url+" has been aborted"),Ie.isSeeking()||ne.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+st.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),st.request&&st.request.isInitializationRequest()?ne.setInitSegmentRequired(!0):On(st.request.startTime+st.request.duration/2),ne.startScheduleTimer(0))}function ir(st){B.info("OnFragmentLoadingCompleted for stream id "+Ee.id+" and media type "+Le+" - Url:",st.request?st.request.url:"undefined",st.request.range?", Range:"+st.request.range:""),ht()&&ne.startScheduleTimer(0),st.error&&st.request.serviceLocation&&function(nt){B.info("Fragment loading completed with an error"),nt&&nt.request&&nt.request.type&&(nt.request.type===tt.w.INIT_SEGMENT_TYPE?kt({representationId:nt.request.representationId,sender:{}},!1):nt.request.type===tt.w.MEDIA_SEGMENT_TYPE&&(On(nt.request.startTime+nt.request.duration/2),Ft({},!1)))}(st)}function It(){On(Ie.getTime()),Pn().startScheduleTimer()}function $t(st){var nt=st.currentTrackInfo;if(nt){var qt=J.find(function(Ve){return Ve.index===nt.index&&Ve.lang===nt.lang});qt&&vn(qt).then(function(){H.setIsBufferingCompleted(!1),On(Ie.getTime()),ne.setInitSegmentRequired(!0),ne.startScheduleTimer()})}}function Zt(st){On(st.quotaExceededTime),ne.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function vn(st){st===ee||st&&ee&&st.type!==ee.type||(ee=st);var nt=ue.getRealAdaptation(Ee,ee),qt=ue.getVoRepresentations(ee);if(fe){var Ve,Ke=fe.getData(),Dt=Me.getMaxAllowedIndexFor(Le,Ee.id),fn=Me.getMinAllowedIndexFor(Le,Ee.id),Tn=null;return Ke!==null&&Ke.id===nt.id||Le===y.Z.TEXT?Ve=Me.getQualityFor(Le,Ee.id):(Tn=Me.getThroughputHistory().getAverageThroughput(Le,V)||Me.getInitialBitrateFor(Le,Ee.id),Ve=Me.getQualityForBitrate(ee,Tn,Ee.id)),fn!==void 0&&Ve<fn&&(Ve=fn),Ve>Dt&&(Ve=Dt),fe.updateData(nt,qt,Le,ee.isFragmented,Ve)}return Promise.resolve()}function Pn(){return ne}function xn(st){var nt;return st!==void 0?((0,_e.SE)(st),nt=fe?fe.getRepresentationForQuality(st):null):nt=fe?fe.getCurrentRepresentation():null,ue.convertRepresentationToRepresentationInfo(nt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(st){if(Ne.get().streaming.enableManifestTimescaleMismatchFix){var nt=st.chunk,qt=nt.bytes,Ve=xn(nt.quality),Ke=fe&&Ve?fe.getRepresentationForQuality(Ve.quality):null;Ve&&Ke&&(Ke.timescale=Ye.getMediaTimescaleFromMoov(qt))}}function bt(st){var nt=st.chunk,qt=nt.bytes,Ve=nt.quality,Ke=xn(Ve),Dt=fe&&Ke?fe.getRepresentationForQuality(Ke.quality):null;if(Ke&&Dt){var fn;if(Ne.get().streaming.parseInbandPrft&&st.request.type===tt.w.MEDIA_SEGMENT_TYPE){var Tn=function(oo,Zi){var js=oo.getBoxes("prft"),el=[];return js.forEach(function(tl){el.push(function(Qa,Zs){var Po="unknown";switch(Qa.flags){case 0:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var _u=1e3*Qa.ntp_timestamp_sec+Qa.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Po,ntpTimestamp:_u=Et(Be).getInstance().ntpToUTC(_u),mediaTime:Qa.media_time/Zs}}(tl,Zi))}),el}(fn=fn||Ye.parse(qt),Dt.timescale);Tn&&Tn.length&&ze.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:Ee.id,mediaType:Le})}var sr=ue.getEventsFor(Ke.mediaInfo,null,Ee),Zr=ue.getEventsFor(Ke,Dt,Ee);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ii=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:Ve,index:nt.index})[0],zr=function(oo,Zi,js,el){try{for(var tl={},Qa=[],Zs=js.concat(el),Po=0,_u=Zs.length;Po<_u;Po++)tl[Zs[Po].schemeIdUri+"/"+Zs[Po].value]=Zs[Po];var Tu=oo.getBoxes("emsg");if(!Tu||Tu.length===0)return Qa;for(var ca=oo.getBox("sidx"),Zc=!ca||isNaN(ca.earliest_presentation_time)||isNaN(ca.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:ca.earliest_presentation_time/ca.timescale,Qf=Math.max(Zc,0),nl=fe.getCurrentRepresentation(),Ja=0,Gc=Tu.length;Ja<Gc;Ja++){var Gs=ue.getEvent(Tu[Ja],tl,Qf,nl);Gs&&Qa.push(Gs)}return Qa}catch(Pt){return[]}}(fn=fn||Ye.parse(qt),Ii,sr,Zr);ze.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:Ee.id})}}}function Sn(){var st=Ie.getTime();Ne.get().streaming.buffer.flushBufferAtTrackSwitch&&Ie.seek(st+.001,!1,!0),On(st),H.setSeekTarget(st),ne.startScheduleTimer()}function En(){var st=Ie.getTime(),nt=H.getContinuousBufferTimeForTargetTime(st);On(isNaN(nt)?st:nt),ne.startScheduleTimer()}function Lt(st){st&&!isNaN(st.time)&&(On(st.time),H.setSeekTarget(st.time))}function On(st){qe=st,Se=!0}return P={initialize:function(st,nt,qt){ge=(0,ft.Z)(Be).create({events:T.Z,eventBus:ze,streamInfo:Ee,timelineConverter:j,dashConstants:v.Z,segmentBaseController:L.segmentBaseController,type:Le}),me=(0,de.Z)(Be).create({streamInfo:Ee,type:Le,timelineConverter:j,dashMetrics:pe,mediaPlayerModel:se,baseURLController:L.baseURLController,errHandler:we,segmentsController:ge,settings:Ne,boxParser:Ye,events:T.Z,eventBus:ze,errors:Ae,debug:(0,x.Z)(Be).getInstance(),requestModifier:(0,He.Z)(Be).getInstance(),dashConstants:v.Z,constants:y.Z,urlUtils:(0,Tt.Z)(Be).getInstance()}),V=Ee.manifestInfo.isDynamic,me.initialize(V),Me.registerStreamType(Le,P),fe=K(Be).create({streamInfo:Ee,type:Le,abrController:Me,dashMetrics:pe,playbackController:Ie,timelineConverter:j,dashConstants:v.Z,events:T.Z,eventBus:ze,errors:Ae,isDynamic:V,adapter:ue,segmentsController:ge}),H=function(Ve,Ke){return Ve?Ve!==y.Z.TEXT||Ke?_t(Be).create({streamInfo:Ee,type:Ve,mediaPlayerModel:se,manifestModel:ae,fragmentModel:Q,errHandler:we,mediaController:ke,representationController:fe,adapter:ue,textController:Re,abrController:Me,playbackController:Ie,settings:Ne}):re(Be).create({streamInfo:Ee,type:Ve,mimeType:je,fragmentModel:Q,textController:Re,errHandler:we,settings:Ne}):(we.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(Le,qt),H&&H.initialize(st),(ne=O(Be).create({streamInfo:Ee,type:Le,mimeType:je,adapter:ue,dashMetrics:pe,mediaPlayerModel:se,fragmentModel:Q,abrController:Me,playbackController:Ie,textController:Re,mediaController:ke,bufferController:H,representationController:fe,settings:Ne})).initialize(nt),qe=0,Se=!1,ye=!1},getStreamId:at,getType:Je,isUpdating:function(){return!!fe&&fe.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return fe},getRepresentationInfo:xn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(st){var nt=un();return nt?Promise.resolve(nt):H?H.createBufferSink(ee,st):Promise.resolve(null)},updateStreamInfo:function(st){return Ee=st,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return Ee},selectMediaInfo:vn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(st){J.indexOf(st)===-1&&J.push(st)},prepareTrackSwitch:function(){return new Promise(function(st){B.debug("Preparing track switch for type ".concat(Le));var nt=Le===y.Z.TEXT||Ne.get().streaming.trackSwitchMode[Le]===y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ie.getTimeToStreamEnd(Ee)>Ne.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!nt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Ee.id,mediaType:Le})}).catch(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Ee.id,mediaType:Le})}),void st();ne.clearScheduleTimer(),ne.setSwitchTrack(!0),nt?(ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:Ee.id},{mediaType:Le,streamId:Ee.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var qt=xn();return H.updateBufferTimestampOffset(qt)}).then(function(){Sn(),st()}).catch(function(){Sn(),st()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),st()}).catch(function(){En(),st()})})},prepareQualityChange:function(st){De&&B.warn("Canceling queued representation switch to ".concat(De.quality," for ").concat(Le)),B.debug("Preparing quality switch for type ".concat(Le));var nt=st.newQuality;ie=!0,ne.clearScheduleTimer(),fe.prepareQualityChange(nt);var qt=xn(nt);st.reason&&st.reason.forceReplace?function(Ve){Q.abortRequests(),ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:Ee.id},{mediaType:Le,streamId:Ee.id}),ne.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(Ve).then(function(){Sn(),De=null,ie=!1}).catch(function(){Sn(),De=null,ie=!1})}(qt):st&&st.reason&&st.reason.forceAbandon?function(Ve){H.updateBufferTimestampOffset(Ve).then(function(){Q.abortRequests(),ye=!0,ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1,De=null}).catch(function(){De=null,ie=!1})}(qt):Ne.get().streaming.buffer.fastSwitchEnabled?function(Ve){var Ke=Ie.getTime(),Dt=1.5*(isNaN(Ve.fragmentDuration)?1:Ve.fragmentDuration),fn=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ke+Dt,threshold:0})[0];if(fn&&!ht()){var Tn=H.getBufferLevel(),sr=Me.getAbandonmentStateFor(Ee.id,Le);fn.quality<Ve.quality&&Tn>=Dt&&sr!==D.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(Ve).then(function(){Q.abortRequests(),On(Ke+Dt),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):Nn(Ve)}else Nn(Ve)}(qt):Nn(qt),pe.pushPlayListTraceMetrics(new Date,et.REPRESENTATION_SWITCH_STOP_REASON),pe.createPlaylistTraceMetrics(qt.id,1e3*Ie.getTime(),Ie.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(st){return H.setMediaSource(st,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(st,nt){pe.pushPlayListTraceMetrics(st,nt)},probeNextRequest:function(){var st=xn(),nt=fe&&st?fe.getRepresentationForQuality(st.quality):null;return me.getNextSegmentRequestIdempotent(ee,nt)},prepareInnerPeriodPlaybackSeeking:function(st){return new Promise(function(nt){if(H.hasBufferAtTime(st.seekTime))return H.pruneBuffer(),Gt(H.getContinuousBufferTimeForTargetTime(st.seekTime))&&H.setIsBufferingCompleted(!0),void nt();ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var qt=H.getAllRangesWithSafetyFactor(st.seekTime);return H.clearBuffers(qt)}).then(function(){var qt=H.getContinuousBufferTimeForTargetTime(st.seekTime);if(Gt(qt))H.setIsBufferingCompleted(!0),nt();else{var Ve=isNaN(qt)?st.seekTime:qt;On(Ve),H.setSeekTarget(Ve);var Ke=[];Ke.push(H.updateAppendWindow());var Dt=xn();Ke.push(H.updateBufferTimestampOffset(Dt)),Promise.all(Ke).then(function(){ne.setInitSegmentRequired(!0),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),nt()})}}).catch(function(qt){B.error(qt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(st,nt){try{ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){st()})}catch(qt){nt(qt)}})},reset:function(st,nt){me&&me.reset(),H&&(H.reset(st,nt),H=null),ne&&(ne.reset(),ne=null),fe&&(fe.reset(),fe=null),ge&&(ge=null),Me&&Me.unRegisterStreamType(at(),Le),ze.off(T.Z.DATA_UPDATE_COMPLETED,Nt,P),ze.off(T.Z.INIT_FRAGMENT_NEEDED,kt,P),ze.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),ze.off(T.Z.INIT_FRAGMENT_LOADED,Gn,P),ze.off(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),ze.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),ze.off(T.Z.BUFFER_CLEARED,Jt,P),ze.off(T.Z.SEEK_TARGET,Lt,P),ze.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),ze.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),ze.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),ze.off(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),ze.off(T.Z.QUOTA_EXCEEDED,Zt,P),ze.off(T.Z.SOURCE_BUFFER_ERROR,Yt,P),ze.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),Bt(),Le=null,Ee=null}},B=(0,x.Z)(Be).getInstance().getLogger(P),Bt(),ze.on(T.Z.DATA_UPDATE_COMPLETED,Nt,P,{priority:m.Z.EVENT_PRIORITY_HIGH}),ze.on(T.Z.INIT_FRAGMENT_NEEDED,kt,P),ze.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),ze.on(T.Z.INIT_FRAGMENT_LOADED,Gn,P),ze.on(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),ze.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),ze.on(T.Z.BUFFER_CLEARED,Jt,P),ze.on(T.Z.SEEK_TARGET,Lt,P),ze.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),ze.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),ze.on(T.Z.QUOTA_EXCEEDED,Zt,P),ze.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),ze.on(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),ze.on(T.Z.SOURCE_BUFFER_ERROR,Yt,P),ze.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),P}Ct.__dashjs_factory_name="StreamProcessor";var hn=U.Z.getClassFactory(Ct),Qt=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=w(9032);function Ot(L,P){if(L){if(typeof L=="string")return Un(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,P):void 0}}function Un(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function gr(L){L=L||{};var P,B,V=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,ne=(0,Ze.Z)(V).getInstance();function fe(ie){var me,ge=new Date,qe=ie.request,De=new Headers;if(qe.range&&De.append("Range","bytes="+qe.range),ie.headers)for(var Be in ie.headers){var ze=ie.headers[Be];ze&&De.append(Be,ze)}qe.requestStartDate||(qe.requestStartDate=ge),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(j,ue){De.append(j,ue)}},{url:ie.url}),typeof window.AbortController=="function"&&(me=new AbortController,ie.abortController=me,me.signal.onabort=ie.onabort);var Ee={method:ie.method,headers:De,credentials:ie.withCredentials?"include":void 0,signal:me?me.signal:void 0},Le=ne.get().streaming.abr.fetchThroughputCalculationMode,we=Date.now(),je=0;new Promise(function(j){if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(je=J.getThroughputCapacityDelayMS(qe,1e3*B.getCurrentBufferLevel(qe.mediaType))))return setTimeout(j,je);j()}).then(function(){var j=Date.now();fetch(ie.url,Ee).then(function(ue){ie.response||(ie.response={}),ie.response.status=ue.status,ie.response.statusText=ue.statusText,ie.response.responseURL=ue.url,ue.ok||ie.onerror();var ae,se="",Q=function(Nt,en){var Jt;if(typeof Symbol>"u"||Nt[Symbol.iterator]==null){if(Array.isArray(Nt)||(Jt=Ot(Nt))){Jt&&(Nt=Jt);var Yt=0,Dn=function(){};return{s:Dn,n:function(){return Yt>=Nt.length?{done:!0}:{done:!1,value:Nt[Yt++]}},e:function(It){throw It},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Nn,rr=!0,ir=!1;return{s:function(){Jt=Nt[Symbol.iterator]()},n:function(){var It=Jt.next();return rr=It.done,It},e:function(It){ir=!0,Nn=It},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw Nn}}}}(ue.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Me=ae.value;se+=Me+": "+ue.headers.get(Me)+"\r\n"}}catch(Nt){Q.e(Nt)}finally{Q.f()}if(ie.response.responseHeaders=se,!ue.body)return ue.arrayBuffer().then(function(Nt){ie.response.response=Nt;var en={loaded:Nt.byteLength,total:Nt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var Ie,ke,Re,pe,Ne=parseInt(ue.headers.get("Content-Length"),10),Ye=0,dt=!1,at=new Uint8Array,Je=0;if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var ht=j,Bt=0,Gt=(Re=ue.body.tee(),pe=2,function(Nt){if(Array.isArray(Nt))return Nt}(Re)||function(Nt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(Nt)){var Jt=[],Yt=!0,Dn=!1,Nn=void 0;try{for(var rr,ir=Nt[Symbol.iterator]();!(Yt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Yt=!0);}catch(It){Dn=!0,Nn=It}finally{try{Yt||ir.return==null||ir.return()}finally{if(Dn)throw Nn}}return Jt}}(Re,pe)||Ot(Re,pe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),kt=Gt[0],Ft=Gt[1];Ie=kt.getReader(),ke=[],Ie.read().then(function Nt(en){var Jt=en.value,Yt=en.done;if(Bt=Date.now(),Jt&&Jt.length){var Dn=Bt-ht,Nn=Jt.length;ke.push({chunkDownloadTimeRelativeMS:Bt-j,chunkDownloadDurationMS:Dn,chunkBytes:Nn,kbps:Math.round(8*Nn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(qe.mediaType)})}if(Yt){var rr=Bt-j,ir=ke.reduce(function(It,$t){return It+$t.chunkBytes},0);return J.addMeasurement(qe,rr,ke,we,je,se),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(qe),stream:!0})}return ht=Date.now(),Ie.read().then(Nt)}),ie.reader=Ft.getReader()}else ie.reader=ue.body.getReader();var An=[],rt=[],mt=[],Wt=!0;Se(ie,function Nt(en){var Jt=en.value;if(en.done){if(at){if(Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Yt=null,Dn=null;Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Yt=function(It,$t){try{var Zt,un;Zt=It.filter(function(Sn,En){return En<It.length-1}),un=$t.filter(function(Sn,En){return En<$t.length-1});var vn=[];if(Zt.length>1){for(var Pn=0,xn=0,Fn=0;Fn<Zt.length;Fn++)if(Zt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Zt[Fn].ts;if(Gn>1)vn.push(8*un[Fn].bytes/Gn),xn=0;else{xn===0&&(xn=Zt[Fn].ts,Pn=0);var bt=un[Fn].ts-xn;bt>1?(Pn+=un[Fn].bytes,vn.push(8*Pn/bt),xn=0):Pn+=un[Fn].bytes}}if(vn.length>0)return vn.reduce(function(Sn,En){return Sn+En},0)/vn.length}return null}catch(Sn){return null}}(rt,mt),Yt&&(Dn=8*Ye/Yt)):Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=ye(An,Ye)),ie.progress({loaded:Ye,total:isNaN(Ne)?Ye:Ne,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=at.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){at=function(It,$t){if(It.length===0)return $t;var Zt=new Uint8Array(It.length+$t.length);return Zt.set(It),Zt.set($t,It.length),Zt}(at,Jt),Ye+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Wt&&H.findLastTopIsoBoxCompleted(["moof"],at,Je).found&&(Wt=!1,rt.push({ts:performance.now(),bytes:Jt.length}));var Nn=H.findLastTopIsoBoxCompleted(["moov","mdat"],at,Je);if(Nn.found){var rr,ir=Nn.lastCompletedOffset+Nn.size;Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Wt||(Wt=!0,mt.push({ts:performance.now(),bytes:at.length})),ir===at.length?(rr=at,at=new Uint8Array):(rr=new Uint8Array(at.subarray(0,ir)),at=at.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),Je=0}else Je=Nn.lastCompletedOffset,dt||(ie.progress({lengthComputable:!1,noTrace:!0}),dt=!0)}Se(ie,Nt)})}).catch(function(ue){ie.onerror&&ie.onerror(ue)})})}function Se(ie,me){ie.reader.read().then(me).catch(function(ge){ie.onerror&&ie.response.status===200&&ie.onerror(ge)})}function ye(ie,me){try{if((ie=ie.filter(function(De){return De.bytes>me/4/ie.length})).length>1){var ge=0,qe=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(De,Be){var ze=ie[Be+1];if(ze){var Ee=ze.ts-De.ts;ge+=Ee<qe?Ee:0}}),ge}return null}catch(De){return null}}return P={load:function(ie){ee&&ee.modifyRequest?(0,He.k)(ie,ee).then(function(){return fe(ie)}):fe(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(me){}},calculateDownloadedTime:ye,setup:function(ie){B=ie.dashMetrics}},P}gr.__dashjs_factory_name="FetchLoader";var Pr=U.Z.getClassFactory(gr),dr=w(1180);function ti(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var eo=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var P,B;return P=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==v.Z.BASE_URL&&this.segmentInfoType!==v.Z.SEGMENT_BASE&&!this.indexRange}}])&&ti(P.prototype,B),L}(),Or=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},to=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};to.DEFAULT_ID="defaultId";var Ti=to,Di=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=w(2610),no=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Si=function L(P,B,V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||P||"",this.dvbPriority=V||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Si.DEFAULT_DVB_PRIORITY=1,Si.DEFAULT_DVB_WEIGHT=1;var Qn=Si,Lu=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var St=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var P,B;return P=L,(B=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[v.Z.DVB_URL]&&(this.dvbUrl=V[v.Z.DVB_URL]),V[v.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[v.Z.DVB_MIMETYPE]),V[v.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[v.Z.DVB_FONTFAMILY])),this}}])&&an(P.prototype,B),L}(),zt=w(3101),Mt=w.n(zt);function Vt(){return{areEqual:function(L,P){return Mt()(L,P)}}}Vt.__dashjs_factory_name="ObjectUtils";var mn=U.Z.getSingletonFactory(Vt),In=w(7803),Zn=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.queryParams={}},Cn=function L(P,B,V){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.ttl=V||NaN,this.queryParams={}};function Rn(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function on(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Rn(Object(B),!0).forEach(function(V){Bn(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bn(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function kn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){ne=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function er(L,P){if(L){if(typeof L=="string")return Er(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,P):void 0}}function Er(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Ur(){var L,P,B,V,ee=this.context,J=(0,Tt.Z)(ee).getInstance(),H=Number.isInteger||function(j){return typeof j=="number"&&isFinite(j)&&Math.floor(j)===j};function ne(j,ue){if(!j)throw new Error("adaptation is not defined");if(!ue)throw new Error("type is not defined");if(j.Representation_asArray&&j.Representation_asArray.length){var ae=Be(j.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return ue===y.Z.IMAGE}if(j.ContentComponent_asArray&&j.ContentComponent_asArray.length>0){if(j.ContentComponent_asArray.length>1)return ue===y.Z.MUXED;if(j.ContentComponent_asArray[0].contentType===ue)return!0}var se=ue===y.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(ue);if(j.Representation_asArray&&j.Representation_asArray.length){var Q=j.Representation_asArray[0].codecs;if(se.test(Q))return!0}if(j.hasOwnProperty(v.Z.MIME_TYPE))return se.test(j.mimeType);if(j.Representation_asArray){for(var Me,Ie=0;Ie<j.Representation_asArray.length;Ie++)if((Me=j.Representation_asArray[Ie]).hasOwnProperty(v.Z.MIME_TYPE))return se.test(Me.mimeType)}return!1}function fe(j){if(!j)throw new Error("adaptation is not defined");if(j.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||j.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||j.hasOwnProperty(v.Z.SEGMENT_LIST)||j.hasOwnProperty(v.Z.SEGMENT_BASE))return!0;if(j.Representation_asArray&&j.Representation_asArray.length>0){var ue=j.Representation_asArray[0];if(ue.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||ue.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||ue.hasOwnProperty(v.Z.SEGMENT_LIST)||ue.hasOwnProperty(v.Z.SEGMENT_BASE))return!0}return!1}function Se(j){return ne(j,y.Z.VIDEO)}function ye(j){return ne(j,y.Z.TEXT)}function ie(j){return ne(j,y.Z.IMAGE)}function me(j){return j&&Array.isArray(j.Representation_asArray)&&j.Representation_asArray.sort(function(ue,ae){return ue.bandwidth-ae.bandwidth}),j}function ge(j,ue){return j&&j.Period_asArray&&H(ue)&&j.Period_asArray[ue]?j.Period_asArray[ue].AdaptationSet_asArray:[]}function qe(j){return j&&j.Period_asArray?j.Period_asArray:[]}function De(j){var ue=!1;return j&&j.hasOwnProperty("type")&&(ue=j.type===v.Z.DYNAMIC),ue}function Be(j){return j&&j.EssentialProperty_asArray&&j.EssentialProperty_asArray.length?j.EssentialProperty_asArray.map(function(ue){return{schemeIdUri:ue.schemeIdUri,value:ue.value}}):null}function ze(j){if(!j||!j.S_asArray)return NaN;var ue=j.S_asArray[0],ae=j.S_asArray[1];return ue.hasOwnProperty("d")?ue.d:ae.t-ue.t}function Ee(j,ue){if(!j)throw new Error("Period cannot be null or undefined");var ae=Ti.DEFAULT_ID+"_"+ue;return j.hasOwnProperty(v.Z.ID)&&j.id.length>0&&j.id!=="__proto__"&&(ae=j.id),ae}function Le(j,ue,ae){var se,Q=[];if(!j)return Q;for(se=0;se<j.length;se++){var Me=new Lu;if(Me.timescale=1,Me.representation=ue,!j[se].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Me.schemeIdUri=j[se].schemeIdUri,j[se].hasOwnProperty(v.Z.TIMESCALE)&&(Me.timescale=j[se].timescale),j[se].hasOwnProperty(v.Z.VALUE)&&(Me.value=j[se].value),Q.push(Me),Me.period=ae}return Q}function we(j){var ue=[],ae=j.BaseURL_asArray||[j.baseUri],se=!1;return ae.some(function(Q){if(Q){var Me=new Qn,Ie=Q.__text||Q;return J.isRelative(Ie)&&(se=!0,j.baseUri&&(Ie=J.resolve(Ie,j.baseUri))),Me.url=Ie,Q.hasOwnProperty(v.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Me.serviceLocation=Q.serviceLocation:Me.serviceLocation=Ie,Q.hasOwnProperty(v.Z.DVB_PRIORITY)&&(Me.dvbPriority=Q[v.Z.DVB_PRIORITY]),Q.hasOwnProperty(v.Z.DVB_WEIGHT)&&(Me.dvbWeight=Q[v.Z.DVB_WEIGHT]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)&&(Me.availabilityTimeOffset=Q[v.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)&&(Me.availabilityTimeComplete=Q[v.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),ue.push(Me),se}}),ue}function je(j){var ue=new sn;return ue.serverUrl=j.__text,j.hasOwnProperty(v.Z.DEFAULT_SERVICE_LOCATION)&&(ue.defaultServiceLocation=j[v.Z.DEFAULT_SERVICE_LOCATION],ue.defaultServiceLocationArray=ue.defaultServiceLocation.split(" ")),j.hasOwnProperty(v.Z.QUERY_BEFORE_START)&&(ue.queryBeforeStart=j[v.Z.QUERY_BEFORE_START].toLowerCase()==="true"),j.hasOwnProperty(v.Z.CLIENT_REQUIREMENT)&&(ue.clientRequirement=j[v.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),ue}return L={getIsTypeOf:ne,getIsText:ye,getIsFragmented:fe,getProducerReferenceTimesForAdaptation:function(j){var ue=j&&j.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)?j[v.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(j&&j.hasOwnProperty(v.Z.REPRESENTATION_ASARRAY)?j[v.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(se){var Q;se.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)&&ue.push.apply(ue,function(Me){if(Array.isArray(Me))return Er(Me)}(Q=se[v.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Me){if(typeof Symbol<"u"&&Symbol.iterator in Object(Me))return Array.from(Me)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return ue.forEach(function(se){var Q=new tn;se.hasOwnProperty(v.Z.ID)&&(Q[v.Z.ID]=se[v.Z.ID],se.hasOwnProperty(v.Z.WALL_CLOCK_TIME)&&(Q[v.Z.WALL_CLOCK_TIME]=se[v.Z.WALL_CLOCK_TIME],se.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(Q[v.Z.PRESENTATION_TIME]=se[v.Z.PRESENTATION_TIME],se.hasOwnProperty(v.Z.INBAND)&&(Q[v.Z.INBAND]=se[v.Z.INBAND]!=="false"),se.hasOwnProperty(v.Z.TYPE)&&(Q[v.Z.TYPE]=se[v.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(j){var ue="";return j&&j.hasOwnProperty(v.Z.LANG)&&(ue=j.lang),ue},getViewpointForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.VIEWPOINT_ASARRAY)&&j[v.Z.VIEWPOINT_ASARRAY].length?j[v.Z.VIEWPOINT_ASARRAY].map(function(ue){return new St().init(ue)}):[]},getRolesForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.ROLE_ASARRAY)&&j[v.Z.ROLE_ASARRAY].length?j[v.Z.ROLE_ASARRAY].map(function(ue){return new St().init(ue)}):[]},getAccessibilityForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.ACCESSIBILITY_ASARRAY)&&j[v.Z.ACCESSIBILITY_ASARRAY].length?j[v.Z.ACCESSIBILITY_ASARRAY].map(function(ue){return new St().init(ue)}):[]},getAudioChannelConfigurationForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ue){return new St().init(ue)}):[]},getAudioChannelConfigurationForRepresentation:function(j){return j&&j.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ue){return new St().init(ue)}):[]},getAdaptationForIndex:function(j,ue,ae){var se=ge(ue,ae);return se.length>0&&H(j)?se[j]:null},getIndexForAdaptation:function(j,ue,ae){if(!j)return-1;for(var se=ge(ue,ae),Q=0;Q<se.length;Q++)if(mn(ee).getInstance().areEqual(se[Q],j))return Q;return-1},getAdaptationForId:function(j,ue,ae){var se,Q,Me=ge(ue,ae);for(se=0,Q=Me.length;se<Q;se++)if(Me[se].hasOwnProperty(v.Z.ID)&&Me[se].id===j)return Me[se];return null},getAdaptationsForType:function(j,ue,ae){var se,Q,Me=ge(j,ue),Ie=[];for(se=0,Q=Me.length;se<Q;se++)ne(Me[se],ae)&&Ie.push(me(Me[se]));return Ie},getRealPeriods:qe,getRealPeriodForIndex:function(j,ue){var ae=qe(ue);return ae.length>0&&H(j)?ae[j]:null},getCodec:function(j,ue,ae){var se=null;if(j&&j.Representation_asArray&&j.Representation_asArray.length>0){var Q=H(ue)&&ue>=0&&ue<j.Representation_asArray.length?j.Representation_asArray[ue]:j.Representation_asArray[0];Q&&(se=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(se+=';width="'+Q.width+'";height="'+Q.height+'"'))}return se&&(se=se.replace(/\sprofiles=[^;]*/g,"")),se},getSelectionPriority:function(j){try{var ue=j&&j.selectionPriority!==void 0?parseInt(j.selectionPriority):1;return isNaN(ue)?1:ue}catch(ae){return 1}},getMimeType:function(j){return j&&j.Representation_asArray&&j.Representation_asArray.length>0?j.Representation_asArray[0].mimeType:null},getKID:function(j){return j&&j.hasOwnProperty(v.Z.CENC_DEFAULT_KID)?j[v.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(j){if(!j||!Array.isArray(j.Label_asArray))return[];for(var ue=[],ae=0;ae<j.Label_asArray.length;ae++)ue.push({lang:j.Label_asArray[ae].lang,text:j.Label_asArray[ae].__text||j.Label_asArray[ae]});return ue},getContentProtectionData:function(j){return j&&j.hasOwnProperty(v.Z.CONTENTPROTECTION_ASARRAY)&&j.ContentProtection_asArray.length!==0?j.ContentProtection_asArray:null},getIsDynamic:De,getId:function(j){return j&&j[v.Z.ID]||null},hasProfile:function(j,ue){var ae=!1;return j&&j.profiles&&j.profiles.length>0&&(ae=j.profiles.indexOf(ue)!==-1),ae},getDuration:function(j){return j&&j.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)?j.mediaPresentationDuration:j&&j.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(j){return j&&j.bandwidth?j.bandwidth:NaN},getManifestUpdatePeriod:function(j){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return j&&j.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ae=j.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-ue,1)},getPublishTime:function(j){return j&&j.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(j[v.Z.PUBLISH_TIME]):null},getRepresentationCount:function(j){return j&&Array.isArray(j.Representation_asArray)?j.Representation_asArray.length:0},getBitrateListForAdaptation:function(j){var ue=me(j);return(ue&&Array.isArray(ue.Representation_asArray)?ue.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(j,ue){return ue&&ue.Representation_asArray&&ue.Representation_asArray.length>0&&H(j)?ue.Representation_asArray[j]:null},getRepresentationsForAdaptation:function(j){var ue,ae,se,Q,Me=[],Ie=function(at){if(at&&at.period&&H(at.period.index)){var Je=at.period.mpd.manifest.Period_asArray[at.period.index];if(Je&&Je.AdaptationSet_asArray&&H(at.index))return me(Je.AdaptationSet_asArray[at.index])}}(j);if(Ie&&Ie.Representation_asArray){if(j&&j.period&&H(j.period.index)){var ke=we(j.period.mpd.manifest);ke&&(ae=ke[0])}for(var Re=0,pe=Ie.Representation_asArray.length;Re<pe;++Re){var Ne=Ie.Representation_asArray[Re],Ye=new eo;if(Ye.index=Re,Ye.adaptation=j,Ne.hasOwnProperty(v.Z.ID)&&(Ye.id=Ne.id),Ne.hasOwnProperty(v.Z.CODECS)&&(Ye.codecs=Ne.codecs),Ne.hasOwnProperty(v.Z.MIME_TYPE)&&(Ye.mimeType=Ne[v.Z.MIME_TYPE]),Ne.hasOwnProperty(v.Z.CODEC_PRIVATE_DATA)&&(Ye.codecPrivateData=Ne.codecPrivateData),Ne.hasOwnProperty(v.Z.BANDWITH)&&(Ye.bandwidth=Ne.bandwidth),Ne.hasOwnProperty(v.Z.WIDTH)&&(Ye.width=Ne.width),Ne.hasOwnProperty(v.Z.HEIGHT)&&(Ye.height=Ne.height),Ne.hasOwnProperty(v.Z.SCAN_TYPE)&&(Ye.scanType=Ne.scanType),Ne.hasOwnProperty(v.Z.MAX_PLAYOUT_RATE)&&(Ye.maxPlayoutRate=Ne.maxPlayoutRate),Ne.hasOwnProperty(v.Z.SEGMENT_BASE)?(ue=Ne.SegmentBase,Ye.segmentInfoType=v.Z.SEGMENT_BASE):Ne.hasOwnProperty(v.Z.SEGMENT_LIST)?(ue=Ne.SegmentList).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Ye.segmentInfoType=v.Z.SEGMENT_TIMELINE:Ye.segmentInfoType=v.Z.SEGMENT_LIST:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)?((ue=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Ye.segmentInfoType=v.Z.SEGMENT_TIMELINE:Ye.segmentInfoType=v.Z.SEGMENT_TEMPLATE,ue.hasOwnProperty(v.Z.INITIALIZATION_MINUS)&&(Ye.initialization=ue.initialization.split("$Bandwidth$").join(Ne.bandwidth).split("$RepresentationID$").join(Ne.id))):Ye.segmentInfoType=v.Z.BASE_URL,Ye.essentialProperties=Be(Ne),ue){if(ue.hasOwnProperty(v.Z.INITIALIZATION)){var dt=ue.Initialization;dt.hasOwnProperty(v.Z.SOURCE_URL)&&(Ye.initialization=dt.sourceURL),dt.hasOwnProperty(v.Z.RANGE)&&(Ye.range=dt.range)}else ye(Ie)&&fe(Ie)&&Ie.mimeType&&Ie.mimeType.indexOf("application/mp4")===-1&&(Ye.range=0);ue.hasOwnProperty(v.Z.TIMESCALE)&&(Ye.timescale=ue.timescale),ue.hasOwnProperty(v.Z.DURATION)?Ye.segmentDuration=ue.duration/Ye.timescale:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)&&(ue=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)&&(Ye.segmentDuration=ze(ue.SegmentTimeline)/Ye.timescale),ue.hasOwnProperty(v.Z.MEDIA)&&(Ye.media=ue.media),ue.hasOwnProperty(v.Z.START_NUMBER)&&(Ye.startNumber=ue.startNumber),ue.hasOwnProperty(v.Z.INDEX_RANGE)&&(Ye.indexRange=ue.indexRange),ue.hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Ye.presentationTimeOffset=ue.presentationTimeOffset/Ye.timescale),ue.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)?Ye.availabilityTimeOffset=ue.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(Ye.availabilityTimeOffset=ae.availabilityTimeOffset),ue.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)?Ye.availabilityTimeComplete=ue.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(Ye.availabilityTimeComplete=ae.availabilityTimeComplete)}Ye.MSETimeOffset=(Q=(se=Ye).presentationTimeOffset,se.adaptation.period.start-Q),Ye.path=[j.period.index,j.index,Re],Me.push(Ye)}}return Me},getAdaptationsForPeriod:function(j){var ue,ae,se,Q=j&&H(j.index)?j.mpd.manifest.Period_asArray[j.index]:null,Me=[];if(Q&&Q.AdaptationSet_asArray)for(se=0;se<Q.AdaptationSet_asArray.length;se++)ae=Q.AdaptationSet_asArray[se],ue=new Or,ae.hasOwnProperty(v.Z.ID)&&(ue.id=ae.id),ue.index=se,ue.period=j,ne(ae,y.Z.MUXED)?ue.type=y.Z.MUXED:ne(ae,y.Z.AUDIO)?ue.type=y.Z.AUDIO:Se(ae)?ue.type=y.Z.VIDEO:ye(ae)?ue.type=y.Z.TEXT:ie(ae)?ue.type=y.Z.IMAGE:P.warn("Unknown Adaptation stream type"),Me.push(ue);return Me},getRegularPeriods:function(j){var ue,ae,se=!!j&&De(j.manifest),Q=[],Me=null,Ie=null,ke=null,Re=null;for(ae=0,ue=j&&j.manifest&&j.manifest.Period_asArray?j.manifest.Period_asArray.length:0;ae<ue;ae++)(Ie=j.manifest.Period_asArray[ae]).hasOwnProperty(v.Z.START)?(Re=new Ti).start=Ie.start:Me!==null&&Me.hasOwnProperty(v.Z.DURATION)&&ke!==null?(Re=new Ti).start=parseFloat((ke.start+ke.duration).toFixed(5)):ae!==0||se||((Re=new Ti).start=0),ke!==null&&isNaN(ke.duration)&&(Re!==null?ke.duration=parseFloat((Re.start-ke.start).toFixed(5)):P.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Re!==null&&(Re.id=Ee(Ie,ae),Re.index=ae,Re.mpd=j,Ie.hasOwnProperty(v.Z.DURATION)&&(Re.duration=Ie.duration),ke&&(ke.nextPeriodId=Re.id),Q.push(Re),Me=Ie,ke=Re),Ie=null,Re=null;return Q.length===0||ke!==null&&isNaN(ke.duration)&&(ke.duration=parseFloat((function(pe){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Ne,Ye=De(pe.mpd.manifest);return pe.mpd.manifest.mediaPresentationDuration?Ne=pe.mpd.manifest.mediaPresentationDuration:pe.duration?Ne=pe.duration:Ye?Ne=Number.POSITIVE_INFINITY:B.error(new ce.Z(Ae.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),Ne}(ke)-ke.start).toFixed(5))),Q},getMpd:function(j){var ue=new Di;return j&&(ue.manifest=j,j.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)?ue.availabilityStartTime=new Date(j.availabilityStartTime.getTime()):j.loadedTime&&(ue.availabilityStartTime=new Date(j.loadedTime.getTime())),j.hasOwnProperty(v.Z.AVAILABILITY_END_TIME)&&(ue.availabilityEndTime=new Date(j.availabilityEndTime.getTime())),j.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ue.minimumUpdatePeriod=j.minimumUpdatePeriod),j.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)&&(ue.mediaPresentationDuration=j.mediaPresentationDuration),j.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)&&(ue.suggestedPresentationDelay=j.suggestedPresentationDelay),j.hasOwnProperty(v.Z.TIMESHIFT_BUFFER_DEPTH)&&(ue.timeShiftBufferDepth=j.timeShiftBufferDepth),j.hasOwnProperty(v.Z.MAX_SEGMENT_DURATION)&&(ue.maxSegmentDuration=j.maxSegmentDuration),j.hasOwnProperty(v.Z.PUBLISH_TIME)&&(ue.publishTime=new Date(j.publishTime))),ue},getEventsForPeriod:function(j){var ue,ae,se=j&&j.mpd&&j.mpd.manifest?j.mpd.manifest:null,Q=se?se.Period_asArray:null,Me=Q&&j&&H(j.index)?Q[j.index].EventStream_asArray:null,Ie=[];if(Me)for(ue=0;ue<Me.length;ue++){var ke=new Lu;if(ke.period=j,ke.timescale=1,!Me[ue].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ke.schemeIdUri=Me[ue][y.Z.SCHEME_ID_URI],Me[ue].hasOwnProperty(v.Z.TIMESCALE)&&(ke.timescale=Me[ue][v.Z.TIMESCALE]),Me[ue].hasOwnProperty(v.Z.VALUE)&&(ke.value=Me[ue][v.Z.VALUE]),Me[ue].hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(ke.presentationTimeOffset=Me[ue][v.Z.PRESENTATION_TIME_OFFSET]),ae=0;Me[ue].Event_asArray&&ae<Me[ue].Event_asArray.length;ae++){var Re=Me[ue].Event_asArray[ae],pe=new no;pe.presentationTime=0,pe.eventStream=ke,Re.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(pe.presentationTime=Re.presentationTime);var Ne=ke.presentationTimeOffset?ke.presentationTimeOffset/ke.timescale:0;pe.calculatedPresentationTime=pe.presentationTime/ke.timescale+j.start-Ne,Re.hasOwnProperty(v.Z.DURATION)&&(pe.duration=Re.duration/ke.timescale),Re.hasOwnProperty(v.Z.ID)?pe.id=Re.id:pe.id=null,Re.Signal&&Re.Signal.Binary?pe.messageData=V.decodeArray(Re.Signal.Binary.toString()):pe.messageData=Re.messageData||Re.__cdata||Re.__text,Ie.push(pe)}}return Ie},getEssentialPropertiesForAdaptation:function(j){var ue={};if(j&&j.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,se=kn(j.EssentialProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getEssentialPropertiesAsArrayForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)&&j.EssentialProperty_asArray.length?j.EssentialProperty_asArray.map(function(ue){return new St().init(ue)}):[]},getEssentialPropertiesForRepresentation:Be,getEventStreamForAdaptationSet:function(j,ue,ae){var se,Q,Me;return j&&j.Period_asArray&&ue&&ue.period&&H(ue.period.index)&&(Q=j.Period_asArray[ue.period.index])&&Q.AdaptationSet_asArray&&H(ue.index)&&(Me=Q.AdaptationSet_asArray[ue.index])&&(se=Me.InbandEventStream_asArray),Le(se,null,ae)},getEventStreamForRepresentation:function(j,ue,ae){var se,Q,Me,Ie;return j&&j.Period_asArray&&ue&&ue.adaptation&&ue.adaptation.period&&H(ue.adaptation.period.index)&&(Q=j.Period_asArray[ue.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(ue.adaptation.index)&&(Me=Q.AdaptationSet_asArray[ue.adaptation.index])&&Me.Representation_asArray&&H(ue.index)&&(Ie=Me.Representation_asArray[ue.index])&&(se=Ie.InbandEventStream_asArray),Le(se,ue,ae)},getUTCTimingSources:function(j){var ue=De(j),ae=!!j&&j.hasOwnProperty(v.Z.AVAILABILITY_START_TIME),se=j?j.UTCTiming_asArray:null,Q=[];return(ue||ae)&&se&&se.forEach(function(Me){var Ie=new zi.Z;Me.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(Ie.schemeIdUri=Me.schemeIdUri,Me.hasOwnProperty(v.Z.VALUE)&&(Ie.value=Me.value.toString(),Q.push(Ie)))}),Q},getBaseURLsFromElement:we,getRepresentationSortFunction:function(){return function(j,ue){return j.bandwidth-ue.bandwidth}},getContentSteering:function(j){if(j&&j.hasOwnProperty(v.Z.CONTENT_STEERING_AS_ARRAY))return je(j[v.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(j){return j&&j.hasOwnProperty(v.Z.LOCATION_AS_ARRAY)?j[v.Z.LOCATION_AS_ARRAY].map(function(ue){var ae=ue.__text||ue,se=ue.hasOwnProperty(v.Z.SERVICE_LOCATION)?ue[v.Z.SERVICE_LOCATION]:null;return new Zn(ae,se)}):[]},getPatchLocation:function(j){return j&&j.hasOwnProperty(v.Z.PATCH_LOCATION_AS_ARRAY)?j[v.Z.PATCH_LOCATION_AS_ARRAY].map(function(ue){var ae=ue.__text||ue,se=ue.hasOwnProperty(v.Z.SERVICE_LOCATION)?ue[v.Z.SERVICE_LOCATION]:null,Q=ue.hasOwnProperty(v.Z.TTL)?1e3*parseFloat(ue[v.Z.TTL]):NaN;return new Cn(ae,se,Q)}):[]},getSuggestedPresentationDelay:function(j){return j&&j.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)?j.suggestedPresentationDelay:null},getAvailabilityStartTime:function(j){return j&&j.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)&&j.availabilityStartTime!==null?j.availabilityStartTime.getTime():null},getServiceDescriptions:function(j){var ue=[];if(j&&j.hasOwnProperty(v.Z.SERVICE_DESCRIPTION)){var ae,se=kn(j.ServiceDescription_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value,Me=null,Ie=null,ke=null,Re=null,pe=null,Ne=null,Ye=null;for(var dt in Q)Q.hasOwnProperty(dt)&&(dt===v.Z.ID?Me=Q[dt]:dt===v.Z.SERVICE_DESCRIPTION_SCOPE?Ie=Q[dt].schemeIdUri:dt===v.Z.SERVICE_DESCRIPTION_LATENCY?ke={target:parseInt(Q[dt].target),max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),referenceId:parseInt(Q[dt].referenceId)}:dt===v.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Re={max:parseFloat(Q[dt].max),min:parseFloat(Q[dt].min)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?pe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target),type:Q[dt].type,maxQualityDifference:parseInt(Q[dt].maxQualityDifference)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Ne={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target)}:dt===v.Z.CONTENT_STEERING&&(Ye=je(Q[dt])));ue.push({id:Me,schemeIdUri:Ie,latency:ke,playbackRate:Re,operatingQuality:pe,operatingBandwidth:Ne,contentSteering:Ye})}}catch(at){se.e(at)}finally{se.f()}}return ue},getSegmentAlignment:function(j){return!(!j||!j.hasOwnProperty(v.Z.SEGMENT_ALIGNMENT))&&j[v.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(j){return!(!j||!j.hasOwnProperty(v.Z.SUB_SEGMENT_ALIGNMENT))&&j[v.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(j){var ue={};if(j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(j.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getSupplementalPropertiesAsArrayForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&j.SupplementalProperty_asArray.length?j.SupplementalProperty_asArray.map(function(ue){return new St().init(ue)}):[]},getSupplementalPropertiesForRepresentation:function(j){var ue={};if(j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(j.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getSupplementalPropertiesAsArrayForRepresentation:function(j){return j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&j.SupplementalProperty_asArray.length?j.SupplementalProperty_asArray.map(function(ue){return new St().init(ue)}):[]},setConfig:function(j){j&&(j.errHandler&&(B=j.errHandler),j.BASE64&&(V=j.BASE64))}},P=(0,x.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Vn=U.Z.getSingletonFactory(Ur),rn=w(703);function cn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(fe,Se){if(fe){if(typeof fe=="string")return bn(fe,Se);var ye=Object.prototype.toString.call(fe).slice(8,-1);return ye==="Object"&&fe.constructor&&(ye=fe.constructor.name),ye==="Map"||ye==="Set"?Array.from(fe):ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye)?bn(fe,Se):void 0}}(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){ne=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function bn(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Jn(){var L,P,B,V,ee,J,H,ne,fe,Se,ye=this.context,ie=(0,m.Z)(ye).getInstance(),me=(0,Ze.Z)(ye).getInstance();function ge(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},fe={},ne={},Se={},De()}function qe(){De()}function De(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Me=Q.getActiveStream();Me&&(H=Me.getProcessors())}}}function Be(Q,Me){var Ie,ke={},Re=cn(Me);try{for(Re.s();!(Ie=Re.n()).done;){var pe=Ie.value;Q[pe]&&(ke[pe]=Q[pe])}}catch(Ne){Re.e(Ne)}finally{Re.f()}return ke}function ze(Q){var Me=me.get().streaming.cmcd.enabledKeys;return Q.filter(function(Ie){return Me.includes(Ie)})}function Ee(Q){try{return Q.type===tt.w.MPD_TYPE?((Ie=Le()).ot="m",Ie):Q.type===tt.w.MEDIA_SEGMENT_TYPE?(Me=Q.mediaType,Se.hasOwnProperty(Me)||(Se[Me]=!1),ne.hasOwnProperty(Me)||(ne[Me]=!1),fe.hasOwnProperty(Me)||(fe[Me]=!1),function(ke){var Re,pe=Le(),Ne=function(Ft){try{var An=Ft.quality,rt=Ft.mediaInfo.bitrateList;return parseInt(rt[An].bandwidth/1e3)}catch(mt){return null}}(ke),Ye=function(Ft){try{return isNaN(Ft.duration)?NaN:Math.round(1e3*Ft.duration)}catch(An){return null}}(ke),dt=function(Ft){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Ft)/100)}catch(An){return null}}(ke.mediaType),at=function(Ft){try{var An=B.pr,rt=ee.getCurrentBufferLevel(Ft);return isNaN(An)||isNaN(rt)?null:100*parseInt(rt/An*10)}catch(mt){return null}}(ke.mediaType),Je=we(ke.mediaType),ht=function(Ft){try{var An=V.getTopBitrateInfoFor(Ft);return Math.round(An.bitrate/1e3)}catch(rt){return null}}(ke.mediaType),Bt=B.pr,Gt=function(Ft){if(H&&H.length!==0){var An,rt=cn(H);try{for(rt.s();!(An=rt.n()).done;){var mt=An.value;if(mt.getType()===Ft)return mt.probeNextRequest()}}catch(Wt){rt.e(Wt)}finally{rt.f()}}}(ke.mediaType);ke.mediaType===y.Z.VIDEO&&(Re="v"),ke.mediaType===y.Z.AUDIO&&(Re="a"),ke.mediaType===y.Z.TEXT&&(Re=ke.mediaInfo.mimeType==="application/mp4"?"tt":"c");var kt=me.get().streaming.cmcd.rtp;return kt||(kt=function(Ft){try{var An=J.getPlaybackRate();An||(An=1);var rt=Ft.quality,mt=Ft.mediaType,Wt=Ft.mediaInfo,Nt=Ft.duration;if(!Wt)return NaN;var en=we(mt);en===0&&(en=500);var Jt=Wt.bitrateList[rt].bandwidth*Nt/1e3/(en/An/1e3),Yt=me.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(me.get().streaming.cmcd.rtpSafetyFactor)?me.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Yt/100)+1)}catch(Dn){return NaN}}(ke)),isNaN(kt)||(pe.rtp=kt),Gt&&(ke.url!==Gt.url?pe.nor=encodeURIComponent(rn.Z.getRelativeUrl(ke.url,Gt.url)):Gt.range&&(pe.nrr=Gt.range)),Ne&&(pe.br=Ne),Re&&(pe.ot=Re),isNaN(Ye)||(pe.d=Ye),isNaN(dt)||(pe.mtp=dt),isNaN(at)||(pe.dl=at),isNaN(Je)||(pe.bl=Je),isNaN(ht)||(pe.tb=ht),isNaN(Bt)||Bt===1||(pe.pr=Bt),fe[ke.mediaType]&&(pe.bs=!0,fe[ke.mediaType]=!1),!ne[ke.mediaType]&&Se[ke.mediaType]||(pe.su=!0,ne[ke.mediaType]=!1,Se[ke.mediaType]=!0),pe}(Q)):Q.type===tt.w.INIT_SEGMENT_TYPE?function(){var ke=Le();return ke.ot="i",ke.su=!0,ke}():Q.type===tt.w.OTHER_TYPE||Q.type===tt.w.XLINK_EXPANSION_TYPE?function(){var ke=Le();return ke.ot="o",ke}():Q.type===tt.w.LICENSE?function(ke){var Re=Le();return Re.ot="k",Re}():null}catch(ke){return null}var Me,Ie}function Le(){var Q={},Me=me.get().streaming.cmcd.cid?me.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=me.get().streaming.cmcd.sid?me.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Me&&(Q.cid="".concat(Me)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function we(Q){try{var Me=ee.getCurrentBufferLevel(Q);return isNaN(Me)?null:100*parseInt(10*Me)}catch(Ie){return null}}function je(Q){try{B.pr=Q.playbackRate}catch(Me){}}function j(Q){try{var Me=L.getIsDynamic(Q.data)?"l":"v",Ie=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Me),B.sf="".concat(Ie)}catch(ke){}}function ue(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(fe[Q.mediaType]||(fe[Q.mediaType]=!0),ne[Q.mediaType]||(ne[Q.mediaType]=!0))}catch(Me){}}function ae(){for(var Q in fe)fe.hasOwnProperty(Q)&&(fe[Q]=!0);for(var Me in ne)ne.hasOwnProperty(Me)&&(ne[Me]=!0)}function se(Q){try{if(!Q)return null;var Me=Object.keys(Q).sort(function(Re,pe){return Re.localeCompare(pe)}),Ie=Me.length,ke=Me.reduce(function(Re,pe,Ne){return pe==="v"&&Q[pe]===1||(typeof Q[pe]=="string"&&pe!=="ot"&&pe!=="sf"&&pe!=="st"?Re+="".concat(pe,"=").concat(JSON.stringify(Q[pe])):Re+="".concat(pe,"=").concat(Q[pe]),Ne<Ie-1&&(Re+=",")),Re},"");return(ke=ke.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Re){return null}}return P={getQueryParameter:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=Ee(Q),Ie=function(Re){try{var pe=me.get().streaming.cmcd.enabledKeys;return Object.keys(Re).filter(function(Ne){return pe.includes(Ne)}).reduce(function(Ne,Ye){return Ne[Ye]=Re[Ye],Ne},{})}catch(Ne){return Re}}(Me),ke=se(Ie);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch(Re){return null}},getHeaderParameters:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=Ee(Q),Ie=Be(Me,ze(["br","d","ot","tb"])),ke=Be(Me,ze(["bl","dl","mtp","nor","nrr","su"])),Re=Be(Me,ze(["bs","rtp"])),pe=Be(Me,ze(["cid","pr","sf","sid","st","v"])),Ne={"CMCD-Object":se(Ie),"CMCD-Request":se(ke),"CMCD-Status":se(Re),"CMCD-Session":se(pe)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,headers:Ne}),Ne}return null}catch(Ye){return null}},setConfig:function(Q){Q&&(Q.abrController&&(V=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,je,this),ie.off(_.Z.MANIFEST_LOADED,j,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,ue,P),ie.off(_.Z.PLAYBACK_SEEKED,ae,P),ge()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,je,P),ie.on(_.Z.MANIFEST_LOADED,j,P),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,ue,P),ie.on(_.Z.PLAYBACK_SEEKED,ae,P),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,qe,P)}},L=Vn(ye).getInstance(),ge(),P}Jn.__dashjs_factory_name="CmcdModel";var ar=U.Z.getSingletonFactory(Jn);function br(L){return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},br(L)}function Lr(L,P){Lr=function(ne,fe){return new J(ne,void 0,fe)};var B=ro(RegExp),V=RegExp.prototype,ee=new WeakMap;function J(ne,fe,Se){var ye=B.call(this,ne,fe);return ee.set(ye,Se||ee.get(ne)),ye}function H(ne,fe){var Se=ee.get(fe);return Object.keys(Se).reduce(function(ye,ie){return ye[ie]=ne[Se[ie]],ye},Object.create(null))}return Yi(J,B),J.prototype.exec=function(ne){var fe=V.exec.call(this,ne);return fe&&(fe.groups=H(fe,this)),fe},J.prototype[Symbol.replace]=function(ne,fe){if(typeof fe=="string"){var Se=ee.get(this);return V[Symbol.replace].call(this,ne,fe.replace(/\$<([^>]+)>/g,function(ie,me){return"$"+Se[me]}))}if(typeof fe=="function"){var ye=this;return V[Symbol.replace].call(this,ne,function(){var ie=[];return ie.push.apply(ie,arguments),br(ie[ie.length-1])!=="object"&&ie.push(H(ie,ye)),fe.apply(this,ie)})}return V[Symbol.replace].call(this,ne,fe)},Lr.apply(this,arguments)}function Yi(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&pi(L,P)}function ro(L){var P=typeof Map=="function"?new Map:void 0;return ro=function(B){if(B===null||(V=B,Function.toString.call(V).indexOf("[native code]")===-1))return B;var V;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(P!==void 0){if(P.has(B))return P.get(B);P.set(B,ee)}function ee(){return Br(B,arguments,yi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),pi(ee,B)},ro(L)}function Br(L,P,B){return Br=qr()?Reflect.construct:function(V,ee,J){var H=[null];H.push.apply(H,ee);var ne=new(Function.bind.apply(V,H));return J&&pi(ne,J.prototype),ne},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function pi(L,P){return pi=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},pi(L,P)}function yi(L){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},yi(L)}var wo="static",io="dynamic",ea="cmsd-",Ci=ea+wo,Il=ea+io,lu="stream",_c=["mb","st","sf","v"],Nf={video:"v",audio:"a",text:"tt",stream:lu},ui=/^[-0-9]/;function Ds(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},V={}}function ne(ge){ge&&Object.keys(ge).forEach(function(qe){_c.includes(qe)||delete ge[qe]})}function fe(ge){return!ge||ge.toLowerCase()!=="false"&&(ui.test(ge)?parseInt(ge,10):ge.replace(/["]+/g,""))}function Se(ge){try{for(var qe={},De=ge.split(","),Be=0;Be<De.length;Be++){var ze=De[Be].split("="),Ee=ze[0],Le=fe(ze[1]);qe[Ee]=Le}return qe}catch(we){P.error("Failed to parse CMSD-Static response header value:",we)}}function ye(ge){try{for(var qe={},De=ge.split(","),Be=De[De.length-1].split(";"),ze=1;ze<Be.length;ze++){var Ee=Be[ze].split("="),Le=Ee[0],we=fe(Ee[1]);qe[Le]=we}return qe}catch(je){return P.error("Failed to parse CMSD-Dynamic response header value:",je),[]}}function ie(ge){return Nf[ge]||"o"}function me(ge,qe,De){var Be=ge===wo?B:V,ze=Be[qe]||{},Ee=Be[lu]||{};return ze[De]||Ee[De]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ge,qe){for(var De=null,Be=null,ze=ge.split("\r\n"),Ee=ze.length-1;Ee>=0;Ee--){var Le=ze[Ee].match(Lr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Le&&Le.groups){var we=Le.groups.key.toLowerCase(),je=Le.groups.value;switch(we){case Ci:De=Se(je),J.trigger(T.Z.CMSD_STATIC_HEADER,De);break;case Il:Be||(Be=ye(je))}}}var j=lu;return De&&De.ot?j=De.ot:qe&&(j=ie(qe)),ne(B[j]),ne(V[j]),De&&(B[j]=Object.assign(B[j]||{},De)),Be&&(V[j]=Object.assign(V[j]||{},Be)),{static:De,dynamic:Be}},getMaxBitrate:function(ge){var qe=ie(ge);return me(io,qe,"mb")||-1},getEstimatedThroughput:function(ge){var qe=ie(ge);return me(io,qe,"etp")||null},getResponseDelay:function(ge){var qe=ie(ge);return me(io,qe,"rd")||null},getRoundTripTime:function(ge){var qe=ie(ge);return me(io,qe,"rtt")||null}},P=(0,x.Z)(ee).getInstance().getLogger(L),H(),L}Ds.__dashjs_factory_name="CmsdModel";var _n=U.Z.getSingletonFactory(Ds);function Xn(){var L,P,B=this.context,V={};function ee(){P=(0,x.Z)(B).getInstance().getLogger(L)}function J(ne){for(var fe={},Se=0,ye=0,ie=0,me=0,ge=ne.length,qe=0;qe<ge;++qe)Se+=ne[qe].chunkDownloadTimeRelativeMS,ye+=ne[qe].bufferLevel,ie+=ne[qe].chunkDownloadTimeRelativeMS*ne[qe].bufferLevel,me+=ne[qe].chunkDownloadTimeRelativeMS*ne[qe].chunkDownloadTimeRelativeMS;return fe.m=(ie-Se*ye/ge)/(me-Se*Se/ge),fe.b=ye/ge-fe.m*Se/ge,function(De){return fe.m*De+fe.b}}function H(ne){var fe,Se=!0,ye=ne.reduce(function(ie,me){return ie+me.bufferLevelAtSegmentEnd},0)/ne.length;return ne.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(Se=!1),ie.bufferLevelAtSegmentEnd/ye<.8&&(Se=!1),fe?fe>ie.bitrate&&(Se=!1):fe=ie.bitrate}),Se}return L={setup:ee,addMeasurement:function(ne,fe,Se,ye,ie){ne&&ne.mediaType&&!V[ne.mediaType]&&(V[ne.mediaType]=[]);var me=ne.mediaInfo.bitrateList.find(function(ge){return ge.id===ne.representationId});V[ne.mediaType].push({index:ne.index,repId:ne.representationId,mediaType:ne.mediaType,requestTimeMS:ye,adjustedAvailabilityStartTimeMS:ne.availabilityStartTime.getTime(),segDurationMS:1e3*ne.duration,chunksDurationMS:Se.reduce(function(ge,qe){return ge+qe.chunkDownloadDurationMS},0),segmentBytes:Se.reduce(function(ge,qe){return ge+qe.chunkBytes},0),bitrate:me&&me.bandwidth,bitrateList:ne.mediaInfo.bitrateList,chunkMeasurements:Se,fetchDownloadDurationMS:fe,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(Se.slice(1))}),V[ne.mediaType].length>10&&V[ne.mediaType].shift()},getThroughputCapacityDelayMS:function(ne,fe){var Se=V[ne.mediaType]&&V[ne.mediaType].slice(-3);return!Se||Se.length<3?0:H(Se)?fe/4>250?250:fe/4:0},getEstimatedDownloadDurationMS:function(ne){var fe=V[ne.mediaType].slice(-1).pop(),Se=V[ne.mediaType].slice(-3),ye=fe.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;fe.bufferLevelAtSegmentStart=fe.getEstimatedBufferLevel(ye/2),fe.bufferLevelAtSegmentEnd=fe.getEstimatedBufferLevel(ye);var ie=H(Se),me=ie?.6:.8;if(fe.isBufferStable&&1.05*fe.segDurationMS<fe.fetchDownloadDurationMS)return fe.fetchDownloadDurationMS;if(!ie||fe.segDurationMS<fe.fetchDownloadDurationMS||fe.adjustedAvailabilityStartTimeMS<=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.segDurationMS)return .8*fe.fetchDownloadDurationMS;for(var ge=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.adjustedAvailabilityStartTimeMS,qe=0,De=0,Be=0,ze=0;ze<fe.chunkMeasurements.length;ze++){var Ee=fe.chunkMeasurements[ze];if(ge<De+Ee.chunkDownloadDurationMS)break;De+=Ee.chunkDownloadDurationMS,qe+=Ee.chunkBytes,Be++}if(ge<0&&P.warn("request time was before adjusted availibitly start time"),qe&&De&&Be>.2*fe.chunkMeasurements.length){var Le=qe/De,we=fe.segmentBytes/Le;return fe.fetchDownloadDurationMS<we?fe.fetchDownloadDurationMS*me:we*me}var je=fe.bitrate;return fe.bitrateList.some(function(j){if(j.bandwidth>fe.bitrate)return je=j.bandwidth,!0}),je===fe.bitrate?fe.fetchDownloadDurationMS*me:me*fe.segmentBytes*8*1e3/je}},ee(),L}Xn.__dashjs_factory_name="LowLatencyThroughputModel";var hr=U.Z.getSingletonFactory(Xn),ni=w(5717);function Mr(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Bi(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me=this.context,ge=L.errHandler,qe=L.dashMetrics,De=L.mediaPlayerModel,Be=L.requestModifier,ze=L.boxParser,Ee=L.errors,Le=L.requestTimeout||0,we=(0,m.Z)(me).getInstance(),je=(0,Ze.Z)(me).getInstance();function j(ue,ae){var se,Q=ue.request,Me=[],Ie=!0,ke=!0,Re=new Date,pe=Re,Ne=0,Ye=null,dt=null;if(!Be||!qe||!ge)throw new Error("config object is not correct or missing");var at,Je=function(en){Q.requestStartDate=Re,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||Re,Q.fileLoaderType=dt;var Jt=se.response?se.response.responseURL:null,Yt=se.response?se.response.status:null,Dn=se.response&&se.response.getAllResponseHeaders?se.response.getAllResponseHeaders():se.response?se.response.responseHeaders:null,Nn=Dn&&je.get().streaming.cmsd&&je.get().streaming.cmsd.enabled?ne.parseResponseHeaders(Dn,Q.mediaType):null;qe.addHttpRequest(Q,Jt,Yt,Dn,en?Me:null,Nn)},ht=function(en){ke=!1,Je(en),Q.type===tt.w.MPD_TYPE&&(qe.addManifestUpdate(Q),we.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},Bt=function(){if(Ye&&(clearTimeout(Ye),Ye=null),B.indexOf(se)!==-1&&(B.splice(B.indexOf(se),1),ke))if(ht(!1),ae>0){try{je.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===tt.w.MEDIA_SEGMENT_TYPE&&De.getRetryAttemptsForType(tt.w.MEDIA_SEGMENT_TYPE)===ae&&we.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:ue};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),j(ue,ae))},De.getRetryIntervalsForType(Q.type))}else{if(Q.type===tt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ge.error(new ce.Z(J[Q.type],Q.url+" is not available",{request:Q,response:se.response})),ue.error&&ue.error(Q,"error",se.response.statusText,se.response),ue.complete&&ue.complete(Q,se.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===tt.w.MEDIA_SEGMENT_TYPE?((at=Pr(me).create({requestModifier:Be,lowLatencyThroughputModel:Se,boxParser:ze})).setup({dashMetrics:qe}),dt=y.Z.FILE_LOADER_TYPES.FETCH):(at=(0,nn.Z)(me).create({requestModifier:Be}),dt=y.Z.FILE_LOADER_TYPES.XHR);var Gt=null,kt=Be.modifyRequestURL?Be.modifyRequestURL(Q.url):Q.url;if(je.get().streaming.cmcd&&je.get().streaming.cmcd.enabled){var Ft=je.get().streaming.cmcd.mode;if(Ft===y.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Yt=H.getQueryParameter(en);return Yt&&Jt.push(Yt),Jt}catch(Dn){return[]}}(Q);kt=rn.Z.addAditionalQueryParameterToUrl(kt,An)}else Ft===y.Z.CMCD_MODE_HEADER&&(Gt=H.getHeaderParameters(Q))}var rt=fe.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var mt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});kt=rn.Z.addAditionalQueryParameterToUrl(kt,mt)}Q.url=kt,se={url:kt,method:tt.w.GET,withCredentials:rt,request:Q,onload:function(){se.response.status>=200&&se.response.status<=299&&(ht(!0),ue.success&&ue.success(se.response.response,se.response.statusText,se.response.responseURL),ue.complete&&ue.complete(Q,se.response.statusText))},onend:Bt,onerror:Bt,progress:function(en){var Jt=new Date;Ie&&(Ie=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Me.push({s:pe,d:en.time?en.time:Jt.getTime()-pe.getTime(),b:[en.loaded?en.loaded-Ne:0]}),pe=Jt,Ne=en.loaded),Ye&&(clearTimeout(Ye),Ye=null),je.get().streaming.fragmentRequestProgressTimeout>0&&(Ye=setTimeout(function(){ye.warn("Abort request "+se.url+" due to progress timeout"),se.response.onabort=null,se.loader.abort(se),Bt()},je.get().streaming.fragmentRequestProgressTimeout)),ue.progress&&en&&ue.progress(en)},onabort:function(){Je(!0),Ye&&(clearTimeout(Ye),Ye=null),ue.abort&&ue.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Yt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Yt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";ye.warn(Jt)},loader:at,timeout:Le,headers:Gt};var Wt=new Date().getTime();if(isNaN(Q.delayLoadingTime)||Wt>=Q.delayLoadingTime)B.push(se),at.load(se);else{var Nt={httpRequest:se};V.push(Nt),Nt.delayTimeout=setTimeout(function(){if(V.indexOf(Nt)!==-1){V.splice(V.indexOf(Nt),1);try{Re=new Date,pe=Re,B.push(Nt.httpRequest),at.load(Nt.httpRequest)}catch(en){Nt.httpRequest.onerror()}}},Q.delayLoadingTime-Wt)}}return P={load:function(ue){ue.request?j(ue,De.getRetryAttemptsForType(ue.request.type)):ue.error&&ue.error(ue.request,"error")},abort:function(){ee.forEach(function(ue){clearTimeout(ue.timeout),ue.config.request&&ue.config.abort&&ue.config.abort(ue.config.request)}),ee=[],V.forEach(function(ue){return clearTimeout(ue.delayTimeout)}),V=[],B.forEach(function(ue){ue.request.type!==tt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(ue.onloadend=ue.onerror=ue.onprogress=void 0,ue.loader.abort(ue))}),B=[]}},ye=(0,x.Z)(me).getInstance().getLogger(P),B=[],V=[],ee=[],H=ar(me).getInstance(),ne=_n(me).getInstance(),Se=hr(me).getInstance(),fe=(0,ni.Z)(me).getInstance(),Mr(ie={},tt.w.MPD_TYPE,Ee.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,tt.w.XLINK_EXPANSION_TYPE,Ee.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,tt.w.INIT_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,tt.w.MEDIA_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,tt.w.INDEX_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,tt.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,tt.w.OTHER_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,P}Bi.__dashjs_factory_name="HTTPLoader";var Qr=U.Z.getClassFactory(Bi);function ta(){var L;function P(){L={}}function B(){P()}return B(),{getLoader:function(V){for(var ee in L)if(L.hasOwnProperty(ee)&&V.startsWith(ee))return L[ee];return Qr},registerLoader:function(V,ee){L[V]=ee},unregisterLoader:function(V){L[V]&&delete L[V]},unregisterAllLoader:P,reset:B}}ta.__dashjs_factory_name="SchemeLoaderFactory";var Pi=U.Z.getSingletonFactory(ta);function li(L){L=L||{};var P,B,V=this.context;return P=Pi(V).getInstance(),{load:function(ee){if(!B){var J=P.getLoader(ee&&ee.request?ee.request.url:null);B=J(V).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}li.__dashjs_factory_name="URLLoader";var Ao=U.Z.getClassFactory(li);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wi(L)}function Go(L,P){return Go=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Go(L,P)}function na(L,P){return!P||Wi(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function pt(L){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},pt(L)}var ra=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Go(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=pt(P);if(B){var ne=pt(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return na(this,J)});function ee(J){var H;return function(ne,fe){if(!(ne instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=V.call(this,J)).checkForExistenceOnly=!0,H}return ee}(Z.Z);function Ps(L){L=L||{};var P,B,V=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,ne=L.errors,fe=L.streamId;return P={checkForExistence:function(Se){var ye=function(me){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:Se,exists:me})};if(Se){var ie=new ra(Se.url);B.load({request:ie,success:function(){ye(!0)},error:function(){ye(!1)}})}else ye(!1)},load:function(Se){var ye=function(ie,me){ee.trigger(J.LOADING_COMPLETED,{request:Se,response:ie||null,error:me||null,sender:P})};Se?B.load({request:Se,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:Se,stream:ie.stream,streamId:fe}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:Se,response:ie.data||null,error:null,sender:P})},success:function(ie){ye(ie)},error:function(ie,me,ge){ye(void 0,new ce.Z(ne.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ge,me))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:P})}}):ye(void 0,new ce.Z(ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=Ao(V).create({errHandler:L.errHandler,errors:ne,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:y.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),P}Ps.__dashjs_factory_name="FragmentLoader";var pr=U.Z.getClassFactory(Ps);function Io(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}Io.__dashjs_factory_name="SegmentResponseModifier";var cu=U.Z.getSingletonFactory(Io);function bl(L){L=L||{};var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,ne=L.mediaPlayerModel,fe=L.dashMetrics,Se=(0,x.Z)(ee).getInstance(),ye=cu(ee).getInstance(),ie=L.streamInfo;function me(){return ie.id}function ge(){for(var De in V)V[De].reset();V={}}function qe(De){if(De.sender){var Be=De.request,ze=De.response,Ee=Be.isInitializationRequest(),Le=Be.mediaInfo.streamInfo;if(De.error&&(Be.mediaType===y.Z.AUDIO||Be.mediaType===y.Z.VIDEO||Be.mediaType===y.Z.TEXT&&Be.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:De.request.serviceLocation}),ze&&Le){var we=function(je,j,ue,ae){var se=new Qt;return se.streamId=ue,se.mediaInfo=j.mediaInfo,se.segmentType=j.type,se.start=j.startTime,se.duration=j.duration,se.end=se.start+se.duration,se.bytes=je,se.index=j.index,se.quality=j.quality,se.representationId=j.representationId,se.endFragment=ae,se}(ze,Be,ie.id,De.type!==T.Z.FRAGMENT_LOADING_PROGRESS);ye.modifyResponseAsync(we).then(function(je){J.trigger(Ee?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:je,request:Be},{streamId:Le.id,mediaType:Be.mediaType})}).catch(function(je){B.error(je),J.trigger(Ee?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:we,request:Be},{streamId:Le.id,mediaType:Be.mediaType})})}else B.warn("No "+Be.mediaType+" bytes to push or stream is inactive.")}}return P={getStreamId:me,getModel:function(De){var Be=V[De];return Be||(Be=X(ee).create({streamInfo:ie,type:De,dashMetrics:fe,fragmentLoader:pr(ee).create({dashMetrics:fe,mediaPlayerModel:ne,errHandler:H,requestModifier:(0,He.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Ae,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:me()}),debug:Se,eventBus:J,events:T.Z}),V[De]=Be),Be},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,qe,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,qe,this),ge()}},B=Se.getLogger(P),ge(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,qe,P),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,qe,P),P}bl.__dashjs_factory_name="FragmentController";var ms=U.Z.getClassFactory(bl),Ha=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},ku=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Fu(L){var P,B,V=this.context,ee=L.streamInfo;function J(ne){B.setTrackByIndex(ne)}function H(){B&&B.reset()}return P={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var ne=B.getTracks();ne&&ne.length>0&&J(0)},provide:function(ne,fe){if(typeof fe=="function"){var Se,ye,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||ne==null)fe(null);else{(ye=B.getThumbnailRequestForTime(ne))&&(ie.segmentDuration=ye.duration),Se=ne%ie.segmentDuration;var me=Math.floor(Se*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ge=new Ha;if(ge.width=Math.floor(ie.widthPerTile),ge.height=Math.floor(ie.heightPerTile),ge.x=Math.floor(me%ie.tilesHor)*ie.widthPerTile,ge.y=Math.floor(me/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(ne,function(De){ge.url=De,fe(ge)});if(ye)ge.url=ye.url,ie.segmentDuration=NaN;else{var qe=Math.floor(ne/ie.segmentDuration);ge.url=function(De,Be){var ze=Be+De.startNumber,Ee=(0,M.vi)(De.templateUrl,"Number",ze);return Ee=(0,M.vi)(Ee,"Time",(ze-1)*De.segmentDuration*De.timescale),Ee=(0,M.vi)(Ee,"Bandwidth",De.bandwidth),(0,M.eR)(Ee)}(ie,qe)}fe(ge)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var ne=B.getTracks(),fe=0;return ne.map(function(Se){var ye=new ku;return ye.mediaType=y.Z.IMAGE,ye.qualityIndex=fe++,ye.bitrate=Se.bitrate,ye.width=Se.width,ye.height=Se.height,ye})},reset:H},H(),B=(0,In.Z)(V).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),P}Fu.__dashjs_factory_name="ThumbnailController";var ia=U.Z.getClassFactory(Fu),oa=w(7417);function fu(L){var P;L=L||{};var B=[],V=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(ne){B.indexOf(ne)===-1&&(B.push(ne),V.trigger(ee,{entry:ne}))}return P={add:H,contains:function(ne){return!!(B.length&&ne&&ne.length)&&B.indexOf(ne)!==-1},reset:function(){B=[]}},J&&V.on(J,function(ne){H(ne.entry)},P),P}fu.__dashjs_factory_name="BlackListController";var vs=U.Z.getClassFactory(fu),Tc=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT,y.Z.MUXED,y.Z.IMAGE];function Nr(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee,Le=this.context,we=(0,m.Z)(Le).getInstance(),je=(0,Tt.Z)(Le).getInstance(),j=L.manifestModel,ue=L.mediaPlayerModel,ae=L.dashMetrics,se=L.manifestUpdater,Q=L.adapter,Me=L.timelineConverter,Ie=L.capabilities,ke=L.errHandler,Re=L.abrController,pe=L.playbackController,Ne=L.eventController,Ye=L.mediaController,dt=L.protectionController,at=L.textController,Je=L.videoModel,ht=L.streamInfo,Bt=L.settings;function Gt(bt,Sn){return new Promise(function(En,Lt){Jt(),ye=!0,Dn();var On=Je.getElement(),st=[];Tc.forEach(function(nt){(nt!==y.Z.TEXT||bt)&&(nt!==y.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&st.push(kt(nt,bt))}),Promise.all(st).then(function(){return nt=Sn,new Promise(function(qt){var Ve={},Ke=V.map(function(Dt){return Dt.createBufferSinks(nt)});Promise.all(Ke).then(function(Dt){Dt.forEach(function(fn){fn&&(Ve[fn.getType()]=fn)}),qt(Ve)}).catch(function(){qt(Ve)})});var nt}).then(function(nt){if(ye=!1,V.length===0){var qt="No streams to play.";ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qt,j.getValue())),B.fatal(qt)}else Nn();bt&&at.createTracks(ht),En(nt)}).catch(function(nt){Lt(nt)})})}function kt(bt,Sn){var En,Lt=Q.getAllMediaInfoForType(ht,bt),On=[],st=null;if(!Lt||Lt.length===0)return B.info("No "+bt+" data."),Promise.resolve();bt===y.Z.VIDEO&&(ne=!0),bt===y.Z.AUDIO&&(fe=!0);for(var nt=0,qt=Lt.length;nt<qt;nt++)st=Lt[nt],bt===y.Z.TEXT&&st.isEmbedded&&(at.addEmbeddedTrack(ht,st),On.push(st)),Ft(st)&&Ye.addTrack(st);if(On.length>0&&(Ye.setInitialMediaSettingsForType(bt,ht),at.addMediaInfosToBuffer(ht,bt,On)),Lt=Lt.filter(function(Ke){return!Ke.isEmbedded}),Lt.length===0)return Promise.resolve();if(bt===y.Z.IMAGE)return(me=ia(Le).create({streamInfo:ht,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Be,eventBus:we,events:T.Z,dashConstants:v.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();we.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:ht,mediaInfo:st}),Ye.setInitialMediaSettingsForType(bt,ht);var Ve=function(Ke,Dt){var fn=Ke&&Ke.length>0?Ke[0]:null,Tn=ie.getModel(fn?fn.type:null),sr=fn?fn.type:null,Zr=fn?fn.mimeType:null,Ii=fn?fn.isFragmented:null,zr=hn(Le).create({streamInfo:ht,type:sr,mimeType:Zr,timelineConverter:Me,adapter:Q,manifestModel:j,mediaPlayerModel:ue,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:Re,playbackController:pe,mediaController:Ye,textController:at,errHandler:ke,settings:Bt,boxParser:De,segmentBlacklistController:ge});zr.initialize(Dt,ne,Ii),V.push(zr);for(var oo=0;oo<Ke.length;oo++)zr.addMediaInfo(Ke[oo]);return sr===y.Z.TEXT&&at.addMediaInfosToBuffer(ht,sr,Ke,Tn),zr}(Lt,Sn);return(En=Ye.getCurrentTrackFor(bt,ht.id))?(Re.updateTopQualityIndex(En),Ve.selectMediaInfo(bt===y.Z.TEXT&&En.isEmbedded?Lt[0]:En)):Promise.resolve()}function Ft(bt){var Sn,En=bt?bt.type:null;return En===y.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,j.getValue())),!1):!(En!==y.Z.TEXT&&En!==y.Z.IMAGE&&bt.contentProtection&&!Ie.supportsEncryptedMedia()&&(ke.error(new ce.Z(Ae.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ae.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(bt){for(var Sn=V?V.length:0,En=0;En<Sn;En++){var Lt=V[En].getFragmentModel();Lt.abortRequests(),Lt.resetInitialSettings(),V[En].reset(!1,bt)}at&&at.deactivateStream(ht),V=[],J=!1,H=!1,Fn(!1),mt(!1),we.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:ht})}function rt(bt){An(bt),ee=!1,ne=!1,fe=!1,Se={},ye=!1,ze=!1,Ee=[]}function mt(bt){ze=bt}function Wt(){return ht?ht.start:NaN}function Nt(){return ht?ht.id:null}function en(){return ht}function Jt(){if(!Je||!Re)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Yt(bt){bt.error&&(ke.error(bt.error),B.fatal(bt.error.message))}function Dn(){if(Ne){var bt=Q.getEventsFor(ht);bt&&bt.length>0&&Ne.addInlineEvents(bt,ht.id)}}function Nn(){for(var bt=V.length,Sn=Se.audio||Se.video?new ce.Z(Ae.DATA_UPDATE_FAILED_ERROR_CODE,Ae.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<bt;En++)if(V[En].isUpdating()||ye)return;if(dt){dt.clearMediaInfoArray();for(var Lt=0;Lt<bt&&V[Lt];Lt++){var On=V[Lt].getType(),st=V[Lt].getMediaInfo();if(On===y.Z.AUDIO||On===y.Z.VIDEO||On===y.Z.TEXT&&st.isFragmented){var nt=V[Lt].getMediaInfo();nt&&dt.initializeForMedia(nt)}}dt.handleKeySystemFromManifest()}Sn?ke.error(Sn):ee||(ee=!0,Je.waitForReadyState(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){we.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:ht})}))}function rr(){var bt=un(),Sn=bt.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!bt[En].isBufferingCompleted()&&(bt[En].getType()===y.Z.AUDIO||bt[En].getType()===y.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",bt[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,we.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:ht},{streamInfo:ht})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(bt){Se[bt.mediaType]=bt.error,Nn()}function It(bt){Ne&&Ne.addInbandEvents(bt.events,ht.id)}function $t(bt){return bt&&bt.type?Zt(bt.type):null}function Zt(bt){return bt?un().filter(function(Sn){return Sn.getType()===bt})[0]:null}function un(){for(var bt,Sn,En=[],Lt=0;Lt<V.length;Lt++)(bt=(Sn=V[Lt]).getType())!==y.Z.AUDIO&&bt!==y.Z.VIDEO&&bt!==y.Z.TEXT||En.push(Sn);return En}function vn(bt,Sn){var En=en(),Lt=Sn.getStreamInfo();if(!Lt||!En)return!0;var On=Q.getAdaptationForType(Lt.index,bt,Lt),st=Q.getAdaptationForType(En.index,bt,En);return On&&st?!(!Pn(st)&&Pn(On)):!On&&!st}function Pn(bt){return!!bt&&!!(bt.ContentProtection||bt.Representation_asArray&&bt.Representation_asArray.length>0&&bt.Representation_asArray[0].ContentProtection)}function xn(bt,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!bt||!bt.hasOwnProperty("getStreamInfo"))return!1;var Lt=bt.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Lt||!On)return!1;var st=Q.getAdaptationForType(Lt.index,Sn,Lt),nt=Q.getAdaptationForType(On.index,Sn,On);if(!st||!nt)return!st&&!nt;var qt=st&&nt&&st.mimeType===nt.mimeType,Ve=nt.Representation_asArray.map(function(Tn){return Tn.codecs}),Ke=st.Representation_asArray.map(function(Tn){return Tn.codecs}),Dt=Ke.some(function(Tn){return Ve.indexOf(Tn)>-1}),fn=Ke.some(function(Tn){return Ve.some(function(sr){return Ie.codecRootCompatibleWithCodec(sr,Tn)})});return Dt||fn&&qt}function Fn(bt){qe=bt}function Gn(){return qe}return P={initialize:function(){we.on(T.Z.BUFFERING_COMPLETED,rr,P),we.on(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.on(T.Z.INBAND_EVENTS,It,P),dt&&(we.on(T.Z.KEY_ERROR,Yt,P),we.on(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.on(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.on(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.on(T.Z.KEY_SESSION_CREATED,Yt,P),we.on(T.Z.KEY_STATUSES_CHANGED,Yt,P)),at.initializeForStream(ht),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht})},getStreamId:function(){return ht?ht.id:null},activate:function(bt,Sn){return new Promise(function(En,Lt){if(!J)return Gn()?(J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),void En(Sn)):void function(On,st){return Gt(On,st)}(bt,Sn).then(function(On){J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),En(On)}).catch(function(On){Lt(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return ht?ht.duration:NaN},getStartTime:Wt,getId:Nt,getStreamInfo:en,getHasAudioTrack:function(){return fe},getHasVideoTrack:function(){return ne},startPreloading:function(bt,Sn){return new Promise(function(En,Lt){Gn()?Lt():(B.info("[startPreloading] Preloading next stream with id ".concat(Nt())),Fn(!0),Gt(bt,Sn).then(function(){for(var On=0;On<V.length&&V[On];On++)V[On].setExplicitBufferingTime(Wt()),V[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Lt()}))})},initializeForTextWithMediaSource:function(bt){return new Promise(function(Sn,En){kt(y.Z.TEXT,bt).then(function(){return(Lt=Zt(y.Z.TEXT))?Lt.createBufferSinks():Promise.resolve();var Lt}).then(function(){at.createTracks(ht),Sn()}).catch(function(Lt){En(Lt)})})},getThumbnailController:function(){return me},getBitrateListFor:function(bt){if(Jt(),bt===y.Z.IMAGE)return me?me.getBitrateList():[];var Sn=function(En){for(var Lt=null,On=0;On<V.length;On++)if((Lt=V[On]).getType()===En)return Lt.getMediaInfo();return null}(bt);return Re.getBitrateList(Sn)},updateData:function(bt){return new Promise(function(Sn){ye=!0,ht=bt,Ne&&Dn();for(var En=[],Lt=0,On=V.length;Lt<On;Lt++){var st=V[Lt],nt=st.getMediaInfo();En.push(st.updateStreamInfo(ht));var qt=Q.getAllMediaInfoForType(ht,st.getType());if(qt=qt.filter(function(Dt){return!Dt.isEmbedded})){st.clearMediaInfoArray();for(var Ve=0;Ve<qt.length;Ve++){var Ke=qt[Ve];st.addMediaInfo(qt[Ve]),Q.areMediaInfosEqual(nt,Ke)&&(Re.updateTopQualityIndex(Ke),En.push(st.selectMediaInfo(Ke)))}}}Promise.all(En).then(function(){for(En=[];Ee.length>0;){var Dt=Ee.pop(),fn=Dt.newMediaInfo,Tn=$t(Dt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(fn))}return Promise.all(En)}).then(function(){ye=!1,Nn(),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht}),Sn()})})},reset:function(bt){ie&&(ie.reset(),ie=null),Re&&ht&&Re.clearDataForStream(ht.id),ge&&(ge.reset(),ge=null),rt(bt),ht=null,we.off(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.off(T.Z.BUFFERING_COMPLETED,rr,P),we.off(T.Z.INBAND_EVENTS,It,P),dt&&(we.off(T.Z.KEY_ERROR,Yt,P),we.off(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.off(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.off(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.off(T.Z.KEY_SESSION_CREATED,Yt,P),we.off(T.Z.KEY_STATUSES_CHANGED,Yt,P))},getProcessors:un,setMediaSource:function(bt){return new Promise(function(Sn,En){for(var Lt=[],On=0;On<V.length;)Ft(V[On].getMediaInfo())?(Lt.push(V[On].setMediaSource(bt)),On++):(V[On].reset(),V.splice(On,1));Promise.all(Lt).then(function(){for(var st=0;st<V.length;st++)V[st].dischargePreBuffer();if(V.length===0){var nt="No streams to play.";ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,nt+"nostreams",j.getValue())),B.fatal(nt)}Sn()}).catch(function(st){B.error(st),En(st)})})},isMediaCodecCompatible:function(bt){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return xn(bt,y.Z.VIDEO,Sn)&&xn(bt,y.Z.AUDIO,Sn)},isProtectionCompatible:function(bt){return!bt||vn(y.Z.VIDEO,bt)&&vn(y.Z.AUDIO,bt)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return ze},setIsEndedEventSignaled:mt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var bt=V.length,Sn=0;Sn<bt&&V[Sn];Sn++)V[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(bt){if(J&&ht){H=!1;var Sn=bt.newMediaInfo,En=j.getValue();Q.setCurrentMediaInfo(ht.id,Sn.type,Sn);var Lt=$t(Sn);if(Lt){var On=pe.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(Ee.push(bt),se.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),se.refreshManifest())):Lt.selectMediaInfo(Sn).then(function(){Sn.type!==y.Z.VIDEO&&Sn.type!==y.Z.AUDIO||Re.updateTopQualityIndex(Sn),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function(bt){var Sn=Zt(bt.mediaType);Sn&&Sn.prepareQualityChange(bt)}},function(){try{Be=(0,x.Z)(Le).getInstance(),B=Be.getLogger(P),rt(),De=(0,oa.Z)(Le).getInstance(),ge=vs(Le).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=ms(Le).create({streamInfo:ht,mediaPlayerModel:ue,dashMetrics:ae,errHandler:ke,settings:Bt,boxParser:De,dashConstants:v.Z,urlUtils:je})}catch(bt){throw bt}}(),P}Nr.__dashjs_factory_name="Stream";var ys=U.Z.getClassFactory(Nr),Es=function L(P){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||null,this.type=tt.w.CONTENT_STEERING_TYPE,this.responseType="json"},Wr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Sc(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De=this.context,Be=(0,Tt.Z)(De).getInstance();function ze(Re){j(Re,"baseUrl")}function Ee(Re){j(Re,"location")}function Le(Re){if(Re&&Re.request&&Re.request.serviceLocation&&Re.request.requestStartDate&&Re.request.requestEndDate&&!isNaN(Re.request.bytesTotal)){var pe=Re.request.serviceLocation,Ne=Re.request.requestEndDate.getTime()-Re.request.requestStartDate.getTime();je(pe,parseInt(8*Re.request.bytesTotal/Ne*1e3))}}function we(Re){Re&&Re.httpRequest&&Re.httpRequest._serviceLocation&&!isNaN(Re.throughput)&&je(Re.httpRequest._serviceLocation,1e3*Re.throughput)}function je(Re,pe){ee[Re]||(ee[Re]=[]),ee[Re].push(pe),ee[Re].length>4&&ee[Re].shift()}function j(Re,pe){if(Re&&Re.request&&Re.request.serviceLocation){var Ne=Re.request.serviceLocation;V[pe].all.indexOf(Ne)===-1&&V[pe].all.push(Ne),V[pe].current=Ne}}function ue(){var Re=ye.getValue(),pe=qe.getContentSteering(Re);return pe||(pe=me.getServiceDescriptionSettings().contentSteering),pe}function ae(){return new Promise(function(Re){try{var pe=ue();if(!pe||!pe.serverUrl)return void Re();var Ne=function(dt){var at=dt.serverUrl;B&&B.reloadUri&&(at=Be.isRelative(B.reloadUri)?Be.resolve(B.reloadUri,dt.serverUrl):B.reloadUri);var Je=[],ht=V.baseUrl.all.concat(V.location.all);if(ht.length>0){var Bt=ht.map(function(Ft){var An=function(rt){if(!rt||!ee[rt]||ee[rt].length===0)return-1;var mt=ee[rt].reduce(function(Wt,Nt){return Wt+Nt})/ee[rt].length;return parseInt(mt)}(Ft);return{serviceLocation:Ft,throughput:An}});Bt.sort(function(Ft,An){return An.throughput-Ft.throughput});var Gt="",kt="";Bt.forEach(function(Ft,An){An!==0&&(Gt="".concat(Gt,","),Ft.throughput>-1&&(kt="".concat(kt,","))),Gt="".concat(Gt).concat(Ft.serviceLocation),Ft.throughput>-1&&(kt="".concat(kt).concat(Ft.throughput))}),Je.push({key:"_DASH_pathway",value:'"'.concat(Gt,'"')}),Je.push({key:"_DASH_throughput",value:kt})}return at=rn.Z.addAditionalQueryParameterToUrl(at,Je)}(pe),Ye=new Es(Ne);H.load({request:Ye,success:function(dt){(function(at){at&&at[v.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(at[v.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Wr).version=at[v.Z.CONTENT_STEERING_RESPONSE.VERSION],at[v.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(at[v.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=at[v.Z.CONTENT_STEERING_RESPONSE.TTL]),at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(Je){return function(ht){return ht[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST]}(Je)})),Me())})(dt),ge.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:Ne}),Re()},error:function(dt,at,Je,ht){(function(Bt,Gt){try{switch(P.warn("Error fetching data from content steering server",Bt),Gt.status){case 410:break;case 429:var kt=Gt&&Gt.getResponseHeader?Gt.getResponseHeader("retry-after"):null;kt!==null&&(B||(B={}),B.ttl=parseInt(kt)),Me();break;default:Me()}}catch(Ft){P.error(Ft)}})(dt,ht),Re(dt)},complete:function(){V.baseUrl.all=se(V.baseUrl),V.location.all=se(V.location)}})}catch(dt){Re(dt)}})}function se(Re){return Re.all&&Re.all.length!==0&&Re.current?Re.all.filter(function(pe){return pe===Re.current}):[]}function Q(Re){try{var pe=[];return Re&&Re.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(Ne){var Ye=Re.filter(function(Bt){return Ne[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Bt.serviceLocation}),dt=null;if(Ye&&Ye.length>0&&(dt=Ye[0]),dt){var at=new URL(dt.url),Je=Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST];Je=rn.Z.stringHasProtocol(Je)?Je:"".concat(at.protocol,"//").concat(Je);var ht={synthesizedUrl:"".concat(Je).concat(at.pathname),serviceLocation:Ne[v.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:dt};pe.push(ht)}}),pe}catch(Ne){return P.error(Ne),[]}}function Me(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function Ie(){J&&clearTimeout(J),J=null}function ke(){B=null,ee={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Ie()}return L={reset:function(){ke(),ge.off(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.off(_.Z.MANIFEST_LOADING_STARTED,Ee,L),ge.off(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)},setConfig:function(Re){Re&&(Re.adapter&&(qe=Re.adapter),Re.errHandler&&(ne=Re.errHandler),Re.dashMetrics&&(fe=Re.dashMetrics),Re.mediaPlayerModel&&(Se=Re.mediaPlayerModel),Re.requestModifier&&(ie=Re.requestModifier),Re.manifestModel&&(ye=Re.manifestModel),Re.serviceDescriptionController&&(me=Re.serviceDescriptionController),Re.eventBus&&(ge=Re.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var Re=ue();return!!Re&&Re.queryBeforeStart},getSteeringDataFromManifest:ue,stopSteeringRequestTimer:Ie,getSynthesizedBaseUrlElements:function(Re){try{return Q(Re).map(function(pe){var Ne=new Qn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne.dvbPriority=pe.reference.dvbPriority,Ne.dvbWeight=pe.reference.dvbWeight,Ne.availabilityTimeOffset=pe.reference.availabilityTimeOffset,Ne.availabilityTimeComplete=pe.reference.availabilityTimeComplete,Ne})}catch(pe){return P.error(pe),[]}},getSynthesizedLocationElements:function(Re){try{return Q(Re).map(function(pe){var Ne=new Zn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne})}catch(pe){return P.error(pe),[]}},initialize:function(){H=Ao(De).create({errHandler:ne,dashMetrics:fe,mediaPlayerModel:Se,requestModifier:ie,errors:Ae}),ge.on(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.on(_.Z.MANIFEST_LOADING_STARTED,Ee,L),ge.on(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)}},P=(0,x.Z)(De).getInstance().getLogger(L),ke(),L}Sc.__dashjs_factory_name="ContentSteeringController";var Ia=U.Z.getSingletonFactory(Sc);function Cl(){var L,P,B,V=this.context,ee=(0,Ze.Z)(V).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(ne){var fe=B.getCurrentSteeringResponseData();return fe&&fe.pathwayPriority&&fe.pathwayPriority.length>0?function(){for(var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,me=null,ge=function(){var qe=Se[ie],De=ye.findIndex(function(Be){return Be.serviceLocation&&Be.serviceLocation===qe});if(De!==-1&&!P.contains(ye[De].serviceLocation))return me=ye[De],"break";ie+=1};ie<Se.length&&ge()!=="break";);return me}(fe.pathwayPriority,ne):null}(J)),H||(H=function(ne){return ne[0]}(J)),H},setConfig:function(J){J.blacklistController&&(P=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){P.reset()}},P=vs(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Ia(V).getInstance(),L}Cl.__dashjs_factory_name="LocationSelector";var aa=U.Z.getClassFactory(Cl);function _s(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=(0,Tt.Z)(qe).getInstance();function ze(){B=NaN,H=!1,ee=!0,J=!1,Ee()}function Ee(){V!==null&&(clearTimeout(V),V=null)}function Le(Ie){Ee(),J||(isNaN(Ie)&&!isNaN(B)&&(Ie=1e3*B),isNaN(Ie)||(P.debug("Refresh manifest in "+Ie+" milliseconds."),V=setTimeout(ue,Ie)))}function we(){var Ie=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var ke=fe.getValue(),Re=ke.url,pe=null,Ne=ye.getPatchLocation(ke),Ye=Se.select(Ne),dt=null;if(Ye&&!Ie)Re=Ye.url,pe=Ye.serviceLocation,dt=Ye.queryParams;else{var at=je(ke),Je=Se.select(at);Je&&(Re=Je.url,pe=Je.serviceLocation,dt=Je.queryParams)}Be.isRelative(Re)&&(Re=Be.resolve(Re,ke.url)),ne.load(Re,pe,dt)}function je(Ie){var ke=ye.getLocation(Ie),Re=me.getSynthesizedLocationElements(ke);return ke.concat(Re)}function j(Ie){if(Ie){if(ye.getIsPatch(Ie)){var ke=Ie;Ie=fe.getValue();var Re=ye.isPatchValid(Ie,ke),pe=Re;if(Re){var Ne=ye.getPublishTime(Ie);pe=ye.applyPatchToManifest(Ie,ke);var Ye=ye.getPublishTime(Ie);pe=Ne.getTime()!=Ye.getTime()}if(!pe)return P.debug("Patch provided is invalid, performing full manifest refresh"),void we(!0);Ie.loadedTime=new Date}}else(Ie=fe.getValue()).loadedTime=new Date;if(fe.getValue()&&fe.getValue().type===v.Z.DYNAMIC&&Ie.type===v.Z.STATIC)return De.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);fe.setValue(Ie);var dt=new Date,at=(dt.getTime()-Ie.loadedTime.getTime())/1e3;1e3*(B=ye.getManifestUpdatePeriod(Ie,at))>2147483647&&(B=2147483647e-3),De.trigger(T.Z.MANIFEST_UPDATED,{manifest:Ie}),P.info("Manifest has been refreshed at "+dt+"["+dt.getTime()/1e3+"] "),ee||Le()}function ue(){ee||(H?Le(ge.get().streaming.manifestUpdateRetryInterval):we())}function ae(Ie){Ie.error?Ie.error.code===Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(Ie.error):j(Ie.manifest)}function se(){ee=!1,Le()}function Q(){(ee=!ge.get().streaming.scheduling.scheduleWhilePaused)&&Ee()}function Me(){H=!1}return L={initialize:function(){ze(),De.on(T.Z.STREAMS_COMPOSED,Me,this),De.on(_.Z.PLAYBACK_STARTED,se,this),De.on(_.Z.PLAYBACK_PAUSED,Q,this),De.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(Ie){j(Ie)},refreshManifest:we,getIsUpdating:function(){return H},setConfig:function(Ie){Ie&&(Ie.manifestModel&&(fe=Ie.manifestModel),Ie.adapter&&(ye=Ie.adapter),Ie.manifestLoader&&(ne=Ie.manifestLoader),Ie.errHandler&&(ie=Ie.errHandler),Ie.locationSelector&&(Se=Ie.locationSelector),Ie.settings&&(ge=Ie.settings),Ie.contentSteeringController&&(me=Ie.contentSteeringController))},reset:function(){De.off(_.Z.PLAYBACK_STARTED,se,this),De.off(_.Z.PLAYBACK_PAUSED,Q,this),De.off(T.Z.STREAMS_COMPOSED,Me,this),De.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),ze()}},P=(0,x.Z)(qe).getInstance().getLogger(L),Se=aa(qe).create(),L}_s.__dashjs_factory_name="ManifestUpdater";var Vr=U.Z.getClassFactory(_s);function Ka(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),Ee=(0,Tt.Z)(Be).getInstance();function Le(){ne=[],fe=[],Se=null,ye=null,me=null,ie=NaN,B=!1,V=!1,ge=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function we(){ee.get().streaming.utcSynchronization.enabled&&!B&&!V&&me&&me.value&&me.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(ye&&(Date.now()-ye)/1e3<30||(ne=[],V=!0,je(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function je(Je){try{if(Je<=0)return void dt();var ht=Date.now();J[me.schemeIdUri](me.value,function(Bt){var Gt=Date.now(),kt=ue(ht,Gt,Bt);ne.push(kt),je(Je-1)},function(){dt()})}catch(Bt){dt()}}function j(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ht=Je||0;if(!fe||fe.length===0||ht>=fe.length)ae();else{var Bt=fe[ht];if(Bt)if(J.hasOwnProperty(Bt.schemeIdUri)){var Gt=new Date().getTime();J[Bt.schemeIdUri](Bt.value,function(kt){var Ft=new Date().getTime(),An=ue(Gt,Ft,kt);me=Bt,ae(An)},function(){j(ht+1)})}else j(ht+1);else ae()}}function ue(Je,ht,Bt){return Bt-(ht-(ht-Je)/2)}function ae(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ht=isNaN(Je);ht&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Ne():Ye(ht,Je)}function se(Je){var ht=Date.parse(Je);return isNaN(ht)&&(ht=function(Bt){var Gt,kt,Ft=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Bt);return Gt=Date.UTC(parseInt(Ft[1],10),parseInt(Ft[2],10)-1,parseInt(Ft[3],10),parseInt(Ft[4],10),parseInt(Ft[5],10),Ft[6]&&(parseInt(Ft[6],10)||0),Ft[7]&&1e3*parseFloat(Ft[7])||0),Ft[9]&&Ft[10]&&(kt=60*parseInt(Ft[9],10)+parseInt(Ft[10],10),Gt+=(Ft[8]==="+"?-1:1)*kt*60*1e3),new Date(Gt).getTime()}(Je)),ht}function Q(Je){return Date.parse(Je)}function Me(Je){return Date.parse(Je)}function Ie(Je,ht,Bt){Bt()}function ke(Je,ht,Bt){var Gt=se(Je);isNaN(Gt)?Bt():ht(Gt)}function Re(Je,ht,Bt,Gt,kt){var Ft,An,rt=!1,mt=new XMLHttpRequest,Wt=kt?tt.w.HEAD:tt.w.GET,Nt=ht.match(/\S+/g);if(ht=Nt.shift(),Ft=function(){rt||(rt=!0,Nt.length?Re(Je,Nt.join(" "),Bt,Gt,kt):Gt())},An=function(){var Jt,Yt;mt.status===200&&(Jt=kt?mt.getResponseHeader("Date"):mt.response,Yt=Je(Jt),isNaN(Yt)||(Bt(Yt),rt=!0))},Ee.isRelative(ht)){var en=De.resolve();en&&(ht=Ee.resolve(ht,en.url))}mt.open(Wt,ht),mt.timeout=5e3,mt.onload=An,mt.onloadend=Ft,mt.send()}function pe(Je,ht,Bt){Re(Me,Je,ht,Bt,!0)}function Ne(){var Je=H.getLatestMPDRequestHeaderValueByID("Date"),ht=Je!==null?new Date(Je).getTime():Number.NaN;isNaN(ht)?Ye(!0):Ye(!1,ht-Date.now())}function Ye(Je,ht){if(isNaN(ie)||isNaN(ht)||Je||function(Gt){try{var kt,Ft=at(Gt),An=isNaN(ge)?30:ge,rt=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,mt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Wt=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ft?(kt=Math.min(An*rt,mt),P.debug("Increasing timeBetweenSyncAttempts to ".concat(kt))):(kt=Math.max(An/rt,Wt),P.debug("Decreasing timeBetweenSyncAttempts to ".concat(kt))),ge=kt}catch(Nt){}}(ht),!Je&&!isNaN(ht)){Se=Date.now(),B=!1;var Bt=isNaN(ie);ie=ht,Bt&&we(),P.debug("Completed UTC sync. Setting client - server offset to ".concat(ht))}Je&&(me=null,B=!1,qe.error(new ce.Z(Ae.TIME_SYNC_FAILED_ERROR_CODE,Ae.TIME_SYNC_FAILED_ERROR_MESSAGE))),ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ht}),ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function dt(){if(ne&&ne.length!==0){var Je=ne.reduce(function(ht,Bt){return ht+Bt},0)/ne.length;at(Je)?P.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(P.debug("Completed background UTC sync. Setting client - server offset to ".concat(Je)),ie=Je,ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,ye=Date.now()}}function at(Je){try{if(isNaN(ie))return!0;var ht=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Je>=ie-ht&&Je<=ie+ht}catch(Bt){return!0}}return L={initialize:function(){Le(),J={"urn:mpeg:dash:utc:http-head:2014":pe,"urn:mpeg:dash:utc:http-xsdate:2014":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2014":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":ke,"urn:mpeg:dash:utc:http-head:2012":pe,"urn:mpeg:dash:utc:http-xsdate:2012":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2012":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":ke,"urn:mpeg:dash:utc:http-ntp:2014":Ie,"urn:mpeg:dash:utc:ntp:2014":Ie,"urn:mpeg:dash:utc:sntp:2014":Ie}},attemptSync:function(Je,ht){fe=Je,B||(function(Bt){try{if(!Bt||!ee.get().streaming.utcSynchronization.enabled)return!1;var Gt=isNaN(ge)?30:ge;return!(Se&&Gt&&!isNaN(Gt))||(Date.now()-Se)/1e3>=Gt}catch(kt){return!0}}(ht)?(B=!0,j()):ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Je){Je&&(Je.dashMetrics&&(H=Je.dashMetrics),Je.baseURLController&&(De=Je.baseURLController),Je.errHandler&&(qe=Je.errHandler),Je.settings&&(ee=Je.settings))},reset:function(){Le(),ze.off(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L)}},P=(0,x.Z)(Be).getInstance().getLogger(L),ze.on(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L),L}Ka.__dashjs_factory_name="TimeSyncController";var Va=U.Z.getSingletonFactory(Ka);Va.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(Ka.__dashjs_factory_name,Va);var za=Va;function xf(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(ne){var fe=window.URL.createObjectURL(P);return ne.setSource(fe),V==="managedMediaSource"&&(ne.setDisableRemotePlayback(!0),P.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),P.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),fe},createMediaSource:function(){var ne="WebKitMediaSource"in window,fe="MediaSource"in window;return"ManagedMediaSource"in window?(P=new ManagedMediaSource,V="managedMediaSource",ee.info("Created ManagedMediaSource")):fe?(P=new MediaSource,V="mediaSource",ee.info("Created MediaSource")):ne&&(P=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),P},detachMediaSource:function(ne){ne.setSource(null)},setConfig:function(ne){ne&&ne.settings&&(B=ne.settings)},setDuration:function ne(fe){P&&P.readyState==="open"&&(fe===null&&isNaN(fe)||P.duration!==fe&&(fe!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(fe=Math.pow(2,32)),function(Se){for(var ye=Se.sourceBuffers,ie=0;ie<ye.length;ie++)if(ye[ie].updating)return!0;return!1}(P)?setTimeout(ne.bind(null,fe),50):(ee.info("Set MediaSource duration:"+fe),P.duration=fe)))},setSeekable:function(ne,fe){P&&typeof P.setLiveSeekableRange=="function"&&typeof P.clearLiveSeekableRange=="function"&&P.readyState==="open"&&ne>=0&&ne<fe&&(P.clearLiveSeekableRange(),P.setLiveSeekableRange(ne,fe))},signalEndOfStream:function(ne){if(ne&&ne.readyState==="open"){for(var fe=ne.sourceBuffers,Se=0;Se<fe.length;Se++)if(fe[Se].updating||fe[Se].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),ne.endOfStream()}}},ee=(0,x.Z)(J).getInstance().getLogger(L),L}xf.__dashjs_factory_name="MediaSourceController";var Nh=U.Z.getSingletonFactory(xf);function bo(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie="urn:mpeg:dash:event:2012",me="discarded",ge="updated",qe="added",De=this.context,Be=(0,m.Z)(De).getInstance();function ze(){if(!H||!ne)throw new Error("setConfig function has to be called previously")}function Ee(){ye=!1,B={},V={},ee=null,Se=!1,J=Date.now()/1e3}function Le(){try{if(!Se){Se=!0;var Ie=ne.getTime(),ke=Ie-J;ke=J>0?Math.max(0,ke):0,we(V,ke,Ie),we(B,ke,Ie),je(V),je(B),J=Ie,Se=!1}}catch(Re){Se=!1,P.error(Re)}}function we(Ie,ke,Re){try{se(Ie,function(pe){if(pe!==void 0){var Ne=isNaN(pe.duration)?0:pe.duration;pe.calculatedPresentationTime<=Re&&pe.calculatedPresentationTime+ke+Ne>=Re?Me(pe,_.Z.EVENT_MODE_ON_START):(Q(Re,Ne+ke,pe.calculatedPresentationTime)||function(Ye){try{var dt=Ye.eventStream.period.start+Ye.eventStream.period.duration;return Ye.calculatedPresentationTime>dt}catch(at){return P.error(at),!1}}(pe))&&(P.debug("Removing event ".concat(pe.id," from period ").concat(pe.eventStream.period.id," as it is expired or invalid")),function(Ye,dt){try{var at=dt.eventStream.schemeIdUri,Je=dt.eventStream.period.id,ht=dt.eventStream.value,Bt=dt.id;Ye[Je][at]=Ye[Je][at].filter(function(Gt){return ht&&Gt.eventStream.value&&Gt.eventStream.value!==ht||Gt.id!==Bt}),Ye[Je][at].length===0&&delete Ye[Je][at]}catch(Gt){P.error(Gt)}}(Ie,pe))}})}catch(pe){P.error(pe)}}function je(Ie){try{for(var ke in Ie)Ie.hasOwnProperty(ke)&&Object.keys(Ie[ke]).length===0&&delete Ie[ke]}catch(Re){P.error(Re)}}function j(Ie,ke){var Re=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pe=Ie.eventStream.schemeIdUri,Ne=Ie.eventStream.value,Ye=Ie.id,dt=me;ke[pe]||(ke[pe]=[]);var at=ke[pe].findIndex(function(ht){return(!Ne||ht.eventStream.value&&ht.eventStream.value===Ne)&&ht.id===Ye});if(at===-1)ke[pe].push(Ie),Ie.triggeredReceivedEvent=!1,Ie.triggeredStartEvent=!1,dt=qe;else if(Re){var Je=ke[pe][at];Ie.triggeredReceivedEvent=Je.triggeredReceivedEvent,Ie.triggeredStartEvent=Je.triggeredStartEvent,ke[pe][at]=Ie,dt=ge}return dt}function ue(Ie){try{if(Ie.eventStream.value==1){var ke,Re=Ie.calculatedPresentationTime;ke=Ie.calculatedPresentationTime==4294967295?NaN:Ie.calculatedPresentationTime+Ie.duration,Be.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:Ie.id,validUntil:Re,newDuration:ke,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(pe){P.error(pe)}}function ae(Ie){try{var ke=ne.getTime();se(Ie,function(Re){var pe=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.duration)?Re.eventStream.period.duration:NaN,Ne=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.start)?Re.eventStream.period.start:NaN;if(!isNaN(pe)&&!isNaN(Ne)){var Ye=Re.calculatedPresentationTime;Math.abs(Ye-ke)<300&&Me(Re,_.Z.EVENT_MODE_ON_START)}})}catch(Re){P.error(Re)}}function se(Ie,ke){try{if(Ie)for(var Re=Object.keys(Ie),pe=0;pe<Re.length;pe++)for(var Ne=Ie[Re[pe]],Ye=Object.keys(Ne),dt=0;dt<Ye.length;dt++)Ne[Ye[dt]].forEach(function(at){at!==void 0&&ke(at)})}catch(at){P.error(at)}}function Q(Ie,ke,Re){try{return Ie-ke>Re}catch(pe){return P.error(pe),!1}}function Me(Ie,ke){try{var Re=ne.getTime(),pe=Ie.id;if(ke===_.Z.EVENT_MODE_ON_RECEIVE&&!Ie.triggeredReceivedEvent)return P.debug("Received event ".concat(pe)),Ie.triggeredReceivedEvent=!0,void Be.trigger(Ie.eventStream.schemeIdUri,{event:Ie},{mode:ke});Ie.triggeredStartEvent||(Ie.eventStream.schemeIdUri===ie&&Ie.eventStream.value==1?Ie.duration===0&&Ie.presentationTimeDelta===0||(P.debug("Starting manifest refresh event ".concat(pe," at ").concat(Re)),function(){try{ze(),H.refreshManifest()}catch(Ne){P.error(Ne)}}()):Ie.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&Ie.eventStream.value==1?(P.debug("Starting callback event ".concat(pe," at ").concat(Re)),function(Ne){try{(0,nn.Z)(De).create({}).load({method:"get",url:Ne,request:{responseType:"arraybuffer"}})}catch(Ye){P.error(Ye)}}(Ie.messageData)):(P.debug("Starting event ".concat(pe," from period ").concat(Ie.eventStream.period.id," at ").concat(Re)),Be.trigger(Ie.eventStream.schemeIdUri,{event:Ie},{mode:ke})),Ie.triggeredStartEvent=!0)}catch(Ne){P.error(Ne)}}return L={addInlineEvents:function(Ie,ke){try{if(ze(),B[ke]||(B[ke]={}),Ie)for(var Re=0;Re<Ie.length;Re++){var pe=Ie[Re];if(!Q(ne.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)){var Ne=j(pe,B[ke],!0);Ne===qe?(P.debug("Added inline event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):Ne===ge&&P.debug("Updated inline event with id ".concat(pe.id," from period ").concat(ke))}}}catch(Ye){throw Ye}},addInbandEvents:function(Ie,ke){try{ze(),V[ke]||(V[ke]={});for(var Re=0;Re<Ie.length;Re++){var pe=Ie[Re];Q(ne.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)||(j(pe,V[ke],!1)===qe?(pe.eventStream.schemeIdUri===ie&&ue(pe),P.debug("Added inband event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):P.debug("Inband event with scheme_id_uri ".concat(pe.eventStream.schemeIdUri,", value ").concat(pe.eventStream.value,", period id ").concat(ke," and event id ").concat(pe.id," was ignored because it has been added before.")))}Le()}catch(Ne){throw Ne}},getInbandEvents:function(){return V},getInlineEvents:function(){return B},start:function(){try{ze(),P.debug("Start Event Controller");var Ie=fe.get().streaming.eventControllerRefreshDelay;ye||isNaN(Ie)||(ye=!0,ee=setInterval(Le,Ie))}catch(ke){throw ke}},setConfig:function(Ie){try{if(!Ie)return;Ie.manifestUpdater&&(H=Ie.manifestUpdater),Ie.playbackController&&(ne=Ie.playbackController),Ie.settings&&(fe=Ie.settings)}catch(ke){throw ke}},reset:function(){(function(){try{ee!==null&&ye&&(clearInterval(ee),ee=null,ye=!1,function(){try{ae(V),ae(B)}catch(Ie){P.error(Ie)}}())}catch(Ie){throw Ie}})(),Ee()}},P=(0,x.Z)(De).getInstance().getLogger(L),Ee(),L}bo.__dashjs_factory_name="EventController";var lm=U.Z.getSingletonFactory(bo),Oi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Mf(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function du(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee,Le,we,je,j,ue,ae,se,Q,Me,Ie,ke,Re,pe,Ne,Ye,dt,at,Je,ht,Bt,Gt,kt,Ft,An,rt,mt,Wt,Nt,en,Jt=this.context,Yt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&we&&we.hasOwnProperty("initialize")&&we.hasOwnProperty("reset")&&we.hasOwnProperty("getClientTimeOffset")&&H&&Le&&fe&&Ne))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Nn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Pt=ne.getStreamsInfo();if(!j&&Pt.length===0)throw new Error("There are no periods in the MPD");j&&Pt.length>0&&fe.updateManifestUpdateInfo({currentTime:Ne.getTime(),buffered:pe.getBufferRange(),presentationStartTime:Pt[0].start,clientTimeOffset:we.getClientTimeOffset()}),je.length>0&&function(Ir){Ir.length!==0?je=je.filter(function(fr){var ii=Ir.filter(function(Jr){return Jr.id===fr.getId()}).length>0||fr.getId()===j.getId();return ii||(P.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ii}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Pt);for(var yn=[],Hn=0,ur=Pt.length;Hn<ur;Hn++){var Tr=Pt[Hn];yn.push(It(Tr)),fe.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){j?Ir():$t(Pt,Ir,fr)})}).then(function(){Yt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){Le.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),ke=!0,Ja()}})()}function ir(){mt=!0}function It(Pt){var yn=Zc(Pt.id);return yn?yn.updateData(Pt):(yn=ys(Jt).create({manifestModel:H,mediaPlayerModel:dt,dashMetrics:fe,manifestUpdater:ee,adapter:ne,timelineConverter:we,capabilities:B,capabilitiesFilter:V,errHandler:Le,baseURLController:me,segmentBaseController:ge,textController:ae,abrController:De,playbackController:Ne,eventController:ze,mediaController:Be,protectionController:ue,videoModel:pe,streamInfo:Pt,settings:rt}),je.push(yn),yn.initialize(),Promise.resolve())}function $t(Pt,yn,Hn){try{On();var ur=fe.getCurrentDVRInfo().range;if(ur.end<ur.start){Wt&&clearTimeout(Wt);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return P.debug("Waiting for ".concat(Tr," ms before playback can start")),Yt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void(Wt=setTimeout(function(){$t(Pt,yn,Hn)},Tr))}rt.get().streaming.applyProducerReferenceTime&&Ye.calculateProducerReferenceTimeOffsets(Pt);var Ir=Pt[0].manifestInfo;if(rt.get().streaming.applyServiceDescription&&Ye.applyServiceDescription(Ir),ne.getIsDynamic()){var fr=el(Pt,Ir);Ne.computeAndSetLiveDelay(fr,Ir)}(rt.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ii=H.getValue();ii&&me.update(ii),Zt(),yn()}).catch(function(ii){P.error(ii),Zt(),yn()})}catch(ii){Hn(ii)}}function Zt(){var Pt=function(){var ur;if(ne.getIsDynamic()){var Tr=fe.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-Ne.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(Nt)&&Nt.toString().indexOf("posix:")===-1){var fr=oo(!0);isNaN(fr)||(P.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{P.info("Start time provided by the app: ".concat(Nt));var ii=Zi(!0,Nt);isNaN(ii)||(ur=Math.min(ur,ii))}var Jr=rt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Jr)}}else if(ur=Gs()[0].getStreamInfo().start,isNaN(Nt)){var qs=oo(!1);isNaN(qs)||(P.info("Start time from URI parameters: ".concat(qs)),ur=Math.max(ur,qs))}else{P.info("Start time provided by the app: ".concat(Nt));var Hs=Zi(!1,Nt);isNaN(Hs)||(ur=Math.max(ur,Hs))}return ur}(),yn=Lt(Pt),Hn=yn!==null?yn:je[0];Yt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Pt}),un(Hn,null,Pt),Gt||(Gt=setInterval(function(){!Me&&Ne.getTimeToStreamEnd()<=0&&!Ne.isSeeking()&&Yt.trigger(T.Z.PLAYBACK_ENDED,{isLast:ca().isLast})},200))}function un(Pt,yn,Hn){try{if(Me||!Pt||yn===Pt&&Pt.getIsActive())return;Me=!0,Yt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Pt.getStreamInfo()});var ur=!1;j=Pt,yn&&(ur=Sn(Pt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Pt.getStreamInfo().start:NaN:Hn,P.info("Switch to stream ".concat(Pt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(Ne.getTime(),". Seamless period switch is set to ").concat(ur)),Ft=Ft.filter(function(Tr){return Tr.getId()!==j.getId()}),Ne.initialize(ca(),!!yn),pe.getElement()?vn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Me=!1}}function vn(Pt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(Re&&Re.readyState==="open"){P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),Re.removeEventListener("sourceopen",Tr),Re.removeEventListener("webkitsourceopen",Tr),zr();var fr=fe.getCurrentDVRInfo();Se.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Pt)||Ne.seek(Pt,!0,!0),j.setMediaSource(Re).then(function(){j.initializeForTextWithMediaSource(Re)})):Pn(Pt,yn)}}function Ir(){Re.addEventListener("sourceopen",Tr,!1),Re.addEventListener("webkitsourceopen",Tr,!1),Hn=Se.attachMediaSource(pe),P.debug("MediaSource attached to element.  Waiting on open...")}Re?yn?Pn(Pt,yn):(Se.detachMediaSource(pe),Ir()):(Re=Se.createMediaSource(),Ir())}function Pn(Pt,yn){j.activate(Re,yn?kt:void 0,Pt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),kt=Hn}isNaN(Pt)||(Yt.trigger(T.Z.SEEK_TARGET,{time:Pt},{streamId:j.getId()}),Ne.seek(Pt,!1,!0),j.startScheduleControllers()),Me=!1,Yt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ca()})})}function xn(Pt){var yn=Lt(Pt.seekTime);yn&&yn!==j?yn&&yn!==j&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=j.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,j,Tr)}).catch(function(fr){Le.error(fr)})}(Pt,yn)):(Fn(),function(Hn){j.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Po(et.USER_REQUEST_STOP_REASON)}(Pt)),_u(it.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ft&&Ft.length>0&&(Ft.forEach(function(Pt){Pt.deactivate(!0)}),Ft=[])}function bt(Pt){if(Pt.newMediaInfo.streamInfo.id===j.getId()){if(Gn(),rt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Pt.oldMediaInfo&&Pt.oldMediaInfo.codec!==Pt.newMediaInfo.codec){var yn=Ne.getTime();return j.deactivate(!1),void vn(yn,!1,!1)}j.prepareTrackChange(Pt)}}function Sn(Pt,yn){try{return rt.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Pt)||mt)&&(An&&rt.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Pt,yn))}catch(Hn){return!1}}function En(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Re&&!Pt.getPreloaded()){var Hn=Sn(Pt,yn);Hn&&Pt.startPreloading(Re,kt).then(function(){Ft.push(Pt)})}}function Lt(Pt){if(isNaN(Pt))return null;for(var yn=je.length,Hn=0;Hn<yn;Hn++){var ur=je[Hn];if(Pt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Pt=ne.getIsDynamic(),yn=ne.getStreamsInfo()[0].manifestInfo,Hn=Ne.getTime(),ur=we.calcTimeShiftBufferWindow(je,Pt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){fe.addDVRInfo(Ir.getType(),Hn,yn,ur)}):fe.addDVRInfo(y.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function st(Pt){if(ht&&Q){var yn=dt.getInitialBufferLevel(),Hn=[y.Z.TEXT];(isNaN(yn)||yn<=Ne.getBufferLevel(Hn)||ne.getIsDynamic()&&yn>Ne.getLiveDelay())&&(ht=!1,_u(it.INITIAL_PLAYOUT_START_REASON),Ne.play())}Pt&&Pt.mediaType&&fe.addBufferLevel(Pt.mediaType,new Date,1e3*Pt.bufferLevel)}function nt(Pt){Pt.streamInfo.id===j.getId()&&Pt.reason&&Pt.reason.forceReplace&&Gn(),Zc(Pt.streamInfo.id).prepareQualityChange(Pt)}function qt(){if(ne.getIsDynamic()&&Ne.getOriginalLiveDelay()!==0&&j){var Pt=ne.getStreamsInfo();if(Pt.length>0){var yn=Pt[0].manifestInfo,Hn=el(Pt,yn);Ne.computeAndSetLiveDelay(Hn,yn)}}}function Ve(){if(Qa()){var Pt=pe.getPlaybackQuality();Pt&&fe.addDroppedFrames(Pt)}}function Ke(){P.debug("[onPlaybackStarted]"),!ht&&Je&&_u(it.RESUME_FROM_PAUSE_START_REASON),ht&&(ht=!1),Bt&&(Bt=!1,rt.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),Je=!1}function Dt(Pt){P.debug("[onPlaybackPaused]"),Pt.ended||(Je=!0,Po(et.USER_REQUEST_STOP_REASON))}function fn(Pt){P.debug("Stream with id ".concat(Pt.streamInfo.id," finished buffering"));var yn=Pt.streamInfo.isLast;Re&&yn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Se.signalEndOfStream(Re)):Tn()}function Tn(){if(j&&j.getHasFinishedBuffering())for(var Pt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||j||null;if(Ir){var fr=Ir.getStreamInfo();return je.filter(function(ii){var Jr=ii.getStreamInfo();return Jr.start>fr.start&&fr.id!==Jr.id})}}catch(ii){return[]}}(j),yn=0;yn<Pt.length;){var Hn=Pt[yn],ur=yn===0?j:Pt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&Re&&En(Hn,ur),yn+=1}}function sr(){Gt&&(clearInterval(Gt),Gt=null)}function Zr(){return j?j.getProcessors():[]}function Ii(Pt){if(j&&!j.getIsEndedEventSignaled()){j.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||j||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ii=-1,Jr=NaN;fr<je.length;){var qs=je[fr].getStreamInfo(),Hs=qs.start-Ir;Hs>0&&(isNaN(Jr)||Hs<Jr)&&Tr.id!==qs.id&&(Jr=Hs,ii=fr),fr+=1}return ii>=0?je[ii]:null}();yn?(P.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(j.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,j,NaN)):(P.debug("StreamController no next stream found"),j.setIsEndedEventSignaled(!1)),Po(yn?et.END_OF_PERIOD_STOP_REASON:et.END_OF_CONTENT_STOP_REASON)}Pt&&Pt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Pt){var yn=Pt||ca().manifestInfo.duration;Se.setDuration(yn)}function oo(Pt){var yn=qe.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Gs()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],js(Pt,yn.t,Hn)}function Zi(Pt,yn){var Hn=0;return Pt||(Hn=Gs()[0].getStreamInfo().start),js(Pt,yn,Hn)}function js(Pt,yn,Hn){var ur=ne.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Pt&&!isNaN(Ir)?we.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function el(Pt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Pt&&Pt.length===1){var ur=Pt[0],Tr=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT].reduce(function(fr,ii){var Jr=ne.getMediaInfoForType(ur,ii);return Jr&&Jr.isFragmented!==!1&&fr.push(Jr),fr},[]).reduce(function(fr,ii){var Jr=ne.getVoRepresentations(ii);return Jr&&Jr.length>0&&Jr.forEach(function(qs){qs&&fr.push(qs)}),fr},[]).reduce(function(fr,ii){var Jr=ne.convertRepresentationToRepresentationInfo(ii);return Jr&&Jr.fragmentDuration&&!isNaN(Jr.fragmentDuration)&&fr.push(Jr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return Mf(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ii){if(fr){if(typeof fr=="string")return Mf(fr,ii);var Jr=Object.prototype.toString.call(fr).slice(8,-1);return Jr==="Object"&&fr.constructor&&(Jr=fr.constructor.name),Jr==="Map"||Jr==="Set"?Array.from(fr):Jr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jr)?Mf(fr,ii):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function tl(Pt){if(Pt.error)ke=!0,Ja();else{P.info("Manifest updated... updating data system wide.");var yn=Pt.manifest;ne.updatePeriods(yn);var Hn=ne.getUTCTimingSources();!ne.getIsDynamic()||Hn&&Hn.length!==0||Yt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=ne.getIsDynamic()?Hn.concat(at.getUTCTimingSources()):Hn;V.filterUnsupportedFeatures(yn).then(function(){me.initialize(yn),ye.attemptSync(ur,ne.getIsDynamic())})}}function Qa(){return!!j&&j.getHasVideoTrack()}function Zs(){return!!j&&j.getHasAudioTrack()}function Po(Pt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Pt)}),fe.addPlayList()}function _u(Pt){fe.createPlaylistMetrics(1e3*Ne.getTime(),Pt)}function Tu(Pt){if(Pt.error){var yn="";switch(Pt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&rt.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){P.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=Ne.getTime();j.deactivate(!1),P.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),vn(Hn,!1,!1)}():(Ie=!0,Pt.error.message&&(yn+=" ("+Pt.error.message+")"),Pt.error.msExtendedCode&&(yn+=" (0x"+(Pt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+yn),Pt.error&&P.fatal(Pt.error),Le.error(new ce.Z(Pt.error.code,yn)),Ja())}}function ca(){return j?j.getStreamInfo():null}function Zc(Pt){for(var yn=0,Hn=je.length;yn<Hn;yn++)if(je[yn].getId()===Pt)return je[yn];return null}function Qf(Pt){isNaN(Pt.newDuration)||zr(Pt.newDuration)}function nl(){je=[],Nt=NaN,ue=null,Me=!1,j=null,Ie=!1,ke=!1,ht=!0,Bt=!0,Je=!1,Q=!0,Gt=null,mt=!1,An=!1,Ft=[],Wt=null,en={counts:{mediaErrorDecode:0}}}function Ja(){Dn(),ye.reset(),Po(Ie||ke?et.FAILURE_STOP_REASON:et.USER_REQUEST_STOP_REASON);for(var Pt=0,yn=je?je.length:0;Pt<yn;Pt++)je[Pt].reset(Ie);Yt.off(_.Z.PLAYBACK_TIME_UPDATED,Ve,L),Yt.off(_.Z.PLAYBACK_SEEKING,xn,L),Yt.off(_.Z.PLAYBACK_ERROR,Tu,L),Yt.off(_.Z.PLAYBACK_STARTED,Ke,L),Yt.off(_.Z.PLAYBACK_PAUSED,Dt,L),Yt.off(_.Z.PLAYBACK_ENDED,Ii,L),Yt.off(_.Z.METRIC_ADDED,Gc,L),Yt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,L),Yt.off(_.Z.BUFFER_LEVEL_UPDATED,st,L),Yt.off(_.Z.QUALITY_CHANGE_REQUESTED,nt,L),T.Z.KEY_SESSION_UPDATED&&Yt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.off(T.Z.MANIFEST_UPDATED,tl,L),Yt.off(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.off(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L),me.reset(),ee.reset(),ze.reset(),fe.clearAllCurrentMetrics(),H.setValue(null),J.reset(),we.reset(),Ee.reset(),Re&&(Se.detachMediaSource(pe),Re=null),pe=null,ue&&(ue=null,se=null,H.getValue()&&Yt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Yt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),nl()}function Gc(Pt){if(Pt.metric===D.Z.DVR_INFO){var yn=Zs()?y.Z.AUDIO:y.Z.VIDEO;Pt.mediaType===yn&&Se.setSeekable(Pt.value.range.start,Pt.value.range.end)}}function Gs(){return je}return L={initialize:function(Pt,yn){Dn(),Q=Pt,se=yn,we.initialize(),(ee=Vr(Jt).create()).setConfig({manifestModel:H,adapter:ne,manifestLoader:J,errHandler:Le,settings:rt,contentSteeringController:ie}),ee.initialize(),(ze=lm(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:Ne,settings:rt}),ze.start(),ye.setConfig({dashMetrics:fe,baseURLController:me,errHandler:Le,settings:rt}),ye.initialize(),Se.setConfig({settings:rt}),ue&&(Yt.trigger(T.Z.PROTECTION_CREATED,{controller:ue}),ue.setMediaElement(pe.getElement()),se&&ue.setProtectionData(se)),Yt.on(_.Z.PLAYBACK_TIME_UPDATED,Ve,L),Yt.on(_.Z.PLAYBACK_SEEKING,xn,L),Yt.on(_.Z.PLAYBACK_ERROR,Tu,L),Yt.on(_.Z.PLAYBACK_STARTED,Ke,L),Yt.on(_.Z.PLAYBACK_PAUSED,Dt,L),Yt.on(_.Z.PLAYBACK_ENDED,Ii,L),Yt.on(_.Z.METRIC_ADDED,Gc,L),Yt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,L),Yt.on(_.Z.BUFFER_LEVEL_UPDATED,st,L),Yt.on(_.Z.QUALITY_CHANGE_REQUESTED,nt,L),T.Z.KEY_SESSION_UPDATED&&Yt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.on(T.Z.MANIFEST_UPDATED,tl,L),Yt.on(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.on(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L)},getActiveStreamInfo:ca,addDVRMetric:On,hasVideoTrack:Qa,hasAudioTrack:Zs,getStreamById:Zc,getStreamForTime:Lt,getTimeRelativeToStreamId:function(Pt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<je.length;fr++){if(Tr=(Hn=je[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Pt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),Nt=yn,J.load(Pt)},loadWithManifest:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Nn(),Nt=yn,ee.setManifest(Pt)},getActiveStreamProcessors:Zr,setConfig:function(Pt){Pt&&(Pt.capabilities&&(B=Pt.capabilities),Pt.capabilitiesFilter&&(V=Pt.capabilitiesFilter),Pt.manifestLoader&&(J=Pt.manifestLoader),Pt.manifestModel&&(H=Pt.manifestModel),Pt.mediaPlayerModel&&(dt=Pt.mediaPlayerModel),Pt.customParametersModel&&(at=Pt.customParametersModel),Pt.protectionController&&(ue=Pt.protectionController),Pt.adapter&&(ne=Pt.adapter),Pt.dashMetrics&&(fe=Pt.dashMetrics),Pt.errHandler&&(Le=Pt.errHandler),Pt.timelineConverter&&(we=Pt.timelineConverter),Pt.videoModel&&(pe=Pt.videoModel),Pt.playbackController&&(Ne=Pt.playbackController),Pt.serviceDescriptionController&&(Ye=Pt.serviceDescriptionController),Pt.contentSteeringController&&(ie=Pt.contentSteeringController),Pt.textController&&(ae=Pt.textController),Pt.abrController&&(De=Pt.abrController),Pt.mediaController&&(Be=Pt.mediaController),Pt.settings&&(rt=Pt.settings),Pt.baseURLController&&(me=Pt.baseURLController),Pt.uriFragmentModel&&(qe=Pt.uriFragmentModel),Pt.segmentBaseController&&(ge=Pt.segmentBaseController),Pt.manifestUpdater&&(ee=Pt.manifestUpdater))},setProtectionData:function(Pt){se=Pt,ue&&ue.setProtectionData(se)},getIsStreamSwitchInProgress:function(){return Me},switchToVideoElement:function(Pt){j&&(Ne.initialize(ca()),vn(Pt,!1,!0))},getHasMediaOrInitialisationError:function(){return Ie||ke},getStreams:Gs,getActiveStream:function(){return j},getInitialPlayback:function(){return ht},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:Ja},P=(0,x.Z)(Jt).getInstance().getLogger(L),ye=za(Jt).getInstance(),Se=Nh(Jt).getInstance(),Ee=Qe(Jt).getInstance(),nl(),L}du.__dashjs_factory_name="StreamController";var qo=U.Z.getSingletonFactory(du);function hu(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me=this.context,ge=(0,m.Z)(me).getInstance();function qe(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){ge.off(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.off(T.Z.INITIAL_STREAM_SWITCH,Ee,this),ge.off(T.Z.PLAYBACK_SEEKING,De,this),ge.off(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.off(T.Z.TRACK_CHANGE_RENDERED,ze,L)}(),ee=null,J=NaN,V=0,Se=null,ye={}}function De(){Se&&(clearTimeout(Se),Se=null)}function Be(se){try{if(se.streamId!==ne.getActiveStreamInfo().id||se.mediaType!==y.Z.VIDEO&&se.mediaType!==y.Z.AUDIO)return;se.streamId===ne.getActiveStreamInfo().id&&(ye[se.mediaType]=!0)}catch(Q){ie.error(Q)}}function ze(se){se&&se.mediaType&&(ye[se.mediaType]=!1)}function Ee(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){we()&&ae(H.getTime())},100))}catch(se){}}()}function Le(){if(we(B.get().streaming.gaps.enableSeekFix)&&++V>=10){var se=H.getTime();P===se?ae(se,!0):(P=se,J=NaN),V=0}}function we(){var se=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!ne.getActiveStream())return!1;var Q=Object.keys(ye).some(function(Ie){return ye[Ie]}),Me=!!se&&je();return!Q&&B.get().streaming.gaps.jumpGaps&&ne.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Me)&&!H.isPaused()&&!ne.getIsStreamSwitchInProgress()&&!ne.getHasMediaOrInitialisationError()}function je(){var se=ne.getActiveStream(),Q=parseFloat((se.getStartTime()+se.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function j(se,Q){try{if(!se||se.length<=1&&Q>0)return NaN;for(var Me=NaN,Ie=0;isNaN(Me)&&Ie<se.length;){var ke=Ie>0?se.end(Ie-1):0;Q<se.start(Ie)&&ke-Q<B.get().streaming.gaps.threshold&&(Me=Ie),Ie+=1}return Me}catch(Re){return null}}function ue(se,Q){for(var Me=0,Ie=se.length;Me<Ie;Me++)if(Q>=se.start(Me)&&Q<=se.end(Me))return!0;return!1}function ae(se){var Q,Me=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ie=B.get().streaming.gaps.enableStallFix,ke=B.get().streaming.gaps.stallSeek,Re=B.get().streaming.gaps.smallGapLimit,pe=B.get().streaming.gaps.jumpLargeGaps,Ne=fe.getBufferRange(),Ye=NaN,dt=!1;if(Q=j(Ne,se),!isNaN(Q)){var at=Ne.start(Q),Je=at-se;Je>0&&(Je<=Re||pe)&&(Ye=at)}var ht=H.getTimeToStreamEnd();if(isNaN(Ye)&&Me&&isFinite(ht)&&!isNaN(ht)&&ht<Re&&(Ye=parseFloat(H.getStreamEndTime().toFixed(5)),dt=!0),Ie&&isNaN(Ye)&&Me&&isNaN(Q)&&ue(Ne,se)&&(ke===0?(ie.warn("Toggle play pause to break stall"),fe.pause(),fe.play()):(ie.warn("Jumping ".concat(ke,"s to break stall")),Ye=se+ke)),Ye>0&&J!==Ye&&Ye>se&&!Se){var Bt=Ye-se;if(dt){var Gt=ne.getStreamForTime(Ye),kt=Gt&&!!Gt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(se," to ").concat(Ye,". Gap duration: ").concat(Bt)),H.seek(Ye,!0,kt)}else{var Ft=H.getIsDynamic(),An=Q>0?Ne.end(Q-1):se,rt=Ft?1e3*Math.max(0,Bt-.1):0;Se=window.setTimeout(function(){H.seek(Ye,!0,!0),ie.warn("Jumping gap occuring in period ".concat(ne.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(Ye,". Jumping by: ").concat(Ye-An)),Se=null},rt)}J=Ye}}return L={reset:qe,setConfig:function(se){se&&(se.settings&&(B=se.settings),se.playbackController&&(H=se.playbackController),se.streamController&&(ne=se.streamController),se.videoModel&&(fe=se.videoModel))},initialize:function(){(function(){ge.on(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.on(T.Z.INITIAL_STREAM_SWITCH,Ee,this),ge.on(T.Z.PLAYBACK_SEEKING,De,this),ge.on(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.on(T.Z.TRACK_CHANGE_RENDERED,ze,L)})()}},ie=(0,x.Z)(me).getInstance().getLogger(L),qe(),L}hu.__dashjs_factory_name="GapController";var Os=U.Z.getSingletonFactory(hu);function ci(){var L,P,B,V,ee,J,H,ne,fe,Se,ye=this.context,ie=(0,m.Z)(ye).getInstance();function me(){P=!1;var je=rn.Z.parseUserAgent();B=je&&je.browser&&je.browser.name&&je.browser.name.toLowerCase()==="safari"}function ge(){P=!1}function qe(je){if(je.streamId===J.getActiveStreamInfo().id&&fe){var j=H.getLiveDelay();H.getBufferLevel()>j/2&&(fe=!1)}}function De(je){je.streamId===J.getActiveStreamInfo().id&&(fe=je.state===D.Z.BUFFER_EMPTY)}function Be(){ne.getCatchupModeEnabled()||V.setPlaybackRate(1)}function ze(){H.getIsDynamic()&&ne.getCatchupModeEnabled()&&(ne.getCatchupPlaybackRates().max>0||ne.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||P)&&(Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(je,j){try{return Math.abs(Ee())>0||je<j}catch(ue){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Ee())>0}catch(je){return!1}}())}catch(je){return!1}}()&&function(){if(!P&&V){var je,j=V.getPlaybackRate(),ue=ne.getCatchupPlaybackRates(),ae=H.getBufferLevel(),se=Ee(),Q=ne.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&se>Q)Se.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,H.seekToCurrentLive(!0,!1);else{var Me=H.getCurrentLiveLatency(),Ie=H.getLiveDelay();je=Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Re,pe,Ne,Ye,dt){var at;if(dt<Ye){var Je=Math.abs(Re.min),ht=5*(dt-Ye);at=1-Je+2*Je/(1+Math.pow(Math.E,-ht)),Se.debug("[LoL+ playback control_buffer-based] bufferLevel: "+dt+", newRate: "+at)}else{if(Math.abs(pe-Ne)<=.02*Ne)at=1;else{var Bt=pe-Ne,Gt=Bt<0?Math.abs(Re.min):Re.max,kt=5*Bt;at=1-Gt+2*Gt/(1+Math.pow(Math.E,-kt))}Se.debug("[LoL+ playback control_latency-based] latency: "+pe+", newRate: "+at)}return at}(ue,Me,Ie,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(Re,pe,Ne,Ye){if(fe)return 1;var dt=pe-Ne,at=dt<0?Math.abs(Re.min):Re.max,Je=5*dt,ht=1-at+2*at/(1+Math.pow(Math.E,-Je));return H.getPlaybackStalled()&&Ye<=Ne/2&&dt>0&&(ht=1),ht}(ue,Me,Ie,ae);var ke=B?.25:.02/(.5/ue.max);je&&Math.abs(j-je)>=ke&&(Se.debug("[CatchupController]: Setting playback rate to ".concat(je)),V.setPlaybackRate(je))}}}()}function Ee(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function Le(){var je=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==y.Z.LIVE_CATCHUP_MODE_LOLP||je===null||isNaN(je)?y.Z.LIVE_CATCHUP_MODE_DEFAULT:y.Z.LIVE_CATCHUP_MODE_LOLP}function we(){ne.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.off(_.Z.PLAYBACK_PROGRESS,ze,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.off(_.Z.PLAYBACK_SEEKED,ge,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.off(_.Z.STREAM_INITIALIZED,we,L),me(),V.setPlaybackRate(1,!0)},setConfig:function(je){je&&(je.settings&&(ee=je.settings),je.videoModel&&(V=je.videoModel),je.streamController&&(J=je.streamController),je.playbackController&&(H=je.playbackController),je.mediaPlayerModel&&(ne=je.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.on(_.Z.PLAYBACK_PROGRESS,ze,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.on(_.Z.PLAYBACK_SEEKED,ge,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.on(_.Z.STREAM_INITIALIZED,we,L),we()}},Se=(0,x.Z)(ye).getInstance().getLogger(L),me(),L}ci.__dashjs_factory_name="CatchupController";var fo=U.Z.getSingletonFactory(ci),Uu=[y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],xh="video",Bu="audio";function Co(){var L,P,B,V,ee,J=this.context;function H(){P={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function ne(fe,Se,ye){try{P[fe][Se]=ye/1e3}catch(ie){V.error(ie)}}return L={getServiceDescriptionSettings:function(){return P},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(fe){try{var Se=[];if(fe&&fe.length>0){var ye=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;fe.forEach(function(me){var ge=ye.reduce(function(qe,De){return qe.concat(ee.getAllMediaInfoForType(me,De))},[]).reduce(function(qe,De){return ee.getProducerReferenceTimes(me,De).forEach(function(Be){var ze=ee.getVoRepresentations(De);if(ze&&ze.length>0&&ze[0].adaptation&&ze[0].segmentInfoType===v.Z.SEGMENT_TEMPLATE){var Ee=ze[0],Le=new Date(Be[v.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Be[v.Z.PRESENTATION_TIME]/Ee[v.Z.TIMESCALE]-Ee[v.Z.PRESENTATION_TIME_OFFSET]+me.start),we=ie-Le;qe.push({id:Be[v.Z.ID],to:we})}}),qe},[]);Se=Se.concat(ge)})}B=Se}catch(me){V.error(me),B=[]}},applyServiceDescription:function(fe){if(fe&&fe.serviceDescriptions){var Se=fe.serviceDescriptions.filter(function(me){return Uu.includes(me.schemeIdUri)}),ye=fe.serviceDescriptions.filter(function(me){return me.schemeIdUri==null}),ie=Se.length>0?Se[Se.length-1]:ye[ye.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(me){var ge;if(me.schemeIdUri,y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ge=function(ze){return{liveDelay:ze.latency.target/1e3,maxDrift:!isNaN(ze.latency.max)&&ze.latency.max>ze.latency.target?(ze.latency.max-ze.latency.target+500)/1e3:NaN,referenceId:ze.latency.referenceId||NaN}}(me),B.length>0){var qe=function(ze){var Ee,Le=0,we=B.filter(function(je){return je.id===ze.referenceId});return we.length===0?(Le=B.length>0?B[0].to:0,Ee=B[0].id||NaN):(Le=we[0].to||0,Ee=we[0].id||NaN),{to:Le,id:Ee}}(ge),De=qe.to,Be=qe.id;P.liveDelay=ge.liveDelay-De,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(De," from ProducerReferenceTime element with id ").concat(Be,".\n                Live Delay: ").concat(ge.liveDelay-De,", Live catchup max drift: ").concat(ge.maxDrift,"\n            "))}else P.liveDelay=ge.liveDelay,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ge.liveDelay,", Live catchup max drift: ").concat(ge.maxDrift))}(ie),ie.playbackRate&&function(me){var ge=me.playbackRate.min?Math.round(1e3*(me.playbackRate.min-1))/1e3:NaN,qe=me.playbackRate.max?Math.round(1e3*(me.playbackRate.max-1))/1e3:NaN;P.liveCatchup.playbackRate.min=ge,P.liveCatchup.playbackRate.max=qe,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ge)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(qe))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(me){if(me&&me.operatingBandwidth&&me.operatingBandwidth.mediaType&&me.operatingBandwidth.mediaType!=="all"){var ge={};ge.minBandwidth=me.operatingBandwidth.min,ge.maxBandwidth=me.operatingBandwidth.max,ge.targetBandwidth=me.operatingBandwidth.target;var qe=[];me.operatingBandwidth.mediaType===xh||me.operatingBandwidth.mediaType===Bu?qe.push(me.operatingBandwidth.mediaType):me.operatingBandwidth.mediaType==="any"&&(qe.push(Bu),qe.push(xh)),qe.forEach(function(De){isNaN(ge.minBandwidth)||ne("minBitrate",De,ge.minBandwidth),isNaN(ge.maxBandwidth)||ne("maxBitrate",De,ge.maxBandwidth),isNaN(ge.targetBandwidth)||ne("initialBitrate",De,ge.targetBandwidth)})}}(ie),ie.contentSteering&&function(me){P.contentSteering=me.contentSteering}(ie))}},reset:function(){H()},setConfig:function(fe){fe&&fe.adapter&&(ee=fe.adapter)}},V=(0,x.Z)(J).getInstance().getLogger(L),H(),L}Co.__dashjs_factory_name="ServiceDescriptionController";var Mh=U.Z.getSingletonFactory(Co),vr=w(3973),Ei=w.n(vr),Dh=w(3039);function wc(){var L,P,B,V,ee,J,H,ne,fe=this.context,Se=(0,m.Z)(fe).getInstance();function ye(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].list:[]}function ie(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].current:null}function me(pe){var Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(pe&&pe.streamInfo){var Ye=pe.type,dt=pe.streamInfo,at=dt.id,Je=ie(Ye,at);if(B[at]&&B[at][Ye]&&(B[at][Ye].current=pe,B[at][Ye].current&&(Ye!==y.Z.TEXT&&!De(pe,Je)||Ye===y.Z.TEXT&&pe.isFragmented)&&Se.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Je,newMediaInfo:pe,switchMode:V.get().streaming.trackSwitchMode[Ye]},{streamId:at}),!Ne)){var ht=ze(pe);if(!ht||!B[at][Ye].storeLastSettings)return;ht.roles&&(ht.role=ht.roles[0],delete ht.roles),ht.accessibility&&(ht.accessibility=ht.accessibility[0]),ht.audioChannelConfiguration&&(ht.audioChannelConfiguration=ht.audioChannelConfiguration[0]),J[Ye]=ht,ne.setSavedMediaSettings(Ye,ht)}}}function ge(pe,Ne){pe&&Ne&&(ee[pe]=Ne)}function qe(pe){return pe?ee[pe]:null}function De(pe,Ne){if(!pe&&!Ne)return!0;if(!pe||!Ne)return!1;var Ye=pe.id===Ne.id,dt=pe.viewpoint===Ne.viewpoint,at=JSON.stringify(pe.viewpointsWithSchemeIdUri)===JSON.stringify(Ne.viewpointsWithSchemeIdUri),Je=pe.lang===Ne.lang,ht=pe.codec===Ne.codec,Bt=pe.roles.toString()===Ne.roles.toString(),Gt=JSON.stringify(pe.rolesWithSchemeIdUri)===JSON.stringify(Ne.rolesWithSchemeIdUri),kt=pe.accessibility.toString()===Ne.accessibility.toString(),Ft=JSON.stringify(pe.accessibilitiesWithSchemeIdUri)===JSON.stringify(Ne.accessibilitiesWithSchemeIdUri),An=pe.audioChannelConfiguration.toString()===Ne.audioChannelConfiguration.toString(),rt=JSON.stringify(pe.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Ne.audioChannelConfigurationsWithSchemeIdUri);return Ye&&ht&&dt&&at&&Je&&Bt&&Gt&&kt&&Ft&&An&&rt}function Be(){B={},J={},ee={audio:null,video:null,text:null}}function ze(pe){var Ne={lang:pe.lang,viewpoint:pe.viewpoint,roles:pe.roles,accessibility:pe.accessibility,audioChannelConfiguration:pe.audioChannelConfiguration,codec:pe.codec};return Ne.lang||Ne.viewpoint||Ne.role&&Ne.role.length>0||Ne.accessibility&&Ne.accessibility.length>0||Ne.audioChannelConfiguration&&Ne.audioChannelConfiguration.length>0?Ne:null}function Ee(pe,Ne,Ye){var dt=[];return pe.forEach(function(at){Ne(Ye,at)&&dt.push(at)}),dt.length!==0?dt:pe}function Le(pe,Ne){try{return!pe.lang||pe.lang instanceof RegExp?Ne.lang.match(pe.lang):Ne.lang!==""&&(0,Dh.extendedFilter)(Ne.lang,Ei()(pe.lang)).length>0}catch(Ye){return!1}}function we(pe,Ne){return pe.index===void 0||pe.index===null||Ne.index===pe.index}function je(pe,Ne){return!pe.viewpoint||pe.viewpoint===Ne.viewpoint}function j(pe,Ne){var Ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2],dt=!pe.role||!!Ne.roles.filter(function(at){return at===pe.role})[0];return dt||Ne.type===y.Z.AUDIO&&Ye}function ue(pe,Ne){return pe.accessibility?!!Ne.accessibility.filter(function(Ye){return Ye===pe.accessibility})[0]:!Ne.accessibility.length}function ae(pe,Ne){return!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ye){return Ye===pe.audioChannelConfiguration})[0]}function se(pe,Ne){return!pe.codec||pe.codec===Ne.codec}function Q(pe){var Ne,Ye=0,dt=[];return pe.forEach(function(at){(Ne=Math.max.apply(Math,at.bitrateList.map(function(Je){return Je.bandwidth})))>Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function Me(pe){var Ne,Ye=1/0,dt=[];return pe.forEach(function(at){var Je=at.bitrateList.reduce(function(ht,Bt){var Gt=Math.max(1,Bt.width*Bt.height);return ht+Bt.bandwidth/Gt},0);(Ne=Je/at.bitrateList.length)<Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function Ie(pe){var Ne,Ye=0,dt=[];return pe.forEach(function(at){(Ne=at.representationCount)>Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function ke(pe,Ne){if(pe===y.Z.TEXT)return Ne[0];var Ye,dt=V.get().streaming.selectionModeForInitialTrack,at=H.getCustomInitialTrackSelectionFunction();if(at&&typeof at=="function")Ye=at(Ne);else switch(dt){case y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Ye=function(Je){var ht,Bt,Gt=(ht=0,Bt=[],Je.forEach(function(kt){isNaN(kt.selectionPriority)||(kt.selectionPriority>ht?(ht=kt.selectionPriority,Bt=[kt]):kt.selectionPriority===ht&&Bt.push(kt))}),Bt);return Gt.length>1&&(Gt=Q(Gt)),Gt.length>1&&(Gt=Ie(Gt)),Gt}(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Ye=function(Je){var ht=Q(Je);return ht.length>1&&(ht=Ie(ht)),ht}(Ne);break;case y.Z.TRACK_SELECTION_MODE_FIRST_TRACK:Ye=Re(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Ye=function(Je){var ht=Me(Je);return ht.length>1&&(ht=Q(ht)),ht}(Ne);break;case y.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:Ye=function(Je){var ht=Ie(Je);return ht.length>1&&(ht=Q(Je)),ht}(Ne);break;default:P.warn("Track selection mode ".concat(dt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Ye=Re(Ne)}return Ye.length>0?Ye[0]:Ne[0]}function Re(pe){return pe[0]}return L={setInitialMediaSettingsForType:function(pe,Ne){var Ye=J[pe]||qe(pe),dt=ye(pe,Ne.id),at=[];Ye||((Ye=ne.getSavedMediaSettings(pe))&&delete Ye.codec,ge(pe,Ye)),dt&&dt.length!==0&&(Ye&&(at=Ee(at=Array.from(dt),Le,Ye),at=Ee(at,we,Ye),at=Ee(at,je,Ye),pe===y.Z.AUDIO&&J[pe]||(at=Ee(at,j,Ye)),at=Ee(at,ue,Ye),at=Ee(at,ae,Ye),at=Ee(at,se,Ye)),at.length===0?me(ke(pe,dt),!0):at.length>1?me(ke(pe,at)):me(at[0]))},addTrack:function(pe){if(pe){var Ne=pe.type;if((Ye=Ne)===y.Z.AUDIO||Ye===y.Z.VIDEO||Ye===y.Z.TEXT||Ye===y.Z.IMAGE){var Ye,dt,at=pe.streamInfo.id;B[at]||(B[at]={audio:{list:[],storeLastSettings:dt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:dt,current:null},text:{list:[],storeLastSettings:dt,current:null},image:{list:[],storeLastSettings:dt,current:null}});for(var Je=B[at][Ne].list,ht=0,Bt=Je.length;ht<Bt;++ht)if(De(Je[ht],pe))return;Je.push(pe)}}},getTracksFor:ye,getCurrentTrackFor:ie,isCurrentTrack:function(pe){if(!pe)return!1;var Ne=pe.type,Ye=pe.streamInfo.id;return B[Ye]&&B[Ye][Ne]&&De(B[Ye][Ne].current,pe)},setTrack:me,selectInitialTrack:ke,setInitialSettings:ge,getInitialSettings:qe,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Me,getTracksWithWidestRange:Ie,isTracksEqual:De,matchSettings:function(pe,Ne){var Ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var dt=!1;if(pe.lang){if(pe.lang instanceof RegExp)dt=Ne.lang.match(pe.lang);else if(Ne.lang!==""){var at=Ei()(pe.lang);at&&(dt=(0,Dh.extendedFilter)(Ne.lang,at).length>0)}}else dt=!0;var Je=pe.index===void 0||pe.index===null||Ne.index===pe.index,ht=!pe.viewpoint||pe.viewpoint===Ne.viewpoint,Bt=!pe.role||!!Ne.roles.filter(function(Ft){return Ft===pe.role})[0],Gt=!pe.accessibility||!!Ne.accessibility.filter(function(Ft){return Ft===pe.accessibility})[0],kt=!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ft){return Ft===pe.audioChannelConfiguration})[0];return dt&&Je&&ht&&(Bt||Ne.type===y.Z.AUDIO&&Ye)&&Gt&&kt}catch(Ft){return!1}},matchSettingsLang:Le,matchSettingsIndex:we,matchSettingsViewPoint:je,matchSettingsRole:j,matchSettingsAccessibility:ue,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){ne.setSavedMediaSettings(y.Z.TEXT,null)},setConfig:function(pe){pe&&(pe.domStorage&&(ne=pe.domStorage),pe.settings&&(V=pe.settings),pe.customParametersModel&&(H=pe.customParametersModel))},reset:Be},P=(0,x.Z)(fe).getInstance().getLogger(L),Be(),L}wc.__dashjs_factory_name="MediaController";var wi=U.Z.getSingletonFactory(wc);U.Z.updateSingletonFactory(wc.__dashjs_factory_name,wi);var ju=wi,Ls=NaN,cm=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:P||null,selectedIdx:B||Ls},this.children=[]};function Df(){var L,P,B,V,ee=this.context,J=mn(ee).getInstance();function H(ye,ie,me){var ge=ne(me);ye[ie]?J.areEqual(ge,ye[ie].data.baseUrls)||(ye[ie].data.baseUrls=ge,ye[ie].data.selectedIdx=Ls):ye[ie]=new cm(ge)}function ne(ye){var ie=B.getBaseURLsFromElement(ye),me=V.getSynthesizedBaseUrlElements(ie);return me&&me.length>0&&(ie=ie.concat(me)),ie}function fe(ye,ie){var me=ie||P;ye(me.data),me.children&&me.children.forEach(function(ge){return fe(ye,ge)})}function Se(){P=new cm}return L={reset:Se,update:function(ye){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var me=ne(ie);J.areEqual(me,P.data.baseUrls)||(P.data.baseUrls=me,P.data.selectedIdx=Ls),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ge,qe){H(P.children,qe,ge),ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.forEach(function(De,Be){H(P.children[qe].children,Be,De),De.Representation_asArray&&De.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function(ze,Ee){H(P.children[qe].children[Be].children,Ee,ze)})})})})(ye)},getForPath:function(ye){var ie=P,me=[ie.data];return ye&&ye.forEach(function(ge){(ie=ie.children[ge])&&me.push(ie.data)}),me.filter(function(ge){return ge.baseUrls.length})},invalidateSelectedIndexes:function(ye){fe(function(ie){isNaN(ie.selectedIdx)||ye===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Ls)})},setConfig:function(ye){ye.adapter&&(B=ye.adapter),ye.contentSteeringController&&(V=ye.contentSteeringController)},getBaseUrls:function(ye){return ne(ye)}},Se(),L}Df.__dashjs_factory_name="BaseURLTreeModel";var ba=U.Z.getClassFactory(Df);function Ya(L){var P=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,ne=0,fe=[],Se=0;if((H=ee.sort(function(ye,ie){var me=ye.dvbPriority-ie.dvbPriority;return isNaN(me)?0:me}).filter(function(ye,ie,me){return!ie||me[0].dvbPriority&&ye.dvbPriority&&me[0].dvbPriority===ye.dvbPriority})).length)return H.length>1&&(H.forEach(function(ye){ne+=ye.dvbWeight,fe.push(ne)}),J=Math.floor(Math.random()*(ne-1)),fe.every(function(ye,ie){return Se=ie,!(J<ye)})),H[Se]}((V=[],B.filter(function(ee){return!P.contains(ee.serviceLocation)||(ee.dvbPriority&&V.push(ee.dvbPriority),!1)}).filter(function(ee){return!V.length||!ee.dvbPriority||V.indexOf(ee.dvbPriority)===-1})));var V}}}Ya.__dashjs_factory_name="DVBSelector";var Ca=U.Z.getClassFactory(Ya);function Do(L){var P=(L=L||{}).blacklistController;return{select:function(B){var V,ee=0;return B&&B.some(function(J,H){return ee=H,!P.contains(J.serviceLocation)})&&(V=B[ee]),V}}}Do.__dashjs_factory_name="BasicSelector";var fm=U.Z.getClassFactory(Do);function Ph(){var L,P,B,V=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ne=0,fe=NaN,Se=function(){var ie=J[ne],me=H.findIndex(function(ge){return ge.serviceLocation&&ge.serviceLocation===ie});if(me!==-1&&!B.contains(H[me].serviceLocation))return fe=me,"break";ne+=1};ne<J.length;){var ye=Se();if(ye==="break")break}return fe}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var ne=P.getSteeringDataFromManifest();ne&&ne.defaultServiceLocationArray.length>0&&(H=ee(ne.defaultServiceLocationArray,J.baseUrls))}var fe=P.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&fe&&fe.pathwayPriority&&fe.pathwayPriority.length&&(H=ee(fe.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(P=J.contentSteeringController)}},P=Ia(V).getInstance(),L}Ph.__dashjs_factory_name="ContentSteeringSelector";var wE=U.Z.getClassFactory(Ph);function pu(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance(),fe=(0,Ze.Z)(H).getInstance();function Se(){P.reset()}return L={chooseSelector:function(ye){(0,_e.PS)(ye,"boolean"),J=ye?V:B},select:function(ye){if(ye){if(fe.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(ye);isNaN(ie)||ie===-1||(ye.selectedIdx=ie)}if(!isNaN(ye.selectedIdx))return ye.baseUrls[ye.selectedIdx];var me=J.select(ye.baseUrls);return me?(ye.selectedIdx=ye.baseUrls.indexOf(me),me):(ne.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&Se()))}},reset:Se,setConfig:function(ye){ye.selector&&(J=ye.selector),ye.contentSteeringSelector&&(ee=ye.contentSteeringSelector)}},P=vs(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=fm(H).create({blacklistController:P}),V=Ca(H).create({blacklistController:P}),(ee=wE(H).create()).setConfig({blacklistController:P}),J=B,L}pu.__dashjs_factory_name="BaseURLSelector";var ks=U.Z.getClassFactory(pu);function Rl(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance(),ne=(0,Tt.Z)(J).getInstance();function fe(ye){B.update(ye),V.chooseSelector(P.getIsDVB(ye)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:Se(ye)})}function Se(ye){return B.getBaseUrls(ye)}return L={reset:function(){B.reset(),V.reset()},initialize:function(ye){B.setConfig({adapter:P,contentSteeringController:ee}),fe(ye)},resolve:function(ye){var ie=B.getForPath(ye).reduce(function(me,ge){var qe=V.select(ge);return qe?(ne.isRelative(qe.url)?me.url=ne.resolve(qe.url,me.url):(me.url=qe.url,me.serviceLocation=qe.serviceLocation),me.availabilityTimeOffset=qe.availabilityTimeOffset,me.availabilityTimeComplete=qe.availabilityTimeComplete,me.queryParams=qe.queryParams,me):new Qn},new Qn);if(!ne.isRelative(ie.url))return ie},setConfig:function(ye){ye.baseURLTreeModel&&(B=ye.baseURLTreeModel),ye.baseURLSelector&&(V=ye.baseURLSelector),ye.adapter&&(P=ye.adapter),ye.contentSteeringController&&(ee=ye.contentSteeringController)},getBaseUrls:Se,update:fe},B=ba(J).create(),V=ks(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(ye){B.invalidateSelectedIndexes(ye.entry)},L),L}Rl.__dashjs_factory_name="BaseURLController";var AE=U.Z.getClassFactory(Rl);function Oh(L){return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Oh(L)}function Pf(L,P){return Pf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Pf(L,P)}function dm(L,P){return!P||Oh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Of(L){return Of=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Of(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Pf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Of(P);if(B){var ne=Of(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return dm(this,J)});function ee(J,H){var ne;return function(fe,Se){if(!(fe instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,ee),(ne=V.call(this)).url=J||null,ne.type=H||null,ne.mediaType=y.Z.STREAM,ne.responseType="",ne}return ee}(Z.Z);function hm(L){L=L||{};var P=this.context,B=(0,m.Z)(P).getInstance(),V=Ao(P).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Ae});return{load:function(ee,J,H){var ne=function(Se,ye){J.resolved=!0,J.resolvedContent=Se||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:Se||ye?null:new ce.Z(Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")ne(null,!0);else{var fe=new ji(ee,tt.w.XLINK_EXPANSION_TYPE);V.load({request:fe,success:function(Se){ne(Se)},error:function(){ne(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}hm.__dashjs_factory_name="XlinkLoader";var pm=U.Z.getClassFactory(hm),Zu=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function P(Ee){var Le=Ee.localName;return Le==null&&(Le=Ee.baseName),Le!=null&&Le!=""||(Le=Ee.nodeName),Le}function B(Ee){return typeof Ee=="string"?Ee.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):Ee}function V(Ee,Le,we,je){for(var j=0;j<Ee.length;j++){var ue=Ee[j];if(typeof ue=="string"){if(ue==je)break}else if(ue instanceof RegExp){if(ue.test(je))break}else if(typeof ue=="function"&&ue(Le,we,je))break}return j!=Ee.length}function ee(Ee,Le,we){L.arrayAccessForm==="property"&&(Ee[Le]instanceof Array?Ee[Le+"_asArray"]=Ee[Le]:Ee[Le+"_asArray"]=[Ee[Le]]),!(Ee[Le]instanceof Array)&&L.arrayAccessFormPaths.length>0&&V(L.arrayAccessFormPaths,Ee,Le,we)&&(Ee[Le]=[Ee[Le]])}function J(Ee){var Le=Ee.split(/[-T:+Z]/g),we=new Date(Le[0],Le[1]-1,Le[2]),je=Le[5].split(".");if(we.setHours(Le[3],Le[4],je[0]),je.length>1&&we.setMilliseconds(je[1]),Le[6]&&Le[7]){var j=60*Le[6]+Number(Le[7]);j=0+((/\d\d-\d\d:\d\d$/.test(Ee)?"-":"+")=="-"?-1*j:j),we.setMinutes(we.getMinutes()-j-we.getTimezoneOffset())}else Ee.indexOf("Z",Ee.length-1)!==-1&&(we=new Date(Date.UTC(we.getFullYear(),we.getMonth(),we.getDate(),we.getHours(),we.getMinutes(),we.getSeconds(),we.getMilliseconds())));return we}function H(Ee,Le,we,je){return!(Le==1&&L.xmlElementsFilter.length>0)||V(L.xmlElementsFilter,Ee,we,je)}function ne(Ee,Le){if(Ee.nodeType==9){for(var we=new Object,je=Ee.childNodes,j=0;j<je.length;j++)(ae=je[j]).nodeType==1&&(L.ignoreRoot?we=ne(ae):(we={})[se=P(ae)]=ne(ae));return we}if(Ee.nodeType==1){(we=new Object).__cnt=0;var ue=[];for(je=Ee.childNodes,j=0;j<je.length;j++){var ae,se=P(ae=je[j]);if(ae.nodeType!=8){var Q=Le+"."+se;if(H(we,ae.nodeType,se,Q))if(we.__cnt++,we[se]==null){var Me=ne(ae,Q);(se!="#text"||/[^\s]/.test(Me))&&((Ie={})[se]=Me,ue.push(Ie)),we[se]=Me,ee(we,se,Q)}else{var Ie;we[se]!=null&&(we[se]instanceof Array||(we[se]=[we[se]],ee(we,se,Q))),Me=ne(ae,Q),(se!="#text"||/[^\s]/.test(Me))&&((Ie={})[se]=Me,ue.push(Ie)),we[se][we[se].length]=Me}}}we.__children=ue;for(var ke=P(Ee),Re=0;Re<Ee.attributes.length;Re++){var pe=Ee.attributes[Re];we.__cnt++;for(var Ne=pe.value,Ye=0,dt=L.matchers.length;Ye<dt;Ye++){var at=L.matchers[Ye];at.test(pe,ke)&&(Ne=at.converter(pe.value))}we[L.attributePrefix+pe.name]=Ne}var Je=function(ht){return ht.prefix}(Ee);return Je!=null&&Je!=""&&(we.__cnt++,we.__prefix=Je),we["#text"]!=null&&(we.__text=we["#text"],we.__text instanceof Array&&(we.__text=we.__text.join("\n")),L.stripWhitespaces&&(we.__text=we.__text.trim()),delete we["#text"],L.arrayAccessForm=="property"&&delete we["#text_asArray"],we.__text=function(ht,Bt,Gt){if(L.datetimeAccessFormPaths.length>0){var kt=Gt.split(".#")[0];return V(L.datetimeAccessFormPaths,ht,Bt,kt)?J(ht):ht}return ht}(we.__text,se,Le+"."+se)),we["#cdata-section"]!=null&&(we.__cdata=we["#cdata-section"],delete we["#cdata-section"],L.arrayAccessForm=="property"&&delete we["#cdata-section_asArray"]),we.__cnt==0&&L.emptyNodeForm=="text"?we="":we.__cnt==1&&we.__text!=null?we=we.__text:we.__cnt!=1||we.__cdata==null||L.keepCData?we.__cnt>1&&we.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&we.__text==""||we.__text.trim()=="")&&delete we.__text:we=we.__cdata,delete we.__cnt,!L.enableToStringFunc||we.__text==null&&we.__cdata==null||(we.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),we}if(Ee.nodeType==3||Ee.nodeType==4)return Ee.nodeValue}function fe(Ee,Le,we,je){var j="<"+(Ee!=null&&Ee.__prefix!=null?Ee.__prefix+":":"")+Le;if(we!=null)for(var ue=0;ue<we.length;ue++){var ae=we[ue],se=Ee[ae];L.escapeMode&&(se=B(se)),j+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?j+='"'+se+'"':j+="'"+se+"'"}return j+(je?"/>":">")}function Se(Ee,Le){return"</"+(Ee.__prefix!=null?Ee.__prefix+":":"")+Le+">"}function ye(Ee,Le){return L.arrayAccessForm=="property"&&(je="_asArray",(we=Le.toString()).indexOf(je,we.length-je.length)!==-1)||Le.toString().indexOf(L.attributePrefix)==0||Le.toString().indexOf("__")==0||Ee[Le]instanceof Function;var we,je}function ie(Ee){var Le=0;if(Ee instanceof Object)for(var we in Ee)ye(Ee,we)||Le++;return Le}function me(Ee,Le,we){return L.jsonPropertiesFilter.length==0||we==""||V(L.jsonPropertiesFilter,Ee,Le,we)}function ge(Ee){var Le=[];if(Ee instanceof Object)for(var we in Ee)we.toString().indexOf("__")==-1&&we.toString().indexOf(L.attributePrefix)==0&&Le.push(we);return Le}function qe(Ee){var Le="";return Ee instanceof Object?Le+=function(we){var je="";return we.__cdata!=null&&(je+="<![CDATA["+we.__cdata+"]]>"),we.__text!=null&&(L.escapeMode?je+=B(we.__text):je+=we.__text),je}(Ee):Ee!=null&&(L.escapeMode?Le+=B(Ee):Le+=Ee),Le}function De(Ee,Le){return Ee===""?Le:Ee+"."+Le}function Be(Ee,Le,we,je){var j="";if(Ee.length==0)j+=fe(Ee,Le,we,!0);else for(var ue=0;ue<Ee.length;ue++)j+=fe(Ee[ue],Le,ge(Ee[ue]),!1),j+=ze(Ee[ue],De(je,Le)),j+=Se(Ee[ue],Le);return j}function ze(Ee,Le){var we="";if(ie(Ee)>0){for(var je in Ee)if(!ye(Ee,je)&&(Le==""||me(Ee,je,De(Le,je)))){var j=Ee[je],ue=ge(j);j==null||j==null?we+=fe(j,je,ue,!0):j instanceof Object?j instanceof Array?we+=Be(j,je,ue,Le):j instanceof Date?(we+=fe(j,je,ue,!1),we+=j.toISOString(),we+=Se(j,je)):ie(j)>0||j.__text!=null||j.__cdata!=null?(we+=fe(j,je,ue,!1),we+=ze(j,De(Le,je)),we+=Se(j,je)):we+=fe(j,je,ue,!0):(we+=fe(j,je,ue,!1),we+=qe(j),we+=Se(j,je))}}return we+qe(Ee)}this.parseXmlString=function(Ee){var Le;if(Ee===void 0)return null;if(window.DOMParser){var we=new window.DOMParser;try{(Le=we.parseFromString(Ee,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Le=null)}catch(je){Le=null}}else Ee.indexOf("<?")==0&&(Ee=Ee.substr(Ee.indexOf("?>")+2)),(Le=new ActiveXObject("Microsoft.XMLDOM")).async="false",Le.loadXML(Ee);return Le},this.asArray=function(Ee){return Ee===void 0||Ee==null?[]:Ee instanceof Array?Ee:[Ee]},this.toXmlDateTime=function(Ee){return Ee instanceof Date?Ee.toISOString():typeof Ee=="number"?new Date(Ee).toISOString():null},this.asDateTime=function(Ee){return typeof Ee=="string"?J(Ee):Ee},this.xml2json=function(Ee){return ne(Ee)},this.xml_str2json=function(Ee){var Le=this.parseXmlString(Ee);return Le!=null?this.xml2json(Le):null},this.json2xml_str=function(Ee){return ze(Ee,"")},this.json2xml=function(Ee){var Le=this.json2xml_str(Ee);return this.parseXmlString(Le)},this.getVersion=function(){return"1.2.0"}},mo="onLoad";function Gu(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,fe=(0,m.Z)(ne).getInstance(),Se=(0,Tt.Z)(ne).getInstance();function ye(De,Be,ze){var Ee,Le,we={};we.elements=De,we.type=Be,we.resolveType=ze,we.elements.length===0&&me(we);for(var je=0;je<we.elements.length;je++)Ee=we.elements[je],Le=Se.isHTTPURL(Ee.url)?Ee.url:Ee.originalContent.BaseURL+Ee.url,H.load(Le,Ee,we)}function ie(De){var Be,ze,Ee="";if(Be=De.element,ze=De.resolveObject,Be.resolvedContent){var Le=0;Be.resolvedContent.indexOf("<?xml")===0&&(Le=Be.resolvedContent.indexOf("?>")+2),Ee=Be.resolvedContent.substr(0,Le)+"<response>"+Be.resolvedContent.substr(Le)+"</response>",Be.resolvedContent=J.xml_str2json(Ee)}(function(we){var je;for(je=0;je<we.elements.length;je++)if(we.elements[je].resolved===!1)return!1;return!0})(ze)&&me(ze)}function me(De){var Be,ze,Ee=[];if(function(Le){var we,je,j,ue,ae,se,Q=[];for(ue=Le.elements.length-1;ue>=0;ue--){if(je=(we=Le.elements[ue]).type+"_asArray",we.resolvedContent){if(we.resolvedContent)for(ae=0;ae<we.resolvedContent[je].length;ae++)j=we.resolvedContent[je][ae],Q.push(j)}else delete we.originalContent["xlink:actuate"],delete we.originalContent["xlink:href"],Q.push(we.originalContent);for(we.parentElement[je].splice(we.index,1),se=0;se<Q.length;se++)we.parentElement[je].splice(we.index+se,0,Q[se]);Q=[]}Le.elements.length>0&&V.run(ee)}(De),De.resolveType==="onActuate"&&fe.trigger(T.Z.XLINK_READY,{manifest:ee}),De.resolveType===mo)switch(De.type){case v.Z.PERIOD:for(Be=0;Be<ee[v.Z.PERIOD+"_asArray"].length;Be++)(ze=ee[v.Z.PERIOD+"_asArray"][Be]).hasOwnProperty(v.Z.ADAPTATION_SET+"_asArray")&&(Ee=Ee.concat(ge(ze[v.Z.ADAPTATION_SET+"_asArray"],ze,v.Z.ADAPTATION_SET,mo))),ze.hasOwnProperty(v.Z.EVENT_STREAM+"_asArray")&&(Ee=Ee.concat(ge(ze[v.Z.EVENT_STREAM+"_asArray"],ze,v.Z.EVENT_STREAM,mo)));ye(Ee,v.Z.ADAPTATION_SET,mo);break;case v.Z.ADAPTATION_SET:fe.trigger(T.Z.XLINK_READY,{manifest:ee})}}function ge(De,Be,ze,Ee){var Le,we,je,j=[];for(we=De.length-1;we>=0;we--)(Le=De[we]).hasOwnProperty("xlink:href")&&Le["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&De.splice(we,1);for(we=0;we<De.length;we++)(Le=De[we]).hasOwnProperty("xlink:href")&&Le.hasOwnProperty("xlink:actuate")&&Le["xlink:actuate"]===Ee&&(je=qe(Le["xlink:href"],Be,ze,we,Ee,Le),j.push(je));return j}function qe(De,Be,ze,Ee,Le,we){return{url:De,parentElement:Be,type:ze,index:Ee,resolveType:Le,originalContent:we,resolvedContent:null,resolved:!1}}return P={resolveManifestOnLoad:function(De){J=new Zu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=De).Period_asArray?ye(ge(ee.Period_asArray,ee,v.Z.PERIOD,mo),v.Z.PERIOD,mo):fe.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(De){De&&(B=De)},setIron:function(De){De&&(V=De)},reset:function(){fe.off(T.Z.XLINK_ELEMENT_LOADED,ie,P),H&&(H.reset(),H=null)}},fe.on(T.Z.XLINK_ELEMENT_LOADED,ie,P),H=pm(ne).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),P}Gu.__dashjs_factory_name="XlinkController";var Ac=U.Z.getClassFactory(Gu);function qu(L){return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},qu(L)}function Cr(L){function P(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var ne=0,fe=ee.length;ne<fe;++ne){var Se=ee[ne];if(J[Se.name])if(H[Se.name]){if(Se.merge){var ye=J[Se.name],ie=H[Se.name];qu(ye)==="object"&&qu(ie)==="object"?P(ye,ie):H[Se.name]=ye+ie}}else H[Se.name]=J[Se.name]}}function V(ee,J){for(var H=0,ne=ee.children.length;H<ne;++H){var fe=ee.children[H],Se=J[fe.name+"_asArray"];if(Se)for(var ye=0,ie=Se.length;ye<ie;++ye){var me=Se[ye];B(ee.properties,J,me),V(fe,me)}}}return{run:function(ee){if(ee===null||qu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,ne=0,fe=H.length;ne<fe;++ne){var Se=H[ne];if(V(J,Se),"adaptationset"in L){var ye=Se.AdaptationSet_asArray;if(ye)for(var ie=L.adaptationset,me=0,ge=ye.length;me<ge;++me)V(ie,ye[me])}}return ee}}}Cr.__dashjs_factory_name="ObjectIron";var Hu=U.Z.getClassFactory(Cr);function Lh(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ku=function(){function L(V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=V,this._converter=ee}var P,B;return P=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Lh(P.prototype,B),L}();function Nl(L){return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Nl(L)}function ri(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Wa(L,P){return Wa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Wa(L,P)}function gm(L,P){return!P||Nl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ic(L){return Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ic(L)}var mm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Wa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ic(P);if(B){var ne=Ic(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return gm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,fe=(ri(ne={},v.Z.MPD,[v.Z.ID,v.Z.PROFILES]),ri(ne,v.Z.PERIOD,[v.Z.ID]),ri(ne,v.Z.BASE_URL,[v.Z.SERVICE_LOCATION,v.Z.BYTE_RANGE]),ri(ne,v.Z.SEGMENT_BASE,[v.Z.INDEX_RANGE]),ri(ne,v.Z.INITIALIZATION,[v.Z.RANGE]),ri(ne,v.Z.REPRESENTATION_INDEX,[v.Z.RANGE]),ri(ne,v.Z.SEGMENT_LIST,[v.Z.INDEX_RANGE]),ri(ne,v.Z.BITSTREAM_SWITCHING,[v.Z.RANGE]),ri(ne,v.Z.SEGMENT_URL,[v.Z.MEDIA_RANGE,v.Z.INDEX_RANGE]),ri(ne,v.Z.SEGMENT_TEMPLATE,[v.Z.INDEX_RANGE,v.Z.MEDIA,v.Z.INDEX,v.Z.INITIALIZATION_MINUS,v.Z.BITSTREAM_SWITCHING_MINUS]),ri(ne,v.Z.ASSET_IDENTIFIER,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.EVENT_STREAM,[v.Z.VALUE]),ri(ne,v.Z.ADAPTATION_SET,[v.Z.PROFILES,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.CONTENT_TYPE]),ri(ne,v.Z.FRAME_PACKING,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.AUDIO_CHANNEL_CONFIGURATION,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.CONTENT_PROTECTION,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.ESSENTIAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.SUPPLEMENTAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.INBAND_EVENT_STREAM,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.ACCESSIBILITY,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.ROLE,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.RATING,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.VIEWPOINT,[v.Z.VALUE,v.Z.ID]),ri(ne,v.Z.CONTENT_COMPONENT,[v.Z.CONTENT_TYPE]),ri(ne,v.Z.REPRESENTATION,[v.Z.ID,v.Z.DEPENDENCY_ID,v.Z.MEDIA_STREAM_STRUCTURE_ID]),ri(ne,v.Z.SUBSET,[v.Z.ID]),ri(ne,v.Z.METRICS,[v.Z.METRICS_MINUS]),ri(ne,v.Z.REPORTING,[v.Z.VALUE,v.Z.ID]),ne);if(fe.hasOwnProperty(H)){var Se=fe[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(Ku);function kh(L){return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},kh(L)}function Fh(L,P){return Fh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Fh(L,P)}function Lf(L,P){return!P||kh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function bc(L){return bc=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},bc(L)}var vm=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,ym=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Fh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=bc(P);if(B){var ne=bc(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Lf(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){for(var H=[v.Z.MIN_BUFFER_TIME,v.Z.MEDIA_PRESENTATION_DURATION,v.Z.MINIMUM_UPDATE_PERIOD,v.Z.TIMESHIFT_BUFFER_DEPTH,v.Z.MAX_SEGMENT_DURATION,v.Z.MAX_SUBSEGMENT_DURATION,v.Z.SUGGESTED_PRESENTATION_DELAY,v.Z.START,y.Z.START_TIME,v.Z.DURATION],ne=H.length,fe=0;fe<ne;fe++)if(J.nodeName===H[fe])return vm.test(J.value);return!1},function(J){var H=vm.exec(J),ne=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(ne=-ne),ne})}return ee}(Ku);function Uh(L){return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Uh(L)}function kf(L,P){return kf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},kf(L,P)}function Em(L,P){return!P||Uh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ff(L){return Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ff(L)}var Bh=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,_m=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&kf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ff(P);if(B){var ne=Ff(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Em(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return Bh.test(J.value)},function(J){var H,ne=Bh.exec(J);if(H=Date.UTC(parseInt(ne[1],10),parseInt(ne[2],10)-1,parseInt(ne[3],10),parseInt(ne[4],10),parseInt(ne[5],10),ne[6]&&parseInt(ne[6],10)||0,ne[7]&&1e3*parseFloat(ne[7])||0),ne[9]&&ne[10]){var fe=60*parseInt(ne[9],10)+parseInt(ne[10],10);H+=(ne[8]==="+"?-1:1)*fe*60*1e3}return new Date(H)})}return ee}(Ku);function Vu(L){return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Vu(L)}function xl(L,P){return xl=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},xl(L,P)}function IE(L,P){return!P||Vu(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Uf(L){return Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Uf(L)}var bE=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ml=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&xl(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Uf(P);if(B){var ne=Uf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return IE(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return bE.test(J.value)},function(J){return parseFloat(J)})}return ee}(Ku);function Dl(L){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Dl(L)}function zu(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Cc(L,P){return Cc=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Cc(L,P)}function Tm(L,P){return!P||Dl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Pl(L){return Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Pl(L)}var Sm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Cc(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Pl(P);if(B){var ne=Pl(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Tm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,fe=(zu(ne={},v.Z.ADAPTATION_SET,[v.Z.LANG]),zu(ne,v.Z.REPRESENTATION,[v.Z.LANG]),zu(ne,v.Z.CONTENT_COMPONENT,[v.Z.LANG]),zu(ne,v.Z.LABEL,[v.Z.LANG]),zu(ne,v.Z.GROUP_LABEL,[v.Z.LANG]),ne);if(fe.hasOwnProperty(H)){var Se=fe[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return Ei()(J)||String(J)})}return ee}(Ku);function Bf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var jf=function(){function L(V){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V,this._merge=(ee=V)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Bf(P.prototype,B),L}();function Rc(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Yu=function(){function L(V,ee,J){var H=this;(function(ne,fe){if(!(ne instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(ne){H._properties.push(new jf(ne))})}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Rc(P.prototype,B),L}();function Zf(L){return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Zf(L)}function jh(L,P){return jh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},jh(L,P)}function CE(L,P){return!P||Zf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Wu(L){return Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Wu(L)}var RE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&jh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Wu(P);if(B){var ne=Wu(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return CE(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.PROFILES,v.Z.WIDTH,v.Z.HEIGHT,v.Z.SAR,v.Z.FRAMERATE,v.Z.AUDIO_SAMPLING_RATE,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.MAXIMUM_SAP_PERIOD,v.Z.START_WITH_SAP,v.Z.MAX_PLAYOUT_RATE,v.Z.CODING_DEPENDENCY,v.Z.SCAN_TYPE,v.Z.FRAME_PACKING,v.Z.AUDIO_CHANNEL_CONFIGURATION,v.Z.CONTENT_PROTECTION,v.Z.ESSENTIAL_PROPERTY,v.Z.ESSENTIAL_PROPERTY+"_asArray",v.Z.SUPPLEMENTAL_PROPERTY,v.Z.INBAND_EVENT_STREAM];return V.call(this,v.Z.ADAPTATION_SET,J,[new Yu(v.Z.REPRESENTATION,J,[new Yu(v.Z.SUB_REPRESENTATION,J)])])}return ee}(Yu);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hr(L)}function Gf(L,P){return Gf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Gf(L,P)}function Zh(L,P){return!P||Hr(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function qf(L){return qf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},qf(L)}var NE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Gf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=qf(P);if(B){var ne=qf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Zh(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.SEGMENT_BASE,v.Z.SEGMENT_TEMPLATE,v.Z.SEGMENT_LIST];return V.call(this,v.Z.PERIOD,J,[new Yu(v.Z.ADAPTATION_SET,J,[new Yu(v.Z.REPRESENTATION,J)])])}return ee}(Yu);function Nc(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug;return P={parse:function(fe){var Se,ye=window.performance.now();if(!(Se=ee.xml_str2json(fe)))throw new Error("parsing the manifest failed");var ie=window.performance.now();Se.Patch?((Se=Se.Patch).add_asArray&&Se.add_asArray.forEach(function(ge){return J.run(ge)}),Se.replace_asArray&&Se.replace_asArray.forEach(function(ge){return J.run(ge)})):(Se=Se.MPD,J.run(Se));var me=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-ye).toPrecision(3)+"ms, objectiron: "+(me-ie).toPrecision(3)+"ms, total: "+((me-ye)/1e3).toPrecision(3)+"s)"),Se.protocol="DASH",Se},getMatchers:function(){return V},getIron:function(){return J}},B=ne.getLogger(P),V=[new ym,new _m,new Ml,new Sm,new mm],ee=new Zu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),J=Hu(H).create({adaptationset:new RE,period:new NE}),P}Nc.__dashjs_factory_name="DashParser";var wm=U.Z.getClassFactory(Nc);function Gh(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug,fe=L.settings,Se=(0,m.Z)(H).getInstance(),ye=(0,Tt.Z)(H).getInstance(),ie=L.mssHandler,me=L.errHandler;function ge(De){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:De.manifest})}function qe(De){var Be=null;return De.indexOf("SmoothStreamingMedia")>-1?(ie&&(Be=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Be):De.indexOf("MPD")>-1||De.indexOf("Patch")>-1?wm(H).create({debug:ne}):Be}return P={load:function(De){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Ee=new Date,Le=new ji(De,tt.w.MPD_TYPE);Be&&(Le.serviceLocation=Be),ze&&(Le.queryParams=ze),Le.requestStartDate||(Le.requestStartDate=Ee),Se.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:Le}),V.load({request:Le,success:function(we,je,j){var ue,ae,se;if(ee)if(j&&j!==De?(ae=ye.parseBaseUrl(j),ue=j):(ye.isRelative(De)&&(De=ye.resolve(De,window.location.href)),ae=ye.parseBaseUrl(De)),je!="No Content")if(J===null&&(J=qe(we)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{se=J.parse(we)}catch(Me){return void Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}if(se){if(se.url=ue||De,se.originalUrl||(se.originalUrl=se.url),fe&&fe.get().streaming.enableManifestDurationMismatchFix&&se.mediaPresentationDuration&&se.Period_asArray.length>1){var Q=se.Period_asArray.reduce(function(Me,Ie){return Me+Ie.duration},0);!isNaN(Q)&&se.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),se.mediaPresentationDuration=Q)}se.baseUri=ae,se.loadedTime=new Date,ee.resolveManifestOnLoad(se),Se.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:we})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))});else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(we,je,j){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(De,", ").concat(j))})}})},reset:function(){Se.off(T.Z.XLINK_READY,ge,P),ie&&ie.reset(),ee&&(ee.reset(),ee=null),V&&(V.abort(),V=null)}},B=ne.getLogger(P),Se.on(T.Z.XLINK_READY,ge,P),V=Ao(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:ye,constants:y.Z,dashConstants:v.Z,errors:Ae,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=Ac(H).create({errHandler:me,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,P}Gh.__dashjs_factory_name="ManifestLoader";var Am=U.Z.getClassFactory(Gh);function qh(){var L=this.context,P=(0,m.Z)(L).getInstance();return{error:function(B){P.trigger(T.Z.ERROR,{error:B})}}}qh.__dashjs_factory_name="ErrorHandler";var Ol=U.Z.getSingletonFactory(qh),Im=w(1715);function bm(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance();function fe(Se,ye){if(!ye||!ye.Period_asArray||ye.Period_asArray.length===0)return Promise.resolve();var ie=[];return ye.Period_asArray.forEach(function(me){ie.push(function(ge,qe){return new Promise(function(De){if(ge&&ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.length!==0){var Be=[];ge.AdaptationSet_asArray.forEach(function(ze){P.getIsTypeOf(ze,qe)&&Be.push(function(Ee,Le){return new Promise(function(we){if(Ee.Representation_asArray&&Ee.Representation_asArray.length!==0){var je=[],j=[];Ee.Representation_asArray.forEach(function(ue,ae){var se=P.getCodec(Ee,ae,!1),Q=function(Me,Ie,ke){switch(Me){case y.Z.VIDEO:return function(Re,pe){return{codec:pe,width:Re.width||null,height:Re.height||null,framerate:Re.frameRate||null,bitrate:Re.bandwidth||null}}(Ie,ke);case y.Z.AUDIO:return function(Re,pe){var Ne=Re.audioSamplingRate||null;return{codec:pe,bitrate:Re.bandwidth||null,samplerate:Ne}}(Ie,ke);default:return null}}(Le,ue,se);j.push(Q),je.push(B.supportsCodec(Q,Le))}),Promise.all(je).then(function(ue){Ee.Representation_asArray=Ee.Representation_asArray.filter(function(ae,se){return ue[se]||J.debug("[Stream] Codec ".concat(j[se].codec," not supported ")),ue[se]}),we()}).catch(function(){we()})}else we()})}(ze,qe))}),Promise.all(Be).then(function(){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(ze){var Ee=ze.Representation_asArray&&ze.Representation_asArray.length>0;return Ee||(ne.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:ze}),J.warn("AdaptationSet has been removed because of no supported Representation")),Ee}),De()}).catch(function(){De()})}else De()})}(me,Se))}),Promise.all(ie)}return L={setConfig:function(Se){Se&&(Se.adapter&&(P=Se.adapter),Se.capabilities&&(B=Se.capabilities),Se.settings&&(V=Se.settings),Se.customParametersModel&&(ee=Se.customParametersModel))},filterUnsupportedFeatures:function(Se){return new Promise(function(ye){var ie=[];ie.push(fe(y.Z.VIDEO,Se)),ie.push(fe(y.Z.AUDIO,Se)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(me){me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(qe){return!qe.Representation_asArray||qe.Representation_asArray.length===0||(qe.Representation_asArray=qe.Representation_asArray.filter(function(De){var Be=P.getEssentialPropertiesForRepresentation(De);if(Be&&Be.length>0)for(var ze=0;ze<Be.length;){if(!B.supportsEssentialProperty(Be[ze]))return J.debug("[Stream] EssentialProperty not supported: "+Be[ze].schemeIdUri),!1;ze+=1}return!0}),qe.Representation_asArray&&qe.Representation_asArray.length>0)})})}(Se),function(me){var ge=ee.getCustomCapabilitiesFilters();ge&&ge.length!==0&&me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(qe){qe.AdaptationSet_asArray=qe.AdaptationSet_asArray.filter(function(De){return!De.Representation_asArray||De.Representation_asArray.length===0||(De.Representation_asArray=De.Representation_asArray.filter(function(Be){return!ge.some(function(ze){return!ze(Be)})}),De.Representation_asArray&&De.Representation_asArray.length>0)})})}(Se),ye()}).catch(function(){ye()})})}},J=(0,x.Z)(H).getInstance().getLogger(L),L}bm.__dashjs_factory_name="CapabilitiesFilter";var xE=U.Z.getSingletonFactory(bm),ME=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Cm(){var L;return{initialize:function(P){if(L=new ME,!P)return null;var B=P.indexOf("#");if(B!==-1)for(var V=P.substr(B+1).split("&"),ee=0,J=V.length;ee<J;++ee){var H=V[ee],ne=H.indexOf("=");if(ne!==-1){var fe=H.substring(0,ne);L.hasOwnProperty(fe)&&(L[fe]=H.substr(ne+1))}}},getURIFragmentData:function(){return L}}}Cm.__dashjs_factory_name="URIFragmentModel";var DE=U.Z.getSingletonFactory(Cm);function Rm(){var L,P=this.context,B=(0,m.Z)(P).getInstance();return{getValue:function(){return L},setValue:function(V){L=V,V&&B.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}Rm.__dashjs_factory_name="ManifestModel";var PE=U.Z.getSingletonFactory(Rm),Hh=-.5;function Kh(){var L,P,B,V,ee=this.context,J=(0,Ze.Z)(ee).getInstance();function H(Se,ye){return isNaN(Se)?0:Se>0?(ye&&P.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se<Hh?(ye&&P.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Hh,": ").concat(-50,"% playback speed.")),Hh):Se}function ne(Se,ye){return isNaN(Se)?0:Se<0?(ye&&P.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se>1?(ye&&P.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Se}function fe(){var Se=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,ye=B.getLiveDelay();return!isNaN(ye)&&ye>0?Math.min(Se,ye):Se}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var Se=V.getServiceDescriptionSettings();return Se&&Se.liveCatchup&&!isNaN(Se.liveCatchup.maxDrift)&&Se.liveCatchup.maxDrift>0?Se.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:fe,getInitialBufferLevel:function(){var Se=J.get().streaming.buffer.initialBufferLevel;return isNaN(Se)||Se<0?0:Math.min(fe(),Se)},getRetryAttemptsForType:function(Se){var ye=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[Se]*ye:J.get().streaming.retryAttempts[Se]},getRetryIntervalsForType:function(Se){var ye=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[Se]/ye:J.get().streaming.retryIntervals[Se]},getCatchupPlaybackRates:function(Se){var ye=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(ye.min)||!isNaN(ye.max))return{min:H(ye.min,Se),max:ne(ye.max,Se)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var me=ie.liveCatchup.playbackRate;return{min:H(me.min,Se),max:ne(me.max,Se)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Se,ye){try{var ie=J.get().streaming.abr[Se][ye];if(!isNaN(ie)&&ie!==-1)return ie;var me=V.getServiceDescriptionSettings();return me&&me[Se]&&!isNaN(me[Se][ye])?me[Se][ye]:-1}catch(ge){return-1}},setConfig:function(Se){Se.playbackController&&(B=Se.playbackController),Se.serviceDescriptionController&&(V=Se.serviceDescriptionController)},reset:function(){}},P=(0,x.Z)(ee).getInstance().getLogger(L),L}Kh.__dashjs_factory_name="MediaPlayerModel";var Ll=U.Z.getSingletonFactory(Kh),xc=w(1767);function Vh(L){var P=(L=L||{}).abrController,B=L.switchHistory,V=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,ne=L.useLoLPABR,fe=L.streamProcessor?L.streamProcessor.getScheduleController():null,Se=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,ye=L.videoModel?L.videoModel:null;function ie(){return Se?Se.mediaInfo:null}return{getMediaType:function(){var me=ie();return me?me.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var me=ie();return me?me.streamInfo:null},getScheduleController:function(){return fe},getAbrController:function(){return P},getRepresentationInfo:function(){return Se},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return ne},getVideoModel:function(){return ye}}}Vh.__dashjs_factory_name="RulesContext";var zh=U.Z.getClassFactory(Vh),sa=w(2068);function Rr(){var L=[],P=[];return{push:function(B){B.newValue===sa.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var V=B.newValue-B.oldValue,ee=V<0?1:0,J=ee?-V:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,P.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),P.length>8){var ne=P.shift();L[ne.idx].drops-=ne.drop,L[ne.idx].dropSize-=ne.dropSize,L[ne.idx].noDrops-=ne.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],P=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var gi=U.Z.getClassFactory(Rr);function gu(){var L={},P={},B={};return{push:function(V,ee,J){if(ee){L[V]||(L[V]=[],P[V]=0,B[V]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,ne=J&&J.totalVideoFrames?J.totalVideoFrames:0,fe=H-P[V];P[V]=H;var Se=ne-B[V];B[V]=ne;var ye=L[V];isNaN(ee)||(ye[ee]?(ye[ee].droppedVideoFrames+=fe,ye[ee].totalVideoFrames+=Se):ye[ee]={droppedVideoFrames:fe,totalVideoFrames:Se})}},getFrameHistory:function(V){return L[V]},clearForStream:function(V){try{delete L[V],delete P[V],delete B[V]}catch(ee){}},reset:function(){L={},P={},B={}}}}gu.__dashjs_factory_name="DroppedFramesHistory";var Yh=U.Z.getClassFactory(gu);function $u(L){var P,B,V,ee,J,H=this.context,ne=(L=L||{}).settings,fe=(0,m.Z)(H).getInstance();function Se(De,Be,ze,Ee){var Le=Math.pow(.5,ze/Ee.fast);De.fastEstimate=(1-Le)*Be+Le*De.fastEstimate;var we=Math.pow(.5,ze/Ee.slow);De.slowEstimate=(1-we)*Be+we*De.slowEstimate,De.totalWeight+=ze}function ye(De,Be,ze){return ne.get().streaming.abr.movingAverageMethod!==y.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(Ee,Le){var we=Ee?J.throughputHalfLife:J.latencyHalfLife,je=Ee?V[Le]:ee[Le];if(!je||je.totalWeight<=0)return NaN;var j=je.fastEstimate/(1-Math.pow(.5,je.totalWeight/we.fast)),ue=je.slowEstimate/(1-Math.pow(.5,je.totalWeight/we.slow));return Ee?Math.min(j,ue):Math.max(j,ue)}(De,Be):function(Ee,Le,we){var je=function(ue,ae,se){var Q,Me;if(ue?(Q=P[ae],Me=se?3:4):(Q=B[ae],Me=4),Q){if(Me>=Q.length)Me=Q.length;else if(ue)for(var Ie=1;Ie<Me;++Ie){var ke=Q[Q.length-Ie]/Q[Q.length-Ie-1];if((ke>=1.3||ke<=.7692307692307692)&&(Me+=1)===Q.length)break}}else Me=0;return Me}(Ee,Le,we),j=(Ee?P:B)[Le];return je!==0&&j&&j.length!==0?(j=j.slice(-je)).reduce(function(ue,ae){return ue+ae})/j.length:NaN}(De,Be,ze)}function ie(De,Be){return ye(!0,De,Be)}function me(De){P[De]=P[De]||[],B[De]=B[De]||[],V[De]=V[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[De]=ee[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ge(){P={},B={},V={},ee={}}var qe={push:function(De,Be,ze){if(Be.trace&&Be.trace.length){var Ee,Le=Be.tresponse.getTime()-Be.trequest.getTime()||1,we=Be._tfinish.getTime()-Be.tresponse.getTime()||1,je=Be.trace.reduce(function(se,Q){return se+Q.b[0]},0),j=0;if((Ee=Be._fileLoaderType&&Be._fileLoaderType===y.Z.FILE_LOADER_TYPES.FETCH?Be.trace.reduce(function(se,Q){return se+Q.d},0):ze?we:Le+we)!==0&&(j=Math.round(8*je/Ee)),Be.cmsd){var ue=Be.cmsd.dynamic&&Be.cmsd.dynamic.etp?Be.cmsd.dynamic.etp:null;if(ue){var ae=ne.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(j=j*(1-ae)+ue*ae)}}if(me(De),function(se,Q,Me){return se===y.Z.VIDEO?Me<ne.get().streaming.cacheLoadThresholds[y.Z.VIDEO]:se===y.Z.AUDIO?Me<ne.get().streaming.cacheLoadThresholds[y.Z.AUDIO]:void 0}(De,0,we)){if(P[De].length>0&&!P[De].hasCachedEntries)return;P[De].hasCachedEntries=!0}else P[De]&&P[De].hasCachedEntries&&function(se){delete P[se],delete B[se],delete V[se],delete ee[se],me(se)}(De);P[De].push(j),fe.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:j,mediaType:De,httpRequest:Be}),P[De].length>20&&P[De].shift(),B[De].push(Le),B[De].length>20&&B[De].shift(),Se(V[De],j,.001*we,J.throughputHalfLife),Se(ee[De],Le,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(De,Be){var ze=ie(De,Be);return isNaN(ze)||(ze*=ne.get().streaming.abr.bandwidthSafetyFactor),ze},getAverageLatency:function(De){return ye(!1,De)},reset:ge};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ge(),qe}$u.__dashjs_factory_name="ThroughputHistory";var Nm=U.Z.getClassFactory($u);function Hf(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee,Le,we,je,j,ue,ae,se,Q,Me=this.context,Ie=(0,x.Z)(Me).getInstance(),ke=(0,m.Z)(Me).getInstance();function Re(){ee={},J={},ne={},H={},Le={},j={},ue={},ae={},Se===void 0&&(Se=!1),we&&we.reset(),Ee=void 0,we=void 0,je=void 0,clearTimeout(fe),fe=null}function pe(rt){var mt=rt.request.mediaType,Wt=rt.streamId;if(mt&&Wt&&H[Wt]&&Q.get().streaming.abr.autoSwitchBitrate[mt]){var Nt=H[Wt][mt];if(Nt){var en=zh(Me).create({abrController:L,streamProcessor:Nt,currentRequest:rt.request,useBufferOccupancyABR:j[mt],useL2AABR:ue[mt],useLoLPABR:ae[mt],videoModel:ge}),Jt=B.shouldAbandonFragment(en,Wt);Jt.quality>sa.Z.NO_CHANGE&&Nt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:rt.request.index})[0]&&(ne[Wt][mt].state=D.Z.ABANDON_LOAD,Le[Wt][mt].reset(),Le[Wt][mt].push({oldValue:Je(mt,Wt),newValue:Jt.quality,confidence:1,reason:Jt.reason}),ht(mt,V.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(fe),fe=setTimeout(function(){ne[Wt][mt].state=D.Z.ALLOW_LOAD,fe=null},Q.get().streaming.abandonLoadTimeout))}}}function Ne(rt){rt.mediaType===y.Z.VIDEO&&(Ee!==void 0&&we.push(rt.streamId,Ee,ge.getPlaybackQuality()),Ee=rt.newQuality)}function Ye(rt){var mt,Wt;rt.metric!==D.Z.HTTP_REQUEST||!rt.value||rt.value.type!==tt.w.MEDIA_SEGMENT_TYPE||rt.mediaType!==y.Z.AUDIO&&rt.mediaType!==y.Z.VIDEO||je.push(rt.mediaType,rt.value,Q.get().streaming.abr.useDeadTimeLatency),rt.metric!==D.Z.BUFFER_LEVEL||rt.mediaType!==y.Z.AUDIO&&rt.mediaType!==y.Z.VIDEO||(mt=rt.mediaType,Wt=.001*rt.value.level,Q.get().streaming.abr.ABRStrategy===y.Z.ABR_STRATEGY_DYNAMIC&&function(Nt,en){try{var Jt=qe.getStableBufferTime(),Yt=Jt,Dn=.5*Jt,Nn=j[Nt],rr=en>(Nn?Dn:Yt);j[Nt]=rr,rr!==Nn&&(rr?P.info("["+Nt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):P.info("["+Nt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){P.error(ir)}}(mt,Wt))}function dt(rt,mt){try{var Wt;return ee[mt]=ee[mt]||{},ee[mt].hasOwnProperty(rt)||(ee[mt][rt]=0),Wt=function(Nt,en){var Jt=ee[en][Nt],Yt=Jt;if(!H[en]||!H[en][Nt])return Yt;var Dn=at(Nt,en);Dn!==void 0&&(Yt=Math.max(Jt,Dn));var Nn=function(rr,ir){try{var It=qe.getAbrBitrateParameter("maxBitrate",rr);return It>-1?kt(H[ir][rr].getMediaInfo(),It,ir):void 0}catch($t){return}}(Nt,en);return Nn!==void 0&&(Yt=Math.min(Yt,Nn)),Yt}(rt,mt),Wt=function(Nt,en,Jt){var Yt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?Nt:Math.min(Nt,Math.round(Yt*Dn))}(Wt,rt,mt),Wt=function(Nt,en,Jt){if(en!==y.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return Nt;Se||An();var Yt=H[Jt][en].getStreamInfo(),Dn=me.getAdaptationForType(Yt.index,en,Yt).Representation_asArray,Nn=Nt;if(ye>0&&ie>0){for(;Nn>0&&Dn[Nn]&&ye<Dn[Nn].width&&ye-Dn[Nn-1].width<Dn[Nn].width-ye;)Nn-=1;for(;Nn<Dn.length-1&&Dn[Nn].width===Dn[Nn+1].width;)Nn+=1}return Nn}(Wt,rt,mt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&(Wt=function(Nt,en,Jt){if(en!=="video")return Nt;var Yt=Be.getMaxBitrate(en);if(Yt<0)return Nt;var Dn=Gt(Jt,"audio",Je("audio",Jt));Yt-=Dn?Dn.bitrate/1e3:0;var Nn=kt(H[Jt][en].getMediaInfo(),Yt,Jt);return P.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Yt),Math.min(Nt,Nn)}(Wt,rt,mt)),Wt}catch(Nt){return}}function at(rt,mt){try{return function(Wt,Nt){try{var en=qe.getAbrBitrateParameter("minBitrate",Wt);if(en>-1){var Jt=H[Nt][Wt].getMediaInfo(),Yt=Ft(Jt),Dn=kt(Jt,en,Nt);return Yt[Dn]&&Dn<Yt.length-1&&Yt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(Nn){return}}(rt,mt)}catch(Wt){return}}function Je(rt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return mt||(mt=V.getActiveStreamInfo().id),rt&&H[mt]&&H[mt][rt]&&mt?(J[mt]=J[mt]||{},J[mt].hasOwnProperty(rt)||(J[mt][rt]=0),J[mt][rt]):0}catch(Wt){return 0}}function ht(rt,mt,Wt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(mt&&mt.id&&rt){var en=mt.id,Jt=Je(rt,en);(0,_e.SE)(Wt);var Yt=dt(rt,en);Wt!==Jt&&Wt>=0&&Wt<=Yt&&Bt(rt,Jt,Wt,Yt,Nt,en)}}function Bt(rt,mt,Wt,Nt,en,Jt){if(rt&&H[Jt]&&H[Jt][rt]){var Yt=H[Jt][rt].getStreamInfo(),Dn=Yt&&Yt.manifestInfo&&Yt.manifestInfo.isDynamic,Nn=se.getCurrentBufferLevel(rt);P.info("Stream ID: "+Jt+" ["+rt+"] switch from "+mt+" to "+Wt+"/"+Nt+" (buffer: "+Nn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][rt]=Wt;var rr=Gt(Jt,rt,Wt);ke.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:mt,newQuality:Wt,reason:en,streamInfo:Yt,bitrateInfo:rr,maxIdx:Nt,mediaType:rt},{streamId:Yt.id,mediaType:rt});var ir=je.getAverageThroughput(rt,Dn);isNaN(ir)||ze.setSavedBitrateSettings(rt,ir)}}function Gt(rt,mt,Wt){if(mt&&H&&H[rt]&&H[rt][mt]){var Nt=Ft(H[rt][mt].getMediaInfo());return Nt[Wt]?Nt[Wt]:null}return null}function kt(rt,mt,Wt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=rt&&rt.type?H[Wt][rt.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&Nt&&en&&en.fragmentDuration){Nt/=1e3;var Jt=en.fragmentDuration;if(Nt>Jt)return 0;var Yt=Nt/Jt;mt*=1-Yt}for(var Dn=Ft(rt),Nn=Dn.length-1;Nn>=0;Nn--){var rr=Dn[Nn];if(1e3*mt>=rr.bitrate)return Nn}return 0}function Ft(rt){var mt=[];if(!rt||!rt.bitrateList)return mt;for(var Wt,Nt=rt.bitrateList,en=rt.type,Jt=0,Yt=Nt.length;Jt<Yt;Jt++)(Wt=new ku).mediaType=en,Wt.qualityIndex=Jt,Wt.bitrate=Nt[Jt].bandwidth,Wt.width=Nt[Jt].width,Wt.height=Nt[Jt].height,Wt.scanType=Nt[Jt].scanType,mt.push(Wt);return mt}function An(){if(ge){var rt=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;ye=ge.getClientWidth()*rt,ie=ge.getClientHeight()*rt}}return L={initialize:function(){we=Yh(Me).create(),je=Nm(Me).create({settings:Q}),(B=(0,xc.Z)(Me).create({dashMetrics:se,customParametersModel:De,mediaPlayerModel:qe,settings:Q})).initialize(),ke.on(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),ke.on(_.Z.METRIC_ADDED,Ye,L),ke.on(T.Z.LOADING_PROGRESS,pe,L)},isPlayingAtTopQuality:function(rt){var mt=rt?rt.id:null,Wt=Je(y.Z.AUDIO,mt),Nt=Je(y.Z.VIDEO,mt);return Wt===dt(y.Z.AUDIO,mt)&&Nt===dt(y.Z.VIDEO,mt)},updateTopQualityIndex:function(rt){var mt=rt.type,Wt=rt.streamInfo.id,Nt=rt.representationCount-1;return ee[Wt]=ee[Wt]||{},ee[Wt][mt]=Nt,Nt},clearDataForStream:function(rt){we&&we.clearForStream(rt),H[rt]&&delete H[rt],Le[rt]&&delete Le[rt],ne[rt]&&delete ne[rt]},getThroughputHistory:function(){return je},getBitrateList:Ft,getQualityForBitrate:kt,getTopBitrateInfoFor:function(rt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(mt||(mt=V.getActiveStreamInfo().id),rt&&H&&H[mt]&&H[mt][rt]){var Wt=dt(rt,mt),Nt=Ft(H[mt][rt].getMediaInfo());return Nt[Wt]?Nt[Wt]:null}return null},getMinAllowedIndexFor:at,getMaxAllowedIndexFor:dt,getInitialBitrateFor:function(rt,mt){if(function(){if(!ze||!ze.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}(),rt===y.Z.TEXT)return NaN;var Wt=ze.getSavedBitrateSettings(rt),Nt=qe.getAbrBitrateParameter("initialBitrate",rt),en=Q.get().streaming.abr.initialRepresentationRatio[rt];if(Nt===-1)if(en>-1){var Jt=H[mt][rt].getStreamInfo(),Yt=me.getAdaptationForType(Jt.index,rt,Jt).Representation_asArray;Nt=Array.isArray(Yt)?Yt[Math.max(Math.round(Yt.length*en)-1,0)].bandwidth/1e3:0}else Nt=isNaN(Wt)?rt===y.Z.VIDEO?1e3:100:Wt;return Nt},getQualityFor:Je,getAbandonmentStateFor:function(rt,mt){return ne[rt]&&ne[rt][mt]?ne[rt][mt].state:null},setPlaybackQuality:ht,checkPlaybackQuality:function(rt,mt){try{if(!(rt&&H&&H[mt]&&H[mt][rt]))return!1;if(we){var Wt=ge.getPlaybackQuality();Wt&&we.push(mt,Ee,Wt)}if(!Q.get().streaming.abr.autoSwitchBitrate[rt])return!1;var Nt=Je(rt,mt),en=zh(Me).create({abrController:L,switchHistory:Le[mt][rt],droppedFramesHistory:we,streamProcessor:H[mt][rt],currentValue:Nt,useBufferOccupancyABR:j[rt],useL2AABR:ue[rt],useLoLPABR:ae[rt],videoModel:ge}),Jt=at(rt,mt),Yt=dt(rt,mt),Dn=B.getMaxQuality(en),Nn=Dn.quality;return Jt!==void 0&&(Nn>sa.Z.NO_CHANGE?Nn:Nt)<Jt&&(Nn=Jt),Nn>Yt&&(Nn=Yt),Le[mt][rt].push({oldValue:Nt,newValue:Nn}),Nn>sa.Z.NO_CHANGE&&Nn!==Nt&&(ne[mt][rt].state===D.Z.ALLOW_LOAD||Nn<Nt)&&(Bt(rt,Nt,Nn,Yt,Dn.reason,mt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(rt){Se=rt},registerStreamType:function(rt,mt){var Wt=mt.getStreamInfo().id;H[Wt]||(H[Wt]={}),Le[Wt]||(Le[Wt]={}),ne[Wt]||(ne[Wt]={}),Le[Wt][rt]=gi(Me).create(),H[Wt][rt]=mt,ne[Wt][rt]={},ne[Wt][rt].state=D.Z.ALLOW_LOAD,function(Nt){var en=Q.get().streaming.abr.ABRStrategy;en===y.Z.ABR_STRATEGY_L2A?(j[Nt]=!1,ae[Nt]=!1,ue[Nt]=!0):en===y.Z.ABR_STRATEGY_LoLP?(j[Nt]=!1,ae[Nt]=!0,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_BOLA?(j[Nt]=!0,ae[Nt]=!1,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_THROUGHPUT?(j[Nt]=!1,ae[Nt]=!1,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_DYNAMIC&&(j[Nt]=!(!j||!j[Nt])&&j[Nt],ae[Nt]=!1,ue[Nt]=!1)}(rt),rt===y.Z.VIDEO&&An()},unRegisterStreamType:function(rt,mt){try{H[rt]&&H[rt][mt]&&delete H[rt][mt],Le[rt]&&Le[rt][mt]&&delete Le[rt][mt],ne[rt]&&ne[rt][mt]&&delete ne[rt][mt]}catch(Wt){}},setConfig:function(rt){rt&&(rt.streamController&&(V=rt.streamController),rt.domStorage&&(ze=rt.domStorage),rt.mediaPlayerModel&&(qe=rt.mediaPlayerModel),rt.customParametersModel&&(De=rt.customParametersModel),rt.cmsdModel&&(Be=rt.cmsdModel),rt.dashMetrics&&(se=rt.dashMetrics),rt.adapter&&(me=rt.adapter),rt.videoModel&&(ge=rt.videoModel),rt.settings&&(Q=rt.settings))},reset:function(){Re(),ke.off(T.Z.LOADING_PROGRESS,pe,L),ke.off(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),ke.off(_.Z.METRIC_ADDED,Ye,L),B&&B.reset()}},P=Ie.getLogger(L),Re(),L}Hf.__dashjs_factory_name="AbrController";var Wh=U.Z.getSingletonFactory(Hf);Wh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(Hf.__dashjs_factory_name,Wh);var Wn=Wh,xm=new Map([[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Mc(){var L,P,B,V,ee,J,H,ne,fe=this.context,Se=(0,m.Z)(fe).getInstance(),ye=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function me(){return ye.length>0}function ge(){if(B&&me()&&B.playbackRate===0){var we=document.createEvent("Event");we.initEvent("waiting",!0,!1),B.dispatchEvent(we)}}function qe(we,je){B&&B.addEventListener(we,je)}function De(we,je){B&&B.removeEventListener(we,je)}function Be(){return B?B.readyState:NaN}function ze(){return B?B.buffered:null}function Ee(we,je,j,ue,ae){if(B){for(var se=0;se<B.textTracks.length;se++)if(B.textTracks[se].kind===we&&(!je||B.textTracks[se].label==je)&&B.textTracks[se].language===j&&B.textTracks[se].isTTML===ue&&B.textTracks[se].isEmbedded===ae)return B.textTracks[se]}return null}function Le(we,je){return we===y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Be()>=we?(je(),null):function(j,ue){var ae=function se(){De(j,se),ue(j)};return qe(j,ae),{func:ae,event:j}}(xm.get(we),je)}return L={addEventListener:qe,addTextTrack:function(we,je,j,ue,ae){if(!B)return null;var se=Ee(we,je,j,ue,ae);return se||((se=B.addTextTrack(we,je,j)).isEmbedded=ae,se.isTTML=ue),se},appendChild:function(we){B&&(B.appendChild(we),we.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=we.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=we.isEmbedded))},getBufferRange:ze,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var we="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,je=null;return"getVideoPlaybackQuality"in B?je=B.getVideoPlaybackQuality():we&&(je={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),je},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Be,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:Ee,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(V)?B.currentTime:V:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().left-we.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().top-we.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){Se.on(T.Z.PLAYBACK_PLAYING,ge,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(V):null},isStalled:me,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var we=B.play();we&&we.catch&&typeof Promise<"u"&&we.catch(function(je){je.name==="NotAllowedError"&&Se.trigger(T.Z.PLAYBACK_NOT_ALLOWED),P.warn("Caught pending play exception - continuing (".concat(je,")"))})}},removeChild:function(we){B&&B.removeChild(we)},removeEventListener:De,reset:function(){clearTimeout(ne),Se.off(T.Z.PLAYBACK_PLAYING,ge,this)},setCurrentTime:function(we,je){B&&(ee&&ee.func&&ee.event&&De(ee.event,ee.func),V=we,ee=Le(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==V)try{V=je?function(j){var ue=ze(),ae=j,se=9999999999;if(ue)for(var Q=0;Q<ue.length;Q++){var Me=ue.start(Q),Ie=ue.end(Q),ke=Math.abs(Me-j),Re=Math.abs(Ie-j);if(j>=Me&&j<=Ie)return j;ke<se&&(se=ke,ae=Me),Re<se&&(se=Re,ae=Ie)}return ae}(V):V,isNaN(V)||(B.currentTime=V),V=NaN}catch(j){B.readyState===0&&j.code===j.INVALID_STATE_ERR&&(ne=setTimeout(function(){B.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(we){if(!(we==null||we&&/^(VIDEO|AUDIO)$/i.test(we.nodeName)))throw"element is not video or audio DOM type!";(B=we)&&(B.preload="auto")},setPlaybackRate:function(we){var je=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!je&&B.readyState<=2&&we>0?B.addEventListener("canplay",ie):B.playbackRate=we)},setSource:function(we){B&&(we?B.src=we:(B.removeAttribute("src"),B.load()))},setStallState:function(we,je){(function(j,ue){ue?function(ae){ae!==null&&B&&!B.seeking&&ye.indexOf(ae)===-1&&ye.push(ae)}(j):function(ae){var se=ye.indexOf(ae);ae!==null&&se!==-1&&ye.splice(se,1)}(j)})(we,je)},setTTMLRenderingDiv:function(we){(J=we).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(we){H=we},waitForReadyState:Le,setDisableRemotePlayback:function(we){B&&(B.disableRemotePlayback=we)}},P=(0,x.Z)(fe).getInstance().getLogger(L),V=NaN,L}Mc.__dashjs_factory_name="VideoModel";var Sr=U.Z.getSingletonFactory(Mc),kl=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],mu="dashjs_?_bitrate",Kr="dashjs_?_settings",Ho="localStorage",Li="lastBitrate",Mm="lastMediaSettings";function $h(L){L=L||{};var P,B,V,ee=this.context,J=L.settings;function H(ye){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[ye])}catch(me){return B.warn("DOMStorage access denied: "+me.message),V}if(!ie||ye!==Ho)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(me){B.warn("DOMStorage is supported, but cannot be used: "+me.message)}return V}function ne(){var ye=6e5;return Math.round(new Date().getTime()/ye)*ye}function fe(ye,ie){return H(ye)&&J.get().streaming[ie+"CachingInfo"].enabled}function Se(){if(!J)throw new Error(y.Z.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(ye){if(Se(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(fe(Ho,Li)){var me=mu.replace(/\?/,ye);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,De=parseFloat(ge.bitrate);isNaN(De)||qe?qe&&localStorage.removeItem(me):(ie=De,B.debug("Last saved bitrate for "+ye+" was "+De))}catch(Be){return null}}return ie},setSavedBitrateSettings:function(ye,ie){if(fe(Ho,Li)&&ie){var me=mu.replace(/\?/,ye);try{localStorage.setItem(me,JSON.stringify({bitrate:ie.toFixed(3),timestamp:ne()}))}catch(ge){B.error(ge.message)}}},getSavedMediaSettings:function(ye){if(Se(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(fe(Ho,Mm)){var me=Kr.replace(/\?/,ye);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ge.settings,qe&&(localStorage.removeItem(me),ie=null)}catch(De){return null}}return ie},setSavedMediaSettings:function(ye,ie){if(fe(Ho,Mm)){var me=Kr.replace(/\?/,ye);try{localStorage.setItem(me,JSON.stringify({settings:ie,timestamp:ne()}))}catch(ge){B.error(ge.message)}}}},B=(0,x.Z)(ee).getInstance().getLogger(P),H(Ho)&&kl.forEach(function(ye){var ie=localStorage.getItem(ye.oldKey);if(ie){localStorage.removeItem(ye.oldKey);try{localStorage.setItem(ye.newKey,ie)}catch(me){B.error(me.message)}}}),P}$h.__dashjs_factory_name="DOMStorage";var OE=U.Z.getSingletonFactory($h),Dm=w(2032),Xh=w(2011);function Dc(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge=this.context;function qe(Ee,Le,we,je){var j=null,ue=Ee?me.resolve(Ee.path):null,ae=je||{init:!0,url:ue?ue.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Le};P.debug("Start searching for initialization.");var se=ze(ae);ne.load({request:se,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(j=V.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,qe(Ee,Le,we,ae);Ee.range=j,we(Ee)},error:function(){we(Ee)}}),P.debug("Perform init search: "+ae.url)}function De(Ee,Le,we,je,j,ue){if(we&&(we.start===void 0||we.end===void 0)){var ae=we?we.toString().split("-"):null;we=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}j=j||Be;var se=null,Q=null,Me=!!we,Ie=Ee?me.resolve(Ee.path):null,ke={init:!1,url:Ie?Ie.url:void 0,range:Me?we:{start:0,end:1500},searching:!Me,bytesLoaded:ue?ue.bytesLoaded:0,bytesToLoad:1500,mediaType:Le},Re=ze(ke);ne.load({request:Re,success:function(pe){var Ne=ke.bytesToLoad,Ye=pe.byteLength;if(ke.bytesLoaded=ke.range.end-ke.range.start,se=V.parse(pe),(Q=se.getBox("sidx"))&&Q.isComplete){var dt,at,Je=Q.references;if(Je!=null&&Je.length>0&&(dt=Je[0].reference_type===1),dt){var ht,Bt,Gt,kt;P.debug("Initiate multiple SIDX load."),ke.range.end=ke.range.start+Q.size;var Ft=[],An=0,rt=(Q.offset||ke.range.start)+Q.size,mt=function(Nt){Nt?(Ft=Ft.concat(Nt),++An>=Bt&&(Ft.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),j(Ft,Ee,je))):j(null,Ee,je)};for(ht=0,Bt=Je.length;ht<Bt;ht++)Gt=rt,kt=rt+Je[ht].referenced_size-1,rt+=Je[ht].referenced_size,De(Ee,Le,{start:Gt,end:kt},je,mt,ke)}else P.debug("Parsing segments from SIDX. representation "+Le+" - id: "+Ee.id+" for range : "+ke.range.start+" - "+ke.range.end),at=function(Nt,en){for(var Jt,Yt,Dn,Nn,rr=Nt.references,ir=rr.length,It=Nt.timescale,$t=Nt.earliest_presentation_time,Zt=en.range.start+Nt.offset+Nt.first_offset+Nt.size,un=[],vn=0;vn<ir;vn++)Dn=rr[vn].subsegment_duration,Nn=rr[vn].referenced_size,(Jt=new Xh.Z).duration=Dn,Jt.startTime=$t,Jt.timescale=It,Yt=Zt+Nn-1,Jt.mediaRange=Zt+"-"+Yt,un.push(Jt),$t+=Dn,Zt+=Nn;return un}(Q,ke),j(at,Ee,je)}else{if(Q)ke.range.start=Q.offset||ke.range.start,ke.range.end=ke.range.start+(Q.size||Ne);else{if(Ye<ke.bytesLoaded)return void j(null,Ee,je);var Wt=se.getLastBox();Wt&&Wt.size?(ke.range.start=Wt.offset+Wt.size,ke.range.end=ke.range.start+Ne):ke.range.end+=Ne}De(Ee,Le,ke.range,je,null,ke)}},error:function(){j(null,Ee,je)}}),P.debug("Perform SIDX load for type ".concat(Le," : ").concat(ke.url," with range ").concat(ke.range.start," - ").concat(ke.range.end))}function Be(Ee,Le,we){we({segments:Ee,representation:Le,error:Ee?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ze(Ee){if(Ee.url){var Le=new Z.Z;return Le.setInfo(Ee),Le}}return L={setConfig:function(Ee){Ee.baseURLController&&(me=Ee.baseURLController),Ee.dashMetrics&&(J=Ee.dashMetrics),Ee.mediaPlayerModel&&(H=Ee.mediaPlayerModel),Ee.errHandler&&(B=Ee.errHandler),Ee.boxParser&&(V=Ee.boxParser),Ee.debug&&(P=Ee.debug.getLogger(L)),Ee.requestModifier&&(ee=Ee.requestModifier),Ee.errors&&(fe=Ee.errors),Ee.urlUtils&&(ie=Ee.urlUtils),Ee.constants&&(Se=Ee.constants),Ee.dashConstants&&(ye=Ee.dashConstants)},initialize:function(){ne=Ao(ge).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:V,errors:fe,urlUtils:ie,constants:Se,dashConstants:ye})},loadInitialization:function(Ee,Le){return new Promise(function(we){qe(Ee,Le,we)})},loadSegments:function(Ee,Le,we){return new Promise(function(je){De(Ee,Le,we,je)})},reset:function(){ne&&(ne.abort(),ne=null)}}}Dc.__dashjs_factory_name="SegmentBaseLoader";var $a=U.Z.getSingletonFactory(Dc);function Qh(L){var P;L=L||{};var B=new DataView(L.data),V=0;function ee(H,ne){var fe=!0,Se=0;if(ne===void 0&&(ne=!1),H.tag>16777215?(B.getUint32(V)!==H.tag&&(fe=!1),Se=4):H.tag>65535?(256*B.getUint16(V)+B.getUint8(V+2)!==H.tag&&(fe=!1),Se=3):H.tag>255?(B.getUint16(V)!==H.tag&&(fe=!1),Se=2):(B.getUint8(V)!==H.tag&&(fe=!1),Se=1),!fe&&H.required&&!ne)throw new Error("required tag not found");return fe&&(V+=Se),fe}function J(H){var ne=1,fe=128,Se=-1,ye=0,ie=B.getUint8(V),me=0;for(me=0;me<8;me+=1){if((ie&fe)===fe){ye=H===void 0?ie&~fe:ie,Se=me;break}fe>>=1}for(me=0;me<Se;me+=1,ne+=1)ye=ye<<8|255&B.getUint8(V+ne);return V+=ne,ye}return P={getPos:function(){return V},setPos:function(H){V=H},consumeTag:ee,consumeTagAndSize:function(H,ne){var fe=ee(H,ne);return fe&&J(),fe},parseTag:function(H){var ne;return ee(H),ne=J(),P[H.parse](ne)},skipOverElement:function(H,ne){var fe,Se=ee(H,ne);return Se&&(fe=J(),V+=fe),Se},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var ne;switch(H){case 4:ne=B.getFloat32(V),V+=4;break;case 8:ne=B.getFloat64(V),V+=8}return ne},getMatroskaUint:function(H){if(H>4)return function(Se){for(var ye=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,me=0;me<Se;me+=1){if(ie>ye)throw new Error("Value exceeds safe integer limit");ie*=256;var ge=B.getUint8(V+me);if(ie>Number.MAX_SAFE_INTEGER-ge)throw new Error("Value exceeds safe integer limit");ie+=ge}return V+=Se,ie}(H);for(var ne=0,fe=0;fe<H;fe+=1)ne<<=8,ne|=255&B.getUint8(V+fe);return V+=H,ne>>>0},moreData:function(){return V<B.byteLength}}}Qh.__dashjs_factory_name="EBMLParser";var Pc=U.Z.getClassFactory(Qh);function Xu(){var L,P,B,V,ee,J,H,ne,fe,Se,ye=this.context;function ie(me){var ge=new Z.Z;return ge.setInfo(me),ge}return L={setConfig:function(me){if(!(me.baseURLController&&me.dashMetrics&&me.mediaPlayerModel&&me.errHandler))throw new Error(y.Z.MISSING_CONFIG_ERROR);Se=me.baseURLController,J=me.dashMetrics,H=me.mediaPlayerModel,V=me.errHandler,fe=me.errors,P=me.debug.getLogger(L),ee=me.requestModifier},initialize:function(){ne=Ao(ye).create({errHandler:V,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:fe})},loadInitialization:function(me,ge){return new Promise(function(qe){var De=null,Be=me?Se.resolve(me.path):null,ze=me?me.range.split("-"):null,Ee={range:{start:ze?parseFloat(ze[0]):null,end:ze?parseFloat(ze[1]):null},request:De,url:Be?Be.url:void 0,init:!0,mediaType:ge};P.info("Start loading initialization."),De=ie(Ee),ne.load({request:De,success:function(){qe(me)},error:function(){qe(me)}}),P.debug("Perform init load: "+Ee.url)})},loadSegments:function(me,ge,qe){return new Promise(function(De){var Be=null,ze=me?Se.resolve(me.path):null,Ee=ze?ze.url:void 0;Be=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Be,url:Ee,init:!1,mediaType:ge}),P.debug("Parsing ebml header"),ne.load({request:Be,success:function(Le){(function(we,je,j,ue){if(we&&we.byteLength!==0){var ae,se,Q,Me,Ie=Pc(ye).create({data:we}),ke=j?j.split("-"):null,Re=null,pe={url:je,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:Re};for(P.debug("Parse EBML header: "+pe.url),Ie.skipOverElement(B.EBML),Ie.consumeTag(B.Segment),Q=Ie.getMatroskaCodedNum(),Q+=Ie.getPos(),Me=Ie.getPos();Ie.moreData()&&!Ie.consumeTagAndSize(B.Segment.Info,!0);)if(!(Ie.skipOverElement(B.Segment.SeekHead,!0)||Ie.skipOverElement(B.Segment.Tracks,!0)||Ie.skipOverElement(B.Segment.Cues,!0)||Ie.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var Ne=Ie.getMatroskaCodedNum(!0),Ye=Ie.getMatroskaCodedNum();Ne===B.Segment.Info.Duration.tag?ae=Ie[B.Segment.Info.Duration.parse](Ye):Ie.setPos(Ie.getPos()+Ye)}Re=ie(pe),ne.load({request:Re,success:function(dt){se=function(at,Je,ht,Bt){var Gt,kt,Ft,An,rt,mt,Wt,Nt;for(Ft=[],rt=0,mt=(kt=function(en){var Jt,Yt,Dn=[],Nn=Pc(ye).create({data:en});for(Nn.consumeTagAndSize(B.Segment.Cues);Nn.moreData()&&Nn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=Nn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];Nn.moreData()&&Nn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=Nn.getMatroskaCodedNum(),ir=Nn.getPos();if((Yt={}).Track=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Yt.Track===0)throw new Error("Cue track cannot be 0");Yt.ClusterPosition=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Yt),Nn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(at)).length;rt<mt;rt+=1)An=new Xh.Z,Gt=rt<kt.length-1?kt[rt+1].CueTime-kt[rt].CueTime:Bt-kt[rt].CueTime,An.duration=Gt,An.startTime=kt[rt].CueTime,An.timescale=1e3,Wt=kt[rt].CueTracks[0].ClusterPosition+Je,Nt=rt<kt.length-1?kt[rt+1].CueTracks[0].ClusterPosition+Je-1:ht-1,An.mediaRange=Wt+"-"+Nt,Ft.push(An);return P.debug("Parsed cues: "+Ft.length+" cues."),Ft}(dt,Me,Q,ae),ue(se)},error:function(){P.error("Download Error: Cues "+pe.url),ue(null)}}),P.debug("Perform cues load: "+pe.url+" bytes="+pe.range.start+"-"+pe.range.end)}else ue(null)})(Le,Ee,qe,function(we){De({segments:we,representation:me,error:we?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){De({representation:me,error:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){ne&&(ne.abort(),ne=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}Xu.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=U.Z.getSingletonFactory(Xu);function Kf(L){L=L||{};var P,B,V,ee=this.context,J=L.eventBus,H=L.events,ne=L.dashMetrics,fe=L.mediaPlayerModel,Se=L.errHandler,ye=L.baseURLController,ie=L.debug,me=L.boxParser,ge=L.requestModifier,qe=L.errors;function De(Be){return(Be?Be.split("/")[1]:"").toLowerCase()==="webm"}return P={initialize:function(){B.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Be){return De(Be.representation.mimeType)?V.loadInitialization(Be.representation,Be.mediaType):B.loadInitialization(Be.representation,Be.mediaType)},getSegmentList:function(Be){return De(Be.mimeType)?V.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null):B.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null)},reset:function(){B.reset(),V.reset()}},B=$a(ee).getInstance(),V=jr(ee).getInstance(),B.setConfig({baseURLController:ye,dashMetrics:ne,mediaPlayerModel:fe,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,boxParser:me,requestModifier:ge}),V.setConfig({baseURLController:ye,dashMetrics:ne,mediaPlayerModel:fe,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,requestModifier:ge}),P}Kf.__dashjs_factory_name="SegmentBaseController";var LE=U.Z.getSingletonFactory(Kf),Fl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Oc=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Fs=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Pm(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var kr=function(){function L(V){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=V[0]=="/",this.path=V.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},ne=J.indexOf("[");if(ne!=-1){H.name=J.substring(0,ne);var fe=J.substring(ne+1,J.length-1);ee.valid=ee.valid&&fe.indexOf("[")==-1;var Se=fe.indexOf("=");Se!=-1?(H.attribute={name:fe.substring(1,Se),value:fe.substring(Se+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(fe,10)-1}return H})}var P,B;return P=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,ee){for(var J=null,H=V,ne=1,fe="MPD";ne<this.path.length&&H!==null;){J=H;var Se=this.path[ne];if(fe=Se.name,ne!==this.path.length-1||!fe.startsWith("@")&&fe!=="text()"){var ye=J[fe+"_asArray"]||[];ye.length===0&&J[fe]&&ye.push(J[fe]),Se.position?H=ye[Se.position]||null:Se.attribute?function(){var ie=Se.attribute;H=ye.filter(function(me){return me[ie.name]==ie.value})[0]||null}():H=ye[0]||null}ne++}return H===null?null:fe.startsWith("@")?{name:fe.substring(1),leaf:H,target:H}:fe==="text()"?{name:"__text",leaf:H,target:H}:{name:fe,leaf:H,target:ee?J:H}}}])&&Pm(P.prototype,B),L}();function yr(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var vu=function(){function L(V,ee,J){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=V,this.xpath=ee,this.value=J,this.position=null}var P,B;return P=L,(B=[{key:"getMpdTarget",value:function(V){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,ee)}}])&&yr(P.prototype,B),L}();function Ai(){var L,P,B=this.context;return L={getIsPatch:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(V[v.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[v.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[v.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return P.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],ne=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return P.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;ne="".concat(ne,"/").concat(H.type)}var fe=new kr(ne);if(!fe.isValid())return P.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(ne)),null;var Se=null;fe.findsAttribute()||fe.findsTextReplace()?Se=H.__text||"":J!=="remove"&&(Se=H.__children.reduce(function(ie,me){var ge=Object.keys(me)[0];return ge!=="#text"&&(ie[ge]=ie[ge]||[],ie[ge].push(me[ge])),ie},{}));var ye=new vu(J,fe,Se);return J==="add"&&(ye.position=H.pos),ye}).filter(function(ee){return!!ee}):[]}},P=(0,x.Z)(B).getInstance().getLogger(L),L}Ai.__dashjs_factory_name="PatchManifestModel";var Jh=U.Z.getSingletonFactory(Ai);function Qu(){var L,P,B,V,ee,J,H,ne=this.context;function fe(ae,se,Q){var Me,Ie=P.getAdaptationsForType(V[0].mpd.manifest,ae,se);if(!Ie||Ie.length===0)return null;if(Ie.length>1&&Q){var ke=ie(Q,se);if(ee[Q.id]&&ee[Q.id][se]){for(var Re=0,pe=Ie.length;Re<pe;Re++)if(Se(ee[Q.id][se],ke[Re]))return Ie[Re]}for(var Ne=0,Ye=Ie.length;Ne<Ye;Ne++)if(Me=Ie[Ne],P.getRolesForAdaptation(Me).filter(function(dt){return dt.value===v.Z.MAIN})[0])return Ie[Ne]}return Ie[0]}function Se(ae,se){if(!ae||!se)return!1;var Q=ae.id===se.id,Me=ae.codec===se.codec,Ie=ae.viewpoint===se.viewpoint,ke=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(se.viewpointsWithSchemeIdUri),Re=ae.lang===se.lang,pe=ae.roles.toString()===se.roles.toString(),Ne=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(se.rolesWithSchemeIdUri),Ye=ae.accessibility.toString()===se.accessibility.toString(),dt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(se.accessibilitiesWithSchemeIdUri),at=ae.audioChannelConfiguration.toString()===se.audioChannelConfiguration.toString(),Je=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(se.audioChannelConfigurationsWithSchemeIdUri);return Q&&Me&&Ie&&ke&&Re&&pe&&Ne&&Ye&&dt&&at&&Je}function ye(ae,se,Q,Me,Ie,ke){var Re,pe,Ne,Ye,dt,at,Je=[];if(!Me||Me.length===0)return[];var ht=P.getAdaptationsForPeriod(se);for(Ye=0,at=Me.length;Ye<at;Ye++)if(Re=Me[Ye],pe=Ee(ht[Ne=P.getIndexForAdaptation(Re,ae,Q.index)]),ke){var Bt=pe.accessibility.length;for(dt=0;dt<Bt;dt++)if(pe){var Gt=pe.accessibility[dt];if(Gt.indexOf("cea-608:")===0){var kt=Gt.substring(8).split(";");if(kt[0].substring(0,2)==="CC")for(dt=0;dt<kt.length;dt++)pe||(pe=Ee.call(this,ht[Ne])),Le(pe,kt[dt].substring(0,3),kt[dt].substring(4)),Je.push(pe),pe=null;else for(dt=0;dt<kt.length;dt++)pe||(pe=Ee.call(this,ht[Ne])),Le(pe,"CC"+(dt+1),kt[dt]),Je.push(pe),pe=null}else Gt.indexOf("cea-608")===0&&(Le(pe,J.CC1,"eng"),Je.push(pe),pe=null)}}else Ie===J.IMAGE?(pe.type=J.IMAGE,Je.push(pe),pe=null):pe&&Je.push(pe);return Je}function ie(ae,se,Q){var Me=V,Ie=Q,ke=[];if(Ie)je(),Me=me(Ie);else{if(!(V.length>0))return ke;Ie=V[0].mpd.manifest}var Re=ze(ae,Me),pe=P.getAdaptationsForType(Ie,ae?ae.index:null,se);return ke=ye(Ie,Re,ae,pe,se),se===J.TEXT&&(pe=P.getAdaptationsForType(Ie,ae?ae.index:null,J.VIDEO),ke=ke.concat(ye(Ie,Re,ae,pe,se,!0))),ke}function me(ae){var se=ge(ae);return P.getRegularPeriods(se)}function ge(ae){var se=De(ae);return P.getMpd(se)}function qe(){V=[],ee={}}function De(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Be(ae){try{var se=ze(ae.streamInfo,V),Q=P.getAdaptationsForPeriod(se);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Me){return null}}function ze(ae,se){for(var Q=se.length,Me=0;Me<Q;Me++){var Ie=se[Me];if(ae&&ae.id===Ie.id)return Ie}return null}function Ee(ae){if(!ae)return null;var se,Q,Me,Ie,ke,Re=new Oc,pe=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Re.id=ae.id,Re.index=ae.index,Re.type=ae.type,Re.streamInfo=we(ae.period),Re.representationCount=P.getRepresentationCount(pe),Re.labels=P.getLabelsForAdaptation(pe),Re.lang=P.getLanguageForAdaptation(pe),Re.segmentAlignment=P.getSegmentAlignment(pe),Re.subSegmentAlignment=P.getSubSegmentAlignment(pe),se=P.getViewpointForAdaptation(pe),Re.viewpoint=se.length?se[0].value:void 0,Re.viewpointsWithSchemeIdUri=se,ke=P.getAccessibilityForAdaptation(pe),Re.accessibility=ke.map(function(Je){var ht=Je.value,Bt=ht;return Je.schemeIdUri&&Je.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(Bt=ht?"cea-608:"+ht:"cea-608",Re.embeddedCaptions=!0),Bt}),Re.accessibilitiesWithSchemeIdUri=ke,Q=P.getAudioChannelConfigurationForAdaptation(pe),Re.audioChannelConfiguration=Q.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Q,Re.audioChannelConfiguration.length===0&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0&&(Me=P.getAudioChannelConfigurationForRepresentation(pe.Representation_asArray[0]),Re.audioChannelConfiguration=Me.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Me),Ie=P.getRolesForAdaptation(pe),Re.roles=Ie.map(function(Je){return Je.value}),Re.rolesWithSchemeIdUri=Ie,Re.codec=P.getCodec(pe),Re.mimeType=P.getMimeType(pe),Re.contentProtection=P.getContentProtectionData(pe),Re.bitrateList=P.getBitrateListForAdaptation(pe),Re.selectionPriority=P.getSelectionPriority(pe),Re.contentProtection){var Ne=Re.contentProtection.map(function(Je){return P.getKID(Je)}).filter(function(Je){return Je!==null});if(Ne.length){var Ye=Ne[0];Re.contentProtection.forEach(function(Je){Je.keyId=Ye})}}if(Re.isText=P.getIsText(pe),Re.supplementalProperties=P.getSupplementalPropertiesForAdaptation(pe),(!Re.supplementalProperties||Object.keys(Re.supplementalProperties).length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var dt=pe.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesForRepresentation(Je)});dt.every(function(Je){return JSON.stringify(Je)===JSON.stringify(dt[0])})&&(Re.supplementalProperties=dt[0])}if(Re.supplementalPropertiesAsArray=P.getSupplementalPropertiesAsArrayForAdaptation(pe),(!Re.supplementalPropertiesAsArray||Re.supplementalPropertiesAsArray.length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var at=pe.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesAsArrayForRepresentation(Je)});at.every(function(Je){return JSON.stringify(Je)===JSON.stringify(at[0])})&&(Re.supplementalPropertiesAsArray=at[0])}return Re.essentialProperties=P.getEssentialPropertiesForAdaptation(pe),Re.essentialPropertiesAsArray=P.getEssentialPropertiesAsArrayForAdaptation(pe),Re.isFragmented=P.getIsFragmented(pe),Re.isEmbedded=!1,Re}function Le(ae,se,Q){ae.id=se,ae.index=100+parseInt(se.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Me=Ei()(Q);ae.lang=Me||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function we(ae){var se,Q,Me=new Dr;return Me.id=ae.id,Me.index=ae.index,Me.start=ae.start,Me.duration=ae.duration,Me.manifestInfo=(se=ae.mpd,(Q=new Fs).dvrWindowSize=se.timeShiftBufferDepth,Q.loadedTime=se.manifest.loadedTime,Q.availableFrom=se.availabilityStartTime,Q.minBufferTime=se.manifest.minBufferTime,Q.maxFragmentDuration=se.maxSegmentDuration,Q.duration=P.getDuration(se.manifest),Q.isDynamic=P.getIsDynamic(se.manifest),Q.serviceDescriptions=P.getServiceDescriptions(se.manifest),Q.protocol=se.manifest.protocol,Q),Me.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Me.start+Me.duration-Me.manifestInfo.duration)<1,Me}function je(){if(!J)throw new Error("setConfig function has to be called previously")}function j(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function ue(ae,se,Q){var Me,Ie,ke,Re,pe;if(ae){for(Me=ae.AdaptationSet_asArray,Re=0;Re<Me.length;Re+=1)for(ke=Me[Re].Representation_asArray,pe=0;pe<ke.length;pe+=1)if(se===(Ie=ke[pe]).id)return Q?pe:Ie}return null}return L={getBandwidthForRepresentation:function(ae,se){var Q;return(Q=ue(j(se),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,se){return function(Q,Me){var Ie=ue(Q,Me,!0);return Ie!==null?Ie:-1}(j(se),ae)},getMaxIndexForBufferType:function(ae,se){return function(Q,Me){var Ie,ke,Re,pe;if(!Q||!Me)return-1;for(ke=Q.AdaptationSet_asArray,pe=0;pe<ke.length;pe+=1)if(Re=(Ie=ke[pe]).Representation_asArray,P.getIsTypeOf(Ie,Me))return Re.length;return-1}(j(se),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var se=new Fl,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Me=P.getRepresentationFor(ae.index,Q);return se.id=ae.id,se.quality=ae.index,se.bandwidth=P.getBandwidth(Me),se.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),se.MSETimeOffset=ae.MSETimeOffset,se.mediaInfo=Ee(ae.adaptation),se}return null},getStreamsInfo:function(ae,se){var Q=[],Me=V;if(ae&&(je(),Me=me(ae)),Me.length>0){(!se||se>Me.length)&&(se=Me.length);for(var Ie=0;Ie<se;Ie++)Q.push(we(Me[Ie]))}return Q},getMediaInfoForType:function(ae,se){if(V.length===0||!ae)return null;var Q=ze(ae,V);if(!Q)return null;var Me=P.getAdaptationsForPeriod(Q),Ie=fe(ae.index,se,ae);return Ie?Ee(Me[P.getIndexForAdaptation(Ie,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:fe,getRealAdaptation:function(ae,se){var Q,Me,Ie=ze(ae,V);return Q=se?se.id:null,V.length>0&&Ie&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,Ie.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,Ie.index)),Me},getProducerReferenceTimes:function(ae,se){var Q,Me,Ie=ze(ae,V);return Q=se?se.id:null,V.length>0&&Ie&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,Ie.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,Ie.index)),Me?P.getProducerReferenceTimesForAdaptation(Me):[]},getRealPeriodByIndex:function(ae){return P.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return P.getEssentialPropertiesForRepresentation(ae)}catch(se){return[]}},getVoRepresentations:function(ae){var se=Be(ae);return P.getRepresentationsForAdaptation(se)},getEventsFor:function(ae,se,Q){var Me=[];if(V.length>0){var Ie=V[0].mpd.manifest;if(ae instanceof Dr){var ke=ze(ae,V);Me=P.getEventsForPeriod(ke)}else if(ae instanceof Oc){var Re=ze(Q,V);Me=P.getEventStreamForAdaptationSet(Ie,Be(ae),Re)}else if(ae instanceof Fl){var pe=ze(Q,V);Me=P.getEventStreamForRepresentation(Ie,se,pe)}}return Me},getEvent:function(ae,se,Q,Me){try{if(!ae||!se||isNaN(Q)||!Me)return null;var Ie=ae.scheme_id_uri,ke=ae.value;if(!se[Ie+"/"+ke])return null;var Re,pe=new no,Ne=ae.timescale||1,Ye=Me.adaptation.period.start,dt=se[Ie+"/"+ke],at=isNaN(Me.presentationTimeOffset)?isNaN(dt.presentationTimeOffset)?0:dt.presentationTimeOffset:Me.presentationTimeOffset,Je=ae.presentation_time_delta/Ne;Re=ae.version===0?Ye+Q-at+Je:Ye-at+Je;var ht=ae.event_duration/Ne,Bt=ae.id,Gt=ae.message_data;return pe.eventStream=dt,pe.eventStream.value=ke,pe.eventStream.timescale=Ne,pe.duration=ht,pe.id=Bt,pe.calculatedPresentationTime=Re,pe.messageData=Gt,pe.presentationTimeDelta=Je,pe}catch(kt){return null}},getMpd:ge,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&P.setConfig({errHandler:ae.errHandler}),ae.BASE64&&P.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;je(),V=me(ae)},getIsTextTrack:function(ae){return P.getIsText(ae)},getUTCTimingSources:function(){var ae=De();return P.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return P.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var se=ge(ae);return P.getAvailabilityStartTime(se)},getIsTypeOf:function(ae,se){return P.getIsTypeOf(ae,se)},getIsDynamic:function(ae){var se=De(ae);return P.getIsDynamic(se)},getDuration:function(ae){var se=De(ae);return P.getDuration(se)},getRegularPeriods:me,getContentSteering:function(ae){return P.getContentSteering(ae)},getLocation:function(ae){return P.getLocation(ae)},getPatchLocation:function(ae){var se=P.getPatchLocation(ae),Q=P.getPublishTime(ae);return se&&se.length!==0&&Q?se.filter(function(Me){return isNaN(Me.ttl)||Q.getTime()+Me.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return P.getManifestUpdatePeriod(ae,se)},getPublishTime:function(ae){return P.getPublishTime(ae)},getIsDVB:function(ae){return P.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return P.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return P.getRepresentationSortFunction()},getCodec:function(ae,se,Q){return P.getCodec(ae,se,Q)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var se=V.filter(function(Q){return Q.id===ae});return se&&se.length>0?se[0]:null},setCurrentMediaInfo:function(ae,se,Q){ee[ae]=ee[ae]||{},ee[ae][se]=ee[ae][se]||{},ee[ae][se]=Q},isPatchValid:function(ae,se){var Q=P.getId(ae),Me=B.getMpdId(se),Ie=P.getPublishTime(ae),ke=B.getPublishTime(se),Re=B.getOriginalPublishTime(se);return!!(Q&&Me&&Q==Me&&Ie&&Re&&Ie.getTime()==Re.getTime()&&ke&&Ie.getTime()<ke.getTime())},applyPatchToManifest:function(ae,se){B.getPatchOperations(se).forEach(function(Q){var Me=Q.getMpdTarget(ae);if(Me!==null){var Ie=Me.name,ke=Me.target,Re=Me.leaf;if(Q.xpath.findsAttribute()||Ie==="__text")switch(Q.action){case"add":case"replace":ke[Ie]=Q.value;break;case"remove":delete ke[Ie]}else{var pe=(ke[Ie+"_asArray"]||[]).indexOf(Re),Ne=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete ke[Ie],pe!=-1)){var Ye=ke[Ie+"_asArray"];Ye.splice(pe,1),Ye.length>1?ke[Ie]=Ye:Ye.length==1?ke[Ie]=Ye[0]:delete ke[Ie+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(dt){var at=Q.value[dt],Je=ke[dt+"_asArray"]||[];if(Je.length===0&&ke[dt]&&Je.push(ke[dt]),Je.length===0)Je=at;else{var ht=Je.length;ht=dt==Ie&&pe!=-1?pe+(Ne?0:1)+(Q.action=="replace"?-1:0):Ne?0:Je.length,Je.splice.apply(Je,[ht,0].concat(at))}ke[dt+"_asArray"]=Je,ke[dt]=Je.length==1?Je[0]:Je})}}})},areMediaInfosEqual:Se,reset:qe},P=Vn(ne).getInstance(),B=Jh(ne).getInstance(),qe(),L}Qu.__dashjs_factory_name="DashAdapter";var Om=U.Z.getSingletonFactory(Qu);function Vf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ul=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var P,B;return P=L,B=[{key:"round10",value:function(V,ee){return function(J,H,ne){return ne===void 0||+ne==0?Math[J](H):(ne=+ne,(H=+H)===null||isNaN(H)||typeof ne!="number"||ne%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-ne:-ne)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+ne:ne))))}("round",V,ee)}}],B&&Vf(P,B),L}(),kE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Lm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},km=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},zf=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=D.Z.BUFFER_EMPTY},ep=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Bl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Lc(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var FE=function L(){Lc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Yf=function L(){Lc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},UE=function L(){Lc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},$r=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ri=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function yu(L){var P,B,V=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function ne(ge){J.trigger(T.Z.METRIC_CHANGED,{mediaType:ge}),H()}function fe(ge,qe,De){J.trigger(T.Z.METRIC_UPDATED,{mediaType:ge,metric:qe,value:De}),ne(ge)}function Se(ge,qe,De){J.trigger(T.Z.METRIC_ADDED,{mediaType:ge,metric:qe,value:De}),ne(ge)}function ye(ge,qe){var De=null;return ge&&(B.hasOwnProperty(ge)?De=B[ge]:qe||(De=new kE,B[ge]=De)),De}function ie(ge,qe,De){var Be=ye(ge);Be!==null&&(Be[qe].push(De),Be[qe].length>V.get().streaming.metrics.maxListDepth&&Be[qe].shift())}function me(ge,qe,De){ie(ge,qe,De),Se(ge,qe,De)}return P={clearCurrentMetricsForType:function(ge){delete B[ge],ne(ge)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:ye,addHttpRequest:function ge(qe,De,Be,ze,Ee,Le,we,je,j,ue,ae,se,Q,Me,Ie,ke,Re){var pe=new tt.w;Le!=null&&Le!==ze&&(ge(qe,null,Be,ze,Ee,null,null,je,j,null,null,null,Q,null,null,ke,Re),pe.actualurl=Le),pe.tcpid=De,pe.type=Be,pe.url=ze,pe.range=je,pe.trequest=j,pe.tresponse=ue,pe.responsecode=se,pe.cmsd=Re,pe._tfinish=ae,pe._stream=qe,pe._mediaduration=Q,pe._quality=Ee,pe._responseHeaders=Me,pe._serviceLocation=we,pe._fileLoaderType=ke,Ie?Ie.forEach(function(Ne){(function(Ye,dt,at,Je){var ht=new tt.O;ht.s=dt,ht.d=at,ht.b=Je,Ye.trace.push(ht),Ye.interval||(Ye.interval=0),Ye.interval+=at})(pe,Ne.s,Ne.d,Ne.b)}):(delete pe.interval,delete pe.trace),me(qe,D.Z.HTTP_REQUEST,pe)},addRepresentationSwitch:function(ge,qe,De,Be,ze){var Ee=new Lm;Ee.t=qe,Ee.mt=De,Ee.to=Be,ze?Ee.lto=ze:delete Ee.lto,me(ge,D.Z.TRACK_SWITCH,Ee)},addBufferLevel:function(ge,qe,De){var Be=new km;Be.t=qe,Be.level=De,me(ge,D.Z.BUFFER_LEVEL,Be)},addBufferState:function(ge,qe,De){var Be=new zf;Be.target=De,Be.state=qe,me(ge,D.Z.BUFFER_STATE,Be)},addDVRInfo:function(ge,qe,De,Be){var ze=new ep;ze.time=qe,ze.range=Be,ze.manifestInfo=De,me(ge,D.Z.DVR_INFO,ze)},addDroppedFrames:function(ge,qe){var De=new Bl,Be=ye(ge).DroppedFrames;qe&&(De.time=qe.creationTime,De.droppedFrames=qe.droppedVideoFrames,Be.length>0&&Be[Be.length-1]==De||me(ge,D.Z.DROPPED_FRAMES,De))},addSchedulingInfo:function(ge,qe,De,Be,ze,Ee,Le,we,je){var j=new $r;j.mediaType=ge,j.t=qe,j.type=De,j.startTime=Be,j.availabilityStartTime=ze,j.duration=Ee,j.quality=Le,j.range=we,j.state=je,me(ge,D.Z.SCHEDULING_INFO,j)},addRequestsQueue:function(ge,qe,De){var Be=new Ri;Be.loadingRequests=qe,Be.executedRequests=De,ye(ge).RequestsQueue=Be,Se(ge,D.Z.REQUESTS_QUEUE,Be)},addManifestUpdate:function(ge,qe,De,Be,ze,Ee,Le,we,je,j){var ue=new FE;ue.mediaType=ge,ue.type=qe,ue.requestTime=De,ue.fetchTime=Be,ue.availabilityStartTime=ze,ue.presentationStartTime=Ee,ue.clientTimeOffset=Le,ue.currentTime=we,ue.buffered=je,ue.latency=j,ie(y.Z.STREAM,D.Z.MANIFEST_UPDATE,ue),Se(ge,D.Z.MANIFEST_UPDATE,ue)},updateManifestUpdateInfo:function(ge,qe){if(ge){for(var De in qe)ge[De]=qe[De];fe(ge.mediaType,D.Z.MANIFEST_UPDATE,ge)}},addManifestUpdateStreamInfo:function(ge,qe,De,Be,ze){if(ge){var Ee=new Yf;Ee.id=qe,Ee.index=De,Ee.start=Be,Ee.duration=ze,ge.streamInfo.push(Ee),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_STREAM_INFO,ge)}},addManifestUpdateRepresentationInfo:function(ge,qe,De,Be,ze,Ee,Le,we){if(ge&&ge.representationInfo){var je=new UE;je.id=qe,je.index=De,je.streamIndex=Be,je.mediaType=ze,je.startNumber=Le,je.fragmentInfoType=we,je.presentationTimeOffset=Ee,ge.representationInfo.push(je),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_TRACK_INFO,ge)}},addPlayList:function(ge){ge.trace&&Array.isArray(ge.trace)?ge.trace.forEach(function(qe){qe.hasOwnProperty("subreplevel")&&!qe.subreplevel&&delete qe.subreplevel}):delete ge.trace,me(y.Z.STREAM,D.Z.PLAY_LIST,ge)},addDVBErrors:function(ge){me(y.Z.STREAM,D.Z.DVB_ERRORS,ge)}},B={},P}yu.__dashjs_factory_name="MetricsModel";var Ra=U.Z.getSingletonFactory(yu);function ua(L){L=L||{};var P,B,V,ee,J=this.context,H=L.metricsModel;function ne(ye){var ie=H.getMetricsFor(ye,!0);if(!ie)return null;var me,ge=ie.HttpList,qe=null;if(!ge||ge.length<=0)return null;for(me=ge.length-1;me>=0;){if(ge[me].responsecode){qe=ge[me];break}me--}return qe}function fe(ye){var ie=H.getMetricsFor(ye,!0);return ie&&ie.HttpList?ie.HttpList:[]}function Se(ye,ie){if(!ye)return null;var me=ye[ie];return me&&me.length!==0?me[me.length-1]:null}return P={getCurrentRepresentationSwitch:function(ye){return Se(H.getMetricsFor(ye,!0),D.Z.TRACK_SWITCH)},getCurrentBufferState:function(ye){return Se(H.getMetricsFor(ye,!0),D.Z.BUFFER_STATE)},getCurrentBufferLevel:function(ye){var ie=Se(H.getMetricsFor(ye,!0),D.Z.BUFFER_LEVEL);return ie?Ul.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:ne,getHttpRequests:fe,getCurrentDroppedFrames:function(){return Se(H.getMetricsFor(y.Z.VIDEO,!0),D.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(ye){return Se(H.getMetricsFor(ye,!0),D.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(ye){return Se(ye?H.getMetricsFor(ye,!0):H.getMetricsFor(y.Z.VIDEO,!0)||H.getMetricsFor(y.Z.AUDIO,!0),D.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Se(H.getMetricsFor(y.Z.STREAM),D.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(ye,ie){if(!ie)return null;var me={},ge=ne(ye);ge&&(me=rn.Z.parseHttpHeaders(ge._responseHeaders));var qe=me[ie.toLowerCase()];return qe===void 0?null:qe},getLatestMPDRequestHeaderValueByID:function(ye){if(!ye)return null;var ie,me,ge,qe={};for(ge=(ie=fe(y.Z.STREAM)).length-1;ge>=0;ge--)if((me=ie[ge]).type===tt.w.MPD_TYPE){qe=rn.Z.parseHttpHeaders(me._responseHeaders);break}var De=qe[ye.toLowerCase()];return De===void 0?null:De},addRepresentationSwitch:function(ye,ie,me,ge,qe){H.addRepresentationSwitch(ye,ie,me,ge,qe)},addDVRInfo:function(ye,ie,me,ge){H.addDVRInfo(ye,ie,me,ge)},updateManifestUpdateInfo:function(ye){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,ye)},addManifestUpdateStreamInfo:function(ye){if(ye){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,ye.id,ye.index,ye.start,ye.duration)}},addManifestUpdateRepresentationInfo:function(ye,ie){if(ye){var me=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(me,ye.id,ye.index,ye.streamIndex,ie,ye.presentationTimeOffset,ye.startNumber,ye.fragmentInfoType)}},addManifestUpdate:function(ye){H.addManifestUpdate(y.Z.STREAM,ye.type,ye.requestStartDate,ye.requestEndDate)},addHttpRequest:function(ye,ie,me,ge,qe,De){H.addHttpRequest(ye.mediaType,null,ye.type,ye.url,ye.quality,ie,ye.serviceLocation||null,ye.range||null,ye.requestStartDate,ye.firstByteDate,ye.requestEndDate,me,ye.duration,ge,qe,ye.fileLoaderType,De)},addSchedulingInfo:function(ye,ie){H.addSchedulingInfo(ye.mediaType,new Date,ye.type,ye.startTime,ye.availabilityStartTime,ye.duration,ye.quality,ye.range,ie)},addRequestsQueue:function(ye,ie,me){H.addRequestsQueue(ye,ie,me)},addBufferLevel:function(ye,ie,me){H.addBufferLevel(ye,ie,me)},addBufferState:function(ye,ie,me){H.addBufferState(ye,ie,me)},addDroppedFrames:function(ye){H.addDroppedFrames(y.Z.VIDEO,ye)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(ye){H.addDVBErrors(ye)},createPlaylistMetrics:function(ye,ie){(ee=new it).start=new Date,ee.mstart=ye,ee.starttype=ie},createPlaylistTraceMetrics:function(ye,ie,me){B===!0&&(B=!1,(V=new et).representationid=ye,V.start=new Date,V.mstart=ie,V.playbackspeed=me!==null?me.toString():null)},updatePlayListTraceMetrics:function(ye){if(V)for(var ie in V)V[ie]=ye[ie]},pushPlayListTraceMetrics:function(ye,ie){if(B===!1&&ee&&V&&V.start){var me=V.start,ge=ye.getTime()-me.getTime();V.duration=ge,V.stopreason=ie,ee.trace.push(V),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Ra(J).getInstance({settings:L.settings}),B=!0,V=null,ee=null,P}ua.__dashjs_factory_name="DashMetrics";var Us=U.Z.getSingletonFactory(ua);function _r(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Ze.Z)(ee).getInstance();function ne(ze){V=ze}function fe(ze,Ee,Le,we){var je,j=Ee.adaptation.period.mpd,ue=j.availabilityStartTime;if(we)je=Le&&j.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(ue.getTime()+1e3*(ze+j.timeShiftBufferDepth)):j.availabilityEndTime;else if(Le){var ae=Ee.availabilityTimeOffset;je=new Date(ue.getTime()+1e3*(ze-ae))}else je=ue;return je}function Se(ze,Ee){return(ze.getTime()-Ee.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function ye(ze,Ee){return ze+(Ee.adaptation.period.start-Ee.presentationTimeOffset)}function ie(ze){var Ee={start:NaN,end:NaN},Le=ze[0].getAdapter().getRegularPeriods()[0],we=Se(new Date,Le);if(!ze||ze.length===0)return{range:Ee,now:we};ze.forEach(function(j){var ue=j.getAdapter(),ae=ue.getMediaInfoForType(j.getStreamInfo(),y.Z.VIDEO)||ue.getMediaInfoForType(j.getStreamInfo(),y.Z.AUDIO),se=ue.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(se)if(se.segmentInfoType===v.Z.SEGMENT_TIMELINE)Q=function(Ie){var ke,Re,pe,Ne,Ye=Ie.adaptation.period.mpd.manifest.Period_asArray[Ie.adaptation.period.index].AdaptationSet_asArray[Ie.adaptation.index],dt=P.getRepresentationFor(Ie.index,Ye),at=dt.SegmentTemplate||dt.SegmentList,Je=at.SegmentTimeline,ht=at.timescale,Bt=Je.S_asArray,Gt={start:0,end:0},kt=Bt[0].t,Ft=!isNaN(kt),An=Ft?kt:0,rt=0;for(Ft&&(Gt.start=ye(An/ht,Ie)),pe=0,Ne=Bt.length;pe<Ne;pe++)Re=0,(ke=Bt[pe]).hasOwnProperty("r")&&(Re=ke.r),rt+=ke.d*(1+Re);return Gt.end=ye((An+rt)/ht,Ie),Gt}(se);else{var Me=se.adaptation.period;Q.start=Me.start,Q.end=Math.max(we,Me.start+Me.duration)}!isNaN(Q.start)&&(isNaN(Ee.start)||Ee.start>Q.start)&&(Ee.start=Q.start),!isNaN(Q.end)&&(isNaN(Ee.end)||Ee.end<Q.end)&&(Ee.end=Q.end)}),Ee.end=Math.min(we,Ee.end);var je=ge(ze,Ee.end,!0);return Ee.end=isNaN(je)?Ee.end:je,Ee.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(Ee.end)?Math.max(Ee.end-Le.mpd.timeShiftBufferDepth,Ee.start):Ee.start,Ee.start=ge(ze,Ee.start),{range:Ee,now:we}}function me(ze,Ee){B=ze-Ee.end}function ge(ze,Ee){var Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var we=0,je=!1,j=NaN;!je&&we<ze.length;){var ue=ze[we].getStreamInfo();ue.start<=Ee&&(!isFinite(ue.duration)||ue.start+ue.duration>=Ee)?(j=Ee,je=!0):!Le&&ue.start>Ee&&(isNaN(j)||ue.start<j)?j=ue.start:Le&&ue.start+ue.duration<Ee&&(isNaN(j)||ue.start+ue.duration>j)&&(j=ue.start+ue.duration),we+=1}return j}catch(ae){return Ee}}function qe(ze){ze.offset===void 0||isNaN(ze.offset)||ne(ze.offset/1e3)}function De(){V=0,B=0}function Be(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this),De()}return L={initialize:function(){De(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:ne,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function(ze,Ee,Le){return fe(ze,Ee,Le)},calcAvailabilityEndTimeFromPresentationTime:function(ze,Ee,Le){return fe(ze,Ee,Le,!0)},calcPresentationTimeFromWallTime:Se,calcPresentationTimeFromMediaTime:ye,calcPeriodRelativeTimeFromMpdRelativeTime:function(ze,Ee){return Ee-ze.adaptation.period.start},calcMediaTimeFromPresentationTime:function(ze,Ee){return ze-Ee.adaptation.period.start+Ee.presentationTimeOffset},calcWallTimeForSegment:function(ze,Ee){var Le,we,je;return Ee&&(Le=ze.representation.adaptation.period.mpd.suggestedPresentationDelay,we=ze.presentationStartTime+Le,je=new Date(ze.availabilityStartTime.getTime()+1e3*we)),je},calcTimeShiftBufferWindow:function(ze,Ee){if(!Ee)return function(we){var je={start:NaN,end:NaN},j=0,ue=NaN;return we.forEach(function(ae){var se=ae.getStreamInfo();j+=se.duration,(isNaN(ue)||se.start<ue)&&(ue=se.start)}),je.start=ue,je.end=ue+j,je}(ze);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Le=ie(ze);return me(Le.now,Le.range),Le.range}return function(we){var je={start:NaN,end:NaN};if(!we||we.length===0)return je;var j=we[0].getAdapter().getRegularPeriods()[0],ue=Se(new Date,j),ae=j.mpd.timeShiftBufferDepth,se=isNaN(ae)?0:ue-ae;if(je.start=ge(we,se),je.end=!isNaN(je.start)&&ue<je.start?ue:ge(we,ue,!0),!isNaN(ae)&&je.end<ue-ae&&(je.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(we);if(Q.range.end<je.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.INVALID_DVR_WINDOW}),me(Q.now,Q.range),Q.range}return je}(ze)},reset:Be},P=Vn(ee).getInstance(),Be(),L}_r.__dashjs_factory_name="TimelineConverter";var Eu=U.Z.getSingletonFactory(_r),Wf=w(4593),la=w(6934);function $f(L){return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},$f(L)}function Xa(L,P){return Xa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Xa(L,P)}function Xf(L,P){return!P||$f(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ju(L){return Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ju(L)}var Bs=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Xa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ju(P);if(B){var ne=Ju(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Xf(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Oc),Ro=w(2295);function kc(){var L=0;function P(ne){for(var fe="",Se=0;Se<ne.length;++Se)fe+=ne[Se].uchar;return fe.length-fe.replace(/^\s+/,"").length}function B(ne){return"left: "+3.125*ne.x+"%; top: "+6.66*ne.y1+"%; width: "+(100-3.125*ne.x)+"%; height: "+6.66*Math.max(ne.y2-1-ne.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(ne){return ne==="red"?"rgb(255, 0, 0)":ne==="green"?"rgb(0, 255, 0)":ne==="blue"?"rgb(0, 0, 255)":ne==="cyan"?"rgb(0, 255, 255)":ne==="magenta"?"rgb(255, 0, 255)":ne==="yellow"?"rgb(255, 255, 0)":ne==="white"?"rgb(255, 255, 255)":ne==="black"?"rgb(0, 0, 0)":ne}function ee(ne,fe){var Se=ne.videoHeight/15;return fe?"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(fe.foreground?V(fe.foreground):"rgb(255, 255, 255)")+"; font-style: "+(fe.italics?"italic":"normal")+"; text-decoration: "+(fe.underline?"underline":"none")+"; white-space: pre; background-color: "+(fe.background?V(fe.background):"transparent")+";":"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(ne){return ne.replace(/^\s+/g,"")}function H(ne){return ne.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(ne,fe,Se,ye){var ie,me,ge=null,qe=!1,De=-1,Be={start:fe,end:Se,spans:[]},ze="style_cea608_white_black",Ee={},Le={},we=[];for(ie=0;ie<15;++ie){var je=ye.rows[ie],j="",ue=null;if(je.isEmpty()===!1){var ae=P(je.chars);ge===null&&(ge={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==De&&qe&&(ge.p.push(Be),Be={start:fe,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,Ee.hasOwnProperty(ge.name)===!1?(we.push(ge),Ee[ge.name]=ge):Ee[ge.name].p.contat(ge.p),ge={x:ae,y1:ie,y2:ie+1,p:[]});for(var se=0;se<je.chars.length;++se){var Q=je.chars[se],Me=Q.penState;if(ue===null||!Me.equals(ue)){j.trim().length>0&&(Be.spans.push({name:ze,line:j,row:ie}),j="");var Ie="style_cea608_"+Me.foreground+"_"+Me.background;Me.underline&&(Ie+="_underline"),Me.italics&&(Ie+="_italics"),Le.hasOwnProperty(Ie)||(Le[Ie]=JSON.parse(JSON.stringify(Me))),ue=Me,ze=Ie}j+=Q.uchar}j.trim().length>0&&Be.spans.push({name:ze,line:j,row:ie}),qe=!0,De=ae}else qe=!1,De=-1,ge&&(ge.p.push(Be),Be={start:fe,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,Ee.hasOwnProperty(ge.name)===!1?(we.push(ge),Ee[ge.name]=ge):Ee[ge.name].p.contat(ge.p),ge=null)}ge&&(ge.p.push(Be),ge.y2=ie+1,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,Ee.hasOwnProperty(ge.name)===!1?(we.push(ge),Ee[ge.name]=ge):Ee[ge.name].p.contat(ge.p),ge=null);var ke=[];for(ie=0;ie<we.length;++ie){var Re=we[ie],pe="sub_cea608_"+L++,Ne=document.createElement("div");Ne.id=pe;var Ye=B(Re);Ne.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Ye;var dt=document.createElement("div");dt.className="paragraph bodyStyle",dt.style.cssText=ee(ne);var at=document.createElement("div");at.className="cueUniWrapper",at.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Je=0;Je<Re.p.length;++Je){var ht=Re.p[Je],Bt=0;for(me=0;me<ht.spans.length;++me){var Gt=ht.spans[me];if(Gt.line.length>0){if(me!==0&&Bt!=Gt.row){var kt=document.createElement("br");kt.className="lineBreak",at.appendChild(kt)}var Ft=!1;Bt===Gt.row&&(Ft=!0),Bt=Gt.row;var An=Le[Gt.name],rt=document.createElement("span");rt.className="spanPadding "+Gt.name+" customSpanColor",rt.style.cssText=ee(ne,An),me!==0&&Ft?me===ht.spans.length-1?rt.textContent=H(Gt.line):rt.textContent=Gt.line:ht.spans.length>1&&me<ht.spans.length-1&&Gt.row===ht.spans[me+1].row?rt.textContent=J(Gt.line):rt.textContent=Gt.line.trim(),at.appendChild(rt)}}}dt.appendChild(at),Ne.appendChild(dt);var mt={bodyStyle:["%",90]};for(var Wt in Le)Le.hasOwnProperty(Wt)&&(mt[Wt]=["%",90]);ke.push({type:"html",start:fe,end:Se,cueHTMLElement:Ne,cueID:pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:mt,lineHeight:{},linePadding:{}})}return ke}}}kc.__dashjs_factory_name="EmbeddedTextHtmlRender";var tp=U.Z.getSingletonFactory(kc);function Fm(L){var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee=L.errHandler,Le=L.manifestModel,we=L.mediaController,je=L.videoModel,j=L.textTracks,ue=L.vttParser,ae=L.vttCustomRenderingParser,se=L.ttmlParser,Q=L.streamInfo,Me=L.settings,Ie=this.context,ke=(0,m.Z)(Ie).getInstance(),Re=!1;function pe(){H=null,fe=NaN,Se=[],ye=null,ne=!1,J=[],ee=null}function Ne(kt){var Ft=new Bs;for(var An in kt)Ft[An]=kt[An];Ft.labels=kt.labels,Ft.defaultTrack=function(rt){var mt=!1;return me.length>1&&rt.isEmbedded?mt=rt.id&&rt.id===y.Z.CC1:me.length===1?rt.id&&typeof rt.id=="string"&&rt.id.substring(0,2)==="CC"&&(mt=!0):me.length===0&&(mt=rt.index===J[0].index),mt}(kt),Ft.isFragmented=kt.isFragmented,Ft.isEmbedded=!!kt.isEmbedded,Ft.isTTML=function(rt){return rt.codec&&rt.codec.search(y.Z.STPP)>=0||rt.mimeType&&rt.mimeType.search(y.Z.TTML)>=0}(kt),Ft.kind=function(rt,mt){var Wt=rt.roles&&rt.roles.length>0?mt[rt.roles[0]]:mt.caption;return Wt=Wt===mt.caption||Wt===mt.subtitle?Wt:mt.caption}(kt,{subtitle:"subtitles",caption:"captions"}),j.addTextTrack(Ft)}function Ye(kt){var Ft=kt.chunk;Ft.mediaInfo.embeddedCaptions&&at(Ft.bytes,Ft)}function dt(kt){ie=kt}function at(kt,Ft){var An=Ft.mediaInfo,rt=An.type,mt=An.mimeType,Wt=An.codec||mt;Wt?An.codec.indexOf("application/mp4")!==-1?function(Nt,en,Jt){var Yt;if(en.segmentType==="InitializationSegment")ne=!0,fe=V.getMediaTimescaleFromMoov(Nt);else{if(!ne)return;(Yt=V.getSamplesInfo(Nt).sampleList).length>0&&(ye=Yt[0].cts-en.start*fe),Jt.search(y.Z.STPP)>=0?function(Dn,Nn,rr){var ir,It;for(ee=ee!==null?ee:Bt(rr),ir=0;ir<Nn.length;ir++){var $t=Nn[ir],Zt=$t.cts,un=ht(),vn=un+Zt/fe,Pn=vn+$t.duration/fe;P.buffered.add(vn,Pn);var xn=new DataView(Dn,$t.offset,$t.subSizes[0]),Fn=la.Utils.dataViewToString(xn,y.Z.UTF8),Gn=[],bt=$t.offset+$t.subSizes[0];for(It=1;It<$t.subSizes.length;It++){var Sn=new Uint8Array(Dn,bt,$t.subSizes[It]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),bt+=$t.subSizes[It]}try{var Lt=Le.getValue().ttmlTimeIsRelative?Zt/fe:0,On=ee.parse(Fn,Lt,Zt/fe,(Zt+$t.duration)/fe,Gn);j.addCaptions(ie,un,On)}catch(st){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+st.message)}}}(Nt,Yt,Jt):function(Dn,Nn){var rr,ir,It,$t=[];for(rr=0;rr<Nn.length;rr++){var Zt=Nn[rr];Zt.cts-=ye;var un=ht()+Zt.cts/fe,vn=un+Zt.duration/fe;P.buffered.add(un,vn);var Pn=Dn.slice(Zt.offset,Zt.offset+Zt.size),xn=la.parseBuffer(Pn);for(ir=0;ir<xn.boxes.length;ir++){var Fn=xn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(It=0;It<Fn.boxes.length;It++){var bt=Fn.boxes[It];if(B.debug("VTT box2: "+bt.type),bt.type==="payl")Gn.start=Zt.cts/fe,Gn.end=(Zt.cts+Zt.duration)/fe,Gn.data=bt.cue_text;else if(bt.type==="sttg"&&bt.settings&&bt.settings!=="")try{var Sn=bt.settings.split(" ");Gn.styles=ue.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&($t.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}$t.length>0&&j.addCaptions(ie,0,$t)}(Nt,Yt)}}(kt,Ft,Wt):rt===y.Z.VIDEO?function(Nt,en){var Jt,Yt;if(en.segmentType===tt.w.INIT_SEGMENT_TYPE)ge===0&&(ge=V.getMediaTimescaleFromMoov(Nt));else if(en.segmentType===tt.w.MEDIA_SEGMENT_TYPE){if(ge===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Yt=V.getSamplesInfo(Nt)).lastSequenceNumber,Nn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Be[0]||Be[1]||function(){for(var un,vn=0;vn<me.length;vn++){if((un=j.getTrackIdxForId(me[vn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=Je(un);Be[vn]=new(C()).Cea608Parser(vn+1,{newCue:Pn},null)}}(),ge){if(function(un,vn,Pn,xn,Fn){return un!==null&&vn!==null&&xn!==null&&Fn!==null&&(vn===un?xn!==Fn:vn!==un+Pn)}(qe,Dn,Yt.numSequences,De,Nn))for(Jt=0;Jt<Be.length;Jt++)Be[Jt]&&Be[Jt].reset();for(var ir=function(un,vn){if(vn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},xn=new DataView(un),Fn=0;Fn<vn.length;Fn++)for(var Gn=vn[Fn],bt=C().findCea608Nalus(xn,Gn.offset,Gn.size),Sn=null,En=0,Lt=0;Lt<bt.length;Lt++)for(var On=C().extractCea608DataFromRange(xn,bt[Lt]),st=0;st<2;st++)if(On[st].length>0){Gn.cts!==Sn?En=0:En+=1;var nt=ht();Pn.fields[st].push([Gn.cts+nt*ge,On[st],En]),Sn=Gn.cts}return Pn.fields.forEach(function(qt){qt.sort(function(Ve,Ke){return Ve[0]===Ke[0]?Ve[2]-Ke[2]:Ve[0]-Ke[0]})}),Pn}(Nt,Yt.sampleList),It=0;It<Be.length;It++){var $t=ir.fields[It],Zt=Be[It];if(Zt)for(Jt=0;Jt<$t.length;Jt++)Zt.addData($t[Jt][0]/ge,$t[Jt][1])}qe=Dn,De=rr}}}(kt,Ft):function(Nt,en,Jt){var Yt,Dn,Nn=new DataView(Nt,0,Nt.byteLength);Dn=la.Utils.dataViewToString(Nn,y.Z.UTF8);try{Yt=Bt(Jt).parse(Dn,0),j.addCaptions(j.getCurrentTrackIdx(),0,Yt),P.buffered&&P.buffered.add(en.start,en.end)}catch(rr){Ee.error(new ce.Z(Ae.TIMED_TEXT_ERROR_ID_PARSE_CODE,Ae.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(kt,Ft,Wt):B.error("No text type defined")}function Je(kt){return function(Ft,An,rt){var mt;(mt=je.getTTMLRenderingDiv()?ze.createHTMLCaptionsFromScreen(je.getElement(),Ft,An,rt):[{start:Ft,end:An,data:rt.getDisplayText(),styles:{}}])&&j.addCaptions(kt,0,mt)}}function ht(){return isNaN(P.timestampOffset)?0:P.timestampOffset}function Bt(kt){var Ft;return kt.search(y.Z.VTT)>=0?Ft=Me.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:ue:(kt.search(y.Z.TTML)>=0||kt.search(y.Z.STPP)>=0)&&(Ft=se),Ft}function Gt(kt){me.forEach(function(Ft){var An=j.getTrackIdxForId(Ft.id);An>=0&&j.deleteCuesFromTrackIdx(An,kt.from,kt.to)})}return P={initialize:function(){Re||(me=[],ie=null,ge=0,Be=[],qe=null,De=null,Re=!0,ze=tp(Ie).getInstance(),ke.on(T.Z.VIDEO_CHUNK_RECEIVED,Ye,P),ke.on(T.Z.BUFFER_CLEARED,Gt,P))},addMediaInfos:function(kt,Ft,An){if(J=J.concat(Ft),kt===y.Z.TEXT&&Ft[0].isFragmented&&!Ft[0].isEmbedded){H=An,P.buffered=(0,Ro.Z)(Ie).create(),Se=we.getTracksFor(y.Z.TEXT,Q.id).filter(function(Nt){return Nt.isFragmented});for(var rt=we.getCurrentTrackFor(y.Z.TEXT,Q.id),mt=0;mt<Se.length;mt++)if(Se[mt]===rt){dt(mt);break}}for(var Wt=0;Wt<Ft.length;Wt++)Ne(Ft[Wt])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:at,abort:function(){},addEmbeddedTrack:function(kt){if(Re&&kt)if(kt.id===y.Z.CC1||kt.id===y.Z.CC3){for(var Ft=0;Ft<me.length;Ft++)if(me[Ft].id===kt.id)return;me.push(kt)}else B.warn("Embedded track "+kt.id+" not supported!")},resetEmbedded:function(){ke.off(T.Z.VIDEO_CHUNK_RECEIVED,Ye,P),ke.off(T.Z.BUFFER_CLEARED,Gt,P),j&&j.deleteAllTextTracks(),Re=!1,me=[],Be=[null,null],qe=null,De=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:Se,videoModel:je}},setCurrentFragmentedTrackIdx:dt,remove:function(kt,Ft){kt===void 0&&kt===Ft&&(kt=P.buffered.start(0),Ft=P.buffered.end(P.buffered.length-1)),P.buffered.remove(kt,Ft),j.deleteCuesFromTrackIdx(ie,kt,Ft)},reset:function(){pe(),J=[],V=null}},B=(0,x.Z)(Ie).getInstance().getLogger(P),V=(0,oa.Z)(Ie).getInstance(),pe(),P}Fm.__dashjs_factory_name="TextSourceBuffer";var np=U.Z.getClassFactory(Fm),Fc=w(4403);function Uc(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}var BE=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Um(L){var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee,Le,we,je=this.context,j=(0,m.Z)(je).getInstance(),ue=L.videoModel,ae=L.streamInfo,se=L.settings;function Q(It,$t,Zt,un,vn,Pn){var xn=0,Fn=0;It/$t>Zt/un?xn=(Fn=$t)/un*Zt:Fn=(xn=It)/Zt*un;var Gn,bt,Sn=0,En=0;return xn/Fn>vn?(En=Fn,Sn=Fn*vn):(Sn=xn,En=xn/vn),Gn=(It-Sn)/2,bt=($t-En)/2,Pn?{x:Gn+.1*Sn,y:bt+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:bt,w:Sn,h:En}}function Me(It,$t){var Zt=ue.getClientWidth(),un=ue.getClientHeight(),vn=ue.getVideoWidth(),Pn=ue.getVideoHeight(),xn=ue.getVideoRelativeOffsetTop(),Fn=ue.getVideoRelativeOffsetLeft();if(vn!==0&&Pn!==0){var Gn=vn/Pn,bt=!1;It.isFromCEA608&&(Gn=1.1666666666666667,bt=!0);var Sn=Q.call(this,Zt,un,vn,Pn,Gn,bt),En=Sn.w,Lt=Sn.h,On=Sn.x,st=Sn.y;if(En!=Se||Lt!=ye||On!=ne||st!=fe||$t){if(ne=On+Fn,fe=st+xn,Se=En,ye=Lt,ie){var nt=ie.style;nt&&(nt.left=ne+"px",nt.top=fe+"px",nt.width=Se+"px",nt.height=ye+"px",nt.zIndex=qe&&document[qe]||De?ze:null,j.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var qt=It.activeCues;if(qt)for(var Ve=qt.length,Ke=0;Ke<Ve;++Ke){var Dt=qt[Ke];Dt.scaleCue(Dt)}}}}function Ie(It){var $t,Zt,un,vn,Pn,xn=Se,Fn=ye;if(It.cellResolution){var Gn=[xn/It.cellResolution[0],Fn/It.cellResolution[1]];if(It.linePadding){for($t in It.linePadding)if(It.linePadding.hasOwnProperty($t)){Zt=(It.linePadding[$t]*Gn[0]).toString();for(var bt=document.getElementsByClassName("spanPadding"),Sn=0;Sn<bt.length;Sn++)bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt),bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}if(It.fontSize){for($t in It.fontSize)if(It.fontSize.hasOwnProperty($t)){It.fontSize[$t][0]==="%"?un=It.fontSize[$t][1]/100:It.fontSize[$t][0]==="c"&&(un=It.fontSize[$t][1]),Zt=(un*Gn[1]).toString(),Pn=$t!=="defaultFontSize"?document.getElementsByClassName($t):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}if(It.lineHeight){for($t in It.lineHeight)if(It.lineHeight.hasOwnProperty($t)){It.lineHeight[$t][0]==="%"?vn=It.lineHeight[$t][1]/100:It.fontSize[$t][0]==="c"&&(vn=It.lineHeight[$t][1]),Zt=(vn*Gn[1]).toString(),Pn=document.getElementsByClassName($t);for(var Lt=0;Lt<Pn.length;Lt++)Pn[Lt].style.cssText=Pn[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}}}if(It.isd){var On=document.getElementById(It.cueID);On&&ie.removeChild(On),Re(It)}}function ke(It,$t){var Zt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Zt.test($t)){var vn=Zt.exec($t),Pn=parseInt(vn[4],10)-1;return"data:image/png;base64,"+btoa(It.images[Pn])}if(un.test($t)){var xn=un.exec($t)[1];return"data:image/png;base64,"+It.embeddedImages[xn]}return $t}function Re(It){if(ie){ir.call(this);var $t=document.createElement("div");ie.appendChild($t),Be=(0,Fc.renderHTML)(It.isd,$t,function(Zt){return ke(It,Zt)},ie.clientHeight,ie.clientWidth,se.get().streaming.text.imsc.displayForcedOnlyMode,function(Zt){B.info("renderCaption :",Zt)},Be,se.get().streaming.text.imsc.enableRollUp),$t.id=It.cueID,j.trigger(_.Z.CAPTION_RENDERED,{captionDiv:$t,currentTrackIdx:H})}}function pe(It,$t){return!!$t&&$t.endTime>=It.startTime}function Ne(It,$t){return!!se.get().streaming.text.extendSegmentedCues&&!!function(Zt,un,vn){for(var Pn=0;Pn<vn.length;Pn++){var xn=vn[Pn];if(JSON.stringify(Zt[xn])!==JSON.stringify(un[xn]))return!1}return!0}($t,It,BE)&&($t.endTime=Math.max($t.endTime,It.endTime),!0)}function Ye(It,$t){$t&&$t.forEach(function(Zt){Zt.kind&&Zt.kind==="image"&&(Zt.src=ke(It,Zt.src)),Ye(It,Zt.contents)})}function dt(It,$t,Zt){var un=mt(It),vn=se.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Zt)&&Zt.length!==0)for(var Pn=0;Pn<Zt.length;Pn++){var xn=null,Fn=Zt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(vn?xn=at(Fn,$t):kt(Fn)&&ie?xn=Bt(Fn,$t,un):Fn.data&&(xn=Gt(Fn,$t,un)));try{if(xn){if(!en(un,xn))if(se.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(xn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),pe(xn,Gn)?Ne(xn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==y.Z.TEXT_DISABLED&&un.addCue(xn)):un.mode!==y.Z.TEXT_DISABLED&&un.addCue(xn)}var bt=se.get().streaming.buffer.bufferToKeep;Yt(un,0,ue.getTime()-bt)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(xn),Sn}}}function at(It,$t){var Zt=Ft(It,$t);return Zt.onenter=function(){kt(It)&&we&&we.cueID!==Zt.cueID&&ht(we),delete Zt.type,we=Zt,Je(Zt)},Zt.onexit=function(){ht(Zt),we=null},Zt}function Je(It){j.trigger(_.Z.CUE_ENTER,It)}function ht(It){j.trigger(_.Z.CUE_EXIT,{cueID:It.cueID})}function Bt(It,$t,Zt){var un=this,vn=Ft(It,$t);return ie.style.left=ne+"px",ie.style.top=fe+"px",ie.style.width=Se+"px",ie.style.height=ye+"px",vn.onenter=function(){var Pn=this;Zt.mode===y.Z.TEXT_SHOWING&&(this.isd?(Le?requestAnimationFrame(function(){return Re(Pn)}):Re(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),Ie.call(un,this),j.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},vn.onexit=function(){if(ie)for(var Pn=ie.childNodes,xn=0;xn<Pn.length;++xn)Pn[xn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[xn].id),ie.removeChild(Pn[xn]),--xn)},vn}function Gt(It,$t,Zt){var un=Ft(It,$t);if(un.isActive=!1,It.styles)try{It.styles.align!==void 0&&"align"in un&&(un.align=It.styles.align),It.styles.line!==void 0&&"line"in un&&(un.line=It.styles.line),It.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=It.styles.snapToLines),It.styles.position!==void 0&&"position"in un&&(un.position=It.styles.position),It.styles.size!==void 0&&"size"in un&&(un.size=It.styles.size)}catch(vn){B.error(vn)}return un.onenter=function(){Zt.mode===y.Z.TEXT_SHOWING&&j.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function kt(It){return It.type==="html"}function Ft(It,$t){return kt(It)?function(Zt,un){var vn=new V(Zt.start+un,Zt.end+un,"");return vn.cueHTMLElement=Zt.cueHTMLElement,vn.isd=Zt.isd,vn.images=Zt.images,vn.embeddedImages=Zt.embeddedImages,vn.cueID=Zt.cueID,vn.scaleCue=Ie.bind(self),vn.cellResolution=Zt.cellResolution,vn.lineHeight=Zt.lineHeight,vn.linePadding=Zt.linePadding,vn.fontSize=Zt.fontSize,vn.isd&&Ye(vn,vn.isd.contents),vn}(It,$t):function(Zt,un){var vn=new V(Zt.start-un,Zt.end-un,Zt.data);return vn.cueID="".concat(vn.startTime,"_").concat(vn.endTime),vn}(It,$t)}function An(It){if(me)for(var $t=me.childNodes,Zt=0;Zt<$t.length;++Zt)$t[Zt].id===It.cueID&&(me.removeChild($t[Zt]),--Zt)}function rt(){var It,$t=[],Zt=function(vn,Pn){var xn;if(typeof Symbol>"u"||vn[Symbol.iterator]==null){if(Array.isArray(vn)||(xn=function(Lt,On){if(Lt){if(typeof Lt=="string")return Uc(Lt,On);var st=Object.prototype.toString.call(Lt).slice(8,-1);return st==="Object"&&Lt.constructor&&(st=Lt.constructor.name),st==="Map"||st==="Set"?Array.from(Lt):st==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st)?Uc(Lt,On):void 0}}(vn))||Pn){xn&&(vn=xn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=vn.length?{done:!0}:{done:!1,value:vn[Fn++]}},e:function(Lt){throw Lt},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var bt,Sn=!0,En=!1;return{s:function(){xn=vn[Symbol.iterator]()},n:function(){var Lt=xn.next();return Sn=Lt.done,Lt},e:function(Lt){En=!0,bt=Lt},f:function(){try{Sn||xn.return==null||xn.return()}finally{if(En)throw bt}}}}(ue.getTextTracks());try{for(Zt.s();!(It=Zt.n()).done;){var un=It.value;un.manualMode===y.Z.TEXT_SHOWING&&$t.push(un)}}catch(vn){Zt.e(vn)}finally{Zt.f()}return $t}function mt(It){return It>=0&&ee[It]?ue.getTextTrack(ee[It].kind,ee[It].id,ee[It].lang,ee[It].isTTML,ee[It].isEmbedded):null}function Wt(It){var $t=this;if(It!==H){var Zt=mt(H=It);Nt.call(this,Zt),ge&&(clearInterval(ge),ge=null),Zt&&Zt.renderingType==="html"&&(Me.call(this,Zt,!0),window.ResizeObserver?(Ee=new window.ResizeObserver(function(){Me.call($t,Zt,!0)})).observe(ue.getElement()):ge=setInterval(Me.bind(this,Zt),500))}}function Nt(It){ir.call(this),It&&It.renderingType==="html"?Nn.call(this):rr.call(this)}function en(It,$t){if(!It.cues)return!1;for(var Zt=0;Zt<It.cues.length;Zt++)if(It.cues[Zt].startTime===$t.startTime&&It.cues[Zt].endTime===$t.endTime)return!0;return!1}function Jt(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!It&&(isNaN($t)||(un?It.startTime:It.endTime)>=$t)&&(isNaN(Zt)||(un?It.endTime:It.startTime)<=Zt)}function Yt(It,$t,Zt){var un,vn;if(!(Zt<$t)&&It&&(It.cues||It.manualCueList)){var Pn=It.cues&&It.cues.length>0?"native":"custom",xn=Pn==="native"?It.cues:It.manualCueList;if(!xn||xn.length===0)return;for(var Fn=xn.length-1;Fn>=0;Fn--)!Jt(xn[Fn],$t,Zt,!0)||(un=xn[Fn],vn=ue.getTime(),un.startTime>=vn&&un.endTime<=vn)||(Pn==="native"?It.removeCue(xn[Fn]):(An(xn[Fn]),delete It.manualCueList[Fn]))}}function Dn(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(It&&(It.cues||It.manualCueList)){var vn=It.cues&&It.cues.length>0?"native":"custom",Pn=vn==="native"?It.cues:It.manualCueList;if(!Pn||Pn.length===0)return;for(var xn=Pn.length-1,Fn=xn;Fn>=0;Fn--)Jt(Pn[Fn],$t,Zt,un)&&(vn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),It.removeCue(Pn[Fn])):(An(Pn[Fn]),delete It.manualCueList[Fn]))}}function Nn(){var It=document.getElementById("native-cue-style");if(!It){(It=document.createElement("style")).id="native-cue-style",document.head.appendChild(It);var $t=It.sheet,Zt=ue.getElement();try{Zt&&(Zt.id?$t.insertRule("#"+Zt.id+"::cue {background: transparent}",0):Zt.classList.length!==0?$t.insertRule("."+Zt.className+"::cue {background: transparent}",0):$t.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var It=document.getElementById("native-cue-style");It&&document.head.removeChild(It)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return P={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,ne=0,fe=0,Se=0,ye=0,ie=null,me=null,ge=null,De=!1,ze=2147483647,Be=null,Le="requestAnimationFrame"in window,document.fullscreenElement!==void 0?qe="fullscreenElement":document.webkitIsFullScreen!==void 0?qe="webkitIsFullScreen":document.msFullscreenElement?qe="msFullscreenElement":document.mozFullScreen&&(qe="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(It){ee.push(It)},addCaptions:dt,createTracks:function(){var It=se.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,st){return On.index-st.index}),ie=ue.getTTMLRenderingDiv(),me=ue.getVttRenderingDiv();for(var $t,Zt,un,vn,Pn,xn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var bt=(Zt=($t=ee[Gn]).kind,un=$t.id!==void 0?$t.id:$t.lang,vn=$t.lang,Pn=$t.isTTML,xn=$t.isEmbedded,ue.addTextTrack(Zt,un,vn,Pn,xn));J.push(bt),ee[Gn].defaultTrack&&(bt.default=!0,Fn=Gn);var Sn=mt(Gn);Sn&&(Sn.mode=y.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),dt(Gn,0,ee[Gn].captionData),j.trigger(_.Z.TEXT_TRACK_ADDED)}if(Wt.call(this,Fn),Fn>=0){j.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var st=mt(Fn);st&&st.renderingType==="html"&&Me.call(this,st,!0),j.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Lt=mt(En);Lt&&(Lt.mode=En!==Fn||It?y.Z.TEXT_HIDDEN:y.Z.TEXT_SHOWING,Lt.manualMode=En===Fn?y.Z.TEXT_SHOWING:y.Z.TEXT_HIDDEN)}}j.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Wt,getTrackIdxForId:function(It){for(var $t=-1,Zt=0;Zt<ee.length;Zt++)if(ee[Zt].id===It){$t=Zt;break}return $t},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(It,$t){var Zt=mt(It);Zt&&Zt.mode!==$t&&(Zt.mode=$t),Zt&&Zt.manualMode!==$t&&(Zt.manualMode=$t)},deleteCuesFromTrackIdx:function(It,$t,Zt){var un=mt(It);un&&Dn(un,$t,Zt)},deleteAllTextTracks:function(){for(var It=J?J.length:0,$t=0;$t<It;$t++){var Zt=mt($t);Zt&&Dn.call(this,Zt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],ge&&(clearInterval(ge),ge=null),Ee&&ue&&(Ee.unobserve(ue.getElement()),Ee=null),H=-1,ir.call(this)},manualCueProcessing:function(It){var $t=rt();if($t&&$t.length>0){var Zt=$t[0].manualCueList;Zt&&Zt.length>0&&Zt.forEach(function(un){un.startTime<=It&&un.endTime>=It&&!un.isActive?(un.isActive=!0,se.get().streaming.text.dispatchForManualRendering?Je(un):WebVTT.processCues(window,[un],me,un.cueID)):un.isActive&&(un.startTime>It||un.endTime<It)&&(un.isActive=!1,se.get().streaming.text.dispatchForManualRendering?ht(un):An(un))})}},disableManualTracks:function(){var It=rt();if(It&&It.length>0){var $t=It[0].manualCueList;$t&&$t.length>0&&$t.forEach(function(Zt){if(Zt.isActive){if(Zt.isActive=!1,se.get().streaming.text.dispatchForManualRendering)ht(Zt);else if(me)for(var un=me.childNodes,vn=0;vn<un.length;++vn)un[vn].id===Zt.cueID&&(me.removeChild(un[vn]),--vn)}})}}},B=(0,x.Z)(je).getInstance().getLogger(P),P}Um.__dashjs_factory_name="TextTracks";var Bm=U.Z.getClassFactory(Um);function jm(){var L,P,B,V,ee,J,H=this.context;function ne(ie){var me=ie.split(":"),ge=me.length-1;return ie=60*parseInt(me[ge-1],10)+parseFloat(me[ge]),ge===2&&(ie+=3600*parseInt(me[0],10)),ie}function fe(ie){var me=ie.split(V),ge=me[1].split(J);return ge.shift(),me[1]=ge[0],ge.shift(),{cuePoints:me,styles:Se(ge)}}function Se(ie){var me={};return ie.forEach(function(ge){if(ge.split(/:/).length>1){var qe=ge.split(/:/)[1],De=!1;qe&&qe.search(/%/)!=-1&&(De=!0,qe=parseInt(qe.replace(/%/,""),10)),(ge.match(/align/)||ge.match(/A/))&&(me.align=qe),(ge.match(/line/)||ge.match(/L/))&&(me.line=qe==="auto"?qe:parseInt(qe,10),De&&(me.snapToLines=!1)),(ge.match(/position/)||ge.match(/P/))&&(me.position=qe),(ge.match(/size/)||ge.match(/S/))&&(me.size=qe)}}),me}function ye(ie,me){for(var ge,qe=me,De="",Be="";ie[qe]!==""&&qe<ie.length;)qe++;if((ge=qe-me)>1)for(var ze=0;ze<ge;ze++){if((Be=ie[me+ze]).match(V)){De="";break}De+=Be,ze!==ge-1&&(De+="\n")}else(Be=ie[me]).match(V)||(De=Be);return De}return L={parse:function(ie){var me,ge,qe=[];if(!ie)return qe;me=(ie=ie.split(B)).length,ge=-1;for(var De=0;De<me;De++){var Be=ie[De];if(Be.length>0&&Be!=="WEBVTT"&&Be.match(V)){var ze=fe(Be),Ee=ze.cuePoints,Le=ze.styles,we=ye(ie,De+1),je=ne(Ee[0].replace(ee,"")),j=ne(Ee[1].replace(ee,""));!isNaN(je)&&!isNaN(j)&&je>=ge&&j>je?we!==""?(ge=je,qe.push({start:je,end:j,data:we,styles:Le})):P.error("Skipping cue due to empty/malformed cue text"):P.error("Skipping cue due to incorrect cue timing")}}return qe},getCaptionStyles:Se},P=(0,x.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,V=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}jm.__dashjs_factory_name="VTTParser";var Zm=U.Z.getSingletonFactory(jm);function rp(){var L,P;return L={parse:function(B){var V=[];return P.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},V.push(ee)},P.parse(B),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(P=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}rp.__dashjs_factory_name="VttCustomRenderingParser";var jE=U.Z.getSingletonFactory(rp);function Gm(){var L,P,B=this.context,V=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,ne,fe,Se){var ye,ie,me,ge="",qe=[],De={},Be={},ze="",Ee="",Le={onOpenTag:function(ae,se,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.ERROR,event:Oi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),se==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");ze=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){ze&&(Be[ze]=Ee.trim()),Ee="",ze=""},onText:function(ae){ze&&(Ee+=ae)}};if(!J)throw ge="no ttml data to parse",new Error(ge);De.data=J,V.trigger(T.Z.TTML_TO_PARSE,De);var we=(0,Fc.fromXML)(De.data,function(ae){ge=ae},Le);V.trigger(T.Z.TTML_PARSED,{ttmlString:De.data,ttmlDoc:we});var je,j=we.getMediaTimeEvents();for(me=0;me<j.length;me++){var ue=(0,Fc.generateISD)(we,j[me],function(ae){ge=ae});ue.contents.some(function(ae){return ae.contents.length})&&(ye=j[me]+H)<(ie=j[me+1]+H)&&qe.push({start:ye,end:ie,type:"html",cueID:(je="cue_TTML_"+ee,ee++,je),isd:ue,images:Se,embeddedImages:Be})}if(ge!=="")throw P.error(ge),new Error(ge);return qe}},P=(0,x.Z)(B).getInstance().getLogger(L),L}Gm.__dashjs_factory_name="TTMLParser";var ZE=U.Z.getSingletonFactory(Gm);function ip(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function jl(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?ip(Object(B),!0).forEach(function(V){qm(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):ip(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function qm(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function op(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function ap(L){var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Tt.Z)(ee).getInstance(),ne=L.adapter,fe=L.baseURLController;function Se(me,ge){var qe,De,Be=!1;if(fe.resolve()){var ze=ne.getVoRepresentations(me);ze&&ze.length>0&&(qe=fe.resolve(ze[0].path).url)}var Ee=me.essentialPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME}),Le=me.supplementalPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME});Ee.length>0?(Be=!0,De=Ee):De=Le,De.forEach(function(we){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==y.Z.OFF_MIMETYPE&&ae.dvbMimeType!==y.Z.WOFF_MIMETYPE)}(we)){var je=(j=we.dvbUrl,ue=qe,H.isPathAbsolute(j)?j:H.isRelative(j)?ue?H.resolve(j,ue):H.resolve(j):j);V.push({fontFamily:we.dvbFontFamily,url:je,mimeType:we.dvbMimeType,trackId:me.id,streamId:ge,isEssential:Be,status:"unloaded",fontFace:new FontFace(we.dvbFontFamily,"url(".concat(je,")"),{display:"swap"})})}var j,ue})}function ye(me,ge){var qe=V[me];V[me]=jl(jl({},qe),{},{status:ge})}function ie(){V=[]}return P={addFontsFromTracks:function(me,ge){if(me&&Array.isArray(me)&&ge)for(var qe=0;qe<me.length;qe++)Se(me[qe],ge)},downloadFonts:function(){for(var me=function(qe){var De=V[qe];document.fonts.add(De.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,De),De.fontFace.load().then(function(){ye(qe,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,De)},function(Be){ye(qe,"error"),B.debug("Font download error: ",Be),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,De)})},ge=0;ge<V.length;ge++)me(ge)},getFonts:function(){return V},getFontsForTrackId:function(me){return V.filter(function(ge){return ge.trackId&&ge.trackId===me})},reset:function(){(function(){var me,ge=function(Be,ze){var Ee;if(typeof Symbol>"u"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(Ee=function(ae,se){if(ae){if(typeof ae=="string")return op(ae,se);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?op(ae,se):void 0}}(Be))||ze){Ee&&(Be=Ee);var Le=0,we=function(){};return{s:we,n:function(){return Le>=Be.length?{done:!0}:{done:!1,value:Be[Le++]}},e:function(ae){throw ae},f:we}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je,j=!0,ue=!1;return{s:function(){Ee=Be[Symbol.iterator]()},n:function(){var ae=Ee.next();return j=ae.done,ae},e:function(ae){ue=!0,je=ae},f:function(){try{j||Ee.return==null||Ee.return()}finally{if(ue)throw je}}}}(V);try{for(ge.s();!(me=ge.n()).done;){var qe=me.value,De=document.fonts.delete(qe.fontFace);B.debug("Removal of fontFamily: ".concat(qe.fontFamily," was ").concat(De?"successful":"unsuccessful"))}}catch(Be){ge.e(Be)}finally{ge.f()}})(),ie()}},B=(0,x.Z)(ee).getInstance().getLogger(P),ie(),P}ap.__dashjs_factory_name="DVBFonts";var GE=U.Z.getClassFactory(ap);function Hm(L){var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De=this.context,Be=L.adapter,ze=L.errHandler,Ee=L.manifestModel,Le=L.mediaController,we=L.baseURLController,je=L.videoModel,j=L.settings;function ue(Ne){if(qe.error("Could not download ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Ye=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);ee[Ne.streamId].setModeForTrackIdx(Ye,y.Z.TEXT_DISABLED)}}function ae(Ne){if(qe.debug("Successfully downloaded ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Ye=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);Ye===ee[Ne.streamId].getCurrentTrackIdx()?ee[Ne.streamId].setModeForTrackIdx(Ye,y.Z.TEXT_SHOWING):ee[Ne.streamId].setModeForTrackIdx(Ye,y.Z.TEXT_HIDDEN)}}function se(Ne){var Ye=Ne.tracks,dt=Ne.index,at=Ne.streamId;if(j.get().streaming.text.defaultEnabled===!1&&!Ie()||me)ke(at,-1);else{var Je=Le.getCurrentTrackFor(y.Z.TEXT,at);if(Je){var ht={lang:Je.lang,role:Je.roles[0],index:Je.index,codec:Je.codec,accessibility:Je.accessibility[0]};Ye.some(function(Bt,Gt){if(Le.matchSettings(ht,Bt))return ke(at,Gt),dt=Gt,!0})}Se=!1}B[at].lastEnabledIndex=dt,fe.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:Ie(),index:dt,tracks:Ye,streamId:at}),ie=!0,ge.addFontsFromTracks(Ye,at),ge.getFonts().forEach(function(Bt){if(Bt.isEssential){var Gt=ee[Bt.streamId].getTrackIdxForId(Bt.trackId);ee[Bt.streamId].setModeForTrackIdx(Gt,y.Z.TEXT_DISABLED)}}),ge.downloadFonts()}function Q(Ne){try{var Ye=Ne.streamId;if(!ee[Ye]||isNaN(Ne.time))return;ee[Ye].manualCueProcessing(Ne.time)}catch(dt){}}function Me(Ne){try{var Ye=Ne.streamId;if(!ee[Ye])return;ee[Ye].disableManualTracks()}catch(dt){}}function Ie(){var Ne=!0;return Se&&!ye&&(Ne=!1),Ne}function ke(Ne,Ye){(Se=Ye===-1)&&Le&&Le.saveTextSettingsDisabled();var dt=Re(Ne);if(dt!==Ye&&ee[Ne]){ee[Ne].disableManualTracks();var at=ee[Ne].getCurrentTrackInfo(),Je=at?je.getTextTrack(at.kind,at.id,at.lang,at.isTTML,at.isEmbedded):null;Je&&Je.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(dt,y.Z.TEXT_HIDDEN),ee[Ne].setCurrentTrackIdx(Ye),at=ee[Ne].getCurrentTrackInfo();var ht=j.get().streaming.text.dispatchForManualRendering;at&&!ht&&at.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(Ye,y.Z.TEXT_SHOWING),at&&at.isFragmented&&!at.isEmbedded?function(Bt,Gt,kt){if(V[Bt])for(var Ft=V[Bt].getConfig().fragmentedTracks,An=0;An<Ft.length;An++){var rt=Ft[An];if(Gt.lang===rt.lang&&(rt.id?Gt.id===rt.id:Gt.index===rt.index)){var mt=Le.getCurrentTrackFor(y.Z.TEXT,Bt);(rt.id?mt.id!==rt.id:mt.index!==rt.index)?(ee[Bt].deleteCuesFromTrackIdx(kt),V[Bt].setCurrentFragmentedTrackIdx(An)):kt===-1&&fe.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Bt,mediaType:y.Z.TEXT})}}}(Ne,at,dt):at&&!at.isFragmented&&function(Bt,Gt){fe.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Gt},{streamId:Bt,mediaType:y.Z.TEXT})}(Ne,at),Le.setTrack(at)}}function Re(Ne){return ee[Ne].getCurrentTrackIdx()}function pe(){V={},ee={},B={},Se=!0,ie=!1,me=!1}return P={deactivateStream:function(Ne){if(Ne){var Ye=Ne.id;V[Ye]&&V[Ye].resetMediaInfos(),ee[Ye]&&ee[Ye].deleteAllTextTracks()}},initialize:function(){ge=GE(De).create({adapter:Be,baseURLController:we}),fe.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,ue,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),j.get().streaming.text.webvtt.customRenderingEnabled&&(fe.on(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.on(T.Z.PLAYBACK_SEEKING,Me,P))},initializeForStream:function(Ne){var Ye=Ne.id,dt=Bm(De).create({videoModel:je,settings:j,streamInfo:Ne});dt.initialize(),ee[Ye]=dt;var at=np(De).create({errHandler:ze,adapter:Be,dvbFonts:ge,manifestModel:Ee,mediaController:Le,videoModel:je,textTracks:dt,vttParser:J,vttCustomRenderingParser:H,ttmlParser:ne,streamInfo:Ne,settings:j});at.initialize(),V[Ye]=at,B[Ye]={},B[Ye].lastEnabledIndex=-1},createTracks:function(Ne){var Ye=Ne.id;ee[Ye]&&ee[Ye].createTracks()},getTextSourceBuffer:function(Ne){var Ye=Ne.id;if(V&&V[Ye])return V[Ye]},getAllTracksAreDisabled:function(){return Se},addEmbeddedTrack:function(Ne,Ye){var dt=Ne.id;V[dt]&&V[dt].addEmbeddedTrack(Ye)},enableText:function(Ne,Ye){return(0,_e.PS)(Ye,"boolean"),Ie()!==Ye&&(Ye&&ke(Ne,B[Ne].lastEnabledIndex),Ye||(B[Ne].lastEnabledIndex=Re(Ne),ie?ke(Ne,-1):me=!0)),!0},isTextEnabled:Ie,setTextTrack:ke,getCurrentTrackIdx:Re,enableForcedTextStreaming:function(Ne){return(0,_e.PS)(Ne,"boolean"),ye=Ne,!0},addMediaInfosToBuffer:function(Ne,Ye,dt){var at=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Je=Ne.id;V[Je]&&V[Je].addMediaInfos(Ye,dt,at)},reset:function(){ge.reset(),pe(),fe.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,ue,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),j.get().streaming.text.webvtt.customRenderingEnabled&&(fe.off(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.off(T.Z.PLAYBACK_SEEKING,Me,P)),Object.keys(V).forEach(function(Ne){V[Ne].resetEmbedded(),V[Ne].reset()})}},ye=!1,ie=!1,me=!1,J=Zm(De).getInstance(),H=jE(De).getInstance(),ne=ZE(De).getInstance(),fe=(0,m.Z)(De).getInstance(),qe=(0,x.Z)(De).getInstance().getLogger(P),pe(),P}Hm.__dashjs_factory_name="TextController";var qE=U.Z.getClassFactory(Hm);function Bc(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,qe,De,Be,ze,Ee,Le,we,je,j,ue,ae,se,Q,Me,Ie,ke,Re,pe,Ne,Ye,dt,at,Je,ht,Bt,Gt="You must first call initialize() and set a source before calling this method",kt="You must first call initialize() and set a valid source and view before calling this method",Ft="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",rt="MediaPlayer not initialized!",mt=this.context,Wt=(0,m.Z)(mt).getInstance(),Nt=(0,Ze.Z)(mt).getInstance(),en=(0,x.Z)(mt).getInstance({settings:Nt});function Jt(){Gn(null),xn(null),V=null,ge&&(ge.reset(),ge=null),qe&&(qe.reset(),qe=null),Le&&Le.reset(),Nt.reset(),Be&&(Be.reset(),Be=null)}function Yt(){return!!B&&!!at.getElement()}function Dn(){return(0,Dm.e)()}function Nn(){if(!H)throw kt;return Me.isPaused()}function rr(){if(!H)throw kt;return Me.getIsDynamic()}function ir(Ve){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ke);if(!Dt)return 0;var fn=Me.getOriginalLiveDelay(),Tn=Dt.range.start+Ve;return Tn>Dt.range.end-fn&&(Tn=Dt.range.end-fn),Tn}function It(Ve){if(!H)throw kt;var Ke=Pn().currentTime;if(Ve!==void 0)Ke=ae.getTimeRelativeToStreamId(Ke,Ve);else if(Me.getIsDynamic()){var Dt=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,fn=pe.getCurrentDVRInfo(Dt);Ke=fn===null||Ke===0?0:Math.max(0,Ke-fn.range.start)}return Ke}function $t(){if(!H)throw kt;var Ve=Pn().duration;if(Me.getIsDynamic()){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ke);Ve=Dt?Dt.range.end-Dt.range.start:0}return Ve}function Zt(Ve){(0,_e.PS)(Ve,"boolean"),ne=Ve}function un(){Le.restoreDefaultUTCTimingSources()}function vn(){return pe}function Pn(){if(!at.getElement())throw Ft;return at.getElement()}function xn(Ve){if(!ee)throw rt;at.setElement(Ve),Ve&&(On(),function(){if(!qe){var Ke=dashjs.MetricsReporting;if(typeof Ke=="function"){var Dt=Ke(mt).create();qe=Dt.createMetricsReporting({debug:en,eventBus:Wt,mediaElement:Pn(),adapter:ze,dashMetrics:pe,mediaPlayerModel:Ee,events:T.Z,constants:y.Z,metricsConstants:D.Z})}}}(),function(){if(!De){var Ke=dashjs.MssHandler;typeof Ke=="function"&&(Ae.extend(Ke.errors),De=Ke(mt).create({eventBus:Wt,mediaPlayerModel:Ee,dashMetrics:pe,manifestModel:Ne,playbackController:Me,streamController:ae,protectionController:ge,baseURLController:je,errHandler:we,events:T.Z,constants:y.Z,debug:en,initSegmentType:tt.w.INIT_SEGMENT_TYPE,BASE64:Wf,ISOBoxer:la,settings:Nt}))}}(),ae&&ae.switchToVideoElement(fe)),H&&Sn(),qt(fe)}function Fn(Ve){if(!J)throw Gt;var Ke=ae.getActiveStreamInfo();return Ke?me.getTracksFor(Ve,Ke.id):[]}function Gn(Ve){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw rt;typeof Ve=="string"&&Je.initialize(Ve),Ke==null&&(Ke=NaN),isNaN(Ke)||(Ke=Math.max(0,Ke)),fe=Ke,B=Ve,(J||H)&&Sn(),Yt()&&qt(fe)}function bt(){if(!J)throw Gt;var Ve=ae.getActiveStreamInfo();return Ve?ae.getStreamById(Ve.id):null}function Sn(){H=!1,J=!1,ze.reset(),ae.reset(),Q.reset(),Re.reset(),Me.reset(),Ie.reset(),ke.reset(),Se.reset(),me.reset(),Bt.reset(),ge&&(Nt.get().streaming.protection.keepProtectionMediaKeys?ge.stop():(ge.reset(),ge=null,On())),se.reset(),Ye.reset(),dt.reset()}function En(){var Ve=Lt();ae||(ae=qo(mt).getInstance()),se||(se=qE(mt).create({errHandler:we,manifestModel:Ne,adapter:ze,mediaController:me,baseURLController:je,videoModel:at,settings:Nt})),ue.setConfig({capabilities:j,customParametersModel:Le,adapter:ze,settings:Nt,manifestModel:Ne,errHandler:we}),ae.setConfig({capabilities:j,capabilitiesFilter:ue,manifestLoader:Ve,manifestModel:Ne,mediaPlayerModel:Ee,customParametersModel:Le,protectionController:ge,textController:se,adapter:ze,dashMetrics:pe,errHandler:we,timelineConverter:ie,videoModel:at,playbackController:Me,serviceDescriptionController:Ie,contentSteeringController:ke,abrController:Se,mediaController:me,settings:Nt,baseURLController:je,uriFragmentModel:Je,segmentBaseController:Bt}),Q.setConfig({settings:Nt,playbackController:Me,streamController:ae,videoModel:at,timelineConverter:ie,adapter:ze}),Me.setConfig({streamController:ae,serviceDescriptionController:Ie,dashMetrics:pe,adapter:ze,videoModel:at,timelineConverter:ie,settings:Nt}),Re.setConfig({streamController:ae,playbackController:Me,mediaPlayerModel:Ee,videoModel:at,settings:Nt}),Se.setConfig({streamController:ae,domStorage:ht,mediaPlayerModel:Ee,customParametersModel:Le,cmsdModel:dt,dashMetrics:pe,adapter:ze,videoModel:at,settings:Nt}),Ye.setConfig({abrController:Se,dashMetrics:pe,playbackController:Me}),dt.setConfig({}),Se.initialize(),ae.initialize(ne,V),se.initialize(),Q.initialize(),Re.initialize(),Ye.initialize(),dt.initialize(),ke.initialize(),Bt.initialize()}function Lt(){return Am(mt).create({debug:en,errHandler:we,dashMetrics:pe,mediaPlayerModel:Ee,requestModifier:(0,He.Z)(mt).getInstance(),mssHandler:De,settings:Nt})}function On(){if(ge)return ge;var Ve=dashjs.Protection;if(typeof Ve=="function"){var Ke=Ve(mt).create();return T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),Ae.extend(Ve.errors),j||(j=(0,Im.Z)(mt).getInstance()),ge=Ke.createProtectionSystem({debug:en,errHandler:we,videoModel:at,customParametersModel:Le,capabilities:j,eventBus:Wt,events:T.Z,BASE64:Wf,constants:y.Z,cmcdModel:Ye,settings:Nt})}return null}function st(){if(!ee)throw rt;if(Be)return Be;var Ve=dashjs.OfflineController;if(typeof Ve=="function"){T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),Ae.extend(Ve.errors);var Ke=Lt(),Dt=Vr(mt).create();return Dt.setConfig({manifestModel:Ne,adapter:ze,manifestLoader:Ke,errHandler:we,contentSteeringController:ke}),Be=Ve(mt).create({debug:en,manifestUpdater:Dt,baseURLController:je,manifestLoader:Ke,manifestModel:Ne,mediaPlayerModel:Ee,abrController:Se,playbackController:Me,adapter:ze,errHandler:we,dashMetrics:pe,timelineConverter:ie,segmentBaseController:Bt,schemeLoaderFactory:ye,eventBus:Wt,events:T.Z,errors:Ae,constants:y.Z,settings:Nt,dashConstants:v.Z,urlUtils:(0,Tt.Z)(mt).getInstance()})}return null}function nt(Ve){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ke);return Dt?Ve+(Dt.manifestInfo.availableFrom.getTime()/1e3+Dt.range.start):0}function qt(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Be&&Be.resetRecords(),!J&&B&&(J=!0,P.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,Ve):ae.loadWithManifest(B,Ve)),!H&&Yt()&&(H=!0,P.info("Playback Initialized"))}return L={initialize:function(Ve,Ke,Dt){var fn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;j||(j=(0,Im.Z)(mt).getInstance()).setConfig({settings:Nt}),we||(we=Ol(mt).getInstance()),j.supportsMediaSource()?(ee||(ee=!0,ie=Eu(mt).getInstance(),Se||(Se=Wn(mt).getInstance()).setConfig({settings:Nt}),ye||(ye=Pi(mt).getInstance()),Me||(Me=R(mt).getInstance()),me||(me=ju(mt).getInstance()),ae||(ae=qo(mt).getInstance()),Q||(Q=Os(mt).getInstance()),Re||(Re=fo(mt).getInstance()),Ie||(Ie=Mh(mt).getInstance()),ke||(ke=Ia(mt).getInstance()),ue||(ue=xE(mt).getInstance()),ze=Om(mt).getInstance(),Ne=PE(mt).getInstance(),Ye=ar(mt).getInstance(),dt=_n(mt).getInstance(),pe=Us(mt).getInstance({settings:Nt}),ht=OE(mt).getInstance({settings:Nt}),ze.setConfig({constants:y.Z,cea608parser:C(),errHandler:we,BASE64:Wf}),je||(je=AE(mt).create()),je.setConfig({adapter:ze,contentSteeringController:ke}),Ie.setConfig({adapter:ze}),Bt||(Bt=LE(mt).getInstance({dashMetrics:pe,mediaPlayerModel:Ee,errHandler:we,baseURLController:je,events:T.Z,eventBus:Wt,debug:en,boxParser:(0,oa.Z)(mt).getInstance(),requestModifier:(0,He.Z)(mt).getInstance(),errors:Ae})),me.setConfig({domStorage:ht,settings:Nt,customParametersModel:Le}),Ee.setConfig({playbackController:Me,serviceDescriptionController:Ie}),ke.setConfig({adapter:ze,errHandler:we,dashMetrics:pe,mediaPlayerModel:Ee,manifestModel:Ne,serviceDescriptionController:Ie,eventBus:Wt,requestModifier:(0,He.Z)(mt).getInstance()}),un(),Zt(Dt===void 0||Dt),st()),Ve&&xn(Ve),Ke&&Gn(Ke,fn),P.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):we.error(new ce.Z(Ae.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ae.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ve){Ve&&(Ve.capabilities&&(j=Ve.capabilities),Ve.capabilitiesFilter&&(ue=Ve.capabilitiesFilter),Ve.streamController&&(ae=Ve.streamController),Ve.textController&&(se=Ve.textController),Ve.gapController&&(Q=Ve.gapController),Ve.playbackController&&(Me=Ve.playbackController),Ve.serviceDescriptionController&&(Ie=Ve.serviceDescriptionController),Ve.contentSteeringController&&(ke=Ve.contentSteeringController),Ve.catchupController&&(Re=Ve.catchupController),Ve.mediaPlayerModel&&(Ee=Ve.mediaPlayerModel),Ve.customParametersModel&&(Le=Ve.customParametersModel),Ve.abrController&&(Se=Ve.abrController),Ve.schemeLoaderFactory&&(ye=Ve.schemeLoaderFactory),Ve.mediaController&&(me=Ve.mediaController),Ve.settings&&(Nt=Ve.settings))},on:function(Ve,Ke,Dt,fn){Wt.on(Ve,Ke,Dt,fn)},off:function(Ve,Ke,Dt){Wt.off(Ve,Ke,Dt)},extend:function(Ve,Ke,Dt){U.Z.extend(Ve,Ke,Dt,mt)},attachView:xn,attachSource:Gn,refreshManifest:function(Ve){if(!ee)throw rt;if(!Yt())return Ve(null,An);var Ke=this;typeof Ve=="function"&&Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Dt(fn){Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Dt,Ke),fn.error?Ve(null,fn.error):Ve(fn.manifest)},Ke),ae.refreshManifest()},isReady:Yt,preload:function(){if(!at.getElement()&&!J){if(!B)throw An;qt(fe)}},play:function(){if(!H)throw kt;(!ne||Nn()&&H)&&Me.play(!0)},isPaused:Nn,pause:function(){if(!H)throw kt;Me.pause()},isSeeking:function(){if(!H)throw kt;return Me.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw kt;return Me.getLowLatencyModeEnabled()},seek:function(Ve){if(!H)throw kt;if((0,_e.PS)(Ve,"number"),isNaN(Ve))throw y.Z.BAD_ARGUMENT_ERROR;Ve<0&&(Ve=0);var Ke=Me.getIsDynamic()?ir(Ve):Ve,Dt=Pn();!Me.getIsDynamic()&&Dt.duration&&(Ke=Math.min(Dt.duration,Ke)),Me.seek(Ke,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Me.seekToOriginalLive()},setPlaybackRate:function(Ve){Pn().playbackRate=Ve},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(Ve){(0,_e.PS)(Ve,"boolean"),Pn().muted=Ve},isMuted:function(){return Pn().muted},setVolume:function(Ve){if(typeof Ve!="number"||isNaN(Ve)||Ve<0||Ve>1)throw y.Z.BAD_ARGUMENT_ERROR;Pn().volume=Ve},getVolume:function(){return Pn().volume},time:It,duration:$t,timeAsUTC:function(){if(!H)throw kt;return It()<0?NaN:nt(It())},durationAsUTC:function(){if(!H)throw kt;return nt($t())},getActiveStream:bt,getDVRWindowSize:function(){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Ke=pe.getCurrentDVRInfo(Ve);return Ke?Ke.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var Ve=Ne.getValue();return Ve?je.getBaseUrls(Ve):[]},getAvailableLocations:function(){var Ve=Ne.getValue();if(!Ve)return[];var Ke=ze.getLocation(Ve),Dt=ke.getSynthesizedLocationElements(Ke);return Ke.concat(Dt)},getTargetLiveDelay:function(){if(!H)throw kt;return Me.getOriginalLiveDelay()},convertToTimeCode:function(Ve){Ve=Math.max(Ve,0);var Ke=Math.floor(Ve/3600),Dt=Math.floor(Ve%3600/60),fn=Math.floor(Ve%3600%60);return(Ke===0?"":Ke<10?"0"+Ke.toString()+":":Ke.toString()+":")+(Dt<10?"0"+Dt.toString():Dt.toString())+":"+(fn<10?"0"+fn.toString():fn.toString())},formatUTC:function(Ve,Ke,Dt){var fn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*Ve),sr=Tn.toLocaleDateString(Ke),Zr=Tn.toLocaleTimeString(Ke,{hour12:Dt});return fn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(Ve){var Ke=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT];if(Ve)return Ke.indexOf(Ve)!==-1?vn().getCurrentBufferLevel(Ve)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);var Dt=Ke.map(function(fn){return Fn(fn).length>0?vn().getCurrentBufferLevel(fn):Number.MAX_VALUE}).reduce(function(fn,Tn){return Math.min(fn,Tn)});return Dt===Number.MAX_VALUE?NaN:Dt},getTTMLRenderingDiv:function(){return at?at.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(Ve){B=Ve,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw rt;return H?Me.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ve){if(!J)throw Gt;return Se.getTopBitrateInfoFor(Ve)},setAutoPlay:Zt,getAutoPlay:function(){return ne},getDashMetrics:vn,getQualityFor:function(Ve){if(!J)throw Gt;if(Ve===y.Z.IMAGE){var Ke=bt();if(!Ke)return-1;var Dt=Ke.getThumbnailController();return Dt?Dt.getCurrentTrackIndex():-1}return Se.getQualityFor(Ve)},setQualityFor:function(Ve,Ke){var Dt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw Gt;if(Ve===y.Z.IMAGE){var fn=bt();if(!fn)return;var Tn=fn.getThumbnailController();Tn&&Tn.setTrackByIndex(Ke)}Se.setPlaybackQuality(Ve,ae.getActiveStreamInfo(),Ke,{forceReplace:Dt})},updatePortalSize:function(){Se.setElementSize(),Se.setWindowResizeEventCalled(!0)},enableText:function(Ve){var Ke=ae.getActiveStreamInfo();return!(!Ke||!se)&&se.enableText(Ke.id,Ve)},enableForcedTextStreaming:function(Ve){return!(!ae.getActiveStreamInfo()||!se)&&se.enableForcedTextStreaming(Ve)},isTextEnabled:function(){var Ve=ae.getActiveStreamInfo();return!(!Ve||!se)&&se.isTextEnabled(Ve)},setTextTrack:function(Ve){if(!H)throw kt;var Ke=ae.getActiveStreamInfo();Ke&&se&&se.setTextTrack(Ke.id,Ve)},getBitrateInfoListFor:function(Ve){if(!J)throw Gt;var Ke=bt();return Ke?Ke.getBitrateListFor(Ve):[]},getStreamsFromManifest:function(Ve){if(!J)throw Gt;return ze.getStreamsInfo(Ve)},getTracksFor:Fn,getTracksForTypeFromManifest:function(Ve,Ke,Dt){if(!J)throw Gt;return(Dt=Dt||ze.getStreamsInfo(Ke,1)[0])?ze.getAllMediaInfoForType(Dt,Ve,Ke):[]},getCurrentTrackFor:function(Ve){if(!J)throw Gt;var Ke=ae.getActiveStreamInfo();return me.getCurrentTrackFor(Ve,Ke.id)},setInitialMediaSettingsFor:function(Ve,Ke){if(!ee)throw rt;me.setInitialSettings(Ve,Ke)},getInitialMediaSettingsFor:function(Ve){if(!ee)throw rt;return me.getInitialSettings(Ve)},setCurrentTrack:function(Ve){var Ke=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw Gt;me.setTrack(Ve,Ke)},addABRCustomRule:function(Ve,Ke,Dt){Le.addAbrCustomRule(Ve,Ke,Dt)},removeABRCustomRule:function(Ve){Le.removeAbrCustomRule(Ve)},removeAllABRCustomRule:function(){Le.removeAllAbrCustomRule()},getABRCustomRules:function(){return Le.getAbrCustomRules()},getAverageThroughput:function(Ve){var Ke=Se.getThroughputHistory(),Dt=Me.getIsDynamic();return Ke?Ke.getAverageThroughput(Ve,Dt):0},retrieveManifest:function(Ve,Ke){var Dt=Lt(),fn=this;Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?Ke(null,sr.error):Ke(sr.manifest),Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,fn),Dt.reset()},fn),Je.initialize(Ve),Dt.load(Ve)},addUTCTimingSource:function(Ve,Ke){Le.addUTCTimingSource(Ve,Ke)},removeUTCTimingSource:function(Ve,Ke){Le.removeUTCTimingSource(Ve,Ke)},clearDefaultUTCTimingSources:function(){Le.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(Ve,Ke){Le.setXHRWithCredentialsForType(Ve,Ke)},getXHRWithCredentialsForType:function(Ve){return Le.getXHRWithCredentialsForType(Ve)},getProtectionController:function(){return On()},attachProtectionController:function(Ve){ge=Ve},setProtectionData:function(Ve){V=Ve,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(Ve){Le.registerLicenseRequestFilter(Ve)},registerLicenseResponseFilter:function(Ve){Le.registerLicenseResponseFilter(Ve)},unregisterLicenseRequestFilter:function(Ve){Le.unregisterLicenseRequestFilter(Ve)},unregisterLicenseResponseFilter:function(Ve){Le.unregisterLicenseResponseFilter(Ve)},registerCustomCapabilitiesFilter:function(Ve){Le.registerCustomCapabilitiesFilter(Ve)},unregisterCustomCapabilitiesFilter:function(Ve){Le.unregisterCustomCapabilitiesFilter(Ve)},setCustomInitialTrackSelectionFunction:function(Ve){Le.setCustomInitialTrackSelectionFunction(Ve)},resetCustomInitialTrackSelectionFunction:function(){Le.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ve){if(!at.getElement())throw Ft;at.setTTMLRenderingDiv(Ve)},attachVttRenderingDiv:function(Ve){if(!at.getElement())throw Ft;at.setVttRenderingDiv(Ve)},getCurrentTextTrackIndex:function(){var Ve=ae.getActiveStreamInfo();if(Ve&&se)return se.getCurrentTrackIdx(Ve.id)},provideThumbnail:function(Ve,Ke){if(typeof Ke=="function")if(Ve<0)Ke(null);else{var Dt=Me.getIsDynamic()?ir(Ve):Ve,fn=ae.getStreamForTime(Dt);if(fn!==null){var Tn=fn.getThumbnailController();if(Tn)return Tn.provide(Dt,Ke);Ke(null)}else Ke(null)}},getDashAdapter:function(){return ze},getOfflineController:function(){return st()},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getSettings:function(){return Nt.get()},updateSettings:function(Ve){Nt.update(Ve)},resetSettings:function(){Nt.reset()},reset:Jt,destroy:function(){Jt(),U.Z.deleteSingletonInstances(mt)}},P=en.getLogger(L),ee=!1,H=!1,J=!1,ne=!0,fe=NaN,ge=null,Be=null,V=null,ze=null,Bt=null,T.Z.extend(_.Z),Ee=Ll(mt).getInstance(),Le=(0,ni.Z)(mt).getInstance(),at=Sr(mt).getInstance(),Je=DE(mt).getInstance(),L}Bc.__dashjs_factory_name="MediaPlayer";var jc=U.Z.getClassFactory(Bc);jc.events=_.Z,jc.errors=Ae,U.Z.updateClassFactory(Bc.__dashjs_factory_name,jc);var Km=jc},8825:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},C(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&C(I,R)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var Z=v(this).constructor;I=Reflect.construct(R,arguments,Z)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(w(8342).Z));g.Z=D},3393:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(y.prototype,v),C}());g.Z=F},3860:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(y.prototype,v),C}());g.Z=F},8080:function(b,g,w){w.d(g,{default:function(){return q}});var F=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};F.SSL_CONNECTION_FAILED_PREFIX="SSL",F.DNS_RESOLUTION_FAILED="C00",F.HOST_UNREACHABLE="C01",F.CONNECTION_REFUSED="C02",F.CONNECTION_ERROR="C03",F.CORRUPT_MEDIA_ISOBMFF="M00",F.CORRUPT_MEDIA_OTHER="M01",F.BASE_URL_CHANGED="F00",F.BECAME_REPORTER="S00";var C=F,y=w(1180);function v(K){var _e,de,He=(K=K||{}).eventBus,Tt=K.dashMetrics,ot=K.metricsConstants,it=K.events;function et(Qt){var nn=new C;if(de){for(var Ot in Qt)Qt.hasOwnProperty(Ot)&&(nn[Ot]=Qt[Ot]);nn.mpdurl||(nn.mpdurl=de.originalUrl||de.url),nn.terror||(nn.terror=new Date),Tt.addDVBErrors(nn)}}function ft(Qt){Qt.error||(de=Qt.manifest)}function vt(Qt){et({errorcode:C.BASE_URL_CHANGED,servicelocation:Qt.entry})}function Et(){et({errorcode:C.BECAME_REPORTER})}function Ct(Qt){var nn;Qt.metric===ot.HTTP_REQUEST&&((nn=Qt.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&et({errorcode:nn.responsecode||C.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function hn(Qt){var nn;switch(Qt.error?Qt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=C.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=C.CORRUPT_MEDIA_OTHER;break;default:return}et({errorcode:nn})}return _e={initialize:function(){He.on(it.MANIFEST_UPDATED,ft,_e),He.on(it.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,vt,_e),He.on(it.METRIC_ADDED,Ct,_e),He.on(it.METRIC_UPDATED,Ct,_e),He.on(it.PLAYBACK_ERROR,hn,_e),He.on(y.Z.BECAME_REPORTING_PLAYER,Et,_e)},reset:function(){He.off(it.MANIFEST_UPDATED,ft,_e),He.off(it.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,vt,_e),He.off(it.METRIC_ADDED,Ct,_e),He.off(it.METRIC_UPDATED,Ct,_e),He.off(it.PLAYBACK_ERROR,hn,_e),He.off(y.Z.BECAME_REPORTING_PLAYER,Et,_e)}}}v.__dashjs_factory_name="DVBErrorsTranslator";var D=dashjs.FactoryMaker.getSingletonFactory(v),m=w(2295);function T(K){K=K||{};var _e,de,He=!1,Tt=this.context,ot=K.mediaElement;return _e={initialize:function(it){it&&it.length&&(it.forEach(function(et){var ft=et.starttime,vt=ft+et.duration;de.add(ft,vt)}),He=!!it[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var it,et=de.length;if(!et)return!0;it=He?new Date().getTime()/1e3:ot.currentTime;for(var ft=0;ft<et;ft+=1){var vt=de.start(ft),Et=de.end(ft);if(vt<=it&&it<Et)return!0}return!1}},de=(0,m.Z)(Tt).create(),_e}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function x(){return{serialise:function K(_e){var de,He,Tt=[],ot=[];for(de in _e)if(_e.hasOwnProperty(de)&&de.indexOf("_")!==0){if((He=_e[de])==null&&(He=""),Array.isArray(He)){if(!He.length)continue;ot=[],He.forEach(function(it){var et=Object.prototype.toString.call(it).slice(8,-1)!=="Object";ot.push(et?it:K(it))}),He=ot.map(encodeURIComponent).join(",")}else typeof He=="string"?He=encodeURIComponent(He):He instanceof Date?He=He.toISOString():typeof He=="number"&&(He=Math.round(He));Tt.push(de+"="+He)}return Tt.join("&")}}}x.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(x);function I(){var K,_e,de,He=window.crypto||window.msCrypto,Tt=Uint32Array,ot=Math.pow(2,8*Tt.BYTES_PER_ELEMENT)-1;function it(){He&&(K||(K=new Tt(10)),He.getRandomValues(K),_e=0)}return de={random:function(et,ft){var vt;return et||(et=0),ft||(ft=1),He?(_e===K.length&&it(),vt=K[_e]/ot,_e+=1):vt=Math.random(),vt*(ft-et)+et}},it(),de}I.__dashjs_factory_name="RNG";var R=dashjs.FactoryMaker.getSingletonFactory(I),Z=w(5717);function z(K){var _e;K=K||{};var de,He,Tt,ot,it,et,ft,vt=this.context,Et=[],Ct=K.metricsConstants;function hn(){ot=!1,it=!1,et=null,ft=null}return _e={report:function(Qt,nn){Array.isArray(nn)||(nn=[nn]),it&&ft.isEnabled()&&nn.forEach(function(Ot){var Un=de.serialise(Ot);Qt!==Ct.DVB_ERRORS&&(Un="metricname=".concat(Qt,"&").concat(Un)),function(gr,Pr,dr){var ti=new XMLHttpRequest;ti.withCredentials=He.getXHRWithCredentialsForType(Ct.HTTP_REQUEST_DVB_REPORTING_TYPE);var eo=function(){var Or=Et.indexOf(ti);Or!==-1&&(Et.splice(Or,1),!(ti.status>=200&&ti.status<300)&&dr&&dr())};Et.push(ti);try{ti.open("GET",gr),ti.onloadend=eo,ti.onerror=eo,ti.send()}catch(Or){ti.onerror()}}(Un="".concat(et,"?").concat(Un),0,function(){it=!1})})},initialize:function(Qt,nn){var Ot;if(ft=nn,!(et=Qt.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");ot||((Ot=Qt.dvbProbability)&&(Ot===1e3||Ot/1e3>=Tt.random())&&(it=!0),ot=!0)},reset:function(){hn()}},de=_(vt).getInstance(),Tt=R(vt).getInstance(),He=(0,Z.Z)(vt).getInstance(),hn(),_e}z.__dashjs_factory_name="DVBReporting";var W=dashjs.FactoryMaker.getClassFactory(z);function $(K){K=K||{};var _e,de={"urn:dvb:dash:reporting:2014":W},He=this.context,Tt=K.debug?K.debug.getLogger(_e):{},ot=K.metricsConstants,it=K.mediaPlayerModel||{};return{create:function(et,ft){var vt;try{(vt=de[et.schemeIdUri](He).create({metricsConstants:ot,mediaPlayerModel:it})).initialize(et,ft)}catch(Et){vt=null,Tt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(et.schemeIdUri," (").concat(Et.message,")"))}return vt},register:function(et,ft){de[et]=ft},unregister:function(et){delete de[et]}}}$.__dashjs_factory_name="ReportingFactory";var le=dashjs.FactoryMaker.getSingletonFactory($);function N(K){var _e=[],de=le(this.context).getInstance(K);return{initialize:function(He,Tt){He.some(function(ot){var it=de.create(ot,Tt);if(it)return _e.push(it),!0})},reset:function(){_e.forEach(function(He){return He.reset()}),_e=[]},report:function(He,Tt){_e.forEach(function(ot){return ot.report(He,Tt)})}}}N.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(N);function ce(){return{reconstructFullMetricName:function(K,_e,de){var He=K;return _e&&(He+="("+_e,de&&de.length&&(He+=","+de),He+=")"),He},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function he(K){var _e,de,He,Tt,ot;K=K||{};var it=this.context,et=oe(it).getInstance(),ft=[],vt=K.metricsConstants;function Et(){var Ct=function(){try{return Object.keys(ft).map(function(hn){return ft[hn]}).reduce(function(hn,Qt){return hn.level<Qt.level?hn:Qt})}catch(hn){return}}();Ct&&ot!==Ct.t&&(ot=Ct.t,_e.report(He,Ct))}return{initialize:function(Ct,hn,Qt){hn&&(de=et.validateN(Qt),_e=hn,He=et.reconstructFullMetricName(Ct,Qt),Tt=setInterval(Et,de))},reset:function(){clearInterval(Tt),Tt=null,de=0,_e=null,ot=null},handleNewMetric:function(Ct,hn,Qt){Ct===vt.BUFFER_LEVEL&&(ft[Qt]=hn)}}}he.__dashjs_factory_name="BufferLevelHandler";var be=dashjs.FactoryMaker.getClassFactory(he),Xe=dashjs.FactoryMaker.getClassFactory(function(K){var _e,de=(K=K||{}).eventBus,He=K.metricsConstants;function Tt(){de.off(y.Z.METRICS_INITIALISATION_COMPLETE,Tt,this),de.trigger(y.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(ot,it){it&&(_e=it,de.on(y.Z.METRICS_INITIALISATION_COMPLETE,Tt,this))},reset:function(){_e=null},handleNewMetric:function(ot,it){ot===He.DVB_ERRORS&&_e&&_e.report(ot,it)}}});function Ae(K){var _e,de,He,Tt,ot;K=K||{};var it=[],et=oe(this.context).getInstance(),ft=K.metricsConstants;function vt(){var Et=it;Et.length&&_e&&_e.report(Tt,Et),it=[]}return{initialize:function(Et,Ct,hn,Qt){Ct&&(de=et.validateN(hn),_e=Ct,Qt&&Qt.length&&(He=Qt),Tt=et.reconstructFullMetricName(Et,hn,Qt),ot=setInterval(vt,de))},reset:function(){clearInterval(ot),ot=null,de=null,He=null,it=[],_e=null},handleNewMetric:function(Et,Ct){Et===ft.HTTP_REQUEST&&(He&&He!==Ct.type||it.push(Ct))}}}Ae.__dashjs_factory_name="HttpListHandler";var Ze=dashjs.FactoryMaker.getClassFactory(Ae);function tt(){var K,_e;return{initialize:function(de,He){K=de,_e=He},reset:function(){_e=null,K=void 0},handleNewMetric:function(de,He){de===K&&_e&&_e.report(K,He)}}}tt.__dashjs_factory_name="GenericMetricHandler";var ut=dashjs.FactoryMaker.getClassFactory(tt);function $e(K){var _e,de=(K=K||{}).debug?K.debug.getLogger(_e):{},He=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,Tt=this.context,ot={BufferLevel:be,DVBErrors:Xe,HttpList:Ze,PlayList:ut,RepSwitchList:ut,TcpList:ut};return{create:function(it,et){var ft,vt=it.match(He);if(vt){try{(ft=ot[vt[1]](Tt).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(vt[1],et,vt[3],vt[5])}catch(Et){ft=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(vt[1]," with args ").concat(vt[3],", ").concat(vt[5]," (").concat(Et.message,")"))}return ft}},register:function(it,et){ot[it]=et},unregister:function(it){delete ot[it]}}}$e.__dashjs_factory_name="MetricsHandlerFactory";var lt=dashjs.FactoryMaker.getSingletonFactory($e);function wt(K){K=K||{};var _e,de=[],He=this.context,Tt=K.eventBus,ot=K.events,it=lt(He).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function et(ft){de.forEach(function(vt){vt.handleNewMetric(ft.metric,ft.value,ft.mediaType)})}return _e={initialize:function(ft,vt){ft.split(",").forEach(function(Et,Ct,hn){var Qt;if(Et.indexOf("(")!==-1&&Et.indexOf(")")===-1){var nn=hn[Ct+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(Et+=","+nn,delete hn[Ct+1])}(Qt=it.create(Et,vt))&&de.push(Qt)}),Tt.on(ot.METRIC_ADDED,et,_e),Tt.on(ot.METRIC_UPDATED,et,_e)},reset:function(){Tt.off(ot.METRIC_ADDED,et,_e),Tt.off(ot.METRIC_UPDATED,et,_e),de.forEach(function(ft){return ft.reset()}),de=[]}}}wt.__dashjs_factory_name="MetricsHandlersController";var Oe=dashjs.FactoryMaker.getClassFactory(wt);function Qe(K){var _e,de,He;K=K||{};var Tt=this.context;function ot(){_e&&_e.reset(),de&&de.reset(),He&&He.reset()}return{initialize:function(it){try{(He=U(Tt).create({mediaElement:K.mediaElement})).initialize(it.Range),(de=X(Tt).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(it.Reporting,He),(_e=Oe(Tt).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(it.metrics,de)}catch(et){throw ot(),et}},reset:ot}}Qe.__dashjs_factory_name="MetricsController";var ct=dashjs.FactoryMaker.getClassFactory(Qe),Xt=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Kt=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},_t=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function At(K){var _e=(K=K||{}).adapter,de=K.constants;return{getMetrics:function(He){var Tt=[];return He&&He.Metrics_asArray&&He.Metrics_asArray.forEach(function(ot){var it=new Xt,et=_e.getIsDynamic(He);ot.hasOwnProperty("metrics")&&(it.metrics=ot.metrics,ot.Range_asArray&&ot.Range_asArray.forEach(function(ft){var vt=new Kt;vt.starttime=function(Et,Ct,hn){var Qt,nn,Ot=0;return Ct?Ot=_e.getAvailabilityStartTime(Et)/1e3:(Qt=_e.getRegularPeriods(Et)).length&&(Ot=Qt[0].start),nn=Ot,hn&&hn.hasOwnProperty(de.START_TIME)&&(nn+=hn.starttime),nn}(He,et,ft),ft.hasOwnProperty("duration")?vt.duration=ft.duration:vt.duration=_e.getDuration(He),vt._useWallClockTime=et,it.Range.push(vt)}),ot.Reporting_asArray&&(ot.Reporting_asArray.forEach(function(ft){var vt=new _t;ft.hasOwnProperty(de.SCHEME_ID_URI)&&(vt.schemeIdUri=ft.schemeIdUri,ft.hasOwnProperty("value")&&(vt.value=ft.value),ft.hasOwnProperty(de.DVB_REPORTING_URL)&&(vt.dvbReportingUrl=ft[de.DVB_REPORTING_URL]),ft.hasOwnProperty(de.DVB_PROBABILITY)&&(vt.dvbProbability=ft[de.DVB_PROBABILITY]),it.Reporting.push(vt))}),Tt.push(it)))}),Tt}}}At.__dashjs_factory_name="ManifestParsing";var Ce=dashjs.FactoryMaker.getSingletonFactory(At);function re(K){var _e;K=K||{};var de={},He=this.context,Tt=K.eventBus,ot=K.events;function it(ft){if(!ft.error){var vt=Object.keys(de);Ce(He).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ft.manifest).forEach(function(Et){var Ct=JSON.stringify(Et);if(de.hasOwnProperty(Ct))vt.splice(Ct,1);else try{var hn=ct(He).create(K);hn.initialize(Et),de[Ct]=hn}catch(Qt){}}),vt.forEach(function(Et){de[Et].reset(),delete de[Et]}),Tt.trigger(y.Z.METRICS_INITIALISATION_COMPLETE)}}function et(){Object.keys(de).forEach(function(ft){de[ft].reset()}),de={}}return _e={reset:function(){Tt.off(ot.MANIFEST_UPDATED,it,_e),Tt.off(ot.STREAM_TEARDOWN_COMPLETE,et,_e)}},Tt.on(ot.MANIFEST_UPDATED,it,_e),Tt.on(ot.STREAM_TEARDOWN_COMPLETE,et,_e),_e}re.__dashjs_factory_name="MetricsCollectionController";var Fe=dashjs.FactoryMaker.getClassFactory(re);function O(){var K=this.context;return{createMetricsReporting:function(_e){return D(K).getInstance({eventBus:_e.eventBus,dashMetrics:_e.dashMetrics,metricsConstants:_e.metricsConstants,events:_e.events}).initialize(),Fe(K).create(_e)},getReportingFactory:function(){return le(K).getInstance()},getMetricsHandlerFactory:function(){return lt(K).getInstance()}}}O.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(O);M.events=y.Z,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,M);var q=M},1180:function(b,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function C(m,T){return C=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},C(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&C(I,R)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var Z=v(this).constructor;I=Reflect.construct(R,arguments,Z)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(w(8342).Z));g.Z=D},5717:function(b,g,w){var F=w(2610),C=w(5448),y=w(1264),v=w(3106),D=w(1767),m=w(3393);function T(){var U,x,_,I,R,Z,z,W,$=this.context,le=(0,y.Z)($).getInstance();function N(){I=[],R=[],Z=[],W=[],z=null,x=[]}function X(be,Xe){var Ae=-1;be.some(function(Ze,tt){if(Ze===Xe)return Ae=tt,!0}),Ae<0||be.splice(Ae,1)}function ce(be){var Xe;for(Xe=0;Xe<W.length;Xe++)if(W[Xe].rulename===be)return Xe;return-1}function oe(be,Xe){he(be,Xe);var Ae=new F.Z;Ae.schemeIdUri=be,Ae.value=Xe,x.push(Ae)}function he(be,Xe){(0,v.PS)(be,"string"),(0,v.PS)(Xe,"string"),x.forEach(function(Ae,Ze){Ae.schemeIdUri===be&&Ae.value===Xe&&x.splice(Ze,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return z},setCustomInitialTrackSelectionFunction:function(be){z=be},resetCustomInitialTrackSelectionFunction:function(){z=null},getLicenseResponseFilters:function(){return R},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return Z},registerCustomCapabilitiesFilter:function(be){Z.push(be)},registerLicenseResponseFilter:function(be){R.push(be)},registerLicenseRequestFilter:function(be){I.push(be)},unregisterCustomCapabilitiesFilter:function(be){X(Z,be)},unregisterLicenseResponseFilter:function(be){X(R,be)},unregisterLicenseRequestFilter:function(be){X(I,be)},addAbrCustomRule:function(be,Xe,Ae){if(typeof be!="string"||be!==D.Z.ABANDON_FRAGMENT_RULES&&be!==D.Z.QUALITY_SWITCH_RULES||typeof Xe!="string")throw m.Z.BAD_ARGUMENT_ERROR;var Ze=ce(Xe);Ze===-1?W.push({type:be,rulename:Xe,rule:Ae}):(W[Ze].type=be,W[Ze].rule=Ae)},removeAllAbrCustomRule:function(){W=[]},removeAbrCustomRule:function(be){if(be){var Xe=ce(be);Xe!==-1&&W.splice(Xe,1)}else W=[]},getAbrCustomRules:function(){return W},addUTCTimingSource:oe,removeUTCTimingSource:he,getUTCTimingSources:function(){return x},clearDefaultUTCTimingSources:function(){x=[]},restoreDefaultUTCTimingSources:function(){var be=le.get().streaming.utcSynchronization.defaultTimingSource;oe(be.scheme,be.value)},setXHRWithCredentialsForType:function be(Xe,Ae){Xe?_[Xe]=!!Ae:Object.keys(_).forEach(function(Ze){be(Ze,Ae)})},getXHRWithCredentialsForType:function(be){var Xe=_[be];return Xe===void 0?_.default:Xe},setConfig:function(){},reset:function(){N()}},_={default:!1},N(),U}T.__dashjs_factory_name="CustomParametersModel",g.Z=C.Z.getSingletonFactory(T)},9032:function(b,g,w){var F=w(5448),C=w(7473);function y(D){var m=(D=D||{}).requestModifier;function T(U){var x=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=x),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var R in U.headers){var Z=U.headers[R];Z&&I.setRequestHeader(R,Z)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,C.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var x=U.response;x.onloadend=x.onerror=x.onprogress=void 0,x.abort()}}}y.__dashjs_factory_name="XHRLoader";var v=F.Z.getClassFactory(y);g.Z=v},1737:function(b,g,w){function F(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}w.d(g,{default:function(){return Lu}});var C={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},y=function(){function tn(){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(St){for(var zt=null,Mt=0;Mt<St.length;++Mt){var Vt=St[Mt];Vt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Vt.value.toLowerCase()!=="cenc"&&Vt.value.toLowerCase()!=="cbcs"||(zt=Vt)}return zt}},{key:"getPSSHData",value:function(St){var zt=8,Mt=new DataView(St),Vt=Mt.getUint8(zt);return zt+=20,Vt>0&&(zt+=4+16*Mt.getUint32(zt)),zt+=4,St.slice(zt)}},{key:"getPSSHForKeySystem",value:function(St,zt){var Mt=tn.parsePSSHList(zt);return St&&Mt.hasOwnProperty(St.uuid.toLowerCase())?Mt[St.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(St,zt){return"pssh"in St?(St.pssh.__text=St.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),zt.decodeArray(St.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(St){if(St==null)return[];for(var zt=new DataView(St.buffer||St),Mt={},Vt=0;;){var mn,In,Zn=void 0,Cn=Vt;if(Vt>=zt.buffer.byteLength)break;if(mn=Vt+zt.getUint32(Vt),Vt+=4,zt.getUint32(Vt)===1886614376)if(Vt+=4,(In=zt.getUint8(Vt))===0||In===1){Vt++,Vt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;Vt+=6,Vt+=4,Mt[Zn=Zn.toLowerCase()]=zt.buffer.slice(Cn,mn),Vt=mn}else Vt=mn;else Vt=mn}return Mt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(St,zt){try{if(!St||St.length===0)return null;for(var Mt=0,Vt=null;Mt<St.length&&!Vt;){var mn=St[Mt];if(mn&&mn.contentProtection&&mn.contentProtection.length>0){var In=mn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===zt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!Vt;){for(var Cn=In[Zn],Rn=0;Rn<C.attributes.length&&!Vt;){for(var on=0,Bn=C.attributes[Rn];on<C.prefixes.length&&!Vt;){var kn=C.prefixes[on];Cn[Bn]&&Cn[Bn].__prefix&&Cn[Bn].__prefix===kn&&Cn[Bn].__text&&(Vt=Cn[Bn].__text),on+=1}Rn+=1}Zn+=1}}Mt+=1}return Vt}catch(er){return null}}}],an&&F(sn,an),tn}(),v=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},D=function tn(sn,an,St,zt,Mt){(function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=St,this.persistentState=zt,this.sessionTypes=Mt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,St){return an.__proto__=St,an},T(tn,sn)}function U(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function x(tn){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},x(tn)}var _=new(function(tn){(function(Mt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Vt&&T(Mt,Vt)})(zt,tn);var sn,an,St=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,Vt=x(sn);if(an){var mn=x(this).constructor;Mt=Reflect.construct(Vt,arguments,mn)}else Mt=Vt.apply(this,arguments);return U(this,Mt)});function zt(){var Mt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Mt=St.call(this)).MEDIA_KEYERR_CODE=100,Mt.MEDIA_KEYERR_UNKNOWN_CODE=101,Mt.MEDIA_KEYERR_CLIENT_CODE=102,Mt.MEDIA_KEYERR_SERVICE_CODE=103,Mt.MEDIA_KEYERR_OUTPUT_CODE=104,Mt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Mt.MEDIA_KEYERR_DOMAIN_CODE=106,Mt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Mt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Mt.KEY_SESSION_CREATED_ERROR_CODE=113,Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Mt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Mt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Mt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Mt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Mt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Mt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Mt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Mt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Mt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Mt}return zt}(w(2230).Z)),I=w(5459),R=function tn(sn,an,St,zt,Mt,Vt,mn,In){(function(Zn,Cn){if(!(Zn instanceof Cn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=St,this.headers=zt,this.withCredentials=Mt,this.messageType=Vt,this.sessionId=mn,this.data=In},Z=function tn(sn,an,St){(function(zt,Mt){if(!(zt instanceof Mt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=St},z=w(7855),W=w(703),$=w(3393),le=w(5448);function N(tn){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},N(tn)}function X(tn){var sn,an,St,zt,Mt,Vt,mn,In,Zn,Cn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Vn=tn.constants,rn=[],cn=tn.cmcdModel,bn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function br(_n,Xn){In||Zn?In&&Lr():function(hr,ni){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Pi,li){return(Mt&&Mt[Pi.ks.systemString]&&Mt[Pi.ks.systemString].priority>=0?Mt[Pi.ks.systemString].priority:hr.length)-(Mt&&Mt[li.ks.systemString]&&Mt[li.ks.systemString].priority>=0?Mt[li.ks.systemString].priority:hr.length)});for(var Qr=0;Qr<hr.length;Qr++){var ta=wo(hr[Qr]);Bi.push({ks:hr[Qr].ks,configs:[ta],protData:hr[Qr].protData})}Bn.requestKeySystemAccess(Bi).then(function(Pi){var li=(Mr=Pi.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+li+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Pi){if(In=Pi,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var li=qr(In);li&&li.serverCertificate&&li.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(li.serverCertificate).buffer),Lr()}}).catch(function(Pi){In=null,Zn=!1,ni||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Pi.error)})})}}(_n,Xn)}function Lr(){for(var _n,Xn=0;Xn<St.length;Xn++)for(_n=0;_n<St[Xn].length;_n++)if(In===St[Xn][_n].ks){Yi(St[Xn][_n]);break}St=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var Xn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(Xn))}_n.sessionId?ro(_n):_n.initData!==null&&Br(_n)}function ro(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var Xn=y.getPSSHForKeySystem(In,_n?_n.initData:null);if(Xn){if(function(hr){if(!hr)return!1;try{for(var ni=Bn.getSessions(),Mr=0;Mr<ni.length;Mr++)if(ni[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||pi(Xn))return;try{_n.initData=Xn,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var Xn=_n.systemString;if(Mt)return Xn in Mt?Mt[Xn]:null}return null}function pi(_n){if(!_n)return!1;try{for(var Xn=Bn.getAllInitData(),hr=0;hr<Xn.length;hr++)if(on.initDataEquals(_n,Xn[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ni){return!1}}function yi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Ds,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Ds,sn))}function wo(_n){var Xn=_n.protData,hr=[],ni=[],Mr=Xn&&Xn.audioRobustness&&Xn.audioRobustness.length>0?Xn.audioRobustness:mn,Bi=Xn&&Xn.videoRobustness&&Xn.videoRobustness.length>0?Xn.videoRobustness:mn,Qr=_n.sessionType,ta=Xn&&Xn.distinctiveIdentifier?Xn.distinctiveIdentifier:"optional",Pi=Xn&&Xn.persistentState?Xn.persistentState:Qr==="temporary"?"optional":"required";return zt.forEach(function(li){li.type===Vn.AUDIO?hr.push(new v(li.codec,Mr)):li.type===Vn.VIDEO&&ni.push(new v(li.codec,Bi))}),new D(hr,ni,ta,Pi,[Qr])}function io(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function ea(_n){an.debug("DRM: onKeyMessage");var Xn=_n.data;kn.trigger(er.KEY_MESSAGE,{data:Xn});var hr=Xn.messageType?Xn.messageType:"license-request",ni=Xn.message,Mr=Xn.sessionToken,Bi=qr(In),Qr=on.getLicenseServerModelInstance(In,Bi,hr),ta={sessionToken:Mr,messageType:hr};if(ni&&ni.byteLength!==0){if(!Qr)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void Ci(ta);if(on.isClearKey(In)){var Pi=on.processClearKeyLicenseRequest(In,Bi,ni);if(Pi&&Pi.keyPairs&&Pi.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),Ci(ta),void Bn.updateKeySession(Mr,Pi)}(function(li,Ao,Wi){var Go=li.sessionToken,na=li.messageType?li.messageType:"license-request",pt={sessionToken:Go,messageType:na},ra=In?In.systemString:null,Ps=function(Nr,ys,Es,Wr,Sc){var Ia=null,Cl=Wr.message;if(Nr&&Nr.serverURL){var aa=Nr.serverURL;typeof aa=="string"&&aa!==""?Ia=aa:N(aa)==="object"&&aa.hasOwnProperty(ys)&&(Ia=aa[ys])}else if(Nr&&Nr.laURL&&Nr.laURL!=="")Ia=Nr.laURL;else if(!(Ia=y.getLicenseServerUrlFromMediaInfo(zt,In.schemeIdURI))&&!on.isClearKey(In)){var _s=y.getPSSHData(Es.initData);(Ia=In.getLicenseServerURLFromInitData(_s))||(Ia=Wr.laURL)}return Ia=Sc.getServerURLFromMessage(Ia,Cl,ys)}(Wi,na,Go,li,Ao);if(Ps){var pr={},Io=!1;Wi&&_c(pr,Wi.httpRequestHeaders);var cu=li.message;_c(pr,In.getRequestHeadersFromMessage(cu)),Object.keys(pr).forEach(function(Nr){Nr.toLowerCase()==="authorization"&&(Io=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(Io=Wi.withCredentials);var bl=function(Nr){if(Bn)if(Nr.status>=200&&Nr.status<=299){var ys=W.Z.parseHttpHeaders(Nr.getAllResponseHeaders?Nr.getAllResponseHeaders():null),Es=new Z(Nr.responseURL,ys,Nr.response);ui(Jn.getLicenseResponseFilters(),Es).then(function(){var Wr=Ao.getLicenseMessage(Es.data,ra,na);Wr!==null?(Ci(pt),Bn.updateKeySession(Go,Wr)):Nf(Nr,pt,ra,na,Ao)})}else Nf(Nr,pt,ra,na,Ao)},ms=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ra+' update, XHR aborted. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},Ha=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ra+' update, XHR error. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},ku=In.getLicenseRequestFromMessage(cu),Fu=Ao.getHTTPMethod(na),ia=Ao.getResponseType(ra,na),oa=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,fu=Go.getSessionId()||null,vs=new R(Ps,Fu,ia,pr,Io,na,fu,ku),Tc=isNaN(bn.get().streaming.retryAttempts[z.w.LICENSE])?3:bn.get().streaming.retryAttempts[z.w.LICENSE];ui(Jn.getLicenseRequestFilters(),vs).then(function(){Il(vs,Tc,oa,bl,ms,Ha)})}else Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(Xn,Qr,Bi)}else Ci(ta,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ci(_n,Xn){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:Xn})}function Il(_n,Xn,hr,ni,Mr,Bi){var Qr=new XMLHttpRequest;if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===$.Z.CMCD_MODE_QUERY){var ta=cn.getQueryParameter({url:_n.url,type:z.w.LICENSE});ta&&(_n.url=W.Z.addAditionalQueryParameterToUrl(_n.url,[ta]))}for(var Pi in Qr.open(_n.method,_n.url,!0),Qr.responseType=_n.responseType,Qr.withCredentials=_n.withCredentials,hr>0&&(Qr.timeout=hr),_n.headers)Qr.setRequestHeader(Pi,_n.headers[Pi]);if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===$.Z.CMCD_MODE_HEADER){var li=cn.getHeaderParameters({url:_n.url,type:z.w.LICENSE});if(li)for(var Ao in li){var Wi=li[Ao];Wi&&Qr.setRequestHeader(Ao,Wi)}}var Go=function(){Xn--;var na=isNaN(bn.get().streaming.retryIntervals[z.w.LICENSE])?1e3:bn.get().streaming.retryIntervals[z.w.LICENSE];Rn=setTimeout(function(){Il(_n,Xn,hr,ni,Mr,Bi)},na)};Qr.onload=function(){Cn=null,this.status>=200&&this.status<=299||Xn<=0?ni(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Xn),Go())},Qr.ontimeout=Qr.onerror=function(){Cn=null,Xn<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+Xn),Go())},Qr.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),Cn=Qr,Qr.send(_n.data)}function lu(){Cn&&(Cn.onloadend=Cn.onerror=Cn.onprogress=void 0,Cn.abort(),Cn=null),Rn&&(clearTimeout(Rn),Rn=null)}function _c(_n,Xn){if(Xn)for(var hr in Xn)_n[hr]=Xn[hr]}function Nf(_n,Xn,hr,ni,Mr){var Bi="NONE",Qr=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ni),Qr={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),Ci(Xn,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,Qr))}function ui(_n,Xn){return _n?_n.reduce(function(hr,ni){return hr.then(function(){return ni(Xn)})},Promise.resolve()):Promise.resolve()}function Ds(_n,Xn){if(!bn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(zt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Xn=Xn===void 0?1:Xn+1)<5))return void rn.push(setTimeout(function(){Ds(_n,Xn)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ni=y.getPSSHForKeySystem(In,hr);if(ni&&pi(ni))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,Mt,Vt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){St.push(Bi),br(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),zt.push(_n)},clearMediaInfoArray:function(){zt=[]},handleKeySystemFromManifest:function(){if(zt&&zt.length!==0){var _n=[];zt.forEach(function(Xn){var hr=on.getSupportedKeySystemsFromContentProtection(Xn.contentProtection,Mt,Vt);hr.length>0&&(_n.length===0&&(_n=hr),St.push(hr))}),_n&&_n.length>0&&br(_n,!0)}},createKeySession:Br,loadKeySession:ro,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:yi,setSessionType:function(_n){Vt=_n},setRobustnessLevel:function(_n){mn=_n},setProtectionData:function(_n){Mt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,Mt,Vt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){lu(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,ea,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,io,sn),ar(),lu(),yi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],zt=[],St=[]}},an=Er.getLogger(sn),St=[],zt=[],Vt="temporary",mn="",Cn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,ea,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,io,sn),sn}X.__dashjs_factory_name="ProtectionController";var ce=le.Z.getClassFactory(X),oe=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function he(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}var be=function(){function tn(St,zt){if(function(Mt,Vt){if(!(Mt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,tn),zt&&zt!=="persistent"&&zt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=St,this.type=zt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var St,zt=this.keyPairs.length,Mt={keys:[]};for(St=0;St<zt;St++){var Vt={kty:"oct",alg:"A128KW",kid:this.keyPairs[St].keyID,k:this.keyPairs[St].key};Mt.keys.push(Vt)}this.type&&(Mt.type=this.type);var mn=JSON.stringify(Mt),In=mn.length,Zn=new ArrayBuffer(In),Cn=new Uint8Array(Zn);for(St=0;St<In;St++)Cn[St]=mn.charCodeAt(St);return Zn}}])&&he(sn.prototype,an),tn}();function Xe(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}var Ae=new(function(){function tn(){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Xe(sn.prototype,an),tn}()),Ze="e2719d58-a985-b3c9-781a-b030af78d30e",tt=Ae.CLEARKEY_KEYSTEM_STRING,ut="urn:uuid:"+Ze;function $e(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Ze,schemeIdURI:ut,systemString:tt,getInitData:function(an,St){try{var zt=y.parseInitDataFromContentProtection(an,sn);if(!zt&&St){var Mt={kids:[function(Vt){try{var mn=Vt.replace(/-/g,"");return(mn=btoa(mn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(St["cenc:default_KID"])]};zt=new TextEncoder().encode(JSON.stringify(Mt))}return zt}catch(Vt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,St){var zt=null;if(an){for(var Mt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(St))),Vt=[],mn=0;mn<Mt.kids.length;mn++){var In=Mt.kids[mn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");Vt.push(new oe(In,Zn))}zt=new be(Vt)}return zt}}}$e.__dashjs_factory_name="KeySystemClearKey";var lt=dashjs.FactoryMaker.getSingletonFactory($e),wt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Oe=Ae.CLEARKEY_KEYSTEM_STRING,Qe="urn:uuid:"+wt;function ct(tn){var sn,an=tn.BASE64,St=tn.debug.getLogger(sn);return{uuid:wt,schemeIdURI:Qe,systemString:Oe,getInitData:function(zt){return y.parseInitDataFromContentProtection(zt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(zt){return new Uint8Array(zt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(zt,Mt){var Vt=null;if(zt){for(var mn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Mt))),In=[],Zn=0;Zn<mn.kids.length;Zn++){var Cn=mn.kids[Zn],Rn=zt.clearkeys&&zt.clearkeys.hasOwnProperty(Cn)?zt.clearkeys[Cn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+Cn+") is not known!");In.push(new oe(Cn,Rn))}Vt=new be(In),St.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Vt}}}ct.__dashjs_factory_name="KeySystemW3CClearKey";var Xt=dashjs.FactoryMaker.getSingletonFactory(ct),Kt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",_t=Ae.WIDEVINE_KEYSTEM_STRING,At="urn:uuid:"+Kt;function Ce(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Kt,schemeIdURI:At,systemString:_t,getInitData:function(an){return y.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ce.__dashjs_factory_name="KeySystemWidevine";var re=dashjs.FactoryMaker.getSingletonFactory(Ce),Fe="9a04f079-9840-4286-ab92-e65be0885f95",O=Ae.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+Fe;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,St=tn.settings;function zt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Fe,schemeIdURI:M,systemString:O,getInitData:function(Mt){var Vt,mn,In,Zn,Cn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(zt(),!Mt)return null;if("pssh"in Mt)return y.parseInitDataFromContentProtection(Mt,an);if("pro"in Mt)kn=an.decodeArray(Mt.pro.__text);else{if(!("prheader"in Mt))return null;kn=an.decodeArray(Mt.prheader.__text)}return Vt=kn.length,mn=4+Rn.length+on.length+4+Vt,In=new ArrayBuffer(mn),Zn=new Uint8Array(In),(Cn=new DataView(In)).setUint32(Bn,mn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,Cn.setUint32(Bn,Vt),Bn+=4,Zn.set(kn,Bn),Bn+=Vt,Zn.buffer},getRequestHeadersFromMessage:function(Mt){var Vt,mn,In={},Zn=new DOMParser;if(St&&St.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var Cn=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);Vt=String.fromCharCode.apply(null,Cn);for(var Rn=(mn=Zn.parseFromString(Vt,"application/xml")).getElementsByTagName("name"),on=mn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(Mt){var Vt=null,mn=new DOMParser;if(St&&St.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return Mt;var In=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);zt();var Zn=String.fromCharCode.apply(null,In),Cn=mn.parseFromString(Zn,"application/xml");if(!Cn.getElementsByTagName("PlayReadyKeyMessage")[0])return Mt;var Rn=Cn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(Vt=an.decode(Rn)),Vt},getLicenseServerURLFromInitData:function(Mt){if(Mt)for(var Vt=new DataView(Mt),mn=Vt.getUint16(4,!0),In=6,Zn=new DOMParser,Cn=0;Cn<mn;Cn++){var Rn=Vt.getUint16(In,!0);In+=2;var on=Vt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=Mt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(Mt){var Vt,mn,In,Zn;if(zt(),!Mt)return null;for(Vt=[],Zn=0;Zn<Mt.length;++Zn)Vt.push(Mt.charCodeAt(Zn)),Vt.push(0);for(Vt=String.fromCharCode.apply(null,Vt),Vt=an.encode(Vt),mn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Vt),In=[],Zn=0;Zn<mn.length;++Zn)In.push(mn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(Mt){if(Mt!=="utf-8"&&Mt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=Mt}}}q.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(q);function _e(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Ae.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(St){return sn.decodeArray(St.license)},getErrorResponse:function(St){return St}},an[Ae.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(St){return St},getErrorResponse:function(St){return String.fromCharCode.apply(null,new Uint8Array(St))}},{getServerURLFromMessage:function(St){return St},getHTTPMethod:function(){return"POST"},getResponseType:function(St){return an[St].responseType},getLicenseMessage:function(St,zt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[zt].getLicenseMessage(St)},getErrorResponse:function(St,zt){return an[zt].getErrorResponse(St)}}}_e.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(_e);function He(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(zt){var Mt=String.fromCharCode.apply(null,new Uint8Array(zt));return decodeURIComponent(escape(Mt))}function an(zt){if(window.DOMParser){var Mt=sn(zt),Vt=new window.DOMParser().parseFromString(Mt,"text/xml"),mn=Vt?Vt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=mn?mn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return zt}function St(zt){var Mt="",Vt="",mn="",In=-1,Zn=-1;if(window.DOMParser){var Cn=sn(zt),Rn=new window.DOMParser().parseFromString(Cn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return Cn;Mt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(Vt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(mn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?mn.lastIndexOf("[")+1:-1,Zn=mn?mn.indexOf("]"):-1,mn=mn?mn.substring(In,Zn):"")}var Vn="code: ".concat(Vt,", name: ").concat(Mt);return mn&&(Vn+=", message: ".concat(mn)),Vn}return{getServerURLFromMessage:function(zt){return zt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(zt){return an.call(this,zt)},getErrorResponse:function(zt){return St.call(this,zt)}}}He.__dashjs_factory_name="PlayReady";var Tt=le.Z.getSingletonFactory(He);function ot(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}ot.__dashjs_factory_name="Widevine";var it=dashjs.FactoryMaker.getSingletonFactory(ot);function et(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var St=tn.keys[an],zt=St.kid.replace(/=/g,""),Mt=St.k.replace(/=/g,"");sn.push(new oe(zt,Mt))}return new be(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}et.__dashjs_factory_name="ClearKey";var ft=dashjs.FactoryMaker.getSingletonFactory(et);function vt(){var tn,sn,an,St,zt,Mt,Vt,mn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function Cn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;St=[],on=K(In).getInstance({BASE64:zt,settings:Mt}),St.push(on),on=re(In).getInstance({BASE64:zt}),St.push(on),on=lt(In).getInstance({BASE64:zt}),St.push(on),Vt=on,on=Xt(In).getInstance({BASE64:zt,debug:sn}),St.push(on),mn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<St.length;er++){var Er=St[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===Vt||on===mn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return St},setKeySystems:function(on){St=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<St.length;Bn++)if(St[Bn].systemString===on)return St[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Vn,rn=[];if(on){var cn=y.findCencContentProtection(on);for(Ur=0;Ur<St.length;++Ur){var bn=Zn((Er=St[Ur]).systemString,Bn);for(Vn=0;Vn<on.length;++Vn)if((er=on[Vn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,cn);rn.push({ks:St[Ur],keyId:er.keyId,initData:Jn,protData:bn,cdmData:Er.getCDMData(bn?bn.cdmData:null),sessionId:Cn(bn,er),sessionType:Rn(bn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=y.parsePSSHList(on),Vn=0;Vn<St.length;++Vn){var rn=Zn((er=St[Vn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:Cn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=de(In).getInstance({BASE64:zt}):on.systemString===Ae.WIDEVINE_KEYSTEM_STRING?er=it(In).getInstance():on.systemString===Ae.PLAYREADY_KEYSTEM_STRING?er=Tt(In).getInstance():on.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(er=ft(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(zt=on.BASE64),on.settings&&(Mt=on.settings))}},tn}vt.__dashjs_factory_name="ProtectionKeyController";var Et=dashjs.FactoryMaker.getSingletonFactory(vt);function Ct(tn){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Ct(tn)}function hn(tn,sn){return hn=Object.setPrototypeOf||function(an,St){return an.__proto__=St,an},hn(tn,sn)}function Qt(tn,sn){return!sn||Ct(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Ot=new(function(tn){(function(Mt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Vt&&hn(Mt,Vt)})(zt,tn);var sn,an,St=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,Vt=nn(sn);if(an){var mn=nn(this).constructor;Mt=Reflect.construct(Vt,arguments,mn)}else Mt=Vt.apply(this,arguments);return Qt(this,Mt)});function zt(){var Mt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Mt=St.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Mt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Mt.KEY_ADDED="public_keyAdded",Mt.KEY_ERROR="public_keyError",Mt.KEY_MESSAGE="public_keyMessage",Mt.KEY_SESSION_CLOSED="public_keySessionClosed",Mt.KEY_SESSION_CREATED="public_keySessionCreated",Mt.KEY_SESSION_REMOVED="public_keySessionRemoved",Mt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Mt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Mt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Mt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Mt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Mt.NEED_KEY="needkey",Mt.PROTECTION_CREATED="public_protectioncreated",Mt.PROTECTION_DESTROYED="public_protectiondestroyed",Mt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Mt.TEARDOWN_COMPLETE="protectionTeardownComplete",Mt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Mt.KEY_SESSION_UPDATED="public_keySessionUpdated",Mt}return zt}(w(8342).Z)),Un=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,St,zt){(function(Mt,Vt){if(!(Mt instanceof Vt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=St,this.messageType=zt||"license-request"},Pr=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ti(tn){tn=tn||{};var sn,an,St,zt,Mt,Vt,mn,In,Zn=this.context,Cn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,cn,bn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var br=rn[cn].protData&&rn[cn].protData.systemStringPriority?rn[cn].protData.systemStringPriority:null,Lr=rn[cn].configs,Yi=rn[cn].ks,ro=Yi.systemString;(function(Br,qr){return new Promise(function(pi,yi){kn(Br,qr,0,pi,yi)})})(br||(dr[ro]?dr[ro]:[ro]),Lr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,pi=new Pr(Yi,qr);pi.mksa=Br,Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:pi}),bn({data:pi})}).catch(function(Br){if(cn+1<rn.length)Bn(rn,cn+1,bn,Jn);else{var qr="Key system access denied! ";Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,cn,bn,Jn,ar){var br=rn[bn];an.debug("Requesting key system access for system string ".concat(br)),navigator.requestMediaKeySystemAccess(br,cn).then(function(Lr){Lr.selectedSystemString=br,Jn(Lr)}).catch(function(Lr){bn+1<rn.length?kn(rn,cn,bn+1,Jn,ar):ar(Lr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var cn=rn.session;return cn.removeEventListener("keystatuseschange",rn),cn.removeEventListener("message",rn),cn.close()}function Er(rn){for(var cn=0;cn<Vt.length;cn++)if(Vt[cn]===rn){Vt.splice(cn,1);break}}function Ur(rn){var cn,bn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?cn=rn[0]:bn=rn[0]),rn[1]&&(typeof rn[1]=="string"?cn=rn[1]:bn=rn[1])),{status:cn,keyId:bn}}function Vn(rn,cn){var bn={session:rn,keyId:cn.keyId,initData:cn.initData,sessionId:cn.sessionId,sessionType:cn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":Cn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var br=Ur(arguments);br.status==="expired"?Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,br)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;Cn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",bn),rn.addEventListener("message",bn),rn.closed.then(function(){Er(bn),an.debug("DRM: Session closed.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:bn.getSessionId()})}),Vt.push(bn),bn}return sn={getAllInitData:function(){for(var rn=[],cn=0;cn<Vt.length;cn++)Vt[cn].initData&&rn.push(Vt[cn].initData);return rn},getSessions:function(){return Vt},requestKeySystemAccess:function(rn){return new Promise(function(cn,bn){Bn(rn,0,cn,bn)})},selectKeySystem:function(rn){return new Promise(function(cn,bn){rn.mksa.createMediaKeys().then(function(Jn){return St=rn.keySystem,Mt=Jn,zt?zt.setMediaKeys(Mt):Promise.resolve()}).then(function(){cn(St)}).catch(function(){bn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){zt!==rn&&(zt&&(zt.removeEventListener("encrypted",mn),zt.setMediaKeys&&zt.setMediaKeys(null)),(zt=rn)&&(zt.addEventListener("encrypted",mn),zt.setMediaKeys&&Mt&&zt.setMediaKeys(Mt)))},setServerCertificate:function(rn){if(!St||!Mt)throw new Error("Can not set server certificate until you have selected a key system");Mt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(cn){Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+cn.name)})})},createKeySession:function(rn){if(!St||!Mt)throw new Error("Can not create sessions until you have selected a key system");var cn=Mt.createSession(rn.sessionType),bn=Vn(cn,rn),Jn=St.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Ae.INITIALIZATION_DATA_TYPE_KEYIDS:Ae.INITIALIZATION_DATA_TYPE_CENC;cn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:bn})}).catch(function(ar){Er(bn),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,cn){var bn=rn.session;In.isClearKey(St)&&(cn=cn.toJWK()),bn.update(cn).then(function(){Cn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){Cn.trigger(Rn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!St||!Mt)throw new Error("Can not load sessions until you have selected a key system");for(var cn=rn.sessionId,bn=0;bn<Vt.length;bn++)if(cn===Vt[bn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=Mt.createSession(rn.sessionType),ar=Vn(Jn,rn);Jn.load(cn).then(function(br){br?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+cn+")")}))}).catch(function(br){Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+cn+")! "+br.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(cn){Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+cn.name})})},closeKeySession:function(rn){er(rn).catch(function(cn){Er(rn),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+cn.name})})},stop:function(){for(var rn,cn=0;cn<Vt.length;cn++)(rn=Vt[cn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,cn=Vt.length;cn!==0?function(){for(var bn=function(ar){Er(ar),Vt.length===0&&(zt?(zt.removeEventListener("encrypted",mn),zt.setMediaKeys(null).then(function(){Cn.trigger(Rn.TEARDOWN_COMPLETE)})):Cn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<cn;Jn++)(function(ar){er(rn),bn(ar)})(rn=Vt[Jn])}():Cn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),St=null,zt=null,Mt=null,Vt=[],In=Et(Zn).getInstance(),mn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var cn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;Cn.trigger(Rn.NEED_KEY,{key:new Un(cn,rn.initDataType)})}}},sn}dr[Ae.PLAYREADY_KEYSTEM_STRING]=[Ae.PLAYREADY_KEYSTEM_STRING,Ae.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Ae.WIDEVINE_KEYSTEM_STRING]=[Ae.WIDEVINE_KEYSTEM_STRING],dr[Ae.CLEARKEY_KEYSTEM_STRING]=[Ae.CLEARKEY_KEYSTEM_STRING],ti.__dashjs_factory_name="ProtectionModel_21Jan2015";var eo=dashjs.FactoryMaker.getClassFactory(ti);function Or(tn){tn=tn||{};var sn,an,St,zt,Mt,Vt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Vn=0;Vn<mn.length;Vn++)Er(mn[Vn]);St&&St.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Vn){var rn=Vn.session;rn.removeEventListener(kn.error,Vn),rn.removeEventListener(kn.message,Vn),rn.removeEventListener(kn.ready,Vn),rn.removeEventListener(kn.close,Vn);for(var cn=0;cn<mn.length;cn++)if(mn[cn]===Vn){mn.splice(cn,1);break}rn[kn.release]()}function Ur(){var Vn=null,rn=function(){St.removeEventListener("loadedmetadata",Vn),St[kn.setMediaKeys](Mt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};St.readyState>=1?rn():(Vn=rn.bind(this),St.addEventListener("loadedmetadata",Vn))}return sn={getAllInitData:function(){for(var Vn=[],rn=0;rn<mn.length;rn++)Vn.push(mn[rn].initData);return Vn},getSessions:function(){return mn},requestKeySystemAccess:function(Vn){return new Promise(function(rn,cn){for(var bn=!1,Jn=0;Jn<Vn.length;Jn++)for(var ar=Vn[Jn].ks.systemString,br=Vn[Jn].configs,Lr=null,Yi=null,ro=0;ro<br.length;ro++){var Br=br[ro].audioCapabilities,qr=br[ro].videoCapabilities;if(Br&&Br.length!==0){Lr=[];for(var pi=0;pi<Br.length;pi++)window[kn.MediaKeys].isTypeSupported(ar,Br[pi].contentType)&&Lr.push(Br[pi])}if(qr&&qr.length!==0){Yi=[];for(var yi=0;yi<qr.length;yi++)window[kn.MediaKeys].isTypeSupported(ar,qr[yi].contentType)&&Yi.push(qr[yi])}if(!(!Lr&&!Yi||Lr&&Lr.length===0||Yi&&Yi.length===0)){bn=!0;var wo=new D(Lr,Yi),io=Zn.getKeySystemBySystemString(ar),ea=new Pr(io,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ea}),rn({data:ea});break}}if(!bn){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),cn({error:Ci})}})},selectKeySystem:function(Vn){return new Promise(function(rn,cn){try{Mt=Vn.mediaKeys=new window[kn.MediaKeys](Vn.keySystem.systemString),zt=Vn.keySystem,Vt=Vn,St&&Ur(),rn(zt)}catch(bn){cn({error:"Error selecting keys system ("+zt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Vn){St!==Vn&&(St&&St.removeEventListener(kn.needkey,In),(St=Vn)&&(St.addEventListener(kn.needkey,In),Mt&&Ur()))},createKeySession:function(Vn){if(!zt||!Mt||!Vt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(Vt.ksConfiguration.videoCapabilities&&Vt.ksConfiguration.videoCapabilities.length>0&&(rn=Vt.ksConfiguration.videoCapabilities[0]),rn===null&&Vt.ksConfiguration.audioCapabilities&&Vt.ksConfiguration.audioCapabilities.length>0&&(rn=Vt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var cn=rn.contentType,bn=Mt.createSession(cn,new Uint8Array(Vn.initData),Vn.cdmData?new Uint8Array(Vn.cdmData):null),Jn=function(ar,br){return{session:ar,keyId:br.keyId,initData:br.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Lr){switch(Lr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(Lr.message)?Lr.message.buffer:Lr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,Lr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(bn,Vn);bn.addEventListener(kn.error,Jn),bn.addEventListener(kn.message,Jn),bn.addEventListener(kn.ready,Jn),bn.addEventListener(kn.close,Jn),mn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Vn,rn){var cn=Vn.session;Zn.isClearKey(zt)?cn.update(new Uint8Array(rn.toJWK())):cn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),St=null,zt=null,Mt=null,Vt=null,mn=[],Zn=Et(Cn).getInstance(),In={handleEvent:function(Vn){if(Vn.type===kn.needkey&&Vn.initData){var rn=ArrayBuffer.isView(Vn.initData)?Vn.initData.buffer:Vn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Or.__dashjs_factory_name="ProtectionModel_3Feb2014";var to=dashjs.FactoryMaker.getClassFactory(Or);function Ti(tn){tn=tn||{};var sn,an,St,zt,Mt,Vt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){St&&rn();for(var cn=0;cn<mn.length;cn++)Ur(mn[cn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(cn){try{St[kn.cancelKeyRequest](zt.systemString,cn.sessionId)}catch(bn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.sessionId+") "+bn.message})}}function Vn(cn,bn){if(bn&&cn){for(var Jn=cn.length,ar=0;ar<Jn;ar++)if(cn[ar].sessionId==bn)return cn[ar];return null}return null}function rn(){St.removeEventListener(kn.keyerror,Zn),St.removeEventListener(kn.needkey,Zn),St.removeEventListener(kn.keymessage,Zn),St.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var cn=[],bn=0;bn<Vt.length;bn++)cn.push(Vt[bn].initData);for(var Jn=0;Jn<mn.length;Jn++)cn.push(mn[Jn].initData);return cn},getSessions:function(){return mn.concat(Vt)},requestKeySystemAccess:function(cn){return new Promise(function(bn,Jn){var ar=St;ar||(ar=document.createElement("video"));for(var br=!1,Lr=0;Lr<cn.length;Lr++)for(var Yi=cn[Lr].ks.systemString,ro=cn[Lr].configs,Br=null,qr=0;qr<ro.length;qr++){var pi=ro[qr].videoCapabilities;if(pi&&pi.length!==0){Br=[];for(var yi=0;yi<pi.length;yi++)ar.canPlayType(pi[yi].contentType,Yi)!==""&&Br.push(pi[yi])}if(Br&&(!Br||Br.length!==0)){br=!0;var wo=new D(null,Br),io=Mt.getKeySystemBySystemString(Yi),ea=new Pr(io,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ea}),bn({data:ea});break}}if(!br){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),Jn({error:Ci})}})},selectKeySystem:function(cn){return zt=cn.keySystem,Promise.resolve(zt)},setMediaElement:function(cn){if(St!==cn){if(St){rn();for(var bn=0;bn<mn.length;bn++)Ur(mn[bn]);mn=[]}(St=cn)&&(St.addEventListener(kn.keyerror,Zn),St.addEventListener(kn.needkey,Zn),St.addEventListener(kn.keymessage,Zn),St.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(cn){if(!zt)throw new Error("Can not create sessions until you have selected a key system");if(In||mn.length===0){var bn={sessionId:null,keyId:cn.keyId,initData:cn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Vt.push(bn),St[kn.generateKeyRequest](zt.systemString,new Uint8Array(cn.initData)),bn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(cn,bn){var Jn=cn.sessionId;if(Mt.isClearKey(zt))for(var ar=0;ar<bn.keyPairs.length;ar++)St[kn.addKey](zt.systemString,bn.keyPairs[ar].key,bn.keyPairs[ar].keyID,Jn);else St[kn.addKey](zt.systemString,new Uint8Array(bn),new Uint8Array(cn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),St=null,zt=null,Vt=[],mn=[],Mt=Et(Cn).getInstance(),Zn={handleEvent:function(cn){var bn=null;switch(cn.type){case kn.needkey:var Jn=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((bn=Vn(mn,cn.sessionId))||(bn=Vn(Vt,cn.sessionId)),bn){var ar=_.MEDIA_KEYERR_CODE,br="";switch(cn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,br+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,br+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,br+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,br+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,br+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,br+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}br+="  System Code = "+cn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new I.Z(ar,br,bn)})}else an.error("No session token found for key error");break;case kn.keyadded:(bn=Vn(mn,cn.sessionId))||(bn=Vn(Vt,cn.sessionId)),bn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:bn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=cn.sessionId!==null&&cn.sessionId!==void 0)?!(bn=Vn(mn,cn.sessionId))&&Vt.length>0&&(bn=Vt.shift(),mn.push(bn),bn.sessionId=cn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:bn})):Vt.length>0&&(bn=Vt.shift(),mn.push(bn),Vt.length!==0&&er.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),bn){var Lr=ArrayBuffer.isView(cn.message)?cn.message.buffer:cn.message;bn.keyMessage=Lr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(bn,Lr,cn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}Ti.__dashjs_factory_name="ProtectionModel_01b";var Di=dashjs.FactoryMaker.getClassFactory(Ti),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],no=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Si(){var tn,sn=this.context;function an(St,zt){for(var Mt=0;Mt<zt.length;Mt++){var Vt=zt[Mt];if(typeof St[Vt[Object.keys(Vt)[0]]]=="function")return Vt}return null}return tn={createProtectionSystem:function(St){var zt=null,Mt=Et(sn).getInstance();Mt.setConfig({debug:St.debug,BASE64:St.BASE64,settings:St.settings}),Mt.initialize();var Vt=function(mn){var In=mn.debug,Zn=In.getLogger(tn),Cn=mn.eventBus,Rn=mn.errHandler,on=mn.videoModel?mn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,no)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),to(sn).create({debug:In,eventBus:Cn,events:mn.events,api:an(on,no)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Di(sn).create({debug:In,eventBus:Cn,errHandler:Rn,events:mn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),eo(sn).create({debug:In,eventBus:Cn,events:mn.events}))}(St);return!zt&&Vt&&(zt=ce(sn).create({protectionModel:Vt,protectionKeyController:Mt,eventBus:St.eventBus,debug:St.debug,events:St.events,BASE64:St.BASE64,constants:St.constants,cmcdModel:St.cmcdModel,customParametersModel:St.customParametersModel,settings:St.settings}),St.capabilities.setEncryptedMediaSupported(!0)),zt}}}Si.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Si);Qn.events=Ot,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Si.__dashjs_factory_name,Qn);var Lu=Qn},2068:function(b,g,w){var F=w(5448),C={DEFAULT:.5,STRONG:1,WEAK:0};function y(D,m,T){var U,x;return U=D===void 0?-1:D,x=function(_){var I=C.DEFAULT;return _!==C.DEFAULT&&_!==C.STRONG&&_!==C.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:x}}y.__dashjs_factory_name="SwitchRequest";var v=F.Z.getClassFactory(y);v.NO_CHANGE=-1,v.PRIORITY=C,F.Z.updateClassFactory(y.__dashjs_factory_name,v),g.Z=v},1767:function(b,g,w){var F=w(5628),C=w(6535),y=w(7423),v=w(895),D=w(6070),m=w(3112),T=w(1914),U=w(5435),x=w(5448),_=w(2068),I=w(3393),R="qualitySwitchRules",Z="abandonFragmentRules";function z($){$=$||{};var le,N,X=this.context,ce=$.mediaPlayerModel,oe=$.customParametersModel,he=$.dashMetrics,be=$.settings;function Xe(Ze){return Ze.filter(function(tt){return tt.quality>_.Z.NO_CHANGE})}function Ae(Ze){var tt,ut,$e,lt,wt,Oe={},Qe=null;if(Ze.length!==0){for(Oe[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},tt=0,ut=Ze.length;tt<ut;tt+=1)($e=Ze[tt]).quality!==_.Z.NO_CHANGE&&(Oe[$e.priority].quality===_.Z.NO_CHANGE||Oe[$e.priority].quality>$e.quality)&&(Oe[$e.priority].quality=$e.quality,Oe[$e.priority].reason=$e.reason||null);return Oe[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.WEAK]),Oe[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.DEFAULT]),Oe[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.STRONG]),Qe&&(lt=Qe.quality,wt=Qe.reason),(0,_.Z)(X).create(lt,wt)}}return{initialize:function(){le=[],N=[],be.get().streaming.abr.useDefaultABRRules&&(be.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?le.push((0,T.Z)(X).create({dashMetrics:he,settings:be})):be.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?le.push((0,U.Z)(X).create({dashMetrics:he})):(le.push((0,m.Z)(X).create({dashMetrics:he,mediaPlayerModel:ce,settings:be})),le.push((0,F.Z)(X).create({dashMetrics:he})),be.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&le.push((0,C.Z)(X).create({dashMetrics:he,settings:be})),be.get().streaming.abr.additionalAbrRules.switchHistoryRule&&le.push((0,D.Z)(X).create()),be.get().streaming.abr.additionalAbrRules.droppedFramesRule&&le.push((0,v.Z)(X).create()),be.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&N.push((0,y.Z)(X).create({dashMetrics:he,mediaPlayerModel:ce,settings:be})))),oe.getAbrCustomRules().forEach(function(Ze){Ze.type===R&&le.push(Ze.rule(X).create()),Ze.type===Z&&N.push(Ze.rule(X).create())})},reset:function(){[le,N].forEach(function(Ze){Ze&&Ze.length&&Ze.forEach(function(tt){return tt.reset&&tt.reset()})}),le=[],N=[]},getMaxQuality:function(Ze){return Ae(Xe(le.map(function(tt){return tt.getMaxIndex(Ze)})))||(0,_.Z)(X).create()},getMinSwitchRequest:Ae,shouldAbandonFragment:function(Ze,tt){var ut=Ae(Xe(N.map(function($e){return $e.shouldAbandon(Ze,tt)})));return ut&&(ut.reason.forceAbandon=!0),ut||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return le}}}z.__dashjs_factory_name="ABRRulesCollection";var W=x.Z.getClassFactory(z);W.QUALITY_SWITCH_RULES=R,W.ABANDON_FRAGMENT_RULES=Z,x.Z.updateSingletonFactory(z.__dashjs_factory_name,W),g.Z=W},7423:function(b,g,w){var F=w(2068),C=w(5448),y=w(6398);function v(D){D=D||{};var m,T,U,x,_,I=this.context,R=D.mediaPlayerModel,Z=D.dashMetrics,z=D.settings;function W(){U={},x={},_=[]}return m={shouldAbandon:function($){var le=(0,F.Z)(I).create(F.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(!($&&$.hasOwnProperty("getMediaInfo")&&$.hasOwnProperty("getMediaType")&&$.hasOwnProperty("getCurrentRequest")&&$.hasOwnProperty("getRepresentationInfo")&&$.hasOwnProperty("getAbrController")))return le;var N,X,ce=$.getMediaInfo(),oe=$.getMediaType(),he=$.getStreamInfo(),be=he?he.id:null,Xe=$.getCurrentRequest();if(!isNaN(Xe.index)){N=oe,X=Xe.index,U[N]=U[N]||{},U[N][X]=U[N][X]||{};var Ae=R.getStableBufferTime();if(Z.getCurrentBufferLevel(oe)>Ae)return le;var Ze=U[oe][Xe.index];if(Ze===null||Xe.firstByteDate===null||x.hasOwnProperty(Ze.id))return le;if(Ze.firstByteTime===void 0&&(_[oe]=[],Ze.firstByteTime=Xe.firstByteDate.getTime(),Ze.segmentDuration=Xe.duration,Ze.bytesTotal=Xe.bytesTotal,Ze.id=Xe.index),Ze.bytesLoaded=Xe.bytesLoaded,Ze.elapsedTime=new Date().getTime()-Ze.firstByteTime,Ze.bytesLoaded>0&&Ze.elapsedTime>0&&function(ct,Xt){_[ct]=_[ct]||[],_[ct].push(Xt)}(oe,Math.round(8*Ze.bytesLoaded/Ze.elapsedTime)),_[oe].length>=z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ze.elapsedTime>z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ze.bytesLoaded<Ze.bytesTotal){var tt=_[oe].reduce(function(ct,Xt){return ct+Xt},0);if(Ze.measuredBandwidthInKbps=Math.round(tt/_[oe].length),Ze.estimatedTimeOfDownload=+(8*Ze.bytesTotal/Ze.measuredBandwidthInKbps/1e3).toFixed(2),Ze.estimatedTimeOfDownload<Ze.segmentDuration*z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||$.getRepresentationInfo().quality===0)return le;if(!x.hasOwnProperty(Ze.id)){var ut=$.getAbrController(),$e=Ze.bytesTotal-Ze.bytesLoaded,lt=ut.getBitrateList(ce),wt=ut.getQualityForBitrate(ce,Ze.measuredBandwidthInKbps*z.get().streaming.abr.bandwidthSafetyFactor,be),Oe=ut.getMinAllowedIndexFor(oe,be),Qe=Oe!==void 0?Math.max(Oe,wt):wt;$e>Ze.bytesTotal*lt[Qe].bitrate/lt[ut.getQualityFor(oe,be)].bitrate&&(le.quality=Qe,le.reason.throughput=Ze.measuredBandwidthInKbps,le.reason.fragmentID=Ze.id,le.reason.rule=this.getClassName(),x[Ze.id]=Ze,T.debug("["+oe+"] frag id",Ze.id," is asking to abandon and switch to quality to ",Qe," measured bandwidth was",Ze.measuredBandwidthInKbps),delete U[oe][Ze.id])}}else Ze.bytesLoaded===Ze.bytesTotal&&delete U[oe][Ze.id]}return le},reset:W},T=(0,y.Z)(I).getInstance().getLogger(m),W(),m}v.__dashjs_factory_name="AbandonRequestsRule",g.Z=C.Z.getClassFactory(v)},3112:function(b,g,w){var F=w(3860),C=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(8825),x=w(3393),_=10;function I(R){R=R||{};var Z,z,W,$=this.context,le=R.dashMetrics,N=R.mediaPlayerModel,X=(0,D.Z)($).getInstance();function ce(Qe,ct,Xt){var Kt=Xt.reduce(function(Ce,re,Fe){return re>Xt[Ce]?Fe:Ce},0);if(Kt===0)return null;var _t=Math.max(Qe,_+2*ct.length),At=(Xt[Kt]-1)/(_t/_-1);return{gp:At,Vp:_/At}}function oe(Qe){Qe.placeholderBuffer=0,Qe.mostAdvancedSegmentStart=NaN,Qe.lastSegmentWasReplacement=!1,Qe.lastSegmentStart=NaN,Qe.lastSegmentDurationS=NaN,Qe.lastSegmentRequestTimeMs=NaN,Qe.lastSegmentFinishTimeMs=NaN}function he(Qe,ct){var Xt=N.getStableBufferTime();if(Qe.stableBufferTime!==Xt){var Kt=ce(Xt,Qe.bitrates,Qe.utilities);if(Kt.Vp!==Qe.Vp||Kt.gp!==Qe.gp){var _t=le.getCurrentBufferLevel(ct),At=_t+Qe.placeholderBuffer;At-=_,At*=Kt.Vp/Qe.Vp,At+=_,Qe.stableBufferTime=Xt,Qe.Vp=Kt.Vp,Qe.gp=Kt.gp,Qe.placeholderBuffer=Math.max(0,At-_t)}}}function be(Qe,ct){return Qe.Vp*(Qe.utilities[ct]+Qe.gp)}function Xe(Qe,ct){for(var Xt=Qe.bitrates[ct],Kt=Qe.utilities[ct],_t=0,At=ct-1;At>=0;--At)if(Qe.utilities[At]<Qe.utilities[ct]){var Ce=Qe.bitrates[At],re=Qe.utilities[At],Fe=Qe.Vp*(Qe.gp+(Xt*re-Ce*Kt)/(Xt-Ce));_t=Math.max(_t,Fe)}return _t}function Ae(Qe){var ct=Qe.mediaType===x.Z.AUDIO?[x.Z.AUDIO]:W;for(var Xt in ct)W.hasOwnProperty(Xt)&&W[Xt].state===2&&(W[Xt].placeholderBuffer=0)}function Ze(){for(var Qe in W)if(W.hasOwnProperty(Qe)){var ct=W[Qe];ct.state!==0&&(ct.state=1,oe(ct))}}function tt(Qe){if(Qe&&Qe.chunk&&Qe.chunk.mediaInfo){var ct=W[Qe.chunk.mediaInfo.type];if(ct&&ct.state!==0){var Xt=Qe.chunk.start;isNaN(ct.mostAdvancedSegmentStart)||Xt>ct.mostAdvancedSegmentStart?(ct.mostAdvancedSegmentStart=Xt,ct.lastSegmentWasReplacement=!1):ct.lastSegmentWasReplacement=!0,ct.lastSegmentStart=Xt,ct.lastSegmentDurationS=Qe.chunk.duration,ct.lastQuality=Qe.chunk.quality,$e(ct,Qe.chunk.mediaInfo.type)}}}function ut(Qe){if(Qe&&Qe.metric===F.Z.HTTP_REQUEST&&Qe.value&&Qe.value.type===v.w.MEDIA_SEGMENT_TYPE&&Qe.value.trace&&Qe.value.trace.length){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.lastSegmentRequestTimeMs=Qe.value.trequest.getTime(),ct.lastSegmentFinishTimeMs=Qe.value._tfinish.getTime(),$e(ct,Qe.mediaType))}}function $e(Qe,ct){if(!isNaN(Qe.lastSegmentStart)&&!isNaN(Qe.lastSegmentRequestTimeMs)&&!isNaN(Qe.placeholderBuffer)){if(Qe.placeholderBuffer*=.99,!isNaN(Qe.lastSegmentFinishTimeMs)){var Xt=le.getCurrentBufferLevel(ct)+.001*(Qe.lastSegmentFinishTimeMs-Qe.lastSegmentRequestTimeMs),Kt=be(Qe,Qe.lastQuality),_t=Math.max(0,Kt-Xt);Qe.placeholderBuffer=Math.min(_t,Qe.placeholderBuffer)}Qe.lastSegmentWasReplacement&&!isNaN(Qe.lastSegmentDurationS)&&(Qe.placeholderBuffer+=Qe.lastSegmentDurationS),Qe.lastSegmentStart=NaN,Qe.lastSegmentRequestTimeMs=NaN}}function lt(Qe){if(Qe){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.abrQuality=Qe.newQuality)}}function wt(Qe){if(Qe){var ct=W[Qe.mediaType];if(ct&&ct.state!==0){var Xt,Kt=le.getCurrentBufferLevel(Qe.mediaType);Xt=ct.abrQuality>0?Xe(ct,ct.abrQuality):_;var _t=Math.max(0,Xt-Kt);ct.placeholderBuffer=Math.min(ct.placeholderBuffer,_t)}}}function Oe(){W={}}return Z={getMaxIndex:function(Qe){var ct=(0,C.Z)($).create();if(!(Qe&&Qe.hasOwnProperty("getMediaInfo")&&Qe.hasOwnProperty("getMediaType")&&Qe.hasOwnProperty("getScheduleController")&&Qe.hasOwnProperty("getStreamInfo")&&Qe.hasOwnProperty("getAbrController")&&Qe.hasOwnProperty("useBufferOccupancyABR")))return ct;var Xt=Qe.getMediaInfo(),Kt=Qe.getMediaType(),_t=Qe.getScheduleController(),At=Qe.getStreamInfo(),Ce=Qe.getAbrController(),re=Ce.getThroughputHistory(),Fe=At?At.id:null,O=At&&At.manifestInfo&&At.manifestInfo.isDynamic,M=Qe.useBufferOccupancyABR();if(ct.reason=ct.reason||{},!M)return ct;_t.setTimeToLoadDelay(0);var q=function(et){var ft=et.getMediaType(),vt=W[ft];return vt?vt.state!==0&&he(vt,ft):(vt=function(Et){var Ct={},hn=Et.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),Qt=function(Un){return Un.map(function(gr){return Math.log(gr)})}(hn);Qt=Qt.map(function(Un){return Un-Qt[0]+1});var nn=N.getStableBufferTime(),Ot=ce(nn,hn,Qt);return Ot?(Ct.state=1,Ct.bitrates=hn,Ct.utilities=Qt,Ct.stableBufferTime=nn,Ct.Vp=Ot.Vp,Ct.gp=Ot.gp,Ct.lastQuality=0,oe(Ct)):Ct.state=0,Ct}(et),W[ft]=vt),vt}(Qe);if(q.state===0)return ct;var K,_e=le.getCurrentBufferLevel(Kt),de=re.getAverageThroughput(Kt,O),He=re.getSafeAverageThroughput(Kt,O),Tt=re.getAverageLatency(Kt);if(ct.reason.state=q.state,ct.reason.throughput=de,ct.reason.latency=Tt,isNaN(de))return ct;switch(q.state){case 1:K=Ce.getQualityForBitrate(Xt,He,Fe,Tt),ct.quality=K,ct.reason.throughput=He,q.placeholderBuffer=Math.max(0,Xe(q,K)-_e),q.lastQuality=K,!isNaN(q.lastSegmentDurationS)&&_e>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(et,ft){var vt=Date.now();if(isNaN(et.lastSegmentFinishTimeMs)){if(!isNaN(et.lastCallTimeMs)){var Et=.001*(vt-et.lastCallTimeMs);et.placeholderBuffer+=Math.max(0,Et)}}else{var Ct=.001*(vt-et.lastSegmentFinishTimeMs);et.placeholderBuffer+=Math.max(0,Ct)}et.lastCallTimeMs=vt,et.lastSegmentStart=NaN,et.lastSegmentRequestTimeMs=NaN,et.lastSegmentFinishTimeMs=NaN,he(et,ft)})(q,Kt),K=function(et,ft){for(var vt=et.bitrates.length,Et=NaN,Ct=NaN,hn=0;hn<vt;++hn){var Qt=(et.Vp*(et.utilities[hn]+et.gp)-ft)/et.bitrates[hn];(isNaN(Ct)||Qt>=Ct)&&(Ct=Qt,Et=hn)}return Et}(q,_e+q.placeholderBuffer);var ot=Ce.getQualityForBitrate(Xt,He,Fe,Tt);K>q.lastQuality&&K>ot&&(K=Math.max(ot,q.lastQuality));var it=Math.max(0,_e+q.placeholderBuffer-be(q,K));it<=q.placeholderBuffer?(q.placeholderBuffer-=it,it=0):(it-=q.placeholderBuffer,q.placeholderBuffer=0,K<Ce.getMaxAllowedIndexFor(Kt,Fe)?_t.setTimeToLoadDelay(1e3*it):it=0),ct.quality=K,ct.reason.throughput=de,ct.reason.latency=Tt,ct.reason.bufferLevel=_e,ct.reason.placeholderBuffer=q.placeholderBuffer,ct.reason.delay=it,q.lastQuality=K;break;default:z.debug("BOLA ABR rule invoked in bad state."),ct.quality=Ce.getQualityForBitrate(Xt,He,Fe,Tt),ct.reason.state=q.state,ct.reason.throughput=He,ct.reason.latency=Tt,q.state=1,oe(q)}return ct},reset:function(){Oe(),X.off(U.Z.BUFFER_EMPTY,Ae,Z),X.off(U.Z.PLAYBACK_SEEKING,Ze,Z),X.off(U.Z.METRIC_ADDED,ut,Z),X.off(U.Z.QUALITY_CHANGE_REQUESTED,lt,Z),X.off(U.Z.FRAGMENT_LOADING_ABANDONED,wt,Z),X.off(m.Z.MEDIA_FRAGMENT_LOADED,tt,Z)}},z=(0,T.Z)($).getInstance().getLogger(Z),Oe(),X.on(U.Z.BUFFER_EMPTY,Ae,Z),X.on(U.Z.PLAYBACK_SEEKING,Ze,Z),X.on(U.Z.METRIC_ADDED,ut,Z),X.on(U.Z.QUALITY_CHANGE_REQUESTED,lt,Z),X.on(U.Z.FRAGMENT_LOADING_ABANDONED,wt,Z),X.on(m.Z.MEDIA_FRAGMENT_LOADED,tt,Z),Z}I.__dashjs_factory_name="BolaRule",g.Z=y.Z.getClassFactory(I)},895:function(b,g,w){var F=w(5448),C=w(2068),y=w(6398);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){var x=(0,C.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return x;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var R=_.getFrameHistory(I);if(!R||R.length===0)return x;for(var Z=0,z=0,W=C.Z.NO_CHANGE,$=1;$<R.length;$++)if(R[$]&&(Z=R[$].droppedVideoFrames,(z=R[$].totalVideoFrames)>375&&Z/z>.15)){W=$-1,m.debug("index: "+W+" Dropped Frames: "+Z+" Total Frames: "+z);break}return(0,C.Z)(T).create(W,{droppedFrames:Z})}return x}},m=(0,y.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="DroppedFramesRule",g.Z=F.Z.getClassFactory(v)},6535:function(b,g,w){var F=w(5595),C=w(8512),y=w(5448),v=w(6398),D=w(2068),m=w(3393),T=w(3860),U=w(8825);function x(_){_=_||{};var I,R,Z,z=this.context,W=(0,F.Z)(z).getInstance(),$=_.dashMetrics;function le(){(Z={})[m.Z.VIDEO]={ignoreCount:2},Z[m.Z.AUDIO]={ignoreCount:2}}function N(){le()}function X(ce){isNaN(ce.startTime)||ce.mediaType!==m.Z.AUDIO&&ce.mediaType!==m.Z.VIDEO||Z[ce.mediaType].ignoreCount>0&&Z[ce.mediaType].ignoreCount--}return I={getMaxIndex:function(ce){var oe=(0,D.Z)(z).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!$||!$.hasOwnProperty("getCurrentBufferLevel")||!$.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var he=ce.getMediaType(),be=$.getCurrentBufferState(he),Xe=ce.getRepresentationInfo().fragmentDuration,Ae=ce.getStreamInfo(),Ze=Ae?Ae.id:null,tt=ce.getScheduleController(),ut=Ae&&Ae.manifestInfo&&Ae.manifestInfo.isDynamic;if(function(Kt,_t){return!Kt&&Z[_t].ignoreCount>0}(tt.getPlaybackController().getLowLatencyModeEnabled(),he)||!Xe)return oe;if(be&&be.state===T.Z.BUFFER_EMPTY)R.debug("["+he+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var $e=ce.getMediaInfo(),lt=ce.getAbrController(),wt=lt.getThroughputHistory(),Oe=$.getCurrentBufferLevel(he),Qe=wt.getAverageThroughput(he,ut),ct=wt.getAverageLatency(he),Xt=Qe*(Oe/Xe)*.5;oe.quality=lt.getQualityForBitrate($e,Xt,Ze,ct),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){le(),W.off(U.Z.PLAYBACK_SEEKING,N,I),W.off(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I)}},R=(0,v.Z)(z).getInstance().getLogger(I),le(),W.on(U.Z.PLAYBACK_SEEKING,N,I),W.on(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I),I}x.__dashjs_factory_name="InsufficientBufferRule",g.Z=y.Z.getClassFactory(x)},1914:function(b,g,w){var F=w(3860),C=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(3393);function x(_){_=_||{};var I,R,Z,z,W=this.context,$=_.dashMetrics,le=(0,D.Z)(W).getInstance();function N(Ze){Ze.placeholderBuffer=0,Ze.mostAdvancedSegmentStart=NaN,Ze.lastSegmentWasReplacement=!1,Ze.lastSegmentStart=NaN,Ze.lastSegmentDurationS=NaN,Ze.lastSegmentRequestTimeMs=NaN,Ze.lastSegmentFinishTimeMs=NaN,Ze.lastSegmentUrl=""}function X(){for(var Ze in R)if(R.hasOwnProperty(Ze)){var tt=R[Ze];tt.state!==0&&(tt.state=1,N(tt))}}function ce(Ze){if(Ze&&Ze.chunk&&Ze.chunk.mediaInfo){var tt=R[Ze.chunk.mediaInfo.type],ut=Z[Ze.chunk.mediaInfo.type];if(tt&&tt.state!==0){var $e=Ze.chunk.start;isNaN(tt.mostAdvancedSegmentStart)||$e>tt.mostAdvancedSegmentStart?(tt.mostAdvancedSegmentStart=$e,tt.lastSegmentWasReplacement=!1):tt.lastSegmentWasReplacement=!0,tt.lastSegmentStart=$e,tt.lastSegmentDurationS=Ze.chunk.duration,tt.lastQuality=Ze.chunk.quality,he(tt,ut)}}}function oe(Ze){if(Ze&&Ze.metric===F.Z.HTTP_REQUEST&&Ze.value&&Ze.value.type===v.w.MEDIA_SEGMENT_TYPE&&Ze.value.trace&&Ze.value.trace.length){var tt=R[Ze.mediaType],ut=Z[Ze.mediaType];tt&&tt.state!==0&&(tt.lastSegmentRequestTimeMs=Ze.value.trequest.getTime(),tt.lastSegmentFinishTimeMs=Ze.value._tfinish.getTime(),he(tt,ut))}}function he(Ze,tt){isNaN(Ze.lastSegmentStart)||isNaN(Ze.lastSegmentRequestTimeMs)||(tt.segment_request_start_s=.001*Ze.lastSegmentRequestTimeMs,tt.segment_download_finish_s=.001*Ze.lastSegmentFinishTimeMs,Ze.lastSegmentStart=NaN,Ze.lastSegmentRequestTimeMs=NaN)}function be(Ze){if(Ze&&Ze.mediaType){var tt=R[Ze.mediaType];tt&&tt.state!==0&&(tt.abrQuality=Ze.newQuality)}}function Xe(Ze,tt){if(Ze.length!==tt.length)return-1;for(var ut=0,$e=0;$e<Ze.length;$e++)ut+=Ze[$e]*tt[$e];return ut}function Ae(){R={},Z={}}return I={getMaxIndex:function(Ze){var tt,ut=(0,C.Z)(W).create(),$e=Math.pow(4,.99),lt=Math.max(Math.pow(4,1),$e*Math.sqrt(4)),wt=Ze.getMediaInfo(),Oe=Ze.getMediaType(),Qe=wt.bitrateList.map(function(Ot){return Ot.bandwidth}),ct=Qe.length,Xt=Ze.getScheduleController(),Kt=Ze.getStreamInfo(),_t=Ze.getAbrController(),At=_t.getThroughputHistory(),Ce=Kt&&Kt.manifestInfo&&Kt.manifestInfo.isDynamic,re=Ze.useL2AABR(),Fe=$.getCurrentBufferLevel(Oe,!0),O=At.getSafeAverageThroughput(Oe,Ce),M=At.getAverageThroughput(Oe,Ce),q=At.getAverageLatency(Oe),K=Ze.getVideoModel().getPlaybackRate();if(!(Ze&&Ze.hasOwnProperty("getMediaInfo")&&Ze.hasOwnProperty("getMediaType")&&Ze.hasOwnProperty("getScheduleController")&&Ze.hasOwnProperty("getStreamInfo")&&Ze.hasOwnProperty("getAbrController")&&Ze.hasOwnProperty("useL2AABR"))||(ut.reason=ut.reason||{},!re||Oe===U.Z.AUDIO))return ut;Xt.setTimeToLoadDelay(0);var _e=function(Ot){var Un=Ot.getMediaType(),gr=R[Un];return gr||(gr=function(Pr){var dr={},ti=Pr.getMediaInfo(),eo=ti.bitrateList.map(function(Or){return Or.bandwidth/1e3});return dr.state=1,dr.bitrates=eo,dr.lastQuality=0,function(Or){Or&&Or.type&&(Z[Or.type]={},Z[Or.type].w=[],Z[Or.type].prev_w=[],Z[Or.type].Q=0,Z[Or.type].segment_request_start_s=0,Z[Or.type].segment_download_finish_s=0,Z[Or.type].B_target=1.5)}(ti),N(dr),dr}(Ot),R[Un]=gr),gr}(Ze);if(_e.state===0)return ut;var de=Z[Oe];if(!de||(ut.reason.state=_e.state,ut.reason.throughput=M,ut.reason.latency=q,isNaN(M)))return ut;switch(_e.state){case 1:if(tt=_t.getQualityForBitrate(wt,O,Kt.id,q),ut.quality=tt,ut.reason.throughput=O,_e.lastQuality=tt,!isNaN(_e.lastSegmentDurationS)&&Fe>=de.B_target){_e.state=2,de.Q=$e;for(var He=0;He<ct;++He)He===_e.lastQuality?de.prev_w[He]=1:de.prev_w[He]=0}break;case 2:var Tt=[],ot=$.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.d},0),it=$.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.b[0]},0),et=Math.round(8*it/ot),ft=$.getCurrentHttpRequest(Oe);if(et<1&&(et=1),ft.url===_e.lastSegmentUrl||ft.type===v.w.INIT_SEGMENT_TYPE)tt=_e.lastQuality;else{for(var vt=_e.lastSegmentDurationS,Et=1,Ct=0;Ct<ct;++Ct)Qe[Ct]=Qe[Ct]/1e3,K*Qe[Ct]>et&&(Et=-1),de.w[Ct]=de.prev_w[Ct]+Et*(vt/(2*lt))*((de.Q+$e)*(K*Qe[Ct]/et));de.w=function(Ot){for(var Un=Ot.length,gr=!1,Pr=[],dr=0;dr<Un;++dr)Pr[dr]=Ot[dr];for(var ti=Ot.sort(function(zi,no){return no-zi}),eo=0,Or=0,to=[],Ti=0;Ti<Un-1;++Ti)if((Or=((eo+=ti[Ti])-1)/(Ti+1))>=ti[Ti+1]){gr=!0;break}gr||(Or=(eo+ti[Un-1]-1)/Un);for(var Di=0;Di<Un;++Di)to[Di]=Math.max(Pr[Di]-Or,0);return to}(de.w);for(var hn=0;hn<ct;++hn)Tt[hn]=de.w[hn]-de.prev_w[hn],de.prev_w[hn]=de.w[hn];de.Q=Math.max(0,de.Q-vt+vt*K*((Xe(Qe,de.prev_w)+Xe(Qe,Tt))/et));for(var Qt=[],nn=0;nn<ct;++nn)Qt[nn]=Math.abs(Qe[nn]-Xe(de.w,Qe));(tt=Qt.indexOf(Math.min.apply(Math,Qt)))>_e.lastQuality&&Qe[_e.lastQuality+1]<=et&&(tt=_e.lastQuality+1),Qe[tt]>=et&&(de.Q=2*Math.max($e,de.Q)),_e.lastSegmentUrl=ft.url}ut.quality=tt,ut.reason.throughput=M,ut.reason.latency=q,ut.reason.bufferLevel=Fe,_e.lastQuality=ut.quality;break;default:z.debug("L2A ABR rule invoked in bad state."),ut.quality=_t.getQualityForBitrate(wt,O,Kt.id,q),ut.reason.state=_e.state,ut.reason.throughput=O,ut.reason.latency=q,_e.state=1,N(_e)}return ut},reset:function(){Ae(),le.off(m.Z.PLAYBACK_SEEKING,X,I),le.off(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),le.off(m.Z.METRIC_ADDED,oe,I),le.off(m.Z.QUALITY_CHANGE_REQUESTED,be,I)}},z=(0,T.Z)(W).getInstance().getLogger(I),Ae(),le.on(m.Z.PLAYBACK_SEEKING,X,I),le.on(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),le.on(m.Z.METRIC_ADDED,oe,I),le.on(m.Z.QUALITY_CHANGE_REQUESTED,be,I),I}x.__dashjs_factory_name="L2ARule",g.Z=y.Z.getClassFactory(x)},6070:function(b,g,w){var F=w(5448),C=w(6398),y=w(2068);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){for(var x=U?U.getSwitchHistory():null,_=x?x.getSwitchRequests():[],I=0,R=0,Z=0,z=(0,y.Z)(T).create(),W=0;W<_.length;W++)if(_[W]!==void 0&&(I+=_[W].drops,R+=_[W].noDrops,Z+=_[W].dropSize,I+R>=6&&I/R>.075)){z.quality=W>0&&_[W].drops>0?W-1:W,z.reason={index:z.quality,drops:I,noDrops:R,dropSize:Z},m.debug("Switch history rule index: "+z.quality+" samples: "+(I+R)+" drops: "+I);break}return z}},m=(0,C.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="SwitchHistoryRule",g.Z=F.Z.getClassFactory(v)},5628:function(b,g,w){var F=w(5448),C=w(2068),y=w(3393),v=w(3860);function D(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(x){var _=(0,C.Z)(T).create();if(!(x&&x.hasOwnProperty("getMediaInfo")&&x.hasOwnProperty("getMediaType")&&x.hasOwnProperty("useBufferOccupancyABR")&&x.hasOwnProperty("getAbrController")&&x.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var I=x.getMediaInfo(),R=x.getMediaType(),Z=U.getCurrentBufferState(R),z=x.getScheduleController(),W=x.getAbrController(),$=x.getStreamInfo(),le=$?$.id:null,N=$&&$.manifestInfo?$.manifestInfo.isDynamic:null,X=W.getThroughputHistory(),ce=X.getSafeAverageThroughput(R,N),oe=X.getAverageLatency(R),he=x.useBufferOccupancyABR();return isNaN(ce)||!Z||he||W.getAbandonmentStateFor(le,R)!==v.Z.ABANDON_LOAD&&(Z.state===v.Z.BUFFER_LOADED||N)&&(_.quality=W.getQualityForBitrate(I,ce,le,oe),z.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}D.__dashjs_factory_name="ThroughputRule",g.Z=F.Z.getClassFactory(D)},4722:function(b,g,w){var F=w(5448),C=w(6398);function y(){var v,D,m,T,U,x,_,I,R,Z=this.context;function z(){m=null,T=1,U=100,x=0,_=null,I=null,R="dynamic_weight_selection"}function W(){var ce=0;if(m)for(var oe=0;oe<m.length;oe++){var he=m[oe];he.state.throughput>ce&&(ce=he.state.throughput)}return ce}function $(ce,oe,he){var be=ce.map(function(Xe,Ae){return he[Ae]*Math.pow(Xe-oe[Ae],2)}).reduce(function(Xe,Ae){return Xe+Ae});return(be<0?-1:1)*Math.sqrt(Math.abs(be))}function le(ce,oe){return $([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function N(ce,oe,he){for(var be=0;be<oe.length;be++){var Xe=oe[be],Ae=le(Xe,ce);X(Xe,he,Math.exp(-1*Math.pow(Ae,2)/(2*Math.pow(.1,2))))}}function X(ce,oe,he){var be=ce.state,Xe=[.01,.01,.01,.01];be.throughput=be.throughput+(oe[0]-be.throughput)*Xe[0]*he,be.latency=be.latency+(oe[1]-be.latency)*Xe[1]*he,be.rebuffer=be.rebuffer+(oe[2]-be.rebuffer)*Xe[2]*he,be.switch=be.switch+(oe[3]-be.switch)*Xe[3]*he}return v={getNextQuality:function(ce,oe,he,be,Xe,Ae,Ze){var tt=he,ut=be,$e=oe,lt=function(de){if(!m){m=[];var He=de.bitrateList,Tt=[];x=He[0].bandwidth,He.forEach(function(ft){Tt.push(ft.bandwidth),ft.bandwidth<x&&(x=ft.bandwidth)}),et=Tt.map(function(ft){return Math.pow(ft,2)}).reduce(function(ft,vt){return ft+vt}),T=Math.sqrt(et);for(var ot=0;ot<He.length;ot++){var it={qualityIndex:ot,bitrate:He[ot].bandwidth,state:{throughput:He[ot].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(it)}I=function(ft){var vt=[],Et=function(Lu){for(var tn=[],sn=0;sn<Lu;sn++){var an=[Math.random()*W(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(ft.length,2));vt.push(Et[0]);for(var Ct=[1,1,1,1],hn=1;hn<ft.length;hn++){for(var Qt=null,nn=null,Ot=0;Ot<Et.length;Ot++){for(var Un=Et[Ot],gr=null,Pr=0;Pr<vt.length;Pr++){var dr=$(Un,vt[Pr],Ct);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&(Qt=Un,nn=gr)}vt.push(Qt)}for(var ti=null,eo=null,Or=0;Or<vt.length;Or++){for(var to=0,Ti=0;Ti<vt.length;Ti++)Or!==Ti&&(to+=$(vt[Or],vt[Ti],Ct));(ti===null||to>ti)&&(ti=to,eo=Or)}var Di=[];for(Di.push(vt[eo]),vt.splice(eo,1);vt.length>0;){for(var zi=null,no=null,Si=0;Si<vt.length;Si++){var Qn=$(Di[0],vt[Si],Ct);(zi===null||Qn<zi)&&(zi=Qn,no=Si)}Di.push(vt[no]),vt.splice(no,1)}return Di}(m)}var et;return m}(ce),wt=oe/T;wt>1&&(wt=W()),he/=U,D.debug("getNextQuality called throughput:".concat(wt," latency:").concat(he," bufferSize:").concat(be," currentQualityIndex:").concat(Ae," playbackRate:").concat(Xe));var Oe=lt[Ae],Qe=Oe.bitrate*Ze.getSegmentDuration()/$e,ct=Math.max(0,Qe-ut);if(ut-Qe<Ze.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(Oe.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(ut," rebuffer=").concat(ct)),function(de,He){var Tt=0,ot=de;if(m)for(var it=0;it<m.length;it++){var et=m[it];et.bitrate<de.bitrate&&et.bitrate>Tt&&He>et.bitrate&&(Tt=et.bitrate,ot=et)}return ot}(Oe,$e).qualityIndex;switch(R){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){_=function(He,Tt){for(var ot=[],it=Math.sqrt(2/He),et=0;et<4;et++)ot.push(Math.random()*it);return _=ot}(de.length)})(lt);break;default:(function(de,He,Tt,ot,it,et,ft){_||(_=I[I.length-1]);var vt=de.findWeightVector(He,Tt,ot,it,et,ft);vt!==null&&vt!==-1&&(_=vt)})(Ze,lt,tt,ut,ct,$e,Xe)}for(var Xt=null,Kt=null,_t=null,At=0;At<lt.length;At++){var Ce=lt[At],re=Ce.state,Fe=[re.throughput,re.latency,re.rebuffer,re.switch],O=_.slice(),M=Ze.getNextBufferWithBitrate(Ce.bitrate,ut,$e),q=M<Ze.getMinBuffer();q&&D.debug("Buffer is low for bitrate=".concat(Ce.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(ut," nextBuffer=").concat(M)),(Ce.bitrate>oe-1e4||q)&&Ce.bitrate!==x&&(O[0]=100);var K=$(Fe,[wt,0,0,0],O);(Xt===null||K<Xt)&&(Xt=K,Kt=Ce.qualityIndex,_t=Ce)}var _e=Math.abs(Oe.bitrate-_t.bitrate)/T;return N(Oe,lt,[wt,he,ct,_e]),N(_t,lt,[wt,0,0,_e]),Kt},reset:function(){z()}},D=(0,C.Z)(Z).getInstance().getLogger(v),z(),v}y.__dashjs_factory_name="LearningAbrController",g.Z=F.Z.getClassFactory(y)},5317:function(b,g,w){var F=w(5448),C=w(2298);function y(){var v,D,m,T,U;function x(){D=null,m=null,T=null,U=null}function _(R,Z,z,W){var $=new C.Z;return $.type=R,$.weights.bitrateReward=Z||1,$.weights.bitrateSwitchPenalty=1,$.weights.rebufferPenalty=z||1e3,$.weights.latencyPenalty=[],$.weights.latencyPenalty.push({threshold:1.1,penalty:.05*W}),$.weights.latencyPenalty.push({threshold:1e8,penalty:.1*z}),$.weights.playbackSpeedPenalty=W||200,$}function I(R,Z,z,W,$){$.bitrateWSum+=$.weights.bitrateReward*R,$.lastBitrate&&($.bitrateSwitchWSum+=$.weights.bitrateSwitchPenalty*Math.abs(R-$.lastBitrate)),$.lastBitrate=R,$.rebufferWSum+=$.weights.rebufferPenalty*Z;for(var le=0;le<$.weights.latencyPenalty.length;le++){var N=$.weights.latencyPenalty[le];if(z<=N.threshold){$.latencyWSum+=N.penalty*z;break}}$.playbackSpeedWSum+=$.weights.playbackSpeedPenalty*Math.abs(1-W),$.totalQoe=$.bitrateWSum-$.bitrateSwitchWSum-$.rebufferWSum-$.latencyWSum-$.playbackSpeedWSum}return v={setupPerSegmentQoe:function(R,Z,z){D=_("segment",R,Z,z),m=R,T=Z,U=z},logSegmentMetrics:function(R,Z,z,W){D&&I(R,Z,z,W,D)},getPerSegmentQoe:function(){return D},calculateSingleUseQoe:function(R,Z,z,W){var $=null;return m&&T&&U&&($=_("segment",m,T,U)),$?(I(R,Z,z,W,$),$.totalQoe):0},reset:function(){x()}},x(),v}y.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=F.Z.getClassFactory(y)},5435:function(b,g,w){var F=w(6398),C=w(5448),y=w(4722),v=w(5317),D=w(2068),m=w(3860),T=w(6523),U=w(3393);function x(_){var I,R,Z,z,W=(_=_||{}).dashMetrics,$=this.context;return R={getMaxIndex:function(le){try{var N=(0,D.Z)($).create(),X=le.getMediaInfo().type,ce=le.getAbrController(),oe=le.getStreamInfo(),he=ce.getQualityFor(X,oe.id),be=le.getMediaInfo(),Xe=W.getCurrentBufferState(X),Ae=le.getScheduleController(),Ze=W.getCurrentBufferLevel(X,!0),tt=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,ut=Ae.getPlaybackController(),$e=ut.getCurrentLiveLatency();if(!le.useLoLPABR()||X===U.Z.AUDIO)return N;$e||($e=0);var lt=ut.getPlaybackRate(),wt=ce.getThroughputHistory().getSafeAverageThroughput(X,tt);if(I.debug("Throughput ".concat(Math.round(wt)," kbps")),isNaN(wt)||!Xe||ce.getAbandonmentStateFor(oe.id,X)===m.Z.ABANDON_LOAD)return N;for(var Oe=be.bitrateList,Qe=le.getRepresentationInfo().fragmentDuration,ct=Oe[0].bandwidth/1e3,Xt=Oe[Oe.length-1].bandwidth/1e3,Kt=0;Kt<Oe.length;Kt++){var _t=Oe[Kt].bandwidth/1e3;_t>Xt?Xt=_t:_t<ct&&(ct=_t)}var At=Oe[he].bandwidth/1e3,Ce=W.getCurrentHttpRequest(X,!0),re=(Ce.tresponse.getTime()-Ce.trequest.getTime())/1e3,Fe=re>Qe?re-Qe:0;z.setupPerSegmentQoe(Qe,Xt,ct),z.logSegmentMetrics(At,Fe,$e,lt);var O=(0,T.Z)($).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Qe,qoeEvaluator:z});return N.quality=Z.getNextQuality(be,1e3*wt,$e,Ze,lt,he,O),N.reason={throughput:wt,latency:$e},N.priority=D.Z.PRIORITY.STRONG,Ae.setTimeToLoadDelay(0),N.quality!==he&&I.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",N.quality,"Average throughput",Math.round(wt),"kbps"),N}catch(M){throw M}},reset:function(){Z.reset(),z.reset()}},I=(0,F.Z)($).getInstance().getLogger(R),Z=(0,y.Z)($).create(),z=(0,v.Z)($).create(),R}x.__dashjs_factory_name="LoLPRule",g.Z=C.Z.getClassFactory(x)},6523:function(b,g,w){var F=w(5448);function C(y){var v,D,m,T,U=y.targetLatency,x=y.bufferMin,_=y.segmentDuration,I=y.qoeEvaluator;function R(){return _}function Z(z,W){var $=R();return W>$?z-$:z+$-W}return v={getMinBuffer:function(){return x},getSegmentDuration:R,getNextBufferWithBitrate:function(z,W,$){return Z(W,z*_/$)},getNextBuffer:Z,findWeightVector:function(z,W,$,le,N,X){var ce=null,oe=null,he=null,be=Math.abs(W-m);return z.forEach(function(Xe){D.forEach(function(Ae){Ae[0];var Ze=Ae[1],tt=Ae[2],ut=(Ae[3],Xe.bitrate*_/N),$e=Z($,ut),lt=(tt===0?10:1/tt)*Math.max(1e-5,ut-$e),wt=(Ze===0?10:1/Ze)*Xe.state.latency,Oe=I.calculateSingleUseQoe(Xe.bitrate,lt,wt,X);(ce===null||Oe>ce)&&function(Qe,ct,Xt){return!(Qe>U+Xt)&&ct>=x}(W,$e,be)&&(ce=Oe,oe=Ae,he=Xe.bitrate)})}),oe===null&&he===null&&(oe=-1),m=W,oe}},D=function z(W,$,le){if(le===$)return W;for(var N=W.length,X=0;X<N;X++)for(var ce=W.shift(),oe=0;oe<T.length;oe++)W.push(ce.concat(T[oe]));return z(W,$,le+1)}((T=[.2,.4,.6,.8,1]).map(function(z){return[z]}),4,1),m=0,v}C.__dashjs_factory_name="LoLpWeightSelector",g.Z=F.Z.getClassFactory(C)},2298:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(b,g,w){w.d(g,{Y:function(){return I}});var F=w(3393),C=w(1553),y=w(5448),v=w(2128),D=w(2594),m=w(7387),T=w(7417),U=w(9032),x=w(9326),_=w(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function R(Z){var z,W,$,le,N,X,ce,oe,he=this.context,be=Z.adapter,Xe=Z.baseURLController,Ae=Z.streamInfo,Ze=Z.timelineConverter,tt=Z.debug,ut=Z.eventBus,$e=Z.events,lt=Z.dashConstants,wt=(0,D.Z)(he).getInstance();function Oe(ct,Xt){var Kt=new v.Z;Kt.id=ct.id,Kt.bitrate=ct.bandwidth,Kt.width=ct.width,Kt.height=ct.height,Kt.tilesHor=1,Kt.tilesVert=1,ct.essentialProperties&&ct.essentialProperties.forEach(function(_t){if(I.indexOf(_t.schemeIdUri)>=0&&_t.value){var At=_t.value.split("x");At.length!==2||isNaN(At[0])||isNaN(At[1])||(Kt.tilesHor=parseInt(At[0],10),Kt.tilesVert=parseInt(At[1],10))}}),Xt?X.updateSegmentData(ct).then(function(_t){(function(At,Ce,re){var Fe=[],O=function(M,q){var K,_e,de,He,Tt=[],ot=0;for(K=0,_e=M.segments.length;K<_e;K++)de=M.segments[K],(He=(0,m.TJ)(Ze,be.getIsDynamic(),q,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,ot))&&(Tt.push(He),He=null,ot++);return Tt}(re,Ce);Ce.segments=O,At.segmentDuration=Ce.segments[0].duration,At.readThumbnail=function(M,q){var K=null;Fe.some(function(_e){if(_e.start<=M&&_e.end>M)return K=_e.url,!0}),K?q(K):Ce.segments.some(function(_e){if(_e.mediaStartTime<=M&&_e.mediaStartTime+_e.duration>M){var de=Xe.resolve(Ce.path);return ce.load({method:"get",url:de.url,request:{range:_e.mediaRange,responseType:"arraybuffer"},onload:function(He){var Tt=oe.getSamplesInfo(He.target.response),ot=new Blob([He.target.response.slice(Tt.sampleList[0].offset,Tt.sampleList[0].offset+Tt.sampleList[0].size)],{type:"image/jpeg"}),it=window.URL.createObjectURL(ot);Fe.push({start:_e.mediaStartTime,end:_e.mediaStartTime+_e.duration,url:it}),q&&q(it)}}),!0}})}})(Kt,ct,_t)}):(Kt.startNumber=ct.startNumber,Kt.segmentDuration=ct.segmentDuration,Kt.timescale=ct.timescale,Kt.templateUrl=function(_t){var At=wt.isRelative(_t.media)?wt.resolve(_t.media,Xe.resolve(_t.path).url):_t.media;return At?(0,m.Aj)(At,_t.id):""}(ct)),Kt.tilesHor>0&&Kt.tilesVert>0&&(Kt.widthPerTile=Kt.width/Kt.tilesHor,Kt.heightPerTile=Kt.height/Kt.tilesVert,W.push(Kt))}function Qe(){W=[],le=-1,N=null}return z={getTracks:function(){return W},addTracks:function(){if(Ae&&be&&(N=be.getMediaInfoForType(Ae,F.Z.IMAGE))){var ct=be.getVoRepresentations(N);ct&&ct.length>0&&ct.forEach(function(Xt){(Xt.segmentInfoType===C.Z.SEGMENT_TEMPLATE&&Xt.segmentDuration>0&&Xt.media||Xt.segmentInfoType===C.Z.SEGMENT_TIMELINE)&&Oe(Xt),Xt.segmentInfoType===C.Z.SEGMENT_BASE&&Oe(Xt,!0)}),W.length>0&&W.sort(function(Xt,Kt){return Xt.bitrate-Kt.bitrate})}},reset:Qe,setTrackByIndex:function(ct){W&&W.length!==0&&(ct>=W.length&&(ct=W.length-1),le=ct)},getCurrentTrack:function(){return le<0?null:W[le]},getCurrentTrackIndex:function(){return le},getThumbnailRequestForTime:function(ct){for(var Xt,Kt=be.getVoRepresentations(N),_t=0;_t<Kt.length;_t++)if(W[le].id===Kt[_t].id){Xt=Kt[_t];break}return $.getSegmentRequestForTime(N,Xt,ct)}},Qe(),ce=(0,U.Z)(he).create({}),oe=(0,T.Z)(he).getInstance(),X=(0,_.Z)(he).create({events:$e,eventBus:ut,streamInfo:Ae,timelineConverter:Ze,dashConstants:lt,dashMetrics:Z.dashMetrics,segmentBaseController:Z.segmentBaseController,type:F.Z.IMAGE}),($=(0,x.Z)(he).create({streamInfo:Ae,type:F.Z.IMAGE,timelineConverter:Ze,segmentsController:X,baseURLController:Xe,debug:tt,eventBus:ut,events:$e,dashConstants:lt,urlUtils:wt})).initialize(!!be&&be.getIsDynamic()),z}R.__dashjs_factory_name="ThumbnailTracks",g.Z=y.Z.getClassFactory(R)},7417:function(b,g,w){var F=w(6398),C=w(8260),y=w(5448),v=w(6934),D=w(9597);function m(){var T,U,x=this.context;function _(Z){if(!Z)return null;Z.fileStart===void 0&&(Z.fileStart=0);var z=v.parseBuffer(Z),W=(0,C.Z)(x).create();return W.setData(z),W}function I(Z,z){return Z[z+3]>>>0|Z[z+2]<<8>>>0|Z[z+1]<<16>>>0|Z[z]<<24>>>0}function R(Z,z){return String.fromCharCode(Z[z++])+String.fromCharCode(Z[z++])+String.fromCharCode(Z[z++])+String.fromCharCode(Z[z])}return U={parse:_,findLastTopIsoBoxCompleted:function(Z,z,W){if(W===void 0&&(W=0),!z||W+8>=z.byteLength)return new D.Z(0,!1);for(var $,le=z instanceof ArrayBuffer?new Uint8Array(z):z,N=0;W<le.byteLength;){var X=I(le,W),ce=R(le,W+4);if(X===0)break;W+X<=le.byteLength&&(Z.indexOf(ce)>=0?$=new D.Z(W,!0,X):N=W+X),W+=X}return $||new D.Z(N,!1)},getMediaTimescaleFromMoov:function(Z){var z=_(Z),W=z?z.getBox("mdhd"):void 0;return W?W.timescale:NaN},getSamplesInfo:function(Z){if(!Z||Z.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var z,W,$,le,N,X,ce,oe,he,be,Xe,Ae,Ze,tt,ut,$e,lt=_(Z),wt=lt.getBoxes("moof"),Oe=lt.getBoxes("mfhd");ut=lt.getBoxes("moof").length,tt=Oe[Oe.length-1].sequence_number,W=0,N=[];var Qe=-1,ct=-1;for(be=0;be<wt.length;be++){var Xt=wt[be],Kt=Xt.getChildBoxes("traf");for(oe=0;oe<Kt.length;oe++){var _t=Kt[oe],At=_t.getChildBox("tfhd"),Ce=_t.getChildBox("tfdt");le=Ce.baseMediaDecodeTime;var re=_t.getChildBoxes("trun"),Fe=_t.getChildBoxes("subs");for(he=0;he<re.length;he++){var O=re[he];for(W=O.sample_count,Ze=(At.base_data_offset||0)+(O.data_offset||0),ce=0;ce<W;ce++){z=(X=O.samples[ce]).sample_duration!==void 0?X.sample_duration:At.default_sample_duration,$=X.sample_size!==void 0?X.sample_size:At.default_sample_size;var M={dts:le,cts:le+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:z,offset:Xt.offset+Ze,size:$,subSizes:[$]};if(Fe)for(Xe=0;Xe<Fe.length;Xe++){var q=Fe[Xe];if(Qe<q.entry_count-1&&ce>ct&&(Qe++,ct+=q.entries[Qe].sample_delta),ce==ct){M.subSizes=[];var K=q.entries[Qe];for(Ae=0;Ae<K.subsample_count;Ae++)M.subSizes.push(K.subsamples[Ae].subsample_size)}}N.push(M),Ze+=$,le+=z}}$e=le-Ce.baseMediaDecodeTime}}return{sampleList:N,lastSequenceNumber:tt,totalDuration:$e,numSequences:ut}},findInitRange:function(Z){var z=null,W=_(Z);if(!W)return z;var $=W.getBox("ftyp"),le=W.getBox("moov");return T.debug("Searching for initialization."),le&&le.isComplete&&(z=($?$.offset:le.offset)+"-"+(le.offset+le.size-1),T.debug("Found the initialization.  Range: "+z)),z},parsePayload:function(Z,z,W){if(W===void 0&&(W=0),!z||W+8>=z.byteLength)return new D.Z(0,!1);for(var $,le=z instanceof ArrayBuffer?new Uint8Array(z):z,N=0;W<le.byteLength;){var X=I(le,W),ce=R(le,W+4);if(X===0)break;W+X<=le.byteLength&&(Z.indexOf(ce)>=0?$=new D.Z(W,!0,X,ce):N=W+X),W+=X}return $||new D.Z(N,!1)}},T=(0,F.Z)(x).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",g.Z=y.Z.getSingletonFactory(m)},1715:function(b,g,w){w.d(g,{B:function(){return D}});var F=w(5448),C=w(7803),y=w(3393),v=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,x="MediaSource"in window;return T||U||x}function m(){var T,U,x;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:D,supportsEncryptedMedia:function(){return x},supportsCodec:function(_,I){return I!==y.Z.AUDIO&&I!==y.Z.VIDEO?Promise.resolve(!0):function(R,Z){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(R.codec&&Z===y.Z.AUDIO||Z===y.Z.VIDEO&&R.codec&&R.width&&R.height&&R.bitrate&&R.framerate)}(_,I)?function(R,Z){return new Promise(function(z){if(R&&R.codec){var W={type:"media-source"};W[Z]={},W[Z].contentType=R.codec,W[Z].width=R.width,W[Z].height=R.height,W[Z].bitrate=parseInt(R.bitrate),W[Z].framerate=parseFloat(R.framerate),navigator.mediaCapabilities.decodingInfo(W).then(function($){z($.supported)}).catch(function(){z(!1)})}else z(!1)})}(_,I):function(R){return new Promise(function(Z){if(R&&R.codec){var z=R.codec;R.width&&R.height&&(z+=';width="'+R.width+'";height="'+R.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(z)||"MediaSource"in window&&MediaSource.isTypeSupported(z)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(z)?Z(!0):Z(!1)}else Z(!1)})}(_)},setEncryptedMediaSupported:function(_){x=_},supportsEssentialProperty:function(_){try{return C.Y.indexOf(_.schemeIdUri)!==-1||y.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var R,Z=_.split(".")[0],z=I.indexOf(Z)===0,W=0;W<v.length;W++)if(v[W].codec===Z){R=v[W];break}return R?z||R.compatibleCodecs.some(function($){return I.indexOf($)===0}):z}},x=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=F.Z.getSingletonFactory(m)},2295:function(b,g,w){var F=w(5448),C=w(3106);function y(){return{customTimeRangeArray:[],length:0,add:function(v,D){var m;for(m=0;m<this.customTimeRangeArray.length&&v>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:v,end:D}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(v,D){for(var m=0;m<this.customTimeRangeArray.length;m++)if(v<=this.customTimeRangeArray[m].start&&D>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(v>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:D,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=v;break}v>this.customTimeRangeArray[m].start&&v<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=v:D>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=D)}this.length=this.customTimeRangeArray.length},mergeRanges:function(v,D){var m=this.customTimeRangeArray[v],T=this.customTimeRangeArray[D];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(v,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(D,1),!0)},start:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].start},end:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].end}}}y.__dashjs_factory_name="CustomTimeRanges",g.Z=F.Z.getClassFactory(y)},5:function(b,g,w){var F=w(5448);function C(){var y,v=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function($,le){try{return new window.URL($,le).toString()}catch(N){return $}},x=function($,le){var N=_;if(!le||!Z($))return $;z($)&&(N=I),W($)&&(N=R);var X=N(le),ce=X.charAt(X.length-1)!=="/"&&$.charAt(0)!=="/"?"/":"";return[X,$].join(ce)};function _($){var le=$.indexOf("/"),N=$.lastIndexOf("/");return le!==-1?N===le+1?$:($.indexOf("?")!==-1&&($=$.substring(0,$.indexOf("?"))),$.substring(0,N+1)):""}function I($){var le=$.match(T);return le?le[1]:""}function R($){var le=$.match(v);return le?le[0]:""}function Z($){return!v.test($)}function z($){return Z($)&&$.charAt(0)==="/"}function W($){return $.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),y=U}catch($){}finally{y=y||x}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:R,isRelative:Z,isPathAbsolute:z,isSchemeRelative:W,isHTTPURL:function($){return D.test($)},isHTTPS:function($){return m.test($)},removeHostname:function($){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec($)[2].substring(1)},resolve:function($,le){return y($,le)}}}C.__dashjs_factory_name="DefaultURLUtils",g.Z=F.Z.getSingletonFactory(C)},8260:function(b,g,w){var F=w(2839),C=w(5448);function y(){var v;function D(T){var U=[];if(!T||!v||typeof v.fetchAll!="function")return U;for(var x,_=v.fetchAll(T),I=0,R=_.length;I<R;I++)(x=m(_[I]))&&U.push(x);return U}function m(T){if(!T)return null;var U=new F.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&v&&v.boxes&&v.boxes.length!==0&&typeof v.fetch=="function"?m(v.fetch(T)):null},getBoxes:D,setData:function(T){v=T},getLastBox:function(){if(!v||!v.boxes||!v.boxes.length)return null;var T=D(v.boxes[v.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}y.__dashjs_factory_name="IsoFile",g.Z=C.Z.getClassFactory(y)},7473:function(b,g,w){w.d(g,{k:function(){return C}});var F=w(5448);function C(v,D){var m={url:v.url,method:v.method,headers:Object.assign({},v.headers),credentials:v.withCredentials?"include":void 0,range:v.request.range};return Promise.resolve(D.modifyRequest(m)).then(function(){return Object.assign(v,m,{withCredentials:m.credentials==="include"})})}function y(){return{modifyRequest:null,modifyRequestURL:function(v){return v},modifyRequestHeader:function(v,D){return D.url,v}}}y.__dashjs_factory_name="RequestModifier",g.Z=F.Z.getSingletonFactory(y)},3106:function(b,g,w){w.d(g,{PS:function(){return y},SE:function(){return v}});var F=w(3393);function C(D){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},C(D)}function y(D,m){if(C(D)!==m)throw F.Z.BAD_ARGUMENT_ERROR}function v(D){if(D===null||isNaN(D)||D%1!=0)throw F.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(b,g,w){var F=w(5448),C=w(5);function y(){var D,m=[],T=this.context;function U(x,_,I){var R=function(Z){var z;for(z=0;z<m.length;z++)if(m[z].regex.test(Z))return m[z].utils;return D}(I||_);return R&&typeof R[x]=="function"?R[x](_,I):D[x](_,I)}return D=(0,C.Z)(T).getInstance(),{registerUrlRegex:function(x,_){m.push({regex:x,utils:_})},parseBaseUrl:function(x){return U("parseBaseUrl",x)},parseOrigin:function(x){return U("parseOrigin",x)},parseScheme:function(x){return U("parseScheme",x)},isRelative:function(x){return U("isRelative",x)},isPathAbsolute:function(x){return U("isPathAbsolute",x)},isSchemeRelative:function(x){return U("isSchemeRelative",x)},isHTTPURL:function(x){return U("isHTTPURL",x)},isHTTPS:function(x){return U("isHTTPS",x)},removeHostname:function(x){return U("removeHostname",x)},resolve:function(x,_){return U("resolve",x,_)}}}y.__dashjs_factory_name="URLUtils";var v=F.Z.getSingletonFactory(y);g.Z=v},5459:function(b,g){g.Z=function w(F,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=F||null,this.message=C||null,this.data=y||null}},3186:function(b,g,w){var F=w(7855);function C(v,D){for(var m=0;m<D.length;m++){var T=D[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var y=function(){function v(T){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,v),this.action=v.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var D,m;return D=v,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===F.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?F.w.INIT_SEGMENT_TYPE:F.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&C(D.prototype,m),v}();y.ACTION_DOWNLOAD="download",y.ACTION_COMPLETE="complete",g.Z=y},2839:function(b,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var F=function(){function C(D){if(function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,C),this.offset=D._offset,this.type=D.type,this.size=D.size,this.boxes=[],D.boxes)for(var m=0;m<D.boxes.length;m++)this.boxes.push(new C(D.boxes[m]));switch(this.isComplete=!0,D.type){case"sidx":if(this.timescale=D.timescale,this.earliest_presentation_time=D.earliest_presentation_time,this.first_offset=D.first_offset,this.references=D.references,D.references){this.references=[];for(var T=0;T<D.references.length;T++){var U={reference_type:D.references[T].reference_type,referenced_size:D.references[T].referenced_size,subsegment_duration:D.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=D.id,this.version=D.version===1?1:0,this.value=D.value,this.timescale=D.timescale,this.scheme_id_uri=D.scheme_id_uri,this.presentation_time_delta=D.version===1?D.presentation_time:D.presentation_time_delta,this.event_duration=D.event_duration,this.message_data=D.message_data;break;case"mdhd":this.timescale=D.timescale;break;case"mfhd":this.sequence_number=D.sequence_number;break;case"subs":this.entry_count=D.entry_count,this.entries=D.entries;break;case"tfhd":this.base_data_offset=D.base_data_offset,this.sample_description_index=D.sample_description_index,this.default_sample_duration=D.default_sample_duration,this.default_sample_size=D.default_sample_size,this.default_sample_flags=D.default_sample_flags,this.flags=D.flags;break;case"tfdt":this.version=D.version,this.baseMediaDecodeTime=D.baseMediaDecodeTime,this.flags=D.flags;break;case"trun":if(this.sample_count=D.sample_count,this.first_sample_flags=D.first_sample_flags,this.data_offset=D.data_offset,this.flags=D.flags,this.samples=D.samples,D.samples){this.samples=[];for(var x=0,_=D.samples.length;x<_;x++){var I={sample_size:D.samples[x].sample_size,sample_duration:D.samples[x].sample_duration,sample_composition_time_offset:D.samples[x].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=D.version,this.reference_track_ID=D.reference_track_ID,this.ntp_timestamp_sec=D.ntp_timestamp_sec,this.ntp_timestamp_frac=D.ntp_timestamp_frac,this.media_time=D.media_time,this.flags=D.flags}}var y,v;return y=C,(v=[{key:"getChildBox",value:function(D){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===D)return this.boxes[m]}},{key:"getChildBoxes",value:function(D){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===D&&m.push(this.boxes[T]);return m}}])&&w(y.prototype,v),C}();g.Z=F},9597:function(b,g){g.Z=function w(F,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=F,this.found=C,this.size=y}},2128:function(b,g){g.Z=function w(){(function(F,C){if(!(F instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(b,g,w){function F(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}w.d(g,{O:function(){return y},w:function(){return C}});var C=function v(){F(this,v),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},y=function v(){F(this,v),this.s=null,this.d=null,this.b=[]};C.GET="GET",C.HEAD="HEAD",C.MPD_TYPE="MPD",C.XLINK_EXPANSION_TYPE="XLinkExpansion",C.INIT_SEGMENT_TYPE="InitializationSegment",C.INDEX_SEGMENT_TYPE="IndexSegment",C.MEDIA_SEGMENT_TYPE="MediaSegment",C.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",C.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",C.DVB_REPORTING_TYPE="DVBReporting",C.LICENSE="license",C.CONTENT_STEERING_TYPE="ContentSteering",C.OTHER_TYPE="other"},3039:function(b,g){function w(C,y){return function(v,D){for(var m,T,U,x=F(v,"tag"),_=F(D==null?"*":D,"range"),I=[],R=-1;++R<_.length;)if(m=_[R].toLowerCase(),y||m!=="*"){for(T=-1,U=[];++T<x.length;)if(C(x[T].toLowerCase(),m)){if(!y)return x[T];I.push(x[T])}else U.push(x[T]);x=U}return y?I:void 0}}function F(C,y){var v=C&&typeof C=="string"?[C]:C;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}g.basicFilter=w(function(C,y){return y==="*"||C===y||C.indexOf(y+"-")>-1},!0),g.extendedFilter=w(function(C,y){var v=C.split("-"),D=y.split("-"),m=0,T=0;if(D[T]!=="*"&&v[m]!==D[T])return!1;for(m++,T++;T<D.length;)if(D[T]!=="*"){if(!v[m])return!1;if(v[m]!==D[T]){if(v[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=w(function(C,y){for(var v,D=y;;){if(D==="*"||C===D)return!0;if((v=D.lastIndexOf("-"))<0)return!1;D.charAt(v-2)==="-"&&(v-=2),D=D.slice(0,v)}})},3973:function(b,g,w){b.exports=w(3854)},3854:function(b,g,w){var F=w(2415),C=w(3039),y=w(7778),v=w(5813),D=w(3165),m=w(9460);b.exports=function(z,W){var $,le=W||{},N=F.parse(String(z||"").toLowerCase(),le),X=F.stringify(N),ce=-1;if(!X)return X;for(;++ce<y.length;)C.extendedFilter(X,y[ce].from).length&&(_(N,y[ce].from,y[ce].to),X=F.stringify(N));for(ce=-1;++ce<v.length;)I(N,v[ce].from.field,v[ce].from.value)&&R(N,v[ce].to.field,v[ce].to.value);for(X=F.stringify(Object.assign({},N,x)),ce=-1;++ce<D.length;)X===D[ce]&&(_(N,D[ce],D[ce].split("-").slice(0,-1).join("-")),X=F.stringify(Object.assign({},N,x)));if(N.extensions.sort(Z),le.warning)for($ in m)T.call(m[$],N[$])&&le.warning("Deprecated "+$+" `"+N[$]+"`, expected one of `"+m[$][N[$]].join("`, `")+"`",null,7);return N.script&&(N.script=N.script.charAt(0).toUpperCase()+N.script.slice(1)),N.region&&(N.region=N.region.toUpperCase()),F.stringify(N)};var T={}.hasOwnProperty,U=new Intl.Collator,x={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(z,W,$){var le,N=F.parse(W),X=F.parse($),ce=[];for(le in N)N[le]&&N[le].length&&I(z,le,N[le])&&ce.push(le);for(le in X)X[le]&&X[le].length&&(ce.indexOf(le)>-1||!z[le]||!z[le].length)&&R(z,le,X[le])}function I(z,W,$){var le,N,X,ce,oe=!1;if($){if(N=le=z[W],le&&typeof le=="object")for(N=[],X=-1;++X<le.length;)ce=le[X],$.indexOf(ce)<0?N.push(ce):oe=!0;else le===$&&(N=null,oe=!0);z[W]=N}return oe}function R(z,W,$){var le,N,X,ce=z[W];if(ce&&typeof ce=="object")for(le=[].concat($),N=-1;++N<le.length;)X=le[N],ce.indexOf(X)<0&&ce.push(X);else z[W]=$}function Z(z,W){return U.compare(z.singleton,W.singleton)}},2415:function(b,g,w){g.parse=w(6903),g.stringify=w(6713)},6903:function(b,g,w){var F=w(2219),C=w(3516),y=w(395),v=w(858),D=w(8589);b.exports=function T(U,x){var _,I,R,Z=x||{},z={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},W=String(U),$=W.toLowerCase(),le=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(D,$))return(Z.normalize==null||Z.normalize)&&D[$]?T(D[$]):(z[v.indexOf($)===-1?"irregular":"regular"]=W,z);for(;C($.charCodeAt(le))&&le<9;)le++;if(le>1&&le<9){if(z.language=W.slice(0,le),le<4)for(I=0;$.charCodeAt(le)===45&&C($.charCodeAt(le+1))&&C($.charCodeAt(le+2))&&C($.charCodeAt(le+3))&&!C($.charCodeAt(le+4));){if(I>2)return N(le,3,"Too many extended language subtags, expected at most 3 subtags");z.extendedLanguageSubtags.push(W.slice(le+1,le+4)),le+=4,I++}for($.charCodeAt(le)===45&&C($.charCodeAt(le+1))&&C($.charCodeAt(le+2))&&C($.charCodeAt(le+3))&&C($.charCodeAt(le+4))&&!C($.charCodeAt(le+5))&&(z.script=W.slice(le+1,le+5),le+=5),$.charCodeAt(le)===45&&(C($.charCodeAt(le+1))&&C($.charCodeAt(le+2))&&!C($.charCodeAt(le+3))?(z.region=W.slice(le+1,le+3),le+=3):y($.charCodeAt(le+1))&&y($.charCodeAt(le+2))&&y($.charCodeAt(le+3))&&!y($.charCodeAt(le+4))&&(z.region=W.slice(le+1,le+4),le+=4));$.charCodeAt(le)===45;){for(R=_=le+1;F($.charCodeAt(R));){if(R-_>7)return N(R,1,"Too long variant, expected at most 8 characters");R++}if(!(R-_>4||R-_>3&&y($.charCodeAt(_))))break;z.variants.push(W.slice(_,R)),le=R}for(;$.charCodeAt(le)===45&&$.charCodeAt(le+1)!==120&&F($.charCodeAt(le+1))&&$.charCodeAt(le+2)===45&&F($.charCodeAt(le+3));){for(R=le+2,I=0;$.charCodeAt(R)===45&&F($.charCodeAt(R+1))&&F($.charCodeAt(R+2));)for(R=(_=R+1)+2,I++;F($.charCodeAt(R));){if(R-_>7)return N(R,2,"Too long extension, expected at most 8 characters");R++}if(!I)return N(R,4,"Empty extension, extensions must have at least 2 characters of content");z.extensions.push({singleton:W.charAt(le+1),extensions:W.slice(le+3,R).split("-")}),le=R}}else le=0;if(le===0&&$.charCodeAt(le)===120||$.charCodeAt(le)===45&&$.charCodeAt(le+1)===120)for(R=le=le?le+2:1;$.charCodeAt(R)===45&&F($.charCodeAt(R+1));){for(R=_=le+1;F($.charCodeAt(R));){if(R-_>7)return N(R,5,"Too long private-use area, expected at most 8 characters");R++}z.privateuse.push(W.slice(le+1,R)),le=R}return le!==W.length?N(le,6,"Found superfluous content after tag"):z;function N(X,ce,oe){return Z.warning&&Z.warning(oe,ce,X),Z.forgiving?z:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(b){b.exports=function(g){var w,F,C,y=g||{},v=[];if(y.irregular||y.regular)return y.irregular||y.regular;if(y.language)for(v=v.concat(y.language,y.extendedLanguageSubtags||[],y.script||[],y.region||[],y.variants||[]),w=y.extensions||[],F=-1;++F<w.length;)(C=w[F]).singleton&&C.extensions&&C.extensions.length&&(v=v.concat(C.singleton,C.extensions));return y.privateuse&&y.privateuse.length&&(v=v.concat("x",y.privateuse)),v.join("-")}},1549:function(b,g,w){var F=w(6693),C=w(2165),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(O){return+O!=O&&(O=0),m.alloc(+O)},g.INSPECT_MAX_BYTES=50;var v=2147483647;function D(O){if(O>v)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return Object.setPrototypeOf(M,m.prototype),M}function m(O,M,q){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(O)}return T(O,M,q)}function T(O,M,q){if(typeof O=="string")return function(de,He){if(typeof He=="string"&&He!==""||(He="utf8"),!m.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var Tt=0|Z(de,He),ot=D(Tt),it=ot.write(de,He);return it!==Tt&&(ot=ot.slice(0,it)),ot}(O,M);if(ArrayBuffer.isView(O))return function(de){if(Ce(de,Uint8Array)){var He=new Uint8Array(de);return I(He.buffer,He.byteOffset,He.byteLength)}return _(de)}(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Ce(O,ArrayBuffer)||O&&Ce(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(O,SharedArrayBuffer)||O&&Ce(O.buffer,SharedArrayBuffer)))return I(O,M,q);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return m.from(K,M,q);var _e=function(de){if(m.isBuffer(de)){var He=0|R(de.length),Tt=D(He);return Tt.length===0||de.copy(Tt,0,0,He),Tt}return de.length!==void 0?typeof de.length!="number"||re(de.length)?D(0):_(de):de.type==="Buffer"&&Array.isArray(de.data)?_(de.data):void 0}(O);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return m.from(O[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function U(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function x(O){return U(O),D(O<0?0:0|R(O))}function _(O){for(var M=O.length<0?0:0|R(O.length),q=D(M),K=0;K<M;K+=1)q[K]=255&O[K];return q}function I(O,M,q){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=M===void 0&&q===void 0?new Uint8Array(O):q===void 0?new Uint8Array(O,M):new Uint8Array(O,M,q),Object.setPrototypeOf(K,m.prototype),K}function R(O){if(O>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|O}function Z(O,M){if(m.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Ce(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&q===0)return 0;for(var _e=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Kt(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return _t(O).length;default:if(_e)return K?-1:Kt(O).length;M=(""+M).toLowerCase(),_e=!0}}function z(O,M,q){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return ut(this,M,q);case"utf8":case"utf-8":return Xe(this,M,q);case"ascii":return Ze(this,M,q);case"latin1":case"binary":return tt(this,M,q);case"base64":return be(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $e(this,M,q);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function W(O,M,q){var K=O[M];O[M]=O[q],O[q]=K}function $(O,M,q,K,_e){if(O.length===0)return-1;if(typeof q=="string"?(K=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),re(q=+q)&&(q=_e?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(_e)return-1;q=O.length-1}else if(q<0){if(!_e)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,K)),m.isBuffer(M))return M.length===0?-1:le(O,M,q,K,_e);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(O,M,q):Uint8Array.prototype.lastIndexOf.call(O,M,q):le(O,[M],q,K,_e);throw new TypeError("val must be string, number or Buffer")}function le(O,M,q,K,_e){var de,He=1,Tt=O.length,ot=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;He=2,Tt/=2,ot/=2,q/=2}function it(Et,Ct){return He===1?Et[Ct]:Et.readUInt16BE(Ct*He)}if(_e){var et=-1;for(de=q;de<Tt;de++)if(it(O,de)===it(M,et===-1?0:de-et)){if(et===-1&&(et=de),de-et+1===ot)return et*He}else et!==-1&&(de-=de-et),et=-1}else for(q+ot>Tt&&(q=Tt-ot),de=q;de>=0;de--){for(var ft=!0,vt=0;vt<ot;vt++)if(it(O,de+vt)!==it(M,vt)){ft=!1;break}if(ft)return de}return-1}function N(O,M,q,K){q=Number(q)||0;var _e=O.length-q;K?(K=Number(K))>_e&&(K=_e):K=_e;var de=M.length;K>de/2&&(K=de/2);for(var He=0;He<K;++He){var Tt=parseInt(M.substr(2*He,2),16);if(re(Tt))return He;O[q+He]=Tt}return He}function X(O,M,q,K){return At(Kt(M,O.length-q),O,q,K)}function ce(O,M,q,K){return At(function(_e){for(var de=[],He=0;He<_e.length;++He)de.push(255&_e.charCodeAt(He));return de}(M),O,q,K)}function oe(O,M,q,K){return At(_t(M),O,q,K)}function he(O,M,q,K){return At(function(_e,de){for(var He,Tt,ot,it=[],et=0;et<_e.length&&!((de-=2)<0);++et)Tt=(He=_e.charCodeAt(et))>>8,ot=He%256,it.push(ot),it.push(Tt);return it}(M,O.length-q),O,q,K)}function be(O,M,q){return M===0&&q===O.length?F.fromByteArray(O):F.fromByteArray(O.slice(M,q))}function Xe(O,M,q){q=Math.min(O.length,q);for(var K=[],_e=M;_e<q;){var de,He,Tt,ot,it=O[_e],et=null,ft=it>239?4:it>223?3:it>191?2:1;if(_e+ft<=q)switch(ft){case 1:it<128&&(et=it);break;case 2:(192&(de=O[_e+1]))==128&&(ot=(31&it)<<6|63&de)>127&&(et=ot);break;case 3:de=O[_e+1],He=O[_e+2],(192&de)==128&&(192&He)==128&&(ot=(15&it)<<12|(63&de)<<6|63&He)>2047&&(ot<55296||ot>57343)&&(et=ot);break;case 4:de=O[_e+1],He=O[_e+2],Tt=O[_e+3],(192&de)==128&&(192&He)==128&&(192&Tt)==128&&(ot=(15&it)<<18|(63&de)<<12|(63&He)<<6|63&Tt)>65535&&ot<1114112&&(et=ot)}et===null?(et=65533,ft=1):et>65535&&(et-=65536,K.push(et>>>10&1023|55296),et=56320|1023&et),K.push(et),_e+=ft}return function(vt){var Et=vt.length;if(Et<=Ae)return String.fromCharCode.apply(String,vt);for(var Ct="",hn=0;hn<Et;)Ct+=String.fromCharCode.apply(String,vt.slice(hn,hn+=Ae));return Ct}(K)}g.kMaxLength=v,m.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(O,M,q){return T(O,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(O,M,q){return function(K,_e,de){return U(K),K<=0?D(K):_e!==void 0?typeof de=="string"?D(K).fill(_e,de):D(K).fill(_e):D(K)}(O,M,q)},m.allocUnsafe=function(O){return x(O)},m.allocUnsafeSlow=function(O){return x(O)},m.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==m.prototype},m.compare=function(O,M){if(Ce(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),Ce(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(O)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var q=O.length,K=M.length,_e=0,de=Math.min(q,K);_e<de;++_e)if(O[_e]!==M[_e]){q=O[_e],K=M[_e];break}return q<K?-1:K<q?1:0},m.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<O.length;++q)M+=O[q].length;var K=m.allocUnsafe(M),_e=0;for(q=0;q<O.length;++q){var de=O[q];if(Ce(de,Uint8Array))_e+de.length>K.length?m.from(de).copy(K,_e):Uint8Array.prototype.set.call(K,de,_e);else{if(!m.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(K,_e)}_e+=de.length}return K},m.byteLength=Z,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)W(this,M,M+1);return this},m.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)W(this,M,M+3),W(this,M+1,M+2);return this},m.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)W(this,M,M+7),W(this,M+1,M+6),W(this,M+2,M+5),W(this,M+3,M+4);return this},m.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?Xe(this,0,O):z.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(O){if(!m.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||m.compare(this,O)===0},m.prototype.inspect=function(){var O="",M=g.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},y&&(m.prototype[y]=m.prototype.inspect),m.prototype.compare=function(O,M,q,K,_e){if(Ce(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),!m.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),q===void 0&&(q=O?O.length:0),K===void 0&&(K=0),_e===void 0&&(_e=this.length),M<0||q>O.length||K<0||_e>this.length)throw new RangeError("out of range index");if(K>=_e&&M>=q)return 0;if(K>=_e)return-1;if(M>=q)return 1;if(this===O)return 0;for(var de=(_e>>>=0)-(K>>>=0),He=(q>>>=0)-(M>>>=0),Tt=Math.min(de,He),ot=this.slice(K,_e),it=O.slice(M,q),et=0;et<Tt;++et)if(ot[et]!==it[et]){de=ot[et],He=it[et];break}return de<He?-1:He<de?1:0},m.prototype.includes=function(O,M,q){return this.indexOf(O,M,q)!==-1},m.prototype.indexOf=function(O,M,q){return $(this,O,M,q,!0)},m.prototype.lastIndexOf=function(O,M,q){return $(this,O,M,q,!1)},m.prototype.write=function(O,M,q,K){if(M===void 0)K="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")K=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,K===void 0&&(K="utf8")):(K=q,q=void 0)}var _e=this.length-M;if((q===void 0||q>_e)&&(q=_e),O.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var de=!1;;)switch(K){case"hex":return N(this,O,M,q);case"utf8":case"utf-8":return X(this,O,M,q);case"ascii":case"latin1":case"binary":return ce(this,O,M,q);case"base64":return oe(this,O,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,O,M,q);default:if(de)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),de=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ae=4096;function Ze(O,M,q){var K="";q=Math.min(O.length,q);for(var _e=M;_e<q;++_e)K+=String.fromCharCode(127&O[_e]);return K}function tt(O,M,q){var K="";q=Math.min(O.length,q);for(var _e=M;_e<q;++_e)K+=String.fromCharCode(O[_e]);return K}function ut(O,M,q){var K=O.length;(!M||M<0)&&(M=0),(!q||q<0||q>K)&&(q=K);for(var _e="",de=M;de<q;++de)_e+=Fe[O[de]];return _e}function $e(O,M,q){for(var K=O.slice(M,q),_e="",de=0;de<K.length-1;de+=2)_e+=String.fromCharCode(K[de]+256*K[de+1]);return _e}function lt(O,M,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>q)throw new RangeError("Trying to access beyond buffer length")}function wt(O,M,q,K,_e,de){if(!m.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>_e||M<de)throw new RangeError('"value" argument is out of bounds');if(q+K>O.length)throw new RangeError("Index out of range")}function Oe(O,M,q,K,_e,de){if(q+K>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Qe(O,M,q,K,_e){return M=+M,q>>>=0,_e||Oe(O,0,q,4),C.write(O,M,q,K,23,4),q+4}function ct(O,M,q,K,_e){return M=+M,q>>>=0,_e||Oe(O,0,q,8),C.write(O,M,q,K,52,8),q+8}m.prototype.slice=function(O,M){var q=this.length;(O=~~O)<0?(O+=q)<0&&(O=0):O>q&&(O=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<O&&(M=O);var K=this.subarray(O,M);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O],_e=1,de=0;++de<M&&(_e*=256);)K+=this[O+de]*_e;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O+--M],_e=1;M>0&&(_e*=256);)K+=this[O+--M]*_e;return K},m.prototype.readUint8=m.prototype.readUInt8=function(O,M){return O>>>=0,M||lt(O,1,this.length),this[O]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(O,M){return O>>>=0,M||lt(O,2,this.length),this[O]|this[O+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(O,M){return O>>>=0,M||lt(O,2,this.length),this[O]<<8|this[O+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(O,M){return O>>>=0,M||lt(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(O,M){return O>>>=0,M||lt(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},m.prototype.readIntLE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O],_e=1,de=0;++de<M&&(_e*=256);)K+=this[O+de]*_e;return K>=(_e*=128)&&(K-=Math.pow(2,8*M)),K},m.prototype.readIntBE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=M,_e=1,de=this[O+--K];K>0&&(_e*=256);)de+=this[O+--K]*_e;return de>=(_e*=128)&&(de-=Math.pow(2,8*M)),de},m.prototype.readInt8=function(O,M){return O>>>=0,M||lt(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},m.prototype.readInt16LE=function(O,M){O>>>=0,M||lt(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(O,M){O>>>=0,M||lt(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(O,M){return O>>>=0,M||lt(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},m.prototype.readInt32BE=function(O,M){return O>>>=0,M||lt(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},m.prototype.readFloatLE=function(O,M){return O>>>=0,M||lt(O,4,this.length),C.read(this,O,!0,23,4)},m.prototype.readFloatBE=function(O,M){return O>>>=0,M||lt(O,4,this.length),C.read(this,O,!1,23,4)},m.prototype.readDoubleLE=function(O,M){return O>>>=0,M||lt(O,8,this.length),C.read(this,O,!0,52,8)},m.prototype.readDoubleBE=function(O,M){return O>>>=0,M||lt(O,8,this.length),C.read(this,O,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||wt(this,O,M,q,Math.pow(2,8*q)-1,0);var _e=1,de=0;for(this[M]=255&O;++de<q&&(_e*=256);)this[M+de]=O/_e&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||wt(this,O,M,q,Math.pow(2,8*q)-1,0);var _e=q-1,de=1;for(this[M+_e]=255&O;--_e>=0&&(de*=256);)this[M+_e]=O/de&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,1,255,0),this[M]=255&O,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeIntLE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var _e=Math.pow(2,8*q-1);wt(this,O,M,q,_e-1,-_e)}var de=0,He=1,Tt=0;for(this[M]=255&O;++de<q&&(He*=256);)O<0&&Tt===0&&this[M+de-1]!==0&&(Tt=1),this[M+de]=(O/He>>0)-Tt&255;return M+q},m.prototype.writeIntBE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var _e=Math.pow(2,8*q-1);wt(this,O,M,q,_e-1,-_e)}var de=q-1,He=1,Tt=0;for(this[M+de]=255&O;--de>=0&&(He*=256);)O<0&&Tt===0&&this[M+de+1]!==0&&(Tt=1),this[M+de]=(O/He>>0)-Tt&255;return M+q},m.prototype.writeInt8=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},m.prototype.writeInt16LE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeInt16BE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeInt32LE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},m.prototype.writeInt32BE=function(O,M,q){return O=+O,M>>>=0,q||wt(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeFloatLE=function(O,M,q){return Qe(this,O,M,!0,q)},m.prototype.writeFloatBE=function(O,M,q){return Qe(this,O,M,!1,q)},m.prototype.writeDoubleLE=function(O,M,q){return ct(this,O,M,!0,q)},m.prototype.writeDoubleBE=function(O,M,q){return ct(this,O,M,!1,q)},m.prototype.copy=function(O,M,q,K){if(!m.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q||(q=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<q&&(K=q),K===q||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-q&&(K=O.length-M+q);var _e=K-q;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,K):Uint8Array.prototype.set.call(O,this.subarray(q,K),M),_e},m.prototype.fill=function(O,M,q,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,q=this.length):typeof q=="string"&&(K=q,q=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var _e=O.charCodeAt(0);(K==="utf8"&&_e<128||K==="latin1")&&(O=_e)}}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var de;if(M>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0),typeof O=="number")for(de=M;de<q;++de)this[de]=O;else{var He=m.isBuffer(O)?O:m.from(O,K),Tt=He.length;if(Tt===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(de=0;de<q-M;++de)this[de+M]=He[de%Tt]}return this};var Xt=/[^+/0-9A-Za-z-_]/g;function Kt(O,M){var q;M=M||1/0;for(var K=O.length,_e=null,de=[],He=0;He<K;++He){if((q=O.charCodeAt(He))>55295&&q<57344){if(!_e){if(q>56319){(M-=3)>-1&&de.push(239,191,189);continue}if(He+1===K){(M-=3)>-1&&de.push(239,191,189);continue}_e=q;continue}if(q<56320){(M-=3)>-1&&de.push(239,191,189),_e=q;continue}q=65536+(_e-55296<<10|q-56320)}else _e&&(M-=3)>-1&&de.push(239,191,189);if(_e=null,q<128){if((M-=1)<0)break;de.push(q)}else if(q<2048){if((M-=2)<0)break;de.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;de.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;de.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return de}function _t(O){return F.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(Xt,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function At(O,M,q,K){for(var _e=0;_e<K&&!(_e+q>=M.length||_e>=O.length);++_e)M[_e+q]=O[_e];return _e}function Ce(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function re(O){return O!=O}var Fe=function(){for(var O="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var K=16*q,_e=0;_e<16;++_e)M[K+_e]=O[q]+O[_e];return M}()},6693:function(b,g){g.byteLength=function(U){var x=m(U),_=x[0],I=x[1];return 3*(_+I)/4-I},g.toByteArray=function(U){var x,_,I=m(U),R=I[0],Z=I[1],z=new C(function(le,N,X){return 3*(N+X)/4-X}(0,R,Z)),W=0,$=Z>0?R-4:R;for(_=0;_<$;_+=4)x=F[U.charCodeAt(_)]<<18|F[U.charCodeAt(_+1)]<<12|F[U.charCodeAt(_+2)]<<6|F[U.charCodeAt(_+3)],z[W++]=x>>16&255,z[W++]=x>>8&255,z[W++]=255&x;return Z===2&&(x=F[U.charCodeAt(_)]<<2|F[U.charCodeAt(_+1)]>>4,z[W++]=255&x),Z===1&&(x=F[U.charCodeAt(_)]<<10|F[U.charCodeAt(_+1)]<<4|F[U.charCodeAt(_+2)]>>2,z[W++]=x>>8&255,z[W++]=255&x),z},g.fromByteArray=function(U){for(var x,_=U.length,I=_%3,R=[],Z=16383,z=0,W=_-I;z<W;z+=Z)R.push(T(U,z,z+Z>W?W:z+Z));return I===1?(x=U[_-1],R.push(w[x>>2]+w[x<<4&63]+"==")):I===2&&(x=(U[_-2]<<8)+U[_-1],R.push(w[x>>10]+w[x>>4&63]+w[x<<2&63]+"=")),R.join("")};for(var w=[],F=[],C=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,D=y.length;v<D;++v)w[v]=y[v],F[y.charCodeAt(v)]=v;function m(U){var x=U.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=x),[_,_===x?0:4-_%4]}function T(U,x,_){for(var I,R,Z=[],z=x;z<_;z+=3)I=(U[z]<<16&16711680)+(U[z+1]<<8&65280)+(255&U[z+2]),Z.push(w[(R=I)>>18&63]+w[R>>12&63]+w[R>>6&63]+w[63&R]);return Z.join("")}F[45]=62,F[95]=63},2165:function(b,g){g.read=function(w,F,C,y,v){var D,m,T=8*v-y-1,U=(1<<T)-1,x=U>>1,_=-7,I=C?v-1:0,R=C?-1:1,Z=w[F+I];for(I+=R,D=Z&(1<<-_)-1,Z>>=-_,_+=T;_>0;D=256*D+w[F+I],I+=R,_-=8);for(m=D&(1<<-_)-1,D>>=-_,_+=y;_>0;m=256*m+w[F+I],I+=R,_-=8);if(D===0)D=1-x;else{if(D===U)return m?NaN:1/0*(Z?-1:1);m+=Math.pow(2,y),D-=x}return(Z?-1:1)*m*Math.pow(2,D-y)},g.write=function(w,F,C,y,v,D){var m,T,U,x=8*D-v-1,_=(1<<x)-1,I=_>>1,R=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=y?0:D-1,z=y?1:-1,W=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(T=isNaN(F)?1:0,m=_):(m=Math.floor(Math.log(F)/Math.LN2),F*(U=Math.pow(2,-m))<1&&(m--,U*=2),(F+=m+I>=1?R/U:R*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(F*U-1)*Math.pow(2,v),m+=I):(T=F*Math.pow(2,I-1)*Math.pow(2,v),m=0));v>=8;w[C+Z]=255&T,Z+=z,T/=256,v-=8);for(m=m<<v|T,x+=v;x>0;w[C+Z]=255&m,Z+=z,m/=256,x-=8);w[C+Z-z]|=128*W}},6934:function(b,g){var w={parseBuffer:function(y){return new F(y).parse()},addBoxProcessor:function(y,v){typeof y=="string"&&typeof v=="function"&&(C.prototype._boxProcessors[y]=v)},createFile:function(){return new F},createBox:function(y,v,D){var m=C.create(y);return v&&v.append(m,D),m},createFullBox:function(y,v,D){var m=w.createBox(y,v,D);return m.version=0,m.flags=0,m},Utils:{}};w.Utils.dataViewToString=function(y,v){var D=v||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(D).decode(y);var m=[],T=0;if(D==="utf-8")for(;T<y.byteLength;){var U=y.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&y.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++)):(U=(7&U)<<18,U|=(63&y.getUint8(T++))<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<y.byteLength;)m.push(String.fromCharCode(y.getUint8(T++)));return m.join("")},w.Utils.utf8ToByteArray=function(y){var v,D;if(typeof TextEncoder<"u")v=new TextEncoder().encode(y);else for(v=[],D=0;D<y.length;++D){var m=y.charCodeAt(D);m<128?v.push(m):m<2048?(v.push(192|m>>6),v.push(128|63&m)):m<65536?(v.push(224|m>>12),v.push(128|63&m>>6),v.push(128|63&m)):(v.push(240|m>>18),v.push(128|63&m>>12),v.push(128|63&m>>6),v.push(128|63&m))}return v},w.Utils.appendBox=function(y,v,D){if(v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,D!==-1)if(D!=null){var m,T=-1;if(typeof D=="number")T=D;else{if(typeof D=="string")m=D;else{if(typeof D!="object"||!D.type)return void y.boxes.push(v);m=D.type}for(var U=0;U<y.boxes.length;U++)if(m===y.boxes[U].type){T=U+1;break}}y.boxes.splice(T,0,v)}else y.boxes.push(v)},g.parseBuffer=w.parseBuffer,g.addBoxProcessor=w.addBoxProcessor,g.createFile=w.createFile,g.createBox=w.createBox,g.createFullBox=w.createFullBox,g.Utils=w.Utils,w.Cursor=function(y){this.offset=y===void 0?0:y};var F=function(y){this._cursor=new w.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};F.prototype.fetch=function(y){var v=this.fetchAll(y,!0);return v.length?v[0]:null},F.prototype.fetchAll=function(y,v){var D=[];return F._sweep.call(this,y,D,v),D},F.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=C.parse(this);if(y.type===void 0)break;this.boxes.push(y)}return this},F._sweep=function(y,v,D){for(var m in this.type&&this.type==y&&v.push(this),this.boxes){if(v.length&&D)return;F._sweep.call(this.boxes[m],y,v,D)}},F.prototype.write=function(){var y,v=0;for(y=0;y<this.boxes.length;y++)v+=this.boxes[y].getLength(!1);var D=new Uint8Array(v);for(this._rawo=new DataView(D.buffer),this.bytes=D,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return D.buffer},F.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)};var C=function(){this._cursor=new w.Cursor};C.parse=function(y){var v=new C;return v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,v._parseBox(),y._cursor.offset=v._raw.byteOffset+v._raw.byteLength,v},C.create=function(y){var v=new C;return v.type=y,v.boxes=[],v},C.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],C.prototype._boxProcessors={},C.prototype._procField=function(y,v,D){this._parsing?this[y]=this._readField(v,D):this._writeField(v,D,this[y])},C.prototype._procFieldArray=function(y,v,D,m){var T;if(this._parsing)for(this[y]=[],T=0;T<v;T++)this[y][T]=this._readField(D,m);else for(T=0;T<this[y].length;T++)this._writeField(D,m,this[y][T])},C.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},C.prototype._procEntries=function(y,v,D){var m;if(this._parsing)for(this[y]=[],m=0;m<v;m++)this[y].push({}),D.call(this,this[y][m]);else for(m=0;m<v;m++)D.call(this,this[y][m])},C.prototype._procSubEntries=function(y,v,D,m){var T;if(this._parsing)for(y[v]=[],T=0;T<D;T++)y[v].push({}),m.call(this,y[v][T]);else for(T=0;T<D;T++)m.call(this,y[v][T])},C.prototype._procEntryField=function(y,v,D,m){this._parsing?y[v]=this._readField(D,m):this._writeField(D,m,y[v])},C.prototype._procSubBoxes=function(y,v){var D;if(this._parsing)for(this[y]=[],D=0;D<v;D++)this[y].push(C.parse(this));else for(D=0;D<v;D++)this._rawo?this[y][D].write():this.size+=this[y][D].getLength()},C.prototype._readField=function(y,v){switch(y){case"uint":return this._readUint(v);case"int":return this._readInt(v);case"template":return this._readTemplate(v);case"string":return v===-1?this._readTerminatedString():this._readString(v);case"data":return this._readData(v);case"utf8":return this._readUTF8String();default:return-1}},C.prototype._readInt=function(y){var v=null,D=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:v=this._raw.getInt8(D);break;case 16:v=this._raw.getInt16(D);break;case 32:v=this._raw.getInt32(D);break;case 64:var m=this._raw.getInt32(D),T=this._raw.getInt32(D+4);v=m*Math.pow(2,32)+T}return this._cursor.offset+=y>>3,v},C.prototype._readUint=function(y){var v,D,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((v=this._raw.getUint16(T))<<8)+(D=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:v=this._raw.getUint32(T),D=this._raw.getUint32(T+4),m=v*Math.pow(2,32)+D}return this._cursor.offset+=y>>3,m},C.prototype._readString=function(y){for(var v="",D=0;D<y;D++){var m=this._readUint(8);v+=String.fromCharCode(m)}return v},C.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},C.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var v=this._readUint(8);if(v===0)break;y+=String.fromCharCode(v)}return y},C.prototype._readData=function(y){var v=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(v>0){var D=new Uint8Array(this._raw.buffer,this._cursor.offset,v);return this._cursor.offset+=v,D}return null},C.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),v=null;return y>0&&(v=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),v&&w.Utils.dataViewToString(v)},C.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},C.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},C.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(C.parse(this))},C.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)},C.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},C.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},C.prototype._writeInt=function(y,v){if(this._rawo){var D=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(D,v);break;case 16:this._rawo.setInt16(D,v);break;case 32:this._rawo.setInt32(D,v);break;case 64:var m=Math.floor(v/Math.pow(2,32)),T=v-m*Math.pow(2,32);this._rawo.setUint32(D,m),this._rawo.setUint32(D+4,T)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeUint=function(y,v){if(this._rawo){var D,m,T=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(T,v);break;case 16:this._rawo.setUint16(T,v);break;case 24:D=(16776960&v)>>8,m=255&v,this._rawo.setUint16(T,D),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,v);break;case 64:m=v-(D=Math.floor(v/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,D),this._rawo.setUint32(T+4,m)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeString=function(y,v){for(var D=0;D<y;D++)this._writeUint(8,v.charCodeAt(D))},C.prototype._writeTerminatedString=function(y){if(y.length!==0){for(var v=0;v<y.length;v++)this._writeUint(8,y.charCodeAt(v));this._writeUint(8,0)}},C.prototype._writeTemplate=function(y,v){var D=Math.floor(v),m=(v-D)*Math.pow(2,y/2);this._writeUint(y/2,D),this._writeUint(y/2,m)},C.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var v=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(v+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},C.prototype._writeUTF8String=function(y){var v=w.Utils.utf8ToByteArray(y);if(this._rawo)for(var D=new DataView(this._rawo.buffer,this._cursor.offset,v.length),m=0;m<v.length;m++)D.setUint8(m,v[m]);else this.size+=v.length},C.prototype._writeField=function(y,v,D){switch(y){case"uint":this._writeUint(v,D);break;case"int":this._writeInt(v,D);break;case"template":this._writeTemplate(v,D);break;case"string":v==-1?this._writeTerminatedString(D):this._writeString(v,D);break;case"data":this._writeData(D);break;case"utf8":this._writeUTF8String(D)}},C.prototype._boxProcessors.avc1=C.prototype._boxProcessors.avc2=C.prototype._boxProcessors.avc3=C.prototype._boxProcessors.avc4=C.prototype._boxProcessors.hvc1=C.prototype._boxProcessors.hev1=C.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},C.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",this.version===1?64:32),this._procEntryField(y,"media_time","int",this.version===1?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},C.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},C.prototype._boxProcessors.free=C.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},C.prototype._boxProcessors.ftyp=C.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},C.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},C.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},C.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},C.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},C.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},C.prototype._boxProcessors.mp4a=C.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},C.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},C.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},C.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},C.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},C.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},C.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},C.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},C.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},C.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(v){this._procEntryField(v,"level","uint",8),this._procEntryField(v,"range_size","uint",24)})})},C.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},C.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_delta","uint",32)})},C.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(v){this._procEntryField(v,"subsample_size","uint",this.version===1?32:16),this._procEntryField(v,"subsample_priority","uint",8),this._procEntryField(v,"discardable","uint",8),this._procEntryField(v,"codec_specific_parameters","uint",32)})})},C.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},C.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},C.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",this.version===1?64:32),this._procEntryField(y,"moof_offset","uint",this.version===1?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},C.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},C.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors["url "]=C.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},C.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},C.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},C.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},C.prototype._boxProcessors.vtte=function(){}},5530:function(b,g,w){b.exports=w(6146).polyfill()},6146:function(b,g,w){b.exports=function(){function F(_t){return typeof _t=="function"}var C=Array.isArray?Array.isArray:function(_t){return Object.prototype.toString.call(_t)==="[object Array]"},y=0,v=void 0,D=void 0,m=function(_t,At){Z[y]=_t,Z[y+1]=At,(y+=2)===2&&(D?D(z):X())},T=typeof window<"u"?window:void 0,U=T||{},x=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function R(){var _t=setTimeout;return function(){return _t(z,1)}}var Z=new Array(1e3);function z(){for(var _t=0;_t<y;_t+=2)(0,Z[_t])(Z[_t+1]),Z[_t]=void 0,Z[_t+1]=void 0;y=0}var W,$,le,N,X=void 0;function ce(_t,At){var Ce=this,re=new this.constructor(be);re[he]===void 0&&ct(re);var Fe=Ce._state;if(Fe){var O=arguments[Fe-1];m(function(){return Oe(Fe,re,O,Ce._result)})}else lt(Ce,re,_t,At);return re}function oe(_t){if(_t&&typeof _t=="object"&&_t.constructor===this)return _t;var At=new this(be);return Ze(At,_t),At}X=_?function(){return process.nextTick(z)}:x?($=0,le=new x(z),N=document.createTextNode(""),le.observe(N,{characterData:!0}),function(){N.data=$=++$%2}):I?((W=new MessageChannel).port1.onmessage=z,function(){return W.port2.postMessage(0)}):T===void 0?function(){try{var _t=Function("return this")().require("vertx");return(v=_t.runOnLoop||_t.runOnContext)!==void 0?function(){v(z)}:R()}catch(At){return R()}}():R();var he=Math.random().toString(36).substring(2);function be(){}var Xe=void 0;function Ae(_t,At,Ce){At.constructor===_t.constructor&&Ce===ce&&At.constructor.resolve===oe?function(re,Fe){Fe._state===1?ut(re,Fe._result):Fe._state===2?$e(re,Fe._result):lt(Fe,void 0,function(O){return Ze(re,O)},function(O){return $e(re,O)})}(_t,At):Ce===void 0?ut(_t,At):F(Ce)?function(re,Fe,O){m(function(M){var q=!1,K=function(_e,de,He,Tt){try{_e.call(de,He,Tt)}catch(ot){return ot}}(O,Fe,function(_e){q||(q=!0,Fe!==_e?Ze(M,_e):ut(M,_e))},function(_e){q||(q=!0,$e(M,_e))},M._label);!q&&K&&(q=!0,$e(M,K))},re)}(_t,At,Ce):ut(_t,At)}function Ze(_t,At){if(_t===At)$e(_t,new TypeError("You cannot resolve a promise with itself"));else if(Fe=typeof(re=At),re===null||Fe!=="object"&&Fe!=="function")ut(_t,At);else{var Ce=void 0;try{Ce=At.then}catch(O){return void $e(_t,O)}Ae(_t,At,Ce)}var re,Fe}function tt(_t){_t._onerror&&_t._onerror(_t._result),wt(_t)}function ut(_t,At){_t._state===Xe&&(_t._result=At,_t._state=1,_t._subscribers.length!==0&&m(wt,_t))}function $e(_t,At){_t._state===Xe&&(_t._state=2,_t._result=At,m(tt,_t))}function lt(_t,At,Ce,re){var Fe=_t._subscribers,O=Fe.length;_t._onerror=null,Fe[O]=At,Fe[O+1]=Ce,Fe[O+2]=re,O===0&&_t._state&&m(wt,_t)}function wt(_t){var At=_t._subscribers,Ce=_t._state;if(At.length!==0){for(var re=void 0,Fe=void 0,O=_t._result,M=0;M<At.length;M+=3)re=At[M],Fe=At[M+Ce],re?Oe(Ce,re,Fe,O):Fe(O);_t._subscribers.length=0}}function Oe(_t,At,Ce,re){var Fe=F(Ce),O=void 0,M=void 0,q=!0;if(Fe){try{O=Ce(re)}catch(K){q=!1,M=K}if(At===O)return void $e(At,new TypeError("A promises callback cannot return that same promise."))}else O=re;At._state!==Xe||(Fe&&q?Ze(At,O):q===!1?$e(At,M):_t===1?ut(At,O):_t===2&&$e(At,O))}var Qe=0;function ct(_t){_t[he]=Qe++,_t._state=void 0,_t._result=void 0,_t._subscribers=[]}var Xt=function(){function _t(At,Ce){this._instanceConstructor=At,this.promise=new At(be),this.promise[he]||ct(this.promise),C(Ce)?(this.length=Ce.length,this._remaining=Ce.length,this._result=new Array(this.length),this.length===0?ut(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ce),this._remaining===0&&ut(this.promise,this._result))):$e(this.promise,new Error("Array Methods must be provided an Array"))}return _t.prototype._enumerate=function(At){for(var Ce=0;this._state===Xe&&Ce<At.length;Ce++)this._eachEntry(At[Ce],Ce)},_t.prototype._eachEntry=function(At,Ce){var re=this._instanceConstructor,Fe=re.resolve;if(Fe===oe){var O=void 0,M=void 0,q=!1;try{O=At.then}catch(_e){q=!0,M=_e}if(O===ce&&At._state!==Xe)this._settledAt(At._state,Ce,At._result);else if(typeof O!="function")this._remaining--,this._result[Ce]=At;else if(re===Kt){var K=new re(be);q?$e(K,M):Ae(K,At,O),this._willSettleAt(K,Ce)}else this._willSettleAt(new re(function(_e){return _e(At)}),Ce)}else this._willSettleAt(Fe(At),Ce)},_t.prototype._settledAt=function(At,Ce,re){var Fe=this.promise;Fe._state===Xe&&(this._remaining--,At===2?$e(Fe,re):this._result[Ce]=re),this._remaining===0&&ut(Fe,this._result)},_t.prototype._willSettleAt=function(At,Ce){var re=this;lt(At,void 0,function(Fe){return re._settledAt(1,Ce,Fe)},function(Fe){return re._settledAt(2,Ce,Fe)})},_t}(),Kt=function(){function _t(At){this[he]=Qe++,this._result=this._state=void 0,this._subscribers=[],be!==At&&(typeof At!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof _t?function(Ce,re){try{re(function(Fe){Ze(Ce,Fe)},function(Fe){$e(Ce,Fe)})}catch(Fe){$e(Ce,Fe)}}(this,At):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return _t.prototype.catch=function(At){return this.then(null,At)},_t.prototype.finally=function(At){var Ce=this,re=Ce.constructor;return F(At)?Ce.then(function(Fe){return re.resolve(At()).then(function(){return Fe})},function(Fe){return re.resolve(At()).then(function(){throw Fe})}):Ce.then(At,At)},_t}();return Kt.prototype.then=ce,Kt.all=function(_t){return new Xt(this,_t).promise},Kt.race=function(_t){var At=this;return C(_t)?new At(function(Ce,re){for(var Fe=_t.length,O=0;O<Fe;O++)At.resolve(_t[O]).then(Ce,re)}):new At(function(Ce,re){return re(new TypeError("You must pass an array to race."))})},Kt.resolve=oe,Kt.reject=function(_t){var At=new this(be);return $e(At,_t),At},Kt._setScheduler=function(_t){D=_t},Kt._setAsap=function(_t){m=_t},Kt._asap=m,Kt.polyfill=function(){var _t=void 0;if(w.g!==void 0)_t=w.g;else if(typeof self<"u")_t=self;else try{_t=Function("return this")()}catch(re){throw new Error("polyfill failed because global object is unavailable in this environment")}var At=_t.Promise;if(At){var Ce=null;try{Ce=Object.prototype.toString.call(At.resolve())}catch(re){}if(Ce==="[object Promise]"&&!At.cast)return}_t.Promise=Kt},Kt.Promise=Kt,Kt}()},1159:function(b){var g,w=typeof Reflect=="object"?Reflect:null,F=w&&typeof w.apply=="function"?w.apply:function(z,W,$){return Function.prototype.apply.call(z,W,$)};g=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var C=Number.isNaN||function(z){return z!=z};function y(){y.init.call(this)}b.exports=y,b.exports.once=function(z,W){return new Promise(function($,le){function N(ce){z.removeListener(W,X),le(ce)}function X(){typeof z.removeListener=="function"&&z.removeListener("error",N),$([].slice.call(arguments))}Z(z,W,X,{once:!0}),W!=="error"&&function(ce,oe,he){typeof ce.on=="function"&&Z(ce,"error",oe,{once:!0})}(z,N)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var v=10;function D(z){if(typeof z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}function m(z){return z._maxListeners===void 0?y.defaultMaxListeners:z._maxListeners}function T(z,W,$,le){var N,X,ce,oe;if(D($),(X=z._events)===void 0?(X=z._events=Object.create(null),z._eventsCount=0):(X.newListener!==void 0&&(z.emit("newListener",W,$.listener?$.listener:$),X=z._events),ce=X[W]),ce===void 0)ce=X[W]=$,++z._eventsCount;else if(typeof ce=="function"?ce=X[W]=le?[$,ce]:[ce,$]:le?ce.unshift($):ce.push($),(N=m(z))>0&&ce.length>N&&!ce.warned){ce.warned=!0;var he=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");he.name="MaxListenersExceededWarning",he.emitter=z,he.type=W,he.count=ce.length,oe=he,console&&console.warn&&console.warn(oe)}return z}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(z,W,$){var le={fired:!1,wrapFn:void 0,target:z,type:W,listener:$},N=U.bind(le);return N.listener=$,le.wrapFn=N,N}function _(z,W,$){var le=z._events;if(le===void 0)return[];var N=le[W];return N===void 0?[]:typeof N=="function"?$?[N.listener||N]:[N]:$?function(X){for(var ce=new Array(X.length),oe=0;oe<ce.length;++oe)ce[oe]=X[oe].listener||X[oe];return ce}(N):R(N,N.length)}function I(z){var W=this._events;if(W!==void 0){var $=W[z];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}function R(z,W){for(var $=new Array(W),le=0;le<W;++le)$[le]=z[le];return $}function Z(z,W,$,le){if(typeof z.on=="function")le.once?z.once(W,$):z.on(W,$);else{if(typeof z.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z);z.addEventListener(W,function N(X){le.once&&z.removeEventListener(W,N),$(X)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(z){if(typeof z!="number"||z<0||C(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");v=z}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||C(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(z){for(var W=[],$=1;$<arguments.length;$++)W.push(arguments[$]);var le=z==="error",N=this._events;if(N!==void 0)le=le&&N.error===void 0;else if(!le)return!1;if(le){var X;if(W.length>0&&(X=W[0]),X instanceof Error)throw X;var ce=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ce.context=X,ce}var oe=N[z];if(oe===void 0)return!1;if(typeof oe=="function")F(oe,this,W);else{var he=oe.length,be=R(oe,he);for($=0;$<he;++$)F(be[$],this,W)}return!0},y.prototype.addListener=function(z,W){return T(this,z,W,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(z,W){return T(this,z,W,!0)},y.prototype.once=function(z,W){return D(W),this.on(z,x(this,z,W)),this},y.prototype.prependOnceListener=function(z,W){return D(W),this.prependListener(z,x(this,z,W)),this},y.prototype.removeListener=function(z,W){var $,le,N,X,ce;if(D(W),(le=this._events)===void 0)return this;if(($=le[z])===void 0)return this;if($===W||$.listener===W)--this._eventsCount==0?this._events=Object.create(null):(delete le[z],le.removeListener&&this.emit("removeListener",z,$.listener||W));else if(typeof $!="function"){for(N=-1,X=$.length-1;X>=0;X--)if($[X]===W||$[X].listener===W){ce=$[X].listener,N=X;break}if(N<0)return this;N===0?$.shift():function(oe,he){for(;he+1<oe.length;he++)oe[he]=oe[he+1];oe.pop()}($,N),$.length===1&&(le[z]=$[0]),le.removeListener!==void 0&&this.emit("removeListener",z,ce||W)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(z){var W,$,le;if(($=this._events)===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[z]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete $[z]),this;if(arguments.length===0){var N,X=Object.keys($);for(le=0;le<X.length;++le)(N=X[le])!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(W=$[z])=="function")this.removeListener(z,W);else if(W!==void 0)for(le=W.length-1;le>=0;le--)this.removeListener(z,W[le]);return this},y.prototype.listeners=function(z){return _(this,z,!0)},y.prototype.rawListeners=function(z){return _(this,z,!1)},y.listenerCount=function(z,W){return typeof z.listenerCount=="function"?z.listenerCount(W):I.call(z,W)},y.prototype.listenerCount=I,y.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(b){var g=Array.isArray,w=Object.keys,F=Object.prototype.hasOwnProperty;b.exports=function C(y,v){if(y===v)return!0;if(y&&v&&typeof y=="object"&&typeof v=="object"){var D,m,T,U=g(y),x=g(v);if(U&&x){if((m=y.length)!=v.length)return!1;for(D=m;D--!=0;)if(!C(y[D],v[D]))return!1;return!0}if(U!=x)return!1;var _=y instanceof Date,I=v instanceof Date;if(_!=I)return!1;if(_&&I)return y.getTime()==v.getTime();var R=y instanceof RegExp,Z=v instanceof RegExp;if(R!=Z)return!1;if(R&&Z)return y.toString()==v.toString();var z=w(y);if((m=z.length)!==w(v).length)return!1;for(D=m;D--!=0;)if(!F.call(v,z[D]))return!1;for(D=m;D--!=0;)if(!C(y[T=z[D]],v[T]))return!1;return!0}return y!=y&&v!=v}},3362:function(b,g,w){(function(F,C,y,v,D){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[v.byName.ruby.qname]:null,K=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),_e=M.contents.length-1;_e>=0;_e--)!K||"styleAttrs"in M.contents[_e]&&v.byName.ruby.qname in M.contents[_e].styleAttrs?m(M.contents[_e]):delete M.contents[_e]}function T(M,q,K,_e){var de=_e&&_e.timeContainer==="seq",He=0;_e&&(He=de&&K?K.end:_e.begin),q.begin=q.explicit_begin?q.explicit_begin+He:He;var Tt=q.begin,ot=null;if("sets"in q)for(var it=0;it<q.sets.length;it++)T(M,q.sets[it],ot,q),Tt=q.timeContainer==="seq"?q.sets[it].end:Math.max(Tt,q.sets[it].end),ot=q.sets[it];if("contents"in q){if("contents"in q)for(var et=0;et<q.contents.length;et++)T(M,q.contents[et],ot,q),Tt=q.timeContainer==="seq"?q.contents[et].end:Math.max(Tt,q.contents[et].end),ot=q.contents[et]}else Tt=de?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,He+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=He+q.explicit_end:q.end=Tt,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function U(M){this.node=M}function x(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new z}function I(){this.styles={},this.initials={}}function R(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function Z(){this.styleAttrs=null}function z(){this.regions={}}function W(M,q){$.call(this,"image"),this.src=M,this.type=q}function $(M){this.kind=M}function le(M){this.id=M}function N(M){this.regionID=M}function X(M){this.styleAttrs=M}function ce(M){this.sets=M}function oe(M){this.contents=M}function he(M,q,K){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=K}function be(){$.call(this,"body")}function Xe(){$.call(this,"div")}function Ae(){$.call(this,"p")}function Ze(){$.call(this,"span")}function tt(){$.call(this,"span")}function ut(){$.call(this,"br")}function $e(){}function lt(){}function wt(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function Oe(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function Qe(M,q){var K={};if(M!==null)for(var _e in M.attributes){var de=M.attributes[_e].uri+" "+M.attributes[_e].local,He=v.byQName[de];if(He!==void 0){var Tt=He.parse(M.attributes[_e].value);Tt!==null?(K[de]=Tt,He===v.byName.zIndex&&Ce(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):re(q,"Cannot parse styling attribute "+de+" --> "+M.attributes[_e].value)}}return K}function ct(M,q,K){for(var _e in M.attributes)if(M.attributes[_e].uri===q&&M.attributes[_e].local===K)return M.attributes[_e].value;return null}function Xt(M,q,K){var _e,de=null;return(_e=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?q!==null&&(de=parseFloat(_e[1])/q):(_e=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?M!==null&&(de=parseFloat(_e[1])/M):(_e=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?de=parseFloat(_e[1])/1e3:(_e=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?de=parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?de=3600*parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?de=60*parseFloat(_e[1]):(_e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?de=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseFloat(_e[3]):(_e=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&q!==null&&(de=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseInt(_e[3])+(_e[4]===null?0:parseInt(_e[4])/q)),de}function Kt(M,q,K){for(;q.styleRefs.length>0;){var _e=q.styleRefs.pop();_e in M.styles?(Kt(M,M.styles[_e],K),At(M.styles[_e].styleAttrs,q.styleAttrs)):re(K,"Non-existant style id referenced")}}function _t(M,q,K,_e){for(var de=q.length-1;de>=0;de--){var He=q[de];He in M.styles?At(M.styles[He].styleAttrs,K):re(_e,"Non-existant style id referenced")}}function At(M,q){for(var K in M)M.hasOwnProperty(K)&&(K in q||(q[K]=M[K]))}function Ce(M,q){if(M&&M.warn&&M.warn(q))throw q}function re(M,q){if(M&&M.error&&M.error(q))throw q}function Fe(M,q){throw M&&M.fatal&&M.fatal(q),q}function O(M,q){for(var K,_e=0,de=M.length-1;_e<=de;){var He=M[K=Math.floor((_e+de)/2)];if(He<q)_e=K+1;else{if(!(He>q))return{found:!0,index:K};de=K-1}}return{found:!1,index:_e}}F.fromXML=function(M,q,K){var _e=C.parser(!0,{xmlns:!0}),de=[],He=[],Tt=[],ot=0,it=null;_e.onclosetag=function(Ct){if(de[0]instanceof $e)it.head!==null&&it.head.styling!==null&&_t(it.head.styling,de[0].styleRefs,de[0].styleAttrs,q),delete de[0].styleRefs;else if(de[0]instanceof I)for(var hn in de[0].styles)de[0].styles.hasOwnProperty(hn)&&Kt(de[0],de[0].styles[hn],q);else if(de[0]instanceof Ae||de[0]instanceof Ze){if(de[0].contents.length>1){var Qt,nn=[de[0].contents[0]];for(Qt=1;Qt<de[0].contents.length;Qt++)de[0].contents[Qt]instanceof tt&&nn[nn.length-1]instanceof tt?nn[nn.length-1].text+=de[0].contents[Qt].text:nn.push(de[0].contents[Qt]);de[0].contents=nn}de[0]instanceof Ze&&de[0].contents.length===1&&de[0].contents[0]instanceof tt&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof U&&(de[0].node.uri===y.ns_tt&&de[0].node.local==="metadata"?ot--:ot>0&&K&&"onCloseTag"in K&&K.onCloseTag());Tt.shift(),He.shift(),de.shift()},_e.ontext=function(Ct){if(de[0]!==void 0)if(de[0]instanceof Ze||de[0]instanceof Ae){if(de[0]instanceof Ze){var hn=de[0].styleAttrs[v.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var Qt=new tt;Qt.initFromText(it,de[0],Ct,He[0],Tt[0],q),de[0].contents.push(Qt)}else de[0]instanceof U&&ot>0&&K&&"onText"in K&&K.onText(Ct)},_e.onopentag=function(Ct){var hn=Ct.attributes["xml:space"];hn?Tt.unshift(hn.value):Tt.length===0?Tt.unshift("default"):Tt.unshift(Tt[0]);var Qt=Ct.attributes["xml:lang"];if(Qt?He.unshift(Qt.value):He.length===0?He.unshift(""):He.unshift(He[0]),Ct.uri===y.ns_tt)if(Ct.local==="tt")it!==null&&Fe(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(it=new x).initFromNode(Ct,He[0],q),de.unshift(it);else if(Ct.local==="head")de[0]instanceof x||Fe(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(it.head);else if(Ct.local==="styling")de[0]instanceof _||Fe(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(it.head.styling);else if(Ct.local==="style"){var nn;de[0]instanceof I?((nn=new R).initFromNode(Ct,q),nn.id?it.head.styling.styles[nn.id]=nn:re(q,"<style> element missing @id attribute"),de.unshift(nn)):de[0]instanceof $e?((nn=new R).initFromNode(Ct,q),At(nn.styleAttrs,de[0].styleAttrs),de.unshift(nn)):Fe(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Ct.local==="initial"){var Ot;if(de[0]instanceof I){for(var Un in(Ot=new Z).initFromNode(Ct,q),Ot.styleAttrs)Ot.styleAttrs.hasOwnProperty(Un)&&(it.head.styling.initials[Un]=Ot.styleAttrs[Un]);de.unshift(Ot)}else Fe(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Ct.local==="layout")de[0]instanceof _||Fe(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(it.head.layout);else if(Ct.local==="region"){de[0]instanceof z||Fe(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new $e;gr.initFromNode(it,Ct,He[0],q),!gr.id||gr.id in it.head.layout.regions?re(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):it.head.layout.regions[gr.id]=gr,de.unshift(gr)}else if(Ct.local==="body"){de[0]instanceof x||Fe(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),it.body!==null&&Fe(q,"Second <body> element at "+this.line+","+this.column+")");var Pr=new be;Pr.initFromNode(it,Ct,He[0],q),it.body=Pr,de.unshift(Pr)}else if(Ct.local==="div"){de[0]instanceof Xe||de[0]instanceof be||Fe(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new Xe;dr.initFromNode(it,de[0],Ct,He[0],q);var ti=dr.styleAttrs[v.byName.backgroundImage.qname];ti&&(dr.contents.push(new W(ti)),delete dr.styleAttrs[v.byName.backgroundImage.qname]),de[0].contents.push(dr),de.unshift(dr)}else if(Ct.local==="image"){de[0]instanceof Xe||Fe(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var eo=new W;eo.initFromNode(it,de[0],Ct,He[0],q),de[0].contents.push(eo),de.unshift(eo)}else if(Ct.local==="p"){de[0]instanceof Xe||Fe(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Or=new Ae;Or.initFromNode(it,de[0],Ct,He[0],q),de[0].contents.push(Or),de.unshift(Or)}else if(Ct.local==="span"){de[0]instanceof Ze||de[0]instanceof Ae||Fe(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var to=new Ze;to.initFromNode(it,de[0],Ct,He[0],Tt[0],q),de[0].contents.push(to),de.unshift(to)}else if(Ct.local==="br"){de[0]instanceof Ze||de[0]instanceof Ae||Fe(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Ti=new ut;Ti.initFromNode(it,de[0],Ct,He[0],q),de[0].contents.push(Ti),de.unshift(Ti)}else if(Ct.local==="set"){de[0]instanceof Ze||de[0]instanceof Ae||de[0]instanceof Xe||de[0]instanceof be||de[0]instanceof $e||de[0]instanceof ut||Fe(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Di=new lt;Di.initFromNode(it,de[0],Ct,q),de[0].sets.push(Di),de.unshift(Di)}else de.unshift(new U(Ct));else de.unshift(new U(Ct));if(de[0]instanceof U){if(Ct.uri===y.ns_tt&&Ct.local==="metadata")ot++;else if(ot>0&&K&&"onOpenTag"in K){var zi=[];for(var no in Ct.attributes)zi[Ct.attributes[no].uri+" "+Ct.attributes[no].local]={uri:Ct.attributes[no].uri,local:Ct.attributes[no].local,value:Ct.attributes[no].value};K.onOpenTag(Ct.uri,Ct.local,zi)}}},_e.write(M).close(),delete it.head.styling.styles;var et=!1;for(var ft in it.head.layout.regions)if(it.head.layout.regions.hasOwnProperty(ft)){et=!0;break}if(!et){var vt=$e.prototype.createDefaultRegion(it.lang);it.head.layout.regions[vt.id]=vt}for(var Et in it.head.layout.regions)it.head.layout.regions.hasOwnProperty(Et)&&T(it,it.head.layout.regions[Et],null,null);return it.body&&T(it,it.body,null,null),it.body&&m(it.body),it},x.prototype.initFromNode=function(M,q,K){var _e=function(ot,it){var et=ct(ot,y.ns_ttp,"cellResolution"),ft=15,vt=32;if(et!==null){var Et=/(\d+) (\d+)/.exec(et);Et!==null?(vt=parseInt(Et[1]),ft=parseInt(Et[2])):Ce(it,"Malformed cellResolution value (using initial value instead)")}return{w:vt,h:ft}}(M,K);this.cellLength={h:new D.ComputedLength(0,1/_e.h),w:new D.ComputedLength(1/_e.w,0)};var de=function(ot,it){var et,ft=ct(ot,y.ns_ttp,"frameRate"),vt=30;ft!==null&&((et=/(\d+)/.exec(ft))!==null?vt=parseInt(et[1]):Ce(it,"Malformed frame rate attribute (using initial value instead)"));var Et=ct(ot,y.ns_ttp,"frameRateMultiplier"),Ct=1;Et!==null&&((et=/(\d+) (\d+)/.exec(Et))!==null?Ct=parseInt(et[1])/parseInt(et[2]):Ce(it,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=Ct*vt,Qt=1,nn=ct(ot,y.ns_ttp,"tickRate");return nn===null?ft!==null&&(Qt=hn):(et=/(\d+)/.exec(nn))!==null?Qt=parseInt(et[1]):Ce(it,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:Qt}}(M,K);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=function(ot,it){var et=ct(ot,y.ns_ittp,"aspectRatio");et===null&&(et=ct(ot,y.ns_ttp,"displayAspectRatio"));var ft=null;if(et!==null){var vt=/(\d+)\s+(\d+)/.exec(et);if(vt!==null){var Et=parseInt(vt[1]),Ct=parseInt(vt[2]);Et!==0&&Ct!==0?ft=Et/Ct:re(it,"Illegal aspectRatio values (ignoring)")}else re(it,"Malformed aspectRatio attribute (ignoring)")}return ft}(M,K);var He=ct(M,y.ns_ttp,"timeBase");He!==null&&He!=="media"&&Fe(K,"Unsupported time base");var Tt=function(ot,it){var et=ct(ot,y.ns_tts,"extent");if(et===null)return null;var ft=et.split(" ");if(ft.length!==2)return Ce(it,"Malformed extent (ignoring)"),null;var vt=D.parseLength(ft[0]),Et=D.parseLength(ft[1]);return Et&&vt?{h:Et,w:vt}:(Ce(it,"Malformed extent values (ignoring)"),null)}(M,K);Tt===null?this.pxLength={h:null,w:null}:(Tt.h.unit==="px"&&Tt.w.unit==="px"||Fe(K,"Extent on TT must be in px or absent"),this.pxLength={h:new D.ComputedLength(0,1/Tt.h.value),w:new D.ComputedLength(1/Tt.w.value,0)}),this.dimensions={h:new D.ComputedLength(0,1),w:new D.ComputedLength(1,0)},this.lang=q},x.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=O(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var K=O(this.events,M.end);K.found||this.events.splice(K.index,0,M.end)}}},x.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},x.prototype.getMediaTimeEvents=function(){return this.events},R.prototype.initFromNode=function(M,q){this.id=wt(M),this.styleAttrs=Qe(M,q),this.styleRefs=Oe(M)},Z.prototype.initFromNode=function(M,q){for(var K in this.styleAttrs={},M.attributes)if(M.attributes[K].uri===y.ns_itts||M.attributes[K].uri===y.ns_ebutts||M.attributes[K].uri===y.ns_tts){var _e=M.attributes[K].uri+" "+M.attributes[K].local;this.styleAttrs[_e]=M.attributes[K].value}},W.prototype.initFromNode=function(M,q,K,_e,de){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||re(de,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||re(de,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),N.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},le.prototype.initFromNode=function(M,q,K,_e){this.id=wt(K)},N.prototype.initFromNode=function(M,q,K,_e){this.regionID=function(de){return de&&"region"in de.attributes?de.attributes.region.value:""}(K)},X.prototype.initFromNode=function(M,q,K,_e){this.styleAttrs=Qe(K,_e),M.head!==null&&M.head.styling!==null&&_t(M.head.styling,Oe(K),this.styleAttrs,_e)},ce.prototype.initFromNode=function(M,q,K,_e){this.sets=[]},oe.prototype.initFromNode=function(M,q,K,_e){this.contents=[]},he.prototype.initFromNode=function(M,q,K,_e){var de=function(He,Tt,ot,it){var et=null;ot&&"begin"in ot.attributes&&(et=Xt(He.tickRate,He.effectiveFrameRate,ot.attributes.begin.value))===null&&Ce(it,"Malformed begin value "+ot.attributes.begin.value+" (using 0)");var ft=null;ot&&"dur"in ot.attributes&&(ft=Xt(He.tickRate,He.effectiveFrameRate,ot.attributes.dur.value))===null&&Ce(it,"Malformed dur value "+ot.attributes.dur.value+" (ignoring)");var vt=null;return ot&&"end"in ot.attributes&&(vt=Xt(He.tickRate,He.effectiveFrameRate,ot.attributes.end.value))===null&&Ce(it,"Malformed end value (ignoring)"),{explicit_begin:et,explicit_end:vt,explicit_dur:ft}}(M,0,K,_e);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=function(He,Tt){var ot=He&&"timeContainer"in He.attributes?He.attributes.timeContainer.value:null;return ot&&ot!=="par"?ot==="seq"?"seq":(re(Tt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,_e)},be.prototype.initFromNode=function(M,q,K,_e){X.prototype.initFromNode.call(this,M,null,q,_e),he.prototype.initFromNode.call(this,M,null,q,_e),ce.prototype.initFromNode.call(this,M,null,q,_e),N.prototype.initFromNode.call(this,M,null,q,_e),oe.prototype.initFromNode.call(this,M,null,q,_e),this.lang=K},Xe.prototype.initFromNode=function(M,q,K,_e,de){X.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),N.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},Ae.prototype.initFromNode=function(M,q,K,_e,de){X.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),N.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},Ze.prototype.initFromNode=function(M,q,K,_e,de,He){X.prototype.initFromNode.call(this,M,q,K,He),he.prototype.initFromNode.call(this,M,q,K,He),ce.prototype.initFromNode.call(this,M,q,K,He),N.prototype.initFromNode.call(this,M,q,K,He),oe.prototype.initFromNode.call(this,M,q,K,He),this.space=de,this.lang=_e},tt.prototype.initFromText=function(M,q,K,_e,de,He){he.prototype.initFromNode.call(this,M,q,null,He),this.text=K,this.space=de,this.lang=_e},ut.prototype.initFromNode=function(M,q,K,_e,de){N.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},$e.prototype.createDefaultRegion=function(M){var q=new $e;return le.call(q,""),X.call(q,{}),ce.call(q,[]),he.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},$e.prototype.initFromNode=function(M,q,K,_e){le.prototype.initFromNode.call(this,M,null,q,_e),he.prototype.initFromNode.call(this,M,null,q,_e),ce.prototype.initFromNode.call(this,M,null,q,_e),this.styleAttrs=Qe(q,_e),this.styleRefs=Oe(q),this.lang=K},lt.prototype.initFromNode=function(M,q,K,_e){he.prototype.initFromNode.call(this,M,q,K,_e);var de=Qe(K,_e);for(var He in this.qname=null,this.value=null,de)if(de.hasOwnProperty(He)){if(this.qname){re(_e,"More than one style specified on set");break}this.qname=He,this.value=de[He]}}})(g,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(b,g,w){var F=/firefox/i.test(navigator.userAgent);(function(C,y,v){function D(oe,he,be,Xe){var Ae;if(be.kind==="region")(Ae=document.createElement("div")).style.position="absolute";else if(be.kind==="body")Ae=document.createElement("div");else if(be.kind==="div")Ae=document.createElement("div");else if(be.kind==="image"){if(Ae=document.createElement("img"),oe.imgResolver!==null&&be.src!==null){var Ze=oe.imgResolver(be.src,Ae);Ze&&(Ae.src=Ze),Ae.height=oe.regionH,Ae.width=oe.regionW}}else if(be.kind==="p")Ae=document.createElement("p");else if(be.kind==="span")if(be.styleAttrs[v.byName.ruby.qname]==="container")Ae=document.createElement("ruby"),oe.ruby=!0;else if(be.styleAttrs[v.byName.ruby.qname]==="base")Ae=document.createElement("span");else if(be.styleAttrs[v.byName.ruby.qname]==="text")Ae=document.createElement("rt");else if(be.styleAttrs[v.byName.ruby.qname]==="baseContainer")Ae=document.createElement("rbc");else if(be.styleAttrs[v.byName.ruby.qname]==="textContainer")Ae=document.createElement("rtc");else{if(be.styleAttrs[v.byName.ruby.qname]==="delimiter")return;Ae=document.createElement("span")}else be.kind==="br"&&(Ae=document.createElement("br"));if(Ae){if(be.lang&&(be.kind!=="region"&&be.lang===Xe.lang||(Ae.lang=be.lang)),he.appendChild(Ae),Ae.style.margin="0",be.kind==="region"){var tt=be.styleAttrs[v.byName.writingMode.qname];tt==="lrtb"||tt==="lr"?(oe.ipd="lr",oe.bpd="tb"):tt==="rltb"||tt==="rl"?(oe.ipd="rl",oe.bpd="tb"):tt==="tblr"?(oe.ipd="tb",oe.bpd="lr"):tt!=="tbrl"&&tt!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(be.kind==="p"&&oe.bpd==="tb"){var ut=be.styleAttrs[v.byName.direction.qname];oe.ipd=ut==="ltr"?"lr":"rl"}for(var $e=0;$e<Z.length;$e++){var lt=Z[$e],wt=be.styleAttrs[lt.qname];wt!==void 0&&lt.map!==null&&lt.map(oe,Ae,be,wt)}var Oe=Ae,Qe=be.styleAttrs[v.byName.linePadding.qname];if(Qe&&!Qe.isZero()){var ct=Qe.toUsedLength(oe.w,oe.h);if(ct>0){var Xt=Math.ceil(ct)+"px";oe.bpd==="tb"?(Oe.style.paddingLeft=Xt,Oe.style.paddingRight=Xt):(Oe.style.paddingTop=Xt,Oe.style.paddingBottom=Xt),oe.lp=Qe}}var Kt=be.styleAttrs[v.byName.multiRowAlign.qname];if(Kt&&Kt!=="auto"){var _t=document.createElement("span");_t.style.display="inline-block",_t.style.textAlign=Kt,Ae.appendChild(_t),Oe=_t,oe.mra=Kt}var At=be.styleAttrs[v.byName.rubyReserve.qname];if(At&&At[0]!=="none"&&(oe.rubyReserve=At),be.styleAttrs[v.byName.fillLineGap.qname]&&(oe.flg=!0),be.kind==="span"&&be.text){var Ce=be.styleAttrs[v.byName.textEmphasis.qname];if(Ce&&Ce.style!=="none"&&(oe.textEmphasis=!0),v.byName.textCombine.qname in be.styleAttrs&&be.styleAttrs[v.byName.textCombine.qname]==="all")Ae.textContent=be.text,Ae._isd_element=be,Ce&&I(oe,Ae,0,Ce);else for(var re="",Fe=0;Fe<be.text.length;Fe++){re+=be.text.charAt(Fe);var O=be.text.charCodeAt(Fe);if(O<55296||O>56319||Fe===be.text.length-1){var M=document.createElement("span");M.textContent=re,Ce&&I(oe,M,0,Ce),Ae.appendChild(M),re="",M._isd_element=be}}}if("contents"in be)for(var q=0;q<be.contents.length;q++)D(oe,Oe,be.contents[q],be);var K=[];if(be.kind==="p"&&(_(oe,Oe,K,null),oe.rubyReserve&&(function(ot,it){for(var et=0;et<ot.length;et++){var ft,vt,Et=document.createElement("ruby"),Ct=document.createElement("span");Ct.textContent="​",Et.appendChild(Ct);var hn,Qt=it.rubyReserve[1].toUsedLength(it.w,it.h)+"px";it.rubyReserve[0]==="both"||it.rubyReserve[0]==="outside"&&ot.length==1?((ft=document.createElement("rtc")).style[le]=$?"after":"under",ft.textContent="​",ft.style.fontSize=Qt,(vt=document.createElement("rtc")).style[le]=$?"before":"over",vt.textContent="​",vt.style.fontSize=Qt,Et.appendChild(ft),Et.appendChild(vt)):((ft=document.createElement("rtc")).textContent="​",ft.style.fontSize=Qt,hn=it.rubyReserve[0]==="after"||it.rubyReserve[0]==="outside"&&et>0?$?"after":it.bpd==="tb"||it.bpd==="rl"?"under":"over":$?"before":it.bpd==="tb"||it.bpd==="rl"?"over":"under",ft.style[le]=hn,Et.appendChild(ft));for(var nn=null,Ot=0;Ot<ot[et].rbc.length;Ot++)if(ot[et].rbc[Ot].localName==="ruby"){nn=ot[et].rbc[Ot];for(var Un=0;Un<nn.style.length;Un++)Et.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||ot[et].elements[0].node).parentElement.insertBefore(Et,nn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(ot,it){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].rbc.length;ft++){var vt;ot[et].rbc[ft].style[le]||(vt=$?et===0?"before":"after":it.bpd==="tb"||it.bpd==="rl"?et===0?"over":"under":et===0?"under":"over",ot[et].rbc[ft].style[le]=vt)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(ot,it){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].te.length;ft++){var vt;ot[et].te[ft].style[X]&&ot[et].te[ft].style[X]!=="none"||(vt=it.bpd==="tb"?et===0?"left over":"left under":it.bpd==="rl"?et===0?"right under":"left under":et===0?"left under":"right under",ot[et].te[ft].style[X]=vt)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(ot){for(var it=0;it<ot.length-1;it++){var et=ot[it].elements.length;if(et!==0&&ot[it].br===!1){var ft=document.createElement("br"),vt=ot[it].elements[et-1].node;vt.parentElement.insertBefore(ft,vt.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(ot,it,et){if(ot!==null)for(var ft=0;ft<ot.length;ft++){var vt=ot[ft].elements.length,Et=Math.ceil(it)+"px",Ct="-"+Math.ceil(it)+"px";if(vt!==0){var hn=ot[ft].elements[ot[ft].start_elem],Qt=ot[ft].elements[ot[ft].end_elem];if(hn===Qt){var nn=hn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}et.ipd==="lr"?(hn.node.style.marginLeft=Ct,hn.node.style.paddingLeft=Et):et.ipd==="rl"?(hn.node.style.paddingRight=Et,hn.node.style.marginRight=Ct):et.ipd==="tb"&&(hn.node.style.paddingTop=Et,hn.node.style.marginTop=Ct),et.ipd==="lr"?(F||(Qt.node.style.marginRight=Ct),Qt.node.style.paddingRight=Et):et.ipd==="rl"?(Qt.node.style.paddingLeft=Et,F||(Qt.node.style.marginLeft=Ct)):et.ipd==="tb"&&(Qt.node.style.paddingBottom=Et,Qt.node.style.marginBottom=Ct)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(ot,it){for(var et=0;et<ot.length;et++)for(var ft=ot[et],vt=1;vt<ft.elements.length;){var Et=ft.elements[vt-1],Ct=ft.elements[vt];T(Et.node,Ct.node,it)?ft.elements.splice(vt,1):vt++}for(var hn,Qt,nn=[],Ot=0;Ot<ot.length;Ot++)for(var Un=0;Un<ot[Ot].elements.length;Un++)(Qt=m(hn=ot[Ot].elements[Un].node,nn,!1))&&(hn.style.backgroundColor=Qt);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(K,oe),oe.flg)){var _e=x(Oe.getBoundingClientRect(),oe);(function(ot,it,et,ft,vt){for(var Et=Math.sign(et-it),Ct=0;Ct<=ot.length;Ct++){var hn,Qt,nn,Ot;if(hn=Ct===0?Math.round(it):Ct===ot.length?Math.round(et):Math.round((ot[Ct-1].after+ot[Ct].before)/2),Ct>0&&ot[Ct-1])for(nn=0;nn<ot[Ct-1].elements.length;nn++)Qt=Et*(hn-(Ot=ot[Ct-1].elements[nn]).after)+"px",ft.bpd==="lr"?Ot.node.style.paddingRight=Qt:ft.bpd==="rl"?Ot.node.style.paddingLeft=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingBottom=Qt);if(Ct<ot.length)for(nn=0;nn<ot[Ct].elements.length;nn++)Qt=Et*((Ot=ot[Ct].elements[nn]).before-hn)+"px",ft.bpd==="lr"?Ot.node.style.paddingLeft=Qt:ft.bpd==="rl"?Ot.node.style.paddingRight=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingTop=Qt)}})(K,_e.before,_e.after,oe),oe.flg=null}if(be.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&be.contents.length>0&&be.styleAttrs[v.byName.displayAlign.qname]==="after"){_(oe,Oe,K,null);var de=new U(be.id===""?"_":be.id,K);if(oe.currentISDState[de.id]=de,oe.previousISDState&&de.id in oe.previousISDState&&oe.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===oe.previousISDState[de.id].plist[oe.previousISDState[de.id].plist.length-1].text){var He=Ae.firstElementChild,Tt=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;He.style.bottom="-"+Tt+"px",He.style.transition="transform 0.4s",He.style.position="relative",He.style.transform="translateY(-"+Tt+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+be.kind)}function m(oe,he,be){return oe.style.backgroundColor?(be&&!he.includes(oe)&&he.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,he,!0):void 0}function T(oe,he,be){if(oe.tagName==="SPAN"&&he.tagName==="SPAN"&&oe._isd_element===he._isd_element){if(!oe._isd_element)return ce(be.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=he.textContent;for(var Xe=0;Xe<he.style.length;Xe++){var Ae=he.style[Xe];(Ae.indexOf("border")>=0||Ae.indexOf("padding")>=0||Ae.indexOf("margin")>=0)&&(oe.style[Ae]=he.style[Ae])}return he.parentElement.removeChild(he),!0}return!1}function U(oe,he){this.id=oe,this.plist=he}function x(oe,he){var be={before:null,after:null,start:null,end:null};return he.bpd==="tb"?(be.before=oe.top,be.after=oe.bottom,he.ipd==="lr"?(be.start=oe.left,be.end=oe.right):(be.start=oe.right,be.end=oe.left)):he.bpd==="lr"?(be.before=oe.left,be.after=oe.right,be.start=oe.top,be.end=oe.bottom):he.bpd==="rl"&&(be.before=oe.right,be.after=oe.left,be.start=oe.top,be.end=oe.bottom),be}function _(oe,he,be,Xe){if(he.localName!=="rt"&&he.localName!=="rtc"){var Ae,Ze,tt,ut,$e=he.style.backgroundColor||Xe;if(he.childElementCount===0)if(he.localName==="span"||he.localName==="rb"){var lt=x(he.getBoundingClientRect(),oe);if(be.length!==0&&(Ae=lt.before,Ze=lt.after,tt=be[be.length-1].before,Ze<(ut=be[be.length-1].after)&&Ae>tt||ut<=Ze&&tt>=Ae)){var wt=Math.sign(lt.after-lt.before),Oe=Math.sign(lt.end-lt.start);wt*(lt.before-be[be.length-1].before)<0&&(be[be.length-1].before=lt.before),wt*(lt.after-be[be.length-1].after)>0&&(be[be.length-1].after=lt.after),Oe*(lt.start-be[be.length-1].start)<0&&(be[be.length-1].start=lt.start,be[be.length-1].start_elem=be[be.length-1].elements.length),Oe*(lt.end-be[be.length-1].end)>0&&(be[be.length-1].end=lt.end,be[be.length-1].end_elem=be[be.length-1].elements.length)}else be.push({before:lt.before,after:lt.after,start:lt.start,end:lt.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});be[be.length-1].text+=he.textContent,be[be.length-1].elements.push({node:he,bgcolor:$e,before:lt.before,after:lt.after})}else he.localName==="br"&&be.length!==0&&(be[be.length-1].br=!0);else for(var Qe=he.firstChild;Qe;)Qe.nodeType===Node.ELEMENT_NODE&&(_(oe,Qe,be,$e),Qe.localName==="ruby"||Qe.localName==="rtc"?be.length>0&&be[be.length-1].rbc.push(Qe):Qe.localName==="span"&&Qe.style[N]&&Qe.style[N]!=="none"&&be.length>0&&be[be.length-1].te.push(Qe)),Qe=Qe.nextSibling}}function I(oe,he,be,Xe){var Ae;Xe.style!=="none"&&(Xe.style==="auto"?he.style[N]="filled":he.style[N]=Xe.style+" "+Xe.symbol,(Xe.position==="before"||Xe.position==="after")&&(Ae=oe.bpd==="tb"?Xe.position==="before"?"left over":"left under":oe.bpd==="rl"?Xe.position==="before"?"right under":"left under":Xe.position==="before"?"left under":"right under",he.style[X]=Ae))}function R(oe,he){this.qname=oe,this.map=he}C.render=function(oe,he,be,Xe,Ae,Ze,tt,ut,$e){var lt=Xe||he.clientHeight,wt=Ae||he.clientWidth;if(oe.aspectRatio!==null){var Oe=lt*oe.aspectRatio;Oe>wt?lt=Math.round(wt/oe.aspectRatio):wt=Oe}var Qe=document.createElement("div");Qe.style.position="relative",Qe.style.width=wt+"px",Qe.style.height=lt+"px",Qe.style.margin="auto",Qe.style.top=0,Qe.style.bottom=0,Qe.style.left=0,Qe.style.right=0,Qe.style.zIndex=0;var ct={h:lt,w:wt,regionH:null,regionW:null,imgResolver:be,displayForcedOnlyMode:Ze||!1,isd:oe,errorHandler:tt,previousISDState:ut,enableRollUp:$e||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(he.appendChild(Qe),"contents"in oe)for(var Xt=0;Xt<oe.contents.length;Xt++)D(ct,Qe,oe.contents[Xt],oe);return ct.currentISDState};for(var Z=[new R("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,he,be,Xe){Xe[3]!==0&&(he.style.backgroundColor="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")")}),new R("http://www.w3.org/ns/ttml#styling color",function(oe,he,be,Xe){he.style.color="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")"}),new R("http://www.w3.org/ns/ttml#styling direction",function(oe,he,be,Xe){he.style.direction=Xe}),new R("http://www.w3.org/ns/ttml#styling display",function(oe,he,be,Xe){}),new R("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,he,be,Xe){he.style.display="flex",he.style.flexDirection="column",Xe==="before"?he.style.justifyContent="flex-start":Xe==="center"?he.style.justifyContent="center":Xe==="after"&&(he.style.justifyContent="flex-end")}),new R("http://www.w3.org/ns/ttml#styling extent",function(oe,he,be,Xe){oe.regionH=Xe.h.toUsedLength(oe.w,oe.h),oe.regionW=Xe.w.toUsedLength(oe.w,oe.h);var Ae=0,Ze=0,tt=be.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];tt&&(Ae=tt[0].toUsedLength(oe.w,oe.h)+tt[2].toUsedLength(oe.w,oe.h),Ze=tt[1].toUsedLength(oe.w,oe.h)+tt[3].toUsedLength(oe.w,oe.h)),he.style.height=oe.regionH-Ae+"px",he.style.width=oe.regionW-Ze+"px"}),new R("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,he,be,Xe){for(var Ae=[],Ze=0;Ze<Xe.length;Ze++)Xe[Ze]=Xe[Ze].trim(),Xe[Ze]==="monospaceSerif"?(Ae.push("Courier New"),Ae.push('"Liberation Mono"'),Ae.push("Courier"),Ae.push("monospace")):Xe[Ze]==="proportionalSansSerif"?(Ae.push("Arial"),Ae.push("Helvetica"),Ae.push('"Liberation Sans"'),Ae.push("sans-serif")):Xe[Ze]==="monospace"?Ae.push("monospace"):Xe[Ze]==="sansSerif"?Ae.push("sans-serif"):Xe[Ze]==="serif"?Ae.push("serif"):Xe[Ze]==="monospaceSansSerif"?(Ae.push("Consolas"),Ae.push("monospace")):Xe[Ze]==="proportionalSerif"?Ae.push("serif"):Ae.push(Xe[Ze]);if(Ae.length>0){for(var tt=[Ae[0]],ut=1;ut<Ae.length;ut++)tt.indexOf(Ae[ut])==-1&&tt.push(Ae[ut]);Ae=tt}he.style.fontFamily=Ae.join(",")}),new R("http://www.w3.org/ns/ttml#styling shear",function(oe,he,be,Xe){if(Xe!==0){var Ae=-.9*Xe;oe.bpd==="tb"?he.style.transform="skewX("+Ae+"deg)":he.style.transform="skewY("+Ae+"deg)"}}),new R("http://www.w3.org/ns/ttml#styling fontSize",function(oe,he,be,Xe){he.style.fontSize=Xe.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,he,be,Xe){he.style.fontStyle=Xe}),new R("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,he,be,Xe){he.style.fontWeight=Xe}),new R("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,he,be,Xe){he.style.lineHeight=Xe==="normal"?"normal":Xe.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling opacity",function(oe,he,be,Xe){he.style.opacity=Xe}),new R("http://www.w3.org/ns/ttml#styling origin",function(oe,he,be,Xe){he.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",he.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling overflow",function(oe,he,be,Xe){he.style.overflow=Xe}),new R("http://www.w3.org/ns/ttml#styling padding",function(oe,he,be,Xe){var Ae=[];Ae[0]=Xe[0].toUsedLength(oe.w,oe.h)+"px",Ae[1]=Xe[3].toUsedLength(oe.w,oe.h)+"px",Ae[2]=Xe[2].toUsedLength(oe.w,oe.h)+"px",Ae[3]=Xe[1].toUsedLength(oe.w,oe.h)+"px",he.style.padding=Ae.join(" ")}),new R("http://www.w3.org/ns/ttml#styling position",function(oe,he,be,Xe){he.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",he.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,he,be,Xe){he.style.rubyAlign=Xe==="spaceAround"?"space-around":"center"}),new R("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,he,be,Xe){var Ae;Xe!=="before"&&Xe!=="after"||(Ae=$?Xe:oe.bpd==="tb"||oe.bpd==="rl"?Xe==="before"?"over":"under":Xe==="before"?"under":"over",he.parentElement.style[le]=Ae)}),new R("http://www.w3.org/ns/ttml#styling showBackground",null),new R("http://www.w3.org/ns/ttml#styling textAlign",function(oe,he,be,Xe){var Ae;Ae=Xe==="start"?oe.ipd==="rl"?"right":"left":Xe==="end"?oe.ipd==="rl"?"left":"right":Xe,he.style.textAlign=Ae}),new R("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,he,be,Xe){he.style.textDecoration=Xe.join(" ").replace("lineThrough","line-through")}),new R("http://www.w3.org/ns/ttml#styling textOutline",function(oe,he,be,Xe){}),new R("http://www.w3.org/ns/ttml#styling textShadow",function(oe,he,be,Xe){var Ae=be.styleAttrs[v.byName.textOutline.qname];if(Xe==="none"&&Ae==="none")he.style.textShadow="";else{var Ze=[];if(Ae!=="none"){var tt="rgba("+Ae.color[0].toString()+","+Ae.color[1].toString()+","+Ae.color[2].toString()+","+(Ae.color[3]/255).toString()+")";Ze.push("1px 1px 1px "+tt),Ze.push("-1px 1px 1px "+tt),Ze.push("1px -1px 1px "+tt),Ze.push("-1px -1px 1px "+tt)}if(Xe!=="none")for(var ut=0;ut<Xe.length;ut++)Ze.push(Xe[ut].x_off.toUsedLength(oe.w,oe.h)+"px "+Xe[ut].y_off.toUsedLength(oe.w,oe.h)+"px "+Xe[ut].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Xe[ut].color[0].toString()+","+Xe[ut].color[1].toString()+","+Xe[ut].color[2].toString()+","+(Xe[ut].color[3]/255).toString()+")");he.style.textShadow=Ze.join(",")}}),new R("http://www.w3.org/ns/ttml#styling textCombine",function(oe,he,be,Xe){he.style.textCombineUpright=Xe}),new R("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,he,be,Xe){}),new R("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,he,be,Xe){var Ae;Ae=Xe==="bidiOverride"?"bidi-override":Xe,he.style.unicodeBidi=Ae}),new R("http://www.w3.org/ns/ttml#styling visibility",function(oe,he,be,Xe){he.style.visibility=Xe}),new R("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,he,be,Xe){Xe==="wrap"?be.space==="preserve"?he.style.whiteSpace="pre-wrap":he.style.whiteSpace="normal":be.space==="preserve"?he.style.whiteSpace="pre":he.style.whiteSpace="noWrap"}),new R("http://www.w3.org/ns/ttml#styling writingMode",function(oe,he,be,Xe){Xe==="lrtb"||Xe==="lr"||Xe==="rltb"||Xe==="rl"?he.style.writingMode="horizontal-tb":Xe==="tblr"?he.style.writingMode="vertical-lr":Xe!=="tbrl"&&Xe!=="tb"||(he.style.writingMode="vertical-rl")}),new R("http://www.w3.org/ns/ttml#styling zIndex",function(oe,he,be,Xe){he.style.zIndex=Xe}),new R("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,he,be,Xe){oe.displayForcedOnlyMode&&Xe===!1&&(he.style.visibility="hidden")})],z={},W=0;W<Z.length;W++)z[Z[W].qname]=Z[W];var $="webkitRubyPosition"in window.getComputedStyle(document.documentElement),le=$?"webkitRubyPosition":"rubyPosition",N="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,he){if(oe&&oe.error&&oe.error(he))throw he}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(b,g,w){(function(F,C,y,v){F.generateISD=function(R,Z,z){var W,$=new x(R),le={},N={},X=R.head.styling.initials[y.byName.showBackground.qname],ce=R.head.styling.initials[y.byName.backgroundColor.qname];for(var oe in R.head.layout.regions)if(R.head.layout.regions.hasOwnProperty(oe)){var he=R.head.layout.regions[oe],be=he.styleAttrs[y.byName.showBackground.qname]||X,Xe=he.styleAttrs[y.byName.backgroundColor.qname]||ce;N[he.id]=(be==="always"||be===void 0)&&Xe!==void 0&&!(Z<he.begin||Z>=he.end)}for(var Ae in R.body&&R.body.regionID&&(N[R.body.regionID]=!0),W=R.body!==null?function tt(ut,$e){if($e.contents){var lt={};for(var wt in $e)$e.hasOwnProperty(wt)&&(lt[wt]=$e[wt]);return lt.contents=[],$e.contents.filter(function(Oe){return!(ut<Oe.begin||ut>=Oe.end)}).forEach(function(Oe){var Qe=tt(ut,Oe);Qe.regionID&&(N[Qe.regionID]=!0),Qe!==null&&lt.contents.push(Qe)}),lt}return $e}(Z,R.body):null,N[""]!==void 0&&(N[""]=!0),N)if(N[Ae]){var Ze=m(R,Z,R.head.layout.regions[Ae],W,null,"",R.head.layout.regions[Ae],z,le);Ze!==null&&$.contents.push(Ze.element)}return $};var D=[y.byName.color.qname,y.byName.textCombine.qname,y.byName.textDecoration.qname,y.byName.textEmphasis.qname,y.byName.textOutline.qname,y.byName.textShadow.qname];function m(R,Z,z,W,$,le,N,X,ce){if(Z<N.begin||Z>=N.end)return null;var oe="regionID"in N&&N.regionID!==""?N.regionID:le;if($!==null&&oe!==z.id&&(!("contents"in N)||"contents"in N&&N.contents.length===0||oe!==""))return null;var he=new _(N);if("sets"in N)for(var be=0;be<N.sets.length;be++)Z<N.sets[be].begin||Z>=N.sets[be].end||(he.styleAttrs[N.sets[be].qname]=N.sets[be].value);var Xe={};for(var Ae in he.styleAttrs)if(he.styleAttrs.hasOwnProperty(Ae)&&(Xe[Ae]=!0,he.kind==="region"&&Ae===y.byName.writingMode.qname&&!(y.byName.direction.qname in he.styleAttrs))){var Ze=he.styleAttrs[Ae];Ze==="lrtb"||Ze==="lr"?he.styleAttrs[y.byName.direction.qname]="ltr":Ze!=="rltb"&&Ze!=="rl"||(he.styleAttrs[y.byName.direction.qname]="rtl")}if($!==null)for(var tt=0;tt<y.all.length;tt++){var ut=y.all[tt];if(ut.qname===y.byName.textDecoration.qname){var $e=$.styleAttrs[ut.qname],lt=he.styleAttrs[ut.qname],wt=[];lt===void 0?wt=$e:lt.indexOf("none")===-1?((lt.indexOf("noUnderline")===-1&&$e.indexOf("underline")!==-1||lt.indexOf("underline")!==-1)&&wt.push("underline"),(lt.indexOf("noLineThrough")===-1&&$e.indexOf("lineThrough")!==-1||lt.indexOf("lineThrough")!==-1)&&wt.push("lineThrough"),(lt.indexOf("noOverline")===-1&&$e.indexOf("overline")!==-1||lt.indexOf("overline")!==-1)&&wt.push("overline")):wt.push("none"),he.styleAttrs[ut.qname]=wt}else if(ut.qname!==y.byName.fontSize.qname||ut.qname in he.styleAttrs||he.kind!=="span"||he.styleAttrs[y.byName.ruby.qname]!=="textContainer")if(ut.qname!==y.byName.fontSize.qname||ut.qname in he.styleAttrs||he.kind!=="span"||he.styleAttrs[y.byName.ruby.qname]!=="text")ut.inherit&&ut.qname in $.styleAttrs&&!(ut.qname in he.styleAttrs)&&(he.styleAttrs[ut.qname]=$.styleAttrs[ut.qname]);else{var Oe=$.styleAttrs[y.byName.fontSize.qname];$.styleAttrs[y.byName.ruby.qname]==="textContainer"?he.styleAttrs[ut.qname]=Oe:he.styleAttrs[ut.qname]=new v.ComputedLength(.5*Oe.rw,.5*Oe.rh)}else{var Qe=$.styleAttrs[y.byName.fontSize.qname];he.styleAttrs[ut.qname]=new v.ComputedLength(.5*Qe.rw,.5*Qe.rh)}}for(var ct=0;ct<y.all.length;ct++){var Xt=y.all[ct];if(!(Xt.qname in he.styleAttrs)&&!(Xt.qname===y.byName.position.qname&&y.byName.origin.qname in he.styleAttrs||Xt.qname===y.byName.origin.qname&&y.byName.position.qname in he.styleAttrs)){var Kt=R.head.styling.initials[Xt.qname]||Xt.initial;if(Kt!==null&&(he.kind==="region"||Xt.inherit===!1&&Kt!==null)){var _t=Xt.parse(Kt);_t!==null?(he.styleAttrs[Xt.qname]=_t,Xe[Xt.qname]=!0):I(X,"Invalid initial value for '"+Xt.qname+"' on element '"+he.kind)}}}for(var At=0;At<y.all.length;At++){var Ce=y.all[At];if(Ce.qname in Xe&&Ce.compute!==null){var re=Ce.compute(R,$,he,he.styleAttrs[Ce.qname],ce);re!==null?he.styleAttrs[Ce.qname]=re:(he.styleAttrs[Ce.qname]=Ce.compute(R,$,he,Ce.parse(Ce.initial),ce),I(X,"Style '"+Ce.qname+"' on element '"+he.kind+"' cannot be computed"))}}if(he.styleAttrs[y.byName.display.qname]==="none")return null;var Fe=null;$===null?Fe=W===null?[]:[W]:"contents"in N&&(Fe=N.contents);for(var O=0;Fe!==null&&O<Fe.length;O++){var M=m(R,Z,z,W,he,oe,Fe[O],X,ce);M!==null&&he.contents.push(M.element)}for(var q in he.styleAttrs)if(he.styleAttrs.hasOwnProperty(q)){var K=!1;if(he.kind==="span"){var _e=he.styleAttrs[y.byName.ruby.qname];(K=(_e==="container"||_e==="textContainer"||_e==="baseContainer")&&D.indexOf(q)!==-1)||(K=_e!=="container"&&q===y.byName.rubyAlign.qname),K||(K=!(_e==="textContainer"||_e==="text")&&q===y.byName.rubyPosition.qname)}if(!K){var de=y.byQName[q];"applies"in de&&(K=de.applies.indexOf(he.kind)===-1)}K&&delete he.styleAttrs[q]}var He=he.styleAttrs[y.byName.ruby.qname];if(he.kind==="p"||he.kind==="span"&&(He==="textContainer"||He==="text")){var Tt=[];T(he,Tt),function(ot){for(var it,et=0;et<ot.length;)if((it=ot[et]).kind!=="br"&&it.space!=="preserve"){var ft=it.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ft)&&(et===0||(vt=ot[et-1]).kind==="br"||/[\r\n\t ]$/.test(vt.text))&&(ft=ft.substring(1)),it.text=ft,ft.length===0?ot.splice(et,1):et++}else et++;var vt,Et;for(et=0;et<ot.length;et++)(it=ot[et]).kind!=="br"&&it.space!=="preserve"?/[ ]$/.test(it.text)&&(et===ot.length-1||(Et=ot[et+1]).kind==="br"||Et.space==="preserve"&&/^[\r\n]/.test(Et.text))&&(it.text=it.text.slice(0,-1)):et++}(Tt),U(he)}return he.kind==="div"&&y.byName.backgroundImage.qname in he.styleAttrs||he.kind==="br"||he.kind==="image"||"contents"in he&&he.contents.length>0||he.kind==="span"&&he.text!==null||he.kind==="region"&&he.styleAttrs[y.byName.showBackground.qname]==="always"?{region_id:oe,element:he}:null}function T(R,Z){if("contents"in R)for(var z=0;z<R.contents.length;z++){var W=R.contents[z],$=W.styleAttrs[y.byName.ruby.qname];(W.kind!=="span"||$!=="textContainer"&&$!=="text")&&("contents"in W?T(W,Z):(W.kind==="span"&&W.text.length!==0||W.kind==="br")&&Z.push(W))}}function U(R){if(R.kind==="br")return!1;if("text"in R)return R.text.length===0;if("contents"in R){for(var Z=R.contents.length;Z--;)U(R.contents[Z])&&R.contents.splice(Z,1);return R.contents.length===0}}function x(R){this.contents=[],this.aspectRatio=R.aspectRatio,this.lang=R.lang}function _(R){for(var Z in this.kind=R.kind||"region",this.lang=R.lang,R.id&&(this.id=R.id),this.styleAttrs={},R.styleAttrs)R.styleAttrs.hasOwnProperty(Z)&&(this.styleAttrs[Z]=R.styleAttrs[Z]);"src"in R&&(this.src=R.src),"type"in R&&(this.type=R.type),"text"in R?this.text=R.text:(this.kind==="region"||"contents"in R)&&(this.contents=[]),"space"in R&&(this.space=R.space)}function I(R,Z){if(R&&R.error&&R.error(Z))throw Z}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(b,g,w){g.generateISD=w(4080).generateISD,g.fromXML=w(3362).fromXML,g.renderHTML=w(506).render},210:function(b,g){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(b,g,w){(function(F,C,y){function v(T,U,x,_,I,R,Z,z){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=R,this.initial=x,this.applies=_,this.parse=Z,this.compute=z}for(var D in F.all=[new v(C.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,y.parseColor,null),new v(C.ns_tts,"color","white",["span"],!0,!0,y.parseColor,null),new v(C.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var R,Z;if(_==="auto")R=new y.ComputedLength(0,1);else if((R=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new y.ComputedLength(1,0);else if((Z=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:R,w:Z}}),new v(C.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),x=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?x.push("monospaceSerif"):x.push(U[_]);return x},null),new v(C.ns_tts,"shear","0%",["p"],!0,!0,y.parseLength,function(T,U,x,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new v(C.ns_tts,"fontSize","1c",["span","p"],!0,!0,y.parseLength,function(T,U,x,_,I){return y.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new v(C.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:y.parseLength(T)},function(T,U,x,_,I){var R;if(_==="normal")R=_;else if((R=y.toComputedLength(_.value,_.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return R}),new v(C.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new v(C.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var R,Z;if(_==="auto")R=new y.ComputedLength(0,0);else if((R=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new y.ComputedLength(0,0);else if((Z=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:R,w:Z}}),new v(C.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var x=[],_=0;_<U.length;_++){var I=y.parseLength(U[_]);if(!I)return null;x.push(I)}return x},function(T,U,x,_,I){var R;if(_.length===1)R=[_[0],_[0],_[0],_[0]];else if(_.length===2)R=[_[0],_[1],_[0],_[1]];else if(_.length===3)R=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;R=[_[0],_[1],_[2],_[3]]}var Z=x.styleAttrs[F.byName.writingMode.qname];if(Z==="lrtb"||Z==="lr")R=[R[0],R[3],R[2],R[1]];else if(Z==="rltb"||Z==="rl")R=[R[0],R[1],R[2],R[3]];else if(Z==="tblr")R=[R[3],R[0],R[1],R[2]];else{if(Z!=="tbrl"&&Z!=="tb")return null;R=[R[3],R[2],R[1],R[0]]}for(var z=[],W=0;W<R.length;W++)if(R[W].value===0)z[W]=new y.ComputedLength(0,0);else if(z[W]=y.toComputedLength(R[W].value,R[W].unit,x.styleAttrs[F.byName.fontSize.qname],W===0||W===2?x.styleAttrs[F.byName.extent.qname].h:x.styleAttrs[F.byName.extent.qname].w,W===0||W===2?T.cellLength.h:T.cellLength.w,W===0||W===2?T.pxLength.h:T.pxLength.w),z[W]===null)return null;return z}),new v(C.ns_tts,"position","top left",["region"],!1,!0,function(T){return y.parsePosition(T)},function(T,U,x,_){var I,R;return(I=y.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new y.ComputedLength(-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-x.styleAttrs[F.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new y.ComputedLength(-I.rw-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-x.styleAttrs[F.byName.extent.qname].h.rh)),R=y.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new y.ComputedLength(T.dimensions.w.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-x.styleAttrs[F.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(R=new y.ComputedLength(T.dimensions.w.rw-R.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-R.rh-x.styleAttrs[F.byName.extent.qname].w.rh)),{h:I,w:R}))}),new v(C.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new v(C.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),x=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(x[0]=U[0],U.length===2&&U[0]!=="none"){var _=y.parseLength(U[1]);if(!_)return null;x[1]=_}return x},function(T,U,x,_,I){if(_[0]==="none")return _;var R;return(R=_[1]===null?new y.ComputedLength(.5*x.styleAttrs[F.byName.fontSize.qname].rw,.5*x.styleAttrs[F.byName.fontSize.qname].rh):y.toComputedLength(_[1].value,_[1].unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],R]}),new v(C.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,x,_,I){return _==="left"?"start":_==="right"?"end":_}),new v(C.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new v(C.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new v(C.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),x={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")x.style=U[_];else if(U[_]==="filled"||U[_]==="open")x.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")x.symbol=U[_];else if(U[_]==="current")x.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")x.position=U[_];else if(x.color=y.parseColor(U[_]),x.color===null)return null;return x.style==null&&x.symbol==null?x.style="auto":(x.symbol=x.symbol||"circle",x.style=x.style||"filled"),x.position=x.position||"outside",x.color=x.color||"current",x},null),new v(C.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},x=T.split(" ");if(x.length===0||x.length>2)return null;var _=y.parseColor(x[0]);if(U.color=_,_!==null&&x.shift(),x.length!==1)return null;var I=y.parseLength(x[0]);return I?(U.thickness=I,U):null},function(T,U,x,_,I){if(_==="none")return _;var R={};return _.color===null?R.color=x.styleAttrs[F.byName.color.qname]:R.color=_.color,R.thickness=y.toComputedLength(_.thickness.value,_.thickness.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),R.thickness===null?null:R}),new v(C.ns_tts,"textShadow","none",["span"],!0,!0,y.parseTextShadow,function(T,U,x,_){if(_==="none")return _;for(var I=[],R=0;R<_.length;R++){var Z={};if(Z.x_off=y.toComputedLength(_[R][0].value,_[R][0].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.w),Z.x_off===null||(Z.y_off=y.toComputedLength(_[R][1].value,_[R][1].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),Z.y_off===null))return null;if(_[R][2]===null)Z.b_radius=0;else if(Z.b_radius=y.toComputedLength(_[R][2].value,_[R][2].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),Z.b_radius===null)return null;_[R][3]===null?Z.color=x.styleAttrs[F.byName.color.qname]:Z.color=_[R][3],I.push(Z)}return I}),new v(C.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new v(C.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new v(C.ns_ebutts,"linePadding","0c",["p"],!0,!1,y.parseLength,function(T,U,x,_,I){return y.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new v(C.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new v(C.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new v(C.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new v(C.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],F.byQName={},F.all)F.byQName[F.all[D].qname]=F.all[D];for(var m in F.byName={},F.all)F.byName[F.all[m].name]=F.all[m]})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(b,g){(function(w){var F=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,C=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(m){var T,U=null,x=v[m.toLowerCase()];return x!==void 0?U=x:(T=F.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=C.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=y.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(m){var T,U=null;return(T=D.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},w.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],x=0;x<T.length;x++){var _=T[x].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],R=w.parseLength(_.shift());if(R===null||(I[0]=R,(R=w.parseLength(_.shift()))===null))return null;if(I[1]=R,_.length===0){U.push(I);continue}if((R=w.parseLength(_[0]))!==null&&(I[2]=R,_.shift()),_.length===0){U.push(I);continue}var Z=w.parseColor(_[0]);if(Z===null)return null;I[3]=Z,U.push(I)}}return U},w.parsePosition=function(m){var T=m.split(" "),U=function(W){return W==="center"||W==="left"||W==="top"||W==="bottom"||W==="right"};if(T.length>4)return null;for(var x=0;x<T.length;x++)if(!U(T[x])){var _=w.parseLength(T[x]);if(_===null)return null;T[x]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},R=0;R<T.length;){var Z=T[R++];if(U(Z)){var z={value:0,unit:"%"};T.length!==2&&R<T.length&&!U(T[R])&&(z=T[R++]),Z==="right"?(I.h.edge=Z,I.h.offset=z):Z==="bottom"?(I.v.edge=Z,I.v.offset=z):Z==="left"?I.h.offset=z:Z==="top"&&(I.v.offset=z)}else{if(T.length!==1&&T.length!==2)return null;R===1?I.h.offset=Z:I.v.offset=Z}}return I},w.ComputedLength=function(m,T){this.rw=m,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(m,T,U,x,_,I){return T==="%"&&x?new w.ComputedLength(x.rw*m/100,x.rh*m/100):T==="em"&&U?new w.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new w.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new w.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new w.ComputedLength(0,m/100):T==="rw"?new w.ComputedLength(m/100,0):null}})(g)},3516:function(b){b.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(b,g,w){var F=w(3516),C=w(395);b.exports=function(y){return F(y)||C(y)}},395:function(b){b.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=48&&w<=57}},3875:function(b){function g(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function w(C,y){for(var v,D="",m=0,T=-1,U=0,x=0;x<=C.length;++x){if(x<C.length)v=C.charCodeAt(x);else{if(v===47)break;v=47}if(v===47){if(!(T===x-1||U===1))if(T!==x-1&&U===2){if(D.length<2||m!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var _=D.lastIndexOf("/");if(_!==D.length-1){_===-1?(D="",m=0):m=(D=D.slice(0,_)).length-1-D.lastIndexOf("/"),T=x,U=0;continue}}else if(D.length===2||D.length===1){D="",m=0,T=x,U=0;continue}}y&&(D.length>0?D+="/..":D="..",m=2)}else D.length>0?D+="/"+C.slice(T+1,x):D=C.slice(T+1,x),m=x-T-1;T=x,U=0}else v===46&&U!==-1?++U:U=-1}return D}var F={resolve:function(){for(var C,y="",v=!1,D=arguments.length-1;D>=-1&&!v;D--){var m;D>=0?m=arguments[D]:(C===void 0&&(C=process.cwd()),m=C),g(m),m.length!==0&&(y=m+"/"+y,v=m.charCodeAt(0)===47)}return y=w(y,!v),v?y.length>0?"/"+y:"/":y.length>0?y:"."},normalize:function(C){if(g(C),C.length===0)return".";var y=C.charCodeAt(0)===47,v=C.charCodeAt(C.length-1)===47;return(C=w(C,!y)).length!==0||y||(C="."),C.length>0&&v&&(C+="/"),y?"/"+C:C},isAbsolute:function(C){return g(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,y=0;y<arguments.length;++y){var v=arguments[y];g(v),v.length>0&&(C===void 0?C=v:C+="/"+v)}return C===void 0?".":F.normalize(C)},relative:function(C,y){if(g(C),g(y),C===y||(C=F.resolve(C))===(y=F.resolve(y)))return"";for(var v=1;v<C.length&&C.charCodeAt(v)===47;++v);for(var D=C.length,m=D-v,T=1;T<y.length&&y.charCodeAt(T)===47;++T);for(var U=y.length-T,x=m<U?m:U,_=-1,I=0;I<=x;++I){if(I===x){if(U>x){if(y.charCodeAt(T+I)===47)return y.slice(T+I+1);if(I===0)return y.slice(T+I)}else m>x&&(C.charCodeAt(v+I)===47?_=I:I===0&&(_=0));break}var R=C.charCodeAt(v+I);if(R!==y.charCodeAt(T+I))break;R===47&&(_=I)}var Z="";for(I=v+_+1;I<=D;++I)I!==D&&C.charCodeAt(I)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+y.slice(T+_):(T+=_,y.charCodeAt(T)===47&&++T,y.slice(T))},_makeLong:function(C){return C},dirname:function(C){if(g(C),C.length===0)return".";for(var y=C.charCodeAt(0),v=y===47,D=-1,m=!0,T=C.length-1;T>=1;--T)if((y=C.charCodeAt(T))===47){if(!m){D=T;break}}else m=!1;return D===-1?v?"/":".":v&&D===1?"//":C.slice(0,D)},basename:function(C,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');g(C);var v,D=0,m=-1,T=!0;if(y!==void 0&&y.length>0&&y.length<=C.length){if(y.length===C.length&&y===C)return"";var U=y.length-1,x=-1;for(v=C.length-1;v>=0;--v){var _=C.charCodeAt(v);if(_===47){if(!T){D=v+1;break}}else x===-1&&(T=!1,x=v+1),U>=0&&(_===y.charCodeAt(U)?--U==-1&&(m=v):(U=-1,m=x))}return D===m?m=x:m===-1&&(m=C.length),C.slice(D,m)}for(v=C.length-1;v>=0;--v)if(C.charCodeAt(v)===47){if(!T){D=v+1;break}}else m===-1&&(T=!1,m=v+1);return m===-1?"":C.slice(D,m)},extname:function(C){g(C);for(var y=-1,v=0,D=-1,m=!0,T=0,U=C.length-1;U>=0;--U){var x=C.charCodeAt(U);if(x!==47)D===-1&&(m=!1,D=U+1),x===46?y===-1?y=U:T!==1&&(T=1):y!==-1&&(T=-1);else if(!m){v=U+1;break}}return y===-1||D===-1||T===0||T===1&&y===D-1&&y===v+1?"":C.slice(y,D)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(y,v){var D=v.dir||v.root,m=v.base||(v.name||"")+(v.ext||"");return D?D===v.root?D+m:D+"/"+m:m}(0,C)},parse:function(C){g(C);var y={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return y;var v,D=C.charCodeAt(0),m=D===47;m?(y.root="/",v=1):v=0;for(var T=-1,U=0,x=-1,_=!0,I=C.length-1,R=0;I>=v;--I)if((D=C.charCodeAt(I))!==47)x===-1&&(_=!1,x=I+1),D===46?T===-1?T=I:R!==1&&(R=1):T!==-1&&(R=-1);else if(!_){U=I+1;break}return T===-1||x===-1||R===0||R===1&&T===x-1&&T===U+1?x!==-1&&(y.base=y.name=U===0&&m?C.slice(1,x):C.slice(U,x)):(U===0&&m?(y.name=C.slice(1,T),y.base=C.slice(1,x)):(y.name=C.slice(U,T),y.base=C.slice(U,x)),y.ext=C.slice(T,x)),U>0?y.dir=C.slice(0,U-1):m&&(y.dir="/"),y},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,b.exports=F},8387:function(b,g,w){var F=w(1549),C=F.Buffer;function y(D,m){for(var T in D)m[T]=D[T]}function v(D,m,T){return C(D,m,T)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?b.exports=F:(y(F,g),g.Buffer=v),y(C,v),v.from=function(D,m,T){if(typeof D=="number")throw new TypeError("Argument must not be a number");return C(D,m,T)},v.alloc=function(D,m,T){if(typeof D!="number")throw new TypeError("Argument must be a number");var U=C(D);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},v.allocUnsafe=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return C(D)},v.allocUnsafeSlow=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return F.SlowBuffer(D)}},5378:function(b,g,w){(function(F){F.parser=function(O,M){return new v(O,M)},F.SAXParser=v,F.SAXStream=m,F.createStream=function(O,M){return new m(O,M)},F.MAX_BUFFER_LENGTH=65536;var C,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function v(O,M){if(!(this instanceof v))return new v(O,M);var q=this;(function(K){for(var _e=0,de=y.length;_e<de;_e++)K[y[_e]]=""})(q),q.q=q.c="",q.bufferCheckPosition=F.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!O,q.noscript=!(!O&&!q.opt.noscript),q.state=Ae.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(F.XML_ENTITIES):Object.create(F.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(z)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),tt(q,"onready")}F.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function M(){}return M.prototype=O,new M}),Object.keys||(Object.keys=function(O){var M=[];for(var q in O)O.hasOwnProperty(q)&&M.push(q);return M}),v.prototype={end:function(){Oe(this)},write:function(O){var M=this;if(this.error)throw this.error;if(M.closed)return wt(M,"Cannot write after close. Assign an onready handler.");if(O===null)return Oe(M);typeof O=="object"&&(O=O.toString());for(var q=0,K="";K=Fe(O,q++),M.c=K,K;)switch(M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++),M.state){case Ae.BEGIN:if(M.state=Ae.BEGIN_WHITESPACE,K==="\uFEFF")continue;re(M,K);continue;case Ae.BEGIN_WHITESPACE:re(M,K);continue;case Ae.TEXT:if(M.sawRoot&&!M.closedRoot){for(var _e=q-1;K&&K!=="<"&&K!=="&";)(K=Fe(O,q++))&&M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=O.substring(_e,q-1)}K!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,K)||M.sawRoot&&!M.closedRoot||Qe(M,"Text data outside of root node."),K==="&"?M.state=Ae.TEXT_ENTITY:M.textNode+=K):(M.state=Ae.OPEN_WAKA,M.startTagPosition=M.position);continue;case Ae.SCRIPT:K==="<"?M.state=Ae.SCRIPT_ENDING:M.script+=K;continue;case Ae.SCRIPT_ENDING:K==="/"?M.state=Ae.CLOSE_TAG:(M.script+="<"+K,M.state=Ae.SCRIPT);continue;case Ae.OPEN_WAKA:if(K==="!")M.state=Ae.SGML_DECL,M.sgmlDecl="";else if(!ce(T,K))if(ce(W,K))M.state=Ae.OPEN_TAG,M.tagName=K;else if(K==="/")M.state=Ae.CLOSE_TAG,M.tagName="";else if(K==="?")M.state=Ae.PROC_INST,M.procInstName=M.procInstBody="";else{if(Qe(M,"Unencoded <"),M.startTagPosition+1<M.position){var de=M.position-M.startTagPosition;K=new Array(de).join(" ")+K}M.textNode+="<"+K,M.state=Ae.TEXT}continue;case Ae.SGML_DECL:(M.sgmlDecl+K).toUpperCase()==="[CDATA["?(ut(M,"onopencdata"),M.state=Ae.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+K==="--"?(M.state=Ae.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(M.state=Ae.DOCTYPE,(M.doctype||M.sawRoot)&&Qe(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):K===">"?(ut(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Ae.TEXT):(ce(_,K)&&(M.state=Ae.SGML_DECL_QUOTED),M.sgmlDecl+=K);continue;case Ae.SGML_DECL_QUOTED:K===M.q&&(M.state=Ae.SGML_DECL,M.q=""),M.sgmlDecl+=K;continue;case Ae.DOCTYPE:K===">"?(M.state=Ae.TEXT,ut(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=K,K==="["?M.state=Ae.DOCTYPE_DTD:ce(_,K)&&(M.state=Ae.DOCTYPE_QUOTED,M.q=K));continue;case Ae.DOCTYPE_QUOTED:M.doctype+=K,K===M.q&&(M.q="",M.state=Ae.DOCTYPE);continue;case Ae.DOCTYPE_DTD:M.doctype+=K,K==="]"?M.state=Ae.DOCTYPE:ce(_,K)&&(M.state=Ae.DOCTYPE_DTD_QUOTED,M.q=K);continue;case Ae.DOCTYPE_DTD_QUOTED:M.doctype+=K,K===M.q&&(M.state=Ae.DOCTYPE_DTD,M.q="");continue;case Ae.COMMENT:K==="-"?M.state=Ae.COMMENT_ENDING:M.comment+=K;continue;case Ae.COMMENT_ENDING:K==="-"?(M.state=Ae.COMMENT_ENDED,M.comment=lt(M.opt,M.comment),M.comment&&ut(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+K,M.state=Ae.COMMENT);continue;case Ae.COMMENT_ENDED:K!==">"?(Qe(M,"Malformed comment"),M.comment+="--"+K,M.state=Ae.COMMENT):M.state=Ae.TEXT;continue;case Ae.CDATA:K==="]"?M.state=Ae.CDATA_ENDING:M.cdata+=K;continue;case Ae.CDATA_ENDING:K==="]"?M.state=Ae.CDATA_ENDING_2:(M.cdata+="]"+K,M.state=Ae.CDATA);continue;case Ae.CDATA_ENDING_2:K===">"?(M.cdata&&ut(M,"oncdata",M.cdata),ut(M,"onclosecdata"),M.cdata="",M.state=Ae.TEXT):K==="]"?M.cdata+="]":(M.cdata+="]]"+K,M.state=Ae.CDATA);continue;case Ae.PROC_INST:K==="?"?M.state=Ae.PROC_INST_ENDING:ce(T,K)?M.state=Ae.PROC_INST_BODY:M.procInstName+=K;continue;case Ae.PROC_INST_BODY:if(!M.procInstBody&&ce(T,K))continue;K==="?"?M.state=Ae.PROC_INST_ENDING:M.procInstBody+=K;continue;case Ae.PROC_INST_ENDING:K===">"?(ut(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Ae.TEXT):(M.procInstBody+="?"+K,M.state=Ae.PROC_INST_BODY);continue;case Ae.OPEN_TAG:ce($,K)?M.tagName+=K:(ct(M),K===">"?_t(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:(oe(T,K)&&Qe(M,"Invalid character in tag name"),M.state=Ae.ATTRIB));continue;case Ae.OPEN_TAG_SLASH:K===">"?(_t(M,!0),At(M)):(Qe(M,"Forward-slash in opening tag not followed by >"),M.state=Ae.ATTRIB);continue;case Ae.ATTRIB:if(ce(T,K))continue;K===">"?_t(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:ce(W,K)?(M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME:K==="="?M.state=Ae.ATTRIB_VALUE:K===">"?(Qe(M,"Attribute without value"),M.attribValue=M.attribName,Kt(M),_t(M)):ce(T,K)?M.state=Ae.ATTRIB_NAME_SAW_WHITE:ce($,K)?M.attribName+=K:Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME_SAW_WHITE:if(K==="=")M.state=Ae.ATTRIB_VALUE;else{if(ce(T,K))continue;Qe(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",ut(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",K===">"?_t(M):ce(W,K)?(M.attribName=K,M.state=Ae.ATTRIB_NAME):(Qe(M,"Invalid attribute name"),M.state=Ae.ATTRIB)}continue;case Ae.ATTRIB_VALUE:if(ce(T,K))continue;ce(_,K)?(M.q=K,M.state=Ae.ATTRIB_VALUE_QUOTED):(Qe(M,"Unquoted attribute value"),M.state=Ae.ATTRIB_VALUE_UNQUOTED,M.attribValue=K);continue;case Ae.ATTRIB_VALUE_QUOTED:if(K!==M.q){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=K;continue}Kt(M),M.q="",M.state=Ae.ATTRIB_VALUE_CLOSED;continue;case Ae.ATTRIB_VALUE_CLOSED:ce(T,K)?M.state=Ae.ATTRIB:K===">"?_t(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:ce(W,K)?(Qe(M,"No whitespace between attributes"),M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_U:M.attribValue+=K;continue}Kt(M),K===">"?_t(M):M.state=Ae.ATTRIB;continue;case Ae.CLOSE_TAG:if(M.tagName)K===">"?At(M):ce($,K)?M.tagName+=K:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Ae.SCRIPT):(oe(T,K)&&Qe(M,"Invalid tagname in closing tag"),M.state=Ae.CLOSE_TAG_SAW_WHITE);else{if(ce(T,K))continue;oe(W,K)?M.script?(M.script+="</"+K,M.state=Ae.SCRIPT):Qe(M,"Invalid tagname in closing tag."):M.tagName=K}continue;case Ae.CLOSE_TAG_SAW_WHITE:if(ce(T,K))continue;K===">"?At(M):Qe(M,"Invalid characters in closing tag");continue;case Ae.TEXT_ENTITY:case Ae.ATTRIB_VALUE_ENTITY_Q:case Ae.ATTRIB_VALUE_ENTITY_U:var He,Tt;switch(M.state){case Ae.TEXT_ENTITY:He=Ae.TEXT,Tt="textNode";break;case Ae.ATTRIB_VALUE_ENTITY_Q:He=Ae.ATTRIB_VALUE_QUOTED,Tt="attribValue";break;case Ae.ATTRIB_VALUE_ENTITY_U:He=Ae.ATTRIB_VALUE_UNQUOTED,Tt="attribValue"}K===";"?(M[Tt]+=Ce(M),M.entity="",M.state=He):ce(M.entity.length?N:le,K)?M.entity+=K:(Qe(M,"Invalid character in entity name"),M[Tt]+="&"+M.entity+K,M.entity="",M.state=He);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(ot){for(var it=Math.max(F.MAX_BUFFER_LENGTH,10),et=0,ft=0,vt=y.length;ft<vt;ft++){var Et=ot[y[ft]].length;if(Et>it)switch(y[ft]){case"textNode":$e(ot);break;case"cdata":ut(ot,"oncdata",ot.cdata),ot.cdata="";break;case"script":ut(ot,"onscript",ot.script),ot.script="";break;default:wt(ot,"Max buffer length exceeded: "+y[ft])}et=Math.max(et,Et)}var Ct=F.MAX_BUFFER_LENGTH-et;ot.bufferCheckPosition=Ct+ot.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var O;$e(O=this),O.cdata!==""&&(ut(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(ut(O,"onscript",O.script),O.script="")}};try{C=w(182).Stream}catch(O){C=function(){}}var D=F.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function m(O,M){if(!(this instanceof m))return new m(O,M);C.apply(this),this._parser=new v(O,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(K){q.emit("error",K),q._parser.error=null},this._decoder=null,D.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(_e){if(!_e)return q.removeAllListeners(K),q._parser["on"+K]=_e,_e;q.on(K,_e)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(C.prototype,{constructor:{value:m}}),m.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var M=w(7503).s;this._decoder=new M("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},m.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},m.prototype.on=function(O,M){var q=this;return q._parser["on"+O]||D.indexOf(O)===-1||(q._parser["on"+O]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,O),q.emit.apply(q,K)}),C.prototype.on.call(q,O,M)};var T="\r\n	 ",U="0124356789",x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",R="http://www.w3.org/XML/1998/namespace",Z="http://www.w3.org/2000/xmlns/",z={xml:R,xmlns:Z};T=X(T),U=X(U),x=X(x);var W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,le=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(O){return O.split("").reduce(function(M,q){return M[q]=!0,M},{})}function ce(O,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(O)?!!M.match(O):O[M]}function oe(O,M){return!ce(O,M)}_=X(_),I=X(I);var he,be,Xe,Ae=0;for(var Ze in F.STATE={BEGIN:Ae++,BEGIN_WHITESPACE:Ae++,TEXT:Ae++,TEXT_ENTITY:Ae++,OPEN_WAKA:Ae++,SGML_DECL:Ae++,SGML_DECL_QUOTED:Ae++,DOCTYPE:Ae++,DOCTYPE_QUOTED:Ae++,DOCTYPE_DTD:Ae++,DOCTYPE_DTD_QUOTED:Ae++,COMMENT_STARTING:Ae++,COMMENT:Ae++,COMMENT_ENDING:Ae++,COMMENT_ENDED:Ae++,CDATA:Ae++,CDATA_ENDING:Ae++,CDATA_ENDING_2:Ae++,PROC_INST:Ae++,PROC_INST_BODY:Ae++,PROC_INST_ENDING:Ae++,OPEN_TAG:Ae++,OPEN_TAG_SLASH:Ae++,ATTRIB:Ae++,ATTRIB_NAME:Ae++,ATTRIB_NAME_SAW_WHITE:Ae++,ATTRIB_VALUE:Ae++,ATTRIB_VALUE_QUOTED:Ae++,ATTRIB_VALUE_CLOSED:Ae++,ATTRIB_VALUE_UNQUOTED:Ae++,ATTRIB_VALUE_ENTITY_Q:Ae++,ATTRIB_VALUE_ENTITY_U:Ae++,CLOSE_TAG:Ae++,CLOSE_TAG_SAW_WHITE:Ae++,SCRIPT:Ae++,SCRIPT_ENDING:Ae++},F.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(F.ENTITIES).forEach(function(O){var M=F.ENTITIES[O],q=typeof M=="number"?String.fromCharCode(M):M;F.ENTITIES[O]=q}),F.STATE)F.STATE[F.STATE[Ze]]=Ze;function tt(O,M,q){O[M]&&O[M](q)}function ut(O,M,q){O.textNode&&$e(O),tt(O,M,q)}function $e(O){O.textNode=lt(O.opt,O.textNode),O.textNode&&tt(O,"ontext",O.textNode),O.textNode=""}function lt(O,M){return O.trim&&(M=M.trim()),O.normalize&&(M=M.replace(/\s+/g," ")),M}function wt(O,M){return $e(O),O.trackPosition&&(M+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),M=new Error(M),O.error=M,tt(O,"onerror",M),O}function Oe(O){return O.sawRoot&&!O.closedRoot&&Qe(O,"Unclosed root tag"),O.state!==Ae.BEGIN&&O.state!==Ae.BEGIN_WHITESPACE&&O.state!==Ae.TEXT&&wt(O,"Unexpected end"),$e(O),O.c="",O.closed=!0,tt(O,"onend"),v.call(O,O.strict,O.opt),O}function Qe(O,M){if(typeof O!="object"||!(O instanceof v))throw new Error("bad call to strictFail");O.strict&&wt(O,M)}function ct(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var M=O.tags[O.tags.length-1]||O,q=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(q.ns=M.ns),O.attribList.length=0,ut(O,"onopentagstart",q)}function Xt(O,M){var q=O.indexOf(":")<0?["",O]:O.split(":"),K=q[0],_e=q[1];return M&&O==="xmlns"&&(K="xmlns",_e=""),{prefix:K,local:_e}}function Kt(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var M=Xt(O.attribName,!0),q=M.prefix,K=M.local;if(q==="xmlns")if(K==="xml"&&O.attribValue!==R)Qe(O,"xml: prefix must be bound to "+R+"\nActual: "+O.attribValue);else if(K==="xmlns"&&O.attribValue!==Z)Qe(O,"xmlns: prefix must be bound to "+Z+"\nActual: "+O.attribValue);else{var _e=O.tag,de=O.tags[O.tags.length-1]||O;_e.ns===de.ns&&(_e.ns=Object.create(de.ns)),_e.ns[K]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,ut(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function _t(O,M){if(O.opt.xmlns){var q=O.tag,K=Xt(O.tagName);q.prefix=K.prefix,q.local=K.local,q.uri=q.ns[K.prefix]||"",q.prefix&&!q.uri&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),q.uri=K.prefix);var _e=O.tags[O.tags.length-1]||O;q.ns&&_e.ns!==q.ns&&Object.keys(q.ns).forEach(function(hn){ut(O,"onopennamespace",{prefix:hn,uri:q.ns[hn]})});for(var de=0,He=O.attribList.length;de<He;de++){var Tt=O.attribList[de],ot=Tt[0],it=Tt[1],et=Xt(ot,!0),ft=et.prefix,vt=et.local,Et=ft===""?"":q.ns[ft]||"",Ct={name:ot,value:it,prefix:ft,local:vt,uri:Et};ft&&ft!=="xmlns"&&!Et&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(ft)),Ct.uri=ft),O.tag.attributes[ot]=Ct,ut(O,"onattribute",Ct)}O.attribList.length=0}O.tag.isSelfClosing=!!M,O.sawRoot=!0,O.tags.push(O.tag),ut(O,"onopentag",O.tag),M||(O.noscript||O.tagName.toLowerCase()!=="script"?O.state=Ae.TEXT:O.state=Ae.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function At(O){if(!O.tagName)return Qe(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=Ae.TEXT);if(O.script){if(O.tagName!=="script")return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=Ae.SCRIPT);ut(O,"onscript",O.script),O.script=""}var M=O.tags.length,q=O.tagName;O.strict||(q=q[O.looseCase]());for(var K=q;M--&&O.tags[M].name!==K;)Qe(O,"Unexpected close tag");if(M<0)return Qe(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=Ae.TEXT);O.tagName=q;for(var _e=O.tags.length;_e-- >M;){var de=O.tag=O.tags.pop();O.tagName=O.tag.name,ut(O,"onclosetag",O.tagName);var He={};for(var Tt in de.ns)He[Tt]=de.ns[Tt];var ot=O.tags[O.tags.length-1]||O;O.opt.xmlns&&de.ns!==ot.ns&&Object.keys(de.ns).forEach(function(it){var et=de.ns[it];ut(O,"onclosenamespace",{prefix:it,uri:et})})}M===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=Ae.TEXT}function Ce(O){var M,q=O.entity,K=q.toLowerCase(),_e="";return O.ENTITIES[q]?O.ENTITIES[q]:O.ENTITIES[K]?O.ENTITIES[K]:((q=K).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),_e=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),_e=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),_e.toLowerCase()!==q?(Qe(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(M))}function re(O,M){M==="<"?(O.state=Ae.OPEN_WAKA,O.startTagPosition=O.position):oe(T,M)&&(Qe(O,"Non-whitespace before first tag."),O.textNode=M,O.state=Ae.TEXT)}function Fe(O,M){var q="";return M<O.length&&(q=O.charAt(M)),q}Ae=F.STATE,String.fromCodePoint||(he=String.fromCharCode,be=Math.floor,Xe=function(){var O,M,q=16384,K=[],_e=-1,de=arguments.length;if(!de)return"";for(var He="";++_e<de;){var Tt=Number(arguments[_e]);if(!isFinite(Tt)||Tt<0||Tt>1114111||be(Tt)!==Tt)throw RangeError("Invalid code point: "+Tt);Tt<=65535?K.push(Tt):(O=55296+((Tt-=65536)>>10),M=Tt%1024+56320,K.push(O,M)),(_e+1===de||K.length>q)&&(He+=he.apply(null,K),K.length=0)}return He},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Xe,configurable:!0,writable:!0}):String.fromCodePoint=Xe)})(g)},182:function(b,g,w){b.exports=C;var F=w(1159).EventEmitter;function C(){F.call(this)}w(1765)(C,F),C.Readable=w(2846),C.Writable=w(8318),C.Duplex=w(6138),C.Transform=w(9798),C.PassThrough=w(5472),C.finished=w(8800),C.pipeline=w(7295),C.Stream=C,C.prototype.pipe=function(y,v){var D=this;function m(Z){y.writable&&y.write(Z)===!1&&D.pause&&D.pause()}function T(){D.readable&&D.resume&&D.resume()}D.on("data",m),y.on("drain",T),y._isStdio||v&&v.end===!1||(D.on("end",x),D.on("close",_));var U=!1;function x(){U||(U=!0,y.end())}function _(){U||(U=!0,typeof y.destroy=="function"&&y.destroy())}function I(Z){if(R(),F.listenerCount(this,"error")===0)throw Z}function R(){D.removeListener("data",m),y.removeListener("drain",T),D.removeListener("end",x),D.removeListener("close",_),D.removeListener("error",I),y.removeListener("error",I),D.removeListener("end",R),D.removeListener("close",R),y.removeListener("close",R)}return D.on("error",I),y.on("error",I),D.on("end",R),D.on("close",R),y.on("close",R),y.emit("pipe",D),y}},1765:function(b){typeof Object.create=="function"?b.exports=function(g,w){w&&(g.super_=w,g.prototype=Object.create(w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(g,w){if(w){g.super_=w;var F=function(){};F.prototype=w.prototype,g.prototype=new F,g.prototype.constructor=g}}},3690:function(b){var g={};function w(C,y,v){v||(v=Error);var D=function(m){var T,U;function x(_,I,R){return m.call(this,function(Z,z,W){return typeof y=="string"?y:y(Z,z,W)}(_,I,R))||this}return U=m,(T=x).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,x}(v);D.prototype.name=v.name,D.prototype.code=C,g[C]=D}function F(C,y){if(Array.isArray(C)){var v=C.length;return C=C.map(function(D){return String(D)}),v>2?"one of ".concat(y," ").concat(C.slice(0,v-1).join(", "),", or ")+C[v-1]:v===2?"one of ".concat(y," ").concat(C[0]," or ").concat(C[1]):"of ".concat(y," ").concat(C[0])}return"of ".concat(y," ").concat(String(C))}w("ERR_INVALID_OPT_VALUE",function(C,y){return'The value "'+y+'" is invalid for option "'+C+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(C,y,v){var D,m,T,U,x;if(typeof y=="string"&&(m="not ",y.substr(0,m.length)===m)?(D="must not be",y=y.replace(/^not /,"")):D="must be",function(I,R,Z){return(Z===void 0||Z>I.length)&&(Z=I.length),I.substring(Z-R.length,Z)===R}(C," argument"))T="The ".concat(C," ").concat(D," ").concat(F(y,"type"));else{var _=(typeof x!="number"&&(x=0),x+1>(U=C).length||U.indexOf(".",x)===-1?"argument":"property");T='The "'.concat(C,'" ').concat(_," ").concat(D," ").concat(F(y,"type"))}return T+". Received type ".concat(typeof v)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.q=g},6138:function(b,g,w){var F=Object.keys||function(_){var I=[];for(var R in _)I.push(R);return I};b.exports=T;var C=w(2846),y=w(8318);w(1765)(T,C);for(var v=F(y.prototype),D=0;D<v.length;D++){var m=v[D];T.prototype[m]||(T.prototype[m]=y.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);C.call(this,_),y.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(x,this)}function x(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(b,g,w){b.exports=C;var F=w(9798);function C(y){if(!(this instanceof C))return new C(y);F.call(this,y)}w(1765)(C,F),C.prototype._transform=function(y,v,D){D(null,y)}},2846:function(b,g,w){var F;b.exports=he,he.ReadableState=oe,w(1159).EventEmitter;var C,y=function(Ce,re){return Ce.listeners(re).length},v=w(9299),D=w(1549).Buffer,m=w.g.Uint8Array||function(){},T=w(964);C=T&&T.debuglog?T.debuglog("stream"):function(){};var U,x,_,I=w(8393),R=w(6163),Z=w(7269).getHighWaterMark,z=w(3690).q,W=z.ERR_INVALID_ARG_TYPE,$=z.ERR_STREAM_PUSH_AFTER_EOF,le=z.ERR_METHOD_NOT_IMPLEMENTED,N=z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(he,v);var X=R.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(Ce,re,Fe){F=F||w(6138),Ce=Ce||{},typeof Fe!="boolean"&&(Fe=re instanceof F),this.objectMode=!!Ce.objectMode,Fe&&(this.objectMode=this.objectMode||!!Ce.readableObjectMode),this.highWaterMark=Z(this,Ce,"readableHighWaterMark",Fe),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ce.emitClose!==!1,this.autoDestroy=!!Ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ce.encoding&&(U||(U=w(7503).s),this.decoder=new U(Ce.encoding),this.encoding=Ce.encoding)}function he(Ce){if(F=F||w(6138),!(this instanceof he))return new he(Ce);var re=this instanceof F;this._readableState=new oe(Ce,this,re),this.readable=!0,Ce&&(typeof Ce.read=="function"&&(this._read=Ce.read),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy)),v.call(this)}function be(Ce,re,Fe,O,M){C("readableAddChunk",re);var q,K=Ce._readableState;if(re===null)K.reading=!1,function(_e,de){if(C("onEofChunk"),!de.ended){if(de.decoder){var He=de.decoder.end();He&&He.length&&(de.buffer.push(He),de.length+=de.objectMode?1:He.length)}de.ended=!0,de.sync?tt(_e):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,ut(_e)))}}(Ce,K);else if(M||(q=function(_e,de){var He,Tt;return Tt=de,D.isBuffer(Tt)||Tt instanceof m||typeof de=="string"||de===void 0||_e.objectMode||(He=new W("chunk",["string","Buffer","Uint8Array"],de)),He}(K,re)),q)X(Ce,q);else if(K.objectMode||re&&re.length>0)if(typeof re=="string"||K.objectMode||Object.getPrototypeOf(re)===D.prototype||(re=function(_e){return D.from(_e)}(re)),O)K.endEmitted?X(Ce,new N):Xe(Ce,K,re,!0);else if(K.ended)X(Ce,new $);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Fe?(re=K.decoder.write(re),K.objectMode||re.length!==0?Xe(Ce,K,re,!1):$e(Ce,K)):Xe(Ce,K,re,!1)}else O||(K.reading=!1,$e(Ce,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Xe(Ce,re,Fe,O){re.flowing&&re.length===0&&!re.sync?(re.awaitDrain=0,Ce.emit("data",Fe)):(re.length+=re.objectMode?1:Fe.length,O?re.buffer.unshift(Fe):re.buffer.push(Fe),re.needReadable&&tt(Ce)),$e(Ce,re)}Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ce){this._readableState&&(this._readableState.destroyed=Ce)}}),he.prototype.destroy=R.destroy,he.prototype._undestroy=R.undestroy,he.prototype._destroy=function(Ce,re){re(Ce)},he.prototype.push=function(Ce,re){var Fe,O=this._readableState;return O.objectMode?Fe=!0:typeof Ce=="string"&&((re=re||O.defaultEncoding)!==O.encoding&&(Ce=D.from(Ce,re),re=""),Fe=!0),be(this,Ce,re,!1,Fe)},he.prototype.unshift=function(Ce){return be(this,Ce,null,!0,!1)},he.prototype.isPaused=function(){return this._readableState.flowing===!1},he.prototype.setEncoding=function(Ce){U||(U=w(7503).s);var re=new U(Ce);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var Fe=this._readableState.buffer.head,O="";Fe!==null;)O+=re.write(Fe.data),Fe=Fe.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var Ae=1073741824;function Ze(Ce,re){return Ce<=0||re.length===0&&re.ended?0:re.objectMode?1:Ce!=Ce?re.flowing&&re.length?re.buffer.head.data.length:re.length:(Ce>re.highWaterMark&&(re.highWaterMark=function(Fe){return Fe>=Ae?Fe=Ae:(Fe--,Fe|=Fe>>>1,Fe|=Fe>>>2,Fe|=Fe>>>4,Fe|=Fe>>>8,Fe|=Fe>>>16,Fe++),Fe}(Ce)),Ce<=re.length?Ce:re.ended?re.length:(re.needReadable=!0,0))}function tt(Ce){var re=Ce._readableState;C("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(C("emitReadable",re.flowing),re.emittedReadable=!0,process.nextTick(ut,Ce))}function ut(Ce){var re=Ce._readableState;C("emitReadable_",re.destroyed,re.length,re.ended),re.destroyed||!re.length&&!re.ended||(Ce.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,ct(Ce)}function $e(Ce,re){re.readingMore||(re.readingMore=!0,process.nextTick(lt,Ce,re))}function lt(Ce,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&re.length===0);){var Fe=re.length;if(C("maybeReadMore read 0"),Ce.read(0),Fe===re.length)break}re.readingMore=!1}function wt(Ce){var re=Ce._readableState;re.readableListening=Ce.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:Ce.listenerCount("data")>0&&Ce.resume()}function Oe(Ce){C("readable nexttick read 0"),Ce.read(0)}function Qe(Ce,re){C("resume",re.reading),re.reading||Ce.read(0),re.resumeScheduled=!1,Ce.emit("resume"),ct(Ce),re.flowing&&!re.reading&&Ce.read(0)}function ct(Ce){var re=Ce._readableState;for(C("flow",re.flowing);re.flowing&&Ce.read()!==null;);}function Xt(Ce,re){return re.length===0?null:(re.objectMode?Fe=re.buffer.shift():!Ce||Ce>=re.length?(Fe=re.decoder?re.buffer.join(""):re.buffer.length===1?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):Fe=re.buffer.consume(Ce,re.decoder),Fe);var Fe}function Kt(Ce){var re=Ce._readableState;C("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,process.nextTick(_t,re,Ce))}function _t(Ce,re){if(C("endReadableNT",Ce.endEmitted,Ce.length),!Ce.endEmitted&&Ce.length===0&&(Ce.endEmitted=!0,re.readable=!1,re.emit("end"),Ce.autoDestroy)){var Fe=re._writableState;(!Fe||Fe.autoDestroy&&Fe.finished)&&re.destroy()}}function At(Ce,re){for(var Fe=0,O=Ce.length;Fe<O;Fe++)if(Ce[Fe]===re)return Fe;return-1}he.prototype.read=function(Ce){C("read",Ce),Ce=parseInt(Ce,10);var re=this._readableState,Fe=Ce;if(Ce!==0&&(re.emittedReadable=!1),Ce===0&&re.needReadable&&((re.highWaterMark!==0?re.length>=re.highWaterMark:re.length>0)||re.ended))return C("read: emitReadable",re.length,re.ended),re.length===0&&re.ended?Kt(this):tt(this),null;if((Ce=Ze(Ce,re))===0&&re.ended)return re.length===0&&Kt(this),null;var O,M=re.needReadable;return C("need readable",M),(re.length===0||re.length-Ce<re.highWaterMark)&&C("length less than watermark",M=!0),re.ended||re.reading?C("reading or ended",M=!1):M&&(C("do read"),re.reading=!0,re.sync=!0,re.length===0&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(Ce=Ze(Fe,re))),(O=Ce>0?Xt(Ce,re):null)===null?(re.needReadable=re.length<=re.highWaterMark,Ce=0):(re.length-=Ce,re.awaitDrain=0),re.length===0&&(re.ended||(re.needReadable=!0),Fe!==Ce&&re.ended&&Kt(this)),O!==null&&this.emit("data",O),O},he.prototype._read=function(Ce){X(this,new le("_read()"))},he.prototype.pipe=function(Ce,re){var Fe=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=Ce;break;case 1:O.pipes=[O.pipes,Ce];break;default:O.pipes.push(Ce)}O.pipesCount+=1,C("pipe count=%d opts=%j",O.pipesCount,re);var M=re&&re.end===!1||Ce===process.stdout||Ce===process.stderr?it:q;function q(){C("onend"),Ce.end()}O.endEmitted?process.nextTick(M):Fe.once("end",M),Ce.on("unpipe",function et(ft,vt){C("onunpipe"),ft===Fe&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,C("cleanup"),Ce.removeListener("close",Tt),Ce.removeListener("finish",ot),Ce.removeListener("drain",K),Ce.removeListener("error",He),Ce.removeListener("unpipe",et),Fe.removeListener("end",q),Fe.removeListener("end",it),Fe.removeListener("data",de),_e=!0,!O.awaitDrain||Ce._writableState&&!Ce._writableState.needDrain||K())});var K=function(et){return function(){var ft=et._readableState;C("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&y(et,"data")&&(ft.flowing=!0,ct(et))}}(Fe);Ce.on("drain",K);var _e=!1;function de(et){C("ondata");var ft=Ce.write(et);C("dest.write",ft),ft===!1&&((O.pipesCount===1&&O.pipes===Ce||O.pipesCount>1&&At(O.pipes,Ce)!==-1)&&!_e&&(C("false write response, pause",O.awaitDrain),O.awaitDrain++),Fe.pause())}function He(et){C("onerror",et),it(),Ce.removeListener("error",He),y(Ce,"error")===0&&X(Ce,et)}function Tt(){Ce.removeListener("finish",ot),it()}function ot(){C("onfinish"),Ce.removeListener("close",Tt),it()}function it(){C("unpipe"),Fe.unpipe(Ce)}return Fe.on("data",de),function(et,ft,vt){if(typeof et.prependListener=="function")return et.prependListener(ft,vt);et._events&&et._events[ft]?Array.isArray(et._events[ft])?et._events[ft].unshift(vt):et._events[ft]=[vt,et._events[ft]]:et.on(ft,vt)}(Ce,"error",He),Ce.once("close",Tt),Ce.once("finish",ot),Ce.emit("pipe",Fe),O.flowing||(C("pipe resume"),Fe.resume()),Ce},he.prototype.unpipe=function(Ce){var re=this._readableState,Fe={hasUnpiped:!1};if(re.pipesCount===0)return this;if(re.pipesCount===1)return Ce&&Ce!==re.pipes||(Ce||(Ce=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,Ce&&Ce.emit("unpipe",this,Fe)),this;if(!Ce){var O=re.pipes,M=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var q=0;q<M;q++)O[q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=At(re.pipes,Ce);return K===-1||(re.pipes.splice(K,1),re.pipesCount-=1,re.pipesCount===1&&(re.pipes=re.pipes[0]),Ce.emit("unpipe",this,Fe)),this},he.prototype.on=function(Ce,re){var Fe=v.prototype.on.call(this,Ce,re),O=this._readableState;return Ce==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):Ce==="readable"&&(O.endEmitted||O.readableListening||(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,C("on readable",O.length,O.reading),O.length?tt(this):O.reading||process.nextTick(Oe,this))),Fe},he.prototype.addListener=he.prototype.on,he.prototype.removeListener=function(Ce,re){var Fe=v.prototype.removeListener.call(this,Ce,re);return Ce==="readable"&&process.nextTick(wt,this),Fe},he.prototype.removeAllListeners=function(Ce){var re=v.prototype.removeAllListeners.apply(this,arguments);return Ce!=="readable"&&Ce!==void 0||process.nextTick(wt,this),re},he.prototype.resume=function(){var Ce=this._readableState;return Ce.flowing||(C("resume"),Ce.flowing=!Ce.readableListening,function(re,Fe){Fe.resumeScheduled||(Fe.resumeScheduled=!0,process.nextTick(Qe,re,Fe))}(this,Ce)),Ce.paused=!1,this},he.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},he.prototype.wrap=function(Ce){var re=this,Fe=this._readableState,O=!1;for(var M in Ce.on("end",function(){if(C("wrapped end"),Fe.decoder&&!Fe.ended){var K=Fe.decoder.end();K&&K.length&&re.push(K)}re.push(null)}),Ce.on("data",function(K){C("wrapped data"),Fe.decoder&&(K=Fe.decoder.write(K)),Fe.objectMode&&K==null||(Fe.objectMode||K&&K.length)&&(re.push(K)||(O=!0,Ce.pause()))}),Ce)this[M]===void 0&&typeof Ce[M]=="function"&&(this[M]=function(K){return function(){return Ce[K].apply(Ce,arguments)}}(M));for(var q=0;q<ce.length;q++)Ce.on(ce[q],this.emit.bind(this,ce[q]));return this._read=function(K){C("wrapped _read",K),O&&(O=!1,Ce.resume())},this},typeof Symbol=="function"&&(he.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=w(7299)),x(this)}),Object.defineProperty(he.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(he.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(he.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ce){this._readableState&&(this._readableState.flowing=Ce)}}),he._fromList=Xt,Object.defineProperty(he.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(he.from=function(Ce,re){return _===void 0&&(_=w(6233)),_(he,Ce,re)})},9798:function(b,g,w){b.exports=U;var F=w(3690).q,C=F.ERR_METHOD_NOT_IMPLEMENTED,y=F.ERR_MULTIPLE_CALLBACK,v=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,D=F.ERR_TRANSFORM_WITH_LENGTH_0,m=w(6138);function T(I,R){var Z=this._transformState;Z.transforming=!1;var z=Z.writecb;if(z===null)return this.emit("error",new y);Z.writechunk=null,Z.writecb=null,R!=null&&this.push(R),z(I);var W=this._readableState;W.reading=!1,(W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",x)}function x(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(R,Z){_(I,R,Z)})}function _(I,R,Z){if(R)return I.emit("error",R);if(Z!=null&&I.push(Z),I._writableState.length)throw new D;if(I._transformState.transforming)throw new v;return I.push(null)}w(1765)(U,m),U.prototype.push=function(I,R){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,R)},U.prototype._transform=function(I,R,Z){Z(new C("_transform()"))},U.prototype._write=function(I,R,Z){var z=this._transformState;if(z.writecb=Z,z.writechunk=I,z.writeencoding=R,!z.transforming){var W=this._readableState;(z.needTransform||W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}},U.prototype._read=function(I){var R=this._transformState;R.writechunk===null||R.transforming?R.needTransform=!0:(R.transforming=!0,this._transform(R.writechunk,R.writeencoding,R.afterTransform))},U.prototype._destroy=function(I,R){m.prototype._destroy.call(this,I,function(Z){R(Z)})}},8318:function(b,g,w){function F($e){var lt=this;this.next=null,this.entry=null,this.finish=function(){(function(wt,Oe,Qe){var ct=wt.entry;for(wt.entry=null;ct;){var Xt=ct.callback;Oe.pendingcb--,Xt(void 0),ct=ct.next}Oe.corkedRequestsFree.next=wt})(lt,$e)}}var C;b.exports=he,he.WritableState=oe;var y,v={deprecate:w(7839)},D=w(9299),m=w(1549).Buffer,T=w.g.Uint8Array||function(){},U=w(6163),x=w(7269).getHighWaterMark,_=w(3690).q,I=_.ERR_INVALID_ARG_TYPE,R=_.ERR_METHOD_NOT_IMPLEMENTED,Z=_.ERR_MULTIPLE_CALLBACK,z=_.ERR_STREAM_CANNOT_PIPE,W=_.ERR_STREAM_DESTROYED,$=_.ERR_STREAM_NULL_VALUES,le=_.ERR_STREAM_WRITE_AFTER_END,N=_.ERR_UNKNOWN_ENCODING,X=U.errorOrDestroy;function ce(){}function oe($e,lt,wt){C=C||w(6138),$e=$e||{},typeof wt!="boolean"&&(wt=lt instanceof C),this.objectMode=!!$e.objectMode,wt&&(this.objectMode=this.objectMode||!!$e.writableObjectMode),this.highWaterMark=x(this,$e,"writableHighWaterMark",wt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Oe=$e.decodeStrings===!1;this.decodeStrings=!Oe,this.defaultEncoding=$e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qe){(function(ct,Xt){var Kt=ct._writableState,_t=Kt.sync,At=Kt.writecb;if(typeof At!="function")throw new Z;if(function(re){re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0}(Kt),Xt)(function(re,Fe,O,M,q){--Fe.pendingcb,O?(process.nextTick(q,M),process.nextTick(ut,re,Fe),re._writableState.errorEmitted=!0,X(re,M)):(q(M),re._writableState.errorEmitted=!0,X(re,M),ut(re,Fe))})(ct,Kt,_t,Xt,At);else{var Ce=Ze(Kt)||ct.destroyed;Ce||Kt.corked||Kt.bufferProcessing||!Kt.bufferedRequest||Ae(ct,Kt),_t?process.nextTick(Xe,ct,Kt,Ce,At):Xe(ct,Kt,Ce,At)}})(lt,Qe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=$e.emitClose!==!1,this.autoDestroy=!!$e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function he($e){var lt=this instanceof(C=C||w(6138));if(!lt&&!y.call(he,this))return new he($e);this._writableState=new oe($e,this,lt),this.writable=!0,$e&&(typeof $e.write=="function"&&(this._write=$e.write),typeof $e.writev=="function"&&(this._writev=$e.writev),typeof $e.destroy=="function"&&(this._destroy=$e.destroy),typeof $e.final=="function"&&(this._final=$e.final)),D.call(this)}function be($e,lt,wt,Oe,Qe,ct,Xt){lt.writelen=Oe,lt.writecb=Xt,lt.writing=!0,lt.sync=!0,lt.destroyed?lt.onwrite(new W("write")):wt?$e._writev(Qe,lt.onwrite):$e._write(Qe,ct,lt.onwrite),lt.sync=!1}function Xe($e,lt,wt,Oe){wt||function(Qe,ct){ct.length===0&&ct.needDrain&&(ct.needDrain=!1,Qe.emit("drain"))}($e,lt),lt.pendingcb--,Oe(),ut($e,lt)}function Ae($e,lt){lt.bufferProcessing=!0;var wt=lt.bufferedRequest;if($e._writev&&wt&&wt.next){var Oe=lt.bufferedRequestCount,Qe=new Array(Oe),ct=lt.corkedRequestsFree;ct.entry=wt;for(var Xt=0,Kt=!0;wt;)Qe[Xt]=wt,wt.isBuf||(Kt=!1),wt=wt.next,Xt+=1;Qe.allBuffers=Kt,be($e,lt,!0,lt.length,Qe,"",ct.finish),lt.pendingcb++,lt.lastBufferedRequest=null,ct.next?(lt.corkedRequestsFree=ct.next,ct.next=null):lt.corkedRequestsFree=new F(lt),lt.bufferedRequestCount=0}else{for(;wt;){var _t=wt.chunk,At=wt.encoding,Ce=wt.callback;if(be($e,lt,!1,lt.objectMode?1:_t.length,_t,At,Ce),wt=wt.next,lt.bufferedRequestCount--,lt.writing)break}wt===null&&(lt.lastBufferedRequest=null)}lt.bufferedRequest=wt,lt.bufferProcessing=!1}function Ze($e){return $e.ending&&$e.length===0&&$e.bufferedRequest===null&&!$e.finished&&!$e.writing}function tt($e,lt){$e._final(function(wt){lt.pendingcb--,wt&&X($e,wt),lt.prefinished=!0,$e.emit("prefinish"),ut($e,lt)})}function ut($e,lt){var wt=Ze(lt);if(wt&&(function(Qe,ct){ct.prefinished||ct.finalCalled||(typeof Qe._final!="function"||ct.destroyed?(ct.prefinished=!0,Qe.emit("prefinish")):(ct.pendingcb++,ct.finalCalled=!0,process.nextTick(tt,Qe,ct)))}($e,lt),lt.pendingcb===0&&(lt.finished=!0,$e.emit("finish"),lt.autoDestroy))){var Oe=$e._readableState;(!Oe||Oe.autoDestroy&&Oe.endEmitted)&&$e.destroy()}return wt}w(1765)(he,D),oe.prototype.getBuffer=function(){for(var $e=this.bufferedRequest,lt=[];$e;)lt.push($e),$e=$e.next;return lt},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch($e){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(he,Symbol.hasInstance,{value:function($e){return!!y.call(this,$e)||this===he&&$e&&$e._writableState instanceof oe}})):y=function($e){return $e instanceof this},he.prototype.pipe=function(){X(this,new z)},he.prototype.write=function($e,lt,wt){var Oe,Qe=this._writableState,ct=!1,Xt=!Qe.objectMode&&(Oe=$e,m.isBuffer(Oe)||Oe instanceof T);return Xt&&!m.isBuffer($e)&&($e=function(Kt){return m.from(Kt)}($e)),typeof lt=="function"&&(wt=lt,lt=null),Xt?lt="buffer":lt||(lt=Qe.defaultEncoding),typeof wt!="function"&&(wt=ce),Qe.ending?function(Kt,_t){var At=new le;X(Kt,At),process.nextTick(_t,At)}(this,wt):(Xt||function(Kt,_t,At,Ce){var re;return At===null?re=new $:typeof At=="string"||_t.objectMode||(re=new I("chunk",["string","Buffer"],At)),!re||(X(Kt,re),process.nextTick(Ce,re),!1)}(this,Qe,$e,wt))&&(Qe.pendingcb++,ct=function(Kt,_t,At,Ce,re,Fe){if(!At){var O=function(_e,de,He){return _e.objectMode||_e.decodeStrings===!1||typeof de!="string"||(de=m.from(de,He)),de}(_t,Ce,re);Ce!==O&&(At=!0,re="buffer",Ce=O)}var M=_t.objectMode?1:Ce.length;_t.length+=M;var q=_t.length<_t.highWaterMark;if(q||(_t.needDrain=!0),_t.writing||_t.corked){var K=_t.lastBufferedRequest;_t.lastBufferedRequest={chunk:Ce,encoding:re,isBuf:At,callback:Fe,next:null},K?K.next=_t.lastBufferedRequest:_t.bufferedRequest=_t.lastBufferedRequest,_t.bufferedRequestCount+=1}else be(Kt,_t,!1,M,Ce,re,Fe);return q}(this,Qe,Xt,$e,lt,wt)),ct},he.prototype.cork=function(){this._writableState.corked++},he.prototype.uncork=function(){var $e=this._writableState;$e.corked&&($e.corked--,$e.writing||$e.corked||$e.bufferProcessing||!$e.bufferedRequest||Ae(this,$e))},he.prototype.setDefaultEncoding=function($e){if(typeof $e=="string"&&($e=$e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($e+"").toLowerCase())>-1))throw new N($e);return this._writableState.defaultEncoding=$e,this},Object.defineProperty(he.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(he.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),he.prototype._write=function($e,lt,wt){wt(new R("_write()"))},he.prototype._writev=null,he.prototype.end=function($e,lt,wt){var Oe=this._writableState;return typeof $e=="function"?(wt=$e,$e=null,lt=null):typeof lt=="function"&&(wt=lt,lt=null),$e!=null&&this.write($e,lt),Oe.corked&&(Oe.corked=1,this.uncork()),Oe.ending||function(Qe,ct,Xt){ct.ending=!0,ut(Qe,ct),Xt&&(ct.finished?process.nextTick(Xt):Qe.once("finish",Xt)),ct.ended=!0,Qe.writable=!1}(this,Oe,wt),this},Object.defineProperty(he.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function($e){this._writableState&&(this._writableState.destroyed=$e)}}),he.prototype.destroy=U.destroy,he.prototype._undestroy=U.undestroy,he.prototype._destroy=function($e,lt){lt($e)}},7299:function(b,g,w){var F;function C($,le,N){return le in $?Object.defineProperty($,le,{value:N,enumerable:!0,configurable:!0,writable:!0}):$[le]=N,$}var y=w(8800),v=Symbol("lastResolve"),D=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),x=Symbol("handlePromise"),_=Symbol("stream");function I($,le){return{value:$,done:le}}function R($){var le=$[v];if(le!==null){var N=$[_].read();N!==null&&($[U]=null,$[v]=null,$[D]=null,le(I(N,!1)))}}function Z($){process.nextTick(R,$)}var z=Object.getPrototypeOf(function(){}),W=Object.setPrototypeOf((C(F={get stream(){return this[_]},next:function(){var $=this,le=this[m];if(le!==null)return Promise.reject(le);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,he){process.nextTick(function(){$[m]?he($[m]):oe(I(void 0,!0))})});var N,X=this[U];if(X)N=new Promise(function(oe,he){return function(be,Xe){oe.then(function(){he[T]?be(I(void 0,!0)):he[x](be,Xe)},Xe)}}(X,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(I(ce,!1));N=new Promise(this[x])}return this[U]=N,N}},Symbol.asyncIterator,function(){return this}),C(F,"return",function(){var $=this;return new Promise(function(le,N){$[_].destroy(null,function(X){X?N(X):le(I(void 0,!0))})})}),F),z);b.exports=function($){var le,N=Object.create(W,(C(le={},_,{value:$,writable:!0}),C(le,v,{value:null,writable:!0}),C(le,D,{value:null,writable:!0}),C(le,m,{value:null,writable:!0}),C(le,T,{value:$._readableState.endEmitted,writable:!0}),C(le,x,{value:function(X,ce){var oe=N[_].read();oe?(N[U]=null,N[v]=null,N[D]=null,X(I(oe,!1))):(N[v]=X,N[D]=ce)},writable:!0}),le));return N[U]=null,y($,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=N[D];return ce!==null&&(N[U]=null,N[v]=null,N[D]=null,ce(X)),void(N[m]=X)}var oe=N[v];oe!==null&&(N[U]=null,N[v]=null,N[D]=null,oe(I(void 0,!0))),N[T]=!0}),$.on("readable",Z.bind(null,N)),N}},8393:function(b,g,w){function F(T,U){var x=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),x.push.apply(x,_)}return x}function C(T,U,x){return U in T?Object.defineProperty(T,U,{value:x,enumerable:!0,configurable:!0,writable:!0}):T[U]=x,T}function y(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var v=w(1549).Buffer,D=w(9862).inspect,m=D&&D.custom||"inspect";b.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,x;return U=T,x=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,R=""+I.data;I=I.next;)R+=_+I.data;return R}},{key:"concat",value:function(_){if(this.length===0)return v.alloc(0);for(var I,R,Z,z=v.allocUnsafe(_>>>0),W=this.head,$=0;W;)I=W.data,R=z,Z=$,v.prototype.copy.call(I,R,Z),$+=W.data.length,W=W.next;return z}},{key:"consume",value:function(_,I){var R;return _<this.head.data.length?(R=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):R=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,R=1,Z=I.data;for(_-=Z.length;I=I.next;){var z=I.data,W=_>z.length?z.length:_;if(W===z.length?Z+=z:Z+=z.slice(0,_),(_-=W)==0){W===z.length?(++R,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=z.slice(W));break}++R}return this.length-=R,Z}},{key:"_getBuffer",value:function(_){var I=v.allocUnsafe(_),R=this.head,Z=1;for(R.data.copy(I),_-=R.data.length;R=R.next;){var z=R.data,W=_>z.length?z.length:_;if(z.copy(I,I.length-_,0,W),(_-=W)==0){W===z.length?(++Z,R.next?this.head=R.next:this.head=this.tail=null):(this.head=R,R.data=z.slice(W));break}++Z}return this.length-=Z,I}},{key:m,value:function(_,I){return D(this,function(R){for(var Z=1;Z<arguments.length;Z++){var z=arguments[Z]!=null?arguments[Z]:{};Z%2?F(Object(z),!0).forEach(function(W){C(R,W,z[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(z)):F(Object(z)).forEach(function(W){Object.defineProperty(R,W,Object.getOwnPropertyDescriptor(z,W))})}return R}({},I,{depth:0,customInspect:!1}))}}],x&&y(U.prototype,x),T}()},6163:function(b){function g(C,y){F(C,y),w(C)}function w(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function F(C,y){C.emit("error",y)}b.exports={destroy:function(C,y){var v=this,D=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return D||m?(y?y(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(F,this,C)):process.nextTick(F,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(T){!y&&T?v._writableState?v._writableState.errorEmitted?process.nextTick(w,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,T)):process.nextTick(g,v,T):y?(process.nextTick(w,v),y(T)):process.nextTick(w,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(C,y){var v=C._readableState,D=C._writableState;v&&v.autoDestroy||D&&D.autoDestroy?C.destroy(y):C.emit("error",y)}}},8800:function(b,g,w){var F=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}b.exports=function y(v,D,m){if(typeof D=="function")return y(v,null,D);D||(D={}),m=function(le){var N=!1;return function(){if(!N){N=!0;for(var X=arguments.length,ce=new Array(X),oe=0;oe<X;oe++)ce[oe]=arguments[oe];le.apply(this,ce)}}}(m||C);var T=D.readable||D.readable!==!1&&v.readable,U=D.writable||D.writable!==!1&&v.writable,x=function(){v.writable||I()},_=v._writableState&&v._writableState.finished,I=function(){U=!1,_=!0,T||m.call(v)},R=v._readableState&&v._readableState.endEmitted,Z=function(){T=!1,R=!0,U||m.call(v)},z=function(le){m.call(v,le)},W=function(){var le;return T&&!R?(v._readableState&&v._readableState.ended||(le=new F),m.call(v,le)):U&&!_?(v._writableState&&v._writableState.ended||(le=new F),m.call(v,le)):void 0},$=function(){v.req.on("finish",I)};return function(le){return le.setHeader&&typeof le.abort=="function"}(v)?(v.on("complete",I),v.on("abort",W),v.req?$():v.on("request",$)):U&&!v._writableState&&(v.on("end",x),v.on("close",x)),v.on("end",Z),v.on("finish",I),D.error!==!1&&v.on("error",z),v.on("close",W),function(){v.removeListener("complete",I),v.removeListener("abort",W),v.removeListener("request",$),v.req&&v.req.removeListener("finish",I),v.removeListener("end",x),v.removeListener("close",x),v.removeListener("finish",I),v.removeListener("end",Z),v.removeListener("error",z),v.removeListener("close",W)}}},6233:function(b){b.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(b,g,w){var F,C=w(3690).q,y=C.ERR_MISSING_ARGS,v=C.ERR_STREAM_DESTROYED;function D(_){if(_)throw _}function m(_,I,R,Z){Z=function($){var le=!1;return function(){le||(le=!0,$.apply(void 0,arguments))}}(Z);var z=!1;_.on("close",function(){z=!0}),F===void 0&&(F=w(8800)),F(_,{readable:I,writable:R},function($){if($)return Z($);z=!0,Z()});var W=!1;return function($){if(!z&&!W)return W=!0,function(le){return le.setHeader&&typeof le.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void Z($||new v("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function x(_){return _.length?typeof _[_.length-1]!="function"?D:_.pop():D}b.exports=function(){for(var _=arguments.length,I=new Array(_),R=0;R<_;R++)I[R]=arguments[R];var Z,z=x(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new y("streams");var W=I.map(function($,le){var N=le<I.length-1;return m($,N,le>0,function(X){Z||(Z=X),X&&W.forEach(T),N||(W.forEach(T),z(Z))})});return I.reduce(U)}},7269:function(b,g,w){var F=w(3690).q.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(C,y,v,D){var m=function(T,U,x){return T.highWaterMark!=null?T.highWaterMark:U?T[x]:null}(y,D,v);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new F(D?v:"highWaterMark",m);return Math.floor(m)}return C.objectMode?16:16384}}},9299:function(b,g,w){b.exports=w(1159).EventEmitter},7503:function(b,g,w){var F=w(8387).Buffer,C=F.isEncoding||function(R){switch((R=""+R)&&R.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(R){var Z;switch(this.encoding=function(z){var W=function($){if(!$)return"utf8";for(var le;;)switch($){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return $;default:if(le)return;$=(""+$).toLowerCase(),le=!0}}(z);if(typeof W!="string"&&(F.isEncoding===C||!C(z)))throw new Error("Unknown encoding: "+z);return W||z}(R),this.encoding){case"utf16le":this.text=m,this.end=T,Z=4;break;case"utf8":this.fillLast=D,Z=4;break;case"base64":this.text=U,this.end=x,Z=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=F.allocUnsafe(Z)}function v(R){return R<=127?0:R>>5==6?2:R>>4==14?3:R>>3==30?4:R>>6==2?-1:-2}function D(R){var Z=this.lastTotal-this.lastNeed,z=function(W,$,le){if((192&$[0])!=128)return W.lastNeed=0,"�";if(W.lastNeed>1&&$.length>1){if((192&$[1])!=128)return W.lastNeed=1,"�";if(W.lastNeed>2&&$.length>2&&(192&$[2])!=128)return W.lastNeed=2,"�"}}(this,R);return z!==void 0?z:this.lastNeed<=R.length?(R.copy(this.lastChar,Z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(R.copy(this.lastChar,Z,0,R.length),void(this.lastNeed-=R.length))}function m(R,Z){if((R.length-Z)%2==0){var z=R.toString("utf16le",Z);if(z){var W=z.charCodeAt(z.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=R[R.length-1],R.toString("utf16le",Z,R.length-1)}function T(R){var Z=R&&R.length?this.write(R):"";if(this.lastNeed){var z=this.lastTotal-this.lastNeed;return Z+this.lastChar.toString("utf16le",0,z)}return Z}function U(R,Z){var z=(R.length-Z)%3;return z===0?R.toString("base64",Z):(this.lastNeed=3-z,this.lastTotal=3,z===1?this.lastChar[0]=R[R.length-1]:(this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1]),R.toString("base64",Z,R.length-z))}function x(R){var Z=R&&R.length?this.write(R):"";return this.lastNeed?Z+this.lastChar.toString("base64",0,3-this.lastNeed):Z}function _(R){return R.toString(this.encoding)}function I(R){return R&&R.length?this.write(R):""}g.s=y,y.prototype.write=function(R){if(R.length===0)return"";var Z,z;if(this.lastNeed){if((Z=this.fillLast(R))===void 0)return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<R.length?Z?Z+this.text(R,z):this.text(R,z):Z||""},y.prototype.end=function(R){var Z=R&&R.length?this.write(R):"";return this.lastNeed?Z+"�":Z},y.prototype.text=function(R,Z){var z=function($,le,N){var X=le.length-1;if(X<N)return 0;var ce=v(le[X]);return ce>=0?(ce>0&&($.lastNeed=ce-1),ce):--X<N||ce===-2?0:(ce=v(le[X]))>=0?(ce>0&&($.lastNeed=ce-2),ce):--X<N||ce===-2?0:(ce=v(le[X]))>=0?(ce>0&&(ce===2?ce=0:$.lastNeed=ce-3),ce):0}(this,R,Z);if(!this.lastNeed)return R.toString("utf8",Z);this.lastTotal=z;var W=R.length-(z-this.lastNeed);return R.copy(this.lastChar,0,W),R.toString("utf8",Z,W)},y.prototype.fillLast=function(R){if(this.lastNeed<=R.length)return R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,R.length),this.lastNeed-=R.length}},1067:function(b,g,w){var F;(function(C,y){var v="function",D="undefined",m="object",T="string",U="major",x="model",_="name",I="type",R="vendor",Z="version",z="architecture",W="console",$="mobile",le="tablet",N="smarttv",X="wearable",ce="embedded",oe="Amazon",he="Apple",be="ASUS",Xe="BlackBerry",Ae="Browser",Ze="Chrome",tt="Firefox",ut="Google",$e="Huawei",lt="LG",wt="Microsoft",Oe="Motorola",Qe="Opera",ct="Samsung",Xt="Sharp",Kt="Sony",_t="Xiaomi",At="Zebra",Ce="Facebook",re="Chromium OS",Fe="Mac OS",O=function(ft){for(var vt={},Et=0;Et<ft.length;Et++)vt[ft[Et].toUpperCase()]=ft[Et];return vt},M=function(ft,vt){return typeof ft===T&&q(vt).indexOf(q(ft))!==-1},q=function(ft){return ft.toLowerCase()},K=function(ft,vt){if(typeof ft===T)return ft=ft.replace(/^\s\s*/,""),typeof vt===D?ft:ft.substring(0,500)},_e=function(ft,vt){for(var Et,Ct,hn,Qt,nn,Ot,Un=0;Un<vt.length&&!nn;){var gr=vt[Un],Pr=vt[Un+1];for(Et=Ct=0;Et<gr.length&&!nn&&gr[Et];)if(nn=gr[Et++].exec(ft))for(hn=0;hn<Pr.length;hn++)Ot=nn[++Ct],typeof(Qt=Pr[hn])===m&&Qt.length>0?Qt.length===2?typeof Qt[1]==v?this[Qt[0]]=Qt[1].call(this,Ot):this[Qt[0]]=Qt[1]:Qt.length===3?typeof Qt[1]!==v||Qt[1].exec&&Qt[1].test?this[Qt[0]]=Ot?Ot.replace(Qt[1],Qt[2]):y:this[Qt[0]]=Ot?Qt[1].call(this,Ot,Qt[2]):y:Qt.length===4&&(this[Qt[0]]=Ot?Qt[3].call(this,Ot.replace(Qt[1],Qt[2])):y):this[Qt]=Ot||y;Un+=2}},de=function(ft,vt){for(var Et in vt)if(typeof vt[Et]===m&&vt[Et].length>0){for(var Ct=0;Ct<vt[Et].length;Ct++)if(M(vt[Et][Ct],ft))return Et==="?"?y:Et}else if(M(vt[Et],ft))return Et==="?"?y:Et;return ft},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Z,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Z,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,Z],[/opios[\/ ]+([\w\.]+)/i],[Z,[_,Qe+" Mini"]],[/\bopr\/([\w\.]+)/i],[Z,[_,Qe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[Z,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,Z],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Z,[_,"UC"+Ae]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[Z,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Z,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Z,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[Z,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[Z,[_,"Smart Lenovo "+Ae]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Ae],Z],[/\bfocus\/([\w\.]+)/i],[Z,[_,tt+" Focus"]],[/\bopt\/([\w\.]+)/i],[Z,[_,Qe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Z,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Z,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[Z,[_,Qe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Z,[_,"MIUI "+Ae]],[/fxios\/([-\w\.]+)/i],[Z,[_,tt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Ae]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Ae],Z],[/samsungbrowser\/([\w\.]+)/i],[Z,[_,ct+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],Z],[/metasr[\/ ]?([\d\.]+)/i],[Z,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],Z],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,Z],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Ce],Z],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,Z],[/\bgsa\/([\w\.]+) .*safari\//i],[Z,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[Z,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Z,[_,Ze+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Ze+" WebView"],Z],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Z,[_,"Android "+Ae]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,Z],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[Z,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[Z,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[Z,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,Z],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],Z],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Z,[_,tt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,Z],[/(cobalt)\/([\w\.]+)/i],[_,[Z,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[z,"amd64"]],[/(ia32(?=;))/i],[[z,q]],[/((?:i[346]|x)86)[;\)]/i],[[z,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[z,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[z,"armhf"]],[/windows (ce|mobile); ppc;/i],[[z,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[z,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[z,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[z,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[x,[R,ct],[I,le]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[x,[R,ct],[I,$]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[x,[R,he],[I,$]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[x,[R,he],[I,le]],[/(macintosh);/i],[x,[R,he]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[x,[R,Xt],[I,$]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[x,[R,$e],[I,le]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[x,[R,$e],[I,$]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[x,/_/g," "],[R,_t],[I,$]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[x,/_/g," "],[R,_t],[I,le]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[x,[R,"OPPO"],[I,$]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[x,[R,"Vivo"],[I,$]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[x,[R,"Realme"],[I,$]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[x,[R,Oe],[I,$]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[x,[R,Oe],[I,le]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[x,[R,lt],[I,le]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[x,[R,lt],[I,$]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[x,[R,"Lenovo"],[I,le]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[x,/_/g," "],[R,"Nokia"],[I,$]],[/(pixel c)\b/i],[x,[R,ut],[I,le]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[x,[R,ut],[I,$]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[x,[R,Kt],[I,$]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[x,"Xperia Tablet"],[R,Kt],[I,le]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[x,[R,"OnePlus"],[I,$]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[x,[R,oe],[I,le]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[x,/(.+)/g,"Fire Phone $1"],[R,oe],[I,$]],[/(playbook);[-\w\),; ]+(rim)/i],[x,R,[I,le]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[x,[R,Xe],[I,$]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[x,[R,be],[I,le]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[x,[R,be],[I,$]],[/(nexus 9)/i],[x,[R,"HTC"],[I,le]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[R,[x,/_/g," "],[I,$]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[x,[R,"Acer"],[I,le]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[x,[R,"Meizu"],[I,$]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[x,[R,"Ulefone"],[I,$]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[R,x,[I,$]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[R,x,[I,le]],[/(surface duo)/i],[x,[R,wt],[I,le]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[x,[R,"Fairphone"],[I,$]],[/(u304aa)/i],[x,[R,"AT&T"],[I,$]],[/\bsie-(\w*)/i],[x,[R,"Siemens"],[I,$]],[/\b(rct\w+) b/i],[x,[R,"RCA"],[I,le]],[/\b(venue[\d ]{2,7}) b/i],[x,[R,"Dell"],[I,le]],[/\b(q(?:mv|ta)\w+) b/i],[x,[R,"Verizon"],[I,le]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[x,[R,"Barnes & Noble"],[I,le]],[/\b(tm\d{3}\w+) b/i],[x,[R,"NuVision"],[I,le]],[/\b(k88) b/i],[x,[R,"ZTE"],[I,le]],[/\b(nx\d{3}j) b/i],[x,[R,"ZTE"],[I,$]],[/\b(gen\d{3}) b.+49h/i],[x,[R,"Swiss"],[I,$]],[/\b(zur\d{3}) b/i],[x,[R,"Swiss"],[I,le]],[/\b((zeki)?tb.*\b) b/i],[x,[R,"Zeki"],[I,le]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[R,"Dragon Touch"],x,[I,le]],[/\b(ns-?\w{0,9}) b/i],[x,[R,"Insignia"],[I,le]],[/\b((nxa|next)-?\w{0,9}) b/i],[x,[R,"NextBook"],[I,le]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[R,"Voice"],x,[I,$]],[/\b(lvtel\-)?(v1[12]) b/i],[[R,"LvTel"],x,[I,$]],[/\b(ph-1) /i],[x,[R,"Essential"],[I,$]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[x,[R,"Envizen"],[I,le]],[/\b(trio[-\w\. ]+) b/i],[x,[R,"MachSpeed"],[I,le]],[/\btu_(1491) b/i],[x,[R,"Rotor"],[I,le]],[/(shield[\w ]+) b/i],[x,[R,"Nvidia"],[I,le]],[/(sprint) (\w+)/i],[R,x,[I,$]],[/(kin\.[onetw]{3})/i],[[x,/\./g," "],[R,wt],[I,$]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[x,[R,At],[I,le]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[x,[R,At],[I,$]],[/smart-tv.+(samsung)/i],[R,[I,N]],[/hbbtv.+maple;(\d+)/i],[[x,/^/,"SmartTV"],[R,ct],[I,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[R,lt],[I,N]],[/(apple) ?tv/i],[R,[x,he+" TV"],[I,N]],[/crkey/i],[[x,Ze+"cast"],[R,ut],[I,N]],[/droid.+aft(\w+)( bui|\))/i],[x,[R,oe],[I,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[x,[R,Xt],[I,N]],[/(bravia[\w ]+)( bui|\))/i],[x,[R,Kt],[I,N]],[/(mitv-\w{5}) bui/i],[x,[R,_t],[I,N]],[/Hbbtv.*(technisat) (.*);/i],[R,x,[I,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[R,K],[x,K],[I,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[R,x,[I,W]],[/droid.+; (shield) bui/i],[x,[R,"Nvidia"],[I,W]],[/(playstation [345portablevi]+)/i],[x,[R,Kt],[I,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[x,[R,wt],[I,W]],[/((pebble))app/i],[R,x,[I,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[x,[R,he],[I,X]],[/droid.+; (glass) \d/i],[x,[R,ut],[I,X]],[/droid.+; (wt63?0{2,3})\)/i],[x,[R,At],[I,X]],[/(quest( 2| pro)?)/i],[x,[R,Ce],[I,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[R,[I,ce]],[/(aeobc)\b/i],[x,[R,oe],[I,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[x,[I,$]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[x,[I,le]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,le]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,$]],[/(android[-\w\. ]{0,9});.+buil/i],[x,[R,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Z,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Z,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,Z],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Z,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,Z],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[Z,de,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[Z,de,He],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[Z,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Fe],[Z,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[Z,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,Z],[/\(bb(10);/i],[Z,[_,Xe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Z,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Z,[_,tt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Z,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[Z,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[Z,[_,Ze+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,re],Z],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,Z],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],Z],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,Z]]},ot=function(ft,vt){if(typeof ft===m&&(vt=ft,ft=y),!(this instanceof ot))return new ot(ft,vt).getResult();var Et=typeof C!==D&&C.navigator?C.navigator:y,Ct=ft||(Et&&Et.userAgent?Et.userAgent:""),hn=Et&&Et.userAgentData?Et.userAgentData:y,Qt=vt?function(Ot,Un){var gr={};for(var Pr in Ot)Un[Pr]&&Un[Pr].length%2==0?gr[Pr]=Un[Pr].concat(Ot[Pr]):gr[Pr]=Ot[Pr];return gr}(Tt,vt):Tt,nn=Et&&Et.userAgent==Ct;return this.getBrowser=function(){var Ot,Un={};return Un[_]=y,Un[Z]=y,_e.call(Un,Ct,Qt.browser),Un[U]=typeof(Ot=Un[Z])===T?Ot.replace(/[^\d\.]/g,"").split(".")[0]:y,nn&&Et&&Et.brave&&typeof Et.brave.isBrave==v&&(Un[_]="Brave"),Un},this.getCPU=function(){var Ot={};return Ot[z]=y,_e.call(Ot,Ct,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[R]=y,Ot[x]=y,Ot[I]=y,_e.call(Ot,Ct,Qt.device),nn&&!Ot[I]&&hn&&hn.mobile&&(Ot[I]=$),nn&&Ot[x]=="Macintosh"&&Et&&typeof Et.standalone!==D&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ot[x]="iPad",Ot[I]=le),Ot},this.getEngine=function(){var Ot={};return Ot[_]=y,Ot[Z]=y,_e.call(Ot,Ct,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[_]=y,Ot[Z]=y,_e.call(Ot,Ct,Qt.os),nn&&!Ot[_]&&hn&&hn.platform!="Unknown"&&(Ot[_]=hn.platform.replace(/chrome os/i,re).replace(/macos/i,Fe)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===T&&Ot.length>500?K(Ot,500):Ot,this},this.setUA(Ct),this};ot.VERSION="1.0.37",ot.BROWSER=O([_,Z,U]),ot.CPU=O([z]),ot.DEVICE=O([x,R,I,W,$,N,le,X,ce]),ot.ENGINE=ot.OS=O([_,Z]),typeof g!==D?(b.exports&&(g=b.exports=ot),g.UAParser=ot):w.amdO?(F=(function(){return ot}).call(g,w,g,b))===y||(b.exports=F):typeof C!==D&&(C.UAParser=ot);var it=typeof C!==D&&(C.jQuery||C.Zepto);if(it&&!it.ua){var et=new ot;it.ua=et.getResult(),it.ua.get=function(){return et.getUA()},it.ua.set=function(ft){et.setUA(ft);var vt=et.getResult();for(var Et in vt)it.ua[Et]=vt[Et]}}})(typeof window=="object"?window:this)},7839:function(b,g,w){function F(C){try{if(!w.g.localStorage)return!1}catch(v){return!1}var y=w.g.localStorage[C];return y!=null&&String(y).toLowerCase()==="true"}b.exports=function(C,y){if(F("noDeprecation"))return C;var v=!1;return function(){if(!v){if(F("throwDeprecation"))throw new Error(y);F("traceDeprecation")?console.trace(y):console.warn(y),v=!0}return C.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(b){b.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(b){b.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(b){b.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(b){b.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(b){b.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(b){b.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},f={};function p(b){var g=f[b];if(g!==void 0)return g.exports;var w=f[b]={exports:{}};return l[b].call(w.exports,w,w.exports,p),w.exports}p.amdO={},p.n=function(b){var g=b&&b.__esModule?function(){return b.default}:function(){return b};return p.d(g,{a:g}),g},p.d=function(b,g){for(var w in g)p.o(g,w)&&!p.o(b,w)&&Object.defineProperty(b,w,{enumerable:!0,get:g[w]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(b){if(typeof window=="object")return window}}(),p.o=function(b,g){return Object.prototype.hasOwnProperty.call(b,g)};var S={};return function(){p.d(S,{default:function(){return m}}),p(8416);var b,g=p(1715),w=p(8080),F=p(1737),C=p(1139),y=function(){var T,U="application/dash+xml";function x(I,R,Z){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var z,W=I.id||I.name||"video element";if(!(R=R||[].slice.call(I.querySelectorAll("source")).filter(function($){return $.type==U})[0])&&I.src)(R=document.createElement("source")).src=I.src;else if(!R&&!I.src)return null;return Z=Z||{},(z=(0,C.Z)(Z).create()).initialize(I,R.src,I.autoplay),T||(T=z.getDebug().getLogger()),T.debug("Converted "+W+" to dash.js player and added content: "+R.src),I._dashjs_player=z,z}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:x,createAll:function(I,R){var Z=[];I=I||"[data-dashjs-player]";for(var z=(R=R||document).querySelectorAll(I),W=0;W<z.length;W++){var $=x(z[W],null);Z.push($)}for(var le=R.querySelectorAll('source[type="'+U+'"]'),N=0;N<le.length;N++){var X=x(_(le[N]),null);Z.push(X)}return Z}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?y.createAll():b=window.setInterval(function(){window.dashjs&&(window.clearInterval(b),y.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),y.createAll()}));var v=y,D=p(6398);dashjs.Protection=F.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=v,dashjs.Debug=D.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),S.default}()})})(V4);var Nz=V4.exports;const xz=Eb(Nz);var bu,Gi,PA,OA,vg={};vg.d=(i,o)=>{for(var l in o)vg.o(o,l)&&!vg.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:o[l]})},vg.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o);var pE={};function nF(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,f=Array(o);l<o;l++)f[l]=i[l];return f}function Xi(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},f=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),f.forEach(function(p){var S;S=l[p],p in i?Object.defineProperty(i,p,{value:S,enumerable:!0,configurable:!0,writable:!0}):i[p]=S})}return i}function uo(i,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):function(l,f){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);p.push.apply(p,S)}return p}(Object(o)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(o,l))}),i}function rF(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,f){var p,S,b=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(b!=null){var g=[],w=!0,F=!1;try{for(b=b.call(l);!(w=(p=b.next()).done)&&(g.push(p.value),!f||g.length!==f);w=!0);}catch(C){F=!0,S=C}finally{try{w||b.return==null||b.return()}finally{if(F)throw S}}return g}}(i,o)||function(l,f){if(l){if(typeof l=="string")return nF(l,f);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return nF(l,f)}}(i,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}vg.d(pE,{GP:()=>PA,fZ:()=>Dz,vn:()=>OA}),(bu=PA||(PA={})).LOADED="loaded",bu.SEEKING="seeking",bu.SEEKED="seeked",bu.BUFFERING="buffering",bu.BUFFERED="buffered",bu.PLAY="play",bu.PLAYING="playing",bu.PAUSE="pause",bu.ENDED="ended",bu.TIME_UPDATE="timeupdate",(Gi=OA||(OA={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var Mz={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},Dz=function(i){var o=i.mediaElement,l=i.callback,f=i.allowResumeAfterEnded,p=f!==void 0&&f,S=null,b=function(){typeof S=="number"&&clearTimeout(S)},g=Xi({},Mz),w=function(){return p?g.loading:g.loading||g.ended},F=function(){!g.loading&&g.buffering&&o.playbackRate>0&&(g=uo(Xi({},g),{buffering:!1}),l("buffered")),g.loading&&(o.playbackRate===0?g=uo(Xi({},g),{deferLoadedEvent:!0}):(g=uo(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},C=function(){w()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=uo(Xi({},g),{seeking:!0,buffering:!1}),l("seeking"))},y=function(){if(!w()&&g.seeking){if(o.playbackRate===0){g=uo(Xi({},g),{deferSeekedEvent:!0});return}g=uo(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},v=function(){if(b(),!w()&&!g.seeking){if(o.seeking){C();return}g.buffering||(g=uo(Xi({},g),{buffering:!0}),l("buffering"))}},D=function(){if(b(),o.playbackRate===0){g=uo(Xi({},g),{deferPlayingEvent:!0});return}(g=uo(Xi({},g),{deferPlayingEvent:!1})).loading&&F(),g.initialPlayFired?g.buffering?(g=uo(Xi({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=uo(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=uo(Xi({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=uo(Xi({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&o.playbackRate===0&&!o.seeking},T=[["canplaythrough",F],["playing",D],["waiting",v],["seeking",C],["seeked",y],["ended",function(){g=uo(Xi({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),b(),l("ended")}],["timeupdate",function(){w()||(g.buffering&&!o.paused&&(g=uo(Xi({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&g.paused&&g.initialPlayFired&&(g=uo(Xi({},g),{playRequested:!0}),l("play"))}],["pause",function(){!o.ended&&(g.playRequested||!g.paused)&&((g=uo(Xi({},g),{playRequested:!1})).deferLoadedEvent?(g=uo(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),o.paused&&(g=uo(Xi({},g),{paused:!0}),l("pause"))):(g=uo(Xi({},g),{paused:!0}),l("pause")))}],["ratechange",function(){b();var U=o.playbackRate>0;g.deferLoadedEvent&&U&&F(),g.deferSeekedEvent&&U&&y(),g.deferPlayingEvent&&U&&D(),!w()&&(m()?S=window.setTimeout(function(){m()&&v()},50):g.buffering&&U&&(g=uo(Xi({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var x=rF(U,2),_=x[0],I=x[1];return o.addEventListener(_,I)}),{teardown:function(){b(),T.forEach(function(U){var x=rF(U,2),_=x[0],I=x[1];return o.removeEventListener(_,I)})}}},Cu=pE.GP;pE.vn;var Pz=pE.fZ;const Oz={NEAR_END:"nearend"};class z4 extends bf{constructor(o){var l;super(),this.options=o,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(o){return{currentTime:o.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=Pz({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:o=>{const l=this.createBaseEventPayload(this.video);switch(o){case Cu.LOADED:{this.emit("loaded",l);break}case Cu.SEEKING:{this.emit("seeking",l);break}case Cu.SEEKED:{this.emit("seeked",l);break}case Cu.BUFFERING:{this.emit("buffering",l);break}case Cu.BUFFERED:{this.emit("buffered",l);break}case Cu.PLAY:{this.emit("play",l);break}case Cu.PLAYING:{this.emit("playing",l);break}case Cu.PAUSE:{this.emit("pause",l);break}case Cu.ENDED:{this.emit("ended",l);break}case Cu.TIME_UPDATE:{const f=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&f>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&f<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(Oz.NEAR_END,{...l,remainingTime:f})),this.emit("timeupdate",l);break}}}})}destroy(){var o;(o=this.eventFilter)==null||o.teardown()}getStats(){const o=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:o.droppedVideoFrames,totalVideoFrames:o.totalVideoFrames}}}class Lz extends Error{constructor(o,l){super(o),this.rawError=l}}class kz extends z4{constructor(o){var f,p;super(o),this.name="DashJSEngine",this.player=xz.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(S){return S+o.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(f=this.options)==null?void 0:f.widevineLicenseUrl,httpRequestHeaders:o.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(o,l){this.setupMediaEventFilter(),await new Promise((f,p)=>{var S;this.once("loaded",()=>{f()});try{this.player.attachSource(o,Math.max((S=l==null?void 0:l.startTimeSeconds)!=null?S:0,0))}catch(b){p(new Lz("UnknownError",b))}})}}var Y4={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(i){(function(){var o=typeof window<"u"?window:nu,l={};(function(p,S,b){var g;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var F=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof S=="object"&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=C(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&F(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,d){this.g=c,F(this,"description",{configurable:!0,writable:!0,value:d})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&F(r.prototype,e,{configurable:!0,writable:!0,value:function(){return D(w(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:w(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},x;if(typeof Object.setPrototypeOf=="function")x=Object.setPrototypeOf;else{var _;e:{var I={a:!0},R={};try{R.__proto__=I,_=R.a;break e}catch(e){}_=!1}x=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Z=x;function z(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,Z)Z(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Ij=t.prototype}function W(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function $(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}W.prototype.s=function(e){this.h=e};function le(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}W.prototype.return=function(e){this.i={return:e},this.g=this.j};function N(e,t,n){return e.g=n,{value:t}}W.prototype.u=function(e){this.g=e};function X(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function he(e,t,n){e.g=t,e.m=n||0}function be(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function Xe(e){e.A=[e.i],e.m=0,e.j=0}function Ae(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Ze(e){this.g=new W,this.h=e}function tt(e,t){$(e.g);var n=e.g.l;return n?ut(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),$e(e))}function ut(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(d){return e.g.l=null,le(e.g,d),$e(e)}return e.g.l=null,r.call(e.g,c),$e(e)}function $e(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,le(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function lt(e){this.next=function(t){return $(e.g),e.g.l?t=ut(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=$e(e)),t},this.throw=function(t){return $(e.g),e.g.l?t=ut(e,e.g.l.throw,t,e.g.s):(le(e.g,t),t=$e(e)),t},this.return=function(t){return tt(e,t)},this[Symbol.iterator]=function(){return this}}function wt(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(d){d.done?r(d.value):Promise.resolve(d.value).then(t,n).then(c,u)}c(e.next())})}function Oe(e){return wt(new lt(new Ze(e)))}function Qe(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(d){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{d(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function r(d){return d instanceof t?d:new t(function(h){h(d)})}if(e)return e;n.prototype.h=function(d){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(d)};var u=y.setTimeout;n.prototype.i=function(d){u(d,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var d=this.g;this.g=[];for(var h=0;h<d.length;++h){var E=d[h];d[h]=null;try{E()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(d){this.i(function(){throw d})},t.prototype.j=function(){function d(A){return function(k){E||(E=!0,A.call(h,k))}}var h=this,E=!1;return{resolve:d(this.F),reject:d(this.l)}},t.prototype.F=function(d){if(d===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof t)this.H(d);else{e:switch(typeof d){case"object":var h=d!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(d):this.m(d)}},t.prototype.C=function(d){var h=void 0;try{h=d.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,d):this.m(d)},t.prototype.l=function(d){this.s(2,d)},t.prototype.m=function(d){this.s(1,d)},t.prototype.s=function(d,h){if(this.h!=0)throw Error("Cannot settle("+d+", "+h+"): Promise already settled in state"+this.h);this.h=d,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var d=this;u(function(){if(d.B()){var h=y.console;typeof h<"u"&&h.error(d.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var d=y.CustomEvent,h=y.Event,E=y.dispatchEvent;return typeof E>"u"?!0:(typeof d=="function"?d=new d("unhandledrejection",{cancelable:!0}):typeof h=="function"?d=new h("unhandledrejection",{cancelable:!0}):(d=y.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d)),d.promise=this,d.reason=this.i,E(d))},t.prototype.A=function(){if(this.g!=null){for(var d=0;d<this.g.length;++d)c.h(this.g[d]);this.g=null}};var c=new n;return t.prototype.H=function(d){var h=this.j();d.Fd(h.resolve,h.reject)},t.prototype.I=function(d,h){var E=this.j();try{d.call(h,E.resolve,E.reject)}catch(A){E.reject(A)}},t.prototype.then=function(d,h){function E(te,Y){return typeof te=="function"?function(ve){try{A(te(ve))}catch(Pe){k(Pe)}}:Y}var A,k,G=new t(function(te,Y){A=te,k=Y});return this.Fd(E(d,A),E(h,k)),G},t.prototype.catch=function(d){return this.then(void 0,d)},t.prototype.Fd=function(d,h){function E(){switch(A.h){case 1:d(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=r,t.reject=function(d){return new t(function(h,E){E(d)})},t.race=function(d){return new t(function(h,E){for(var A=m(d),k=A.next();!k.done;k=A.next())r(k.value).Fd(h,E)})},t.all=function(d){var h=m(d),E=h.next();return E.done?r([]):new t(function(A,k){function G(ve){return function(Pe){te[ve]=Pe,Y--,Y==0&&A(te)}}var te=[],Y=0;do te.push(void 0),Y++,r(E.value).Fd(G(te.length-1),k),E=h.next();while(!E.done)})},t});function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var A;!(A=E.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function r(E){var A=typeof E;return A==="object"&&E!==null||A==="function"}function u(E){if(!ct(E,d)){var A=new n;F(E,d,{value:A})}}function c(E){var A=Object[E];A&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),A(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),A=Object.seal({}),k=new e([[E,2],[A,3]]);return k.get(E)!=2||k.get(A)!=3?!1:(k.delete(E),k.set(A,4),!k.has(E)&&k.get(A)==4)}catch(G){return!1}}())return e;var d="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,A){if(!r(E))throw Error("Invalid WeakMap key");if(u(E),!ct(E,d))throw Error("WeakMap key fail: "+E);return E[d][this.g]=A,this},t.prototype.get=function(E){return r(E)&&ct(E,d)?E[d][this.g]:void 0},t.prototype.has=function(E){return r(E)&&ct(E,d)&&ct(E[d],this.g)},t.prototype.delete=function(E){return r(E)&&ct(E,d)&&ct(E[d],this.g)?delete E[d][this.g]:!1},t}),v("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var A=h.g;return D(function(){if(A){for(;A.head!=h.g;)A=A.Ab;for(;A.next!=A.head;)return A=A.next,{done:!1,value:E(A)};A=null}return{done:!0,value:void 0}})}function r(h,E){var A=E&&typeof E;A=="object"||A=="function"?c.has(E)?A=c.get(E):(A=""+ ++d,c.set(E,A)):A="p_"+E;var k=h.h[A];if(k&&ct(h.h,A))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:A,list:k,index:h,entry:G}}return{id:A,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var A=E.entries(),k=A.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=A.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!A.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var A=r(this,h);return A.list||(A.list=this.h[A.id]=[]),A.entry?A.entry.value=E:(A.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},A.list.push(A.entry),this.g.Ab.next=A.entry,this.g.Ab=A.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var A=this.entries(),k;!(k=A.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var d=0;return u}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(d){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function Xt(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}v("Array.prototype.keys",function(e){return e||function(){return Xt(this,function(t){return t})}});function Kt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return Kt(this,t,n).gg}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function _t(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return _t(this,t,"includes").indexOf(t,n||0)!==-1}}),v("Array.prototype.find",function(e){return e||function(t,n){return Kt(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var r=_t(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var d=0;d<c&&n<u;)if(r[n++]!=t[d++])return!1;return d>=c}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),v("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var d=0;!(c=t.next()).done;)u.push(n.call(r,c.value,d++))}else for(c=t.length,d=0;d<c;d++)u.push(n.call(r,t[d],d));return u}});var At=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)ct(r,u)&&(e[u]=r[u])}return e};v("Object.assign",function(e){return e||At}),v("Array.prototype.values",function(e){return e||function(){return Xt(this,function(t,n){return n})}}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return Xt(this,function(t,n){return[t,n]})}}),v("String.prototype.repeat",function(e){return e||function(t){var n=_t(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ct(t,r)&&n.push(t[r]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ct(t,r)&&n.push([r,t[r]]);return n}});var Ce=this||self;function re(e,t){e=e.split(".");var n=Ce;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Fe(){}function O(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function _e(){}function de(){}function He(){}function Tt(e){var t=Qe.apply(1,arguments);ft.has(e)||(ft.add(e),He.apply(_e,T(t)))}function ot(){}function it(){}function et(){}var ft=new Set;p.console&&(He=function(){return console.warn.apply(console,T(Qe.apply(0,arguments)))},de=function(){console.error.apply(console,T(Qe.apply(0,arguments)))});function vt(){this.g={}}g=vt.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function Et(){this.g=new vt}g=Et.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,r){this.g&&(e=new Ct(e,t,n,r),this.g.push(t,e))},g.na=function(e,t,n,r){function u(d){c.Kb(e,t,u),n(d)}var c=this;this.D(e,t,u,r)},g.Kb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},re("shaka.util.EventManager",Et),Et.prototype.removeAll=Et.prototype.ib,Et.prototype.unlisten=Et.prototype.Kb,Et.prototype.listenOnce=Et.prototype.na,Et.prototype.listen=Et.prototype.D,Et.prototype.release=Et.prototype.release;function Ct(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=hn(e,r),this.target.addEventListener(t,n,this.g)}Ct.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function hn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Qt(e)?t:t.capture||!1}function Qt(e){var t=nn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Ot(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Pr(e,t){this.g=e,this.h=t}Pr.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Pr(5,0),r=Or,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function ti(e,t,n,r){He([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function eo(e,t,n,r){de([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Or=null;function to(){}to.prototype.extract=function(){},to.prototype.decode=function(){return[]},to.prototype.clear=function(){},to.prototype.getStreams=function(){return[]};function Ti(){}Ti.prototype.init=function(){},Ti.prototype.parse=function(){return[]};function Di(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(no(e)==no(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function no(e){return e instanceof ArrayBuffer?e:e.buffer}function Si(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function Lu(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,r){var u=no(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var d=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,d))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),d))-e)}re("shaka.util.BufferUtils",Di),Di.toDataView=tn,Di.toUint16=Lu,Di.toUint8=Qn,Di.toArrayBuffer=Si,Di.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},re("shaka.media.IClosedCaptionParser",an);function St(e){this.l=new Ti,(e=zt[e.toLowerCase()])&&(this.l=e()),this.g=new to,(e=Mt)&&(this.g=e())}St.prototype.init=function(e){this.l.init(e)},St.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},St.prototype.h=function(){this.g.clear()},St.prototype.j=function(){return this.g.getStreams()},re("shaka.media.ClosedCaptionParser",St),St.findDecoder=function(){return Mt},St.unregisterDecoder=function(){Mt=null},St.registerDecoder=function(e){Mt=e},St.findParser=function(e){return zt[e]},St.unregisterParser=function(e){delete zt[e]},St.registerParser=function(e,t){zt[e]=t};var zt={},Mt=null;function Vt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function mn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;t=t.slice();var r={};e=m(e);for(var u=e.next();!u.done;r={ne:r.ne},u=e.next()){if(r.ne=u.value,u=t.findIndex(function(c){return function(d){return n(c.ne,d)}}(r)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Cn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Vn,this.writingMode=rn,this.lineInterpretation=cn,this.line=null,this.lineHeight="",this.lineAlign=bn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Lr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}Cn.prototype.clone=function(){var e=new Cn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}re("shaka.text.Cue",Cn),Cn.equal=on,Cn.prototype.clone=Cn.prototype.clone;var Bn="auto";Cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};Cn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};Cn.displayAlign=Ur;var Vn="ltr";Cn.direction={HORIZONTAL_LEFT_TO_RIGHT:Vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";Cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var cn=0;Cn.lineInterpretation={LINE_NUMBER:cn,PERCENTAGE:1};var bn="start",Jn={CENTER:"center",START:bn,END:"end"};Cn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Cn.defaultTextColor=ar;var br={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Cn.defaultTextBackgroundColor=br;var Lr=400;Cn.fontWeight={NORMAL:Lr,BOLD:700};var Yi="normal",ro={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};Cn.fontStyle=ro,Cn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=pi}re("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var pi="";Br.scrollMode={NONE:pi,UP:"up"};function yi(){}yi.prototype.destroy=function(){};function wo(e,t,n){ea[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function io(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([_c,lu,Il,Ci]),u=r.next();!u.done;u=r.next())if(u=ea[n+"-"+u.value]){var c=u.ge(),d=c.isSupported(e,t);if(c.destroy(),d)return u.ge}return null}re("shaka.transmuxer.TransmuxerEngine",yi),yi.findTransmuxer=io,yi.unregisterTransmuxer=function(e,t){delete ea[e.toLowerCase().split(";")[0]+"-"+t]},yi.registerTransmuxer=wo,yi.prototype.destroy=yi.prototype.destroy;var ea={},Ci=1,Il=2,lu=3,_c=4;yi.PluginPriority={FALLBACK:Ci,PREFERRED_SECONDARY:Il,PREFERRED:lu,APPLICATION:_c};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Nf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function ui(e){var t;e instanceof ui?(Ds(this,e.kb),this.mc=e.mc,_n(this,e.wb),Xn(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(Nf))?(Ds(this,t[1]||"",!0),this.mc=ni(t[2]||""),_n(this,t[3]||"",!0),Xn(this,t[4]),this.Pa=ni(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ni(t[7]||"")):this.g=new Wi(null)}g=ui.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,Qr,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,Qr,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Pi:ta,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,Ao)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new ui);var n=!!e.kb;n?Ds(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var r=e.Pa;if(n)Xn(t,e.Bc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.wb&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],d=0;d<r.length;){var h=r[d++];h=="."?u&&d==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&d==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new ui(this)};function Ds(e,t,n){e.kb=n?ni(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ni(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,li)),e.g=new Wi(t))}function ni(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Qr=/[#\/\?@]/g,ta=/[#\?:]/g,Pi=/[#\?]/g,li=/[#\?@]/g,Ao=/#/g;function Wi(e){this.g=e||null}function Go(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function na(e){return Go(e),e.Zc}g.add=function(e,t){Go(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return Go(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return Go(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),r=this.Ca[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function pt(e,t,n){var r=Qe.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}pt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},re("shaka.util.Error",pt),pt.Severity={RECOVERABLE:1,CRITICAL:2},pt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},pt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function ra(e){this.h=e,this.g=void 0}ra.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ps(e){this.h=e,this.g=null}Ps.prototype.X=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){p.clearTimeout(r),n=!1},r=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ps.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ps(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ps(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},re("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function Io(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function cu(e){return Sc().canPlayType(e)!=""}function bl(){return!!navigator.userAgent.match(/Edge?\//)}function ms(){return Wr("Xbox One")}function Ha(){return Wr("Tizen")}function ku(){return Wr("Tizen 3")}function Fu(){return Wr("Tizen 2")}function ia(){return Wr("Web0S")}function oa(){return Wr("CrKey")}function fu(){if(!Wr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function vs(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ha()&&!Wr("PC=EOS")&&!Wr("PC=APL")&&!Wr("VirginMedia")&&!Wr("SOPOpenBrowser")&&!Nr()&&!Wr("AFT")&&!Wr("WPE")}function Tc(){return Wr("PlayStation 5")}function Nr(){return Wr("PlayStation 4")}function ys(){return Wr("Hisense")||Wr("VIDAA")}function Es(){if(!vs())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Wr(e){return(navigator.userAgent||"").includes(e)}function Sc(){return aa||(Cl||(Cl=new pr(function(){aa=null})),(aa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(aa=document.createElement("video")),Cl.X(1),aa)}function Ia(){var e,t,n,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},oa()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(Ha()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){He("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(ms()){n=new Windows.Media.Protection.ProtectionCapabilities,r=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===r.maybe)}catch(G){u=r.notSupported}u===r.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(ia()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){He("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(ys()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!Nr()&&!Tc()){k.u(2);break}return d=!1,ce(k,8),N(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,d=h.resolution==="4K",he(k,9);break;case 8:return be(k),ce(k,11),N(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,d=E.resolution==="4K",he(k,9);break;case 11:A=be(k),He("PlayStation: Failed to get the display info:",A);case 9:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var Cl=null,aa=null;function _s(){}function Vr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!Nr())return e=new TextDecoder().decode(e),e.includes("�")&&de('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function Ka(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new pt(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return Nh(r)}function Va(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Vr(n);if(n[0]==254&&n[1]==255)return Ka(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ka(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ka(e,!1);if(n[1]==0&&n[3]==0)return Ka(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Vr(e);throw new pt(2,2,2003)}function za(e){if(p.TextEncoder&&!Nr()){var t=new TextEncoder;return Si(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Si(t)}function xf(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function Nh(e){return lm.value()(e)}function bo(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}re("shaka.util.StringUtils",_s),_s.resetFromCharCode=function(){lm.g=void 0},_s.toUTF16=xf,_s.toUTF8=za,_s.fromBytesAutoDetect=Va,_s.fromUTF16=Ka,_s.fromUTF8=Vr;var lm=new ra(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.Db)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.Db));return u}}(t);return null});function Oi(){}function Mf(e){return e=Nh(Qn(e)),btoa(e)}function du(e,t){return t=t==null?!0:t,e=Mf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function qo(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function hu(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=p.parseInt(e.substr(2*r,2),16);return n}function Os(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function ci(){for(var e=Qe.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}re("shaka.util.Uint8ArrayUtils",Oi),Oi.concat=ci,Oi.toHex=Os,Oi.fromHex=hu,Oi.fromBase64=qo,Oi.toBase64=du,Oi.toStandardBase64=Mf;function fo(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new ui(e[0]);return t=new ui(t[0]),[n.resolve(t).toString()]}t=t.map(function(d){return new ui(d)}),n=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new ui(r.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(r.resolve(c.value).toString())}return n}function Uu(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function xh(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(d,h){var E=h;E.length!=22&&(E=du(hu(h),!1));var A=d;A.length!=22&&(A=du(hu(d),!1)),d={kty:"oct",kid:E,k:A},n.push(d),r.push(d.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:Qn(za(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Bu(e,t){if(t.length==1)return t[0];if(e=Co(e,t),e!=null)return e;throw new pt(2,4,4025,t)}function Co(e,t){for(var n=m(Dh[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==vr?"":null}function Mh(e,t){var n=[];e=m(Dh[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var vr="text",Ei={fa:"video",S:"audio",ma:vr,ue:"image",Gi:"application"},Dh={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function wc(){}function wi(e,t){var n=e;return t&&!pu.includes(e)&&(n+='; codecs="'+t+'"'),n}function ju(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ls(e,t,n){var r=wi(e,t);return t=ju(e,t),io(t)?(e=io(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function cm(e,t,n){var r=[t];return wE.forEach(function(u,c){var d=e[c];c=="codecs"?pu.includes(e.mimeType)||r.push('codecs="'+n+'"'):d&&r.push(u+'="'+d+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function Df(e){return e.split(";")[0].split("/")[1]}function ba(e){var t=Ph(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Ya(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Ph(n.value),t.push(n[0]);return t.sort().join(",")}function Ca(e){return e.split(";")[0]}function Do(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function fm(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Ph(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}re("shaka.util.MimeUtils",wc),wc.getFullTypeWithAllCodecs=ju,wc.getFullType=wi;var wE=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),pu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ks(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Rl(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Mt:!1}ks.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function AE(e,t,n,r,u){var c,d,h,E,A,k,G;return Oe(function(te){if(te.g==1)return N(te,Promise.resolve(),2);if(!e.i||!e.j)return te.return();if(n==null||r==null)return e.i.parseInit(Qn(t)),te.return();for(c=e.B?n:e.s,d={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(Qn(t),d,u),E=m(h),A=E.next();!A.done;A=E.next())k=A.value,e.A(k,u||null,d);G=h.filter(function(Y){return Y.startTime>=e.l&&Y.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(te)})}ks.prototype.remove=function(e,t){var n=this;return Oe(function(r){if(r.g==1)return N(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function Oh(e,t,n){e.l=t,e.m=n}function Pf(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function dm(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())dm(e,r.value,n)}function Of(e,t,n,r,u){var c=n+" "+r,d=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,d.has(h)||d.set(h,new Map),d.get(h).has(c)||d.get(h).set(c,[]),dm(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(d.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(d.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(d.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=d.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}re("shaka.text.TextEngine",ks),ks.prototype.destroy=ks.prototype.destroy,ks.findParser=function(e){return ji[e]},ks.unregisterParser=function(e){delete ji[e]},ks.registerParser=function(e,t){ji[e]=t};var ji={};function hm(e,t){return e.concat(t)}function pm(){}function Zu(e){return e!=null}function mo(){}function Gu(e,t){return e=Cr(e),t=Cr(t),e.split("-")[0]==t.split("-")[0]}function Ac(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function qu(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Cr(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ri.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Hu(e,t){return e=Cr(e),t=Cr(t),t==e?4:Ac(t,e)?3:qu(t,e)?2:Ac(e,t)?1:0}function Lh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ri.get(e)||e}function Ku(e){return e.language?Cr(e.language):e.audio&&e.audio.language?Cr(e.audio.language):e.video&&e.video.language?Cr(e.video.language):"und"}function Nl(e,t){e=Cr(e);var n=new Set,r=m(t);for(t=r.next();!t.done;t=r.next())n.add(Cr(t.value));for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,t==e)return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Ac(t,e))return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,qu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Ac(e,t))return t;return null}re("shaka.util.LanguageUtils",mo),mo.findClosestLocale=Nl,mo.getLocaleForVariant=Ku,mo.getLocaleForText=function(e){return Cr(e.language||"und")},mo.getBase=Lh,mo.relatedness=Hu,mo.areSiblings=function(e,t){var n=Lh(e),r=Lh(t);return e!=n&&t!=r&&n==r},mo.normalize=Cr,mo.isSiblingOf=qu,mo.isParentOf=Ac,mo.areLanguageCompatible=Gu,mo.areLocaleCompatible=function(e,t){return e=Cr(e),t=Cr(t),e==t};var ri=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Wa(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},d;for(d in r)c[d]=t(r[d]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function gm(e){var t={},n;for(n in e)t[n]=e[n];return t}function Ic(){}function mm(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=kh(u,t,n)),r.length){for(t=new vt,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ve,Pe){ve=0;var xe=[],Ge={};Pe=m(Pe);for(var Te=Pe.next();!Te.done;Ge={Uc:Ge.Uc},Te=Pe.next())Ge.Uc=Te.value,Te=r.filter(function(We){return function(Ue){return We.Uc.decodingInfos[0][Ue]}}(Ge)).length,Te>ve?(ve=Te,xe=[Ge.Uc]):Te==ve&&xe.push(Ge.Uc);c.push.apply(c,T(xe))}),u=c}n=new Set,t=new Set;var d=m(u);for(u=d.next();!u.done;u=d.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ve,Pe){return ve.bandwidth-Pe.bandwidth});var h=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){d=d.value;var E=d.language+(d.channelsCount||0)+(d.audioSamplingRate||0)+d.roles.join(",")+d.label+d.groupId+d.fastSwitching,A=u.get(E)||[];if(A.length){var k=A[A.length-1],G=ba(k.codecs),te=ba(d.codecs);G==te&&d.bandwidth>k.bandwidth&&(A.push(d),h.push(d.id))}else A.push(d),h.push(d.id);u.set(E,A)}n=Array.from(t).sort(function(ve,Pe){return ve.bandwidth&&Pe.bandwidth?ve.bandwidth-Pe.bandwidth:ve.width-Pe.width}),t=Un();var Y=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){if(d=d.value,E=Math.round(d.frameRate||0)+(d.hdr||"")+d.fastSwitching,A=u.get(E)||[],A.length){if(k=A[A.length-1],!t&&(G=ba(k.codecs),te=ba(d.codecs),G!==te))continue;d.width>k.width||d.height>k.height?(A.push(d),Y.push(d.id)):d.width==k.width&&d.height==k.height&&(G=ba(k.codecs),te=ba(d.codecs),G==te&&d.bandwidth>k.bandwidth&&(A.push(d),Y.push(d.id)))}else A.push(d),Y.push(d.id);u.set(E,A)}e.variants=e.variants.filter(function(ve){var Pe=ve.audio;return ve=ve.video,!(Pe&&!h.includes(Pe.id)||ve&&!Y.includes(ve.id))})}function kh(e,t,n){var r={};t=m(t);for(var u=t.next();!u.done;r={te:r.te},u=t.next())if(r.te=u.value,u=e.filter(function(c){return function(d){return d.video&&d.video.codecs.startsWith(c.te)}}(r)),u.length){e=u;break}for(r={},n=m(n),t=n.next();!t.done;r={me:r.me},t=n.next())if(r.me=t.value,t=e.filter(function(c){return function(d){return d.audio&&d.audio.codecs.startsWith(c.me)}}(r)),t.length){e=t;break}return e}function Fh(e,t,n){e.variants=e.variants.filter(function(r){return Lf(r,t,n)})}function Lf(e,t,n){function r(h,E,A){return h>=E&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,d=u.height;if(d>c&&(d=m([d,c]),c=d.next().value,d=d.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(d,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function bc(e,t,n){var r=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Lf(u,t,n),c!=u.allowedByApplication&&(r=!0)}return r}function vm(e,t,n){return n=n===void 0?[]:n,Oe(function(r){return r.g==1?N(r,ym(e,t,0<t.offlineSessionIds.length,n),2):(IE(t),N(r,Uf(t),0))})}function ym(e,t,n,r){var u,c;return Oe(function(d){if(d.g==1)return N(d,Bh(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=Uh(h,u);if(!E){var A=[];h.audio&&A.push(Zf(h.audio)),h.video&&A.push(Zf(h.video))}return E}),X(d)})}function Uh(e,t){var n=ms(),r=Wr("Firefox")&&Wr("Android"),u=e.video,c=u&&u.width||0,d=u&&u.height||0;if(n&&u&&(1920<c||1080<d)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=xl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Bu("video",c),n=xl(n),c=Bu("audio",c),c=Vu(c),d=Ls(u.mimeType,c,"audio"),!Ot(d))return!1;n=[n,c].join()}if(c=Ls(u.mimeType,n,"video"),!Ot(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=Vu(u.codecs),n=Ls(u.mimeType,r,"audio"),!Ot(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function kf(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=kf(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function Em(e,t){var n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=function(k,G){if(k){var te=Wa(k);return te.supported=k.supported&&G.supported,te.powerEfficient=k.powerEfficient&&G.powerEfficient,te.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!te.keySystemAccess&&(te.keySystemAccess=G.keySystemAccess),te}return G},r=null,u=[],c={},d=m(t),h=d.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=d.next())E=h.value,c.Hc=kf(E),c.Gc=jh,c.Gc[c.Hc]?r=n(r,c.Gc[c.Hc]):u.push(Ff(E).then(function(k){return function(G){var te=null;G=m(G||[]);for(var Y=G.next();!Y.done;Y=G.next())te=n(te,Y.value);te&&(k.Gc[k.Hc]=te,r=n(r,te))}}(c)));return N(A,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(A)})}function Ff(e){var t=[""];e.video&&(t=Do(e.video.contentType).split(","));var n=[""];e.audio&&(n=Do(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},d=m(n),h=d.next();!h.done;c={Mb:c.Mb},h=d.next())h=h.value,c.Mb=Wa(e),e.video&&(c.Mb.video.contentType=wi(Ca(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=wi(Ca(c.Mb.audio.contentType),h)),r.push(new Promise(function(E){return function(A,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){A(G)}).catch(k)}}(c)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Bh(e,t,n,r){var u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(e.some(function(gt){return gt.decodingInfos.length}))return Ue.return();u={},c=m(r),d=c.next();case 2:if(d.done){Ue.u(4);break}u.oe=d.value,h=!1,E=m(e),A=E.next();case 5:if(A.done){Ue.u(7);break}k=A.value,G=_m(k,t,n).filter(function(gt){return function(Rt){return Rt=Rt[0],(Rt.keySystemConfiguration&&Rt.keySystemConfiguration.keySystem)===gt.oe}}(u)),te=m(G),Y=te.next();case 8:if(Y.done){Ue.u(10);break}return ve=Y.value,N(Ue,Em(k,ve),9);case 9:Y=te.next(),Ue.u(8);break;case 10:k.decodingInfos.length&&(h=!0),A=E.next(),Ue.u(5);break;case 7:if(h)return Ue.return();u={oe:u.oe},d=c.next(),Ue.u(2);break;case 4:Pe=m(e),A=Pe.next();case 12:if(A.done){Ue.u(0);break}xe=A.value,Ge=_m(xe,t,n).filter(function(gt){return gt=gt[0],gt=gt.keySystemConfiguration&&gt.keySystemConfiguration.keySystem,!gt||!r.includes(gt)}),Te=m(Ge),Y=Te.next();case 15:if(Y.done){A=Pe.next(),Ue.u(12);break}return We=Y.value,N(Ue,Em(xe,We),16);case 16:Y=Te.next(),Ue.u(15)}})}function _m(e,t,n){var r=e.audio,u=e.video,c=[],d=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var A=Do(E);if(A.includes(",")&&!r){var k=A.split(",");A=Bu("video",k),k=Bu("audio",k),k=Vu(k),k=Ls(Ca(E),k,"audio"),d.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=xl(A),E={contentType:Ls(Ca(E),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(r)for(h=m(r.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,A=Vu(Do(E)),E=Ls(Ca(E),A,"audio"),d.push({contentType:E,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),d.length==0&&d.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,A=m(d),k=A.next();!k.done;k=A.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(d=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!d.length)return[h];e=[],n=new Map,d=m(d);for(var te=d.next();!te.done;te=d.next())c=te.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(d=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,A=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var Y=n.get(E),ve={keySystem:E,initDataType:"cenc",persistentState:d,distinctiveIdentifier:"optional",sessionTypes:t};for(Y=m(Y),te=Y.next();!te.done;te=Y.next()){if(te=te.value,te.initData&&te.initData.length){for(var Pe=new Set,xe=m(te.initData),Ge=xe.next();!Ge.done;Ge=xe.next())Pe.add(Ge.value.initDataType);ve.initDataType=te.initData[0].initDataType}te.distinctiveIdentifierRequired&&(ve.distinctiveIdentifier="required"),te.persistentStateRequired&&(ve.persistentState="required"),te.sessionType&&(ve.sessionTypes=[te.sessionType]),r&&(te.audioRobustness!=""?ve.audio?ve.audio.robustness=ve.audio.robustness||te.audioRobustness:ve.audio={robustness:te.audioRobustness}:ve.audio||(ve.audio={})),u&&(te.videoRobustness!=""?ve.video?ve.video.robustness=ve.video.robustness||te.videoRobustness:ve.video={robustness:te.videoRobustness}:ve.video||(ve.video={}))}G.keySystemConfiguration=ve,A.push(G)}e.push(A)}return e}function Vu(e){return e.toLowerCase()=="flac"?Es()?"fLaC":"flac":e==="Opus"?"opus":e}function xl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function IE(e){e.textStreams=e.textStreams.filter(function(t){return t=wi(t.mimeType,t.codecs),Rl(t)})}function Uf(e){var t,n,r,u,c,d,h;return Oe(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){E.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),Wu.has(c)){E.u(5);break}if(d=RE.get(c),!d){Wu.set(c,!1),E.u(5);break}return N(E,bE(d),7);case 7:h=E.h,Wu.set(c,h);case 5:Wu.get(c)&&t.push(u),r=n.next(),E.u(2);break;case 4:e.imageStreams=t,X(E)}})}function bE(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Ml(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,d=n?n.codecs:null,h=[];d&&h.push(d),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var k=new Set;if(t)for(var G=m(t.roles),te=G.next();!te.done;te=G.next())k.add(te.value);if(n)for(G=m(n.roles),te=G.next();!te.done;te=G.next())k.add(te.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:d,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Dl(e){return{id:e.id,active:!1,type:vr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function zu(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Cc(e){return e.__shaka_id||(e.__shaka_id=CE++),e.__shaka_id}function Tm(e){var t=Sm(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Pl(e){var t=Sm(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Sm(e){var t=e.language;return{id:Cc(e),active:!1,type:"",bandwidth:0,language:Cr(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Bf(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function jf(e){return e.filter(function(t){return Bf(t)})}function Rc(e,t,n,r){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var d=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==d}),t){var h=Nl(Cr(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return Cr(E.language)==h}))}if(u=u.filter(function(E){return E.forced==r}),n){if(e=Yu(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(hm,[]),e.length?Yu(u,e[0]):u}function Yu(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Zf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}re("shaka.util.StreamUtils",Ic),Ic.meetsRestrictions=Lf;var jh={},CE=0,Wu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),RE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new K,this.F=new Et,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*r),n=Math.min(n,this.l.clientWidth*r)}var u=this.m.filter(function(A){return!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)});if(u.length||(u=this.m),r=u,e&&u.length!=this.m.length&&(r=this.m.filter(function(A){return!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),e=Zh(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=qf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=Zh(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=Zh(this,null,r,1/0,1/0),e=[e[0]]),n=e[0]||null,r=0;r<e.length;r++){u=e[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),d=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=r+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=d&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&Gf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&Gf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(NE)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Gf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Zh(e,t,n,r,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(d){return d.bandwidth&&c?d.bandwidth<=c:!0}))}return t&&(n=n.filter(function(d){return Lf(d,t,{width:u,height:r})})),n.sort(function(d,h){return d.bandwidth-h.bandwidth})}function qf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}re("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var NE=1;re("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),re("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function Nc(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}Nc.prototype.add=function(e,t,n){return wm(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function wm(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!Gh(u,c)||!Am(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Gh(e,t))&&Am(e.roles,t.roles))),!r}Nc.prototype.values=function(){return this.g.values()};function Gh(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return Ya(r)}),t=t.codecs.split(",").map(function(r){return Ya(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Am(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function qh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Ol(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}qh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),r=e.filter(function(u){return wm(t.i,u,!n,t.g)});return r.length?new Nc(r[0],r,!n,this.g):this.j.create(e)};function Ol(e,t,n,r,u,c,d,h,E,A){this.s=e,this.A=t,this.h=n,this.i=r,this.B=u,this.l=c,this.g=d===void 0?"":d,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=A===void 0?!1:A}Ol.prototype.create=function(e){var t=[];t=Im(e,this.s);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=bm(t,this.A),e.length&&(t=e),this.l&&(e=Rm(t,this.l),e.length&&(t=e)),this.i&&(e=DE(t,this.i),e.length&&(t=e)),this.h&&(e=Cm(t,this.h),e.length&&(t=e)),this.g&&(e=xE(t,this.g),e.length&&(t=e)),this.j&&(e=ME(t,this.j),e.length&&(t=e)),e=PE(t,this.B),e.length&&(t=e),new Nc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function Im(e,t){t=Cr(t);var n=Nl(t,e.map(function(r){return Ku(r)}));return n?e.filter(function(r){return n==Ku(r)}):[]}function bm(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function xE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function ME(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Cm(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function DE(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Rm(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function PE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Hh(){this.g=xc,this.i=new Map().set(xc,2).set(Ll,1),this.h=0}function Kh(e,t,n){e.i.set(xc,n).set(Ll,t)}var Ll=0,xc=1;function Vh(e,t){var n=sa();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function zh(e){var t,n;return Oe(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new pt(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),N(r,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,X(r)})}function sa(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function gi(e,t){this.promise=e,this.i=t,this.g=!1}function gu(e){return new gi(Promise.reject(e),function(){return Promise.resolve()})}function Yh(){var e=Promise.reject(new pt(2,7,7001));return e.catch(function(){}),new gi(e,function(){return Promise.resolve()})}function $u(e){return new gi(Promise.resolve(e),function(){return Promise.resolve()})}function Nm(e){return new gi(e,function(){return e.catch(function(){})})}gi.prototype.abort=function(){return this.g=!0,this.i()};function Hf(e){return new gi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}gi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},gi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(d);else{var A=h?e:t;A?r=Wh(A,E,c):(h?c.resolve:c.reject)(E)}}}function r(){return c.reject(d),u.abort()}var u=this,c=new Rr,d=new pt(2,7,7001);return this.promise.then(n(!0),n(!1)),new gi(c,function(){return r()})};function Wh(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}re("shaka.util.AbortableOperation",gi),gi.prototype.chain=gi.prototype.va,gi.prototype.finally=gi.prototype.finally,gi.all=Hf,gi.prototype.abort=gi.prototype.abort,gi.notAbortable=Nm,gi.completed=$u,gi.aborted=Yh,gi.failed=gu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function xm(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},re("shaka.util.FakeEvent",Wn);var Mc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new vt,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function kl(){this.g=[]}function mu(e,t){e.g.push(t.finally(function(){mn(e.g,t)}))}kl.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,r,u,c){Sr.call(this),this.i=!1,this.m=new kl,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=r||null,this.C=u||null,this.B=c||null,this.o=!1}z(Kr,Sr),g=Kr.prototype,g.Cf=function(e){this.o=e};function Ho(e,t,n,r){n=n||Qh;var u=Pc[e];(!u||n>=u.priority)&&(Pc[e]={priority:n,ge:t,bi:r===void 0?!1:r})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Li(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var r=this,u=new Xh;if(this.i){var c=Promise.reject(new pt(2,7,7001));return c.catch(function(){}),new Dc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Wa(t.retryParameters):sa(),t.uris=Wa(t.uris),c=Mm(this,e,t,n);var d=c.va(function(){return $h(r,e,t,n,new Vh(t.retryParameters,!1),0,null,u)}),h=d.va(function(te){return OE(r,e,te,n)}),E=Date.now(),A=0;c.promise.then(function(){A=Date.now()-E},function(){});var k=0;d.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(te){var Y=Date.now()-k,ve=te.response;return ve.timeMs+=A,ve.timeMs+=Y,te.Ih||!r.l||ve.fromCache||t.method=="HEAD"||e!=$a||r.l(ve.timeMs,ve.data.byteLength,Dm(n)),r.B&&r.B(e,ve,n),ve},function(te){throw te&&(te.severity=2),te});return c=new Dc(G.promise,function(){return G.abort()},u),mu(this.m,c),c};function Mm(e,t,n,r){function u(h){c=c.va(function(){return n.body&&(n.body=Si(n.body)),h(t,n,r)})}var c=$u(void 0);e.A&&u(e.A),e=m(e.g);for(var d=e.next();!d.done;d=e.next())u(d.value);return c.va(void 0,function(h){throw h instanceof pt&&h.code==7001?h:new pt(2,1,1006,h)})}function $h(e,t,n,r,u,c,d,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,r,n.uris[c],n.uris[c-1]);var E=new ui(n.uris[c]),A=E.kb,k=!1;A||(A=location.protocol,A=A.slice(0,-1),Ds(E,A),n.uris[c]=E.toString()),A=A.toLowerCase();var G=(A=Pc[A])?A.ge:null;if(!G)return gu(new pt(2,1,1e3,E));var te=A.bi,Y=null,ve=null,Pe=!1,xe=!1,Ge;return Nm(zh(u)).va(function(){if(e.i)return Yh();Ge=Date.now();var Te=0;n.requestStartTime=Date.now();var We=G(n.uris[c],n,t,function(Rt,Ht,Ut){Y&&Y.stop(),ve&&ve.X(gt/1e3),e.l&&t==$a&&(Te++,n.packetNumber=Te,e.l(Rt,Ht,Dm(r),n),k=!0,h.g=Ut)},function(Rt){e.j&&e.j(Rt,n,t),xe=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!te)return We;var Ue=n.retryParameters.connectionTimeout;Ue&&(Y=new pr(function(){Pe=!0,We.abort()}),Y.X(Ue/1e3));var gt=n.retryParameters.stallTimeout;return gt&&(ve=new pr(function(){Pe=!0,We.abort()})),We}).va(function(Te){Y&&Y.stop(),ve&&ve.stop(),Te.timeMs==null&&(Te.timeMs=Date.now()-Ge);var We={response:Te,Ih:k};return!xe&&e.j&&e.j(Te.headers,n,t),We},function(Te){if(Y&&Y.stop(),ve&&ve.stop(),e.s){var We=null,Ue=0;Te instanceof pt&&(We=Te,Te.code==1001&&(Ue=Te.data[1])),e.s(n,We,Ue,Pe)}if(e.i)return Yh();if(Pe&&(Te=new pt(1,1,1003,n.uris[c],t)),Te instanceof pt){if(Te.code==7001)throw Te;if(Te.code==1010)throw d;if(Te.severity==1)return We=new Map().set("error",Te),We=new Wn("retry",We),e.dispatchEvent(We),c=(c+1)%n.uris.length,$h(e,t,n,r,u,c,Te,h)}throw Te})}function OE(e,t,n,r){var u=$u(void 0),c={};e=m(e.h);for(var d=e.next();!d.done;c={qe:c.qe},d=e.next())c.qe=d.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Si(E.data)),h.qe(t,E,r)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof pt){if(h.code==7001)throw h;E=h.severity}throw new pt(E,1,1007,h)})}function Dm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}re("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Li,Kr.defaultRetryParameters=function(){return sa()},Kr.prototype.clearAllResponseFilters=Kr.prototype.ah,Kr.prototype.unregisterResponseFilter=Kr.prototype.Ci,Kr.prototype.registerResponseFilter=Kr.prototype.fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.$g,Kr.prototype.unregisterRequestFilter=Kr.prototype.Bi,Kr.prototype.registerRequestFilter=Kr.prototype.ei,Kr.unregisterScheme=function(e){delete Pc[e]},Kr.registerScheme=Ho,Kr.prototype.setForceHTTPS=Kr.prototype.Cf;function Xh(){this.g=0}Kr.NumBytesRemainingClass=Xh;function Dc(e,t,n){gi.call(this,e,t),this.h=n}z(Dc,gi),Kr.PendingRequest=Dc;var $a=1;Kr.RequestType={MANIFEST:0,SEGMENT:$a,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var Qh=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Qh};var Pc={};function Xu(e){this.g=!1,this.h=new Rr,this.i=e}Xu.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof pt&&t.code==7003?t:new pt(2,7,7003,t)}function Kf(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function LE(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Fl(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Oc(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==Pm,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Fs()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Fs()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Fs()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Fs()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Fs()}if(2097151<t)throw new pt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw Fs();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw Fs();this.g+=e},g.mi=function(e){if(this.g<e)throw Fs();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw Fs();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Vr(e)};function Fs(){return new pt(2,3,3e3)}re("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var Pm=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Pm};function kr(){this.i=[],this.h=[],this.g=!1}g=kr.prototype,g.box=function(e,t){return e=Om(e),this.i[e]=kE,this.h[e]=t,this},g.O=function(e,t){return e=Om(e),this.i[e]=Lm,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,r){var u=t.wa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.M(),d=t.M(),h=Vf(d),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var A=this.h[d];if(A){var k=null,G=null;if(this.i[d]==Lm){if(r&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}d=u+c,n&&d>t.getLength()&&(d=t.getLength()),r&&d>t.getLength()?this.g=!0:(r=d-t.wa(),t=0<r?t.sb(r):new Uint8Array(0),t=new Dr(t,0),A({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function yr(e){for(var t=Ul(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function vu(e){for(var t=Ul(e),n=e.reader.M(),r=0;r<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Ai(e){var t=Ul(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Jh(e){var t=Ul(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Qu(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function Om(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Vf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Ul(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}re("shaka.util.Mp4Parser",kr),kr.headerSize=Ul,kr.typeToString=Vf,kr.allData=Qu,kr.audioSampleEntry=Jh,kr.visualSampleEntry=Ai,kr.sampleDescription=vu,kr.children=yr,kr.prototype.parseNext=kr.prototype.Ac,kr.prototype.parse=kr.prototype.parse,kr.prototype.stop=kr.prototype.stop,kr.prototype.fullBox=kr.prototype.O,kr.prototype.box=kr.prototype.box;var kE=0,Lm=1;function km(e){var t=this;this.g=[],this.h=[],this.data=[],new kr().box("moov",yr).box("moof",yr).O("pssh",function(n){if(!(1<n.version)){var r=Qn(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Os(n.reader.sb(16))),0<n.version){r=n.reader.M();for(var u=0;u<r;u++){var c=Os(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function zf(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var d=new Uint8Array(c),h=tn(d),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>r?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,d.set(t,E),E+=t.length,0<r)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=hu(n.value),d.set(n,E),E+=n.length;return h.setUint32(E,u),d.set(e,E+4),d}function ep(e,t){return e=Va(e),Bl(e,t)}function Bl(e,t){return e=FE(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Lc(e){return Fc.has(e)?Fc.get(e):""}function FE(e){function t(u,c){c=c===void 0?!1:c;for(var d=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){c=r+2,r=e.indexOf(">",r),c=e.substring(c,r);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",r),h==-1?(d.push(e.substr(r+9)),r=e.length):(d.push(e.substring(r+9,h)),r=h+3);continue}r++;continue}e:{E=c,r++;var A=n(),k={};for(h=[];e.charCodeAt(r)!==62&&e[r];){var G=e.charCodeAt(r);if(64<G&&91>G||96<G&&123>G){G=n();for(var te=e.charCodeAt(r);te&&te!==39&&te!==34&&!(64<te&&91>te||96<te&&123>te)&&te!==62;)r++,te=e.charCodeAt(r);var Y=r+1;if(r=e.indexOf(e[r],Y),Y=e.slice(Y,r),te===39||te===34){if(r===-1){for(E={tagName:A,attributes:k,children:h,parent:null},A=0;A<h.length;A++)typeof h[A]!="string"&&(h[A].parent=E);h=E;break e}}else Y=null,r--;G.startsWith("xmlns:")&&Fc.set(Y,G.split(":")[1]),A==="tt"&&G==="xml:space"&&Y==="preserve"&&(E=!0),k[G]=Y}r++}for(e.charCodeAt(r-1)!==47?(r++,h=t(A,E)):r++,E={tagName:A,attributes:k,children:h,parent:null},A=h.length,k=0;k<A;k++)G=h[k],typeof G!="string"?G.parent=E:k==A-1&&G=="\n"&&h.pop();h=E}if(d.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(d.push.apply(d,T(h.children)),h.children=[])}else h=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),h=e.slice(h,r+1),c?0<h.length&&d.push(h):(d.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&d.push(h),r++;return d}function n(){for(var u=r;"\r\n	>/= ".indexOf(e[r])===-1&&e[r];)r++;return e.slice(u,r)}var r=0;return t("")}function Yf(e){return typeof e=="string"}function UE(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function $r(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Ri(e){return typeof e=="string"?bo(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:bo(e))}function yu(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ri(e))&&(e=e.trim()),e):null}function Ra(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Ra(r.value,t,n)}return n}function ua(e,t){return e=$r(e,t),e.length!=1?null:e[0]}function Us(e,t,n){return e=Wf(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function Eu(e,t,n){return t=Lc(t),e.attributes[t+":"+n]||null}function Wf(e,t,n){t=Lc(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function la(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=Eu(e,r.value,n))return r;return null}function $f(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Xa(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Xf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Ju(e){return e=Number(e),e%1===0?e:null}function Bs(e){return e=Number(e),e%1===0&&0<e?e:null}function Ro(e){return e=Number(e),e%1===0&&0<=e?e:null}function kc(e){return e=Number(e),isNaN(e)?null:e}function tp(e){return e?e.toLowerCase()==="true":!1}function Fm(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function np(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var r=document.createElement(e.tagName),u;for(u in e.attributes)r.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&np(e.parent,!0,!1).appendChild(r),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=np(t,!1,!0),r.appendChild(n);return r}var Fc=new Map([]);function Uc(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new Et,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return V(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){ye(t)}),this.l.catch(function(){}),this.j=new Xu(function(){return BE(t)}),this.ba=!1,this.F=this.G=null}g=Uc.prototype,g.destroy=function(){return this.j.destroy()};function BE(e){return Oe(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,N(t,H(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),N(t,e.m.setMediaKeys(null),6);case 6:he(t,5);break;case 4:be(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function Um(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,Zm(e,t)}function Bm(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.T=0<e.A.size,Zm(e,t)}function jm(e,t,n,r,u,c){var d=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],d.set(t,u),ap(e,d,[])}function Zm(e,t){var n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){if(We.g==1){if(n=qE(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(d=t.some(function(Ue){return!!(Ue.video&&Ue.video.drmInfos.length||Ue.audio&&Ue.audio.drmInfos.length)}),d||(h=Fl(e.h.servers),ge(t,h)),E=new Set,A=m(t),u=A.next();!u.done;u=A.next())for(k=u.value,G=Se(k),te=m(G),Y=te.next();!Y.done;Y=te.next())ve=Y.value,E.add(ve);for(Pe=m(E),Y=Pe.next();!Y.done;Y=Pe.next())xe=Y.value,De(xe,Fl(e.h.servers),Fl(e.h.advanced||{}),e.h.keySystemsMapping);return N(We,Bh(t,e.T,e.ba,e.h.preferredKeySystems),2)}return Ge=d||Object.keys(e.h.servers).length,Ge?(Te=ap(e,void 0,t),We.return(d?Te:Te.catch(function(){}))):(e.da=!0,We.return(Promise.resolve()))})}function rp(e){var t;return Oe(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return N(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),N(n,e.G,6);case 6:he(n,5);break;case 4:t=be(n),e.o(new pt(2,6,6003,t.message));case 5:jr(e.j),X(n)}})}function jE(e,t){return Oe(function(n){if(n.g==1)return N(n,rp(e),2);jl(e,t.initDataType,Qn(t.initData)),X(n)})}g.Vc=function(e){var t=this;return Oe(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())P(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?N(n,rp(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new pt(2,6,6010))}),n.return());ip(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return jE(t,r)}),X(n)})};function Gm(e){var t,n,r,u,c;return Oe(function(d){switch(d.g){case 1:if(!e.s||!e.g)return d.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){d.u(2);break}return t=Li([e.g.serverCertificateUri],e.h.retryParameters),ce(d,3),n=e.C.zb.request(5,t),N(d,n.promise,5);case 5:r=d.h,e.g.serverCertificate=Qn(r.data),he(d,4);break;case 3:throw u=be(d),new pt(2,6,6017,u);case 4:if(e.j.g)return d.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?d.return():(ce(d,6),N(d,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:he(d,0);break;case 6:throw c=be(d),new pt(2,6,6004,c.message)}})}function ZE(e,t){var n,r,u;return Oe(function(c){if(c.g==1)return N(c,Km(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.ab=new Rr,r.push(u.ab)),r.push(n.remove()),N(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function ip(e){var t,n,r,u,c;return Oe(function(d){if(d.g==1)return e.A.size?(e.A.forEach(function(h,E){Km(e,E,h)}),N(d,e.l,3)):d.u(2);if(d.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&me(e))return d.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,jl(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),d.return(e.l)})}function jl(e,t,n){if(n.length){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function qm(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function op(e){return e=e.i.keys(),e=Kf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=Kf(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Oc(this.ea)};function ap(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge;return Oe(function(Te){switch(Te.g){case 1:if(r=new Map,n.length){u=GE(e,n,r),Te.u(2);break}return N(Te,Hm(e,t),3);case 3:u=Te.h;case 2:if(c=u,!c)throw new pt(2,6,6001);for(jr(e.j),ce(Te,4),e.H.clear(),d=c.getConfiguration(),h=d.audioCapabilities||[],E=d.videoCapabilities||[],A=m(h),k=A.next();!k.done;k=A.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(te=m(E),k=te.next();!k.done;k=te.next())Y=k.value,e.H.add(Y.contentType.toLowerCase());if(n.length){var We=c.keySystem,Ue=r.get(c.keySystem),gt=[],Rt=[],Ht=[],Ut=[],yt=[],jt=new Set;qe(Ue,gt,Rt,Ut,Ht,yt,jt);var ln=e.T?"persistent-license":"temporary";for(We={keySystem:We,encryptionScheme:gt[0],licenseServerUri:Rt[0],distinctiveIdentifierRequired:Ue[0].distinctiveIdentifierRequired,persistentStateRequired:Ue[0].persistentStateRequired,sessionType:Ue[0].sessionType||ln,audioRobustness:Ue[0].audioRobustness||"",videoRobustness:Ue[0].videoRobustness||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:yt,keyIds:jt},Ue=m(Ue),gt=Ue.next();!gt.done;gt=Ue.next())gt=gt.value,gt.distinctiveIdentifierRequired&&(We.distinctiveIdentifierRequired=gt.distinctiveIdentifierRequired),gt.persistentStateRequired&&(We.persistentStateRequired=gt.persistentStateRequired);Ue=We}else Ue=c.keySystem,We=t.get(c.keySystem),gt=[],Rt=[],Ht=[],Ut=[],yt=[],jt=new Set,qe(We.drmInfos,gt,Rt,Ut,Ht,yt,jt),Ue={keySystem:Ue,encryptionScheme:gt[0],licenseServerUri:Rt[0],distinctiveIdentifierRequired:We.distinctiveIdentifier=="required",persistentStateRequired:We.persistentState=="required",sessionType:We.sessionTypes[0]||"temporary",audioRobustness:(We.audioCapabilities?We.audioCapabilities[0].robustness:"")||"",videoRobustness:(We.videoCapabilities?We.videoCapabilities[0].robustness:"")||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:yt,keyIds:jt};if(e.g=Ue,!e.g.licenseServerUri)throw new pt(2,6,6012,e.g.keySystem);return N(Te,c.createMediaKeys(),6);case 6:if(ve=Te.h,jr(e.j),e.s=ve,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Te.u(7);break}return ce(Te,8),N(Te,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Pe=Te.h,Pe!="usable")throw new pt(2,6,6018);jr(e.j),he(Te,7,4);break;case 8:throw xe=be(Te,4),xe instanceof pt?xe:new pt(2,6,6019,xe.message);case 7:return e.da=!0,N(Te,Gm(e),11);case 11:jr(e.j),he(Te,0);break;case 4:throw Ge=be(Te),jr(e.j,Ge),e.g=null,e.H.clear(),Ge instanceof pt?Ge:new pt(2,6,6002,Ge.message)}})}function GE(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){var c=m(Se(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new pt(2,6,6e3);for(r={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;r={pe:r.pe},u=e.next())for(r.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(A){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==A.pe}}(r)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(r=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var d=m(u.value.decodingInfos);for(u=d.next();!u.done;u=d.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==r)return h.keySystemAccess}}}return null}function Hm(e,t){var n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:if(t.size==1&&t.has(""))throw new pt(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;d=m(e.h.preferredKeySystems),h=d.next();case 2:if(h.done){Ge.u(4);break}if(E=h.value,!t.has(E)){Ge.u(3);break}return A=t.get(E),ce(Ge,6),N(Ge,navigator.requestMediaKeySystemAccess(E,[A]),8);case 8:return n=Ge.h,Ge.return(n);case 6:be(Ge);case 7:jr(e.j);case 3:h=d.next(),Ge.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){Ge.u(11);break}te=G.value,Y=m(t.keys()),h=Y.next();case 12:if(h.done){G=k.next(),Ge.u(9);break}if(ve=h.value,Pe=t.get(ve),xe=Pe.drmInfos.some(function(Te){return!!Te.licenseServerUri}),xe!=te){Ge.u(13);break}return ce(Ge,15),N(Ge,navigator.requestMediaKeySystemAccess(ve,[Pe]),17);case 17:return n=Ge.h,Ge.return(n);case 15:be(Ge);case 16:jr(e.j);case 13:h=Y.next(),Ge.u(12);break;case 11:return Ge.return(n)}})}function qE(e){return e=Fl(e.h.clearKeys),e.size==0?null:xh(e)}function Bc(e){ie(e)&&e.l.resolve()}function jc(e,t){new pr(function(){t.loaded=!0,Bc(e)}).X(ze)}function Km(e,t,n){var r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:try{r=e.s.createSession("persistent-license")}catch(G){return u=new pt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(r,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):P(e,G)}),e.B.D(r,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(r,c),ce(k,2),N(k,r.load(t),4);case 4:return d=k.h,jr(e.j),d||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(h,6,6013)),c.loaded=!0),jc(e,c),Bc(e),k.return(r);case 2:E=be(k),jr(e.j,E),e.i.delete(r),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(A,6,6005,E.message)),c.loaded=!0,Bc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new pt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):P(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof pt||(t=new pt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&du(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var d=c.errorCode;if(d&&d.systemCode){var h=d.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new pt(2,6,6006,c.message,c,h))}})}function P(e,t){var n,r,u,c,d,h,E,A,k,G,te,Y,ve;Oe(function(Pe){switch(Pe.g){case 1:if(n=t.target,e.h.logLicenseExchange&&du(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),d=Li([u],e.h.retryParameters),d.body=t.message,d.method="POST",d.licenseRequestType=t.messageType,d.sessionId=n.sessionId,d.drmInfo=e.g,r&&(d.initData=r.initData,d.initDataType=r.initDataType),qm(e.g.keySystem)){var xe=Ka(d.body,!0,!0);if(xe.includes("PlayReadyKeyMessage")){xe=Bl(xe,"PlayReadyKeyMessage");var Ge=Ra(xe,"HttpHeader");Ge=m(Ge);for(var Te=Ge.next();!Te.done;Te=Ge.next()){var We=Te.value;Te=Ra(We,"name")[0],We=Ra(We,"value")[0],d.headers[Ri(Te)]=Ri(We)}xe=Ra(xe,"Challenge")[0],d.body=qo(Ri(xe))}else d.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),ce(Pe,2),A=e.C.zb.request(2,d),N(Pe,A.promise,4);case 4:E=Pe.h,he(Pe,3);break;case 2:return k=be(Pe),e.j.g||(G=new pt(2,6,6007,k),e.i.size==1?(e.o(G),r&&r.ab&&r.ab.reject(G)):(r&&r.ab&&r.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Pe.return();case 3:return e.j.g?Pe.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&du(E.data),ce(Pe,5),N(Pe,n.update(E.data),7));case 7:he(Pe,6);break;case 5:return te=be(Pe),Y=new pt(2,6,6008,te.message),e.o(Y),r&&r.ab&&r.ab.reject(Y),Pe.return();case 6:if(e.j.g)return Pe.return();ve=new Wn("drmsessionupdate"),e.C.onEvent(ve),r&&(r.ab&&r.ab.resolve(),jc(e,r)),X(Pe)}})}function B(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,d){if(typeof d=="string"){var h=d;d=c,c=h}if(qm(e.g.keySystem)&&d.byteLength==16&&(bl()||Nr())){h=tn(d);var E=h.getUint32(0,!0),A=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,A,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),d=Os(d).slice(0,32),e.aa.set(d,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(Ee))}function V(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new pt(2,6,6014)),e.C.ee(Oc(n))}function ee(){var e,t,n,r,u,c,d,h;return Oe(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[r,n],c=new Map,d=function(A){var k,G,te;return Oe(function(Y){switch(Y.g){case 1:if(ce(Y,2),A==="org.w3.clearkey"&&Es())throw Error("Unsupported keySystem");return N(Y,navigator.requestMediaKeySystemAccess(A,u),4);case 4:return k=Y.h,te=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,ku()&&(te=!1),c.set(A,{persistentState:te}),N(Y,k.createMediaKeys(),5);case 5:he(Y,0);break;case 2:be(Y),c.set(A,null),X(Y)}})},h=e.map(function(A){return d(A)}),N(E,Promise.all(h),2)):E.return(Oc(c))})}function J(e){var t;return Oe(function(n){if(n.g==1)return t=new Promise(function(r,u){new pr(u).X(Be)}),ce(n,2),N(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return he(n,0);be(n),X(n)})}function H(e){var t;return Oe(function(n){return t=Array.from(e.i.entries()),e.i.clear(),N(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return Oe(function(d){if(d.g==1)return ce(d,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?N(d,J(u),5):N(d,u.remove(),5);if(d.g!=2)return he(d,0);be(d),X(d)})})),0)})}function ne(e,t){return e.length&&t.length&&e!==t?0<fe(e,t).length:!0}function fe(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var d=m((r.initData||[]).concat(c.initData||[])),h=d.next();!h.done;h=d.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),d=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:d});break}}return n}function Se(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function ye(e){e.i.forEach(function(t,n){var r=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),LE(e,function(t){return t.loaded})}function me(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function ge(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function qe(e,t,n,r,u,c,d){var h=[],E={};e=m(e);for(var A=e.next();!A.done;E={la:E.la},A=e.next()){if(E.la=A.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(r.some(function(te){return function(Y){return zi(Y,te.la.serverCertificate)}}(E))||r.push(E.la.serverCertificate)),E.la.initData){A={};for(var k=m(E.la.initData),G=k.next();!G.done;A={vd:A.vd},G=k.next())A.vd=G.value,c.some(function(te){return function(Y){var ve=te.vd;return Y.keyId&&Y.keyId==ve.keyId?!0:Y.initDataType==ve.initDataType&&zi(Y.initData,ve.initData)}}(A))||c.push(A.vd)}if(E.la.keyIds)for(A=m(E.la.keyIds),k=A.next();!k.done;k=A.next())d.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),r=h.next();!r.done;r=h.next())r=p.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function De(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Be=1,ze=5,Ee=.5,Le=new ra(function(){return Si(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function we(e,t,n){this.h=e,this.i=t,this.g=n}function je(e,t){return Oe(function(n){return n.g==1?N(n,j(e,t),2):n.return(ue(e,t))})}function j(e,t){return Oe(function(n){if(n.g==1)return N(n,vm(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(Bf))throw new pt(2,4,4032);X(n)})}function ue(e,t){var n=bc(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,r.keySystem,c.video),ae(e,r.keySystem,c.audio);se(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,jl(e.g,u.initDataType,u.initData)}}}function se(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,d=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var k=A.next();!k.done;k=A.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&d.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(d)},new pt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Me(){}function Ie(e,t){if(t){var n=ke[t.toLowerCase()];if(n)return n}throw new pt(2,4,4e3,e,t)}re("shaka.media.ManifestParser",Me),Me.unregisterParserByMime=function(e){delete ke[e]},Me.registerParserByMime=function(e,t){ke[e]=t},Me.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Me.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var ke={};function Re(e){function t(){r=!0}function n(A){c.push(A),yr(A)}e=Qn(e);var r=!1,u,c=[],d=[];if(new kr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(A){u=A,c.push(A),vu(A)}).O("encv",t).O("enca",t).O("dvav",function(A){d.push({box:A,Xa:1701733238})}).O("dva1",function(A){d.push({box:A,Xa:1701733238})}).O("dvh1",function(A){d.push({box:A,Xa:1701733238})}).O("dvhe",function(A){d.push({box:A,Xa:1701733238})}).O("hev1",function(A){d.push({box:A,Xa:1701733238})}).O("hvc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc3",function(A){d.push({box:A,Xa:1701733238})}).O("ac-3",function(A){d.push({box:A,Xa:1701733217})}).O("ec-3",function(A){d.push({box:A,Xa:1701733217})}).O("ac-4",function(A){d.push({box:A,Xa:1701733217})}).O("mp4a",function(A){d.push({box:A,Xa:1701733217})}).parse(e),r)return e;if(d.length==0||!u)throw Os(e),new pt(2,3,3019);d.reverse();for(var h=m(d),E=h.next();!E.done;E=h.next())E=E.value,e=pe(e,u,E.box,c,E.Xa);return e}function pe(e,t,n,r,u){var c=Ye.value(),d=e.subarray(n.start,n.start+n.size),h=tn(d),E=new Uint8Array(n.size+c.byteLength);for(E.set(d,0),d=tn(E),d.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),d.setUint32(n.size+16,u),Ne(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=ms()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,Ne(u,r.start,r.size+E.byteLength);return E=tn(u,t.start),t=Ul(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function Ne(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Ye=new ra(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function dt(e,t,n,r,u,c,d){this.$=e,this.Aa=t,this.ja=n,this.ff=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=d===void 0?null:d,this.mimeType=this.codecs=null}dt.prototype.ac=function(){return this.Aa},dt.prototype.Yb=function(){return this.ja},dt.prototype.ed=function(){return this.g};function at(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}re("shaka.media.InitSegmentReference",dt),dt.prototype.getEndByte=dt.prototype.Yb,dt.prototype.getStartByte=dt.prototype.ac;function Je(e,t,n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe){for(A=A===void 0?[]:A,Y=Y===void 0?Bt:Y,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=r,this.ja=u,this.ca=c,this.timestampOffset=d,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=A,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=te===void 0?null:te,this.status=Y,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ve===void 0?null:ve,this.s=null,this.j=0,this.o=Pe===void 0?!1:Pe,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=Je.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=Gt},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?de("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function ht(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())ht(n.value,t)}re("shaka.media.SegmentReference",Je),Je.prototype.getSegmentData=Je.prototype.ed,Je.prototype.setSegmentData=Je.prototype.yi,Je.prototype.syncAgainst=Je.prototype.Ff,Je.prototype.offset=Je.prototype.offset,Je.prototype.getThumbnailSprite=Je.prototype.Bh,Je.prototype.setThumbnailSprite=Je.prototype.Eg,Je.prototype.hasByterangeOptimization=Je.prototype.Jh,Je.prototype.markAsByterangeOptimization=Je.prototype.lg,Je.prototype.isLastPartial=Je.prototype.Nh,Je.prototype.markAsLastPartial=Je.prototype.mg,Je.prototype.isPartial=Je.prototype.Oh,Je.prototype.markAsPartial=Je.prototype.ng,Je.prototype.isIndependent=Je.prototype.Mh,Je.prototype.markAsNonIndependent=Je.prototype.Zd,Je.prototype.isPreload=Je.prototype.Ph,Je.prototype.markAsPreload=Je.prototype.ef,Je.prototype.markAsUnavailable=Je.prototype.Vh,Je.prototype.getStatus=Je.prototype.bc,Je.prototype.getTileDuration=Je.prototype.Ch,Je.prototype.getTilesLayout=Je.prototype.Dh,Je.prototype.getEndByte=Je.prototype.Yb,Je.prototype.getStartByte=Je.prototype.ac,Je.prototype.getEndTime=Je.prototype.mh,Je.prototype.getStartTime=Je.prototype.getStartTime,Je.prototype.getUris=Je.prototype.$;var Bt=0,Gt=1;Je.Status={Hi:Bt,xj:Gt,$i:2};function kt(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ft(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(mt(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function rt(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=mt(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function mt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Wt(){}function Nt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Yt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Vr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var d=Vr(Qn(e.data,3+n,c)),h;return r==="-->"?h=Vr(Qn(e.data,4+n+c)):h=Si(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=d,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Vr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Si(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Vr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Si(e.data),t):null}function Dn(e){for(var t=0,n=[];Nt(e,t);){var r=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Yt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function Nn(e,t){for(var n=t=t===void 0?0:t,r=0;Nt(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Jt(e,t+6),en(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}re("shaka.util.Id3Utils",Wt),Wt.getID3Data=Nn,Wt.getID3Frames=Dn;function rr(e,t){var n=null,r=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(r=e.M()),{trackId:c,Wf:n,fh:r,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function It(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function $t(e,t,n){var r=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var d=0;d<r;d++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:r,vg:u,eh:c}}function Zt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:Vf(e)}}function vn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function xn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new Dr(n,0).M(),e.g=8*r,e.i-=r)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function bt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?r<<n|bt(e,n):r}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Lt(e){var t=Sn(e);return bt(e,t+1)-1}function On(e){return e=Lt(e),1&e?1+e>>>1:-1*(e>>>1)}function st(e){return bt(e,1)===1}function nt(e){return bt(e,8)}function qt(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=On(e),r=(n+r+256)%256),n=r===0?n:r}function Ve(e){return nt(e),Lt(e),Lt(e)}re("shaka.util.ExpGolomb",xn);function Ke(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=Ke.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ii(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),d=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(d){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,d={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var A=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,te=k;2<te;){var Y=c[G+1]+2;switch(c[G]){case 5:var ve=Nh(c.subarray(G+2,G+Y));d.audio==-1&&ve==="Opus"?(d.audio=A,d.audioCodec="opus"):d.video==-1&&ve==="AV01"&&(d.video=A,d.videoCodec="av1");break;case 106:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 122:d.audio==-1&&(d.audio=A,d.audioCodec="ec3");break;case 124:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 127:d.audioCodec=="opus"&&(ve=null,c[G+2]===128&&(ve=c[G+3]),ve!=null&&(this.F={channelCount:ve&15?ve&15:2,Zg:ve,sampleRate:48e3}))}G+=Y,te-=Y}break;case 15:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 17:d.audio==-1&&(d.audio=A,d.audioCodec="aac-loas");break;case 21:d.Sd==-1&&(d.Sd=A);break;case 27:d.video==-1&&(d.video=A,d.videoCodec="avc");break;case 3:case 4:d.audio==-1&&(d.audio=A,d.audioCodec="mp3");break;case 36:d.video==-1&&(d.video=A,d.videoCodec="hvc");break;case 129:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 132:case 135:d.audio==-1&&(d.audio=A,d.audioCodec="ec3")}h+=k+5}c=d,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function Dt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=sr(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var d=n||0,h=[],E=-1,A=0,k,G=0;G<u;++G){var te=e[G];if(te){if(2<=d&&te==1){if(t&&!h.length&&E==-1&&(te=G-(3<d?3:d),n&&te!=0&&(te=e.subarray(0,te),t.data=ci(t.data,te),t.fullData=ci(t.fullData,te))),0<=E?(d=G-((3<d?3:d)+1),h.push({data:e.subarray(E+c,d+1),fullData:e.subarray(E,d+1),type:A,time:r})):t&&!h.length&&(E=G-d,0<E&&(E=e.subarray(0,E),t.data=ci(t.data,E),t.fullData=ci(t.fullData,E))),G>=u-c)return h;G++,E=G,A=this.m=="hvc"?e[G]>>1&63:e[G]&31}d=0}else d++;G>=u-1&&0<=E&&0<=d&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:A,time:r})}return k&&h.push(k),!h.length&&t&&(t.data=ci(t.data,e),t.fullData=ci(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=ci.apply(Oi,T(n.value)),(n=Dt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=ci.apply(Oi,T(n.value)),u=Dt(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=ci(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,d){var h=(c.pts||0)-(d.pts||0);return(c.dts||0)-(d.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=ci.apply(Oi,T(r.value)),c=Dt(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=ci(r.data,u),this.g.push(r))}if(e){var d;for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.qf(r,d,void 0),r.nalus.length&&(d=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var A=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):fn(this)};function fn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(te){return te.type==7}),!e))return t;e=new xn(e.data);var n=nt(e),r=nt(e),u=nt(e);if(En(e),zr.includes(n)){var c=Lt(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),st(e)){c=c!==3?8:12;for(var d=0;d<c;d++)st(e)&&(6>d?qt(e,16):qt(e,64))}}if(En(e),c=Lt(e),c===0)Lt(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Lt(e),d=0;d<c;d++)En(e);En(e),Gn(e,1),c=Lt(e),d=Lt(e);var h=bt(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,A=0,k=0,G=0;return st(e)&&(E=Lt(e),A=Lt(e),k=Lt(e),G=Lt(e)),t.height=String((2-h)*(d+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*A),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Ue){return Ue.type==33}),!e))return t;var n=new xn(e.fullData,!0);nt(n),nt(n),bt(n,4);var r=bt(n,3);st(n);var u=bt(n,2),c=bt(n,1),d=bt(n,5),h=bt(n,32);e=nt(n);for(var E=nt(n),A=nt(n),k=nt(n),G=nt(n),te=nt(n),Y=nt(n),ve=[],Pe=[],xe=0;xe<r;xe++)ve.push(st(n)),Pe.push(st(n));if(0<r)for(xe=r;8>xe;xe++)bt(n,2);for(xe=0;xe<r;xe++)ve[xe]&&bt(n,88),Pe[xe]&&nt(n);Lt(n),r=Lt(n),r==3&&bt(n,1),ve=Lt(n),Pe=Lt(n);var Ge=xe=0,Te=0,We=0;return st(n)&&(xe+=Lt(n),Ge+=Lt(n),Te+=Lt(n),We+=Lt(n)),t.width=String(ve-(xe+Ge)*(r===1||r===2?2:1)),t.height=String(Pe-(Te+We)*(r===1?2:1)),n=function(Ue){for(var gt=0,Rt=0;32>Rt;Rt++)gt|=(Ue>>Rt&1)<<31-Rt;return gt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+d),u+="."+n.toString(16).toUpperCase(),u+="."+c+Y,te&&(u+="."+te.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),A&&(u+="."+A.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ii(e))}function Ii(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}re("shaka.util.TsParser",Ke),Ke.syncOffset=Ii,Ke.probe=Zr,Ke.prototype.getVideoInfo=Ke.prototype.We,Ke.prototype.getVideoResolution=Ke.prototype.Gh,Ke.prototype.getVideoNalus=Ke.prototype.Od,Ke.prototype.getCodecs=Ke.prototype.bd,Ke.prototype.getStartTime=Ke.prototype.getStartTime,Ke.prototype.getVideoData=Ke.prototype.xc,Ke.prototype.getAudioData=Ke.prototype.Fb,Ke.prototype.getMetadata=Ke.prototype.getMetadata,Ke.prototype.parseNalus=Ke.prototype.qf,Ke.prototype.parseAvcNalus=Ke.prototype.ai,Ke.prototype.parse=Ke.prototype.parse,Ke.prototype.clearData=Ke.prototype.clearData,Ke.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function oo(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&He("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{He("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(He("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||He(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}oo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function js(e,t,n){var r=el,u=_u;switch(t.mimeType){case"video/webm":r=tl;break;case"video/mp4":r=Qa}switch(n){case"DASH":u=Po;break;case"HLS":u=Zs}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}re("shaka.lcevc.Dec",oo),oo.prototype.release=oo.prototype.release;var el=0,tl=1,Qa=2,Zs=0,Po=1,_u=-1;function Tu(e,t,n,r){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=r||null,this.j={},this.o=new Et,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=ca(this,this.L),this.C=!1,this.I=new Xu(function(){return Qf(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function ca(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Vm(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Vm(n),e.i.src=e.N,n}function Zc(e,t){var n,r,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1)return e.createSegmentIndex?N(Y,e.createSegmentIndex(),2):Y.u(2);if(!e.segmentIndex)return Y.return(!1);if(e.segmentIndex.getNumReferences()==0)return Y.return(!0);for(n=Ei,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(d=c.value,h=d.mimeType||e.mimeType||"",E=d.codecs||e.codecs||"",A=h+":"+E,!r.has(A)){if(r.add(A),t==n.ma){if(k=wi(h,E),!Rl(k))return Y.return(!1)}else if(t==n.fa?E=xl(E):t==n.S&&(E=Vu(E)),G=cm(e,h,E),te=ju(h,E),!Ot(G)&&!io(te))return Y.return(!1)}return Y.return(!0)})}g=Tu.prototype,g.destroy=function(){return this.I.destroy()};function Qf(e){var t,n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1){t=[];for(n in e.j)for(r=e.j[n],u=r[0],e.j[n]=r.slice(0,1),u&&t.push(u.p.catch(pm)),c=m(r.slice(1)),d=c.next();!d.done;d=c.next())h=d.value,h.p.reject(new pt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return N(A,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,X(A)})}g.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return c=Ei,N(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=r,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,d=m(e.keys()),h=d.next();case 3:if(h.done){k.u(0);break}return E=h.value,A=e.get(E),N(k,nl(u,E,A,A.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=d.next(),k.u(3)}})};function nl(e,t,n,r){var u,c,d,h,E,A,k,G,te,Y,ve,Pe;return Oe(function(xe){switch(xe.g){case 1:return u=Ei,c=Fe,d=O,N(xe,Zc(n,t),2);case 2:if(d.call(c,xe.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=wi(n.mimeType,r),t==u.ma){Ja(e,h,e.B,n.external),xe.u(0);break}if(E=e.A.forceTransmux,(!Ot(h)||!e.B&&pu.includes(h))&&(E=!0),A=ju(n.mimeType,r),!E){xe.u(4);break}if(k=Co(u.S,(r||"").split(",")),G=Co(u.fa,(r||"").split(",")),!k||!G){xe.u(5);break}return e.s=!0,N(xe,nl(e,u.S,n,k),6);case 6:return N(xe,nl(e,u.fa,n,G),7);case 7:return xe.return();case 5:(te=io(A))&&(Y=te(),e.m[t]=Y,h=Y.convertCodecs(t,A));case 4:ve=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Pe=e.l.addSourceBuffer(ve)}catch(Ge){throw new pt(2,3,3015,Ge,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Pe.mode=rj),e.o.D(Pe,"error",function(){e.j[t][0].p.reject(new pt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Pe,"updateend",function(){return rl(e,t)}),e.h[t]=Pe,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,X(xe)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Ja(e,t,n,r){e.g||(e.g=new ks(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function Gc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Gs(e,t){return e.C||!Object.keys(e.h).length?e=null:t==vr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Pt(e,t){return e.C?null:t==vr?e.g.h:kt(Hn(e,t))}function yn(e,t,n){return e.C?0:t==vr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:mt(this.i.buffered),audio:this.C?[]:mt(Hn(this,"audio")),video:this.C?[]:mt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,r,u,c){var d=null,h=Qn(n);if(pu.includes(u))c=Dn(h),c.length&&r&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(d=Math.round(t.data)/1e3),e.ta([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.ca&&r.ca.timescale){var E=r.ca.timescale;if(!isNaN(E)){var A=0,k=!1;new kr().box("moof",yr).box("traf",yr).O("tfdt",function(G){A=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(d=A)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new Ke,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(d=t),h=h.getMetadata(),h.length&&e.ta(h,c,r?r.endTime:null));return d}function Tr(e,t,n,r,u,c,d,h,E,A){d=d===void 0?!1:d,h=h===void 0?!1:h,E=E===void 0?!1:E,A=A===void 0?!1:A;var k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){switch(gt.g){case 1:if(k=Ei,t!=k.ma){gt.u(2);break}if(!e.B){gt.u(3);break}return N(gt,e.ia,4);case 4:G=gt.h,e.g.s=G;case 3:return N(gt,AE(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.$()[0]:null),5);case 5:return gt.return();case 2:if(A||!e.s){gt.u(6);break}return N(gt,Tr(e,k.S,n,r,u,c,d,h,E,!0),7);case 7:return N(gt,Tr(e,k.fa,n,r,u,c,d,h,E,!0),8);case 8:return gt.return();case 6:if(!e.h[t])return gt.return();if(te=e.h[t].timestampOffset,Y=e.G[t],e.m[t]&&(Y=e.m[t].getOriginalMimeType()),r&&(ve=ur(e,t,n,r,Y,te),ve!=null&&(Pe=r.startTime-ve,xe=Math.abs(te-Pe),(.001<=xe||d||h)&&(!E||0<Pe||!te)&&(te=Pe,e.pa&&($i(e,t,function(){return Jf(e,t)}),$i(e,t,function(){return ed(e,t,te)}))),Ge=t==k.fa||!(k.fa in e.h),e.B&&Ge&&e.ia.resolve(te))),c&&t==k.fa&&(e.g||Ja(e,"application/cea-608",e.B,!1),e.H||(Te=Y.split(";",1)[0],e.H=new St(Te)),r?(We=e.H.i(n),We.length&&Of(e.g,We,r.startTime,r.endTime,te)):e.H.init(n)),!e.m[t]){gt.u(9);break}return N(gt,e.m[t].transmux(n,u,r,e.l.duration,t),10);case 10:n=gt.h;case 9:return n=QB(e,n,r?r.startTime:null,t),r&&e.B&&t!=k.ma&&(d||h)&&(Ue=r.startTime,$i(e,t,function(){return Jf(e,t)}),$i(e,t,function(){return ed(e,t,Ue)})),N(gt,$i(e,t,function(){var Rt=n;if(t=="video"&&e.T){var Ht=e.T;Ht.g&&Ht.g.appendBuffer(Rt,"video",Ht.o,-te)}e.h[t].appendBuffer(Rt)}),11);case 11:X(gt)}})}function Ir(e,t){var n=Pt(e,"video")||0;Pf(e.g,t,n)}function fr(e){e.g&&Pf(e.g,"",0)}g.remove=function(e,t,n){var r=this,u;return Oe(function(c){return c.g==1?(u=Ei,e==u.ma?N(c,r.g.remove(t,n),0):N(c,$i(r,e,function(){return Hs(r,e,t,n)}),4)):r.s?N(c,$i(r,u.S,function(){return Hs(r,u.S,t,n)}),0):c.u(0)})};function ii(e,t){var n;return Oe(function(r){return r.g==1?(n=Ei,t==n.ma?e.g?N(r,e.g.remove(0,1/0),0):r.return():N(r,$i(e,t,function(){return Hs(e,t,0,e.l.duration)}),4)):e.s?N(r,$i(e,n.S,function(){return Hs(e,n.S,0,e.l.duration)}),0):r.u(0)})}g.flush=function(e){var t=this,n;return Oe(function(r){return r.g==1?(n=Ei,e==n.ma?r.return():N(r,$i(t,e,function(){t.i.currentTime-=.001,rl(t,e)}),2)):t.s?N(r,$i(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,rl(t,u)}),0):r.u(0)})};function Jr(e,t,n,r,u,c,d,h,E){var A,k,G;return Oe(function(te){return te.g==1?(A=Ei,t==A.ma?(c||(e.g.s=n),Oh(e.g,r,u),te.return()):(k=[],N(te,tj(e,t,d,h,E),2))):(G=te.h,G||(k.push($i(e,t,function(){return Jf(e,t)})),e.s&&k.push($i(e,A.S,function(){return Jf(e,A.S)}))),c||(k.push($i(e,t,function(){return ed(e,t,n)})),e.s&&k.push($i(e,A.S,function(){return ed(e,A.S,n)}))),k.push($i(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,rl(e,t)})),e.s&&k.push($i(e,A.S,function(){var Y=A.S;e.h[Y].appendWindowStart=0,e.h[Y].appendWindowEnd=u,e.h[Y].appendWindowStart=r,rl(e,Y)})),N(te,Promise.all(k),0))})}function qs(e,t,n){var r;return Oe(function(u){return u.g==1?(r=Ei,t==r.ma?u.return():(t==r.fa&&(e.ia=new Rr),$i(e,t,function(){return Jf(e,t)}),e.s&&$i(e,r.S,function(){return Jf(e,r.S)}),N(u,$i(e,t,function(){return ed(e,t,n)}),2))):e.s?N(u,$i(e,r.S,function(){return ed(e,r.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return Oe(function(n){return N(n,HE(t,function(){Gc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return Oe(function(n){return N(n,HE(t,function(){if(e<t.l.duration)for(var r in t.h){var u={start:function(){},p:new Rr};t.j[r].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function Hs(e,t,n,r){r<=n?rl(e,t):e.h[t].remove(n,r)}function Jf(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,rl(e,t)}function ed(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,rl(e,t)}function rl(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),KE(e,t))}}function $i(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&rR(e,t),n.p}function HE(e,t){var n,r,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:jr(e.I),n=[],r={};for(u in e.h)r.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(r),p:r.Mc},e.j[u].push(c),n.push(r.Mc),e.j[u].length==1&&c.start(),r={Mc:r.Mc};return ce(A,2),N(A,Promise.all(n),4);case 4:he(A,3);break;case 2:throw d=be(A),d;case 3:return ce(A,5,6),N(A,t(),6);case 6:Xe(A);for(h in e.h)KE(e,h);Ae(A,0);break;case 5:throw E=be(A),new pt(2,3,3015,E,e.i.error||"No error in the media element")}})}function KE(e,t){e.j[t].shift(),rR(e,t)}function rR(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new pt(2,3,3017,t)):n.p.reject(new pt(2,3,3015,r,e.i.error||"No error in the media element")),KE(e,t)}}function QB(e,t,n,r){var u=e.qa[r];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(Ha()||ms()||Wr("SOPOpenBrowser"))&&Df(e.G[r])=="mp4"&&(t=Re(t)),t}function JB(e,t,n,r){return $i(e,t,function(){t!==vr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),rl(e,t))})}function ej(e,t){var n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt;return Oe(function(jt){switch(jt.g){case 1:n=Ei,e.C=!0,e.s=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(jt,2),e.o.ib(),d=[];for(h in e.m)d.push(e.m[h].destroy());for(E in e.j)for(A=e.j[E],k=A[0],e.j[E]=A.slice(0,1),k&&d.push(k.p.catch(pm)),G=m(A.slice(1)),te=G.next();!te.done;te=G.next())Y=te.value,Y.p.reject(new pt(2,7,7003,void 0));for(ve in e.h){Pe=e.h[ve];try{e.l.removeSourceBuffer(Pe)}catch(ln){}}return N(jt,Promise.all(d),4);case 4:return e.m={},e.h={},xe=e.l.duration,e.L=new Rr,e.l=ca(e,e.L),N(jt,e.L,5);case 5:!isNaN(xe)&&xe?e.l.duration=xe:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),Ge=new Rr,Te=e.l.sourceBuffers,We=t.size,Ue=0,gt=function(){Ue++,Ue===We&&(Ge.resolve(),e.o.Kb(Te,"addsourcebuffer",gt))},e.o.D(Te,"addsourcebuffer",gt),Rt=m(t.keys()),Ht=Rt.next();case 6:return Ht.done?(e.i.currentTime=r,N(jt,Ge,2)):(Ut=Ht.value,yt=t.get(Ut),N(jt,nl(e,Ut,yt,yt.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Ut]=[],Ht=Rt.next(),jt.u(6);break;case 2:Xe(jt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Ae(jt,0)}})}function iR(e,t){return HE(e,function(){return ej(e,t)})}function tj(e,t,n,r,u){var c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){return Ue.g==1?(c=Ei,t==c.ma||(d=Ya(Do(e.G[t])),h=Ca(e.G[t]),A=!1,k=wi(n,r),G=e.A.forceTransmux,(!Ot(k)||!e.B&&pu.includes(k))&&(G=!0),G&&(te=ju(n,r),Y=io(te))&&(E=Y(),ve=Co(c.S,(r||"").split(",")),Pe=Co(c.fa,(r||"").split(",")),ve&&Pe?(A=!0,xe=Pe,t==c.S&&(xe=ve),k=E.convertCodecs(t,ju(n,xe))):k=E.convertCodecs(t,te)),Ge=Ya(Do(k)),Te=Ca(k),d===Ge&&h===Te)?Ue.return(!1):(We=!0,(e.s||A&&E&&!e.m[t])&&(We=!1),We&&e.A.codecSwitchingStrategy==="smooth"&&Un()?N(Ue,JB(e,t,k,E),3):(E&&E.destroy(),N(Ue,iR(e,u),3)))):Ue.return(!0)})}function nj(e,t,n,r){if(t==vr)var u=!1;else{u=Ya(Do(e.G[t]));var c=Ca(e.G[t]),d=wi(n,r),h=e.A.forceTransmux;(!Ot(d)||!e.B&&pu.includes(d))&&(h=!0),n=ju(n,r),h&&(h=io(n))&&(h=h(),d=h.convertCodecs(t,n),h.destroy()),t=Ya(Do(d)),d=Ca(d),u=u!==t||c!==d}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var Vm=p.URL.createObjectURL,rj="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(r,u){return Math.max(r,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=r-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},re("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function oR(e,t,n){this.j=n,this.l=e,this.s=aR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}oR.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function ij(e,t){e.i=t}function oj(e){this.g=e}function aR(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(mt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function VE(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new Et,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return zE(c)}),this.m=new pr(function(){zE(c)}).$a(this.s.gapJumpTimerTime)}VE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},VE.prototype.mf=function(){this.o=!0,zE(this)};function zE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=aR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=rt(n,t,e.s.gapDetectionThreshold),r==null||r==0&&!e.o||(u=n.start(r),u>=e.B.pb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function td(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=aj.value().get(t),n.na(e,t,r))}var aj=new ra(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function sR(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Et,this.i=new fR(e),td(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){lR(u,u.j())})}sR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function YE(e){return e.o?e.g.currentTime:e.j()}function uR(e,t){0<e.g.readyState?dR(e.i,t):td(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){lR(e,e.j())})}function lR(e,t){.001>Math.abs(e.g.currentTime-t)?cR(e):(e.h.na(e.g,"seeking",function(){cR(e)}),dR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function cR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function fR(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}fR.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function dR(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function hR(e){this.g=e,this.j=!1,this.h=null,this.i=new Et}g=hR.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;td(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function pR(e,t,n,r,u,c){var d=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=sj(e,n,c),this.j=new VE(e,t.presentationTimeline,n,this.o,c),this.h=new sR(e,function(){e:{var h=d.j;h.j=!0,h.o=!1;var E=YE(d.h);if(h=mR(d,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!d.s||d.s<E-1)){d.s=E,uR(d.h,h),h=void 0;break e}d.A(),h=void 0}return h},function(h){var E=d.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=r;return h==null?h=1/0>d.g.getDuration()?d.g.$b():d.g.pb():0>h&&(h=d.g.pb()+h),gR(d,vR(d,h))}),this.m=new pr(function(){if(d.i.readyState!=0&&!d.i.paused){var h=YE(d.h),E=d.g.$b(),A=d.g.pb();3>A-E&&(E=A-3),h<E&&(h=mR(d,h),d.i.currentTime=h)}})}g=pR.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){uR(this.h,e)},g.Dd=function(){var e=YE(this.h);return 0<this.i.readyState&&!this.i.paused?vR(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function gR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function mR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),d=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(r);return n=e.g.dd(n+r),t>=d?gR(e,t):t>c?c:t<u?Ft(e.i.buffered,E)?E:n:t>=h||Ft(e.i.buffered,t)?t:n}function vR(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function sj(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new oR(new oj(e),t.stallThreshold,n),ij(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Je(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;r--;var u=this.get(r+1),c=-1;if(u&&0<u.g.length)for(var d=u.g.length-1;0<=d;--d){var h=u.g[d];if(e>=h.startTime&&e<h.endTime){if(!t){for(;d&&!h.l;)d--,h=u.g[d];if(!h.l)return de("No independent partial segment found!"),null}r++,c=d-1;break}}return new Na(this,r,c,n)};function WE(e,t,n){return e=new Je(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}re("shaka.media.SegmentIndex",wr),wr.forSingleSegment=WE,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function Na(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Na.prototype.ie=function(e){this.reverse=e},Na.prototype.dh=function(){return this.h},Na.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Na.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},re("shaka.media.SegmentIterator",Na),Na.prototype.next=Na.prototype.next,Na.prototype.current=Na.prototype.current,Na.prototype.currentPosition=Na.prototype.dh,Na.prototype.setReverse=Na.prototype.ie;function _i(){wr.call(this,[]),this.h=[]}z(_i,wr),g=_i.prototype,g.clone=function(){var e=new _i;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},re("shaka.media.MetaSegmentIndex",_i),_i.prototype.updateEvery=_i.prototype.ke,_i.prototype.fit=_i.prototype.sc,_i.prototype.mergeAndEvict=_i.prototype.kd,_i.prototype.evict=_i.prototype.La,_i.prototype.merge=_i.prototype.ae,_i.prototype.offset=_i.prototype.offset,_i.prototype.get=_i.prototype.get,_i.prototype.find=_i.prototype.find,_i.prototype.forEachTopLevelReference=_i.prototype.tc,_i.prototype.release=_i.prototype.release;function sp(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}sp.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},sp.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},sp.prototype.Xb=function(){return this.g.Xb()};function yR(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){ER(t,!1)}).$a(.25)}yR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function ER(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function uj(){this.g=null,this.h=[]}function $E(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function lj(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function cj(){this.i=this.h=null,this.g=[]}function XE(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function zm(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new uj,this.h=new cj}function QE(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function fj(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function up(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var r=t.next().value;if(n&&(r=t.next().value),r){for(;e.g.size<e.m&&r!=null&&(n=!0,r.preload&&r.ja!=null&&(n=!1),r.bc()==2&&(n=!1),n&&r.ca&&_R(e,r.ca),n&&!e.g.has(r)&&(n=new e_(e.j),wR(n,r,e.h),e.g.set(r,n)),e.l=r.startTime,!(e.h.fastSwitching&&r.md&&r.Wd));)r=t.next().value;JE(e)}}}function _R(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(r){return at(r,t)})){var n=new e_(e.j);wR(n,t,e.h),e.i.set(t,n)}}function TR(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&lp(e,n)}function il(e){TR(e,e.g),TR(e,e.i),e.l=0}QE.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&lp(this,r);t&&JE(this)};function JE(e){for(var t=Array.from(e.g.keys()),n={},r=m(e.i.keys()),u=r.next();!u.done;n={wd:n.wd},u=r.next())n.wd=u.value,t.some(function(c){return function(d){return at(d.ca,c.wd)}}(n))||lp(e,n.wd)}function SR(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&lp(e,r)}JE(e)}function dj(e,t){t&&t!==e.h&&(il(e),e.h=t)}function lp(e,t){var n=e.g;t instanceof dt&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function e_(e){this.g=e,this.fe=this.Ef=null}function wR(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(u){return Oe(function(c){if(c.g==1)return 0<r.byteLength?r=ci(r,u):r=u,e.Ef?N(c,e.Ef(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}e_.prototype.abort=function(){this.fe&&this.fe.abort()};function t_(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}z(t_,Sr),t_.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function Ym(e){Sr.call(this),this.g=new Map,this.h=e}z(Ym,Sr),Ym.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function hj(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function pj(e,t,n){var r=hj(e,t.contentType);gj(e,r),e={ff:t,position:n},r=r.nd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Ym.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.nd,u=r.length-1;0<=u;u--){var c=r[u];if(c.position<=e){r=c.ff;break e}}r=null}if((u=r)&&(u=n.Uf,u=!(u===r||u&&r&&u.bandwidth==r.bandwidth&&u.audioSamplingRate==r.audioSamplingRate&&u.codecs==r.codecs&&u.contentType==r.contentType&&u.frameRate==r.frameRate&&u.height==r.height&&u.mimeType==r.mimeType&&u.channelsCount==r.channelsCount&&u.pixelAspectRatio==r.pixelAspectRatio&&u.width==r.width)),u)e:{if(u=e,c=r.contentType,(c=this.h()[c])&&0<c.length){var d=c[c.length-1].end;if(u>=c[0].start&&u<d){u=!0;break e}}u=!1}u&&(n.Uf=r,JSON.stringify(r),n=new Wn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function gj(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,d){return!(c.position<=n&&d+1<u.length&&u[d+1].position<=n||c.position>=r)})}else t.nd=[]}function cp(e,t,n,r,u){return e=Li(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function AR(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new Xu(function(){return mj(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=AR.prototype,g.destroy=function(){return this.l.destroy()};function mj(e){var t,n,r,u,c,d,h;return Oe(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,fp(u),t.push(dp(u));for(c=m(e.o.values()),d=c.next();!d.done;d=c.next())h=d.value,il(h);return N(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,X(E)})}g.configure=function(e){if(this.h=e,this.I=new Vh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(il(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,il(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(vr))&&t.W&&(il(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(il(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(SR(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=n_(this,n.stream));e.disableAudioPrefetch||Tj(this)},g.start=function(e){var t=this;return Oe(function(n){if(n.g==1)return N(n,_j(t,e||new Map),2);jr(t.l),t.C=!0,X(n)})};function vj(e,t){var n,r,u,c,d,h;Oe(function(E){switch(E.g){case 1:return n=Ei,e.H++,r=e.H,ce(E,2),N(E,ii(e.g.V,n.ma),4);case 4:he(E,3);break;case 2:u=be(E),e.g&&e.g.onError(u);case 3:c=wi(t.mimeType,t.codecs),Ja(e.g.V,c,e.m.sequenceMode,t.external),d=e.g.V.F,(d.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(h=CR(e,t),e.i.set(n.ma,h),Ts(e,h,0)),X(E)}})}function yj(e){var t=e.i.get(vr);t&&(fp(t),dp(t).catch(function(){}),e.i.delete(vr)),e.s=null}function IR(e,t){var n=0>e.g.eb(),r=e.i.get("video");r&&r.Z&&r.Z.ie(n),(r=e.i.get("audio"))&&r.Z&&r.Z.ie(n),(r=e.i.get(vr))&&r.Z&&r.Z.ie(n),(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.jc&&(nd(e,t,!1,0,!1),n.jc=r):(t=n.jc)&&(n.jc=null,nd(e,t,!0,0,!1)))}function bR(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&nd(e,t.video,n,r,u,c),t.audio&&nd(e,t.audio,n,r,u,c))}function Wm(e,t){Oe(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):N(n,t.createSegmentIndex(),2):n.return();nd(e,t,!0,0,!1),X(n)})}function nd(e,t,n,r,u,c){var d=e.i.get(t.type);d||t.type!=vr?d&&(d.jc&&(t.trickModeVideo?(d.jc=t,t=t.trickModeVideo):d.jc=null),d.stream!=t||u)&&(e.o.has(t)?d.W=e.o.get(t):d.W&&dj(d.W,t),t.type==vr&&(u=wi(t.mimeType,t.codecs),Ja(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(d.stream)||d.stream.closeSegmentIndex&&d.stream.closeSegmentIndex(),d.stream=t,d.Z=null,d.Of=!!c,n&&(d.Xc?d.le=!0:d.Qa?(d.Lb=!0,d.Id=r,d.le=!0):(fp(d),a_(e,d,!0,r).catch(function(h){e.g&&e.g.onError(h)}))),Ej(e,d).catch(function(h){e.g&&e.g.onError(h)})):vj(e,t)}function Ej(e,t){var n,r;return Oe(function(u){if(u.g==1)return t.Ya?(n=t.stream,r=t.Ya,n.segmentIndex?u.u(2):N(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=r||t.stream!=n)return u.return();var c=e.g.Ld(),d=Pt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(d||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),X(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:r==vr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,r),u=Ft(u,e)),u||((Pt(this.g.V,r)!=null||n.Qa)&&$m(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),r===vr&&(r=this.g.V,r.H&&r.H.h()),n.od=!0)}};function $m(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Gs(e.g.V,t.type)==null?t.ub==null&&Ts(e,t,0):(fp(t),a_(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function _j(e,t){var n,r,u,c,d,h,E,A,k,G;return Oe(function(te){if(te.g==1){if(n=Ei,!e.j)throw new pt(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.ma,e.s),u.add(e.s)),c=e.g.V,N(te,c.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),d=m(r.keys()),h=d.next();!h.done;h=d.next())E=h.value,A=r.get(E),e.i.has(E)||(k=CR(e,A),t.has(A.id)&&(G=t.get(A.id),fj(G,function(Y,ve,Pe){return Xm(Y,ve,Pe||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),Ts(e,k,0));X(te)})}function CR(e,t){return{stream:t,type:t.type,Z:null,W:n_(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function n_(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===vr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===vr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new QE(e.h.segmentPrefetchLimit,t,function(r,u,c){return Xm(r,u,c||null,e.h.retryParameters,e.g.zb)}):null}function Tj(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r={},u=m(e.m.variants),c=u.next();!c.done;r={Fa:r.Fa},c=u.next())if(r.Fa=c.value,r.Fa.audio)if(e.o.has(r.Fa.audio)){if(c=e.o.get(r.Fa.audio),SR(c,t),!(0<t&&n.some(function(h){return function(E){return Gu(h.Fa.audio.language,E)}}(r)))){var d=e.i.get(r.Fa.audio.type);c!==(d&&d.W)&&il(c),e.o.delete(r.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return Gu(h.Fa.audio.language,E)}}(r))||!(c=n_(e,r.Fa.audio))||(r.Fa.audio.segmentIndex||r.Fa.audio.createSegmentIndex(),e.o.set(r.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function Sj(e,t){var n,r,u,c,d;return Oe(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return N(h,a_(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,N(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||Ts(e,t,0),h.return();case 4:ce(h,6),r=wj(e,t),r!=null&&(Ts(e,t,r),t.gd=!1),he(h,7);break;case 6:return u=be(h),N(h,RR(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return N(h,e.g.V.endOfStream(),10);case 10:jr(e.l),d=e.g.V.getDuration(),d!=0&&d<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(d),X(h)}})}function wj(e,t){if(i_(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==vr&&fr(e.g.V),!e.g.V.ea&&t.type!=vr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.La(n,!0),up(u,n);r=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.m.presentationTimeline.getDuration()-r,h=Pt(e.g.V,t.type);if(1e-6>d&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(vr))&&i_(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=Aj(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,d=Array.from(e.i.values()),d=m(d),h=d.next();!h.done;h=d.next())h=h.value,i_(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return r>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),up(t.W,u.startTime)),Ij(e,t,n,u).catch(function(){}),null)}function Aj(e,t,n,r){if(t.Z)return t.Z.current();if(t.Oa||r)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:r,!1,0>e.g.eb()),t.Z&&t.Z.next().value;r=e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.eb();var c=null;return r&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function Ij(e,t,n,r){var u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(u=Ei,c=t.stream,d=t.Z,t.Qa=!0,ce(Ue,2),r.bc()==2)throw new pt(1,1,1011);return N(Ue,Nj(e,t,r),4);case 4:return jr(e.l),e.A?Ue.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||r.m)?(G=new Uint8Array(0),Y=te=!1,Pe=function(gt){var Rt,Ht,Ut;return Oe(function(yt){switch(yt.g){case 1:if(te||(Y=!0,jr(e.l),e.A))return yt.return();if(ce(yt,2),G=Cj(G,gt),Rt=!1,Ht=0,new kr().box("mdat",function(jt){Ht=jt.size+jt.start,Rt=!0}).parse(G,!1,!0),!Rt){yt.u(4);break}return Ut=G.subarray(0,Ht),G=G.subarray(Ht),N(yt,r_(e,t,n,c,r,Ut,!0),5);case 5:t.W&&t.Z&&up(t.W,r.startTime,!0);case 4:he(yt,0);break;case 2:ve=be(yt),X(yt)}})},N(Ue,o_(e,t,r,Pe),9)):(A=o_(e,t,r),N(Ue,A,7)));case 7:return k=Ue.h,jr(e.l),e.A?Ue.return():(jr(e.l),t.Lb?(t.Qa=!1,Ts(e,t,0),Ue.return()):N(Ue,r_(e,t,n,c,r,k),6));case 9:if(xe=Ue.h,ve)throw ve;if(Y){Ue.u(10);break}return te=!0,jr(e.l),e.A?Ue.return():t.Lb?(t.Qa=!1,Ts(e,t,0),Ue.return()):N(Ue,r_(e,t,n,c,r,xe),10);case 10:t.W&&t.Z&&up(t.W,r.startTime,!0);case 6:if(jr(e.l),e.A)return Ue.return();t.Oa=r,d.next(),t.Qa=!1,t.uf=!1,Ge=e.g.V.ob(),Te=Ge[t.type],JSON.stringify(Te),t.Lb||e.g.mf(r,t.stream),Ts(e,t,0),he(Ue,0);break;case 2:if(We=be(Ue),jr(e.l,We),e.A)return Ue.return();if(t.Qa=!1,We.code==7001)t.Qa=!1,fp(t),Ts(e,t,0),Ue.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Ue.u(0);else if(We.code==3017)Rj(e,t,We),Ue.u(0);else return t.gd=!0,We.category==1&&t.W&&lp(t.W,r),We.severity=2,N(Ue,RR(e,t,We),0)}})}function bj(e,t,n){var r,u,c,d,h;return Oe(function(E){if(E.g==1)return r=t,r.cryptoKey?E.u(2):N(E,r.fetchKey(),3);if(u=r.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,d=u.byteLength-1;0<=d;d--)u[d]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function Cj(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Rj(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}Ts(e,t,4)}function Nj(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y,ve,Pe;return Oe(function(xe){switch(xe.g){case 1:if(r=Ei,u=[],c=Math.max(0,n.appendWindowStart-.1),d=n.appendWindowEnd+.01,h=Ya(t.stream.codecs),E=Ca(t.stream.mimeType),A=n.timestampOffset,A==t.cf&&c==t.af&&d==t.$e&&h==t.bf&&E==t.kg){xe.u(2);break}if(k=t.bf&&t.kg&&nj(e.g.V,t.type,E,h),!k){xe.u(3);break}if(G=null,t.type===r.fa?G=e.i.get(r.S):t.type===r.S&&(G=e.i.get(r.fa)),!G){xe.u(3);break}return N(xe,dp(G).catch(function(){}),5);case 5:G.ec=null,$m(e,G);case 3:return te=function(){var Ge,Te,We;return Oe(function(Ue){if(Ue.g==1)return Ge=new Map,e.j.audio&&Ge.set(r.S,e.j.audio),e.j.video&&Ge.set(r.fa,e.j.video),ce(Ue,2),t.af=c,t.$e=d,t.bf=h,t.kg=E,t.cf=A,Te=e.m.sequenceMode||e.m.type=="HLS",N(Ue,Jr(e.g.V,t.type,A,c,d,Te,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,Ge),4);if(Ue.g!=2)return he(Ue,0);throw We=be(Ue),t.af=null,t.$e=null,t.bf=null,t.cf=null,We})},N(xe,te(),2);case 2:return at(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(Y=o_(e,t,n.ca),ve=function(){var Ge,Te,We,Ue,gt,Rt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:return ce(Ut,2),N(Ut,Y,4);case 4:return Ge=Ut.h,jr(e.l),Te=null,We=new Map,Ue={projection:null,hfov:null},gt=new kr,gt.box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(yt){Te=It(yt.reader,yt.version).timescale}).box("hdlr",function(yt){switch(yt=yt.reader,yt.skip(8),yt.hc()){case"soun":We.set(r.S,Te);break;case"vide":We.set(r.fa,Te)}Te=null}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("encv",Ai).box("avc1",Ai).box("avc3",Ai).box("hev1",Ai).box("hvc1",Ai).box("dvav",Ai).box("dva1",Ai).box("dvh1",Ai).box("dvhe",Ai).box("vexu",yr).box("proj",yr).O("prji",function(yt){yt=yt.reader.hc(),Ue.projection=yt}).box("hfov",function(yt){yt=yt.reader.M()/1e3,Ue.hfov=yt}).parse(Ge),Dj(e,Ue),We.has(t.type)?n.ca.timescale=We.get(t.type):Te!=null&&(n.ca.timescale=Te),Rt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,N(Ut,e.g.Qf(t.type,Ge),5);case 5:return N(Ut,Tr(e.g.V,t.type,Ge,null,t.stream,Rt),6);case 6:he(Ut,0);break;case 2:throw Ht=be(Ut),t.ec=null,Ht}})},e.g.Yh(n.startTime,n.ca),u.push(ve()))),e.m.sequenceMode&&(Pe=t.Oa?t.Oa.j:null,n.j!=Pe&&u.push(qs(e.g.V,t.type,n.startTime))),N(xe,Promise.all(u),0)}})}function r_(e,t,n,r,u,c,d){d=d===void 0?!1:d;var h,E,A,k,G,te;return Oe(function(Y){switch(Y.g){case 1:return h=r.closedCaptions&&0<r.closedCaptions.size,A=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(A||k)&&(E=new kr),A&&E.O("emsg",function(ve){var Pe=r.emsgSchemeIdUris;if(ve.version===0)var xe=ve.reader.hc(),Ge=ve.reader.hc(),Te=ve.reader.M(),We=ve.reader.M(),Ue=ve.reader.M(),gt=ve.reader.M(),Rt=u.startTime+We/Te;else Te=ve.reader.M(),Rt=ve.reader.Cc()/Te+u.timestampOffset,We=Rt-u.startTime,Ue=ve.reader.M(),gt=ve.reader.M(),xe=ve.reader.hc(),Ge=ve.reader.hc();ve=ve.reader.sb(ve.reader.getLength()-ve.reader.wa()),(Pe&&Pe.includes(xe)||e.h.dispatchAllEmsgBoxes)&&(xe=="urn:mpeg:dash:event:2012"?e.g.Zh():(Pe=new Map().set("detail",{startTime:Rt,endTime:Rt+Ue/Te,schemeIdUri:xe,value:Ge,timescale:Te,presentationTimeDelta:We,eventDuration:Ue,id:gt,messageData:ve}),Pe=new Wn("emsg",Pe),Pe.cancelable=!0,e.g.onEvent(Pe),Pe.defaultPrevented||xe!="https://aomedia.org/emsg/ID3"&&xe!="https://developer.apple.com/streaming/emsg-id3"||(xe=Dn(ve),xe.length&&u&&e.g.$h([{cueTime:u.startTime,data:ve,frames:xe,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ve){if(!e.F&&u.ca.timescale){var Pe=ve.reader,xe=ve.version;Pe.M(),ve=Pe.M();var Ge=Pe.M();ve=1e3*ve+Ge/Math.pow(2,32)*1e3,xe===0?Pe=Pe.M():(xe=Pe.M(),Pe=Pe.M(),Pe=xe*Math.pow(2,32)+Pe),ve=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ve).getTime(),Pe=new Map().set("detail",{wallClockTime:ve,programStartDate:new Date(ve-Pe/u.ca.timescale*1e3)}),Pe=new Wn("prft",Pe),e.g.onEvent(Pe),e.F=!0}}),(A||k)&&E.parse(c),N(Y,xj(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,te=t.Of,t.Of=!1,N(Y,e.g.Qf(t.type,c),3);case 3:return N(Y,Tr(e.g.V,t.type,c,u,r,h,G,te,d),4);case 4:jr(e.l),X(Y)}})}function xj(e,t,n){var r,u,c,d;return Oe(function(h){if(h.g==1)return r=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Gs(e.g.V,t.type),u==null?h.return():(c=n-u,d=c-r,d<=e.h.evictionGoal?h.return():N(h,e.g.V.remove(t.type,u,u+d),2));jr(e.l),X(h)})}function i_(e){return e&&e.type==vr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function o_(e,t,n,r){var u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:if(u=n.ed())return A.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof dt&&(G=k.i),G.has(n)?(k=G.get(n),r&&(k.Ef=r),c=k.fe):c=null}return c||(c=Xm(n,t.stream,r||null,e.h.retryParameters,e.g.zb)),d=0,t.Z&&(d=t.Z.h),t.Ya=c,N(A,c.promise,2);case 2:if(h=A.h,t.Ya=null,E=h.data,!n.aesKey){A.u(3);break}return N(A,bj(E,n.aesKey,d),4);case 4:E=A.h;case 3:return A.return(E)}})}function Xm(e,t,n,r,u){var c=e instanceof Je?e:void 0,d=c?1:0;return e=cp(e.$(),e.Aa,e.ja,r,n),e.contentType=t.type,u.request($a,e,{type:d,stream:t,segment:c})}function a_(e,t,n,r){var u,c;return Oe(function(d){if(d.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&il(t.W),r?(u=e.g.Ld(),c=e.g.V.getDuration(),N(d,e.g.V.remove(t.type,u+r,c),3)):N(d,ii(e.g.V,t.type),4);if(d.g!=3)return jr(e.l),n?N(d,e.g.V.flush(t.type),3):d.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||Ts(e,t,0),X(d)})}function Ts(e,t,n){var r=t.type;(r!=vr||e.i.has(r))&&(t.ub=new Ps(function(){var u;return Oe(function(c){if(c.g==1)return ce(c,2),N(c,Sj(e,t),4);if(c.g!=2)return he(c,0);u=be(c),e.g&&e.g.onError(u),X(c)})}).X(n))}function fp(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function dp(e){return Oe(function(t){return e.Ya?N(t,e.Ya.abort(),0):t.u(0)})}function RR(e,t,n){var r;return Oe(function(u){if(u.g==1)return N(u,zh(e.I),2);jr(e.l),r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<r&&(n.handled=e.g.Jd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function Mj(e){var t,n,r,u,c,d;return Oe(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,r=Ei,(u=e.i.get(r.S))&&(u.ec=null,$m(e,u),dp(u).catch(function(){})),(c=e.i.get(r.fa))&&(c.ec=null,$m(e,c),dp(c).catch(function(){})),d=new Map,e.j.audio&&d.set(r.S,e.j.audio),e.j.video&&d.set(r.fa,e.j.video),N(h,iR(e.g.V,d),2))):h.return(!0)})}function Dj(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function s_(){}function u_(e,t,n,r,u){var c=u in r,d=!0,h;for(h in t){var E=u+"."+h,A=c?r[u]:n[h];c||h in n?t[h]===void 0?A===void 0||c?delete e[h]:e[h]=Wa(A):A.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=Wa(A)),E=u_(e[h],t[h],A,r,E),d=d&&E):typeof t[h]!=typeof A||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=A.constructor?(de("Invalid config, wrong type for "+E),d=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&He("Unexpected number of arguments for "+E),e[h]=t[h]):(de("Invalid config, unrecognized key "+E),d=!1)}return d}function Qm(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function rd(e,t){return e&&t}re("shaka.util.ConfigUtils",s_),s_.convertToConfigObject=Qm,s_.mergeConfigObjects=u_;function es(){}function NR(e){return e=Va(e),new ui(e).wb}function hp(e,t,n){function r(h){tn(c).setUint32(d,h.byteLength,!0),d+=4,c.set(Qn(h),d),d+=h.byteLength}if(!n||!n.byteLength)throw new pt(2,6,6015);var u;typeof t=="string"?u=xf(t,!0):u=t,e=Va(e),e=xf(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),d=0;return r(e),r(u),r(n),c}function xR(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Va(e).split("skd://").pop(),hp(e,n,t))}function l_(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}re("shaka.util.FairPlayUtils",es),es.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Vr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Si(qo(n)))}},es.expressplayFairPlayRequest=function(e,t){l_(e,t)},es.conaxFairPlayRequest=function(e,t){l_(e,t)},es.ezdrmFairPlayRequest=function(e,t){l_(e,t)},es.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=du(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=za("spc="+e))},es.expressplayInitDataTransform=function(e,t,n){return xR(e,t,n)},es.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Va(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var r=new ArrayBuffer(2*n.length);r=Lu(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return hp(e,r,t)},es.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Va(e).split(";").pop(),hp(e,n,t))},es.verimatrixInitDataTransform=function(e,t,n){return xR(e,t,n)},es.initDataTransform=hp,es.defaultGetContentId=NR,es.isFairPlaySupported=function(){var e;return Oe(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),N(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(be(t),t.return(!1))})};function c_(){}function id(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:sa(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,A,k){return p.shakaMediaKeysPolyfill&&A=="skd"&&(A=k.serverCertificate,k=NR(E),E=hp(E,k,A)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ms(),minHdcpVersion:"",ignoreDuplicateInitData:!Fu()};(ms()||Nr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Fu()||ku()||Wr("Tizen 4")||ia()&&fu()===38||ia()&&fu()===53||ia()&&fu()===68||oa()&&(!oa()||!Wr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&bl()||(n="smooth",r=!0),r={retryParameters:sa(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Jm,manifestPreprocessorTXml:ev,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(ku()||Fu()||ia()&&fu()===38||Nr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Jm,manifestPreprocessorTXml:ev,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:sa(),failureCallback:function(E){return rd([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(ia()||Ha()||oa()||ys())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return Oe(function(A){return A.return(E)})},downloadSizeCallback:function(E){var A;return Oe(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?N(k,navigator.storage.estimate(),3):k.return(!0):(A=k.h,k.return(A.usage+E<.95*A.quota))})},progressCallback:function(E,A){return rd([E,A])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return rd([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,A){return rd([E,A])}};var d=!1;(ia()||Ha()||oa()||ys()||Tc()||Nr()||ms())&&(d=!0);var h={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:d}};return c.trackSelectionCallback=function(E){return Oe(function(A){return A.return(Pj(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function qc(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return u_(e,t,n||id(),r,"")}function Pj(e,t,n){var r=n;r=="AUTO"&&(r=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=Nl(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Cr(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var d=n.filter(function(h){return h.height&&480>=h.height});for(d.length&&(d.sort(function(h,E){return E.height-h.height}),n=d.filter(function(h){return h.height==d[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=vr&&n.type!="image"||t.push(n);return t}function Jm(e){return rd([e],e)}function ev(e){return rd([e],e)}re("shaka.util.PlayerConfiguration",c_),c_.mergeConfigObjects=qc,c_.createDefault=id;function ol(e,t,n,r,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=r,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new zm,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}z(ol,Sr);function tv(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function Oj(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function MR(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=ol.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function Lj(e){return e.da=!0,e.i}function kj(e){return e.sa=!0,e.j}function Fj(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function Uj(e){return e.ea=!0,e.l}function Bj(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return N(n,Promise.resolve(),2);case 2:return ce(n,3),N(n,jj(e),5);case 5:return e.o?n.return():(e.qa.resolve(),N(n,Zj(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Ol(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),mm(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var r=e.g.abrFactory;e.s=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Rb){r=e.h.presentationTimeline.R();var u=jf(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&DR(e,u.video,r),u.audio&&DR(e,u.audio,r))}return N(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),he(n,0);break;case 3:throw t=be(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function f_(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function jj(e){var t,n,r,u,c;return Oe(function(d){if(d.g==1)return f_(e,"manifest-parser"),e.j||(e.B=Ie(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,f_(e,"manifest"),e.h?d.u(2):(n=e,N(d,e.j.start(e.K,e.Ub),3));if(d.g!=2&&(n.h=d.h),r=new Wn("manifestparsed",void 0),e.dispatchEvent(r),e.h.variants.length==0)throw new pt(2,4,4036);Gj(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,X(d)})}function Zj(e){var t,n,r,u,c;return Oe(function(d){switch(d.g){case 1:f_(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=bc(e.h.variants,h.h.restrictions,h.i),!t){d.u(2);break}return n=new Wn("trackschanged",void 0),N(d,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return r=jf(e.h.variants),N(d,Bm(e.l,r,e.h.offlineSessionIds),4);case 4:return N(d,je(e.A,e.h),5);case 5:if(u=d.h,!u){d.u(0);break}return c=new Wn("trackschanged",void 0),N(d,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(d)}})}g.configure=function(e,t){e=Qm(e,t),qc(this.g,e)},g.getConfiguration=function(){return Wa(this.g)};function DR(e,t,n){var r,u,c,d,h;Oe(function(E){if(E.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new QE(r,t,function(A,k,G){return Xm(A,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),N(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(d=t.segmentIndex.xb(c))?d.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&_R(u,h.ca):up(u,h.startTime)),X(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,r;return Oe(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return N(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return N(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return N(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())r=n.value,il(r);X(u)}})};function Gj(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}re("shaka.media.PreloadManager",ol),ol.prototype.destroy=ol.prototype.destroy,ol.prototype.waitForFinish=ol.prototype.Fi;function nv(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:od,cc:function(r,u){return Hc(n,"enter",r,u)}},{oc:pp,nc:od,cc:function(r,u){return Hc(n,"enter",r,u)}},{oc:gp,nc:od,cc:function(r,u){return Hc(n,"enter",r,u)}},{oc:od,nc:pp,cc:function(r,u){return Hc(n,"exit",r,u)}},{oc:od,nc:gp,cc:function(r,u){return Hc(n,"exit",r,u)}},{oc:pp,nc:gp,cc:function(r,u){return Hc(n,"skip",r,u)}},{oc:gp,nc:pp,cc:function(r,u){return Hc(n,"skip",r,u)}}],this.h=new Et,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}z(nv,Sr),nv.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},nv.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?pp:e>r.endTime?gp:od;this.g.set(r,c);for(var d=m(this.m),h=d.next();!h.done;h=d.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(r,t)}}};function Hc(e,t,n,r){t=new Wn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var pp=1,od=2,gp=3;function d_(e,t,n){var r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:var G=new ui(e).Pa.split("/").pop().split(".");return r=G.length==1?"":G.pop().toLowerCase(),(u=qj[r])?k.return(u):(c=0,d=Li([e],n),ce(k,2),d.method="HEAD",N(k,t.request(c,d).promise,4));case 4:h=k.h,u=h.headers["content-type"],he(k,3);break;case 2:if(E=be(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return d.method="GET",N(k,t.request(c,d).promise,6);case 6:A=k.h,u=A.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var qj={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function PR(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(d){return PR(d,e)}).join("");var n=[],r=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=OR(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=OR(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(d,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+d+"</"+h+">"},e.payload)}function OR(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function h_(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(h_(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=PR(r,t),n.push(u)}return n}function fa(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=fa.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(LR(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=h_(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=m(t);for(var u=t.next();!u.done;r={qc:r.qc},u=t.next())r.qc=u.value,e.some(function(c){return function(d){return d.startTime==c.qc.startTime&&d.endTime==c.qc.endTime&&d.text==c.qc.payload}}(r))||(u=Hj(r.qc))&&n.push(u);for(e=n.slice().sort(function(c,d){return c.startTime!=d.startTime?c.startTime-d.startTime:c.endTime!=d.endTime?c.endTime-d.startTime:"line"in VTTCue.prototype?n.indexOf(d)-n.indexOf(c):n.indexOf(c)-n.indexOf(d)}),e=m(e),r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},g.destroy=function(){return this.g&&(LR(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Hj(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function LR(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}re("shaka.text.SimpleTextDisplayer",fa),fa.prototype.setTextVisibility=fa.prototype.setTextVisibility,fa.prototype.isTextVisible=fa.prototype.isTextVisible,fa.prototype.destroy=fa.prototype.destroy,fa.prototype.append=fa.prototype.append,fa.prototype.remove=fa.prototype.remove,fa.prototype.configure=fa.prototype.configure;function da(){}g=da.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},re("shaka.text.StubTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function kR(){}function mp(e){for(;e.firstChild;)e.removeChild(e.firstChild)}re("shaka.util.Dom",kR),kR.removeAllChildren=mp;function ha(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){r.A.paused||ad(r)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Et,this.j.D(document,"fullscreenchange",function(){ad(r,!0)}),this.j.D(this.A,"seeking",function(){ad(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){ad(r,!0)}),this.o.observe(this.g)),this.B=new Map}g=ha.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var r=e.next();!r.done;n={ud:n.ud},r=e.next())n.ud=r.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);ad(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ad(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function Kj(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function FR(e,t,n,r,u){var c=!1,d=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var A=e.i.get(E),k=E.startTime<=r&&E.endTime>r,G=A?A.Mg:null;A&&(d.push(A.Ce),A.ic&&d.push(A.ic),k||(c=!0,e.i.delete(E),A=null)),k&&(h.push(E),A?Kj(e,G)||(c=!0):(Vj(e,E,u),A=e.i.get(E),G=A.Mg,c=!0)),0<E.nestedCues.length&&G&&FR(e,E.nestedCues,G,r,u),u.pop()}if(c){for(r=m(d),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(te,Y){return te.startTime!=Y.startTime?te.startTime-Y.startTime:te.endTime-Y.endTime}),h=m(h),E=h.next();!E.done;E=h.next())r=e.i.get(E.value),r.ic?(r.ic.contains(n)&&r.ic.removeChild(n),n.appendChild(r.ic),r.ic.appendChild(r.Ce)):n.appendChild(r.Ce)}}function ad(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())mp(r.value);mp(e.g),e.i.clear(),e.B.clear()}e.m&&FR(e,e.h,e.g,n,[])}}function Vj(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&Yj(e,c,t,n,r),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var d=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(d))n=e.B.get(d);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",A=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+d,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+A),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,A=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,A-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=A+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(d,h),n=h}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function zj(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Vn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Vn?"line-right":"center"}function Yj(e,t,n,r,u){var c=t.style,d=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return" ".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=p_(n.linePadding,n,e.s),c.paddingRight=p_(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),!u&&((t=UR(r,function(k){return k.backgroundColor}))?A.style.backgroundColor=t:E&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=UR(r,function(k){return k.fontFamily}))&&(A.style.fontFamily=t),E&&(A.textContent=E)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),d||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=p_(n.fontSize,n,e.s),r=n.line,r!=null&&(d=n.lineInterpretation,d==cn&&(d=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),d==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==bn?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==bn?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==bn?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=zj(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function p_(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function UR(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}re("shaka.text.UITextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.remove=ha.prototype.remove,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.configure=ha.prototype.configure;function Wj(e,t){function n(c){for(var d=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(d+=E.end-E.start);return c=Math.floor(d/3600),h=Math.floor(d/60%60),E=Math.floor(d%60),d=Math.floor(1e3*d%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>d?10>d?"00":"0":"")+d}var r=h_(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var d=[];switch(c.textAlign){case"left":d.push("align:left");break;case"right":d.push("align:right");break;case kn:d.push("align:middle");break;case"start":d.push("align:start");break;case"end":d.push("align:end")}switch(c.writingMode){case"vertical-lr":d.push("vertical:lr");break;case"vertical-rl":d.push("vertical:rl")}return d.length?" "+d.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}re("shaka.text.WebVttGenerator",function(){});function BR(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}BR.prototype.configure=function(e){this.g=e};function $j(e,t,n){try{if(!e.g.enabled)return t;var r=g_(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=iv;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=av;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=ZR;break e}u=void 0}r.ot=u,r.su=!0;var c=rv(r);return m_(t,c)}catch(d){return Tt("CMCD_SRC_ERROR","Could not generate src CMCD data.",d),t}}function g_(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function sd(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,g_(e)),n.pr=e.h.eb();var u=n.ot===ov||n.ot===av;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=Xj(e,n),r)r=t8(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=rv(e);c&&(t.uris=t.uris.map(function(d){return m_(d,c)}))}}}function Xj(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function Qj(e){if(e.type===0)return n8;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?av:ov;if(t=="audio")return iv;if(t=="text")return e.mimeType==="application/mp4"?sv:v_}}function Jj(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function jR(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function e8(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case ov:return e.videoBandwidth||NaN;case iv:return e.audioBandwidth||NaN;default:return e.bandwidth}}function rv(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function r(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},d=Object.keys(e||{}).sort();d=m(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;var E=e[h];if(r(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var A=c[h];A&&(E=A(E)),A=typeof E;var k=void 0;k=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):A==="boolean"?h:A==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function t8(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var d=t.next();!d.done;d=t.next())d=d.value,u[c[d]!=null?c[d]:1][d]=e[d];for(e=0;e<u.length;e++)(c=rv(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function m_(e,t){return!t||e.includes("offline:")?e:(e=new ui(e),e.g.set("CMCD",t),e.toString())}var ZR="m",iv="a",ov="v",av="av",n8="i",v_="c",sv="tt";re("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function ts(e){this.h=e,this.g=null}g=ts.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(HR)?1e3*this.g.get(HR):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(qR)?1e3*this.g.get(qR):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has(KR)?this.g.get(KR):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(VR)?this.g.get(VR):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function GR(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}re("shaka.util.CmsdManager",ts),ts.prototype.getBandwidthEstimate=ts.prototype.getBandwidthEstimate,ts.prototype.getRoundTripTime=ts.prototype.yh,ts.prototype.getResponseDelay=ts.prototype.xh,ts.prototype.getEstimatedThroughput=ts.prototype.cg,ts.prototype.getMaxBitrate=ts.prototype.dg;var qR="etp",HR="mb",KR="rd",VR="rtt";function zR(){this.g=null,this.h=[]}function y_(e,t){return Oe(function(n){if(n.g==1)return e.g?N(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}zR.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function dn(e,t){Sr.call(this);var n=this;this.l=C_,this.Rd=this.g=null,this.da=!1,this.Vd=new Et,this.Rb=new Et,this.m=new Et,this.ta=new Et,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new zR,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=cd(this),this.ba={width:1/0,height:1/0},this.Pd=new we(this.h,this.ba,null),this.s=null,this.sa=new Ol(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=g8(this),this.aa=new ts(this.h.cmsd),this.G=eN(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,hv&&(this.A=hv(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){A_(n),n.vf()}),this.Td=new pr(function(){return _8(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}z(dn,Sr);function uv(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function r8(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(bl()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||He("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),uv(e),e.K==null&&(e.K=new oo(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else uv(e)}function ei(e,t){return new Wn(e,t)}g=dn.prototype,g.destroy=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return e.l==Ks?n.return():(uv(e),t=e.detach(),e.l=Ks,N(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return N(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),X(n)}})};function ud(e,t){e.dispatchEvent(ei("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Oe(function(d){switch(d.g){case 1:if(n.l==Ks)throw new pt(2,7,7e3);if(r=n.g&&n.g==e,!n.g||n.g==e){d.u(2);break}return N(d,n.detach(),2);case 2:return N(d,E_(n,"attach"),4);case 4:if(d.h)return d.return();if(ce(d,5,6),r||(ud(n,"attach"),u=function(){var h=I_(n);h&&hd(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!Io()||n.F){d.u(6);break}return N(d,__(n),6);case 6:Xe(d),n.Y.release(),Ae(d,0);break;case 5:return c=be(d),N(d,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return Oe(function(n){if(n.g==1){if(t.l==Ks)throw new pt(2,7,7e3);return N(n,t.lc(!1,e),2)}if(n.g!=3)return N(n,E_(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),ud(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}X(n)})};function E_(e,t){var n;return Oe(function(r){return r.g==1?(n=++e.Yd,N(r,y_(e.Y,t),2)):n!=e.Yd?(e.Y.release(),r.return(!0)):r.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,d,h,E,A,k,G;return Oe(function(te){switch(te.g){case 1:return n.l!=Ks&&(n.l=C_),N(te,E_(n,"unload"),2);case 2:return te.h?te.return():(oe(te,3),n.Ia=!1,ud(n,"unload"),e&&!Io()&&(e=!1),uv(n),r=n.Tb.map(function(Y){return Y()}),n.Tb=[],N(te,Promise.all(r),5));case 5:if(n.dispatchEvent(ei("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){te.u(6);break}return N(te,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){te.u(8);break}return N(te,n.o.stop(),8);case 8:if(!n.j){te.u(10);break}return N(te,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){te.u(12);break}return N(te,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&mp(n.g),!n.g||!n.g.src){te.u(14);break}return N(te,new Promise(function(Y){return new pr(Y).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){te.u(16);break}return N(te,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(d=c.value,h=m([d.audio,d.video]),E=h.next();!E.done;E=h.next())(A=E.value)&&A.segmentIndex&&A.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new zm,n.kf=null,n.$c=[],n.N=NaN,w_(n);case 3:Xe(te),n.Y.release(),Ae(te,4);break;case 4:if(e&&Io()&&!n.F)return N(te,__(n),0);te.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:if(r.l==Ks)throw new pt(2,7,7e3);return u=null,c="",e instanceof ol?(u=e,c=u.ad()||""):c=e||"",N(Ge,y_(r.Y,"load"),2);case 2:if(r.Y.release(),!r.g)throw new pt(2,7,7002);if(!r.qa){Ge.u(3);break}return N(Ge,r.lc(!1),3);case 3:if(d=++r.Yd,h=function(){return Oe(function(Te){if(Te.g==1)return r.Yd==d?Te.u(0):u?N(Te,u.destroy(),3):Te.u(3);throw new pt(2,7,7e3)})},E=function(Te,We){return Oe(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),N(Ue,y_(r.Y,We),4);case 4:return N(Ue,h(),5);case 5:return N(Ue,Te(),6);case 6:return N(Ue,h(),7);case 7:u&&r.h&&(u.g=r.h);case 2:Xe(Ue),r.Y.release(),Ae(Ue,0)}})},ce(Ge,5,6),t==null&&u&&(t=u.getStartTime()),r.ea=t,r.Ia=!1,r.dispatchEvent(ei("loading")),u){n=u.Y,Ge.u(8);break}if(n){Ge.u(8);break}return N(Ge,E(function(){return Oe(function(Te){if(Te.g==1)return N(Te,$R(r,c),2);n=Te.h,X(Te)})},"guessMimeType_"),8);case 8:if(A=!!u,u){MR(u,r),r.s=u.getStats(),Ge.u(11);break}return N(Ge,YR(r,c,t,n,!0),12);case 12:if(u=Ge.h,!u){r.s=new zm,Ge.u(11);break}return MR(u,r),r.s=u.getStats(),N(Ge,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,r.s=u?u.getStats():new zm,r.qa=c,r.gf=n||null,k)return N(Ge,E(function(){return Oe(function(Te){return N(Te,s8(r,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(r.F){Ge.u(17);break}return N(Ge,E(function(){return Oe(function(Te){return N(Te,__(r),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return N(Ge,E(function(){return u.qa},"waitForManifest"),19);case 19:return r.h=u.getConfiguration(),r.Pd=u.A,r.Ga=u.B,r.I=kj(u),r.mb=Fj(u),r.lb=u.lb,r.i=u.Te(),(te=u.m)&&(r.sa=te),A&&r.g&&r.g.nodeName==="AUDIO"&&(i8(r),r.configure("manifest.disableVideo",!0)),N(Ge,E(function(){return u.pa},"waitForDrm"),20);case 20:return r.B=Uj(u),N(Ge,E(function(){return Oe(function(Te){return N(Te,r.B.Vc(r.g),0)})},"drmEngine_.attach"),21);case 21:return N(Ge,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(Y=u.s)||r.pa&&r.pa==Y||(r.o=Lj(u),r.pa=u.s,typeof r.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),ve=Bj(u),Pe=u.ta,N(Ge,E(function(){return Oe(function(Te){return N(Te,a8(r,G,Pe,ve),0)})},"loadInner_"),23);case 23:Oj(u),Ge.u(16);break;case 24:return N(Ge,E(function(){return Oe(function(Te){return N(Te,u8(r,G,n),0)})},"srcEqualsInner_"),16);case 16:r.dispatchEvent(ei("loaded"));case 6:if(Xe(Ge),!u){Ge.u(26);break}return N(Ge,u.destroy(),26);case 26:Ae(Ge,0);break;case 5:if(xe=be(Ge),xe.code==7e3){Ge.u(28);break}return N(Ge,r.lc(!1),28);case 28:throw xe}})};function i8(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c;return Oe(function(d){switch(d.g){case 1:if(r=null,!(n.i&&n.I&&n.Ga&&n.qa)){d.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,N(d,WR(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=r=d.h,E=n.I,A=n.Ga;h.h=n.i,h.j=E,h.B=A,h=r,E=n.pa,h.i=n.o,h.s=E,r.m=n.sa,r.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return N(d,n.lc(e,t),4);case 4:return d.return(r)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Oe(function(c){return c.g==1?N(c,YR(r,e,t,n),2):((u=c.h)?u.start().catch(function(){}):hd(r,new pt(2,7,7005)),c.return(u))})};function YR(e,t,n,r,u){u=u===void 0?!1:u;var c,d,h;return Oe(function(E){return E.g==1?(c=Date.now()/1e3,r?E.u(2):N(E,$R(e,t),3)):(E.g!=2&&(r=E.h),o8(e,r)?E.return(null):(d=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(d=!0)),E.return(WR(e,t,n,r||null,c,!u,d,h))))})}function WR(e,t,n,r,u,c,d,h){c=c===void 0?!0:c,d=d===void 0?!1:d,h=h===void 0?!0:h;var E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt;return Oe(function(Ht){return Ht.g==1?(E=null,A=Wa(e.h),d&&(A.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},te=function(Ut,yt){k()?E.configure(Ut,yt):e.configure(Ut,yt)},e.ba.width!=1/0||e.ba.height!=1/0?Ht.u(2):N(Ht,Ia(),3)):(Ht.g!=2&&(Y=Ht.h,e.ba.width=Y.width,e.ba.height=Y.height),ve=new we(A,e.ba,null),Pe={networkingEngine:e.G,filter:function(Ut){var yt,jt;return Oe(function(ln){if(ln.g==1)return N(ln,je(ve,Ut),2);if(ln.g!=4)return yt=ln.h,yt?(jt=ei("trackschanged"),N(ln,Promise.resolve(),4)):ln.u(0);E.dispatchEvent(jt),X(ln)})},makeTextStreamsForClosedCaptions:function(Ut){return y8(e,Ut)},onTimelineRegionAdded:function(Ut){var yt=E.C;e:{for(var jt=m(yt.g),ln=jt.next();!ln.done;ln=jt.next())if(ln=ln.value,ln.schemeIdUri==Ut.schemeIdUri&&ln.id==Ut.id&&ln.startTime==Ut.startTime&&ln.endTime==Ut.endTime){jt=ln;break e}jt=null}jt==null&&(yt.g.add(Ut),Ut=new Wn("regionadd",new Map([["region",Ut]])),yt.dispatchEvent(Ut))},onEvent:function(Ut){return E.dispatchEvent(Ut)},onError:function(Ut){return E.onError(Ut)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){te("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Ut){var yt=E.l,jt=yt?yt.g:null;jt&&yt.s&&ae(ve,jt.keySystem,Ut)},onManifestUpdated:function(){var Ut=new Map().set("isLive",e.R());E.dispatchEvent(ei("manifestupdated",Ut)),tv(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},xe=new t_(function(){return e.Ib()}),xe.addEventListener("regionadd",function(Ut){var yt=Ut.region;yp(e,"timelineregionadded",yt,E),tv(E,!1,function(){e.A&&e.A.onDashTimedMetadata(yt)})}),Ge=null,A.streaming.observeQualityChanges&&(Ge=new Ym(function(){return e.ob()}),Ge.addEventListener("qualitychange",function(Ut){var yt=Ut.quality;Ut=Ut.position,yt=new Map().set("mediaQuality",{bandwidth:yt.bandwidth,audioSamplingRate:yt.audioSamplingRate,codecs:yt.codecs,contentType:yt.contentType,frameRate:yt.frameRate,height:yt.height,mimeType:yt.mimeType,channelsCount:yt.channelsCount,pixelAspectRatio:yt.pixelAspectRatio,width:yt.width}).set("position",Ut),e.dispatchEvent(ei("mediaqualitychanged",yt))})),Te=!0,We={zb:e.G,onError:function(Ut){return E.onError(Ut)},ee:function(Ut){tv(E,!0,function(){e:{var yt=ei("keystatuschanged");e.dispatchEvent(yt);var jt=Object.keys(Ut);yt=jt.length==1&&jt[0]=="00";var ln=!1;if(jt.length){jt=m(e.i.variants);for(var gn=jt.next();!gn.done;gn=jt.next()){gn=gn.value;var Ln=[];gn.audio&&Ln.push(gn.audio),gn.video&&Ln.push(gn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=gn.allowedByKeySystem,qn.keyIds.size){gn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Ut[yt?"00":Yn])||e.B.F)&&(gn.allowedByKeySystem=gn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=gn.allowedByKeySystem&&(ln=!0)}}}if(ln&&(ns(e),!fd(e)))break e;(yt=e.j.j)&&!yt.allowedByKeySystem&&dd(e)}})},onExpirationUpdated:function(Ut,yt){var jt=ei("expirationupdated");E.dispatchEvent(jt),(jt=E.j)&&jt.onExpirationUpdated&&jt.onExpirationUpdated(Ut,yt)},onEvent:function(Ut){E.dispatchEvent(Ut),Ut.type=="drmsessionupdate"&&Te&&(Te=!1,Ut=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Ut,e.K&&Zi(e.K))}},Ue=eN(e,k),gt=function(){return e.rc(We)},Rt={config:A,Uh:Pe,di:xe,ci:Ge,rc:gt,Th:ve,networkingEngine:Ue,Vg:c,Ug:h},E=new ol(t,r,u,n,Rt),Ht.return(E))})}function $R(e,t){var n,r;return Oe(function(u){return u.g==1?(n=e.h.manifest.retryParameters,N(u,d_(t,e.G,n),2)):(r=u.h,r=="application/x-mpegurl"&&vs()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function o8(e,t){if(!Io())return!0;if(t){if((e.g||Sc()).canPlayType(t)=="")return!1;if(!(Io()&&t in ke))return!0;if(fm(t)){if(e.h.streaming.preferNativeHls)return!0;if(vs()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(vs())return e.h.streaming.useNativeHlsOnSafari}}return!1}function __(e){var t,n,r,u,c;return Oe(function(d){if(d.g==1)return ud(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,r=p8(e.g,n,function(h,E,A){XR(e,h,E,A)},e.K),r.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,r.ba=c,N(d,r.L,2);e.F=r,X(d)})}function a8(e,t,n,r){var u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut;return Oe(function(yt){switch(yt.g){case 1:for(ud(e,"load"),u=e.g,e.H=new sp({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(jt){u.playbackRate=jt},og:function(jt){u.currentTime+=jt}}),c=function(){return lv(e)},d=function(){return sN(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",d),r8(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,b_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(jt,ln,gn){e.j&&jt!=e.j.j&&fv(e,jt,!0,ln===void 0?!1:ln,gn===void 0?0:gn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=m8(e),e.j.configure(e.h.streaming),e.l=Oo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(jt){if(jt.track)switch(jt=jt.track,jt.kind){case"chapters":JR(e,jt)}}),e.dispatchEvent(ei("streaming")),h=n,(E=e.j.j)||h||(h=lN(e,!0)),A=[],k=E||h,G=m([k.video,k.audio]),te=G.next();!te.done;te=G.next())(Y=te.value)&&!Y.segmentIndex&&A.push(Y.createSegmentIndex());if(!(0<A.length)){yt.u(2);break}return N(yt,Promise.all(A),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),b_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ve=function(jt){e.C=d8(e,jt),e.bb=h8(e,t),tN(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ve(e.ea),E){yt.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){yt.u(5);break}return Pe=e.i.presentationTimeline,xe=e.ea||e.g.currentTime,Ge=Pe.$b(),Te=Pe.pb(),xe<Ge?xe=Ge:xe>Te&&(xe=Te),N(yt,E8(h,xe),6);case 6:We=yt.h,ve(We);case 5:fv(e,h,!0,!1,0);case 4:return e.C.ve(),Ue=e.wc().find(function(jt){return jt.active}),Ue||((gt=Rc(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&XE(e.s.h,gt,!0),h&&(gt?(h.audio&&T8(e,h.audio,gt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),dN(e)):e.da=!1),gt&&(e.h.streaming.alwaysStreamText||e.Ze())&&Wm(e.j,gt)),N(yt,e.j.start(r),7);case 7:e.h.abr.enabled&&(e.o.enable(),hN(e)),ns(e),fd(e),e.i.variants.some(function(jt){return jt.primary}),(Rt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Ht=function(){return uN(e)},e.m.D(u,"timeupdate",Ht)):Rt||(Ut=function(){return cv(e)},e.m.D(u,"timeupdate",Ut),cv(e)),e.A&&e.A.onManifestUpdated(Rt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(yt)}})}function s8(e,t){var n,r,u,c;return Oe(function(d){return d.g==1?(n=Ei,r=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){hd(e,h)},ee:function(){},onExpirationUpdated:function(){var h=ei("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Ca(t):"",codecs:t?Do(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(wi(c.video.mimeType,c.video.codecs)),e.B.ba=!0,N(d,Bm(e.B,[c],[]),2)):N(d,e.B.Vc(e.g),0)})}function u8(e,t,n){var r,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1)return ud(e,"src-equals"),r=e.g,e.C=new hR(r),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new sp({Md:function(){return r.playbackRate},Xb:function(){return r.defaultPlaybackRate},Df:function(ve){r.playbackRate=ve},og:function(ve){r.currentTime+=ve}}),c=e.h.streaming.rebufferingGoal,tN(e,r,c),d=function(){return lv(e)},h=function(){return sN(e)},e.m.D(r,"playing",d),e.m.D(r,"pause",d),e.m.D(r,"ended",d),e.m.D(r,"ratechange",h),r.preload!="none"&&e.m.na(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return ns(e)}),e.m.D(r.audioTracks,"removetrack",function(){return ns(e)}),e.m.D(r.audioTracks,"change",function(){return ns(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(ve){if(ve.track)switch(ve=ve.track,ve.kind){case"metadata":f8(e,ve);break;case"chapters":JR(e,ve);break;default:ns(e)}}),e.m.D(r.textTracks,"removetrack",function(){return ns(e)}),e.m.D(r.textTracks,"change",function(){return ns(e)})),r.src=$j(e.T,e.qa,n),(Ha()||ia())&&r.load(),r.preload!="none"&&!r.autoplay&&fm(n)&&Es()&&r.load(),e.l=pa,e.dispatchEvent(ei("streaming")),E=new Rr,td(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),td(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ve;return Oe(function(Pe){if(Pe.g==1)return l8(e),ve=vp(e),ve.find(function(xe){return xe.mode!="disabled"})?(0<ve.length&&(e.da=!0),Pe.u(2)):N(Pe,new Promise(function(xe){e.m.na(r.textTracks,"change",xe),new pr(xe).X(1)}),2);if(u)return Pe.return();c8(e),X(Pe)})}),r.error?E.reject(I_(e)):r.preload=="none"&&(He('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(r,"error",function(){E.reject(I_(e))}),N(Y,E,2);(A=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return uN(e)},e.m.D(r,"timeupdate",k)):A||(G=function(){return cv(e)},e.m.D(r,"timeupdate",G),cv(e)),e.A&&(e.A.onManifestUpdated(A),A&&(te=e.Ib().end,e.m.D(r,"progress",function(){var ve=e.Ib().end;te!=ve&&(e.A.onManifestUpdated(e.R()),te=ve)}))),e.Ia=!0,X(Y)})}function l8(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function c8(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function f8(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,QR(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var r=v8(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function XR(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,d=r;d&&c>d&&(d=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())QR(e,c,d,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function QR(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(ei("metadata",t))}function JR(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new Uc(e)};function eN(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?tv(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,d,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,d,h)},function(u,c,d){c=new Map().set("headers",u).set("request",c).set("requestType",d),n(ei("downloadheadersreceived",c)),r(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var A=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");A.set(G[0],GR(G[1]))}}catch(xe){}if(A=u["cmsd-dynamic"]){try{var te=new Map,Y=A.split(";");for(A=1;A<Y.length;A++){var ve=Y[A].split("=");te.set(ve[0],GR(ve[1]))}var Pe=te}catch(xe){Pe=null}Pe&&(h.g=Pe)}}}})},function(u,c,d,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",d).set("aborted",h),n(ei("downloadfailed",u))},function(u,c,d){r(function(){var h=e.T,E=d;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")sd(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var A="d";break e;case 3:case 2:A="h";break e;case 5:A="s";break e}A=void 0}h.m=A}sd(h,c,{ot:ZR,su:!h.i})}}catch(Mn){Tt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case $a:try{if(h.g.enabled){var k=E.segment;A=0,k&&(A=k.endTime-k.startTime);var G={d:1e3*A,st:h.h.R()?"l":"v"};G.ot=Qj(E);var te=G.ot===ov||G.ot===iv||G.ot===av||G.ot===sv,Y=E.stream;if(Y){var ve=h.h.eb();if(te&&(G.bl=Jj(h,Y.type),G.ot!==sv)){var Pe=jR(h,Y.type);G.dl=ve?Pe/Math.abs(ve):Pe}if(Y.bandwidth&&(G.br=Y.bandwidth/1e3),Y.segmentIndex&&k){var xe=Y.segmentIndex.xb(k.endTime,!0,0>ve);if(xe){var Ge=xe.next().value;if(Ge&&Ge!=k){if(!Zn(k.$(),Ge.$())){var Te=Ge.$()[0],We=c.uris[0],Ue=new URL(Te),gt=new URL(We);if(Ue.origin!==gt.origin)var Rt=Te;else{for(var Ht=Ue.pathname.split("/").slice(1),Ut=gt.pathname.split("/").slice(1,-1);Ht[0]===Ut[0];)Ht.shift(),Ut.shift();for(;Ut.length;)Ut.shift(),Ht.unshift("..");Rt=Ht.join("/")}G.nor=Rt}if((Ge.Aa||Ge.ja)&&(k.Aa!=Ge.Aa||k.ja!=Ge.ja)){var yt=Ge.Aa+"-";Ge.ja&&(yt+=Ge.ja),G.nrr=yt}}}var jt=h.h.eb()||1,ln=jR(h,Y.type)||500,gn=Y.bandwidth,Ln=gn?gn*(k.endTime-k.startTime)/1e3/(ln/jt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}te&&G.ot!==sv&&(G.tb=e8(h,G.ot)/1e3),sd(h,c,G)}}catch(Mn){Tt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:sd(h,c,{ot:"k"});break;case 4:sd(h,c,{ot:"o"})}})},function(u,c,d,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function d8(e,t){return new pR(e.g,e.i,e.h.streaming,t,function(){e.bb&&ER(e.bb,!0),e.j&&e.j.od(),e.L&&ld(e)},function(n){return e.dispatchEvent(n)})}function h8(e,t){t=new nv(e.mb,e.R()||0<t),t.addEventListener("enter",function(r){yp(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){yp(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(yp(e,"timelineregionenter",u),yp(e,"timelineregionexit",u))});var n=new yR(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function tN(e,t,n){e.L=new Hh,e.L.g=Ll,Kh(e.L,n,Math.min(.5,n/2)),w_(e),e.m.D(t,"waiting",function(){return ld(e)}),e.m.D(t,"stalled",function(){return ld(e)}),e.m.D(t,"canplaythrough",function(){return ld(e)}),e.m.D(t,"progress",function(){return ld(e)})}function ld(e){switch(e.l){case pa:if(e.g.ended)var t=!0;else{var n=kt(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Oo:e:if(e.g.ended||Gc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var r=kt(e.g.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?xc:Ll,n.g=r,(t=t!=r)&&r===xc&&(n.h=Date.now()),t&&w_(e)}function p8(e,t,n,r){return new Tu(e,t,n,r)}function g8(e){return new BR({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function m8(e){return new AR(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return hd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var r=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var d=Gs(e.F,c);!e.R()&&e.g.paused&&d!=null&&0<d&&e.C.Dd()<d&&e.C.we(d)}ld(e),r=new Map().set("start",r).set("end",u).set("contentType",c),e.dispatchEvent(ei("segmentappended",r)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&pj(e.lb,n,t)},Qf:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new km(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)r=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;jl(r,"cenc",u),r=r.l}}else r=Promise.resolve();return r},$h:function(t,n,r){XR(e,t,n,r)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Qm(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var r=qc(this.h,e,cd(this));return nN(this),r};function nN(e){if(e.Pd=new we(e.h,e.ba,e.B),e.I){var t=Wa(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=Ks&&ue(e.Pd,e.i)&&ns(e)}catch(c){hd(e,c)}e.o&&fd(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||dd(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.F,u=r.F;r.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),r.g&&(r.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(vr))&&nd(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),hN(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Kh(e.L,t,Math.min(.5,t/2))),e.i&&b_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=cd(this);return qc(e,this.h,cd(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];qc(this.h,cd(this),cd(this)),nN(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Ll:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?He("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Oo&&(this.o.playbackRateChanged(e),IR(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,r=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Wc():Math.floor(n)<=Math.floor(r.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==pa&&this.H.set(e),this.l==Oo&&(this.H.set(e),this.o.playbackRateChanged(e),IR(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,Bf(u)){var c=Ml(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(d){return Pl(d)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=Dl(r);u.active=r==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?vp(this).map(function(c){return Tm(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return zu(t)})},g.gh=function(e){var t=this,n,r,u,c;return Oe(function(d){return d.g==1?t.l!=Oo&&t.l!=pa?d.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?d.u(2):N(d,r.createSegmentIndex(),2):d.return(null)):d.g!=4?(u=[],r.segmentIndex.tc(function(h){var E=rN(h.tilesLayout||r.tilesLayout);if(E){E=E.rows*E.Sb;for(var A=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+A*k/E))}}),N(d,Promise.all(u),4)):(c=d.h,d.return(c.filter(function(h){return h})))})};function rN(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){return gt.g==1?n.l!=Oo&&n.l!=pa?gt.return(null):(r=n.$c,n.i&&(r=n.i.imageStreams),(u=r.find(function(Rt){return Rt.id==e}))?u.segmentIndex?gt.u(2):N(gt,u.createSegmentIndex(),2):gt.return(null)):(c=u.segmentIndex.find(t),c==null||(d=u.segmentIndex.get(c),h=rN(d.tilesLayout||u.tilesLayout),!h)?gt.return(null):(E=u.width||0,A=u.height||0,k=E/h.Sb,G=A/h.rows,te=h.Sb*h.rows,Y=d.i-d.startTime,ve=d.A||Y/te,Pe=d.startTime,Ge=xe=0,1<te&&(Te=Math.floor((t-d.startTime)/ve),Pe=d.startTime+Te*ve,xe=Te%h.Sb*k,Ge=Math.floor(Te/h.Sb)*G),We=!1,(Ue=d.s)&&(We=!0,G=Ue.height,xe=Ue.positionX,Ge=Ue.positionY,k=Ue.width),gt.return({segment:d,imageHeight:A,imageWidth:E,height:G,positionX:xe,positionY:Ge,startTime:Pe,duration:ve,uris:d.$(),width:k,sprite:We})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(XE(this.s.h,t,!1),Wm(this.j,t),dv(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=vp(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Cc(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";dv(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&He("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(u){return u.id==e.id});r&&Bf(r)&&(fv(this,r,!1,t,n),this.sa=new qh(r,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),fd(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,Cc(n)==e.id){cN(this,n);break}}},g.ih=function(){return gN(this.Hb())},g.Ah=function(){return gN(this.wc())},g.hh=function(){return Array.from(pN(this.Hb()))},g.zh=function(){return Array.from(pN(this.wc()))},g.wg=function(e,t,n,r){if(n=n===void 0?0:n,r=r===void 0?0:r,this.i&&this.C){this.sa=new Ol(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(d,h){return d.video||h.video?d.video&&h.video?Math.abs((d.video.height||0)-(h.video.height||0))+Math.abs((d.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=Ml(n),this.zf(e,!0,r)):dd(this)}else this.g&&this.g.audioTracks&&(r=Rc(this.Hb(),e,t||"",!1)[0])&&this.zf(r)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=Rc(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&(XE(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&(Wm(this.j,e),dv(this))):(e=Rc(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.sa=new Ol(r.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),dd(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&cN(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Oo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?vp(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?iN(this).map(function(e){return Tm(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=Cr(e),n=iN(this).filter(function(h){return Cr(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var d=c.value;(c=d.id)&&c!=""||(c=d.startTime+"-"+d.endTime+"-"+d.text),d={id:c,title:d.text,startTime:d.startTime,endTime:d.endTime},r.has(c)||(e.push(d),r.add(c))}}return e};function vp(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function v8(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function iN(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Oo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=Rc(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&(Wm(this.j,e[0]),dv(this))):yj(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=vp(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}dN(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Oo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==pa&&(e.total=mt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Oo&&this.l!=pa)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};lv(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=r,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Oo){if(n=this.j.j,t=this.j.s,n){r=this.H?this.H.h:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==pa&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.I,u=c.K;var d=c.H,h=c.N,E=c.L,A=c.A,k=c.i,G=c.m,te=c.F,Y=c.j,ve=$E(c.g,"playing"),Pe=$E(c.g,"paused"),xe=$E(c.g,"buffering"),Ge=c.s,Te=c.C,We=c.G,Ue=c.Ed,gt=lj(c.g),Rt=[];c=m(c.h.g);for(var Ht=c.next();!Ht.done;Ht=c.next())Ht=Ht.value,Rt.push({timestamp:Ht.timestamp,id:Ht.id,type:Ht.type,fromAdaptation:Ht.fromAdaptation,bandwidth:Ht.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:d,stallsDetected:h,gapsJumped:E,estimatedBandwidth:A,completionPercent:k,loadLatency:G,manifestTimeSeconds:te,drmTimeSeconds:Y,playTime:ve,pauseTime:Pe,bufferingTime:xe,licenseTime:Ge,liveLatency:Te,maxSegmentDuration:We,bytesDownloaded:Ue,stateHistory:gt,switchHistory:Rt}},g.Rg=function(e,t,n,r,u,c,d){d=d===void 0?!1:d;var h=this,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(h.l!=Oo&&h.l!=pa)throw new pt(1,7,7004);if(n!="subtitles"&&n!="captions"&&He("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Ue.u(2);break}return N(Ue,T_(h,e),3);case 3:r=Ue.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=pa){Ue.u(4);break}return d&&(n="forced"),N(Ue,oN(h,e,t,n,r,c||"",E),5);case 5:if(A=Cr(t),k=h.wc(),G=k.find(function(gt){return Cr(gt.language)==A&&gt.label==(c||"")&&gt.kind==n}))return ns(h),Ue.return(G);throw new pt(1,2,2012);case 4:if(te=Ei,Y=h.g.duration,h.i&&(Y=h.i.presentationTimeline.getDuration()),Y==1/0)throw new pt(1,4,4033);if(!E.length){Ue.u(6);break}return N(Ue,S_(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ve=Ue.h,Pe=aN(h,ve,r,E),xe=new Blob([Pe],{type:"text/vtt"}),e=Vm(xe),r="text/vtt";case 6:if(Ge={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:WE(0,Y,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:te.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!d,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([wi(r||"",u||"")])},Te=wi(Ge.mimeType,Ge.codecs),We=Rl(Te),!We)throw new pt(2,2,2014,r);return h.i.textStreams.push(Ge),ns(h),Ue.return(Dl(Ge))}})},g.Sg=function(e,t){var n=this,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:if(n.l!=Oo&&n.l!=pa)throw new pt(1,7,7004);if(t){We.u(2);break}return N(We,T_(n,e),3);case 3:t=We.h;case 2:if(t!="text/vtt")throw new pt(1,2,2017,e);if(r=Ei,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new pt(1,4,4045);return N(We,S_(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=We.h,d=ji[t],!d)throw new pt(2,2,2014,t);for(h=d(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=Qn(c),k=h.parseMedia(A,E,e),G=[],te={},Y=m(k),ve=Y.next();!ve.done;te={Rc:te.Rc,Nb:te.Nb},ve=Y.next())te.Nb=ve.value,te.Rc=null,Pe=function(Ue){return function(){return Ue.Rc==null&&(Ue.Rc=fo([e],[Ue.Nb.payload])),Ue.Rc||[]}}(te),xe=new Je(te.Nb.startTime,te.Nb.endTime,Pe,0,null,null,0,0,1/0),te.Nb.payload.includes("#xywh")&&(Ge=te.Nb.payload.split("#xywh=")[1].split(","),Ge.length===4&&xe.Eg({height:parseInt(Ge[3],10),positionX:parseInt(Ge[0],10),positionY:parseInt(Ge[1],10),width:parseInt(Ge[2],10)})),G.push(xe);return Te={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([wi(t||"","")])},n.l==pa?n.$c.push(Te):n.i.imageStreams.push(Te),ns(n),We.return(zu(Te))}})},g.Qg=function(e,t,n){var r=this,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(r.l!=Oo&&r.l!=pa)throw new pt(1,7,7004);if(n){E.u(2);break}return N(E,T_(r,e),3);case 3:n=E.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),N(E,oN(r,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,d=r.bg(),h=d.find(function(A){return A.language==t}),!h){E.u(5);break}return N(E,new Promise(function(A,k){r.m.na(c,"load",A),r.m.na(c,"error",function(){k(new pt(1,2,2015))})}),6);case 6:return ns(r),E.return(h);case 5:throw new pt(1,2,2012)}})};function T_(e,t){var n;return Oe(function(r){switch(r.g){case 1:return ce(r,2),N(r,d_(t,e.G,e.h.streaming.retryParameters),4);case 4:n=r.h,he(r,3);break;case 2:be(r);case 3:if(n)return r.return(n);throw new pt(1,2,2011,t)}})}function oN(e,t,n,r,u,c,d){var h,E,A,k;return Oe(function(G){if(G.g==1)return u!="text/vtt"||d.length?N(G,S_(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=aN(e,h,u,d),A=new Blob([E],{type:"text/vtt"}),t=Vm(A),u="text/vtt"),k=document.createElement("track");var te=e.T,Y=t;try{if(te.g.enabled){var ve=g_(te);ve.ot=v_,ve.su=!0;var Pe=rv(ve),xe=m_(Y,Pe)}else xe=Y}catch(Ge){Tt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ge),xe=Y}return k.src=xe,k.label=c,k.kind=r,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function S_(e,t,n,r){var u,c,d;return Oe(function(h){if(h.g==1){u=$a,c=Li([t],r),c.method="GET";var E=e.T;try{E.g.enabled&&sd(E,c,{ot:v_,su:!0})}catch(A){Tt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return N(h,n.request(u,c).promise,2)}return d=h.h,h.return(d.data)})}function aN(e,t,n,r){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),Wj(t,r);throw new pt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Oo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.gd||r.Qa||r.ub||(r.gd=!1,Ts(t,r,e));t=!0}}else t=!1;return t},g.Te=function(){return He("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function cd(e){var t=id();return t.streaming.failureCallback=function(n){if(e.R()){var r=null;n.code==1001||n.code==1002?r=1:n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.vf(r))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new ha(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new fa(e.g,"Shaka Player TextTrack"):new da},t}g.Hg=function(e){this.Rd=e};function y8(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),d=c.next();!d.done;d=c.next())if(d=d.value,!n.has(d)){var h=d.startsWith("CC")?"application/cea-608":"application/cea-708",E=new _i,A=u.closedCaptions.get(d);h={id:e.nf++,originalId:d,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:vr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([wi(h,"")])},t.textStreams.push(h),n.add(d)}}}function E8(e,t){var n,r,u,c,d;return Oe(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(E,A){var k,G,te;return Oe(function(Y){return Y.g==1?E?N(Y,E.createSegmentIndex(),2):Y.return(null):(G=(k=E.segmentIndex.xb(A))?k.next().value:null,G?(te=G.startTime,Y.return(te)):Y.return(null))})},N(h,u(n,t),2)):h.g!=3?(c=h.h,N(h,u(r,t),3)):(d=h.h,d!=null&&c!=null?h.return(Math.max(d,c)):d!=null?h.return(d):c!=null?h.return(c):h.return(t))})}function w_(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}lv(e)}t=new Map().set("buffering",t),e.dispatchEvent(ei("buffering",t))}function sN(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=ei("ratechange"),e.dispatchEvent(t))}function lv(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Ll?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(ei("statechanged",n)))}}function uN(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var r=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.sd(r):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,d=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,d=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,r=0,e.l==pa){var A=e.g.buffered;0<A.length&&(r=A.end(A.length-1),r=Math.max(d,r-u.end))}u=e.h.streaming.liveSyncPanicMode,A=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=A?t!=E&&e.sd(E):c&&d&&n-r>c?t!=d&&e.sd(d):h&&E&&n-r<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function cv(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var r;e.N==0?r=ei("started"):e.N==25?r=ei("firstquartile"):e.N==50?r=ei("midpoint"):e.N==75?r=ei("thirdquartile"):e.N==100&&(r=ei("complete")),r&&e.dispatchEvent(r)}}}function fd(e){try{se(e.Pd,e.i)}catch(n){return hd(e,n),!1}var t=jf(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function lN(e,t){return t=t===void 0?!1:t,fd(e)?e.o.chooseVariant(t):null}function _8(e){function t(d){var h="";return d.video&&(h+="video:"+d.video.id),d.audio&&(h=h+(h?"&":"")+("audio:"+d.audio.id)),h}for(var n=Date.now()/1e3,r=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,r=!0,""+t(c),void 0);e.i.variants.every(function(d){return d.disabledUntilTime===0})&&e.Td.stop(),r&&dd(e,!0,void 0,!1,!1)}function dd(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c=lN(e);c&&fv(e,c,u,t,n,r)}function fv(e,t,n,r,u,c){c=c===void 0?!1:c;var d=e.j.j;if(t==d)r&&bR(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),bR(e.j,t,r,u,c,n),r=null,d&&(r=Ml(d)),t=Ml(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&js(e.K,t,e.Ue()),n=ei("adaptation",n),pd(e,n)):fN(e,r,t)}}function cN(e,t){var n=Array.from(e.g.audioTracks).find(function(r){return r.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Pl(n),t=Pl(t),fN(e,n,t)}function T8(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var r=Cr(e.h.preferredTextLanguage);return n=Cr(n.language),e.h.autoShowText==2?Gu(n,r):e.h.autoShowText==3?(e=Cr(t.language),Gu(n,r)&&!Gu(e,n)):(He("Invalid autoShowText setting!"),!1)}function ns(e){var t=ei("trackschanged");pd(e,t)}function fN(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&js(e.K,n,e.Ue()),n=ei("variantchanged",t),pd(e,n)}function dv(e){var t=ei("textchanged");pd(e,t)}function dN(e){var t=ei("texttrackvisibility");pd(e,t)}function hN(e){e.h.abr.enabled||A_(e);var t=new Map().set("newStatus",e.h.abr.enabled);pd(e,ei("abrstatuschanged",t))}function A_(e,t){if(t=t===void 0?!0:t,e.l==Oo){e.Td.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&fd(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===Ks||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var u=r[e.type];u&&u.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,d){return c+d.end-d.start},0),dd(this,!0,t,!0,!1),!0}return!1};function hd(e,t){var n,r,u;return Oe(function(c){switch(c.g){case 1:if(e.l==Ks)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return ce(c,3),N(c,Mj(e.j),5);case 5:r=c.h,n=!r,he(c,2);break;case 3:be(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&A_(e,!1),u=ei("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),X(c)}})}function yp(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(ei(t,e))}function I_(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pt(2,3,3016,t,n,e.g.error.message)}function b_(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function pd(e,t){Oe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);e.l!=Ks&&e.dispatchEvent(t),X(n)})}function pN(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Cr(n.language)):t.add("und");return t}function gN(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Cr(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var d=c.next();!d.done;d=c.next())d=d.value,t.get(u).add(d),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(d,r.label))}var h=[];return t.forEach(function(E,A){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(A)&&n.get(A).has(k)&&(G=n.get(A).get(k)),h.push({language:A,role:k,label:G})}}),h}re("shaka.Player",dn),dn.prototype.setVideoContainer=dn.prototype.Hg,dn.prototype.getManifestParserFactory=dn.prototype.rh,dn.prototype.getManifest=dn.prototype.Te,dn.prototype.retryStreaming=dn.prototype.vf,dn.prototype.setMaxHardwareResolution=dn.prototype.xi,dn.prototype.addChaptersTrack=dn.prototype.Qg,dn.prototype.addThumbnailsTrack=dn.prototype.Sg,dn.prototype.addTextTrackAsync=dn.prototype.Rg,dn.prototype.getStats=dn.prototype.getStats,dn.prototype.getBufferedInfo=dn.prototype.ob,dn.prototype.getSegmentAvailabilityDuration=dn.prototype.Nd,dn.prototype.getPresentationStartTimeAsDate=dn.prototype.eg,dn.prototype.getPlayheadTimeAsDate=dn.prototype.vh,dn.prototype.setTextTrackVisibility=dn.prototype.Dg,dn.prototype.getChapters=dn.prototype.jh,dn.prototype.getChaptersTracks=dn.prototype.bg,dn.prototype.isTextTrackVisible=dn.prototype.Ze,dn.prototype.selectVariantsByLabel=dn.prototype.si,dn.prototype.selectTextLanguage=dn.prototype.yf,dn.prototype.selectAudioLanguage=dn.prototype.wg,dn.prototype.getTextLanguages=dn.prototype.zh,dn.prototype.getAudioLanguages=dn.prototype.hh,dn.prototype.getTextLanguagesAndRoles=dn.prototype.Ah,dn.prototype.getAudioLanguagesAndRoles=dn.prototype.ih,dn.prototype.selectVariantTrack=dn.prototype.zf,dn.prototype.selectTextTrack=dn.prototype.xg,dn.prototype.getThumbnails=dn.prototype.fg,dn.prototype.getAllThumbnails=dn.prototype.gh,dn.prototype.getImageTracks=dn.prototype.oh,dn.prototype.getTextTracks=dn.prototype.wc,dn.prototype.getVariantTracks=dn.prototype.Hb,dn.prototype.cancelTrickPlay=dn.prototype.Wc,dn.prototype.trickPlay=dn.prototype.sd,dn.prototype.getPlaybackRate=dn.prototype.eb,dn.prototype.isBuffering=dn.prototype.Xe,dn.prototype.getKeyStatuses=dn.prototype.Kd,dn.prototype.getActiveSessionsMetadata=dn.prototype.Se,dn.prototype.getExpiration=dn.prototype.cd,dn.prototype.drmInfo=dn.prototype.drmInfo,dn.prototype.keySystem=dn.prototype.keySystem,dn.prototype.goToLive=dn.prototype.Hh,dn.prototype.seekRange=dn.prototype.Ib,dn.prototype.isAudioOnly=dn.prototype.Kh,dn.prototype.isInProgress=dn.prototype.dc,dn.prototype.isLive=dn.prototype.R,dn.prototype.getAdManager=dn.prototype.$f,dn.prototype.getAssetUri=dn.prototype.ad,dn.prototype.getNetworkingEngine=dn.prototype.Zb,dn.prototype.getMediaElement=dn.prototype.th,dn.prototype.getManifestType=dn.prototype.Ue,dn.prototype.getLoadMode=dn.prototype.qh,dn.prototype.resetConfiguration=dn.prototype.li,dn.prototype.getBufferFullness=dn.prototype.ag,dn.prototype.getConfiguration=dn.prototype.getConfiguration,dn.prototype.configure=dn.prototype.configure,dn.prototype.releaseAllMutexes=dn.prototype.hi,dn.prototype.preload=dn.prototype.preload,dn.prototype.unloadAndSavePreload=dn.prototype.Ai,dn.prototype.load=dn.prototype.load,dn.prototype.updateStartTime=dn.prototype.Ei,dn.prototype.unload=dn.prototype.lc,dn.prototype.detach=dn.prototype.detach,dn.prototype.attachCanvas=dn.prototype.Wg,dn.prototype.attach=dn.prototype.Vc,dn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,d;return Oe(function(h){if(h.g==1)return t={},e?N(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(Io())for(var A in ke)E[A]=!0;A=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=A.next();!k.done;k=A.next())k=k.value,E[k]=Io()?!!ke[k]:cu(k);for(n=E,A='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(pu)),E={},A=m(A),k=A.next();!k.done;k=A.next()){k=k.value,E[k]=Io()?Rl(k)?!0:Ot(k)||!!io(k):cu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}r=E,u={manifest:n,media:r,drm:t},c=R_;for(d in c)u[d]=c[d]();return h.return(u)})},dn.isBrowserSupported=function(){if(p.Promise||He("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Wr("Trident/"))return!1;var e=Es();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:Io()?!0:cu("application/x-mpegurl")},dn.setAdManagerFactory=function(e){hv=e},dn.registerSupportPlugin=function(e,t){R_[e]=t},dn.prototype.destroy=dn.prototype.destroy;var Ks=0,C_=1,Oo=2,pa=3;dn.LoadMode={DESTROYED:Ks,NOT_LOADED:C_,MEDIA_SOURCE:Oo,SRC_EQUALS:pa},dn.version="v4.8.2";var mN=["4","8"];Or=new function(e){this.g=e,this.i=ti,this.h=eo}(new Pr(Number(mN[0]),Number(mN[1])));var R_={},hv=null;function vN(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Et,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},re("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function pv(e,t,n,r,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new Et,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){S8(c,d)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(d){yN(c,d)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}pv.prototype.configure=function(e){this.s=e},pv.prototype.stop=function(){this.g&&this.g.stop(),this.o&&mp(this.o)},pv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function yN(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),mv(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function S8(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}w8(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,gv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){mv(e,null)}}function gv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function w8(e){function t(n,r){n=new Map().set("originalEvent",n),e.m(new Wn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){yN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){EN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){EN(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){mv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){mv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function EN(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):He("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function mv(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,r,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=r}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},re("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function Ep(e,t,n,r){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new Et}Ep.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);gd(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},Ep.prototype.release=function(){this.stop(),this.o&&this.o.release()},Ep.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(I8(this,this.G,this.T),this.T=!1)},Ep.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function A8(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y;Oe(function(ve){if(ve.g==1)return r=Li([t],sa()),r.method="POST",n&&(u=JSON.stringify(n),r.body=za(u)),c=e.K.request(7,r),ce(ve,2),N(ve,c.promise,4);if(ve.g!=2){if(d=ve.h,h=Vr(d.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)A=new ui(t),k=new ui(E.trackingUrl),e.G=A.resolve(k).toString(),G=Date.now()/1e3,te=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",te))),Y=new ui(E.manifestUrl),e.l.resolve(A.resolve(Y).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return he(ve,0)}if(be(ve),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ve.return();e.l.resolve(e.H),e.l=null,X(ve)})}function I8(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge;Oe(function(Te){if(Te.g==1)return r=Li([t],sa()),u=e.K.request(7,r),ce(Te,2),N(Te,u.promise,4);if(Te.g!=2){if(c=Te.h,d=[],h=Vr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,A=m(e.j),k=A.next();!k.done;k=A.next())for(G=k.value,te=m(G.nonLinearAdsList),Y=te.next();!Y.done;Y=te.next())for(ve=Y.value,Pe=m(ve.nonLinearAdList),xe=Pe.next();!xe.done;xe=Pe.next())Ge=xe.value,b8(e,Ge);d=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d))),gd(e),e.j=[];return n&&(e.I||0<d.length)&&C8(e),he(Te,0)}be(Te),X(Te)})}function b8(e,t){var n,r,u,c,d,h,E;Oe(function(A){if(A.g==1)return!t.staticResource||(n=_N(t),e.F.get(n))?A.return():(r=Li([t.staticResource],sa()),u=e.K.request(7,r),ce(A,2),e.F.set(n,[]),N(A,u.promise,4));if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),E=h.apps,e.F.set(n,E),he(A,0);be(A),e.F.delete(n),X(A)})}function _N(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function C8(e){SN(e),e.I||(TN(e),e.o.D(e.g,"seeked",function(){TN(e)}),e.o.D(e.g,"ended",function(){gd(e)})),e.o.D(e.g,"timeupdate",function(){SN(e)})}function TN(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var d=m(c.ads),h=d.next();!h.done;h=d.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function SN(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),ga(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),ga(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),ga(e,"thirdQuartile")),r=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=r||r>u)&&gd(e)}if(!e.h||!e.h.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var d=u.ads[c],h=d.startTimeInSeconds+d.durationInSeconds;if(d.startTimeInSeconds<=t&&h>t){if(e.N.includes(d.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}gd(e),e.L=u,e.h=new or(d,c+1,u.ads.length,!0,e.g),e.C=d,c===0&&ga(e,"breakStart"),wN(e);break}}if(!e.h){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.h);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(d=u.nonLinearAdsList[c],d.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(_N(d.nonLinearAdList[0]));if(h<=t&&E&&E.length){gd(e),h=e,E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.data.source.length){var k=document.createElement("img");k.src=A.data.source[0].url,k.style.top=(A.placeholder.top||0)+"%",k.style.height=100-(A.placeholder.top||0)+"%",k.style.left=(A.placeholder.left||0)+"%",k.style.maxWidth=100-(A.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(d,c+1,u.ads.length,!1,e.g),e.C=d,c===0&&ga(e,"breakStart"),wN(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function gd(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),ga(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&ga(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function wN(e){var t=!1;e.g.paused?t=!0:(ga(e,"impression"),ga(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&ga(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||ga(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(ga(e,"impression"),ga(e,"start"),t=!1):ga(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){ga(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function ga(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Li([r],sa()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},re("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function AN(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Et,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){R8(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var d=c.getStreamData();c=[],d=m(d.cuepoints);for(var h=d.next();!h.done;h=d.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=AN.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function R8(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function $n(){Sr.call(this),this.g=this.h=this.i=null,this.j=new vN,this.m=navigator.language,this.l=null}z($n,Sr),g=$n.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var r=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new pt(2,10,1e4);this.i&&this.i.release(),this.i=new pv(e,t,this.m,n,function(u){return N_(r,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new vN},g.requestClientSideAds=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new Ep(e,t,n,function(u){return N_(r,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new pt(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new pt(1,10,10004)):(r.l=new Rr,A8(r,e,t),r.H=n||"",r.Y=Date.now()/1e3,e=r.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new pt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new pt(2,10,10002);this.g&&this.g.release(),this.g=new AN(e,t,this.m,function(r){return N_(n,r)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new pt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new pt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new pt(1,10,10003);(e.mpt||e.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function N_(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}re("shaka.ads.AdManager",$n),$n.prototype.onCueMetadataChange=$n.prototype.onCueMetadataChange,$n.prototype.onHlsTimedMetadata=$n.prototype.onHlsTimedMetadata,$n.prototype.onDashTimedMetadata=$n.prototype.onDashTimedMetadata,$n.prototype.onManifestUpdated=$n.prototype.onManifestUpdated,$n.prototype.getStats=$n.prototype.getStats,$n.prototype.getCuePoints=$n.prototype.getCuePoints,$n.prototype.getServerSideCuePoints=$n.prototype.getServerSideCuePoints,$n.prototype.replaceServerSideAdTagParameters=$n.prototype.replaceServerSideAdTagParameters,$n.prototype.requestServerSideStream=$n.prototype.requestServerSideStream,$n.prototype.initServerSide=$n.prototype.initServerSide,$n.prototype.addMediaTailorTrackingUrl=$n.prototype.addMediaTailorTrackingUrl,$n.prototype.requestMediaTailorStream=$n.prototype.requestMediaTailorStream,$n.prototype.initMediaTailor=$n.prototype.initMediaTailor,$n.prototype.updateClientSideAdsRenderingSettings=$n.prototype.updateClientSideAdsRenderingSettings,$n.prototype.requestClientSideAds=$n.prototype.requestClientSideAds,$n.prototype.onAssetUnload=$n.prototype.onAssetUnload,$n.prototype.release=$n.prototype.release,$n.prototype.initClientSide=$n.prototype.initClientSide,$n.prototype.configure=$n.prototype.configure,$n.prototype.setLocale=$n.prototype.setLocale,$n.ADS_LOADED="ads-loaded",$n.AD_STARTED="ad-started",$n.AD_FIRST_QUARTILE="ad-first-quartile",$n.AD_MIDPOINT="ad-midpoint",$n.AD_THIRD_QUARTILE="ad-third-quartile",$n.AD_COMPLETE="ad-complete",$n.AD_STOPPED="ad-stopped",$n.AD_SKIPPED="ad-skipped",$n.AD_VOLUME_CHANGED="ad-volume-changed",$n.AD_MUTED="ad-muted",$n.AD_PAUSED="ad-paused",$n.AD_RESUMED="ad-resumed",$n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$n.CUEPOINTS_CHANGED="ad-cue-points-changed",$n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$n.AD_CLICKED="ad-clicked",$n.AD_PROGRESS="ad-progress",$n.AD_BUFFERING="ad-buffering",$n.AD_IMPRESSION="ad-impression",$n.AD_DURATION_CHANGED="ad-duration-changed",$n.AD_CLOSED="ad-closed",$n.AD_LOADED="ad-loaded",$n.ALL_ADS_COMPLETED="all-ads-completed",$n.AD_LINEAR_CHANGED="ad-linear-changed",$n.AD_METADATA="ad-metadata",$n.AD_RECOVERABLE_ERROR="ad-recoverable-error",$n.AD_ERROR="ad-error",$n.AD_BREAK_READY="ad-break-ready",$n.AD_INTERACTION="ad-interaction",hv=function(){return new $n};function IN(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(t=m(Object.getOwnPropertyNames(n)),r=t.next();!r.done;r=t.next())u.add(r.value);for(t={},u=m(u),r=u.next();!r.done;r=u.next())r=r.value,t[r]=n[r];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(mt(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function x_(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=N8(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function N8(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var bN="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),x8="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),M_=["loop","playbackRate"],M8=["pause","play"],vv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},yv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},D_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},CN=[["getConfiguration","configure"]],RN=[["isTextTrackVisible","setTextTrackVisibility"]],D8="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),P8=["attach","attachCanvas","detach","load","unload"];function P_(e,t,n,r,u,c,d){var h=this;this.G=e,this.K=d,this.l=new pr(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return O_(h)},this.C=function(E,A){switch(E=x_(A),E.type){case"event":var k=E.targetName,G=xm(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var te in k[G])E[te]=k[G][te]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,te=E.error,E=h.i[G],delete h.i[G],E)if(te){G=new pt(te.severity,te.category,te.code);for(k in te)G[k]=te[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Tp.add(this)}g=P_.prototype,g.destroy=function(){return Tp.delete(this),L_(this),Ss&&xN(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(Tp),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Rr,r.s=!0,Ev(r,u)}},function(t){for(var n=m(Tp),r=n.next();!r.done;r=n.next())r=r.value,_v=t=="available",r.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),_v&&this.l.X(L8),(e=Ss)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,Ev(this,e)):Ss=null}else p.__onGCastApiAvailable!==MN&&(Tv=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=MN)},g.Af=function(e){this.o=e,this.h&&_p(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return Oe(function(t){if(!e.m)throw new pt(1,8,8e3);if(!_v)throw new pt(1,8,8001);if(e.h)throw new pt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return Ev(e,n)},function(n){return NN(e,n)}),N(t,e.j,0)})};function O8(e){e.h&&chrome.cast.requestSession(function(t){return Ev(e,t)},function(t){return NN(e,t)})}g.uc=function(){if(this.h){if(L_(this),Ss){xN(this);try{Ss.stop(function(){},function(){})}catch(e){}Ss=null}O_(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(M8.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))}}else if(e=="player"){if(D_[t]&&!this.get("player","isLive")())return function(){};if(D8.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(P8.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(vv[t]||yv[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,_p(this,{type:"set",targetName:e,property:t,value:n})};function Ev(e,t){var n=e.N();Ss=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),O_(e),_p(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function NN(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new pt(2,8,n,t))}g.ug=function(e,t){_p(this,{type:"call",targetName:e,methodName:t,args:Qe.apply(2,arguments)})},g.ii=function(e,t){var n=Qe.apply(2,arguments),r=new Rr,u=this.H.toString();this.H++,this.i[u]=r;try{_p(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function xN(e){var t=Ss;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function O_(e){var t=Ss?Ss.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};L_(e)}e.h=t,e.I=t?Ss.receiver.friendlyName:"",e.l.kc()}function L_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new pt(1,7,7e3))}}function _p(e,t){t=IN(t);var n=Ss;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},ot)}catch(r){throw t=new pt(2,8,8005,r),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var L8=.02,_v=!1,Ss=null,Tv=null,Tp=new Set;function MN(e){if(Tv?p.__onGCastApiAvailable=Tv:delete p.__onGCastApiAvailable,Tv=null,e)for(var t=m(Tp),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function Ni(e,t,n,r){r=r===void 0?!1:r,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new P_(n,function(){return ON(u)},function(){return LN(u)},function(c,d){return FN(u,c,d)},function(){return kN(u)},function(){return PN(u)},r),k8(this)}z(Ni,Sr),g=Ni.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&_v},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return Oe(function(t){return t.g==1?N(t,e.g.cast(),2):e.h?N(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){O8(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return Oe(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.uc(),N(r,n.g.destroy(),2));n.g=null,n.g=new P_(e,function(){return ON(n)},function(){return LN(n)},function(u,c){return FN(n,u,c)},function(){return kN(n)},function(){return PN(n)},t),n.g.init(),X(r)})};function k8(e){e.g.init(),e.m=new Et;for(var t=m(bN),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=xm(c),e.j.dispatchEvent(c))});for(var r in Mc)e.m.D(e.h,Mc[r],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return U8(e,c.Kc)}}(t),set:function(c){return function(d){var h=c.Kc;e.g.Ua()?e.g.set("video",h,d):e.i[h]=d}}(t)}),t={Kc:t.Kc};e.s={},DN(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return B8(e,c)}})}),F8(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function F8(e){var t=new Map;DN(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function DN(e,t){function n(E){return E=="constructor"||typeof r[E]!="function"?!1:!u.has(E)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var d=m(Object.getOwnPropertyNames(e)),h=d.next();!h.done;h=d.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function PN(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(M_),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(CN),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(RN),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function ON(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function LN(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function kN(e){for(var t=m(CN),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var d;(r=e.g.get("player","getTextTracks")())&&r.length&&(d=r.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(M_),r=n.next();!r.done;r=n.next())r=r.value,E[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var A=m(M_),k=A.next();!k.done;k=A.next())k=k.value,e.i[k]=E[k];for(A=m(RN),k=A.next();!k.done;k=A.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),d&&e.h.yf(d.language,d.roles,d.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new Wn("error",A),e.h.dispatchEvent(A)})}function U8(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function B8(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return He(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return He(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(vv[t]||yv[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function FN(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}re("shaka.cast.CastProxy",Ni),Ni.prototype.changeReceiverId=Ni.prototype.Yg,Ni.prototype.forceDisconnect=Ni.prototype.uc,Ni.prototype.suggestDisconnect=Ni.prototype.zi,Ni.prototype.setAppData=Ni.prototype.Af,Ni.prototype.cast=Ni.prototype.cast,Ni.prototype.receiverName=Ni.prototype.tf,Ni.prototype.isCasting=Ni.prototype.Ua,Ni.prototype.canCast=Ni.prototype.Xg,Ni.prototype.getPlayer=Ni.prototype.uh,Ni.prototype.getVideo=Ni.prototype.Fh,Ni.prototype.destroy=Ni.prototype.destroy;function vo(e,t,n,r){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new Et,this.H={video:e,player:t},this.C=n||function(){},this.I=r||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){k_(u)}),j8(this)}z(vo,Sr),g=vo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return Oe(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),N(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function j8(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return UN(e)},t.onSenderDisconnected=function(){return UN(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&al(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),al(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return q8(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return G8(e,u)},t.start(),t=m(bN);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return BN(e,"video",u)});for(var r in Mc)e.j.D(e.h,Mc[r],function(u){return BN(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,md(e)}),e.j.D(e.g,"playing",function(){e.o=!1,md(e)}),e.j.D(e.g,"pause",function(){md(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,md(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,md(e))}).X(K8)})}function UN(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,md(e)}function md(e){var t;Oe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),jN(e)||sl(e),X(n)})}function Z8(e,t,n){var r,u,c,d,h,E,A,k,G,te;Oe(function(Y){switch(Y.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(Y,5),N(Y,e.h.load(t.manifest,t.startTime),7)):N(Y,Promise.resolve(),3);case 7:he(Y,3);break;case 5:return d=be(Y),h=new Map().set("detail",d),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),Y.return();case 3:if(!e.h)return Y.return();for(A in t.video)k=t.video[A],e.g[A]=k;for(G in t.playerAfterLoad)te=t.playerAfterLoad[G],e.h[G](te);e.g.autoplay=c,t.manifest&&(e.g.play(),sl(e)),X(Y)}})}function BN(e,t,n){e.h&&(k_(e),al(e,{type:"event",targetName:t,event:n},e.l))}function k_(e){e.G.X(H8);for(var t={video:{},player:{}},n=m(x8),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.R())for(var u in D_)e.m%D_[u]==0&&(t.player[u]=e.h[u]());for(var c in vv)e.m%vv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),al(e,{type:"update",update:t},e.l);for(var d in yv)e.m%yv[d]==0&&(t={player:{}},t.player[d]=e.h[d](),al(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),jN(e)}function jN(e){return e.A&&(e.g.duration||e.h.R())?(F_(e),e.A=!1,!0):!1}function F_(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),sl(e,t===void 0?0:t,n)}function G8(e,t){var n=x_(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,Z8(e,n.initState,n.appData),k_(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,d=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return ZN(e,d,c,null)},function(h){return ZN(e,d,c,h)})}}function q8(e,t){var n=x_(t.data);switch(n.type){case"PLAY":e.g.play(),sl(e);break;case"PAUSE":e.g.pause(),sl(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),sl(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),sl(e));break;case"STOP":e.h.lc().then(function(){e.h&&sl(e)});break;case"GET_STATUS":F_(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||sl(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&F_(e)}).catch(function(d){var h="LOAD_FAILED";d.category==7&&d.code==7e3&&(h="LOAD_CANCELLED"),al(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:al(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function ZN(e,t,n,r){e.h&&al(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function al(e,t,n,r){e.F&&(e=IN(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function sl(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?V8:e.h.Xe()?Y8:e.g.paused?W8:z8,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),al(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}re("shaka.cast.CastReceiver",vo),vo.prototype.destroy=vo.prototype.destroy,vo.prototype.setContentArtist=vo.prototype.ti,vo.prototype.setContentImage=vo.prototype.ui,vo.prototype.setContentTitle=vo.prototype.wi,vo.prototype.clearContentMetadata=vo.prototype.bh,vo.prototype.setContentMetadata=vo.prototype.vi,vo.prototype.isIdle=vo.prototype.Lh,vo.prototype.isConnected=vo.prototype.isConnected;var H8=.5,K8=5,V8="IDLE",z8="PLAYING",Y8="BUFFERING",W8="PAUSED";function GN(e,t,n,r,u){if(r>=u)return null;for(var c=-1,d=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){d=h;break}if(c===-1||d===-1)return null;for(var E=h=!1,A="white",k="black",G=U_(r,u,h,E,A,k);c<=d;c++){for(var te=n[c],Y=-1,ve=-1,Pe=0;Pe<te.length;Pe++)if(te[Pe]!=null&&te[Pe].g.trim()!==""){Y=Pe;break}for(Pe=te.length-1;0<=Pe;Pe--)if(te[Pe]!=null&&te[Pe].g.trim()!==""){ve=Pe;break}if(Y===-1||ve===-1)te=qN(r,u),e.nestedCues.push(te);else{for(;Y<=ve;Y++)if(Pe=te[Y]){var xe=Pe.l,Ge=Pe.i,Te=Pe.j,We=Pe.h;(xe!=h||Ge!=E||Te!=A||We!=k)&&(G.payload&&e.nestedCues.push(G),G=U_(r,u,xe,Ge,Te,We),h=xe,E=Ge,A=Te,k=We),G.payload+=Pe.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==d&&(G=qN(r,u),e.nestedCues.push(G)),G=U_(r,u,h,E,A,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function U_(e,t,n,r,u,c){return e=new Cn(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function qN(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}function HN(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function B_(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Sp(this)}function Sv(e,t,n){var r="CC"+((e.A<<1|e.s)+1),u=new Cn(t,n,"");u.lineInterpretation=1;var c=J8.get(e.g);return c&&(u.line=c),GN(u,r,e.i,t,n)}function Sp(e){ul(e,0,15),e.g=1}function vd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case wp:r=WN.has(n)?WN.get(n):String.fromCharCode(n);break;case VN:r=$8.get(n);break;case zN:e.i[e.g].pop(),r=X8.get(n);break;case YN:e.i[e.g].pop(),r=Q8.get(n)}r&&e.i[e.g].push(new HN(r,e.m,e.j,e.o,e.l))}}function KN(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function ul(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var wp=0,VN=1,zN=2,YN=3,WN=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),$8=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),X8=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),Q8=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),J8=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function wv(e,t){this.h=QN,this.o=new B_(e,t),this.i=new B_(e,t),this.g=this.j=new B_(e,t),this.l=0,this.m=null}function j_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==Av&&e.h!==Ap&&(u=Sv(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,ul(n,0,15),n=e.j,n.g=0<n.h?n.h:0,ul(n,0,15),r.g=15),e.h=Av,r.h=t,u}function $N(e){e.h=e6,e.g=e.j,e.g.h=0}function XN(e){Tt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Ap}var QN=0,e6=1,Av=3,Ap=4,t6="black green blue cyan red yellow magenta black".split(" "),JN="white green blue cyan red yellow magenta white_italics".split(" ");function ex(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=i6,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",Z_(this)}function Z_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(G_())}function G_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Kc(e,t){tx(e)&&(e.i[e.h][e.g]=new HN(t,e.C,e.A,e.s,e.B),e.g++)}function tx(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}ex.prototype.isVisible=function(){return this.l};function Vc(e,t,n){var r=new Cn(e.j,t,"");r.textAlign=e.F===n6?"left":e.F===r6?"right":kn;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case o6:u.regionAnchorX=0,u.regionAnchorY=0;break;case a6:u.regionAnchorX=50,u.regionAnchorY=0;break;case s6:u.regionAnchorX=100,u.regionAnchorY=0;break;case u6:u.regionAnchorX=0,u.regionAnchorY=50;break;case l6:u.regionAnchorX=50,u.regionAnchorY=50;break;case c6:u.regionAnchorX=100,u.regionAnchorY=50;break;case f6:u.regionAnchorX=0,u.regionAnchorY=100;break;case d6:u.regionAnchorX=50,u.regionAnchorY=100;break;case h6:u.regionAnchorX=100,u.regionAnchorY=100}return(n=GN(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var n6=0,r6=1,i6=2,o6=0,a6=1,s6=2,u6=3,l6=4,c6=5,f6=6,d6=7,h6=8;function p6(){this.i=[],this.h=null,this.g=0}function g6(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Iv(e.h)),e.h=null,e.g=0))}function Iv(e){this.g=0,this.h=e}Iv.prototype.ka=function(){return this.g<this.h.length},Iv.prototype.wa=function(){return this.g};function ao(e){if(!e.ka())throw new pt(2,2,3e3);return e.h[e.g++]}Iv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new pt(2,2,3e3);this.g+=e};function m6(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function v6(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=ao(t).value,t=null,n=m(Ip(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Vc(u,r,e.i)),Z_(u);return t}if(n===137)for(t=ao(t).value,t=m(Ip(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=ao(t).value,t=null,n=m(Ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Vc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=ao(t).value,t=null,n=m(Ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Vc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=ao(t).value,nx(e,t,r);if(n===143)return r=nx(e,255,r),rx(e),r;if(n===144)t.skip(1),r=ao(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=ao(t).value,n=ao(t).value,t.skip(1),e.g&&(t=ix((n&48)>>4,(n&12)>>2,n&3),e.g.B=ix((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=ao(t).value,t=ao(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=ao(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new ex(n,e.i);c.j=r,e.h[n]=c}r=ao(t).value,c=ao(t).value;var d=ao(t).value,h=ao(t).value,E=ao(t).value;t=ao(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=d,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function Ip(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function nx(e,t,n){var r=null;t=m(Ip(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=Vc(c,n,e.i)),e.h[u]=null}return r}function rx(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function ix(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],y6[e<<2|t<<1|n]}var ox=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),y6="black blue green cyan red magenta yellow white".split(" ");function yd(){this.h=[],this.g=[],this.i=new p6,this.l=0,this.m=new Map([["CC1",new wv(0,0)],["CC2",new wv(0,1)],["CC3",new wv(1,0)],["CC4",new wv(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,q_(this)}yd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,q_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())rx(t.value)};function q_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=QN,n.g=n.j,n.m=null,Sp(n.i),Sp(n.j),Sp(n.o);e.B=!0}yd.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.P(),c=(u&4)>>2,d=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:d,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:d,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},yd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=E6(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())g6(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=_6(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function E6(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!ax(t.cb)||!ax(t.vb))return 45<=++e.l&&q_(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(r),e=null,(t.cb&112)===16)e:{if(r=t.cb,e=t.vb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white";var c=!1;7>u?r=JN[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==Ap&&(u=n.g,n.h===Av&&t!==u.g&&(n=1+t-u.h,KN(u,n,1+u.g-u.h,u.h),ul(u,0,n-1),ul(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",vd(n.g,wp,32),r=!1,t=JN[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=t6[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)vd(n.g,VN,e);else if((r&246)===18&&(e&224)===32)vd(n.g,r&1?YN:zN,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.vb){case 32:$N(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=j_(n,2,e);break;case 38:r=j_(n,3,e);break;case 39:r=j_(n,4,e);break;case 40:vd(n.g,wp,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Sp(n.o),XN(n);break;case 43:XN(n);break;case 44:t=n.i,r=null,n.h!==Ap&&(r=Sv(t,n.l,e)),ul(t,0,15);break;case 45:t=n.g,n.h!==Av?r=null:(r=Sv(t,n.l,e),c=t.g-t.h+1,KN(t,c-1,c,t.h),ul(t,0,c-1),ul(t,t.g,15-t.g),n.l=e);break;case 46:ul(n.j,0,15);break;case 47:t=null,n.h!==Ap&&(t=Sv(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,$N(n),n.l=e,r=t}e=r;break e}e=null}else r=t.vb,vd(n.g,wp,t.cb),vd(n.g,wp,r);return e}function _6(e,t){var n=[];try{for(;t.ka();){var r=ao(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=ao(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new m6(u));for(var d=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=ao(u),A=E.value,k=E.pts;if(A===16){var G=ao(u);A=A<<16|G.value}if(0<=A&&31>=A){var te=k;if(d.g){var Y=d.g;switch(u=null,A){case 8:!tx(Y)||0>=Y.g&&0>=Y.h||(0>=Y.g?(Y.g=Y.m-1,Y.h--):Y.g--,Y.i[Y.h][Y.g]=null);break;case 13:if(Y.isVisible()&&(u=Vc(Y,te,d.i)),Y.h+1>=Y.o){te=Y;for(var ve=0,Pe=1;16>Pe;Pe++,ve++)te.i[ve]=te.i[Pe];for(Pe=0;1>Pe;Pe++,ve++)te.i[ve]=G_()}else Y.h++;Y.g=0;break;case 14:Y.isVisible()&&(u=Vc(Y,te,d.i)),Y.i[Y.h]=G_(),Y.g=0;break;case 12:Y.isVisible()&&(u=Vc(Y,te,d.i)),Z_(Y),te=Y,te.h=0,te.g=0}var xe=u}else xe=null}else if(128<=A&&159>=A)xe=v6(d,u,A,k);else{if(4096<=A&&4127>=A)te=A&255,8<=te&&15>=te?u.skip(1):16<=te&&23>=te?u.skip(2):24<=te&&31>=te&&u.skip(3);else if(4224<=A&&4255>=A)te=A&255,128<=te&&135>=te?u.skip(4):136<=te&&143>=te&&u.skip(5);else if(32<=A&&127>=A)u=A,d.g&&(u===127?Kc(d.g,"♪"):Kc(d.g,String.fromCharCode(u)));else if(160<=A&&255>=A)d.g&&Kc(d.g,String.fromCharCode(A));else if(4128<=A&&4223>=A){if(u=A&255,d.g)if(ox.has(u)){var Ge=ox.get(u);Kc(d.g,Ge)}else Kc(d.g,"_")}else 4256<=A&&4351>=A&&d.g&&((A&255)!=160?Kc(d.g,"_"):Kc(d.g,"[CC]"));xe=null}(u=xe)&&n.push(u)}}}}catch(Te){if(Te instanceof pt&&Te.code===3e3)Tt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Te}return n}function ax(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}yd.prototype.getStreams=function(){return Array.from(this.A)},re("shaka.cea.CeaDecoder",yd),Mt=function(){return new yd};function sx(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function bv(){this.j=new Map,this.i=this.h=0,this.g=H_}bv.prototype.init=function(e){function t(c){c=c.name,c in Cv&&(n.g=Cv[c])}var n=this,r=[],u=[];if(new kr().box("moov",yr).box("mvex",yr).O("trex",function(c){var d=c.reader;d.skip(4),d.skip(4),c=d.M(),d=d.M(),n.h=c,n.i=d}).box("trak",yr).O("tkhd",function(c){c=Zt(c.reader,c.version),r.push(c.trackId)}).box("mdia",yr).O("mdhd",function(c){c=It(c.reader,c.version),u.push(c.timescale)}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",Ai).box("sinf",yr).box("frma",function(c){c=un(c.reader).Ea,c in Cv&&(n.g=Cv[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new pt(2,2,2010);this.g==H_&&He("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,d){n.j.set(c,u[d])})},bv.prototype.parse=function(e){var t=this;if(this.g==H_)return[];var n=[],r=this.h,u=this.i,c=0,d=[],h=null,E=9e4;return new kr().box("moof",function(A){c=A.start,d=[],yr(A)}).box("traf",yr).O("trun",function(A){A=$t(A.reader,A.version,A.flags),d.push(A)}).O("tfhd",function(A){A=rr(A.reader,A.flags),r=A.Wf||t.h,u=A.fh||t.i,A=A.trackId,t.j.has(A)&&(E=t.j.get(A))}).O("tfdt",function(A){h=ir(A.reader,A.version).baseMediaDecodeTime}).box("mdat",function(A){if(h===null)throw He("Unable to find base media decode time for CEA captions!"),new pt(2,2,2010);T6(t,A.reader,h,E,r,u,c-A.start-8,d,n)}).parse(e,!1),n};function T6(e,t,n,r,u,c,d,h,E){var A=0,k=c,G=h.map(function(ve){return ve.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(d+h[0].eh);t.ka();){d=t.M();var te=t.P(),Y=null;switch(Y=!1,h=1,e.g){case bp:Y=te&31,Y=Y==6;break;case Cp:h=2,t.skip(1),Y=te>>1&63,Y=Y==39||Y==40;break;default:return}if(Y)for(te=0,A<G.length&&(te=G[A].he||0),te=(n+te)/r,h=m(sx(t.sb(d-h))),Y=h.next();!Y.done;Y=h.next())E.push({packet:Y.value,pts:te});else try{t.skip(d-h)}catch(ve){break}k-=d+4,k==0&&(n=A<G.length?n+(G[A].wf||u):n+u,A++,A<G.length?k=G[A].sampleSize||c:k=c)}}re("shaka.cea.Mp4CeaParser",bv);var H_=0,bp=1,Cp=2,Cv={avc1:bp,avc3:bp,hev1:Cp,hvc1:Cp,dvav:bp,dva1:bp,dvh1:Cp,dvhe:Cp};zt["video/mp4"]=function(){return new bv};function Rv(){this.g=null}Rv.prototype.init=function(){},Rv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ke;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),r=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(sx(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},re("shaka.cea.TsCeaParser",Rv),zt["video/mp2t"]=function(){return new Rv};function ux(e,t,n){var r=b6(e),u=null;e=[];var c=[],d=null,h=new Set(r.map(function(A){return A.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new pt(2,4,4010);if(!t){if(c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new pt(2,4,4050);c.length&&(d=R6(c[0])),(c=r.find(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=I6(u,E,c,n,h),e.length==0&&(e=[Uu("",E,u)]))}if(r.length&&!d&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Uu(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:d,Zf:!0}}function S6(e,t,n,r){var u=ux(e,n,r);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(d){return d.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new pt(2,4,4008);return u.Vf||t.Vf}function w6(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function A6(e){e=m(Ra(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ri(n)}return""}function Nv(e){var t=Us(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=Us(e.node,"urn:microsoft:playready","pro"),!e||!Ri(e)||(e=Ri(e),e=qo(e),e=w6(e).filter(function(n){return n.type===N6})[0],!e)?"":(e=Ka(e.value,!0),(e=Bl(e,"WRMHEADER"))?A6(e):""))}function I6(e,t,n,r,u){var c=[];n=m(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var h=r[d.Dc];if(h){var E;if((E=Us(d.node,"urn:microsoft:playready","pro"))&&Ri(E)){E=Ri(E),E=qo(E);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:zf(E,A,new Set,0),initDataType:"cenc",keyId:d.keyId}]}else E=null;if(A=null,d.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(A=u,A.size==0)A=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);A=[{initData:zf(G,k,A,1),initDataType:"cenc",keyId:d.keyId}]}E=Uu(h,t,d.init||e||E||A),(h=x6.get(h))&&(E.licenseServerUri=h(d)),c.push(E)}}return c}function b6(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=C6(n.value))&&t.push(n);return t}function C6(e){var t=e.attributes.schemeIdUri,n=Eu(e,"urn:mpeg:cenc:2013","default_KID"),r=Wf(e,"urn:mpeg:cenc:2013","pssh").map(yu),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new pt(2,4,4009);var c=[];try{c=r.map(function(d){return{initDataType:"cenc",initData:qo(d),keyId:null}})}catch(d){throw new pt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function R6(e){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var t=Us(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new pt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new pt(2,4,4051);if(t=Us(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new pt(2,4,4051);if(e=t.attributes.IV,t=bo(t.attributes.keyUriTemplate),!e||!t)throw new pt(2,4,4051);if(e=hu(e.substr(2)),e.byteLength!=16)throw new pt(2,4,4048);return{Rh:t,iv:e}}var N6=1,x6=new Map().set("com.widevine.alpha",function(e){var t=Us(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=Us(e.node,"urn:microsoft","laurl"))&&bo(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Nv).set("com.microsoft.playready.recommendation",Nv).set("com.microsoft.playready.software",Nv).set("com.microsoft.playready.hardware",Nv).set("org.w3.clearkey",function(e){var t=Us(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=Us(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ri(e))?e:""});function xv(e,t,n,r,u,c){var d={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,A,k){if(h=="$$")return"$";var G=d[E];if(G==null)return h;switch(E=="RepresentationID"&&A&&(A=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&He("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return A=p.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function lx(e,t){var n=Su(e,t,"timescale"),r=1;n&&(r=Bs(n)||1),n=Su(e,t,"duration"),(n=Bs(n||""))&&(n/=r);var u=Su(e,t,"startNumber"),c=Number(Su(e,t,"presentationTimeOffset"))||0,d=Ro(u||"");(u==null||d==null)&&(d=1);var h=Mv(e,t,"SegmentTimeline");if(t=null,h){t=r,e=e.ha.duration||1/0,u=d,h=$r(h,"S");for(var E=[],A=-c,k=0;k<h.length;++k){var G=h[k],te=h[k+1],Y=_r(G,"t",Ro),ve=_r(G,"d",Ro),Pe=_r(G,"r",Ju);if(G=_r(G,"k",Ju)||0,Y!=null&&(Y-=c),!ve)break;if(Y=Y!=null?Y:A,Pe=Pe||0,0>Pe)if(te){if(te=_r(te,"t",Ro),te==null)break;if(Y>=te)break;Pe=Math.ceil((te-Y)/ve)-1}else{if(e==1/0)break;if(Y/t>=e)break;Pe=Math.ceil((e*t-Y)/ve)-1}for(0<E.length&&Y!=A&&(E[E.length-1].end=Y/t),te=0;te<=Pe;++te)A=Y+ve,E.push({start:Y/t,end:A/t,Kf:Y,rb:G,ri:E.length+u}),Y=A}t=E}return{timescale:r,Da:n,rd:d,Bb:c/r||0,Jf:c,timeline:t}}function cx(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(Zu)}function Su(e,t,n){t=cx(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Mv(e,t,n){t=cx(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=ua(r.value,n));r=t.next());return e}function M6(e,t,n,r,u,c){for(var d=Eu(e,"http://www.w3.org/1999/xlink","href"),h=Eu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),A=E.next();!A.done;A=E.next()){A=A.value;var k=A.split(":"),G=Lc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[A]}if(5<=c)return gu(new pt(2,4,4028));if(h!="onLoad")return gu(new pt(2,4,4027));var te=fo([r],[d]);return u.request(0,Li(te,t)).va(function(Y){if(Y=ep(Y.data,e.tagName),!Y)return gu(new pt(2,4,4001,d));for(e.children=[];Y.children.length;){var ve=Y.children.shift();ve.tagName&&(ve.parent=e),e.children.push(ve)}ve=m(Object.keys(Y.attributes));for(var Pe=ve.next();!Pe.done;Pe=ve.next())Pe=Pe.value,e.attributes[Pe]=Y.attributes[Pe];return Dv(e,t,n,te[0],u,c+1)})}function Dv(e,t,n,r,u,c){if(c=c===void 0?0:c,Eu(e,"http://www.w3.org/1999/xlink","href")){var d=M6(e,t,n,r,u,c);return n&&(d=d.va(void 0,function(){return Dv(e,t,n,r,u,c)})),d}d=[];for(var h={},E=m(UE(e)),A=E.next();!A.done;h={pc:h.pc},A=E.next())h.pc=A.value,Eu(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&d.push(Dv(h.pc,t,n,r,u,c));return Hf(d).va(function(){return e})}function D6(e,t,n,r,u,c,d){var h,E=new kr().O("sidx",function(A){h=P6(t,r,u,c,d,n,A)});if(e&&E.parse(e),h)return h;throw new pt(2,3,3004)}function P6(e,t,n,r,u,c,d){var h=[];d.reader.skip(4);var E=d.reader.M();if(E==0)throw new pt(2,3,3005);if(d.version==0)var A=d.reader.M(),k=d.reader.M();else A=d.reader.Cc(),k=d.reader.Cc();d.reader.skip(2);var G=d.reader.ra();for(e=e+d.size+k,k=0;k<G;k++){var te=d.reader.M(),Y=(te&2147483648)>>>31;te&=2147483647;var ve=d.reader.M();if(d.reader.skip(4),Y==1)throw new pt(2,3,3006);h.push(new Je(A/E+n,(A+ve)/E+n,function(){return c},e,e+te-1,t,n,r,u)),A+=ve,e+=te}return d.parser.stop(),h}function Zl(e){this.h=tn(e),this.g=new Dr(this.h,0)}Zl.prototype.ka=function(){return this.g.ka()};function ll(e){var t=fx(e);if(7<t.length)throw new pt(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=fx(e);e:{r=m(O6);for(var u=r.next();!u.done;u=r.next())if(zi(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new pt(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),r=tn(e.h,e.g.wa(),t),e.g.skip(t),new L6(n,r)}function fx(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new pt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var O6=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function L6(e,t){this.id=e,this.g=t}function K_(e){if(8<e.g.byteLength)throw new pt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new pt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function k6(e,t,n,r,u,c,d,h,E){function A(){return u}var k=[];e=new Zl(e.g);for(var G=null,te=null;e.ka();){var Y=ll(e);if(Y.id==187){var ve=F6(Y);ve&&(Y=n*ve.Di,ve=t+ve.gi,G!=null&&k.push(new Je(G+d,Y+d,A,te,ve-1,c,d,h,E)),G=Y,te=ve)}}return G!=null&&k.push(new Je(G+d,r+d,A,te,null,c,d,h,E)),k}function F6(e){var t=new Zl(e.g);if(e=ll(t),e.id!=179)throw new pt(2,3,3013);if(e=K_(e),t=ll(t),t.id!=183)throw new pt(2,3,3012);t=new Zl(t.g);for(var n=0;t.ka();){var r=ll(t);if(r.id==241){n=K_(r);break}}return{Di:e,gi:n}}function dx(e,t,n){if(t=Mv(e,t,"Initialization"),!t)return null;var r=e.J.nb(),u=t.attributes.sourceURL;u&&(r=fo(r,[bo(u)])),u=0;var c=null;return(t=_r(t,"range",Xf))&&(u=t.start,c=t.end),n=new dt(function(){return r},u,c,mx(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function U6(e,t,n){var r=Number(Su(e,Ed,"presentationTimeOffset"))||0,u=Su(e,Ed,"timescale"),c=1;u&&(c=Bs(u)||1);var d=r/c||0,h=dx(e,Ed,n);B6(e,h);var E=gm(e);return{vc:function(){var A=Mv(E,Ed,"RepresentationIndex"),k=E.J.nb();return A&&(A=bo(A.attributes.sourceURL))&&(k=fo(k,[A])),A=px(E),hx(E,t,h,k,A.start,A.end,d)}}}function hx(e,t,n,r,u,c,d){var h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut;return Oe(function(yt){if(yt.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,A=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],te=t,Y=null,ve=[te(r,u,c,!1),G=="webm"?te(n.$(),n.Aa,n.ja,!0):null],te=null,N(yt,Promise.all(ve),2);if(Pe=yt.h,xe=Pe[0],Ge=Pe[1]||null,Te=null,We=A-d,Ue=A,gt=k?A+k:1/0,G=="mp4")var jt=D6(xe,u,r,n,We,Ue,gt);else{if(jt=new Zl(Ge),ll(jt).id!=440786851)throw new pt(2,3,3008);var ln=ll(jt);if(ln.id!=408125543)throw new pt(2,3,3009);jt=ln.g.byteOffset,ln=new Zl(ln.g);for(var gn=null;ln.ka();){var Ln=ll(ln);if(Ln.id==357149030){gn=Ln;break}}if(!gn)throw new pt(2,3,3010);for(gn=new Zl(gn.g),Ln=1e6,ln=null;gn.ka();){var Mn=ll(gn);if(Mn.id==2807729)Ln=K_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)ln=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)ln=Mn.g.getFloat64(0);else throw new pt(2,3,3003)}if(ln==null)throw new pt(2,3,3011);if(gn=Ln/1e9,ln*=gn,Ln=ll(new Zl(xe)),Ln.id!=475249515)throw new pt(2,3,3007);jt=k6(Ln,jt,gn,ln,r,n,We,Ue,gt)}for(Te=jt,Rt=m(Te),Ht=Rt.next();!Ht.done;Ht=Rt.next())Ut=Ht.value,Ut.codecs=e.J.codecs,Ut.mimeType=e.J.mimeType;return h.ld(Te),Y=new wr(Te),E&&Y.sc(Ue,gt,!0),yt.return(Y)})}function Ed(e){return e.pd}function px(e){var t=Mv(e,Ed,"RepresentationIndex");return e=Su(e,Ed,"indexRange"),e=Xf(e||""),t&&(e=_r(t,"range",Xf,e)),e}function B6(e,t){if(gx(e,t),!px(e))throw new pt(2,4,4002)}function gx(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=vr&&n!="mp4"&&n!="webm")throw new pt(2,4,4006);if(n=="webm"&&!t)throw new pt(2,4,4005)}function mx(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function j6(e,t,n){var r=dx(e,vx,n),u=Z6(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new pt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new pt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new pt(2,4,4002);var c=null,d=null;e.za.id&&e.J.id&&(d=t[e.za.id+","+e.J.id])&&(c=d.segmentIndex);var h=G6(e.ha.start,e.ha.duration,e.J.nb,u,r,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),d&&(d.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function vx(e){return e.Jb}function Z6(e){var t=q6(e);e=lx(e,vx);var n=e.rd;n==0&&(n=1);var r=0;return e.Da?r=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Da:e.Da,startTime:r,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function G6(e,t,n,r,u,c,d,h){var E=r.yc.length;r.timeline&&r.timeline.length!=r.yc.length&&(E=Math.min(r.timeline.length,r.yc.length));for(var A=e-r.Bb,k=t?e+t:1/0,G=[],te=r.startTime,Y={},ve=0;ve<E;Y={Sc:Y.Sc,Oc:Y.Oc},ve++){Y.Oc=r.yc[ve];var Pe=te;te=void 0,te=r.Da!=null?Pe+r.Da:r.timeline?r.timeline[ve].end:Pe+t,Y.Sc=null,Pe=new Je(e+Pe,e+te,function(xe){return function(){return xe.Sc==null&&(xe.Sc=fo(n(),[xe.Oc.Xh])),xe.Sc}}(Y),Y.Oc.start,Y.Oc.end,u,A,e,k,[],"",null,null,Bt,c),Pe.codecs=h,Pe.mimeType=d,G.push(Pe)}return G}function q6(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(Zu).map(function(t){return $r(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=bo(t.attributes.media);return t=_r(t,"mediaRange",Xf,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function H6(e,t,n,r,u,c,d,h){var E=Y6(e,d),A=K6(e);V6(A);var k=gm(e);if(A.hd)return gx(e,E),{vc:function(){var Pe=xv(A.hd,k.J.id,null,null,k.bandwidth||null,null);return Pe=fo(k.J.nb(),[Pe]),hx(k,t,E,Pe,0,null,A.Bb)}};if(A.Da)return r||e.ua.contentType==="image"||(e.presentationTimeline.hf(A.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return z6(k,A,u,E,c,d,h)}};var G=null;r=r=null,e.za.id&&e.J.id&&(r=e.za.id+","+e.J.id,r=n[r])&&(G=r.segmentIndex);var te=e.ha.start,Y=e.ha.duration?te+e.ha.duration:1/0,ve=!(e.Eb&&e.ha.Ye);return G?(n=G,yx(n,A,te,Y,ve,E),n.La(e.presentationTimeline.qb())):G=new Ov(A,e.J.id,e.bandwidth,e.J.nb,te,Y,E,ve,d,e.J.xf),A.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(A.timeline,te),r&&e.Eb&&(r.segmentIndex=G),{vc:function(){return G instanceof Ov&&G.getNumReferences()==0&&yx(G,A,te,Y,ve,E),Promise.resolve(G)}}}function Pv(e){return e.qd}function K6(e){var t=lx(e,Pv),n=Su(e,Pv,"media"),r=Su(e,Pv,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&bo(n),hd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function V6(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new pt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new pt(2,4,4002)}function z6(e,t,n,r,u,c,d){function h(ln){var gn=(ln-Pe)*ve,Ln=gn+t.Bb,Mn=gn+G;gn=Mn+ve;var qn=Math.min(gn,A());return Mn=new Je(Mn,qn,function(){var Yn=Ln*xe;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(xe)),Yn=xv(Ge,We,ln,null,Te,Yn),fo(Ue(),[Yn])},0,null,r,gt,G,A(),[],"",null,null,Bt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=gn,Mn}function E(){var ln=[Math.max(k.qb(),G),Math.min(k.Gb(),A())].map(function(gn){return gn-G});return ln=[Math.ceil(ln[0]/ve),Math.ceil(ln[1]/ve)-1],e.J.Qb&&ln[1]++,ln.map(function(gn){return gn+Pe})}function A(){var ln=te!=null&&u[te]||Y;return ln?G+ln:1/0}var k=e.presentationTimeline,G=e.ha.start,te=e.za.id,Y=e.ha.duration,ve=t.Da,Pe=t.rd,xe=t.timescale,Ge=t.zc,Te=e.bandwidth||null,We=e.J.id,Ue=e.J.nb,gt=G-t.Bb,Rt=E();n=e.Eb?Math.max(Rt[0],Rt[1]-n+1):Rt[0],d=d||Rt[1],Rt=[];for(var Ht=n;Ht<=d;++Ht){var Ut=h(Ht);Rt.push(Ut)}var yt=new wr(Rt);if(Rt=k.Gb()<A(),Ht=k.R(),Rt||Ht){var jt=Math.max(n,d+1);yt.ke(ve,function(){var ln=k.qb();yt.La(ln);var gn=m(E());gn.next(),gn=gn.next().value;for(var Ln=[];jt<=gn;){var Mn=h(jt);Ln.push(Mn),jt++}return ln>A()&&!Ln.length?null:Ln})}return Promise.resolve(yt)}function Y6(e,t){var n=Su(e,Pv,"initialization");if(!n)return null;n=bo(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new dt(function(){var d=xv(n,r,null,null,u,null);return fo(c(),[d])},0,null,mx(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Ov(e,t,n,r,u,c,d,h,E,A){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.i=u,this.l=c,this.s=d,this.A=E,this.G=A,h&&Ex(this)}z(Ov,wr),g=Ov.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.i<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function yx(e,t,n,r,u,c){if(W6(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var d=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=d.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;u&&Ex(e)}function W6(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ht(n,t)}}function Ex(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.i;if(u=r<n?t[r+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return r+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.zc,u=this.h.timeline[e],c=u.ri,d=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var A=this.h.codecs,k=this.h.mimeType,G=[],te=(u.end-u.start)/u.rb,Y={},ve=0;ve<u.rb;Y={Tc:Y.Tc,se:Y.se},ve++){var Pe=u.start+te*ve,xe=Pe+te;Y.se=ve+1,Y.Tc=null,Pe=new Je(this.i+Pe,this.i+xe,function(Ge){return function(){return t.h?(Ge.Tc==null&&(Ge.Tc=_x(t.h.zc,t.F,c,t.B,d,Ge.se,t.C)),Ge.Tc):[]}}(Y),0,null,this.s,n,this.i,this.l,[],"",null,null,Bt,this.A),Pe.codecs=A,Pe.mimeType=k,this.G==0?0<ve&&Pe.Zd():ve%this.G!=0&&Pe.Zd(),G.push(Pe)}n=new Je(this.i+u.start,E,function(){return 0<u.rb?[]:_x(r,t.F,c,t.B,d,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,Bt,this.A,0<u.rb),n.codecs=A,n.mimeType=k,n.i=h,this.g[e]=n}return n};function _x(e,t,n,r,u,c,d){return e=xv(e,t,n,c,r||null,u),fo(d(),[e]).map(function(h){return h.toString()})}function _d(e){this.o=null,this.A=e,this.G=new kl,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}_d.prototype.configure=function(e){this.o=e},_d.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},_d.prototype.setManifestType=function(e){this.s=e};function Rp(e,t){var n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1)return n=fo(e.i,[$6(e,t)]),r=Li(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),mu(e.G,u),ce(A,2),N(A,u.promise,4);if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),h.VERSION==1&&X6(e,h,c.uri),he(A,0);if((E=be(A))&&E.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){Rp(e,t)}),e.g.X(e.C),X(A)})}function $6(e,t){if(!e.m.length)return t;t=new ui(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),na(u)&&hr(t,u),t.toString()}function X6(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new pr(function(){Rp(e,r)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Td(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}_d.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Np(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u={},c=m(e.m),d=c.next();!d.done;u={Pb:u.Pb},d=c.next())if(u.Pb=d.value,d=t.get(u.Pb))r.push({rf:u.Pb,location:d});else if(d=e.F.find(function(E){return function(A){return A.Vi==E.Pb}}(u))){var h=t.get(d["BASE-ID"]);h&&(d["URI-REPLACEMENT"].Ng?(h=new ui(h),_n(h,d["URI-REPLACEMENT"].Ng),r.push({rf:u.Pb,location:h.toString()})):r.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),d=c.next();!d.done;d=c.next())d=d.value,h=e.j.get(d),u>h&&e.j.delete(d);if(r=r.filter(function(E){for(var A=m(e.j.keys()),k=A.next();!k.done;k=A.next())if(k.value.includes(new ui(E.location).wb))return!1;return!0}),r.length&&(e.B=r[0].rf),r=r.map(function(E){return E.location}),!r.length&&e.h)for(u=m(e.h.split(",")),d=u.next();!d.done;d=u.next())(c=t.get(d.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:fo(e.i,r)}function Ko(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Ko.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function Tx(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var d=e.next();!d.done;d=e.next()){var h=d.value;d=new Map(h.audioStreams.map(function(G){return[W_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[Y_(G),G]})),A=new Map(h.textStreams.map(function(G){return[Pp(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[Op(G),G]})),t){var k=Cx(vr);A.set(Pp(k),k),k=Cx("image"),h.set(Op(k),k)}n.push(d),r.push(E),u.push(A),c.push(h)}return{Pf:n,Lg:r,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn;return Oe(function(Yn){if(Yn.g==1){if(r=Ei,!t&&e.length==1)return u=Tx(e,!1),c=u.Pf,d=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(d[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(A=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),A==-1&&(A=k));return A==-1?Yn.return():(te=Tx(e,!0),Y=te.Pf,ve=te.Lg,Pe=te.Ig,xe=te.hg,N(Yn,Promise.all([Gl(n,n.h,Y,A,xp,Sd),Gl(n,n.g,ve,A,xp,Sd),Gl(n,n.l,Pe,A,xp,Sd),Gl(n,n.i,xe,A,xp,Sd)]),2))}if(Ge=0,Te=[],n.g.length&&n.h.length)for(Ut=m(n.h),yt=Ut.next();!yt.done;yt=Ut.next())for(jt=yt.value,ln=m(n.g),gn=ln.next();!gn.done;gn=ln.next())Ln=gn.value,Mn=fe(jt.drmInfos,Ln.drmInfos),jt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=Ge++,Te.push({id:qn,language:jt.language,disabledUntilTime:0,primary:jt.primary,audio:jt,video:Ln,bandwidth:(jt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(We=n.g.length?n.g:n.h,Ue=m(We),gt=Ue.next();!gt.done;gt=Ue.next())Rt=gt.value,Ht=Ge++,Te.push({id:Ht,language:Rt.language,disabledUntilTime:0,primary:Rt.primary,audio:Rt.type==r.S?Rt:null,video:Rt.type==r.fa?Rt:null,bandwidth:Rt.bandwidth||0,drmInfos:Rt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Te,X(Yn)})};function Sx(e){var t,n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:if(t=Ei,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.S}).map(function(Kn){return[W_(Kn),Kn]}))}),r=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.fa}).map(function(Kn){return[Y_(Kn),Kn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ma}).map(function(Kn){return[Pp(Kn),Kn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ue}).map(function(Kn){return[Op(Kn),Kn]}))}),d=m(u),h=d.next();!h.done;h=d.next())E=h.value,A=bx(t.ma),E.set(Pp(A),A);for(k=m(c),G=k.next();!G.done;G=k.next())te=G.value,Y=bx(t.ue),te.set(Op(Y),Y);return ve=new Ko,N(qn,Gl(ve,[],n,0,Lv,kv),2);case 2:return Pe=qn.h,N(qn,Gl(ve,[],r,0,Lv,kv),3);case 3:return xe=qn.h,N(qn,Gl(ve,[],u,0,Lv,kv),4);case 4:return Ge=qn.h,N(qn,Gl(ve,[],c,0,Lv,kv),5);case 5:if(Te=qn.h,We=0,xe.length&&Pe.length)for(Ut=m(Pe),yt=Ut.next();!yt.done;yt=Ut.next())for(jt=yt.value,ln=m(xe),gn=ln.next();!gn.done;gn=ln.next())Ln=gn.value,Mn=We++,Ln.variantIds.push(Mn),jt.variantIds.push(Mn);else for(Ue=xe.concat(Pe),gt=m(Ue),Rt=gt.next();!Rt.done;Rt=gt.next())Ht=Rt.value,Ht.variantIds=[We++];return qn.return(xe.concat(Pe).concat(Ge).concat(Te))}})}function Gl(e,t,n,r,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:for(d=[],h=0;h<r;h++)d.push(new Set);for(E=r;E<n.length;E++)d.push(new Set(n[E].values()));A=m(t),k=A.next();case 2:if(k.done){Ut.u(4);break}return G=k.value,N(Ut,Q6(e,G,n,r,c,d),5);case 5:if(te=Ut.h,!te)throw new pt(2,4,4037);k=A.next(),Ut.u(2);break;case 4:for(Y=m(d),ve=Y.next();!ve.done;ve=Y.next())for(Pe=ve.value,xe=m(Pe),Ge=xe.next();!Ge.done;Ge=xe.next())Te=Ge.value,(We=J6(e,Te,n,u,c,d))&&t.push(We);for(Ue=m(d),ve=Ue.next();!ve.done;ve=Ue.next())for(gt=ve.value,Rt={},Ht=m(gt),Ge=Ht.next();!Ge.done;Rt={Bd:Rt.Bd},Ge=Ht.next())if(Rt.Bd=Ge.value,!z_(Rt.Bd)&&t.some(function(yt){return function(jt){return V_(e,yt.Bd,jt)}}(Rt)))throw new pt(2,4,4037);return Ut.return(t)}})}function Q6(e,t,n,r,u,c){return Oe(function(d){return d.g==1?(Ix(e,n,t),t.matchedStreams?t.segmentIndex?N(d,wx(t,r),2):d.u(2):d.return(!1)):(Ax(t,r,u,c),d.return(!0))})}function wx(e,t){var n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=[],r=e.matchedStreams,u=m(r),c=u.next();!c.done;c=u.next())d=c.value,n.push(d.createSegmentIndex()),d.trickModeVideo&&!d.trickModeVideo.segmentIndex&&n.push(d.trickModeVideo.createSegmentIndex());return N(A,Promise.all(n),2)}if(e.segmentIndex instanceof _i)for(h=t;h<r.length;h++)E=r[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);X(A)})}function J6(e,t,n,r,u,c){if(z_(t))return null;var d=r(t);return Ix(e,n,d),d.createSegmentIndex&&(d.createSegmentIndex=function(){return Oe(function(h){return d.segmentIndex?h.u(0):(d.segmentIndex=new _i,N(h,wx(d,0),0))})}),!d.matchedStreams||!d.matchedStreams.length?null:(Ax(d,0,u,c),d)}function Ax(e,t,n,r){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var d=!0;if(e.type=="audio"&&Hu(e.language,c.language)==0&&(d=!1),d&&(r[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function xp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Lv(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Sd(e,t){function n(d,h){d||(d=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,d.includes(E)||d.push(E);return d}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=fe(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new pt(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=xp(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Sd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Sd(e.trickModeVideo,t)}function kv(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function Ix(e,t,n){var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=e5(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function e5(e,t,n){var r={audio:W_,video:Y_,text:Pp,image:Op}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,k){return V_(e,A,k)},video:function(A,k){return V_(e,A,k)},text:t5,image:n5}[n.type];for(var d={audio:r5,video:i5,text:o5,image:a5}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!d(n,u,E)||(u=E)}return e.o&&!z_(u)&&t.delete(r(u)),u}function Mp(e,t){function n(r){if(!$_.has(r)){var u=ba(r);$_.set(r,u)}return $_.get(r)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function V_(e,t,n){return!(!Mp(t,n)&&!e.m||t.drmInfos&&!ne(t.drmInfos,n.drmInfos))}function t5(e,t){return t.language?!(e.forced!==t.forced||Hu(e.language,t.language)==0||t.kind!=e.kind):!0}function n5(){return!0}function r5(e,t,n){var r=Mp(e,t),u=Mp(e,n);if(r&&!u)return!1;if(!r&&u||(r=Hu(e.language,t.language),u=Hu(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length?!0:u.length<r.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Dp(e.channelsCount,t.channelsCount,n.channelsCount),r==Vs?!0:r==cl?!1:(r=Dp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Vs?!0:r==cl?!1:!!(e.bandwidth&&Rx(e.bandwidth,t.bandwidth,n.bandwidth)==Vs)))}function i5(e,t,n){var r=Mp(e,t),u=Mp(e,n);if(r&&!u)return!1;if(!r&&u||(r=Dp(e.width*e.height,t.width*t.height,n.width*n.height),r==Vs))return!0;if(r==cl)return!1;if(e.frameRate){if(r=Dp(e.frameRate,t.frameRate,n.frameRate),r==Vs)return!0;if(r==cl)return!1}return!!(e.bandwidth&&Rx(e.bandwidth,t.bandwidth,n.bandwidth)==Vs)}function o5(e,t,n){var r=Hu(e.language,t.language),u=Hu(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function a5(e,t,n){return Dp(e.width*e.height,t.width*t.height,n.width*n.height)==Vs}function bx(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Cx(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Dp(e,t,n){if(t==e&&e!=n)return cl;if(n==e&&e!=t)return Vs;if(t>e){if(n<=e||n-e<t-e)return Vs;if(n-e>t-e)return cl}else{if(n>e)return cl;if(e-n<e-t)return Vs;if(e-n>e-t)return cl}return Nx}function Rx(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Vs:t<e?cl:Nx}function z_(e){switch(e.type){case vr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Y_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function W_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Pp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Op(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}re("shaka.util.PeriodCombiner",Ko),Ko.prototype.setUseStreamOnce=Ko.prototype.Fg,Ko.prototype.setAllowMultiTypeVariants=Ko.prototype.yg,Ko.prototype.combinePeriods=Ko.prototype.Sf,Ko.prototype.getImageStreams=Ko.prototype.nh,Ko.prototype.getTextStreams=Ko.prototype.Ve,Ko.prototype.getVariants=Ko.prototype.Eh;var Vs=1,Nx=0,cl=-1,$_=new Map;function s5(e,t){var n=new DOMParser,r=u5.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function xx(e,t){try{var n=Va(e);return s5(n,t)}catch(r){return null}}var u5=new ra(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Fv(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Ko,this.G=0,this.H=new M(5),this.A=new pr(function(){g5(e)}),this.F=new kl,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=Fv.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,r;return Oe(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,N(u,X_(n),2);if(r=u.h,n.i&&Q_(n,r),!n.i)throw new pt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return ce(n,2),N(n,X_(e),4);if(n.g!=2)return he(n,0);if(t=be(n),!e.i||!t)return n.return();e.i.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,Q_(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function X_(e){var t,n,r,u,c,d,h;return Oe(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=Np(e.h,"Location",!0),n.length&&(t=n)),r=Li(t,e.g.retryParameters),u=Date.now(),N(E,eT(e,r,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),N(E,l5(e,c.data,c.uri),3)):E.return(0)):(d=Date.now(),h=(d-u)/1e3,e.H.sample(1,h),E.return(h))})}function l5(e,t,n){var r,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1){if(r=t,u=e.g.dash.manifestPreprocessor,c=Jm,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=xx(r,"MPD"),!d)throw new pt(2,4,4001,n);u(d),r=za(d.outerHTML)}if(h=ep(r,"MPD"),!h)throw new pt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,A=ev,E!=A&&E(h),e.g.dash.disableXlinkProcessing?Y.return(Mx(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=Dv(h,e.g.retryParameters,k,n,e.i.networkingEngine),mu(e.F,G),N(Y,G.promise,2))}return te=Y.h,Y.return(Mx(e,te,n))})}function Mx(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,di,ki,fi,mi,Gr,ho,Fo,si,Ys,Xc,Qc,Md,fl,Ws,dl,zl,Dd,Pd,Ey,Od,$p,_y;return Oe(function(ws){switch(ws.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,d=$r(t,"Location"),h=m(d),E=h.next();!E.done;E=h.next())A=E.value,k=A.attributes.serviceLocation,(G=yu(A))&&(te=fo(r,[G])[0],k&&(e.h?Td(e.h,"Location",k,te):c.set(k,te)),u.push(te));if(e.h?(Y=Np(e.h,"Location",!0),0<Y.length&&(r=e.o=Y)):u.length&&(r=e.o=u),ve=Promise.resolve(),(Pe=ua(t,"ContentSteering"))&&e.i)for(xe=Pe.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=xe):(e.h=new _d(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=xe,(Ge=yu(Pe))&&(_r(Pe,"queryBeforeStart",tp,!1)?ve=Rp(e.h,Ge):Rp(e.h,Ge))),Te=m(c.keys()),We=Te.next();!We.done;We=Te.next())Ue=We.value,gt=c.get(Ue),Td(e.h,"Location",Ue,gt);if(Rt=$r(t,"BaseURL"),Ut=!1,e.h)for(yt=m(Rt),jt=yt.next();!jt.done;jt=yt.next())ln=jt.value,gn=ln.attributes.serviceLocation,Ln=yu(ln),gn&&Ln&&(Td(e.h,"BaseURL",gn,Ln),Ut=!0);if(Ut&&e.h||(Mn=Rt.map(yu),Ht=fo(r,Mn)),qn=function(){return e.h&&Ut?Np(e.h,"BaseURL"):Ht||[]},Yn=0,Rt&&Rt.length&&(Yn=_r(Rt[0],"availabilityTimeOffset",kc)||0),Kn=e.g.dash.ignoreMinBufferTime,xr=0,Kn||(xr=_r(t,"minBufferTime",Xa)||0),e.G=_r(t,"minimumUpdatePeriod",Xa,-1),di=_r(t,"availabilityStartTime",$f),ki=_r(t,"timeShiftBufferDepth",Xa),fi=e.g.dash.ignoreSuggestedPresentationDelay,mi=null,fi||(mi=_r(t,"suggestedPresentationDelay",Xa)),Gr=e.g.dash.ignoreMaxSegmentDuration,ho=null,Gr||(ho=_r(t,"maxSegmentDuration",Xa)),Fo=t.attributes.type||"static",e.j)for(si=e.j.presentationTimeline,Ys=m(Object.values(e.m)),Xc=Ys.next();!Xc.done;Xc=Ys.next())Qc=Xc.value,Qc.segmentIndex&&Qc.segmentIndex.La(si.qb());else Md=e.g.defaultPresentationDelay||1.5*xr,fl=mi!=null?mi:Md,si=new tr(di,fl,e.g.dash.autoCorrectDrift);return si.Ec(Fo=="static"),si.R()&&!isNaN(e.g.availabilityWindowOverride)&&(ki=e.g.availabilityWindowOverride),ki==null&&(ki=1/0),si.je(ki),Ws=t.attributes.profiles||"",dl={Eb:Fo!="static",presentationTimeline:si,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Ws.split(",")},zl=f5(e,dl,qn,t),Dd=zl.duration,Pd=zl.periods,Fo!="static"&&zl.Xf||si.Za(Dd||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?si.zg(e.C):e.C&&He("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),si.hf(ho||1),N(ws,e.l.Sf(Pd,dl.Eb),2);case 2:return N(ws,ve,3);case 3:if(e.s&&(xr=0,Ey=mi!=null?mi:e.g.defaultPresentationDelay,si.Bf(Ey)),e.j){e.j.variants=e.l.j,Od=e.l.Ve(),0<Od.length&&(e.j.textStreams=Od),e.j.imageStreams=e.l.i,e.i.filter(e.j),ws.u(4);break}if(e.j={presentationTimeline:si,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:xr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:c5(t)},!si.Kg()){ws.u(5);break}return $p=$r(t,"UTCTiming"),N(ws,E5(e,qn,$p),6);case 6:if(_y=ws.h,!e.i)return ws.return();si.Ag(_y);case 5:si.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),X(ws)}})}function c5(e){var t=ua(e,"ServiceDescription");return t?(e=ua(t,"Latency"),t=ua(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function f5(e,t,n,r){var u=_r(r,"mediaPresentationDuration",Xa),c=[],d=0;r=$r(r,"Period");for(var h=0;h<r.length;h++){var E=r[h],A=r[h+1],k=_r(E,"start",Xa,d),G=E.attributes.id,te=_r(E,"duration",Xa),Y=null;if(A){var ve=_r(A,"start",Xa);ve!=null&&(Y=ve-k)}else u!=null&&(Y=u-k);if(Y==null&&(Y=te),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==r.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),d=d5(e,t,n,{start:k,duration:Y,node:E,Ye:Y==null||!A}),c.push(d),t.za.id&&Y&&(e.L[t.za.id]=Y),Y==null){d=null;break}d=k+Y}}return e.K=c.map(function(Pe){return Pe.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:d,Xf:!0}}function d5(e,t,n,r){t.za=J_(e,r.node,null,n),t.ha=r,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+r.start);var u=$r(r.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())_5(e,r.start,r.duration,c.value,n);if(n=$r(r.node,"AdaptationSet").map(function(k){return h5(e,t,k)}).filter(Zu),t.Eb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var d=c.next();!d.done;d=c.next())r.push(d.value)}if(r.length!=new Set(r).size)throw new pt(2,4,4018)}for(r=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),d=m(r);for(var h=d.next();!h.done;h=d.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var A=E.next();!A.done;h={Cd:h.Cd},A=E.next())h.Cd=A.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return ba(k.Cd.codecs)==ba(G.codecs)}}(h))}}}if(n=Uv(e.g.disableAudio,r,"audio"),u=Uv(e.g.disableVideo,r,"video"),c=Uv(e.g.disableText,r,vr),r=Uv(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new pt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function Uv(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function h5(e,t,n){function r(yt){switch(yt){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=J_(e,n,t.za,null);var u=!1,c=$r(n,"Role"),d=c.map(function(yt){return yt.attributes.value}).filter(Zu),h=void 0,E=t.ua.contentType==vr;E&&(h="subtitle"),c=m(c);for(var A=c.next();!A.done;A=c.next()){A=A.value;var k=A.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(A=A.attributes.value,A){case"main":u=!0;break;case"caption":case"subtitle":h=A}}var G;k=$r(n,"EssentialProperty"),c=null;var te=!1;A=!1,k=m(k);for(var Y=k.next();!Y.done;Y=k.next()){Y=Y.value;var ve=Y.attributes.schemeIdUri;ve=="http://dashif.org/guidelines/trickmode"?c=Y.attributes.value:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=r(parseInt(Y.attributes.value,10)):ve!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ve!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ve=="urn:mpeg:dash:ssr:2023"?te=!0:A=!0)}var Pe=null;for(k=$r(n,"SupplementalProperty"),k=m(k),Y=k.next();!Y.done;Y=k.next())Y=Y.value,ve=Y.attributes.schemeIdUri,ve=="http://dashif.org/guidelines/last-segment-number"?Pe=parseInt(Y.attributes.value,10)-1:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=r(parseInt(Y.attributes.value,10)));k=$r(n,"Accessibility");var xe=new Map,Ge;for(k=m(k),Y=k.next();!Y.done;Y=k.next())if(ve=Y.value,Y=ve.attributes.schemeIdUri,ve=ve.attributes.value,Y=="urn:scte:dash:cc:cea-608:2015")if(Y=1,ve!=null){ve=ve.split(";");for(var Te=m(ve),We=Te.next();!We.done;We=Te.next()){var Ue=We.value,gt=We=void 0;Ue.includes("=")?(Ue=Ue.split("="),We=Ue[0].startsWith("CC")?Ue[0]:"CC"+Ue[0],gt=Ue[1]||"und"):(We="CC"+Y,ve.length==2?Y+=2:Y++,gt=Ue),xe.set(We,Cr(gt))}}else xe.set("CC1","und");else if(Y=="urn:scte:dash:cc:cea-708:2015")if(Y=1,ve!=null)for(ve=m(ve.split(";")),We=ve.next();!We.done;We=ve.next())We=We.value,Ue=Te=void 0,We.includes("=")?(We=We.split("="),Te="svc"+We[0],Ue=We[1].split(",")[0].split(":").pop()):(Te="svc"+Y,Y++,Ue=We),xe.set(Te,Cr(Ue));else xe.set("svc1","und");else Y=="urn:mpeg:dash:role:2011"?ve!=null&&(d.push(ve),ve=="captions"&&(h="caption")):Y=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ve=="1"?Ge="visually impaired":ve=="2"&&(Ge="hard of hearing"));if(A)return null;A=$r(n,"ContentProtection");var Rt=ux(A,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Ht=Cr(t.ua.language||"und"),Ut=n.attributes.label;if((A=$r(n,"Label"))&&A.length&&(A=Ri(A[0]))&&(Ut=A),A=$r(n,"Representation"),n=A.map(function(yt){return(yt=p5(e,t,Rt,h,Ht,Ut,u,d,xe,yt,Ge,Pe))&&(yt.hdr=yt.hdr||G,yt.fastSwitching=te),yt}).filter(function(yt){return!!yt}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new pt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=Px(n[0].mimeType,n[0].codecs),E=m(n),Y=E.next();!Y.done;Y=E.next())Y.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),Y=k.next();!Y.done;Y=k.next()){for(Y=Y.value,ve=m(Rt.drmInfos),Te=ve.next();!Te.done;Te=ve.next())Te=Te.value,Te.keyIds=Te.keyIds&&Y.keyIds?new Set([].concat(T(Te.keyIds),T(Y.keyIds))):Te.keyIds||Y.keyIds;e.g.dash.enableAudioGroups&&(Y.groupId=E)}return A=A.map(function(yt){return yt.attributes.id}).filter(Zu),{id:E,contentType:t.ua.contentType,language:Ht,Dj:u,streams:n,drmInfos:Rt.drmInfos,If:c,ki:A}}function p5(e,t,n,r,u,c,d,h,E,A,k,G){if(t.J=J_(e,A,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!y5(t.J))return null;var te=t.ha.start;t.bandwidth=_r(A,"bandwidth",Bs)||0;var Y=t.J.contentType,ve=Y==vr||Y=="application";Y=Y=="image";try{var Pe=void 0;if(n.xe){var xe=t.J.nb,Ge=fo(xe(),[n.xe.Rh]),Te=Li(Ge,e.g.retryParameters);Pe={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var yt,jt,ln;return Oe(function(gn){if(gn.g==1)return N(gn,eT(e,Te,6),2);if(gn.g!=3){if(yt=gn.h,!yt.data||yt.data.byteLength!=16)throw new pt(2,4,4049);return jt={name:"AES-CBC"},ln=Pe,N(gn,p.crypto.subtle.importKey("raw",yt.data,jt,!0,["decrypt"]),3)}ln.cryptoKey=gn.h,Pe.fetchKey=void 0,X(gn)})}}}if(xe=function(yt,jt,ln,gn){return T5(e,yt,jt,ln,gn)},t.J.pd)var We=U6(t,xe,Pe);else if(t.J.Jb)We=j6(t,e.m,Pe);else if(t.J.qd)We=H6(t,xe,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Pe,G);else{var Ue=t.ha.duration||0,gt=t.J.nb;We={vc:function(){var yt=WE(te,Ue,gt());return yt.tc(function(jt){jt.mimeType=t.J.mimeType,jt.codecs=t.J.codecs}),Promise.resolve(yt)}}}}catch(yt){if((ve||Y)&&yt.code==4002)return null;throw yt}G=$r(A,"ContentProtection"),G=S6(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),xe=!1,$r(A,"SupplementalProperty").some(function(yt){return yt.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&yt.attributes.value=="JOC"})&&(xe=!0),Ge=!1,ve&&(Ge=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var Rt;if(Y&&((A=$r(A,"EssentialProperty").find(function(yt){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(yt.attributes.schemeIdUri)}))&&(Rt=A.attributes.value),!Rt))return null;var Ht;A=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(A.includes("hvc1.2.4.L153.B0")||A.includes("hev1.2.4.L153.B0"))&&(Ht="PQ"),ve=t.J.id?t.za.id+","+t.J.id:"";var Ut=ve&&e.m[ve]?e.m[ve]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Ut.segmentIndex&&(Ut.segmentIndex.release(),Ut.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:A,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:d,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:Ge,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:xe,closedCaptions:E,hdr:Ht,videoLayout:void 0,tilesLayout:Rt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([wi(t.J.mimeType,t.J.codecs)])};return Ut.createSegmentIndex=function(){var yt;return Oe(function(jt){if(jt.g==1)return Ut.segmentIndex?jt.u(0):(yt=Ut,N(jt,We.vc(),3));yt.segmentIndex=jt.h,X(jt)})},ve&&t.Eb&&!e.m[ve]&&(e.m[ve]=Ut),Ut}function g5(e){var t,n;Oe(function(r){switch(r.g){case 1:return t=0,ce(r,2),N(r,X_(e),4);case 4:t=r.h,he(r,3);break;case 2:if(n=be(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),Q_(e,t),X(r)}})}function Q_(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function J_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},r=r||n.nb;var u=t.attributes.id,c=$r(t,"BaseURL"),d,h=!1;if(e.h)for(var E=m(c),A=E.next();!A.done;A=E.next()){var k=A.value;A=k.attributes.serviceLocation,k=yu(k),A&&k&&(Td(e.h,u,A,k),h=!0)}h&&e.h||(d=c.map(yu)),E=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",Fm)||n.frameRate,te=t.attributes.sar||n.pixelAspectRatio,Y=m5($r(t,"InbandEventStream"),n.emsgSchemeIdUris),ve=$r(t,"AudioChannelConfiguration");ve=v5(ve)||n.de;var Pe=_r(t,"audioSamplingRate",Ro)||n.audioSamplingRate;E||(E=Px(A,k));var xe=ua(t,"SegmentBase"),Ge=ua(t,"SegmentTemplate"),Te=xe&&_r(xe,"availabilityTimeOffset",kc)||0,We=Ge&&_r(Ge,"availabilityTimeOffset",kc)||0,Ue=c&&c.length&&_r(c[0],"availabilityTimeOffset",kc)||0;return Te=n.Qb+Ue+Te+We,We=null,(Ue=ua(t,"SegmentSequenceProperties"))&&(Ue=ua(Ue,"SAP"))&&(We=_r(Ue,"cadence",Ju)),{nb:function(){return fo(r(),c.length?e.h&&h?Np(e.h,u):d||[]:[])},pd:xe||n.pd,Jb:ua(t,"SegmentList")||n.Jb,qd:Ge||n.qd,width:_r(t,"width",Ro)||n.width,height:_r(t,"height",Ro)||n.height,contentType:E,mimeType:A,codecs:k,frameRate:G,pixelAspectRatio:te,emsgSchemeIdUris:Y,id:u,language:t.attributes.lang,de:ve,audioSamplingRate:Pe,Qb:Te,xf:We||n.xf}}function m5(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function v5(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function y5(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==vr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function Dx(e,t,n,r){var u,c,d,h,E,A,k;return Oe(function(G){if(G.g==1)return u=[bo(n)],c=fo(t(),u),d=Li(c,e.g.retryParameters),d.method=r,h=e.i.networkingEngine.request(4,d),mu(e.F,h),N(G,h.promise,2);if(E=G.h,r=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);A=E.headers.date}else A=Vr(E.data);return k=Date.parse(A),isNaN(k)?G.return(0):G.return(k-Date.now())})}function E5(e,t,n){var r,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:r=n.map(function(te){return{scheme:te.attributes.schemeIdUri,value:te.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),d=c.next();case 2:if(d.done){G.u(4);break}switch(h=d.value,ce(G,5),E=h.scheme,A=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(A),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":He("NTP UTCTiming scheme is not supported");break;default:He("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return N(G,Dx(e,t,A,"HEAD"),10);case 10:return G.return(G.h);case 8:return N(G,Dx(e,t,A,"GET"),11);case 11:return G.return(G.h);case 9:he(G,3);break;case 5:be(G);case 3:d=c.next(),G.u(2);break;case 4:return He("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function _5(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",d=r.attributes.value||"",h=_r(r,"timescale",Ro)||1;r=m($r(r,"Event"));for(var E=r.next();!E.done;E=r.next()){E=E.value;var A=_r(E,"presentationTime",Ro)||0,k=_r(E,"duration",Ro)||0;A=A/h+t,k=A+k/h,n!=null&&(A=Math.min(A,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:d,startTime:A,endTime:k,id:E.attributes.id||"",eventElement:np(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function T5(e,t,n,r,u){var c,d,h,E;return Oe(function(A){return A.g==1?(c=$a,d=u?0:1,h=cp(t,n,r,e.g.retryParameters),N(A,eT(e,h,c,{type:d}),2)):(E=A.h,A.return(E.data))})}function Px(e,t){return t=wi(e,t),Rl(t)?vr:e.split("/")[0]}function eT(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),mu(e.F,t),t.promise}re("shaka.dash.DashParser",Fv),ke["application/dash+xml"]=function(){return new Fv},ke["video/vnd.mpeg.dash.mpd"]=function(){return new Fv};function Bv(){}re("shaka.dependencies",Bv),Bv.has=function(e){return tT.has(e)},Bv.add=function(e,t){if(!Lx[e])throw Error(e+" is not supported");e==Ox?dr("mux.js","mux.js is no longer used in Shaka Player."):tT.set(e,function(){return t})};var Ox="muxjs",Lx={Ej:Ox,ISOBoxer:"ISOBoxer"};Bv.Allowed=Lx;var tT=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function kx(e,t,n){this.type=e,this.g=t,this.segments=n||null}function Fx(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}Fx.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function Ux(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function Lp(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=Lp(e,t))?e.value:n||null}function oi(e,t){if(e=Lp(e,t),!e)throw new pt(2,4,4023,t);return e.value}function Bx(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function jx(e,t){this.name=e,this.value=t}function zs(e,t){return e.filter(function(n){return n.name==t})}function Zx(e,t){return e.filter(function(n){return oi(n,"TYPE")==t})}function No(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function wd(e,t,n){return n=n===void 0?0:n,(e=No(e,t))?Number(e.value):n}function ql(e,t,n){return t?Gx(e,[t],n):[]}function Gx(e,t,n){if(!t.length)return[];t=fo(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=e,c=u.push,d=r.value;if((r=n)&&r.size){d=String(d).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=d.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var A=E.slice(2,E.length-1),k=r.get(A);if(k)d=d.replace(E,k);else throw new pt(2,4,4039,A)}}r=d}else r=d;c.call(u,r)}return e}function zc(e){this.h=e||"",this.g=0}function Ad(e){Hl(e,/[ \t]+/gm)}function Hl(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Yc(e){return e.g==e.h.length?null:(e=Hl(e,/[^ \t\n]*/gm))?e[0]:null}function S5(){this.g=0}function nT(e,t){t=Vr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new pt(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=rT(e,c),--e.g,qx.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var d=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(d)||r)r=!1;else{if(d=rT(e,d),w5.includes(d.name)){if(t!=1)throw new pt(2,4,4017);d=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,d=m(d);for(var E=d.next();!E.done;E=d.next())E=E.value,/^(#EXT)/.test(E)?(E=rT(e,E),qx.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):r.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&r.push(h),n.push(new Bx(E,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new Bx("",r,c))),new kx(t,u,n)}u.push(d),d.name=="EXT-X-STREAM-INF"&&(d.attributes.push(new jx("URI",h)),r=!0)}}return new kx(t,u)}function rT(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new pt(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new zc(r);var c;(c=Hl(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var d=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Hl(r,d);)n.push(new jx(c[1],c[2]||c[3])),Ad(r)}return new Fx(e,t,n,u)}var qx="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),w5="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Hx(){}function Kx(e){try{var t=iT(e);return $u({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return gu(n)}}function iT(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new pt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new pt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=qo(e):u=za(e),{data:u,contentType:n}}re("shaka.net.DataUriPlugin",Hx),Hx.parse=Kx,Ho("data",Kx);function Vx(e){var t=Ca(e),n=t.split("/")[0];return e=Do(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function A5(e,t){function n(Te){return r(Te.name)}function r(Te){switch(Te=Te.toLowerCase(),Te){case"avc1":case"avc3":c.push(Te+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Te+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Te+".05.04"),h=!0;break;case"vp09":c.push(Te+".00.10.08"),h=!0;break;case"av01":c.push(Te+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Te),d=!0}}var u=[],c=[],d=!1,h=!1,E=null,A=null,k=null,G=null,te=null,Y=null,ve;if(new kr().box("moov",yr).box("trak",yr).O("tkhd",function(Te){Te=Zt(Te.reader,Te.version),A=String(Te.height),k=String(Te.width)}).box("mdia",yr).O("mdhd",function(Te){E=It(Te.reader,Te.version).language}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("mp4a",function(Te){var We=Te.reader;We.skip(6),We.skip(2),We.skip(8);var Ue=We.ra();We.skip(2),We.skip(2),We.skip(2),We=We.ra()+We.ra()/65536,G=Ue,te=We,Te.reader.ka()?yr(Te):n(Te)}).box("esds",function(Te){Te=Te.reader;for(var We="mp4a",Ue,gt;Te.ka();){Ue=Te.P();for(var Rt=Te.P();Rt&128;)Rt=Te.P();if(Ue==3)Te.ra(),Rt=Te.P(),Rt&128&&Te.ra(),Rt&64&&Te.skip(Te.P()),Rt&32&&Te.ra();else if(Ue==4)gt=Te.P(),Te.skip(12);else if(Ue==5)break}gt&&(We+="."+vn(gt),Ue==5&&Te.ka()&&(Ue=Te.P(),gt=(Ue&248)>>3,gt===31&&Te.ka()&&(gt=32+((Ue&7)<<3)+((Te.P()&224)>>5)),We+="."+gt)),u.push(We),d=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Te){ve=Te.name,Ai(Te)}).box("avc3",function(Te){ve=Te.name,Ai(Te)}).box("hev1",function(Te){ve=Te.name,Ai(Te)}).box("hvc1",function(Te){ve=Te.name,Ai(Te)}).box("dva1",function(Te){ve=Te.name,Ai(Te)}).box("dvav",function(Te){ve=Te.name,Ai(Te)}).box("dvh1",function(Te){ve=Te.name,Ai(Te)}).box("dvhe",function(Te){ve=Te.name,Ai(Te)}).box("vp09",function(Te){ve=Te.name,Ai(Te)}).box("av01",function(Te){ve=Te.name,Ai(Te)}).box("avcC",function(Te){var We=ve||"";switch(ve){case"dvav":We="avc3";break;case"dva1":We="avc1"}Te=Te.reader,Te.skip(1),Te=We+"."+vn(Te.P())+vn(Te.P())+vn(Te.P()),c.push(Te),h=!0}).box("hvcC",function(Te){var We=ve||"";switch(ve){case"dvh1":We="hvc1";break;case"dvhe":We="hev1"}var Ue=Te.reader;Ue.skip(1),Te=Ue.P();var gt=["","A","B","C"][Te>>6],Rt=Te&31,Ht=Ue.M(),Ut=(Te&32)>>5?"H":"L";Te=[Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P()],Ue=Ue.P();for(var yt=0,jt=0;32>jt&&(yt|=Ht&1,jt!=31);jt++)yt<<=1,Ht>>=1;for(We=We+("."+gt+Rt)+("."+vn(yt,!0)),We+="."+Ut+Ue,gt="",Rt=Te.length;Rt--;)((Ut=Te[Rt])||gt)&&(gt="."+Ut.toString(16).toUpperCase()+gt);We+=gt,c.push(We),h=!0}).box("dvcC",function(Te){var We=ve||"";switch(ve){case"hvc1":We="dvh1";break;case"hev1":We="dvhe";break;case"avc1":We="dva1";break;case"avc3":We="dvav"}var Ue=Te.reader;Ue.skip(2),Te=Ue.P(),Ue=Ue.P(),c.push(We+"."+Pn(Te>>1&127)+"."+Pn(Te<<5&32|Ue>>3&31)),h=!0}).O("vpcC",function(Te){var We=ve||"",Ue=Te.reader;Te=Ue.P();var gt=Ue.P();Ue=Ue.P()>>4&15,c.push(We+"."+Pn(Te)+"."+Pn(gt)+"."+Pn(Ue)),h=!0}).box("av1C",function(Te){var We=ve||"",Ue=Te.reader;Ue.skip(1),Te=Ue.P(),Ue=Ue.P();var gt=Te>>>5,Rt=(Ue&64)>>6;c.push(We+"."+gt+"."+Pn(Te&31)+(Ue>>>7?"H":"M")+"."+Pn(gt===2&&Rt?(Ue&32)>>5?12:10:Rt?10:8)+"."+((Ue&16)>>4)+"."+((Ue&8)>>3)+((Ue&4)>>2)+(Ue&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",Jh).box("encv",Ai).box("sinf",yr).box("frma",function(Te){Te=un(Te.reader).Ea,r(Te)}).box("colr",function(Te){Te=Te.reader;var We=null,Ue=Te.sb(4),gt=String.fromCharCode(Ue[0]);if(gt+=String.fromCharCode(Ue[1]),gt+=String.fromCharCode(Ue[2]),gt+=String.fromCharCode(Ue[3]),gt==="nclx")switch(Te.ra(),Ue=Te.ra(),Te.ra(),Ue){case 1:case 6:case 13:case 14:case 15:We="SDR";break;case 16:We="PQ";break;case 18:We="HLG"}Y=We}).parse(e||t,!0),!u.length&&!c.length)return null;var Pe=d&&!h,xe=new Map;if(h){var Ge=new St("video/mp4");for(e&&Ge.init(e),Ge.i(t),e=m(Ge.j()),t=e.next();!t.done;t=e.next())t=t.value,xe.set(t,t);Ge.h()}return{type:Pe?"audio":"video",mimeType:Pe?"audio/mp4":"video/mp4",codecs:zx(u.concat(c)).join(", "),language:E,height:A,width:k,channelCount:G,sampleRate:te,closedCaptions:xe,Lf:Y}}function zx(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=Ya(r);t.has(u)||(n.push(r),t.add(u))}return t=Mh("audio",n),r=Mh("video",n),e=Mh(vr,n),r=I5(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function I5(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Ot('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function b5(e){var t=null;return new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",vu).box("encv",Ai).box("enca",Jh).box("sinf",yr).box("schi",yr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=Os(n.sb(16))}).parse(e,!0),t}function jv(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(vr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new S5,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){z5(e)}),this.qa=Kv,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new kl,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=jv.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,r;return Oe(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),N(u,dT(n,[e]),2)):u.g!=3?(r=u.h,n.aa=r.uri,N(u,N5(n,r.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,r,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){if(!xa(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,r=n.filter(function(G){return G.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())d=c.value,t.push(C5(e,d));return N(k,Promise.all(t),2)}iM(e,r.map(function(G){return G.stream})),h=r.some(function(G){return G.fd==0}),r.length&&!h&&(E=Y5,qv(e,E.Pg),A=r.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(A))),e.i.updateDuration()),h&&aT(e),X(k)})};function oT(e,t){return xa(e)?e.K.get(t.type):t.$d}function C5(e,t){var n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn;return Oe(function(qn){if(qn.g==1){for(n=[],r=m(t.$()),u=r.next();!u.done;u=r.next())c=u.value,d=new ui(c),h=d.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),na(h)&&hr(d,h),n.push(d.toString());return N(qn,dT(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(A=nT(e.Ga,E.data),A.type!=1)throw new pt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=zs(A.g,"EXT-X-DEFINE"),te=Xx(e,G,k),Y=t.stream,ve=oT(e,t),N(qn,uM(e,A,Y.mimeType,t.$,te),3)}Pe=qn.h,xe=Pe.keyIds,Ge=Pe.drmInfos,Te=function(Yn,Kn){return Yn.size===Kn.size&&[].concat(T(Yn)).every(function(xr){return Kn.has(xr)})},Te(Y.keyIds,xe)||(Y.keyIds=xe,Y.drmInfos=Ge,e.i.newDrmInfo(Y)),We=dM(e,A,Y,ve,te,t.$,t.type),Ue=We.segments,(gt=We.bandwidth)&&(Y.bandwidth=gt),Y.segmentIndex.kd(Ue,e.l.qb()),Ue.length&&(Rt=wd(A.g,"EXT-X-MEDIA-SEQUENCE",0),Ut=(Ht=No(A.g,"EXT-X-SKIP"))?Number(zn(Ht,"SKIPPED-SEGMENTS")):0,yt=aM(Rt,Ue),jt=yt.gb,ln=yt.hb,t.gb=jt+Ut,t.hb=ln,gn=ve.get(Rt),Y.segmentIndex.La(gn)),Ln=Ue[0],t.fc=Ln.startTime,Mn=Ue[Ue.length-1],t.yb=Mn.endTime,No(A.g,"EXT-X-ENDLIST")&&(t.fd=!0),uT(e,A),X(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function Yx(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,d=oT(e,u);if(c=c.g[0]||null){d=m(d);for(var h=d.next();!h.done;h=d.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,Gv(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(r.g.splice(0,u),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),Wx(e,n,r)))}function R5(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;r!=null&&r.h!=null&&(e.T=Math.min(e.T,r.h))}}if(t=e.T,t!=1/0){for(r=m(e.h.values()),n=r.next();!n.done;n=r.next())if(n=n.value,!Gv(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)de("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(Wx(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function Wx(e,t,n){t.fc+=n,t.yb+=n,e=oT(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function N5(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,di,ki,fi,mi;return Oe(function(Gr){switch(Gr.g){case 1:return r=nT(e.Ga,t),u=zs(r.g,"EXT-X-DEFINE"),c=[],d=[],h=[],E=function(){return[n]},r.type==1?N(Gr,$x(e,r,E),7):(x5(e,u),A=zs(r.g,"EXT-X-MEDIA"),k=zs(r.g,"EXT-X-STREAM-INF"),G=zs(r.g,"EXT-X-IMAGE-STREAM-INF"),te=zs(r.g,"EXT-X-I-FRAME-STREAM-INF"),Y=zs(r.g,"EXT-X-SESSION-KEY"),ve=zs(r.g,"EXT-X-SESSION-DATA"),Pe=zs(r.g,"EXT-X-CONTENT-STEERING"),D5(e,ve),N(Gr,P5(e,Pe),4));case 4:return M5(e,k),j5(e,A),N(Gr,F5(e,k,Y,A,E,e.o),5);case 5:return c=Gr.h,d=O5(e,A),N(Gr,L5(e,G,te),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return xe=Gr.h,Ge=xe.type,Te=xe.mimeType,We=xe.codecs,Ue=xe.language,gt=xe.height,Rt=xe.width,Ht=xe.channelCount,Ut=xe.sampleRate,yt=xe.closedCaptions,jt=xe.Lf,N(Gr,oM(e,e.A++,r,E,n,We,Ge,Ue,!0,"Media Playlist",Ht,yt,null,!1,Ut,!1,Te),8);case 8:ln=Gr.h,e.h.set(n,ln),Ge=="video"&&hM(ln.stream,Rt,gt,null,jt,null),c.push({id:0,language:Cr(Ue||"und"),disabledUntilTime:0,primary:!0,audio:Ge=="audio"?ln.stream:null,video:Ge=="video"?ln.stream:null,bandwidth:ln.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new pt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),r.type==1&&(xa(e)&&(cM(e,r),gn=e.m,e.s.X(gn)),Ln=Array.from(e.h.values()),sT(e,Ln),aT(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Kn=Yn.value,Kn.audio&&Kn.audio.codecs===""&&Mn.push(Kn.audio.createSegmentIndex()),Kn.video&&Kn.video.codecs===""&&Mn.push(Kn.video.createSegmentIndex());return N(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(xr=[],di=c[0],ki=m([di.video,di.audio]),fi=ki.next();!fi.done;fi=ki.next())(mi=fi.value)&&!mi.segmentIndex&&xr.push(mi.createSegmentIndex());if(0<xr.length)return N(Gr,Promise.all(xr),0)}Gr.u(0)}})}function $x(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){switch(gt.g){case 1:if(r=Vx(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return gt.return(r);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],d=ql(n(),t.segments[0].h),h=d[0],E=new ui(h),A=E.Pa.split(".").pop(),k=gM[A])return gt.return(Vx(k));if(G=$a,te=null,Y=lT(e,t,c.g,n),e.Y.clear(),!Y){gt.u(2);break}return ve=cp(Y.$(),Y.ac(),Y.Yb(),e.g.retryParameters),N(gt,Kl(e,ve,G,{type:0}),3);case 3:Pe=gt.h,te=Pe.data;case 2:return xe=Li(d,e.g.retryParameters),N(gt,Kl(e,xe,G,{type:1}),4);case 4:if(Ge=gt.h,(Te=Ge.headers["content-type"])&&(Te=Te.split(";")[0].toLowerCase()),A=="ts"||Te=="video/mp2t"){var Rt=Ge.data,Ht=Qn(Rt);Ht=new Ke().parse(Ht);var Ut=Ht.bd();Ht=Ht.We();var yt=[],jt=!1,ln=!1;switch(Ut.audio){case"aac":case"aac-loas":yt.push("mp4a.40.2"),jt=!0;break;case"mp3":yt.push("mp4a.40.34"),jt=!0;break;case"ac3":yt.push("ac-3"),jt=!0;break;case"ec3":yt.push("ec-3"),jt=!0;break;case"opus":yt.push("opus"),jt=!0}switch(Ut.video){case"avc":Ht.Ea?yt.push(Ht.Ea):yt.push("avc1.42E01E"),ln=!0;break;case"hvc":Ht.Ea?yt.push(Ht.Ea):yt.push("hvc1.1.6.L93.90"),ln=!0;break;case"av1":yt.push("av01.0.01M.08"),ln=!0}if(yt.length){if(Ut=jt&&!ln,jt=new Map,ln){ln=new St("video/mp2t"),ln.i(Rt),Rt=m(ln.j());for(var gn=Rt.next();!gn.done;gn=Rt.next())gn=gn.value,jt.set(gn,gn);ln.h()}Ht={type:Ut?"audio":"video",mimeType:"video/mp2t",codecs:yt.join(", "),language:null,height:Ht.height,width:Ht.width,channelCount:null,sampleRate:null,closedCaptions:jt,Lf:null}}else Ht=null;if(We=Ht)return gt.return(We)}else if((A=="mp4"||A=="cmfv"||A=="m4s"||Te=="video/mp4"||Te=="audio/mp4"||Te=="video/iso.segment")&&(Ue=A5(te,Ge.data)))return gt.return(Ue);return gt.return(r)}})}function aT(e){if(xa(e)){if(e.qa==Vv){for(var t,n=t=1/0,r=m(e.h.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za(rM(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function x5(e,t){var n=new ui(e.aa).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),r&&c&&(e.o.has(r)||e.o.set(r,c)),u&&(r=n.get(u)[0])&&!e.o.has(r)&&e.o.set(u,r)}}function Xx(e,t,n){n=new ui(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,d=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),d&&h&&(r.has(d)||r.set(d,h)),u&&(d=n.get(u)[0])&&!r.has(d)&&r.set(u,d),c&&(u=e.o.get(c))&&r.set(c,u)}return r}function M5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"AUDIO");n=zn(r,"VIDEO");var c=zn(r,"SUBTITLES");if(r=Qx(e,r),c){var d=Co(vr,r);e.G.set(c,d),mn(r,d)}u&&(c=Co("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Co("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function D5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"DATA-ID");n=zn(r,"URI");var c=zn(r,"LANGUAGE");r=zn(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",ql([e.aa],n,e.o)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function P5(e,t){var n,r,u,c,d,h;return Oe(function(E){if(!e.i||!e.g)return E.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,d=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),d&&h){e.j=new _d(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=d,n=Rp(e.j,h);break}return N(E,n,0)})}function O5(e,t){var n=Zx(t,"SUBTITLES");t=n.map(function(d){if(e.g.disableText)return null;try{return nM(e,[d],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=oi(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=cT(vr,r)||fT(vr),Id(c.stream)}}return t.filter(function(d){return d})}function Id(e){e.fullMimeTypes=new Set([wi(e.mimeType,e.codecs)])}function L5(e,t,n){var r,u;return Oe(function(c){return c.g==1?(r=t.map(function(d){var h,E;return Oe(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(ce(A,2),N(A,Z5(e,d),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(E=be(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw E})}).concat(n.map(function(d){if(e.g.disableThumbnails)return null;try{var h=oi(d,"URI"),E=zn(d,"CODECS")||"";if(e.h.has(h))var A=e.h.get(h);else{var k=zn(d,"LANGUAGE"),G=zn(d,"NAME"),te=zn(d,"CHARACTERISTICS"),Y=Zv(e,e.A++,[h],E,"image",k,!1,G,null,null,te,!1,null,!1),ve=zn(d,"RESOLUTION"),Pe=m(ve?ve.split("x"):[null,null]),xe=Pe.next().value,Ge=Pe.next().value;Y.stream.width=Number(xe)||void 0,Y.stream.height=Number(Ge)||void 0;var Te=zn(d,"BANDWIDTH");Te&&(Y.stream.bandwidth=Number(Te)),e.h.set(h,Y),A=Y}return d=A,d.stream.codecs!=="mjpg"?null:d.stream}catch(We){if(e.g.hls.ignoreImageStreamFailures)return null;throw We}})),N(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(d){return d})))})}function k5(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=Ux(u);r[c]?r[c].push(u):r[c]=[u]}for(var d in r)nM(e,r[d],n)}function F5(e,t,n,r,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,di,ki;return Oe(function(fi){switch(fi.g){case 1:if(d=[],h=new Set,!(0<n.length)){fi.u(2);break}E=m(n),A=E.next();case 3:if(A.done){fi.u(2);break}if(k=A.value,G=oi(k,"METHOD"),te=zn(k,"KEYFORMAT")||"identity",Y=null,G=="NONE"||Hv(G)){fi.u(4);break}if(te!="identity"){Y=(ve=vM[te])?ve(k,""):null,fi.u(6);break}return N(fi,pM(e,k,"",u,null,c),8);case 8:Y=fi.h;case 6:if(Y){if(Y.keyIds)for(Pe=m(Y.keyIds),xe=Pe.next();!xe.done;xe=Pe.next())Ge=xe.value,h.add(Ge);d.push(Y)}case 4:A=E.next(),fi.u(3);break;case 2:for(Te={},We=m(t),Ue=We.next();!Ue.done;Ue=We.next())gt=Ue.value,Rt=Ux(gt),Te[Rt]?Te[Rt].push(gt):Te[Rt]=[gt];Ht=[];for(Ut in Te)yt=Te[Ut],jt=yt[0],ln=zn(jt,"FRAME-RATE"),gn=Number(zn(jt,"AVERAGE-BANDWIDTH"))||Number(oi(jt,"BANDWIDTH")),Ln=zn(jt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Kn=zn(jt,"VIDEO-RANGE"),(xr=zn(jt,"REQ-VIDEO-LAYOUT"))&&xr.includes(",")&&(di=xr.split(",").filter(function(mi){return mi=="CH-STEREO"||mi=="CH-MONO"}),xr=di[0]),xr=xr||"CH-MONO",ki=U5(e,yt,r,gn),Ht.push.apply(Ht,T(B5(e,ki.audio,ki.video,gn,qn,Yn,ln,Kn,xr,d,h)));return fi.return(Ht.filter(function(mi){return mi!=null}))}})}function U5(e,t,n,r){for(var u={audio:[],video:[]},c=new Map,d=[],h=!1,E=!1,A=m(t),k=A.next();!k.done;k=A.next()){var G=k.value;k=zn(G,"AUDIO");var te=zn(G,"VIDEO"),Y=k||te;Y&&(d.includes(Y)||d.push(Y),(G=zn(G,"PATHWAY-ID"))&&c.set(Y,G),k?h=!0:te&&(E=!0))}d.length&&n.length&&(A=n.filter(function(xe){return d.includes(oi(xe,"GROUP-ID"))}),k5(e,A,c)),A=(c=d.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(A)):E&&u.video.push.apply(u.video,T(A)),k=!1;var ve=t.map(function(xe){return oi(xe,"URI")});if(E=u.audio.find(function(xe){return xe&&xe.$().find(function(Ge){return ve.includes(Ge)})}),h=Qx(e,t[0]),te=Co("video",h),(Y=Co("audio",h))&&!te?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&Y&&te?(E="video",h=[[te,Y].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Pe=G=Y=te=k=null;!A.length&&(n=n.find(function(xe){var Ge=zn(xe,"URI")||"",Te=zn(xe,"TYPE");return xe=oi(xe,"GROUP-ID"),Te!="SUBTITLES"&&Ge==""&&d.includes(xe)}))&&(k=zn(n,"LANGUAGE"),te=zn(n,"NAME"),Y=Jx(n),tM(n),G=zn(n,"CHARACTERISTICS"),Pe=eM(n)),e=G5(e,t,h,E,k,te,Y,G,Pe),c&&(e.stream.groupId=c),A.length||(e.stream.bandwidth=r),u[e.stream.type]=[e]}return u}function Qx(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),zx(e)}function Jx(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function eM(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function tM(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function B5(e,t,n,r,u,c,d,h,E,A,k){for(var G=m(n),te=G.next();!te.done;te=G.next())hM(te.value.stream,u,c,d,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,d=m(n),h=d.next();!h.done;h=d.next()){var Y=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=k),(E=Y?Y.stream:null)&&(E.drmInfos=A,E.keyIds=k),G=c?c.stream.drmInfos:null,te=Y?Y.stream.drmInfos:null,Y=Y?Y.$().sort().join(","):"";var ve=c?c.$().sort().join(","):"";Y=Y+" - "+ve,h&&E&&!ne(G,te)||e.Ia.has(Y)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(Y))}return u}function j5(e,t){t=Zx(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"LANGUAGE");n=Cr(u||"und"),u||(u=zn(r,"NAME"))&&(n=u),u=oi(r,"GROUP-ID"),r=oi(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function nM(e,t,n){for(var r=[],u=[],c=new Map,d=m(t),h=d.next();!h.done;h=d.next()){var E=h.value;h=oi(E,"URI"),E=oi(E,"GROUP-ID"),r.push(h),u.push(E),c.set(E,h)}if(d=u.sort().join(","),h=t[0],t="",E=oi(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=vr),E==vr)t=zn(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=r.sort().join(","),e.h.has(u))return e.h.get(u);if(A=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&Td(e.j,A,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?Jx(h):null;var te=E=="audio"?tM(h):!1,Y=zn(h,"CHARACTERISTICS"),ve=zn(h,"FORCED")=="YES";return h=E=="audio"?eM(h):null,r=Zv(e,A,r,t,E,n,k,c,G,null,Y,ve,h,te),r.stream&&(r.stream.groupId=d),e.H.has(d)?e.H.get(d).push(r):e.H.set(d,[r]),e.h.set(u,r),r}function Z5(e,t){var n,r,u,c,d,h,E,A,k,G;return Oe(function(te){return te.g==1?(n=oi(t,"URI"),r=zn(t,"CODECS","jpeg")||"",e.h.has(n)?te.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),d=zn(t,"CHARACTERISTICS"),h=Zv(e,e.A++,[n],r,"image",u,!1,c,null,null,d,!1,null,!1),(E=zn(t,"RESOLUTION"))?N(te,h.stream.createSegmentIndex(),3):te.u(2))):(te.g!=2&&(A=h.stream.segmentIndex.get(0),k=A.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),te.return(h))})}function G5(e,t,n,r,u,c,d,h,E){for(var A=e.A++,k=[],G=m(t),te=G.next();!te.done;te=G.next()){var Y=te.value;te=oi(Y,"URI"),Y=zn(Y,"PATHWAY-ID"),e.j&&Y&&Td(e.j,A,Y,te),k.push(te)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),r=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Bu(r,n),r=Zv(e,A,k,n,r,u,!1,c,d,t,h,!1,E,!1),e.h.set(G,r),r}function Zv(e,t,n,r,u,c,d,h,E,A,k,G,te,Y){function ve(gt){var Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,di,ki,fi,mi;return Oe(function(Gr){switch(Gr.g){case 1:return Rt=Te.$(),N(Gr,dT(e,Te.$(),!0),2);case 2:if(Ht=Gr.h,gt.aborted)return Gr.return();if(Ut=Ht.uri,Ut==Ht.originalUri||Rt.includes(Ut)||Ge.push(Ut),yt=nT(e.Ga,Ht.data),jt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return N(Gr,$x(e,yt,Pe),4);case 4:ln=Gr.h,jt=ln.mimeType,r=ln.codecs;case 3:return gn=xa(e),N(Gr,oM(e,0,yt,Pe,Ut,r,u,c,d,h,E,A,k,G,te,Y,jt),5);case 5:if(Ln=Gr.h,gt.aborted)return Gr.return();if(Mn=Ln.stream,xa(e)&&!gn&&cM(e,yt),Te.fc=Ln.fc,Te.yb=Ln.yb,Te.Hd=Ln.Hd,Te.Gd=Ln.Gd,Te.fd=Ln.fd,Te.$d=Ln.$d,Te.gb=Ln.gb,Te.hb=Ln.hb,Te.df=!0,xe.segmentIndex=Mn.segmentIndex,xe.encrypted=Mn.encrypted,xe.drmInfos=Mn.drmInfos,xe.keyIds=Mn.keyIds,xe.mimeType=Mn.mimeType,xe.bandwidth=xe.bandwidth||Mn.bandwidth,xe.codecs=xe.codecs||Mn.codecs,Id(xe),xe.drmInfos.length&&e.i.newDrmInfo(xe),qn=Ei,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Kn=Yn.next();!Kn.done;Kn=Yn.next())xr=Kn.value,xr.df||xr.type!=u||(xr.stream.mimeType=Mn.mimeType,Id(xr.stream));u==qn.ma&&(di=Mn.segmentIndex.get(0))&&di.ca&&(xe.mimeType="application/mp4",Id(xe)),q5(e)&&(e.mb?sT(e,[Te]):(e.mb=!0,ki=Array.from(e.h.values()),fi=ki.filter(function(ho){return ho.stream.segmentIndex}),sT(e,fi),aT(e),mi=e.m,0<mi&&e.s.X(mi))),X(Gr)}})}function Pe(){return e.j&&1<n.length?Np(e.j,t):Ge.concat(Gx([e.aa],n,e.o))}var xe=sM(e,r,u,c,d,h,E,A,k,G,te,Y),Ge=[],Te={stream:xe,type:u,tg:Ge,$:Pe,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},We=null,Ue=new AbortController;return xe.createSegmentIndex=function(){return We||(Ue=new AbortController,We=new Promise(function(gt){gt(ve(Ue.signal))}))},xe.closeSegmentIndex=function(){We&&!xe.segmentIndex&&Ue.abort(),xe.segmentIndex&&(xe.segmentIndex.release(),xe.segmentIndex=null),We=null},Te}function rM(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function iM(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function sT(e,t){if(!xa(e))for(var n=rM(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.sc(0,n);iM(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?Yx(e,t):(R5(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&Yx(e,t))}function Gv(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function q5(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function oM(e,t,n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe){var Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,xr,di,ki,fi,mi,Gr;return Oe(function(ho){switch(ho.g){case 1:if(n.type!=1)throw new pt(2,4,4017);Ge=zs(n.g,"EXT-X-DEFINE"),Te=Xx(e,Ge,u);var Fo=No(n.g,"EXT-X-PLAYLIST-TYPE"),si=No(n.g,"EXT-X-ENDLIST");if(si=Fo&&Fo.value=="VOD"||si,Fo=Fo&&Fo.value=="EVENT"&&!si,Fo=!si&&!Fo,si?qv(e,Kv):Fo?qv(e,Vv):qv(e,yM),xa(e)&&uT(e,n),xe){ho.u(2);break}return N(ho,V5(e,d,c,n,Te,r),3);case 3:xe=ho.h;case 2:return N(ho,uM(e,n,xe,r,Te),4);case 4:if(We=ho.h,Ue=We.drmInfos,gt=We.keyIds,Rt=We.encrypted,Ht=We.Tg,Rt&&!Ue.length&&!Ht)throw new pt(2,4,4026);return Ut=sM(e,c,d,h,E,A,k,G,te,Y,ve,Pe),Ut.encrypted=Rt,Ut.drmInfos=Ue,Ut.keyIds=gt,Ut.mimeType=xe,Id(Ut),yt=xa(e)?e.K.get(d):new Map,jt=dM(e,n,Ut,yt,Te,r,d),ln=jt.segments,(gn=jt.bandwidth)&&(Ut.bandwidth=gn),xa(e)&&uT(e,n),Ln=ln[0].startTime,Mn=ln[ln.length-1],qn=Mn.endTime,Yn=new wr(ln),Ut.segmentIndex=Yn,xr=(Kn=No(n.g,"EXT-X-SERVER-CONTROL"))?Lp(Kn,"CAN-SKIP-UNTIL")!=null:!1,di=Kn?Lp(Kn,"CAN-BLOCK-RELOAD")!=null:!1,ki=wd(n.g,"EXT-X-MEDIA-SEQUENCE",0),fi=aM(ki,ln),mi=fi.gb,Gr=fi.hb,ho.return({stream:Ut,type:d,tg:[],$:r,fc:Ln,yb:qn,Hd:xr,Gd:di,fd:!1,De:-1,gb:mi,hb:Gr,$d:yt,df:!1})}})}function aM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function sM(e,t,n,r,u,c,d,h,E,A,k,G){var te=cT(n,t)||fT(n),Y=[];if(E){E=m(E.split(","));for(var ve=E.next();!ve.done;ve=E.next())Y.push(ve.value)}return E=void 0,ve=null,n==vr?E=Y.includes("public.accessibility.transcribes-spoken-dialog")&&Y.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":Y.includes("public.accessibility.describes-video")&&(ve="visually impaired"),Y.length||E!=="subtitle"||Y.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:te,codecs:t,kind:n==vr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Cr(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Y,forced:A,channelsCount:d,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ve,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Id(e),e}function uM(e,t,n,r,u){var c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn;return Oe(function(Kn){switch(Kn.g){case 1:if(c=new Map,t.segments){for(d=m(t.segments),h=d.next();!h.done;h=d.next())if(E=h.value,A=zs(E.g,"EXT-X-KEY"),k=null,A.length)for(k=lT(e,t,E.g,r,u),G=m(A),te=G.next();!te.done;te=G.next())Y=te.value,c.set(Y,k)}Pe=ve=!1,xe=[],Ge=new Set,Te=m(c),We=Te.next();case 2:if(We.done){Kn.u(4);break}if(Ue=We.value,gt=m(Ue),Rt=gt.next().value,Ht=gt.next().value,Ut=Rt,yt=Ht,jt=oi(Ut,"METHOD"),jt=="NONE"){Kn.u(3);break}if(ve=!0,ln=zn(Ut,"KEYFORMAT")||"identity",gn=null,Hv(jt)){Pe=!0,Kn.u(3);break}if(ln!="identity"){gn=(Ln=vM[ln])?Ln(Ut,n):null,Kn.u(6);break}return N(Kn,pM(e,Ut,n,r,yt,u),8);case 8:gn=Kn.h;case 6:if(gn){if(gn.keyIds)for(Mn=m(gn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,Ge.add(Yn);xe.push(gn)}case 3:We=Te.next(),Kn.u(2);break;case 4:return Kn.return({drmInfos:xe,keyIds:Ge,encrypted:ve,Tg:Pe})}})}function lM(e,t,n,r,u){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var c=0,d=zn(t,"IV","");if(d){var h=hu(d.substr(2));if(h.byteLength!=16)throw new pt(2,4,4048)}else c=wd(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(oi(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var A,k,G,te,Y,ve,Pe;return Oe(function(xe){if(xe.g==1)return A=ql(r(),oi(t,"URI"),u),k=A.sort().join(""),e.da.has(k)||(G=Li(A,e.g.retryParameters),te=Kl(e,G,6),e.da.set(k,te)),N(xe,e.da.get(k),2);if(xe.g!=3){if(Y=xe.h,!Y.data||Y.data.byteLength!=E.bitsKey/8)throw new pt(2,4,4049);return ve={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Pe=E,N(xe,p.crypto.subtle.importKey("raw",Y.data,ve,!0,["decrypt"]),3)}Pe.cryptoKey=xe.h,E.fetchKey=void 0,X(xe)})},e.ba.set(n,E)}return e.ba.get(n)}function uT(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=No(r[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=No(t.g,"EXT-X-TARGETDURATION"),!r)throw new pt(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=No(t.g,"EXT-X-PART-INF"))&&(e.L=Number(oi(u,"PART-TARGET"))),t=No(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(oi(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?Lp(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(r,e.Ha)}function cM(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function lT(e,t,n,r,u){var c=No(n,"EXT-X-MAP");if(!c)return null;var d=oi(c,"URI"),h=ql(r(),d,u);if(d=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(d)){var E=void 0,A=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?Hv(oi(k,"METHOD"))&&k.id<c.id&&(E=lM(e,k,t,r,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(A=k);t=H5(h,c,A,E),e.Y.set(d,t)}return e.Y.get(d)}function H5(e,t,n,r){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new dt(function(){return e},u,c,null,null,null,r)}function K5(e,t,n,r,u,c,d,h,E){var A=r.g,k=No(A,"EXTINF"),G=0,te=0,Y=null;r.rb.length&&!e.B&&He("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ve=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Pe=No(A,"EXT-X-PROGRAM-DATE-TIME");Pe&&Pe.value&&(ve=$f(Pe.value))}var xe=Bt;if(No(A,"EXT-X-GAP")&&(xe=2),!k){if(r.rb.length==0)throw new pt(2,4,4024,"EXTINF");if(!e.B)return null}var Ge=[];Pe=!1;var Te=null,We=!1,Ue=!1;if(e.B&&r.rb.length){G=(d.mimeType=="video/mp4"||d.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var gt=ve,Rt={},Ht=0;Ht<r.rb.length;Rt={Qc:Rt.Qc,yd:Rt.yd},Ht++){var Ut=r.rb[Ht],yt=Ht==0?n:Ge[Ge.length-1],jt=Ht==0?u:yt.endTime,ln=Number(zn(Ut,"DURATION"))||e.L;if(ln){var gn=jt+ln,Ln=0,Mn=null;if(Ut.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Ut,"BYTERANGE-START"))?Number(Ln):0,(yt=zn(Ut,"BYTERANGE-LENGTH"))?Mn=Ln+Number(yt)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Ut,"BYTERANGE"),Mn=m(fM(yt,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),Rt.yd=zn(Ut,"URI"),Rt.yd){yt=Bt,zn(Ut,"GAP")=="YES"&&(yt=2,We=!0),Rt.Qc=null;var qn=function(Kn){return function(){return Kn.Qc==null&&(Kn.Qc=ql(h(),Kn.yd,c)),Kn.Qc}}(Rt);G&&0<=Ln&&Mn!=null&&(Te=qn,Pe=!0),jt=new Je(jt,gn,qn,Ln,Mn,t,0,0,1/0,[],"",null,gt,yt,E),Ut.name=="EXT-X-PRELOAD-HINT"&&(jt.ef(),Ue=!0),zn(Ut,"INDEPENDENT")!="YES"&&0<Ht&&jt.Zd(),Ge.push(jt),gt&&(gt+=ln)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(Ge.length)G=Ge[Ge.length-1].endTime;else return null;Pe&&(We||Ge[0].Aa!=0?(Pe=!1,Te=null):Ge=[]),(k=No(A,"EXT-X-BYTERANGE"))?(Y=m(fM(n,k.value)),te=Y.next().value,Y=Y.next().value):Ge.length&&(te=Ge[0].Aa,Y=Ge[Ge.length-1].ja),n="",k=null,d.type=="image"&&(n="1x1",d=No(A,"EXT-X-TILES"))&&(n=oi(d,"LAYOUT"),(d=zn(d,"DURATION"))&&(k=Number(d)));var Yn=null;return t=new Je(u,G,function(){return Te?Te():(Yn==null&&(Yn=ql(h(),r.h,c)),Yn||[])},te,Y,t,0,0,1/0,Ge,n,k,ve,xe,E,0<Ge.length&&!!r.h),Pe&&(e.lb=!0,t.lg(),Ue&&t.ef()),t}function fM(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,r=n+t-1),[n,r]}function dM(e,t,n,r,u,c,d){var h=t.segments,E=void 0,A=wd(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=wd(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=No(t.g,"EXT-X-SKIP"),te=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,Y=k+te,ve=0;xa(e)&&r.has(Y)&&(ve=r.get(Y)),ve===0&&e.qa==Vv&&0<r.size&&!r.has(Y)&&(ve=e.l.qb());var Pe=[],xe=null;G=[];for(var Ge=0;Ge<h.length;Ge++){var Te=h[Ge],We=Ge==0?ve:xe.endTime;Y=k+te+Ge,No(Te.g,"EXT-X-DISCONTINUITY")&&A++;for(var Ue=m(Te.g),gt=Ue.next();!gt.done;gt=Ue.next())gt=gt.value,gt.name=="EXT-X-KEY"&&(Hv(oi(gt,"METHOD"))?E=lM(e,gt,t,c,u):E=void 0);r.set(Y,We),Ue=lT(e,t,Te.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),(We=K5(e,Ue,xe,Te,We,u,n,c,E))&&((xe=wd(Te.g,"EXT-X-BITRATE"))?G.push({bitrate:xe,duration:We.endTime-We.startTime}):G.length&&(xe=G.pop(),xe.duration+=We.endTime-We.startTime,G.push(xe)),xe=We,We.j=A,Gv(e,d)&&e.I!=null&&Y<e.I||Pe.push(We))}if(t=void 0,G.length&&(t=G.reduce(function(Rt,Ht){return Rt+Ht.duration},0),t=Math.round(G.reduce(function(Rt,Ht){return Rt+Ht.bitrate*Ht.duration},0)/t*1e3)),G=Pe.some(function(Rt){return Rt.h!=null})){for(n={},r=0;r<Pe.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},r++)if(n.Cb=Pe[r],n.Cb.h==null)for(n.Ic=0,n.Jc=r,u=function(Rt){return function(){var Ht=Pe[Rt.Jc];if(Ht){if(Ht.h!=null)return Ht.h+Rt.Ic;Rt.Ic-=Ht.endTime-Ht.startTime,Rt.Jc+=1}return null}}(n),n.Fc=0,n.td=r,c=function(Rt){return function(){var Ht=Pe[Rt.td];if(Ht){if(Ht!=Rt.Cb&&(Rt.Fc+=Ht.endTime-Ht.startTime),Ht.h!=null)return Ht.h+Rt.Fc;--Rt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Pe),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!Gv(e,d))for(e=m(Pe),r=e.next();!r.done;r=e.next())r.value.Ff(n);return{segments:Pe,bandwidth:t}}function cT(e,t){if(e==vr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function fT(e){return e==vr?"text/vtt":mM[e].mp4}function V5(e,t,n,r,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:return d=$a,h=Math.trunc((r.segments.length-1)/2),E=ql(c(),r.segments[h].h,u),A=new ui(E[0]),k=A.Pa.split(".").pop(),G=mM[t],(te=G[k])||(te=gM[k])||(te=cT(t,n))?We.return(te):(ve=1,Pe=Li(E,e.g.retryParameters),ce(We,2),Pe.method="HEAD",N(We,Kl(e,Pe,d,{type:ve}),4));case 4:xe=We.h,Y=xe.headers["content-type"],he(We,3);break;case 2:if(Ge=be(We),!Ge||Ge.code!=1002&&Ge.code!=1001){We.u(3);break}return Pe.method="GET",N(We,Kl(e,Pe,d,{type:ve}),6);case 6:Te=We.h,Y=Te.headers["content-type"];case 3:return Y?We.return(Y.split(";")[0]):We.return(fT(t))}})}function hM(e,t,n,r,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function dT(e,t,n){return Kl(e,Li(t,e.g.retryParameters),0,{type:n?2:3})}function z5(e){var t,n,r,u,c,d;Oe(function(h){switch(h.g){case 1:return e.i?(ce(h,2),t=Date.now(),N(h,e.update(),4)):h.return();case 4:n=Date.now(),xa(e)&&(r=(n-t)/1e3,e.bb.sample(1,r),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),he(h,3);break;case 2:if(d=be(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(d),h.return();d.severity=1,e.i.onError(d),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),X(h)}})}function xa(e){return e.qa!=Kv}function qv(e,t){e.qa=t,e.l&&e.l.Ec(!xa(e)),xa(e)||e.s.stop()}function Kl(e,t,n,r){if(!e.N)throw new pt(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),mu(e.N,t),t.promise}function Hv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function pM(e,t,n,r,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){switch(gt.g){case 1:if(n=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);if(d=oi(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(d))return gt.return(null);if(E=ql(r(),oi(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){A=Os(qo(E[0].split("data:text/plain;base64,").pop())),gt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Li(E,e.g.retryParameters),te=Kl(e,G,6),e.ia.set(k,te)),N(gt,e.ia.get(k),3);case 3:Y=gt.h,A=Os(Y.data);case 2:if(ve="00000000000000000000000000000000",!u){gt.u(4);break}if(e.pa.has(u)){Pe=e.pa.get(u),gt.u(5);break}return xe=cp(u.$(),u.ac(),u.Yb(),e.g.retryParameters),Ge=$a,N(gt,Kl(e,xe,Ge,{type:0}),6);case 6:Te=gt.h,Pe=b5(Te.data),e.pa.set(u,Pe);case 5:Pe&&(ve=Pe);case 4:return We=new Map,We.set(ve,A),Ue="cenc",d=="SAMPLE-AES"&&(Ue="cbcs"),gt.return(xh(We,Ue))}})}re("shaka.hls.HlsParser",jv);var gM={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},mM={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},vM={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);return e=oi(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),Uu("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=oi(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=oi(e,"URI"),t=iT(t),t=Qn(t.data),n=Uu("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=oi(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=oi(e,"URI"),e=iT(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=zf(e,t,new Set,0),Uu("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Kv="VOD",yM="EVENT",Vv="LIVE",Y5={Pg:Kv,Pi:yM,Xi:Vv};ke["application/x-mpegurl"]=function(){return new jv},ke["application/vnd.apple.mpegurl"]=function(){return new jv};function W5(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function zv(e){if(e=EM(e))e:{e=m(Ra(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=ua(t.value,"LA_URL")){e=Ri(t);break e}e=""}else e="";return e}function EM(e){return e=qo(Ri(e)),e=W5(e).filter(function(t){return t.type===$5})[0],e?(e=Ka(e.value,!0),(e=Bl(e,"WRMHEADER"))?e:null):null}var $5=1,X5=new Map().set("com.microsoft.playready",zv).set("com.microsoft.playready.recommendation",zv).set("com.microsoft.playready.software",zv).set("com.microsoft.playready.hardware",zv);function bd(e){if(!wM){wM=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);Yv=mr("ftyp",t,r,t,n),t=mr("dref",uZ),hT=mr("dinf",t)}this.g=e}function Cd(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,d=r.value;r=mr;var h=d.id+1,E=d.stream.width||0,A=d.stream.height||0;d.type=="audio"&&(A=E=0);var k=d.duration*d.timescale,G=Math.floor(k/(Vl+1));switch(k=Math.floor(k%(Vl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(ai(h,4)),[0,0,0,0],T(ai(G,4)),T(ai(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(ai(E,2)),[0,0],T(ai(A,2)),[0,0])),h=mr("tkhd",h),E=mr,G=d.duration*d.timescale,A=Math.floor(G/(Vl+1)),G=Math.floor(G%(Vl+1)),k=d.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(ai(d.timescale,4)),T(ai(A,4)),T(ai(G,4)),T(ai(k,2)),[0,0])),A=mr("mdhd",A),G=d,k=new Uint8Array([]),G.type){case"video":k=J5;break;case"audio":k=eZ}G=mr("hdlr",k);e:{switch(d.type){case"video":d=mr("minf",mr("vmhd",oZ),hT,_M(d));break e;case"audio":d=mr("minf",mr("smhd",aZ),hT,_M(d));break e}d=new Uint8Array([])}d=E("mdia",A,G,d),r=r("trak",h,d),c.call(u,r)}for(t=ci.apply(Oi,T(t)),c=e.g[0],n=mr,r=c.duration*c.timescale,u=Math.floor(r/(Vl+1)),r=Math.floor(r%(Vl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(ai(c.timescale,4)),T(ai(u,4)),T(ai(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),r=[],e=m(e.g),E=e.next();!E.done;E=e.next())d=r,h=d.push,E=new Uint8Array([0,0,0,0].concat(T(ai(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(d,E);if(e=ci.apply(Oi,T(r)),e=mr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),d=c.next();!d.done;d=c.next())if(d=d.value,d.initData)for(d=m(d.initData),h=d.next();!h.done;h=d.next())r.push(h.value.initData);c=ci.apply(Oi,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(Yv.byteLength+e.byteLength),t.set(Yv),t.set(e,Yv.byteLength),t}function _M(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,d=[],h=[],E=0,A=0,k=0,G=0;G<e.Sa.length;G++){var te=SM(e.Sa[G]);switch(te[0]&31){case 7:d.push(te),c+=te.length+2;break;case 8:h.push(te),c+=te.length+2}}for(0<d.length&&(E=d[0][1],k=d[0][2],A=d[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=A,c[G++]=255,c[G++]=224|d.length,E=0;E<d.length;E++)c[G++]=(d[E].length&65280)>>8,c[G++]=d[E].length&255,c.set(d[E],G),G+=d[E].length;for(c[G++]=h.length,d=0;d<h.length;d++)c[G++]=(h[d].length&65280)>>8,c[G++]=h[d].length&255,c.set(h[d],G),G+=h[d].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(ai(n,2)),T(ai(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=TM(e),d=new Uint8Array([]),e.encrypted&&(d=Rd(e),r="encv"),n=mr(r,n,u,h,d)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(ai(r,2)),T(ai(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=TM(e),d=new Uint8Array([]),e.encrypted&&(d=Rd(e),u="encv"),n=mr(u,r,n,h,d));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",kp(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,kp(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,kp(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,kp(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,r=e.id+1,u=e.stream.channelsCount||2,d=e.stream.audioSamplingRate||44100,E=Bu("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[d],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=A[2*d]),d=parseInt(E.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(ai(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,d<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,kp(e),n,u)),n=e}return e=mr("stsd",sZ,n),t("stbl",e,mr("stts",tZ),mr("stsc",nZ),mr("stsz",iZ),mr("stco",rZ))}function TM(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(ai(e.xa,4)),T(ai(t,4)))),mr("pasp",e)}function kp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(ai(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Rd(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(ai(r,4)))),n=mr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=mr("schm",r),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var d=e.next();!d.done;d=e.next())if((d=d.value)&&d.keyIds&&d.keyIds.size){d=m(d.keyIds);for(var h=d.next();!h.done;h=d.next())c=SM(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Fp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=mr,d=new Uint8Array([0,0,0,0].concat(T(ai(n.data?n.data.jb:0,4))));d=mr("mfhd",d);var h,E=n.data?n.data.Ra:[],A=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;A[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",A);var G=E.length+92;A=mr,h=new Uint8Array([0,0,0,58].concat(T(ai(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var te=Math.floor(k%(Vl+1));k=new Uint8Array([1,0,0,0].concat(T(ai(Math.floor(k/(Vl+1)),4)),T(ai(te,4)))),k=mr("tfdt",k);var Y=G;G=n.data?n.data.Ra:[],te=G.length;var ve=12+16*te,Pe=new Uint8Array(ve);for(Y+=8+ve,Pe.set([n.type==="video"?1:0,0,15,1].concat(T(ai(te,4)),T(ai(Y,4))),0),Y=0;Y<te;Y++){var xe=G[Y];ve=ai(xe.duration,4);var Ge=ai(xe.size,4),Te=xe.flags;xe=ai(xe.Ta,4),Pe.set([].concat(T(ve),T(Ge),[Te.Va<<2|Te.Ka,Te.Na<<6|Te.Ma<<4|Te.Wa,Te.Ja&61440,Te.Ja&15],T(xe)),12+16*Y)}G=mr("trun",Pe),E=A("traf",h,k,G,E),c=c("moof",d,E),u.call(r,t,[c,Q5(n)])}return ci.apply(Oi,T(t))}function Q5(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=ci.apply(Oi,T(e)),mr("mdat",e)}function ai(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function SM(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=Qe.apply(1,arguments),n=AM[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],AM[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var wM=!1,Vl=Math.pow(2,32)-1,AM={},J5=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),eZ=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),tZ=new Uint8Array([0,0,0,0,0,0,0,0]),nZ=new Uint8Array([0,0,0,0,0,0,0,0]),rZ=new Uint8Array([0,0,0,0,0,0,0,0]),iZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),oZ=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),aZ=new Uint8Array([0,0,0,0,0,0,0,0]),sZ=new Uint8Array([0,0,0,0,0,0,0,1]),Yv=new Uint8Array([]),uZ=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),hT=new Uint8Array([]);function pT(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){lZ(e)}),this.A=new kl,this.m=new Map}g=pT.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return Oe(function(r){if(r.g==1)return n.l=[e],n.h=t,N(r,gT(n),2);if(!n.h)throw new pt(2,7,7001);return r.return(n.j)})};function lZ(e){var t;Oe(function(n){switch(n.g){case 1:return ce(n,2),N(n,gT(e),4);case 4:he(n,3);break;case 2:t=be(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return ce(n,2),N(n,gT(e),4);if(n.g!=2)return he(n,0);if(t=be(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function gT(e){var t,n,r,u,c,d,h;return Oe(function(E){if(E.g==1)return t=Li(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5}),mu(e.A,u),N(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=Jm){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=xx(k,"SmoothStreamingMedia"),!k)throw new pt(2,4,4046,A);G(k),k=za(k.outerHTML)}var te=ep(k,"SmoothStreamingMedia");if(!te)throw new pt(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=ev&&A(te),e.i||(e.i=new tr(null,0)),A=_r(te,"IsLive",tp,!1))throw new pt(2,4,4047);e.i.Ec(!A),G=_r(te,"TimeScale",Ro,1e7),k=_r(te,"DVRWindowLength",Ro),A&&(k===0||isNaN(k))&&(k=1/0);var Y=_r(te,"CanSeek",tp,!1);k===0&&Y&&(k=1/0),Y=null,k&&0<k&&(Y=k/G),A&&!isNaN(e.g.availabilityWindowOverride)&&(Y=e.g.availabilityWindowOverride),Y==null&&(Y=1/0),e.i.je(Y),k=_r(te,"Duration",Ro,1/0),A||e.i.Za(k/G),A={variants:[],textStreams:[],timescale:G,duration:k/G},Y=$r(te,"Protection");var ve;for(G=e.g.mss.keySystemsBySystemId,k=[],Y=m(Y),ve=Y.next();!ve.done;ve=Y.next())k=k.concat($r(ve.value,"ProtectionHeader"));if(k.length){for(Y=[],ve=0;ve<k.length;ve++){var Pe=k[ve],xe=Pe.attributes.SystemID.toLowerCase(),Ge=G[xe];if(Ge){var Te=EM(Pe);if(Te)e:{Te=m(Ra(Te,"DATA"));for(var We=Te.next();!We.done;We=Te.next())if(We=ua(We.value,"KID")){Te=qo(Ri(We)),Te=new Uint8Array([Te[3],Te[2],Te[1],Te[0],Te[5],Te[4],Te[7],Te[6]].concat(T(Te.slice(8)))),Te=Os(Te);break e}Te=null}else Te=null;We=qo(Ri(Pe)),xe=hu(xe.replace(/-/g,"")),xe=[{initData:zf(We,xe,new Set,0),initDataType:"cenc",keyId:Te}],xe=Uu(Ge,"cenc",xe),Te&&xe.keyIds.add(Te),(Ge=X5.get(Ge))&&(xe.licenseServerUri=Ge(Pe)),Y.push(xe)}}G=Y}else G=[];for(ve=G,Y=[],G=[],k=[],te=$r(te,"StreamIndex"),te=m(te),Pe=te.next();!Pe.done;Pe=te.next()){Pe=Pe.value,Ge=$r(Pe,"QualityLevel"),xe=A.timescale,Te=A.duration,We=$r(Pe,"c");for(var Ue=[],gt=0,Rt=0;Rt<We.length;++Rt){var Ht=We[Rt],Ut=We[Rt+1],yt=_r(Ht,"t",Ro),jt=_r(Ht,"d",Ro);if(Ht=_r(Ht,"r",Ju),!jt)break;if(yt=yt!=null?yt:gt,Ht=Ht||0,0>Ht)if(Ut){if(Ut=_r(Ut,"t",Ro),Ut==null)break;if(yt>=Ut)break;Ht=Math.ceil((Ut-yt)/jt)-1}else{if(Te==1/0)break;if(yt/xe>=Te)break;Ht=Math.ceil((Te*xe-yt)/jt)-1}for(Ut=0;Ut<=Ht;++Ut)gt=yt+jt,Ue.push({start:yt/xe,end:gt/xe,Kf:yt}),yt=gt}for(xe=Ue,Ge=m(Ge),Te=Ge.next();!Te.done;Te=Ge.next())(Te=cZ(e,Pe,Te.value,xe,ve,A))&&(Te.type!="audio"||e.g.disableAudio?Te.type!="video"||e.g.disableVideo?Te.type!=vr||e.g.disableText||k.push(Te):G.push(Te):Y.push(Te))}for(te=[],Y=m(0<Y.length?Y:[null]),ve=Y.next();!ve.done;ve=Y.next())for(ve=ve.value,Pe=m(0<G.length?G:[null]),Te=Pe.next();!Te.done;Te=Pe.next())Ge=te,xe=Ge.push,Te=Te.value,We=0,ve&&ve.bandwidth&&0<ve.bandwidth&&(We+=ve.bandwidth),Te&&Te.bandwidth&&0<Te.bandwidth&&(We+=Te.bandwidth),Te={id:e.s++,language:ve?ve.language:"und",disabledUntilTime:0,primary:!!ve&&ve.primary||!!Te&&Te.primary,audio:ve,video:Te,bandwidth:We,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},xe.call(Ge,Te);A.variants=te,A.textStreams=k,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),d=Date.now(),h=(d-r)/1e3,e.B.sample(1,h),X(E)})}function cZ(e,t,n,r,u,c){var d=t.attributes.Type;if(d!=="audio"&&d!=="video"&&d!=="text")return He("Ignoring unrecognized type:",d),null;var h=t.attributes.Language,E=e.s++,A=_r(n,"Bitrate",Bs),k=_r(n,"MaxWidth",Bs),G=_r(n,"MaxHeight",Bs),te=_r(n,"Channels",Bs),Y=_r(n,"SamplingRate",Bs),ve=c.duration;r.length&&(ve=r[r.length-1].end-r[0].start);var Pe=e.i.getDuration();e.i.Za(Math.min(ve,Pe));var xe={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Cr(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:te,audioSamplingRate:Y,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ve,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=mZ[u])&&xe.roles.push(u),u==="main"&&(xe.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(d==="audio")u="AAC";else if(d==="video")return He('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!gZ.includes(u.toUpperCase()))return He("Codec not supported:",u),null;switch(n=fZ(n,d,u,xe),xe.mssPrivateData.codecPrivateData=n,d){case"audio":if(!n)return He("Quality unsupported without CodecPrivateData",d),null;xe.type="audio",xe.mimeType="mss/audio/mp4",xe.codecs=dZ(u,n);break;case"video":if(!n)return He("Quality unsupported without CodecPrivateData",d),null;xe.type="video",xe.mimeType="mss/video/mp4",xe.codecs=hZ(n);break;case"text":xe.type=vr,xe.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(xe.codecs="stpp")}return xe.fullMimeTypes.add(wi(xe.mimeType,xe.codecs)),xe.createSegmentIndex=function(){if(xe.segmentIndex)return Promise.resolve();if(e.m.has(xe.id))var Ge=e.m.get(xe.id);else Ge=[],xe.type=="video"&&(Ge=xe.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Ge={id:xe.id,type:xe.type,codecs:xe.codecs,encrypted:xe.encrypted,timescale:xe.mssPrivateData.timescale,duration:xe.mssPrivateData.duration,Sa:Ge,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:xe},Ge=Cd(new bd([Ge])),e.m.set(xe.id,Ge);return Ge=pZ(e,new dt(function(){return[]},0,null,null,void 0,Ge),xe,t,r),xe.segmentIndex=new wr(Ge),Promise.resolve()},xe.closeSegmentIndex=function(){xe.segmentIndex&&(xe.segmentIndex.release(),xe.segmentIndex=null)},xe}function fZ(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function dZ(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function hZ(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function pZ(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];var d={};u=m(u);for(var h=u.next();!h.done;d={Pc:d.Pc},h=u.next())d.Pc=h.value,r.push(new Je(d.Pc.start,d.Pc.end,function(E){return function(){return fo(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return r}re("shaka.mss.MssParser",pT);var gZ="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),mZ={CAPT:"main",SUBT:"alternate",DESC:"main"};ke["application/vnd.ms-sstr+xml"]=function(){return new pT};function IM(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=Va(t)}catch(d){}throw new pt(n==401||n==403?2:1,1,1001,r,n,u,e,c)}function mT(){}function Wv(e,t,n,r,u){var c=new TZ;Fl(t.headers).forEach(function(A,k){c.append(k,A)});var d=new EZ,h={Rf:!1,Jg:!1};if(e=vZ(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:d.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,r,u,t.streamDataCallback),e=new gi(e,function(){return h.Rf=!0,d.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,d.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function vZ(e,t,n,r,u,c,d){var h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:return h=yZ,E=_Z,te=G=0,Y=Date.now(),ce(Ue,2),N(Ue,h(e,n),4);case 4:if(A=Ue.h,c(bM(A.headers)),n.method=="HEAD"){Ue.u(5);break}return ve=A.clone().body.getReader(),xe=(Pe=A.headers.get("Content-Length"))?parseInt(Pe,10):0,Ge=function(gt){function Rt(){var Ht,Ut;return Oe(function(yt){switch(yt.g){case 1:return ce(yt,2),N(yt,ve.read(),4);case 4:Ht=yt.h,he(yt,3);break;case 2:return be(yt),yt.return();case 3:if(Ht.done){yt.u(5);break}if(G+=Ht.value.byteLength,!d){yt.u(5);break}return N(yt,d(Ht.value),5);case 5:Ut=Date.now(),(100<Ut-Y||Ht.done)&&(u(Ut-Y,G-te,xe-G),te=G,Y=Ut),Ht.done?gt.close():(gt.enqueue(Ht.value),Rt()),X(yt)}})}Rt()},new E({start:Ge}),N(Ue,A.arrayBuffer(),6);case 6:k=Ue.h;case 5:he(Ue,3);break;case 2:throw Te=be(Ue),r.Rf?new pt(1,1,7001,e,t):r.Jg?new pt(1,1,1003,e,t):new pt(1,1,1002,e,Te,t);case 3:return We=bM(A.headers),Ue.return(IM(We,k,A.status,e,A.url,t))}})}function bM(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function CM(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}re("shaka.net.HttpFetchPlugin",mT),mT.isSupported=CM,mT.parse=Wv;var yZ=p.fetch,EZ=p.AbortController,_Z=p.ReadableStream,TZ=p.Headers;CM()&&(Ho("http",Wv,2,!0),Ho("https",Wv,2,!0),Ho("blob",Wv,2,!0));function RM(){}function $v(e,t,n,r,u){var c=new SZ,d=Date.now(),h=0,E=new Promise(function(A,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new pt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var Y=NM(c);u(Y),G=!0}},c.onload=function(){var Y=NM(c),ve=c.response;try{var Pe=IM(Y,ve,c.status,e,c.responseURL,n);A(Pe)}catch(xe){k(xe)}},c.onerror=function(Y){k(new pt(1,1,1002,e,Y,n))},c.ontimeout=function(){k(new pt(1,1,1003,e,n))},c.onprogress=function(Y){var ve=Date.now();(100<ve-d||Y.lengthComputable&&Y.loaded==Y.total)&&(r(ve-d,Y.loaded-h,Y.total-Y.loaded),h=Y.loaded,d=ve)};for(var te in t.headers)c.setRequestHeader(te.toLowerCase(),t.headers[te]);c.send(t.body)});return new gi(E,function(){return c.abort(),Promise.resolve()})}function NM(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}re("shaka.net.HttpXHRPlugin",RM),RM.parse=$v;var SZ=p.XMLHttpRequest;Ho("http",$v,1,!0),Ho("https",$v,1,!0),Ho("blob",$v,1,!0);function xM(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function vT(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function wZ(e,t){return cp(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function MM(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function DM(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}MM.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function PM(e){var t=this;this.o=e,this.j=new Map,this.i=new Xu(function(){return yT(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new MM}PM.prototype.destroy=function(){return this.i.destroy()};function AZ(e,t,n){e.m=t,e.l=n}function yT(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function IZ(e,t,n,r,u,c){jr(e.i);var d=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,A,k,G,te,Y;return Oe(function(ve){if(ve.g==1)return N(ve,CZ(e,n),2);if(h=ve.h,e.i.g)throw new pt(2,9,7001);if(u)for(k in E=Qn(h),A=new km(E),A.data)G=Number(k),te=A.data[G],Y=A.g[G],e.l(te,Y);e.g.close(r,h.byteLength);var Pe=e.g;return e.m(Pe.i==0?0:Pe.j/Pe.i,e.g.h),ve.return(c(h))})});e.j.set(t,d)}function bZ(e){return Oe(function(t){return t.g==1?N(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function CZ(e,t){var n,r,u,c;return Oe(function(d){return d.g==1?(n=$a,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),N(d,r.promise,2)):(c=d.h,mn(e.h,u),d.return(c.data))})}function Xv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Xv.prototype.abort=function(){var e=this;return Oe(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),N(t,e.g,4)}if(t.g!=2)return he(t,0);be(t),X(t)})};function ET(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Oe(function(d){if(d.g==1)return u.result==null?(n(),d.return()):(c=u.result,N(d,t(c.key,c.value,c),2));c.continue(),X(d)})}})}Xv.prototype.store=function(){return this.h},Xv.prototype.promise=function(){return this.g};function _T(e){this.h=e,this.g=[]}_T.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Wc(e,t){return Qv(e,t,"readwrite")}function Qv(e,t,n){n=e.h.transaction([t],n);var r=new Xv(n,t);return e.g.push(r),r.promise().then(function(){mn(e.g,r)},function(){mn(e.g,r)}),r}function $c(e,t,n){this.h=new _T(e),this.i=t,this.g=n}g=$c.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return OM(this.i)},g.removeSegments=function(e,t){return LM(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return Oe(function(r){return r.g==1?N(r,kM(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return OM(this.g)},g.updateManifest=function(){return Promise.reject(new pt(2,9,9016,"Cannot modify values in "+this.g))};function RZ(e,t,n){e=Wc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=Wc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},g.removeManifests=function(e,t){return LM(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return Oe(function(r){return r.g==1?N(r,kM(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return Oe(function(r){return r.g==1?(t=Qv(e.h,e.g,"readonly"),n=new Map,N(r,ET(t,function(u,c){var d;return Oe(function(h){if(h.g==1)return N(h,e.Yc(c),2);d=h.h,n.set(u,d),X(h)})}),2)):r.g!=3?N(r,t.promise(),3):r.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function OM(e){return Promise.reject(new pt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,r,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(r=Wc(n.h,e),u=r.store(),c=[],d={},h=m(t),E=h.next();!E.done;d={zd:d.zd},E=h.next())A=E.value,d.zd=u.add(A),d.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(d);return N(k,r.promise(),2)}return k.return(c)})};function LM(e,t,n,r){e=Wc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(d){return function(){return r(d.xd)}}(u);return e.promise()}function kM(e,t,n){var r,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(r=Qv(e.h,t,"readonly"),u=r.store(),c={},d=[],h={},E=m(n),A=E.next();!A.done;h={Nc:h.Nc,Lc:h.Lc},A=E.next())h.Lc=A.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&d.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return N(k,r.promise(),2)}if(d.length)throw new pt(2,9,9012,"Could not find values for "+d);return k.return(n.map(function(G){return c[G]}))})}function Up(e){this.g=new _T(e)}Up.prototype.destroy=function(){return this.g.destroy()},Up.prototype.getAll=function(){var e=this,t,n;return Oe(function(r){return r.g==1?(t=Qv(e.g,"session-ids","readonly"),n=[],N(r,ET(t,function(u,c){n.push(c)}),2)):r.g!=3?N(r,t.promise(),3):r.return(n)})},Up.prototype.add=function(e){var t=Wc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},Up.prototype.remove=function(e){var t=this,n;return Oe(function(r){return r.g==1?(n=Wc(t.g,"session-ids"),N(r,ET(n,function(u,c,d){e.includes(c.sessionId)&&d.delete()}),2)):N(r,n.promise(),0)})};function Vo(){this.g=new Map}Vo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Vo.prototype.init=function(){var e=this;Bp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function FM(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:r,Ba:c},Ba:u})})}),t)return t;throw new pt(2,9,9013,"Could not find a cell that supports add-operations")}function NZ(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({fb:r,Ba:c},u)})})}function Jv(e,t,n){if(e=e.g.get(t),!e)throw new pt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new pt(2,9,9013,"Could not find cell with name "+n);return t}function xZ(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function MZ(e){var t=Array.from(e.g.keys());if(!t.length)throw new pt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function DZ(e){var t,n,r;return Oe(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Bp,r.forEach(function(c){(c=c())&&t.push(c)})),N(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):N(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function UM(e,t){Bp.set(e,t)}re("shaka.offline.StorageMuxer",Vo),Vo.unregister=function(e){Bp.delete(e)},Vo.register=UM,Vo.prototype.destroy=Vo.prototype.destroy;var Bp=new Map;function jp(){$c.apply(this,arguments)}z(jp,$c),jp.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Oe(function(d){return r=Wc(n.h,n.g),u=r.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new pt(2,9,9012,"Could not find values for "+e))},N(d,Promise.all([r.promise(),c]),0)})},jp.prototype.Yc=function(e){var t,n,r,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=PZ(e.periods[n],u),t.push(c);return N(h,Sx(t),2)}return d=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:d,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function PZ(e,t){LZ(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return OZ(u,e.startTime,t)})}function OZ(e,t,n){var r=e.initSegmentUri?BM(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(d){var h=BM(d.uri);return{startTime:t+d.startTime,endTime:t+d.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}jp.prototype.Tf=function(e){return{data:e.data}};function BM(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new pt(2,9,9004,"Could not parse uri "+e)}function LZ(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(r=c.next();!r.done;r=c.next())r.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),r=c.next();!r.done;r=c.next())r.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var d=n++;r.variantIds.push(d),c.variantIds.push(d)}}}function ey(){$c.apply(this,arguments)}z(ey,$c),ey.prototype.Yc=function(e){var t,n,r,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var E=e.periods[n],A=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&A.push(kZ(G,E.startTime,E.startTime+u));c=A,t.push(c)}return N(h,Sx(t),2)}return d=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:d,sequenceMode:!1})})};function kZ(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function TT(){$c.apply(this,arguments)}z(TT,$c),g=TT.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return RZ(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function jM(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=jM.prototype,g.init=function(){var e=this,t=new Rr,n=!1,r=new pr(function(){n=!0,t.reject(new pt(2,9,9017))});r.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var d=c.objectStoreNames;d=d.contains("manifest")&&d.contains("segment")?new jp(c,"segment","manifest"):null,e.g=d,d=c.objectStoreNames,d=d.contains("manifest-v2")&&d.contains("segment-v2")?new ey(c,"segment-v2","manifest-v2"):null,e.h=d,d=c.objectStoreNames,d=d.contains("manifest-v3")&&d.contains("segment-v3")?new ey(c,"segment-v3","manifest-v3"):null,e.i=d,d=c.objectStoreNames,d=d.contains("manifest-v5")&&d.contains("segment-v5")?new TT(c,"segment-v5","manifest-v5"):null,e.j=d,c=c.objectStoreNames.contains("session-ids")?new Up(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,d=m(["segment-v5","manifest-v5","session-ids"]),h=d.next();!h.done;h=d.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new pt(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return N(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),N(t,FZ(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,N(t,e.init(),0)}})};function FZ(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new pt(2,9,9001,t.error)),n.preventDefault()},e}UM("idb",function(){return oa()||ms()||!p.indexedDB?null:new jM});function wu(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}wu.prototype.fb=function(){return this.i},wu.prototype.Ba=function(){return this.h},wu.prototype.key=function(){return this.l},wu.prototype.toString=function(){return this.j};function ST(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new wu(t,n,r,Number(e[4])):null}function ZM(e,t){this.h=e,this.g=t}function GM(e,t){var n=new tr(null,0);n.Za(t.duration);var r=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});r=UZ(e,r,u,n),u=t.streams.filter(function(A){return A.type==vr}).map(function(A){return ty(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return ty(e,A,n)}),d=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=d),E.video&&E.video.encrypted&&(E.video.drmInfos=d);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function UZ(e,t,n,r){for(var u=new Set,c=m(t),d=c.next();!d.done;d=c.next()){var h=m(d.value.variantIds);for(d=h.next();!d.done;d=h.next())u.add(d.value)}for(c=m(n),d=c.next();!d.done;d=c.next())for(h=m(d.value.variantIds),d=h.next();!d.done;d=h.next())u.add(d.value);for(c=new Map,u=m(u),d=u.next();!d.done;d=u.next())d=d.value,c.set(d,{id:d,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,d=ty(e,u,r),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=d.language,u.primary=u.primary||d.primary,u.audio=d;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=ty(e,u,r),d=m(u.variantIds),u=d.next();!u.done;u=d.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function ty(e,t,n){var r=t.segments.map(function(u){return BZ(e,u,t)});return n.ld(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([wi(t.mimeType,t.codecs)])}}function BZ(e,t,n){var r=new wu("segment",e.h,e.g,t.dataKey);return e=new Je(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?jZ(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function jZ(e,t){var n=new wu("segment",e.h,e.g,t);return new dt(function(){return[n.toString()]},0,null)}function qM(){this.g=null}g=qM.prototype,g.configure=function(){},g.start=function(e,t){var n=this,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(r=ST(e),n.g=r,r==null||r.g!="manifest")throw new pt(2,1,9004,e);return u=new Vo,oe(k,2),N(k,u.init(),4);case 4:return N(k,Jv(u,r.fb(),r.Ba()),5);case 5:return c=k.h,N(k,c.getManifests([r.key()]),6);case 6:return d=k.h,h=d[0],E=new ZM(r.fb(),r.Ba()),A=GM(E,h),t.makeTextStreamsForClosedCaptions(A),k.return(A);case 2:return Xe(k),N(k,u.destroy(),7);case 7:Ae(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return r=n.g,u=new Vo,ce(k,2,3),N(k,u.init(),5);case 5:return N(k,Jv(u,r.fb(),r.Ba()),6);case 6:return c=k.h,N(k,c.getManifests([r.key()]),7);case 7:if(d=k.h,h=d[0],E=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!E||!A){k.u(3);break}return N(k,c.updateManifestExpiration(r.key(),t),3);case 3:return Xe(k),N(k,u.destroy(),10);case 10:Ae(k,0);break;case 2:be(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},ke["application/x-offline-manifest"]=function(){return new qM};function HM(){}function KM(e){var t=ST(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=$u(e)):e=t&&t.g=="segment"?ZZ(t.key(),t):gu(new pt(2,1,9004,e)),e}function ZZ(e,t){var n=new Vo;return $u(void 0).va(function(){return n.init()}).va(function(){return Jv(n,t.fb(),t.Ba())}).va(function(r){return r.getSegments([t.key()])}).va(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}re("shaka.offline.OfflineScheme",HM),HM.plugin=KM,Ho("offline",KM);function VM(e,t,n){var r,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:r=[];for(var k=[],G=m(n),te=G.next();!te.done;te=G.next()){te=te.value;for(var Y=!1,ve=m(k),Pe=ve.next();!Pe.done;Pe=ve.next())if(Pe=Pe.value,qZ(Pe.info,te)){Pe.sessionIds.push(te.sessionId),Y=!0;break}Y||k.push({info:te,sessionIds:[te.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){A.u(4);break}return d=c.value,h=GZ(e,t,d),N(A,h,5);case 5:E=A.h,r=r.concat(E),c=u.next(),A.u(2);break;case 4:return A.return(r)}})}function GZ(e,t,n){var r,u;return Oe(function(c){switch(c.g){case 1:return r=new Uc({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),r.configure(e),N(c,jm(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:he(c,3);break;case 2:return be(c),N(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],N(c,Promise.all(n.sessionIds.map(function(d){return Oe(function(h){if(h.g==1)return ce(h,2),N(h,ZE(r,d),4);if(h.g!=2)return u.push(d),he(h,0);be(h),X(h)})})),6);case 6:return N(c,r.destroy(),7);case 7:return c.return(u)}})}function qZ(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function HZ(e,t,n){var r=t.presentationTimeline.getDuration();return t=zM(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function wT(e,t){var n=GM(new ZM(e.fb(),e.Ba()),t),r=t.appMetadata||{};return n=zM(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function zM(e){var t=[],n=jf(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(Ml(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Dl(n.value));return t}function KZ(){this.g={}}function VZ(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function zZ(e,t){e.g[t.id]=t.bandwidth||2048}function YM(e,t){return e=e.g[t],e==null&&(e=0),e}function so(e){var t=this;if(e&&e.constructor!=dn)throw new pt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=id(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new Xu(function(){var r,u,c,d,h;return Oe(function(E){switch(E.g){case 1:return N(E,Promise.all(t.j.map(function(A){return yT(A)})),2);case 2:for(r=function(){},u=[],c=m(t.i),d=c.next();!d.done;d=c.next())h=d.value,u.push(h.then(r,r));return N(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return N(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(E)}})})}function AT(){if(Io())e:{for(var e=m(Bp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=so.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Qm(e,t)),qc(this.h,e)},g.getConfiguration=function(){var e=id();return qc(e,this.h,id()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new PM(this.g);return this.j.push(c),t=YZ(this,e,t||{},function(){var d;return Oe(function(h){return h.g==1?n?h.u(2):N(h,d_(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),d=Ie(e,n||null),h.return(d()))})},u,c),t=new gi(t,function(){return yT(c)}),t.finally(function(){mn(r.j,c)}),sG(this,t)};function YZ(e,t,n,r,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:return ny(),h=d=null,E=new Vo,G=k=A=null,ce(Ue,2,3),N(Ue,r(),5);case 5:return d=Ue.h,N(Ue,rG(e,t,d,u),6);case 6:if(te=Ue.h,yo(e),Y=!te.presentationTimeline.R()&&!te.presentationTimeline.dc(),!Y)throw new pt(2,9,9005,t);return N(Ue,e.rc(te,function(gt){G=G||gt},u),7);case 7:if(h=Ue.h,yo(e),G)throw G;return N(Ue,$Z(te,h,u),8);case 8:return N(Ue,E.init(),9);case 9:return yo(e),N(Ue,FM(E),10);case 10:return A=Ue.h,yo(e),ve=XZ(h,te,t,n,u,c),Pe=ve.Sh,xe=ve.Hf,N(Ue,A.Ba.addManifests([Pe]),11);case 11:if(Ge=Ue.h,yo(e),k=Ge[0],yo(e),G)throw G;return N(Ue,WZ(e,xe,k,Pe,c,u,A.Ba,te,h),12);case 12:return yo(e),QM(te,Pe,h,u),N(Ue,A.Ba.updateManifest(k,Pe),13);case 13:return yo(e),Te=new wu("manifest",A.path.fb,A.path.Ba,k),Ue.return(wT(Te,Pe));case 3:return Xe(Ue),N(Ue,E.destroy(),14);case 14:if(!d){Ue.u(15);break}return N(Ue,d.stop(),15);case 15:if(!h){Ue.u(17);break}return N(Ue,h.destroy(),17);case 17:Ae(Ue,0);break;case 2:if(We=be(Ue),k==null){Ue.u(19);break}return N(Ue,WM(k),19);case 19:throw G||We}})}function WZ(e,t,n,r,u,c,d,h,E){var A,k,G,te,Y,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:if(A={},k=0,G=function(Ue,gt){var Rt,Ht,Ut,yt,jt,ln,gn;return Oe(function(Ln){if(Ln.g==1){for(Rt={},Ht=m(Ue),Ut=Ht.next();!Ut.done;Rt={Ob:Rt.Ob},Ut=Ht.next())Rt.Ob=Ut.value,yt=wZ(Rt.Ob,c),jt=Rt.Ob.i,ln=Rt.Ob.h,gn=function(Mn){return function(qn){var Yn,Kn,xr;return Oe(function(di){if(di.g==1)return N(di,d.addSegments([{data:qn}]),2);Yn=di.h,yo(e),Kn=Mn.Ob.g,xr=vT(Kn),A[xr]=Yn[0],k+=qn.byteLength,X(di)})}}(Rt),IZ(u,Rt.Ob.groupId,yt,jt,ln,gn);return N(Ln,bZ(u),2)}return gt?(yo(e),QM(h,r,E,c),N(Ln,d.updateManifest(n,r),0)):Ln.u(0)})},te=!1,ce(We,2),!IT(h)||!te||XM(h)){We.u(4);break}return N(We,G(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return yo(e),t=t.filter(function(Ue){return!Ue.h}),Y=A,ve=k,A={},k=0,N(We,$M(d,n,r,Y,ve,function(){return yo(e)}),6);case 6:yo(e);case 4:if(te){We.u(7);break}return N(We,G(t,!1),8);case 8:return yo(e),Pe=A,xe=k,A={},k=0,N(We,$M(d,n,r,Pe,xe,function(){return yo(e)}),9);case 9:yo(e);case 7:he(We,0);break;case 2:return Ge=be(We),Te=Object.values(A),N(We,d.removeSegments(Te,function(){}),10);case 10:throw Ge}})}function WM(e){var t,n,r,u;return Oe(function(c){switch(c.g){case 1:return t=new Vo,N(c,t.init(),2);case 2:return N(c,FM(t),3);case 3:return n=c.h,r=new wu("manifest",n.path.fb,n.path.Ba,e),N(c,t.destroy(),4);case 4:return u=new so,N(c,u.remove(r.toString()),0)}})}function $M(e,t,n,r,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:for(d=!1,ce(Ge,2),h=!0,E=m(n.streams),A=E.next();!A.done;A=E.next())for(k=A.value,G=m(k.segments),te=G.next();!te.done;te=G.next())Y=te.value,ve=Y.pendingSegmentRefId?r[Y.pendingSegmentRefId]:null,ve!=null&&(Y.dataKey=ve,Y.pendingSegmentRefId=void 0),ve=Y.pendingInitSegmentRefId?r[Y.pendingInitSegmentRefId]:null,ve!=null&&(Y.initSegmentKey=ve,Y.pendingInitSegmentRefId=void 0),Y.pendingSegmentRefId&&(h=!1),Y.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),N(Ge,e.updateManifest(t,n),4);case 4:d=!0,c(),he(Ge,0);break;case 2:return Pe=be(Ge),N(Ge,WM(t),5);case 5:if(d){Ge.u(6);break}return xe=Object.values(r),N(Ge,e.removeSegments(xe,function(){}),6);case 6:throw Pe}})}function $Z(e,t,n){var r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:return r={width:1/0,height:1/0},Fh(e,n.restrictions,r),N(qn,ym(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,d=n.preferredVideoCodecs,h=n.preferredAudioCodecs,mm(e,d,h,c),E=m(e.variants),A=E.next();!A.done;A=E.next())k=A.value,u.push(Ml(k));for(G=m(e.textStreams),te=G.next();!te.done;te=G.next())Y=te.value,u.push(Dl(Y));for(ve=m(e.imageStreams),Pe=ve.next();!Pe.done;Pe=ve.next())xe=Pe.value,u.push(zu(xe));return N(qn,n.offline.trackSelectionCallback(u),3);case 3:for(Ge=qn.h,Te=e.presentationTimeline.getDuration(),We=0,Ue=m(Ge),gt=Ue.next();!gt.done;gt=Ue.next())Rt=gt.value,Ht=Rt.bandwidth*Te/8,We+=Ht;return ce(qn,4),N(qn,n.offline.downloadSizeCallback(We),6);case 6:if(Ut=qn.h,!Ut)throw new pt(2,9,9014);he(qn,5);break;case 4:throw yt=be(qn),yt instanceof pt?yt:new pt(2,9,9015);case 5:for(jt=new Set,ln=new Set,gn=new Set,Ln=m(Ge),gt=Ln.next();!gt.done;gt=Ln.next())Mn=gt.value,Mn.type=="variant"&&jt.add(Mn.id),Mn.type=="text"&&ln.add(Mn.id),Mn.type=="image"&&gn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return jt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return ln.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return gn.has(Yn.id)}),cG(e),X(qn)}})}function XZ(e,t,n,r,u,c){var d=HZ(n,t,r),h=u.offline.progressCallback;AZ(c,function(Y,ve){d.size=ve,h(d,Y)},function(Y,ve){E&&u.offline.usePersistentLicense&&A==ve&&jl(e,"cenc",Y)});var E=IT(t)&&!XM(t),A=null;E&&(A=fG.get(e.g.keySystem));for(var k=new KZ,G=m(t.textStreams),te=G.next();!te.done;te=G.next())k.g[te.value.id]=52;for(G=m(t.imageStreams),te=G.next();!te.done;te=G.next())zZ(k,te.value);for(te=m(t.variants),G=te.next();!G.done;G=te.next())VZ(k,G.value);return k=iG(c,k,t,u),c=k.streams,k=k.Hf,te=e.g,G=u.offline.usePersistentLicense,te&&G&&(te.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?op(e):[],drmInfo:te,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function IT(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function XM(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function QM(e,t,n,r){if(t.expiration=n.cd(),n=op(n),t.sessionIds=r.offline.usePersistentLicense?n:[],IT(e)&&r.offline.usePersistentLicense&&!n.length)throw new pt(2,9,9007)}g.remove=function(e){return bT(this,QZ(this,e))};function QZ(e,t){var n,r,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(ny(),n=ST(t),n==null||n.g!="manifest")throw new pt(2,9,9004,t);return r=n,u=new Vo,oe(E,2),N(E,u.init(),4);case 4:return N(E,Jv(u,r.fb(),r.Ba()),5);case 5:return c=E.h,N(E,c.getManifests([r.key()]),6);case 6:return d=E.h,h=d[0],N(E,Promise.all([JZ(e,h,u),eG(c,r,h)]),2);case 2:return Xe(E),N(E,u.destroy(),8);case 8:Ae(E,0)}})}function JM(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:wi(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:wi(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function JZ(e,t,n){return Oe(function(r){return N(r,lG(e.g,e.h.drm,n,t),0)})}function eG(e,t,n){function r(){}var u=uG(n);return wT(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}g.ji=function(){return bT(this,tG(this))};function tG(e){var t,n,r,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:return ny(),t=e.g,n=e.h.drm,r=new Vo,u=!1,oe(G,2),N(G,r.init(),4);case 4:c=[],xZ(r,function(te){return c.push(te)}),d=m(c),h=d.next();case 5:if(h.done){G.u(2);break}return E=h.value,N(G,E.getAll(),8);case 8:return A=G.h,N(G,VM(n,t,A),9);case 9:return k=G.h,N(G,E.remove(k),10);case 10:k.length!=A.length&&(u=!0),h=d.next(),G.u(5);break;case 2:return Xe(G),N(G,r.destroy(),11);case 11:Ae(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return bT(this,nG())};function nG(){var e,t,n;return Oe(function(r){switch(r.g){case 1:return ny(),e=[],t=new Vo,oe(r,2),N(r,t.init(),4);case 4:return n=Promise.resolve(),NZ(t,function(u,c){n=n.then(function(){var d;return Oe(function(h){if(h.g==1)return N(h,c.getAllManifests(),2);d=h.h,d.forEach(function(E,A){E=wT(new wu("manifest",u.fb,u.Ba,A),E),e.push(E)}),X(h)})})}),N(r,n,2);case 2:return Xe(r),N(r,t.destroy(),6);case 6:Ae(r,3);break;case 3:return r.return(e)}})}function rG(e,t,n,r){var u,c,d,h,E;return Oe(function(A){if(A.g==1)return u=null,c=e.g,d={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),yo(e),N(A,n.start(t,d),2);if(A.g!=3)return h=A.h,yo(e),E=eD(h),N(A,Promise.all(Kf(E,function(k){return k.createSegmentIndex()})),3);if(yo(e),u)throw u;return A.return(h)})}g.rc=function(e,t,n){var r=this,u;return Oe(function(c){return c.g==1?(u=new Uc({zb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),N(c,Um(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?N(c,ip(u),3):c.return(u)})};function iG(e,t,n,r){var u=new Map,c=eD(n),d=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=oG(e,t,n,h,r,u);d.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&d.get(t.audio.id).variantIds.push(t.id),t.video&&d.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(d.values()),Hf:Array.from(u.values())}}function oG(e,t,n,r,u,c){var d={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return aG(r,n.presentationTimeline.qb(),function(A){var k=vT(A),G=void 0;if(!c.has(k)){var te=A.endTime-A.startTime;te=YM(t,r.id)*te,te=DM(e.g,te),c.set(k,new xM(A,te,E,!1))}A.ca&&(G=vT(A.ca),c.has(G)||(te=.5*YM(t,r.id),te=DM(e.g,te),c.set(G,new xM(A.ca,te,E,!0)))),d.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),E=(E+1)%h}),d}function aG(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function yo(e){if(e.l.g)throw new pt(2,9,7001)}function ny(){if(!AT())throw new pt(2,9,9e3)}function bT(e,t){return Oe(function(n){return n.g==1?(e.i.push(t),oe(n,2),N(n,t,4)):n.g!=2?n.return(n.h):(Xe(n),mn(e.i,t),Ae(n,0))})}function sG(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){mn(e.i,n)})}function uG(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function lG(e,t,n,r){var u,c,d;return Oe(function(h){return h.g==1?r.drmInfo?(u=MZ(n),c=r.sessionIds.map(function(E){return{sessionId:E,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:JM(r,!1),videoCapabilities:JM(r,!0)}}),N(h,VM(t,e,c),2)):h.return():h.g!=3?(d=h.h,N(h,u.remove(d),3)):N(h,u.add(c.filter(function(E){return!d.includes(E.sessionId)})),0)})}function eD(e){for(var t=new Set,n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=m(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function cG(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}re("shaka.offline.Storage",so),so.deleteAll=function(){var e;return Oe(function(t){return t.g==1?(e=new Vo,oe(t,2),N(t,DZ(e),2)):t.g!=5?(Xe(t),N(t,e.destroy(),5)):Ae(t,0)})},so.prototype.list=so.prototype.list,so.prototype.removeEmeSessions=so.prototype.ji,so.prototype.remove=so.prototype.remove,so.prototype.store=so.prototype.store,so.prototype.getNetworkingEngine=so.prototype.Zb,so.prototype.getConfiguration=so.prototype.getConfiguration,so.prototype.configure=so.prototype.configure,so.prototype.destroy=so.prototype.destroy,so.support=AT;var fG=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");R_.offline=AT;function Eo(){}function zo(e,t){for(e={priority:t||0,callback:e},t=0;t<Zp.length;t++)if(Zp[t].priority<e.priority){Zp.splice(t,0,e);return}Zp.push(e)}re("shaka.polyfill",Eo),Eo.register=zo,Eo.installAll=function(){for(var e=m(Zp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){He("Error installing polyfill!",n)}}};var Zp=[];function Gp(){this.g=new ry}function tD(){p.AbortController||(p.AbortController=Gp,p.AbortSignal=ry)}Gp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(Gp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Eo.AbortController=Gp,Gp.install=tD;function ry(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}z(ry,Sr),y.Object.defineProperties(ry.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),zo(tD);function nD(){}function rD(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())dG(t.value)}function dG(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Eo.Aria=nD,nD.install=rD,zo(rD);function iD(){}function oD(){TP()}Eo.EncryptionScheme=iD,iD.install=oD,zo(oD,-2);function aD(){}function sD(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Nd),document.addEventListener("webkitfullscreenerror",Nd),document.addEventListener("mozfullscreenchange",Nd),document.addEventListener("mozfullscreenerror",Nd),document.addEventListener("MSFullscreenChange",Nd),document.addEventListener("MSFullscreenError",Nd)}}function Nd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Eo.Fullscreen=aD,aD.install=sD,zo(sD);function qp(){}function uD(){var e=!0;(vs()||Tc()||Nr()||ia()||Ha()||oa()||Wr("PC=EOS")||ys())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),lD=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=hG)}function hG(e){var t,n,r,u,c,d,h,E,A,k,G,te,Y,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ue.return(t);if(n=e.video,r=e.audio,e.type=="media-source"){if(!Io())return Ue.return(t);if(n){if(oa())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var gt=n.contentType;if(n.width&&n.height&&(gt+="; width="+n.width+"; height="+n.height),n.framerate&&(gt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(gt+="; eotf=smpte2084"),gt in oy)var Rt=oy[gt];else Rt=cast.__platform__.canDisplayType(gt),oy[gt]=Rt;u=Rt}else u=Ot(n.contentType);else Ha()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Ot(c)):u=Ot(n.contentType);if(!u)return Ue.return(t)}if(r&&(oa()&&r.spatialRendering?(h=r.contentType+"; spatialRendering=true",d=Ot(h)):d=Ot(r.contentType),!d))return Ue.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,A=cu(E),!A)||r&&(k=r.contentType,G=cu(k),!G))return Ue.return(t)}else return Ue.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Ue.return(Promise.resolve(t));if(te=e.keySystemConfiguration,Y=[],ve=[],te.audio&&(Pe={robustness:te.audio.robustness||"",contentType:e.audio.contentType},Ha()&&e.audio.contentType.includes('codecs="ac-3"')&&(Pe={robustness:Pe.robustness,contentType:'audio/mp4; codecs="ec-3"'}),te.audio.encryptionScheme&&(Pe={robustness:Pe.robustness,contentType:Pe.contentType,encryptionScheme:te.audio.encryptionScheme}),Y.push(Pe)),te.video&&(xe={robustness:te.video.robustness||"",contentType:e.video.contentType},te.video.encryptionScheme&&(xe={robustness:xe.robustness,contentType:xe.contentType,encryptionScheme:te.video.encryptionScheme}),ve.push(xe)),Ge={initDataTypes:[te.initDataType],distinctiveIdentifier:te.distinctiveIdentifier,persistentState:te.persistentState,sessionTypes:te.sessionTypes},Y.length&&(Ge.audioCapabilities=Y),ve.length&&(Ge.videoCapabilities=ve),Te=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,ce(Ue,3),Te in iy){We=iy[Te],Ue.u(5);break}return N(Ue,navigator.requestMediaKeySystemAccess(te.keySystem,[Ge]),6);case 6:We=Ue.h,iy[Te]=We;case 5:he(Ue,4);break;case 3:be(Ue);case 4:We&&(t.supported=!0,t.keySystemAccess=We);case 2:return Ue.return(t)}})}Eo.MediaCapabilities=qp,qp.install=uD;var lD=null;qp.originalMcap=lD;var iy={};qp.memoizedMediaKeySystemAccessRequests_=iy;var oy={};qp.memoizedCanDisplayTypeRequests_=oy,zo(uD,-1);function cD(){}function fD(){var e=Es();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(dD(),pG()):15>=e&&dD():(Fu()||ku()||Wr("Tizen 4"))&&mG()),(p.MediaSource||p.ManagedMediaSource)&&gG(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&vG()}function dD(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Qe.apply(0,arguments));return t.abort=function(){},t}}function pG(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function gG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Df(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Df(n)!="mp2t"&&t(n)}}}function mG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ya(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Ya(n)!="opus"&&t(n)}}}function vG(){var e=MediaSource.isTypeSupported;ia()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(d){return d.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(d){return d.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}Eo.MediaSource=cD,cD.install=fD,zo(fD);function hD(){}function pD(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?yG():p.orientation!=null&&EG())}function yG(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function EG(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new ay;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}Eo.Orientation=hD,hD.install=pD;function ay(){Sr.call(this),this.type="",this.angle=0}z(ay,Sr),ay.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},ay.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},zo(pD);function CT(){}var RT,NT,xT,MT,DT,PT;function _G(e,t){try{var n=new sy(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function TG(e){var t=this.mediaKeys;return t&&t!=e&&gD(t,null),delete this.mediaKeys,(this.mediaKeys=e)?gD(e,this):Promise.resolve()}function SG(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ka(e.subarray(4),!0),e=za(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Si(e),this.dispatchEvent(t)}Eo.PatchedMediaKeysApple=CT,CT.uninstall=function(){RT&&(RT=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",NT),HTMLMediaElement.prototype.setMediaKeys=xT,p.MediaKeys=MT,p.MediaKeySystemAccess=DT,navigator.requestMediaKeySystemAccess=PT,NT=PT=xT=DT=MT=null,p.shakaMediaKeysPolyfill=!1)},CT.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(RT=!0,NT=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),xT=HTMLMediaElement.prototype.setMediaKeys,MT=p.MediaKeys,DT=p.MediaKeySystemAccess,PT=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=TG,p.MediaKeys=Hp,p.MediaKeySystemAccess=sy,navigator.requestMediaKeySystemAccess=_G,p.shakaMediaKeysPolyfill=!0)};function sy(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),d=c.next();!d.done;d=c.next())d=d.value,d.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,d.contentType.split(";")[0])&&(t.audioCapabilities.push(d),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),d=n.next();!d.done;d=n.next())c=d.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}sy.prototype.createMediaKeys=function(){var e=new Hp(this.keySystem);return Promise.resolve(e)},sy.prototype.getConfiguration=function(){return this.g};function Hp(e){this.h=new WebKitMediaKeys(e),this.g=new Et}Hp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new OT(this.h)},Hp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function gD(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",SG);try{return td(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Hp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function OT(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Et,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new mD}z(OT,Sr),g=OT.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var r=this.l.createSession("video/mp4",Qn(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Si(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(uy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:uy(n,"output-not-allowed");break;default:uy(n,"internal-error")}}),uy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function uy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function mD(){this.size=0,this.g=void 0}g=mD.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function vD(){}function yD(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=wG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=AG,p.MediaKeys=ly,p.MediaKeySystemAccess=LT,p.shakaMediaKeysPolyfill=!0)}function wG(){return Promise.reject(Error("The key system specified is not supported."))}function AG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Eo.PatchedMediaKeysNop=vD,vD.install=yD;function ly(){throw new TypeError("Illegal constructor.")}ly.prototype.createSession=function(){},ly.prototype.setServerCertificate=function(){},ly.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function LT(){throw this.keySystem="",new TypeError("Illegal constructor.")}LT.prototype.getConfiguration=function(){},LT.prototype.createMediaKeys=function(){},zo(yD,-10);function ED(){}function _D(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)jT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=IG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=bG,p.MediaKeys=Kp,p.MediaKeySystemAccess=cy,p.shakaMediaKeysPolyfill=!0}}function kT(e){var t=jT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function IG(e,t){try{var n=new cy(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function bG(e){var t=this.mediaKeys;return t&&t!=e&&TD(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&TD(e,this),Promise.resolve()}Eo.PatchedMediaKeysWebkit=ED,ED.install=_D;function cy(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var d={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(d.audioCapabilities.push(A),r=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(d.videoCapabilities.push(A),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(d.persistentState="required",d.sessionTypes=["persistent-license"]):r=!1),r){this.h=d;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}cy.prototype.createMediaKeys=function(){var e=new Kp(this.g);return Promise.resolve(e)},cy.prototype.getConfiguration=function(){return this.h};function Kp(e){this.l=e,this.h=null,this.g=new Et,this.i=[],this.j=new Map}function TD(e,t){e.h=t,e.g.ib();var n=jT;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Si(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=FT(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Wn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=FT(e,r.sessionId))&&(fy(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.g.D(t,n+"keyerror",function(r){var u=FT(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),d=r.errorCode;d.systemCode=r.systemCode,c.errorCode=d,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?fy(u,"output-restricted"):c==1?fy(u,"expired"):fy(u,"internal-error"))}}))}Kp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new UT(t,this.l,e),this.i.push(e),e},Kp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Kp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function FT(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function UT(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new wD}z(UT,Sr);function SD(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Qn(za("LOAD_SESSION|"+n));else{var u=za("PERSISTENT|");r=ci(u,t)}else r=Qn(t)}catch(d){return Promise.reject(d)}e.h=new Rr;var c=kT("generateKeyRequest");try{e.j[c](e.i,r)}catch(d){if(d.name!="InvalidStateError")return e.h=null,Promise.reject(d);new pr(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function BT(e,t,n){if(e.g)e.g.then(function(){return BT(e,t,n)}).catch(function(){return BT(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Vr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=qo(u.keys[0].k),u=qo(u.keys[0].kid)}else r=Qn(n),u=null;var c=kT("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(d){e.g.reject(d),e.g=null}}}function fy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=UT.prototype,g.generateRequest=function(e,t){return SD(this,t,null)},g.load=function(e){return this.l=="persistent-license"?SD(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return BT(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=kT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function wD(){this.size=0,this.g=void 0}g=wD.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var jT="";zo(_D);function AD(){}function ID(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=RG,Object.defineProperty(e,"disablePictureInPicture",{get:xG,set:MG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=NG,document.addEventListener("webkitpresentationmodechanged",CG,!0))}}function CG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function RG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function NG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function xG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function MG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Eo.PiPWebkit=AD,AD.install=ID,zo(ID);function bD(){}function CD(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=DG))}function DG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Eo.RandomUUID=bD,bD.install=CD,zo(CD);function RD(){}function ND(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:PG})}function PG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Eo.Symbol=RD,RD.install=ND,zo(ND);function xD(){}function MD(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Eo.VideoPlayPromise=xD,xD.install=MD,zo(MD);function DD(){}function PD(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||ia()&&fu()===38)&&(e.getVideoPlaybackQuality=OG)}}function OG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Eo.VideoPlaybackQuality=DD,DD.install=PD,zo(PD);function OD(){}function LD(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=ZT;else if(t==6)e=LG;else{try{var n=!!ZT(1,2,"")}catch(r){n=!1}n&&(e=ZT)}e&&(p.VTTCue=function(r,u,c){return e(r,u,c)})}}function ZT(e,t,n){return new p.TextTrackCue(e,t,n)}function LG(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Eo.VTTCue=OD,OD.install=LD,zo(LD);function Ma(){}Ma.prototype.parseInit=function(){},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e,t){var n=null,r=[];e=Vr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=kG.exec(u))){var c=FG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new Cn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},re("shaka.text.LrcTextParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit;var kG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,FG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new Ma};function ma(){}ma.prototype.parseInit=function(){},ma.prototype.setSequenceMode=function(){},ma.prototype.setManifestType=function(){},ma.prototype.parseMedia=function(e,t,n){var r=Vr(e);if(e=[],r=="")return e;var u=Bl(r,"tt");if(!u)throw new pt(2,2,2005,"Failed to parse TTML.");if(r=Ra(u,"body")[0],!r)return[];var c=la(u,Vp,"frameRate"),d=la(u,Vp,"subFrameRate"),h=la(u,Vp,"frameRateMultiplier"),E=la(u,Vp,"tickRate"),A=la(u,Vp,"cellResolution"),k=u.attributes["xml:space"]||"default",G=la(u,py,"extent");if(k!="default"&&k!="preserve")throw new pt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new jG(c,d,h,E),A=A&&(A=/^(\d+) (\d+)$/.exec(A))?{Sb:parseInt(A[1],10),rows:parseInt(A[2],10)}:null,d=(d=Ra(u,"metadata")[0])?d.children:[],h=Ra(u,"style"),u=Ra(u,"region"),E=[];for(var te=m(u),Y=te.next();!Y.done;Y=te.next()){var ve=Y.value;Y=new Br;var Pe=ve.attributes["xml:id"];if(Pe){Y.id=Pe;var xe=null;G&&(xe=KT.exec(G)||VT.exec(G)),Pe=xe?Number(xe[1]):null,xe=xe?Number(xe[2]):null;var Ge,Te=dy(ve,h,"extent");if(Te){var We=(Ge=KT.exec(Te))||VT.exec(Te);We!=null&&(Y.width=Number(We[1]),Y.height=Number(We[2]),Ge||(Pe!=null&&(Y.width=100*Y.width/Pe),xe!=null&&(Y.height=100*Y.height/xe)),Y.widthUnits=Ge||Pe!=null?qr:0,Y.heightUnits=Ge||xe!=null?qr:0)}(ve=dy(ve,h,"origin"))&&(We=(Ge=KT.exec(ve))||VT.exec(ve),We!=null&&(Y.viewportAnchorX=Number(We[1]),Y.viewportAnchorY=Number(We[2]),Ge?Te||(Y.width=100-Y.viewportAnchorX,Y.widthUnits=qr,Y.height=100-Y.viewportAnchorY,Y.heightUnits=qr):(xe!=null&&(Y.viewportAnchorY=100*Y.viewportAnchorY/xe),Pe!=null&&(Y.viewportAnchorX=100*Y.viewportAnchorX/Pe)),Y.viewportAnchorUnits=Ge||Pe!=null?qr:0))}else Y=null;Y&&E.push(Y)}if($r(r,"p").length)throw new pt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m($r(r,"div")),te=G.next();!te.done;te=G.next())if($r(te.value,"span").length)throw new pt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=kD(r,t,c,d,h,u,E,k,A,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function kD(e,t,n,r,u,c,d,h,E,A,k,G){var te=A;if(Yf(e)){if(!k)return null;var Y={tagName:"span",children:[Ri(e)],attributes:{},parent:null}}else Y=e;for(var ve=null,Pe=m(VD),xe=Pe.next();!xe.done&&!(ve=hy(Y,"backgroundImage",r,"#",xe.value)[0]);xe=Pe.next());Pe=null;var Ge=la(Y,VD,"backgroundImage");if(G&&Ge&&!Ge.startsWith("#")&&(xe=new ui(G),Ge=new ui(Ge),(xe=xe.resolve(Ge).toString())&&(Pe=xe)),(e.tagName=="p"||ve||Pe)&&(k=!0),e=k,xe=(Y.attributes["xml:space"]||(h?"default":"preserve"))=="default",Ge=Y.children.every(Yf),h=[],!Ge)for(var Te=m(Y.children),We=Te.next();!We.done;We=Te.next())(We=kD(We.value,t,n,r,u,c,d,xe,E,Y,k,G))&&h.push(We);if(r=A!=null,G=Ri(Y),G=Y.children.length&&G&&/\S/.test(G),We=Y.attributes.begin||Y.attributes.end||Y.attributes.dur,!(We||G||Y.tagName=="br"||h.length!=0||r&&!xe))return null;for(Te=BD(Y,n),G=Te.start,Te=Te.end;te&&te.tagName&&te.tagName!="tt";)Te=BG(te,n,G,Te),G=Te.start,Te=Te.end,te=te.parent;if(G==null&&(G=0),G+=t.periodStart,Te=Te==null?1/0:Te+t.periodStart,G=Math.max(G,t.segmentStart),Te=Math.min(Te,t.segmentEnd),!We&&0<h.length)for(G=1/0,Te=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Te=Math.max(Te,n.endTime);if(Y.tagName=="br")return u=new Cn(G,Te,""),u.lineBreak=!0,u;if(t="",Ge&&(t=bo(Ri(Y)||""),xe&&(t=t.replace(/\s+/g," "))),t=new Cn(G,Te,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=hy(Y,"region",c,"")[0],Y.attributes.region&&E&&E.attributes["xml:id"]){var Ue=E.attributes["xml:id"];t.region=d.filter(function(gt){return gt.id==Ue})[0]}return d=E,A&&r&&!Y.attributes.region&&!Y.attributes.style&&(d=hy(A,"region",c,"")[0]),UG(t,Y,d,ve,Pe,u,e,h.length==0),t}function UG(e,t,n,r,u,c,d,h){if(d=d||h,_o(t,n,c,"direction",d)=="rtl"&&(e.direction="rtl"),h=_o(t,n,c,"writingMode",d),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Vn),(h=_o(t,n,c,"textAlign",!0))?(e.positionAlign=qG[h],e.lineAlign=GG[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=_o(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=_o(t,n,c,"color",d))&&(e.color=h),(h=_o(t,n,c,"backgroundColor",d))&&(e.backgroundColor=h),(h=_o(t,n,c,"border",d))&&(e.border=h),h=_o(t,n,c,"fontFamily",d))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=_o(t,n,c,"fontWeight",d))&&h=="bold"&&(e.fontWeight=700),h=_o(t,n,c,"wrapOption",d),e.wrapLine=!(h&&h=="noWrap"),(h=_o(t,n,c,"lineHeight",d))&&h.match(xd)&&(e.lineHeight=h),(h=_o(t,n,c,"fontSize",d))&&(h.match(xd)||h.match(ZG))&&(e.fontSize=h),(h=_o(t,n,c,"fontStyle",d))&&(e.fontStyle=ro[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=Ri(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=_o(t,n,c,"textOutline",d))&&(r=r.split(" "),r[0].match(xd)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(xd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=_o(t,n,c,"letterSpacing",d))&&r.match(xd)&&(e.letterSpacing=r),(r=_o(t,n,c,"linePadding",d))&&r.match(xd)&&(e.linePadding=r),(r=_o(t,n,c,"opacity",d))&&(e.opacity=parseFloat(r)),(r=dy(n,c,"textDecoration"))&&FD(e,r),(r=GT(t,c,"textDecoration"))&&FD(e,r),(r=_o(t,n,c,"textCombine",d))&&(e.textCombineUpright=r),_o(t,n,c,"ruby",d)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function FD(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&mn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&mn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&mn(e.textDecoration,"overline")}}function _o(e,t,n,r,u){return u=u===void 0?!0:u,(e=GT(e,n,r))?e:u?dy(t,n,r):null}function dy(e,t,n){if(!e)return null;var r=la(e,py,n);return r||UD(e,t,n)}function GT(e,t,n){var r=la(e,py,n);return r||UD(e,t,n)}function UD(e,t,n){e=hy(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=Eu(e[u],"urn:ebu:tt:style",n);c||(c=la(e[u],py,n)),c||(c=GT(e[u],t,n)),c&&(r=c)}return r}function hy(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var d=e;for(e=null;!e&&!(e=u?Eu(d,u,t):d.attributes[t])&&(d=d.parent,d););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),d=e.next();!d.done;d=e.next())if(d=d.value,r+d.attributes["xml:id"]==u){c.push(d);break}}return c}function BG(e,t,n,r){return e=BD(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function BD(e,t){var n=qT(e.attributes.begin,t),r=qT(e.attributes.end,t);return e=qT(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function qT(e,t){var n=null;if(jD.test(e)){e=jD.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(ZD.test(e))n=HT(ZD,e);else if(GD.test(e))n=HT(GD,e);else if(qD.test(e))e=qD.exec(e),n=Number(e[1])/t.frameRate;else if(HD.test(e))e=HD.exec(e),n=Number(e[1])/t.g;else if(KD.test(e))n=HT(KD,e);else if(e)throw new pt(2,2,2001,"Could not parse cue time range in TTML");return n}function HT(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}re("shaka.text.TtmlTextParser",ma),ma.prototype.parseMedia=ma.prototype.parseMedia,ma.prototype.setManifestType=ma.prototype.setManifestType,ma.prototype.setSequenceMode=ma.prototype.setSequenceMode,ma.prototype.parseInit=ma.prototype.parseInit;function jG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var KT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,ZG=/^(\d{1,2}(?:\.\d+)?|100)%$/,xd=/^(\d+px|\d+em|\d*\.?\d+c)$/,VT=/^(\d+)px (\d+)px$/,jD=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ZD=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,GD=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,qD=/^(\d*(?:\.\d*)?)f$/,HD=/^(\d*(?:\.\d*)?)t$/,KD=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),GG={left:bn,center:"center",right:"end",start:bn,end:"end"},qG={left:"line-left",center:"center",right:"line-right"},Vp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],py=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],VD=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new ma};function Lo(){this.g=new ma}Lo.prototype.parseInit=function(e){var t=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",vu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new pt(2,2,2007)},Lo.prototype.setSequenceMode=function(){},Lo.prototype.setManifestType=function(){},Lo.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[];if(new kr().box("mdat",Qu(function(d){u=!0,c=c.concat(r.g.parseMedia(d,t,n))})).parse(e,!1),!u)throw new pt(2,2,2007);return c},re("shaka.text.Mp4TtmlParser",Lo),Lo.prototype.parseMedia=Lo.prototype.parseMedia,Lo.prototype.setManifestType=Lo.prototype.setManifestType,Lo.prototype.setSequenceMode=Lo.prototype.setSequenceMode,Lo.prototype.parseInit=Lo.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Lo},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Lo};function ko(){this.h=!1,this.g="UNKNOWN"}ko.prototype.parseInit=function(){},ko.prototype.setSequenceMode=function(e){this.h=e},ko.prototype.setManifestType=function(e){this.g=e},ko.prototype.parseMedia=function(e,t){e=Vr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new pt(2,2,2e3);if(e=gy(new zc(e[1])),e==null)throw new pt(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=m(n[0].split("\n"));for(var u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new zc(u);var c=new Br;Yc(u),Ad(u);for(var d=Yc(u);d;){var h=c,E=d;(d=/^id=(.*)$/.exec(E))?h.id=d[1]:(d=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(d[1]):(d=/^lines=(\d+)$/.exec(E))?(h.height=Number(d[1]),h.heightUnits=2):(d=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(d[1]),h.regionAnchorY=Number(d[2])):(d=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(d[1]),h.viewportAnchorY=Number(d[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),Ad(u),d=Yc(u)}t.push(c)}for(r=new Map,zD(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],d=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),d=h.length-1),d!=-1&&(h[d].push(c[E]),c[E].includes("}")&&(d=-1));for(h=m(h),d=h.next();!d.done;d=h.next()){var A=d.value;d="global",(E=A[0].match(/\((.*)\)/))&&(d=E.pop()),E=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(E=A[1].split(";")),(A=r.get(d))||(A=new Cn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var te=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(te){var Y=te[2].trim().replace(";","");switch(te[1].trim()){case"background-color":case"background":k=!0,A.backgroundColor=Y;break;case"color":k=!0,A.color=Y;break;case"font-family":k=!0,A.fontFamily=Y;break;case"font-size":k=!0,A.fontSize=Y;break;case"font-weight":(700<=parseInt(Y,10)||Y=="bold")&&(k=!0,A.fontWeight=700);break;case"font-style":switch(Y){case"normal":k=!0,A.fontStyle=Yi;break;case"italic":k=!0,A.fontStyle="italic";break;case"oblique":k=!0,A.fontStyle="oblique"}break;case"opacity":k=!0,A.opacity=parseFloat(Y);break;case"text-combine-upright":k=!0,A.textCombineUpright=Y;break;case"text-shadow":k=!0,A.textShadow=Y;break;case"white-space":k=!0,A.wrapLine=Y!="noWrap"}}}k&&r.set(d,A)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),d=new zc(c[0]),E=gy(d),G=Hl(d,/[ \t]+--\x3e[ \t]+/g),A=gy(d),E==null||G==null||A==null)He("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,A+=k,c=c.slice(1).join("\n").trim(),r.has("global")?(k=r.get("global").clone(),k.startTime=E,k.endTime=A,k.payload=""):k=new Cn(E,A,""),Ad(d),E=Yc(d);E;)$D(k,E,t),Ad(d),E=Yc(d);YD(c,k,r),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function zD(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new Cn(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(br)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new Cn(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function YD(e,t,n){if(e.includes("<")){n.size===0&&zD(n);var r=e;e=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(XD)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e=r;e:{c=e,u=[];var d=-1;e="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){r=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===E)e+="/"+E+">";else{if(!A.startsWith("v")){e+=c[h];continue}e+="/"+A+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(d=h+1,c[d]!="v"&&(d=-1)):c[h]===">"&&0<d&&(u.push(c.substr(d,h-d)),d=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,d=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+d+">"),e=e.replace("</"+u+">","</"+d+">"),r||(e+="</"+d+">")}e=HG(e);try{var k=Bl("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())WD(e.value,t,n);else t.payload=bo(e);else t.payload=bo(e)}else t.payload=bo(e)}function HG(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function zp(e,t){return e&&0<e.length?e:t}function WD(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Br,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var d=c=c.value;if(d.startsWith(".voice-")){var h=d.split("-").pop();d='v[voice="'+h+'"]',n.has(d)||(d="v[voice="+h+"]")}switch(n.has(d)&&(d=n.get(d))&&(r.backgroundColor=zp(d.backgroundColor,r.backgroundColor),r.color=zp(d.color,r.color),r.fontFamily=zp(d.fontFamily,r.fontFamily),r.fontSize=zp(d.fontSize,r.fontSize),r.textShadow=zp(d.textShadow,r.textShadow),r.fontWeight=d.fontWeight,r.fontStyle=d.fontStyle,r.opacity=d.opacity,r.rubyTag=d.rubyTag,r.textCombineUpright=d.textCombineUpright,r.wrapLine=d.wrapLine),c){case"br":r=Rn(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=gy(new zc(c)))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,Yf(e)||u.length==1&&Yf(u[0]))for(n=Ri(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=bo(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())WD(e.value,r,n)}function $D(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(r=/^region:(.*)$/.exec(t))?(t=KG(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=cn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function KG(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function gy(e){if(e=Hl(e,XD),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.VttTextParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit;var XD=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new ko},ji['text/vtt; codecs="vtt"']=function(){return new ko},ji['text/vtt; codecs="wvtt"']=function(){return new ko};function Da(){this.g=null}Da.prototype.parseInit=function(e){var t=this,n=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(r){r=It(r.reader,r.version),t.g=r.timescale}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new pt(2,2,2008);if(!n)throw new pt(2,2,2008)},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new pt(2,2,2008);var n=0,r=[],u,c=[],d=!1,h=!1,E=!1,A=null;if(new kr().box("moof",yr).box("traf",yr).O("tfdt",function(We){d=!0,n=ir(We.reader,We.version).baseMediaDecodeTime}).O("tfhd",function(We){A=rr(We.reader,We.flags).Wf}).O("trun",function(We){h=!0,r=$t(We.reader,We.version,We.flags).vg}).box("mdat",Qu(function(We){E=!0,u=We})).parse(e,!1),!E&&!d&&!h)throw new pt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(r),te=G.next();!te.done;te=G.next()){te=te.value;var Y=te.wf||A,ve=te.he?n+te.he:e;e=ve+(Y||0);var Pe=0;do{var xe=k.M();Pe+=xe;var Ge=k.M(),Te=null;Vf(Ge)=="vttc"?8<xe&&(Te=k.sb(xe-8)):k.skip(xe-8),Y&&Te&&(xe=VG(Te,t.periodStart+ve/this.g,t.periodStart+e/this.g),c.push(xe))}while(te.sampleSize&&Pe<te.sampleSize)}return c.filter(Zu)};function VG(e,t,n){var r,u,c;return new kr().box("payl",Qu(function(d){r=Vr(d)})).box("iden",Qu(function(d){u=Vr(d)})).box("sttg",Qu(function(d){c=Vr(d)})).parse(e),r?zG(r,u,c,t,n):null}function zG(e,t,n,r,u){if(r=new Cn(r,u,""),YD(e,r,new Map),t&&(r.id=t),n)for(e=new zc(n),t=Yc(e);t;)$D(r,t,[]),Ad(e),t=Yc(e);return r}re("shaka.text.Mp4VttParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new Da};function Pa(){}Pa.prototype.parseInit=function(){},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e){var t=Vr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new zc(n[0]),u=QD(r),c=Hl(r,/,/g);if(r=QD(r),u==null||c==null||r==null)throw new pt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Cn(u,r,n.slice(1).join("\n").trim()))}return e};function QD(e){if(e=Hl(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.SbvTextParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Pa};function va(){this.g=new ko}va.prototype.parseInit=function(){},va.prototype.setSequenceMode=function(){},va.prototype.setManifestType=function(){},va.prototype.parseMedia=function(e,t,n){return e=Vr(e),e=JD(e),e=Qn(za(e)),this.g.parseMedia(e,t,n)};function JD(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}re("shaka.text.SrtTextParser",va),va.srt2webvtt=JD,va.prototype.parseMedia=va.prototype.parseMedia,va.prototype.setManifestType=va.prototype.setManifestType,va.prototype.setSequenceMode=va.prototype.setSequenceMode,va.prototype.parseInit=va.prototype.parseInit,ji["text/srt"]=function(){return new va};function Oa(){}Oa.prototype.parseInit=function(){},Oa.prototype.setSequenceMode=function(){},Oa.prototype.setManifestType=function(){},Oa.prototype.parseMedia=function(e){var t="",n="";e=Vr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next()){var u=WG.exec(r.value);u&&(r=u[1],u=u[2],r=="V4 Styles"||r=="V4+ Styles"?t=u:r=="Events"&&(n=u))}e=[],r=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=nP.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")r=c.split(my);else if(u=="Style"){u=c.split(my),c={};for(var d=0;d<r.length&&d<u.length;d++)c[r[d]]=u[d];e.push(c)}}for(r=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(d=nP.exec(c))){if(c=d[1].trim(),d=d[2].trim(),c=="Format")t=d.split(my);else if(c=="Dialogue"){d=d.split(my),c={};for(var h=0;h<t.length&&h<d.length;h++)c[t[h]]=d[h];h=tP(c.Start);var E=tP(c.End);d=new Cn(h,E,d.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(A){return function(k){return k.Name==A.re}}(u)))&&YG(d,c),r.push(d)}}return r};function YG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=eP(n))&&(e.color=n),(n=t.BackColour)&&(n=eP(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function eP(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function tP(e){return e=$G.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}re("shaka.text.SsaTextParser",Oa),Oa.prototype.parseMedia=Oa.prototype.parseMedia,Oa.prototype.setManifestType=Oa.prototype.setManifestType,Oa.prototype.setSequenceMode=Oa.prototype.setSequenceMode,Oa.prototype.parseInit=Oa.prototype.parseInit;var WG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,nP=/^\s*([^:]+):\s*(.*)/,my=/\s*,\s*/,$G=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new Oa};function rP(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function iP(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,Ea:"mp4a.40."+u}}function oP(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function XG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function La(e){this.i=e,this.h=0,this.g=new Map}g=La.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Do(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){for(var u=Qn(e),c=Nn(u),d=c.length;d<u.length&&!oP(u,d);d++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=iP(u,d),!n)return Promise.reject(new pt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];d<u.length;){var h=rP(u,d);if(!h)return Promise.reject(new pt(2,3,3018));var E=h.Qd+h.U;d+E<=u.length&&c.push({data:u.subarray(d+h.Qd,d+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),d+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Fp(e),this.h++,t=ci(r,t),Promise.resolve(t)},re("shaka.transmuxer.AacTransmuxer",La),La.prototype.transmux=La.prototype.transmux,La.prototype.getOriginalMimeType=La.prototype.getOriginalMimeType,La.prototype.convertCodecs=La.prototype.convertCodecs,La.prototype.isSupported=La.prototype.isSupported,La.prototype.destroy=La.prototype.destroy,wo("audio/aac",function(){return new La("audio/aac")},Ci);function aP(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,d=0;c===2?d+=2:(c&1&&c!==1&&(d+=2),c&4&&(d+=2)),d=(e[t+6]<<8|e[t+7])>>12-d&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|d<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+d,ga:e,U:u}}function QG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var d=Math.min(r,8),h=8-d;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<d|u:u,t+=1,r-=d}if(16>n)return!0}return!1}function rs(e){this.i=e,this.h=0,this.g=new Map}g=rs.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&!QG(e,c);c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=aP(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Fp(e),this.h++,t=ci(r,t),Promise.resolve(t)},re("shaka.transmuxer.Ac3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,wo("audio/ac3",function(){return new rs("audio/ac3")},Ci);function sP(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new xn(e.subarray(t+2));Gn(n,2),Gn(n,3);var r=bt(n,11)+1<<1,u=bt(n,2);if(u==3){u=bt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=bt(n,2);var d=bt(n,3),h=bt(n,1);return n=bt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|d<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][d]+h,ga:e,U:r})}function is(e){this.i=e,this.h=0,this.g=new Map}g=is.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=sP(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Fp(e),this.h++,t=ci(r,t),Promise.resolve(t)},re("shaka.transmuxer.Ec3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,wo("audio/ec3",function(){return new is("audio/ec3")},Ci);function JG(e){if(!e.length)return null;var t=e.find(function(Pe){return Pe.type==7});if(e=e.find(function(Pe){return Pe.type==8}),!t||!e)return null;var n=new xn(t.data),r=nt(n);if(nt(n),nt(n),En(n),tq.includes(r)&&(r=Lt(n),r===3&&Gn(n,1),En(n),En(n),Gn(n,1),st(n))){r=r!==3?8:12;for(var u=0;u<r;u++)st(n)&&(6>u?qt(n,16):qt(n,64))}if(En(n),r=Lt(n),r===0)Lt(n);else if(r===1)for(Gn(n,1),En(n),En(n),r=Lt(n),u=0;u<r;u++)En(n);En(n),Gn(n,1);var c=Lt(n),d=Lt(n),h=bt(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,A=0,k=0,G=0;if(st(n)&&(E=Lt(n),A=Lt(n),k=Lt(n),G=Lt(n)),u=r=1,st(n)&&st(n)){var te=nt(n),Y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ve=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<te&&16>=te?(r=Y[te-1],u=ve[te-1]):te===255&&(r=bt(n,16),u=bt(n,16))}return n=(2-h)*(d+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*A,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:r,ya:u}}function eq(e){var t=!1,n=[],r=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var d=!1;switch(c.type){case 1:d=u=!0;var h=c.data;r&&4<h.length&&(h=Ve(new xn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=d=u=!0;break;case 6:d=!0;break;case 7:d=!0;break;case 8:d=!0;break;case 9:u=d=!0;break;case 12:d=!0;break;default:d=!1}u&&d&&(d=c.fullData.byteLength,h=new Uint8Array(4),h[0]=d>>24&255,h[1]=d>>16&255,h[2]=d>>8&255,h[3]=d&255,n.push(h),n.push(c.fullData))}return n.length?{data:ci.apply(Oi,T(n)),jd:t}:null}var tq=[100,110,122,244,44,83,86,118,128,138,139,134];function nq(e){if(!e.length)return null;var t=e.find(function(d){return d.type==32}),n=e.find(function(d){return d.type==33}),r=e.find(function(d){return d.type==34});if(!t||!n||!r)return null;var u=rq(t.fullData);e=iq(n.fullData);var c=oq(r.fullData);return t=aq(t.fullData,n.fullData,r.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function rq(e){var t=new xn(e,!0);return nt(t),nt(t),bt(t,4),bt(t,2),bt(t,6),e=bt(t,3),t=st(t),{jf:e+1,Gf:t}}function iq(e){e=new xn(e,!0),nt(e),nt(e);var t=0,n=0,r=0,u=0;bt(e,4);var c=bt(e,3);st(e);for(var d=bt(e,2),h=bt(e,1),E=bt(e,5),A=nt(e),k=nt(e),G=nt(e),te=nt(e),Y=nt(e),ve=nt(e),Pe=nt(e),xe=nt(e),Ge=nt(e),Te=nt(e),We=nt(e),Ue=[],gt=[],Rt=0;Rt<c;Rt++)Ue.push(st(e)),gt.push(st(e));if(0<c)for(Rt=c;8>Rt;Rt++)bt(e,2);for(Rt=0;Rt<c;Rt++)Ue[Rt]&&bt(e,88),gt[Rt]&&nt(e);Lt(e),Ue=Lt(e),Ue==3&&bt(e,1),gt=Lt(e),Rt=Lt(e),st(e)&&(t+=Lt(e),n+=Lt(e),r+=Lt(e),u+=Lt(e));var Ht=Lt(e),Ut=Lt(e),yt=Lt(e);if(st(e))for(var jt=0;jt<=c;jt++)Lt(e),Lt(e),Lt(e);else Lt(e),Lt(e),Lt(e);if(Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),st(e)&&st(e))for(jt=0;4>jt;jt++)for(var ln=0;ln<(jt===3?2:6);ln++)if(st(e)){var gn=Math.min(64,1<<4+(jt<<1));1<jt&&On(e);for(var Ln=0;Ln<gn;Ln++)On(e)}else Lt(e);for(st(e),st(e),st(e)&&(nt(e),Lt(e),Lt(e),st(e)),jt=Lt(e),gn=ln=0;gn<jt;gn++)if(Ln=!1,gn!==0&&(Ln=st(e)),Ln){gn===jt&&Lt(e),st(e),Lt(e);for(var Mn=Ln=0;Mn<=ln;Mn++){var qn=st(e),Yn=!1;qn||(Yn=st(e)),(qn||Yn)&&Ln++}ln=Ln}else{for(Mn=Lt(e),Ln=Lt(e),ln=Mn+Ln,qn=0;qn<Mn;qn++)Lt(e),st(e);for(Mn=0;Mn<Ln;Mn++)Lt(e),st(e)}if(st(e))for(jt=Lt(e),ln=0;ln<jt;ln++){for(gn=0;gn<yt+4;gn++)bt(e,1);bt(e,1)}if(jt=yt=1,ln=0,st(e),st(e),st(e)){if(st(e)&&(gn=nt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<gn&&16>=gn?(yt=Ln[gn-1],jt=Mn[gn-1]):gn===255&&(yt=bt(e,16),jt=bt(e,16))),st(e)&&st(e),st(e)&&(bt(e,3),st(e),st(e)&&(nt(e),nt(e),nt(e))),st(e)&&(Lt(e),Lt(e)),st(e),st(e),st(e),(gn=st(e))&&(Lt(e),Lt(e),Lt(e),Lt(e)),st(e)&&(bt(e,32),bt(e,32),st(e)&&Lt(e),st(e)))for(Mn=!1,gn=st(e),Ln=st(e),(gn||Ln)&&((Mn=st(e))&&(nt(e),bt(e,5),st(e),bt(e,5)),bt(e,4),bt(e,4),Mn&&bt(e,4),bt(e,5),bt(e,5),bt(e,5)),qn=0;qn<=c;qn++){var Kn=!0;Yn=1,st(e)||(Kn=st(e));var xr=!1;if(Kn?Lt(e):xr=st(e),xr||(Yn=Lt(e)+1),gn){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));st(e)}if(Ln){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));st(e)}}st(e)&&(st(e),st(e),st(e),ln=Lt(e),Lt(e),Lt(e),Lt(e),Lt(e))}return{Ke:We,Qe:d,Re:h,Pe:E,Le:A,Me:k,Ne:G,Oe:te,Ee:Y,Fe:ve,Ge:Pe,He:xe,Ie:Ge,Je:Te,be:ln,Be:0,Ae:Ue,ze:Ht,ye:Ut,width:gt-(t+n)*(Ue===1||Ue===2?2:1),height:Rt-(r+u)*(Ue===1?2:1),pi:yt,oi:jt}}function oq(e){var t=new xn(e,!0);nt(t),nt(t),Lt(t),Lt(t),st(t),st(t),bt(t,3),st(t),st(t),Lt(t),Lt(t),On(t),st(t),st(t),st(t)&&Lt(t),On(t),On(t),st(t),st(t),st(t),st(t),e=st(t),t=st(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function aq(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.Qe&3)<<6|(r.Re?1:0)<<5|r.Pe&31,u[2]=r.Le,u[3]=r.Me,u[4]=r.Ne,u[5]=r.Oe,u[6]=r.Ee,u[7]=r.Fe,u[8]=r.Ge,u[9]=r.He,u[10]=r.Ie,u[11]=r.Je,u[12]=r.Ke,u[13]=240|(r.be&3840)>>8,u[14]=r.be&255,u[15]=252|r.pf&3,u[16]=252|r.Ae&3,u[17]=248|r.ze&7,u[18]=248|r.ye&7,u[19]=0,u[20]=0,u[21]=(r.Be&3)<<6|(r.jf&7)<<3|(r.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function vy(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var d=e[t+3]>>6;u=1e3*sq[14*(n===3?3-r:r===3?3:4)+u-1],c=uq[3*(n===3?0:n===2?1:2)+c],n=lq[n][r];var h=cq[r],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&r===2&&224e3<=u&&d===0&&(e[t+3]|=128),{sampleRate:c,channelCount:d===3?1:2,U:E,ni:8*n*h}}return null}function uP(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function lP(e,t){if(t+1<e.length&&uP(e,t)){var n=vy(e,t),r=4;return n&&n.U&&(r=n.U),t+=r,t===e.length||t+1<e.length&&uP(e,t)}return!1}var sq=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],uq=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],lq=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],cq=[0,1,1,4];function os(e){this.i=e,this.h=0,this.g=new Map}g=os.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){n=Qn(e);for(var u=Nn(n).length;u<n.length&&!lP(n,u);u++);var c;for(e=[];u<n.length;){var d=vy(n,u);if(!d)return Promise.reject(new pt(2,3,3018));c||(c=d),u+d.U<=n.length&&e.push({data:n.subarray(u,u+d.U),size:d.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=d.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(c),this.g.set(t.id,r)),t=Fp(c),this.h++,t=ci(r,t),Promise.resolve(t)):Promise.reject(new pt(2,3,3018))},re("shaka.transmuxer.Mp3Transmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,wo("audio/mpeg",function(){return new os("audio/mpeg")},Ci);function as(e){this.h=e,this.g=null}g=as.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Do(e).split(","),n=Co("audio",t);return t=Co("video",t),!n||t||ba(n)!="mp3"?!1:Ot(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new Ke,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new pt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(r=vy(t,n))?(n+r.U<=t.length&&(u=ci(u,t.subarray(n,n+r.U))),n+=r.U):n++;return Promise.resolve(u)},re("shaka.transmuxer.MpegTsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy,wo("video/mp2t",function(){return new as("video/mp2t")},Il);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function ka(e){this.h=e,(this.g=tT.get("ISOBoxer")())&&fq(this)}function fq(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==dq[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=ka.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new pt(2,3,3020));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var d=u.fetch("tfdt"),h=u.fetch("traf");d===null&&(d=this.g.createFullBox("tfdt",h,c),d.version=1,d.flags=0,d.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var te=u.fetch("saio");if(te===null){te=this.g.createFullBox("saio",h),te.version=0,te.flags=0,te.entry_count=1,te.offset=[0];var Y=this.g.createFullBox("saiz",h);if(Y.version=0,Y.flags=0,Y.sample_count=G.sample_count,Y.default_sample_info_size=0,Y.sample_info_size=[],G.flags&2)for(r=0;r<G.sample_count;r+=1)Y.sample_info_size[r]=10+6*G.entry[r].NumberOfEntries;else Y.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ve=u.fetch("moof");E.data_offset=ve.getLength()+8;var Pe=u.fetch("saio");Pe!==null&&(Pe.offset[0]=cP(ve,"traf")+cP(h,"senc")+16);var xe=Qn(u.write());return Promise.resolve(xe)}catch(Ge){return Ge instanceof pt?Promise.reject(Ge):Promise.reject(new pt(2,3,3022))}};function cP(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}re("shaka.transmuxer.MssTransmuxer",ka),ka.prototype.transmux=ka.prototype.transmux,ka.prototype.getOriginalMimeType=ka.prototype.getOriginalMimeType,ka.prototype.convertCodecs=ka.prototype.convertCodecs,ka.prototype.isSupported=ka.prototype.isSupported,ka.prototype.destroy=ka.prototype.destroy;var dq=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);wo("mss/audio/mp4",function(){return new ka("mss/audio/mp4")},Ci),wo("mss/video/mp4",function(){return new ka("mss/video/mp4")},Ci);function ss(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=ss.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Do(n).split(",");return n=Co("audio",r),r=Co("video",r),n&&(n=ba(n),!hq.includes(n))||r&&(n=ba(r),!pq.includes(n))?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Do(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,r,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var d=Nn(c),h=d.length;h<c.length;h++)if(lP(c,h))return Promise.reject(new pt(2,3,3018));for(h=d.length;h<c.length;h++)if(oP(c,h))return this.h||(this.h=new La("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new pt(2,3,3018))}this.j?this.j.clearData():this.j=new Ke;var E=this.j.parse(c),A=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var te=[],Y=null,ve=[],Pe=E.xc();if(!Pe.length)throw new pt(2,3,3023);for(var xe=0;xe<Pe.length;xe++){var Ge=Pe[xe],Te=Ge.nalus;ve.push.apply(ve,T(Te));var We=eq(Te);if(We){Y==null&&(Y=Ge.dts);var Ue=void 0;Ue=xe+1<Pe.length?(Pe[xe+1].dts||0)-(Ge.dts||0):1<Pe.length?(Ge.dts||0)-(Pe[xe-1].dts||0):9e4*(n.endTime-n.startTime),te.push({data:We.data,size:We.data.byteLength,duration:Ue,Ta:Math.round((Ge.pts||0)-(Ge.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:We.jd?2:1,Wa:We.jd?0:1}})}}var gt=JG(ve);if(!gt||Y==null)throw new pt(2,3,3018);t.height=gt.height,t.width=gt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:gt.oa,xa:gt.xa,ya:gt.ya,data:{jb:this.g,baseMediaDecodeTime:Y,Ra:te},stream:t};break;case"hvc":var Rt=[],Ht=null,Ut=[],yt=E.xc();if(!yt.length)throw new pt(2,3,3023);for(var jt=0;jt<yt.length;jt++){var ln=yt[jt],gn=ln.nalus;Ut.push.apply(Ut,T(gn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(gn),Kn=Yn.next();!Kn.done;Kn=Yn.next()){var xr=Kn.value;switch(xr.type){case 1:case 0:var di=qn=!0;break;case 19:case 20:case 21:Ln=di=qn=!0;break;case 32:di=!0;break;case 33:di=!0;break;case 34:di=!0;break;case 35:qn=di=!0;break;case 39:case 40:di=!0;break;default:di=!1}if(qn&&di){var ki=xr.fullData.byteLength,fi=new Uint8Array(4);fi[0]=ki>>24&255,fi[1]=ki>>16&255,fi[2]=ki>>8&255,fi[3]=ki&255,Mn.push(fi),Mn.push(xr.fullData)}}var mi=Mn.length?{data:ci.apply(Oi,T(Mn)),jd:Ln}:null;if(mi){Ht==null&&ln.dts!=null&&(Ht=ln.dts);var Gr=void 0;Gr=jt+1<yt.length?(yt[jt+1].dts||0)-(ln.dts||0):1<yt.length?(ln.dts||0)-(yt[jt-1].dts||0):9e4*(n.endTime-n.startTime),Rt.push({data:mi.data,size:mi.data.byteLength,duration:Gr,Ta:Math.round((ln.pts||0)-(ln.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:mi.jd?2:1,Wa:mi.jd?0:1}})}}var ho=nq(Ut);if(!ho||Ht==null)throw new pt(2,3,3018);t.height=ho.height,t.width=ho.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:ho.oa,xa:ho.xa,ya:ho.ya,data:{jb:this.g,baseMediaDecodeTime:Ht,Ra:Rt},stream:t}}G&&(A.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Fo=[],si,Ys=null,Xc=m(E.Fb()),Qc=Xc.next();!Qc.done;Qc=Xc.next()){var Md=Qc.value,fl=Md.data;if(fl){var Ws=0;if(si=iP(fl,Ws),!si)throw new pt(2,3,3018);for(t.audioSamplingRate=si.sampleRate,t.channelsCount=si.channelCount,Ys==null&&Md.pts!==null&&(Ys=Md.pts);Ws<fl.length;){var dl=rP(fl,Ws);if(dl){var zl=dl.Qd+dl.U;Ws+zl<=fl.length&&Fo.push({data:fl.subarray(Ws+dl.Qd,Ws+zl),size:dl.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ws+=zl}else Ws++}}}if(!si||Ys==null){if(!E.xc().length)throw new pt(2,3,3018);Ys=9e4*n.startTime;var Dd=Co("audio",t.codecs.split(","));if(!Dd||!t.channelsCount||!t.audioSamplingRate)throw new pt(2,3,3018);si={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:Dd};var Pd=XG(Dd,t.channelsCount);if(!Pd)throw new pt(2,3,3018);for(var Ey=Ys+9e4*(n.endTime-n.startTime),Od=Ys;Od<Ey;)Fo.push({data:Pd,size:Pd.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Od+=1024/si.sampleRate*9e4}var $p=si.sampleRate,_y=Ys/9e4*$p;G={id:t.id,type:"audio",codecs:si.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:$p,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:_y,Ra:Fo},stream:t};break;case"ac3":for(var ws=[],Ty=0,YT=new Uint8Array([]),Sy=null,SP=m(E.Fb()),WT=SP.next();!WT.done;WT=SP.next()){var $T=WT.value,XT=$T.data;Sy==null&&$T.pts!==null&&(Sy=$T.pts);for(var Ld=0;Ld<XT.length;){var Yl=aP(XT,Ld);Yl?(t.audioSamplingRate=Yl.sampleRate,t.channelsCount=Yl.channelCount,Ty=Yl.sampleRate,YT=Yl.ga,ws.push({data:XT.subarray(Ld,Ld+Yl.U),size:Yl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ld+=Yl.U):Ld++}}if(Ty==0||YT.byteLength==0||Sy==null)throw new pt(2,3,3018);var vq=Sy/9e4*Ty;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ty,duration:r,Sa:[],ga:YT,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:vq,Ra:ws},stream:t};break;case"ec3":for(var wP=[],wy=0,QT=new Uint8Array([]),Ay=null,AP=m(E.Fb()),JT=AP.next();!JT.done;JT=AP.next()){var e1=JT.value,t1=e1.data;Ay==null&&e1.pts!==null&&(Ay=e1.pts);for(var kd=0;kd<t1.length;){var Wl=sP(t1,kd);Wl?(t.audioSamplingRate=Wl.sampleRate,t.channelsCount=Wl.channelCount,wy=Wl.sampleRate,QT=Wl.ga,wP.push({data:t1.subarray(kd,kd+Wl.U),size:Wl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),kd+=Wl.U):kd++}}if(wy==0||QT.byteLength==0||Ay==null)throw new pt(2,3,3018);var yq=Ay/9e4*wy;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:wy,duration:r,Sa:[],ga:QT,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:yq,Ra:wP},stream:t};break;case"mp3":for(var IP=[],Iy,by=null,bP=m(E.Fb()),n1=bP.next();!n1.done;n1=bP.next()){var r1=n1.value,Xp=r1.data;if(Xp){by==null&&r1.pts!==null&&(by=r1.pts);for(var Jc=0;Jc<Xp.length;){var Fd=vy(Xp,Jc);Fd?(Iy||(Iy=Fd),Jc+Fd.U<=Xp.length&&IP.push({data:Xp.subarray(Jc,Jc+Fd.U),size:Fd.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Jc+=Fd.U):Jc++}}}if(!Iy||by==null)throw new pt(2,3,3018);var CP=Iy.sampleRate,Eq=by/9e4*CP;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:CP,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:Eq,Ra:IP},stream:t};break;case"opus":var RP=[],Cy=null,Au=E.F;if(!Au)throw new pt(2,3,3018);var Uo=[];switch(Au.Zg){case 1:case 2:Uo=[0];break;case 0:Uo=[255,1,1,0,1];break;case 128:Uo=[255,2,0,0,1];break;case 3:Uo=[1,2,1,0,2,1];break;case 4:Uo=[1,2,2,0,1,2,3];break;case 5:Uo=[1,3,2,0,4,1,2,3];break;case 6:Uo=[1,4,2,0,4,1,2,3,5];break;case 7:Uo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Uo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Uo=[1,1,2,0,1];break;case 131:Uo=[1,1,3,0,1,2];break;case 132:Uo=[1,1,4,0,1,2,3];break;case 133:Uo=[1,1,5,0,1,2,3,4];break;case 134:Uo=[1,1,6,0,1,2,3,4,5];break;case 135:Uo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Uo=[1,1,8,0,1,2,3,4,5,6,7]}for(var NP=new Uint8Array([0,Au.channelCount,0,0,Au.sampleRate>>>24&255,Au.sampleRate>>>17&255,Au.sampleRate>>>8&255,Au.sampleRate>>>0&255,0,0].concat(T(Uo))),xP=Au.sampleRate,MP=m(E.Fb()),i1=MP.next();!i1.done;i1=MP.next()){var o1=i1.value,Ud=o1.data;Cy==null&&o1.pts!==null&&(Cy=o1.pts);for(var Qp=0;Qp<Ud.length;){for(var _q=(Ud[Qp+1]&16)!==0,Tq=(Ud[Qp+1]&8)!==0,hl=Qp+2,Ry=0;Ud[hl]===255;)Ry+=255,hl+=1;Ry+=Ud[hl],hl+=1,hl+=_q?2:0,hl+=Tq?2:0;var DP=Ud.slice(hl,hl+Ry);RP.push({data:DP,size:DP.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Qp=hl+Ry}}if(NP.byteLength==0||Cy==null)throw new pt(2,3,3018);t.audioSamplingRate=Au.sampleRate,t.channelsCount=Au.channelCount;var Sq=Cy/9e4*xP;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:xP,duration:r,Sa:[],ga:NP,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:Sq,Ra:RP},stream:t}}G&&(A.push(G),G=null)}}catch(s1){return s1&&s1.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(s1)}if(!A.length)return Promise.reject(new pt(2,3,3018));var PP=new bd(A);if(this.i.has(t.id))var a1=this.i.get(t.id);else a1=Cd(PP),this.i.set(t.id,a1);var wq=Fp(PP);this.g++;var Aq=ci(a1,wq);return Promise.resolve(Aq)},re("shaka.transmuxer.TsTransmuxer",ss),ss.prototype.transmux=ss.prototype.transmux,ss.prototype.getOriginalMimeType=ss.prototype.getOriginalMimeType,ss.prototype.convertCodecs=ss.prototype.convertCodecs,ss.prototype.isSupported=ss.prototype.isSupported,ss.prototype.destroy=ss.prototype.destroy;var hq=["aac","ac-3","ec-3","mp3","opus"],pq=["avc","hevc"];wo("video/mp2t",function(){return new ss("video/mp2t")},lu);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function fP(){}var Yp;function dP(){Yp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Yp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=gq):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function gq(e,t){var n=this,r;return Oe(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),N(u,Yp.call(n,e,t),2)):(r=u.h,_P(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Yp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=hP,u.return(hP.call(n,e,t))))})}function hP(e,t){var n=this,r,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=EP(e),u=[],c=m(t),d=c.next();!d.done;d=c.next())h=d.value,E=pP(h.videoCapabilities,r),A=pP(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=A,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return N(Y,Yp.call(n,e,u),2)}return te=Y.h,Y.return(new yy(te,r))})}function pP(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}re("EmeEncryptionSchemePolyfill",fP),fP.install=dP;function gP(){}var Wp;function mP(){Wp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Wp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=mq):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function mq(e){var t=this,n,r,u;return Oe(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),N(c,Wp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((r=n.keySystemAccess)&&_P(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Wp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=vP,r){c.u(3);break}return u=n,N(c,yP(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(vP.call(t,e))}})}function vP(e){var t=this,n,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,u=r.keySystem,c=r.audio&&r.audio.encryptionScheme,d=r.video&&r.video.encryptionScheme,n=EP(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||d&&d!=n)?k.return(h):N(k,Wp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new yy(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return A=E,N(k,yP(e),5);case 5:A.keySystemAccess=k.h;case 3:return k.return(E)}})}function yP(e){var t,n;return Oe(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],d=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&d.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),d.length&&(u.videoCapabilities=d),t=u,N(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}re("McEncryptionSchemePolyfill",gP),gP.install=mP;function yy(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}yy.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},yy.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function EP(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function _P(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function zT(){}function TP(){dP(),mP()}re("EncryptionSchemePolyfills",zT),zT.install=TP,typeof b<"u"&&b.exports&&(b.exports=zT)}).call(l,o,o,void 0);for(var f in l.shaka)i[f]=l.shaka[f]})()})(Y4);const Yy=Eb(Y4),af=class af{static async setup_stream(o,l,f){if(this.licenseUrl=l,this.customDrmHeaders=f,!o.mediaKeys)try{const p=await this.get_media_keys(o);if(p){await o.setMediaKeys(p.mediaKey);const S=p.mediaKey.createSession();this.on_handle_license_messageEvent=async b=>{await this.handle_license_messageEvent(p.mediaKey,S,b)},this.on_handle_encrypted_event=async b=>{await this.handle_encrypted_event(p,S,b)},S.addEventListener("message",this.on_handle_license_messageEvent),o.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(o){for(let l=0;l<o;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(o){const l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);this.mediaKey_pool.length>0&&l&&(await o.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(o){const l=this.mediaKey_pool.find(f=>f.mediaKey===o);return l?l.id:null}static async get_media_keys(o){let l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(f=>f.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(f=>!f.htmlMediaElement),l)return l.htmlMediaElement=o,l;throw new Error("No media keys available")}static async handle_license_messageEvent(o,l,f){try{const p=f.message.byteLength;console.log(p,"byteLength");let S;p===2?S=p.toString():S="".concat(this.get_mediaKey_id(o),"-").concat(p);let b;this.license_cache.has(S)?(console.log("using cached licence"),b=this.license_cache.get(S)):(b=await(await fetch(this.licenseUrl,{method:"POST",body:f.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),b?this.license_cache.set(S,b):console.error("License response is null")),b?await l.update(b):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(o,l,f){if(f.initDataType&&f.initData)try{if(!o.isInitialized){o.isInitialized=!0;const p=this.mediaKey_pool.findIndex(S=>S.id===o.id);p!==-1&&(this.mediaKey_pool[p]=o),await l.generateRequest(f.initDataType,f.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};af.licenseUrl="",af.customDrmHeaders={},af.license_cache=new Map,af.mediaKey_pool=[],af.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let ab=af;class Fz extends z4{constructor(o){var l;super(o),this.name="ShakaEngine",this.addPolicyToRequests=(f,p)=>{switch(f){case Yy.net.NetworkingEngine.RequestType.MANIFEST:case Yy.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case Yy.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([S,b])=>{p.headers[S]=b});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new Yy.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(o){var l;if(this.player&&o){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await ab.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(f){console.log(f)}await this.player.attach(this.options.element),await this.player.load(o,void 0)}}}class Uz extends bf{constructor(o){super(),this.options=o,this.options.preferredTech==="shaka"?this.engine=new Fz(o):this.engine=new kz(o),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(o,l){this.emit(o,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(o,l){this.currentSource=o,await this.engine.load(o,l)}}class Bz extends bf{constructor(o){var l;super(),this.options=o,this._eventsEmitted=!1,this.eventClock=o.eventClock,this.containerElement=o.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new Uz({autoPlay:!1,...o.playerOptions,element:this.videoElement})}get currentSource(){var o;return(o=this.player)==null?void 0:o.currentSource}get currentCamera(){return this._currentCamera}get stats(){var o;return(o=this.player)==null?void 0:o.engine.getStats()}logPlayerStuff(){console.log("Bitrate",this.player.engine.video.getVideoPlaybackQuality()),console.log("Time",this.player.engine.video.currentTime),console.log("Paused",this.player.engine.video.paused)}propagateEvent(o,l){this.emit(o,l)}async load(o,l,f){return this.eventClock.loading=!0,new Promise((p,S)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),this.player.load(l,f).then(()=>{this.player.once("playing",()=>{this._currentCamera=o,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0))}),this.eventClock.loading=!1;const b=((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0),g=this.eventClock.getExpectedPositionInSeconds()-b;Math.sign(g)<0?setTimeout(()=>{this.videoElement.play(),p()},Math.abs(g)*1e3):(this.videoElement.currentTime=g,this.videoElement.play(),p())})}catch(b){console.error(b),S(b)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.player.destroy()}}var ug=function(i){return i&&i.Math===Math&&i},Ga=ug(typeof globalThis=="object"&&globalThis)||ug(typeof window=="object"&&window)||ug(typeof self=="object"&&self)||ug(typeof nu=="object"&&nu)||ug(typeof nu=="object"&&nu)||function(){return this}()||Function("return this")(),LC={},gs=function(i){try{return!!i()}catch(o){return!0}},jz=gs,yc=!jz(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Zz=gs,kC=!Zz(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),Gz=kC,Wy=Function.prototype.call,Al=Gz?Wy.bind(Wy):function(){return Wy.apply(Wy,arguments)},W4={},$4={}.propertyIsEnumerable,X4=Object.getOwnPropertyDescriptor,qz=X4&&!$4.call({1:2},1);W4.f=qz?function(o){var l=X4(this,o);return!!l&&l.enumerable}:$4;var Q4=function(i,o){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:o}},J4=kC,eB=Function.prototype,sb=eB.call,Hz=J4&&eB.bind.bind(sb,sb),Aa=J4?Hz:function(i){return function(){return sb.apply(i,arguments)}},tB=Aa,Kz=tB({}.toString),Vz=tB("".slice),gE=function(i){return Vz(Kz(i),8,-1)},zz=Aa,Yz=gs,Wz=gE,LA=Object,$z=zz("".split),Xz=Yz(function(){return!LA("z").propertyIsEnumerable(0)})?function(i){return Wz(i)==="String"?$z(i,""):LA(i)}:LA,mE=function(i){return i==null},Qz=mE,Jz=TypeError,am=function(i){if(Qz(i))throw new Jz("Can't call method on "+i);return i},eY=Xz,tY=am,vE=function(i){return eY(tY(i))},kA=typeof document=="object"&&document.all,qa=typeof kA>"u"&&kA!==void 0?function(i){return typeof i=="function"||i===kA}:function(i){return typeof i=="function"},nY=qa,Rh=function(i){return typeof i=="object"?i!==null:nY(i)},FA=Ga,rY=qa,iY=function(i){return rY(i)?i:void 0},FC=function(i,o){return arguments.length<2?iY(FA[i]):FA[i]&&FA[i][o]},oY=Aa,nB=oY({}.isPrototypeOf),aY=typeof navigator<"u"&&String(navigator.userAgent)||"",rB=Ga,UA=aY,iF=rB.process,oF=rB.Deno,aF=iF&&iF.versions||oF&&oF.version,sF=aF&&aF.v8,tu,j0;sF&&(tu=sF.split("."),j0=tu[0]>0&&tu[0]<4?1:+(tu[0]+tu[1]));!j0&&UA&&(tu=UA.match(/Edge\/(\d+)/),(!tu||tu[1]>=74)&&(tu=UA.match(/Chrome\/(\d+)/),tu&&(j0=+tu[1])));var sY=j0,uF=sY,uY=gs,lY=Ga,cY=lY.String,iB=!!Object.getOwnPropertySymbols&&!uY(function(){var i=Symbol("symbol detection");return!cY(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&uF&&uF<41}),fY=iB,oB=fY&&!Symbol.sham&&typeof Symbol.iterator=="symbol",dY=FC,hY=qa,pY=nB,gY=oB,mY=Object,aB=gY?function(i){return typeof i=="symbol"}:function(i){var o=dY("Symbol");return hY(o)&&pY(o.prototype,mY(i))},vY=String,yY=function(i){try{return vY(i)}catch(o){return"Object"}},EY=qa,_Y=yY,TY=TypeError,SY=function(i){if(EY(i))return i;throw new TY(_Y(i)+" is not a function")},wY=SY,AY=mE,UC=function(i,o){var l=i[o];return AY(l)?void 0:wY(l)},BA=Al,jA=qa,ZA=Rh,IY=TypeError,bY=function(i,o){var l,f;if(o==="string"&&jA(l=i.toString)&&!ZA(f=BA(l,i))||jA(l=i.valueOf)&&!ZA(f=BA(l,i))||o!=="string"&&jA(l=i.toString)&&!ZA(f=BA(l,i)))return f;throw new IY("Can't convert object to primitive value")},sB={exports:{}},lF=Ga,CY=Object.defineProperty,BC=function(i,o){try{CY(lF,i,{value:o,configurable:!0,writable:!0})}catch(l){lF[i]=o}return o},RY=Ga,NY=BC,cF="__core-js_shared__",fF=sB.exports=RY[cF]||NY(cF,{});(fF.versions||(fF.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var jC=sB.exports,dF=jC,ZC=function(i,o){return dF[i]||(dF[i]=o||{})},xY=am,MY=Object,uB=function(i){return MY(xY(i))},DY=Aa,PY=uB,OY=DY({}.hasOwnProperty),Ec=Object.hasOwn||function(o,l){return OY(PY(o),l)},LY=Aa,kY=0,FY=Math.random(),UY=LY(1 .toString),lB=function(i){return"Symbol("+(i===void 0?"":i)+")_"+UY(++kY+FY,36)},BY=Ga,jY=ZC,hF=Ec,ZY=lB,GY=iB,qY=oB,rh=BY.Symbol,GA=jY("wks"),HY=qY?rh.for||rh:rh&&rh.withoutSetter||ZY,Cf=function(i){return hF(GA,i)||(GA[i]=GY&&hF(rh,i)?rh[i]:HY("Symbol."+i)),GA[i]},KY=Al,pF=Rh,gF=aB,VY=UC,zY=bY,YY=Cf,WY=TypeError,$Y=YY("toPrimitive"),XY=function(i,o){if(!pF(i)||gF(i))return i;var l=VY(i,$Y),f;if(l){if(o===void 0&&(o="default"),f=KY(l,i,o),!pF(f)||gF(f))return f;throw new WY("Can't convert object to primitive value")}return o===void 0&&(o="number"),zY(i,o)},QY=XY,JY=aB,cB=function(i){var o=QY(i,"string");return JY(o)?o:o+""},eW=Ga,mF=Rh,ub=eW.document,tW=mF(ub)&&mF(ub.createElement),fB=function(i){return tW?ub.createElement(i):{}},nW=yc,rW=gs,iW=fB,dB=!nW&&!rW(function(){return Object.defineProperty(iW("div"),"a",{get:function(){return 7}}).a!==7}),oW=yc,aW=Al,sW=W4,uW=Q4,lW=vE,cW=cB,fW=Ec,dW=dB,vF=Object.getOwnPropertyDescriptor;LC.f=oW?vF:function(o,l){if(o=lW(o),l=cW(l),dW)try{return vF(o,l)}catch(f){}if(fW(o,l))return uW(!aW(sW.f,o,l),o[l])};var sm={},hW=yc,pW=gs,hB=hW&&pW(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),gW=Rh,mW=String,vW=TypeError,Rf=function(i){if(gW(i))return i;throw new vW(mW(i)+" is not an object")},yW=yc,EW=dB,_W=hB,$y=Rf,yF=cB,TW=TypeError,qA=Object.defineProperty,SW=Object.getOwnPropertyDescriptor,HA="enumerable",KA="configurable",VA="writable";sm.f=yW?_W?function(o,l,f){if($y(o),l=yF(l),$y(f),typeof o=="function"&&l==="prototype"&&"value"in f&&VA in f&&!f[VA]){var p=SW(o,l);p&&p[VA]&&(o[l]=f.value,f={configurable:KA in f?f[KA]:p[KA],enumerable:HA in f?f[HA]:p[HA],writable:!1})}return qA(o,l,f)}:qA:function(o,l,f){if($y(o),l=yF(l),$y(f),EW)try{return qA(o,l,f)}catch(p){}if("get"in f||"set"in f)throw new TW("Accessors not supported");return"value"in f&&(o[l]=f.value),o};var wW=yc,AW=sm,IW=Q4,GC=wW?function(i,o,l){return AW.f(i,o,IW(1,l))}:function(i,o,l){return i[o]=l,i},pB={exports:{}},lb=yc,bW=Ec,gB=Function.prototype,CW=lb&&Object.getOwnPropertyDescriptor,qC=bW(gB,"name"),RW=qC&&(function(){}).name==="something",NW=qC&&(!lb||lb&&CW(gB,"name").configurable),xW={EXISTS:qC,PROPER:RW,CONFIGURABLE:NW},MW=Aa,DW=qa,cb=jC,PW=MW(Function.toString);DW(cb.inspectSource)||(cb.inspectSource=function(i){return PW(i)});var OW=cb.inspectSource,LW=Ga,kW=qa,EF=LW.WeakMap,FW=kW(EF)&&/native code/.test(String(EF)),UW=ZC,BW=lB,_F=UW("keys"),mB=function(i){return _F[i]||(_F[i]=BW(i))},HC={},jW=FW,vB=Ga,ZW=Rh,GW=GC,zA=Ec,YA=jC,qW=mB,HW=HC,TF="Object already initialized",fb=vB.TypeError,KW=vB.WeakMap,Z0,zg,G0,VW=function(i){return G0(i)?zg(i):Z0(i,{})},zW=function(i){return function(o){var l;if(!ZW(o)||(l=zg(o)).type!==i)throw new fb("Incompatible receiver, "+i+" required");return l}};if(jW||YA.state){var Ru=YA.state||(YA.state=new KW);Ru.get=Ru.get,Ru.has=Ru.has,Ru.set=Ru.set,Z0=function(i,o){if(Ru.has(i))throw new fb(TF);return o.facade=i,Ru.set(i,o),o},zg=function(i){return Ru.get(i)||{}},G0=function(i){return Ru.has(i)}}else{var jd=qW("state");HW[jd]=!0,Z0=function(i,o){if(zA(i,jd))throw new fb(TF);return o.facade=i,GW(i,jd,o),o},zg=function(i){return zA(i,jd)?i[jd]:{}},G0=function(i){return zA(i,jd)}}var yB={set:Z0,get:zg,has:G0,enforce:VW,getterFor:zW},KC=Aa,YW=gs,WW=qa,Xy=Ec,db=yc,$W=xW.CONFIGURABLE,XW=OW,EB=yB,QW=EB.enforce,JW=EB.get,SF=String,d0=Object.defineProperty,e$=KC("".slice),t$=KC("".replace),n$=KC([].join),r$=db&&!YW(function(){return d0(function(){},"length",{value:8}).length!==8}),i$=String(String).split("String"),o$=pB.exports=function(i,o,l){e$(SF(o),0,7)==="Symbol("&&(o="["+t$(SF(o),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(o="get "+o),l&&l.setter&&(o="set "+o),(!Xy(i,"name")||$W&&i.name!==o)&&(db?d0(i,"name",{value:o,configurable:!0}):i.name=o),r$&&l&&Xy(l,"arity")&&i.length!==l.arity&&d0(i,"length",{value:l.arity});try{l&&Xy(l,"constructor")&&l.constructor?db&&d0(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch(p){}var f=QW(i);return Xy(f,"source")||(f.source=n$(i$,typeof o=="string"?o:"")),i};Function.prototype.toString=o$(function(){return WW(this)&&JW(this).source||XW(this)},"toString");var a$=pB.exports,s$=qa,u$=sm,l$=a$,c$=BC,_B=function(i,o,l,f){f||(f={});var p=f.enumerable,S=f.name!==void 0?f.name:o;if(s$(l)&&l$(l,S,f),f.global)p?i[o]=l:c$(o,l);else{try{f.unsafe?i[o]&&(p=!0):delete i[o]}catch(b){}p?i[o]=l:u$.f(i,o,{value:l,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return i},TB={},f$=Math.ceil,d$=Math.floor,h$=Math.trunc||function(o){var l=+o;return(l>0?d$:f$)(l)},p$=h$,yE=function(i){var o=+i;return o!==o||o===0?0:p$(o)},g$=yE,m$=Math.max,v$=Math.min,y$=function(i,o){var l=g$(i);return l<0?m$(l+o,0):v$(l,o)},E$=yE,_$=Math.min,SB=function(i){var o=E$(i);return o>0?_$(o,9007199254740991):0},T$=SB,S$=function(i){return T$(i.length)},w$=vE,A$=y$,I$=S$,wF=function(i){return function(o,l,f){var p=w$(o),S=I$(p);if(S===0)return!i&&-1;var b=A$(f,S),g;if(i&&l!==l){for(;S>b;)if(g=p[b++],g!==g)return!0}else for(;S>b;b++)if((i||b in p)&&p[b]===l)return i||b||0;return!i&&-1}},b$={includes:wF(!0),indexOf:wF(!1)},C$=Aa,WA=Ec,R$=vE,N$=b$.indexOf,x$=HC,AF=C$([].push),wB=function(i,o){var l=R$(i),f=0,p=[],S;for(S in l)!WA(x$,S)&&WA(l,S)&&AF(p,S);for(;o.length>f;)WA(l,S=o[f++])&&(~N$(p,S)||AF(p,S));return p},VC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],M$=wB,D$=VC,P$=D$.concat("length","prototype");TB.f=Object.getOwnPropertyNames||function(o){return M$(o,P$)};var AB={};AB.f=Object.getOwnPropertySymbols;var O$=FC,L$=Aa,k$=TB,F$=AB,U$=Rf,B$=L$([].concat),j$=O$("Reflect","ownKeys")||function(o){var l=k$.f(U$(o)),f=F$.f;return f?B$(l,f(o)):l},IF=Ec,Z$=j$,G$=LC,q$=sm,H$=function(i,o,l){for(var f=Z$(o),p=q$.f,S=G$.f,b=0;b<f.length;b++){var g=f[b];!IF(i,g)&&!(l&&IF(l,g))&&p(i,g,S(o,g))}},K$=gs,V$=qa,z$=/#|\.prototype\./,um=function(i,o){var l=W$[Y$(i)];return l===X$?!0:l===$$?!1:V$(o)?K$(o):!!o},Y$=um.normalize=function(i){return String(i).replace(z$,".").toLowerCase()},W$=um.data={},$$=um.NATIVE="N",X$=um.POLYFILL="P",Q$=um,Qy=Ga,J$=LC.f,eX=GC,tX=_B,nX=BC,rX=H$,iX=Q$,IB=function(i,o){var l=i.target,f=i.global,p=i.stat,S,b,g,w,F,C;if(f?b=Qy:p?b=Qy[l]||nX(l,{}):b=Qy[l]&&Qy[l].prototype,b)for(g in o){if(F=o[g],i.dontCallGetSet?(C=J$(b,g),w=C&&C.value):w=b[g],S=iX(f?g:l+(p?".":"#")+g,i.forced),!S&&w!==void 0){if(typeof F==typeof w)continue;rX(F,w)}(i.sham||w&&w.sham)&&eX(F,"sham",!0),tX(b,g,F,i)}},oX=Rh,aX=gE,sX=Cf,uX=sX("match"),lX=function(i){var o;return oX(i)&&((o=i[uX])!==void 0?!!o:aX(i)==="RegExp")},cX=Cf,fX=cX("toStringTag"),bB={};bB[fX]="z";var dX=String(bB)==="[object z]",hX=dX,pX=qa,h0=gE,gX=Cf,mX=gX("toStringTag"),vX=Object,yX=h0(function(){return arguments}())==="Arguments",EX=function(i,o){try{return i[o]}catch(l){}},_X=hX?h0:function(i){var o,l,f;return i===void 0?"Undefined":i===null?"Null":typeof(l=EX(o=vX(i),mX))=="string"?l:yX?h0(o):(f=h0(o))==="Object"&&pX(o.callee)?"Arguments":f},TX=_X,SX=String,EE=function(i){if(TX(i)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return SX(i)},wX=Rf,CB=function(){var i=wX(this),o="";return i.hasIndices&&(o+="d"),i.global&&(o+="g"),i.ignoreCase&&(o+="i"),i.multiline&&(o+="m"),i.dotAll&&(o+="s"),i.unicode&&(o+="u"),i.unicodeSets&&(o+="v"),i.sticky&&(o+="y"),o},AX=Al,IX=Ec,bX=nB,CX=CB,bF=RegExp.prototype,RX=function(i){var o=i.flags;return o===void 0&&!("flags"in bF)&&!IX(i,"flags")&&bX(bF,i)?AX(CX,i):o},zC=Aa,NX=uB,xX=Math.floor,$A=zC("".charAt),MX=zC("".replace),XA=zC("".slice),DX=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,PX=/\$([$&'`]|\d{1,2})/g,RB=function(i,o,l,f,p,S){var b=l+i.length,g=f.length,w=PX;return p!==void 0&&(p=NX(p),w=DX),MX(S,w,function(F,C){var y;switch($A(C,0)){case"$":return"$";case"&":return i;case"`":return XA(o,0,l);case"'":return XA(o,b);case"<":y=p[XA(C,1,-1)];break;default:var v=+C;if(v===0)return F;if(v>g){var D=xX(v/10);return D===0?F:D<=g?f[D-1]===void 0?$A(C,1):f[D-1]+$A(C,1):F}y=f[v-1]}return y===void 0?"":y})},OX=IB,LX=Al,YC=Aa,CF=am,kX=qa,FX=mE,UX=lX,lg=EE,BX=UC,jX=RX,ZX=RB,GX=Cf,qX=GX("replace"),HX=TypeError,QA=YC("".indexOf);YC("".replace);var RF=YC("".slice),KX=Math.max;OX({target:"String",proto:!0},{replaceAll:function(o,l){var f=CF(this),p,S,b,g,w,F,C,y,v,D=0,m=0,T="";if(!FX(o)){if(p=UX(o),p&&(S=lg(CF(jX(o))),!~QA(S,"g")))throw new HX("`.replaceAll` does not allow non-global regexes");if(b=BX(o,qX),b)return LX(b,o,f,l)}for(g=lg(f),w=lg(o),F=kX(l),F||(l=lg(l)),C=w.length,y=KX(1,C),D=QA(g,w);D!==-1;)v=F?lg(l(w,D,g)):ZX(w,g,D,[],void 0,l),T+=RF(g,m,D)+v,m=D+C,D=D+y>g.length?-1:QA(g,w,D+y);return m<g.length&&(T+=RF(g,m)),T}});var WC=gs,VX=Ga,$C=VX.RegExp,XC=WC(function(){var i=$C("a","y");return i.lastIndex=2,i.exec("abcd")!==null}),zX=XC||WC(function(){return!$C("a","y").sticky}),YX=XC||WC(function(){var i=$C("^r","gy");return i.lastIndex=2,i.exec("str")!==null}),WX={BROKEN_CARET:YX,MISSED_STICKY:zX,UNSUPPORTED_Y:XC},NB={},$X=wB,XX=VC,QX=Object.keys||function(o){return $X(o,XX)},JX=yc,eQ=hB,tQ=sm,nQ=Rf,rQ=vE,iQ=QX;NB.f=JX&&!eQ?Object.defineProperties:function(o,l){nQ(o);for(var f=rQ(l),p=iQ(l),S=p.length,b=0,g;S>b;)tQ.f(o,g=p[b++],f[g]);return o};var oQ=FC,aQ=oQ("document","documentElement"),sQ=Rf,uQ=NB,NF=VC,lQ=HC,cQ=aQ,fQ=fB,dQ=mB,xF=">",MF="<",hb="prototype",pb="script",xB=dQ("IE_PROTO"),JA=function(){},MB=function(i){return MF+pb+xF+i+MF+"/"+pb+xF},DF=function(i){i.write(MB("")),i.close();var o=i.parentWindow.Object;return i=null,o},hQ=function(){var i=fQ("iframe"),o="java"+pb+":",l;return i.style.display="none",cQ.appendChild(i),i.src=String(o),l=i.contentWindow.document,l.open(),l.write(MB("document.F=Object")),l.close(),l.F},Jy,p0=function(){try{Jy=new ActiveXObject("htmlfile")}catch(o){}p0=typeof document<"u"?document.domain&&Jy?DF(Jy):hQ():DF(Jy);for(var i=NF.length;i--;)delete p0[hb][NF[i]];return p0()};lQ[xB]=!0;var pQ=Object.create||function(o,l){var f;return o!==null?(JA[hb]=sQ(o),f=new JA,JA[hb]=null,f[xB]=o):f=p0(),l===void 0?f:uQ.f(f,l)},gQ=gs,mQ=Ga,vQ=mQ.RegExp,yQ=gQ(function(){var i=vQ(".","s");return!(i.dotAll&&i.test("\n")&&i.flags==="s")}),EQ=gs,_Q=Ga,TQ=_Q.RegExp,SQ=EQ(function(){var i=TQ("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"}),ih=Al,_E=Aa,wQ=EE,AQ=CB,IQ=WX,bQ=ZC,CQ=pQ,RQ=yB.get,NQ=yQ,xQ=SQ,MQ=bQ("native-string-replace",String.prototype.replace),q0=RegExp.prototype.exec,gb=q0,DQ=_E("".charAt),PQ=_E("".indexOf),OQ=_E("".replace),eI=_E("".slice),mb=function(){var i=/a/,o=/b*/g;return ih(q0,i,"a"),ih(q0,o,"a"),i.lastIndex!==0||o.lastIndex!==0}(),DB=IQ.BROKEN_CARET,vb=/()??/.exec("")[1]!==void 0,LQ=mb||vb||DB||NQ||xQ;LQ&&(gb=function(o){var l=this,f=RQ(l),p=wQ(o),S=f.raw,b,g,w,F,C,y,v;if(S)return S.lastIndex=l.lastIndex,b=ih(gb,S,p),l.lastIndex=S.lastIndex,b;var D=f.groups,m=DB&&l.sticky,T=ih(AQ,l),U=l.source,x=0,_=p;if(m&&(T=OQ(T,"y",""),PQ(T,"g")===-1&&(T+="g"),_=eI(p,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&DQ(p,l.lastIndex-1)!=="\n")&&(U="(?: "+U+")",_=" "+_,x++),g=new RegExp("^(?:"+U+")",T)),vb&&(g=new RegExp("^"+U+"$(?!\\s)",T)),mb&&(w=l.lastIndex),F=ih(q0,m?g:l,_),m?F?(F.input=eI(F.input,x),F[0]=eI(F[0],x),F.index=l.lastIndex,l.lastIndex+=F[0].length):l.lastIndex=0:mb&&F&&(l.lastIndex=l.global?F.index+F[0].length:w),vb&&F&&F.length>1&&ih(MQ,F[0],g,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(F[C]=void 0)}),F&&D)for(F.groups=y=CQ(null),C=0;C<D.length;C++)v=D[C],y[v[0]]=F[v[1]];return F});var QC=gb,kQ=IB,PF=QC;kQ({target:"RegExp",proto:!0,forced:/./.exec!==PF},{exec:PF});var FQ=kC,PB=Function.prototype,OF=PB.apply,LF=PB.call,UQ=typeof Reflect=="object"&&Reflect.apply||(FQ?LF.bind(OF):function(){return LF.apply(OF,arguments)}),kF=Al,FF=_B,BQ=QC,UF=gs,OB=Cf,jQ=GC,ZQ=OB("species"),tI=RegExp.prototype,GQ=function(i,o,l,f){var p=OB(i),S=!UF(function(){var F={};return F[p]=function(){return 7},""[i](F)!==7}),b=S&&!UF(function(){var F=!1,C=/a/;return i==="split"&&(C={},C.constructor={},C.constructor[ZQ]=function(){return C},C.flags="",C[p]=/./[p]),C.exec=function(){return F=!0,null},C[p](""),!F});if(!S||!b||l){var g=/./[p],w=o(p,""[i],function(F,C,y,v,D){var m=C.exec;return m===BQ||m===tI.exec?S&&!D?{done:!0,value:kF(g,C,y,v)}:{done:!0,value:kF(F,y,C,v)}:{done:!1}});FF(String.prototype,i,w[0]),FF(tI,p,w[1])}f&&jQ(tI[p],"sham",!0)},JC=Aa,qQ=yE,HQ=EE,KQ=am,VQ=JC("".charAt),BF=JC("".charCodeAt),zQ=JC("".slice),jF=function(i){return function(o,l){var f=HQ(KQ(o)),p=qQ(l),S=f.length,b,g;return p<0||p>=S?i?"":void 0:(b=BF(f,p),b<55296||b>56319||p+1===S||(g=BF(f,p+1))<56320||g>57343?i?VQ(f,p):b:i?zQ(f,p,p+2):(b-55296<<10)+(g-56320)+65536)}},YQ={codeAt:jF(!1),charAt:jF(!0)},WQ=YQ.charAt,$Q=function(i,o,l){return o+(l?WQ(i,o).length:1)},ZF=Al,XQ=Rf,QQ=qa,JQ=gE,eJ=QC,tJ=TypeError,nJ=function(i,o){var l=i.exec;if(QQ(l)){var f=ZF(l,i,o);return f!==null&&XQ(f),f}if(JQ(i)==="RegExp")return ZF(eJ,i,o);throw new tJ("RegExp#exec called on incompatible receiver")},rJ=UQ,GF=Al,TE=Aa,iJ=GQ,oJ=gs,aJ=Rf,sJ=qa,uJ=mE,lJ=yE,cJ=SB,Zd=EE,fJ=am,dJ=$Q,hJ=UC,pJ=RB,gJ=nJ,mJ=Cf,yb=mJ("replace"),vJ=Math.max,yJ=Math.min,EJ=TE([].concat),nI=TE([].push),qF=TE("".indexOf),HF=TE("".slice),_J=function(i){return i===void 0?i:String(i)},TJ=function(){return"a".replace(/./,"$0")==="$0"}(),KF=function(){return/./[yb]?/./[yb]("a","$0")==="":!1}(),SJ=!oJ(function(){var i=/./;return i.exec=function(){var o=[];return o.groups={a:"7"},o},"".replace(i,"$<a>")!=="7"});iJ("replace",function(i,o,l){var f=KF?"$":"$0";return[function(S,b){var g=fJ(this),w=uJ(S)?void 0:hJ(S,yb);return w?GF(w,S,g,b):GF(o,Zd(g),S,b)},function(p,S){var b=aJ(this),g=Zd(p);if(typeof S=="string"&&qF(S,f)===-1&&qF(S,"$<")===-1){var w=l(o,b,g,S);if(w.done)return w.value}var F=sJ(S);F||(S=Zd(S));var C=b.global,y;C&&(y=b.unicode,b.lastIndex=0);for(var v=[],D;D=gJ(b,g),!(D===null||(nI(v,D),!C));){var m=Zd(D[0]);m===""&&(b.lastIndex=dJ(g,cJ(b.lastIndex),y))}for(var T="",U=0,x=0;x<v.length;x++){D=v[x];for(var _=Zd(D[0]),I=vJ(yJ(lJ(D.index),g.length),0),R=[],Z,z=1;z<D.length;z++)nI(R,_J(D[z]));var W=D.groups;if(F){var $=EJ([_],R,I,g);W!==void 0&&nI($,W),Z=Zd(rJ(S,void 0,$))}else Z=pJ(_,g,I,R,W,S);I>=U&&(T+=HF(g,U,I)+Z,U=I+_.length)}return T+HF(g,U)}]},!SJ||!TJ||KF);var wJ=Ga,AJ=Aa,IJ=function(i,o){return AJ(wJ[i].prototype[o])},bJ=IJ;bJ("String","replaceAll");function eR(){const i=Ou(),o=Ch(),[l]=K4();return pn.useCallback(async(f,p)=>{var g;if(!l||!i)return;const S=(g=o==null?void 0:o.distributionUrl)!=null?g:"";let b=l.cameraURLTemplate;if(b=b.replace("{{baseURL}}",S),b=b.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),b=b.replaceAll("{{assetName}}",p.camera.assetName||""),b!==f.currentSource&&o)return await f.load(p,b,{startTimeSeconds:i.getExpectedPositionInSeconds()-vi(p.camera.span.time,o.frameRate),eventOffset:vi(p.camera.span.time,o.frameRate),reelOffset:vi(p.camera.reelOffset,o.frameRate)})},[i,l,o])}function CJ(){const i=eR();return pn.useCallback(async(o,l)=>await i(o,l).then(),[i])}function RJ(){const i=Ou(),o=bh(),l=G4();pn.useEffect(()=>{if(!i||!o||!l)return;const f=({command:p,reference:S,start:b})=>{i.pausePlayStream(p,S,b)};return o.on("pausePlayStream",f),()=>{o.off("pausePlayStream",f)}},[i,o,l])}function NJ(i){const o=Ou(),l=Ch(),f=bh(),p=CJ(),S=eR();pn.useEffect(()=>{if(!f||!l||!o||!i)return;let b,g=[void 0,-1];const w=()=>{const T=o.getExpectedPositionInSeconds()<=0?0:o.getExpectedPositionInSeconds();return PC(l,T)[0]},F=T=>{g[0]=S(i,T),g[1]=T.index},C=T=>{if(g[0]&&g[1]===T.index){g[0].then(()=>{}),g=[void 0,-1];return}try{p(i,T)}catch(U){console.error("failed to play stream",U)}},y=()=>{const T=w();T&&F(T)},v=()=>{const T=w();T&&C(T)},D=({index:T})=>{var x;const U=(x=ib(T,l))!=null?x:rb(T,l,o);U&&F(U)},m=({index:T})=>{var x;const U=(x=ib(T,l))!=null?x:rb(T,l,o);U&&(F(U),b=setTimeout(()=>{C(U)},1900))};return f.on("cast",m),o.on("prepareStart",y),o.on("start",v),o.isLive?(o.preparePlayback(),v()):o.isInPrepare?y():console.log("HÄÄRRR"),()=>{f.off("prepareCast",D),f.off("cast",m),o.off("prepareStart",y),o.off("start",v),clearTimeout(b)}},[f,l,o,i,p,S])}function xJ(i){const o=om();pn.useEffect(()=>{if(!i||!o)return;const l=()=>{i.currentCamera&&o.updatePlaying(i.currentCamera)};return i.on("playing",l),()=>{i.off("playing",l)}},[i,o])}function MJ(i){const o=om(),l=Ou(),f=Ch(),p=bh(),S=eR();pn.useEffect(()=>{if(!f||!l||!i||!o)return;const b=({remainingTime:g})=>{const w=F4(f,l.getExpectedPositionInSeconds(),g,i.currentCamera);if(w){p==null||p.emitCast(w.index);try{const F=S(i,w);o.once("ended",()=>{F.then(()=>{})})}catch(F){console.error("failed to load stream",F)}}else o.once("ended",()=>{o.endEvent()})};return o.on("nearEnd",b),()=>{o.off("nearEnd",b)}},[f,l,i,S,o])}function DJ(i,o,l){const f=bz(),p=Ou(),[S,b]=pn.useState(null);return pn.useEffect(()=>{const g=document.querySelector(i);if(g==null||!p||!l)return;const w=new Bz({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:o,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:f}},eventClock:p});return b(w),()=>{w.destroy()}},[f,i,o,l,p]),S}function PJ(i){const o=Ou(),l=bh(),f=Ch(),p=om(),[S,b]=pn.useState(),[g,w]=pn.useState();return pn.useEffect(()=>{if(!f||!o||!i||!l||!p)return;const F=({index:y})=>{var v;w((v=ib(y,f))!=null?v:rb(y,f,o)),b(i.currentCamera)},C=()=>{const y=i.currentCamera;(y==null?void 0:y.camera.transition)==="mapAndClosing"&&(w(F4(f,o.getExpectedPositionInSeconds(),2,y)),b(y))};return l.on("cast",F),p.on("transition",C),()=>{l.off("cast",F),p.off("transition",C)}},[f,o,i,l,p]),[S,g]}function LB({x:i,y:o,mapScale:l}){const[f,p]=pn.useState(0),[S,b]=pn.useState(0),[g,w]=pn.useState(0),[F,C]=pn.useState(0),[y,v]=pn.useState(0);return pn.useEffect(()=>{const D=window.innerWidth,m=window.innerHeight,T=D/12,U=m/12;C(m/2-m*.05),v(D/m),p(i*T),b(o*U),w(T*l)},[i,o,l]),{scaledX:f,scaledY:S,size:g,baseY:F,aspectRatio:y}}const OJ="_container_1rjti_1",LJ="_fadeIn_1rjti_1",kJ="_content_1rjti_15",FJ="_end_1rjti_33",UJ="_scrollWrapper_1rjti_41",BJ="_scrollContainer_1rjti_55",jJ="_poster_1rjti_93",Gd={container:OJ,fadeIn:LJ,content:kJ,end:FJ,scrollWrapper:UJ,scrollContainer:BJ,poster:jJ},ZJ="_logoutWrapper_1fqns_1",GJ={logoutWrapper:ZJ},kB=()=>{const i=()=>{const o=new Event("logout");document.dispatchEvent(o)};return xt.jsx("div",{className:GJ.logoutWrapper,children:xt.jsx(iu,{onClick:i,focusKey:"LOGOUT",selfFocus:!0,children:"Logout"})})};var qJ=Object.defineProperty,H0=Object.getOwnPropertySymbols,FB=Object.prototype.hasOwnProperty,UB=Object.prototype.propertyIsEnumerable,VF=(i,o,l)=>o in i?qJ(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,Yg=(i,o)=>{for(var l in o||(o={}))FB.call(o,l)&&VF(i,l,o[l]);if(H0)for(var l of H0(o))UB.call(o,l)&&VF(i,l,o[l]);return i},tR=(i,o)=>{var l={};for(var f in i)FB.call(i,f)&&o.indexOf(f)<0&&(l[f]=i[f]);if(i!=null&&H0)for(var f of H0(i))o.indexOf(f)<0&&UB.call(i,f)&&(l[f]=i[f]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Tf;(i=>{const o=class{constructor(w,F,C,y){if(this.version=w,this.errorCorrectionLevel=F,this.modules=[],this.isFunction=[],w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let v=[];for(let m=0;m<this.size;m++)v.push(!1);for(let m=0;m<this.size;m++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(C);if(this.drawCodewords(D),y==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(y=T,m=U),this.applyMask(T)}}S(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(w,F){const C=i.QrSegment.makeSegments(w);return o.encodeSegments(C,F)}static encodeBinary(w,F){const C=i.QrSegment.makeBytes(w);return o.encodeSegments([C],F)}static encodeSegments(w,F,C=1,y=40,v=-1,D=!0){if(!(o.MIN_VERSION<=C&&C<=y&&y<=o.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let m,T;for(m=C;;m++){const I=o.getNumDataCodewords(m,F)*8,R=g.getTotalBits(w,m);if(R<=I){T=R;break}if(m>=y)throw new RangeError("Data too long")}for(const I of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])D&&T<=o.getNumDataCodewords(m,I)*8&&(F=I);let U=[];for(const I of w){f(I.mode.modeBits,4,U),f(I.numChars,I.mode.numCharCountBits(m),U);for(const R of I.getData())U.push(R)}S(U.length==T);const x=o.getNumDataCodewords(m,F)*8;S(U.length<=x),f(0,Math.min(4,x-U.length),U),f(0,(8-U.length%8)%8,U),S(U.length%8==0);for(let I=236;U.length<x;I^=253)f(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,R)=>_[R>>>3]|=I<<7-(R&7)),new o(m,F,_,v)}getModule(w,F){return 0<=w&&w<this.size&&0<=F&&F<this.size&&this.modules[F][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),F=w.length;for(let C=0;C<F;C++)for(let y=0;y<F;y++)C==0&&y==0||C==0&&y==F-1||C==F-1&&y==0||this.drawAlignmentPattern(w[C],w[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const F=this.errorCorrectionLevel.formatBits<<3|w;let C=F;for(let v=0;v<10;v++)C=C<<1^(C>>>9)*1335;const y=(F<<10|C)^21522;S(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,p(y,v));this.setFunctionModule(8,7,p(y,6)),this.setFunctionModule(8,8,p(y,7)),this.setFunctionModule(7,8,p(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,p(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,p(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,p(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const F=this.version<<12|w;S(F>>>18==0);for(let C=0;C<18;C++){const y=p(F,C),v=this.size-11+C%3,D=Math.floor(C/3);this.setFunctionModule(v,D,y),this.setFunctionModule(D,v,y)}}drawFinderPattern(w,F){for(let C=-4;C<=4;C++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(C)),D=w+y,m=F+C;0<=D&&D<this.size&&0<=m&&m<this.size&&this.setFunctionModule(D,m,v!=2&&v!=4)}}drawAlignmentPattern(w,F){for(let C=-2;C<=2;C++)for(let y=-2;y<=2;y++)this.setFunctionModule(w+y,F+C,Math.max(Math.abs(y),Math.abs(C))!=1)}setFunctionModule(w,F,C){this.modules[F][w]=C,this.isFunction[F][w]=!0}addEccAndInterleave(w){const F=this.version,C=this.errorCorrectionLevel;if(w.length!=o.getNumDataCodewords(F,C))throw new RangeError("Invalid argument");const y=o.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][F],v=o.ECC_CODEWORDS_PER_BLOCK[C.ordinal][F],D=Math.floor(o.getNumRawDataModules(F)/8),m=y-D%y,T=Math.floor(D/y);let U=[];const x=o.reedSolomonComputeDivisor(v);for(let I=0,R=0;I<y;I++){let Z=w.slice(R,R+T-v+(I<m?0:1));R+=Z.length;const z=o.reedSolomonComputeRemainder(Z,x);I<m&&Z.push(0),U.push(Z.concat(z))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((R,Z)=>{(I!=T-v||Z>=m)&&_.push(R[I])});return S(_.length==D),_}drawCodewords(w){if(w.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let F=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const D=C-v,T=(C+1&2)==0?this.size-1-y:y;!this.isFunction[T][D]&&F<w.length*8&&(this.modules[T][D]=p(w[F>>>3],7-(F&7)),F++)}}S(F==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let F=0;F<this.size;F++)for(let C=0;C<this.size;C++){let y;switch(w){case 0:y=(C+F)%2==0;break;case 1:y=F%2==0;break;case 2:y=C%3==0;break;case 3:y=(C+F)%3==0;break;case 4:y=(Math.floor(C/3)+Math.floor(F/2))%2==0;break;case 5:y=C*F%2+C*F%3==0;break;case 6:y=(C*F%2+C*F%3)%2==0;break;case 7:y=((C+F)%2+C*F%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[F][C]&&y&&(this.modules[F][C]=!this.modules[F][C])}}getPenaltyScore(){let w=0;for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[v][U]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[v][U],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][v]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[U][v],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let D=0;D<this.size-1;D++){const m=this.modules[v][D];m==this.modules[v][D+1]&&m==this.modules[v+1][D]&&m==this.modules[v+1][D+1]&&(w+=o.PENALTY_N2)}let F=0;for(const v of this.modules)F=v.reduce((D,m)=>D+(m?1:0),F);const C=this.size*this.size,y=Math.ceil(Math.abs(F*20-C*10)/C)-1;return S(0<=y&&y<=9),w+=y*o.PENALTY_N4,S(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,F=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let y=this.size-7;C.length<w;y-=F)C.splice(1,0,y);return C}}static getNumRawDataModules(w){if(w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version number out of range");let F=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;F-=(25*C-10)*C-55,w>=7&&(F-=36)}return S(208<=F&&F<=29648),F}static getNumDataCodewords(w,F){return Math.floor(o.getNumRawDataModules(w)/8)-o.ECC_CODEWORDS_PER_BLOCK[F.ordinal][w]*o.NUM_ERROR_CORRECTION_BLOCKS[F.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let F=[];for(let y=0;y<w-1;y++)F.push(0);F.push(1);let C=1;for(let y=0;y<w;y++){for(let v=0;v<F.length;v++)F[v]=o.reedSolomonMultiply(F[v],C),v+1<F.length&&(F[v]^=F[v+1]);C=o.reedSolomonMultiply(C,2)}return F}static reedSolomonComputeRemainder(w,F){let C=F.map(y=>0);for(const y of w){const v=y^C.shift();C.push(0),F.forEach((D,m)=>C[m]^=o.reedSolomonMultiply(D,v))}return C}static reedSolomonMultiply(w,F){if(w>>>8||F>>>8)throw new RangeError("Byte out of range");let C=0;for(let y=7;y>=0;y--)C=C<<1^(C>>>7)*285,C^=(F>>>y&1)*w;return S(C>>>8==0),C}finderPenaltyCountPatterns(w){const F=w[1];S(F<=this.size*3);const C=F>0&&w[2]==F&&w[3]==F*3&&w[4]==F&&w[5]==F;return(C&&w[0]>=F*4&&w[6]>=F?1:0)+(C&&w[6]>=F*4&&w[0]>=F?1:0)}finderPenaltyTerminateAndCount(w,F,C){return w&&(this.finderPenaltyAddHistory(F,C),F=0),F+=this.size,this.finderPenaltyAddHistory(F,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,F){F[0]==0&&(w+=this.size),F.pop(),F.unshift(w)}};let l=o;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=l;function f(w,F,C){if(F<0||F>31||w>>>F)throw new RangeError("Value out of range");for(let y=F-1;y>=0;y--)C.push(w>>>y&1)}function p(w,F){return(w>>>F&1)!=0}function S(w){if(!w)throw new Error("Assertion error")}const b=class{constructor(w,F,C){if(this.mode=w,this.numChars=F,this.bitData=C,F<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let F=[];for(const C of w)f(C,8,F);return new b(b.Mode.BYTE,w.length,F)}static makeNumeric(w){if(!b.isNumeric(w))throw new RangeError("String contains non-numeric characters");let F=[];for(let C=0;C<w.length;){const y=Math.min(w.length-C,3);f(parseInt(w.substr(C,y),10),y*3+1,F),C+=y}return new b(b.Mode.NUMERIC,w.length,F)}static makeAlphanumeric(w){if(!b.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let F=[],C;for(C=0;C+2<=w.length;C+=2){let y=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;y+=b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),f(y,11,F)}return C<w.length&&f(b.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,F),new b(b.Mode.ALPHANUMERIC,w.length,F)}static makeSegments(w){return w==""?[]:b.isNumeric(w)?[b.makeNumeric(w)]:b.isAlphanumeric(w)?[b.makeAlphanumeric(w)]:[b.makeBytes(b.toUtf8ByteArray(w))]}static makeEci(w){let F=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)f(w,8,F);else if(w<16384)f(2,2,F),f(w,14,F);else if(w<1e6)f(6,3,F),f(w,21,F);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,F)}static isNumeric(w){return b.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return b.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,F){let C=0;for(const y of w){const v=y.mode.numCharCountBits(F);if(y.numChars>=1<<v)return 1/0;C+=4+v+y.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let F=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?F.push(w.charCodeAt(C)):(F.push(parseInt(w.substr(C+1,2),16)),C+=2);return F}};let g=b;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=g})(Tf||(Tf={}));(i=>{(o=>{const l=class{constructor(p,S){this.ordinal=p,this.formatBits=S}};let f=l;f.LOW=new l(0,1),f.MEDIUM=new l(1,0),f.QUARTILE=new l(2,3),f.HIGH=new l(3,2),o.Ecc=f})(i.QrCode||(i.QrCode={}))})(Tf||(Tf={}));(i=>{(o=>{const l=class{constructor(p,S){this.modeBits=p,this.numBitsCharCount=S}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let f=l;f.NUMERIC=new l(1,[10,12,14]),f.ALPHANUMERIC=new l(2,[9,11,13]),f.BYTE=new l(4,[8,16,16]),f.KANJI=new l(8,[8,10,12]),f.ECI=new l(7,[0,0,0]),o.Mode=f})(i.QrSegment||(i.QrSegment={}))})(Tf||(Tf={}));var oh=Tf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var BB={L:oh.QrCode.Ecc.LOW,M:oh.QrCode.Ecc.MEDIUM,Q:oh.QrCode.Ecc.QUARTILE,H:oh.QrCode.Ecc.HIGH},jB=128,ZB="L",GB="#FFFFFF",qB="#000000",HB=!1,nR=4,HJ=.1;function KB(i,o=0){const l=[];return i.forEach(function(f,p){let S=null;f.forEach(function(b,g){if(!b&&S!==null){l.push("M".concat(S+o," ").concat(p+o,"h").concat(g-S,"v1H").concat(S+o,"z")),S=null;return}if(g===f.length-1){if(!b)return;S===null?l.push("M".concat(g+o,",").concat(p+o," h1v1H").concat(g+o,"z")):l.push("M".concat(S+o,",").concat(p+o," h").concat(g+1-S,"v1H").concat(S+o,"z"));return}b&&S===null&&(S=g)})}),l.join("")}function VB(i,o){return i.slice().map((l,f)=>f<o.y||f>=o.y+o.h?l:l.map((p,S)=>S<o.x||S>=o.x+o.w?p:!1))}function zB(i,o,l,f){if(f==null)return null;const p=l?nR:0,S=i.length+p*2,b=Math.floor(o*HJ),g=S/o,w=(f.width||b)*g,F=(f.height||b)*g,C=f.x==null?i.length/2-w/2:f.x*g,y=f.y==null?i.length/2-F/2:f.y*g;let v=null;if(f.excavate){let D=Math.floor(C),m=Math.floor(y),T=Math.ceil(w+C-D),U=Math.ceil(F+y-m);v={x:D,y:m,w:T,h:U}}return{x:C,y,h:F,w,excavation:v}}var KJ=function(){try{new Path2D().addPath(new Path2D)}catch(i){return!1}return!0}();function VJ(i){const o=i,{value:l,size:f=jB,level:p=ZB,bgColor:S=GB,fgColor:b=qB,includeMargin:g=HB,style:w,imageSettings:F}=o,C=tR(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),y=F==null?void 0:F.src,v=$o.useRef(null),D=$o.useRef(null),[m,T]=$o.useState(!1);$o.useEffect(()=>{if(v.current!=null){const _=v.current,I=_.getContext("2d");if(!I)return;let R=oh.QrCode.encodeText(l,BB[p]).getModules();const Z=g?nR:0,z=R.length+Z*2,W=zB(R,f,g,F),$=D.current,le=W!=null&&$!==null&&$.complete&&$.naturalHeight!==0&&$.naturalWidth!==0;le&&W.excavation!=null&&(R=VB(R,W.excavation));const N=window.devicePixelRatio||1;_.height=_.width=f*N;const X=f/z*N;I.scale(X,X),I.fillStyle=S,I.fillRect(0,0,z,z),I.fillStyle=b,KJ?I.fill(new Path2D(KB(R,Z))):R.forEach(function(ce,oe){ce.forEach(function(he,be){he&&I.fillRect(be+Z,oe+Z,1,1)})}),le&&I.drawImage($,W.x+Z,W.y+Z,W.w,W.h)}}),$o.useEffect(()=>{T(!1)},[y]);const U=Yg({height:f,width:f},w);let x=null;return y!=null&&(x=$o.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{T(!0)},ref:D})),$o.createElement($o.Fragment,null,$o.createElement("canvas",Yg({style:U,height:f,width:f,ref:v},C)),x)}function zJ(i){const o=i,{value:l,size:f=jB,level:p=ZB,bgColor:S=GB,fgColor:b=qB,includeMargin:g=HB,imageSettings:w}=o,F=tR(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=oh.QrCode.encodeText(l,BB[p]).getModules();const y=g?nR:0,v=C.length+y*2,D=zB(C,f,g,w);let m=null;w!=null&&D!=null&&(D.excavation!=null&&(C=VB(C,D.excavation)),m=$o.createElement("image",{xlinkHref:w.src,height:D.h,width:D.w,x:D.x+y,y:D.y+y,preserveAspectRatio:"none"}));const T=KB(C,y);return $o.createElement("svg",Yg({height:f,width:f,viewBox:"0 0 ".concat(v," ").concat(v)},F),$o.createElement("path",{fill:S,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),$o.createElement("path",{fill:b,d:T,shapeRendering:"crispEdges"}),m)}var SE=i=>{const o=i,{renderAs:l}=o,f=tR(o,["renderAs"]);return l==="svg"?$o.createElement(zJ,Yg({},f)):$o.createElement(VJ,Yg({},f))};function YJ({selfFocus:i,focusKey:o,src:l,showQr:f,qrUrl:p,...S}){const{ref:b,focused:g,focusSelf:w}=su.useFocusable({onEnterPress:()=>{S.onClick()},focusKey:o});return pn.useEffect(()=>{i&&w()},[w,i]),xt.jsx("button",{...S,ref:b,className:"".concat(S.className||""," ").concat(g?ob.posterFocused:""),id:"rail_".concat(o),children:f?xt.jsx(SE,{className:ob.qrCode,bgColor:"white",fgColor:"black",value:p,size:720}):xt.jsx("img",{src:l})})}const YB=()=>{const[i,o]=pn.useState(0);return pn.useEffect(()=>{const l=p=>{o(p.keyCode)},f=()=>{o(0)};return document.addEventListener("keydown",l),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",f)}},[]),i};function zF({canceled:i}){const o=Z4(),[l,f]=pn.useState(null),[p,S]=pn.useState(0),b=YB();function g(){var w;return(o==null?void 0:o.postScreen.offersCollection.items.length)>2&&((w=document.getElementById("rail_".concat(su.getCurrentFocusKey())))==null?void 0:w.offsetLeft)-13||0}return pn.useEffect(()=>{b!==0&&f(null),S(g())},[b]),xt.jsx("div",{className:Gd.container,children:xt.jsxs("div",{className:Gd.content,children:[i?xt.jsx("h1",{className:Gd.end,children:"Oh no! This event has been canceled."}):xt.jsxs(xt.Fragment,{children:[xt.jsx("h1",{children:o==null?void 0:o.postScreen.title}),xt.jsx("p",{className:"body-text",style:{opacity:.5},children:o==null?void 0:o.postScreen.body})]}),xt.jsx(kB,{}),xt.jsx("div",{className:Gd.scrollWrapper,children:xt.jsx("div",{className:Gd.scrollContainer,style:{left:-(p||0)},children:o&&o.postScreen.offersCollection.items.map((w,F)=>xt.jsx(YJ,{className:Gd.poster,onClick:()=>{"".concat(F)!==su.getCurrentFocusKey()?(su.setFocus("".concat(F)),S(g())):f(F)},src:w.image.url,focusKey:"".concat(F),selfFocus:F===0,showQr:F===l,qrUrl:w.link},F))})})]})})}const WJ="_transitionWrapper_jyngr_1",$J="_active_jyngr_17",XJ="_transition_jyngr_1",QJ="_fadeOut_jyngr_1",JJ="_hidden_jyngr_57",eee="_visible_jyngr_67",tee="_videoTitle_jyngr_77",nee="_fadeIn_jyngr_1",cg={transitionWrapper:WJ,active:$J,transition:XJ,fadeOut:QJ,hidden:JJ,visible:eee,videoTitle:tee,fadeIn:nee},ree="_placeContainer_ywyae_1",iee="_place_ywyae_1",oee="_background_ywyae_45",aee="_activePlace_ywyae_57",see="_fadeOut_ywyae_1",uee="_normalPlace_ywyae_79",lee="_selectedPlace_ywyae_99",cee="_fadeIn_ywyae_1",fee="_pulseEffect_ywyae_1",dee="_title_ywyae_153",ef={placeContainer:ree,place:iee,background:oee,activePlace:aee,fadeOut:see,normalPlace:uee,selectedPlace:lee,fadeIn:cee,pulseEffect:fee,title:dee};var bs=(i=>(i.ACTIVE_PLACE="ActivePlace",i.SELECTED_PLACE="SelectedPlace",i.NORMAL_PLACE="NormalPlace",i))(bs||{});const hee=({place:i,mapPlacesLength:o})=>{const l=LB({x:i.mapPosition.x,y:i.mapPosition.y,mapScale:i.mapScale}),f=pn.useMemo(()=>{switch(i.placeType){case bs.ACTIVE_PLACE:return ef.activePlace;case bs.SELECTED_PLACE:return ef.selectedPlace;case bs.NORMAL_PLACE:default:return ef.normalPlace}},[i]);return xt.jsx("div",{className:ef.placeContainer,children:xt.jsxs("div",{className:"".concat(ef.place," ").concat(f),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(o>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(o>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[xt.jsx("div",{className:ef.background}),(i.placeType===bs.ACTIVE_PLACE||i.placeType===bs.SELECTED_PLACE)&&xt.jsx("div",{className:"subheader-light ".concat(ef.title),children:i.title})]})})},pee="_followContainer_1h8ds_1",gee="_follow_1h8ds_1",mee="_selectedFollow_1h8ds_35",vee="_pulseEffect_1h8ds_1",yee="_notSelectedFollow_1h8ds_79",Eee="_iconContainer_1h8ds_97",_ee="_labelContainer_1h8ds_131",qd={followContainer:pee,follow:gee,selectedFollow:mee,pulseEffect:vee,notSelectedFollow:yee,iconContainer:Eee,labelContainer:_ee},Tee="_label_svzic_1",See={label:Tee},wee=({content:i,classNames:o=""})=>xt.jsx("div",{className:"".concat(See.label," ").concat(o," label"),children:i}),Aee=({style:i})=>xt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:i,children:xt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),WB=({classNames:i,styles:o,color:l,stroke:f})=>xt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[xt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),Iee=({classNames:i,styles:o,color:l,stroke:f})=>xt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[xt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),xt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),xt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),xt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"})]}),bee=()=>xt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[xt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Cee=()=>xt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[xt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ree=()=>xt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[xt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),Nee=({follow:i})=>{var p,S,b,g;const o=LB({x:(S=(p=i.mapPosition)==null?void 0:p.x)!=null?S:0,y:(g=(b=i.mapPosition)==null?void 0:b.y)!=null?g:0,mapScale:.6}),[l,f]=pn.useState(0);return pn.useEffect(()=>{function w(F,C,y){return-Math.atan2((F.x-C.x)*y,F.y-C.y)*(180/Math.PI)}i.mapPosition&&f(w(i.mapPositions[0],i.mapPositions[i.mapPositions.length-1],o.aspectRatio))},[i.mapPosition,i.mapPositions,o]),xt.jsxs("div",{className:qd.followContainer,style:{width:o.size,height:o.size,left:"calc(50% + ".concat(o.scaledX,"px)"),top:"calc(50% - ".concat(o.scaledY,"px)")},children:[xt.jsx("div",{className:"".concat(qd.follow," ").concat(i.isSelectedFollow?qd.selectedFollow:qd.notSelectedFollow," ").concat(qd.iconContainer),children:xt.jsx(Aee,{style:{transform:"rotate(".concat(l,"deg)")}})}),i.isSelectedFollow&&xt.jsx(wee,{classNames:qd.labelContainer,content:i.title})]})},xee=({fromCamera:i,toCamera:o})=>{const l=Ch(),f=Ou(),p=4200,S=p+3950,b=1900,[g,w]=pn.useState([]),[F,C]=pn.useState([]),[y,v]=pn.useState(!1),[D,m]=pn.useState(!1),[T,U]=pn.useState(""),x=pn.useRef([]),_=pn.useMemo(()=>{function le(N,X){const ce=N.jumpSpots.map(Ze=>Ze.camera.span),he=ce.map(Ze=>Ze.time).map(Ze=>vi(Ze,X.frameRate)),be=Math.min(...he),Xe=ce.map(Ze=>vi(Ze.time,X.frameRate)+vi(Ze.duration,X.frameRate)),Ae=Math.max(...Xe);return{start:be,end:Ae}}return l==null?void 0:l.places.filter(N=>N.jumpSpots.length>0).map((N,X)=>({...N,span:le(N,l),placeType:bs.NORMAL_PLACE,placeIndex:X}))},[l]),I=pn.useMemo(()=>(l==null?void 0:l.follows.map(le=>({...le,isSelectedFollow:!1})))||[],[l]),R=pn.useCallback((le,N)=>{const X=vi(le.camera.span.time,N.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=X&&X<=ce.span.end))||[]},[_]),Z=pn.useCallback(le=>{const N=le.mapPositions[0]||{x:0,y:0};if(l&&f){const X=f.getExpectedPositionInSeconds()-vi(le.camera.span.time,l.frameRate),ce=vi(le.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/ce);return X===ce&&(oe-=1),le.mapPositions[oe]||N}return N},[f,l]),z=pn.useCallback((le,N)=>{const X=vi(le.camera.span.time,N.frameRate)+2;return I.filter(ce=>vi(ce.camera.span.time,N.frameRate)<=X&&X<=vi(ce.camera.span.time,N.frameRate)+vi(ce.camera.span.duration,N.frameRate)).map(ce=>({...ce,mapPosition:Z(ce)}))},[I,Z]),W=pn.useCallback(le=>_==null?void 0:_.find(N=>N.jumpSpots.some(X=>X.camera.assetName===le.camera.assetName)),[_]),$=(le,N)=>N.jumpSpots.some(X=>X.camera.assetName===le.camera.assetName);return pn.useEffect(()=>{if(!_||!i||!o||!l||i.camera.assetName===o.camera.assetName)return;const le=x.current;let N=[],X=[],ce=[],oe=[];if(U(o.placeTitle?o.placeTitle:o.title),i.type===of.JUMPSPOT&&o.type===of.JUMPSPOT&&i.placeIndex===o.placeIndex)m(!1),v(!0);else{switch(m(!0),i.type){case of.JUMPSPOT:X=z(o,l),N=R(i,l).map(Ze=>$(i,Ze)?{...Ze,placeType:bs.ACTIVE_PLACE}:Ze);break;case of.FOLLOW:N=R(i,l),X=z(i,l).map(Ze=>({...Ze,isSelectedFollow:i.camera.assetName===Ze.camera.assetName}));break}switch(w(N),C(X),o.type){case of.JUMPSPOT:oe=z(i,l);const Ze=N.find(ut=>$(o,ut));if(Ze)ce=N.map(ut=>({...ut,placeType:ut.placeIndex===Ze.placeIndex?bs.SELECTED_PLACE:bs.NORMAL_PLACE}));else{const ut=W(o);ut&&(ut.placeType=bs.SELECTED_PLACE,ce=[...N.map($e=>({...$e,placeType:bs.NORMAL_PLACE})),ut])}break;case of.FOLLOW:ce=R(i,l),oe=z(i,l);const tt=X.find(ut=>ut.camera.assetName===o.camera.assetName);if(tt)oe=X.map(ut=>({...ut,isSelectedFollow:ut.camera.assetName===tt.camera.assetName}));else{const ut=I.find($e=>$e.camera.assetName===o.camera.assetName);if(ut){const $e={...ut,isSelectedFollow:!0,mapPosition:Z(ut)};oe=[...X.map(lt=>({...lt,isSelectedFollow:!1})),$e]}}break}}const he=setTimeout(()=>{C(oe)},b);le.push(he);const be=setTimeout(()=>{w(ce)},b);le.push(be);const Xe=setTimeout(()=>{m(!1),v(!0)},p);le.push(Xe);const Ae=setTimeout(()=>{v(!1)},S);return le.push(Ae),()=>{le.forEach(Ze=>{clearTimeout(Ze)}),x.current=[]}},[i,o,_,I,z,W,l,R,Z,S]),xt.jsxs("div",{className:"".concat(cg.transitionWrapper," ").concat(D?cg.active:""),children:[D&&xt.jsxs("div",{className:"".concat(cg.transition," ").concat(cg.visible),children:[g.map((le,N)=>xt.jsx(hee,{place:le,mapPlacesLength:g.length},"place-".concat(N.toString()))),F.filter(le=>le.camera.assetName===(i==null?void 0:i.camera.assetName)||le.camera.assetName===(o==null?void 0:o.camera.assetName)).map((le,N)=>xt.jsx(Nee,{follow:le},"follow-".concat(N.toString())))]}),y&&xt.jsx("h1",{className:cg.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},Mee="_playerPage_s22qw_1",Dee="_playerContainer_s22qw_13",Pee="_fadeIn_s22qw_1",YF={playerPage:Mee,playerContainer:Dee,fadeIn:Pee},Oee="_attention_1xh5o_1",Lee="_ripple1_1xh5o_1",kee="_ripple2_1xh5o_1",Fee="_thirdRipple_1xh5o_81",Uee="_ripple3_1xh5o_1",Bee="_iconWrapper_1xh5o_105",rI={attention:Oee,ripple1:Lee,ripple2:kee,thirdRipple:Fee,ripple3:Uee,iconWrapper:Bee},jee=()=>{const i=om(),[o,l]=pn.useState(!1),f=5e3;if(pn.useEffect(()=>{if(!i)return;let p;const S=()=>{l(!0),p=setTimeout(()=>{l(!1)},f)};return i.on("attention",S),()=>{i.off("attention",S),clearTimeout(p)}},[i]),!!o)return xt.jsxs("div",{className:rI.attention,children:[xt.jsx("span",{className:rI.iconWrapper,children:xt.jsx(Ree,{})}),xt.jsx("span",{className:rI.thirdRipple})]})},Zee="_container_1l3tn_1",Gee="_qrCode_1l3tn_25",qee="_text_1l3tn_35",iI={container:Zee,qrCode:Gee,text:qee},Hee=({url:i})=>xt.jsxs("div",{className:iI.container,children:[xt.jsx("p",{className:"body-text ".concat(iI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),xt.jsx(SE,{className:iI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500})]}),Kee="_warningContainer_1qam6_1",Vee={warningContainer:Kee},$B=()=>xt.jsxs("div",{className:Vee.warningContainer,children:[xt.jsx(WB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),xt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),zee="_messageContainer_1jzyd_3",Yee="_message_1jzyd_3",WF={messageContainer:zee,message:Yee},Wee=({message:i})=>xt.jsx("div",{className:WF.messageContainer,children:xt.jsx("div",{className:"".concat(WF.message," subheader-light"),children:i})});function $ee(){const[i,o,l]=K4(),f=DJ("#playerContainer",o,l),[p,S]=pn.useState(),b=OC();pn.useEffect(()=>{const C=b==null?void 0:b.find(y=>y.deviceId===Eh);S(C)},[b]);const g=!!(b!=null&&b.find(C=>C.deviceId!==Eh));NJ(f),xJ(f),MJ(f);const[w,F]=PJ(f);return RJ(),xt.jsxs("div",{className:YF.playerPage,children:[xt.jsxs("div",{id:"playerContainer",className:YF.playerContainer,children:[xt.jsx(jee,{}),(p==null?void 0:p.stateInfo.state)==="showQrCode"&&xt.jsx(Hee,{url:"".concat(RC,":").concat(p.deviceId)}),xt.jsx(xee,{fromCamera:w,toCamera:F})]}),!g&&xt.jsx(Wee,{message:xt.jsx($B,{})})]})}const Xee="_gradientBackground_b6nct_1",Qee="_container_b6nct_15",Jee="_fadeIn_b6nct_1",ete="_connectedTV_b6nct_45",tte="_disconnectedTV_b6nct_47",nte="_popIn_b6nct_1",rte="_iconContainer_b6nct_105",ite="_connectedText_b6nct_121",Hd={gradientBackground:Xee,container:Qee,fadeIn:Jee,connectedTV:ete,disconnectedTV:tte,popIn:nte,iconContainer:rte,connectedText:ite},$F=({isDisconnected:i})=>xt.jsx("div",{className:Hd.gradientBackground,children:xt.jsxs("div",{className:Hd.container,children:[xt.jsx("div",{className:i?Hd.disconnectedTV:Hd.connectedTV,children:xt.jsx("div",{className:Hd.iconContainer,children:i?xt.jsx(Cee,{}):xt.jsx(bee,{})})}),xt.jsx("h1",{className:Hd.connectedText,children:i?"TV disconnected":"TV connected"})]})}),ote="_hidden_zykq7_1",ate={hidden:ote},ste="_gradientBackground_j08l1_1",ute="_container_j08l1_15",lte="_imageWrapper_j08l1_39",cte="_listText_j08l1_53",fte="_boldText_j08l1_53",dte="_image_j08l1_39",hte="_glow_j08l1_83",pte="_dividerWrapper_j08l1_111",gte="_divider_j08l1_111",mte="_buttonsWrapper_j08l1_135",vte="_testButton_j08l1_163",yte="_demoButton_j08l1_171",Ete="_title_j08l1_179",_te="_countdownWrapper_j08l1_199",Tte="_startDate_j08l1_221",Ste="_timeSectionContainer_j08l1_237",wte="_timeSection_j08l1_237",Ate="_timerNumber_j08l1_263",Ite="_timerColon_j08l1_279",bte="_countdownTitle_j08l1_295",Cte="_label_j08l1_311",Rte="_logos_j08l1_325",Nte="_showStartedLabel_j08l1_351",xte="_backWrapper_j08l1_359",Mte="_warning_j08l1_387",Dte="_fadeIn_j08l1_1",Yr={gradientBackground:ste,container:ute,imageWrapper:lte,listText:cte,boldText:fte,image:dte,glow:hte,dividerWrapper:pte,divider:gte,buttonsWrapper:mte,testButton:vte,demoButton:yte,title:Ete,countdownWrapper:_te,startDate:Tte,timeSectionContainer:Ste,timeSection:wte,timerNumber:Ate,timerColon:Ite,countdownTitle:bte,label:Cte,logos:Rte,showStartedLabel:Nte,backWrapper:xte,warning:Mte,fadeIn:Dte},Pte="_errorContainer_1vpqa_1",Ote={errorContainer:Pte},Lte=({errorIcon:i,errorMessage:o,errorName:l})=>xt.jsxs("div",{className:Ote.errorContainer,children:[i&&xt.jsx("div",{children:i}),xt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(o)})]}),kte="_gradientBackground_1pfse_1",Fte="_container_1pfse_19",Ute="_qrCode_1pfse_33",oI={gradientBackground:kte,container:Fte,qrCode:Ute},Bte=({url:i})=>xt.jsxs("div",{className:"".concat(oI.gradientBackground," ").concat(oI.container),children:[xt.jsx(SE,{className:oI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500}),xt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]});function jte(i){if(!i)return"";const o=new Date(i),f=["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()],p=o.getDate();let S=o.getHours();const b=o.getMinutes().toString().padStart(2,"0"),g=S>=12?"PM":"AM";return S=S%12||12,"".concat(f," ").concat(p,", ").concat(S,":").concat(b," ").concat(g)}const Zte=({timeToLive:i,isLive:o,backToShow:l})=>{const f=Rz(),p=Ou(),S=Z4(),b=G4(),g=OC(),[w,F]=pn.useState(),[C,y]=pn.useState("00:00:00:00"),[v,D]=pn.useState(!1),m=pn.useRef(null),T=5;pn.useEffect(()=>{const z=g==null?void 0:g.filter($=>$.deviceId!==Eh);D(!!(z!=null&&z.length));const W=g==null?void 0:g.find($=>$.deviceId===Eh);F(W)},[g]);let U;(z=>{z.BEFORE="before",z.MIDDLE="middle",z.END="end"})(U||(U={}));const x=z=>{if(p){let W=new Date;switch(z){case"end":W=new Date(p.demoEndtime);break;case"middle":W.setMinutes(W.getMinutes()-22);break;default:case"before":W.setSeconds(W.getSeconds()+T);break}p.updateStartTime(W,!0)}};pn.useEffect(()=>{if(i&&i>0){const z=N=>{const X=Date.parse(N.toString())-Date.parse(new Date().toString()),ce=Math.floor(X/1e3%60),oe=Math.floor(X/1e3/60%60),he=Math.floor(X/1e3/60/60%24),be=Math.floor(X/1e3/60/60/24);return{total:X,days:be,hours:he,minutes:oe,seconds:ce}},W=N=>{const{total:X,days:ce,hours:oe,minutes:he,seconds:be}=z(N);X>=0&&y((ce>9?ce:"0"+ce)+":"+(oe>9?oe:"0"+oe)+":"+(he>9?he:"0"+he)+":"+(be>9?be:"0"+be))};(N=>{m.current&&clearInterval(m.current),W(N);const X=setInterval(()=>{W(N)},1e3);m.current=X})((N=>{const X=new Date;return X.setSeconds(X.getSeconds()+Math.floor(N/1e3)),X})(i))}},[i]);const[_,I,R,Z]=C.split(":");if(w&&w.stateInfo.state==="showQrCode"){const z="".concat(RC,":").concat(w.deviceId);return xt.jsx(Bte,{url:z})}return xt.jsxs("div",{className:Yr.container,children:[b&&xt.jsx("div",{className:Yr.buttonsWrapper,children:xt.jsxs("div",{children:[xt.jsx(iu,{className:"".concat(Yr.demoButton," ").concat(Yr.testButton),onClick:()=>{x("before")},selfFocus:!0,children:"B"}),xt.jsx(iu,{className:Yr.testButton,onClick:()=>{x("middle")},children:"M"}),xt.jsx(iu,{className:Yr.testButton,onClick:()=>{x("end")},children:"E"})]})}),xt.jsx(kB,{}),f.map((z,W)=>xt.jsx(Lte,{errorMessage:z.toString},"".concat(z.name,"-error-").concat(W.toString()))),xt.jsxs("div",{className:Yr.imageWrapper,children:[xt.jsx("div",{className:Yr.glow}),xt.jsx("img",{className:Yr.image,src:"".concat(S==null?void 0:S.preScreen.backgroundLandscape.url)})]}),xt.jsxs("div",{className:Yr.countdownWrapper,children:[xt.jsx("div",{className:Yr.title,children:S==null?void 0:S.preScreen.showTitle}),xt.jsx("div",{className:Yr.startDate,children:jte(p==null?void 0:p.adjustedStartTime).toUpperCase()}),xt.jsx("div",{className:Yr.dividerWrapper,children:xt.jsx("div",{className:Yr.divider})}),!o&&xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:Yr.countdownTitle,children:"Starts in"}),xt.jsxs("div",{className:Yr.timeSectionContainer,children:[xt.jsxs("div",{className:Yr.timeSection,children:[xt.jsx("div",{className:Yr.timerNumber,children:_}),xt.jsx("div",{className:Yr.label,children:"days"})]}),xt.jsx("div",{className:Yr.timerColon,children:":"}),xt.jsxs("div",{className:Yr.timeSection,children:[xt.jsx("div",{className:Yr.timerNumber,children:I}),xt.jsx("div",{className:Yr.label,children:"hours"})]}),xt.jsx("div",{className:Yr.timerColon,children:":"}),xt.jsxs("div",{className:Yr.timeSection,children:[xt.jsx("div",{className:Yr.timerNumber,children:R}),xt.jsx("div",{className:Yr.label,children:"mins"})]}),xt.jsx("div",{className:Yr.timerColon,children:":"}),xt.jsxs("div",{className:Yr.timeSection,children:[xt.jsx("div",{className:Yr.timerNumber,children:Z}),xt.jsx("div",{className:Yr.label,children:"secs"})]})]})]}),o&&xt.jsxs(xt.Fragment,{children:[xt.jsx("h1",{className:Yr.showStartedLabel,children:"The show has started"}),xt.jsx("div",{className:Yr.backWrapper,children:xt.jsx(iu,{onClick:()=>{l()},children:"Back to show"})})]})]}),xt.jsx("div",{className:Yr.warning,children:!v&&s7==="new"&&xt.jsx($B,{})})]})},Gte="_wrapper_up6s2_1",qte="_container_up6s2_21",Hte="_menu_up6s2_49",Kte="_qrCodeContainer_up6s2_61",Vte="_qrCode_up6s2_61",zte="_listContainer_up6s2_89",Yte="_list_up6s2_89",Wte="_listItemContainer_up6s2_123",$te="_listNumber_up6s2_133",Xte="_listText_up6s2_161",Qte="_listBold_up6s2_179",Jte="_circleRightCorner_up6s2_187",ene="_circleLeftCorner_up6s2_211",tne="_circleCenter_up6s2_233",nne="_errorMessage_up6s2_257",rne="_fadeIn_up6s2_1",Qi={wrapper:Gte,container:qte,menu:Hte,qrCodeContainer:Kte,qrCode:Vte,listContainer:zte,list:Yte,listItemContainer:Wte,listNumber:$te,listText:Xte,listBold:Qte,circleRightCorner:Jte,circleLeftCorner:ene,circleCenter:tne,errorMessage:nne,fadeIn:rne},ine=({url:i,setKeyboardSetup:o})=>{const l=q4(),f=H4(),p=S=>{if(S.name===Ea.NEGOTIATE)switch(S.code){case 400:S.title=l("ticket-entry","error.toManyDevices.title"),S.message=l("ticket-entry","error.toManyDevices.body");break;case 401:S.title=l("ticket-entry","error.invalidCode.title"),S.message=l("ticket-entry","error.invalidCode.body");break;case 403:S.title=l("ticket-entry","error.codeNoLongerValid.title"),S.message=l("ticket-entry","error.codeNoLongerValid.body");break;case 404:S.title="Not Found",S.message="Ticket was not found";break}else if(S.name===Ea.CONTENTFUL)switch(S.code){case 400:S.message="Could not fetch contentful environment"}return S.message};return xt.jsxs("div",{className:Qi.wrapper,children:[xt.jsx(iu,{className:Qi.menu,onClick:()=>{o(!0)},selfFocus:!0,focusKey:"MENU",children:"Menu"}),xt.jsx("div",{className:Qi.circleRightCorner}),xt.jsx("div",{className:Qi.circleLeftCorner}),xt.jsx("div",{className:Qi.circleCenter}),xt.jsxs("div",{className:Qi.container,children:[xt.jsxs("div",{className:"".concat(Qi.listContainer," body-text"),children:[xt.jsx("h1",{children:"Connect your TV"}),xt.jsxs("div",{className:Qi.list,children:[xt.jsxs("span",{className:Qi.listItemContainer,children:[xt.jsx("span",{className:Qi.listNumber,children:"1"}),xt.jsxs("span",{className:Qi.listText,children:["Download the ",xt.jsx("span",{className:Qi.listBold,children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),xt.jsxs("span",{className:Qi.listItemContainer,children:[xt.jsx("span",{className:Qi.listNumber,children:"2"}),xt.jsx("span",{className:Qi.listText,children:"Enter the ticket code from your confirmation email."})]}),xt.jsxs("span",{className:Qi.listItemContainer,children:[xt.jsx("span",{className:Qi.listNumber,children:"3"}),xt.jsx("span",{className:Qi.listText,children:"Scan the QR code with the app."})]})]})]}),xt.jsx("div",{className:Qi.qrCodeContainer,children:xt.jsx("div",{className:Qi.qrCode,children:xt.jsx(SE,{bgColor:"white",fgColor:"black",value:i!=null?i:"",size:512})})})]}),xt.jsx("div",{className:Qi.errorMessage,children:f.map((S,b)=>xt.jsx("h3",{className:Qi.errorMessage,children:p(S)},"".concat(S.name,"-error-").concat(b.toString())))})]})};function one(){switch(dE()){case dc.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case dc.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case dc.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const tf=one(),ane="_popupWrapper_5nup5_1",sne="_popup_5nup5_1",une="_controls_5nup5_59",aI={popupWrapper:ane,popup:sne,controls:une},XB=async(i,o=!1)=>{const l=dE();i!=null&&i.connected&&o&&await i.destroy(),o&&localStorage.removeItem("ticketCode"),setTimeout(()=>{switch(l){case dc.TIZEN:o?location.reload():window.tizen.application.getCurrentApplication().exit();break;case dc.WEBOS:o?location.reload():window.close();break;default:location.reload();break}},1e3)};function lne({close:i,shouldLogout:o}){const l=bh(),f=async()=>{await XB(l,o)};function p(S){Promise.resolve(1).then(()=>{["POPUP_CONFIRM","POPUP_CANCEL"].includes(su.getCurrentFocusKey())||su.setFocus(S)})}return xt.jsx("div",{className:aI.popupWrapper,children:xt.jsxs("div",{className:aI.popup,children:[xt.jsxs("h3",{children:["Would you like to ",o?"logout":"exit app","?"]}),xt.jsxs("div",{className:aI.controls,children:[xt.jsx(iu,{onClick:i,selfFocus:!0,onBlur:()=>{p("POPUP_CANCEL")},focusKey:"POPUP_CANCEL",children:"Cancel"}),xt.jsx(iu,{onClick:f,focusKey:"POPUP_CONFIRM",onBlur:()=>{p("POPUP_CONFIRM")},children:"Confirm"})]})]})})}const cne="_popupWrapper_5qjl5_1",fne="_popup_5qjl5_1",XF={popupWrapper:cne,popup:fne};function dne({close:i}){return xt.jsx("div",{className:XF.popupWrapper,children:xt.jsxs("div",{className:XF.popup,children:[xt.jsx(Iee,{styles:{width:"96px",height:"96px"}}),xt.jsx("h3",{children:"No Internet connection"}),xt.jsx("span",{children:"Check your connection and try again."}),xt.jsx(iu,{onClick:i,selfFocus:!0,children:"OK"})]})})}const hne="_warningContainer_1q3xx_1",pne={warningContainer:hne},gne=()=>xt.jsxs("div",{className:pne.warningContainer,children:[xt.jsx(WB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),xt.jsx("p",{className:"label",children:"Unsupported key pressed "})]});function mne({goBackFromLive:i,showLobby:o,currentFocus:l}){const f=YB(),p=Ou(),[S,b]=pn.useState(),[g,w]=pn.useState(!1),[F,C]=pn.useState(!1),y=pn.useRef(),v=()=>{b(void 0),w(!1),Promise.resolve(1).then(()=>{su.setFocus(l!=null?l:"LOGOUT")})};pn.useEffect(()=>(window.addEventListener("offline",()=>{b("network")}),window.addEventListener("online",()=>{v()}),document.addEventListener("logout",()=>{w(!0),b("exit")}),()=>{window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{}),document.removeEventListener("logout",()=>{})}),[]),pn.useEffect(()=>{f===tf.KEY_BACK?p!=null&&p.isLive&&!o?i():b("exit"):[tf.KEY_UP,tf.KEY_DOWN,tf.KEY_LEFT,tf.KEY_RIGHT,tf.KEY_OK,tf.KEY_BACK,0,1536,1537,65].includes(f)||((f>89||f<45)&&(C(!0),clearTimeout(y.current)),y.current=setTimeout(()=>{C(!1)},3e3))},[f]);function D(){switch(S){case"exit":return xt.jsx(lne,{close:v,shouldLogout:g});case"network":return xt.jsx(dne,{close:v});default:return}}return xt.jsxs(xt.Fragment,{children:[D(),F&&xt.jsx(gne,{})]})}const vne="_wrapper_170r6_1",yne="_container_170r6_13",Ene="_errorInput_170r6_31",_ne="_errorMessage_170r6_39",Tne="_errorMessageContainer_170r6_47",Sne="_circleRightCorner_170r6_61",wne="_circleLeftCorner_170r6_85",Ane="_circleCenter_170r6_107",Ine="_back_170r6_145",Xl={wrapper:vne,container:yne,errorInput:Ene,errorMessage:_ne,errorMessageContainer:Tne,circleRightCorner:Sne,circleLeftCorner:wne,circleCenter:Ane,back:Ine},bne="_inputWrapper_1ufan_1",Cne="_symbol_1ufan_15",QF={inputWrapper:bne,symbol:Cne},Rne=({value:i})=>xt.jsx("div",{className:QF.inputWrapper,children:(i+" ".repeat(9-i.length)).split("").map((o,l)=>xt.jsx("div",{className:QF.symbol,children:o},l))}),Nne="_keyboardWrapper_18oyi_1",xne="_button_18oyi_17",sI={keyboardWrapper:Nne,button:xne,delete:"_delete_18oyi_35"},Mne=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M","Delete"]],Dne=({handleKeyPress:i})=>{function o(l){l.keyCode<91&&l.keyCode>47&&(i(l.key.toString().toUpperCase()),su.setFocus(l.key.toString().toUpperCase()))}return pn.useEffect(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}),[]),xt.jsx("div",{className:sI.keyboardWrapper,children:Mne.map((l,f)=>xt.jsx("div",{children:l.map((p,S)=>xt.jsx(iu,{className:"".concat(sI.button," ").concat(p==="Delete"?sI.delete:""),focusKey:p,selfFocus:!f&&!S,onClick:()=>{su.setFocus(p),i(p)},children:p},p))},"keyboard_line_".concat(f)))})},Pne=({ticketCode:i,handleTicketCodeEntry:o,setKeyboardSetup:l})=>{const[f,p]=pn.useState(i!=null?i:""),S=q4(),b=H4(),g=pn.useRef(i!=null?i:"");pn.useEffect(()=>{g.current.length===9&&o(f)},[o,f]);function w(){const y=new Event("clearPreConnectErrors");document.dispatchEvent(y)}const F=y=>{if(y.name===Ea.NEGOTIATE)switch(y.code){case 400:y.title=S("ticket-entry","error.toManyDevices.title"),y.message=S("ticket-entry","error.toManyDevices.body");break;case 401:y.title=S("ticket-entry","error.invalidCode.title"),y.message=S("ticket-entry","error.invalidCode.body");break;case 403:y.title=S("ticket-entry","error.codeNoLongerValid.title"),y.message=S("ticket-entry","error.codeNoLongerValid.body");break;case 404:y.title="Not Found",y.message="Ticket was not found";break}else if(y.name===Ea.CONTENTFUL)switch(y.code){case 400:y.message="Could not fetch contentful environment"}return y.message};function C(y){y==="Delete"?(w(),g.current=g.current.slice(0,-1),p(g.current)):g.current.length<9&&(g.current=g.current+y,p(g.current))}return xt.jsxs("div",{className:Xl.wrapper,children:[xt.jsx("div",{className:Xl.circleRightCorner}),xt.jsx("div",{className:Xl.circleLeftCorner}),xt.jsx("div",{className:Xl.circleCenter}),xt.jsxs("div",{className:Xl.container,children:[xt.jsx("h1",{children:S("ticket-entry","enterCode.title")}),xt.jsx(Rne,{value:f}),xt.jsx("div",{className:Xl.errorMessageContainer,children:b.map((y,v)=>xt.jsx("h3",{className:Xl.errorMessage,children:F(y)},"".concat(y.name,"-error-").concat(v.toString())))}),xt.jsx(Dne,{handleKeyPress:C})]}),xt.jsx(iu,{onClick:()=>{w(),o(""),l(!1)},className:Xl.back,focusKey:"BACK",children:"Back"})]})};function One({handleTicketCodeEntry:i}){const o=Ou(),l=om(),f=Iz(),p=bh(),S=OC(),[b,g]=pn.useState(!1),[w,F]=pn.useState(!1),[C,y]=pn.useState(!1),[v,D]=pn.useState(),[m,T]=pn.useState(!1),[U,x]=pn.useState(!1),[_,I]=pn.useState(!1),[R,Z]=pn.useState(!1),[z,W]=pn.useState(!1),[$,le]=pn.useState(!1),[N,X]=pn.useState(""),[ce,oe]=pn.useState(),[he,be]=pn.useState(),Xe="".concat(RC,":").concat(Eh);pn.useEffect(()=>{N&&i(N)},[N]),pn.useEffect(()=>{if(S){const tt=S.find(ut=>ut.deviceId===Eh);tt||(I(!0),setTimeout(()=>{XB(p,!0).then(()=>{}).catch(()=>{})},1500)),oe(tt||S[0])}},[S]),pn.useEffect(()=>{be(ce==null?void 0:ce.stateInfo.state)},[ce]),pn.useEffect(()=>{if(!o)return;const tt=()=>{o.adjustedEndTime&&o.adjustedEndTime<Date.now()?F(!0):o.adjustedStartTime&&(F(!1),D(o.adjustedStartTime-Date.now()))};return o.on("startTimeUpdated",tt),()=>{o.off("startTimeUpdated",tt)}},[o]),pn.useEffect(()=>{if(!l)return;const tt=()=>{F(!0)};return l.on("eventEnded",tt),()=>{l.off("eventEnded",tt)}},[l]),pn.useEffect(()=>{if(!p)return;const tt=()=>{y(!0)};return p.on("eventCanceled",tt),()=>{p.off("eventCanceled",tt)}},[p]),pn.useEffect(()=>{if(!m)return;const tt=setTimeout(()=>{x(!0),T(!1)},1500);return()=>{clearTimeout(tt)}},[m]),pn.useEffect(()=>{if(v)if(v>0){g(!1);const tt=setTimeout(()=>{g(!0)},v);return()=>{clearTimeout(tt)}}else g(!0)},[v]),pn.useEffect(()=>{he==="hostTv"?(Z(!0),T(!0)):f===tb.CONNECTED_STATE&&T(!0)},[he,f]);let Ae;const Ze=!R&&!he?$?"Q":"MENU":"LOGOUT";return C?Ae=xt.jsx(zF,{canceled:!0}):w?Ae=xt.jsx(zF,{}):Ae=xt.jsxs(xt.Fragment,{children:[!R&&!he&&!$&&xt.jsx(ine,{url:Xe,setKeyboardSetup:le}),!R&&!he&&$&&xt.jsx(Pne,{ticketCode:N,handleTicketCodeEntry:X,setKeyboardSetup:le}),m&&!U&&xt.jsx($F,{}),R&&U&&!_&&xt.jsxs("div",{children:[xt.jsx("div",{className:b?"":ate.hidden,children:xt.jsx($ee,{})}),(!b||z)&&xt.jsx(Zte,{timeToLive:v,isLive:b,backToShow:()=>{W(!1)}})]})]}),xt.jsxs(xt.Fragment,{children:[Ae,_&&xt.jsx($F,{isDisconnected:!0}),xt.jsx(mne,{goBackFromLive:()=>{W(!0)},showLobby:z,currentFocus:Ze})]})}su.init({debug:!1,shouldUseNativeEvents:!0});function Lne(){const i=localStorage.getItem("ticketCode"),[o,l]=pn.useState(i!=null?i:"");return xt.jsx("div",{className:p7.pageContainer,children:xt.jsx(Tz,{baseUrl:a7,preferredProfile:"dash-drm",contentfulAccessToken:u7,contentfulSpaceId:l7,ticketCodeProp:o,children:xt.jsx(One,{handleTicketCodeEntry:l})})})}uI.createRoot(document.getElementById("root")).render(xt.jsx(Lne,{}));export{kne as __vite_legacy_guard};
