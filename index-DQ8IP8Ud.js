function $ne(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const S of p)if(S.type==="childList")for(const C of S.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&f(C)}).observe(document,{childList:!0,subtree:!0});function l(p){const S={};return p.integrity&&(S.integrity=p.integrity),p.referrerPolicy&&(S.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?S.credentials="include":p.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function f(p){if(p.ep)return;p.ep=!0;const S=l(p);fetch(p.href,S)}})();var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var iF={exports:{}},V0={},oF={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g=Symbol.for("react.element"),C9=Symbol.for("react.portal"),b9=Symbol.for("react.fragment"),R9=Symbol.for("react.strict_mode"),x9=Symbol.for("react.profiler"),N9=Symbol.for("react.provider"),M9=Symbol.for("react.context"),D9=Symbol.for("react.forward_ref"),P9=Symbol.for("react.suspense"),O9=Symbol.for("react.memo"),L9=Symbol.for("react.lazy"),jD=Symbol.iterator;function k9(r){return r===null||typeof r!="object"?null:(r=jD&&r[jD]||r["@@iterator"],typeof r=="function"?r:null)}var aF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sF=Object.assign,uF={};function Sh(r,o,l){this.props=r,this.context=o,this.refs=uF,this.updater=l||aF}Sh.prototype.isReactComponent={};Sh.prototype.setState=function(r,o){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,o,"setState")};Sh.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function lF(){}lF.prototype=Sh.prototype;function AC(r,o,l){this.props=r,this.context=o,this.refs=uF,this.updater=l||aF}var IC=AC.prototype=new lF;IC.constructor=AC;sF(IC,Sh.prototype);IC.isPureReactComponent=!0;var ZD=Array.isArray,cF=Object.prototype.hasOwnProperty,CC={current:null},fF={key:!0,ref:!0,__self:!0,__source:!0};function dF(r,o,l){var f,p={},S=null,C=null;if(o!=null)for(f in o.ref!==void 0&&(C=o.ref),o.key!==void 0&&(S=""+o.key),o)cF.call(o,f)&&!fF.hasOwnProperty(f)&&(p[f]=o[f]);var g=arguments.length-2;if(g===1)p.children=l;else if(1<g){for(var w=Array(g),F=0;F<g;F++)w[F]=arguments[F+2];p.children=w}if(r&&r.defaultProps)for(f in g=r.defaultProps,g)p[f]===void 0&&(p[f]=g[f]);return{$$typeof:$g,type:r,key:S,ref:C,props:p,_owner:CC.current}}function F9(r,o){return{$$typeof:$g,type:r.type,key:o,ref:r.ref,props:r.props,_owner:r._owner}}function bC(r){return typeof r=="object"&&r!==null&&r.$$typeof===$g}function U9(r){var o={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(l){return o[l]})}var GD=/\/+/g;function cT(r,o){return typeof r=="object"&&r!==null&&r.key!=null?U9(""+r.key):o.toString(36)}function t0(r,o,l,f,p){var S=typeof r;(S==="undefined"||S==="boolean")&&(r=null);var C=!1;if(r===null)C=!0;else switch(S){case"string":case"number":C=!0;break;case"object":switch(r.$$typeof){case $g:case C9:C=!0}}if(C)return C=r,p=p(C),r=f===""?"."+cT(C,0):f,ZD(p)?(l="",r!=null&&(l=r.replace(GD,"$&/")+"/"),t0(p,o,l,"",function(F){return F})):p!=null&&(bC(p)&&(p=F9(p,l+(!p.key||C&&C.key===p.key?"":(""+p.key).replace(GD,"$&/")+"/")+r)),o.push(p)),1;if(C=0,f=f===""?".":f+":",ZD(r))for(var g=0;g<r.length;g++){S=r[g];var w=f+cT(S,g);C+=t0(S,o,l,w,p)}else if(w=k9(r),typeof w=="function")for(r=w.call(r),g=0;!(S=r.next()).done;)S=S.value,w=f+cT(S,g++),C+=t0(S,o,l,w,p);else if(S==="object")throw o=String(r),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return C}function Ny(r,o,l){if(r==null)return r;var f=[],p=0;return t0(r,f,"","",function(S){return o.call(l,S,p++)}),f}function B9(r){if(r._status===-1){var o=r._result;o=o(),o.then(function(l){(r._status===0||r._status===-1)&&(r._status=1,r._result=l)},function(l){(r._status===0||r._status===-1)&&(r._status=2,r._result=l)}),r._status===-1&&(r._status=0,r._result=o)}if(r._status===1)return r._result.default;throw r._result}var Sa={current:null},n0={transition:null},j9={ReactCurrentDispatcher:Sa,ReactCurrentBatchConfig:n0,ReactCurrentOwner:CC};function hF(){throw Error("act(...) is not supported in production builds of React.")}Fr.Children={map:Ny,forEach:function(r,o,l){Ny(r,function(){o.apply(this,arguments)},l)},count:function(r){var o=0;return Ny(r,function(){o++}),o},toArray:function(r){return Ny(r,function(o){return o})||[]},only:function(r){if(!bC(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Fr.Component=Sh;Fr.Fragment=b9;Fr.Profiler=x9;Fr.PureComponent=AC;Fr.StrictMode=R9;Fr.Suspense=P9;Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j9;Fr.act=hF;Fr.cloneElement=function(r,o,l){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var f=sF({},r.props),p=r.key,S=r.ref,C=r._owner;if(o!=null){if(o.ref!==void 0&&(S=o.ref,C=CC.current),o.key!==void 0&&(p=""+o.key),r.type&&r.type.defaultProps)var g=r.type.defaultProps;for(w in o)cF.call(o,w)&&!fF.hasOwnProperty(w)&&(f[w]=o[w]===void 0&&g!==void 0?g[w]:o[w])}var w=arguments.length-2;if(w===1)f.children=l;else if(1<w){g=Array(w);for(var F=0;F<w;F++)g[F]=arguments[F+2];f.children=g}return{$$typeof:$g,type:r.type,key:p,ref:S,props:f,_owner:C}};Fr.createContext=function(r){return r={$$typeof:M9,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:N9,_context:r},r.Consumer=r};Fr.createElement=dF;Fr.createFactory=function(r){var o=dF.bind(null,r);return o.type=r,o};Fr.createRef=function(){return{current:null}};Fr.forwardRef=function(r){return{$$typeof:D9,render:r}};Fr.isValidElement=bC;Fr.lazy=function(r){return{$$typeof:L9,_payload:{_status:-1,_result:r},_init:B9}};Fr.memo=function(r,o){return{$$typeof:O9,type:r,compare:o===void 0?null:o}};Fr.startTransition=function(r){var o=n0.transition;n0.transition={};try{r()}finally{n0.transition=o}};Fr.unstable_act=hF;Fr.useCallback=function(r,o){return Sa.current.useCallback(r,o)};Fr.useContext=function(r){return Sa.current.useContext(r)};Fr.useDebugValue=function(){};Fr.useDeferredValue=function(r){return Sa.current.useDeferredValue(r)};Fr.useEffect=function(r,o){return Sa.current.useEffect(r,o)};Fr.useId=function(){return Sa.current.useId()};Fr.useImperativeHandle=function(r,o,l){return Sa.current.useImperativeHandle(r,o,l)};Fr.useInsertionEffect=function(r,o){return Sa.current.useInsertionEffect(r,o)};Fr.useLayoutEffect=function(r,o){return Sa.current.useLayoutEffect(r,o)};Fr.useMemo=function(r,o){return Sa.current.useMemo(r,o)};Fr.useReducer=function(r,o,l){return Sa.current.useReducer(r,o,l)};Fr.useRef=function(r){return Sa.current.useRef(r)};Fr.useState=function(r){return Sa.current.useState(r)};Fr.useSyncExternalStore=function(r,o,l){return Sa.current.useSyncExternalStore(r,o,l)};Fr.useTransition=function(){return Sa.current.useTransition()};Fr.version="18.3.1";oF.exports=Fr;var ln=oF.exports;const Xo=wC(ln);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z9=ln,G9=Symbol.for("react.element"),q9=Symbol.for("react.fragment"),H9=Object.prototype.hasOwnProperty,K9=Z9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V9={key:!0,ref:!0,__self:!0,__source:!0};function pF(r,o,l){var f,p={},S=null,C=null;l!==void 0&&(S=""+l),o.key!==void 0&&(S=""+o.key),o.ref!==void 0&&(C=o.ref);for(f in o)H9.call(o,f)&&!V9.hasOwnProperty(f)&&(p[f]=o[f]);if(r&&r.defaultProps)for(f in o=r.defaultProps,o)p[f]===void 0&&(p[f]=o[f]);return{$$typeof:G9,type:r,key:S,ref:C,props:p,_owner:K9.current}}V0.Fragment=q9;V0.jsx=pF;V0.jsxs=pF;iF.exports=V0;var pt=iF.exports,dI={},gF={exports:{}},ps={},mF={exports:{}},vF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function o(Ze,nt){var lt=Ze.length;Ze.push(nt);e:for(;0<lt;){var qe=lt-1>>>1,ut=Ze[qe];if(0<p(ut,nt))Ze[qe]=nt,Ze[lt]=ut,lt=qe;else break e}}function l(Ze){return Ze.length===0?null:Ze[0]}function f(Ze){if(Ze.length===0)return null;var nt=Ze[0],lt=Ze.pop();if(lt!==nt){Ze[0]=lt;e:for(var qe=0,ut=Ze.length,At=ut>>>1;qe<At;){var Oe=2*(qe+1)-1,Qe=Ze[Oe],ct=Oe+1,Xt=Ze[ct];if(0>p(Qe,lt))ct<ut&&0>p(Xt,Qe)?(Ze[qe]=Xt,Ze[ct]=lt,qe=ct):(Ze[qe]=Qe,Ze[Oe]=lt,qe=Oe);else if(ct<ut&&0>p(Xt,lt))Ze[qe]=Xt,Ze[ct]=lt,qe=ct;else break e}}return nt}function p(Ze,nt){var lt=Ze.sortIndex-nt.sortIndex;return lt!==0?lt:Ze.id-nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;r.unstable_now=function(){return S.now()}}else{var C=Date,g=C.now();r.unstable_now=function(){return C.now()-g}}var w=[],F=[],b=1,y=null,v=3,D=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ze){for(var nt=l(F);nt!==null;){if(nt.callback===null)f(F);else if(nt.startTime<=Ze)f(F),nt.sortIndex=nt.expirationTime,o(w,nt);else break;nt=l(F)}}function R(Ze){if(T=!1,I(Ze),!m)if(l(w)!==null)m=!0,Xe(Z);else{var nt=l(F);nt!==null&&Ae(R,nt.startTime-Ze)}}function Z(Ze,nt){m=!1,T&&(T=!1,N(X),X=-1),D=!0;var lt=v;try{for(I(nt),y=l(w);y!==null&&(!(y.expirationTime>nt)||Ze&&!$());){var qe=y.callback;if(typeof qe=="function"){y.callback=null,v=y.priorityLevel;var ut=qe(y.expirationTime<=nt);nt=r.unstable_now(),typeof ut=="function"?y.callback=ut:y===l(w)&&f(w),I(nt)}else f(w);y=l(w)}if(y!==null)var At=!0;else{var Oe=l(F);Oe!==null&&Ae(R,Oe.startTime-nt),At=!1}return At}finally{y=null,v=lt,D=!1}}var z=!1,W=null,X=-1,le=5,x=-1;function $(){return!(r.unstable_now()-x<le)}function ce(){if(W!==null){var Ze=r.unstable_now();x=Ze;var nt=!0;try{nt=W(!0,Ze)}finally{nt?oe():(z=!1,W=null)}}else z=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ce=he.port2;he.port1.onmessage=ce,oe=function(){Ce.postMessage(null)}}else oe=function(){U(ce,0)};function Xe(Ze){W=Ze,z||(z=!0,oe())}function Ae(Ze,nt){X=U(function(){Ze(r.unstable_now())},nt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ze){Ze.callback=null},r.unstable_continueExecution=function(){m||D||(m=!0,Xe(Z))},r.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<Ze?Math.floor(1e3/Ze):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return l(w)},r.unstable_next=function(Ze){switch(v){case 1:case 2:case 3:var nt=3;break;default:nt=v}var lt=v;v=nt;try{return Ze()}finally{v=lt}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ze,nt){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var lt=v;v=Ze;try{return nt()}finally{v=lt}},r.unstable_scheduleCallback=function(Ze,nt,lt){var qe=r.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?qe+lt:qe):lt=qe,Ze){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=lt+ut,Ze={id:b++,callback:nt,priorityLevel:Ze,startTime:lt,expirationTime:ut,sortIndex:-1},lt>qe?(Ze.sortIndex=lt,o(F,Ze),l(w)===null&&Ze===l(F)&&(T?(N(X),X=-1):T=!0,Ae(R,lt-qe))):(Ze.sortIndex=ut,o(w,Ze),m||D||(m=!0,Xe(Z))),Ze},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(Ze){var nt=v;return function(){var lt=v;v=nt;try{return Ze.apply(this,arguments)}finally{v=lt}}}})(vF);mF.exports=vF;var z9=mF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y9=ln,hs=z9;function jn(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yF=new Set,Rg={};function Sf(r,o){hh(r,o),hh(r+"Capture",o)}function hh(r,o){for(Rg[r]=o,r=0;r<o.length;r++)yF.add(o[r])}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hI=Object.prototype.hasOwnProperty,W9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qD={},HD={};function $9(r){return hI.call(HD,r)?!0:hI.call(qD,r)?!1:W9.test(r)?HD[r]=!0:(qD[r]=!0,!1)}function X9(r,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Q9(r,o,l,f){if(o===null||typeof o>"u"||X9(r,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function wa(r,o,l,f,p,S,C){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=o,this.sanitizeURL=S,this.removeEmptyString=C}var Go={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Go[r]=new wa(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];Go[o]=new wa(o,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Go[r]=new wa(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Go[r]=new wa(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Go[r]=new wa(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Go[r]=new wa(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Go[r]=new wa(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Go[r]=new wa(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Go[r]=new wa(r,5,!1,r.toLowerCase(),null,!1,!1)});var RC=/[\-:]([a-z])/g;function xC(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(RC,xC);Go[o]=new wa(o,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(RC,xC);Go[o]=new wa(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(RC,xC);Go[o]=new wa(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Go[r]=new wa(r,1,!1,r.toLowerCase(),null,!1,!1)});Go.xlinkHref=new wa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Go[r]=new wa(r,1,!1,r.toLowerCase(),null,!0,!0)});function NC(r,o,l,f){var p=Go.hasOwnProperty(o)?Go[o]:null;(p!==null?p.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Q9(o,l,p,f)&&(l=null),f||p===null?$9(o)&&(l===null?r.removeAttribute(o):r.setAttribute(o,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,f=p.attributeNamespace,l===null?r.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,f?r.setAttributeNS(f,o,l):r.setAttribute(o,l))))}var wl=Y9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,My=Symbol.for("react.element"),Vd=Symbol.for("react.portal"),zd=Symbol.for("react.fragment"),MC=Symbol.for("react.strict_mode"),pI=Symbol.for("react.profiler"),EF=Symbol.for("react.provider"),_F=Symbol.for("react.context"),DC=Symbol.for("react.forward_ref"),gI=Symbol.for("react.suspense"),mI=Symbol.for("react.suspense_list"),PC=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),TF=Symbol.for("react.offscreen"),KD=Symbol.iterator;function Qp(r){return r===null||typeof r!="object"?null:(r=KD&&r[KD]||r["@@iterator"],typeof r=="function"?r:null)}var Vi=Object.assign,fT;function fg(r){if(fT===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);fT=o&&o[1]||""}return"\n"+fT+r}var dT=!1;function hT(r,o){if(!r||dT)return"";dT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(F){var f=F}Reflect.construct(r,[],o)}else{try{o.call()}catch(F){f=F}r.call(o.prototype)}else{try{throw Error()}catch(F){f=F}r()}}catch(F){if(F&&f&&typeof F.stack=="string"){for(var p=F.stack.split("\n"),S=f.stack.split("\n"),C=p.length-1,g=S.length-1;1<=C&&0<=g&&p[C]!==S[g];)g--;for(;1<=C&&0<=g;C--,g--)if(p[C]!==S[g]){if(C!==1||g!==1)do if(C--,g--,0>g||p[C]!==S[g]){var w="\n"+p[C].replace(" at new "," at ");return r.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",r.displayName)),w}while(1<=C&&0<=g);break}}}finally{dT=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?fg(r):""}function J9(r){switch(r.tag){case 5:return fg(r.type);case 16:return fg("Lazy");case 13:return fg("Suspense");case 19:return fg("SuspenseList");case 0:case 2:case 15:return r=hT(r.type,!1),r;case 11:return r=hT(r.type.render,!1),r;case 1:return r=hT(r.type,!0),r;default:return""}}function vI(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case zd:return"Fragment";case Vd:return"Portal";case pI:return"Profiler";case MC:return"StrictMode";case gI:return"Suspense";case mI:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case _F:return(r.displayName||"Context")+".Consumer";case EF:return(r._context.displayName||"Context")+".Provider";case DC:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case PC:return o=r.displayName||null,o!==null?o:vI(r.type)||"Memo";case Ql:o=r._payload,r=r._init;try{return vI(r(o))}catch(l){}}return null}function eq(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vI(o);case 8:return o===MC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function hc(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function SF(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function tq(r){var o=SF(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),f=""+r[o];if(!r.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,S=l.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return p.call(this)},set:function(C){f=""+C,S.call(this,C)}}),Object.defineProperty(r,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Dy(r){r._valueTracker||(r._valueTracker=tq(r))}function wF(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return r&&(f=SF(r)?r.checked?"true":"false":r.value),r=f,r!==l?(o.setValue(r),!0):!1}function m0(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch(o){return r.body}}function yI(r,o){var l=o.checked;return Vi({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:r._wrapperState.initialChecked})}function VD(r,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=hc(o.value!=null?o.value:l),r._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function AF(r,o){o=o.checked,o!=null&&NC(r,"checked",o,!1)}function EI(r,o){AF(r,o);var l=hc(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?_I(r,o.type,l):o.hasOwnProperty("defaultValue")&&_I(r,o.type,hc(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function zD(r,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,l||o===r.value||(r.value=o),r.defaultValue=o}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function _I(r,o,l){(o!=="number"||m0(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var dg=Array.isArray;function sh(r,o,l,f){if(r=r.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=o.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&f&&(r[l].defaultSelected=!0)}else{for(l=""+hc(l),o=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,f&&(r[p].defaultSelected=!0);return}o!==null||r[p].disabled||(o=r[p])}o!==null&&(o.selected=!0)}}function TI(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Vi({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function YD(r,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(jn(92));if(dg(l)){if(1<l.length)throw Error(jn(93));l=l[0]}o=l}o==null&&(o=""),l=o}r._wrapperState={initialValue:hc(l)}}function IF(r,o){var l=hc(o.value),f=hc(o.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),o.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),f!=null&&(r.defaultValue=""+f)}function WD(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function CF(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function SI(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?CF(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Py,bF=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,p){MSApp.execUnsafeLocalFunction(function(){return r(o,l,f,p)})}:r}(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(Py=Py||document.createElement("div"),Py.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Py.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function xg(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var yg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nq=["Webkit","ms","Moz","O"];Object.keys(yg).forEach(function(r){nq.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),yg[o]=yg[r]})});function RF(r,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||yg.hasOwnProperty(r)&&yg[r]?(""+o).trim():o+"px"}function xF(r,o){r=r.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,p=RF(l,o[l],f);l==="float"&&(l="cssFloat"),f?r.setProperty(l,p):r[l]=p}}var rq=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wI(r,o){if(o){if(rq[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(jn(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(jn(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(jn(61))}if(o.style!=null&&typeof o.style!="object")throw Error(jn(62))}}function AI(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var II=null;function OC(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var CI=null,uh=null,lh=null;function $D(r){if(r=Jg(r)){if(typeof CI!="function")throw Error(jn(280));var o=r.stateNode;o&&(o=X0(o),CI(r.stateNode,r.type,o))}}function NF(r){uh?lh?lh.push(r):lh=[r]:uh=r}function MF(){if(uh){var r=uh,o=lh;if(lh=uh=null,$D(r),o)for(r=0;r<o.length;r++)$D(o[r])}}function DF(r,o){return r(o)}function PF(){}var pT=!1;function OF(r,o,l){if(pT)return r(o,l);pT=!0;try{return DF(r,o,l)}finally{pT=!1,(uh!==null||lh!==null)&&(PF(),MF())}}function Ng(r,o){var l=r.stateNode;if(l===null)return null;var f=X0(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(jn(231,o,typeof l));return l}var bI=!1;if(El)try{var Jp={};Object.defineProperty(Jp,"passive",{get:function(){bI=!0}}),window.addEventListener("test",Jp,Jp),window.removeEventListener("test",Jp,Jp)}catch(r){bI=!1}function iq(r,o,l,f,p,S,C,g,w){var F=Array.prototype.slice.call(arguments,3);try{o.apply(l,F)}catch(b){this.onError(b)}}var Eg=!1,v0=null,y0=!1,RI=null,oq={onError:function(r){Eg=!0,v0=r}};function aq(r,o,l,f,p,S,C,g,w){Eg=!1,v0=null,iq.apply(oq,arguments)}function sq(r,o,l,f,p,S,C,g,w){if(aq.apply(this,arguments),Eg){if(Eg){var F=v0;Eg=!1,v0=null}else throw Error(jn(198));y0||(y0=!0,RI=F)}}function wf(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,o.flags&4098&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function LF(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function XD(r){if(wf(r)!==r)throw Error(jn(188))}function uq(r){var o=r.alternate;if(!o){if(o=wf(r),o===null)throw Error(jn(188));return o!==r?null:r}for(var l=r,f=o;;){var p=l.return;if(p===null)break;var S=p.alternate;if(S===null){if(f=p.return,f!==null){l=f;continue}break}if(p.child===S.child){for(S=p.child;S;){if(S===l)return XD(p),r;if(S===f)return XD(p),o;S=S.sibling}throw Error(jn(188))}if(l.return!==f.return)l=p,f=S;else{for(var C=!1,g=p.child;g;){if(g===l){C=!0,l=p,f=S;break}if(g===f){C=!0,f=p,l=S;break}g=g.sibling}if(!C){for(g=S.child;g;){if(g===l){C=!0,l=S,f=p;break}if(g===f){C=!0,f=S,l=p;break}g=g.sibling}if(!C)throw Error(jn(189))}}if(l.alternate!==f)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?r:o}function kF(r){return r=uq(r),r!==null?FF(r):null}function FF(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=FF(r);if(o!==null)return o;r=r.sibling}return null}var UF=hs.unstable_scheduleCallback,QD=hs.unstable_cancelCallback,lq=hs.unstable_shouldYield,cq=hs.unstable_requestPaint,fo=hs.unstable_now,fq=hs.unstable_getCurrentPriorityLevel,LC=hs.unstable_ImmediatePriority,BF=hs.unstable_UserBlockingPriority,E0=hs.unstable_NormalPriority,dq=hs.unstable_LowPriority,jF=hs.unstable_IdlePriority,z0=null,Du=null;function hq(r){if(Du&&typeof Du.onCommitFiberRoot=="function")try{Du.onCommitFiberRoot(z0,r,void 0,(r.current.flags&128)===128)}catch(o){}}var au=Math.clz32?Math.clz32:mq,pq=Math.log,gq=Math.LN2;function mq(r){return r>>>=0,r===0?32:31-(pq(r)/gq|0)|0}var Oy=64,Ly=4194304;function hg(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function _0(r,o){var l=r.pendingLanes;if(l===0)return 0;var f=0,p=r.suspendedLanes,S=r.pingedLanes,C=l&268435455;if(C!==0){var g=C&~p;g!==0?f=hg(g):(S&=C,S!==0&&(f=hg(S)))}else C=l&~p,C!==0?f=hg(C):S!==0&&(f=hg(S));if(f===0)return 0;if(o!==0&&o!==f&&!(o&p)&&(p=f&-f,S=o&-o,p>=S||p===16&&(S&4194240)!==0))return o;if(f&4&&(f|=l&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=f;0<o;)l=31-au(o),p=1<<l,f|=r[l],o&=~p;return f}function vq(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yq(r,o){for(var l=r.suspendedLanes,f=r.pingedLanes,p=r.expirationTimes,S=r.pendingLanes;0<S;){var C=31-au(S),g=1<<C,w=p[C];w===-1?(!(g&l)||g&f)&&(p[C]=vq(g,o)):w<=o&&(r.expiredLanes|=g),S&=~g}}function xI(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ZF(){var r=Oy;return Oy<<=1,!(Oy&4194240)&&(Oy=64),r}function gT(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Xg(r,o,l){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-au(o),r[o]=l}function Eq(r,o){var l=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-au(l),S=1<<p;o[p]=0,f[p]=-1,r[p]=-1,l&=~S}}function kC(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var f=31-au(l),p=1<<f;p&o|r[f]&o&&(r[f]|=o),l&=~p}}var di=0;function GF(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var qF,FC,HF,KF,VF,NI=!1,ky=[],ic=null,oc=null,ac=null,Mg=new Map,Dg=new Map,ec=[],_q="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JD(r,o){switch(r){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":oc=null;break;case"mouseover":case"mouseout":ac=null;break;case"pointerover":case"pointerout":Mg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dg.delete(o.pointerId)}}function eg(r,o,l,f,p,S){return r===null||r.nativeEvent!==S?(r={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:S,targetContainers:[p]},o!==null&&(o=Jg(o),o!==null&&FC(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),r)}function Tq(r,o,l,f,p){switch(o){case"focusin":return ic=eg(ic,r,o,l,f,p),!0;case"dragenter":return oc=eg(oc,r,o,l,f,p),!0;case"mouseover":return ac=eg(ac,r,o,l,f,p),!0;case"pointerover":var S=p.pointerId;return Mg.set(S,eg(Mg.get(S)||null,r,o,l,f,p)),!0;case"gotpointercapture":return S=p.pointerId,Dg.set(S,eg(Dg.get(S)||null,r,o,l,f,p)),!0}return!1}function zF(r){var o=sf(r.target);if(o!==null){var l=wf(o);if(l!==null){if(o=l.tag,o===13){if(o=LF(l),o!==null){r.blockedOn=o,VF(r.priority,function(){HF(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function r0(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=MI(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var f=new l.constructor(l.type,l);II=f,l.target.dispatchEvent(f),II=null}else return o=Jg(l),o!==null&&FC(o),r.blockedOn=l,!1;o.shift()}return!0}function eP(r,o,l){r0(r)&&l.delete(o)}function Sq(){NI=!1,ic!==null&&r0(ic)&&(ic=null),oc!==null&&r0(oc)&&(oc=null),ac!==null&&r0(ac)&&(ac=null),Mg.forEach(eP),Dg.forEach(eP)}function tg(r,o){r.blockedOn===o&&(r.blockedOn=null,NI||(NI=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,Sq)))}function Pg(r){function o(p){return tg(p,r)}if(0<ky.length){tg(ky[0],r);for(var l=1;l<ky.length;l++){var f=ky[l];f.blockedOn===r&&(f.blockedOn=null)}}for(ic!==null&&tg(ic,r),oc!==null&&tg(oc,r),ac!==null&&tg(ac,r),Mg.forEach(o),Dg.forEach(o),l=0;l<ec.length;l++)f=ec[l],f.blockedOn===r&&(f.blockedOn=null);for(;0<ec.length&&(l=ec[0],l.blockedOn===null);)zF(l),l.blockedOn===null&&ec.shift()}var ch=wl.ReactCurrentBatchConfig,T0=!0;function wq(r,o,l,f){var p=di,S=ch.transition;ch.transition=null;try{di=1,UC(r,o,l,f)}finally{di=p,ch.transition=S}}function Aq(r,o,l,f){var p=di,S=ch.transition;ch.transition=null;try{di=4,UC(r,o,l,f)}finally{di=p,ch.transition=S}}function UC(r,o,l,f){if(T0){var p=MI(r,o,l,f);if(p===null)IT(r,o,f,S0,l),JD(r,f);else if(Tq(p,r,o,l,f))f.stopPropagation();else if(JD(r,f),o&4&&-1<_q.indexOf(r)){for(;p!==null;){var S=Jg(p);if(S!==null&&qF(S),S=MI(r,o,l,f),S===null&&IT(r,o,f,S0,l),S===p)break;p=S}p!==null&&f.stopPropagation()}else IT(r,o,f,null,l)}}var S0=null;function MI(r,o,l,f){if(S0=null,r=OC(f),r=sf(r),r!==null)if(o=wf(r),o===null)r=null;else if(l=o.tag,l===13){if(r=LF(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return S0=r,null}function YF(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fq()){case LC:return 1;case BF:return 4;case E0:case dq:return 16;case jF:return 536870912;default:return 16}default:return 16}}var nc=null,BC=null,i0=null;function WF(){if(i0)return i0;var r,o=BC,l=o.length,f,p="value"in nc?nc.value:nc.textContent,S=p.length;for(r=0;r<l&&o[r]===p[r];r++);var C=l-r;for(f=1;f<=C&&o[l-f]===p[S-f];f++);return i0=p.slice(r,1<f?1-f:void 0)}function o0(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Fy(){return!0}function tP(){return!1}function gs(r){function o(l,f,p,S,C){this._reactName=l,this._targetInst=p,this.type=f,this.nativeEvent=S,this.target=C,this.currentTarget=null;for(var g in r)r.hasOwnProperty(g)&&(l=r[g],this[g]=l?l(S):S[g]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Fy:tP,this.isPropagationStopped=tP,this}return Vi(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fy)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fy)},persist:function(){},isPersistent:Fy}),o}var wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jC=gs(wh),Qg=Vi({},wh,{view:0,detail:0}),Iq=gs(Qg),mT,vT,ng,Y0=Vi({},Qg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZC,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ng&&(ng&&r.type==="mousemove"?(mT=r.screenX-ng.screenX,vT=r.screenY-ng.screenY):vT=mT=0,ng=r),mT)},movementY:function(r){return"movementY"in r?r.movementY:vT}}),nP=gs(Y0),Cq=Vi({},Y0,{dataTransfer:0}),bq=gs(Cq),Rq=Vi({},Qg,{relatedTarget:0}),yT=gs(Rq),xq=Vi({},wh,{animationName:0,elapsedTime:0,pseudoElement:0}),Nq=gs(xq),Mq=Vi({},wh,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Dq=gs(Mq),Pq=Vi({},wh,{data:0}),rP=gs(Pq),Oq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fq(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=kq[r])?!!o[r]:!1}function ZC(){return Fq}var Uq=Vi({},Qg,{key:function(r){if(r.key){var o=Oq[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=o0(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Lq[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZC,charCode:function(r){return r.type==="keypress"?o0(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?o0(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Bq=gs(Uq),jq=Vi({},Y0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iP=gs(jq),Zq=Vi({},Qg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZC}),Gq=gs(Zq),qq=Vi({},wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hq=gs(qq),Kq=Vi({},Y0,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Vq=gs(Kq),zq=[9,13,27,32],GC=El&&"CompositionEvent"in window,_g=null;El&&"documentMode"in document&&(_g=document.documentMode);var Yq=El&&"TextEvent"in window&&!_g,$F=El&&(!GC||_g&&8<_g&&11>=_g),oP=" ",aP=!1;function XF(r,o){switch(r){case"keyup":return zq.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QF(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Yd=!1;function Wq(r,o){switch(r){case"compositionend":return QF(o);case"keypress":return o.which!==32?null:(aP=!0,oP);case"textInput":return r=o.data,r===oP&&aP?null:r;default:return null}}function $q(r,o){if(Yd)return r==="compositionend"||!GC&&XF(r,o)?(r=WF(),i0=BC=nc=null,Yd=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $F&&o.locale!=="ko"?null:o.data;default:return null}}var Xq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sP(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Xq[r.type]:o==="textarea"}function JF(r,o,l,f){NF(f),o=w0(o,"onChange"),0<o.length&&(l=new jC("onChange","change",null,l,f),r.push({event:l,listeners:o}))}var Tg=null,Og=null;function Qq(r){c4(r,0)}function W0(r){var o=Xd(r);if(wF(o))return r}function Jq(r,o){if(r==="change")return o}var e4=!1;if(El){var ET;if(El){var _T="oninput"in document;if(!_T){var uP=document.createElement("div");uP.setAttribute("oninput","return;"),_T=typeof uP.oninput=="function"}ET=_T}else ET=!1;e4=ET&&(!document.documentMode||9<document.documentMode)}function lP(){Tg&&(Tg.detachEvent("onpropertychange",t4),Og=Tg=null)}function t4(r){if(r.propertyName==="value"&&W0(Og)){var o=[];JF(o,Og,r,OC(r)),OF(Qq,o)}}function eH(r,o,l){r==="focusin"?(lP(),Tg=o,Og=l,Tg.attachEvent("onpropertychange",t4)):r==="focusout"&&lP()}function tH(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return W0(Og)}function nH(r,o){if(r==="click")return W0(o)}function rH(r,o){if(r==="input"||r==="change")return W0(o)}function iH(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var lu=typeof Object.is=="function"?Object.is:iH;function Lg(r,o){if(lu(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var p=l[f];if(!hI.call(o,p)||!lu(r[p],o[p]))return!1}return!0}function cP(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function fP(r,o){var l=cP(r);r=0;for(var f;l;){if(l.nodeType===3){if(f=r+l.textContent.length,r<=o&&f>=o)return{node:l,offset:o-r};r=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=cP(l)}}function n4(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?n4(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function r4(){for(var r=window,o=m0();o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch(f){l=!1}if(l)r=o.contentWindow;else break;o=m0(r.document)}return o}function qC(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function oH(r){var o=r4(),l=r.focusedElem,f=r.selectionRange;if(o!==l&&l&&l.ownerDocument&&n4(l.ownerDocument.documentElement,l)){if(f!==null&&qC(l)){if(o=f.start,r=f.end,r===void 0&&(r=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(r,l.value.length);else if(r=(o=l.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,S=Math.min(f.start,p);f=f.end===void 0?S:Math.min(f.end,p),!r.extend&&S>f&&(p=f,f=S,S=p),p=fP(l,S);var C=fP(l,f);p&&C&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==C.node||r.focusOffset!==C.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),r.removeAllRanges(),S>f?(r.addRange(o),r.extend(C.node,C.offset)):(o.setEnd(C.node,C.offset),r.addRange(o)))}}for(o=[],r=l;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)r=o[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var aH=El&&"documentMode"in document&&11>=document.documentMode,Wd=null,DI=null,Sg=null,PI=!1;function dP(r,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;PI||Wd==null||Wd!==m0(f)||(f=Wd,"selectionStart"in f&&qC(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Sg&&Lg(Sg,f)||(Sg=f,f=w0(DI,"onSelect"),0<f.length&&(o=new jC("onSelect","select",null,o,l),r.push({event:o,listeners:f}),o.target=Wd)))}function Uy(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var $d={animationend:Uy("Animation","AnimationEnd"),animationiteration:Uy("Animation","AnimationIteration"),animationstart:Uy("Animation","AnimationStart"),transitionend:Uy("Transition","TransitionEnd")},TT={},i4={};El&&(i4=document.createElement("div").style,"AnimationEvent"in window||(delete $d.animationend.animation,delete $d.animationiteration.animation,delete $d.animationstart.animation),"TransitionEvent"in window||delete $d.transitionend.transition);function $0(r){if(TT[r])return TT[r];if(!$d[r])return r;var o=$d[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in i4)return TT[r]=o[l];return r}var o4=$0("animationend"),a4=$0("animationiteration"),s4=$0("animationstart"),u4=$0("transitionend"),l4=new Map,hP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gc(r,o){l4.set(r,o),Sf(o,[r])}for(var ST=0;ST<hP.length;ST++){var wT=hP[ST],sH=wT.toLowerCase(),uH=wT[0].toUpperCase()+wT.slice(1);gc(sH,"on"+uH)}gc(o4,"onAnimationEnd");gc(a4,"onAnimationIteration");gc(s4,"onAnimationStart");gc("dblclick","onDoubleClick");gc("focusin","onFocus");gc("focusout","onBlur");gc(u4,"onTransitionEnd");hh("onMouseEnter",["mouseout","mouseover"]);hh("onMouseLeave",["mouseout","mouseover"]);hh("onPointerEnter",["pointerout","pointerover"]);hh("onPointerLeave",["pointerout","pointerover"]);Sf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lH=new Set("cancel close invalid load scroll toggle".split(" ").concat(pg));function pP(r,o,l){var f=r.type||"unknown-event";r.currentTarget=l,sq(f,o,void 0,r),r.currentTarget=null}function c4(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var f=r[l],p=f.event;f=f.listeners;e:{var S=void 0;if(o)for(var C=f.length-1;0<=C;C--){var g=f[C],w=g.instance,F=g.currentTarget;if(g=g.listener,w!==S&&p.isPropagationStopped())break e;pP(p,g,F),S=w}else for(C=0;C<f.length;C++){if(g=f[C],w=g.instance,F=g.currentTarget,g=g.listener,w!==S&&p.isPropagationStopped())break e;pP(p,g,F),S=w}}}if(y0)throw r=RI,y0=!1,RI=null,r}function Ni(r,o){var l=o[UI];l===void 0&&(l=o[UI]=new Set);var f=r+"__bubble";l.has(f)||(f4(o,r,2,!1),l.add(f))}function AT(r,o,l){var f=0;o&&(f|=4),f4(l,r,f,o)}var By="_reactListening"+Math.random().toString(36).slice(2);function kg(r){if(!r[By]){r[By]=!0,yF.forEach(function(l){l!=="selectionchange"&&(lH.has(l)||AT(l,!1,r),AT(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[By]||(o[By]=!0,AT("selectionchange",!1,o))}}function f4(r,o,l,f){switch(YF(o)){case 1:var p=wq;break;case 4:p=Aq;break;default:p=UC}l=p.bind(null,o,l,r),p=void 0,!bI||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),f?p!==void 0?r.addEventListener(o,l,{capture:!0,passive:p}):r.addEventListener(o,l,!0):p!==void 0?r.addEventListener(o,l,{passive:p}):r.addEventListener(o,l,!1)}function IT(r,o,l,f,p){var S=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var g=f.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(C===4)for(C=f.return;C!==null;){var w=C.tag;if((w===3||w===4)&&(w=C.stateNode.containerInfo,w===p||w.nodeType===8&&w.parentNode===p))return;C=C.return}for(;g!==null;){if(C=sf(g),C===null)return;if(w=C.tag,w===5||w===6){f=S=C;continue e}g=g.parentNode}}f=f.return}OF(function(){var F=S,b=OC(l),y=[];e:{var v=l4.get(r);if(v!==void 0){var D=jC,m=r;switch(r){case"keypress":if(o0(l)===0)break e;case"keydown":case"keyup":D=Bq;break;case"focusin":m="focus",D=yT;break;case"focusout":m="blur",D=yT;break;case"beforeblur":case"afterblur":D=yT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=nP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=bq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Gq;break;case o4:case a4:case s4:D=Nq;break;case u4:D=Hq;break;case"scroll":D=Iq;break;case"wheel":D=Vq;break;case"copy":case"cut":case"paste":D=Dq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=iP}var T=(o&4)!==0,U=!T&&r==="scroll",N=T?v!==null?v+"Capture":null:v;T=[];for(var _=F,I;_!==null;){I=_;var R=I.stateNode;if(I.tag===5&&R!==null&&(I=R,N!==null&&(R=Ng(_,N),R!=null&&T.push(Fg(_,R,I)))),U)break;_=_.return}0<T.length&&(v=new D(v,m,null,l,b),y.push({event:v,listeners:T}))}}if(!(o&7)){e:{if(v=r==="mouseover"||r==="pointerover",D=r==="mouseout"||r==="pointerout",v&&l!==II&&(m=l.relatedTarget||l.fromElement)&&(sf(m)||m[_l]))break e;if((D||v)&&(v=b.window===b?b:(v=b.ownerDocument)?v.defaultView||v.parentWindow:window,D?(m=l.relatedTarget||l.toElement,D=F,m=m?sf(m):null,m!==null&&(U=wf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(D=null,m=F),D!==m)){if(T=nP,R="onMouseLeave",N="onMouseEnter",_="mouse",(r==="pointerout"||r==="pointerover")&&(T=iP,R="onPointerLeave",N="onPointerEnter",_="pointer"),U=D==null?v:Xd(D),I=m==null?v:Xd(m),v=new T(R,_+"leave",D,l,b),v.target=U,v.relatedTarget=I,R=null,sf(b)===F&&(T=new T(N,_+"enter",m,l,b),T.target=I,T.relatedTarget=U,R=T),U=R,D&&m)t:{for(T=D,N=m,_=0,I=T;I;I=Zd(I))_++;for(I=0,R=N;R;R=Zd(R))I++;for(;0<_-I;)T=Zd(T),_--;for(;0<I-_;)N=Zd(N),I--;for(;_--;){if(T===N||N!==null&&T===N.alternate)break t;T=Zd(T),N=Zd(N)}T=null}else T=null;D!==null&&gP(y,v,D,T,!1),m!==null&&U!==null&&gP(y,U,m,T,!0)}}e:{if(v=F?Xd(F):window,D=v.nodeName&&v.nodeName.toLowerCase(),D==="select"||D==="input"&&v.type==="file")var Z=Jq;else if(sP(v))if(e4)Z=rH;else{Z=tH;var z=eH}else(D=v.nodeName)&&D.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(Z=nH);if(Z&&(Z=Z(r,F))){JF(y,Z,l,b);break e}z&&z(r,v,F),r==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&_I(v,"number",v.value)}switch(z=F?Xd(F):window,r){case"focusin":(sP(z)||z.contentEditable==="true")&&(Wd=z,DI=F,Sg=null);break;case"focusout":Sg=DI=Wd=null;break;case"mousedown":PI=!0;break;case"contextmenu":case"mouseup":case"dragend":PI=!1,dP(y,l,b);break;case"selectionchange":if(aH)break;case"keydown":case"keyup":dP(y,l,b)}var W;if(GC)e:{switch(r){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else Yd?XF(r,l)&&(X="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(X="onCompositionStart");X&&($F&&l.locale!=="ko"&&(Yd||X!=="onCompositionStart"?X==="onCompositionEnd"&&Yd&&(W=WF()):(nc=b,BC="value"in nc?nc.value:nc.textContent,Yd=!0)),z=w0(F,X),0<z.length&&(X=new rP(X,r,null,l,b),y.push({event:X,listeners:z}),W?X.data=W:(W=QF(l),W!==null&&(X.data=W)))),(W=Yq?Wq(r,l):$q(r,l))&&(F=w0(F,"onBeforeInput"),0<F.length&&(b=new rP("onBeforeInput","beforeinput",null,l,b),y.push({event:b,listeners:F}),b.data=W))}c4(y,o)})}function Fg(r,o,l){return{instance:r,listener:o,currentTarget:l}}function w0(r,o){for(var l=o+"Capture",f=[];r!==null;){var p=r,S=p.stateNode;p.tag===5&&S!==null&&(p=S,S=Ng(r,l),S!=null&&f.unshift(Fg(r,S,p)),S=Ng(r,o),S!=null&&f.push(Fg(r,S,p))),r=r.return}return f}function Zd(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function gP(r,o,l,f,p){for(var S=o._reactName,C=[];l!==null&&l!==f;){var g=l,w=g.alternate,F=g.stateNode;if(w!==null&&w===f)break;g.tag===5&&F!==null&&(g=F,p?(w=Ng(l,S),w!=null&&C.unshift(Fg(l,w,g))):p||(w=Ng(l,S),w!=null&&C.push(Fg(l,w,g)))),l=l.return}C.length!==0&&r.push({event:o,listeners:C})}var cH=/\r\n?/g,fH=/\u0000|\uFFFD/g;function mP(r){return(typeof r=="string"?r:""+r).replace(cH,"\n").replace(fH,"")}function jy(r,o,l){if(o=mP(o),mP(r)!==o&&l)throw Error(jn(425))}function A0(){}var OI=null,LI=null;function kI(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var FI=typeof setTimeout=="function"?setTimeout:void 0,dH=typeof clearTimeout=="function"?clearTimeout:void 0,vP=typeof Promise=="function"?Promise:void 0,hH=typeof queueMicrotask=="function"?queueMicrotask:typeof vP<"u"?function(r){return vP.resolve(null).then(r).catch(pH)}:FI;function pH(r){setTimeout(function(){throw r})}function CT(r,o){var l=o,f=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(f===0){r.removeChild(p),Pg(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=p}while(l);Pg(o)}function sc(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function yP(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return r;o--}else l==="/$"&&o++}r=r.previousSibling}return null}var Ah=Math.random().toString(36).slice(2),Mu="__reactFiber$"+Ah,Ug="__reactProps$"+Ah,_l="__reactContainer$"+Ah,UI="__reactEvents$"+Ah,gH="__reactListeners$"+Ah,mH="__reactHandles$"+Ah;function sf(r){var o=r[Mu];if(o)return o;for(var l=r.parentNode;l;){if(o=l[_l]||l[Mu]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=yP(r);r!==null;){if(l=r[Mu])return l;r=yP(r)}return o}r=l,l=r.parentNode}return null}function Jg(r){return r=r[Mu]||r[_l],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Xd(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(jn(33))}function X0(r){return r[Ug]||null}var BI=[],Qd=-1;function mc(r){return{current:r}}function Mi(r){0>Qd||(r.current=BI[Qd],BI[Qd]=null,Qd--)}function Ci(r,o){Qd++,BI[Qd]=r.current,r.current=o}var pc={},ea=mc(pc),ja=mc(!1),gf=pc;function ph(r,o){var l=r.type.contextTypes;if(!l)return pc;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var p={},S;for(S in l)p[S]=o[S];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=p),p}function Za(r){return r=r.childContextTypes,r!=null}function I0(){Mi(ja),Mi(ea)}function EP(r,o,l){if(ea.current!==pc)throw Error(jn(168));Ci(ea,o),Ci(ja,l)}function d4(r,o,l){var f=r.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var p in f)if(!(p in o))throw Error(jn(108,eq(r)||"Unknown",p));return Vi({},l,f)}function C0(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pc,gf=ea.current,Ci(ea,r),Ci(ja,ja.current),!0}function _P(r,o,l){var f=r.stateNode;if(!f)throw Error(jn(169));l?(r=d4(r,o,gf),f.__reactInternalMemoizedMergedChildContext=r,Mi(ja),Mi(ea),Ci(ea,r)):Mi(ja),Ci(ja,l)}var gl=null,Q0=!1,bT=!1;function h4(r){gl===null?gl=[r]:gl.push(r)}function vH(r){Q0=!0,h4(r)}function vc(){if(!bT&&gl!==null){bT=!0;var r=0,o=di;try{var l=gl;for(di=1;r<l.length;r++){var f=l[r];do f=f(!0);while(f!==null)}gl=null,Q0=!1}catch(p){throw gl!==null&&(gl=gl.slice(r+1)),UF(LC,vc),p}finally{di=o,bT=!1}}return null}var Jd=[],eh=0,b0=null,R0=0,Is=[],Cs=0,mf=null,ml=1,vl="";function nf(r,o){Jd[eh++]=R0,Jd[eh++]=b0,b0=r,R0=o}function p4(r,o,l){Is[Cs++]=ml,Is[Cs++]=vl,Is[Cs++]=mf,mf=r;var f=ml;r=vl;var p=32-au(f)-1;f&=~(1<<p),l+=1;var S=32-au(o)+p;if(30<S){var C=p-p%5;S=(f&(1<<C)-1).toString(32),f>>=C,p-=C,ml=1<<32-au(o)+p|l<<p|f,vl=S+r}else ml=1<<S|l<<p|f,vl=r}function HC(r){r.return!==null&&(nf(r,1),p4(r,1,0))}function KC(r){for(;r===b0;)b0=Jd[--eh],Jd[eh]=null,R0=Jd[--eh],Jd[eh]=null;for(;r===mf;)mf=Is[--Cs],Is[Cs]=null,vl=Is[--Cs],Is[Cs]=null,ml=Is[--Cs],Is[Cs]=null}var ds=null,cs=null,Ui=!1,nu=null;function g4(r,o){var l=Rs(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=r,o=r.deletions,o===null?(r.deletions=[l],r.flags|=16):o.push(l)}function TP(r,o){switch(r.tag){case 5:var l=r.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,ds=r,cs=sc(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,ds=r,cs=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=mf!==null?{id:ml,overflow:vl}:null,r.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Rs(18,null,null,0),l.stateNode=o,l.return=r,r.child=l,ds=r,cs=null,!0):!1;default:return!1}}function jI(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ZI(r){if(Ui){var o=cs;if(o){var l=o;if(!TP(r,o)){if(jI(r))throw Error(jn(418));o=sc(l.nextSibling);var f=ds;o&&TP(r,o)?g4(f,l):(r.flags=r.flags&-4097|2,Ui=!1,ds=r)}}else{if(jI(r))throw Error(jn(418));r.flags=r.flags&-4097|2,Ui=!1,ds=r}}}function SP(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;ds=r}function Zy(r){if(r!==ds)return!1;if(!Ui)return SP(r),Ui=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!kI(r.type,r.memoizedProps)),o&&(o=cs)){if(jI(r))throw m4(),Error(jn(418));for(;o;)g4(r,o),o=sc(o.nextSibling)}if(SP(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(jn(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(o===0){cs=sc(r.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}r=r.nextSibling}cs=null}}else cs=ds?sc(r.stateNode.nextSibling):null;return!0}function m4(){for(var r=cs;r;)r=sc(r.nextSibling)}function gh(){cs=ds=null,Ui=!1}function VC(r){nu===null?nu=[r]:nu.push(r)}var yH=wl.ReactCurrentBatchConfig;function rg(r,o,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var f=l.stateNode}if(!f)throw Error(jn(147,r));var p=f,S=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===S?o.ref:(o=function(C){var g=p.refs;C===null?delete g[S]:g[S]=C},o._stringRef=S,o)}if(typeof r!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,r))}return r}function Gy(r,o){throw r=Object.prototype.toString.call(o),Error(jn(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function wP(r){var o=r._init;return o(r._payload)}function v4(r){function o(N,_){if(r){var I=N.deletions;I===null?(N.deletions=[_],N.flags|=16):I.push(_)}}function l(N,_){if(!r)return null;for(;_!==null;)o(N,_),_=_.sibling;return null}function f(N,_){for(N=new Map;_!==null;)_.key!==null?N.set(_.key,_):N.set(_.index,_),_=_.sibling;return N}function p(N,_){return N=fc(N,_),N.index=0,N.sibling=null,N}function S(N,_,I){return N.index=I,r?(I=N.alternate,I!==null?(I=I.index,I<_?(N.flags|=2,_):I):(N.flags|=2,_)):(N.flags|=1048576,_)}function C(N){return r&&N.alternate===null&&(N.flags|=2),N}function g(N,_,I,R){return _===null||_.tag!==6?(_=OT(I,N.mode,R),_.return=N,_):(_=p(_,I),_.return=N,_)}function w(N,_,I,R){var Z=I.type;return Z===zd?b(N,_,I.props.children,R,I.key):_!==null&&(_.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ql&&wP(Z)===_.type)?(R=p(_,I.props),R.ref=rg(N,_,I),R.return=N,R):(R=d0(I.type,I.key,I.props,null,N.mode,R),R.ref=rg(N,_,I),R.return=N,R)}function F(N,_,I,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=LT(I,N.mode,R),_.return=N,_):(_=p(_,I.children||[]),_.return=N,_)}function b(N,_,I,R,Z){return _===null||_.tag!==7?(_=df(I,N.mode,R,Z),_.return=N,_):(_=p(_,I),_.return=N,_)}function y(N,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=OT(""+_,N.mode,I),_.return=N,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case My:return I=d0(_.type,_.key,_.props,null,N.mode,I),I.ref=rg(N,null,_),I.return=N,I;case Vd:return _=LT(_,N.mode,I),_.return=N,_;case Ql:var R=_._init;return y(N,R(_._payload),I)}if(dg(_)||Qp(_))return _=df(_,N.mode,I,null),_.return=N,_;Gy(N,_)}return null}function v(N,_,I,R){var Z=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Z!==null?null:g(N,_,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case My:return I.key===Z?w(N,_,I,R):null;case Vd:return I.key===Z?F(N,_,I,R):null;case Ql:return Z=I._init,v(N,_,Z(I._payload),R)}if(dg(I)||Qp(I))return Z!==null?null:b(N,_,I,R,null);Gy(N,I)}return null}function D(N,_,I,R,Z){if(typeof R=="string"&&R!==""||typeof R=="number")return N=N.get(I)||null,g(_,N,""+R,Z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case My:return N=N.get(R.key===null?I:R.key)||null,w(_,N,R,Z);case Vd:return N=N.get(R.key===null?I:R.key)||null,F(_,N,R,Z);case Ql:var z=R._init;return D(N,_,I,z(R._payload),Z)}if(dg(R)||Qp(R))return N=N.get(I)||null,b(_,N,R,Z,null);Gy(_,R)}return null}function m(N,_,I,R){for(var Z=null,z=null,W=_,X=_=0,le=null;W!==null&&X<I.length;X++){W.index>X?(le=W,W=null):le=W.sibling;var x=v(N,W,I[X],R);if(x===null){W===null&&(W=le);break}r&&W&&x.alternate===null&&o(N,W),_=S(x,_,X),z===null?Z=x:z.sibling=x,z=x,W=le}if(X===I.length)return l(N,W),Ui&&nf(N,X),Z;if(W===null){for(;X<I.length;X++)W=y(N,I[X],R),W!==null&&(_=S(W,_,X),z===null?Z=W:z.sibling=W,z=W);return Ui&&nf(N,X),Z}for(W=f(N,W);X<I.length;X++)le=D(W,N,X,I[X],R),le!==null&&(r&&le.alternate!==null&&W.delete(le.key===null?X:le.key),_=S(le,_,X),z===null?Z=le:z.sibling=le,z=le);return r&&W.forEach(function($){return o(N,$)}),Ui&&nf(N,X),Z}function T(N,_,I,R){var Z=Qp(I);if(typeof Z!="function")throw Error(jn(150));if(I=Z.call(I),I==null)throw Error(jn(151));for(var z=Z=null,W=_,X=_=0,le=null,x=I.next();W!==null&&!x.done;X++,x=I.next()){W.index>X?(le=W,W=null):le=W.sibling;var $=v(N,W,x.value,R);if($===null){W===null&&(W=le);break}r&&W&&$.alternate===null&&o(N,W),_=S($,_,X),z===null?Z=$:z.sibling=$,z=$,W=le}if(x.done)return l(N,W),Ui&&nf(N,X),Z;if(W===null){for(;!x.done;X++,x=I.next())x=y(N,x.value,R),x!==null&&(_=S(x,_,X),z===null?Z=x:z.sibling=x,z=x);return Ui&&nf(N,X),Z}for(W=f(N,W);!x.done;X++,x=I.next())x=D(W,N,X,x.value,R),x!==null&&(r&&x.alternate!==null&&W.delete(x.key===null?X:x.key),_=S(x,_,X),z===null?Z=x:z.sibling=x,z=x);return r&&W.forEach(function(ce){return o(N,ce)}),Ui&&nf(N,X),Z}function U(N,_,I,R){if(typeof I=="object"&&I!==null&&I.type===zd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case My:e:{for(var Z=I.key,z=_;z!==null;){if(z.key===Z){if(Z=I.type,Z===zd){if(z.tag===7){l(N,z.sibling),_=p(z,I.props.children),_.return=N,N=_;break e}}else if(z.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ql&&wP(Z)===z.type){l(N,z.sibling),_=p(z,I.props),_.ref=rg(N,z,I),_.return=N,N=_;break e}l(N,z);break}else o(N,z);z=z.sibling}I.type===zd?(_=df(I.props.children,N.mode,R,I.key),_.return=N,N=_):(R=d0(I.type,I.key,I.props,null,N.mode,R),R.ref=rg(N,_,I),R.return=N,N=R)}return C(N);case Vd:e:{for(z=I.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(N,_.sibling),_=p(_,I.children||[]),_.return=N,N=_;break e}else{l(N,_);break}else o(N,_);_=_.sibling}_=LT(I,N.mode,R),_.return=N,N=_}return C(N);case Ql:return z=I._init,U(N,_,z(I._payload),R)}if(dg(I))return m(N,_,I,R);if(Qp(I))return T(N,_,I,R);Gy(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(N,_.sibling),_=p(_,I),_.return=N,N=_):(l(N,_),_=OT(I,N.mode,R),_.return=N,N=_),C(N)):l(N,_)}return U}var mh=v4(!0),y4=v4(!1),x0=mc(null),N0=null,th=null,zC=null;function YC(){zC=th=N0=null}function WC(r){var o=x0.current;Mi(x0),r._currentValue=o}function GI(r,o,l){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===l)break;r=r.return}}function fh(r,o){N0=r,zC=th=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&o&&(Ba=!0),r.firstContext=null)}function Ns(r){var o=r._currentValue;if(zC!==r)if(r={context:r,memoizedValue:o,next:null},th===null){if(N0===null)throw Error(jn(308));th=r,N0.dependencies={lanes:0,firstContext:r}}else th=th.next=r;return o}var uf=null;function $C(r){uf===null?uf=[r]:uf.push(r)}function E4(r,o,l,f){var p=o.interleaved;return p===null?(l.next=l,$C(o)):(l.next=p.next,p.next=l),o.interleaved=l,Tl(r,f)}function Tl(r,o){r.lanes|=o;var l=r.alternate;for(l!==null&&(l.lanes|=o),l=r,r=r.return;r!==null;)r.childLanes|=o,l=r.alternate,l!==null&&(l.childLanes|=o),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Jl=!1;function XC(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _4(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function yl(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function uc(r,o,l){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,$r&2){var p=f.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),f.pending=o,Tl(r,l)}return p=f.interleaved,p===null?(o.next=o,$C(f)):(o.next=p.next,p.next=o),f.interleaved=o,Tl(r,l)}function a0(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=r.pendingLanes,l|=f,o.lanes=l,kC(r,l)}}function AP(r,o){var l=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var p=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?p=S=C:S=S.next=C,l=l.next}while(l!==null);S===null?p=S=o:S=S.next=o}else p=S=o;l={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:S,shared:f.shared,effects:f.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}function M0(r,o,l,f){var p=r.updateQueue;Jl=!1;var S=p.firstBaseUpdate,C=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var w=g,F=w.next;w.next=null,C===null?S=F:C.next=F,C=w;var b=r.alternate;b!==null&&(b=b.updateQueue,g=b.lastBaseUpdate,g!==C&&(g===null?b.firstBaseUpdate=F:g.next=F,b.lastBaseUpdate=w))}if(S!==null){var y=p.baseState;C=0,b=F=w=null,g=S;do{var v=g.lane,D=g.eventTime;if((f&v)===v){b!==null&&(b=b.next={eventTime:D,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=r,T=g;switch(v=o,D=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){y=m.call(D,y,v);break e}y=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,v=typeof m=="function"?m.call(D,y,v):m,v==null)break e;y=Vi({},y,v);break e;case 2:Jl=!0}}g.callback!==null&&g.lane!==0&&(r.flags|=64,v=p.effects,v===null?p.effects=[g]:v.push(g))}else D={eventTime:D,lane:v,tag:g.tag,payload:g.payload,callback:g.callback,next:null},b===null?(F=b=D,w=y):b=b.next=D,C|=v;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;v=g,g=v.next,v.next=null,p.lastBaseUpdate=v,p.shared.pending=null}}while(!0);if(b===null&&(w=y),p.baseState=w,p.firstBaseUpdate=F,p.lastBaseUpdate=b,o=p.shared.interleaved,o!==null){p=o;do C|=p.lane,p=p.next;while(p!==o)}else S===null&&(p.shared.lanes=0);yf|=C,r.lanes=C,r.memoizedState=y}}function IP(r,o,l){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var f=r[o],p=f.callback;if(p!==null){if(f.callback=null,f=l,typeof p!="function")throw Error(jn(191,p));p.call(f)}}}var em={},Pu=mc(em),Bg=mc(em),jg=mc(em);function lf(r){if(r===em)throw Error(jn(174));return r}function QC(r,o){switch(Ci(jg,o),Ci(Bg,r),Ci(Pu,em),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:SI(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=SI(o,r)}Mi(Pu),Ci(Pu,o)}function vh(){Mi(Pu),Mi(Bg),Mi(jg)}function T4(r){lf(jg.current);var o=lf(Pu.current),l=SI(o,r.type);o!==l&&(Ci(Bg,r),Ci(Pu,l))}function JC(r){Bg.current===r&&(Mi(Pu),Mi(Bg))}var qi=mc(0);function D0(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var RT=[];function eb(){for(var r=0;r<RT.length;r++)RT[r]._workInProgressVersionPrimary=null;RT.length=0}var s0=wl.ReactCurrentDispatcher,xT=wl.ReactCurrentBatchConfig,vf=0,Ki=null,So=null,Mo=null,P0=!1,wg=!1,Zg=0,EH=0;function Wo(){throw Error(jn(321))}function tb(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!lu(r[l],o[l]))return!1;return!0}function nb(r,o,l,f,p,S){if(vf=S,Ki=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,s0.current=r===null||r.memoizedState===null?wH:AH,r=l(f,p),wg){S=0;do{if(wg=!1,Zg=0,25<=S)throw Error(jn(301));S+=1,Mo=So=null,o.updateQueue=null,s0.current=IH,r=l(f,p)}while(wg)}if(s0.current=O0,o=So!==null&&So.next!==null,vf=0,Mo=So=Ki=null,P0=!1,o)throw Error(jn(300));return r}function rb(){var r=Zg!==0;return Zg=0,r}function Nu(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mo===null?Ki.memoizedState=Mo=r:Mo=Mo.next=r,Mo}function Ms(){if(So===null){var r=Ki.alternate;r=r!==null?r.memoizedState:null}else r=So.next;var o=Mo===null?Ki.memoizedState:Mo.next;if(o!==null)Mo=o,So=r;else{if(r===null)throw Error(jn(310));So=r,r={memoizedState:So.memoizedState,baseState:So.baseState,baseQueue:So.baseQueue,queue:So.queue,next:null},Mo===null?Ki.memoizedState=Mo=r:Mo=Mo.next=r}return Mo}function Gg(r,o){return typeof o=="function"?o(r):o}function NT(r){var o=Ms(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=r;var f=So,p=f.baseQueue,S=l.pending;if(S!==null){if(p!==null){var C=p.next;p.next=S.next,S.next=C}f.baseQueue=p=S,l.pending=null}if(p!==null){S=p.next,f=f.baseState;var g=C=null,w=null,F=S;do{var b=F.lane;if((vf&b)===b)w!==null&&(w=w.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),f=F.hasEagerState?F.eagerState:r(f,F.action);else{var y={lane:b,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};w===null?(g=w=y,C=f):w=w.next=y,Ki.lanes|=b,yf|=b}F=F.next}while(F!==null&&F!==S);w===null?C=f:w.next=g,lu(f,o.memoizedState)||(Ba=!0),o.memoizedState=f,o.baseState=C,o.baseQueue=w,l.lastRenderedState=f}if(r=l.interleaved,r!==null){p=r;do S=p.lane,Ki.lanes|=S,yf|=S,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function MT(r){var o=Ms(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=r;var f=l.dispatch,p=l.pending,S=o.memoizedState;if(p!==null){l.pending=null;var C=p=p.next;do S=r(S,C.action),C=C.next;while(C!==p);lu(S,o.memoizedState)||(Ba=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),l.lastRenderedState=S}return[S,f]}function S4(){}function w4(r,o){var l=Ki,f=Ms(),p=o(),S=!lu(f.memoizedState,p);if(S&&(f.memoizedState=p,Ba=!0),f=f.queue,ib(C4.bind(null,l,f,r),[r]),f.getSnapshot!==o||S||Mo!==null&&Mo.memoizedState.tag&1){if(l.flags|=2048,qg(9,I4.bind(null,l,f,p,o),void 0,null),Do===null)throw Error(jn(349));vf&30||A4(l,o,p)}return p}function A4(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function I4(r,o,l,f){o.value=l,o.getSnapshot=f,b4(o)&&R4(r)}function C4(r,o,l){return l(function(){b4(o)&&R4(r)})}function b4(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!lu(r,l)}catch(f){return!0}}function R4(r){var o=Tl(r,1);o!==null&&su(o,r,1,-1)}function CP(r){var o=Nu();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gg,lastRenderedState:r},o.queue=r,r=r.dispatch=SH.bind(null,Ki,r),[o.memoizedState,r]}function qg(r,o,l,f){return r={tag:r,create:o,destroy:l,deps:f,next:null},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.lastEffect=r.next=r):(l=o.lastEffect,l===null?o.lastEffect=r.next=r:(f=l.next,l.next=r,r.next=f,o.lastEffect=r)),r}function x4(){return Ms().memoizedState}function u0(r,o,l,f){var p=Nu();Ki.flags|=r,p.memoizedState=qg(1|o,l,void 0,f===void 0?null:f)}function J0(r,o,l,f){var p=Ms();f=f===void 0?null:f;var S=void 0;if(So!==null){var C=So.memoizedState;if(S=C.destroy,f!==null&&tb(f,C.deps)){p.memoizedState=qg(o,l,S,f);return}}Ki.flags|=r,p.memoizedState=qg(1|o,l,S,f)}function bP(r,o){return u0(8390656,8,r,o)}function ib(r,o){return J0(2048,8,r,o)}function N4(r,o){return J0(4,2,r,o)}function M4(r,o){return J0(4,4,r,o)}function D4(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function P4(r,o,l){return l=l!=null?l.concat([r]):null,J0(4,4,D4.bind(null,o,r),l)}function ob(){}function O4(r,o){var l=Ms();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&tb(o,f[1])?f[0]:(l.memoizedState=[r,o],r)}function L4(r,o){var l=Ms();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&tb(o,f[1])?f[0]:(r=r(),l.memoizedState=[r,o],r)}function k4(r,o,l){return vf&21?(lu(l,o)||(l=ZF(),Ki.lanes|=l,yf|=l,r.baseState=!0),o):(r.baseState&&(r.baseState=!1,Ba=!0),r.memoizedState=l)}function _H(r,o){var l=di;di=l!==0&&4>l?l:4,r(!0);var f=xT.transition;xT.transition={};try{r(!1),o()}finally{di=l,xT.transition=f}}function F4(){return Ms().memoizedState}function TH(r,o,l){var f=cc(r);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},U4(r))B4(o,l);else if(l=E4(r,o,l,f),l!==null){var p=Ta();su(l,r,f,p),j4(l,o,f)}}function SH(r,o,l){var f=cc(r),p={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(U4(r))B4(o,p);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var C=o.lastRenderedState,g=S(C,l);if(p.hasEagerState=!0,p.eagerState=g,lu(g,C)){var w=o.interleaved;w===null?(p.next=p,$C(o)):(p.next=w.next,w.next=p),o.interleaved=p;return}}catch(F){}finally{}l=E4(r,o,p,f),l!==null&&(p=Ta(),su(l,r,f,p),j4(l,o,f))}}function U4(r){var o=r.alternate;return r===Ki||o!==null&&o===Ki}function B4(r,o){wg=P0=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function j4(r,o,l){if(l&4194240){var f=o.lanes;f&=r.pendingLanes,l|=f,o.lanes=l,kC(r,l)}}var O0={readContext:Ns,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},wH={readContext:Ns,useCallback:function(r,o){return Nu().memoizedState=[r,o===void 0?null:o],r},useContext:Ns,useEffect:bP,useImperativeHandle:function(r,o,l){return l=l!=null?l.concat([r]):null,u0(4194308,4,D4.bind(null,o,r),l)},useLayoutEffect:function(r,o){return u0(4194308,4,r,o)},useInsertionEffect:function(r,o){return u0(4,2,r,o)},useMemo:function(r,o){var l=Nu();return o=o===void 0?null:o,r=r(),l.memoizedState=[r,o],r},useReducer:function(r,o,l){var f=Nu();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},f.queue=r,r=r.dispatch=TH.bind(null,Ki,r),[f.memoizedState,r]},useRef:function(r){var o=Nu();return r={current:r},o.memoizedState=r},useState:CP,useDebugValue:ob,useDeferredValue:function(r){return Nu().memoizedState=r},useTransition:function(){var r=CP(!1),o=r[0];return r=_H.bind(null,r[1]),Nu().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,l){var f=Ki,p=Nu();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=o(),Do===null)throw Error(jn(349));vf&30||A4(f,o,l)}p.memoizedState=l;var S={value:l,getSnapshot:o};return p.queue=S,bP(C4.bind(null,f,S,r),[r]),f.flags|=2048,qg(9,I4.bind(null,f,S,l,o),void 0,null),l},useId:function(){var r=Nu(),o=Do.identifierPrefix;if(Ui){var l=vl,f=ml;l=(f&~(1<<32-au(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=Zg++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=EH++,o=":"+o+"r"+l.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},AH={readContext:Ns,useCallback:O4,useContext:Ns,useEffect:ib,useImperativeHandle:P4,useInsertionEffect:N4,useLayoutEffect:M4,useMemo:L4,useReducer:NT,useRef:x4,useState:function(){return NT(Gg)},useDebugValue:ob,useDeferredValue:function(r){var o=Ms();return k4(o,So.memoizedState,r)},useTransition:function(){var r=NT(Gg)[0],o=Ms().memoizedState;return[r,o]},useMutableSource:S4,useSyncExternalStore:w4,useId:F4,unstable_isNewReconciler:!1},IH={readContext:Ns,useCallback:O4,useContext:Ns,useEffect:ib,useImperativeHandle:P4,useInsertionEffect:N4,useLayoutEffect:M4,useMemo:L4,useReducer:MT,useRef:x4,useState:function(){return MT(Gg)},useDebugValue:ob,useDeferredValue:function(r){var o=Ms();return So===null?o.memoizedState=r:k4(o,So.memoizedState,r)},useTransition:function(){var r=MT(Gg)[0],o=Ms().memoizedState;return[r,o]},useMutableSource:S4,useSyncExternalStore:w4,useId:F4,unstable_isNewReconciler:!1};function eu(r,o){if(r&&r.defaultProps){o=Vi({},o),r=r.defaultProps;for(var l in r)o[l]===void 0&&(o[l]=r[l]);return o}return o}function qI(r,o,l,f){o=r.memoizedState,l=l(f,o),l=l==null?o:Vi({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var eE={isMounted:function(r){return(r=r._reactInternals)?wf(r)===r:!1},enqueueSetState:function(r,o,l){r=r._reactInternals;var f=Ta(),p=cc(r),S=yl(f,p);S.payload=o,l!=null&&(S.callback=l),o=uc(r,S,p),o!==null&&(su(o,r,p,f),a0(o,r,p))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var f=Ta(),p=cc(r),S=yl(f,p);S.tag=1,S.payload=o,l!=null&&(S.callback=l),o=uc(r,S,p),o!==null&&(su(o,r,p,f),a0(o,r,p))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Ta(),f=cc(r),p=yl(l,f);p.tag=2,o!=null&&(p.callback=o),o=uc(r,p,f),o!==null&&(su(o,r,f,l),a0(o,r,f))}};function RP(r,o,l,f,p,S,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,S,C):o.prototype&&o.prototype.isPureReactComponent?!Lg(l,f)||!Lg(p,S):!0}function Z4(r,o,l){var f=!1,p=pc,S=o.contextType;return typeof S=="object"&&S!==null?S=Ns(S):(p=Za(o)?gf:ea.current,f=o.contextTypes,S=(f=f!=null)?ph(r,p):pc),o=new o(l,S),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=eE,r.stateNode=o,o._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=S),o}function xP(r,o,l,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==r&&eE.enqueueReplaceState(o,o.state,null)}function HI(r,o,l,f){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},XC(r);var S=o.contextType;typeof S=="object"&&S!==null?p.context=Ns(S):(S=Za(o)?gf:ea.current,p.context=ph(r,S)),p.state=r.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(qI(r,o,S,l),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&eE.enqueueReplaceState(p,p.state,null),M0(r,l,p,f),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function yh(r,o){try{var l="",f=o;do l+=J9(f),f=f.return;while(f);var p=l}catch(S){p="\nError generating stack: "+S.message+"\n"+S.stack}return{value:r,source:o,stack:p,digest:null}}function DT(r,o,l){return{value:r,source:null,stack:l!=null?l:null,digest:o!=null?o:null}}function KI(r,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var CH=typeof WeakMap=="function"?WeakMap:Map;function G4(r,o,l){l=yl(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){k0||(k0=!0,tC=f),KI(r,o)},l}function q4(r,o,l){l=yl(-1,l),l.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=o.value;l.payload=function(){return f(p)},l.callback=function(){KI(r,o)}}var S=r.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){KI(r,o),typeof f!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})}),l}function NP(r,o,l){var f=r.pingCache;if(f===null){f=r.pingCache=new CH;var p=new Set;f.set(o,p)}else p=f.get(o),p===void 0&&(p=new Set,f.set(o,p));p.has(l)||(p.add(l),r=jH.bind(null,r,o,l),o.then(r,r))}function MP(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function DP(r,o,l,f,p){return r.mode&1?(r.flags|=65536,r.lanes=p,r):(r===o?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=yl(-1,1),o.tag=2,uc(l,o,1))),l.lanes|=1),r)}var bH=wl.ReactCurrentOwner,Ba=!1;function Ea(r,o,l,f){o.child=r===null?y4(o,null,l,f):mh(o,r.child,l,f)}function PP(r,o,l,f,p){l=l.render;var S=o.ref;return fh(o,p),f=nb(r,o,l,f,S,p),l=rb(),r!==null&&!Ba?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~p,Sl(r,o,p)):(Ui&&l&&HC(o),o.flags|=1,Ea(r,o,f,p),o.child)}function OP(r,o,l,f,p){if(r===null){var S=l.type;return typeof S=="function"&&!hb(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=S,H4(r,o,S,f,p)):(r=d0(l.type,null,f,o,o.mode,p),r.ref=o.ref,r.return=o,o.child=r)}if(S=r.child,!(r.lanes&p)){var C=S.memoizedProps;if(l=l.compare,l=l!==null?l:Lg,l(C,f)&&r.ref===o.ref)return Sl(r,o,p)}return o.flags|=1,r=fc(S,f),r.ref=o.ref,r.return=o,o.child=r}function H4(r,o,l,f,p){if(r!==null){var S=r.memoizedProps;if(Lg(S,f)&&r.ref===o.ref)if(Ba=!1,o.pendingProps=f=S,(r.lanes&p)!==0)r.flags&131072&&(Ba=!0);else return o.lanes=r.lanes,Sl(r,o,p)}return VI(r,o,l,f,p)}function K4(r,o,l){var f=o.pendingProps,p=f.children,S=r!==null?r.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(rh,ls),ls|=l;else{if(!(l&1073741824))return r=S!==null?S.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,Ci(rh,ls),ls|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=S!==null?S.baseLanes:l,Ci(rh,ls),ls|=f}else S!==null?(f=S.baseLanes|l,o.memoizedState=null):f=l,Ci(rh,ls),ls|=f;return Ea(r,o,p,l),o.child}function V4(r,o){var l=o.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function VI(r,o,l,f,p){var S=Za(l)?gf:ea.current;return S=ph(o,S),fh(o,p),l=nb(r,o,l,f,S,p),f=rb(),r!==null&&!Ba?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~p,Sl(r,o,p)):(Ui&&f&&HC(o),o.flags|=1,Ea(r,o,l,p),o.child)}function LP(r,o,l,f,p){if(Za(l)){var S=!0;C0(o)}else S=!1;if(fh(o,p),o.stateNode===null)l0(r,o),Z4(o,l,f),HI(o,l,f,p),f=!0;else if(r===null){var C=o.stateNode,g=o.memoizedProps;C.props=g;var w=C.context,F=l.contextType;typeof F=="object"&&F!==null?F=Ns(F):(F=Za(l)?gf:ea.current,F=ph(o,F));var b=l.getDerivedStateFromProps,y=typeof b=="function"||typeof C.getSnapshotBeforeUpdate=="function";y||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(g!==f||w!==F)&&xP(o,C,f,F),Jl=!1;var v=o.memoizedState;C.state=v,M0(o,f,C,p),w=o.memoizedState,g!==f||v!==w||ja.current||Jl?(typeof b=="function"&&(qI(o,l,b,f),w=o.memoizedState),(g=Jl||RP(o,l,g,f,v,w,F))?(y||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=w),C.props=f,C.state=w,C.context=F,f=g):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{C=o.stateNode,_4(r,o),g=o.memoizedProps,F=o.type===o.elementType?g:eu(o.type,g),C.props=F,y=o.pendingProps,v=C.context,w=l.contextType,typeof w=="object"&&w!==null?w=Ns(w):(w=Za(l)?gf:ea.current,w=ph(o,w));var D=l.getDerivedStateFromProps;(b=typeof D=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(g!==y||v!==w)&&xP(o,C,f,w),Jl=!1,v=o.memoizedState,C.state=v,M0(o,f,C,p);var m=o.memoizedState;g!==y||v!==m||ja.current||Jl?(typeof D=="function"&&(qI(o,l,D,f),m=o.memoizedState),(F=Jl||RP(o,l,F,f,v,m,w)||!1)?(b||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,m,w),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,m,w)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=m),C.props=f,C.state=m,C.context=w,f=F):(typeof C.componentDidUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&v===r.memoizedState||(o.flags|=1024),f=!1)}return zI(r,o,l,f,S,p)}function zI(r,o,l,f,p,S){V4(r,o);var C=(o.flags&128)!==0;if(!f&&!C)return p&&_P(o,l,!1),Sl(r,o,S);f=o.stateNode,bH.current=o;var g=C&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,r!==null&&C?(o.child=mh(o,r.child,null,S),o.child=mh(o,null,g,S)):Ea(r,o,g,S),o.memoizedState=f.state,p&&_P(o,l,!0),o.child}function z4(r){var o=r.stateNode;o.pendingContext?EP(r,o.pendingContext,o.pendingContext!==o.context):o.context&&EP(r,o.context,!1),QC(r,o.containerInfo)}function kP(r,o,l,f,p){return gh(),VC(p),o.flags|=256,Ea(r,o,l,f),o.child}var YI={dehydrated:null,treeContext:null,retryLane:0};function WI(r){return{baseLanes:r,cachePool:null,transitions:null}}function Y4(r,o,l){var f=o.pendingProps,p=qi.current,S=!1,C=(o.flags&128)!==0,g;if((g=C)||(g=r!==null&&r.memoizedState===null?!1:(p&2)!==0),g?(S=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),Ci(qi,p&1),r===null)return ZI(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(o.mode&1?r.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(C=f.children,r=f.fallback,S?(f=o.mode,S=o.child,C={mode:"hidden",children:C},!(f&1)&&S!==null?(S.childLanes=0,S.pendingProps=C):S=rE(C,f,0,null),r=df(r,f,l,null),S.return=o,r.return=o,S.sibling=r,o.child=S,o.child.memoizedState=WI(l),o.memoizedState=YI,r):ab(o,C));if(p=r.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return RH(r,o,C,f,g,p,l);if(S){S=f.fallback,C=o.mode,p=r.child,g=p.sibling;var w={mode:"hidden",children:f.children};return!(C&1)&&o.child!==p?(f=o.child,f.childLanes=0,f.pendingProps=w,o.deletions=null):(f=fc(p,w),f.subtreeFlags=p.subtreeFlags&14680064),g!==null?S=fc(g,S):(S=df(S,C,l,null),S.flags|=2),S.return=o,f.return=o,f.sibling=S,o.child=f,f=S,S=o.child,C=r.child.memoizedState,C=C===null?WI(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},S.memoizedState=C,S.childLanes=r.childLanes&~l,o.memoizedState=YI,f}return S=r.child,r=S.sibling,f=fc(S,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,r!==null&&(l=o.deletions,l===null?(o.deletions=[r],o.flags|=16):l.push(r)),o.child=f,o.memoizedState=null,f}function ab(r,o){return o=rE({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function qy(r,o,l,f){return f!==null&&VC(f),mh(o,r.child,null,l),r=ab(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function RH(r,o,l,f,p,S,C){if(l)return o.flags&256?(o.flags&=-257,f=DT(Error(jn(422))),qy(r,o,C,f)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(S=f.fallback,p=o.mode,f=rE({mode:"visible",children:f.children},p,0,null),S=df(S,p,C,null),S.flags|=2,f.return=o,S.return=o,f.sibling=S,o.child=f,o.mode&1&&mh(o,r.child,null,C),o.child.memoizedState=WI(C),o.memoizedState=YI,S);if(!(o.mode&1))return qy(r,o,C,null);if(p.data==="$!"){if(f=p.nextSibling&&p.nextSibling.dataset,f)var g=f.dgst;return f=g,S=Error(jn(419)),f=DT(S,f,void 0),qy(r,o,C,f)}if(g=(C&r.childLanes)!==0,Ba||g){if(f=Do,f!==null){switch(C&-C){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(f.suspendedLanes|C)?0:p,p!==0&&p!==S.retryLane&&(S.retryLane=p,Tl(r,p),su(f,r,p,-1))}return db(),f=DT(Error(jn(421))),qy(r,o,C,f)}return p.data==="$?"?(o.flags|=128,o.child=r.child,o=ZH.bind(null,r),p._reactRetry=o,null):(r=S.treeContext,cs=sc(p.nextSibling),ds=o,Ui=!0,nu=null,r!==null&&(Is[Cs++]=ml,Is[Cs++]=vl,Is[Cs++]=mf,ml=r.id,vl=r.overflow,mf=o),o=ab(o,f.children),o.flags|=4096,o)}function FP(r,o,l){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),GI(r.return,o,l)}function PT(r,o,l,f,p){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:p}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=l,S.tailMode=p)}function W4(r,o,l){var f=o.pendingProps,p=f.revealOrder,S=f.tail;if(Ea(r,o,f.children,l),f=qi.current,f&2)f=f&1|2,o.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&FP(r,l,o);else if(r.tag===19)FP(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Ci(qi,f),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)r=l.alternate,r!==null&&D0(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),PT(o,!1,p,l,S);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(r=p.alternate,r!==null&&D0(r)===null){o.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}PT(o,!0,l,null,S);break;case"together":PT(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function l0(r,o){!(o.mode&1)&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function Sl(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),yf|=o.lanes,!(l&o.childLanes))return null;if(r!==null&&o.child!==r.child)throw Error(jn(153));if(o.child!==null){for(r=o.child,l=fc(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=fc(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function xH(r,o,l){switch(o.tag){case 3:z4(o),gh();break;case 5:T4(o);break;case 1:Za(o.type)&&C0(o);break;case 4:QC(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,p=o.memoizedProps.value;Ci(x0,f._currentValue),f._currentValue=p;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ci(qi,qi.current&1),o.flags|=128,null):l&o.child.childLanes?Y4(r,o,l):(Ci(qi,qi.current&1),r=Sl(r,o,l),r!==null?r.sibling:null);Ci(qi,qi.current&1);break;case 19:if(f=(l&o.childLanes)!==0,r.flags&128){if(f)return W4(r,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ci(qi,qi.current),f)break;return null;case 22:case 23:return o.lanes=0,K4(r,o,l)}return Sl(r,o,l)}var $4,$I,X4,Q4;$4=function(r,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};$I=function(){};X4=function(r,o,l,f){var p=r.memoizedProps;if(p!==f){r=o.stateNode,lf(Pu.current);var S=null;switch(l){case"input":p=yI(r,p),f=yI(r,f),S=[];break;case"select":p=Vi({},p,{value:void 0}),f=Vi({},f,{value:void 0}),S=[];break;case"textarea":p=TI(r,p),f=TI(r,f),S=[];break;default:typeof p.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=A0)}wI(l,f);var C;l=null;for(F in p)if(!f.hasOwnProperty(F)&&p.hasOwnProperty(F)&&p[F]!=null)if(F==="style"){var g=p[F];for(C in g)g.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Rg.hasOwnProperty(F)?S||(S=[]):(S=S||[]).push(F,null));for(F in f){var w=f[F];if(g=p!=null?p[F]:void 0,f.hasOwnProperty(F)&&w!==g&&(w!=null||g!=null))if(F==="style")if(g){for(C in g)!g.hasOwnProperty(C)||w&&w.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in w)w.hasOwnProperty(C)&&g[C]!==w[C]&&(l||(l={}),l[C]=w[C])}else l||(S||(S=[]),S.push(F,l)),l=w;else F==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,g=g?g.__html:void 0,w!=null&&g!==w&&(S=S||[]).push(F,w)):F==="children"?typeof w!="string"&&typeof w!="number"||(S=S||[]).push(F,""+w):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Rg.hasOwnProperty(F)?(w!=null&&F==="onScroll"&&Ni("scroll",r),S||g===w||(S=[])):(S=S||[]).push(F,w))}l&&(S=S||[]).push("style",l);var F=S;(o.updateQueue=F)&&(o.flags|=4)}};Q4=function(r,o,l,f){l!==f&&(o.flags|=4)};function ig(r,o){if(!Ui)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function $o(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,f=0;if(o)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags&14680064,f|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=f,r.childLanes=l,o}function NH(r,o,l){var f=o.pendingProps;switch(KC(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(o),null;case 1:return Za(o.type)&&I0(),$o(o),null;case 3:return f=o.stateNode,vh(),Mi(ja),Mi(ea),eb(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Zy(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,nu!==null&&(iC(nu),nu=null))),$I(r,o),$o(o),null;case 5:JC(o);var p=lf(jg.current);if(l=o.type,r!==null&&o.stateNode!=null)X4(r,o,l,f,p),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(jn(166));return $o(o),null}if(r=lf(Pu.current),Zy(o)){f=o.stateNode,l=o.type;var S=o.memoizedProps;switch(f[Mu]=o,f[Ug]=S,r=(o.mode&1)!==0,l){case"dialog":Ni("cancel",f),Ni("close",f);break;case"iframe":case"object":case"embed":Ni("load",f);break;case"video":case"audio":for(p=0;p<pg.length;p++)Ni(pg[p],f);break;case"source":Ni("error",f);break;case"img":case"image":case"link":Ni("error",f),Ni("load",f);break;case"details":Ni("toggle",f);break;case"input":VD(f,S),Ni("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!S.multiple},Ni("invalid",f);break;case"textarea":YD(f,S),Ni("invalid",f)}wI(l,S),p=null;for(var C in S)if(S.hasOwnProperty(C)){var g=S[C];C==="children"?typeof g=="string"?f.textContent!==g&&(S.suppressHydrationWarning!==!0&&jy(f.textContent,g,r),p=["children",g]):typeof g=="number"&&f.textContent!==""+g&&(S.suppressHydrationWarning!==!0&&jy(f.textContent,g,r),p=["children",""+g]):Rg.hasOwnProperty(C)&&g!=null&&C==="onScroll"&&Ni("scroll",f)}switch(l){case"input":Dy(f),zD(f,S,!0);break;case"textarea":Dy(f),WD(f);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(f.onclick=A0)}f=p,o.updateQueue=f,f!==null&&(o.flags|=4)}else{C=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=CF(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=C.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=C.createElement(l,{is:f.is}):(r=C.createElement(l),l==="select"&&(C=r,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):r=C.createElementNS(r,l),r[Mu]=o,r[Ug]=f,$4(r,o,!1,!1),o.stateNode=r;e:{switch(C=AI(l,f),l){case"dialog":Ni("cancel",r),Ni("close",r),p=f;break;case"iframe":case"object":case"embed":Ni("load",r),p=f;break;case"video":case"audio":for(p=0;p<pg.length;p++)Ni(pg[p],r);p=f;break;case"source":Ni("error",r),p=f;break;case"img":case"image":case"link":Ni("error",r),Ni("load",r),p=f;break;case"details":Ni("toggle",r),p=f;break;case"input":VD(r,f),p=yI(r,f),Ni("invalid",r);break;case"option":p=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},p=Vi({},f,{value:void 0}),Ni("invalid",r);break;case"textarea":YD(r,f),p=TI(r,f),Ni("invalid",r);break;default:p=f}wI(l,p),g=p;for(S in g)if(g.hasOwnProperty(S)){var w=g[S];S==="style"?xF(r,w):S==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&bF(r,w)):S==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&xg(r,w):typeof w=="number"&&xg(r,""+w):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Rg.hasOwnProperty(S)?w!=null&&S==="onScroll"&&Ni("scroll",r):w!=null&&NC(r,S,w,C))}switch(l){case"input":Dy(r),zD(r,f,!1);break;case"textarea":Dy(r),WD(r);break;case"option":f.value!=null&&r.setAttribute("value",""+hc(f.value));break;case"select":r.multiple=!!f.multiple,S=f.value,S!=null?sh(r,!!f.multiple,S,!1):f.defaultValue!=null&&sh(r,!!f.multiple,f.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=A0)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return $o(o),null;case 6:if(r&&o.stateNode!=null)Q4(r,o,r.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(jn(166));if(l=lf(jg.current),lf(Pu.current),Zy(o)){if(f=o.stateNode,l=o.memoizedProps,f[Mu]=o,(S=f.nodeValue!==l)&&(r=ds,r!==null))switch(r.tag){case 3:jy(f.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&jy(f.nodeValue,l,(r.mode&1)!==0)}S&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Mu]=o,o.stateNode=f}return $o(o),null;case 13:if(Mi(qi),f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ui&&cs!==null&&o.mode&1&&!(o.flags&128))m4(),gh(),o.flags|=98560,S=!1;else if(S=Zy(o),f!==null&&f.dehydrated!==null){if(r===null){if(!S)throw Error(jn(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(jn(317));S[Mu]=o}else gh(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;$o(o),S=!1}else nu!==null&&(iC(nu),nu=null),S=!0;if(!S)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(r===null||qi.current&1?wo===0&&(wo=3):db())),o.updateQueue!==null&&(o.flags|=4),$o(o),null);case 4:return vh(),$I(r,o),r===null&&kg(o.stateNode.containerInfo),$o(o),null;case 10:return WC(o.type._context),$o(o),null;case 17:return Za(o.type)&&I0(),$o(o),null;case 19:if(Mi(qi),S=o.memoizedState,S===null)return $o(o),null;if(f=(o.flags&128)!==0,C=S.rendering,C===null)if(f)ig(S,!1);else{if(wo!==0||r!==null&&r.flags&128)for(r=o.child;r!==null;){if(C=D0(r),C!==null){for(o.flags|=128,ig(S,!1),f=C.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)S=l,r=f,S.flags&=14680066,C=S.alternate,C===null?(S.childLanes=0,S.lanes=r,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=C.childLanes,S.lanes=C.lanes,S.child=C.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=C.memoizedProps,S.memoizedState=C.memoizedState,S.updateQueue=C.updateQueue,S.type=C.type,r=C.dependencies,S.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ci(qi,qi.current&1|2),o.child}r=r.sibling}S.tail!==null&&fo()>Eh&&(o.flags|=128,f=!0,ig(S,!1),o.lanes=4194304)}else{if(!f)if(r=D0(C),r!==null){if(o.flags|=128,f=!0,l=r.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),ig(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!Ui)return $o(o),null}else 2*fo()-S.renderingStartTime>Eh&&l!==1073741824&&(o.flags|=128,f=!0,ig(S,!1),o.lanes=4194304);S.isBackwards?(C.sibling=o.child,o.child=C):(l=S.last,l!==null?l.sibling=C:o.child=C,S.last=C)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=fo(),o.sibling=null,l=qi.current,Ci(qi,f?l&1|2:l&1),o):($o(o),null);case 22:case 23:return fb(),f=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?ls&1073741824&&($o(o),o.subtreeFlags&6&&(o.flags|=8192)):$o(o),null;case 24:return null;case 25:return null}throw Error(jn(156,o.tag))}function MH(r,o){switch(KC(o),o.tag){case 1:return Za(o.type)&&I0(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return vh(),Mi(ja),Mi(ea),eb(),r=o.flags,r&65536&&!(r&128)?(o.flags=r&-65537|128,o):null;case 5:return JC(o),null;case 13:if(Mi(qi),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(jn(340));gh()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Mi(qi),null;case 4:return vh(),null;case 10:return WC(o.type._context),null;case 22:case 23:return fb(),null;case 24:return null;default:return null}}var Hy=!1,Qo=!1,DH=typeof WeakSet=="function"?WeakSet:Set,nr=null;function nh(r,o){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){Ji(r,o,f)}else l.current=null}function XI(r,o,l){try{l()}catch(f){Ji(r,o,f)}}var UP=!1;function PH(r,o){if(OI=T0,r=r4(),qC(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var p=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{l.nodeType,S.nodeType}catch(R){l=null;break e}var C=0,g=-1,w=-1,F=0,b=0,y=r,v=null;t:for(;;){for(var D;y!==l||p!==0&&y.nodeType!==3||(g=C+p),y!==S||f!==0&&y.nodeType!==3||(w=C+f),y.nodeType===3&&(C+=y.nodeValue.length),(D=y.firstChild)!==null;)v=y,y=D;for(;;){if(y===r)break t;if(v===l&&++F===p&&(g=C),v===S&&++b===f&&(w=C),(D=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=D}l=g===-1||w===-1?null:{start:g,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(LI={focusedElem:r,selectionRange:l},T0=!1,nr=o;nr!==null;)if(o=nr,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,nr=r;else for(;nr!==null;){o=nr;try{var m=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,N=o.stateNode,_=N.getSnapshotBeforeUpdate(o.elementType===o.type?T:eu(o.type,T),U);N.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=o.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(R){Ji(o,o.return,R)}if(r=o.sibling,r!==null){r.return=o.return,nr=r;break}nr=o.return}return m=UP,UP=!1,m}function Ag(r,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var p=f=f.next;do{if((p.tag&r)===r){var S=p.destroy;p.destroy=void 0,S!==void 0&&XI(o,l,S)}p=p.next}while(p!==f)}}function tE(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&r)===r){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function QI(r){var o=r.ref;if(o!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof o=="function"?o(r):o.current=r}}function J4(r){var o=r.alternate;o!==null&&(r.alternate=null,J4(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Mu],delete o[Ug],delete o[UI],delete o[gH],delete o[mH])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function eU(r){return r.tag===5||r.tag===3||r.tag===4}function BP(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||eU(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function JI(r,o,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(r,o):l.insertBefore(r,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(r,l)):(o=l,o.appendChild(r)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=A0));else if(f!==4&&(r=r.child,r!==null))for(JI(r,o,l),r=r.sibling;r!==null;)JI(r,o,l),r=r.sibling}function eC(r,o,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(eC(r,o,l),r=r.sibling;r!==null;)eC(r,o,l),r=r.sibling}var jo=null,tu=!1;function $l(r,o,l){for(l=l.child;l!==null;)tU(r,o,l),l=l.sibling}function tU(r,o,l){if(Du&&typeof Du.onCommitFiberUnmount=="function")try{Du.onCommitFiberUnmount(z0,l)}catch(g){}switch(l.tag){case 5:Qo||nh(l,o);case 6:var f=jo,p=tu;jo=null,$l(r,o,l),jo=f,tu=p,jo!==null&&(tu?(r=jo,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):jo.removeChild(l.stateNode));break;case 18:jo!==null&&(tu?(r=jo,l=l.stateNode,r.nodeType===8?CT(r.parentNode,l):r.nodeType===1&&CT(r,l),Pg(r)):CT(jo,l.stateNode));break;case 4:f=jo,p=tu,jo=l.stateNode.containerInfo,tu=!0,$l(r,o,l),jo=f,tu=p;break;case 0:case 11:case 14:case 15:if(!Qo&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){p=f=f.next;do{var S=p,C=S.destroy;S=S.tag,C!==void 0&&(S&2||S&4)&&XI(l,o,C),p=p.next}while(p!==f)}$l(r,o,l);break;case 1:if(!Qo&&(nh(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(g){Ji(l,o,g)}$l(r,o,l);break;case 21:$l(r,o,l);break;case 22:l.mode&1?(Qo=(f=Qo)||l.memoizedState!==null,$l(r,o,l),Qo=f):$l(r,o,l);break;default:$l(r,o,l)}}function jP(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new DH),o.forEach(function(f){var p=GH.bind(null,r,f);l.has(f)||(l.add(f),f.then(p,p))})}}function Qs(r,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];try{var S=r,C=o,g=C;e:for(;g!==null;){switch(g.tag){case 5:jo=g.stateNode,tu=!1;break e;case 3:jo=g.stateNode.containerInfo,tu=!0;break e;case 4:jo=g.stateNode.containerInfo,tu=!0;break e}g=g.return}if(jo===null)throw Error(jn(160));tU(S,C,p),jo=null,tu=!1;var w=p.alternate;w!==null&&(w.return=null),p.return=null}catch(F){Ji(p,o,F)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)nU(o,r),o=o.sibling}function nU(r,o){var l=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Qs(o,r),Cu(r),f&4){try{Ag(3,r,r.return),tE(3,r)}catch(T){Ji(r,r.return,T)}try{Ag(5,r,r.return)}catch(T){Ji(r,r.return,T)}}break;case 1:Qs(o,r),Cu(r),f&512&&l!==null&&nh(l,l.return);break;case 5:if(Qs(o,r),Cu(r),f&512&&l!==null&&nh(l,l.return),r.flags&32){var p=r.stateNode;try{xg(p,"")}catch(T){Ji(r,r.return,T)}}if(f&4&&(p=r.stateNode,p!=null)){var S=r.memoizedProps,C=l!==null?l.memoizedProps:S,g=r.type,w=r.updateQueue;if(r.updateQueue=null,w!==null)try{g==="input"&&S.type==="radio"&&S.name!=null&&AF(p,S),AI(g,C);var F=AI(g,S);for(C=0;C<w.length;C+=2){var b=w[C],y=w[C+1];b==="style"?xF(p,y):b==="dangerouslySetInnerHTML"?bF(p,y):b==="children"?xg(p,y):NC(p,b,y,F)}switch(g){case"input":EI(p,S);break;case"textarea":IF(p,S);break;case"select":var v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!S.multiple;var D=S.value;D!=null?sh(p,!!S.multiple,D,!1):v!==!!S.multiple&&(S.defaultValue!=null?sh(p,!!S.multiple,S.defaultValue,!0):sh(p,!!S.multiple,S.multiple?[]:"",!1))}p[Ug]=S}catch(T){Ji(r,r.return,T)}}break;case 6:if(Qs(o,r),Cu(r),f&4){if(r.stateNode===null)throw Error(jn(162));p=r.stateNode,S=r.memoizedProps;try{p.nodeValue=S}catch(T){Ji(r,r.return,T)}}break;case 3:if(Qs(o,r),Cu(r),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Pg(o.containerInfo)}catch(T){Ji(r,r.return,T)}break;case 4:Qs(o,r),Cu(r);break;case 13:Qs(o,r),Cu(r),p=r.child,p.flags&8192&&(S=p.memoizedState!==null,p.stateNode.isHidden=S,!S||p.alternate!==null&&p.alternate.memoizedState!==null||(lb=fo())),f&4&&jP(r);break;case 22:if(b=l!==null&&l.memoizedState!==null,r.mode&1?(Qo=(F=Qo)||b,Qs(o,r),Qo=F):Qs(o,r),Cu(r),f&8192){if(F=r.memoizedState!==null,(r.stateNode.isHidden=F)&&!b&&r.mode&1)for(nr=r,b=r.child;b!==null;){for(y=nr=b;nr!==null;){switch(v=nr,D=v.child,v.tag){case 0:case 11:case 14:case 15:Ag(4,v,v.return);break;case 1:nh(v,v.return);var m=v.stateNode;if(typeof m.componentWillUnmount=="function"){f=v,l=v.return;try{o=f,m.props=o.memoizedProps,m.state=o.memoizedState,m.componentWillUnmount()}catch(T){Ji(f,l,T)}}break;case 5:nh(v,v.return);break;case 22:if(v.memoizedState!==null){GP(y);continue}}D!==null?(D.return=v,nr=D):GP(y)}b=b.sibling}e:for(b=null,y=r;;){if(y.tag===5){if(b===null){b=y;try{p=y.stateNode,F?(S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(g=y.stateNode,w=y.memoizedProps.style,C=w!=null&&w.hasOwnProperty("display")?w.display:null,g.style.display=RF("display",C))}catch(T){Ji(r,r.return,T)}}}else if(y.tag===6){if(b===null)try{y.stateNode.nodeValue=F?"":y.memoizedProps}catch(T){Ji(r,r.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===r)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;b===y&&(b=null),y=y.return}b===y&&(b=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Qs(o,r),Cu(r),f&4&&jP(r);break;case 21:break;default:Qs(o,r),Cu(r)}}function Cu(r){var o=r.flags;if(o&2){try{e:{for(var l=r.return;l!==null;){if(eU(l)){var f=l;break e}l=l.return}throw Error(jn(160))}switch(f.tag){case 5:var p=f.stateNode;f.flags&32&&(xg(p,""),f.flags&=-33);var S=BP(r);eC(r,S,p);break;case 3:case 4:var C=f.stateNode.containerInfo,g=BP(r);JI(r,g,C);break;default:throw Error(jn(161))}}catch(w){Ji(r,r.return,w)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function OH(r,o,l){nr=r,rU(r)}function rU(r,o,l){for(var f=(r.mode&1)!==0;nr!==null;){var p=nr,S=p.child;if(p.tag===22&&f){var C=p.memoizedState!==null||Hy;if(!C){var g=p.alternate,w=g!==null&&g.memoizedState!==null||Qo;g=Hy;var F=Qo;if(Hy=C,(Qo=w)&&!F)for(nr=p;nr!==null;)C=nr,w=C.child,C.tag===22&&C.memoizedState!==null?qP(p):w!==null?(w.return=C,nr=w):qP(p);for(;S!==null;)nr=S,rU(S),S=S.sibling;nr=p,Hy=g,Qo=F}ZP(r)}else p.subtreeFlags&8772&&S!==null?(S.return=p,nr=S):ZP(r)}}function ZP(r){for(;nr!==null;){var o=nr;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Qo||tE(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Qo)if(l===null)f.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:eu(o.type,l.memoizedProps);f.componentDidUpdate(p,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var S=o.updateQueue;S!==null&&IP(o,S,f);break;case 3:var C=o.updateQueue;if(C!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}IP(o,C,l)}break;case 5:var g=o.stateNode;if(l===null&&o.flags&4){l=g;var w=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var F=o.alternate;if(F!==null){var b=F.memoizedState;if(b!==null){var y=b.dehydrated;y!==null&&Pg(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Qo||o.flags&512&&QI(o)}catch(v){Ji(o,o.return,v)}}if(o===r){nr=null;break}if(l=o.sibling,l!==null){l.return=o.return,nr=l;break}nr=o.return}}function GP(r){for(;nr!==null;){var o=nr;if(o===r){nr=null;break}var l=o.sibling;if(l!==null){l.return=o.return,nr=l;break}nr=o.return}}function qP(r){for(;nr!==null;){var o=nr;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{tE(4,o)}catch(w){Ji(o,l,w)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var p=o.return;try{f.componentDidMount()}catch(w){Ji(o,p,w)}}var S=o.return;try{QI(o)}catch(w){Ji(o,S,w)}break;case 5:var C=o.return;try{QI(o)}catch(w){Ji(o,C,w)}}}catch(w){Ji(o,o.return,w)}if(o===r){nr=null;break}var g=o.sibling;if(g!==null){g.return=o.return,nr=g;break}nr=o.return}}var LH=Math.ceil,L0=wl.ReactCurrentDispatcher,sb=wl.ReactCurrentOwner,xs=wl.ReactCurrentBatchConfig,$r=0,Do=null,mo=null,Zo=0,ls=0,rh=mc(0),wo=0,Hg=null,yf=0,nE=0,ub=0,Ig=null,Ua=null,lb=0,Eh=1/0,pl=null,k0=!1,tC=null,lc=null,Ky=!1,rc=null,F0=0,Cg=0,nC=null,c0=-1,f0=0;function Ta(){return $r&6?fo():c0!==-1?c0:c0=fo()}function cc(r){return r.mode&1?$r&2&&Zo!==0?Zo&-Zo:yH.transition!==null?(f0===0&&(f0=ZF()),f0):(r=di,r!==0||(r=window.event,r=r===void 0?16:YF(r.type)),r):1}function su(r,o,l,f){if(50<Cg)throw Cg=0,nC=null,Error(jn(185));Xg(r,l,f),(!($r&2)||r!==Do)&&(r===Do&&(!($r&2)&&(nE|=l),wo===4&&tc(r,Zo)),Ga(r,f),l===1&&$r===0&&!(o.mode&1)&&(Eh=fo()+500,Q0&&vc()))}function Ga(r,o){var l=r.callbackNode;yq(r,o);var f=_0(r,r===Do?Zo:0);if(f===0)l!==null&&QD(l),r.callbackNode=null,r.callbackPriority=0;else if(o=f&-f,r.callbackPriority!==o){if(l!=null&&QD(l),o===1)r.tag===0?vH(HP.bind(null,r)):h4(HP.bind(null,r)),hH(function(){!($r&6)&&vc()}),l=null;else{switch(GF(f)){case 1:l=LC;break;case 4:l=BF;break;case 16:l=E0;break;case 536870912:l=jF;break;default:l=E0}l=fU(l,iU.bind(null,r))}r.callbackPriority=o,r.callbackNode=l}}function iU(r,o){if(c0=-1,f0=0,$r&6)throw Error(jn(327));var l=r.callbackNode;if(dh()&&r.callbackNode!==l)return null;var f=_0(r,r===Do?Zo:0);if(f===0)return null;if(f&30||f&r.expiredLanes||o)o=U0(r,f);else{o=f;var p=$r;$r|=2;var S=aU();(Do!==r||Zo!==o)&&(pl=null,Eh=fo()+500,ff(r,o));do try{UH();break}catch(g){oU(r,g)}while(!0);YC(),L0.current=S,$r=p,mo!==null?o=0:(Do=null,Zo=0,o=wo)}if(o!==0){if(o===2&&(p=xI(r),p!==0&&(f=p,o=rC(r,p))),o===1)throw l=Hg,ff(r,0),tc(r,f),Ga(r,fo()),l;if(o===6)tc(r,f);else{if(p=r.current.alternate,!(f&30)&&!kH(p)&&(o=U0(r,f),o===2&&(S=xI(r),S!==0&&(f=S,o=rC(r,S))),o===1))throw l=Hg,ff(r,0),tc(r,f),Ga(r,fo()),l;switch(r.finishedWork=p,r.finishedLanes=f,o){case 0:case 1:throw Error(jn(345));case 2:rf(r,Ua,pl);break;case 3:if(tc(r,f),(f&130023424)===f&&(o=lb+500-fo(),10<o)){if(_0(r,0)!==0)break;if(p=r.suspendedLanes,(p&f)!==f){Ta(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=FI(rf.bind(null,r,Ua,pl),o);break}rf(r,Ua,pl);break;case 4:if(tc(r,f),(f&4194240)===f)break;for(o=r.eventTimes,p=-1;0<f;){var C=31-au(f);S=1<<C,C=o[C],C>p&&(p=C),f&=~S}if(f=p,f=fo()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*LH(f/1960))-f,10<f){r.timeoutHandle=FI(rf.bind(null,r,Ua,pl),f);break}rf(r,Ua,pl);break;case 5:rf(r,Ua,pl);break;default:throw Error(jn(329))}}}return Ga(r,fo()),r.callbackNode===l?iU.bind(null,r):null}function rC(r,o){var l=Ig;return r.current.memoizedState.isDehydrated&&(ff(r,o).flags|=256),r=U0(r,o),r!==2&&(o=Ua,Ua=l,o!==null&&iC(o)),r}function iC(r){Ua===null?Ua=r:Ua.push.apply(Ua,r)}function kH(r){for(var o=r;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var p=l[f],S=p.getSnapshot;p=p.value;try{if(!lu(S(),p))return!1}catch(C){return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function tc(r,o){for(o&=~ub,o&=~nE,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var l=31-au(o),f=1<<l;r[l]=-1,o&=~f}}function HP(r){if($r&6)throw Error(jn(327));dh();var o=_0(r,0);if(!(o&1))return Ga(r,fo()),null;var l=U0(r,o);if(r.tag!==0&&l===2){var f=xI(r);f!==0&&(o=f,l=rC(r,f))}if(l===1)throw l=Hg,ff(r,0),tc(r,o),Ga(r,fo()),l;if(l===6)throw Error(jn(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,rf(r,Ua,pl),Ga(r,fo()),null}function cb(r,o){var l=$r;$r|=1;try{return r(o)}finally{$r=l,$r===0&&(Eh=fo()+500,Q0&&vc())}}function Ef(r){rc!==null&&rc.tag===0&&!($r&6)&&dh();var o=$r;$r|=1;var l=xs.transition,f=di;try{if(xs.transition=null,di=1,r)return r()}finally{di=f,xs.transition=l,$r=o,!($r&6)&&vc()}}function fb(){ls=rh.current,Mi(rh)}function ff(r,o){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,dH(l)),mo!==null)for(l=mo.return;l!==null;){var f=l;switch(KC(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&I0();break;case 3:vh(),Mi(ja),Mi(ea),eb();break;case 5:JC(f);break;case 4:vh();break;case 13:Mi(qi);break;case 19:Mi(qi);break;case 10:WC(f.type._context);break;case 22:case 23:fb()}l=l.return}if(Do=r,mo=r=fc(r.current,null),Zo=ls=o,wo=0,Hg=null,ub=nE=yf=0,Ua=Ig=null,uf!==null){for(o=0;o<uf.length;o++)if(l=uf[o],f=l.interleaved,f!==null){l.interleaved=null;var p=f.next,S=l.pending;if(S!==null){var C=S.next;S.next=p,f.next=C}l.pending=f}uf=null}return r}function oU(r,o){do{var l=mo;try{if(YC(),s0.current=O0,P0){for(var f=Ki.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}P0=!1}if(vf=0,Mo=So=Ki=null,wg=!1,Zg=0,sb.current=null,l===null||l.return===null){wo=1,Hg=o,mo=null;break}e:{var S=r,C=l.return,g=l,w=o;if(o=Zo,g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=w,b=g,y=b.tag;if(!(b.mode&1)&&(y===0||y===11||y===15)){var v=b.alternate;v?(b.updateQueue=v.updateQueue,b.memoizedState=v.memoizedState,b.lanes=v.lanes):(b.updateQueue=null,b.memoizedState=null)}var D=MP(C);if(D!==null){D.flags&=-257,DP(D,C,g,S,o),D.mode&1&&NP(S,F,o),o=D,w=F;var m=o.updateQueue;if(m===null){var T=new Set;T.add(w),o.updateQueue=T}else m.add(w);break e}else{if(!(o&1)){NP(S,F,o),db();break e}w=Error(jn(426))}}else if(Ui&&g.mode&1){var U=MP(C);if(U!==null){!(U.flags&65536)&&(U.flags|=256),DP(U,C,g,S,o),VC(yh(w,g));break e}}S=w=yh(w,g),wo!==4&&(wo=2),Ig===null?Ig=[S]:Ig.push(S),S=C;do{switch(S.tag){case 3:S.flags|=65536,o&=-o,S.lanes|=o;var N=G4(S,w,o);AP(S,N);break e;case 1:g=w;var _=S.type,I=S.stateNode;if(!(S.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(lc===null||!lc.has(I)))){S.flags|=65536,o&=-o,S.lanes|=o;var R=q4(S,g,o);AP(S,R);break e}}S=S.return}while(S!==null)}uU(l)}catch(Z){o=Z,mo===l&&l!==null&&(mo=l=l.return);continue}break}while(!0)}function aU(){var r=L0.current;return L0.current=O0,r===null?O0:r}function db(){(wo===0||wo===3||wo===2)&&(wo=4),Do===null||!(yf&268435455)&&!(nE&268435455)||tc(Do,Zo)}function U0(r,o){var l=$r;$r|=2;var f=aU();(Do!==r||Zo!==o)&&(pl=null,ff(r,o));do try{FH();break}catch(p){oU(r,p)}while(!0);if(YC(),$r=l,L0.current=f,mo!==null)throw Error(jn(261));return Do=null,Zo=0,wo}function FH(){for(;mo!==null;)sU(mo)}function UH(){for(;mo!==null&&!lq();)sU(mo)}function sU(r){var o=cU(r.alternate,r,ls);r.memoizedProps=r.pendingProps,o===null?uU(r):mo=o,sb.current=null}function uU(r){var o=r;do{var l=o.alternate;if(r=o.return,o.flags&32768){if(l=MH(l,o),l!==null){l.flags&=32767,mo=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wo=6,mo=null;return}}else if(l=NH(l,o,ls),l!==null){mo=l;return}if(o=o.sibling,o!==null){mo=o;return}mo=o=r}while(o!==null);wo===0&&(wo=5)}function rf(r,o,l){var f=di,p=xs.transition;try{xs.transition=null,di=1,BH(r,o,l,f)}finally{xs.transition=p,di=f}return null}function BH(r,o,l,f){do dh();while(rc!==null);if($r&6)throw Error(jn(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(jn(177));r.callbackNode=null,r.callbackPriority=0;var S=l.lanes|l.childLanes;if(Eq(r,S),r===Do&&(mo=Do=null,Zo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Ky||(Ky=!0,fU(E0,function(){return dh(),null})),S=(l.flags&15990)!==0,l.subtreeFlags&15990||S){S=xs.transition,xs.transition=null;var C=di;di=1;var g=$r;$r|=4,sb.current=null,PH(r,l),nU(l,r),oH(LI),T0=!!OI,LI=OI=null,r.current=l,OH(l),cq(),$r=g,di=C,xs.transition=S}else r.current=l;if(Ky&&(Ky=!1,rc=r,F0=p),S=r.pendingLanes,S===0&&(lc=null),hq(l.stateNode),Ga(r,fo()),o!==null)for(f=r.onRecoverableError,l=0;l<o.length;l++)p=o[l],f(p.value,{componentStack:p.stack,digest:p.digest});if(k0)throw k0=!1,r=tC,tC=null,r;return F0&1&&r.tag!==0&&dh(),S=r.pendingLanes,S&1?r===nC?Cg++:(Cg=0,nC=r):Cg=0,vc(),null}function dh(){if(rc!==null){var r=GF(F0),o=xs.transition,l=di;try{if(xs.transition=null,di=16>r?16:r,rc===null)var f=!1;else{if(r=rc,rc=null,F0=0,$r&6)throw Error(jn(331));var p=$r;for($r|=4,nr=r.current;nr!==null;){var S=nr,C=S.child;if(nr.flags&16){var g=S.deletions;if(g!==null){for(var w=0;w<g.length;w++){var F=g[w];for(nr=F;nr!==null;){var b=nr;switch(b.tag){case 0:case 11:case 15:Ag(8,b,S)}var y=b.child;if(y!==null)y.return=b,nr=y;else for(;nr!==null;){b=nr;var v=b.sibling,D=b.return;if(J4(b),b===F){nr=null;break}if(v!==null){v.return=D,nr=v;break}nr=D}}}var m=S.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}nr=S}}if(S.subtreeFlags&2064&&C!==null)C.return=S,nr=C;else e:for(;nr!==null;){if(S=nr,S.flags&2048)switch(S.tag){case 0:case 11:case 15:Ag(9,S,S.return)}var N=S.sibling;if(N!==null){N.return=S.return,nr=N;break e}nr=S.return}}var _=r.current;for(nr=_;nr!==null;){C=nr;var I=C.child;if(C.subtreeFlags&2064&&I!==null)I.return=C,nr=I;else e:for(C=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:tE(9,g)}}catch(Z){Ji(g,g.return,Z)}if(g===C){nr=null;break e}var R=g.sibling;if(R!==null){R.return=g.return,nr=R;break e}nr=g.return}}if($r=p,vc(),Du&&typeof Du.onPostCommitFiberRoot=="function")try{Du.onPostCommitFiberRoot(z0,r)}catch(Z){}f=!0}return f}finally{di=l,xs.transition=o}}return!1}function KP(r,o,l){o=yh(l,o),o=G4(r,o,1),r=uc(r,o,1),o=Ta(),r!==null&&(Xg(r,1,o),Ga(r,o))}function Ji(r,o,l){if(r.tag===3)KP(r,r,l);else for(;o!==null;){if(o.tag===3){KP(o,r,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(lc===null||!lc.has(f))){r=yh(l,r),r=q4(o,r,1),o=uc(o,r,1),r=Ta(),o!==null&&(Xg(o,1,r),Ga(o,r));break}}o=o.return}}function jH(r,o,l){var f=r.pingCache;f!==null&&f.delete(o),o=Ta(),r.pingedLanes|=r.suspendedLanes&l,Do===r&&(Zo&l)===l&&(wo===4||wo===3&&(Zo&130023424)===Zo&&500>fo()-lb?ff(r,0):ub|=l),Ga(r,o)}function lU(r,o){o===0&&(r.mode&1?(o=Ly,Ly<<=1,!(Ly&130023424)&&(Ly=4194304)):o=1);var l=Ta();r=Tl(r,o),r!==null&&(Xg(r,o,l),Ga(r,l))}function ZH(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),lU(r,l)}function GH(r,o){var l=0;switch(r.tag){case 13:var f=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(jn(314))}f!==null&&f.delete(o),lU(r,l)}var cU;cU=function(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps||ja.current)Ba=!0;else{if(!(r.lanes&l)&&!(o.flags&128))return Ba=!1,xH(r,o,l);Ba=!!(r.flags&131072)}else Ba=!1,Ui&&o.flags&1048576&&p4(o,R0,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;l0(r,o),r=o.pendingProps;var p=ph(o,ea.current);fh(o,l),p=nb(null,o,f,r,p,l);var S=rb();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Za(f)?(S=!0,C0(o)):S=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,XC(o),p.updater=eE,o.stateNode=p,p._reactInternals=o,HI(o,f,r,l),o=zI(null,o,f,!0,S,l)):(o.tag=0,Ui&&S&&HC(o),Ea(null,o,p,l),o=o.child),o;case 16:f=o.elementType;e:{switch(l0(r,o),r=o.pendingProps,p=f._init,f=p(f._payload),o.type=f,p=o.tag=HH(f),r=eu(f,r),p){case 0:o=VI(null,o,f,r,l);break e;case 1:o=LP(null,o,f,r,l);break e;case 11:o=PP(null,o,f,r,l);break e;case 14:o=OP(null,o,f,eu(f.type,r),l);break e}throw Error(jn(306,f,""))}return o;case 0:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),VI(r,o,f,p,l);case 1:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),LP(r,o,f,p,l);case 3:e:{if(z4(o),r===null)throw Error(jn(387));f=o.pendingProps,S=o.memoizedState,p=S.element,_4(r,o),M0(o,f,null,l);var C=o.memoizedState;if(f=C.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){p=yh(Error(jn(423)),o),o=kP(r,o,f,l,p);break e}else if(f!==p){p=yh(Error(jn(424)),o),o=kP(r,o,f,l,p);break e}else for(cs=sc(o.stateNode.containerInfo.firstChild),ds=o,Ui=!0,nu=null,l=y4(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(gh(),f===p){o=Sl(r,o,l);break e}Ea(r,o,f,l)}o=o.child}return o;case 5:return T4(o),r===null&&ZI(o),f=o.type,p=o.pendingProps,S=r!==null?r.memoizedProps:null,C=p.children,kI(f,p)?C=null:S!==null&&kI(f,S)&&(o.flags|=32),V4(r,o),Ea(r,o,C,l),o.child;case 6:return r===null&&ZI(o),null;case 13:return Y4(r,o,l);case 4:return QC(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=mh(o,null,f,l):Ea(r,o,f,l),o.child;case 11:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),PP(r,o,f,p,l);case 7:return Ea(r,o,o.pendingProps,l),o.child;case 8:return Ea(r,o,o.pendingProps.children,l),o.child;case 12:return Ea(r,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,p=o.pendingProps,S=o.memoizedProps,C=p.value,Ci(x0,f._currentValue),f._currentValue=C,S!==null)if(lu(S.value,C)){if(S.children===p.children&&!ja.current){o=Sl(r,o,l);break e}}else for(S=o.child,S!==null&&(S.return=o);S!==null;){var g=S.dependencies;if(g!==null){C=S.child;for(var w=g.firstContext;w!==null;){if(w.context===f){if(S.tag===1){w=yl(-1,l&-l),w.tag=2;var F=S.updateQueue;if(F!==null){F=F.shared;var b=F.pending;b===null?w.next=w:(w.next=b.next,b.next=w),F.pending=w}}S.lanes|=l,w=S.alternate,w!==null&&(w.lanes|=l),GI(S.return,l,o),g.lanes|=l;break}w=w.next}}else if(S.tag===10)C=S.type===o.type?null:S.child;else if(S.tag===18){if(C=S.return,C===null)throw Error(jn(341));C.lanes|=l,g=C.alternate,g!==null&&(g.lanes|=l),GI(C,l,o),C=S.sibling}else C=S.child;if(C!==null)C.return=S;else for(C=S;C!==null;){if(C===o){C=null;break}if(S=C.sibling,S!==null){S.return=C.return,C=S;break}C=C.return}S=C}Ea(r,o,p.children,l),o=o.child}return o;case 9:return p=o.type,f=o.pendingProps.children,fh(o,l),p=Ns(p),f=f(p),o.flags|=1,Ea(r,o,f,l),o.child;case 14:return f=o.type,p=eu(f,o.pendingProps),p=eu(f.type,p),OP(r,o,f,p,l);case 15:return H4(r,o,o.type,o.pendingProps,l);case 17:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:eu(f,p),l0(r,o),o.tag=1,Za(f)?(r=!0,C0(o)):r=!1,fh(o,l),Z4(o,f,p),HI(o,f,p,l),zI(null,o,f,!0,r,l);case 19:return W4(r,o,l);case 22:return K4(r,o,l)}throw Error(jn(156,o.tag))};function fU(r,o){return UF(r,o)}function qH(r,o,l,f){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(r,o,l,f){return new qH(r,o,l,f)}function hb(r){return r=r.prototype,!(!r||!r.isReactComponent)}function HH(r){if(typeof r=="function")return hb(r)?1:0;if(r!=null){if(r=r.$$typeof,r===DC)return 11;if(r===PC)return 14}return 2}function fc(r,o){var l=r.alternate;return l===null?(l=Rs(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function d0(r,o,l,f,p,S){var C=2;if(f=r,typeof r=="function")hb(r)&&(C=1);else if(typeof r=="string")C=5;else e:switch(r){case zd:return df(l.children,p,S,o);case MC:C=8,p|=8;break;case pI:return r=Rs(12,l,o,p|2),r.elementType=pI,r.lanes=S,r;case gI:return r=Rs(13,l,o,p),r.elementType=gI,r.lanes=S,r;case mI:return r=Rs(19,l,o,p),r.elementType=mI,r.lanes=S,r;case TF:return rE(l,p,S,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case EF:C=10;break e;case _F:C=9;break e;case DC:C=11;break e;case PC:C=14;break e;case Ql:C=16,f=null;break e}throw Error(jn(130,r==null?r:typeof r,""))}return o=Rs(C,l,o,p),o.elementType=r,o.type=f,o.lanes=S,o}function df(r,o,l,f){return r=Rs(7,r,f,o),r.lanes=l,r}function rE(r,o,l,f){return r=Rs(22,r,f,o),r.elementType=TF,r.lanes=l,r.stateNode={isHidden:!1},r}function OT(r,o,l){return r=Rs(6,r,null,o),r.lanes=l,r}function LT(r,o,l){return o=Rs(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function KH(r,o,l,f,p){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gT(0),this.expirationTimes=gT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gT(0),this.identifierPrefix=f,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function pb(r,o,l,f,p,S,C,g,w){return r=new KH(r,o,l,g,w),o===1?(o=1,S===!0&&(o|=8)):o=0,S=Rs(3,null,null,o),r.current=S,S.stateNode=r,S.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},XC(S),r}function VH(r,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vd,key:f==null?null:""+f,children:r,containerInfo:o,implementation:l}}function dU(r){if(!r)return pc;r=r._reactInternals;e:{if(wf(r)!==r||r.tag!==1)throw Error(jn(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Za(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(jn(171))}if(r.tag===1){var l=r.type;if(Za(l))return d4(r,l,o)}return o}function hU(r,o,l,f,p,S,C,g,w){return r=pb(l,f,!0,r,p,S,C,g,w),r.context=dU(null),l=r.current,f=Ta(),p=cc(l),S=yl(f,p),S.callback=o!=null?o:null,uc(l,S,p),r.current.lanes=p,Xg(r,p,f),Ga(r,f),r}function iE(r,o,l,f){var p=o.current,S=Ta(),C=cc(p);return l=dU(l),o.context===null?o.context=l:o.pendingContext=l,o=yl(S,C),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=uc(p,o,C),r!==null&&(su(r,p,C,S),a0(r,p,C)),C}function B0(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function VP(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function gb(r,o){VP(r,o),(r=r.alternate)&&VP(r,o)}function zH(){return null}var pU=typeof reportError=="function"?reportError:function(r){console.error(r)};function mb(r){this._internalRoot=r}oE.prototype.render=mb.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(jn(409));iE(r,o,null,null)};oE.prototype.unmount=mb.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Ef(function(){iE(null,r,null,null)}),o[_l]=null}};function oE(r){this._internalRoot=r}oE.prototype.unstable_scheduleHydration=function(r){if(r){var o=KF();r={blockedOn:null,target:r,priority:o};for(var l=0;l<ec.length&&o!==0&&o<ec[l].priority;l++);ec.splice(l,0,r),l===0&&zF(r)}};function vb(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function aE(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function zP(){}function YH(r,o,l,f,p){if(p){if(typeof f=="function"){var S=f;f=function(){var F=B0(C);S.call(F)}}var C=hU(o,f,r,0,null,!1,!1,"",zP);return r._reactRootContainer=C,r[_l]=C.current,kg(r.nodeType===8?r.parentNode:r),Ef(),C}for(;p=r.lastChild;)r.removeChild(p);if(typeof f=="function"){var g=f;f=function(){var F=B0(w);g.call(F)}}var w=pb(r,0,!1,null,null,!1,!1,"",zP);return r._reactRootContainer=w,r[_l]=w.current,kg(r.nodeType===8?r.parentNode:r),Ef(function(){iE(o,w,l,f)}),w}function sE(r,o,l,f,p){var S=l._reactRootContainer;if(S){var C=S;if(typeof p=="function"){var g=p;p=function(){var w=B0(C);g.call(w)}}iE(o,C,r,p)}else C=YH(l,o,r,p,f);return B0(C)}qF=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var l=hg(o.pendingLanes);l!==0&&(kC(o,l|1),Ga(o,fo()),!($r&6)&&(Eh=fo()+500,vc()))}break;case 13:Ef(function(){var f=Tl(r,1);if(f!==null){var p=Ta();su(f,r,1,p)}}),gb(r,1)}};FC=function(r){if(r.tag===13){var o=Tl(r,134217728);if(o!==null){var l=Ta();su(o,r,134217728,l)}gb(r,134217728)}};HF=function(r){if(r.tag===13){var o=cc(r),l=Tl(r,o);if(l!==null){var f=Ta();su(l,r,o,f)}gb(r,o)}};KF=function(){return di};VF=function(r,o){var l=di;try{return di=r,o()}finally{di=l}};CI=function(r,o,l){switch(o){case"input":if(EI(r,l),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==r&&f.form===r.form){var p=X0(f);if(!p)throw Error(jn(90));wF(f),EI(f,p)}}}break;case"textarea":IF(r,l);break;case"select":o=l.value,o!=null&&sh(r,!!l.multiple,o,!1)}};DF=cb;PF=Ef;var WH={usingClientEntryPoint:!1,Events:[Jg,Xd,X0,NF,MF,cb]},og={findFiberByHostInstance:sf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$H={bundleType:og.bundleType,version:og.version,rendererPackageName:og.rendererPackageName,rendererConfig:og.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=kF(r),r===null?null:r.stateNode},findFiberByHostInstance:og.findFiberByHostInstance||zH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vy.isDisabled&&Vy.supportsFiber)try{z0=Vy.inject($H),Du=Vy}catch(r){}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WH;ps.createPortal=function(r,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vb(o))throw Error(jn(200));return VH(r,o,null,l)};ps.createRoot=function(r,o){if(!vb(r))throw Error(jn(299));var l=!1,f="",p=pU;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=pb(r,1,!1,null,null,l,!1,f,p),r[_l]=o.current,kg(r.nodeType===8?r.parentNode:r),new mb(o)};ps.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(jn(188)):(r=Object.keys(r).join(","),Error(jn(268,r)));return r=kF(o),r=r===null?null:r.stateNode,r};ps.flushSync=function(r){return Ef(r)};ps.hydrate=function(r,o,l){if(!aE(o))throw Error(jn(200));return sE(null,r,o,!0,l)};ps.hydrateRoot=function(r,o,l){if(!vb(r))throw Error(jn(405));var f=l!=null&&l.hydratedSources||null,p=!1,S="",C=pU;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),o=hU(o,null,r,1,l!=null?l:null,p,!1,S,C),r[_l]=o.current,kg(r),f)for(r=0;r<f.length;r++)l=f[r],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new oE(o)};ps.render=function(r,o,l){if(!aE(o))throw Error(jn(200));return sE(null,r,o,!1,l)};ps.unmountComponentAtNode=function(r){if(!aE(r))throw Error(jn(40));return r._reactRootContainer?(Ef(function(){sE(null,null,r,!1,function(){r._reactRootContainer=null,r[_l]=null})}),!0):!1};ps.unstable_batchedUpdates=cb;ps.unstable_renderSubtreeIntoContainer=function(r,o,l,f){if(!aE(l))throw Error(jn(200));if(r==null||r._reactInternals===void 0)throw Error(jn(38));return sE(r,o,l,!1,f)};ps.version="18.3.1-next-f1338f8080-20240426";function gU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gU)}catch(r){console.error(r)}}gU(),gF.exports=ps;var XH=gF.exports,YP=XH;dI.createRoot=YP.createRoot,dI.hydrateRoot=YP.hydrateRoot;var mU={exports:{}},kT,WP;function Af(){if(WP)return kT;WP=1;function r(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}return kT=r,kT}var FT,$P;function vU(){if($P)return FT;$P=1;var r=typeof iu=="object"&&iu&&iu.Object===Object&&iu;return FT=r,FT}var UT,XP;function Ou(){if(XP)return UT;XP=1;var r=vU(),o=typeof self=="object"&&self&&self.Object===Object&&self,l=r||o||Function("return this")();return UT=l,UT}var BT,QP;function QH(){if(QP)return BT;QP=1;var r=Ou(),o=function(){return r.Date.now()};return BT=o,BT}var jT,JP;function JH(){if(JP)return jT;JP=1;var r=/\s/;function o(l){for(var f=l.length;f--&&r.test(l.charAt(f)););return f}return jT=o,jT}var ZT,eO;function e7(){if(eO)return ZT;eO=1;var r=JH(),o=/^\s+/;function l(f){return f&&f.slice(0,r(f)+1).replace(o,"")}return ZT=l,ZT}var GT,tO;function tm(){if(tO)return GT;tO=1;var r=Ou(),o=r.Symbol;return GT=o,GT}var qT,nO;function t7(){if(nO)return qT;nO=1;var r=tm(),o=Object.prototype,l=o.hasOwnProperty,f=o.toString,p=r?r.toStringTag:void 0;function S(C){var g=l.call(C,p),w=C[p];try{C[p]=void 0;var F=!0}catch(y){}var b=f.call(C);return F&&(g?C[p]=w:delete C[p]),b}return qT=S,qT}var HT,rO;function n7(){if(rO)return HT;rO=1;var r=Object.prototype,o=r.toString;function l(f){return o.call(f)}return HT=l,HT}var KT,iO;function nm(){if(iO)return KT;iO=1;var r=tm(),o=t7(),l=n7(),f="[object Null]",p="[object Undefined]",S=r?r.toStringTag:void 0;function C(g){return g==null?g===void 0?p:f:S&&S in Object(g)?o(g):l(g)}return KT=C,KT}var VT,oO;function Ih(){if(oO)return VT;oO=1;function r(o){return o!=null&&typeof o=="object"}return VT=r,VT}var zT,aO;function rm(){if(aO)return zT;aO=1;var r=nm(),o=Ih(),l="[object Symbol]";function f(p){return typeof p=="symbol"||o(p)&&r(p)==l}return zT=f,zT}var YT,sO;function r7(){if(sO)return YT;sO=1;var r=e7(),o=Af(),l=rm(),f=NaN,p=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,C=/^0o[0-7]+$/i,g=parseInt;function w(F){if(typeof F=="number")return F;if(l(F))return f;if(o(F)){var b=typeof F.valueOf=="function"?F.valueOf():F;F=o(b)?b+"":b}if(typeof F!="string")return F===0?F:+F;F=r(F);var y=S.test(F);return y||C.test(F)?g(F.slice(2),y?2:8):p.test(F)?f:+F}return YT=w,YT}var WT,uO;function yU(){if(uO)return WT;uO=1;var r=Af(),o=QH(),l=r7(),f="Expected a function",p=Math.max,S=Math.min;function C(g,w,F){var b,y,v,D,m,T,U=0,N=!1,_=!1,I=!0;if(typeof g!="function")throw new TypeError(f);w=l(w)||0,r(F)&&(N=!!F.leading,_="maxWait"in F,v=_?p(l(F.maxWait)||0,w):v,I="trailing"in F?!!F.trailing:I);function R(oe){var he=b,Ce=y;return b=y=void 0,U=oe,D=g.apply(Ce,he),D}function Z(oe){return U=oe,m=setTimeout(X,w),N?R(oe):D}function z(oe){var he=oe-T,Ce=oe-U,Xe=w-he;return _?S(Xe,v-Ce):Xe}function W(oe){var he=oe-T,Ce=oe-U;return T===void 0||he>=w||he<0||_&&Ce>=v}function X(){var oe=o();if(W(oe))return le(oe);m=setTimeout(X,z(oe))}function le(oe){return m=void 0,I&&b?R(oe):(b=y=void 0,D)}function x(){m!==void 0&&clearTimeout(m),U=0,b=T=y=m=void 0}function $(){return m===void 0?D:le(o())}function ce(){var oe=o(),he=W(oe);if(b=arguments,y=this,T=oe,he){if(m===void 0)return Z(T);if(_)return clearTimeout(m),m=setTimeout(X,w),R(T)}return m===void 0&&(m=setTimeout(X,w)),D}return ce.cancel=x,ce.flush=$,ce}return WT=C,WT}var $T,lO;function EU(){if(lO)return $T;lO=1;var r=nm(),o=Af(),l="[object AsyncFunction]",f="[object Function]",p="[object GeneratorFunction]",S="[object Proxy]";function C(g){if(!o(g))return!1;var w=r(g);return w==f||w==p||w==l||w==S}return $T=C,$T}var XT,cO;function i7(){if(cO)return XT;cO=1;var r=Ou(),o=r["__core-js_shared__"];return XT=o,XT}var QT,fO;function o7(){if(fO)return QT;fO=1;var r=i7(),o=function(){var f=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}();function l(f){return!!o&&o in f}return QT=l,QT}var JT,dO;function _U(){if(dO)return JT;dO=1;var r=Function.prototype,o=r.toString;function l(f){if(f!=null){try{return o.call(f)}catch(p){}try{return f+""}catch(p){}}return""}return JT=l,JT}var eS,hO;function a7(){if(hO)return eS;hO=1;var r=EU(),o=o7(),l=Af(),f=_U(),p=/[\\^$.*+?()[\]{}|]/g,S=/^\[object .+?Constructor\]$/,C=Function.prototype,g=Object.prototype,w=C.toString,F=g.hasOwnProperty,b=RegExp("^"+w.call(F).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(v){if(!l(v)||o(v))return!1;var D=r(v)?b:S;return D.test(f(v))}return eS=y,eS}var tS,pO;function s7(){if(pO)return tS;pO=1;function r(o,l){return o==null?void 0:o[l]}return tS=r,tS}var nS,gO;function If(){if(gO)return nS;gO=1;var r=a7(),o=s7();function l(f,p){var S=o(f,p);return r(S)?S:void 0}return nS=l,nS}var rS,mO;function uE(){if(mO)return rS;mO=1;var r=If(),o=r(Object,"create");return rS=o,rS}var iS,vO;function u7(){if(vO)return iS;vO=1;var r=uE();function o(){this.__data__=r?r(null):{},this.size=0}return iS=o,iS}var oS,yO;function l7(){if(yO)return oS;yO=1;function r(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}return oS=r,oS}var aS,EO;function c7(){if(EO)return aS;EO=1;var r=uE(),o="__lodash_hash_undefined__",l=Object.prototype,f=l.hasOwnProperty;function p(S){var C=this.__data__;if(r){var g=C[S];return g===o?void 0:g}return f.call(C,S)?C[S]:void 0}return aS=p,aS}var sS,_O;function f7(){if(_O)return sS;_O=1;var r=uE(),o=Object.prototype,l=o.hasOwnProperty;function f(p){var S=this.__data__;return r?S[p]!==void 0:l.call(S,p)}return sS=f,sS}var uS,TO;function d7(){if(TO)return uS;TO=1;var r=uE(),o="__lodash_hash_undefined__";function l(f,p){var S=this.__data__;return this.size+=this.has(f)?0:1,S[f]=r&&p===void 0?o:p,this}return uS=l,uS}var lS,SO;function h7(){if(SO)return lS;SO=1;var r=u7(),o=l7(),l=c7(),f=f7(),p=d7();function S(C){var g=-1,w=C==null?0:C.length;for(this.clear();++g<w;){var F=C[g];this.set(F[0],F[1])}}return S.prototype.clear=r,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,lS=S,lS}var cS,wO;function p7(){if(wO)return cS;wO=1;function r(){this.__data__=[],this.size=0}return cS=r,cS}var fS,AO;function yb(){if(AO)return fS;AO=1;function r(o,l){return o===l||o!==o&&l!==l}return fS=r,fS}var dS,IO;function lE(){if(IO)return dS;IO=1;var r=yb();function o(l,f){for(var p=l.length;p--;)if(r(l[p][0],f))return p;return-1}return dS=o,dS}var hS,CO;function g7(){if(CO)return hS;CO=1;var r=lE(),o=Array.prototype,l=o.splice;function f(p){var S=this.__data__,C=r(S,p);if(C<0)return!1;var g=S.length-1;return C==g?S.pop():l.call(S,C,1),--this.size,!0}return hS=f,hS}var pS,bO;function m7(){if(bO)return pS;bO=1;var r=lE();function o(l){var f=this.__data__,p=r(f,l);return p<0?void 0:f[p][1]}return pS=o,pS}var gS,RO;function v7(){if(RO)return gS;RO=1;var r=lE();function o(l){return r(this.__data__,l)>-1}return gS=o,gS}var mS,xO;function y7(){if(xO)return mS;xO=1;var r=lE();function o(l,f){var p=this.__data__,S=r(p,l);return S<0?(++this.size,p.push([l,f])):p[S][1]=f,this}return mS=o,mS}var vS,NO;function cE(){if(NO)return vS;NO=1;var r=p7(),o=g7(),l=m7(),f=v7(),p=y7();function S(C){var g=-1,w=C==null?0:C.length;for(this.clear();++g<w;){var F=C[g];this.set(F[0],F[1])}}return S.prototype.clear=r,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,vS=S,vS}var yS,MO;function Eb(){if(MO)return yS;MO=1;var r=If(),o=Ou(),l=r(o,"Map");return yS=l,yS}var ES,DO;function E7(){if(DO)return ES;DO=1;var r=h7(),o=cE(),l=Eb();function f(){this.size=0,this.__data__={hash:new r,map:new(l||o),string:new r}}return ES=f,ES}var _S,PO;function _7(){if(PO)return _S;PO=1;function r(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}return _S=r,_S}var TS,OO;function fE(){if(OO)return TS;OO=1;var r=_7();function o(l,f){var p=l.__data__;return r(f)?p[typeof f=="string"?"string":"hash"]:p.map}return TS=o,TS}var SS,LO;function T7(){if(LO)return SS;LO=1;var r=fE();function o(l){var f=r(this,l).delete(l);return this.size-=f?1:0,f}return SS=o,SS}var wS,kO;function S7(){if(kO)return wS;kO=1;var r=fE();function o(l){return r(this,l).get(l)}return wS=o,wS}var AS,FO;function w7(){if(FO)return AS;FO=1;var r=fE();function o(l){return r(this,l).has(l)}return AS=o,AS}var IS,UO;function A7(){if(UO)return IS;UO=1;var r=fE();function o(l,f){var p=r(this,l),S=p.size;return p.set(l,f),this.size+=p.size==S?0:1,this}return IS=o,IS}var CS,BO;function _b(){if(BO)return CS;BO=1;var r=E7(),o=T7(),l=S7(),f=w7(),p=A7();function S(C){var g=-1,w=C==null?0:C.length;for(this.clear();++g<w;){var F=C[g];this.set(F[0],F[1])}}return S.prototype.clear=r,S.prototype.delete=o,S.prototype.get=l,S.prototype.has=f,S.prototype.set=p,CS=S,CS}var bS,jO;function I7(){if(jO)return bS;jO=1;var r="__lodash_hash_undefined__";function o(l){return this.__data__.set(l,r),this}return bS=o,bS}var RS,ZO;function C7(){if(ZO)return RS;ZO=1;function r(o){return this.__data__.has(o)}return RS=r,RS}var xS,GO;function TU(){if(GO)return xS;GO=1;var r=_b(),o=I7(),l=C7();function f(p){var S=-1,C=p==null?0:p.length;for(this.__data__=new r;++S<C;)this.add(p[S])}return f.prototype.add=f.prototype.push=o,f.prototype.has=l,xS=f,xS}var NS,qO;function b7(){if(qO)return NS;qO=1;function r(o,l,f,p){for(var S=o.length,C=f+(p?1:-1);p?C--:++C<S;)if(l(o[C],C,o))return C;return-1}return NS=r,NS}var MS,HO;function R7(){if(HO)return MS;HO=1;function r(o){return o!==o}return MS=r,MS}var DS,KO;function x7(){if(KO)return DS;KO=1;function r(o,l,f){for(var p=f-1,S=o.length;++p<S;)if(o[p]===l)return p;return-1}return DS=r,DS}var PS,VO;function N7(){if(VO)return PS;VO=1;var r=b7(),o=R7(),l=x7();function f(p,S,C){return S===S?l(p,S,C):r(p,o,C)}return PS=f,PS}var OS,zO;function M7(){if(zO)return OS;zO=1;var r=N7();function o(l,f){var p=l==null?0:l.length;return!!p&&r(l,f,0)>-1}return OS=o,OS}var LS,YO;function D7(){if(YO)return LS;YO=1;function r(o,l,f){for(var p=-1,S=o==null?0:o.length;++p<S;)if(f(l,o[p]))return!0;return!1}return LS=r,LS}var kS,WO;function Tb(){if(WO)return kS;WO=1;function r(o,l){for(var f=-1,p=o==null?0:o.length,S=Array(p);++f<p;)S[f]=l(o[f],f,o);return S}return kS=r,kS}var FS,$O;function Sb(){if($O)return FS;$O=1;function r(o){return function(l){return o(l)}}return FS=r,FS}var US,XO;function SU(){if(XO)return US;XO=1;function r(o,l){return o.has(l)}return US=r,US}var BS,QO;function P7(){if(QO)return BS;QO=1;var r=TU(),o=M7(),l=D7(),f=Tb(),p=Sb(),S=SU(),C=200;function g(w,F,b,y){var v=-1,D=o,m=!0,T=w.length,U=[],N=F.length;if(!T)return U;b&&(F=f(F,p(b))),y?(D=l,m=!1):F.length>=C&&(D=S,m=!1,F=new r(F));e:for(;++v<T;){var _=w[v],I=b==null?_:b(_);if(_=y||_!==0?_:0,m&&I===I){for(var R=N;R--;)if(F[R]===I)continue e;U.push(_)}else D(F,I,y)||U.push(_)}return U}return BS=g,BS}var jS,JO;function wU(){if(JO)return jS;JO=1;function r(o,l){for(var f=-1,p=l.length,S=o.length;++f<p;)o[S+f]=l[f];return o}return jS=r,jS}var ZS,eL;function O7(){if(eL)return ZS;eL=1;var r=nm(),o=Ih(),l="[object Arguments]";function f(p){return o(p)&&r(p)==l}return ZS=f,ZS}var GS,tL;function wb(){if(tL)return GS;tL=1;var r=O7(),o=Ih(),l=Object.prototype,f=l.hasOwnProperty,p=l.propertyIsEnumerable,S=r(function(){return arguments}())?r:function(C){return o(C)&&f.call(C,"callee")&&!p.call(C,"callee")};return GS=S,GS}var qS,nL;function Ds(){if(nL)return qS;nL=1;var r=Array.isArray;return qS=r,qS}var HS,rL;function L7(){if(rL)return HS;rL=1;var r=tm(),o=wb(),l=Ds(),f=r?r.isConcatSpreadable:void 0;function p(S){return l(S)||o(S)||!!(f&&S&&S[f])}return HS=p,HS}var KS,iL;function AU(){if(iL)return KS;iL=1;var r=wU(),o=L7();function l(f,p,S,C,g){var w=-1,F=f.length;for(S||(S=o),g||(g=[]);++w<F;){var b=f[w];p>0&&S(b)?p>1?l(b,p-1,S,C,g):r(g,b):C||(g[g.length]=b)}return g}return KS=l,KS}var VS,oL;function im(){if(oL)return VS;oL=1;function r(o){return o}return VS=r,VS}var zS,aL;function k7(){if(aL)return zS;aL=1;function r(o,l,f){switch(f.length){case 0:return o.call(l);case 1:return o.call(l,f[0]);case 2:return o.call(l,f[0],f[1]);case 3:return o.call(l,f[0],f[1],f[2])}return o.apply(l,f)}return zS=r,zS}var YS,sL;function F7(){if(sL)return YS;sL=1;var r=k7(),o=Math.max;function l(f,p,S){return p=o(p===void 0?f.length-1:p,0),function(){for(var C=arguments,g=-1,w=o(C.length-p,0),F=Array(w);++g<w;)F[g]=C[p+g];g=-1;for(var b=Array(p+1);++g<p;)b[g]=C[g];return b[p]=S(F),r(f,this,b)}}return YS=l,YS}var WS,uL;function U7(){if(uL)return WS;uL=1;function r(o){return function(){return o}}return WS=r,WS}var $S,lL;function B7(){if(lL)return $S;lL=1;var r=If(),o=function(){try{var l=r(Object,"defineProperty");return l({},"",{}),l}catch(f){}}();return $S=o,$S}var XS,cL;function j7(){if(cL)return XS;cL=1;var r=U7(),o=B7(),l=im(),f=o?function(p,S){return o(p,"toString",{configurable:!0,enumerable:!1,value:r(S),writable:!0})}:l;return XS=f,XS}var QS,fL;function Z7(){if(fL)return QS;fL=1;var r=800,o=16,l=Date.now;function f(p){var S=0,C=0;return function(){var g=l(),w=o-(g-C);if(C=g,w>0){if(++S>=r)return arguments[0]}else S=0;return p.apply(void 0,arguments)}}return QS=f,QS}var JS,dL;function G7(){if(dL)return JS;dL=1;var r=j7(),o=Z7(),l=o(r);return JS=l,JS}var ew,hL;function IU(){if(hL)return ew;hL=1;var r=im(),o=F7(),l=G7();function f(p,S){return l(o(p,S,r),p+"")}return ew=f,ew}var tw,pL;function Ab(){if(pL)return tw;pL=1;var r=9007199254740991;function o(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=r}return tw=o,tw}var nw,gL;function om(){if(gL)return nw;gL=1;var r=EU(),o=Ab();function l(f){return f!=null&&o(f.length)&&!r(f)}return nw=l,nw}var rw,mL;function q7(){if(mL)return rw;mL=1;var r=om(),o=Ih();function l(f){return o(f)&&r(f)}return rw=l,rw}var iw,vL;function H7(){if(vL)return iw;vL=1;var r=P7(),o=AU(),l=IU(),f=q7(),p=l(function(S,C){return f(S)?r(S,o(C,1,f,!0)):[]});return iw=p,iw}var ow,yL;function CU(){if(yL)return ow;yL=1;function r(o,l){for(var f=-1,p=o==null?0:o.length,S=0,C=[];++f<p;){var g=o[f];l(g,f,o)&&(C[S++]=g)}return C}return ow=r,ow}var aw,EL;function K7(){if(EL)return aw;EL=1;function r(o){return function(l,f,p){for(var S=-1,C=Object(l),g=p(l),w=g.length;w--;){var F=g[o?w:++S];if(f(C[F],F,C)===!1)break}return l}}return aw=r,aw}var sw,_L;function V7(){if(_L)return sw;_L=1;var r=K7(),o=r();return sw=o,sw}var uw,TL;function z7(){if(TL)return uw;TL=1;function r(o,l){for(var f=-1,p=Array(o);++f<o;)p[f]=l(f);return p}return uw=r,uw}var gg={exports:{}},lw,SL;function Y7(){if(SL)return lw;SL=1;function r(){return!1}return lw=r,lw}gg.exports;var wL;function bU(){return wL||(wL=1,function(r,o){var l=Ou(),f=Y7(),p=o&&!o.nodeType&&o,S=p&&!0&&r&&!r.nodeType&&r,C=S&&S.exports===p,g=C?l.Buffer:void 0,w=g?g.isBuffer:void 0,F=w||f;r.exports=F}(gg,gg.exports)),gg.exports}var cw,AL;function Ib(){if(AL)return cw;AL=1;var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function l(f,p){var S=typeof f;return p=p==null?r:p,!!p&&(S=="number"||S!="symbol"&&o.test(f))&&f>-1&&f%1==0&&f<p}return cw=l,cw}var fw,IL;function W7(){if(IL)return fw;IL=1;var r=nm(),o=Ab(),l=Ih(),f="[object Arguments]",p="[object Array]",S="[object Boolean]",C="[object Date]",g="[object Error]",w="[object Function]",F="[object Map]",b="[object Number]",y="[object Object]",v="[object RegExp]",D="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",N="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",Z="[object Int16Array]",z="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",le="[object Uint16Array]",x="[object Uint32Array]",$={};$[_]=$[I]=$[R]=$[Z]=$[z]=$[W]=$[X]=$[le]=$[x]=!0,$[f]=$[p]=$[U]=$[S]=$[N]=$[C]=$[g]=$[w]=$[F]=$[b]=$[y]=$[v]=$[D]=$[m]=$[T]=!1;function ce(oe){return l(oe)&&o(oe.length)&&!!$[r(oe)]}return fw=ce,fw}var mg={exports:{}};mg.exports;var CL;function $7(){return CL||(CL=1,function(r,o){var l=vU(),f=o&&!o.nodeType&&o,p=f&&!0&&r&&!r.nodeType&&r,S=p&&p.exports===f,C=S&&l.process,g=function(){try{var w=p&&p.require&&p.require("util").types;return w||C&&C.binding&&C.binding("util")}catch(F){}}();r.exports=g}(mg,mg.exports)),mg.exports}var dw,bL;function RU(){if(bL)return dw;bL=1;var r=W7(),o=Sb(),l=$7(),f=l&&l.isTypedArray,p=f?o(f):r;return dw=p,dw}var hw,RL;function X7(){if(RL)return hw;RL=1;var r=z7(),o=wb(),l=Ds(),f=bU(),p=Ib(),S=RU(),C=Object.prototype,g=C.hasOwnProperty;function w(F,b){var y=l(F),v=!y&&o(F),D=!y&&!v&&f(F),m=!y&&!v&&!D&&S(F),T=y||v||D||m,U=T?r(F.length,String):[],N=U.length;for(var _ in F)(b||g.call(F,_))&&!(T&&(_=="length"||D&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,N)))&&U.push(_);return U}return hw=w,hw}var pw,xL;function Q7(){if(xL)return pw;xL=1;var r=Object.prototype;function o(l){var f=l&&l.constructor,p=typeof f=="function"&&f.prototype||r;return l===p}return pw=o,pw}var gw,NL;function J7(){if(NL)return gw;NL=1;function r(o,l){return function(f){return o(l(f))}}return gw=r,gw}var mw,ML;function eK(){if(ML)return mw;ML=1;var r=J7(),o=r(Object.keys,Object);return mw=o,mw}var vw,DL;function tK(){if(DL)return vw;DL=1;var r=Q7(),o=eK(),l=Object.prototype,f=l.hasOwnProperty;function p(S){if(!r(S))return o(S);var C=[];for(var g in Object(S))f.call(S,g)&&g!="constructor"&&C.push(g);return C}return vw=p,vw}var yw,PL;function Cb(){if(PL)return yw;PL=1;var r=X7(),o=tK(),l=om();function f(p){return l(p)?r(p):o(p)}return yw=f,yw}var Ew,OL;function bb(){if(OL)return Ew;OL=1;var r=V7(),o=Cb();function l(f,p){return f&&r(f,p,o)}return Ew=l,Ew}var _w,LL;function nK(){if(LL)return _w;LL=1;var r=om();function o(l,f){return function(p,S){if(p==null)return p;if(!r(p))return l(p,S);for(var C=p.length,g=f?C:-1,w=Object(p);(f?g--:++g<C)&&S(w[g],g,w)!==!1;);return p}}return _w=o,_w}var Tw,kL;function Rb(){if(kL)return Tw;kL=1;var r=bb(),o=nK(),l=o(r);return Tw=l,Tw}var Sw,FL;function rK(){if(FL)return Sw;FL=1;var r=Rb();function o(l,f){var p=[];return r(l,function(S,C,g){f(S,C,g)&&p.push(S)}),p}return Sw=o,Sw}var ww,UL;function iK(){if(UL)return ww;UL=1;var r=cE();function o(){this.__data__=new r,this.size=0}return ww=o,ww}var Aw,BL;function oK(){if(BL)return Aw;BL=1;function r(o){var l=this.__data__,f=l.delete(o);return this.size=l.size,f}return Aw=r,Aw}var Iw,jL;function aK(){if(jL)return Iw;jL=1;function r(o){return this.__data__.get(o)}return Iw=r,Iw}var Cw,ZL;function sK(){if(ZL)return Cw;ZL=1;function r(o){return this.__data__.has(o)}return Cw=r,Cw}var bw,GL;function uK(){if(GL)return bw;GL=1;var r=cE(),o=Eb(),l=_b(),f=200;function p(S,C){var g=this.__data__;if(g instanceof r){var w=g.__data__;if(!o||w.length<f-1)return w.push([S,C]),this.size=++g.size,this;g=this.__data__=new l(w)}return g.set(S,C),this.size=g.size,this}return bw=p,bw}var Rw,qL;function xU(){if(qL)return Rw;qL=1;var r=cE(),o=iK(),l=oK(),f=aK(),p=sK(),S=uK();function C(g){var w=this.__data__=new r(g);this.size=w.size}return C.prototype.clear=o,C.prototype.delete=l,C.prototype.get=f,C.prototype.has=p,C.prototype.set=S,Rw=C,Rw}var xw,HL;function lK(){if(HL)return xw;HL=1;function r(o,l){for(var f=-1,p=o==null?0:o.length;++f<p;)if(l(o[f],f,o))return!0;return!1}return xw=r,xw}var Nw,KL;function NU(){if(KL)return Nw;KL=1;var r=TU(),o=lK(),l=SU(),f=1,p=2;function S(C,g,w,F,b,y){var v=w&f,D=C.length,m=g.length;if(D!=m&&!(v&&m>D))return!1;var T=y.get(C),U=y.get(g);if(T&&U)return T==g&&U==C;var N=-1,_=!0,I=w&p?new r:void 0;for(y.set(C,g),y.set(g,C);++N<D;){var R=C[N],Z=g[N];if(F)var z=v?F(Z,R,N,g,C,y):F(R,Z,N,C,g,y);if(z!==void 0){if(z)continue;_=!1;break}if(I){if(!o(g,function(W,X){if(!l(I,X)&&(R===W||b(R,W,w,F,y)))return I.push(X)})){_=!1;break}}else if(!(R===Z||b(R,Z,w,F,y))){_=!1;break}}return y.delete(C),y.delete(g),_}return Nw=S,Nw}var Mw,VL;function cK(){if(VL)return Mw;VL=1;var r=Ou(),o=r.Uint8Array;return Mw=o,Mw}var Dw,zL;function fK(){if(zL)return Dw;zL=1;function r(o){var l=-1,f=Array(o.size);return o.forEach(function(p,S){f[++l]=[S,p]}),f}return Dw=r,Dw}var Pw,YL;function dK(){if(YL)return Pw;YL=1;function r(o){var l=-1,f=Array(o.size);return o.forEach(function(p){f[++l]=p}),f}return Pw=r,Pw}var Ow,WL;function hK(){if(WL)return Ow;WL=1;var r=tm(),o=cK(),l=yb(),f=NU(),p=fK(),S=dK(),C=1,g=2,w="[object Boolean]",F="[object Date]",b="[object Error]",y="[object Map]",v="[object Number]",D="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",N="[object ArrayBuffer]",_="[object DataView]",I=r?r.prototype:void 0,R=I?I.valueOf:void 0;function Z(z,W,X,le,x,$,ce){switch(X){case _:if(z.byteLength!=W.byteLength||z.byteOffset!=W.byteOffset)return!1;z=z.buffer,W=W.buffer;case N:return!(z.byteLength!=W.byteLength||!$(new o(z),new o(W)));case w:case F:case v:return l(+z,+W);case b:return z.name==W.name&&z.message==W.message;case D:case T:return z==W+"";case y:var oe=p;case m:var he=le&C;if(oe||(oe=S),z.size!=W.size&&!he)return!1;var Ce=ce.get(z);if(Ce)return Ce==W;le|=g,ce.set(z,W);var Xe=f(oe(z),oe(W),le,x,$,ce);return ce.delete(z),Xe;case U:if(R)return R.call(z)==R.call(W)}return!1}return Ow=Z,Ow}var Lw,$L;function pK(){if($L)return Lw;$L=1;var r=wU(),o=Ds();function l(f,p,S){var C=p(f);return o(f)?C:r(C,S(f))}return Lw=l,Lw}var kw,XL;function gK(){if(XL)return kw;XL=1;function r(){return[]}return kw=r,kw}var Fw,QL;function mK(){if(QL)return Fw;QL=1;var r=CU(),o=gK(),l=Object.prototype,f=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,S=p?function(C){return C==null?[]:(C=Object(C),r(p(C),function(g){return f.call(C,g)}))}:o;return Fw=S,Fw}var Uw,JL;function vK(){if(JL)return Uw;JL=1;var r=pK(),o=mK(),l=Cb();function f(p){return r(p,l,o)}return Uw=f,Uw}var Bw,ek;function yK(){if(ek)return Bw;ek=1;var r=vK(),o=1,l=Object.prototype,f=l.hasOwnProperty;function p(S,C,g,w,F,b){var y=g&o,v=r(S),D=v.length,m=r(C),T=m.length;if(D!=T&&!y)return!1;for(var U=D;U--;){var N=v[U];if(!(y?N in C:f.call(C,N)))return!1}var _=b.get(S),I=b.get(C);if(_&&I)return _==C&&I==S;var R=!0;b.set(S,C),b.set(C,S);for(var Z=y;++U<D;){N=v[U];var z=S[N],W=C[N];if(w)var X=y?w(W,z,N,C,S,b):w(z,W,N,S,C,b);if(!(X===void 0?z===W||F(z,W,g,w,b):X)){R=!1;break}Z||(Z=N=="constructor")}if(R&&!Z){var le=S.constructor,x=C.constructor;le!=x&&"constructor"in S&&"constructor"in C&&!(typeof le=="function"&&le instanceof le&&typeof x=="function"&&x instanceof x)&&(R=!1)}return b.delete(S),b.delete(C),R}return Bw=p,Bw}var jw,tk;function EK(){if(tk)return jw;tk=1;var r=If(),o=Ou(),l=r(o,"DataView");return jw=l,jw}var Zw,nk;function _K(){if(nk)return Zw;nk=1;var r=If(),o=Ou(),l=r(o,"Promise");return Zw=l,Zw}var Gw,rk;function TK(){if(rk)return Gw;rk=1;var r=If(),o=Ou(),l=r(o,"Set");return Gw=l,Gw}var qw,ik;function SK(){if(ik)return qw;ik=1;var r=If(),o=Ou(),l=r(o,"WeakMap");return qw=l,qw}var Hw,ok;function wK(){if(ok)return Hw;ok=1;var r=EK(),o=Eb(),l=_K(),f=TK(),p=SK(),S=nm(),C=_U(),g="[object Map]",w="[object Object]",F="[object Promise]",b="[object Set]",y="[object WeakMap]",v="[object DataView]",D=C(r),m=C(o),T=C(l),U=C(f),N=C(p),_=S;return(r&&_(new r(new ArrayBuffer(1)))!=v||o&&_(new o)!=g||l&&_(l.resolve())!=F||f&&_(new f)!=b||p&&_(new p)!=y)&&(_=function(I){var R=S(I),Z=R==w?I.constructor:void 0,z=Z?C(Z):"";if(z)switch(z){case D:return v;case m:return g;case T:return F;case U:return b;case N:return y}return R}),Hw=_,Hw}var Kw,ak;function AK(){if(ak)return Kw;ak=1;var r=xU(),o=NU(),l=hK(),f=yK(),p=wK(),S=Ds(),C=bU(),g=RU(),w=1,F="[object Arguments]",b="[object Array]",y="[object Object]",v=Object.prototype,D=v.hasOwnProperty;function m(T,U,N,_,I,R){var Z=S(T),z=S(U),W=Z?b:p(T),X=z?b:p(U);W=W==F?y:W,X=X==F?y:X;var le=W==y,x=X==y,$=W==X;if($&&C(T)){if(!C(U))return!1;Z=!0,le=!1}if($&&!le)return R||(R=new r),Z||g(T)?o(T,U,N,_,I,R):l(T,U,W,N,_,I,R);if(!(N&w)){var ce=le&&D.call(T,"__wrapped__"),oe=x&&D.call(U,"__wrapped__");if(ce||oe){var he=ce?T.value():T,Ce=oe?U.value():U;return R||(R=new r),I(he,Ce,N,_,R)}}return $?(R||(R=new r),f(T,U,N,_,I,R)):!1}return Kw=m,Kw}var Vw,sk;function MU(){if(sk)return Vw;sk=1;var r=AK(),o=Ih();function l(f,p,S,C,g){return f===p?!0:f==null||p==null||!o(f)&&!o(p)?f!==f&&p!==p:r(f,p,S,C,l,g)}return Vw=l,Vw}var zw,uk;function IK(){if(uk)return zw;uk=1;var r=xU(),o=MU(),l=1,f=2;function p(S,C,g,w){var F=g.length,b=F,y=!w;if(S==null)return!b;for(S=Object(S);F--;){var v=g[F];if(y&&v[2]?v[1]!==S[v[0]]:!(v[0]in S))return!1}for(;++F<b;){v=g[F];var D=v[0],m=S[D],T=v[1];if(y&&v[2]){if(m===void 0&&!(D in S))return!1}else{var U=new r;if(w)var N=w(m,T,D,S,C,U);if(!(N===void 0?o(T,m,l|f,w,U):N))return!1}}return!0}return zw=p,zw}var Yw,lk;function DU(){if(lk)return Yw;lk=1;var r=Af();function o(l){return l===l&&!r(l)}return Yw=o,Yw}var Ww,ck;function CK(){if(ck)return Ww;ck=1;var r=DU(),o=Cb();function l(f){for(var p=o(f),S=p.length;S--;){var C=p[S],g=f[C];p[S]=[C,g,r(g)]}return p}return Ww=l,Ww}var $w,fk;function PU(){if(fk)return $w;fk=1;function r(o,l){return function(f){return f==null?!1:f[o]===l&&(l!==void 0||o in Object(f))}}return $w=r,$w}var Xw,dk;function bK(){if(dk)return Xw;dk=1;var r=IK(),o=CK(),l=PU();function f(p){var S=o(p);return S.length==1&&S[0][2]?l(S[0][0],S[0][1]):function(C){return C===p||r(C,p,S)}}return Xw=f,Xw}var Qw,hk;function xb(){if(hk)return Qw;hk=1;var r=Ds(),o=rm(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;function p(S,C){if(r(S))return!1;var g=typeof S;return g=="number"||g=="symbol"||g=="boolean"||S==null||o(S)?!0:f.test(S)||!l.test(S)||C!=null&&S in Object(C)}return Qw=p,Qw}var Jw,pk;function RK(){if(pk)return Jw;pk=1;var r=_b(),o="Expected a function";function l(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new TypeError(o);var S=function(){var C=arguments,g=p?p.apply(this,C):C[0],w=S.cache;if(w.has(g))return w.get(g);var F=f.apply(this,C);return S.cache=w.set(g,F)||w,F};return S.cache=new(l.Cache||r),S}return l.Cache=r,Jw=l,Jw}var eA,gk;function xK(){if(gk)return eA;gk=1;var r=RK(),o=500;function l(f){var p=r(f,function(C){return S.size===o&&S.clear(),C}),S=p.cache;return p}return eA=l,eA}var tA,mk;function NK(){if(mk)return tA;mk=1;var r=xK(),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,f=r(function(p){var S=[];return p.charCodeAt(0)===46&&S.push(""),p.replace(o,function(C,g,w,F){S.push(w?F.replace(l,"$1"):g||C)}),S});return tA=f,tA}var nA,vk;function MK(){if(vk)return nA;vk=1;var r=tm(),o=Tb(),l=Ds(),f=rm(),p=1/0,S=r?r.prototype:void 0,C=S?S.toString:void 0;function g(w){if(typeof w=="string")return w;if(l(w))return o(w,g)+"";if(f(w))return C?C.call(w):"";var F=w+"";return F=="0"&&1/w==-p?"-0":F}return nA=g,nA}var rA,yk;function OU(){if(yk)return rA;yk=1;var r=MK();function o(l){return l==null?"":r(l)}return rA=o,rA}var iA,Ek;function LU(){if(Ek)return iA;Ek=1;var r=Ds(),o=xb(),l=NK(),f=OU();function p(S,C){return r(S)?S:o(S,C)?[S]:l(f(S))}return iA=p,iA}var oA,_k;function dE(){if(_k)return oA;_k=1;var r=rm(),o=1/0;function l(f){if(typeof f=="string"||r(f))return f;var p=f+"";return p=="0"&&1/f==-o?"-0":p}return oA=l,oA}var aA,Tk;function Nb(){if(Tk)return aA;Tk=1;var r=LU(),o=dE();function l(f,p){p=r(p,f);for(var S=0,C=p.length;f!=null&&S<C;)f=f[o(p[S++])];return S&&S==C?f:void 0}return aA=l,aA}var sA,Sk;function DK(){if(Sk)return sA;Sk=1;var r=Nb();function o(l,f,p){var S=l==null?void 0:r(l,f);return S===void 0?p:S}return sA=o,sA}var uA,wk;function PK(){if(wk)return uA;wk=1;function r(o,l){return o!=null&&l in Object(o)}return uA=r,uA}var lA,Ak;function OK(){if(Ak)return lA;Ak=1;var r=LU(),o=wb(),l=Ds(),f=Ib(),p=Ab(),S=dE();function C(g,w,F){w=r(w,g);for(var b=-1,y=w.length,v=!1;++b<y;){var D=S(w[b]);if(!(v=g!=null&&F(g,D)))break;g=g[D]}return v||++b!=y?v:(y=g==null?0:g.length,!!y&&p(y)&&f(D,y)&&(l(g)||o(g)))}return lA=C,lA}var cA,Ik;function LK(){if(Ik)return cA;Ik=1;var r=PK(),o=OK();function l(f,p){return f!=null&&o(f,p,r)}return cA=l,cA}var fA,Ck;function kK(){if(Ck)return fA;Ck=1;var r=MU(),o=DK(),l=LK(),f=xb(),p=DU(),S=PU(),C=dE(),g=1,w=2;function F(b,y){return f(b)&&p(y)?S(C(b),y):function(v){var D=o(v,b);return D===void 0&&D===y?l(v,b):r(y,D,g|w)}}return fA=F,fA}var dA,bk;function FK(){if(bk)return dA;bk=1;function r(o){return function(l){return l==null?void 0:l[o]}}return dA=r,dA}var hA,Rk;function UK(){if(Rk)return hA;Rk=1;var r=Nb();function o(l){return function(f){return r(f,l)}}return hA=o,hA}var pA,xk;function BK(){if(xk)return pA;xk=1;var r=FK(),o=UK(),l=xb(),f=dE();function p(S){return l(S)?r(f(S)):o(S)}return pA=p,pA}var gA,Nk;function Mb(){if(Nk)return gA;Nk=1;var r=bK(),o=kK(),l=im(),f=Ds(),p=BK();function S(C){return typeof C=="function"?C:C==null?l:typeof C=="object"?f(C)?o(C[0],C[1]):r(C):p(C)}return gA=S,gA}var mA,Mk;function jK(){if(Mk)return mA;Mk=1;var r=CU(),o=rK(),l=Mb(),f=Ds();function p(S,C){var g=f(S)?r:o;return g(S,l(C,3))}return mA=p,mA}var vA,Dk;function ZK(){if(Dk)return vA;Dk=1;function r(o,l,f){var p;return f(o,function(S,C,g){if(l(S,C,g))return p=C,!1}),p}return vA=r,vA}var yA,Pk;function GK(){if(Pk)return yA;Pk=1;var r=ZK(),o=bb(),l=Mb();function f(p,S){return r(p,l(S,3),o)}return yA=f,yA}var EA,Ok;function qK(){if(Ok)return EA;Ok=1;function r(o){return o&&o.length?o[0]:void 0}return EA=r,EA}var _A,Lk;function HK(){return Lk||(Lk=1,_A=qK()),_A}var TA,kk;function KK(){if(kk)return TA;kk=1;function r(o,l){for(var f=-1,p=o==null?0:o.length;++f<p&&l(o[f],f,o)!==!1;);return o}return TA=r,TA}var SA,Fk;function kU(){if(Fk)return SA;Fk=1;var r=im();function o(l){return typeof l=="function"?l:r}return SA=o,SA}var wA,Uk;function VK(){if(Uk)return wA;Uk=1;var r=KK(),o=Rb(),l=kU(),f=Ds();function p(S,C){var g=f(S)?r:o;return g(S,l(C))}return wA=p,wA}var AA,Bk;function zK(){if(Bk)return AA;Bk=1;var r=bb(),o=kU();function l(f,p){return f&&r(f,o(p))}return AA=l,AA}var IA,jk;function YK(){if(jk)return IA;jk=1;function r(){}return IA=r,IA}var CA,Zk;function WK(){if(Zk)return CA;Zk=1;var r=Rb(),o=om();function l(f,p){var S=-1,C=o(f)?Array(f.length):[];return r(f,function(g,w,F){C[++S]=p(g,w,F)}),C}return CA=l,CA}var bA,Gk;function $K(){if(Gk)return bA;Gk=1;function r(o,l){var f=o.length;for(o.sort(l);f--;)o[f]=o[f].value;return o}return bA=r,bA}var RA,qk;function XK(){if(qk)return RA;qk=1;var r=rm();function o(l,f){if(l!==f){var p=l!==void 0,S=l===null,C=l===l,g=r(l),w=f!==void 0,F=f===null,b=f===f,y=r(f);if(!F&&!y&&!g&&l>f||g&&w&&b&&!F&&!y||S&&w&&b||!p&&b||!C)return 1;if(!S&&!g&&!y&&l<f||y&&p&&C&&!S&&!g||F&&p&&C||!w&&C||!b)return-1}return 0}return RA=o,RA}var xA,Hk;function QK(){if(Hk)return xA;Hk=1;var r=XK();function o(l,f,p){for(var S=-1,C=l.criteria,g=f.criteria,w=C.length,F=p.length;++S<w;){var b=r(C[S],g[S]);if(b){if(S>=F)return b;var y=p[S];return b*(y=="desc"?-1:1)}}return l.index-f.index}return xA=o,xA}var NA,Kk;function JK(){if(Kk)return NA;Kk=1;var r=Tb(),o=Nb(),l=Mb(),f=WK(),p=$K(),S=Sb(),C=QK(),g=im(),w=Ds();function F(b,y,v){y.length?y=r(y,function(T){return w(T)?function(U){return o(U,T.length===1?T[0]:T)}:T}):y=[g];var D=-1;y=r(y,S(l));var m=f(b,function(T,U,N){var _=r(y,function(I){return I(T)});return{criteria:_,index:++D,value:T}});return p(m,function(T,U){return C(T,U,v)})}return NA=F,NA}var MA,Vk;function eV(){if(Vk)return MA;Vk=1;var r=yb(),o=om(),l=Ib(),f=Af();function p(S,C,g){if(!f(g))return!1;var w=typeof C;return(w=="number"?o(g)&&l(C,g.length):w=="string"&&C in g)?r(g[C],S):!1}return MA=p,MA}var DA,zk;function tV(){if(zk)return DA;zk=1;var r=AU(),o=JK(),l=IU(),f=eV(),p=l(function(S,C){if(S==null)return[];var g=C.length;return g>1&&f(S,C[0],C[1])?C=[]:g>2&&f(C[0],C[1],C[2])&&(C=[C[0]]),o(S,r(C,1),[])});return DA=p,DA}var PA,Yk;function nV(){if(Yk)return PA;Yk=1;var r=yU(),o=Af(),l="Expected a function";function f(p,S,C){var g=!0,w=!0;if(typeof p!="function")throw new TypeError(l);return o(C)&&(g="leading"in C?!!C.leading:g,w="trailing"in C?!!C.trailing:w),r(p,S,{leading:g,maxWait:S,trailing:w})}return PA=f,PA}var OA,Wk;function rV(){if(Wk)return OA;Wk=1;var r=OU(),o=0;function l(f){var p=++o;return r(f)+p}return OA=l,OA}(function(r,o){(function(l,f){r.exports=f(yU(),H7(),jK(),GK(),HK(),VK(),zK(),YK(),tV(),nV(),rV(),ln)})(iu,function(l,f,p,S,C,g,w,F,b,y,v,D){return function(){var m={654:function(U,N,_){var I,R=this&&this.__assign||function(){return R=Object.assign||function(be){for(var re,Fe=1,O=arguments.length;Fe<O;Fe++)for(var M in re=arguments[Fe])Object.prototype.hasOwnProperty.call(re,M)&&(be[M]=re[M]);return be},R.apply(this,arguments)},Z=this&&this.__createBinding||(Object.create?function(be,re,Fe,O){O===void 0&&(O=Fe);var M=Object.getOwnPropertyDescriptor(re,Fe);M&&!("get"in M?!re.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return re[Fe]}}),Object.defineProperty(be,O,M)}:function(be,re,Fe,O){O===void 0&&(O=Fe),be[O]=re[Fe]}),z=this&&this.__setModuleDefault||(Object.create?function(be,re){Object.defineProperty(be,"default",{enumerable:!0,value:re})}:function(be,re){be.default=re}),W=this&&this.__importStar||function(be){if(be&&be.__esModule)return be;var re={};if(be!=null)for(var Fe in be)Fe!=="default"&&Object.prototype.hasOwnProperty.call(be,Fe)&&Z(re,be,Fe);return z(re,be),re},X=this&&this.__spreadArray||function(be,re,Fe){if(Fe||arguments.length===2)for(var O,M=0,q=re.length;M<q;M++)!O&&M in re||(O||(O=Array.prototype.slice.call(re,0,M)),O[M]=re[M]);return be.concat(O||Array.prototype.slice.call(re))},le=this&&this.__importDefault||function(be){return be&&be.__esModule?be:{default:be}};Object.defineProperty(N,"__esModule",{value:!0}),N.doesFocusableExist=N.getCurrentFocusKey=N.updateAllLayouts=N.resume=N.pause=N.navigateByDirection=N.setFocus=N.setKeyMap=N.destroy=N.setThrottle=N.init=N.SpatialNavigation=N.ROOT_FOCUS_KEY=void 0;var x=le(_(150)),$=le(_(117)),ce=le(_(747)),oe=le(_(23)),he=le(_(842)),Ce=le(_(682)),Xe=le(_(784)),Ae=le(_(432)),Ze=le(_(67)),nt=le(_(35)),lt=le(_(119)),qe=W(_(964)),ut="left",At="right",Oe="up",Qe="down",ct="enter",Xt=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);N.ROOT_FOCUS_KEY="SN:ROOT";var Kt=["#0FF","#FF0","#F0F"],Tt={leading:!0,trailing:!1},Ct=function(){function be(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=lt.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Xt,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,x.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return be.getCutoffCoordinate=function(re,Fe,O,M,q){var K=re?M.top:q===lt.default.LTR?M.left:M.right,_e=re?M.bottom:q===lt.default.LTR?M.right:M.left;return Fe?O?K:_e:O?_e:K},be.getRefCorners=function(re,Fe,O){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(re){case Oe:var q=Fe?O.bottom:O.top;M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case Qe:q=Fe?O.top:O.bottom,M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case ut:var K=Fe?O.right:O.left;M.a={x:K,y:O.top},M.b={x:K,y:O.bottom};break;case At:K=Fe?O.left:O.right,M.a={x:K,y:O.top},M.b={x:K,y:O.bottom}}return M},be.isAdjacentSlice=function(re,Fe,O){var M=re.a,q=re.b,K=Fe.a,_e=Fe.b,de=O?"x":"y",Ke=M[de],St=q[de],ot=K[de],it=_e[de],et=.2*(St-Ke);return Math.max(0,Math.min(St,it)-Math.max(Ke,ot))>=et},be.getPrimaryAxisDistance=function(re,Fe,O){var M=re.a,q=Fe.a,K=O?"y":"x";return Math.abs(q[K]-M[K])},be.getSecondaryAxisDistance=function(re,Fe,O){var M=re.a,q=re.b,K=Fe.a,_e=Fe.b,de=O?"x":"y",Ke=M[de],St=q[de],ot=K[de],it=_e[de],et=[];return et.push(Math.abs(ot-Ke)),et.push(Math.abs(ot-St)),et.push(Math.abs(it-Ke)),et.push(Math.abs(it-St)),Math.min.apply(Math,et)},be.prototype.sortSiblingsByPriority=function(re,Fe,O,M){var q=this,K=O===Qe||O===Oe,_e=be.getRefCorners(O,!1,Fe);return(0,Ae.default)(re,function(de){var Ke=be.getRefCorners(O,!0,de.layout),St=be.isAdjacentSlice(_e,Ke,K),ot=St?be.getPrimaryAxisDistance:be.getSecondaryAxisDistance,it=St?be.getSecondaryAxisDistance:be.getPrimaryAxisDistance,et=ot(_e,Ke,K),ft=it(_e,Ke,K),yt=5*et+ft,_t=(yt+1)/(St?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(de.focusKey," relative to ").concat(M," is"),et,ft,yt),q.log("smartNavigate","priority for ".concat(de.focusKey," relative to ").concat(M," is"),_t),q.visualDebugger&&(q.visualDebugger.drawPoint(Ke.a.x,Ke.a.y,"yellow",6),q.visualDebugger.drawPoint(Ke.b.x,Ke.b.y,"yellow",6)),_t})},be.prototype.init=function(re){var Fe=re===void 0?{}:re,O=Fe.debug,M=O!==void 0&&O,q=Fe.visualDebug,K=q!==void 0&&q,_e=Fe.nativeMode,de=_e!==void 0&&_e,Ke=Fe.throttle,St=Ke===void 0?0:Ke,ot=Fe.throttleKeypresses,it=ot!==void 0&&ot,et=Fe.useGetBoundingClientRect,ft=et!==void 0&&et,yt=Fe.shouldFocusDOMNode,_t=yt!==void 0&&yt,Rt=Fe.shouldUseNativeEvents,pn=Rt!==void 0&&Rt,Qt=Fe.rtl,nn=Qt!==void 0&&Qt;this.enabled||(this.enabled=!0,this.nativeMode=de,this.throttleKeypresses=it,this.useGetBoundingClientRect=ft,this.shouldFocusDOMNode=_t&&!de,this.shouldUseNativeEvents=pn,this.writingDirection=nn?lt.default.RTL:lt.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(St)&&St>0&&(this.throttle=St),this.bindEventHandlers(),K&&(this.visualDebugger=new nt.default(this.writingDirection),this.startDrawLayouts())))},be.prototype.setThrottle=function(re){var Fe=re===void 0?{}:re,O=Fe.throttle,M=O===void 0?0:O,q=Fe.throttleKeypresses,K=q!==void 0&&q;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},be.prototype.startDrawLayouts=function(){var re=this,Fe=function(){requestAnimationFrame(function(){re.visualDebugger.clearLayouts(),(0,Xe.default)(re.focusableComponents,function(O,M){re.visualDebugger.drawLayout(O.layout,M,O.parentFocusKey)}),Fe()})};Fe()},be.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Xt,this.unbindEventHandlers())},be.prototype.getEventType=function(re){return(0,oe.default)(this.getKeyMap(),function(Fe){return Fe.includes(re)})},be.getKeyCode=function(re){return re.keyCode||re.code},be.prototype.bindEventHandlers=function(){var re=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Fe){if(re.paused!==!0){re.debug&&(re.logIndex+=1);var O=be.getKeyCode(Fe),M=re.getEventType(O);if(M){re.pressedKeys[M]=re.pressedKeys[M]?re.pressedKeys[M]+1:1,re.shouldUseNativeEvents||(Fe.preventDefault(),Fe.stopPropagation());var q={pressedKeys:re.pressedKeys};M===ct&&re.focusKey?re.onEnterPress(q):re.onArrowPress(M,q)===!1?(re.log("keyDownEventListener","default navigation prevented"),re.visualDebugger&&re.visualDebugger.clear()):re.onKeyEvent(Fe)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,Ze.default)(this.keyDownEventListener.bind(this),this.throttle,Tt)),this.keyUpEventListener=function(Fe){var O=be.getKeyCode(Fe),M=re.getEventType(O);delete re.pressedKeys[M],re.throttle&&!re.throttleKeypresses&&re.keyDownEventListenerThrottled.cancel(),M===ct&&re.focusKey&&re.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},be.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var re=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",re),this.keyDownEventListener=null}},be.prototype.onEnterPress=function(re){var Fe=this.focusableComponents[this.focusKey];Fe?Fe.focusable?Fe.onEnterPress&&Fe.onEnterPress(re):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},be.prototype.onEnterRelease=function(){var re=this.focusableComponents[this.focusKey];re?re.focusable?re.onEnterRelease&&re.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},be.prototype.onArrowPress=function(re,Fe){var O=this.focusableComponents[this.focusKey];if(O)return O&&O.onArrowPress&&O.onArrowPress(re,Fe);this.log("onArrowPress","noComponent")},be.prototype.navigateByDirection=function(re,Fe){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var O=[Qe,Oe,ut,At];O.includes(re)?(this.log("navigateByDirection","direction",re),this.smartNavigate(re,null,Fe)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(re,"`, but you can use only these: "),O)}},be.prototype.onKeyEvent=function(re){this.visualDebugger&&this.visualDebugger.clear();var Fe=be.getKeyCode(re),O=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(Fe)});this.smartNavigate(O,null,{event:re})},be.prototype.smartNavigate=function(re,Fe,O){var M=this;if(!this.nativeMode){var q=re===Qe||re===Oe,K=re===Qe||(this.writingDirection===lt.default.LTR?re===At:re===ut);this.log("smartNavigate","direction",re),this.log("smartNavigate","fromParentFocusKey",Fe),this.log("smartNavigate","this.focusKey",this.focusKey),Fe||(0,Xe.default)(this.focusableComponents,function(pn){pn.layoutUpdated=!1});var _e=this.focusableComponents[Fe||this.focusKey];if(Fe||_e){if(this.log("smartNavigate","currentComponent",_e?_e.focusKey:void 0,_e?_e.node:void 0,_e),_e){this.updateLayout(_e.focusKey);var de=_e.parentFocusKey,Ke=_e.focusKey,St=_e.layout,ot=be.getCutoffCoordinate(q,K,!1,St,this.writingDirection),it=(0,ce.default)(this.focusableComponents,function(pn){if(pn.parentFocusKey===de&&pn.focusable){M.updateLayout(pn.focusKey);var Qt=be.getCutoffCoordinate(q,K,!0,pn.layout,M.writingDirection);return q||M.writingDirection===lt.default.LTR?K?Qt>=ot:Qt<=ot:K?Qt<=ot:Qt>=ot}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",ot),this.log("smartNavigate","siblings","".concat(it.length," elements:"),it.map(function(pn){return pn.focusKey}).join(", "),it.map(function(pn){return pn.node}),it.map(function(pn){return pn}))),this.visualDebugger){var et=be.getRefCorners(re,!1,St);this.visualDebugger.drawPoint(et.a.x,et.a.y),this.visualDebugger.drawPoint(et.b.x,et.b.y)}var ft=this.sortSiblingsByPriority(it,St,re,Ke),yt=(0,he.default)(ft);if(this.log("smartNavigate","nextComponent",yt?yt.focusKey:void 0,yt?yt.node:void 0,yt),yt)this.setFocus(yt.focusKey,O);else{var _t=this.focusableComponents[de],Rt=_t!=null&&_t.isFocusBoundary?_t.focusBoundaryDirections||[re]:[];_t&&Rt.includes(re)||this.smartNavigate(re,de,O)}}}else this.setFocus(this.getForcedFocusKey())}},be.prototype.saveLastFocusedChildKey=function(re,Fe){re&&(this.log("saveLastFocusedChildKey","".concat(re.focusKey," lastFocusedChildKey set"),Fe),re.lastFocusedChildKey=Fe)},be.prototype.log=function(re,Fe){for(var O=[],M=2;M<arguments.length;M++)O[M-2]=arguments[M];this.debug&&console.log.apply(console,X(["%c".concat(re,"%c").concat(Fe),"background: ".concat(Kt[this.logIndex%Kt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],O,!1))},be.prototype.getCurrentFocusKey=function(){return this.focusKey},be.prototype.getForcedFocusKey=function(){var re,Fe=(0,ce.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),O=this.sortSiblingsByPriority(Fe,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",N.ROOT_FOCUS_KEY);return(re=(0,he.default)(O))===null||re===void 0?void 0:re.focusKey},be.prototype.getNextFocusKey=function(re){var Fe=this,O=this.focusableComponents[re];if(!O||this.nativeMode)return re;var M=(0,ce.default)(this.focusableComponents,function(de){return de.parentFocusKey===re&&de.focusable});if(M.length>0){var q=O.lastFocusedChildKey,K=O.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",K),q&&O.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);M.forEach(function(de){return Fe.updateLayout(de.focusKey)});var _e=function(de,Ke){var St=Ke===lt.default.LTR?function(it){var et=it.layout;return Math.abs(et.left)+Math.abs(et.top)}:function(it){var et=it.layout;return Math.abs(window.innerWidth-et.right)+Math.abs(et.top)},ot=(0,Ae.default)(de,St);return(0,he.default)(ot)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",_e),this.getNextFocusKey(_e)}return this.log("getNextFocusKey","targetFocusKey",re),re},be.prototype.addFocusable=function(re){var Fe=re.focusKey,O=re.node,M=re.parentFocusKey,q=re.onEnterPress,K=re.onEnterRelease,_e=re.onArrowPress,de=re.onFocus,Ke=re.onBlur,St=re.saveLastFocusedChild,ot=re.trackChildren,it=re.onUpdateFocus,et=re.onUpdateHasFocusedChild,ft=re.preferredChildFocusKey,yt=re.autoRestoreFocus,_t=re.forceFocus,Rt=re.focusable,pn=re.isFocusBoundary,Qt=re.focusBoundaryDirections;if(this.focusableComponents[Fe]={focusKey:Fe,node:O,parentFocusKey:M,onEnterPress:q,onEnterRelease:K,onArrowPress:_e,onFocus:de,onBlur:Ke,onUpdateFocus:it,onUpdateHasFocusedChild:et,saveLastFocusedChild:St,trackChildren:ot,preferredChildFocusKey:ft,focusable:Rt,isFocusBoundary:pn,focusBoundaryDirections:Qt,autoRestoreFocus:yt,forceFocus:_t,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:O},layoutUpdated:!1},O||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Fe]),!this.nativeMode){this.updateLayout(Fe),this.log("addFocusable","Component added: ",this.focusableComponents[Fe]),Fe===this.focusKey&&this.setFocus(ft||Fe);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===Fe){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},be.prototype.removeFocusable=function(re){var Fe=re.focusKey,O=this.focusableComponents[Fe];if(O){var M=O.parentFocusKey;(0,O.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",O),delete this.focusableComponents[Fe];var q=this.parentsHavingFocusedChild.includes(Fe);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(de){return de!==Fe});var K=this.focusableComponents[M],_e=Fe===this.focusKey;if(K&&K.lastFocusedChildKey===Fe&&(K.lastFocusedChildKey=null),this.nativeMode)return;(_e||q)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",_e?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},be.prototype.getNodeLayoutByFocusKey=function(re){var Fe=this.focusableComponents[re];return Fe?(this.updateLayout(Fe.focusKey),Fe.layout):null},be.prototype.setCurrentFocusedKey=function(re,Fe){if(this.isFocusableComponent(this.focusKey)&&re!==this.focusKey){var O=this.focusableComponents[this.focusKey];O.onUpdateFocus(!1),O.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onBlur",O)}if(this.focusKey=re,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onFocus",M)}},be.prototype.updateParentsHasFocusedChild=function(re,Fe){for(var O=this,M=[],q=this.focusableComponents[re];q;){var K=q.parentFocusKey,_e=this.focusableComponents[K];if(_e){var de=_e.focusKey;M.push(de)}q=_e}var Ke=(0,$.default)(this.parentsHavingFocusedChild,M),St=(0,$.default)(M,this.parentsHavingFocusedChild);(0,Ce.default)(Ke,function(ot){var it=O.focusableComponents[ot];it&&it.trackChildren&&it.onUpdateHasFocusedChild(!1),O.onIntermediateNodeBecameBlurred(ot,Fe)}),(0,Ce.default)(St,function(ot){var it=O.focusableComponents[ot];it&&it.trackChildren&&it.onUpdateHasFocusedChild(!0),O.onIntermediateNodeBecameFocused(ot,Fe)}),this.parentsHavingFocusedChild=M},be.prototype.updateParentsLastFocusedChild=function(re){for(var Fe=this.focusableComponents[re];Fe;){var O=Fe.parentFocusKey,M=this.focusableComponents[O];M&&this.saveLastFocusedChildKey(M,Fe.focusKey),Fe=M}},be.prototype.getKeyMap=function(){return this.keyMap},be.prototype.setKeyMap=function(re){this.keyMap=R(R({},this.getKeyMap()),function(Fe){var O={};return Object.entries(Fe).forEach(function(M){var q=M[0],K=M[1];O[q]=Array.isArray(K)?K:[K]}),O}(re))},be.prototype.isFocusableComponent=function(re){return!!this.focusableComponents[re]},be.prototype.isParticipatingFocusableComponent=function(re){return this.isFocusableComponent(re)&&this.focusableComponents[re].focusable},be.prototype.onIntermediateNodeBecameFocused=function(re,Fe){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onFocus(this.getNodeLayoutByFocusKey(re),Fe)},be.prototype.onIntermediateNodeBecameBlurred=function(re,Fe){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onBlur(this.getNodeLayoutByFocusKey(re),Fe)},be.prototype.pause=function(){this.paused=!0},be.prototype.resume=function(){this.paused=!1},be.prototype.setFocus=function(re,Fe){if(Fe===void 0&&(Fe={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",re),re&&re!==N.ROOT_FOCUS_KEY||(re=this.getForcedFocusKey());var O=this.getNextFocusKey(re);this.log("setFocus","newFocusKey",O),this.setCurrentFocusedKey(O,Fe),this.updateParentsHasFocusedChild(O,Fe),this.updateParentsLastFocusedChild(O)}},be.prototype.updateAllLayouts=function(){var re=this;this.enabled&&!this.nativeMode&&(0,Xe.default)(this.focusableComponents,function(Fe,O){re.updateLayout(O)})},be.prototype.updateLayout=function(re){var Fe=this.focusableComponents[re];if(Fe&&!this.nativeMode&&!Fe.layoutUpdated){var O=Fe.node,M=this.useGetBoundingClientRect?(0,qe.getBoundingClientRect)(O):(0,qe.default)(O);Fe.layout=R(R({},M),{node:O})}},be.prototype.updateFocusable=function(re,Fe){var O=Fe.node,M=Fe.preferredChildFocusKey,q=Fe.focusable,K=Fe.isFocusBoundary,_e=Fe.focusBoundaryDirections,de=Fe.onEnterPress,Ke=Fe.onEnterRelease,St=Fe.onArrowPress,ot=Fe.onFocus,it=Fe.onBlur;if(!this.nativeMode){var et=this.focusableComponents[re];et&&(et.preferredChildFocusKey=M,et.focusable=q,et.isFocusBoundary=K,et.focusBoundaryDirections=_e,et.onEnterPress=de,et.onEnterRelease=Ke,et.onArrowPress=St,et.onFocus=ot,et.onBlur=it,O&&(et.node=O))}},be.prototype.isNativeMode=function(){return this.nativeMode},be.prototype.doesFocusableExist=function(re){return!!this.focusableComponents[re]},be}();N.SpatialNavigation=new Ct,N.init=N.SpatialNavigation.init,N.setThrottle=N.SpatialNavigation.setThrottle,N.destroy=N.SpatialNavigation.destroy,N.setKeyMap=N.SpatialNavigation.setKeyMap,N.setFocus=N.SpatialNavigation.setFocus,N.navigateByDirection=N.SpatialNavigation.navigateByDirection,N.pause=N.SpatialNavigation.pause,N.resume=N.SpatialNavigation.resume,N.updateAllLayouts=N.SpatialNavigation.updateAllLayouts,N.getCurrentFocusKey=N.SpatialNavigation.getCurrentFocusKey,N.doesFocusableExist=N.SpatialNavigation.doesFocusableExist},35:function(U,N,_){var I=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(N,"__esModule",{value:!0});var R=I(_(119)),Z=typeof window<"u"&&window.document,z=Z?window.innerWidth:0,W=Z?window.innerHeight:0,X=function(){function le(x){Z&&(this.debugCtx=le.createCanvas("sn-debug","1010",x),this.layoutsCtx=le.createCanvas("sn-layouts","1000",x),this.writingDirection=x)}return le.createCanvas=function(x,$,ce){var oe=document.querySelector("#".concat(x))||document.createElement("canvas");oe.setAttribute("id",x),oe.setAttribute("dir",ce===R.default.LTR?"ltr":"rtl");var he=oe.getContext("2d");return oe.style.zIndex=$,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=z,oe.height=W,he},le.prototype.clear=function(){Z&&this.debugCtx.clearRect(0,0,z,W)},le.prototype.clearLayouts=function(){Z&&this.layoutsCtx.clearRect(0,0,z,W)},le.prototype.drawLayout=function(x,$,ce){if(Z){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(x.left,x.top,x.width,x.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===R.default.LTR?"left":"right",he=x[oe];this.layoutsCtx.fillText($,he,x.top+10),this.layoutsCtx.fillText(ce,he,x.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(he),he,x.top+40),this.layoutsCtx.fillText("top: ".concat(x.top),he,x.top+55)}},le.prototype.drawPoint=function(x,$,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),Z&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(x-oe/2,$-oe/2,oe,oe))},le}();N.default=X},119:function(U,N){var _;Object.defineProperty(N,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),N.default=_},607:function(U,N,_){var I=this&&this.__createBinding||(Object.create?function(Z,z,W,X){X===void 0&&(X=W);var le=Object.getOwnPropertyDescriptor(z,W);le&&!("get"in le?!z.__esModule:le.writable||le.configurable)||(le={enumerable:!0,get:function(){return z[W]}}),Object.defineProperty(Z,X,le)}:function(Z,z,W,X){X===void 0&&(X=W),Z[X]=z[W]}),R=this&&this.__exportStar||function(Z,z){for(var W in Z)W==="default"||Object.prototype.hasOwnProperty.call(z,W)||I(z,Z,W)};Object.defineProperty(N,"__esModule",{value:!0}),R(_(79),N),R(_(445),N),R(_(654),N)},964:function(U,N){Object.defineProperty(N,"__esModule",{value:!0}),N.getBoundingClientRect=void 0;var _=function(I){for(var R=I.offsetParent,Z=I.offsetHeight,z=I.offsetWidth,W=I.offsetLeft,X=I.offsetTop;R&&R.nodeType===1;)W+=R.offsetLeft-R.scrollLeft,X+=R.offsetTop-R.scrollTop,R=R.offsetParent;return{height:Z,left:W,top:X,width:z}};N.default=function(I){var R=I&&I.parentElement;if(I&&R){var Z=_(R),z=_(I),W=z.height,X=z.left,le=z.top,x=z.width;return{x:X-Z.left,y:le-Z.top,width:x,height:W,left:X,top:le,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},N.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var R=I.getBoundingClientRect();return{x:R.x,y:R.y,width:R.width,height:R.height,left:R.left,top:R.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,N,_){Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusContext=N.FocusContext=void 0;var I=_(156),R=_(654);N.FocusContext=(0,I.createContext)(R.ROOT_FOCUS_KEY),N.FocusContext.displayName="FocusContext",N.useFocusContext=function(){return(0,I.useContext)(N.FocusContext)}},79:function(U,N,_){var I=this&&this.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusable=void 0;var R=_(156),Z=I(_(604)),z=I(_(461)),W=_(654),X=_(445);N.useFocusable=function(le){var x=le===void 0?{}:le,$=x.focusable,ce=$===void 0||$,oe=x.saveLastFocusedChild,he=oe===void 0||oe,Ce=x.trackChildren,Xe=Ce!==void 0&&Ce,Ae=x.autoRestoreFocus,Ze=Ae===void 0||Ae,nt=x.forceFocus,lt=nt!==void 0&&nt,qe=x.isFocusBoundary,ut=qe!==void 0&&qe,At=x.focusBoundaryDirections,Oe=x.focusKey,Qe=x.preferredChildFocusKey,ct=x.onEnterPress,Xt=ct===void 0?Z.default:ct,Kt=x.onEnterRelease,Tt=Kt===void 0?Z.default:Kt,Ct=x.onArrowPress,be=Ct===void 0?function(){return!0}:Ct,re=x.onFocus,Fe=re===void 0?Z.default:re,O=x.onBlur,M=O===void 0?Z.default:O,q=x.extraProps,K=(0,R.useCallback)(function(Ot){Xt(q,Ot)},[Xt,q]),_e=(0,R.useCallback)(function(){Tt(q)},[Tt,q]),de=(0,R.useCallback)(function(Ot,Un){return be(Ot,q,Un)},[q,be]),Ke=(0,R.useCallback)(function(Ot,Un){Fe(Ot,q,Un)},[q,Fe]),St=(0,R.useCallback)(function(Ot,Un){M(Ot,q,Un)},[q,M]),ot=(0,R.useRef)(null),it=(0,R.useState)(!1),et=it[0],ft=it[1],yt=(0,R.useState)(!1),_t=yt[0],Rt=yt[1],pn=(0,X.useFocusContext)(),Qt=(0,R.useMemo)(function(){return Oe||(0,z.default)("sn:focusable-item-")},[Oe]),nn=(0,R.useCallback)(function(Ot){Ot===void 0&&(Ot={}),W.SpatialNavigation.setFocus(Qt,Ot)},[Qt]);return(0,R.useEffect)(function(){var Ot=ot.current;return W.SpatialNavigation.addFocusable({focusKey:Qt,node:Ot,parentFocusKey:pn,preferredChildFocusKey:Qe,onEnterPress:K,onEnterRelease:_e,onArrowPress:de,onFocus:Ke,onBlur:St,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),ft(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Rt(Un)},saveLastFocusedChild:he,trackChildren:Xe,isFocusBoundary:ut,focusBoundaryDirections:At,autoRestoreFocus:Ze,forceFocus:lt,focusable:ce}),function(){W.SpatialNavigation.removeFocusable({focusKey:Qt})}},[]),(0,R.useEffect)(function(){var Ot=ot.current;W.SpatialNavigation.updateFocusable(Qt,{node:Ot,preferredChildFocusKey:Qe,focusable:ce,isFocusBoundary:ut,focusBoundaryDirections:At,onEnterPress:K,onEnterRelease:_e,onArrowPress:de,onFocus:Ke,onBlur:St})},[Qt,Qe,ce,ut,At,K,_e,de,Ke,St]),{ref:ot,focusSelf:nn,focused:et,hasFocusedChild:_t,focusKey:Qt}}},150:function(U){U.exports=l},117:function(U){U.exports=f},747:function(U){U.exports=p},23:function(U){U.exports=S},842:function(U){U.exports=C},682:function(U){U.exports=g},784:function(U){U.exports=w},604:function(U){U.exports=F},432:function(U){U.exports=b},67:function(U){U.exports=y},461:function(U){U.exports=v},156:function(U){U.exports=D}},T={};return function U(N){var _=T[N];if(_!==void 0)return _.exports;var I=T[N]={exports:{}};return m[N].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(mU);var uu=mU.exports;function iV(r){return{all:r=r||new Map,on:function(o,l){var f=r.get(o);f?f.push(l):r.set(o,[l])},off:function(o,l){var f=r.get(o);f&&(l?f.splice(f.indexOf(l)>>>0,1):r.set(o,[]))},emit:function(o,l){var f=r.get(o);f&&f.slice().map(function(p){p(l)}),(f=r.get("*"))&&f.slice().map(function(p){p(o,l)})}}}class Cf{constructor(){this.emitter=iV()}emit(o,l){this.emitter.emit(o,l)}on(o,l){var f;(f=this.emitter)==null||f.on(o,l)}once(o,l){var p;const f=S=>{var C;(C=this.emitter)==null||C.off(o,f),l(S)};(p=this.emitter)==null||p.on(o,f)}off(o,l){var f;(f=this.emitter)==null||f.off(o,l)}onAny(o){this.emitter.on("*",o)}offAny(o){this.emitter.off("*",o)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var cf=256,FU=[],$k=256,zy;for(;cf--;)FU[cf]=(cf+256).toString(16).substring(1);function oV(r){var o=0,l=11;if(!zy||cf+l>$k*2)for(zy="",cf=0;o<$k;o++)zy+=FU[Math.random()*256|0];return zy.substring(cf,cf+++l)}const Xk={DEVICE_ID:"deviceId"};function bg(){const r=localStorage.getItem(Xk.DEVICE_ID);if(r)return r;const o=oV();return localStorage.setItem(Xk.DEVICE_ID,o),o}function aV(r){r=[...r].sort((l,f)=>l-f);const o=Math.floor(r.length/2);return r.length%2?r[o]:(r[o-1]+r[o])/2}var _a=(r=>(r.NEGOTIATE="negotiate",r.NEGOTIATE_TV="negotiate-tv",r.EVENT_STATUS="eventStatus",r.EVENT_META="eventMeta",r.GENERATE="generate",r.CONTENTFUL="contentful",r))(_a||{});class ag extends Error{constructor(o,l,f,p){super(),this._name=o,this._title=l,this._code=p,this._message=f}get toString(){var o,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((o=this._title.toUpperCase())!=null?o:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(o){this._name=o}get message(){return this._message}set message(o){this._message=o}get title(){return this._title}set title(o){this._title=o}get code(){return this._code}set code(o){this._code=o}}var dc=(r=>(r.TIZEN="tizen",r.WEBOS="webos",r.WEBZEROS="web0s",r.WEB="web",r))(dc||{});function hE(){const r=navigator.userAgent.toLowerCase();return r.includes("tizen")?"tizen":r.includes("webos")||r.includes("web0s")?"webos":"web"}const UU=hE()==="webos"?"LG TV":"Samsung TV",_h=bg(),sV="https://staging-api.gigset.io",uV="new",lV="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",cV="v203lmr0b15v",Db="setup-device-id",fV="_appContainer_1isul_1",dV="_pageContainer_1isul_53",hV="_input_1isul_67",pV="_ellipsis_1isul_1",gV={appContainer:fV,pageContainer:dV,input:hV,ellipsis:pV};class hf extends Error{constructor(o,l){const f=new.target.prototype;super("".concat(o,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=f}}class Pb extends Error{constructor(o="A timeout occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class ou extends Error{constructor(o="An abort occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class mV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=f}}class vV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=f}}class yV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=f}}class Qk extends Error{constructor(o){const l=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class EV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.innerErrors=l,this.__proto__=f}}class BU{constructor(o,l,f){this.statusCode=o,this.statusText=l,this.content=f}}class pE{get(o,l){return this.send({...l,method:"GET",url:o})}post(o,l){return this.send({...l,method:"POST",url:o})}delete(o,l){return this.send({...l,method:"DELETE",url:o})}getCookieString(o){return""}}var wn;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(wn||(wn={}));class Kg{constructor(){}log(o,l){}}Kg.instance=new Kg;const _V="8.0.0";class go{static isRequired(o,l){if(o==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(o,l){if(!o||o.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(o,l,f){if(!(o in l))throw new Error("Unknown ".concat(f," value: ").concat(o,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Vg(r,o){let l="";return _f(r)?(l="Binary data of length ".concat(r.byteLength),o&&(l+=". Content: '".concat(TV(r),"'"))):typeof r=="string"&&(l="String data of length ".concat(r.length),o&&(l+=". Content: '".concat(r,"'"))),l}function TV(r){const o=new Uint8Array(r);let l="";return o.forEach(f=>{const p=f<16?"0":"";l+="0x".concat(p).concat(f.toString(16)," ")}),l.substr(0,l.length-1)}function _f(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function jU(r,o,l,f,p,S){const C={},[g,w]=Th();C[g]=w,r.log(wn.Trace,"(".concat(o," transport) sending data. ").concat(Vg(p,S.logMessageContent),"."));const F=_f(p)?"arraybuffer":"text",b=await l.post(f,{content:p,headers:{...C,...S.headers},responseType:F,timeout:S.timeout,withCredentials:S.withCredentials});r.log(wn.Trace,"(".concat(o," transport) request complete. Response status: ").concat(b.statusCode,"."))}function SV(r){return r===void 0?new j0(wn.Information):r===null?Kg.instance:r.log!==void 0?r:new j0(r)}class wV{constructor(o,l){this._subject=o,this._observer=l}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class j0{constructor(o){this._minLevel=o,this.out=console}log(o,l){if(o>=this._minLevel){const f="[".concat(new Date().toISOString(),"] ").concat(wn[o],": ").concat(l);switch(o){case wn.Critical:case wn.Error:this.out.error(f);break;case wn.Warning:this.out.warn(f);break;case wn.Information:this.out.info(f);break;default:this.out.log(f);break}}}}function Th(){let r="X-SignalR-User-Agent";return Hi.isNode&&(r="User-Agent"),[r,AV(_V,IV(),bV(),CV())]}function AV(r,o,l,f){let p="Microsoft SignalR/";const S=r.split(".");return p+="".concat(S[0],".").concat(S[1]),p+=" (".concat(r,"; "),o&&o!==""?p+="".concat(o,"; "):p+="Unknown OS; ",p+="".concat(l),f?p+="; ".concat(f):p+="; Unknown Runtime Version",p+=")",p}function IV(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function CV(){if(Hi.isNode)return process.versions.node}function bV(){return Hi.isNode?"NodeJS":"Browser"}function Jk(r){return r.stack?r.stack:r.message?r.message:"".concat(r)}function RV(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function xV(r){return typeof fetch>"u"||Hi.isNode?(r._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?r._fetchType=require("node-fetch"):r._fetchType=fetch,r._fetchType=require("fetch-cookie")(r._fetchType,r._jar),!0):!1}function NV(r){return typeof AbortController>"u"?(r._abortControllerType=require("abort-controller"),!0):!1}function MV(){return require("ws")}function DV(){return require("eventsource")}class PV extends pE{constructor(o){super(),this._logger=o;const l={_fetchType:void 0,_jar:void 0};xV(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(RV()),this._abortControllerType=AbortController;const f={_abortControllerType:this._abortControllerType};NV(f)&&(this._abortControllerType=f._abortControllerType)}async send(o){if(o.abortSignal&&o.abortSignal.aborted)throw new ou;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const l=new this._abortControllerType;let f;o.abortSignal&&(o.abortSignal.onabort=()=>{l.abort(),f=new ou});let p=null;if(o.timeout){const w=o.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),f=new Pb},w)}o.content===""&&(o.content=void 0),o.content&&(o.headers=o.headers||{},_f(o.content)?o.headers["Content-Type"]="application/octet-stream":o.headers["Content-Type"]="text/plain;charset=UTF-8");let S;try{S=await this._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:o.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw f||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{p&&clearTimeout(p),o.abortSignal&&(o.abortSignal.onabort=null)}if(!S.ok){const w=await e3(S,"text");throw new hf(w||S.statusText,S.status)}const g=await e3(S,o.responseType);return new BU(S.status,S.statusText,g)}getCookieString(o){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(o,(f,p)=>l=p.join("; ")),l}}function e3(r,o){let l;switch(o){case"arraybuffer":l=r.arrayBuffer();break;case"text":l=r.text();break;case"blob":case"document":case"json":throw new Error("".concat(o," is not supported."));default:l=r.text();break}return l}class OV extends pE{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new ou):o.method?o.url?new Promise((l,f)=>{const p=new XMLHttpRequest;p.open(o.method,o.url,!0),p.withCredentials=o.withCredentials===void 0?!0:o.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.content===""&&(o.content=void 0),o.content&&(_f(o.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const S=o.headers;S&&Object.keys(S).forEach(C=>{p.setRequestHeader(C,S[C])}),o.responseType&&(p.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{p.abort(),f(new ou)}),o.timeout&&(p.timeout=o.timeout),p.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new BU(p.status,p.statusText,p.response||p.responseText)):f(new hf(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),f(new hf(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),f(new Pb)},p.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class LV extends pE{constructor(o){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new PV(o);else if(typeof XMLHttpRequest<"u")this._httpClient=new OV(o);else throw new Error("No usable HttpClient found.")}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new ou):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}class fs{static write(o){return"".concat(o).concat(fs.RecordSeparator)}static parse(o){if(o[o.length-1]!==fs.RecordSeparator)throw new Error("Message is incomplete.");const l=o.split(fs.RecordSeparator);return l.pop(),l}}fs.RecordSeparatorCode=30;fs.RecordSeparator=String.fromCharCode(fs.RecordSeparatorCode);class kV{writeHandshakeRequest(o){return fs.write(JSON.stringify(o))}parseHandshakeResponse(o){let l,f;if(_f(o)){const g=new Uint8Array(o),w=g.indexOf(fs.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,F))),f=g.byteLength>F?g.slice(F).buffer:null}else{const g=o,w=g.indexOf(fs.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const F=w+1;l=g.substring(0,F),f=g.length>F?g.substring(F):null}const p=fs.parse(l),S=JSON.parse(p[0]);if(S.type)throw new Error("Expected a handshake response from the server.");return[f,S]}}var Ar;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Ar||(Ar={}));class FV{constructor(){this.observers=[]}next(o){for(const l of this.observers)l.next(o)}error(o){for(const l of this.observers)l.error&&l.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new wV(this,o)}}class UV{constructor(o,l,f){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=l,this._bufferSize=f}async _send(o){const l=this._protocol.writeMessage(o);let f=Promise.resolve();if(this._isInvocationMessage(o)){this._totalMessageCount++;let p=()=>{},S=()=>{};_f(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(f=new Promise((C,g)=>{p=C,S=g})),this._messages.push(new BV(l,this._totalMessageCount,p,S))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await f}_ack(o){let l=-1;for(let f=0;f<this._messages.length;f++){const p=this._messages[f];if(p._id<=o.sequenceId)l=f,_f(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(o){if(o.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const o=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:o}));const l=this._messages;for(const f of l)await this._connection.send(f._message);this._reconnectInProgress=!1}_dispose(o){o!=null||(o=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(o)}_isInvocationMessage(o){switch(o.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(o){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class BV{constructor(o,l,f,p){this._message=o,this._id=l,this._resolver=f,this._rejector=p}}const jV=30*1e3,ZV=15*1e3,GV=1e5;var Fi;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(Fi||(Fi={}));class Ob{static create(o,l,f,p,S,C,g){return new Ob(o,l,f,p,S,C,g)}constructor(o,l,f,p,S,C,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},go.isRequired(o,"connection"),go.isRequired(l,"logger"),go.isRequired(f,"protocol"),this.serverTimeoutInMilliseconds=S!=null?S:jV,this.keepAliveIntervalInMilliseconds=C!=null?C:ZV,this._statefulReconnectBufferSize=g!=null?g:GV,this._logger=l,this._protocol=f,this.connection=o,this._reconnectPolicy=p,this._handshakeProtocol=new kV,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(o){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(o,"'.")),Promise.reject(o)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const o=new Promise((l,f)=>{this._handshakeResolver=l,this._handshakeRejecter=f});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const f={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(f)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await o,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new UV(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const o=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await o}catch(l){}}_stopInternal(o){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(o,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new ou("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(o){}}stream(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._createStreamInvocation(o,l,p);let C;const g=new FV;return g.cancelCallback=()=>{const w=this._createCancelInvocation(S.invocationId);return delete this._callbacks[S.invocationId],C.then(()=>this._sendWithProtocol(w))},this._callbacks[S.invocationId]=(w,F)=>{if(F){g.error(F);return}else w&&(w.type===Ar.Completion?w.error?g.error(new Error(w.error)):g.complete():g.next(w.item))},C=this._sendWithProtocol(S).catch(w=>{g.error(w),delete this._callbacks[S.invocationId]}),this._launchStreams(f,C),g}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._sendWithProtocol(this._createInvocation(o,l,!0,p));return this._launchStreams(f,S),S}invoke(o,...l){const[f,p]=this._replaceStreamingParams(l),S=this._createInvocation(o,l,!1,p);return new Promise((g,w)=>{this._callbacks[S.invocationId]=(b,y)=>{if(y){w(y);return}else b&&(b.type===Ar.Completion?b.error?w(new Error(b.error)):g(b.result):w(new Error("Unexpected message type: ".concat(b.type))))};const F=this._sendWithProtocol(S).catch(b=>{w(b),delete this._callbacks[S.invocationId]});this._launchStreams(f,F)})}on(o,l){!o||!l||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),this._methods[o].indexOf(l)===-1&&this._methods[o].push(l))}off(o,l){if(!o)return;o=o.toLowerCase();const f=this._methods[o];if(f)if(l){const p=f.indexOf(l);p!==-1&&(f.splice(p,1),f.length===0&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const l=this._protocol.parseMessages(o,this._logger);for(const f of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(f)))switch(f.type){case Ar.Invocation:this._invokeClientMethod(f);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[f.invocationId];if(p){f.type===Ar.Completion&&delete this._callbacks[f.invocationId];try{p(f)}catch(S){this._logger.log(wn.Error,"Stream callback threw error: ".concat(Jk(S)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=f.error?new Error("Server returned an error on close: "+f.error):void 0;f.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(f);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(f);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(f.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let l,f;try{[f,l]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(p){const S="Error parsing handshake response: "+p;this._logger.log(wn.Error,S);const C=new Error(S);throw this._handshakeRejecter(C),C}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const S=new Error(p);throw this._handshakeRejecter(S),S}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),f}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let o=this._nextKeepAlive-new Date().getTime();o<0&&(o=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(o){const l=o.target.toLowerCase(),f=this._methods[l];if(!f){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),o.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)));return}const p=f.slice(),S=!!o.invocationId;let C,g,w;for(const F of p)try{const b=C;C=await F.apply(this,o.arguments),S&&C&&b&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),g=void 0}catch(b){g=b,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(b,"'."))}w?await this._sendWithProtocol(w):S?(g?w=this._createCompletionMessage(o.invocationId,"".concat(g),null):C!==void 0?w=this._createCompletionMessage(o.invocationId,null,C):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),w=this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):C&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(o){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(o,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||o||new ou("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(o):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===Fi.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o!=null?o:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[o]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(o,"' threw error '").concat(l,"'."))}}}async _reconnect(o){const l=Date.now();let f=0,p=o!==void 0?o:new Error("Attempting to reconnect due to a unknown error."),S=this._getNextRetryDelay(f++,0,p);if(S===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(o);return}if(this._connectionState=Fi.Reconnecting,o?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(C=>C.apply(this,[o]))}catch(C){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(o,"' threw error '").concat(C,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;S!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(f," will start in ").concat(S," ms.")),await new Promise(C=>{this._reconnectDelayHandle=setTimeout(C,S)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(C=>C.apply(this,[this.connection.connectionId]))}catch(C){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(C,"'."))}return}catch(C){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(C,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=C instanceof Error?C:new Error(C.toString()),S=this._getNextRetryDelay(f++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(f," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(o,l,f){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:o,retryReason:f})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(o,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(o){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(f=>{const p=l[f];try{p(null,o)}catch(S){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(o,"' threw error: ").concat(Jk(S)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,l,f,p){if(f)return p.length!==0?{arguments:l,streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,target:o,type:Ar.Invocation};{const S=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:S.toString(),streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,invocationId:S.toString(),target:o,type:Ar.Invocation}}}_launchStreams(o,l){if(o.length!==0){l||(l=Promise.resolve());for(const f in o)o[f].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f)))},error:p=>{let S;p instanceof Error?S=p.message:p&&p.toString?S=p.toString():S="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f,S)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(f,p)))}})}}_replaceStreamingParams(o){const l=[],f=[];for(let p=0;p<o.length;p++){const S=o[p];if(this._isObservable(S)){const C=this._invocationId;this._invocationId++,l[C]=S,f.push(C.toString()),o.splice(p,1)}}return[l,f]}_isObservable(o){return o&&o.subscribe&&typeof o.subscribe=="function"}_createStreamInvocation(o,l,f){const p=this._invocationId;return this._invocationId++,f.length!==0?{arguments:l,invocationId:p.toString(),streamIds:f,target:o,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:o,type:Ar.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:Ar.CancelInvocation}}_createStreamItemMessage(o,l){return{invocationId:o,item:l,type:Ar.StreamItem}}_createCompletionMessage(o,l,f){return l?{error:l,invocationId:o,type:Ar.Completion}:{invocationId:o,result:f,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const qV=[0,2e3,1e4,3e4,null];class t3{constructor(o){this._retryDelays=o!==void 0?[...o,null]:qV}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}class pf{}pf.Authorization="Authorization";pf.Cookie="Cookie";class HV extends pE{constructor(o,l){super(),this._innerClient=o,this._accessTokenFactory=l}async send(o){let l=!0;this._accessTokenFactory&&(!this._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(o);const f=await this._innerClient.send(o);return l&&f.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(o),await this._innerClient.send(o)):f}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[pf.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&o.headers[pf.Authorization]&&delete o.headers[pf.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}var co;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(co||(co={}));var Jo;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(Jo||(Jo={}));let KV=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class n3{get pollAborted(){return this._pollAbort.aborted}constructor(o,l,f){this._httpClient=o,this._logger=l,this._pollAbort=new KV,this._options=f,this._running=!1,this.onreceive=null,this.onclose=null}async connect(o,l){if(go.isRequired(o,"url"),go.isRequired(l,"transferFormat"),go.isIn(l,Jo,"transferFormat"),this._url=o,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===Jo.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[f,p]=Th(),S={[f]:p,...this._options.headers},C={abortSignal:this._pollAbort.signal,headers:S,timeout:1e5,withCredentials:this._options.withCredentials};l===Jo.Binary&&(C.responseType="arraybuffer");const g="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const w=await this._httpClient.get(g,C);w.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new hf(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,C)}async _poll(o,l){try{for(;this._running;)try{const f="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(f,"."));const p=await this._httpClient.get(f,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new hf(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(Vg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(f){this._running?f instanceof Pb?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=f,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(f.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(o){return this._running?jU(this._logger,"LongPolling",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const o={},[l,f]=Th();o[l]=f;const p={headers:{...o,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let S;try{await this._httpClient.delete(this._url,p)}catch(C){S=C}S?S instanceof hf&&(S.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(S))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(wn.Trace,o),this.onclose(this._closeError)}}}class VV{constructor(o,l,f,p){this._httpClient=o,this._accessToken=l,this._logger=f,this._options=p,this.onreceive=null,this.onclose=null}async connect(o,l){return go.isRequired(o,"url"),go.isRequired(l,"transferFormat"),go.isIn(l,Jo,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=o,this._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((f,p)=>{let S=!1;if(l!==Jo.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let C;if(Hi.isBrowser||Hi.isWebWorker)C=new this._options.EventSource(o,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(o),w={};w.Cookie=g;const[F,b]=Th();w[F]=b,C=new this._options.EventSource(o,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{C.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(Vg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(w){this._close(w);return}},C.onerror=g=>{S?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},C.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=C,S=!0,f()}}catch(g){p(g);return}})}async send(o){return this._eventSource?jU(this._logger,"SSE",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class zV{constructor(o,l,f,p,S,C){this._logger=f,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=S,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=C}async connect(o,l){go.isRequired(o,"url"),go.isRequired(l,"transferFormat"),go.isIn(l,Jo,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let f;return this._accessTokenFactory&&(f=await this._accessTokenFactory()),new Promise((p,S)=>{o=o.replace(/^http/,"ws");let C;const g=this._httpClient.getCookieString(o);let w=!1;if(Hi.isNode||Hi.isReactNative){const F={},[b,y]=Th();F[b]=y,f&&(F[pf.Authorization]="Bearer ".concat(f)),g&&(F[pf.Cookie]=g),C=new this._webSocketConstructor(o,void 0,{headers:{...F,...this._headers}})}else f&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(f)));C||(C=new this._webSocketConstructor(o)),l===Jo.Binary&&(C.binaryType="arraybuffer"),C.onopen=F=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(o,".")),this._webSocket=C,w=!0,p()},C.onerror=F=>{let b=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?b=F.error:b="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(b,"."))},C.onmessage=F=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(Vg(F.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(F.data)}catch(b){this._close(b);return}},C.onclose=F=>{if(w)this._close(F);else{let b=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?b=F.error:b="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",S(new Error(b))}}})}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(Vg(o,this._logMessageContent),".")),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(o)&&(o.wasClean===!1||o.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(o.code," (").concat(o.reason||"no reason given",")."))):o instanceof Error?this.onclose(o):this.onclose())}_isCloseEvent(o){return o&&typeof o.wasClean=="boolean"&&typeof o.code=="number"}}const r3=100;class YV{constructor(o,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,go.isRequired(o,"url"),this._logger=SV(l.logger),this.baseUrl=this._resolveUrl(o),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let f=null,p=null;Hi.isNode&&typeof require<"u"&&(f=MV(),p=DV()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&f&&(l.WebSocket=f),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new HV(l.httpClient||new LV(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(o){if(o=o||Jo.Binary,go.isIn(o,Jo,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat(Jo[o],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(o),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new ou(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new ou(l))}this._connectionStarted=!0}send(o){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Lb(this.transport)),this._sendQueue.send(o))}async stop(o){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(o),await this._stopPromise}async _stopInternal(o){this._stopError=o;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(o){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===co.WebSockets)this.transport=this._constructTransport(co.WebSockets),await this._startTransport(l,o);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let f=null,p=0;do{if(f=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ou("The connection was stopped during negotiation.");if(f.error)throw new Error(f.error);if(f.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(f.url&&(l=f.url),f.accessToken){const S=f.accessToken;this._accessTokenFactory=()=>S,this._httpClient._accessToken=S,this._httpClient._accessTokenFactory=void 0}p++}while(f.url&&p<r3);if(p===r3&&f.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,f,o)}this.transport instanceof n3&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(f){return this._logger.log(wn.Error,"Failed to start the connection: "+f),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(f)}}async _getNegotiationResponse(o){const l={},[f,p]=Th();l[f]=p;const S=this._resolveNegotiateUrl(o);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(S,"."));try{const C=await this._httpClient.post(S,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(C.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(C.statusCode,"'")));const g=JSON.parse(C.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Qk("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(C){let g="Failed to complete negotiation with the server: "+C;return C instanceof hf&&C.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new Qk(g))}}_createConnectUrl(o,l){return l?o+(o.indexOf("?")===-1?"?":"&")+"id=".concat(l):o}async _createTransport(o,l,f,p){let S=this._createConnectUrl(o,f.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(S,p),this.connectionId=f.connectionId;return}const C=[],g=f.availableTransports||[];let w=f;for(const F of g){const b=this._resolveTransportOrError(F,l,p,(w==null?void 0:w.useStatefulReconnect)===!0);if(b instanceof Error)C.push("".concat(F.transport," failed:")),C.push(b);else if(this._isITransport(b)){if(this.transport=b,!w){try{w=await this._getNegotiationResponse(o)}catch(y){return Promise.reject(y)}S=this._createConnectUrl(o,w.connectionToken)}try{await this._startTransport(S,p),this.connectionId=w.connectionId;return}catch(y){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(F.transport,"': ").concat(y)),w=void 0,C.push(new yV("".concat(F.transport," failed: ").concat(y),co[F.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,v),Promise.reject(new ou(v))}}}}return C.length>0?Promise.reject(new EV("Unable to connect to the server with any of the available transports. ".concat(C.join(" ")),C)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(o){switch(o){case co.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new zV(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case co.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new VV(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case co.LongPolling:return new n3(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(o,"."))}}_startTransport(o,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async f=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(o,l),await this.features.resend()}catch(S){p=!0}else{this._stopConnection(f);return}p&&this._stopConnection(f)}:this.transport.onclose=f=>this._stopConnection(f),this.transport.connect(o,l)}_resolveTransportOrError(o,l,f,p){const S=co[o.transport];if(S==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(o.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(o.transport,"' because it is not supported by this client."));if(WV(l,S))if(o.transferFormats.map(g=>Jo[g]).indexOf(f)>=0){if(S===co.WebSockets&&!this._options.WebSocket||S===co.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(co[S],"' because it is not supported in your environment.'")),new mV("'".concat(co[S],"' is not supported in your environment."),S);this._logger.log(wn.Debug,"Selecting transport '".concat(co[S],"'."));try{return this.features.reconnect=S===co.WebSockets?p:void 0,this._constructTransport(S)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(co[S],"' because it does not support the requested transfer format '").concat(Jo[f],"'.")),new Error("'".concat(co[S],"' does not support ").concat(Jo[f],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(co[S],"' because it was disabled by the client.")),new vV("'".concat(co[S],"' is disabled by the client."),S)}_isITransport(o){return o&&typeof o=="object"&&"connect"in o}_stopConnection(o){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(o,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(o,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),o?this._logger.log(wn.Error,"Connection disconnected with error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(o,") threw error '").concat(l,"'."))}}}_resolveUrl(o){if(o.lastIndexOf("https://",0)===0||o.lastIndexOf("http://",0)===0)return o;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(o,"'."));const l=window.document.createElement("a");return l.href=o,this._logger.log(wn.Information,"Normalizing '".concat(o,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(o){const l=new URL(o);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const f=new URLSearchParams(l.searchParams);return f.has("negotiateVersion")||f.append("negotiateVersion",this._negotiateVersion.toString()),f.has("useStatefulReconnect")?f.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&f.append("useStatefulReconnect","true"),l.search=f.toString(),l.toString()}}function WV(r,o){return!r||(o&r)!==0}class Lb{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new Yy,this._transportResult=new Yy,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new Yy),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof o));this._buffer.push(o),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Yy;const o=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):Lb._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),o.resolve()}catch(f){o.reject(f)}}}static _concatBuffers(o){const l=o.map(S=>S.byteLength).reduce((S,C)=>S+C),f=new Uint8Array(l);let p=0;for(const S of o)f.set(new Uint8Array(S),p),p+=S.byteLength;return f.buffer}}class Yy{constructor(){this.promise=new Promise((o,l)=>[this._resolver,this._rejecter]=[o,l])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}const $V="json";class XV{constructor(){this.name=$V,this.version=2,this.transferFormat=Jo.Text}parseMessages(o,l){if(typeof o!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];l===null&&(l=Kg.instance);const f=fs.parse(o),p=[];for(const S of f){const C=JSON.parse(S);if(typeof C.type!="number")throw new Error("Invalid payload.");switch(C.type){case Ar.Invocation:this._isInvocationMessage(C);break;case Ar.StreamItem:this._isStreamItemMessage(C);break;case Ar.Completion:this._isCompletionMessage(C);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(C);break;case Ar.Sequence:this._isSequenceMessage(C);break;default:l.log(wn.Information,"Unknown message type '"+C.type+"' ignored.");continue}p.push(C)}return p}writeMessage(o){return fs.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),o.invocationId!==void 0&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),o.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,l){if(typeof o!="string"||o==="")throw new Error(l)}}const QV={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function JV(r){const o=QV[r.toLowerCase()];if(typeof o<"u")return o;throw new Error("Unknown log level: ".concat(r))}class i3{configureLogging(o){if(go.isRequired(o,"logging"),ez(o))this.logger=o;else if(typeof o=="string"){const l=JV(o);this.logger=new j0(l)}else this.logger=new j0(o);return this}withUrl(o,l){return go.isRequired(o,"url"),go.isNotEmpty(o,"url"),this.url=o,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(o){return go.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new t3(o):this.reconnectPolicy=o:this.reconnectPolicy=new t3,this}withServerTimeout(o){return go.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return go.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o==null?void 0:o.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(o.logger===void 0&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new YV(this.url,o);return Ob.create(l,this.logger||Kg.instance,this.protocol||new XV,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function ez(r){return r.log!==void 0}class tz extends Cf{constructor(o){var l;super(),this.options=o,this.hubConnection=o.hubConnection,this.updateIntervalFrequency=(l=o.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const o=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-o.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const o=this,l=12,f=1e4,p=20;let S;return await new Promise((C,g)=>{var T;const w=[];let F=0,b,y;function v(){var U;y=Date.now(),(U=o.hubConnection)==null||U.invoke("echo"),b=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},f)}function D(U){S=U,clearTimeout(b),w.push(Date.now()-y),F++,F<l?setTimeout(v,p):m()}(T=o.hubConnection)==null||T.on("echo",D);function m(){var N;if((N=o.hubConnection)==null||N.off("echo",D),S===void 0){g(new Error("Server timestamp is undefined"));return}let U;o.options.roundtripCalcStrategy==="mean"?U=w.reduce((_,I)=>_+I)/w.length:U=aV(w),C(new Date(S+U/2))}v()})}destroy(){clearTimeout(this.timeoutInstance)}}const Js={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},oC={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class nz extends Cf{constructor({deviceId:o,debug:l}){super(),this.hubConnection=null,this.globalHubConnection=null,this.connected=!1,this.serverTimeService=null,this.state=oC.IDLE,this.deviceId=o,this.debugLogging=l!=null?l:!1}setupTimeService(){this.serverTimeService=new tz({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",o=>{this.emit("serverTimeOffsetUpdate",o)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var o;console.log("SignalR: disconnect",Js.CLIENT_DISCONNECT,{deviceId:this.deviceId}),this.connected=!1,await((o=this.hubConnection)==null?void 0:o.invoke(Js.CLIENT_DISCONNECT))}globalDisconnect(){var o;console.log("Disconnecting global signalR...",this.deviceId),(o=this.globalHubConnection)==null||o.invoke(Js.CLIENT_DISCONNECT)}connect({url:o,accessToken:l,groupName:f}){var p;this.groupName=f,this.hubConnection=new i3().withUrl(o,{accessTokenFactory:()=>l,transport:co.WebSockets}).withAutomaticReconnect().configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(p=this.hubConnection)==null||p.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.connected=!0,this.join()}).catch(S=>{console.error("Connection failed:",S)})}async globalConnect({url:o,accessToken:l}){return new Promise((f,p)=>{this.globalHubConnection=new i3().withUrl(o,{accessTokenFactory:()=>l,transport:co.WebSockets}).withAutomaticReconnect().build(),this.globalHubConnection.start().catch(S=>{console.error("Global signalR connection failed:",S),p()}),this.globalHubConnection.on(Js.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:S,ticketCode:C})=>{localStorage.setItem("ticketCode",C),f({ticketCode:C,scanTvDeviceId:S})})})}connectEventHandlers(){var o,l,f,p,S,C;(o=this.hubConnection)==null||o.on(Js.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(Js.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.on(Js.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on(Js.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(S=this.hubConnection)==null||S.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(C=this.hubConnection)==null||C.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var o,l,f,p;(o=this.hubConnection)==null||o.off(Js.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(Js.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.off(Js.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),(p=this.serverTimeService)==null||p.destroy(),super.destroy()}onReceiveGroupCommand(o){var l,f,p,S,C;switch(console.log("onReceiveGroupCommand",o),o.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(o.value.startDate)}),((l=o.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(f=o.value.rateClockState)==null?void 0:f.reference,start:(p=o.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(S=o.value.rateClockState)==null?void 0:S.reference,start:(C=o.value.rateClockState)==null?void 0:C.start});break;case"cast":this.emit("cast",{index:o.value});break;case"prepareCast":this.emit("prepareCast",{index:o.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(o){switch(console.log("onReceiveGlobalCommand",o),o.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(o){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[o]}))}onStateUpdate(o){switch(this.state=o.state.$type,o.state.$type){case oC.CONNECTED_STATE:if(!o.state.sessionId)return;this.emit("connected",{sessionId:o.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(o){console.log("SetupStatusUpdate: ",o),this.emit("setupStatusUpdate",{deviceLists:o})}}async function Ch(r,o,l){var f;try{const p=await fetch(r,o);switch(p.status){case 401:throw new ag(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new ag(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const S=await p.json();if(!p.ok)throw new ag(l==null?void 0:l.name,(f=S.sys)==null?void 0:f.id,S.message,p.status);return S}catch(p){throw p instanceof ag?p:new ag(l.name,"Network Error",l.message||"Could not make the request")}}var aC={exports:{}};(function(r,o){(function(l,f){var p="1.0.38",S="",C="?",g="function",w="undefined",F="object",b="string",y="major",v="model",D="name",m="type",T="vendor",U="version",N="architecture",_="console",I="mobile",R="tablet",Z="smarttv",z="wearable",W="embedded",X=500,le="Amazon",x="Apple",$="ASUS",ce="BlackBerry",oe="Browser",he="Chrome",Ce="Edge",Xe="Firefox",Ae="Google",Ze="Huawei",nt="LG",lt="Microsoft",qe="Motorola",ut="Opera",At="Samsung",Oe="Sharp",Qe="Sony",ct="Xiaomi",Xt="Zebra",Kt="Facebook",Tt="Chromium OS",Ct="Mac OS",be=function(ft,yt){var _t={};for(var Rt in ft)yt[Rt]&&yt[Rt].length%2===0?_t[Rt]=yt[Rt].concat(ft[Rt]):_t[Rt]=ft[Rt];return _t},re=function(ft){for(var yt={},_t=0;_t<ft.length;_t++)yt[ft[_t].toUpperCase()]=ft[_t];return yt},Fe=function(ft,yt){return typeof ft===b?O(yt).indexOf(O(ft))!==-1:!1},O=function(ft){return ft.toLowerCase()},M=function(ft){return typeof ft===b?ft.replace(/[^\d\.]/g,S).split(".")[0]:f},q=function(ft,yt){if(typeof ft===b)return ft=ft.replace(/^\s\s*/,S),typeof yt===w?ft:ft.substring(0,X)},K=function(ft,yt){for(var _t=0,Rt,pn,Qt,nn,Ot,Un;_t<yt.length&&!Ot;){var gr=yt[_t],Pr=yt[_t+1];for(Rt=pn=0;Rt<gr.length&&!Ot&&gr[Rt];)if(Ot=gr[Rt++].exec(ft),Ot)for(Qt=0;Qt<Pr.length;Qt++)Un=Ot[++pn],nn=Pr[Qt],typeof nn===F&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):f:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):f:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):f):this[nn]=Un||f;_t+=2}},_e=function(ft,yt){for(var _t in yt)if(typeof yt[_t]===F&&yt[_t].length>0){for(var Rt=0;Rt<yt[_t].length;Rt++)if(Fe(yt[_t][Rt],ft))return _t===C?f:_t}else if(Fe(yt[_t],ft))return _t===C?f:_t;return ft},de={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},St={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[D,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[D,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[D,U],[/opios[\/ ]+([\w\.]+)/i],[U,[D,ut+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[D,ut+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[D,ut]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[D,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[D,U],[/\bddg\/([\w\.]+)/i],[U,[D,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[D,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[D,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[D,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[D,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[D,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[D,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[D,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[D,Xe+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[D,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[D,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[D,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[D,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[D,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[D,Xe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[D,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[D,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[D,At+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[D,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[D,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[D,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[D,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[D],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[D,Kt],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[D,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[D,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[D,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[D,he+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[D,he+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[D,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[D,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[D,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,D],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[D,[U,_e,de]],[/(webkit|khtml)\/([\w\.]+)/i],[D,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[D,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[D,Xe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[D,U],[/(cobalt)\/([\w\.]+)/i],[D,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[N,"amd64"]],[/(ia32(?=;))/i],[[N,O]],[/((?:i[346]|x)86)[;\)]/i],[[N,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[N,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[N,"armhf"]],[/windows (ce|mobile); ppc;/i],[[N,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[N,/ower/,S,O]],[/(sun4\w)[;\)]/i],[[N,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[N,O]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[T,At],[m,R]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[T,At],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[T,x],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[T,x],[m,R]],[/(macintosh);/i],[v,[T,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[T,Oe],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[T,Ze],[m,R]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[T,Ze],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,R]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[v,[T,"OPPO"],[m,R]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[T,qe],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[T,qe],[m,R]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[T,nt],[m,R]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[T,nt],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[T,"Lenovo"],[m,R]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[v,[T,Ae],[m,R]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[T,Ae],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[T,Qe],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[T,Qe],[m,R]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[T,le],[m,R]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[T,le],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[v,T,[m,R]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[T,ce],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[T,$],[m,R]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[T,$],[m,I]],[/(nexus 9)/i],[v,[T,"HTC"],[m,R]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[v,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[T,"Acer"],[m,R]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,v,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,v,[m,R]],[/(surface duo)/i],[v,[T,lt],[m,R]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[v,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[v,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[v,[T,"RCA"],[m,R]],[/\b(venue[\d ]{2,7}) b/i],[v,[T,"Dell"],[m,R]],[/\b(q(?:mv|ta)\w+) b/i],[v,[T,"Verizon"],[m,R]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[T,"Barnes & Noble"],[m,R]],[/\b(tm\d{3}\w+) b/i],[v,[T,"NuVision"],[m,R]],[/\b(k88) b/i],[v,[T,"ZTE"],[m,R]],[/\b(nx\d{3}j) b/i],[v,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[v,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[v,[T,"Swiss"],[m,R]],[/\b((zeki)?tb.*\b) b/i],[v,[T,"Zeki"],[m,R]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],v,[m,R]],[/\b(ns-?\w{0,9}) b/i],[v,[T,"Insignia"],[m,R]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[T,"NextBook"],[m,R]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],v,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],v,[m,I]],[/\b(ph-1) /i],[v,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[T,"Envizen"],[m,R]],[/\b(trio[-\w\. ]+) b/i],[v,[T,"MachSpeed"],[m,R]],[/\btu_(1491) b/i],[v,[T,"Rotor"],[m,R]],[/(shield[\w ]+) b/i],[v,[T,"Nvidia"],[m,R]],[/(sprint) (\w+)/i],[T,v,[m,I]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[T,lt],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[T,Xt],[m,R]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[T,Xt],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,Z]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[T,At],[m,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,nt],[m,Z]],[/(apple) ?tv/i],[T,[v,x+" TV"],[m,Z]],[/crkey/i],[[v,he+"cast"],[T,Ae],[m,Z]],[/droid.+aft(\w+)( bui|\))/i],[v,[T,le],[m,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[T,Oe],[m,Z]],[/(bravia[\w ]+)( bui|\))/i],[v,[T,Qe],[m,Z]],[/(mitv-\w{5}) bui/i],[v,[T,ct],[m,Z]],[/Hbbtv.*(technisat) (.*);/i],[T,v,[m,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[v,q],[m,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,Z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,v,[m,_]],[/droid.+; (shield) bui/i],[v,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[v,[T,Qe],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[T,lt],[m,_]],[/((pebble))app/i],[T,v,[m,z]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[T,x],[m,z]],[/droid.+; (glass) \d/i],[v,[T,Ae],[m,z]],[/droid.+; (wt63?0{2,3})\)/i],[v,[T,Xt],[m,z]],[/(quest( \d| pro)?)/i],[v,[T,Kt],[m,z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,W]],[/(aeobc)\b/i],[v,[T,le],[m,W]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[m,R]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,R]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[D,Ce+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[D,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[D,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,D]],os:[[/microsoft (windows) (vista|xp)/i],[D,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[D,[U,_e,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,_e,Ke],[D,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[D,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[D,Ct],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,D],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[D,U],[/\(bb(10);/i],[U,[D,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[D,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[D,Xe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[D,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[D,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[D,he+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[D,Tt],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[D,U],[/(sunos) ?([\w\.\d]*)/i],[[D,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[D,U]]},ot=function(ft,yt){if(typeof ft===F&&(yt=ft,ft=f),!(this instanceof ot))return new ot(ft,yt).getResult();var _t=typeof l!==w&&l.navigator?l.navigator:f,Rt=ft||(_t&&_t.userAgent?_t.userAgent:S),pn=_t&&_t.userAgentData?_t.userAgentData:f,Qt=yt?be(St,yt):St,nn=_t&&_t.userAgent==Rt;return this.getBrowser=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Rt,Qt.browser),Ot[y]=M(Ot[U]),nn&&_t&&_t.brave&&typeof _t.brave.isBrave==g&&(Ot[D]="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot[N]=f,K.call(Ot,Rt,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[T]=f,Ot[v]=f,Ot[m]=f,K.call(Ot,Rt,Qt.device),nn&&!Ot[m]&&pn&&pn.mobile&&(Ot[m]=I),nn&&Ot[v]=="Macintosh"&&_t&&typeof _t.standalone!==w&&_t.maxTouchPoints&&_t.maxTouchPoints>2&&(Ot[v]="iPad",Ot[m]=R),Ot},this.getEngine=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Rt,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Rt,Qt.os),nn&&!Ot[D]&&pn&&pn.platform&&pn.platform!="Unknown"&&(Ot[D]=pn.platform.replace(/chrome os/i,Tt).replace(/macos/i,Ct)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Rt},this.setUA=function(Ot){return Rt=typeof Ot===b&&Ot.length>X?q(Ot,X):Ot,this},this.setUA(Rt),this};ot.VERSION=p,ot.BROWSER=re([D,U,y]),ot.CPU=re([N]),ot.DEVICE=re([v,T,m,_,I,Z,R,z,W]),ot.ENGINE=ot.OS=re([D,U]),r.exports&&(o=r.exports=ot),o.UAParser=ot;var it=typeof l!==w&&(l.jQuery||l.Zepto);if(it&&!it.ua){var et=new ot;it.ua=et.getResult(),it.ua.get=function(){return et.getUA()},it.ua.set=function(ft){et.setUA(ft);var yt=et.getResult();for(var _t in yt)it.ua[_t]=yt[_t]}}})(typeof window=="object"?window:iu)})(aC,aC.exports);var rz=aC.exports;const o3=new rz.UAParser;function iz(r){const o=o3.getOS(),l=o3.getBrowser();return"Gigset/".concat(r," (").concat(o.name," ").concat(o.version,"; ").concat(l.name," ").concat(l.version,")")}function zg({sessionId:r,appVersion:o,apiVersion:l}){const f={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":iz(o),"Api-version":l!=null?l:"v1"};return r&&(f.Session=r),f}async function oz({deviceId:r,appVersion:o,baseUrl:l}){const f={deviceOsVersion:window.navigator.userAgent,deviceName:UU,deviceId:r};return(await Ch)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(f),headers:zg({appVersion:o})},{name:_a.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function az({deviceId:r,ticketCode:o,scanTvDeviceId:l,appVersion:f,baseUrl:p,ticketPrefix:S}){let C=p;S&&(C="".concat(p));const g={ticketCode:o,deviceOsVersion:window.navigator.userAgent,deviceName:UU,deviceId:r,scanTvDeviceId:l};return(await Ch)("".concat(C,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:zg({appVersion:f})},{name:_a.NEGOTIATE,message:"could not fetch negotiate data"})}async function sz({sessionId:r,appVersion:o,baseUrl:l,ticketPrefix:f,ticketCode:p}){let S=l;f&&(S="".concat(l,"/").concat(f));const C=await Ch("".concat(S,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:zg({sessionId:r,appVersion:o})},{name:_a.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(C.timelineUrl).concat(C.queryParameters),{method:"GET",headers:zg({sessionId:r,appVersion:o})}).then(async w=>await w.json()),queryParameters:C.queryParameters,distributionUrl:C.distributionUrl}}async function uz({sessionId:r,appVersion:o,baseUrl:l,ticketCode:f}){return(await Ch)("".concat(l,"/static-api/event/").concat(f,"/status"),{method:"GET",headers:zg({sessionId:r,appVersion:o})},{name:_a.EVENT_STATUS,message:"failed to get event status data"})}function lz(r){return"".concat(r,"/timeline-api/drm/license?drm=widevine")}var of=(r=>(r.JUMPSPOT="jumpspot",r.FOLLOW="follow",r))(of||{});function kb(r){return[...r.places.flatMap((o,l)=>o.jumpSpots.map(f=>({camera:f.camera,title:f.title,type:"jumpspot",placeIndex:l,mapPosition:o.mapPosition,mapScale:o.mapScale,placeTitle:o.title}))),...r.follows.map(o=>({camera:o.camera,title:o.title,type:"follow",mapPosition:o.mapPositions}))].map((o,l)=>({...o,index:l}))}function gE(r,o){return kb(r).filter(f=>{const p=mi(f.camera.span.time,r.frameRate),S=mi(f.camera.span.time,r.frameRate)+mi(f.camera.span.duration,r.frameRate);return p<=o&&S>=o})}function ZU(r,o,l,f){const p=gE(r,o+l+2);if(!p.length)return;if(f){const g=(f==null?void 0:f.placeIndex)!==void 0&&p.find(w=>w.type==="jumpspot"&&w.placeIndex===(f==null?void 0:f.placeIndex));if(g)return g}const S=p.find(g=>g.type==="jumpspot");if(S)return S;const C=p.find(g=>g.type==="follow");if(C)return C}function cz(r){const o=kb(r),l=r.frameRate;return o.sort((f,p)=>{const S=mi(f.camera.span.time,l)+mi(f.camera.span.duration,l);return mi(p.camera.span.time,l)+mi(p.camera.span.duration,l)-S}),o[0]}function mi(r,o){if(!r)return 0;const[l,f,p,S]=r.split(":").map(Number),C=l*60*60,g=f*60;if(o){const w=S/o;return C+g+p+w}else return C+g+p}function sC(r,o,l){return gE(o,l.getExpectedPositionInSeconds()).find(f=>f.index===r)}function uC(r,o){return kb(o).find(f=>f.camera.cameraID===r)}const fz=r=>{if(typeof r=="string")return"String!";if(typeof r=="number")return"Int";if(typeof r=="boolean")return"Boolean";if(typeof r=="object"&&"OR"in r)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof r))};function GU(r,o,l){const f=r.includes("staging")||r.includes("qa"),p={...l,preview:f},C=(Array.isArray(o)?o[0]:o).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([F,b])=>"$".concat(F,": ").concat(fz(b))).join(", "),w="query(".concat(g,")").concat(C);return JSON.stringify({query:w,variables:p})}const qU=r=>"https://graphql.contentful.com/content/v1/spaces/".concat(r,"/environments/master");function HU(r,o){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:r}}const dz=(r,o)=>GU(o,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:r});async function hz(r,o,l,f){var C,g;const p=dz(r.toUpperCase(),o),S=await Ch(qU(f),HU(p,l),{name:_a.EVENT_META,message:"Could not fetch event meta."});return(g=(C=S==null?void 0:S.data)==null?void 0:C.eventCollection.items)==null?void 0:g[0]}function pz(r,o){const l=r.reduce((f,p)=>(f.OR.push({slug:p}),f),{OR:[]});return GU(o,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function gz(r,o,l){var S,C;const f=pz(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],r);return(C=(S=(await Ch(qU(l),HU(f,o),{name:_a.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:S.resourceSetCollection)==null?void 0:C.items}const a3=.4,s3=.2;class mz{constructor(){switch(this._algorithmArray=[l=>{const f=this._videoElement;if(f){const p=l-f.currentTime-this._offset+.14;if((p>s3||p<-s3)&&!this._switchingInProgress)if(this._switchingInProgress=!0,setTimeout(()=>{this._switchingInProgress=!1},2e3),p>1)f.currentTime=f.currentTime+p+1.8;else{const S=p/2;f.playbackRate=Math.sign(p)===1?2:.5,setTimeout(()=>{f.playbackRate=1},Math.abs(S)*2200)}}},l=>{if(this._videoElement&&!this._switchingInProgress){const f=this._videoElement,p=l-f.currentTime-this._offset+.9;(p>a3||p<-a3)&&!this._switchingInProgress&&(this._switchingInProgress=!0,f.currentTime=f.currentTime+p,setTimeout(()=>{this._switchingInProgress=!1},3e3))}}],this._offset=0,this._switchingInProgress=!1,hE()){case dc.TIZEN:this._algorithm=0;break;case dc.WEBOS:this._algorithm=1;break;default:this._algorithm=0;break}}connectMediaElement(o,l=0){this._videoElement=o,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(o){this._algorithmArray[this._algorithm](o)}destroy(){}}class vz extends Cf{constructor(o){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new mz,this.state="idle",this.startTime=o,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const o=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&o&&o>Date.now()}set loading(o){this.emit("playerLoadingState",o)}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const o=this._timelineData.frameRate,l=cz(this._timelineData);return this.adjustedStartTime+(mi(l.camera.span.time,o)+mi(l.camera.span.duration,o))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(o){this._timelineData=o}pausePlayStream(o,l,f){if(o==="pause"&&!this.isPaused)this.isPaused=!0;else if(o==="play"){if(l&&f){const p=new Date(l).getTime()/1e3,S=new Date(f).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-S}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const o=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(o)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(o,l=!1){this.startTime=o,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.adjustedStartTime<Date.now()&&this.state!=="started"?(this.emit("fetchTimeline",void 0),this.onStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(o){this.serverTimeOffset=o,this.emit("startTimeUpdated",void 0),this.preparePlayback()}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class yz extends Cf{constructor(o,l,f){super(),this.eventClock=o,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=f!=null?f:2}updateTimelineData(o){this.timelineData=o}updatePlaying(o){var f,p,S;let l=!1;if(this.timelineData){const C=this.timelineData.frameRate,g=(S=(p=(f=o.camera.attentions)==null?void 0:f.filter(w=>w.scope==="global"))==null?void 0:p.sort((w,F)=>mi(w.time)-mi(F.time)))!=null?S:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const F=this.eventClock.getExpectedPositionInSeconds()-mi(o.camera.span.time,C),b=mi(o.camera.span.duration,C)-F;if(g.length){const y=g.find(D=>F<mi(D.time)),v=y?mi(y.time)-F:0;v>0&&v<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},v))}b<=this.nearEndThreshold+1&&b>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(b-this.nearEndThreshold)*1e3):b<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),b<=this.transitionThreshold+1&&b>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(b-this.transitionThreshold)*1e3)),b<=1&&b>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},b*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const Ez="1.0.0";function _z({baseUrl:r,contentfulAccessToken:o,contentfulSpaceId:l}){const[f,p]=ln.useState(),[S,C]=ln.useState(),g=ln.useCallback((w,F)=>{var b,y;return f&&((y=(b=f.find(v=>v.slug===w))==null?void 0:b.resourcesCollection.items.find(v=>v.key===F))==null?void 0:y.value)||""},[f]);return ln.useEffect(()=>{r&&o&&l&&(C(void 0),gz(r,o,l).then(w=>{p(w)}).catch(w=>{C(w)}))},[r,o,l]),{contentfulData:f,getContentfulValue:g,error:S}}const Tz={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},Aa=Xo.createContext(Tz);function Sz({children:r,baseUrl:o,preferredProfile:l,contentfulAccessToken:f,contentfulSpaceId:p,ticketCodeProp:S}){const C=bg(),g=Ez,[w,F]=ln.useState(),[b,y]=ln.useState(),[v,D]=ln.useState(),[m,T]=ln.useState(),[U,N]=ln.useState(),[_,I]=ln.useState(),[R,Z]=ln.useState(""),[z,W]=ln.useState(),[X,le]=ln.useState(),[x,$]=ln.useState(),[ce,oe]=ln.useState(),[he,Ce]=ln.useState(),[Xe,Ae]=ln.useState([]),[Ze,nt]=ln.useState([]),[lt,qe]=ln.useState(!1),[ut,At]=ln.useState(),Oe=ln.useRef(),Qe=ln.useRef(),{getContentfulValue:ct,error:Xt}=_z({baseUrl:o,contentfulAccessToken:f,contentfulSpaceId:p}),Kt=3;function Tt(Ct,be){return be.filter(re=>Ct!==re.name)}return ln.useEffect(()=>{Ae(Xt?Ct=>[...Ct,Xt]:Ct=>Tt(_a.CONTENTFUL,Ct))},[Xt]),ln.useEffect(()=>{setTimeout(()=>{Z(S),W("SCAN_DEVICE_ID")},500)},[S]),ln.useEffect(()=>{o&&C&&(async()=>{let be=0;const re=()=>oz({deviceId:C,appVersion:g,baseUrl:o});for(;be<Kt;)await re().then(Fe=>{Ce(Fe),be=Kt}).catch(Fe=>{be+=1,be===2&&console.error(Fe)})})()},[g,o,C]),ln.useEffect(()=>{if(!he)return;const Ct=new nz({deviceId:C,debug:!1});T(Ct),Ct.globalConnect(he).then(({ticketCode:be,scanTvDeviceId:re})=>{Z(be),W(re)})},[he]),ln.useEffect(()=>{!R||!z||!(m!=null&&m.globalHubConnection)||m.globalDisconnect()},[R,z,m==null?void 0:m.globalHubConnection]),ln.useEffect(()=>{if(!R||!z){oe(void 0);return}const Ct=R[0];Ae(be=>Tt(_a.NEGOTIATE,be)),az({deviceId:C,deviceType:6,appVersion:g,ticketCode:R,scanTvDeviceId:z,ticketPrefix:Ct,baseUrl:o}).then(be=>{oe(be),qe(be.ticketType>3)}).catch(be=>{Ae(re=>[...re,be])})},[R,g,o,C,z]),ln.useEffect(()=>{if(!(ce!=null&&ce.accessToken)||!ce.url||!R)return;const Ct=new vz(new Date(0)),be=new yz(Ct);localStorage.setItem("ticketCode",R),m==null||m.connect({url:ce.url,accessToken:ce.accessToken,groupName:R});function re(Fe){N(Fe),nt(q=>Tt(_a.EVENT_STATUS,q));const O=()=>{uz({appVersion:g,baseUrl:o,ticketCode:R,sessionId:Fe}).then(q=>{if(y(q),q.broadcastStart&&Oe.current!==q.broadcastStart&&!Qe.current)if(Oe.current=q.broadcastStart,lt){const K=new Date;K.setHours(K.getHours()+1),Ct.updateStartTime(K,!0)}else Ct.updateStartTime(new Date(q.broadcastStart),!0)}).catch(q=>{nt(K=>[...K,q])})};O(),m==null||m.on("eventStatusChanged",O),hz(R[0],o,f,p).then(q=>{D(q)}).catch(q=>{nt(K=>[...K,q])}),nt(q=>Tt(_a.GENERATE,q));const M=()=>{sz({sessionId:Fe,appVersion:g,baseUrl:o,ticketCode:R}).then(q=>{Ct.timelineData=q,F(q),be.updateTimelineData(q)}).catch(q=>{nt(K=>[...K,q])})};!w&&!Ct.playerSyncer._videoElement&&M(),Ct.on("fetchTimeline",M)}return m==null||m.on("setupStatusUpdate",({deviceLists:Fe})=>{var M;const O=(M=Fe.connectedDevices[0])==null?void 0:M.sessionId;At(Fe.connectedDevices),console.log("signalRClient `setupStatusUpdate` connected with sessionId: ",O),re(O)}),m==null||m.on("stateUpdated",({state:Fe})=>{console.log(Fe,"stateUpdate"),I(Fe)}),m==null||m.on("serverTimeOffsetUpdate",({serverTimeOffset:Fe})=>{console.log("signalRClient: server time offset updated",Fe),Ct.updateServerTimeOffset(Fe)}),m==null||m.on("startTimeUpdated",({startTime:Fe})=>{Oe.current=Fe.toString(),Qe.current=Fe.toString(),Ct.updateStartTime(Fe,!0)}),m==null||m.on("connected",({sessionId:Fe})=>{console.log("signalRClient: `connected` with sessionId: ",Fe),N(Fe),re(Fe)}),le(Ct),$(be),()=>{I(void 0),At(void 0),m==null||m.destroy(),be.destroy(),Ct.destroy()}},[ce,R,g,o,C,f,p,lt]),pt.jsx(Aa.Provider,{value:{signalRClient:m,timelineData:w,eventStatus:b,eventMeta:v,hubState:_,sessionId:U,ticketCode:R,eventClock:X,orchestrator:x,preferredProfile:l,baseUrl:o,negotiateData:ce,isDev:lt,getContentfulValue:ct,preConnectErrors:Xe,postConnectErrors:Ze,connectedDevices:ut},children:r})}const wz="_focused_17p1l_1",Az="_posterFocused_17p1l_11",Iz="_qrCode_17p1l_31",lC={focused:wz,posterFocused:Az,qrCode:Iz};function Qi({selfFocus:r,focusKey:o,...l}){const{ref:f,focused:p,focusSelf:S}=uu.useFocusable({onEnterPress:()=>{l.onClick()},onBlur:()=>{l.onBlur&&l.onBlur()},focusKey:o});return ln.useEffect(()=>{r&&S()},[S,r]),pt.jsx("button",{...l,ref:f,className:"".concat(l.className||""," ").concat(p?lC.focused:"")})}function bf(){return ln.useContext(Aa).signalRClient}function Rf(){return ln.useContext(Aa).timelineData}function Fb(){return ln.useContext(Aa).eventMeta}function Cz(){return ln.useContext(Aa).hubState}function bz(){return ln.useContext(Aa).sessionId}function Rz(){return ln.useContext(Aa).ticketCode?[0]:null}function Ps(){return ln.useContext(Aa).eventClock}function Ub(){return ln.useContext(Aa).isDev}function KU(){return ln.useContext(Aa).getContentfulValue}function VU(){return ln.useContext(Aa).preConnectErrors}function xz(){return ln.useContext(Aa).postConnectErrors}function am(){return ln.useContext(Aa).orchestrator}function Bb(){return ln.useContext(Aa).connectedDevices}function zU(){const r=Rf(),o=Rz(),l=ln.useContext(Aa);return ln.useMemo(()=>[r==null?void 0:r.profiles.find(f=>f.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?lz(l.baseUrl):void 0,r==null?void 0:r.queryParameters],[l.preferredProfile,o,r,l.baseUrl])}const Nz=()=>pt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:pt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function Mz(){const r=bf(),o=Ps(),l=ln.useCallback(C=>{!o||!r||r.sendGroupCommand({command:"play",value:{senderID:bg(),startDate:new Date(o.startTime.getTime()-C).toISOString(),rateClockState:{rate:1}}})},[r,o]),f=ln.useCallback(C=>{!o||!r||r.sendGroupCommand({command:"play",value:{senderID:bg(),startDate:new Date(o.serverNow()-C).toISOString(),rateClockState:{rate:1}}})},[r,o]),p=ln.useCallback(()=>{if(!o||!r)return;const C=new Date;C.setSeconds(C.getSeconds()+5),r.sendGroupCommand({command:"play",value:{senderID:bg(),startDate:new Date(C).toISOString(),rateClockState:{rate:1}}})},[r,o]);return{seekBy:l,seekTo:f,disconnect:()=>{r==null||r.disconnect()},restart:p}}function Dz({eventPlayer:r}){var T,U;const o=bf(),l=Ps(),[f,p]=ln.useState(!1),[S,C]=ln.useState(),{seekBy:g,seekTo:w,disconnect:F,restart:b}=Mz(),[y,v]=ln.useState([]),D=Rf(),m=()=>{p(!f)};return ln.useEffect(()=>{if(!l||!D)return;const N=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),I=gE(D,_);v(I.map(R=>R)),C({expectedPosition:_})},500);return()=>{clearInterval(N)}},[l,D]),pt.jsxs("div",{className:"demo-remote-container",children:[pt.jsx("div",{className:"icon-wrapper",onClick:m,children:pt.jsx(Nz,{})}),f&&pt.jsxs(pt.Fragment,{children:[pt.jsx("h2",{children:"Demo Remote"}),pt.jsx(Qi,{selfFocus:!0,onClick:()=>{r==null||r.requestFullscreen()},children:"Go to fullscreen"}),S&&pt.jsx("div",{children:pt.jsxs("p",{children:["Expected position in seconds"," ",S.expectedPosition.toFixed(2)]})}),pt.jsx(Qi,{onClick:()=>{w(-5e3)},children:"Start in 5 sec"}),pt.jsx(Qi,{onClick:()=>{b()},children:"Restart"}),pt.jsx(Qi,{onClick:()=>{g(1e4)},children:"Seek Forward"}),pt.jsx(Qi,{onClick:()=>{g(-1e4)},children:"Seek Backward"}),pt.jsx(Qi,{onClick:()=>{w(1e4)},children:"Seek to first video"}),pt.jsx(Qi,{onClick:()=>{w(1e5)},children:"Seek to 100"}),pt.jsx(Qi,{onClick:F,children:"Disconnect"}),pt.jsx("h3",{children:"Available streams right now:"}),y.map(N=>pt.jsxs("div",{className:"cast-button-group",children:[pt.jsxs(Qi,{onClick:()=>{o==null||o.sendGroupCommand({command:"cast",value:N.index})},children:[pt.jsx("span",{style:{margin:"10px"},children:"►"}),N.title]}),pt.jsxs(Qi,{onClick:()=>{o==null||o.sendGroupCommand({command:"prepareCast",value:N.index})},children:[pt.jsx("span",{style:{margin:"10px"},children:"►"}),"prepare cast"]}),pt.jsxs(Qi,{onClick:()=>{o==null||o.sendGroupCommand({command:"cancelCast",value:N.index})},children:[pt.jsx("span",{style:{margin:"10px"},children:"►"}),"cancel cast"]})]},N.camera.assetName)),pt.jsx("h3",{children:"Statistics:"}),pt.jsxs("div",{className:"statistics-block",children:[pt.jsx("label",{children:"Total frames:"}),pt.jsx("div",{children:((T=r==null?void 0:r.stats)==null?void 0:T.totalVideoFrames)||0})]}),pt.jsxs("div",{className:"statistics-block",children:[pt.jsx("label",{children:"Dropped frames:"}),pt.jsx("div",{children:((U=r==null?void 0:r.stats)==null?void 0:U.droppedVideoFrames)||0})]})]})]})}var YU={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(r,o){(function(l,f){r.exports=f()})(self,function(){return function(){var l={4593:function(C,g){var w,F,b,y,v,D=function(U){for(var N=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?N.push(I):I<2048?(N.push(192|I>>6),N.push(128|63&I)):I<65536?(N.push(224|I>>12),N.push(128|63&I>>6),N.push(128|63&I)):(N.push(240|I>>18),N.push(128|63&I>>12),N.push(128|63&I>>6),N.push(128|63&I))}return N},m=function(U){for(var N=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),N.push(String.fromCharCode(I))}return N.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(U){for(var N=0,_=[],I=0|U.length/3;0<I--;){var R=(U[N]<<16)+(U[N+1]<<8)+U[N+2];N+=3,_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push(w.charAt(63&R>>6)),_.push(w.charAt(63&R))}return U.length-N==2?(R=(U[N]<<16)+(U[N+1]<<8),_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push(w.charAt(63&R>>6)),_.push("=")):U.length-N==1&&(R=U[N]<<16,_.push(w.charAt(63&R>>18)),_.push(w.charAt(63&R>>12)),_.push("==")),_.join("")},b=function(){for(var U=[],N=0;N<w.length;++N)U[w.charCodeAt(N)]=N;return U[61]=0,U}(),y=function(U){for(var N=0,_=[],I=0|U.length/4;0<I--;){var R=(b[U.charCodeAt(N)]<<18)+(b[U.charCodeAt(N+1)]<<12)+(b[U.charCodeAt(N+2)]<<6)+b[U.charCodeAt(N+3)];_.push(255&R>>16),_.push(255&R>>8),_.push(255&R),N+=4}return _&&(U.charAt(N-2)=="="?(_.pop(),_.pop()):U.charAt(N-1)=="="&&_.pop()),_},v={encode:function(U){for(var N=[],_=0;_<U.length;++_)N.push(U.charCodeAt(_));return N},decode:function(U){for(var N=0;N<s.length;++N)a[N]=String.fromCharCode(a[N]);return a.join("")}},T.decodeArray=function(U){var N=y(U);return new Uint8Array(N)},T.encodeASCII=function(U){var N=v.encode(U);return F(N)},T.decodeASCII=function(U){var N=y(U);return v.decode(N)},T.encode=function(U){var N=D(U);return F(N)},T.decode=function(U){var N=y(U);return m(N)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(C,g){(function(w){var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},b=function(x){var $=x;return F.hasOwnProperty(x)&&($=F[x]),String.fromCharCode($)},y=15,v=32,D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},N=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(x){this.time=x},log:function(x,$){var ce=this.verboseFilter[x];this.verboseLevel>=ce&&console.log(this.time+" ["+x+"] "+$)}},I=function(x){for(var $=[],ce=0;ce<x.length;ce++)$.push(x[ce].toString(16));return $},R=function(x,$,ce,oe,he){this.foreground=x||"white",this.underline=$||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=he||!1};R.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(x){for(var $=["foreground","underline","italics","background","flash"],ce=0;ce<$.length;ce++){var oe=$[ce];x.hasOwnProperty(oe)&&(this[oe]=x[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(x){return this.foreground===x.foreground&&this.underline===x.underline&&this.italics===x.italics&&this.background===x.background&&this.flash===x.flash},copy:function(x){this.foreground=x.foreground,this.underline=x.underline,this.italics=x.italics,this.background=x.background,this.flash=x.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var Z=function(x,$,ce,oe,he,Ce){this.uchar=x||" ",this.penState=new R($,ce,oe,he,Ce)};Z.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(x,$){this.uchar=x,this.penState.copy($)},setPenState:function(x){this.penState.copy(x)},equals:function(x){return this.uchar===x.uchar&&this.penState.equals(x.penState)},copy:function(x){this.uchar=x.uchar,this.penState.copy(x.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var z=function(){this.chars=[];for(var x=0;x<v;x++)this.chars.push(new Z);this.pos=0,this.currPenState=new R};z.prototype={equals:function(x){for(var $=!0,ce=0;ce<v;ce++)if(!this.chars[ce].equals(x.chars[ce])){$=!1;break}return $},copy:function(x){for(var $=0;$<v;$++)this.chars[$].copy(x.chars[$])},isEmpty:function(){for(var x=!0,$=0;$<v;$++)if(!this.chars[$].isEmpty()){x=!1;break}return x},setCursor:function(x){this.pos!==x&&(this.pos=x),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},moveCursor:function(x){var $=this.pos+x;if(x>1)for(var ce=this.pos+1;ce<$+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor($)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(x){x>=144&&this.backSpace();var $=b(x);this.pos>=v?_.log("ERROR","Cannot insert "+x.toString(16)+" ("+$+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar($,this.currPenState),this.moveCursor(1))},clearFromPos:function(x){var $;for($=x;$<v;$++)this.chars[$].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var x=[],$=!0,ce=0;ce<v;ce++){var oe=this.chars[ce].uchar;oe!==" "&&($=!1),x.push(oe)}return $?"":x.join("")},setPenStyles:function(x){this.currPenState.setStyles(x),this.chars[this.pos].setPenState(this.currPenState)}};var W=function(){this.rows=[];for(var x=0;x<y;x++)this.rows.push(new z);this.currRow=14,this.nrRollUpRows=null,this.reset()};W.prototype={reset:function(){for(var x=0;x<y;x++)this.rows[x].clear();this.currRow=14},equals:function(x){for(var $=!0,ce=0;ce<y;ce++)if(!this.rows[ce].equals(x.rows[ce])){$=!1;break}return $},copy:function(x){for(var $=0;$<y;$++)this.rows[$].copy(x.rows[$])},isEmpty:function(){for(var x=!0,$=0;$<y;$++)if(!this.rows[$].isEmpty()){x=!1;break}return x},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(x){this.rows[this.currRow].insertChar(x)},setPen:function(x){this.rows[this.currRow].setPenStyles(x)},moveCursor:function(x){this.rows[this.currRow].moveCursor(x)},setCursor:function(x){_.log("INFO","setCursor: "+x),this.rows[this.currRow].setCursor(x)},setPAC:function(x){_.log("INFO","pacData = "+JSON.stringify(x));var $=x.row-1;this.nrRollUpRows&&$<this.nrRollUpRows-1&&($=this.nrRollUpRows-1),this.currRow=$;var ce=this.rows[this.currRow];if(x.indent!==null){var oe=x.indent,he=Math.max(oe-1,0);ce.setCursor(x.indent),x.color=ce.chars[he].penState.foreground}var Ce={foreground:x.color,underline:x.underline,italics:x.italics,background:"black",flash:!1};this.setPen(Ce)},setBkgData:function(x){_.log("INFO","bkgData = "+JSON.stringify(x)),this.backSpace(),this.setPen(x),this.insertChar(32)},setRollUpRows:function(x){this.nrRollUpRows=x},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var x=this.currRow+1-this.nrRollUpRows,$=this.rows.splice(x,1)[0];$.clear(),this.rows.splice(this.currRow,0,$),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(x){x=x||!1;for(var $=[],ce="",oe=-1,he=0;he<y;he++){var Ce=this.rows[he].getTextString();Ce&&(oe=he+1,x?$.push("Row "+oe+': "'+Ce+'"'):$.push(Ce.trim()))}return $.length>0&&(ce=x?"["+$.join(" | ")+"]":$.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var X=function(x,$){this.chNr=x,this.outputFilter=$,this.mode=null,this.verbose=0,this.displayedMemory=new W,this.nonDisplayedMemory=new W,this.lastOutputScreen=new W,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};X.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(x){this.outputFilter=x},setPAC:function(x){this.writeScreen.setPAC(x)},setBkgData:function(x){this.writeScreen.setBkgData(x)},setMode:function(x){x!==this.mode&&(this.mode=x,_.log("INFO","MODE="+x),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=x)},insertChars:function(x){for(var $=0;$<x.length;$++)this.writeScreen.insertChar(x[$]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(x){_.log("INFO","RU("+x+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(x)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var x=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=x,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(x){_.log("INFO","TO("+x+") - Tab Offset"),this.writeScreen.moveCursor(x)},cc_MIDROW:function(x){var $={flash:!1};if($.underline=x%2==1,$.italics=x>=46,$.italics)$.foreground="white";else{var ce=Math.floor(x/2)-16;$.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify($)),this.writeScreen.setPen($)},outputDataUpdate:function(){var x=_.time;x!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(x,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:x):this.cueStartTime=x,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(x){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.displayedMemory),this.cueStartTime=x))}};var le=function(x,$,ce){this.field=x||1,this.outputs=[$,ce],this.channels=[new X(1,$),new X(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};le.prototype={getHandler:function(x){return this.channels[x].getHandler()},setHandler:function(x,$){this.channels[x].setHandler($)},addData:function(x,$){var ce,oe,he,Ce=!1;this.lastTime=x,_.setTime(x);for(var Xe=0;Xe<$.length;Xe+=2)oe=127&$[Xe],he=127&$[Xe+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&he===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,he])+") is dropped")):oe!==0||he!==0?(_.log("DATA","["+I([$[Xe],$[Xe+1]])+"] -> ("+I([oe,he])+")"),(ce=this.parseCmd(oe,he))||(ce=this.parseMidrow(oe,he)),ce||(ce=this.parsePAC(oe,he)),ce||(ce=this.parseBackgroundAttributes(oe,he)),ce||(Ce=this.parseChars(oe,he))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ce):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:Ce?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,he])+" orig: "+I([$[Xe],$[Xe+1]])))):this.dataCounters.padding+=2},parseCmd:function(x,$){var ce;if(!((x===20||x===21||x===28||x===29)&&32<=$&&$<=47||(x===23||x===31)&&33<=$&&$<=35))return!1;ce=x===20||x===21||x===23?1:2;var oe=this.channels[ce-1];return x===20||x===21||x===28||x===29?$===32?oe.cc_RCL():$===33?oe.cc_BS():$===34?oe.cc_AOF():$===35?oe.cc_AON():$===36?oe.cc_DER():$===37?oe.cc_RU(2):$===38?oe.cc_RU(3):$===39?oe.cc_RU(4):$===40?oe.cc_FON():$===41?oe.cc_RDC():$===42?oe.cc_TR():$===43?oe.cc_RTD():$===44?oe.cc_EDM():$===45?oe.cc_CR():$===46?oe.cc_ENM():$===47&&oe.cc_EOC():oe.cc_TO($-32),this.lastCmdA=x,this.lastCmdB=$,this.currChNr=ce,!0},parseMidrow:function(x,$){var ce=null;if((x===17||x===25)&&32<=$&&$<=47){if((ce=x===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW($),_.log("DEBUG","MIDROW ("+I([x,$])+")"),this.lastCmdA=x,this.lastCmdB=$,!0}return!1},parsePAC:function(x,$){var ce,oe;if(!((17<=x&&x<=23||25<=x&&x<=31)&&64<=$&&$<=127||(x===16||x===24)&&64<=$&&$<=95))return!1;ce=x<=23?1:2,oe=64<=$&&$<=95?ce===1?D[x]:T[x]:ce===1?m[x]:U[x];var he=this.interpretPAC(oe,$);return this.channels[ce-1].setPAC(he),this.lastCmdA=x,this.lastCmdB=$,this.currChNr=ce,!0},interpretPAC:function(x,$){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:x};return ce=$>95?$-96:$-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(x,$){var ce=null,oe=null,he=null;if(x>=25?(ce=2,he=x-8):(ce=1,he=x),17<=he&&he<=19){var Ce;Ce=he===17?$+80:he===18?$+112:$+144,_.log("INFO","Special char '"+b(Ce)+"' in channel "+ce),oe=[Ce],this.lastCmdA=x,this.lastCmdB=$}else 32<=x&&x<=127&&(oe=$===0?[x]:[x,$],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Xe=I(oe);_.log("DEBUG","Char codes =  "+Xe.join(","))}return oe},parseBackgroundAttributes:function(x,$){var ce,oe,he;return((x===16||x===24)&&32<=$&&$<=47||(x===23||x===31)&&45<=$&&$<=47)&&(ce={},x===16||x===24?(oe=Math.floor(($-32)/2),ce.background=N[oe],$%2==1&&(ce.background=ce.background+"_semi")):$===45?ce.background="transparent":(ce.foreground="black",$===47&&(ce.underline=!0)),he=x<24?1:2,this.channels[he-1].setBkgData(ce),this.lastCmdA=x,this.lastCmdB=$,!0)},reset:function(){for(var x=0;x<this.channels.length;x++)this.channels[x]&&this.channels[x].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(x){for(var $=0;$<this.channels.length;$++)this.channels[$]&&this.channels[$].cueSplitAtTime(x)}},w.logger=_,w.PenState=R,w.CaptionScreen=W,w.Cea608Parser=le,w.findCea608Nalus=function(x,$,ce){for(var oe=0,he=$,Ce=[],Xe=function(qe,ut,At,Oe){if(qe!==4||ut<8)return null;var Qe=At.getUint8(Oe),ct=At.getUint16(Oe+1),Xt=At.getUint32(Oe+3),Kt=At.getUint8(Oe+7);return Qe==181&&ct==49&&Xt==1195456820&&Kt==3};he<$+ce;){if(oe=x.getUint32(he),(31&x.getUint8(he+4))==6)for(var Ae=he+5,Ze=-1;Ae<he+4+oe-1;){Ze=0;for(var nt=255;nt===255;)Ze+=nt=x.getUint8(Ae),Ae++;var lt=0;for(nt=255;nt===255;)lt+=nt=x.getUint8(Ae),Ae++;Xe(Ze,lt,x,Ae)&&Ce.push([Ae,lt]),Ae+=lt}he+=oe+4}return Ce},w.extractCea608DataFromRange=function(x,$){var ce=$[0],oe=[[],[]];ce+=8;var he=31&x.getUint8(ce);ce+=2;for(var Ce=0;Ce<he;Ce++){var Xe=x.getUint8(ce),Ae=4&Xe,Ze=3&Xe;ce++;var nt=x.getUint8(ce);ce++;var lt=x.getUint8(ce);ce++,Ae&&(127&nt)+(127&lt)!=0&&(Ze===0?(oe[0].push(nt),oe[0].push(lt)):Ze===1&&(oe[1].push(nt),oe[1].push(lt)))}return oe}})(g)},8416:function(C,g,w){var F=w(1139),b=w(5448),y=w(6398),v=w(2032),D=(w(5530),typeof window<"u"&&window||w.g),m=D.dashjs;m||(m=D.dashjs={}),m.MediaPlayer=F.Z,m.FactoryMaker=b.Z,m.Debug=y.Z,m.Version=(0,v.e)()},6398:function(C,g,w){var F=w(5595),b=w(8512),y=w(5448),v=1,D=2,m=3,T=4,U=5;function N(I){I=I||{};var R,Z,z,W,X=this.context,le=(0,F.Z)(X).getInstance(),x=I.settings,$=[];function ce(nt){return nt&&nt.bind?nt.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var nt=arguments.length,lt=new Array(nt),qe=0;qe<nt;qe++)lt[qe]=arguments[qe];Ze.apply(void 0,[v,this].concat(lt))}function he(){for(var nt=arguments.length,lt=new Array(nt),qe=0;qe<nt;qe++)lt[qe]=arguments[qe];Ze.apply(void 0,[D,this].concat(lt))}function Ce(){for(var nt=arguments.length,lt=new Array(nt),qe=0;qe<nt;qe++)lt[qe]=arguments[qe];Ze.apply(void 0,[m,this].concat(lt))}function Xe(){for(var nt=arguments.length,lt=new Array(nt),qe=0;qe<nt;qe++)lt[qe]=arguments[qe];Ze.apply(void 0,[T,this].concat(lt))}function Ae(){for(var nt=arguments.length,lt=new Array(nt),qe=0;qe<nt;qe++)lt[qe]=arguments[qe];Ze.apply(void 0,[U,this].concat(lt))}function Ze(nt,lt){var qe="",ut=null;Z&&(ut=new Date().getTime(),qe+="["+(ut-W)+"]"),z&&lt&&lt.getClassName&&(qe+="["+lt.getClassName()+"]",lt.getType&&(qe+="["+lt.getType()+"]")),qe.length>0&&(qe+=" ");for(var At=arguments.length,Oe=new Array(At>2?At-2:0),Qe=2;Qe<At;Qe++)Oe[Qe-2]=arguments[Qe];Array.apply(null,Oe).forEach(function(ct){qe+=ct+" "}),$[nt]&&x&&x.get().debug.logLevel>=nt&&$[nt](qe),x&&x.get().debug.dispatchEvent&&le.trigger(b.Z.LOG,{message:qe,level:nt})}return R={getLogger:function(nt){return{fatal:oe.bind(nt),error:he.bind(nt),warn:Ce.bind(nt),info:Xe.bind(nt),debug:Ae.bind(nt)}},setLogTimestampVisible:function(nt){Z=nt},setCalleeNameVisible:function(nt){z=nt}},Z=!0,z=!0,W=new Date().getTime(),typeof window<"u"&&window.console&&($[v]=ce(window.console.error),$[D]=ce(window.console.error),$[m]=ce(window.console.warn),$[T]=ce(window.console.info),$[U]=ce(window.console.debug)),R}N.__dashjs_factory_name="Debug";var _=y.Z.getSingletonFactory(N);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=v,_.LOG_LEVEL_ERROR=D,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,y.Z.updateSingletonFactory(N.__dashjs_factory_name,_),g.Z=_},5595:function(C,g,w){var F=w(5448),b=w(8825);function y(){var D={};function m(U,N,_){var I=-1;return D[U]&&D[U].some(function(R,Z){if(R&&R.callback===N&&(!_||_===R.scope))return I=Z,!0}),I}var T={on:function(U,N,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!N||typeof N!="function")throw new Error("listener must be a function: "+N);var R=I.priority||0;if(!(m(U,N,_)>=0)){D[U]=D[U]||[];var Z={callback:N,scope:_,priority:R};_&&_.getStreamId&&(Z.streamId=_.getStreamId()),_&&_.getType&&(Z.mediaType=_.getType()),I&&I.mode&&(Z.mode=I.mode);var z=D[U].some(function(W,X){if(W&&R>W.priority)return D[U].splice(X,0,Z),!0});z||D[U].push(Z)}},off:function(U,N,_){if(U&&N&&D[U]){var I=m(U,N,_);I<0||(D[U][I]=null)}},trigger:function(U){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&D[U]){if((N=N||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");N.type=U,_.streamId&&(N.streamId=_.streamId),_.mediaType&&(N.mediaType=_.mediaType),D[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===b.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,N)})}},reset:function(){D={}}};return T}y.__dashjs_factory_name="EventBus";var v=F.Z.getSingletonFactory(y);v.EVENT_PRIORITY_LOW=0,v.EVENT_PRIORITY_HIGH=5e3,F.Z.updateSingletonFactory(y.__dashjs_factory_name,v),g.Z=v},5448:function(C,g){var w=function(){var F,b=[],y={},v={};function D(N,_){for(var I in b){var R=b[I];if(R.context===N&&R.name===_)return R.instance}return null}function m(N,_){return _[N]}function T(N,_,I){N in I&&(I[N]=_)}function U(N,_,I){var R,Z=N.__dashjs_factory_name,z=_[Z];if(z){var W=z.instance;if(!z.override)return W.apply({context:_,factory:F},I);for(var X in R=N.apply({context:_},I),W=W.apply({context:_,factory:F,parent:R},I))R.hasOwnProperty(X)&&(R[X]=W[X])}else R=N.apply({context:_},I);return R.getClassName=function(){return Z},R}return F={extend:function(N,_,I,R){!R[N]&&_&&(R[N]={instance:_,override:I})},getSingletonInstance:D,setSingletonInstance:function(N,_,I){for(var R in b){var Z=b[R];if(Z.context===N&&Z.name===_)return void(b[R].instance=I)}b.push({name:_,context:N,instance:I})},deleteSingletonInstances:function(N){b=b.filter(function(_){return _.context!==N})},getSingletonFactory:function(N){var _=m(N.__dashjs_factory_name,y);return _||(_=function(I){var R;return I===void 0&&(I={}),{getInstance:function(){return R||(R=D(I,N.__dashjs_factory_name)),R||(R=U(N,I,arguments),b.push({name:N.__dashjs_factory_name,context:I,instance:R})),R}}},y[N.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(N){return m(N,y)},updateSingletonFactory:function(N,_){T(N,_,y)},getClassFactory:function(N){var _=m(N.__dashjs_factory_name,v);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(N,I,arguments)}}},v[N.__dashjs_factory_name]=_),_},getClassFactoryByName:function(N){return m(N,v)},updateClassFactory:function(N,_){T(N,_,v)}},F}();g.Z=w},1264:function(C,g,w){var F=w(5448),b=w(703),y=w(6398),v=w(3393),D=w(7855),m=w(5595),T=w(8512);function U(R){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},U(R)}function N(R,Z,z){return Z in R?Object.defineProperty(R,Z,{value:z,enumerable:!0,configurable:!0,writable:!0}):R[Z]=z,R}function _(){var R,Z,z=this.context,W=(0,m.Z)(z).getInstance(),X={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},le={debug:{logLevel:y.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:v.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:v.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(R={},N(R,D.w.MPD_TYPE,500),N(R,D.w.XLINK_EXPANSION_TYPE,500),N(R,D.w.MEDIA_SEGMENT_TYPE,1e3),N(R,D.w.INIT_SEGMENT_TYPE,1e3),N(R,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),N(R,D.w.INDEX_SEGMENT_TYPE,1e3),N(R,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),N(R,D.w.LICENSE,1e3),N(R,D.w.OTHER_TYPE,1e3),N(R,"lowLatencyReductionFactor",10),R),retryAttempts:(Z={},N(Z,D.w.MPD_TYPE,3),N(Z,D.w.XLINK_EXPANSION_TYPE,1),N(Z,D.w.MEDIA_SEGMENT_TYPE,3),N(Z,D.w.INIT_SEGMENT_TYPE,3),N(Z,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),N(Z,D.w.INDEX_SEGMENT_TYPE,3),N(Z,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),N(Z,D.w.LICENSE,3),N(Z,D.w.OTHER_TYPE,3),N(Z,"lowLatencyMultiplyFactor",5),Z),abr:{movingAverageMethod:v.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:v.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:v.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},x=b.Z.clone(le);function $(ce,oe,he){for(var Ce in ce)ce.hasOwnProperty(Ce)&&(oe.hasOwnProperty(Ce)?U(ce[Ce])!=="object"||ce[Ce]instanceof Array||ce[Ce]===null?(oe[Ce]=b.Z.clone(ce[Ce]),X[he+Ce]&&W.trigger(X[he+Ce])):$(ce[Ce],oe[Ce],he.slice()+Ce+"."):console.error("Settings parameter "+he+Ce+" is not supported"))}return{get:function(){return x},update:function(ce){U(ce)==="object"&&$(ce,x,"")},reset:function(){x=b.Z.clone(le)}}}_.__dashjs_factory_name="Settings";var I=F.Z.getSingletonFactory(_);g.Z=I},703:function(C,g,w){var F=w(3875),b=w.n(F),y=w(1067);function v(T){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},v(T)}function D(T,U){for(var N=0;N<U.length;N++){var _=U[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,N;return U=T,N=[{key:"mixin",value:function(_,I,R){var Z,z={};if(_)for(var W in I)I.hasOwnProperty(W)&&(Z=I[W],W in _&&(_[W]===Z||W in z&&z[W]===Z)||(v(_[W])==="object"&&_[W]!==null?_[W]=T.mixin(_[W],Z,R):_[W]=R(Z)));return _}},{key:"clone",value:function(_){if(!_||v(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var R=0,Z=_.length;R<Z;++R)R in _&&I.push(T.clone(_[R]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var R=new URL(_);return I.forEach(function(Z){Z.key&&Z.value&&R.searchParams.set(Z.key,Z.value)}),R.href}catch(Z){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var R=_.trim().split("\r\n"),Z=0,z=R.length;Z<z;Z++){var W=R[Z],X=W.indexOf(": ");X>0&&(I[W.substring(0,X)]=W.substring(X+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var R=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?R:3&R|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var R=0;R<_.length;R++)I=(I<<5)-I+_.charCodeAt(R),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var R=new URL(_),Z=new URL(I);if(R.protocol=Z.protocol,R.origin!==Z.origin)return I;var z=b().relative(R.pathname.substr(0,R.pathname.lastIndexOf("/")),Z.pathname.substr(0,Z.pathname.lastIndexOf("/"))),W=z.length===0?1:0;return z+=Z.pathname.substr(Z.pathname.lastIndexOf("/")+W,Z.pathname.length-1),Z.pathname.length<z.length?Z.pathname:z}catch(X){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,y.UAParser)(I)}catch(R){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],N&&D(U,N),T}();g.Z=m},2032:function(C,g,w){function F(){return"4.7.4"}w.d(g,{e:function(){return F}})},2230:function(C,g){function w(b,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}var F=function(){function b(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,b)}var y,v;return y=b,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||U&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&w(y.prototype,v),b}();g.Z=F},4351:function(C,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function b(m,T){return b=Object.setPrototypeOf||function(U,N){return U.__proto__=N,U},b(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&b(I,R)})(_,m);var T,U,N=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var Z=v(this).constructor;I=Reflect.construct(R,arguments,Z)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(w(8342).Z);g.Z=D},8512:function(C,g,w){function F(U){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},F(U)}function b(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}function y(U,N){return y=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},y(U,N)}function v(U,N){return!N||F(N)!=="object"&&typeof N!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):N}function D(U){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},D(U)}var m=function(U){(function(Z,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(z&&z.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),z&&y(Z,z)})(R,U);var N,_,I=(N=R,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}(),function(){var Z,z=D(N);if(_){var W=D(this).constructor;Z=Reflect.construct(z,arguments,W)}else Z=z.apply(this,arguments);return v(this,Z)});function R(){return b(this,R),I.apply(this,arguments)}return R}(w(4351).Z),T=new m;g.Z=T},8342:function(C,g){function w(b,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}var F=function(){function b(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,b)}var y,v;return y=b,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||U&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&w(y.prototype,v),b}();g.Z=F},9326:function(C,g,w){var F=w(3186),b=w(7855),y=w(5448),v=w(8825),D=w(7387),m=w(1553);function T(U){var N,_,I,R,Z,z=(U=U||{}).eventBus,W=U.debug,X=U.urlUtils,le=U.type,x=U.streamInfo,$=U.segmentsController,ce=U.timelineConverter,oe=U.baseURLController;function he(){return le}function Ce(){I=null}function Xe(qe,ut,At){var Oe,Qe,ct=oe.resolve(At.path),Xt={};return ct&&ut!==ct.url&&X.isRelative(ut)?(Oe=ct.url,Qe=ct.serviceLocation,Xt=ct.queryParams,ut&&(Oe=X.resolve(ut,Oe))):Oe=ut,!X.isRelative(Oe)&&(qe.url=Oe,qe.serviceLocation=Qe,qe.queryParams=Xt,!0)}function Ae(qe,ut){if(ut==null)return null;var At=new F.Z,Oe=ut.representation,Qe=Oe.adaptation.period.mpd.manifest.Period_asArray[Oe.adaptation.period.index].AdaptationSet_asArray[Oe.adaptation.index].Representation_asArray[Oe.index].bandwidth,ct=ut.media;return ct=(0,D.vi)(ct,"Number",ut.replacementNumber),ct=(0,D.vi)(ct,"Time",ut.replacementTime),ct=(0,D.vi)(ct,"Bandwidth",Qe),ct=(0,D.Aj)(ct,Oe.id),ct=(0,D.eR)(ct),At.mediaType=he(),At.type=b.w.MEDIA_SEGMENT_TYPE,At.range=ut.mediaRange,At.startTime=ut.presentationStartTime,At.mediaStartTime=ut.mediaStartTime,At.duration=ut.duration,At.timescale=Oe.timescale,At.availabilityStartTime=ut.availabilityStartTime,At.availabilityEndTime=ut.availabilityEndTime,At.availabilityTimeComplete=Oe.availabilityTimeComplete,At.wallStartTime=ut.wallStartTime,At.quality=Oe.index,At.index=ut.index,At.mediaInfo=qe,At.adaptationIndex=Oe.adaptation.index,At.representationId=Oe.id,Xe(At,ct,Oe)?At:void 0}function Ze(qe,ut,At){var Oe=null;if(!ut||!ut.segmentInfoType)return Oe;var Qe=$.getSegmentByTime(ut,At);return Qe&&(I=Qe,_.debug("Index for time "+At+" is "+Qe.index),Oe=Ae(qe,Qe)),Oe}function nt(qe,ut,At){var Oe=null,Qe=$.getSegmentByIndex(ut,At,I?I.mediaStartTime:-1);if(Qe)Oe=Ae(qe,Qe),I=Qe;else{if(R&&!Z)return _.debug(he()+" No segment found at index: "+At+". Wait for next loop"),null;Z=!0}return Oe}function lt(){_.debug("Dynamic stream complete"),Z=!0}return N={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function(qe,ut){return ut?function(At,Oe,Qe){var ct=new F.Z,Xt=Oe.adaptation.period,Kt=Xt.start;if(ct.mediaType=Qe,ct.type=b.w.INIT_SEGMENT_TYPE,ct.range=Oe.range,ct.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(Kt,Oe,R),ct.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(Kt+Xt.duration,Oe,R),ct.quality=Oe.index,ct.mediaInfo=At,ct.representationId=Oe.id,Xe(ct,Oe.initialization,Oe))return ct.url=(0,D.vi)(ct.url,"Bandwidth",Oe.bandwidth),ct}(qe,ut,he()):null},getNextSegmentRequest:function(qe,ut){return ut&&ut.segmentInfoType?nt(qe,ut,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function(qe,ut){var At=I?I.index+1:0,Oe=$.getSegmentByIndex(ut,At,I?I.mediaStartTime:-1);return Oe?Ae(qe,Oe):null},getSegmentRequestForTime:Ze,getStreamId:function(){return x.id},getStreamInfo:function(){return x},getType:he,getValidTimeAheadOfTargetTime:function(qe,ut,At,Oe){try{if(isNaN(qe)||!ut||!At)return NaN;if(qe<0&&(qe=0),isNaN(Oe)&&(Oe=.5),Ze(ut,At,qe))return qe;if(At.adaptation.period.start+At.adaptation.period.duration<qe)return NaN;for(var Qe=isFinite(At.adaptation.period.duration)?At.adaptation.period.start+At.adaptation.period.duration:qe+30,ct=Math.min(qe+Oe,Qe),Xt=NaN,Kt=null;ct<=Qe;){var Tt=null;if(ct<=Qe&&(Tt=Ze(ut,At,ct)),Tt){Xt=ct,Kt=Tt;break}ct+=Oe}if(Kt){var Ct=Kt.startTime+Kt.duration;return qe>Kt.startTime&&Ct-qe>Oe?qe:!isNaN(Kt.startTime)&&qe<Kt.startTime&&Xt>Kt.startTime?Kt.startTime+.001:Math.min(Ct-Oe,Xt)}return Xt}catch(be){return NaN}},initialize:function(qe){R=qe,Z=!1,$.initialize(qe)},isLastSegmentRequested:function(qe,ut){return!qe||!I?!1:Z?!0:!isFinite(qe.adaptation.period.duration)||I.presentationStartTime+I.duration>ut?!1:qe.mediaFinishedInformation&&!isNaN(qe.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=qe.mediaFinishedInformation.numberOfSegments-1&&(!R||qe.segmentInfoType===m.Z.SEGMENT_TEMPLATE||R&&qe.segmentInfoType===m.Z.SEGMENT_LIST&&qe.adaptation.period.nextPeriodId)?!0:!!(R&&qe.adaptation.period.nextPeriodId&&qe.segmentInfoType===m.Z.SEGMENT_TIMELINE&&qe.mediaFinishedInformation&&!isNaN(qe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=qe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(qe,ut){return ut&&ut.segmentInfoType?nt(qe,ut,I?I.index:0):null},reset:function(){Ce(),z.off(v.Z.DYNAMIC_TO_STATIC,lt,N)}},_=W.getLogger(N),Ce(),z.on(v.Z.DYNAMIC_TO_STATIC,lt,N),N}T.__dashjs_factory_name="DashHandler",g.Z=y.Z.getClassFactory(T)},1553:function(C,g){function w(b,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}var F=new(function(){function b(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,b),this.init()}var y,v;return y=b,(v=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(y.prototype,v),b}());g.Z=F},7802:function(C,g,w){var F=w(5448),b=w(1724),y=w(3636),v=w(1736),D=w(5246);function m(U){U=U||{};var N,_,I=this.context,R=U.dashConstants,Z=U.type,z=U.segmentBaseController;function W(X){return X?X.segments?_[R.SEGMENT_BASE]:_[X.segmentInfoType]:null}return N={initialize:function(X){_[R.SEGMENT_TIMELINE]=(0,b.Z)(I).create(U,X),_[R.SEGMENT_TEMPLATE]=(0,y.Z)(I).create(U,X),_[R.SEGMENT_LIST]=(0,v.Z)(I).create(U,X),_[R.SEGMENT_BASE]=(0,D.Z)(I).create(U,X)},updateInitData:function(X,le){return le?Promise.resolve():z.getSegmentBaseInitSegment({representation:X,mediaType:Z})},updateSegmentData:function(X,le){return le?Promise.resolve():z.getSegmentList({mimeType:X.mimeType,representation:X,mediaType:Z})},getSegmentByIndex:function(X,le,x){var $=W(X);return $?$.getSegmentByIndex(X,le,x):null},getSegmentByTime:function(X,le){var x=W(X);return x?x.getSegmentByTime(X,le):null},getMediaFinishedInformation:function(X){var le=W(X);return le?le.getMediaFinishedInformation(X):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},N}m.__dashjs_factory_name="SegmentsController";var T=F.Z.getClassFactory(m);g.Z=T},1736:function(C,g,w){var F=w(5448),b=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function N(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.Z.MISSING_CONFIG_ERROR)}function _(I,R){if(N(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=Z.SegmentURL_asArray.length,W=I&&!isNaN(I.startNumber)?I.startNumber:1,X=Math.max(W-1,0),le=Math.max(R-X,0),x=null;if(le<z){var $=Z.SegmentURL_asArray[le];(x=(0,y.NF)(U,T,I,R))&&(x.replacementTime=(W+R-1)*I.segmentDuration,x.media=$.media?$.media:"",x.mediaRange=$.mediaRange,x.indexRange=$.indexRange)}return x}return{getSegmentByIndex:_,getSegmentByTime:function(I,R){if(N(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,R);return _(I,Math.floor(z/Z))},getMediaFinishedInformation:function(I){var R={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return R;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,z=I&&!isNaN(I.startNumber)?I.startNumber:1,W=Math.max(z-1,0);return R.numberOfSegments=W+Z.SegmentURL_asArray.length,R}}}v.__dashjs_factory_name="ListSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},5246:function(C,g,w){var F=w(5448),b=w(3393);function y(D){var m=(D=D||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.Z.MISSING_CONFIG_ERROR)}function U(N,_){if(T(),!N)return null;var I,R=N.segments?N.segments.length:-1;if(_<R&&(I=N.segments[_])&&I.index===_)return I;for(var Z=0;Z<R;Z++)if((I=N.segments[Z])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(N,_){T();var I=function(R,Z){if(!R)return-1;var z,W,X,le,x,$=R.segments,ce=$?$.length:null,oe=-1;if($&&ce>0){for(x=0;x<ce;x++)if(X=(W=$[x]).presentationStartTime,Z+(z=(le=W.duration)/2)>=X&&Z-z<X+le){oe=W.index;break}}return oe}(N,_);return U(N,I)},getMediaFinishedInformation:function(N){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return N&&N.segments&&(_.numberOfSegments=N.segments.length),_}}}y.__dashjs_factory_name="SegmentBaseGetter";var v=F.Z.getClassFactory(y);g.Z=v},7387:function(C,g,w){w.d(g,{Aj:function(){return v},NF:function(){return U},TJ:function(){return N},eR:function(){return y},vi:function(){return D}});var F=w(2011);function b(_,I){for(;_.length<I;)_="0"+_;return _}function y(_){return _&&_.split("$$").join("$")}function v(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var R=I.toString();return _.split("$RepresentationID$").join(R)}function D(_,I,R){var Z,z,W,X,le,x,$=I.length,ce=2;if(!_)return _;for(;;){if((Z=_.indexOf("$"+I))<0||(z=_.indexOf("$",Z+$))<0)return _;if((W=_.indexOf("%0",Z+$))>Z&&W<z)switch(X=_.charAt(z-1),le=parseInt(_.substring(W+ce,z-1),10),X){case"d":case"i":case"u":x=b(R.toString(),le);break;case"x":x=b(R.toString(16),le);break;case"X":x=b(R.toString(16),le).toUpperCase();break;case"o":x=b(R.toString(8),le);break;default:return _}else x=R;_=_.substring(0,Z)+x+_.substring(z+1)}}function m(_,I,R,Z,z,W,X,le){var x,$=new F.Z;return $.representation=_,$.duration=I,$.presentationStartTime=R,$.mediaStartTime=Z,$.availabilityStartTime=z.calcAvailabilityStartTimeFromPresentationTime(W,_,X),$.availabilityEndTime=z.calcAvailabilityEndTimeFromPresentationTime(W+I,_,X),$.wallStartTime=z.calcWallTimeForSegment($,X),$.replacementNumber=(x=le,$.representation.startNumber+x),$.index=le,$}function T(_,I,R,Z){var z=I.adaptation.period;if(isFinite(z.duration)&&z.start+z.duration<=R.presentationStartTime)return!1;if(Z){if(I.availabilityTimeOffset==="INF")return!0;var W=_.getClientReferenceTime();return R.availabilityStartTime.getTime()<=W&&(!isFinite(R.availabilityEndTime)||R.availabilityEndTime.getTime()>=W)}return!0}function U(_,I,R,Z){var z,W,X;z=R.segmentDuration,isNaN(z)&&(z=R.adaptation.period.duration),W=parseFloat((R.adaptation.period.start+Z*z).toFixed(5)),X=parseFloat((W+z).toFixed(5));var le=m(R,z,W,_.calcMediaTimeFromPresentationTime(W,R),_,X,I,Z);return T(_,R,le,I)?le:null}function N(_,I,R,Z,z,W,X,le,x,$){var ce,oe,he=Z/W,Ce=z/W;return ce=_.calcPresentationTimeFromMediaTime(he,R),T(_,R,oe=m(R,Ce,ce,he,_,ce+Ce,I,x),I)?(oe.replacementTime=$||Z,X=D(X,"Number",oe.replacementNumber),X=D(X,"Time",oe.replacementTime),oe.media=X,oe.mediaRange=le,oe):null}},3636:function(C,g,w){var F=w(5448),b=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function N(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.Z.MISSING_CONFIG_ERROR)}function _(I,R){if(N(),!I)return null;var Z=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;R=Math.max(R,0);var z=(0,y.NF)(U,T,I,R);if(z){z.replacementTime=Math.round((R-1)*I.segmentDuration*I.timescale,10);var W=Z.media;W=(0,y.vi)(W,"Number",z.replacementNumber),W=(0,y.vi)(W,"Time",z.replacementTime),z.media=W}return z}return{getSegmentByIndex:_,getSegmentByTime:function(I,R){if(N(),!I)return null;var Z=I.segmentDuration;if(isNaN(Z))return null;var z=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,R);return _(I,Math.floor(z/Z))},getMediaFinishedInformation:function(I){var R={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return R;var Z=I.segmentDuration;return isNaN(Z)?R.numberOfSegments=1:R.numberOfSegments=Math.ceil(I.adaptation.period.duration/Z),R}}}v.__dashjs_factory_name="TemplateSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},1724:function(C,g,w){var F=w(5448),b=w(3393),y=w(7387);function v(m,T){var U=(m=m||{}).timelineConverter,N=m.dashMetrics;function _(){if(!U)throw new Error(b.Z.MISSING_CONFIG_ERROR)}function I(Z,z){var W,X,le,x,$,ce,oe,he=Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList,Ce=he.SegmentTimeline,Xe=he.SegmentURL_asArray,Ae=0,Ze=-1;oe=Z.timescale;var nt=!1;for(le=0,x=(W=Ce.S_asArray).length;le<x&&!nt;le++)for(ce=0,(X=W[le]).hasOwnProperty("r")&&(ce=X.r),X.hasOwnProperty("t")&&(Ae=X.t),ce<0&&(ce=R(Z,W[le+1],X,oe,Ae/oe)),$=0;$<=ce&&!nt;$++)(nt=z(Ae,he,Xe,X,oe,++Ze,le))&&(Z.segmentDuration=X.d/oe),Ae+=X.d}function R(Z,z,W,X,le){var x;if(z&&z.hasOwnProperty("t"))x=z.t/X;else try{var $=0;if(isNaN(Z.adaptation.period.start)||isNaN(Z.adaptation.period.duration)||!isFinite(Z.adaptation.period.duration)){var ce=N.getCurrentDVRInfo();$=isNaN(ce.end)?0:ce.end}else $=Z.adaptation.period.start+Z.adaptation.period.duration;x=U.calcMediaTimeFromPresentationTime($,Z),Z.segmentDuration=W.d/X}catch(oe){x=0}return Math.max(Math.ceil((x-le)/(W.d/X))-1,0)}return{getSegmentByIndex:function(Z,z,W){if(_(),!Z)return null;var X=null,le=!1;return I(Z,function(x,$,ce,oe,he,Ce,Xe){if(le||W<0){var Ae=$.media,Ze=oe.mediaRange;return ce&&(Ae=ce[Xe].media||"",Ze=ce[Xe].mediaRange),X=(0,y.TJ)(U,T,Z,x,oe.d,he,Ae,Ze,Ce,oe.tManifest),!0}return x>=W*he-.5*oe.d&&(le=!0),!1}),X},getSegmentByTime:function(Z,z){if(_(),!Z)return null;z===void 0&&(z=null);var W=null,X=U.calcMediaTimeFromPresentationTime(z,Z);return I(Z,function(le,x,$,ce,oe,he,Ce){var Xe=parseFloat((X*oe).toPrecision(15));if(Xe<le+ce.d&&Xe>=le){var Ae=x.media,Ze=ce.mediaRange;return $&&(Ae=$[Ce].media||"",Ze=$[Ce].mediaRange),W=(0,y.TJ)(U,T,Z,le,ce.d,oe,Ae,Ze,he,ce.tManifest),!0}return!1}),W},getMediaFinishedInformation:function(Z){if(!Z)return 0;var z,W,X,le,x,$,ce,oe=(Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentTemplate||Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index].Representation_asArray[Z.index].SegmentList).SegmentTimeline,he=0,Ce=0,Xe=0;for(ce=Z.timescale,le=(z=oe.S_asArray).length,X=0;X<le;X++)for($=0,(W=z[X]).hasOwnProperty("r")&&($=W.r),W.hasOwnProperty("t")&&(Ce=(he=W.t)/ce),$<0&&($=R(Z,z[X+1],W,ce,Ce)),x=0;x<=$;x++)Xe++,Ce=(he+=W.d)/ce;return{numberOfSegments:Xe,mediaTimeOfLastSignaledSegment:Ce}}}}v.__dashjs_factory_name="TimelineSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},2011:function(C,g){g.Z=function w(){(function(F,b){if(!(F instanceof b))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(C,g){g.Z=function w(){(function(F,b){if(!(F instanceof b))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(C,g,w){w.d(g,{Z:function(){return Vm}});var F=w(452),b=w.n(F),y=w(3393),v=w(1553),D=w(3860),m=w(5595),T=w(8512),U=w(5448),N=w(6398),_=w(8825);function I(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee,Le,we,je,j,ue,ae,se=this.context,Q=(0,m.Z)(se).getInstance();function Me(){pe(),ge=!1,Se=0,ye=0,Be=0,j=!1,Ye=!0,Ee=!1,ue=!1,Le=NaN,De=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.off(T.Z.LOADING_PROGRESS,Lt,L),Q.off(T.Z.MANIFEST_UPDATED,qt,L),Q.off(T.Z.STREAMS_COMPOSED,ze,L),Q.off(_.Z.PLAYBACK_ENDED,bt,L),Q.off(_.Z.STREAM_INITIALIZING,st,L),Q.off(_.Z.REPRESENTATION_SWITCH,tt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Wt(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",xn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",It),H.removeEventListener("seeked",$t),H.removeEventListener("timeupdate",Zt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",vn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",Nn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),fe=null,H=null,ie=null,me=null}function Ie(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ke(Ve)-at()).toFixed(5))}function ke(Ve){var Dt=Ve||ie;return Dt.start+Dt.duration}function Re(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Ve&&me&&dt(at()),H.play()):ge=!0}function pe(){ie&&H&&H.pause()}function xe(Ve){var Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],dn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(Le)?H.getTime():Le;Ve!==sr&&((we=dn===!0)||(Le=Ve),P.info("Requesting seek to time: "+Ve+(we?" (internal)":"")),me&&Tn&&dt(Ve),H.setCurrentTime(Ve,Dt))}}function We(){if(ie&&H&&me){var Ve=B&&B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=ee.getCurrentDVRInfo(Ve);return Dt&&Dt.range?Dt.range.end:0}}function dt(Ve){var Dt=new Date(ne.getClientReferenceTime()),dn=J.getRegularPeriods()[0],Tn=ne.calcPresentationTimeFromWallTime(Dt,dn);Se=Tn-Ve}function at(){return ie&&H?H.getTime():null}function Je(){return ie&&H?H.isPaused():null}function ht(){return ie&&H?H.isSeeking():null}function Bt(){return ie&&H?H.isStalled():null}function Gt(){return ie&&H?H.getPlaybackRate():null}function kt(){return ie&&H?H.getEnded():null}function Ft(){return me}function An(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Je()&&me&&H.getReadyState()!==0&&!ht()&&!j){Ve||(Ve=B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO);var Dt=at(),dn=rt(Dt,Ve),Tn=!isNaN(dn)&&dn!==Dt;Tn&&!ht()&&(Bt()||je||H.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(dn," from currentTime: ").concat(Dt)),xe(dn,!1,!1))}}function rt(Ve,Dt){var dn=ee.getCurrentDVRInfo(Dt),Tn=dn?dn.range:null;return Tn?Ve>Tn.end?Math.max(Tn.end-Se,Tn.start):Ve>0&&Ve+.25<Tn.start&&Math.abs(Ve-Tn.start)<31536e4?Ee?Math.max(Tn.end-Se,Tn.start):Tn.start:Ve:NaN}function vt(){fe===null&&(fe=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date}),Ft()){var Ve=Date.now();(isNaN(De)||Ve>De+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),Je()?function(){var Dt=Date.now();(!He||Dt>He+500)&&(He=Dt,Zt())}():An(),De=Ve)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Wt(){clearInterval(fe),fe=null}function Nt(Ve){var Dt=J.convertRepresentationToRepresentationInfo(Ve.currentRepresentation),dn=Dt?Dt.mediaInfo.streamInfo:null;dn!==null&&ie.id===dn.id&&(ie=dn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Yt(Ve){Ve.streamId===B.getActiveStreamInfo().id&&(je=Ve.state===D.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Ve.mediaType,Ve.state===D.Z.BUFFER_EMPTY))}function Dn(){P.info("Native video element event: play"),An(),vt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:at()})}function xn(){P.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:at()})}function rr(){P.info("Native video element event: playing"),we=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:at()})}function ir(){P.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:kt()})}function It(){if(!we){var Ve=at();isNaN(Le)||Le===Ve||(Ve=Le),Le=NaN,P.info("Seeking to: "+Ve),vt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Ve,streamId:ie.id})}}function $t(){P.info("Native video element event: seeked"),we=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Zt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:Ie(),time:at(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function vn(){var Ve=Gt();P.info("Native video element event: ratechange: ",Ve),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Ve})}function Pn(){P.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),vt()}function Nn(){P.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){P.info("Native video element event: ended"),pe(),Wt();var Ve=B?B.getActiveStreamInfo():null;Ve&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:Ve.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function bt(Ve){if(fe&&Ve.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Dt=Ve.seekTime?Ve.seekTime:ke();H.setCurrentTime(Dt),pe(),Wt()}}function Sn(Ve){var Dt=Ve.target||Ve.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Dt.error})}function En(){me=!1}function Lt(Ve){if(Ve.stream===!1&&Ee&&!isNaN(Ve.request.duration)){var Dt=1.2*Ve.request.duration;Dt>Se&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Dt.toFixed(2)),Se=Dt,ye=Dt)}}function On(Ve){Q.trigger(T.Z.PLAYBACK_STALLED,{e:Ve})}function st(Ve){var Dt;(Dt=Ve.mediaInfo)&&Dt.supplementalProperties&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Ee=!0)}function tt(Ve){var Dt=B.getActiveStreamInfo();Ve&&Dt&&Ve.currentRepresentation&&Ve.streamId&&Ve.streamId===Dt.id&&Ve.mediaType&&(Ve.mediaType===y.Z.VIDEO||Ve.mediaType===y.Z.AUDIO)&&(Ye=Ve.currentRepresentation.availabilityTimeComplete,(Ee=!Ye)&&!ue&&(ue=!0))}function qt(){j=!0}function ze(){j=!1}return L={initialize:function(Ve,Dt){ie=Ve,Dt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",xn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",It),H.addEventListener("seeked",$t),H.addEventListener("timeupdate",Zt),H.addEventListener("progress",un),H.addEventListener("ratechange",vn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",Nn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),me=ie.manifestInfo.isDynamic,je=!1,we=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.on(T.Z.LOADING_PROGRESS,Lt,L),Q.on(T.Z.MANIFEST_UPDATED,qt,L),Q.on(T.Z.STREAMS_COMPOSED,ze,L),Q.on(_.Z.PLAYBACK_ENDED,bt,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,st,L),Q.on(_.Z.REPRESENTATION_SWITCH,tt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),ge&&(ge=!1,Re()))},setConfig:function(Ve){Ve&&(Ve.streamController&&(B=Ve.streamController),Ve.serviceDescriptionController&&(V=Ve.serviceDescriptionController),Ve.dashMetrics&&(ee=Ve.dashMetrics),Ve.adapter&&(J=Ve.adapter),Ve.videoModel&&(H=Ve.videoModel),Ve.timelineConverter&&(ne=Ve.timelineConverter),Ve.settings&&(ae=Ve.settings))},getTimeToStreamEnd:Ie,getBufferLevel:function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Dt=null;return B.getActiveStreamProcessors().forEach(function(dn){if(!Ve||Ve.length===0||Ve.indexOf(dn.getType())===-1){var Tn=dn.getBufferLevel();Dt=Dt===null?Tn:Math.min(Dt,Tn)}}),Dt},getPlaybackStalled:function(){return je},getTime:at,getLowLatencyModeEnabled:function(){return Ee},getInitialCatchupModeActivated:function(){return ue},getIsManifestUpdateInProgress:function(){return j},getPlaybackRate:Gt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:kt,getIsDynamic:Ft,getStreamController:function(){return B},computeAndSetLiveDelay:function(Ve,Dt){var dn,Tn,sr,Zr=!isNaN(Ve)&&isFinite(Ve)?Ve:NaN,Ai=J.getSuggestedPresentationDelay(),zr=V.getServiceDescriptionSettings();return dn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ai!==null&&!isNaN(Ai)&&Ai>0?Ai:isNaN(Zr)?Dt&&!isNaN(Dt.minBufferTime)?4*Dt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Be=sr),Tn=Dt&&Dt.dvrWindowSize>0?Math.min(dn,Dt.dvrWindowSize):dn,Se=Tn,ye=Tn,Tn},getLiveDelay:function(){return Se},getOriginalLiveDelay:function(){return ye},getCurrentLiveLatency:function(){if(!me||isNaN(Be))return NaN;var Ve=at();if(isNaN(Ve)||Ve===0)return 0;var Dt=new Date().getTime()+1e3*ne.getClientTimeOffset();return Math.max(((Dt-Be-1e3*Ve)/1e3).toFixed(3),0)},play:Re,isPaused:Je,isStalled:Bt,pause:pe,isSeeking:ht,getStreamEndTime:ke,seek:xe,seekToOriginalLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],dn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=We();if(Tn!==0){var sr=Tn-(Se=ye);xe(sr,Ve,Dt,dn)}},seekToCurrentLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],dn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=We();if(Tn!==0){var sr=Tn-Se;xe(sr,Ve,Dt,dn)}},reset:Me,updateCurrentTime:An,getAvailabilityStartTime:function(){return Be}},P=(0,N.Z)(se).getInstance().getLogger(L),Me(),L}I.__dashjs_factory_name="PlaybackController";var R=U.Z.getSingletonFactory(I),Z=w(3186),z="loading",W="executed",X="failed";function le(L){var P,B,V,ee,J=(L=L||{}).eventBus,H=L.events,ne=L.dashMetrics,fe=L.fragmentLoader,Se=L.debug,ye=L.streamInfo,ie=L.type;function me(j){var ue;return!!j&&(ue=!1,V.some(function(ae){if(se=j,Q=ae,!isNaN(se.index)&&se.startTime===Q.startTime&&se.adaptationIndex===Q.adaptationIndex&&se.type===Q.type||function(Me,Ie){return isNaN(Me.index)&&isNaN(Ie.index)&&Me.quality===Ie.quality}(j,ae)||function(Me,Ie){return Me.action===Z.Z.ACTION_COMPLETE&&Me.action===Ie.action}(j,ae))return ue=!0;var se,Q}),ue)}function ge(j){return isNaN(j.duration)?.25:Math.min(j.duration/8,.5)}function He(j){V=V.filter(function(ue){var ae=ge(ue);return isNaN(ue.startTime)||j!==void 0&&ue.startTime>=j-ae})}function De(j,ue){ue<=j+.5||(V=V.filter(function(ae){var se=ge(ae);return isNaN(ae.startTime)||ae.startTime>=ue-se||isNaN(ae.duration)||ae.startTime+ae.duration<=j+se}))}function Be(j,ue,ae){for(var se=j.length-1;se>=0;se--){var Q=j[se],Me=Q.startTime,Ie=Me+Q.duration;if(ae=isNaN(ae)?ge(Q):ae,!isNaN(Me)&&!isNaN(Ie)&&ue+ae>=Me&&ue-ae<Ie||isNaN(Me)&&isNaN(ue))return Q}return null}function Ye(j,ue){ne.addSchedulingInfo(j,ue),ne.addRequestsQueue(j.mediaType,ee,V)}function Ee(j){j.sender===fe&&(ee.splice(ee.indexOf(j.request),1),j.response&&!j.error&&V.push(j.request),Ye(j.request,j.error?X:W),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:j.request,response:j.response,error:j.error,sender:this},{streamId:ye.id,mediaType:ie}))}function Le(j){j.sender===fe&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:j.request,response:j.response,error:j.error,sender:this},{streamId:ye.id,mediaType:ie})}function we(j){j.sender===fe&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:j.request},{streamId:ye.id,mediaType:ie})}function je(){V=[],ee=[]}return P={getStreamId:function(){return ye.id},getType:function(){return ie},getRequests:function(j){var ue=j?j.state instanceof Array?j.state:[j.state]:[],ae=[];return ue.forEach(function(se){var Q=function(Me){var Ie;switch(Me){case z:Ie=ee;break;case W:Ie=V;break;default:Ie=[]}return Ie}(se);ae=ae.concat(function(Me,Ie){return Ie.hasOwnProperty("time")?[Be(Me,Ie.time,Ie.threshold)]:Me.filter(function(ke){for(var Re in Ie)if(Re!=="state"&&Ie.hasOwnProperty(Re)&&ke[Re]!=Ie[Re])return!1;return!0})}(Q,j))}),ae},isFragmentLoaded:me,isFragmentLoadedOrPending:function(j){var ue,ae=!1,se=0;if(!(ae=me(j)))for(se=0;se<ee.length;se++)ue=ee[se],j.url===ue.url&&j.startTime===ue.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:He,removeExecutedRequestsAfterTime:function(j){V=V.filter(function(ue){return isNaN(ue.startTime)||j!==void 0&&ue.startTime<j})},syncExecutedRequestsWithBufferedRange:function(j,ue){if(j&&j.length!==0){for(var ae=0,se=0,Q=j.length;se<Q;se++)De(ae,j.start(se)),ae=j.end(se);ue>0&&De(ae,ue)}else He()},abortRequests:function(){B.debug("abort requests"),fe.abort(),ee=[]},executeRequest:function(j){j.action===Z.Z.ACTION_DOWNLOAD?(Ye(j,z),ee.push(j),function(ue){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:ue},{streamId:ye.id,mediaType:ie}),fe.load(ue)}(j)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,Ee,this),J.off(H.LOADING_DATA_PROGRESS,Le,this),J.off(H.LOADING_ABANDONED,we,this),fe&&fe.reset(),je()},resetInitialSettings:je,addExecutedRequest:function(j){V.push(j)}},B=Se.getLogger(P),je(),J.on(H.LOADING_COMPLETED,Ee,P),J.on(H.LOADING_DATA_PROGRESS,Le,P),J.on(H.LOADING_ABANDONED,we,P),P}le.__dashjs_factory_name="FragmentModel";var x=U.Z.getClassFactory(le);x.FRAGMENT_MODEL_LOADING=z,x.FRAGMENT_MODEL_EXECUTED=W,x.FRAGMENT_MODEL_CANCELED="canceled",x.FRAGMENT_MODEL_FAILED=X,U.Z.updateClassFactory(le.__dashjs_factory_name,x);var $=x,ce=w(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},oe(L)}function he(L,P){return he=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},he(L,P)}function Ce(L,P){return!P||oe(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Xe(L){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Xe(L)}var Ae=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&he(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Xe(P);if(B){var ne=Xe(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Ce(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(w(2230).Z)),Ze=w(1264),nt=w(7855);function lt(L){var P,B,V,ee,J,H,ne=this.context,fe=(0,Ze.Z)(ne).getInstance(),Se=L.textController,ye=L.eventBus,ie=[],me=[],ge=!1,He=L.mediaSource,De=null;function Be(Q){return new Promise(function(Me){se(function(){ee.changeType&&ee.changeType(Q),Me()})})}function Ye(Q){return ee=Se.getTextSourceBuffer(Q),Promise.resolve()}function Ee(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",ue,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(ue,50)}else H=setInterval(ue,50)}function Le(Q){return new Promise(function(Me){ee&&fe.get().streaming.buffer.useAppendWindow?se(function(){try{if(!ee)return void Me();var Ie=He.duration,ke=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(Ie=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(ke=Q.start),ee.appendWindowEnd===Ie&&ee.appendWindowStart===ke||(ee.appendWindowStart=0,ee.appendWindowEnd=Ie+.01,ee.appendWindowStart=Math.max(ke-.1,0),V.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Me()}catch(Re){V.warn("Failed to set append window"),Me()}}):Me()})}function we(Q){return new Promise(function(Me){ee?se(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,V.debug("Set MSE timestamp offset to ".concat(Q))),Me()}catch(Ie){Me()}}):Me()})}function je(){if(!ge&&me.length>0){ge=!0;var Q=me[0];me.splice(0,1);var Me=function(){ge=!1,me.length>0&&je.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==nt.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{De=Q.request,Q.data.bytes.byteLength===0?Me.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),se(Me.bind(this)))}catch(Ie){V.fatal('SourceBuffer append failed "'+Ie+'"'),me.length>0?je():ge=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new ce.Z(Ie.code,Ie.message)})}}}function j(){ie.length>0&&(ee.updating||(ie.shift()(),j()))}function ue(){ee.updating||j()}function ae(Q){var Me,Ie,ke=Q.target||{};Me=T.Z.SOURCE_BUFFER_ERROR,Ie={error:ke,lastRequestAppended:De},ye.trigger(Me,Ie,{streamId:J.streamInfo.id,mediaType:B})}function se(Q){ie.push(Q),ee.updating||j()}return P={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return V.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Me=this,Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ke,Re){Q?(me.push({data:Q,promise:{resolve:ke,reject:Re},request:Ie}),se(je.bind(Me))):Re({chunk:Q,error:new ce.Z(Ae.APPEND_ERROR_CODE,Ae.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Me,Ie){var ke=Q.start,Re=Q.end;ke>=0&&Re>ke?se(function(){try{ee.remove(ke,Re),se(function(){Me({from:ke,to:Re,unintended:!1}),Q.resolve&&Q.resolve()})}catch(pe){Ie({from:ke,to:Re,unintended:!1,error:new ce.Z(Ae.REMOVE_ERROR_CODE,Ae.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(pe)}}):Me()})},abort:function(){return new Promise(function(Q){try{me=[],He.readyState==="open"?se(function(){try{ee&&ee.abort(),Q()}catch(Me){Q()}}):(ee&&ee.setTextTrack&&He.readyState==="ended"&&ee.abort(),Q())}catch(Me){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",ue,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){V.error(Q)}}(),ge=!1,me=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),He.removeSourceBuffer(ee))}catch(Q){}ee=null}De=null},updateTimestampOffset:we,initializeForStreamSwitch:function(Q,Me,Ie){B=(J=Q).type;var ke=J.codec;(function(pe){ee=pe.getBuffer()})(Ie),Ee();var Re=[];return Re.push(new Promise(function(pe){se(function(){var xe=ee.appendWindowStart,We=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=xe,ee.appendWindowEnd=We),pe()})})),Re.push(Le(J.streamInfo)),fe.get().streaming.buffer.useChangeTypeForTrackSwitch&&Re.push(Be(ke)),Me&&Me.MSETimeOffset!==void 0&&Re.push(we(Me.MSETimeOffset)),Promise.all(Re)},initializeForFirstUse:function(Q,Me,Ie){B=(J=Me).type;var ke=J.codec;try{if(ke.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return Ye(Q);ee=He.addSourceBuffer(ke),Ee();var Re=[];return Re.push(Le(J.streamInfo)),Ie&&Ie.MSETimeOffset!==void 0&&Re.push(we(Ie.MSETimeOffset)),Promise.all(Re)}catch(pe){return J.type==y.Z.TEXT&&!J.isFragmented||ke.indexOf('codecs="stpp')!==-1||ke.indexOf('codecs="vtt')!==-1||ke.indexOf("text/vtt")!==-1?Ye(Q):Promise.reject(pe)}},updateAppendWindow:Le,changeType:Be},V=(0,N.Z)(ne).getInstance().getLogger(P),P}lt.__dashjs_factory_name="SourceBufferSink";var qe=U.Z.getClassFactory(lt);function ut(L){var P,B,V,ee=this.context,J=[],H=L;function ne(fe,Se){return J=J.filter(function(ye){return!((isNaN(Se)||ye.start<Se)&&(isNaN(fe)||ye.end>fe))}),Promise.resolve()}return P={getAllBufferRanges:function(){for(var fe=[],Se=0;Se<J.length;Se++){var ye=J[Se];fe.length===0||ye.start>fe[fe.length-1].end?fe.push({start:ye.start,end:ye.end}):fe[fe.length-1].end=ye.end}var ie={start:function(me){return fe[me].start},end:function(me){return fe[me].end}};return Object.defineProperty(ie,"length",{get:function(){return fe.length}}),ie},append:function(fe){return fe.segmentType!=="InitializationSegment"?(J.push(fe),J.sort(function(Se,ye){return Se.start-ye.start}),V=null):V=fe,B.debug("PreBufferSink appended chunk s: "+fe.start+"; e: "+fe.end),H&&H({chunk:fe}),Promise.resolve()},remove:ne,abort:function(){return Promise.resolve()},discharge:function(fe,Se){var ye=function(ie,me){return J.filter(function(ge){return(isNaN(me)||ge.start<me)&&(isNaN(ie)||ge.end>ie)})}(fe,Se);return V&&(ye.push(V),V=null),ne(fe,Se),ye},reset:function(){J=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(fe){fe()},getBuffer:function(){return this}},B=(0,N.Z)(ee).getInstance().getLogger(P),P}ut.__dashjs_factory_name="PreBufferSink";var At=U.Z.getClassFactory(ut);function Oe(){var L={};return{save:function(P){var B=P.streamId,V=P.representationId;L[B]=L[B]||{},L[B][V]=P},extract:function(P,B){return L&&L[P]&&L[P][B]?L[P][B]:null},reset:function(){L={}}}}Oe.__dashjs_factory_name="InitCache";var Qe=U.Z.getSingletonFactory(Oe),ct=.01,Xt="BufferController";function Kt(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee,Le,we,je,j=this.context,ue=(0,m.Z)(j).getInstance(),ae=L.errHandler,se=L.fragmentModel,Q=L.representationController,Me=L.adapter,Ie=L.textController,ke=L.abrController,Re=L.playbackController,pe=L.streamInfo,xe=L.type,We=L.settings;function dt(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ze,Ve){H=tt,Se&&qt&&typeof Se.discharge=="function"?(ye=Se,Je(qt).then(function(){ze()}).catch(function(Dt){Ve(Dt)})):ze()})}function at(tt){return Me.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(tt))}function Je(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(ze,Ve){Ee&&tt?H?(ie=!1,Bt(tt,qt).then(function(Dt){ze(Dt)}).catch(function(Dt){Ve(Dt)})):(ie=!0,ht().then(function(Dt){ze(Dt)}).catch(function(Dt){Ve(Dt)})):ze(null)})}function ht(){var tt=this;return new Promise(function(qt,ze){var Ve=ke.getQualityFor(xe,pe.id);Se=At(j).create(rt.bind(tt)),Pn(at(Ve)).then(function(){qt(Se)}).catch(function(){ze()})})}function Bt(tt,qt){return new Promise(function(ze,Ve){var Dt=ke.getQualityFor(xe,pe.id);Se=qe(j).create({mediaSource:H,textController:Ie,eventBus:ue}),function(dn,Tn,sr){var Zr=at(sr);return Tn&&Tn[xe]&&(xe===y.Z.VIDEO||xe===y.Z.AUDIO)?Se.initializeForStreamSwitch(dn,Zr,Tn[xe]):Se.initializeForFirstUse(pe,dn,Zr)}(tt,qt,Dt).then(function(){return Pn(at(Dt))}).then(function(){ze(Se)}).catch(function(dn){B.fatal("Caught error on create SourceBuffer: "+dn),ae.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+xe)),Ve(dn)})})}function Gt(tt){We.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",xe+"'s init cache"),Ee.save(tt.chunk)),B.debug("Append Init fragment",xe," with representationId:",tt.chunk.representationId," and quality:",tt.chunk.quality,", data size:",tt.chunk.bytes.byteLength),Ft(tt.chunk)}function kt(tt){Ft(tt.chunk,tt.request)}function Ft(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Se&&(Se.append(tt,qt).then(function(ze){rt(ze)}).catch(function(ze){rt(ze)}),tt.mediaInfo.type===y.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:tt}))}function An(tt){if(tt&&tt.length>0)for(var qt=0,ze=tt.length;qt<ze;qt++)B.debug("Buffered range: "+tt.start(qt)+" - "+tt.end(qt)+", currentTime = ",Re.getTime())}function rt(tt){if(tt.error)return tt.error.code===22&&function(){if(Ye=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var Ve=Math.max(.2*J,1),Dt=J-Ve,dn=Math.min(We.get().streaming.buffer.bufferTimeAtTopQuality,.9*Dt),Tn=Math.min(We.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Dt),sr={streaming:{buffer:{bufferToKeep:parseFloat(Ve.toFixed(5)),bufferTimeAtTopQuality:parseFloat(dn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};We.update(sr)}}(),void(tt.error.code!==22&&Lt()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:tt.chunk.start}),Zt($t())));if(Se&&(Dn(),Ye=!1,(He=tt.chunk)&&He.endFragment)){He&&!isNaN(He.index)&&(ne=Math.max(He.index,ne),xn());var qt=Se.getAllBufferRanges();He.segmentType===nt.w.MEDIA_SEGMENT_TYPE&&(An(qt),Nt(),function(){if(!isNaN(je)&&!ie)if(xe===y.Z.AUDIO||xe===y.Z.VIDEO){var Ve=Re.getTime(),Dt=Yt(Ve,0),dn=Yt(je,0);if(Dt&&dn&&Dt.start===dn.start)je=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Yt(je,Tn);sr&&(We.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ve-je)>Tn?je<=sr.end&&Re.seek(Math.max(je,sr.start),!1,!0):Ve<sr.start&&Re.seek(sr.start,!1,!0))}}else je=NaN}());var ze=!1;me&&(me.indexOf(He)>0&&(ze=!0),me=null),He&&!ze&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:He.quality,startTime:He.start,index:He.index,bufferedRanges:qt,segmentType:He.segmentType,mediaType:xe})}}function vt(){return new Promise(function(tt,qt){var ze=Wt();if(!ze||ze.length===0)return Nt(),void tt();Zt(ze).then(function(){tt()}).catch(function(Ve){qt(Ve)})})}function Wt(tt){var qt=[],ze=Se.getAllBufferRanges();if(!ze||ze.length===0)return qt;if(!tt&&tt!==0||isNaN(tt))qt.push({start:ze.start(0),end:ze.end(ze.length-1)+.5});else{var Ve=function(dn,Tn){var sr=We.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(dn-Zr>sr){var Ai=Math.max(0,dn-sr),zr=se.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:dn,threshold:ct})[0];if(zr&&(Ai=Math.min(zr.startTime,Ai)),Ai>0)return{start:Zr,end:Ai}}return null}(tt,ze),Dt=function(dn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(dn),Ai=pe.manifestInfo.duration>=We.get().streaming.buffer.longFormContentDurationThreshold?We.get().streaming.buffer.bufferTimeAtTopQualityLongForm:We.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?dn:Math.min(Zr,dn+Ai);if(zr>=Tn.end(Tn.length-1))return null;var oo=se.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:dn,threshold:ct})[0];if(oo&&(zr=Math.max(oo.startTime+oo.duration,zr)),We.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=dn&&dn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var Gs=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+dn+" and range to be pruned ["+Gs+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(tt,ze);Ve&&qt.push(Ve),Dt&&qt.push(Dt)}return qt}function Nt(){(!we||xe===y.Z.TEXT&&Ie.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),je=NaN}function Yt(tt,qt){if(!Se)return null;var ze,Ve,Dt=Se.getAllBufferRanges(),dn=0,Tn=0,sr=null,Zr=null,Ai=0,zr=isNaN(qt)?.15:qt;if(Dt!=null){for(Ve=0,ze=Dt.length;Ve<ze;Ve++)if(dn=Dt.start(Ve),Tn=Dt.end(Ve),sr===null)Ai=Math.abs(dn-tt),(tt>=dn&&tt<Tn||Ai<=zr)&&(sr=dn,Zr=Tn);else{if(!((Ai=dn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(Re){var tt=Re.getTime()||0;ie&&(tt=isNaN(je)?0:je);var qt=We.get().streaming.gaps.jumpGaps&&!isNaN(We.get().streaming.gaps.smallGapLimit)?We.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(ze,Ve){var Dt;return We.get().streaming.gaps.jumpGaps&&(Ve=We.get().streaming.gaps.smallGapLimit),(Dt=Yt(ze,Ve))===null?0:Dt.end-ze}(tt,qt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:xe,bufferLevel:ee}),rr()}}function xn(){var tt=ne>=fe-1,qt=Re.getTimeToStreamEnd(pe)-ee<1e-5;!tt&&!qt||V||(bt(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(pe.id," and type ").concat(xe)))}function rr(){xe!==y.Z.AUDIO&&xe!==y.Z.VIDEO||((!Re.getLowLatencyModeEnabled()&&ee<We.get().streaming.buffer.stallThreshold||ee===0)&&!V?ir(D.Z.BUFFER_EMPTY):(V||ee>=We.get().streaming.buffer.stallThreshold||Re.getLowLatencyModeEnabled()&&ee>0)&&ir(D.Z.BUFFER_LOADED))}function ir(tt){ge===tt||tt===D.Z.BUFFER_EMPTY&&Re.getTime()===0||xe===y.Z.TEXT&&!Ie.isTextEnabled()||(ge=tt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:tt}),On(tt===D.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(tt===D.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function It(){Se&&xe!==y.Z.TEXT&&(V||Zt($t()))}function $t(){var tt=[],qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return tt;var ze=Re.getTime(),Ve=Math.max(0,ze-We.get().streaming.buffer.bufferToKeep),Dt=se.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:ze,threshold:ct})[0];if(Dt)Ve=Math.min(Dt.startTime,Ve);else if(ze===0&&Re.getIsDynamic())return[];if(qt.start(0)<=Ve){for(var dn={start:0,end:Ve},Tn=0;Tn<qt.length&&qt.end(Tn)<=Ve;Tn++)dn.end=qt.end(Tn);dn.start<dn.end&&tt.push(dn)}return tt}function Zt(tt){return new Promise(function(qt,ze){if(tt&&Se&&tt.length!==0){var Ve=[];tt.forEach(function(Dt){Ve.push(function(dn){return new Promise(function(Tn,sr){dn.resolve=Tn,dn.reject=sr,Le.push(dn)})}(Dt))}),Be||un(),Promise.all(Ve).then(function(){qt()}).catch(function(Dt){ze(Dt)})}else qt()})}function un(){try{if(Le.length===0||!Se)return B.debug("Nothing to prune, halt pruning"),Le=[],void(Be=!1);var tt=Se.getBuffer();if(!tt||!tt.buffered||tt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),Le=[],void(Be=!1);var qt=Le.shift();B.debug("".concat(xe,": Removing buffer from: ").concat(qt.start," to ").concat(qt.end)),Be=!0,Re.getTime()<qt.end&&bt(!1),Se.remove(qt).then(function(ze){vn(ze)}).catch(function(ze){vn(ze)})}catch(ze){Be=!1}}function vn(tt){B.debug("onRemoved buffer from:",tt.from,"to",tt.to),Se&&(An(Se.getAllBufferRanges()),Le.length===0&&(Be=!1,Dn()),tt.unintended&&(B.warn("Detected unintended removal from:",tt.from,"to",tt.to,"setting streamprocessor time to",tt.from),On(T.Z.SEEK_TARGET,{time:tt.from})),Be?un():(we?we=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:tt.from,to:tt.to,unintended:tt.unintended,hasEnoughSpaceToAppend:Lt(),quotaExceeded:Ye})))}function Pn(tt){return new Promise(function(qt){tt&&tt.MSETimeOffset!==void 0&&Se&&Se.updateTimestampOffset?Se.updateTimestampOffset(tt.MSETimeOffset).then(function(){qt()}).catch(function(){qt()}):qt()})}function Nn(){return Se&&!V?Se.updateAppendWindow(pe):Promise.resolve()}function Fn(){++De*(We.get().streaming.wallclockTimeUpdateInterval/1e3)>=We.get().streaming.buffer.bufferPruningInterval&&(De=0,It())}function Gn(){rr()}function bt(tt){(V=tt)?On(T.Z.BUFFERING_COMPLETED):fe=Number.POSITIVE_INFINITY}function Sn(){try{var tt,qt,ze=Se.getAllBufferRanges(),Ve=0;if(!ze)return Ve;for(qt=0,tt=ze.length;qt<tt;qt++)Ve+=ze.end(qt)-ze.start(qt);return Ve}catch(Dt){return 0}}function En(tt){try{var qt=tt,ze=Se.getAllBufferRanges();if(!ze||ze.length===0)return NaN;for(var Ve=0;qt===tt&&Ve<ze.length;){var Dt=ze.start(Ve),dn=ze.end(Ve);qt>=Dt&&qt<=dn&&(qt=dn),Ve+=1}return qt===tt?NaN:qt}catch(Tn){}}function Lt(){var tt=Sn();return isNaN(tt)||tt<J}function On(tt,qt){var ze=qt||{};ue.trigger(tt,ze,{streamId:pe.id,mediaType:xe})}function st(tt,qt){if(J=Number.POSITIVE_INFINITY,ge=void 0,fe=Number.POSITIVE_INFINITY,ne=0,He=null,V=!1,Be=!1,Ye=!1,ee=0,De=0,Le=[],je=NaN,ie=!1,Se){var ze=Se;Se=null,tt||qt||ze.abort().then(function(){ze.reset(qt),ze=null})}we=!1}return P={initialize:function(tt){dt(tt),ue.on(T.Z.INIT_FRAGMENT_LOADED,Gt,P),ue.on(T.Z.MEDIA_FRAGMENT_LOADED,kt,P),ue.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,P),ue.on(_.Z.PLAYBACK_PLAYING,Jt,P),ue.on(_.Z.PLAYBACK_PROGRESS,Nt,P),ue.on(_.Z.PLAYBACK_TIME_UPDATED,Nt,P),ue.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,P),ue.on(_.Z.PLAYBACK_STALLED,en,P)},getStreamId:function(){return pe.id},getType:function(){return xe},getBufferControllerType:function(){return Xt},createBufferSink:Je,dischargePreBuffer:function(){if(Se&&ye&&typeof ye.discharge=="function"){var tt=ye.getAllBufferRanges();if(tt.length>0){for(var qt="Beginning "+xe+"PreBuffer discharge, adding buffer for:",ze=0;ze<tt.length;ze++)qt+=" start: "+tt.start(ze)+", end: "+tt.end(ze)+";";B.debug(qt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");me=[];for(var Ve=ye.discharge(),Dt=null,dn=0;dn<Ve.length;dn++){var Tn=Ve[dn];if(Tn.segmentType!==nt.w.INIT_SEGMENT_TYPE){var sr=Ee.extract(Tn.streamId,Tn.representationId);sr&&Dt!==sr&&(me.push(sr),Se.append(sr),Dt=sr)}me.push(Tn),Se.append(Tn)}ye.reset(),ye=null}},getBuffer:function(){return Se},getBufferLevel:function(){return ee},getRangeAt:Yt,hasBufferAtTime:function(tt){try{var qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return!1;for(var ze=0;ze<qt.length;){var Ve=qt.start(ze),Dt=qt.end(ze);if(tt>=Ve&&tt<=Dt)return!0;ze+=1}return!1}catch(dn){return B.error(dn),!1}},pruneBuffer:It,setMediaSource:dt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(tt){var qt=Ee.extract(pe.id,tt);return!!qt&&(B.info("Append Init fragment",xe," with representationId:",qt.representationId," and quality:",qt.quality,", data size:",qt.bytes.byteLength),Ft(qt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:bt,getIsPruningInProgress:function(){return Be},reset:function(tt,qt){ue.off(T.Z.INIT_FRAGMENT_LOADED,Gt,this),ue.off(T.Z.MEDIA_FRAGMENT_LOADED,kt,this),ue.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),ue.off(_.Z.PLAYBACK_PLAYING,Jt,this),ue.off(_.Z.PLAYBACK_PROGRESS,Nt,this),ue.off(_.Z.PLAYBACK_TIME_UPDATED,Nt,this),ue.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),ue.off(_.Z.PLAYBACK_STALLED,en,this),st(tt,qt)},prepareForPlaybackSeek:function(){return V&&bt(!1),Se.abort()},prepareForReplacementTrackSwitch:function(tt){return new Promise(function(qt,ze){Se.abort().then(function(){return Nn()}).then(function(){return We.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){return vt()}).then(function(){bt(!1),qt()}).catch(function(Ve){ze(Ve)})})},prepareForNonReplacementTrackSwitch:function(tt){return new Promise(function(qt,ze){Nn().then(function(){return We.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){qt()}).catch(function(Ve){ze(Ve)})})},prepareForForceReplacementQualitySwitch:function(tt){return new Promise(function(qt,ze){Se.abort().then(function(){return Nn()}).then(function(){return vt()}).then(function(){return Pn(tt)}).then(function(){bt(!1),qt()}).catch(function(Ve){ze(Ve)})})},updateAppendWindow:Nn,getAllRangesWithSafetyFactor:Wt,getContinuousBufferTimeForTargetTime:En,clearBuffers:Zt,pruneAllSafely:vt,updateBufferTimestampOffset:Pn,setSeekTarget:function(tt){je=tt},segmentRequestingCompleted:function(tt){isNaN(tt)||(fe=tt,xn())}},B=(0,N.Z)(j).getInstance().getLogger(P),Ee=Qe(j).getInstance(),st(),P}Kt.__dashjs_factory_name=Xt;var Tt=U.Z.getClassFactory(Kt),Ct="NotFragmentedTextBufferController";function be(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,fe=(0,m.Z)(ne).getInstance(),Se=L.textController,ye=L.errHandler,ie=L.streamInfo,me=L.type;function ge(Be){ee=Be}function He(Be){var Ye,Ee;B!==Be&&(B=Be)&&(Ye=T.Z.BUFFERING_COMPLETED,Ee={},fe.trigger(Ye,Ee,{streamId:ie.id,mediaType:me}))}function De(Be){Be.chunk.bytes&&!B&&(H.save(Be.chunk),J.append(Be.chunk),He(!0))}return P={initialize:function(Be){ge(Be)},getStreamId:function(){return ie.id},getType:function(){return me},getBufferControllerType:function(){return Ct},createBufferSink:function(Be){return new Promise(function(Ye,Ee){try{(J=qe(ne).create({mediaSource:ee,textController:Se,eventBus:fe})).initializeForFirstUse(ie,Be),V||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),V=!0),Ye(J)}catch(Le){ye.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),Ee(Le)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ge,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Be){return H.extract(ie.id,Be)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:He,getIsPruningInProgress:function(){return!1},reset:function(Be){fe.off(T.Z.INIT_FRAGMENT_LOADED,De,P),!Be&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,ee=null,B=!1,H=Qe(ne).getInstance(),fe.on(T.Z.INIT_FRAGMENT_LOADED,De,P),P}be.__dashjs_factory_name=Ct;var re=U.Z.getClassFactory(be);function Fe(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He=this.context,De=(0,m.Z)(He).getInstance(),Be=L.dashMetrics,Ye=L.mediaPlayerModel,Ee=L.fragmentModel,Le=L.abrController,we=L.playbackController,je=L.textController,j=L.type,ue=L.bufferController,ae=L.representationController,se=L.settings;function Q(){me=!0}function Me(){me=!1}function Ie(Bt){if(!ue.getIsBufferingCompleted()){ke();var Gt=isNaN(Bt)?0:Bt;J=setTimeout(Re,Gt)}}function ke(){J&&(clearTimeout(J),J=null)}function Re(){try{if(function(){try{return j===y.Z.TEXT&&!je.isTextEnabled()||we.isPaused()&&(!we.getStreamController().getInitialPlayback()||!we.getStreamController().getAutoPlay())&&!se.get().streaming.scheduling.scheduleWhilePaused}catch(kt){return!1}}())return void ke();if(function(){try{return!!me&&ae.getCurrentRepresentationInfo()&&(isNaN(Se)||ye||(kt=B.id,Ft=Le.getMaxAllowedIndexFor(j,kt),!(!isNaN(fe)&&fe==Ft||(V.info("Top quality "+j+" index has changed from "+fe+" to "+Ft),fe=Ft,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!j||!An||Be.getCurrentBufferLevel(j)<pe()}())}catch(An){return!1}var kt,Ft}()){var Bt=!1;ge&&(Bt=Le.checkPlaybackQuality(j,B.id)),Bt||(Gt=ae.getCurrentRepresentationInfo(),ie||Gt.quality!==Se||ye?(ye?(V.debug("Switch track for "+j+", representation id = "+Gt.id),ye=!1):V.debug("Quality has changed, get init request for representationid = "+Gt.id),De.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Gt.id,sender:P},{streamId:B.id,mediaType:j}),ge=!1,ie=!1):(V.debug("Media segment needed for ".concat(j," and stream id ").concat(B.id)),De.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:j}),ge=!0))}else Ie(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}catch(kt){Ie(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}var Gt}function pe(){var Bt=NaN,Gt=ae.getCurrentRepresentationInfo();return j&&Gt&&(Bt=j===y.Z.TEXT?function(){try{if(je.isTextEnabled()){var kt=ae.getCurrentRepresentationInfo();if(isNaN(kt.fragmentDuration)){var Ft=Be.getCurrentSchedulingInfo(D.Z.SCHEDULING_INFO);return Ft?Ft.duration:0}return kt.fragmentDuration}return 0}catch(An){return 0}}():j===y.Z.AUDIO&&H?function(){try{var kt=Be.getCurrentBufferLevel(y.Z.VIDEO),Ft=ae.getCurrentRepresentationInfo();return isNaN(Ft.fragmentDuration)?kt+1:Math.max(kt+1,Ft.fragmentDuration)}catch(An){return 0}}():function(){try{var kt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Le.isPlayingAtTopQuality(kt)?kt.manifestInfo.duration>=se.get().streaming.buffer.longFormContentDurationThreshold?se.get().streaming.buffer.bufferTimeAtTopQualityLongForm:se.get().streaming.buffer.bufferTimeAtTopQuality:Ye.getStableBufferTime()}catch(Ft){return Ye.getStableBufferTime()}}()),Bt}function xe(){We(!0)}function We(Bt){if(we&&Ee){var Gt=Ee.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:we.getTime(),threshold:0})[0];Gt&&we.getTime()>=Gt.startTime&&((!ne.mediaInfo||Gt.mediaInfo.type===ne.mediaInfo.type&&Gt.mediaInfo.index!==ne.mediaInfo.index)&&Bt&&De.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:j,oldMediaInfo:ne.mediaInfo,newMediaInfo:Gt.mediaInfo,streamId:B.id}),Gt.quality===ne.quality&&Gt.adaptationIndex===ne.adaptationIndex||!Bt||(V.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(j)),De.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:j,oldQuality:ne.quality,newQuality:Gt.quality,streamId:B.id})),ne={mediaInfo:Gt.mediaInfo,quality:Gt.quality,adaptationIndex:Gt.adaptationIndex})}}function dt(){Ee.abortRequests(),ke()}function at(){se.get().streaming.scheduling.scheduleWhilePaused||Ie()}function Je(Bt){Be.updatePlayListTraceMetrics({playbackspeed:Bt.playbackRate.toString()})}function ht(){ge=!0,ee=0,Se=NaN,ne={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},fe=NaN,ye=!1,ie=!1,me=!0}return P={initialize:function(Bt){H=Bt,De.on(T.Z.URL_RESOLUTION_FAILED,dt,P),De.on(_.Z.PLAYBACK_STARTED,at,P),De.on(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.on(_.Z.PLAYBACK_TIME_UPDATED,xe,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P)},getType:function(){return j},getStreamId:function(){return B.id},setTimeToLoadDelay:function(Bt){ee=Bt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(Bt){ye=Bt},getSwitchTrack:function(){return ye},startScheduleTimer:Ie,clearScheduleTimer:ke,reset:function(){De.off(T.Z.URL_RESOLUTION_FAILED,dt,P),De.off(_.Z.PLAYBACK_STARTED,at,P),De.off(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.off(_.Z.PLAYBACK_TIME_UPDATED,xe,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P),ke(),We(!1),ht(),B=null},getBufferTarget:pe,getPlaybackController:function(){return we},setCheckPlaybackQuality:function(Bt){ge=Bt},setInitSegmentRequired:function(Bt){ie=Bt},setLastInitializedQuality:function(Bt){Se=Bt}},V=(0,N.Z)(He).getInstance().getLogger(P),ht(),B=L.streamInfo,P}Fe.__dashjs_factory_name="ScheduleController";var O=U.Z.getClassFactory(Fe),M=w(7387);function q(L){var P,B,V,ee,J,H,ne=(L=L||{}).eventBus,fe=L.events,Se=L.abrController,ye=L.dashMetrics,ie=L.playbackController,me=L.timelineConverter,ge=L.type,He=L.streamInfo,De=L.dashConstants,Be=L.segmentsController,Ye=L.isDynamic,Ee=L.adapter;function Le(){return ge}function we(){return V}function je(){return H}function j(){B=null,V=!0,ee=[],J=null}function ue(ke){return new Promise(function(Re,pe){var xe=ke.hasInitialization(),We=ke.hasSegments(),dt=[];dt.push(Be.updateInitData(ke,xe)),dt.push(Be.updateSegmentData(ke,We)),Promise.all(dt).then(function(at){var Je;at[0]&&!at[0].error&&(ke=function(ht,Bt){return Bt&&!Bt.error&&Bt.representation?Bt.representation:ht}(ke,at[0])),at[1]&&!at[1].error&&(ke=function(ht,Bt){if(Bt&&!Bt.error){var Gt,kt,Ft,An,rt=Bt.segments,vt=[],Wt=0;for(Gt=0,kt=rt?rt.length:0;Gt<kt;Gt++)Ft=rt[Gt],(An=(0,M.TJ)(me,Ye,ht,Ft.startTime,Ft.duration,Ft.timescale,Ft.media,Ft.mediaRange,Wt))&&(vt.push(An),An=null,Wt++);return vt.length>0&&(ht.segments=vt),ht}}(ke,at[1])),(Je=ke).mediaFinishedInformation=Be.getMediaFinishedInformation(Je),function(ht){if(we()){var Bt,Gt,kt=ye.getCurrentManifestUpdate(),Ft=!1;if(kt){for(var An=0;An<kt.representationInfo.length;An++)if((Bt=kt.representationInfo[An]).index===ht.index&&Bt.mediaType===Le()){Ft=!0;break}Ft||ye.addManifestUpdateRepresentationInfo(ht,Le())}if(function(){for(var vt=0,Wt=ee.length;vt<Wt;vt++){var Nt=ee[vt].segmentInfoType;if(!ee[vt].hasInitialization()||(Nt===De.SEGMENT_BASE||Nt===De.BASE_URL)&&!ee[vt].segments)return!1}return!0}()){Se.setPlaybackQuality(ge,He,(Gt=H,ee.indexOf(Gt)));var rt=ye.getCurrentDVRInfo(ge);rt&&ye.updateManifestUpdateInfo({latency:rt.range.end-ie.getTime()}),ye.getCurrentRepresentationSwitch(je().adaptation.type)||ae(),Q()}}}(ke),Re()}).catch(function(at){pe(at)})})}function ae(){(function(){if(!(Se&&ye&&ie&&me))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var ke=new Date,Re=je(),pe=1e3*ie.getTime();Re&&ye.addRepresentationSwitch(Re.adaptation.type,ke,pe,Re.id),ne.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ge,streamId:He.id,currentRepresentation:Re,numberOfRepresentations:ee.length},{streamId:He.id,mediaType:ge})}function se(ke){return ke==null||ke>=ee.length?null:ee[ke]}function Q(ke){V=!1,ne.trigger(fe.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:ke},{streamId:He.id,mediaType:ge})}function Me(ke){H=ke,J=Ee.convertRepresentationToRepresentationInfo(H)}function Ie(ke){if(ke.newDuration){var Re=je();Re&&Re.adaptation.period&&(Re.adaptation.period.duration=ke.newDuration)}}return P={getStreamId:function(){return He.id},getType:Le,getData:function(){return B},isUpdating:we,updateData:function(ke,Re,pe,xe,We){return new Promise(function(dt,at){if(V=!0,ee=Re,B=ke,Me(se(We)),pe!==y.Z.VIDEO&&pe!==y.Z.AUDIO&&(pe!==y.Z.TEXT||!xe))return Q(),void dt();for(var Je=[],ht=0,Bt=ee.length;ht<Bt;ht++){var Gt=ee[ht];Je.push(ue(Gt))}Promise.all(Je).then(function(){Me(se(We)),dt()}).catch(function(kt){at(kt)})})},getCurrentRepresentation:je,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:se,prepareQualityChange:function(ke){Me(se(ke)),ae()},reset:function(){ne.off(_.Z.MANIFEST_VALIDITY_CHANGED,Ie,P),j()}},j(),ne.on(_.Z.MANIFEST_VALIDITY_CHANGED,Ie,P),P}q.__dashjs_factory_name="RepresentationController";var K=U.Z.getClassFactory(q),_e=w(3106),de=w(9326),Ke=w(7473),St=w(2594);function ot(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var it=function L(){ot(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};it.INITIAL_PLAYOUT_START_REASON="initial_playout",it.SEEK_START_REASON="seek",it.RESUME_FROM_PAUSE_START_REASON="resume",it.METRICS_COLLECTION_START_REASON="metrics_collection_start";var et=function L(){ot(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};et.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",et.REBUFFERING_REASON="rebuffering",et.USER_REQUEST_STOP_REASON="user_request",et.END_OF_PERIOD_STOP_REASON="end_of_period",et.END_OF_CONTENT_STOP_REASON="end_of_content",et.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",et.FAILURE_STOP_REASON="failure";var ft=w(7802);function yt(){return{ntpToUTC:function(L){var P=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(P.getTime()+L).getTime()}}}yt.__dashjs_factory_name="TimeUtils";var _t=U.Z.getSingletonFactory(yt);function Rt(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be=this.context,Ye=(0,m.Z)(Be).getInstance(),Ee=L.streamInfo,Le=L.type,we=L.errHandler,je=L.mimeType,j=L.timelineConverter,ue=L.adapter,ae=L.manifestModel,se=L.mediaPlayerModel,Q=L.fragmentModel,Me=L.abrController,Ie=L.playbackController,ke=L.mediaController,Re=L.textController,pe=L.dashMetrics,xe=L.settings,We=L.boxParser,dt=L.segmentBlacklistController;function at(){return Ee.id}function Je(){return Le}function ht(){return ue.getIsTextTrack(fe.getData())}function Bt(){J=[],ee=null,He=0,Se=!1,ye=!1,ie=!1,De=null}function Gt(st){return!isNaN(st)&&!isNaN(Ee.duration)&&isFinite(Ee.duration)&&st>=Ee.start+Ee.duration}function kt(st){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(st.sender){if(Ie.getIsManifestUpdateInProgress())Wt();else if((!ht()||Re.isTextEnabled())&&H&&st.representationId&&!H.appendInitSegmentFromCache(st.representationId)){var qt=fe.getCurrentRepresentation();if(qt.range===0)return void Ft();var ze=me?me.getInitRequest(ee,qt):null;ze?Q.executeRequest(ze):tt&&(ne.setInitSegmentRequired(!0),Wt())}}}function Ft(st){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ie.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Wt();else{var qt=vt();qt?(Se=!1,ye=!1,An(qt)):rt(tt)}}function An(st){isNaN(st.startTime+st.duration)||(He=st.startTime+st.duration),st.delayLoadingTime=new Date().getTime()+ne.getTimeToLoadDelay(),ne.setTimeToLoadDelay(0),function(tt){var qt=tt.url;return tt.range&&(qt=qt.concat("_",tt.range)),dt.contains(qt)}(st)?(B.warn("Fragment request url ".concat(st.url," for stream id ").concat(Ee.id," and media type ").concat(Le," is on the ignore list and will be skipped")),Wt()):(B.debug("Next fragment request url for stream id ".concat(Ee.id," and media type ").concat(Le," is ").concat(st.url)),Q.executeRequest(st))}function rt(st){var tt,qt=fe.getCurrentRepresentation();if(!xe.get().streaming.gaps.enableSeekFix||!Se&&Ie.getTime()!==0||(V?V&&qt.segmentInfoType===v.Z.SEGMENT_TIMELINE&&(tt=me.getValidTimeAheadOfTargetTime(He,ee,qt,xe.get().streaming.gaps.threshold)):tt=me.getValidTimeAheadOfTargetTime(He,ee,qt,xe.get().streaming.gaps.threshold),isNaN(tt)||tt===He)){if(me.isLastSegmentRequested(qt,He)){var ze=me.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(Ee.id," has finished")),Ye.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:ze},{streamId:Ee.id,mediaType:Le}),H.segmentRequestingCompleted(ze),void ne.clearScheduleTimer()}st&&Wt()}else Ie.isSeeking()||Ie.getTime()===0?(B.warn("Adjusting playback time ".concat(tt," because of gap in the manifest. Seeking by ").concat(tt-He)),Ie.seek(tt,!1,!1)):(B.warn("Adjusting buffering time ".concat(tt," because of gap in the manifest. Adjusting time by ").concat(tt-He)),On(tt),st&&Wt())}function vt(){var st,tt=Nn();if(isNaN(He)||Je()===y.Z.TEXT&&!Re.isTextEnabled())return null;if(me){var qt=fe&&tt?fe.getRepresentationForQuality(tt.quality):null;st=Se?me.getSegmentRequestForTime(ee,qt,He):ye?me.repeatSegmentRequest(ee,qt):me.getNextSegmentRequest(ee,qt)}return st}function Wt(){ne.startScheduleTimer(Ie.getLowLatencyModeEnabled()?xe.get().streaming.scheduling.lowLatencyTimeout:xe.get().streaming.scheduling.defaultTimeout)}function Nt(st){st.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(st.currentRepresentation)}function en(st){pe.addBufferState(Le,st.state,ne.getBufferTarget()),st.state!==D.Z.BUFFER_EMPTY||Ie.isSeeking()||(B.info("Buffer is empty! Stalling!"),pe.pushPlayListTraceMetrics(new Date,et.REBUFFERING_REASON))}function Jt(st){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),Ee.duration),st.quotaExceeded&&st.from>Ie.getTime()&&On(st.from),st.hasEnoughSpaceToAppend&&st.quotaExceeded&&ne.startScheduleTimer()}function Yt(st){if(st&&st.lastRequestAppended&&st.lastRequestAppended.url){var tt=st.lastRequestAppended.url;st.lastRequestAppended.range&&(tt=tt.concat("_",st.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(tt)),dt.add(tt)}}function Dn(st){if(B.debug("Appended bytes for ".concat(st.mediaType," and stream id ").concat(st.streamId)),st.segmentType===nt.w.INIT_SEGMENT_TYPE){var tt=st.quality;ne.setLastInitializedQuality(tt),B.info("["+Le+"] lastInitializedRepresentationInfo changed to "+st.quality)}De?xn(De):ne.startScheduleTimer(0)}function xn(st){var tt=Q.getRequests({state:$.FRAGMENT_MODEL_LOADING});if(tt&&tt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(De=st);H.updateBufferTimestampOffset(st).then(function(){ne.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?ne.startScheduleTimer():En(),De=null,ie=!1}).catch(function(){De=null,ie=!1})}function rr(st){B.info("onFragmentLoadingAbandoned request: "+st.request.url+" has been aborted"),Ie.isSeeking()||ne.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+st.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),st.request&&st.request.isInitializationRequest()?ne.setInitSegmentRequired(!0):On(st.request.startTime+st.request.duration/2),ne.startScheduleTimer(0))}function ir(st){B.info("OnFragmentLoadingCompleted for stream id "+Ee.id+" and media type "+Le+" - Url:",st.request?st.request.url:"undefined",st.request.range?", Range:"+st.request.range:""),ht()&&ne.startScheduleTimer(0),st.error&&st.request.serviceLocation&&function(tt){B.info("Fragment loading completed with an error"),tt&&tt.request&&tt.request.type&&(tt.request.type===nt.w.INIT_SEGMENT_TYPE?kt({representationId:tt.request.representationId,sender:{}},!1):tt.request.type===nt.w.MEDIA_SEGMENT_TYPE&&(On(tt.request.startTime+tt.request.duration/2),Ft({},!1)))}(st)}function It(){On(Ie.getTime()),Pn().startScheduleTimer()}function $t(st){var tt=st.currentTrackInfo;if(tt){var qt=J.find(function(ze){return ze.index===tt.index&&ze.lang===tt.lang});qt&&vn(qt).then(function(){H.setIsBufferingCompleted(!1),On(Ie.getTime()),ne.setInitSegmentRequired(!0),ne.startScheduleTimer()})}}function Zt(st){On(st.quotaExceededTime),ne.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function vn(st){st===ee||st&&ee&&st.type!==ee.type||(ee=st);var tt=ue.getRealAdaptation(Ee,ee),qt=ue.getVoRepresentations(ee);if(fe){var ze,Ve=fe.getData(),Dt=Me.getMaxAllowedIndexFor(Le,Ee.id),dn=Me.getMinAllowedIndexFor(Le,Ee.id),Tn=null;return Ve!==null&&Ve.id===tt.id||Le===y.Z.TEXT?ze=Me.getQualityFor(Le,Ee.id):(Tn=Me.getThroughputHistory().getAverageThroughput(Le,V)||Me.getInitialBitrateFor(Le,Ee.id),ze=Me.getQualityForBitrate(ee,Tn,Ee.id)),dn!==void 0&&ze<dn&&(ze=dn),ze>Dt&&(ze=Dt),fe.updateData(tt,qt,Le,ee.isFragmented,ze)}return Promise.resolve()}function Pn(){return ne}function Nn(st){var tt;return st!==void 0?((0,_e.SE)(st),tt=fe?fe.getRepresentationForQuality(st):null):tt=fe?fe.getCurrentRepresentation():null,ue.convertRepresentationToRepresentationInfo(tt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(st){if(xe.get().streaming.enableManifestTimescaleMismatchFix){var tt=st.chunk,qt=tt.bytes,ze=Nn(tt.quality),Ve=fe&&ze?fe.getRepresentationForQuality(ze.quality):null;ze&&Ve&&(Ve.timescale=We.getMediaTimescaleFromMoov(qt))}}function bt(st){var tt=st.chunk,qt=tt.bytes,ze=tt.quality,Ve=Nn(ze),Dt=fe&&Ve?fe.getRepresentationForQuality(Ve.quality):null;if(Ve&&Dt){var dn;if(xe.get().streaming.parseInbandPrft&&st.request.type===nt.w.MEDIA_SEGMENT_TYPE){var Tn=function(oo,Zi){var Gs=oo.getBoxes("prft"),el=[];return Gs.forEach(function(tl){el.push(function(Ja,qs){var Oo="unknown";switch(Ja.flags){case 0:Oo=v.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Oo=v.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Oo=v.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var Tu=1e3*Ja.ntp_timestamp_sec+Ja.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Oo,ntpTimestamp:Tu=_t(Be).getInstance().ntpToUTC(Tu),mediaTime:Ja.media_time/qs}}(tl,Zi))}),el}(dn=dn||We.parse(qt),Dt.timescale);Tn&&Tn.length&&Ye.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:Ee.id,mediaType:Le})}var sr=ue.getEventsFor(Ve.mediaInfo,null,Ee),Zr=ue.getEventsFor(Ve,Dt,Ee);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ai=Q.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,quality:ze,index:tt.index})[0],zr=function(oo,Zi,Gs,el){try{for(var tl={},Ja=[],qs=Gs.concat(el),Oo=0,Tu=qs.length;Oo<Tu;Oo++)tl[qs[Oo].schemeIdUri+"/"+qs[Oo].value]=qs[Oo];var Su=oo.getBoxes("emsg");if(!Su||Su.length===0)return Ja;for(var fa=oo.getBox("sidx"),Zc=!fa||isNaN(fa.earliest_presentation_time)||isNaN(fa.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:fa.earliest_presentation_time/fa.timescale,ed=Math.max(Zc,0),nl=fe.getCurrentRepresentation(),es=0,Gc=Su.length;es<Gc;es++){var Hs=ue.getEvent(Su[es],tl,ed,nl);Hs&&Ja.push(Hs)}return Ja}catch(Pt){return[]}}(dn=dn||We.parse(qt),Ai,sr,Zr);Ye.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:Ee.id})}}}function Sn(){var st=Ie.getTime();xe.get().streaming.buffer.flushBufferAtTrackSwitch&&Ie.seek(st+.001,!1,!0),On(st),H.setSeekTarget(st),ne.startScheduleTimer()}function En(){var st=Ie.getTime(),tt=H.getContinuousBufferTimeForTargetTime(st);On(isNaN(tt)?st:tt),ne.startScheduleTimer()}function Lt(st){st&&!isNaN(st.time)&&(On(st.time),H.setSeekTarget(st.time))}function On(st){He=st,Se=!0}return P={initialize:function(st,tt,qt){ge=(0,ft.Z)(Be).create({events:T.Z,eventBus:Ye,streamInfo:Ee,timelineConverter:j,dashConstants:v.Z,segmentBaseController:L.segmentBaseController,type:Le}),me=(0,de.Z)(Be).create({streamInfo:Ee,type:Le,timelineConverter:j,dashMetrics:pe,mediaPlayerModel:se,baseURLController:L.baseURLController,errHandler:we,segmentsController:ge,settings:xe,boxParser:We,events:T.Z,eventBus:Ye,errors:Ae,debug:(0,N.Z)(Be).getInstance(),requestModifier:(0,Ke.Z)(Be).getInstance(),dashConstants:v.Z,constants:y.Z,urlUtils:(0,St.Z)(Be).getInstance()}),V=Ee.manifestInfo.isDynamic,me.initialize(V),Me.registerStreamType(Le,P),fe=K(Be).create({streamInfo:Ee,type:Le,abrController:Me,dashMetrics:pe,playbackController:Ie,timelineConverter:j,dashConstants:v.Z,events:T.Z,eventBus:Ye,errors:Ae,isDynamic:V,adapter:ue,segmentsController:ge}),H=function(ze,Ve){return ze?ze!==y.Z.TEXT||Ve?Tt(Be).create({streamInfo:Ee,type:ze,mediaPlayerModel:se,manifestModel:ae,fragmentModel:Q,errHandler:we,mediaController:ke,representationController:fe,adapter:ue,textController:Re,abrController:Me,playbackController:Ie,settings:xe}):re(Be).create({streamInfo:Ee,type:ze,mimeType:je,fragmentModel:Q,textController:Re,errHandler:we,settings:xe}):(we.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(Le,qt),H&&H.initialize(st),(ne=O(Be).create({streamInfo:Ee,type:Le,mimeType:je,adapter:ue,dashMetrics:pe,mediaPlayerModel:se,fragmentModel:Q,abrController:Me,playbackController:Ie,textController:Re,mediaController:ke,bufferController:H,representationController:fe,settings:xe})).initialize(tt),He=0,Se=!1,ye=!1},getStreamId:at,getType:Je,isUpdating:function(){return!!fe&&fe.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return fe},getRepresentationInfo:Nn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(st){var tt=un();return tt?Promise.resolve(tt):H?H.createBufferSink(ee,st):Promise.resolve(null)},updateStreamInfo:function(st){return Ee=st,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return Ee},selectMediaInfo:vn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(st){J.indexOf(st)===-1&&J.push(st)},prepareTrackSwitch:function(){return new Promise(function(st){B.debug("Preparing track switch for type ".concat(Le));var tt=Le===y.Z.TEXT||xe.get().streaming.trackSwitchMode[Le]===y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ie.getTimeToStreamEnd(Ee)>xe.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!tt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){Ye.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Ee.id,mediaType:Le})}).catch(function(){Ye.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Ee.id,mediaType:Le})}),void st();ne.clearScheduleTimer(),ne.setSwitchTrack(!0),tt?(Ye.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:Ee.id},{mediaType:Le,streamId:Ee.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var qt=Nn();return H.updateBufferTimestampOffset(qt)}).then(function(){Sn(),st()}).catch(function(){Sn(),st()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),st()}).catch(function(){En(),st()})})},prepareQualityChange:function(st){De&&B.warn("Canceling queued representation switch to ".concat(De.quality," for ").concat(Le)),B.debug("Preparing quality switch for type ".concat(Le));var tt=st.newQuality;ie=!0,ne.clearScheduleTimer(),fe.prepareQualityChange(tt);var qt=Nn(tt);st.reason&&st.reason.forceReplace?function(ze){Q.abortRequests(),Ye.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:Ee.id},{mediaType:Le,streamId:Ee.id}),ne.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(ze).then(function(){Sn(),De=null,ie=!1}).catch(function(){Sn(),De=null,ie=!1})}(qt):st&&st.reason&&st.reason.forceAbandon?function(ze){H.updateBufferTimestampOffset(ze).then(function(){Q.abortRequests(),ye=!0,ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1,De=null}).catch(function(){De=null,ie=!1})}(qt):xe.get().streaming.buffer.fastSwitchEnabled?function(ze){var Ve=Ie.getTime(),Dt=1.5*(isNaN(ze.fragmentDuration)?1:ze.fragmentDuration),dn=Q.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:Ve+Dt,threshold:0})[0];if(dn&&!ht()){var Tn=H.getBufferLevel(),sr=Me.getAbandonmentStateFor(Ee.id,Le);dn.quality<ze.quality&&Tn>=Dt&&sr!==D.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(ze).then(function(){Q.abortRequests(),On(Ve+Dt),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):xn(ze)}else xn(ze)}(qt):xn(qt),pe.pushPlayListTraceMetrics(new Date,et.REPRESENTATION_SWITCH_STOP_REASON),pe.createPlaylistTraceMetrics(qt.id,1e3*Ie.getTime(),Ie.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(st){return H.setMediaSource(st,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(st,tt){pe.pushPlayListTraceMetrics(st,tt)},probeNextRequest:function(){var st=Nn(),tt=fe&&st?fe.getRepresentationForQuality(st.quality):null;return me.getNextSegmentRequestIdempotent(ee,tt)},prepareInnerPeriodPlaybackSeeking:function(st){return new Promise(function(tt){if(H.hasBufferAtTime(st.seekTime))return H.pruneBuffer(),Gt(H.getContinuousBufferTimeForTargetTime(st.seekTime))&&H.setIsBufferingCompleted(!0),void tt();ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var qt=H.getAllRangesWithSafetyFactor(st.seekTime);return H.clearBuffers(qt)}).then(function(){var qt=H.getContinuousBufferTimeForTargetTime(st.seekTime);if(Gt(qt))H.setIsBufferingCompleted(!0),tt();else{var ze=isNaN(qt)?st.seekTime:qt;On(ze),H.setSeekTarget(ze);var Ve=[];Ve.push(H.updateAppendWindow());var Dt=Nn();Ve.push(H.updateBufferTimestampOffset(Dt)),Promise.all(Ve).then(function(){ne.setInitSegmentRequired(!0),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),tt()})}}).catch(function(qt){B.error(qt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(st,tt){try{ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){st()})}catch(qt){tt(qt)}})},reset:function(st,tt){me&&me.reset(),H&&(H.reset(st,tt),H=null),ne&&(ne.reset(),ne=null),fe&&(fe.reset(),fe=null),ge&&(ge=null),Me&&Me.unRegisterStreamType(at(),Le),Ye.off(T.Z.DATA_UPDATE_COMPLETED,Nt,P),Ye.off(T.Z.INIT_FRAGMENT_NEEDED,kt,P),Ye.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),Ye.off(T.Z.INIT_FRAGMENT_LOADED,Gn,P),Ye.off(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),Ye.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),Ye.off(T.Z.BUFFER_CLEARED,Jt,P),Ye.off(T.Z.SEEK_TARGET,Lt,P),Ye.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),Ye.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),Ye.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),Ye.off(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),Ye.off(T.Z.QUOTA_EXCEEDED,Zt,P),Ye.off(T.Z.SOURCE_BUFFER_ERROR,Yt,P),Ye.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),Bt(),Le=null,Ee=null}},B=(0,N.Z)(Be).getInstance().getLogger(P),Bt(),Ye.on(T.Z.DATA_UPDATE_COMPLETED,Nt,P,{priority:m.Z.EVENT_PRIORITY_HIGH}),Ye.on(T.Z.INIT_FRAGMENT_NEEDED,kt,P),Ye.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),Ye.on(T.Z.INIT_FRAGMENT_LOADED,Gn,P),Ye.on(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),Ye.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),Ye.on(T.Z.BUFFER_CLEARED,Jt,P),Ye.on(T.Z.SEEK_TARGET,Lt,P),Ye.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),Ye.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),Ye.on(T.Z.QUOTA_EXCEEDED,Zt,P),Ye.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),Ye.on(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),Ye.on(T.Z.SOURCE_BUFFER_ERROR,Yt,P),Ye.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),P}Rt.__dashjs_factory_name="StreamProcessor";var pn=U.Z.getClassFactory(Rt),Qt=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=w(9032);function Ot(L,P){if(L){if(typeof L=="string")return Un(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,P):void 0}}function Un(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function gr(L){L=L||{};var P,B,V=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,ne=(0,Ze.Z)(V).getInstance();function fe(ie){var me,ge=new Date,He=ie.request,De=new Headers;if(He.range&&De.append("Range","bytes="+He.range),ie.headers)for(var Be in ie.headers){var Ye=ie.headers[Be];Ye&&De.append(Be,Ye)}He.requestStartDate||(He.requestStartDate=ge),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(j,ue){De.append(j,ue)}},{url:ie.url}),typeof window.AbortController=="function"&&(me=new AbortController,ie.abortController=me,me.signal.onabort=ie.onabort);var Ee={method:ie.method,headers:De,credentials:ie.withCredentials?"include":void 0,signal:me?me.signal:void 0},Le=ne.get().streaming.abr.fetchThroughputCalculationMode,we=Date.now(),je=0;new Promise(function(j){if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(je=J.getThroughputCapacityDelayMS(He,1e3*B.getCurrentBufferLevel(He.mediaType))))return setTimeout(j,je);j()}).then(function(){var j=Date.now();fetch(ie.url,Ee).then(function(ue){ie.response||(ie.response={}),ie.response.status=ue.status,ie.response.statusText=ue.statusText,ie.response.responseURL=ue.url,ue.ok||ie.onerror();var ae,se="",Q=function(Nt,en){var Jt;if(typeof Symbol>"u"||Nt[Symbol.iterator]==null){if(Array.isArray(Nt)||(Jt=Ot(Nt))){Jt&&(Nt=Jt);var Yt=0,Dn=function(){};return{s:Dn,n:function(){return Yt>=Nt.length?{done:!0}:{done:!1,value:Nt[Yt++]}},e:function(It){throw It},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var xn,rr=!0,ir=!1;return{s:function(){Jt=Nt[Symbol.iterator]()},n:function(){var It=Jt.next();return rr=It.done,It},e:function(It){ir=!0,xn=It},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw xn}}}}(ue.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Me=ae.value;se+=Me+": "+ue.headers.get(Me)+"\r\n"}}catch(Nt){Q.e(Nt)}finally{Q.f()}if(ie.response.responseHeaders=se,!ue.body)return ue.arrayBuffer().then(function(Nt){ie.response.response=Nt;var en={loaded:Nt.byteLength,total:Nt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var Ie,ke,Re,pe,xe=parseInt(ue.headers.get("Content-Length"),10),We=0,dt=!1,at=new Uint8Array,Je=0;if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var ht=j,Bt=0,Gt=(Re=ue.body.tee(),pe=2,function(Nt){if(Array.isArray(Nt))return Nt}(Re)||function(Nt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(Nt)){var Jt=[],Yt=!0,Dn=!1,xn=void 0;try{for(var rr,ir=Nt[Symbol.iterator]();!(Yt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Yt=!0);}catch(It){Dn=!0,xn=It}finally{try{Yt||ir.return==null||ir.return()}finally{if(Dn)throw xn}}return Jt}}(Re,pe)||Ot(Re,pe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),kt=Gt[0],Ft=Gt[1];Ie=kt.getReader(),ke=[],Ie.read().then(function Nt(en){var Jt=en.value,Yt=en.done;if(Bt=Date.now(),Jt&&Jt.length){var Dn=Bt-ht,xn=Jt.length;ke.push({chunkDownloadTimeRelativeMS:Bt-j,chunkDownloadDurationMS:Dn,chunkBytes:xn,kbps:Math.round(8*xn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(He.mediaType)})}if(Yt){var rr=Bt-j,ir=ke.reduce(function(It,$t){return It+$t.chunkBytes},0);return J.addMeasurement(He,rr,ke,we,je,se),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(He),stream:!0})}return ht=Date.now(),Ie.read().then(Nt)}),ie.reader=Ft.getReader()}else ie.reader=ue.body.getReader();var An=[],rt=[],vt=[],Wt=!0;Se(ie,function Nt(en){var Jt=en.value;if(en.done){if(at){if(Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Yt=null,Dn=null;Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Yt=function(It,$t){try{var Zt,un;Zt=It.filter(function(Sn,En){return En<It.length-1}),un=$t.filter(function(Sn,En){return En<$t.length-1});var vn=[];if(Zt.length>1){for(var Pn=0,Nn=0,Fn=0;Fn<Zt.length;Fn++)if(Zt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Zt[Fn].ts;if(Gn>1)vn.push(8*un[Fn].bytes/Gn),Nn=0;else{Nn===0&&(Nn=Zt[Fn].ts,Pn=0);var bt=un[Fn].ts-Nn;bt>1?(Pn+=un[Fn].bytes,vn.push(8*Pn/bt),Nn=0):Pn+=un[Fn].bytes}}if(vn.length>0)return vn.reduce(function(Sn,En){return Sn+En},0)/vn.length}return null}catch(Sn){return null}}(rt,vt),Yt&&(Dn=8*We/Yt)):Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=ye(An,We)),ie.progress({loaded:We,total:isNaN(xe)?We:xe,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=at.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){at=function(It,$t){if(It.length===0)return $t;var Zt=new Uint8Array(It.length+$t.length);return Zt.set(It),Zt.set($t,It.length),Zt}(at,Jt),We+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Wt&&H.findLastTopIsoBoxCompleted(["moof"],at,Je).found&&(Wt=!1,rt.push({ts:performance.now(),bytes:Jt.length}));var xn=H.findLastTopIsoBoxCompleted(["moov","mdat"],at,Je);if(xn.found){var rr,ir=xn.lastCompletedOffset+xn.size;Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Wt||(Wt=!0,vt.push({ts:performance.now(),bytes:at.length})),ir===at.length?(rr=at,at=new Uint8Array):(rr=new Uint8Array(at.subarray(0,ir)),at=at.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),Je=0}else Je=xn.lastCompletedOffset,dt||(ie.progress({lengthComputable:!1,noTrace:!0}),dt=!0)}Se(ie,Nt)})}).catch(function(ue){ie.onerror&&ie.onerror(ue)})})}function Se(ie,me){ie.reader.read().then(me).catch(function(ge){ie.onerror&&ie.response.status===200&&ie.onerror(ge)})}function ye(ie,me){try{if((ie=ie.filter(function(De){return De.bytes>me/4/ie.length})).length>1){var ge=0,He=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(De,Be){var Ye=ie[Be+1];if(Ye){var Ee=Ye.ts-De.ts;ge+=Ee<He?Ee:0}}),ge}return null}catch(De){return null}}return P={load:function(ie){ee&&ee.modifyRequest?(0,Ke.k)(ie,ee).then(function(){return fe(ie)}):fe(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(me){}},calculateDownloadedTime:ye,setup:function(ie){B=ie.dashMetrics}},P}gr.__dashjs_factory_name="FetchLoader";var Pr=U.Z.getClassFactory(gr),dr=w(1180);function ei(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var eo=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var P,B;return P=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==v.Z.BASE_URL&&this.segmentInfoType!==v.Z.SEGMENT_BASE&&!this.indexRange}}])&&ei(P.prototype,B),L}(),Or=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},to=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};to.DEFAULT_ID="defaultId";var _i=to,Di=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=w(2610),no=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ti=function L(P,B,V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||P||"",this.dvbPriority=V||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ti.DEFAULT_DVB_PRIORITY=1,Ti.DEFAULT_DVB_WEIGHT=1;var Qn=Ti,Lu=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var wt=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var P,B;return P=L,(B=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[v.Z.DVB_URL]&&(this.dvbUrl=V[v.Z.DVB_URL]),V[v.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[v.Z.DVB_MIMETYPE]),V[v.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[v.Z.DVB_FONTFAMILY])),this}}])&&an(P.prototype,B),L}(),zt=w(3101),Mt=w.n(zt);function Vt(){return{areEqual:function(L,P){return Mt()(L,P)}}}Vt.__dashjs_factory_name="ObjectUtils";var mn=U.Z.getSingletonFactory(Vt),In=w(7803),Zn=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.queryParams={}},bn=function L(P,B,V){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.ttl=V||NaN,this.queryParams={}};function Rn(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function on(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Rn(Object(B),!0).forEach(function(V){Bn(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bn(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function kn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){ne=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function er(L,P){if(L){if(typeof L=="string")return Er(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,P):void 0}}function Er(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Ur(){var L,P,B,V,ee=this.context,J=(0,St.Z)(ee).getInstance(),H=Number.isInteger||function(j){return typeof j=="number"&&isFinite(j)&&Math.floor(j)===j};function ne(j,ue){if(!j)throw new Error("adaptation is not defined");if(!ue)throw new Error("type is not defined");if(j.Representation_asArray&&j.Representation_asArray.length){var ae=Be(j.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return ue===y.Z.IMAGE}if(j.ContentComponent_asArray&&j.ContentComponent_asArray.length>0){if(j.ContentComponent_asArray.length>1)return ue===y.Z.MUXED;if(j.ContentComponent_asArray[0].contentType===ue)return!0}var se=ue===y.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(ue);if(j.Representation_asArray&&j.Representation_asArray.length){var Q=j.Representation_asArray[0].codecs;if(se.test(Q))return!0}if(j.hasOwnProperty(v.Z.MIME_TYPE))return se.test(j.mimeType);if(j.Representation_asArray){for(var Me,Ie=0;Ie<j.Representation_asArray.length;Ie++)if((Me=j.Representation_asArray[Ie]).hasOwnProperty(v.Z.MIME_TYPE))return se.test(Me.mimeType)}return!1}function fe(j){if(!j)throw new Error("adaptation is not defined");if(j.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||j.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||j.hasOwnProperty(v.Z.SEGMENT_LIST)||j.hasOwnProperty(v.Z.SEGMENT_BASE))return!0;if(j.Representation_asArray&&j.Representation_asArray.length>0){var ue=j.Representation_asArray[0];if(ue.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||ue.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||ue.hasOwnProperty(v.Z.SEGMENT_LIST)||ue.hasOwnProperty(v.Z.SEGMENT_BASE))return!0}return!1}function Se(j){return ne(j,y.Z.VIDEO)}function ye(j){return ne(j,y.Z.TEXT)}function ie(j){return ne(j,y.Z.IMAGE)}function me(j){return j&&Array.isArray(j.Representation_asArray)&&j.Representation_asArray.sort(function(ue,ae){return ue.bandwidth-ae.bandwidth}),j}function ge(j,ue){return j&&j.Period_asArray&&H(ue)&&j.Period_asArray[ue]?j.Period_asArray[ue].AdaptationSet_asArray:[]}function He(j){return j&&j.Period_asArray?j.Period_asArray:[]}function De(j){var ue=!1;return j&&j.hasOwnProperty("type")&&(ue=j.type===v.Z.DYNAMIC),ue}function Be(j){return j&&j.EssentialProperty_asArray&&j.EssentialProperty_asArray.length?j.EssentialProperty_asArray.map(function(ue){return{schemeIdUri:ue.schemeIdUri,value:ue.value}}):null}function Ye(j){if(!j||!j.S_asArray)return NaN;var ue=j.S_asArray[0],ae=j.S_asArray[1];return ue.hasOwnProperty("d")?ue.d:ae.t-ue.t}function Ee(j,ue){if(!j)throw new Error("Period cannot be null or undefined");var ae=_i.DEFAULT_ID+"_"+ue;return j.hasOwnProperty(v.Z.ID)&&j.id.length>0&&j.id!=="__proto__"&&(ae=j.id),ae}function Le(j,ue,ae){var se,Q=[];if(!j)return Q;for(se=0;se<j.length;se++){var Me=new Lu;if(Me.timescale=1,Me.representation=ue,!j[se].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Me.schemeIdUri=j[se].schemeIdUri,j[se].hasOwnProperty(v.Z.TIMESCALE)&&(Me.timescale=j[se].timescale),j[se].hasOwnProperty(v.Z.VALUE)&&(Me.value=j[se].value),Q.push(Me),Me.period=ae}return Q}function we(j){var ue=[],ae=j.BaseURL_asArray||[j.baseUri],se=!1;return ae.some(function(Q){if(Q){var Me=new Qn,Ie=Q.__text||Q;return J.isRelative(Ie)&&(se=!0,j.baseUri&&(Ie=J.resolve(Ie,j.baseUri))),Me.url=Ie,Q.hasOwnProperty(v.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Me.serviceLocation=Q.serviceLocation:Me.serviceLocation=Ie,Q.hasOwnProperty(v.Z.DVB_PRIORITY)&&(Me.dvbPriority=Q[v.Z.DVB_PRIORITY]),Q.hasOwnProperty(v.Z.DVB_WEIGHT)&&(Me.dvbWeight=Q[v.Z.DVB_WEIGHT]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)&&(Me.availabilityTimeOffset=Q[v.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)&&(Me.availabilityTimeComplete=Q[v.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),ue.push(Me),se}}),ue}function je(j){var ue=new sn;return ue.serverUrl=j.__text,j.hasOwnProperty(v.Z.DEFAULT_SERVICE_LOCATION)&&(ue.defaultServiceLocation=j[v.Z.DEFAULT_SERVICE_LOCATION],ue.defaultServiceLocationArray=ue.defaultServiceLocation.split(" ")),j.hasOwnProperty(v.Z.QUERY_BEFORE_START)&&(ue.queryBeforeStart=j[v.Z.QUERY_BEFORE_START].toLowerCase()==="true"),j.hasOwnProperty(v.Z.CLIENT_REQUIREMENT)&&(ue.clientRequirement=j[v.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),ue}return L={getIsTypeOf:ne,getIsText:ye,getIsFragmented:fe,getProducerReferenceTimesForAdaptation:function(j){var ue=j&&j.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)?j[v.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(j&&j.hasOwnProperty(v.Z.REPRESENTATION_ASARRAY)?j[v.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(se){var Q;se.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)&&ue.push.apply(ue,function(Me){if(Array.isArray(Me))return Er(Me)}(Q=se[v.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Me){if(typeof Symbol<"u"&&Symbol.iterator in Object(Me))return Array.from(Me)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return ue.forEach(function(se){var Q=new tn;se.hasOwnProperty(v.Z.ID)&&(Q[v.Z.ID]=se[v.Z.ID],se.hasOwnProperty(v.Z.WALL_CLOCK_TIME)&&(Q[v.Z.WALL_CLOCK_TIME]=se[v.Z.WALL_CLOCK_TIME],se.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(Q[v.Z.PRESENTATION_TIME]=se[v.Z.PRESENTATION_TIME],se.hasOwnProperty(v.Z.INBAND)&&(Q[v.Z.INBAND]=se[v.Z.INBAND]!=="false"),se.hasOwnProperty(v.Z.TYPE)&&(Q[v.Z.TYPE]=se[v.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(j){var ue="";return j&&j.hasOwnProperty(v.Z.LANG)&&(ue=j.lang),ue},getViewpointForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.VIEWPOINT_ASARRAY)&&j[v.Z.VIEWPOINT_ASARRAY].length?j[v.Z.VIEWPOINT_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getRolesForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.ROLE_ASARRAY)&&j[v.Z.ROLE_ASARRAY].length?j[v.Z.ROLE_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAccessibilityForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.ACCESSIBILITY_ASARRAY)&&j[v.Z.ACCESSIBILITY_ASARRAY].length?j[v.Z.ACCESSIBILITY_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAudioChannelConfigurationForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAudioChannelConfigurationForRepresentation:function(j){return j&&j.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?j[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(ue){return new wt().init(ue)}):[]},getAdaptationForIndex:function(j,ue,ae){var se=ge(ue,ae);return se.length>0&&H(j)?se[j]:null},getIndexForAdaptation:function(j,ue,ae){if(!j)return-1;for(var se=ge(ue,ae),Q=0;Q<se.length;Q++)if(mn(ee).getInstance().areEqual(se[Q],j))return Q;return-1},getAdaptationForId:function(j,ue,ae){var se,Q,Me=ge(ue,ae);for(se=0,Q=Me.length;se<Q;se++)if(Me[se].hasOwnProperty(v.Z.ID)&&Me[se].id===j)return Me[se];return null},getAdaptationsForType:function(j,ue,ae){var se,Q,Me=ge(j,ue),Ie=[];for(se=0,Q=Me.length;se<Q;se++)ne(Me[se],ae)&&Ie.push(me(Me[se]));return Ie},getRealPeriods:He,getRealPeriodForIndex:function(j,ue){var ae=He(ue);return ae.length>0&&H(j)?ae[j]:null},getCodec:function(j,ue,ae){var se=null;if(j&&j.Representation_asArray&&j.Representation_asArray.length>0){var Q=H(ue)&&ue>=0&&ue<j.Representation_asArray.length?j.Representation_asArray[ue]:j.Representation_asArray[0];Q&&(se=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(se+=';width="'+Q.width+'";height="'+Q.height+'"'))}return se&&(se=se.replace(/\sprofiles=[^;]*/g,"")),se},getSelectionPriority:function(j){try{var ue=j&&j.selectionPriority!==void 0?parseInt(j.selectionPriority):1;return isNaN(ue)?1:ue}catch(ae){return 1}},getMimeType:function(j){return j&&j.Representation_asArray&&j.Representation_asArray.length>0?j.Representation_asArray[0].mimeType:null},getKID:function(j){return j&&j.hasOwnProperty(v.Z.CENC_DEFAULT_KID)?j[v.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(j){if(!j||!Array.isArray(j.Label_asArray))return[];for(var ue=[],ae=0;ae<j.Label_asArray.length;ae++)ue.push({lang:j.Label_asArray[ae].lang,text:j.Label_asArray[ae].__text||j.Label_asArray[ae]});return ue},getContentProtectionData:function(j){return j&&j.hasOwnProperty(v.Z.CONTENTPROTECTION_ASARRAY)&&j.ContentProtection_asArray.length!==0?j.ContentProtection_asArray:null},getIsDynamic:De,getId:function(j){return j&&j[v.Z.ID]||null},hasProfile:function(j,ue){var ae=!1;return j&&j.profiles&&j.profiles.length>0&&(ae=j.profiles.indexOf(ue)!==-1),ae},getDuration:function(j){return j&&j.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)?j.mediaPresentationDuration:j&&j.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(j){return j&&j.bandwidth?j.bandwidth:NaN},getManifestUpdatePeriod:function(j){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return j&&j.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ae=j.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-ue,1)},getPublishTime:function(j){return j&&j.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(j[v.Z.PUBLISH_TIME]):null},getRepresentationCount:function(j){return j&&Array.isArray(j.Representation_asArray)?j.Representation_asArray.length:0},getBitrateListForAdaptation:function(j){var ue=me(j);return(ue&&Array.isArray(ue.Representation_asArray)?ue.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(j,ue){return ue&&ue.Representation_asArray&&ue.Representation_asArray.length>0&&H(j)?ue.Representation_asArray[j]:null},getRepresentationsForAdaptation:function(j){var ue,ae,se,Q,Me=[],Ie=function(at){if(at&&at.period&&H(at.period.index)){var Je=at.period.mpd.manifest.Period_asArray[at.period.index];if(Je&&Je.AdaptationSet_asArray&&H(at.index))return me(Je.AdaptationSet_asArray[at.index])}}(j);if(Ie&&Ie.Representation_asArray){if(j&&j.period&&H(j.period.index)){var ke=we(j.period.mpd.manifest);ke&&(ae=ke[0])}for(var Re=0,pe=Ie.Representation_asArray.length;Re<pe;++Re){var xe=Ie.Representation_asArray[Re],We=new eo;if(We.index=Re,We.adaptation=j,xe.hasOwnProperty(v.Z.ID)&&(We.id=xe.id),xe.hasOwnProperty(v.Z.CODECS)&&(We.codecs=xe.codecs),xe.hasOwnProperty(v.Z.MIME_TYPE)&&(We.mimeType=xe[v.Z.MIME_TYPE]),xe.hasOwnProperty(v.Z.CODEC_PRIVATE_DATA)&&(We.codecPrivateData=xe.codecPrivateData),xe.hasOwnProperty(v.Z.BANDWITH)&&(We.bandwidth=xe.bandwidth),xe.hasOwnProperty(v.Z.WIDTH)&&(We.width=xe.width),xe.hasOwnProperty(v.Z.HEIGHT)&&(We.height=xe.height),xe.hasOwnProperty(v.Z.SCAN_TYPE)&&(We.scanType=xe.scanType),xe.hasOwnProperty(v.Z.MAX_PLAYOUT_RATE)&&(We.maxPlayoutRate=xe.maxPlayoutRate),xe.hasOwnProperty(v.Z.SEGMENT_BASE)?(ue=xe.SegmentBase,We.segmentInfoType=v.Z.SEGMENT_BASE):xe.hasOwnProperty(v.Z.SEGMENT_LIST)?(ue=xe.SegmentList).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?We.segmentInfoType=v.Z.SEGMENT_TIMELINE:We.segmentInfoType=v.Z.SEGMENT_LIST:xe.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)?((ue=xe.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?We.segmentInfoType=v.Z.SEGMENT_TIMELINE:We.segmentInfoType=v.Z.SEGMENT_TEMPLATE,ue.hasOwnProperty(v.Z.INITIALIZATION_MINUS)&&(We.initialization=ue.initialization.split("$Bandwidth$").join(xe.bandwidth).split("$RepresentationID$").join(xe.id))):We.segmentInfoType=v.Z.BASE_URL,We.essentialProperties=Be(xe),ue){if(ue.hasOwnProperty(v.Z.INITIALIZATION)){var dt=ue.Initialization;dt.hasOwnProperty(v.Z.SOURCE_URL)&&(We.initialization=dt.sourceURL),dt.hasOwnProperty(v.Z.RANGE)&&(We.range=dt.range)}else ye(Ie)&&fe(Ie)&&Ie.mimeType&&Ie.mimeType.indexOf("application/mp4")===-1&&(We.range=0);ue.hasOwnProperty(v.Z.TIMESCALE)&&(We.timescale=ue.timescale),ue.hasOwnProperty(v.Z.DURATION)?We.segmentDuration=ue.duration/We.timescale:xe.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)&&(ue=xe.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)&&(We.segmentDuration=Ye(ue.SegmentTimeline)/We.timescale),ue.hasOwnProperty(v.Z.MEDIA)&&(We.media=ue.media),ue.hasOwnProperty(v.Z.START_NUMBER)&&(We.startNumber=ue.startNumber),ue.hasOwnProperty(v.Z.INDEX_RANGE)&&(We.indexRange=ue.indexRange),ue.hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(We.presentationTimeOffset=ue.presentationTimeOffset/We.timescale),ue.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)?We.availabilityTimeOffset=ue.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(We.availabilityTimeOffset=ae.availabilityTimeOffset),ue.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)?We.availabilityTimeComplete=ue.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(We.availabilityTimeComplete=ae.availabilityTimeComplete)}We.MSETimeOffset=(Q=(se=We).presentationTimeOffset,se.adaptation.period.start-Q),We.path=[j.period.index,j.index,Re],Me.push(We)}}return Me},getAdaptationsForPeriod:function(j){var ue,ae,se,Q=j&&H(j.index)?j.mpd.manifest.Period_asArray[j.index]:null,Me=[];if(Q&&Q.AdaptationSet_asArray)for(se=0;se<Q.AdaptationSet_asArray.length;se++)ae=Q.AdaptationSet_asArray[se],ue=new Or,ae.hasOwnProperty(v.Z.ID)&&(ue.id=ae.id),ue.index=se,ue.period=j,ne(ae,y.Z.MUXED)?ue.type=y.Z.MUXED:ne(ae,y.Z.AUDIO)?ue.type=y.Z.AUDIO:Se(ae)?ue.type=y.Z.VIDEO:ye(ae)?ue.type=y.Z.TEXT:ie(ae)?ue.type=y.Z.IMAGE:P.warn("Unknown Adaptation stream type"),Me.push(ue);return Me},getRegularPeriods:function(j){var ue,ae,se=!!j&&De(j.manifest),Q=[],Me=null,Ie=null,ke=null,Re=null;for(ae=0,ue=j&&j.manifest&&j.manifest.Period_asArray?j.manifest.Period_asArray.length:0;ae<ue;ae++)(Ie=j.manifest.Period_asArray[ae]).hasOwnProperty(v.Z.START)?(Re=new _i).start=Ie.start:Me!==null&&Me.hasOwnProperty(v.Z.DURATION)&&ke!==null?(Re=new _i).start=parseFloat((ke.start+ke.duration).toFixed(5)):ae!==0||se||((Re=new _i).start=0),ke!==null&&isNaN(ke.duration)&&(Re!==null?ke.duration=parseFloat((Re.start-ke.start).toFixed(5)):P.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Re!==null&&(Re.id=Ee(Ie,ae),Re.index=ae,Re.mpd=j,Ie.hasOwnProperty(v.Z.DURATION)&&(Re.duration=Ie.duration),ke&&(ke.nextPeriodId=Re.id),Q.push(Re),Me=Ie,ke=Re),Ie=null,Re=null;return Q.length===0||ke!==null&&isNaN(ke.duration)&&(ke.duration=parseFloat((function(pe){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var xe,We=De(pe.mpd.manifest);return pe.mpd.manifest.mediaPresentationDuration?xe=pe.mpd.manifest.mediaPresentationDuration:pe.duration?xe=pe.duration:We?xe=Number.POSITIVE_INFINITY:B.error(new ce.Z(Ae.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),xe}(ke)-ke.start).toFixed(5))),Q},getMpd:function(j){var ue=new Di;return j&&(ue.manifest=j,j.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)?ue.availabilityStartTime=new Date(j.availabilityStartTime.getTime()):j.loadedTime&&(ue.availabilityStartTime=new Date(j.loadedTime.getTime())),j.hasOwnProperty(v.Z.AVAILABILITY_END_TIME)&&(ue.availabilityEndTime=new Date(j.availabilityEndTime.getTime())),j.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ue.minimumUpdatePeriod=j.minimumUpdatePeriod),j.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)&&(ue.mediaPresentationDuration=j.mediaPresentationDuration),j.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)&&(ue.suggestedPresentationDelay=j.suggestedPresentationDelay),j.hasOwnProperty(v.Z.TIMESHIFT_BUFFER_DEPTH)&&(ue.timeShiftBufferDepth=j.timeShiftBufferDepth),j.hasOwnProperty(v.Z.MAX_SEGMENT_DURATION)&&(ue.maxSegmentDuration=j.maxSegmentDuration),j.hasOwnProperty(v.Z.PUBLISH_TIME)&&(ue.publishTime=new Date(j.publishTime))),ue},getEventsForPeriod:function(j){var ue,ae,se=j&&j.mpd&&j.mpd.manifest?j.mpd.manifest:null,Q=se?se.Period_asArray:null,Me=Q&&j&&H(j.index)?Q[j.index].EventStream_asArray:null,Ie=[];if(Me)for(ue=0;ue<Me.length;ue++){var ke=new Lu;if(ke.period=j,ke.timescale=1,!Me[ue].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ke.schemeIdUri=Me[ue][y.Z.SCHEME_ID_URI],Me[ue].hasOwnProperty(v.Z.TIMESCALE)&&(ke.timescale=Me[ue][v.Z.TIMESCALE]),Me[ue].hasOwnProperty(v.Z.VALUE)&&(ke.value=Me[ue][v.Z.VALUE]),Me[ue].hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(ke.presentationTimeOffset=Me[ue][v.Z.PRESENTATION_TIME_OFFSET]),ae=0;Me[ue].Event_asArray&&ae<Me[ue].Event_asArray.length;ae++){var Re=Me[ue].Event_asArray[ae],pe=new no;pe.presentationTime=0,pe.eventStream=ke,Re.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(pe.presentationTime=Re.presentationTime);var xe=ke.presentationTimeOffset?ke.presentationTimeOffset/ke.timescale:0;pe.calculatedPresentationTime=pe.presentationTime/ke.timescale+j.start-xe,Re.hasOwnProperty(v.Z.DURATION)&&(pe.duration=Re.duration/ke.timescale),Re.hasOwnProperty(v.Z.ID)?pe.id=Re.id:pe.id=null,Re.Signal&&Re.Signal.Binary?pe.messageData=V.decodeArray(Re.Signal.Binary.toString()):pe.messageData=Re.messageData||Re.__cdata||Re.__text,Ie.push(pe)}}return Ie},getEssentialPropertiesForAdaptation:function(j){var ue={};if(j&&j.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,se=kn(j.EssentialProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getEssentialPropertiesAsArrayForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)&&j.EssentialProperty_asArray.length?j.EssentialProperty_asArray.map(function(ue){return new wt().init(ue)}):[]},getEssentialPropertiesForRepresentation:Be,getEventStreamForAdaptationSet:function(j,ue,ae){var se,Q,Me;return j&&j.Period_asArray&&ue&&ue.period&&H(ue.period.index)&&(Q=j.Period_asArray[ue.period.index])&&Q.AdaptationSet_asArray&&H(ue.index)&&(Me=Q.AdaptationSet_asArray[ue.index])&&(se=Me.InbandEventStream_asArray),Le(se,null,ae)},getEventStreamForRepresentation:function(j,ue,ae){var se,Q,Me,Ie;return j&&j.Period_asArray&&ue&&ue.adaptation&&ue.adaptation.period&&H(ue.adaptation.period.index)&&(Q=j.Period_asArray[ue.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(ue.adaptation.index)&&(Me=Q.AdaptationSet_asArray[ue.adaptation.index])&&Me.Representation_asArray&&H(ue.index)&&(Ie=Me.Representation_asArray[ue.index])&&(se=Ie.InbandEventStream_asArray),Le(se,ue,ae)},getUTCTimingSources:function(j){var ue=De(j),ae=!!j&&j.hasOwnProperty(v.Z.AVAILABILITY_START_TIME),se=j?j.UTCTiming_asArray:null,Q=[];return(ue||ae)&&se&&se.forEach(function(Me){var Ie=new zi.Z;Me.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(Ie.schemeIdUri=Me.schemeIdUri,Me.hasOwnProperty(v.Z.VALUE)&&(Ie.value=Me.value.toString(),Q.push(Ie)))}),Q},getBaseURLsFromElement:we,getRepresentationSortFunction:function(){return function(j,ue){return j.bandwidth-ue.bandwidth}},getContentSteering:function(j){if(j&&j.hasOwnProperty(v.Z.CONTENT_STEERING_AS_ARRAY))return je(j[v.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(j){return j&&j.hasOwnProperty(v.Z.LOCATION_AS_ARRAY)?j[v.Z.LOCATION_AS_ARRAY].map(function(ue){var ae=ue.__text||ue,se=ue.hasOwnProperty(v.Z.SERVICE_LOCATION)?ue[v.Z.SERVICE_LOCATION]:null;return new Zn(ae,se)}):[]},getPatchLocation:function(j){return j&&j.hasOwnProperty(v.Z.PATCH_LOCATION_AS_ARRAY)?j[v.Z.PATCH_LOCATION_AS_ARRAY].map(function(ue){var ae=ue.__text||ue,se=ue.hasOwnProperty(v.Z.SERVICE_LOCATION)?ue[v.Z.SERVICE_LOCATION]:null,Q=ue.hasOwnProperty(v.Z.TTL)?1e3*parseFloat(ue[v.Z.TTL]):NaN;return new bn(ae,se,Q)}):[]},getSuggestedPresentationDelay:function(j){return j&&j.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)?j.suggestedPresentationDelay:null},getAvailabilityStartTime:function(j){return j&&j.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)&&j.availabilityStartTime!==null?j.availabilityStartTime.getTime():null},getServiceDescriptions:function(j){var ue=[];if(j&&j.hasOwnProperty(v.Z.SERVICE_DESCRIPTION)){var ae,se=kn(j.ServiceDescription_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value,Me=null,Ie=null,ke=null,Re=null,pe=null,xe=null,We=null;for(var dt in Q)Q.hasOwnProperty(dt)&&(dt===v.Z.ID?Me=Q[dt]:dt===v.Z.SERVICE_DESCRIPTION_SCOPE?Ie=Q[dt].schemeIdUri:dt===v.Z.SERVICE_DESCRIPTION_LATENCY?ke={target:parseInt(Q[dt].target),max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),referenceId:parseInt(Q[dt].referenceId)}:dt===v.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Re={max:parseFloat(Q[dt].max),min:parseFloat(Q[dt].min)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?pe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target),type:Q[dt].type,maxQualityDifference:parseInt(Q[dt].maxQualityDifference)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?xe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target)}:dt===v.Z.CONTENT_STEERING&&(We=je(Q[dt])));ue.push({id:Me,schemeIdUri:Ie,latency:ke,playbackRate:Re,operatingQuality:pe,operatingBandwidth:xe,contentSteering:We})}}catch(at){se.e(at)}finally{se.f()}}return ue},getSegmentAlignment:function(j){return!(!j||!j.hasOwnProperty(v.Z.SEGMENT_ALIGNMENT))&&j[v.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(j){return!(!j||!j.hasOwnProperty(v.Z.SUB_SEGMENT_ALIGNMENT))&&j[v.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(j){var ue={};if(j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(j.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getSupplementalPropertiesAsArrayForAdaptation:function(j){return j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&j.SupplementalProperty_asArray.length?j.SupplementalProperty_asArray.map(function(ue){return new wt().init(ue)}):[]},getSupplementalPropertiesForRepresentation:function(j){var ue={};if(j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(j.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(ue[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return ue},getSupplementalPropertiesAsArrayForRepresentation:function(j){return j&&j.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&j.SupplementalProperty_asArray.length?j.SupplementalProperty_asArray.map(function(ue){return new wt().init(ue)}):[]},setConfig:function(j){j&&(j.errHandler&&(B=j.errHandler),j.BASE64&&(V=j.BASE64))}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Vn=U.Z.getSingletonFactory(Ur),rn=w(703);function fn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(fe,Se){if(fe){if(typeof fe=="string")return Cn(fe,Se);var ye=Object.prototype.toString.call(fe).slice(8,-1);return ye==="Object"&&fe.constructor&&(ye=fe.constructor.name),ye==="Map"||ye==="Set"?Array.from(fe):ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye)?Cn(fe,Se):void 0}}(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){ne=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function Cn(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Jn(){var L,P,B,V,ee,J,H,ne,fe,Se,ye=this.context,ie=(0,m.Z)(ye).getInstance(),me=(0,Ze.Z)(ye).getInstance();function ge(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},fe={},ne={},Se={},De()}function He(){De()}function De(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Me=Q.getActiveStream();Me&&(H=Me.getProcessors())}}}function Be(Q,Me){var Ie,ke={},Re=fn(Me);try{for(Re.s();!(Ie=Re.n()).done;){var pe=Ie.value;Q[pe]&&(ke[pe]=Q[pe])}}catch(xe){Re.e(xe)}finally{Re.f()}return ke}function Ye(Q){var Me=me.get().streaming.cmcd.enabledKeys;return Q.filter(function(Ie){return Me.includes(Ie)})}function Ee(Q){try{return Q.type===nt.w.MPD_TYPE?((Ie=Le()).ot="m",Ie):Q.type===nt.w.MEDIA_SEGMENT_TYPE?(Me=Q.mediaType,Se.hasOwnProperty(Me)||(Se[Me]=!1),ne.hasOwnProperty(Me)||(ne[Me]=!1),fe.hasOwnProperty(Me)||(fe[Me]=!1),function(ke){var Re,pe=Le(),xe=function(Ft){try{var An=Ft.quality,rt=Ft.mediaInfo.bitrateList;return parseInt(rt[An].bandwidth/1e3)}catch(vt){return null}}(ke),We=function(Ft){try{return isNaN(Ft.duration)?NaN:Math.round(1e3*Ft.duration)}catch(An){return null}}(ke),dt=function(Ft){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Ft)/100)}catch(An){return null}}(ke.mediaType),at=function(Ft){try{var An=B.pr,rt=ee.getCurrentBufferLevel(Ft);return isNaN(An)||isNaN(rt)?null:100*parseInt(rt/An*10)}catch(vt){return null}}(ke.mediaType),Je=we(ke.mediaType),ht=function(Ft){try{var An=V.getTopBitrateInfoFor(Ft);return Math.round(An.bitrate/1e3)}catch(rt){return null}}(ke.mediaType),Bt=B.pr,Gt=function(Ft){if(H&&H.length!==0){var An,rt=fn(H);try{for(rt.s();!(An=rt.n()).done;){var vt=An.value;if(vt.getType()===Ft)return vt.probeNextRequest()}}catch(Wt){rt.e(Wt)}finally{rt.f()}}}(ke.mediaType);ke.mediaType===y.Z.VIDEO&&(Re="v"),ke.mediaType===y.Z.AUDIO&&(Re="a"),ke.mediaType===y.Z.TEXT&&(Re=ke.mediaInfo.mimeType==="application/mp4"?"tt":"c");var kt=me.get().streaming.cmcd.rtp;return kt||(kt=function(Ft){try{var An=J.getPlaybackRate();An||(An=1);var rt=Ft.quality,vt=Ft.mediaType,Wt=Ft.mediaInfo,Nt=Ft.duration;if(!Wt)return NaN;var en=we(vt);en===0&&(en=500);var Jt=Wt.bitrateList[rt].bandwidth*Nt/1e3/(en/An/1e3),Yt=me.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(me.get().streaming.cmcd.rtpSafetyFactor)?me.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Yt/100)+1)}catch(Dn){return NaN}}(ke)),isNaN(kt)||(pe.rtp=kt),Gt&&(ke.url!==Gt.url?pe.nor=encodeURIComponent(rn.Z.getRelativeUrl(ke.url,Gt.url)):Gt.range&&(pe.nrr=Gt.range)),xe&&(pe.br=xe),Re&&(pe.ot=Re),isNaN(We)||(pe.d=We),isNaN(dt)||(pe.mtp=dt),isNaN(at)||(pe.dl=at),isNaN(Je)||(pe.bl=Je),isNaN(ht)||(pe.tb=ht),isNaN(Bt)||Bt===1||(pe.pr=Bt),fe[ke.mediaType]&&(pe.bs=!0,fe[ke.mediaType]=!1),!ne[ke.mediaType]&&Se[ke.mediaType]||(pe.su=!0,ne[ke.mediaType]=!1,Se[ke.mediaType]=!0),pe}(Q)):Q.type===nt.w.INIT_SEGMENT_TYPE?function(){var ke=Le();return ke.ot="i",ke.su=!0,ke}():Q.type===nt.w.OTHER_TYPE||Q.type===nt.w.XLINK_EXPANSION_TYPE?function(){var ke=Le();return ke.ot="o",ke}():Q.type===nt.w.LICENSE?function(ke){var Re=Le();return Re.ot="k",Re}():null}catch(ke){return null}var Me,Ie}function Le(){var Q={},Me=me.get().streaming.cmcd.cid?me.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=me.get().streaming.cmcd.sid?me.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Me&&(Q.cid="".concat(Me)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function we(Q){try{var Me=ee.getCurrentBufferLevel(Q);return isNaN(Me)?null:100*parseInt(10*Me)}catch(Ie){return null}}function je(Q){try{B.pr=Q.playbackRate}catch(Me){}}function j(Q){try{var Me=L.getIsDynamic(Q.data)?"l":"v",Ie=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Me),B.sf="".concat(Ie)}catch(ke){}}function ue(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(fe[Q.mediaType]||(fe[Q.mediaType]=!0),ne[Q.mediaType]||(ne[Q.mediaType]=!0))}catch(Me){}}function ae(){for(var Q in fe)fe.hasOwnProperty(Q)&&(fe[Q]=!0);for(var Me in ne)ne.hasOwnProperty(Me)&&(ne[Me]=!0)}function se(Q){try{if(!Q)return null;var Me=Object.keys(Q).sort(function(Re,pe){return Re.localeCompare(pe)}),Ie=Me.length,ke=Me.reduce(function(Re,pe,xe){return pe==="v"&&Q[pe]===1||(typeof Q[pe]=="string"&&pe!=="ot"&&pe!=="sf"&&pe!=="st"?Re+="".concat(pe,"=").concat(JSON.stringify(Q[pe])):Re+="".concat(pe,"=").concat(Q[pe]),xe<Ie-1&&(Re+=",")),Re},"");return(ke=ke.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Re){return null}}return P={getQueryParameter:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=Ee(Q),Ie=function(Re){try{var pe=me.get().streaming.cmcd.enabledKeys;return Object.keys(Re).filter(function(xe){return pe.includes(xe)}).reduce(function(xe,We){return xe[We]=Re[We],xe},{})}catch(xe){return Re}}(Me),ke=se(Ie);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch(Re){return null}},getHeaderParameters:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=Ee(Q),Ie=Be(Me,Ye(["br","d","ot","tb"])),ke=Be(Me,Ye(["bl","dl","mtp","nor","nrr","su"])),Re=Be(Me,Ye(["bs","rtp"])),pe=Be(Me,Ye(["cid","pr","sf","sid","st","v"])),xe={"CMCD-Object":se(Ie),"CMCD-Request":se(ke),"CMCD-Status":se(Re),"CMCD-Session":se(pe)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,headers:xe}),xe}return null}catch(We){return null}},setConfig:function(Q){Q&&(Q.abrController&&(V=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,je,this),ie.off(_.Z.MANIFEST_LOADED,j,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,ue,P),ie.off(_.Z.PLAYBACK_SEEKED,ae,P),ge()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,je,P),ie.on(_.Z.MANIFEST_LOADED,j,P),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,ue,P),ie.on(_.Z.PLAYBACK_SEEKED,ae,P),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,He,P)}},L=Vn(ye).getInstance(),ge(),P}Jn.__dashjs_factory_name="CmcdModel";var ar=U.Z.getSingletonFactory(Jn);function Cr(L){return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Cr(L)}function Lr(L,P){Lr=function(ne,fe){return new J(ne,void 0,fe)};var B=ro(RegExp),V=RegExp.prototype,ee=new WeakMap;function J(ne,fe,Se){var ye=B.call(this,ne,fe);return ee.set(ye,Se||ee.get(ne)),ye}function H(ne,fe){var Se=ee.get(fe);return Object.keys(Se).reduce(function(ye,ie){return ye[ie]=ne[Se[ie]],ye},Object.create(null))}return Yi(J,B),J.prototype.exec=function(ne){var fe=V.exec.call(this,ne);return fe&&(fe.groups=H(fe,this)),fe},J.prototype[Symbol.replace]=function(ne,fe){if(typeof fe=="string"){var Se=ee.get(this);return V[Symbol.replace].call(this,ne,fe.replace(/\$<([^>]+)>/g,function(ie,me){return"$"+Se[me]}))}if(typeof fe=="function"){var ye=this;return V[Symbol.replace].call(this,ne,function(){var ie=[];return ie.push.apply(ie,arguments),Cr(ie[ie.length-1])!=="object"&&ie.push(H(ie,ye)),fe.apply(this,ie)})}return V[Symbol.replace].call(this,ne,fe)},Lr.apply(this,arguments)}function Yi(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&hi(L,P)}function ro(L){var P=typeof Map=="function"?new Map:void 0;return ro=function(B){if(B===null||(V=B,Function.toString.call(V).indexOf("[native code]")===-1))return B;var V;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(P!==void 0){if(P.has(B))return P.get(B);P.set(B,ee)}function ee(){return Br(B,arguments,vi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),hi(ee,B)},ro(L)}function Br(L,P,B){return Br=qr()?Reflect.construct:function(V,ee,J){var H=[null];H.push.apply(H,ee);var ne=new(Function.bind.apply(V,H));return J&&hi(ne,J.prototype),ne},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function hi(L,P){return hi=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},hi(L,P)}function vi(L){return vi=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},vi(L)}var Ao="static",io="dynamic",ta="cmsd-",bi=ta+Ao,Il=ta+io,cu="stream",_c=["mb","st","sf","v"],Mf={video:"v",audio:"a",text:"tt",stream:cu},si=/^[-0-9]/;function Os(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},V={}}function ne(ge){ge&&Object.keys(ge).forEach(function(He){_c.includes(He)||delete ge[He]})}function fe(ge){return!ge||ge.toLowerCase()!=="false"&&(si.test(ge)?parseInt(ge,10):ge.replace(/["]+/g,""))}function Se(ge){try{for(var He={},De=ge.split(","),Be=0;Be<De.length;Be++){var Ye=De[Be].split("="),Ee=Ye[0],Le=fe(Ye[1]);He[Ee]=Le}return He}catch(we){P.error("Failed to parse CMSD-Static response header value:",we)}}function ye(ge){try{for(var He={},De=ge.split(","),Be=De[De.length-1].split(";"),Ye=1;Ye<Be.length;Ye++){var Ee=Be[Ye].split("="),Le=Ee[0],we=fe(Ee[1]);He[Le]=we}return He}catch(je){return P.error("Failed to parse CMSD-Dynamic response header value:",je),[]}}function ie(ge){return Mf[ge]||"o"}function me(ge,He,De){var Be=ge===Ao?B:V,Ye=Be[He]||{},Ee=Be[cu]||{};return Ye[De]||Ee[De]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ge,He){for(var De=null,Be=null,Ye=ge.split("\r\n"),Ee=Ye.length-1;Ee>=0;Ee--){var Le=Ye[Ee].match(Lr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Le&&Le.groups){var we=Le.groups.key.toLowerCase(),je=Le.groups.value;switch(we){case bi:De=Se(je),J.trigger(T.Z.CMSD_STATIC_HEADER,De);break;case Il:Be||(Be=ye(je))}}}var j=cu;return De&&De.ot?j=De.ot:He&&(j=ie(He)),ne(B[j]),ne(V[j]),De&&(B[j]=Object.assign(B[j]||{},De)),Be&&(V[j]=Object.assign(V[j]||{},Be)),{static:De,dynamic:Be}},getMaxBitrate:function(ge){var He=ie(ge);return me(io,He,"mb")||-1},getEstimatedThroughput:function(ge){var He=ie(ge);return me(io,He,"etp")||null},getResponseDelay:function(ge){var He=ie(ge);return me(io,He,"rd")||null},getRoundTripTime:function(ge){var He=ie(ge);return me(io,He,"rtt")||null}},P=(0,N.Z)(ee).getInstance().getLogger(L),H(),L}Os.__dashjs_factory_name="CmsdModel";var _n=U.Z.getSingletonFactory(Os);function Xn(){var L,P,B=this.context,V={};function ee(){P=(0,N.Z)(B).getInstance().getLogger(L)}function J(ne){for(var fe={},Se=0,ye=0,ie=0,me=0,ge=ne.length,He=0;He<ge;++He)Se+=ne[He].chunkDownloadTimeRelativeMS,ye+=ne[He].bufferLevel,ie+=ne[He].chunkDownloadTimeRelativeMS*ne[He].bufferLevel,me+=ne[He].chunkDownloadTimeRelativeMS*ne[He].chunkDownloadTimeRelativeMS;return fe.m=(ie-Se*ye/ge)/(me-Se*Se/ge),fe.b=ye/ge-fe.m*Se/ge,function(De){return fe.m*De+fe.b}}function H(ne){var fe,Se=!0,ye=ne.reduce(function(ie,me){return ie+me.bufferLevelAtSegmentEnd},0)/ne.length;return ne.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(Se=!1),ie.bufferLevelAtSegmentEnd/ye<.8&&(Se=!1),fe?fe>ie.bitrate&&(Se=!1):fe=ie.bitrate}),Se}return L={setup:ee,addMeasurement:function(ne,fe,Se,ye,ie){ne&&ne.mediaType&&!V[ne.mediaType]&&(V[ne.mediaType]=[]);var me=ne.mediaInfo.bitrateList.find(function(ge){return ge.id===ne.representationId});V[ne.mediaType].push({index:ne.index,repId:ne.representationId,mediaType:ne.mediaType,requestTimeMS:ye,adjustedAvailabilityStartTimeMS:ne.availabilityStartTime.getTime(),segDurationMS:1e3*ne.duration,chunksDurationMS:Se.reduce(function(ge,He){return ge+He.chunkDownloadDurationMS},0),segmentBytes:Se.reduce(function(ge,He){return ge+He.chunkBytes},0),bitrate:me&&me.bandwidth,bitrateList:ne.mediaInfo.bitrateList,chunkMeasurements:Se,fetchDownloadDurationMS:fe,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(Se.slice(1))}),V[ne.mediaType].length>10&&V[ne.mediaType].shift()},getThroughputCapacityDelayMS:function(ne,fe){var Se=V[ne.mediaType]&&V[ne.mediaType].slice(-3);return!Se||Se.length<3?0:H(Se)?fe/4>250?250:fe/4:0},getEstimatedDownloadDurationMS:function(ne){var fe=V[ne.mediaType].slice(-1).pop(),Se=V[ne.mediaType].slice(-3),ye=fe.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;fe.bufferLevelAtSegmentStart=fe.getEstimatedBufferLevel(ye/2),fe.bufferLevelAtSegmentEnd=fe.getEstimatedBufferLevel(ye);var ie=H(Se),me=ie?.6:.8;if(fe.isBufferStable&&1.05*fe.segDurationMS<fe.fetchDownloadDurationMS)return fe.fetchDownloadDurationMS;if(!ie||fe.segDurationMS<fe.fetchDownloadDurationMS||fe.adjustedAvailabilityStartTimeMS<=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.segDurationMS)return .8*fe.fetchDownloadDurationMS;for(var ge=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.adjustedAvailabilityStartTimeMS,He=0,De=0,Be=0,Ye=0;Ye<fe.chunkMeasurements.length;Ye++){var Ee=fe.chunkMeasurements[Ye];if(ge<De+Ee.chunkDownloadDurationMS)break;De+=Ee.chunkDownloadDurationMS,He+=Ee.chunkBytes,Be++}if(ge<0&&P.warn("request time was before adjusted availibitly start time"),He&&De&&Be>.2*fe.chunkMeasurements.length){var Le=He/De,we=fe.segmentBytes/Le;return fe.fetchDownloadDurationMS<we?fe.fetchDownloadDurationMS*me:we*me}var je=fe.bitrate;return fe.bitrateList.some(function(j){if(j.bandwidth>fe.bitrate)return je=j.bandwidth,!0}),je===fe.bitrate?fe.fetchDownloadDurationMS*me:me*fe.segmentBytes*8*1e3/je}},ee(),L}Xn.__dashjs_factory_name="LowLatencyThroughputModel";var hr=U.Z.getSingletonFactory(Xn),ti=w(5717);function Mr(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Bi(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me=this.context,ge=L.errHandler,He=L.dashMetrics,De=L.mediaPlayerModel,Be=L.requestModifier,Ye=L.boxParser,Ee=L.errors,Le=L.requestTimeout||0,we=(0,m.Z)(me).getInstance(),je=(0,Ze.Z)(me).getInstance();function j(ue,ae){var se,Q=ue.request,Me=[],Ie=!0,ke=!0,Re=new Date,pe=Re,xe=0,We=null,dt=null;if(!Be||!He||!ge)throw new Error("config object is not correct or missing");var at,Je=function(en){Q.requestStartDate=Re,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||Re,Q.fileLoaderType=dt;var Jt=se.response?se.response.responseURL:null,Yt=se.response?se.response.status:null,Dn=se.response&&se.response.getAllResponseHeaders?se.response.getAllResponseHeaders():se.response?se.response.responseHeaders:null,xn=Dn&&je.get().streaming.cmsd&&je.get().streaming.cmsd.enabled?ne.parseResponseHeaders(Dn,Q.mediaType):null;He.addHttpRequest(Q,Jt,Yt,Dn,en?Me:null,xn)},ht=function(en){ke=!1,Je(en),Q.type===nt.w.MPD_TYPE&&(He.addManifestUpdate(Q),we.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},Bt=function(){if(We&&(clearTimeout(We),We=null),B.indexOf(se)!==-1&&(B.splice(B.indexOf(se),1),ke))if(ht(!1),ae>0){try{je.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===nt.w.MEDIA_SEGMENT_TYPE&&De.getRetryAttemptsForType(nt.w.MEDIA_SEGMENT_TYPE)===ae&&we.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:ue};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),j(ue,ae))},De.getRetryIntervalsForType(Q.type))}else{if(Q.type===nt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ge.error(new ce.Z(J[Q.type],Q.url+" is not available",{request:Q,response:se.response})),ue.error&&ue.error(Q,"error",se.response.statusText,se.response),ue.complete&&ue.complete(Q,se.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===nt.w.MEDIA_SEGMENT_TYPE?((at=Pr(me).create({requestModifier:Be,lowLatencyThroughputModel:Se,boxParser:Ye})).setup({dashMetrics:He}),dt=y.Z.FILE_LOADER_TYPES.FETCH):(at=(0,nn.Z)(me).create({requestModifier:Be}),dt=y.Z.FILE_LOADER_TYPES.XHR);var Gt=null,kt=Be.modifyRequestURL?Be.modifyRequestURL(Q.url):Q.url;if(je.get().streaming.cmcd&&je.get().streaming.cmcd.enabled){var Ft=je.get().streaming.cmcd.mode;if(Ft===y.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Yt=H.getQueryParameter(en);return Yt&&Jt.push(Yt),Jt}catch(Dn){return[]}}(Q);kt=rn.Z.addAditionalQueryParameterToUrl(kt,An)}else Ft===y.Z.CMCD_MODE_HEADER&&(Gt=H.getHeaderParameters(Q))}var rt=fe.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var vt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});kt=rn.Z.addAditionalQueryParameterToUrl(kt,vt)}Q.url=kt,se={url:kt,method:nt.w.GET,withCredentials:rt,request:Q,onload:function(){se.response.status>=200&&se.response.status<=299&&(ht(!0),ue.success&&ue.success(se.response.response,se.response.statusText,se.response.responseURL),ue.complete&&ue.complete(Q,se.response.statusText))},onend:Bt,onerror:Bt,progress:function(en){var Jt=new Date;Ie&&(Ie=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Me.push({s:pe,d:en.time?en.time:Jt.getTime()-pe.getTime(),b:[en.loaded?en.loaded-xe:0]}),pe=Jt,xe=en.loaded),We&&(clearTimeout(We),We=null),je.get().streaming.fragmentRequestProgressTimeout>0&&(We=setTimeout(function(){ye.warn("Abort request "+se.url+" due to progress timeout"),se.response.onabort=null,se.loader.abort(se),Bt()},je.get().streaming.fragmentRequestProgressTimeout)),ue.progress&&en&&ue.progress(en)},onabort:function(){Je(!0),We&&(clearTimeout(We),We=null),ue.abort&&ue.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Yt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Yt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";ye.warn(Jt)},loader:at,timeout:Le,headers:Gt};var Wt=new Date().getTime();if(isNaN(Q.delayLoadingTime)||Wt>=Q.delayLoadingTime)B.push(se),at.load(se);else{var Nt={httpRequest:se};V.push(Nt),Nt.delayTimeout=setTimeout(function(){if(V.indexOf(Nt)!==-1){V.splice(V.indexOf(Nt),1);try{Re=new Date,pe=Re,B.push(Nt.httpRequest),at.load(Nt.httpRequest)}catch(en){Nt.httpRequest.onerror()}}},Q.delayLoadingTime-Wt)}}return P={load:function(ue){ue.request?j(ue,De.getRetryAttemptsForType(ue.request.type)):ue.error&&ue.error(ue.request,"error")},abort:function(){ee.forEach(function(ue){clearTimeout(ue.timeout),ue.config.request&&ue.config.abort&&ue.config.abort(ue.config.request)}),ee=[],V.forEach(function(ue){return clearTimeout(ue.delayTimeout)}),V=[],B.forEach(function(ue){ue.request.type!==nt.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(ue.onloadend=ue.onerror=ue.onprogress=void 0,ue.loader.abort(ue))}),B=[]}},ye=(0,N.Z)(me).getInstance().getLogger(P),B=[],V=[],ee=[],H=ar(me).getInstance(),ne=_n(me).getInstance(),Se=hr(me).getInstance(),fe=(0,ti.Z)(me).getInstance(),Mr(ie={},nt.w.MPD_TYPE,Ee.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,nt.w.XLINK_EXPANSION_TYPE,Ee.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,nt.w.INIT_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,nt.w.MEDIA_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,nt.w.INDEX_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,nt.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,nt.w.OTHER_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,P}Bi.__dashjs_factory_name="HTTPLoader";var Xr=U.Z.getClassFactory(Bi);function na(){var L;function P(){L={}}function B(){P()}return B(),{getLoader:function(V){for(var ee in L)if(L.hasOwnProperty(ee)&&V.startsWith(ee))return L[ee];return Xr},registerLoader:function(V,ee){L[V]=ee},unregisterLoader:function(V){L[V]&&delete L[V]},unregisterAllLoader:P,reset:B}}na.__dashjs_factory_name="SchemeLoaderFactory";var Pi=U.Z.getSingletonFactory(na);function ui(L){L=L||{};var P,B,V=this.context;return P=Pi(V).getInstance(),{load:function(ee){if(!B){var J=P.getLoader(ee&&ee.request?ee.request.url:null);B=J(V).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}ui.__dashjs_factory_name="URLLoader";var Io=U.Z.getClassFactory(ui);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wi(L)}function qo(L,P){return qo=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},qo(L,P)}function ra(L,P){return!P||Wi(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function gt(L){return gt=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},gt(L)}var ia=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&qo(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=gt(P);if(B){var ne=gt(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return ra(this,J)});function ee(J){var H;return function(ne,fe){if(!(ne instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=V.call(this,J)).checkForExistenceOnly=!0,H}return ee}(Z.Z);function Ls(L){L=L||{};var P,B,V=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,ne=L.errors,fe=L.streamId;return P={checkForExistence:function(Se){var ye=function(me){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:Se,exists:me})};if(Se){var ie=new ia(Se.url);B.load({request:ie,success:function(){ye(!0)},error:function(){ye(!1)}})}else ye(!1)},load:function(Se){var ye=function(ie,me){ee.trigger(J.LOADING_COMPLETED,{request:Se,response:ie||null,error:me||null,sender:P})};Se?B.load({request:Se,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:Se,stream:ie.stream,streamId:fe}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:Se,response:ie.data||null,error:null,sender:P})},success:function(ie){ye(ie)},error:function(ie,me,ge){ye(void 0,new ce.Z(ne.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ge,me))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:P})}}):ye(void 0,new ce.Z(ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=Io(V).create({errHandler:L.errHandler,errors:ne,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:y.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),P}Ls.__dashjs_factory_name="FragmentLoader";var pr=U.Z.getClassFactory(Ls);function Co(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}Co.__dashjs_factory_name="SegmentResponseModifier";var fu=U.Z.getSingletonFactory(Co);function Cl(L){L=L||{};var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,ne=L.mediaPlayerModel,fe=L.dashMetrics,Se=(0,N.Z)(ee).getInstance(),ye=fu(ee).getInstance(),ie=L.streamInfo;function me(){return ie.id}function ge(){for(var De in V)V[De].reset();V={}}function He(De){if(De.sender){var Be=De.request,Ye=De.response,Ee=Be.isInitializationRequest(),Le=Be.mediaInfo.streamInfo;if(De.error&&(Be.mediaType===y.Z.AUDIO||Be.mediaType===y.Z.VIDEO||Be.mediaType===y.Z.TEXT&&Be.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:De.request.serviceLocation}),Ye&&Le){var we=function(je,j,ue,ae){var se=new Qt;return se.streamId=ue,se.mediaInfo=j.mediaInfo,se.segmentType=j.type,se.start=j.startTime,se.duration=j.duration,se.end=se.start+se.duration,se.bytes=je,se.index=j.index,se.quality=j.quality,se.representationId=j.representationId,se.endFragment=ae,se}(Ye,Be,ie.id,De.type!==T.Z.FRAGMENT_LOADING_PROGRESS);ye.modifyResponseAsync(we).then(function(je){J.trigger(Ee?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:je,request:Be},{streamId:Le.id,mediaType:Be.mediaType})}).catch(function(je){B.error(je),J.trigger(Ee?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:we,request:Be},{streamId:Le.id,mediaType:Be.mediaType})})}else B.warn("No "+Be.mediaType+" bytes to push or stream is inactive.")}}return P={getStreamId:me,getModel:function(De){var Be=V[De];return Be||(Be=$(ee).create({streamInfo:ie,type:De,dashMetrics:fe,fragmentLoader:pr(ee).create({dashMetrics:fe,mediaPlayerModel:ne,errHandler:H,requestModifier:(0,Ke.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Ae,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:me()}),debug:Se,eventBus:J,events:T.Z}),V[De]=Be),Be},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,He,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,He,this),ge()}},B=Se.getLogger(P),ge(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,He,P),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,He,P),P}Cl.__dashjs_factory_name="FragmentController";var vs=U.Z.getClassFactory(Cl),Ka=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},ku=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Fu(L){var P,B,V=this.context,ee=L.streamInfo;function J(ne){B.setTrackByIndex(ne)}function H(){B&&B.reset()}return P={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var ne=B.getTracks();ne&&ne.length>0&&J(0)},provide:function(ne,fe){if(typeof fe=="function"){var Se,ye,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||ne==null)fe(null);else{(ye=B.getThumbnailRequestForTime(ne))&&(ie.segmentDuration=ye.duration),Se=ne%ie.segmentDuration;var me=Math.floor(Se*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ge=new Ka;if(ge.width=Math.floor(ie.widthPerTile),ge.height=Math.floor(ie.heightPerTile),ge.x=Math.floor(me%ie.tilesHor)*ie.widthPerTile,ge.y=Math.floor(me/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(ne,function(De){ge.url=De,fe(ge)});if(ye)ge.url=ye.url,ie.segmentDuration=NaN;else{var He=Math.floor(ne/ie.segmentDuration);ge.url=function(De,Be){var Ye=Be+De.startNumber,Ee=(0,M.vi)(De.templateUrl,"Number",Ye);return Ee=(0,M.vi)(Ee,"Time",(Ye-1)*De.segmentDuration*De.timescale),Ee=(0,M.vi)(Ee,"Bandwidth",De.bandwidth),(0,M.eR)(Ee)}(ie,He)}fe(ge)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var ne=B.getTracks(),fe=0;return ne.map(function(Se){var ye=new ku;return ye.mediaType=y.Z.IMAGE,ye.qualityIndex=fe++,ye.bitrate=Se.bitrate,ye.width=Se.width,ye.height=Se.height,ye})},reset:H},H(),B=(0,In.Z)(V).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),P}Fu.__dashjs_factory_name="ThumbnailController";var oa=U.Z.getClassFactory(Fu),aa=w(7417);function du(L){var P;L=L||{};var B=[],V=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(ne){B.indexOf(ne)===-1&&(B.push(ne),V.trigger(ee,{entry:ne}))}return P={add:H,contains:function(ne){return!!(B.length&&ne&&ne.length)&&B.indexOf(ne)!==-1},reset:function(){B=[]}},J&&V.on(J,function(ne){H(ne.entry)},P),P}du.__dashjs_factory_name="BlackListController";var ys=U.Z.getClassFactory(du),Tc=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT,y.Z.MUXED,y.Z.IMAGE];function xr(L){L=L||{};var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee,Le=this.context,we=(0,m.Z)(Le).getInstance(),je=(0,St.Z)(Le).getInstance(),j=L.manifestModel,ue=L.mediaPlayerModel,ae=L.dashMetrics,se=L.manifestUpdater,Q=L.adapter,Me=L.timelineConverter,Ie=L.capabilities,ke=L.errHandler,Re=L.abrController,pe=L.playbackController,xe=L.eventController,We=L.mediaController,dt=L.protectionController,at=L.textController,Je=L.videoModel,ht=L.streamInfo,Bt=L.settings;function Gt(bt,Sn){return new Promise(function(En,Lt){Jt(),ye=!0,Dn();var On=Je.getElement(),st=[];Tc.forEach(function(tt){(tt!==y.Z.TEXT||bt)&&(tt!==y.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&st.push(kt(tt,bt))}),Promise.all(st).then(function(){return tt=Sn,new Promise(function(qt){var ze={},Ve=V.map(function(Dt){return Dt.createBufferSinks(tt)});Promise.all(Ve).then(function(Dt){Dt.forEach(function(dn){dn&&(ze[dn.getType()]=dn)}),qt(ze)}).catch(function(){qt(ze)})});var tt}).then(function(tt){if(ye=!1,V.length===0){var qt="No streams to play.";ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qt,j.getValue())),B.fatal(qt)}else xn();bt&&at.createTracks(ht),En(tt)}).catch(function(tt){Lt(tt)})})}function kt(bt,Sn){var En,Lt=Q.getAllMediaInfoForType(ht,bt),On=[],st=null;if(!Lt||Lt.length===0)return B.info("No "+bt+" data."),Promise.resolve();bt===y.Z.VIDEO&&(ne=!0),bt===y.Z.AUDIO&&(fe=!0);for(var tt=0,qt=Lt.length;tt<qt;tt++)st=Lt[tt],bt===y.Z.TEXT&&st.isEmbedded&&(at.addEmbeddedTrack(ht,st),On.push(st)),Ft(st)&&We.addTrack(st);if(On.length>0&&(We.setInitialMediaSettingsForType(bt,ht),at.addMediaInfosToBuffer(ht,bt,On)),Lt=Lt.filter(function(Ve){return!Ve.isEmbedded}),Lt.length===0)return Promise.resolve();if(bt===y.Z.IMAGE)return(me=oa(Le).create({streamInfo:ht,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Be,eventBus:we,events:T.Z,dashConstants:v.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();we.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:ht,mediaInfo:st}),We.setInitialMediaSettingsForType(bt,ht);var ze=function(Ve,Dt){var dn=Ve&&Ve.length>0?Ve[0]:null,Tn=ie.getModel(dn?dn.type:null),sr=dn?dn.type:null,Zr=dn?dn.mimeType:null,Ai=dn?dn.isFragmented:null,zr=pn(Le).create({streamInfo:ht,type:sr,mimeType:Zr,timelineConverter:Me,adapter:Q,manifestModel:j,mediaPlayerModel:ue,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:Re,playbackController:pe,mediaController:We,textController:at,errHandler:ke,settings:Bt,boxParser:De,segmentBlacklistController:ge});zr.initialize(Dt,ne,Ai),V.push(zr);for(var oo=0;oo<Ve.length;oo++)zr.addMediaInfo(Ve[oo]);return sr===y.Z.TEXT&&at.addMediaInfosToBuffer(ht,sr,Ve,Tn),zr}(Lt,Sn);return(En=We.getCurrentTrackFor(bt,ht.id))?(Re.updateTopQualityIndex(En),ze.selectMediaInfo(bt===y.Z.TEXT&&En.isEmbedded?Lt[0]:En)):Promise.resolve()}function Ft(bt){var Sn,En=bt?bt.type:null;return En===y.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,j.getValue())),!1):!(En!==y.Z.TEXT&&En!==y.Z.IMAGE&&bt.contentProtection&&!Ie.supportsEncryptedMedia()&&(ke.error(new ce.Z(Ae.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ae.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(bt){for(var Sn=V?V.length:0,En=0;En<Sn;En++){var Lt=V[En].getFragmentModel();Lt.abortRequests(),Lt.resetInitialSettings(),V[En].reset(!1,bt)}at&&at.deactivateStream(ht),V=[],J=!1,H=!1,Fn(!1),vt(!1),we.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:ht})}function rt(bt){An(bt),ee=!1,ne=!1,fe=!1,Se={},ye=!1,Ye=!1,Ee=[]}function vt(bt){Ye=bt}function Wt(){return ht?ht.start:NaN}function Nt(){return ht?ht.id:null}function en(){return ht}function Jt(){if(!Je||!Re)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Yt(bt){bt.error&&(ke.error(bt.error),B.fatal(bt.error.message))}function Dn(){if(xe){var bt=Q.getEventsFor(ht);bt&&bt.length>0&&xe.addInlineEvents(bt,ht.id)}}function xn(){for(var bt=V.length,Sn=Se.audio||Se.video?new ce.Z(Ae.DATA_UPDATE_FAILED_ERROR_CODE,Ae.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<bt;En++)if(V[En].isUpdating()||ye)return;if(dt){dt.clearMediaInfoArray();for(var Lt=0;Lt<bt&&V[Lt];Lt++){var On=V[Lt].getType(),st=V[Lt].getMediaInfo();if(On===y.Z.AUDIO||On===y.Z.VIDEO||On===y.Z.TEXT&&st.isFragmented){var tt=V[Lt].getMediaInfo();tt&&dt.initializeForMedia(tt)}}dt.handleKeySystemFromManifest()}Sn?ke.error(Sn):ee||(ee=!0,Je.waitForReadyState(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){we.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:ht})}))}function rr(){var bt=un(),Sn=bt.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!bt[En].isBufferingCompleted()&&(bt[En].getType()===y.Z.AUDIO||bt[En].getType()===y.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",bt[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,we.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:ht},{streamInfo:ht})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(bt){Se[bt.mediaType]=bt.error,xn()}function It(bt){xe&&xe.addInbandEvents(bt.events,ht.id)}function $t(bt){return bt&&bt.type?Zt(bt.type):null}function Zt(bt){return bt?un().filter(function(Sn){return Sn.getType()===bt})[0]:null}function un(){for(var bt,Sn,En=[],Lt=0;Lt<V.length;Lt++)(bt=(Sn=V[Lt]).getType())!==y.Z.AUDIO&&bt!==y.Z.VIDEO&&bt!==y.Z.TEXT||En.push(Sn);return En}function vn(bt,Sn){var En=en(),Lt=Sn.getStreamInfo();if(!Lt||!En)return!0;var On=Q.getAdaptationForType(Lt.index,bt,Lt),st=Q.getAdaptationForType(En.index,bt,En);return On&&st?!(!Pn(st)&&Pn(On)):!On&&!st}function Pn(bt){return!!bt&&!!(bt.ContentProtection||bt.Representation_asArray&&bt.Representation_asArray.length>0&&bt.Representation_asArray[0].ContentProtection)}function Nn(bt,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!bt||!bt.hasOwnProperty("getStreamInfo"))return!1;var Lt=bt.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Lt||!On)return!1;var st=Q.getAdaptationForType(Lt.index,Sn,Lt),tt=Q.getAdaptationForType(On.index,Sn,On);if(!st||!tt)return!st&&!tt;var qt=st&&tt&&st.mimeType===tt.mimeType,ze=tt.Representation_asArray.map(function(Tn){return Tn.codecs}),Ve=st.Representation_asArray.map(function(Tn){return Tn.codecs}),Dt=Ve.some(function(Tn){return ze.indexOf(Tn)>-1}),dn=Ve.some(function(Tn){return ze.some(function(sr){return Ie.codecRootCompatibleWithCodec(sr,Tn)})});return Dt||dn&&qt}function Fn(bt){He=bt}function Gn(){return He}return P={initialize:function(){we.on(T.Z.BUFFERING_COMPLETED,rr,P),we.on(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.on(T.Z.INBAND_EVENTS,It,P),dt&&(we.on(T.Z.KEY_ERROR,Yt,P),we.on(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.on(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.on(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.on(T.Z.KEY_SESSION_CREATED,Yt,P),we.on(T.Z.KEY_STATUSES_CHANGED,Yt,P)),at.initializeForStream(ht),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht})},getStreamId:function(){return ht?ht.id:null},activate:function(bt,Sn){return new Promise(function(En,Lt){if(!J)return Gn()?(J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),void En(Sn)):void function(On,st){return Gt(On,st)}(bt,Sn).then(function(On){J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),En(On)}).catch(function(On){Lt(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return ht?ht.duration:NaN},getStartTime:Wt,getId:Nt,getStreamInfo:en,getHasAudioTrack:function(){return fe},getHasVideoTrack:function(){return ne},startPreloading:function(bt,Sn){return new Promise(function(En,Lt){Gn()?Lt():(B.info("[startPreloading] Preloading next stream with id ".concat(Nt())),Fn(!0),Gt(bt,Sn).then(function(){for(var On=0;On<V.length&&V[On];On++)V[On].setExplicitBufferingTime(Wt()),V[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Lt()}))})},initializeForTextWithMediaSource:function(bt){return new Promise(function(Sn,En){kt(y.Z.TEXT,bt).then(function(){return(Lt=Zt(y.Z.TEXT))?Lt.createBufferSinks():Promise.resolve();var Lt}).then(function(){at.createTracks(ht),Sn()}).catch(function(Lt){En(Lt)})})},getThumbnailController:function(){return me},getBitrateListFor:function(bt){if(Jt(),bt===y.Z.IMAGE)return me?me.getBitrateList():[];var Sn=function(En){for(var Lt=null,On=0;On<V.length;On++)if((Lt=V[On]).getType()===En)return Lt.getMediaInfo();return null}(bt);return Re.getBitrateList(Sn)},updateData:function(bt){return new Promise(function(Sn){ye=!0,ht=bt,xe&&Dn();for(var En=[],Lt=0,On=V.length;Lt<On;Lt++){var st=V[Lt],tt=st.getMediaInfo();En.push(st.updateStreamInfo(ht));var qt=Q.getAllMediaInfoForType(ht,st.getType());if(qt=qt.filter(function(Dt){return!Dt.isEmbedded})){st.clearMediaInfoArray();for(var ze=0;ze<qt.length;ze++){var Ve=qt[ze];st.addMediaInfo(qt[ze]),Q.areMediaInfosEqual(tt,Ve)&&(Re.updateTopQualityIndex(Ve),En.push(st.selectMediaInfo(Ve)))}}}Promise.all(En).then(function(){for(En=[];Ee.length>0;){var Dt=Ee.pop(),dn=Dt.newMediaInfo,Tn=$t(Dt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(dn))}return Promise.all(En)}).then(function(){ye=!1,xn(),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht}),Sn()})})},reset:function(bt){ie&&(ie.reset(),ie=null),Re&&ht&&Re.clearDataForStream(ht.id),ge&&(ge.reset(),ge=null),rt(bt),ht=null,we.off(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.off(T.Z.BUFFERING_COMPLETED,rr,P),we.off(T.Z.INBAND_EVENTS,It,P),dt&&(we.off(T.Z.KEY_ERROR,Yt,P),we.off(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.off(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.off(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.off(T.Z.KEY_SESSION_CREATED,Yt,P),we.off(T.Z.KEY_STATUSES_CHANGED,Yt,P))},getProcessors:un,setMediaSource:function(bt){return new Promise(function(Sn,En){for(var Lt=[],On=0;On<V.length;)Ft(V[On].getMediaInfo())?(Lt.push(V[On].setMediaSource(bt)),On++):(V[On].reset(),V.splice(On,1));Promise.all(Lt).then(function(){for(var st=0;st<V.length;st++)V[st].dischargePreBuffer();if(V.length===0){var tt="No streams to play.";ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,tt+"nostreams",j.getValue())),B.fatal(tt)}Sn()}).catch(function(st){B.error(st),En(st)})})},isMediaCodecCompatible:function(bt){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Nn(bt,y.Z.VIDEO,Sn)&&Nn(bt,y.Z.AUDIO,Sn)},isProtectionCompatible:function(bt){return!bt||vn(y.Z.VIDEO,bt)&&vn(y.Z.AUDIO,bt)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return Ye},setIsEndedEventSignaled:vt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var bt=V.length,Sn=0;Sn<bt&&V[Sn];Sn++)V[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(bt){if(J&&ht){H=!1;var Sn=bt.newMediaInfo,En=j.getValue();Q.setCurrentMediaInfo(ht.id,Sn.type,Sn);var Lt=$t(Sn);if(Lt){var On=pe.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(Ee.push(bt),se.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),se.refreshManifest())):Lt.selectMediaInfo(Sn).then(function(){Sn.type!==y.Z.VIDEO&&Sn.type!==y.Z.AUDIO||Re.updateTopQualityIndex(Sn),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function(bt){var Sn=Zt(bt.mediaType);Sn&&Sn.prepareQualityChange(bt)}},function(){try{Be=(0,N.Z)(Le).getInstance(),B=Be.getLogger(P),rt(),De=(0,aa.Z)(Le).getInstance(),ge=ys(Le).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=vs(Le).create({streamInfo:ht,mediaPlayerModel:ue,dashMetrics:ae,errHandler:ke,settings:Bt,boxParser:De,dashConstants:v.Z,urlUtils:je})}catch(bt){throw bt}}(),P}xr.__dashjs_factory_name="Stream";var Es=U.Z.getClassFactory(xr),_s=function L(P){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||null,this.type=nt.w.CONTENT_STEERING_TYPE,this.responseType="json"},Yr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Sc(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De=this.context,Be=(0,St.Z)(De).getInstance();function Ye(Re){j(Re,"baseUrl")}function Ee(Re){j(Re,"location")}function Le(Re){if(Re&&Re.request&&Re.request.serviceLocation&&Re.request.requestStartDate&&Re.request.requestEndDate&&!isNaN(Re.request.bytesTotal)){var pe=Re.request.serviceLocation,xe=Re.request.requestEndDate.getTime()-Re.request.requestStartDate.getTime();je(pe,parseInt(8*Re.request.bytesTotal/xe*1e3))}}function we(Re){Re&&Re.httpRequest&&Re.httpRequest._serviceLocation&&!isNaN(Re.throughput)&&je(Re.httpRequest._serviceLocation,1e3*Re.throughput)}function je(Re,pe){ee[Re]||(ee[Re]=[]),ee[Re].push(pe),ee[Re].length>4&&ee[Re].shift()}function j(Re,pe){if(Re&&Re.request&&Re.request.serviceLocation){var xe=Re.request.serviceLocation;V[pe].all.indexOf(xe)===-1&&V[pe].all.push(xe),V[pe].current=xe}}function ue(){var Re=ye.getValue(),pe=He.getContentSteering(Re);return pe||(pe=me.getServiceDescriptionSettings().contentSteering),pe}function ae(){return new Promise(function(Re){try{var pe=ue();if(!pe||!pe.serverUrl)return void Re();var xe=function(dt){var at=dt.serverUrl;B&&B.reloadUri&&(at=Be.isRelative(B.reloadUri)?Be.resolve(B.reloadUri,dt.serverUrl):B.reloadUri);var Je=[],ht=V.baseUrl.all.concat(V.location.all);if(ht.length>0){var Bt=ht.map(function(Ft){var An=function(rt){if(!rt||!ee[rt]||ee[rt].length===0)return-1;var vt=ee[rt].reduce(function(Wt,Nt){return Wt+Nt})/ee[rt].length;return parseInt(vt)}(Ft);return{serviceLocation:Ft,throughput:An}});Bt.sort(function(Ft,An){return An.throughput-Ft.throughput});var Gt="",kt="";Bt.forEach(function(Ft,An){An!==0&&(Gt="".concat(Gt,","),Ft.throughput>-1&&(kt="".concat(kt,","))),Gt="".concat(Gt).concat(Ft.serviceLocation),Ft.throughput>-1&&(kt="".concat(kt).concat(Ft.throughput))}),Je.push({key:"_DASH_pathway",value:'"'.concat(Gt,'"')}),Je.push({key:"_DASH_throughput",value:kt})}return at=rn.Z.addAditionalQueryParameterToUrl(at,Je)}(pe),We=new _s(xe);H.load({request:We,success:function(dt){(function(at){at&&at[v.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(at[v.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Yr).version=at[v.Z.CONTENT_STEERING_RESPONSE.VERSION],at[v.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(at[v.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=at[v.Z.CONTENT_STEERING_RESPONSE.TTL]),at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(Je){return function(ht){return ht[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST]}(Je)})),Me())})(dt),ge.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:xe}),Re()},error:function(dt,at,Je,ht){(function(Bt,Gt){try{switch(P.warn("Error fetching data from content steering server",Bt),Gt.status){case 410:break;case 429:var kt=Gt&&Gt.getResponseHeader?Gt.getResponseHeader("retry-after"):null;kt!==null&&(B||(B={}),B.ttl=parseInt(kt)),Me();break;default:Me()}}catch(Ft){P.error(Ft)}})(dt,ht),Re(dt)},complete:function(){V.baseUrl.all=se(V.baseUrl),V.location.all=se(V.location)}})}catch(dt){Re(dt)}})}function se(Re){return Re.all&&Re.all.length!==0&&Re.current?Re.all.filter(function(pe){return pe===Re.current}):[]}function Q(Re){try{var pe=[];return Re&&Re.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(xe){var We=Re.filter(function(Bt){return xe[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Bt.serviceLocation}),dt=null;if(We&&We.length>0&&(dt=We[0]),dt){var at=new URL(dt.url),Je=xe[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST];Je=rn.Z.stringHasProtocol(Je)?Je:"".concat(at.protocol,"//").concat(Je);var ht={synthesizedUrl:"".concat(Je).concat(at.pathname),serviceLocation:xe[v.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:xe[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:dt};pe.push(ht)}}),pe}catch(xe){return P.error(xe),[]}}function Me(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function Ie(){J&&clearTimeout(J),J=null}function ke(){B=null,ee={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Ie()}return L={reset:function(){ke(),ge.off(_.Z.FRAGMENT_LOADING_STARTED,Ye,L),ge.off(_.Z.MANIFEST_LOADING_STARTED,Ee,L),ge.off(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)},setConfig:function(Re){Re&&(Re.adapter&&(He=Re.adapter),Re.errHandler&&(ne=Re.errHandler),Re.dashMetrics&&(fe=Re.dashMetrics),Re.mediaPlayerModel&&(Se=Re.mediaPlayerModel),Re.requestModifier&&(ie=Re.requestModifier),Re.manifestModel&&(ye=Re.manifestModel),Re.serviceDescriptionController&&(me=Re.serviceDescriptionController),Re.eventBus&&(ge=Re.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var Re=ue();return!!Re&&Re.queryBeforeStart},getSteeringDataFromManifest:ue,stopSteeringRequestTimer:Ie,getSynthesizedBaseUrlElements:function(Re){try{return Q(Re).map(function(pe){var xe=new Qn(pe.synthesizedUrl,pe.serviceLocation);return xe.queryParams=pe.queryParams,xe.dvbPriority=pe.reference.dvbPriority,xe.dvbWeight=pe.reference.dvbWeight,xe.availabilityTimeOffset=pe.reference.availabilityTimeOffset,xe.availabilityTimeComplete=pe.reference.availabilityTimeComplete,xe})}catch(pe){return P.error(pe),[]}},getSynthesizedLocationElements:function(Re){try{return Q(Re).map(function(pe){var xe=new Zn(pe.synthesizedUrl,pe.serviceLocation);return xe.queryParams=pe.queryParams,xe})}catch(pe){return P.error(pe),[]}},initialize:function(){H=Io(De).create({errHandler:ne,dashMetrics:fe,mediaPlayerModel:Se,requestModifier:ie,errors:Ae}),ge.on(_.Z.FRAGMENT_LOADING_STARTED,Ye,L),ge.on(_.Z.MANIFEST_LOADING_STARTED,Ee,L),ge.on(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)}},P=(0,N.Z)(De).getInstance().getLogger(L),ke(),L}Sc.__dashjs_factory_name="ContentSteeringController";var Ca=U.Z.getSingletonFactory(Sc);function bl(){var L,P,B,V=this.context,ee=(0,Ze.Z)(V).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(ne){var fe=B.getCurrentSteeringResponseData();return fe&&fe.pathwayPriority&&fe.pathwayPriority.length>0?function(){for(var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,me=null,ge=function(){var He=Se[ie],De=ye.findIndex(function(Be){return Be.serviceLocation&&Be.serviceLocation===He});if(De!==-1&&!P.contains(ye[De].serviceLocation))return me=ye[De],"break";ie+=1};ie<Se.length&&ge()!=="break";);return me}(fe.pathwayPriority,ne):null}(J)),H||(H=function(ne){return ne[0]}(J)),H},setConfig:function(J){J.blacklistController&&(P=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){P.reset()}},P=ys(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Ca(V).getInstance(),L}bl.__dashjs_factory_name="LocationSelector";var sa=U.Z.getClassFactory(bl);function Ts(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He=this.context,De=(0,m.Z)(He).getInstance(),Be=(0,St.Z)(He).getInstance();function Ye(){B=NaN,H=!1,ee=!0,J=!1,Ee()}function Ee(){V!==null&&(clearTimeout(V),V=null)}function Le(Ie){Ee(),J||(isNaN(Ie)&&!isNaN(B)&&(Ie=1e3*B),isNaN(Ie)||(P.debug("Refresh manifest in "+Ie+" milliseconds."),V=setTimeout(ue,Ie)))}function we(){var Ie=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var ke=fe.getValue(),Re=ke.url,pe=null,xe=ye.getPatchLocation(ke),We=Se.select(xe),dt=null;if(We&&!Ie)Re=We.url,pe=We.serviceLocation,dt=We.queryParams;else{var at=je(ke),Je=Se.select(at);Je&&(Re=Je.url,pe=Je.serviceLocation,dt=Je.queryParams)}Be.isRelative(Re)&&(Re=Be.resolve(Re,ke.url)),ne.load(Re,pe,dt)}function je(Ie){var ke=ye.getLocation(Ie),Re=me.getSynthesizedLocationElements(ke);return ke.concat(Re)}function j(Ie){if(Ie){if(ye.getIsPatch(Ie)){var ke=Ie;Ie=fe.getValue();var Re=ye.isPatchValid(Ie,ke),pe=Re;if(Re){var xe=ye.getPublishTime(Ie);pe=ye.applyPatchToManifest(Ie,ke);var We=ye.getPublishTime(Ie);pe=xe.getTime()!=We.getTime()}if(!pe)return P.debug("Patch provided is invalid, performing full manifest refresh"),void we(!0);Ie.loadedTime=new Date}}else(Ie=fe.getValue()).loadedTime=new Date;if(fe.getValue()&&fe.getValue().type===v.Z.DYNAMIC&&Ie.type===v.Z.STATIC)return De.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);fe.setValue(Ie);var dt=new Date,at=(dt.getTime()-Ie.loadedTime.getTime())/1e3;1e3*(B=ye.getManifestUpdatePeriod(Ie,at))>2147483647&&(B=2147483647e-3),De.trigger(T.Z.MANIFEST_UPDATED,{manifest:Ie}),P.info("Manifest has been refreshed at "+dt+"["+dt.getTime()/1e3+"] "),ee||Le()}function ue(){ee||(H?Le(ge.get().streaming.manifestUpdateRetryInterval):we())}function ae(Ie){Ie.error?Ie.error.code===Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(Ie.error):j(Ie.manifest)}function se(){ee=!1,Le()}function Q(){(ee=!ge.get().streaming.scheduling.scheduleWhilePaused)&&Ee()}function Me(){H=!1}return L={initialize:function(){Ye(),De.on(T.Z.STREAMS_COMPOSED,Me,this),De.on(_.Z.PLAYBACK_STARTED,se,this),De.on(_.Z.PLAYBACK_PAUSED,Q,this),De.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(Ie){j(Ie)},refreshManifest:we,getIsUpdating:function(){return H},setConfig:function(Ie){Ie&&(Ie.manifestModel&&(fe=Ie.manifestModel),Ie.adapter&&(ye=Ie.adapter),Ie.manifestLoader&&(ne=Ie.manifestLoader),Ie.errHandler&&(ie=Ie.errHandler),Ie.locationSelector&&(Se=Ie.locationSelector),Ie.settings&&(ge=Ie.settings),Ie.contentSteeringController&&(me=Ie.contentSteeringController))},reset:function(){De.off(_.Z.PLAYBACK_STARTED,se,this),De.off(_.Z.PLAYBACK_PAUSED,Q,this),De.off(T.Z.STREAMS_COMPOSED,Me,this),De.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),Ye()}},P=(0,N.Z)(He).getInstance().getLogger(L),Se=sa(He).create(),L}Ts.__dashjs_factory_name="ManifestUpdater";var Vr=U.Z.getClassFactory(Ts);function Va(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be=this.context,Ye=(0,m.Z)(Be).getInstance(),Ee=(0,St.Z)(Be).getInstance();function Le(){ne=[],fe=[],Se=null,ye=null,me=null,ie=NaN,B=!1,V=!1,ge=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function we(){ee.get().streaming.utcSynchronization.enabled&&!B&&!V&&me&&me.value&&me.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(ye&&(Date.now()-ye)/1e3<30||(ne=[],V=!0,je(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function je(Je){try{if(Je<=0)return void dt();var ht=Date.now();J[me.schemeIdUri](me.value,function(Bt){var Gt=Date.now(),kt=ue(ht,Gt,Bt);ne.push(kt),je(Je-1)},function(){dt()})}catch(Bt){dt()}}function j(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ht=Je||0;if(!fe||fe.length===0||ht>=fe.length)ae();else{var Bt=fe[ht];if(Bt)if(J.hasOwnProperty(Bt.schemeIdUri)){var Gt=new Date().getTime();J[Bt.schemeIdUri](Bt.value,function(kt){var Ft=new Date().getTime(),An=ue(Gt,Ft,kt);me=Bt,ae(An)},function(){j(ht+1)})}else j(ht+1);else ae()}}function ue(Je,ht,Bt){return Bt-(ht-(ht-Je)/2)}function ae(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ht=isNaN(Je);ht&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?xe():We(ht,Je)}function se(Je){var ht=Date.parse(Je);return isNaN(ht)&&(ht=function(Bt){var Gt,kt,Ft=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Bt);return Gt=Date.UTC(parseInt(Ft[1],10),parseInt(Ft[2],10)-1,parseInt(Ft[3],10),parseInt(Ft[4],10),parseInt(Ft[5],10),Ft[6]&&(parseInt(Ft[6],10)||0),Ft[7]&&1e3*parseFloat(Ft[7])||0),Ft[9]&&Ft[10]&&(kt=60*parseInt(Ft[9],10)+parseInt(Ft[10],10),Gt+=(Ft[8]==="+"?-1:1)*kt*60*1e3),new Date(Gt).getTime()}(Je)),ht}function Q(Je){return Date.parse(Je)}function Me(Je){return Date.parse(Je)}function Ie(Je,ht,Bt){Bt()}function ke(Je,ht,Bt){var Gt=se(Je);isNaN(Gt)?Bt():ht(Gt)}function Re(Je,ht,Bt,Gt,kt){var Ft,An,rt=!1,vt=new XMLHttpRequest,Wt=kt?nt.w.HEAD:nt.w.GET,Nt=ht.match(/\S+/g);if(ht=Nt.shift(),Ft=function(){rt||(rt=!0,Nt.length?Re(Je,Nt.join(" "),Bt,Gt,kt):Gt())},An=function(){var Jt,Yt;vt.status===200&&(Jt=kt?vt.getResponseHeader("Date"):vt.response,Yt=Je(Jt),isNaN(Yt)||(Bt(Yt),rt=!0))},Ee.isRelative(ht)){var en=De.resolve();en&&(ht=Ee.resolve(ht,en.url))}vt.open(Wt,ht),vt.timeout=5e3,vt.onload=An,vt.onloadend=Ft,vt.send()}function pe(Je,ht,Bt){Re(Me,Je,ht,Bt,!0)}function xe(){var Je=H.getLatestMPDRequestHeaderValueByID("Date"),ht=Je!==null?new Date(Je).getTime():Number.NaN;isNaN(ht)?We(!0):We(!1,ht-Date.now())}function We(Je,ht){if(isNaN(ie)||isNaN(ht)||Je||function(Gt){try{var kt,Ft=at(Gt),An=isNaN(ge)?30:ge,rt=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,vt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Wt=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ft?(kt=Math.min(An*rt,vt),P.debug("Increasing timeBetweenSyncAttempts to ".concat(kt))):(kt=Math.max(An/rt,Wt),P.debug("Decreasing timeBetweenSyncAttempts to ".concat(kt))),ge=kt}catch(Nt){}}(ht),!Je&&!isNaN(ht)){Se=Date.now(),B=!1;var Bt=isNaN(ie);ie=ht,Bt&&we(),P.debug("Completed UTC sync. Setting client - server offset to ".concat(ht))}Je&&(me=null,B=!1,He.error(new ce.Z(Ae.TIME_SYNC_FAILED_ERROR_CODE,Ae.TIME_SYNC_FAILED_ERROR_MESSAGE))),Ye.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ht}),Ye.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function dt(){if(ne&&ne.length!==0){var Je=ne.reduce(function(ht,Bt){return ht+Bt},0)/ne.length;at(Je)?P.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(P.debug("Completed background UTC sync. Setting client - server offset to ".concat(Je)),ie=Je,Ye.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,ye=Date.now()}}function at(Je){try{if(isNaN(ie))return!0;var ht=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Je>=ie-ht&&Je<=ie+ht}catch(Bt){return!0}}return L={initialize:function(){Le(),J={"urn:mpeg:dash:utc:http-head:2014":pe,"urn:mpeg:dash:utc:http-xsdate:2014":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2014":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":ke,"urn:mpeg:dash:utc:http-head:2012":pe,"urn:mpeg:dash:utc:http-xsdate:2012":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2012":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":ke,"urn:mpeg:dash:utc:http-ntp:2014":Ie,"urn:mpeg:dash:utc:ntp:2014":Ie,"urn:mpeg:dash:utc:sntp:2014":Ie}},attemptSync:function(Je,ht){fe=Je,B||(function(Bt){try{if(!Bt||!ee.get().streaming.utcSynchronization.enabled)return!1;var Gt=isNaN(ge)?30:ge;return!(Se&&Gt&&!isNaN(Gt))||(Date.now()-Se)/1e3>=Gt}catch(kt){return!0}}(ht)?(B=!0,j()):Ye.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Je){Je&&(Je.dashMetrics&&(H=Je.dashMetrics),Je.baseURLController&&(De=Je.baseURLController),Je.errHandler&&(He=Je.errHandler),Je.settings&&(ee=Je.settings))},reset:function(){Le(),Ye.off(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L)}},P=(0,N.Z)(Be).getInstance().getLogger(L),Ye.on(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L),L}Va.__dashjs_factory_name="TimeSyncController";var za=U.Z.getSingletonFactory(Va);za.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(Va.__dashjs_factory_name,za);var Ya=za;function Df(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(ne){var fe=window.URL.createObjectURL(P);return ne.setSource(fe),V==="managedMediaSource"&&(ne.setDisableRemotePlayback(!0),P.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),P.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),fe},createMediaSource:function(){var ne="WebKitMediaSource"in window,fe="MediaSource"in window;return"ManagedMediaSource"in window?(P=new ManagedMediaSource,V="managedMediaSource",ee.info("Created ManagedMediaSource")):fe?(P=new MediaSource,V="mediaSource",ee.info("Created MediaSource")):ne&&(P=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),P},detachMediaSource:function(ne){ne.setSource(null)},setConfig:function(ne){ne&&ne.settings&&(B=ne.settings)},setDuration:function ne(fe){P&&P.readyState==="open"&&(fe===null&&isNaN(fe)||P.duration!==fe&&(fe!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(fe=Math.pow(2,32)),function(Se){for(var ye=Se.sourceBuffers,ie=0;ie<ye.length;ie++)if(ye[ie].updating)return!0;return!1}(P)?setTimeout(ne.bind(null,fe),50):(ee.info("Set MediaSource duration:"+fe),P.duration=fe)))},setSeekable:function(ne,fe){P&&typeof P.setLiveSeekableRange=="function"&&typeof P.clearLiveSeekableRange=="function"&&P.readyState==="open"&&ne>=0&&ne<fe&&(P.clearLiveSeekableRange(),P.setLiveSeekableRange(ne,fe))},signalEndOfStream:function(ne){if(ne&&ne.readyState==="open"){for(var fe=ne.sourceBuffers,Se=0;Se<fe.length;Se++)if(fe[Se].updating||fe[Se].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),ne.endOfStream()}}},ee=(0,N.Z)(J).getInstance().getLogger(L),L}Df.__dashjs_factory_name="MediaSourceController";var Rh=U.Z.getSingletonFactory(Df);function bo(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie="urn:mpeg:dash:event:2012",me="discarded",ge="updated",He="added",De=this.context,Be=(0,m.Z)(De).getInstance();function Ye(){if(!H||!ne)throw new Error("setConfig function has to be called previously")}function Ee(){ye=!1,B={},V={},ee=null,Se=!1,J=Date.now()/1e3}function Le(){try{if(!Se){Se=!0;var Ie=ne.getTime(),ke=Ie-J;ke=J>0?Math.max(0,ke):0,we(V,ke,Ie),we(B,ke,Ie),je(V),je(B),J=Ie,Se=!1}}catch(Re){Se=!1,P.error(Re)}}function we(Ie,ke,Re){try{se(Ie,function(pe){if(pe!==void 0){var xe=isNaN(pe.duration)?0:pe.duration;pe.calculatedPresentationTime<=Re&&pe.calculatedPresentationTime+ke+xe>=Re?Me(pe,_.Z.EVENT_MODE_ON_START):(Q(Re,xe+ke,pe.calculatedPresentationTime)||function(We){try{var dt=We.eventStream.period.start+We.eventStream.period.duration;return We.calculatedPresentationTime>dt}catch(at){return P.error(at),!1}}(pe))&&(P.debug("Removing event ".concat(pe.id," from period ").concat(pe.eventStream.period.id," as it is expired or invalid")),function(We,dt){try{var at=dt.eventStream.schemeIdUri,Je=dt.eventStream.period.id,ht=dt.eventStream.value,Bt=dt.id;We[Je][at]=We[Je][at].filter(function(Gt){return ht&&Gt.eventStream.value&&Gt.eventStream.value!==ht||Gt.id!==Bt}),We[Je][at].length===0&&delete We[Je][at]}catch(Gt){P.error(Gt)}}(Ie,pe))}})}catch(pe){P.error(pe)}}function je(Ie){try{for(var ke in Ie)Ie.hasOwnProperty(ke)&&Object.keys(Ie[ke]).length===0&&delete Ie[ke]}catch(Re){P.error(Re)}}function j(Ie,ke){var Re=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pe=Ie.eventStream.schemeIdUri,xe=Ie.eventStream.value,We=Ie.id,dt=me;ke[pe]||(ke[pe]=[]);var at=ke[pe].findIndex(function(ht){return(!xe||ht.eventStream.value&&ht.eventStream.value===xe)&&ht.id===We});if(at===-1)ke[pe].push(Ie),Ie.triggeredReceivedEvent=!1,Ie.triggeredStartEvent=!1,dt=He;else if(Re){var Je=ke[pe][at];Ie.triggeredReceivedEvent=Je.triggeredReceivedEvent,Ie.triggeredStartEvent=Je.triggeredStartEvent,ke[pe][at]=Ie,dt=ge}return dt}function ue(Ie){try{if(Ie.eventStream.value==1){var ke,Re=Ie.calculatedPresentationTime;ke=Ie.calculatedPresentationTime==4294967295?NaN:Ie.calculatedPresentationTime+Ie.duration,Be.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:Ie.id,validUntil:Re,newDuration:ke,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(pe){P.error(pe)}}function ae(Ie){try{var ke=ne.getTime();se(Ie,function(Re){var pe=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.duration)?Re.eventStream.period.duration:NaN,xe=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.start)?Re.eventStream.period.start:NaN;if(!isNaN(pe)&&!isNaN(xe)){var We=Re.calculatedPresentationTime;Math.abs(We-ke)<300&&Me(Re,_.Z.EVENT_MODE_ON_START)}})}catch(Re){P.error(Re)}}function se(Ie,ke){try{if(Ie)for(var Re=Object.keys(Ie),pe=0;pe<Re.length;pe++)for(var xe=Ie[Re[pe]],We=Object.keys(xe),dt=0;dt<We.length;dt++)xe[We[dt]].forEach(function(at){at!==void 0&&ke(at)})}catch(at){P.error(at)}}function Q(Ie,ke,Re){try{return Ie-ke>Re}catch(pe){return P.error(pe),!1}}function Me(Ie,ke){try{var Re=ne.getTime(),pe=Ie.id;if(ke===_.Z.EVENT_MODE_ON_RECEIVE&&!Ie.triggeredReceivedEvent)return P.debug("Received event ".concat(pe)),Ie.triggeredReceivedEvent=!0,void Be.trigger(Ie.eventStream.schemeIdUri,{event:Ie},{mode:ke});Ie.triggeredStartEvent||(Ie.eventStream.schemeIdUri===ie&&Ie.eventStream.value==1?Ie.duration===0&&Ie.presentationTimeDelta===0||(P.debug("Starting manifest refresh event ".concat(pe," at ").concat(Re)),function(){try{Ye(),H.refreshManifest()}catch(xe){P.error(xe)}}()):Ie.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&Ie.eventStream.value==1?(P.debug("Starting callback event ".concat(pe," at ").concat(Re)),function(xe){try{(0,nn.Z)(De).create({}).load({method:"get",url:xe,request:{responseType:"arraybuffer"}})}catch(We){P.error(We)}}(Ie.messageData)):(P.debug("Starting event ".concat(pe," from period ").concat(Ie.eventStream.period.id," at ").concat(Re)),Be.trigger(Ie.eventStream.schemeIdUri,{event:Ie},{mode:ke})),Ie.triggeredStartEvent=!0)}catch(xe){P.error(xe)}}return L={addInlineEvents:function(Ie,ke){try{if(Ye(),B[ke]||(B[ke]={}),Ie)for(var Re=0;Re<Ie.length;Re++){var pe=Ie[Re];if(!Q(ne.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)){var xe=j(pe,B[ke],!0);xe===He?(P.debug("Added inline event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):xe===ge&&P.debug("Updated inline event with id ".concat(pe.id," from period ").concat(ke))}}}catch(We){throw We}},addInbandEvents:function(Ie,ke){try{Ye(),V[ke]||(V[ke]={});for(var Re=0;Re<Ie.length;Re++){var pe=Ie[Re];Q(ne.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)||(j(pe,V[ke],!1)===He?(pe.eventStream.schemeIdUri===ie&&ue(pe),P.debug("Added inband event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):P.debug("Inband event with scheme_id_uri ".concat(pe.eventStream.schemeIdUri,", value ").concat(pe.eventStream.value,", period id ").concat(ke," and event id ").concat(pe.id," was ignored because it has been added before.")))}Le()}catch(xe){throw xe}},getInbandEvents:function(){return V},getInlineEvents:function(){return B},start:function(){try{Ye(),P.debug("Start Event Controller");var Ie=fe.get().streaming.eventControllerRefreshDelay;ye||isNaN(Ie)||(ye=!0,ee=setInterval(Le,Ie))}catch(ke){throw ke}},setConfig:function(Ie){try{if(!Ie)return;Ie.manifestUpdater&&(H=Ie.manifestUpdater),Ie.playbackController&&(ne=Ie.playbackController),Ie.settings&&(fe=Ie.settings)}catch(ke){throw ke}},reset:function(){(function(){try{ee!==null&&ye&&(clearInterval(ee),ee=null,ye=!1,function(){try{ae(V),ae(B)}catch(Ie){P.error(Ie)}}())}catch(Ie){throw Ie}})(),Ee()}},P=(0,N.Z)(De).getInstance().getLogger(L),Ee(),L}bo.__dashjs_factory_name="EventController";var cm=U.Z.getSingletonFactory(bo),Oi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Pf(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function hu(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee,Le,we,je,j,ue,ae,se,Q,Me,Ie,ke,Re,pe,xe,We,dt,at,Je,ht,Bt,Gt,kt,Ft,An,rt,vt,Wt,Nt,en,Jt=this.context,Yt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&we&&we.hasOwnProperty("initialize")&&we.hasOwnProperty("reset")&&we.hasOwnProperty("getClientTimeOffset")&&H&&Le&&fe&&xe))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function xn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Pt=ne.getStreamsInfo();if(!j&&Pt.length===0)throw new Error("There are no periods in the MPD");j&&Pt.length>0&&fe.updateManifestUpdateInfo({currentTime:xe.getTime(),buffered:pe.getBufferRange(),presentationStartTime:Pt[0].start,clientTimeOffset:we.getClientTimeOffset()}),je.length>0&&function(Ir){Ir.length!==0?je=je.filter(function(fr){var ri=Ir.filter(function(Qr){return Qr.id===fr.getId()}).length>0||fr.getId()===j.getId();return ri||(P.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ri}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Pt);for(var yn=[],Hn=0,ur=Pt.length;Hn<ur;Hn++){var Tr=Pt[Hn];yn.push(It(Tr)),fe.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){j?Ir():$t(Pt,Ir,fr)})}).then(function(){Yt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){Le.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),ke=!0,es()}})()}function ir(){vt=!0}function It(Pt){var yn=Zc(Pt.id);return yn?yn.updateData(Pt):(yn=Es(Jt).create({manifestModel:H,mediaPlayerModel:dt,dashMetrics:fe,manifestUpdater:ee,adapter:ne,timelineConverter:we,capabilities:B,capabilitiesFilter:V,errHandler:Le,baseURLController:me,segmentBaseController:ge,textController:ae,abrController:De,playbackController:xe,eventController:Ye,mediaController:Be,protectionController:ue,videoModel:pe,streamInfo:Pt,settings:rt}),je.push(yn),yn.initialize(),Promise.resolve())}function $t(Pt,yn,Hn){try{On();var ur=fe.getCurrentDVRInfo().range;if(ur.end<ur.start){Wt&&clearTimeout(Wt);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return P.debug("Waiting for ".concat(Tr," ms before playback can start")),Yt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void(Wt=setTimeout(function(){$t(Pt,yn,Hn)},Tr))}rt.get().streaming.applyProducerReferenceTime&&We.calculateProducerReferenceTimeOffsets(Pt);var Ir=Pt[0].manifestInfo;if(rt.get().streaming.applyServiceDescription&&We.applyServiceDescription(Ir),ne.getIsDynamic()){var fr=el(Pt,Ir);xe.computeAndSetLiveDelay(fr,Ir)}(rt.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ri=H.getValue();ri&&me.update(ri),Zt(),yn()}).catch(function(ri){P.error(ri),Zt(),yn()})}catch(ri){Hn(ri)}}function Zt(){var Pt=function(){var ur;if(ne.getIsDynamic()){var Tr=fe.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-xe.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(Nt)&&Nt.toString().indexOf("posix:")===-1){var fr=oo(!0);isNaN(fr)||(P.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{P.info("Start time provided by the app: ".concat(Nt));var ri=Zi(!0,Nt);isNaN(ri)||(ur=Math.min(ur,ri))}var Qr=rt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Qr)}}else if(ur=Hs()[0].getStreamInfo().start,isNaN(Nt)){var Ks=oo(!1);isNaN(Ks)||(P.info("Start time from URI parameters: ".concat(Ks)),ur=Math.max(ur,Ks))}else{P.info("Start time provided by the app: ".concat(Nt));var Vs=Zi(!1,Nt);isNaN(Vs)||(ur=Math.max(ur,Vs))}return ur}(),yn=Lt(Pt),Hn=yn!==null?yn:je[0];Yt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Pt}),un(Hn,null,Pt),Gt||(Gt=setInterval(function(){!Me&&xe.getTimeToStreamEnd()<=0&&!xe.isSeeking()&&Yt.trigger(T.Z.PLAYBACK_ENDED,{isLast:fa().isLast})},200))}function un(Pt,yn,Hn){try{if(Me||!Pt||yn===Pt&&Pt.getIsActive())return;Me=!0,Yt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Pt.getStreamInfo()});var ur=!1;j=Pt,yn&&(ur=Sn(Pt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Pt.getStreamInfo().start:NaN:Hn,P.info("Switch to stream ".concat(Pt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(xe.getTime(),". Seamless period switch is set to ").concat(ur)),Ft=Ft.filter(function(Tr){return Tr.getId()!==j.getId()}),xe.initialize(fa(),!!yn),pe.getElement()?vn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Me=!1}}function vn(Pt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(Re&&Re.readyState==="open"){P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),Re.removeEventListener("sourceopen",Tr),Re.removeEventListener("webkitsourceopen",Tr),zr();var fr=fe.getCurrentDVRInfo();Se.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Pt)||xe.seek(Pt,!0,!0),j.setMediaSource(Re).then(function(){j.initializeForTextWithMediaSource(Re)})):Pn(Pt,yn)}}function Ir(){Re.addEventListener("sourceopen",Tr,!1),Re.addEventListener("webkitsourceopen",Tr,!1),Hn=Se.attachMediaSource(pe),P.debug("MediaSource attached to element.  Waiting on open...")}Re?yn?Pn(Pt,yn):(Se.detachMediaSource(pe),Ir()):(Re=Se.createMediaSource(),Ir())}function Pn(Pt,yn){j.activate(Re,yn?kt:void 0,Pt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),kt=Hn}isNaN(Pt)||(Yt.trigger(T.Z.SEEK_TARGET,{time:Pt},{streamId:j.getId()}),xe.seek(Pt,!1,!0),j.startScheduleControllers()),Me=!1,Yt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:fa()})})}function Nn(Pt){var yn=Lt(Pt.seekTime);yn&&yn!==j?yn&&yn!==j&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=j.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,j,Tr)}).catch(function(fr){Le.error(fr)})}(Pt,yn)):(Fn(),function(Hn){j.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Oo(et.USER_REQUEST_STOP_REASON)}(Pt)),Tu(it.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ft&&Ft.length>0&&(Ft.forEach(function(Pt){Pt.deactivate(!0)}),Ft=[])}function bt(Pt){if(Pt.newMediaInfo.streamInfo.id===j.getId()){if(Gn(),rt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Pt.oldMediaInfo&&Pt.oldMediaInfo.codec!==Pt.newMediaInfo.codec){var yn=xe.getTime();return j.deactivate(!1),void vn(yn,!1,!1)}j.prepareTrackChange(Pt)}}function Sn(Pt,yn){try{return rt.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Pt)||vt)&&(An&&rt.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Pt,yn))}catch(Hn){return!1}}function En(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Re&&!Pt.getPreloaded()){var Hn=Sn(Pt,yn);Hn&&Pt.startPreloading(Re,kt).then(function(){Ft.push(Pt)})}}function Lt(Pt){if(isNaN(Pt))return null;for(var yn=je.length,Hn=0;Hn<yn;Hn++){var ur=je[Hn];if(Pt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Pt=ne.getIsDynamic(),yn=ne.getStreamsInfo()[0].manifestInfo,Hn=xe.getTime(),ur=we.calcTimeShiftBufferWindow(je,Pt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){fe.addDVRInfo(Ir.getType(),Hn,yn,ur)}):fe.addDVRInfo(y.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function st(Pt){if(ht&&Q){var yn=dt.getInitialBufferLevel(),Hn=[y.Z.TEXT];(isNaN(yn)||yn<=xe.getBufferLevel(Hn)||ne.getIsDynamic()&&yn>xe.getLiveDelay())&&(ht=!1,Tu(it.INITIAL_PLAYOUT_START_REASON),xe.play())}Pt&&Pt.mediaType&&fe.addBufferLevel(Pt.mediaType,new Date,1e3*Pt.bufferLevel)}function tt(Pt){Pt.streamInfo.id===j.getId()&&Pt.reason&&Pt.reason.forceReplace&&Gn(),Zc(Pt.streamInfo.id).prepareQualityChange(Pt)}function qt(){if(ne.getIsDynamic()&&xe.getOriginalLiveDelay()!==0&&j){var Pt=ne.getStreamsInfo();if(Pt.length>0){var yn=Pt[0].manifestInfo,Hn=el(Pt,yn);xe.computeAndSetLiveDelay(Hn,yn)}}}function ze(){if(Ja()){var Pt=pe.getPlaybackQuality();Pt&&fe.addDroppedFrames(Pt)}}function Ve(){P.debug("[onPlaybackStarted]"),!ht&&Je&&Tu(it.RESUME_FROM_PAUSE_START_REASON),ht&&(ht=!1),Bt&&(Bt=!1,rt.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),Je=!1}function Dt(Pt){P.debug("[onPlaybackPaused]"),Pt.ended||(Je=!0,Oo(et.USER_REQUEST_STOP_REASON))}function dn(Pt){P.debug("Stream with id ".concat(Pt.streamInfo.id," finished buffering"));var yn=Pt.streamInfo.isLast;Re&&yn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Se.signalEndOfStream(Re)):Tn()}function Tn(){if(j&&j.getHasFinishedBuffering())for(var Pt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||j||null;if(Ir){var fr=Ir.getStreamInfo();return je.filter(function(ri){var Qr=ri.getStreamInfo();return Qr.start>fr.start&&fr.id!==Qr.id})}}catch(ri){return[]}}(j),yn=0;yn<Pt.length;){var Hn=Pt[yn],ur=yn===0?j:Pt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&Re&&En(Hn,ur),yn+=1}}function sr(){Gt&&(clearInterval(Gt),Gt=null)}function Zr(){return j?j.getProcessors():[]}function Ai(Pt){if(j&&!j.getIsEndedEventSignaled()){j.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||j||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ri=-1,Qr=NaN;fr<je.length;){var Ks=je[fr].getStreamInfo(),Vs=Ks.start-Ir;Vs>0&&(isNaN(Qr)||Vs<Qr)&&Tr.id!==Ks.id&&(Qr=Vs,ri=fr),fr+=1}return ri>=0?je[ri]:null}();yn?(P.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(j.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,j,NaN)):(P.debug("StreamController no next stream found"),j.setIsEndedEventSignaled(!1)),Oo(yn?et.END_OF_PERIOD_STOP_REASON:et.END_OF_CONTENT_STOP_REASON)}Pt&&Pt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Pt){var yn=Pt||fa().manifestInfo.duration;Se.setDuration(yn)}function oo(Pt){var yn=He.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Hs()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],Gs(Pt,yn.t,Hn)}function Zi(Pt,yn){var Hn=0;return Pt||(Hn=Hs()[0].getStreamInfo().start),Gs(Pt,yn,Hn)}function Gs(Pt,yn,Hn){var ur=ne.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Pt&&!isNaN(Ir)?we.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function el(Pt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Pt&&Pt.length===1){var ur=Pt[0],Tr=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT].reduce(function(fr,ri){var Qr=ne.getMediaInfoForType(ur,ri);return Qr&&Qr.isFragmented!==!1&&fr.push(Qr),fr},[]).reduce(function(fr,ri){var Qr=ne.getVoRepresentations(ri);return Qr&&Qr.length>0&&Qr.forEach(function(Ks){Ks&&fr.push(Ks)}),fr},[]).reduce(function(fr,ri){var Qr=ne.convertRepresentationToRepresentationInfo(ri);return Qr&&Qr.fragmentDuration&&!isNaN(Qr.fragmentDuration)&&fr.push(Qr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return Pf(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ri){if(fr){if(typeof fr=="string")return Pf(fr,ri);var Qr=Object.prototype.toString.call(fr).slice(8,-1);return Qr==="Object"&&fr.constructor&&(Qr=fr.constructor.name),Qr==="Map"||Qr==="Set"?Array.from(fr):Qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qr)?Pf(fr,ri):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function tl(Pt){if(Pt.error)ke=!0,es();else{P.info("Manifest updated... updating data system wide.");var yn=Pt.manifest;ne.updatePeriods(yn);var Hn=ne.getUTCTimingSources();!ne.getIsDynamic()||Hn&&Hn.length!==0||Yt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=ne.getIsDynamic()?Hn.concat(at.getUTCTimingSources()):Hn;V.filterUnsupportedFeatures(yn).then(function(){me.initialize(yn),ye.attemptSync(ur,ne.getIsDynamic())})}}function Ja(){return!!j&&j.getHasVideoTrack()}function qs(){return!!j&&j.getHasAudioTrack()}function Oo(Pt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Pt)}),fe.addPlayList()}function Tu(Pt){fe.createPlaylistMetrics(1e3*xe.getTime(),Pt)}function Su(Pt){if(Pt.error){var yn="";switch(Pt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&rt.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){P.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=xe.getTime();j.deactivate(!1),P.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),vn(Hn,!1,!1)}():(Ie=!0,Pt.error.message&&(yn+=" ("+Pt.error.message+")"),Pt.error.msExtendedCode&&(yn+=" (0x"+(Pt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+yn),Pt.error&&P.fatal(Pt.error),Le.error(new ce.Z(Pt.error.code,yn)),es())}}function fa(){return j?j.getStreamInfo():null}function Zc(Pt){for(var yn=0,Hn=je.length;yn<Hn;yn++)if(je[yn].getId()===Pt)return je[yn];return null}function ed(Pt){isNaN(Pt.newDuration)||zr(Pt.newDuration)}function nl(){je=[],Nt=NaN,ue=null,Me=!1,j=null,Ie=!1,ke=!1,ht=!0,Bt=!0,Je=!1,Q=!0,Gt=null,vt=!1,An=!1,Ft=[],Wt=null,en={counts:{mediaErrorDecode:0}}}function es(){Dn(),ye.reset(),Oo(Ie||ke?et.FAILURE_STOP_REASON:et.USER_REQUEST_STOP_REASON);for(var Pt=0,yn=je?je.length:0;Pt<yn;Pt++)je[Pt].reset(Ie);Yt.off(_.Z.PLAYBACK_TIME_UPDATED,ze,L),Yt.off(_.Z.PLAYBACK_SEEKING,Nn,L),Yt.off(_.Z.PLAYBACK_ERROR,Su,L),Yt.off(_.Z.PLAYBACK_STARTED,Ve,L),Yt.off(_.Z.PLAYBACK_PAUSED,Dt,L),Yt.off(_.Z.PLAYBACK_ENDED,Ai,L),Yt.off(_.Z.METRIC_ADDED,Gc,L),Yt.off(_.Z.MANIFEST_VALIDITY_CHANGED,ed,L),Yt.off(_.Z.BUFFER_LEVEL_UPDATED,st,L),Yt.off(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.off(T.Z.MANIFEST_UPDATED,tl,L),Yt.off(T.Z.STREAM_BUFFERING_COMPLETED,dn,L),Yt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.off(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L),me.reset(),ee.reset(),Ye.reset(),fe.clearAllCurrentMetrics(),H.setValue(null),J.reset(),we.reset(),Ee.reset(),Re&&(Se.detachMediaSource(pe),Re=null),pe=null,ue&&(ue=null,se=null,H.getValue()&&Yt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Yt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),nl()}function Gc(Pt){if(Pt.metric===D.Z.DVR_INFO){var yn=qs()?y.Z.AUDIO:y.Z.VIDEO;Pt.mediaType===yn&&Se.setSeekable(Pt.value.range.start,Pt.value.range.end)}}function Hs(){return je}return L={initialize:function(Pt,yn){Dn(),Q=Pt,se=yn,we.initialize(),(ee=Vr(Jt).create()).setConfig({manifestModel:H,adapter:ne,manifestLoader:J,errHandler:Le,settings:rt,contentSteeringController:ie}),ee.initialize(),(Ye=cm(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:xe,settings:rt}),Ye.start(),ye.setConfig({dashMetrics:fe,baseURLController:me,errHandler:Le,settings:rt}),ye.initialize(),Se.setConfig({settings:rt}),ue&&(Yt.trigger(T.Z.PROTECTION_CREATED,{controller:ue}),ue.setMediaElement(pe.getElement()),se&&ue.setProtectionData(se)),Yt.on(_.Z.PLAYBACK_TIME_UPDATED,ze,L),Yt.on(_.Z.PLAYBACK_SEEKING,Nn,L),Yt.on(_.Z.PLAYBACK_ERROR,Su,L),Yt.on(_.Z.PLAYBACK_STARTED,Ve,L),Yt.on(_.Z.PLAYBACK_PAUSED,Dt,L),Yt.on(_.Z.PLAYBACK_ENDED,Ai,L),Yt.on(_.Z.METRIC_ADDED,Gc,L),Yt.on(_.Z.MANIFEST_VALIDITY_CHANGED,ed,L),Yt.on(_.Z.BUFFER_LEVEL_UPDATED,st,L),Yt.on(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.on(T.Z.MANIFEST_UPDATED,tl,L),Yt.on(T.Z.STREAM_BUFFERING_COMPLETED,dn,L),Yt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.on(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L)},getActiveStreamInfo:fa,addDVRMetric:On,hasVideoTrack:Ja,hasAudioTrack:qs,getStreamById:Zc,getStreamForTime:Lt,getTimeRelativeToStreamId:function(Pt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<je.length;fr++){if(Tr=(Hn=je[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Pt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),Nt=yn,J.load(Pt)},loadWithManifest:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;xn(),Nt=yn,ee.setManifest(Pt)},getActiveStreamProcessors:Zr,setConfig:function(Pt){Pt&&(Pt.capabilities&&(B=Pt.capabilities),Pt.capabilitiesFilter&&(V=Pt.capabilitiesFilter),Pt.manifestLoader&&(J=Pt.manifestLoader),Pt.manifestModel&&(H=Pt.manifestModel),Pt.mediaPlayerModel&&(dt=Pt.mediaPlayerModel),Pt.customParametersModel&&(at=Pt.customParametersModel),Pt.protectionController&&(ue=Pt.protectionController),Pt.adapter&&(ne=Pt.adapter),Pt.dashMetrics&&(fe=Pt.dashMetrics),Pt.errHandler&&(Le=Pt.errHandler),Pt.timelineConverter&&(we=Pt.timelineConverter),Pt.videoModel&&(pe=Pt.videoModel),Pt.playbackController&&(xe=Pt.playbackController),Pt.serviceDescriptionController&&(We=Pt.serviceDescriptionController),Pt.contentSteeringController&&(ie=Pt.contentSteeringController),Pt.textController&&(ae=Pt.textController),Pt.abrController&&(De=Pt.abrController),Pt.mediaController&&(Be=Pt.mediaController),Pt.settings&&(rt=Pt.settings),Pt.baseURLController&&(me=Pt.baseURLController),Pt.uriFragmentModel&&(He=Pt.uriFragmentModel),Pt.segmentBaseController&&(ge=Pt.segmentBaseController),Pt.manifestUpdater&&(ee=Pt.manifestUpdater))},setProtectionData:function(Pt){se=Pt,ue&&ue.setProtectionData(se)},getIsStreamSwitchInProgress:function(){return Me},switchToVideoElement:function(Pt){j&&(xe.initialize(fa()),vn(Pt,!1,!0))},getHasMediaOrInitialisationError:function(){return Ie||ke},getStreams:Hs,getActiveStream:function(){return j},getInitialPlayback:function(){return ht},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:es},P=(0,N.Z)(Jt).getInstance().getLogger(L),ye=Ya(Jt).getInstance(),Se=Rh(Jt).getInstance(),Ee=Qe(Jt).getInstance(),nl(),L}hu.__dashjs_factory_name="StreamController";var Ho=U.Z.getSingletonFactory(hu);function pu(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me=this.context,ge=(0,m.Z)(me).getInstance();function He(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){ge.off(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.off(T.Z.INITIAL_STREAM_SWITCH,Ee,this),ge.off(T.Z.PLAYBACK_SEEKING,De,this),ge.off(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.off(T.Z.TRACK_CHANGE_RENDERED,Ye,L)}(),ee=null,J=NaN,V=0,Se=null,ye={}}function De(){Se&&(clearTimeout(Se),Se=null)}function Be(se){try{if(se.streamId!==ne.getActiveStreamInfo().id||se.mediaType!==y.Z.VIDEO&&se.mediaType!==y.Z.AUDIO)return;se.streamId===ne.getActiveStreamInfo().id&&(ye[se.mediaType]=!0)}catch(Q){ie.error(Q)}}function Ye(se){se&&se.mediaType&&(ye[se.mediaType]=!1)}function Ee(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){we()&&ae(H.getTime())},100))}catch(se){}}()}function Le(){if(we(B.get().streaming.gaps.enableSeekFix)&&++V>=10){var se=H.getTime();P===se?ae(se,!0):(P=se,J=NaN),V=0}}function we(){var se=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!ne.getActiveStream())return!1;var Q=Object.keys(ye).some(function(Ie){return ye[Ie]}),Me=!!se&&je();return!Q&&B.get().streaming.gaps.jumpGaps&&ne.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Me)&&!H.isPaused()&&!ne.getIsStreamSwitchInProgress()&&!ne.getHasMediaOrInitialisationError()}function je(){var se=ne.getActiveStream(),Q=parseFloat((se.getStartTime()+se.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function j(se,Q){try{if(!se||se.length<=1&&Q>0)return NaN;for(var Me=NaN,Ie=0;isNaN(Me)&&Ie<se.length;){var ke=Ie>0?se.end(Ie-1):0;Q<se.start(Ie)&&ke-Q<B.get().streaming.gaps.threshold&&(Me=Ie),Ie+=1}return Me}catch(Re){return null}}function ue(se,Q){for(var Me=0,Ie=se.length;Me<Ie;Me++)if(Q>=se.start(Me)&&Q<=se.end(Me))return!0;return!1}function ae(se){var Q,Me=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ie=B.get().streaming.gaps.enableStallFix,ke=B.get().streaming.gaps.stallSeek,Re=B.get().streaming.gaps.smallGapLimit,pe=B.get().streaming.gaps.jumpLargeGaps,xe=fe.getBufferRange(),We=NaN,dt=!1;if(Q=j(xe,se),!isNaN(Q)){var at=xe.start(Q),Je=at-se;Je>0&&(Je<=Re||pe)&&(We=at)}var ht=H.getTimeToStreamEnd();if(isNaN(We)&&Me&&isFinite(ht)&&!isNaN(ht)&&ht<Re&&(We=parseFloat(H.getStreamEndTime().toFixed(5)),dt=!0),Ie&&isNaN(We)&&Me&&isNaN(Q)&&ue(xe,se)&&(ke===0?(ie.warn("Toggle play pause to break stall"),fe.pause(),fe.play()):(ie.warn("Jumping ".concat(ke,"s to break stall")),We=se+ke)),We>0&&J!==We&&We>se&&!Se){var Bt=We-se;if(dt){var Gt=ne.getStreamForTime(We),kt=Gt&&!!Gt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(se," to ").concat(We,". Gap duration: ").concat(Bt)),H.seek(We,!0,kt)}else{var Ft=H.getIsDynamic(),An=Q>0?xe.end(Q-1):se,rt=Ft?1e3*Math.max(0,Bt-.1):0;Se=window.setTimeout(function(){H.seek(We,!0,!0),ie.warn("Jumping gap occuring in period ".concat(ne.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(We,". Jumping by: ").concat(We-An)),Se=null},rt)}J=We}}return L={reset:He,setConfig:function(se){se&&(se.settings&&(B=se.settings),se.playbackController&&(H=se.playbackController),se.streamController&&(ne=se.streamController),se.videoModel&&(fe=se.videoModel))},initialize:function(){(function(){ge.on(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.on(T.Z.INITIAL_STREAM_SWITCH,Ee,this),ge.on(T.Z.PLAYBACK_SEEKING,De,this),ge.on(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.on(T.Z.TRACK_CHANGE_RENDERED,Ye,L)})()}},ie=(0,N.Z)(me).getInstance().getLogger(L),He(),L}pu.__dashjs_factory_name="GapController";var ks=U.Z.getSingletonFactory(pu);function li(){var L,P,B,V,ee,J,H,ne,fe,Se,ye=this.context,ie=(0,m.Z)(ye).getInstance();function me(){P=!1;var je=rn.Z.parseUserAgent();B=je&&je.browser&&je.browser.name&&je.browser.name.toLowerCase()==="safari"}function ge(){P=!1}function He(je){if(je.streamId===J.getActiveStreamInfo().id&&fe){var j=H.getLiveDelay();H.getBufferLevel()>j/2&&(fe=!1)}}function De(je){je.streamId===J.getActiveStreamInfo().id&&(fe=je.state===D.Z.BUFFER_EMPTY)}function Be(){ne.getCatchupModeEnabled()||V.setPlaybackRate(1)}function Ye(){H.getIsDynamic()&&ne.getCatchupModeEnabled()&&(ne.getCatchupPlaybackRates().max>0||ne.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||P)&&(Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(je,j){try{return Math.abs(Ee())>0||je<j}catch(ue){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Ee())>0}catch(je){return!1}}())}catch(je){return!1}}()&&function(){if(!P&&V){var je,j=V.getPlaybackRate(),ue=ne.getCatchupPlaybackRates(),ae=H.getBufferLevel(),se=Ee(),Q=ne.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&se>Q)Se.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,H.seekToCurrentLive(!0,!1);else{var Me=H.getCurrentLiveLatency(),Ie=H.getLiveDelay();je=Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Re,pe,xe,We,dt){var at;if(dt<We){var Je=Math.abs(Re.min),ht=5*(dt-We);at=1-Je+2*Je/(1+Math.pow(Math.E,-ht)),Se.debug("[LoL+ playback control_buffer-based] bufferLevel: "+dt+", newRate: "+at)}else{if(Math.abs(pe-xe)<=.02*xe)at=1;else{var Bt=pe-xe,Gt=Bt<0?Math.abs(Re.min):Re.max,kt=5*Bt;at=1-Gt+2*Gt/(1+Math.pow(Math.E,-kt))}Se.debug("[LoL+ playback control_latency-based] latency: "+pe+", newRate: "+at)}return at}(ue,Me,Ie,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(Re,pe,xe,We){if(fe)return 1;var dt=pe-xe,at=dt<0?Math.abs(Re.min):Re.max,Je=5*dt,ht=1-at+2*at/(1+Math.pow(Math.E,-Je));return H.getPlaybackStalled()&&We<=xe/2&&dt>0&&(ht=1),ht}(ue,Me,Ie,ae);var ke=B?.25:.02/(.5/ue.max);je&&Math.abs(j-je)>=ke&&(Se.debug("[CatchupController]: Setting playback rate to ".concat(je)),V.setPlaybackRate(je))}}}()}function Ee(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function Le(){var je=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==y.Z.LIVE_CATCHUP_MODE_LOLP||je===null||isNaN(je)?y.Z.LIVE_CATCHUP_MODE_DEFAULT:y.Z.LIVE_CATCHUP_MODE_LOLP}function we(){ne.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,He,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.off(_.Z.PLAYBACK_PROGRESS,Ye,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,Ye,L),ie.off(_.Z.PLAYBACK_SEEKED,ge,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.off(_.Z.STREAM_INITIALIZED,we,L),me(),V.setPlaybackRate(1,!0)},setConfig:function(je){je&&(je.settings&&(ee=je.settings),je.videoModel&&(V=je.videoModel),je.streamController&&(J=je.streamController),je.playbackController&&(H=je.playbackController),je.mediaPlayerModel&&(ne=je.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,He,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.on(_.Z.PLAYBACK_PROGRESS,Ye,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,Ye,L),ie.on(_.Z.PLAYBACK_SEEKED,ge,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.on(_.Z.STREAM_INITIALIZED,we,L),we()}},Se=(0,N.Z)(ye).getInstance().getLogger(L),me(),L}li.__dashjs_factory_name="CatchupController";var ho=U.Z.getSingletonFactory(li),Uu=[y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],xh="video",Bu="audio";function Ro(){var L,P,B,V,ee,J=this.context;function H(){P={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function ne(fe,Se,ye){try{P[fe][Se]=ye/1e3}catch(ie){V.error(ie)}}return L={getServiceDescriptionSettings:function(){return P},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(fe){try{var Se=[];if(fe&&fe.length>0){var ye=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;fe.forEach(function(me){var ge=ye.reduce(function(He,De){return He.concat(ee.getAllMediaInfoForType(me,De))},[]).reduce(function(He,De){return ee.getProducerReferenceTimes(me,De).forEach(function(Be){var Ye=ee.getVoRepresentations(De);if(Ye&&Ye.length>0&&Ye[0].adaptation&&Ye[0].segmentInfoType===v.Z.SEGMENT_TEMPLATE){var Ee=Ye[0],Le=new Date(Be[v.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Be[v.Z.PRESENTATION_TIME]/Ee[v.Z.TIMESCALE]-Ee[v.Z.PRESENTATION_TIME_OFFSET]+me.start),we=ie-Le;He.push({id:Be[v.Z.ID],to:we})}}),He},[]);Se=Se.concat(ge)})}B=Se}catch(me){V.error(me),B=[]}},applyServiceDescription:function(fe){if(fe&&fe.serviceDescriptions){var Se=fe.serviceDescriptions.filter(function(me){return Uu.includes(me.schemeIdUri)}),ye=fe.serviceDescriptions.filter(function(me){return me.schemeIdUri==null}),ie=Se.length>0?Se[Se.length-1]:ye[ye.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(me){var ge;if(me.schemeIdUri,y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ge=function(Ye){return{liveDelay:Ye.latency.target/1e3,maxDrift:!isNaN(Ye.latency.max)&&Ye.latency.max>Ye.latency.target?(Ye.latency.max-Ye.latency.target+500)/1e3:NaN,referenceId:Ye.latency.referenceId||NaN}}(me),B.length>0){var He=function(Ye){var Ee,Le=0,we=B.filter(function(je){return je.id===Ye.referenceId});return we.length===0?(Le=B.length>0?B[0].to:0,Ee=B[0].id||NaN):(Le=we[0].to||0,Ee=we[0].id||NaN),{to:Le,id:Ee}}(ge),De=He.to,Be=He.id;P.liveDelay=ge.liveDelay-De,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(De," from ProducerReferenceTime element with id ").concat(Be,".\n                Live Delay: ").concat(ge.liveDelay-De,", Live catchup max drift: ").concat(ge.maxDrift,"\n            "))}else P.liveDelay=ge.liveDelay,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ge.liveDelay,", Live catchup max drift: ").concat(ge.maxDrift))}(ie),ie.playbackRate&&function(me){var ge=me.playbackRate.min?Math.round(1e3*(me.playbackRate.min-1))/1e3:NaN,He=me.playbackRate.max?Math.round(1e3*(me.playbackRate.max-1))/1e3:NaN;P.liveCatchup.playbackRate.min=ge,P.liveCatchup.playbackRate.max=He,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ge)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(He))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(me){if(me&&me.operatingBandwidth&&me.operatingBandwidth.mediaType&&me.operatingBandwidth.mediaType!=="all"){var ge={};ge.minBandwidth=me.operatingBandwidth.min,ge.maxBandwidth=me.operatingBandwidth.max,ge.targetBandwidth=me.operatingBandwidth.target;var He=[];me.operatingBandwidth.mediaType===xh||me.operatingBandwidth.mediaType===Bu?He.push(me.operatingBandwidth.mediaType):me.operatingBandwidth.mediaType==="any"&&(He.push(Bu),He.push(xh)),He.forEach(function(De){isNaN(ge.minBandwidth)||ne("minBitrate",De,ge.minBandwidth),isNaN(ge.maxBandwidth)||ne("maxBitrate",De,ge.maxBandwidth),isNaN(ge.targetBandwidth)||ne("initialBitrate",De,ge.targetBandwidth)})}}(ie),ie.contentSteering&&function(me){P.contentSteering=me.contentSteering}(ie))}},reset:function(){H()},setConfig:function(fe){fe&&fe.adapter&&(ee=fe.adapter)}},V=(0,N.Z)(J).getInstance().getLogger(L),H(),L}Ro.__dashjs_factory_name="ServiceDescriptionController";var Nh=U.Z.getSingletonFactory(Ro),vr=w(3973),yi=w.n(vr),Mh=w(3039);function wc(){var L,P,B,V,ee,J,H,ne,fe=this.context,Se=(0,m.Z)(fe).getInstance();function ye(pe,xe){return pe&&B[xe]&&B[xe][pe]?B[xe][pe].list:[]}function ie(pe,xe){return pe&&B[xe]&&B[xe][pe]?B[xe][pe].current:null}function me(pe){var xe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(pe&&pe.streamInfo){var We=pe.type,dt=pe.streamInfo,at=dt.id,Je=ie(We,at);if(B[at]&&B[at][We]&&(B[at][We].current=pe,B[at][We].current&&(We!==y.Z.TEXT&&!De(pe,Je)||We===y.Z.TEXT&&pe.isFragmented)&&Se.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Je,newMediaInfo:pe,switchMode:V.get().streaming.trackSwitchMode[We]},{streamId:at}),!xe)){var ht=Ye(pe);if(!ht||!B[at][We].storeLastSettings)return;ht.roles&&(ht.role=ht.roles[0],delete ht.roles),ht.accessibility&&(ht.accessibility=ht.accessibility[0]),ht.audioChannelConfiguration&&(ht.audioChannelConfiguration=ht.audioChannelConfiguration[0]),J[We]=ht,ne.setSavedMediaSettings(We,ht)}}}function ge(pe,xe){pe&&xe&&(ee[pe]=xe)}function He(pe){return pe?ee[pe]:null}function De(pe,xe){if(!pe&&!xe)return!0;if(!pe||!xe)return!1;var We=pe.id===xe.id,dt=pe.viewpoint===xe.viewpoint,at=JSON.stringify(pe.viewpointsWithSchemeIdUri)===JSON.stringify(xe.viewpointsWithSchemeIdUri),Je=pe.lang===xe.lang,ht=pe.codec===xe.codec,Bt=pe.roles.toString()===xe.roles.toString(),Gt=JSON.stringify(pe.rolesWithSchemeIdUri)===JSON.stringify(xe.rolesWithSchemeIdUri),kt=pe.accessibility.toString()===xe.accessibility.toString(),Ft=JSON.stringify(pe.accessibilitiesWithSchemeIdUri)===JSON.stringify(xe.accessibilitiesWithSchemeIdUri),An=pe.audioChannelConfiguration.toString()===xe.audioChannelConfiguration.toString(),rt=JSON.stringify(pe.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(xe.audioChannelConfigurationsWithSchemeIdUri);return We&&ht&&dt&&at&&Je&&Bt&&Gt&&kt&&Ft&&An&&rt}function Be(){B={},J={},ee={audio:null,video:null,text:null}}function Ye(pe){var xe={lang:pe.lang,viewpoint:pe.viewpoint,roles:pe.roles,accessibility:pe.accessibility,audioChannelConfiguration:pe.audioChannelConfiguration,codec:pe.codec};return xe.lang||xe.viewpoint||xe.role&&xe.role.length>0||xe.accessibility&&xe.accessibility.length>0||xe.audioChannelConfiguration&&xe.audioChannelConfiguration.length>0?xe:null}function Ee(pe,xe,We){var dt=[];return pe.forEach(function(at){xe(We,at)&&dt.push(at)}),dt.length!==0?dt:pe}function Le(pe,xe){try{return!pe.lang||pe.lang instanceof RegExp?xe.lang.match(pe.lang):xe.lang!==""&&(0,Mh.extendedFilter)(xe.lang,yi()(pe.lang)).length>0}catch(We){return!1}}function we(pe,xe){return pe.index===void 0||pe.index===null||xe.index===pe.index}function je(pe,xe){return!pe.viewpoint||pe.viewpoint===xe.viewpoint}function j(pe,xe){var We=arguments.length>2&&arguments[2]!==void 0&&arguments[2],dt=!pe.role||!!xe.roles.filter(function(at){return at===pe.role})[0];return dt||xe.type===y.Z.AUDIO&&We}function ue(pe,xe){return pe.accessibility?!!xe.accessibility.filter(function(We){return We===pe.accessibility})[0]:!xe.accessibility.length}function ae(pe,xe){return!pe.audioChannelConfiguration||!!xe.audioChannelConfiguration.filter(function(We){return We===pe.audioChannelConfiguration})[0]}function se(pe,xe){return!pe.codec||pe.codec===xe.codec}function Q(pe){var xe,We=0,dt=[];return pe.forEach(function(at){(xe=Math.max.apply(Math,at.bitrateList.map(function(Je){return Je.bandwidth})))>We?(We=xe,dt=[at]):xe===We&&dt.push(at)}),dt}function Me(pe){var xe,We=1/0,dt=[];return pe.forEach(function(at){var Je=at.bitrateList.reduce(function(ht,Bt){var Gt=Math.max(1,Bt.width*Bt.height);return ht+Bt.bandwidth/Gt},0);(xe=Je/at.bitrateList.length)<We?(We=xe,dt=[at]):xe===We&&dt.push(at)}),dt}function Ie(pe){var xe,We=0,dt=[];return pe.forEach(function(at){(xe=at.representationCount)>We?(We=xe,dt=[at]):xe===We&&dt.push(at)}),dt}function ke(pe,xe){if(pe===y.Z.TEXT)return xe[0];var We,dt=V.get().streaming.selectionModeForInitialTrack,at=H.getCustomInitialTrackSelectionFunction();if(at&&typeof at=="function")We=at(xe);else switch(dt){case y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:We=function(Je){var ht,Bt,Gt=(ht=0,Bt=[],Je.forEach(function(kt){isNaN(kt.selectionPriority)||(kt.selectionPriority>ht?(ht=kt.selectionPriority,Bt=[kt]):kt.selectionPriority===ht&&Bt.push(kt))}),Bt);return Gt.length>1&&(Gt=Q(Gt)),Gt.length>1&&(Gt=Ie(Gt)),Gt}(xe);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:We=function(Je){var ht=Q(Je);return ht.length>1&&(ht=Ie(ht)),ht}(xe);break;case y.Z.TRACK_SELECTION_MODE_FIRST_TRACK:We=Re(xe);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:We=function(Je){var ht=Me(Je);return ht.length>1&&(ht=Q(ht)),ht}(xe);break;case y.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:We=function(Je){var ht=Ie(Je);return ht.length>1&&(ht=Q(Je)),ht}(xe);break;default:P.warn("Track selection mode ".concat(dt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),We=Re(xe)}return We.length>0?We[0]:xe[0]}function Re(pe){return pe[0]}return L={setInitialMediaSettingsForType:function(pe,xe){var We=J[pe]||He(pe),dt=ye(pe,xe.id),at=[];We||((We=ne.getSavedMediaSettings(pe))&&delete We.codec,ge(pe,We)),dt&&dt.length!==0&&(We&&(at=Ee(at=Array.from(dt),Le,We),at=Ee(at,we,We),at=Ee(at,je,We),pe===y.Z.AUDIO&&J[pe]||(at=Ee(at,j,We)),at=Ee(at,ue,We),at=Ee(at,ae,We),at=Ee(at,se,We)),at.length===0?me(ke(pe,dt),!0):at.length>1?me(ke(pe,at)):me(at[0]))},addTrack:function(pe){if(pe){var xe=pe.type;if((We=xe)===y.Z.AUDIO||We===y.Z.VIDEO||We===y.Z.TEXT||We===y.Z.IMAGE){var We,dt,at=pe.streamInfo.id;B[at]||(B[at]={audio:{list:[],storeLastSettings:dt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:dt,current:null},text:{list:[],storeLastSettings:dt,current:null},image:{list:[],storeLastSettings:dt,current:null}});for(var Je=B[at][xe].list,ht=0,Bt=Je.length;ht<Bt;++ht)if(De(Je[ht],pe))return;Je.push(pe)}}},getTracksFor:ye,getCurrentTrackFor:ie,isCurrentTrack:function(pe){if(!pe)return!1;var xe=pe.type,We=pe.streamInfo.id;return B[We]&&B[We][xe]&&De(B[We][xe].current,pe)},setTrack:me,selectInitialTrack:ke,setInitialSettings:ge,getInitialSettings:He,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Me,getTracksWithWidestRange:Ie,isTracksEqual:De,matchSettings:function(pe,xe){var We=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var dt=!1;if(pe.lang){if(pe.lang instanceof RegExp)dt=xe.lang.match(pe.lang);else if(xe.lang!==""){var at=yi()(pe.lang);at&&(dt=(0,Mh.extendedFilter)(xe.lang,at).length>0)}}else dt=!0;var Je=pe.index===void 0||pe.index===null||xe.index===pe.index,ht=!pe.viewpoint||pe.viewpoint===xe.viewpoint,Bt=!pe.role||!!xe.roles.filter(function(Ft){return Ft===pe.role})[0],Gt=!pe.accessibility||!!xe.accessibility.filter(function(Ft){return Ft===pe.accessibility})[0],kt=!pe.audioChannelConfiguration||!!xe.audioChannelConfiguration.filter(function(Ft){return Ft===pe.audioChannelConfiguration})[0];return dt&&Je&&ht&&(Bt||xe.type===y.Z.AUDIO&&We)&&Gt&&kt}catch(Ft){return!1}},matchSettingsLang:Le,matchSettingsIndex:we,matchSettingsViewPoint:je,matchSettingsRole:j,matchSettingsAccessibility:ue,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){ne.setSavedMediaSettings(y.Z.TEXT,null)},setConfig:function(pe){pe&&(pe.domStorage&&(ne=pe.domStorage),pe.settings&&(V=pe.settings),pe.customParametersModel&&(H=pe.customParametersModel))},reset:Be},P=(0,N.Z)(fe).getInstance().getLogger(L),Be(),L}wc.__dashjs_factory_name="MediaController";var Si=U.Z.getSingletonFactory(wc);U.Z.updateSingletonFactory(wc.__dashjs_factory_name,Si);var ju=Si,Fs=NaN,fm=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:P||null,selectedIdx:B||Fs},this.children=[]};function Of(){var L,P,B,V,ee=this.context,J=mn(ee).getInstance();function H(ye,ie,me){var ge=ne(me);ye[ie]?J.areEqual(ge,ye[ie].data.baseUrls)||(ye[ie].data.baseUrls=ge,ye[ie].data.selectedIdx=Fs):ye[ie]=new fm(ge)}function ne(ye){var ie=B.getBaseURLsFromElement(ye),me=V.getSynthesizedBaseUrlElements(ie);return me&&me.length>0&&(ie=ie.concat(me)),ie}function fe(ye,ie){var me=ie||P;ye(me.data),me.children&&me.children.forEach(function(ge){return fe(ye,ge)})}function Se(){P=new fm}return L={reset:Se,update:function(ye){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var me=ne(ie);J.areEqual(me,P.data.baseUrls)||(P.data.baseUrls=me,P.data.selectedIdx=Fs),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ge,He){H(P.children,He,ge),ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.forEach(function(De,Be){H(P.children[He].children,Be,De),De.Representation_asArray&&De.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function(Ye,Ee){H(P.children[He].children[Be].children,Ee,Ye)})})})})(ye)},getForPath:function(ye){var ie=P,me=[ie.data];return ye&&ye.forEach(function(ge){(ie=ie.children[ge])&&me.push(ie.data)}),me.filter(function(ge){return ge.baseUrls.length})},invalidateSelectedIndexes:function(ye){fe(function(ie){isNaN(ie.selectedIdx)||ye===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Fs)})},setConfig:function(ye){ye.adapter&&(B=ye.adapter),ye.contentSteeringController&&(V=ye.contentSteeringController)},getBaseUrls:function(ye){return ne(ye)}},Se(),L}Of.__dashjs_factory_name="BaseURLTreeModel";var ba=U.Z.getClassFactory(Of);function Wa(L){var P=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,ne=0,fe=[],Se=0;if((H=ee.sort(function(ye,ie){var me=ye.dvbPriority-ie.dvbPriority;return isNaN(me)?0:me}).filter(function(ye,ie,me){return!ie||me[0].dvbPriority&&ye.dvbPriority&&me[0].dvbPriority===ye.dvbPriority})).length)return H.length>1&&(H.forEach(function(ye){ne+=ye.dvbWeight,fe.push(ne)}),J=Math.floor(Math.random()*(ne-1)),fe.every(function(ye,ie){return Se=ie,!(J<ye)})),H[Se]}((V=[],B.filter(function(ee){return!P.contains(ee.serviceLocation)||(ee.dvbPriority&&V.push(ee.dvbPriority),!1)}).filter(function(ee){return!V.length||!ee.dvbPriority||V.indexOf(ee.dvbPriority)===-1})));var V}}}Wa.__dashjs_factory_name="DVBSelector";var Ra=U.Z.getClassFactory(Wa);function Po(L){var P=(L=L||{}).blacklistController;return{select:function(B){var V,ee=0;return B&&B.some(function(J,H){return ee=H,!P.contains(J.serviceLocation)})&&(V=B[ee]),V}}}Po.__dashjs_factory_name="BasicSelector";var dm=U.Z.getClassFactory(Po);function Dh(){var L,P,B,V=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ne=0,fe=NaN,Se=function(){var ie=J[ne],me=H.findIndex(function(ge){return ge.serviceLocation&&ge.serviceLocation===ie});if(me!==-1&&!B.contains(H[me].serviceLocation))return fe=me,"break";ne+=1};ne<J.length;){var ye=Se();if(ye==="break")break}return fe}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var ne=P.getSteeringDataFromManifest();ne&&ne.defaultServiceLocationArray.length>0&&(H=ee(ne.defaultServiceLocationArray,J.baseUrls))}var fe=P.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&fe&&fe.pathwayPriority&&fe.pathwayPriority.length&&(H=ee(fe.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(P=J.contentSteeringController)}},P=Ca(V).getInstance(),L}Dh.__dashjs_factory_name="ContentSteeringSelector";var IE=U.Z.getClassFactory(Dh);function gu(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance(),fe=(0,Ze.Z)(H).getInstance();function Se(){P.reset()}return L={chooseSelector:function(ye){(0,_e.PS)(ye,"boolean"),J=ye?V:B},select:function(ye){if(ye){if(fe.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(ye);isNaN(ie)||ie===-1||(ye.selectedIdx=ie)}if(!isNaN(ye.selectedIdx))return ye.baseUrls[ye.selectedIdx];var me=J.select(ye.baseUrls);return me?(ye.selectedIdx=ye.baseUrls.indexOf(me),me):(ne.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&Se()))}},reset:Se,setConfig:function(ye){ye.selector&&(J=ye.selector),ye.contentSteeringSelector&&(ee=ye.contentSteeringSelector)}},P=ys(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=dm(H).create({blacklistController:P}),V=Ra(H).create({blacklistController:P}),(ee=IE(H).create()).setConfig({blacklistController:P}),J=B,L}gu.__dashjs_factory_name="BaseURLSelector";var Us=U.Z.getClassFactory(gu);function Rl(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance(),ne=(0,St.Z)(J).getInstance();function fe(ye){B.update(ye),V.chooseSelector(P.getIsDVB(ye)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:Se(ye)})}function Se(ye){return B.getBaseUrls(ye)}return L={reset:function(){B.reset(),V.reset()},initialize:function(ye){B.setConfig({adapter:P,contentSteeringController:ee}),fe(ye)},resolve:function(ye){var ie=B.getForPath(ye).reduce(function(me,ge){var He=V.select(ge);return He?(ne.isRelative(He.url)?me.url=ne.resolve(He.url,me.url):(me.url=He.url,me.serviceLocation=He.serviceLocation),me.availabilityTimeOffset=He.availabilityTimeOffset,me.availabilityTimeComplete=He.availabilityTimeComplete,me.queryParams=He.queryParams,me):new Qn},new Qn);if(!ne.isRelative(ie.url))return ie},setConfig:function(ye){ye.baseURLTreeModel&&(B=ye.baseURLTreeModel),ye.baseURLSelector&&(V=ye.baseURLSelector),ye.adapter&&(P=ye.adapter),ye.contentSteeringController&&(ee=ye.contentSteeringController)},getBaseUrls:Se,update:fe},B=ba(J).create(),V=Us(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(ye){B.invalidateSelectedIndexes(ye.entry)},L),L}Rl.__dashjs_factory_name="BaseURLController";var CE=U.Z.getClassFactory(Rl);function Ph(L){return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Ph(L)}function Lf(L,P){return Lf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Lf(L,P)}function hm(L,P){return!P||Ph(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function kf(L){return kf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},kf(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Lf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=kf(P);if(B){var ne=kf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return hm(this,J)});function ee(J,H){var ne;return function(fe,Se){if(!(fe instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,ee),(ne=V.call(this)).url=J||null,ne.type=H||null,ne.mediaType=y.Z.STREAM,ne.responseType="",ne}return ee}(Z.Z);function pm(L){L=L||{};var P=this.context,B=(0,m.Z)(P).getInstance(),V=Io(P).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Ae});return{load:function(ee,J,H){var ne=function(Se,ye){J.resolved=!0,J.resolvedContent=Se||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:Se||ye?null:new ce.Z(Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")ne(null,!0);else{var fe=new ji(ee,nt.w.XLINK_EXPANSION_TYPE);V.load({request:fe,success:function(Se){ne(Se)},error:function(){ne(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}pm.__dashjs_factory_name="XlinkLoader";var gm=U.Z.getClassFactory(pm),Zu=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function P(Ee){var Le=Ee.localName;return Le==null&&(Le=Ee.baseName),Le!=null&&Le!=""||(Le=Ee.nodeName),Le}function B(Ee){return typeof Ee=="string"?Ee.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):Ee}function V(Ee,Le,we,je){for(var j=0;j<Ee.length;j++){var ue=Ee[j];if(typeof ue=="string"){if(ue==je)break}else if(ue instanceof RegExp){if(ue.test(je))break}else if(typeof ue=="function"&&ue(Le,we,je))break}return j!=Ee.length}function ee(Ee,Le,we){L.arrayAccessForm==="property"&&(Ee[Le]instanceof Array?Ee[Le+"_asArray"]=Ee[Le]:Ee[Le+"_asArray"]=[Ee[Le]]),!(Ee[Le]instanceof Array)&&L.arrayAccessFormPaths.length>0&&V(L.arrayAccessFormPaths,Ee,Le,we)&&(Ee[Le]=[Ee[Le]])}function J(Ee){var Le=Ee.split(/[-T:+Z]/g),we=new Date(Le[0],Le[1]-1,Le[2]),je=Le[5].split(".");if(we.setHours(Le[3],Le[4],je[0]),je.length>1&&we.setMilliseconds(je[1]),Le[6]&&Le[7]){var j=60*Le[6]+Number(Le[7]);j=0+((/\d\d-\d\d:\d\d$/.test(Ee)?"-":"+")=="-"?-1*j:j),we.setMinutes(we.getMinutes()-j-we.getTimezoneOffset())}else Ee.indexOf("Z",Ee.length-1)!==-1&&(we=new Date(Date.UTC(we.getFullYear(),we.getMonth(),we.getDate(),we.getHours(),we.getMinutes(),we.getSeconds(),we.getMilliseconds())));return we}function H(Ee,Le,we,je){return!(Le==1&&L.xmlElementsFilter.length>0)||V(L.xmlElementsFilter,Ee,we,je)}function ne(Ee,Le){if(Ee.nodeType==9){for(var we=new Object,je=Ee.childNodes,j=0;j<je.length;j++)(ae=je[j]).nodeType==1&&(L.ignoreRoot?we=ne(ae):(we={})[se=P(ae)]=ne(ae));return we}if(Ee.nodeType==1){(we=new Object).__cnt=0;var ue=[];for(je=Ee.childNodes,j=0;j<je.length;j++){var ae,se=P(ae=je[j]);if(ae.nodeType!=8){var Q=Le+"."+se;if(H(we,ae.nodeType,se,Q))if(we.__cnt++,we[se]==null){var Me=ne(ae,Q);(se!="#text"||/[^\s]/.test(Me))&&((Ie={})[se]=Me,ue.push(Ie)),we[se]=Me,ee(we,se,Q)}else{var Ie;we[se]!=null&&(we[se]instanceof Array||(we[se]=[we[se]],ee(we,se,Q))),Me=ne(ae,Q),(se!="#text"||/[^\s]/.test(Me))&&((Ie={})[se]=Me,ue.push(Ie)),we[se][we[se].length]=Me}}}we.__children=ue;for(var ke=P(Ee),Re=0;Re<Ee.attributes.length;Re++){var pe=Ee.attributes[Re];we.__cnt++;for(var xe=pe.value,We=0,dt=L.matchers.length;We<dt;We++){var at=L.matchers[We];at.test(pe,ke)&&(xe=at.converter(pe.value))}we[L.attributePrefix+pe.name]=xe}var Je=function(ht){return ht.prefix}(Ee);return Je!=null&&Je!=""&&(we.__cnt++,we.__prefix=Je),we["#text"]!=null&&(we.__text=we["#text"],we.__text instanceof Array&&(we.__text=we.__text.join("\n")),L.stripWhitespaces&&(we.__text=we.__text.trim()),delete we["#text"],L.arrayAccessForm=="property"&&delete we["#text_asArray"],we.__text=function(ht,Bt,Gt){if(L.datetimeAccessFormPaths.length>0){var kt=Gt.split(".#")[0];return V(L.datetimeAccessFormPaths,ht,Bt,kt)?J(ht):ht}return ht}(we.__text,se,Le+"."+se)),we["#cdata-section"]!=null&&(we.__cdata=we["#cdata-section"],delete we["#cdata-section"],L.arrayAccessForm=="property"&&delete we["#cdata-section_asArray"]),we.__cnt==0&&L.emptyNodeForm=="text"?we="":we.__cnt==1&&we.__text!=null?we=we.__text:we.__cnt!=1||we.__cdata==null||L.keepCData?we.__cnt>1&&we.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&we.__text==""||we.__text.trim()=="")&&delete we.__text:we=we.__cdata,delete we.__cnt,!L.enableToStringFunc||we.__text==null&&we.__cdata==null||(we.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),we}if(Ee.nodeType==3||Ee.nodeType==4)return Ee.nodeValue}function fe(Ee,Le,we,je){var j="<"+(Ee!=null&&Ee.__prefix!=null?Ee.__prefix+":":"")+Le;if(we!=null)for(var ue=0;ue<we.length;ue++){var ae=we[ue],se=Ee[ae];L.escapeMode&&(se=B(se)),j+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?j+='"'+se+'"':j+="'"+se+"'"}return j+(je?"/>":">")}function Se(Ee,Le){return"</"+(Ee.__prefix!=null?Ee.__prefix+":":"")+Le+">"}function ye(Ee,Le){return L.arrayAccessForm=="property"&&(je="_asArray",(we=Le.toString()).indexOf(je,we.length-je.length)!==-1)||Le.toString().indexOf(L.attributePrefix)==0||Le.toString().indexOf("__")==0||Ee[Le]instanceof Function;var we,je}function ie(Ee){var Le=0;if(Ee instanceof Object)for(var we in Ee)ye(Ee,we)||Le++;return Le}function me(Ee,Le,we){return L.jsonPropertiesFilter.length==0||we==""||V(L.jsonPropertiesFilter,Ee,Le,we)}function ge(Ee){var Le=[];if(Ee instanceof Object)for(var we in Ee)we.toString().indexOf("__")==-1&&we.toString().indexOf(L.attributePrefix)==0&&Le.push(we);return Le}function He(Ee){var Le="";return Ee instanceof Object?Le+=function(we){var je="";return we.__cdata!=null&&(je+="<![CDATA["+we.__cdata+"]]>"),we.__text!=null&&(L.escapeMode?je+=B(we.__text):je+=we.__text),je}(Ee):Ee!=null&&(L.escapeMode?Le+=B(Ee):Le+=Ee),Le}function De(Ee,Le){return Ee===""?Le:Ee+"."+Le}function Be(Ee,Le,we,je){var j="";if(Ee.length==0)j+=fe(Ee,Le,we,!0);else for(var ue=0;ue<Ee.length;ue++)j+=fe(Ee[ue],Le,ge(Ee[ue]),!1),j+=Ye(Ee[ue],De(je,Le)),j+=Se(Ee[ue],Le);return j}function Ye(Ee,Le){var we="";if(ie(Ee)>0){for(var je in Ee)if(!ye(Ee,je)&&(Le==""||me(Ee,je,De(Le,je)))){var j=Ee[je],ue=ge(j);j==null||j==null?we+=fe(j,je,ue,!0):j instanceof Object?j instanceof Array?we+=Be(j,je,ue,Le):j instanceof Date?(we+=fe(j,je,ue,!1),we+=j.toISOString(),we+=Se(j,je)):ie(j)>0||j.__text!=null||j.__cdata!=null?(we+=fe(j,je,ue,!1),we+=Ye(j,De(Le,je)),we+=Se(j,je)):we+=fe(j,je,ue,!0):(we+=fe(j,je,ue,!1),we+=He(j),we+=Se(j,je))}}return we+He(Ee)}this.parseXmlString=function(Ee){var Le;if(Ee===void 0)return null;if(window.DOMParser){var we=new window.DOMParser;try{(Le=we.parseFromString(Ee,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Le=null)}catch(je){Le=null}}else Ee.indexOf("<?")==0&&(Ee=Ee.substr(Ee.indexOf("?>")+2)),(Le=new ActiveXObject("Microsoft.XMLDOM")).async="false",Le.loadXML(Ee);return Le},this.asArray=function(Ee){return Ee===void 0||Ee==null?[]:Ee instanceof Array?Ee:[Ee]},this.toXmlDateTime=function(Ee){return Ee instanceof Date?Ee.toISOString():typeof Ee=="number"?new Date(Ee).toISOString():null},this.asDateTime=function(Ee){return typeof Ee=="string"?J(Ee):Ee},this.xml2json=function(Ee){return ne(Ee)},this.xml_str2json=function(Ee){var Le=this.parseXmlString(Ee);return Le!=null?this.xml2json(Le):null},this.json2xml_str=function(Ee){return Ye(Ee,"")},this.json2xml=function(Ee){var Le=this.json2xml_str(Ee);return this.parseXmlString(Le)},this.getVersion=function(){return"1.2.0"}},vo="onLoad";function Gu(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,fe=(0,m.Z)(ne).getInstance(),Se=(0,St.Z)(ne).getInstance();function ye(De,Be,Ye){var Ee,Le,we={};we.elements=De,we.type=Be,we.resolveType=Ye,we.elements.length===0&&me(we);for(var je=0;je<we.elements.length;je++)Ee=we.elements[je],Le=Se.isHTTPURL(Ee.url)?Ee.url:Ee.originalContent.BaseURL+Ee.url,H.load(Le,Ee,we)}function ie(De){var Be,Ye,Ee="";if(Be=De.element,Ye=De.resolveObject,Be.resolvedContent){var Le=0;Be.resolvedContent.indexOf("<?xml")===0&&(Le=Be.resolvedContent.indexOf("?>")+2),Ee=Be.resolvedContent.substr(0,Le)+"<response>"+Be.resolvedContent.substr(Le)+"</response>",Be.resolvedContent=J.xml_str2json(Ee)}(function(we){var je;for(je=0;je<we.elements.length;je++)if(we.elements[je].resolved===!1)return!1;return!0})(Ye)&&me(Ye)}function me(De){var Be,Ye,Ee=[];if(function(Le){var we,je,j,ue,ae,se,Q=[];for(ue=Le.elements.length-1;ue>=0;ue--){if(je=(we=Le.elements[ue]).type+"_asArray",we.resolvedContent){if(we.resolvedContent)for(ae=0;ae<we.resolvedContent[je].length;ae++)j=we.resolvedContent[je][ae],Q.push(j)}else delete we.originalContent["xlink:actuate"],delete we.originalContent["xlink:href"],Q.push(we.originalContent);for(we.parentElement[je].splice(we.index,1),se=0;se<Q.length;se++)we.parentElement[je].splice(we.index+se,0,Q[se]);Q=[]}Le.elements.length>0&&V.run(ee)}(De),De.resolveType==="onActuate"&&fe.trigger(T.Z.XLINK_READY,{manifest:ee}),De.resolveType===vo)switch(De.type){case v.Z.PERIOD:for(Be=0;Be<ee[v.Z.PERIOD+"_asArray"].length;Be++)(Ye=ee[v.Z.PERIOD+"_asArray"][Be]).hasOwnProperty(v.Z.ADAPTATION_SET+"_asArray")&&(Ee=Ee.concat(ge(Ye[v.Z.ADAPTATION_SET+"_asArray"],Ye,v.Z.ADAPTATION_SET,vo))),Ye.hasOwnProperty(v.Z.EVENT_STREAM+"_asArray")&&(Ee=Ee.concat(ge(Ye[v.Z.EVENT_STREAM+"_asArray"],Ye,v.Z.EVENT_STREAM,vo)));ye(Ee,v.Z.ADAPTATION_SET,vo);break;case v.Z.ADAPTATION_SET:fe.trigger(T.Z.XLINK_READY,{manifest:ee})}}function ge(De,Be,Ye,Ee){var Le,we,je,j=[];for(we=De.length-1;we>=0;we--)(Le=De[we]).hasOwnProperty("xlink:href")&&Le["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&De.splice(we,1);for(we=0;we<De.length;we++)(Le=De[we]).hasOwnProperty("xlink:href")&&Le.hasOwnProperty("xlink:actuate")&&Le["xlink:actuate"]===Ee&&(je=He(Le["xlink:href"],Be,Ye,we,Ee,Le),j.push(je));return j}function He(De,Be,Ye,Ee,Le,we){return{url:De,parentElement:Be,type:Ye,index:Ee,resolveType:Le,originalContent:we,resolvedContent:null,resolved:!1}}return P={resolveManifestOnLoad:function(De){J=new Zu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=De).Period_asArray?ye(ge(ee.Period_asArray,ee,v.Z.PERIOD,vo),v.Z.PERIOD,vo):fe.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(De){De&&(B=De)},setIron:function(De){De&&(V=De)},reset:function(){fe.off(T.Z.XLINK_ELEMENT_LOADED,ie,P),H&&(H.reset(),H=null)}},fe.on(T.Z.XLINK_ELEMENT_LOADED,ie,P),H=gm(ne).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),P}Gu.__dashjs_factory_name="XlinkController";var Ac=U.Z.getClassFactory(Gu);function qu(L){return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},qu(L)}function br(L){function P(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var ne=0,fe=ee.length;ne<fe;++ne){var Se=ee[ne];if(J[Se.name])if(H[Se.name]){if(Se.merge){var ye=J[Se.name],ie=H[Se.name];qu(ye)==="object"&&qu(ie)==="object"?P(ye,ie):H[Se.name]=ye+ie}}else H[Se.name]=J[Se.name]}}function V(ee,J){for(var H=0,ne=ee.children.length;H<ne;++H){var fe=ee.children[H],Se=J[fe.name+"_asArray"];if(Se)for(var ye=0,ie=Se.length;ye<ie;++ye){var me=Se[ye];B(ee.properties,J,me),V(fe,me)}}}return{run:function(ee){if(ee===null||qu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,ne=0,fe=H.length;ne<fe;++ne){var Se=H[ne];if(V(J,Se),"adaptationset"in L){var ye=Se.AdaptationSet_asArray;if(ye)for(var ie=L.adaptationset,me=0,ge=ye.length;me<ge;++me)V(ie,ye[me])}}return ee}}}br.__dashjs_factory_name="ObjectIron";var Hu=U.Z.getClassFactory(br);function Oh(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ku=function(){function L(V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=V,this._converter=ee}var P,B;return P=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Oh(P.prototype,B),L}();function xl(L){return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},xl(L)}function ni(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function $a(L,P){return $a=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},$a(L,P)}function mm(L,P){return!P||xl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ic(L){return Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ic(L)}var vm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&$a(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ic(P);if(B){var ne=Ic(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return mm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,fe=(ni(ne={},v.Z.MPD,[v.Z.ID,v.Z.PROFILES]),ni(ne,v.Z.PERIOD,[v.Z.ID]),ni(ne,v.Z.BASE_URL,[v.Z.SERVICE_LOCATION,v.Z.BYTE_RANGE]),ni(ne,v.Z.SEGMENT_BASE,[v.Z.INDEX_RANGE]),ni(ne,v.Z.INITIALIZATION,[v.Z.RANGE]),ni(ne,v.Z.REPRESENTATION_INDEX,[v.Z.RANGE]),ni(ne,v.Z.SEGMENT_LIST,[v.Z.INDEX_RANGE]),ni(ne,v.Z.BITSTREAM_SWITCHING,[v.Z.RANGE]),ni(ne,v.Z.SEGMENT_URL,[v.Z.MEDIA_RANGE,v.Z.INDEX_RANGE]),ni(ne,v.Z.SEGMENT_TEMPLATE,[v.Z.INDEX_RANGE,v.Z.MEDIA,v.Z.INDEX,v.Z.INITIALIZATION_MINUS,v.Z.BITSTREAM_SWITCHING_MINUS]),ni(ne,v.Z.ASSET_IDENTIFIER,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.EVENT_STREAM,[v.Z.VALUE]),ni(ne,v.Z.ADAPTATION_SET,[v.Z.PROFILES,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.CONTENT_TYPE]),ni(ne,v.Z.FRAME_PACKING,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.AUDIO_CHANNEL_CONFIGURATION,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.CONTENT_PROTECTION,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ESSENTIAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.SUPPLEMENTAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.INBAND_EVENT_STREAM,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ACCESSIBILITY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ROLE,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.RATING,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.VIEWPOINT,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.CONTENT_COMPONENT,[v.Z.CONTENT_TYPE]),ni(ne,v.Z.REPRESENTATION,[v.Z.ID,v.Z.DEPENDENCY_ID,v.Z.MEDIA_STREAM_STRUCTURE_ID]),ni(ne,v.Z.SUBSET,[v.Z.ID]),ni(ne,v.Z.METRICS,[v.Z.METRICS_MINUS]),ni(ne,v.Z.REPORTING,[v.Z.VALUE,v.Z.ID]),ne);if(fe.hasOwnProperty(H)){var Se=fe[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(Ku);function Lh(L){return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Lh(L)}function kh(L,P){return kh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},kh(L,P)}function Ff(L,P){return!P||Lh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Cc(L){return Cc=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Cc(L)}var ym=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Em=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&kh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Cc(P);if(B){var ne=Cc(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Ff(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){for(var H=[v.Z.MIN_BUFFER_TIME,v.Z.MEDIA_PRESENTATION_DURATION,v.Z.MINIMUM_UPDATE_PERIOD,v.Z.TIMESHIFT_BUFFER_DEPTH,v.Z.MAX_SEGMENT_DURATION,v.Z.MAX_SUBSEGMENT_DURATION,v.Z.SUGGESTED_PRESENTATION_DELAY,v.Z.START,y.Z.START_TIME,v.Z.DURATION],ne=H.length,fe=0;fe<ne;fe++)if(J.nodeName===H[fe])return ym.test(J.value);return!1},function(J){var H=ym.exec(J),ne=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(ne=-ne),ne})}return ee}(Ku);function Fh(L){return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Fh(L)}function Uf(L,P){return Uf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Uf(L,P)}function _m(L,P){return!P||Fh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Bf(L){return Bf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Bf(L)}var Uh=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Tm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Uf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Bf(P);if(B){var ne=Bf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return _m(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return Uh.test(J.value)},function(J){var H,ne=Uh.exec(J);if(H=Date.UTC(parseInt(ne[1],10),parseInt(ne[2],10)-1,parseInt(ne[3],10),parseInt(ne[4],10),parseInt(ne[5],10),ne[6]&&parseInt(ne[6],10)||0,ne[7]&&1e3*parseFloat(ne[7])||0),ne[9]&&ne[10]){var fe=60*parseInt(ne[9],10)+parseInt(ne[10],10);H+=(ne[8]==="+"?-1:1)*fe*60*1e3}return new Date(H)})}return ee}(Ku);function Vu(L){return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Vu(L)}function Nl(L,P){return Nl=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Nl(L,P)}function bE(L,P){return!P||Vu(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function jf(L){return jf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},jf(L)}var RE=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ml=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Nl(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=jf(P);if(B){var ne=jf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return bE(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return RE.test(J.value)},function(J){return parseFloat(J)})}return ee}(Ku);function Dl(L){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Dl(L)}function zu(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function bc(L,P){return bc=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},bc(L,P)}function Sm(L,P){return!P||Dl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Pl(L){return Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Pl(L)}var wm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&bc(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Pl(P);if(B){var ne=Pl(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Sm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,fe=(zu(ne={},v.Z.ADAPTATION_SET,[v.Z.LANG]),zu(ne,v.Z.REPRESENTATION,[v.Z.LANG]),zu(ne,v.Z.CONTENT_COMPONENT,[v.Z.LANG]),zu(ne,v.Z.LABEL,[v.Z.LANG]),zu(ne,v.Z.GROUP_LABEL,[v.Z.LANG]),ne);if(fe.hasOwnProperty(H)){var Se=fe[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return yi()(J)||String(J)})}return ee}(Ku);function Zf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Gf=function(){function L(V){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V,this._merge=(ee=V)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Zf(P.prototype,B),L}();function Rc(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Yu=function(){function L(V,ee,J){var H=this;(function(ne,fe){if(!(ne instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(ne){H._properties.push(new Gf(ne))})}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Rc(P.prototype,B),L}();function qf(L){return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},qf(L)}function Bh(L,P){return Bh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Bh(L,P)}function xE(L,P){return!P||qf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Wu(L){return Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Wu(L)}var NE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Bh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Wu(P);if(B){var ne=Wu(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return xE(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.PROFILES,v.Z.WIDTH,v.Z.HEIGHT,v.Z.SAR,v.Z.FRAMERATE,v.Z.AUDIO_SAMPLING_RATE,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.MAXIMUM_SAP_PERIOD,v.Z.START_WITH_SAP,v.Z.MAX_PLAYOUT_RATE,v.Z.CODING_DEPENDENCY,v.Z.SCAN_TYPE,v.Z.FRAME_PACKING,v.Z.AUDIO_CHANNEL_CONFIGURATION,v.Z.CONTENT_PROTECTION,v.Z.ESSENTIAL_PROPERTY,v.Z.ESSENTIAL_PROPERTY+"_asArray",v.Z.SUPPLEMENTAL_PROPERTY,v.Z.INBAND_EVENT_STREAM];return V.call(this,v.Z.ADAPTATION_SET,J,[new Yu(v.Z.REPRESENTATION,J,[new Yu(v.Z.SUB_REPRESENTATION,J)])])}return ee}(Yu);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hr(L)}function Hf(L,P){return Hf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Hf(L,P)}function jh(L,P){return!P||Hr(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Kf(L){return Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Kf(L)}var ME=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Hf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Kf(P);if(B){var ne=Kf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return jh(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.SEGMENT_BASE,v.Z.SEGMENT_TEMPLATE,v.Z.SEGMENT_LIST];return V.call(this,v.Z.PERIOD,J,[new Yu(v.Z.ADAPTATION_SET,J,[new Yu(v.Z.REPRESENTATION,J)])])}return ee}(Yu);function xc(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug;return P={parse:function(fe){var Se,ye=window.performance.now();if(!(Se=ee.xml_str2json(fe)))throw new Error("parsing the manifest failed");var ie=window.performance.now();Se.Patch?((Se=Se.Patch).add_asArray&&Se.add_asArray.forEach(function(ge){return J.run(ge)}),Se.replace_asArray&&Se.replace_asArray.forEach(function(ge){return J.run(ge)})):(Se=Se.MPD,J.run(Se));var me=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-ye).toPrecision(3)+"ms, objectiron: "+(me-ie).toPrecision(3)+"ms, total: "+((me-ye)/1e3).toPrecision(3)+"s)"),Se.protocol="DASH",Se},getMatchers:function(){return V},getIron:function(){return J}},B=ne.getLogger(P),V=[new Em,new Tm,new Ml,new wm,new vm],ee=new Zu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),J=Hu(H).create({adaptationset:new NE,period:new ME}),P}xc.__dashjs_factory_name="DashParser";var Am=U.Z.getClassFactory(xc);function Zh(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug,fe=L.settings,Se=(0,m.Z)(H).getInstance(),ye=(0,St.Z)(H).getInstance(),ie=L.mssHandler,me=L.errHandler;function ge(De){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:De.manifest})}function He(De){var Be=null;return De.indexOf("SmoothStreamingMedia")>-1?(ie&&(Be=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Be):De.indexOf("MPD")>-1||De.indexOf("Patch")>-1?Am(H).create({debug:ne}):Be}return P={load:function(De){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Ee=new Date,Le=new ji(De,nt.w.MPD_TYPE);Be&&(Le.serviceLocation=Be),Ye&&(Le.queryParams=Ye),Le.requestStartDate||(Le.requestStartDate=Ee),Se.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:Le}),V.load({request:Le,success:function(we,je,j){var ue,ae,se;if(ee)if(j&&j!==De?(ae=ye.parseBaseUrl(j),ue=j):(ye.isRelative(De)&&(De=ye.resolve(De,window.location.href)),ae=ye.parseBaseUrl(De)),je!="No Content")if(J===null&&(J=He(we)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{se=J.parse(we)}catch(Me){return void Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}if(se){if(se.url=ue||De,se.originalUrl||(se.originalUrl=se.url),fe&&fe.get().streaming.enableManifestDurationMismatchFix&&se.mediaPresentationDuration&&se.Period_asArray.length>1){var Q=se.Period_asArray.reduce(function(Me,Ie){return Me+Ie.duration},0);!isNaN(Q)&&se.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),se.mediaPresentationDuration=Q)}se.baseUri=ae,se.loadedTime=new Date,ee.resolveManifestOnLoad(se),Se.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:we})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))});else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(we,je,j){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(De,", ").concat(j))})}})},reset:function(){Se.off(T.Z.XLINK_READY,ge,P),ie&&ie.reset(),ee&&(ee.reset(),ee=null),V&&(V.abort(),V=null)}},B=ne.getLogger(P),Se.on(T.Z.XLINK_READY,ge,P),V=Io(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:ye,constants:y.Z,dashConstants:v.Z,errors:Ae,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=Ac(H).create({errHandler:me,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,P}Zh.__dashjs_factory_name="ManifestLoader";var Im=U.Z.getClassFactory(Zh);function Gh(){var L=this.context,P=(0,m.Z)(L).getInstance();return{error:function(B){P.trigger(T.Z.ERROR,{error:B})}}}Gh.__dashjs_factory_name="ErrorHandler";var Ol=U.Z.getSingletonFactory(Gh),Cm=w(1715);function bm(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance();function fe(Se,ye){if(!ye||!ye.Period_asArray||ye.Period_asArray.length===0)return Promise.resolve();var ie=[];return ye.Period_asArray.forEach(function(me){ie.push(function(ge,He){return new Promise(function(De){if(ge&&ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.length!==0){var Be=[];ge.AdaptationSet_asArray.forEach(function(Ye){P.getIsTypeOf(Ye,He)&&Be.push(function(Ee,Le){return new Promise(function(we){if(Ee.Representation_asArray&&Ee.Representation_asArray.length!==0){var je=[],j=[];Ee.Representation_asArray.forEach(function(ue,ae){var se=P.getCodec(Ee,ae,!1),Q=function(Me,Ie,ke){switch(Me){case y.Z.VIDEO:return function(Re,pe){return{codec:pe,width:Re.width||null,height:Re.height||null,framerate:Re.frameRate||null,bitrate:Re.bandwidth||null}}(Ie,ke);case y.Z.AUDIO:return function(Re,pe){var xe=Re.audioSamplingRate||null;return{codec:pe,bitrate:Re.bandwidth||null,samplerate:xe}}(Ie,ke);default:return null}}(Le,ue,se);j.push(Q),je.push(B.supportsCodec(Q,Le))}),Promise.all(je).then(function(ue){Ee.Representation_asArray=Ee.Representation_asArray.filter(function(ae,se){return ue[se]||J.debug("[Stream] Codec ".concat(j[se].codec," not supported ")),ue[se]}),we()}).catch(function(){we()})}else we()})}(Ye,He))}),Promise.all(Be).then(function(){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(Ye){var Ee=Ye.Representation_asArray&&Ye.Representation_asArray.length>0;return Ee||(ne.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:Ye}),J.warn("AdaptationSet has been removed because of no supported Representation")),Ee}),De()}).catch(function(){De()})}else De()})}(me,Se))}),Promise.all(ie)}return L={setConfig:function(Se){Se&&(Se.adapter&&(P=Se.adapter),Se.capabilities&&(B=Se.capabilities),Se.settings&&(V=Se.settings),Se.customParametersModel&&(ee=Se.customParametersModel))},filterUnsupportedFeatures:function(Se){return new Promise(function(ye){var ie=[];ie.push(fe(y.Z.VIDEO,Se)),ie.push(fe(y.Z.AUDIO,Se)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(me){me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(He){return!He.Representation_asArray||He.Representation_asArray.length===0||(He.Representation_asArray=He.Representation_asArray.filter(function(De){var Be=P.getEssentialPropertiesForRepresentation(De);if(Be&&Be.length>0)for(var Ye=0;Ye<Be.length;){if(!B.supportsEssentialProperty(Be[Ye]))return J.debug("[Stream] EssentialProperty not supported: "+Be[Ye].schemeIdUri),!1;Ye+=1}return!0}),He.Representation_asArray&&He.Representation_asArray.length>0)})})}(Se),function(me){var ge=ee.getCustomCapabilitiesFilters();ge&&ge.length!==0&&me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(He){He.AdaptationSet_asArray=He.AdaptationSet_asArray.filter(function(De){return!De.Representation_asArray||De.Representation_asArray.length===0||(De.Representation_asArray=De.Representation_asArray.filter(function(Be){return!ge.some(function(Ye){return!Ye(Be)})}),De.Representation_asArray&&De.Representation_asArray.length>0)})})}(Se),ye()}).catch(function(){ye()})})}},J=(0,N.Z)(H).getInstance().getLogger(L),L}bm.__dashjs_factory_name="CapabilitiesFilter";var DE=U.Z.getSingletonFactory(bm),PE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Rm(){var L;return{initialize:function(P){if(L=new PE,!P)return null;var B=P.indexOf("#");if(B!==-1)for(var V=P.substr(B+1).split("&"),ee=0,J=V.length;ee<J;++ee){var H=V[ee],ne=H.indexOf("=");if(ne!==-1){var fe=H.substring(0,ne);L.hasOwnProperty(fe)&&(L[fe]=H.substr(ne+1))}}},getURIFragmentData:function(){return L}}}Rm.__dashjs_factory_name="URIFragmentModel";var OE=U.Z.getSingletonFactory(Rm);function xm(){var L,P=this.context,B=(0,m.Z)(P).getInstance();return{getValue:function(){return L},setValue:function(V){L=V,V&&B.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}xm.__dashjs_factory_name="ManifestModel";var LE=U.Z.getSingletonFactory(xm),qh=-.5;function Hh(){var L,P,B,V,ee=this.context,J=(0,Ze.Z)(ee).getInstance();function H(Se,ye){return isNaN(Se)?0:Se>0?(ye&&P.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se<qh?(ye&&P.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(qh,": ").concat(-50,"% playback speed.")),qh):Se}function ne(Se,ye){return isNaN(Se)?0:Se<0?(ye&&P.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se>1?(ye&&P.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Se}function fe(){var Se=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,ye=B.getLiveDelay();return!isNaN(ye)&&ye>0?Math.min(Se,ye):Se}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var Se=V.getServiceDescriptionSettings();return Se&&Se.liveCatchup&&!isNaN(Se.liveCatchup.maxDrift)&&Se.liveCatchup.maxDrift>0?Se.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:fe,getInitialBufferLevel:function(){var Se=J.get().streaming.buffer.initialBufferLevel;return isNaN(Se)||Se<0?0:Math.min(fe(),Se)},getRetryAttemptsForType:function(Se){var ye=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[Se]*ye:J.get().streaming.retryAttempts[Se]},getRetryIntervalsForType:function(Se){var ye=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[Se]/ye:J.get().streaming.retryIntervals[Se]},getCatchupPlaybackRates:function(Se){var ye=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(ye.min)||!isNaN(ye.max))return{min:H(ye.min,Se),max:ne(ye.max,Se)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var me=ie.liveCatchup.playbackRate;return{min:H(me.min,Se),max:ne(me.max,Se)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Se,ye){try{var ie=J.get().streaming.abr[Se][ye];if(!isNaN(ie)&&ie!==-1)return ie;var me=V.getServiceDescriptionSettings();return me&&me[Se]&&!isNaN(me[Se][ye])?me[Se][ye]:-1}catch(ge){return-1}},setConfig:function(Se){Se.playbackController&&(B=Se.playbackController),Se.serviceDescriptionController&&(V=Se.serviceDescriptionController)},reset:function(){}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}Hh.__dashjs_factory_name="MediaPlayerModel";var Ll=U.Z.getSingletonFactory(Hh),Nc=w(1767);function Kh(L){var P=(L=L||{}).abrController,B=L.switchHistory,V=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,ne=L.useLoLPABR,fe=L.streamProcessor?L.streamProcessor.getScheduleController():null,Se=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,ye=L.videoModel?L.videoModel:null;function ie(){return Se?Se.mediaInfo:null}return{getMediaType:function(){var me=ie();return me?me.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var me=ie();return me?me.streamInfo:null},getScheduleController:function(){return fe},getAbrController:function(){return P},getRepresentationInfo:function(){return Se},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return ne},getVideoModel:function(){return ye}}}Kh.__dashjs_factory_name="RulesContext";var Vh=U.Z.getClassFactory(Kh),ua=w(2068);function Rr(){var L=[],P=[];return{push:function(B){B.newValue===ua.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var V=B.newValue-B.oldValue,ee=V<0?1:0,J=ee?-V:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,P.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),P.length>8){var ne=P.shift();L[ne.idx].drops-=ne.drop,L[ne.idx].dropSize-=ne.dropSize,L[ne.idx].noDrops-=ne.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],P=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var pi=U.Z.getClassFactory(Rr);function mu(){var L={},P={},B={};return{push:function(V,ee,J){if(ee){L[V]||(L[V]=[],P[V]=0,B[V]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,ne=J&&J.totalVideoFrames?J.totalVideoFrames:0,fe=H-P[V];P[V]=H;var Se=ne-B[V];B[V]=ne;var ye=L[V];isNaN(ee)||(ye[ee]?(ye[ee].droppedVideoFrames+=fe,ye[ee].totalVideoFrames+=Se):ye[ee]={droppedVideoFrames:fe,totalVideoFrames:Se})}},getFrameHistory:function(V){return L[V]},clearForStream:function(V){try{delete L[V],delete P[V],delete B[V]}catch(ee){}},reset:function(){L={},P={},B={}}}}mu.__dashjs_factory_name="DroppedFramesHistory";var zh=U.Z.getClassFactory(mu);function $u(L){var P,B,V,ee,J,H=this.context,ne=(L=L||{}).settings,fe=(0,m.Z)(H).getInstance();function Se(De,Be,Ye,Ee){var Le=Math.pow(.5,Ye/Ee.fast);De.fastEstimate=(1-Le)*Be+Le*De.fastEstimate;var we=Math.pow(.5,Ye/Ee.slow);De.slowEstimate=(1-we)*Be+we*De.slowEstimate,De.totalWeight+=Ye}function ye(De,Be,Ye){return ne.get().streaming.abr.movingAverageMethod!==y.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(Ee,Le){var we=Ee?J.throughputHalfLife:J.latencyHalfLife,je=Ee?V[Le]:ee[Le];if(!je||je.totalWeight<=0)return NaN;var j=je.fastEstimate/(1-Math.pow(.5,je.totalWeight/we.fast)),ue=je.slowEstimate/(1-Math.pow(.5,je.totalWeight/we.slow));return Ee?Math.min(j,ue):Math.max(j,ue)}(De,Be):function(Ee,Le,we){var je=function(ue,ae,se){var Q,Me;if(ue?(Q=P[ae],Me=se?3:4):(Q=B[ae],Me=4),Q){if(Me>=Q.length)Me=Q.length;else if(ue)for(var Ie=1;Ie<Me;++Ie){var ke=Q[Q.length-Ie]/Q[Q.length-Ie-1];if((ke>=1.3||ke<=.7692307692307692)&&(Me+=1)===Q.length)break}}else Me=0;return Me}(Ee,Le,we),j=(Ee?P:B)[Le];return je!==0&&j&&j.length!==0?(j=j.slice(-je)).reduce(function(ue,ae){return ue+ae})/j.length:NaN}(De,Be,Ye)}function ie(De,Be){return ye(!0,De,Be)}function me(De){P[De]=P[De]||[],B[De]=B[De]||[],V[De]=V[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[De]=ee[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ge(){P={},B={},V={},ee={}}var He={push:function(De,Be,Ye){if(Be.trace&&Be.trace.length){var Ee,Le=Be.tresponse.getTime()-Be.trequest.getTime()||1,we=Be._tfinish.getTime()-Be.tresponse.getTime()||1,je=Be.trace.reduce(function(se,Q){return se+Q.b[0]},0),j=0;if((Ee=Be._fileLoaderType&&Be._fileLoaderType===y.Z.FILE_LOADER_TYPES.FETCH?Be.trace.reduce(function(se,Q){return se+Q.d},0):Ye?we:Le+we)!==0&&(j=Math.round(8*je/Ee)),Be.cmsd){var ue=Be.cmsd.dynamic&&Be.cmsd.dynamic.etp?Be.cmsd.dynamic.etp:null;if(ue){var ae=ne.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(j=j*(1-ae)+ue*ae)}}if(me(De),function(se,Q,Me){return se===y.Z.VIDEO?Me<ne.get().streaming.cacheLoadThresholds[y.Z.VIDEO]:se===y.Z.AUDIO?Me<ne.get().streaming.cacheLoadThresholds[y.Z.AUDIO]:void 0}(De,0,we)){if(P[De].length>0&&!P[De].hasCachedEntries)return;P[De].hasCachedEntries=!0}else P[De]&&P[De].hasCachedEntries&&function(se){delete P[se],delete B[se],delete V[se],delete ee[se],me(se)}(De);P[De].push(j),fe.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:j,mediaType:De,httpRequest:Be}),P[De].length>20&&P[De].shift(),B[De].push(Le),B[De].length>20&&B[De].shift(),Se(V[De],j,.001*we,J.throughputHalfLife),Se(ee[De],Le,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(De,Be){var Ye=ie(De,Be);return isNaN(Ye)||(Ye*=ne.get().streaming.abr.bandwidthSafetyFactor),Ye},getAverageLatency:function(De){return ye(!1,De)},reset:ge};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ge(),He}$u.__dashjs_factory_name="ThroughputHistory";var Nm=U.Z.getClassFactory($u);function Vf(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee,Le,we,je,j,ue,ae,se,Q,Me=this.context,Ie=(0,N.Z)(Me).getInstance(),ke=(0,m.Z)(Me).getInstance();function Re(){ee={},J={},ne={},H={},Le={},j={},ue={},ae={},Se===void 0&&(Se=!1),we&&we.reset(),Ee=void 0,we=void 0,je=void 0,clearTimeout(fe),fe=null}function pe(rt){var vt=rt.request.mediaType,Wt=rt.streamId;if(vt&&Wt&&H[Wt]&&Q.get().streaming.abr.autoSwitchBitrate[vt]){var Nt=H[Wt][vt];if(Nt){var en=Vh(Me).create({abrController:L,streamProcessor:Nt,currentRequest:rt.request,useBufferOccupancyABR:j[vt],useL2AABR:ue[vt],useLoLPABR:ae[vt],videoModel:ge}),Jt=B.shouldAbandonFragment(en,Wt);Jt.quality>ua.Z.NO_CHANGE&&Nt.getFragmentModel().getRequests({state:$.FRAGMENT_MODEL_LOADING,index:rt.request.index})[0]&&(ne[Wt][vt].state=D.Z.ABANDON_LOAD,Le[Wt][vt].reset(),Le[Wt][vt].push({oldValue:Je(vt,Wt),newValue:Jt.quality,confidence:1,reason:Jt.reason}),ht(vt,V.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(fe),fe=setTimeout(function(){ne[Wt][vt].state=D.Z.ALLOW_LOAD,fe=null},Q.get().streaming.abandonLoadTimeout))}}}function xe(rt){rt.mediaType===y.Z.VIDEO&&(Ee!==void 0&&we.push(rt.streamId,Ee,ge.getPlaybackQuality()),Ee=rt.newQuality)}function We(rt){var vt,Wt;rt.metric!==D.Z.HTTP_REQUEST||!rt.value||rt.value.type!==nt.w.MEDIA_SEGMENT_TYPE||rt.mediaType!==y.Z.AUDIO&&rt.mediaType!==y.Z.VIDEO||je.push(rt.mediaType,rt.value,Q.get().streaming.abr.useDeadTimeLatency),rt.metric!==D.Z.BUFFER_LEVEL||rt.mediaType!==y.Z.AUDIO&&rt.mediaType!==y.Z.VIDEO||(vt=rt.mediaType,Wt=.001*rt.value.level,Q.get().streaming.abr.ABRStrategy===y.Z.ABR_STRATEGY_DYNAMIC&&function(Nt,en){try{var Jt=He.getStableBufferTime(),Yt=Jt,Dn=.5*Jt,xn=j[Nt],rr=en>(xn?Dn:Yt);j[Nt]=rr,rr!==xn&&(rr?P.info("["+Nt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):P.info("["+Nt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){P.error(ir)}}(vt,Wt))}function dt(rt,vt){try{var Wt;return ee[vt]=ee[vt]||{},ee[vt].hasOwnProperty(rt)||(ee[vt][rt]=0),Wt=function(Nt,en){var Jt=ee[en][Nt],Yt=Jt;if(!H[en]||!H[en][Nt])return Yt;var Dn=at(Nt,en);Dn!==void 0&&(Yt=Math.max(Jt,Dn));var xn=function(rr,ir){try{var It=He.getAbrBitrateParameter("maxBitrate",rr);return It>-1?kt(H[ir][rr].getMediaInfo(),It,ir):void 0}catch($t){return}}(Nt,en);return xn!==void 0&&(Yt=Math.min(Yt,xn)),Yt}(rt,vt),Wt=function(Nt,en,Jt){var Yt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?Nt:Math.min(Nt,Math.round(Yt*Dn))}(Wt,rt,vt),Wt=function(Nt,en,Jt){if(en!==y.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return Nt;Se||An();var Yt=H[Jt][en].getStreamInfo(),Dn=me.getAdaptationForType(Yt.index,en,Yt).Representation_asArray,xn=Nt;if(ye>0&&ie>0){for(;xn>0&&Dn[xn]&&ye<Dn[xn].width&&ye-Dn[xn-1].width<Dn[xn].width-ye;)xn-=1;for(;xn<Dn.length-1&&Dn[xn].width===Dn[xn+1].width;)xn+=1}return xn}(Wt,rt,vt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&(Wt=function(Nt,en,Jt){if(en!=="video")return Nt;var Yt=Be.getMaxBitrate(en);if(Yt<0)return Nt;var Dn=Gt(Jt,"audio",Je("audio",Jt));Yt-=Dn?Dn.bitrate/1e3:0;var xn=kt(H[Jt][en].getMediaInfo(),Yt,Jt);return P.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Yt),Math.min(Nt,xn)}(Wt,rt,vt)),Wt}catch(Nt){return}}function at(rt,vt){try{return function(Wt,Nt){try{var en=He.getAbrBitrateParameter("minBitrate",Wt);if(en>-1){var Jt=H[Nt][Wt].getMediaInfo(),Yt=Ft(Jt),Dn=kt(Jt,en,Nt);return Yt[Dn]&&Dn<Yt.length-1&&Yt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(xn){return}}(rt,vt)}catch(Wt){return}}function Je(rt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return vt||(vt=V.getActiveStreamInfo().id),rt&&H[vt]&&H[vt][rt]&&vt?(J[vt]=J[vt]||{},J[vt].hasOwnProperty(rt)||(J[vt][rt]=0),J[vt][rt]):0}catch(Wt){return 0}}function ht(rt,vt,Wt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(vt&&vt.id&&rt){var en=vt.id,Jt=Je(rt,en);(0,_e.SE)(Wt);var Yt=dt(rt,en);Wt!==Jt&&Wt>=0&&Wt<=Yt&&Bt(rt,Jt,Wt,Yt,Nt,en)}}function Bt(rt,vt,Wt,Nt,en,Jt){if(rt&&H[Jt]&&H[Jt][rt]){var Yt=H[Jt][rt].getStreamInfo(),Dn=Yt&&Yt.manifestInfo&&Yt.manifestInfo.isDynamic,xn=se.getCurrentBufferLevel(rt);P.info("Stream ID: "+Jt+" ["+rt+"] switch from "+vt+" to "+Wt+"/"+Nt+" (buffer: "+xn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][rt]=Wt;var rr=Gt(Jt,rt,Wt);ke.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:vt,newQuality:Wt,reason:en,streamInfo:Yt,bitrateInfo:rr,maxIdx:Nt,mediaType:rt},{streamId:Yt.id,mediaType:rt});var ir=je.getAverageThroughput(rt,Dn);isNaN(ir)||Ye.setSavedBitrateSettings(rt,ir)}}function Gt(rt,vt,Wt){if(vt&&H&&H[rt]&&H[rt][vt]){var Nt=Ft(H[rt][vt].getMediaInfo());return Nt[Wt]?Nt[Wt]:null}return null}function kt(rt,vt,Wt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=rt&&rt.type?H[Wt][rt.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&Nt&&en&&en.fragmentDuration){Nt/=1e3;var Jt=en.fragmentDuration;if(Nt>Jt)return 0;var Yt=Nt/Jt;vt*=1-Yt}for(var Dn=Ft(rt),xn=Dn.length-1;xn>=0;xn--){var rr=Dn[xn];if(1e3*vt>=rr.bitrate)return xn}return 0}function Ft(rt){var vt=[];if(!rt||!rt.bitrateList)return vt;for(var Wt,Nt=rt.bitrateList,en=rt.type,Jt=0,Yt=Nt.length;Jt<Yt;Jt++)(Wt=new ku).mediaType=en,Wt.qualityIndex=Jt,Wt.bitrate=Nt[Jt].bandwidth,Wt.width=Nt[Jt].width,Wt.height=Nt[Jt].height,Wt.scanType=Nt[Jt].scanType,vt.push(Wt);return vt}function An(){if(ge){var rt=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;ye=ge.getClientWidth()*rt,ie=ge.getClientHeight()*rt}}return L={initialize:function(){we=zh(Me).create(),je=Nm(Me).create({settings:Q}),(B=(0,Nc.Z)(Me).create({dashMetrics:se,customParametersModel:De,mediaPlayerModel:He,settings:Q})).initialize(),ke.on(_.Z.QUALITY_CHANGE_RENDERED,xe,L),ke.on(_.Z.METRIC_ADDED,We,L),ke.on(T.Z.LOADING_PROGRESS,pe,L)},isPlayingAtTopQuality:function(rt){var vt=rt?rt.id:null,Wt=Je(y.Z.AUDIO,vt),Nt=Je(y.Z.VIDEO,vt);return Wt===dt(y.Z.AUDIO,vt)&&Nt===dt(y.Z.VIDEO,vt)},updateTopQualityIndex:function(rt){var vt=rt.type,Wt=rt.streamInfo.id,Nt=rt.representationCount-1;return ee[Wt]=ee[Wt]||{},ee[Wt][vt]=Nt,Nt},clearDataForStream:function(rt){we&&we.clearForStream(rt),H[rt]&&delete H[rt],Le[rt]&&delete Le[rt],ne[rt]&&delete ne[rt]},getThroughputHistory:function(){return je},getBitrateList:Ft,getQualityForBitrate:kt,getTopBitrateInfoFor:function(rt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(vt||(vt=V.getActiveStreamInfo().id),rt&&H&&H[vt]&&H[vt][rt]){var Wt=dt(rt,vt),Nt=Ft(H[vt][rt].getMediaInfo());return Nt[Wt]?Nt[Wt]:null}return null},getMinAllowedIndexFor:at,getMaxAllowedIndexFor:dt,getInitialBitrateFor:function(rt,vt){if(function(){if(!Ye||!Ye.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}(),rt===y.Z.TEXT)return NaN;var Wt=Ye.getSavedBitrateSettings(rt),Nt=He.getAbrBitrateParameter("initialBitrate",rt),en=Q.get().streaming.abr.initialRepresentationRatio[rt];if(Nt===-1)if(en>-1){var Jt=H[vt][rt].getStreamInfo(),Yt=me.getAdaptationForType(Jt.index,rt,Jt).Representation_asArray;Nt=Array.isArray(Yt)?Yt[Math.max(Math.round(Yt.length*en)-1,0)].bandwidth/1e3:0}else Nt=isNaN(Wt)?rt===y.Z.VIDEO?1e3:100:Wt;return Nt},getQualityFor:Je,getAbandonmentStateFor:function(rt,vt){return ne[rt]&&ne[rt][vt]?ne[rt][vt].state:null},setPlaybackQuality:ht,checkPlaybackQuality:function(rt,vt){try{if(!(rt&&H&&H[vt]&&H[vt][rt]))return!1;if(we){var Wt=ge.getPlaybackQuality();Wt&&we.push(vt,Ee,Wt)}if(!Q.get().streaming.abr.autoSwitchBitrate[rt])return!1;var Nt=Je(rt,vt),en=Vh(Me).create({abrController:L,switchHistory:Le[vt][rt],droppedFramesHistory:we,streamProcessor:H[vt][rt],currentValue:Nt,useBufferOccupancyABR:j[rt],useL2AABR:ue[rt],useLoLPABR:ae[rt],videoModel:ge}),Jt=at(rt,vt),Yt=dt(rt,vt),Dn=B.getMaxQuality(en),xn=Dn.quality;return Jt!==void 0&&(xn>ua.Z.NO_CHANGE?xn:Nt)<Jt&&(xn=Jt),xn>Yt&&(xn=Yt),Le[vt][rt].push({oldValue:Nt,newValue:xn}),xn>ua.Z.NO_CHANGE&&xn!==Nt&&(ne[vt][rt].state===D.Z.ALLOW_LOAD||xn<Nt)&&(Bt(rt,Nt,xn,Yt,Dn.reason,vt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(rt){Se=rt},registerStreamType:function(rt,vt){var Wt=vt.getStreamInfo().id;H[Wt]||(H[Wt]={}),Le[Wt]||(Le[Wt]={}),ne[Wt]||(ne[Wt]={}),Le[Wt][rt]=pi(Me).create(),H[Wt][rt]=vt,ne[Wt][rt]={},ne[Wt][rt].state=D.Z.ALLOW_LOAD,function(Nt){var en=Q.get().streaming.abr.ABRStrategy;en===y.Z.ABR_STRATEGY_L2A?(j[Nt]=!1,ae[Nt]=!1,ue[Nt]=!0):en===y.Z.ABR_STRATEGY_LoLP?(j[Nt]=!1,ae[Nt]=!0,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_BOLA?(j[Nt]=!0,ae[Nt]=!1,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_THROUGHPUT?(j[Nt]=!1,ae[Nt]=!1,ue[Nt]=!1):en===y.Z.ABR_STRATEGY_DYNAMIC&&(j[Nt]=!(!j||!j[Nt])&&j[Nt],ae[Nt]=!1,ue[Nt]=!1)}(rt),rt===y.Z.VIDEO&&An()},unRegisterStreamType:function(rt,vt){try{H[rt]&&H[rt][vt]&&delete H[rt][vt],Le[rt]&&Le[rt][vt]&&delete Le[rt][vt],ne[rt]&&ne[rt][vt]&&delete ne[rt][vt]}catch(Wt){}},setConfig:function(rt){rt&&(rt.streamController&&(V=rt.streamController),rt.domStorage&&(Ye=rt.domStorage),rt.mediaPlayerModel&&(He=rt.mediaPlayerModel),rt.customParametersModel&&(De=rt.customParametersModel),rt.cmsdModel&&(Be=rt.cmsdModel),rt.dashMetrics&&(se=rt.dashMetrics),rt.adapter&&(me=rt.adapter),rt.videoModel&&(ge=rt.videoModel),rt.settings&&(Q=rt.settings))},reset:function(){Re(),ke.off(T.Z.LOADING_PROGRESS,pe,L),ke.off(_.Z.QUALITY_CHANGE_RENDERED,xe,L),ke.off(_.Z.METRIC_ADDED,We,L),B&&B.reset()}},P=Ie.getLogger(L),Re(),L}Vf.__dashjs_factory_name="AbrController";var Yh=U.Z.getSingletonFactory(Vf);Yh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(Vf.__dashjs_factory_name,Yh);var Wn=Yh,Mm=new Map([[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Mc(){var L,P,B,V,ee,J,H,ne,fe=this.context,Se=(0,m.Z)(fe).getInstance(),ye=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function me(){return ye.length>0}function ge(){if(B&&me()&&B.playbackRate===0){var we=document.createEvent("Event");we.initEvent("waiting",!0,!1),B.dispatchEvent(we)}}function He(we,je){B&&B.addEventListener(we,je)}function De(we,je){B&&B.removeEventListener(we,je)}function Be(){return B?B.readyState:NaN}function Ye(){return B?B.buffered:null}function Ee(we,je,j,ue,ae){if(B){for(var se=0;se<B.textTracks.length;se++)if(B.textTracks[se].kind===we&&(!je||B.textTracks[se].label==je)&&B.textTracks[se].language===j&&B.textTracks[se].isTTML===ue&&B.textTracks[se].isEmbedded===ae)return B.textTracks[se]}return null}function Le(we,je){return we===y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Be()>=we?(je(),null):function(j,ue){var ae=function se(){De(j,se),ue(j)};return He(j,ae),{func:ae,event:j}}(Mm.get(we),je)}return L={addEventListener:He,addTextTrack:function(we,je,j,ue,ae){if(!B)return null;var se=Ee(we,je,j,ue,ae);return se||((se=B.addTextTrack(we,je,j)).isEmbedded=ae,se.isTTML=ue),se},appendChild:function(we){B&&(B.appendChild(we),we.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=we.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=we.isEmbedded))},getBufferRange:Ye,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var we="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,je=null;return"getVideoPlaybackQuality"in B?je=B.getVideoPlaybackQuality():we&&(je={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),je},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Be,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:Ee,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(V)?B.currentTime:V:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().left-we.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().top-we.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){Se.on(T.Z.PLAYBACK_PLAYING,ge,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(V):null},isStalled:me,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var we=B.play();we&&we.catch&&typeof Promise<"u"&&we.catch(function(je){je.name==="NotAllowedError"&&Se.trigger(T.Z.PLAYBACK_NOT_ALLOWED),P.warn("Caught pending play exception - continuing (".concat(je,")"))})}},removeChild:function(we){B&&B.removeChild(we)},removeEventListener:De,reset:function(){clearTimeout(ne),Se.off(T.Z.PLAYBACK_PLAYING,ge,this)},setCurrentTime:function(we,je){B&&(ee&&ee.func&&ee.event&&De(ee.event,ee.func),V=we,ee=Le(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==V)try{V=je?function(j){var ue=Ye(),ae=j,se=9999999999;if(ue)for(var Q=0;Q<ue.length;Q++){var Me=ue.start(Q),Ie=ue.end(Q),ke=Math.abs(Me-j),Re=Math.abs(Ie-j);if(j>=Me&&j<=Ie)return j;ke<se&&(se=ke,ae=Me),Re<se&&(se=Re,ae=Ie)}return ae}(V):V,isNaN(V)||(B.currentTime=V),V=NaN}catch(j){B.readyState===0&&j.code===j.INVALID_STATE_ERR&&(ne=setTimeout(function(){B.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(we){if(!(we==null||we&&/^(VIDEO|AUDIO)$/i.test(we.nodeName)))throw"element is not video or audio DOM type!";(B=we)&&(B.preload="auto")},setPlaybackRate:function(we){var je=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!je&&B.readyState<=2&&we>0?B.addEventListener("canplay",ie):B.playbackRate=we)},setSource:function(we){B&&(we?B.src=we:(B.removeAttribute("src"),B.load()))},setStallState:function(we,je){(function(j,ue){ue?function(ae){ae!==null&&B&&!B.seeking&&ye.indexOf(ae)===-1&&ye.push(ae)}(j):function(ae){var se=ye.indexOf(ae);ae!==null&&se!==-1&&ye.splice(se,1)}(j)})(we,je)},setTTMLRenderingDiv:function(we){(J=we).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(we){H=we},waitForReadyState:Le,setDisableRemotePlayback:function(we){B&&(B.disableRemotePlayback=we)}},P=(0,N.Z)(fe).getInstance().getLogger(L),V=NaN,L}Mc.__dashjs_factory_name="VideoModel";var Sr=U.Z.getSingletonFactory(Mc),kl=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],vu="dashjs_?_bitrate",Kr="dashjs_?_settings",Ko="localStorage",Li="lastBitrate",Dm="lastMediaSettings";function Wh(L){L=L||{};var P,B,V,ee=this.context,J=L.settings;function H(ye){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[ye])}catch(me){return B.warn("DOMStorage access denied: "+me.message),V}if(!ie||ye!==Ko)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(me){B.warn("DOMStorage is supported, but cannot be used: "+me.message)}return V}function ne(){var ye=6e5;return Math.round(new Date().getTime()/ye)*ye}function fe(ye,ie){return H(ye)&&J.get().streaming[ie+"CachingInfo"].enabled}function Se(){if(!J)throw new Error(y.Z.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(ye){if(Se(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(fe(Ko,Li)){var me=vu.replace(/\?/,ye);try{var ge=JSON.parse(localStorage.getItem(me))||{},He=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,De=parseFloat(ge.bitrate);isNaN(De)||He?He&&localStorage.removeItem(me):(ie=De,B.debug("Last saved bitrate for "+ye+" was "+De))}catch(Be){return null}}return ie},setSavedBitrateSettings:function(ye,ie){if(fe(Ko,Li)&&ie){var me=vu.replace(/\?/,ye);try{localStorage.setItem(me,JSON.stringify({bitrate:ie.toFixed(3),timestamp:ne()}))}catch(ge){B.error(ge.message)}}},getSavedMediaSettings:function(ye){if(Se(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(fe(Ko,Dm)){var me=Kr.replace(/\?/,ye);try{var ge=JSON.parse(localStorage.getItem(me))||{},He=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ge.settings,He&&(localStorage.removeItem(me),ie=null)}catch(De){return null}}return ie},setSavedMediaSettings:function(ye,ie){if(fe(Ko,Dm)){var me=Kr.replace(/\?/,ye);try{localStorage.setItem(me,JSON.stringify({settings:ie,timestamp:ne()}))}catch(ge){B.error(ge.message)}}}},B=(0,N.Z)(ee).getInstance().getLogger(P),H(Ko)&&kl.forEach(function(ye){var ie=localStorage.getItem(ye.oldKey);if(ie){localStorage.removeItem(ye.oldKey);try{localStorage.setItem(ye.newKey,ie)}catch(me){B.error(me.message)}}}),P}Wh.__dashjs_factory_name="DOMStorage";var kE=U.Z.getSingletonFactory(Wh),Pm=w(2032),$h=w(2011);function Dc(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge=this.context;function He(Ee,Le,we,je){var j=null,ue=Ee?me.resolve(Ee.path):null,ae=je||{init:!0,url:ue?ue.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Le};P.debug("Start searching for initialization.");var se=Ye(ae);ne.load({request:se,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(j=V.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,He(Ee,Le,we,ae);Ee.range=j,we(Ee)},error:function(){we(Ee)}}),P.debug("Perform init search: "+ae.url)}function De(Ee,Le,we,je,j,ue){if(we&&(we.start===void 0||we.end===void 0)){var ae=we?we.toString().split("-"):null;we=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}j=j||Be;var se=null,Q=null,Me=!!we,Ie=Ee?me.resolve(Ee.path):null,ke={init:!1,url:Ie?Ie.url:void 0,range:Me?we:{start:0,end:1500},searching:!Me,bytesLoaded:ue?ue.bytesLoaded:0,bytesToLoad:1500,mediaType:Le},Re=Ye(ke);ne.load({request:Re,success:function(pe){var xe=ke.bytesToLoad,We=pe.byteLength;if(ke.bytesLoaded=ke.range.end-ke.range.start,se=V.parse(pe),(Q=se.getBox("sidx"))&&Q.isComplete){var dt,at,Je=Q.references;if(Je!=null&&Je.length>0&&(dt=Je[0].reference_type===1),dt){var ht,Bt,Gt,kt;P.debug("Initiate multiple SIDX load."),ke.range.end=ke.range.start+Q.size;var Ft=[],An=0,rt=(Q.offset||ke.range.start)+Q.size,vt=function(Nt){Nt?(Ft=Ft.concat(Nt),++An>=Bt&&(Ft.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),j(Ft,Ee,je))):j(null,Ee,je)};for(ht=0,Bt=Je.length;ht<Bt;ht++)Gt=rt,kt=rt+Je[ht].referenced_size-1,rt+=Je[ht].referenced_size,De(Ee,Le,{start:Gt,end:kt},je,vt,ke)}else P.debug("Parsing segments from SIDX. representation "+Le+" - id: "+Ee.id+" for range : "+ke.range.start+" - "+ke.range.end),at=function(Nt,en){for(var Jt,Yt,Dn,xn,rr=Nt.references,ir=rr.length,It=Nt.timescale,$t=Nt.earliest_presentation_time,Zt=en.range.start+Nt.offset+Nt.first_offset+Nt.size,un=[],vn=0;vn<ir;vn++)Dn=rr[vn].subsegment_duration,xn=rr[vn].referenced_size,(Jt=new $h.Z).duration=Dn,Jt.startTime=$t,Jt.timescale=It,Yt=Zt+xn-1,Jt.mediaRange=Zt+"-"+Yt,un.push(Jt),$t+=Dn,Zt+=xn;return un}(Q,ke),j(at,Ee,je)}else{if(Q)ke.range.start=Q.offset||ke.range.start,ke.range.end=ke.range.start+(Q.size||xe);else{if(We<ke.bytesLoaded)return void j(null,Ee,je);var Wt=se.getLastBox();Wt&&Wt.size?(ke.range.start=Wt.offset+Wt.size,ke.range.end=ke.range.start+xe):ke.range.end+=xe}De(Ee,Le,ke.range,je,null,ke)}},error:function(){j(null,Ee,je)}}),P.debug("Perform SIDX load for type ".concat(Le," : ").concat(ke.url," with range ").concat(ke.range.start," - ").concat(ke.range.end))}function Be(Ee,Le,we){we({segments:Ee,representation:Le,error:Ee?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function Ye(Ee){if(Ee.url){var Le=new Z.Z;return Le.setInfo(Ee),Le}}return L={setConfig:function(Ee){Ee.baseURLController&&(me=Ee.baseURLController),Ee.dashMetrics&&(J=Ee.dashMetrics),Ee.mediaPlayerModel&&(H=Ee.mediaPlayerModel),Ee.errHandler&&(B=Ee.errHandler),Ee.boxParser&&(V=Ee.boxParser),Ee.debug&&(P=Ee.debug.getLogger(L)),Ee.requestModifier&&(ee=Ee.requestModifier),Ee.errors&&(fe=Ee.errors),Ee.urlUtils&&(ie=Ee.urlUtils),Ee.constants&&(Se=Ee.constants),Ee.dashConstants&&(ye=Ee.dashConstants)},initialize:function(){ne=Io(ge).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:V,errors:fe,urlUtils:ie,constants:Se,dashConstants:ye})},loadInitialization:function(Ee,Le){return new Promise(function(we){He(Ee,Le,we)})},loadSegments:function(Ee,Le,we){return new Promise(function(je){De(Ee,Le,we,je)})},reset:function(){ne&&(ne.abort(),ne=null)}}}Dc.__dashjs_factory_name="SegmentBaseLoader";var Xa=U.Z.getSingletonFactory(Dc);function Xh(L){var P;L=L||{};var B=new DataView(L.data),V=0;function ee(H,ne){var fe=!0,Se=0;if(ne===void 0&&(ne=!1),H.tag>16777215?(B.getUint32(V)!==H.tag&&(fe=!1),Se=4):H.tag>65535?(256*B.getUint16(V)+B.getUint8(V+2)!==H.tag&&(fe=!1),Se=3):H.tag>255?(B.getUint16(V)!==H.tag&&(fe=!1),Se=2):(B.getUint8(V)!==H.tag&&(fe=!1),Se=1),!fe&&H.required&&!ne)throw new Error("required tag not found");return fe&&(V+=Se),fe}function J(H){var ne=1,fe=128,Se=-1,ye=0,ie=B.getUint8(V),me=0;for(me=0;me<8;me+=1){if((ie&fe)===fe){ye=H===void 0?ie&~fe:ie,Se=me;break}fe>>=1}for(me=0;me<Se;me+=1,ne+=1)ye=ye<<8|255&B.getUint8(V+ne);return V+=ne,ye}return P={getPos:function(){return V},setPos:function(H){V=H},consumeTag:ee,consumeTagAndSize:function(H,ne){var fe=ee(H,ne);return fe&&J(),fe},parseTag:function(H){var ne;return ee(H),ne=J(),P[H.parse](ne)},skipOverElement:function(H,ne){var fe,Se=ee(H,ne);return Se&&(fe=J(),V+=fe),Se},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var ne;switch(H){case 4:ne=B.getFloat32(V),V+=4;break;case 8:ne=B.getFloat64(V),V+=8}return ne},getMatroskaUint:function(H){if(H>4)return function(Se){for(var ye=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,me=0;me<Se;me+=1){if(ie>ye)throw new Error("Value exceeds safe integer limit");ie*=256;var ge=B.getUint8(V+me);if(ie>Number.MAX_SAFE_INTEGER-ge)throw new Error("Value exceeds safe integer limit");ie+=ge}return V+=Se,ie}(H);for(var ne=0,fe=0;fe<H;fe+=1)ne<<=8,ne|=255&B.getUint8(V+fe);return V+=H,ne>>>0},moreData:function(){return V<B.byteLength}}}Xh.__dashjs_factory_name="EBMLParser";var Pc=U.Z.getClassFactory(Xh);function Xu(){var L,P,B,V,ee,J,H,ne,fe,Se,ye=this.context;function ie(me){var ge=new Z.Z;return ge.setInfo(me),ge}return L={setConfig:function(me){if(!(me.baseURLController&&me.dashMetrics&&me.mediaPlayerModel&&me.errHandler))throw new Error(y.Z.MISSING_CONFIG_ERROR);Se=me.baseURLController,J=me.dashMetrics,H=me.mediaPlayerModel,V=me.errHandler,fe=me.errors,P=me.debug.getLogger(L),ee=me.requestModifier},initialize:function(){ne=Io(ye).create({errHandler:V,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:fe})},loadInitialization:function(me,ge){return new Promise(function(He){var De=null,Be=me?Se.resolve(me.path):null,Ye=me?me.range.split("-"):null,Ee={range:{start:Ye?parseFloat(Ye[0]):null,end:Ye?parseFloat(Ye[1]):null},request:De,url:Be?Be.url:void 0,init:!0,mediaType:ge};P.info("Start loading initialization."),De=ie(Ee),ne.load({request:De,success:function(){He(me)},error:function(){He(me)}}),P.debug("Perform init load: "+Ee.url)})},loadSegments:function(me,ge,He){return new Promise(function(De){var Be=null,Ye=me?Se.resolve(me.path):null,Ee=Ye?Ye.url:void 0;Be=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Be,url:Ee,init:!1,mediaType:ge}),P.debug("Parsing ebml header"),ne.load({request:Be,success:function(Le){(function(we,je,j,ue){if(we&&we.byteLength!==0){var ae,se,Q,Me,Ie=Pc(ye).create({data:we}),ke=j?j.split("-"):null,Re=null,pe={url:je,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:Re};for(P.debug("Parse EBML header: "+pe.url),Ie.skipOverElement(B.EBML),Ie.consumeTag(B.Segment),Q=Ie.getMatroskaCodedNum(),Q+=Ie.getPos(),Me=Ie.getPos();Ie.moreData()&&!Ie.consumeTagAndSize(B.Segment.Info,!0);)if(!(Ie.skipOverElement(B.Segment.SeekHead,!0)||Ie.skipOverElement(B.Segment.Tracks,!0)||Ie.skipOverElement(B.Segment.Cues,!0)||Ie.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var xe=Ie.getMatroskaCodedNum(!0),We=Ie.getMatroskaCodedNum();xe===B.Segment.Info.Duration.tag?ae=Ie[B.Segment.Info.Duration.parse](We):Ie.setPos(Ie.getPos()+We)}Re=ie(pe),ne.load({request:Re,success:function(dt){se=function(at,Je,ht,Bt){var Gt,kt,Ft,An,rt,vt,Wt,Nt;for(Ft=[],rt=0,vt=(kt=function(en){var Jt,Yt,Dn=[],xn=Pc(ye).create({data:en});for(xn.consumeTagAndSize(B.Segment.Cues);xn.moreData()&&xn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=xn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];xn.moreData()&&xn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=xn.getMatroskaCodedNum(),ir=xn.getPos();if((Yt={}).Track=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Yt.Track===0)throw new Error("Cue track cannot be 0");Yt.ClusterPosition=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Yt),xn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(at)).length;rt<vt;rt+=1)An=new $h.Z,Gt=rt<kt.length-1?kt[rt+1].CueTime-kt[rt].CueTime:Bt-kt[rt].CueTime,An.duration=Gt,An.startTime=kt[rt].CueTime,An.timescale=1e3,Wt=kt[rt].CueTracks[0].ClusterPosition+Je,Nt=rt<kt.length-1?kt[rt+1].CueTracks[0].ClusterPosition+Je-1:ht-1,An.mediaRange=Wt+"-"+Nt,Ft.push(An);return P.debug("Parsed cues: "+Ft.length+" cues."),Ft}(dt,Me,Q,ae),ue(se)},error:function(){P.error("Download Error: Cues "+pe.url),ue(null)}}),P.debug("Perform cues load: "+pe.url+" bytes="+pe.range.start+"-"+pe.range.end)}else ue(null)})(Le,Ee,He,function(we){De({segments:we,representation:me,error:we?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){De({representation:me,error:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){ne&&(ne.abort(),ne=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}Xu.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=U.Z.getSingletonFactory(Xu);function zf(L){L=L||{};var P,B,V,ee=this.context,J=L.eventBus,H=L.events,ne=L.dashMetrics,fe=L.mediaPlayerModel,Se=L.errHandler,ye=L.baseURLController,ie=L.debug,me=L.boxParser,ge=L.requestModifier,He=L.errors;function De(Be){return(Be?Be.split("/")[1]:"").toLowerCase()==="webm"}return P={initialize:function(){B.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Be){return De(Be.representation.mimeType)?V.loadInitialization(Be.representation,Be.mediaType):B.loadInitialization(Be.representation,Be.mediaType)},getSegmentList:function(Be){return De(Be.mimeType)?V.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null):B.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null)},reset:function(){B.reset(),V.reset()}},B=Xa(ee).getInstance(),V=jr(ee).getInstance(),B.setConfig({baseURLController:ye,dashMetrics:ne,mediaPlayerModel:fe,errHandler:Se,eventBus:J,events:H,errors:He,debug:ie,boxParser:me,requestModifier:ge}),V.setConfig({baseURLController:ye,dashMetrics:ne,mediaPlayerModel:fe,errHandler:Se,eventBus:J,events:H,errors:He,debug:ie,requestModifier:ge}),P}zf.__dashjs_factory_name="SegmentBaseController";var FE=U.Z.getSingletonFactory(zf),Fl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Oc=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Bs=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Om(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var kr=function(){function L(V){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=V[0]=="/",this.path=V.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},ne=J.indexOf("[");if(ne!=-1){H.name=J.substring(0,ne);var fe=J.substring(ne+1,J.length-1);ee.valid=ee.valid&&fe.indexOf("[")==-1;var Se=fe.indexOf("=");Se!=-1?(H.attribute={name:fe.substring(1,Se),value:fe.substring(Se+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(fe,10)-1}return H})}var P,B;return P=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,ee){for(var J=null,H=V,ne=1,fe="MPD";ne<this.path.length&&H!==null;){J=H;var Se=this.path[ne];if(fe=Se.name,ne!==this.path.length-1||!fe.startsWith("@")&&fe!=="text()"){var ye=J[fe+"_asArray"]||[];ye.length===0&&J[fe]&&ye.push(J[fe]),Se.position?H=ye[Se.position]||null:Se.attribute?function(){var ie=Se.attribute;H=ye.filter(function(me){return me[ie.name]==ie.value})[0]||null}():H=ye[0]||null}ne++}return H===null?null:fe.startsWith("@")?{name:fe.substring(1),leaf:H,target:H}:fe==="text()"?{name:"__text",leaf:H,target:H}:{name:fe,leaf:H,target:ee?J:H}}}])&&Om(P.prototype,B),L}();function yr(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var yu=function(){function L(V,ee,J){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=V,this.xpath=ee,this.value=J,this.position=null}var P,B;return P=L,(B=[{key:"getMpdTarget",value:function(V){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,ee)}}])&&yr(P.prototype,B),L}();function wi(){var L,P,B=this.context;return L={getIsPatch:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(V[v.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[v.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[v.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return P.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],ne=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return P.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;ne="".concat(ne,"/").concat(H.type)}var fe=new kr(ne);if(!fe.isValid())return P.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(ne)),null;var Se=null;fe.findsAttribute()||fe.findsTextReplace()?Se=H.__text||"":J!=="remove"&&(Se=H.__children.reduce(function(ie,me){var ge=Object.keys(me)[0];return ge!=="#text"&&(ie[ge]=ie[ge]||[],ie[ge].push(me[ge])),ie},{}));var ye=new yu(J,fe,Se);return J==="add"&&(ye.position=H.pos),ye}).filter(function(ee){return!!ee}):[]}},P=(0,N.Z)(B).getInstance().getLogger(L),L}wi.__dashjs_factory_name="PatchManifestModel";var Qh=U.Z.getSingletonFactory(wi);function Qu(){var L,P,B,V,ee,J,H,ne=this.context;function fe(ae,se,Q){var Me,Ie=P.getAdaptationsForType(V[0].mpd.manifest,ae,se);if(!Ie||Ie.length===0)return null;if(Ie.length>1&&Q){var ke=ie(Q,se);if(ee[Q.id]&&ee[Q.id][se]){for(var Re=0,pe=Ie.length;Re<pe;Re++)if(Se(ee[Q.id][se],ke[Re]))return Ie[Re]}for(var xe=0,We=Ie.length;xe<We;xe++)if(Me=Ie[xe],P.getRolesForAdaptation(Me).filter(function(dt){return dt.value===v.Z.MAIN})[0])return Ie[xe]}return Ie[0]}function Se(ae,se){if(!ae||!se)return!1;var Q=ae.id===se.id,Me=ae.codec===se.codec,Ie=ae.viewpoint===se.viewpoint,ke=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(se.viewpointsWithSchemeIdUri),Re=ae.lang===se.lang,pe=ae.roles.toString()===se.roles.toString(),xe=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(se.rolesWithSchemeIdUri),We=ae.accessibility.toString()===se.accessibility.toString(),dt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(se.accessibilitiesWithSchemeIdUri),at=ae.audioChannelConfiguration.toString()===se.audioChannelConfiguration.toString(),Je=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(se.audioChannelConfigurationsWithSchemeIdUri);return Q&&Me&&Ie&&ke&&Re&&pe&&xe&&We&&dt&&at&&Je}function ye(ae,se,Q,Me,Ie,ke){var Re,pe,xe,We,dt,at,Je=[];if(!Me||Me.length===0)return[];var ht=P.getAdaptationsForPeriod(se);for(We=0,at=Me.length;We<at;We++)if(Re=Me[We],pe=Ee(ht[xe=P.getIndexForAdaptation(Re,ae,Q.index)]),ke){var Bt=pe.accessibility.length;for(dt=0;dt<Bt;dt++)if(pe){var Gt=pe.accessibility[dt];if(Gt.indexOf("cea-608:")===0){var kt=Gt.substring(8).split(";");if(kt[0].substring(0,2)==="CC")for(dt=0;dt<kt.length;dt++)pe||(pe=Ee.call(this,ht[xe])),Le(pe,kt[dt].substring(0,3),kt[dt].substring(4)),Je.push(pe),pe=null;else for(dt=0;dt<kt.length;dt++)pe||(pe=Ee.call(this,ht[xe])),Le(pe,"CC"+(dt+1),kt[dt]),Je.push(pe),pe=null}else Gt.indexOf("cea-608")===0&&(Le(pe,J.CC1,"eng"),Je.push(pe),pe=null)}}else Ie===J.IMAGE?(pe.type=J.IMAGE,Je.push(pe),pe=null):pe&&Je.push(pe);return Je}function ie(ae,se,Q){var Me=V,Ie=Q,ke=[];if(Ie)je(),Me=me(Ie);else{if(!(V.length>0))return ke;Ie=V[0].mpd.manifest}var Re=Ye(ae,Me),pe=P.getAdaptationsForType(Ie,ae?ae.index:null,se);return ke=ye(Ie,Re,ae,pe,se),se===J.TEXT&&(pe=P.getAdaptationsForType(Ie,ae?ae.index:null,J.VIDEO),ke=ke.concat(ye(Ie,Re,ae,pe,se,!0))),ke}function me(ae){var se=ge(ae);return P.getRegularPeriods(se)}function ge(ae){var se=De(ae);return P.getMpd(se)}function He(){V=[],ee={}}function De(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Be(ae){try{var se=Ye(ae.streamInfo,V),Q=P.getAdaptationsForPeriod(se);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Me){return null}}function Ye(ae,se){for(var Q=se.length,Me=0;Me<Q;Me++){var Ie=se[Me];if(ae&&ae.id===Ie.id)return Ie}return null}function Ee(ae){if(!ae)return null;var se,Q,Me,Ie,ke,Re=new Oc,pe=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Re.id=ae.id,Re.index=ae.index,Re.type=ae.type,Re.streamInfo=we(ae.period),Re.representationCount=P.getRepresentationCount(pe),Re.labels=P.getLabelsForAdaptation(pe),Re.lang=P.getLanguageForAdaptation(pe),Re.segmentAlignment=P.getSegmentAlignment(pe),Re.subSegmentAlignment=P.getSubSegmentAlignment(pe),se=P.getViewpointForAdaptation(pe),Re.viewpoint=se.length?se[0].value:void 0,Re.viewpointsWithSchemeIdUri=se,ke=P.getAccessibilityForAdaptation(pe),Re.accessibility=ke.map(function(Je){var ht=Je.value,Bt=ht;return Je.schemeIdUri&&Je.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(Bt=ht?"cea-608:"+ht:"cea-608",Re.embeddedCaptions=!0),Bt}),Re.accessibilitiesWithSchemeIdUri=ke,Q=P.getAudioChannelConfigurationForAdaptation(pe),Re.audioChannelConfiguration=Q.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Q,Re.audioChannelConfiguration.length===0&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0&&(Me=P.getAudioChannelConfigurationForRepresentation(pe.Representation_asArray[0]),Re.audioChannelConfiguration=Me.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Me),Ie=P.getRolesForAdaptation(pe),Re.roles=Ie.map(function(Je){return Je.value}),Re.rolesWithSchemeIdUri=Ie,Re.codec=P.getCodec(pe),Re.mimeType=P.getMimeType(pe),Re.contentProtection=P.getContentProtectionData(pe),Re.bitrateList=P.getBitrateListForAdaptation(pe),Re.selectionPriority=P.getSelectionPriority(pe),Re.contentProtection){var xe=Re.contentProtection.map(function(Je){return P.getKID(Je)}).filter(function(Je){return Je!==null});if(xe.length){var We=xe[0];Re.contentProtection.forEach(function(Je){Je.keyId=We})}}if(Re.isText=P.getIsText(pe),Re.supplementalProperties=P.getSupplementalPropertiesForAdaptation(pe),(!Re.supplementalProperties||Object.keys(Re.supplementalProperties).length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var dt=pe.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesForRepresentation(Je)});dt.every(function(Je){return JSON.stringify(Je)===JSON.stringify(dt[0])})&&(Re.supplementalProperties=dt[0])}if(Re.supplementalPropertiesAsArray=P.getSupplementalPropertiesAsArrayForAdaptation(pe),(!Re.supplementalPropertiesAsArray||Re.supplementalPropertiesAsArray.length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var at=pe.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesAsArrayForRepresentation(Je)});at.every(function(Je){return JSON.stringify(Je)===JSON.stringify(at[0])})&&(Re.supplementalPropertiesAsArray=at[0])}return Re.essentialProperties=P.getEssentialPropertiesForAdaptation(pe),Re.essentialPropertiesAsArray=P.getEssentialPropertiesAsArrayForAdaptation(pe),Re.isFragmented=P.getIsFragmented(pe),Re.isEmbedded=!1,Re}function Le(ae,se,Q){ae.id=se,ae.index=100+parseInt(se.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Me=yi()(Q);ae.lang=Me||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function we(ae){var se,Q,Me=new Dr;return Me.id=ae.id,Me.index=ae.index,Me.start=ae.start,Me.duration=ae.duration,Me.manifestInfo=(se=ae.mpd,(Q=new Bs).dvrWindowSize=se.timeShiftBufferDepth,Q.loadedTime=se.manifest.loadedTime,Q.availableFrom=se.availabilityStartTime,Q.minBufferTime=se.manifest.minBufferTime,Q.maxFragmentDuration=se.maxSegmentDuration,Q.duration=P.getDuration(se.manifest),Q.isDynamic=P.getIsDynamic(se.manifest),Q.serviceDescriptions=P.getServiceDescriptions(se.manifest),Q.protocol=se.manifest.protocol,Q),Me.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Me.start+Me.duration-Me.manifestInfo.duration)<1,Me}function je(){if(!J)throw new Error("setConfig function has to be called previously")}function j(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function ue(ae,se,Q){var Me,Ie,ke,Re,pe;if(ae){for(Me=ae.AdaptationSet_asArray,Re=0;Re<Me.length;Re+=1)for(ke=Me[Re].Representation_asArray,pe=0;pe<ke.length;pe+=1)if(se===(Ie=ke[pe]).id)return Q?pe:Ie}return null}return L={getBandwidthForRepresentation:function(ae,se){var Q;return(Q=ue(j(se),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,se){return function(Q,Me){var Ie=ue(Q,Me,!0);return Ie!==null?Ie:-1}(j(se),ae)},getMaxIndexForBufferType:function(ae,se){return function(Q,Me){var Ie,ke,Re,pe;if(!Q||!Me)return-1;for(ke=Q.AdaptationSet_asArray,pe=0;pe<ke.length;pe+=1)if(Re=(Ie=ke[pe]).Representation_asArray,P.getIsTypeOf(Ie,Me))return Re.length;return-1}(j(se),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var se=new Fl,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Me=P.getRepresentationFor(ae.index,Q);return se.id=ae.id,se.quality=ae.index,se.bandwidth=P.getBandwidth(Me),se.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),se.MSETimeOffset=ae.MSETimeOffset,se.mediaInfo=Ee(ae.adaptation),se}return null},getStreamsInfo:function(ae,se){var Q=[],Me=V;if(ae&&(je(),Me=me(ae)),Me.length>0){(!se||se>Me.length)&&(se=Me.length);for(var Ie=0;Ie<se;Ie++)Q.push(we(Me[Ie]))}return Q},getMediaInfoForType:function(ae,se){if(V.length===0||!ae)return null;var Q=Ye(ae,V);if(!Q)return null;var Me=P.getAdaptationsForPeriod(Q),Ie=fe(ae.index,se,ae);return Ie?Ee(Me[P.getIndexForAdaptation(Ie,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:fe,getRealAdaptation:function(ae,se){var Q,Me,Ie=Ye(ae,V);return Q=se?se.id:null,V.length>0&&Ie&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,Ie.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,Ie.index)),Me},getProducerReferenceTimes:function(ae,se){var Q,Me,Ie=Ye(ae,V);return Q=se?se.id:null,V.length>0&&Ie&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,Ie.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,Ie.index)),Me?P.getProducerReferenceTimesForAdaptation(Me):[]},getRealPeriodByIndex:function(ae){return P.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return P.getEssentialPropertiesForRepresentation(ae)}catch(se){return[]}},getVoRepresentations:function(ae){var se=Be(ae);return P.getRepresentationsForAdaptation(se)},getEventsFor:function(ae,se,Q){var Me=[];if(V.length>0){var Ie=V[0].mpd.manifest;if(ae instanceof Dr){var ke=Ye(ae,V);Me=P.getEventsForPeriod(ke)}else if(ae instanceof Oc){var Re=Ye(Q,V);Me=P.getEventStreamForAdaptationSet(Ie,Be(ae),Re)}else if(ae instanceof Fl){var pe=Ye(Q,V);Me=P.getEventStreamForRepresentation(Ie,se,pe)}}return Me},getEvent:function(ae,se,Q,Me){try{if(!ae||!se||isNaN(Q)||!Me)return null;var Ie=ae.scheme_id_uri,ke=ae.value;if(!se[Ie+"/"+ke])return null;var Re,pe=new no,xe=ae.timescale||1,We=Me.adaptation.period.start,dt=se[Ie+"/"+ke],at=isNaN(Me.presentationTimeOffset)?isNaN(dt.presentationTimeOffset)?0:dt.presentationTimeOffset:Me.presentationTimeOffset,Je=ae.presentation_time_delta/xe;Re=ae.version===0?We+Q-at+Je:We-at+Je;var ht=ae.event_duration/xe,Bt=ae.id,Gt=ae.message_data;return pe.eventStream=dt,pe.eventStream.value=ke,pe.eventStream.timescale=xe,pe.duration=ht,pe.id=Bt,pe.calculatedPresentationTime=Re,pe.messageData=Gt,pe.presentationTimeDelta=Je,pe}catch(kt){return null}},getMpd:ge,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&P.setConfig({errHandler:ae.errHandler}),ae.BASE64&&P.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;je(),V=me(ae)},getIsTextTrack:function(ae){return P.getIsText(ae)},getUTCTimingSources:function(){var ae=De();return P.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return P.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var se=ge(ae);return P.getAvailabilityStartTime(se)},getIsTypeOf:function(ae,se){return P.getIsTypeOf(ae,se)},getIsDynamic:function(ae){var se=De(ae);return P.getIsDynamic(se)},getDuration:function(ae){var se=De(ae);return P.getDuration(se)},getRegularPeriods:me,getContentSteering:function(ae){return P.getContentSteering(ae)},getLocation:function(ae){return P.getLocation(ae)},getPatchLocation:function(ae){var se=P.getPatchLocation(ae),Q=P.getPublishTime(ae);return se&&se.length!==0&&Q?se.filter(function(Me){return isNaN(Me.ttl)||Q.getTime()+Me.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return P.getManifestUpdatePeriod(ae,se)},getPublishTime:function(ae){return P.getPublishTime(ae)},getIsDVB:function(ae){return P.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return P.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return P.getRepresentationSortFunction()},getCodec:function(ae,se,Q){return P.getCodec(ae,se,Q)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var se=V.filter(function(Q){return Q.id===ae});return se&&se.length>0?se[0]:null},setCurrentMediaInfo:function(ae,se,Q){ee[ae]=ee[ae]||{},ee[ae][se]=ee[ae][se]||{},ee[ae][se]=Q},isPatchValid:function(ae,se){var Q=P.getId(ae),Me=B.getMpdId(se),Ie=P.getPublishTime(ae),ke=B.getPublishTime(se),Re=B.getOriginalPublishTime(se);return!!(Q&&Me&&Q==Me&&Ie&&Re&&Ie.getTime()==Re.getTime()&&ke&&Ie.getTime()<ke.getTime())},applyPatchToManifest:function(ae,se){B.getPatchOperations(se).forEach(function(Q){var Me=Q.getMpdTarget(ae);if(Me!==null){var Ie=Me.name,ke=Me.target,Re=Me.leaf;if(Q.xpath.findsAttribute()||Ie==="__text")switch(Q.action){case"add":case"replace":ke[Ie]=Q.value;break;case"remove":delete ke[Ie]}else{var pe=(ke[Ie+"_asArray"]||[]).indexOf(Re),xe=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete ke[Ie],pe!=-1)){var We=ke[Ie+"_asArray"];We.splice(pe,1),We.length>1?ke[Ie]=We:We.length==1?ke[Ie]=We[0]:delete ke[Ie+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(dt){var at=Q.value[dt],Je=ke[dt+"_asArray"]||[];if(Je.length===0&&ke[dt]&&Je.push(ke[dt]),Je.length===0)Je=at;else{var ht=Je.length;ht=dt==Ie&&pe!=-1?pe+(xe?0:1)+(Q.action=="replace"?-1:0):xe?0:Je.length,Je.splice.apply(Je,[ht,0].concat(at))}ke[dt+"_asArray"]=Je,ke[dt]=Je.length==1?Je[0]:Je})}}})},areMediaInfosEqual:Se,reset:He},P=Vn(ne).getInstance(),B=Qh(ne).getInstance(),He(),L}Qu.__dashjs_factory_name="DashAdapter";var Lm=U.Z.getSingletonFactory(Qu);function Yf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ul=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var P,B;return P=L,B=[{key:"round10",value:function(V,ee){return function(J,H,ne){return ne===void 0||+ne==0?Math[J](H):(ne=+ne,(H=+H)===null||isNaN(H)||typeof ne!="number"||ne%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-ne:-ne)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+ne:ne))))}("round",V,ee)}}],B&&Yf(P,B),L}(),UE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},km=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},Fm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},Wf=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=D.Z.BUFFER_EMPTY},Jh=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Bl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Lc(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var BE=function L(){Lc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},$f=function L(){Lc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},jE=function L(){Lc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Wr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ri=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function Eu(L){var P,B,V=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function ne(ge){J.trigger(T.Z.METRIC_CHANGED,{mediaType:ge}),H()}function fe(ge,He,De){J.trigger(T.Z.METRIC_UPDATED,{mediaType:ge,metric:He,value:De}),ne(ge)}function Se(ge,He,De){J.trigger(T.Z.METRIC_ADDED,{mediaType:ge,metric:He,value:De}),ne(ge)}function ye(ge,He){var De=null;return ge&&(B.hasOwnProperty(ge)?De=B[ge]:He||(De=new UE,B[ge]=De)),De}function ie(ge,He,De){var Be=ye(ge);Be!==null&&(Be[He].push(De),Be[He].length>V.get().streaming.metrics.maxListDepth&&Be[He].shift())}function me(ge,He,De){ie(ge,He,De),Se(ge,He,De)}return P={clearCurrentMetricsForType:function(ge){delete B[ge],ne(ge)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:ye,addHttpRequest:function ge(He,De,Be,Ye,Ee,Le,we,je,j,ue,ae,se,Q,Me,Ie,ke,Re){var pe=new nt.w;Le!=null&&Le!==Ye&&(ge(He,null,Be,Ye,Ee,null,null,je,j,null,null,null,Q,null,null,ke,Re),pe.actualurl=Le),pe.tcpid=De,pe.type=Be,pe.url=Ye,pe.range=je,pe.trequest=j,pe.tresponse=ue,pe.responsecode=se,pe.cmsd=Re,pe._tfinish=ae,pe._stream=He,pe._mediaduration=Q,pe._quality=Ee,pe._responseHeaders=Me,pe._serviceLocation=we,pe._fileLoaderType=ke,Ie?Ie.forEach(function(xe){(function(We,dt,at,Je){var ht=new nt.O;ht.s=dt,ht.d=at,ht.b=Je,We.trace.push(ht),We.interval||(We.interval=0),We.interval+=at})(pe,xe.s,xe.d,xe.b)}):(delete pe.interval,delete pe.trace),me(He,D.Z.HTTP_REQUEST,pe)},addRepresentationSwitch:function(ge,He,De,Be,Ye){var Ee=new km;Ee.t=He,Ee.mt=De,Ee.to=Be,Ye?Ee.lto=Ye:delete Ee.lto,me(ge,D.Z.TRACK_SWITCH,Ee)},addBufferLevel:function(ge,He,De){var Be=new Fm;Be.t=He,Be.level=De,me(ge,D.Z.BUFFER_LEVEL,Be)},addBufferState:function(ge,He,De){var Be=new Wf;Be.target=De,Be.state=He,me(ge,D.Z.BUFFER_STATE,Be)},addDVRInfo:function(ge,He,De,Be){var Ye=new Jh;Ye.time=He,Ye.range=Be,Ye.manifestInfo=De,me(ge,D.Z.DVR_INFO,Ye)},addDroppedFrames:function(ge,He){var De=new Bl,Be=ye(ge).DroppedFrames;He&&(De.time=He.creationTime,De.droppedFrames=He.droppedVideoFrames,Be.length>0&&Be[Be.length-1]==De||me(ge,D.Z.DROPPED_FRAMES,De))},addSchedulingInfo:function(ge,He,De,Be,Ye,Ee,Le,we,je){var j=new Wr;j.mediaType=ge,j.t=He,j.type=De,j.startTime=Be,j.availabilityStartTime=Ye,j.duration=Ee,j.quality=Le,j.range=we,j.state=je,me(ge,D.Z.SCHEDULING_INFO,j)},addRequestsQueue:function(ge,He,De){var Be=new Ri;Be.loadingRequests=He,Be.executedRequests=De,ye(ge).RequestsQueue=Be,Se(ge,D.Z.REQUESTS_QUEUE,Be)},addManifestUpdate:function(ge,He,De,Be,Ye,Ee,Le,we,je,j){var ue=new BE;ue.mediaType=ge,ue.type=He,ue.requestTime=De,ue.fetchTime=Be,ue.availabilityStartTime=Ye,ue.presentationStartTime=Ee,ue.clientTimeOffset=Le,ue.currentTime=we,ue.buffered=je,ue.latency=j,ie(y.Z.STREAM,D.Z.MANIFEST_UPDATE,ue),Se(ge,D.Z.MANIFEST_UPDATE,ue)},updateManifestUpdateInfo:function(ge,He){if(ge){for(var De in He)ge[De]=He[De];fe(ge.mediaType,D.Z.MANIFEST_UPDATE,ge)}},addManifestUpdateStreamInfo:function(ge,He,De,Be,Ye){if(ge){var Ee=new $f;Ee.id=He,Ee.index=De,Ee.start=Be,Ee.duration=Ye,ge.streamInfo.push(Ee),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_STREAM_INFO,ge)}},addManifestUpdateRepresentationInfo:function(ge,He,De,Be,Ye,Ee,Le,we){if(ge&&ge.representationInfo){var je=new jE;je.id=He,je.index=De,je.streamIndex=Be,je.mediaType=Ye,je.startNumber=Le,je.fragmentInfoType=we,je.presentationTimeOffset=Ee,ge.representationInfo.push(je),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_TRACK_INFO,ge)}},addPlayList:function(ge){ge.trace&&Array.isArray(ge.trace)?ge.trace.forEach(function(He){He.hasOwnProperty("subreplevel")&&!He.subreplevel&&delete He.subreplevel}):delete ge.trace,me(y.Z.STREAM,D.Z.PLAY_LIST,ge)},addDVBErrors:function(ge){me(y.Z.STREAM,D.Z.DVB_ERRORS,ge)}},B={},P}Eu.__dashjs_factory_name="MetricsModel";var xa=U.Z.getSingletonFactory(Eu);function la(L){L=L||{};var P,B,V,ee,J=this.context,H=L.metricsModel;function ne(ye){var ie=H.getMetricsFor(ye,!0);if(!ie)return null;var me,ge=ie.HttpList,He=null;if(!ge||ge.length<=0)return null;for(me=ge.length-1;me>=0;){if(ge[me].responsecode){He=ge[me];break}me--}return He}function fe(ye){var ie=H.getMetricsFor(ye,!0);return ie&&ie.HttpList?ie.HttpList:[]}function Se(ye,ie){if(!ye)return null;var me=ye[ie];return me&&me.length!==0?me[me.length-1]:null}return P={getCurrentRepresentationSwitch:function(ye){return Se(H.getMetricsFor(ye,!0),D.Z.TRACK_SWITCH)},getCurrentBufferState:function(ye){return Se(H.getMetricsFor(ye,!0),D.Z.BUFFER_STATE)},getCurrentBufferLevel:function(ye){var ie=Se(H.getMetricsFor(ye,!0),D.Z.BUFFER_LEVEL);return ie?Ul.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:ne,getHttpRequests:fe,getCurrentDroppedFrames:function(){return Se(H.getMetricsFor(y.Z.VIDEO,!0),D.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(ye){return Se(H.getMetricsFor(ye,!0),D.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(ye){return Se(ye?H.getMetricsFor(ye,!0):H.getMetricsFor(y.Z.VIDEO,!0)||H.getMetricsFor(y.Z.AUDIO,!0),D.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Se(H.getMetricsFor(y.Z.STREAM),D.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(ye,ie){if(!ie)return null;var me={},ge=ne(ye);ge&&(me=rn.Z.parseHttpHeaders(ge._responseHeaders));var He=me[ie.toLowerCase()];return He===void 0?null:He},getLatestMPDRequestHeaderValueByID:function(ye){if(!ye)return null;var ie,me,ge,He={};for(ge=(ie=fe(y.Z.STREAM)).length-1;ge>=0;ge--)if((me=ie[ge]).type===nt.w.MPD_TYPE){He=rn.Z.parseHttpHeaders(me._responseHeaders);break}var De=He[ye.toLowerCase()];return De===void 0?null:De},addRepresentationSwitch:function(ye,ie,me,ge,He){H.addRepresentationSwitch(ye,ie,me,ge,He)},addDVRInfo:function(ye,ie,me,ge){H.addDVRInfo(ye,ie,me,ge)},updateManifestUpdateInfo:function(ye){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,ye)},addManifestUpdateStreamInfo:function(ye){if(ye){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,ye.id,ye.index,ye.start,ye.duration)}},addManifestUpdateRepresentationInfo:function(ye,ie){if(ye){var me=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(me,ye.id,ye.index,ye.streamIndex,ie,ye.presentationTimeOffset,ye.startNumber,ye.fragmentInfoType)}},addManifestUpdate:function(ye){H.addManifestUpdate(y.Z.STREAM,ye.type,ye.requestStartDate,ye.requestEndDate)},addHttpRequest:function(ye,ie,me,ge,He,De){H.addHttpRequest(ye.mediaType,null,ye.type,ye.url,ye.quality,ie,ye.serviceLocation||null,ye.range||null,ye.requestStartDate,ye.firstByteDate,ye.requestEndDate,me,ye.duration,ge,He,ye.fileLoaderType,De)},addSchedulingInfo:function(ye,ie){H.addSchedulingInfo(ye.mediaType,new Date,ye.type,ye.startTime,ye.availabilityStartTime,ye.duration,ye.quality,ye.range,ie)},addRequestsQueue:function(ye,ie,me){H.addRequestsQueue(ye,ie,me)},addBufferLevel:function(ye,ie,me){H.addBufferLevel(ye,ie,me)},addBufferState:function(ye,ie,me){H.addBufferState(ye,ie,me)},addDroppedFrames:function(ye){H.addDroppedFrames(y.Z.VIDEO,ye)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(ye){H.addDVBErrors(ye)},createPlaylistMetrics:function(ye,ie){(ee=new it).start=new Date,ee.mstart=ye,ee.starttype=ie},createPlaylistTraceMetrics:function(ye,ie,me){B===!0&&(B=!1,(V=new et).representationid=ye,V.start=new Date,V.mstart=ie,V.playbackspeed=me!==null?me.toString():null)},updatePlayListTraceMetrics:function(ye){if(V)for(var ie in V)V[ie]=ye[ie]},pushPlayListTraceMetrics:function(ye,ie){if(B===!1&&ee&&V&&V.start){var me=V.start,ge=ye.getTime()-me.getTime();V.duration=ge,V.stopreason=ie,ee.trace.push(V),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||xa(J).getInstance({settings:L.settings}),B=!0,V=null,ee=null,P}la.__dashjs_factory_name="DashMetrics";var js=U.Z.getSingletonFactory(la);function _r(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Ze.Z)(ee).getInstance();function ne(Ye){V=Ye}function fe(Ye,Ee,Le,we){var je,j=Ee.adaptation.period.mpd,ue=j.availabilityStartTime;if(we)je=Le&&j.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(ue.getTime()+1e3*(Ye+j.timeShiftBufferDepth)):j.availabilityEndTime;else if(Le){var ae=Ee.availabilityTimeOffset;je=new Date(ue.getTime()+1e3*(Ye-ae))}else je=ue;return je}function Se(Ye,Ee){return(Ye.getTime()-Ee.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function ye(Ye,Ee){return Ye+(Ee.adaptation.period.start-Ee.presentationTimeOffset)}function ie(Ye){var Ee={start:NaN,end:NaN},Le=Ye[0].getAdapter().getRegularPeriods()[0],we=Se(new Date,Le);if(!Ye||Ye.length===0)return{range:Ee,now:we};Ye.forEach(function(j){var ue=j.getAdapter(),ae=ue.getMediaInfoForType(j.getStreamInfo(),y.Z.VIDEO)||ue.getMediaInfoForType(j.getStreamInfo(),y.Z.AUDIO),se=ue.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(se)if(se.segmentInfoType===v.Z.SEGMENT_TIMELINE)Q=function(Ie){var ke,Re,pe,xe,We=Ie.adaptation.period.mpd.manifest.Period_asArray[Ie.adaptation.period.index].AdaptationSet_asArray[Ie.adaptation.index],dt=P.getRepresentationFor(Ie.index,We),at=dt.SegmentTemplate||dt.SegmentList,Je=at.SegmentTimeline,ht=at.timescale,Bt=Je.S_asArray,Gt={start:0,end:0},kt=Bt[0].t,Ft=!isNaN(kt),An=Ft?kt:0,rt=0;for(Ft&&(Gt.start=ye(An/ht,Ie)),pe=0,xe=Bt.length;pe<xe;pe++)Re=0,(ke=Bt[pe]).hasOwnProperty("r")&&(Re=ke.r),rt+=ke.d*(1+Re);return Gt.end=ye((An+rt)/ht,Ie),Gt}(se);else{var Me=se.adaptation.period;Q.start=Me.start,Q.end=Math.max(we,Me.start+Me.duration)}!isNaN(Q.start)&&(isNaN(Ee.start)||Ee.start>Q.start)&&(Ee.start=Q.start),!isNaN(Q.end)&&(isNaN(Ee.end)||Ee.end<Q.end)&&(Ee.end=Q.end)}),Ee.end=Math.min(we,Ee.end);var je=ge(Ye,Ee.end,!0);return Ee.end=isNaN(je)?Ee.end:je,Ee.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(Ee.end)?Math.max(Ee.end-Le.mpd.timeShiftBufferDepth,Ee.start):Ee.start,Ee.start=ge(Ye,Ee.start),{range:Ee,now:we}}function me(Ye,Ee){B=Ye-Ee.end}function ge(Ye,Ee){var Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var we=0,je=!1,j=NaN;!je&&we<Ye.length;){var ue=Ye[we].getStreamInfo();ue.start<=Ee&&(!isFinite(ue.duration)||ue.start+ue.duration>=Ee)?(j=Ee,je=!0):!Le&&ue.start>Ee&&(isNaN(j)||ue.start<j)?j=ue.start:Le&&ue.start+ue.duration<Ee&&(isNaN(j)||ue.start+ue.duration>j)&&(j=ue.start+ue.duration),we+=1}return j}catch(ae){return Ee}}function He(Ye){Ye.offset===void 0||isNaN(Ye.offset)||ne(Ye.offset/1e3)}function De(){V=0,B=0}function Be(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,He,this),De()}return L={initialize:function(){De(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,He,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:ne,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function(Ye,Ee,Le){return fe(Ye,Ee,Le)},calcAvailabilityEndTimeFromPresentationTime:function(Ye,Ee,Le){return fe(Ye,Ee,Le,!0)},calcPresentationTimeFromWallTime:Se,calcPresentationTimeFromMediaTime:ye,calcPeriodRelativeTimeFromMpdRelativeTime:function(Ye,Ee){return Ee-Ye.adaptation.period.start},calcMediaTimeFromPresentationTime:function(Ye,Ee){return Ye-Ee.adaptation.period.start+Ee.presentationTimeOffset},calcWallTimeForSegment:function(Ye,Ee){var Le,we,je;return Ee&&(Le=Ye.representation.adaptation.period.mpd.suggestedPresentationDelay,we=Ye.presentationStartTime+Le,je=new Date(Ye.availabilityStartTime.getTime()+1e3*we)),je},calcTimeShiftBufferWindow:function(Ye,Ee){if(!Ee)return function(we){var je={start:NaN,end:NaN},j=0,ue=NaN;return we.forEach(function(ae){var se=ae.getStreamInfo();j+=se.duration,(isNaN(ue)||se.start<ue)&&(ue=se.start)}),je.start=ue,je.end=ue+j,je}(Ye);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Le=ie(Ye);return me(Le.now,Le.range),Le.range}return function(we){var je={start:NaN,end:NaN};if(!we||we.length===0)return je;var j=we[0].getAdapter().getRegularPeriods()[0],ue=Se(new Date,j),ae=j.mpd.timeShiftBufferDepth,se=isNaN(ae)?0:ue-ae;if(je.start=ge(we,se),je.end=!isNaN(je.start)&&ue<je.start?ue:ge(we,ue,!0),!isNaN(ae)&&je.end<ue-ae&&(je.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(we);if(Q.range.end<je.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.WARNING,event:Oi.EVENTS.INVALID_DVR_WINDOW}),me(Q.now,Q.range),Q.range}return je}(Ye)},reset:Be},P=Vn(ee).getInstance(),Be(),L}_r.__dashjs_factory_name="TimelineConverter";var _u=U.Z.getSingletonFactory(_r),Xf=w(4593),ca=w(6934);function Qf(L){return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Qf(L)}function Qa(L,P){return Qa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Qa(L,P)}function Jf(L,P){return!P||Qf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ju(L){return Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ju(L)}var Zs=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Qa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ju(P);if(B){var ne=Ju(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Jf(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Oc),xo=w(2295);function kc(){var L=0;function P(ne){for(var fe="",Se=0;Se<ne.length;++Se)fe+=ne[Se].uchar;return fe.length-fe.replace(/^\s+/,"").length}function B(ne){return"left: "+3.125*ne.x+"%; top: "+6.66*ne.y1+"%; width: "+(100-3.125*ne.x)+"%; height: "+6.66*Math.max(ne.y2-1-ne.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(ne){return ne==="red"?"rgb(255, 0, 0)":ne==="green"?"rgb(0, 255, 0)":ne==="blue"?"rgb(0, 0, 255)":ne==="cyan"?"rgb(0, 255, 255)":ne==="magenta"?"rgb(255, 0, 255)":ne==="yellow"?"rgb(255, 255, 0)":ne==="white"?"rgb(255, 255, 255)":ne==="black"?"rgb(0, 0, 0)":ne}function ee(ne,fe){var Se=ne.videoHeight/15;return fe?"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(fe.foreground?V(fe.foreground):"rgb(255, 255, 255)")+"; font-style: "+(fe.italics?"italic":"normal")+"; text-decoration: "+(fe.underline?"underline":"none")+"; white-space: pre; background-color: "+(fe.background?V(fe.background):"transparent")+";":"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(ne){return ne.replace(/^\s+/g,"")}function H(ne){return ne.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(ne,fe,Se,ye){var ie,me,ge=null,He=!1,De=-1,Be={start:fe,end:Se,spans:[]},Ye="style_cea608_white_black",Ee={},Le={},we=[];for(ie=0;ie<15;++ie){var je=ye.rows[ie],j="",ue=null;if(je.isEmpty()===!1){var ae=P(je.chars);ge===null&&(ge={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==De&&He&&(ge.p.push(Be),Be={start:fe,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,Ee.hasOwnProperty(ge.name)===!1?(we.push(ge),Ee[ge.name]=ge):Ee[ge.name].p.contat(ge.p),ge={x:ae,y1:ie,y2:ie+1,p:[]});for(var se=0;se<je.chars.length;++se){var Q=je.chars[se],Me=Q.penState;if(ue===null||!Me.equals(ue)){j.trim().length>0&&(Be.spans.push({name:Ye,line:j,row:ie}),j="");var Ie="style_cea608_"+Me.foreground+"_"+Me.background;Me.underline&&(Ie+="_underline"),Me.italics&&(Ie+="_italics"),Le.hasOwnProperty(Ie)||(Le[Ie]=JSON.parse(JSON.stringify(Me))),ue=Me,Ye=Ie}j+=Q.uchar}j.trim().length>0&&Be.spans.push({name:Ye,line:j,row:ie}),He=!0,De=ae}else He=!1,De=-1,ge&&(ge.p.push(Be),Be={start:fe,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,Ee.hasOwnProperty(ge.name)===!1?(we.push(ge),Ee[ge.name]=ge):Ee[ge.name].p.contat(ge.p),ge=null)}ge&&(ge.p.push(Be),ge.y2=ie+1,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,Ee.hasOwnProperty(ge.name)===!1?(we.push(ge),Ee[ge.name]=ge):Ee[ge.name].p.contat(ge.p),ge=null);var ke=[];for(ie=0;ie<we.length;++ie){var Re=we[ie],pe="sub_cea608_"+L++,xe=document.createElement("div");xe.id=pe;var We=B(Re);xe.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+We;var dt=document.createElement("div");dt.className="paragraph bodyStyle",dt.style.cssText=ee(ne);var at=document.createElement("div");at.className="cueUniWrapper",at.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Je=0;Je<Re.p.length;++Je){var ht=Re.p[Je],Bt=0;for(me=0;me<ht.spans.length;++me){var Gt=ht.spans[me];if(Gt.line.length>0){if(me!==0&&Bt!=Gt.row){var kt=document.createElement("br");kt.className="lineBreak",at.appendChild(kt)}var Ft=!1;Bt===Gt.row&&(Ft=!0),Bt=Gt.row;var An=Le[Gt.name],rt=document.createElement("span");rt.className="spanPadding "+Gt.name+" customSpanColor",rt.style.cssText=ee(ne,An),me!==0&&Ft?me===ht.spans.length-1?rt.textContent=H(Gt.line):rt.textContent=Gt.line:ht.spans.length>1&&me<ht.spans.length-1&&Gt.row===ht.spans[me+1].row?rt.textContent=J(Gt.line):rt.textContent=Gt.line.trim(),at.appendChild(rt)}}}dt.appendChild(at),xe.appendChild(dt);var vt={bodyStyle:["%",90]};for(var Wt in Le)Le.hasOwnProperty(Wt)&&(vt[Wt]=["%",90]);ke.push({type:"html",start:fe,end:Se,cueHTMLElement:xe,cueID:pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:vt,lineHeight:{},linePadding:{}})}return ke}}}kc.__dashjs_factory_name="EmbeddedTextHtmlRender";var ep=U.Z.getSingletonFactory(kc);function Um(L){var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee=L.errHandler,Le=L.manifestModel,we=L.mediaController,je=L.videoModel,j=L.textTracks,ue=L.vttParser,ae=L.vttCustomRenderingParser,se=L.ttmlParser,Q=L.streamInfo,Me=L.settings,Ie=this.context,ke=(0,m.Z)(Ie).getInstance(),Re=!1;function pe(){H=null,fe=NaN,Se=[],ye=null,ne=!1,J=[],ee=null}function xe(kt){var Ft=new Zs;for(var An in kt)Ft[An]=kt[An];Ft.labels=kt.labels,Ft.defaultTrack=function(rt){var vt=!1;return me.length>1&&rt.isEmbedded?vt=rt.id&&rt.id===y.Z.CC1:me.length===1?rt.id&&typeof rt.id=="string"&&rt.id.substring(0,2)==="CC"&&(vt=!0):me.length===0&&(vt=rt.index===J[0].index),vt}(kt),Ft.isFragmented=kt.isFragmented,Ft.isEmbedded=!!kt.isEmbedded,Ft.isTTML=function(rt){return rt.codec&&rt.codec.search(y.Z.STPP)>=0||rt.mimeType&&rt.mimeType.search(y.Z.TTML)>=0}(kt),Ft.kind=function(rt,vt){var Wt=rt.roles&&rt.roles.length>0?vt[rt.roles[0]]:vt.caption;return Wt=Wt===vt.caption||Wt===vt.subtitle?Wt:vt.caption}(kt,{subtitle:"subtitles",caption:"captions"}),j.addTextTrack(Ft)}function We(kt){var Ft=kt.chunk;Ft.mediaInfo.embeddedCaptions&&at(Ft.bytes,Ft)}function dt(kt){ie=kt}function at(kt,Ft){var An=Ft.mediaInfo,rt=An.type,vt=An.mimeType,Wt=An.codec||vt;Wt?An.codec.indexOf("application/mp4")!==-1?function(Nt,en,Jt){var Yt;if(en.segmentType==="InitializationSegment")ne=!0,fe=V.getMediaTimescaleFromMoov(Nt);else{if(!ne)return;(Yt=V.getSamplesInfo(Nt).sampleList).length>0&&(ye=Yt[0].cts-en.start*fe),Jt.search(y.Z.STPP)>=0?function(Dn,xn,rr){var ir,It;for(ee=ee!==null?ee:Bt(rr),ir=0;ir<xn.length;ir++){var $t=xn[ir],Zt=$t.cts,un=ht(),vn=un+Zt/fe,Pn=vn+$t.duration/fe;P.buffered.add(vn,Pn);var Nn=new DataView(Dn,$t.offset,$t.subSizes[0]),Fn=ca.Utils.dataViewToString(Nn,y.Z.UTF8),Gn=[],bt=$t.offset+$t.subSizes[0];for(It=1;It<$t.subSizes.length;It++){var Sn=new Uint8Array(Dn,bt,$t.subSizes[It]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),bt+=$t.subSizes[It]}try{var Lt=Le.getValue().ttmlTimeIsRelative?Zt/fe:0,On=ee.parse(Fn,Lt,Zt/fe,(Zt+$t.duration)/fe,Gn);j.addCaptions(ie,un,On)}catch(st){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+st.message)}}}(Nt,Yt,Jt):function(Dn,xn){var rr,ir,It,$t=[];for(rr=0;rr<xn.length;rr++){var Zt=xn[rr];Zt.cts-=ye;var un=ht()+Zt.cts/fe,vn=un+Zt.duration/fe;P.buffered.add(un,vn);var Pn=Dn.slice(Zt.offset,Zt.offset+Zt.size),Nn=ca.parseBuffer(Pn);for(ir=0;ir<Nn.boxes.length;ir++){var Fn=Nn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(It=0;It<Fn.boxes.length;It++){var bt=Fn.boxes[It];if(B.debug("VTT box2: "+bt.type),bt.type==="payl")Gn.start=Zt.cts/fe,Gn.end=(Zt.cts+Zt.duration)/fe,Gn.data=bt.cue_text;else if(bt.type==="sttg"&&bt.settings&&bt.settings!=="")try{var Sn=bt.settings.split(" ");Gn.styles=ue.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&($t.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}$t.length>0&&j.addCaptions(ie,0,$t)}(Nt,Yt)}}(kt,Ft,Wt):rt===y.Z.VIDEO?function(Nt,en){var Jt,Yt;if(en.segmentType===nt.w.INIT_SEGMENT_TYPE)ge===0&&(ge=V.getMediaTimescaleFromMoov(Nt));else if(en.segmentType===nt.w.MEDIA_SEGMENT_TYPE){if(ge===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Yt=V.getSamplesInfo(Nt)).lastSequenceNumber,xn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Be[0]||Be[1]||function(){for(var un,vn=0;vn<me.length;vn++){if((un=j.getTrackIdxForId(me[vn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=Je(un);Be[vn]=new(b()).Cea608Parser(vn+1,{newCue:Pn},null)}}(),ge){if(function(un,vn,Pn,Nn,Fn){return un!==null&&vn!==null&&Nn!==null&&Fn!==null&&(vn===un?Nn!==Fn:vn!==un+Pn)}(He,Dn,Yt.numSequences,De,xn))for(Jt=0;Jt<Be.length;Jt++)Be[Jt]&&Be[Jt].reset();for(var ir=function(un,vn){if(vn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},Nn=new DataView(un),Fn=0;Fn<vn.length;Fn++)for(var Gn=vn[Fn],bt=b().findCea608Nalus(Nn,Gn.offset,Gn.size),Sn=null,En=0,Lt=0;Lt<bt.length;Lt++)for(var On=b().extractCea608DataFromRange(Nn,bt[Lt]),st=0;st<2;st++)if(On[st].length>0){Gn.cts!==Sn?En=0:En+=1;var tt=ht();Pn.fields[st].push([Gn.cts+tt*ge,On[st],En]),Sn=Gn.cts}return Pn.fields.forEach(function(qt){qt.sort(function(ze,Ve){return ze[0]===Ve[0]?ze[2]-Ve[2]:ze[0]-Ve[0]})}),Pn}(Nt,Yt.sampleList),It=0;It<Be.length;It++){var $t=ir.fields[It],Zt=Be[It];if(Zt)for(Jt=0;Jt<$t.length;Jt++)Zt.addData($t[Jt][0]/ge,$t[Jt][1])}He=Dn,De=rr}}}(kt,Ft):function(Nt,en,Jt){var Yt,Dn,xn=new DataView(Nt,0,Nt.byteLength);Dn=ca.Utils.dataViewToString(xn,y.Z.UTF8);try{Yt=Bt(Jt).parse(Dn,0),j.addCaptions(j.getCurrentTrackIdx(),0,Yt),P.buffered&&P.buffered.add(en.start,en.end)}catch(rr){Ee.error(new ce.Z(Ae.TIMED_TEXT_ERROR_ID_PARSE_CODE,Ae.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(kt,Ft,Wt):B.error("No text type defined")}function Je(kt){return function(Ft,An,rt){var vt;(vt=je.getTTMLRenderingDiv()?Ye.createHTMLCaptionsFromScreen(je.getElement(),Ft,An,rt):[{start:Ft,end:An,data:rt.getDisplayText(),styles:{}}])&&j.addCaptions(kt,0,vt)}}function ht(){return isNaN(P.timestampOffset)?0:P.timestampOffset}function Bt(kt){var Ft;return kt.search(y.Z.VTT)>=0?Ft=Me.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:ue:(kt.search(y.Z.TTML)>=0||kt.search(y.Z.STPP)>=0)&&(Ft=se),Ft}function Gt(kt){me.forEach(function(Ft){var An=j.getTrackIdxForId(Ft.id);An>=0&&j.deleteCuesFromTrackIdx(An,kt.from,kt.to)})}return P={initialize:function(){Re||(me=[],ie=null,ge=0,Be=[],He=null,De=null,Re=!0,Ye=ep(Ie).getInstance(),ke.on(T.Z.VIDEO_CHUNK_RECEIVED,We,P),ke.on(T.Z.BUFFER_CLEARED,Gt,P))},addMediaInfos:function(kt,Ft,An){if(J=J.concat(Ft),kt===y.Z.TEXT&&Ft[0].isFragmented&&!Ft[0].isEmbedded){H=An,P.buffered=(0,xo.Z)(Ie).create(),Se=we.getTracksFor(y.Z.TEXT,Q.id).filter(function(Nt){return Nt.isFragmented});for(var rt=we.getCurrentTrackFor(y.Z.TEXT,Q.id),vt=0;vt<Se.length;vt++)if(Se[vt]===rt){dt(vt);break}}for(var Wt=0;Wt<Ft.length;Wt++)xe(Ft[Wt])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:at,abort:function(){},addEmbeddedTrack:function(kt){if(Re&&kt)if(kt.id===y.Z.CC1||kt.id===y.Z.CC3){for(var Ft=0;Ft<me.length;Ft++)if(me[Ft].id===kt.id)return;me.push(kt)}else B.warn("Embedded track "+kt.id+" not supported!")},resetEmbedded:function(){ke.off(T.Z.VIDEO_CHUNK_RECEIVED,We,P),ke.off(T.Z.BUFFER_CLEARED,Gt,P),j&&j.deleteAllTextTracks(),Re=!1,me=[],Be=[null,null],He=null,De=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:Se,videoModel:je}},setCurrentFragmentedTrackIdx:dt,remove:function(kt,Ft){kt===void 0&&kt===Ft&&(kt=P.buffered.start(0),Ft=P.buffered.end(P.buffered.length-1)),P.buffered.remove(kt,Ft),j.deleteCuesFromTrackIdx(ie,kt,Ft)},reset:function(){pe(),J=[],V=null}},B=(0,N.Z)(Ie).getInstance().getLogger(P),V=(0,aa.Z)(Ie).getInstance(),pe(),P}Um.__dashjs_factory_name="TextSourceBuffer";var tp=U.Z.getClassFactory(Um),Fc=w(4403);function Uc(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}var ZE=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Bm(L){var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee,Le,we,je=this.context,j=(0,m.Z)(je).getInstance(),ue=L.videoModel,ae=L.streamInfo,se=L.settings;function Q(It,$t,Zt,un,vn,Pn){var Nn=0,Fn=0;It/$t>Zt/un?Nn=(Fn=$t)/un*Zt:Fn=(Nn=It)/Zt*un;var Gn,bt,Sn=0,En=0;return Nn/Fn>vn?(En=Fn,Sn=Fn*vn):(Sn=Nn,En=Nn/vn),Gn=(It-Sn)/2,bt=($t-En)/2,Pn?{x:Gn+.1*Sn,y:bt+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:bt,w:Sn,h:En}}function Me(It,$t){var Zt=ue.getClientWidth(),un=ue.getClientHeight(),vn=ue.getVideoWidth(),Pn=ue.getVideoHeight(),Nn=ue.getVideoRelativeOffsetTop(),Fn=ue.getVideoRelativeOffsetLeft();if(vn!==0&&Pn!==0){var Gn=vn/Pn,bt=!1;It.isFromCEA608&&(Gn=1.1666666666666667,bt=!0);var Sn=Q.call(this,Zt,un,vn,Pn,Gn,bt),En=Sn.w,Lt=Sn.h,On=Sn.x,st=Sn.y;if(En!=Se||Lt!=ye||On!=ne||st!=fe||$t){if(ne=On+Fn,fe=st+Nn,Se=En,ye=Lt,ie){var tt=ie.style;tt&&(tt.left=ne+"px",tt.top=fe+"px",tt.width=Se+"px",tt.height=ye+"px",tt.zIndex=He&&document[He]||De?Ye:null,j.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var qt=It.activeCues;if(qt)for(var ze=qt.length,Ve=0;Ve<ze;++Ve){var Dt=qt[Ve];Dt.scaleCue(Dt)}}}}function Ie(It){var $t,Zt,un,vn,Pn,Nn=Se,Fn=ye;if(It.cellResolution){var Gn=[Nn/It.cellResolution[0],Fn/It.cellResolution[1]];if(It.linePadding){for($t in It.linePadding)if(It.linePadding.hasOwnProperty($t)){Zt=(It.linePadding[$t]*Gn[0]).toString();for(var bt=document.getElementsByClassName("spanPadding"),Sn=0;Sn<bt.length;Sn++)bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt),bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}if(It.fontSize){for($t in It.fontSize)if(It.fontSize.hasOwnProperty($t)){It.fontSize[$t][0]==="%"?un=It.fontSize[$t][1]/100:It.fontSize[$t][0]==="c"&&(un=It.fontSize[$t][1]),Zt=(un*Gn[1]).toString(),Pn=$t!=="defaultFontSize"?document.getElementsByClassName($t):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}if(It.lineHeight){for($t in It.lineHeight)if(It.lineHeight.hasOwnProperty($t)){It.lineHeight[$t][0]==="%"?vn=It.lineHeight[$t][1]/100:It.fontSize[$t][0]==="c"&&(vn=It.lineHeight[$t][1]),Zt=(vn*Gn[1]).toString(),Pn=document.getElementsByClassName($t);for(var Lt=0;Lt<Pn.length;Lt++)Pn[Lt].style.cssText=Pn[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}}}if(It.isd){var On=document.getElementById(It.cueID);On&&ie.removeChild(On),Re(It)}}function ke(It,$t){var Zt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Zt.test($t)){var vn=Zt.exec($t),Pn=parseInt(vn[4],10)-1;return"data:image/png;base64,"+btoa(It.images[Pn])}if(un.test($t)){var Nn=un.exec($t)[1];return"data:image/png;base64,"+It.embeddedImages[Nn]}return $t}function Re(It){if(ie){ir.call(this);var $t=document.createElement("div");ie.appendChild($t),Be=(0,Fc.renderHTML)(It.isd,$t,function(Zt){return ke(It,Zt)},ie.clientHeight,ie.clientWidth,se.get().streaming.text.imsc.displayForcedOnlyMode,function(Zt){B.info("renderCaption :",Zt)},Be,se.get().streaming.text.imsc.enableRollUp),$t.id=It.cueID,j.trigger(_.Z.CAPTION_RENDERED,{captionDiv:$t,currentTrackIdx:H})}}function pe(It,$t){return!!$t&&$t.endTime>=It.startTime}function xe(It,$t){return!!se.get().streaming.text.extendSegmentedCues&&!!function(Zt,un,vn){for(var Pn=0;Pn<vn.length;Pn++){var Nn=vn[Pn];if(JSON.stringify(Zt[Nn])!==JSON.stringify(un[Nn]))return!1}return!0}($t,It,ZE)&&($t.endTime=Math.max($t.endTime,It.endTime),!0)}function We(It,$t){$t&&$t.forEach(function(Zt){Zt.kind&&Zt.kind==="image"&&(Zt.src=ke(It,Zt.src)),We(It,Zt.contents)})}function dt(It,$t,Zt){var un=vt(It),vn=se.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Zt)&&Zt.length!==0)for(var Pn=0;Pn<Zt.length;Pn++){var Nn=null,Fn=Zt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(vn?Nn=at(Fn,$t):kt(Fn)&&ie?Nn=Bt(Fn,$t,un):Fn.data&&(Nn=Gt(Fn,$t,un)));try{if(Nn){if(!en(un,Nn))if(se.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(Nn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),pe(Nn,Gn)?xe(Nn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)):un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)}var bt=se.get().streaming.buffer.bufferToKeep;Yt(un,0,ue.getTime()-bt)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(Nn),Sn}}}function at(It,$t){var Zt=Ft(It,$t);return Zt.onenter=function(){kt(It)&&we&&we.cueID!==Zt.cueID&&ht(we),delete Zt.type,we=Zt,Je(Zt)},Zt.onexit=function(){ht(Zt),we=null},Zt}function Je(It){j.trigger(_.Z.CUE_ENTER,It)}function ht(It){j.trigger(_.Z.CUE_EXIT,{cueID:It.cueID})}function Bt(It,$t,Zt){var un=this,vn=Ft(It,$t);return ie.style.left=ne+"px",ie.style.top=fe+"px",ie.style.width=Se+"px",ie.style.height=ye+"px",vn.onenter=function(){var Pn=this;Zt.mode===y.Z.TEXT_SHOWING&&(this.isd?(Le?requestAnimationFrame(function(){return Re(Pn)}):Re(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),Ie.call(un,this),j.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},vn.onexit=function(){if(ie)for(var Pn=ie.childNodes,Nn=0;Nn<Pn.length;++Nn)Pn[Nn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[Nn].id),ie.removeChild(Pn[Nn]),--Nn)},vn}function Gt(It,$t,Zt){var un=Ft(It,$t);if(un.isActive=!1,It.styles)try{It.styles.align!==void 0&&"align"in un&&(un.align=It.styles.align),It.styles.line!==void 0&&"line"in un&&(un.line=It.styles.line),It.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=It.styles.snapToLines),It.styles.position!==void 0&&"position"in un&&(un.position=It.styles.position),It.styles.size!==void 0&&"size"in un&&(un.size=It.styles.size)}catch(vn){B.error(vn)}return un.onenter=function(){Zt.mode===y.Z.TEXT_SHOWING&&j.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function kt(It){return It.type==="html"}function Ft(It,$t){return kt(It)?function(Zt,un){var vn=new V(Zt.start+un,Zt.end+un,"");return vn.cueHTMLElement=Zt.cueHTMLElement,vn.isd=Zt.isd,vn.images=Zt.images,vn.embeddedImages=Zt.embeddedImages,vn.cueID=Zt.cueID,vn.scaleCue=Ie.bind(self),vn.cellResolution=Zt.cellResolution,vn.lineHeight=Zt.lineHeight,vn.linePadding=Zt.linePadding,vn.fontSize=Zt.fontSize,vn.isd&&We(vn,vn.isd.contents),vn}(It,$t):function(Zt,un){var vn=new V(Zt.start-un,Zt.end-un,Zt.data);return vn.cueID="".concat(vn.startTime,"_").concat(vn.endTime),vn}(It,$t)}function An(It){if(me)for(var $t=me.childNodes,Zt=0;Zt<$t.length;++Zt)$t[Zt].id===It.cueID&&(me.removeChild($t[Zt]),--Zt)}function rt(){var It,$t=[],Zt=function(vn,Pn){var Nn;if(typeof Symbol>"u"||vn[Symbol.iterator]==null){if(Array.isArray(vn)||(Nn=function(Lt,On){if(Lt){if(typeof Lt=="string")return Uc(Lt,On);var st=Object.prototype.toString.call(Lt).slice(8,-1);return st==="Object"&&Lt.constructor&&(st=Lt.constructor.name),st==="Map"||st==="Set"?Array.from(Lt):st==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st)?Uc(Lt,On):void 0}}(vn))||Pn){Nn&&(vn=Nn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=vn.length?{done:!0}:{done:!1,value:vn[Fn++]}},e:function(Lt){throw Lt},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var bt,Sn=!0,En=!1;return{s:function(){Nn=vn[Symbol.iterator]()},n:function(){var Lt=Nn.next();return Sn=Lt.done,Lt},e:function(Lt){En=!0,bt=Lt},f:function(){try{Sn||Nn.return==null||Nn.return()}finally{if(En)throw bt}}}}(ue.getTextTracks());try{for(Zt.s();!(It=Zt.n()).done;){var un=It.value;un.manualMode===y.Z.TEXT_SHOWING&&$t.push(un)}}catch(vn){Zt.e(vn)}finally{Zt.f()}return $t}function vt(It){return It>=0&&ee[It]?ue.getTextTrack(ee[It].kind,ee[It].id,ee[It].lang,ee[It].isTTML,ee[It].isEmbedded):null}function Wt(It){var $t=this;if(It!==H){var Zt=vt(H=It);Nt.call(this,Zt),ge&&(clearInterval(ge),ge=null),Zt&&Zt.renderingType==="html"&&(Me.call(this,Zt,!0),window.ResizeObserver?(Ee=new window.ResizeObserver(function(){Me.call($t,Zt,!0)})).observe(ue.getElement()):ge=setInterval(Me.bind(this,Zt),500))}}function Nt(It){ir.call(this),It&&It.renderingType==="html"?xn.call(this):rr.call(this)}function en(It,$t){if(!It.cues)return!1;for(var Zt=0;Zt<It.cues.length;Zt++)if(It.cues[Zt].startTime===$t.startTime&&It.cues[Zt].endTime===$t.endTime)return!0;return!1}function Jt(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!It&&(isNaN($t)||(un?It.startTime:It.endTime)>=$t)&&(isNaN(Zt)||(un?It.endTime:It.startTime)<=Zt)}function Yt(It,$t,Zt){var un,vn;if(!(Zt<$t)&&It&&(It.cues||It.manualCueList)){var Pn=It.cues&&It.cues.length>0?"native":"custom",Nn=Pn==="native"?It.cues:It.manualCueList;if(!Nn||Nn.length===0)return;for(var Fn=Nn.length-1;Fn>=0;Fn--)!Jt(Nn[Fn],$t,Zt,!0)||(un=Nn[Fn],vn=ue.getTime(),un.startTime>=vn&&un.endTime<=vn)||(Pn==="native"?It.removeCue(Nn[Fn]):(An(Nn[Fn]),delete It.manualCueList[Fn]))}}function Dn(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(It&&(It.cues||It.manualCueList)){var vn=It.cues&&It.cues.length>0?"native":"custom",Pn=vn==="native"?It.cues:It.manualCueList;if(!Pn||Pn.length===0)return;for(var Nn=Pn.length-1,Fn=Nn;Fn>=0;Fn--)Jt(Pn[Fn],$t,Zt,un)&&(vn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),It.removeCue(Pn[Fn])):(An(Pn[Fn]),delete It.manualCueList[Fn]))}}function xn(){var It=document.getElementById("native-cue-style");if(!It){(It=document.createElement("style")).id="native-cue-style",document.head.appendChild(It);var $t=It.sheet,Zt=ue.getElement();try{Zt&&(Zt.id?$t.insertRule("#"+Zt.id+"::cue {background: transparent}",0):Zt.classList.length!==0?$t.insertRule("."+Zt.className+"::cue {background: transparent}",0):$t.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var It=document.getElementById("native-cue-style");It&&document.head.removeChild(It)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return P={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,ne=0,fe=0,Se=0,ye=0,ie=null,me=null,ge=null,De=!1,Ye=2147483647,Be=null,Le="requestAnimationFrame"in window,document.fullscreenElement!==void 0?He="fullscreenElement":document.webkitIsFullScreen!==void 0?He="webkitIsFullScreen":document.msFullscreenElement?He="msFullscreenElement":document.mozFullScreen&&(He="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(It){ee.push(It)},addCaptions:dt,createTracks:function(){var It=se.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,st){return On.index-st.index}),ie=ue.getTTMLRenderingDiv(),me=ue.getVttRenderingDiv();for(var $t,Zt,un,vn,Pn,Nn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var bt=(Zt=($t=ee[Gn]).kind,un=$t.id!==void 0?$t.id:$t.lang,vn=$t.lang,Pn=$t.isTTML,Nn=$t.isEmbedded,ue.addTextTrack(Zt,un,vn,Pn,Nn));J.push(bt),ee[Gn].defaultTrack&&(bt.default=!0,Fn=Gn);var Sn=vt(Gn);Sn&&(Sn.mode=y.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),dt(Gn,0,ee[Gn].captionData),j.trigger(_.Z.TEXT_TRACK_ADDED)}if(Wt.call(this,Fn),Fn>=0){j.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var st=vt(Fn);st&&st.renderingType==="html"&&Me.call(this,st,!0),j.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Lt=vt(En);Lt&&(Lt.mode=En!==Fn||It?y.Z.TEXT_HIDDEN:y.Z.TEXT_SHOWING,Lt.manualMode=En===Fn?y.Z.TEXT_SHOWING:y.Z.TEXT_HIDDEN)}}j.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Wt,getTrackIdxForId:function(It){for(var $t=-1,Zt=0;Zt<ee.length;Zt++)if(ee[Zt].id===It){$t=Zt;break}return $t},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(It,$t){var Zt=vt(It);Zt&&Zt.mode!==$t&&(Zt.mode=$t),Zt&&Zt.manualMode!==$t&&(Zt.manualMode=$t)},deleteCuesFromTrackIdx:function(It,$t,Zt){var un=vt(It);un&&Dn(un,$t,Zt)},deleteAllTextTracks:function(){for(var It=J?J.length:0,$t=0;$t<It;$t++){var Zt=vt($t);Zt&&Dn.call(this,Zt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],ge&&(clearInterval(ge),ge=null),Ee&&ue&&(Ee.unobserve(ue.getElement()),Ee=null),H=-1,ir.call(this)},manualCueProcessing:function(It){var $t=rt();if($t&&$t.length>0){var Zt=$t[0].manualCueList;Zt&&Zt.length>0&&Zt.forEach(function(un){un.startTime<=It&&un.endTime>=It&&!un.isActive?(un.isActive=!0,se.get().streaming.text.dispatchForManualRendering?Je(un):WebVTT.processCues(window,[un],me,un.cueID)):un.isActive&&(un.startTime>It||un.endTime<It)&&(un.isActive=!1,se.get().streaming.text.dispatchForManualRendering?ht(un):An(un))})}},disableManualTracks:function(){var It=rt();if(It&&It.length>0){var $t=It[0].manualCueList;$t&&$t.length>0&&$t.forEach(function(Zt){if(Zt.isActive){if(Zt.isActive=!1,se.get().streaming.text.dispatchForManualRendering)ht(Zt);else if(me)for(var un=me.childNodes,vn=0;vn<un.length;++vn)un[vn].id===Zt.cueID&&(me.removeChild(un[vn]),--vn)}})}}},B=(0,N.Z)(je).getInstance().getLogger(P),P}Bm.__dashjs_factory_name="TextTracks";var jm=U.Z.getClassFactory(Bm);function Zm(){var L,P,B,V,ee,J,H=this.context;function ne(ie){var me=ie.split(":"),ge=me.length-1;return ie=60*parseInt(me[ge-1],10)+parseFloat(me[ge]),ge===2&&(ie+=3600*parseInt(me[0],10)),ie}function fe(ie){var me=ie.split(V),ge=me[1].split(J);return ge.shift(),me[1]=ge[0],ge.shift(),{cuePoints:me,styles:Se(ge)}}function Se(ie){var me={};return ie.forEach(function(ge){if(ge.split(/:/).length>1){var He=ge.split(/:/)[1],De=!1;He&&He.search(/%/)!=-1&&(De=!0,He=parseInt(He.replace(/%/,""),10)),(ge.match(/align/)||ge.match(/A/))&&(me.align=He),(ge.match(/line/)||ge.match(/L/))&&(me.line=He==="auto"?He:parseInt(He,10),De&&(me.snapToLines=!1)),(ge.match(/position/)||ge.match(/P/))&&(me.position=He),(ge.match(/size/)||ge.match(/S/))&&(me.size=He)}}),me}function ye(ie,me){for(var ge,He=me,De="",Be="";ie[He]!==""&&He<ie.length;)He++;if((ge=He-me)>1)for(var Ye=0;Ye<ge;Ye++){if((Be=ie[me+Ye]).match(V)){De="";break}De+=Be,Ye!==ge-1&&(De+="\n")}else(Be=ie[me]).match(V)||(De=Be);return De}return L={parse:function(ie){var me,ge,He=[];if(!ie)return He;me=(ie=ie.split(B)).length,ge=-1;for(var De=0;De<me;De++){var Be=ie[De];if(Be.length>0&&Be!=="WEBVTT"&&Be.match(V)){var Ye=fe(Be),Ee=Ye.cuePoints,Le=Ye.styles,we=ye(ie,De+1),je=ne(Ee[0].replace(ee,"")),j=ne(Ee[1].replace(ee,""));!isNaN(je)&&!isNaN(j)&&je>=ge&&j>je?we!==""?(ge=je,He.push({start:je,end:j,data:we,styles:Le})):P.error("Skipping cue due to empty/malformed cue text"):P.error("Skipping cue due to incorrect cue timing")}}return He},getCaptionStyles:Se},P=(0,N.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,V=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}Zm.__dashjs_factory_name="VTTParser";var Gm=U.Z.getSingletonFactory(Zm);function np(){var L,P;return L={parse:function(B){var V=[];return P.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},V.push(ee)},P.parse(B),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(P=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}np.__dashjs_factory_name="VttCustomRenderingParser";var GE=U.Z.getSingletonFactory(np);function qm(){var L,P,B=this.context,V=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,ne,fe,Se){var ye,ie,me,ge="",He=[],De={},Be={},Ye="",Ee="",Le={onOpenTag:function(ae,se,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Oi.LEVELS.ERROR,event:Oi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),se==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");Ye=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){Ye&&(Be[Ye]=Ee.trim()),Ee="",Ye=""},onText:function(ae){Ye&&(Ee+=ae)}};if(!J)throw ge="no ttml data to parse",new Error(ge);De.data=J,V.trigger(T.Z.TTML_TO_PARSE,De);var we=(0,Fc.fromXML)(De.data,function(ae){ge=ae},Le);V.trigger(T.Z.TTML_PARSED,{ttmlString:De.data,ttmlDoc:we});var je,j=we.getMediaTimeEvents();for(me=0;me<j.length;me++){var ue=(0,Fc.generateISD)(we,j[me],function(ae){ge=ae});ue.contents.some(function(ae){return ae.contents.length})&&(ye=j[me]+H)<(ie=j[me+1]+H)&&He.push({start:ye,end:ie,type:"html",cueID:(je="cue_TTML_"+ee,ee++,je),isd:ue,images:Se,embeddedImages:Be})}if(ge!=="")throw P.error(ge),new Error(ge);return He}},P=(0,N.Z)(B).getInstance().getLogger(L),L}qm.__dashjs_factory_name="TTMLParser";var qE=U.Z.getSingletonFactory(qm);function rp(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function jl(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?rp(Object(B),!0).forEach(function(V){Hm(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):rp(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Hm(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function ip(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function op(L){var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,St.Z)(ee).getInstance(),ne=L.adapter,fe=L.baseURLController;function Se(me,ge){var He,De,Be=!1;if(fe.resolve()){var Ye=ne.getVoRepresentations(me);Ye&&Ye.length>0&&(He=fe.resolve(Ye[0].path).url)}var Ee=me.essentialPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME}),Le=me.supplementalPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME});Ee.length>0?(Be=!0,De=Ee):De=Le,De.forEach(function(we){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==y.Z.OFF_MIMETYPE&&ae.dvbMimeType!==y.Z.WOFF_MIMETYPE)}(we)){var je=(j=we.dvbUrl,ue=He,H.isPathAbsolute(j)?j:H.isRelative(j)?ue?H.resolve(j,ue):H.resolve(j):j);V.push({fontFamily:we.dvbFontFamily,url:je,mimeType:we.dvbMimeType,trackId:me.id,streamId:ge,isEssential:Be,status:"unloaded",fontFace:new FontFace(we.dvbFontFamily,"url(".concat(je,")"),{display:"swap"})})}var j,ue})}function ye(me,ge){var He=V[me];V[me]=jl(jl({},He),{},{status:ge})}function ie(){V=[]}return P={addFontsFromTracks:function(me,ge){if(me&&Array.isArray(me)&&ge)for(var He=0;He<me.length;He++)Se(me[He],ge)},downloadFonts:function(){for(var me=function(He){var De=V[He];document.fonts.add(De.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,De),De.fontFace.load().then(function(){ye(He,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,De)},function(Be){ye(He,"error"),B.debug("Font download error: ",Be),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,De)})},ge=0;ge<V.length;ge++)me(ge)},getFonts:function(){return V},getFontsForTrackId:function(me){return V.filter(function(ge){return ge.trackId&&ge.trackId===me})},reset:function(){(function(){var me,ge=function(Be,Ye){var Ee;if(typeof Symbol>"u"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(Ee=function(ae,se){if(ae){if(typeof ae=="string")return ip(ae,se);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?ip(ae,se):void 0}}(Be))||Ye){Ee&&(Be=Ee);var Le=0,we=function(){};return{s:we,n:function(){return Le>=Be.length?{done:!0}:{done:!1,value:Be[Le++]}},e:function(ae){throw ae},f:we}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je,j=!0,ue=!1;return{s:function(){Ee=Be[Symbol.iterator]()},n:function(){var ae=Ee.next();return j=ae.done,ae},e:function(ae){ue=!0,je=ae},f:function(){try{j||Ee.return==null||Ee.return()}finally{if(ue)throw je}}}}(V);try{for(ge.s();!(me=ge.n()).done;){var He=me.value,De=document.fonts.delete(He.fontFace);B.debug("Removal of fontFamily: ".concat(He.fontFamily," was ").concat(De?"successful":"unsuccessful"))}}catch(Be){ge.e(Be)}finally{ge.f()}})(),ie()}},B=(0,N.Z)(ee).getInstance().getLogger(P),ie(),P}op.__dashjs_factory_name="DVBFonts";var HE=U.Z.getClassFactory(op);function Km(L){var P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De=this.context,Be=L.adapter,Ye=L.errHandler,Ee=L.manifestModel,Le=L.mediaController,we=L.baseURLController,je=L.videoModel,j=L.settings;function ue(xe){if(He.error("Could not download ".concat(xe.isEssential?"an essential":"a"," font - fontFamily: ").concat(xe.fontFamily,", url: ").concat(xe.url)),xe.isEssential){var We=ee[xe.streamId].getTrackIdxForId(xe.trackId);ee[xe.streamId].setModeForTrackIdx(We,y.Z.TEXT_DISABLED)}}function ae(xe){if(He.debug("Successfully downloaded ".concat(xe.isEssential?"an essential":"a"," font - fontFamily: ").concat(xe.fontFamily,", url: ").concat(xe.url)),xe.isEssential){var We=ee[xe.streamId].getTrackIdxForId(xe.trackId);We===ee[xe.streamId].getCurrentTrackIdx()?ee[xe.streamId].setModeForTrackIdx(We,y.Z.TEXT_SHOWING):ee[xe.streamId].setModeForTrackIdx(We,y.Z.TEXT_HIDDEN)}}function se(xe){var We=xe.tracks,dt=xe.index,at=xe.streamId;if(j.get().streaming.text.defaultEnabled===!1&&!Ie()||me)ke(at,-1);else{var Je=Le.getCurrentTrackFor(y.Z.TEXT,at);if(Je){var ht={lang:Je.lang,role:Je.roles[0],index:Je.index,codec:Je.codec,accessibility:Je.accessibility[0]};We.some(function(Bt,Gt){if(Le.matchSettings(ht,Bt))return ke(at,Gt),dt=Gt,!0})}Se=!1}B[at].lastEnabledIndex=dt,fe.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:Ie(),index:dt,tracks:We,streamId:at}),ie=!0,ge.addFontsFromTracks(We,at),ge.getFonts().forEach(function(Bt){if(Bt.isEssential){var Gt=ee[Bt.streamId].getTrackIdxForId(Bt.trackId);ee[Bt.streamId].setModeForTrackIdx(Gt,y.Z.TEXT_DISABLED)}}),ge.downloadFonts()}function Q(xe){try{var We=xe.streamId;if(!ee[We]||isNaN(xe.time))return;ee[We].manualCueProcessing(xe.time)}catch(dt){}}function Me(xe){try{var We=xe.streamId;if(!ee[We])return;ee[We].disableManualTracks()}catch(dt){}}function Ie(){var xe=!0;return Se&&!ye&&(xe=!1),xe}function ke(xe,We){(Se=We===-1)&&Le&&Le.saveTextSettingsDisabled();var dt=Re(xe);if(dt!==We&&ee[xe]){ee[xe].disableManualTracks();var at=ee[xe].getCurrentTrackInfo(),Je=at?je.getTextTrack(at.kind,at.id,at.lang,at.isTTML,at.isEmbedded):null;Je&&Je.mode!==y.Z.TEXT_DISABLED&&ee[xe].setModeForTrackIdx(dt,y.Z.TEXT_HIDDEN),ee[xe].setCurrentTrackIdx(We),at=ee[xe].getCurrentTrackInfo();var ht=j.get().streaming.text.dispatchForManualRendering;at&&!ht&&at.mode!==y.Z.TEXT_DISABLED&&ee[xe].setModeForTrackIdx(We,y.Z.TEXT_SHOWING),at&&at.isFragmented&&!at.isEmbedded?function(Bt,Gt,kt){if(V[Bt])for(var Ft=V[Bt].getConfig().fragmentedTracks,An=0;An<Ft.length;An++){var rt=Ft[An];if(Gt.lang===rt.lang&&(rt.id?Gt.id===rt.id:Gt.index===rt.index)){var vt=Le.getCurrentTrackFor(y.Z.TEXT,Bt);(rt.id?vt.id!==rt.id:vt.index!==rt.index)?(ee[Bt].deleteCuesFromTrackIdx(kt),V[Bt].setCurrentFragmentedTrackIdx(An)):kt===-1&&fe.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Bt,mediaType:y.Z.TEXT})}}}(xe,at,dt):at&&!at.isFragmented&&function(Bt,Gt){fe.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Gt},{streamId:Bt,mediaType:y.Z.TEXT})}(xe,at),Le.setTrack(at)}}function Re(xe){return ee[xe].getCurrentTrackIdx()}function pe(){V={},ee={},B={},Se=!0,ie=!1,me=!1}return P={deactivateStream:function(xe){if(xe){var We=xe.id;V[We]&&V[We].resetMediaInfos(),ee[We]&&ee[We].deleteAllTextTracks()}},initialize:function(){ge=HE(De).create({adapter:Be,baseURLController:we}),fe.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,ue,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),j.get().streaming.text.webvtt.customRenderingEnabled&&(fe.on(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.on(T.Z.PLAYBACK_SEEKING,Me,P))},initializeForStream:function(xe){var We=xe.id,dt=jm(De).create({videoModel:je,settings:j,streamInfo:xe});dt.initialize(),ee[We]=dt;var at=tp(De).create({errHandler:Ye,adapter:Be,dvbFonts:ge,manifestModel:Ee,mediaController:Le,videoModel:je,textTracks:dt,vttParser:J,vttCustomRenderingParser:H,ttmlParser:ne,streamInfo:xe,settings:j});at.initialize(),V[We]=at,B[We]={},B[We].lastEnabledIndex=-1},createTracks:function(xe){var We=xe.id;ee[We]&&ee[We].createTracks()},getTextSourceBuffer:function(xe){var We=xe.id;if(V&&V[We])return V[We]},getAllTracksAreDisabled:function(){return Se},addEmbeddedTrack:function(xe,We){var dt=xe.id;V[dt]&&V[dt].addEmbeddedTrack(We)},enableText:function(xe,We){return(0,_e.PS)(We,"boolean"),Ie()!==We&&(We&&ke(xe,B[xe].lastEnabledIndex),We||(B[xe].lastEnabledIndex=Re(xe),ie?ke(xe,-1):me=!0)),!0},isTextEnabled:Ie,setTextTrack:ke,getCurrentTrackIdx:Re,enableForcedTextStreaming:function(xe){return(0,_e.PS)(xe,"boolean"),ye=xe,!0},addMediaInfosToBuffer:function(xe,We,dt){var at=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Je=xe.id;V[Je]&&V[Je].addMediaInfos(We,dt,at)},reset:function(){ge.reset(),pe(),fe.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,ue,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),j.get().streaming.text.webvtt.customRenderingEnabled&&(fe.off(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.off(T.Z.PLAYBACK_SEEKING,Me,P)),Object.keys(V).forEach(function(xe){V[xe].resetEmbedded(),V[xe].reset()})}},ye=!1,ie=!1,me=!1,J=Gm(De).getInstance(),H=GE(De).getInstance(),ne=qE(De).getInstance(),fe=(0,m.Z)(De).getInstance(),He=(0,N.Z)(De).getInstance().getLogger(P),pe(),P}Km.__dashjs_factory_name="TextController";var KE=U.Z.getClassFactory(Km);function Bc(){var L,P,B,V,ee,J,H,ne,fe,Se,ye,ie,me,ge,He,De,Be,Ye,Ee,Le,we,je,j,ue,ae,se,Q,Me,Ie,ke,Re,pe,xe,We,dt,at,Je,ht,Bt,Gt="You must first call initialize() and set a source before calling this method",kt="You must first call initialize() and set a valid source and view before calling this method",Ft="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",rt="MediaPlayer not initialized!",vt=this.context,Wt=(0,m.Z)(vt).getInstance(),Nt=(0,Ze.Z)(vt).getInstance(),en=(0,N.Z)(vt).getInstance({settings:Nt});function Jt(){Gn(null),Nn(null),V=null,ge&&(ge.reset(),ge=null),He&&(He.reset(),He=null),Le&&Le.reset(),Nt.reset(),Be&&(Be.reset(),Be=null)}function Yt(){return!!B&&!!at.getElement()}function Dn(){return(0,Pm.e)()}function xn(){if(!H)throw kt;return Me.isPaused()}function rr(){if(!H)throw kt;return Me.getIsDynamic()}function ir(ze){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ve);if(!Dt)return 0;var dn=Me.getOriginalLiveDelay(),Tn=Dt.range.start+ze;return Tn>Dt.range.end-dn&&(Tn=Dt.range.end-dn),Tn}function It(ze){if(!H)throw kt;var Ve=Pn().currentTime;if(ze!==void 0)Ve=ae.getTimeRelativeToStreamId(Ve,ze);else if(Me.getIsDynamic()){var Dt=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,dn=pe.getCurrentDVRInfo(Dt);Ve=dn===null||Ve===0?0:Math.max(0,Ve-dn.range.start)}return Ve}function $t(){if(!H)throw kt;var ze=Pn().duration;if(Me.getIsDynamic()){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ve);ze=Dt?Dt.range.end-Dt.range.start:0}return ze}function Zt(ze){(0,_e.PS)(ze,"boolean"),ne=ze}function un(){Le.restoreDefaultUTCTimingSources()}function vn(){return pe}function Pn(){if(!at.getElement())throw Ft;return at.getElement()}function Nn(ze){if(!ee)throw rt;at.setElement(ze),ze&&(On(),function(){if(!He){var Ve=dashjs.MetricsReporting;if(typeof Ve=="function"){var Dt=Ve(vt).create();He=Dt.createMetricsReporting({debug:en,eventBus:Wt,mediaElement:Pn(),adapter:Ye,dashMetrics:pe,mediaPlayerModel:Ee,events:T.Z,constants:y.Z,metricsConstants:D.Z})}}}(),function(){if(!De){var Ve=dashjs.MssHandler;typeof Ve=="function"&&(Ae.extend(Ve.errors),De=Ve(vt).create({eventBus:Wt,mediaPlayerModel:Ee,dashMetrics:pe,manifestModel:xe,playbackController:Me,streamController:ae,protectionController:ge,baseURLController:je,errHandler:we,events:T.Z,constants:y.Z,debug:en,initSegmentType:nt.w.INIT_SEGMENT_TYPE,BASE64:Xf,ISOBoxer:ca,settings:Nt}))}}(),ae&&ae.switchToVideoElement(fe)),H&&Sn(),qt(fe)}function Fn(ze){if(!J)throw Gt;var Ve=ae.getActiveStreamInfo();return Ve?me.getTracksFor(ze,Ve.id):[]}function Gn(ze){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw rt;typeof ze=="string"&&Je.initialize(ze),Ve==null&&(Ve=NaN),isNaN(Ve)||(Ve=Math.max(0,Ve)),fe=Ve,B=ze,(J||H)&&Sn(),Yt()&&qt(fe)}function bt(){if(!J)throw Gt;var ze=ae.getActiveStreamInfo();return ze?ae.getStreamById(ze.id):null}function Sn(){H=!1,J=!1,Ye.reset(),ae.reset(),Q.reset(),Re.reset(),Me.reset(),Ie.reset(),ke.reset(),Se.reset(),me.reset(),Bt.reset(),ge&&(Nt.get().streaming.protection.keepProtectionMediaKeys?ge.stop():(ge.reset(),ge=null,On())),se.reset(),We.reset(),dt.reset()}function En(){var ze=Lt();ae||(ae=Ho(vt).getInstance()),se||(se=KE(vt).create({errHandler:we,manifestModel:xe,adapter:Ye,mediaController:me,baseURLController:je,videoModel:at,settings:Nt})),ue.setConfig({capabilities:j,customParametersModel:Le,adapter:Ye,settings:Nt,manifestModel:xe,errHandler:we}),ae.setConfig({capabilities:j,capabilitiesFilter:ue,manifestLoader:ze,manifestModel:xe,mediaPlayerModel:Ee,customParametersModel:Le,protectionController:ge,textController:se,adapter:Ye,dashMetrics:pe,errHandler:we,timelineConverter:ie,videoModel:at,playbackController:Me,serviceDescriptionController:Ie,contentSteeringController:ke,abrController:Se,mediaController:me,settings:Nt,baseURLController:je,uriFragmentModel:Je,segmentBaseController:Bt}),Q.setConfig({settings:Nt,playbackController:Me,streamController:ae,videoModel:at,timelineConverter:ie,adapter:Ye}),Me.setConfig({streamController:ae,serviceDescriptionController:Ie,dashMetrics:pe,adapter:Ye,videoModel:at,timelineConverter:ie,settings:Nt}),Re.setConfig({streamController:ae,playbackController:Me,mediaPlayerModel:Ee,videoModel:at,settings:Nt}),Se.setConfig({streamController:ae,domStorage:ht,mediaPlayerModel:Ee,customParametersModel:Le,cmsdModel:dt,dashMetrics:pe,adapter:Ye,videoModel:at,settings:Nt}),We.setConfig({abrController:Se,dashMetrics:pe,playbackController:Me}),dt.setConfig({}),Se.initialize(),ae.initialize(ne,V),se.initialize(),Q.initialize(),Re.initialize(),We.initialize(),dt.initialize(),ke.initialize(),Bt.initialize()}function Lt(){return Im(vt).create({debug:en,errHandler:we,dashMetrics:pe,mediaPlayerModel:Ee,requestModifier:(0,Ke.Z)(vt).getInstance(),mssHandler:De,settings:Nt})}function On(){if(ge)return ge;var ze=dashjs.Protection;if(typeof ze=="function"){var Ve=ze(vt).create();return T.Z.extend(ze.events),_.Z.extend(ze.events,{publicOnly:!0}),Ae.extend(ze.errors),j||(j=(0,Cm.Z)(vt).getInstance()),ge=Ve.createProtectionSystem({debug:en,errHandler:we,videoModel:at,customParametersModel:Le,capabilities:j,eventBus:Wt,events:T.Z,BASE64:Xf,constants:y.Z,cmcdModel:We,settings:Nt})}return null}function st(){if(!ee)throw rt;if(Be)return Be;var ze=dashjs.OfflineController;if(typeof ze=="function"){T.Z.extend(ze.events),_.Z.extend(ze.events,{publicOnly:!0}),Ae.extend(ze.errors);var Ve=Lt(),Dt=Vr(vt).create();return Dt.setConfig({manifestModel:xe,adapter:Ye,manifestLoader:Ve,errHandler:we,contentSteeringController:ke}),Be=ze(vt).create({debug:en,manifestUpdater:Dt,baseURLController:je,manifestLoader:Ve,manifestModel:xe,mediaPlayerModel:Ee,abrController:Se,playbackController:Me,adapter:Ye,errHandler:we,dashMetrics:pe,timelineConverter:ie,segmentBaseController:Bt,schemeLoaderFactory:ye,eventBus:Wt,events:T.Z,errors:Ae,constants:y.Z,settings:Nt,dashConstants:v.Z,urlUtils:(0,St.Z)(vt).getInstance()})}return null}function tt(ze){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(Ve);return Dt?ze+(Dt.manifestInfo.availableFrom.getTime()/1e3+Dt.range.start):0}function qt(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Be&&Be.resetRecords(),!J&&B&&(J=!0,P.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,ze):ae.loadWithManifest(B,ze)),!H&&Yt()&&(H=!0,P.info("Playback Initialized"))}return L={initialize:function(ze,Ve,Dt){var dn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;j||(j=(0,Cm.Z)(vt).getInstance()).setConfig({settings:Nt}),we||(we=Ol(vt).getInstance()),j.supportsMediaSource()?(ee||(ee=!0,ie=_u(vt).getInstance(),Se||(Se=Wn(vt).getInstance()).setConfig({settings:Nt}),ye||(ye=Pi(vt).getInstance()),Me||(Me=R(vt).getInstance()),me||(me=ju(vt).getInstance()),ae||(ae=Ho(vt).getInstance()),Q||(Q=ks(vt).getInstance()),Re||(Re=ho(vt).getInstance()),Ie||(Ie=Nh(vt).getInstance()),ke||(ke=Ca(vt).getInstance()),ue||(ue=DE(vt).getInstance()),Ye=Lm(vt).getInstance(),xe=LE(vt).getInstance(),We=ar(vt).getInstance(),dt=_n(vt).getInstance(),pe=js(vt).getInstance({settings:Nt}),ht=kE(vt).getInstance({settings:Nt}),Ye.setConfig({constants:y.Z,cea608parser:b(),errHandler:we,BASE64:Xf}),je||(je=CE(vt).create()),je.setConfig({adapter:Ye,contentSteeringController:ke}),Ie.setConfig({adapter:Ye}),Bt||(Bt=FE(vt).getInstance({dashMetrics:pe,mediaPlayerModel:Ee,errHandler:we,baseURLController:je,events:T.Z,eventBus:Wt,debug:en,boxParser:(0,aa.Z)(vt).getInstance(),requestModifier:(0,Ke.Z)(vt).getInstance(),errors:Ae})),me.setConfig({domStorage:ht,settings:Nt,customParametersModel:Le}),Ee.setConfig({playbackController:Me,serviceDescriptionController:Ie}),ke.setConfig({adapter:Ye,errHandler:we,dashMetrics:pe,mediaPlayerModel:Ee,manifestModel:xe,serviceDescriptionController:Ie,eventBus:Wt,requestModifier:(0,Ke.Z)(vt).getInstance()}),un(),Zt(Dt===void 0||Dt),st()),ze&&Nn(ze),Ve&&Gn(Ve,dn),P.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):we.error(new ce.Z(Ae.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ae.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(ze){ze&&(ze.capabilities&&(j=ze.capabilities),ze.capabilitiesFilter&&(ue=ze.capabilitiesFilter),ze.streamController&&(ae=ze.streamController),ze.textController&&(se=ze.textController),ze.gapController&&(Q=ze.gapController),ze.playbackController&&(Me=ze.playbackController),ze.serviceDescriptionController&&(Ie=ze.serviceDescriptionController),ze.contentSteeringController&&(ke=ze.contentSteeringController),ze.catchupController&&(Re=ze.catchupController),ze.mediaPlayerModel&&(Ee=ze.mediaPlayerModel),ze.customParametersModel&&(Le=ze.customParametersModel),ze.abrController&&(Se=ze.abrController),ze.schemeLoaderFactory&&(ye=ze.schemeLoaderFactory),ze.mediaController&&(me=ze.mediaController),ze.settings&&(Nt=ze.settings))},on:function(ze,Ve,Dt,dn){Wt.on(ze,Ve,Dt,dn)},off:function(ze,Ve,Dt){Wt.off(ze,Ve,Dt)},extend:function(ze,Ve,Dt){U.Z.extend(ze,Ve,Dt,vt)},attachView:Nn,attachSource:Gn,refreshManifest:function(ze){if(!ee)throw rt;if(!Yt())return ze(null,An);var Ve=this;typeof ze=="function"&&Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Dt(dn){Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Dt,Ve),dn.error?ze(null,dn.error):ze(dn.manifest)},Ve),ae.refreshManifest()},isReady:Yt,preload:function(){if(!at.getElement()&&!J){if(!B)throw An;qt(fe)}},play:function(){if(!H)throw kt;(!ne||xn()&&H)&&Me.play(!0)},isPaused:xn,pause:function(){if(!H)throw kt;Me.pause()},isSeeking:function(){if(!H)throw kt;return Me.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw kt;return Me.getLowLatencyModeEnabled()},seek:function(ze){if(!H)throw kt;if((0,_e.PS)(ze,"number"),isNaN(ze))throw y.Z.BAD_ARGUMENT_ERROR;ze<0&&(ze=0);var Ve=Me.getIsDynamic()?ir(ze):ze,Dt=Pn();!Me.getIsDynamic()&&Dt.duration&&(Ve=Math.min(Dt.duration,Ve)),Me.seek(Ve,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Me.seekToOriginalLive()},setPlaybackRate:function(ze){Pn().playbackRate=ze},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(ze){(0,_e.PS)(ze,"boolean"),Pn().muted=ze},isMuted:function(){return Pn().muted},setVolume:function(ze){if(typeof ze!="number"||isNaN(ze)||ze<0||ze>1)throw y.Z.BAD_ARGUMENT_ERROR;Pn().volume=ze},getVolume:function(){return Pn().volume},time:It,duration:$t,timeAsUTC:function(){if(!H)throw kt;return It()<0?NaN:tt(It())},durationAsUTC:function(){if(!H)throw kt;return tt($t())},getActiveStream:bt,getDVRWindowSize:function(){var ze=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Ve=pe.getCurrentDVRInfo(ze);return Ve?Ve.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var ze=xe.getValue();return ze?je.getBaseUrls(ze):[]},getAvailableLocations:function(){var ze=xe.getValue();if(!ze)return[];var Ve=Ye.getLocation(ze),Dt=ke.getSynthesizedLocationElements(Ve);return Ve.concat(Dt)},getTargetLiveDelay:function(){if(!H)throw kt;return Me.getOriginalLiveDelay()},convertToTimeCode:function(ze){ze=Math.max(ze,0);var Ve=Math.floor(ze/3600),Dt=Math.floor(ze%3600/60),dn=Math.floor(ze%3600%60);return(Ve===0?"":Ve<10?"0"+Ve.toString()+":":Ve.toString()+":")+(Dt<10?"0"+Dt.toString():Dt.toString())+":"+(dn<10?"0"+dn.toString():dn.toString())},formatUTC:function(ze,Ve,Dt){var dn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*ze),sr=Tn.toLocaleDateString(Ve),Zr=Tn.toLocaleTimeString(Ve,{hour12:Dt});return dn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(ze){var Ve=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT];if(ze)return Ve.indexOf(ze)!==-1?vn().getCurrentBufferLevel(ze)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);var Dt=Ve.map(function(dn){return Fn(dn).length>0?vn().getCurrentBufferLevel(dn):Number.MAX_VALUE}).reduce(function(dn,Tn){return Math.min(dn,Tn)});return Dt===Number.MAX_VALUE?NaN:Dt},getTTMLRenderingDiv:function(){return at?at.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(ze){B=ze,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw rt;return H?Me.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(ze){if(!J)throw Gt;return Se.getTopBitrateInfoFor(ze)},setAutoPlay:Zt,getAutoPlay:function(){return ne},getDashMetrics:vn,getQualityFor:function(ze){if(!J)throw Gt;if(ze===y.Z.IMAGE){var Ve=bt();if(!Ve)return-1;var Dt=Ve.getThumbnailController();return Dt?Dt.getCurrentTrackIndex():-1}return Se.getQualityFor(ze)},setQualityFor:function(ze,Ve){var Dt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw Gt;if(ze===y.Z.IMAGE){var dn=bt();if(!dn)return;var Tn=dn.getThumbnailController();Tn&&Tn.setTrackByIndex(Ve)}Se.setPlaybackQuality(ze,ae.getActiveStreamInfo(),Ve,{forceReplace:Dt})},updatePortalSize:function(){Se.setElementSize(),Se.setWindowResizeEventCalled(!0)},enableText:function(ze){var Ve=ae.getActiveStreamInfo();return!(!Ve||!se)&&se.enableText(Ve.id,ze)},enableForcedTextStreaming:function(ze){return!(!ae.getActiveStreamInfo()||!se)&&se.enableForcedTextStreaming(ze)},isTextEnabled:function(){var ze=ae.getActiveStreamInfo();return!(!ze||!se)&&se.isTextEnabled(ze)},setTextTrack:function(ze){if(!H)throw kt;var Ve=ae.getActiveStreamInfo();Ve&&se&&se.setTextTrack(Ve.id,ze)},getBitrateInfoListFor:function(ze){if(!J)throw Gt;var Ve=bt();return Ve?Ve.getBitrateListFor(ze):[]},getStreamsFromManifest:function(ze){if(!J)throw Gt;return Ye.getStreamsInfo(ze)},getTracksFor:Fn,getTracksForTypeFromManifest:function(ze,Ve,Dt){if(!J)throw Gt;return(Dt=Dt||Ye.getStreamsInfo(Ve,1)[0])?Ye.getAllMediaInfoForType(Dt,ze,Ve):[]},getCurrentTrackFor:function(ze){if(!J)throw Gt;var Ve=ae.getActiveStreamInfo();return me.getCurrentTrackFor(ze,Ve.id)},setInitialMediaSettingsFor:function(ze,Ve){if(!ee)throw rt;me.setInitialSettings(ze,Ve)},getInitialMediaSettingsFor:function(ze){if(!ee)throw rt;return me.getInitialSettings(ze)},setCurrentTrack:function(ze){var Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw Gt;me.setTrack(ze,Ve)},addABRCustomRule:function(ze,Ve,Dt){Le.addAbrCustomRule(ze,Ve,Dt)},removeABRCustomRule:function(ze){Le.removeAbrCustomRule(ze)},removeAllABRCustomRule:function(){Le.removeAllAbrCustomRule()},getABRCustomRules:function(){return Le.getAbrCustomRules()},getAverageThroughput:function(ze){var Ve=Se.getThroughputHistory(),Dt=Me.getIsDynamic();return Ve?Ve.getAverageThroughput(ze,Dt):0},retrieveManifest:function(ze,Ve){var Dt=Lt(),dn=this;Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?Ve(null,sr.error):Ve(sr.manifest),Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,dn),Dt.reset()},dn),Je.initialize(ze),Dt.load(ze)},addUTCTimingSource:function(ze,Ve){Le.addUTCTimingSource(ze,Ve)},removeUTCTimingSource:function(ze,Ve){Le.removeUTCTimingSource(ze,Ve)},clearDefaultUTCTimingSources:function(){Le.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(ze,Ve){Le.setXHRWithCredentialsForType(ze,Ve)},getXHRWithCredentialsForType:function(ze){return Le.getXHRWithCredentialsForType(ze)},getProtectionController:function(){return On()},attachProtectionController:function(ze){ge=ze},setProtectionData:function(ze){V=ze,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(ze){Le.registerLicenseRequestFilter(ze)},registerLicenseResponseFilter:function(ze){Le.registerLicenseResponseFilter(ze)},unregisterLicenseRequestFilter:function(ze){Le.unregisterLicenseRequestFilter(ze)},unregisterLicenseResponseFilter:function(ze){Le.unregisterLicenseResponseFilter(ze)},registerCustomCapabilitiesFilter:function(ze){Le.registerCustomCapabilitiesFilter(ze)},unregisterCustomCapabilitiesFilter:function(ze){Le.unregisterCustomCapabilitiesFilter(ze)},setCustomInitialTrackSelectionFunction:function(ze){Le.setCustomInitialTrackSelectionFunction(ze)},resetCustomInitialTrackSelectionFunction:function(){Le.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(ze){if(!at.getElement())throw Ft;at.setTTMLRenderingDiv(ze)},attachVttRenderingDiv:function(ze){if(!at.getElement())throw Ft;at.setVttRenderingDiv(ze)},getCurrentTextTrackIndex:function(){var ze=ae.getActiveStreamInfo();if(ze&&se)return se.getCurrentTrackIdx(ze.id)},provideThumbnail:function(ze,Ve){if(typeof Ve=="function")if(ze<0)Ve(null);else{var Dt=Me.getIsDynamic()?ir(ze):ze,dn=ae.getStreamForTime(Dt);if(dn!==null){var Tn=dn.getThumbnailController();if(Tn)return Tn.provide(Dt,Ve);Ve(null)}else Ve(null)}},getDashAdapter:function(){return Ye},getOfflineController:function(){return st()},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getSettings:function(){return Nt.get()},updateSettings:function(ze){Nt.update(ze)},resetSettings:function(){Nt.reset()},reset:Jt,destroy:function(){Jt(),U.Z.deleteSingletonInstances(vt)}},P=en.getLogger(L),ee=!1,H=!1,J=!1,ne=!0,fe=NaN,ge=null,Be=null,V=null,Ye=null,Bt=null,T.Z.extend(_.Z),Ee=Ll(vt).getInstance(),Le=(0,ti.Z)(vt).getInstance(),at=Sr(vt).getInstance(),Je=OE(vt).getInstance(),L}Bc.__dashjs_factory_name="MediaPlayer";var jc=U.Z.getClassFactory(Bc);jc.events=_.Z,jc.errors=Ae,U.Z.updateClassFactory(Bc.__dashjs_factory_name,jc);var Vm=jc},8825:function(C,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function b(m,T){return b=Object.setPrototypeOf||function(U,N){return U.__proto__=N,U},b(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&b(I,R)})(_,m);var T,U,N=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var Z=v(this).constructor;I=Reflect.construct(R,arguments,Z)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(w(8342).Z));g.Z=D},3393:function(C,g){function w(b,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}var F=new(function(){function b(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,b),this.init()}var y,v;return y=b,(v=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(y.prototype,v),b}());g.Z=F},3860:function(C,g){function w(b,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}var F=new(function(){function b(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,b),this.init()}var y,v;return y=b,(v=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(y.prototype,v),b}());g.Z=F},8080:function(C,g,w){w.d(g,{default:function(){return q}});var F=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};F.SSL_CONNECTION_FAILED_PREFIX="SSL",F.DNS_RESOLUTION_FAILED="C00",F.HOST_UNREACHABLE="C01",F.CONNECTION_REFUSED="C02",F.CONNECTION_ERROR="C03",F.CORRUPT_MEDIA_ISOBMFF="M00",F.CORRUPT_MEDIA_OTHER="M01",F.BASE_URL_CHANGED="F00",F.BECAME_REPORTER="S00";var b=F,y=w(1180);function v(K){var _e,de,Ke=(K=K||{}).eventBus,St=K.dashMetrics,ot=K.metricsConstants,it=K.events;function et(Qt){var nn=new b;if(de){for(var Ot in Qt)Qt.hasOwnProperty(Ot)&&(nn[Ot]=Qt[Ot]);nn.mpdurl||(nn.mpdurl=de.originalUrl||de.url),nn.terror||(nn.terror=new Date),St.addDVBErrors(nn)}}function ft(Qt){Qt.error||(de=Qt.manifest)}function yt(Qt){et({errorcode:b.BASE_URL_CHANGED,servicelocation:Qt.entry})}function _t(){et({errorcode:b.BECAME_REPORTER})}function Rt(Qt){var nn;Qt.metric===ot.HTTP_REQUEST&&((nn=Qt.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&et({errorcode:nn.responsecode||b.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function pn(Qt){var nn;switch(Qt.error?Qt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=b.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=b.CORRUPT_MEDIA_OTHER;break;default:return}et({errorcode:nn})}return _e={initialize:function(){Ke.on(it.MANIFEST_UPDATED,ft,_e),Ke.on(it.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,_e),Ke.on(it.METRIC_ADDED,Rt,_e),Ke.on(it.METRIC_UPDATED,Rt,_e),Ke.on(it.PLAYBACK_ERROR,pn,_e),Ke.on(y.Z.BECAME_REPORTING_PLAYER,_t,_e)},reset:function(){Ke.off(it.MANIFEST_UPDATED,ft,_e),Ke.off(it.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,_e),Ke.off(it.METRIC_ADDED,Rt,_e),Ke.off(it.METRIC_UPDATED,Rt,_e),Ke.off(it.PLAYBACK_ERROR,pn,_e),Ke.off(y.Z.BECAME_REPORTING_PLAYER,_t,_e)}}}v.__dashjs_factory_name="DVBErrorsTranslator";var D=dashjs.FactoryMaker.getSingletonFactory(v),m=w(2295);function T(K){K=K||{};var _e,de,Ke=!1,St=this.context,ot=K.mediaElement;return _e={initialize:function(it){it&&it.length&&(it.forEach(function(et){var ft=et.starttime,yt=ft+et.duration;de.add(ft,yt)}),Ke=!!it[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var it,et=de.length;if(!et)return!0;it=Ke?new Date().getTime()/1e3:ot.currentTime;for(var ft=0;ft<et;ft+=1){var yt=de.start(ft),_t=de.end(ft);if(yt<=it&&it<_t)return!0}return!1}},de=(0,m.Z)(St).create(),_e}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function N(){return{serialise:function K(_e){var de,Ke,St=[],ot=[];for(de in _e)if(_e.hasOwnProperty(de)&&de.indexOf("_")!==0){if((Ke=_e[de])==null&&(Ke=""),Array.isArray(Ke)){if(!Ke.length)continue;ot=[],Ke.forEach(function(it){var et=Object.prototype.toString.call(it).slice(8,-1)!=="Object";ot.push(et?it:K(it))}),Ke=ot.map(encodeURIComponent).join(",")}else typeof Ke=="string"?Ke=encodeURIComponent(Ke):Ke instanceof Date?Ke=Ke.toISOString():typeof Ke=="number"&&(Ke=Math.round(Ke));St.push(de+"="+Ke)}return St.join("&")}}}N.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(N);function I(){var K,_e,de,Ke=window.crypto||window.msCrypto,St=Uint32Array,ot=Math.pow(2,8*St.BYTES_PER_ELEMENT)-1;function it(){Ke&&(K||(K=new St(10)),Ke.getRandomValues(K),_e=0)}return de={random:function(et,ft){var yt;return et||(et=0),ft||(ft=1),Ke?(_e===K.length&&it(),yt=K[_e]/ot,_e+=1):yt=Math.random(),yt*(ft-et)+et}},it(),de}I.__dashjs_factory_name="RNG";var R=dashjs.FactoryMaker.getSingletonFactory(I),Z=w(5717);function z(K){var _e;K=K||{};var de,Ke,St,ot,it,et,ft,yt=this.context,_t=[],Rt=K.metricsConstants;function pn(){ot=!1,it=!1,et=null,ft=null}return _e={report:function(Qt,nn){Array.isArray(nn)||(nn=[nn]),it&&ft.isEnabled()&&nn.forEach(function(Ot){var Un=de.serialise(Ot);Qt!==Rt.DVB_ERRORS&&(Un="metricname=".concat(Qt,"&").concat(Un)),function(gr,Pr,dr){var ei=new XMLHttpRequest;ei.withCredentials=Ke.getXHRWithCredentialsForType(Rt.HTTP_REQUEST_DVB_REPORTING_TYPE);var eo=function(){var Or=_t.indexOf(ei);Or!==-1&&(_t.splice(Or,1),!(ei.status>=200&&ei.status<300)&&dr&&dr())};_t.push(ei);try{ei.open("GET",gr),ei.onloadend=eo,ei.onerror=eo,ei.send()}catch(Or){ei.onerror()}}(Un="".concat(et,"?").concat(Un),0,function(){it=!1})})},initialize:function(Qt,nn){var Ot;if(ft=nn,!(et=Qt.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");ot||((Ot=Qt.dvbProbability)&&(Ot===1e3||Ot/1e3>=St.random())&&(it=!0),ot=!0)},reset:function(){pn()}},de=_(yt).getInstance(),St=R(yt).getInstance(),Ke=(0,Z.Z)(yt).getInstance(),pn(),_e}z.__dashjs_factory_name="DVBReporting";var W=dashjs.FactoryMaker.getClassFactory(z);function X(K){K=K||{};var _e,de={"urn:dvb:dash:reporting:2014":W},Ke=this.context,St=K.debug?K.debug.getLogger(_e):{},ot=K.metricsConstants,it=K.mediaPlayerModel||{};return{create:function(et,ft){var yt;try{(yt=de[et.schemeIdUri](Ke).create({metricsConstants:ot,mediaPlayerModel:it})).initialize(et,ft)}catch(_t){yt=null,St.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(et.schemeIdUri," (").concat(_t.message,")"))}return yt},register:function(et,ft){de[et]=ft},unregister:function(et){delete de[et]}}}X.__dashjs_factory_name="ReportingFactory";var le=dashjs.FactoryMaker.getSingletonFactory(X);function x(K){var _e=[],de=le(this.context).getInstance(K);return{initialize:function(Ke,St){Ke.some(function(ot){var it=de.create(ot,St);if(it)return _e.push(it),!0})},reset:function(){_e.forEach(function(Ke){return Ke.reset()}),_e=[]},report:function(Ke,St){_e.forEach(function(ot){return ot.report(Ke,St)})}}}x.__dashjs_factory_name="ReportingController";var $=dashjs.FactoryMaker.getClassFactory(x);function ce(){return{reconstructFullMetricName:function(K,_e,de){var Ke=K;return _e&&(Ke+="("+_e,de&&de.length&&(Ke+=","+de),Ke+=")"),Ke},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function he(K){var _e,de,Ke,St,ot;K=K||{};var it=this.context,et=oe(it).getInstance(),ft=[],yt=K.metricsConstants;function _t(){var Rt=function(){try{return Object.keys(ft).map(function(pn){return ft[pn]}).reduce(function(pn,Qt){return pn.level<Qt.level?pn:Qt})}catch(pn){return}}();Rt&&ot!==Rt.t&&(ot=Rt.t,_e.report(Ke,Rt))}return{initialize:function(Rt,pn,Qt){pn&&(de=et.validateN(Qt),_e=pn,Ke=et.reconstructFullMetricName(Rt,Qt),St=setInterval(_t,de))},reset:function(){clearInterval(St),St=null,de=0,_e=null,ot=null},handleNewMetric:function(Rt,pn,Qt){Rt===yt.BUFFER_LEVEL&&(ft[Qt]=pn)}}}he.__dashjs_factory_name="BufferLevelHandler";var Ce=dashjs.FactoryMaker.getClassFactory(he),Xe=dashjs.FactoryMaker.getClassFactory(function(K){var _e,de=(K=K||{}).eventBus,Ke=K.metricsConstants;function St(){de.off(y.Z.METRICS_INITIALISATION_COMPLETE,St,this),de.trigger(y.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(ot,it){it&&(_e=it,de.on(y.Z.METRICS_INITIALISATION_COMPLETE,St,this))},reset:function(){_e=null},handleNewMetric:function(ot,it){ot===Ke.DVB_ERRORS&&_e&&_e.report(ot,it)}}});function Ae(K){var _e,de,Ke,St,ot;K=K||{};var it=[],et=oe(this.context).getInstance(),ft=K.metricsConstants;function yt(){var _t=it;_t.length&&_e&&_e.report(St,_t),it=[]}return{initialize:function(_t,Rt,pn,Qt){Rt&&(de=et.validateN(pn),_e=Rt,Qt&&Qt.length&&(Ke=Qt),St=et.reconstructFullMetricName(_t,pn,Qt),ot=setInterval(yt,de))},reset:function(){clearInterval(ot),ot=null,de=null,Ke=null,it=[],_e=null},handleNewMetric:function(_t,Rt){_t===ft.HTTP_REQUEST&&(Ke&&Ke!==Rt.type||it.push(Rt))}}}Ae.__dashjs_factory_name="HttpListHandler";var Ze=dashjs.FactoryMaker.getClassFactory(Ae);function nt(){var K,_e;return{initialize:function(de,Ke){K=de,_e=Ke},reset:function(){_e=null,K=void 0},handleNewMetric:function(de,Ke){de===K&&_e&&_e.report(K,Ke)}}}nt.__dashjs_factory_name="GenericMetricHandler";var lt=dashjs.FactoryMaker.getClassFactory(nt);function qe(K){var _e,de=(K=K||{}).debug?K.debug.getLogger(_e):{},Ke=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,St=this.context,ot={BufferLevel:Ce,DVBErrors:Xe,HttpList:Ze,PlayList:lt,RepSwitchList:lt,TcpList:lt};return{create:function(it,et){var ft,yt=it.match(Ke);if(yt){try{(ft=ot[yt[1]](St).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(yt[1],et,yt[3],yt[5])}catch(_t){ft=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(yt[1]," with args ").concat(yt[3],", ").concat(yt[5]," (").concat(_t.message,")"))}return ft}},register:function(it,et){ot[it]=et},unregister:function(it){delete ot[it]}}}qe.__dashjs_factory_name="MetricsHandlerFactory";var ut=dashjs.FactoryMaker.getSingletonFactory(qe);function At(K){K=K||{};var _e,de=[],Ke=this.context,St=K.eventBus,ot=K.events,it=ut(Ke).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function et(ft){de.forEach(function(yt){yt.handleNewMetric(ft.metric,ft.value,ft.mediaType)})}return _e={initialize:function(ft,yt){ft.split(",").forEach(function(_t,Rt,pn){var Qt;if(_t.indexOf("(")!==-1&&_t.indexOf(")")===-1){var nn=pn[Rt+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(_t+=","+nn,delete pn[Rt+1])}(Qt=it.create(_t,yt))&&de.push(Qt)}),St.on(ot.METRIC_ADDED,et,_e),St.on(ot.METRIC_UPDATED,et,_e)},reset:function(){St.off(ot.METRIC_ADDED,et,_e),St.off(ot.METRIC_UPDATED,et,_e),de.forEach(function(ft){return ft.reset()}),de=[]}}}At.__dashjs_factory_name="MetricsHandlersController";var Oe=dashjs.FactoryMaker.getClassFactory(At);function Qe(K){var _e,de,Ke;K=K||{};var St=this.context;function ot(){_e&&_e.reset(),de&&de.reset(),Ke&&Ke.reset()}return{initialize:function(it){try{(Ke=U(St).create({mediaElement:K.mediaElement})).initialize(it.Range),(de=$(St).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(it.Reporting,Ke),(_e=Oe(St).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(it.metrics,de)}catch(et){throw ot(),et}},reset:ot}}Qe.__dashjs_factory_name="MetricsController";var ct=dashjs.FactoryMaker.getClassFactory(Qe),Xt=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Kt=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Tt=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Ct(K){var _e=(K=K||{}).adapter,de=K.constants;return{getMetrics:function(Ke){var St=[];return Ke&&Ke.Metrics_asArray&&Ke.Metrics_asArray.forEach(function(ot){var it=new Xt,et=_e.getIsDynamic(Ke);ot.hasOwnProperty("metrics")&&(it.metrics=ot.metrics,ot.Range_asArray&&ot.Range_asArray.forEach(function(ft){var yt=new Kt;yt.starttime=function(_t,Rt,pn){var Qt,nn,Ot=0;return Rt?Ot=_e.getAvailabilityStartTime(_t)/1e3:(Qt=_e.getRegularPeriods(_t)).length&&(Ot=Qt[0].start),nn=Ot,pn&&pn.hasOwnProperty(de.START_TIME)&&(nn+=pn.starttime),nn}(Ke,et,ft),ft.hasOwnProperty("duration")?yt.duration=ft.duration:yt.duration=_e.getDuration(Ke),yt._useWallClockTime=et,it.Range.push(yt)}),ot.Reporting_asArray&&(ot.Reporting_asArray.forEach(function(ft){var yt=new Tt;ft.hasOwnProperty(de.SCHEME_ID_URI)&&(yt.schemeIdUri=ft.schemeIdUri,ft.hasOwnProperty("value")&&(yt.value=ft.value),ft.hasOwnProperty(de.DVB_REPORTING_URL)&&(yt.dvbReportingUrl=ft[de.DVB_REPORTING_URL]),ft.hasOwnProperty(de.DVB_PROBABILITY)&&(yt.dvbProbability=ft[de.DVB_PROBABILITY]),it.Reporting.push(yt))}),St.push(it)))}),St}}}Ct.__dashjs_factory_name="ManifestParsing";var be=dashjs.FactoryMaker.getSingletonFactory(Ct);function re(K){var _e;K=K||{};var de={},Ke=this.context,St=K.eventBus,ot=K.events;function it(ft){if(!ft.error){var yt=Object.keys(de);be(Ke).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ft.manifest).forEach(function(_t){var Rt=JSON.stringify(_t);if(de.hasOwnProperty(Rt))yt.splice(Rt,1);else try{var pn=ct(Ke).create(K);pn.initialize(_t),de[Rt]=pn}catch(Qt){}}),yt.forEach(function(_t){de[_t].reset(),delete de[_t]}),St.trigger(y.Z.METRICS_INITIALISATION_COMPLETE)}}function et(){Object.keys(de).forEach(function(ft){de[ft].reset()}),de={}}return _e={reset:function(){St.off(ot.MANIFEST_UPDATED,it,_e),St.off(ot.STREAM_TEARDOWN_COMPLETE,et,_e)}},St.on(ot.MANIFEST_UPDATED,it,_e),St.on(ot.STREAM_TEARDOWN_COMPLETE,et,_e),_e}re.__dashjs_factory_name="MetricsCollectionController";var Fe=dashjs.FactoryMaker.getClassFactory(re);function O(){var K=this.context;return{createMetricsReporting:function(_e){return D(K).getInstance({eventBus:_e.eventBus,dashMetrics:_e.dashMetrics,metricsConstants:_e.metricsConstants,events:_e.events}).initialize(),Fe(K).create(_e)},getReportingFactory:function(){return le(K).getInstance()},getMetricsHandlerFactory:function(){return ut(K).getInstance()}}}O.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(O);M.events=y.Z,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,M);var q=M},1180:function(C,g,w){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function b(m,T){return b=Object.setPrototypeOf||function(U,N){return U.__proto__=N,U},b(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),R&&b(I,R)})(_,m);var T,U,N=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,R=v(T);if(U){var Z=v(this).constructor;I=Reflect.construct(R,arguments,Z)}else I=R.apply(this,arguments);return y(this,I)});function _(){var I;return function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(w(8342).Z));g.Z=D},5717:function(C,g,w){var F=w(2610),b=w(5448),y=w(1264),v=w(3106),D=w(1767),m=w(3393);function T(){var U,N,_,I,R,Z,z,W,X=this.context,le=(0,y.Z)(X).getInstance();function x(){I=[],R=[],Z=[],W=[],z=null,N=[]}function $(Ce,Xe){var Ae=-1;Ce.some(function(Ze,nt){if(Ze===Xe)return Ae=nt,!0}),Ae<0||Ce.splice(Ae,1)}function ce(Ce){var Xe;for(Xe=0;Xe<W.length;Xe++)if(W[Xe].rulename===Ce)return Xe;return-1}function oe(Ce,Xe){he(Ce,Xe);var Ae=new F.Z;Ae.schemeIdUri=Ce,Ae.value=Xe,N.push(Ae)}function he(Ce,Xe){(0,v.PS)(Ce,"string"),(0,v.PS)(Xe,"string"),N.forEach(function(Ae,Ze){Ae.schemeIdUri===Ce&&Ae.value===Xe&&N.splice(Ze,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return z},setCustomInitialTrackSelectionFunction:function(Ce){z=Ce},resetCustomInitialTrackSelectionFunction:function(){z=null},getLicenseResponseFilters:function(){return R},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return Z},registerCustomCapabilitiesFilter:function(Ce){Z.push(Ce)},registerLicenseResponseFilter:function(Ce){R.push(Ce)},registerLicenseRequestFilter:function(Ce){I.push(Ce)},unregisterCustomCapabilitiesFilter:function(Ce){$(Z,Ce)},unregisterLicenseResponseFilter:function(Ce){$(R,Ce)},unregisterLicenseRequestFilter:function(Ce){$(I,Ce)},addAbrCustomRule:function(Ce,Xe,Ae){if(typeof Ce!="string"||Ce!==D.Z.ABANDON_FRAGMENT_RULES&&Ce!==D.Z.QUALITY_SWITCH_RULES||typeof Xe!="string")throw m.Z.BAD_ARGUMENT_ERROR;var Ze=ce(Xe);Ze===-1?W.push({type:Ce,rulename:Xe,rule:Ae}):(W[Ze].type=Ce,W[Ze].rule=Ae)},removeAllAbrCustomRule:function(){W=[]},removeAbrCustomRule:function(Ce){if(Ce){var Xe=ce(Ce);Xe!==-1&&W.splice(Xe,1)}else W=[]},getAbrCustomRules:function(){return W},addUTCTimingSource:oe,removeUTCTimingSource:he,getUTCTimingSources:function(){return N},clearDefaultUTCTimingSources:function(){N=[]},restoreDefaultUTCTimingSources:function(){var Ce=le.get().streaming.utcSynchronization.defaultTimingSource;oe(Ce.scheme,Ce.value)},setXHRWithCredentialsForType:function Ce(Xe,Ae){Xe?_[Xe]=!!Ae:Object.keys(_).forEach(function(Ze){Ce(Ze,Ae)})},getXHRWithCredentialsForType:function(Ce){var Xe=_[Ce];return Xe===void 0?_.default:Xe},setConfig:function(){},reset:function(){x()}},_={default:!1},x(),U}T.__dashjs_factory_name="CustomParametersModel",g.Z=b.Z.getSingletonFactory(T)},9032:function(C,g,w){var F=w(5448),b=w(7473);function y(D){var m=(D=D||{}).requestModifier;function T(U){var N=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=N),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var R in U.headers){var Z=U.headers[R];Z&&I.setRequestHeader(R,Z)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,b.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var N=U.response;N.onloadend=N.onerror=N.onprogress=void 0,N.abort()}}}y.__dashjs_factory_name="XHRLoader";var v=F.Z.getClassFactory(y);g.Z=v},1737:function(C,g,w){function F(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}w.d(g,{default:function(){return Lu}});var b={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},y=function(){function tn(){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(wt){for(var zt=null,Mt=0;Mt<wt.length;++Mt){var Vt=wt[Mt];Vt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Vt.value.toLowerCase()!=="cenc"&&Vt.value.toLowerCase()!=="cbcs"||(zt=Vt)}return zt}},{key:"getPSSHData",value:function(wt){var zt=8,Mt=new DataView(wt),Vt=Mt.getUint8(zt);return zt+=20,Vt>0&&(zt+=4+16*Mt.getUint32(zt)),zt+=4,wt.slice(zt)}},{key:"getPSSHForKeySystem",value:function(wt,zt){var Mt=tn.parsePSSHList(zt);return wt&&Mt.hasOwnProperty(wt.uuid.toLowerCase())?Mt[wt.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(wt,zt){return"pssh"in wt?(wt.pssh.__text=wt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),zt.decodeArray(wt.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(wt){if(wt==null)return[];for(var zt=new DataView(wt.buffer||wt),Mt={},Vt=0;;){var mn,In,Zn=void 0,bn=Vt;if(Vt>=zt.buffer.byteLength)break;if(mn=Vt+zt.getUint32(Vt),Vt+=4,zt.getUint32(Vt)===1886614376)if(Vt+=4,(In=zt.getUint8(Vt))===0||In===1){Vt++,Vt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;Vt+=6,Vt+=4,Mt[Zn=Zn.toLowerCase()]=zt.buffer.slice(bn,mn),Vt=mn}else Vt=mn;else Vt=mn}return Mt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(wt,zt){try{if(!wt||wt.length===0)return null;for(var Mt=0,Vt=null;Mt<wt.length&&!Vt;){var mn=wt[Mt];if(mn&&mn.contentProtection&&mn.contentProtection.length>0){var In=mn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===zt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!Vt;){for(var bn=In[Zn],Rn=0;Rn<b.attributes.length&&!Vt;){for(var on=0,Bn=b.attributes[Rn];on<b.prefixes.length&&!Vt;){var kn=b.prefixes[on];bn[Bn]&&bn[Bn].__prefix&&bn[Bn].__prefix===kn&&bn[Bn].__text&&(Vt=bn[Bn].__text),on+=1}Rn+=1}Zn+=1}}Mt+=1}return Vt}catch(er){return null}}}],an&&F(sn,an),tn}(),v=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},D=function tn(sn,an,wt,zt,Mt){(function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=wt,this.persistentState=zt,this.sessionTypes=Mt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},T(tn,sn)}function U(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function N(tn){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},N(tn)}var _=new(function(tn){(function(Mt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Vt&&T(Mt,Vt)})(zt,tn);var sn,an,wt=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,Vt=N(sn);if(an){var mn=N(this).constructor;Mt=Reflect.construct(Vt,arguments,mn)}else Mt=Vt.apply(this,arguments);return U(this,Mt)});function zt(){var Mt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Mt=wt.call(this)).MEDIA_KEYERR_CODE=100,Mt.MEDIA_KEYERR_UNKNOWN_CODE=101,Mt.MEDIA_KEYERR_CLIENT_CODE=102,Mt.MEDIA_KEYERR_SERVICE_CODE=103,Mt.MEDIA_KEYERR_OUTPUT_CODE=104,Mt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Mt.MEDIA_KEYERR_DOMAIN_CODE=106,Mt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Mt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Mt.KEY_SESSION_CREATED_ERROR_CODE=113,Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Mt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Mt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Mt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Mt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Mt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Mt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Mt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Mt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Mt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Mt}return zt}(w(2230).Z)),I=w(5459),R=function tn(sn,an,wt,zt,Mt,Vt,mn,In){(function(Zn,bn){if(!(Zn instanceof bn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=wt,this.headers=zt,this.withCredentials=Mt,this.messageType=Vt,this.sessionId=mn,this.data=In},Z=function tn(sn,an,wt){(function(zt,Mt){if(!(zt instanceof Mt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=wt},z=w(7855),W=w(703),X=w(3393),le=w(5448);function x(tn){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},x(tn)}function $(tn){var sn,an,wt,zt,Mt,Vt,mn,In,Zn,bn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Vn=tn.constants,rn=[],fn=tn.cmcdModel,Cn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function Cr(_n,Xn){In||Zn?In&&Lr():function(hr,ti){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Pi,ui){return(Mt&&Mt[Pi.ks.systemString]&&Mt[Pi.ks.systemString].priority>=0?Mt[Pi.ks.systemString].priority:hr.length)-(Mt&&Mt[ui.ks.systemString]&&Mt[ui.ks.systemString].priority>=0?Mt[ui.ks.systemString].priority:hr.length)});for(var Xr=0;Xr<hr.length;Xr++){var na=Ao(hr[Xr]);Bi.push({ks:hr[Xr].ks,configs:[na],protData:hr[Xr].protData})}Bn.requestKeySystemAccess(Bi).then(function(Pi){var ui=(Mr=Pi.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+ui+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Pi){if(In=Pi,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var ui=qr(In);ui&&ui.serverCertificate&&ui.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(ui.serverCertificate).buffer),Lr()}}).catch(function(Pi){In=null,Zn=!1,ti||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Pi.error)})})}}(_n,Xn)}function Lr(){for(var _n,Xn=0;Xn<wt.length;Xn++)for(_n=0;_n<wt[Xn].length;_n++)if(In===wt[Xn][_n].ks){Yi(wt[Xn][_n]);break}wt=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var Xn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(Xn))}_n.sessionId?ro(_n):_n.initData!==null&&Br(_n)}function ro(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var Xn=y.getPSSHForKeySystem(In,_n?_n.initData:null);if(Xn){if(function(hr){if(!hr)return!1;try{for(var ti=Bn.getSessions(),Mr=0;Mr<ti.length;Mr++)if(ti[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||hi(Xn))return;try{_n.initData=Xn,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var Xn=_n.systemString;if(Mt)return Xn in Mt?Mt[Xn]:null}return null}function hi(_n){if(!_n)return!1;try{for(var Xn=Bn.getAllInitData(),hr=0;hr<Xn.length;hr++)if(on.initDataEquals(_n,Xn[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ti){return!1}}function vi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Os,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Os,sn))}function Ao(_n){var Xn=_n.protData,hr=[],ti=[],Mr=Xn&&Xn.audioRobustness&&Xn.audioRobustness.length>0?Xn.audioRobustness:mn,Bi=Xn&&Xn.videoRobustness&&Xn.videoRobustness.length>0?Xn.videoRobustness:mn,Xr=_n.sessionType,na=Xn&&Xn.distinctiveIdentifier?Xn.distinctiveIdentifier:"optional",Pi=Xn&&Xn.persistentState?Xn.persistentState:Xr==="temporary"?"optional":"required";return zt.forEach(function(ui){ui.type===Vn.AUDIO?hr.push(new v(ui.codec,Mr)):ui.type===Vn.VIDEO&&ti.push(new v(ui.codec,Bi))}),new D(hr,ti,na,Pi,[Xr])}function io(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function ta(_n){an.debug("DRM: onKeyMessage");var Xn=_n.data;kn.trigger(er.KEY_MESSAGE,{data:Xn});var hr=Xn.messageType?Xn.messageType:"license-request",ti=Xn.message,Mr=Xn.sessionToken,Bi=qr(In),Xr=on.getLicenseServerModelInstance(In,Bi,hr),na={sessionToken:Mr,messageType:hr};if(ti&&ti.byteLength!==0){if(!Xr)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void bi(na);if(on.isClearKey(In)){var Pi=on.processClearKeyLicenseRequest(In,Bi,ti);if(Pi&&Pi.keyPairs&&Pi.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),bi(na),void Bn.updateKeySession(Mr,Pi)}(function(ui,Io,Wi){var qo=ui.sessionToken,ra=ui.messageType?ui.messageType:"license-request",gt={sessionToken:qo,messageType:ra},ia=In?In.systemString:null,Ls=function(xr,Es,_s,Yr,Sc){var Ca=null,bl=Yr.message;if(xr&&xr.serverURL){var sa=xr.serverURL;typeof sa=="string"&&sa!==""?Ca=sa:x(sa)==="object"&&sa.hasOwnProperty(Es)&&(Ca=sa[Es])}else if(xr&&xr.laURL&&xr.laURL!=="")Ca=xr.laURL;else if(!(Ca=y.getLicenseServerUrlFromMediaInfo(zt,In.schemeIdURI))&&!on.isClearKey(In)){var Ts=y.getPSSHData(_s.initData);(Ca=In.getLicenseServerURLFromInitData(Ts))||(Ca=Yr.laURL)}return Ca=Sc.getServerURLFromMessage(Ca,bl,Es)}(Wi,ra,qo,ui,Io);if(Ls){var pr={},Co=!1;Wi&&_c(pr,Wi.httpRequestHeaders);var fu=ui.message;_c(pr,In.getRequestHeadersFromMessage(fu)),Object.keys(pr).forEach(function(xr){xr.toLowerCase()==="authorization"&&(Co=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(Co=Wi.withCredentials);var Cl=function(xr){if(Bn)if(xr.status>=200&&xr.status<=299){var Es=W.Z.parseHttpHeaders(xr.getAllResponseHeaders?xr.getAllResponseHeaders():null),_s=new Z(xr.responseURL,Es,xr.response);si(Jn.getLicenseResponseFilters(),_s).then(function(){var Yr=Io.getLicenseMessage(_s.data,ia,ra);Yr!==null?(bi(gt),Bn.updateKeySession(qo,Yr)):Mf(xr,gt,ia,ra,Io)})}else Mf(xr,gt,ia,ra,Io)},vs=function(xr){bi(gt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ia+' update, XHR aborted. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},Ka=function(xr){bi(gt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ia+' update, XHR error. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},ku=In.getLicenseRequestFromMessage(fu),Fu=Io.getHTTPMethod(ra),oa=Io.getResponseType(ia,ra),aa=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,du=qo.getSessionId()||null,ys=new R(Ls,Fu,oa,pr,Co,ra,du,ku),Tc=isNaN(Cn.get().streaming.retryAttempts[z.w.LICENSE])?3:Cn.get().streaming.retryAttempts[z.w.LICENSE];si(Jn.getLicenseRequestFilters(),ys).then(function(){Il(ys,Tc,aa,Cl,vs,Ka)})}else bi(gt,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(Xn,Xr,Bi)}else bi(na,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function bi(_n,Xn){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:Xn})}function Il(_n,Xn,hr,ti,Mr,Bi){var Xr=new XMLHttpRequest;if(Cn.get().streaming.cmcd&&Cn.get().streaming.cmcd.enabled&&Cn.get().streaming.cmcd.mode===X.Z.CMCD_MODE_QUERY){var na=fn.getQueryParameter({url:_n.url,type:z.w.LICENSE});na&&(_n.url=W.Z.addAditionalQueryParameterToUrl(_n.url,[na]))}for(var Pi in Xr.open(_n.method,_n.url,!0),Xr.responseType=_n.responseType,Xr.withCredentials=_n.withCredentials,hr>0&&(Xr.timeout=hr),_n.headers)Xr.setRequestHeader(Pi,_n.headers[Pi]);if(Cn.get().streaming.cmcd&&Cn.get().streaming.cmcd.enabled&&Cn.get().streaming.cmcd.mode===X.Z.CMCD_MODE_HEADER){var ui=fn.getHeaderParameters({url:_n.url,type:z.w.LICENSE});if(ui)for(var Io in ui){var Wi=ui[Io];Wi&&Xr.setRequestHeader(Io,Wi)}}var qo=function(){Xn--;var ra=isNaN(Cn.get().streaming.retryIntervals[z.w.LICENSE])?1e3:Cn.get().streaming.retryIntervals[z.w.LICENSE];Rn=setTimeout(function(){Il(_n,Xn,hr,ti,Mr,Bi)},ra)};Xr.onload=function(){bn=null,this.status>=200&&this.status<=299||Xn<=0?ti(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Xn),qo())},Xr.ontimeout=Xr.onerror=function(){bn=null,Xn<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+Xn),qo())},Xr.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),bn=Xr,Xr.send(_n.data)}function cu(){bn&&(bn.onloadend=bn.onerror=bn.onprogress=void 0,bn.abort(),bn=null),Rn&&(clearTimeout(Rn),Rn=null)}function _c(_n,Xn){if(Xn)for(var hr in Xn)_n[hr]=Xn[hr]}function Mf(_n,Xn,hr,ti,Mr){var Bi="NONE",Xr=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ti),Xr={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),bi(Xn,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,Xr))}function si(_n,Xn){return _n?_n.reduce(function(hr,ti){return hr.then(function(){return ti(Xn)})},Promise.resolve()):Promise.resolve()}function Os(_n,Xn){if(!Cn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(zt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Xn=Xn===void 0?1:Xn+1)<5))return void rn.push(setTimeout(function(){Os(_n,Xn)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ti=y.getPSSHForKeySystem(In,hr);if(ti&&hi(ti))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,Mt,Vt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){wt.push(Bi),Cr(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),zt.push(_n)},clearMediaInfoArray:function(){zt=[]},handleKeySystemFromManifest:function(){if(zt&&zt.length!==0){var _n=[];zt.forEach(function(Xn){var hr=on.getSupportedKeySystemsFromContentProtection(Xn.contentProtection,Mt,Vt);hr.length>0&&(_n.length===0&&(_n=hr),wt.push(hr))}),_n&&_n.length>0&&Cr(_n,!0)}},createKeySession:Br,loadKeySession:ro,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:vi,setSessionType:function(_n){Vt=_n},setRobustnessLevel:function(_n){mn=_n},setProtectionData:function(_n){Mt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,Mt,Vt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){cu(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,ta,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,io,sn),ar(),cu(),vi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],zt=[],wt=[]}},an=Er.getLogger(sn),wt=[],zt=[],Vt="temporary",mn="",bn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,ta,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,io,sn),sn}$.__dashjs_factory_name="ProtectionController";var ce=le.Z.getClassFactory($),oe=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function he(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Ce=function(){function tn(wt,zt){if(function(Mt,Vt){if(!(Mt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,tn),zt&&zt!=="persistent"&&zt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=wt,this.type=zt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var wt,zt=this.keyPairs.length,Mt={keys:[]};for(wt=0;wt<zt;wt++){var Vt={kty:"oct",alg:"A128KW",kid:this.keyPairs[wt].keyID,k:this.keyPairs[wt].key};Mt.keys.push(Vt)}this.type&&(Mt.type=this.type);var mn=JSON.stringify(Mt),In=mn.length,Zn=new ArrayBuffer(In),bn=new Uint8Array(Zn);for(wt=0;wt<In;wt++)bn[wt]=mn.charCodeAt(wt);return Zn}}])&&he(sn.prototype,an),tn}();function Xe(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Ae=new(function(){function tn(){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Xe(sn.prototype,an),tn}()),Ze="e2719d58-a985-b3c9-781a-b030af78d30e",nt=Ae.CLEARKEY_KEYSTEM_STRING,lt="urn:uuid:"+Ze;function qe(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Ze,schemeIdURI:lt,systemString:nt,getInitData:function(an,wt){try{var zt=y.parseInitDataFromContentProtection(an,sn);if(!zt&&wt){var Mt={kids:[function(Vt){try{var mn=Vt.replace(/-/g,"");return(mn=btoa(mn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(wt["cenc:default_KID"])]};zt=new TextEncoder().encode(JSON.stringify(Mt))}return zt}catch(Vt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,wt){var zt=null;if(an){for(var Mt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(wt))),Vt=[],mn=0;mn<Mt.kids.length;mn++){var In=Mt.kids[mn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");Vt.push(new oe(In,Zn))}zt=new Ce(Vt)}return zt}}}qe.__dashjs_factory_name="KeySystemClearKey";var ut=dashjs.FactoryMaker.getSingletonFactory(qe),At="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Oe=Ae.CLEARKEY_KEYSTEM_STRING,Qe="urn:uuid:"+At;function ct(tn){var sn,an=tn.BASE64,wt=tn.debug.getLogger(sn);return{uuid:At,schemeIdURI:Qe,systemString:Oe,getInitData:function(zt){return y.parseInitDataFromContentProtection(zt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(zt){return new Uint8Array(zt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(zt,Mt){var Vt=null;if(zt){for(var mn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Mt))),In=[],Zn=0;Zn<mn.kids.length;Zn++){var bn=mn.kids[Zn],Rn=zt.clearkeys&&zt.clearkeys.hasOwnProperty(bn)?zt.clearkeys[bn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+bn+") is not known!");In.push(new oe(bn,Rn))}Vt=new Ce(In),wt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Vt}}}ct.__dashjs_factory_name="KeySystemW3CClearKey";var Xt=dashjs.FactoryMaker.getSingletonFactory(ct),Kt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Tt=Ae.WIDEVINE_KEYSTEM_STRING,Ct="urn:uuid:"+Kt;function be(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Kt,schemeIdURI:Ct,systemString:Tt,getInitData:function(an){return y.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}be.__dashjs_factory_name="KeySystemWidevine";var re=dashjs.FactoryMaker.getSingletonFactory(be),Fe="9a04f079-9840-4286-ab92-e65be0885f95",O=Ae.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+Fe;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,wt=tn.settings;function zt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Fe,schemeIdURI:M,systemString:O,getInitData:function(Mt){var Vt,mn,In,Zn,bn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(zt(),!Mt)return null;if("pssh"in Mt)return y.parseInitDataFromContentProtection(Mt,an);if("pro"in Mt)kn=an.decodeArray(Mt.pro.__text);else{if(!("prheader"in Mt))return null;kn=an.decodeArray(Mt.prheader.__text)}return Vt=kn.length,mn=4+Rn.length+on.length+4+Vt,In=new ArrayBuffer(mn),Zn=new Uint8Array(In),(bn=new DataView(In)).setUint32(Bn,mn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,bn.setUint32(Bn,Vt),Bn+=4,Zn.set(kn,Bn),Bn+=Vt,Zn.buffer},getRequestHeadersFromMessage:function(Mt){var Vt,mn,In={},Zn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var bn=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);Vt=String.fromCharCode.apply(null,bn);for(var Rn=(mn=Zn.parseFromString(Vt,"application/xml")).getElementsByTagName("name"),on=mn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(Mt){var Vt=null,mn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return Mt;var In=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);zt();var Zn=String.fromCharCode.apply(null,In),bn=mn.parseFromString(Zn,"application/xml");if(!bn.getElementsByTagName("PlayReadyKeyMessage")[0])return Mt;var Rn=bn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(Vt=an.decode(Rn)),Vt},getLicenseServerURLFromInitData:function(Mt){if(Mt)for(var Vt=new DataView(Mt),mn=Vt.getUint16(4,!0),In=6,Zn=new DOMParser,bn=0;bn<mn;bn++){var Rn=Vt.getUint16(In,!0);In+=2;var on=Vt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=Mt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(Mt){var Vt,mn,In,Zn;if(zt(),!Mt)return null;for(Vt=[],Zn=0;Zn<Mt.length;++Zn)Vt.push(Mt.charCodeAt(Zn)),Vt.push(0);for(Vt=String.fromCharCode.apply(null,Vt),Vt=an.encode(Vt),mn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Vt),In=[],Zn=0;Zn<mn.length;++Zn)In.push(mn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(Mt){if(Mt!=="utf-8"&&Mt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=Mt}}}q.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(q);function _e(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Ae.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(wt){return sn.decodeArray(wt.license)},getErrorResponse:function(wt){return wt}},an[Ae.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(wt){return wt},getErrorResponse:function(wt){return String.fromCharCode.apply(null,new Uint8Array(wt))}},{getServerURLFromMessage:function(wt){return wt},getHTTPMethod:function(){return"POST"},getResponseType:function(wt){return an[wt].responseType},getLicenseMessage:function(wt,zt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[zt].getLicenseMessage(wt)},getErrorResponse:function(wt,zt){return an[zt].getErrorResponse(wt)}}}_e.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(_e);function Ke(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(zt){var Mt=String.fromCharCode.apply(null,new Uint8Array(zt));return decodeURIComponent(escape(Mt))}function an(zt){if(window.DOMParser){var Mt=sn(zt),Vt=new window.DOMParser().parseFromString(Mt,"text/xml"),mn=Vt?Vt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=mn?mn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return zt}function wt(zt){var Mt="",Vt="",mn="",In=-1,Zn=-1;if(window.DOMParser){var bn=sn(zt),Rn=new window.DOMParser().parseFromString(bn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return bn;Mt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(Vt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(mn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?mn.lastIndexOf("[")+1:-1,Zn=mn?mn.indexOf("]"):-1,mn=mn?mn.substring(In,Zn):"")}var Vn="code: ".concat(Vt,", name: ").concat(Mt);return mn&&(Vn+=", message: ".concat(mn)),Vn}return{getServerURLFromMessage:function(zt){return zt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(zt){return an.call(this,zt)},getErrorResponse:function(zt){return wt.call(this,zt)}}}Ke.__dashjs_factory_name="PlayReady";var St=le.Z.getSingletonFactory(Ke);function ot(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}ot.__dashjs_factory_name="Widevine";var it=dashjs.FactoryMaker.getSingletonFactory(ot);function et(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var wt=tn.keys[an],zt=wt.kid.replace(/=/g,""),Mt=wt.k.replace(/=/g,"");sn.push(new oe(zt,Mt))}return new Ce(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}et.__dashjs_factory_name="ClearKey";var ft=dashjs.FactoryMaker.getSingletonFactory(et);function yt(){var tn,sn,an,wt,zt,Mt,Vt,mn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function bn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;wt=[],on=K(In).getInstance({BASE64:zt,settings:Mt}),wt.push(on),on=re(In).getInstance({BASE64:zt}),wt.push(on),on=ut(In).getInstance({BASE64:zt}),wt.push(on),Vt=on,on=Xt(In).getInstance({BASE64:zt,debug:sn}),wt.push(on),mn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<wt.length;er++){var Er=wt[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===Vt||on===mn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return wt},setKeySystems:function(on){wt=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<wt.length;Bn++)if(wt[Bn].systemString===on)return wt[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Vn,rn=[];if(on){var fn=y.findCencContentProtection(on);for(Ur=0;Ur<wt.length;++Ur){var Cn=Zn((Er=wt[Ur]).systemString,Bn);for(Vn=0;Vn<on.length;++Vn)if((er=on[Vn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,fn);rn.push({ks:wt[Ur],keyId:er.keyId,initData:Jn,protData:Cn,cdmData:Er.getCDMData(Cn?Cn.cdmData:null),sessionId:bn(Cn,er),sessionType:Rn(Cn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=y.parsePSSHList(on),Vn=0;Vn<wt.length;++Vn){var rn=Zn((er=wt[Vn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:bn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=de(In).getInstance({BASE64:zt}):on.systemString===Ae.WIDEVINE_KEYSTEM_STRING?er=it(In).getInstance():on.systemString===Ae.PLAYREADY_KEYSTEM_STRING?er=St(In).getInstance():on.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(er=ft(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(zt=on.BASE64),on.settings&&(Mt=on.settings))}},tn}yt.__dashjs_factory_name="ProtectionKeyController";var _t=dashjs.FactoryMaker.getSingletonFactory(yt);function Rt(tn){return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Rt(tn)}function pn(tn,sn){return pn=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},pn(tn,sn)}function Qt(tn,sn){return!sn||Rt(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Ot=new(function(tn){(function(Mt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Vt&&pn(Mt,Vt)})(zt,tn);var sn,an,wt=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,Vt=nn(sn);if(an){var mn=nn(this).constructor;Mt=Reflect.construct(Vt,arguments,mn)}else Mt=Vt.apply(this,arguments);return Qt(this,Mt)});function zt(){var Mt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Mt=wt.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Mt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Mt.KEY_ADDED="public_keyAdded",Mt.KEY_ERROR="public_keyError",Mt.KEY_MESSAGE="public_keyMessage",Mt.KEY_SESSION_CLOSED="public_keySessionClosed",Mt.KEY_SESSION_CREATED="public_keySessionCreated",Mt.KEY_SESSION_REMOVED="public_keySessionRemoved",Mt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Mt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Mt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Mt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Mt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Mt.NEED_KEY="needkey",Mt.PROTECTION_CREATED="public_protectioncreated",Mt.PROTECTION_DESTROYED="public_protectiondestroyed",Mt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Mt.TEARDOWN_COMPLETE="protectionTeardownComplete",Mt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Mt.KEY_SESSION_UPDATED="public_keySessionUpdated",Mt}return zt}(w(8342).Z)),Un=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,wt,zt){(function(Mt,Vt){if(!(Mt instanceof Vt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=wt,this.messageType=zt||"license-request"},Pr=function tn(sn,an){(function(wt,zt){if(!(wt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ei(tn){tn=tn||{};var sn,an,wt,zt,Mt,Vt,mn,In,Zn=this.context,bn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,fn,Cn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return bn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var Cr=rn[fn].protData&&rn[fn].protData.systemStringPriority?rn[fn].protData.systemStringPriority:null,Lr=rn[fn].configs,Yi=rn[fn].ks,ro=Yi.systemString;(function(Br,qr){return new Promise(function(hi,vi){kn(Br,qr,0,hi,vi)})})(Cr||(dr[ro]?dr[ro]:[ro]),Lr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,hi=new Pr(Yi,qr);hi.mksa=Br,bn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:hi}),Cn({data:hi})}).catch(function(Br){if(fn+1<rn.length)Bn(rn,fn+1,Cn,Jn);else{var qr="Key system access denied! ";bn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,fn,Cn,Jn,ar){var Cr=rn[Cn];an.debug("Requesting key system access for system string ".concat(Cr)),navigator.requestMediaKeySystemAccess(Cr,fn).then(function(Lr){Lr.selectedSystemString=Cr,Jn(Lr)}).catch(function(Lr){Cn+1<rn.length?kn(rn,fn,Cn+1,Jn,ar):ar(Lr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var fn=rn.session;return fn.removeEventListener("keystatuseschange",rn),fn.removeEventListener("message",rn),fn.close()}function Er(rn){for(var fn=0;fn<Vt.length;fn++)if(Vt[fn]===rn){Vt.splice(fn,1);break}}function Ur(rn){var fn,Cn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?fn=rn[0]:Cn=rn[0]),rn[1]&&(typeof rn[1]=="string"?fn=rn[1]:Cn=rn[1])),{status:fn,keyId:Cn}}function Vn(rn,fn){var Cn={session:rn,keyId:fn.keyId,initData:fn.initData,sessionId:fn.sessionId,sessionType:fn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":bn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var Cr=Ur(arguments);Cr.status==="expired"?bn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):bn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,Cr)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;bn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",Cn),rn.addEventListener("message",Cn),rn.closed.then(function(){Er(Cn),an.debug("DRM: Session closed.  SessionID = "+Cn.getSessionId()),bn.trigger(Rn.KEY_SESSION_CLOSED,{data:Cn.getSessionId()})}),Vt.push(Cn),Cn}return sn={getAllInitData:function(){for(var rn=[],fn=0;fn<Vt.length;fn++)Vt[fn].initData&&rn.push(Vt[fn].initData);return rn},getSessions:function(){return Vt},requestKeySystemAccess:function(rn){return new Promise(function(fn,Cn){Bn(rn,0,fn,Cn)})},selectKeySystem:function(rn){return new Promise(function(fn,Cn){rn.mksa.createMediaKeys().then(function(Jn){return wt=rn.keySystem,Mt=Jn,zt?zt.setMediaKeys(Mt):Promise.resolve()}).then(function(){fn(wt)}).catch(function(){Cn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){zt!==rn&&(zt&&(zt.removeEventListener("encrypted",mn),zt.setMediaKeys&&zt.setMediaKeys(null)),(zt=rn)&&(zt.addEventListener("encrypted",mn),zt.setMediaKeys&&Mt&&zt.setMediaKeys(Mt)))},setServerCertificate:function(rn){if(!wt||!Mt)throw new Error("Can not set server certificate until you have selected a key system");Mt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),bn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(fn){bn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+fn.name)})})},createKeySession:function(rn){if(!wt||!Mt)throw new Error("Can not create sessions until you have selected a key system");var fn=Mt.createSession(rn.sessionType),Cn=Vn(fn,rn),Jn=wt.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Ae.INITIALIZATION_DATA_TYPE_KEYIDS:Ae.INITIALIZATION_DATA_TYPE_CENC;fn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+Cn.getSessionId()),bn.trigger(Rn.KEY_SESSION_CREATED,{data:Cn})}).catch(function(ar){Er(Cn),bn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,fn){var Cn=rn.session;In.isClearKey(wt)&&(fn=fn.toJWK()),Cn.update(fn).then(function(){bn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){bn.trigger(Rn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!wt||!Mt)throw new Error("Can not load sessions until you have selected a key system");for(var fn=rn.sessionId,Cn=0;Cn<Vt.length;Cn++)if(fn===Vt[Cn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=Mt.createSession(rn.sessionType),ar=Vn(Jn,rn);Jn.load(fn).then(function(Cr){Cr?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),bn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),bn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+fn+")")}))}).catch(function(Cr){Er(ar),bn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+fn+")! "+Cr.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),bn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(fn){bn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+fn.name})})},closeKeySession:function(rn){er(rn).catch(function(fn){Er(rn),bn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+fn.name})})},stop:function(){for(var rn,fn=0;fn<Vt.length;fn++)(rn=Vt[fn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,fn=Vt.length;fn!==0?function(){for(var Cn=function(ar){Er(ar),Vt.length===0&&(zt?(zt.removeEventListener("encrypted",mn),zt.setMediaKeys(null).then(function(){bn.trigger(Rn.TEARDOWN_COMPLETE)})):bn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<fn;Jn++)(function(ar){er(rn),Cn(ar)})(rn=Vt[Jn])}():bn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),wt=null,zt=null,Mt=null,Vt=[],In=_t(Zn).getInstance(),mn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var fn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;bn.trigger(Rn.NEED_KEY,{key:new Un(fn,rn.initDataType)})}}},sn}dr[Ae.PLAYREADY_KEYSTEM_STRING]=[Ae.PLAYREADY_KEYSTEM_STRING,Ae.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Ae.WIDEVINE_KEYSTEM_STRING]=[Ae.WIDEVINE_KEYSTEM_STRING],dr[Ae.CLEARKEY_KEYSTEM_STRING]=[Ae.CLEARKEY_KEYSTEM_STRING],ei.__dashjs_factory_name="ProtectionModel_21Jan2015";var eo=dashjs.FactoryMaker.getClassFactory(ei);function Or(tn){tn=tn||{};var sn,an,wt,zt,Mt,Vt,mn,In,Zn,bn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Vn=0;Vn<mn.length;Vn++)Er(mn[Vn]);wt&&wt.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Vn){var rn=Vn.session;rn.removeEventListener(kn.error,Vn),rn.removeEventListener(kn.message,Vn),rn.removeEventListener(kn.ready,Vn),rn.removeEventListener(kn.close,Vn);for(var fn=0;fn<mn.length;fn++)if(mn[fn]===Vn){mn.splice(fn,1);break}rn[kn.release]()}function Ur(){var Vn=null,rn=function(){wt.removeEventListener("loadedmetadata",Vn),wt[kn.setMediaKeys](Mt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};wt.readyState>=1?rn():(Vn=rn.bind(this),wt.addEventListener("loadedmetadata",Vn))}return sn={getAllInitData:function(){for(var Vn=[],rn=0;rn<mn.length;rn++)Vn.push(mn[rn].initData);return Vn},getSessions:function(){return mn},requestKeySystemAccess:function(Vn){return new Promise(function(rn,fn){for(var Cn=!1,Jn=0;Jn<Vn.length;Jn++)for(var ar=Vn[Jn].ks.systemString,Cr=Vn[Jn].configs,Lr=null,Yi=null,ro=0;ro<Cr.length;ro++){var Br=Cr[ro].audioCapabilities,qr=Cr[ro].videoCapabilities;if(Br&&Br.length!==0){Lr=[];for(var hi=0;hi<Br.length;hi++)window[kn.MediaKeys].isTypeSupported(ar,Br[hi].contentType)&&Lr.push(Br[hi])}if(qr&&qr.length!==0){Yi=[];for(var vi=0;vi<qr.length;vi++)window[kn.MediaKeys].isTypeSupported(ar,qr[vi].contentType)&&Yi.push(qr[vi])}if(!(!Lr&&!Yi||Lr&&Lr.length===0||Yi&&Yi.length===0)){Cn=!0;var Ao=new D(Lr,Yi),io=Zn.getKeySystemBySystemString(ar),ta=new Pr(io,Ao);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),rn({data:ta});break}}if(!Cn){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),fn({error:bi})}})},selectKeySystem:function(Vn){return new Promise(function(rn,fn){try{Mt=Vn.mediaKeys=new window[kn.MediaKeys](Vn.keySystem.systemString),zt=Vn.keySystem,Vt=Vn,wt&&Ur(),rn(zt)}catch(Cn){fn({error:"Error selecting keys system ("+zt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Vn){wt!==Vn&&(wt&&wt.removeEventListener(kn.needkey,In),(wt=Vn)&&(wt.addEventListener(kn.needkey,In),Mt&&Ur()))},createKeySession:function(Vn){if(!zt||!Mt||!Vt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(Vt.ksConfiguration.videoCapabilities&&Vt.ksConfiguration.videoCapabilities.length>0&&(rn=Vt.ksConfiguration.videoCapabilities[0]),rn===null&&Vt.ksConfiguration.audioCapabilities&&Vt.ksConfiguration.audioCapabilities.length>0&&(rn=Vt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var fn=rn.contentType,Cn=Mt.createSession(fn,new Uint8Array(Vn.initData),Vn.cdmData?new Uint8Array(Vn.cdmData):null),Jn=function(ar,Cr){return{session:ar,keyId:Cr.keyId,initData:Cr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Lr){switch(Lr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(Lr.message)?Lr.message.buffer:Lr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,Lr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Cn,Vn);Cn.addEventListener(kn.error,Jn),Cn.addEventListener(kn.message,Jn),Cn.addEventListener(kn.ready,Jn),Cn.addEventListener(kn.close,Jn),mn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Vn,rn){var fn=Vn.session;Zn.isClearKey(zt)?fn.update(new Uint8Array(rn.toJWK())):fn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),wt=null,zt=null,Mt=null,Vt=null,mn=[],Zn=_t(bn).getInstance(),In={handleEvent:function(Vn){if(Vn.type===kn.needkey&&Vn.initData){var rn=ArrayBuffer.isView(Vn.initData)?Vn.initData.buffer:Vn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Or.__dashjs_factory_name="ProtectionModel_3Feb2014";var to=dashjs.FactoryMaker.getClassFactory(Or);function _i(tn){tn=tn||{};var sn,an,wt,zt,Mt,Vt,mn,In,Zn,bn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){wt&&rn();for(var fn=0;fn<mn.length;fn++)Ur(mn[fn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(fn){try{wt[kn.cancelKeyRequest](zt.systemString,fn.sessionId)}catch(Cn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+fn.sessionId+") "+Cn.message})}}function Vn(fn,Cn){if(Cn&&fn){for(var Jn=fn.length,ar=0;ar<Jn;ar++)if(fn[ar].sessionId==Cn)return fn[ar];return null}return null}function rn(){wt.removeEventListener(kn.keyerror,Zn),wt.removeEventListener(kn.needkey,Zn),wt.removeEventListener(kn.keymessage,Zn),wt.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var fn=[],Cn=0;Cn<Vt.length;Cn++)fn.push(Vt[Cn].initData);for(var Jn=0;Jn<mn.length;Jn++)fn.push(mn[Jn].initData);return fn},getSessions:function(){return mn.concat(Vt)},requestKeySystemAccess:function(fn){return new Promise(function(Cn,Jn){var ar=wt;ar||(ar=document.createElement("video"));for(var Cr=!1,Lr=0;Lr<fn.length;Lr++)for(var Yi=fn[Lr].ks.systemString,ro=fn[Lr].configs,Br=null,qr=0;qr<ro.length;qr++){var hi=ro[qr].videoCapabilities;if(hi&&hi.length!==0){Br=[];for(var vi=0;vi<hi.length;vi++)ar.canPlayType(hi[vi].contentType,Yi)!==""&&Br.push(hi[vi])}if(Br&&(!Br||Br.length!==0)){Cr=!0;var Ao=new D(null,Br),io=Mt.getKeySystemBySystemString(Yi),ta=new Pr(io,Ao);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),Cn({data:ta});break}}if(!Cr){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),Jn({error:bi})}})},selectKeySystem:function(fn){return zt=fn.keySystem,Promise.resolve(zt)},setMediaElement:function(fn){if(wt!==fn){if(wt){rn();for(var Cn=0;Cn<mn.length;Cn++)Ur(mn[Cn]);mn=[]}(wt=fn)&&(wt.addEventListener(kn.keyerror,Zn),wt.addEventListener(kn.needkey,Zn),wt.addEventListener(kn.keymessage,Zn),wt.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(fn){if(!zt)throw new Error("Can not create sessions until you have selected a key system");if(In||mn.length===0){var Cn={sessionId:null,keyId:fn.keyId,initData:fn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Vt.push(Cn),wt[kn.generateKeyRequest](zt.systemString,new Uint8Array(fn.initData)),Cn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(fn,Cn){var Jn=fn.sessionId;if(Mt.isClearKey(zt))for(var ar=0;ar<Cn.keyPairs.length;ar++)wt[kn.addKey](zt.systemString,Cn.keyPairs[ar].key,Cn.keyPairs[ar].keyID,Jn);else wt[kn.addKey](zt.systemString,new Uint8Array(Cn),new Uint8Array(fn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),wt=null,zt=null,Vt=[],mn=[],Mt=_t(bn).getInstance(),Zn={handleEvent:function(fn){var Cn=null;switch(fn.type){case kn.needkey:var Jn=ArrayBuffer.isView(fn.initData)?fn.initData.buffer:fn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((Cn=Vn(mn,fn.sessionId))||(Cn=Vn(Vt,fn.sessionId)),Cn){var ar=_.MEDIA_KEYERR_CODE,Cr="";switch(fn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,Cr+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,Cr+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,Cr+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,Cr+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,Cr+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,Cr+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}Cr+="  System Code = "+fn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new I.Z(ar,Cr,Cn)})}else an.error("No session token found for key error");break;case kn.keyadded:(Cn=Vn(mn,fn.sessionId))||(Cn=Vn(Vt,fn.sessionId)),Cn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:Cn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=fn.sessionId!==null&&fn.sessionId!==void 0)?!(Cn=Vn(mn,fn.sessionId))&&Vt.length>0&&(Cn=Vt.shift(),mn.push(Cn),Cn.sessionId=fn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:Cn})):Vt.length>0&&(Cn=Vt.shift(),mn.push(Cn),Vt.length!==0&&er.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Cn){var Lr=ArrayBuffer.isView(fn.message)?fn.message.buffer:fn.message;Cn.keyMessage=Lr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(Cn,Lr,fn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}_i.__dashjs_factory_name="ProtectionModel_01b";var Di=dashjs.FactoryMaker.getClassFactory(_i),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],no=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ti(){var tn,sn=this.context;function an(wt,zt){for(var Mt=0;Mt<zt.length;Mt++){var Vt=zt[Mt];if(typeof wt[Vt[Object.keys(Vt)[0]]]=="function")return Vt}return null}return tn={createProtectionSystem:function(wt){var zt=null,Mt=_t(sn).getInstance();Mt.setConfig({debug:wt.debug,BASE64:wt.BASE64,settings:wt.settings}),Mt.initialize();var Vt=function(mn){var In=mn.debug,Zn=In.getLogger(tn),bn=mn.eventBus,Rn=mn.errHandler,on=mn.videoModel?mn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,no)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),to(sn).create({debug:In,eventBus:bn,events:mn.events,api:an(on,no)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Di(sn).create({debug:In,eventBus:bn,errHandler:Rn,events:mn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),eo(sn).create({debug:In,eventBus:bn,events:mn.events}))}(wt);return!zt&&Vt&&(zt=ce(sn).create({protectionModel:Vt,protectionKeyController:Mt,eventBus:wt.eventBus,debug:wt.debug,events:wt.events,BASE64:wt.BASE64,constants:wt.constants,cmcdModel:wt.cmcdModel,customParametersModel:wt.customParametersModel,settings:wt.settings}),wt.capabilities.setEncryptedMediaSupported(!0)),zt}}}Ti.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Ti);Qn.events=Ot,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Ti.__dashjs_factory_name,Qn);var Lu=Qn},2068:function(C,g,w){var F=w(5448),b={DEFAULT:.5,STRONG:1,WEAK:0};function y(D,m,T){var U,N;return U=D===void 0?-1:D,N=function(_){var I=b.DEFAULT;return _!==b.DEFAULT&&_!==b.STRONG&&_!==b.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:N}}y.__dashjs_factory_name="SwitchRequest";var v=F.Z.getClassFactory(y);v.NO_CHANGE=-1,v.PRIORITY=b,F.Z.updateClassFactory(y.__dashjs_factory_name,v),g.Z=v},1767:function(C,g,w){var F=w(5628),b=w(6535),y=w(7423),v=w(895),D=w(6070),m=w(3112),T=w(1914),U=w(5435),N=w(5448),_=w(2068),I=w(3393),R="qualitySwitchRules",Z="abandonFragmentRules";function z(X){X=X||{};var le,x,$=this.context,ce=X.mediaPlayerModel,oe=X.customParametersModel,he=X.dashMetrics,Ce=X.settings;function Xe(Ze){return Ze.filter(function(nt){return nt.quality>_.Z.NO_CHANGE})}function Ae(Ze){var nt,lt,qe,ut,At,Oe={},Qe=null;if(Ze.length!==0){for(Oe[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},nt=0,lt=Ze.length;nt<lt;nt+=1)(qe=Ze[nt]).quality!==_.Z.NO_CHANGE&&(Oe[qe.priority].quality===_.Z.NO_CHANGE||Oe[qe.priority].quality>qe.quality)&&(Oe[qe.priority].quality=qe.quality,Oe[qe.priority].reason=qe.reason||null);return Oe[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.WEAK]),Oe[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.DEFAULT]),Oe[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.STRONG]),Qe&&(ut=Qe.quality,At=Qe.reason),(0,_.Z)($).create(ut,At)}}return{initialize:function(){le=[],x=[],Ce.get().streaming.abr.useDefaultABRRules&&(Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?le.push((0,T.Z)($).create({dashMetrics:he,settings:Ce})):Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?le.push((0,U.Z)($).create({dashMetrics:he})):(le.push((0,m.Z)($).create({dashMetrics:he,mediaPlayerModel:ce,settings:Ce})),le.push((0,F.Z)($).create({dashMetrics:he})),Ce.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&le.push((0,b.Z)($).create({dashMetrics:he,settings:Ce})),Ce.get().streaming.abr.additionalAbrRules.switchHistoryRule&&le.push((0,D.Z)($).create()),Ce.get().streaming.abr.additionalAbrRules.droppedFramesRule&&le.push((0,v.Z)($).create()),Ce.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&x.push((0,y.Z)($).create({dashMetrics:he,mediaPlayerModel:ce,settings:Ce})))),oe.getAbrCustomRules().forEach(function(Ze){Ze.type===R&&le.push(Ze.rule($).create()),Ze.type===Z&&x.push(Ze.rule($).create())})},reset:function(){[le,x].forEach(function(Ze){Ze&&Ze.length&&Ze.forEach(function(nt){return nt.reset&&nt.reset()})}),le=[],x=[]},getMaxQuality:function(Ze){return Ae(Xe(le.map(function(nt){return nt.getMaxIndex(Ze)})))||(0,_.Z)($).create()},getMinSwitchRequest:Ae,shouldAbandonFragment:function(Ze,nt){var lt=Ae(Xe(x.map(function(qe){return qe.shouldAbandon(Ze,nt)})));return lt&&(lt.reason.forceAbandon=!0),lt||(0,_.Z)($).create()},getQualitySwitchRules:function(){return le}}}z.__dashjs_factory_name="ABRRulesCollection";var W=N.Z.getClassFactory(z);W.QUALITY_SWITCH_RULES=R,W.ABANDON_FRAGMENT_RULES=Z,N.Z.updateSingletonFactory(z.__dashjs_factory_name,W),g.Z=W},7423:function(C,g,w){var F=w(2068),b=w(5448),y=w(6398);function v(D){D=D||{};var m,T,U,N,_,I=this.context,R=D.mediaPlayerModel,Z=D.dashMetrics,z=D.settings;function W(){U={},N={},_=[]}return m={shouldAbandon:function(X){var le=(0,F.Z)(I).create(F.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(!(X&&X.hasOwnProperty("getMediaInfo")&&X.hasOwnProperty("getMediaType")&&X.hasOwnProperty("getCurrentRequest")&&X.hasOwnProperty("getRepresentationInfo")&&X.hasOwnProperty("getAbrController")))return le;var x,$,ce=X.getMediaInfo(),oe=X.getMediaType(),he=X.getStreamInfo(),Ce=he?he.id:null,Xe=X.getCurrentRequest();if(!isNaN(Xe.index)){x=oe,$=Xe.index,U[x]=U[x]||{},U[x][$]=U[x][$]||{};var Ae=R.getStableBufferTime();if(Z.getCurrentBufferLevel(oe)>Ae)return le;var Ze=U[oe][Xe.index];if(Ze===null||Xe.firstByteDate===null||N.hasOwnProperty(Ze.id))return le;if(Ze.firstByteTime===void 0&&(_[oe]=[],Ze.firstByteTime=Xe.firstByteDate.getTime(),Ze.segmentDuration=Xe.duration,Ze.bytesTotal=Xe.bytesTotal,Ze.id=Xe.index),Ze.bytesLoaded=Xe.bytesLoaded,Ze.elapsedTime=new Date().getTime()-Ze.firstByteTime,Ze.bytesLoaded>0&&Ze.elapsedTime>0&&function(ct,Xt){_[ct]=_[ct]||[],_[ct].push(Xt)}(oe,Math.round(8*Ze.bytesLoaded/Ze.elapsedTime)),_[oe].length>=z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ze.elapsedTime>z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ze.bytesLoaded<Ze.bytesTotal){var nt=_[oe].reduce(function(ct,Xt){return ct+Xt},0);if(Ze.measuredBandwidthInKbps=Math.round(nt/_[oe].length),Ze.estimatedTimeOfDownload=+(8*Ze.bytesTotal/Ze.measuredBandwidthInKbps/1e3).toFixed(2),Ze.estimatedTimeOfDownload<Ze.segmentDuration*z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||X.getRepresentationInfo().quality===0)return le;if(!N.hasOwnProperty(Ze.id)){var lt=X.getAbrController(),qe=Ze.bytesTotal-Ze.bytesLoaded,ut=lt.getBitrateList(ce),At=lt.getQualityForBitrate(ce,Ze.measuredBandwidthInKbps*z.get().streaming.abr.bandwidthSafetyFactor,Ce),Oe=lt.getMinAllowedIndexFor(oe,Ce),Qe=Oe!==void 0?Math.max(Oe,At):At;qe>Ze.bytesTotal*ut[Qe].bitrate/ut[lt.getQualityFor(oe,Ce)].bitrate&&(le.quality=Qe,le.reason.throughput=Ze.measuredBandwidthInKbps,le.reason.fragmentID=Ze.id,le.reason.rule=this.getClassName(),N[Ze.id]=Ze,T.debug("["+oe+"] frag id",Ze.id," is asking to abandon and switch to quality to ",Qe," measured bandwidth was",Ze.measuredBandwidthInKbps),delete U[oe][Ze.id])}}else Ze.bytesLoaded===Ze.bytesTotal&&delete U[oe][Ze.id]}return le},reset:W},T=(0,y.Z)(I).getInstance().getLogger(m),W(),m}v.__dashjs_factory_name="AbandonRequestsRule",g.Z=b.Z.getClassFactory(v)},3112:function(C,g,w){var F=w(3860),b=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(8825),N=w(3393),_=10;function I(R){R=R||{};var Z,z,W,X=this.context,le=R.dashMetrics,x=R.mediaPlayerModel,$=(0,D.Z)(X).getInstance();function ce(Qe,ct,Xt){var Kt=Xt.reduce(function(be,re,Fe){return re>Xt[be]?Fe:be},0);if(Kt===0)return null;var Tt=Math.max(Qe,_+2*ct.length),Ct=(Xt[Kt]-1)/(Tt/_-1);return{gp:Ct,Vp:_/Ct}}function oe(Qe){Qe.placeholderBuffer=0,Qe.mostAdvancedSegmentStart=NaN,Qe.lastSegmentWasReplacement=!1,Qe.lastSegmentStart=NaN,Qe.lastSegmentDurationS=NaN,Qe.lastSegmentRequestTimeMs=NaN,Qe.lastSegmentFinishTimeMs=NaN}function he(Qe,ct){var Xt=x.getStableBufferTime();if(Qe.stableBufferTime!==Xt){var Kt=ce(Xt,Qe.bitrates,Qe.utilities);if(Kt.Vp!==Qe.Vp||Kt.gp!==Qe.gp){var Tt=le.getCurrentBufferLevel(ct),Ct=Tt+Qe.placeholderBuffer;Ct-=_,Ct*=Kt.Vp/Qe.Vp,Ct+=_,Qe.stableBufferTime=Xt,Qe.Vp=Kt.Vp,Qe.gp=Kt.gp,Qe.placeholderBuffer=Math.max(0,Ct-Tt)}}}function Ce(Qe,ct){return Qe.Vp*(Qe.utilities[ct]+Qe.gp)}function Xe(Qe,ct){for(var Xt=Qe.bitrates[ct],Kt=Qe.utilities[ct],Tt=0,Ct=ct-1;Ct>=0;--Ct)if(Qe.utilities[Ct]<Qe.utilities[ct]){var be=Qe.bitrates[Ct],re=Qe.utilities[Ct],Fe=Qe.Vp*(Qe.gp+(Xt*re-be*Kt)/(Xt-be));Tt=Math.max(Tt,Fe)}return Tt}function Ae(Qe){var ct=Qe.mediaType===N.Z.AUDIO?[N.Z.AUDIO]:W;for(var Xt in ct)W.hasOwnProperty(Xt)&&W[Xt].state===2&&(W[Xt].placeholderBuffer=0)}function Ze(){for(var Qe in W)if(W.hasOwnProperty(Qe)){var ct=W[Qe];ct.state!==0&&(ct.state=1,oe(ct))}}function nt(Qe){if(Qe&&Qe.chunk&&Qe.chunk.mediaInfo){var ct=W[Qe.chunk.mediaInfo.type];if(ct&&ct.state!==0){var Xt=Qe.chunk.start;isNaN(ct.mostAdvancedSegmentStart)||Xt>ct.mostAdvancedSegmentStart?(ct.mostAdvancedSegmentStart=Xt,ct.lastSegmentWasReplacement=!1):ct.lastSegmentWasReplacement=!0,ct.lastSegmentStart=Xt,ct.lastSegmentDurationS=Qe.chunk.duration,ct.lastQuality=Qe.chunk.quality,qe(ct,Qe.chunk.mediaInfo.type)}}}function lt(Qe){if(Qe&&Qe.metric===F.Z.HTTP_REQUEST&&Qe.value&&Qe.value.type===v.w.MEDIA_SEGMENT_TYPE&&Qe.value.trace&&Qe.value.trace.length){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.lastSegmentRequestTimeMs=Qe.value.trequest.getTime(),ct.lastSegmentFinishTimeMs=Qe.value._tfinish.getTime(),qe(ct,Qe.mediaType))}}function qe(Qe,ct){if(!isNaN(Qe.lastSegmentStart)&&!isNaN(Qe.lastSegmentRequestTimeMs)&&!isNaN(Qe.placeholderBuffer)){if(Qe.placeholderBuffer*=.99,!isNaN(Qe.lastSegmentFinishTimeMs)){var Xt=le.getCurrentBufferLevel(ct)+.001*(Qe.lastSegmentFinishTimeMs-Qe.lastSegmentRequestTimeMs),Kt=Ce(Qe,Qe.lastQuality),Tt=Math.max(0,Kt-Xt);Qe.placeholderBuffer=Math.min(Tt,Qe.placeholderBuffer)}Qe.lastSegmentWasReplacement&&!isNaN(Qe.lastSegmentDurationS)&&(Qe.placeholderBuffer+=Qe.lastSegmentDurationS),Qe.lastSegmentStart=NaN,Qe.lastSegmentRequestTimeMs=NaN}}function ut(Qe){if(Qe){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.abrQuality=Qe.newQuality)}}function At(Qe){if(Qe){var ct=W[Qe.mediaType];if(ct&&ct.state!==0){var Xt,Kt=le.getCurrentBufferLevel(Qe.mediaType);Xt=ct.abrQuality>0?Xe(ct,ct.abrQuality):_;var Tt=Math.max(0,Xt-Kt);ct.placeholderBuffer=Math.min(ct.placeholderBuffer,Tt)}}}function Oe(){W={}}return Z={getMaxIndex:function(Qe){var ct=(0,b.Z)(X).create();if(!(Qe&&Qe.hasOwnProperty("getMediaInfo")&&Qe.hasOwnProperty("getMediaType")&&Qe.hasOwnProperty("getScheduleController")&&Qe.hasOwnProperty("getStreamInfo")&&Qe.hasOwnProperty("getAbrController")&&Qe.hasOwnProperty("useBufferOccupancyABR")))return ct;var Xt=Qe.getMediaInfo(),Kt=Qe.getMediaType(),Tt=Qe.getScheduleController(),Ct=Qe.getStreamInfo(),be=Qe.getAbrController(),re=be.getThroughputHistory(),Fe=Ct?Ct.id:null,O=Ct&&Ct.manifestInfo&&Ct.manifestInfo.isDynamic,M=Qe.useBufferOccupancyABR();if(ct.reason=ct.reason||{},!M)return ct;Tt.setTimeToLoadDelay(0);var q=function(et){var ft=et.getMediaType(),yt=W[ft];return yt?yt.state!==0&&he(yt,ft):(yt=function(_t){var Rt={},pn=_t.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),Qt=function(Un){return Un.map(function(gr){return Math.log(gr)})}(pn);Qt=Qt.map(function(Un){return Un-Qt[0]+1});var nn=x.getStableBufferTime(),Ot=ce(nn,pn,Qt);return Ot?(Rt.state=1,Rt.bitrates=pn,Rt.utilities=Qt,Rt.stableBufferTime=nn,Rt.Vp=Ot.Vp,Rt.gp=Ot.gp,Rt.lastQuality=0,oe(Rt)):Rt.state=0,Rt}(et),W[ft]=yt),yt}(Qe);if(q.state===0)return ct;var K,_e=le.getCurrentBufferLevel(Kt),de=re.getAverageThroughput(Kt,O),Ke=re.getSafeAverageThroughput(Kt,O),St=re.getAverageLatency(Kt);if(ct.reason.state=q.state,ct.reason.throughput=de,ct.reason.latency=St,isNaN(de))return ct;switch(q.state){case 1:K=be.getQualityForBitrate(Xt,Ke,Fe,St),ct.quality=K,ct.reason.throughput=Ke,q.placeholderBuffer=Math.max(0,Xe(q,K)-_e),q.lastQuality=K,!isNaN(q.lastSegmentDurationS)&&_e>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(et,ft){var yt=Date.now();if(isNaN(et.lastSegmentFinishTimeMs)){if(!isNaN(et.lastCallTimeMs)){var _t=.001*(yt-et.lastCallTimeMs);et.placeholderBuffer+=Math.max(0,_t)}}else{var Rt=.001*(yt-et.lastSegmentFinishTimeMs);et.placeholderBuffer+=Math.max(0,Rt)}et.lastCallTimeMs=yt,et.lastSegmentStart=NaN,et.lastSegmentRequestTimeMs=NaN,et.lastSegmentFinishTimeMs=NaN,he(et,ft)})(q,Kt),K=function(et,ft){for(var yt=et.bitrates.length,_t=NaN,Rt=NaN,pn=0;pn<yt;++pn){var Qt=(et.Vp*(et.utilities[pn]+et.gp)-ft)/et.bitrates[pn];(isNaN(Rt)||Qt>=Rt)&&(Rt=Qt,_t=pn)}return _t}(q,_e+q.placeholderBuffer);var ot=be.getQualityForBitrate(Xt,Ke,Fe,St);K>q.lastQuality&&K>ot&&(K=Math.max(ot,q.lastQuality));var it=Math.max(0,_e+q.placeholderBuffer-Ce(q,K));it<=q.placeholderBuffer?(q.placeholderBuffer-=it,it=0):(it-=q.placeholderBuffer,q.placeholderBuffer=0,K<be.getMaxAllowedIndexFor(Kt,Fe)?Tt.setTimeToLoadDelay(1e3*it):it=0),ct.quality=K,ct.reason.throughput=de,ct.reason.latency=St,ct.reason.bufferLevel=_e,ct.reason.placeholderBuffer=q.placeholderBuffer,ct.reason.delay=it,q.lastQuality=K;break;default:z.debug("BOLA ABR rule invoked in bad state."),ct.quality=be.getQualityForBitrate(Xt,Ke,Fe,St),ct.reason.state=q.state,ct.reason.throughput=Ke,ct.reason.latency=St,q.state=1,oe(q)}return ct},reset:function(){Oe(),$.off(U.Z.BUFFER_EMPTY,Ae,Z),$.off(U.Z.PLAYBACK_SEEKING,Ze,Z),$.off(U.Z.METRIC_ADDED,lt,Z),$.off(U.Z.QUALITY_CHANGE_REQUESTED,ut,Z),$.off(U.Z.FRAGMENT_LOADING_ABANDONED,At,Z),$.off(m.Z.MEDIA_FRAGMENT_LOADED,nt,Z)}},z=(0,T.Z)(X).getInstance().getLogger(Z),Oe(),$.on(U.Z.BUFFER_EMPTY,Ae,Z),$.on(U.Z.PLAYBACK_SEEKING,Ze,Z),$.on(U.Z.METRIC_ADDED,lt,Z),$.on(U.Z.QUALITY_CHANGE_REQUESTED,ut,Z),$.on(U.Z.FRAGMENT_LOADING_ABANDONED,At,Z),$.on(m.Z.MEDIA_FRAGMENT_LOADED,nt,Z),Z}I.__dashjs_factory_name="BolaRule",g.Z=y.Z.getClassFactory(I)},895:function(C,g,w){var F=w(5448),b=w(2068),y=w(6398);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){var N=(0,b.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return N;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var R=_.getFrameHistory(I);if(!R||R.length===0)return N;for(var Z=0,z=0,W=b.Z.NO_CHANGE,X=1;X<R.length;X++)if(R[X]&&(Z=R[X].droppedVideoFrames,(z=R[X].totalVideoFrames)>375&&Z/z>.15)){W=X-1,m.debug("index: "+W+" Dropped Frames: "+Z+" Total Frames: "+z);break}return(0,b.Z)(T).create(W,{droppedFrames:Z})}return N}},m=(0,y.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="DroppedFramesRule",g.Z=F.Z.getClassFactory(v)},6535:function(C,g,w){var F=w(5595),b=w(8512),y=w(5448),v=w(6398),D=w(2068),m=w(3393),T=w(3860),U=w(8825);function N(_){_=_||{};var I,R,Z,z=this.context,W=(0,F.Z)(z).getInstance(),X=_.dashMetrics;function le(){(Z={})[m.Z.VIDEO]={ignoreCount:2},Z[m.Z.AUDIO]={ignoreCount:2}}function x(){le()}function $(ce){isNaN(ce.startTime)||ce.mediaType!==m.Z.AUDIO&&ce.mediaType!==m.Z.VIDEO||Z[ce.mediaType].ignoreCount>0&&Z[ce.mediaType].ignoreCount--}return I={getMaxIndex:function(ce){var oe=(0,D.Z)(z).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!X||!X.hasOwnProperty("getCurrentBufferLevel")||!X.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var he=ce.getMediaType(),Ce=X.getCurrentBufferState(he),Xe=ce.getRepresentationInfo().fragmentDuration,Ae=ce.getStreamInfo(),Ze=Ae?Ae.id:null,nt=ce.getScheduleController(),lt=Ae&&Ae.manifestInfo&&Ae.manifestInfo.isDynamic;if(function(Kt,Tt){return!Kt&&Z[Tt].ignoreCount>0}(nt.getPlaybackController().getLowLatencyModeEnabled(),he)||!Xe)return oe;if(Ce&&Ce.state===T.Z.BUFFER_EMPTY)R.debug("["+he+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var qe=ce.getMediaInfo(),ut=ce.getAbrController(),At=ut.getThroughputHistory(),Oe=X.getCurrentBufferLevel(he),Qe=At.getAverageThroughput(he,lt),ct=At.getAverageLatency(he),Xt=Qe*(Oe/Xe)*.5;oe.quality=ut.getQualityForBitrate(qe,Xt,Ze,ct),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){le(),W.off(U.Z.PLAYBACK_SEEKING,x,I),W.off(b.Z.BYTES_APPENDED_END_FRAGMENT,$,I)}},R=(0,v.Z)(z).getInstance().getLogger(I),le(),W.on(U.Z.PLAYBACK_SEEKING,x,I),W.on(b.Z.BYTES_APPENDED_END_FRAGMENT,$,I),I}N.__dashjs_factory_name="InsufficientBufferRule",g.Z=y.Z.getClassFactory(N)},1914:function(C,g,w){var F=w(3860),b=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),U=w(3393);function N(_){_=_||{};var I,R,Z,z,W=this.context,X=_.dashMetrics,le=(0,D.Z)(W).getInstance();function x(Ze){Ze.placeholderBuffer=0,Ze.mostAdvancedSegmentStart=NaN,Ze.lastSegmentWasReplacement=!1,Ze.lastSegmentStart=NaN,Ze.lastSegmentDurationS=NaN,Ze.lastSegmentRequestTimeMs=NaN,Ze.lastSegmentFinishTimeMs=NaN,Ze.lastSegmentUrl=""}function $(){for(var Ze in R)if(R.hasOwnProperty(Ze)){var nt=R[Ze];nt.state!==0&&(nt.state=1,x(nt))}}function ce(Ze){if(Ze&&Ze.chunk&&Ze.chunk.mediaInfo){var nt=R[Ze.chunk.mediaInfo.type],lt=Z[Ze.chunk.mediaInfo.type];if(nt&&nt.state!==0){var qe=Ze.chunk.start;isNaN(nt.mostAdvancedSegmentStart)||qe>nt.mostAdvancedSegmentStart?(nt.mostAdvancedSegmentStart=qe,nt.lastSegmentWasReplacement=!1):nt.lastSegmentWasReplacement=!0,nt.lastSegmentStart=qe,nt.lastSegmentDurationS=Ze.chunk.duration,nt.lastQuality=Ze.chunk.quality,he(nt,lt)}}}function oe(Ze){if(Ze&&Ze.metric===F.Z.HTTP_REQUEST&&Ze.value&&Ze.value.type===v.w.MEDIA_SEGMENT_TYPE&&Ze.value.trace&&Ze.value.trace.length){var nt=R[Ze.mediaType],lt=Z[Ze.mediaType];nt&&nt.state!==0&&(nt.lastSegmentRequestTimeMs=Ze.value.trequest.getTime(),nt.lastSegmentFinishTimeMs=Ze.value._tfinish.getTime(),he(nt,lt))}}function he(Ze,nt){isNaN(Ze.lastSegmentStart)||isNaN(Ze.lastSegmentRequestTimeMs)||(nt.segment_request_start_s=.001*Ze.lastSegmentRequestTimeMs,nt.segment_download_finish_s=.001*Ze.lastSegmentFinishTimeMs,Ze.lastSegmentStart=NaN,Ze.lastSegmentRequestTimeMs=NaN)}function Ce(Ze){if(Ze&&Ze.mediaType){var nt=R[Ze.mediaType];nt&&nt.state!==0&&(nt.abrQuality=Ze.newQuality)}}function Xe(Ze,nt){if(Ze.length!==nt.length)return-1;for(var lt=0,qe=0;qe<Ze.length;qe++)lt+=Ze[qe]*nt[qe];return lt}function Ae(){R={},Z={}}return I={getMaxIndex:function(Ze){var nt,lt=(0,b.Z)(W).create(),qe=Math.pow(4,.99),ut=Math.max(Math.pow(4,1),qe*Math.sqrt(4)),At=Ze.getMediaInfo(),Oe=Ze.getMediaType(),Qe=At.bitrateList.map(function(Ot){return Ot.bandwidth}),ct=Qe.length,Xt=Ze.getScheduleController(),Kt=Ze.getStreamInfo(),Tt=Ze.getAbrController(),Ct=Tt.getThroughputHistory(),be=Kt&&Kt.manifestInfo&&Kt.manifestInfo.isDynamic,re=Ze.useL2AABR(),Fe=X.getCurrentBufferLevel(Oe,!0),O=Ct.getSafeAverageThroughput(Oe,be),M=Ct.getAverageThroughput(Oe,be),q=Ct.getAverageLatency(Oe),K=Ze.getVideoModel().getPlaybackRate();if(!(Ze&&Ze.hasOwnProperty("getMediaInfo")&&Ze.hasOwnProperty("getMediaType")&&Ze.hasOwnProperty("getScheduleController")&&Ze.hasOwnProperty("getStreamInfo")&&Ze.hasOwnProperty("getAbrController")&&Ze.hasOwnProperty("useL2AABR"))||(lt.reason=lt.reason||{},!re||Oe===U.Z.AUDIO))return lt;Xt.setTimeToLoadDelay(0);var _e=function(Ot){var Un=Ot.getMediaType(),gr=R[Un];return gr||(gr=function(Pr){var dr={},ei=Pr.getMediaInfo(),eo=ei.bitrateList.map(function(Or){return Or.bandwidth/1e3});return dr.state=1,dr.bitrates=eo,dr.lastQuality=0,function(Or){Or&&Or.type&&(Z[Or.type]={},Z[Or.type].w=[],Z[Or.type].prev_w=[],Z[Or.type].Q=0,Z[Or.type].segment_request_start_s=0,Z[Or.type].segment_download_finish_s=0,Z[Or.type].B_target=1.5)}(ei),x(dr),dr}(Ot),R[Un]=gr),gr}(Ze);if(_e.state===0)return lt;var de=Z[Oe];if(!de||(lt.reason.state=_e.state,lt.reason.throughput=M,lt.reason.latency=q,isNaN(M)))return lt;switch(_e.state){case 1:if(nt=Tt.getQualityForBitrate(At,O,Kt.id,q),lt.quality=nt,lt.reason.throughput=O,_e.lastQuality=nt,!isNaN(_e.lastSegmentDurationS)&&Fe>=de.B_target){_e.state=2,de.Q=qe;for(var Ke=0;Ke<ct;++Ke)Ke===_e.lastQuality?de.prev_w[Ke]=1:de.prev_w[Ke]=0}break;case 2:var St=[],ot=X.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.d},0),it=X.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.b[0]},0),et=Math.round(8*it/ot),ft=X.getCurrentHttpRequest(Oe);if(et<1&&(et=1),ft.url===_e.lastSegmentUrl||ft.type===v.w.INIT_SEGMENT_TYPE)nt=_e.lastQuality;else{for(var yt=_e.lastSegmentDurationS,_t=1,Rt=0;Rt<ct;++Rt)Qe[Rt]=Qe[Rt]/1e3,K*Qe[Rt]>et&&(_t=-1),de.w[Rt]=de.prev_w[Rt]+_t*(yt/(2*ut))*((de.Q+qe)*(K*Qe[Rt]/et));de.w=function(Ot){for(var Un=Ot.length,gr=!1,Pr=[],dr=0;dr<Un;++dr)Pr[dr]=Ot[dr];for(var ei=Ot.sort(function(zi,no){return no-zi}),eo=0,Or=0,to=[],_i=0;_i<Un-1;++_i)if((Or=((eo+=ei[_i])-1)/(_i+1))>=ei[_i+1]){gr=!0;break}gr||(Or=(eo+ei[Un-1]-1)/Un);for(var Di=0;Di<Un;++Di)to[Di]=Math.max(Pr[Di]-Or,0);return to}(de.w);for(var pn=0;pn<ct;++pn)St[pn]=de.w[pn]-de.prev_w[pn],de.prev_w[pn]=de.w[pn];de.Q=Math.max(0,de.Q-yt+yt*K*((Xe(Qe,de.prev_w)+Xe(Qe,St))/et));for(var Qt=[],nn=0;nn<ct;++nn)Qt[nn]=Math.abs(Qe[nn]-Xe(de.w,Qe));(nt=Qt.indexOf(Math.min.apply(Math,Qt)))>_e.lastQuality&&Qe[_e.lastQuality+1]<=et&&(nt=_e.lastQuality+1),Qe[nt]>=et&&(de.Q=2*Math.max(qe,de.Q)),_e.lastSegmentUrl=ft.url}lt.quality=nt,lt.reason.throughput=M,lt.reason.latency=q,lt.reason.bufferLevel=Fe,_e.lastQuality=lt.quality;break;default:z.debug("L2A ABR rule invoked in bad state."),lt.quality=Tt.getQualityForBitrate(At,O,Kt.id,q),lt.reason.state=_e.state,lt.reason.throughput=O,lt.reason.latency=q,_e.state=1,x(_e)}return lt},reset:function(){Ae(),le.off(m.Z.PLAYBACK_SEEKING,$,I),le.off(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),le.off(m.Z.METRIC_ADDED,oe,I),le.off(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I)}},z=(0,T.Z)(W).getInstance().getLogger(I),Ae(),le.on(m.Z.PLAYBACK_SEEKING,$,I),le.on(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),le.on(m.Z.METRIC_ADDED,oe,I),le.on(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I),I}N.__dashjs_factory_name="L2ARule",g.Z=y.Z.getClassFactory(N)},6070:function(C,g,w){var F=w(5448),b=w(6398),y=w(2068);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){for(var N=U?U.getSwitchHistory():null,_=N?N.getSwitchRequests():[],I=0,R=0,Z=0,z=(0,y.Z)(T).create(),W=0;W<_.length;W++)if(_[W]!==void 0&&(I+=_[W].drops,R+=_[W].noDrops,Z+=_[W].dropSize,I+R>=6&&I/R>.075)){z.quality=W>0&&_[W].drops>0?W-1:W,z.reason={index:z.quality,drops:I,noDrops:R,dropSize:Z},m.debug("Switch history rule index: "+z.quality+" samples: "+(I+R)+" drops: "+I);break}return z}},m=(0,b.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="SwitchHistoryRule",g.Z=F.Z.getClassFactory(v)},5628:function(C,g,w){var F=w(5448),b=w(2068),y=w(3393),v=w(3860);function D(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(N){var _=(0,b.Z)(T).create();if(!(N&&N.hasOwnProperty("getMediaInfo")&&N.hasOwnProperty("getMediaType")&&N.hasOwnProperty("useBufferOccupancyABR")&&N.hasOwnProperty("getAbrController")&&N.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var I=N.getMediaInfo(),R=N.getMediaType(),Z=U.getCurrentBufferState(R),z=N.getScheduleController(),W=N.getAbrController(),X=N.getStreamInfo(),le=X?X.id:null,x=X&&X.manifestInfo?X.manifestInfo.isDynamic:null,$=W.getThroughputHistory(),ce=$.getSafeAverageThroughput(R,x),oe=$.getAverageLatency(R),he=N.useBufferOccupancyABR();return isNaN(ce)||!Z||he||W.getAbandonmentStateFor(le,R)!==v.Z.ABANDON_LOAD&&(Z.state===v.Z.BUFFER_LOADED||x)&&(_.quality=W.getQualityForBitrate(I,ce,le,oe),z.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}D.__dashjs_factory_name="ThroughputRule",g.Z=F.Z.getClassFactory(D)},4722:function(C,g,w){var F=w(5448),b=w(6398);function y(){var v,D,m,T,U,N,_,I,R,Z=this.context;function z(){m=null,T=1,U=100,N=0,_=null,I=null,R="dynamic_weight_selection"}function W(){var ce=0;if(m)for(var oe=0;oe<m.length;oe++){var he=m[oe];he.state.throughput>ce&&(ce=he.state.throughput)}return ce}function X(ce,oe,he){var Ce=ce.map(function(Xe,Ae){return he[Ae]*Math.pow(Xe-oe[Ae],2)}).reduce(function(Xe,Ae){return Xe+Ae});return(Ce<0?-1:1)*Math.sqrt(Math.abs(Ce))}function le(ce,oe){return X([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function x(ce,oe,he){for(var Ce=0;Ce<oe.length;Ce++){var Xe=oe[Ce],Ae=le(Xe,ce);$(Xe,he,Math.exp(-1*Math.pow(Ae,2)/(2*Math.pow(.1,2))))}}function $(ce,oe,he){var Ce=ce.state,Xe=[.01,.01,.01,.01];Ce.throughput=Ce.throughput+(oe[0]-Ce.throughput)*Xe[0]*he,Ce.latency=Ce.latency+(oe[1]-Ce.latency)*Xe[1]*he,Ce.rebuffer=Ce.rebuffer+(oe[2]-Ce.rebuffer)*Xe[2]*he,Ce.switch=Ce.switch+(oe[3]-Ce.switch)*Xe[3]*he}return v={getNextQuality:function(ce,oe,he,Ce,Xe,Ae,Ze){var nt=he,lt=Ce,qe=oe,ut=function(de){if(!m){m=[];var Ke=de.bitrateList,St=[];N=Ke[0].bandwidth,Ke.forEach(function(ft){St.push(ft.bandwidth),ft.bandwidth<N&&(N=ft.bandwidth)}),et=St.map(function(ft){return Math.pow(ft,2)}).reduce(function(ft,yt){return ft+yt}),T=Math.sqrt(et);for(var ot=0;ot<Ke.length;ot++){var it={qualityIndex:ot,bitrate:Ke[ot].bandwidth,state:{throughput:Ke[ot].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(it)}I=function(ft){var yt=[],_t=function(Lu){for(var tn=[],sn=0;sn<Lu;sn++){var an=[Math.random()*W(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(ft.length,2));yt.push(_t[0]);for(var Rt=[1,1,1,1],pn=1;pn<ft.length;pn++){for(var Qt=null,nn=null,Ot=0;Ot<_t.length;Ot++){for(var Un=_t[Ot],gr=null,Pr=0;Pr<yt.length;Pr++){var dr=X(Un,yt[Pr],Rt);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&(Qt=Un,nn=gr)}yt.push(Qt)}for(var ei=null,eo=null,Or=0;Or<yt.length;Or++){for(var to=0,_i=0;_i<yt.length;_i++)Or!==_i&&(to+=X(yt[Or],yt[_i],Rt));(ei===null||to>ei)&&(ei=to,eo=Or)}var Di=[];for(Di.push(yt[eo]),yt.splice(eo,1);yt.length>0;){for(var zi=null,no=null,Ti=0;Ti<yt.length;Ti++){var Qn=X(Di[0],yt[Ti],Rt);(zi===null||Qn<zi)&&(zi=Qn,no=Ti)}Di.push(yt[no]),yt.splice(no,1)}return Di}(m)}var et;return m}(ce),At=oe/T;At>1&&(At=W()),he/=U,D.debug("getNextQuality called throughput:".concat(At," latency:").concat(he," bufferSize:").concat(Ce," currentQualityIndex:").concat(Ae," playbackRate:").concat(Xe));var Oe=ut[Ae],Qe=Oe.bitrate*Ze.getSegmentDuration()/qe,ct=Math.max(0,Qe-lt);if(lt-Qe<Ze.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(Oe.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(lt," rebuffer=").concat(ct)),function(de,Ke){var St=0,ot=de;if(m)for(var it=0;it<m.length;it++){var et=m[it];et.bitrate<de.bitrate&&et.bitrate>St&&Ke>et.bitrate&&(St=et.bitrate,ot=et)}return ot}(Oe,qe).qualityIndex;switch(R){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){_=function(Ke,St){for(var ot=[],it=Math.sqrt(2/Ke),et=0;et<4;et++)ot.push(Math.random()*it);return _=ot}(de.length)})(ut);break;default:(function(de,Ke,St,ot,it,et,ft){_||(_=I[I.length-1]);var yt=de.findWeightVector(Ke,St,ot,it,et,ft);yt!==null&&yt!==-1&&(_=yt)})(Ze,ut,nt,lt,ct,qe,Xe)}for(var Xt=null,Kt=null,Tt=null,Ct=0;Ct<ut.length;Ct++){var be=ut[Ct],re=be.state,Fe=[re.throughput,re.latency,re.rebuffer,re.switch],O=_.slice(),M=Ze.getNextBufferWithBitrate(be.bitrate,lt,qe),q=M<Ze.getMinBuffer();q&&D.debug("Buffer is low for bitrate=".concat(be.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(lt," nextBuffer=").concat(M)),(be.bitrate>oe-1e4||q)&&be.bitrate!==N&&(O[0]=100);var K=X(Fe,[At,0,0,0],O);(Xt===null||K<Xt)&&(Xt=K,Kt=be.qualityIndex,Tt=be)}var _e=Math.abs(Oe.bitrate-Tt.bitrate)/T;return x(Oe,ut,[At,he,ct,_e]),x(Tt,ut,[At,0,0,_e]),Kt},reset:function(){z()}},D=(0,b.Z)(Z).getInstance().getLogger(v),z(),v}y.__dashjs_factory_name="LearningAbrController",g.Z=F.Z.getClassFactory(y)},5317:function(C,g,w){var F=w(5448),b=w(2298);function y(){var v,D,m,T,U;function N(){D=null,m=null,T=null,U=null}function _(R,Z,z,W){var X=new b.Z;return X.type=R,X.weights.bitrateReward=Z||1,X.weights.bitrateSwitchPenalty=1,X.weights.rebufferPenalty=z||1e3,X.weights.latencyPenalty=[],X.weights.latencyPenalty.push({threshold:1.1,penalty:.05*W}),X.weights.latencyPenalty.push({threshold:1e8,penalty:.1*z}),X.weights.playbackSpeedPenalty=W||200,X}function I(R,Z,z,W,X){X.bitrateWSum+=X.weights.bitrateReward*R,X.lastBitrate&&(X.bitrateSwitchWSum+=X.weights.bitrateSwitchPenalty*Math.abs(R-X.lastBitrate)),X.lastBitrate=R,X.rebufferWSum+=X.weights.rebufferPenalty*Z;for(var le=0;le<X.weights.latencyPenalty.length;le++){var x=X.weights.latencyPenalty[le];if(z<=x.threshold){X.latencyWSum+=x.penalty*z;break}}X.playbackSpeedWSum+=X.weights.playbackSpeedPenalty*Math.abs(1-W),X.totalQoe=X.bitrateWSum-X.bitrateSwitchWSum-X.rebufferWSum-X.latencyWSum-X.playbackSpeedWSum}return v={setupPerSegmentQoe:function(R,Z,z){D=_("segment",R,Z,z),m=R,T=Z,U=z},logSegmentMetrics:function(R,Z,z,W){D&&I(R,Z,z,W,D)},getPerSegmentQoe:function(){return D},calculateSingleUseQoe:function(R,Z,z,W){var X=null;return m&&T&&U&&(X=_("segment",m,T,U)),X?(I(R,Z,z,W,X),X.totalQoe):0},reset:function(){N()}},N(),v}y.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=F.Z.getClassFactory(y)},5435:function(C,g,w){var F=w(6398),b=w(5448),y=w(4722),v=w(5317),D=w(2068),m=w(3860),T=w(6523),U=w(3393);function N(_){var I,R,Z,z,W=(_=_||{}).dashMetrics,X=this.context;return R={getMaxIndex:function(le){try{var x=(0,D.Z)(X).create(),$=le.getMediaInfo().type,ce=le.getAbrController(),oe=le.getStreamInfo(),he=ce.getQualityFor($,oe.id),Ce=le.getMediaInfo(),Xe=W.getCurrentBufferState($),Ae=le.getScheduleController(),Ze=W.getCurrentBufferLevel($,!0),nt=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,lt=Ae.getPlaybackController(),qe=lt.getCurrentLiveLatency();if(!le.useLoLPABR()||$===U.Z.AUDIO)return x;qe||(qe=0);var ut=lt.getPlaybackRate(),At=ce.getThroughputHistory().getSafeAverageThroughput($,nt);if(I.debug("Throughput ".concat(Math.round(At)," kbps")),isNaN(At)||!Xe||ce.getAbandonmentStateFor(oe.id,$)===m.Z.ABANDON_LOAD)return x;for(var Oe=Ce.bitrateList,Qe=le.getRepresentationInfo().fragmentDuration,ct=Oe[0].bandwidth/1e3,Xt=Oe[Oe.length-1].bandwidth/1e3,Kt=0;Kt<Oe.length;Kt++){var Tt=Oe[Kt].bandwidth/1e3;Tt>Xt?Xt=Tt:Tt<ct&&(ct=Tt)}var Ct=Oe[he].bandwidth/1e3,be=W.getCurrentHttpRequest($,!0),re=(be.tresponse.getTime()-be.trequest.getTime())/1e3,Fe=re>Qe?re-Qe:0;z.setupPerSegmentQoe(Qe,Xt,ct),z.logSegmentMetrics(Ct,Fe,qe,ut);var O=(0,T.Z)(X).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Qe,qoeEvaluator:z});return x.quality=Z.getNextQuality(Ce,1e3*At,qe,Ze,ut,he,O),x.reason={throughput:At,latency:qe},x.priority=D.Z.PRIORITY.STRONG,Ae.setTimeToLoadDelay(0),x.quality!==he&&I.debug("[TgcLearningRule]["+$+"] requesting switch to index: ",x.quality,"Average throughput",Math.round(At),"kbps"),x}catch(M){throw M}},reset:function(){Z.reset(),z.reset()}},I=(0,F.Z)(X).getInstance().getLogger(R),Z=(0,y.Z)(X).create(),z=(0,v.Z)(X).create(),R}N.__dashjs_factory_name="LoLPRule",g.Z=b.Z.getClassFactory(N)},6523:function(C,g,w){var F=w(5448);function b(y){var v,D,m,T,U=y.targetLatency,N=y.bufferMin,_=y.segmentDuration,I=y.qoeEvaluator;function R(){return _}function Z(z,W){var X=R();return W>X?z-X:z+X-W}return v={getMinBuffer:function(){return N},getSegmentDuration:R,getNextBufferWithBitrate:function(z,W,X){return Z(W,z*_/X)},getNextBuffer:Z,findWeightVector:function(z,W,X,le,x,$){var ce=null,oe=null,he=null,Ce=Math.abs(W-m);return z.forEach(function(Xe){D.forEach(function(Ae){Ae[0];var Ze=Ae[1],nt=Ae[2],lt=(Ae[3],Xe.bitrate*_/x),qe=Z(X,lt),ut=(nt===0?10:1/nt)*Math.max(1e-5,lt-qe),At=(Ze===0?10:1/Ze)*Xe.state.latency,Oe=I.calculateSingleUseQoe(Xe.bitrate,ut,At,$);(ce===null||Oe>ce)&&function(Qe,ct,Xt){return!(Qe>U+Xt)&&ct>=N}(W,qe,Ce)&&(ce=Oe,oe=Ae,he=Xe.bitrate)})}),oe===null&&he===null&&(oe=-1),m=W,oe}},D=function z(W,X,le){if(le===X)return W;for(var x=W.length,$=0;$<x;$++)for(var ce=W.shift(),oe=0;oe<T.length;oe++)W.push(ce.concat(T[oe]));return z(W,X,le+1)}((T=[.2,.4,.6,.8,1]).map(function(z){return[z]}),4,1),m=0,v}b.__dashjs_factory_name="LoLpWeightSelector",g.Z=F.Z.getClassFactory(b)},2298:function(C,g){g.Z=function w(){(function(F,b){if(!(F instanceof b))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(C,g,w){w.d(g,{Y:function(){return I}});var F=w(3393),b=w(1553),y=w(5448),v=w(2128),D=w(2594),m=w(7387),T=w(7417),U=w(9032),N=w(9326),_=w(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function R(Z){var z,W,X,le,x,$,ce,oe,he=this.context,Ce=Z.adapter,Xe=Z.baseURLController,Ae=Z.streamInfo,Ze=Z.timelineConverter,nt=Z.debug,lt=Z.eventBus,qe=Z.events,ut=Z.dashConstants,At=(0,D.Z)(he).getInstance();function Oe(ct,Xt){var Kt=new v.Z;Kt.id=ct.id,Kt.bitrate=ct.bandwidth,Kt.width=ct.width,Kt.height=ct.height,Kt.tilesHor=1,Kt.tilesVert=1,ct.essentialProperties&&ct.essentialProperties.forEach(function(Tt){if(I.indexOf(Tt.schemeIdUri)>=0&&Tt.value){var Ct=Tt.value.split("x");Ct.length!==2||isNaN(Ct[0])||isNaN(Ct[1])||(Kt.tilesHor=parseInt(Ct[0],10),Kt.tilesVert=parseInt(Ct[1],10))}}),Xt?$.updateSegmentData(ct).then(function(Tt){(function(Ct,be,re){var Fe=[],O=function(M,q){var K,_e,de,Ke,St=[],ot=0;for(K=0,_e=M.segments.length;K<_e;K++)de=M.segments[K],(Ke=(0,m.TJ)(Ze,Ce.getIsDynamic(),q,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,ot))&&(St.push(Ke),Ke=null,ot++);return St}(re,be);be.segments=O,Ct.segmentDuration=be.segments[0].duration,Ct.readThumbnail=function(M,q){var K=null;Fe.some(function(_e){if(_e.start<=M&&_e.end>M)return K=_e.url,!0}),K?q(K):be.segments.some(function(_e){if(_e.mediaStartTime<=M&&_e.mediaStartTime+_e.duration>M){var de=Xe.resolve(be.path);return ce.load({method:"get",url:de.url,request:{range:_e.mediaRange,responseType:"arraybuffer"},onload:function(Ke){var St=oe.getSamplesInfo(Ke.target.response),ot=new Blob([Ke.target.response.slice(St.sampleList[0].offset,St.sampleList[0].offset+St.sampleList[0].size)],{type:"image/jpeg"}),it=window.URL.createObjectURL(ot);Fe.push({start:_e.mediaStartTime,end:_e.mediaStartTime+_e.duration,url:it}),q&&q(it)}}),!0}})}})(Kt,ct,Tt)}):(Kt.startNumber=ct.startNumber,Kt.segmentDuration=ct.segmentDuration,Kt.timescale=ct.timescale,Kt.templateUrl=function(Tt){var Ct=At.isRelative(Tt.media)?At.resolve(Tt.media,Xe.resolve(Tt.path).url):Tt.media;return Ct?(0,m.Aj)(Ct,Tt.id):""}(ct)),Kt.tilesHor>0&&Kt.tilesVert>0&&(Kt.widthPerTile=Kt.width/Kt.tilesHor,Kt.heightPerTile=Kt.height/Kt.tilesVert,W.push(Kt))}function Qe(){W=[],le=-1,x=null}return z={getTracks:function(){return W},addTracks:function(){if(Ae&&Ce&&(x=Ce.getMediaInfoForType(Ae,F.Z.IMAGE))){var ct=Ce.getVoRepresentations(x);ct&&ct.length>0&&ct.forEach(function(Xt){(Xt.segmentInfoType===b.Z.SEGMENT_TEMPLATE&&Xt.segmentDuration>0&&Xt.media||Xt.segmentInfoType===b.Z.SEGMENT_TIMELINE)&&Oe(Xt),Xt.segmentInfoType===b.Z.SEGMENT_BASE&&Oe(Xt,!0)}),W.length>0&&W.sort(function(Xt,Kt){return Xt.bitrate-Kt.bitrate})}},reset:Qe,setTrackByIndex:function(ct){W&&W.length!==0&&(ct>=W.length&&(ct=W.length-1),le=ct)},getCurrentTrack:function(){return le<0?null:W[le]},getCurrentTrackIndex:function(){return le},getThumbnailRequestForTime:function(ct){for(var Xt,Kt=Ce.getVoRepresentations(x),Tt=0;Tt<Kt.length;Tt++)if(W[le].id===Kt[Tt].id){Xt=Kt[Tt];break}return X.getSegmentRequestForTime(x,Xt,ct)}},Qe(),ce=(0,U.Z)(he).create({}),oe=(0,T.Z)(he).getInstance(),$=(0,_.Z)(he).create({events:qe,eventBus:lt,streamInfo:Ae,timelineConverter:Ze,dashConstants:ut,dashMetrics:Z.dashMetrics,segmentBaseController:Z.segmentBaseController,type:F.Z.IMAGE}),(X=(0,N.Z)(he).create({streamInfo:Ae,type:F.Z.IMAGE,timelineConverter:Ze,segmentsController:$,baseURLController:Xe,debug:nt,eventBus:lt,events:qe,dashConstants:ut,urlUtils:At})).initialize(!!Ce&&Ce.getIsDynamic()),z}R.__dashjs_factory_name="ThumbnailTracks",g.Z=y.Z.getClassFactory(R)},7417:function(C,g,w){var F=w(6398),b=w(8260),y=w(5448),v=w(6934),D=w(9597);function m(){var T,U,N=this.context;function _(Z){if(!Z)return null;Z.fileStart===void 0&&(Z.fileStart=0);var z=v.parseBuffer(Z),W=(0,b.Z)(N).create();return W.setData(z),W}function I(Z,z){return Z[z+3]>>>0|Z[z+2]<<8>>>0|Z[z+1]<<16>>>0|Z[z]<<24>>>0}function R(Z,z){return String.fromCharCode(Z[z++])+String.fromCharCode(Z[z++])+String.fromCharCode(Z[z++])+String.fromCharCode(Z[z])}return U={parse:_,findLastTopIsoBoxCompleted:function(Z,z,W){if(W===void 0&&(W=0),!z||W+8>=z.byteLength)return new D.Z(0,!1);for(var X,le=z instanceof ArrayBuffer?new Uint8Array(z):z,x=0;W<le.byteLength;){var $=I(le,W),ce=R(le,W+4);if($===0)break;W+$<=le.byteLength&&(Z.indexOf(ce)>=0?X=new D.Z(W,!0,$):x=W+$),W+=$}return X||new D.Z(x,!1)},getMediaTimescaleFromMoov:function(Z){var z=_(Z),W=z?z.getBox("mdhd"):void 0;return W?W.timescale:NaN},getSamplesInfo:function(Z){if(!Z||Z.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var z,W,X,le,x,$,ce,oe,he,Ce,Xe,Ae,Ze,nt,lt,qe,ut=_(Z),At=ut.getBoxes("moof"),Oe=ut.getBoxes("mfhd");lt=ut.getBoxes("moof").length,nt=Oe[Oe.length-1].sequence_number,W=0,x=[];var Qe=-1,ct=-1;for(Ce=0;Ce<At.length;Ce++){var Xt=At[Ce],Kt=Xt.getChildBoxes("traf");for(oe=0;oe<Kt.length;oe++){var Tt=Kt[oe],Ct=Tt.getChildBox("tfhd"),be=Tt.getChildBox("tfdt");le=be.baseMediaDecodeTime;var re=Tt.getChildBoxes("trun"),Fe=Tt.getChildBoxes("subs");for(he=0;he<re.length;he++){var O=re[he];for(W=O.sample_count,Ze=(Ct.base_data_offset||0)+(O.data_offset||0),ce=0;ce<W;ce++){z=($=O.samples[ce]).sample_duration!==void 0?$.sample_duration:Ct.default_sample_duration,X=$.sample_size!==void 0?$.sample_size:Ct.default_sample_size;var M={dts:le,cts:le+($.sample_composition_time_offset!==void 0?$.sample_composition_time_offset:0),duration:z,offset:Xt.offset+Ze,size:X,subSizes:[X]};if(Fe)for(Xe=0;Xe<Fe.length;Xe++){var q=Fe[Xe];if(Qe<q.entry_count-1&&ce>ct&&(Qe++,ct+=q.entries[Qe].sample_delta),ce==ct){M.subSizes=[];var K=q.entries[Qe];for(Ae=0;Ae<K.subsample_count;Ae++)M.subSizes.push(K.subsamples[Ae].subsample_size)}}x.push(M),Ze+=X,le+=z}}qe=le-be.baseMediaDecodeTime}}return{sampleList:x,lastSequenceNumber:nt,totalDuration:qe,numSequences:lt}},findInitRange:function(Z){var z=null,W=_(Z);if(!W)return z;var X=W.getBox("ftyp"),le=W.getBox("moov");return T.debug("Searching for initialization."),le&&le.isComplete&&(z=(X?X.offset:le.offset)+"-"+(le.offset+le.size-1),T.debug("Found the initialization.  Range: "+z)),z},parsePayload:function(Z,z,W){if(W===void 0&&(W=0),!z||W+8>=z.byteLength)return new D.Z(0,!1);for(var X,le=z instanceof ArrayBuffer?new Uint8Array(z):z,x=0;W<le.byteLength;){var $=I(le,W),ce=R(le,W+4);if($===0)break;W+$<=le.byteLength&&(Z.indexOf(ce)>=0?X=new D.Z(W,!0,$,ce):x=W+$),W+=$}return X||new D.Z(x,!1)}},T=(0,F.Z)(N).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",g.Z=y.Z.getSingletonFactory(m)},1715:function(C,g,w){w.d(g,{B:function(){return D}});var F=w(5448),b=w(7803),y=w(3393),v=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,N="MediaSource"in window;return T||U||N}function m(){var T,U,N;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:D,supportsEncryptedMedia:function(){return N},supportsCodec:function(_,I){return I!==y.Z.AUDIO&&I!==y.Z.VIDEO?Promise.resolve(!0):function(R,Z){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(R.codec&&Z===y.Z.AUDIO||Z===y.Z.VIDEO&&R.codec&&R.width&&R.height&&R.bitrate&&R.framerate)}(_,I)?function(R,Z){return new Promise(function(z){if(R&&R.codec){var W={type:"media-source"};W[Z]={},W[Z].contentType=R.codec,W[Z].width=R.width,W[Z].height=R.height,W[Z].bitrate=parseInt(R.bitrate),W[Z].framerate=parseFloat(R.framerate),navigator.mediaCapabilities.decodingInfo(W).then(function(X){z(X.supported)}).catch(function(){z(!1)})}else z(!1)})}(_,I):function(R){return new Promise(function(Z){if(R&&R.codec){var z=R.codec;R.width&&R.height&&(z+=';width="'+R.width+'";height="'+R.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(z)||"MediaSource"in window&&MediaSource.isTypeSupported(z)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(z)?Z(!0):Z(!1)}else Z(!1)})}(_)},setEncryptedMediaSupported:function(_){N=_},supportsEssentialProperty:function(_){try{return b.Y.indexOf(_.schemeIdUri)!==-1||y.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var R,Z=_.split(".")[0],z=I.indexOf(Z)===0,W=0;W<v.length;W++)if(v[W].codec===Z){R=v[W];break}return R?z||R.compatibleCodecs.some(function(X){return I.indexOf(X)===0}):z}},N=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=F.Z.getSingletonFactory(m)},2295:function(C,g,w){var F=w(5448),b=w(3106);function y(){return{customTimeRangeArray:[],length:0,add:function(v,D){var m;for(m=0;m<this.customTimeRangeArray.length&&v>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:v,end:D}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(v,D){for(var m=0;m<this.customTimeRangeArray.length;m++)if(v<=this.customTimeRangeArray[m].start&&D>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(v>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:D,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=v;break}v>this.customTimeRangeArray[m].start&&v<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=v:D>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=D)}this.length=this.customTimeRangeArray.length},mergeRanges:function(v,D){var m=this.customTimeRangeArray[v],T=this.customTimeRangeArray[D];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(v,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(D,1),!0)},start:function(v){return(0,b.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].start},end:function(v){return(0,b.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].end}}}y.__dashjs_factory_name="CustomTimeRanges",g.Z=F.Z.getClassFactory(y)},5:function(C,g,w){var F=w(5448);function b(){var y,v=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function(X,le){try{return new window.URL(X,le).toString()}catch(x){return X}},N=function(X,le){var x=_;if(!le||!Z(X))return X;z(X)&&(x=I),W(X)&&(x=R);var $=x(le),ce=$.charAt($.length-1)!=="/"&&X.charAt(0)!=="/"?"/":"";return[$,X].join(ce)};function _(X){var le=X.indexOf("/"),x=X.lastIndexOf("/");return le!==-1?x===le+1?X:(X.indexOf("?")!==-1&&(X=X.substring(0,X.indexOf("?"))),X.substring(0,x+1)):""}function I(X){var le=X.match(T);return le?le[1]:""}function R(X){var le=X.match(v);return le?le[0]:""}function Z(X){return!v.test(X)}function z(X){return Z(X)&&X.charAt(0)==="/"}function W(X){return X.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),y=U}catch(X){}finally{y=y||N}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:R,isRelative:Z,isPathAbsolute:z,isSchemeRelative:W,isHTTPURL:function(X){return D.test(X)},isHTTPS:function(X){return m.test(X)},removeHostname:function(X){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(X)[2].substring(1)},resolve:function(X,le){return y(X,le)}}}b.__dashjs_factory_name="DefaultURLUtils",g.Z=F.Z.getSingletonFactory(b)},8260:function(C,g,w){var F=w(2839),b=w(5448);function y(){var v;function D(T){var U=[];if(!T||!v||typeof v.fetchAll!="function")return U;for(var N,_=v.fetchAll(T),I=0,R=_.length;I<R;I++)(N=m(_[I]))&&U.push(N);return U}function m(T){if(!T)return null;var U=new F.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&v&&v.boxes&&v.boxes.length!==0&&typeof v.fetch=="function"?m(v.fetch(T)):null},getBoxes:D,setData:function(T){v=T},getLastBox:function(){if(!v||!v.boxes||!v.boxes.length)return null;var T=D(v.boxes[v.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}y.__dashjs_factory_name="IsoFile",g.Z=b.Z.getClassFactory(y)},7473:function(C,g,w){w.d(g,{k:function(){return b}});var F=w(5448);function b(v,D){var m={url:v.url,method:v.method,headers:Object.assign({},v.headers),credentials:v.withCredentials?"include":void 0,range:v.request.range};return Promise.resolve(D.modifyRequest(m)).then(function(){return Object.assign(v,m,{withCredentials:m.credentials==="include"})})}function y(){return{modifyRequest:null,modifyRequestURL:function(v){return v},modifyRequestHeader:function(v,D){return D.url,v}}}y.__dashjs_factory_name="RequestModifier",g.Z=F.Z.getSingletonFactory(y)},3106:function(C,g,w){w.d(g,{PS:function(){return y},SE:function(){return v}});var F=w(3393);function b(D){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},b(D)}function y(D,m){if(b(D)!==m)throw F.Z.BAD_ARGUMENT_ERROR}function v(D){if(D===null||isNaN(D)||D%1!=0)throw F.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(C,g,w){var F=w(5448),b=w(5);function y(){var D,m=[],T=this.context;function U(N,_,I){var R=function(Z){var z;for(z=0;z<m.length;z++)if(m[z].regex.test(Z))return m[z].utils;return D}(I||_);return R&&typeof R[N]=="function"?R[N](_,I):D[N](_,I)}return D=(0,b.Z)(T).getInstance(),{registerUrlRegex:function(N,_){m.push({regex:N,utils:_})},parseBaseUrl:function(N){return U("parseBaseUrl",N)},parseOrigin:function(N){return U("parseOrigin",N)},parseScheme:function(N){return U("parseScheme",N)},isRelative:function(N){return U("isRelative",N)},isPathAbsolute:function(N){return U("isPathAbsolute",N)},isSchemeRelative:function(N){return U("isSchemeRelative",N)},isHTTPURL:function(N){return U("isHTTPURL",N)},isHTTPS:function(N){return U("isHTTPS",N)},removeHostname:function(N){return U("removeHostname",N)},resolve:function(N,_){return U("resolve",N,_)}}}y.__dashjs_factory_name="URLUtils";var v=F.Z.getSingletonFactory(y);g.Z=v},5459:function(C,g){g.Z=function w(F,b,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=F||null,this.message=b||null,this.data=y||null}},3186:function(C,g,w){var F=w(7855);function b(v,D){for(var m=0;m<D.length;m++){var T=D[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var y=function(){function v(T){(function(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")})(this,v),this.action=v.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var D,m;return D=v,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===F.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?F.w.INIT_SEGMENT_TYPE:F.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&b(D.prototype,m),v}();y.ACTION_DOWNLOAD="download",y.ACTION_COMPLETE="complete",g.Z=y},2839:function(C,g){function w(b,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}var F=function(){function b(D){if(function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,b),this.offset=D._offset,this.type=D.type,this.size=D.size,this.boxes=[],D.boxes)for(var m=0;m<D.boxes.length;m++)this.boxes.push(new b(D.boxes[m]));switch(this.isComplete=!0,D.type){case"sidx":if(this.timescale=D.timescale,this.earliest_presentation_time=D.earliest_presentation_time,this.first_offset=D.first_offset,this.references=D.references,D.references){this.references=[];for(var T=0;T<D.references.length;T++){var U={reference_type:D.references[T].reference_type,referenced_size:D.references[T].referenced_size,subsegment_duration:D.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=D.id,this.version=D.version===1?1:0,this.value=D.value,this.timescale=D.timescale,this.scheme_id_uri=D.scheme_id_uri,this.presentation_time_delta=D.version===1?D.presentation_time:D.presentation_time_delta,this.event_duration=D.event_duration,this.message_data=D.message_data;break;case"mdhd":this.timescale=D.timescale;break;case"mfhd":this.sequence_number=D.sequence_number;break;case"subs":this.entry_count=D.entry_count,this.entries=D.entries;break;case"tfhd":this.base_data_offset=D.base_data_offset,this.sample_description_index=D.sample_description_index,this.default_sample_duration=D.default_sample_duration,this.default_sample_size=D.default_sample_size,this.default_sample_flags=D.default_sample_flags,this.flags=D.flags;break;case"tfdt":this.version=D.version,this.baseMediaDecodeTime=D.baseMediaDecodeTime,this.flags=D.flags;break;case"trun":if(this.sample_count=D.sample_count,this.first_sample_flags=D.first_sample_flags,this.data_offset=D.data_offset,this.flags=D.flags,this.samples=D.samples,D.samples){this.samples=[];for(var N=0,_=D.samples.length;N<_;N++){var I={sample_size:D.samples[N].sample_size,sample_duration:D.samples[N].sample_duration,sample_composition_time_offset:D.samples[N].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=D.version,this.reference_track_ID=D.reference_track_ID,this.ntp_timestamp_sec=D.ntp_timestamp_sec,this.ntp_timestamp_frac=D.ntp_timestamp_frac,this.media_time=D.media_time,this.flags=D.flags}}var y,v;return y=b,(v=[{key:"getChildBox",value:function(D){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===D)return this.boxes[m]}},{key:"getChildBoxes",value:function(D){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===D&&m.push(this.boxes[T]);return m}}])&&w(y.prototype,v),b}();g.Z=F},9597:function(C,g){g.Z=function w(F,b,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=F,this.found=b,this.size=y}},2128:function(C,g){g.Z=function w(){(function(F,b){if(!(F instanceof b))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(C,g,w){function F(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}w.d(g,{O:function(){return y},w:function(){return b}});var b=function v(){F(this,v),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},y=function v(){F(this,v),this.s=null,this.d=null,this.b=[]};b.GET="GET",b.HEAD="HEAD",b.MPD_TYPE="MPD",b.XLINK_EXPANSION_TYPE="XLinkExpansion",b.INIT_SEGMENT_TYPE="InitializationSegment",b.INDEX_SEGMENT_TYPE="IndexSegment",b.MEDIA_SEGMENT_TYPE="MediaSegment",b.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",b.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",b.DVB_REPORTING_TYPE="DVBReporting",b.LICENSE="license",b.CONTENT_STEERING_TYPE="ContentSteering",b.OTHER_TYPE="other"},3039:function(C,g){function w(b,y){return function(v,D){for(var m,T,U,N=F(v,"tag"),_=F(D==null?"*":D,"range"),I=[],R=-1;++R<_.length;)if(m=_[R].toLowerCase(),y||m!=="*"){for(T=-1,U=[];++T<N.length;)if(b(N[T].toLowerCase(),m)){if(!y)return N[T];I.push(N[T])}else U.push(N[T]);N=U}return y?I:void 0}}function F(b,y){var v=b&&typeof b=="string"?[b]:b;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}g.basicFilter=w(function(b,y){return y==="*"||b===y||b.indexOf(y+"-")>-1},!0),g.extendedFilter=w(function(b,y){var v=b.split("-"),D=y.split("-"),m=0,T=0;if(D[T]!=="*"&&v[m]!==D[T])return!1;for(m++,T++;T<D.length;)if(D[T]!=="*"){if(!v[m])return!1;if(v[m]!==D[T]){if(v[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=w(function(b,y){for(var v,D=y;;){if(D==="*"||b===D)return!0;if((v=D.lastIndexOf("-"))<0)return!1;D.charAt(v-2)==="-"&&(v-=2),D=D.slice(0,v)}})},3973:function(C,g,w){C.exports=w(3854)},3854:function(C,g,w){var F=w(2415),b=w(3039),y=w(7778),v=w(5813),D=w(3165),m=w(9460);C.exports=function(z,W){var X,le=W||{},x=F.parse(String(z||"").toLowerCase(),le),$=F.stringify(x),ce=-1;if(!$)return $;for(;++ce<y.length;)b.extendedFilter($,y[ce].from).length&&(_(x,y[ce].from,y[ce].to),$=F.stringify(x));for(ce=-1;++ce<v.length;)I(x,v[ce].from.field,v[ce].from.value)&&R(x,v[ce].to.field,v[ce].to.value);for($=F.stringify(Object.assign({},x,N)),ce=-1;++ce<D.length;)$===D[ce]&&(_(x,D[ce],D[ce].split("-").slice(0,-1).join("-")),$=F.stringify(Object.assign({},x,N)));if(x.extensions.sort(Z),le.warning)for(X in m)T.call(m[X],x[X])&&le.warning("Deprecated "+X+" `"+x[X]+"`, expected one of `"+m[X][x[X]].join("`, `")+"`",null,7);return x.script&&(x.script=x.script.charAt(0).toUpperCase()+x.script.slice(1)),x.region&&(x.region=x.region.toUpperCase()),F.stringify(x)};var T={}.hasOwnProperty,U=new Intl.Collator,N={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(z,W,X){var le,x=F.parse(W),$=F.parse(X),ce=[];for(le in x)x[le]&&x[le].length&&I(z,le,x[le])&&ce.push(le);for(le in $)$[le]&&$[le].length&&(ce.indexOf(le)>-1||!z[le]||!z[le].length)&&R(z,le,$[le])}function I(z,W,X){var le,x,$,ce,oe=!1;if(X){if(x=le=z[W],le&&typeof le=="object")for(x=[],$=-1;++$<le.length;)ce=le[$],X.indexOf(ce)<0?x.push(ce):oe=!0;else le===X&&(x=null,oe=!0);z[W]=x}return oe}function R(z,W,X){var le,x,$,ce=z[W];if(ce&&typeof ce=="object")for(le=[].concat(X),x=-1;++x<le.length;)$=le[x],ce.indexOf($)<0&&ce.push($);else z[W]=X}function Z(z,W){return U.compare(z.singleton,W.singleton)}},2415:function(C,g,w){g.parse=w(6903),g.stringify=w(6713)},6903:function(C,g,w){var F=w(2219),b=w(3516),y=w(395),v=w(858),D=w(8589);C.exports=function T(U,N){var _,I,R,Z=N||{},z={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},W=String(U),X=W.toLowerCase(),le=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(D,X))return(Z.normalize==null||Z.normalize)&&D[X]?T(D[X]):(z[v.indexOf(X)===-1?"irregular":"regular"]=W,z);for(;b(X.charCodeAt(le))&&le<9;)le++;if(le>1&&le<9){if(z.language=W.slice(0,le),le<4)for(I=0;X.charCodeAt(le)===45&&b(X.charCodeAt(le+1))&&b(X.charCodeAt(le+2))&&b(X.charCodeAt(le+3))&&!b(X.charCodeAt(le+4));){if(I>2)return x(le,3,"Too many extended language subtags, expected at most 3 subtags");z.extendedLanguageSubtags.push(W.slice(le+1,le+4)),le+=4,I++}for(X.charCodeAt(le)===45&&b(X.charCodeAt(le+1))&&b(X.charCodeAt(le+2))&&b(X.charCodeAt(le+3))&&b(X.charCodeAt(le+4))&&!b(X.charCodeAt(le+5))&&(z.script=W.slice(le+1,le+5),le+=5),X.charCodeAt(le)===45&&(b(X.charCodeAt(le+1))&&b(X.charCodeAt(le+2))&&!b(X.charCodeAt(le+3))?(z.region=W.slice(le+1,le+3),le+=3):y(X.charCodeAt(le+1))&&y(X.charCodeAt(le+2))&&y(X.charCodeAt(le+3))&&!y(X.charCodeAt(le+4))&&(z.region=W.slice(le+1,le+4),le+=4));X.charCodeAt(le)===45;){for(R=_=le+1;F(X.charCodeAt(R));){if(R-_>7)return x(R,1,"Too long variant, expected at most 8 characters");R++}if(!(R-_>4||R-_>3&&y(X.charCodeAt(_))))break;z.variants.push(W.slice(_,R)),le=R}for(;X.charCodeAt(le)===45&&X.charCodeAt(le+1)!==120&&F(X.charCodeAt(le+1))&&X.charCodeAt(le+2)===45&&F(X.charCodeAt(le+3));){for(R=le+2,I=0;X.charCodeAt(R)===45&&F(X.charCodeAt(R+1))&&F(X.charCodeAt(R+2));)for(R=(_=R+1)+2,I++;F(X.charCodeAt(R));){if(R-_>7)return x(R,2,"Too long extension, expected at most 8 characters");R++}if(!I)return x(R,4,"Empty extension, extensions must have at least 2 characters of content");z.extensions.push({singleton:W.charAt(le+1),extensions:W.slice(le+3,R).split("-")}),le=R}}else le=0;if(le===0&&X.charCodeAt(le)===120||X.charCodeAt(le)===45&&X.charCodeAt(le+1)===120)for(R=le=le?le+2:1;X.charCodeAt(R)===45&&F(X.charCodeAt(R+1));){for(R=_=le+1;F(X.charCodeAt(R));){if(R-_>7)return x(R,5,"Too long private-use area, expected at most 8 characters");R++}z.privateuse.push(W.slice(le+1,R)),le=R}return le!==W.length?x(le,6,"Found superfluous content after tag"):z;function x($,ce,oe){return Z.warning&&Z.warning(oe,ce,$),Z.forgiving?z:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(C){C.exports=function(g){var w,F,b,y=g||{},v=[];if(y.irregular||y.regular)return y.irregular||y.regular;if(y.language)for(v=v.concat(y.language,y.extendedLanguageSubtags||[],y.script||[],y.region||[],y.variants||[]),w=y.extensions||[],F=-1;++F<w.length;)(b=w[F]).singleton&&b.extensions&&b.extensions.length&&(v=v.concat(b.singleton,b.extensions));return y.privateuse&&y.privateuse.length&&(v=v.concat("x",y.privateuse)),v.join("-")}},1549:function(C,g,w){var F=w(6693),b=w(2165),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(O){return+O!=O&&(O=0),m.alloc(+O)},g.INSPECT_MAX_BYTES=50;var v=2147483647;function D(O){if(O>v)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return Object.setPrototypeOf(M,m.prototype),M}function m(O,M,q){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(O)}return T(O,M,q)}function T(O,M,q){if(typeof O=="string")return function(de,Ke){if(typeof Ke=="string"&&Ke!==""||(Ke="utf8"),!m.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke);var St=0|Z(de,Ke),ot=D(St),it=ot.write(de,Ke);return it!==St&&(ot=ot.slice(0,it)),ot}(O,M);if(ArrayBuffer.isView(O))return function(de){if(be(de,Uint8Array)){var Ke=new Uint8Array(de);return I(Ke.buffer,Ke.byteOffset,Ke.byteLength)}return _(de)}(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(be(O,ArrayBuffer)||O&&be(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(O,SharedArrayBuffer)||O&&be(O.buffer,SharedArrayBuffer)))return I(O,M,q);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return m.from(K,M,q);var _e=function(de){if(m.isBuffer(de)){var Ke=0|R(de.length),St=D(Ke);return St.length===0||de.copy(St,0,0,Ke),St}return de.length!==void 0?typeof de.length!="number"||re(de.length)?D(0):_(de):de.type==="Buffer"&&Array.isArray(de.data)?_(de.data):void 0}(O);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return m.from(O[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function U(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function N(O){return U(O),D(O<0?0:0|R(O))}function _(O){for(var M=O.length<0?0:0|R(O.length),q=D(M),K=0;K<M;K+=1)q[K]=255&O[K];return q}function I(O,M,q){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=M===void 0&&q===void 0?new Uint8Array(O):q===void 0?new Uint8Array(O,M):new Uint8Array(O,M,q),Object.setPrototypeOf(K,m.prototype),K}function R(O){if(O>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|O}function Z(O,M){if(m.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||be(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&q===0)return 0;for(var _e=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Kt(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return Tt(O).length;default:if(_e)return K?-1:Kt(O).length;M=(""+M).toLowerCase(),_e=!0}}function z(O,M,q){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return lt(this,M,q);case"utf8":case"utf-8":return Xe(this,M,q);case"ascii":return Ze(this,M,q);case"latin1":case"binary":return nt(this,M,q);case"base64":return Ce(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qe(this,M,q);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function W(O,M,q){var K=O[M];O[M]=O[q],O[q]=K}function X(O,M,q,K,_e){if(O.length===0)return-1;if(typeof q=="string"?(K=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),re(q=+q)&&(q=_e?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(_e)return-1;q=O.length-1}else if(q<0){if(!_e)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,K)),m.isBuffer(M))return M.length===0?-1:le(O,M,q,K,_e);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(O,M,q):Uint8Array.prototype.lastIndexOf.call(O,M,q):le(O,[M],q,K,_e);throw new TypeError("val must be string, number or Buffer")}function le(O,M,q,K,_e){var de,Ke=1,St=O.length,ot=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;Ke=2,St/=2,ot/=2,q/=2}function it(_t,Rt){return Ke===1?_t[Rt]:_t.readUInt16BE(Rt*Ke)}if(_e){var et=-1;for(de=q;de<St;de++)if(it(O,de)===it(M,et===-1?0:de-et)){if(et===-1&&(et=de),de-et+1===ot)return et*Ke}else et!==-1&&(de-=de-et),et=-1}else for(q+ot>St&&(q=St-ot),de=q;de>=0;de--){for(var ft=!0,yt=0;yt<ot;yt++)if(it(O,de+yt)!==it(M,yt)){ft=!1;break}if(ft)return de}return-1}function x(O,M,q,K){q=Number(q)||0;var _e=O.length-q;K?(K=Number(K))>_e&&(K=_e):K=_e;var de=M.length;K>de/2&&(K=de/2);for(var Ke=0;Ke<K;++Ke){var St=parseInt(M.substr(2*Ke,2),16);if(re(St))return Ke;O[q+Ke]=St}return Ke}function $(O,M,q,K){return Ct(Kt(M,O.length-q),O,q,K)}function ce(O,M,q,K){return Ct(function(_e){for(var de=[],Ke=0;Ke<_e.length;++Ke)de.push(255&_e.charCodeAt(Ke));return de}(M),O,q,K)}function oe(O,M,q,K){return Ct(Tt(M),O,q,K)}function he(O,M,q,K){return Ct(function(_e,de){for(var Ke,St,ot,it=[],et=0;et<_e.length&&!((de-=2)<0);++et)St=(Ke=_e.charCodeAt(et))>>8,ot=Ke%256,it.push(ot),it.push(St);return it}(M,O.length-q),O,q,K)}function Ce(O,M,q){return M===0&&q===O.length?F.fromByteArray(O):F.fromByteArray(O.slice(M,q))}function Xe(O,M,q){q=Math.min(O.length,q);for(var K=[],_e=M;_e<q;){var de,Ke,St,ot,it=O[_e],et=null,ft=it>239?4:it>223?3:it>191?2:1;if(_e+ft<=q)switch(ft){case 1:it<128&&(et=it);break;case 2:(192&(de=O[_e+1]))==128&&(ot=(31&it)<<6|63&de)>127&&(et=ot);break;case 3:de=O[_e+1],Ke=O[_e+2],(192&de)==128&&(192&Ke)==128&&(ot=(15&it)<<12|(63&de)<<6|63&Ke)>2047&&(ot<55296||ot>57343)&&(et=ot);break;case 4:de=O[_e+1],Ke=O[_e+2],St=O[_e+3],(192&de)==128&&(192&Ke)==128&&(192&St)==128&&(ot=(15&it)<<18|(63&de)<<12|(63&Ke)<<6|63&St)>65535&&ot<1114112&&(et=ot)}et===null?(et=65533,ft=1):et>65535&&(et-=65536,K.push(et>>>10&1023|55296),et=56320|1023&et),K.push(et),_e+=ft}return function(yt){var _t=yt.length;if(_t<=Ae)return String.fromCharCode.apply(String,yt);for(var Rt="",pn=0;pn<_t;)Rt+=String.fromCharCode.apply(String,yt.slice(pn,pn+=Ae));return Rt}(K)}g.kMaxLength=v,m.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(O,M,q){return T(O,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(O,M,q){return function(K,_e,de){return U(K),K<=0?D(K):_e!==void 0?typeof de=="string"?D(K).fill(_e,de):D(K).fill(_e):D(K)}(O,M,q)},m.allocUnsafe=function(O){return N(O)},m.allocUnsafeSlow=function(O){return N(O)},m.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==m.prototype},m.compare=function(O,M){if(be(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),be(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(O)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var q=O.length,K=M.length,_e=0,de=Math.min(q,K);_e<de;++_e)if(O[_e]!==M[_e]){q=O[_e],K=M[_e];break}return q<K?-1:K<q?1:0},m.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<O.length;++q)M+=O[q].length;var K=m.allocUnsafe(M),_e=0;for(q=0;q<O.length;++q){var de=O[q];if(be(de,Uint8Array))_e+de.length>K.length?m.from(de).copy(K,_e):Uint8Array.prototype.set.call(K,de,_e);else{if(!m.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(K,_e)}_e+=de.length}return K},m.byteLength=Z,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)W(this,M,M+1);return this},m.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)W(this,M,M+3),W(this,M+1,M+2);return this},m.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)W(this,M,M+7),W(this,M+1,M+6),W(this,M+2,M+5),W(this,M+3,M+4);return this},m.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?Xe(this,0,O):z.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(O){if(!m.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||m.compare(this,O)===0},m.prototype.inspect=function(){var O="",M=g.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},y&&(m.prototype[y]=m.prototype.inspect),m.prototype.compare=function(O,M,q,K,_e){if(be(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),!m.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),q===void 0&&(q=O?O.length:0),K===void 0&&(K=0),_e===void 0&&(_e=this.length),M<0||q>O.length||K<0||_e>this.length)throw new RangeError("out of range index");if(K>=_e&&M>=q)return 0;if(K>=_e)return-1;if(M>=q)return 1;if(this===O)return 0;for(var de=(_e>>>=0)-(K>>>=0),Ke=(q>>>=0)-(M>>>=0),St=Math.min(de,Ke),ot=this.slice(K,_e),it=O.slice(M,q),et=0;et<St;++et)if(ot[et]!==it[et]){de=ot[et],Ke=it[et];break}return de<Ke?-1:Ke<de?1:0},m.prototype.includes=function(O,M,q){return this.indexOf(O,M,q)!==-1},m.prototype.indexOf=function(O,M,q){return X(this,O,M,q,!0)},m.prototype.lastIndexOf=function(O,M,q){return X(this,O,M,q,!1)},m.prototype.write=function(O,M,q,K){if(M===void 0)K="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")K=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,K===void 0&&(K="utf8")):(K=q,q=void 0)}var _e=this.length-M;if((q===void 0||q>_e)&&(q=_e),O.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var de=!1;;)switch(K){case"hex":return x(this,O,M,q);case"utf8":case"utf-8":return $(this,O,M,q);case"ascii":case"latin1":case"binary":return ce(this,O,M,q);case"base64":return oe(this,O,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,O,M,q);default:if(de)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),de=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ae=4096;function Ze(O,M,q){var K="";q=Math.min(O.length,q);for(var _e=M;_e<q;++_e)K+=String.fromCharCode(127&O[_e]);return K}function nt(O,M,q){var K="";q=Math.min(O.length,q);for(var _e=M;_e<q;++_e)K+=String.fromCharCode(O[_e]);return K}function lt(O,M,q){var K=O.length;(!M||M<0)&&(M=0),(!q||q<0||q>K)&&(q=K);for(var _e="",de=M;de<q;++de)_e+=Fe[O[de]];return _e}function qe(O,M,q){for(var K=O.slice(M,q),_e="",de=0;de<K.length-1;de+=2)_e+=String.fromCharCode(K[de]+256*K[de+1]);return _e}function ut(O,M,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>q)throw new RangeError("Trying to access beyond buffer length")}function At(O,M,q,K,_e,de){if(!m.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>_e||M<de)throw new RangeError('"value" argument is out of bounds');if(q+K>O.length)throw new RangeError("Index out of range")}function Oe(O,M,q,K,_e,de){if(q+K>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Qe(O,M,q,K,_e){return M=+M,q>>>=0,_e||Oe(O,0,q,4),b.write(O,M,q,K,23,4),q+4}function ct(O,M,q,K,_e){return M=+M,q>>>=0,_e||Oe(O,0,q,8),b.write(O,M,q,K,52,8),q+8}m.prototype.slice=function(O,M){var q=this.length;(O=~~O)<0?(O+=q)<0&&(O=0):O>q&&(O=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<O&&(M=O);var K=this.subarray(O,M);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(O,M,q){O>>>=0,M>>>=0,q||ut(O,M,this.length);for(var K=this[O],_e=1,de=0;++de<M&&(_e*=256);)K+=this[O+de]*_e;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(O,M,q){O>>>=0,M>>>=0,q||ut(O,M,this.length);for(var K=this[O+--M],_e=1;M>0&&(_e*=256);)K+=this[O+--M]*_e;return K},m.prototype.readUint8=m.prototype.readUInt8=function(O,M){return O>>>=0,M||ut(O,1,this.length),this[O]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(O,M){return O>>>=0,M||ut(O,2,this.length),this[O]|this[O+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(O,M){return O>>>=0,M||ut(O,2,this.length),this[O]<<8|this[O+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(O,M){return O>>>=0,M||ut(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(O,M){return O>>>=0,M||ut(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},m.prototype.readIntLE=function(O,M,q){O>>>=0,M>>>=0,q||ut(O,M,this.length);for(var K=this[O],_e=1,de=0;++de<M&&(_e*=256);)K+=this[O+de]*_e;return K>=(_e*=128)&&(K-=Math.pow(2,8*M)),K},m.prototype.readIntBE=function(O,M,q){O>>>=0,M>>>=0,q||ut(O,M,this.length);for(var K=M,_e=1,de=this[O+--K];K>0&&(_e*=256);)de+=this[O+--K]*_e;return de>=(_e*=128)&&(de-=Math.pow(2,8*M)),de},m.prototype.readInt8=function(O,M){return O>>>=0,M||ut(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},m.prototype.readInt16LE=function(O,M){O>>>=0,M||ut(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(O,M){O>>>=0,M||ut(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(O,M){return O>>>=0,M||ut(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},m.prototype.readInt32BE=function(O,M){return O>>>=0,M||ut(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},m.prototype.readFloatLE=function(O,M){return O>>>=0,M||ut(O,4,this.length),b.read(this,O,!0,23,4)},m.prototype.readFloatBE=function(O,M){return O>>>=0,M||ut(O,4,this.length),b.read(this,O,!1,23,4)},m.prototype.readDoubleLE=function(O,M){return O>>>=0,M||ut(O,8,this.length),b.read(this,O,!0,52,8)},m.prototype.readDoubleBE=function(O,M){return O>>>=0,M||ut(O,8,this.length),b.read(this,O,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||At(this,O,M,q,Math.pow(2,8*q)-1,0);var _e=1,de=0;for(this[M]=255&O;++de<q&&(_e*=256);)this[M+de]=O/_e&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||At(this,O,M,q,Math.pow(2,8*q)-1,0);var _e=q-1,de=1;for(this[M+_e]=255&O;--_e>=0&&(de*=256);)this[M+_e]=O/de&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,1,255,0),this[M]=255&O,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeIntLE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var _e=Math.pow(2,8*q-1);At(this,O,M,q,_e-1,-_e)}var de=0,Ke=1,St=0;for(this[M]=255&O;++de<q&&(Ke*=256);)O<0&&St===0&&this[M+de-1]!==0&&(St=1),this[M+de]=(O/Ke>>0)-St&255;return M+q},m.prototype.writeIntBE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var _e=Math.pow(2,8*q-1);At(this,O,M,q,_e-1,-_e)}var de=q-1,Ke=1,St=0;for(this[M+de]=255&O;--de>=0&&(Ke*=256);)O<0&&St===0&&this[M+de+1]!==0&&(St=1),this[M+de]=(O/Ke>>0)-St&255;return M+q},m.prototype.writeInt8=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},m.prototype.writeInt16LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeInt16BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeInt32LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},m.prototype.writeInt32BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeFloatLE=function(O,M,q){return Qe(this,O,M,!0,q)},m.prototype.writeFloatBE=function(O,M,q){return Qe(this,O,M,!1,q)},m.prototype.writeDoubleLE=function(O,M,q){return ct(this,O,M,!0,q)},m.prototype.writeDoubleBE=function(O,M,q){return ct(this,O,M,!1,q)},m.prototype.copy=function(O,M,q,K){if(!m.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q||(q=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<q&&(K=q),K===q||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-q&&(K=O.length-M+q);var _e=K-q;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,K):Uint8Array.prototype.set.call(O,this.subarray(q,K),M),_e},m.prototype.fill=function(O,M,q,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,q=this.length):typeof q=="string"&&(K=q,q=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var _e=O.charCodeAt(0);(K==="utf8"&&_e<128||K==="latin1")&&(O=_e)}}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var de;if(M>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0),typeof O=="number")for(de=M;de<q;++de)this[de]=O;else{var Ke=m.isBuffer(O)?O:m.from(O,K),St=Ke.length;if(St===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(de=0;de<q-M;++de)this[de+M]=Ke[de%St]}return this};var Xt=/[^+/0-9A-Za-z-_]/g;function Kt(O,M){var q;M=M||1/0;for(var K=O.length,_e=null,de=[],Ke=0;Ke<K;++Ke){if((q=O.charCodeAt(Ke))>55295&&q<57344){if(!_e){if(q>56319){(M-=3)>-1&&de.push(239,191,189);continue}if(Ke+1===K){(M-=3)>-1&&de.push(239,191,189);continue}_e=q;continue}if(q<56320){(M-=3)>-1&&de.push(239,191,189),_e=q;continue}q=65536+(_e-55296<<10|q-56320)}else _e&&(M-=3)>-1&&de.push(239,191,189);if(_e=null,q<128){if((M-=1)<0)break;de.push(q)}else if(q<2048){if((M-=2)<0)break;de.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;de.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;de.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return de}function Tt(O){return F.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(Xt,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function Ct(O,M,q,K){for(var _e=0;_e<K&&!(_e+q>=M.length||_e>=O.length);++_e)M[_e+q]=O[_e];return _e}function be(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function re(O){return O!=O}var Fe=function(){for(var O="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var K=16*q,_e=0;_e<16;++_e)M[K+_e]=O[q]+O[_e];return M}()},6693:function(C,g){g.byteLength=function(U){var N=m(U),_=N[0],I=N[1];return 3*(_+I)/4-I},g.toByteArray=function(U){var N,_,I=m(U),R=I[0],Z=I[1],z=new b(function(le,x,$){return 3*(x+$)/4-$}(0,R,Z)),W=0,X=Z>0?R-4:R;for(_=0;_<X;_+=4)N=F[U.charCodeAt(_)]<<18|F[U.charCodeAt(_+1)]<<12|F[U.charCodeAt(_+2)]<<6|F[U.charCodeAt(_+3)],z[W++]=N>>16&255,z[W++]=N>>8&255,z[W++]=255&N;return Z===2&&(N=F[U.charCodeAt(_)]<<2|F[U.charCodeAt(_+1)]>>4,z[W++]=255&N),Z===1&&(N=F[U.charCodeAt(_)]<<10|F[U.charCodeAt(_+1)]<<4|F[U.charCodeAt(_+2)]>>2,z[W++]=N>>8&255,z[W++]=255&N),z},g.fromByteArray=function(U){for(var N,_=U.length,I=_%3,R=[],Z=16383,z=0,W=_-I;z<W;z+=Z)R.push(T(U,z,z+Z>W?W:z+Z));return I===1?(N=U[_-1],R.push(w[N>>2]+w[N<<4&63]+"==")):I===2&&(N=(U[_-2]<<8)+U[_-1],R.push(w[N>>10]+w[N>>4&63]+w[N<<2&63]+"=")),R.join("")};for(var w=[],F=[],b=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,D=y.length;v<D;++v)w[v]=y[v],F[y.charCodeAt(v)]=v;function m(U){var N=U.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=N),[_,_===N?0:4-_%4]}function T(U,N,_){for(var I,R,Z=[],z=N;z<_;z+=3)I=(U[z]<<16&16711680)+(U[z+1]<<8&65280)+(255&U[z+2]),Z.push(w[(R=I)>>18&63]+w[R>>12&63]+w[R>>6&63]+w[63&R]);return Z.join("")}F[45]=62,F[95]=63},2165:function(C,g){g.read=function(w,F,b,y,v){var D,m,T=8*v-y-1,U=(1<<T)-1,N=U>>1,_=-7,I=b?v-1:0,R=b?-1:1,Z=w[F+I];for(I+=R,D=Z&(1<<-_)-1,Z>>=-_,_+=T;_>0;D=256*D+w[F+I],I+=R,_-=8);for(m=D&(1<<-_)-1,D>>=-_,_+=y;_>0;m=256*m+w[F+I],I+=R,_-=8);if(D===0)D=1-N;else{if(D===U)return m?NaN:1/0*(Z?-1:1);m+=Math.pow(2,y),D-=N}return(Z?-1:1)*m*Math.pow(2,D-y)},g.write=function(w,F,b,y,v,D){var m,T,U,N=8*D-v-1,_=(1<<N)-1,I=_>>1,R=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=y?0:D-1,z=y?1:-1,W=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(T=isNaN(F)?1:0,m=_):(m=Math.floor(Math.log(F)/Math.LN2),F*(U=Math.pow(2,-m))<1&&(m--,U*=2),(F+=m+I>=1?R/U:R*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(F*U-1)*Math.pow(2,v),m+=I):(T=F*Math.pow(2,I-1)*Math.pow(2,v),m=0));v>=8;w[b+Z]=255&T,Z+=z,T/=256,v-=8);for(m=m<<v|T,N+=v;N>0;w[b+Z]=255&m,Z+=z,m/=256,N-=8);w[b+Z-z]|=128*W}},6934:function(C,g){var w={parseBuffer:function(y){return new F(y).parse()},addBoxProcessor:function(y,v){typeof y=="string"&&typeof v=="function"&&(b.prototype._boxProcessors[y]=v)},createFile:function(){return new F},createBox:function(y,v,D){var m=b.create(y);return v&&v.append(m,D),m},createFullBox:function(y,v,D){var m=w.createBox(y,v,D);return m.version=0,m.flags=0,m},Utils:{}};w.Utils.dataViewToString=function(y,v){var D=v||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(D).decode(y);var m=[],T=0;if(D==="utf-8")for(;T<y.byteLength;){var U=y.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&y.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++)):(U=(7&U)<<18,U|=(63&y.getUint8(T++))<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<y.byteLength;)m.push(String.fromCharCode(y.getUint8(T++)));return m.join("")},w.Utils.utf8ToByteArray=function(y){var v,D;if(typeof TextEncoder<"u")v=new TextEncoder().encode(y);else for(v=[],D=0;D<y.length;++D){var m=y.charCodeAt(D);m<128?v.push(m):m<2048?(v.push(192|m>>6),v.push(128|63&m)):m<65536?(v.push(224|m>>12),v.push(128|63&m>>6),v.push(128|63&m)):(v.push(240|m>>18),v.push(128|63&m>>12),v.push(128|63&m>>6),v.push(128|63&m))}return v},w.Utils.appendBox=function(y,v,D){if(v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,D!==-1)if(D!=null){var m,T=-1;if(typeof D=="number")T=D;else{if(typeof D=="string")m=D;else{if(typeof D!="object"||!D.type)return void y.boxes.push(v);m=D.type}for(var U=0;U<y.boxes.length;U++)if(m===y.boxes[U].type){T=U+1;break}}y.boxes.splice(T,0,v)}else y.boxes.push(v)},g.parseBuffer=w.parseBuffer,g.addBoxProcessor=w.addBoxProcessor,g.createFile=w.createFile,g.createBox=w.createBox,g.createFullBox=w.createFullBox,g.Utils=w.Utils,w.Cursor=function(y){this.offset=y===void 0?0:y};var F=function(y){this._cursor=new w.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};F.prototype.fetch=function(y){var v=this.fetchAll(y,!0);return v.length?v[0]:null},F.prototype.fetchAll=function(y,v){var D=[];return F._sweep.call(this,y,D,v),D},F.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=b.parse(this);if(y.type===void 0)break;this.boxes.push(y)}return this},F._sweep=function(y,v,D){for(var m in this.type&&this.type==y&&v.push(this),this.boxes){if(v.length&&D)return;F._sweep.call(this.boxes[m],y,v,D)}},F.prototype.write=function(){var y,v=0;for(y=0;y<this.boxes.length;y++)v+=this.boxes[y].getLength(!1);var D=new Uint8Array(v);for(this._rawo=new DataView(D.buffer),this.bytes=D,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return D.buffer},F.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)};var b=function(){this._cursor=new w.Cursor};b.parse=function(y){var v=new b;return v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,v._parseBox(),y._cursor.offset=v._raw.byteOffset+v._raw.byteLength,v},b.create=function(y){var v=new b;return v.type=y,v.boxes=[],v},b.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],b.prototype._boxProcessors={},b.prototype._procField=function(y,v,D){this._parsing?this[y]=this._readField(v,D):this._writeField(v,D,this[y])},b.prototype._procFieldArray=function(y,v,D,m){var T;if(this._parsing)for(this[y]=[],T=0;T<v;T++)this[y][T]=this._readField(D,m);else for(T=0;T<this[y].length;T++)this._writeField(D,m,this[y][T])},b.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},b.prototype._procEntries=function(y,v,D){var m;if(this._parsing)for(this[y]=[],m=0;m<v;m++)this[y].push({}),D.call(this,this[y][m]);else for(m=0;m<v;m++)D.call(this,this[y][m])},b.prototype._procSubEntries=function(y,v,D,m){var T;if(this._parsing)for(y[v]=[],T=0;T<D;T++)y[v].push({}),m.call(this,y[v][T]);else for(T=0;T<D;T++)m.call(this,y[v][T])},b.prototype._procEntryField=function(y,v,D,m){this._parsing?y[v]=this._readField(D,m):this._writeField(D,m,y[v])},b.prototype._procSubBoxes=function(y,v){var D;if(this._parsing)for(this[y]=[],D=0;D<v;D++)this[y].push(b.parse(this));else for(D=0;D<v;D++)this._rawo?this[y][D].write():this.size+=this[y][D].getLength()},b.prototype._readField=function(y,v){switch(y){case"uint":return this._readUint(v);case"int":return this._readInt(v);case"template":return this._readTemplate(v);case"string":return v===-1?this._readTerminatedString():this._readString(v);case"data":return this._readData(v);case"utf8":return this._readUTF8String();default:return-1}},b.prototype._readInt=function(y){var v=null,D=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:v=this._raw.getInt8(D);break;case 16:v=this._raw.getInt16(D);break;case 32:v=this._raw.getInt32(D);break;case 64:var m=this._raw.getInt32(D),T=this._raw.getInt32(D+4);v=m*Math.pow(2,32)+T}return this._cursor.offset+=y>>3,v},b.prototype._readUint=function(y){var v,D,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((v=this._raw.getUint16(T))<<8)+(D=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:v=this._raw.getUint32(T),D=this._raw.getUint32(T+4),m=v*Math.pow(2,32)+D}return this._cursor.offset+=y>>3,m},b.prototype._readString=function(y){for(var v="",D=0;D<y;D++){var m=this._readUint(8);v+=String.fromCharCode(m)}return v},b.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},b.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var v=this._readUint(8);if(v===0)break;y+=String.fromCharCode(v)}return y},b.prototype._readData=function(y){var v=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(v>0){var D=new Uint8Array(this._raw.buffer,this._cursor.offset,v);return this._cursor.offset+=v,D}return null},b.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),v=null;return y>0&&(v=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),v&&w.Utils.dataViewToString(v)},b.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},b.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},b.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(b.parse(this))},b.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)},b.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},b.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},b.prototype._writeInt=function(y,v){if(this._rawo){var D=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(D,v);break;case 16:this._rawo.setInt16(D,v);break;case 32:this._rawo.setInt32(D,v);break;case 64:var m=Math.floor(v/Math.pow(2,32)),T=v-m*Math.pow(2,32);this._rawo.setUint32(D,m),this._rawo.setUint32(D+4,T)}this._cursor.offset+=y>>3}else this.size+=y>>3},b.prototype._writeUint=function(y,v){if(this._rawo){var D,m,T=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(T,v);break;case 16:this._rawo.setUint16(T,v);break;case 24:D=(16776960&v)>>8,m=255&v,this._rawo.setUint16(T,D),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,v);break;case 64:m=v-(D=Math.floor(v/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,D),this._rawo.setUint32(T+4,m)}this._cursor.offset+=y>>3}else this.size+=y>>3},b.prototype._writeString=function(y,v){for(var D=0;D<y;D++)this._writeUint(8,v.charCodeAt(D))},b.prototype._writeTerminatedString=function(y){if(y.length!==0){for(var v=0;v<y.length;v++)this._writeUint(8,y.charCodeAt(v));this._writeUint(8,0)}},b.prototype._writeTemplate=function(y,v){var D=Math.floor(v),m=(v-D)*Math.pow(2,y/2);this._writeUint(y/2,D),this._writeUint(y/2,m)},b.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var v=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(v+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},b.prototype._writeUTF8String=function(y){var v=w.Utils.utf8ToByteArray(y);if(this._rawo)for(var D=new DataView(this._rawo.buffer,this._cursor.offset,v.length),m=0;m<v.length;m++)D.setUint8(m,v[m]);else this.size+=v.length},b.prototype._writeField=function(y,v,D){switch(y){case"uint":this._writeUint(v,D);break;case"int":this._writeInt(v,D);break;case"template":this._writeTemplate(v,D);break;case"string":v==-1?this._writeTerminatedString(D):this._writeString(v,D);break;case"data":this._writeData(D);break;case"utf8":this._writeUTF8String(D)}},b.prototype._boxProcessors.avc1=b.prototype._boxProcessors.avc2=b.prototype._boxProcessors.avc3=b.prototype._boxProcessors.avc4=b.prototype._boxProcessors.hvc1=b.prototype._boxProcessors.hev1=b.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},b.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_offset",this.version===1?"int":"uint",32)})},b.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},b.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",this.version===1?64:32),this._procEntryField(y,"media_time","int",this.version===1?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},b.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},b.prototype._boxProcessors.free=b.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},b.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},b.prototype._boxProcessors.ftyp=b.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},b.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},b.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},b.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},b.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},b.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},b.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},b.prototype._boxProcessors.mp4a=b.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},b.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},b.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},b.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},b.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},b.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},b.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},b.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},b.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},b.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(v){this._procEntryField(v,"level","uint",8),this._procEntryField(v,"range_size","uint",24)})})},b.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},b.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},b.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_delta","uint",32)})},b.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(v){this._procEntryField(v,"subsample_size","uint",this.version===1?32:16),this._procEntryField(v,"subsample_priority","uint",8),this._procEntryField(v,"discardable","uint",8),this._procEntryField(v,"codec_specific_parameters","uint",32)})})},b.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},b.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},b.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},b.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",this.version===1?64:32),this._procEntryField(y,"moof_offset","uint",this.version===1?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},b.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},b.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},b.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},b.prototype._boxProcessors["url "]=b.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},b.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},b.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},b.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},b.prototype._boxProcessors.vtte=function(){}},5530:function(C,g,w){C.exports=w(6146).polyfill()},6146:function(C,g,w){C.exports=function(){function F(Tt){return typeof Tt=="function"}var b=Array.isArray?Array.isArray:function(Tt){return Object.prototype.toString.call(Tt)==="[object Array]"},y=0,v=void 0,D=void 0,m=function(Tt,Ct){Z[y]=Tt,Z[y+1]=Ct,(y+=2)===2&&(D?D(z):$())},T=typeof window<"u"?window:void 0,U=T||{},N=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function R(){var Tt=setTimeout;return function(){return Tt(z,1)}}var Z=new Array(1e3);function z(){for(var Tt=0;Tt<y;Tt+=2)(0,Z[Tt])(Z[Tt+1]),Z[Tt]=void 0,Z[Tt+1]=void 0;y=0}var W,X,le,x,$=void 0;function ce(Tt,Ct){var be=this,re=new this.constructor(Ce);re[he]===void 0&&ct(re);var Fe=be._state;if(Fe){var O=arguments[Fe-1];m(function(){return Oe(Fe,re,O,be._result)})}else ut(be,re,Tt,Ct);return re}function oe(Tt){if(Tt&&typeof Tt=="object"&&Tt.constructor===this)return Tt;var Ct=new this(Ce);return Ze(Ct,Tt),Ct}$=_?function(){return process.nextTick(z)}:N?(X=0,le=new N(z),x=document.createTextNode(""),le.observe(x,{characterData:!0}),function(){x.data=X=++X%2}):I?((W=new MessageChannel).port1.onmessage=z,function(){return W.port2.postMessage(0)}):T===void 0?function(){try{var Tt=Function("return this")().require("vertx");return(v=Tt.runOnLoop||Tt.runOnContext)!==void 0?function(){v(z)}:R()}catch(Ct){return R()}}():R();var he=Math.random().toString(36).substring(2);function Ce(){}var Xe=void 0;function Ae(Tt,Ct,be){Ct.constructor===Tt.constructor&&be===ce&&Ct.constructor.resolve===oe?function(re,Fe){Fe._state===1?lt(re,Fe._result):Fe._state===2?qe(re,Fe._result):ut(Fe,void 0,function(O){return Ze(re,O)},function(O){return qe(re,O)})}(Tt,Ct):be===void 0?lt(Tt,Ct):F(be)?function(re,Fe,O){m(function(M){var q=!1,K=function(_e,de,Ke,St){try{_e.call(de,Ke,St)}catch(ot){return ot}}(O,Fe,function(_e){q||(q=!0,Fe!==_e?Ze(M,_e):lt(M,_e))},function(_e){q||(q=!0,qe(M,_e))},M._label);!q&&K&&(q=!0,qe(M,K))},re)}(Tt,Ct,be):lt(Tt,Ct)}function Ze(Tt,Ct){if(Tt===Ct)qe(Tt,new TypeError("You cannot resolve a promise with itself"));else if(Fe=typeof(re=Ct),re===null||Fe!=="object"&&Fe!=="function")lt(Tt,Ct);else{var be=void 0;try{be=Ct.then}catch(O){return void qe(Tt,O)}Ae(Tt,Ct,be)}var re,Fe}function nt(Tt){Tt._onerror&&Tt._onerror(Tt._result),At(Tt)}function lt(Tt,Ct){Tt._state===Xe&&(Tt._result=Ct,Tt._state=1,Tt._subscribers.length!==0&&m(At,Tt))}function qe(Tt,Ct){Tt._state===Xe&&(Tt._state=2,Tt._result=Ct,m(nt,Tt))}function ut(Tt,Ct,be,re){var Fe=Tt._subscribers,O=Fe.length;Tt._onerror=null,Fe[O]=Ct,Fe[O+1]=be,Fe[O+2]=re,O===0&&Tt._state&&m(At,Tt)}function At(Tt){var Ct=Tt._subscribers,be=Tt._state;if(Ct.length!==0){for(var re=void 0,Fe=void 0,O=Tt._result,M=0;M<Ct.length;M+=3)re=Ct[M],Fe=Ct[M+be],re?Oe(be,re,Fe,O):Fe(O);Tt._subscribers.length=0}}function Oe(Tt,Ct,be,re){var Fe=F(be),O=void 0,M=void 0,q=!0;if(Fe){try{O=be(re)}catch(K){q=!1,M=K}if(Ct===O)return void qe(Ct,new TypeError("A promises callback cannot return that same promise."))}else O=re;Ct._state!==Xe||(Fe&&q?Ze(Ct,O):q===!1?qe(Ct,M):Tt===1?lt(Ct,O):Tt===2&&qe(Ct,O))}var Qe=0;function ct(Tt){Tt[he]=Qe++,Tt._state=void 0,Tt._result=void 0,Tt._subscribers=[]}var Xt=function(){function Tt(Ct,be){this._instanceConstructor=Ct,this.promise=new Ct(Ce),this.promise[he]||ct(this.promise),b(be)?(this.length=be.length,this._remaining=be.length,this._result=new Array(this.length),this.length===0?lt(this.promise,this._result):(this.length=this.length||0,this._enumerate(be),this._remaining===0&&lt(this.promise,this._result))):qe(this.promise,new Error("Array Methods must be provided an Array"))}return Tt.prototype._enumerate=function(Ct){for(var be=0;this._state===Xe&&be<Ct.length;be++)this._eachEntry(Ct[be],be)},Tt.prototype._eachEntry=function(Ct,be){var re=this._instanceConstructor,Fe=re.resolve;if(Fe===oe){var O=void 0,M=void 0,q=!1;try{O=Ct.then}catch(_e){q=!0,M=_e}if(O===ce&&Ct._state!==Xe)this._settledAt(Ct._state,be,Ct._result);else if(typeof O!="function")this._remaining--,this._result[be]=Ct;else if(re===Kt){var K=new re(Ce);q?qe(K,M):Ae(K,Ct,O),this._willSettleAt(K,be)}else this._willSettleAt(new re(function(_e){return _e(Ct)}),be)}else this._willSettleAt(Fe(Ct),be)},Tt.prototype._settledAt=function(Ct,be,re){var Fe=this.promise;Fe._state===Xe&&(this._remaining--,Ct===2?qe(Fe,re):this._result[be]=re),this._remaining===0&&lt(Fe,this._result)},Tt.prototype._willSettleAt=function(Ct,be){var re=this;ut(Ct,void 0,function(Fe){return re._settledAt(1,be,Fe)},function(Fe){return re._settledAt(2,be,Fe)})},Tt}(),Kt=function(){function Tt(Ct){this[he]=Qe++,this._result=this._state=void 0,this._subscribers=[],Ce!==Ct&&(typeof Ct!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Tt?function(be,re){try{re(function(Fe){Ze(be,Fe)},function(Fe){qe(be,Fe)})}catch(Fe){qe(be,Fe)}}(this,Ct):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Tt.prototype.catch=function(Ct){return this.then(null,Ct)},Tt.prototype.finally=function(Ct){var be=this,re=be.constructor;return F(Ct)?be.then(function(Fe){return re.resolve(Ct()).then(function(){return Fe})},function(Fe){return re.resolve(Ct()).then(function(){throw Fe})}):be.then(Ct,Ct)},Tt}();return Kt.prototype.then=ce,Kt.all=function(Tt){return new Xt(this,Tt).promise},Kt.race=function(Tt){var Ct=this;return b(Tt)?new Ct(function(be,re){for(var Fe=Tt.length,O=0;O<Fe;O++)Ct.resolve(Tt[O]).then(be,re)}):new Ct(function(be,re){return re(new TypeError("You must pass an array to race."))})},Kt.resolve=oe,Kt.reject=function(Tt){var Ct=new this(Ce);return qe(Ct,Tt),Ct},Kt._setScheduler=function(Tt){D=Tt},Kt._setAsap=function(Tt){m=Tt},Kt._asap=m,Kt.polyfill=function(){var Tt=void 0;if(w.g!==void 0)Tt=w.g;else if(typeof self<"u")Tt=self;else try{Tt=Function("return this")()}catch(re){throw new Error("polyfill failed because global object is unavailable in this environment")}var Ct=Tt.Promise;if(Ct){var be=null;try{be=Object.prototype.toString.call(Ct.resolve())}catch(re){}if(be==="[object Promise]"&&!Ct.cast)return}Tt.Promise=Kt},Kt.Promise=Kt,Kt}()},1159:function(C){var g,w=typeof Reflect=="object"?Reflect:null,F=w&&typeof w.apply=="function"?w.apply:function(z,W,X){return Function.prototype.apply.call(z,W,X)};g=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var b=Number.isNaN||function(z){return z!=z};function y(){y.init.call(this)}C.exports=y,C.exports.once=function(z,W){return new Promise(function(X,le){function x(ce){z.removeListener(W,$),le(ce)}function $(){typeof z.removeListener=="function"&&z.removeListener("error",x),X([].slice.call(arguments))}Z(z,W,$,{once:!0}),W!=="error"&&function(ce,oe,he){typeof ce.on=="function"&&Z(ce,"error",oe,{once:!0})}(z,x)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var v=10;function D(z){if(typeof z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}function m(z){return z._maxListeners===void 0?y.defaultMaxListeners:z._maxListeners}function T(z,W,X,le){var x,$,ce,oe;if(D(X),($=z._events)===void 0?($=z._events=Object.create(null),z._eventsCount=0):($.newListener!==void 0&&(z.emit("newListener",W,X.listener?X.listener:X),$=z._events),ce=$[W]),ce===void 0)ce=$[W]=X,++z._eventsCount;else if(typeof ce=="function"?ce=$[W]=le?[X,ce]:[ce,X]:le?ce.unshift(X):ce.push(X),(x=m(z))>0&&ce.length>x&&!ce.warned){ce.warned=!0;var he=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");he.name="MaxListenersExceededWarning",he.emitter=z,he.type=W,he.count=ce.length,oe=he,console&&console.warn&&console.warn(oe)}return z}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(z,W,X){var le={fired:!1,wrapFn:void 0,target:z,type:W,listener:X},x=U.bind(le);return x.listener=X,le.wrapFn=x,x}function _(z,W,X){var le=z._events;if(le===void 0)return[];var x=le[W];return x===void 0?[]:typeof x=="function"?X?[x.listener||x]:[x]:X?function($){for(var ce=new Array($.length),oe=0;oe<ce.length;++oe)ce[oe]=$[oe].listener||$[oe];return ce}(x):R(x,x.length)}function I(z){var W=this._events;if(W!==void 0){var X=W[z];if(typeof X=="function")return 1;if(X!==void 0)return X.length}return 0}function R(z,W){for(var X=new Array(W),le=0;le<W;++le)X[le]=z[le];return X}function Z(z,W,X,le){if(typeof z.on=="function")le.once?z.once(W,X):z.on(W,X);else{if(typeof z.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z);z.addEventListener(W,function x($){le.once&&z.removeEventListener(W,x),X($)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(z){if(typeof z!="number"||z<0||b(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");v=z}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||b(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(z){for(var W=[],X=1;X<arguments.length;X++)W.push(arguments[X]);var le=z==="error",x=this._events;if(x!==void 0)le=le&&x.error===void 0;else if(!le)return!1;if(le){var $;if(W.length>0&&($=W[0]),$ instanceof Error)throw $;var ce=new Error("Unhandled error."+($?" ("+$.message+")":""));throw ce.context=$,ce}var oe=x[z];if(oe===void 0)return!1;if(typeof oe=="function")F(oe,this,W);else{var he=oe.length,Ce=R(oe,he);for(X=0;X<he;++X)F(Ce[X],this,W)}return!0},y.prototype.addListener=function(z,W){return T(this,z,W,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(z,W){return T(this,z,W,!0)},y.prototype.once=function(z,W){return D(W),this.on(z,N(this,z,W)),this},y.prototype.prependOnceListener=function(z,W){return D(W),this.prependListener(z,N(this,z,W)),this},y.prototype.removeListener=function(z,W){var X,le,x,$,ce;if(D(W),(le=this._events)===void 0)return this;if((X=le[z])===void 0)return this;if(X===W||X.listener===W)--this._eventsCount==0?this._events=Object.create(null):(delete le[z],le.removeListener&&this.emit("removeListener",z,X.listener||W));else if(typeof X!="function"){for(x=-1,$=X.length-1;$>=0;$--)if(X[$]===W||X[$].listener===W){ce=X[$].listener,x=$;break}if(x<0)return this;x===0?X.shift():function(oe,he){for(;he+1<oe.length;he++)oe[he]=oe[he+1];oe.pop()}(X,x),X.length===1&&(le[z]=X[0]),le.removeListener!==void 0&&this.emit("removeListener",z,ce||W)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(z){var W,X,le;if((X=this._events)===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[z]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete X[z]),this;if(arguments.length===0){var x,$=Object.keys(X);for(le=0;le<$.length;++le)(x=$[le])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(W=X[z])=="function")this.removeListener(z,W);else if(W!==void 0)for(le=W.length-1;le>=0;le--)this.removeListener(z,W[le]);return this},y.prototype.listeners=function(z){return _(this,z,!0)},y.prototype.rawListeners=function(z){return _(this,z,!1)},y.listenerCount=function(z,W){return typeof z.listenerCount=="function"?z.listenerCount(W):I.call(z,W)},y.prototype.listenerCount=I,y.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(C){var g=Array.isArray,w=Object.keys,F=Object.prototype.hasOwnProperty;C.exports=function b(y,v){if(y===v)return!0;if(y&&v&&typeof y=="object"&&typeof v=="object"){var D,m,T,U=g(y),N=g(v);if(U&&N){if((m=y.length)!=v.length)return!1;for(D=m;D--!=0;)if(!b(y[D],v[D]))return!1;return!0}if(U!=N)return!1;var _=y instanceof Date,I=v instanceof Date;if(_!=I)return!1;if(_&&I)return y.getTime()==v.getTime();var R=y instanceof RegExp,Z=v instanceof RegExp;if(R!=Z)return!1;if(R&&Z)return y.toString()==v.toString();var z=w(y);if((m=z.length)!==w(v).length)return!1;for(D=m;D--!=0;)if(!F.call(v,z[D]))return!1;for(D=m;D--!=0;)if(!b(y[T=z[D]],v[T]))return!1;return!0}return y!=y&&v!=v}},3362:function(C,g,w){(function(F,b,y,v,D){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[v.byName.ruby.qname]:null,K=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),_e=M.contents.length-1;_e>=0;_e--)!K||"styleAttrs"in M.contents[_e]&&v.byName.ruby.qname in M.contents[_e].styleAttrs?m(M.contents[_e]):delete M.contents[_e]}function T(M,q,K,_e){var de=_e&&_e.timeContainer==="seq",Ke=0;_e&&(Ke=de&&K?K.end:_e.begin),q.begin=q.explicit_begin?q.explicit_begin+Ke:Ke;var St=q.begin,ot=null;if("sets"in q)for(var it=0;it<q.sets.length;it++)T(M,q.sets[it],ot,q),St=q.timeContainer==="seq"?q.sets[it].end:Math.max(St,q.sets[it].end),ot=q.sets[it];if("contents"in q){if("contents"in q)for(var et=0;et<q.contents.length;et++)T(M,q.contents[et],ot,q),St=q.timeContainer==="seq"?q.contents[et].end:Math.max(St,q.contents[et].end),ot=q.contents[et]}else St=de?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,Ke+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=Ke+q.explicit_end:q.end=St,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function U(M){this.node=M}function N(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new z}function I(){this.styles={},this.initials={}}function R(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function Z(){this.styleAttrs=null}function z(){this.regions={}}function W(M,q){X.call(this,"image"),this.src=M,this.type=q}function X(M){this.kind=M}function le(M){this.id=M}function x(M){this.regionID=M}function $(M){this.styleAttrs=M}function ce(M){this.sets=M}function oe(M){this.contents=M}function he(M,q,K){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=K}function Ce(){X.call(this,"body")}function Xe(){X.call(this,"div")}function Ae(){X.call(this,"p")}function Ze(){X.call(this,"span")}function nt(){X.call(this,"span")}function lt(){X.call(this,"br")}function qe(){}function ut(){}function At(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function Oe(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function Qe(M,q){var K={};if(M!==null)for(var _e in M.attributes){var de=M.attributes[_e].uri+" "+M.attributes[_e].local,Ke=v.byQName[de];if(Ke!==void 0){var St=Ke.parse(M.attributes[_e].value);St!==null?(K[de]=St,Ke===v.byName.zIndex&&be(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):re(q,"Cannot parse styling attribute "+de+" --> "+M.attributes[_e].value)}}return K}function ct(M,q,K){for(var _e in M.attributes)if(M.attributes[_e].uri===q&&M.attributes[_e].local===K)return M.attributes[_e].value;return null}function Xt(M,q,K){var _e,de=null;return(_e=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?q!==null&&(de=parseFloat(_e[1])/q):(_e=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?M!==null&&(de=parseFloat(_e[1])/M):(_e=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?de=parseFloat(_e[1])/1e3:(_e=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?de=parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?de=3600*parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?de=60*parseFloat(_e[1]):(_e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?de=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseFloat(_e[3]):(_e=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&q!==null&&(de=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseInt(_e[3])+(_e[4]===null?0:parseInt(_e[4])/q)),de}function Kt(M,q,K){for(;q.styleRefs.length>0;){var _e=q.styleRefs.pop();_e in M.styles?(Kt(M,M.styles[_e],K),Ct(M.styles[_e].styleAttrs,q.styleAttrs)):re(K,"Non-existant style id referenced")}}function Tt(M,q,K,_e){for(var de=q.length-1;de>=0;de--){var Ke=q[de];Ke in M.styles?Ct(M.styles[Ke].styleAttrs,K):re(_e,"Non-existant style id referenced")}}function Ct(M,q){for(var K in M)M.hasOwnProperty(K)&&(K in q||(q[K]=M[K]))}function be(M,q){if(M&&M.warn&&M.warn(q))throw q}function re(M,q){if(M&&M.error&&M.error(q))throw q}function Fe(M,q){throw M&&M.fatal&&M.fatal(q),q}function O(M,q){for(var K,_e=0,de=M.length-1;_e<=de;){var Ke=M[K=Math.floor((_e+de)/2)];if(Ke<q)_e=K+1;else{if(!(Ke>q))return{found:!0,index:K};de=K-1}}return{found:!1,index:_e}}F.fromXML=function(M,q,K){var _e=b.parser(!0,{xmlns:!0}),de=[],Ke=[],St=[],ot=0,it=null;_e.onclosetag=function(Rt){if(de[0]instanceof qe)it.head!==null&&it.head.styling!==null&&Tt(it.head.styling,de[0].styleRefs,de[0].styleAttrs,q),delete de[0].styleRefs;else if(de[0]instanceof I)for(var pn in de[0].styles)de[0].styles.hasOwnProperty(pn)&&Kt(de[0],de[0].styles[pn],q);else if(de[0]instanceof Ae||de[0]instanceof Ze){if(de[0].contents.length>1){var Qt,nn=[de[0].contents[0]];for(Qt=1;Qt<de[0].contents.length;Qt++)de[0].contents[Qt]instanceof nt&&nn[nn.length-1]instanceof nt?nn[nn.length-1].text+=de[0].contents[Qt].text:nn.push(de[0].contents[Qt]);de[0].contents=nn}de[0]instanceof Ze&&de[0].contents.length===1&&de[0].contents[0]instanceof nt&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof U&&(de[0].node.uri===y.ns_tt&&de[0].node.local==="metadata"?ot--:ot>0&&K&&"onCloseTag"in K&&K.onCloseTag());St.shift(),Ke.shift(),de.shift()},_e.ontext=function(Rt){if(de[0]!==void 0)if(de[0]instanceof Ze||de[0]instanceof Ae){if(de[0]instanceof Ze){var pn=de[0].styleAttrs[v.byName.ruby.qname];if(pn==="container"||pn==="textContainer"||pn==="baseContainer")return}var Qt=new nt;Qt.initFromText(it,de[0],Rt,Ke[0],St[0],q),de[0].contents.push(Qt)}else de[0]instanceof U&&ot>0&&K&&"onText"in K&&K.onText(Rt)},_e.onopentag=function(Rt){var pn=Rt.attributes["xml:space"];pn?St.unshift(pn.value):St.length===0?St.unshift("default"):St.unshift(St[0]);var Qt=Rt.attributes["xml:lang"];if(Qt?Ke.unshift(Qt.value):Ke.length===0?Ke.unshift(""):Ke.unshift(Ke[0]),Rt.uri===y.ns_tt)if(Rt.local==="tt")it!==null&&Fe(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(it=new N).initFromNode(Rt,Ke[0],q),de.unshift(it);else if(Rt.local==="head")de[0]instanceof N||Fe(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(it.head);else if(Rt.local==="styling")de[0]instanceof _||Fe(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(it.head.styling);else if(Rt.local==="style"){var nn;de[0]instanceof I?((nn=new R).initFromNode(Rt,q),nn.id?it.head.styling.styles[nn.id]=nn:re(q,"<style> element missing @id attribute"),de.unshift(nn)):de[0]instanceof qe?((nn=new R).initFromNode(Rt,q),Ct(nn.styleAttrs,de[0].styleAttrs),de.unshift(nn)):Fe(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Rt.local==="initial"){var Ot;if(de[0]instanceof I){for(var Un in(Ot=new Z).initFromNode(Rt,q),Ot.styleAttrs)Ot.styleAttrs.hasOwnProperty(Un)&&(it.head.styling.initials[Un]=Ot.styleAttrs[Un]);de.unshift(Ot)}else Fe(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Rt.local==="layout")de[0]instanceof _||Fe(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(it.head.layout);else if(Rt.local==="region"){de[0]instanceof z||Fe(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new qe;gr.initFromNode(it,Rt,Ke[0],q),!gr.id||gr.id in it.head.layout.regions?re(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):it.head.layout.regions[gr.id]=gr,de.unshift(gr)}else if(Rt.local==="body"){de[0]instanceof N||Fe(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),it.body!==null&&Fe(q,"Second <body> element at "+this.line+","+this.column+")");var Pr=new Ce;Pr.initFromNode(it,Rt,Ke[0],q),it.body=Pr,de.unshift(Pr)}else if(Rt.local==="div"){de[0]instanceof Xe||de[0]instanceof Ce||Fe(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new Xe;dr.initFromNode(it,de[0],Rt,Ke[0],q);var ei=dr.styleAttrs[v.byName.backgroundImage.qname];ei&&(dr.contents.push(new W(ei)),delete dr.styleAttrs[v.byName.backgroundImage.qname]),de[0].contents.push(dr),de.unshift(dr)}else if(Rt.local==="image"){de[0]instanceof Xe||Fe(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var eo=new W;eo.initFromNode(it,de[0],Rt,Ke[0],q),de[0].contents.push(eo),de.unshift(eo)}else if(Rt.local==="p"){de[0]instanceof Xe||Fe(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Or=new Ae;Or.initFromNode(it,de[0],Rt,Ke[0],q),de[0].contents.push(Or),de.unshift(Or)}else if(Rt.local==="span"){de[0]instanceof Ze||de[0]instanceof Ae||Fe(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var to=new Ze;to.initFromNode(it,de[0],Rt,Ke[0],St[0],q),de[0].contents.push(to),de.unshift(to)}else if(Rt.local==="br"){de[0]instanceof Ze||de[0]instanceof Ae||Fe(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var _i=new lt;_i.initFromNode(it,de[0],Rt,Ke[0],q),de[0].contents.push(_i),de.unshift(_i)}else if(Rt.local==="set"){de[0]instanceof Ze||de[0]instanceof Ae||de[0]instanceof Xe||de[0]instanceof Ce||de[0]instanceof qe||de[0]instanceof lt||Fe(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Di=new ut;Di.initFromNode(it,de[0],Rt,q),de[0].sets.push(Di),de.unshift(Di)}else de.unshift(new U(Rt));else de.unshift(new U(Rt));if(de[0]instanceof U){if(Rt.uri===y.ns_tt&&Rt.local==="metadata")ot++;else if(ot>0&&K&&"onOpenTag"in K){var zi=[];for(var no in Rt.attributes)zi[Rt.attributes[no].uri+" "+Rt.attributes[no].local]={uri:Rt.attributes[no].uri,local:Rt.attributes[no].local,value:Rt.attributes[no].value};K.onOpenTag(Rt.uri,Rt.local,zi)}}},_e.write(M).close(),delete it.head.styling.styles;var et=!1;for(var ft in it.head.layout.regions)if(it.head.layout.regions.hasOwnProperty(ft)){et=!0;break}if(!et){var yt=qe.prototype.createDefaultRegion(it.lang);it.head.layout.regions[yt.id]=yt}for(var _t in it.head.layout.regions)it.head.layout.regions.hasOwnProperty(_t)&&T(it,it.head.layout.regions[_t],null,null);return it.body&&T(it,it.body,null,null),it.body&&m(it.body),it},N.prototype.initFromNode=function(M,q,K){var _e=function(ot,it){var et=ct(ot,y.ns_ttp,"cellResolution"),ft=15,yt=32;if(et!==null){var _t=/(\d+) (\d+)/.exec(et);_t!==null?(yt=parseInt(_t[1]),ft=parseInt(_t[2])):be(it,"Malformed cellResolution value (using initial value instead)")}return{w:yt,h:ft}}(M,K);this.cellLength={h:new D.ComputedLength(0,1/_e.h),w:new D.ComputedLength(1/_e.w,0)};var de=function(ot,it){var et,ft=ct(ot,y.ns_ttp,"frameRate"),yt=30;ft!==null&&((et=/(\d+)/.exec(ft))!==null?yt=parseInt(et[1]):be(it,"Malformed frame rate attribute (using initial value instead)"));var _t=ct(ot,y.ns_ttp,"frameRateMultiplier"),Rt=1;_t!==null&&((et=/(\d+) (\d+)/.exec(_t))!==null?Rt=parseInt(et[1])/parseInt(et[2]):be(it,"Malformed frame rate multiplier attribute (using initial value instead)"));var pn=Rt*yt,Qt=1,nn=ct(ot,y.ns_ttp,"tickRate");return nn===null?ft!==null&&(Qt=pn):(et=/(\d+)/.exec(nn))!==null?Qt=parseInt(et[1]):be(it,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:pn,tickRate:Qt}}(M,K);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=function(ot,it){var et=ct(ot,y.ns_ittp,"aspectRatio");et===null&&(et=ct(ot,y.ns_ttp,"displayAspectRatio"));var ft=null;if(et!==null){var yt=/(\d+)\s+(\d+)/.exec(et);if(yt!==null){var _t=parseInt(yt[1]),Rt=parseInt(yt[2]);_t!==0&&Rt!==0?ft=_t/Rt:re(it,"Illegal aspectRatio values (ignoring)")}else re(it,"Malformed aspectRatio attribute (ignoring)")}return ft}(M,K);var Ke=ct(M,y.ns_ttp,"timeBase");Ke!==null&&Ke!=="media"&&Fe(K,"Unsupported time base");var St=function(ot,it){var et=ct(ot,y.ns_tts,"extent");if(et===null)return null;var ft=et.split(" ");if(ft.length!==2)return be(it,"Malformed extent (ignoring)"),null;var yt=D.parseLength(ft[0]),_t=D.parseLength(ft[1]);return _t&&yt?{h:_t,w:yt}:(be(it,"Malformed extent values (ignoring)"),null)}(M,K);St===null?this.pxLength={h:null,w:null}:(St.h.unit==="px"&&St.w.unit==="px"||Fe(K,"Extent on TT must be in px or absent"),this.pxLength={h:new D.ComputedLength(0,1/St.h.value),w:new D.ComputedLength(1/St.w.value,0)}),this.dimensions={h:new D.ComputedLength(0,1),w:new D.ComputedLength(1,0)},this.lang=q},N.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=O(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var K=O(this.events,M.end);K.found||this.events.splice(K.index,0,M.end)}}},N.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},N.prototype.getMediaTimeEvents=function(){return this.events},R.prototype.initFromNode=function(M,q){this.id=At(M),this.styleAttrs=Qe(M,q),this.styleRefs=Oe(M)},Z.prototype.initFromNode=function(M,q){for(var K in this.styleAttrs={},M.attributes)if(M.attributes[K].uri===y.ns_itts||M.attributes[K].uri===y.ns_ebutts||M.attributes[K].uri===y.ns_tts){var _e=M.attributes[K].uri+" "+M.attributes[K].local;this.styleAttrs[_e]=M.attributes[K].value}},W.prototype.initFromNode=function(M,q,K,_e,de){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||re(de,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||re(de,"Invalid image@type attribute"),$.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},le.prototype.initFromNode=function(M,q,K,_e){this.id=At(K)},x.prototype.initFromNode=function(M,q,K,_e){this.regionID=function(de){return de&&"region"in de.attributes?de.attributes.region.value:""}(K)},$.prototype.initFromNode=function(M,q,K,_e){this.styleAttrs=Qe(K,_e),M.head!==null&&M.head.styling!==null&&Tt(M.head.styling,Oe(K),this.styleAttrs,_e)},ce.prototype.initFromNode=function(M,q,K,_e){this.sets=[]},oe.prototype.initFromNode=function(M,q,K,_e){this.contents=[]},he.prototype.initFromNode=function(M,q,K,_e){var de=function(Ke,St,ot,it){var et=null;ot&&"begin"in ot.attributes&&(et=Xt(Ke.tickRate,Ke.effectiveFrameRate,ot.attributes.begin.value))===null&&be(it,"Malformed begin value "+ot.attributes.begin.value+" (using 0)");var ft=null;ot&&"dur"in ot.attributes&&(ft=Xt(Ke.tickRate,Ke.effectiveFrameRate,ot.attributes.dur.value))===null&&be(it,"Malformed dur value "+ot.attributes.dur.value+" (ignoring)");var yt=null;return ot&&"end"in ot.attributes&&(yt=Xt(Ke.tickRate,Ke.effectiveFrameRate,ot.attributes.end.value))===null&&be(it,"Malformed end value (ignoring)"),{explicit_begin:et,explicit_end:yt,explicit_dur:ft}}(M,0,K,_e);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=function(Ke,St){var ot=Ke&&"timeContainer"in Ke.attributes?Ke.attributes.timeContainer.value:null;return ot&&ot!=="par"?ot==="seq"?"seq":(re(St,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,_e)},Ce.prototype.initFromNode=function(M,q,K,_e){$.prototype.initFromNode.call(this,M,null,q,_e),he.prototype.initFromNode.call(this,M,null,q,_e),ce.prototype.initFromNode.call(this,M,null,q,_e),x.prototype.initFromNode.call(this,M,null,q,_e),oe.prototype.initFromNode.call(this,M,null,q,_e),this.lang=K},Xe.prototype.initFromNode=function(M,q,K,_e,de){$.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},Ae.prototype.initFromNode=function(M,q,K,_e,de){$.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},Ze.prototype.initFromNode=function(M,q,K,_e,de,Ke){$.prototype.initFromNode.call(this,M,q,K,Ke),he.prototype.initFromNode.call(this,M,q,K,Ke),ce.prototype.initFromNode.call(this,M,q,K,Ke),x.prototype.initFromNode.call(this,M,q,K,Ke),oe.prototype.initFromNode.call(this,M,q,K,Ke),this.space=de,this.lang=_e},nt.prototype.initFromText=function(M,q,K,_e,de,Ke){he.prototype.initFromNode.call(this,M,q,null,Ke),this.text=K,this.space=de,this.lang=_e},lt.prototype.initFromNode=function(M,q,K,_e,de){x.prototype.initFromNode.call(this,M,q,K,de),he.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},qe.prototype.createDefaultRegion=function(M){var q=new qe;return le.call(q,""),$.call(q,{}),ce.call(q,[]),he.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},qe.prototype.initFromNode=function(M,q,K,_e){le.prototype.initFromNode.call(this,M,null,q,_e),he.prototype.initFromNode.call(this,M,null,q,_e),ce.prototype.initFromNode.call(this,M,null,q,_e),this.styleAttrs=Qe(q,_e),this.styleRefs=Oe(q),this.lang=K},ut.prototype.initFromNode=function(M,q,K,_e){he.prototype.initFromNode.call(this,M,q,K,_e);var de=Qe(K,_e);for(var Ke in this.qname=null,this.value=null,de)if(de.hasOwnProperty(Ke)){if(this.qname){re(_e,"More than one style specified on set");break}this.qname=Ke,this.value=de[Ke]}}})(g,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(C,g,w){var F=/firefox/i.test(navigator.userAgent);(function(b,y,v){function D(oe,he,Ce,Xe){var Ae;if(Ce.kind==="region")(Ae=document.createElement("div")).style.position="absolute";else if(Ce.kind==="body")Ae=document.createElement("div");else if(Ce.kind==="div")Ae=document.createElement("div");else if(Ce.kind==="image"){if(Ae=document.createElement("img"),oe.imgResolver!==null&&Ce.src!==null){var Ze=oe.imgResolver(Ce.src,Ae);Ze&&(Ae.src=Ze),Ae.height=oe.regionH,Ae.width=oe.regionW}}else if(Ce.kind==="p")Ae=document.createElement("p");else if(Ce.kind==="span")if(Ce.styleAttrs[v.byName.ruby.qname]==="container")Ae=document.createElement("ruby"),oe.ruby=!0;else if(Ce.styleAttrs[v.byName.ruby.qname]==="base")Ae=document.createElement("span");else if(Ce.styleAttrs[v.byName.ruby.qname]==="text")Ae=document.createElement("rt");else if(Ce.styleAttrs[v.byName.ruby.qname]==="baseContainer")Ae=document.createElement("rbc");else if(Ce.styleAttrs[v.byName.ruby.qname]==="textContainer")Ae=document.createElement("rtc");else{if(Ce.styleAttrs[v.byName.ruby.qname]==="delimiter")return;Ae=document.createElement("span")}else Ce.kind==="br"&&(Ae=document.createElement("br"));if(Ae){if(Ce.lang&&(Ce.kind!=="region"&&Ce.lang===Xe.lang||(Ae.lang=Ce.lang)),he.appendChild(Ae),Ae.style.margin="0",Ce.kind==="region"){var nt=Ce.styleAttrs[v.byName.writingMode.qname];nt==="lrtb"||nt==="lr"?(oe.ipd="lr",oe.bpd="tb"):nt==="rltb"||nt==="rl"?(oe.ipd="rl",oe.bpd="tb"):nt==="tblr"?(oe.ipd="tb",oe.bpd="lr"):nt!=="tbrl"&&nt!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(Ce.kind==="p"&&oe.bpd==="tb"){var lt=Ce.styleAttrs[v.byName.direction.qname];oe.ipd=lt==="ltr"?"lr":"rl"}for(var qe=0;qe<Z.length;qe++){var ut=Z[qe],At=Ce.styleAttrs[ut.qname];At!==void 0&&ut.map!==null&&ut.map(oe,Ae,Ce,At)}var Oe=Ae,Qe=Ce.styleAttrs[v.byName.linePadding.qname];if(Qe&&!Qe.isZero()){var ct=Qe.toUsedLength(oe.w,oe.h);if(ct>0){var Xt=Math.ceil(ct)+"px";oe.bpd==="tb"?(Oe.style.paddingLeft=Xt,Oe.style.paddingRight=Xt):(Oe.style.paddingTop=Xt,Oe.style.paddingBottom=Xt),oe.lp=Qe}}var Kt=Ce.styleAttrs[v.byName.multiRowAlign.qname];if(Kt&&Kt!=="auto"){var Tt=document.createElement("span");Tt.style.display="inline-block",Tt.style.textAlign=Kt,Ae.appendChild(Tt),Oe=Tt,oe.mra=Kt}var Ct=Ce.styleAttrs[v.byName.rubyReserve.qname];if(Ct&&Ct[0]!=="none"&&(oe.rubyReserve=Ct),Ce.styleAttrs[v.byName.fillLineGap.qname]&&(oe.flg=!0),Ce.kind==="span"&&Ce.text){var be=Ce.styleAttrs[v.byName.textEmphasis.qname];if(be&&be.style!=="none"&&(oe.textEmphasis=!0),v.byName.textCombine.qname in Ce.styleAttrs&&Ce.styleAttrs[v.byName.textCombine.qname]==="all")Ae.textContent=Ce.text,Ae._isd_element=Ce,be&&I(oe,Ae,0,be);else for(var re="",Fe=0;Fe<Ce.text.length;Fe++){re+=Ce.text.charAt(Fe);var O=Ce.text.charCodeAt(Fe);if(O<55296||O>56319||Fe===Ce.text.length-1){var M=document.createElement("span");M.textContent=re,be&&I(oe,M,0,be),Ae.appendChild(M),re="",M._isd_element=Ce}}}if("contents"in Ce)for(var q=0;q<Ce.contents.length;q++)D(oe,Oe,Ce.contents[q],Ce);var K=[];if(Ce.kind==="p"&&(_(oe,Oe,K,null),oe.rubyReserve&&(function(ot,it){for(var et=0;et<ot.length;et++){var ft,yt,_t=document.createElement("ruby"),Rt=document.createElement("span");Rt.textContent="​",_t.appendChild(Rt);var pn,Qt=it.rubyReserve[1].toUsedLength(it.w,it.h)+"px";it.rubyReserve[0]==="both"||it.rubyReserve[0]==="outside"&&ot.length==1?((ft=document.createElement("rtc")).style[le]=X?"after":"under",ft.textContent="​",ft.style.fontSize=Qt,(yt=document.createElement("rtc")).style[le]=X?"before":"over",yt.textContent="​",yt.style.fontSize=Qt,_t.appendChild(ft),_t.appendChild(yt)):((ft=document.createElement("rtc")).textContent="​",ft.style.fontSize=Qt,pn=it.rubyReserve[0]==="after"||it.rubyReserve[0]==="outside"&&et>0?X?"after":it.bpd==="tb"||it.bpd==="rl"?"under":"over":X?"before":it.bpd==="tb"||it.bpd==="rl"?"over":"under",ft.style[le]=pn,_t.appendChild(ft));for(var nn=null,Ot=0;Ot<ot[et].rbc.length;Ot++)if(ot[et].rbc[Ot].localName==="ruby"){nn=ot[et].rbc[Ot];for(var Un=0;Un<nn.style.length;Un++)_t.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||ot[et].elements[0].node).parentElement.insertBefore(_t,nn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(ot,it){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].rbc.length;ft++){var yt;ot[et].rbc[ft].style[le]||(yt=X?et===0?"before":"after":it.bpd==="tb"||it.bpd==="rl"?et===0?"over":"under":et===0?"under":"over",ot[et].rbc[ft].style[le]=yt)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(ot,it){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].te.length;ft++){var yt;ot[et].te[ft].style[$]&&ot[et].te[ft].style[$]!=="none"||(yt=it.bpd==="tb"?et===0?"left over":"left under":it.bpd==="rl"?et===0?"right under":"left under":et===0?"left under":"right under",ot[et].te[ft].style[$]=yt)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(ot){for(var it=0;it<ot.length-1;it++){var et=ot[it].elements.length;if(et!==0&&ot[it].br===!1){var ft=document.createElement("br"),yt=ot[it].elements[et-1].node;yt.parentElement.insertBefore(ft,yt.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(ot,it,et){if(ot!==null)for(var ft=0;ft<ot.length;ft++){var yt=ot[ft].elements.length,_t=Math.ceil(it)+"px",Rt="-"+Math.ceil(it)+"px";if(yt!==0){var pn=ot[ft].elements[ot[ft].start_elem],Qt=ot[ft].elements[ot[ft].end_elem];if(pn===Qt){var nn=pn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}et.ipd==="lr"?(pn.node.style.marginLeft=Rt,pn.node.style.paddingLeft=_t):et.ipd==="rl"?(pn.node.style.paddingRight=_t,pn.node.style.marginRight=Rt):et.ipd==="tb"&&(pn.node.style.paddingTop=_t,pn.node.style.marginTop=Rt),et.ipd==="lr"?(F||(Qt.node.style.marginRight=Rt),Qt.node.style.paddingRight=_t):et.ipd==="rl"?(Qt.node.style.paddingLeft=_t,F||(Qt.node.style.marginLeft=Rt)):et.ipd==="tb"&&(Qt.node.style.paddingBottom=_t,Qt.node.style.marginBottom=Rt)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(ot,it){for(var et=0;et<ot.length;et++)for(var ft=ot[et],yt=1;yt<ft.elements.length;){var _t=ft.elements[yt-1],Rt=ft.elements[yt];T(_t.node,Rt.node,it)?ft.elements.splice(yt,1):yt++}for(var pn,Qt,nn=[],Ot=0;Ot<ot.length;Ot++)for(var Un=0;Un<ot[Ot].elements.length;Un++)(Qt=m(pn=ot[Ot].elements[Un].node,nn,!1))&&(pn.style.backgroundColor=Qt);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(K,oe),oe.flg)){var _e=N(Oe.getBoundingClientRect(),oe);(function(ot,it,et,ft,yt){for(var _t=Math.sign(et-it),Rt=0;Rt<=ot.length;Rt++){var pn,Qt,nn,Ot;if(pn=Rt===0?Math.round(it):Rt===ot.length?Math.round(et):Math.round((ot[Rt-1].after+ot[Rt].before)/2),Rt>0&&ot[Rt-1])for(nn=0;nn<ot[Rt-1].elements.length;nn++)Qt=_t*(pn-(Ot=ot[Rt-1].elements[nn]).after)+"px",ft.bpd==="lr"?Ot.node.style.paddingRight=Qt:ft.bpd==="rl"?Ot.node.style.paddingLeft=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingBottom=Qt);if(Rt<ot.length)for(nn=0;nn<ot[Rt].elements.length;nn++)Qt=_t*((Ot=ot[Rt].elements[nn]).before-pn)+"px",ft.bpd==="lr"?Ot.node.style.paddingLeft=Qt:ft.bpd==="rl"?Ot.node.style.paddingRight=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingTop=Qt)}})(K,_e.before,_e.after,oe),oe.flg=null}if(Ce.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&Ce.contents.length>0&&Ce.styleAttrs[v.byName.displayAlign.qname]==="after"){_(oe,Oe,K,null);var de=new U(Ce.id===""?"_":Ce.id,K);if(oe.currentISDState[de.id]=de,oe.previousISDState&&de.id in oe.previousISDState&&oe.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===oe.previousISDState[de.id].plist[oe.previousISDState[de.id].plist.length-1].text){var Ke=Ae.firstElementChild,St=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;Ke.style.bottom="-"+St+"px",Ke.style.transition="transform 0.4s",Ke.style.position="relative",Ke.style.transform="translateY(-"+St+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+Ce.kind)}function m(oe,he,Ce){return oe.style.backgroundColor?(Ce&&!he.includes(oe)&&he.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,he,!0):void 0}function T(oe,he,Ce){if(oe.tagName==="SPAN"&&he.tagName==="SPAN"&&oe._isd_element===he._isd_element){if(!oe._isd_element)return ce(Ce.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=he.textContent;for(var Xe=0;Xe<he.style.length;Xe++){var Ae=he.style[Xe];(Ae.indexOf("border")>=0||Ae.indexOf("padding")>=0||Ae.indexOf("margin")>=0)&&(oe.style[Ae]=he.style[Ae])}return he.parentElement.removeChild(he),!0}return!1}function U(oe,he){this.id=oe,this.plist=he}function N(oe,he){var Ce={before:null,after:null,start:null,end:null};return he.bpd==="tb"?(Ce.before=oe.top,Ce.after=oe.bottom,he.ipd==="lr"?(Ce.start=oe.left,Ce.end=oe.right):(Ce.start=oe.right,Ce.end=oe.left)):he.bpd==="lr"?(Ce.before=oe.left,Ce.after=oe.right,Ce.start=oe.top,Ce.end=oe.bottom):he.bpd==="rl"&&(Ce.before=oe.right,Ce.after=oe.left,Ce.start=oe.top,Ce.end=oe.bottom),Ce}function _(oe,he,Ce,Xe){if(he.localName!=="rt"&&he.localName!=="rtc"){var Ae,Ze,nt,lt,qe=he.style.backgroundColor||Xe;if(he.childElementCount===0)if(he.localName==="span"||he.localName==="rb"){var ut=N(he.getBoundingClientRect(),oe);if(Ce.length!==0&&(Ae=ut.before,Ze=ut.after,nt=Ce[Ce.length-1].before,Ze<(lt=Ce[Ce.length-1].after)&&Ae>nt||lt<=Ze&&nt>=Ae)){var At=Math.sign(ut.after-ut.before),Oe=Math.sign(ut.end-ut.start);At*(ut.before-Ce[Ce.length-1].before)<0&&(Ce[Ce.length-1].before=ut.before),At*(ut.after-Ce[Ce.length-1].after)>0&&(Ce[Ce.length-1].after=ut.after),Oe*(ut.start-Ce[Ce.length-1].start)<0&&(Ce[Ce.length-1].start=ut.start,Ce[Ce.length-1].start_elem=Ce[Ce.length-1].elements.length),Oe*(ut.end-Ce[Ce.length-1].end)>0&&(Ce[Ce.length-1].end=ut.end,Ce[Ce.length-1].end_elem=Ce[Ce.length-1].elements.length)}else Ce.push({before:ut.before,after:ut.after,start:ut.start,end:ut.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ce[Ce.length-1].text+=he.textContent,Ce[Ce.length-1].elements.push({node:he,bgcolor:qe,before:ut.before,after:ut.after})}else he.localName==="br"&&Ce.length!==0&&(Ce[Ce.length-1].br=!0);else for(var Qe=he.firstChild;Qe;)Qe.nodeType===Node.ELEMENT_NODE&&(_(oe,Qe,Ce,qe),Qe.localName==="ruby"||Qe.localName==="rtc"?Ce.length>0&&Ce[Ce.length-1].rbc.push(Qe):Qe.localName==="span"&&Qe.style[x]&&Qe.style[x]!=="none"&&Ce.length>0&&Ce[Ce.length-1].te.push(Qe)),Qe=Qe.nextSibling}}function I(oe,he,Ce,Xe){var Ae;Xe.style!=="none"&&(Xe.style==="auto"?he.style[x]="filled":he.style[x]=Xe.style+" "+Xe.symbol,(Xe.position==="before"||Xe.position==="after")&&(Ae=oe.bpd==="tb"?Xe.position==="before"?"left over":"left under":oe.bpd==="rl"?Xe.position==="before"?"right under":"left under":Xe.position==="before"?"left under":"right under",he.style[$]=Ae))}function R(oe,he){this.qname=oe,this.map=he}b.render=function(oe,he,Ce,Xe,Ae,Ze,nt,lt,qe){var ut=Xe||he.clientHeight,At=Ae||he.clientWidth;if(oe.aspectRatio!==null){var Oe=ut*oe.aspectRatio;Oe>At?ut=Math.round(At/oe.aspectRatio):At=Oe}var Qe=document.createElement("div");Qe.style.position="relative",Qe.style.width=At+"px",Qe.style.height=ut+"px",Qe.style.margin="auto",Qe.style.top=0,Qe.style.bottom=0,Qe.style.left=0,Qe.style.right=0,Qe.style.zIndex=0;var ct={h:ut,w:At,regionH:null,regionW:null,imgResolver:Ce,displayForcedOnlyMode:Ze||!1,isd:oe,errorHandler:nt,previousISDState:lt,enableRollUp:qe||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(he.appendChild(Qe),"contents"in oe)for(var Xt=0;Xt<oe.contents.length;Xt++)D(ct,Qe,oe.contents[Xt],oe);return ct.currentISDState};for(var Z=[new R("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,he,Ce,Xe){Xe[3]!==0&&(he.style.backgroundColor="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")")}),new R("http://www.w3.org/ns/ttml#styling color",function(oe,he,Ce,Xe){he.style.color="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")"}),new R("http://www.w3.org/ns/ttml#styling direction",function(oe,he,Ce,Xe){he.style.direction=Xe}),new R("http://www.w3.org/ns/ttml#styling display",function(oe,he,Ce,Xe){}),new R("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,he,Ce,Xe){he.style.display="flex",he.style.flexDirection="column",Xe==="before"?he.style.justifyContent="flex-start":Xe==="center"?he.style.justifyContent="center":Xe==="after"&&(he.style.justifyContent="flex-end")}),new R("http://www.w3.org/ns/ttml#styling extent",function(oe,he,Ce,Xe){oe.regionH=Xe.h.toUsedLength(oe.w,oe.h),oe.regionW=Xe.w.toUsedLength(oe.w,oe.h);var Ae=0,Ze=0,nt=Ce.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];nt&&(Ae=nt[0].toUsedLength(oe.w,oe.h)+nt[2].toUsedLength(oe.w,oe.h),Ze=nt[1].toUsedLength(oe.w,oe.h)+nt[3].toUsedLength(oe.w,oe.h)),he.style.height=oe.regionH-Ae+"px",he.style.width=oe.regionW-Ze+"px"}),new R("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,he,Ce,Xe){for(var Ae=[],Ze=0;Ze<Xe.length;Ze++)Xe[Ze]=Xe[Ze].trim(),Xe[Ze]==="monospaceSerif"?(Ae.push("Courier New"),Ae.push('"Liberation Mono"'),Ae.push("Courier"),Ae.push("monospace")):Xe[Ze]==="proportionalSansSerif"?(Ae.push("Arial"),Ae.push("Helvetica"),Ae.push('"Liberation Sans"'),Ae.push("sans-serif")):Xe[Ze]==="monospace"?Ae.push("monospace"):Xe[Ze]==="sansSerif"?Ae.push("sans-serif"):Xe[Ze]==="serif"?Ae.push("serif"):Xe[Ze]==="monospaceSansSerif"?(Ae.push("Consolas"),Ae.push("monospace")):Xe[Ze]==="proportionalSerif"?Ae.push("serif"):Ae.push(Xe[Ze]);if(Ae.length>0){for(var nt=[Ae[0]],lt=1;lt<Ae.length;lt++)nt.indexOf(Ae[lt])==-1&&nt.push(Ae[lt]);Ae=nt}he.style.fontFamily=Ae.join(",")}),new R("http://www.w3.org/ns/ttml#styling shear",function(oe,he,Ce,Xe){if(Xe!==0){var Ae=-.9*Xe;oe.bpd==="tb"?he.style.transform="skewX("+Ae+"deg)":he.style.transform="skewY("+Ae+"deg)"}}),new R("http://www.w3.org/ns/ttml#styling fontSize",function(oe,he,Ce,Xe){he.style.fontSize=Xe.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,he,Ce,Xe){he.style.fontStyle=Xe}),new R("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,he,Ce,Xe){he.style.fontWeight=Xe}),new R("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,he,Ce,Xe){he.style.lineHeight=Xe==="normal"?"normal":Xe.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling opacity",function(oe,he,Ce,Xe){he.style.opacity=Xe}),new R("http://www.w3.org/ns/ttml#styling origin",function(oe,he,Ce,Xe){he.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",he.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling overflow",function(oe,he,Ce,Xe){he.style.overflow=Xe}),new R("http://www.w3.org/ns/ttml#styling padding",function(oe,he,Ce,Xe){var Ae=[];Ae[0]=Xe[0].toUsedLength(oe.w,oe.h)+"px",Ae[1]=Xe[3].toUsedLength(oe.w,oe.h)+"px",Ae[2]=Xe[2].toUsedLength(oe.w,oe.h)+"px",Ae[3]=Xe[1].toUsedLength(oe.w,oe.h)+"px",he.style.padding=Ae.join(" ")}),new R("http://www.w3.org/ns/ttml#styling position",function(oe,he,Ce,Xe){he.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",he.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new R("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,he,Ce,Xe){he.style.rubyAlign=Xe==="spaceAround"?"space-around":"center"}),new R("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,he,Ce,Xe){var Ae;Xe!=="before"&&Xe!=="after"||(Ae=X?Xe:oe.bpd==="tb"||oe.bpd==="rl"?Xe==="before"?"over":"under":Xe==="before"?"under":"over",he.parentElement.style[le]=Ae)}),new R("http://www.w3.org/ns/ttml#styling showBackground",null),new R("http://www.w3.org/ns/ttml#styling textAlign",function(oe,he,Ce,Xe){var Ae;Ae=Xe==="start"?oe.ipd==="rl"?"right":"left":Xe==="end"?oe.ipd==="rl"?"left":"right":Xe,he.style.textAlign=Ae}),new R("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,he,Ce,Xe){he.style.textDecoration=Xe.join(" ").replace("lineThrough","line-through")}),new R("http://www.w3.org/ns/ttml#styling textOutline",function(oe,he,Ce,Xe){}),new R("http://www.w3.org/ns/ttml#styling textShadow",function(oe,he,Ce,Xe){var Ae=Ce.styleAttrs[v.byName.textOutline.qname];if(Xe==="none"&&Ae==="none")he.style.textShadow="";else{var Ze=[];if(Ae!=="none"){var nt="rgba("+Ae.color[0].toString()+","+Ae.color[1].toString()+","+Ae.color[2].toString()+","+(Ae.color[3]/255).toString()+")";Ze.push("1px 1px 1px "+nt),Ze.push("-1px 1px 1px "+nt),Ze.push("1px -1px 1px "+nt),Ze.push("-1px -1px 1px "+nt)}if(Xe!=="none")for(var lt=0;lt<Xe.length;lt++)Ze.push(Xe[lt].x_off.toUsedLength(oe.w,oe.h)+"px "+Xe[lt].y_off.toUsedLength(oe.w,oe.h)+"px "+Xe[lt].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Xe[lt].color[0].toString()+","+Xe[lt].color[1].toString()+","+Xe[lt].color[2].toString()+","+(Xe[lt].color[3]/255).toString()+")");he.style.textShadow=Ze.join(",")}}),new R("http://www.w3.org/ns/ttml#styling textCombine",function(oe,he,Ce,Xe){he.style.textCombineUpright=Xe}),new R("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,he,Ce,Xe){}),new R("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,he,Ce,Xe){var Ae;Ae=Xe==="bidiOverride"?"bidi-override":Xe,he.style.unicodeBidi=Ae}),new R("http://www.w3.org/ns/ttml#styling visibility",function(oe,he,Ce,Xe){he.style.visibility=Xe}),new R("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,he,Ce,Xe){Xe==="wrap"?Ce.space==="preserve"?he.style.whiteSpace="pre-wrap":he.style.whiteSpace="normal":Ce.space==="preserve"?he.style.whiteSpace="pre":he.style.whiteSpace="noWrap"}),new R("http://www.w3.org/ns/ttml#styling writingMode",function(oe,he,Ce,Xe){Xe==="lrtb"||Xe==="lr"||Xe==="rltb"||Xe==="rl"?he.style.writingMode="horizontal-tb":Xe==="tblr"?he.style.writingMode="vertical-lr":Xe!=="tbrl"&&Xe!=="tb"||(he.style.writingMode="vertical-rl")}),new R("http://www.w3.org/ns/ttml#styling zIndex",function(oe,he,Ce,Xe){he.style.zIndex=Xe}),new R("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,he,Ce,Xe){oe.displayForcedOnlyMode&&Xe===!1&&(he.style.visibility="hidden")})],z={},W=0;W<Z.length;W++)z[Z[W].qname]=Z[W];var X="webkitRubyPosition"in window.getComputedStyle(document.documentElement),le=X?"webkitRubyPosition":"rubyPosition",x="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",$="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,he){if(oe&&oe.error&&oe.error(he))throw he}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(C,g,w){(function(F,b,y,v){F.generateISD=function(R,Z,z){var W,X=new N(R),le={},x={},$=R.head.styling.initials[y.byName.showBackground.qname],ce=R.head.styling.initials[y.byName.backgroundColor.qname];for(var oe in R.head.layout.regions)if(R.head.layout.regions.hasOwnProperty(oe)){var he=R.head.layout.regions[oe],Ce=he.styleAttrs[y.byName.showBackground.qname]||$,Xe=he.styleAttrs[y.byName.backgroundColor.qname]||ce;x[he.id]=(Ce==="always"||Ce===void 0)&&Xe!==void 0&&!(Z<he.begin||Z>=he.end)}for(var Ae in R.body&&R.body.regionID&&(x[R.body.regionID]=!0),W=R.body!==null?function nt(lt,qe){if(qe.contents){var ut={};for(var At in qe)qe.hasOwnProperty(At)&&(ut[At]=qe[At]);return ut.contents=[],qe.contents.filter(function(Oe){return!(lt<Oe.begin||lt>=Oe.end)}).forEach(function(Oe){var Qe=nt(lt,Oe);Qe.regionID&&(x[Qe.regionID]=!0),Qe!==null&&ut.contents.push(Qe)}),ut}return qe}(Z,R.body):null,x[""]!==void 0&&(x[""]=!0),x)if(x[Ae]){var Ze=m(R,Z,R.head.layout.regions[Ae],W,null,"",R.head.layout.regions[Ae],z,le);Ze!==null&&X.contents.push(Ze.element)}return X};var D=[y.byName.color.qname,y.byName.textCombine.qname,y.byName.textDecoration.qname,y.byName.textEmphasis.qname,y.byName.textOutline.qname,y.byName.textShadow.qname];function m(R,Z,z,W,X,le,x,$,ce){if(Z<x.begin||Z>=x.end)return null;var oe="regionID"in x&&x.regionID!==""?x.regionID:le;if(X!==null&&oe!==z.id&&(!("contents"in x)||"contents"in x&&x.contents.length===0||oe!==""))return null;var he=new _(x);if("sets"in x)for(var Ce=0;Ce<x.sets.length;Ce++)Z<x.sets[Ce].begin||Z>=x.sets[Ce].end||(he.styleAttrs[x.sets[Ce].qname]=x.sets[Ce].value);var Xe={};for(var Ae in he.styleAttrs)if(he.styleAttrs.hasOwnProperty(Ae)&&(Xe[Ae]=!0,he.kind==="region"&&Ae===y.byName.writingMode.qname&&!(y.byName.direction.qname in he.styleAttrs))){var Ze=he.styleAttrs[Ae];Ze==="lrtb"||Ze==="lr"?he.styleAttrs[y.byName.direction.qname]="ltr":Ze!=="rltb"&&Ze!=="rl"||(he.styleAttrs[y.byName.direction.qname]="rtl")}if(X!==null)for(var nt=0;nt<y.all.length;nt++){var lt=y.all[nt];if(lt.qname===y.byName.textDecoration.qname){var qe=X.styleAttrs[lt.qname],ut=he.styleAttrs[lt.qname],At=[];ut===void 0?At=qe:ut.indexOf("none")===-1?((ut.indexOf("noUnderline")===-1&&qe.indexOf("underline")!==-1||ut.indexOf("underline")!==-1)&&At.push("underline"),(ut.indexOf("noLineThrough")===-1&&qe.indexOf("lineThrough")!==-1||ut.indexOf("lineThrough")!==-1)&&At.push("lineThrough"),(ut.indexOf("noOverline")===-1&&qe.indexOf("overline")!==-1||ut.indexOf("overline")!==-1)&&At.push("overline")):At.push("none"),he.styleAttrs[lt.qname]=At}else if(lt.qname!==y.byName.fontSize.qname||lt.qname in he.styleAttrs||he.kind!=="span"||he.styleAttrs[y.byName.ruby.qname]!=="textContainer")if(lt.qname!==y.byName.fontSize.qname||lt.qname in he.styleAttrs||he.kind!=="span"||he.styleAttrs[y.byName.ruby.qname]!=="text")lt.inherit&&lt.qname in X.styleAttrs&&!(lt.qname in he.styleAttrs)&&(he.styleAttrs[lt.qname]=X.styleAttrs[lt.qname]);else{var Oe=X.styleAttrs[y.byName.fontSize.qname];X.styleAttrs[y.byName.ruby.qname]==="textContainer"?he.styleAttrs[lt.qname]=Oe:he.styleAttrs[lt.qname]=new v.ComputedLength(.5*Oe.rw,.5*Oe.rh)}else{var Qe=X.styleAttrs[y.byName.fontSize.qname];he.styleAttrs[lt.qname]=new v.ComputedLength(.5*Qe.rw,.5*Qe.rh)}}for(var ct=0;ct<y.all.length;ct++){var Xt=y.all[ct];if(!(Xt.qname in he.styleAttrs)&&!(Xt.qname===y.byName.position.qname&&y.byName.origin.qname in he.styleAttrs||Xt.qname===y.byName.origin.qname&&y.byName.position.qname in he.styleAttrs)){var Kt=R.head.styling.initials[Xt.qname]||Xt.initial;if(Kt!==null&&(he.kind==="region"||Xt.inherit===!1&&Kt!==null)){var Tt=Xt.parse(Kt);Tt!==null?(he.styleAttrs[Xt.qname]=Tt,Xe[Xt.qname]=!0):I($,"Invalid initial value for '"+Xt.qname+"' on element '"+he.kind)}}}for(var Ct=0;Ct<y.all.length;Ct++){var be=y.all[Ct];if(be.qname in Xe&&be.compute!==null){var re=be.compute(R,X,he,he.styleAttrs[be.qname],ce);re!==null?he.styleAttrs[be.qname]=re:(he.styleAttrs[be.qname]=be.compute(R,X,he,be.parse(be.initial),ce),I($,"Style '"+be.qname+"' on element '"+he.kind+"' cannot be computed"))}}if(he.styleAttrs[y.byName.display.qname]==="none")return null;var Fe=null;X===null?Fe=W===null?[]:[W]:"contents"in x&&(Fe=x.contents);for(var O=0;Fe!==null&&O<Fe.length;O++){var M=m(R,Z,z,W,he,oe,Fe[O],$,ce);M!==null&&he.contents.push(M.element)}for(var q in he.styleAttrs)if(he.styleAttrs.hasOwnProperty(q)){var K=!1;if(he.kind==="span"){var _e=he.styleAttrs[y.byName.ruby.qname];(K=(_e==="container"||_e==="textContainer"||_e==="baseContainer")&&D.indexOf(q)!==-1)||(K=_e!=="container"&&q===y.byName.rubyAlign.qname),K||(K=!(_e==="textContainer"||_e==="text")&&q===y.byName.rubyPosition.qname)}if(!K){var de=y.byQName[q];"applies"in de&&(K=de.applies.indexOf(he.kind)===-1)}K&&delete he.styleAttrs[q]}var Ke=he.styleAttrs[y.byName.ruby.qname];if(he.kind==="p"||he.kind==="span"&&(Ke==="textContainer"||Ke==="text")){var St=[];T(he,St),function(ot){for(var it,et=0;et<ot.length;)if((it=ot[et]).kind!=="br"&&it.space!=="preserve"){var ft=it.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ft)&&(et===0||(yt=ot[et-1]).kind==="br"||/[\r\n\t ]$/.test(yt.text))&&(ft=ft.substring(1)),it.text=ft,ft.length===0?ot.splice(et,1):et++}else et++;var yt,_t;for(et=0;et<ot.length;et++)(it=ot[et]).kind!=="br"&&it.space!=="preserve"?/[ ]$/.test(it.text)&&(et===ot.length-1||(_t=ot[et+1]).kind==="br"||_t.space==="preserve"&&/^[\r\n]/.test(_t.text))&&(it.text=it.text.slice(0,-1)):et++}(St),U(he)}return he.kind==="div"&&y.byName.backgroundImage.qname in he.styleAttrs||he.kind==="br"||he.kind==="image"||"contents"in he&&he.contents.length>0||he.kind==="span"&&he.text!==null||he.kind==="region"&&he.styleAttrs[y.byName.showBackground.qname]==="always"?{region_id:oe,element:he}:null}function T(R,Z){if("contents"in R)for(var z=0;z<R.contents.length;z++){var W=R.contents[z],X=W.styleAttrs[y.byName.ruby.qname];(W.kind!=="span"||X!=="textContainer"&&X!=="text")&&("contents"in W?T(W,Z):(W.kind==="span"&&W.text.length!==0||W.kind==="br")&&Z.push(W))}}function U(R){if(R.kind==="br")return!1;if("text"in R)return R.text.length===0;if("contents"in R){for(var Z=R.contents.length;Z--;)U(R.contents[Z])&&R.contents.splice(Z,1);return R.contents.length===0}}function N(R){this.contents=[],this.aspectRatio=R.aspectRatio,this.lang=R.lang}function _(R){for(var Z in this.kind=R.kind||"region",this.lang=R.lang,R.id&&(this.id=R.id),this.styleAttrs={},R.styleAttrs)R.styleAttrs.hasOwnProperty(Z)&&(this.styleAttrs[Z]=R.styleAttrs[Z]);"src"in R&&(this.src=R.src),"type"in R&&(this.type=R.type),"text"in R?this.text=R.text:(this.kind==="region"||"contents"in R)&&(this.contents=[]),"space"in R&&(this.space=R.space)}function I(R,Z){if(R&&R.error&&R.error(Z))throw Z}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(C,g,w){g.generateISD=w(4080).generateISD,g.fromXML=w(3362).fromXML,g.renderHTML=w(506).render},210:function(C,g){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(C,g,w){(function(F,b,y){function v(T,U,N,_,I,R,Z,z){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=R,this.initial=N,this.applies=_,this.parse=Z,this.compute=z}for(var D in F.all=[new v(b.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,y.parseColor,null),new v(b.ns_tts,"color","white",["span"],!0,!0,y.parseColor,null),new v(b.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new v(b.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new v(b.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new v(b.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var N=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&N?{h:_,w:N}:null},function(T,U,N,_,I){var R,Z;if(_==="auto")R=new y.ComputedLength(0,1);else if((R=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new y.ComputedLength(1,0);else if((Z=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:R,w:Z}}),new v(b.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),N=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?N.push("monospaceSerif"):N.push(U[_]);return N},null),new v(b.ns_tts,"shear","0%",["p"],!0,!0,y.parseLength,function(T,U,N,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new v(b.ns_tts,"fontSize","1c",["span","p"],!0,!0,y.parseLength,function(T,U,N,_,I){return y.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new v(b.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new v(b.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new v(b.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:y.parseLength(T)},function(T,U,N,_,I){var R;if(_==="normal")R=_;else if((R=y.toComputedLength(_.value,_.unit,N.styleAttrs[F.byName.fontSize.qname],N.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return R}),new v(b.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new v(b.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var N=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&N?{h:_,w:N}:null},function(T,U,N,_,I){var R,Z;if(_==="auto")R=new y.ComputedLength(0,0);else if((R=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")Z=new y.ComputedLength(0,0);else if((Z=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:R,w:Z}}),new v(b.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new v(b.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var N=[],_=0;_<U.length;_++){var I=y.parseLength(U[_]);if(!I)return null;N.push(I)}return N},function(T,U,N,_,I){var R;if(_.length===1)R=[_[0],_[0],_[0],_[0]];else if(_.length===2)R=[_[0],_[1],_[0],_[1]];else if(_.length===3)R=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;R=[_[0],_[1],_[2],_[3]]}var Z=N.styleAttrs[F.byName.writingMode.qname];if(Z==="lrtb"||Z==="lr")R=[R[0],R[3],R[2],R[1]];else if(Z==="rltb"||Z==="rl")R=[R[0],R[1],R[2],R[3]];else if(Z==="tblr")R=[R[3],R[0],R[1],R[2]];else{if(Z!=="tbrl"&&Z!=="tb")return null;R=[R[3],R[2],R[1],R[0]]}for(var z=[],W=0;W<R.length;W++)if(R[W].value===0)z[W]=new y.ComputedLength(0,0);else if(z[W]=y.toComputedLength(R[W].value,R[W].unit,N.styleAttrs[F.byName.fontSize.qname],W===0||W===2?N.styleAttrs[F.byName.extent.qname].h:N.styleAttrs[F.byName.extent.qname].w,W===0||W===2?T.cellLength.h:T.cellLength.w,W===0||W===2?T.pxLength.h:T.pxLength.w),z[W]===null)return null;return z}),new v(b.ns_tts,"position","top left",["region"],!1,!0,function(T){return y.parsePosition(T)},function(T,U,N,_){var I,R;return(I=y.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new y.ComputedLength(-N.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-N.styleAttrs[F.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new y.ComputedLength(-I.rw-N.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-N.styleAttrs[F.byName.extent.qname].h.rh)),R=y.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new y.ComputedLength(T.dimensions.w.rw-N.styleAttrs[F.byName.extent.qname].w.rw,-N.styleAttrs[F.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(R=new y.ComputedLength(T.dimensions.w.rw-R.rw-N.styleAttrs[F.byName.extent.qname].w.rw,-R.rh-N.styleAttrs[F.byName.extent.qname].w.rh)),{h:I,w:R}))}),new v(b.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new v(b.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new v(b.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new v(b.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),N=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(N[0]=U[0],U.length===2&&U[0]!=="none"){var _=y.parseLength(U[1]);if(!_)return null;N[1]=_}return N},function(T,U,N,_,I){if(_[0]==="none")return _;var R;return(R=_[1]===null?new y.ComputedLength(.5*N.styleAttrs[F.byName.fontSize.qname].rw,.5*N.styleAttrs[F.byName.fontSize.qname].rh):y.toComputedLength(_[1].value,_[1].unit,N.styleAttrs[F.byName.fontSize.qname],N.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],R]}),new v(b.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new v(b.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,N,_,I){return _==="left"?"start":_==="right"?"end":_}),new v(b.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new v(b.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new v(b.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),N={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")N.style=U[_];else if(U[_]==="filled"||U[_]==="open")N.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")N.symbol=U[_];else if(U[_]==="current")N.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")N.position=U[_];else if(N.color=y.parseColor(U[_]),N.color===null)return null;return N.style==null&&N.symbol==null?N.style="auto":(N.symbol=N.symbol||"circle",N.style=N.style||"filled"),N.position=N.position||"outside",N.color=N.color||"current",N},null),new v(b.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},N=T.split(" ");if(N.length===0||N.length>2)return null;var _=y.parseColor(N[0]);if(U.color=_,_!==null&&N.shift(),N.length!==1)return null;var I=y.parseLength(N[0]);return I?(U.thickness=I,U):null},function(T,U,N,_,I){if(_==="none")return _;var R={};return _.color===null?R.color=N.styleAttrs[F.byName.color.qname]:R.color=_.color,R.thickness=y.toComputedLength(_.thickness.value,_.thickness.unit,N.styleAttrs[F.byName.fontSize.qname],N.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),R.thickness===null?null:R}),new v(b.ns_tts,"textShadow","none",["span"],!0,!0,y.parseTextShadow,function(T,U,N,_){if(_==="none")return _;for(var I=[],R=0;R<_.length;R++){var Z={};if(Z.x_off=y.toComputedLength(_[R][0].value,_[R][0].unit,null,N.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.w),Z.x_off===null||(Z.y_off=y.toComputedLength(_[R][1].value,_[R][1].unit,null,N.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),Z.y_off===null))return null;if(_[R][2]===null)Z.b_radius=0;else if(Z.b_radius=y.toComputedLength(_[R][2].value,_[R][2].unit,null,N.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),Z.b_radius===null)return null;_[R][3]===null?Z.color=N.styleAttrs[F.byName.color.qname]:Z.color=_[R][3],I.push(Z)}return I}),new v(b.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new v(b.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new v(b.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new v(b.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new v(b.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new v(b.ns_ebutts,"linePadding","0c",["p"],!0,!1,y.parseLength,function(T,U,N,_,I){return y.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new v(b.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new v(b.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new v(b.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new v(b.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],F.byQName={},F.all)F.byQName[F.all[D].qname]=F.all[D];for(var m in F.byName={},F.all)F.byName[F.all[m].name]=F.all[m]})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(C,g){(function(w){var F=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,b=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(m){var T,U=null,N=v[m.toLowerCase()];return N!==void 0?U=N:(T=F.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=b.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=y.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(m){var T,U=null;return(T=D.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},w.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],N=0;N<T.length;N++){var _=T[N].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],R=w.parseLength(_.shift());if(R===null||(I[0]=R,(R=w.parseLength(_.shift()))===null))return null;if(I[1]=R,_.length===0){U.push(I);continue}if((R=w.parseLength(_[0]))!==null&&(I[2]=R,_.shift()),_.length===0){U.push(I);continue}var Z=w.parseColor(_[0]);if(Z===null)return null;I[3]=Z,U.push(I)}}return U},w.parsePosition=function(m){var T=m.split(" "),U=function(W){return W==="center"||W==="left"||W==="top"||W==="bottom"||W==="right"};if(T.length>4)return null;for(var N=0;N<T.length;N++)if(!U(T[N])){var _=w.parseLength(T[N]);if(_===null)return null;T[N]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},R=0;R<T.length;){var Z=T[R++];if(U(Z)){var z={value:0,unit:"%"};T.length!==2&&R<T.length&&!U(T[R])&&(z=T[R++]),Z==="right"?(I.h.edge=Z,I.h.offset=z):Z==="bottom"?(I.v.edge=Z,I.v.offset=z):Z==="left"?I.h.offset=z:Z==="top"&&(I.v.offset=z)}else{if(T.length!==1&&T.length!==2)return null;R===1?I.h.offset=Z:I.v.offset=Z}}return I},w.ComputedLength=function(m,T){this.rw=m,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(m,T,U,N,_,I){return T==="%"&&N?new w.ComputedLength(N.rw*m/100,N.rh*m/100):T==="em"&&U?new w.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new w.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new w.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new w.ComputedLength(0,m/100):T==="rw"?new w.ComputedLength(m/100,0):null}})(g)},3516:function(C){C.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(C,g,w){var F=w(3516),b=w(395);C.exports=function(y){return F(y)||b(y)}},395:function(C){C.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=48&&w<=57}},3875:function(C){function g(b){if(typeof b!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(b))}function w(b,y){for(var v,D="",m=0,T=-1,U=0,N=0;N<=b.length;++N){if(N<b.length)v=b.charCodeAt(N);else{if(v===47)break;v=47}if(v===47){if(!(T===N-1||U===1))if(T!==N-1&&U===2){if(D.length<2||m!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var _=D.lastIndexOf("/");if(_!==D.length-1){_===-1?(D="",m=0):m=(D=D.slice(0,_)).length-1-D.lastIndexOf("/"),T=N,U=0;continue}}else if(D.length===2||D.length===1){D="",m=0,T=N,U=0;continue}}y&&(D.length>0?D+="/..":D="..",m=2)}else D.length>0?D+="/"+b.slice(T+1,N):D=b.slice(T+1,N),m=N-T-1;T=N,U=0}else v===46&&U!==-1?++U:U=-1}return D}var F={resolve:function(){for(var b,y="",v=!1,D=arguments.length-1;D>=-1&&!v;D--){var m;D>=0?m=arguments[D]:(b===void 0&&(b=process.cwd()),m=b),g(m),m.length!==0&&(y=m+"/"+y,v=m.charCodeAt(0)===47)}return y=w(y,!v),v?y.length>0?"/"+y:"/":y.length>0?y:"."},normalize:function(b){if(g(b),b.length===0)return".";var y=b.charCodeAt(0)===47,v=b.charCodeAt(b.length-1)===47;return(b=w(b,!y)).length!==0||y||(b="."),b.length>0&&v&&(b+="/"),y?"/"+b:b},isAbsolute:function(b){return g(b),b.length>0&&b.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var b,y=0;y<arguments.length;++y){var v=arguments[y];g(v),v.length>0&&(b===void 0?b=v:b+="/"+v)}return b===void 0?".":F.normalize(b)},relative:function(b,y){if(g(b),g(y),b===y||(b=F.resolve(b))===(y=F.resolve(y)))return"";for(var v=1;v<b.length&&b.charCodeAt(v)===47;++v);for(var D=b.length,m=D-v,T=1;T<y.length&&y.charCodeAt(T)===47;++T);for(var U=y.length-T,N=m<U?m:U,_=-1,I=0;I<=N;++I){if(I===N){if(U>N){if(y.charCodeAt(T+I)===47)return y.slice(T+I+1);if(I===0)return y.slice(T+I)}else m>N&&(b.charCodeAt(v+I)===47?_=I:I===0&&(_=0));break}var R=b.charCodeAt(v+I);if(R!==y.charCodeAt(T+I))break;R===47&&(_=I)}var Z="";for(I=v+_+1;I<=D;++I)I!==D&&b.charCodeAt(I)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+y.slice(T+_):(T+=_,y.charCodeAt(T)===47&&++T,y.slice(T))},_makeLong:function(b){return b},dirname:function(b){if(g(b),b.length===0)return".";for(var y=b.charCodeAt(0),v=y===47,D=-1,m=!0,T=b.length-1;T>=1;--T)if((y=b.charCodeAt(T))===47){if(!m){D=T;break}}else m=!1;return D===-1?v?"/":".":v&&D===1?"//":b.slice(0,D)},basename:function(b,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');g(b);var v,D=0,m=-1,T=!0;if(y!==void 0&&y.length>0&&y.length<=b.length){if(y.length===b.length&&y===b)return"";var U=y.length-1,N=-1;for(v=b.length-1;v>=0;--v){var _=b.charCodeAt(v);if(_===47){if(!T){D=v+1;break}}else N===-1&&(T=!1,N=v+1),U>=0&&(_===y.charCodeAt(U)?--U==-1&&(m=v):(U=-1,m=N))}return D===m?m=N:m===-1&&(m=b.length),b.slice(D,m)}for(v=b.length-1;v>=0;--v)if(b.charCodeAt(v)===47){if(!T){D=v+1;break}}else m===-1&&(T=!1,m=v+1);return m===-1?"":b.slice(D,m)},extname:function(b){g(b);for(var y=-1,v=0,D=-1,m=!0,T=0,U=b.length-1;U>=0;--U){var N=b.charCodeAt(U);if(N!==47)D===-1&&(m=!1,D=U+1),N===46?y===-1?y=U:T!==1&&(T=1):y!==-1&&(T=-1);else if(!m){v=U+1;break}}return y===-1||D===-1||T===0||T===1&&y===D-1&&y===v+1?"":b.slice(y,D)},format:function(b){if(b===null||typeof b!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);return function(y,v){var D=v.dir||v.root,m=v.base||(v.name||"")+(v.ext||"");return D?D===v.root?D+m:D+"/"+m:m}(0,b)},parse:function(b){g(b);var y={root:"",dir:"",base:"",ext:"",name:""};if(b.length===0)return y;var v,D=b.charCodeAt(0),m=D===47;m?(y.root="/",v=1):v=0;for(var T=-1,U=0,N=-1,_=!0,I=b.length-1,R=0;I>=v;--I)if((D=b.charCodeAt(I))!==47)N===-1&&(_=!1,N=I+1),D===46?T===-1?T=I:R!==1&&(R=1):T!==-1&&(R=-1);else if(!_){U=I+1;break}return T===-1||N===-1||R===0||R===1&&T===N-1&&T===U+1?N!==-1&&(y.base=y.name=U===0&&m?b.slice(1,N):b.slice(U,N)):(U===0&&m?(y.name=b.slice(1,T),y.base=b.slice(1,N)):(y.name=b.slice(U,T),y.base=b.slice(U,N)),y.ext=b.slice(T,N)),U>0?y.dir=b.slice(0,U-1):m&&(y.dir="/"),y},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,C.exports=F},8387:function(C,g,w){var F=w(1549),b=F.Buffer;function y(D,m){for(var T in D)m[T]=D[T]}function v(D,m,T){return b(D,m,T)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?C.exports=F:(y(F,g),g.Buffer=v),y(b,v),v.from=function(D,m,T){if(typeof D=="number")throw new TypeError("Argument must not be a number");return b(D,m,T)},v.alloc=function(D,m,T){if(typeof D!="number")throw new TypeError("Argument must be a number");var U=b(D);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},v.allocUnsafe=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return b(D)},v.allocUnsafeSlow=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return F.SlowBuffer(D)}},5378:function(C,g,w){(function(F){F.parser=function(O,M){return new v(O,M)},F.SAXParser=v,F.SAXStream=m,F.createStream=function(O,M){return new m(O,M)},F.MAX_BUFFER_LENGTH=65536;var b,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function v(O,M){if(!(this instanceof v))return new v(O,M);var q=this;(function(K){for(var _e=0,de=y.length;_e<de;_e++)K[y[_e]]=""})(q),q.q=q.c="",q.bufferCheckPosition=F.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!O,q.noscript=!(!O&&!q.opt.noscript),q.state=Ae.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(F.XML_ENTITIES):Object.create(F.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(z)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),nt(q,"onready")}F.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function M(){}return M.prototype=O,new M}),Object.keys||(Object.keys=function(O){var M=[];for(var q in O)O.hasOwnProperty(q)&&M.push(q);return M}),v.prototype={end:function(){Oe(this)},write:function(O){var M=this;if(this.error)throw this.error;if(M.closed)return At(M,"Cannot write after close. Assign an onready handler.");if(O===null)return Oe(M);typeof O=="object"&&(O=O.toString());for(var q=0,K="";K=Fe(O,q++),M.c=K,K;)switch(M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++),M.state){case Ae.BEGIN:if(M.state=Ae.BEGIN_WHITESPACE,K==="\uFEFF")continue;re(M,K);continue;case Ae.BEGIN_WHITESPACE:re(M,K);continue;case Ae.TEXT:if(M.sawRoot&&!M.closedRoot){for(var _e=q-1;K&&K!=="<"&&K!=="&";)(K=Fe(O,q++))&&M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=O.substring(_e,q-1)}K!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,K)||M.sawRoot&&!M.closedRoot||Qe(M,"Text data outside of root node."),K==="&"?M.state=Ae.TEXT_ENTITY:M.textNode+=K):(M.state=Ae.OPEN_WAKA,M.startTagPosition=M.position);continue;case Ae.SCRIPT:K==="<"?M.state=Ae.SCRIPT_ENDING:M.script+=K;continue;case Ae.SCRIPT_ENDING:K==="/"?M.state=Ae.CLOSE_TAG:(M.script+="<"+K,M.state=Ae.SCRIPT);continue;case Ae.OPEN_WAKA:if(K==="!")M.state=Ae.SGML_DECL,M.sgmlDecl="";else if(!ce(T,K))if(ce(W,K))M.state=Ae.OPEN_TAG,M.tagName=K;else if(K==="/")M.state=Ae.CLOSE_TAG,M.tagName="";else if(K==="?")M.state=Ae.PROC_INST,M.procInstName=M.procInstBody="";else{if(Qe(M,"Unencoded <"),M.startTagPosition+1<M.position){var de=M.position-M.startTagPosition;K=new Array(de).join(" ")+K}M.textNode+="<"+K,M.state=Ae.TEXT}continue;case Ae.SGML_DECL:(M.sgmlDecl+K).toUpperCase()==="[CDATA["?(lt(M,"onopencdata"),M.state=Ae.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+K==="--"?(M.state=Ae.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(M.state=Ae.DOCTYPE,(M.doctype||M.sawRoot)&&Qe(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):K===">"?(lt(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Ae.TEXT):(ce(_,K)&&(M.state=Ae.SGML_DECL_QUOTED),M.sgmlDecl+=K);continue;case Ae.SGML_DECL_QUOTED:K===M.q&&(M.state=Ae.SGML_DECL,M.q=""),M.sgmlDecl+=K;continue;case Ae.DOCTYPE:K===">"?(M.state=Ae.TEXT,lt(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=K,K==="["?M.state=Ae.DOCTYPE_DTD:ce(_,K)&&(M.state=Ae.DOCTYPE_QUOTED,M.q=K));continue;case Ae.DOCTYPE_QUOTED:M.doctype+=K,K===M.q&&(M.q="",M.state=Ae.DOCTYPE);continue;case Ae.DOCTYPE_DTD:M.doctype+=K,K==="]"?M.state=Ae.DOCTYPE:ce(_,K)&&(M.state=Ae.DOCTYPE_DTD_QUOTED,M.q=K);continue;case Ae.DOCTYPE_DTD_QUOTED:M.doctype+=K,K===M.q&&(M.state=Ae.DOCTYPE_DTD,M.q="");continue;case Ae.COMMENT:K==="-"?M.state=Ae.COMMENT_ENDING:M.comment+=K;continue;case Ae.COMMENT_ENDING:K==="-"?(M.state=Ae.COMMENT_ENDED,M.comment=ut(M.opt,M.comment),M.comment&&lt(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+K,M.state=Ae.COMMENT);continue;case Ae.COMMENT_ENDED:K!==">"?(Qe(M,"Malformed comment"),M.comment+="--"+K,M.state=Ae.COMMENT):M.state=Ae.TEXT;continue;case Ae.CDATA:K==="]"?M.state=Ae.CDATA_ENDING:M.cdata+=K;continue;case Ae.CDATA_ENDING:K==="]"?M.state=Ae.CDATA_ENDING_2:(M.cdata+="]"+K,M.state=Ae.CDATA);continue;case Ae.CDATA_ENDING_2:K===">"?(M.cdata&&lt(M,"oncdata",M.cdata),lt(M,"onclosecdata"),M.cdata="",M.state=Ae.TEXT):K==="]"?M.cdata+="]":(M.cdata+="]]"+K,M.state=Ae.CDATA);continue;case Ae.PROC_INST:K==="?"?M.state=Ae.PROC_INST_ENDING:ce(T,K)?M.state=Ae.PROC_INST_BODY:M.procInstName+=K;continue;case Ae.PROC_INST_BODY:if(!M.procInstBody&&ce(T,K))continue;K==="?"?M.state=Ae.PROC_INST_ENDING:M.procInstBody+=K;continue;case Ae.PROC_INST_ENDING:K===">"?(lt(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Ae.TEXT):(M.procInstBody+="?"+K,M.state=Ae.PROC_INST_BODY);continue;case Ae.OPEN_TAG:ce(X,K)?M.tagName+=K:(ct(M),K===">"?Tt(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:(oe(T,K)&&Qe(M,"Invalid character in tag name"),M.state=Ae.ATTRIB));continue;case Ae.OPEN_TAG_SLASH:K===">"?(Tt(M,!0),Ct(M)):(Qe(M,"Forward-slash in opening tag not followed by >"),M.state=Ae.ATTRIB);continue;case Ae.ATTRIB:if(ce(T,K))continue;K===">"?Tt(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:ce(W,K)?(M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME:K==="="?M.state=Ae.ATTRIB_VALUE:K===">"?(Qe(M,"Attribute without value"),M.attribValue=M.attribName,Kt(M),Tt(M)):ce(T,K)?M.state=Ae.ATTRIB_NAME_SAW_WHITE:ce(X,K)?M.attribName+=K:Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME_SAW_WHITE:if(K==="=")M.state=Ae.ATTRIB_VALUE;else{if(ce(T,K))continue;Qe(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",lt(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",K===">"?Tt(M):ce(W,K)?(M.attribName=K,M.state=Ae.ATTRIB_NAME):(Qe(M,"Invalid attribute name"),M.state=Ae.ATTRIB)}continue;case Ae.ATTRIB_VALUE:if(ce(T,K))continue;ce(_,K)?(M.q=K,M.state=Ae.ATTRIB_VALUE_QUOTED):(Qe(M,"Unquoted attribute value"),M.state=Ae.ATTRIB_VALUE_UNQUOTED,M.attribValue=K);continue;case Ae.ATTRIB_VALUE_QUOTED:if(K!==M.q){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=K;continue}Kt(M),M.q="",M.state=Ae.ATTRIB_VALUE_CLOSED;continue;case Ae.ATTRIB_VALUE_CLOSED:ce(T,K)?M.state=Ae.ATTRIB:K===">"?Tt(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:ce(W,K)?(Qe(M,"No whitespace between attributes"),M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_U:M.attribValue+=K;continue}Kt(M),K===">"?Tt(M):M.state=Ae.ATTRIB;continue;case Ae.CLOSE_TAG:if(M.tagName)K===">"?Ct(M):ce(X,K)?M.tagName+=K:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Ae.SCRIPT):(oe(T,K)&&Qe(M,"Invalid tagname in closing tag"),M.state=Ae.CLOSE_TAG_SAW_WHITE);else{if(ce(T,K))continue;oe(W,K)?M.script?(M.script+="</"+K,M.state=Ae.SCRIPT):Qe(M,"Invalid tagname in closing tag."):M.tagName=K}continue;case Ae.CLOSE_TAG_SAW_WHITE:if(ce(T,K))continue;K===">"?Ct(M):Qe(M,"Invalid characters in closing tag");continue;case Ae.TEXT_ENTITY:case Ae.ATTRIB_VALUE_ENTITY_Q:case Ae.ATTRIB_VALUE_ENTITY_U:var Ke,St;switch(M.state){case Ae.TEXT_ENTITY:Ke=Ae.TEXT,St="textNode";break;case Ae.ATTRIB_VALUE_ENTITY_Q:Ke=Ae.ATTRIB_VALUE_QUOTED,St="attribValue";break;case Ae.ATTRIB_VALUE_ENTITY_U:Ke=Ae.ATTRIB_VALUE_UNQUOTED,St="attribValue"}K===";"?(M[St]+=be(M),M.entity="",M.state=Ke):ce(M.entity.length?x:le,K)?M.entity+=K:(Qe(M,"Invalid character in entity name"),M[St]+="&"+M.entity+K,M.entity="",M.state=Ke);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(ot){for(var it=Math.max(F.MAX_BUFFER_LENGTH,10),et=0,ft=0,yt=y.length;ft<yt;ft++){var _t=ot[y[ft]].length;if(_t>it)switch(y[ft]){case"textNode":qe(ot);break;case"cdata":lt(ot,"oncdata",ot.cdata),ot.cdata="";break;case"script":lt(ot,"onscript",ot.script),ot.script="";break;default:At(ot,"Max buffer length exceeded: "+y[ft])}et=Math.max(et,_t)}var Rt=F.MAX_BUFFER_LENGTH-et;ot.bufferCheckPosition=Rt+ot.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var O;qe(O=this),O.cdata!==""&&(lt(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(lt(O,"onscript",O.script),O.script="")}};try{b=w(182).Stream}catch(O){b=function(){}}var D=F.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function m(O,M){if(!(this instanceof m))return new m(O,M);b.apply(this),this._parser=new v(O,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(K){q.emit("error",K),q._parser.error=null},this._decoder=null,D.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(_e){if(!_e)return q.removeAllListeners(K),q._parser["on"+K]=_e,_e;q.on(K,_e)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(b.prototype,{constructor:{value:m}}),m.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var M=w(7503).s;this._decoder=new M("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},m.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},m.prototype.on=function(O,M){var q=this;return q._parser["on"+O]||D.indexOf(O)===-1||(q._parser["on"+O]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,O),q.emit.apply(q,K)}),b.prototype.on.call(q,O,M)};var T="\r\n	 ",U="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",R="http://www.w3.org/XML/1998/namespace",Z="http://www.w3.org/2000/xmlns/",z={xml:R,xmlns:Z};T=$(T),U=$(U),N=$(N);var W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,X=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,le=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function $(O){return O.split("").reduce(function(M,q){return M[q]=!0,M},{})}function ce(O,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(O)?!!M.match(O):O[M]}function oe(O,M){return!ce(O,M)}_=$(_),I=$(I);var he,Ce,Xe,Ae=0;for(var Ze in F.STATE={BEGIN:Ae++,BEGIN_WHITESPACE:Ae++,TEXT:Ae++,TEXT_ENTITY:Ae++,OPEN_WAKA:Ae++,SGML_DECL:Ae++,SGML_DECL_QUOTED:Ae++,DOCTYPE:Ae++,DOCTYPE_QUOTED:Ae++,DOCTYPE_DTD:Ae++,DOCTYPE_DTD_QUOTED:Ae++,COMMENT_STARTING:Ae++,COMMENT:Ae++,COMMENT_ENDING:Ae++,COMMENT_ENDED:Ae++,CDATA:Ae++,CDATA_ENDING:Ae++,CDATA_ENDING_2:Ae++,PROC_INST:Ae++,PROC_INST_BODY:Ae++,PROC_INST_ENDING:Ae++,OPEN_TAG:Ae++,OPEN_TAG_SLASH:Ae++,ATTRIB:Ae++,ATTRIB_NAME:Ae++,ATTRIB_NAME_SAW_WHITE:Ae++,ATTRIB_VALUE:Ae++,ATTRIB_VALUE_QUOTED:Ae++,ATTRIB_VALUE_CLOSED:Ae++,ATTRIB_VALUE_UNQUOTED:Ae++,ATTRIB_VALUE_ENTITY_Q:Ae++,ATTRIB_VALUE_ENTITY_U:Ae++,CLOSE_TAG:Ae++,CLOSE_TAG_SAW_WHITE:Ae++,SCRIPT:Ae++,SCRIPT_ENDING:Ae++},F.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(F.ENTITIES).forEach(function(O){var M=F.ENTITIES[O],q=typeof M=="number"?String.fromCharCode(M):M;F.ENTITIES[O]=q}),F.STATE)F.STATE[F.STATE[Ze]]=Ze;function nt(O,M,q){O[M]&&O[M](q)}function lt(O,M,q){O.textNode&&qe(O),nt(O,M,q)}function qe(O){O.textNode=ut(O.opt,O.textNode),O.textNode&&nt(O,"ontext",O.textNode),O.textNode=""}function ut(O,M){return O.trim&&(M=M.trim()),O.normalize&&(M=M.replace(/\s+/g," ")),M}function At(O,M){return qe(O),O.trackPosition&&(M+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),M=new Error(M),O.error=M,nt(O,"onerror",M),O}function Oe(O){return O.sawRoot&&!O.closedRoot&&Qe(O,"Unclosed root tag"),O.state!==Ae.BEGIN&&O.state!==Ae.BEGIN_WHITESPACE&&O.state!==Ae.TEXT&&At(O,"Unexpected end"),qe(O),O.c="",O.closed=!0,nt(O,"onend"),v.call(O,O.strict,O.opt),O}function Qe(O,M){if(typeof O!="object"||!(O instanceof v))throw new Error("bad call to strictFail");O.strict&&At(O,M)}function ct(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var M=O.tags[O.tags.length-1]||O,q=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(q.ns=M.ns),O.attribList.length=0,lt(O,"onopentagstart",q)}function Xt(O,M){var q=O.indexOf(":")<0?["",O]:O.split(":"),K=q[0],_e=q[1];return M&&O==="xmlns"&&(K="xmlns",_e=""),{prefix:K,local:_e}}function Kt(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var M=Xt(O.attribName,!0),q=M.prefix,K=M.local;if(q==="xmlns")if(K==="xml"&&O.attribValue!==R)Qe(O,"xml: prefix must be bound to "+R+"\nActual: "+O.attribValue);else if(K==="xmlns"&&O.attribValue!==Z)Qe(O,"xmlns: prefix must be bound to "+Z+"\nActual: "+O.attribValue);else{var _e=O.tag,de=O.tags[O.tags.length-1]||O;_e.ns===de.ns&&(_e.ns=Object.create(de.ns)),_e.ns[K]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,lt(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function Tt(O,M){if(O.opt.xmlns){var q=O.tag,K=Xt(O.tagName);q.prefix=K.prefix,q.local=K.local,q.uri=q.ns[K.prefix]||"",q.prefix&&!q.uri&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),q.uri=K.prefix);var _e=O.tags[O.tags.length-1]||O;q.ns&&_e.ns!==q.ns&&Object.keys(q.ns).forEach(function(pn){lt(O,"onopennamespace",{prefix:pn,uri:q.ns[pn]})});for(var de=0,Ke=O.attribList.length;de<Ke;de++){var St=O.attribList[de],ot=St[0],it=St[1],et=Xt(ot,!0),ft=et.prefix,yt=et.local,_t=ft===""?"":q.ns[ft]||"",Rt={name:ot,value:it,prefix:ft,local:yt,uri:_t};ft&&ft!=="xmlns"&&!_t&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(ft)),Rt.uri=ft),O.tag.attributes[ot]=Rt,lt(O,"onattribute",Rt)}O.attribList.length=0}O.tag.isSelfClosing=!!M,O.sawRoot=!0,O.tags.push(O.tag),lt(O,"onopentag",O.tag),M||(O.noscript||O.tagName.toLowerCase()!=="script"?O.state=Ae.TEXT:O.state=Ae.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function Ct(O){if(!O.tagName)return Qe(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=Ae.TEXT);if(O.script){if(O.tagName!=="script")return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=Ae.SCRIPT);lt(O,"onscript",O.script),O.script=""}var M=O.tags.length,q=O.tagName;O.strict||(q=q[O.looseCase]());for(var K=q;M--&&O.tags[M].name!==K;)Qe(O,"Unexpected close tag");if(M<0)return Qe(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=Ae.TEXT);O.tagName=q;for(var _e=O.tags.length;_e-- >M;){var de=O.tag=O.tags.pop();O.tagName=O.tag.name,lt(O,"onclosetag",O.tagName);var Ke={};for(var St in de.ns)Ke[St]=de.ns[St];var ot=O.tags[O.tags.length-1]||O;O.opt.xmlns&&de.ns!==ot.ns&&Object.keys(de.ns).forEach(function(it){var et=de.ns[it];lt(O,"onclosenamespace",{prefix:it,uri:et})})}M===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=Ae.TEXT}function be(O){var M,q=O.entity,K=q.toLowerCase(),_e="";return O.ENTITIES[q]?O.ENTITIES[q]:O.ENTITIES[K]?O.ENTITIES[K]:((q=K).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),_e=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),_e=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),_e.toLowerCase()!==q?(Qe(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(M))}function re(O,M){M==="<"?(O.state=Ae.OPEN_WAKA,O.startTagPosition=O.position):oe(T,M)&&(Qe(O,"Non-whitespace before first tag."),O.textNode=M,O.state=Ae.TEXT)}function Fe(O,M){var q="";return M<O.length&&(q=O.charAt(M)),q}Ae=F.STATE,String.fromCodePoint||(he=String.fromCharCode,Ce=Math.floor,Xe=function(){var O,M,q=16384,K=[],_e=-1,de=arguments.length;if(!de)return"";for(var Ke="";++_e<de;){var St=Number(arguments[_e]);if(!isFinite(St)||St<0||St>1114111||Ce(St)!==St)throw RangeError("Invalid code point: "+St);St<=65535?K.push(St):(O=55296+((St-=65536)>>10),M=St%1024+56320,K.push(O,M)),(_e+1===de||K.length>q)&&(Ke+=he.apply(null,K),K.length=0)}return Ke},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Xe,configurable:!0,writable:!0}):String.fromCodePoint=Xe)})(g)},182:function(C,g,w){C.exports=b;var F=w(1159).EventEmitter;function b(){F.call(this)}w(1765)(b,F),b.Readable=w(2846),b.Writable=w(8318),b.Duplex=w(6138),b.Transform=w(9798),b.PassThrough=w(5472),b.finished=w(8800),b.pipeline=w(7295),b.Stream=b,b.prototype.pipe=function(y,v){var D=this;function m(Z){y.writable&&y.write(Z)===!1&&D.pause&&D.pause()}function T(){D.readable&&D.resume&&D.resume()}D.on("data",m),y.on("drain",T),y._isStdio||v&&v.end===!1||(D.on("end",N),D.on("close",_));var U=!1;function N(){U||(U=!0,y.end())}function _(){U||(U=!0,typeof y.destroy=="function"&&y.destroy())}function I(Z){if(R(),F.listenerCount(this,"error")===0)throw Z}function R(){D.removeListener("data",m),y.removeListener("drain",T),D.removeListener("end",N),D.removeListener("close",_),D.removeListener("error",I),y.removeListener("error",I),D.removeListener("end",R),D.removeListener("close",R),y.removeListener("close",R)}return D.on("error",I),y.on("error",I),D.on("end",R),D.on("close",R),y.on("close",R),y.emit("pipe",D),y}},1765:function(C){typeof Object.create=="function"?C.exports=function(g,w){w&&(g.super_=w,g.prototype=Object.create(w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:C.exports=function(g,w){if(w){g.super_=w;var F=function(){};F.prototype=w.prototype,g.prototype=new F,g.prototype.constructor=g}}},3690:function(C){var g={};function w(b,y,v){v||(v=Error);var D=function(m){var T,U;function N(_,I,R){return m.call(this,function(Z,z,W){return typeof y=="string"?y:y(Z,z,W)}(_,I,R))||this}return U=m,(T=N).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,N}(v);D.prototype.name=v.name,D.prototype.code=b,g[b]=D}function F(b,y){if(Array.isArray(b)){var v=b.length;return b=b.map(function(D){return String(D)}),v>2?"one of ".concat(y," ").concat(b.slice(0,v-1).join(", "),", or ")+b[v-1]:v===2?"one of ".concat(y," ").concat(b[0]," or ").concat(b[1]):"of ".concat(y," ").concat(b[0])}return"of ".concat(y," ").concat(String(b))}w("ERR_INVALID_OPT_VALUE",function(b,y){return'The value "'+y+'" is invalid for option "'+b+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(b,y,v){var D,m,T,U,N;if(typeof y=="string"&&(m="not ",y.substr(0,m.length)===m)?(D="must not be",y=y.replace(/^not /,"")):D="must be",function(I,R,Z){return(Z===void 0||Z>I.length)&&(Z=I.length),I.substring(Z-R.length,Z)===R}(b," argument"))T="The ".concat(b," ").concat(D," ").concat(F(y,"type"));else{var _=(typeof N!="number"&&(N=0),N+1>(U=b).length||U.indexOf(".",N)===-1?"argument":"property");T='The "'.concat(b,'" ').concat(_," ").concat(D," ").concat(F(y,"type"))}return T+". Received type ".concat(typeof v)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),C.exports.q=g},6138:function(C,g,w){var F=Object.keys||function(_){var I=[];for(var R in _)I.push(R);return I};C.exports=T;var b=w(2846),y=w(8318);w(1765)(T,b);for(var v=F(y.prototype),D=0;D<v.length;D++){var m=v[D];T.prototype[m]||(T.prototype[m]=y.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);b.call(this,_),y.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(N,this)}function N(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(C,g,w){C.exports=b;var F=w(9798);function b(y){if(!(this instanceof b))return new b(y);F.call(this,y)}w(1765)(b,F),b.prototype._transform=function(y,v,D){D(null,y)}},2846:function(C,g,w){var F;C.exports=he,he.ReadableState=oe,w(1159).EventEmitter;var b,y=function(be,re){return be.listeners(re).length},v=w(9299),D=w(1549).Buffer,m=w.g.Uint8Array||function(){},T=w(964);b=T&&T.debuglog?T.debuglog("stream"):function(){};var U,N,_,I=w(8393),R=w(6163),Z=w(7269).getHighWaterMark,z=w(3690).q,W=z.ERR_INVALID_ARG_TYPE,X=z.ERR_STREAM_PUSH_AFTER_EOF,le=z.ERR_METHOD_NOT_IMPLEMENTED,x=z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(he,v);var $=R.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(be,re,Fe){F=F||w(6138),be=be||{},typeof Fe!="boolean"&&(Fe=re instanceof F),this.objectMode=!!be.objectMode,Fe&&(this.objectMode=this.objectMode||!!be.readableObjectMode),this.highWaterMark=Z(this,be,"readableHighWaterMark",Fe),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=be.emitClose!==!1,this.autoDestroy=!!be.autoDestroy,this.destroyed=!1,this.defaultEncoding=be.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,be.encoding&&(U||(U=w(7503).s),this.decoder=new U(be.encoding),this.encoding=be.encoding)}function he(be){if(F=F||w(6138),!(this instanceof he))return new he(be);var re=this instanceof F;this._readableState=new oe(be,this,re),this.readable=!0,be&&(typeof be.read=="function"&&(this._read=be.read),typeof be.destroy=="function"&&(this._destroy=be.destroy)),v.call(this)}function Ce(be,re,Fe,O,M){b("readableAddChunk",re);var q,K=be._readableState;if(re===null)K.reading=!1,function(_e,de){if(b("onEofChunk"),!de.ended){if(de.decoder){var Ke=de.decoder.end();Ke&&Ke.length&&(de.buffer.push(Ke),de.length+=de.objectMode?1:Ke.length)}de.ended=!0,de.sync?nt(_e):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,lt(_e)))}}(be,K);else if(M||(q=function(_e,de){var Ke,St;return St=de,D.isBuffer(St)||St instanceof m||typeof de=="string"||de===void 0||_e.objectMode||(Ke=new W("chunk",["string","Buffer","Uint8Array"],de)),Ke}(K,re)),q)$(be,q);else if(K.objectMode||re&&re.length>0)if(typeof re=="string"||K.objectMode||Object.getPrototypeOf(re)===D.prototype||(re=function(_e){return D.from(_e)}(re)),O)K.endEmitted?$(be,new x):Xe(be,K,re,!0);else if(K.ended)$(be,new X);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Fe?(re=K.decoder.write(re),K.objectMode||re.length!==0?Xe(be,K,re,!1):qe(be,K)):Xe(be,K,re,!1)}else O||(K.reading=!1,qe(be,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Xe(be,re,Fe,O){re.flowing&&re.length===0&&!re.sync?(re.awaitDrain=0,be.emit("data",Fe)):(re.length+=re.objectMode?1:Fe.length,O?re.buffer.unshift(Fe):re.buffer.push(Fe),re.needReadable&&nt(be)),qe(be,re)}Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(be){this._readableState&&(this._readableState.destroyed=be)}}),he.prototype.destroy=R.destroy,he.prototype._undestroy=R.undestroy,he.prototype._destroy=function(be,re){re(be)},he.prototype.push=function(be,re){var Fe,O=this._readableState;return O.objectMode?Fe=!0:typeof be=="string"&&((re=re||O.defaultEncoding)!==O.encoding&&(be=D.from(be,re),re=""),Fe=!0),Ce(this,be,re,!1,Fe)},he.prototype.unshift=function(be){return Ce(this,be,null,!0,!1)},he.prototype.isPaused=function(){return this._readableState.flowing===!1},he.prototype.setEncoding=function(be){U||(U=w(7503).s);var re=new U(be);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var Fe=this._readableState.buffer.head,O="";Fe!==null;)O+=re.write(Fe.data),Fe=Fe.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var Ae=1073741824;function Ze(be,re){return be<=0||re.length===0&&re.ended?0:re.objectMode?1:be!=be?re.flowing&&re.length?re.buffer.head.data.length:re.length:(be>re.highWaterMark&&(re.highWaterMark=function(Fe){return Fe>=Ae?Fe=Ae:(Fe--,Fe|=Fe>>>1,Fe|=Fe>>>2,Fe|=Fe>>>4,Fe|=Fe>>>8,Fe|=Fe>>>16,Fe++),Fe}(be)),be<=re.length?be:re.ended?re.length:(re.needReadable=!0,0))}function nt(be){var re=be._readableState;b("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(b("emitReadable",re.flowing),re.emittedReadable=!0,process.nextTick(lt,be))}function lt(be){var re=be._readableState;b("emitReadable_",re.destroyed,re.length,re.ended),re.destroyed||!re.length&&!re.ended||(be.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,ct(be)}function qe(be,re){re.readingMore||(re.readingMore=!0,process.nextTick(ut,be,re))}function ut(be,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&re.length===0);){var Fe=re.length;if(b("maybeReadMore read 0"),be.read(0),Fe===re.length)break}re.readingMore=!1}function At(be){var re=be._readableState;re.readableListening=be.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:be.listenerCount("data")>0&&be.resume()}function Oe(be){b("readable nexttick read 0"),be.read(0)}function Qe(be,re){b("resume",re.reading),re.reading||be.read(0),re.resumeScheduled=!1,be.emit("resume"),ct(be),re.flowing&&!re.reading&&be.read(0)}function ct(be){var re=be._readableState;for(b("flow",re.flowing);re.flowing&&be.read()!==null;);}function Xt(be,re){return re.length===0?null:(re.objectMode?Fe=re.buffer.shift():!be||be>=re.length?(Fe=re.decoder?re.buffer.join(""):re.buffer.length===1?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):Fe=re.buffer.consume(be,re.decoder),Fe);var Fe}function Kt(be){var re=be._readableState;b("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,process.nextTick(Tt,re,be))}function Tt(be,re){if(b("endReadableNT",be.endEmitted,be.length),!be.endEmitted&&be.length===0&&(be.endEmitted=!0,re.readable=!1,re.emit("end"),be.autoDestroy)){var Fe=re._writableState;(!Fe||Fe.autoDestroy&&Fe.finished)&&re.destroy()}}function Ct(be,re){for(var Fe=0,O=be.length;Fe<O;Fe++)if(be[Fe]===re)return Fe;return-1}he.prototype.read=function(be){b("read",be),be=parseInt(be,10);var re=this._readableState,Fe=be;if(be!==0&&(re.emittedReadable=!1),be===0&&re.needReadable&&((re.highWaterMark!==0?re.length>=re.highWaterMark:re.length>0)||re.ended))return b("read: emitReadable",re.length,re.ended),re.length===0&&re.ended?Kt(this):nt(this),null;if((be=Ze(be,re))===0&&re.ended)return re.length===0&&Kt(this),null;var O,M=re.needReadable;return b("need readable",M),(re.length===0||re.length-be<re.highWaterMark)&&b("length less than watermark",M=!0),re.ended||re.reading?b("reading or ended",M=!1):M&&(b("do read"),re.reading=!0,re.sync=!0,re.length===0&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(be=Ze(Fe,re))),(O=be>0?Xt(be,re):null)===null?(re.needReadable=re.length<=re.highWaterMark,be=0):(re.length-=be,re.awaitDrain=0),re.length===0&&(re.ended||(re.needReadable=!0),Fe!==be&&re.ended&&Kt(this)),O!==null&&this.emit("data",O),O},he.prototype._read=function(be){$(this,new le("_read()"))},he.prototype.pipe=function(be,re){var Fe=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=be;break;case 1:O.pipes=[O.pipes,be];break;default:O.pipes.push(be)}O.pipesCount+=1,b("pipe count=%d opts=%j",O.pipesCount,re);var M=re&&re.end===!1||be===process.stdout||be===process.stderr?it:q;function q(){b("onend"),be.end()}O.endEmitted?process.nextTick(M):Fe.once("end",M),be.on("unpipe",function et(ft,yt){b("onunpipe"),ft===Fe&&yt&&yt.hasUnpiped===!1&&(yt.hasUnpiped=!0,b("cleanup"),be.removeListener("close",St),be.removeListener("finish",ot),be.removeListener("drain",K),be.removeListener("error",Ke),be.removeListener("unpipe",et),Fe.removeListener("end",q),Fe.removeListener("end",it),Fe.removeListener("data",de),_e=!0,!O.awaitDrain||be._writableState&&!be._writableState.needDrain||K())});var K=function(et){return function(){var ft=et._readableState;b("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&y(et,"data")&&(ft.flowing=!0,ct(et))}}(Fe);be.on("drain",K);var _e=!1;function de(et){b("ondata");var ft=be.write(et);b("dest.write",ft),ft===!1&&((O.pipesCount===1&&O.pipes===be||O.pipesCount>1&&Ct(O.pipes,be)!==-1)&&!_e&&(b("false write response, pause",O.awaitDrain),O.awaitDrain++),Fe.pause())}function Ke(et){b("onerror",et),it(),be.removeListener("error",Ke),y(be,"error")===0&&$(be,et)}function St(){be.removeListener("finish",ot),it()}function ot(){b("onfinish"),be.removeListener("close",St),it()}function it(){b("unpipe"),Fe.unpipe(be)}return Fe.on("data",de),function(et,ft,yt){if(typeof et.prependListener=="function")return et.prependListener(ft,yt);et._events&&et._events[ft]?Array.isArray(et._events[ft])?et._events[ft].unshift(yt):et._events[ft]=[yt,et._events[ft]]:et.on(ft,yt)}(be,"error",Ke),be.once("close",St),be.once("finish",ot),be.emit("pipe",Fe),O.flowing||(b("pipe resume"),Fe.resume()),be},he.prototype.unpipe=function(be){var re=this._readableState,Fe={hasUnpiped:!1};if(re.pipesCount===0)return this;if(re.pipesCount===1)return be&&be!==re.pipes||(be||(be=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,be&&be.emit("unpipe",this,Fe)),this;if(!be){var O=re.pipes,M=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var q=0;q<M;q++)O[q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=Ct(re.pipes,be);return K===-1||(re.pipes.splice(K,1),re.pipesCount-=1,re.pipesCount===1&&(re.pipes=re.pipes[0]),be.emit("unpipe",this,Fe)),this},he.prototype.on=function(be,re){var Fe=v.prototype.on.call(this,be,re),O=this._readableState;return be==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):be==="readable"&&(O.endEmitted||O.readableListening||(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,b("on readable",O.length,O.reading),O.length?nt(this):O.reading||process.nextTick(Oe,this))),Fe},he.prototype.addListener=he.prototype.on,he.prototype.removeListener=function(be,re){var Fe=v.prototype.removeListener.call(this,be,re);return be==="readable"&&process.nextTick(At,this),Fe},he.prototype.removeAllListeners=function(be){var re=v.prototype.removeAllListeners.apply(this,arguments);return be!=="readable"&&be!==void 0||process.nextTick(At,this),re},he.prototype.resume=function(){var be=this._readableState;return be.flowing||(b("resume"),be.flowing=!be.readableListening,function(re,Fe){Fe.resumeScheduled||(Fe.resumeScheduled=!0,process.nextTick(Qe,re,Fe))}(this,be)),be.paused=!1,this},he.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},he.prototype.wrap=function(be){var re=this,Fe=this._readableState,O=!1;for(var M in be.on("end",function(){if(b("wrapped end"),Fe.decoder&&!Fe.ended){var K=Fe.decoder.end();K&&K.length&&re.push(K)}re.push(null)}),be.on("data",function(K){b("wrapped data"),Fe.decoder&&(K=Fe.decoder.write(K)),Fe.objectMode&&K==null||(Fe.objectMode||K&&K.length)&&(re.push(K)||(O=!0,be.pause()))}),be)this[M]===void 0&&typeof be[M]=="function"&&(this[M]=function(K){return function(){return be[K].apply(be,arguments)}}(M));for(var q=0;q<ce.length;q++)be.on(ce[q],this.emit.bind(this,ce[q]));return this._read=function(K){b("wrapped _read",K),O&&(O=!1,be.resume())},this},typeof Symbol=="function"&&(he.prototype[Symbol.asyncIterator]=function(){return N===void 0&&(N=w(7299)),N(this)}),Object.defineProperty(he.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(he.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(he.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(be){this._readableState&&(this._readableState.flowing=be)}}),he._fromList=Xt,Object.defineProperty(he.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(he.from=function(be,re){return _===void 0&&(_=w(6233)),_(he,be,re)})},9798:function(C,g,w){C.exports=U;var F=w(3690).q,b=F.ERR_METHOD_NOT_IMPLEMENTED,y=F.ERR_MULTIPLE_CALLBACK,v=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,D=F.ERR_TRANSFORM_WITH_LENGTH_0,m=w(6138);function T(I,R){var Z=this._transformState;Z.transforming=!1;var z=Z.writecb;if(z===null)return this.emit("error",new y);Z.writechunk=null,Z.writecb=null,R!=null&&this.push(R),z(I);var W=this._readableState;W.reading=!1,(W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",N)}function N(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(R,Z){_(I,R,Z)})}function _(I,R,Z){if(R)return I.emit("error",R);if(Z!=null&&I.push(Z),I._writableState.length)throw new D;if(I._transformState.transforming)throw new v;return I.push(null)}w(1765)(U,m),U.prototype.push=function(I,R){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,R)},U.prototype._transform=function(I,R,Z){Z(new b("_transform()"))},U.prototype._write=function(I,R,Z){var z=this._transformState;if(z.writecb=Z,z.writechunk=I,z.writeencoding=R,!z.transforming){var W=this._readableState;(z.needTransform||W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}},U.prototype._read=function(I){var R=this._transformState;R.writechunk===null||R.transforming?R.needTransform=!0:(R.transforming=!0,this._transform(R.writechunk,R.writeencoding,R.afterTransform))},U.prototype._destroy=function(I,R){m.prototype._destroy.call(this,I,function(Z){R(Z)})}},8318:function(C,g,w){function F(qe){var ut=this;this.next=null,this.entry=null,this.finish=function(){(function(At,Oe,Qe){var ct=At.entry;for(At.entry=null;ct;){var Xt=ct.callback;Oe.pendingcb--,Xt(void 0),ct=ct.next}Oe.corkedRequestsFree.next=At})(ut,qe)}}var b;C.exports=he,he.WritableState=oe;var y,v={deprecate:w(7839)},D=w(9299),m=w(1549).Buffer,T=w.g.Uint8Array||function(){},U=w(6163),N=w(7269).getHighWaterMark,_=w(3690).q,I=_.ERR_INVALID_ARG_TYPE,R=_.ERR_METHOD_NOT_IMPLEMENTED,Z=_.ERR_MULTIPLE_CALLBACK,z=_.ERR_STREAM_CANNOT_PIPE,W=_.ERR_STREAM_DESTROYED,X=_.ERR_STREAM_NULL_VALUES,le=_.ERR_STREAM_WRITE_AFTER_END,x=_.ERR_UNKNOWN_ENCODING,$=U.errorOrDestroy;function ce(){}function oe(qe,ut,At){b=b||w(6138),qe=qe||{},typeof At!="boolean"&&(At=ut instanceof b),this.objectMode=!!qe.objectMode,At&&(this.objectMode=this.objectMode||!!qe.writableObjectMode),this.highWaterMark=N(this,qe,"writableHighWaterMark",At),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Oe=qe.decodeStrings===!1;this.decodeStrings=!Oe,this.defaultEncoding=qe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qe){(function(ct,Xt){var Kt=ct._writableState,Tt=Kt.sync,Ct=Kt.writecb;if(typeof Ct!="function")throw new Z;if(function(re){re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0}(Kt),Xt)(function(re,Fe,O,M,q){--Fe.pendingcb,O?(process.nextTick(q,M),process.nextTick(lt,re,Fe),re._writableState.errorEmitted=!0,$(re,M)):(q(M),re._writableState.errorEmitted=!0,$(re,M),lt(re,Fe))})(ct,Kt,Tt,Xt,Ct);else{var be=Ze(Kt)||ct.destroyed;be||Kt.corked||Kt.bufferProcessing||!Kt.bufferedRequest||Ae(ct,Kt),Tt?process.nextTick(Xe,ct,Kt,be,Ct):Xe(ct,Kt,be,Ct)}})(ut,Qe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=qe.emitClose!==!1,this.autoDestroy=!!qe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function he(qe){var ut=this instanceof(b=b||w(6138));if(!ut&&!y.call(he,this))return new he(qe);this._writableState=new oe(qe,this,ut),this.writable=!0,qe&&(typeof qe.write=="function"&&(this._write=qe.write),typeof qe.writev=="function"&&(this._writev=qe.writev),typeof qe.destroy=="function"&&(this._destroy=qe.destroy),typeof qe.final=="function"&&(this._final=qe.final)),D.call(this)}function Ce(qe,ut,At,Oe,Qe,ct,Xt){ut.writelen=Oe,ut.writecb=Xt,ut.writing=!0,ut.sync=!0,ut.destroyed?ut.onwrite(new W("write")):At?qe._writev(Qe,ut.onwrite):qe._write(Qe,ct,ut.onwrite),ut.sync=!1}function Xe(qe,ut,At,Oe){At||function(Qe,ct){ct.length===0&&ct.needDrain&&(ct.needDrain=!1,Qe.emit("drain"))}(qe,ut),ut.pendingcb--,Oe(),lt(qe,ut)}function Ae(qe,ut){ut.bufferProcessing=!0;var At=ut.bufferedRequest;if(qe._writev&&At&&At.next){var Oe=ut.bufferedRequestCount,Qe=new Array(Oe),ct=ut.corkedRequestsFree;ct.entry=At;for(var Xt=0,Kt=!0;At;)Qe[Xt]=At,At.isBuf||(Kt=!1),At=At.next,Xt+=1;Qe.allBuffers=Kt,Ce(qe,ut,!0,ut.length,Qe,"",ct.finish),ut.pendingcb++,ut.lastBufferedRequest=null,ct.next?(ut.corkedRequestsFree=ct.next,ct.next=null):ut.corkedRequestsFree=new F(ut),ut.bufferedRequestCount=0}else{for(;At;){var Tt=At.chunk,Ct=At.encoding,be=At.callback;if(Ce(qe,ut,!1,ut.objectMode?1:Tt.length,Tt,Ct,be),At=At.next,ut.bufferedRequestCount--,ut.writing)break}At===null&&(ut.lastBufferedRequest=null)}ut.bufferedRequest=At,ut.bufferProcessing=!1}function Ze(qe){return qe.ending&&qe.length===0&&qe.bufferedRequest===null&&!qe.finished&&!qe.writing}function nt(qe,ut){qe._final(function(At){ut.pendingcb--,At&&$(qe,At),ut.prefinished=!0,qe.emit("prefinish"),lt(qe,ut)})}function lt(qe,ut){var At=Ze(ut);if(At&&(function(Qe,ct){ct.prefinished||ct.finalCalled||(typeof Qe._final!="function"||ct.destroyed?(ct.prefinished=!0,Qe.emit("prefinish")):(ct.pendingcb++,ct.finalCalled=!0,process.nextTick(nt,Qe,ct)))}(qe,ut),ut.pendingcb===0&&(ut.finished=!0,qe.emit("finish"),ut.autoDestroy))){var Oe=qe._readableState;(!Oe||Oe.autoDestroy&&Oe.endEmitted)&&qe.destroy()}return At}w(1765)(he,D),oe.prototype.getBuffer=function(){for(var qe=this.bufferedRequest,ut=[];qe;)ut.push(qe),qe=qe.next;return ut},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(qe){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(he,Symbol.hasInstance,{value:function(qe){return!!y.call(this,qe)||this===he&&qe&&qe._writableState instanceof oe}})):y=function(qe){return qe instanceof this},he.prototype.pipe=function(){$(this,new z)},he.prototype.write=function(qe,ut,At){var Oe,Qe=this._writableState,ct=!1,Xt=!Qe.objectMode&&(Oe=qe,m.isBuffer(Oe)||Oe instanceof T);return Xt&&!m.isBuffer(qe)&&(qe=function(Kt){return m.from(Kt)}(qe)),typeof ut=="function"&&(At=ut,ut=null),Xt?ut="buffer":ut||(ut=Qe.defaultEncoding),typeof At!="function"&&(At=ce),Qe.ending?function(Kt,Tt){var Ct=new le;$(Kt,Ct),process.nextTick(Tt,Ct)}(this,At):(Xt||function(Kt,Tt,Ct,be){var re;return Ct===null?re=new X:typeof Ct=="string"||Tt.objectMode||(re=new I("chunk",["string","Buffer"],Ct)),!re||($(Kt,re),process.nextTick(be,re),!1)}(this,Qe,qe,At))&&(Qe.pendingcb++,ct=function(Kt,Tt,Ct,be,re,Fe){if(!Ct){var O=function(_e,de,Ke){return _e.objectMode||_e.decodeStrings===!1||typeof de!="string"||(de=m.from(de,Ke)),de}(Tt,be,re);be!==O&&(Ct=!0,re="buffer",be=O)}var M=Tt.objectMode?1:be.length;Tt.length+=M;var q=Tt.length<Tt.highWaterMark;if(q||(Tt.needDrain=!0),Tt.writing||Tt.corked){var K=Tt.lastBufferedRequest;Tt.lastBufferedRequest={chunk:be,encoding:re,isBuf:Ct,callback:Fe,next:null},K?K.next=Tt.lastBufferedRequest:Tt.bufferedRequest=Tt.lastBufferedRequest,Tt.bufferedRequestCount+=1}else Ce(Kt,Tt,!1,M,be,re,Fe);return q}(this,Qe,Xt,qe,ut,At)),ct},he.prototype.cork=function(){this._writableState.corked++},he.prototype.uncork=function(){var qe=this._writableState;qe.corked&&(qe.corked--,qe.writing||qe.corked||qe.bufferProcessing||!qe.bufferedRequest||Ae(this,qe))},he.prototype.setDefaultEncoding=function(qe){if(typeof qe=="string"&&(qe=qe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((qe+"").toLowerCase())>-1))throw new x(qe);return this._writableState.defaultEncoding=qe,this},Object.defineProperty(he.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(he.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),he.prototype._write=function(qe,ut,At){At(new R("_write()"))},he.prototype._writev=null,he.prototype.end=function(qe,ut,At){var Oe=this._writableState;return typeof qe=="function"?(At=qe,qe=null,ut=null):typeof ut=="function"&&(At=ut,ut=null),qe!=null&&this.write(qe,ut),Oe.corked&&(Oe.corked=1,this.uncork()),Oe.ending||function(Qe,ct,Xt){ct.ending=!0,lt(Qe,ct),Xt&&(ct.finished?process.nextTick(Xt):Qe.once("finish",Xt)),ct.ended=!0,Qe.writable=!1}(this,Oe,At),this},Object.defineProperty(he.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(qe){this._writableState&&(this._writableState.destroyed=qe)}}),he.prototype.destroy=U.destroy,he.prototype._undestroy=U.undestroy,he.prototype._destroy=function(qe,ut){ut(qe)}},7299:function(C,g,w){var F;function b(X,le,x){return le in X?Object.defineProperty(X,le,{value:x,enumerable:!0,configurable:!0,writable:!0}):X[le]=x,X}var y=w(8800),v=Symbol("lastResolve"),D=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),N=Symbol("handlePromise"),_=Symbol("stream");function I(X,le){return{value:X,done:le}}function R(X){var le=X[v];if(le!==null){var x=X[_].read();x!==null&&(X[U]=null,X[v]=null,X[D]=null,le(I(x,!1)))}}function Z(X){process.nextTick(R,X)}var z=Object.getPrototypeOf(function(){}),W=Object.setPrototypeOf((b(F={get stream(){return this[_]},next:function(){var X=this,le=this[m];if(le!==null)return Promise.reject(le);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,he){process.nextTick(function(){X[m]?he(X[m]):oe(I(void 0,!0))})});var x,$=this[U];if($)x=new Promise(function(oe,he){return function(Ce,Xe){oe.then(function(){he[T]?Ce(I(void 0,!0)):he[N](Ce,Xe)},Xe)}}($,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(I(ce,!1));x=new Promise(this[N])}return this[U]=x,x}},Symbol.asyncIterator,function(){return this}),b(F,"return",function(){var X=this;return new Promise(function(le,x){X[_].destroy(null,function($){$?x($):le(I(void 0,!0))})})}),F),z);C.exports=function(X){var le,x=Object.create(W,(b(le={},_,{value:X,writable:!0}),b(le,v,{value:null,writable:!0}),b(le,D,{value:null,writable:!0}),b(le,m,{value:null,writable:!0}),b(le,T,{value:X._readableState.endEmitted,writable:!0}),b(le,N,{value:function($,ce){var oe=x[_].read();oe?(x[U]=null,x[v]=null,x[D]=null,$(I(oe,!1))):(x[v]=$,x[D]=ce)},writable:!0}),le));return x[U]=null,y(X,function($){if($&&$.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=x[D];return ce!==null&&(x[U]=null,x[v]=null,x[D]=null,ce($)),void(x[m]=$)}var oe=x[v];oe!==null&&(x[U]=null,x[v]=null,x[D]=null,oe(I(void 0,!0))),x[T]=!0}),X.on("readable",Z.bind(null,x)),x}},8393:function(C,g,w){function F(T,U){var N=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),N.push.apply(N,_)}return N}function b(T,U,N){return U in T?Object.defineProperty(T,U,{value:N,enumerable:!0,configurable:!0,writable:!0}):T[U]=N,T}function y(T,U){for(var N=0;N<U.length;N++){var _=U[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var v=w(1549).Buffer,D=w(9862).inspect,m=D&&D.custom||"inspect";C.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,N;return U=T,N=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,R=""+I.data;I=I.next;)R+=_+I.data;return R}},{key:"concat",value:function(_){if(this.length===0)return v.alloc(0);for(var I,R,Z,z=v.allocUnsafe(_>>>0),W=this.head,X=0;W;)I=W.data,R=z,Z=X,v.prototype.copy.call(I,R,Z),X+=W.data.length,W=W.next;return z}},{key:"consume",value:function(_,I){var R;return _<this.head.data.length?(R=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):R=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,R=1,Z=I.data;for(_-=Z.length;I=I.next;){var z=I.data,W=_>z.length?z.length:_;if(W===z.length?Z+=z:Z+=z.slice(0,_),(_-=W)==0){W===z.length?(++R,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=z.slice(W));break}++R}return this.length-=R,Z}},{key:"_getBuffer",value:function(_){var I=v.allocUnsafe(_),R=this.head,Z=1;for(R.data.copy(I),_-=R.data.length;R=R.next;){var z=R.data,W=_>z.length?z.length:_;if(z.copy(I,I.length-_,0,W),(_-=W)==0){W===z.length?(++Z,R.next?this.head=R.next:this.head=this.tail=null):(this.head=R,R.data=z.slice(W));break}++Z}return this.length-=Z,I}},{key:m,value:function(_,I){return D(this,function(R){for(var Z=1;Z<arguments.length;Z++){var z=arguments[Z]!=null?arguments[Z]:{};Z%2?F(Object(z),!0).forEach(function(W){b(R,W,z[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(z)):F(Object(z)).forEach(function(W){Object.defineProperty(R,W,Object.getOwnPropertyDescriptor(z,W))})}return R}({},I,{depth:0,customInspect:!1}))}}],N&&y(U.prototype,N),T}()},6163:function(C){function g(b,y){F(b,y),w(b)}function w(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function F(b,y){b.emit("error",y)}C.exports={destroy:function(b,y){var v=this,D=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return D||m?(y?y(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(F,this,b)):process.nextTick(F,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(T){!y&&T?v._writableState?v._writableState.errorEmitted?process.nextTick(w,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,T)):process.nextTick(g,v,T):y?(process.nextTick(w,v),y(T)):process.nextTick(w,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,y){var v=b._readableState,D=b._writableState;v&&v.autoDestroy||D&&D.autoDestroy?b.destroy(y):b.emit("error",y)}}},8800:function(C,g,w){var F=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function b(){}C.exports=function y(v,D,m){if(typeof D=="function")return y(v,null,D);D||(D={}),m=function(le){var x=!1;return function(){if(!x){x=!0;for(var $=arguments.length,ce=new Array($),oe=0;oe<$;oe++)ce[oe]=arguments[oe];le.apply(this,ce)}}}(m||b);var T=D.readable||D.readable!==!1&&v.readable,U=D.writable||D.writable!==!1&&v.writable,N=function(){v.writable||I()},_=v._writableState&&v._writableState.finished,I=function(){U=!1,_=!0,T||m.call(v)},R=v._readableState&&v._readableState.endEmitted,Z=function(){T=!1,R=!0,U||m.call(v)},z=function(le){m.call(v,le)},W=function(){var le;return T&&!R?(v._readableState&&v._readableState.ended||(le=new F),m.call(v,le)):U&&!_?(v._writableState&&v._writableState.ended||(le=new F),m.call(v,le)):void 0},X=function(){v.req.on("finish",I)};return function(le){return le.setHeader&&typeof le.abort=="function"}(v)?(v.on("complete",I),v.on("abort",W),v.req?X():v.on("request",X)):U&&!v._writableState&&(v.on("end",N),v.on("close",N)),v.on("end",Z),v.on("finish",I),D.error!==!1&&v.on("error",z),v.on("close",W),function(){v.removeListener("complete",I),v.removeListener("abort",W),v.removeListener("request",X),v.req&&v.req.removeListener("finish",I),v.removeListener("end",N),v.removeListener("close",N),v.removeListener("finish",I),v.removeListener("end",Z),v.removeListener("error",z),v.removeListener("close",W)}}},6233:function(C){C.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(C,g,w){var F,b=w(3690).q,y=b.ERR_MISSING_ARGS,v=b.ERR_STREAM_DESTROYED;function D(_){if(_)throw _}function m(_,I,R,Z){Z=function(X){var le=!1;return function(){le||(le=!0,X.apply(void 0,arguments))}}(Z);var z=!1;_.on("close",function(){z=!0}),F===void 0&&(F=w(8800)),F(_,{readable:I,writable:R},function(X){if(X)return Z(X);z=!0,Z()});var W=!1;return function(X){if(!z&&!W)return W=!0,function(le){return le.setHeader&&typeof le.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void Z(X||new v("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function N(_){return _.length?typeof _[_.length-1]!="function"?D:_.pop():D}C.exports=function(){for(var _=arguments.length,I=new Array(_),R=0;R<_;R++)I[R]=arguments[R];var Z,z=N(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new y("streams");var W=I.map(function(X,le){var x=le<I.length-1;return m(X,x,le>0,function($){Z||(Z=$),$&&W.forEach(T),x||(W.forEach(T),z(Z))})});return I.reduce(U)}},7269:function(C,g,w){var F=w(3690).q.ERR_INVALID_OPT_VALUE;C.exports={getHighWaterMark:function(b,y,v,D){var m=function(T,U,N){return T.highWaterMark!=null?T.highWaterMark:U?T[N]:null}(y,D,v);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new F(D?v:"highWaterMark",m);return Math.floor(m)}return b.objectMode?16:16384}}},9299:function(C,g,w){C.exports=w(1159).EventEmitter},7503:function(C,g,w){var F=w(8387).Buffer,b=F.isEncoding||function(R){switch((R=""+R)&&R.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(R){var Z;switch(this.encoding=function(z){var W=function(X){if(!X)return"utf8";for(var le;;)switch(X){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return X;default:if(le)return;X=(""+X).toLowerCase(),le=!0}}(z);if(typeof W!="string"&&(F.isEncoding===b||!b(z)))throw new Error("Unknown encoding: "+z);return W||z}(R),this.encoding){case"utf16le":this.text=m,this.end=T,Z=4;break;case"utf8":this.fillLast=D,Z=4;break;case"base64":this.text=U,this.end=N,Z=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=F.allocUnsafe(Z)}function v(R){return R<=127?0:R>>5==6?2:R>>4==14?3:R>>3==30?4:R>>6==2?-1:-2}function D(R){var Z=this.lastTotal-this.lastNeed,z=function(W,X,le){if((192&X[0])!=128)return W.lastNeed=0,"�";if(W.lastNeed>1&&X.length>1){if((192&X[1])!=128)return W.lastNeed=1,"�";if(W.lastNeed>2&&X.length>2&&(192&X[2])!=128)return W.lastNeed=2,"�"}}(this,R);return z!==void 0?z:this.lastNeed<=R.length?(R.copy(this.lastChar,Z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(R.copy(this.lastChar,Z,0,R.length),void(this.lastNeed-=R.length))}function m(R,Z){if((R.length-Z)%2==0){var z=R.toString("utf16le",Z);if(z){var W=z.charCodeAt(z.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=R[R.length-1],R.toString("utf16le",Z,R.length-1)}function T(R){var Z=R&&R.length?this.write(R):"";if(this.lastNeed){var z=this.lastTotal-this.lastNeed;return Z+this.lastChar.toString("utf16le",0,z)}return Z}function U(R,Z){var z=(R.length-Z)%3;return z===0?R.toString("base64",Z):(this.lastNeed=3-z,this.lastTotal=3,z===1?this.lastChar[0]=R[R.length-1]:(this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1]),R.toString("base64",Z,R.length-z))}function N(R){var Z=R&&R.length?this.write(R):"";return this.lastNeed?Z+this.lastChar.toString("base64",0,3-this.lastNeed):Z}function _(R){return R.toString(this.encoding)}function I(R){return R&&R.length?this.write(R):""}g.s=y,y.prototype.write=function(R){if(R.length===0)return"";var Z,z;if(this.lastNeed){if((Z=this.fillLast(R))===void 0)return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<R.length?Z?Z+this.text(R,z):this.text(R,z):Z||""},y.prototype.end=function(R){var Z=R&&R.length?this.write(R):"";return this.lastNeed?Z+"�":Z},y.prototype.text=function(R,Z){var z=function(X,le,x){var $=le.length-1;if($<x)return 0;var ce=v(le[$]);return ce>=0?(ce>0&&(X.lastNeed=ce-1),ce):--$<x||ce===-2?0:(ce=v(le[$]))>=0?(ce>0&&(X.lastNeed=ce-2),ce):--$<x||ce===-2?0:(ce=v(le[$]))>=0?(ce>0&&(ce===2?ce=0:X.lastNeed=ce-3),ce):0}(this,R,Z);if(!this.lastNeed)return R.toString("utf8",Z);this.lastTotal=z;var W=R.length-(z-this.lastNeed);return R.copy(this.lastChar,0,W),R.toString("utf8",Z,W)},y.prototype.fillLast=function(R){if(this.lastNeed<=R.length)return R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,R.length),this.lastNeed-=R.length}},1067:function(C,g,w){var F;(function(b,y){var v="function",D="undefined",m="object",T="string",U="major",N="model",_="name",I="type",R="vendor",Z="version",z="architecture",W="console",X="mobile",le="tablet",x="smarttv",$="wearable",ce="embedded",oe="Amazon",he="Apple",Ce="ASUS",Xe="BlackBerry",Ae="Browser",Ze="Chrome",nt="Firefox",lt="Google",qe="Huawei",ut="LG",At="Microsoft",Oe="Motorola",Qe="Opera",ct="Samsung",Xt="Sharp",Kt="Sony",Tt="Xiaomi",Ct="Zebra",be="Facebook",re="Chromium OS",Fe="Mac OS",O=function(ft){for(var yt={},_t=0;_t<ft.length;_t++)yt[ft[_t].toUpperCase()]=ft[_t];return yt},M=function(ft,yt){return typeof ft===T&&q(yt).indexOf(q(ft))!==-1},q=function(ft){return ft.toLowerCase()},K=function(ft,yt){if(typeof ft===T)return ft=ft.replace(/^\s\s*/,""),typeof yt===D?ft:ft.substring(0,500)},_e=function(ft,yt){for(var _t,Rt,pn,Qt,nn,Ot,Un=0;Un<yt.length&&!nn;){var gr=yt[Un],Pr=yt[Un+1];for(_t=Rt=0;_t<gr.length&&!nn&&gr[_t];)if(nn=gr[_t++].exec(ft))for(pn=0;pn<Pr.length;pn++)Ot=nn[++Rt],typeof(Qt=Pr[pn])===m&&Qt.length>0?Qt.length===2?typeof Qt[1]==v?this[Qt[0]]=Qt[1].call(this,Ot):this[Qt[0]]=Qt[1]:Qt.length===3?typeof Qt[1]!==v||Qt[1].exec&&Qt[1].test?this[Qt[0]]=Ot?Ot.replace(Qt[1],Qt[2]):y:this[Qt[0]]=Ot?Qt[1].call(this,Ot,Qt[2]):y:Qt.length===4&&(this[Qt[0]]=Ot?Qt[3].call(this,Ot.replace(Qt[1],Qt[2])):y):this[Qt]=Ot||y;Un+=2}},de=function(ft,yt){for(var _t in yt)if(typeof yt[_t]===m&&yt[_t].length>0){for(var Rt=0;Rt<yt[_t].length;Rt++)if(M(yt[_t][Rt],ft))return _t==="?"?y:_t}else if(M(yt[_t],ft))return _t==="?"?y:_t;return ft},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},St={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Z,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Z,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,Z],[/opios[\/ ]+([\w\.]+)/i],[Z,[_,Qe+" Mini"]],[/\bopr\/([\w\.]+)/i],[Z,[_,Qe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[Z,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,Z],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Z,[_,"UC"+Ae]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[Z,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Z,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Z,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[Z,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[Z,[_,"Smart Lenovo "+Ae]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Ae],Z],[/\bfocus\/([\w\.]+)/i],[Z,[_,nt+" Focus"]],[/\bopt\/([\w\.]+)/i],[Z,[_,Qe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Z,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Z,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[Z,[_,Qe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Z,[_,"MIUI "+Ae]],[/fxios\/([-\w\.]+)/i],[Z,[_,nt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Ae]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Ae],Z],[/samsungbrowser\/([\w\.]+)/i],[Z,[_,ct+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],Z],[/metasr[\/ ]?([\d\.]+)/i],[Z,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],Z],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,Z],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,be],Z],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,Z],[/\bgsa\/([\w\.]+) .*safari\//i],[Z,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[Z,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Z,[_,Ze+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Ze+" WebView"],Z],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Z,[_,"Android "+Ae]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,Z],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[Z,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[Z,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[Z,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,Z],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],Z],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Z,[_,nt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,Z],[/(cobalt)\/([\w\.]+)/i],[_,[Z,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[z,"amd64"]],[/(ia32(?=;))/i],[[z,q]],[/((?:i[346]|x)86)[;\)]/i],[[z,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[z,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[z,"armhf"]],[/windows (ce|mobile); ppc;/i],[[z,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[z,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[z,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[z,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[N,[R,ct],[I,le]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[N,[R,ct],[I,X]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[N,[R,he],[I,X]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[N,[R,he],[I,le]],[/(macintosh);/i],[N,[R,he]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[N,[R,Xt],[I,X]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[N,[R,qe],[I,le]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[N,[R,qe],[I,X]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[N,/_/g," "],[R,Tt],[I,X]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[N,/_/g," "],[R,Tt],[I,le]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[N,[R,"OPPO"],[I,X]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[N,[R,"Vivo"],[I,X]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[N,[R,"Realme"],[I,X]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[N,[R,Oe],[I,X]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[N,[R,Oe],[I,le]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[N,[R,ut],[I,le]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[N,[R,ut],[I,X]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[N,[R,"Lenovo"],[I,le]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[N,/_/g," "],[R,"Nokia"],[I,X]],[/(pixel c)\b/i],[N,[R,lt],[I,le]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[N,[R,lt],[I,X]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[N,[R,Kt],[I,X]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[N,"Xperia Tablet"],[R,Kt],[I,le]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[N,[R,"OnePlus"],[I,X]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[N,[R,oe],[I,le]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[N,/(.+)/g,"Fire Phone $1"],[R,oe],[I,X]],[/(playbook);[-\w\),; ]+(rim)/i],[N,R,[I,le]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[N,[R,Xe],[I,X]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[N,[R,Ce],[I,le]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[N,[R,Ce],[I,X]],[/(nexus 9)/i],[N,[R,"HTC"],[I,le]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[R,[N,/_/g," "],[I,X]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[N,[R,"Acer"],[I,le]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[N,[R,"Meizu"],[I,X]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[N,[R,"Ulefone"],[I,X]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[R,N,[I,X]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[R,N,[I,le]],[/(surface duo)/i],[N,[R,At],[I,le]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[N,[R,"Fairphone"],[I,X]],[/(u304aa)/i],[N,[R,"AT&T"],[I,X]],[/\bsie-(\w*)/i],[N,[R,"Siemens"],[I,X]],[/\b(rct\w+) b/i],[N,[R,"RCA"],[I,le]],[/\b(venue[\d ]{2,7}) b/i],[N,[R,"Dell"],[I,le]],[/\b(q(?:mv|ta)\w+) b/i],[N,[R,"Verizon"],[I,le]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[N,[R,"Barnes & Noble"],[I,le]],[/\b(tm\d{3}\w+) b/i],[N,[R,"NuVision"],[I,le]],[/\b(k88) b/i],[N,[R,"ZTE"],[I,le]],[/\b(nx\d{3}j) b/i],[N,[R,"ZTE"],[I,X]],[/\b(gen\d{3}) b.+49h/i],[N,[R,"Swiss"],[I,X]],[/\b(zur\d{3}) b/i],[N,[R,"Swiss"],[I,le]],[/\b((zeki)?tb.*\b) b/i],[N,[R,"Zeki"],[I,le]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[R,"Dragon Touch"],N,[I,le]],[/\b(ns-?\w{0,9}) b/i],[N,[R,"Insignia"],[I,le]],[/\b((nxa|next)-?\w{0,9}) b/i],[N,[R,"NextBook"],[I,le]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[R,"Voice"],N,[I,X]],[/\b(lvtel\-)?(v1[12]) b/i],[[R,"LvTel"],N,[I,X]],[/\b(ph-1) /i],[N,[R,"Essential"],[I,X]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[N,[R,"Envizen"],[I,le]],[/\b(trio[-\w\. ]+) b/i],[N,[R,"MachSpeed"],[I,le]],[/\btu_(1491) b/i],[N,[R,"Rotor"],[I,le]],[/(shield[\w ]+) b/i],[N,[R,"Nvidia"],[I,le]],[/(sprint) (\w+)/i],[R,N,[I,X]],[/(kin\.[onetw]{3})/i],[[N,/\./g," "],[R,At],[I,X]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[N,[R,Ct],[I,le]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[N,[R,Ct],[I,X]],[/smart-tv.+(samsung)/i],[R,[I,x]],[/hbbtv.+maple;(\d+)/i],[[N,/^/,"SmartTV"],[R,ct],[I,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[R,ut],[I,x]],[/(apple) ?tv/i],[R,[N,he+" TV"],[I,x]],[/crkey/i],[[N,Ze+"cast"],[R,lt],[I,x]],[/droid.+aft(\w+)( bui|\))/i],[N,[R,oe],[I,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[N,[R,Xt],[I,x]],[/(bravia[\w ]+)( bui|\))/i],[N,[R,Kt],[I,x]],[/(mitv-\w{5}) bui/i],[N,[R,Tt],[I,x]],[/Hbbtv.*(technisat) (.*);/i],[R,N,[I,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[R,K],[N,K],[I,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[R,N,[I,W]],[/droid.+; (shield) bui/i],[N,[R,"Nvidia"],[I,W]],[/(playstation [345portablevi]+)/i],[N,[R,Kt],[I,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[N,[R,At],[I,W]],[/((pebble))app/i],[R,N,[I,$]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[N,[R,he],[I,$]],[/droid.+; (glass) \d/i],[N,[R,lt],[I,$]],[/droid.+; (wt63?0{2,3})\)/i],[N,[R,Ct],[I,$]],[/(quest( 2| pro)?)/i],[N,[R,be],[I,$]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[R,[I,ce]],[/(aeobc)\b/i],[N,[R,oe],[I,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[N,[I,X]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[N,[I,le]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,le]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,X]],[/(android[-\w\. ]{0,9});.+buil/i],[N,[R,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Z,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Z,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,Z],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Z,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,Z],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[Z,de,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[Z,de,Ke],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[Z,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Fe],[Z,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[Z,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,Z],[/\(bb(10);/i],[Z,[_,Xe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Z,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Z,[_,nt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Z,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[Z,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[Z,[_,Ze+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,re],Z],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,Z],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],Z],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,Z]]},ot=function(ft,yt){if(typeof ft===m&&(yt=ft,ft=y),!(this instanceof ot))return new ot(ft,yt).getResult();var _t=typeof b!==D&&b.navigator?b.navigator:y,Rt=ft||(_t&&_t.userAgent?_t.userAgent:""),pn=_t&&_t.userAgentData?_t.userAgentData:y,Qt=yt?function(Ot,Un){var gr={};for(var Pr in Ot)Un[Pr]&&Un[Pr].length%2==0?gr[Pr]=Un[Pr].concat(Ot[Pr]):gr[Pr]=Ot[Pr];return gr}(St,yt):St,nn=_t&&_t.userAgent==Rt;return this.getBrowser=function(){var Ot,Un={};return Un[_]=y,Un[Z]=y,_e.call(Un,Rt,Qt.browser),Un[U]=typeof(Ot=Un[Z])===T?Ot.replace(/[^\d\.]/g,"").split(".")[0]:y,nn&&_t&&_t.brave&&typeof _t.brave.isBrave==v&&(Un[_]="Brave"),Un},this.getCPU=function(){var Ot={};return Ot[z]=y,_e.call(Ot,Rt,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[R]=y,Ot[N]=y,Ot[I]=y,_e.call(Ot,Rt,Qt.device),nn&&!Ot[I]&&pn&&pn.mobile&&(Ot[I]=X),nn&&Ot[N]=="Macintosh"&&_t&&typeof _t.standalone!==D&&_t.maxTouchPoints&&_t.maxTouchPoints>2&&(Ot[N]="iPad",Ot[I]=le),Ot},this.getEngine=function(){var Ot={};return Ot[_]=y,Ot[Z]=y,_e.call(Ot,Rt,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[_]=y,Ot[Z]=y,_e.call(Ot,Rt,Qt.os),nn&&!Ot[_]&&pn&&pn.platform!="Unknown"&&(Ot[_]=pn.platform.replace(/chrome os/i,re).replace(/macos/i,Fe)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Rt},this.setUA=function(Ot){return Rt=typeof Ot===T&&Ot.length>500?K(Ot,500):Ot,this},this.setUA(Rt),this};ot.VERSION="1.0.37",ot.BROWSER=O([_,Z,U]),ot.CPU=O([z]),ot.DEVICE=O([N,R,I,W,X,x,le,$,ce]),ot.ENGINE=ot.OS=O([_,Z]),typeof g!==D?(C.exports&&(g=C.exports=ot),g.UAParser=ot):w.amdO?(F=(function(){return ot}).call(g,w,g,C))===y||(C.exports=F):typeof b!==D&&(b.UAParser=ot);var it=typeof b!==D&&(b.jQuery||b.Zepto);if(it&&!it.ua){var et=new ot;it.ua=et.getResult(),it.ua.get=function(){return et.getUA()},it.ua.set=function(ft){et.setUA(ft);var yt=et.getResult();for(var _t in yt)it.ua[_t]=yt[_t]}}})(typeof window=="object"?window:this)},7839:function(C,g,w){function F(b){try{if(!w.g.localStorage)return!1}catch(v){return!1}var y=w.g.localStorage[b];return y!=null&&String(y).toLowerCase()==="true"}C.exports=function(b,y){if(F("noDeprecation"))return b;var v=!1;return function(){if(!v){if(F("throwDeprecation"))throw new Error(y);F("traceDeprecation")?console.trace(y):console.warn(y),v=!0}return b.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(C){C.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(C){C.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(C){C.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(C){C.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(C){C.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(C){C.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},f={};function p(C){var g=f[C];if(g!==void 0)return g.exports;var w=f[C]={exports:{}};return l[C].call(w.exports,w,w.exports,p),w.exports}p.amdO={},p.n=function(C){var g=C&&C.__esModule?function(){return C.default}:function(){return C};return p.d(g,{a:g}),g},p.d=function(C,g){for(var w in g)p.o(g,w)&&!p.o(C,w)&&Object.defineProperty(C,w,{enumerable:!0,get:g[w]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(C){if(typeof window=="object")return window}}(),p.o=function(C,g){return Object.prototype.hasOwnProperty.call(C,g)};var S={};return function(){p.d(S,{default:function(){return m}}),p(8416);var C,g=p(1715),w=p(8080),F=p(1737),b=p(1139),y=function(){var T,U="application/dash+xml";function N(I,R,Z){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var z,W=I.id||I.name||"video element";if(!(R=R||[].slice.call(I.querySelectorAll("source")).filter(function(X){return X.type==U})[0])&&I.src)(R=document.createElement("source")).src=I.src;else if(!R&&!I.src)return null;return Z=Z||{},(z=(0,b.Z)(Z).create()).initialize(I,R.src,I.autoplay),T||(T=z.getDebug().getLogger()),T.debug("Converted "+W+" to dash.js player and added content: "+R.src),I._dashjs_player=z,z}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:N,createAll:function(I,R){var Z=[];I=I||"[data-dashjs-player]";for(var z=(R=R||document).querySelectorAll(I),W=0;W<z.length;W++){var X=N(z[W],null);Z.push(X)}for(var le=R.querySelectorAll('source[type="'+U+'"]'),x=0;x<le.length;x++){var $=N(_(le[x]),null);Z.push($)}return Z}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?y.createAll():C=window.setInterval(function(){window.dashjs&&(window.clearInterval(C),y.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),y.createAll()}));var v=y,D=p(6398);dashjs.Protection=F.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=v,dashjs.Debug=D.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),S.default}()})})(YU);var Pz=YU.exports;const Oz=wC(Pz);var bu,Gi,LA,kA,vg={};vg.d=(r,o)=>{for(var l in o)vg.o(o,l)&&!vg.o(r,l)&&Object.defineProperty(r,l,{enumerable:!0,get:o[l]})},vg.o=(r,o)=>Object.prototype.hasOwnProperty.call(r,o);var mE={};function u3(r,o){(o==null||o>r.length)&&(o=r.length);for(var l=0,f=Array(o);l<o;l++)f[l]=r[l];return f}function Xi(r){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},f=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),f.forEach(function(p){var S;S=l[p],p in r?Object.defineProperty(r,p,{value:S,enumerable:!0,configurable:!0,writable:!0}):r[p]=S})}return r}function uo(r,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):function(l,f){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);p.push.apply(p,S)}return p}(Object(o)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(o,l))}),r}function l3(r,o){return function(l){if(Array.isArray(l))return l}(r)||function(l,f){var p,S,C=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(C!=null){var g=[],w=!0,F=!1;try{for(C=C.call(l);!(w=(p=C.next()).done)&&(g.push(p.value),!f||g.length!==f);w=!0);}catch(b){F=!0,S=b}finally{try{w||C.return==null||C.return()}finally{if(F)throw S}}return g}}(r,o)||function(l,f){if(l){if(typeof l=="string")return u3(l,f);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return u3(l,f)}}(r,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}vg.d(mE,{GP:()=>LA,fZ:()=>kz,vn:()=>kA}),(bu=LA||(LA={})).LOADED="loaded",bu.SEEKING="seeking",bu.SEEKED="seeked",bu.BUFFERING="buffering",bu.BUFFERED="buffered",bu.PLAY="play",bu.PLAYING="playing",bu.PAUSE="pause",bu.ENDED="ended",bu.TIME_UPDATE="timeupdate",(Gi=kA||(kA={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var Lz={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},kz=function(r){var o=r.mediaElement,l=r.callback,f=r.allowResumeAfterEnded,p=f!==void 0&&f,S=null,C=function(){typeof S=="number"&&clearTimeout(S)},g=Xi({},Lz),w=function(){return p?g.loading:g.loading||g.ended},F=function(){!g.loading&&g.buffering&&o.playbackRate>0&&(g=uo(Xi({},g),{buffering:!1}),l("buffered")),g.loading&&(o.playbackRate===0?g=uo(Xi({},g),{deferLoadedEvent:!0}):(g=uo(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},b=function(){w()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=uo(Xi({},g),{seeking:!0,buffering:!1}),l("seeking"))},y=function(){if(!w()&&g.seeking){if(o.playbackRate===0){g=uo(Xi({},g),{deferSeekedEvent:!0});return}g=uo(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},v=function(){if(C(),!w()&&!g.seeking){if(o.seeking){b();return}g.buffering||(g=uo(Xi({},g),{buffering:!0}),l("buffering"))}},D=function(){if(C(),o.playbackRate===0){g=uo(Xi({},g),{deferPlayingEvent:!0});return}(g=uo(Xi({},g),{deferPlayingEvent:!1})).loading&&F(),g.initialPlayFired?g.buffering?(g=uo(Xi({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=uo(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=uo(Xi({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=uo(Xi({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&o.playbackRate===0&&!o.seeking},T=[["canplaythrough",F],["playing",D],["waiting",v],["seeking",b],["seeked",y],["ended",function(){g=uo(Xi({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),C(),l("ended")}],["timeupdate",function(){w()||(g.buffering&&!o.paused&&(g=uo(Xi({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&g.paused&&g.initialPlayFired&&(g=uo(Xi({},g),{playRequested:!0}),l("play"))}],["pause",function(){!o.ended&&(g.playRequested||!g.paused)&&((g=uo(Xi({},g),{playRequested:!1})).deferLoadedEvent?(g=uo(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),o.paused&&(g=uo(Xi({},g),{paused:!0}),l("pause"))):(g=uo(Xi({},g),{paused:!0}),l("pause")))}],["ratechange",function(){C();var U=o.playbackRate>0;g.deferLoadedEvent&&U&&F(),g.deferSeekedEvent&&U&&y(),g.deferPlayingEvent&&U&&D(),!w()&&(m()?S=window.setTimeout(function(){m()&&v()},50):g.buffering&&U&&(g=uo(Xi({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var N=l3(U,2),_=N[0],I=N[1];return o.addEventListener(_,I)}),{teardown:function(){C(),T.forEach(function(U){var N=l3(U,2),_=N[0],I=N[1];return o.removeEventListener(_,I)})}}},Ru=mE.GP;mE.vn;var Fz=mE.fZ;const Uz={NEAR_END:"nearend"};class WU extends Cf{constructor(o){var l;super(),this.options=o,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(o){return{currentTime:o.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=Fz({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:o=>{const l=this.createBaseEventPayload(this.video);switch(o){case Ru.LOADED:{this.emit("loaded",l);break}case Ru.SEEKING:{this.emit("seeking",l);break}case Ru.SEEKED:{this.emit("seeked",l);break}case Ru.BUFFERING:{this.emit("buffering",l);break}case Ru.BUFFERED:{this.emit("buffered",l);break}case Ru.PLAY:{this.emit("play",l);break}case Ru.PLAYING:{this.emit("playing",l);break}case Ru.PAUSE:{this.emit("pause",l);break}case Ru.ENDED:{this.emit("ended",l);break}case Ru.TIME_UPDATE:{const f=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&f>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&f<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(Uz.NEAR_END,{...l,remainingTime:f})),this.emit("timeupdate",l);break}}}})}destroy(){var o;(o=this.eventFilter)==null||o.teardown()}getStats(){const o=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:o.droppedVideoFrames,totalVideoFrames:o.totalVideoFrames}}}class Bz extends Error{constructor(o,l){super(o),this.rawError=l}}class jz extends WU{constructor(o){var f,p;super(o),this.name="DashJSEngine",this.player=Oz.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(S){return S+o.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(f=this.options)==null?void 0:f.widevineLicenseUrl,httpRequestHeaders:o.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(o,l){this.setupMediaEventFilter(),await new Promise((f,p)=>{var S;this.once("loaded",()=>{f()});try{this.player.attachSource(o,Math.max((S=l==null?void 0:l.startTimeSeconds)!=null?S:0,0))}catch(C){p(new Bz("UnknownError",C))}})}}var $U={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(r){(function(){var o=typeof window<"u"?window:iu,l={};(function(p,S,C){var g;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var F=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function b(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof S=="object"&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=b(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var i=0;i<e.length-1;i++){var u=e[i];if(!(u in n))break e;n=n[u]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&F(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(c||"")+"_"+u++,c)}function n(c,d){this.g=c,F(this,"description",{configurable:!0,writable:!0,value:d})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=y[t[n]];typeof i=="function"&&typeof i.prototype[e]!="function"&&F(i.prototype,e,{configurable:!0,writable:!0,value:function(){return D(w(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:w(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},N;if(typeof Object.setPrototypeOf=="function")N=Object.setPrototypeOf;else{var _;e:{var I={a:!0},R={};try{R.__proto__=I,_=R.a;break e}catch(e){}_=!1}N=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Z=N;function z(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,Z)Z(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Ij=t.prototype}function W(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function X(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}W.prototype.s=function(e){this.h=e};function le(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}W.prototype.return=function(e){this.i={return:e},this.g=this.j};function x(e,t,n){return e.g=n,{value:t}}W.prototype.u=function(e){this.g=e};function $(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function he(e,t,n){e.g=t,e.m=n||0}function Ce(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function Xe(e){e.A=[e.i],e.m=0,e.j=0}function Ae(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Ze(e){this.g=new W,this.h=e}function nt(e,t){X(e.g);var n=e.g.l;return n?lt(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),qe(e))}function lt(e,t,n,i){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(d){return e.g.l=null,le(e.g,d),qe(e)}return e.g.l=null,i.call(e.g,c),qe(e)}function qe(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,le(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function ut(e){this.next=function(t){return X(e.g),e.g.l?t=lt(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=qe(e)),t},this.throw=function(t){return X(e.g),e.g.l?t=lt(e,e.g.l.throw,t,e.g.s):(le(e.g,t),t=qe(e)),t},this.return=function(t){return nt(e,t)},this[Symbol.iterator]=function(){return this}}function At(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,u){function c(d){d.done?i(d.value):Promise.resolve(d.value).then(t,n).then(c,u)}c(e.next())})}function Oe(e){return At(new ut(new Ze(e)))}function Qe(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(d){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{d(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function i(d){return d instanceof t?d:new t(function(h){h(d)})}if(e)return e;n.prototype.h=function(d){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(d)};var u=y.setTimeout;n.prototype.i=function(d){u(d,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var d=this.g;this.g=[];for(var h=0;h<d.length;++h){var E=d[h];d[h]=null;try{E()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(d){this.i(function(){throw d})},t.prototype.j=function(){function d(A){return function(k){E||(E=!0,A.call(h,k))}}var h=this,E=!1;return{resolve:d(this.F),reject:d(this.l)}},t.prototype.F=function(d){if(d===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof t)this.H(d);else{e:switch(typeof d){case"object":var h=d!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(d):this.m(d)}},t.prototype.C=function(d){var h=void 0;try{h=d.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,d):this.m(d)},t.prototype.l=function(d){this.s(2,d)},t.prototype.m=function(d){this.s(1,d)},t.prototype.s=function(d,h){if(this.h!=0)throw Error("Cannot settle("+d+", "+h+"): Promise already settled in state"+this.h);this.h=d,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var d=this;u(function(){if(d.B()){var h=y.console;typeof h<"u"&&h.error(d.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var d=y.CustomEvent,h=y.Event,E=y.dispatchEvent;return typeof E>"u"?!0:(typeof d=="function"?d=new d("unhandledrejection",{cancelable:!0}):typeof h=="function"?d=new h("unhandledrejection",{cancelable:!0}):(d=y.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d)),d.promise=this,d.reason=this.i,E(d))},t.prototype.A=function(){if(this.g!=null){for(var d=0;d<this.g.length;++d)c.h(this.g[d]);this.g=null}};var c=new n;return t.prototype.H=function(d){var h=this.j();d.Fd(h.resolve,h.reject)},t.prototype.I=function(d,h){var E=this.j();try{d.call(h,E.resolve,E.reject)}catch(A){E.reject(A)}},t.prototype.then=function(d,h){function E(te,Y){return typeof te=="function"?function(ve){try{A(te(ve))}catch(Pe){k(Pe)}}:Y}var A,k,G=new t(function(te,Y){A=te,k=Y});return this.Fd(E(d,A),E(h,k)),G},t.prototype.catch=function(d){return this.then(void 0,d)},t.prototype.Fd=function(d,h){function E(){switch(A.h){case 1:d(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=i,t.reject=function(d){return new t(function(h,E){E(d)})},t.race=function(d){return new t(function(h,E){for(var A=m(d),k=A.next();!k.done;k=A.next())i(k.value).Fd(h,E)})},t.all=function(d){var h=m(d),E=h.next();return E.done?i([]):new t(function(A,k){function G(ve){return function(Pe){te[ve]=Pe,Y--,Y==0&&A(te)}}var te=[],Y=0;do te.push(void 0),Y++,i(E.value).Fd(G(te.length-1),k),E=h.next();while(!E.done)})},t});function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var A;!(A=E.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function i(E){var A=typeof E;return A==="object"&&E!==null||A==="function"}function u(E){if(!ct(E,d)){var A=new n;F(E,d,{value:A})}}function c(E){var A=Object[E];A&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),A(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),A=Object.seal({}),k=new e([[E,2],[A,3]]);return k.get(E)!=2||k.get(A)!=3?!1:(k.delete(E),k.set(A,4),!k.has(E)&&k.get(A)==4)}catch(G){return!1}}())return e;var d="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,A){if(!i(E))throw Error("Invalid WeakMap key");if(u(E),!ct(E,d))throw Error("WeakMap key fail: "+E);return E[d][this.g]=A,this},t.prototype.get=function(E){return i(E)&&ct(E,d)?E[d][this.g]:void 0},t.prototype.has=function(E){return i(E)&&ct(E,d)&&ct(E[d],this.g)},t.prototype.delete=function(E){return i(E)&&ct(E,d)&&ct(E[d],this.g)?delete E[d][this.g]:!1},t}),v("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var A=h.g;return D(function(){if(A){for(;A.head!=h.g;)A=A.Ab;for(;A.next!=A.head;)return A=A.next,{done:!1,value:E(A)};A=null}return{done:!0,value:void 0}})}function i(h,E){var A=E&&typeof E;A=="object"||A=="function"?c.has(E)?A=c.get(E):(A=""+ ++d,c.set(E,A)):A="p_"+E;var k=h.h[A];if(k&&ct(h.h,A))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:A,list:k,index:h,entry:G}}return{id:A,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var A=E.entries(),k=A.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=A.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!A.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var A=i(this,h);return A.list||(A.list=this.h[A.id]=[]),A.entry?A.entry.value=E:(A.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},A.list.push(A.entry),this.g.Ab.next=A.entry,this.g.Ab=A.entry,this.size++),this},u.prototype.delete=function(h){return h=i(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!i(this,h).entry},u.prototype.get=function(h){return(h=i(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var A=this.entries(),k;!(k=A.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var d=0;return u}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(m([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var u=i.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(d){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var u=this;this.g.forEach(function(c){return n.call(i,c,c,u)})},t)});function Xt(e,t){e instanceof String&&(e+="");var n=0,i=!1,u={next:function(){if(!i&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return i=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}v("Array.prototype.keys",function(e){return e||function(){return Xt(this,function(t){return t})}});function Kt(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,u=0;u<i;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return Kt(this,t,n).gg}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var u=i.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=i[n];if(c===t||Object.is(c,t))return!0}return!1}});function Tt(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return Tt(this,t,"includes").indexOf(t,n||0)!==-1}}),v("Array.prototype.find",function(e){return e||function(t,n){return Kt(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var i=Tt(this,t,"startsWith"),u=i.length,c=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var d=0;d<c&&n<u;)if(i[n++]!=t[d++])return!1;return d>=c}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(i)?!1:(u.delete(n),u.add(i),!u.has(n)&&u.has(i))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),v("Array.from",function(e){return e||function(t,n,i){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var d=0;!(c=t.next()).done;)u.push(n.call(i,c.value,d++))}else for(c=t.length,d=0;d<c;d++)u.push(n.call(i,t[d],d));return u}});var Ct=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var u in i)ct(i,u)&&(e[u]=i[u])}return e};v("Object.assign",function(e){return e||Ct}),v("Array.prototype.values",function(e){return e||function(){return Xt(this,function(t,n){return n})}}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return Xt(this,function(t,n){return[t,n]})}}),v("String.prototype.repeat",function(e){return e||function(t){var n=Tt(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)ct(t,i)&&n.push(t[i]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)ct(t,i)&&n.push([i,t[i]]);return n}});var be=this||self;function re(e,t){e=e.split(".");var n=be;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function Fe(){}function O(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function _e(){}function de(){}function Ke(){}function St(e){var t=Qe.apply(1,arguments);ft.has(e)||(ft.add(e),Ke.apply(_e,T(t)))}function ot(){}function it(){}function et(){}var ft=new Set;p.console&&(Ke=function(){return console.warn.apply(console,T(Qe.apply(0,arguments)))},de=function(){console.error.apply(console,T(Qe.apply(0,arguments)))});function yt(){this.g={}}g=yt.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function _t(){this.g=new yt}g=_t.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,i){this.g&&(e=new Rt(e,t,n,i),this.g.push(t,e))},g.na=function(e,t,n,i){function u(d){c.Kb(e,t,u),n(d)}var c=this;this.D(e,t,u,i)},g.Kb=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=m(i);for(var u=i.next();!u.done;u=i.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},re("shaka.util.EventManager",_t),_t.prototype.removeAll=_t.prototype.ib,_t.prototype.unlisten=_t.prototype.Kb,_t.prototype.listenOnce=_t.prototype.na,_t.prototype.listen=_t.prototype.D,_t.prototype.release=_t.prototype.release;function Rt(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=pn(e,i),this.target.addEventListener(t,n,this.g)}Rt.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function pn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),Qt(e)?t:t.capture||!1}function Qt(e){var t=nn;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Ot(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Pr(e,t){this.g=e,this.h=t}Pr.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Pr(5,0),i=Or,u=i.g,c=n.h-u.h;(0<(n.g-u.g||c)?i.i:i.h)(i.g,n,e,t)}function ei(e,t,n,i){Ke([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function eo(e,t,n,i){de([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var Or=null;function to(){}to.prototype.extract=function(){},to.prototype.decode=function(){return[]},to.prototype.clear=function(){},to.prototype.getStreams=function(){return[]};function _i(){}_i.prototype.init=function(){},_i.prototype.parse=function(){return[]};function Di(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(no(e)==no(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function no(e){return e instanceof ArrayBuffer?e:e.buffer}function Ti(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function Lu(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,i){var u=no(e),c=1;"BYTES_PER_ELEMENT"in i&&(c=i.BYTES_PER_ELEMENT);var d=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,d))),new i(u,e,Math.floor(Math.min(e+Math.max(n,0),d))-e)}re("shaka.util.BufferUtils",Di),Di.toDataView=tn,Di.toUint16=Lu,Di.toUint8=Qn,Di.toArrayBuffer=Ti,Di.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},re("shaka.media.IClosedCaptionParser",an);function wt(e){this.l=new _i,(e=zt[e.toLowerCase()])&&(this.l=e()),this.g=new to,(e=Mt)&&(this.g=e())}wt.prototype.init=function(e){this.l.init(e)},wt.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},wt.prototype.h=function(){this.g.clear()},wt.prototype.j=function(){return this.g.getStreams()},re("shaka.media.ClosedCaptionParser",wt),wt.findDecoder=function(){return Mt},wt.unregisterDecoder=function(){Mt=null},wt.registerDecoder=function(e){Mt=e},wt.findParser=function(e){return zt[e]},wt.unregisterParser=function(e){delete zt[e]},wt.registerParser=function(e,t){zt[e]=t};var zt={},Mt=null;function Vt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function mn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;t=t.slice();var i={};e=m(e);for(var u=e.next();!u.done;i={ne:i.ne},u=e.next()){if(i.ne=u.value,u=t.findIndex(function(c){return function(d){return n(c.ne,d)}}(i)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function bn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Vn,this.writingMode=rn,this.lineInterpretation=fn,this.line=null,this.lineHeight="",this.lineAlign=Cn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Lr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new bn(e,t,""),e.lineBreak=!0,e}bn.prototype.clone=function(){var e=new bn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}re("shaka.text.Cue",bn),bn.equal=on,bn.prototype.clone=bn.prototype.clone;var Bn="auto";bn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};bn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};bn.displayAlign=Ur;var Vn="ltr";bn.direction={HORIZONTAL_LEFT_TO_RIGHT:Vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";bn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var fn=0;bn.lineInterpretation={LINE_NUMBER:fn,PERCENTAGE:1};var Cn="start",Jn={CENTER:"center",START:Cn,END:"end"};bn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};bn.defaultTextColor=ar;var Cr={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};bn.defaultTextBackgroundColor=Cr;var Lr=400;bn.fontWeight={NORMAL:Lr,BOLD:700};var Yi="normal",ro={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};bn.fontStyle=ro,bn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=hi}re("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var hi="";Br.scrollMode={NONE:hi,UP:"up"};function vi(){}vi.prototype.destroy=function(){};function Ao(e,t,n){ta[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function io(e,t){for(var n=e.toLowerCase().split(";")[0],i=m([_c,cu,Il,bi]),u=i.next();!u.done;u=i.next())if(u=ta[n+"-"+u.value]){var c=u.ge(),d=c.isSupported(e,t);if(c.destroy(),d)return u.ge}return null}re("shaka.transmuxer.TransmuxerEngine",vi),vi.findTransmuxer=io,vi.unregisterTransmuxer=function(e,t){delete ta[e.toLowerCase().split(";")[0]+"-"+t]},vi.registerTransmuxer=Ao,vi.prototype.destroy=vi.prototype.destroy;var ta={},bi=1,Il=2,cu=3,_c=4;vi.PluginPriority={FALLBACK:bi,PREFERRED_SECONDARY:Il,PREFERRED:cu,APPLICATION:_c};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function si(e){var t;e instanceof si?(Os(this,e.kb),this.mc=e.mc,_n(this,e.wb),Xn(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(Mf))?(Os(this,t[1]||"",!0),this.mc=ti(t[2]||""),_n(this,t[3]||"",!0),Xn(this,t[4]),this.Pa=ti(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ti(t[7]||"")):this.g=new Wi(null)}g=si.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,Xr,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,Xr,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Pi:na,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,Io)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new si);var n=!!e.kb;n?Os(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var i=e.Pa;if(n)Xn(t,e.Bc);else if(n=!!e.Pa){if(i.charAt(0)!="/")if(this.wb&&!this.Pa)i="/"+i;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(i=t.Pa.substr(0,u+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){u=i.lastIndexOf("/",0)==0,i=i.split("/");for(var c=[],d=0;d<i.length;){var h=i[d++];h=="."?u&&d==i.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&d==i.length&&c.push("")):(c.push(h),u=!0)}i=c.join("/")}}return n?t.Pa=i:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new si(this)};function Os(e,t,n){e.kb=n?ti(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ti(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,ui)),e.g=new Wi(t))}function ti(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Xr=/[#\/\?@]/g,na=/[#\?:]/g,Pi=/[#\?]/g,ui=/[#\?@]/g,Io=/#/g;function Wi(e){this.g=e||null}function qo(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),u=null;if(0<=i){var c=t[n].substring(0,i);u=t[n].substring(i+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function ra(e){return qo(e),e.Zc}g.add=function(e,t){qo(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return qo(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return qo(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),i=this.Ca[t],u=0;u<i.length;u++){var c=n;i[u]!==""&&(c+="="+encodeURIComponent(i[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function gt(e,t,n){var i=Qe.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}gt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},re("shaka.util.Error",gt),gt.Severity={RECOVERABLE:1,CRITICAL:2},gt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},gt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function ia(e){this.h=e,this.g=void 0}ia.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ls(e){this.h=e,this.g=null}Ls.prototype.X=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){p.clearTimeout(i),n=!1},i=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ls.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ls(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ls(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},re("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function Co(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function fu(e){return Sc().canPlayType(e)!=""}function Cl(){return!!navigator.userAgent.match(/Edge?\//)}function vs(){return Yr("Xbox One")}function Ka(){return Yr("Tizen")}function ku(){return Yr("Tizen 3")}function Fu(){return Yr("Tizen 2")}function oa(){return Yr("Web0S")}function aa(){return Yr("CrKey")}function du(){if(!Yr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function ys(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ka()&&!Yr("PC=EOS")&&!Yr("PC=APL")&&!Yr("VirginMedia")&&!Yr("SOPOpenBrowser")&&!xr()&&!Yr("AFT")&&!Yr("WPE")}function Tc(){return Yr("PlayStation 5")}function xr(){return Yr("PlayStation 4")}function Es(){return Yr("Hisense")||Yr("VIDAA")}function _s(){if(!ys())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yr(e){return(navigator.userAgent||"").includes(e)}function Sc(){return sa||(bl||(bl=new pr(function(){sa=null})),(sa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(sa=document.createElement("video")),bl.X(1),sa)}function Ca(){var e,t,n,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},aa()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(Ka()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){Ke("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(vs()){n=new Windows.Media.Protection.ProtectionCapabilities,i=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===i.maybe)}catch(G){u=i.notSupported}u===i.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(oa()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){Ke("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(Es()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!xr()&&!Tc()){k.u(2);break}return d=!1,ce(k,8),x(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,d=h.resolution==="4K",he(k,9);break;case 8:return Ce(k),ce(k,11),x(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,d=E.resolution==="4K",he(k,9);break;case 11:A=Ce(k),Ke("PlayStation: Failed to get the display info:",A);case 9:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var bl=null,sa=null;function Ts(){}function Vr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!xr())return e=new TextDecoder().decode(e),e.includes("�")&&de('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):i=e[n],65535>=i)t+=String.fromCharCode(i);else{i-=65536;var u=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+u)}}return t}function Va(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new gt(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)i[u]=e.getUint16(2*u,t);return Rh(i)}function za(e){function t(i){return n.byteLength<=i||32<=n[i]&&126>=n[i]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Vr(n);if(n[0]==254&&n[1]==255)return Va(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Va(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Va(e,!1);if(n[1]==0&&n[3]==0)return Va(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Vr(e);throw new gt(2,2,2003)}function Ya(e){if(p.TextEncoder&&!xr()){var t=new TextEncoder;return Ti(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ti(t)}function Df(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),u=0;u<e.length;++u)i.setUint16(2*u,e.charCodeAt(u),t);return n}function Rh(e){return cm.value()(e)}function bo(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}re("shaka.util.StringUtils",Ts),Ts.resetFromCharCode=function(){cm.g=void 0},Ts.toUTF16=Df,Ts.toUTF8=Ya,Ts.fromBytesAutoDetect=za,Ts.fromUTF16=Va,Ts.fromUTF8=Vr;var cm=new ia(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(i){for(var u="",c=0;c<i.length;c+=n.Db)u+=String.fromCharCode.apply(null,i.subarray(c,c+n.Db));return u}}(t);return null});function Oi(){}function Pf(e){return e=Rh(Qn(e)),btoa(e)}function hu(e,t){return t=t==null?!0:t,e=Pf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ho(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function pu(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=p.parseInt(e.substr(2*i,2),16);return n}function ks(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function li(){for(var e=Qe.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var u=e[i];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}re("shaka.util.Uint8ArrayUtils",Oi),Oi.concat=li,Oi.toHex=ks,Oi.fromHex=pu,Oi.fromBase64=Ho,Oi.toBase64=hu,Oi.toStandardBase64=Pf;function ho(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new si(e[0]);return t=new si(t[0]),[n.resolve(t).toString()]}t=t.map(function(d){return new si(d)}),n=[],e=m(e);for(var i=e.next();!i.done;i=e.next()){i=new si(i.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(i.resolve(c.value).toString())}return n}function Uu(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function xh(e,t){t=t===void 0?"cenc":t;var n=[],i=[],u=[];e.forEach(function(d,h){var E=h;E.length!=22&&(E=hu(pu(h),!1));var A=d;A.length!=22&&(A=hu(pu(d),!1)),d={kty:"oct",kid:E,k:A},n.push(d),i.push(d.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:i});return c=[{initData:Qn(Ya(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Bu(e,t){if(t.length==1)return t[0];if(e=Ro(e,t),e!=null)return e;throw new gt(2,4,4025,t)}function Ro(e,t){for(var n=m(Mh[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,i.test(c.trim()))return c.trim()}return e==vr?"":null}function Nh(e,t){var n=[];e=m(Mh[e]);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,i.test(c.trim())&&n.push(c.trim())}return n}var vr="text",yi={fa:"video",S:"audio",ma:vr,ue:"image",Gi:"application"},Mh={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function wc(){}function Si(e,t){var n=e;return t&&!gu.includes(e)&&(n+='; codecs="'+t+'"'),n}function ju(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Fs(e,t,n){var i=Si(e,t);return t=ju(e,t),io(t)?(e=io(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function fm(e,t,n){var i=[t];return IE.forEach(function(u,c){var d=e[c];c=="codecs"?gu.includes(e.mimeType)||i.push('codecs="'+n+'"'):d&&i.push(u+'="'+d+'"')}),e.hdr=="PQ"&&i.push('eotf="smpte2084"'),i.join(";")}function Of(e){return e.split(";")[0].split("/")[1]}function ba(e){var t=Dh(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Wa(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Dh(n.value),t.push(n[0]);return t.sort().join(",")}function Ra(e){return e.split(";")[0]}function Po(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function dm(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Dh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}re("shaka.util.MimeUtils",wc),wc.getFullTypeWithAllCodecs=ju,wc.getFullType=Si;var IE=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),gu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Us(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Rl(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Mt:!1}Us.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function CE(e,t,n,i,u){var c,d,h,E,A,k,G;return Oe(function(te){if(te.g==1)return x(te,Promise.resolve(),2);if(!e.i||!e.j)return te.return();if(n==null||i==null)return e.i.parseInit(Qn(t)),te.return();for(c=e.B?n:e.s,d={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:c},h=e.i.parseMedia(Qn(t),d,u),E=m(h),A=E.next();!A.done;A=E.next())k=A.value,e.A(k,u||null,d);G=h.filter(function(Y){return Y.startTime>=e.l&&Y.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),$(te)})}Us.prototype.remove=function(e,t){var n=this;return Oe(function(i){if(i.g==1)return x(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),$(i)})};function Ph(e,t,n){e.l=t,e.m=n}function Lf(e,t,n){if(e.C=t,t=e.o.get(t))for(var i=m(t.keys()),u=i.next();!u.done;u=i.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function hm(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var i=t.next();!i.done;i=t.next())hm(e,i.value,n)}function kf(e,t,n,i,u){var c=n+" "+i,d=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,d.has(h)||d.set(h,new Map),d.get(h).has(c)||d.get(h).set(c,[]),hm(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(d.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(d.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(d.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=d.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}re("shaka.text.TextEngine",Us),Us.prototype.destroy=Us.prototype.destroy,Us.findParser=function(e){return ji[e]},Us.unregisterParser=function(e){delete ji[e]},Us.registerParser=function(e,t){ji[e]=t};var ji={};function pm(e,t){return e.concat(t)}function gm(){}function Zu(e){return e!=null}function vo(){}function Gu(e,t){return e=br(e),t=br(t),e.split("-")[0]==t.split("-")[0]}function Ac(e,t){return e=br(e),t=br(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function qu(e,t){return e=br(e),t=br(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function br(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ni.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Hu(e,t){return e=br(e),t=br(t),t==e?4:Ac(t,e)?3:qu(t,e)?2:Ac(e,t)?1:0}function Oh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ni.get(e)||e}function Ku(e){return e.language?br(e.language):e.audio&&e.audio.language?br(e.audio.language):e.video&&e.video.language?br(e.video.language):"und"}function xl(e,t){e=br(e);var n=new Set,i=m(t);for(t=i.next();!t.done;t=i.next())n.add(br(t.value));for(i=m(n),t=i.next();!t.done;t=i.next())if(t=t.value,t==e)return t;for(i=m(n),t=i.next();!t.done;t=i.next())if(t=t.value,Ac(t,e))return t;for(i=m(n),t=i.next();!t.done;t=i.next())if(t=t.value,qu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Ac(e,t))return t;return null}re("shaka.util.LanguageUtils",vo),vo.findClosestLocale=xl,vo.getLocaleForVariant=Ku,vo.getLocaleForText=function(e){return br(e.language||"und")},vo.getBase=Oh,vo.relatedness=Hu,vo.areSiblings=function(e,t){var n=Oh(e),i=Oh(t);return e!=n&&t!=i&&n==i},vo.normalize=br,vo.isSiblingOf=qu,vo.isParentOf=Ac,vo.areLanguageCompatible=Gu,vo.areLocaleCompatible=function(e,t){return e=br(e),t=br(t),e==t};var ni=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function $a(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||i.buffer&&i.buffer.constructor==ArrayBuffer)return i;if(n.has(i))return null;var u=i.constructor==Array;if(i.constructor!=Object&&!u)return null;n.add(i);var c=u?[]:{},d;for(d in i)c[d]=t(i[d]);return u&&(c.length=i.length),c}}var n=new WeakSet;return t(e)}function mm(e){var t={},n;for(n in e)t[n]=e[n];return t}function Ic(){}function vm(e,t,n,i){var u=e.variants;if((t.length||n.length)&&(u=Lh(u,t,n)),i.length){for(t=new yt,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ve,Pe){ve=0;var Ne=[],Ge={};Pe=m(Pe);for(var Te=Pe.next();!Te.done;Ge={Uc:Ge.Uc},Te=Pe.next())Ge.Uc=Te.value,Te=i.filter(function($e){return function(Ue){return $e.Uc.decodingInfos[0][Ue]}}(Ge)).length,Te>ve?(ve=Te,Ne=[Ge.Uc]):Te==ve&&Ne.push(Ge.Uc);c.push.apply(c,T(Ne))}),u=c}n=new Set,t=new Set;var d=m(u);for(u=d.next();!u.done;u=d.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ve,Pe){return ve.bandwidth-Pe.bandwidth});var h=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){d=d.value;var E=d.language+(d.channelsCount||0)+(d.audioSamplingRate||0)+d.roles.join(",")+d.label+d.groupId+d.fastSwitching,A=u.get(E)||[];if(A.length){var k=A[A.length-1],G=ba(k.codecs),te=ba(d.codecs);G==te&&d.bandwidth>k.bandwidth&&(A.push(d),h.push(d.id))}else A.push(d),h.push(d.id);u.set(E,A)}n=Array.from(t).sort(function(ve,Pe){return ve.bandwidth&&Pe.bandwidth?ve.bandwidth-Pe.bandwidth:ve.width-Pe.width}),t=Un();var Y=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){if(d=d.value,E=Math.round(d.frameRate||0)+(d.hdr||"")+d.fastSwitching,A=u.get(E)||[],A.length){if(k=A[A.length-1],!t&&(G=ba(k.codecs),te=ba(d.codecs),G!==te))continue;d.width>k.width||d.height>k.height?(A.push(d),Y.push(d.id)):d.width==k.width&&d.height==k.height&&(G=ba(k.codecs),te=ba(d.codecs),G==te&&d.bandwidth>k.bandwidth&&(A.push(d),Y.push(d.id)))}else A.push(d),Y.push(d.id);u.set(E,A)}e.variants=e.variants.filter(function(ve){var Pe=ve.audio;return ve=ve.video,!(Pe&&!h.includes(Pe.id)||ve&&!Y.includes(ve.id))})}function Lh(e,t,n){var i={};t=m(t);for(var u=t.next();!u.done;i={te:i.te},u=t.next())if(i.te=u.value,u=e.filter(function(c){return function(d){return d.video&&d.video.codecs.startsWith(c.te)}}(i)),u.length){e=u;break}for(i={},n=m(n),t=n.next();!t.done;i={me:i.me},t=n.next())if(i.me=t.value,t=e.filter(function(c){return function(d){return d.audio&&d.audio.codecs.startsWith(c.me)}}(i)),t.length){e=t;break}return e}function kh(e,t,n){e.variants=e.variants.filter(function(i){return Ff(i,t,n)})}function Ff(e,t,n){function i(h,E,A){return h>=E&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,d=u.height;if(d>c&&(d=m([d,c]),c=d.next().value,d=d.next().value),!i(c,t.minWidth,Math.min(t.maxWidth,n.width))||!i(d,t.minHeight,Math.min(t.maxHeight,n.height))||!i(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Cc(e,t,n){var i=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Ff(u,t,n),c!=u.allowedByApplication&&(i=!0)}return i}function ym(e,t,n){return n=n===void 0?[]:n,Oe(function(i){return i.g==1?x(i,Em(e,t,0<t.offlineSessionIds.length,n),2):(bE(t),x(i,jf(t),0))})}function Em(e,t,n,i){var u,c;return Oe(function(d){if(d.g==1)return x(d,Uh(t.variants,n,!1,i),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=Fh(h,u);if(!E){var A=[];h.audio&&A.push(qf(h.audio)),h.video&&A.push(qf(h.video))}return E}),$(d)})}function Fh(e,t){var n=vs(),i=Yr("Firefox")&&Yr("Android"),u=e.video,c=u&&u.width||0,d=u&&u.height||0;if(n&&u&&(1920<c||1080<d)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=Nl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Bu("video",c),n=Nl(n),c=Bu("audio",c),c=Vu(c),d=Fs(u.mimeType,c,"audio"),!Ot(d))return!1;n=[n,c].join()}if(c=Fs(u.mimeType,n,"video"),!Ot(c))return!1;u.codecs=n}if(u=e.audio,i&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(i=Vu(u.codecs),n=Fs(u.mimeType,i,"audio"),!Ot(n))return!1;u.codecs=i}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function Uf(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next()){var u=i.value;i=JSON.stringify(u),u=e[u],u instanceof Object?(u=Uf(u),n.push(i+":"+u)):(u=JSON.stringify(u),n.push(i+":"+u))}return"{"+n.join(",")+"}"}function _m(e,t){var n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=function(k,G){if(k){var te=$a(k);return te.supported=k.supported&&G.supported,te.powerEfficient=k.powerEfficient&&G.powerEfficient,te.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!te.keySystemAccess&&(te.keySystemAccess=G.keySystemAccess),te}return G},i=null,u=[],c={},d=m(t),h=d.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=d.next())E=h.value,c.Hc=Uf(E),c.Gc=Bh,c.Gc[c.Hc]?i=n(i,c.Gc[c.Hc]):u.push(Bf(E).then(function(k){return function(G){var te=null;G=m(G||[]);for(var Y=G.next();!Y.done;Y=G.next())te=n(te,Y.value);te&&(k.Gc[k.Hc]=te,i=n(i,te))}}(c)));return x(A,Promise.all(u),2)}i&&e.decodingInfos.push(i),$(A)})}function Bf(e){var t=[""];e.video&&(t=Po(e.video.contentType).split(","));var n=[""];e.audio&&(n=Po(e.audio.contentType).split(","));var i=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},d=m(n),h=d.next();!h.done;c={Mb:c.Mb},h=d.next())h=h.value,c.Mb=$a(e),e.video&&(c.Mb.video.contentType=Si(Ra(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=Si(Ra(c.Mb.audio.contentType),h)),i.push(new Promise(function(E){return function(A,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){A(G)}).catch(k)}}(c)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function Uh(e,t,n,i){var u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(e.some(function(mt){return mt.decodingInfos.length}))return Ue.return();u={},c=m(i),d=c.next();case 2:if(d.done){Ue.u(4);break}u.oe=d.value,h=!1,E=m(e),A=E.next();case 5:if(A.done){Ue.u(7);break}k=A.value,G=Tm(k,t,n).filter(function(mt){return function(xt){return xt=xt[0],(xt.keySystemConfiguration&&xt.keySystemConfiguration.keySystem)===mt.oe}}(u)),te=m(G),Y=te.next();case 8:if(Y.done){Ue.u(10);break}return ve=Y.value,x(Ue,_m(k,ve),9);case 9:Y=te.next(),Ue.u(8);break;case 10:k.decodingInfos.length&&(h=!0),A=E.next(),Ue.u(5);break;case 7:if(h)return Ue.return();u={oe:u.oe},d=c.next(),Ue.u(2);break;case 4:Pe=m(e),A=Pe.next();case 12:if(A.done){Ue.u(0);break}Ne=A.value,Ge=Tm(Ne,t,n).filter(function(mt){return mt=mt[0],mt=mt.keySystemConfiguration&&mt.keySystemConfiguration.keySystem,!mt||!i.includes(mt)}),Te=m(Ge),Y=Te.next();case 15:if(Y.done){A=Pe.next(),Ue.u(12);break}return $e=Y.value,x(Ue,_m(Ne,$e),16);case 16:Y=Te.next(),Ue.u(15)}})}function Tm(e,t,n){var i=e.audio,u=e.video,c=[],d=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var A=Po(E);if(A.includes(",")&&!i){var k=A.split(",");A=Bu("video",k),k=Bu("audio",k),k=Vu(k),k=Fs(Ra(E),k,"audio"),d.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=Nl(A),E={contentType:Fs(Ra(E),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(i)for(h=m(i.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,A=Vu(Po(E)),E=Fs(Ra(E),A,"audio"),d.push({contentType:E,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(h=[],c.length==0&&c.push(null),d.length==0&&d.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,A=m(d),k=A.next();!k.done;k=A.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(d=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!d.length)return[h];e=[],n=new Map,d=m(d);for(var te=d.next();!te.done;te=d.next())c=te.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(d=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,A=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var Y=n.get(E),ve={keySystem:E,initDataType:"cenc",persistentState:d,distinctiveIdentifier:"optional",sessionTypes:t};for(Y=m(Y),te=Y.next();!te.done;te=Y.next()){if(te=te.value,te.initData&&te.initData.length){for(var Pe=new Set,Ne=m(te.initData),Ge=Ne.next();!Ge.done;Ge=Ne.next())Pe.add(Ge.value.initDataType);ve.initDataType=te.initData[0].initDataType}te.distinctiveIdentifierRequired&&(ve.distinctiveIdentifier="required"),te.persistentStateRequired&&(ve.persistentState="required"),te.sessionType&&(ve.sessionTypes=[te.sessionType]),i&&(te.audioRobustness!=""?ve.audio?ve.audio.robustness=ve.audio.robustness||te.audioRobustness:ve.audio={robustness:te.audioRobustness}:ve.audio||(ve.audio={})),u&&(te.videoRobustness!=""?ve.video?ve.video.robustness=ve.video.robustness||te.videoRobustness:ve.video={robustness:te.videoRobustness}:ve.video||(ve.video={}))}G.keySystemConfiguration=ve,A.push(G)}e.push(A)}return e}function Vu(e){return e.toLowerCase()=="flac"?_s()?"fLaC":"flac":e==="Opus"?"opus":e}function Nl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function bE(e){e.textStreams=e.textStreams.filter(function(t){return t=Si(t.mimeType,t.codecs),Rl(t)})}function jf(e){var t,n,i,u,c,d,h;return Oe(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),i=n.next();case 2:if(i.done){E.u(4);break}if(u=i.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),Wu.has(c)){E.u(5);break}if(d=NE.get(c),!d){Wu.set(c,!1),E.u(5);break}return x(E,RE(d),7);case 7:h=E.h,Wu.set(c,h);case 5:Wu.get(c)&&t.push(u),i=n.next(),E.u(2);break;case 4:e.imageStreams=t,$(E)}})}function RE(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Ml(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,d=n?n.codecs:null,h=[];d&&h.push(d),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var k=new Set;if(t)for(var G=m(t.roles),te=G.next();!te.done;te=G.next())k.add(te.value);if(n)for(G=m(n.roles),te=G.next();!te.done;te=G.next())k.add(te.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:i,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:d,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Dl(e){return{id:e.id,active:!1,type:vr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function zu(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var u=e.tilesLayout;return i&&(u=i.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function bc(e){return e.__shaka_id||(e.__shaka_id=xE++),e.__shaka_id}function Sm(e){var t=wm(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Pl(e){var t=wm(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function wm(e){var t=e.language;return{id:bc(e),active:!1,type:"",bandwidth:0,language:br(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Zf(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Gf(e){return e.filter(function(t){return Zf(t)})}function Rc(e,t,n,i){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var d=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==d}),t){var h=xl(br(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return br(E.language)==h}))}if(u=u.filter(function(E){return E.forced==i}),n){if(e=Yu(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(pm,[]),e.length?Yu(u,e[0]):u}function Yu(e,t){return e.filter(function(n){return n.roles.includes(t)})}function qf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}re("shaka.util.StreamUtils",Ic),Ic.meetsRestrictions=Ff;var Bh={},xE=0,Wu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),NE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new K,this.F=new _t,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*i),n=Math.min(n,this.l.clientWidth*i)}var u=this.m.filter(function(A){return!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)});if(u.length||(u=this.m),i=u,e&&u.length!=this.m.length&&(i=this.m.filter(function(A){return!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),e=jh(this,this.g.restrictions,i,1/0,1/0),t!=1/0||n!=1/0){for(e=Kf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=jh(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!e.length&&(e=jh(this,null,i,1/0,1/0),e=[e[0]]),n=e[0]||null,i=0;i<e.length;i++){u=e[i];for(var c=isNaN(this.B)?1:Math.abs(this.B),d=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=i+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=d&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&Hf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&Hf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(ME)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Hf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function jh(e,t,n,i,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(d){return d.bandwidth&&c?d.bandwidth<=c:!0}))}return t&&(n=n.filter(function(d){return Ff(d,t,{width:u,height:i})})),n.sort(function(d,h){return d.bandwidth-h.bandwidth})}function Kf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,u){return i.width-u.width})}re("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var ME=1;re("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),re("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function xc(e,t,n,i){for(n=n===void 0?!0:n,i=i===void 0?!1:i,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,i)}xc.prototype.add=function(e,t,n){return Am(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function Am(e,t,n,i){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!Zh(u,c)||!Im(u.roles,c.roles)||i&&u.groupId!==c.groupId)}return!(i=u)&&(i=e.video&&t.video)&&(e=e.video,t=t.video,i=!((!n||Zh(e,t))&&Im(e.roles,t.roles))),!i}xc.prototype.values=function(){return this.g.values()};function Zh(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return Wa(i)}),t=t.codecs.split(",").map(function(i){return Wa(i)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Im(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Gh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Ol(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Gh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),i=e.filter(function(u){return Am(t.i,u,!n,t.g)});return i.length?new xc(i[0],i,!n,this.g):this.j.create(e)};function Ol(e,t,n,i,u,c,d,h,E,A){this.s=e,this.A=t,this.h=n,this.i=i,this.B=u,this.l=c,this.g=d===void 0?"":d,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=A===void 0?!1:A}Ol.prototype.create=function(e){var t=[];t=Cm(e,this.s);var n=e.filter(function(i){return i.primary});return t=t.length?t:n.length?n:e,e=bm(t,this.A),e.length&&(t=e),this.l&&(e=xm(t,this.l),e.length&&(t=e)),this.i&&(e=OE(t,this.i),e.length&&(t=e)),this.h&&(e=Rm(t,this.h),e.length&&(t=e)),this.g&&(e=DE(t,this.g),e.length&&(t=e)),this.j&&(e=PE(t,this.j),e.length&&(t=e)),e=LE(t,this.B),e.length&&(t=e),new xc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function Cm(e,t){t=br(t);var n=xl(t,e.map(function(i){return Ku(i)}));return n?e.filter(function(i){return n==Ku(i)}):[]}function bm(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function DE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function PE(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Rm(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function OE(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function xm(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function LE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function qh(){this.g=Nc,this.i=new Map().set(Nc,2).set(Ll,1),this.h=0}function Hh(e,t,n){e.i.set(Nc,n).set(Ll,t)}var Ll=0,Nc=1;function Kh(e,t){var n=ua();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Vh(e){var t,n;return Oe(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new gt(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),x(i,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,$(i)})}function ua(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(i,u){e=i,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function mu(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function zh(){var e=Promise.reject(new gt(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function $u(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Nm(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function Vf(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(d);else{var A=h?e:t;A?i=Yh(A,E,c):(h?c.resolve:c.reject)(E)}}}function i(){return c.reject(d),u.abort()}var u=this,c=new Rr,d=new gt(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return i()})};function Yh(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}re("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.va,pi.prototype.finally=pi.prototype.finally,pi.all=Vf,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Nm,pi.completed=$u,pi.aborted=zh,pi.failed=mu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Mm(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},re("shaka.util.FakeEvent",Wn);var Mc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new yt,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(i){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function kl(){this.g=[]}function vu(e,t){e.g.push(t.finally(function(){mn(e.g,t)}))}kl.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,i,u,c){Sr.call(this),this.i=!1,this.m=new kl,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=i||null,this.C=u||null,this.B=c||null,this.o=!1}z(Kr,Sr),g=Kr.prototype,g.Cf=function(e){this.o=e};function Ko(e,t,n,i){n=n||Xh;var u=Pc[e];(!u||n>=u.priority)&&(Pc[e]={priority:n,ge:t,bi:i===void 0?!1:i})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Li(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var i=this,u=new $h;if(this.i){var c=Promise.reject(new gt(2,7,7001));return c.catch(function(){}),new Dc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?$a(t.retryParameters):ua(),t.uris=$a(t.uris),c=Dm(this,e,t,n);var d=c.va(function(){return Wh(i,e,t,n,new Kh(t.retryParameters,!1),0,null,u)}),h=d.va(function(te){return kE(i,e,te,n)}),E=Date.now(),A=0;c.promise.then(function(){A=Date.now()-E},function(){});var k=0;d.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(te){var Y=Date.now()-k,ve=te.response;return ve.timeMs+=A,ve.timeMs+=Y,te.Ih||!i.l||ve.fromCache||t.method=="HEAD"||e!=Xa||i.l(ve.timeMs,ve.data.byteLength,Pm(n)),i.B&&i.B(e,ve,n),ve},function(te){throw te&&(te.severity=2),te});return c=new Dc(G.promise,function(){return G.abort()},u),vu(this.m,c),c};function Dm(e,t,n,i){function u(h){c=c.va(function(){return n.body&&(n.body=Ti(n.body)),h(t,n,i)})}var c=$u(void 0);e.A&&u(e.A),e=m(e.g);for(var d=e.next();!d.done;d=e.next())u(d.value);return c.va(void 0,function(h){throw h instanceof gt&&h.code==7001?h:new gt(2,1,1006,h)})}function Wh(e,t,n,i,u,c,d,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,i,n.uris[c],n.uris[c-1]);var E=new si(n.uris[c]),A=E.kb,k=!1;A||(A=location.protocol,A=A.slice(0,-1),Os(E,A),n.uris[c]=E.toString()),A=A.toLowerCase();var G=(A=Pc[A])?A.ge:null;if(!G)return mu(new gt(2,1,1e3,E));var te=A.bi,Y=null,ve=null,Pe=!1,Ne=!1,Ge;return Nm(Vh(u)).va(function(){if(e.i)return zh();Ge=Date.now();var Te=0;n.requestStartTime=Date.now();var $e=G(n.uris[c],n,t,function(xt,Ht,Ut){Y&&Y.stop(),ve&&ve.X(mt/1e3),e.l&&t==Xa&&(Te++,n.packetNumber=Te,e.l(xt,Ht,Pm(i),n),k=!0,h.g=Ut)},function(xt){e.j&&e.j(xt,n,t),Ne=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!te)return $e;var Ue=n.retryParameters.connectionTimeout;Ue&&(Y=new pr(function(){Pe=!0,$e.abort()}),Y.X(Ue/1e3));var mt=n.retryParameters.stallTimeout;return mt&&(ve=new pr(function(){Pe=!0,$e.abort()})),$e}).va(function(Te){Y&&Y.stop(),ve&&ve.stop(),Te.timeMs==null&&(Te.timeMs=Date.now()-Ge);var $e={response:Te,Ih:k};return!Ne&&e.j&&e.j(Te.headers,n,t),$e},function(Te){if(Y&&Y.stop(),ve&&ve.stop(),e.s){var $e=null,Ue=0;Te instanceof gt&&($e=Te,Te.code==1001&&(Ue=Te.data[1])),e.s(n,$e,Ue,Pe)}if(e.i)return zh();if(Pe&&(Te=new gt(1,1,1003,n.uris[c],t)),Te instanceof gt){if(Te.code==7001)throw Te;if(Te.code==1010)throw d;if(Te.severity==1)return $e=new Map().set("error",Te),$e=new Wn("retry",$e),e.dispatchEvent($e),c=(c+1)%n.uris.length,Wh(e,t,n,i,u,c,Te,h)}throw Te})}function kE(e,t,n,i){var u=$u(void 0),c={};e=m(e.h);for(var d=e.next();!d.done;c={qe:c.qe},d=e.next())c.qe=d.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Ti(E.data)),h.qe(t,E,i)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof gt){if(h.code==7001)throw h;E=h.severity}throw new gt(E,1,1007,h)})}function Pm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}re("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Li,Kr.defaultRetryParameters=function(){return ua()},Kr.prototype.clearAllResponseFilters=Kr.prototype.ah,Kr.prototype.unregisterResponseFilter=Kr.prototype.Ci,Kr.prototype.registerResponseFilter=Kr.prototype.fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.$g,Kr.prototype.unregisterRequestFilter=Kr.prototype.Bi,Kr.prototype.registerRequestFilter=Kr.prototype.ei,Kr.unregisterScheme=function(e){delete Pc[e]},Kr.registerScheme=Ko,Kr.prototype.setForceHTTPS=Kr.prototype.Cf;function $h(){this.g=0}Kr.NumBytesRemainingClass=$h;function Dc(e,t,n){pi.call(this,e,t),this.h=n}z(Dc,pi),Kr.PendingRequest=Dc;var Xa=1;Kr.RequestType={MANIFEST:0,SEGMENT:Xa,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var Xh=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Xh};var Pc={};function Xu(e){this.g=!1,this.h=new Rr,this.i=e}Xu.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof gt&&t.code==7003?t:new gt(2,7,7003,t)}function zf(e,t){var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function FE(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Fl(e){for(var t=new Map,n=m(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Oc(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==Om,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Bs()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Bs()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Bs()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Bs()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Bs()}if(2097151<t)throw new gt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw Bs();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw Bs();this.g+=e},g.mi=function(e){if(this.g<e)throw Bs();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw Bs();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Vr(e)};function Bs(){return new gt(2,3,3e3)}re("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var Om=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Om};function kr(){this.i=[],this.h=[],this.g=!1}g=kr.prototype,g.box=function(e,t){return e=Lm(e),this.i[e]=UE,this.h[e]=t,this},g.O=function(e,t){return e=Lm(e),this.i[e]=km,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,i){var u=t.wa();if(i&&u+8>t.getLength())this.g=!0;else{var c=t.M(),d=t.M(),h=Yf(d),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(i&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var A=this.h[d];if(A){var k=null,G=null;if(this.i[d]==km){if(i&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}d=u+c,n&&d>t.getLength()&&(d=t.getLength()),i&&d>t.getLength()?this.g=!0:(i=d-t.wa(),t=0<i?t.sb(i):new Uint8Array(0),t=new Dr(t,0),A({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function yr(e){for(var t=Ul(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function yu(e){for(var t=Ul(e),n=e.reader.M(),i=0;i<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function wi(e){var t=Ul(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Qh(e){var t=Ul(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Qu(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function Lm(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Yf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Ul(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}re("shaka.util.Mp4Parser",kr),kr.headerSize=Ul,kr.typeToString=Yf,kr.allData=Qu,kr.audioSampleEntry=Qh,kr.visualSampleEntry=wi,kr.sampleDescription=yu,kr.children=yr,kr.prototype.parseNext=kr.prototype.Ac,kr.prototype.parse=kr.prototype.parse,kr.prototype.stop=kr.prototype.stop,kr.prototype.fullBox=kr.prototype.O,kr.prototype.box=kr.prototype.box;var UE=0,km=1;function Fm(e){var t=this;this.g=[],this.h=[],this.data=[],new kr().box("moov",yr).box("moof",yr).O("pssh",function(n){if(!(1<n.version)){var i=Qn(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(ks(n.reader.sb(16))),0<n.version){i=n.reader.M();for(var u=0;u<i;u++){var c=ks(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function Wf(e,t,n,i){var u=e.length,c=t.length+16+u;0<i&&(c+=4+16*n.size);var d=new Uint8Array(c),h=tn(d),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>i?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,d.set(t,E),E+=t.length,0<i)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=pu(n.value),d.set(n,E),E+=n.length;return h.setUint32(E,u),d.set(e,E+4),d}function Jh(e,t){return e=za(e),Bl(e,t)}function Bl(e,t){return e=BE(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Lc(e){return Fc.has(e)?Fc.get(e):""}function BE(e){function t(u,c){c=c===void 0?!1:c;for(var d=[];e[i];)if(e.charCodeAt(i)==60){if(e.charCodeAt(i+1)===47){c=i+2,i=e.indexOf(">",i),c=e.substring(c,i);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,i).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[i]);i+1&&(i+=1);break}else if(e.charCodeAt(i+1)===33){if(e.charCodeAt(i+2)==45){for(;i!==-1&&(e.charCodeAt(i)!==62||e.charCodeAt(i-1)!=45||e.charCodeAt(i-2)!=45||i==-1);)i=e.indexOf(">",i+1);i===-1&&(i=e.length)}else if(e.charCodeAt(i+2)===91&&e.charCodeAt(i+8)===91&&e.substr(i+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",i),h==-1?(d.push(e.substr(i+9)),i=e.length):(d.push(e.substring(i+9,h)),i=h+3);continue}i++;continue}e:{E=c,i++;var A=n(),k={};for(h=[];e.charCodeAt(i)!==62&&e[i];){var G=e.charCodeAt(i);if(64<G&&91>G||96<G&&123>G){G=n();for(var te=e.charCodeAt(i);te&&te!==39&&te!==34&&!(64<te&&91>te||96<te&&123>te)&&te!==62;)i++,te=e.charCodeAt(i);var Y=i+1;if(i=e.indexOf(e[i],Y),Y=e.slice(Y,i),te===39||te===34){if(i===-1){for(E={tagName:A,attributes:k,children:h,parent:null},A=0;A<h.length;A++)typeof h[A]!="string"&&(h[A].parent=E);h=E;break e}}else Y=null,i--;G.startsWith("xmlns:")&&Fc.set(Y,G.split(":")[1]),A==="tt"&&G==="xml:space"&&Y==="preserve"&&(E=!0),k[G]=Y}i++}for(e.charCodeAt(i-1)!==47?(i++,h=t(A,E)):i++,E={tagName:A,attributes:k,children:h,parent:null},A=h.length,k=0;k<A;k++)G=h[k],typeof G!="string"?G.parent=E:k==A-1&&G=="\n"&&h.pop();h=E}if(d.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(d.push.apply(d,T(h.children)),h.children=[])}else h=i,i=e.indexOf("<",i)-1,i===-2&&(i=e.length),h=e.slice(h,i+1),c?0<h.length&&d.push(h):(d.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&d.push(h),i++;return d}function n(){for(var u=i;"\r\n	>/= ".indexOf(e[i])===-1&&e[i];)i++;return e.slice(u,i)}var i=0;return t("")}function $f(e){return typeof e=="string"}function jE(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Wr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function Ri(e){return typeof e=="string"?bo(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:bo(e))}function Eu(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ri(e))&&(e=e.trim()),e):null}function xa(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var i=e.next();!i.done;i=e.next())xa(i.value,t,n)}return n}function la(e,t){return e=Wr(e,t),e.length!=1?null:e[0]}function js(e,t,n){return e=Xf(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,i){i=i===void 0?null:i;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?i:u}function _u(e,t,n){return t=Lc(t),e.attributes[t+":"+n]||null}function Xf(e,t,n){t=Lc(t);var i=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&i.push(u)}return i}function ca(e,t,n){t=m(t);for(var i=t.next();!i.done;i=t.next())if(i=_u(e,i.value,n))return i;return null}function Qf(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Qa(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Jf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Ju(e){return e=Number(e),e%1===0?e:null}function Zs(e){return e=Number(e),e%1===0&&0<e?e:null}function xo(e){return e=Number(e),e%1===0&&0<=e?e:null}function kc(e){return e=Number(e),isNaN(e)?null:e}function ep(e){return e?e.toLowerCase()==="true":!1}function Um(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function tp(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var i=document.createElement(e.tagName),u;for(u in e.attributes)i.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&tp(e.parent,!0,!1).appendChild(i),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=tp(t,!1,!0),i.appendChild(n);return i}var Fc=new Map([]);function Uc(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new _t,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return V(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){ye(t)}),this.l.catch(function(){}),this.j=new Xu(function(){return ZE(t)}),this.ba=!1,this.F=this.G=null}g=Uc.prototype,g.destroy=function(){return this.j.destroy()};function ZE(e){return Oe(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,x(t,H(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),x(t,e.m.setMediaKeys(null),6);case 6:he(t,5);break;case 4:Ce(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,$(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function Bm(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,Gm(e,t)}function jm(e,t,n){e.A=new Map,n=m(n);for(var i=n.next();!i.done;i=n.next())e.A.set(i.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),i=n.next();!i.done;i=n.next())i=i.value,e.A.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.T=0<e.A.size,Gm(e,t)}function Zm(e,t,n,i,u,c){var d=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],d.set(t,u),op(e,d,[])}function Gm(e,t){var n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te;return Oe(function($e){if($e.g==1){if(n=KE(e))for(i=m(t),u=i.next();!u.done;u=i.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(d=t.some(function(Ue){return!!(Ue.video&&Ue.video.drmInfos.length||Ue.audio&&Ue.audio.drmInfos.length)}),d||(h=Fl(e.h.servers),ge(t,h)),E=new Set,A=m(t),u=A.next();!u.done;u=A.next())for(k=u.value,G=Se(k),te=m(G),Y=te.next();!Y.done;Y=te.next())ve=Y.value,E.add(ve);for(Pe=m(E),Y=Pe.next();!Y.done;Y=Pe.next())Ne=Y.value,De(Ne,Fl(e.h.servers),Fl(e.h.advanced||{}),e.h.keySystemsMapping);return x($e,Uh(t,e.T,e.ba,e.h.preferredKeySystems),2)}return Ge=d||Object.keys(e.h.servers).length,Ge?(Te=op(e,void 0,t),$e.return(d?Te:Te.catch(function(){}))):(e.da=!0,$e.return(Promise.resolve()))})}function np(e){var t;return Oe(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return x(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),x(n,e.G,6);case 6:he(n,5);break;case 4:t=Ce(n),e.o(new gt(2,6,6003,t.message));case 5:jr(e.j),$(n)}})}function GE(e,t){return Oe(function(n){if(n.g==1)return x(n,np(e),2);jl(e,t.initDataType,Qn(t.initData)),$(n)})}g.Vc=function(e){var t=this;return Oe(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var i=m(t.N),u=i.next();!u.done;u=i.next())P(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(i){return 0<i.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?x(n,np(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new gt(2,6,6010))}),n.return());rp(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(i){return GE(t,i)}),$(n)})};function qm(e){var t,n,i,u,c;return Oe(function(d){switch(d.g){case 1:if(!e.s||!e.g)return d.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){d.u(2);break}return t=Li([e.g.serverCertificateUri],e.h.retryParameters),ce(d,3),n=e.C.zb.request(5,t),x(d,n.promise,5);case 5:i=d.h,e.g.serverCertificate=Qn(i.data),he(d,4);break;case 3:throw u=Ce(d),new gt(2,6,6017,u);case 4:if(e.j.g)return d.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?d.return():(ce(d,6),x(d,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:he(d,0);break;case 6:throw c=Ce(d),new gt(2,6,6004,c.message)}})}function qE(e,t){var n,i,u;return Oe(function(c){if(c.g==1)return x(c,Vm(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(i=[],(u=e.i.get(n))&&(u.ab=new Rr,i.push(u.ab)),i.push(n.remove()),x(c,Promise.all(i),3)):c.return();e.i.delete(n),$(c)})}function rp(e){var t,n,i,u,c;return Oe(function(d){if(d.g==1)return e.A.size?(e.A.forEach(function(h,E){Vm(e,E,h)}),x(d,e.l,3)):d.u(2);if(d.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&me(e))return d.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=m(n),u=i.next();!u.done;u=i.next())c=u.value,jl(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),d.return(e.l)})}function jl(e,t,n){if(n.length){var i=e.i.values();i=m(i);for(var u=i.next();!u.done;u=i.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function Hm(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function ip(e){return e=e.i.keys(),e=zf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=zf(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Oc(this.ea)};function op(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge;return Oe(function(Te){switch(Te.g){case 1:if(i=new Map,n.length){u=HE(e,n,i),Te.u(2);break}return x(Te,Km(e,t),3);case 3:u=Te.h;case 2:if(c=u,!c)throw new gt(2,6,6001);for(jr(e.j),ce(Te,4),e.H.clear(),d=c.getConfiguration(),h=d.audioCapabilities||[],E=d.videoCapabilities||[],A=m(h),k=A.next();!k.done;k=A.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(te=m(E),k=te.next();!k.done;k=te.next())Y=k.value,e.H.add(Y.contentType.toLowerCase());if(n.length){var $e=c.keySystem,Ue=i.get(c.keySystem),mt=[],xt=[],Ht=[],Ut=[],Et=[],jt=new Set;He(Ue,mt,xt,Ut,Ht,Et,jt);var cn=e.T?"persistent-license":"temporary";for($e={keySystem:$e,encryptionScheme:mt[0],licenseServerUri:xt[0],distinctiveIdentifierRequired:Ue[0].distinctiveIdentifierRequired,persistentStateRequired:Ue[0].persistentStateRequired,sessionType:Ue[0].sessionType||cn,audioRobustness:Ue[0].audioRobustness||"",videoRobustness:Ue[0].videoRobustness||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:Et,keyIds:jt},Ue=m(Ue),mt=Ue.next();!mt.done;mt=Ue.next())mt=mt.value,mt.distinctiveIdentifierRequired&&($e.distinctiveIdentifierRequired=mt.distinctiveIdentifierRequired),mt.persistentStateRequired&&($e.persistentStateRequired=mt.persistentStateRequired);Ue=$e}else Ue=c.keySystem,$e=t.get(c.keySystem),mt=[],xt=[],Ht=[],Ut=[],Et=[],jt=new Set,He($e.drmInfos,mt,xt,Ut,Ht,Et,jt),Ue={keySystem:Ue,encryptionScheme:mt[0],licenseServerUri:xt[0],distinctiveIdentifierRequired:$e.distinctiveIdentifier=="required",persistentStateRequired:$e.persistentState=="required",sessionType:$e.sessionTypes[0]||"temporary",audioRobustness:($e.audioCapabilities?$e.audioCapabilities[0].robustness:"")||"",videoRobustness:($e.videoCapabilities?$e.videoCapabilities[0].robustness:"")||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:Et,keyIds:jt};if(e.g=Ue,!e.g.licenseServerUri)throw new gt(2,6,6012,e.g.keySystem);return x(Te,c.createMediaKeys(),6);case 6:if(ve=Te.h,jr(e.j),e.s=ve,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Te.u(7);break}return ce(Te,8),x(Te,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Pe=Te.h,Pe!="usable")throw new gt(2,6,6018);jr(e.j),he(Te,7,4);break;case 8:throw Ne=Ce(Te,4),Ne instanceof gt?Ne:new gt(2,6,6019,Ne.message);case 7:return e.da=!0,x(Te,qm(e),11);case 11:jr(e.j),he(Te,0);break;case 4:throw Ge=Ce(Te),jr(e.j,Ge),e.g=null,e.H.clear(),Ge instanceof gt?Ge:new gt(2,6,6002,Ge.message)}})}function HE(e,t,n){for(var i=m(t),u=i.next();!u.done;u=i.next()){var c=m(Se(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new gt(2,6,6e3);for(i={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;i={pe:i.pe},u=e.next())for(i.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(A){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==A.pe}}(i)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(i=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var d=m(u.value.decodingInfos);for(u=d.next();!u.done;u=d.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==i)return h.keySystemAccess}}}return null}function Km(e,t){var n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne;return Oe(function(Ge){switch(Ge.g){case 1:if(t.size==1&&t.has(""))throw new gt(2,6,6e3);for(i=m(t.values()),u=i.next();!u.done;u=i.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;d=m(e.h.preferredKeySystems),h=d.next();case 2:if(h.done){Ge.u(4);break}if(E=h.value,!t.has(E)){Ge.u(3);break}return A=t.get(E),ce(Ge,6),x(Ge,navigator.requestMediaKeySystemAccess(E,[A]),8);case 8:return n=Ge.h,Ge.return(n);case 6:Ce(Ge);case 7:jr(e.j);case 3:h=d.next(),Ge.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){Ge.u(11);break}te=G.value,Y=m(t.keys()),h=Y.next();case 12:if(h.done){G=k.next(),Ge.u(9);break}if(ve=h.value,Pe=t.get(ve),Ne=Pe.drmInfos.some(function(Te){return!!Te.licenseServerUri}),Ne!=te){Ge.u(13);break}return ce(Ge,15),x(Ge,navigator.requestMediaKeySystemAccess(ve,[Pe]),17);case 17:return n=Ge.h,Ge.return(n);case 15:Ce(Ge);case 16:jr(e.j);case 13:h=Y.next(),Ge.u(12);break;case 11:return Ge.return(n)}})}function KE(e){return e=Fl(e.h.clearKeys),e.size==0?null:xh(e)}function Bc(e){ie(e)&&e.l.resolve()}function jc(e,t){new pr(function(){t.loaded=!0,Bc(e)}).X(Ye)}function Vm(e,t,n){var i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:try{i=e.s.createSession("persistent-license")}catch(G){return u=new gt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(i,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):P(e,G)}),e.B.D(i,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(i,c),ce(k,2),x(k,i.load(t),4);case 4:return d=k.h,jr(e.j),d||(e.i.delete(i),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new gt(h,6,6013)),c.loaded=!0),jc(e,c),Bc(e),k.return(i);case 2:E=Ce(k),jr(e.j,E),e.i.delete(i),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new gt(A,6,6005,E.message)),c.loaded=!0,Bc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,i){try{var u=e.s.createSession(i)}catch(c){e.o(new gt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):P(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof gt||(t=new gt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&hu(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var d=c.errorCode;if(d&&d.systemCode){var h=d.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new gt(2,6,6006,c.message,c,h))}})}function P(e,t){var n,i,u,c,d,h,E,A,k,G,te,Y,ve;Oe(function(Pe){switch(Pe.g){case 1:if(n=t.target,e.h.logLicenseExchange&&hu(t.message),i=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),d=Li([u],e.h.retryParameters),d.body=t.message,d.method="POST",d.licenseRequestType=t.messageType,d.sessionId=n.sessionId,d.drmInfo=e.g,i&&(d.initData=i.initData,d.initDataType=i.initDataType),Hm(e.g.keySystem)){var Ne=Va(d.body,!0,!0);if(Ne.includes("PlayReadyKeyMessage")){Ne=Bl(Ne,"PlayReadyKeyMessage");var Ge=xa(Ne,"HttpHeader");Ge=m(Ge);for(var Te=Ge.next();!Te.done;Te=Ge.next()){var $e=Te.value;Te=xa($e,"name")[0],$e=xa($e,"value")[0],d.headers[Ri(Te)]=Ri($e)}Ne=xa(Ne,"Challenge")[0],d.body=Ho(Ri(Ne))}else d.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),ce(Pe,2),A=e.C.zb.request(2,d),x(Pe,A.promise,4);case 4:E=Pe.h,he(Pe,3);break;case 2:return k=Ce(Pe),e.j.g||(G=new gt(2,6,6007,k),e.i.size==1?(e.o(G),i&&i.ab&&i.ab.reject(G)):(i&&i.ab&&i.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Pe.return();case 3:return e.j.g?Pe.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&hu(E.data),ce(Pe,5),x(Pe,n.update(E.data),7));case 7:he(Pe,6);break;case 5:return te=Ce(Pe),Y=new gt(2,6,6008,te.message),e.o(Y),i&&i.ab&&i.ab.reject(Y),Pe.return();case 6:if(e.j.g)return Pe.return();ve=new Wn("drmsessionupdate"),e.C.onEvent(ve),i&&(i.ab&&i.ab.resolve(),jc(e,i)),$(Pe)}})}function B(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(c,d){if(typeof d=="string"){var h=d;d=c,c=h}if(Hm(e.g.keySystem)&&d.byteLength==16&&(Cl()||xr())){h=tn(d);var E=h.getUint32(0,!0),A=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,A,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(i=!0),d=ks(d).slice(0,32),e.aa.set(d,c)});var u=t.expiration-Date.now();(0>u||i&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(Ee))}function V(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(i,u){return n.set(u,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.o(new gt(2,6,6014)),e.C.ee(Oc(n))}function ee(){var e,t,n,i,u,c,d,h;return Oe(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},i={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[i,n],c=new Map,d=function(A){var k,G,te;return Oe(function(Y){switch(Y.g){case 1:if(ce(Y,2),A==="org.w3.clearkey"&&_s())throw Error("Unsupported keySystem");return x(Y,navigator.requestMediaKeySystemAccess(A,u),4);case 4:return k=Y.h,te=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,ku()&&(te=!1),c.set(A,{persistentState:te}),x(Y,k.createMediaKeys(),5);case 5:he(Y,0);break;case 2:Ce(Y),c.set(A,null),$(Y)}})},h=e.map(function(A){return d(A)}),x(E,Promise.all(h),2)):E.return(Oc(c))})}function J(e){var t;return Oe(function(n){if(n.g==1)return t=new Promise(function(i,u){new pr(u).X(Be)}),ce(n,2),x(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return he(n,0);Ce(n),$(n)})}function H(e){var t;return Oe(function(n){return t=Array.from(e.i.entries()),e.i.clear(),x(n,Promise.all(t.map(function(i){i=m(i);var u=i.next().value,c=i.next().value;return Oe(function(d){if(d.g==1)return ce(d,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?x(d,J(u),5):x(d,u.remove(),5);if(d.g!=2)return he(d,0);Ce(d),$(d)})})),0)})}function ne(e,t){return e.length&&t.length&&e!==t?0<fe(e,t).length:!0}function fe(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,i.keySystem==c.keySystem){u=new Map;for(var d=m((i.initData||[]).concat(c.initData||[])),h=d.next();!h.done;h=d.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),d=i.keyIds&&c.keyIds?new Set([].concat(T(i.keyIds),T(c.keyIds))):i.keyIds||c.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||c.persistentStateRequired,videoRobustness:i.videoRobustness||c.videoRobustness,audioRobustness:i.audioRobustness||c.audioRobustness,serverCertificate:i.serverCertificate||c.serverCertificate,serverCertificateUri:i.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:d});break}}return n}function Se(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function ye(e){e.i.forEach(function(t,n){var i=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=i&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),FE(e,function(t){return t.loaded})}function me(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function ge(e,t){var n=[];for(t.forEach(function(i,u){n.push({keySystem:u,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function He(e,t,n,i,u,c,d){var h=[],E={};e=m(e);for(var A=e.next();!A.done;E={la:E.la},A=e.next()){if(E.la=A.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(i.some(function(te){return function(Y){return zi(Y,te.la.serverCertificate)}}(E))||i.push(E.la.serverCertificate)),E.la.initData){A={};for(var k=m(E.la.initData),G=k.next();!G.done;A={vd:A.vd},G=k.next())A.vd=G.value,c.some(function(te){return function(Y){var ve=te.vd;return Y.keyId&&Y.keyId==ve.keyId?!0:Y.initDataType==ve.initDataType&&zi(Y.initData,ve.initData)}}(A))||c.push(A.vd)}if(E.la.keyIds)for(A=m(E.la.keyIds),k=A.next();!k.done;k=A.next())d.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),i=h.next();!i.done;i=h.next())i=p.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,T(i.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function De(e,t,n,i){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[u]&&(e.keySystem=i[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Be=1,Ye=5,Ee=.5,Le=new ia(function(){return Ti(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function we(e,t,n){this.h=e,this.i=t,this.g=n}function je(e,t){return Oe(function(n){return n.g==1?x(n,j(e,t),2):n.return(ue(e,t))})}function j(e,t){return Oe(function(n){if(n.g==1)return x(n,ym(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(Zf))throw new gt(2,4,4032);$(n)})}function ue(e,t){var n=Cc(t.variants,e.h.restrictions,e.i);if(t){var i=e.g?e.g.g:null;if(i&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,i.keySystem,c.video),ae(e,i.keySystem,c.audio);se(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=m(i.initData||[]);for(var u=i.next();!u.done;u=i.next())u=u.value,jl(e.g,u.initDataType,u.initData)}}}function se(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var i=!1,u=!1,c=new Set,d=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var k=A.next();!k.done;k=A.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&d.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(i=!0):u=!0}if(!i)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(d)},new gt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Me(){}function Ie(e,t){if(t){var n=ke[t.toLowerCase()];if(n)return n}throw new gt(2,4,4e3,e,t)}re("shaka.media.ManifestParser",Me),Me.unregisterParserByMime=function(e){delete ke[e]},Me.registerParserByMime=function(e,t){ke[e]=t},Me.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Me.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var ke={};function Re(e){function t(){i=!0}function n(A){c.push(A),yr(A)}e=Qn(e);var i=!1,u,c=[],d=[];if(new kr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(A){u=A,c.push(A),yu(A)}).O("encv",t).O("enca",t).O("dvav",function(A){d.push({box:A,Xa:1701733238})}).O("dva1",function(A){d.push({box:A,Xa:1701733238})}).O("dvh1",function(A){d.push({box:A,Xa:1701733238})}).O("dvhe",function(A){d.push({box:A,Xa:1701733238})}).O("hev1",function(A){d.push({box:A,Xa:1701733238})}).O("hvc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc3",function(A){d.push({box:A,Xa:1701733238})}).O("ac-3",function(A){d.push({box:A,Xa:1701733217})}).O("ec-3",function(A){d.push({box:A,Xa:1701733217})}).O("ac-4",function(A){d.push({box:A,Xa:1701733217})}).O("mp4a",function(A){d.push({box:A,Xa:1701733217})}).parse(e),i)return e;if(d.length==0||!u)throw ks(e),new gt(2,3,3019);d.reverse();for(var h=m(d),E=h.next();!E.done;E=h.next())E=E.value,e=pe(e,u,E.box,c,E.Xa);return e}function pe(e,t,n,i,u){var c=We.value(),d=e.subarray(n.start,n.start+n.size),h=tn(d),E=new Uint8Array(n.size+c.byteLength);for(E.set(d,0),d=tn(E),d.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),d.setUint32(n.size+16,u),xe(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=vs()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(i),i=e.next();!i.done;i=e.next())i=i.value,xe(u,i.start,i.size+E.byteLength);return E=tn(u,t.start),t=Ul(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function xe(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var We=new ia(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function dt(e,t,n,i,u,c,d){this.$=e,this.Aa=t,this.ja=n,this.ff=i===void 0?null:i,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=d===void 0?null:d,this.mimeType=this.codecs=null}dt.prototype.ac=function(){return this.Aa},dt.prototype.Yb=function(){return this.ja},dt.prototype.ed=function(){return this.g};function at(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}re("shaka.media.InitSegmentReference",dt),dt.prototype.getEndByte=dt.prototype.Yb,dt.prototype.getStartByte=dt.prototype.ac;function Je(e,t,n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe){for(A=A===void 0?[]:A,Y=Y===void 0?Bt:Y,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=i,this.ja=u,this.ca=c,this.timestampOffset=d,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=A,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=te===void 0?null:te,this.status=Y,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ve===void 0?null:ve,this.s=null,this.j=0,this.o=Pe===void 0?!1:Pe,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=Je.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=Gt},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?de("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function ht(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())ht(n.value,t)}re("shaka.media.SegmentReference",Je),Je.prototype.getSegmentData=Je.prototype.ed,Je.prototype.setSegmentData=Je.prototype.yi,Je.prototype.syncAgainst=Je.prototype.Ff,Je.prototype.offset=Je.prototype.offset,Je.prototype.getThumbnailSprite=Je.prototype.Bh,Je.prototype.setThumbnailSprite=Je.prototype.Eg,Je.prototype.hasByterangeOptimization=Je.prototype.Jh,Je.prototype.markAsByterangeOptimization=Je.prototype.lg,Je.prototype.isLastPartial=Je.prototype.Nh,Je.prototype.markAsLastPartial=Je.prototype.mg,Je.prototype.isPartial=Je.prototype.Oh,Je.prototype.markAsPartial=Je.prototype.ng,Je.prototype.isIndependent=Je.prototype.Mh,Je.prototype.markAsNonIndependent=Je.prototype.Zd,Je.prototype.isPreload=Je.prototype.Ph,Je.prototype.markAsPreload=Je.prototype.ef,Je.prototype.markAsUnavailable=Je.prototype.Vh,Je.prototype.getStatus=Je.prototype.bc,Je.prototype.getTileDuration=Je.prototype.Ch,Je.prototype.getTilesLayout=Je.prototype.Dh,Je.prototype.getEndByte=Je.prototype.Yb,Je.prototype.getStartByte=Je.prototype.ac,Je.prototype.getEndTime=Je.prototype.mh,Je.prototype.getStartTime=Je.prototype.getStartTime,Je.prototype.getUris=Je.prototype.$;var Bt=0,Gt=1;Je.Status={Hi:Bt,xj:Gt,$i:2};function kt(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ft(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(vt(e));for(var i=e.next();!i.done;i=e.next()){var u=i.value;i=u.start,u=u.end,u>t&&(n+=u-Math.max(i,t))}return n}function rt(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=vt(e).findIndex(function(i,u,c){return i.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function vt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Wt(){}function Nt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Yt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=Vr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var d=Vr(Qn(e.data,3+n,c)),h;return i==="-->"?h=Vr(Qn(e.data,4+n+c)):h=Ti(e.data.subarray(4+n+c)),t.mimeType=i,t.pictureType=u,t.description=d,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Vr(Qn(e.data,1,i)),e=Vr(Qn(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Vr(Qn(e.data,1,i)),e=Vr(Qn(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Vr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ti(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Vr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ti(e.data),t):null}function Dn(e){for(var t=0,n=[];Nt(e,t);){var i=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Yt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function xn(e,t){for(var n=t=t===void 0?0:t,i=0;Nt(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Jt(e,t+6),en(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}re("shaka.util.Id3Utils",Wt),Wt.getID3Data=xn,Wt.getID3Frames=Dn;function rr(e,t){var n=null,i=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(i=e.M()),{trackId:c,Wf:n,fh:i,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function It(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function $t(e,t,n){var i=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var d=0;d<i;d++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:i,vg:u,eh:c}}function Zt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:Yf(e)}}function vn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function Nn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new Dr(n,0).M(),e.g=8*i,e.i-=i)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function bt(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?i<<n|bt(e,n):i}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Lt(e){var t=Sn(e);return bt(e,t+1)-1}function On(e){return e=Lt(e),1&e?1+e>>>1:-1*(e>>>1)}function st(e){return bt(e,1)===1}function tt(e){return bt(e,8)}function qt(e,t){for(var n=8,i=8,u=0;u<t;u++)i!==0&&(i=On(e),i=(n+i+256)%256),n=i===0?n:i}function ze(e){return tt(e),Lt(e),Lt(e)}re("shaka.util.ExpGolomb",Nn);function Ve(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=Ve.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ai(e)),n=e.length-(e.length+t)%188,i=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),d=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(d){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,d={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var A=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,te=k;2<te;){var Y=c[G+1]+2;switch(c[G]){case 5:var ve=Rh(c.subarray(G+2,G+Y));d.audio==-1&&ve==="Opus"?(d.audio=A,d.audioCodec="opus"):d.video==-1&&ve==="AV01"&&(d.video=A,d.videoCodec="av1");break;case 106:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 122:d.audio==-1&&(d.audio=A,d.audioCodec="ec3");break;case 124:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 127:d.audioCodec=="opus"&&(ve=null,c[G+2]===128&&(ve=c[G+3]),ve!=null&&(this.F={channelCount:ve&15?ve&15:2,Zg:ve,sampleRate:48e3}))}G+=Y,te-=Y}break;case 15:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 17:d.audio==-1&&(d.audio=A,d.audioCodec="aac-loas");break;case 21:d.Sd==-1&&(d.Sd=A);break;case 27:d.video==-1&&(d.video=A,d.videoCodec="avc");break;case 3:case 4:d.audio==-1&&(d.audio=A,d.audioCodec="mp3");break;case 36:d.video==-1&&(d.video=A,d.videoCodec="hvc");break;case 129:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 132:case 135:d.audio==-1&&(d.audio=A,d.audioCodec="ec3")}h+=k+5}c=d,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),i&&!this.H&&(i=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:i=!0}}return this};function Dt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,i&64&&(i=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=sr(i,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var i=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var d=n||0,h=[],E=-1,A=0,k,G=0;G<u;++G){var te=e[G];if(te){if(2<=d&&te==1){if(t&&!h.length&&E==-1&&(te=G-(3<d?3:d),n&&te!=0&&(te=e.subarray(0,te),t.data=li(t.data,te),t.fullData=li(t.fullData,te))),0<=E?(d=G-((3<d?3:d)+1),h.push({data:e.subarray(E+c,d+1),fullData:e.subarray(E,d+1),type:A,time:i})):t&&!h.length&&(E=G-d,0<E&&(E=e.subarray(0,E),t.data=li(t.data,E),t.fullData=li(t.fullData,E))),G>=u-c)return h;G++,E=G,A=this.m=="hvc"?e[G]>>1&63:e[G]&31}d=0}else d++;G>=u-1&&0<=E&&0<=d&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:A,time:i})}return k&&h.push(k),!h.length&&t&&(t.data=li(t.data,e),t.fullData=li(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=li.apply(Oi,T(n.value)),(n=Dt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var i=li.apply(Oi,T(n.value)),u=Dt(this,i);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(i=u?u.data:i)&&(n=this.h.pop(),n.data=li(n.data,i),this.h.push(n))}e&&(this.h=this.h.sort(function(c,d){var h=(c.pts||0)-(d.pts||0);return(c.dts||0)-(d.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),i=n.next();!i.done;i=n.next()){var u=li.apply(Oi,T(i.value)),c=Dt(this,u);i=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!i||i.pts!=c.pts&&i.dts!=c.dts)?(this.g.length&&c.dts<(i.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(i=this.g.pop(),i.data=li(i.data,u),this.g.push(i))}if(e){var d;for(n=m(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.nalus=this.qf(i,d,void 0),i.nalus.length&&(d=i.nalus[i.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var A=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):dn(this)};function dn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(te){return te.type==7}),!e))return t;e=new Nn(e.data);var n=tt(e),i=tt(e),u=tt(e);if(En(e),zr.includes(n)){var c=Lt(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),st(e)){c=c!==3?8:12;for(var d=0;d<c;d++)st(e)&&(6>d?qt(e,16):qt(e,64))}}if(En(e),c=Lt(e),c===0)Lt(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Lt(e),d=0;d<c;d++)En(e);En(e),Gn(e,1),c=Lt(e),d=Lt(e);var h=bt(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,A=0,k=0,G=0;return st(e)&&(E=Lt(e),A=Lt(e),k=Lt(e),G=Lt(e)),t.height=String((2-h)*(d+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*A),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Ue){return Ue.type==33}),!e))return t;var n=new Nn(e.fullData,!0);tt(n),tt(n),bt(n,4);var i=bt(n,3);st(n);var u=bt(n,2),c=bt(n,1),d=bt(n,5),h=bt(n,32);e=tt(n);for(var E=tt(n),A=tt(n),k=tt(n),G=tt(n),te=tt(n),Y=tt(n),ve=[],Pe=[],Ne=0;Ne<i;Ne++)ve.push(st(n)),Pe.push(st(n));if(0<i)for(Ne=i;8>Ne;Ne++)bt(n,2);for(Ne=0;Ne<i;Ne++)ve[Ne]&&bt(n,88),Pe[Ne]&&tt(n);Lt(n),i=Lt(n),i==3&&bt(n,1),ve=Lt(n),Pe=Lt(n);var Ge=Ne=0,Te=0,$e=0;return st(n)&&(Ne+=Lt(n),Ge+=Lt(n),Te+=Lt(n),$e+=Lt(n)),t.width=String(ve-(Ne+Ge)*(i===1||i===2?2:1)),t.height=String(Pe-(Te+$e)*(i===1?2:1)),n=function(Ue){for(var mt=0,xt=0;32>xt;xt++)mt|=(Ue>>xt&1)<<31-xt;return mt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+d),u+="."+n.toString(16).toUpperCase(),u+="."+c+Y,te&&(u+="."+te.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),A&&(u+="."+A.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ai(e))}function Ai(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}re("shaka.util.TsParser",Ve),Ve.syncOffset=Ai,Ve.probe=Zr,Ve.prototype.getVideoInfo=Ve.prototype.We,Ve.prototype.getVideoResolution=Ve.prototype.Gh,Ve.prototype.getVideoNalus=Ve.prototype.Od,Ve.prototype.getCodecs=Ve.prototype.bd,Ve.prototype.getStartTime=Ve.prototype.getStartTime,Ve.prototype.getVideoData=Ve.prototype.xc,Ve.prototype.getAudioData=Ve.prototype.Fb,Ve.prototype.getMetadata=Ve.prototype.getMetadata,Ve.prototype.parseNalus=Ve.prototype.qf,Ve.prototype.parseAvcNalus=Ve.prototype.ai,Ve.prototype.parse=Ve.prototype.parse,Ve.prototype.clearData=Ve.prototype.clearData,Ve.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function oo(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ke("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ke("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ke("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ke(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}oo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Gs(e,t,n){var i=el,u=Tu;switch(t.mimeType){case"video/webm":i=tl;break;case"video/mp4":i=Ja}switch(n){case"DASH":u=Oo;break;case"HLS":u=qs}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(i),e.j||e.g.setStreamingFormat(u))}re("shaka.lcevc.Dec",oo),oo.prototype.release=oo.prototype.release;var el=0,tl=1,Ja=2,qs=0,Oo=1,Tu=-1;function Su(e,t,n,i){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=i||null,this.j={},this.o=new _t,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=fa(this,this.L),this.C=!1,this.I=new Xu(function(){return ed(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function fa(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=zm(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=zm(n),e.i.src=e.N,n}function Zc(e,t){var n,i,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1)return e.createSegmentIndex?x(Y,e.createSegmentIndex(),2):Y.u(2);if(!e.segmentIndex)return Y.return(!1);if(e.segmentIndex.getNumReferences()==0)return Y.return(!0);for(n=yi,i=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(d=c.value,h=d.mimeType||e.mimeType||"",E=d.codecs||e.codecs||"",A=h+":"+E,!i.has(A)){if(i.add(A),t==n.ma){if(k=Si(h,E),!Rl(k))return Y.return(!1)}else if(t==n.fa?E=Nl(E):t==n.S&&(E=Vu(E)),G=fm(e,h,E),te=ju(h,E),!Ot(G)&&!io(te))return Y.return(!1)}return Y.return(!0)})}g=Su.prototype,g.destroy=function(){return this.I.destroy()};function ed(e){var t,n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1){t=[];for(n in e.j)for(i=e.j[n],u=i[0],e.j[n]=i.slice(0,1),u&&t.push(u.p.catch(gm)),c=m(i.slice(1)),d=c.next();!d.done;d=c.next())h=d.value,h.p.reject(new gt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return x(A,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,$(A)})}g.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var u=this,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return c=yi,x(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=i,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,d=m(e.keys()),h=d.next();case 3:if(h.done){k.u(0);break}return E=h.value,A=e.get(E),x(k,nl(u,E,A,A.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=d.next(),k.u(3)}})};function nl(e,t,n,i){var u,c,d,h,E,A,k,G,te,Y,ve,Pe;return Oe(function(Ne){switch(Ne.g){case 1:return u=yi,c=Fe,d=O,x(Ne,Zc(n,t),2);case 2:if(d.call(c,Ne.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Si(n.mimeType,i),t==u.ma){es(e,h,e.B,n.external),Ne.u(0);break}if(E=e.A.forceTransmux,(!Ot(h)||!e.B&&gu.includes(h))&&(E=!0),A=ju(n.mimeType,i),!E){Ne.u(4);break}if(k=Ro(u.S,(i||"").split(",")),G=Ro(u.fa,(i||"").split(",")),!k||!G){Ne.u(5);break}return e.s=!0,x(Ne,nl(e,u.S,n,k),6);case 6:return x(Ne,nl(e,u.fa,n,G),7);case 7:return Ne.return();case 5:(te=io(A))&&(Y=te(),e.m[t]=Y,h=Y.convertCodecs(t,A));case 4:ve=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Pe=e.l.addSourceBuffer(ve)}catch(Ge){throw new gt(2,3,3015,Ge,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Pe.mode=i8),e.o.D(Pe,"error",function(){e.j[t][0].p.reject(new gt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Pe,"updateend",function(){return rl(e,t)}),e.h[t]=Pe,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,$(Ne)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function es(e,t,n,i){e.g||(e.g=new Us(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;i=i||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=i)}function Gc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Hs(e,t){return e.C||!Object.keys(e.h).length?e=null:t==vr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Pt(e,t){return e.C?null:t==vr?e.g.h:kt(Hn(e,t))}function yn(e,t,n){return e.C?0:t==vr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:vt(this.i.buffered),audio:this.C?[]:vt(Hn(this,"audio")),video:this.C?[]:vt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,i,u,c){var d=null,h=Qn(n);if(gu.includes(u))c=Dn(h),c.length&&i&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(d=Math.round(t.data)/1e3),e.ta([{cueTime:i.startTime,data:h,frames:c,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(u.includes("/mp4")&&i&&i.timestampOffset==0&&i.ca&&i.ca.timescale){var E=i.ca.timescale;if(!isNaN(E)){var A=0,k=!1;new kr().box("moof",yr).box("traf",yr).O("tfdt",function(G){A=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(d=A)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new Ve,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(d=t),h=h.getMetadata(),h.length&&e.ta(h,c,i?i.endTime:null));return d}function Tr(e,t,n,i,u,c,d,h,E,A){d=d===void 0?!1:d,h=h===void 0?!1:h,E=E===void 0?!1:E,A=A===void 0?!1:A;var k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(mt){switch(mt.g){case 1:if(k=yi,t!=k.ma){mt.u(2);break}if(!e.B){mt.u(3);break}return x(mt,e.ia,4);case 4:G=mt.h,e.g.s=G;case 3:return x(mt,CE(e.g,n,i?i.startTime:null,i?i.endTime:null,i?i.$()[0]:null),5);case 5:return mt.return();case 2:if(A||!e.s){mt.u(6);break}return x(mt,Tr(e,k.S,n,i,u,c,d,h,E,!0),7);case 7:return x(mt,Tr(e,k.fa,n,i,u,c,d,h,E,!0),8);case 8:return mt.return();case 6:if(!e.h[t])return mt.return();if(te=e.h[t].timestampOffset,Y=e.G[t],e.m[t]&&(Y=e.m[t].getOriginalMimeType()),i&&(ve=ur(e,t,n,i,Y,te),ve!=null&&(Pe=i.startTime-ve,Ne=Math.abs(te-Pe),(.001<=Ne||d||h)&&(!E||0<Pe||!te)&&(te=Pe,e.pa&&($i(e,t,function(){return td(e,t)}),$i(e,t,function(){return nd(e,t,te)}))),Ge=t==k.fa||!(k.fa in e.h),e.B&&Ge&&e.ia.resolve(te))),c&&t==k.fa&&(e.g||es(e,"application/cea-608",e.B,!1),e.H||(Te=Y.split(";",1)[0],e.H=new wt(Te)),i?($e=e.H.i(n),$e.length&&kf(e.g,$e,i.startTime,i.endTime,te)):e.H.init(n)),!e.m[t]){mt.u(9);break}return x(mt,e.m[t].transmux(n,u,i,e.l.duration,t),10);case 10:n=mt.h;case 9:return n=JB(e,n,i?i.startTime:null,t),i&&e.B&&t!=k.ma&&(d||h)&&(Ue=i.startTime,$i(e,t,function(){return td(e,t)}),$i(e,t,function(){return nd(e,t,Ue)})),x(mt,$i(e,t,function(){var xt=n;if(t=="video"&&e.T){var Ht=e.T;Ht.g&&Ht.g.appendBuffer(xt,"video",Ht.o,-te)}e.h[t].appendBuffer(xt)}),11);case 11:$(mt)}})}function Ir(e,t){var n=Pt(e,"video")||0;Lf(e.g,t,n)}function fr(e){e.g&&Lf(e.g,"",0)}g.remove=function(e,t,n){var i=this,u;return Oe(function(c){return c.g==1?(u=yi,e==u.ma?x(c,i.g.remove(t,n),0):x(c,$i(i,e,function(){return Vs(i,e,t,n)}),4)):i.s?x(c,$i(i,u.S,function(){return Vs(i,u.S,t,n)}),0):c.u(0)})};function ri(e,t){var n;return Oe(function(i){return i.g==1?(n=yi,t==n.ma?e.g?x(i,e.g.remove(0,1/0),0):i.return():x(i,$i(e,t,function(){return Vs(e,t,0,e.l.duration)}),4)):e.s?x(i,$i(e,n.S,function(){return Vs(e,n.S,0,e.l.duration)}),0):i.u(0)})}g.flush=function(e){var t=this,n;return Oe(function(i){return i.g==1?(n=yi,e==n.ma?i.return():x(i,$i(t,e,function(){t.i.currentTime-=.001,rl(t,e)}),2)):t.s?x(i,$i(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,rl(t,u)}),0):i.u(0)})};function Qr(e,t,n,i,u,c,d,h,E){var A,k,G;return Oe(function(te){return te.g==1?(A=yi,t==A.ma?(c||(e.g.s=n),Ph(e.g,i,u),te.return()):(k=[],x(te,n8(e,t,d,h,E),2))):(G=te.h,G||(k.push($i(e,t,function(){return td(e,t)})),e.s&&k.push($i(e,A.S,function(){return td(e,A.S)}))),c||(k.push($i(e,t,function(){return nd(e,t,n)})),e.s&&k.push($i(e,A.S,function(){return nd(e,A.S,n)}))),k.push($i(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=i,rl(e,t)})),e.s&&k.push($i(e,A.S,function(){var Y=A.S;e.h[Y].appendWindowStart=0,e.h[Y].appendWindowEnd=u,e.h[Y].appendWindowStart=i,rl(e,Y)})),x(te,Promise.all(k),0))})}function Ks(e,t,n){var i;return Oe(function(u){return u.g==1?(i=yi,t==i.ma?u.return():(t==i.fa&&(e.ia=new Rr),$i(e,t,function(){return td(e,t)}),e.s&&$i(e,i.S,function(){return td(e,i.S)}),x(u,$i(e,t,function(){return nd(e,t,n)}),2))):e.s?x(u,$i(e,i.S,function(){return nd(e,i.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return Oe(function(n){return x(n,VE(t,function(){Gc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return Oe(function(n){return x(n,VE(t,function(){if(e<t.l.duration)for(var i in t.h){var u={start:function(){},p:new Rr};t.j[i].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function Vs(e,t,n,i){i<=n?rl(e,t):e.h[t].remove(n,i)}function td(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,rl(e,t)}function nd(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,rl(e,t)}function rl(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),zE(e,t))}}function $i(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&lR(e,t),n.p}function VE(e,t){var n,i,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:jr(e.I),n=[],i={};for(u in e.h)i.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(i),p:i.Mc},e.j[u].push(c),n.push(i.Mc),e.j[u].length==1&&c.start(),i={Mc:i.Mc};return ce(A,2),x(A,Promise.all(n),4);case 4:he(A,3);break;case 2:throw d=Ce(A),d;case 3:return ce(A,5,6),x(A,t(),6);case 6:Xe(A);for(h in e.h)zE(e,h);Ae(A,0);break;case 5:throw E=Ce(A),new gt(2,3,3015,E,e.i.error||"No error in the media element")}})}function zE(e,t){e.j[t].shift(),lR(e,t)}function lR(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new gt(2,3,3017,t)):n.p.reject(new gt(2,3,3015,i,e.i.error||"No error in the media element")),zE(e,t)}}function JB(e,t,n,i){var u=e.qa[i];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(Ka()||vs()||Yr("SOPOpenBrowser"))&&Of(e.G[i])=="mp4"&&(t=Re(t)),t}function e8(e,t,n,i){return $i(e,t,function(){t!==vr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),i&&(e.m[t]=i),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),rl(e,t))})}function t8(e,t){var n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et;return Oe(function(jt){switch(jt.g){case 1:n=yi,e.C=!0,e.s=!1,i=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(jt,2),e.o.ib(),d=[];for(h in e.m)d.push(e.m[h].destroy());for(E in e.j)for(A=e.j[E],k=A[0],e.j[E]=A.slice(0,1),k&&d.push(k.p.catch(gm)),G=m(A.slice(1)),te=G.next();!te.done;te=G.next())Y=te.value,Y.p.reject(new gt(2,7,7003,void 0));for(ve in e.h){Pe=e.h[ve];try{e.l.removeSourceBuffer(Pe)}catch(cn){}}return x(jt,Promise.all(d),4);case 4:return e.m={},e.h={},Ne=e.l.duration,e.L=new Rr,e.l=fa(e,e.L),x(jt,e.L,5);case 5:!isNaN(Ne)&&Ne?e.l.duration=Ne:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),Ge=new Rr,Te=e.l.sourceBuffers,$e=t.size,Ue=0,mt=function(){Ue++,Ue===$e&&(Ge.resolve(),e.o.Kb(Te,"addsourcebuffer",mt))},e.o.D(Te,"addsourcebuffer",mt),xt=m(t.keys()),Ht=xt.next();case 6:return Ht.done?(e.i.currentTime=i,x(jt,Ge,2)):(Ut=Ht.value,Et=t.get(Ut),x(jt,nl(e,Ut,Et,Et.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Ut]=[],Ht=xt.next(),jt.u(6);break;case 2:Xe(jt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Ae(jt,0)}})}function cR(e,t){return VE(e,function(){return t8(e,t)})}function n8(e,t,n,i,u){var c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){return Ue.g==1?(c=yi,t==c.ma||(d=Wa(Po(e.G[t])),h=Ra(e.G[t]),A=!1,k=Si(n,i),G=e.A.forceTransmux,(!Ot(k)||!e.B&&gu.includes(k))&&(G=!0),G&&(te=ju(n,i),Y=io(te))&&(E=Y(),ve=Ro(c.S,(i||"").split(",")),Pe=Ro(c.fa,(i||"").split(",")),ve&&Pe?(A=!0,Ne=Pe,t==c.S&&(Ne=ve),k=E.convertCodecs(t,ju(n,Ne))):k=E.convertCodecs(t,te)),Ge=Wa(Po(k)),Te=Ra(k),d===Ge&&h===Te)?Ue.return(!1):($e=!0,(e.s||A&&E&&!e.m[t])&&($e=!1),$e&&e.A.codecSwitchingStrategy==="smooth"&&Un()?x(Ue,e8(e,t,k,E),3):(E&&E.destroy(),x(Ue,cR(e,u),3)))):Ue.return(!0)})}function r8(e,t,n,i){if(t==vr)var u=!1;else{u=Wa(Po(e.G[t]));var c=Ra(e.G[t]),d=Si(n,i),h=e.A.forceTransmux;(!Ot(d)||!e.B&&gu.includes(d))&&(h=!0),n=ju(n,i),h&&(h=io(n))&&(h=h(),d=h.convertCodecs(t,n),h.destroy()),t=Wa(Po(d)),d=Ra(d),u=u!==t||c!==d}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var zm=p.URL.createObjectURL,i8="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(i,u){return Math.max(i,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,i<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=i-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},re("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function fR(e,t,n){this.j=n,this.l=e,this.s=dR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}fR.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function o8(e,t){e.i=t}function a8(e){this.g=e}function dR(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(vt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function YE(e,t,n,i,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new _t,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=i,this.o=!1,this.l.D(e,"waiting",function(){return WE(c)}),this.m=new pr(function(){WE(c)}).$a(this.s.gapJumpTimerTime)}YE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},YE.prototype.mf=function(){this.o=!0,WE(this)};function WE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,i=dR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=i)&&(t.m=c,t.g=u,t.s=i,t.h=!1),u=c-t.m,(i=u>=t.A&&i&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=rt(n,t,e.s.gapDetectionThreshold),i==null||i==0&&!e.o||(u=n.start(i),u>=e.B.pb()||.001>u-t||(i!=0&&n.end(i-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function rd(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=s8.value().get(t),n.na(e,t,i))}var s8=new ia(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function hR(e,t,n,i){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=i()),u.l},this.o=!1,this.h=new _t,this.i=new vR(e),rd(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){gR(u,u.j())})}hR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function $E(e){return e.o?e.g.currentTime:e.j()}function pR(e,t){0<e.g.readyState?yR(e.i,t):rd(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){gR(e,e.j())})}function gR(e,t){.001>Math.abs(e.g.currentTime-t)?mR(e):(e.h.na(e.g,"seeking",function(){mR(e)}),yR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function mR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function vR(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}vR.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function yR(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function ER(e){this.g=e,this.j=!1,this.h=null,this.i=new _t}g=ER.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;rd(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function _R(e,t,n,i,u,c){var d=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=u8(e,n,c),this.j=new YE(e,t.presentationTimeline,n,this.o,c),this.h=new hR(e,function(){e:{var h=d.j;h.j=!0,h.o=!1;var E=$E(d.h);if(h=SR(d,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!d.s||d.s<E-1)){d.s=E,pR(d.h,h),h=void 0;break e}d.A(),h=void 0}return h},function(h){var E=d.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=i;return h==null?h=1/0>d.g.getDuration()?d.g.$b():d.g.pb():0>h&&(h=d.g.pb()+h),TR(d,wR(d,h))}),this.m=new pr(function(){if(d.i.readyState!=0&&!d.i.paused){var h=$E(d.h),E=d.g.$b(),A=d.g.pb();3>A-E&&(E=A-3),h<E&&(h=SR(d,h),d.i.currentTime=h)}})}g=_R.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){pR(this.h,e)},g.Dd=function(){var e=$E(this.h);return 0<this.i.readyState&&!this.i.paused?wR(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function TR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function SR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),i=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),d=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(i);return n=e.g.dd(n+i),t>=d?TR(e,t):t>c?c:t<u?Ft(e.i.buffered,E)?E:n:t>=h||Ft(e.i.buffered,t)?t:n}function wR(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function u8(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return t=new fR(new a8(e),t.stallThreshold,n),o8(t,function(){i?e.currentTime+=i:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],u=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Je(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var i=t();i?n.g.push.apply(n.g,T(i)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;i--;var u=this.get(i+1),c=-1;if(u&&0<u.g.length)for(var d=u.g.length-1;0<=d;--d){var h=u.g[d];if(e>=h.startTime&&e<h.endTime){if(!t){for(;d&&!h.l;)d--,h=u.g[d];if(!h.l)return de("No independent partial segment found!"),null}i++,c=d-1;break}}return new Na(this,i,c,n)};function XE(e,t,n){return e=new Je(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}re("shaka.media.SegmentIndex",wr),wr.forSingleSegment=XE,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function Na(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}Na.prototype.ie=function(e){this.reverse=e},Na.prototype.dh=function(){return this.h},Na.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Na.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},re("shaka.media.SegmentIterator",Na),Na.prototype.next=Na.prototype.next,Na.prototype.current=Na.prototype.current,Na.prototype.currentPosition=Na.prototype.dh,Na.prototype.setReverse=Na.prototype.ie;function Ei(){wr.call(this,[]),this.h=[]}z(Ei,wr),g=Ei.prototype,g.clone=function(){var e=new Ei;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var u=i.find(e);if(u!=null)return u+t;t+=i.getNumEvicted()+i.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var u=i.get(e-t);if(u)return u;u=i.getNumReferences(),t+=i.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},re("shaka.media.MetaSegmentIndex",Ei),Ei.prototype.updateEvery=Ei.prototype.ke,Ei.prototype.fit=Ei.prototype.sc,Ei.prototype.mergeAndEvict=Ei.prototype.kd,Ei.prototype.evict=Ei.prototype.La,Ei.prototype.merge=Ei.prototype.ae,Ei.prototype.offset=Ei.prototype.offset,Ei.prototype.get=Ei.prototype.get,Ei.prototype.find=Ei.prototype.find,Ei.prototype.forEachTopLevelReference=Ei.prototype.tc,Ei.prototype.release=Ei.prototype.release;function ap(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}ap.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},ap.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},ap.prototype.Xb=function(){return this.g.Xb()};function AR(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){IR(t,!1)}).$a(.25)}AR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function IR(e,t){for(var n=m(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function l8(){this.g=null,this.h=[]}function QE(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function c8(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],i=m(e.h),u=i.next();!u.done;u=i.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function f8(){this.i=this.h=null,this.g=[]}function JE(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Ym(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new l8,this.h=new f8}function e_(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function d8(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function sp(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var i=t.next().value;if(n&&(i=t.next().value),i){for(;e.g.size<e.m&&i!=null&&(n=!0,i.preload&&i.ja!=null&&(n=!1),i.bc()==2&&(n=!1),n&&i.ca&&CR(e,i.ca),n&&!e.g.has(i)&&(n=new n_(e.j),xR(n,i,e.h),e.g.set(i,n)),e.l=i.startTime,!(e.h.fastSwitching&&i.md&&i.Wd));)i=t.next().value;t_(e)}}}function CR(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(i){return at(i,t)})){var n=new n_(e.j);xR(n,t,e.h),e.i.set(t,n)}}function bR(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&up(e,n)}function il(e){bR(e,e.g),bR(e,e.i),e.l=0}e_.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&up(this,i);t&&t_(this)};function t_(e){for(var t=Array.from(e.g.keys()),n={},i=m(e.i.keys()),u=i.next();!u.done;n={wd:n.wd},u=i.next())n.wd=u.value,t.some(function(c){return function(d){return at(d.ca,c.wd)}}(n))||up(e,n.wd)}function RR(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var i=n.pop();i&&up(e,i)}t_(e)}function h8(e,t){t&&t!==e.h&&(il(e),e.h=t)}function up(e,t){var n=e.g;t instanceof dt&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function n_(e){this.g=e,this.fe=this.Ef=null}function xR(e,t,n){var i=new Uint8Array(0);e.fe=e.g(t,n,function(u){return Oe(function(c){if(c.g==1)return 0<i.byteLength?i=li(i,u):i=u,e.Ef?x(c,e.Ef(i),3):c.u(0);i=new Uint8Array(0),$(c)})})}n_.prototype.abort=function(){this.fe&&this.fe.abort()};function r_(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),i=m(t.g),u=i.next();!u.done;u=i.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}z(r_,Sr),r_.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function Wm(e){Sr.call(this),this.g=new Map,this.h=e}z(Wm,Sr),Wm.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function p8(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function g8(e,t,n){var i=p8(e,t.contentType);m8(e,i),e={ff:t,position:n},i=i.nd,t=i.findIndex(function(u){return u.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}Wm.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var i=n.nd,u=i.length-1;0<=u;u--){var c=i[u];if(c.position<=e){i=c.ff;break e}}i=null}if((u=i)&&(u=n.Uf,u=!(u===i||u&&i&&u.bandwidth==i.bandwidth&&u.audioSamplingRate==i.audioSamplingRate&&u.codecs==i.codecs&&u.contentType==i.contentType&&u.frameRate==i.frameRate&&u.height==i.height&&u.mimeType==i.mimeType&&u.channelsCount==i.channelsCount&&u.pixelAspectRatio==i.pixelAspectRatio&&u.width==i.width)),u)e:{if(u=e,c=i.contentType,(c=this.h()[c])&&0<c.length){var d=c[c.length-1].end;if(u>=c[0].start&&u<d){u=!0;break e}}u=!1}u&&(n.Uf=i,JSON.stringify(i),n=new Wn("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}};function m8(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,d){return!(c.position<=n&&d+1<u.length&&u[d+1].position<=n||c.position>=i)})}else t.nd=[]}function lp(e,t,n,i,u){return e=Li(e,i,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function NR(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new Xu(function(){return v8(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=NR.prototype,g.destroy=function(){return this.l.destroy()};function v8(e){var t,n,i,u,c,d,h;return Oe(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),i=n.next();!i.done;i=n.next())u=i.value,cp(u),t.push(fp(u));for(c=m(e.o.values()),d=c.next();!d.done;d=c.next())h=d.value,il(h);return x(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,$(E)})}g.configure=function(e){if(this.h=e,this.I=new Kh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(il(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,il(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(vr))&&t.W&&(il(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(il(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(RR(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=i_(this,n.stream));e.disableAudioPrefetch||S8(this)},g.start=function(e){var t=this;return Oe(function(n){if(n.g==1)return x(n,T8(t,e||new Map),2);jr(t.l),t.C=!0,$(n)})};function y8(e,t){var n,i,u,c,d,h;Oe(function(E){switch(E.g){case 1:return n=yi,e.H++,i=e.H,ce(E,2),x(E,ri(e.g.V,n.ma),4);case 4:he(E,3);break;case 2:u=Ce(E),e.g&&e.g.onError(u);case 3:c=Si(t.mimeType,t.codecs),es(e.g.V,c,e.m.sequenceMode,t.external),d=e.g.V.F,(d.isTextVisible()||e.h.alwaysStreamText)&&e.H==i&&(h=PR(e,t),e.i.set(n.ma,h),Ss(e,h,0)),$(E)}})}function E8(e){var t=e.i.get(vr);t&&(cp(t),fp(t).catch(function(){}),e.i.delete(vr)),e.s=null}function MR(e,t){var n=0>e.g.eb(),i=e.i.get("video");i&&i.Z&&i.Z.ie(n),(i=e.i.get("audio"))&&i.Z&&i.Z.ie(n),(i=e.i.get(vr))&&i.Z&&i.Z.ie(n),(n=e.i.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.jc&&(id(e,t,!1,0,!1),n.jc=i):(t=n.jc)&&(n.jc=null,id(e,t,!0,0,!1)))}function DR(e,t,n,i,u,c){n=n===void 0?!1:n,i=i===void 0?0:i,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&id(e,t.video,n,i,u,c),t.audio&&id(e,t.audio,n,i,u,c))}function $m(e,t){Oe(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):x(n,t.createSegmentIndex(),2):n.return();id(e,t,!0,0,!1),$(n)})}function id(e,t,n,i,u,c){var d=e.i.get(t.type);d||t.type!=vr?d&&(d.jc&&(t.trickModeVideo?(d.jc=t,t=t.trickModeVideo):d.jc=null),d.stream!=t||u)&&(e.o.has(t)?d.W=e.o.get(t):d.W&&h8(d.W,t),t.type==vr&&(u=Si(t.mimeType,t.codecs),es(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(d.stream)||d.stream.closeSegmentIndex&&d.stream.closeSegmentIndex(),d.stream=t,d.Z=null,d.Of=!!c,n&&(d.Xc?d.le=!0:d.Qa?(d.Lb=!0,d.Id=i,d.le=!0):(cp(d),u_(e,d,!0,i).catch(function(h){e.g&&e.g.onError(h)}))),_8(e,d).catch(function(h){e.g&&e.g.onError(h)})):y8(e,t)}function _8(e,t){var n,i;return Oe(function(u){if(u.g==1)return t.Ya?(n=t.stream,i=t.Ya,n.segmentIndex?u.u(2):x(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=i||t.stream!=n)return u.return();var c=e.g.Ld(),d=Pt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(d||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),$(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.i.get(i);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:i==vr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,i),u=Ft(u,e)),u||((Pt(this.g.V,i)!=null||n.Qa)&&Xm(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),i===vr&&(i=this.g.V,i.H&&i.H.h()),n.od=!0)}};function Xm(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Hs(e.g.V,t.type)==null?t.ub==null&&Ss(e,t,0):(cp(t),u_(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function T8(e,t){var n,i,u,c,d,h,E,A,k,G;return Oe(function(te){if(te.g==1){if(n=yi,!e.j)throw new gt(2,5,5006);return i=new Map,u=new Set,e.j.audio&&(i.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(i.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(i.set(n.ma,e.s),u.add(e.s)),c=e.g.V,x(te,c.init(i,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),d=m(i.keys()),h=d.next();!h.done;h=d.next())E=h.value,A=i.get(E),e.i.has(E)||(k=PR(e,A),t.has(A.id)&&(G=t.get(A.id),d8(G,function(Y,ve,Pe){return Qm(Y,ve,Pe||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),Ss(e,k,0));$(te)})}function PR(e,t){return{stream:t,type:t.type,Z:null,W:i_(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function i_(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===vr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===vr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new e_(e.h.segmentPrefetchLimit,t,function(i,u,c){return Qm(i,u,c||null,e.h.retryParameters,e.g.zb)}):null}function S8(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,i={},u=m(e.m.variants),c=u.next();!c.done;i={Fa:i.Fa},c=u.next())if(i.Fa=c.value,i.Fa.audio)if(e.o.has(i.Fa.audio)){if(c=e.o.get(i.Fa.audio),RR(c,t),!(0<t&&n.some(function(h){return function(E){return Gu(h.Fa.audio.language,E)}}(i)))){var d=e.i.get(i.Fa.audio.type);c!==(d&&d.W)&&il(c),e.o.delete(i.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return Gu(h.Fa.audio.language,E)}}(i))||!(c=i_(e,i.Fa.audio))||(i.Fa.audio.segmentIndex||i.Fa.audio.createSegmentIndex(),e.o.set(i.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function w8(e,t){var n,i,u,c,d;return Oe(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return x(h,u_(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,x(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||Ss(e,t,0),h.return();case 4:ce(h,6),i=A8(e,t),i!=null&&(Ss(e,t,i),t.gd=!1),he(h,7);break;case 6:return u=Ce(h),x(h,OR(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return x(h,e.g.V.endOfStream(),10);case 10:jr(e.l),d=e.g.V.getDuration(),d!=0&&d<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(d),$(h)}})}function A8(e,t){if(a_(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==vr&&fr(e.g.V),!e.g.V.ea&&t.type!=vr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var i=m(e.o.keys()),u=i.next();!u.done;u=i.next())u=e.o.get(u.value),u.La(n,!0),sp(u,n);i=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.m.presentationTimeline.getDuration()-i,h=Pt(e.g.V,t.type);if(1e-6>d&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(vr))&&a_(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=I8(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,d=Array.from(e.i.values()),d=m(d),h=d.next();!h.done;h=d.next())h=h.value,a_(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return i>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),sp(t.W,u.startTime)),C8(e,t,n,u).catch(function(){}),null)}function I8(e,t,n,i){if(t.Z)return t.Z.current();if(t.Oa||i)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:i,!1,0>e.g.eb()),t.Z&&t.Z.next().value;i=e.h.inaccurateManifestTolerance;var u=Math.max(n-i,0);e=0>e.g.eb();var c=null;return i&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function C8(e,t,n,i){var u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(u=yi,c=t.stream,d=t.Z,t.Qa=!0,ce(Ue,2),i.bc()==2)throw new gt(1,1,1011);return x(Ue,N8(e,t,i),4);case 4:return jr(e.l),e.A?Ue.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||i.m)?(G=new Uint8Array(0),Y=te=!1,Pe=function(mt){var xt,Ht,Ut;return Oe(function(Et){switch(Et.g){case 1:if(te||(Y=!0,jr(e.l),e.A))return Et.return();if(ce(Et,2),G=R8(G,mt),xt=!1,Ht=0,new kr().box("mdat",function(jt){Ht=jt.size+jt.start,xt=!0}).parse(G,!1,!0),!xt){Et.u(4);break}return Ut=G.subarray(0,Ht),G=G.subarray(Ht),x(Et,o_(e,t,n,c,i,Ut,!0),5);case 5:t.W&&t.Z&&sp(t.W,i.startTime,!0);case 4:he(Et,0);break;case 2:ve=Ce(Et),$(Et)}})},x(Ue,s_(e,t,i,Pe),9)):(A=s_(e,t,i),x(Ue,A,7)));case 7:return k=Ue.h,jr(e.l),e.A?Ue.return():(jr(e.l),t.Lb?(t.Qa=!1,Ss(e,t,0),Ue.return()):x(Ue,o_(e,t,n,c,i,k),6));case 9:if(Ne=Ue.h,ve)throw ve;if(Y){Ue.u(10);break}return te=!0,jr(e.l),e.A?Ue.return():t.Lb?(t.Qa=!1,Ss(e,t,0),Ue.return()):x(Ue,o_(e,t,n,c,i,Ne),10);case 10:t.W&&t.Z&&sp(t.W,i.startTime,!0);case 6:if(jr(e.l),e.A)return Ue.return();t.Oa=i,d.next(),t.Qa=!1,t.uf=!1,Ge=e.g.V.ob(),Te=Ge[t.type],JSON.stringify(Te),t.Lb||e.g.mf(i,t.stream),Ss(e,t,0),he(Ue,0);break;case 2:if($e=Ce(Ue),jr(e.l,$e),e.A)return Ue.return();if(t.Qa=!1,$e.code==7001)t.Qa=!1,cp(t),Ss(e,t,0),Ue.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Ue.u(0);else if($e.code==3017)x8(e,t,$e),Ue.u(0);else return t.gd=!0,$e.category==1&&t.W&&up(t.W,i),$e.severity=2,x(Ue,OR(e,t,$e),0)}})}function b8(e,t,n){var i,u,c,d,h;return Oe(function(E){if(E.g==1)return i=t,i.cryptoKey?E.u(2):x(E,i.fetchKey(),3);if(u=i.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=i.firstMediaSequenceNumber+n,d=u.byteLength-1;0<=d;d--)u[d]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,i.cryptoKey,e))})}function R8(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function x8(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var i=Math.round(100*e.B);if(20<i)e.B-=.2;else if(4<i)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}Ss(e,t,4)}function N8(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y,ve,Pe;return Oe(function(Ne){switch(Ne.g){case 1:if(i=yi,u=[],c=Math.max(0,n.appendWindowStart-.1),d=n.appendWindowEnd+.01,h=Wa(t.stream.codecs),E=Ra(t.stream.mimeType),A=n.timestampOffset,A==t.cf&&c==t.af&&d==t.$e&&h==t.bf&&E==t.kg){Ne.u(2);break}if(k=t.bf&&t.kg&&r8(e.g.V,t.type,E,h),!k){Ne.u(3);break}if(G=null,t.type===i.fa?G=e.i.get(i.S):t.type===i.S&&(G=e.i.get(i.fa)),!G){Ne.u(3);break}return x(Ne,fp(G).catch(function(){}),5);case 5:G.ec=null,Xm(e,G);case 3:return te=function(){var Ge,Te,$e;return Oe(function(Ue){if(Ue.g==1)return Ge=new Map,e.j.audio&&Ge.set(i.S,e.j.audio),e.j.video&&Ge.set(i.fa,e.j.video),ce(Ue,2),t.af=c,t.$e=d,t.bf=h,t.kg=E,t.cf=A,Te=e.m.sequenceMode||e.m.type=="HLS",x(Ue,Qr(e.g.V,t.type,A,c,d,Te,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,Ge),4);if(Ue.g!=2)return he(Ue,0);throw $e=Ce(Ue),t.af=null,t.$e=null,t.bf=null,t.cf=null,$e})},x(Ne,te(),2);case 2:return at(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(Y=s_(e,t,n.ca),ve=function(){var Ge,Te,$e,Ue,mt,xt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:return ce(Ut,2),x(Ut,Y,4);case 4:return Ge=Ut.h,jr(e.l),Te=null,$e=new Map,Ue={projection:null,hfov:null},mt=new kr,mt.box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(Et){Te=It(Et.reader,Et.version).timescale}).box("hdlr",function(Et){switch(Et=Et.reader,Et.skip(8),Et.hc()){case"soun":$e.set(i.S,Te);break;case"vide":$e.set(i.fa,Te)}Te=null}).box("minf",yr).box("stbl",yr).O("stsd",yu).box("encv",wi).box("avc1",wi).box("avc3",wi).box("hev1",wi).box("hvc1",wi).box("dvav",wi).box("dva1",wi).box("dvh1",wi).box("dvhe",wi).box("vexu",yr).box("proj",yr).O("prji",function(Et){Et=Et.reader.hc(),Ue.projection=Et}).box("hfov",function(Et){Et=Et.reader.M()/1e3,Ue.hfov=Et}).parse(Ge),P8(e,Ue),$e.has(t.type)?n.ca.timescale=$e.get(t.type):Te!=null&&(n.ca.timescale=Te),xt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,x(Ut,e.g.Qf(t.type,Ge),5);case 5:return x(Ut,Tr(e.g.V,t.type,Ge,null,t.stream,xt),6);case 6:he(Ut,0);break;case 2:throw Ht=Ce(Ut),t.ec=null,Ht}})},e.g.Yh(n.startTime,n.ca),u.push(ve()))),e.m.sequenceMode&&(Pe=t.Oa?t.Oa.j:null,n.j!=Pe&&u.push(Ks(e.g.V,t.type,n.startTime))),x(Ne,Promise.all(u),0)}})}function o_(e,t,n,i,u,c,d){d=d===void 0?!1:d;var h,E,A,k,G,te;return Oe(function(Y){switch(Y.g){case 1:return h=i.closedCaptions&&0<i.closedCaptions.size,A=i.emsgSchemeIdUris!=null&&0<i.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(A||k)&&(E=new kr),A&&E.O("emsg",function(ve){var Pe=i.emsgSchemeIdUris;if(ve.version===0)var Ne=ve.reader.hc(),Ge=ve.reader.hc(),Te=ve.reader.M(),$e=ve.reader.M(),Ue=ve.reader.M(),mt=ve.reader.M(),xt=u.startTime+$e/Te;else Te=ve.reader.M(),xt=ve.reader.Cc()/Te+u.timestampOffset,$e=xt-u.startTime,Ue=ve.reader.M(),mt=ve.reader.M(),Ne=ve.reader.hc(),Ge=ve.reader.hc();ve=ve.reader.sb(ve.reader.getLength()-ve.reader.wa()),(Pe&&Pe.includes(Ne)||e.h.dispatchAllEmsgBoxes)&&(Ne=="urn:mpeg:dash:event:2012"?e.g.Zh():(Pe=new Map().set("detail",{startTime:xt,endTime:xt+Ue/Te,schemeIdUri:Ne,value:Ge,timescale:Te,presentationTimeDelta:$e,eventDuration:Ue,id:mt,messageData:ve}),Pe=new Wn("emsg",Pe),Pe.cancelable=!0,e.g.onEvent(Pe),Pe.defaultPrevented||Ne!="https://aomedia.org/emsg/ID3"&&Ne!="https://developer.apple.com/streaming/emsg-id3"||(Ne=Dn(ve),Ne.length&&u&&e.g.$h([{cueTime:u.startTime,data:ve,frames:Ne,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ve){if(!e.F&&u.ca.timescale){var Pe=ve.reader,Ne=ve.version;Pe.M(),ve=Pe.M();var Ge=Pe.M();ve=1e3*ve+Ge/Math.pow(2,32)*1e3,Ne===0?Pe=Pe.M():(Ne=Pe.M(),Pe=Pe.M(),Pe=Ne*Math.pow(2,32)+Pe),ve=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ve).getTime(),Pe=new Map().set("detail",{wallClockTime:ve,programStartDate:new Date(ve-Pe/u.ca.timescale*1e3)}),Pe=new Wn("prft",Pe),e.g.onEvent(Pe),e.F=!0}}),(A||k)&&E.parse(c),x(Y,M8(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,te=t.Of,t.Of=!1,x(Y,e.g.Qf(t.type,c),3);case 3:return x(Y,Tr(e.g.V,t.type,c,u,i,h,G,te,d),4);case 4:jr(e.l),$(Y)}})}function M8(e,t,n){var i,u,c,d;return Oe(function(h){if(h.g==1)return i=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Hs(e.g.V,t.type),u==null?h.return():(c=n-u,d=c-i,d<=e.h.evictionGoal?h.return():x(h,e.g.V.remove(t.type,u,u+d),2));jr(e.l),$(h)})}function a_(e){return e&&e.type==vr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function s_(e,t,n,i){var u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:if(u=n.ed())return A.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof dt&&(G=k.i),G.has(n)?(k=G.get(n),i&&(k.Ef=i),c=k.fe):c=null}return c||(c=Qm(n,t.stream,i||null,e.h.retryParameters,e.g.zb)),d=0,t.Z&&(d=t.Z.h),t.Ya=c,x(A,c.promise,2);case 2:if(h=A.h,t.Ya=null,E=h.data,!n.aesKey){A.u(3);break}return x(A,b8(E,n.aesKey,d),4);case 4:E=A.h;case 3:return A.return(E)}})}function Qm(e,t,n,i,u){var c=e instanceof Je?e:void 0,d=c?1:0;return e=lp(e.$(),e.Aa,e.ja,i,n),e.contentType=t.type,u.request(Xa,e,{type:d,stream:t,segment:c})}function u_(e,t,n,i){var u,c;return Oe(function(d){if(d.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&il(t.W),i?(u=e.g.Ld(),c=e.g.V.getDuration(),x(d,e.g.V.remove(t.type,u+i,c),3)):x(d,ri(e.g.V,t.type),4);if(d.g!=3)return jr(e.l),n?x(d,e.g.V.flush(t.type),3):d.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||Ss(e,t,0),$(d)})}function Ss(e,t,n){var i=t.type;(i!=vr||e.i.has(i))&&(t.ub=new Ls(function(){var u;return Oe(function(c){if(c.g==1)return ce(c,2),x(c,w8(e,t),4);if(c.g!=2)return he(c,0);u=Ce(c),e.g&&e.g.onError(u),$(c)})}).X(n))}function cp(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function fp(e){return Oe(function(t){return e.Ya?x(t,e.Ya.abort(),0):t.u(0)})}function OR(e,t,n){var i;return Oe(function(u){if(u.g==1)return x(u,Vh(e.I),2);jr(e.l),i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<i&&(n.handled=e.g.Jd(t.stream,i),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),$(u)})}function D8(e){var t,n,i,u,c,d;return Oe(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,i=yi,(u=e.i.get(i.S))&&(u.ec=null,Xm(e,u),fp(u).catch(function(){})),(c=e.i.get(i.fa))&&(c.ec=null,Xm(e,c),fp(c).catch(function(){})),d=new Map,e.j.audio&&d.set(i.S,e.j.audio),e.j.video&&d.set(i.fa,e.j.video),x(h,cR(e.g.V,d),2))):h.return(!0)})}function P8(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function l_(){}function c_(e,t,n,i,u){var c=u in i,d=!0,h;for(h in t){var E=u+"."+h,A=c?i[u]:n[h];c||h in n?t[h]===void 0?A===void 0||c?delete e[h]:e[h]=$a(A):A.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=$a(A)),E=c_(e[h],t[h],A,i,E),d=d&&E):typeof t[h]!=typeof A||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=A.constructor?(de("Invalid config, wrong type for "+E),d=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&Ke("Unexpected number of arguments for "+E),e[h]=t[h]):(de("Invalid config, unrecognized key "+E),d=!1)}return d}function Jm(e,t){for(var n={},i=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),i[c]={},i=i[c],c=u+1),u+=1;return i[e.substring(c).replace(/\\\./g,".")]=t,n}function od(e,t){return e&&t}re("shaka.util.ConfigUtils",l_),l_.convertToConfigObject=Jm,l_.mergeConfigObjects=c_;function ts(){}function LR(e){return e=za(e),new si(e).wb}function dp(e,t,n){function i(h){tn(c).setUint32(d,h.byteLength,!0),d+=4,c.set(Qn(h),d),d+=h.byteLength}if(!n||!n.byteLength)throw new gt(2,6,6015);var u;typeof t=="string"?u=Df(t,!0):u=t,e=za(e),e=Df(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),d=0;return i(e),i(u),i(n),c}function kR(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=za(e).split("skd://").pop(),dp(e,n,t))}function f_(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}re("shaka.util.FairPlayUtils",ts),ts.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Vr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(u){}e&&(t.data=Ti(Ho(n)))}},ts.expressplayFairPlayRequest=function(e,t){f_(e,t)},ts.conaxFairPlayRequest=function(e,t){f_(e,t)},ts.ezdrmFairPlayRequest=function(e,t){f_(e,t)},ts.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=hu(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ya("spc="+e))},ts.expressplayInitDataTransform=function(e,t,n){return kR(e,t,n)},ts.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=za(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var i=new ArrayBuffer(2*n.length);i=Lu(i);for(var u=0,c=n.length;u<c;u++)i[u]=n.charCodeAt(u);return dp(e,i,t)},ts.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=za(e).split(";").pop(),dp(e,n,t))},ts.verimatrixInitDataTransform=function(e,t,n){return kR(e,t,n)},ts.initDataTransform=dp,ts.defaultGetContentId=LR,ts.isFairPlaySupported=function(){var e;return Oe(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),x(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Ce(t),t.return(!1))})};function d_(){}function ad(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ua(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,A,k){return p.shakaMediaKeysPolyfill&&A=="skd"&&(A=k.serverCertificate,k=LR(E),E=dp(E,k,A)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:vs(),minHdcpVersion:"",ignoreDuplicateInitData:!Fu()};(vs()||xr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",i=!1;Fu()||ku()||Yr("Tizen 4")||oa()&&du()===38||oa()&&du()===53||oa()&&du()===68||aa()&&(!aa()||!Yr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&Cl()||(n="smooth",i=!0),i={retryParameters:ua(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:ev,manifestPreprocessorTXml:tv,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:i,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(ku()||Fu()||oa()&&du()===38||xr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:ev,manifestPreprocessorTXml:tv,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:ua(),failureCallback:function(E){return od([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(oa()||Ka()||aa()||Es())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return Oe(function(A){return A.return(E)})},downloadSizeCallback:function(E){var A;return Oe(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?x(k,navigator.storage.estimate(),3):k.return(!0):(A=k.h,k.return(A.usage+E<.95*A.quota))})},progressCallback:function(E,A){return od([E,A])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return od([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,A){return od([E,A])}};var d=!1;(oa()||Ka()||aa()||Es()||Tc()||xr()||vs())&&(d=!0);var h={drm:t,manifest:i,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:d}};return c.trackSelectionCallback=function(E){return Oe(function(A){return A.return(O8(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function qc(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return c_(e,t,n||ad(),i,"")}function O8(e,t,n){var i=n;i=="AUTO"&&(i=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=i)});n=[];var c=xl(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return br(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var d=n.filter(function(h){return h.height&&480>=h.height});for(d.length&&(d.sort(function(h,E){return E.height-h.height}),n=d.filter(function(h){return h.height==d[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=vr&&n.type!="image"||t.push(n);return t}function ev(e){return od([e],e)}function tv(e){return od([e],e)}re("shaka.util.PlayerConfiguration",d_),d_.mergeConfigObjects=qc,d_.createDefault=ad;function ol(e,t,n,i,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=i,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new Ym,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}z(ol,Sr);function nv(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function L8(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function FR(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=ol.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function k8(e){return e.da=!0,e.i}function F8(e){return e.sa=!0,e.j}function U8(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function B8(e){return e.ea=!0,e.l}function j8(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return x(n,Promise.resolve(),2);case 2:return ce(n,3),x(n,Z8(e),5);case 5:return e.o?n.return():(e.qa.resolve(),x(n,G8(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Ol(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),vm(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var i=e.g.abrFactory;e.s=i,e.i=i(),e.i.configure(e.g.abr)}if(e.Rb){i=e.h.presentationTimeline.R();var u=Gf(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&UR(e,u.video,i),u.audio&&UR(e,u.audio,i))}return x(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),he(n,0);break;case 3:throw t=Ce(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function h_(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function Z8(e){var t,n,i,u,c;return Oe(function(d){if(d.g==1)return h_(e,"manifest-parser"),e.j||(e.B=Ie(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,h_(e,"manifest"),e.h?d.u(2):(n=e,x(d,e.j.start(e.K,e.Ub),3));if(d.g!=2&&(n.h=d.h),i=new Wn("manifestparsed",void 0),e.dispatchEvent(i),e.h.variants.length==0)throw new gt(2,4,4036);q8(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,$(d)})}function G8(e){var t,n,i,u,c;return Oe(function(d){switch(d.g){case 1:h_(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=Cc(e.h.variants,h.h.restrictions,h.i),!t){d.u(2);break}return n=new Wn("trackschanged",void 0),x(d,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return i=Gf(e.h.variants),x(d,jm(e.l,i,e.h.offlineSessionIds),4);case 4:return x(d,je(e.A,e.h),5);case 5:if(u=d.h,!u){d.u(0);break}return c=new Wn("trackschanged",void 0),x(d,Promise.resolve(),7);case 7:e.dispatchEvent(c),$(d)}})}g.configure=function(e,t){e=Jm(e,t),qc(this.g,e)},g.getConfiguration=function(){return $a(this.g)};function UR(e,t,n){var i,u,c,d,h;Oe(function(E){if(E.g==1)return i=e.g.streaming.segmentPrefetchLimit||2,u=new e_(i,t,function(A,k,G){return Qm(A,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),x(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(d=t.segmentIndex.xb(c))?d.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&CR(u,h.ca):sp(u,h.startTime)),$(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,i;return Oe(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return x(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return x(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return x(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())i=n.value,il(i);$(u)}})};function q8(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}re("shaka.media.PreloadManager",ol),ol.prototype.destroy=ol.prototype.destroy,ol.prototype.waitForFinish=ol.prototype.Fi;function rv(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:sd,cc:function(i,u){return Hc(n,"enter",i,u)}},{oc:hp,nc:sd,cc:function(i,u){return Hc(n,"enter",i,u)}},{oc:pp,nc:sd,cc:function(i,u){return Hc(n,"enter",i,u)}},{oc:sd,nc:hp,cc:function(i,u){return Hc(n,"exit",i,u)}},{oc:sd,nc:pp,cc:function(i,u){return Hc(n,"exit",i,u)}},{oc:hp,nc:pp,cc:function(i,u){return Hc(n,"skip",i,u)}},{oc:pp,nc:hp,cc:function(i,u){return Hc(n,"skip",i,u)}}],this.h=new _t,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}z(rv,Sr),rv.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},rv.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var u=this.g.get(i),c=e<i.startTime?hp:e>i.endTime?pp:sd;this.g.set(i,c);for(var d=m(this.m),h=d.next();!h.done;h=d.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(i,t)}}};function Hc(e,t,n,i){t=new Wn(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var hp=1,sd=2,pp=3;function p_(e,t,n){var i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:var G=new si(e).Pa.split("/").pop().split(".");return i=G.length==1?"":G.pop().toLowerCase(),(u=H8[i])?k.return(u):(c=0,d=Li([e],n),ce(k,2),d.method="HEAD",x(k,t.request(c,d).promise,4));case 4:h=k.h,u=h.headers["content-type"],he(k,3);break;case 2:if(E=Ce(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return d.method="GET",x(k,t.request(c,d).promise,6);case 6:A=k.h,u=A.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var H8={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function BR(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(d){return BR(d,e)}).join("");var n=[],i=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return i&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),i="",(u=jR(u))&&(i+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=jR(u))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(d,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+d+"</"+h+">"},e.payload)}function jR(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function g_(e,t){var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,T(g_(i.nestedCues,i)));else{var u=i.clone();u.nestedCues=[],u.payload=BR(i,t),n.push(u)}return n}function da(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),i=n.next();!i.done;i=n.next())i=i.value,i.mode="disabled",i.label==t&&(this.g=i);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=da.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(ZR(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=g_(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var i={};t=m(t);for(var u=t.next();!u.done;i={qc:i.qc},u=t.next())i.qc=u.value,e.some(function(c){return function(d){return d.startTime==c.qc.startTime&&d.endTime==c.qc.endTime&&d.text==c.qc.payload}}(i))||(u=K8(i.qc))&&n.push(u);for(e=n.slice().sort(function(c,d){return c.startTime!=d.startTime?c.startTime-d.startTime:c.endTime!=d.endTime?c.endTime-d.startTime:"line"in VTTCue.prototype?n.indexOf(d)-n.indexOf(c):n.indexOf(c)-n.indexOf(d)}),e=m(e),i=e.next();!i.done;i=e.next())this.g.addCue(i.value)},g.destroy=function(){return this.g&&(ZR(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function K8(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function ZR(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var i=m(Array.from(e.cues)),u=i.next();!u.done;u=i.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}re("shaka.text.SimpleTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function ha(){}g=ha.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},re("shaka.text.StubTextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.remove=ha.prototype.remove,ha.prototype.configure=ha.prototype.configure;function GR(){}function gp(e){for(;e.firstChild;)e.removeChild(e.firstChild)}re("shaka.util.Dom",GR),GR.removeAllChildren=gp;function pa(e,t,n){var i=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){i.A.paused||ud(i)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new _t,this.j.D(document,"fullscreenchange",function(){ud(i,!0)}),this.j.D(this.A,"seeking",function(){ud(i,!0)}),this.j.D(this.A,"resize",function(){var u=i.A,c=u.videoWidth;u=u.videoHeight,c&&u?i.l=c/u:i.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){ud(i,!0)}),this.o.observe(this.g)),this.B=new Map}g=pa.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var i=e.next();!i.done;n={ud:n.ud},i=e.next())n.ud=i.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);ud(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),ud(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function V8(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function qR(e,t,n,i,u){var c=!1,d=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var A=e.i.get(E),k=E.startTime<=i&&E.endTime>i,G=A?A.Mg:null;A&&(d.push(A.Ce),A.ic&&d.push(A.ic),k||(c=!0,e.i.delete(E),A=null)),k&&(h.push(E),A?V8(e,G)||(c=!0):(z8(e,E,u),A=e.i.get(E),G=A.Mg,c=!0)),0<E.nestedCues.length&&G&&qR(e,E.nestedCues,G,i,u),u.pop()}if(c){for(i=m(d),u=i.next();!u.done;u=i.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(te,Y){return te.startTime!=Y.startTime?te.startTime-Y.startTime:te.endTime-Y.endTime}),h=m(h),E=h.next();!E.done;E=h.next())i=e.i.get(E.value),i.ic?(i.ic.contains(n)&&i.ic.removeChild(n),n.appendChild(i.ic),i.ic.appendChild(i.Ce)):n.appendChild(i.Ce)}}function ud(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var i=t.next();!i.done;i=t.next())gp(i.value);gp(e.g),e.i.clear(),e.B.clear()}e.m&&qR(e,e.h,e.g,n,[])}}function z8(e,t,n){var i=1<n.length,u=i?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),i=!i&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&W8(e,c,t,n,i),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var d=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(d))n=e.B.get(d);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",A=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+d,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+A),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,A=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,A-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=A+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(d,h),n=h}}u=c,i&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function Y8(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Vn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Vn?"line-right":"center"}function W8(e,t,n,i,u){var c=t.style,d=n.nestedCues.length==0,h=1<i.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return" ".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=m_(n.linePadding,n,e.s),c.paddingRight=m_(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),!u&&((t=HR(i,function(k){return k.backgroundColor}))?A.style.backgroundColor=t:E&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=HR(i,function(k){return k.fontFamily}))&&(A.style.fontFamily=t),E&&(A.textContent=E)}h&&!i[i.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),d||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=m_(n.fontSize,n,e.s),i=n.line,i!=null&&(d=n.lineInterpretation,d==fn&&(d=1,h=16,e.l&&1>e.l&&(h=32),i=0>i?100+i/h*100:i/h*100),d==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==Cn?c.top=i+"%":n.lineAlign=="end"&&(c.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==Cn?c.left=i+"%":n.lineAlign=="end"&&(c.right=100-i+"%")):(c.height="100%",n.lineAlign==Cn?c.right=i+"%":n.lineAlign=="end"&&(c.left=100-i+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=Y8(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function m_(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var u=i.value;switch(i.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function HR(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||i===0)return i}return null}re("shaka.text.UITextDisplayer",pa),pa.prototype.setTextVisibility=pa.prototype.setTextVisibility,pa.prototype.isTextVisible=pa.prototype.isTextVisible,pa.prototype.remove=pa.prototype.remove,pa.prototype.destroy=pa.prototype.destroy,pa.prototype.append=pa.prototype.append,pa.prototype.configure=pa.prototype.configure;function $8(e,t){function n(c){for(var d=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(d+=E.end-E.start);return c=Math.floor(d/3600),h=Math.floor(d/60%60),E=Math.floor(d%60),d=Math.floor(1e3*d%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>d?10>d?"00":"0":"")+d}var i=g_(e);e="WEBVTT\n\n",i=m(i);for(var u=i.next();!u.done;u=i.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var d=[];switch(c.textAlign){case"left":d.push("align:left");break;case"right":d.push("align:right");break;case kn:d.push("align:middle");break;case"start":d.push("align:start");break;case"end":d.push("align:end")}switch(c.writingMode){case"vertical-lr":d.push("vertical:lr");break;case"vertical-rl":d.push("vertical:rl")}return d.length?" "+d.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}re("shaka.text.WebVttGenerator",function(){});function KR(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}KR.prototype.configure=function(e){this.g=e};function X8(e,t,n){try{if(!e.g.enabled)return t;var i=v_(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=ov;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=sv;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=zR;break e}u=void 0}i.ot=u,i.su=!0;var c=iv(i);return y_(t,c)}catch(d){return St("CMCD_SRC_ERROR","Could not generate src CMCD data.",d),t}}function v_(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ld(e,t,n){n=n===void 0?{}:n;var i=i===void 0?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,v_(e)),n.pr=e.h.eb();var u=n.ot===av||n.ot===sv;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=Q8(e,n),i)i=nj(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var c=iv(e);c&&(t.uris=t.uris.map(function(d){return y_(d,c)}))}}}function Q8(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(i,u){return n.includes(u)&&(i[u]=t[u]),i},{}):t}function J8(e){if(e.type===0)return rj;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?sv:av;if(t=="audio")return ov;if(t=="text")return e.mimeType==="application/mp4"?uv:E_}}function ej(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}function VR(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):0}function tj(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case av:return e.videoBandwidth||NaN;case ov:return e.audioBandwidth||NaN;default:return e.bandwidth}}function iv(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function i(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},d=Object.keys(e||{}).sort();d=m(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;var E=e[h];if(i(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var A=c[h];A&&(E=A(E)),A=typeof E;var k=void 0;k=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):A==="boolean"?h:A==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function nj(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var d=t.next();!d.done;d=t.next())d=d.value,u[c[d]!=null?c[d]:1][d]=e[d];for(e=0;e<u.length;e++)(c=iv(u[e]))&&(n["CMCD-"+i[e]]=c);return n}function y_(e,t){return!t||e.includes("offline:")?e:(e=new si(e),e.g.set("CMCD",t),e.toString())}var zR="m",ov="a",av="v",sv="av",rj="i",E_="c",uv="tt";re("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function ns(e){this.h=e,this.g=null}g=ns.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has($R)?1e3*this.g.get($R):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(WR)?1e3*this.g.get(WR):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has(XR)?this.g.get(XR):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(QR)?this.g.get(QR):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function YR(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}re("shaka.util.CmsdManager",ns),ns.prototype.getBandwidthEstimate=ns.prototype.getBandwidthEstimate,ns.prototype.getRoundTripTime=ns.prototype.yh,ns.prototype.getResponseDelay=ns.prototype.xh,ns.prototype.getEstimatedThroughput=ns.prototype.cg,ns.prototype.getMaxBitrate=ns.prototype.dg;var WR="etp",$R="mb",XR="rd",QR="rtt";function JR(){this.g=null,this.h=[]}function __(e,t){return Oe(function(n){if(n.g==1)return e.g?x(n,new Promise(function(i){return e.h.push(i)}),2):n.u(2);e.g=t,$(n)})}JR.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function hn(e,t){Sr.call(this);var n=this;this.l=x_,this.Rd=this.g=null,this.da=!1,this.Vd=new _t,this.Rb=new _t,this.m=new _t,this.ta=new _t,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new JR,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=dd(this),this.ba={width:1/0,height:1/0},this.Pd=new we(this.h,this.ba,null),this.s=null,this.sa=new Ol(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=mj(this),this.aa=new ns(this.h.cmsd),this.G=ax(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,pv&&(this.A=pv(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){C_(n),n.vf()}),this.Td=new pr(function(){return Tj(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}z(hn,Sr);function lv(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function ij(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(Cl()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Ke("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),lv(e),e.K==null&&(e.K=new oo(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else lv(e)}function Jr(e,t){return new Wn(e,t)}g=hn.prototype,g.destroy=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return e.l==zs?n.return():(lv(e),t=e.detach(),e.l=zs,x(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return x(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),$(n)}})};function cd(e,t){e.dispatchEvent(Jr("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,i,u,c;return Oe(function(d){switch(d.g){case 1:if(n.l==zs)throw new gt(2,7,7e3);if(i=n.g&&n.g==e,!n.g||n.g==e){d.u(2);break}return x(d,n.detach(),2);case 2:return x(d,T_(n,"attach"),4);case 4:if(d.h)return d.return();if(ce(d,5,6),i||(cd(n,"attach"),u=function(){var h=b_(n);h&&gd(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!Co()||n.F){d.u(6);break}return x(d,S_(n),6);case 6:Xe(d),n.Y.release(),Ae(d,0);break;case 5:return c=Ce(d),x(d,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return Oe(function(n){if(n.g==1){if(t.l==zs)throw new gt(2,7,7e3);return x(n,t.lc(!1,e),2)}if(n.g!=3)return x(n,T_(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),cd(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}$(n)})};function T_(e,t){var n;return Oe(function(i){return i.g==1?(n=++e.Yd,x(i,__(e.Y,t),2)):n!=e.Yd?(e.Y.release(),i.return(!0)):i.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,u,c,d,h,E,A,k,G;return Oe(function(te){switch(te.g){case 1:return n.l!=zs&&(n.l=x_),x(te,T_(n,"unload"),2);case 2:return te.h?te.return():(oe(te,3),n.Ia=!1,cd(n,"unload"),e&&!Co()&&(e=!1),lv(n),i=n.Tb.map(function(Y){return Y()}),n.Tb=[],x(te,Promise.all(i),5));case 5:if(n.dispatchEvent(Jr("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){te.u(6);break}return x(te,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){te.u(8);break}return x(te,n.o.stop(),8);case 8:if(!n.j){te.u(10);break}return x(te,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){te.u(12);break}return x(te,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&gp(n.g),!n.g||!n.g.src){te.u(14);break}return x(te,new Promise(function(Y){return new pr(Y).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){te.u(16);break}return x(te,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(d=c.value,h=m([d.audio,d.video]),E=h.next();!E.done;E=h.next())(A=E.value)&&A.segmentIndex&&A.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new Ym,n.kf=null,n.$c=[],n.N=NaN,I_(n);case 3:Xe(te),n.Y.release(),Ae(te,4);break;case 4:if(e&&Co()&&!n.F)return x(te,S_(n),0);te.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var i=this,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne;return Oe(function(Ge){switch(Ge.g){case 1:if(i.l==zs)throw new gt(2,7,7e3);return u=null,c="",e instanceof ol?(u=e,c=u.ad()||""):c=e||"",x(Ge,__(i.Y,"load"),2);case 2:if(i.Y.release(),!i.g)throw new gt(2,7,7002);if(!i.qa){Ge.u(3);break}return x(Ge,i.lc(!1),3);case 3:if(d=++i.Yd,h=function(){return Oe(function(Te){if(Te.g==1)return i.Yd==d?Te.u(0):u?x(Te,u.destroy(),3):Te.u(3);throw new gt(2,7,7e3)})},E=function(Te,$e){return Oe(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),x(Ue,__(i.Y,$e),4);case 4:return x(Ue,h(),5);case 5:return x(Ue,Te(),6);case 6:return x(Ue,h(),7);case 7:u&&i.h&&(u.g=i.h);case 2:Xe(Ue),i.Y.release(),Ae(Ue,0)}})},ce(Ge,5,6),t==null&&u&&(t=u.getStartTime()),i.ea=t,i.Ia=!1,i.dispatchEvent(Jr("loading")),u){n=u.Y,Ge.u(8);break}if(n){Ge.u(8);break}return x(Ge,E(function(){return Oe(function(Te){if(Te.g==1)return x(Te,nx(i,c),2);n=Te.h,$(Te)})},"guessMimeType_"),8);case 8:if(A=!!u,u){FR(u,i),i.s=u.getStats(),Ge.u(11);break}return x(Ge,ex(i,c,t,n,!0),12);case 12:if(u=Ge.h,!u){i.s=new Ym,Ge.u(11);break}return FR(u,i),i.s=u.getStats(),x(Ge,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,i.s=u?u.getStats():new Ym,i.qa=c,i.gf=n||null,k)return x(Ge,E(function(){return Oe(function(Te){return x(Te,uj(i,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(i.F){Ge.u(17);break}return x(Ge,E(function(){return Oe(function(Te){return x(Te,S_(i),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return x(Ge,E(function(){return u.qa},"waitForManifest"),19);case 19:return i.h=u.getConfiguration(),i.Pd=u.A,i.Ga=u.B,i.I=F8(u),i.mb=U8(u),i.lb=u.lb,i.i=u.Te(),(te=u.m)&&(i.sa=te),A&&i.g&&i.g.nodeName==="AUDIO"&&(oj(i),i.configure("manifest.disableVideo",!0)),x(Ge,E(function(){return u.pa},"waitForDrm"),20);case 20:return i.B=B8(u),x(Ge,E(function(){return Oe(function(Te){return x(Te,i.B.Vc(i.g),0)})},"drmEngine_.attach"),21);case 21:return x(Ge,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(Y=u.s)||i.pa&&i.pa==Y||(i.o=k8(u),i.pa=u.s,typeof i.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.o.setMediaElement=function(){}),typeof i.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.o.setCmsdManager=function(){}),typeof i.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.o.trySuggestStreams=function(){})),ve=j8(u),Pe=u.ta,x(Ge,E(function(){return Oe(function(Te){return x(Te,sj(i,G,Pe,ve),0)})},"loadInner_"),23);case 23:L8(u),Ge.u(16);break;case 24:return x(Ge,E(function(){return Oe(function(Te){return x(Te,lj(i,G,n),0)})},"srcEqualsInner_"),16);case 16:i.dispatchEvent(Jr("loaded"));case 6:if(Xe(Ge),!u){Ge.u(26);break}return x(Ge,u.destroy(),26);case 26:Ae(Ge,0);break;case 5:if(Ne=Ce(Ge),Ne.code==7e3){Ge.u(28);break}return x(Ge,i.lc(!1),28);case 28:throw Ne}})};function oj(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,u,c;return Oe(function(d){switch(d.g){case 1:if(i=null,!(n.i&&n.I&&n.Ga&&n.qa)){d.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,x(d,tx(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=i=d.h,E=n.I,A=n.Ga;h.h=n.i,h.j=E,h.B=A,h=i,E=n.pa,h.i=n.o,h.s=E,i.m=n.sa,i.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return x(d,n.lc(e,t),4);case 4:return d.return(i)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var i=this,u;return Oe(function(c){return c.g==1?x(c,ex(i,e,t,n),2):((u=c.h)?u.start().catch(function(){}):gd(i,new gt(2,7,7005)),c.return(u))})};function ex(e,t,n,i,u){u=u===void 0?!1:u;var c,d,h;return Oe(function(E){return E.g==1?(c=Date.now()/1e3,i?E.u(2):x(E,nx(e,t),3)):(E.g!=2&&(i=E.h),aj(e,i)?E.return(null):(d=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(d=!0)),E.return(tx(e,t,n,i||null,c,!u,d,h))))})}function tx(e,t,n,i,u,c,d,h){c=c===void 0?!0:c,d=d===void 0?!1:d,h=h===void 0?!0:h;var E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt;return Oe(function(Ht){return Ht.g==1?(E=null,A=$a(e.h),d&&(A.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},te=function(Ut,Et){k()?E.configure(Ut,Et):e.configure(Ut,Et)},e.ba.width!=1/0||e.ba.height!=1/0?Ht.u(2):x(Ht,Ca(),3)):(Ht.g!=2&&(Y=Ht.h,e.ba.width=Y.width,e.ba.height=Y.height),ve=new we(A,e.ba,null),Pe={networkingEngine:e.G,filter:function(Ut){var Et,jt;return Oe(function(cn){if(cn.g==1)return x(cn,je(ve,Ut),2);if(cn.g!=4)return Et=cn.h,Et?(jt=Jr("trackschanged"),x(cn,Promise.resolve(),4)):cn.u(0);E.dispatchEvent(jt),$(cn)})},makeTextStreamsForClosedCaptions:function(Ut){return Ej(e,Ut)},onTimelineRegionAdded:function(Ut){var Et=E.C;e:{for(var jt=m(Et.g),cn=jt.next();!cn.done;cn=jt.next())if(cn=cn.value,cn.schemeIdUri==Ut.schemeIdUri&&cn.id==Ut.id&&cn.startTime==Ut.startTime&&cn.endTime==Ut.endTime){jt=cn;break e}jt=null}jt==null&&(Et.g.add(Ut),Ut=new Wn("regionadd",new Map([["region",Ut]])),Et.dispatchEvent(Ut))},onEvent:function(Ut){return E.dispatchEvent(Ut)},onError:function(Ut){return E.onError(Ut)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){te("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Ut){var Et=E.l,jt=Et?Et.g:null;jt&&Et.s&&ae(ve,jt.keySystem,Ut)},onManifestUpdated:function(){var Ut=new Map().set("isLive",e.R());E.dispatchEvent(Jr("manifestupdated",Ut)),nv(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},Ne=new r_(function(){return e.Ib()}),Ne.addEventListener("regionadd",function(Ut){var Et=Ut.region;vp(e,"timelineregionadded",Et,E),nv(E,!1,function(){e.A&&e.A.onDashTimedMetadata(Et)})}),Ge=null,A.streaming.observeQualityChanges&&(Ge=new Wm(function(){return e.ob()}),Ge.addEventListener("qualitychange",function(Ut){var Et=Ut.quality;Ut=Ut.position,Et=new Map().set("mediaQuality",{bandwidth:Et.bandwidth,audioSamplingRate:Et.audioSamplingRate,codecs:Et.codecs,contentType:Et.contentType,frameRate:Et.frameRate,height:Et.height,mimeType:Et.mimeType,channelsCount:Et.channelsCount,pixelAspectRatio:Et.pixelAspectRatio,width:Et.width}).set("position",Ut),e.dispatchEvent(Jr("mediaqualitychanged",Et))})),Te=!0,$e={zb:e.G,onError:function(Ut){return E.onError(Ut)},ee:function(Ut){nv(E,!0,function(){e:{var Et=Jr("keystatuschanged");e.dispatchEvent(Et);var jt=Object.keys(Ut);Et=jt.length==1&&jt[0]=="00";var cn=!1;if(jt.length){jt=m(e.i.variants);for(var gn=jt.next();!gn.done;gn=jt.next()){gn=gn.value;var Ln=[];gn.audio&&Ln.push(gn.audio),gn.video&&Ln.push(gn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=gn.allowedByKeySystem,qn.keyIds.size){gn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Ut[Et?"00":Yn])||e.B.F)&&(gn.allowedByKeySystem=gn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=gn.allowedByKeySystem&&(cn=!0)}}}if(cn&&(rs(e),!hd(e)))break e;(Et=e.j.j)&&!Et.allowedByKeySystem&&pd(e)}})},onExpirationUpdated:function(Ut,Et){var jt=Jr("expirationupdated");E.dispatchEvent(jt),(jt=E.j)&&jt.onExpirationUpdated&&jt.onExpirationUpdated(Ut,Et)},onEvent:function(Ut){E.dispatchEvent(Ut),Ut.type=="drmsessionupdate"&&Te&&(Te=!1,Ut=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Ut,e.K&&Zi(e.K))}},Ue=ax(e,k),mt=function(){return e.rc($e)},xt={config:A,Uh:Pe,di:Ne,ci:Ge,rc:mt,Th:ve,networkingEngine:Ue,Vg:c,Ug:h},E=new ol(t,i,u,n,xt),Ht.return(E))})}function nx(e,t){var n,i;return Oe(function(u){return u.g==1?(n=e.h.manifest.retryParameters,x(u,p_(t,e.G,n),2)):(i=u.h,i=="application/x-mpegurl"&&ys()&&(i="application/vnd.apple.mpegurl"),u.return(i))})}function aj(e,t){if(!Co())return!0;if(t){if((e.g||Sc()).canPlayType(t)=="")return!1;if(!(Co()&&t in ke))return!0;if(dm(t)){if(e.h.streaming.preferNativeHls)return!0;if(ys()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(ys())return e.h.streaming.useNativeHlsOnSafari}}return!1}function S_(e){var t,n,i,u,c;return Oe(function(d){if(d.g==1)return cd(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,i=gj(e.g,n,function(h,E,A){rx(e,h,E,A)},e.K),i.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,i.ba=c,x(d,i.L,2);e.F=i,$(d)})}function sj(e,t,n,i){var u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut;return Oe(function(Et){switch(Et.g){case 1:for(cd(e,"load"),u=e.g,e.H=new ap({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(jt){u.playbackRate=jt},og:function(jt){u.currentTime+=jt}}),c=function(){return cv(e)},d=function(){return hx(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",d),ij(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,R_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(jt,cn,gn){e.j&&jt!=e.j.j&&dv(e,jt,!0,cn===void 0?!1:cn,gn===void 0?0:gn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=vj(e),e.j.configure(e.h.streaming),e.l=Lo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(jt){if(jt.track)switch(jt=jt.track,jt.kind){case"chapters":ox(e,jt)}}),e.dispatchEvent(Jr("streaming")),h=n,(E=e.j.j)||h||(h=gx(e,!0)),A=[],k=E||h,G=m([k.video,k.audio]),te=G.next();!te.done;te=G.next())(Y=te.value)&&!Y.segmentIndex&&A.push(Y.createSegmentIndex());if(!(0<A.length)){Et.u(2);break}return x(Et,Promise.all(A),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),R_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ve=function(jt){e.C=hj(e,jt),e.bb=pj(e,t),sx(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ve(e.ea),E){Et.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){Et.u(5);break}return Pe=e.i.presentationTimeline,Ne=e.ea||e.g.currentTime,Ge=Pe.$b(),Te=Pe.pb(),Ne<Ge?Ne=Ge:Ne>Te&&(Ne=Te),x(Et,_j(h,Ne),6);case 6:$e=Et.h,ve($e);case 5:dv(e,h,!0,!1,0);case 4:return e.C.ve(),Ue=e.wc().find(function(jt){return jt.active}),Ue||((mt=Rc(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&JE(e.s.h,mt,!0),h&&(mt?(h.audio&&Sj(e,h.audio,mt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),yx(e)):e.da=!1),mt&&(e.h.streaming.alwaysStreamText||e.Ze())&&$m(e.j,mt)),x(Et,e.j.start(i),7);case 7:e.h.abr.enabled&&(e.o.enable(),Ex(e)),rs(e),hd(e),e.i.variants.some(function(jt){return jt.primary}),(xt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Ht=function(){return px(e)},e.m.D(u,"timeupdate",Ht)):xt||(Ut=function(){return fv(e)},e.m.D(u,"timeupdate",Ut),fv(e)),e.A&&e.A.onManifestUpdated(xt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),$(Et)}})}function uj(e,t){var n,i,u,c;return Oe(function(d){return d.g==1?(n=yi,i=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){gd(e,h)},ee:function(){},onExpirationUpdated:function(){var h=Jr("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-i)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Ra(t):"",codecs:t?Po(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(Si(c.video.mimeType,c.video.codecs)),e.B.ba=!0,x(d,jm(e.B,[c],[]),2)):x(d,e.B.Vc(e.g),0)})}function lj(e,t,n){var i,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1)return cd(e,"src-equals"),i=e.g,e.C=new ER(i),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new ap({Md:function(){return i.playbackRate},Xb:function(){return i.defaultPlaybackRate},Df:function(ve){i.playbackRate=ve},og:function(ve){i.currentTime+=ve}}),c=e.h.streaming.rebufferingGoal,sx(e,i,c),d=function(){return cv(e)},h=function(){return hx(e)},e.m.D(i,"playing",d),e.m.D(i,"pause",d),e.m.D(i,"ended",d),e.m.D(i,"ratechange",h),i.preload!="none"&&e.m.na(i,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),i.audioTracks&&(e.m.D(i.audioTracks,"addtrack",function(){return rs(e)}),e.m.D(i.audioTracks,"removetrack",function(){return rs(e)}),e.m.D(i.audioTracks,"change",function(){return rs(e)})),i.textTracks&&(e.m.D(i.textTracks,"addtrack",function(ve){if(ve.track)switch(ve=ve.track,ve.kind){case"metadata":dj(e,ve);break;case"chapters":ox(e,ve);break;default:rs(e)}}),e.m.D(i.textTracks,"removetrack",function(){return rs(e)}),e.m.D(i.textTracks,"change",function(){return rs(e)})),i.src=X8(e.T,e.qa,n),(Ka()||oa())&&i.load(),i.preload!="none"&&!i.autoplay&&dm(n)&&_s()&&i.load(),e.l=ga,e.dispatchEvent(Jr("streaming")),E=new Rr,rd(i,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),rd(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ve;return Oe(function(Pe){if(Pe.g==1)return cj(e),ve=mp(e),ve.find(function(Ne){return Ne.mode!="disabled"})?(0<ve.length&&(e.da=!0),Pe.u(2)):x(Pe,new Promise(function(Ne){e.m.na(i.textTracks,"change",Ne),new pr(Ne).X(1)}),2);if(u)return Pe.return();fj(e),$(Pe)})}),i.error?E.reject(b_(e)):i.preload=="none"&&(Ke('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(i,"error",function(){E.reject(b_(e))}),x(Y,E,2);(A=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return px(e)},e.m.D(i,"timeupdate",k)):A||(G=function(){return fv(e)},e.m.D(i,"timeupdate",G),fv(e)),e.A&&(e.A.onManifestUpdated(A),A&&(te=e.Ib().end,e.m.D(i,"progress",function(){var ve=e.Ib().end;te!=ve&&(e.A.onManifestUpdated(e.R()),te=ve)}))),e.Ia=!0,$(Y)})}function cj(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function fj(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function dj(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var i=m(t.activeCues),u=i.next();!u.done;u=i.next())u=u.value,ix(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var i=yj(e);i=m(i);for(var u=i.next();!u.done;u=i.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function rx(e,t,n,i){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,d=i;d&&c>d&&(d=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())ix(e,c,d,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function ix(e,t,n,i,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",u),e.dispatchEvent(Jr("metadata",t))}function ox(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new Uc(e)};function ax(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function i(u){t()?nv(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,d,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,d,h)},function(u,c,d){c=new Map().set("headers",u).set("request",c).set("requestType",d),n(Jr("downloadheadersreceived",c)),i(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var A=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");A.set(G[0],YR(G[1]))}}catch(Ne){}if(A=u["cmsd-dynamic"]){try{var te=new Map,Y=A.split(";");for(A=1;A<Y.length;A++){var ve=Y[A].split("=");te.set(ve[0],YR(ve[1]))}var Pe=te}catch(Ne){Pe=null}Pe&&(h.g=Pe)}}}})},function(u,c,d,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",d).set("aborted",h),n(Jr("downloadfailed",u))},function(u,c,d){i(function(){var h=e.T,E=d;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")ld(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var A="d";break e;case 3:case 2:A="h";break e;case 5:A="s";break e}A=void 0}h.m=A}ld(h,c,{ot:zR,su:!h.i})}}catch(Mn){St("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case Xa:try{if(h.g.enabled){var k=E.segment;A=0,k&&(A=k.endTime-k.startTime);var G={d:1e3*A,st:h.h.R()?"l":"v"};G.ot=J8(E);var te=G.ot===av||G.ot===ov||G.ot===sv||G.ot===uv,Y=E.stream;if(Y){var ve=h.h.eb();if(te&&(G.bl=ej(h,Y.type),G.ot!==uv)){var Pe=VR(h,Y.type);G.dl=ve?Pe/Math.abs(ve):Pe}if(Y.bandwidth&&(G.br=Y.bandwidth/1e3),Y.segmentIndex&&k){var Ne=Y.segmentIndex.xb(k.endTime,!0,0>ve);if(Ne){var Ge=Ne.next().value;if(Ge&&Ge!=k){if(!Zn(k.$(),Ge.$())){var Te=Ge.$()[0],$e=c.uris[0],Ue=new URL(Te),mt=new URL($e);if(Ue.origin!==mt.origin)var xt=Te;else{for(var Ht=Ue.pathname.split("/").slice(1),Ut=mt.pathname.split("/").slice(1,-1);Ht[0]===Ut[0];)Ht.shift(),Ut.shift();for(;Ut.length;)Ut.shift(),Ht.unshift("..");xt=Ht.join("/")}G.nor=xt}if((Ge.Aa||Ge.ja)&&(k.Aa!=Ge.Aa||k.ja!=Ge.ja)){var Et=Ge.Aa+"-";Ge.ja&&(Et+=Ge.ja),G.nrr=Et}}}var jt=h.h.eb()||1,cn=VR(h,Y.type)||500,gn=Y.bandwidth,Ln=gn?gn*(k.endTime-k.startTime)/1e3/(cn/jt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}te&&G.ot!==uv&&(G.tb=tj(h,G.ot)/1e3),ld(h,c,G)}}catch(Mn){St("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:ld(h,c,{ot:"k"});break;case 4:ld(h,c,{ot:"o"})}})},function(u,c,d,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function hj(e,t){return new _R(e.g,e.i,e.h.streaming,t,function(){e.bb&&IR(e.bb,!0),e.j&&e.j.od(),e.L&&fd(e)},function(n){return e.dispatchEvent(n)})}function pj(e,t){t=new rv(e.mb,e.R()||0<t),t.addEventListener("enter",function(i){vp(e,"timelineregionenter",i.region)}),t.addEventListener("exit",function(i){vp(e,"timelineregionexit",i.region)}),t.addEventListener("skip",function(i){var u=i.region;i.seeking||(vp(e,"timelineregionenter",u),vp(e,"timelineregionexit",u))});var n=new AR(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function sx(e,t,n){e.L=new qh,e.L.g=Ll,Hh(e.L,n,Math.min(.5,n/2)),I_(e),e.m.D(t,"waiting",function(){return fd(e)}),e.m.D(t,"stalled",function(){return fd(e)}),e.m.D(t,"canplaythrough",function(){return fd(e)}),e.m.D(t,"progress",function(){return fd(e)})}function fd(e){switch(e.l){case ga:if(e.g.ended)var t=!0;else{var n=kt(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Lo:e:if(e.g.ended||Gc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var i=kt(e.g.buffered);if(i!=null&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,i=u||i>=c?Nc:Ll,n.g=i,(t=t!=i)&&i===Nc&&(n.h=Date.now()),t&&I_(e)}function gj(e,t,n,i){return new Su(e,t,n,i)}function mj(e){return new KR({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function vj(e){return new NR(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return gd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var i=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var d=Hs(e.F,c);!e.R()&&e.g.paused&&d!=null&&0<d&&e.C.Dd()<d&&e.C.we(d)}fd(e),i=new Map().set("start",i).set("end",u).set("contentType",c),e.dispatchEvent(Jr("segmentappended",i)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&g8(e.lb,n,t)},Qf:function(t,n){var i=e.B;if(i.h.parseInbandPsshEnabled&&!i.F&&["audio","video"].includes(t)){n=new Fm(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)i=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;jl(i,"cenc",u),i=i.l}}else i=Promise.resolve();return i},$h:function(t,n,i){rx(e,t,n,i)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Jm(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var i=qc(this.h,e,dd(this));return ux(this),i};function ux(e){if(e.Pd=new we(e.h,e.ba,e.B),e.I){var t=$a(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=zs&&ue(e.Pd,e.i)&&rs(e)}catch(c){gd(e,c)}e.o&&hd(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||pd(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var i=e.F,u=i.F;i.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),i.g&&(i.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(vr))&&id(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),Ex(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Hh(e.L,t,Math.min(.5,t/2))),e.i&&R_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=dd(this);return qc(e,this.h,dd(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];qc(this.h,dd(this),dd(this)),ux(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Ll:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?Ke("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Lo&&(this.o.playbackRateChanged(e),MR(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,i=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(i.end)&&t.Wc():Math.floor(n)<=Math.floor(i.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==ga&&this.H.set(e),this.l==Lo&&(this.H.set(e),this.o.playbackRateChanged(e),MR(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,i=m(this.i.variants),u=i.next();!u.done;u=i.next())if(u=u.value,Zf(u)){var c=Ml(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(d){return Pl(d)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var u=Dl(i);u.active=i==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?mp(this).map(function(c){return Sm(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return zu(t)})},g.gh=function(e){var t=this,n,i,u,c;return Oe(function(d){return d.g==1?t.l!=Lo&&t.l!=ga?d.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(i=n.find(function(h){return h.id==e}))?i.segmentIndex?d.u(2):x(d,i.createSegmentIndex(),2):d.return(null)):d.g!=4?(u=[],i.segmentIndex.tc(function(h){var E=lx(h.tilesLayout||i.tilesLayout);if(E){E=E.rows*E.Sb;for(var A=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+A*k/E))}}),x(d,Promise.all(u),4)):(c=d.h,d.return(c.filter(function(h){return h})))})};function lx(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(mt){return mt.g==1?n.l!=Lo&&n.l!=ga?mt.return(null):(i=n.$c,n.i&&(i=n.i.imageStreams),(u=i.find(function(xt){return xt.id==e}))?u.segmentIndex?mt.u(2):x(mt,u.createSegmentIndex(),2):mt.return(null)):(c=u.segmentIndex.find(t),c==null||(d=u.segmentIndex.get(c),h=lx(d.tilesLayout||u.tilesLayout),!h)?mt.return(null):(E=u.width||0,A=u.height||0,k=E/h.Sb,G=A/h.rows,te=h.Sb*h.rows,Y=d.i-d.startTime,ve=d.A||Y/te,Pe=d.startTime,Ge=Ne=0,1<te&&(Te=Math.floor((t-d.startTime)/ve),Pe=d.startTime+Te*ve,Ne=Te%h.Sb*k,Ge=Math.floor(Te/h.Sb)*G),$e=!1,(Ue=d.s)&&($e=!0,G=Ue.height,Ne=Ue.positionX,Ge=Ue.positionY,k=Ue.width),mt.return({segment:d,imageHeight:A,imageWidth:E,height:G,positionX:Ne,positionY:Ge,startTime:Pe,duration:ve,uris:d.$(),width:k,sprite:$e})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(i){return i.id==e.id});t&&t!=this.j.s&&(JE(this.s.h,t,!1),$m(this.j,t),hv(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=mp(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,bc(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";hv(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&Ke("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find(function(u){return u.id==e.id});i&&Zf(i)&&(dv(this,i,!1,t,n),this.sa=new Gh(i,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),hd(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,bc(n)==e.id){mx(this,n);break}}},g.ih=function(){return Tx(this.Hb())},g.Ah=function(){return Tx(this.wc())},g.hh=function(){return Array.from(_x(this.Hb()))},g.zh=function(){return Array.from(_x(this.wc()))},g.wg=function(e,t,n,i){if(n=n===void 0?0:n,i=i===void 0?0:i,this.i&&this.C){this.sa=new Ol(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(d,h){return d.video||h.video?d.video&&h.video?Math.abs((d.video.height||0)-(h.video.height||0))+Math.abs((d.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=Ml(n),this.zf(e,!0,i)):pd(this)}else this.g&&this.g.audioTracks&&(i=Rc(this.Hb(),e,t||"",!1)[0])&&this.zf(i)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=Rc(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&(JE(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&($m(this.j,e),hv(this))):(e=Rc(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var i=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){i=c;break}i!=null&&(this.sa=new Ol(i.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),pd(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),i=n.next();!i.done;i=n.next())i=i.value,i.label==e&&(t=i);t&&mx(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Lo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?mp(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?cx(this).map(function(e){return Sm(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=br(e),n=cx(this).filter(function(h){return br(h.language)==t});if(!n||!n.length)return[];e=[];var i=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var d=c.value;(c=d.id)&&c!=""||(c=d.startTime+"-"+d.endTime+"-"+d.text),d={id:c,title:d.text,startTime:d.startTime,endTime:d.endTime},i.has(c)||(e.push(d),i.add(c))}}return e};function mp(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function yj(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function cx(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Lo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=Rc(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&($m(this.j,e[0]),hv(this))):E8(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=mp(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}yx(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Lo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==ga&&(e.total=vt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Lo&&this.l!=ga)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};cv(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var i=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=i,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Lo){if(n=this.j.j,t=this.j.s,n){i=this.H?this.H.h:1;var u=i*n.bandwidth;t&&t.bandwidth&&(u+=i*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,i=n.video.height||NaN,t.o=n.video.width||NaN,t.l=i),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==ga&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,i=c.I,u=c.K;var d=c.H,h=c.N,E=c.L,A=c.A,k=c.i,G=c.m,te=c.F,Y=c.j,ve=QE(c.g,"playing"),Pe=QE(c.g,"paused"),Ne=QE(c.g,"buffering"),Ge=c.s,Te=c.C,$e=c.G,Ue=c.Ed,mt=c8(c.g),xt=[];c=m(c.h.g);for(var Ht=c.next();!Ht.done;Ht=c.next())Ht=Ht.value,xt.push({timestamp:Ht.timestamp,id:Ht.id,type:Ht.type,fromAdaptation:Ht.fromAdaptation,bandwidth:Ht.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:u,corruptedFrames:d,stallsDetected:h,gapsJumped:E,estimatedBandwidth:A,completionPercent:k,loadLatency:G,manifestTimeSeconds:te,drmTimeSeconds:Y,playTime:ve,pauseTime:Pe,bufferingTime:Ne,licenseTime:Ge,liveLatency:Te,maxSegmentDuration:$e,bytesDownloaded:Ue,stateHistory:mt,switchHistory:xt}},g.Rg=function(e,t,n,i,u,c,d){d=d===void 0?!1:d;var h=this,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(h.l!=Lo&&h.l!=ga)throw new gt(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ke("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){Ue.u(2);break}return x(Ue,w_(h,e),3);case 3:i=Ue.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=ga){Ue.u(4);break}return d&&(n="forced"),x(Ue,fx(h,e,t,n,i,c||"",E),5);case 5:if(A=br(t),k=h.wc(),G=k.find(function(mt){return br(mt.language)==A&&mt.label==(c||"")&&mt.kind==n}))return rs(h),Ue.return(G);throw new gt(1,2,2012);case 4:if(te=yi,Y=h.g.duration,h.i&&(Y=h.i.presentationTimeline.getDuration()),Y==1/0)throw new gt(1,4,4033);if(!E.length){Ue.u(6);break}return x(Ue,A_(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ve=Ue.h,Pe=dx(h,ve,i,E),Ne=new Blob([Pe],{type:"text/vtt"}),e=zm(Ne),i="text/vtt";case 6:if(Ge={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:XE(0,Y,[e]),mimeType:i||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:te.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!d,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(i||"",u||"")])},Te=Si(Ge.mimeType,Ge.codecs),$e=Rl(Te),!$e)throw new gt(2,2,2014,i);return h.i.textStreams.push(Ge),rs(h),Ue.return(Dl(Ge))}})},g.Sg=function(e,t){var n=this,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te;return Oe(function($e){switch($e.g){case 1:if(n.l!=Lo&&n.l!=ga)throw new gt(1,7,7004);if(t){$e.u(2);break}return x($e,w_(n,e),3);case 3:t=$e.h;case 2:if(t!="text/vtt")throw new gt(1,2,2017,e);if(i=yi,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new gt(1,4,4045);return x($e,A_(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=$e.h,d=ji[t],!d)throw new gt(2,2,2014,t);for(h=d(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=Qn(c),k=h.parseMedia(A,E,e),G=[],te={},Y=m(k),ve=Y.next();!ve.done;te={Rc:te.Rc,Nb:te.Nb},ve=Y.next())te.Nb=ve.value,te.Rc=null,Pe=function(Ue){return function(){return Ue.Rc==null&&(Ue.Rc=ho([e],[Ue.Nb.payload])),Ue.Rc||[]}}(te),Ne=new Je(te.Nb.startTime,te.Nb.endTime,Pe,0,null,null,0,0,1/0),te.Nb.payload.includes("#xywh")&&(Ge=te.Nb.payload.split("#xywh=")[1].split(","),Ge.length===4&&Ne.Eg({height:parseInt(Ge[3],10),positionX:parseInt(Ge[0],10),positionY:parseInt(Ge[1],10),width:parseInt(Ge[2],10)})),G.push(Ne);return Te={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(t||"","")])},n.l==ga?n.$c.push(Te):n.i.imageStreams.push(Te),rs(n),$e.return(zu(Te))}})},g.Qg=function(e,t,n){var i=this,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(i.l!=Lo&&i.l!=ga)throw new gt(1,7,7004);if(n){E.u(2);break}return x(E,w_(i,e),3);case 3:n=E.h;case 2:return u=[],i.A&&(u=i.A.getCuePoints()),x(E,fx(i,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,d=i.bg(),h=d.find(function(A){return A.language==t}),!h){E.u(5);break}return x(E,new Promise(function(A,k){i.m.na(c,"load",A),i.m.na(c,"error",function(){k(new gt(1,2,2015))})}),6);case 6:return rs(i),E.return(h);case 5:throw new gt(1,2,2012)}})};function w_(e,t){var n;return Oe(function(i){switch(i.g){case 1:return ce(i,2),x(i,p_(t,e.G,e.h.streaming.retryParameters),4);case 4:n=i.h,he(i,3);break;case 2:Ce(i);case 3:if(n)return i.return(n);throw new gt(1,2,2011,t)}})}function fx(e,t,n,i,u,c,d){var h,E,A,k;return Oe(function(G){if(G.g==1)return u!="text/vtt"||d.length?x(G,A_(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=dx(e,h,u,d),A=new Blob([E],{type:"text/vtt"}),t=zm(A),u="text/vtt"),k=document.createElement("track");var te=e.T,Y=t;try{if(te.g.enabled){var ve=v_(te);ve.ot=E_,ve.su=!0;var Pe=iv(ve),Ne=y_(Y,Pe)}else Ne=Y}catch(Ge){St("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ge),Ne=Y}return k.src=Ne,k.label=c,k.kind=i,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function A_(e,t,n,i){var u,c,d;return Oe(function(h){if(h.g==1){u=Xa,c=Li([t],i),c.method="GET";var E=e.T;try{E.g.enabled&&ld(E,c,{ot:E_,su:!0})}catch(A){St("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return x(h,n.request(u,c).promise,2)}return d=h.h,h.return(d.data)})}function dx(e,t,n,i){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),$8(t,i);throw new gt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Lo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.gd||i.Qa||i.ub||(i.gd=!1,Ss(t,i,e));t=!0}}else t=!1;return t},g.Te=function(){return Ke("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function dd(e){var t=ad();return t.streaming.failureCallback=function(n){if(e.R()){var i=null;n.code==1001||n.code==1002?i=1:n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.vf(i))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new pa(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new da(e.g,"Shaka Player TextTrack"):new ha},t}g.Hg=function(e){this.Rd=e};function Ej(e,t){for(var n=new Set,i=m(t.textStreams),u=i.next();!u.done;u=i.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(i=m(t.variants),u=i.next();!u.done;u=i.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),d=c.next();!d.done;d=c.next())if(d=d.value,!n.has(d)){var h=d.startsWith("CC")?"application/cea-608":"application/cea-708",E=new Ei,A=u.closedCaptions.get(d);h={id:e.nf++,originalId:d,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:vr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(h,"")])},t.textStreams.push(h),n.add(d)}}}function _j(e,t){var n,i,u,c,d;return Oe(function(h){return h.g==1?(n=e.audio,i=e.video,u=function(E,A){var k,G,te;return Oe(function(Y){return Y.g==1?E?x(Y,E.createSegmentIndex(),2):Y.return(null):(G=(k=E.segmentIndex.xb(A))?k.next().value:null,G?(te=G.startTime,Y.return(te)):Y.return(null))})},x(h,u(n,t),2)):h.g!=3?(c=h.h,x(h,u(i,t),3)):(d=h.h,d!=null&&c!=null?h.return(Math.max(d,c)):d!=null?h.return(d):c!=null?h.return(c):h.return(t))})}function I_(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}cv(e)}t=new Map().set("buffering",t),e.dispatchEvent(Jr("buffering",t))}function hx(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=Jr("ratechange"),e.dispatchEvent(t))}function cv(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Ll?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Jr("statechanged",n)))}}function px(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var i=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.sd(i):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,d=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,d=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,i=0,e.l==ga){var A=e.g.buffered;0<A.length&&(i=A.end(A.length-1),i=Math.max(d,i-u.end))}u=e.h.streaming.liveSyncPanicMode,A=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=A?t!=E&&e.sd(E):c&&d&&n-i>c?t!=d&&e.sd(d):h&&E&&n-i<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function fv(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var i;e.N==0?i=Jr("started"):e.N==25?i=Jr("firstquartile"):e.N==50?i=Jr("midpoint"):e.N==75?i=Jr("thirdquartile"):e.N==100&&(i=Jr("complete")),i&&e.dispatchEvent(i)}}}function hd(e){try{se(e.Pd,e.i)}catch(n){return gd(e,n),!1}var t=Gf(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function gx(e,t){return t=t===void 0?!1:t,hd(e)?e.o.chooseVariant(t):null}function Tj(e){function t(d){var h="";return d.video&&(h+="video:"+d.video.id),d.audio&&(h=h+(h?"&":"")+("audio:"+d.audio.id)),h}for(var n=Date.now()/1e3,i=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,i=!0,""+t(c),void 0);e.i.variants.every(function(d){return d.disabledUntilTime===0})&&e.Td.stop(),i&&pd(e,!0,void 0,!1,!1)}function pd(e,t,n,i,u){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,u=u===void 0?!0:u;var c=gx(e);c&&dv(e,c,u,t,n,i)}function dv(e,t,n,i,u,c){c=c===void 0?!1:c;var d=e.j.j;if(t==d)i&&DR(e.j,t,i,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),DR(e.j,t,i,u,c,n),i=null,d&&(i=Ml(d)),t=Ml(t),n?(n=new Map().set("oldTrack",i).set("newTrack",t),e.K&&Gs(e.K,t,e.Ue()),n=Jr("adaptation",n),md(e,n)):vx(e,i,t)}}function mx(e,t){var n=Array.from(e.g.audioTracks).find(function(i){return i.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Pl(n),t=Pl(t),vx(e,n,t)}function Sj(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var i=br(e.h.preferredTextLanguage);return n=br(n.language),e.h.autoShowText==2?Gu(n,i):e.h.autoShowText==3?(e=br(t.language),Gu(n,i)&&!Gu(e,n)):(Ke("Invalid autoShowText setting!"),!1)}function rs(e){var t=Jr("trackschanged");md(e,t)}function vx(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&Gs(e.K,n,e.Ue()),n=Jr("variantchanged",t),md(e,n)}function hv(e){var t=Jr("textchanged");md(e,t)}function yx(e){var t=Jr("texttrackvisibility");md(e,t)}function Ex(e){e.h.abr.enabled||C_(e);var t=new Map().set("newStatus",e.h.abr.enabled);md(e,Jr("abrstatuschanged",t))}function C_(e,t){if(t=t===void 0?!0:t,e.l==Lo){e.Td.stop();for(var n=m(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&hd(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===zs||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),i=n.next();!i.done;i=n.next()){i=i.value;var u=i[e.type];u&&u.id===e.id&&(i.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,d){return c+d.end-d.start},0),pd(this,!0,t,!0,!1),!0}return!1};function gd(e,t){var n,i,u;return Oe(function(c){switch(c.g){case 1:if(e.l==zs)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return ce(c,3),x(c,D8(e.j),5);case 5:i=c.h,n=!i,he(c,2);break;case 3:Ce(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&C_(e,!1),u=Jr("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),$(c)}})}function vp(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(Jr(t,e))}function b_(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new gt(2,3,3016,t,n,e.g.error.message)}function R_(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function md(e,t){Oe(function(n){if(n.g==1)return x(n,Promise.resolve(),2);e.l!=zs&&e.dispatchEvent(t),$(n)})}function _x(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(br(n.language)):t.add("und");return t}function Tx(e){var t=new Map,n=new Map;e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var u="und",c=[];i.language&&(u=br(i.language)),i.type=="variant"?c=i.audioRoles:c=i.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var d=c.next();!d.done;d=c.next())d=d.value,t.get(u).add(d),i.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(d,i.label))}var h=[];return t.forEach(function(E,A){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(A)&&n.get(A).has(k)&&(G=n.get(A).get(k)),h.push({language:A,role:k,label:G})}}),h}re("shaka.Player",hn),hn.prototype.setVideoContainer=hn.prototype.Hg,hn.prototype.getManifestParserFactory=hn.prototype.rh,hn.prototype.getManifest=hn.prototype.Te,hn.prototype.retryStreaming=hn.prototype.vf,hn.prototype.setMaxHardwareResolution=hn.prototype.xi,hn.prototype.addChaptersTrack=hn.prototype.Qg,hn.prototype.addThumbnailsTrack=hn.prototype.Sg,hn.prototype.addTextTrackAsync=hn.prototype.Rg,hn.prototype.getStats=hn.prototype.getStats,hn.prototype.getBufferedInfo=hn.prototype.ob,hn.prototype.getSegmentAvailabilityDuration=hn.prototype.Nd,hn.prototype.getPresentationStartTimeAsDate=hn.prototype.eg,hn.prototype.getPlayheadTimeAsDate=hn.prototype.vh,hn.prototype.setTextTrackVisibility=hn.prototype.Dg,hn.prototype.getChapters=hn.prototype.jh,hn.prototype.getChaptersTracks=hn.prototype.bg,hn.prototype.isTextTrackVisible=hn.prototype.Ze,hn.prototype.selectVariantsByLabel=hn.prototype.si,hn.prototype.selectTextLanguage=hn.prototype.yf,hn.prototype.selectAudioLanguage=hn.prototype.wg,hn.prototype.getTextLanguages=hn.prototype.zh,hn.prototype.getAudioLanguages=hn.prototype.hh,hn.prototype.getTextLanguagesAndRoles=hn.prototype.Ah,hn.prototype.getAudioLanguagesAndRoles=hn.prototype.ih,hn.prototype.selectVariantTrack=hn.prototype.zf,hn.prototype.selectTextTrack=hn.prototype.xg,hn.prototype.getThumbnails=hn.prototype.fg,hn.prototype.getAllThumbnails=hn.prototype.gh,hn.prototype.getImageTracks=hn.prototype.oh,hn.prototype.getTextTracks=hn.prototype.wc,hn.prototype.getVariantTracks=hn.prototype.Hb,hn.prototype.cancelTrickPlay=hn.prototype.Wc,hn.prototype.trickPlay=hn.prototype.sd,hn.prototype.getPlaybackRate=hn.prototype.eb,hn.prototype.isBuffering=hn.prototype.Xe,hn.prototype.getKeyStatuses=hn.prototype.Kd,hn.prototype.getActiveSessionsMetadata=hn.prototype.Se,hn.prototype.getExpiration=hn.prototype.cd,hn.prototype.drmInfo=hn.prototype.drmInfo,hn.prototype.keySystem=hn.prototype.keySystem,hn.prototype.goToLive=hn.prototype.Hh,hn.prototype.seekRange=hn.prototype.Ib,hn.prototype.isAudioOnly=hn.prototype.Kh,hn.prototype.isInProgress=hn.prototype.dc,hn.prototype.isLive=hn.prototype.R,hn.prototype.getAdManager=hn.prototype.$f,hn.prototype.getAssetUri=hn.prototype.ad,hn.prototype.getNetworkingEngine=hn.prototype.Zb,hn.prototype.getMediaElement=hn.prototype.th,hn.prototype.getManifestType=hn.prototype.Ue,hn.prototype.getLoadMode=hn.prototype.qh,hn.prototype.resetConfiguration=hn.prototype.li,hn.prototype.getBufferFullness=hn.prototype.ag,hn.prototype.getConfiguration=hn.prototype.getConfiguration,hn.prototype.configure=hn.prototype.configure,hn.prototype.releaseAllMutexes=hn.prototype.hi,hn.prototype.preload=hn.prototype.preload,hn.prototype.unloadAndSavePreload=hn.prototype.Ai,hn.prototype.load=hn.prototype.load,hn.prototype.updateStartTime=hn.prototype.Ei,hn.prototype.unload=hn.prototype.lc,hn.prototype.detach=hn.prototype.detach,hn.prototype.attachCanvas=hn.prototype.Wg,hn.prototype.attach=hn.prototype.Vc,hn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,u,c,d;return Oe(function(h){if(h.g==1)return t={},e?x(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(Co())for(var A in ke)E[A]=!0;A=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=A.next();!k.done;k=A.next())k=k.value,E[k]=Co()?!!ke[k]:fu(k);for(n=E,A='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(gu)),E={},A=m(A),k=A.next();!k.done;k=A.next()){k=k.value,E[k]=Co()?Rl(k)?!0:Ot(k)||!!io(k):fu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}i=E,u={manifest:n,media:i,drm:t},c=N_;for(d in c)u[d]=c[d]();return h.return(u)})},hn.isBrowserSupported=function(){if(p.Promise||Ke("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Yr("Trident/"))return!1;var e=_s();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:Co()?!0:fu("application/x-mpegurl")},hn.setAdManagerFactory=function(e){pv=e},hn.registerSupportPlugin=function(e,t){N_[e]=t},hn.prototype.destroy=hn.prototype.destroy;var zs=0,x_=1,Lo=2,ga=3;hn.LoadMode={DESTROYED:zs,NOT_LOADED:x_,MEDIA_SOURCE:Lo,SRC_EQUALS:ga},hn.version="v4.8.2";var Sx=["4","8"];Or=new function(e){this.g=e,this.i=ei,this.h=eo}(new Pr(Number(Sx[0]),Number(Sx[1])));var N_={},pv=null;function wx(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var i=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new _t,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,i=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},re("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function gv(e,t,n,i,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new _t,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=i||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){wj(c,d)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(d){Ax(c,d)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}gv.prototype.configure=function(e){this.s=e},gv.prototype.stop=function(){this.g&&this.g.stop(),this.o&&gp(this.o)},gv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function Ax(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),vv(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function wj(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=m(i);for(var u=i.next();!u.done;u=i.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}Aj(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,mv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){vv(e,null)}}function mv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function Aj(e){function t(n,i){n=new Map().set("originalEvent",n),e.m(new Wn(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Ax(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Ix(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Ix(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){vv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){vv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Ix(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ke("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function vv(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,i,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=i}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},re("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function yp(e,t,n,i){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=i,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new _t}yp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);vd(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},yp.prototype.release=function(){this.stop(),this.o&&this.o.release()},yp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(Cj(this,this.G,this.T),this.T=!1)},yp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function Ij(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y;Oe(function(ve){if(ve.g==1)return i=Li([t],ua()),i.method="POST",n&&(u=JSON.stringify(n),i.body=Ya(u)),c=e.K.request(7,i),ce(ve,2),x(ve,c.promise,4);if(ve.g!=2){if(d=ve.h,h=Vr(d.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)A=new si(t),k=new si(E.trackingUrl),e.G=A.resolve(k).toString(),G=Date.now()/1e3,te=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",te))),Y=new si(E.manifestUrl),e.l.resolve(A.resolve(Y).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return he(ve,0)}if(Ce(ve),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ve.return();e.l.resolve(e.H),e.l=null,$(ve)})}function Cj(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge;Oe(function(Te){if(Te.g==1)return i=Li([t],ua()),u=e.K.request(7,i),ce(Te,2),x(Te,u.promise,4);if(Te.g!=2){if(c=Te.h,d=[],h=Vr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,A=m(e.j),k=A.next();!k.done;k=A.next())for(G=k.value,te=m(G.nonLinearAdsList),Y=te.next();!Y.done;Y=te.next())for(ve=Y.value,Pe=m(ve.nonLinearAdList),Ne=Pe.next();!Ne.done;Ne=Pe.next())Ge=Ne.value,bj(e,Ge);d=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d))),vd(e),e.j=[];return n&&(e.I||0<d.length)&&Rj(e),he(Te,0)}Ce(Te),$(Te)})}function bj(e,t){var n,i,u,c,d,h,E;Oe(function(A){if(A.g==1)return!t.staticResource||(n=Cx(t),e.F.get(n))?A.return():(i=Li([t.staticResource],ua()),u=e.K.request(7,i),ce(A,2),e.F.set(n,[]),x(A,u.promise,4));if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),E=h.apps,e.F.set(n,E),he(A,0);Ce(A),e.F.delete(n),$(A)})}function Cx(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Rj(e){Rx(e),e.I||(bx(e),e.o.D(e.g,"seeked",function(){bx(e)}),e.o.D(e.g,"ended",function(){vd(e)})),e.o.D(e.g,"timeupdate",function(){Rx(e)})}function bx(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,i,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var d=m(c.ads),h=d.next();!h.done;h=d.next())if(h=h.value,!i)h.startTimeInSeconds<t&&(i=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=h,n=c;break}}n&&i&&!e.N.includes(i.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function Rx(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var i=e.C,u=i.startTimeInSeconds+.5*i.durationInSeconds,c=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),ma(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),ma(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),ma(e,"thirdQuartile")),i=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=i||i>u)&&vd(e)}if(!e.h||!e.h.isLinear()){e:for(i=m(e.j),u=i.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=i.next())for(c=0;c<u.ads.length;c++){var d=u.ads[c],h=d.startTimeInSeconds+d.durationInSeconds;if(d.startTimeInSeconds<=t&&h>t){if(e.N.includes(d.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}vd(e),e.L=u,e.h=new or(d,c+1,u.ads.length,!0,e.g),e.C=d,c===0&&ma(e,"breakStart"),xx(e);break}}if(!e.h){for(i=m(e.j),u=i.next();!u.done&&(u=u.value,!e.h);u=i.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(d=u.nonLinearAdsList[c],d.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(Cx(d.nonLinearAdList[0]));if(h<=t&&E&&E.length){vd(e),h=e,E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.data.source.length){var k=document.createElement("img");k.src=A.data.source[0].url,k.style.top=(A.placeholder.top||0)+"%",k.style.height=100-(A.placeholder.top||0)+"%",k.style.left=(A.placeholder.left||0)+"%",k.style.maxWidth=100-(A.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(d,c+1,u.ads.length,!1,e.g),e.C=d,c===0&&ma(e,"breakStart"),xx(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function vd(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),ma(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&ma(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function xx(e){var t=!1;e.g.paused?t=!0:(ma(e,"impression"),ma(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&ma(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||ma(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(ma(e,"impression"),ma(e,"start"),t=!1):ma(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){ma(e,"pause")}});for(var n=m(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function ma(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var i=n.next();!i.done;i=n.next())(i=i.value)&&i!=""&&(i=Li([i],ua()),i.method="POST",e.K.request(7,i))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},re("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function Nx(e,t,n,i){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new _t,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){xj(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var d=c.getStreamData();c=[],d=m(d.cuepoints);for(var h=d.next();!h.done;h=d.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=Nx.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function xj(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function $n(){Sr.call(this),this.g=this.h=this.i=null,this.j=new wx,this.m=navigator.language,this.l=null}z($n,Sr),g=$n.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var i=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new gt(2,10,1e4);this.i&&this.i.release(),this.i=new gv(e,t,this.m,n,function(u){return M_(i,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new wx},g.requestClientSideAds=function(e){if(!this.i)throw new gt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new gt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var i=this;this.h&&this.h.release(),this.h=new yp(e,t,n,function(u){return M_(i,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new gt(1,10,10005);var i=this.h;return n=n===void 0?"":n,i.l?e=Promise.reject(new gt(1,10,10004)):(i.l=new Rr,Ij(i,e,t),i.H=n||"",i.Y=Date.now()/1e3,e=i.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new gt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new gt(2,10,10002);this.g&&this.g.release(),this.g=new Nx(e,t,this.m,function(i){return M_(n,i)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new gt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new gt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new gt(1,10,10003);(e.mpt||e.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function M_(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}re("shaka.ads.AdManager",$n),$n.prototype.onCueMetadataChange=$n.prototype.onCueMetadataChange,$n.prototype.onHlsTimedMetadata=$n.prototype.onHlsTimedMetadata,$n.prototype.onDashTimedMetadata=$n.prototype.onDashTimedMetadata,$n.prototype.onManifestUpdated=$n.prototype.onManifestUpdated,$n.prototype.getStats=$n.prototype.getStats,$n.prototype.getCuePoints=$n.prototype.getCuePoints,$n.prototype.getServerSideCuePoints=$n.prototype.getServerSideCuePoints,$n.prototype.replaceServerSideAdTagParameters=$n.prototype.replaceServerSideAdTagParameters,$n.prototype.requestServerSideStream=$n.prototype.requestServerSideStream,$n.prototype.initServerSide=$n.prototype.initServerSide,$n.prototype.addMediaTailorTrackingUrl=$n.prototype.addMediaTailorTrackingUrl,$n.prototype.requestMediaTailorStream=$n.prototype.requestMediaTailorStream,$n.prototype.initMediaTailor=$n.prototype.initMediaTailor,$n.prototype.updateClientSideAdsRenderingSettings=$n.prototype.updateClientSideAdsRenderingSettings,$n.prototype.requestClientSideAds=$n.prototype.requestClientSideAds,$n.prototype.onAssetUnload=$n.prototype.onAssetUnload,$n.prototype.release=$n.prototype.release,$n.prototype.initClientSide=$n.prototype.initClientSide,$n.prototype.configure=$n.prototype.configure,$n.prototype.setLocale=$n.prototype.setLocale,$n.ADS_LOADED="ads-loaded",$n.AD_STARTED="ad-started",$n.AD_FIRST_QUARTILE="ad-first-quartile",$n.AD_MIDPOINT="ad-midpoint",$n.AD_THIRD_QUARTILE="ad-third-quartile",$n.AD_COMPLETE="ad-complete",$n.AD_STOPPED="ad-stopped",$n.AD_SKIPPED="ad-skipped",$n.AD_VOLUME_CHANGED="ad-volume-changed",$n.AD_MUTED="ad-muted",$n.AD_PAUSED="ad-paused",$n.AD_RESUMED="ad-resumed",$n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$n.CUEPOINTS_CHANGED="ad-cue-points-changed",$n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$n.AD_CLICKED="ad-clicked",$n.AD_PROGRESS="ad-progress",$n.AD_BUFFERING="ad-buffering",$n.AD_IMPRESSION="ad-impression",$n.AD_DURATION_CHANGED="ad-duration-changed",$n.AD_CLOSED="ad-closed",$n.AD_LOADED="ad-loaded",$n.ALL_ADS_COMPLETED="all-ads-completed",$n.AD_LINEAR_CHANGED="ad-linear-changed",$n.AD_METADATA="ad-metadata",$n.AD_RECOVERABLE_ERROR="ad-recoverable-error",$n.AD_ERROR="ad-error",$n.AD_BREAK_READY="ad-break-ready",$n.AD_INTERACTION="ad-interaction",pv=function(){return new $n};function Mx(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var i={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(i[u]=t):u in Event||(i[u]=t);return i}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(i in n)u.add(i);for(t=m(Object.getOwnPropertyNames(n)),i=t.next();!i.done;i=t.next())u.add(i.value);for(t={},u=m(u),i=u.next();!i.done;i=u.next())i=i.value,t[i]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(vt(n)),i=n.next();!i.done;i=n.next())i=i.value,t=i.end,u.start.push(i.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function D_(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=Nj(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n;return i})}function Nj(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Dx="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Mj="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),P_=["loop","playbackRate"],Dj=["pause","play"],yv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},Ev={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},O_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},Px=[["getConfiguration","configure"]],Ox=[["isTextTrackVisible","setTextTrackVisibility"]],Pj="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Oj=["attach","attachCanvas","detach","load","unload"];function L_(e,t,n,i,u,c,d){var h=this;this.G=e,this.K=d,this.l=new pr(t),this.L=n,this.s=!1,this.A=i,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return k_(h)},this.C=function(E,A){switch(E=D_(A),E.type){case"event":var k=E.targetName,G=Mm(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var te in k[G])E[te]=k[G][te]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,te=E.error,E=h.i[G],delete h.i[G],E)if(te){G=new gt(te.severity,te.category,te.code);for(k in te)G[k]=te[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,_p.add(this)}g=L_.prototype,g.destroy=function(){return _p.delete(this),F_(this),ws&&kx(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(_p),i=n.next();!i.done;i=n.next()){i=i.value;var u=t;i.j=new Rr,i.s=!0,_v(i,u)}},function(t){for(var n=m(_p),i=n.next();!i.done;i=n.next())i=i.value,Tv=t=="available",i.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Tv&&this.l.X(kj),(e=ws)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,_v(this,e)):ws=null}else p.__onGCastApiAvailable!==Fx&&(Sv=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=Fx)},g.Af=function(e){this.o=e,this.h&&Ep(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return Oe(function(t){if(!e.m)throw new gt(1,8,8e3);if(!Tv)throw new gt(1,8,8001);if(e.h)throw new gt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return _v(e,n)},function(n){return Lx(e,n)}),x(t,e.j,0)})};function Lj(e){e.h&&chrome.cast.requestSession(function(t){return _v(e,t)},function(t){return Lx(e,t)})}g.uc=function(){if(this.h){if(F_(this),ws){kx(this);try{ws.stop(function(){},function(){})}catch(e){}ws=null}k_(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(Dj.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))}}else if(e=="player"){if(O_[t]&&!this.get("player","isLive")())return function(){};if(Pj.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(Oj.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(yv[t]||Ev[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,Ep(this,{type:"set",targetName:e,property:t,value:n})};function _v(e,t){var n=e.N();ws=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),k_(e),Ep(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Lx(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new gt(2,8,n,t))}g.ug=function(e,t){Ep(this,{type:"call",targetName:e,methodName:t,args:Qe.apply(2,arguments)})},g.ii=function(e,t){var n=Qe.apply(2,arguments),i=new Rr,u=this.H.toString();this.H++,this.i[u]=i;try{Ep(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){i.reject(c)}return i};function kx(e){var t=ws;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function k_(e){var t=ws?ws.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};F_(e)}e.h=t,e.I=t?ws.receiver.friendlyName:"",e.l.kc()}function F_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new gt(1,7,7e3))}}function Ep(e,t){t=Mx(t);var n=ws;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},ot)}catch(i){throw t=new gt(2,8,8005,i),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var kj=.02,Tv=!1,ws=null,Sv=null,_p=new Set;function Fx(e){if(Sv?p.__onGCastApiAvailable=Sv:delete p.__onGCastApiAvailable,Sv=null,e)for(var t=m(_p),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function xi(e,t,n,i){i=i===void 0?!1:i,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=i,this.A=new Map,this.g=new L_(n,function(){return jx(u)},function(){return Zx(u)},function(c,d){return qx(u,c,d)},function(){return Gx(u)},function(){return Bx(u)},i),Fj(this)}z(xi,Sr),g=xi.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&Tv},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return Oe(function(t){return t.g==1?x(t,e.g.cast(),2):e.h?x(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){Lj(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return Oe(function(i){if(i.g==1)return e==n.C&&t==n.B?i.return():(n.C=e,n.B=t,n.g.uc(),x(i,n.g.destroy(),2));n.g=null,n.g=new L_(e,function(){return jx(n)},function(){return Zx(n)},function(u,c){return qx(n,u,c)},function(){return Gx(n)},function(){return Bx(n)},t),n.g.init(),$(i)})};function Fj(e){e.g.init(),e.m=new _t;for(var t=m(Dx),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=Mm(c),e.j.dispatchEvent(c))});for(var i in Mc)e.m.D(e.h,Mc[i],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return Bj(e,c.Kc)}}(t),set:function(c){return function(d){var h=c.Kc;e.g.Ua()?e.g.set("video",h,d):e.i[h]=d}}(t)}),t={Kc:t.Kc};e.s={},Ux(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return jj(e,c)}})}),Uj(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function Uj(e){var t=new Map;Ux(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.A.set(n,i):e.A.set(i,n)):t.set(i,n)})}function Ux(e,t){function n(E){return E=="constructor"||typeof i[E]!="function"?!1:!u.has(E)}var i=e.h,u=new Set,c;for(c in i)n(c)&&(u.add(c),t(c,i[c]));for(e=Object.getPrototypeOf(i),c=Object.getPrototypeOf({});e&&e!=c;){for(var d=m(Object.getOwnPropertyNames(e)),h=d.next();!h.done;h=d.next())h=h.value,n(h)&&(u.add(h),t(h,i[h]));e=Object.getPrototypeOf(e)}}function Bx(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(P_),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(Px),i=n.next();!i.done;i=n.next()){var u=i.value;i=u[1],u=e.h[u[0]](),t.player[i]=u}for(n=m(Ox),i=n.next();!i.done;i=n.next())u=i.value,i=u[1],u=e.h[u[0]](),t.playerAfterLoad[i]=u;return t}function jx(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function Zx(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Gx(e){for(var t=m(Px),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var u=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var d;(i=e.g.get("player","getTextTracks")())&&i.length&&(d=i.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(P_),i=n.next();!i.done;i=n.next())i=i.value,E[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var A=m(P_),k=A.next();!k.done;k=A.next())k=k.value,e.i[k]=E[k];for(A=m(Ox),k=A.next();!k.done;k=A.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),d&&e.h.yf(d.language,d.roles,d.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new Wn("error",A),e.h.dispatchEvent(A)})}function Bj(e,t){if(t=="addEventListener")return function(i,u,c){return e.j.addEventListener(i,u,c)};if(t=="removeEventListener")return function(i,u,c){return e.j.removeEventListener(i,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function jj(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,i,u){return e.o.addEventListener(n,i,u)};if(t=="removeEventListener")return function(n,i,u){return e.o.removeEventListener(n,i,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return Ke(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ke(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(yv[t]||Ev[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function qx(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}re("shaka.cast.CastProxy",xi),xi.prototype.changeReceiverId=xi.prototype.Yg,xi.prototype.forceDisconnect=xi.prototype.uc,xi.prototype.suggestDisconnect=xi.prototype.zi,xi.prototype.setAppData=xi.prototype.Af,xi.prototype.cast=xi.prototype.cast,xi.prototype.receiverName=xi.prototype.tf,xi.prototype.isCasting=xi.prototype.Ua,xi.prototype.canCast=xi.prototype.Xg,xi.prototype.getPlayer=xi.prototype.uh,xi.prototype.getVideo=xi.prototype.Fh,xi.prototype.destroy=xi.prototype.destroy;function yo(e,t,n,i){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new _t,this.H={video:e,player:t},this.C=n||function(){},this.I=i||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){U_(u)}),Zj(this)}z(yo,Sr),g=yo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return Oe(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),x(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),$(i)})};function Zj(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Hx(e)},t.onSenderDisconnected=function(){return Hx(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&al(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),al(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return Hj(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return qj(e,u)},t.start(),t=m(Dx);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return Kx(e,"video",u)});for(var i in Mc)e.j.D(e.h,Mc[i],function(u){return Kx(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,yd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,yd(e)}),e.j.D(e.g,"pause",function(){yd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,yd(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,yd(e))}).X(Vj)})}function Hx(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,yd(e)}function yd(e){var t;Oe(function(n){if(n.g==1)return x(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),Vx(e)||sl(e),$(n)})}function Gj(e,t,n){var i,u,c,d,h,E,A,k,G,te;Oe(function(Y){switch(Y.g){case 1:for(i in t.player)u=t.player[i],e.h[i](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(Y,5),x(Y,e.h.load(t.manifest,t.startTime),7)):x(Y,Promise.resolve(),3);case 7:he(Y,3);break;case 5:return d=Ce(Y),h=new Map().set("detail",d),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),Y.return();case 3:if(!e.h)return Y.return();for(A in t.video)k=t.video[A],e.g[A]=k;for(G in t.playerAfterLoad)te=t.playerAfterLoad[G],e.h[G](te);e.g.autoplay=c,t.manifest&&(e.g.play(),sl(e)),$(Y)}})}function Kx(e,t,n){e.h&&(U_(e),al(e,{type:"event",targetName:t,event:n},e.l))}function U_(e){e.G.X(Kj);for(var t={video:{},player:{}},n=m(Mj),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.R())for(var u in O_)e.m%O_[u]==0&&(t.player[u]=e.h[u]());for(var c in yv)e.m%yv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),al(e,{type:"update",update:t},e.l);for(var d in Ev)e.m%Ev[d]==0&&(t={player:{}},t.player[d]=e.h[d](),al(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),Vx(e)}function Vx(e){return e.A&&(e.g.duration||e.h.R())?(B_(e),e.A=!1,!0):!1}function B_(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),sl(e,t===void 0?0:t,n)}function qj(e,t){var n=D_(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,Gj(e,n.initState,n.appData),U_(e);break;case"appData":e.C(n.appData);break;case"set":var i=n.targetName,u=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[i][u]=n;break;case"call":i=e.H[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,u=n.methodName,i=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,d=t.senderId;t=e.H[i],n=t[u].apply(t,n.args),i=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return zx(e,d,c,null)},function(h){return zx(e,d,c,h)})}}function Hj(e,t){var n=D_(t.data);switch(n.type){case"PLAY":e.g.play(),sl(e);break;case"PAUSE":e.g.pause(),sl(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.g.play(),sl(e)):i&&i=="PLAYBACK_PAUSE"&&(e.g.pause(),sl(e));break;case"STOP":e.h.lc().then(function(){e.h&&sl(e)});break;case"GET_STATUS":B_(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),i!=null&&(e.g.muted=i),u==e.g.volume&&c==e.g.muted||sl(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,i=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,i).then(function(){e.h&&B_(e)}).catch(function(d){var h="LOAD_FAILED";d.category==7&&d.code==7e3&&(h="LOAD_CANCELLED"),al(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:al(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function zx(e,t,n,i){e.h&&al(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function al(e,t,n,i){e.F&&(e=Mx(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function sl(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?zj:e.h.Xe()?Wj:e.g.paused?$j:Yj,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),al(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}re("shaka.cast.CastReceiver",yo),yo.prototype.destroy=yo.prototype.destroy,yo.prototype.setContentArtist=yo.prototype.ti,yo.prototype.setContentImage=yo.prototype.ui,yo.prototype.setContentTitle=yo.prototype.wi,yo.prototype.clearContentMetadata=yo.prototype.bh,yo.prototype.setContentMetadata=yo.prototype.vi,yo.prototype.isIdle=yo.prototype.Lh,yo.prototype.isConnected=yo.prototype.isConnected;var Kj=.5,Vj=5,zj="IDLE",Yj="PLAYING",Wj="BUFFERING",$j="PAUSED";function Yx(e,t,n,i,u){if(i>=u)return null;for(var c=-1,d=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){d=h;break}if(c===-1||d===-1)return null;for(var E=h=!1,A="white",k="black",G=j_(i,u,h,E,A,k);c<=d;c++){for(var te=n[c],Y=-1,ve=-1,Pe=0;Pe<te.length;Pe++)if(te[Pe]!=null&&te[Pe].g.trim()!==""){Y=Pe;break}for(Pe=te.length-1;0<=Pe;Pe--)if(te[Pe]!=null&&te[Pe].g.trim()!==""){ve=Pe;break}if(Y===-1||ve===-1)te=Wx(i,u),e.nestedCues.push(te);else{for(;Y<=ve;Y++)if(Pe=te[Y]){var Ne=Pe.l,Ge=Pe.i,Te=Pe.j,$e=Pe.h;(Ne!=h||Ge!=E||Te!=A||$e!=k)&&(G.payload&&e.nestedCues.push(G),G=j_(i,u,Ne,Ge,Te,$e),h=Ne,E=Ge,A=Te,k=$e),G.payload+=Pe.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==d&&(G=Wx(i,u),e.nestedCues.push(G)),G=j_(i,u,h,E,A,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function j_(e,t,n,i,u,c){return e=new bn(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function Wx(e,t){return e=new bn(e,t,""),e.lineBreak=!0,e}function $x(e,t,n,i,u){this.g=e,this.l=t,this.i=n,this.h=i,this.j=u}function Z_(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Tp(this)}function wv(e,t,n){var i="CC"+((e.A<<1|e.s)+1),u=new bn(t,n,"");u.lineInterpretation=1;var c=e6.get(e.g);return c&&(u.line=c),Yx(u,i,e.i,t,n)}function Tp(e){ul(e,0,15),e.g=1}function Ed(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case Sp:i=tN.has(n)?tN.get(n):String.fromCharCode(n);break;case Qx:i=Xj.get(n);break;case Jx:e.i[e.g].pop(),i=Qj.get(n);break;case eN:e.i[e.g].pop(),i=Jj.get(n)}i&&e.i[e.g].push(new $x(i,e.m,e.j,e.o,e.l))}}function Xx(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(c){return c});else for(var u=0;u<i;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function ul(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Sp=0,Qx=1,Jx=2,eN=3,tN=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Xj=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),Qj=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),Jj=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),e6=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Av(e,t){this.h=iN,this.o=new Z_(e,t),this.i=new Z_(e,t),this.g=this.j=new Z_(e,t),this.l=0,this.m=null}function G_(e,t,n){e.g=e.i;var i=e.g,u=null;return e.h!==Iv&&e.h!==wp&&(u=wv(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,ul(n,0,15),n=e.j,n.g=0<n.h?n.h:0,ul(n,0,15),i.g=15),e.h=Iv,i.h=t,u}function nN(e){e.h=t6,e.g=e.j,e.g.h=0}function rN(e){St("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=wp}var iN=0,t6=1,Iv=3,wp=4,n6="black green blue cyan red yellow magenta black".split(" "),oN="white green blue cyan red yellow magenta white_italics".split(" ");function aN(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=o6,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",q_(this)}function q_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(H_())}function H_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Kc(e,t){sN(e)&&(e.i[e.h][e.g]=new $x(t,e.C,e.A,e.s,e.B),e.g++)}function sN(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}aN.prototype.isVisible=function(){return this.l};function Vc(e,t,n){var i=new bn(e.j,t,"");i.textAlign=e.F===r6?"left":e.F===i6?"right":kn;var u=i.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case a6:u.regionAnchorX=0,u.regionAnchorY=0;break;case s6:u.regionAnchorX=50,u.regionAnchorY=0;break;case u6:u.regionAnchorX=100,u.regionAnchorY=0;break;case l6:u.regionAnchorX=0,u.regionAnchorY=50;break;case c6:u.regionAnchorX=50,u.regionAnchorY=50;break;case f6:u.regionAnchorX=100,u.regionAnchorY=50;break;case d6:u.regionAnchorX=0,u.regionAnchorY=100;break;case h6:u.regionAnchorX=50,u.regionAnchorY=100;break;case p6:u.regionAnchorX=100,u.regionAnchorY=100}return(n=Yx(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var r6=0,i6=1,o6=2,a6=0,s6=1,u6=2,l6=3,c6=4,f6=5,d6=6,h6=7,p6=8;function g6(){this.i=[],this.h=null,this.g=0}function m6(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Cv(e.h)),e.h=null,e.g=0))}function Cv(e){this.g=0,this.h=e}Cv.prototype.ka=function(){return this.g<this.h.length},Cv.prototype.wa=function(){return this.g};function ao(e){if(!e.ka())throw new gt(2,2,3e3);return e.h[e.g++]}Cv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new gt(2,2,3e3);this.g+=e};function v6(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function y6(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=ao(t).value,t=null,n=m(Ap(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Vc(u,i,e.i)),q_(u);return t}if(n===137)for(t=ao(t).value,t=m(Ap(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.l=!0;else{if(n===138){for(n=ao(t).value,t=null,n=m(Ap(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Vc(u,i,e.i)),u.l=!1;return t}if(n===139){for(n=ao(t).value,t=null,n=m(Ap(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Vc(u,i,e.i):u.j=i,u.l=!u.l;return t}if(n===140)return t=ao(t).value,uN(e,t,i);if(n===143)return i=uN(e,255,i),lN(e),i;if(n===144)t.skip(1),i=ao(t).value,e.g&&(e.g.A=0<(i&128),e.g.C=0<(i&64));else if(n===145)i=ao(t).value,n=ao(t).value,t.skip(1),e.g&&(t=cN((n&48)>>4,(n&12)>>2,n&3),e.g.B=cN((i&48)>>4,(i&12)>>2,i&3),e.g.s=t);else if(n===146)i=ao(t).value,t=ao(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=ao(t).value,t.skip(1),e.g&&(e.g.F=i&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new aN(n,e.i);c.j=i,e.h[n]=c}i=ao(t).value,c=ao(t).value;var d=ao(t).value,h=ao(t).value,E=ao(t).value;t=ao(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(i&32),t.L=c&127,t.H=d,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function Ap(e,t){for(var n=[],i=0;8>i;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function uN(e,t,n){var i=null;t=m(Ap(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(i=Vc(c,n,e.i)),e.h[u]=null}return i}function lN(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function cN(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],E6[e<<2|t<<1|n]}var fN=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),E6="black blue green cyan red magenta yellow white".split(" ");function _d(){this.h=[],this.g=[],this.i=new g6,this.l=0,this.m=new Map([["CC1",new Av(0,0)],["CC2",new Av(0,1)],["CC3",new Av(1,0)],["CC4",new Av(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,K_(this)}_d.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,K_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())lN(t.value)};function K_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=iN,n.g=n.j,n.m=null,Tp(n.i),Tp(n.j),Tp(n.o);e.B=!0}_d.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var u=e.P(),c=(u&4)>>2,d=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:d,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:d,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},_d.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),i=n.next();!i.done;i=n.next())(i=_6(this,i.value))&&t.push(i);for(n=m(this.g),i=n.next();!i.done;i=n.next())m6(this.i,i.value);for(n=m(this.i.i),i=n.next();!i.done;i=n.next())i=T6(this,i.value),t.push.apply(t,T(i));return this.i.i=[],this.h=[],this.g=[],t};function _6(e,t){var n=t.type;if((t.cb&112)===16){var i=t.cb>>3&1;n===0?e.o=i:e.s=i}if(i="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(i),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!dN(t.cb)||!dN(t.vb))return 45<=++e.l&&K_(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(i),e=null,(t.cb&112)===16)e:{if(i=t.cb,e=t.vb,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1];var u=(e&30)>>1;i="white";var c=!1;7>u?i=oN[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==wp&&(u=n.g,n.h===Iv&&t!==u.g&&(n=1+t-u.h,Xx(u,n,1+u.g-u.h,u.h),ul(u,0,n-1),ul(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=i,u.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Ed(n.g,Sp,32),i=!1,t=oN[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",!(i&7)&&(t=n6[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)Ed(n.g,Qx,e);else if((i&246)===18&&(e&224)===32)Ed(n.g,i&1?eN:Jx,e);else if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.vb){case 32:nN(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=G_(n,2,e);break;case 38:i=G_(n,3,e);break;case 39:i=G_(n,4,e);break;case 40:Ed(n.g,Sp,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Tp(n.o),rN(n);break;case 43:rN(n);break;case 44:t=n.i,i=null,n.h!==wp&&(i=wv(t,n.l,e)),ul(t,0,15);break;case 45:t=n.g,n.h!==Iv?i=null:(i=wv(t,n.l,e),c=t.g-t.h+1,Xx(t,c-1,c,t.h),ul(t,0,c-1),ul(t,t.g,15-t.g),n.l=e);break;case 46:ul(n.j,0,15);break;case 47:t=null,n.h!==wp&&(t=wv(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,nN(n),n.l=e,i=t}e=i;break e}e=null}else i=t.vb,Ed(n.g,Sp,t.cb),Ed(n.g,Sp,i);return e}function T6(e,t){var n=[];try{for(;t.ka();){var i=ao(t).value,u=(i&224)>>5,c=i&31;if(u===7&&c!=0&&(u=ao(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new v6(u));for(var d=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=ao(u),A=E.value,k=E.pts;if(A===16){var G=ao(u);A=A<<16|G.value}if(0<=A&&31>=A){var te=k;if(d.g){var Y=d.g;switch(u=null,A){case 8:!sN(Y)||0>=Y.g&&0>=Y.h||(0>=Y.g?(Y.g=Y.m-1,Y.h--):Y.g--,Y.i[Y.h][Y.g]=null);break;case 13:if(Y.isVisible()&&(u=Vc(Y,te,d.i)),Y.h+1>=Y.o){te=Y;for(var ve=0,Pe=1;16>Pe;Pe++,ve++)te.i[ve]=te.i[Pe];for(Pe=0;1>Pe;Pe++,ve++)te.i[ve]=H_()}else Y.h++;Y.g=0;break;case 14:Y.isVisible()&&(u=Vc(Y,te,d.i)),Y.i[Y.h]=H_(),Y.g=0;break;case 12:Y.isVisible()&&(u=Vc(Y,te,d.i)),q_(Y),te=Y,te.h=0,te.g=0}var Ne=u}else Ne=null}else if(128<=A&&159>=A)Ne=y6(d,u,A,k);else{if(4096<=A&&4127>=A)te=A&255,8<=te&&15>=te?u.skip(1):16<=te&&23>=te?u.skip(2):24<=te&&31>=te&&u.skip(3);else if(4224<=A&&4255>=A)te=A&255,128<=te&&135>=te?u.skip(4):136<=te&&143>=te&&u.skip(5);else if(32<=A&&127>=A)u=A,d.g&&(u===127?Kc(d.g,"♪"):Kc(d.g,String.fromCharCode(u)));else if(160<=A&&255>=A)d.g&&Kc(d.g,String.fromCharCode(A));else if(4128<=A&&4223>=A){if(u=A&255,d.g)if(fN.has(u)){var Ge=fN.get(u);Kc(d.g,Ge)}else Kc(d.g,"_")}else 4256<=A&&4351>=A&&d.g&&((A&255)!=160?Kc(d.g,"_"):Kc(d.g,"[CC]"));Ne=null}(u=Ne)&&n.push(u)}}}}catch(Te){if(Te instanceof gt&&Te.code===3e3)St("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Te}return n}function dN(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}_d.prototype.getStreams=function(){return Array.from(this.A)},re("shaka.cea.CeaDecoder",_d),Mt=function(){return new _d};function hN(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(T(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var u=0;e[i]==255;)u+=255,i++;u+=e[i++],n==4&&t.push(e.subarray(i,i+u)),i+=u}return t}function bv(){this.j=new Map,this.i=this.h=0,this.g=V_}bv.prototype.init=function(e){function t(c){c=c.name,c in Rv&&(n.g=Rv[c])}var n=this,i=[],u=[];if(new kr().box("moov",yr).box("mvex",yr).O("trex",function(c){var d=c.reader;d.skip(4),d.skip(4),c=d.M(),d=d.M(),n.h=c,n.i=d}).box("trak",yr).O("tkhd",function(c){c=Zt(c.reader,c.version),i.push(c.trackId)}).box("mdia",yr).O("mdhd",function(c){c=It(c.reader,c.version),u.push(c.timescale)}).box("minf",yr).box("stbl",yr).O("stsd",yu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",wi).box("sinf",yr).box("frma",function(c){c=un(c.reader).Ea,c in Rv&&(n.g=Rv[c])}).parse(e,!0),!i.length||!u.length||i.length!=u.length)throw new gt(2,2,2010);this.g==V_&&Ke("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(c,d){n.j.set(c,u[d])})},bv.prototype.parse=function(e){var t=this;if(this.g==V_)return[];var n=[],i=this.h,u=this.i,c=0,d=[],h=null,E=9e4;return new kr().box("moof",function(A){c=A.start,d=[],yr(A)}).box("traf",yr).O("trun",function(A){A=$t(A.reader,A.version,A.flags),d.push(A)}).O("tfhd",function(A){A=rr(A.reader,A.flags),i=A.Wf||t.h,u=A.fh||t.i,A=A.trackId,t.j.has(A)&&(E=t.j.get(A))}).O("tfdt",function(A){h=ir(A.reader,A.version).baseMediaDecodeTime}).box("mdat",function(A){if(h===null)throw Ke("Unable to find base media decode time for CEA captions!"),new gt(2,2,2010);S6(t,A.reader,h,E,i,u,c-A.start-8,d,n)}).parse(e,!1),n};function S6(e,t,n,i,u,c,d,h,E){var A=0,k=c,G=h.map(function(ve){return ve.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(d+h[0].eh);t.ka();){d=t.M();var te=t.P(),Y=null;switch(Y=!1,h=1,e.g){case Ip:Y=te&31,Y=Y==6;break;case Cp:h=2,t.skip(1),Y=te>>1&63,Y=Y==39||Y==40;break;default:return}if(Y)for(te=0,A<G.length&&(te=G[A].he||0),te=(n+te)/i,h=m(hN(t.sb(d-h))),Y=h.next();!Y.done;Y=h.next())E.push({packet:Y.value,pts:te});else try{t.skip(d-h)}catch(ve){break}k-=d+4,k==0&&(n=A<G.length?n+(G[A].wf||u):n+u,A++,A<G.length?k=G[A].sampleSize||c:k=c)}}re("shaka.cea.Mp4CeaParser",bv);var V_=0,Ip=1,Cp=2,Rv={avc1:Ip,avc3:Ip,hev1:Cp,hvc1:Cp,dvav:Ip,dva1:Ip,dvh1:Cp,dvhe:Cp};zt["video/mp4"]=function(){return new bv};function xv(){this.g=null}xv.prototype.init=function(){},xv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ve;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),i=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var u=m(hN(i.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:i.time});return t},re("shaka.cea.TsCeaParser",xv),zt["video/mp2t"]=function(){return new xv};function pN(e,t,n){var i=b6(e),u=null;e=[];var c=[],d=null,h=new Set(i.map(function(A){return A.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new gt(2,4,4010);if(!t){if(c=i.filter(function(A){return A.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new gt(2,4,4050);c.length&&(d=x6(c[0])),(c=i.find(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=i.filter(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=C6(u,E,c,n,h),e.length==0&&(e=[Uu("",E,u)]))}if(i.length&&!d&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Uu(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:d,Zf:!0}}function w6(e,t,n,i){var u=pN(e,n,i);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(d){return d.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new gt(2,4,4008);return u.Vf||t.Vf}function A6(e){var t=0,n=tn(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:i,value:c}),e+=u}n=t}return n}function I6(e){e=m(xa(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ri(n)}return""}function Nv(e){var t=js(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=js(e.node,"urn:microsoft:playready","pro"),!e||!Ri(e)||(e=Ri(e),e=Ho(e),e=A6(e).filter(function(n){return n.type===N6})[0],!e)?"":(e=Va(e.value,!0),(e=Bl(e,"WRMHEADER"))?I6(e):""))}function C6(e,t,n,i,u){var c=[];n=m(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var h=i[d.Dc];if(h){var E;if((E=js(d.node,"urn:microsoft:playready","pro"))&&Ri(E)){E=Ri(E),E=Ho(E);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:Wf(E,A,new Set,0),initDataType:"cenc",keyId:d.keyId}]}else E=null;if(A=null,d.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(A=u,A.size==0)A=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);A=[{initData:Wf(G,k,A,1),initDataType:"cenc",keyId:d.keyId}]}E=Uu(h,t,d.init||e||E||A),(h=M6.get(h))&&(E.licenseServerUri=h(d)),c.push(E)}}return c}function b6(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=R6(n.value))&&t.push(n);return t}function R6(e){var t=e.attributes.schemeIdUri,n=_u(e,"urn:mpeg:cenc:2013","default_KID"),i=Xf(e,"urn:mpeg:cenc:2013","pssh").map(Eu),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new gt(2,4,4009);var c=[];try{c=i.map(function(d){return{initDataType:"cenc",initData:Ho(d),keyId:null}})}catch(d){throw new gt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function x6(e){if(!p.crypto||!p.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new gt(2,4,4042);var t=js(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new gt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new gt(2,4,4051);if(t=js(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new gt(2,4,4051);if(e=t.attributes.IV,t=bo(t.attributes.keyUriTemplate),!e||!t)throw new gt(2,4,4051);if(e=pu(e.substr(2)),e.byteLength!=16)throw new gt(2,4,4048);return{Rh:t,iv:e}}var N6=1,M6=new Map().set("com.widevine.alpha",function(e){var t=js(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=js(e.node,"urn:microsoft","laurl"))&&bo(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Nv).set("com.microsoft.playready.recommendation",Nv).set("com.microsoft.playready.software",Nv).set("com.microsoft.playready.hardware",Nv).set("org.w3.clearkey",function(e){var t=js(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ri(t))?t:(e=js(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ri(e))?e:""});function Mv(e,t,n,i,u,c){var d={RepresentationID:t,Number:n,SubNumber:i,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,A,k){if(h=="$$")return"$";var G=d[E];if(G==null)return h;switch(E=="RepresentationID"&&A&&(A=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&Ke("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return A=p.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function gN(e,t){var n=wu(e,t,"timescale"),i=1;n&&(i=Zs(n)||1),n=wu(e,t,"duration"),(n=Zs(n||""))&&(n/=i);var u=wu(e,t,"startNumber"),c=Number(wu(e,t,"presentationTimeOffset"))||0,d=xo(u||"");(u==null||d==null)&&(d=1);var h=Dv(e,t,"SegmentTimeline");if(t=null,h){t=i,e=e.ha.duration||1/0,u=d,h=Wr(h,"S");for(var E=[],A=-c,k=0;k<h.length;++k){var G=h[k],te=h[k+1],Y=_r(G,"t",xo),ve=_r(G,"d",xo),Pe=_r(G,"r",Ju);if(G=_r(G,"k",Ju)||0,Y!=null&&(Y-=c),!ve)break;if(Y=Y!=null?Y:A,Pe=Pe||0,0>Pe)if(te){if(te=_r(te,"t",xo),te==null)break;if(Y>=te)break;Pe=Math.ceil((te-Y)/ve)-1}else{if(e==1/0)break;if(Y/t>=e)break;Pe=Math.ceil((e*t-Y)/ve)-1}for(0<E.length&&Y!=A&&(E[E.length-1].end=Y/t),te=0;te<=Pe;++te)A=Y+ve,E.push({start:Y/t,end:A/t,Kf:Y,rb:G,ri:E.length+u}),Y=A}t=E}return{timescale:i,Da:n,rd:d,Bb:c/i||0,Jf:c,timeline:t}}function mN(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(Zu)}function wu(e,t,n){t=mN(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Dv(e,t,n){t=mN(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=la(i.value,n));i=t.next());return e}function D6(e,t,n,i,u,c){for(var d=_u(e,"http://www.w3.org/1999/xlink","href"),h=_u(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),A=E.next();!A.done;A=E.next()){A=A.value;var k=A.split(":"),G=Lc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[A]}if(5<=c)return mu(new gt(2,4,4028));if(h!="onLoad")return mu(new gt(2,4,4027));var te=ho([i],[d]);return u.request(0,Li(te,t)).va(function(Y){if(Y=Jh(Y.data,e.tagName),!Y)return mu(new gt(2,4,4001,d));for(e.children=[];Y.children.length;){var ve=Y.children.shift();ve.tagName&&(ve.parent=e),e.children.push(ve)}ve=m(Object.keys(Y.attributes));for(var Pe=ve.next();!Pe.done;Pe=ve.next())Pe=Pe.value,e.attributes[Pe]=Y.attributes[Pe];return Pv(e,t,n,te[0],u,c+1)})}function Pv(e,t,n,i,u,c){if(c=c===void 0?0:c,_u(e,"http://www.w3.org/1999/xlink","href")){var d=D6(e,t,n,i,u,c);return n&&(d=d.va(void 0,function(){return Pv(e,t,n,i,u,c)})),d}d=[];for(var h={},E=m(jE(e)),A=E.next();!A.done;h={pc:h.pc},A=E.next())h.pc=A.value,_u(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&d.push(Pv(h.pc,t,n,i,u,c));return Vf(d).va(function(){return e})}function P6(e,t,n,i,u,c,d){var h,E=new kr().O("sidx",function(A){h=O6(t,i,u,c,d,n,A)});if(e&&E.parse(e),h)return h;throw new gt(2,3,3004)}function O6(e,t,n,i,u,c,d){var h=[];d.reader.skip(4);var E=d.reader.M();if(E==0)throw new gt(2,3,3005);if(d.version==0)var A=d.reader.M(),k=d.reader.M();else A=d.reader.Cc(),k=d.reader.Cc();d.reader.skip(2);var G=d.reader.ra();for(e=e+d.size+k,k=0;k<G;k++){var te=d.reader.M(),Y=(te&2147483648)>>>31;te&=2147483647;var ve=d.reader.M();if(d.reader.skip(4),Y==1)throw new gt(2,3,3006);h.push(new Je(A/E+n,(A+ve)/E+n,function(){return c},e,e+te-1,t,n,i,u)),A+=ve,e+=te}return d.parser.stop(),h}function Zl(e){this.h=tn(e),this.g=new Dr(this.h,0)}Zl.prototype.ka=function(){return this.g.ka()};function ll(e){var t=vN(e);if(7<t.length)throw new gt(2,3,3002);var n=0;t=m(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=vN(e);e:{i=m(L6);for(var u=i.next();!u.done;u=i.next())if(zi(t,new Uint8Array(u.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new gt(2,3,3001);for(u=i=0;u<t.length;u++){var c=t[u];i=u==0?c&(1<<8-t.length)-1:256*i+c}t=i}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),i=tn(e.h,e.g.wa(),t),e.g.skip(t),new k6(n,i)}function vN(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new gt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var L6=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function k6(e,t){this.id=e,this.g=t}function z_(e){if(8<e.g.byteLength)throw new gt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new gt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function F6(e,t,n,i,u,c,d,h,E){function A(){return u}var k=[];e=new Zl(e.g);for(var G=null,te=null;e.ka();){var Y=ll(e);if(Y.id==187){var ve=U6(Y);ve&&(Y=n*ve.Di,ve=t+ve.gi,G!=null&&k.push(new Je(G+d,Y+d,A,te,ve-1,c,d,h,E)),G=Y,te=ve)}}return G!=null&&k.push(new Je(G+d,i+d,A,te,null,c,d,h,E)),k}function U6(e){var t=new Zl(e.g);if(e=ll(t),e.id!=179)throw new gt(2,3,3013);if(e=z_(e),t=ll(t),t.id!=183)throw new gt(2,3,3012);t=new Zl(t.g);for(var n=0;t.ka();){var i=ll(t);if(i.id==241){n=z_(i);break}}return{Di:e,gi:n}}function yN(e,t,n){if(t=Dv(e,t,"Initialization"),!t)return null;var i=e.J.nb(),u=t.attributes.sourceURL;u&&(i=ho(i,[bo(u)])),u=0;var c=null;return(t=_r(t,"range",Jf))&&(u=t.start,c=t.end),n=new dt(function(){return i},u,c,SN(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function B6(e,t,n){var i=Number(wu(e,Td,"presentationTimeOffset"))||0,u=wu(e,Td,"timescale"),c=1;u&&(c=Zs(u)||1);var d=i/c||0,h=yN(e,Td,n);j6(e,h);var E=mm(e);return{vc:function(){var A=Dv(E,Td,"RepresentationIndex"),k=E.J.nb();return A&&(A=bo(A.attributes.sourceURL))&&(k=ho(k,[A])),A=_N(E),EN(E,t,h,k,A.start,A.end,d)}}}function EN(e,t,n,i,u,c,d){var h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut;return Oe(function(Et){if(Et.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,A=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],te=t,Y=null,ve=[te(i,u,c,!1),G=="webm"?te(n.$(),n.Aa,n.ja,!0):null],te=null,x(Et,Promise.all(ve),2);if(Pe=Et.h,Ne=Pe[0],Ge=Pe[1]||null,Te=null,$e=A-d,Ue=A,mt=k?A+k:1/0,G=="mp4")var jt=P6(Ne,u,i,n,$e,Ue,mt);else{if(jt=new Zl(Ge),ll(jt).id!=440786851)throw new gt(2,3,3008);var cn=ll(jt);if(cn.id!=408125543)throw new gt(2,3,3009);jt=cn.g.byteOffset,cn=new Zl(cn.g);for(var gn=null;cn.ka();){var Ln=ll(cn);if(Ln.id==357149030){gn=Ln;break}}if(!gn)throw new gt(2,3,3010);for(gn=new Zl(gn.g),Ln=1e6,cn=null;gn.ka();){var Mn=ll(gn);if(Mn.id==2807729)Ln=z_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)cn=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)cn=Mn.g.getFloat64(0);else throw new gt(2,3,3003)}if(cn==null)throw new gt(2,3,3011);if(gn=Ln/1e9,cn*=gn,Ln=ll(new Zl(Ne)),Ln.id!=475249515)throw new gt(2,3,3007);jt=F6(Ln,jt,gn,cn,i,n,$e,Ue,mt)}for(Te=jt,xt=m(Te),Ht=xt.next();!Ht.done;Ht=xt.next())Ut=Ht.value,Ut.codecs=e.J.codecs,Ut.mimeType=e.J.mimeType;return h.ld(Te),Y=new wr(Te),E&&Y.sc(Ue,mt,!0),Et.return(Y)})}function Td(e){return e.pd}function _N(e){var t=Dv(e,Td,"RepresentationIndex");return e=wu(e,Td,"indexRange"),e=Jf(e||""),t&&(e=_r(t,"range",Jf,e)),e}function j6(e,t){if(TN(e,t),!_N(e))throw new gt(2,4,4002)}function TN(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=vr&&n!="mp4"&&n!="webm")throw new gt(2,4,4006);if(n=="webm"&&!t)throw new gt(2,4,4005)}function SN(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Z6(e,t,n){var i=yN(e,wN,n),u=G6(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new gt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new gt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new gt(2,4,4002);var c=null,d=null;e.za.id&&e.J.id&&(d=t[e.za.id+","+e.J.id])&&(c=d.segmentIndex);var h=q6(e.ha.start,e.ha.duration,e.J.nb,u,i,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),d&&(d.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function wN(e){return e.Jb}function G6(e){var t=H6(e);e=gN(e,wN);var n=e.rd;n==0&&(n=1);var i=0;return e.Da?i=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Da:e.Da,startTime:i,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function q6(e,t,n,i,u,c,d,h){var E=i.yc.length;i.timeline&&i.timeline.length!=i.yc.length&&(E=Math.min(i.timeline.length,i.yc.length));for(var A=e-i.Bb,k=t?e+t:1/0,G=[],te=i.startTime,Y={},ve=0;ve<E;Y={Sc:Y.Sc,Oc:Y.Oc},ve++){Y.Oc=i.yc[ve];var Pe=te;te=void 0,te=i.Da!=null?Pe+i.Da:i.timeline?i.timeline[ve].end:Pe+t,Y.Sc=null,Pe=new Je(e+Pe,e+te,function(Ne){return function(){return Ne.Sc==null&&(Ne.Sc=ho(n(),[Ne.Oc.Xh])),Ne.Sc}}(Y),Y.Oc.start,Y.Oc.end,u,A,e,k,[],"",null,null,Bt,c),Pe.codecs=h,Pe.mimeType=d,G.push(Pe)}return G}function H6(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(Zu).map(function(t){return Wr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=bo(t.attributes.media);return t=_r(t,"mediaRange",Jf,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function K6(e,t,n,i,u,c,d,h){var E=W6(e,d),A=V6(e);z6(A);var k=mm(e);if(A.hd)return TN(e,E),{vc:function(){var Pe=Mv(A.hd,k.J.id,null,null,k.bandwidth||null,null);return Pe=ho(k.J.nb(),[Pe]),EN(k,t,E,Pe,0,null,A.Bb)}};if(A.Da)return i||e.ua.contentType==="image"||(e.presentationTimeline.hf(A.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return Y6(k,A,u,E,c,d,h)}};var G=null;i=i=null,e.za.id&&e.J.id&&(i=e.za.id+","+e.J.id,i=n[i])&&(G=i.segmentIndex);var te=e.ha.start,Y=e.ha.duration?te+e.ha.duration:1/0,ve=!(e.Eb&&e.ha.Ye);return G?(n=G,AN(n,A,te,Y,ve,E),n.La(e.presentationTimeline.qb())):G=new Lv(A,e.J.id,e.bandwidth,e.J.nb,te,Y,E,ve,d,e.J.xf),A.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(A.timeline,te),i&&e.Eb&&(i.segmentIndex=G),{vc:function(){return G instanceof Lv&&G.getNumReferences()==0&&AN(G,A,te,Y,ve,E),Promise.resolve(G)}}}function Ov(e){return e.qd}function V6(e){var t=gN(e,Ov),n=wu(e,Ov,"media"),i=wu(e,Ov,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&bo(n),hd:i,mimeType:e.J.mimeType,codecs:e.J.codecs}}function z6(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new gt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new gt(2,4,4002)}function Y6(e,t,n,i,u,c,d){function h(cn){var gn=(cn-Pe)*ve,Ln=gn+t.Bb,Mn=gn+G;gn=Mn+ve;var qn=Math.min(gn,A());return Mn=new Je(Mn,qn,function(){var Yn=Ln*Ne;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(Ne)),Yn=Mv(Ge,$e,cn,null,Te,Yn),ho(Ue(),[Yn])},0,null,i,mt,G,A(),[],"",null,null,Bt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=gn,Mn}function E(){var cn=[Math.max(k.qb(),G),Math.min(k.Gb(),A())].map(function(gn){return gn-G});return cn=[Math.ceil(cn[0]/ve),Math.ceil(cn[1]/ve)-1],e.J.Qb&&cn[1]++,cn.map(function(gn){return gn+Pe})}function A(){var cn=te!=null&&u[te]||Y;return cn?G+cn:1/0}var k=e.presentationTimeline,G=e.ha.start,te=e.za.id,Y=e.ha.duration,ve=t.Da,Pe=t.rd,Ne=t.timescale,Ge=t.zc,Te=e.bandwidth||null,$e=e.J.id,Ue=e.J.nb,mt=G-t.Bb,xt=E();n=e.Eb?Math.max(xt[0],xt[1]-n+1):xt[0],d=d||xt[1],xt=[];for(var Ht=n;Ht<=d;++Ht){var Ut=h(Ht);xt.push(Ut)}var Et=new wr(xt);if(xt=k.Gb()<A(),Ht=k.R(),xt||Ht){var jt=Math.max(n,d+1);Et.ke(ve,function(){var cn=k.qb();Et.La(cn);var gn=m(E());gn.next(),gn=gn.next().value;for(var Ln=[];jt<=gn;){var Mn=h(jt);Ln.push(Mn),jt++}return cn>A()&&!Ln.length?null:Ln})}return Promise.resolve(Et)}function W6(e,t){var n=wu(e,Ov,"initialization");if(!n)return null;n=bo(n);var i=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new dt(function(){var d=Mv(n,i,null,null,u,null);return ho(c(),[d])},0,null,SN(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Lv(e,t,n,i,u,c,d,h,E,A){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=i,this.i=u,this.l=c,this.s=d,this.A=E,this.G=A,h&&IN(this)}z(Lv,wr),g=Lv.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.i<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function AN(e,t,n,i,u,c){if($6(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var d=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=d.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==i&&(e.l=i)}else e.h=t,e.i=n,e.l=i;u&&IN(e)}function $6(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ht(n,t)}}function IN(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var u=t[i],c=u.start+this.i;if(u=i<n?t[i+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return i+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var i=this.h.zc,u=this.h.timeline[e],c=u.ri,d=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var A=this.h.codecs,k=this.h.mimeType,G=[],te=(u.end-u.start)/u.rb,Y={},ve=0;ve<u.rb;Y={Tc:Y.Tc,se:Y.se},ve++){var Pe=u.start+te*ve,Ne=Pe+te;Y.se=ve+1,Y.Tc=null,Pe=new Je(this.i+Pe,this.i+Ne,function(Ge){return function(){return t.h?(Ge.Tc==null&&(Ge.Tc=CN(t.h.zc,t.F,c,t.B,d,Ge.se,t.C)),Ge.Tc):[]}}(Y),0,null,this.s,n,this.i,this.l,[],"",null,null,Bt,this.A),Pe.codecs=A,Pe.mimeType=k,this.G==0?0<ve&&Pe.Zd():ve%this.G!=0&&Pe.Zd(),G.push(Pe)}n=new Je(this.i+u.start,E,function(){return 0<u.rb?[]:CN(i,t.F,c,t.B,d,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,Bt,this.A,0<u.rb),n.codecs=A,n.mimeType=k,n.i=h,this.g[e]=n}return n};function CN(e,t,n,i,u,c,d){return e=Mv(e,t,n,c,i||null,u),ho(d(),[e]).map(function(h){return h.toString()})}function Sd(e){this.o=null,this.A=e,this.G=new kl,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}Sd.prototype.configure=function(e){this.o=e},Sd.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Sd.prototype.setManifestType=function(e){this.s=e};function bp(e,t){var n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1)return n=ho(e.i,[X6(e,t)]),i=Li(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,i),vu(e.G,u),ce(A,2),x(A,u.promise,4);if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),h.VERSION==1&&Q6(e,h,c.uri),he(A,0);if((E=Ce(A))&&E.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){bp(e,t)}),e.g.X(e.C),$(A)})}function X6(e,t){if(!e.m.length)return t;t=new si(t);var n=e.B||e.m[0],i=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(i))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(i))),ra(u)&&hr(t,u),t.toString()}function Q6(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new pr(function(){bp(e,i)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function wd(e,t,n,i){var u=e.l.get(t);u||(u=new Map),u.set(n,i),e.l.set(t,u)}Sd.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Rp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],u={},c=m(e.m),d=c.next();!d.done;u={Pb:u.Pb},d=c.next())if(u.Pb=d.value,d=t.get(u.Pb))i.push({rf:u.Pb,location:d});else if(d=e.F.find(function(E){return function(A){return A.Vi==E.Pb}}(u))){var h=t.get(d["BASE-ID"]);h&&(d["URI-REPLACEMENT"].Ng?(h=new si(h),_n(h,d["URI-REPLACEMENT"].Ng),i.push({rf:u.Pb,location:h.toString()})):i.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),d=c.next();!d.done;d=c.next())d=d.value,h=e.j.get(d),u>h&&e.j.delete(d);if(i=i.filter(function(E){for(var A=m(e.j.keys()),k=A.next();!k.done;k=A.next())if(k.value.includes(new si(E.location).wb))return!1;return!0}),i.length&&(e.B=i[0].rf),i=i.map(function(E){return E.location}),!i.length&&e.h)for(u=m(e.h.split(",")),d=u.next();!d.done;d=u.next())(c=t.get(d.value))&&(e.B=e.h,i.push(c));if(!i.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())i.push(u.value);return n?i:ho(e.i,i)}function Vo(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Vo.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function bN(e,t){var n=[],i=[],u=[],c=[];e=m(e);for(var d=e.next();!d.done;d=e.next()){var h=d.value;d=new Map(h.audioStreams.map(function(G){return[X_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[$_(G),G]})),A=new Map(h.textStreams.map(function(G){return[Dp(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[Pp(G),G]})),t){var k=PN(vr);A.set(Dp(k),k),k=PN("image"),h.set(Pp(k),k)}n.push(d),i.push(E),u.push(A),c.push(h)}return{Pf:n,Lg:i,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn,qn;return Oe(function(Yn){if(Yn.g==1){if(i=yi,!t&&e.length==1)return u=bN(e,!1),c=u.Pf,d=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(d[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(A=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),A==-1&&(A=k));return A==-1?Yn.return():(te=bN(e,!0),Y=te.Pf,ve=te.Lg,Pe=te.Ig,Ne=te.hg,x(Yn,Promise.all([Gl(n,n.h,Y,A,xp,Ad),Gl(n,n.g,ve,A,xp,Ad),Gl(n,n.l,Pe,A,xp,Ad),Gl(n,n.i,Ne,A,xp,Ad)]),2))}if(Ge=0,Te=[],n.g.length&&n.h.length)for(Ut=m(n.h),Et=Ut.next();!Et.done;Et=Ut.next())for(jt=Et.value,cn=m(n.g),gn=cn.next();!gn.done;gn=cn.next())Ln=gn.value,Mn=fe(jt.drmInfos,Ln.drmInfos),jt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=Ge++,Te.push({id:qn,language:jt.language,disabledUntilTime:0,primary:jt.primary,audio:jt,video:Ln,bandwidth:(jt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for($e=n.g.length?n.g:n.h,Ue=m($e),mt=Ue.next();!mt.done;mt=Ue.next())xt=mt.value,Ht=Ge++,Te.push({id:Ht,language:xt.language,disabledUntilTime:0,primary:xt.primary,audio:xt.type==i.S?xt:null,video:xt.type==i.fa?xt:null,bandwidth:xt.bandwidth||0,drmInfos:xt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Te,$(Yn)})};function RN(e){var t,n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:if(t=yi,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.S}).map(function(Kn){return[X_(Kn),Kn]}))}),i=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.fa}).map(function(Kn){return[$_(Kn),Kn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ma}).map(function(Kn){return[Dp(Kn),Kn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ue}).map(function(Kn){return[Pp(Kn),Kn]}))}),d=m(u),h=d.next();!h.done;h=d.next())E=h.value,A=DN(t.ma),E.set(Dp(A),A);for(k=m(c),G=k.next();!G.done;G=k.next())te=G.value,Y=DN(t.ue),te.set(Pp(Y),Y);return ve=new Vo,x(qn,Gl(ve,[],n,0,kv,Fv),2);case 2:return Pe=qn.h,x(qn,Gl(ve,[],i,0,kv,Fv),3);case 3:return Ne=qn.h,x(qn,Gl(ve,[],u,0,kv,Fv),4);case 4:return Ge=qn.h,x(qn,Gl(ve,[],c,0,kv,Fv),5);case 5:if(Te=qn.h,$e=0,Ne.length&&Pe.length)for(Ut=m(Pe),Et=Ut.next();!Et.done;Et=Ut.next())for(jt=Et.value,cn=m(Ne),gn=cn.next();!gn.done;gn=cn.next())Ln=gn.value,Mn=$e++,Ln.variantIds.push(Mn),jt.variantIds.push(Mn);else for(Ue=Ne.concat(Pe),mt=m(Ue),xt=mt.next();!xt.done;xt=mt.next())Ht=xt.value,Ht.variantIds=[$e++];return qn.return(Ne.concat(Pe).concat(Ge).concat(Te))}})}function Gl(e,t,n,i,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:for(d=[],h=0;h<i;h++)d.push(new Set);for(E=i;E<n.length;E++)d.push(new Set(n[E].values()));A=m(t),k=A.next();case 2:if(k.done){Ut.u(4);break}return G=k.value,x(Ut,J6(e,G,n,i,c,d),5);case 5:if(te=Ut.h,!te)throw new gt(2,4,4037);k=A.next(),Ut.u(2);break;case 4:for(Y=m(d),ve=Y.next();!ve.done;ve=Y.next())for(Pe=ve.value,Ne=m(Pe),Ge=Ne.next();!Ge.done;Ge=Ne.next())Te=Ge.value,($e=e5(e,Te,n,u,c,d))&&t.push($e);for(Ue=m(d),ve=Ue.next();!ve.done;ve=Ue.next())for(mt=ve.value,xt={},Ht=m(mt),Ge=Ht.next();!Ge.done;xt={Bd:xt.Bd},Ge=Ht.next())if(xt.Bd=Ge.value,!W_(xt.Bd)&&t.some(function(Et){return function(jt){return Y_(e,Et.Bd,jt)}}(xt)))throw new gt(2,4,4037);return Ut.return(t)}})}function J6(e,t,n,i,u,c){return Oe(function(d){return d.g==1?(MN(e,n,t),t.matchedStreams?t.segmentIndex?x(d,xN(t,i),2):d.u(2):d.return(!1)):(NN(t,i,u,c),d.return(!0))})}function xN(e,t){var n,i,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=[],i=e.matchedStreams,u=m(i),c=u.next();!c.done;c=u.next())d=c.value,n.push(d.createSegmentIndex()),d.trickModeVideo&&!d.trickModeVideo.segmentIndex&&n.push(d.trickModeVideo.createSegmentIndex());return x(A,Promise.all(n),2)}if(e.segmentIndex instanceof Ei)for(h=t;h<i.length;h++)E=i[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);$(A)})}function e5(e,t,n,i,u,c){if(W_(t))return null;var d=i(t);return MN(e,n,d),d.createSegmentIndex&&(d.createSegmentIndex=function(){return Oe(function(h){return d.segmentIndex?h.u(0):(d.segmentIndex=new Ei,x(h,xN(d,0),0))})}),!d.matchedStreams||!d.matchedStreams.length?null:(NN(d,0,u,c),d)}function NN(e,t,n,i){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var d=!0;if(e.type=="audio"&&Hu(e.language,c.language)==0&&(d=!1),d&&(i[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function xp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),i=n.next();!i.done;i=n.next())i=i.value,i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function kv(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Ad(e,t){function n(d,h){d||(d=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,d.includes(E)||d.push(E);return d}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=m(t.keyIds),u=i.next();!u.done;u=i.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),i=fe(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new gt(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=m(t.closedCaptions),u=i.next();!u.done;u=i.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=xp(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Ad(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Ad(e.trickModeVideo,t)}function Fv(e,t){var n=e.roles;n||(n=[]);for(var i=m(t.roles),u=i.next();!u.done;u=i.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function MN(e,t,n){var i=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=t5(e,u.value,n),!u)return;i.push(u)}n.matchedStreams=i}function t5(e,t,n){var i={audio:X_,video:$_,text:Dp,image:Pp}[n.type],u=null,c=i(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,k){return Y_(e,A,k)},video:function(A,k){return Y_(e,A,k)},text:n5,image:r5}[n.type];for(var d={audio:i5,video:o5,text:a5,image:s5}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!d(n,u,E)||(u=E)}return e.o&&!W_(u)&&t.delete(i(u)),u}function Np(e,t){function n(i){if(!Q_.has(i)){var u=ba(i);Q_.set(i,u)}return Q_.get(i)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function Y_(e,t,n){return!(!Np(t,n)&&!e.m||t.drmInfos&&!ne(t.drmInfos,n.drmInfos))}function n5(e,t){return t.language?!(e.forced!==t.forced||Hu(e.language,t.language)==0||t.kind!=e.kind):!0}function r5(){return!0}function i5(e,t,n){var i=Np(e,t),u=Np(e,n);if(i&&!u)return!1;if(!i&&u||(i=Hu(e.language,t.language),u=Hu(e.language,n.language),u>i))return!0;if(u<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(i=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>i.length?!0:u.length<i.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=Mp(e.channelsCount,t.channelsCount,n.channelsCount),i==Ys?!0:i==cl?!1:(i=Mp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==Ys?!0:i==cl?!1:!!(e.bandwidth&&ON(e.bandwidth,t.bandwidth,n.bandwidth)==Ys)))}function o5(e,t,n){var i=Np(e,t),u=Np(e,n);if(i&&!u)return!1;if(!i&&u||(i=Mp(e.width*e.height,t.width*t.height,n.width*n.height),i==Ys))return!0;if(i==cl)return!1;if(e.frameRate){if(i=Mp(e.frameRate,t.frameRate,n.frameRate),i==Ys)return!0;if(i==cl)return!1}return!!(e.bandwidth&&ON(e.bandwidth,t.bandwidth,n.bandwidth)==Ys)}function a5(e,t,n){var i=Hu(e.language,t.language),u=Hu(e.language,n.language);if(u>i)return!0;if(u<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>i.length)return!0;if(u.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function s5(e,t,n){return Mp(e.width*e.height,t.width*t.height,n.width*n.height)==Ys}function DN(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function PN(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Mp(e,t,n){if(t==e&&e!=n)return cl;if(n==e&&e!=t)return Ys;if(t>e){if(n<=e||n-e<t-e)return Ys;if(n-e>t-e)return cl}else{if(n>e)return cl;if(e-n<e-t)return Ys;if(e-n>e-t)return cl}return LN}function ON(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Ys:t<e?cl:LN}function W_(e){switch(e.type){case vr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function $_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function X_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Dp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Pp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}re("shaka.util.PeriodCombiner",Vo),Vo.prototype.setUseStreamOnce=Vo.prototype.Fg,Vo.prototype.setAllowMultiTypeVariants=Vo.prototype.yg,Vo.prototype.combinePeriods=Vo.prototype.Sf,Vo.prototype.getImageStreams=Vo.prototype.nh,Vo.prototype.getTextStreams=Vo.prototype.Ve,Vo.prototype.getVariants=Vo.prototype.Eh;var Ys=1,LN=0,cl=-1,Q_=new Map;function u5(e,t){var n=new DOMParser,i=l5.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function kN(e,t){try{var n=za(e);return u5(n,t)}catch(i){return null}}var l5=new ia(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Uv(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Vo,this.G=0,this.H=new M(5),this.A=new pr(function(){m5(e)}),this.F=new kl,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=Uv.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,i;return Oe(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,x(u,J_(n),2);if(i=u.h,n.i&&e1(n,i),!n.i)throw new gt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return ce(n,2),x(n,J_(e),4);if(n.g!=2)return he(n,0);if(t=Ce(n),!e.i||!t)return n.return();e.i.onError(t),$(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,e1(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function J_(e){var t,n,i,u,c,d,h;return Oe(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=Rp(e.h,"Location",!0),n.length&&(t=n)),i=Li(t,e.g.retryParameters),u=Date.now(),x(E,n1(e,i,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),x(E,c5(e,c.data,c.uri),3)):E.return(0)):(d=Date.now(),h=(d-u)/1e3,e.H.sample(1,h),E.return(h))})}function c5(e,t,n){var i,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1){if(i=t,u=e.g.dash.manifestPreprocessor,c=ev,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=kN(i,"MPD"),!d)throw new gt(2,4,4001,n);u(d),i=Ya(d.outerHTML)}if(h=Jh(i,"MPD"),!h)throw new gt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,A=tv,E!=A&&E(h),e.g.dash.disableXlinkProcessing?Y.return(FN(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=Pv(h,e.g.retryParameters,k,n,e.i.networkingEngine),vu(e.F,G),x(Y,G.promise,2))}return te=Y.h,Y.return(FN(e,te,n))})}function FN(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,ki,ci,gi,Gr,po,Uo,ai,$s,Xc,Qc,Pd,fl,Xs,dl,zl,Od,Ld,_y,kd,Wp,Ty;return Oe(function(As){switch(As.g){case 1:for(e.h&&e.h.l.clear(),i=[n],u=[],c=new Map,d=Wr(t,"Location"),h=m(d),E=h.next();!E.done;E=h.next())A=E.value,k=A.attributes.serviceLocation,(G=Eu(A))&&(te=ho(i,[G])[0],k&&(e.h?wd(e.h,"Location",k,te):c.set(k,te)),u.push(te));if(e.h?(Y=Rp(e.h,"Location",!0),0<Y.length&&(i=e.o=Y)):u.length&&(i=e.o=u),ve=Promise.resolve(),(Pe=la(t,"ContentSteering"))&&e.i)for(Ne=Pe.attributes.defaultServiceLocation,e.h?(e.h.i=i,e.h.h=Ne):(e.h=new Sd(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=i,e.h.h=Ne,(Ge=Eu(Pe))&&(_r(Pe,"queryBeforeStart",ep,!1)?ve=bp(e.h,Ge):bp(e.h,Ge))),Te=m(c.keys()),$e=Te.next();!$e.done;$e=Te.next())Ue=$e.value,mt=c.get(Ue),wd(e.h,"Location",Ue,mt);if(xt=Wr(t,"BaseURL"),Ut=!1,e.h)for(Et=m(xt),jt=Et.next();!jt.done;jt=Et.next())cn=jt.value,gn=cn.attributes.serviceLocation,Ln=Eu(cn),gn&&Ln&&(wd(e.h,"BaseURL",gn,Ln),Ut=!0);if(Ut&&e.h||(Mn=xt.map(Eu),Ht=ho(i,Mn)),qn=function(){return e.h&&Ut?Rp(e.h,"BaseURL"):Ht||[]},Yn=0,xt&&xt.length&&(Yn=_r(xt[0],"availabilityTimeOffset",kc)||0),Kn=e.g.dash.ignoreMinBufferTime,Nr=0,Kn||(Nr=_r(t,"minBufferTime",Qa)||0),e.G=_r(t,"minimumUpdatePeriod",Qa,-1),fi=_r(t,"availabilityStartTime",Qf),ki=_r(t,"timeShiftBufferDepth",Qa),ci=e.g.dash.ignoreSuggestedPresentationDelay,gi=null,ci||(gi=_r(t,"suggestedPresentationDelay",Qa)),Gr=e.g.dash.ignoreMaxSegmentDuration,po=null,Gr||(po=_r(t,"maxSegmentDuration",Qa)),Uo=t.attributes.type||"static",e.j)for(ai=e.j.presentationTimeline,$s=m(Object.values(e.m)),Xc=$s.next();!Xc.done;Xc=$s.next())Qc=Xc.value,Qc.segmentIndex&&Qc.segmentIndex.La(ai.qb());else Pd=e.g.defaultPresentationDelay||1.5*Nr,fl=gi!=null?gi:Pd,ai=new tr(fi,fl,e.g.dash.autoCorrectDrift);return ai.Ec(Uo=="static"),ai.R()&&!isNaN(e.g.availabilityWindowOverride)&&(ki=e.g.availabilityWindowOverride),ki==null&&(ki=1/0),ai.je(ki),Xs=t.attributes.profiles||"",dl={Eb:Uo!="static",presentationTimeline:ai,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Xs.split(",")},zl=d5(e,dl,qn,t),Od=zl.duration,Ld=zl.periods,Uo!="static"&&zl.Xf||ai.Za(Od||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?ai.zg(e.C):e.C&&Ke("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ai.hf(po||1),x(As,e.l.Sf(Ld,dl.Eb),2);case 2:return x(As,ve,3);case 3:if(e.s&&(Nr=0,_y=gi!=null?gi:e.g.defaultPresentationDelay,ai.Bf(_y)),e.j){e.j.variants=e.l.j,kd=e.l.Ve(),0<kd.length&&(e.j.textStreams=kd),e.j.imageStreams=e.l.i,e.i.filter(e.j),As.u(4);break}if(e.j={presentationTimeline:ai,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:Nr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:f5(t)},!ai.Kg()){As.u(5);break}return Wp=Wr(t,"UTCTiming"),x(As,_5(e,qn,Wp),6);case 6:if(Ty=As.h,!e.i)return As.return();ai.Ag(Ty);case 5:ai.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),$(As)}})}function f5(e){var t=la(e,"ServiceDescription");return t?(e=la(t,"Latency"),t=la(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function d5(e,t,n,i){var u=_r(i,"mediaPresentationDuration",Qa),c=[],d=0;i=Wr(i,"Period");for(var h=0;h<i.length;h++){var E=i[h],A=i[h+1],k=_r(E,"start",Qa,d),G=E.attributes.id,te=_r(E,"duration",Qa),Y=null;if(A){var ve=_r(A,"start",Qa);ve!=null&&(Y=ve-k)}else u!=null&&(Y=u-k);if(Y==null&&(Y=te),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==i.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),d=h5(e,t,n,{start:k,duration:Y,node:E,Ye:Y==null||!A}),c.push(d),t.za.id&&Y&&(e.L[t.za.id]=Y),Y==null){d=null;break}d=k+Y}}return e.K=c.map(function(Pe){return Pe.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:d,Xf:!0}}function h5(e,t,n,i){t.za=t1(e,i.node,null,n),t.ha=i,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+i.start);var u=Wr(i.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())T5(e,i.start,i.duration,c.value,n);if(n=Wr(i.node,"AdaptationSet").map(function(k){return p5(e,t,k)}).filter(Zu),t.Eb){for(i=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var d=c.next();!d.done;d=c.next())i.push(d.value)}if(i.length!=new Set(i).size)throw new gt(2,4,4018)}for(i=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),d=m(i);for(var h=d.next();!h.done;h=d.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var A=E.next();!A.done;h={Cd:h.Cd},A=E.next())h.Cd=A.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return ba(k.Cd.codecs)==ba(G.codecs)}}(h))}}}if(n=Bv(e.g.disableAudio,i,"audio"),u=Bv(e.g.disableVideo,i,"video"),c=Bv(e.g.disableText,i,vr),i=Bv(e.g.disableThumbnails,i,"image"),u.length===0&&n.length===0)throw new gt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:i}}function Bv(e,t,n){return e||!t.length?[]:t.reduce(function(i,u){return u.contentType!=n||i.push.apply(i,T(u.streams)),i},[])}function p5(e,t,n){function i(Et){switch(Et){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=t1(e,n,t.za,null);var u=!1,c=Wr(n,"Role"),d=c.map(function(Et){return Et.attributes.value}).filter(Zu),h=void 0,E=t.ua.contentType==vr;E&&(h="subtitle"),c=m(c);for(var A=c.next();!A.done;A=c.next()){A=A.value;var k=A.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(A=A.attributes.value,A){case"main":u=!0;break;case"caption":case"subtitle":h=A}}var G;k=Wr(n,"EssentialProperty"),c=null;var te=!1;A=!1,k=m(k);for(var Y=k.next();!Y.done;Y=k.next()){Y=Y.value;var ve=Y.attributes.schemeIdUri;ve=="http://dashif.org/guidelines/trickmode"?c=Y.attributes.value:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=i(parseInt(Y.attributes.value,10)):ve!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ve!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ve=="urn:mpeg:dash:ssr:2023"?te=!0:A=!0)}var Pe=null;for(k=Wr(n,"SupplementalProperty"),k=m(k),Y=k.next();!Y.done;Y=k.next())Y=Y.value,ve=Y.attributes.schemeIdUri,ve=="http://dashif.org/guidelines/last-segment-number"?Pe=parseInt(Y.attributes.value,10)-1:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=i(parseInt(Y.attributes.value,10)));k=Wr(n,"Accessibility");var Ne=new Map,Ge;for(k=m(k),Y=k.next();!Y.done;Y=k.next())if(ve=Y.value,Y=ve.attributes.schemeIdUri,ve=ve.attributes.value,Y=="urn:scte:dash:cc:cea-608:2015")if(Y=1,ve!=null){ve=ve.split(";");for(var Te=m(ve),$e=Te.next();!$e.done;$e=Te.next()){var Ue=$e.value,mt=$e=void 0;Ue.includes("=")?(Ue=Ue.split("="),$e=Ue[0].startsWith("CC")?Ue[0]:"CC"+Ue[0],mt=Ue[1]||"und"):($e="CC"+Y,ve.length==2?Y+=2:Y++,mt=Ue),Ne.set($e,br(mt))}}else Ne.set("CC1","und");else if(Y=="urn:scte:dash:cc:cea-708:2015")if(Y=1,ve!=null)for(ve=m(ve.split(";")),$e=ve.next();!$e.done;$e=ve.next())$e=$e.value,Ue=Te=void 0,$e.includes("=")?($e=$e.split("="),Te="svc"+$e[0],Ue=$e[1].split(",")[0].split(":").pop()):(Te="svc"+Y,Y++,Ue=$e),Ne.set(Te,br(Ue));else Ne.set("svc1","und");else Y=="urn:mpeg:dash:role:2011"?ve!=null&&(d.push(ve),ve=="captions"&&(h="caption")):Y=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ve=="1"?Ge="visually impaired":ve=="2"&&(Ge="hard of hearing"));if(A)return null;A=Wr(n,"ContentProtection");var xt=pN(A,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Ht=br(t.ua.language||"und"),Ut=n.attributes.label;if((A=Wr(n,"Label"))&&A.length&&(A=Ri(A[0]))&&(Ut=A),A=Wr(n,"Representation"),n=A.map(function(Et){return(Et=g5(e,t,xt,h,Ht,Ut,u,d,Ne,Et,Ge,Pe))&&(Et.hdr=Et.hdr||G,Et.fastSwitching=te),Et}).filter(function(Et){return!!Et}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new gt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=BN(n[0].mimeType,n[0].codecs),E=m(n),Y=E.next();!Y.done;Y=E.next())Y.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),Y=k.next();!Y.done;Y=k.next()){for(Y=Y.value,ve=m(xt.drmInfos),Te=ve.next();!Te.done;Te=ve.next())Te=Te.value,Te.keyIds=Te.keyIds&&Y.keyIds?new Set([].concat(T(Te.keyIds),T(Y.keyIds))):Te.keyIds||Y.keyIds;e.g.dash.enableAudioGroups&&(Y.groupId=E)}return A=A.map(function(Et){return Et.attributes.id}).filter(Zu),{id:E,contentType:t.ua.contentType,language:Ht,Dj:u,streams:n,drmInfos:xt.drmInfos,If:c,ki:A}}function g5(e,t,n,i,u,c,d,h,E,A,k,G){if(t.J=t1(e,A,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!E5(t.J))return null;var te=t.ha.start;t.bandwidth=_r(A,"bandwidth",Zs)||0;var Y=t.J.contentType,ve=Y==vr||Y=="application";Y=Y=="image";try{var Pe=void 0;if(n.xe){var Ne=t.J.nb,Ge=ho(Ne(),[n.xe.Rh]),Te=Li(Ge,e.g.retryParameters);Pe={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var Et,jt,cn;return Oe(function(gn){if(gn.g==1)return x(gn,n1(e,Te,6),2);if(gn.g!=3){if(Et=gn.h,!Et.data||Et.data.byteLength!=16)throw new gt(2,4,4049);return jt={name:"AES-CBC"},cn=Pe,x(gn,p.crypto.subtle.importKey("raw",Et.data,jt,!0,["decrypt"]),3)}cn.cryptoKey=gn.h,Pe.fetchKey=void 0,$(gn)})}}}if(Ne=function(Et,jt,cn,gn){return S5(e,Et,jt,cn,gn)},t.J.pd)var $e=B6(t,Ne,Pe);else if(t.J.Jb)$e=Z6(t,e.m,Pe);else if(t.J.qd)$e=K6(t,Ne,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Pe,G);else{var Ue=t.ha.duration||0,mt=t.J.nb;$e={vc:function(){var Et=XE(te,Ue,mt());return Et.tc(function(jt){jt.mimeType=t.J.mimeType,jt.codecs=t.J.codecs}),Promise.resolve(Et)}}}}catch(Et){if((ve||Y)&&Et.code==4002)return null;throw Et}G=Wr(A,"ContentProtection"),G=w6(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),Ne=!1,Wr(A,"SupplementalProperty").some(function(Et){return Et.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Et.attributes.value=="JOC"})&&(Ne=!0),Ge=!1,ve&&(Ge=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var xt;if(Y&&((A=Wr(A,"EssentialProperty").find(function(Et){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Et.attributes.schemeIdUri)}))&&(xt=A.attributes.value),!xt))return null;var Ht;A=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(A.includes("hvc1.2.4.L153.B0")||A.includes("hev1.2.4.L153.B0"))&&(Ht="PQ"),ve=t.J.id?t.za.id+","+t.J.id:"";var Ut=ve&&e.m[ve]?e.m[ve]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Ut.segmentIndex&&(Ut.segmentIndex.release(),Ut.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:A,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:d,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:Ge,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:Ne,closedCaptions:E,hdr:Ht,videoLayout:void 0,tilesLayout:xt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(t.J.mimeType,t.J.codecs)])};return Ut.createSegmentIndex=function(){var Et;return Oe(function(jt){if(jt.g==1)return Ut.segmentIndex?jt.u(0):(Et=Ut,x(jt,$e.vc(),3));Et.segmentIndex=jt.h,$(jt)})},ve&&t.Eb&&!e.m[ve]&&(e.m[ve]=Ut),Ut}function m5(e){var t,n;Oe(function(i){switch(i.g){case 1:return t=0,ce(i,2),x(i,J_(e),4);case 4:t=i.h,he(i,3);break;case 2:if(n=Ce(i),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),i.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return i.return();e.i.onManifestUpdated(),e1(e,t),$(i)}})}function e1(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function t1(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},i=i||n.nb;var u=t.attributes.id,c=Wr(t,"BaseURL"),d,h=!1;if(e.h)for(var E=m(c),A=E.next();!A.done;A=E.next()){var k=A.value;A=k.attributes.serviceLocation,k=Eu(k),A&&k&&(wd(e.h,u,A,k),h=!0)}h&&e.h||(d=c.map(Eu)),E=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",Um)||n.frameRate,te=t.attributes.sar||n.pixelAspectRatio,Y=v5(Wr(t,"InbandEventStream"),n.emsgSchemeIdUris),ve=Wr(t,"AudioChannelConfiguration");ve=y5(ve)||n.de;var Pe=_r(t,"audioSamplingRate",xo)||n.audioSamplingRate;E||(E=BN(A,k));var Ne=la(t,"SegmentBase"),Ge=la(t,"SegmentTemplate"),Te=Ne&&_r(Ne,"availabilityTimeOffset",kc)||0,$e=Ge&&_r(Ge,"availabilityTimeOffset",kc)||0,Ue=c&&c.length&&_r(c[0],"availabilityTimeOffset",kc)||0;return Te=n.Qb+Ue+Te+$e,$e=null,(Ue=la(t,"SegmentSequenceProperties"))&&(Ue=la(Ue,"SAP"))&&($e=_r(Ue,"cadence",Ju)),{nb:function(){return ho(i(),c.length?e.h&&h?Rp(e.h,u):d||[]:[])},pd:Ne||n.pd,Jb:la(t,"SegmentList")||n.Jb,qd:Ge||n.qd,width:_r(t,"width",xo)||n.width,height:_r(t,"height",xo)||n.height,contentType:E,mimeType:A,codecs:k,frameRate:G,pixelAspectRatio:te,emsgSchemeIdUris:Y,id:u,language:t.attributes.lang,de:ve,audioSamplingRate:Pe,Qb:Te,xf:$e||n.xf}}function v5(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function y5(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function E5(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==vr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function UN(e,t,n,i){var u,c,d,h,E,A,k;return Oe(function(G){if(G.g==1)return u=[bo(n)],c=ho(t(),u),d=Li(c,e.g.retryParameters),d.method=i,h=e.i.networkingEngine.request(4,d),vu(e.F,h),x(G,h.promise,2);if(E=G.h,i=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);A=E.headers.date}else A=Vr(E.data);return k=Date.parse(A),isNaN(k)?G.return(0):G.return(k-Date.now())})}function _5(e,t,n){var i,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:i=n.map(function(te){return{scheme:te.attributes.schemeIdUri,value:te.attributes.value}}),u=e.g.dash.clockSyncUri,!i.length&&u&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(i),d=c.next();case 2:if(d.done){G.u(4);break}switch(h=d.value,ce(G,5),E=h.scheme,A=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(A),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ke("NTP UTCTiming scheme is not supported");break;default:Ke("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return x(G,UN(e,t,A,"HEAD"),10);case 10:return G.return(G.h);case 8:return x(G,UN(e,t,A,"GET"),11);case 11:return G.return(G.h);case 9:he(G,3);break;case 5:Ce(G);case 3:d=c.next(),G.u(2);break;case 4:return Ke("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function T5(e,t,n,i,u){var c=i.attributes.schemeIdUri||"",d=i.attributes.value||"",h=_r(i,"timescale",xo)||1;i=m(Wr(i,"Event"));for(var E=i.next();!E.done;E=i.next()){E=E.value;var A=_r(E,"presentationTime",xo)||0,k=_r(E,"duration",xo)||0;A=A/h+t,k=A+k/h,n!=null&&(A=Math.min(A,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:d,startTime:A,endTime:k,id:E.attributes.id||"",eventElement:tp(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function S5(e,t,n,i,u){var c,d,h,E;return Oe(function(A){return A.g==1?(c=Xa,d=u?0:1,h=lp(t,n,i,e.g.retryParameters),x(A,n1(e,h,c,{type:d}),2)):(E=A.h,A.return(E.data))})}function BN(e,t){return t=Si(e,t),Rl(t)?vr:e.split("/")[0]}function n1(e,t,n,i){return t=e.i.networkingEngine.request(n,t,i),vu(e.F,t),t.promise}re("shaka.dash.DashParser",Uv),ke["application/dash+xml"]=function(){return new Uv},ke["video/vnd.mpeg.dash.mpd"]=function(){return new Uv};function jv(){}re("shaka.dependencies",jv),jv.has=function(e){return r1.has(e)},jv.add=function(e,t){if(!ZN[e])throw Error(e+" is not supported");e==jN?dr("mux.js","mux.js is no longer used in Shaka Player."):r1.set(e,function(){return t})};var jN="muxjs",ZN={Ej:jN,ISOBoxer:"ISOBoxer"};jv.Allowed=ZN;var r1=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function GN(e,t,n){this.type=e,this.g=t,this.segments=n||null}function qN(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}qN.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};function HN(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function Op(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=Op(e,t))?e.value:n||null}function ii(e,t){if(e=Op(e,t),!e)throw new gt(2,4,4023,t);return e.value}function KN(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function VN(e,t){this.name=e,this.value=t}function Ws(e,t){return e.filter(function(n){return n.name==t})}function zN(e,t){return e.filter(function(n){return ii(n,"TYPE")==t})}function No(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Id(e,t,n){return n=n===void 0?0:n,(e=No(e,t))?Number(e.value):n}function ql(e,t,n){return t?YN(e,[t],n):[]}function YN(e,t,n){if(!t.length)return[];t=ho(e,t),e=[],t=m(t);for(var i=t.next();!i.done;i=t.next()){var u=e,c=u.push,d=i.value;if((i=n)&&i.size){d=String(d).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=d.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var A=E.slice(2,E.length-1),k=i.get(A);if(k)d=d.replace(E,k);else throw new gt(2,4,4039,A)}}i=d}else i=d;c.call(u,i)}return e}function zc(e){this.h=e||"",this.g=0}function Cd(e){Hl(e,/[ \t]+/gm)}function Hl(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Yc(e){return e.g==e.h.length?null:(e=Hl(e,/[^ \t\n]*/gm))?e[0]:null}function w5(){this.g=0}function i1(e,t){t=Vr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new gt(2,4,4015);t=0;for(var i=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||i)i=!1;else if(c=o1(e,c),--e.g,WN.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(i=!0);for(u=[],i=!0,c=0;c<n.length;c++){var d=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(d)||i)i=!1;else{if(d=o1(e,d),A5.includes(d.name)){if(t!=1)throw new gt(2,4,4017);d=n.splice(c,n.length-c),n=[],i=[],c=[],h=null,d=m(d);for(var E=d.next();!E.done;E=d.next())E=E.value,/^(#EXT)/.test(E)?(E=o1(e,E),WN.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):i.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&i.push(h),n.push(new KN(E,i,c)),i=[],c=[]);return c.length&&(h&&i.push(h),n.push(new KN("",i,c))),new GN(t,u,n)}u.push(d),d.name=="EXT-X-STREAM-INF"&&(d.attributes.push(new VN("URI",h)),i=!0)}}return new GN(t,u)}function o1(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new gt(2,4,4016,t);t=n[1];var i=n[2];n=[];var u;if(i){i=new zc(i);var c;(c=Hl(i,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var d=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Hl(i,d);)n.push(new VN(c[1],c[2]||c[3])),Cd(i)}return new qN(e,t,n,u)}var WN="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),A5="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function $N(){}function XN(e){try{var t=a1(e);return $u({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return mu(n)}}function a1(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new gt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new gt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;1<t.length&&t[t.length-1]=="base64"&&(i=!0,t.pop());var u;return i?u=Ho(e):u=Ya(e),{data:u,contentType:n}}re("shaka.net.DataUriPlugin",$N),$N.parse=XN,Ko("data",XN);function QN(e){var t=Ra(e),n=t.split("/")[0];return e=Po(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function I5(e,t){function n(Te){return i(Te.name)}function i(Te){switch(Te=Te.toLowerCase(),Te){case"avc1":case"avc3":c.push(Te+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Te+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Te+".05.04"),h=!0;break;case"vp09":c.push(Te+".00.10.08"),h=!0;break;case"av01":c.push(Te+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Te),d=!0}}var u=[],c=[],d=!1,h=!1,E=null,A=null,k=null,G=null,te=null,Y=null,ve;if(new kr().box("moov",yr).box("trak",yr).O("tkhd",function(Te){Te=Zt(Te.reader,Te.version),A=String(Te.height),k=String(Te.width)}).box("mdia",yr).O("mdhd",function(Te){E=It(Te.reader,Te.version).language}).box("minf",yr).box("stbl",yr).O("stsd",yu).box("mp4a",function(Te){var $e=Te.reader;$e.skip(6),$e.skip(2),$e.skip(8);var Ue=$e.ra();$e.skip(2),$e.skip(2),$e.skip(2),$e=$e.ra()+$e.ra()/65536,G=Ue,te=$e,Te.reader.ka()?yr(Te):n(Te)}).box("esds",function(Te){Te=Te.reader;for(var $e="mp4a",Ue,mt;Te.ka();){Ue=Te.P();for(var xt=Te.P();xt&128;)xt=Te.P();if(Ue==3)Te.ra(),xt=Te.P(),xt&128&&Te.ra(),xt&64&&Te.skip(Te.P()),xt&32&&Te.ra();else if(Ue==4)mt=Te.P(),Te.skip(12);else if(Ue==5)break}mt&&($e+="."+vn(mt),Ue==5&&Te.ka()&&(Ue=Te.P(),mt=(Ue&248)>>3,mt===31&&Te.ka()&&(mt=32+((Ue&7)<<3)+((Te.P()&224)>>5)),$e+="."+mt)),u.push($e),d=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Te){ve=Te.name,wi(Te)}).box("avc3",function(Te){ve=Te.name,wi(Te)}).box("hev1",function(Te){ve=Te.name,wi(Te)}).box("hvc1",function(Te){ve=Te.name,wi(Te)}).box("dva1",function(Te){ve=Te.name,wi(Te)}).box("dvav",function(Te){ve=Te.name,wi(Te)}).box("dvh1",function(Te){ve=Te.name,wi(Te)}).box("dvhe",function(Te){ve=Te.name,wi(Te)}).box("vp09",function(Te){ve=Te.name,wi(Te)}).box("av01",function(Te){ve=Te.name,wi(Te)}).box("avcC",function(Te){var $e=ve||"";switch(ve){case"dvav":$e="avc3";break;case"dva1":$e="avc1"}Te=Te.reader,Te.skip(1),Te=$e+"."+vn(Te.P())+vn(Te.P())+vn(Te.P()),c.push(Te),h=!0}).box("hvcC",function(Te){var $e=ve||"";switch(ve){case"dvh1":$e="hvc1";break;case"dvhe":$e="hev1"}var Ue=Te.reader;Ue.skip(1),Te=Ue.P();var mt=["","A","B","C"][Te>>6],xt=Te&31,Ht=Ue.M(),Ut=(Te&32)>>5?"H":"L";Te=[Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P()],Ue=Ue.P();for(var Et=0,jt=0;32>jt&&(Et|=Ht&1,jt!=31);jt++)Et<<=1,Ht>>=1;for($e=$e+("."+mt+xt)+("."+vn(Et,!0)),$e+="."+Ut+Ue,mt="",xt=Te.length;xt--;)((Ut=Te[xt])||mt)&&(mt="."+Ut.toString(16).toUpperCase()+mt);$e+=mt,c.push($e),h=!0}).box("dvcC",function(Te){var $e=ve||"";switch(ve){case"hvc1":$e="dvh1";break;case"hev1":$e="dvhe";break;case"avc1":$e="dva1";break;case"avc3":$e="dvav"}var Ue=Te.reader;Ue.skip(2),Te=Ue.P(),Ue=Ue.P(),c.push($e+"."+Pn(Te>>1&127)+"."+Pn(Te<<5&32|Ue>>3&31)),h=!0}).O("vpcC",function(Te){var $e=ve||"",Ue=Te.reader;Te=Ue.P();var mt=Ue.P();Ue=Ue.P()>>4&15,c.push($e+"."+Pn(Te)+"."+Pn(mt)+"."+Pn(Ue)),h=!0}).box("av1C",function(Te){var $e=ve||"",Ue=Te.reader;Ue.skip(1),Te=Ue.P(),Ue=Ue.P();var mt=Te>>>5,xt=(Ue&64)>>6;c.push($e+"."+mt+"."+Pn(Te&31)+(Ue>>>7?"H":"M")+"."+Pn(mt===2&&xt?(Ue&32)>>5?12:10:xt?10:8)+"."+((Ue&16)>>4)+"."+((Ue&8)>>3)+((Ue&4)>>2)+(Ue&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",Qh).box("encv",wi).box("sinf",yr).box("frma",function(Te){Te=un(Te.reader).Ea,i(Te)}).box("colr",function(Te){Te=Te.reader;var $e=null,Ue=Te.sb(4),mt=String.fromCharCode(Ue[0]);if(mt+=String.fromCharCode(Ue[1]),mt+=String.fromCharCode(Ue[2]),mt+=String.fromCharCode(Ue[3]),mt==="nclx")switch(Te.ra(),Ue=Te.ra(),Te.ra(),Ue){case 1:case 6:case 13:case 14:case 15:$e="SDR";break;case 16:$e="PQ";break;case 18:$e="HLG"}Y=$e}).parse(e||t,!0),!u.length&&!c.length)return null;var Pe=d&&!h,Ne=new Map;if(h){var Ge=new wt("video/mp4");for(e&&Ge.init(e),Ge.i(t),e=m(Ge.j()),t=e.next();!t.done;t=e.next())t=t.value,Ne.set(t,t);Ge.h()}return{type:Pe?"audio":"video",mimeType:Pe?"audio/mp4":"video/mp4",codecs:JN(u.concat(c)).join(", "),language:E,height:A,width:k,channelCount:G,sampleRate:te,closedCaptions:Ne,Lf:Y}}function JN(e){var t=new Set,n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var u=Wa(i);t.has(u)||(n.push(i),t.add(u))}return t=Nh("audio",n),i=Nh("video",n),e=Nh(vr,n),i=C5(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function C5(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Ot('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function b5(e){var t=null;return new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",yu).box("encv",wi).box("enca",Qh).box("sinf",yr).box("schi",yr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=ks(n.sb(16))}).parse(e,!0),t}function Zv(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(vr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new w5,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){Y5(e)}),this.qa=Vv,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new kl,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=Zv.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,i;return Oe(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),x(u,p1(n,[e]),2)):u.g!=3?(i=u.h,n.aa=i.uri,x(u,N5(n,i.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,i,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){if(!Ma(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,i=n.filter(function(G){return G.stream.segmentIndex}),u=m(i),c=u.next();!c.done;c=u.next())d=c.value,t.push(R5(e,d));return x(k,Promise.all(t),2)}cM(e,i.map(function(G){return G.stream})),h=i.some(function(G){return G.fd==0}),i.length&&!h&&(E=W5,Hv(e,E.Pg),A=i.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(A))),e.i.updateDuration()),h&&u1(e),$(k)})};function s1(e,t){return Ma(e)?e.K.get(t.type):t.$d}function R5(e,t){var n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn;return Oe(function(qn){if(qn.g==1){for(n=[],i=m(t.$()),u=i.next();!u.done;u=i.next())c=u.value,d=new si(c),h=d.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),ra(h)&&hr(d,h),n.push(d.toString());return x(qn,p1(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(A=i1(e.Ga,E.data),A.type!=1)throw new gt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=Ws(A.g,"EXT-X-DEFINE"),te=rM(e,G,k),Y=t.stream,ve=s1(e,t),x(qn,pM(e,A,Y.mimeType,t.$,te),3)}Pe=qn.h,Ne=Pe.keyIds,Ge=Pe.drmInfos,Te=function(Yn,Kn){return Yn.size===Kn.size&&[].concat(T(Yn)).every(function(Nr){return Kn.has(Nr)})},Te(Y.keyIds,Ne)||(Y.keyIds=Ne,Y.drmInfos=Ge,e.i.newDrmInfo(Y)),$e=yM(e,A,Y,ve,te,t.$,t.type),Ue=$e.segments,(mt=$e.bandwidth)&&(Y.bandwidth=mt),Y.segmentIndex.kd(Ue,e.l.qb()),Ue.length&&(xt=Id(A.g,"EXT-X-MEDIA-SEQUENCE",0),Ut=(Ht=No(A.g,"EXT-X-SKIP"))?Number(zn(Ht,"SKIPPED-SEGMENTS")):0,Et=dM(xt,Ue),jt=Et.gb,cn=Et.hb,t.gb=jt+Ut,t.hb=cn,gn=ve.get(xt),Y.segmentIndex.La(gn)),Ln=Ue[0],t.fc=Ln.startTime,Mn=Ue[Ue.length-1],t.yb=Mn.endTime,No(A.g,"EXT-X-ENDLIST")&&(t.fd=!0),c1(e,A),$(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function eM(e,t){for(var n=e.I==-1,i=m(t),u=i.next();!u.done;u=i.next()){u=u.value;var c=u.stream.segmentIndex,d=s1(e,u);if(c=c.g[0]||null){d=m(d);for(var h=d.next();!h.done;h=d.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,qv(e,n.type)&&(i=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(i.g.splice(0,u),i=i.g[0]||null)&&(i=-i.startTime,n.stream.segmentIndex.offset(i),tM(e,n,i)))}function x5(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;i!=null&&i.h!=null&&(e.T=Math.min(e.T,i.h))}}if(t=e.T,t!=1/0){for(i=m(e.h.values()),n=i.next();!n.done;n=i.next())if(n=n.value,!qv(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)de("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(tM(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function tM(e,t,n){t.fc+=n,t.yb+=n,e=s1(e,t);for(var i=m(e),u=i.next();!u.done;u=i.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function N5(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,ki,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return i=i1(e.Ga,t),u=Ws(i.g,"EXT-X-DEFINE"),c=[],d=[],h=[],E=function(){return[n]},i.type==1?x(Gr,nM(e,i,E),7):(M5(e,u),A=Ws(i.g,"EXT-X-MEDIA"),k=Ws(i.g,"EXT-X-STREAM-INF"),G=Ws(i.g,"EXT-X-IMAGE-STREAM-INF"),te=Ws(i.g,"EXT-X-I-FRAME-STREAM-INF"),Y=Ws(i.g,"EXT-X-SESSION-KEY"),ve=Ws(i.g,"EXT-X-SESSION-DATA"),Pe=Ws(i.g,"EXT-X-CONTENT-STEERING"),P5(e,ve),x(Gr,O5(e,Pe),4));case 4:return D5(e,k),Z5(e,A),x(Gr,U5(e,k,Y,A,E,e.o),5);case 5:return c=Gr.h,d=L5(e,A),x(Gr,k5(e,G,te),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return Ne=Gr.h,Ge=Ne.type,Te=Ne.mimeType,$e=Ne.codecs,Ue=Ne.language,mt=Ne.height,xt=Ne.width,Ht=Ne.channelCount,Ut=Ne.sampleRate,Et=Ne.closedCaptions,jt=Ne.Lf,x(Gr,fM(e,e.A++,i,E,n,$e,Ge,Ue,!0,"Media Playlist",Ht,Et,null,!1,Ut,!1,Te),8);case 8:cn=Gr.h,e.h.set(n,cn),Ge=="video"&&EM(cn.stream,xt,mt,null,jt,null),c.push({id:0,language:br(Ue||"und"),disabledUntilTime:0,primary:!0,audio:Ge=="audio"?cn.stream:null,video:Ge=="video"?cn.stream:null,bandwidth:cn.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new gt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),i.type==1&&(Ma(e)&&(mM(e,i),gn=e.m,e.s.X(gn)),Ln=Array.from(e.h.values()),l1(e,Ln),u1(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Kn=Yn.value,Kn.audio&&Kn.audio.codecs===""&&Mn.push(Kn.audio.createSegmentIndex()),Kn.video&&Kn.video.codecs===""&&Mn.push(Kn.video.createSegmentIndex());return x(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(Nr=[],fi=c[0],ki=m([fi.video,fi.audio]),ci=ki.next();!ci.done;ci=ki.next())(gi=ci.value)&&!gi.segmentIndex&&Nr.push(gi.createSegmentIndex());if(0<Nr.length)return x(Gr,Promise.all(Nr),0)}Gr.u(0)}})}function nM(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(mt){switch(mt.g){case 1:if(i=QN(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return mt.return(i);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],d=ql(n(),t.segments[0].h),h=d[0],E=new si(h),A=E.Pa.split(".").pop(),k=TM[A])return mt.return(QN(k));if(G=Xa,te=null,Y=f1(e,t,c.g,n),e.Y.clear(),!Y){mt.u(2);break}return ve=lp(Y.$(),Y.ac(),Y.Yb(),e.g.retryParameters),x(mt,Kl(e,ve,G,{type:0}),3);case 3:Pe=mt.h,te=Pe.data;case 2:return Ne=Li(d,e.g.retryParameters),x(mt,Kl(e,Ne,G,{type:1}),4);case 4:if(Ge=mt.h,(Te=Ge.headers["content-type"])&&(Te=Te.split(";")[0].toLowerCase()),A=="ts"||Te=="video/mp2t"){var xt=Ge.data,Ht=Qn(xt);Ht=new Ve().parse(Ht);var Ut=Ht.bd();Ht=Ht.We();var Et=[],jt=!1,cn=!1;switch(Ut.audio){case"aac":case"aac-loas":Et.push("mp4a.40.2"),jt=!0;break;case"mp3":Et.push("mp4a.40.34"),jt=!0;break;case"ac3":Et.push("ac-3"),jt=!0;break;case"ec3":Et.push("ec-3"),jt=!0;break;case"opus":Et.push("opus"),jt=!0}switch(Ut.video){case"avc":Ht.Ea?Et.push(Ht.Ea):Et.push("avc1.42E01E"),cn=!0;break;case"hvc":Ht.Ea?Et.push(Ht.Ea):Et.push("hvc1.1.6.L93.90"),cn=!0;break;case"av1":Et.push("av01.0.01M.08"),cn=!0}if(Et.length){if(Ut=jt&&!cn,jt=new Map,cn){cn=new wt("video/mp2t"),cn.i(xt),xt=m(cn.j());for(var gn=xt.next();!gn.done;gn=xt.next())gn=gn.value,jt.set(gn,gn);cn.h()}Ht={type:Ut?"audio":"video",mimeType:"video/mp2t",codecs:Et.join(", "),language:null,height:Ht.height,width:Ht.width,channelCount:null,sampleRate:null,closedCaptions:jt,Lf:null}}else Ht=null;if($e=Ht)return mt.return($e)}else if((A=="mp4"||A=="cmfv"||A=="m4s"||Te=="video/mp4"||Te=="audio/mp4"||Te=="video/iso.segment")&&(Ue=I5(te,Ge.data)))return mt.return(Ue);return mt.return(i)}})}function u1(e){if(Ma(e)){if(e.qa==zv){for(var t,n=t=1/0,i=m(e.h.values()),u=i.next();!u.done;u=i.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za(lM(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function M5(e,t){var n=new si(e.aa).g;t=m(t);for(var i=t.next();!i.done;i=t.next()){var u=i.value;i=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),i&&c&&(e.o.has(i)||e.o.set(i,c)),u&&(i=n.get(u)[0])&&!e.o.has(i)&&e.o.set(u,i)}}function rM(e,t,n){n=new si(n).g;var i=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,d=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),d&&h&&(i.has(d)||i.set(d,h)),u&&(d=n.get(u)[0])&&!i.has(d)&&i.set(u,d),c&&(u=e.o.get(c))&&i.set(c,u)}return i}function D5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,u=zn(i,"AUDIO");n=zn(i,"VIDEO");var c=zn(i,"SUBTITLES");if(i=iM(e,i),c){var d=Ro(vr,i);e.G.set(c,d),mn(i,d)}u&&(c=Ro("audio",i),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Ro("video",i),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function P5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,u=zn(i,"DATA-ID");n=zn(i,"URI");var c=zn(i,"LANGUAGE");i=zn(i,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",ql([e.aa],n,e.o)[0]),c&&u.set("language",c),i&&u.set("value",i),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function O5(e,t){var n,i,u,c,d,h;return Oe(function(E){if(!e.i||!e.g)return E.return();for(i=m(t),u=i.next();!u.done;u=i.next())if(c=u.value,d=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),d&&h){e.j=new Sd(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=d,n=bp(e.j,h);break}return x(E,n,0)})}function L5(e,t){var n=zN(t,"SUBTITLES");t=n.map(function(d){if(e.g.disableText)return null;try{return uM(e,[d],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var i=n.next();!i.done;i=n.next()){var u=ii(i.value,"GROUP-ID");if((i=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=i,c.stream.mimeType=d1(vr,i)||h1(vr),bd(c.stream)}}return t.filter(function(d){return d})}function bd(e){e.fullMimeTypes=new Set([Si(e.mimeType,e.codecs)])}function k5(e,t,n){var i,u;return Oe(function(c){return c.g==1?(i=t.map(function(d){var h,E;return Oe(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(ce(A,2),x(A,G5(e,d),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(E=Ce(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw E})}).concat(n.map(function(d){if(e.g.disableThumbnails)return null;try{var h=ii(d,"URI"),E=zn(d,"CODECS")||"";if(e.h.has(h))var A=e.h.get(h);else{var k=zn(d,"LANGUAGE"),G=zn(d,"NAME"),te=zn(d,"CHARACTERISTICS"),Y=Gv(e,e.A++,[h],E,"image",k,!1,G,null,null,te,!1,null,!1),ve=zn(d,"RESOLUTION"),Pe=m(ve?ve.split("x"):[null,null]),Ne=Pe.next().value,Ge=Pe.next().value;Y.stream.width=Number(Ne)||void 0,Y.stream.height=Number(Ge)||void 0;var Te=zn(d,"BANDWIDTH");Te&&(Y.stream.bandwidth=Number(Te)),e.h.set(h,Y),A=Y}return d=A,d.stream.codecs!=="mjpg"?null:d.stream}catch($e){if(e.g.hls.ignoreImageStreamFailures)return null;throw $e}})),x(c,Promise.all(i),2)):(u=c.h,c.return(u.filter(function(d){return d})))})}function F5(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var i={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=HN(u);i[c]?i[c].push(u):i[c]=[u]}for(var d in i)uM(e,i[d],n)}function U5(e,t,n,i,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,ki;return Oe(function(ci){switch(ci.g){case 1:if(d=[],h=new Set,!(0<n.length)){ci.u(2);break}E=m(n),A=E.next();case 3:if(A.done){ci.u(2);break}if(k=A.value,G=ii(k,"METHOD"),te=zn(k,"KEYFORMAT")||"identity",Y=null,G=="NONE"||Kv(G)){ci.u(4);break}if(te!="identity"){Y=(ve=wM[te])?ve(k,""):null,ci.u(6);break}return x(ci,_M(e,k,"",u,null,c),8);case 8:Y=ci.h;case 6:if(Y){if(Y.keyIds)for(Pe=m(Y.keyIds),Ne=Pe.next();!Ne.done;Ne=Pe.next())Ge=Ne.value,h.add(Ge);d.push(Y)}case 4:A=E.next(),ci.u(3);break;case 2:for(Te={},$e=m(t),Ue=$e.next();!Ue.done;Ue=$e.next())mt=Ue.value,xt=HN(mt),Te[xt]?Te[xt].push(mt):Te[xt]=[mt];Ht=[];for(Ut in Te)Et=Te[Ut],jt=Et[0],cn=zn(jt,"FRAME-RATE"),gn=Number(zn(jt,"AVERAGE-BANDWIDTH"))||Number(ii(jt,"BANDWIDTH")),Ln=zn(jt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Kn=zn(jt,"VIDEO-RANGE"),(Nr=zn(jt,"REQ-VIDEO-LAYOUT"))&&Nr.includes(",")&&(fi=Nr.split(",").filter(function(gi){return gi=="CH-STEREO"||gi=="CH-MONO"}),Nr=fi[0]),Nr=Nr||"CH-MONO",ki=B5(e,Et,i,gn),Ht.push.apply(Ht,T(j5(e,ki.audio,ki.video,gn,qn,Yn,cn,Kn,Nr,d,h)));return ci.return(Ht.filter(function(gi){return gi!=null}))}})}function B5(e,t,n,i){for(var u={audio:[],video:[]},c=new Map,d=[],h=!1,E=!1,A=m(t),k=A.next();!k.done;k=A.next()){var G=k.value;k=zn(G,"AUDIO");var te=zn(G,"VIDEO"),Y=k||te;Y&&(d.includes(Y)||d.push(Y),(G=zn(G,"PATHWAY-ID"))&&c.set(Y,G),k?h=!0:te&&(E=!0))}d.length&&n.length&&(A=n.filter(function(Ne){return d.includes(ii(Ne,"GROUP-ID"))}),F5(e,A,c)),A=(c=d.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(A)):E&&u.video.push.apply(u.video,T(A)),k=!1;var ve=t.map(function(Ne){return ii(Ne,"URI")});if(E=u.audio.find(function(Ne){return Ne&&Ne.$().find(function(Ge){return ve.includes(Ge)})}),h=iM(e,t[0]),te=Ro("video",h),(Y=Ro("audio",h))&&!te?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&Y&&te?(E="video",h=[[te,Y].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Pe=G=Y=te=k=null;!A.length&&(n=n.find(function(Ne){var Ge=zn(Ne,"URI")||"",Te=zn(Ne,"TYPE");return Ne=ii(Ne,"GROUP-ID"),Te!="SUBTITLES"&&Ge==""&&d.includes(Ne)}))&&(k=zn(n,"LANGUAGE"),te=zn(n,"NAME"),Y=oM(n),sM(n),G=zn(n,"CHARACTERISTICS"),Pe=aM(n)),e=q5(e,t,h,E,k,te,Y,G,Pe),c&&(e.stream.groupId=c),A.length||(e.stream.bandwidth=i),u[e.stream.type]=[e]}return u}function iM(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(i){return i.split("/")[0]}),e.push.apply(e,T(t))),JN(e)}function oM(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function aM(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function sM(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function j5(e,t,n,i,u,c,d,h,E,A,k){for(var G=m(n),te=G.next();!te.done;te=G.next())EM(te.value.stream,u,c,d,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,d=m(n),h=d.next();!h.done;h=d.next()){var Y=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=k),(E=Y?Y.stream:null)&&(E.drmInfos=A,E.keyIds=k),G=c?c.stream.drmInfos:null,te=Y?Y.stream.drmInfos:null,Y=Y?Y.$().sort().join(","):"";var ve=c?c.$().sort().join(","):"";Y=Y+" - "+ve,h&&E&&!ne(G,te)||e.Ia.has(Y)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(Y))}return u}function Z5(e,t){t=zN(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,u=zn(i,"LANGUAGE");n=br(u||"und"),u||(u=zn(i,"NAME"))&&(n=u),u=ii(i,"GROUP-ID"),i=ii(i,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(i,n)}}function uM(e,t,n){for(var i=[],u=[],c=new Map,d=m(t),h=d.next();!h.done;h=d.next()){var E=h.value;h=ii(E,"URI"),E=ii(E,"GROUP-ID"),i.push(h),u.push(E),c.set(E,h)}if(d=u.sort().join(","),h=t[0],t="",E=ii(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=vr),E==vr)t=zn(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=i.sort().join(","),e.h.has(u))return e.h.get(u);if(A=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&wd(e.j,A,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?oM(h):null;var te=E=="audio"?sM(h):!1,Y=zn(h,"CHARACTERISTICS"),ve=zn(h,"FORCED")=="YES";return h=E=="audio"?aM(h):null,i=Gv(e,A,i,t,E,n,k,c,G,null,Y,ve,h,te),i.stream&&(i.stream.groupId=d),e.H.has(d)?e.H.get(d).push(i):e.H.set(d,[i]),e.h.set(u,i),i}function G5(e,t){var n,i,u,c,d,h,E,A,k,G;return Oe(function(te){return te.g==1?(n=ii(t,"URI"),i=zn(t,"CODECS","jpeg")||"",e.h.has(n)?te.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),d=zn(t,"CHARACTERISTICS"),h=Gv(e,e.A++,[n],i,"image",u,!1,c,null,null,d,!1,null,!1),(E=zn(t,"RESOLUTION"))?x(te,h.stream.createSegmentIndex(),3):te.u(2))):(te.g!=2&&(A=h.stream.segmentIndex.get(0),k=A.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),te.return(h))})}function q5(e,t,n,i,u,c,d,h,E){for(var A=e.A++,k=[],G=m(t),te=G.next();!te.done;te=G.next()){var Y=te.value;te=ii(Y,"URI"),Y=zn(Y,"PATHWAY-ID"),e.j&&Y&&wd(e.j,A,Y,te),k.push(te)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),i=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Bu(i,n),i=Gv(e,A,k,n,i,u,!1,c,d,t,h,!1,E,!1),e.h.set(G,i),i}function Gv(e,t,n,i,u,c,d,h,E,A,k,G,te,Y){function ve(mt){var xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,ki,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return xt=Te.$(),x(Gr,p1(e,Te.$(),!0),2);case 2:if(Ht=Gr.h,mt.aborted)return Gr.return();if(Ut=Ht.uri,Ut==Ht.originalUri||xt.includes(Ut)||Ge.push(Ut),Et=i1(e.Ga,Ht.data),jt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return x(Gr,nM(e,Et,Pe),4);case 4:cn=Gr.h,jt=cn.mimeType,i=cn.codecs;case 3:return gn=Ma(e),x(Gr,fM(e,0,Et,Pe,Ut,i,u,c,d,h,E,A,k,G,te,Y,jt),5);case 5:if(Ln=Gr.h,mt.aborted)return Gr.return();if(Mn=Ln.stream,Ma(e)&&!gn&&mM(e,Et),Te.fc=Ln.fc,Te.yb=Ln.yb,Te.Hd=Ln.Hd,Te.Gd=Ln.Gd,Te.fd=Ln.fd,Te.$d=Ln.$d,Te.gb=Ln.gb,Te.hb=Ln.hb,Te.df=!0,Ne.segmentIndex=Mn.segmentIndex,Ne.encrypted=Mn.encrypted,Ne.drmInfos=Mn.drmInfos,Ne.keyIds=Mn.keyIds,Ne.mimeType=Mn.mimeType,Ne.bandwidth=Ne.bandwidth||Mn.bandwidth,Ne.codecs=Ne.codecs||Mn.codecs,bd(Ne),Ne.drmInfos.length&&e.i.newDrmInfo(Ne),qn=yi,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Kn=Yn.next();!Kn.done;Kn=Yn.next())Nr=Kn.value,Nr.df||Nr.type!=u||(Nr.stream.mimeType=Mn.mimeType,bd(Nr.stream));u==qn.ma&&(fi=Mn.segmentIndex.get(0))&&fi.ca&&(Ne.mimeType="application/mp4",bd(Ne)),H5(e)&&(e.mb?l1(e,[Te]):(e.mb=!0,ki=Array.from(e.h.values()),ci=ki.filter(function(po){return po.stream.segmentIndex}),l1(e,ci),u1(e),gi=e.m,0<gi&&e.s.X(gi))),$(Gr)}})}function Pe(){return e.j&&1<n.length?Rp(e.j,t):Ge.concat(YN([e.aa],n,e.o))}var Ne=hM(e,i,u,c,d,h,E,A,k,G,te,Y),Ge=[],Te={stream:Ne,type:u,tg:Ge,$:Pe,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},$e=null,Ue=new AbortController;return Ne.createSegmentIndex=function(){return $e||(Ue=new AbortController,$e=new Promise(function(mt){mt(ve(Ue.signal))}))},Ne.closeSegmentIndex=function(){$e&&!Ne.segmentIndex&&Ue.abort(),Ne.segmentIndex&&(Ne.segmentIndex.release(),Ne.segmentIndex=null),$e=null},Te}function lM(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function cM(e,t){var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function l1(e,t){if(!Ma(e))for(var n=lM(e),i=m(t),u=i.next();!u.done;u=i.next())u.value.stream.segmentIndex.sc(0,n);cM(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?eM(e,t):(x5(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&eM(e,t))}function qv(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function H5(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function fM(e,t,n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne){var Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,ki,ci,gi,Gr;return Oe(function(po){switch(po.g){case 1:if(n.type!=1)throw new gt(2,4,4017);Ge=Ws(n.g,"EXT-X-DEFINE"),Te=rM(e,Ge,u);var Uo=No(n.g,"EXT-X-PLAYLIST-TYPE"),ai=No(n.g,"EXT-X-ENDLIST");if(ai=Uo&&Uo.value=="VOD"||ai,Uo=Uo&&Uo.value=="EVENT"&&!ai,Uo=!ai&&!Uo,ai?Hv(e,Vv):Uo?Hv(e,zv):Hv(e,AM),Ma(e)&&c1(e,n),Ne){po.u(2);break}return x(po,z5(e,d,c,n,Te,i),3);case 3:Ne=po.h;case 2:return x(po,pM(e,n,Ne,i,Te),4);case 4:if($e=po.h,Ue=$e.drmInfos,mt=$e.keyIds,xt=$e.encrypted,Ht=$e.Tg,xt&&!Ue.length&&!Ht)throw new gt(2,4,4026);return Ut=hM(e,c,d,h,E,A,k,G,te,Y,ve,Pe),Ut.encrypted=xt,Ut.drmInfos=Ue,Ut.keyIds=mt,Ut.mimeType=Ne,bd(Ut),Et=Ma(e)?e.K.get(d):new Map,jt=yM(e,n,Ut,Et,Te,i,d),cn=jt.segments,(gn=jt.bandwidth)&&(Ut.bandwidth=gn),Ma(e)&&c1(e,n),Ln=cn[0].startTime,Mn=cn[cn.length-1],qn=Mn.endTime,Yn=new wr(cn),Ut.segmentIndex=Yn,Nr=(Kn=No(n.g,"EXT-X-SERVER-CONTROL"))?Op(Kn,"CAN-SKIP-UNTIL")!=null:!1,fi=Kn?Op(Kn,"CAN-BLOCK-RELOAD")!=null:!1,ki=Id(n.g,"EXT-X-MEDIA-SEQUENCE",0),ci=dM(ki,cn),gi=ci.gb,Gr=ci.hb,po.return({stream:Ut,type:d,tg:[],$:i,fc:Ln,yb:qn,Hd:Nr,Gd:fi,fd:!1,De:-1,gb:gi,hb:Gr,$d:Et,df:!1})}})}function dM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function hM(e,t,n,i,u,c,d,h,E,A,k,G){var te=d1(n,t)||h1(n),Y=[];if(E){E=m(E.split(","));for(var ve=E.next();!ve.done;ve=E.next())Y.push(ve.value)}return E=void 0,ve=null,n==vr?E=Y.includes("public.accessibility.transcribes-spoken-dialog")&&Y.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":Y.includes("public.accessibility.describes-video")&&(ve="visually impaired"),Y.length||E!=="subtitle"||Y.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:te,codecs:t,kind:n==vr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:br(i||"und"),originalLanguage:i,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Y,forced:A,channelsCount:d,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ve,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bd(e),e}function pM(e,t,n,i,u){var c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn,qn,Yn;return Oe(function(Kn){switch(Kn.g){case 1:if(c=new Map,t.segments){for(d=m(t.segments),h=d.next();!h.done;h=d.next())if(E=h.value,A=Ws(E.g,"EXT-X-KEY"),k=null,A.length)for(k=f1(e,t,E.g,i,u),G=m(A),te=G.next();!te.done;te=G.next())Y=te.value,c.set(Y,k)}Pe=ve=!1,Ne=[],Ge=new Set,Te=m(c),$e=Te.next();case 2:if($e.done){Kn.u(4);break}if(Ue=$e.value,mt=m(Ue),xt=mt.next().value,Ht=mt.next().value,Ut=xt,Et=Ht,jt=ii(Ut,"METHOD"),jt=="NONE"){Kn.u(3);break}if(ve=!0,cn=zn(Ut,"KEYFORMAT")||"identity",gn=null,Kv(jt)){Pe=!0,Kn.u(3);break}if(cn!="identity"){gn=(Ln=wM[cn])?Ln(Ut,n):null,Kn.u(6);break}return x(Kn,_M(e,Ut,n,i,Et,u),8);case 8:gn=Kn.h;case 6:if(gn){if(gn.keyIds)for(Mn=m(gn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,Ge.add(Yn);Ne.push(gn)}case 3:$e=Te.next(),Kn.u(2);break;case 4:return Kn.return({drmInfos:Ne,keyIds:Ge,encrypted:ve,Tg:Pe})}})}function gM(e,t,n,i,u){if(!p.crypto||!p.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new gt(2,4,4042);var c=0,d=zn(t,"IV","");if(d){var h=pu(d.substr(2));if(h.byteLength!=16)throw new gt(2,4,4048)}else c=Id(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(ii(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var A,k,G,te,Y,ve,Pe;return Oe(function(Ne){if(Ne.g==1)return A=ql(i(),ii(t,"URI"),u),k=A.sort().join(""),e.da.has(k)||(G=Li(A,e.g.retryParameters),te=Kl(e,G,6),e.da.set(k,te)),x(Ne,e.da.get(k),2);if(Ne.g!=3){if(Y=Ne.h,!Y.data||Y.data.byteLength!=E.bitsKey/8)throw new gt(2,4,4049);return ve={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Pe=E,x(Ne,p.crypto.subtle.importKey("raw",Y.data,ve,!0,["decrypt"]),3)}Pe.cryptoKey=Ne.h,E.fetchKey=void 0,$(Ne)})},e.ba.set(n,E)}return e.ba.get(n)}function c1(e,t){var n=1/0,i=t.segments;if(i.length)for(var u=i.length-1;0<=u;){var c=No(i[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(i=No(t.g,"EXT-X-TARGETDURATION"),!i)throw new gt(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(u=No(t.g,"EXT-X-PART-INF"))&&(e.L=Number(ii(u,"PART-TARGET"))),t=No(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(ii(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?Op(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(i,e.Ha)}function mM(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function f1(e,t,n,i,u){var c=No(n,"EXT-X-MAP");if(!c)return null;var d=ii(c,"URI"),h=ql(i(),d,u);if(d=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(d)){var E=void 0,A=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?Kv(ii(k,"METHOD"))&&k.id<c.id&&(E=gM(e,k,t,i,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(A=k);t=K5(h,c,A,E),e.Y.set(d,t)}return e.Y.get(d)}function K5(e,t,n,i){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,i&&(n=c+1-u,n%16&&(c+=16-n%16))),new dt(function(){return e},u,c,null,null,null,i)}function V5(e,t,n,i,u,c,d,h,E){var A=i.g,k=No(A,"EXTINF"),G=0,te=0,Y=null;i.rb.length&&!e.B&&Ke("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ve=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Pe=No(A,"EXT-X-PROGRAM-DATE-TIME");Pe&&Pe.value&&(ve=Qf(Pe.value))}var Ne=Bt;if(No(A,"EXT-X-GAP")&&(Ne=2),!k){if(i.rb.length==0)throw new gt(2,4,4024,"EXTINF");if(!e.B)return null}var Ge=[];Pe=!1;var Te=null,$e=!1,Ue=!1;if(e.B&&i.rb.length){G=(d.mimeType=="video/mp4"||d.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var mt=ve,xt={},Ht=0;Ht<i.rb.length;xt={Qc:xt.Qc,yd:xt.yd},Ht++){var Ut=i.rb[Ht],Et=Ht==0?n:Ge[Ge.length-1],jt=Ht==0?u:Et.endTime,cn=Number(zn(Ut,"DURATION"))||e.L;if(cn){var gn=jt+cn,Ln=0,Mn=null;if(Ut.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Ut,"BYTERANGE-START"))?Number(Ln):0,(Et=zn(Ut,"BYTERANGE-LENGTH"))?Mn=Ln+Number(Et)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Ut,"BYTERANGE"),Mn=m(vM(Et,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),xt.yd=zn(Ut,"URI"),xt.yd){Et=Bt,zn(Ut,"GAP")=="YES"&&(Et=2,$e=!0),xt.Qc=null;var qn=function(Kn){return function(){return Kn.Qc==null&&(Kn.Qc=ql(h(),Kn.yd,c)),Kn.Qc}}(xt);G&&0<=Ln&&Mn!=null&&(Te=qn,Pe=!0),jt=new Je(jt,gn,qn,Ln,Mn,t,0,0,1/0,[],"",null,mt,Et,E),Ut.name=="EXT-X-PRELOAD-HINT"&&(jt.ef(),Ue=!0),zn(Ut,"INDEPENDENT")!="YES"&&0<Ht&&jt.Zd(),Ge.push(jt),mt&&(mt+=cn)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(Ge.length)G=Ge[Ge.length-1].endTime;else return null;Pe&&($e||Ge[0].Aa!=0?(Pe=!1,Te=null):Ge=[]),(k=No(A,"EXT-X-BYTERANGE"))?(Y=m(vM(n,k.value)),te=Y.next().value,Y=Y.next().value):Ge.length&&(te=Ge[0].Aa,Y=Ge[Ge.length-1].ja),n="",k=null,d.type=="image"&&(n="1x1",d=No(A,"EXT-X-TILES"))&&(n=ii(d,"LAYOUT"),(d=zn(d,"DURATION"))&&(k=Number(d)));var Yn=null;return t=new Je(u,G,function(){return Te?Te():(Yn==null&&(Yn=ql(h(),i.h,c)),Yn||[])},te,Y,t,0,0,1/0,Ge,n,k,ve,Ne,E,0<Ge.length&&!!i.h),Pe&&(e.lb=!0,t.lg(),Ue&&t.ef()),t}function vM(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,i=n+t-1),[n,i]}function yM(e,t,n,i,u,c,d){var h=t.segments,E=void 0,A=Id(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=Id(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=No(t.g,"EXT-X-SKIP"),te=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,Y=k+te,ve=0;Ma(e)&&i.has(Y)&&(ve=i.get(Y)),ve===0&&e.qa==zv&&0<i.size&&!i.has(Y)&&(ve=e.l.qb());var Pe=[],Ne=null;G=[];for(var Ge=0;Ge<h.length;Ge++){var Te=h[Ge],$e=Ge==0?ve:Ne.endTime;Y=k+te+Ge,No(Te.g,"EXT-X-DISCONTINUITY")&&A++;for(var Ue=m(Te.g),mt=Ue.next();!mt.done;mt=Ue.next())mt=mt.value,mt.name=="EXT-X-KEY"&&(Kv(ii(mt,"METHOD"))?E=gM(e,mt,t,c,u):E=void 0);i.set(Y,$e),Ue=f1(e,t,Te.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),($e=V5(e,Ue,Ne,Te,$e,u,n,c,E))&&((Ne=Id(Te.g,"EXT-X-BITRATE"))?G.push({bitrate:Ne,duration:$e.endTime-$e.startTime}):G.length&&(Ne=G.pop(),Ne.duration+=$e.endTime-$e.startTime,G.push(Ne)),Ne=$e,$e.j=A,qv(e,d)&&e.I!=null&&Y<e.I||Pe.push($e))}if(t=void 0,G.length&&(t=G.reduce(function(xt,Ht){return xt+Ht.duration},0),t=Math.round(G.reduce(function(xt,Ht){return xt+Ht.bitrate*Ht.duration},0)/t*1e3)),G=Pe.some(function(xt){return xt.h!=null})){for(n={},i=0;i<Pe.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},i++)if(n.Cb=Pe[i],n.Cb.h==null)for(n.Ic=0,n.Jc=i,u=function(xt){return function(){var Ht=Pe[xt.Jc];if(Ht){if(Ht.h!=null)return Ht.h+xt.Ic;xt.Ic-=Ht.endTime-Ht.startTime,xt.Jc+=1}return null}}(n),n.Fc=0,n.td=i,c=function(xt){return function(){var Ht=Pe[xt.td];if(Ht){if(Ht!=xt.Cb&&(xt.Fc+=Ht.endTime-Ht.startTime),Ht.h!=null)return Ht.h+xt.Fc;--xt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Pe),i=n.next();!i.done;i=n.next())for(u=i.value,i=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=i,i+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!qv(e,d))for(e=m(Pe),i=e.next();!i.done;i=e.next())i.value.Ff(n);return{segments:Pe,bandwidth:t}}function d1(e,t){if(e==vr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function h1(e){return e==vr?"text/vtt":SM[e].mp4}function z5(e,t,n,i,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te;return Oe(function($e){switch($e.g){case 1:return d=Xa,h=Math.trunc((i.segments.length-1)/2),E=ql(c(),i.segments[h].h,u),A=new si(E[0]),k=A.Pa.split(".").pop(),G=SM[t],(te=G[k])||(te=TM[k])||(te=d1(t,n))?$e.return(te):(ve=1,Pe=Li(E,e.g.retryParameters),ce($e,2),Pe.method="HEAD",x($e,Kl(e,Pe,d,{type:ve}),4));case 4:Ne=$e.h,Y=Ne.headers["content-type"],he($e,3);break;case 2:if(Ge=Ce($e),!Ge||Ge.code!=1002&&Ge.code!=1001){$e.u(3);break}return Pe.method="GET",x($e,Kl(e,Pe,d,{type:ve}),6);case 6:Te=$e.h,Y=Te.headers["content-type"];case 3:return Y?$e.return(Y.split(";")[0]):$e.return(h1(t))}})}function EM(e,t,n,i,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function p1(e,t,n){return Kl(e,Li(t,e.g.retryParameters),0,{type:n?2:3})}function Y5(e){var t,n,i,u,c,d;Oe(function(h){switch(h.g){case 1:return e.i?(ce(h,2),t=Date.now(),x(h,e.update(),4)):h.return();case 4:n=Date.now(),Ma(e)&&(i=(n-t)/1e3,e.bb.sample(1,i),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),he(h,3);break;case 2:if(d=Ce(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(d),h.return();d.severity=1,e.i.onError(d),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),$(h)}})}function Ma(e){return e.qa!=Vv}function Hv(e,t){e.qa=t,e.l&&e.l.Ec(!Ma(e)),Ma(e)||e.s.stop()}function Kl(e,t,n,i){if(!e.N)throw new gt(2,7,7001);return t=e.i.networkingEngine.request(n,t,i),vu(e.N,t),t.promise}function Kv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function _M(e,t,n,i,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(mt){switch(mt.g){case 1:if(n=="video/mp2t")throw new gt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new gt(2,4,4041);if(d=ii(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(d))return mt.return(null);if(E=ql(i(),ii(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){A=ks(Ho(E[0].split("data:text/plain;base64,").pop())),mt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Li(E,e.g.retryParameters),te=Kl(e,G,6),e.ia.set(k,te)),x(mt,e.ia.get(k),3);case 3:Y=mt.h,A=ks(Y.data);case 2:if(ve="00000000000000000000000000000000",!u){mt.u(4);break}if(e.pa.has(u)){Pe=e.pa.get(u),mt.u(5);break}return Ne=lp(u.$(),u.ac(),u.Yb(),e.g.retryParameters),Ge=Xa,x(mt,Kl(e,Ne,Ge,{type:0}),6);case 6:Te=mt.h,Pe=b5(Te.data),e.pa.set(u,Pe);case 5:Pe&&(ve=Pe);case 4:return $e=new Map,$e.set(ve,A),Ue="cenc",d=="SAMPLE-AES"&&(Ue="cbcs"),mt.return(xh($e,Ue))}})}re("shaka.hls.HlsParser",Zv);var TM={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},SM={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},wM={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new gt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new gt(2,4,4041);return e=ii(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),Uu("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=ii(e,"URI"),t=a1(t),t=Qn(t.data),n=Uu("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=ii(e,"URI"),e=a1(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Wf(e,t,new Set,0),Uu("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Vv="VOD",AM="EVENT",zv="LIVE",W5={Pg:Vv,Pi:AM,Xi:zv};ke["application/x-mpegurl"]=function(){return new Zv},ke["application/vnd.apple.mpegurl"]=function(){return new Zv};function $5(e){var t=0,n=tn(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:i,value:c}),e+=u}n=t}return n}function Yv(e){if(e=IM(e))e:{e=m(xa(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=la(t.value,"LA_URL")){e=Ri(t);break e}e=""}else e="";return e}function IM(e){return e=Ho(Ri(e)),e=$5(e).filter(function(t){return t.type===X5})[0],e?(e=Va(e.value,!0),(e=Bl(e,"WRMHEADER"))?e:null):null}var X5=1,Q5=new Map().set("com.microsoft.playready",Yv).set("com.microsoft.playready.recommendation",Yv).set("com.microsoft.playready.software",Yv).set("com.microsoft.playready.hardware",Yv);function Rd(e){if(!xM){xM=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);Wv=mr("ftyp",t,i,t,n),t=mr("dref",lZ),g1=mr("dinf",t)}this.g=e}function xd(e){for(var t=[],n=m(e.g),i=n.next();!i.done;i=n.next()){var u=t,c=u.push,d=i.value;i=mr;var h=d.id+1,E=d.stream.width||0,A=d.stream.height||0;d.type=="audio"&&(A=E=0);var k=d.duration*d.timescale,G=Math.floor(k/(Vl+1));switch(k=Math.floor(k%(Vl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(h,4)),[0,0,0,0],T(oi(G,4)),T(oi(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(oi(E,2)),[0,0],T(oi(A,2)),[0,0])),h=mr("tkhd",h),E=mr,G=d.duration*d.timescale,A=Math.floor(G/(Vl+1)),G=Math.floor(G%(Vl+1)),k=d.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(d.timescale,4)),T(oi(A,4)),T(oi(G,4)),T(oi(k,2)),[0,0])),A=mr("mdhd",A),G=d,k=new Uint8Array([]),G.type){case"video":k=eZ;break;case"audio":k=tZ}G=mr("hdlr",k);e:{switch(d.type){case"video":d=mr("minf",mr("vmhd",aZ),g1,CM(d));break e;case"audio":d=mr("minf",mr("smhd",sZ),g1,CM(d));break e}d=new Uint8Array([])}d=E("mdia",A,G,d),i=i("trak",h,d),c.call(u,i)}for(t=li.apply(Oi,T(t)),c=e.g[0],n=mr,i=c.duration*c.timescale,u=Math.floor(i/(Vl+1)),i=Math.floor(i%(Vl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(c.timescale,4)),T(oi(u,4)),T(oi(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),i=[],e=m(e.g),E=e.next();!E.done;E=e.next())d=i,h=d.push,E=new Uint8Array([0,0,0,0].concat(T(oi(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(d,E);if(e=li.apply(Oi,T(i)),e=mr("mvex",e),i=[],c.encrypted){for(c=m(c.stream.drmInfos),d=c.next();!d.done;d=c.next())if(d=d.value,d.initData)for(d=m(d.initData),h=d.next();!h.done;h=d.next())i.push(h.value.initData);c=li.apply(Oi,T(i))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(Wv.byteLength+e.byteLength),t.set(Wv),t.set(e,Wv.byteLength),t}function CM(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var i=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,d=[],h=[],E=0,A=0,k=0,G=0;G<e.Sa.length;G++){var te=RM(e.Sa[G]);switch(te[0]&31){case 7:d.push(te),c+=te.length+2;break;case 8:h.push(te),c+=te.length+2}}for(0<d.length&&(E=d[0][1],k=d[0][2],A=d[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=A,c[G++]=255,c[G++]=224|d.length,E=0;E<d.length;E++)c[G++]=(d[E].length&65280)>>8,c[G++]=d[E].length&255,c.set(d[E],G),G+=d[E].length;for(c[G++]=h.length,d=0;d<h.length;d++)c[G++]=(h[d].length&65280)>>8,c[G++]=h[d].length&255,c.set(h[d],G),G+=h[d].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(n,2)),T(oi(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",h=bM(e),d=new Uint8Array([]),e.encrypted&&(d=Nd(e),i="encv"),n=mr(i,n,u,h,d)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(i,2)),T(oi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=bM(e),d=new Uint8Array([]),e.encrypted&&(d=Nd(e),u="encv"),n=mr(u,i,n,h,d));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",Lp(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),i="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Lp(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),i="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Lp(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),i="Opus",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Lp(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,i=e.id+1,u=e.stream.channelsCount||2,d=e.stream.audioSamplingRate||44100,E=Bu("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[d],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=A[2*d]),d=parseInt(E.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(T(oi(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,d<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",i)),i="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Nd(e),i="enca"),e=mr(i,Lp(e),n,u)),n=e}return e=mr("stsd",uZ,n),t("stbl",e,mr("stts",nZ),mr("stsc",rZ),mr("stsz",oZ),mr("stco",iZ))}function bM(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(oi(e.xa,4)),T(oi(t,4)))),mr("pasp",e)}function Lp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(oi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Nd(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),i=0,u=0;u<n.length;u+=1)i|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(oi(i,4)))),n=mr("frma",n),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),i=mr("schm",i),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var d=e.next();!d.done;d=e.next())if((d=d.value)&&d.keyIds&&d.keyIds.size){d=m(d.keyIds);for(var h=d.next();!h.done;h=d.next())c=RM(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,i,u("schi",c))}function kp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,u=i.apply,c=mr,d=new Uint8Array([0,0,0,0].concat(T(oi(n.data?n.data.jb:0,4))));d=mr("mfhd",d);var h,E=n.data?n.data.Ra:[],A=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;A[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",A);var G=E.length+92;A=mr,h=new Uint8Array([0,0,0,58].concat(T(oi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var te=Math.floor(k%(Vl+1));k=new Uint8Array([1,0,0,0].concat(T(oi(Math.floor(k/(Vl+1)),4)),T(oi(te,4)))),k=mr("tfdt",k);var Y=G;G=n.data?n.data.Ra:[],te=G.length;var ve=12+16*te,Pe=new Uint8Array(ve);for(Y+=8+ve,Pe.set([n.type==="video"?1:0,0,15,1].concat(T(oi(te,4)),T(oi(Y,4))),0),Y=0;Y<te;Y++){var Ne=G[Y];ve=oi(Ne.duration,4);var Ge=oi(Ne.size,4),Te=Ne.flags;Ne=oi(Ne.Ta,4),Pe.set([].concat(T(ve),T(Ge),[Te.Va<<2|Te.Ka,Te.Na<<6|Te.Ma<<4|Te.Wa,Te.Ja&61440,Te.Ja&15],T(Ne)),12+16*Y)}G=mr("trun",Pe),E=A("traf",h,k,G,E),c=c("moof",d,E),u.call(i,t,[c,J5(n)])}return li.apply(Oi,T(t))}function J5(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=li.apply(Oi,T(e)),mr("mdat",e)}function oi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function RM(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=Qe.apply(1,arguments),n=NM[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],NM[e]=n);for(var i=8,u=t.length-1;0<=u;u--)i+=t[u].byteLength;for(u=new Uint8Array(i),u[0]=i>>24&255,u[1]=i>>16&255,u[2]=i>>8&255,u[3]=i&255,u.set(n,4),n=0,i=8;n<t.length;n++)u.set(t[n],i),i+=t[n].byteLength;return u}var xM=!1,Vl=Math.pow(2,32)-1,NM={},eZ=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),tZ=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),nZ=new Uint8Array([0,0,0,0,0,0,0,0]),rZ=new Uint8Array([0,0,0,0,0,0,0,0]),iZ=new Uint8Array([0,0,0,0,0,0,0,0]),oZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),aZ=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),sZ=new Uint8Array([0,0,0,0,0,0,0,0]),uZ=new Uint8Array([0,0,0,0,0,0,0,1]),Wv=new Uint8Array([]),lZ=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),g1=new Uint8Array([]);function m1(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){cZ(e)}),this.A=new kl,this.m=new Map}g=m1.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return Oe(function(i){if(i.g==1)return n.l=[e],n.h=t,x(i,v1(n),2);if(!n.h)throw new gt(2,7,7001);return i.return(n.j)})};function cZ(e){var t;Oe(function(n){switch(n.g){case 1:return ce(n,2),x(n,v1(e),4);case 4:he(n,3);break;case 2:t=Ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();$(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return ce(n,2),x(n,v1(e),4);if(n.g!=2)return he(n,0);if(t=Ce(n),!e.h||!t)return n.return();e.h.onError(t),$(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function v1(e){var t,n,i,u,c,d,h;return Oe(function(E){if(E.g==1)return t=Li(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),u=n.request(0,t,{type:5}),vu(e.A,u),x(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=ev){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=kN(k,"SmoothStreamingMedia"),!k)throw new gt(2,4,4046,A);G(k),k=Ya(k.outerHTML)}var te=Jh(k,"SmoothStreamingMedia");if(!te)throw new gt(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=tv&&A(te),e.i||(e.i=new tr(null,0)),A=_r(te,"IsLive",ep,!1))throw new gt(2,4,4047);e.i.Ec(!A),G=_r(te,"TimeScale",xo,1e7),k=_r(te,"DVRWindowLength",xo),A&&(k===0||isNaN(k))&&(k=1/0);var Y=_r(te,"CanSeek",ep,!1);k===0&&Y&&(k=1/0),Y=null,k&&0<k&&(Y=k/G),A&&!isNaN(e.g.availabilityWindowOverride)&&(Y=e.g.availabilityWindowOverride),Y==null&&(Y=1/0),e.i.je(Y),k=_r(te,"Duration",xo,1/0),A||e.i.Za(k/G),A={variants:[],textStreams:[],timescale:G,duration:k/G},Y=Wr(te,"Protection");var ve;for(G=e.g.mss.keySystemsBySystemId,k=[],Y=m(Y),ve=Y.next();!ve.done;ve=Y.next())k=k.concat(Wr(ve.value,"ProtectionHeader"));if(k.length){for(Y=[],ve=0;ve<k.length;ve++){var Pe=k[ve],Ne=Pe.attributes.SystemID.toLowerCase(),Ge=G[Ne];if(Ge){var Te=IM(Pe);if(Te)e:{Te=m(xa(Te,"DATA"));for(var $e=Te.next();!$e.done;$e=Te.next())if($e=la($e.value,"KID")){Te=Ho(Ri($e)),Te=new Uint8Array([Te[3],Te[2],Te[1],Te[0],Te[5],Te[4],Te[7],Te[6]].concat(T(Te.slice(8)))),Te=ks(Te);break e}Te=null}else Te=null;$e=Ho(Ri(Pe)),Ne=pu(Ne.replace(/-/g,"")),Ne=[{initData:Wf($e,Ne,new Set,0),initDataType:"cenc",keyId:Te}],Ne=Uu(Ge,"cenc",Ne),Te&&Ne.keyIds.add(Te),(Ge=Q5.get(Ge))&&(Ne.licenseServerUri=Ge(Pe)),Y.push(Ne)}}G=Y}else G=[];for(ve=G,Y=[],G=[],k=[],te=Wr(te,"StreamIndex"),te=m(te),Pe=te.next();!Pe.done;Pe=te.next()){Pe=Pe.value,Ge=Wr(Pe,"QualityLevel"),Ne=A.timescale,Te=A.duration,$e=Wr(Pe,"c");for(var Ue=[],mt=0,xt=0;xt<$e.length;++xt){var Ht=$e[xt],Ut=$e[xt+1],Et=_r(Ht,"t",xo),jt=_r(Ht,"d",xo);if(Ht=_r(Ht,"r",Ju),!jt)break;if(Et=Et!=null?Et:mt,Ht=Ht||0,0>Ht)if(Ut){if(Ut=_r(Ut,"t",xo),Ut==null)break;if(Et>=Ut)break;Ht=Math.ceil((Ut-Et)/jt)-1}else{if(Te==1/0)break;if(Et/Ne>=Te)break;Ht=Math.ceil((Te*Ne-Et)/jt)-1}for(Ut=0;Ut<=Ht;++Ut)mt=Et+jt,Ue.push({start:Et/Ne,end:mt/Ne,Kf:Et}),Et=mt}for(Ne=Ue,Ge=m(Ge),Te=Ge.next();!Te.done;Te=Ge.next())(Te=fZ(e,Pe,Te.value,Ne,ve,A))&&(Te.type!="audio"||e.g.disableAudio?Te.type!="video"||e.g.disableVideo?Te.type!=vr||e.g.disableText||k.push(Te):G.push(Te):Y.push(Te))}for(te=[],Y=m(0<Y.length?Y:[null]),ve=Y.next();!ve.done;ve=Y.next())for(ve=ve.value,Pe=m(0<G.length?G:[null]),Te=Pe.next();!Te.done;Te=Pe.next())Ge=te,Ne=Ge.push,Te=Te.value,$e=0,ve&&ve.bandwidth&&0<ve.bandwidth&&($e+=ve.bandwidth),Te&&Te.bandwidth&&0<Te.bandwidth&&($e+=Te.bandwidth),Te={id:e.s++,language:ve?ve.language:"und",disabledUntilTime:0,primary:!!ve&&ve.primary||!!Te&&Te.primary,audio:ve,video:Te,bandwidth:$e,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},Ne.call(Ge,Te);A.variants=te,A.textStreams=k,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),d=Date.now(),h=(d-i)/1e3,e.B.sample(1,h),$(E)})}function fZ(e,t,n,i,u,c){var d=t.attributes.Type;if(d!=="audio"&&d!=="video"&&d!=="text")return Ke("Ignoring unrecognized type:",d),null;var h=t.attributes.Language,E=e.s++,A=_r(n,"Bitrate",Zs),k=_r(n,"MaxWidth",Zs),G=_r(n,"MaxHeight",Zs),te=_r(n,"Channels",Zs),Y=_r(n,"SamplingRate",Zs),ve=c.duration;i.length&&(ve=i[i.length-1].end-i[0].start);var Pe=e.i.getDuration();e.i.Za(Math.min(ve,Pe));var Ne={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:br(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:te,audioSamplingRate:Y,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ve,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=vZ[u])&&Ne.roles.push(u),u==="main"&&(Ne.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(d==="audio")u="AAC";else if(d==="video")return Ke('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!mZ.includes(u.toUpperCase()))return Ke("Codec not supported:",u),null;switch(n=dZ(n,d,u,Ne),Ne.mssPrivateData.codecPrivateData=n,d){case"audio":if(!n)return Ke("Quality unsupported without CodecPrivateData",d),null;Ne.type="audio",Ne.mimeType="mss/audio/mp4",Ne.codecs=hZ(u,n);break;case"video":if(!n)return Ke("Quality unsupported without CodecPrivateData",d),null;Ne.type="video",Ne.mimeType="mss/video/mp4",Ne.codecs=pZ(n);break;case"text":Ne.type=vr,Ne.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(Ne.codecs="stpp")}return Ne.fullMimeTypes.add(Si(Ne.mimeType,Ne.codecs)),Ne.createSegmentIndex=function(){if(Ne.segmentIndex)return Promise.resolve();if(e.m.has(Ne.id))var Ge=e.m.get(Ne.id);else Ge=[],Ne.type=="video"&&(Ge=Ne.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Ge={id:Ne.id,type:Ne.type,codecs:Ne.codecs,encrypted:Ne.encrypted,timescale:Ne.mssPrivateData.timescale,duration:Ne.mssPrivateData.duration,Sa:Ge,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:Ne},Ge=xd(new Rd([Ge])),e.m.set(Ne.id,Ge);return Ge=gZ(e,new dt(function(){return[]},0,null,null,void 0,Ge),Ne,t,i),Ne.segmentIndex=new wr(Ge),Promise.resolve()},Ne.closeSegmentIndex=function(){Ne.segmentIndex&&(Ne.segmentIndex.release(),Ne.segmentIndex=null)},Ne}function dZ(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function hZ(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function pZ(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function gZ(e,t,n,i,u){var c=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[];var d={};u=m(u);for(var h=u.next();!h.done;d={Pc:d.Pc},h=u.next())d.Pc=h.value,i.push(new Je(d.Pc.start,d.Pc.end,function(E){return function(){return ho(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return i}re("shaka.mss.MssParser",m1);var mZ="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),vZ={CAPT:"main",SUBT:"alternate",DESC:"main"};ke["application/vnd.ms-sstr+xml"]=function(){return new m1};function MM(e,t,n,i,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=za(t)}catch(d){}throw new gt(n==401||n==403?2:1,1,1001,i,n,u,e,c)}function y1(){}function $v(e,t,n,i,u){var c=new SZ;Fl(t.headers).forEach(function(A,k){c.append(k,A)});var d=new _Z,h={Rf:!1,Jg:!1};if(e=yZ(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:d.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,i,u,t.streamDataCallback),e=new pi(e,function(){return h.Rf=!0,d.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,d.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function yZ(e,t,n,i,u,c,d){var h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:return h=EZ,E=TZ,te=G=0,Y=Date.now(),ce(Ue,2),x(Ue,h(e,n),4);case 4:if(A=Ue.h,c(DM(A.headers)),n.method=="HEAD"){Ue.u(5);break}return ve=A.clone().body.getReader(),Ne=(Pe=A.headers.get("Content-Length"))?parseInt(Pe,10):0,Ge=function(mt){function xt(){var Ht,Ut;return Oe(function(Et){switch(Et.g){case 1:return ce(Et,2),x(Et,ve.read(),4);case 4:Ht=Et.h,he(Et,3);break;case 2:return Ce(Et),Et.return();case 3:if(Ht.done){Et.u(5);break}if(G+=Ht.value.byteLength,!d){Et.u(5);break}return x(Et,d(Ht.value),5);case 5:Ut=Date.now(),(100<Ut-Y||Ht.done)&&(u(Ut-Y,G-te,Ne-G),te=G,Y=Ut),Ht.done?mt.close():(mt.enqueue(Ht.value),xt()),$(Et)}})}xt()},new E({start:Ge}),x(Ue,A.arrayBuffer(),6);case 6:k=Ue.h;case 5:he(Ue,3);break;case 2:throw Te=Ce(Ue),i.Rf?new gt(1,1,7001,e,t):i.Jg?new gt(1,1,1003,e,t):new gt(1,1,1002,e,Te,t);case 3:return $e=DM(A.headers),Ue.return(MM($e,k,A.status,e,A.url,t))}})}function DM(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function PM(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}re("shaka.net.HttpFetchPlugin",y1),y1.isSupported=PM,y1.parse=$v;var EZ=p.fetch,_Z=p.AbortController,TZ=p.ReadableStream,SZ=p.Headers;PM()&&(Ko("http",$v,2,!0),Ko("https",$v,2,!0),Ko("blob",$v,2,!0));function OM(){}function Xv(e,t,n,i,u){var c=new wZ,d=Date.now(),h=0,E=new Promise(function(A,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new gt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var Y=LM(c);u(Y),G=!0}},c.onload=function(){var Y=LM(c),ve=c.response;try{var Pe=MM(Y,ve,c.status,e,c.responseURL,n);A(Pe)}catch(Ne){k(Ne)}},c.onerror=function(Y){k(new gt(1,1,1002,e,Y,n))},c.ontimeout=function(){k(new gt(1,1,1003,e,n))},c.onprogress=function(Y){var ve=Date.now();(100<ve-d||Y.lengthComputable&&Y.loaded==Y.total)&&(i(ve-d,Y.loaded-h,Y.total-Y.loaded),h=Y.loaded,d=ve)};for(var te in t.headers)c.setRequestHeader(te.toLowerCase(),t.headers[te]);c.send(t.body)});return new pi(E,function(){return c.abort(),Promise.resolve()})}function LM(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}re("shaka.net.HttpXHRPlugin",OM),OM.parse=Xv;var wZ=p.XMLHttpRequest;Ko("http",Xv,1,!0),Ko("https",Xv,1,!0),Ko("blob",Xv,1,!0);function kM(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function E1(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function AZ(e,t){return lp(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function FM(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function UM(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}FM.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function BM(e){var t=this;this.o=e,this.j=new Map,this.i=new Xu(function(){return _1(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new FM}BM.prototype.destroy=function(){return this.i.destroy()};function IZ(e,t,n){e.m=t,e.l=n}function _1(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function CZ(e,t,n,i,u,c){jr(e.i);var d=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,A,k,G,te,Y;return Oe(function(ve){if(ve.g==1)return x(ve,RZ(e,n),2);if(h=ve.h,e.i.g)throw new gt(2,9,7001);if(u)for(k in E=Qn(h),A=new Fm(E),A.data)G=Number(k),te=A.data[G],Y=A.g[G],e.l(te,Y);e.g.close(i,h.byteLength);var Pe=e.g;return e.m(Pe.i==0?0:Pe.j/Pe.i,e.g.h),ve.return(c(h))})});e.j.set(t,d)}function bZ(e){return Oe(function(t){return t.g==1?x(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function RZ(e,t){var n,i,u,c;return Oe(function(d){return d.g==1?(n=Xa,i=e.o.request(n,t),u=function(){return i.abort()},e.h.push(u),x(d,i.promise,2)):(c=d.h,mn(e.h,u),d.return(c.data))})}function Qv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Qv.prototype.abort=function(){var e=this;return Oe(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),x(t,e.g,4)}if(t.g!=2)return he(t,0);Ce(t),$(t)})};function T1(e,t){return new Promise(function(n,i){var u=e.h.openCursor();u.onerror=i,u.onsuccess=function(){var c;return Oe(function(d){if(d.g==1)return u.result==null?(n(),d.return()):(c=u.result,x(d,t(c.key,c.value,c),2));c.continue(),$(d)})}})}Qv.prototype.store=function(){return this.h},Qv.prototype.promise=function(){return this.g};function S1(e){this.h=e,this.g=[]}S1.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Wc(e,t){return Jv(e,t,"readwrite")}function Jv(e,t,n){n=e.h.transaction([t],n);var i=new Qv(n,t);return e.g.push(i),i.promise().then(function(){mn(e.g,i)},function(){mn(e.g,i)}),i}function $c(e,t,n){this.h=new S1(e),this.i=t,this.g=n}g=$c.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return jM(this.i)},g.removeSegments=function(e,t){return ZM(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return Oe(function(i){return i.g==1?x(i,GM(t,t.i,e),2):(n=i.h,i.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return jM(this.g)},g.updateManifest=function(){return Promise.reject(new gt(2,9,9016,"Cannot modify values in "+this.g))};function xZ(e,t,n){e=Wc(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=Wc(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,i.put(u,e))},n.promise()},g.removeManifests=function(e,t){return ZM(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return Oe(function(i){return i.g==1?x(i,GM(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return Oe(function(i){return i.g==1?(t=Jv(e.h,e.g,"readonly"),n=new Map,x(i,T1(t,function(u,c){var d;return Oe(function(h){if(h.g==1)return x(h,e.Yc(c),2);d=h.h,n.set(u,d),$(h)})}),2)):i.g!=3?x(i,t.promise(),3):i.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function jM(e){return Promise.reject(new gt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,i,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(i=Wc(n.h,e),u=i.store(),c=[],d={},h=m(t),E=h.next();!E.done;d={zd:d.zd},E=h.next())A=E.value,d.zd=u.add(A),d.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(d);return x(k,i.promise(),2)}return k.return(c)})};function ZM(e,t,n,i){e=Wc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(d){return function(){return i(d.xd)}}(u);return e.promise()}function GM(e,t,n){var i,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(i=Jv(e.h,t,"readonly"),u=i.store(),c={},d=[],h={},E=m(n),A=E.next();!A.done;h={Nc:h.Nc,Lc:h.Lc},A=E.next())h.Lc=A.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&d.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return x(k,i.promise(),2)}if(d.length)throw new gt(2,9,9012,"Could not find values for "+d);return k.return(n.map(function(G){return c[G]}))})}function Fp(e){this.g=new S1(e)}Fp.prototype.destroy=function(){return this.g.destroy()},Fp.prototype.getAll=function(){var e=this,t,n;return Oe(function(i){return i.g==1?(t=Jv(e.g,"session-ids","readonly"),n=[],x(i,T1(t,function(u,c){n.push(c)}),2)):i.g!=3?x(i,t.promise(),3):i.return(n)})},Fp.prototype.add=function(e){var t=Wc(this.g,"session-ids"),n=t.store();e=m(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},Fp.prototype.remove=function(e){var t=this,n;return Oe(function(i){return i.g==1?(n=Wc(t.g,"session-ids"),x(i,T1(n,function(u,c,d){e.includes(c.sessionId)&&d.delete()}),2)):x(i,n.promise(),0)})};function zo(){this.g=new Map}zo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},zo.prototype.init=function(){var e=this;Up.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function qM(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:i,Ba:c},Ba:u})})}),t)return t;throw new gt(2,9,9013,"Could not find a cell that supports add-operations")}function NZ(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(u,c){t({fb:i,Ba:c},u)})})}function ey(e,t,n){if(e=e.g.get(t),!e)throw new gt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new gt(2,9,9013,"Could not find cell with name "+n);return t}function MZ(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function DZ(e){var t=Array.from(e.g.keys());if(!t.length)throw new gt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function PZ(e){var t,n,i;return Oe(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(i=Up,i.forEach(function(c){(c=c())&&t.push(c)})),x(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):x(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function HM(e,t){Up.set(e,t)}re("shaka.offline.StorageMuxer",zo),zo.unregister=function(e){Up.delete(e)},zo.register=HM,zo.prototype.destroy=zo.prototype.destroy;var Up=new Map;function Bp(){$c.apply(this,arguments)}z(Bp,$c),Bp.prototype.updateManifestExpiration=function(e,t){var n=this,i,u,c;return Oe(function(d){return i=Wc(n.h,n.g),u=i.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new gt(2,9,9012,"Could not find values for "+e))},x(d,Promise.all([i.promise(),c]),0)})},Bp.prototype.Yc=function(e){var t,n,i,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=i-e.periods[n].startTime,c=OZ(e.periods[n],u),t.push(c);return x(h,RN(t),2)}return d=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:d,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function OZ(e,t){kZ(e);for(var n=m(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(u){return LZ(u,e.startTime,t)})}function LZ(e,t,n){var i=e.initSegmentUri?KM(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(d){var h=KM(d.uri);return{startTime:t+d.startTime,endTime:t+d.endTime,dataKey:h,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Bp.prototype.Tf=function(e){return{data:e.data}};function KM(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new gt(2,9,9004,"Could not parse uri "+e)}function kZ(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=m(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(i=c.next();!i.done;i=c.next())i.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),i=c.next();!i.done;i=c.next())i.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),i=t.next();!i.done;i=t.next())for(i=i.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var d=n++;i.variantIds.push(d),c.variantIds.push(d)}}}function ty(){$c.apply(this,arguments)}z(ty,$c),ty.prototype.Yc=function(e){var t,n,i,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=i-e.periods[n].startTime;for(var E=e.periods[n],A=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&A.push(FZ(G,E.startTime,E.startTime+u));c=A,t.push(c)}return x(h,RN(t),2)}return d=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:d,sequenceMode:!1})})};function FZ(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function w1(){$c.apply(this,arguments)}z(w1,$c),g=w1.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return xZ(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function VM(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=VM.prototype,g.init=function(){var e=this,t=new Rr,n=!1,i=new pr(function(){n=!0,t.reject(new gt(2,9,9017))});i.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var d=c.objectStoreNames;d=d.contains("manifest")&&d.contains("segment")?new Bp(c,"segment","manifest"):null,e.g=d,d=c.objectStoreNames,d=d.contains("manifest-v2")&&d.contains("segment-v2")?new ty(c,"segment-v2","manifest-v2"):null,e.h=d,d=c.objectStoreNames,d=d.contains("manifest-v3")&&d.contains("segment-v3")?new ty(c,"segment-v3","manifest-v3"):null,e.i=d,d=c.objectStoreNames,d=d.contains("manifest-v5")&&d.contains("segment-v5")?new w1(c,"segment-v5","manifest-v5"):null,e.j=d,c=c.objectStoreNames.contains("session-ids")?new Fp(c):null,e.m=c,i.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,d=m(["segment-v5","manifest-v5","session-ids"]),h=d.next();!h.done;h=d.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new gt(2,9,9001,u.error)),i.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return x(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),$(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),x(t,UZ(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,x(t,e.init(),0)}})};function UZ(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new gt(2,9,9001,t.error)),n.preventDefault()},e}HM("idb",function(){return aa()||vs()||!p.indexedDB?null:new VM});function Au(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}Au.prototype.fb=function(){return this.i},Au.prototype.Ba=function(){return this.h},Au.prototype.key=function(){return this.l},Au.prototype.toString=function(){return this.j};function A1(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new Au(t,n,i,Number(e[4])):null}function zM(e,t){this.h=e,this.g=t}function YM(e,t){var n=new tr(null,0);n.Za(t.duration);var i=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});i=BZ(e,i,u,n),u=t.streams.filter(function(A){return A.type==vr}).map(function(A){return ny(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return ny(e,A,n)}),d=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(i.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=d),E.video&&E.video.encrypted&&(E.video.drmInfos=d);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function BZ(e,t,n,i){for(var u=new Set,c=m(t),d=c.next();!d.done;d=c.next()){var h=m(d.value.variantIds);for(d=h.next();!d.done;d=h.next())u.add(d.value)}for(c=m(n),d=c.next();!d.done;d=c.next())for(h=m(d.value.variantIds),d=h.next();!d.done;d=h.next())u.add(d.value);for(c=new Map,u=m(u),d=u.next();!d.done;d=u.next())d=d.value,c.set(d,{id:d,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,d=ny(e,u,i),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=d.language,u.primary=u.primary||d.primary,u.audio=d;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=ny(e,u,i),d=m(u.variantIds),u=d.next();!u.done;u=d.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function ny(e,t,n){var i=t.segments.map(function(u){return jZ(e,u,t)});return n.ld(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Si(t.mimeType,t.codecs)])}}function jZ(e,t,n){var i=new Au("segment",e.h,e.g,t.dataKey);return e=new Je(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?ZZ(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function ZZ(e,t){var n=new Au("segment",e.h,e.g,t);return new dt(function(){return[n.toString()]},0,null)}function WM(){this.g=null}g=WM.prototype,g.configure=function(){},g.start=function(e,t){var n=this,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(i=A1(e),n.g=i,i==null||i.g!="manifest")throw new gt(2,1,9004,e);return u=new zo,oe(k,2),x(k,u.init(),4);case 4:return x(k,ey(u,i.fb(),i.Ba()),5);case 5:return c=k.h,x(k,c.getManifests([i.key()]),6);case 6:return d=k.h,h=d[0],E=new zM(i.fb(),i.Ba()),A=YM(E,h),t.makeTextStreamsForClosedCaptions(A),k.return(A);case 2:return Xe(k),x(k,u.destroy(),7);case 7:Ae(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return i=n.g,u=new zo,ce(k,2,3),x(k,u.init(),5);case 5:return x(k,ey(u,i.fb(),i.Ba()),6);case 6:return c=k.h,x(k,c.getManifests([i.key()]),7);case 7:if(d=k.h,h=d[0],E=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!E||!A){k.u(3);break}return x(k,c.updateManifestExpiration(i.key(),t),3);case 3:return Xe(k),x(k,u.destroy(),10);case 10:Ae(k,0);break;case 2:Ce(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},ke["application/x-offline-manifest"]=function(){return new WM};function $M(){}function XM(e){var t=A1(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=$u(e)):e=t&&t.g=="segment"?GZ(t.key(),t):mu(new gt(2,1,9004,e)),e}function GZ(e,t){var n=new zo;return $u(void 0).va(function(){return n.init()}).va(function(){return ey(n,t.fb(),t.Ba())}).va(function(i){return i.getSegments([t.key()])}).va(function(i){return{uri:t,data:i[0].data,headers:{}}}).finally(function(){return n.destroy()})}re("shaka.offline.OfflineScheme",$M),$M.plugin=XM,Ko("offline",XM);function QM(e,t,n){var i,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:i=[];for(var k=[],G=m(n),te=G.next();!te.done;te=G.next()){te=te.value;for(var Y=!1,ve=m(k),Pe=ve.next();!Pe.done;Pe=ve.next())if(Pe=Pe.value,HZ(Pe.info,te)){Pe.sessionIds.push(te.sessionId),Y=!0;break}Y||k.push({info:te,sessionIds:[te.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){A.u(4);break}return d=c.value,h=qZ(e,t,d),x(A,h,5);case 5:E=A.h,i=i.concat(E),c=u.next(),A.u(2);break;case 4:return A.return(i)}})}function qZ(e,t,n){var i,u;return Oe(function(c){switch(c.g){case 1:return i=new Uc({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),i.configure(e),x(c,Zm(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:he(c,3);break;case 2:return Ce(c),x(c,i.destroy(),5);case 5:return c.return([]);case 3:return u=[],x(c,Promise.all(n.sessionIds.map(function(d){return Oe(function(h){if(h.g==1)return ce(h,2),x(h,qE(i,d),4);if(h.g!=2)return u.push(d),he(h,0);Ce(h),$(h)})})),6);case 6:return x(c,i.destroy(),7);case 7:return c.return(u)}})}function HZ(e,t){function n(i,u){return i.robustness==u.robustness&&i.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function KZ(e,t,n){var i=t.presentationTimeline.getDuration();return t=JM(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function I1(e,t){var n=YM(new zM(e.fb(),e.Ba()),t),i=t.appMetadata||{};return n=JM(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function JM(e){var t=[],n=Gf(e.variants);n=m(n);for(var i=n.next();!i.done;i=n.next())t.push(Ml(i.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Dl(n.value));return t}function VZ(){this.g={}}function zZ(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var u=n.bandwidth||393216,c=i.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[i.id]=c}}function YZ(e,t){e.g[t.id]=t.bandwidth||2048}function e2(e,t){return e=e.g[t],e==null&&(e=0),e}function so(e){var t=this;if(e&&e.constructor!=hn)throw new gt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=ad(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new Xu(function(){var i,u,c,d,h;return Oe(function(E){switch(E.g){case 1:return x(E,Promise.all(t.j.map(function(A){return _1(A)})),2);case 2:for(i=function(){},u=[],c=m(t.i),d=c.next();!d.done;d=c.next())h=d.value,u.push(h.then(i,i));return x(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return x(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,$(E)}})})}function C1(){if(Co())e:{for(var e=m(Up.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=so.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Jm(e,t)),qc(this.h,e)},g.getConfiguration=function(){var e=ad();return qc(e,this.h,ad()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var i=this,u=this.getConfiguration(),c=new BM(this.g);return this.j.push(c),t=WZ(this,e,t||{},function(){var d;return Oe(function(h){return h.g==1?n?h.u(2):x(h,p_(e,i.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),d=Ie(e,n||null),h.return(d()))})},u,c),t=new pi(t,function(){return _1(c)}),t.finally(function(){mn(i.j,c)}),uG(this,t)};function WZ(e,t,n,i,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:return ry(),h=d=null,E=new zo,G=k=A=null,ce(Ue,2,3),x(Ue,i(),5);case 5:return d=Ue.h,x(Ue,iG(e,t,d,u),6);case 6:if(te=Ue.h,Eo(e),Y=!te.presentationTimeline.R()&&!te.presentationTimeline.dc(),!Y)throw new gt(2,9,9005,t);return x(Ue,e.rc(te,function(mt){G=G||mt},u),7);case 7:if(h=Ue.h,Eo(e),G)throw G;return x(Ue,XZ(te,h,u),8);case 8:return x(Ue,E.init(),9);case 9:return Eo(e),x(Ue,qM(E),10);case 10:return A=Ue.h,Eo(e),ve=QZ(h,te,t,n,u,c),Pe=ve.Sh,Ne=ve.Hf,x(Ue,A.Ba.addManifests([Pe]),11);case 11:if(Ge=Ue.h,Eo(e),k=Ge[0],Eo(e),G)throw G;return x(Ue,$Z(e,Ne,k,Pe,c,u,A.Ba,te,h),12);case 12:return Eo(e),i2(te,Pe,h,u),x(Ue,A.Ba.updateManifest(k,Pe),13);case 13:return Eo(e),Te=new Au("manifest",A.path.fb,A.path.Ba,k),Ue.return(I1(Te,Pe));case 3:return Xe(Ue),x(Ue,E.destroy(),14);case 14:if(!d){Ue.u(15);break}return x(Ue,d.stop(),15);case 15:if(!h){Ue.u(17);break}return x(Ue,h.destroy(),17);case 17:Ae(Ue,0);break;case 2:if($e=Ce(Ue),k==null){Ue.u(19);break}return x(Ue,t2(k),19);case 19:throw G||$e}})}function $Z(e,t,n,i,u,c,d,h,E){var A,k,G,te,Y,ve,Pe,Ne,Ge,Te;return Oe(function($e){switch($e.g){case 1:if(A={},k=0,G=function(Ue,mt){var xt,Ht,Ut,Et,jt,cn,gn;return Oe(function(Ln){if(Ln.g==1){for(xt={},Ht=m(Ue),Ut=Ht.next();!Ut.done;xt={Ob:xt.Ob},Ut=Ht.next())xt.Ob=Ut.value,Et=AZ(xt.Ob,c),jt=xt.Ob.i,cn=xt.Ob.h,gn=function(Mn){return function(qn){var Yn,Kn,Nr;return Oe(function(fi){if(fi.g==1)return x(fi,d.addSegments([{data:qn}]),2);Yn=fi.h,Eo(e),Kn=Mn.Ob.g,Nr=E1(Kn),A[Nr]=Yn[0],k+=qn.byteLength,$(fi)})}}(xt),CZ(u,xt.Ob.groupId,Et,jt,cn,gn);return x(Ln,bZ(u),2)}return mt?(Eo(e),i2(h,i,E,c),x(Ln,d.updateManifest(n,i),0)):Ln.u(0)})},te=!1,ce($e,2),!b1(h)||!te||r2(h)){$e.u(4);break}return x($e,G(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return Eo(e),t=t.filter(function(Ue){return!Ue.h}),Y=A,ve=k,A={},k=0,x($e,n2(d,n,i,Y,ve,function(){return Eo(e)}),6);case 6:Eo(e);case 4:if(te){$e.u(7);break}return x($e,G(t,!1),8);case 8:return Eo(e),Pe=A,Ne=k,A={},k=0,x($e,n2(d,n,i,Pe,Ne,function(){return Eo(e)}),9);case 9:Eo(e);case 7:he($e,0);break;case 2:return Ge=Ce($e),Te=Object.values(A),x($e,d.removeSegments(Te,function(){}),10);case 10:throw Ge}})}function t2(e){var t,n,i,u;return Oe(function(c){switch(c.g){case 1:return t=new zo,x(c,t.init(),2);case 2:return x(c,qM(t),3);case 3:return n=c.h,i=new Au("manifest",n.path.fb,n.path.Ba,e),x(c,t.destroy(),4);case 4:return u=new so,x(c,u.remove(i.toString()),0)}})}function n2(e,t,n,i,u,c){var d,h,E,A,k,G,te,Y,ve,Pe,Ne;return Oe(function(Ge){switch(Ge.g){case 1:for(d=!1,ce(Ge,2),h=!0,E=m(n.streams),A=E.next();!A.done;A=E.next())for(k=A.value,G=m(k.segments),te=G.next();!te.done;te=G.next())Y=te.value,ve=Y.pendingSegmentRefId?i[Y.pendingSegmentRefId]:null,ve!=null&&(Y.dataKey=ve,Y.pendingSegmentRefId=void 0),ve=Y.pendingInitSegmentRefId?i[Y.pendingInitSegmentRefId]:null,ve!=null&&(Y.initSegmentKey=ve,Y.pendingInitSegmentRefId=void 0),Y.pendingSegmentRefId&&(h=!1),Y.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),x(Ge,e.updateManifest(t,n),4);case 4:d=!0,c(),he(Ge,0);break;case 2:return Pe=Ce(Ge),x(Ge,t2(t),5);case 5:if(d){Ge.u(6);break}return Ne=Object.values(i),x(Ge,e.removeSegments(Ne,function(){}),6);case 6:throw Pe}})}function XZ(e,t,n){var i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e,Ue,mt,xt,Ht,Ut,Et,jt,cn,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:return i={width:1/0,height:1/0},kh(e,n.restrictions,i),x(qn,Em(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,d=n.preferredVideoCodecs,h=n.preferredAudioCodecs,vm(e,d,h,c),E=m(e.variants),A=E.next();!A.done;A=E.next())k=A.value,u.push(Ml(k));for(G=m(e.textStreams),te=G.next();!te.done;te=G.next())Y=te.value,u.push(Dl(Y));for(ve=m(e.imageStreams),Pe=ve.next();!Pe.done;Pe=ve.next())Ne=Pe.value,u.push(zu(Ne));return x(qn,n.offline.trackSelectionCallback(u),3);case 3:for(Ge=qn.h,Te=e.presentationTimeline.getDuration(),$e=0,Ue=m(Ge),mt=Ue.next();!mt.done;mt=Ue.next())xt=mt.value,Ht=xt.bandwidth*Te/8,$e+=Ht;return ce(qn,4),x(qn,n.offline.downloadSizeCallback($e),6);case 6:if(Ut=qn.h,!Ut)throw new gt(2,9,9014);he(qn,5);break;case 4:throw Et=Ce(qn),Et instanceof gt?Et:new gt(2,9,9015);case 5:for(jt=new Set,cn=new Set,gn=new Set,Ln=m(Ge),mt=Ln.next();!mt.done;mt=Ln.next())Mn=mt.value,Mn.type=="variant"&&jt.add(Mn.id),Mn.type=="text"&&cn.add(Mn.id),Mn.type=="image"&&gn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return jt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return cn.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return gn.has(Yn.id)}),fG(e),$(qn)}})}function QZ(e,t,n,i,u,c){var d=KZ(n,t,i),h=u.offline.progressCallback;IZ(c,function(Y,ve){d.size=ve,h(d,Y)},function(Y,ve){E&&u.offline.usePersistentLicense&&A==ve&&jl(e,"cenc",Y)});var E=b1(t)&&!r2(t),A=null;E&&(A=dG.get(e.g.keySystem));for(var k=new VZ,G=m(t.textStreams),te=G.next();!te.done;te=G.next())k.g[te.value.id]=52;for(G=m(t.imageStreams),te=G.next();!te.done;te=G.next())YZ(k,te.value);for(te=m(t.variants),G=te.next();!G.done;G=te.next())zZ(k,G.value);return k=oG(c,k,t,u),c=k.streams,k=k.Hf,te=e.g,G=u.offline.usePersistentLicense,te&&G&&(te.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?ip(e):[],drmInfo:te,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function b1(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function r2(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function i2(e,t,n,i){if(t.expiration=n.cd(),n=ip(n),t.sessionIds=i.offline.usePersistentLicense?n:[],b1(e)&&i.offline.usePersistentLicense&&!n.length)throw new gt(2,9,9007)}g.remove=function(e){return R1(this,JZ(this,e))};function JZ(e,t){var n,i,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(ry(),n=A1(t),n==null||n.g!="manifest")throw new gt(2,9,9004,t);return i=n,u=new zo,oe(E,2),x(E,u.init(),4);case 4:return x(E,ey(u,i.fb(),i.Ba()),5);case 5:return c=E.h,x(E,c.getManifests([i.key()]),6);case 6:return d=E.h,h=d[0],x(E,Promise.all([eG(e,h,u),tG(c,i,h)]),2);case 2:return Xe(E),x(E,u.destroy(),8);case 8:Ae(E,0)}})}function o2(e,t){for(var n=[],i=m(e.streams),u=i.next();!u.done;u=i.next())u=u.value,t&&u.type=="video"?n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function eG(e,t,n){return Oe(function(i){return x(i,cG(e.g,e.h.drm,n,t),0)})}function tG(e,t,n){function i(){}var u=lG(n);return I1(t,n),Promise.all([e.removeSegments(u,i),e.removeManifests([t.key()],i)])}g.ji=function(){return R1(this,nG(this))};function nG(e){var t,n,i,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:return ry(),t=e.g,n=e.h.drm,i=new zo,u=!1,oe(G,2),x(G,i.init(),4);case 4:c=[],MZ(i,function(te){return c.push(te)}),d=m(c),h=d.next();case 5:if(h.done){G.u(2);break}return E=h.value,x(G,E.getAll(),8);case 8:return A=G.h,x(G,QM(n,t,A),9);case 9:return k=G.h,x(G,E.remove(k),10);case 10:k.length!=A.length&&(u=!0),h=d.next(),G.u(5);break;case 2:return Xe(G),x(G,i.destroy(),11);case 11:Ae(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return R1(this,rG())};function rG(){var e,t,n;return Oe(function(i){switch(i.g){case 1:return ry(),e=[],t=new zo,oe(i,2),x(i,t.init(),4);case 4:return n=Promise.resolve(),NZ(t,function(u,c){n=n.then(function(){var d;return Oe(function(h){if(h.g==1)return x(h,c.getAllManifests(),2);d=h.h,d.forEach(function(E,A){E=I1(new Au("manifest",u.fb,u.Ba,A),E),e.push(E)}),$(h)})})}),x(i,n,2);case 2:return Xe(i),x(i,t.destroy(),6);case 6:Ae(i,3);break;case 3:return i.return(e)}})}function iG(e,t,n,i){var u,c,d,h,E;return Oe(function(A){if(A.g==1)return u=null,c=e.g,d={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate}},n.configure(i.manifest),Eo(e),x(A,n.start(t,d),2);if(A.g!=3)return h=A.h,Eo(e),E=a2(h),x(A,Promise.all(zf(E,function(k){return k.createSegmentIndex()})),3);if(Eo(e),u)throw u;return A.return(h)})}g.rc=function(e,t,n){var i=this,u;return Oe(function(c){return c.g==1?(u=new Uc({zb:i.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),x(c,Bm(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?x(c,rp(u),3):c.return(u)})};function oG(e,t,n,i){var u=new Map,c=a2(n),d=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=aG(e,t,n,h,i,u);d.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&d.get(t.audio.id).variantIds.push(t.id),t.video&&d.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(d.values()),Hf:Array.from(u.values())}}function aG(e,t,n,i,u,c){var d={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,external:i.external,fastSwitching:i.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return sG(i,n.presentationTimeline.qb(),function(A){var k=E1(A),G=void 0;if(!c.has(k)){var te=A.endTime-A.startTime;te=e2(t,i.id)*te,te=UM(e.g,te),c.set(k,new kM(A,te,E,!1))}A.ca&&(G=E1(A.ca),c.has(G)||(te=.5*e2(t,i.id),te=UM(e.g,te),c.set(G,new kM(A.ca,te,E,!0)))),d.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),E=(E+1)%h}),d}function sG(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}function Eo(e){if(e.l.g)throw new gt(2,9,7001)}function ry(){if(!C1())throw new gt(2,9,9e3)}function R1(e,t){return Oe(function(n){return n.g==1?(e.i.push(t),oe(n,2),x(n,t,4)):n.g!=2?n.return(n.h):(Xe(n),mn(e.i,t),Ae(n,0))})}function uG(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){mn(e.i,n)})}function lG(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function cG(e,t,n,i){var u,c,d;return Oe(function(h){return h.g==1?i.drmInfo?(u=DZ(n),c=i.sessionIds.map(function(E){return{sessionId:E,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:o2(i,!1),videoCapabilities:o2(i,!0)}}),x(h,QM(t,e,c),2)):h.return():h.g!=3?(d=h.h,x(h,u.remove(d),3)):x(h,u.add(c.filter(function(E){return!d.includes(E.sessionId)})),0)})}function a2(e){for(var t=new Set,n=m(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=m(e.imageStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function fG(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),i=n.next();!i.done;i=n.next()){i=m(t);for(var u=i.next();!u.done;u=i.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),i=n.next();!i.done;i=n.next());}re("shaka.offline.Storage",so),so.deleteAll=function(){var e;return Oe(function(t){return t.g==1?(e=new zo,oe(t,2),x(t,PZ(e),2)):t.g!=5?(Xe(t),x(t,e.destroy(),5)):Ae(t,0)})},so.prototype.list=so.prototype.list,so.prototype.removeEmeSessions=so.prototype.ji,so.prototype.remove=so.prototype.remove,so.prototype.store=so.prototype.store,so.prototype.getNetworkingEngine=so.prototype.Zb,so.prototype.getConfiguration=so.prototype.getConfiguration,so.prototype.configure=so.prototype.configure,so.prototype.destroy=so.prototype.destroy,so.support=C1;var dG=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");N_.offline=C1;function _o(){}function Yo(e,t){for(e={priority:t||0,callback:e},t=0;t<jp.length;t++)if(jp[t].priority<e.priority){jp.splice(t,0,e);return}jp.push(e)}re("shaka.polyfill",_o),_o.register=Yo,_o.installAll=function(){for(var e=m(jp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ke("Error installing polyfill!",n)}}};var jp=[];function Zp(){this.g=new iy}function s2(){p.AbortController||(p.AbortController=Zp,p.AbortSignal=iy)}Zp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(Zp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),_o.AbortController=Zp,Zp.install=s2;function iy(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}z(iy,Sr),y.Object.defineProperties(iy.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yo(s2);function u2(){}function l2(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())hG(t.value)}function hG(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}_o.Aria=u2,u2.install=l2,Yo(l2);function c2(){}function f2(){bD()}_o.EncryptionScheme=c2,c2.install=f2,Yo(f2,-2);function d2(){}function h2(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Md),document.addEventListener("webkitfullscreenerror",Md),document.addEventListener("mozfullscreenchange",Md),document.addEventListener("mozfullscreenerror",Md),document.addEventListener("MSFullscreenChange",Md),document.addEventListener("MSFullscreenError",Md)}}function Md(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}_o.Fullscreen=d2,d2.install=h2,Yo(h2);function Gp(){}function p2(){var e=!0;(ys()||Tc()||xr()||oa()||Ka()||aa()||Yr("PC=EOS")||Es())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),g2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=pG)}function pG(e){var t,n,i,u,c,d,h,E,A,k,G,te,Y,ve,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ue.return(t);if(n=e.video,i=e.audio,e.type=="media-source"){if(!Co())return Ue.return(t);if(n){if(aa())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var mt=n.contentType;if(n.width&&n.height&&(mt+="; width="+n.width+"; height="+n.height),n.framerate&&(mt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(mt+="; eotf=smpte2084"),mt in ay)var xt=ay[mt];else xt=cast.__platform__.canDisplayType(mt),ay[mt]=xt;u=xt}else u=Ot(n.contentType);else Ka()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Ot(c)):u=Ot(n.contentType);if(!u)return Ue.return(t)}if(i&&(aa()&&i.spatialRendering?(h=i.contentType+"; spatialRendering=true",d=Ot(h)):d=Ot(i.contentType),!d))return Ue.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,A=fu(E),!A)||i&&(k=i.contentType,G=fu(k),!G))return Ue.return(t)}else return Ue.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Ue.return(Promise.resolve(t));if(te=e.keySystemConfiguration,Y=[],ve=[],te.audio&&(Pe={robustness:te.audio.robustness||"",contentType:e.audio.contentType},Ka()&&e.audio.contentType.includes('codecs="ac-3"')&&(Pe={robustness:Pe.robustness,contentType:'audio/mp4; codecs="ec-3"'}),te.audio.encryptionScheme&&(Pe={robustness:Pe.robustness,contentType:Pe.contentType,encryptionScheme:te.audio.encryptionScheme}),Y.push(Pe)),te.video&&(Ne={robustness:te.video.robustness||"",contentType:e.video.contentType},te.video.encryptionScheme&&(Ne={robustness:Ne.robustness,contentType:Ne.contentType,encryptionScheme:te.video.encryptionScheme}),ve.push(Ne)),Ge={initDataTypes:[te.initDataType],distinctiveIdentifier:te.distinctiveIdentifier,persistentState:te.persistentState,sessionTypes:te.sessionTypes},Y.length&&(Ge.audioCapabilities=Y),ve.length&&(Ge.videoCapabilities=ve),Te=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,ce(Ue,3),Te in oy){$e=oy[Te],Ue.u(5);break}return x(Ue,navigator.requestMediaKeySystemAccess(te.keySystem,[Ge]),6);case 6:$e=Ue.h,oy[Te]=$e;case 5:he(Ue,4);break;case 3:Ce(Ue);case 4:$e&&(t.supported=!0,t.keySystemAccess=$e);case 2:return Ue.return(t)}})}_o.MediaCapabilities=Gp,Gp.install=p2;var g2=null;Gp.originalMcap=g2;var oy={};Gp.memoizedMediaKeySystemAccessRequests_=oy;var ay={};Gp.memoizedCanDisplayTypeRequests_=ay,Yo(p2,-1);function m2(){}function v2(){var e=_s();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(y2(),gG()):15>=e&&y2():(Fu()||ku()||Yr("Tizen 4"))&&vG()),(p.MediaSource||p.ManagedMediaSource)&&mG(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&yG()}function y2(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Qe.apply(0,arguments));return t.abort=function(){},t}}function gG(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function mG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Of(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Of(n)!="mp2t"&&t(n)}}}function vG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Wa(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Wa(n)!="opus"&&t(n)}}}function yG(){var e=MediaSource.isTypeSupported;oa()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(d){return d.startsWith("codecs=")});if(0>i)return e(t);var u=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(d){return d.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[i]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}_o.MediaSource=m2,m2.install=v2,Yo(v2);function E2(){}function _2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?EG():p.orientation!=null&&_G())}function EG(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function _G(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new sy;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}_o.Orientation=E2,E2.install=_2;function sy(){Sr.call(this),this.type="",this.angle=0}z(sy,Sr),sy.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):screen.msLockOrientation?screen.msLockOrientation(i):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},sy.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Yo(_2);function x1(){}var N1,M1,D1,P1,O1,L1;function TG(e,t){try{var n=new uy(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function SG(e){var t=this.mediaKeys;return t&&t!=e&&T2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?T2(e,this):Promise.resolve()}function wG(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Va(e.subarray(4),!0),e=Ya(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ti(e),this.dispatchEvent(t)}_o.PatchedMediaKeysApple=x1,x1.uninstall=function(){N1&&(N1=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",M1),HTMLMediaElement.prototype.setMediaKeys=D1,p.MediaKeys=P1,p.MediaKeySystemAccess=O1,navigator.requestMediaKeySystemAccess=L1,M1=L1=D1=O1=P1=null,p.shakaMediaKeysPolyfill=!1)},x1.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(N1=!0,M1=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),D1=HTMLMediaElement.prototype.setMediaKeys,P1=p.MediaKeys,O1=p.MediaKeySystemAccess,L1=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=SG,p.MediaKeys=qp,p.MediaKeySystemAccess=uy,navigator.requestMediaKeySystemAccess=TG,p.shakaMediaKeysPolyfill=!0)};function uy(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),d=c.next();!d.done;d=c.next())d=d.value,d.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,d.contentType.split(";")[0])&&(t.audioCapabilities.push(d),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),d=n.next();!d.done;d=n.next())c=d.value,c.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));i||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}uy.prototype.createMediaKeys=function(){var e=new qp(this.keySystem);return Promise.resolve(e)},uy.prototype.getConfiguration=function(){return this.g};function qp(e){this.h=new WebKitMediaKeys(e),this.g=new _t}qp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new k1(this.h)},qp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function T2(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",wG);try{return rd(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}qp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function k1(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new _t,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new S2}z(k1,Sr),g=k1.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var i=this.l.createSession("video/mp4",Qn(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Ti(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(ly(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ly(n,"output-not-allowed");break;default:ly(n,"internal-error")}}),ly(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function ly(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function S2(){this.size=0,this.g=void 0}g=S2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function w2(){}function A2(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=AG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=IG,p.MediaKeys=cy,p.MediaKeySystemAccess=F1,p.shakaMediaKeysPolyfill=!0)}function AG(){return Promise.reject(Error("The key system specified is not supported."))}function IG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}_o.PatchedMediaKeysNop=w2,w2.install=A2;function cy(){throw new TypeError("Illegal constructor.")}cy.prototype.createSession=function(){},cy.prototype.setServerCertificate=function(){},cy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function F1(){throw this.keySystem="",new TypeError("Illegal constructor.")}F1.prototype.getConfiguration=function(){},F1.prototype.createMediaKeys=function(){},Yo(A2,-10);function I2(){}function C2(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)G1="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=CG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=bG,p.MediaKeys=Hp,p.MediaKeySystemAccess=fy,p.shakaMediaKeysPolyfill=!0}}function U1(e){var t=G1;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function CG(e,t){try{var n=new fy(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function bG(e){var t=this.mediaKeys;return t&&t!=e&&b2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&b2(e,this),Promise.resolve()}_o.PatchedMediaKeysWebkit=I2,I2.install=C2;function fy(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var d={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(d.audioCapabilities.push(A),i=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(d.videoCapabilities.push(A),i=!0));if(h||(i=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(d.persistentState="required",d.sessionTypes=["persistent-license"]):i=!1),i){this.h=d;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}fy.prototype.createMediaKeys=function(){var e=new Hp(this.g);return Promise.resolve(e)},fy.prototype.getConfiguration=function(){return this.h};function Hp(e){this.l=e,this.h=null,this.g=new _t,this.i=[],this.j=new Map}function b2(e,t){e.h=t,e.g.ib();var n=G1;t&&(e.g.D(t,n+"needkey",function(i){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ti(i.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(i){var u=B1(e,i.sessionId);u&&(i=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new Wn("message",i),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=B1(e,i.sessionId))&&(dy(i,"usable"),i.g&&i.g.resolve(),i.g=null)}),e.g.D(t,n+"keyerror",function(i){var u=B1(e,i.sessionId);if(u){var c=Error("EME v0.1b key error"),d=i.errorCode;d.systemCode=i.systemCode,c.errorCode=d,!i.sessionId&&u.h?(i.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):i.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?dy(u,"output-restricted"):c==1?dy(u,"expired"):dy(u,"internal-error"))}}))}Hp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new j1(t,this.l,e),this.i.push(e),e},Hp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Hp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function B1(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function j1(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new x2}z(j1,Sr);function R2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=Qn(Ya("LOAD_SESSION|"+n));else{var u=Ya("PERSISTENT|");i=li(u,t)}else i=Qn(t)}catch(d){return Promise.reject(d)}e.h=new Rr;var c=U1("generateKeyRequest");try{e.j[c](e.i,i)}catch(d){if(d.name!="InvalidStateError")return e.h=null,Promise.reject(d);new pr(function(){try{e.j[c](e.i,i)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function Z1(e,t,n){if(e.g)e.g.then(function(){return Z1(e,t,n)}).catch(function(){return Z1(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=Vr(n),u=JSON.parse(i);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=Ho(u.keys[0].k),u=Ho(u.keys[0].kid)}else i=Qn(n),u=null;var c=U1("addKey");try{e.j[c](e.i,i,u,e.sessionId)}catch(d){e.g.reject(d),e.g=null}}}function dy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=j1.prototype,g.generateRequest=function(e,t){return R2(this,t,null)},g.load=function(e){return this.l=="persistent-license"?R2(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return Z1(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=U1("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function x2(){this.size=0,this.g=void 0}g=x2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var G1="";Yo(C2);function N2(){}function M2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=xG,Object.defineProperty(e,"disablePictureInPicture",{get:MG,set:DG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=NG,document.addEventListener("webkitpresentationmodechanged",RG,!0))}}function RG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function xG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function NG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function MG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function DG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}_o.PiPWebkit=N2,N2.install=M2,Yo(M2);function D2(){}function P2(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=PG))}function PG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}_o.RandomUUID=D2,D2.install=P2,Yo(P2);function O2(){}function L2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:OG})}function OG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}_o.Symbol=O2,O2.install=L2,Yo(L2);function k2(){}function F2(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}_o.VideoPlayPromise=k2,k2.install=F2,Yo(F2);function U2(){}function B2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||oa()&&du()===38)&&(e.getVideoPlaybackQuality=LG)}}function LG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}_o.VideoPlaybackQuality=U2,U2.install=B2,Yo(B2);function j2(){}function Z2(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=q1;else if(t==6)e=kG;else{try{var n=!!q1(1,2,"")}catch(i){n=!1}n&&(e=q1)}e&&(p.VTTCue=function(i,u,c){return e(i,u,c)})}}function q1(e,t,n){return new p.TextTrackCue(e,t,n)}function kG(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}_o.VTTCue=j2,j2.install=Z2,Yo(Z2);function Da(){}Da.prototype.parseInit=function(){},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e,t){var n=null,i=[];e=Vr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=FG.exec(u))){var c=UG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new bn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,i.push(n)),n=u}return n&&i.push(n),i},re("shaka.text.LrcTextParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit;var FG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,UG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new Da};function va(){}va.prototype.parseInit=function(){},va.prototype.setSequenceMode=function(){},va.prototype.setManifestType=function(){},va.prototype.parseMedia=function(e,t,n){var i=Vr(e);if(e=[],i=="")return e;var u=Bl(i,"tt");if(!u)throw new gt(2,2,2005,"Failed to parse TTML.");if(i=xa(u,"body")[0],!i)return[];var c=ca(u,Kp,"frameRate"),d=ca(u,Kp,"subFrameRate"),h=ca(u,Kp,"frameRateMultiplier"),E=ca(u,Kp,"tickRate"),A=ca(u,Kp,"cellResolution"),k=u.attributes["xml:space"]||"default",G=ca(u,gy,"extent");if(k!="default"&&k!="preserve")throw new gt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new ZG(c,d,h,E),A=A&&(A=/^(\d+) (\d+)$/.exec(A))?{Sb:parseInt(A[1],10),rows:parseInt(A[2],10)}:null,d=(d=xa(u,"metadata")[0])?d.children:[],h=xa(u,"style"),u=xa(u,"region"),E=[];for(var te=m(u),Y=te.next();!Y.done;Y=te.next()){var ve=Y.value;Y=new Br;var Pe=ve.attributes["xml:id"];if(Pe){Y.id=Pe;var Ne=null;G&&(Ne=z1.exec(G)||Y1.exec(G)),Pe=Ne?Number(Ne[1]):null,Ne=Ne?Number(Ne[2]):null;var Ge,Te=hy(ve,h,"extent");if(Te){var $e=(Ge=z1.exec(Te))||Y1.exec(Te);$e!=null&&(Y.width=Number($e[1]),Y.height=Number($e[2]),Ge||(Pe!=null&&(Y.width=100*Y.width/Pe),Ne!=null&&(Y.height=100*Y.height/Ne)),Y.widthUnits=Ge||Pe!=null?qr:0,Y.heightUnits=Ge||Ne!=null?qr:0)}(ve=hy(ve,h,"origin"))&&($e=(Ge=z1.exec(ve))||Y1.exec(ve),$e!=null&&(Y.viewportAnchorX=Number($e[1]),Y.viewportAnchorY=Number($e[2]),Ge?Te||(Y.width=100-Y.viewportAnchorX,Y.widthUnits=qr,Y.height=100-Y.viewportAnchorY,Y.heightUnits=qr):(Ne!=null&&(Y.viewportAnchorY=100*Y.viewportAnchorY/Ne),Pe!=null&&(Y.viewportAnchorX=100*Y.viewportAnchorX/Pe)),Y.viewportAnchorUnits=Ge||Pe!=null?qr:0))}else Y=null;Y&&E.push(Y)}if(Wr(i,"p").length)throw new gt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m(Wr(i,"div")),te=G.next();!te.done;te=G.next())if(Wr(te.value,"span").length)throw new gt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=G2(i,t,c,d,h,u,E,k,A,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function G2(e,t,n,i,u,c,d,h,E,A,k,G){var te=A;if($f(e)){if(!k)return null;var Y={tagName:"span",children:[Ri(e)],attributes:{},parent:null}}else Y=e;for(var ve=null,Pe=m(Q2),Ne=Pe.next();!Ne.done&&!(ve=py(Y,"backgroundImage",i,"#",Ne.value)[0]);Ne=Pe.next());Pe=null;var Ge=ca(Y,Q2,"backgroundImage");if(G&&Ge&&!Ge.startsWith("#")&&(Ne=new si(G),Ge=new si(Ge),(Ne=Ne.resolve(Ge).toString())&&(Pe=Ne)),(e.tagName=="p"||ve||Pe)&&(k=!0),e=k,Ne=(Y.attributes["xml:space"]||(h?"default":"preserve"))=="default",Ge=Y.children.every($f),h=[],!Ge)for(var Te=m(Y.children),$e=Te.next();!$e.done;$e=Te.next())($e=G2($e.value,t,n,i,u,c,d,Ne,E,Y,k,G))&&h.push($e);if(i=A!=null,G=Ri(Y),G=Y.children.length&&G&&/\S/.test(G),$e=Y.attributes.begin||Y.attributes.end||Y.attributes.dur,!($e||G||Y.tagName=="br"||h.length!=0||i&&!Ne))return null;for(Te=K2(Y,n),G=Te.start,Te=Te.end;te&&te.tagName&&te.tagName!="tt";)Te=jG(te,n,G,Te),G=Te.start,Te=Te.end,te=te.parent;if(G==null&&(G=0),G+=t.periodStart,Te=Te==null?1/0:Te+t.periodStart,G=Math.max(G,t.segmentStart),Te=Math.min(Te,t.segmentEnd),!$e&&0<h.length)for(G=1/0,Te=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Te=Math.max(Te,n.endTime);if(Y.tagName=="br")return u=new bn(G,Te,""),u.lineBreak=!0,u;if(t="",Ge&&(t=bo(Ri(Y)||""),Ne&&(t=t.replace(/\s+/g," "))),t=new bn(G,Te,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=py(Y,"region",c,"")[0],Y.attributes.region&&E&&E.attributes["xml:id"]){var Ue=E.attributes["xml:id"];t.region=d.filter(function(mt){return mt.id==Ue})[0]}return d=E,A&&i&&!Y.attributes.region&&!Y.attributes.style&&(d=py(A,"region",c,"")[0]),BG(t,Y,d,ve,Pe,u,e,h.length==0),t}function BG(e,t,n,i,u,c,d,h){if(d=d||h,To(t,n,c,"direction",d)=="rtl"&&(e.direction="rtl"),h=To(t,n,c,"writingMode",d),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Vn),(h=To(t,n,c,"textAlign",!0))?(e.positionAlign=HG[h],e.lineAlign=qG[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=To(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=To(t,n,c,"color",d))&&(e.color=h),(h=To(t,n,c,"backgroundColor",d))&&(e.backgroundColor=h),(h=To(t,n,c,"border",d))&&(e.border=h),h=To(t,n,c,"fontFamily",d))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=To(t,n,c,"fontWeight",d))&&h=="bold"&&(e.fontWeight=700),h=To(t,n,c,"wrapOption",d),e.wrapLine=!(h&&h=="noWrap"),(h=To(t,n,c,"lineHeight",d))&&h.match(Dd)&&(e.lineHeight=h),(h=To(t,n,c,"fontSize",d))&&(h.match(Dd)||h.match(GG))&&(e.fontSize=h),(h=To(t,n,c,"fontStyle",d))&&(e.fontStyle=ro[h.toUpperCase()]),i?(u=i.attributes.imageType||i.attributes.imagetype,h=i.attributes.encoding,i=Ri(i).trim(),u=="PNG"&&h=="Base64"&&i&&(e.backgroundImage="data:image/png;base64,"+i)):u&&(e.backgroundImage=u),(i=To(t,n,c,"textOutline",d))&&(i=i.split(" "),i[0].match(Dd)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(Dd)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=To(t,n,c,"letterSpacing",d))&&i.match(Dd)&&(e.letterSpacing=i),(i=To(t,n,c,"linePadding",d))&&i.match(Dd)&&(e.linePadding=i),(i=To(t,n,c,"opacity",d))&&(e.opacity=parseFloat(i)),(i=hy(n,c,"textDecoration"))&&q2(e,i),(i=H1(t,c,"textDecoration"))&&q2(e,i),(i=To(t,n,c,"textCombine",d))&&(e.textCombineUpright=i),To(t,n,c,"ruby",d)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function q2(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&mn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&mn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&mn(e.textDecoration,"overline")}}function To(e,t,n,i,u){return u=u===void 0?!0:u,(e=H1(e,n,i))?e:u?hy(t,n,i):null}function hy(e,t,n){if(!e)return null;var i=ca(e,gy,n);return i||H2(e,t,n)}function H1(e,t,n){var i=ca(e,gy,n);return i||H2(e,t,n)}function H2(e,t,n){e=py(e,"style",t,"");for(var i=null,u=0;u<e.length;u++){var c=_u(e[u],"urn:ebu:tt:style",n);c||(c=ca(e[u],gy,n)),c||(c=H1(e[u],t,n)),c&&(i=c)}return i}function py(e,t,n,i,u){var c=[];if(!e||1>n.length)return c;var d=e;for(e=null;!e&&!(e=u?_u(d,u,t):d.attributes[t])&&(d=d.parent,d););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),d=e.next();!d.done;d=e.next())if(d=d.value,i+d.attributes["xml:id"]==u){c.push(d);break}}return c}function jG(e,t,n,i){return e=K2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function K2(e,t){var n=K1(e.attributes.begin,t),i=K1(e.attributes.end,t);return e=K1(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function K1(e,t){var n=null;if(V2.test(e)){e=V2.exec(e),n=Number(e[1]);var i=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*i+3600*n}else if(z2.test(e))n=V1(z2,e);else if(Y2.test(e))n=V1(Y2,e);else if(W2.test(e))e=W2.exec(e),n=Number(e[1])/t.frameRate;else if($2.test(e))e=$2.exec(e),n=Number(e[1])/t.g;else if(X2.test(e))n=V1(X2,e);else if(e)throw new gt(2,2,2001,"Could not parse cue time range in TTML");return n}function V1(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}re("shaka.text.TtmlTextParser",va),va.prototype.parseMedia=va.prototype.parseMedia,va.prototype.setManifestType=va.prototype.setManifestType,va.prototype.setSequenceMode=va.prototype.setSequenceMode,va.prototype.parseInit=va.prototype.parseInit;function ZG(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var z1=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,GG=/^(\d{1,2}(?:\.\d+)?|100)%$/,Dd=/^(\d+px|\d+em|\d*\.?\d+c)$/,Y1=/^(\d+)px (\d+)px$/,V2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,z2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Y2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,W2=/^(\d*(?:\.\d*)?)f$/,$2=/^(\d*(?:\.\d*)?)t$/,X2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),qG={left:Cn,center:"center",right:"end",start:Cn,end:"end"},HG={left:"line-left",center:"center",right:"line-right"},Kp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],gy=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Q2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new va};function ko(){this.g=new va}ko.prototype.parseInit=function(e){var t=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",yu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new gt(2,2,2007)},ko.prototype.setSequenceMode=function(){},ko.prototype.setManifestType=function(){},ko.prototype.parseMedia=function(e,t,n){var i=this,u=!1,c=[];if(new kr().box("mdat",Qu(function(d){u=!0,c=c.concat(i.g.parseMedia(d,t,n))})).parse(e,!1),!u)throw new gt(2,2,2007);return c},re("shaka.text.Mp4TtmlParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new ko},ji['application/mp4; codecs="stpp.ttml"']=function(){return new ko},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new ko},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new ko};function Fo(){this.h=!1,this.g="UNKNOWN"}Fo.prototype.parseInit=function(){},Fo.prototype.setSequenceMode=function(e){this.h=e},Fo.prototype.setManifestType=function(e){this.g=e},Fo.prototype.parseMedia=function(e,t){e=Vr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new gt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new gt(2,2,2e3);if(e=my(new zc(e[1])),e==null)throw new gt(2,2,2e3);e=t.periodStart+Number(i[1])/9e4-e}else e=t.segmentStart;t=[],i=m(n[0].split("\n"));for(var u=i.next();!u.done;u=i.next())if(u=u.value,/^Region:/.test(u)){u=new zc(u);var c=new Br;Yc(u),Cd(u);for(var d=Yc(u);d;){var h=c,E=d;(d=/^id=(.*)$/.exec(E))?h.id=d[1]:(d=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(d[1]):(d=/^lines=(\d+)$/.exec(E))?(h.height=Number(d[1]),h.heightUnits=2):(d=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(d[1]),h.regionAnchorY=Number(d[2])):(d=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(d[1]),h.viewportAnchorY=Number(d[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),Cd(u),d=Yc(u)}t.push(c)}for(i=new Map,J2(i),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],d=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),d=h.length-1),d!=-1&&(h[d].push(c[E]),c[E].includes("}")&&(d=-1));for(h=m(h),d=h.next();!d.done;d=h.next()){var A=d.value;d="global",(E=A[0].match(/\((.*)\)/))&&(d=E.pop()),E=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(E=A[1].split(";")),(A=i.get(d))||(A=new bn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var te=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(te){var Y=te[2].trim().replace(";","");switch(te[1].trim()){case"background-color":case"background":k=!0,A.backgroundColor=Y;break;case"color":k=!0,A.color=Y;break;case"font-family":k=!0,A.fontFamily=Y;break;case"font-size":k=!0,A.fontSize=Y;break;case"font-weight":(700<=parseInt(Y,10)||Y=="bold")&&(k=!0,A.fontWeight=700);break;case"font-style":switch(Y){case"normal":k=!0,A.fontStyle=Yi;break;case"italic":k=!0,A.fontStyle="italic";break;case"oblique":k=!0,A.fontStyle="oblique"}break;case"opacity":k=!0,A.opacity=parseFloat(Y);break;case"text-combine-upright":k=!0,A.textCombineUpright=Y;break;case"text-shadow":k=!0,A.textShadow=Y;break;case"white-space":k=!0,A.wrapLine=Y!="noWrap"}}}k&&i.set(d,A)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),d=new zc(c[0]),E=my(d),G=Hl(d,/[ \t]+--\x3e[ \t]+/g),A=my(d),E==null||G==null||A==null)Ke("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,A+=k,c=c.slice(1).join("\n").trim(),i.has("global")?(k=i.get("global").clone(),k.startTime=E,k.endTime=A,k.payload=""):k=new bn(E,A,""),Cd(d),E=Yc(d);E;)nD(k,E,t),Cd(d),E=Yc(d);eD(c,k,i),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function J2(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var i=m(n.value);n=i.next().value,i=i.next().value;var u=new bn(0,0,"");u.color=i,e.set("."+n,u)}for(t=m(Object.entries(Cr)),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,u=new bn(0,0,""),u.backgroundColor=i,e.set("."+n,u)}function eD(e,t,n){if(e.includes("<")){n.size===0&&J2(n);var i=e;e=[];for(var u=-1,c=0;c<i.length;c++)i[c]==="<"?u=c+1:i[c]===">"&&0<u&&(u=i.substr(u,c-u),u.match(rD)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,i=i.replace("<"+c+">",'<div time="'+c+'">'),i+="</div>";e=i;e:{c=e,u=[];var d=-1;e="",i=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){i=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===E)e+="/"+E+">";else{if(!A.startsWith("v")){e+=c[h];continue}e+="/"+A+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(d=h+1,c[d]!="v"&&(d=-1)):c[h]===">"&&0<d&&(u.push(c.substr(d,h-d)),d=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,d=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+d+">"),e=e.replace("</"+u+">","</"+d+">"),i||(e+="</"+d+">")}e=KG(e);try{var k=Bl("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())tD(e.value,t,n);else t.payload=bo(e);else t.payload=bo(e)}else t.payload=bo(e)}function KG(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Vp(e,t){return e&&0<e.length?e:t}function tD(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new Br,i.position=null,i.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var d=c=c.value;if(d.startsWith(".voice-")){var h=d.split("-").pop();d='v[voice="'+h+'"]',n.has(d)||(d="v[voice="+h+"]")}switch(n.has(d)&&(d=n.get(d))&&(i.backgroundColor=Vp(d.backgroundColor,i.backgroundColor),i.color=Vp(d.color,i.color),i.fontFamily=Vp(d.fontFamily,i.fontFamily),i.fontSize=Vp(d.fontSize,i.fontSize),i.textShadow=Vp(d.textShadow,i.textShadow),i.fontWeight=d.fontWeight,i.fontStyle=d.fontStyle,i.opacity=d.opacity,i.rubyTag=d.rubyTag,i.textCombineUpright=d.textCombineUpright,i.wrapLine=d.wrapLine),c){case"br":i=Rn(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(i.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=my(new zc(c)))&&(i.startTime=c);break;case"ruby":case"rp":case"rt":i.rubyTag=c}}if(u=e.children,$f(e)||u.length==1&&$f(u[0]))for(n=Ri(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(i.startTime,i.endTime),t.nestedCues.push(e)),0<u.length&&(e=i.clone(),e.payload=bo(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=m(u),e=t.next();!e.done;e=t.next())tD(e.value,i,n)}function nD(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(i=/^region:(.*)$/.exec(t))?(t=VG(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=fn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function VG(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function my(e){if(e=Hl(e,rD),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.VttTextParser",Fo),Fo.prototype.parseMedia=Fo.prototype.parseMedia,Fo.prototype.setManifestType=Fo.prototype.setManifestType,Fo.prototype.setSequenceMode=Fo.prototype.setSequenceMode,Fo.prototype.parseInit=Fo.prototype.parseInit;var rD=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new Fo},ji['text/vtt; codecs="vtt"']=function(){return new Fo},ji['text/vtt; codecs="wvtt"']=function(){return new Fo};function Pa(){this.g=null}Pa.prototype.parseInit=function(e){var t=this,n=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(i){i=It(i.reader,i.version),t.g=i.timescale}).box("minf",yr).box("stbl",yr).O("stsd",yu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new gt(2,2,2008);if(!n)throw new gt(2,2,2008)},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new gt(2,2,2008);var n=0,i=[],u,c=[],d=!1,h=!1,E=!1,A=null;if(new kr().box("moof",yr).box("traf",yr).O("tfdt",function($e){d=!0,n=ir($e.reader,$e.version).baseMediaDecodeTime}).O("tfhd",function($e){A=rr($e.reader,$e.flags).Wf}).O("trun",function($e){h=!0,i=$t($e.reader,$e.version,$e.flags).vg}).box("mdat",Qu(function($e){E=!0,u=$e})).parse(e,!1),!E&&!d&&!h)throw new gt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(i),te=G.next();!te.done;te=G.next()){te=te.value;var Y=te.wf||A,ve=te.he?n+te.he:e;e=ve+(Y||0);var Pe=0;do{var Ne=k.M();Pe+=Ne;var Ge=k.M(),Te=null;Yf(Ge)=="vttc"?8<Ne&&(Te=k.sb(Ne-8)):k.skip(Ne-8),Y&&Te&&(Ne=zG(Te,t.periodStart+ve/this.g,t.periodStart+e/this.g),c.push(Ne))}while(te.sampleSize&&Pe<te.sampleSize)}return c.filter(Zu)};function zG(e,t,n){var i,u,c;return new kr().box("payl",Qu(function(d){i=Vr(d)})).box("iden",Qu(function(d){u=Vr(d)})).box("sttg",Qu(function(d){c=Vr(d)})).parse(e),i?YG(i,u,c,t,n):null}function YG(e,t,n,i,u){if(i=new bn(i,u,""),eD(e,i,new Map),t&&(i.id=t),n)for(e=new zc(n),t=Yc(e);t;)nD(i,t,[]),Cd(e),t=Yc(e);return i}re("shaka.text.Mp4VttParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new Pa};function Oa(){}Oa.prototype.parseInit=function(){},Oa.prototype.setSequenceMode=function(){},Oa.prototype.setManifestType=function(){},Oa.prototype.parseMedia=function(e){var t=Vr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var i=new zc(n[0]),u=iD(i),c=Hl(i,/,/g);if(i=iD(i),u==null||c==null||i==null)throw new gt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new bn(u,i,n.slice(1).join("\n").trim()))}return e};function iD(e){if(e=Hl(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.SbvTextParser",Oa),Oa.prototype.parseMedia=Oa.prototype.parseMedia,Oa.prototype.setManifestType=Oa.prototype.setManifestType,Oa.prototype.setSequenceMode=Oa.prototype.setSequenceMode,Oa.prototype.parseInit=Oa.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Oa};function ya(){this.g=new Fo}ya.prototype.parseInit=function(){},ya.prototype.setSequenceMode=function(){},ya.prototype.setManifestType=function(){},ya.prototype.parseMedia=function(e,t,n){return e=Vr(e),e=oD(e),e=Qn(Ya(e)),this.g.parseMedia(e,t,n)};function oD(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}re("shaka.text.SrtTextParser",ya),ya.srt2webvtt=oD,ya.prototype.parseMedia=ya.prototype.parseMedia,ya.prototype.setManifestType=ya.prototype.setManifestType,ya.prototype.setSequenceMode=ya.prototype.setSequenceMode,ya.prototype.parseInit=ya.prototype.parseInit,ji["text/srt"]=function(){return new ya};function La(){}La.prototype.parseInit=function(){},La.prototype.setSequenceMode=function(){},La.prototype.setManifestType=function(){},La.prototype.parseMedia=function(e){var t="",n="";e=Vr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var i=e.next();!i.done;i=e.next()){var u=$G.exec(i.value);u&&(i=u[1],u=u[2],i=="V4 Styles"||i=="V4+ Styles"?t=u:i=="Events"&&(n=u))}e=[],i=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=uD.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")i=c.split(vy);else if(u=="Style"){u=c.split(vy),c={};for(var d=0;d<i.length&&d<u.length;d++)c[i[d]]=u[d];e.push(c)}}for(i=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(d=uD.exec(c))){if(c=d[1].trim(),d=d[2].trim(),c=="Format")t=d.split(vy);else if(c=="Dialogue"){d=d.split(vy),c={};for(var h=0;h<t.length&&h<d.length;h++)c[t[h]]=d[h];h=sD(c.Start);var E=sD(c.End);d=new bn(h,E,d.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(A){return function(k){return k.Name==A.re}}(u)))&&WG(d,c),i.push(d)}}return i};function WG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=aD(n))&&(e.color=n),(n=t.BackColour)&&(n=aD(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function aD(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function sD(e){return e=XG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}re("shaka.text.SsaTextParser",La),La.prototype.parseMedia=La.prototype.parseMedia,La.prototype.setManifestType=La.prototype.setManifestType,La.prototype.setSequenceMode=La.prototype.setSequenceMode,La.prototype.parseInit=La.prototype.parseInit;var $G=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,uD=/^\s*([^:]+):\s*(.*)/,vy=/\s*,\s*/,XG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new La};function lD(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function cD(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:c,Ea:"mp4a.40."+u}}function fD(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function QG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function ka(e){this.i=e,this.h=0,this.g=new Map}g=ka.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Po(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){for(var u=Qn(e),c=xn(u),d=c.length;d<u.length&&!fD(u,d);d++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=cD(u,d),!n)return Promise.reject(new gt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];d<u.length;){var h=lD(u,d);if(!h)return Promise.reject(new gt(2,3,3018));var E=h.Qd+h.U;d+E<=u.length&&c.push({data:u.subarray(d+h.Qd,d+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),d+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),i={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new Rd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=xd(e),this.g.set(t.id,i)),t=kp(e),this.h++,t=li(i,t),Promise.resolve(t)},re("shaka.transmuxer.AacTransmuxer",ka),ka.prototype.transmux=ka.prototype.transmux,ka.prototype.getOriginalMimeType=ka.prototype.getOriginalMimeType,ka.prototype.convertCodecs=ka.prototype.convertCodecs,ka.prototype.isSupported=ka.prototype.isSupported,ka.prototype.destroy=ka.prototype.destroy,Ao("audio/aac",function(){return new ka("audio/aac")},bi);function dD(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+u>e.length)return null;var c=e[t+6]>>5,d=0;c===2?d+=2:(c&1&&c!==1&&(d+=2),c&4&&(d+=2)),d=(e[t+6]<<8|e[t+7])>>12-d&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|d<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+d,ga:e,U:u}}function JG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var u,c;0<i;){c=e[t];var d=Math.min(i,8),h=8-d;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<d|u:u,t+=1,i-=d}if(16>n)return!0}return!1}function is(e){this.i=e,this.h=0,this.g=new Map}g=is.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&!JG(e,c);c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=dD(e,c);if(!E)return Promise.reject(new gt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new Rd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=xd(e),this.g.set(t.id,i)),t=kp(e),this.h++,t=li(i,t),Promise.resolve(t)},re("shaka.transmuxer.Ac3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,Ao("audio/ac3",function(){return new is("audio/ac3")},bi);function hD(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Nn(e.subarray(t+2));Gn(n,2),Gn(n,3);var i=bt(n,11)+1<<1,u=bt(n,2);if(u==3){u=bt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=bt(n,2);var d=bt(n,3),h=bt(n,1);return n=bt(n,5),t+i>e.byteLength?null:(e=Math.floor(i*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|d<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][d]+h,ga:e,U:i})}function os(e){this.i=e,this.h=0,this.g=new Map}g=os.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=hD(e,c);if(!E)return Promise.reject(new gt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new Rd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=xd(e),this.g.set(t.id,i)),t=kp(e),this.h++,t=li(i,t),Promise.resolve(t)},re("shaka.transmuxer.Ec3Transmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,Ao("audio/ec3",function(){return new os("audio/ec3")},bi);function e9(e){if(!e.length)return null;var t=e.find(function(Pe){return Pe.type==7});if(e=e.find(function(Pe){return Pe.type==8}),!t||!e)return null;var n=new Nn(t.data),i=tt(n);if(tt(n),tt(n),En(n),n9.includes(i)&&(i=Lt(n),i===3&&Gn(n,1),En(n),En(n),Gn(n,1),st(n))){i=i!==3?8:12;for(var u=0;u<i;u++)st(n)&&(6>u?qt(n,16):qt(n,64))}if(En(n),i=Lt(n),i===0)Lt(n);else if(i===1)for(Gn(n,1),En(n),En(n),i=Lt(n),u=0;u<i;u++)En(n);En(n),Gn(n,1);var c=Lt(n),d=Lt(n),h=bt(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,A=0,k=0,G=0;if(st(n)&&(E=Lt(n),A=Lt(n),k=Lt(n),G=Lt(n)),u=i=1,st(n)&&st(n)){var te=tt(n),Y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ve=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<te&&16>=te?(i=Y[te-1],u=ve[te-1]):te===255&&(i=bt(n,16),u=bt(n,16))}return n=(2-h)*(d+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*A,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:i,ya:u}}function t9(e){var t=!1,n=[],i=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var d=!1;switch(c.type){case 1:d=u=!0;var h=c.data;i&&4<h.length&&(h=ze(new Nn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=d=u=!0;break;case 6:d=!0;break;case 7:d=!0;break;case 8:d=!0;break;case 9:u=d=!0;break;case 12:d=!0;break;default:d=!1}u&&d&&(d=c.fullData.byteLength,h=new Uint8Array(4),h[0]=d>>24&255,h[1]=d>>16&255,h[2]=d>>8&255,h[3]=d&255,n.push(h),n.push(c.fullData))}return n.length?{data:li.apply(Oi,T(n)),jd:t}:null}var n9=[100,110,122,244,44,83,86,118,128,138,139,134];function r9(e){if(!e.length)return null;var t=e.find(function(d){return d.type==32}),n=e.find(function(d){return d.type==33}),i=e.find(function(d){return d.type==34});if(!t||!n||!i)return null;var u=i9(t.fullData);e=o9(n.fullData);var c=a9(i.fullData);return t=s9(t.fullData,n.fullData,i.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function i9(e){var t=new Nn(e,!0);return tt(t),tt(t),bt(t,4),bt(t,2),bt(t,6),e=bt(t,3),t=st(t),{jf:e+1,Gf:t}}function o9(e){e=new Nn(e,!0),tt(e),tt(e);var t=0,n=0,i=0,u=0;bt(e,4);var c=bt(e,3);st(e);for(var d=bt(e,2),h=bt(e,1),E=bt(e,5),A=tt(e),k=tt(e),G=tt(e),te=tt(e),Y=tt(e),ve=tt(e),Pe=tt(e),Ne=tt(e),Ge=tt(e),Te=tt(e),$e=tt(e),Ue=[],mt=[],xt=0;xt<c;xt++)Ue.push(st(e)),mt.push(st(e));if(0<c)for(xt=c;8>xt;xt++)bt(e,2);for(xt=0;xt<c;xt++)Ue[xt]&&bt(e,88),mt[xt]&&tt(e);Lt(e),Ue=Lt(e),Ue==3&&bt(e,1),mt=Lt(e),xt=Lt(e),st(e)&&(t+=Lt(e),n+=Lt(e),i+=Lt(e),u+=Lt(e));var Ht=Lt(e),Ut=Lt(e),Et=Lt(e);if(st(e))for(var jt=0;jt<=c;jt++)Lt(e),Lt(e),Lt(e);else Lt(e),Lt(e),Lt(e);if(Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),st(e)&&st(e))for(jt=0;4>jt;jt++)for(var cn=0;cn<(jt===3?2:6);cn++)if(st(e)){var gn=Math.min(64,1<<4+(jt<<1));1<jt&&On(e);for(var Ln=0;Ln<gn;Ln++)On(e)}else Lt(e);for(st(e),st(e),st(e)&&(tt(e),Lt(e),Lt(e),st(e)),jt=Lt(e),gn=cn=0;gn<jt;gn++)if(Ln=!1,gn!==0&&(Ln=st(e)),Ln){gn===jt&&Lt(e),st(e),Lt(e);for(var Mn=Ln=0;Mn<=cn;Mn++){var qn=st(e),Yn=!1;qn||(Yn=st(e)),(qn||Yn)&&Ln++}cn=Ln}else{for(Mn=Lt(e),Ln=Lt(e),cn=Mn+Ln,qn=0;qn<Mn;qn++)Lt(e),st(e);for(Mn=0;Mn<Ln;Mn++)Lt(e),st(e)}if(st(e))for(jt=Lt(e),cn=0;cn<jt;cn++){for(gn=0;gn<Et+4;gn++)bt(e,1);bt(e,1)}if(jt=Et=1,cn=0,st(e),st(e),st(e)){if(st(e)&&(gn=tt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<gn&&16>=gn?(Et=Ln[gn-1],jt=Mn[gn-1]):gn===255&&(Et=bt(e,16),jt=bt(e,16))),st(e)&&st(e),st(e)&&(bt(e,3),st(e),st(e)&&(tt(e),tt(e),tt(e))),st(e)&&(Lt(e),Lt(e)),st(e),st(e),st(e),(gn=st(e))&&(Lt(e),Lt(e),Lt(e),Lt(e)),st(e)&&(bt(e,32),bt(e,32),st(e)&&Lt(e),st(e)))for(Mn=!1,gn=st(e),Ln=st(e),(gn||Ln)&&((Mn=st(e))&&(tt(e),bt(e,5),st(e),bt(e,5)),bt(e,4),bt(e,4),Mn&&bt(e,4),bt(e,5),bt(e,5),bt(e,5)),qn=0;qn<=c;qn++){var Kn=!0;Yn=1,st(e)||(Kn=st(e));var Nr=!1;if(Kn?Lt(e):Nr=st(e),Nr||(Yn=Lt(e)+1),gn){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));st(e)}if(Ln){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));st(e)}}st(e)&&(st(e),st(e),st(e),cn=Lt(e),Lt(e),Lt(e),Lt(e),Lt(e))}return{Ke:$e,Qe:d,Re:h,Pe:E,Le:A,Me:k,Ne:G,Oe:te,Ee:Y,Fe:ve,Ge:Pe,He:Ne,Ie:Ge,Je:Te,be:cn,Be:0,Ae:Ue,ze:Ht,ye:Ut,width:mt-(t+n)*(Ue===1||Ue===2?2:1),height:xt-(i+u)*(Ue===1?2:1),pi:Et,oi:jt}}function a9(e){var t=new Nn(e,!0);tt(t),tt(t),Lt(t),Lt(t),st(t),st(t),bt(t,3),st(t),st(t),Lt(t),Lt(t),On(t),st(t),st(t),st(t)&&Lt(t),On(t),On(t),st(t),st(t),st(t),st(t),e=st(t),t=st(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function s9(e,t,n,i){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(i.Qe&3)<<6|(i.Re?1:0)<<5|i.Pe&31,u[2]=i.Le,u[3]=i.Me,u[4]=i.Ne,u[5]=i.Oe,u[6]=i.Ee,u[7]=i.Fe,u[8]=i.Ge,u[9]=i.He,u[10]=i.Ie,u[11]=i.Je,u[12]=i.Ke,u[13]=240|(i.be&3840)>>8,u[14]=i.be&255,u[15]=252|i.pf&3,u[16]=252|i.Ae&3,u[17]=248|i.ze&7,u[18]=248|i.ye&7,u[19]=0,u[20]=0,u[21]=(i.Be&3)<<6|(i.jf&7)<<3|(i.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function yy(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var d=e[t+3]>>6;u=1e3*u9[14*(n===3?3-i:i===3?3:4)+u-1],c=l9[3*(n===3?0:n===2?1:2)+c],n=c9[n][i];var h=f9[i],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&i===2&&224e3<=u&&d===0&&(e[t+3]|=128),{sampleRate:c,channelCount:d===3?1:2,U:E,ni:8*n*h}}return null}function pD(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function gD(e,t){if(t+1<e.length&&pD(e,t)){var n=yy(e,t),i=4;return n&&n.U&&(i=n.U),t+=i,t===e.length||t+1<e.length&&pD(e,t)}return!1}var u9=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],l9=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],c9=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],f9=[0,1,1,4];function as(e){this.i=e,this.h=0,this.g=new Map}g=as.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,i){n=Qn(e);for(var u=xn(n).length;u<n.length&&!gD(n,u);u++);var c;for(e=[];u<n.length;){var d=yy(n,u);if(!d)return Promise.reject(new gt(2,3,3018));c||(c=d),u+d.U<=n.length&&e.push({data:n.subarray(u,u+d.U),size:d.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=d.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new Rd([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=xd(c),this.g.set(t.id,i)),t=kp(c),this.h++,t=li(i,t),Promise.resolve(t)):Promise.reject(new gt(2,3,3018))},re("shaka.transmuxer.Mp3Transmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy,Ao("audio/mpeg",function(){return new as("audio/mpeg")},bi);function ss(e){this.h=e,this.g=null}g=ss.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Po(e).split(","),n=Ro("audio",t);return t=Ro("video",t),!n||t||ba(n)!="mp3"?!1:Ot(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,i,u){if(this.g?this.g.clearData():this.g=new Ve,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new gt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(i=yy(t,n))?(n+i.U<=t.length&&(u=li(u,t.subarray(n,n+i.U))),n+=i.U):n++;return Promise.resolve(u)},re("shaka.transmuxer.MpegTsTransmuxer",ss),ss.prototype.transmux=ss.prototype.transmux,ss.prototype.getOriginalMimeType=ss.prototype.getOriginalMimeType,ss.prototype.convertCodecs=ss.prototype.convertCodecs,ss.prototype.isSupported=ss.prototype.isSupported,ss.prototype.destroy=ss.prototype.destroy,Ao("video/mp2t",function(){return new ss("video/mp2t")},Il);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Fa(e){this.h=e,(this.g=r1.get("ISOBoxer")())&&d9(this)}function d9(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==h9[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=Fa.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new gt(2,3,3020));try{var i,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var d=u.fetch("tfdt"),h=u.fetch("traf");d===null&&(d=this.g.createFullBox("tfdt",h,c),d.version=1,d.flags=0,d.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var te=u.fetch("saio");if(te===null){te=this.g.createFullBox("saio",h),te.version=0,te.flags=0,te.entry_count=1,te.offset=[0];var Y=this.g.createFullBox("saiz",h);if(Y.version=0,Y.flags=0,Y.sample_count=G.sample_count,Y.default_sample_info_size=0,Y.sample_info_size=[],G.flags&2)for(i=0;i<G.sample_count;i+=1)Y.sample_info_size[i]=10+6*G.entry[i].NumberOfEntries;else Y.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ve=u.fetch("moof");E.data_offset=ve.getLength()+8;var Pe=u.fetch("saio");Pe!==null&&(Pe.offset[0]=mD(ve,"traf")+mD(h,"senc")+16);var Ne=Qn(u.write());return Promise.resolve(Ne)}catch(Ge){return Ge instanceof gt?Promise.reject(Ge):Promise.reject(new gt(2,3,3022))}};function mD(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}re("shaka.transmuxer.MssTransmuxer",Fa),Fa.prototype.transmux=Fa.prototype.transmux,Fa.prototype.getOriginalMimeType=Fa.prototype.getOriginalMimeType,Fa.prototype.convertCodecs=Fa.prototype.convertCodecs,Fa.prototype.isSupported=Fa.prototype.isSupported,Fa.prototype.destroy=Fa.prototype.destroy;var h9=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ao("mss/audio/mp4",function(){return new Fa("mss/audio/mp4")},bi),Ao("mss/video/mp4",function(){return new Fa("mss/video/mp4")},bi);function us(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=us.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Po(n).split(",");return n=Ro("audio",i),i=Ro("video",i),n&&(n=ba(n),!p9.includes(n))||i&&(n=ba(i),!g9.includes(n))?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Po(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,i,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var d=xn(c),h=d.length;h<c.length;h++)if(gD(c,h))return Promise.reject(new gt(2,3,3018));for(h=d.length;h<c.length;h++)if(fD(c,h))return this.h||(this.h=new ka("audio/aac")),this.h.transmux(e,t,n,i,u);return Promise.reject(new gt(2,3,3018))}this.j?this.j.clearData():this.j=new Ve;var E=this.j.parse(c),A=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var te=[],Y=null,ve=[],Pe=E.xc();if(!Pe.length)throw new gt(2,3,3023);for(var Ne=0;Ne<Pe.length;Ne++){var Ge=Pe[Ne],Te=Ge.nalus;ve.push.apply(ve,T(Te));var $e=t9(Te);if($e){Y==null&&(Y=Ge.dts);var Ue=void 0;Ue=Ne+1<Pe.length?(Pe[Ne+1].dts||0)-(Ge.dts||0):1<Pe.length?(Ge.dts||0)-(Pe[Ne-1].dts||0):9e4*(n.endTime-n.startTime),te.push({data:$e.data,size:$e.data.byteLength,duration:Ue,Ta:Math.round((Ge.pts||0)-(Ge.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:$e.jd?2:1,Wa:$e.jd?0:1}})}}var mt=e9(ve);if(!mt||Y==null)throw new gt(2,3,3018);t.height=mt.height,t.width=mt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Sa:[],ga:new Uint8Array([]),oa:mt.oa,xa:mt.xa,ya:mt.ya,data:{jb:this.g,baseMediaDecodeTime:Y,Ra:te},stream:t};break;case"hvc":var xt=[],Ht=null,Ut=[],Et=E.xc();if(!Et.length)throw new gt(2,3,3023);for(var jt=0;jt<Et.length;jt++){var cn=Et[jt],gn=cn.nalus;Ut.push.apply(Ut,T(gn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(gn),Kn=Yn.next();!Kn.done;Kn=Yn.next()){var Nr=Kn.value;switch(Nr.type){case 1:case 0:var fi=qn=!0;break;case 19:case 20:case 21:Ln=fi=qn=!0;break;case 32:fi=!0;break;case 33:fi=!0;break;case 34:fi=!0;break;case 35:qn=fi=!0;break;case 39:case 40:fi=!0;break;default:fi=!1}if(qn&&fi){var ki=Nr.fullData.byteLength,ci=new Uint8Array(4);ci[0]=ki>>24&255,ci[1]=ki>>16&255,ci[2]=ki>>8&255,ci[3]=ki&255,Mn.push(ci),Mn.push(Nr.fullData)}}var gi=Mn.length?{data:li.apply(Oi,T(Mn)),jd:Ln}:null;if(gi){Ht==null&&cn.dts!=null&&(Ht=cn.dts);var Gr=void 0;Gr=jt+1<Et.length?(Et[jt+1].dts||0)-(cn.dts||0):1<Et.length?(cn.dts||0)-(Et[jt-1].dts||0):9e4*(n.endTime-n.startTime),xt.push({data:gi.data,size:gi.data.byteLength,duration:Gr,Ta:Math.round((cn.pts||0)-(cn.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:gi.jd?2:1,Wa:gi.jd?0:1}})}}var po=r9(Ut);if(!po||Ht==null)throw new gt(2,3,3018);t.height=po.height,t.width=po.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Sa:[],ga:new Uint8Array([]),oa:po.oa,xa:po.xa,ya:po.ya,data:{jb:this.g,baseMediaDecodeTime:Ht,Ra:xt},stream:t}}G&&(A.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Uo=[],ai,$s=null,Xc=m(E.Fb()),Qc=Xc.next();!Qc.done;Qc=Xc.next()){var Pd=Qc.value,fl=Pd.data;if(fl){var Xs=0;if(ai=cD(fl,Xs),!ai)throw new gt(2,3,3018);for(t.audioSamplingRate=ai.sampleRate,t.channelsCount=ai.channelCount,$s==null&&Pd.pts!==null&&($s=Pd.pts);Xs<fl.length;){var dl=lD(fl,Xs);if(dl){var zl=dl.Qd+dl.U;Xs+zl<=fl.length&&Uo.push({data:fl.subarray(Xs+dl.Qd,Xs+zl),size:dl.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Xs+=zl}else Xs++}}}if(!ai||$s==null){if(!E.xc().length)throw new gt(2,3,3018);$s=9e4*n.startTime;var Od=Ro("audio",t.codecs.split(","));if(!Od||!t.channelsCount||!t.audioSamplingRate)throw new gt(2,3,3018);ai={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:Od};var Ld=QG(Od,t.channelsCount);if(!Ld)throw new gt(2,3,3018);for(var _y=$s+9e4*(n.endTime-n.startTime),kd=$s;kd<_y;)Uo.push({data:Ld,size:Ld.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),kd+=1024/ai.sampleRate*9e4}var Wp=ai.sampleRate,Ty=$s/9e4*Wp;G={id:t.id,type:"audio",codecs:ai.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Wp,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:Ty,Ra:Uo},stream:t};break;case"ac3":for(var As=[],Sy=0,$1=new Uint8Array([]),wy=null,RD=m(E.Fb()),X1=RD.next();!X1.done;X1=RD.next()){var Q1=X1.value,J1=Q1.data;wy==null&&Q1.pts!==null&&(wy=Q1.pts);for(var Fd=0;Fd<J1.length;){var Yl=dD(J1,Fd);Yl?(t.audioSamplingRate=Yl.sampleRate,t.channelsCount=Yl.channelCount,Sy=Yl.sampleRate,$1=Yl.ga,As.push({data:J1.subarray(Fd,Fd+Yl.U),size:Yl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Fd+=Yl.U):Fd++}}if(Sy==0||$1.byteLength==0||wy==null)throw new gt(2,3,3018);var y9=wy/9e4*Sy;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Sy,duration:i,Sa:[],ga:$1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:y9,Ra:As},stream:t};break;case"ec3":for(var xD=[],Ay=0,eT=new Uint8Array([]),Iy=null,ND=m(E.Fb()),tT=ND.next();!tT.done;tT=ND.next()){var nT=tT.value,rT=nT.data;Iy==null&&nT.pts!==null&&(Iy=nT.pts);for(var Ud=0;Ud<rT.length;){var Wl=hD(rT,Ud);Wl?(t.audioSamplingRate=Wl.sampleRate,t.channelsCount=Wl.channelCount,Ay=Wl.sampleRate,eT=Wl.ga,xD.push({data:rT.subarray(Ud,Ud+Wl.U),size:Wl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ud+=Wl.U):Ud++}}if(Ay==0||eT.byteLength==0||Iy==null)throw new gt(2,3,3018);var E9=Iy/9e4*Ay;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ay,duration:i,Sa:[],ga:eT,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:E9,Ra:xD},stream:t};break;case"mp3":for(var MD=[],Cy,by=null,DD=m(E.Fb()),iT=DD.next();!iT.done;iT=DD.next()){var oT=iT.value,$p=oT.data;if($p){by==null&&oT.pts!==null&&(by=oT.pts);for(var Jc=0;Jc<$p.length;){var Bd=yy($p,Jc);Bd?(Cy||(Cy=Bd),Jc+Bd.U<=$p.length&&MD.push({data:$p.subarray(Jc,Jc+Bd.U),size:Bd.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Jc+=Bd.U):Jc++}}}if(!Cy||by==null)throw new gt(2,3,3018);var PD=Cy.sampleRate,_9=by/9e4*PD;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:PD,duration:i,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:_9,Ra:MD},stream:t};break;case"opus":var OD=[],Ry=null,Iu=E.F;if(!Iu)throw new gt(2,3,3018);var Bo=[];switch(Iu.Zg){case 1:case 2:Bo=[0];break;case 0:Bo=[255,1,1,0,1];break;case 128:Bo=[255,2,0,0,1];break;case 3:Bo=[1,2,1,0,2,1];break;case 4:Bo=[1,2,2,0,1,2,3];break;case 5:Bo=[1,3,2,0,4,1,2,3];break;case 6:Bo=[1,4,2,0,4,1,2,3,5];break;case 7:Bo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Bo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Bo=[1,1,2,0,1];break;case 131:Bo=[1,1,3,0,1,2];break;case 132:Bo=[1,1,4,0,1,2,3];break;case 133:Bo=[1,1,5,0,1,2,3,4];break;case 134:Bo=[1,1,6,0,1,2,3,4,5];break;case 135:Bo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Bo=[1,1,8,0,1,2,3,4,5,6,7]}for(var LD=new Uint8Array([0,Iu.channelCount,0,0,Iu.sampleRate>>>24&255,Iu.sampleRate>>>17&255,Iu.sampleRate>>>8&255,Iu.sampleRate>>>0&255,0,0].concat(T(Bo))),kD=Iu.sampleRate,FD=m(E.Fb()),aT=FD.next();!aT.done;aT=FD.next()){var sT=aT.value,jd=sT.data;Ry==null&&sT.pts!==null&&(Ry=sT.pts);for(var Xp=0;Xp<jd.length;){for(var T9=(jd[Xp+1]&16)!==0,S9=(jd[Xp+1]&8)!==0,hl=Xp+2,xy=0;jd[hl]===255;)xy+=255,hl+=1;xy+=jd[hl],hl+=1,hl+=T9?2:0,hl+=S9?2:0;var UD=jd.slice(hl,hl+xy);OD.push({data:UD,size:UD.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Xp=hl+xy}}if(LD.byteLength==0||Ry==null)throw new gt(2,3,3018);t.audioSamplingRate=Iu.sampleRate,t.channelsCount=Iu.channelCount;var w9=Ry/9e4*kD;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:kD,duration:i,Sa:[],ga:LD,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:w9,Ra:OD},stream:t}}G&&(A.push(G),G=null)}}catch(lT){return lT&&lT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(lT)}if(!A.length)return Promise.reject(new gt(2,3,3018));var BD=new Rd(A);if(this.i.has(t.id))var uT=this.i.get(t.id);else uT=xd(BD),this.i.set(t.id,uT);var A9=kp(BD);this.g++;var I9=li(uT,A9);return Promise.resolve(I9)},re("shaka.transmuxer.TsTransmuxer",us),us.prototype.transmux=us.prototype.transmux,us.prototype.getOriginalMimeType=us.prototype.getOriginalMimeType,us.prototype.convertCodecs=us.prototype.convertCodecs,us.prototype.isSupported=us.prototype.isSupported,us.prototype.destroy=us.prototype.destroy;var p9=["aac","ac-3","ec-3","mp3","opus"],g9=["avc","hevc"];Ao("video/mp2t",function(){return new us("video/mp2t")},cu);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function vD(){}var zp;function yD(){zp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(zp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=m9):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function m9(e,t){var n=this,i;return Oe(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),x(u,zp.call(n,e,t),2)):(i=u.h,CD(i)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=zp,u.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=ED,u.return(ED.call(n,e,t))))})}function ED(e,t){var n=this,i,u,c,d,h,E,A,k,G,te;return Oe(function(Y){if(Y.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=ID(e),u=[],c=m(t),d=c.next();!d.done;d=c.next())h=d.value,E=_D(h.videoCapabilities,i),A=_D(h.audioCapabilities,i),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=A,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return x(Y,zp.call(n,e,u),2)}return te=Y.h,Y.return(new Ey(te,i))})}function _D(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}re("EmeEncryptionSchemePolyfill",vD),vD.install=yD;function TD(){}var Yp;function SD(){Yp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Yp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=v9):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function v9(e){var t=this,n,i,u;return Oe(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),x(c,Yp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((i=n.keySystemAccess)&&CD(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Yp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=wD,i){c.u(3);break}return u=n,x(c,AD(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(wD.call(t,e))}})}function wD(e){var t=this,n,i,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,u=i.keySystem,c=i.audio&&i.audio.encryptionScheme,d=i.video&&i.video.encryptionScheme,n=ID(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||d&&d!=n)?k.return(h):x(k,Yp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new Ey(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return A=E,x(k,AD(e),5);case 5:A.keySystemAccess=k.h;case 3:return k.return(E)}})}function AD(e){var t,n;return Oe(function(i){if(i.g==1){var u=e.keySystemConfiguration,c=[],d=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&d.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),d.length&&(u.videoCapabilities=d),t=u,x(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}re("McEncryptionSchemePolyfill",TD),TD.install=SD;function Ey(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}Ey.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Ey.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function ID(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function CD(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function W1(){}function bD(){yD(),SD()}re("EncryptionSchemePolyfills",W1),W1.install=bD,typeof C<"u"&&C.exports&&(C.exports=W1)}).call(l,o,o,void 0);for(var f in l.shaka)r[f]=l.shaka[f]})()})($U);const Wy=wC($U),af=class af{static async setup_stream(o,l,f){if(this.licenseUrl=l,this.customDrmHeaders=f,!o.mediaKeys)try{const p=await this.get_media_keys(o);if(p){await o.setMediaKeys(p.mediaKey);const S=p.mediaKey.createSession();this.on_handle_license_messageEvent=async C=>{await this.handle_license_messageEvent(p.mediaKey,S,C)},this.on_handle_encrypted_event=async C=>{await this.handle_encrypted_event(p,S,C)},S.addEventListener("message",this.on_handle_license_messageEvent),o.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(o){for(let l=0;l<o;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(o){const l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);this.mediaKey_pool.length>0&&l&&(await o.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(o){const l=this.mediaKey_pool.find(f=>f.mediaKey===o);return l?l.id:null}static async get_media_keys(o){let l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(f=>f.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(f=>!f.htmlMediaElement),l)return l.htmlMediaElement=o,l;throw new Error("No media keys available")}static async handle_license_messageEvent(o,l,f){try{const p=f.message.byteLength;console.log(p,"byteLength");let S;p===2?S=p.toString():S="".concat(this.get_mediaKey_id(o),"-").concat(p);let C;this.license_cache.has(S)?(console.log("using cached licence"),C=this.license_cache.get(S)):(C=await(await fetch(this.licenseUrl,{method:"POST",body:f.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),C?this.license_cache.set(S,C):console.error("License response is null")),C?await l.update(C):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(o,l,f){if(f.initDataType&&f.initData)try{if(!o.isInitialized){o.isInitialized=!0;const p=this.mediaKey_pool.findIndex(S=>S.id===o.id);p!==-1&&(this.mediaKey_pool[p]=o),await l.generateRequest(f.initDataType,f.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};af.licenseUrl="",af.customDrmHeaders={},af.license_cache=new Map,af.mediaKey_pool=[],af.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let cC=af;class Zz extends WU{constructor(o){var l;super(o),this.name="ShakaEngine",this.addPolicyToRequests=(f,p)=>{switch(f){case Wy.net.NetworkingEngine.RequestType.MANIFEST:case Wy.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case Wy.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([S,C])=>{p.headers[S]=C});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new Wy.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(o){var l;if(this.player&&o){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await cC.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(f){console.log(f)}await this.player.attach(this.options.element),await this.player.load(o,void 0)}}}class Gz extends Cf{constructor(o){super(),this.options=o,this.options.preferredTech==="shaka"?this.engine=new Zz(o):this.engine=new jz(o),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(o,l){this.emit(o,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(o,l){this.currentSource=o,await this.engine.load(o,l)}}class qz extends Cf{constructor(o){var l;super(),this.options=o,this._eventsEmitted=!1,this.eventClock=o.eventClock,this.containerElement=o.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new Gz({autoPlay:!1,...o.playerOptions,element:this.videoElement})}get currentSource(){var o;return(o=this.player)==null?void 0:o.currentSource}get currentCamera(){return this._currentCamera}get stats(){var o;return(o=this.player)==null?void 0:o.engine.getStats()}logPlayerStuff(){console.log("Bitrate",this.player.engine.video.getVideoPlaybackQuality()),console.log("Time",this.player.engine.video.currentTime),console.log("Paused",this.player.engine.video.paused)}propagateEvent(o,l){this.emit(o,l)}async load(o,l,f){return this.eventClock.loading=!0,new Promise((p,S)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),this.player.load(l,f).then(()=>{this.player.once("playing",()=>{this._currentCamera=o,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0))}),this.eventClock.loading=!1;const C=((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0),g=this.eventClock.getExpectedPositionInSeconds()-C;Math.sign(g)<0?setTimeout(()=>{this.videoElement.play(),p()},Math.abs(g)*1e3):(this.videoElement.currentTime=g,this.videoElement.play(),p())})}catch(C){console.error(C),S(C)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.player.destroy()}}var sg=function(r){return r&&r.Math===Math&&r},qa=sg(typeof globalThis=="object"&&globalThis)||sg(typeof window=="object"&&window)||sg(typeof self=="object"&&self)||sg(typeof iu=="object"&&iu)||sg(typeof iu=="object"&&iu)||function(){return this}()||Function("return this")(),jb={},ms=function(r){try{return!!r()}catch(o){return!0}},Hz=ms,yc=!Hz(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Kz=ms,Zb=!Kz(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),Vz=Zb,$y=Function.prototype.call,Al=Vz?$y.bind($y):function(){return $y.apply($y,arguments)},XU={},QU={}.propertyIsEnumerable,JU=Object.getOwnPropertyDescriptor,zz=JU&&!QU.call({1:2},1);XU.f=zz?function(o){var l=JU(this,o);return!!l&&l.enumerable}:QU;var eB=function(r,o){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:o}},tB=Zb,nB=Function.prototype,fC=nB.call,Yz=tB&&nB.bind.bind(fC,fC),Ia=tB?Yz:function(r){return function(){return fC.apply(r,arguments)}},rB=Ia,Wz=rB({}.toString),$z=rB("".slice),vE=function(r){return $z(Wz(r),8,-1)},Xz=Ia,Qz=ms,Jz=vE,FA=Object,eY=Xz("".split),tY=Qz(function(){return!FA("z").propertyIsEnumerable(0)})?function(r){return Jz(r)==="String"?eY(r,""):FA(r)}:FA,yE=function(r){return r==null},nY=yE,rY=TypeError,sm=function(r){if(nY(r))throw new rY("Can't call method on "+r);return r},iY=tY,oY=sm,EE=function(r){return iY(oY(r))},UA=typeof document=="object"&&document.all,Ha=typeof UA>"u"&&UA!==void 0?function(r){return typeof r=="function"||r===UA}:function(r){return typeof r=="function"},aY=Ha,bh=function(r){return typeof r=="object"?r!==null:aY(r)},BA=qa,sY=Ha,uY=function(r){return sY(r)?r:void 0},Gb=function(r,o){return arguments.length<2?uY(BA[r]):BA[r]&&BA[r][o]},lY=Ia,iB=lY({}.isPrototypeOf),cY=typeof navigator<"u"&&String(navigator.userAgent)||"",oB=qa,jA=cY,c3=oB.process,f3=oB.Deno,d3=c3&&c3.versions||f3&&f3.version,h3=d3&&d3.v8,ru,Z0;h3&&(ru=h3.split("."),Z0=ru[0]>0&&ru[0]<4?1:+(ru[0]+ru[1]));!Z0&&jA&&(ru=jA.match(/Edge\/(\d+)/),(!ru||ru[1]>=74)&&(ru=jA.match(/Chrome\/(\d+)/),ru&&(Z0=+ru[1])));var fY=Z0,p3=fY,dY=ms,hY=qa,pY=hY.String,aB=!!Object.getOwnPropertySymbols&&!dY(function(){var r=Symbol("symbol detection");return!pY(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&p3&&p3<41}),gY=aB,sB=gY&&!Symbol.sham&&typeof Symbol.iterator=="symbol",mY=Gb,vY=Ha,yY=iB,EY=sB,_Y=Object,uB=EY?function(r){return typeof r=="symbol"}:function(r){var o=mY("Symbol");return vY(o)&&yY(o.prototype,_Y(r))},TY=String,SY=function(r){try{return TY(r)}catch(o){return"Object"}},wY=Ha,AY=SY,IY=TypeError,CY=function(r){if(wY(r))return r;throw new IY(AY(r)+" is not a function")},bY=CY,RY=yE,qb=function(r,o){var l=r[o];return RY(l)?void 0:bY(l)},ZA=Al,GA=Ha,qA=bh,xY=TypeError,NY=function(r,o){var l,f;if(o==="string"&&GA(l=r.toString)&&!qA(f=ZA(l,r))||GA(l=r.valueOf)&&!qA(f=ZA(l,r))||o!=="string"&&GA(l=r.toString)&&!qA(f=ZA(l,r)))return f;throw new xY("Can't convert object to primitive value")},lB={exports:{}},g3=qa,MY=Object.defineProperty,Hb=function(r,o){try{MY(g3,r,{value:o,configurable:!0,writable:!0})}catch(l){g3[r]=o}return o},DY=qa,PY=Hb,m3="__core-js_shared__",v3=lB.exports=DY[m3]||PY(m3,{});(v3.versions||(v3.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Kb=lB.exports,y3=Kb,Vb=function(r,o){return y3[r]||(y3[r]=o||{})},OY=sm,LY=Object,cB=function(r){return LY(OY(r))},kY=Ia,FY=cB,UY=kY({}.hasOwnProperty),Ec=Object.hasOwn||function(o,l){return UY(FY(o),l)},BY=Ia,jY=0,ZY=Math.random(),GY=BY(1 .toString),fB=function(r){return"Symbol("+(r===void 0?"":r)+")_"+GY(++jY+ZY,36)},qY=qa,HY=Vb,E3=Ec,KY=fB,VY=aB,zY=sB,ih=qY.Symbol,HA=HY("wks"),YY=zY?ih.for||ih:ih&&ih.withoutSetter||KY,xf=function(r){return E3(HA,r)||(HA[r]=VY&&E3(ih,r)?ih[r]:YY("Symbol."+r)),HA[r]},WY=Al,_3=bh,T3=uB,$Y=qb,XY=NY,QY=xf,JY=TypeError,eW=QY("toPrimitive"),tW=function(r,o){if(!_3(r)||T3(r))return r;var l=$Y(r,eW),f;if(l){if(o===void 0&&(o="default"),f=WY(l,r,o),!_3(f)||T3(f))return f;throw new JY("Can't convert object to primitive value")}return o===void 0&&(o="number"),XY(r,o)},nW=tW,rW=uB,dB=function(r){var o=nW(r,"string");return rW(o)?o:o+""},iW=qa,S3=bh,dC=iW.document,oW=S3(dC)&&S3(dC.createElement),hB=function(r){return oW?dC.createElement(r):{}},aW=yc,sW=ms,uW=hB,pB=!aW&&!sW(function(){return Object.defineProperty(uW("div"),"a",{get:function(){return 7}}).a!==7}),lW=yc,cW=Al,fW=XU,dW=eB,hW=EE,pW=dB,gW=Ec,mW=pB,w3=Object.getOwnPropertyDescriptor;jb.f=lW?w3:function(o,l){if(o=hW(o),l=pW(l),mW)try{return w3(o,l)}catch(f){}if(gW(o,l))return dW(!cW(fW.f,o,l),o[l])};var um={},vW=yc,yW=ms,gB=vW&&yW(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),EW=bh,_W=String,TW=TypeError,Nf=function(r){if(EW(r))return r;throw new TW(_W(r)+" is not an object")},SW=yc,wW=pB,AW=gB,Xy=Nf,A3=dB,IW=TypeError,KA=Object.defineProperty,CW=Object.getOwnPropertyDescriptor,VA="enumerable",zA="configurable",YA="writable";um.f=SW?AW?function(o,l,f){if(Xy(o),l=A3(l),Xy(f),typeof o=="function"&&l==="prototype"&&"value"in f&&YA in f&&!f[YA]){var p=CW(o,l);p&&p[YA]&&(o[l]=f.value,f={configurable:zA in f?f[zA]:p[zA],enumerable:VA in f?f[VA]:p[VA],writable:!1})}return KA(o,l,f)}:KA:function(o,l,f){if(Xy(o),l=A3(l),Xy(f),wW)try{return KA(o,l,f)}catch(p){}if("get"in f||"set"in f)throw new IW("Accessors not supported");return"value"in f&&(o[l]=f.value),o};var bW=yc,RW=um,xW=eB,zb=bW?function(r,o,l){return RW.f(r,o,xW(1,l))}:function(r,o,l){return r[o]=l,r},mB={exports:{}},hC=yc,NW=Ec,vB=Function.prototype,MW=hC&&Object.getOwnPropertyDescriptor,Yb=NW(vB,"name"),DW=Yb&&(function(){}).name==="something",PW=Yb&&(!hC||hC&&MW(vB,"name").configurable),OW={EXISTS:Yb,PROPER:DW,CONFIGURABLE:PW},LW=Ia,kW=Ha,pC=Kb,FW=LW(Function.toString);kW(pC.inspectSource)||(pC.inspectSource=function(r){return FW(r)});var UW=pC.inspectSource,BW=qa,jW=Ha,I3=BW.WeakMap,ZW=jW(I3)&&/native code/.test(String(I3)),GW=Vb,qW=fB,C3=GW("keys"),yB=function(r){return C3[r]||(C3[r]=qW(r))},Wb={},HW=ZW,EB=qa,KW=bh,VW=zb,WA=Ec,$A=Kb,zW=yB,YW=Wb,b3="Object already initialized",gC=EB.TypeError,WW=EB.WeakMap,G0,Yg,q0,$W=function(r){return q0(r)?Yg(r):G0(r,{})},XW=function(r){return function(o){var l;if(!KW(o)||(l=Yg(o)).type!==r)throw new gC("Incompatible receiver, "+r+" required");return l}};if(HW||$A.state){var xu=$A.state||($A.state=new WW);xu.get=xu.get,xu.has=xu.has,xu.set=xu.set,G0=function(r,o){if(xu.has(r))throw new gC(b3);return o.facade=r,xu.set(r,o),o},Yg=function(r){return xu.get(r)||{}},q0=function(r){return xu.has(r)}}else{var Gd=zW("state");YW[Gd]=!0,G0=function(r,o){if(WA(r,Gd))throw new gC(b3);return o.facade=r,VW(r,Gd,o),o},Yg=function(r){return WA(r,Gd)?r[Gd]:{}},q0=function(r){return WA(r,Gd)}}var _B={set:G0,get:Yg,has:q0,enforce:$W,getterFor:XW},$b=Ia,QW=ms,JW=Ha,Qy=Ec,mC=yc,e$=OW.CONFIGURABLE,t$=UW,TB=_B,n$=TB.enforce,r$=TB.get,R3=String,h0=Object.defineProperty,i$=$b("".slice),o$=$b("".replace),a$=$b([].join),s$=mC&&!QW(function(){return h0(function(){},"length",{value:8}).length!==8}),u$=String(String).split("String"),l$=mB.exports=function(r,o,l){i$(R3(o),0,7)==="Symbol("&&(o="["+o$(R3(o),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(o="get "+o),l&&l.setter&&(o="set "+o),(!Qy(r,"name")||e$&&r.name!==o)&&(mC?h0(r,"name",{value:o,configurable:!0}):r.name=o),s$&&l&&Qy(l,"arity")&&r.length!==l.arity&&h0(r,"length",{value:l.arity});try{l&&Qy(l,"constructor")&&l.constructor?mC&&h0(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch(p){}var f=n$(r);return Qy(f,"source")||(f.source=a$(u$,typeof o=="string"?o:"")),r};Function.prototype.toString=l$(function(){return JW(this)&&r$(this).source||t$(this)},"toString");var c$=mB.exports,f$=Ha,d$=um,h$=c$,p$=Hb,SB=function(r,o,l,f){f||(f={});var p=f.enumerable,S=f.name!==void 0?f.name:o;if(f$(l)&&h$(l,S,f),f.global)p?r[o]=l:p$(o,l);else{try{f.unsafe?r[o]&&(p=!0):delete r[o]}catch(C){}p?r[o]=l:d$.f(r,o,{value:l,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return r},wB={},g$=Math.ceil,m$=Math.floor,v$=Math.trunc||function(o){var l=+o;return(l>0?m$:g$)(l)},y$=v$,_E=function(r){var o=+r;return o!==o||o===0?0:y$(o)},E$=_E,_$=Math.max,T$=Math.min,S$=function(r,o){var l=E$(r);return l<0?_$(l+o,0):T$(l,o)},w$=_E,A$=Math.min,AB=function(r){var o=w$(r);return o>0?A$(o,9007199254740991):0},I$=AB,C$=function(r){return I$(r.length)},b$=EE,R$=S$,x$=C$,x3=function(r){return function(o,l,f){var p=b$(o),S=x$(p);if(S===0)return!r&&-1;var C=R$(f,S),g;if(r&&l!==l){for(;S>C;)if(g=p[C++],g!==g)return!0}else for(;S>C;C++)if((r||C in p)&&p[C]===l)return r||C||0;return!r&&-1}},N$={includes:x3(!0),indexOf:x3(!1)},M$=Ia,XA=Ec,D$=EE,P$=N$.indexOf,O$=Wb,N3=M$([].push),IB=function(r,o){var l=D$(r),f=0,p=[],S;for(S in l)!XA(O$,S)&&XA(l,S)&&N3(p,S);for(;o.length>f;)XA(l,S=o[f++])&&(~P$(p,S)||N3(p,S));return p},Xb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],L$=IB,k$=Xb,F$=k$.concat("length","prototype");wB.f=Object.getOwnPropertyNames||function(o){return L$(o,F$)};var CB={};CB.f=Object.getOwnPropertySymbols;var U$=Gb,B$=Ia,j$=wB,Z$=CB,G$=Nf,q$=B$([].concat),H$=U$("Reflect","ownKeys")||function(o){var l=j$.f(G$(o)),f=Z$.f;return f?q$(l,f(o)):l},M3=Ec,K$=H$,V$=jb,z$=um,Y$=function(r,o,l){for(var f=K$(o),p=z$.f,S=V$.f,C=0;C<f.length;C++){var g=f[C];!M3(r,g)&&!(l&&M3(l,g))&&p(r,g,S(o,g))}},W$=ms,$$=Ha,X$=/#|\.prototype\./,lm=function(r,o){var l=J$[Q$(r)];return l===tX?!0:l===eX?!1:$$(o)?W$(o):!!o},Q$=lm.normalize=function(r){return String(r).replace(X$,".").toLowerCase()},J$=lm.data={},eX=lm.NATIVE="N",tX=lm.POLYFILL="P",nX=lm,Jy=qa,rX=jb.f,iX=zb,oX=SB,aX=Hb,sX=Y$,uX=nX,bB=function(r,o){var l=r.target,f=r.global,p=r.stat,S,C,g,w,F,b;if(f?C=Jy:p?C=Jy[l]||aX(l,{}):C=Jy[l]&&Jy[l].prototype,C)for(g in o){if(F=o[g],r.dontCallGetSet?(b=rX(C,g),w=b&&b.value):w=C[g],S=uX(f?g:l+(p?".":"#")+g,r.forced),!S&&w!==void 0){if(typeof F==typeof w)continue;sX(F,w)}(r.sham||w&&w.sham)&&iX(F,"sham",!0),oX(C,g,F,r)}},lX=bh,cX=vE,fX=xf,dX=fX("match"),hX=function(r){var o;return lX(r)&&((o=r[dX])!==void 0?!!o:cX(r)==="RegExp")},pX=xf,gX=pX("toStringTag"),RB={};RB[gX]="z";var mX=String(RB)==="[object z]",vX=mX,yX=Ha,p0=vE,EX=xf,_X=EX("toStringTag"),TX=Object,SX=p0(function(){return arguments}())==="Arguments",wX=function(r,o){try{return r[o]}catch(l){}},AX=vX?p0:function(r){var o,l,f;return r===void 0?"Undefined":r===null?"Null":typeof(l=wX(o=TX(r),_X))=="string"?l:SX?p0(o):(f=p0(o))==="Object"&&yX(o.callee)?"Arguments":f},IX=AX,CX=String,TE=function(r){if(IX(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return CX(r)},bX=Nf,xB=function(){var r=bX(this),o="";return r.hasIndices&&(o+="d"),r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.unicodeSets&&(o+="v"),r.sticky&&(o+="y"),o},RX=Al,xX=Ec,NX=iB,MX=xB,D3=RegExp.prototype,DX=function(r){var o=r.flags;return o===void 0&&!("flags"in D3)&&!xX(r,"flags")&&NX(D3,r)?RX(MX,r):o},Qb=Ia,PX=cB,OX=Math.floor,QA=Qb("".charAt),LX=Qb("".replace),JA=Qb("".slice),kX=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,FX=/\$([$&'`]|\d{1,2})/g,NB=function(r,o,l,f,p,S){var C=l+r.length,g=f.length,w=FX;return p!==void 0&&(p=PX(p),w=kX),LX(S,w,function(F,b){var y;switch(QA(b,0)){case"$":return"$";case"&":return r;case"`":return JA(o,0,l);case"'":return JA(o,C);case"<":y=p[JA(b,1,-1)];break;default:var v=+b;if(v===0)return F;if(v>g){var D=OX(v/10);return D===0?F:D<=g?f[D-1]===void 0?QA(b,1):f[D-1]+QA(b,1):F}y=f[v-1]}return y===void 0?"":y})},UX=bB,BX=Al,Jb=Ia,P3=sm,jX=Ha,ZX=yE,GX=hX,ug=TE,qX=qb,HX=DX,KX=NB,VX=xf,zX=VX("replace"),YX=TypeError,eI=Jb("".indexOf);Jb("".replace);var O3=Jb("".slice),WX=Math.max;UX({target:"String",proto:!0},{replaceAll:function(o,l){var f=P3(this),p,S,C,g,w,F,b,y,v,D=0,m=0,T="";if(!ZX(o)){if(p=GX(o),p&&(S=ug(P3(HX(o))),!~eI(S,"g")))throw new YX("`.replaceAll` does not allow non-global regexes");if(C=qX(o,zX),C)return BX(C,o,f,l)}for(g=ug(f),w=ug(o),F=jX(l),F||(l=ug(l)),b=w.length,y=WX(1,b),D=eI(g,w);D!==-1;)v=F?ug(l(w,D,g)):KX(w,g,D,[],void 0,l),T+=O3(g,m,D)+v,m=D+b,D=D+y>g.length?-1:eI(g,w,D+y);return m<g.length&&(T+=O3(g,m)),T}});var eR=ms,$X=qa,tR=$X.RegExp,nR=eR(function(){var r=tR("a","y");return r.lastIndex=2,r.exec("abcd")!==null}),XX=nR||eR(function(){return!tR("a","y").sticky}),QX=nR||eR(function(){var r=tR("^r","gy");return r.lastIndex=2,r.exec("str")!==null}),JX={BROKEN_CARET:QX,MISSED_STICKY:XX,UNSUPPORTED_Y:nR},MB={},eQ=IB,tQ=Xb,nQ=Object.keys||function(o){return eQ(o,tQ)},rQ=yc,iQ=gB,oQ=um,aQ=Nf,sQ=EE,uQ=nQ;MB.f=rQ&&!iQ?Object.defineProperties:function(o,l){aQ(o);for(var f=sQ(l),p=uQ(l),S=p.length,C=0,g;S>C;)oQ.f(o,g=p[C++],f[g]);return o};var lQ=Gb,cQ=lQ("document","documentElement"),fQ=Nf,dQ=MB,L3=Xb,hQ=Wb,pQ=cQ,gQ=hB,mQ=yB,k3=">",F3="<",vC="prototype",yC="script",DB=mQ("IE_PROTO"),tI=function(){},PB=function(r){return F3+yC+k3+r+F3+"/"+yC+k3},U3=function(r){r.write(PB("")),r.close();var o=r.parentWindow.Object;return r=null,o},vQ=function(){var r=gQ("iframe"),o="java"+yC+":",l;return r.style.display="none",pQ.appendChild(r),r.src=String(o),l=r.contentWindow.document,l.open(),l.write(PB("document.F=Object")),l.close(),l.F},e0,g0=function(){try{e0=new ActiveXObject("htmlfile")}catch(o){}g0=typeof document<"u"?document.domain&&e0?U3(e0):vQ():U3(e0);for(var r=L3.length;r--;)delete g0[vC][L3[r]];return g0()};hQ[DB]=!0;var yQ=Object.create||function(o,l){var f;return o!==null?(tI[vC]=fQ(o),f=new tI,tI[vC]=null,f[DB]=o):f=g0(),l===void 0?f:dQ.f(f,l)},EQ=ms,_Q=qa,TQ=_Q.RegExp,SQ=EQ(function(){var r=TQ(".","s");return!(r.dotAll&&r.test("\n")&&r.flags==="s")}),wQ=ms,AQ=qa,IQ=AQ.RegExp,CQ=wQ(function(){var r=IQ("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),oh=Al,SE=Ia,bQ=TE,RQ=xB,xQ=JX,NQ=Vb,MQ=yQ,DQ=_B.get,PQ=SQ,OQ=CQ,LQ=NQ("native-string-replace",String.prototype.replace),H0=RegExp.prototype.exec,EC=H0,kQ=SE("".charAt),FQ=SE("".indexOf),UQ=SE("".replace),nI=SE("".slice),_C=function(){var r=/a/,o=/b*/g;return oh(H0,r,"a"),oh(H0,o,"a"),r.lastIndex!==0||o.lastIndex!==0}(),OB=xQ.BROKEN_CARET,TC=/()??/.exec("")[1]!==void 0,BQ=_C||TC||OB||PQ||OQ;BQ&&(EC=function(o){var l=this,f=DQ(l),p=bQ(o),S=f.raw,C,g,w,F,b,y,v;if(S)return S.lastIndex=l.lastIndex,C=oh(EC,S,p),l.lastIndex=S.lastIndex,C;var D=f.groups,m=OB&&l.sticky,T=oh(RQ,l),U=l.source,N=0,_=p;if(m&&(T=UQ(T,"y",""),FQ(T,"g")===-1&&(T+="g"),_=nI(p,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&kQ(p,l.lastIndex-1)!=="\n")&&(U="(?: "+U+")",_=" "+_,N++),g=new RegExp("^(?:"+U+")",T)),TC&&(g=new RegExp("^"+U+"$(?!\\s)",T)),_C&&(w=l.lastIndex),F=oh(H0,m?g:l,_),m?F?(F.input=nI(F.input,N),F[0]=nI(F[0],N),F.index=l.lastIndex,l.lastIndex+=F[0].length):l.lastIndex=0:_C&&F&&(l.lastIndex=l.global?F.index+F[0].length:w),TC&&F&&F.length>1&&oh(LQ,F[0],g,function(){for(b=1;b<arguments.length-2;b++)arguments[b]===void 0&&(F[b]=void 0)}),F&&D)for(F.groups=y=MQ(null),b=0;b<D.length;b++)v=D[b],y[v[0]]=F[v[1]];return F});var rR=EC,jQ=bB,B3=rR;jQ({target:"RegExp",proto:!0,forced:/./.exec!==B3},{exec:B3});var ZQ=Zb,LB=Function.prototype,j3=LB.apply,Z3=LB.call,GQ=typeof Reflect=="object"&&Reflect.apply||(ZQ?Z3.bind(j3):function(){return Z3.apply(j3,arguments)}),G3=Al,q3=SB,qQ=rR,H3=ms,kB=xf,HQ=zb,KQ=kB("species"),rI=RegExp.prototype,VQ=function(r,o,l,f){var p=kB(r),S=!H3(function(){var F={};return F[p]=function(){return 7},""[r](F)!==7}),C=S&&!H3(function(){var F=!1,b=/a/;return r==="split"&&(b={},b.constructor={},b.constructor[KQ]=function(){return b},b.flags="",b[p]=/./[p]),b.exec=function(){return F=!0,null},b[p](""),!F});if(!S||!C||l){var g=/./[p],w=o(p,""[r],function(F,b,y,v,D){var m=b.exec;return m===qQ||m===rI.exec?S&&!D?{done:!0,value:G3(g,b,y,v)}:{done:!0,value:G3(F,y,b,v)}:{done:!1}});q3(String.prototype,r,w[0]),q3(rI,p,w[1])}f&&HQ(rI[p],"sham",!0)},iR=Ia,zQ=_E,YQ=TE,WQ=sm,$Q=iR("".charAt),K3=iR("".charCodeAt),XQ=iR("".slice),V3=function(r){return function(o,l){var f=YQ(WQ(o)),p=zQ(l),S=f.length,C,g;return p<0||p>=S?r?"":void 0:(C=K3(f,p),C<55296||C>56319||p+1===S||(g=K3(f,p+1))<56320||g>57343?r?$Q(f,p):C:r?XQ(f,p,p+2):(C-55296<<10)+(g-56320)+65536)}},QQ={codeAt:V3(!1),charAt:V3(!0)},JQ=QQ.charAt,eJ=function(r,o,l){return o+(l?JQ(r,o).length:1)},z3=Al,tJ=Nf,nJ=Ha,rJ=vE,iJ=rR,oJ=TypeError,aJ=function(r,o){var l=r.exec;if(nJ(l)){var f=z3(l,r,o);return f!==null&&tJ(f),f}if(rJ(r)==="RegExp")return z3(iJ,r,o);throw new oJ("RegExp#exec called on incompatible receiver")},sJ=GQ,Y3=Al,wE=Ia,uJ=VQ,lJ=ms,cJ=Nf,fJ=Ha,dJ=yE,hJ=_E,pJ=AB,qd=TE,gJ=sm,mJ=eJ,vJ=qb,yJ=NB,EJ=aJ,_J=xf,SC=_J("replace"),TJ=Math.max,SJ=Math.min,wJ=wE([].concat),iI=wE([].push),W3=wE("".indexOf),$3=wE("".slice),AJ=function(r){return r===void 0?r:String(r)},IJ=function(){return"a".replace(/./,"$0")==="$0"}(),X3=function(){return/./[SC]?/./[SC]("a","$0")==="":!1}(),CJ=!lJ(function(){var r=/./;return r.exec=function(){var o=[];return o.groups={a:"7"},o},"".replace(r,"$<a>")!=="7"});uJ("replace",function(r,o,l){var f=X3?"$":"$0";return[function(S,C){var g=gJ(this),w=dJ(S)?void 0:vJ(S,SC);return w?Y3(w,S,g,C):Y3(o,qd(g),S,C)},function(p,S){var C=cJ(this),g=qd(p);if(typeof S=="string"&&W3(S,f)===-1&&W3(S,"$<")===-1){var w=l(o,C,g,S);if(w.done)return w.value}var F=fJ(S);F||(S=qd(S));var b=C.global,y;b&&(y=C.unicode,C.lastIndex=0);for(var v=[],D;D=EJ(C,g),!(D===null||(iI(v,D),!b));){var m=qd(D[0]);m===""&&(C.lastIndex=mJ(g,pJ(C.lastIndex),y))}for(var T="",U=0,N=0;N<v.length;N++){D=v[N];for(var _=qd(D[0]),I=TJ(SJ(hJ(D.index),g.length),0),R=[],Z,z=1;z<D.length;z++)iI(R,AJ(D[z]));var W=D.groups;if(F){var X=wJ([_],R,I,g);W!==void 0&&iI(X,W),Z=qd(sJ(S,void 0,X))}else Z=yJ(_,g,I,R,W,S);I>=U&&(T+=$3(g,U,I)+Z,U=I+_.length)}return T+$3(g,U)}]},!CJ||!IJ||X3);var bJ=qa,RJ=Ia,xJ=function(r,o){return RJ(bJ[r].prototype[o])},NJ=xJ;NJ("String","replaceAll");function oR(){const r=Ps(),o=Rf(),[l]=zU();return ln.useCallback(async(f,p)=>{var g;if(!l||!r)return;const S=(g=o==null?void 0:o.distributionUrl)!=null?g:"";let C=l.cameraURLTemplate;if(C=C.replace("{{baseURL}}",S),C=C.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),C=C.replaceAll("{{assetName}}",p.camera.assetName||""),C!==f.currentSource&&o)return await f.load(p,C,{startTimeSeconds:r.getExpectedPositionInSeconds()-mi(p.camera.span.time,o.frameRate),eventOffset:mi(p.camera.span.time,o.frameRate),reelOffset:mi(p.camera.reelOffset,o.frameRate)})},[r,l,o])}function MJ(){const r=oR();return ln.useCallback(async(o,l)=>await r(o,l).then(),[r])}function DJ(){const r=Ps(),o=bf(),l=Ub();ln.useEffect(()=>{if(!r||!o||!l)return;const f=({command:p,reference:S,start:C})=>{r.pausePlayStream(p,S,C)};return o.on("pausePlayStream",f),()=>{o.off("pausePlayStream",f)}},[r,o,l])}function PJ(r){const o=Ps(),l=Rf(),f=bf(),p=MJ(),S=oR();ln.useEffect(()=>{if(!f||!l||!o||!r)return;let C,g=[void 0,-1];const w=()=>{const T=o.getExpectedPositionInSeconds()<=0?0:o.getExpectedPositionInSeconds();return gE(l,T)[0]},F=T=>{g[0]=S(r,T),g[1]=T.index},b=T=>{if(g[0]&&g[1]===T.index){g[0].then(()=>{}),g=[void 0,-1];return}try{p(r,T)}catch(U){console.error("failed to play stream",U)}},y=()=>{const T=w();T&&F(T)},v=()=>{const T=w();T&&b(T)},D=({index:T})=>{var N;const U=(N=uC(T,l))!=null?N:sC(T,l,o);U&&F(U)},m=({index:T})=>{var N;const U=(N=uC(T,l))!=null?N:sC(T,l,o);U&&(F(U),C=setTimeout(()=>{b(U)},1900))};return f.on("cast",m),o.on("prepareStart",y),o.on("start",v),o.isLive?(o.preparePlayback(),v()):o.isInPrepare?y():console.log("HÄÄRRR"),()=>{f.off("prepareCast",D),f.off("cast",m),o.off("prepareStart",y),o.off("start",v),clearTimeout(C)}},[f,l,o,r,p,S])}function OJ(r){const o=am();ln.useEffect(()=>{if(!r||!o)return;const l=()=>{r.currentCamera&&o.updatePlaying(r.currentCamera)};return r.on("playing",l),()=>{r.off("playing",l)}},[r,o])}function LJ(r){const o=am(),l=Ps(),f=Rf(),p=oR();ln.useEffect(()=>{if(!f||!l||!r||!o)return;const S=({remainingTime:C})=>{const g=ZU(f,l.getExpectedPositionInSeconds(),C,r.currentCamera);if(g)try{const w=p(r,g);o.once("ended",()=>{w.then(()=>{})})}catch(w){console.error("failed to load stream",w)}else o.once("ended",()=>{o.endEvent()})};return o.on("nearEnd",S),()=>{o.off("nearEnd",S)}},[f,l,r,p,o])}function kJ(r,o,l){const f=bz(),p=Ps(),[S,C]=ln.useState(null);return ln.useEffect(()=>{const g=document.querySelector(r);if(g==null||!p||!l)return;const w=new qz({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:o,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:f}},eventClock:p});return C(w),()=>{w.destroy()}},[f,r,o,l,p]),S}function FJ(r){const o=Ps(),l=bf(),f=Rf(),p=am(),[S,C]=ln.useState(),[g,w]=ln.useState();return ln.useEffect(()=>{if(!f||!o||!r||!l||!p)return;const F=({index:y})=>{var v;w((v=uC(y,f))!=null?v:sC(y,f,o)),C(r.currentCamera)},b=()=>{const y=r.currentCamera;(y==null?void 0:y.camera.transition)==="mapAndClosing"&&(w(ZU(f,o.getExpectedPositionInSeconds(),2,y)),C(y))};return l.on("cast",F),p.on("transition",b),()=>{l.off("cast",F),p.off("transition",b)}},[f,o,r,l,p]),[S,g]}function FB({x:r,y:o,mapScale:l}){const[f,p]=ln.useState(0),[S,C]=ln.useState(0),[g,w]=ln.useState(0),[F,b]=ln.useState(0),[y,v]=ln.useState(0);return ln.useEffect(()=>{const D=window.innerWidth,m=window.innerHeight,T=D/12,U=m/12;b(m/2-m*.05),v(D/m),p(r*T),C(o*U),w(T*l)},[r,o,l]),{scaledX:f,scaledY:S,size:g,baseY:F,aspectRatio:y}}const UJ="_container_18zg0_1",BJ="_fadeIn_18zg0_1",jJ="_content_18zg0_15",ZJ="_scrollWrapper_18zg0_33",GJ="_scrollContainer_18zg0_47",qJ="_poster_18zg0_85",lg={container:UJ,fadeIn:BJ,content:jJ,scrollWrapper:ZJ,scrollContainer:GJ,poster:qJ},HJ="_logoutWrapper_1fqns_1",KJ={logoutWrapper:HJ},aR=()=>{const r=()=>{const o=new Event("logout");document.dispatchEvent(o)};return pt.jsx("div",{className:KJ.logoutWrapper,children:pt.jsx(Qi,{onClick:r,focusKey:"LOGOUT",selfFocus:!0,children:"Logout"})})};var VJ=Object.defineProperty,K0=Object.getOwnPropertySymbols,UB=Object.prototype.hasOwnProperty,BB=Object.prototype.propertyIsEnumerable,Q3=(r,o,l)=>o in r?VJ(r,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[o]=l,Wg=(r,o)=>{for(var l in o||(o={}))UB.call(o,l)&&Q3(r,l,o[l]);if(K0)for(var l of K0(o))BB.call(o,l)&&Q3(r,l,o[l]);return r},sR=(r,o)=>{var l={};for(var f in r)UB.call(r,f)&&o.indexOf(f)<0&&(l[f]=r[f]);if(r!=null&&K0)for(var f of K0(r))o.indexOf(f)<0&&BB.call(r,f)&&(l[f]=r[f]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Tf;(r=>{const o=class{constructor(w,F,b,y){if(this.version=w,this.errorCorrectionLevel=F,this.modules=[],this.isFunction=[],w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let v=[];for(let m=0;m<this.size;m++)v.push(!1);for(let m=0;m<this.size;m++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(b);if(this.drawCodewords(D),y==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(y=T,m=U),this.applyMask(T)}}S(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(w,F){const b=r.QrSegment.makeSegments(w);return o.encodeSegments(b,F)}static encodeBinary(w,F){const b=r.QrSegment.makeBytes(w);return o.encodeSegments([b],F)}static encodeSegments(w,F,b=1,y=40,v=-1,D=!0){if(!(o.MIN_VERSION<=b&&b<=y&&y<=o.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let m,T;for(m=b;;m++){const I=o.getNumDataCodewords(m,F)*8,R=g.getTotalBits(w,m);if(R<=I){T=R;break}if(m>=y)throw new RangeError("Data too long")}for(const I of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])D&&T<=o.getNumDataCodewords(m,I)*8&&(F=I);let U=[];for(const I of w){f(I.mode.modeBits,4,U),f(I.numChars,I.mode.numCharCountBits(m),U);for(const R of I.getData())U.push(R)}S(U.length==T);const N=o.getNumDataCodewords(m,F)*8;S(U.length<=N),f(0,Math.min(4,N-U.length),U),f(0,(8-U.length%8)%8,U),S(U.length%8==0);for(let I=236;U.length<N;I^=253)f(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,R)=>_[R>>>3]|=I<<7-(R&7)),new o(m,F,_,v)}getModule(w,F){return 0<=w&&w<this.size&&0<=F&&F<this.size&&this.modules[F][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let b=0;b<this.size;b++)this.setFunctionModule(6,b,b%2==0),this.setFunctionModule(b,6,b%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),F=w.length;for(let b=0;b<F;b++)for(let y=0;y<F;y++)b==0&&y==0||b==0&&y==F-1||b==F-1&&y==0||this.drawAlignmentPattern(w[b],w[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const F=this.errorCorrectionLevel.formatBits<<3|w;let b=F;for(let v=0;v<10;v++)b=b<<1^(b>>>9)*1335;const y=(F<<10|b)^21522;S(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,p(y,v));this.setFunctionModule(8,7,p(y,6)),this.setFunctionModule(8,8,p(y,7)),this.setFunctionModule(7,8,p(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,p(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,p(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,p(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let b=0;b<12;b++)w=w<<1^(w>>>11)*7973;const F=this.version<<12|w;S(F>>>18==0);for(let b=0;b<18;b++){const y=p(F,b),v=this.size-11+b%3,D=Math.floor(b/3);this.setFunctionModule(v,D,y),this.setFunctionModule(D,v,y)}}drawFinderPattern(w,F){for(let b=-4;b<=4;b++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(b)),D=w+y,m=F+b;0<=D&&D<this.size&&0<=m&&m<this.size&&this.setFunctionModule(D,m,v!=2&&v!=4)}}drawAlignmentPattern(w,F){for(let b=-2;b<=2;b++)for(let y=-2;y<=2;y++)this.setFunctionModule(w+y,F+b,Math.max(Math.abs(y),Math.abs(b))!=1)}setFunctionModule(w,F,b){this.modules[F][w]=b,this.isFunction[F][w]=!0}addEccAndInterleave(w){const F=this.version,b=this.errorCorrectionLevel;if(w.length!=o.getNumDataCodewords(F,b))throw new RangeError("Invalid argument");const y=o.NUM_ERROR_CORRECTION_BLOCKS[b.ordinal][F],v=o.ECC_CODEWORDS_PER_BLOCK[b.ordinal][F],D=Math.floor(o.getNumRawDataModules(F)/8),m=y-D%y,T=Math.floor(D/y);let U=[];const N=o.reedSolomonComputeDivisor(v);for(let I=0,R=0;I<y;I++){let Z=w.slice(R,R+T-v+(I<m?0:1));R+=Z.length;const z=o.reedSolomonComputeRemainder(Z,N);I<m&&Z.push(0),U.push(Z.concat(z))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((R,Z)=>{(I!=T-v||Z>=m)&&_.push(R[I])});return S(_.length==D),_}drawCodewords(w){if(w.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let F=0;for(let b=this.size-1;b>=1;b-=2){b==6&&(b=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const D=b-v,T=(b+1&2)==0?this.size-1-y:y;!this.isFunction[T][D]&&F<w.length*8&&(this.modules[T][D]=p(w[F>>>3],7-(F&7)),F++)}}S(F==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let F=0;F<this.size;F++)for(let b=0;b<this.size;b++){let y;switch(w){case 0:y=(b+F)%2==0;break;case 1:y=F%2==0;break;case 2:y=b%3==0;break;case 3:y=(b+F)%3==0;break;case 4:y=(Math.floor(b/3)+Math.floor(F/2))%2==0;break;case 5:y=b*F%2+b*F%3==0;break;case 6:y=(b*F%2+b*F%3)%2==0;break;case 7:y=((b+F)%2+b*F%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[F][b]&&y&&(this.modules[F][b]=!this.modules[F][b])}}getPenaltyScore(){let w=0;for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[v][U]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[v][U],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][v]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[U][v],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let D=0;D<this.size-1;D++){const m=this.modules[v][D];m==this.modules[v][D+1]&&m==this.modules[v+1][D]&&m==this.modules[v+1][D+1]&&(w+=o.PENALTY_N2)}let F=0;for(const v of this.modules)F=v.reduce((D,m)=>D+(m?1:0),F);const b=this.size*this.size,y=Math.ceil(Math.abs(F*20-b*10)/b)-1;return S(0<=y&&y<=9),w+=y*o.PENALTY_N4,S(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,F=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let b=[6];for(let y=this.size-7;b.length<w;y-=F)b.splice(1,0,y);return b}}static getNumRawDataModules(w){if(w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version number out of range");let F=(16*w+128)*w+64;if(w>=2){const b=Math.floor(w/7)+2;F-=(25*b-10)*b-55,w>=7&&(F-=36)}return S(208<=F&&F<=29648),F}static getNumDataCodewords(w,F){return Math.floor(o.getNumRawDataModules(w)/8)-o.ECC_CODEWORDS_PER_BLOCK[F.ordinal][w]*o.NUM_ERROR_CORRECTION_BLOCKS[F.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let F=[];for(let y=0;y<w-1;y++)F.push(0);F.push(1);let b=1;for(let y=0;y<w;y++){for(let v=0;v<F.length;v++)F[v]=o.reedSolomonMultiply(F[v],b),v+1<F.length&&(F[v]^=F[v+1]);b=o.reedSolomonMultiply(b,2)}return F}static reedSolomonComputeRemainder(w,F){let b=F.map(y=>0);for(const y of w){const v=y^b.shift();b.push(0),F.forEach((D,m)=>b[m]^=o.reedSolomonMultiply(D,v))}return b}static reedSolomonMultiply(w,F){if(w>>>8||F>>>8)throw new RangeError("Byte out of range");let b=0;for(let y=7;y>=0;y--)b=b<<1^(b>>>7)*285,b^=(F>>>y&1)*w;return S(b>>>8==0),b}finderPenaltyCountPatterns(w){const F=w[1];S(F<=this.size*3);const b=F>0&&w[2]==F&&w[3]==F*3&&w[4]==F&&w[5]==F;return(b&&w[0]>=F*4&&w[6]>=F?1:0)+(b&&w[6]>=F*4&&w[0]>=F?1:0)}finderPenaltyTerminateAndCount(w,F,b){return w&&(this.finderPenaltyAddHistory(F,b),F=0),F+=this.size,this.finderPenaltyAddHistory(F,b),this.finderPenaltyCountPatterns(b)}finderPenaltyAddHistory(w,F){F[0]==0&&(w+=this.size),F.pop(),F.unshift(w)}};let l=o;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=l;function f(w,F,b){if(F<0||F>31||w>>>F)throw new RangeError("Value out of range");for(let y=F-1;y>=0;y--)b.push(w>>>y&1)}function p(w,F){return(w>>>F&1)!=0}function S(w){if(!w)throw new Error("Assertion error")}const C=class{constructor(w,F,b){if(this.mode=w,this.numChars=F,this.bitData=b,F<0)throw new RangeError("Invalid argument");this.bitData=b.slice()}static makeBytes(w){let F=[];for(const b of w)f(b,8,F);return new C(C.Mode.BYTE,w.length,F)}static makeNumeric(w){if(!C.isNumeric(w))throw new RangeError("String contains non-numeric characters");let F=[];for(let b=0;b<w.length;){const y=Math.min(w.length-b,3);f(parseInt(w.substr(b,y),10),y*3+1,F),b+=y}return new C(C.Mode.NUMERIC,w.length,F)}static makeAlphanumeric(w){if(!C.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let F=[],b;for(b=0;b+2<=w.length;b+=2){let y=C.ALPHANUMERIC_CHARSET.indexOf(w.charAt(b))*45;y+=C.ALPHANUMERIC_CHARSET.indexOf(w.charAt(b+1)),f(y,11,F)}return b<w.length&&f(C.ALPHANUMERIC_CHARSET.indexOf(w.charAt(b)),6,F),new C(C.Mode.ALPHANUMERIC,w.length,F)}static makeSegments(w){return w==""?[]:C.isNumeric(w)?[C.makeNumeric(w)]:C.isAlphanumeric(w)?[C.makeAlphanumeric(w)]:[C.makeBytes(C.toUtf8ByteArray(w))]}static makeEci(w){let F=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)f(w,8,F);else if(w<16384)f(2,2,F),f(w,14,F);else if(w<1e6)f(6,3,F),f(w,21,F);else throw new RangeError("ECI assignment value out of range");return new C(C.Mode.ECI,0,F)}static isNumeric(w){return C.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return C.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,F){let b=0;for(const y of w){const v=y.mode.numCharCountBits(F);if(y.numChars>=1<<v)return 1/0;b+=4+v+y.bitData.length}return b}static toUtf8ByteArray(w){w=encodeURI(w);let F=[];for(let b=0;b<w.length;b++)w.charAt(b)!="%"?F.push(w.charCodeAt(b)):(F.push(parseInt(w.substr(b+1,2),16)),b+=2);return F}};let g=C;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.QrSegment=g})(Tf||(Tf={}));(r=>{(o=>{const l=class{constructor(p,S){this.ordinal=p,this.formatBits=S}};let f=l;f.LOW=new l(0,1),f.MEDIUM=new l(1,0),f.QUARTILE=new l(2,3),f.HIGH=new l(3,2),o.Ecc=f})(r.QrCode||(r.QrCode={}))})(Tf||(Tf={}));(r=>{(o=>{const l=class{constructor(p,S){this.modeBits=p,this.numBitsCharCount=S}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let f=l;f.NUMERIC=new l(1,[10,12,14]),f.ALPHANUMERIC=new l(2,[9,11,13]),f.BYTE=new l(4,[8,16,16]),f.KANJI=new l(8,[8,10,12]),f.ECI=new l(7,[0,0,0]),o.Mode=f})(r.QrSegment||(r.QrSegment={}))})(Tf||(Tf={}));var ah=Tf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var jB={L:ah.QrCode.Ecc.LOW,M:ah.QrCode.Ecc.MEDIUM,Q:ah.QrCode.Ecc.QUARTILE,H:ah.QrCode.Ecc.HIGH},ZB=128,GB="L",qB="#FFFFFF",HB="#000000",KB=!1,uR=4,zJ=.1;function VB(r,o=0){const l=[];return r.forEach(function(f,p){let S=null;f.forEach(function(C,g){if(!C&&S!==null){l.push("M".concat(S+o," ").concat(p+o,"h").concat(g-S,"v1H").concat(S+o,"z")),S=null;return}if(g===f.length-1){if(!C)return;S===null?l.push("M".concat(g+o,",").concat(p+o," h1v1H").concat(g+o,"z")):l.push("M".concat(S+o,",").concat(p+o," h").concat(g+1-S,"v1H").concat(S+o,"z"));return}C&&S===null&&(S=g)})}),l.join("")}function zB(r,o){return r.slice().map((l,f)=>f<o.y||f>=o.y+o.h?l:l.map((p,S)=>S<o.x||S>=o.x+o.w?p:!1))}function YB(r,o,l,f){if(f==null)return null;const p=l?uR:0,S=r.length+p*2,C=Math.floor(o*zJ),g=S/o,w=(f.width||C)*g,F=(f.height||C)*g,b=f.x==null?r.length/2-w/2:f.x*g,y=f.y==null?r.length/2-F/2:f.y*g;let v=null;if(f.excavate){let D=Math.floor(b),m=Math.floor(y),T=Math.ceil(w+b-D),U=Math.ceil(F+y-m);v={x:D,y:m,w:T,h:U}}return{x:b,y,h:F,w,excavation:v}}var YJ=function(){try{new Path2D().addPath(new Path2D)}catch(r){return!1}return!0}();function WJ(r){const o=r,{value:l,size:f=ZB,level:p=GB,bgColor:S=qB,fgColor:C=HB,includeMargin:g=KB,style:w,imageSettings:F}=o,b=sR(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),y=F==null?void 0:F.src,v=Xo.useRef(null),D=Xo.useRef(null),[m,T]=Xo.useState(!1);Xo.useEffect(()=>{if(v.current!=null){const _=v.current,I=_.getContext("2d");if(!I)return;let R=ah.QrCode.encodeText(l,jB[p]).getModules();const Z=g?uR:0,z=R.length+Z*2,W=YB(R,f,g,F),X=D.current,le=W!=null&&X!==null&&X.complete&&X.naturalHeight!==0&&X.naturalWidth!==0;le&&W.excavation!=null&&(R=zB(R,W.excavation));const x=window.devicePixelRatio||1;_.height=_.width=f*x;const $=f/z*x;I.scale($,$),I.fillStyle=S,I.fillRect(0,0,z,z),I.fillStyle=C,YJ?I.fill(new Path2D(VB(R,Z))):R.forEach(function(ce,oe){ce.forEach(function(he,Ce){he&&I.fillRect(Ce+Z,oe+Z,1,1)})}),le&&I.drawImage(X,W.x+Z,W.y+Z,W.w,W.h)}}),Xo.useEffect(()=>{T(!1)},[y]);const U=Wg({height:f,width:f},w);let N=null;return y!=null&&(N=Xo.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{T(!0)},ref:D})),Xo.createElement(Xo.Fragment,null,Xo.createElement("canvas",Wg({style:U,height:f,width:f,ref:v},b)),N)}function $J(r){const o=r,{value:l,size:f=ZB,level:p=GB,bgColor:S=qB,fgColor:C=HB,includeMargin:g=KB,imageSettings:w}=o,F=sR(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let b=ah.QrCode.encodeText(l,jB[p]).getModules();const y=g?uR:0,v=b.length+y*2,D=YB(b,f,g,w);let m=null;w!=null&&D!=null&&(D.excavation!=null&&(b=zB(b,D.excavation)),m=Xo.createElement("image",{xlinkHref:w.src,height:D.h,width:D.w,x:D.x+y,y:D.y+y,preserveAspectRatio:"none"}));const T=VB(b,y);return Xo.createElement("svg",Wg({height:f,width:f,viewBox:"0 0 ".concat(v," ").concat(v)},F),Xo.createElement("path",{fill:S,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),Xo.createElement("path",{fill:C,d:T,shapeRendering:"crispEdges"}),m)}var AE=r=>{const o=r,{renderAs:l}=o,f=sR(o,["renderAs"]);return l==="svg"?Xo.createElement($J,Wg({},f)):Xo.createElement(WJ,Wg({},f))};function XJ({selfFocus:r,focusKey:o,src:l,showQr:f,qrUrl:p,...S}){const{ref:C,focused:g,focusSelf:w}=uu.useFocusable({onEnterPress:()=>{S.onClick()},focusKey:o});return ln.useEffect(()=>{r&&w()},[w,r]),pt.jsx("button",{...S,ref:C,className:"".concat(S.className||""," ").concat(g?lC.posterFocused:""),id:"rail_".concat(o),children:f?pt.jsx(AE,{className:lC.qrCode,bgColor:"white",fgColor:"black",value:p,size:720}):pt.jsx("img",{src:l})})}const WB=()=>{const[r,o]=ln.useState(0);return ln.useEffect(()=>{const l=p=>{o(p.keyCode)},f=()=>{o(0)};return document.addEventListener("keydown",l),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",f)}},[]),r};function QJ(){const r=Fb(),[o,l]=ln.useState(null),[f,p]=ln.useState(0),S=WB();function C(){var g;return(r==null?void 0:r.postScreen.offersCollection.items.length)>2&&((g=document.getElementById("rail_".concat(uu.getCurrentFocusKey())))==null?void 0:g.offsetLeft)-13||0}return ln.useEffect(()=>{S!==0&&l(null),p(C())},[S]),pt.jsx("div",{className:lg.container,children:pt.jsxs("div",{className:lg.content,children:[pt.jsx("h1",{children:r==null?void 0:r.postScreen.title}),pt.jsx("p",{className:"body-text",style:{opacity:.5},children:r==null?void 0:r.postScreen.body}),pt.jsx(aR,{}),pt.jsx("div",{className:lg.scrollWrapper,children:pt.jsx("div",{className:lg.scrollContainer,style:{left:-(f||0)},children:r&&r.postScreen.offersCollection.items.map((g,w)=>pt.jsx(XJ,{className:lg.poster,onClick:()=>{"".concat(w)!==uu.getCurrentFocusKey()?(uu.setFocus("".concat(w)),p(C())):l(w)},src:g.image.url,focusKey:"".concat(w),selfFocus:w===0,showQr:w===o,qrUrl:g.link},w))})})]})})}const JJ="_transitionWrapper_jyngr_1",eee="_active_jyngr_17",tee="_transition_jyngr_1",nee="_fadeOut_jyngr_1",ree="_hidden_jyngr_57",iee="_visible_jyngr_67",oee="_videoTitle_jyngr_77",aee="_fadeIn_jyngr_1",cg={transitionWrapper:JJ,active:eee,transition:tee,fadeOut:nee,hidden:ree,visible:iee,videoTitle:oee,fadeIn:aee},see="_placeContainer_ywyae_1",uee="_place_ywyae_1",lee="_background_ywyae_45",cee="_activePlace_ywyae_57",fee="_fadeOut_ywyae_1",dee="_normalPlace_ywyae_79",hee="_selectedPlace_ywyae_99",pee="_fadeIn_ywyae_1",gee="_pulseEffect_ywyae_1",mee="_title_ywyae_153",ef={placeContainer:see,place:uee,background:lee,activePlace:cee,fadeOut:fee,normalPlace:dee,selectedPlace:hee,fadeIn:pee,pulseEffect:gee,title:mee};var bs=(r=>(r.ACTIVE_PLACE="ActivePlace",r.SELECTED_PLACE="SelectedPlace",r.NORMAL_PLACE="NormalPlace",r))(bs||{});const vee=({place:r,mapPlacesLength:o})=>{const l=FB({x:r.mapPosition.x,y:r.mapPosition.y,mapScale:r.mapScale}),f=ln.useMemo(()=>{switch(r.placeType){case bs.ACTIVE_PLACE:return ef.activePlace;case bs.SELECTED_PLACE:return ef.selectedPlace;case bs.NORMAL_PLACE:default:return ef.normalPlace}},[r]);return pt.jsx("div",{className:ef.placeContainer,children:pt.jsxs("div",{className:"".concat(ef.place," ").concat(f),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(o>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(o>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[pt.jsx("div",{className:ef.background}),(r.placeType===bs.ACTIVE_PLACE||r.placeType===bs.SELECTED_PLACE)&&pt.jsx("div",{className:"subheader-light ".concat(ef.title),children:r.title})]})})},yee="_followContainer_1h8ds_1",Eee="_follow_1h8ds_1",_ee="_selectedFollow_1h8ds_35",Tee="_pulseEffect_1h8ds_1",See="_notSelectedFollow_1h8ds_79",wee="_iconContainer_1h8ds_97",Aee="_labelContainer_1h8ds_131",Hd={followContainer:yee,follow:Eee,selectedFollow:_ee,pulseEffect:Tee,notSelectedFollow:See,iconContainer:wee,labelContainer:Aee},Iee="_label_svzic_1",Cee={label:Iee},bee=({content:r,classNames:o=""})=>pt.jsx("div",{className:"".concat(Cee.label," ").concat(o," label"),children:r}),Ree=({style:r})=>pt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:r,children:pt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),$B=({classNames:r,styles:o,color:l,stroke:f})=>pt.jsxs("svg",{className:r,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[pt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),xee=({classNames:r,styles:o,color:l,stroke:f})=>pt.jsxs("svg",{className:r,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[pt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),pt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),pt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),pt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"})]}),Nee=()=>pt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[pt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Mee=()=>pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[pt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Dee=()=>pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[pt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),pt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),Pee=()=>pt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:pt.jsxs("g",{children:[pt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),pt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),pt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),pt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),Oee=()=>pt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:pt.jsxs("g",{children:[pt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),pt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),pt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),pt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),Lee=()=>pt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 150",children:pt.jsx("path",{fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:"300 385",strokeDashoffset:"0",d:"M275 75c0 31-27 50-50 50-58 0-92-100-150-100-28 0-50 22-50 50s23 50 50 50c58 0 92-100 150-100 24 0 50 19 50 50Z",children:pt.jsx("animate",{attributeName:"stroke-dashoffset",calcMode:"spline",dur:"2",values:"685;-685",keySplines:"0 0 1 1",repeatCount:"indefinite"})})}),kee=({follow:r})=>{var p,S,C,g;const o=FB({x:(S=(p=r.mapPosition)==null?void 0:p.x)!=null?S:0,y:(g=(C=r.mapPosition)==null?void 0:C.y)!=null?g:0,mapScale:.6}),[l,f]=ln.useState(0);return ln.useEffect(()=>{function w(F,b,y){return-Math.atan2((F.x-b.x)*y,F.y-b.y)*(180/Math.PI)}r.mapPosition&&f(w(r.mapPositions[0],r.mapPositions[r.mapPositions.length-1],o.aspectRatio))},[r.mapPosition,r.mapPositions,o]),pt.jsxs("div",{className:Hd.followContainer,style:{width:o.size,height:o.size,left:"calc(50% + ".concat(o.scaledX,"px)"),top:"calc(50% - ".concat(o.scaledY,"px)")},children:[pt.jsx("div",{className:"".concat(Hd.follow," ").concat(r.isSelectedFollow?Hd.selectedFollow:Hd.notSelectedFollow," ").concat(Hd.iconContainer),children:pt.jsx(Ree,{style:{transform:"rotate(".concat(l,"deg)")}})}),r.isSelectedFollow&&pt.jsx(bee,{classNames:Hd.labelContainer,content:r.title})]})},Fee=({fromCamera:r,toCamera:o})=>{const l=Rf(),f=Ps(),p=4200,S=p+3950,C=1900,[g,w]=ln.useState([]),[F,b]=ln.useState([]),[y,v]=ln.useState(!1),[D,m]=ln.useState(!1),[T,U]=ln.useState(""),N=ln.useRef([]),_=ln.useMemo(()=>{function le(x,$){const ce=x.jumpSpots.map(Ze=>Ze.camera.span),he=ce.map(Ze=>Ze.time).map(Ze=>mi(Ze,$.frameRate)),Ce=Math.min(...he),Xe=ce.map(Ze=>mi(Ze.time,$.frameRate)+mi(Ze.duration,$.frameRate)),Ae=Math.max(...Xe);return{start:Ce,end:Ae}}return l==null?void 0:l.places.filter(x=>x.jumpSpots.length>0).map((x,$)=>({...x,span:le(x,l),placeType:bs.NORMAL_PLACE,placeIndex:$}))},[l]),I=ln.useMemo(()=>(l==null?void 0:l.follows.map(le=>({...le,isSelectedFollow:!1})))||[],[l]),R=ln.useCallback((le,x)=>{const $=mi(le.camera.span.time,x.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=$&&$<=ce.span.end))||[]},[_]),Z=ln.useCallback(le=>{const x=le.mapPositions[0]||{x:0,y:0};if(l&&f){const $=f.getExpectedPositionInSeconds()-mi(le.camera.span.time,l.frameRate),ce=mi(le.camera.span.duration,l.frameRate);let oe=Math.floor($*4/ce);return $===ce&&(oe-=1),le.mapPositions[oe]||x}return x},[f,l]),z=ln.useCallback((le,x)=>{const $=mi(le.camera.span.time,x.frameRate)+2;return I.filter(ce=>mi(ce.camera.span.time,x.frameRate)<=$&&$<=mi(ce.camera.span.time,x.frameRate)+mi(ce.camera.span.duration,x.frameRate)).map(ce=>({...ce,mapPosition:Z(ce)}))},[I,Z]),W=ln.useCallback(le=>_==null?void 0:_.find(x=>x.jumpSpots.some($=>$.camera.assetName===le.camera.assetName)),[_]),X=(le,x)=>x.jumpSpots.some($=>$.camera.assetName===le.camera.assetName);return ln.useEffect(()=>{if(!_||!r||!o||!l||r.camera.assetName===o.camera.assetName)return;const le=N.current;let x=[],$=[],ce=[],oe=[];if(U(o.placeTitle?o.placeTitle:o.title),r.type===of.JUMPSPOT&&o.type===of.JUMPSPOT&&r.placeIndex===o.placeIndex)m(!1),v(!0);else{switch(m(!0),r.type){case of.JUMPSPOT:$=z(o,l),x=R(r,l).map(Ze=>X(r,Ze)?{...Ze,placeType:bs.ACTIVE_PLACE}:Ze);break;case of.FOLLOW:x=R(r,l),$=z(r,l).map(Ze=>({...Ze,isSelectedFollow:r.camera.assetName===Ze.camera.assetName}));break}switch(w(x),b($),o.type){case of.JUMPSPOT:oe=z(r,l);const Ze=x.find(lt=>X(o,lt));if(Ze)ce=x.map(lt=>({...lt,placeType:lt.placeIndex===Ze.placeIndex?bs.SELECTED_PLACE:bs.NORMAL_PLACE}));else{const lt=W(o);lt&&(lt.placeType=bs.SELECTED_PLACE,ce=[...x.map(qe=>({...qe,placeType:bs.NORMAL_PLACE})),lt])}break;case of.FOLLOW:ce=R(r,l),oe=z(r,l);const nt=$.find(lt=>lt.camera.assetName===o.camera.assetName);if(nt)oe=$.map(lt=>({...lt,isSelectedFollow:lt.camera.assetName===nt.camera.assetName}));else{const lt=I.find(qe=>qe.camera.assetName===o.camera.assetName);if(lt){const qe={...lt,isSelectedFollow:!0,mapPosition:Z(lt)};oe=[...$.map(ut=>({...ut,isSelectedFollow:!1})),qe]}}break}}const he=setTimeout(()=>{b(oe)},C);le.push(he);const Ce=setTimeout(()=>{w(ce)},C);le.push(Ce);const Xe=setTimeout(()=>{m(!1),v(!0)},p);le.push(Xe);const Ae=setTimeout(()=>{v(!1)},S);return le.push(Ae),()=>{le.forEach(Ze=>{clearTimeout(Ze)}),N.current=[]}},[r,o,_,I,z,W,l,R,Z,S]),pt.jsxs("div",{className:"".concat(cg.transitionWrapper," ").concat(D?cg.active:""),children:[D&&pt.jsxs("div",{className:"".concat(cg.transition," ").concat(cg.visible),children:[g.map((le,x)=>pt.jsx(vee,{place:le,mapPlacesLength:g.length},"place-".concat(x.toString()))),F.filter(le=>le.camera.assetName===(r==null?void 0:r.camera.assetName)||le.camera.assetName===(o==null?void 0:o.camera.assetName)).map((le,x)=>pt.jsx(kee,{follow:le},"follow-".concat(x.toString())))]}),y&&pt.jsx("h1",{className:cg.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},Uee="_playerPage_s22qw_1",Bee="_playerContainer_s22qw_13",jee="_fadeIn_s22qw_1",J3={playerPage:Uee,playerContainer:Bee,fadeIn:jee},Zee="_attention_1xh5o_1",Gee="_ripple1_1xh5o_1",qee="_ripple2_1xh5o_1",Hee="_thirdRipple_1xh5o_81",Kee="_ripple3_1xh5o_1",Vee="_iconWrapper_1xh5o_105",oI={attention:Zee,ripple1:Gee,ripple2:qee,thirdRipple:Hee,ripple3:Kee,iconWrapper:Vee},zee=()=>{const r=am(),[o,l]=ln.useState(!1),f=5e3;if(ln.useEffect(()=>{if(!r)return;let p;const S=()=>{l(!0),p=setTimeout(()=>{l(!1)},f)};return r.on("attention",S),()=>{r.off("attention",S),clearTimeout(p)}},[r]),!!o)return pt.jsxs("div",{className:oI.attention,children:[pt.jsx("span",{className:oI.iconWrapper,children:pt.jsx(Dee,{})}),pt.jsx("span",{className:oI.thirdRipple})]})},Yee="_container_1l3tn_1",Wee="_qrCode_1l3tn_25",$ee="_text_1l3tn_35",aI={container:Yee,qrCode:Wee,text:$ee},Xee=({url:r})=>pt.jsxs("div",{className:aI.container,children:[pt.jsx("p",{className:"body-text ".concat(aI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),pt.jsx(AE,{className:aI.qrCode,bgColor:"white",fgColor:"black",value:r,size:500})]}),Qee="_controlsWrapper_1v4q3_1",Jee="_hidden_1v4q3_21",ete="_iconWrapper_1v4q3_29",sI={controlsWrapper:Qee,hidden:Jee,iconWrapper:ete},tte=({visible:r,eventPlayer:o})=>{const[l,f]=ln.useState(!1),p=()=>{o&&(l?o.exitFullscreen().then(()=>{f(!1)}):o.requestFullscreen().then(()=>{f(!0)}))};return pt.jsx("div",{className:"".concat(sI.controlsWrapper," ").concat(r?"":sI.hidden),children:pt.jsx("div",{className:sI.iconWrapper,onClick:p,children:l?pt.jsx(Oee,{}):pt.jsx(Pee,{})})})},nte="_warningContainer_1tqkb_1",rte={warningContainer:nte},XB=()=>pt.jsxs("div",{className:rte.warningContainer,children:[pt.jsx($B,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),pt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),ite="_messageContainer_1jzyd_3",ote="_message_1jzyd_3",eF={messageContainer:ite,message:ote},ate=({message:r})=>pt.jsx("div",{className:eF.messageContainer,children:pt.jsx("div",{className:"".concat(eF.message," subheader-light"),children:r})});function ste(){const[r,o,l]=zU(),f=Ub(),p=kJ("#playerContainer",o,l),[S,C]=ln.useState(!1),[g,w]=ln.useState(),F=Bb(),b=ln.useRef(),y=ln.useMemo(()=>{const U=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(U)},[]);ln.useEffect(()=>{const U=F==null?void 0:F.find(N=>N.deviceId===_h);w(U)},[F]);const v=!!(F!=null&&F.find(U=>U.deviceId!==_h));PJ(p),OJ(p),LJ(p);const[D,m]=FJ(p);DJ();const T=()=>{y||(C(!0),clearTimeout(b.current),b.current=setTimeout(()=>{C(!1)},3e3))};return pt.jsxs("div",{className:J3.playerPage,onMouseMove:T,children:[pt.jsxs("div",{id:"playerContainer",className:J3.playerContainer,children:[f&&pt.jsx(Dz,{eventPlayer:p}),pt.jsx(zee,{}),pt.jsx(tte,{visible:S,eventPlayer:p}),(g==null?void 0:g.stateInfo.state)==="showQrCode"&&pt.jsx(Xee,{url:"".concat(Db,":").concat(g.deviceId)}),pt.jsx(Fee,{fromCamera:D,toCamera:m})]}),!v&&pt.jsx(ate,{message:pt.jsx(XB,{})})]})}const ute="_gradientBackground_b6nct_1",lte="_container_b6nct_15",cte="_fadeIn_b6nct_1",fte="_connectedTV_b6nct_45",dte="_disconnectedTV_b6nct_47",hte="_popIn_b6nct_1",pte="_iconContainer_b6nct_105",gte="_connectedText_b6nct_121",Kd={gradientBackground:ute,container:lte,fadeIn:cte,connectedTV:fte,disconnectedTV:dte,popIn:hte,iconContainer:pte,connectedText:gte},tF=({isDisconnected:r})=>pt.jsx("div",{className:Kd.gradientBackground,children:pt.jsxs("div",{className:Kd.container,children:[pt.jsx("div",{className:r?Kd.disconnectedTV:Kd.connectedTV,children:pt.jsx("div",{className:Kd.iconContainer,children:r?pt.jsx(Mee,{}):pt.jsx(Nee,{})})}),pt.jsx("h1",{className:Kd.connectedText,children:r?"TV disconnected":"TV connected"})]})}),mte="_hidden_zykq7_1",vte={hidden:mte},yte="_gradientBackground_1wh80_1",Ete="_container_1wh80_15",_te="_fadeIn_1wh80_1",Tte="_imageWrapper_1wh80_47",Ste="_listText_1wh80_59",wte="_boldText_1wh80_59",Ate="_image_1wh80_47",Ite="_glow_1wh80_93",Cte="_dividerWrapper_1wh80_121",bte="_divider_1wh80_121",Rte="_buttonsWrapper_1wh80_151",xte="_testButton_1wh80_179",Nte="_demoButton_1wh80_187",Mte="_title_1wh80_195",Dte="_countdownWrapper_1wh80_205",Pte="_timeSectionContainer_1wh80_233",Ote="_timeSection_1wh80_233",Lte="_countdownTitle_1wh80_259",kte="_label_1wh80_267",Fte="_logos_1wh80_275",Ute="_showStartedLabel_1wh80_301",Bte="_backWrapper_1wh80_309",jte="_warning_1wh80_337",Ii={gradientBackground:yte,container:Ete,fadeIn:_te,imageWrapper:Tte,listText:Ste,boldText:wte,image:Ate,glow:Ite,dividerWrapper:Cte,divider:bte,buttonsWrapper:Rte,testButton:xte,demoButton:Nte,title:Mte,countdownWrapper:Dte,timeSectionContainer:Pte,timeSection:Ote,countdownTitle:Lte,label:kte,logos:Fte,showStartedLabel:Ute,backWrapper:Bte,warning:jte},Zte="_errorContainer_1vpqa_1",Gte={errorContainer:Zte},qte=({errorIcon:r,errorMessage:o,errorName:l})=>pt.jsxs("div",{className:Gte.errorContainer,children:[r&&pt.jsx("div",{children:r}),pt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(o)})]}),Hte="_gradientBackground_1pfse_1",Kte="_container_1pfse_19",Vte="_qrCode_1pfse_33",uI={gradientBackground:Hte,container:Kte,qrCode:Vte},zte=({url:r})=>pt.jsxs("div",{className:"".concat(uI.gradientBackground," ").concat(uI.container),children:[pt.jsx(AE,{className:uI.qrCode,bgColor:"white",fgColor:"black",value:r,size:500}),pt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),Yte=({timeToLive:r,isLive:o,backToShow:l})=>{const f=xz(),p=Ps(),S=Fb(),C=Ub(),g=Bb(),[w,F]=ln.useState(),[b,y]=ln.useState("00:00:00:00"),[v,D]=ln.useState(!1),m=ln.useRef(null),T=5;ln.useEffect(()=>{const z=g==null?void 0:g.filter(W=>W.deviceId!==_h);D(!!(z!=null&&z.length))},[g]),ln.useEffect(()=>{const z=g==null?void 0:g.find(W=>W.deviceId===_h);F(z)},[g]);let U;(z=>{z.BEFORE="before",z.MIDDLE="middle",z.END="end"})(U||(U={}));const N=z=>{if(p){let W=new Date;switch(z){case"end":W=new Date(p.demoEndtime);break;case"middle":W.setMinutes(W.getMinutes()-22);break;default:case"before":W.setSeconds(W.getSeconds()+T);break}p.updateStartTime(W,!0)}};ln.useEffect(()=>{if(r&&r>0){const z=x=>{const $=Date.parse(x.toString())-Date.parse(new Date().toString()),ce=Math.floor($/1e3%60),oe=Math.floor($/1e3/60%60),he=Math.floor($/1e3/60/60%24),Ce=Math.floor($/1e3/60/60/24);return{total:$,days:Ce,hours:he,minutes:oe,seconds:ce}},W=x=>{const{total:$,days:ce,hours:oe,minutes:he,seconds:Ce}=z(x);$>=0&&y((ce>9?ce:"0"+ce)+":"+(oe>9?oe:"0"+oe)+":"+(he>9?he:"0"+he)+":"+(Ce>9?Ce:"0"+Ce))};(x=>{m.current&&clearInterval(m.current),W(x);const $=setInterval(()=>{W(x)},1e3);m.current=$})((x=>{const $=new Date;return $.setSeconds($.getSeconds()+Math.floor(x/1e3)),$})(r))}},[r]);const[_,I,R,Z]=b.split(":");if(w&&w.stateInfo.state==="showQrCode"){const z="".concat(Db,":").concat(w.deviceId);return pt.jsx(zte,{url:z})}return pt.jsxs("div",{className:Ii.container,children:[C&&pt.jsx("div",{className:Ii.buttonsWrapper,children:pt.jsxs("div",{children:[pt.jsx(Qi,{className:"".concat(Ii.demoButton," ").concat(Ii.testButton),onClick:()=>{N("before")},selfFocus:!0,children:"B"}),pt.jsx(Qi,{className:Ii.testButton,onClick:()=>{N("middle")},children:"M"}),pt.jsx(Qi,{className:Ii.testButton,onClick:()=>{N("end")},children:"E"})]})}),pt.jsx(aR,{}),f.map((z,W)=>pt.jsx(qte,{errorMessage:z.toString},"".concat(z.name,"-error-").concat(W.toString()))),pt.jsxs("div",{className:Ii.imageWrapper,children:[pt.jsx("div",{className:Ii.glow}),pt.jsx("img",{className:Ii.image,src:"".concat(S==null?void 0:S.preScreen.backgroundLandscape.url)})]}),pt.jsxs("div",{className:Ii.countdownWrapper,children:[pt.jsx("div",{className:"".concat(Ii.title," subheader-bold"),children:S==null?void 0:S.preScreen.showTitle}),pt.jsx("div",{className:Ii.dividerWrapper,children:pt.jsx("div",{className:Ii.divider})}),!o&&pt.jsxs(pt.Fragment,{children:[pt.jsx("p",{className:"body-text ".concat(Ii.countdownTitle),children:"Starts in"}),pt.jsxs("div",{className:Ii.timeSectionContainer,children:[pt.jsxs("div",{className:Ii.timeSection,children:[pt.jsx("div",{className:"subheader-bold",children:_}),pt.jsx("div",{className:"".concat(Ii.label," label"),children:"days"})]}),pt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),pt.jsxs("div",{className:Ii.timeSection,children:[pt.jsx("div",{className:"subheader-bold",children:I}),pt.jsx("div",{className:"".concat(Ii.label," label"),children:"hours"})]}),pt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),pt.jsxs("div",{className:Ii.timeSection,children:[pt.jsx("div",{className:"subheader-bold",children:R}),pt.jsx("div",{className:"".concat(Ii.label," label"),children:"mins"})]}),pt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),pt.jsxs("div",{className:Ii.timeSection,children:[pt.jsx("div",{className:"subheader-bold",children:Z}),pt.jsx("div",{className:"".concat(Ii.label," label"),children:"secs"})]})]})]}),o&&pt.jsxs(pt.Fragment,{children:[pt.jsx("h1",{className:Ii.showStartedLabel,children:"The show has started"}),pt.jsx("div",{className:Ii.backWrapper,children:pt.jsx(Qi,{onClick:()=>{l()},children:"Back to show"})})]})]}),pt.jsx("div",{className:Ii.warning,children:!v&&uV==="new"&&pt.jsx(XB,{})})]})},Wte="_wrapper_1xj4j_1",$te="_container_1xj4j_21",Xte="_menu_1xj4j_49",Qte="_qrCodeContainer_1xj4j_61",Jte="_qrCode_1xj4j_61",ene="_listContainer_1xj4j_87",tne="_list_1xj4j_87",nne="_listItemContainer_1xj4j_129",rne="_listNumber_1xj4j_141",ine="_listText_1xj4j_167",one="_circleRightCorner_1xj4j_179",ane="_circleLeftCorner_1xj4j_203",sne="_circleCenter_1xj4j_225",une="_errorMessage_1xj4j_249",lne="_fadeIn_1xj4j_1",lo={wrapper:Wte,container:$te,menu:Xte,qrCodeContainer:Qte,qrCode:Jte,listContainer:ene,list:tne,listItemContainer:nne,listNumber:rne,listText:ine,circleRightCorner:one,circleLeftCorner:ane,circleCenter:sne,errorMessage:une,fadeIn:lne},cne=({url:r,setKeyboardSetup:o})=>{const l=KU(),f=VU(),p=S=>{if(S.name===_a.NEGOTIATE)switch(S.code){case 400:S.title=l("ticket-entry","error.toManyDevices.title"),S.message=l("ticket-entry","error.toManyDevices.body");break;case 401:S.title=l("ticket-entry","error.invalidCode.title"),S.message=l("ticket-entry","error.invalidCode.body");break;case 403:S.title=l("ticket-entry","error.codeNoLongerValid.title"),S.message=l("ticket-entry","error.codeNoLongerValid.body");break;case 404:S.title="Not Found",S.message="Ticket was not found";break}else if(S.name===_a.CONTENTFUL)switch(S.code){case 400:S.message="Could not fetch contentful environment"}return S.toString};return pt.jsxs("div",{className:lo.wrapper,children:[pt.jsx(Qi,{className:lo.menu,onClick:()=>{o(!0)},selfFocus:!0,focusKey:"MENU",children:"Menu"}),pt.jsx("div",{className:lo.circleRightCorner}),pt.jsx("div",{className:lo.circleLeftCorner}),pt.jsx("div",{className:lo.circleCenter}),pt.jsxs("div",{className:lo.container,children:[pt.jsxs("div",{className:"".concat(lo.listContainer," body-text"),children:[pt.jsx("h1",{children:"Connect your TV"}),pt.jsxs("div",{className:lo.list,children:[pt.jsxs("span",{className:lo.listItemContainer,children:[pt.jsx("span",{className:lo.listNumber,children:"1"}),pt.jsxs("span",{className:lo.listText,children:["Download the ",pt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),pt.jsxs("span",{className:lo.listItemContainer,children:[pt.jsx("span",{className:lo.listNumber,children:"2"}),pt.jsx("span",{className:lo.listText,children:"Enter the ticket code from your confirmation email."})]}),pt.jsxs("span",{className:lo.listItemContainer,children:[pt.jsx("span",{className:lo.listNumber,children:"3"}),pt.jsx("span",{className:lo.listText,children:"Scan the QR code with the app."})]})]})]}),pt.jsx("div",{className:lo.qrCodeContainer,children:pt.jsx("div",{className:lo.qrCode,children:pt.jsx(AE,{bgColor:"white",fgColor:"black",value:r!=null?r:"",size:512})})})]}),pt.jsx("div",{className:lo.errorMessage,children:f.map((S,C)=>pt.jsx("h3",{className:lo.errorMessage,children:p(S)},"".concat(S.name,"-error-").concat(C.toString())))})]})},fne="_container_zht4e_1",dne="_fadeIn_zht4e_1",hne="_scrollWrapper_zht4e_15",pne="_scrollContainer_zht4e_29",lI={container:fne,fadeIn:dne,scrollWrapper:hne,scrollContainer:pne};function gne(){const r=Fb();return pt.jsxs("div",{className:lI.container,children:[pt.jsx("h1",{children:"Oh no! This event has been canceled."}),pt.jsx(aR,{}),pt.jsx("div",{className:lI.scrollWrapper,children:pt.jsx("div",{className:lI.scrollContainer,children:r&&r.postScreen.offersCollection.items.map((o,l)=>pt.jsx("img",{src:o.image.url},l))})})]})}function mne(){switch(hE()){case dc.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case dc.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case dc.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const tf=mne(),vne="_popupWrapper_5nup5_1",yne="_popup_5nup5_1",Ene="_controls_5nup5_59",cI={popupWrapper:vne,popup:yne,controls:Ene},QB=async(r,o=!1)=>{const l=hE();r!=null&&r.connected&&o&&await r.destroy(),o&&localStorage.removeItem("ticketCode"),setTimeout(()=>{switch(l){case dc.TIZEN:o?location.reload():window.tizen.application.getCurrentApplication().exit();break;case dc.WEBOS:o?location.reload():window.close();break;default:location.reload();break}},1e3)};function _ne({close:r,shouldLogout:o}){const l=bf(),f=async()=>{await QB(l,o)};function p(S){Promise.resolve(1).then(()=>{["POPUP_CONFIRM","POPUP_CANCEL"].includes(uu.getCurrentFocusKey())||uu.setFocus(S)})}return pt.jsx("div",{className:cI.popupWrapper,children:pt.jsxs("div",{className:cI.popup,children:[pt.jsxs("h3",{children:["Would you like to ",o?"logout":"exit app","?"]}),pt.jsxs("div",{className:cI.controls,children:[pt.jsx(Qi,{onClick:r,selfFocus:!0,onBlur:()=>{p("POPUP_CANCEL")},focusKey:"POPUP_CANCEL",children:"Cancel"}),pt.jsx(Qi,{onClick:f,focusKey:"POPUP_CONFIRM",onBlur:()=>{p("POPUP_CONFIRM")},children:"Confirm"})]})]})})}const Tne="_popupWrapper_5qjl5_1",Sne="_popup_5qjl5_1",nF={popupWrapper:Tne,popup:Sne};function wne({close:r}){return pt.jsx("div",{className:nF.popupWrapper,children:pt.jsxs("div",{className:nF.popup,children:[pt.jsx(xee,{styles:{width:"96px",height:"96px"}}),pt.jsx("h3",{children:"No Internet connection"}),pt.jsx("span",{children:"Check your connection and try again."}),pt.jsx(Qi,{onClick:r,selfFocus:!0,children:"OK"})]})})}const Ane="_warningContainer_1q3xx_1",Ine={warningContainer:Ane},Cne=()=>pt.jsxs("div",{className:Ine.warningContainer,children:[pt.jsx($B,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),pt.jsx("p",{className:"label",children:"Unsupported key pressed "})]});function bne({goBackFromLive:r,showLobby:o,currentFocus:l}){const f=WB(),p=Ps(),[S,C]=ln.useState(),[g,w]=ln.useState(!1),[F,b]=ln.useState(!1),y=ln.useRef(),v=()=>{C(void 0),w(!1),Promise.resolve(1).then(()=>{uu.setFocus(l!=null?l:"LOGOUT")})};ln.useEffect(()=>(window.addEventListener("offline",()=>{C("network")}),window.addEventListener("online",()=>{v()}),document.addEventListener("logout",()=>{w(!0),C("exit")}),()=>{window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{}),document.removeEventListener("logout",()=>{})}),[]),ln.useEffect(()=>{f===tf.KEY_BACK?p!=null&&p.isLive&&!o?r():C("exit"):[tf.KEY_UP,tf.KEY_DOWN,tf.KEY_LEFT,tf.KEY_RIGHT,tf.KEY_OK,tf.KEY_BACK,0,1536,1537,65].includes(f)||((f>89||f<45)&&(b(!0),clearTimeout(y.current)),y.current=setTimeout(()=>{b(!1)},3e3))},[f]);function D(){switch(S){case"exit":return pt.jsx(_ne,{close:v,shouldLogout:g});case"network":return pt.jsx(wne,{close:v});default:return}}return pt.jsxs(pt.Fragment,{children:[D(),F&&pt.jsx(Cne,{})]})}const Rne="_container_9btbm_1",xne={container:Rne};function Nne(){return pt.jsx("div",{className:xne.container,children:pt.jsx(Lee,{})})}const Mne="_wrapper_170r6_1",Dne="_container_170r6_13",Pne="_errorInput_170r6_31",One="_errorMessage_170r6_39",Lne="_errorMessageContainer_170r6_47",kne="_circleRightCorner_170r6_61",Fne="_circleLeftCorner_170r6_85",Une="_circleCenter_170r6_107",Bne="_back_170r6_145",Xl={wrapper:Mne,container:Dne,errorInput:Pne,errorMessage:One,errorMessageContainer:Lne,circleRightCorner:kne,circleLeftCorner:Fne,circleCenter:Une,back:Bne},jne="_inputWrapper_1ufan_1",Zne="_symbol_1ufan_15",rF={inputWrapper:jne,symbol:Zne},Gne=({value:r})=>pt.jsx("div",{className:rF.inputWrapper,children:(r+" ".repeat(9-r.length)).split("").map((o,l)=>pt.jsx("div",{className:rF.symbol,children:o},l))}),qne="_keyboardWrapper_18oyi_1",Hne="_button_18oyi_17",fI={keyboardWrapper:qne,button:Hne,delete:"_delete_18oyi_35"},Kne=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M","Delete"]],Vne=({handleKeyPress:r})=>{function o(l){l.keyCode<91&&l.keyCode>47&&(r(l.key.toString().toUpperCase()),uu.setFocus(l.key.toString().toUpperCase()))}return ln.useEffect(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}),[]),pt.jsx("div",{className:fI.keyboardWrapper,children:Kne.map((l,f)=>pt.jsx("div",{children:l.map((p,S)=>pt.jsx(Qi,{className:"".concat(fI.button," ").concat(p==="Delete"?fI.delete:""),focusKey:p,selfFocus:!f&&!S,onClick:()=>{uu.setFocus(p),r(p)},children:p},p))},"keyboard_line_".concat(f)))})},zne=({ticketCode:r,handleTicketCodeEntry:o,setKeyboardSetup:l})=>{const[f,p]=ln.useState(r!=null?r:""),S=KU(),C=VU(),g=ln.useRef(r!=null?r:"");ln.useEffect(()=>{console.log("ticket.current",g.current),g.current.length===9&&o(f)},[f]);const w=b=>{if(b.name===_a.NEGOTIATE)switch(b.code){case 400:b.title=S("ticket-entry","error.toManyDevices.title"),b.message=S("ticket-entry","error.toManyDevices.body");break;case 401:b.title=S("ticket-entry","error.invalidCode.title"),b.message=S("ticket-entry","error.invalidCode.body");break;case 403:b.title=S("ticket-entry","error.codeNoLongerValid.title"),b.message=S("ticket-entry","error.codeNoLongerValid.body");break;case 404:b.title="Not Found",b.message="Ticket was not found";break}else if(b.name===_a.CONTENTFUL)switch(b.code){case 400:b.message="Could not fetch contentful environment"}return b.toString};function F(b){b==="Delete"?(g.current=g.current.slice(0,-1),p(g.current)):g.current.length<9&&(g.current=g.current+b,p(g.current))}return pt.jsxs("div",{className:Xl.wrapper,children:[pt.jsx("div",{className:Xl.circleRightCorner}),pt.jsx("div",{className:Xl.circleLeftCorner}),pt.jsx("div",{className:Xl.circleCenter}),pt.jsxs("div",{className:Xl.container,children:[pt.jsx("h1",{children:S("ticket-entry","enterCode.title")}),pt.jsx(Gne,{value:f}),pt.jsx("div",{className:Xl.errorMessageContainer,children:C.map((b,y)=>pt.jsx("h3",{className:Xl.errorMessage,children:w(b)},"".concat(b.name,"-error-").concat(y.toString())))}),pt.jsx(Vne,{handleKeyPress:F})]}),pt.jsx(Qi,{onClick:()=>{l(!1)},className:Xl.back,focusKey:"BACK",children:"Back"})]})};function Yne({handleTicketCodeEntry:r}){const o=Ps(),l=am(),f=Cz(),p=bf(),S=Bb(),[C,g]=ln.useState(!1),[w,F]=ln.useState(!1),[b,y]=ln.useState(!1),[v,D]=ln.useState(!1),[m,T]=ln.useState(),[U,N]=ln.useState(!1),[_,I]=ln.useState(!1),[R,Z]=ln.useState(!1),[z,W]=ln.useState(!1),[X,le]=ln.useState(!1),[x,$]=ln.useState(!1),[ce,oe]=ln.useState(""),[he,Ce]=ln.useState(),[Xe,Ae]=ln.useState(),Ze="".concat(Db,":").concat(_h);ln.useEffect(()=>{ce&&r(ce)},[ce]),ln.useEffect(()=>{if(S){const qe=S.find(ut=>ut.deviceId===_h);qe||(Z(!0),setTimeout(()=>{QB(p,!0).then(()=>{}).catch(()=>{})},1500)),Ce(qe||S[0])}},[S]),ln.useEffect(()=>{Ae(he==null?void 0:he.stateInfo.state)},[he]),ln.useEffect(()=>{if(!o)return;const qe=()=>{o.adjustedEndTime&&o.adjustedEndTime<Date.now()?y(!0):o.adjustedStartTime&&(y(!1),T(o.adjustedStartTime-Date.now()))},ut=At=>{F(At)};return o.on("startTimeUpdated",qe),o.on("playerLoadingState",ut),()=>{o.off("startTimeUpdated",qe),o.off("playerLoadingState",ut)}},[o]),ln.useEffect(()=>{if(!l)return;const qe=()=>{y(!0)};return l.on("eventEnded",qe),()=>{l.off("eventEnded",qe)}},[l]),ln.useEffect(()=>{if(!p)return;const qe=()=>{D(!0)};return p.on("eventCanceled",qe),()=>{p.off("eventCanceled",qe)}},[p]),ln.useEffect(()=>{if(!U)return;const qe=setTimeout(()=>{I(!0),N(!1)},1500);return()=>{clearTimeout(qe)}},[U]),ln.useEffect(()=>{if(m)if(m>0){g(!1);const qe=setTimeout(()=>{g(!0)},m);return()=>{clearTimeout(qe)}}else g(!0)},[m]),ln.useEffect(()=>{Xe==="hostTv"?(W(!0),N(!0)):f===oC.CONNECTED_STATE&&N(!0)},[Xe,f]);let nt;const lt=!z&&!Xe?x?"Q":"MENU":"LOGOUT";return v?nt=pt.jsx(gne,{}):b?nt=pt.jsx(QJ,{}):nt=pt.jsxs(pt.Fragment,{children:[!z&&!Xe&&!x&&pt.jsx(cne,{url:Ze,setKeyboardSetup:$}),!z&&!Xe&&x&&pt.jsx(zne,{ticketCode:ce,handleTicketCodeEntry:oe,setKeyboardSetup:$}),U&&!_&&pt.jsx(tF,{}),z&&_&&!R&&pt.jsxs("div",{children:[pt.jsx("div",{className:C?"":vte.hidden,children:pt.jsx(ste,{})}),(!C||X)&&pt.jsx(Yte,{timeToLive:m,isLive:C,backToShow:()=>{le(!1)}})]}),C&&!X&&w&&pt.jsx(Nne,{})]}),pt.jsxs(pt.Fragment,{children:[nt,R&&pt.jsx(tF,{isDisconnected:!0}),pt.jsx(bne,{goBackFromLive:()=>{le(!0)},showLobby:X,currentFocus:lt})]})}uu.init({debug:!1,shouldUseNativeEvents:!0});function Wne(){const r=localStorage.getItem("ticketCode"),[o,l]=ln.useState(r!=null?r:"");return pt.jsx("div",{className:gV.pageContainer,children:pt.jsx(Sz,{baseUrl:sV,preferredProfile:"dash-drm",contentfulAccessToken:lV,contentfulSpaceId:cV,ticketCodeProp:o,children:pt.jsx(Yne,{handleTicketCodeEntry:l})})})}dI.createRoot(document.getElementById("root")).render(pt.jsx(Wne,{}));export{$ne as __vite_legacy_guard};
