function Zz(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const w of p)if(w.type==="childList")for(const C of w.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&d(C)}).observe(document,{childList:!0,subtree:!0});function l(p){const w={};return p.integrity&&(w.integrity=p.integrity),p.referrerPolicy&&(w.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?w.credentials="include":p.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function d(p){if(p.ep)return;p.ep=!0;const w=l(p);fetch(p.href,w)}})();var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WA(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var bL={exports:{}},l0={},RL={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=Symbol.for("react.element"),dj=Symbol.for("react.portal"),hj=Symbol.for("react.fragment"),pj=Symbol.for("react.strict_mode"),gj=Symbol.for("react.profiler"),mj=Symbol.for("react.provider"),yj=Symbol.for("react.context"),vj=Symbol.for("react.forward_ref"),Ej=Symbol.for("react.suspense"),_j=Symbol.for("react.memo"),Tj=Symbol.for("react.lazy"),zM=Symbol.iterator;function Sj(o){return o===null||typeof o!="object"?null:(o=zM&&o[zM]||o["@@iterator"],typeof o=="function"?o:null)}var NL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xL=Object.assign,ML={};function nh(o,i,l){this.props=o,this.context=i,this.refs=ML,this.updater=l||NL}nh.prototype.isReactComponent={};nh.prototype.setState=function(o,i){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,i,"setState")};nh.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function DL(){}DL.prototype=nh.prototype;function XA(o,i,l){this.props=o,this.context=i,this.refs=ML,this.updater=l||NL}var $A=XA.prototype=new DL;$A.constructor=XA;xL($A,nh.prototype);$A.isPureReactComponent=!0;var YM=Array.isArray,PL=Object.prototype.hasOwnProperty,QA={current:null},OL={key:!0,ref:!0,__self:!0,__source:!0};function LL(o,i,l){var d,p={},w=null,C=null;if(i!=null)for(d in i.ref!==void 0&&(C=i.ref),i.key!==void 0&&(w=""+i.key),i)PL.call(i,d)&&!OL.hasOwnProperty(d)&&(p[d]=i[d]);var g=arguments.length-2;if(g===1)p.children=l;else if(1<g){for(var S=Array(g),F=0;F<g;F++)S[F]=arguments[F+2];p.children=S}if(o&&o.defaultProps)for(d in g=o.defaultProps,g)p[d]===void 0&&(p[d]=g[d]);return{$$typeof:Cg,type:o,key:w,ref:C,props:p,_owner:QA.current}}function wj(o,i){return{$$typeof:Cg,type:o.type,key:i,ref:o.ref,props:o.props,_owner:o._owner}}function JA(o){return typeof o=="object"&&o!==null&&o.$$typeof===Cg}function Aj(o){var i={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(l){return i[l]})}var WM=/\/+/g;function v1(o,i){return typeof o=="object"&&o!==null&&o.key!=null?Aj(""+o.key):i.toString(36)}function Av(o,i,l,d,p){var w=typeof o;(w==="undefined"||w==="boolean")&&(o=null);var C=!1;if(o===null)C=!0;else switch(w){case"string":case"number":C=!0;break;case"object":switch(o.$$typeof){case Cg:case dj:C=!0}}if(C)return C=o,p=p(C),o=d===""?"."+v1(C,0):d,YM(p)?(l="",o!=null&&(l=o.replace(WM,"$&/")+"/"),Av(p,i,l,"",function(F){return F})):p!=null&&(JA(p)&&(p=wj(p,l+(!p.key||C&&C.key===p.key?"":(""+p.key).replace(WM,"$&/")+"/")+o)),i.push(p)),1;if(C=0,d=d===""?".":d+":",YM(o))for(var g=0;g<o.length;g++){w=o[g];var S=d+v1(w,g);C+=Av(w,i,l,S,p)}else if(S=Sj(o),typeof S=="function")for(o=S.call(o),g=0;!(w=o.next()).done;)w=w.value,S=d+v1(w,g++),C+=Av(w,i,l,S,p);else if(w==="object")throw i=String(o),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return C}function rv(o,i,l){if(o==null)return o;var d=[],p=0;return Av(o,d,"","",function(w){return i.call(l,w,p++)}),d}function Ij(o){if(o._status===-1){var i=o._result;i=i(),i.then(function(l){(o._status===0||o._status===-1)&&(o._status=1,o._result=l)},function(l){(o._status===0||o._status===-1)&&(o._status=2,o._result=l)}),o._status===-1&&(o._status=0,o._result=i)}if(o._status===1)return o._result.default;throw o._result}var Ea={current:null},Iv={transition:null},Cj={ReactCurrentDispatcher:Ea,ReactCurrentBatchConfig:Iv,ReactCurrentOwner:QA};function kL(){throw Error("act(...) is not supported in production builds of React.")}Fr.Children={map:rv,forEach:function(o,i,l){rv(o,function(){i.apply(this,arguments)},l)},count:function(o){var i=0;return rv(o,function(){i++}),i},toArray:function(o){return rv(o,function(i){return i})||[]},only:function(o){if(!JA(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};Fr.Component=nh;Fr.Fragment=hj;Fr.Profiler=gj;Fr.PureComponent=XA;Fr.StrictMode=pj;Fr.Suspense=Ej;Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cj;Fr.act=kL;Fr.cloneElement=function(o,i,l){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var d=xL({},o.props),p=o.key,w=o.ref,C=o._owner;if(i!=null){if(i.ref!==void 0&&(w=i.ref,C=QA.current),i.key!==void 0&&(p=""+i.key),o.type&&o.type.defaultProps)var g=o.type.defaultProps;for(S in i)PL.call(i,S)&&!OL.hasOwnProperty(S)&&(d[S]=i[S]===void 0&&g!==void 0?g[S]:i[S])}var S=arguments.length-2;if(S===1)d.children=l;else if(1<S){g=Array(S);for(var F=0;F<S;F++)g[F]=arguments[F+2];d.children=g}return{$$typeof:Cg,type:o.type,key:p,ref:w,props:d,_owner:C}};Fr.createContext=function(o){return o={$$typeof:yj,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:mj,_context:o},o.Consumer=o};Fr.createElement=LL;Fr.createFactory=function(o){var i=LL.bind(null,o);return i.type=o,i};Fr.createRef=function(){return{current:null}};Fr.forwardRef=function(o){return{$$typeof:vj,render:o}};Fr.isValidElement=JA;Fr.lazy=function(o){return{$$typeof:Tj,_payload:{_status:-1,_result:o},_init:Ij}};Fr.memo=function(o,i){return{$$typeof:_j,type:o,compare:i===void 0?null:i}};Fr.startTransition=function(o){var i=Iv.transition;Iv.transition={};try{o()}finally{Iv.transition=i}};Fr.unstable_act=kL;Fr.useCallback=function(o,i){return Ea.current.useCallback(o,i)};Fr.useContext=function(o){return Ea.current.useContext(o)};Fr.useDebugValue=function(){};Fr.useDeferredValue=function(o){return Ea.current.useDeferredValue(o)};Fr.useEffect=function(o,i){return Ea.current.useEffect(o,i)};Fr.useId=function(){return Ea.current.useId()};Fr.useImperativeHandle=function(o,i,l){return Ea.current.useImperativeHandle(o,i,l)};Fr.useInsertionEffect=function(o,i){return Ea.current.useInsertionEffect(o,i)};Fr.useLayoutEffect=function(o,i){return Ea.current.useLayoutEffect(o,i)};Fr.useMemo=function(o,i){return Ea.current.useMemo(o,i)};Fr.useReducer=function(o,i,l){return Ea.current.useReducer(o,i,l)};Fr.useRef=function(o){return Ea.current.useRef(o)};Fr.useState=function(o){return Ea.current.useState(o)};Fr.useSyncExternalStore=function(o,i,l){return Ea.current.useSyncExternalStore(o,i,l)};Fr.useTransition=function(){return Ea.current.useTransition()};Fr.version="18.3.1";RL.exports=Fr;var vn=RL.exports;const $s=WA(vn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bj=vn,Rj=Symbol.for("react.element"),Nj=Symbol.for("react.fragment"),xj=Object.prototype.hasOwnProperty,Mj=bj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dj={key:!0,ref:!0,__self:!0,__source:!0};function FL(o,i,l){var d,p={},w=null,C=null;l!==void 0&&(w=""+l),i.key!==void 0&&(w=""+i.key),i.ref!==void 0&&(C=i.ref);for(d in i)xj.call(i,d)&&!Dj.hasOwnProperty(d)&&(p[d]=i[d]);if(o&&o.defaultProps)for(d in i=o.defaultProps,i)p[d]===void 0&&(p[d]=i[d]);return{$$typeof:Rj,type:o,key:w,ref:C,props:p,_owner:Mj.current}}l0.Fragment=Nj;l0.jsx=FL;l0.jsxs=FL;bL.exports=l0;var xt=bL.exports,Qw={},UL={exports:{}},cs={},BL={exports:{}},jL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function i(Ze,it){var lt=Ze.length;Ze.push(it);e:for(;0<lt;){var Xe=lt-1>>>1,st=Ze[Xe];if(0<p(st,it))Ze[Xe]=it,Ze[lt]=st,lt=Xe;else break e}}function l(Ze){return Ze.length===0?null:Ze[0]}function d(Ze){if(Ze.length===0)return null;var it=Ze[0],lt=Ze.pop();if(lt!==it){Ze[0]=lt;e:for(var Xe=0,st=Ze.length,wt=st>>>1;Xe<wt;){var Oe=2*(Xe+1)-1,Qe=Ze[Oe],ct=Oe+1,Qt=Ze[ct];if(0>p(Qe,lt))ct<st&&0>p(Qt,Qe)?(Ze[Xe]=Qt,Ze[ct]=lt,Xe=ct):(Ze[Xe]=Qe,Ze[Oe]=lt,Xe=Oe);else if(ct<st&&0>p(Qt,lt))Ze[Xe]=Qt,Ze[ct]=lt,Xe=ct;else break e}}return it}function p(Ze,it){var lt=Ze.sortIndex-it.sortIndex;return lt!==0?lt:Ze.id-it.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;o.unstable_now=function(){return w.now()}}else{var C=Date,g=C.now();o.unstable_now=function(){return C.now()-g}}var S=[],F=[],R=1,v=null,y=3,O=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ze){for(var it=l(F);it!==null;){if(it.callback===null)d(F);else if(it.startTime<=Ze)d(F),it.sortIndex=it.expirationTime,i(S,it);else break;it=l(F)}}function b(Ze){if(T=!1,I(Ze),!m)if(l(S)!==null)m=!0,$e(j);else{var it=l(F);it!==null&&Ae(b,it.startTime-Ze)}}function j(Ze,it){m=!1,T&&(T=!1,x(X),X=-1),O=!0;var lt=y;try{for(I(it),v=l(S);v!==null&&(!(v.expirationTime>it)||Ze&&!$());){var Xe=v.callback;if(typeof Xe=="function"){v.callback=null,y=v.priorityLevel;var st=Xe(v.expirationTime<=it);it=o.unstable_now(),typeof st=="function"?v.callback=st:v===l(S)&&d(S),I(it)}else d(S);v=l(S)}if(v!==null)var wt=!0;else{var Oe=l(F);Oe!==null&&Ae(b,Oe.startTime-it),wt=!1}return wt}finally{v=null,y=lt,O=!1}}var Y=!1,W=null,X=-1,se=5,N=-1;function $(){return!(o.unstable_now()-N<se)}function ce(){if(W!==null){var Ze=o.unstable_now();N=Ze;var it=!0;try{it=W(!0,Ze)}finally{it?oe():(Y=!1,W=null)}}else Y=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,be=ye.port2;ye.port1.onmessage=ce,oe=function(){be.postMessage(null)}}else oe=function(){U(ce,0)};function $e(Ze){W=Ze,Y||(Y=!0,oe())}function Ae(Ze,it){X=U(function(){Ze(o.unstable_now())},it)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Ze){Ze.callback=null},o.unstable_continueExecution=function(){m||O||(m=!0,$e(j))},o.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<Ze?Math.floor(1e3/Ze):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_getFirstCallbackNode=function(){return l(S)},o.unstable_next=function(Ze){switch(y){case 1:case 2:case 3:var it=3;break;default:it=y}var lt=y;y=it;try{return Ze()}finally{y=lt}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Ze,it){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var lt=y;y=Ze;try{return it()}finally{y=lt}},o.unstable_scheduleCallback=function(Ze,it,lt){var Xe=o.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?Xe+lt:Xe):lt=Xe,Ze){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=lt+st,Ze={id:R++,callback:it,priorityLevel:Ze,startTime:lt,expirationTime:st,sortIndex:-1},lt>Xe?(Ze.sortIndex=lt,i(F,Ze),l(S)===null&&Ze===l(F)&&(T?(x(X),X=-1):T=!0,Ae(b,lt-Xe))):(Ze.sortIndex=st,i(S,Ze),m||O||(m=!0,$e(j))),Ze},o.unstable_shouldYield=$,o.unstable_wrapCallback=function(Ze){var it=y;return function(){var lt=y;y=it;try{return Ze.apply(this,arguments)}finally{y=lt}}}})(jL);BL.exports=jL;var Pj=BL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oj=vn,ls=Pj;function jn(o){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+o,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+o+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZL=new Set,og={};function lf(o,i){zd(o,i),zd(o+"Capture",i)}function zd(o,i){for(og[o]=i,o=0;o<i.length;o++)ZL.add(i[o])}var fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jw=Object.prototype.hasOwnProperty,Lj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XM={},$M={};function kj(o){return Jw.call($M,o)?!0:Jw.call(XM,o)?!1:Lj.test(o)?$M[o]=!0:(XM[o]=!0,!1)}function Fj(o,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function Uj(o,i,l,d){if(i===null||typeof i>"u"||Fj(o,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function _a(o,i,l,d,p,w,C){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=o,this.type=i,this.sanitizeURL=w,this.removeEmptyString=C}var Zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Zo[o]=new _a(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var i=o[0];Zo[i]=new _a(i,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){Zo[o]=new _a(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Zo[o]=new _a(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Zo[o]=new _a(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){Zo[o]=new _a(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){Zo[o]=new _a(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){Zo[o]=new _a(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){Zo[o]=new _a(o,5,!1,o.toLowerCase(),null,!1,!1)});var eI=/[\-:]([a-z])/g;function tI(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var i=o.replace(eI,tI);Zo[i]=new _a(i,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var i=o.replace(eI,tI);Zo[i]=new _a(i,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var i=o.replace(eI,tI);Zo[i]=new _a(i,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){Zo[o]=new _a(o,1,!1,o.toLowerCase(),null,!1,!1)});Zo.xlinkHref=new _a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){Zo[o]=new _a(o,1,!1,o.toLowerCase(),null,!0,!0)});function nI(o,i,l,d){var p=Zo.hasOwnProperty(i)?Zo[i]:null;(p!==null?p.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Uj(i,l,p,d)&&(l=null),d||p===null?kj(i)&&(l===null?o.removeAttribute(i):o.setAttribute(i,""+l)):p.mustUseProperty?o[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,d=p.attributeNamespace,l===null?o.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?o.setAttributeNS(d,i,l):o.setAttribute(i,l))))}var gl=Oj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,iv=Symbol.for("react.element"),Rd=Symbol.for("react.portal"),Nd=Symbol.for("react.fragment"),rI=Symbol.for("react.strict_mode"),eA=Symbol.for("react.profiler"),GL=Symbol.for("react.provider"),qL=Symbol.for("react.context"),iI=Symbol.for("react.forward_ref"),tA=Symbol.for("react.suspense"),nA=Symbol.for("react.suspense_list"),oI=Symbol.for("react.memo"),Gl=Symbol.for("react.lazy"),HL=Symbol.for("react.offscreen"),QM=Symbol.iterator;function Dp(o){return o===null||typeof o!="object"?null:(o=QM&&o[QM]||o["@@iterator"],typeof o=="function"?o:null)}var Ki=Object.assign,E1;function Gp(o){if(E1===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);E1=i&&i[1]||""}return"\n"+E1+o}var _1=!1;function T1(o,i){if(!o||_1)return"";_1=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(F){var d=F}Reflect.construct(o,[],i)}else{try{i.call()}catch(F){d=F}o.call(i.prototype)}else{try{throw Error()}catch(F){d=F}o()}}catch(F){if(F&&d&&typeof F.stack=="string"){for(var p=F.stack.split("\n"),w=d.stack.split("\n"),C=p.length-1,g=w.length-1;1<=C&&0<=g&&p[C]!==w[g];)g--;for(;1<=C&&0<=g;C--,g--)if(p[C]!==w[g]){if(C!==1||g!==1)do if(C--,g--,0>g||p[C]!==w[g]){var S="\n"+p[C].replace(" at new "," at ");return o.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",o.displayName)),S}while(1<=C&&0<=g);break}}}finally{_1=!1,Error.prepareStackTrace=l}return(o=o?o.displayName||o.name:"")?Gp(o):""}function Bj(o){switch(o.tag){case 5:return Gp(o.type);case 16:return Gp("Lazy");case 13:return Gp("Suspense");case 19:return Gp("SuspenseList");case 0:case 2:case 15:return o=T1(o.type,!1),o;case 11:return o=T1(o.type.render,!1),o;case 1:return o=T1(o.type,!0),o;default:return""}}function rA(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Nd:return"Fragment";case Rd:return"Portal";case eA:return"Profiler";case rI:return"StrictMode";case tA:return"Suspense";case nA:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case qL:return(o.displayName||"Context")+".Consumer";case GL:return(o._context.displayName||"Context")+".Provider";case iI:var i=o.render;return o=o.displayName,o||(o=i.displayName||i.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case oI:return i=o.displayName||null,i!==null?i:rA(o.type)||"Memo";case Gl:i=o._payload,o=o._init;try{return rA(o(i))}catch(l){}}return null}function jj(o){var i=o.type;switch(o.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=i.render,o=o.displayName||o.name||"",i.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rA(i);case 8:return i===rI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function nc(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function VL(o){var i=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Zj(o){var i=VL(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,i),d=""+o[i];if(!o.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,w=l.set;return Object.defineProperty(o,i,{configurable:!0,get:function(){return p.call(this)},set:function(C){d=""+C,w.call(this,C)}}),Object.defineProperty(o,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){o._valueTracker=null,delete o[i]}}}}function ov(o){o._valueTracker||(o._valueTracker=Zj(o))}function KL(o){if(!o)return!1;var i=o._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return o&&(d=VL(o)?o.checked?"true":"false":o.value),o=d,o!==l?(i.setValue(o),!0):!1}function kv(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch(i){return o.body}}function iA(o,i){var l=i.checked;return Ki({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:o._wrapperState.initialChecked})}function JM(o,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=nc(i.value!=null?i.value:l),o._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function zL(o,i){i=i.checked,i!=null&&nI(o,"checked",i,!1)}function oA(o,i){zL(o,i);var l=nc(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+l):o.value!==""+l&&(o.value=""+l);else if(d==="submit"||d==="reset"){o.removeAttribute("value");return}i.hasOwnProperty("value")?aA(o,i.type,l):i.hasOwnProperty("defaultValue")&&aA(o,i.type,nc(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(o.defaultChecked=!!i.defaultChecked)}function e2(o,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+o._wrapperState.initialValue,l||i===o.value||(o.value=i),o.defaultValue=i}l=o.name,l!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,l!==""&&(o.name=l)}function aA(o,i,l){(i!=="number"||kv(o.ownerDocument)!==o)&&(l==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+l&&(o.defaultValue=""+l))}var qp=Array.isArray;function Zd(o,i,l,d){if(o=o.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<o.length;l++)p=i.hasOwnProperty("$"+o[l].value),o[l].selected!==p&&(o[l].selected=p),p&&d&&(o[l].defaultSelected=!0)}else{for(l=""+nc(l),i=null,p=0;p<o.length;p++){if(o[p].value===l){o[p].selected=!0,d&&(o[p].defaultSelected=!0);return}i!==null||o[p].disabled||(i=o[p])}i!==null&&(i.selected=!0)}}function sA(o,i){if(i.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Ki({},i,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function t2(o,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(jn(92));if(qp(l)){if(1<l.length)throw Error(jn(93));l=l[0]}i=l}i==null&&(i=""),l=i}o._wrapperState={initialValue:nc(l)}}function YL(o,i){var l=nc(i.value),d=nc(i.defaultValue);l!=null&&(l=""+l,l!==o.value&&(o.value=l),i.defaultValue==null&&o.defaultValue!==l&&(o.defaultValue=l)),d!=null&&(o.defaultValue=""+d)}function n2(o){var i=o.textContent;i===o._wrapperState.initialValue&&i!==""&&i!==null&&(o.value=i)}function WL(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uA(o,i){return o==null||o==="http://www.w3.org/1999/xhtml"?WL(i):o==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var av,XL=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,p){MSApp.execUnsafeLocalFunction(function(){return o(i,l,d,p)})}:o}(function(o,i){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=i;else{for(av=av||document.createElement("div"),av.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=av.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;i.firstChild;)o.appendChild(i.firstChild)}});function ag(o,i){if(i){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=i;return}}o.textContent=i}var Wp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gj=["Webkit","ms","Moz","O"];Object.keys(Wp).forEach(function(o){Gj.forEach(function(i){i=i+o.charAt(0).toUpperCase()+o.substring(1),Wp[i]=Wp[o]})});function $L(o,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Wp.hasOwnProperty(o)&&Wp[o]?(""+i).trim():i+"px"}function QL(o,i){o=o.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=$L(l,i[l],d);l==="float"&&(l="cssFloat"),d?o.setProperty(l,p):o[l]=p}}var qj=Ki({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lA(o,i){if(i){if(qj[o]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(jn(137,o));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(jn(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(jn(61))}if(i.style!=null&&typeof i.style!="object")throw Error(jn(62))}}function cA(o,i){if(o.indexOf("-")===-1)return typeof i.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fA=null;function aI(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var dA=null,Gd=null,qd=null;function r2(o){if(o=Ng(o)){if(typeof dA!="function")throw Error(jn(280));var i=o.stateNode;i&&(i=p0(i),dA(o.stateNode,o.type,i))}}function JL(o){Gd?qd?qd.push(o):qd=[o]:Gd=o}function ek(){if(Gd){var o=Gd,i=qd;if(qd=Gd=null,r2(o),i)for(o=0;o<i.length;o++)r2(i[o])}}function tk(o,i){return o(i)}function nk(){}var S1=!1;function rk(o,i,l){if(S1)return o(i,l);S1=!0;try{return tk(o,i,l)}finally{S1=!1,(Gd!==null||qd!==null)&&(nk(),ek())}}function sg(o,i){var l=o.stateNode;if(l===null)return null;var d=p0(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(jn(231,i,typeof l));return l}var hA=!1;if(fl)try{var Pp={};Object.defineProperty(Pp,"passive",{get:function(){hA=!0}}),window.addEventListener("test",Pp,Pp),window.removeEventListener("test",Pp,Pp)}catch(o){hA=!1}function Hj(o,i,l,d,p,w,C,g,S){var F=Array.prototype.slice.call(arguments,3);try{i.apply(l,F)}catch(R){this.onError(R)}}var Xp=!1,Fv=null,Uv=!1,pA=null,Vj={onError:function(o){Xp=!0,Fv=o}};function Kj(o,i,l,d,p,w,C,g,S){Xp=!1,Fv=null,Hj.apply(Vj,arguments)}function zj(o,i,l,d,p,w,C,g,S){if(Kj.apply(this,arguments),Xp){if(Xp){var F=Fv;Xp=!1,Fv=null}else throw Error(jn(198));Uv||(Uv=!0,pA=F)}}function cf(o){var i=o,l=o;if(o.alternate)for(;i.return;)i=i.return;else{o=i;do i=o,i.flags&4098&&(l=i.return),o=i.return;while(o)}return i.tag===3?l:null}function ik(o){if(o.tag===13){var i=o.memoizedState;if(i===null&&(o=o.alternate,o!==null&&(i=o.memoizedState)),i!==null)return i.dehydrated}return null}function i2(o){if(cf(o)!==o)throw Error(jn(188))}function Yj(o){var i=o.alternate;if(!i){if(i=cf(o),i===null)throw Error(jn(188));return i!==o?null:o}for(var l=o,d=i;;){var p=l.return;if(p===null)break;var w=p.alternate;if(w===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===w.child){for(w=p.child;w;){if(w===l)return i2(p),o;if(w===d)return i2(p),i;w=w.sibling}throw Error(jn(188))}if(l.return!==d.return)l=p,d=w;else{for(var C=!1,g=p.child;g;){if(g===l){C=!0,l=p,d=w;break}if(g===d){C=!0,d=p,l=w;break}g=g.sibling}if(!C){for(g=w.child;g;){if(g===l){C=!0,l=w,d=p;break}if(g===d){C=!0,d=w,l=p;break}g=g.sibling}if(!C)throw Error(jn(189))}}if(l.alternate!==d)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?o:i}function ok(o){return o=Yj(o),o!==null?ak(o):null}function ak(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var i=ak(o);if(i!==null)return i;o=o.sibling}return null}var sk=ls.unstable_scheduleCallback,o2=ls.unstable_cancelCallback,Wj=ls.unstable_shouldYield,Xj=ls.unstable_requestPaint,lo=ls.unstable_now,$j=ls.unstable_getCurrentPriorityLevel,sI=ls.unstable_ImmediatePriority,uk=ls.unstable_UserBlockingPriority,Bv=ls.unstable_NormalPriority,Qj=ls.unstable_LowPriority,lk=ls.unstable_IdlePriority,c0=null,Au=null;function Jj(o){if(Au&&typeof Au.onCommitFiberRoot=="function")try{Au.onCommitFiberRoot(c0,o,void 0,(o.current.flags&128)===128)}catch(i){}}var Js=Math.clz32?Math.clz32:nZ,eZ=Math.log,tZ=Math.LN2;function nZ(o){return o>>>=0,o===0?32:31-(eZ(o)/tZ|0)|0}var sv=64,uv=4194304;function Hp(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function jv(o,i){var l=o.pendingLanes;if(l===0)return 0;var d=0,p=o.suspendedLanes,w=o.pingedLanes,C=l&268435455;if(C!==0){var g=C&~p;g!==0?d=Hp(g):(w&=C,w!==0&&(d=Hp(w)))}else C=l&~p,C!==0?d=Hp(C):w!==0&&(d=Hp(w));if(d===0)return 0;if(i!==0&&i!==d&&!(i&p)&&(p=d&-d,w=i&-i,p>=w||p===16&&(w&4194240)!==0))return i;if(d&4&&(d|=l&16),i=o.entangledLanes,i!==0)for(o=o.entanglements,i&=d;0<i;)l=31-Js(i),p=1<<l,d|=o[l],i&=~p;return d}function rZ(o,i){switch(o){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iZ(o,i){for(var l=o.suspendedLanes,d=o.pingedLanes,p=o.expirationTimes,w=o.pendingLanes;0<w;){var C=31-Js(w),g=1<<C,S=p[C];S===-1?(!(g&l)||g&d)&&(p[C]=rZ(g,i)):S<=i&&(o.expiredLanes|=g),w&=~g}}function gA(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ck(){var o=sv;return sv<<=1,!(sv&4194240)&&(sv=64),o}function w1(o){for(var i=[],l=0;31>l;l++)i.push(o);return i}function bg(o,i,l){o.pendingLanes|=i,i!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,i=31-Js(i),o[i]=l}function oZ(o,i){var l=o.pendingLanes&~i;o.pendingLanes=i,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=i,o.mutableReadLanes&=i,o.entangledLanes&=i,i=o.entanglements;var d=o.eventTimes;for(o=o.expirationTimes;0<l;){var p=31-Js(l),w=1<<p;i[p]=0,d[p]=-1,o[p]=-1,l&=~w}}function uI(o,i){var l=o.entangledLanes|=i;for(o=o.entanglements;l;){var d=31-Js(l),p=1<<d;p&i|o[d]&i&&(o[d]|=i),l&=~p}}var di=0;function fk(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var dk,lI,hk,pk,gk,mA=!1,lv=[],Yl=null,Wl=null,Xl=null,ug=new Map,lg=new Map,Hl=[],aZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a2(o,i){switch(o){case"focusin":case"focusout":Yl=null;break;case"dragenter":case"dragleave":Wl=null;break;case"mouseover":case"mouseout":Xl=null;break;case"pointerover":case"pointerout":ug.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":lg.delete(i.pointerId)}}function Op(o,i,l,d,p,w){return o===null||o.nativeEvent!==w?(o={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[p]},i!==null&&(i=Ng(i),i!==null&&lI(i)),o):(o.eventSystemFlags|=d,i=o.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),o)}function sZ(o,i,l,d,p){switch(i){case"focusin":return Yl=Op(Yl,o,i,l,d,p),!0;case"dragenter":return Wl=Op(Wl,o,i,l,d,p),!0;case"mouseover":return Xl=Op(Xl,o,i,l,d,p),!0;case"pointerover":var w=p.pointerId;return ug.set(w,Op(ug.get(w)||null,o,i,l,d,p)),!0;case"gotpointercapture":return w=p.pointerId,lg.set(w,Op(lg.get(w)||null,o,i,l,d,p)),!0}return!1}function mk(o){var i=zc(o.target);if(i!==null){var l=cf(i);if(l!==null){if(i=l.tag,i===13){if(i=ik(l),i!==null){o.blockedOn=i,gk(o.priority,function(){hk(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Cv(o){if(o.blockedOn!==null)return!1;for(var i=o.targetContainers;0<i.length;){var l=yA(o.domEventName,o.eventSystemFlags,i[0],o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);fA=d,l.target.dispatchEvent(d),fA=null}else return i=Ng(l),i!==null&&lI(i),o.blockedOn=l,!1;i.shift()}return!0}function s2(o,i,l){Cv(o)&&l.delete(i)}function uZ(){mA=!1,Yl!==null&&Cv(Yl)&&(Yl=null),Wl!==null&&Cv(Wl)&&(Wl=null),Xl!==null&&Cv(Xl)&&(Xl=null),ug.forEach(s2),lg.forEach(s2)}function Lp(o,i){o.blockedOn===i&&(o.blockedOn=null,mA||(mA=!0,ls.unstable_scheduleCallback(ls.unstable_NormalPriority,uZ)))}function cg(o){function i(p){return Lp(p,o)}if(0<lv.length){Lp(lv[0],o);for(var l=1;l<lv.length;l++){var d=lv[l];d.blockedOn===o&&(d.blockedOn=null)}}for(Yl!==null&&Lp(Yl,o),Wl!==null&&Lp(Wl,o),Xl!==null&&Lp(Xl,o),ug.forEach(i),lg.forEach(i),l=0;l<Hl.length;l++)d=Hl[l],d.blockedOn===o&&(d.blockedOn=null);for(;0<Hl.length&&(l=Hl[0],l.blockedOn===null);)mk(l),l.blockedOn===null&&Hl.shift()}var Hd=gl.ReactCurrentBatchConfig,Zv=!0;function lZ(o,i,l,d){var p=di,w=Hd.transition;Hd.transition=null;try{di=1,cI(o,i,l,d)}finally{di=p,Hd.transition=w}}function cZ(o,i,l,d){var p=di,w=Hd.transition;Hd.transition=null;try{di=4,cI(o,i,l,d)}finally{di=p,Hd.transition=w}}function cI(o,i,l,d){if(Zv){var p=yA(o,i,l,d);if(p===null)P1(o,i,d,Gv,l),a2(o,d);else if(sZ(p,o,i,l,d))d.stopPropagation();else if(a2(o,d),i&4&&-1<aZ.indexOf(o)){for(;p!==null;){var w=Ng(p);if(w!==null&&dk(w),w=yA(o,i,l,d),w===null&&P1(o,i,d,Gv,l),w===p)break;p=w}p!==null&&d.stopPropagation()}else P1(o,i,d,null,l)}}var Gv=null;function yA(o,i,l,d){if(Gv=null,o=aI(d),o=zc(o),o!==null)if(i=cf(o),i===null)o=null;else if(l=i.tag,l===13){if(o=ik(i),o!==null)return o;o=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null);return Gv=o,null}function yk(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($j()){case sI:return 1;case uk:return 4;case Bv:case Qj:return 16;case lk:return 536870912;default:return 16}default:return 16}}var Kl=null,fI=null,bv=null;function vk(){if(bv)return bv;var o,i=fI,l=i.length,d,p="value"in Kl?Kl.value:Kl.textContent,w=p.length;for(o=0;o<l&&i[o]===p[o];o++);var C=l-o;for(d=1;d<=C&&i[l-d]===p[w-d];d++);return bv=p.slice(o,1<d?1-d:void 0)}function Rv(o){var i=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&i===13&&(o=13)):o=i,o===10&&(o=13),32<=o||o===13?o:0}function cv(){return!0}function u2(){return!1}function fs(o){function i(l,d,p,w,C){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var g in o)o.hasOwnProperty(g)&&(l=o[g],this[g]=l?l(w):w[g]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?cv:u2,this.isPropagationStopped=u2,this}return Ki(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=cv)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=cv)},persist:function(){},isPersistent:cv}),i}var rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dI=fs(rh),Rg=Ki({},rh,{view:0,detail:0}),fZ=fs(Rg),A1,I1,kp,f0=Ki({},Rg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hI,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==kp&&(kp&&o.type==="mousemove"?(A1=o.screenX-kp.screenX,I1=o.screenY-kp.screenY):I1=A1=0,kp=o),A1)},movementY:function(o){return"movementY"in o?o.movementY:I1}}),l2=fs(f0),dZ=Ki({},f0,{dataTransfer:0}),hZ=fs(dZ),pZ=Ki({},Rg,{relatedTarget:0}),C1=fs(pZ),gZ=Ki({},rh,{animationName:0,elapsedTime:0,pseudoElement:0}),mZ=fs(gZ),yZ=Ki({},rh,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),vZ=fs(yZ),EZ=Ki({},rh,{data:0}),c2=fs(EZ),_Z={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wZ(o){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(o):(o=SZ[o])?!!i[o]:!1}function hI(){return wZ}var AZ=Ki({},Rg,{key:function(o){if(o.key){var i=_Z[o.key]||o.key;if(i!=="Unidentified")return i}return o.type==="keypress"?(o=Rv(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?TZ[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hI,charCode:function(o){return o.type==="keypress"?Rv(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Rv(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),IZ=fs(AZ),CZ=Ki({},f0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f2=fs(CZ),bZ=Ki({},Rg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hI}),RZ=fs(bZ),NZ=Ki({},rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),xZ=fs(NZ),MZ=Ki({},f0,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),DZ=fs(MZ),PZ=[9,13,27,32],pI=fl&&"CompositionEvent"in window,$p=null;fl&&"documentMode"in document&&($p=document.documentMode);var OZ=fl&&"TextEvent"in window&&!$p,Ek=fl&&(!pI||$p&&8<$p&&11>=$p),d2=" ",h2=!1;function _k(o,i){switch(o){case"keyup":return PZ.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tk(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var xd=!1;function LZ(o,i){switch(o){case"compositionend":return Tk(i);case"keypress":return i.which!==32?null:(h2=!0,d2);case"textInput":return o=i.data,o===d2&&h2?null:o;default:return null}}function kZ(o,i){if(xd)return o==="compositionend"||!pI&&_k(o,i)?(o=vk(),bv=fI=Kl=null,xd=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ek&&i.locale!=="ko"?null:i.data;default:return null}}var FZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p2(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i==="input"?!!FZ[o.type]:i==="textarea"}function Sk(o,i,l,d){JL(d),i=qv(i,"onChange"),0<i.length&&(l=new dI("onChange","change",null,l,d),o.push({event:l,listeners:i}))}var Qp=null,fg=null;function UZ(o){Pk(o,0)}function d0(o){var i=Pd(o);if(KL(i))return o}function BZ(o,i){if(o==="change")return i}var wk=!1;if(fl){var b1;if(fl){var R1="oninput"in document;if(!R1){var g2=document.createElement("div");g2.setAttribute("oninput","return;"),R1=typeof g2.oninput=="function"}b1=R1}else b1=!1;wk=b1&&(!document.documentMode||9<document.documentMode)}function m2(){Qp&&(Qp.detachEvent("onpropertychange",Ak),fg=Qp=null)}function Ak(o){if(o.propertyName==="value"&&d0(fg)){var i=[];Sk(i,fg,o,aI(o)),rk(UZ,i)}}function jZ(o,i,l){o==="focusin"?(m2(),Qp=i,fg=l,Qp.attachEvent("onpropertychange",Ak)):o==="focusout"&&m2()}function ZZ(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return d0(fg)}function GZ(o,i){if(o==="click")return d0(i)}function qZ(o,i){if(o==="input"||o==="change")return d0(i)}function HZ(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var tu=typeof Object.is=="function"?Object.is:HZ;function dg(o,i){if(tu(o,i))return!0;if(typeof o!="object"||o===null||typeof i!="object"||i===null)return!1;var l=Object.keys(o),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!Jw.call(i,p)||!tu(o[p],i[p]))return!1}return!0}function y2(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function v2(o,i){var l=y2(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=i&&d>=i)return{node:l,offset:i-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=y2(l)}}function Ik(o,i){return o&&i?o===i?!0:o&&o.nodeType===3?!1:i&&i.nodeType===3?Ik(o,i.parentNode):"contains"in o?o.contains(i):o.compareDocumentPosition?!!(o.compareDocumentPosition(i)&16):!1:!1}function Ck(){for(var o=window,i=kv();i instanceof o.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch(d){l=!1}if(l)o=i.contentWindow;else break;i=kv(o.document)}return i}function gI(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i&&(i==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||i==="textarea"||o.contentEditable==="true")}function VZ(o){var i=Ck(),l=o.focusedElem,d=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&Ik(l.ownerDocument.documentElement,l)){if(d!==null&&gI(l)){if(i=d.start,o=d.end,o===void 0&&(o=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(o,l.value.length);else if(o=(i=l.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var p=l.textContent.length,w=Math.min(d.start,p);d=d.end===void 0?w:Math.min(d.end,p),!o.extend&&w>d&&(p=d,d=w,w=p),p=v2(l,w);var C=v2(l,d);p&&C&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==C.node||o.focusOffset!==C.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),o.removeAllRanges(),w>d?(o.addRange(i),o.extend(C.node,C.offset)):(i.setEnd(C.node,C.offset),o.addRange(i)))}}for(i=[],o=l;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)o=i[l],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var KZ=fl&&"documentMode"in document&&11>=document.documentMode,Md=null,vA=null,Jp=null,EA=!1;function E2(o,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;EA||Md==null||Md!==kv(d)||(d=Md,"selectionStart"in d&&gI(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Jp&&dg(Jp,d)||(Jp=d,d=qv(vA,"onSelect"),0<d.length&&(i=new dI("onSelect","select",null,i,l),o.push({event:i,listeners:d}),i.target=Md)))}function fv(o,i){var l={};return l[o.toLowerCase()]=i.toLowerCase(),l["Webkit"+o]="webkit"+i,l["Moz"+o]="moz"+i,l}var Dd={animationend:fv("Animation","AnimationEnd"),animationiteration:fv("Animation","AnimationIteration"),animationstart:fv("Animation","AnimationStart"),transitionend:fv("Transition","TransitionEnd")},N1={},bk={};fl&&(bk=document.createElement("div").style,"AnimationEvent"in window||(delete Dd.animationend.animation,delete Dd.animationiteration.animation,delete Dd.animationstart.animation),"TransitionEvent"in window||delete Dd.transitionend.transition);function h0(o){if(N1[o])return N1[o];if(!Dd[o])return o;var i=Dd[o],l;for(l in i)if(i.hasOwnProperty(l)&&l in bk)return N1[o]=i[l];return o}var Rk=h0("animationend"),Nk=h0("animationiteration"),xk=h0("animationstart"),Mk=h0("transitionend"),Dk=new Map,_2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ic(o,i){Dk.set(o,i),lf(i,[o])}for(var x1=0;x1<_2.length;x1++){var M1=_2[x1],zZ=M1.toLowerCase(),YZ=M1[0].toUpperCase()+M1.slice(1);ic(zZ,"on"+YZ)}ic(Rk,"onAnimationEnd");ic(Nk,"onAnimationIteration");ic(xk,"onAnimationStart");ic("dblclick","onDoubleClick");ic("focusin","onFocus");ic("focusout","onBlur");ic(Mk,"onTransitionEnd");zd("onMouseEnter",["mouseout","mouseover"]);zd("onMouseLeave",["mouseout","mouseover"]);zd("onPointerEnter",["pointerout","pointerover"]);zd("onPointerLeave",["pointerout","pointerover"]);lf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lf("onBeforeInput",["compositionend","keypress","textInput","paste"]);lf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vp));function T2(o,i,l){var d=o.type||"unknown-event";o.currentTarget=l,zj(d,i,void 0,o),o.currentTarget=null}function Pk(o,i){i=(i&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],p=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var C=d.length-1;0<=C;C--){var g=d[C],S=g.instance,F=g.currentTarget;if(g=g.listener,S!==w&&p.isPropagationStopped())break e;T2(p,g,F),w=S}else for(C=0;C<d.length;C++){if(g=d[C],S=g.instance,F=g.currentTarget,g=g.listener,S!==w&&p.isPropagationStopped())break e;T2(p,g,F),w=S}}}if(Uv)throw o=pA,Uv=!1,pA=null,o}function Ni(o,i){var l=i[AA];l===void 0&&(l=i[AA]=new Set);var d=o+"__bubble";l.has(d)||(Ok(i,o,2,!1),l.add(d))}function D1(o,i,l){var d=0;i&&(d|=4),Ok(l,o,d,i)}var dv="_reactListening"+Math.random().toString(36).slice(2);function hg(o){if(!o[dv]){o[dv]=!0,ZL.forEach(function(l){l!=="selectionchange"&&(WZ.has(l)||D1(l,!1,o),D1(l,!0,o))});var i=o.nodeType===9?o:o.ownerDocument;i===null||i[dv]||(i[dv]=!0,D1("selectionchange",!1,i))}}function Ok(o,i,l,d){switch(yk(i)){case 1:var p=lZ;break;case 4:p=cZ;break;default:p=cI}l=p.bind(null,i,l,o),p=void 0,!hA||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?o.addEventListener(i,l,{capture:!0,passive:p}):o.addEventListener(i,l,!0):p!==void 0?o.addEventListener(i,l,{passive:p}):o.addEventListener(i,l,!1)}function P1(o,i,l,d,p){var w=d;if(!(i&1)&&!(i&2)&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var g=d.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(C===4)for(C=d.return;C!==null;){var S=C.tag;if((S===3||S===4)&&(S=C.stateNode.containerInfo,S===p||S.nodeType===8&&S.parentNode===p))return;C=C.return}for(;g!==null;){if(C=zc(g),C===null)return;if(S=C.tag,S===5||S===6){d=w=C;continue e}g=g.parentNode}}d=d.return}rk(function(){var F=w,R=aI(l),v=[];e:{var y=Dk.get(o);if(y!==void 0){var O=dI,m=o;switch(o){case"keypress":if(Rv(l)===0)break e;case"keydown":case"keyup":O=IZ;break;case"focusin":m="focus",O=C1;break;case"focusout":m="blur",O=C1;break;case"beforeblur":case"afterblur":O=C1;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=l2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=hZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=RZ;break;case Rk:case Nk:case xk:O=mZ;break;case Mk:O=xZ;break;case"scroll":O=fZ;break;case"wheel":O=DZ;break;case"copy":case"cut":case"paste":O=vZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=f2}var T=(i&4)!==0,U=!T&&o==="scroll",x=T?y!==null?y+"Capture":null:y;T=[];for(var _=F,I;_!==null;){I=_;var b=I.stateNode;if(I.tag===5&&b!==null&&(I=b,x!==null&&(b=sg(_,x),b!=null&&T.push(pg(_,b,I)))),U)break;_=_.return}0<T.length&&(y=new O(y,m,null,l,R),v.push({event:y,listeners:T}))}}if(!(i&7)){e:{if(y=o==="mouseover"||o==="pointerover",O=o==="mouseout"||o==="pointerout",y&&l!==fA&&(m=l.relatedTarget||l.fromElement)&&(zc(m)||m[dl]))break e;if((O||y)&&(y=R.window===R?R:(y=R.ownerDocument)?y.defaultView||y.parentWindow:window,O?(m=l.relatedTarget||l.toElement,O=F,m=m?zc(m):null,m!==null&&(U=cf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(O=null,m=F),O!==m)){if(T=l2,b="onMouseLeave",x="onMouseEnter",_="mouse",(o==="pointerout"||o==="pointerover")&&(T=f2,b="onPointerLeave",x="onPointerEnter",_="pointer"),U=O==null?y:Pd(O),I=m==null?y:Pd(m),y=new T(b,_+"leave",O,l,R),y.target=U,y.relatedTarget=I,b=null,zc(R)===F&&(T=new T(x,_+"enter",m,l,R),T.target=I,T.relatedTarget=U,b=T),U=b,O&&m)t:{for(T=O,x=m,_=0,I=T;I;I=Id(I))_++;for(I=0,b=x;b;b=Id(b))I++;for(;0<_-I;)T=Id(T),_--;for(;0<I-_;)x=Id(x),I--;for(;_--;){if(T===x||x!==null&&T===x.alternate)break t;T=Id(T),x=Id(x)}T=null}else T=null;O!==null&&S2(v,y,O,T,!1),m!==null&&U!==null&&S2(v,U,m,T,!0)}}e:{if(y=F?Pd(F):window,O=y.nodeName&&y.nodeName.toLowerCase(),O==="select"||O==="input"&&y.type==="file")var j=BZ;else if(p2(y))if(wk)j=qZ;else{j=ZZ;var Y=jZ}else(O=y.nodeName)&&O.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(j=GZ);if(j&&(j=j(o,F))){Sk(v,j,l,R);break e}Y&&Y(o,y,F),o==="focusout"&&(Y=y._wrapperState)&&Y.controlled&&y.type==="number"&&aA(y,"number",y.value)}switch(Y=F?Pd(F):window,o){case"focusin":(p2(Y)||Y.contentEditable==="true")&&(Md=Y,vA=F,Jp=null);break;case"focusout":Jp=vA=Md=null;break;case"mousedown":EA=!0;break;case"contextmenu":case"mouseup":case"dragend":EA=!1,E2(v,l,R);break;case"selectionchange":if(KZ)break;case"keydown":case"keyup":E2(v,l,R)}var W;if(pI)e:{switch(o){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else xd?_k(o,l)&&(X="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(X="onCompositionStart");X&&(Ek&&l.locale!=="ko"&&(xd||X!=="onCompositionStart"?X==="onCompositionEnd"&&xd&&(W=vk()):(Kl=R,fI="value"in Kl?Kl.value:Kl.textContent,xd=!0)),Y=qv(F,X),0<Y.length&&(X=new c2(X,o,null,l,R),v.push({event:X,listeners:Y}),W?X.data=W:(W=Tk(l),W!==null&&(X.data=W)))),(W=OZ?LZ(o,l):kZ(o,l))&&(F=qv(F,"onBeforeInput"),0<F.length&&(R=new c2("onBeforeInput","beforeinput",null,l,R),v.push({event:R,listeners:F}),R.data=W))}Pk(v,i)})}function pg(o,i,l){return{instance:o,listener:i,currentTarget:l}}function qv(o,i){for(var l=i+"Capture",d=[];o!==null;){var p=o,w=p.stateNode;p.tag===5&&w!==null&&(p=w,w=sg(o,l),w!=null&&d.unshift(pg(o,w,p)),w=sg(o,i),w!=null&&d.push(pg(o,w,p))),o=o.return}return d}function Id(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function S2(o,i,l,d,p){for(var w=i._reactName,C=[];l!==null&&l!==d;){var g=l,S=g.alternate,F=g.stateNode;if(S!==null&&S===d)break;g.tag===5&&F!==null&&(g=F,p?(S=sg(l,w),S!=null&&C.unshift(pg(l,S,g))):p||(S=sg(l,w),S!=null&&C.push(pg(l,S,g)))),l=l.return}C.length!==0&&o.push({event:i,listeners:C})}var XZ=/\r\n?/g,$Z=/\u0000|\uFFFD/g;function w2(o){return(typeof o=="string"?o:""+o).replace(XZ,"\n").replace($Z,"")}function hv(o,i,l){if(i=w2(i),w2(o)!==i&&l)throw Error(jn(425))}function Hv(){}var _A=null,TA=null;function SA(o,i){return o==="textarea"||o==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wA=typeof setTimeout=="function"?setTimeout:void 0,QZ=typeof clearTimeout=="function"?clearTimeout:void 0,A2=typeof Promise=="function"?Promise:void 0,JZ=typeof queueMicrotask=="function"?queueMicrotask:typeof A2<"u"?function(o){return A2.resolve(null).then(o).catch(e9)}:wA;function e9(o){setTimeout(function(){throw o})}function O1(o,i){var l=i,d=0;do{var p=l.nextSibling;if(o.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){o.removeChild(p),cg(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);cg(i)}function $l(o){for(;o!=null;o=o.nextSibling){var i=o.nodeType;if(i===1||i===3)break;if(i===8){if(i=o.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return o}function I2(o){o=o.previousSibling;for(var i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return o;i--}else l==="/$"&&i++}o=o.previousSibling}return null}var ih=Math.random().toString(36).slice(2),wu="__reactFiber$"+ih,gg="__reactProps$"+ih,dl="__reactContainer$"+ih,AA="__reactEvents$"+ih,t9="__reactListeners$"+ih,n9="__reactHandles$"+ih;function zc(o){var i=o[wu];if(i)return i;for(var l=o.parentNode;l;){if(i=l[dl]||l[wu]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(o=I2(o);o!==null;){if(l=o[wu])return l;o=I2(o)}return i}o=l,l=o.parentNode}return null}function Ng(o){return o=o[wu]||o[dl],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Pd(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(jn(33))}function p0(o){return o[gg]||null}var IA=[],Od=-1;function oc(o){return{current:o}}function xi(o){0>Od||(o.current=IA[Od],IA[Od]=null,Od--)}function Ii(o,i){Od++,IA[Od]=o.current,o.current=i}var rc={},Qo=oc(rc),ka=oc(!1),tf=rc;function Yd(o,i){var l=o.type.contextTypes;if(!l)return rc;var d=o.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var p={},w;for(w in l)p[w]=i[w];return d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=i,o.__reactInternalMemoizedMaskedChildContext=p),p}function Fa(o){return o=o.childContextTypes,o!=null}function Vv(){xi(ka),xi(Qo)}function C2(o,i,l){if(Qo.current!==rc)throw Error(jn(168));Ii(Qo,i),Ii(ka,l)}function Lk(o,i,l){var d=o.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in i))throw Error(jn(108,jj(o)||"Unknown",p));return Ki({},l,d)}function Kv(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||rc,tf=Qo.current,Ii(Qo,o),Ii(ka,ka.current),!0}function b2(o,i,l){var d=o.stateNode;if(!d)throw Error(jn(169));l?(o=Lk(o,i,tf),d.__reactInternalMemoizedMergedChildContext=o,xi(ka),xi(Qo),Ii(Qo,o)):xi(ka),Ii(ka,l)}var sl=null,g0=!1,L1=!1;function kk(o){sl===null?sl=[o]:sl.push(o)}function r9(o){g0=!0,kk(o)}function ac(){if(!L1&&sl!==null){L1=!0;var o=0,i=di;try{var l=sl;for(di=1;o<l.length;o++){var d=l[o];do d=d(!0);while(d!==null)}sl=null,g0=!1}catch(p){throw sl!==null&&(sl=sl.slice(o+1)),sk(sI,ac),p}finally{di=i,L1=!1}}return null}var Ld=[],kd=0,zv=null,Yv=0,_s=[],Ts=0,nf=null,ul=1,ll="";function Gc(o,i){Ld[kd++]=Yv,Ld[kd++]=zv,zv=o,Yv=i}function Fk(o,i,l){_s[Ts++]=ul,_s[Ts++]=ll,_s[Ts++]=nf,nf=o;var d=ul;o=ll;var p=32-Js(d)-1;d&=~(1<<p),l+=1;var w=32-Js(i)+p;if(30<w){var C=p-p%5;w=(d&(1<<C)-1).toString(32),d>>=C,p-=C,ul=1<<32-Js(i)+p|l<<p|d,ll=w+o}else ul=1<<w|l<<p|d,ll=o}function mI(o){o.return!==null&&(Gc(o,1),Fk(o,1,0))}function yI(o){for(;o===zv;)zv=Ld[--kd],Ld[kd]=null,Yv=Ld[--kd],Ld[kd]=null;for(;o===nf;)nf=_s[--Ts],_s[Ts]=null,ll=_s[--Ts],_s[Ts]=null,ul=_s[--Ts],_s[Ts]=null}var us=null,as=null,Ui=!1,Xs=null;function Uk(o,i){var l=ws(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=o,i=o.deletions,i===null?(o.deletions=[l],o.flags|=16):i.push(l)}function R2(o,i){switch(o.tag){case 5:var l=o.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(o.stateNode=i,us=o,as=$l(i.firstChild),!0):!1;case 6:return i=o.pendingProps===""||i.nodeType!==3?null:i,i!==null?(o.stateNode=i,us=o,as=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=nf!==null?{id:ul,overflow:ll}:null,o.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=ws(18,null,null,0),l.stateNode=i,l.return=o,o.child=l,us=o,as=null,!0):!1;default:return!1}}function CA(o){return(o.mode&1)!==0&&(o.flags&128)===0}function bA(o){if(Ui){var i=as;if(i){var l=i;if(!R2(o,i)){if(CA(o))throw Error(jn(418));i=$l(l.nextSibling);var d=us;i&&R2(o,i)?Uk(d,l):(o.flags=o.flags&-4097|2,Ui=!1,us=o)}}else{if(CA(o))throw Error(jn(418));o.flags=o.flags&-4097|2,Ui=!1,us=o}}}function N2(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;us=o}function pv(o){if(o!==us)return!1;if(!Ui)return N2(o),Ui=!0,!1;var i;if((i=o.tag!==3)&&!(i=o.tag!==5)&&(i=o.type,i=i!=="head"&&i!=="body"&&!SA(o.type,o.memoizedProps)),i&&(i=as)){if(CA(o))throw Bk(),Error(jn(418));for(;i;)Uk(o,i),i=$l(i.nextSibling)}if(N2(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(jn(317));e:{for(o=o.nextSibling,i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"){if(i===0){as=$l(o.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}o=o.nextSibling}as=null}}else as=us?$l(o.stateNode.nextSibling):null;return!0}function Bk(){for(var o=as;o;)o=$l(o.nextSibling)}function Wd(){as=us=null,Ui=!1}function vI(o){Xs===null?Xs=[o]:Xs.push(o)}var i9=gl.ReactCurrentBatchConfig;function Fp(o,i,l){if(o=l.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var d=l.stateNode}if(!d)throw Error(jn(147,o));var p=d,w=""+o;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===w?i.ref:(i=function(C){var g=p.refs;C===null?delete g[w]:g[w]=C},i._stringRef=w,i)}if(typeof o!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,o))}return o}function gv(o,i){throw o=Object.prototype.toString.call(i),Error(jn(31,o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o))}function x2(o){var i=o._init;return i(o._payload)}function jk(o){function i(x,_){if(o){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function l(x,_){if(!o)return null;for(;_!==null;)i(x,_),_=_.sibling;return null}function d(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function p(x,_){return x=tc(x,_),x.index=0,x.sibling=null,x}function w(x,_,I){return x.index=I,o?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function C(x){return o&&x.alternate===null&&(x.flags|=2),x}function g(x,_,I,b){return _===null||_.tag!==6?(_=G1(I,x.mode,b),_.return=x,_):(_=p(_,I),_.return=x,_)}function S(x,_,I,b){var j=I.type;return j===Nd?R(x,_,I.props.children,b,I.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Gl&&x2(j)===_.type)?(b=p(_,I.props),b.ref=Fp(x,_,I),b.return=x,b):(b=Lv(I.type,I.key,I.props,null,x.mode,b),b.ref=Fp(x,_,I),b.return=x,b)}function F(x,_,I,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=q1(I,x.mode,b),_.return=x,_):(_=p(_,I.children||[]),_.return=x,_)}function R(x,_,I,b,j){return _===null||_.tag!==7?(_=Qc(I,x.mode,b,j),_.return=x,_):(_=p(_,I),_.return=x,_)}function v(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=G1(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case iv:return I=Lv(_.type,_.key,_.props,null,x.mode,I),I.ref=Fp(x,null,_),I.return=x,I;case Rd:return _=q1(_,x.mode,I),_.return=x,_;case Gl:var b=_._init;return v(x,b(_._payload),I)}if(qp(_)||Dp(_))return _=Qc(_,x.mode,I,null),_.return=x,_;gv(x,_)}return null}function y(x,_,I,b){var j=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:g(x,_,""+I,b);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case iv:return I.key===j?S(x,_,I,b):null;case Rd:return I.key===j?F(x,_,I,b):null;case Gl:return j=I._init,y(x,_,j(I._payload),b)}if(qp(I)||Dp(I))return j!==null?null:R(x,_,I,b,null);gv(x,I)}return null}function O(x,_,I,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(I)||null,g(_,x,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case iv:return x=x.get(b.key===null?I:b.key)||null,S(_,x,b,j);case Rd:return x=x.get(b.key===null?I:b.key)||null,F(_,x,b,j);case Gl:var Y=b._init;return O(x,_,I,Y(b._payload),j)}if(qp(b)||Dp(b))return x=x.get(I)||null,R(_,x,b,j,null);gv(_,b)}return null}function m(x,_,I,b){for(var j=null,Y=null,W=_,X=_=0,se=null;W!==null&&X<I.length;X++){W.index>X?(se=W,W=null):se=W.sibling;var N=y(x,W,I[X],b);if(N===null){W===null&&(W=se);break}o&&W&&N.alternate===null&&i(x,W),_=w(N,_,X),Y===null?j=N:Y.sibling=N,Y=N,W=se}if(X===I.length)return l(x,W),Ui&&Gc(x,X),j;if(W===null){for(;X<I.length;X++)W=v(x,I[X],b),W!==null&&(_=w(W,_,X),Y===null?j=W:Y.sibling=W,Y=W);return Ui&&Gc(x,X),j}for(W=d(x,W);X<I.length;X++)se=O(W,x,X,I[X],b),se!==null&&(o&&se.alternate!==null&&W.delete(se.key===null?X:se.key),_=w(se,_,X),Y===null?j=se:Y.sibling=se,Y=se);return o&&W.forEach(function($){return i(x,$)}),Ui&&Gc(x,X),j}function T(x,_,I,b){var j=Dp(I);if(typeof j!="function")throw Error(jn(150));if(I=j.call(I),I==null)throw Error(jn(151));for(var Y=j=null,W=_,X=_=0,se=null,N=I.next();W!==null&&!N.done;X++,N=I.next()){W.index>X?(se=W,W=null):se=W.sibling;var $=y(x,W,N.value,b);if($===null){W===null&&(W=se);break}o&&W&&$.alternate===null&&i(x,W),_=w($,_,X),Y===null?j=$:Y.sibling=$,Y=$,W=se}if(N.done)return l(x,W),Ui&&Gc(x,X),j;if(W===null){for(;!N.done;X++,N=I.next())N=v(x,N.value,b),N!==null&&(_=w(N,_,X),Y===null?j=N:Y.sibling=N,Y=N);return Ui&&Gc(x,X),j}for(W=d(x,W);!N.done;X++,N=I.next())N=O(W,x,X,N.value,b),N!==null&&(o&&N.alternate!==null&&W.delete(N.key===null?X:N.key),_=w(N,_,X),Y===null?j=N:Y.sibling=N,Y=N);return o&&W.forEach(function(ce){return i(x,ce)}),Ui&&Gc(x,X),j}function U(x,_,I,b){if(typeof I=="object"&&I!==null&&I.type===Nd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case iv:e:{for(var j=I.key,Y=_;Y!==null;){if(Y.key===j){if(j=I.type,j===Nd){if(Y.tag===7){l(x,Y.sibling),_=p(Y,I.props.children),_.return=x,x=_;break e}}else if(Y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Gl&&x2(j)===Y.type){l(x,Y.sibling),_=p(Y,I.props),_.ref=Fp(x,Y,I),_.return=x,x=_;break e}l(x,Y);break}else i(x,Y);Y=Y.sibling}I.type===Nd?(_=Qc(I.props.children,x.mode,b,I.key),_.return=x,x=_):(b=Lv(I.type,I.key,I.props,null,x.mode,b),b.ref=Fp(x,_,I),b.return=x,x=b)}return C(x);case Rd:e:{for(Y=I.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(x,_.sibling),_=p(_,I.children||[]),_.return=x,x=_;break e}else{l(x,_);break}else i(x,_);_=_.sibling}_=q1(I,x.mode,b),_.return=x,x=_}return C(x);case Gl:return Y=I._init,U(x,_,Y(I._payload),b)}if(qp(I))return m(x,_,I,b);if(Dp(I))return T(x,_,I,b);gv(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(x,_.sibling),_=p(_,I),_.return=x,x=_):(l(x,_),_=G1(I,x.mode,b),_.return=x,x=_),C(x)):l(x,_)}return U}var Xd=jk(!0),Zk=jk(!1),Wv=oc(null),Xv=null,Fd=null,EI=null;function _I(){EI=Fd=Xv=null}function TI(o){var i=Wv.current;xi(Wv),o._currentValue=i}function RA(o,i,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&i)!==i?(o.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),o===l)break;o=o.return}}function Vd(o,i){Xv=o,EI=Fd=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&i&&(La=!0),o.firstContext=null)}function Is(o){var i=o._currentValue;if(EI!==o)if(o={context:o,memoizedValue:i,next:null},Fd===null){if(Xv===null)throw Error(jn(308));Fd=o,Xv.dependencies={lanes:0,firstContext:o}}else Fd=Fd.next=o;return i}var Yc=null;function SI(o){Yc===null?Yc=[o]:Yc.push(o)}function Gk(o,i,l,d){var p=i.interleaved;return p===null?(l.next=l,SI(i)):(l.next=p.next,p.next=l),i.interleaved=l,hl(o,d)}function hl(o,i){o.lanes|=i;var l=o.alternate;for(l!==null&&(l.lanes|=i),l=o,o=o.return;o!==null;)o.childLanes|=i,l=o.alternate,l!==null&&(l.childLanes|=i),l=o,o=o.return;return l.tag===3?l.stateNode:null}var ql=!1;function wI(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qk(o,i){o=o.updateQueue,i.updateQueue===o&&(i.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function cl(o,i){return{eventTime:o,lane:i,tag:0,payload:null,callback:null,next:null}}function Ql(o,i,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,Xr&2){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,hl(o,l)}return p=d.interleaved,p===null?(i.next=i,SI(d)):(i.next=p.next,p.next=i),d.interleaved=i,hl(o,l)}function Nv(o,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,uI(o,l)}}function M2(o,i){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};w===null?p=w=C:w=w.next=C,l=l.next}while(l!==null);w===null?p=w=i:w=w.next=i}else p=w=i;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:w,shared:d.shared,effects:d.effects},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=i:o.next=i,l.lastBaseUpdate=i}function $v(o,i,l,d){var p=o.updateQueue;ql=!1;var w=p.firstBaseUpdate,C=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var S=g,F=S.next;S.next=null,C===null?w=F:C.next=F,C=S;var R=o.alternate;R!==null&&(R=R.updateQueue,g=R.lastBaseUpdate,g!==C&&(g===null?R.firstBaseUpdate=F:g.next=F,R.lastBaseUpdate=S))}if(w!==null){var v=p.baseState;C=0,R=F=S=null,g=w;do{var y=g.lane,O=g.eventTime;if((d&y)===y){R!==null&&(R=R.next={eventTime:O,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=o,T=g;switch(y=i,O=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){v=m.call(O,v,y);break e}v=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,y=typeof m=="function"?m.call(O,v,y):m,y==null)break e;v=Ki({},v,y);break e;case 2:ql=!0}}g.callback!==null&&g.lane!==0&&(o.flags|=64,y=p.effects,y===null?p.effects=[g]:y.push(g))}else O={eventTime:O,lane:y,tag:g.tag,payload:g.payload,callback:g.callback,next:null},R===null?(F=R=O,S=v):R=R.next=O,C|=y;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;y=g,g=y.next,y.next=null,p.lastBaseUpdate=y,p.shared.pending=null}}while(!0);if(R===null&&(S=v),p.baseState=S,p.firstBaseUpdate=F,p.lastBaseUpdate=R,i=p.shared.interleaved,i!==null){p=i;do C|=p.lane,p=p.next;while(p!==i)}else w===null&&(p.shared.lanes=0);of|=C,o.lanes=C,o.memoizedState=v}}function D2(o,i,l){if(o=i.effects,i.effects=null,o!==null)for(i=0;i<o.length;i++){var d=o[i],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(jn(191,p));p.call(d)}}}var xg={},Iu=oc(xg),mg=oc(xg),yg=oc(xg);function Wc(o){if(o===xg)throw Error(jn(174));return o}function AI(o,i){switch(Ii(yg,i),Ii(mg,o),Ii(Iu,xg),o=i.nodeType,o){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:uA(null,"");break;default:o=o===8?i.parentNode:i,i=o.namespaceURI||null,o=o.tagName,i=uA(i,o)}xi(Iu),Ii(Iu,i)}function $d(){xi(Iu),xi(mg),xi(yg)}function Hk(o){Wc(yg.current);var i=Wc(Iu.current),l=uA(i,o.type);i!==l&&(Ii(mg,o),Ii(Iu,l))}function II(o){mg.current===o&&(xi(Iu),xi(mg))}var qi=oc(0);function Qv(o){for(var i=o;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var k1=[];function CI(){for(var o=0;o<k1.length;o++)k1[o]._workInProgressVersionPrimary=null;k1.length=0}var xv=gl.ReactCurrentDispatcher,F1=gl.ReactCurrentBatchConfig,rf=0,Vi=null,_o=null,xo=null,Jv=!1,eg=!1,vg=0,o9=0;function Yo(){throw Error(jn(321))}function bI(o,i){if(i===null)return!1;for(var l=0;l<i.length&&l<o.length;l++)if(!tu(o[l],i[l]))return!1;return!0}function RI(o,i,l,d,p,w){if(rf=w,Vi=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,xv.current=o===null||o.memoizedState===null?l9:c9,o=l(d,p),eg){w=0;do{if(eg=!1,vg=0,25<=w)throw Error(jn(301));w+=1,xo=_o=null,i.updateQueue=null,xv.current=f9,o=l(d,p)}while(eg)}if(xv.current=e0,i=_o!==null&&_o.next!==null,rf=0,xo=_o=Vi=null,Jv=!1,i)throw Error(jn(300));return o}function NI(){var o=vg!==0;return vg=0,o}function Su(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xo===null?Vi.memoizedState=xo=o:xo=xo.next=o,xo}function Cs(){if(_o===null){var o=Vi.alternate;o=o!==null?o.memoizedState:null}else o=_o.next;var i=xo===null?Vi.memoizedState:xo.next;if(i!==null)xo=i,_o=o;else{if(o===null)throw Error(jn(310));_o=o,o={memoizedState:_o.memoizedState,baseState:_o.baseState,baseQueue:_o.baseQueue,queue:_o.queue,next:null},xo===null?Vi.memoizedState=xo=o:xo=xo.next=o}return xo}function Eg(o,i){return typeof i=="function"?i(o):i}function U1(o){var i=Cs(),l=i.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=o;var d=_o,p=d.baseQueue,w=l.pending;if(w!==null){if(p!==null){var C=p.next;p.next=w.next,w.next=C}d.baseQueue=p=w,l.pending=null}if(p!==null){w=p.next,d=d.baseState;var g=C=null,S=null,F=w;do{var R=F.lane;if((rf&R)===R)S!==null&&(S=S.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),d=F.hasEagerState?F.eagerState:o(d,F.action);else{var v={lane:R,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};S===null?(g=S=v,C=d):S=S.next=v,Vi.lanes|=R,of|=R}F=F.next}while(F!==null&&F!==w);S===null?C=d:S.next=g,tu(d,i.memoizedState)||(La=!0),i.memoizedState=d,i.baseState=C,i.baseQueue=S,l.lastRenderedState=d}if(o=l.interleaved,o!==null){p=o;do w=p.lane,Vi.lanes|=w,of|=w,p=p.next;while(p!==o)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function B1(o){var i=Cs(),l=i.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=o;var d=l.dispatch,p=l.pending,w=i.memoizedState;if(p!==null){l.pending=null;var C=p=p.next;do w=o(w,C.action),C=C.next;while(C!==p);tu(w,i.memoizedState)||(La=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,d]}function Vk(){}function Kk(o,i){var l=Vi,d=Cs(),p=i(),w=!tu(d.memoizedState,p);if(w&&(d.memoizedState=p,La=!0),d=d.queue,xI(Wk.bind(null,l,d,o),[o]),d.getSnapshot!==i||w||xo!==null&&xo.memoizedState.tag&1){if(l.flags|=2048,_g(9,Yk.bind(null,l,d,p,i),void 0,null),Mo===null)throw Error(jn(349));rf&30||zk(l,i,p)}return p}function zk(o,i,l){o.flags|=16384,o={getSnapshot:i,value:l},i=Vi.updateQueue,i===null?(i={lastEffect:null,stores:null},Vi.updateQueue=i,i.stores=[o]):(l=i.stores,l===null?i.stores=[o]:l.push(o))}function Yk(o,i,l,d){i.value=l,i.getSnapshot=d,Xk(i)&&$k(o)}function Wk(o,i,l){return l(function(){Xk(i)&&$k(o)})}function Xk(o){var i=o.getSnapshot;o=o.value;try{var l=i();return!tu(o,l)}catch(d){return!0}}function $k(o){var i=hl(o,1);i!==null&&eu(i,o,1,-1)}function P2(o){var i=Su();return typeof o=="function"&&(o=o()),i.memoizedState=i.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:o},i.queue=o,o=o.dispatch=u9.bind(null,Vi,o),[i.memoizedState,o]}function _g(o,i,l,d){return o={tag:o,create:i,destroy:l,deps:d,next:null},i=Vi.updateQueue,i===null?(i={lastEffect:null,stores:null},Vi.updateQueue=i,i.lastEffect=o.next=o):(l=i.lastEffect,l===null?i.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,i.lastEffect=o)),o}function Qk(){return Cs().memoizedState}function Mv(o,i,l,d){var p=Su();Vi.flags|=o,p.memoizedState=_g(1|i,l,void 0,d===void 0?null:d)}function m0(o,i,l,d){var p=Cs();d=d===void 0?null:d;var w=void 0;if(_o!==null){var C=_o.memoizedState;if(w=C.destroy,d!==null&&bI(d,C.deps)){p.memoizedState=_g(i,l,w,d);return}}Vi.flags|=o,p.memoizedState=_g(1|i,l,w,d)}function O2(o,i){return Mv(8390656,8,o,i)}function xI(o,i){return m0(2048,8,o,i)}function Jk(o,i){return m0(4,2,o,i)}function e3(o,i){return m0(4,4,o,i)}function t3(o,i){if(typeof i=="function")return o=o(),i(o),function(){i(null)};if(i!=null)return o=o(),i.current=o,function(){i.current=null}}function n3(o,i,l){return l=l!=null?l.concat([o]):null,m0(4,4,t3.bind(null,i,o),l)}function MI(){}function r3(o,i){var l=Cs();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&bI(i,d[1])?d[0]:(l.memoizedState=[o,i],o)}function i3(o,i){var l=Cs();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&bI(i,d[1])?d[0]:(o=o(),l.memoizedState=[o,i],o)}function o3(o,i,l){return rf&21?(tu(l,i)||(l=ck(),Vi.lanes|=l,of|=l,o.baseState=!0),i):(o.baseState&&(o.baseState=!1,La=!0),o.memoizedState=l)}function a9(o,i){var l=di;di=l!==0&&4>l?l:4,o(!0);var d=F1.transition;F1.transition={};try{o(!1),i()}finally{di=l,F1.transition=d}}function a3(){return Cs().memoizedState}function s9(o,i,l){var d=ec(o);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},s3(o))u3(i,l);else if(l=Gk(o,i,l,d),l!==null){var p=va();eu(l,o,d,p),l3(l,i,d)}}function u9(o,i,l){var d=ec(o),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(s3(o))u3(i,p);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var C=i.lastRenderedState,g=w(C,l);if(p.hasEagerState=!0,p.eagerState=g,tu(g,C)){var S=i.interleaved;S===null?(p.next=p,SI(i)):(p.next=S.next,S.next=p),i.interleaved=p;return}}catch(F){}finally{}l=Gk(o,i,p,d),l!==null&&(p=va(),eu(l,o,d,p),l3(l,i,d))}}function s3(o){var i=o.alternate;return o===Vi||i!==null&&i===Vi}function u3(o,i){eg=Jv=!0;var l=o.pending;l===null?i.next=i:(i.next=l.next,l.next=i),o.pending=i}function l3(o,i,l){if(l&4194240){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,uI(o,l)}}var e0={readContext:Is,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},l9={readContext:Is,useCallback:function(o,i){return Su().memoizedState=[o,i===void 0?null:i],o},useContext:Is,useEffect:O2,useImperativeHandle:function(o,i,l){return l=l!=null?l.concat([o]):null,Mv(4194308,4,t3.bind(null,i,o),l)},useLayoutEffect:function(o,i){return Mv(4194308,4,o,i)},useInsertionEffect:function(o,i){return Mv(4,2,o,i)},useMemo:function(o,i){var l=Su();return i=i===void 0?null:i,o=o(),l.memoizedState=[o,i],o},useReducer:function(o,i,l){var d=Su();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:i},d.queue=o,o=o.dispatch=s9.bind(null,Vi,o),[d.memoizedState,o]},useRef:function(o){var i=Su();return o={current:o},i.memoizedState=o},useState:P2,useDebugValue:MI,useDeferredValue:function(o){return Su().memoizedState=o},useTransition:function(){var o=P2(!1),i=o[0];return o=a9.bind(null,o[1]),Su().memoizedState=o,[i,o]},useMutableSource:function(){},useSyncExternalStore:function(o,i,l){var d=Vi,p=Su();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=i(),Mo===null)throw Error(jn(349));rf&30||zk(d,i,l)}p.memoizedState=l;var w={value:l,getSnapshot:i};return p.queue=w,O2(Wk.bind(null,d,w,o),[o]),d.flags|=2048,_g(9,Yk.bind(null,d,w,l,i),void 0,null),l},useId:function(){var o=Su(),i=Mo.identifierPrefix;if(Ui){var l=ll,d=ul;l=(d&~(1<<32-Js(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=vg++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=o9++,i=":"+i+"r"+l.toString(32)+":";return o.memoizedState=i},unstable_isNewReconciler:!1},c9={readContext:Is,useCallback:r3,useContext:Is,useEffect:xI,useImperativeHandle:n3,useInsertionEffect:Jk,useLayoutEffect:e3,useMemo:i3,useReducer:U1,useRef:Qk,useState:function(){return U1(Eg)},useDebugValue:MI,useDeferredValue:function(o){var i=Cs();return o3(i,_o.memoizedState,o)},useTransition:function(){var o=U1(Eg)[0],i=Cs().memoizedState;return[o,i]},useMutableSource:Vk,useSyncExternalStore:Kk,useId:a3,unstable_isNewReconciler:!1},f9={readContext:Is,useCallback:r3,useContext:Is,useEffect:xI,useImperativeHandle:n3,useInsertionEffect:Jk,useLayoutEffect:e3,useMemo:i3,useReducer:B1,useRef:Qk,useState:function(){return B1(Eg)},useDebugValue:MI,useDeferredValue:function(o){var i=Cs();return _o===null?i.memoizedState=o:o3(i,_o.memoizedState,o)},useTransition:function(){var o=B1(Eg)[0],i=Cs().memoizedState;return[o,i]},useMutableSource:Vk,useSyncExternalStore:Kk,useId:a3,unstable_isNewReconciler:!1};function Ys(o,i){if(o&&o.defaultProps){i=Ki({},i),o=o.defaultProps;for(var l in o)i[l]===void 0&&(i[l]=o[l]);return i}return i}function NA(o,i,l,d){i=o.memoizedState,l=l(d,i),l=l==null?i:Ki({},i,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var y0={isMounted:function(o){return(o=o._reactInternals)?cf(o)===o:!1},enqueueSetState:function(o,i,l){o=o._reactInternals;var d=va(),p=ec(o),w=cl(d,p);w.payload=i,l!=null&&(w.callback=l),i=Ql(o,w,p),i!==null&&(eu(i,o,p,d),Nv(i,o,p))},enqueueReplaceState:function(o,i,l){o=o._reactInternals;var d=va(),p=ec(o),w=cl(d,p);w.tag=1,w.payload=i,l!=null&&(w.callback=l),i=Ql(o,w,p),i!==null&&(eu(i,o,p,d),Nv(i,o,p))},enqueueForceUpdate:function(o,i){o=o._reactInternals;var l=va(),d=ec(o),p=cl(l,d);p.tag=2,i!=null&&(p.callback=i),i=Ql(o,p,d),i!==null&&(eu(i,o,d,l),Nv(i,o,d))}};function L2(o,i,l,d,p,w,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,w,C):i.prototype&&i.prototype.isPureReactComponent?!dg(l,d)||!dg(p,w):!0}function c3(o,i,l){var d=!1,p=rc,w=i.contextType;return typeof w=="object"&&w!==null?w=Is(w):(p=Fa(i)?tf:Qo.current,d=i.contextTypes,w=(d=d!=null)?Yd(o,p):rc),i=new i(l,w),o.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=y0,o.stateNode=i,i._reactInternals=o,d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=p,o.__reactInternalMemoizedMaskedChildContext=w),i}function k2(o,i,l,d){o=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==o&&y0.enqueueReplaceState(i,i.state,null)}function xA(o,i,l,d){var p=o.stateNode;p.props=l,p.state=o.memoizedState,p.refs={},wI(o);var w=i.contextType;typeof w=="object"&&w!==null?p.context=Is(w):(w=Fa(i)?tf:Qo.current,p.context=Yd(o,w)),p.state=o.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(NA(o,i,w,l),p.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&y0.enqueueReplaceState(p,p.state,null),$v(o,l,p,d),p.state=o.memoizedState),typeof p.componentDidMount=="function"&&(o.flags|=4194308)}function Qd(o,i){try{var l="",d=i;do l+=Bj(d),d=d.return;while(d);var p=l}catch(w){p="\nError generating stack: "+w.message+"\n"+w.stack}return{value:o,source:i,stack:p,digest:null}}function j1(o,i,l){return{value:o,source:null,stack:l!=null?l:null,digest:i!=null?i:null}}function MA(o,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var d9=typeof WeakMap=="function"?WeakMap:Map;function f3(o,i,l){l=cl(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){n0||(n0=!0,ZA=d),MA(o,i)},l}function d3(o,i,l){l=cl(-1,l),l.tag=3;var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=i.value;l.payload=function(){return d(p)},l.callback=function(){MA(o,i)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(l.callback=function(){MA(o,i),typeof d!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var C=i.stack;this.componentDidCatch(i.value,{componentStack:C!==null?C:""})}),l}function F2(o,i,l){var d=o.pingCache;if(d===null){d=o.pingCache=new d9;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(l)||(p.add(l),o=C9.bind(null,o,i,l),i.then(o,o))}function U2(o){do{var i;if((i=o.tag===13)&&(i=o.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return o;o=o.return}while(o!==null);return null}function B2(o,i,l,d,p){return o.mode&1?(o.flags|=65536,o.lanes=p,o):(o===i?o.flags|=65536:(o.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=cl(-1,1),i.tag=2,Ql(l,i,1))),l.lanes|=1),o)}var h9=gl.ReactCurrentOwner,La=!1;function ya(o,i,l,d){i.child=o===null?Zk(i,null,l,d):Xd(i,o.child,l,d)}function j2(o,i,l,d,p){l=l.render;var w=i.ref;return Vd(i,p),d=RI(o,i,l,d,w,p),l=NI(),o!==null&&!La?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~p,pl(o,i,p)):(Ui&&l&&mI(i),i.flags|=1,ya(o,i,d,p),i.child)}function Z2(o,i,l,d,p){if(o===null){var w=l.type;return typeof w=="function"&&!BI(w)&&w.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=w,h3(o,i,w,d,p)):(o=Lv(l.type,null,d,i,i.mode,p),o.ref=i.ref,o.return=i,i.child=o)}if(w=o.child,!(o.lanes&p)){var C=w.memoizedProps;if(l=l.compare,l=l!==null?l:dg,l(C,d)&&o.ref===i.ref)return pl(o,i,p)}return i.flags|=1,o=tc(w,d),o.ref=i.ref,o.return=i,i.child=o}function h3(o,i,l,d,p){if(o!==null){var w=o.memoizedProps;if(dg(w,d)&&o.ref===i.ref)if(La=!1,i.pendingProps=d=w,(o.lanes&p)!==0)o.flags&131072&&(La=!0);else return i.lanes=o.lanes,pl(o,i,p)}return DA(o,i,l,d,p)}function p3(o,i,l){var d=i.pendingProps,p=d.children,w=o!==null?o.memoizedState:null;if(d.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Bd,is),is|=l;else{if(!(l&1073741824))return o=w!==null?w.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:o,cachePool:null,transitions:null},i.updateQueue=null,Ii(Bd,is),is|=o,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=w!==null?w.baseLanes:l,Ii(Bd,is),is|=d}else w!==null?(d=w.baseLanes|l,i.memoizedState=null):d=l,Ii(Bd,is),is|=d;return ya(o,i,p,l),i.child}function g3(o,i){var l=i.ref;(o===null&&l!==null||o!==null&&o.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function DA(o,i,l,d,p){var w=Fa(l)?tf:Qo.current;return w=Yd(i,w),Vd(i,p),l=RI(o,i,l,d,w,p),d=NI(),o!==null&&!La?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~p,pl(o,i,p)):(Ui&&d&&mI(i),i.flags|=1,ya(o,i,l,p),i.child)}function G2(o,i,l,d,p){if(Fa(l)){var w=!0;Kv(i)}else w=!1;if(Vd(i,p),i.stateNode===null)Dv(o,i),c3(i,l,d),xA(i,l,d,p),d=!0;else if(o===null){var C=i.stateNode,g=i.memoizedProps;C.props=g;var S=C.context,F=l.contextType;typeof F=="object"&&F!==null?F=Is(F):(F=Fa(l)?tf:Qo.current,F=Yd(i,F));var R=l.getDerivedStateFromProps,v=typeof R=="function"||typeof C.getSnapshotBeforeUpdate=="function";v||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(g!==d||S!==F)&&k2(i,C,d,F),ql=!1;var y=i.memoizedState;C.state=y,$v(i,d,C,p),S=i.memoizedState,g!==d||y!==S||ka.current||ql?(typeof R=="function"&&(NA(i,l,R,d),S=i.memoizedState),(g=ql||L2(i,l,g,d,y,S,F))?(v||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(i.flags|=4194308)):(typeof C.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=S),C.props=d,C.state=S,C.context=F,d=g):(typeof C.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{C=i.stateNode,qk(o,i),g=i.memoizedProps,F=i.type===i.elementType?g:Ys(i.type,g),C.props=F,v=i.pendingProps,y=C.context,S=l.contextType,typeof S=="object"&&S!==null?S=Is(S):(S=Fa(l)?tf:Qo.current,S=Yd(i,S));var O=l.getDerivedStateFromProps;(R=typeof O=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(g!==v||y!==S)&&k2(i,C,d,S),ql=!1,y=i.memoizedState,C.state=y,$v(i,d,C,p);var m=i.memoizedState;g!==v||y!==m||ka.current||ql?(typeof O=="function"&&(NA(i,l,O,d),m=i.memoizedState),(F=ql||L2(i,l,F,d,y,m,S)||!1)?(R||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,m,S),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,m,S)),typeof C.componentDidUpdate=="function"&&(i.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof C.componentDidUpdate!="function"||g===o.memoizedProps&&y===o.memoizedState||(i.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&y===o.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=m),C.props=d,C.state=m,C.context=S,d=F):(typeof C.componentDidUpdate!="function"||g===o.memoizedProps&&y===o.memoizedState||(i.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&y===o.memoizedState||(i.flags|=1024),d=!1)}return PA(o,i,l,d,w,p)}function PA(o,i,l,d,p,w){g3(o,i);var C=(i.flags&128)!==0;if(!d&&!C)return p&&b2(i,l,!1),pl(o,i,w);d=i.stateNode,h9.current=i;var g=C&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,o!==null&&C?(i.child=Xd(i,o.child,null,w),i.child=Xd(i,null,g,w)):ya(o,i,g,w),i.memoizedState=d.state,p&&b2(i,l,!0),i.child}function m3(o){var i=o.stateNode;i.pendingContext?C2(o,i.pendingContext,i.pendingContext!==i.context):i.context&&C2(o,i.context,!1),AI(o,i.containerInfo)}function q2(o,i,l,d,p){return Wd(),vI(p),i.flags|=256,ya(o,i,l,d),i.child}var OA={dehydrated:null,treeContext:null,retryLane:0};function LA(o){return{baseLanes:o,cachePool:null,transitions:null}}function y3(o,i,l){var d=i.pendingProps,p=qi.current,w=!1,C=(i.flags&128)!==0,g;if((g=C)||(g=o!==null&&o.memoizedState===null?!1:(p&2)!==0),g?(w=!0,i.flags&=-129):(o===null||o.memoizedState!==null)&&(p|=1),Ii(qi,p&1),o===null)return bA(i),o=i.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(i.mode&1?o.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(C=d.children,o=d.fallback,w?(d=i.mode,w=i.child,C={mode:"hidden",children:C},!(d&1)&&w!==null?(w.childLanes=0,w.pendingProps=C):w=_0(C,d,0,null),o=Qc(o,d,l,null),w.return=i,o.return=i,w.sibling=o,i.child=w,i.child.memoizedState=LA(l),i.memoizedState=OA,o):DI(i,C));if(p=o.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return p9(o,i,C,d,g,p,l);if(w){w=d.fallback,C=i.mode,p=o.child,g=p.sibling;var S={mode:"hidden",children:d.children};return!(C&1)&&i.child!==p?(d=i.child,d.childLanes=0,d.pendingProps=S,i.deletions=null):(d=tc(p,S),d.subtreeFlags=p.subtreeFlags&14680064),g!==null?w=tc(g,w):(w=Qc(w,C,l,null),w.flags|=2),w.return=i,d.return=i,d.sibling=w,i.child=d,d=w,w=i.child,C=o.child.memoizedState,C=C===null?LA(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=o.childLanes&~l,i.memoizedState=OA,d}return w=o.child,o=w.sibling,d=tc(w,{mode:"visible",children:d.children}),!(i.mode&1)&&(d.lanes=l),d.return=i,d.sibling=null,o!==null&&(l=i.deletions,l===null?(i.deletions=[o],i.flags|=16):l.push(o)),i.child=d,i.memoizedState=null,d}function DI(o,i){return i=_0({mode:"visible",children:i},o.mode,0,null),i.return=o,o.child=i}function mv(o,i,l,d){return d!==null&&vI(d),Xd(i,o.child,null,l),o=DI(i,i.pendingProps.children),o.flags|=2,i.memoizedState=null,o}function p9(o,i,l,d,p,w,C){if(l)return i.flags&256?(i.flags&=-257,d=j1(Error(jn(422))),mv(o,i,C,d)):i.memoizedState!==null?(i.child=o.child,i.flags|=128,null):(w=d.fallback,p=i.mode,d=_0({mode:"visible",children:d.children},p,0,null),w=Qc(w,p,C,null),w.flags|=2,d.return=i,w.return=i,d.sibling=w,i.child=d,i.mode&1&&Xd(i,o.child,null,C),i.child.memoizedState=LA(C),i.memoizedState=OA,w);if(!(i.mode&1))return mv(o,i,C,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var g=d.dgst;return d=g,w=Error(jn(419)),d=j1(w,d,void 0),mv(o,i,C,d)}if(g=(C&o.childLanes)!==0,La||g){if(d=Mo,d!==null){switch(C&-C){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(d.suspendedLanes|C)?0:p,p!==0&&p!==w.retryLane&&(w.retryLane=p,hl(o,p),eu(d,o,p,-1))}return UI(),d=j1(Error(jn(421))),mv(o,i,C,d)}return p.data==="$?"?(i.flags|=128,i.child=o.child,i=b9.bind(null,o),p._reactRetry=i,null):(o=w.treeContext,as=$l(p.nextSibling),us=i,Ui=!0,Xs=null,o!==null&&(_s[Ts++]=ul,_s[Ts++]=ll,_s[Ts++]=nf,ul=o.id,ll=o.overflow,nf=i),i=DI(i,d.children),i.flags|=4096,i)}function H2(o,i,l){o.lanes|=i;var d=o.alternate;d!==null&&(d.lanes|=i),RA(o.return,i,l)}function Z1(o,i,l,d,p){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=l,w.tailMode=p)}function v3(o,i,l){var d=i.pendingProps,p=d.revealOrder,w=d.tail;if(ya(o,i,d.children,l),d=qi.current,d&2)d=d&1|2,i.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=i.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&H2(o,l,i);else if(o.tag===19)H2(o,l,i);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}if(Ii(qi,d),!(i.mode&1))i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)o=l.alternate,o!==null&&Qv(o)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),Z1(i,!1,p,l,w);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(o=p.alternate,o!==null&&Qv(o)===null){i.child=p;break}o=p.sibling,p.sibling=l,l=p,p=o}Z1(i,!0,l,null,w);break;case"together":Z1(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Dv(o,i){!(i.mode&1)&&o!==null&&(o.alternate=null,i.alternate=null,i.flags|=2)}function pl(o,i,l){if(o!==null&&(i.dependencies=o.dependencies),of|=i.lanes,!(l&i.childLanes))return null;if(o!==null&&i.child!==o.child)throw Error(jn(153));if(i.child!==null){for(o=i.child,l=tc(o,o.pendingProps),i.child=l,l.return=i;o.sibling!==null;)o=o.sibling,l=l.sibling=tc(o,o.pendingProps),l.return=i;l.sibling=null}return i.child}function g9(o,i,l){switch(i.tag){case 3:m3(i),Wd();break;case 5:Hk(i);break;case 1:Fa(i.type)&&Kv(i);break;case 4:AI(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,p=i.memoizedProps.value;Ii(Wv,d._currentValue),d._currentValue=p;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Ii(qi,qi.current&1),i.flags|=128,null):l&i.child.childLanes?y3(o,i,l):(Ii(qi,qi.current&1),o=pl(o,i,l),o!==null?o.sibling:null);Ii(qi,qi.current&1);break;case 19:if(d=(l&i.childLanes)!==0,o.flags&128){if(d)return v3(o,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ii(qi,qi.current),d)break;return null;case 22:case 23:return i.lanes=0,p3(o,i,l)}return pl(o,i,l)}var E3,kA,_3,T3;E3=function(o,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};kA=function(){};_3=function(o,i,l,d){var p=o.memoizedProps;if(p!==d){o=i.stateNode,Wc(Iu.current);var w=null;switch(l){case"input":p=iA(o,p),d=iA(o,d),w=[];break;case"select":p=Ki({},p,{value:void 0}),d=Ki({},d,{value:void 0}),w=[];break;case"textarea":p=sA(o,p),d=sA(o,d),w=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(o.onclick=Hv)}lA(l,d);var C;l=null;for(F in p)if(!d.hasOwnProperty(F)&&p.hasOwnProperty(F)&&p[F]!=null)if(F==="style"){var g=p[F];for(C in g)g.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(og.hasOwnProperty(F)?w||(w=[]):(w=w||[]).push(F,null));for(F in d){var S=d[F];if(g=p!=null?p[F]:void 0,d.hasOwnProperty(F)&&S!==g&&(S!=null||g!=null))if(F==="style")if(g){for(C in g)!g.hasOwnProperty(C)||S&&S.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in S)S.hasOwnProperty(C)&&g[C]!==S[C]&&(l||(l={}),l[C]=S[C])}else l||(w||(w=[]),w.push(F,l)),l=S;else F==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,g=g?g.__html:void 0,S!=null&&g!==S&&(w=w||[]).push(F,S)):F==="children"?typeof S!="string"&&typeof S!="number"||(w=w||[]).push(F,""+S):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(og.hasOwnProperty(F)?(S!=null&&F==="onScroll"&&Ni("scroll",o),w||g===S||(w=[])):(w=w||[]).push(F,S))}l&&(w=w||[]).push("style",l);var F=w;(i.updateQueue=F)&&(i.flags|=4)}};T3=function(o,i,l,d){l!==d&&(i.flags|=4)};function Up(o,i){if(!Ui)switch(o.tailMode){case"hidden":i=o.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Wo(o){var i=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(i)for(var p=o.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=o,p=p.sibling;else for(p=o.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=o,p=p.sibling;return o.subtreeFlags|=d,o.childLanes=l,i}function m9(o,i,l){var d=i.pendingProps;switch(yI(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(i),null;case 1:return Fa(i.type)&&Vv(),Wo(i),null;case 3:return d=i.stateNode,$d(),xi(ka),xi(Qo),CI(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(pv(i)?i.flags|=4:o===null||o.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Xs!==null&&(HA(Xs),Xs=null))),kA(o,i),Wo(i),null;case 5:II(i);var p=Wc(yg.current);if(l=i.type,o!==null&&i.stateNode!=null)_3(o,i,l,d,p),o.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(jn(166));return Wo(i),null}if(o=Wc(Iu.current),pv(i)){d=i.stateNode,l=i.type;var w=i.memoizedProps;switch(d[wu]=i,d[gg]=w,o=(i.mode&1)!==0,l){case"dialog":Ni("cancel",d),Ni("close",d);break;case"iframe":case"object":case"embed":Ni("load",d);break;case"video":case"audio":for(p=0;p<Vp.length;p++)Ni(Vp[p],d);break;case"source":Ni("error",d);break;case"img":case"image":case"link":Ni("error",d),Ni("load",d);break;case"details":Ni("toggle",d);break;case"input":JM(d,w),Ni("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!w.multiple},Ni("invalid",d);break;case"textarea":t2(d,w),Ni("invalid",d)}lA(l,w),p=null;for(var C in w)if(w.hasOwnProperty(C)){var g=w[C];C==="children"?typeof g=="string"?d.textContent!==g&&(w.suppressHydrationWarning!==!0&&hv(d.textContent,g,o),p=["children",g]):typeof g=="number"&&d.textContent!==""+g&&(w.suppressHydrationWarning!==!0&&hv(d.textContent,g,o),p=["children",""+g]):og.hasOwnProperty(C)&&g!=null&&C==="onScroll"&&Ni("scroll",d)}switch(l){case"input":ov(d),e2(d,w,!0);break;case"textarea":ov(d),n2(d);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(d.onclick=Hv)}d=p,i.updateQueue=d,d!==null&&(i.flags|=4)}else{C=p.nodeType===9?p:p.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=WL(l)),o==="http://www.w3.org/1999/xhtml"?l==="script"?(o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof d.is=="string"?o=C.createElement(l,{is:d.is}):(o=C.createElement(l),l==="select"&&(C=o,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):o=C.createElementNS(o,l),o[wu]=i,o[gg]=d,E3(o,i,!1,!1),i.stateNode=o;e:{switch(C=cA(l,d),l){case"dialog":Ni("cancel",o),Ni("close",o),p=d;break;case"iframe":case"object":case"embed":Ni("load",o),p=d;break;case"video":case"audio":for(p=0;p<Vp.length;p++)Ni(Vp[p],o);p=d;break;case"source":Ni("error",o),p=d;break;case"img":case"image":case"link":Ni("error",o),Ni("load",o),p=d;break;case"details":Ni("toggle",o),p=d;break;case"input":JM(o,d),p=iA(o,d),Ni("invalid",o);break;case"option":p=d;break;case"select":o._wrapperState={wasMultiple:!!d.multiple},p=Ki({},d,{value:void 0}),Ni("invalid",o);break;case"textarea":t2(o,d),p=sA(o,d),Ni("invalid",o);break;default:p=d}lA(l,p),g=p;for(w in g)if(g.hasOwnProperty(w)){var S=g[w];w==="style"?QL(o,S):w==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&XL(o,S)):w==="children"?typeof S=="string"?(l!=="textarea"||S!=="")&&ag(o,S):typeof S=="number"&&ag(o,""+S):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(og.hasOwnProperty(w)?S!=null&&w==="onScroll"&&Ni("scroll",o):S!=null&&nI(o,w,S,C))}switch(l){case"input":ov(o),e2(o,d,!1);break;case"textarea":ov(o),n2(o);break;case"option":d.value!=null&&o.setAttribute("value",""+nc(d.value));break;case"select":o.multiple=!!d.multiple,w=d.value,w!=null?Zd(o,!!d.multiple,w,!1):d.defaultValue!=null&&Zd(o,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(o.onclick=Hv)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Wo(i),null;case 6:if(o&&i.stateNode!=null)T3(o,i,o.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(jn(166));if(l=Wc(yg.current),Wc(Iu.current),pv(i)){if(d=i.stateNode,l=i.memoizedProps,d[wu]=i,(w=d.nodeValue!==l)&&(o=us,o!==null))switch(o.tag){case 3:hv(d.nodeValue,l,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&hv(d.nodeValue,l,(o.mode&1)!==0)}w&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[wu]=i,i.stateNode=d}return Wo(i),null;case 13:if(xi(qi),d=i.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ui&&as!==null&&i.mode&1&&!(i.flags&128))Bk(),Wd(),i.flags|=98560,w=!1;else if(w=pv(i),d!==null&&d.dehydrated!==null){if(o===null){if(!w)throw Error(jn(318));if(w=i.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(jn(317));w[wu]=i}else Wd(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Wo(i),w=!1}else Xs!==null&&(HA(Xs),Xs=null),w=!0;if(!w)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(d=d!==null,d!==(o!==null&&o.memoizedState!==null)&&d&&(i.child.flags|=8192,i.mode&1&&(o===null||qi.current&1?To===0&&(To=3):UI())),i.updateQueue!==null&&(i.flags|=4),Wo(i),null);case 4:return $d(),kA(o,i),o===null&&hg(i.stateNode.containerInfo),Wo(i),null;case 10:return TI(i.type._context),Wo(i),null;case 17:return Fa(i.type)&&Vv(),Wo(i),null;case 19:if(xi(qi),w=i.memoizedState,w===null)return Wo(i),null;if(d=(i.flags&128)!==0,C=w.rendering,C===null)if(d)Up(w,!1);else{if(To!==0||o!==null&&o.flags&128)for(o=i.child;o!==null;){if(C=Qv(o),C!==null){for(i.flags|=128,Up(w,!1),d=C.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)w=l,o=d,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,o=C.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l=l.sibling;return Ii(qi,qi.current&1|2),i.child}o=o.sibling}w.tail!==null&&lo()>Jd&&(i.flags|=128,d=!0,Up(w,!1),i.lanes=4194304)}else{if(!d)if(o=Qv(C),o!==null){if(i.flags|=128,d=!0,l=o.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Up(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!Ui)return Wo(i),null}else 2*lo()-w.renderingStartTime>Jd&&l!==1073741824&&(i.flags|=128,d=!0,Up(w,!1),i.lanes=4194304);w.isBackwards?(C.sibling=i.child,i.child=C):(l=w.last,l!==null?l.sibling=C:i.child=C,w.last=C)}return w.tail!==null?(i=w.tail,w.rendering=i,w.tail=i.sibling,w.renderingStartTime=lo(),i.sibling=null,l=qi.current,Ii(qi,d?l&1|2:l&1),i):(Wo(i),null);case 22:case 23:return FI(),d=i.memoizedState!==null,o!==null&&o.memoizedState!==null!==d&&(i.flags|=8192),d&&i.mode&1?is&1073741824&&(Wo(i),i.subtreeFlags&6&&(i.flags|=8192)):Wo(i),null;case 24:return null;case 25:return null}throw Error(jn(156,i.tag))}function y9(o,i){switch(yI(i),i.tag){case 1:return Fa(i.type)&&Vv(),o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 3:return $d(),xi(ka),xi(Qo),CI(),o=i.flags,o&65536&&!(o&128)?(i.flags=o&-65537|128,i):null;case 5:return II(i),null;case 13:if(xi(qi),o=i.memoizedState,o!==null&&o.dehydrated!==null){if(i.alternate===null)throw Error(jn(340));Wd()}return o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 19:return xi(qi),null;case 4:return $d(),null;case 10:return TI(i.type._context),null;case 22:case 23:return FI(),null;case 24:return null;default:return null}}var yv=!1,Xo=!1,v9=typeof WeakSet=="function"?WeakSet:Set,nr=null;function Ud(o,i){var l=o.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Qi(o,i,d)}else l.current=null}function FA(o,i,l){try{l()}catch(d){Qi(o,i,d)}}var V2=!1;function E9(o,i){if(_A=Zv,o=Ck(),gI(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch(b){l=null;break e}var C=0,g=-1,S=-1,F=0,R=0,v=o,y=null;t:for(;;){for(var O;v!==l||p!==0&&v.nodeType!==3||(g=C+p),v!==w||d!==0&&v.nodeType!==3||(S=C+d),v.nodeType===3&&(C+=v.nodeValue.length),(O=v.firstChild)!==null;)y=v,v=O;for(;;){if(v===o)break t;if(y===l&&++F===p&&(g=C),y===w&&++R===d&&(S=C),(O=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=O}l=g===-1||S===-1?null:{start:g,end:S}}else l=null}l=l||{start:0,end:0}}else l=null;for(TA={focusedElem:o,selectionRange:l},Zv=!1,nr=i;nr!==null;)if(i=nr,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,nr=o;else for(;nr!==null;){i=nr;try{var m=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,x=i.stateNode,_=x.getSnapshotBeforeUpdate(i.elementType===i.type?T:Ys(i.type,T),U);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=i.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(b){Qi(i,i.return,b)}if(o=i.sibling,o!==null){o.return=i.return,nr=o;break}nr=i.return}return m=V2,V2=!1,m}function tg(o,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&o)===o){var w=p.destroy;p.destroy=void 0,w!==void 0&&FA(i,l,w)}p=p.next}while(p!==d)}}function v0(o,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&o)===o){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function UA(o){var i=o.ref;if(i!==null){var l=o.stateNode;switch(o.tag){case 5:o=l;break;default:o=l}typeof i=="function"?i(o):i.current=o}}function S3(o){var i=o.alternate;i!==null&&(o.alternate=null,S3(i)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(i=o.stateNode,i!==null&&(delete i[wu],delete i[gg],delete i[AA],delete i[t9],delete i[n9])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function w3(o){return o.tag===5||o.tag===3||o.tag===4}function K2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||w3(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function BA(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(o,i):l.insertBefore(o,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(o,l)):(i=l,i.appendChild(o)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Hv));else if(d!==4&&(o=o.child,o!==null))for(BA(o,i,l),o=o.sibling;o!==null;)BA(o,i,l),o=o.sibling}function jA(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.insertBefore(o,i):l.appendChild(o);else if(d!==4&&(o=o.child,o!==null))for(jA(o,i,l),o=o.sibling;o!==null;)jA(o,i,l),o=o.sibling}var Bo=null,Ws=!1;function Zl(o,i,l){for(l=l.child;l!==null;)A3(o,i,l),l=l.sibling}function A3(o,i,l){if(Au&&typeof Au.onCommitFiberUnmount=="function")try{Au.onCommitFiberUnmount(c0,l)}catch(g){}switch(l.tag){case 5:Xo||Ud(l,i);case 6:var d=Bo,p=Ws;Bo=null,Zl(o,i,l),Bo=d,Ws=p,Bo!==null&&(Ws?(o=Bo,l=l.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):Bo.removeChild(l.stateNode));break;case 18:Bo!==null&&(Ws?(o=Bo,l=l.stateNode,o.nodeType===8?O1(o.parentNode,l):o.nodeType===1&&O1(o,l),cg(o)):O1(Bo,l.stateNode));break;case 4:d=Bo,p=Ws,Bo=l.stateNode.containerInfo,Ws=!0,Zl(o,i,l),Bo=d,Ws=p;break;case 0:case 11:case 14:case 15:if(!Xo&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var w=p,C=w.destroy;w=w.tag,C!==void 0&&(w&2||w&4)&&FA(l,i,C),p=p.next}while(p!==d)}Zl(o,i,l);break;case 1:if(!Xo&&(Ud(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(g){Qi(l,i,g)}Zl(o,i,l);break;case 21:Zl(o,i,l);break;case 22:l.mode&1?(Xo=(d=Xo)||l.memoizedState!==null,Zl(o,i,l),Xo=d):Zl(o,i,l);break;default:Zl(o,i,l)}}function z2(o){var i=o.updateQueue;if(i!==null){o.updateQueue=null;var l=o.stateNode;l===null&&(l=o.stateNode=new v9),i.forEach(function(d){var p=R9.bind(null,o,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Ks(o,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var w=o,C=i,g=C;e:for(;g!==null;){switch(g.tag){case 5:Bo=g.stateNode,Ws=!1;break e;case 3:Bo=g.stateNode.containerInfo,Ws=!0;break e;case 4:Bo=g.stateNode.containerInfo,Ws=!0;break e}g=g.return}if(Bo===null)throw Error(jn(160));A3(w,C,p),Bo=null,Ws=!1;var S=p.alternate;S!==null&&(S.return=null),p.return=null}catch(F){Qi(p,i,F)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)I3(i,o),i=i.sibling}function I3(o,i){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ks(i,o),Eu(o),d&4){try{tg(3,o,o.return),v0(3,o)}catch(T){Qi(o,o.return,T)}try{tg(5,o,o.return)}catch(T){Qi(o,o.return,T)}}break;case 1:Ks(i,o),Eu(o),d&512&&l!==null&&Ud(l,l.return);break;case 5:if(Ks(i,o),Eu(o),d&512&&l!==null&&Ud(l,l.return),o.flags&32){var p=o.stateNode;try{ag(p,"")}catch(T){Qi(o,o.return,T)}}if(d&4&&(p=o.stateNode,p!=null)){var w=o.memoizedProps,C=l!==null?l.memoizedProps:w,g=o.type,S=o.updateQueue;if(o.updateQueue=null,S!==null)try{g==="input"&&w.type==="radio"&&w.name!=null&&zL(p,w),cA(g,C);var F=cA(g,w);for(C=0;C<S.length;C+=2){var R=S[C],v=S[C+1];R==="style"?QL(p,v):R==="dangerouslySetInnerHTML"?XL(p,v):R==="children"?ag(p,v):nI(p,R,v,F)}switch(g){case"input":oA(p,w);break;case"textarea":YL(p,w);break;case"select":var y=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!w.multiple;var O=w.value;O!=null?Zd(p,!!w.multiple,O,!1):y!==!!w.multiple&&(w.defaultValue!=null?Zd(p,!!w.multiple,w.defaultValue,!0):Zd(p,!!w.multiple,w.multiple?[]:"",!1))}p[gg]=w}catch(T){Qi(o,o.return,T)}}break;case 6:if(Ks(i,o),Eu(o),d&4){if(o.stateNode===null)throw Error(jn(162));p=o.stateNode,w=o.memoizedProps;try{p.nodeValue=w}catch(T){Qi(o,o.return,T)}}break;case 3:if(Ks(i,o),Eu(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{cg(i.containerInfo)}catch(T){Qi(o,o.return,T)}break;case 4:Ks(i,o),Eu(o);break;case 13:Ks(i,o),Eu(o),p=o.child,p.flags&8192&&(w=p.memoizedState!==null,p.stateNode.isHidden=w,!w||p.alternate!==null&&p.alternate.memoizedState!==null||(LI=lo())),d&4&&z2(o);break;case 22:if(R=l!==null&&l.memoizedState!==null,o.mode&1?(Xo=(F=Xo)||R,Ks(i,o),Xo=F):Ks(i,o),Eu(o),d&8192){if(F=o.memoizedState!==null,(o.stateNode.isHidden=F)&&!R&&o.mode&1)for(nr=o,R=o.child;R!==null;){for(v=nr=R;nr!==null;){switch(y=nr,O=y.child,y.tag){case 0:case 11:case 14:case 15:tg(4,y,y.return);break;case 1:Ud(y,y.return);var m=y.stateNode;if(typeof m.componentWillUnmount=="function"){d=y,l=y.return;try{i=d,m.props=i.memoizedProps,m.state=i.memoizedState,m.componentWillUnmount()}catch(T){Qi(d,l,T)}}break;case 5:Ud(y,y.return);break;case 22:if(y.memoizedState!==null){W2(v);continue}}O!==null?(O.return=y,nr=O):W2(v)}R=R.sibling}e:for(R=null,v=o;;){if(v.tag===5){if(R===null){R=v;try{p=v.stateNode,F?(w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(g=v.stateNode,S=v.memoizedProps.style,C=S!=null&&S.hasOwnProperty("display")?S.display:null,g.style.display=$L("display",C))}catch(T){Qi(o,o.return,T)}}}else if(v.tag===6){if(R===null)try{v.stateNode.nodeValue=F?"":v.memoizedProps}catch(T){Qi(o,o.return,T)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===o)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;R===v&&(R=null),v=v.return}R===v&&(R=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Ks(i,o),Eu(o),d&4&&z2(o);break;case 21:break;default:Ks(i,o),Eu(o)}}function Eu(o){var i=o.flags;if(i&2){try{e:{for(var l=o.return;l!==null;){if(w3(l)){var d=l;break e}l=l.return}throw Error(jn(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(ag(p,""),d.flags&=-33);var w=K2(o);jA(o,w,p);break;case 3:case 4:var C=d.stateNode.containerInfo,g=K2(o);BA(o,g,C);break;default:throw Error(jn(161))}}catch(S){Qi(o,o.return,S)}o.flags&=-3}i&4096&&(o.flags&=-4097)}function _9(o,i,l){nr=o,C3(o)}function C3(o,i,l){for(var d=(o.mode&1)!==0;nr!==null;){var p=nr,w=p.child;if(p.tag===22&&d){var C=p.memoizedState!==null||yv;if(!C){var g=p.alternate,S=g!==null&&g.memoizedState!==null||Xo;g=yv;var F=Xo;if(yv=C,(Xo=S)&&!F)for(nr=p;nr!==null;)C=nr,S=C.child,C.tag===22&&C.memoizedState!==null?X2(p):S!==null?(S.return=C,nr=S):X2(p);for(;w!==null;)nr=w,C3(w),w=w.sibling;nr=p,yv=g,Xo=F}Y2(o)}else p.subtreeFlags&8772&&w!==null?(w.return=p,nr=w):Y2(o)}}function Y2(o){for(;nr!==null;){var i=nr;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Xo||v0(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Xo)if(l===null)d.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:Ys(i.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var w=i.updateQueue;w!==null&&D2(i,w,d);break;case 3:var C=i.updateQueue;if(C!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}D2(i,C,l)}break;case 5:var g=i.stateNode;if(l===null&&i.flags&4){l=g;var S=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&l.focus();break;case"img":S.src&&(l.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var F=i.alternate;if(F!==null){var R=F.memoizedState;if(R!==null){var v=R.dehydrated;v!==null&&cg(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Xo||i.flags&512&&UA(i)}catch(y){Qi(i,i.return,y)}}if(i===o){nr=null;break}if(l=i.sibling,l!==null){l.return=i.return,nr=l;break}nr=i.return}}function W2(o){for(;nr!==null;){var i=nr;if(i===o){nr=null;break}var l=i.sibling;if(l!==null){l.return=i.return,nr=l;break}nr=i.return}}function X2(o){for(;nr!==null;){var i=nr;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{v0(4,i)}catch(S){Qi(i,l,S)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var p=i.return;try{d.componentDidMount()}catch(S){Qi(i,p,S)}}var w=i.return;try{UA(i)}catch(S){Qi(i,w,S)}break;case 5:var C=i.return;try{UA(i)}catch(S){Qi(i,C,S)}}}catch(S){Qi(i,i.return,S)}if(i===o){nr=null;break}var g=i.sibling;if(g!==null){g.return=i.return,nr=g;break}nr=i.return}}var T9=Math.ceil,t0=gl.ReactCurrentDispatcher,PI=gl.ReactCurrentOwner,As=gl.ReactCurrentBatchConfig,Xr=0,Mo=null,po=null,jo=0,is=0,Bd=oc(0),To=0,Tg=null,of=0,E0=0,OI=0,ng=null,Oa=null,LI=0,Jd=1/0,al=null,n0=!1,ZA=null,Jl=null,vv=!1,zl=null,r0=0,rg=0,GA=null,Pv=-1,Ov=0;function va(){return Xr&6?lo():Pv!==-1?Pv:Pv=lo()}function ec(o){return o.mode&1?Xr&2&&jo!==0?jo&-jo:i9.transition!==null?(Ov===0&&(Ov=ck()),Ov):(o=di,o!==0||(o=window.event,o=o===void 0?16:yk(o.type)),o):1}function eu(o,i,l,d){if(50<rg)throw rg=0,GA=null,Error(jn(185));bg(o,l,d),(!(Xr&2)||o!==Mo)&&(o===Mo&&(!(Xr&2)&&(E0|=l),To===4&&Vl(o,jo)),Ua(o,d),l===1&&Xr===0&&!(i.mode&1)&&(Jd=lo()+500,g0&&ac()))}function Ua(o,i){var l=o.callbackNode;iZ(o,i);var d=jv(o,o===Mo?jo:0);if(d===0)l!==null&&o2(l),o.callbackNode=null,o.callbackPriority=0;else if(i=d&-d,o.callbackPriority!==i){if(l!=null&&o2(l),i===1)o.tag===0?r9($2.bind(null,o)):kk($2.bind(null,o)),JZ(function(){!(Xr&6)&&ac()}),l=null;else{switch(fk(d)){case 1:l=sI;break;case 4:l=uk;break;case 16:l=Bv;break;case 536870912:l=lk;break;default:l=Bv}l=O3(l,b3.bind(null,o))}o.callbackPriority=i,o.callbackNode=l}}function b3(o,i){if(Pv=-1,Ov=0,Xr&6)throw Error(jn(327));var l=o.callbackNode;if(Kd()&&o.callbackNode!==l)return null;var d=jv(o,o===Mo?jo:0);if(d===0)return null;if(d&30||d&o.expiredLanes||i)i=i0(o,d);else{i=d;var p=Xr;Xr|=2;var w=N3();(Mo!==o||jo!==i)&&(al=null,Jd=lo()+500,$c(o,i));do try{A9();break}catch(g){R3(o,g)}while(!0);_I(),t0.current=w,Xr=p,po!==null?i=0:(Mo=null,jo=0,i=To)}if(i!==0){if(i===2&&(p=gA(o),p!==0&&(d=p,i=qA(o,p))),i===1)throw l=Tg,$c(o,0),Vl(o,d),Ua(o,lo()),l;if(i===6)Vl(o,d);else{if(p=o.current.alternate,!(d&30)&&!S9(p)&&(i=i0(o,d),i===2&&(w=gA(o),w!==0&&(d=w,i=qA(o,w))),i===1))throw l=Tg,$c(o,0),Vl(o,d),Ua(o,lo()),l;switch(o.finishedWork=p,o.finishedLanes=d,i){case 0:case 1:throw Error(jn(345));case 2:qc(o,Oa,al);break;case 3:if(Vl(o,d),(d&130023424)===d&&(i=LI+500-lo(),10<i)){if(jv(o,0)!==0)break;if(p=o.suspendedLanes,(p&d)!==d){va(),o.pingedLanes|=o.suspendedLanes&p;break}o.timeoutHandle=wA(qc.bind(null,o,Oa,al),i);break}qc(o,Oa,al);break;case 4:if(Vl(o,d),(d&4194240)===d)break;for(i=o.eventTimes,p=-1;0<d;){var C=31-Js(d);w=1<<C,C=i[C],C>p&&(p=C),d&=~w}if(d=p,d=lo()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*T9(d/1960))-d,10<d){o.timeoutHandle=wA(qc.bind(null,o,Oa,al),d);break}qc(o,Oa,al);break;case 5:qc(o,Oa,al);break;default:throw Error(jn(329))}}}return Ua(o,lo()),o.callbackNode===l?b3.bind(null,o):null}function qA(o,i){var l=ng;return o.current.memoizedState.isDehydrated&&($c(o,i).flags|=256),o=i0(o,i),o!==2&&(i=Oa,Oa=l,i!==null&&HA(i)),o}function HA(o){Oa===null?Oa=o:Oa.push.apply(Oa,o)}function S9(o){for(var i=o;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],w=p.getSnapshot;p=p.value;try{if(!tu(w(),p))return!1}catch(C){return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vl(o,i){for(i&=~OI,i&=~E0,o.suspendedLanes|=i,o.pingedLanes&=~i,o=o.expirationTimes;0<i;){var l=31-Js(i),d=1<<l;o[l]=-1,i&=~d}}function $2(o){if(Xr&6)throw Error(jn(327));Kd();var i=jv(o,0);if(!(i&1))return Ua(o,lo()),null;var l=i0(o,i);if(o.tag!==0&&l===2){var d=gA(o);d!==0&&(i=d,l=qA(o,d))}if(l===1)throw l=Tg,$c(o,0),Vl(o,i),Ua(o,lo()),l;if(l===6)throw Error(jn(345));return o.finishedWork=o.current.alternate,o.finishedLanes=i,qc(o,Oa,al),Ua(o,lo()),null}function kI(o,i){var l=Xr;Xr|=1;try{return o(i)}finally{Xr=l,Xr===0&&(Jd=lo()+500,g0&&ac())}}function af(o){zl!==null&&zl.tag===0&&!(Xr&6)&&Kd();var i=Xr;Xr|=1;var l=As.transition,d=di;try{if(As.transition=null,di=1,o)return o()}finally{di=d,As.transition=l,Xr=i,!(Xr&6)&&ac()}}function FI(){is=Bd.current,xi(Bd)}function $c(o,i){o.finishedWork=null,o.finishedLanes=0;var l=o.timeoutHandle;if(l!==-1&&(o.timeoutHandle=-1,QZ(l)),po!==null)for(l=po.return;l!==null;){var d=l;switch(yI(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Vv();break;case 3:$d(),xi(ka),xi(Qo),CI();break;case 5:II(d);break;case 4:$d();break;case 13:xi(qi);break;case 19:xi(qi);break;case 10:TI(d.type._context);break;case 22:case 23:FI()}l=l.return}if(Mo=o,po=o=tc(o.current,null),jo=is=i,To=0,Tg=null,OI=E0=of=0,Oa=ng=null,Yc!==null){for(i=0;i<Yc.length;i++)if(l=Yc[i],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,w=l.pending;if(w!==null){var C=w.next;w.next=p,d.next=C}l.pending=d}Yc=null}return o}function R3(o,i){do{var l=po;try{if(_I(),xv.current=e0,Jv){for(var d=Vi.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Jv=!1}if(rf=0,xo=_o=Vi=null,eg=!1,vg=0,PI.current=null,l===null||l.return===null){To=1,Tg=i,po=null;break}e:{var w=o,C=l.return,g=l,S=i;if(i=jo,g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var F=S,R=g,v=R.tag;if(!(R.mode&1)&&(v===0||v===11||v===15)){var y=R.alternate;y?(R.updateQueue=y.updateQueue,R.memoizedState=y.memoizedState,R.lanes=y.lanes):(R.updateQueue=null,R.memoizedState=null)}var O=U2(C);if(O!==null){O.flags&=-257,B2(O,C,g,w,i),O.mode&1&&F2(w,F,i),i=O,S=F;var m=i.updateQueue;if(m===null){var T=new Set;T.add(S),i.updateQueue=T}else m.add(S);break e}else{if(!(i&1)){F2(w,F,i),UI();break e}S=Error(jn(426))}}else if(Ui&&g.mode&1){var U=U2(C);if(U!==null){!(U.flags&65536)&&(U.flags|=256),B2(U,C,g,w,i),vI(Qd(S,g));break e}}w=S=Qd(S,g),To!==4&&(To=2),ng===null?ng=[w]:ng.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,i&=-i,w.lanes|=i;var x=f3(w,S,i);M2(w,x);break e;case 1:g=S;var _=w.type,I=w.stateNode;if(!(w.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Jl===null||!Jl.has(I)))){w.flags|=65536,i&=-i,w.lanes|=i;var b=d3(w,g,i);M2(w,b);break e}}w=w.return}while(w!==null)}M3(l)}catch(j){i=j,po===l&&l!==null&&(po=l=l.return);continue}break}while(!0)}function N3(){var o=t0.current;return t0.current=e0,o===null?e0:o}function UI(){(To===0||To===3||To===2)&&(To=4),Mo===null||!(of&268435455)&&!(E0&268435455)||Vl(Mo,jo)}function i0(o,i){var l=Xr;Xr|=2;var d=N3();(Mo!==o||jo!==i)&&(al=null,$c(o,i));do try{w9();break}catch(p){R3(o,p)}while(!0);if(_I(),Xr=l,t0.current=d,po!==null)throw Error(jn(261));return Mo=null,jo=0,To}function w9(){for(;po!==null;)x3(po)}function A9(){for(;po!==null&&!Wj();)x3(po)}function x3(o){var i=P3(o.alternate,o,is);o.memoizedProps=o.pendingProps,i===null?M3(o):po=i,PI.current=null}function M3(o){var i=o;do{var l=i.alternate;if(o=i.return,i.flags&32768){if(l=y9(l,i),l!==null){l.flags&=32767,po=l;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{To=6,po=null;return}}else if(l=m9(l,i,is),l!==null){po=l;return}if(i=i.sibling,i!==null){po=i;return}po=i=o}while(i!==null);To===0&&(To=5)}function qc(o,i,l){var d=di,p=As.transition;try{As.transition=null,di=1,I9(o,i,l,d)}finally{As.transition=p,di=d}return null}function I9(o,i,l,d){do Kd();while(zl!==null);if(Xr&6)throw Error(jn(327));l=o.finishedWork;var p=o.finishedLanes;if(l===null)return null;if(o.finishedWork=null,o.finishedLanes=0,l===o.current)throw Error(jn(177));o.callbackNode=null,o.callbackPriority=0;var w=l.lanes|l.childLanes;if(oZ(o,w),o===Mo&&(po=Mo=null,jo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||vv||(vv=!0,O3(Bv,function(){return Kd(),null})),w=(l.flags&15990)!==0,l.subtreeFlags&15990||w){w=As.transition,As.transition=null;var C=di;di=1;var g=Xr;Xr|=4,PI.current=null,E9(o,l),I3(l,o),VZ(TA),Zv=!!_A,TA=_A=null,o.current=l,_9(l),Xj(),Xr=g,di=C,As.transition=w}else o.current=l;if(vv&&(vv=!1,zl=o,r0=p),w=o.pendingLanes,w===0&&(Jl=null),Jj(l.stateNode),Ua(o,lo()),i!==null)for(d=o.onRecoverableError,l=0;l<i.length;l++)p=i[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(n0)throw n0=!1,o=ZA,ZA=null,o;return r0&1&&o.tag!==0&&Kd(),w=o.pendingLanes,w&1?o===GA?rg++:(rg=0,GA=o):rg=0,ac(),null}function Kd(){if(zl!==null){var o=fk(r0),i=As.transition,l=di;try{if(As.transition=null,di=16>o?16:o,zl===null)var d=!1;else{if(o=zl,zl=null,r0=0,Xr&6)throw Error(jn(331));var p=Xr;for(Xr|=4,nr=o.current;nr!==null;){var w=nr,C=w.child;if(nr.flags&16){var g=w.deletions;if(g!==null){for(var S=0;S<g.length;S++){var F=g[S];for(nr=F;nr!==null;){var R=nr;switch(R.tag){case 0:case 11:case 15:tg(8,R,w)}var v=R.child;if(v!==null)v.return=R,nr=v;else for(;nr!==null;){R=nr;var y=R.sibling,O=R.return;if(S3(R),R===F){nr=null;break}if(y!==null){y.return=O,nr=y;break}nr=O}}}var m=w.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}nr=w}}if(w.subtreeFlags&2064&&C!==null)C.return=w,nr=C;else e:for(;nr!==null;){if(w=nr,w.flags&2048)switch(w.tag){case 0:case 11:case 15:tg(9,w,w.return)}var x=w.sibling;if(x!==null){x.return=w.return,nr=x;break e}nr=w.return}}var _=o.current;for(nr=_;nr!==null;){C=nr;var I=C.child;if(C.subtreeFlags&2064&&I!==null)I.return=C,nr=I;else e:for(C=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:v0(9,g)}}catch(j){Qi(g,g.return,j)}if(g===C){nr=null;break e}var b=g.sibling;if(b!==null){b.return=g.return,nr=b;break e}nr=g.return}}if(Xr=p,ac(),Au&&typeof Au.onPostCommitFiberRoot=="function")try{Au.onPostCommitFiberRoot(c0,o)}catch(j){}d=!0}return d}finally{di=l,As.transition=i}}return!1}function Q2(o,i,l){i=Qd(l,i),i=f3(o,i,1),o=Ql(o,i,1),i=va(),o!==null&&(bg(o,1,i),Ua(o,i))}function Qi(o,i,l){if(o.tag===3)Q2(o,o,l);else for(;i!==null;){if(i.tag===3){Q2(i,o,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Jl===null||!Jl.has(d))){o=Qd(l,o),o=d3(i,o,1),i=Ql(i,o,1),o=va(),i!==null&&(bg(i,1,o),Ua(i,o));break}}i=i.return}}function C9(o,i,l){var d=o.pingCache;d!==null&&d.delete(i),i=va(),o.pingedLanes|=o.suspendedLanes&l,Mo===o&&(jo&l)===l&&(To===4||To===3&&(jo&130023424)===jo&&500>lo()-LI?$c(o,0):OI|=l),Ua(o,i)}function D3(o,i){i===0&&(o.mode&1?(i=uv,uv<<=1,!(uv&130023424)&&(uv=4194304)):i=1);var l=va();o=hl(o,i),o!==null&&(bg(o,i,l),Ua(o,l))}function b9(o){var i=o.memoizedState,l=0;i!==null&&(l=i.retryLane),D3(o,l)}function R9(o,i){var l=0;switch(o.tag){case 13:var d=o.stateNode,p=o.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=o.stateNode;break;default:throw Error(jn(314))}d!==null&&d.delete(i),D3(o,l)}var P3;P3=function(o,i,l){if(o!==null)if(o.memoizedProps!==i.pendingProps||ka.current)La=!0;else{if(!(o.lanes&l)&&!(i.flags&128))return La=!1,g9(o,i,l);La=!!(o.flags&131072)}else La=!1,Ui&&i.flags&1048576&&Fk(i,Yv,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Dv(o,i),o=i.pendingProps;var p=Yd(i,Qo.current);Vd(i,l),p=RI(null,i,d,o,p,l);var w=NI();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Fa(d)?(w=!0,Kv(i)):w=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,wI(i),p.updater=y0,i.stateNode=p,p._reactInternals=i,xA(i,d,o,l),i=PA(null,i,d,!0,w,l)):(i.tag=0,Ui&&w&&mI(i),ya(null,i,p,l),i=i.child),i;case 16:d=i.elementType;e:{switch(Dv(o,i),o=i.pendingProps,p=d._init,d=p(d._payload),i.type=d,p=i.tag=x9(d),o=Ys(d,o),p){case 0:i=DA(null,i,d,o,l);break e;case 1:i=G2(null,i,d,o,l);break e;case 11:i=j2(null,i,d,o,l);break e;case 14:i=Z2(null,i,d,Ys(d.type,o),l);break e}throw Error(jn(306,d,""))}return i;case 0:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Ys(d,p),DA(o,i,d,p,l);case 1:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Ys(d,p),G2(o,i,d,p,l);case 3:e:{if(m3(i),o===null)throw Error(jn(387));d=i.pendingProps,w=i.memoizedState,p=w.element,qk(o,i),$v(i,d,null,l);var C=i.memoizedState;if(d=C.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){p=Qd(Error(jn(423)),i),i=q2(o,i,d,l,p);break e}else if(d!==p){p=Qd(Error(jn(424)),i),i=q2(o,i,d,l,p);break e}else for(as=$l(i.stateNode.containerInfo.firstChild),us=i,Ui=!0,Xs=null,l=Zk(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Wd(),d===p){i=pl(o,i,l);break e}ya(o,i,d,l)}i=i.child}return i;case 5:return Hk(i),o===null&&bA(i),d=i.type,p=i.pendingProps,w=o!==null?o.memoizedProps:null,C=p.children,SA(d,p)?C=null:w!==null&&SA(d,w)&&(i.flags|=32),g3(o,i),ya(o,i,C,l),i.child;case 6:return o===null&&bA(i),null;case 13:return y3(o,i,l);case 4:return AI(i,i.stateNode.containerInfo),d=i.pendingProps,o===null?i.child=Xd(i,null,d,l):ya(o,i,d,l),i.child;case 11:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Ys(d,p),j2(o,i,d,p,l);case 7:return ya(o,i,i.pendingProps,l),i.child;case 8:return ya(o,i,i.pendingProps.children,l),i.child;case 12:return ya(o,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,p=i.pendingProps,w=i.memoizedProps,C=p.value,Ii(Wv,d._currentValue),d._currentValue=C,w!==null)if(tu(w.value,C)){if(w.children===p.children&&!ka.current){i=pl(o,i,l);break e}}else for(w=i.child,w!==null&&(w.return=i);w!==null;){var g=w.dependencies;if(g!==null){C=w.child;for(var S=g.firstContext;S!==null;){if(S.context===d){if(w.tag===1){S=cl(-1,l&-l),S.tag=2;var F=w.updateQueue;if(F!==null){F=F.shared;var R=F.pending;R===null?S.next=S:(S.next=R.next,R.next=S),F.pending=S}}w.lanes|=l,S=w.alternate,S!==null&&(S.lanes|=l),RA(w.return,l,i),g.lanes|=l;break}S=S.next}}else if(w.tag===10)C=w.type===i.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(jn(341));C.lanes|=l,g=C.alternate,g!==null&&(g.lanes|=l),RA(C,l,i),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===i){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}ya(o,i,p.children,l),i=i.child}return i;case 9:return p=i.type,d=i.pendingProps.children,Vd(i,l),p=Is(p),d=d(p),i.flags|=1,ya(o,i,d,l),i.child;case 14:return d=i.type,p=Ys(d,i.pendingProps),p=Ys(d.type,p),Z2(o,i,d,p,l);case 15:return h3(o,i,i.type,i.pendingProps,l);case 17:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Ys(d,p),Dv(o,i),i.tag=1,Fa(d)?(o=!0,Kv(i)):o=!1,Vd(i,l),c3(i,d,p),xA(i,d,p,l),PA(null,i,d,!0,o,l);case 19:return v3(o,i,l);case 22:return p3(o,i,l)}throw Error(jn(156,i.tag))};function O3(o,i){return sk(o,i)}function N9(o,i,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(o,i,l,d){return new N9(o,i,l,d)}function BI(o){return o=o.prototype,!(!o||!o.isReactComponent)}function x9(o){if(typeof o=="function")return BI(o)?1:0;if(o!=null){if(o=o.$$typeof,o===iI)return 11;if(o===oI)return 14}return 2}function tc(o,i){var l=o.alternate;return l===null?(l=ws(o.tag,i,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=i,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&14680064,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,i=o.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l}function Lv(o,i,l,d,p,w){var C=2;if(d=o,typeof o=="function")BI(o)&&(C=1);else if(typeof o=="string")C=5;else e:switch(o){case Nd:return Qc(l.children,p,w,i);case rI:C=8,p|=8;break;case eA:return o=ws(12,l,i,p|2),o.elementType=eA,o.lanes=w,o;case tA:return o=ws(13,l,i,p),o.elementType=tA,o.lanes=w,o;case nA:return o=ws(19,l,i,p),o.elementType=nA,o.lanes=w,o;case HL:return _0(l,p,w,i);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case GL:C=10;break e;case qL:C=9;break e;case iI:C=11;break e;case oI:C=14;break e;case Gl:C=16,d=null;break e}throw Error(jn(130,o==null?o:typeof o,""))}return i=ws(C,l,i,p),i.elementType=o,i.type=d,i.lanes=w,i}function Qc(o,i,l,d){return o=ws(7,o,d,i),o.lanes=l,o}function _0(o,i,l,d){return o=ws(22,o,d,i),o.elementType=HL,o.lanes=l,o.stateNode={isHidden:!1},o}function G1(o,i,l){return o=ws(6,o,null,i),o.lanes=l,o}function q1(o,i,l){return i=ws(4,o.children!==null?o.children:[],o.key,i),i.lanes=l,i.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},i}function M9(o,i,l,d,p){this.tag=i,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w1(0),this.expirationTimes=w1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w1(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function jI(o,i,l,d,p,w,C,g,S){return o=new M9(o,i,l,g,S),i===1?(i=1,w===!0&&(i|=8)):i=0,w=ws(3,null,null,i),o.current=w,w.stateNode=o,w.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},wI(w),o}function D9(o,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rd,key:d==null?null:""+d,children:o,containerInfo:i,implementation:l}}function L3(o){if(!o)return rc;o=o._reactInternals;e:{if(cf(o)!==o||o.tag!==1)throw Error(jn(170));var i=o;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Fa(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(jn(171))}if(o.tag===1){var l=o.type;if(Fa(l))return Lk(o,l,i)}return i}function k3(o,i,l,d,p,w,C,g,S){return o=jI(l,d,!0,o,p,w,C,g,S),o.context=L3(null),l=o.current,d=va(),p=ec(l),w=cl(d,p),w.callback=i!=null?i:null,Ql(l,w,p),o.current.lanes=p,bg(o,p,d),Ua(o,d),o}function T0(o,i,l,d){var p=i.current,w=va(),C=ec(p);return l=L3(l),i.context===null?i.context=l:i.pendingContext=l,i=cl(w,C),i.payload={element:o},d=d===void 0?null:d,d!==null&&(i.callback=d),o=Ql(p,i,C),o!==null&&(eu(o,p,C,w),Nv(o,p,C)),C}function o0(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function J2(o,i){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<i?l:i}}function ZI(o,i){J2(o,i),(o=o.alternate)&&J2(o,i)}function P9(){return null}var F3=typeof reportError=="function"?reportError:function(o){console.error(o)};function GI(o){this._internalRoot=o}S0.prototype.render=GI.prototype.render=function(o){var i=this._internalRoot;if(i===null)throw Error(jn(409));T0(o,i,null,null)};S0.prototype.unmount=GI.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var i=o.containerInfo;af(function(){T0(null,o,null,null)}),i[dl]=null}};function S0(o){this._internalRoot=o}S0.prototype.unstable_scheduleHydration=function(o){if(o){var i=pk();o={blockedOn:null,target:o,priority:i};for(var l=0;l<Hl.length&&i!==0&&i<Hl[l].priority;l++);Hl.splice(l,0,o),l===0&&mk(o)}};function qI(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function w0(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function eD(){}function O9(o,i,l,d,p){if(p){if(typeof d=="function"){var w=d;d=function(){var F=o0(C);w.call(F)}}var C=k3(i,d,o,0,null,!1,!1,"",eD);return o._reactRootContainer=C,o[dl]=C.current,hg(o.nodeType===8?o.parentNode:o),af(),C}for(;p=o.lastChild;)o.removeChild(p);if(typeof d=="function"){var g=d;d=function(){var F=o0(S);g.call(F)}}var S=jI(o,0,!1,null,null,!1,!1,"",eD);return o._reactRootContainer=S,o[dl]=S.current,hg(o.nodeType===8?o.parentNode:o),af(function(){T0(i,S,l,d)}),S}function A0(o,i,l,d,p){var w=l._reactRootContainer;if(w){var C=w;if(typeof p=="function"){var g=p;p=function(){var S=o0(C);g.call(S)}}T0(i,C,o,p)}else C=O9(l,i,o,p,d);return o0(C)}dk=function(o){switch(o.tag){case 3:var i=o.stateNode;if(i.current.memoizedState.isDehydrated){var l=Hp(i.pendingLanes);l!==0&&(uI(i,l|1),Ua(i,lo()),!(Xr&6)&&(Jd=lo()+500,ac()))}break;case 13:af(function(){var d=hl(o,1);if(d!==null){var p=va();eu(d,o,1,p)}}),ZI(o,1)}};lI=function(o){if(o.tag===13){var i=hl(o,134217728);if(i!==null){var l=va();eu(i,o,134217728,l)}ZI(o,134217728)}};hk=function(o){if(o.tag===13){var i=ec(o),l=hl(o,i);if(l!==null){var d=va();eu(l,o,i,d)}ZI(o,i)}};pk=function(){return di};gk=function(o,i){var l=di;try{return di=o,i()}finally{di=l}};dA=function(o,i,l){switch(i){case"input":if(oA(o,l),i=l.name,l.type==="radio"&&i!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==o&&d.form===o.form){var p=p0(d);if(!p)throw Error(jn(90));KL(d),oA(d,p)}}}break;case"textarea":YL(o,l);break;case"select":i=l.value,i!=null&&Zd(o,!!l.multiple,i,!1)}};tk=kI;nk=af;var L9={usingClientEntryPoint:!1,Events:[Ng,Pd,p0,JL,ek,kI]},Bp={findFiberByHostInstance:zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k9={bundleType:Bp.bundleType,version:Bp.version,rendererPackageName:Bp.rendererPackageName,rendererConfig:Bp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gl.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ok(o),o===null?null:o.stateNode},findFiberByHostInstance:Bp.findFiberByHostInstance||P9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ev.isDisabled&&Ev.supportsFiber)try{c0=Ev.inject(k9),Au=Ev}catch(o){}}cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L9;cs.createPortal=function(o,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qI(i))throw Error(jn(200));return D9(o,i,null,l)};cs.createRoot=function(o,i){if(!qI(o))throw Error(jn(299));var l=!1,d="",p=F3;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=jI(o,1,!1,null,null,l,!1,d,p),o[dl]=i.current,hg(o.nodeType===8?o.parentNode:o),new GI(i)};cs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var i=o._reactInternals;if(i===void 0)throw typeof o.render=="function"?Error(jn(188)):(o=Object.keys(o).join(","),Error(jn(268,o)));return o=ok(i),o=o===null?null:o.stateNode,o};cs.flushSync=function(o){return af(o)};cs.hydrate=function(o,i,l){if(!w0(i))throw Error(jn(200));return A0(null,o,i,!0,l)};cs.hydrateRoot=function(o,i,l){if(!qI(o))throw Error(jn(405));var d=l!=null&&l.hydratedSources||null,p=!1,w="",C=F3;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),i=k3(i,null,o,1,l!=null?l:null,p,!1,w,C),o[dl]=i.current,hg(o),d)for(o=0;o<d.length;o++)l=d[o],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new S0(i)};cs.render=function(o,i,l){if(!w0(i))throw Error(jn(200));return A0(null,o,i,!1,l)};cs.unmountComponentAtNode=function(o){if(!w0(o))throw Error(jn(40));return o._reactRootContainer?(af(function(){A0(null,null,o,!1,function(){o._reactRootContainer=null,o[dl]=null})}),!0):!1};cs.unstable_batchedUpdates=kI;cs.unstable_renderSubtreeIntoContainer=function(o,i,l,d){if(!w0(l))throw Error(jn(200));if(o==null||o._reactInternals===void 0)throw Error(jn(38));return A0(o,i,l,!1,d)};cs.version="18.3.1-next-f1338f8080-20240426";function U3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U3)}catch(o){console.error(o)}}U3(),UL.exports=cs;var F9=UL.exports,tD=F9;Qw.createRoot=tD.createRoot,Qw.hydrateRoot=tD.hydrateRoot;var B3={exports:{}},H1,nD;function ff(){if(nD)return H1;nD=1;function o(i){var l=typeof i;return i!=null&&(l=="object"||l=="function")}return H1=o,H1}var V1,rD;function j3(){if(rD)return V1;rD=1;var o=typeof Kc=="object"&&Kc&&Kc.Object===Object&&Kc;return V1=o,V1}var K1,iD;function Cu(){if(iD)return K1;iD=1;var o=j3(),i=typeof self=="object"&&self&&self.Object===Object&&self,l=o||i||Function("return this")();return K1=l,K1}var z1,oD;function U9(){if(oD)return z1;oD=1;var o=Cu(),i=function(){return o.Date.now()};return z1=i,z1}var Y1,aD;function B9(){if(aD)return Y1;aD=1;var o=/\s/;function i(l){for(var d=l.length;d--&&o.test(l.charAt(d)););return d}return Y1=i,Y1}var W1,sD;function j9(){if(sD)return W1;sD=1;var o=B9(),i=/^\s+/;function l(d){return d&&d.slice(0,o(d)+1).replace(i,"")}return W1=l,W1}var X1,uD;function Mg(){if(uD)return X1;uD=1;var o=Cu(),i=o.Symbol;return X1=i,X1}var $1,lD;function Z9(){if(lD)return $1;lD=1;var o=Mg(),i=Object.prototype,l=i.hasOwnProperty,d=i.toString,p=o?o.toStringTag:void 0;function w(C){var g=l.call(C,p),S=C[p];try{C[p]=void 0;var F=!0}catch(v){}var R=d.call(C);return F&&(g?C[p]=S:delete C[p]),R}return $1=w,$1}var Q1,cD;function G9(){if(cD)return Q1;cD=1;var o=Object.prototype,i=o.toString;function l(d){return i.call(d)}return Q1=l,Q1}var J1,fD;function Dg(){if(fD)return J1;fD=1;var o=Mg(),i=Z9(),l=G9(),d="[object Null]",p="[object Undefined]",w=o?o.toStringTag:void 0;function C(g){return g==null?g===void 0?p:d:w&&w in Object(g)?i(g):l(g)}return J1=C,J1}var eT,dD;function oh(){if(dD)return eT;dD=1;function o(i){return i!=null&&typeof i=="object"}return eT=o,eT}var tT,hD;function Pg(){if(hD)return tT;hD=1;var o=Dg(),i=oh(),l="[object Symbol]";function d(p){return typeof p=="symbol"||i(p)&&o(p)==l}return tT=d,tT}var nT,pD;function q9(){if(pD)return nT;pD=1;var o=j9(),i=ff(),l=Pg(),d=NaN,p=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,C=/^0o[0-7]+$/i,g=parseInt;function S(F){if(typeof F=="number")return F;if(l(F))return d;if(i(F)){var R=typeof F.valueOf=="function"?F.valueOf():F;F=i(R)?R+"":R}if(typeof F!="string")return F===0?F:+F;F=o(F);var v=w.test(F);return v||C.test(F)?g(F.slice(2),v?2:8):p.test(F)?d:+F}return nT=S,nT}var rT,gD;function Z3(){if(gD)return rT;gD=1;var o=ff(),i=U9(),l=q9(),d="Expected a function",p=Math.max,w=Math.min;function C(g,S,F){var R,v,y,O,m,T,U=0,x=!1,_=!1,I=!0;if(typeof g!="function")throw new TypeError(d);S=l(S)||0,o(F)&&(x=!!F.leading,_="maxWait"in F,y=_?p(l(F.maxWait)||0,S):y,I="trailing"in F?!!F.trailing:I);function b(oe){var ye=R,be=v;return R=v=void 0,U=oe,O=g.apply(be,ye),O}function j(oe){return U=oe,m=setTimeout(X,S),x?b(oe):O}function Y(oe){var ye=oe-T,be=oe-U,$e=S-ye;return _?w($e,y-be):$e}function W(oe){var ye=oe-T,be=oe-U;return T===void 0||ye>=S||ye<0||_&&be>=y}function X(){var oe=i();if(W(oe))return se(oe);m=setTimeout(X,Y(oe))}function se(oe){return m=void 0,I&&R?b(oe):(R=v=void 0,O)}function N(){m!==void 0&&clearTimeout(m),U=0,R=T=v=m=void 0}function $(){return m===void 0?O:se(i())}function ce(){var oe=i(),ye=W(oe);if(R=arguments,v=this,T=oe,ye){if(m===void 0)return j(T);if(_)return clearTimeout(m),m=setTimeout(X,S),b(T)}return m===void 0&&(m=setTimeout(X,S)),O}return ce.cancel=N,ce.flush=$,ce}return rT=C,rT}var iT,mD;function G3(){if(mD)return iT;mD=1;var o=Dg(),i=ff(),l="[object AsyncFunction]",d="[object Function]",p="[object GeneratorFunction]",w="[object Proxy]";function C(g){if(!i(g))return!1;var S=o(g);return S==d||S==p||S==l||S==w}return iT=C,iT}var oT,yD;function H9(){if(yD)return oT;yD=1;var o=Cu(),i=o["__core-js_shared__"];return oT=i,oT}var aT,vD;function V9(){if(vD)return aT;vD=1;var o=H9(),i=function(){var d=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function l(d){return!!i&&i in d}return aT=l,aT}var sT,ED;function q3(){if(ED)return sT;ED=1;var o=Function.prototype,i=o.toString;function l(d){if(d!=null){try{return i.call(d)}catch(p){}try{return d+""}catch(p){}}return""}return sT=l,sT}var uT,_D;function K9(){if(_D)return uT;_D=1;var o=G3(),i=V9(),l=ff(),d=q3(),p=/[\\^$.*+?()[\]{}|]/g,w=/^\[object .+?Constructor\]$/,C=Function.prototype,g=Object.prototype,S=C.toString,F=g.hasOwnProperty,R=RegExp("^"+S.call(F).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(y){if(!l(y)||i(y))return!1;var O=o(y)?R:w;return O.test(d(y))}return uT=v,uT}var lT,TD;function z9(){if(TD)return lT;TD=1;function o(i,l){return i==null?void 0:i[l]}return lT=o,lT}var cT,SD;function df(){if(SD)return cT;SD=1;var o=K9(),i=z9();function l(d,p){var w=i(d,p);return o(w)?w:void 0}return cT=l,cT}var fT,wD;function I0(){if(wD)return fT;wD=1;var o=df(),i=o(Object,"create");return fT=i,fT}var dT,AD;function Y9(){if(AD)return dT;AD=1;var o=I0();function i(){this.__data__=o?o(null):{},this.size=0}return dT=i,dT}var hT,ID;function W9(){if(ID)return hT;ID=1;function o(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l}return hT=o,hT}var pT,CD;function X9(){if(CD)return pT;CD=1;var o=I0(),i="__lodash_hash_undefined__",l=Object.prototype,d=l.hasOwnProperty;function p(w){var C=this.__data__;if(o){var g=C[w];return g===i?void 0:g}return d.call(C,w)?C[w]:void 0}return pT=p,pT}var gT,bD;function $9(){if(bD)return gT;bD=1;var o=I0(),i=Object.prototype,l=i.hasOwnProperty;function d(p){var w=this.__data__;return o?w[p]!==void 0:l.call(w,p)}return gT=d,gT}var mT,RD;function Q9(){if(RD)return mT;RD=1;var o=I0(),i="__lodash_hash_undefined__";function l(d,p){var w=this.__data__;return this.size+=this.has(d)?0:1,w[d]=o&&p===void 0?i:p,this}return mT=l,mT}var yT,ND;function J9(){if(ND)return yT;ND=1;var o=Y9(),i=W9(),l=X9(),d=$9(),p=Q9();function w(C){var g=-1,S=C==null?0:C.length;for(this.clear();++g<S;){var F=C[g];this.set(F[0],F[1])}}return w.prototype.clear=o,w.prototype.delete=i,w.prototype.get=l,w.prototype.has=d,w.prototype.set=p,yT=w,yT}var vT,xD;function eG(){if(xD)return vT;xD=1;function o(){this.__data__=[],this.size=0}return vT=o,vT}var ET,MD;function HI(){if(MD)return ET;MD=1;function o(i,l){return i===l||i!==i&&l!==l}return ET=o,ET}var _T,DD;function C0(){if(DD)return _T;DD=1;var o=HI();function i(l,d){for(var p=l.length;p--;)if(o(l[p][0],d))return p;return-1}return _T=i,_T}var TT,PD;function tG(){if(PD)return TT;PD=1;var o=C0(),i=Array.prototype,l=i.splice;function d(p){var w=this.__data__,C=o(w,p);if(C<0)return!1;var g=w.length-1;return C==g?w.pop():l.call(w,C,1),--this.size,!0}return TT=d,TT}var ST,OD;function nG(){if(OD)return ST;OD=1;var o=C0();function i(l){var d=this.__data__,p=o(d,l);return p<0?void 0:d[p][1]}return ST=i,ST}var wT,LD;function rG(){if(LD)return wT;LD=1;var o=C0();function i(l){return o(this.__data__,l)>-1}return wT=i,wT}var AT,kD;function iG(){if(kD)return AT;kD=1;var o=C0();function i(l,d){var p=this.__data__,w=o(p,l);return w<0?(++this.size,p.push([l,d])):p[w][1]=d,this}return AT=i,AT}var IT,FD;function b0(){if(FD)return IT;FD=1;var o=eG(),i=tG(),l=nG(),d=rG(),p=iG();function w(C){var g=-1,S=C==null?0:C.length;for(this.clear();++g<S;){var F=C[g];this.set(F[0],F[1])}}return w.prototype.clear=o,w.prototype.delete=i,w.prototype.get=l,w.prototype.has=d,w.prototype.set=p,IT=w,IT}var CT,UD;function VI(){if(UD)return CT;UD=1;var o=df(),i=Cu(),l=o(i,"Map");return CT=l,CT}var bT,BD;function oG(){if(BD)return bT;BD=1;var o=J9(),i=b0(),l=VI();function d(){this.size=0,this.__data__={hash:new o,map:new(l||i),string:new o}}return bT=d,bT}var RT,jD;function aG(){if(jD)return RT;jD=1;function o(i){var l=typeof i;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?i!=="__proto__":i===null}return RT=o,RT}var NT,ZD;function R0(){if(ZD)return NT;ZD=1;var o=aG();function i(l,d){var p=l.__data__;return o(d)?p[typeof d=="string"?"string":"hash"]:p.map}return NT=i,NT}var xT,GD;function sG(){if(GD)return xT;GD=1;var o=R0();function i(l){var d=o(this,l).delete(l);return this.size-=d?1:0,d}return xT=i,xT}var MT,qD;function uG(){if(qD)return MT;qD=1;var o=R0();function i(l){return o(this,l).get(l)}return MT=i,MT}var DT,HD;function lG(){if(HD)return DT;HD=1;var o=R0();function i(l){return o(this,l).has(l)}return DT=i,DT}var PT,VD;function cG(){if(VD)return PT;VD=1;var o=R0();function i(l,d){var p=o(this,l),w=p.size;return p.set(l,d),this.size+=p.size==w?0:1,this}return PT=i,PT}var OT,KD;function KI(){if(KD)return OT;KD=1;var o=oG(),i=sG(),l=uG(),d=lG(),p=cG();function w(C){var g=-1,S=C==null?0:C.length;for(this.clear();++g<S;){var F=C[g];this.set(F[0],F[1])}}return w.prototype.clear=o,w.prototype.delete=i,w.prototype.get=l,w.prototype.has=d,w.prototype.set=p,OT=w,OT}var LT,zD;function fG(){if(zD)return LT;zD=1;var o="__lodash_hash_undefined__";function i(l){return this.__data__.set(l,o),this}return LT=i,LT}var kT,YD;function dG(){if(YD)return kT;YD=1;function o(i){return this.__data__.has(i)}return kT=o,kT}var FT,WD;function H3(){if(WD)return FT;WD=1;var o=KI(),i=fG(),l=dG();function d(p){var w=-1,C=p==null?0:p.length;for(this.__data__=new o;++w<C;)this.add(p[w])}return d.prototype.add=d.prototype.push=i,d.prototype.has=l,FT=d,FT}var UT,XD;function hG(){if(XD)return UT;XD=1;function o(i,l,d,p){for(var w=i.length,C=d+(p?1:-1);p?C--:++C<w;)if(l(i[C],C,i))return C;return-1}return UT=o,UT}var BT,$D;function pG(){if($D)return BT;$D=1;function o(i){return i!==i}return BT=o,BT}var jT,QD;function gG(){if(QD)return jT;QD=1;function o(i,l,d){for(var p=d-1,w=i.length;++p<w;)if(i[p]===l)return p;return-1}return jT=o,jT}var ZT,JD;function mG(){if(JD)return ZT;JD=1;var o=hG(),i=pG(),l=gG();function d(p,w,C){return w===w?l(p,w,C):o(p,i,C)}return ZT=d,ZT}var GT,eP;function yG(){if(eP)return GT;eP=1;var o=mG();function i(l,d){var p=l==null?0:l.length;return!!p&&o(l,d,0)>-1}return GT=i,GT}var qT,tP;function vG(){if(tP)return qT;tP=1;function o(i,l,d){for(var p=-1,w=i==null?0:i.length;++p<w;)if(d(l,i[p]))return!0;return!1}return qT=o,qT}var HT,nP;function zI(){if(nP)return HT;nP=1;function o(i,l){for(var d=-1,p=i==null?0:i.length,w=Array(p);++d<p;)w[d]=l(i[d],d,i);return w}return HT=o,HT}var VT,rP;function YI(){if(rP)return VT;rP=1;function o(i){return function(l){return i(l)}}return VT=o,VT}var KT,iP;function V3(){if(iP)return KT;iP=1;function o(i,l){return i.has(l)}return KT=o,KT}var zT,oP;function EG(){if(oP)return zT;oP=1;var o=H3(),i=yG(),l=vG(),d=zI(),p=YI(),w=V3(),C=200;function g(S,F,R,v){var y=-1,O=i,m=!0,T=S.length,U=[],x=F.length;if(!T)return U;R&&(F=d(F,p(R))),v?(O=l,m=!1):F.length>=C&&(O=w,m=!1,F=new o(F));e:for(;++y<T;){var _=S[y],I=R==null?_:R(_);if(_=v||_!==0?_:0,m&&I===I){for(var b=x;b--;)if(F[b]===I)continue e;U.push(_)}else O(F,I,v)||U.push(_)}return U}return zT=g,zT}var YT,aP;function K3(){if(aP)return YT;aP=1;function o(i,l){for(var d=-1,p=l.length,w=i.length;++d<p;)i[w+d]=l[d];return i}return YT=o,YT}var WT,sP;function _G(){if(sP)return WT;sP=1;var o=Dg(),i=oh(),l="[object Arguments]";function d(p){return i(p)&&o(p)==l}return WT=d,WT}var XT,uP;function WI(){if(uP)return XT;uP=1;var o=_G(),i=oh(),l=Object.prototype,d=l.hasOwnProperty,p=l.propertyIsEnumerable,w=o(function(){return arguments}())?o:function(C){return i(C)&&d.call(C,"callee")&&!p.call(C,"callee")};return XT=w,XT}var $T,lP;function bs(){if(lP)return $T;lP=1;var o=Array.isArray;return $T=o,$T}var QT,cP;function TG(){if(cP)return QT;cP=1;var o=Mg(),i=WI(),l=bs(),d=o?o.isConcatSpreadable:void 0;function p(w){return l(w)||i(w)||!!(d&&w&&w[d])}return QT=p,QT}var JT,fP;function z3(){if(fP)return JT;fP=1;var o=K3(),i=TG();function l(d,p,w,C,g){var S=-1,F=d.length;for(w||(w=i),g||(g=[]);++S<F;){var R=d[S];p>0&&w(R)?p>1?l(R,p-1,w,C,g):o(g,R):C||(g[g.length]=R)}return g}return JT=l,JT}var eS,dP;function Og(){if(dP)return eS;dP=1;function o(i){return i}return eS=o,eS}var tS,hP;function SG(){if(hP)return tS;hP=1;function o(i,l,d){switch(d.length){case 0:return i.call(l);case 1:return i.call(l,d[0]);case 2:return i.call(l,d[0],d[1]);case 3:return i.call(l,d[0],d[1],d[2])}return i.apply(l,d)}return tS=o,tS}var nS,pP;function wG(){if(pP)return nS;pP=1;var o=SG(),i=Math.max;function l(d,p,w){return p=i(p===void 0?d.length-1:p,0),function(){for(var C=arguments,g=-1,S=i(C.length-p,0),F=Array(S);++g<S;)F[g]=C[p+g];g=-1;for(var R=Array(p+1);++g<p;)R[g]=C[g];return R[p]=w(F),o(d,this,R)}}return nS=l,nS}var rS,gP;function AG(){if(gP)return rS;gP=1;function o(i){return function(){return i}}return rS=o,rS}var iS,mP;function IG(){if(mP)return iS;mP=1;var o=df(),i=function(){try{var l=o(Object,"defineProperty");return l({},"",{}),l}catch(d){}}();return iS=i,iS}var oS,yP;function CG(){if(yP)return oS;yP=1;var o=AG(),i=IG(),l=Og(),d=i?function(p,w){return i(p,"toString",{configurable:!0,enumerable:!1,value:o(w),writable:!0})}:l;return oS=d,oS}var aS,vP;function bG(){if(vP)return aS;vP=1;var o=800,i=16,l=Date.now;function d(p){var w=0,C=0;return function(){var g=l(),S=i-(g-C);if(C=g,S>0){if(++w>=o)return arguments[0]}else w=0;return p.apply(void 0,arguments)}}return aS=d,aS}var sS,EP;function RG(){if(EP)return sS;EP=1;var o=CG(),i=bG(),l=i(o);return sS=l,sS}var uS,_P;function Y3(){if(_P)return uS;_P=1;var o=Og(),i=wG(),l=RG();function d(p,w){return l(i(p,w,o),p+"")}return uS=d,uS}var lS,TP;function XI(){if(TP)return lS;TP=1;var o=9007199254740991;function i(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=o}return lS=i,lS}var cS,SP;function Lg(){if(SP)return cS;SP=1;var o=G3(),i=XI();function l(d){return d!=null&&i(d.length)&&!o(d)}return cS=l,cS}var fS,wP;function NG(){if(wP)return fS;wP=1;var o=Lg(),i=oh();function l(d){return i(d)&&o(d)}return fS=l,fS}var dS,AP;function xG(){if(AP)return dS;AP=1;var o=EG(),i=z3(),l=Y3(),d=NG(),p=l(function(w,C){return d(w)?o(w,i(C,1,d,!0)):[]});return dS=p,dS}var hS,IP;function W3(){if(IP)return hS;IP=1;function o(i,l){for(var d=-1,p=i==null?0:i.length,w=0,C=[];++d<p;){var g=i[d];l(g,d,i)&&(C[w++]=g)}return C}return hS=o,hS}var pS,CP;function MG(){if(CP)return pS;CP=1;function o(i){return function(l,d,p){for(var w=-1,C=Object(l),g=p(l),S=g.length;S--;){var F=g[i?S:++w];if(d(C[F],F,C)===!1)break}return l}}return pS=o,pS}var gS,bP;function DG(){if(bP)return gS;bP=1;var o=MG(),i=o();return gS=i,gS}var mS,RP;function PG(){if(RP)return mS;RP=1;function o(i,l){for(var d=-1,p=Array(i);++d<i;)p[d]=l(d);return p}return mS=o,mS}var Kp={exports:{}},yS,NP;function OG(){if(NP)return yS;NP=1;function o(){return!1}return yS=o,yS}Kp.exports;var xP;function X3(){return xP||(xP=1,function(o,i){var l=Cu(),d=OG(),p=i&&!i.nodeType&&i,w=p&&!0&&o&&!o.nodeType&&o,C=w&&w.exports===p,g=C?l.Buffer:void 0,S=g?g.isBuffer:void 0,F=S||d;o.exports=F}(Kp,Kp.exports)),Kp.exports}var vS,MP;function $I(){if(MP)return vS;MP=1;var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function l(d,p){var w=typeof d;return p=p==null?o:p,!!p&&(w=="number"||w!="symbol"&&i.test(d))&&d>-1&&d%1==0&&d<p}return vS=l,vS}var ES,DP;function LG(){if(DP)return ES;DP=1;var o=Dg(),i=XI(),l=oh(),d="[object Arguments]",p="[object Array]",w="[object Boolean]",C="[object Date]",g="[object Error]",S="[object Function]",F="[object Map]",R="[object Number]",v="[object Object]",y="[object RegExp]",O="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",b="[object Int8Array]",j="[object Int16Array]",Y="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",se="[object Uint16Array]",N="[object Uint32Array]",$={};$[_]=$[I]=$[b]=$[j]=$[Y]=$[W]=$[X]=$[se]=$[N]=!0,$[d]=$[p]=$[U]=$[w]=$[x]=$[C]=$[g]=$[S]=$[F]=$[R]=$[v]=$[y]=$[O]=$[m]=$[T]=!1;function ce(oe){return l(oe)&&i(oe.length)&&!!$[o(oe)]}return ES=ce,ES}var zp={exports:{}};zp.exports;var PP;function kG(){return PP||(PP=1,function(o,i){var l=j3(),d=i&&!i.nodeType&&i,p=d&&!0&&o&&!o.nodeType&&o,w=p&&p.exports===d,C=w&&l.process,g=function(){try{var S=p&&p.require&&p.require("util").types;return S||C&&C.binding&&C.binding("util")}catch(F){}}();o.exports=g}(zp,zp.exports)),zp.exports}var _S,OP;function $3(){if(OP)return _S;OP=1;var o=LG(),i=YI(),l=kG(),d=l&&l.isTypedArray,p=d?i(d):o;return _S=p,_S}var TS,LP;function FG(){if(LP)return TS;LP=1;var o=PG(),i=WI(),l=bs(),d=X3(),p=$I(),w=$3(),C=Object.prototype,g=C.hasOwnProperty;function S(F,R){var v=l(F),y=!v&&i(F),O=!v&&!y&&d(F),m=!v&&!y&&!O&&w(F),T=v||y||O||m,U=T?o(F.length,String):[],x=U.length;for(var _ in F)(R||g.call(F,_))&&!(T&&(_=="length"||O&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,x)))&&U.push(_);return U}return TS=S,TS}var SS,kP;function UG(){if(kP)return SS;kP=1;var o=Object.prototype;function i(l){var d=l&&l.constructor,p=typeof d=="function"&&d.prototype||o;return l===p}return SS=i,SS}var wS,FP;function BG(){if(FP)return wS;FP=1;function o(i,l){return function(d){return i(l(d))}}return wS=o,wS}var AS,UP;function jG(){if(UP)return AS;UP=1;var o=BG(),i=o(Object.keys,Object);return AS=i,AS}var IS,BP;function ZG(){if(BP)return IS;BP=1;var o=UG(),i=jG(),l=Object.prototype,d=l.hasOwnProperty;function p(w){if(!o(w))return i(w);var C=[];for(var g in Object(w))d.call(w,g)&&g!="constructor"&&C.push(g);return C}return IS=p,IS}var CS,jP;function QI(){if(jP)return CS;jP=1;var o=FG(),i=ZG(),l=Lg();function d(p){return l(p)?o(p):i(p)}return CS=d,CS}var bS,ZP;function JI(){if(ZP)return bS;ZP=1;var o=DG(),i=QI();function l(d,p){return d&&o(d,p,i)}return bS=l,bS}var RS,GP;function GG(){if(GP)return RS;GP=1;var o=Lg();function i(l,d){return function(p,w){if(p==null)return p;if(!o(p))return l(p,w);for(var C=p.length,g=d?C:-1,S=Object(p);(d?g--:++g<C)&&w(S[g],g,S)!==!1;);return p}}return RS=i,RS}var NS,qP;function eC(){if(qP)return NS;qP=1;var o=JI(),i=GG(),l=i(o);return NS=l,NS}var xS,HP;function qG(){if(HP)return xS;HP=1;var o=eC();function i(l,d){var p=[];return o(l,function(w,C,g){d(w,C,g)&&p.push(w)}),p}return xS=i,xS}var MS,VP;function HG(){if(VP)return MS;VP=1;var o=b0();function i(){this.__data__=new o,this.size=0}return MS=i,MS}var DS,KP;function VG(){if(KP)return DS;KP=1;function o(i){var l=this.__data__,d=l.delete(i);return this.size=l.size,d}return DS=o,DS}var PS,zP;function KG(){if(zP)return PS;zP=1;function o(i){return this.__data__.get(i)}return PS=o,PS}var OS,YP;function zG(){if(YP)return OS;YP=1;function o(i){return this.__data__.has(i)}return OS=o,OS}var LS,WP;function YG(){if(WP)return LS;WP=1;var o=b0(),i=VI(),l=KI(),d=200;function p(w,C){var g=this.__data__;if(g instanceof o){var S=g.__data__;if(!i||S.length<d-1)return S.push([w,C]),this.size=++g.size,this;g=this.__data__=new l(S)}return g.set(w,C),this.size=g.size,this}return LS=p,LS}var kS,XP;function Q3(){if(XP)return kS;XP=1;var o=b0(),i=HG(),l=VG(),d=KG(),p=zG(),w=YG();function C(g){var S=this.__data__=new o(g);this.size=S.size}return C.prototype.clear=i,C.prototype.delete=l,C.prototype.get=d,C.prototype.has=p,C.prototype.set=w,kS=C,kS}var FS,$P;function WG(){if($P)return FS;$P=1;function o(i,l){for(var d=-1,p=i==null?0:i.length;++d<p;)if(l(i[d],d,i))return!0;return!1}return FS=o,FS}var US,QP;function J3(){if(QP)return US;QP=1;var o=H3(),i=WG(),l=V3(),d=1,p=2;function w(C,g,S,F,R,v){var y=S&d,O=C.length,m=g.length;if(O!=m&&!(y&&m>O))return!1;var T=v.get(C),U=v.get(g);if(T&&U)return T==g&&U==C;var x=-1,_=!0,I=S&p?new o:void 0;for(v.set(C,g),v.set(g,C);++x<O;){var b=C[x],j=g[x];if(F)var Y=y?F(j,b,x,g,C,v):F(b,j,x,C,g,v);if(Y!==void 0){if(Y)continue;_=!1;break}if(I){if(!i(g,function(W,X){if(!l(I,X)&&(b===W||R(b,W,S,F,v)))return I.push(X)})){_=!1;break}}else if(!(b===j||R(b,j,S,F,v))){_=!1;break}}return v.delete(C),v.delete(g),_}return US=w,US}var BS,JP;function XG(){if(JP)return BS;JP=1;var o=Cu(),i=o.Uint8Array;return BS=i,BS}var jS,eO;function $G(){if(eO)return jS;eO=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(p,w){d[++l]=[w,p]}),d}return jS=o,jS}var ZS,tO;function QG(){if(tO)return ZS;tO=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(p){d[++l]=p}),d}return ZS=o,ZS}var GS,nO;function JG(){if(nO)return GS;nO=1;var o=Mg(),i=XG(),l=HI(),d=J3(),p=$G(),w=QG(),C=1,g=2,S="[object Boolean]",F="[object Date]",R="[object Error]",v="[object Map]",y="[object Number]",O="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",x="[object ArrayBuffer]",_="[object DataView]",I=o?o.prototype:void 0,b=I?I.valueOf:void 0;function j(Y,W,X,se,N,$,ce){switch(X){case _:if(Y.byteLength!=W.byteLength||Y.byteOffset!=W.byteOffset)return!1;Y=Y.buffer,W=W.buffer;case x:return!(Y.byteLength!=W.byteLength||!$(new i(Y),new i(W)));case S:case F:case y:return l(+Y,+W);case R:return Y.name==W.name&&Y.message==W.message;case O:case T:return Y==W+"";case v:var oe=p;case m:var ye=se&C;if(oe||(oe=w),Y.size!=W.size&&!ye)return!1;var be=ce.get(Y);if(be)return be==W;se|=g,ce.set(Y,W);var $e=d(oe(Y),oe(W),se,N,$,ce);return ce.delete(Y),$e;case U:if(b)return b.call(Y)==b.call(W)}return!1}return GS=j,GS}var qS,rO;function eq(){if(rO)return qS;rO=1;var o=K3(),i=bs();function l(d,p,w){var C=p(d);return i(d)?C:o(C,w(d))}return qS=l,qS}var HS,iO;function tq(){if(iO)return HS;iO=1;function o(){return[]}return HS=o,HS}var VS,oO;function nq(){if(oO)return VS;oO=1;var o=W3(),i=tq(),l=Object.prototype,d=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,w=p?function(C){return C==null?[]:(C=Object(C),o(p(C),function(g){return d.call(C,g)}))}:i;return VS=w,VS}var KS,aO;function rq(){if(aO)return KS;aO=1;var o=eq(),i=nq(),l=QI();function d(p){return o(p,l,i)}return KS=d,KS}var zS,sO;function iq(){if(sO)return zS;sO=1;var o=rq(),i=1,l=Object.prototype,d=l.hasOwnProperty;function p(w,C,g,S,F,R){var v=g&i,y=o(w),O=y.length,m=o(C),T=m.length;if(O!=T&&!v)return!1;for(var U=O;U--;){var x=y[U];if(!(v?x in C:d.call(C,x)))return!1}var _=R.get(w),I=R.get(C);if(_&&I)return _==C&&I==w;var b=!0;R.set(w,C),R.set(C,w);for(var j=v;++U<O;){x=y[U];var Y=w[x],W=C[x];if(S)var X=v?S(W,Y,x,C,w,R):S(Y,W,x,w,C,R);if(!(X===void 0?Y===W||F(Y,W,g,S,R):X)){b=!1;break}j||(j=x=="constructor")}if(b&&!j){var se=w.constructor,N=C.constructor;se!=N&&"constructor"in w&&"constructor"in C&&!(typeof se=="function"&&se instanceof se&&typeof N=="function"&&N instanceof N)&&(b=!1)}return R.delete(w),R.delete(C),b}return zS=p,zS}var YS,uO;function oq(){if(uO)return YS;uO=1;var o=df(),i=Cu(),l=o(i,"DataView");return YS=l,YS}var WS,lO;function aq(){if(lO)return WS;lO=1;var o=df(),i=Cu(),l=o(i,"Promise");return WS=l,WS}var XS,cO;function sq(){if(cO)return XS;cO=1;var o=df(),i=Cu(),l=o(i,"Set");return XS=l,XS}var $S,fO;function uq(){if(fO)return $S;fO=1;var o=df(),i=Cu(),l=o(i,"WeakMap");return $S=l,$S}var QS,dO;function lq(){if(dO)return QS;dO=1;var o=oq(),i=VI(),l=aq(),d=sq(),p=uq(),w=Dg(),C=q3(),g="[object Map]",S="[object Object]",F="[object Promise]",R="[object Set]",v="[object WeakMap]",y="[object DataView]",O=C(o),m=C(i),T=C(l),U=C(d),x=C(p),_=w;return(o&&_(new o(new ArrayBuffer(1)))!=y||i&&_(new i)!=g||l&&_(l.resolve())!=F||d&&_(new d)!=R||p&&_(new p)!=v)&&(_=function(I){var b=w(I),j=b==S?I.constructor:void 0,Y=j?C(j):"";if(Y)switch(Y){case O:return y;case m:return g;case T:return F;case U:return R;case x:return v}return b}),QS=_,QS}var JS,hO;function cq(){if(hO)return JS;hO=1;var o=Q3(),i=J3(),l=JG(),d=iq(),p=lq(),w=bs(),C=X3(),g=$3(),S=1,F="[object Arguments]",R="[object Array]",v="[object Object]",y=Object.prototype,O=y.hasOwnProperty;function m(T,U,x,_,I,b){var j=w(T),Y=w(U),W=j?R:p(T),X=Y?R:p(U);W=W==F?v:W,X=X==F?v:X;var se=W==v,N=X==v,$=W==X;if($&&C(T)){if(!C(U))return!1;j=!0,se=!1}if($&&!se)return b||(b=new o),j||g(T)?i(T,U,x,_,I,b):l(T,U,W,x,_,I,b);if(!(x&S)){var ce=se&&O.call(T,"__wrapped__"),oe=N&&O.call(U,"__wrapped__");if(ce||oe){var ye=ce?T.value():T,be=oe?U.value():U;return b||(b=new o),I(ye,be,x,_,b)}}return $?(b||(b=new o),d(T,U,x,_,I,b)):!1}return JS=m,JS}var ew,pO;function eF(){if(pO)return ew;pO=1;var o=cq(),i=oh();function l(d,p,w,C,g){return d===p?!0:d==null||p==null||!i(d)&&!i(p)?d!==d&&p!==p:o(d,p,w,C,l,g)}return ew=l,ew}var tw,gO;function fq(){if(gO)return tw;gO=1;var o=Q3(),i=eF(),l=1,d=2;function p(w,C,g,S){var F=g.length,R=F,v=!S;if(w==null)return!R;for(w=Object(w);F--;){var y=g[F];if(v&&y[2]?y[1]!==w[y[0]]:!(y[0]in w))return!1}for(;++F<R;){y=g[F];var O=y[0],m=w[O],T=y[1];if(v&&y[2]){if(m===void 0&&!(O in w))return!1}else{var U=new o;if(S)var x=S(m,T,O,w,C,U);if(!(x===void 0?i(T,m,l|d,S,U):x))return!1}}return!0}return tw=p,tw}var nw,mO;function tF(){if(mO)return nw;mO=1;var o=ff();function i(l){return l===l&&!o(l)}return nw=i,nw}var rw,yO;function dq(){if(yO)return rw;yO=1;var o=tF(),i=QI();function l(d){for(var p=i(d),w=p.length;w--;){var C=p[w],g=d[C];p[w]=[C,g,o(g)]}return p}return rw=l,rw}var iw,vO;function nF(){if(vO)return iw;vO=1;function o(i,l){return function(d){return d==null?!1:d[i]===l&&(l!==void 0||i in Object(d))}}return iw=o,iw}var ow,EO;function hq(){if(EO)return ow;EO=1;var o=fq(),i=dq(),l=nF();function d(p){var w=i(p);return w.length==1&&w[0][2]?l(w[0][0],w[0][1]):function(C){return C===p||o(C,p,w)}}return ow=d,ow}var aw,_O;function tC(){if(_O)return aw;_O=1;var o=bs(),i=Pg(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function p(w,C){if(o(w))return!1;var g=typeof w;return g=="number"||g=="symbol"||g=="boolean"||w==null||i(w)?!0:d.test(w)||!l.test(w)||C!=null&&w in Object(C)}return aw=p,aw}var sw,TO;function pq(){if(TO)return sw;TO=1;var o=KI(),i="Expected a function";function l(d,p){if(typeof d!="function"||p!=null&&typeof p!="function")throw new TypeError(i);var w=function(){var C=arguments,g=p?p.apply(this,C):C[0],S=w.cache;if(S.has(g))return S.get(g);var F=d.apply(this,C);return w.cache=S.set(g,F)||S,F};return w.cache=new(l.Cache||o),w}return l.Cache=o,sw=l,sw}var uw,SO;function gq(){if(SO)return uw;SO=1;var o=pq(),i=500;function l(d){var p=o(d,function(C){return w.size===i&&w.clear(),C}),w=p.cache;return p}return uw=l,uw}var lw,wO;function mq(){if(wO)return lw;wO=1;var o=gq(),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=o(function(p){var w=[];return p.charCodeAt(0)===46&&w.push(""),p.replace(i,function(C,g,S,F){w.push(S?F.replace(l,"$1"):g||C)}),w});return lw=d,lw}var cw,AO;function yq(){if(AO)return cw;AO=1;var o=Mg(),i=zI(),l=bs(),d=Pg(),p=1/0,w=o?o.prototype:void 0,C=w?w.toString:void 0;function g(S){if(typeof S=="string")return S;if(l(S))return i(S,g)+"";if(d(S))return C?C.call(S):"";var F=S+"";return F=="0"&&1/S==-p?"-0":F}return cw=g,cw}var fw,IO;function rF(){if(IO)return fw;IO=1;var o=yq();function i(l){return l==null?"":o(l)}return fw=i,fw}var dw,CO;function iF(){if(CO)return dw;CO=1;var o=bs(),i=tC(),l=mq(),d=rF();function p(w,C){return o(w)?w:i(w,C)?[w]:l(d(w))}return dw=p,dw}var hw,bO;function N0(){if(bO)return hw;bO=1;var o=Pg(),i=1/0;function l(d){if(typeof d=="string"||o(d))return d;var p=d+"";return p=="0"&&1/d==-i?"-0":p}return hw=l,hw}var pw,RO;function nC(){if(RO)return pw;RO=1;var o=iF(),i=N0();function l(d,p){p=o(p,d);for(var w=0,C=p.length;d!=null&&w<C;)d=d[i(p[w++])];return w&&w==C?d:void 0}return pw=l,pw}var gw,NO;function vq(){if(NO)return gw;NO=1;var o=nC();function i(l,d,p){var w=l==null?void 0:o(l,d);return w===void 0?p:w}return gw=i,gw}var mw,xO;function Eq(){if(xO)return mw;xO=1;function o(i,l){return i!=null&&l in Object(i)}return mw=o,mw}var yw,MO;function _q(){if(MO)return yw;MO=1;var o=iF(),i=WI(),l=bs(),d=$I(),p=XI(),w=N0();function C(g,S,F){S=o(S,g);for(var R=-1,v=S.length,y=!1;++R<v;){var O=w(S[R]);if(!(y=g!=null&&F(g,O)))break;g=g[O]}return y||++R!=v?y:(v=g==null?0:g.length,!!v&&p(v)&&d(O,v)&&(l(g)||i(g)))}return yw=C,yw}var vw,DO;function Tq(){if(DO)return vw;DO=1;var o=Eq(),i=_q();function l(d,p){return d!=null&&i(d,p,o)}return vw=l,vw}var Ew,PO;function Sq(){if(PO)return Ew;PO=1;var o=eF(),i=vq(),l=Tq(),d=tC(),p=tF(),w=nF(),C=N0(),g=1,S=2;function F(R,v){return d(R)&&p(v)?w(C(R),v):function(y){var O=i(y,R);return O===void 0&&O===v?l(y,R):o(v,O,g|S)}}return Ew=F,Ew}var _w,OO;function wq(){if(OO)return _w;OO=1;function o(i){return function(l){return l==null?void 0:l[i]}}return _w=o,_w}var Tw,LO;function Aq(){if(LO)return Tw;LO=1;var o=nC();function i(l){return function(d){return o(d,l)}}return Tw=i,Tw}var Sw,kO;function Iq(){if(kO)return Sw;kO=1;var o=wq(),i=Aq(),l=tC(),d=N0();function p(w){return l(w)?o(d(w)):i(w)}return Sw=p,Sw}var ww,FO;function rC(){if(FO)return ww;FO=1;var o=hq(),i=Sq(),l=Og(),d=bs(),p=Iq();function w(C){return typeof C=="function"?C:C==null?l:typeof C=="object"?d(C)?i(C[0],C[1]):o(C):p(C)}return ww=w,ww}var Aw,UO;function Cq(){if(UO)return Aw;UO=1;var o=W3(),i=qG(),l=rC(),d=bs();function p(w,C){var g=d(w)?o:i;return g(w,l(C,3))}return Aw=p,Aw}var Iw,BO;function bq(){if(BO)return Iw;BO=1;function o(i,l,d){var p;return d(i,function(w,C,g){if(l(w,C,g))return p=C,!1}),p}return Iw=o,Iw}var Cw,jO;function Rq(){if(jO)return Cw;jO=1;var o=bq(),i=JI(),l=rC();function d(p,w){return o(p,l(w,3),i)}return Cw=d,Cw}var bw,ZO;function Nq(){if(ZO)return bw;ZO=1;function o(i){return i&&i.length?i[0]:void 0}return bw=o,bw}var Rw,GO;function xq(){return GO||(GO=1,Rw=Nq()),Rw}var Nw,qO;function Mq(){if(qO)return Nw;qO=1;function o(i,l){for(var d=-1,p=i==null?0:i.length;++d<p&&l(i[d],d,i)!==!1;);return i}return Nw=o,Nw}var xw,HO;function oF(){if(HO)return xw;HO=1;var o=Og();function i(l){return typeof l=="function"?l:o}return xw=i,xw}var Mw,VO;function Dq(){if(VO)return Mw;VO=1;var o=Mq(),i=eC(),l=oF(),d=bs();function p(w,C){var g=d(w)?o:i;return g(w,l(C))}return Mw=p,Mw}var Dw,KO;function Pq(){if(KO)return Dw;KO=1;var o=JI(),i=oF();function l(d,p){return d&&o(d,i(p))}return Dw=l,Dw}var Pw,zO;function Oq(){if(zO)return Pw;zO=1;function o(){}return Pw=o,Pw}var Ow,YO;function Lq(){if(YO)return Ow;YO=1;var o=eC(),i=Lg();function l(d,p){var w=-1,C=i(d)?Array(d.length):[];return o(d,function(g,S,F){C[++w]=p(g,S,F)}),C}return Ow=l,Ow}var Lw,WO;function kq(){if(WO)return Lw;WO=1;function o(i,l){var d=i.length;for(i.sort(l);d--;)i[d]=i[d].value;return i}return Lw=o,Lw}var kw,XO;function Fq(){if(XO)return kw;XO=1;var o=Pg();function i(l,d){if(l!==d){var p=l!==void 0,w=l===null,C=l===l,g=o(l),S=d!==void 0,F=d===null,R=d===d,v=o(d);if(!F&&!v&&!g&&l>d||g&&S&&R&&!F&&!v||w&&S&&R||!p&&R||!C)return 1;if(!w&&!g&&!v&&l<d||v&&p&&C&&!w&&!g||F&&p&&C||!S&&C||!R)return-1}return 0}return kw=i,kw}var Fw,$O;function Uq(){if($O)return Fw;$O=1;var o=Fq();function i(l,d,p){for(var w=-1,C=l.criteria,g=d.criteria,S=C.length,F=p.length;++w<S;){var R=o(C[w],g[w]);if(R){if(w>=F)return R;var v=p[w];return R*(v=="desc"?-1:1)}}return l.index-d.index}return Fw=i,Fw}var Uw,QO;function Bq(){if(QO)return Uw;QO=1;var o=zI(),i=nC(),l=rC(),d=Lq(),p=kq(),w=YI(),C=Uq(),g=Og(),S=bs();function F(R,v,y){v.length?v=o(v,function(T){return S(T)?function(U){return i(U,T.length===1?T[0]:T)}:T}):v=[g];var O=-1;v=o(v,w(l));var m=d(R,function(T,U,x){var _=o(v,function(I){return I(T)});return{criteria:_,index:++O,value:T}});return p(m,function(T,U){return C(T,U,y)})}return Uw=F,Uw}var Bw,JO;function jq(){if(JO)return Bw;JO=1;var o=HI(),i=Lg(),l=$I(),d=ff();function p(w,C,g){if(!d(g))return!1;var S=typeof C;return(S=="number"?i(g)&&l(C,g.length):S=="string"&&C in g)?o(g[C],w):!1}return Bw=p,Bw}var jw,eL;function Zq(){if(eL)return jw;eL=1;var o=z3(),i=Bq(),l=Y3(),d=jq(),p=l(function(w,C){if(w==null)return[];var g=C.length;return g>1&&d(w,C[0],C[1])?C=[]:g>2&&d(C[0],C[1],C[2])&&(C=[C[0]]),i(w,o(C,1),[])});return jw=p,jw}var Zw,tL;function Gq(){if(tL)return Zw;tL=1;var o=Z3(),i=ff(),l="Expected a function";function d(p,w,C){var g=!0,S=!0;if(typeof p!="function")throw new TypeError(l);return i(C)&&(g="leading"in C?!!C.leading:g,S="trailing"in C?!!C.trailing:S),o(p,w,{leading:g,maxWait:w,trailing:S})}return Zw=d,Zw}var Gw,nL;function qq(){if(nL)return Gw;nL=1;var o=rF(),i=0;function l(d){var p=++i;return o(d)+p}return Gw=l,Gw}(function(o,i){(function(l,d){o.exports=d(Z3(),xG(),Cq(),Rq(),xq(),Dq(),Pq(),Oq(),Zq(),Gq(),qq(),vn)})(Kc,function(l,d,p,w,C,g,S,F,R,v,y,O){return function(){var m={654:function(U,x,_){var I,b=this&&this.__assign||function(){return b=Object.assign||function(Ce){for(var te,Fe=1,P=arguments.length;Fe<P;Fe++)for(var M in te=arguments[Fe])Object.prototype.hasOwnProperty.call(te,M)&&(Ce[M]=te[M]);return Ce},b.apply(this,arguments)},j=this&&this.__createBinding||(Object.create?function(Ce,te,Fe,P){P===void 0&&(P=Fe);var M=Object.getOwnPropertyDescriptor(te,Fe);M&&!("get"in M?!te.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return te[Fe]}}),Object.defineProperty(Ce,P,M)}:function(Ce,te,Fe,P){P===void 0&&(P=Fe),Ce[P]=te[Fe]}),Y=this&&this.__setModuleDefault||(Object.create?function(Ce,te){Object.defineProperty(Ce,"default",{enumerable:!0,value:te})}:function(Ce,te){Ce.default=te}),W=this&&this.__importStar||function(Ce){if(Ce&&Ce.__esModule)return Ce;var te={};if(Ce!=null)for(var Fe in Ce)Fe!=="default"&&Object.prototype.hasOwnProperty.call(Ce,Fe)&&j(te,Ce,Fe);return Y(te,Ce),te},X=this&&this.__spreadArray||function(Ce,te,Fe){if(Fe||arguments.length===2)for(var P,M=0,q=te.length;M<q;M++)!P&&M in te||(P||(P=Array.prototype.slice.call(te,0,M)),P[M]=te[M]);return Ce.concat(P||Array.prototype.slice.call(te))},se=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(x,"__esModule",{value:!0}),x.doesFocusableExist=x.getCurrentFocusKey=x.updateAllLayouts=x.resume=x.pause=x.navigateByDirection=x.setFocus=x.setKeyMap=x.destroy=x.setThrottle=x.init=x.SpatialNavigation=x.ROOT_FOCUS_KEY=void 0;var N=se(_(150)),$=se(_(117)),ce=se(_(747)),oe=se(_(23)),ye=se(_(842)),be=se(_(682)),$e=se(_(784)),Ae=se(_(432)),Ze=se(_(67)),it=se(_(35)),lt=se(_(119)),Xe=W(_(964)),st="left",wt="right",Oe="up",Qe="down",ct="enter",Qt=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);x.ROOT_FOCUS_KEY="SN:ROOT";var Vt=["#0FF","#FF0","#F0F"],Tt={leading:!0,trailing:!1},Pt=function(){function Ce(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=lt.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Qt,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,N.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Ce.getCutoffCoordinate=function(te,Fe,P,M,q){var V=te?M.top:q===lt.default.LTR?M.left:M.right,he=te?M.bottom:q===lt.default.LTR?M.right:M.left;return Fe?P?V:he:P?he:V},Ce.getRefCorners=function(te,Fe,P){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(te){case Oe:var q=Fe?P.bottom:P.top;M.a={x:P.left,y:q},M.b={x:P.right,y:q};break;case Qe:q=Fe?P.top:P.bottom,M.a={x:P.left,y:q},M.b={x:P.right,y:q};break;case st:var V=Fe?P.right:P.left;M.a={x:V,y:P.top},M.b={x:V,y:P.bottom};break;case wt:V=Fe?P.left:P.right,M.a={x:V,y:P.top},M.b={x:V,y:P.bottom}}return M},Ce.isAdjacentSlice=function(te,Fe,P){var M=te.a,q=te.b,V=Fe.a,he=Fe.b,fe=P?"x":"y",He=M[fe],_t=q[fe],ot=V[fe],rt=he[fe],et=.2*(_t-He);return Math.max(0,Math.min(_t,rt)-Math.max(He,ot))>=et},Ce.getPrimaryAxisDistance=function(te,Fe,P){var M=te.a,q=Fe.a,V=P?"y":"x";return Math.abs(q[V]-M[V])},Ce.getSecondaryAxisDistance=function(te,Fe,P){var M=te.a,q=te.b,V=Fe.a,he=Fe.b,fe=P?"x":"y",He=M[fe],_t=q[fe],ot=V[fe],rt=he[fe],et=[];return et.push(Math.abs(ot-He)),et.push(Math.abs(ot-_t)),et.push(Math.abs(rt-He)),et.push(Math.abs(rt-_t)),Math.min.apply(Math,et)},Ce.prototype.sortSiblingsByPriority=function(te,Fe,P,M){var q=this,V=P===Qe||P===Oe,he=Ce.getRefCorners(P,!1,Fe);return(0,Ae.default)(te,function(fe){var He=Ce.getRefCorners(P,!0,fe.layout),_t=Ce.isAdjacentSlice(he,He,V),ot=_t?Ce.getPrimaryAxisDistance:Ce.getSecondaryAxisDistance,rt=_t?Ce.getSecondaryAxisDistance:Ce.getPrimaryAxisDistance,et=ot(he,He,V),ft=rt(he,He,V),yt=5*et+ft,Et=(yt+1)/(_t?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(fe.focusKey," relative to ").concat(M," is"),et,ft,yt),q.log("smartNavigate","priority for ".concat(fe.focusKey," relative to ").concat(M," is"),Et),q.visualDebugger&&(q.visualDebugger.drawPoint(He.a.x,He.a.y,"yellow",6),q.visualDebugger.drawPoint(He.b.x,He.b.y,"yellow",6)),Et})},Ce.prototype.init=function(te){var Fe=te===void 0?{}:te,P=Fe.debug,M=P!==void 0&&P,q=Fe.visualDebug,V=q!==void 0&&q,he=Fe.nativeMode,fe=he!==void 0&&he,He=Fe.throttle,_t=He===void 0?0:He,ot=Fe.throttleKeypresses,rt=ot!==void 0&&ot,et=Fe.useGetBoundingClientRect,ft=et!==void 0&&et,yt=Fe.shouldFocusDOMNode,Et=yt!==void 0&&yt,Ct=Fe.shouldUseNativeEvents,hn=Ct!==void 0&&Ct,$t=Fe.rtl,nn=$t!==void 0&&$t;this.enabled||(this.enabled=!0,this.nativeMode=fe,this.throttleKeypresses=rt,this.useGetBoundingClientRect=ft,this.shouldFocusDOMNode=Et&&!fe,this.shouldUseNativeEvents=hn,this.writingDirection=nn?lt.default.RTL:lt.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(_t)&&_t>0&&(this.throttle=_t),this.bindEventHandlers(),V&&(this.visualDebugger=new it.default(this.writingDirection),this.startDrawLayouts())))},Ce.prototype.setThrottle=function(te){var Fe=te===void 0?{}:te,P=Fe.throttle,M=P===void 0?0:P,q=Fe.throttleKeypresses,V=q!==void 0&&q;this.throttleKeypresses=V,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},Ce.prototype.startDrawLayouts=function(){var te=this,Fe=function(){requestAnimationFrame(function(){te.visualDebugger.clearLayouts(),(0,$e.default)(te.focusableComponents,function(P,M){te.visualDebugger.drawLayout(P.layout,M,P.parentFocusKey)}),Fe()})};Fe()},Ce.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Qt,this.unbindEventHandlers())},Ce.prototype.getEventType=function(te){return(0,oe.default)(this.getKeyMap(),function(Fe){return Fe.includes(te)})},Ce.getKeyCode=function(te){return te.keyCode||te.code},Ce.prototype.bindEventHandlers=function(){var te=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Fe){if(te.paused!==!0){te.debug&&(te.logIndex+=1);var P=Ce.getKeyCode(Fe),M=te.getEventType(P);if(M){te.pressedKeys[M]=te.pressedKeys[M]?te.pressedKeys[M]+1:1,te.shouldUseNativeEvents||(Fe.preventDefault(),Fe.stopPropagation());var q={pressedKeys:te.pressedKeys};M===ct&&te.focusKey?te.onEnterPress(q):te.onArrowPress(M,q)===!1?(te.log("keyDownEventListener","default navigation prevented"),te.visualDebugger&&te.visualDebugger.clear()):te.onKeyEvent(Fe)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,Ze.default)(this.keyDownEventListener.bind(this),this.throttle,Tt)),this.keyUpEventListener=function(Fe){var P=Ce.getKeyCode(Fe),M=te.getEventType(P);delete te.pressedKeys[M],te.throttle&&!te.throttleKeypresses&&te.keyDownEventListenerThrottled.cancel(),M===ct&&te.focusKey&&te.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Ce.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var te=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",te),this.keyDownEventListener=null}},Ce.prototype.onEnterPress=function(te){var Fe=this.focusableComponents[this.focusKey];Fe?Fe.focusable?Fe.onEnterPress&&Fe.onEnterPress(te):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Ce.prototype.onEnterRelease=function(){var te=this.focusableComponents[this.focusKey];te?te.focusable?te.onEnterRelease&&te.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Ce.prototype.onArrowPress=function(te,Fe){var P=this.focusableComponents[this.focusKey];if(P)return P&&P.onArrowPress&&P.onArrowPress(te,Fe);this.log("onArrowPress","noComponent")},Ce.prototype.navigateByDirection=function(te,Fe){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var P=[Qe,Oe,st,wt];P.includes(te)?(this.log("navigateByDirection","direction",te),this.smartNavigate(te,null,Fe)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(te,"`, but you can use only these: "),P)}},Ce.prototype.onKeyEvent=function(te){this.visualDebugger&&this.visualDebugger.clear();var Fe=Ce.getKeyCode(te),P=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(Fe)});this.smartNavigate(P,null,{event:te})},Ce.prototype.smartNavigate=function(te,Fe,P){var M=this;if(!this.nativeMode){var q=te===Qe||te===Oe,V=te===Qe||(this.writingDirection===lt.default.LTR?te===wt:te===st);this.log("smartNavigate","direction",te),this.log("smartNavigate","fromParentFocusKey",Fe),this.log("smartNavigate","this.focusKey",this.focusKey),Fe||(0,$e.default)(this.focusableComponents,function(hn){hn.layoutUpdated=!1});var he=this.focusableComponents[Fe||this.focusKey];if(Fe||he){if(this.log("smartNavigate","currentComponent",he?he.focusKey:void 0,he?he.node:void 0,he),he){this.updateLayout(he.focusKey);var fe=he.parentFocusKey,He=he.focusKey,_t=he.layout,ot=Ce.getCutoffCoordinate(q,V,!1,_t,this.writingDirection),rt=(0,ce.default)(this.focusableComponents,function(hn){if(hn.parentFocusKey===fe&&hn.focusable){M.updateLayout(hn.focusKey);var $t=Ce.getCutoffCoordinate(q,V,!0,hn.layout,M.writingDirection);return q||M.writingDirection===lt.default.LTR?V?$t>=ot:$t<=ot:V?$t<=ot:$t>=ot}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",ot),this.log("smartNavigate","siblings","".concat(rt.length," elements:"),rt.map(function(hn){return hn.focusKey}).join(", "),rt.map(function(hn){return hn.node}),rt.map(function(hn){return hn}))),this.visualDebugger){var et=Ce.getRefCorners(te,!1,_t);this.visualDebugger.drawPoint(et.a.x,et.a.y),this.visualDebugger.drawPoint(et.b.x,et.b.y)}var ft=this.sortSiblingsByPriority(rt,_t,te,He),yt=(0,ye.default)(ft);if(this.log("smartNavigate","nextComponent",yt?yt.focusKey:void 0,yt?yt.node:void 0,yt),yt)this.setFocus(yt.focusKey,P);else{var Et=this.focusableComponents[fe],Ct=Et!=null&&Et.isFocusBoundary?Et.focusBoundaryDirections||[te]:[];Et&&Ct.includes(te)||this.smartNavigate(te,fe,P)}}}else this.setFocus(this.getForcedFocusKey())}},Ce.prototype.saveLastFocusedChildKey=function(te,Fe){te&&(this.log("saveLastFocusedChildKey","".concat(te.focusKey," lastFocusedChildKey set"),Fe),te.lastFocusedChildKey=Fe)},Ce.prototype.log=function(te,Fe){for(var P=[],M=2;M<arguments.length;M++)P[M-2]=arguments[M];this.debug&&console.log.apply(console,X(["%c".concat(te,"%c").concat(Fe),"background: ".concat(Vt[this.logIndex%Vt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],P,!1))},Ce.prototype.getCurrentFocusKey=function(){return this.focusKey},Ce.prototype.getForcedFocusKey=function(){var te,Fe=(0,ce.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),P=this.sortSiblingsByPriority(Fe,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",x.ROOT_FOCUS_KEY);return(te=(0,ye.default)(P))===null||te===void 0?void 0:te.focusKey},Ce.prototype.getNextFocusKey=function(te){var Fe=this,P=this.focusableComponents[te];if(!P||this.nativeMode)return te;var M=(0,ce.default)(this.focusableComponents,function(fe){return fe.parentFocusKey===te&&fe.focusable});if(M.length>0){var q=P.lastFocusedChildKey,V=P.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",V),q&&P.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(V&&this.isParticipatingFocusableComponent(V))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",V),this.getNextFocusKey(V);M.forEach(function(fe){return Fe.updateLayout(fe.focusKey)});var he=function(fe,He){var _t=He===lt.default.LTR?function(rt){var et=rt.layout;return Math.abs(et.left)+Math.abs(et.top)}:function(rt){var et=rt.layout;return Math.abs(window.innerWidth-et.right)+Math.abs(et.top)},ot=(0,Ae.default)(fe,_t);return(0,ye.default)(ot)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",he),this.getNextFocusKey(he)}return this.log("getNextFocusKey","targetFocusKey",te),te},Ce.prototype.addFocusable=function(te){var Fe=te.focusKey,P=te.node,M=te.parentFocusKey,q=te.onEnterPress,V=te.onEnterRelease,he=te.onArrowPress,fe=te.onFocus,He=te.onBlur,_t=te.saveLastFocusedChild,ot=te.trackChildren,rt=te.onUpdateFocus,et=te.onUpdateHasFocusedChild,ft=te.preferredChildFocusKey,yt=te.autoRestoreFocus,Et=te.forceFocus,Ct=te.focusable,hn=te.isFocusBoundary,$t=te.focusBoundaryDirections;if(this.focusableComponents[Fe]={focusKey:Fe,node:P,parentFocusKey:M,onEnterPress:q,onEnterRelease:V,onArrowPress:he,onFocus:fe,onBlur:He,onUpdateFocus:rt,onUpdateHasFocusedChild:et,saveLastFocusedChild:_t,trackChildren:ot,preferredChildFocusKey:ft,focusable:Ct,isFocusBoundary:hn,focusBoundaryDirections:$t,autoRestoreFocus:yt,forceFocus:Et,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:P},layoutUpdated:!1},P||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Fe]),!this.nativeMode){this.updateLayout(Fe),this.log("addFocusable","Component added: ",this.focusableComponents[Fe]),Fe===this.focusKey&&this.setFocus(ft||Fe);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===Fe){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},Ce.prototype.removeFocusable=function(te){var Fe=te.focusKey,P=this.focusableComponents[Fe];if(P){var M=P.parentFocusKey;(0,P.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",P),delete this.focusableComponents[Fe];var q=this.parentsHavingFocusedChild.includes(Fe);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(fe){return fe!==Fe});var V=this.focusableComponents[M],he=Fe===this.focusKey;if(V&&V.lastFocusedChildKey===Fe&&(V.lastFocusedChildKey=null),this.nativeMode)return;(he||q)&&V&&V.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",he?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},Ce.prototype.getNodeLayoutByFocusKey=function(te){var Fe=this.focusableComponents[te];return Fe?(this.updateLayout(Fe.focusKey),Fe.layout):null},Ce.prototype.setCurrentFocusedKey=function(te,Fe){if(this.isFocusableComponent(this.focusKey)&&te!==this.focusKey){var P=this.focusableComponents[this.focusKey];P.onUpdateFocus(!1),P.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onBlur",P)}if(this.focusKey=te,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onFocus",M)}},Ce.prototype.updateParentsHasFocusedChild=function(te,Fe){for(var P=this,M=[],q=this.focusableComponents[te];q;){var V=q.parentFocusKey,he=this.focusableComponents[V];if(he){var fe=he.focusKey;M.push(fe)}q=he}var He=(0,$.default)(this.parentsHavingFocusedChild,M),_t=(0,$.default)(M,this.parentsHavingFocusedChild);(0,be.default)(He,function(ot){var rt=P.focusableComponents[ot];rt&&rt.trackChildren&&rt.onUpdateHasFocusedChild(!1),P.onIntermediateNodeBecameBlurred(ot,Fe)}),(0,be.default)(_t,function(ot){var rt=P.focusableComponents[ot];rt&&rt.trackChildren&&rt.onUpdateHasFocusedChild(!0),P.onIntermediateNodeBecameFocused(ot,Fe)}),this.parentsHavingFocusedChild=M},Ce.prototype.updateParentsLastFocusedChild=function(te){for(var Fe=this.focusableComponents[te];Fe;){var P=Fe.parentFocusKey,M=this.focusableComponents[P];M&&this.saveLastFocusedChildKey(M,Fe.focusKey),Fe=M}},Ce.prototype.getKeyMap=function(){return this.keyMap},Ce.prototype.setKeyMap=function(te){this.keyMap=b(b({},this.getKeyMap()),function(Fe){var P={};return Object.entries(Fe).forEach(function(M){var q=M[0],V=M[1];P[q]=Array.isArray(V)?V:[V]}),P}(te))},Ce.prototype.isFocusableComponent=function(te){return!!this.focusableComponents[te]},Ce.prototype.isParticipatingFocusableComponent=function(te){return this.isFocusableComponent(te)&&this.focusableComponents[te].focusable},Ce.prototype.onIntermediateNodeBecameFocused=function(te,Fe){this.isParticipatingFocusableComponent(te)&&this.focusableComponents[te].onFocus(this.getNodeLayoutByFocusKey(te),Fe)},Ce.prototype.onIntermediateNodeBecameBlurred=function(te,Fe){this.isParticipatingFocusableComponent(te)&&this.focusableComponents[te].onBlur(this.getNodeLayoutByFocusKey(te),Fe)},Ce.prototype.pause=function(){this.paused=!0},Ce.prototype.resume=function(){this.paused=!1},Ce.prototype.setFocus=function(te,Fe){if(Fe===void 0&&(Fe={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",te),te&&te!==x.ROOT_FOCUS_KEY||(te=this.getForcedFocusKey());var P=this.getNextFocusKey(te);this.log("setFocus","newFocusKey",P),this.setCurrentFocusedKey(P,Fe),this.updateParentsHasFocusedChild(P,Fe),this.updateParentsLastFocusedChild(P)}},Ce.prototype.updateAllLayouts=function(){var te=this;this.enabled&&!this.nativeMode&&(0,$e.default)(this.focusableComponents,function(Fe,P){te.updateLayout(P)})},Ce.prototype.updateLayout=function(te){var Fe=this.focusableComponents[te];if(Fe&&!this.nativeMode&&!Fe.layoutUpdated){var P=Fe.node,M=this.useGetBoundingClientRect?(0,Xe.getBoundingClientRect)(P):(0,Xe.default)(P);Fe.layout=b(b({},M),{node:P})}},Ce.prototype.updateFocusable=function(te,Fe){var P=Fe.node,M=Fe.preferredChildFocusKey,q=Fe.focusable,V=Fe.isFocusBoundary,he=Fe.focusBoundaryDirections,fe=Fe.onEnterPress,He=Fe.onEnterRelease,_t=Fe.onArrowPress,ot=Fe.onFocus,rt=Fe.onBlur;if(!this.nativeMode){var et=this.focusableComponents[te];et&&(et.preferredChildFocusKey=M,et.focusable=q,et.isFocusBoundary=V,et.focusBoundaryDirections=he,et.onEnterPress=fe,et.onEnterRelease=He,et.onArrowPress=_t,et.onFocus=ot,et.onBlur=rt,P&&(et.node=P))}},Ce.prototype.isNativeMode=function(){return this.nativeMode},Ce.prototype.doesFocusableExist=function(te){return!!this.focusableComponents[te]},Ce}();x.SpatialNavigation=new Pt,x.init=x.SpatialNavigation.init,x.setThrottle=x.SpatialNavigation.setThrottle,x.destroy=x.SpatialNavigation.destroy,x.setKeyMap=x.SpatialNavigation.setKeyMap,x.setFocus=x.SpatialNavigation.setFocus,x.navigateByDirection=x.SpatialNavigation.navigateByDirection,x.pause=x.SpatialNavigation.pause,x.resume=x.SpatialNavigation.resume,x.updateAllLayouts=x.SpatialNavigation.updateAllLayouts,x.getCurrentFocusKey=x.SpatialNavigation.getCurrentFocusKey,x.doesFocusableExist=x.SpatialNavigation.doesFocusableExist},35:function(U,x,_){var I=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(x,"__esModule",{value:!0});var b=I(_(119)),j=typeof window<"u"&&window.document,Y=j?window.innerWidth:0,W=j?window.innerHeight:0,X=function(){function se(N){j&&(this.debugCtx=se.createCanvas("sn-debug","1010",N),this.layoutsCtx=se.createCanvas("sn-layouts","1000",N),this.writingDirection=N)}return se.createCanvas=function(N,$,ce){var oe=document.querySelector("#".concat(N))||document.createElement("canvas");oe.setAttribute("id",N),oe.setAttribute("dir",ce===b.default.LTR?"ltr":"rtl");var ye=oe.getContext("2d");return oe.style.zIndex=$,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=Y,oe.height=W,ye},se.prototype.clear=function(){j&&this.debugCtx.clearRect(0,0,Y,W)},se.prototype.clearLayouts=function(){j&&this.layoutsCtx.clearRect(0,0,Y,W)},se.prototype.drawLayout=function(N,$,ce){if(j){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(N.left,N.top,N.width,N.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===b.default.LTR?"left":"right",ye=N[oe];this.layoutsCtx.fillText($,ye,N.top+10),this.layoutsCtx.fillText(ce,ye,N.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(ye),ye,N.top+40),this.layoutsCtx.fillText("top: ".concat(N.top),ye,N.top+55)}},se.prototype.drawPoint=function(N,$,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),j&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(N-oe/2,$-oe/2,oe,oe))},se}();x.default=X},119:function(U,x){var _;Object.defineProperty(x,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),x.default=_},607:function(U,x,_){var I=this&&this.__createBinding||(Object.create?function(j,Y,W,X){X===void 0&&(X=W);var se=Object.getOwnPropertyDescriptor(Y,W);se&&!("get"in se?!Y.__esModule:se.writable||se.configurable)||(se={enumerable:!0,get:function(){return Y[W]}}),Object.defineProperty(j,X,se)}:function(j,Y,W,X){X===void 0&&(X=W),j[X]=Y[W]}),b=this&&this.__exportStar||function(j,Y){for(var W in j)W==="default"||Object.prototype.hasOwnProperty.call(Y,W)||I(Y,j,W)};Object.defineProperty(x,"__esModule",{value:!0}),b(_(79),x),b(_(445),x),b(_(654),x)},964:function(U,x){Object.defineProperty(x,"__esModule",{value:!0}),x.getBoundingClientRect=void 0;var _=function(I){for(var b=I.offsetParent,j=I.offsetHeight,Y=I.offsetWidth,W=I.offsetLeft,X=I.offsetTop;b&&b.nodeType===1;)W+=b.offsetLeft-b.scrollLeft,X+=b.offsetTop-b.scrollTop,b=b.offsetParent;return{height:j,left:W,top:X,width:Y}};x.default=function(I){var b=I&&I.parentElement;if(I&&b){var j=_(b),Y=_(I),W=Y.height,X=Y.left,se=Y.top,N=Y.width;return{x:X-j.left,y:se-j.top,width:N,height:W,left:X,top:se,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},x.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var b=I.getBoundingClientRect();return{x:b.x,y:b.y,width:b.width,height:b.height,left:b.left,top:b.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,x,_){Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusContext=x.FocusContext=void 0;var I=_(156),b=_(654);x.FocusContext=(0,I.createContext)(b.ROOT_FOCUS_KEY),x.FocusContext.displayName="FocusContext",x.useFocusContext=function(){return(0,I.useContext)(x.FocusContext)}},79:function(U,x,_){var I=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(x,"__esModule",{value:!0}),x.useFocusable=void 0;var b=_(156),j=I(_(604)),Y=I(_(461)),W=_(654),X=_(445);x.useFocusable=function(se){var N=se===void 0?{}:se,$=N.focusable,ce=$===void 0||$,oe=N.saveLastFocusedChild,ye=oe===void 0||oe,be=N.trackChildren,$e=be!==void 0&&be,Ae=N.autoRestoreFocus,Ze=Ae===void 0||Ae,it=N.forceFocus,lt=it!==void 0&&it,Xe=N.isFocusBoundary,st=Xe!==void 0&&Xe,wt=N.focusBoundaryDirections,Oe=N.focusKey,Qe=N.preferredChildFocusKey,ct=N.onEnterPress,Qt=ct===void 0?j.default:ct,Vt=N.onEnterRelease,Tt=Vt===void 0?j.default:Vt,Pt=N.onArrowPress,Ce=Pt===void 0?function(){return!0}:Pt,te=N.onFocus,Fe=te===void 0?j.default:te,P=N.onBlur,M=P===void 0?j.default:P,q=N.extraProps,V=(0,b.useCallback)(function(Ot){Qt(q,Ot)},[Qt,q]),he=(0,b.useCallback)(function(){Tt(q)},[Tt,q]),fe=(0,b.useCallback)(function(Ot,Un){return Ce(Ot,q,Un)},[q,Ce]),He=(0,b.useCallback)(function(Ot,Un){Fe(Ot,q,Un)},[q,Fe]),_t=(0,b.useCallback)(function(Ot,Un){M(Ot,q,Un)},[q,M]),ot=(0,b.useRef)(null),rt=(0,b.useState)(!1),et=rt[0],ft=rt[1],yt=(0,b.useState)(!1),Et=yt[0],Ct=yt[1],hn=(0,X.useFocusContext)(),$t=(0,b.useMemo)(function(){return Oe||(0,Y.default)("sn:focusable-item-")},[Oe]),nn=(0,b.useCallback)(function(Ot){Ot===void 0&&(Ot={}),W.SpatialNavigation.setFocus($t,Ot)},[$t]);return(0,b.useEffect)(function(){var Ot=ot.current;return W.SpatialNavigation.addFocusable({focusKey:$t,node:Ot,parentFocusKey:hn,preferredChildFocusKey:Qe,onEnterPress:V,onEnterRelease:he,onArrowPress:fe,onFocus:He,onBlur:_t,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),ft(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Ct(Un)},saveLastFocusedChild:ye,trackChildren:$e,isFocusBoundary:st,focusBoundaryDirections:wt,autoRestoreFocus:Ze,forceFocus:lt,focusable:ce}),function(){W.SpatialNavigation.removeFocusable({focusKey:$t})}},[]),(0,b.useEffect)(function(){var Ot=ot.current;W.SpatialNavigation.updateFocusable($t,{node:Ot,preferredChildFocusKey:Qe,focusable:ce,isFocusBoundary:st,focusBoundaryDirections:wt,onEnterPress:V,onEnterRelease:he,onArrowPress:fe,onFocus:He,onBlur:_t})},[$t,Qe,ce,st,wt,V,he,fe,He,_t]),{ref:ot,focusSelf:nn,focused:et,hasFocusedChild:Et,focusKey:$t}}},150:function(U){U.exports=l},117:function(U){U.exports=d},747:function(U){U.exports=p},23:function(U){U.exports=w},842:function(U){U.exports=C},682:function(U){U.exports=g},784:function(U){U.exports=S},604:function(U){U.exports=F},432:function(U){U.exports=R},67:function(U){U.exports=v},461:function(U){U.exports=y},156:function(U){U.exports=O}},T={};return function U(x){var _=T[x];if(_!==void 0)return _.exports;var I=T[x]={exports:{}};return m[x].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(B3);var aF=B3.exports;function Hq(o){return{all:o=o||new Map,on:function(i,l){var d=o.get(i);d?d.push(l):o.set(i,[l])},off:function(i,l){var d=o.get(i);d&&(l?d.splice(d.indexOf(l)>>>0,1):o.set(i,[]))},emit:function(i,l){var d=o.get(i);d&&d.slice().map(function(p){p(l)}),(d=o.get("*"))&&d.slice().map(function(p){p(i,l)})}}}class hf{constructor(){this.emitter=Hq()}emit(i,l){this.emitter.emit(i,l)}on(i,l){var d;(d=this.emitter)==null||d.on(i,l)}once(i,l){var p;const d=w=>{var C;(C=this.emitter)==null||C.off(i,d),l(w)};(p=this.emitter)==null||p.on(i,d)}off(i,l){var d;(d=this.emitter)==null||d.off(i,l)}onAny(i){this.emitter.on("*",i)}offAny(i){this.emitter.off("*",i)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var Xc=256,sF=[],rL=256,_v;for(;Xc--;)sF[Xc]=(Xc+256).toString(16).substring(1);function Vq(o){var i=0,l=11;if(!_v||Xc+l>rL*2)for(_v="",Xc=0;i<rL;i++)_v+=sF[Math.random()*256|0];return _v.substring(Xc,Xc+++l)}const iL={DEVICE_ID:"deviceId"};function ig(){const o=localStorage.getItem(iL.DEVICE_ID);if(o)return o;const i=Vq();return localStorage.setItem(iL.DEVICE_ID,i),i}function Kq(o){o=[...o].sort((l,d)=>l-d);const i=Math.floor(o.length/2);return o.length%2?o[i]:(o[i-1]+o[i])/2}var os=(o=>(o.NEGOTIATE="negotiate",o.NEGOTIATE_TV="negotiate-tv",o.EVENT_STATUS="eventStatus",o.EVENT_META="eventMeta",o.GENERATE="generate",o.CONTENTFUL="contentful",o))(os||{});class jp extends Error{constructor(i,l,d,p){super(),this._name=i,this._title=l,this._code=p,this._message=d}get toString(){var i,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((i=this._title.toUpperCase())!=null?i:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(i){this._name=i}get message(){return this._message}set message(i){this._message=i}get title(){return this._title}set title(i){this._title=i}get code(){return this._code}set code(i){this._code=i}}const eh=ig(),zq="https://staging-api.gigset.io",a0="new",Yq="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",Wq="v203lmr0b15v",iC="setup-device-id",Xq="_appContainer_1isul_1",$q="_pageContainer_1isul_53",Qq="_input_1isul_67",Jq="_ellipsis_1isul_1",eH={appContainer:Xq,pageContainer:$q,input:Qq,ellipsis:Jq};class Jc extends Error{constructor(i,l){const d=new.target.prototype;super("".concat(i,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=d}}class oC extends Error{constructor(i="A timeout occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class Qs extends Error{constructor(i="An abort occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class tH extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=d}}class nH extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=d}}class rH extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=d}}class oL extends Error{constructor(i){const l=new.target.prototype;super(i),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class iH extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.innerErrors=l,this.__proto__=d}}class uF{constructor(i,l,d){this.statusCode=i,this.statusText=l,this.content=d}}class x0{get(i,l){return this.send({...l,method:"GET",url:i})}post(i,l){return this.send({...l,method:"POST",url:i})}delete(i,l){return this.send({...l,method:"DELETE",url:i})}getCookieString(i){return""}}var wn;(function(o){o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"})(wn||(wn={}));class Sg{constructor(){}log(i,l){}}Sg.instance=new Sg;const oH="8.0.0";class ho{static isRequired(i,l){if(i==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(i,l){if(!i||i.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(i,l,d){if(!(i in l))throw new Error("Unknown ".concat(d," value: ").concat(i,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function wg(o,i){let l="";return sf(o)?(l="Binary data of length ".concat(o.byteLength),i&&(l+=". Content: '".concat(aH(o),"'"))):typeof o=="string"&&(l="String data of length ".concat(o.length),i&&(l+=". Content: '".concat(o,"'"))),l}function aH(o){const i=new Uint8Array(o);let l="";return i.forEach(d=>{const p=d<16?"0":"";l+="0x".concat(p).concat(d.toString(16)," ")}),l.substr(0,l.length-1)}function sf(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}async function lF(o,i,l,d,p,w){const C={},[g,S]=th();C[g]=S,o.log(wn.Trace,"(".concat(i," transport) sending data. ").concat(wg(p,w.logMessageContent),"."));const F=sf(p)?"arraybuffer":"text",R=await l.post(d,{content:p,headers:{...C,...w.headers},responseType:F,timeout:w.timeout,withCredentials:w.withCredentials});o.log(wn.Trace,"(".concat(i," transport) request complete. Response status: ").concat(R.statusCode,"."))}function sH(o){return o===void 0?new s0(wn.Information):o===null?Sg.instance:o.log!==void 0?o:new s0(o)}class uH{constructor(i,l){this._subject=i,this._observer=l}dispose(){const i=this._subject.observers.indexOf(this._observer);i>-1&&this._subject.observers.splice(i,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class s0{constructor(i){this._minLevel=i,this.out=console}log(i,l){if(i>=this._minLevel){const d="[".concat(new Date().toISOString(),"] ").concat(wn[i],": ").concat(l);switch(i){case wn.Critical:case wn.Error:this.out.error(d);break;case wn.Warning:this.out.warn(d);break;case wn.Information:this.out.info(d);break;default:this.out.log(d);break}}}}function th(){let o="X-SignalR-User-Agent";return Hi.isNode&&(o="User-Agent"),[o,lH(oH,cH(),dH(),fH())]}function lH(o,i,l,d){let p="Microsoft SignalR/";const w=o.split(".");return p+="".concat(w[0],".").concat(w[1]),p+=" (".concat(o,"; "),i&&i!==""?p+="".concat(i,"; "):p+="Unknown OS; ",p+="".concat(l),d?p+="; ".concat(d):p+="; Unknown Runtime Version",p+=")",p}function cH(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function fH(){if(Hi.isNode)return process.versions.node}function dH(){return Hi.isNode?"NodeJS":"Browser"}function aL(o){return o.stack?o.stack:o.message?o.message:"".concat(o)}function hH(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function pH(o){return typeof fetch>"u"||Hi.isNode?(o._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?o._fetchType=require("node-fetch"):o._fetchType=fetch,o._fetchType=require("fetch-cookie")(o._fetchType,o._jar),!0):!1}function gH(o){return typeof AbortController>"u"?(o._abortControllerType=require("abort-controller"),!0):!1}function mH(){return require("ws")}function yH(){return require("eventsource")}class vH extends x0{constructor(i){super(),this._logger=i;const l={_fetchType:void 0,_jar:void 0};pH(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(hH()),this._abortControllerType=AbortController;const d={_abortControllerType:this._abortControllerType};gH(d)&&(this._abortControllerType=d._abortControllerType)}async send(i){if(i.abortSignal&&i.abortSignal.aborted)throw new Qs;if(!i.method)throw new Error("No method defined.");if(!i.url)throw new Error("No url defined.");const l=new this._abortControllerType;let d;i.abortSignal&&(i.abortSignal.onabort=()=>{l.abort(),d=new Qs});let p=null;if(i.timeout){const S=i.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),d=new oC},S)}i.content===""&&(i.content=void 0),i.content&&(i.headers=i.headers||{},sf(i.content)?i.headers["Content-Type"]="application/octet-stream":i.headers["Content-Type"]="text/plain;charset=UTF-8");let w;try{w=await this._fetchType(i.url,{body:i.content,cache:"no-cache",credentials:i.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...i.headers},method:i.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(S){throw d||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(S,".")),S)}finally{p&&clearTimeout(p),i.abortSignal&&(i.abortSignal.onabort=null)}if(!w.ok){const S=await sL(w,"text");throw new Jc(S||w.statusText,w.status)}const g=await sL(w,i.responseType);return new uF(w.status,w.statusText,g)}getCookieString(i){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(i,(d,p)=>l=p.join("; ")),l}}function sL(o,i){let l;switch(i){case"arraybuffer":l=o.arrayBuffer();break;case"text":l=o.text();break;case"blob":case"document":case"json":throw new Error("".concat(i," is not supported."));default:l=o.text();break}return l}class EH extends x0{constructor(i){super(),this._logger=i}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new Qs):i.method?i.url?new Promise((l,d)=>{const p=new XMLHttpRequest;p.open(i.method,i.url,!0),p.withCredentials=i.withCredentials===void 0?!0:i.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.content===""&&(i.content=void 0),i.content&&(sf(i.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const w=i.headers;w&&Object.keys(w).forEach(C=>{p.setRequestHeader(C,w[C])}),i.responseType&&(p.responseType=i.responseType),i.abortSignal&&(i.abortSignal.onabort=()=>{p.abort(),d(new Qs)}),i.timeout&&(p.timeout=i.timeout),p.onload=()=>{i.abortSignal&&(i.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new uF(p.status,p.statusText,p.response||p.responseText)):d(new Jc(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),d(new Jc(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),d(new oC)},p.send(i.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class _H extends x0{constructor(i){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new vH(i);else if(typeof XMLHttpRequest<"u")this._httpClient=new EH(i);else throw new Error("No usable HttpClient found.")}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new Qs):i.method?i.url?this._httpClient.send(i):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(i){return this._httpClient.getCookieString(i)}}class ss{static write(i){return"".concat(i).concat(ss.RecordSeparator)}static parse(i){if(i[i.length-1]!==ss.RecordSeparator)throw new Error("Message is incomplete.");const l=i.split(ss.RecordSeparator);return l.pop(),l}}ss.RecordSeparatorCode=30;ss.RecordSeparator=String.fromCharCode(ss.RecordSeparatorCode);class TH{writeHandshakeRequest(i){return ss.write(JSON.stringify(i))}parseHandshakeResponse(i){let l,d;if(sf(i)){const g=new Uint8Array(i),S=g.indexOf(ss.RecordSeparatorCode);if(S===-1)throw new Error("Message is incomplete.");const F=S+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,F))),d=g.byteLength>F?g.slice(F).buffer:null}else{const g=i,S=g.indexOf(ss.RecordSeparator);if(S===-1)throw new Error("Message is incomplete.");const F=S+1;l=g.substring(0,F),d=g.length>F?g.substring(F):null}const p=ss.parse(l),w=JSON.parse(p[0]);if(w.type)throw new Error("Expected a handshake response from the server.");return[d,w]}}var Ar;(function(o){o[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close",o[o.Ack=8]="Ack",o[o.Sequence=9]="Sequence"})(Ar||(Ar={}));class SH{constructor(){this.observers=[]}next(i){for(const l of this.observers)l.next(i)}error(i){for(const l of this.observers)l.error&&l.error(i)}complete(){for(const i of this.observers)i.complete&&i.complete()}subscribe(i){return this.observers.push(i),new uH(this,i)}}class wH{constructor(i,l,d){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=i,this._connection=l,this._bufferSize=d}async _send(i){const l=this._protocol.writeMessage(i);let d=Promise.resolve();if(this._isInvocationMessage(i)){this._totalMessageCount++;let p=()=>{},w=()=>{};sf(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(d=new Promise((C,g)=>{p=C,w=g})),this._messages.push(new AH(l,this._totalMessageCount,p,w))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await d}_ack(i){let l=-1;for(let d=0;d<this._messages.length;d++){const p=this._messages[d];if(p._id<=i.sequenceId)l=d,sf(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(i){if(this._waitForSequenceMessage)return i.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(i))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(i){if(i.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=i.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const i=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:i}));const l=this._messages;for(const d of l)await this._connection.send(d._message);this._reconnectInProgress=!1}_dispose(i){i!=null||(i=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(i)}_isInvocationMessage(i){switch(i.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(i){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class AH{constructor(i,l,d,p){this._message=i,this._id=l,this._resolver=d,this._rejector=p}}const IH=30*1e3,CH=15*1e3,bH=1e5;var Fi;(function(o){o.Disconnected="Disconnected",o.Connecting="Connecting",o.Connected="Connected",o.Disconnecting="Disconnecting",o.Reconnecting="Reconnecting"})(Fi||(Fi={}));class aC{static create(i,l,d,p,w,C,g){return new aC(i,l,d,p,w,C,g)}constructor(i,l,d,p,w,C,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},ho.isRequired(i,"connection"),ho.isRequired(l,"logger"),ho.isRequired(d,"protocol"),this.serverTimeoutInMilliseconds=w!=null?w:IH,this.keepAliveIntervalInMilliseconds=C!=null?C:CH,this._statefulReconnectBufferSize=g!=null?g:bH,this._logger=l,this._protocol=d,this.connection=i,this._reconnectPolicy=p,this._handshakeProtocol=new TH,this.connection.onreceive=S=>this._processIncomingData(S),this.connection.onclose=S=>this._connectionClosed(S),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(i){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!i)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=i}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(i){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(i,"'.")),Promise.reject(i)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const i=new Promise((l,d)=>{this._handshakeResolver=l,this._handshakeRejecter=d});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const d={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(d)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await i,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new wH(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const i=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await i}catch(l){}}_stopInternal(i){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(i,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=i||new Qs("The connection was stopped before the hub handshake could complete."),this.connection.stop(i))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(i){}}stream(i,...l){const[d,p]=this._replaceStreamingParams(l),w=this._createStreamInvocation(i,l,p);let C;const g=new SH;return g.cancelCallback=()=>{const S=this._createCancelInvocation(w.invocationId);return delete this._callbacks[w.invocationId],C.then(()=>this._sendWithProtocol(S))},this._callbacks[w.invocationId]=(S,F)=>{if(F){g.error(F);return}else S&&(S.type===Ar.Completion?S.error?g.error(new Error(S.error)):g.complete():g.next(S.item))},C=this._sendWithProtocol(w).catch(S=>{g.error(S),delete this._callbacks[w.invocationId]}),this._launchStreams(d,C),g}_sendMessage(i){return this._resetKeepAliveInterval(),this.connection.send(i)}_sendWithProtocol(i){return this._messageBuffer?this._messageBuffer._send(i):this._sendMessage(this._protocol.writeMessage(i))}send(i,...l){const[d,p]=this._replaceStreamingParams(l),w=this._sendWithProtocol(this._createInvocation(i,l,!0,p));return this._launchStreams(d,w),w}invoke(i,...l){const[d,p]=this._replaceStreamingParams(l),w=this._createInvocation(i,l,!1,p);return new Promise((g,S)=>{this._callbacks[w.invocationId]=(R,v)=>{if(v){S(v);return}else R&&(R.type===Ar.Completion?R.error?S(new Error(R.error)):g(R.result):S(new Error("Unexpected message type: ".concat(R.type))))};const F=this._sendWithProtocol(w).catch(R=>{S(R),delete this._callbacks[w.invocationId]});this._launchStreams(d,F)})}on(i,l){!i||!l||(i=i.toLowerCase(),this._methods[i]||(this._methods[i]=[]),this._methods[i].indexOf(l)===-1&&this._methods[i].push(l))}off(i,l){if(!i)return;i=i.toLowerCase();const d=this._methods[i];if(d)if(l){const p=d.indexOf(l);p!==-1&&(d.splice(p,1),d.length===0&&delete this._methods[i])}else delete this._methods[i]}onclose(i){i&&this._closedCallbacks.push(i)}onreconnecting(i){i&&this._reconnectingCallbacks.push(i)}onreconnected(i){i&&this._reconnectedCallbacks.push(i)}_processIncomingData(i){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(i=this._processHandshakeResponse(i),this._receivedHandshakeResponse=!0),i){const l=this._protocol.parseMessages(i,this._logger);for(const d of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(d)))switch(d.type){case Ar.Invocation:this._invokeClientMethod(d);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[d.invocationId];if(p){d.type===Ar.Completion&&delete this._callbacks[d.invocationId];try{p(d)}catch(w){this._logger.log(wn.Error,"Stream callback threw error: ".concat(aL(w)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=d.error?new Error("Server returned an error on close: "+d.error):void 0;d.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(d);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(d);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(d.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(i){let l,d;try{[d,l]=this._handshakeProtocol.parseHandshakeResponse(i)}catch(p){const w="Error parsing handshake response: "+p;this._logger.log(wn.Error,w);const C=new Error(w);throw this._handshakeRejecter(C),C}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const w=new Error(p);throw this._handshakeRejecter(w),w}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),d}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let i=this._nextKeepAlive-new Date().getTime();i<0&&(i=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},i)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(i){const l=i.target.toLowerCase(),d=this._methods[l];if(!d){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),i.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)));return}const p=d.slice(),w=!!i.invocationId;let C,g,S;for(const F of p)try{const R=C;C=await F.apply(this,i.arguments),w&&C&&R&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),S=this._createCompletionMessage(i.invocationId,"Client provided multiple results.",null)),g=void 0}catch(R){g=R,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(R,"'."))}S?await this._sendWithProtocol(S):w?(g?S=this._createCompletionMessage(i.invocationId,"".concat(g),null):C!==void 0?S=this._createCompletionMessage(i.invocationId,null,C):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),S=this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(S)):C&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(i){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(i,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||i||new Qs("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(i||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(i):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(i):this._connectionState===Fi.Connected&&this._completeClose(i)}_completeClose(i){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(i!=null?i:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[i]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(i,"' threw error '").concat(l,"'."))}}}async _reconnect(i){const l=Date.now();let d=0,p=i!==void 0?i:new Error("Attempting to reconnect due to a unknown error."),w=this._getNextRetryDelay(d++,0,p);if(w===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(i);return}if(this._connectionState=Fi.Reconnecting,i?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(i,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(C=>C.apply(this,[i]))}catch(C){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(i,"' threw error '").concat(C,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;w!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(d," will start in ").concat(w," ms.")),await new Promise(C=>{this._reconnectDelayHandle=setTimeout(C,w)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(C=>C.apply(this,[this.connection.connectionId]))}catch(C){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(C,"'."))}return}catch(C){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(C,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=C instanceof Error?C:new Error(C.toString()),w=this._getNextRetryDelay(d++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(d," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(i,l,d){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:i,retryReason:d})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(i,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(i){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(d=>{const p=l[d];try{p(null,i)}catch(w){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(i,"' threw error: ").concat(aL(w)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(i,l,d,p){if(d)return p.length!==0?{arguments:l,streamIds:p,target:i,type:Ar.Invocation}:{arguments:l,target:i,type:Ar.Invocation};{const w=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:w.toString(),streamIds:p,target:i,type:Ar.Invocation}:{arguments:l,invocationId:w.toString(),target:i,type:Ar.Invocation}}}_launchStreams(i,l){if(i.length!==0){l||(l=Promise.resolve());for(const d in i)i[d].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d)))},error:p=>{let w;p instanceof Error?w=p.message:p&&p.toString?w=p.toString():w="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d,w)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(d,p)))}})}}_replaceStreamingParams(i){const l=[],d=[];for(let p=0;p<i.length;p++){const w=i[p];if(this._isObservable(w)){const C=this._invocationId;this._invocationId++,l[C]=w,d.push(C.toString()),i.splice(p,1)}}return[l,d]}_isObservable(i){return i&&i.subscribe&&typeof i.subscribe=="function"}_createStreamInvocation(i,l,d){const p=this._invocationId;return this._invocationId++,d.length!==0?{arguments:l,invocationId:p.toString(),streamIds:d,target:i,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:i,type:Ar.StreamInvocation}}_createCancelInvocation(i){return{invocationId:i,type:Ar.CancelInvocation}}_createStreamItemMessage(i,l){return{invocationId:i,item:l,type:Ar.StreamItem}}_createCompletionMessage(i,l,d){return l?{error:l,invocationId:i,type:Ar.Completion}:{invocationId:i,result:d,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const RH=[0,2e3,1e4,3e4,null];class uL{constructor(i){this._retryDelays=i!==void 0?[...i,null]:RH}nextRetryDelayInMilliseconds(i){return this._retryDelays[i.previousRetryCount]}}class ef{}ef.Authorization="Authorization";ef.Cookie="Cookie";class NH extends x0{constructor(i,l){super(),this._innerClient=i,this._accessTokenFactory=l}async send(i){let l=!0;this._accessTokenFactory&&(!this._accessToken||i.url&&i.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(i);const d=await this._innerClient.send(i);return l&&d.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(i),await this._innerClient.send(i)):d}_setAuthorizationHeader(i){i.headers||(i.headers={}),this._accessToken?i.headers[ef.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&i.headers[ef.Authorization]&&delete i.headers[ef.Authorization]}getCookieString(i){return this._innerClient.getCookieString(i)}}var uo;(function(o){o[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling"})(uo||(uo={}));var $o;(function(o){o[o.Text=1]="Text",o[o.Binary=2]="Binary"})($o||($o={}));let xH=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class lL{get pollAborted(){return this._pollAbort.aborted}constructor(i,l,d){this._httpClient=i,this._logger=l,this._pollAbort=new xH,this._options=d,this._running=!1,this.onreceive=null,this.onclose=null}async connect(i,l){if(ho.isRequired(i,"url"),ho.isRequired(l,"transferFormat"),ho.isIn(l,$o,"transferFormat"),this._url=i,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===$o.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[d,p]=th(),w={[d]:p,...this._options.headers},C={abortSignal:this._pollAbort.signal,headers:w,timeout:1e5,withCredentials:this._options.withCredentials};l===$o.Binary&&(C.responseType="arraybuffer");const g="".concat(i,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const S=await this._httpClient.get(g,C);S.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(S.statusCode,".")),this._closeError=new Jc(S.statusText||"",S.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,C)}async _poll(i,l){try{for(;this._running;)try{const d="".concat(i,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(d,"."));const p=await this._httpClient.get(d,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new Jc(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(wg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(d){this._running?d instanceof oC?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=d,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(d.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(i){return this._running?lF(this._logger,"LongPolling",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const i={},[l,d]=th();i[l]=d;const p={headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let w;try{await this._httpClient.delete(this._url,p)}catch(C){w=C}w?w instanceof Jc&&(w.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(w))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let i="(LongPolling transport) Firing onclose event.";this._closeError&&(i+=" Error: "+this._closeError),this._logger.log(wn.Trace,i),this.onclose(this._closeError)}}}class MH{constructor(i,l,d,p){this._httpClient=i,this._accessToken=l,this._logger=d,this._options=p,this.onreceive=null,this.onclose=null}async connect(i,l){return ho.isRequired(i,"url"),ho.isRequired(l,"transferFormat"),ho.isIn(l,$o,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=i,this._accessToken&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((d,p)=>{let w=!1;if(l!==$o.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let C;if(Hi.isBrowser||Hi.isWebWorker)C=new this._options.EventSource(i,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(i),S={};S.Cookie=g;const[F,R]=th();S[F]=R,C=new this._options.EventSource(i,{withCredentials:this._options.withCredentials,headers:{...S,...this._options.headers}})}try{C.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(wg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(S){this._close(S);return}},C.onerror=g=>{w?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},C.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=C,w=!0,d()}}catch(g){p(g);return}})}async send(i){return this._eventSource?lF(this._logger,"SSE",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(i){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(i))}}class DH{constructor(i,l,d,p,w,C){this._logger=d,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=w,this._httpClient=i,this.onreceive=null,this.onclose=null,this._headers=C}async connect(i,l){ho.isRequired(i,"url"),ho.isRequired(l,"transferFormat"),ho.isIn(l,$o,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let d;return this._accessTokenFactory&&(d=await this._accessTokenFactory()),new Promise((p,w)=>{i=i.replace(/^http/,"ws");let C;const g=this._httpClient.getCookieString(i);let S=!1;if(Hi.isNode||Hi.isReactNative){const F={},[R,v]=th();F[R]=v,d&&(F[ef.Authorization]="Bearer ".concat(d)),g&&(F[ef.Cookie]=g),C=new this._webSocketConstructor(i,void 0,{headers:{...F,...this._headers}})}else d&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(d)));C||(C=new this._webSocketConstructor(i)),l===$o.Binary&&(C.binaryType="arraybuffer"),C.onopen=F=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(i,".")),this._webSocket=C,S=!0,p()},C.onerror=F=>{let R=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?R=F.error:R="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(R,"."))},C.onmessage=F=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(wg(F.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(F.data)}catch(R){this._close(R);return}},C.onclose=F=>{if(S)this._close(F);else{let R=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?R=F.error:R="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",w(new Error(R))}}})}send(i){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(wg(i,this._logMessageContent),".")),this._webSocket.send(i),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(i){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(i)&&(i.wasClean===!1||i.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(i.code," (").concat(i.reason||"no reason given",")."))):i instanceof Error?this.onclose(i):this.onclose())}_isCloseEvent(i){return i&&typeof i.wasClean=="boolean"&&typeof i.code=="number"}}const cL=100;class PH{constructor(i,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,ho.isRequired(i,"url"),this._logger=sH(l.logger),this.baseUrl=this._resolveUrl(i),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let d=null,p=null;Hi.isNode&&typeof require<"u"&&(d=mH(),p=yH()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&d&&(l.WebSocket=d),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new NH(l.httpClient||new _H(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(i){if(i=i||$o.Binary,ho.isIn(i,$o,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat($o[i],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(i),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new Qs(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new Qs(l))}this._connectionStarted=!0}send(i){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new sC(this.transport)),this._sendQueue.send(i))}async stop(i){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(i),await this._stopPromise}async _stopInternal(i){this._stopError=i;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(i){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===uo.WebSockets)this.transport=this._constructTransport(uo.WebSockets),await this._startTransport(l,i);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let d=null,p=0;do{if(d=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Qs("The connection was stopped during negotiation.");if(d.error)throw new Error(d.error);if(d.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(d.url&&(l=d.url),d.accessToken){const w=d.accessToken;this._accessTokenFactory=()=>w,this._httpClient._accessToken=w,this._httpClient._accessTokenFactory=void 0}p++}while(d.url&&p<cL);if(p===cL&&d.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,d,i)}this.transport instanceof lL&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(d){return this._logger.log(wn.Error,"Failed to start the connection: "+d),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(d)}}async _getNegotiationResponse(i){const l={},[d,p]=th();l[d]=p;const w=this._resolveNegotiateUrl(i);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(w,"."));try{const C=await this._httpClient.post(w,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(C.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(C.statusCode,"'")));const g=JSON.parse(C.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new oL("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(C){let g="Failed to complete negotiation with the server: "+C;return C instanceof Jc&&C.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new oL(g))}}_createConnectUrl(i,l){return l?i+(i.indexOf("?")===-1?"?":"&")+"id=".concat(l):i}async _createTransport(i,l,d,p){let w=this._createConnectUrl(i,d.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(w,p),this.connectionId=d.connectionId;return}const C=[],g=d.availableTransports||[];let S=d;for(const F of g){const R=this._resolveTransportOrError(F,l,p,(S==null?void 0:S.useStatefulReconnect)===!0);if(R instanceof Error)C.push("".concat(F.transport," failed:")),C.push(R);else if(this._isITransport(R)){if(this.transport=R,!S){try{S=await this._getNegotiationResponse(i)}catch(v){return Promise.reject(v)}w=this._createConnectUrl(i,S.connectionToken)}try{await this._startTransport(w,p),this.connectionId=S.connectionId;return}catch(v){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(F.transport,"': ").concat(v)),S=void 0,C.push(new rH("".concat(F.transport," failed: ").concat(v),uo[F.transport])),this._connectionState!=="Connecting"){const y="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,y),Promise.reject(new Qs(y))}}}}return C.length>0?Promise.reject(new iH("Unable to connect to the server with any of the available transports. ".concat(C.join(" ")),C)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(i){switch(i){case uo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new DH(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case uo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new MH(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case uo.LongPolling:return new lL(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(i,"."))}}_startTransport(i,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async d=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(i,l),await this.features.resend()}catch(w){p=!0}else{this._stopConnection(d);return}p&&this._stopConnection(d)}:this.transport.onclose=d=>this._stopConnection(d),this.transport.connect(i,l)}_resolveTransportOrError(i,l,d,p){const w=uo[i.transport];if(w==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(i.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(i.transport,"' because it is not supported by this client."));if(OH(l,w))if(i.transferFormats.map(g=>$o[g]).indexOf(d)>=0){if(w===uo.WebSockets&&!this._options.WebSocket||w===uo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it is not supported in your environment.'")),new tH("'".concat(uo[w],"' is not supported in your environment."),w);this._logger.log(wn.Debug,"Selecting transport '".concat(uo[w],"'."));try{return this.features.reconnect=w===uo.WebSockets?p:void 0,this._constructTransport(w)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it does not support the requested transfer format '").concat($o[d],"'.")),new Error("'".concat(uo[w],"' does not support ").concat($o[d],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it was disabled by the client.")),new nH("'".concat(uo[w],"' is disabled by the client."),w)}_isITransport(i){return i&&typeof i=="object"&&"connect"in i}_stopConnection(i){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(i,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,i=this._stopError||i,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(i,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),i?this._logger.log(wn.Error,"Connection disconnected with error '".concat(i,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(i)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(i,") threw error '").concat(l,"'."))}}}_resolveUrl(i){if(i.lastIndexOf("https://",0)===0||i.lastIndexOf("http://",0)===0)return i;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(i,"'."));const l=window.document.createElement("a");return l.href=i,this._logger.log(wn.Information,"Normalizing '".concat(i,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(i){const l=new URL(i);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const d=new URLSearchParams(l.searchParams);return d.has("negotiateVersion")||d.append("negotiateVersion",this._negotiateVersion.toString()),d.has("useStatefulReconnect")?d.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&d.append("useStatefulReconnect","true"),l.search=d.toString(),l.toString()}}function OH(o,i){return!o||(i&o)!==0}class sC{constructor(i){this._transport=i,this._buffer=[],this._executing=!0,this._sendBufferedData=new Tv,this._transportResult=new Tv,this._sendLoopPromise=this._sendLoop()}send(i){return this._bufferData(i),this._transportResult||(this._transportResult=new Tv),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(i){if(this._buffer.length&&typeof this._buffer[0]!=typeof i)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof i));this._buffer.push(i),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Tv;const i=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):sC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),i.resolve()}catch(d){i.reject(d)}}}static _concatBuffers(i){const l=i.map(w=>w.byteLength).reduce((w,C)=>w+C),d=new Uint8Array(l);let p=0;for(const w of i)d.set(new Uint8Array(w),p),p+=w.byteLength;return d.buffer}}class Tv{constructor(){this.promise=new Promise((i,l)=>[this._resolver,this._rejecter]=[i,l])}resolve(){this._resolver()}reject(i){this._rejecter(i)}}const LH="json";class kH{constructor(){this.name=LH,this.version=2,this.transferFormat=$o.Text}parseMessages(i,l){if(typeof i!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!i)return[];l===null&&(l=Sg.instance);const d=ss.parse(i),p=[];for(const w of d){const C=JSON.parse(w);if(typeof C.type!="number")throw new Error("Invalid payload.");switch(C.type){case Ar.Invocation:this._isInvocationMessage(C);break;case Ar.StreamItem:this._isStreamItemMessage(C);break;case Ar.Completion:this._isCompletionMessage(C);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(C);break;case Ar.Sequence:this._isSequenceMessage(C);break;default:l.log(wn.Information,"Unknown message type '"+C.type+"' ignored.");continue}p.push(C)}return p}writeMessage(i){return ss.write(JSON.stringify(i))}_isInvocationMessage(i){this._assertNotEmptyString(i.target,"Invalid payload for Invocation message."),i.invocationId!==void 0&&this._assertNotEmptyString(i.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(i){if(this._assertNotEmptyString(i.invocationId,"Invalid payload for StreamItem message."),i.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(i){if(i.result&&i.error)throw new Error("Invalid payload for Completion message.");!i.result&&i.error&&this._assertNotEmptyString(i.error,"Invalid payload for Completion message."),this._assertNotEmptyString(i.invocationId,"Invalid payload for Completion message.")}_isAckMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(i,l){if(typeof i!="string"||i==="")throw new Error(l)}}const FH={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function UH(o){const i=FH[o.toLowerCase()];if(typeof i<"u")return i;throw new Error("Unknown log level: ".concat(o))}class cF{configureLogging(i){if(ho.isRequired(i,"logging"),BH(i))this.logger=i;else if(typeof i=="string"){const l=UH(i);this.logger=new s0(l)}else this.logger=new s0(i);return this}withUrl(i,l){return ho.isRequired(i,"url"),ho.isNotEmpty(i,"url"),this.url=i,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(i){return ho.isRequired(i,"protocol"),this.protocol=i,this}withAutomaticReconnect(i){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return i?Array.isArray(i)?this.reconnectPolicy=new uL(i):this.reconnectPolicy=i:this.reconnectPolicy=new uL,this}withServerTimeout(i){return ho.isRequired(i,"milliseconds"),this._serverTimeoutInMilliseconds=i,this}withKeepAliveInterval(i){return ho.isRequired(i,"milliseconds"),this._keepAliveIntervalInMilliseconds=i,this}withStatefulReconnect(i){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=i==null?void 0:i.bufferSize,this}build(){const i=this.httpConnectionOptions||{};if(i.logger===void 0&&(i.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new PH(this.url,i);return aC.create(l,this.logger||Sg.instance,this.protocol||new kH,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function BH(o){return o.log!==void 0}class jH extends hf{constructor(i){var l;super(),this.options=i,this.hubConnection=i.hubConnection,this.updateIntervalFrequency=(l=i.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const i=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-i.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const i=this,l=12,d=1e4,p=20;let w;return await new Promise((C,g)=>{var T;const S=[];let F=0,R,v;function y(){var U;v=Date.now(),(U=i.hubConnection)==null||U.invoke("echo"),R=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},d)}function O(U){w=U,clearTimeout(R),S.push(Date.now()-v),F++,F<l?setTimeout(y,p):m()}(T=i.hubConnection)==null||T.on("echo",O);function m(){var x;if((x=i.hubConnection)==null||x.off("echo",O),w===void 0){g(new Error("Server timestamp is undefined"));return}let U;i.options.roundtripCalcStrategy==="mean"?U=S.reduce((_,I)=>_+I)/S.length:U=Kq(S),C(new Date(w+U/2))}y()})}destroy(){clearTimeout(this.timeoutInstance)}}const zs={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},VA={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class ZH extends hf{constructor({deviceId:i,debug:l,groupName:d}){super(),this.hubConnection=null,this.serverTimeService=null,this.state=VA.IDLE,this.deviceId=i,this.debugLogging=l!=null?l:!1,this.groupName=d}setupTimeService(){this.serverTimeService=new jH({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",i=>{this.emit("serverTimeOffsetUpdate",i)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var i;console.log("SignalR: disconnect",zs.CLIENT_DISCONNECT,{deviceId:this.deviceId}),await((i=this.hubConnection)==null?void 0:i.invoke(zs.CLIENT_DISCONNECT))}connect({url:i,accessToken:l}){var d;this.hubConnection=new cF().withUrl(i,{accessTokenFactory:()=>l,transport:uo.WebSockets}).configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(d=this.hubConnection)==null||d.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.join()}).catch(p=>{console.error("Connection failed:",p)})}connectEventHandlers(){var i,l,d,p,w,C;(i=this.hubConnection)==null||i.on(zs.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(zs.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.on(zs.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on(zs.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(w=this.hubConnection)==null||w.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(C=this.hubConnection)==null||C.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var i,l,d,p,w;(i=this.hubConnection)==null||i.off(zs.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(zs.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.off(zs.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),await((p=this.hubConnection)==null?void 0:p.stop()),(w=this.serverTimeService)==null||w.destroy(),super.destroy()}onReceiveGroupCommand(i){var l,d,p,w,C;switch(console.log("onReceiveGroupCommand",i),i.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(i.value.startDate)}),((l=i.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(d=i.value.rateClockState)==null?void 0:d.reference,start:(p=i.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(w=i.value.rateClockState)==null?void 0:w.reference,start:(C=i.value.rateClockState)==null?void 0:C.start});break;case"cast":this.emit("cast",{index:i.value});break;case"prepareCast":this.emit("prepareCast",{index:i.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(i){switch(console.log("onReceiveGlobalCommand",i),i.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(i){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[i]}))}onStateUpdate(i){switch(this.state=i.state.$type,i.state.$type){case VA.CONNECTED_STATE:if(!i.state.sessionId)return;this.emit("connected",{sessionId:i.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(i){console.log("SetupStatusUpdate: ",i),this.emit("setupStatusUpdate",{deviceLists:i})}}async function ah(o,i,l){var d;try{const p=await fetch(o,i);switch(p.status){case 401:throw new jp(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new jp(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const w=await p.json();if(!p.ok)throw new jp(l==null?void 0:l.name,(d=w.sys)==null?void 0:d.id,w.message,p.status);return w}catch(p){throw p instanceof jp?p:new jp(l.name,"Network Error",l.message||"Could not make the request")}}var KA={exports:{}};(function(o,i){(function(l,d){var p="1.0.38",w="",C="?",g="function",S="undefined",F="object",R="string",v="major",y="model",O="name",m="type",T="vendor",U="version",x="architecture",_="console",I="mobile",b="tablet",j="smarttv",Y="wearable",W="embedded",X=500,se="Amazon",N="Apple",$="ASUS",ce="BlackBerry",oe="Browser",ye="Chrome",be="Edge",$e="Firefox",Ae="Google",Ze="Huawei",it="LG",lt="Microsoft",Xe="Motorola",st="Opera",wt="Samsung",Oe="Sharp",Qe="Sony",ct="Xiaomi",Qt="Zebra",Vt="Facebook",Tt="Chromium OS",Pt="Mac OS",Ce=function(ft,yt){var Et={};for(var Ct in ft)yt[Ct]&&yt[Ct].length%2===0?Et[Ct]=yt[Ct].concat(ft[Ct]):Et[Ct]=ft[Ct];return Et},te=function(ft){for(var yt={},Et=0;Et<ft.length;Et++)yt[ft[Et].toUpperCase()]=ft[Et];return yt},Fe=function(ft,yt){return typeof ft===R?P(yt).indexOf(P(ft))!==-1:!1},P=function(ft){return ft.toLowerCase()},M=function(ft){return typeof ft===R?ft.replace(/[^\d\.]/g,w).split(".")[0]:d},q=function(ft,yt){if(typeof ft===R)return ft=ft.replace(/^\s\s*/,w),typeof yt===S?ft:ft.substring(0,X)},V=function(ft,yt){for(var Et=0,Ct,hn,$t,nn,Ot,Un;Et<yt.length&&!Ot;){var gr=yt[Et],Pr=yt[Et+1];for(Ct=hn=0;Ct<gr.length&&!Ot&&gr[Ct];)if(Ot=gr[Ct++].exec(ft),Ot)for($t=0;$t<Pr.length;$t++)Un=Ot[++hn],nn=Pr[$t],typeof nn===F&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):d:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):d:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):d):this[nn]=Un||d;Et+=2}},he=function(ft,yt){for(var Et in yt)if(typeof yt[Et]===F&&yt[Et].length>0){for(var Ct=0;Ct<yt[Et].length;Ct++)if(Fe(yt[Et][Ct],ft))return Et===C?d:Et}else if(Fe(yt[Et],ft))return Et===C?d:Et;return ft},fe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_t={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[O,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[O,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[O,U],[/opios[\/ ]+([\w\.]+)/i],[U,[O,st+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[O,st+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[O,st]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[O,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[O,U],[/\bddg\/([\w\.]+)/i],[U,[O,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[O,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[O,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[O,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[O,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[O,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[O,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[O,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[O,$e+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[O,st+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[O,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[O,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[O,st+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[O,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[O,$e]],[/\bqihu|(qi?ho?o?|360)browser/i],[[O,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[O,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[O,wt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[O,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[O,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[O,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[O,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[O],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[O,Vt],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[O,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[O,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[O,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[O,ye+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[O,ye+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[O,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[O,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[O,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,O],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[O,[U,he,fe]],[/(webkit|khtml)\/([\w\.]+)/i],[O,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[O,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[O,$e+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[O,U],[/(cobalt)\/([\w\.]+)/i],[O,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,P]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,w,P]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,P]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[y,[T,wt],[m,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[y,[T,wt],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[y,[T,N],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[y,[T,N],[m,b]],[/(macintosh);/i],[y,[T,N]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[y,[T,Oe],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[y,[T,Ze],[m,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[y,[T,Ze],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[y,/_/g," "],[T,ct],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[y,/_/g," "],[T,ct],[m,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[y,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[y,[T,"OPPO"],[m,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[y,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[y,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[y,[T,Xe],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[y,[T,Xe],[m,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[y,[T,it],[m,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[y,[T,it],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[y,[T,"Lenovo"],[m,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[y,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[y,[T,Ae],[m,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[y,[T,Ae],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[y,[T,Qe],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[y,"Xperia Tablet"],[T,Qe],[m,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[y,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[y,[T,se],[m,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[y,/(.+)/g,"Fire Phone $1"],[T,se],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[y,T,[m,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[y,[T,ce],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[y,[T,$],[m,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[y,[T,$],[m,I]],[/(nexus 9)/i],[y,[T,"HTC"],[m,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[y,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[y,[T,"Acer"],[m,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[y,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[y,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,y,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,y,[m,b]],[/(surface duo)/i],[y,[T,lt],[m,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[y,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[y,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[y,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[y,[T,"RCA"],[m,b]],[/\b(venue[\d ]{2,7}) b/i],[y,[T,"Dell"],[m,b]],[/\b(q(?:mv|ta)\w+) b/i],[y,[T,"Verizon"],[m,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[y,[T,"Barnes & Noble"],[m,b]],[/\b(tm\d{3}\w+) b/i],[y,[T,"NuVision"],[m,b]],[/\b(k88) b/i],[y,[T,"ZTE"],[m,b]],[/\b(nx\d{3}j) b/i],[y,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[y,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[y,[T,"Swiss"],[m,b]],[/\b((zeki)?tb.*\b) b/i],[y,[T,"Zeki"],[m,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],y,[m,b]],[/\b(ns-?\w{0,9}) b/i],[y,[T,"Insignia"],[m,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[y,[T,"NextBook"],[m,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],y,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],y,[m,I]],[/\b(ph-1) /i],[y,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[y,[T,"Envizen"],[m,b]],[/\b(trio[-\w\. ]+) b/i],[y,[T,"MachSpeed"],[m,b]],[/\btu_(1491) b/i],[y,[T,"Rotor"],[m,b]],[/(shield[\w ]+) b/i],[y,[T,"Nvidia"],[m,b]],[/(sprint) (\w+)/i],[T,y,[m,I]],[/(kin\.[onetw]{3})/i],[[y,/\./g," "],[T,lt],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[y,[T,Qt],[m,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[y,[T,Qt],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,j]],[/hbbtv.+maple;(\d+)/i],[[y,/^/,"SmartTV"],[T,wt],[m,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,it],[m,j]],[/(apple) ?tv/i],[T,[y,N+" TV"],[m,j]],[/crkey/i],[[y,ye+"cast"],[T,Ae],[m,j]],[/droid.+aft(\w+)( bui|\))/i],[y,[T,se],[m,j]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[y,[T,Oe],[m,j]],[/(bravia[\w ]+)( bui|\))/i],[y,[T,Qe],[m,j]],[/(mitv-\w{5}) bui/i],[y,[T,ct],[m,j]],[/Hbbtv.*(technisat) (.*);/i],[T,y,[m,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[y,q],[m,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,y,[m,_]],[/droid.+; (shield) bui/i],[y,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[y,[T,Qe],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[y,[T,lt],[m,_]],[/((pebble))app/i],[T,y,[m,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[y,[T,N],[m,Y]],[/droid.+; (glass) \d/i],[y,[T,Ae],[m,Y]],[/droid.+; (wt63?0{2,3})\)/i],[y,[T,Qt],[m,Y]],[/(quest( \d| pro)?)/i],[y,[T,Vt],[m,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,W]],[/(aeobc)\b/i],[y,[T,se],[m,W]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[y,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[y,[m,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[y,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[O,be+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[O,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[O,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,O]],os:[[/microsoft (windows) (vista|xp)/i],[O,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[O,[U,he,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,he,He],[O,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[O,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[O,Pt],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,O],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[O,U],[/\(bb(10);/i],[U,[O,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[O,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[O,$e+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[O,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[O,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[O,ye+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[O,Tt],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[O,U],[/(sunos) ?([\w\.\d]*)/i],[[O,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[O,U]]},ot=function(ft,yt){if(typeof ft===F&&(yt=ft,ft=d),!(this instanceof ot))return new ot(ft,yt).getResult();var Et=typeof l!==S&&l.navigator?l.navigator:d,Ct=ft||(Et&&Et.userAgent?Et.userAgent:w),hn=Et&&Et.userAgentData?Et.userAgentData:d,$t=yt?Ce(_t,yt):_t,nn=Et&&Et.userAgent==Ct;return this.getBrowser=function(){var Ot={};return Ot[O]=d,Ot[U]=d,V.call(Ot,Ct,$t.browser),Ot[v]=M(Ot[U]),nn&&Et&&Et.brave&&typeof Et.brave.isBrave==g&&(Ot[O]="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot[x]=d,V.call(Ot,Ct,$t.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[T]=d,Ot[y]=d,Ot[m]=d,V.call(Ot,Ct,$t.device),nn&&!Ot[m]&&hn&&hn.mobile&&(Ot[m]=I),nn&&Ot[y]=="Macintosh"&&Et&&typeof Et.standalone!==S&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ot[y]="iPad",Ot[m]=b),Ot},this.getEngine=function(){var Ot={};return Ot[O]=d,Ot[U]=d,V.call(Ot,Ct,$t.engine),Ot},this.getOS=function(){var Ot={};return Ot[O]=d,Ot[U]=d,V.call(Ot,Ct,$t.os),nn&&!Ot[O]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Ot[O]=hn.platform.replace(/chrome os/i,Tt).replace(/macos/i,Pt)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===R&&Ot.length>X?q(Ot,X):Ot,this},this.setUA(Ct),this};ot.VERSION=p,ot.BROWSER=te([O,U,v]),ot.CPU=te([x]),ot.DEVICE=te([y,T,m,_,I,j,b,Y,W]),ot.ENGINE=ot.OS=te([O,U]),o.exports&&(i=o.exports=ot),i.UAParser=ot;var rt=typeof l!==S&&(l.jQuery||l.Zepto);if(rt&&!rt.ua){var et=new ot;rt.ua=et.getResult(),rt.ua.get=function(){return et.getUA()},rt.ua.set=function(ft){et.setUA(ft);var yt=et.getResult();for(var Et in yt)rt.ua[Et]=yt[Et]}}})(typeof window=="object"?window:Kc)})(KA,KA.exports);var GH=KA.exports;const fL=new GH.UAParser;function qH(o){const i=fL.getOS(),l=fL.getBrowser();return"Gigset/".concat(o," (").concat(i.name," ").concat(i.version,"; ").concat(l.name," ").concat(l.version,")")}function Ag({sessionId:o,appVersion:i,apiVersion:l}){const d={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":qH(i),"Api-version":l!=null?l:"v1"};return o&&(d.Session=o),d}async function HH({deviceId:o,appVersion:i,baseUrl:l}){const d={deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(o,")"),deviceId:o};return(await ah)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(d),headers:Ag({appVersion:i})},{name:os.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function VH({deviceId:o,ticketCode:i,scanTvDeviceId:l,appVersion:d,baseUrl:p,ticketPrefix:w}){let C=p;w&&(C="".concat(p));const g={ticketCode:i,deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(o,")"),deviceId:o,scanTvDeviceId:l};return(await ah)("".concat(C,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:Ag({appVersion:d})},{name:os.NEGOTIATE,message:"could not fetch negotiate data"})}async function dL({sessionId:o,appVersion:i,baseUrl:l,ticketPrefix:d,ticketCode:p}){let w=l;d&&(w="".concat(l,"/").concat(d));const C=await ah("".concat(w,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:Ag({sessionId:o,appVersion:i})},{name:os.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(C.timelineUrl).concat(C.queryParameters),{method:"GET",headers:Ag({sessionId:o,appVersion:i})}).then(async S=>await S.json()),queryParameters:C.queryParameters,distributionUrl:C.distributionUrl}}async function hL({sessionId:o,appVersion:i,baseUrl:l,ticketCode:d}){return(await ah)("".concat(l,"/static-api/event/").concat(d,"/status"),{method:"GET",headers:Ag({sessionId:o,appVersion:i})},{name:os.EVENT_STATUS,message:"failed to get event status data"})}function KH(o){return"".concat(o,"/timeline-api/drm/license?drm=widevine")}var Hc=(o=>(o.JUMPSPOT="jumpspot",o.FOLLOW="follow",o))(Hc||{});function uC(o){return[...o.places.flatMap((i,l)=>i.jumpSpots.map(d=>({camera:d.camera,title:d.title,type:"jumpspot",placeIndex:l,mapPosition:i.mapPosition,mapScale:i.mapScale,placeTitle:i.title}))),...o.follows.map(i=>({camera:i.camera,title:i.title,type:"follow",mapPosition:i.mapPositions}))].map((i,l)=>({...i,index:l}))}function M0(o,i){return uC(o).filter(d=>{const p=mi(d.camera.span.time,o.frameRate),w=mi(d.camera.span.time,o.frameRate)+mi(d.camera.span.duration,o.frameRate);return p<=i&&w>=i})}function fF(o,i,l,d){const p=M0(o,i+l+2);if(!p.length)return;if(d){const g=(d==null?void 0:d.placeIndex)!==void 0&&p.find(S=>S.type==="jumpspot"&&S.placeIndex===(d==null?void 0:d.placeIndex));if(g)return g}const w=p.find(g=>g.type==="jumpspot");if(w)return w;const C=p.find(g=>g.type==="follow");if(C)return C}function zH(o){const i=uC(o),l=o.frameRate;return i.sort((d,p)=>{const w=mi(d.camera.span.time,l)+mi(d.camera.span.duration,l);return mi(p.camera.span.time,l)+mi(p.camera.span.duration,l)-w}),i[0]}function mi(o,i){if(!o)return 0;const[l,d,p,w]=o.split(":").map(Number),C=l*60*60,g=d*60;if(i){const S=w/i;return C+g+p+S}else return C+g+p}function zA(o,i,l){return M0(i,l.getExpectedPositionInSeconds()).find(d=>d.index===o)}function pL(o,i){return uC(i).find(d=>d.camera.cameraID===o)}const YH=o=>{if(typeof o=="string")return"String!";if(typeof o=="number")return"Int";if(typeof o=="boolean")return"Boolean";if(typeof o=="object"&&"OR"in o)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof o))};function dF(o,i,l){const d=o.includes("staging")||o.includes("qa"),p={...l,preview:d},C=(Array.isArray(i)?i[0]:i).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([F,R])=>"$".concat(F,": ").concat(YH(R))).join(", "),S="query(".concat(g,")").concat(C);return JSON.stringify({query:S,variables:p})}const hF=o=>"https://graphql.contentful.com/content/v1/spaces/".concat(o,"/environments/master");function pF(o,i){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:o}}const WH=(o,i)=>dF(i,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:o});async function gL(o,i,l,d){var C,g;const p=WH(o.toUpperCase(),i),w=await ah(hF(d),pF(p,l),{name:os.EVENT_META,message:"Could not fetch event meta."});return(g=(C=w==null?void 0:w.data)==null?void 0:C.eventCollection.items)==null?void 0:g[0]}function XH(o,i){const l=o.reduce((d,p)=>(d.OR.push({slug:p}),d),{OR:[]});return dF(i,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function $H(o,i,l){var w,C;const d=XH(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],o);return(C=(w=(await ah(hF(l),pF(d,i),{name:os.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:w.resourceSetCollection)==null?void 0:C.items}const QH=o=>(i,l,d)=>{const p=o(i,l),w=o(i,d);return p!==null&&w!==null?p<w?p:w:p!==null?p:w!==null?w:null},JH=o=>({acceleration:i,position:l,velocity:d},p)=>{const w=o(l,d,i,p);if(w.length===0)return null;if(w.length===1)return w[0]>0?w[0]:null;if(w.length===2){if(w[1]<0)return null;if(w[0]>0)return w[0];if(w[1]>0)return w[1]}return null},e7=o=>(i,l,d)=>{const p=o(i,l,d);return p===null||p===Number.POSITIVE_INFINITY?null:p},t7=(o,i)=>class{constructor(){this._listeners=new WeakMap,this._nativeEventTarget=o()}addEventListener(d,p,w){if(p!==null){let C=this._listeners.get(p);C===void 0&&(C=i(this,p),typeof p=="function"&&this._listeners.set(p,C)),this._nativeEventTarget.addEventListener(d,C,w)}}dispatchEvent(d){return this._nativeEventTarget.dispatchEvent(d)}removeEventListener(d,p,w){const C=p===null?void 0:this._listeners.get(p);this._nativeEventTarget.removeEventListener(d,C===void 0?null:C,w)}},n7=o=>()=>{if(o===null)throw new Error("A native EventTarget could not be created.");return o.document.createElement("p")},r7=()=>{try{return new DOMException("","IllegalValueError")}catch(o){return o.name="IllegalValueError",o}},i7=()=>{try{return new DOMException("","InvalidStateError")}catch(o){return o.code=11,o.name="InvalidStateError",o}},o7=(o,i,l,d,p,w,C,g)=>class extends d{constructor(S={},F=Number.NEGATIVE_INFINITY,R=Number.POSITIVE_INFINITY){super();const{timingProviderSource:v,vector:y}=S.update===void 0?{timingProviderSource:null,vector:S}:{timingProviderSource:S,vector:{}};if(this._endPosition=v===null?R:v.endPosition,this._onchange=null,this._onerror=null,this._onreadystatechange=null,this._readyState=v===null?"open":v.readyState,this._skew=v===null?0:v.skew,this._startPosition=v===null?F:v.startPosition,this._timingProviderSource=v,this._timeoutId=null,this._vector=v===null?{acceleration:0,position:0,velocity:0,...p(y),timestamp:w.now()/1e3}:v.vector,R<this._vector.position&&(this._vector={...this._vector,acceleration:0,position:R,velocity:0}),F>this._vector.position&&(this._vector={...this._vector,acceleration:0,position:F,velocity:0}),this._setInternalTimeout(),v===null)C(()=>this.dispatchEvent(new Event("readystatechange")));else{const O=()=>{this._skew=v.skew},m=()=>this._setInternalVector(v.vector),T=()=>{this._isAllowedTransition(v.readyState)?this._readyState=v.readyState:(this._readyState="closed",v.removeEventListener("adjust",O),v.removeEventListener("change",m),v.removeEventListener("readystatechange",T)),v.error!==null&&C(()=>this.dispatchEvent(new ErrorEvent("error",{error:v.error}))),C(()=>this.dispatchEvent(new Event("readystatechange")))};v.addEventListener("adjust",O),v.addEventListener("change",m),v.addEventListener("readystatechange",T)}}get endPosition(){return this._endPosition}get onchange(){return this._onchange===null?this._onchange:this._onchange[0]}set onchange(S){if(this._onchange!==null&&this.removeEventListener("change",this._onchange[1]),typeof S=="function"){const F=S.bind(this);this.addEventListener("change",F),this._onchange=[S,F]}else this._onchange=null}get onerror(){return this._onerror===null?this._onerror:this._onerror[0]}set onerror(S){if(this._onerror!==null&&this.removeEventListener("error",this._onerror[1]),typeof S=="function"){const F=S.bind(this);this.addEventListener("error",F),this._onerror=[S,F]}else this._onerror=null}get onreadystatechange(){return this._onreadystatechange===null?this._onreadystatechange:this._onreadystatechange[0]}set onreadystatechange(S){if(this._onreadystatechange!==null&&this.removeEventListener("readystatechange",this._onreadystatechange[1]),typeof S=="function"){const F=S.bind(this);this.addEventListener("readystatechange",F),this._onreadystatechange=[S,F]}else this._onreadystatechange=null}get readyState(){return this._readyState}get startPosition(){return this._startPosition}get timingProviderSource(){return this._timingProviderSource}query(){if(this._readyState!=="open")throw l();const S=w.now()/1e3,F=this._timingProviderSource===null?S-this._vector.timestamp:S+this._skew-this._vector.timestamp,R=g(this._vector,F);return this._endPosition<R.position||this._startPosition>R.position?(this._setInternalVector({...R,acceleration:0,position:this._endPosition<R.position?this._endPosition:this._startPosition,velocity:0}),this.query()):R}update(S){if(this._readyState!=="open")return Promise.reject(l());if(this._timingProviderSource!==null){const m=this._timingProviderSource.update(S);return m instanceof Promise?m:Promise.reject(new TypeError("The timingProviderSource failed to return a promise."))}const F=p(S);if(Object.keys(F).length===0)return Promise.resolve();const R={...this.query(),...F},{position:v,velocity:y,acceleration:O}=R;return v<this._startPosition||v>this._endPosition||v===this._startPosition&&(y<0||y===0&&O<0)||v===this._endPosition&&(y>0||y===0&&O>0)?Promise.reject(i()):(this._setInternalVector(R),Promise.resolve())}_isAllowedTransition(S){return this._readyState==="closing"&&S==="closed"||this._readyState==="connecting"||this._readyState==="open"&&(S==="closed"||S==="closing")}_setInternalTimeout(){if(this._timeoutId!==null&&(clearTimeout(this._timeoutId),this._timeoutId=null),this._endPosition===Number.POSITIVE_INFINITY&&this._startPosition===Number.NEGATIVE_INFINITY||this._vector.acceleration===0&&this._vector.velocity===0)return;const S=o(this._vector,this._startPosition,this._endPosition);S!==null&&(this._timeoutId=C(()=>this.query(),S))}_setInternalVector(S){this._vector=S,this._setInternalTimeout(),C(()=>this.dispatchEvent(new Event("change")))}},a7=()=>typeof window>"u"?null:window,s7=(o,i,l,d)=>{if(l===0&&i===0)return o!==d?[]:[0];if(l===0)return[(d-o)/i];const p=i/l,w=Math.sqrt(p**2-2/l*(o-d));return[w-p,-(w+p)].filter(C=>!isNaN(C)).sort()},u7=o=>{if(o===void 0)return{};let i=o.acceleration!==null&&o.acceleration!==void 0?{acceleration:o.acceleration}:{};return o.position!==null&&o.position!==void 0&&(i={...i,position:o.position}),o.velocity!==null&&o.velocity!==void 0?{...i,velocity:o.velocity}:i},gF=(o,i)=>{const{acceleration:l,position:d,timestamp:p,velocity:w}=o;return{acceleration:l,position:d+w*i+.5*l*i**2,timestamp:p+i,velocity:w+l*i}},l7=(o,i)=>l=>{const d={value:o};return Object.defineProperties(l,{currentTarget:d,target:d}),typeof i=="function"?i.call(o,l):i.handleEvent.call(o,l)},c7=o7(e7(QH(JH(s7))),r7,i7,t7(n7(a7()),l7),u7,performance,setTimeout,gF),mL=Symbol.observable||"@@observable";function f7(o){return Symbol.observable||(typeof o=="function"&&o.prototype&&o.prototype[Symbol.observable]?(o.prototype[mL]=o.prototype[Symbol.observable],delete o.prototype[Symbol.observable]):(o[mL]=o[Symbol.observable],delete o[Symbol.observable])),o}const Sv=()=>{},yL=o=>{throw o};function d7(o){var i,l,d;return o?o.next&&o.error&&o.complete?o:{complete:((i=o.complete)!=null?i:Sv).bind(o),error:((l=o.error)!=null?l:yL).bind(o),next:((d=o.next)!=null?d:Sv).bind(o)}:{complete:Sv,error:yL,next:Sv}}const h7=(o,i,l)=>()=>l(d=>{if(i===null||i.cancelAnimationFrame===void 0||i.requestAnimationFrame===void 0)return o(d);let p=i.requestAnimationFrame(function w(C){p=i.requestAnimationFrame(w),d.next(C)});return()=>i.cancelAnimationFrame(p)}),p7=o=>(i,l,d)=>o(p=>{const w=C=>p.next(C);return i.addEventListener(l,w,d),()=>i.removeEventListener(l,w,d)}),g7=()=>typeof window>"u"?null:window,m7=(o,i)=>{const l=()=>{},d=p=>typeof p[0]=="function";return p=>{const w=(...C)=>{const g=p(d(C)?i({next:C[0]}):i(...C));return g!==void 0?g:l};return w[Symbol.observable]=()=>({subscribe:(...C)=>({unsubscribe:w(...C)})}),o(w)}},y7=o=>(o.error(new Error("The required browser API seems to be not supported.")),()=>{}),v7=g7(),mF=m7(f7,d7),E7=h7(y7,v7,mF),_7=p7(mF),T7=o=>(i,l,d,p)=>{const w=(Math.abs(i)+o)/o;return Math.max(l,Math.min(d,i>0?p/w:w*p))},S7=1,w7=.5,vL=.025,A7=(o,i,l,d,p,w,C)=>{const g=C!==null&&C.navigator.userAgent.includes("Safari")&&!C.navigator.userAgent.includes("Chrome")?d(vL):l(o(w7),p(C),S7,vL);return i(w,g)},I7=o=>(i,l,d)=>{const p=o.get(i);(p===void 0||Math.abs(p[0]-l)>1e-4||p[1]!==d)&&(i.currentTime=d,o.set(i,[i.currentTime,d]))},C7=(o,i,l)=>(d,p,w)=>{const C=i.get(d);(C===void 0||C[0]!==p||C[1]!==w)&&(d.playbackRate=w>1?Math.max(l,w):Math.min(o,w),i.set(d,[d.playbackRate,w]))},yF=(o,i)=>(l,d,p=null,w=null)=>o(l,d,i,p,w),b7=(o,i,l,d,p,w)=>(C,g,S,F=null,R=null)=>{let v=null;const y=()=>{const{currentTime:x,duration:_,playbackRate:I}=C,b=g.query();v=S(F===null?b:F(b),x,v);const j=typeof _=="number"&&!isNaN(_)?_:0,{position:Y,velocity:W}=R===null?v:R(v);return v={...v,position:Y,velocity:W},w(x,j,C,I,Y,W),W!==0};let O;const m=()=>{y()||(O(),O=U())},T=()=>{let x=p(()=>m(),100);const _=()=>{i(x),x=p(()=>m(),100)},I=[()=>i(x),o()(()=>{_(),m()}),d(g,"change")(()=>{l.visibilityState==="hidden"&&(_(),m())})];return()=>I.forEach(b=>b())},U=()=>d(g,"change")(()=>{y()&&(O(),O=T())});return O=y()?T():U(),()=>O()},R7=(o,[i,l],d,p)=>({position:w,velocity:C},g,S)=>{let{mediaElementDelay:F}=S!=null?S:{mediaElementDelay:0};if(C<i||C>l)return{mediaElementDelay:F,position:w,velocity:0};if(w<0||C===0)return{mediaElementDelay:F,position:w,velocity:C};const R=g-w,v=Math.abs(R);if(v>d){const{position:y}=S!=null?S:{position:null};if(R<0||R>F)return y===g&&(F+=v),{mediaElementDelay:F,position:w+F,velocity:C};if(y!==g)return F-=v,{mediaElementDelay:F,position:w+F,velocity:C}}return v>p?{mediaElementDelay:F,position:g,velocity:o(R,i,l,C)}:{mediaElementDelay:F,position:g,velocity:C}},N7=(o,i,l,d)=>(p,w,C,g,S,F)=>{S<0?(p>0&&l(C,p,0),o(C)):S>=w?(p!==w&&l(C,p,w),o(C)):p!==S?(l(C,p,S),F!==0?(g!==F&&d(C,g,F),i(C)):o(C)):g!==F&&(F!==0?(d(C,g,F),i(C)):o(C))},EL=.5,x7=o=>i=>(l,d,p)=>{let{lastAppliedPostion:w,lastAppliedTimestamp:C,lastAppliedVelocity:g,lastPlayheadDifference:S,mediaElementDelay:F,numberOfDetectedResets:R,numberOfExpectedResets:v}=p!=null?p:{lastAppliedPostion:0,lastAppliedTimestamp:0,lastAppliedVelocity:0,lastPlayheadDifference:0,mediaElementDelay:0,numberOfDetectedResets:0,numberOfExpectedResets:1};if(l.position<0||l.velocity===0)return w=l.position,g=l.velocity,{lastAppliedPostion:w,lastAppliedTimestamp:0,lastAppliedVelocity:g,lastPlayheadDifference:S,mediaElementDelay:F,numberOfDetectedResets:R,numberOfExpectedResets:v,position:w,velocity:g};if(g===l.velocity&&S<EL){const m=Math.abs(d-w)*g;if(m<EL)if(m+.001>S){if(S=m,R<v)return{lastAppliedPostion:w,lastAppliedTimestamp:C,lastAppliedVelocity:g,lastPlayheadDifference:S,mediaElementDelay:F,numberOfDetectedResets:R,numberOfExpectedResets:v,position:d,velocity:g}}else{if(S=m,R+=1,R<=v)return{lastAppliedPostion:w,lastAppliedTimestamp:C,lastAppliedVelocity:g,lastPlayheadDifference:S,mediaElementDelay:F,numberOfDetectedResets:R,numberOfExpectedResets:v,position:d,velocity:g};v+=1}else S=m,v=Math.max(R,1)}else C=0;const y=Math.abs(d-l.position),O=g===0||g<0&&l.velocity>0||g>0&&l.velocity<0;if(y>i||O){if(C>0){const m=l.timestamp-C,{position:T}=o({acceleration:0,position:w,timestamp:C,velocity:g},m);F=T-d}return w=l.position+F,g=l.velocity,{lastAppliedPostion:w,lastAppliedTimestamp:l.timestamp,lastAppliedVelocity:g,lastPlayheadDifference:0,mediaElementDelay:F,numberOfDetectedResets:0,numberOfExpectedResets:v,position:w,velocity:g}}return{lastAppliedPostion:w,lastAppliedTimestamp:C,lastAppliedVelocity:g,lastPlayheadDifference:S,mediaElementDelay:F,numberOfDetectedResets:R,numberOfExpectedResets:v,position:d,velocity:l.velocity}},M7=()=>typeof window>"u"?null:window,qw=[Number.MIN_VALUE,Number.MAX_VALUE],D7=o=>{if(o===null)return qw;const i=new o.Audio;try{i.playbackRate=17}catch(l){return[.0625,16]}try{i.playbackRate=-1}catch(l){return[0,qw[1]]}return qw},P7=o=>{o.paused||o.pause()},O7=o=>{o.paused&&o.play().catch(i=>console.error(i))},vF=x7(gF),L7=N7(P7,O7,I7(new WeakMap),C7(881/882,new WeakMap,882/881)),EF=b7(E7,clearInterval,document,_7,setInterval,L7);A7(T7,yF,R7,vF,D7,EF,M7());const k7=yF(EF,vF(.4));class F7{constructor(){this.connectedSources=new Map,this.timingObject=new c7}start(){this.timingObject.update({velocity:1})}stop(){this.timingObject.update({velocity:0})}setVelocity(i){this.timingObject.update({velocity:i})}updatePosition(i){this.timingObject.update({position:i})}connectMediaElement(i,l=0){const d=this.connectedSources.get(i);d&&d();const p=k7(i,this.timingObject,({position:w,...C})=>({...C,position:w-l}));return this.connectedSources.set(i,p),p}destroy(){this.connectedSources.forEach(i=>{i()})}}class U7 extends hf{constructor(i){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new F7,this.state="idle",this.startTime=i,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const i=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&i&&i>Date.now()}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const i=this._timelineData.frameRate,l=zH(this._timelineData);return this.adjustedStartTime+(mi(l.camera.span.time,i)+mi(l.camera.span.duration,i))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(i){this._timelineData=i}pausePlayStream(i,l,d){if(i==="pause"&&!this.isPaused)this.isPaused=!0,this.playerSyncer.stop();else if(i==="play"){if(l&&d){const p=new Date(l).getTime()/1e3,w=new Date(d).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-w,this.playerSyncer.updatePosition(this.getExpectedPositionInSeconds())}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,this.playerSyncer.start(),clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const i=this.playerSyncer.timingObject.query().position,l=this.getExpectedPositionInSeconds();this.isPaused||i.toFixed(1)!==l.toFixed(1)&&(console.log("positon is off",i,l),this.playerSyncer.updatePosition(l))},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(i,l=!1){this.startTime=i,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(i){this.serverTimeOffset=i}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class B7 extends hf{constructor(i,l,d){super(),this.eventClock=i,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=d!=null?d:2}updateTimelineData(i){this.timelineData=i}updatePlaying(i){var d,p,w;let l=!1;if(this.timelineData){const C=this.timelineData.frameRate,g=(w=(p=(d=i.camera.attentions)==null?void 0:d.filter(S=>S.scope==="global"))==null?void 0:p.sort((S,F)=>mi(S.time)-mi(F.time)))!=null?w:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const F=this.eventClock.getExpectedPositionInSeconds()-mi(i.camera.span.time,C),R=mi(i.camera.span.duration,C)-F;if(g.length){const v=g.find(O=>F<mi(O.time)),y=v?mi(v.time)-F:0;y>0&&y<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},y))}R<=this.nearEndThreshold+1&&R>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(R-this.nearEndThreshold)*1e3):R<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),R<=this.transitionThreshold+1&&R>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(R-this.transitionThreshold)*1e3)),R<=1&&R>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},R*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const j7="1.0.0";function Z7({baseUrl:o,contentfulAccessToken:i,contentfulSpaceId:l}){const[d,p]=vn.useState(),[w,C]=vn.useState(),g=vn.useCallback((S,F)=>{var R,v;return d&&((v=(R=d.find(y=>y.slug===S))==null?void 0:R.resourcesCollection.items.find(y=>y.key===F))==null?void 0:v.value)||""},[d]);return vn.useEffect(()=>{o&&i&&l&&(C(void 0),$H(o,i,l).then(S=>{p(S)}).catch(S=>{C(S)}))},[o,i,l]),{contentfulData:d,getContentfulValue:g,error:w}}const G7={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},Ba=$s.createContext(G7);function q7({children:o,baseUrl:i,preferredProfile:l,contentfulAccessToken:d,contentfulSpaceId:p,newSetupToggle:w=!1,ticketCodeProp:C}){const g=ig(),S=j7,[F,R]=vn.useState(),[v,y]=vn.useState(),[O,m]=vn.useState(),[T,U]=vn.useState(),[x,_]=vn.useState(),[I,b]=vn.useState(),[j,Y]=vn.useState(),[W,X]=vn.useState(C),[se,N]=vn.useState(),[$,ce]=vn.useState(),[oe,ye]=vn.useState(),[be,$e]=vn.useState(),[Ae,Ze]=vn.useState(),[it,lt]=vn.useState([]),[Xe,st]=vn.useState([]),[wt,Oe]=vn.useState(!1),[Qe,ct]=vn.useState(),{getContentfulValue:Qt,error:Vt}=Z7({baseUrl:i,contentfulAccessToken:d,contentfulSpaceId:p}),Tt=3;function Pt(Ce,te){return te.filter(Fe=>Ce!==Fe.name)}return vn.useEffect(()=>{lt(Vt?Ce=>[...Ce,Vt]:Ce=>Pt(os.CONTENTFUL,Ce))},[Vt]),vn.useEffect(()=>{X(C)},[C]),vn.useEffect(()=>{i&&g&&w&&(async()=>{let te=0;const Fe=()=>HH({deviceId:g,appVersion:S,baseUrl:i});for(;te<Tt;)await Fe().then(P=>{Ze(P),te=Tt}).catch(P=>{te+=1,te===2&&console.error(P)})})()},[S,i,g,w]),vn.useEffect(()=>{if(!Ae)return;const Ce=new cF().withUrl(Ae.url,{accessTokenFactory:()=>Ae.accessToken,transport:uo.WebSockets}).build();Ce.start().catch(te=>{console.error("Global signalR connection failed:",te)}),Ce.on(zs.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:te,ticketCode:Fe})=>{X(Fe),N(te),localStorage.setItem("ticketCode",Fe)}),_(Ce)},[Ae]),vn.useEffect(()=>{!W||!se||!x||(console.log("Disconnecting global signalR..."),x.invoke(zs.CLIENT_DISCONNECT))},[W,se,x]),vn.useEffect(()=>{if(!W||!se&&w){$e(void 0);return}const Ce=W[0];lt(te=>Pt(os.NEGOTIATE,te)),VH({deviceId:g,deviceType:6,appVersion:S,ticketCode:W,scanTvDeviceId:se,ticketPrefix:Ce,baseUrl:i}).then(te=>{$e(te),Oe(te.ticketType>3)}).catch(te=>{lt(Fe=>[...Fe,te])})},[W,S,i,g,se,w]),vn.useEffect(()=>{if(!(be!=null&&be.accessToken)||!be.url||!W)return;const Ce=new U7(new Date(0)),te=new B7(Ce),Fe=new ZH({groupName:W,deviceId:g,debug:!1});return Fe.connect({url:be.url,accessToken:be.accessToken}),Fe.on("setupStatusUpdate",({deviceLists:P})=>{const M=P.connectedDevices[0].sessionId;ct(P.connectedDevices),console.log("signalRClient connected with sessionId: ",M),b(M),st(he=>Pt(os.EVENT_STATUS,he));const q=()=>{hL({appVersion:S,baseUrl:i,ticketCode:W,sessionId:M}).then(he=>{if(y(he),he.broadcastStart)if(wt){const fe=new Date;fe.setHours(fe.getHours()+1),Ce.updateStartTime(fe,!0)}else Ce.updateStartTime(new Date(he.broadcastStart),!0)}).catch(he=>{st(fe=>[...fe,he])})};q(),Fe.on("eventStatusChanged",q),gL(W[0],i,d,p).then(he=>{m(he)}).catch(he=>{st(fe=>[...fe,he])}),st(he=>Pt(os.GENERATE,he));const V=()=>{dL({sessionId:M,appVersion:S,baseUrl:i,ticketCode:W}).then(he=>{Ce.timelineData=he,R(he),te.updateTimelineData(he)}).catch(he=>{st(fe=>[...fe,he])})};Ce.on("fetchTimeline",V)}),Fe.on("stateUpdated",({state:P})=>{console.log(P,"stateUpdate"),Y(P)}),Fe.on("stateUpdated",({state:P})=>{console.log(P,"stateUpdate"),Y(P)}),Fe.on("serverTimeOffsetUpdate",({serverTimeOffset:P})=>{console.log("server time offset updated",P),Ce.updateServerTimeOffset(P)}),Fe.on("startTimeUpdated",({startTime:P})=>{console.log("startTimeUpdated",P),Ce.updateStartTime(P,!0)}),Fe.on("connected",({sessionId:P})=>{console.log("signalRClient connected with sessionId: ",P),b(P),st(V=>Pt(os.EVENT_STATUS,V));const M=()=>{hL({appVersion:S,baseUrl:i,ticketCode:W,sessionId:P}).then(V=>{if(y(V),V.broadcastStart)if(wt){const he=new Date;he.setHours(he.getHours()+1),Ce.updateStartTime(he,!0)}else Ce.updateStartTime(new Date(V.broadcastStart),!0)}).catch(V=>{st(he=>[...he,V])})};M(),Fe.on("eventStatusChanged",M),gL(W[0],i,d,p).then(V=>{m(V)}).catch(V=>{st(he=>[...he,V])}),st(V=>Pt(os.GENERATE,V));const q=()=>{dL({sessionId:P,appVersion:S,baseUrl:i,ticketCode:W}).then(V=>{Ce.timelineData=V,R(V),te.updateTimelineData(V)}).catch(V=>{st(he=>[...he,V])})};Ce.on("fetchTimeline",q)}),U(Fe),ce(Ce),ye(te),()=>{Y(void 0),ct(void 0),Fe.destroy(),te.destroy(),Ce.destroy()}},[be,W,S,i,g,d,p,wt]),xt.jsx(Ba.Provider,{value:{signalRClient:T,timelineData:F,eventStatus:v,eventMeta:O,hubState:j,sessionId:I,ticketCode:W,eventClock:$,orchestrator:oe,preferredProfile:l,baseUrl:i,negotiateData:be,isDev:wt,getContentfulValue:Qt,preConnectErrors:it,postConnectErrors:Xe,connectedDevices:Qe},children:o})}const H7="_focused_tk4zu_1",_L={focused:H7};function Pa({selfFocus:o,...i}){const{ref:l,focused:d,focusSelf:p}=aF.useFocusable({onEnterPress:()=>{i.onClick()}});return vn.useEffect(()=>{o&&p()},[p,o]),xt.jsx("button",{...i,ref:l,className:"".concat(i.className||""," ").concat(_L.focusable," ").concat(d?_L.focused:"")})}function sh(){return vn.useContext(Ba).signalRClient}function pf(){return vn.useContext(Ba).timelineData}function lC(){return vn.useContext(Ba).eventMeta}function V7(){return vn.useContext(Ba).hubState}function K7(){return vn.useContext(Ba).sessionId}function z7(){return vn.useContext(Ba).ticketCode[0]}function nu(){return vn.useContext(Ba).eventClock}function Y7(){return vn.useContext(Ba).negotiateData}function cC(){return vn.useContext(Ba).isDev}function W7(){return vn.useContext(Ba).postConnectErrors}function kg(){return vn.useContext(Ba).orchestrator}function fC(){return vn.useContext(Ba).connectedDevices}function _F(){const o=pf(),i=z7(),l=vn.useContext(Ba);return vn.useMemo(()=>[o==null?void 0:o.profiles.find(d=>d.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?KH(l.baseUrl):void 0,o==null?void 0:o.queryParameters],[l.preferredProfile,i,o,l.baseUrl])}const X7=()=>xt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:xt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function $7(){const o=sh(),i=nu(),l=vn.useCallback(C=>{!i||!o||o.sendGroupCommand({command:"play",value:{senderID:ig(),startDate:new Date(i.startTime.getTime()-C).toISOString(),rateClockState:{rate:1}}})},[o,i]),d=vn.useCallback(C=>{!i||!o||o.sendGroupCommand({command:"play",value:{senderID:ig(),startDate:new Date(i.serverNow()-C).toISOString(),rateClockState:{rate:1}}})},[o,i]),p=vn.useCallback(()=>{if(!i||!o)return;const C=new Date;C.setSeconds(C.getSeconds()+5),o.sendGroupCommand({command:"play",value:{senderID:ig(),startDate:new Date(C).toISOString(),rateClockState:{rate:1}}})},[o,i]);return{seekBy:l,seekTo:d,disconnect:()=>{o==null||o.disconnect()},restart:p}}function Q7({eventPlayer:o}){var T,U;const i=sh(),l=nu(),[d,p]=vn.useState(!1),[w,C]=vn.useState(),{seekBy:g,seekTo:S,disconnect:F,restart:R}=$7(),[v,y]=vn.useState([]),O=pf(),m=()=>{p(!d)};return vn.useEffect(()=>{if(!l||!O)return;const x=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),I=M0(O,_);y(I.map(b=>b)),C({expectedPosition:_})},500);return()=>{clearInterval(x)}},[l,O]),xt.jsxs("div",{className:"demo-remote-container",children:[xt.jsx("div",{className:"icon-wrapper",onClick:m,children:xt.jsx(X7,{})}),d&&xt.jsxs(xt.Fragment,{children:[xt.jsx("h2",{children:"Demo Remote"}),xt.jsx(Pa,{selfFocus:!0,onClick:()=>{o==null||o.requestFullscreen()},children:"Go to fullscreen"}),w&&xt.jsx("div",{children:xt.jsxs("p",{children:["Expected position in seconds"," ",w.expectedPosition.toFixed(2)]})}),xt.jsx(Pa,{onClick:()=>{S(-5e3)},children:"Start in 5 sec"}),xt.jsx(Pa,{onClick:()=>{R()},children:"Restart"}),xt.jsx(Pa,{onClick:()=>{g(1e4)},children:"Seek Forward"}),xt.jsx(Pa,{onClick:()=>{g(-1e4)},children:"Seek Backward"}),xt.jsx(Pa,{onClick:()=>{S(1e4)},children:"Seek to first video"}),xt.jsx(Pa,{onClick:()=>{S(1e5)},children:"Seek to 100"}),xt.jsx(Pa,{onClick:F,children:"Disconnect"}),xt.jsx("h3",{children:"Available streams right now:"}),v.map(x=>xt.jsxs("div",{className:"cast-button-group",children:[xt.jsxs(Pa,{onClick:()=>{i==null||i.sendGroupCommand({command:"cast",value:x.index})},children:[xt.jsx("span",{style:{margin:"10px"},children:"►"}),x.title]}),xt.jsxs(Pa,{onClick:()=>{i==null||i.sendGroupCommand({command:"prepareCast",value:x.index})},children:[xt.jsx("span",{style:{margin:"10px"},children:"►"}),"prepare cast"]}),xt.jsxs(Pa,{onClick:()=>{i==null||i.sendGroupCommand({command:"cancelCast",value:x.index})},children:[xt.jsx("span",{style:{margin:"10px"},children:"►"}),"cancel cast"]})]},x.camera.assetName)),xt.jsx("h3",{children:"Statistics:"}),xt.jsxs("div",{className:"statistics-block",children:[xt.jsx("label",{children:"Total frames:"}),xt.jsx("div",{children:((T=o==null?void 0:o.stats)==null?void 0:T.totalVideoFrames)||0})]}),xt.jsxs("div",{className:"statistics-block",children:[xt.jsx("label",{children:"Dropped frames:"}),xt.jsx("div",{children:((U=o==null?void 0:o.stats)==null?void 0:U.droppedVideoFrames)||0})]})]})]})}var TF={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(o,i){(function(l,d){o.exports=d()})(self,function(){return function(){var l={4593:function(C,g){var S,F,R,v,y,O=function(U){for(var x=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?x.push(I):I<2048?(x.push(192|I>>6),x.push(128|63&I)):I<65536?(x.push(224|I>>12),x.push(128|63&I>>6),x.push(128|63&I)):(x.push(240|I>>18),x.push(128|63&I>>12),x.push(128|63&I>>6),x.push(128|63&I))}return x},m=function(U){for(var x=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),x.push(String.fromCharCode(I))}return x.join("")},T={};S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(U){for(var x=0,_=[],I=0|U.length/3;0<I--;){var b=(U[x]<<16)+(U[x+1]<<8)+U[x+2];x+=3,_.push(S.charAt(63&b>>18)),_.push(S.charAt(63&b>>12)),_.push(S.charAt(63&b>>6)),_.push(S.charAt(63&b))}return U.length-x==2?(b=(U[x]<<16)+(U[x+1]<<8),_.push(S.charAt(63&b>>18)),_.push(S.charAt(63&b>>12)),_.push(S.charAt(63&b>>6)),_.push("=")):U.length-x==1&&(b=U[x]<<16,_.push(S.charAt(63&b>>18)),_.push(S.charAt(63&b>>12)),_.push("==")),_.join("")},R=function(){for(var U=[],x=0;x<S.length;++x)U[S.charCodeAt(x)]=x;return U[61]=0,U}(),v=function(U){for(var x=0,_=[],I=0|U.length/4;0<I--;){var b=(R[U.charCodeAt(x)]<<18)+(R[U.charCodeAt(x+1)]<<12)+(R[U.charCodeAt(x+2)]<<6)+R[U.charCodeAt(x+3)];_.push(255&b>>16),_.push(255&b>>8),_.push(255&b),x+=4}return _&&(U.charAt(x-2)=="="?(_.pop(),_.pop()):U.charAt(x-1)=="="&&_.pop()),_},y={encode:function(U){for(var x=[],_=0;_<U.length;++_)x.push(U.charCodeAt(_));return x},decode:function(U){for(var x=0;x<s.length;++x)a[x]=String.fromCharCode(a[x]);return a.join("")}},T.decodeArray=function(U){var x=v(U);return new Uint8Array(x)},T.encodeASCII=function(U){var x=y.encode(U);return F(x)},T.decodeASCII=function(U){var x=v(U);return y.decode(x)},T.encode=function(U){var x=O(U);return F(x)},T.decode=function(U){var x=v(U);return m(x)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(C,g){(function(S){var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},R=function(N){var $=N;return F.hasOwnProperty(N)&&($=F[N]),String.fromCharCode($)},v=15,y=32,O={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},x=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(N){this.time=N},log:function(N,$){var ce=this.verboseFilter[N];this.verboseLevel>=ce&&console.log(this.time+" ["+N+"] "+$)}},I=function(N){for(var $=[],ce=0;ce<N.length;ce++)$.push(N[ce].toString(16));return $},b=function(N,$,ce,oe,ye){this.foreground=N||"white",this.underline=$||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=ye||!1};b.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(N){for(var $=["foreground","underline","italics","background","flash"],ce=0;ce<$.length;ce++){var oe=$[ce];N.hasOwnProperty(oe)&&(this[oe]=N[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(N){return this.foreground===N.foreground&&this.underline===N.underline&&this.italics===N.italics&&this.background===N.background&&this.flash===N.flash},copy:function(N){this.foreground=N.foreground,this.underline=N.underline,this.italics=N.italics,this.background=N.background,this.flash=N.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var j=function(N,$,ce,oe,ye,be){this.uchar=N||" ",this.penState=new b($,ce,oe,ye,be)};j.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(N,$){this.uchar=N,this.penState.copy($)},setPenState:function(N){this.penState.copy(N)},equals:function(N){return this.uchar===N.uchar&&this.penState.equals(N.penState)},copy:function(N){this.uchar=N.uchar,this.penState.copy(N.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Y=function(){this.chars=[];for(var N=0;N<y;N++)this.chars.push(new j);this.pos=0,this.currPenState=new b};Y.prototype={equals:function(N){for(var $=!0,ce=0;ce<y;ce++)if(!this.chars[ce].equals(N.chars[ce])){$=!1;break}return $},copy:function(N){for(var $=0;$<y;$++)this.chars[$].copy(N.chars[$])},isEmpty:function(){for(var N=!0,$=0;$<y;$++)if(!this.chars[$].isEmpty()){N=!1;break}return N},setCursor:function(N){this.pos!==N&&(this.pos=N),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>y&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=y)},moveCursor:function(N){var $=this.pos+N;if(N>1)for(var ce=this.pos+1;ce<$+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor($)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(N){N>=144&&this.backSpace();var $=R(N);this.pos>=y?_.log("ERROR","Cannot insert "+N.toString(16)+" ("+$+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar($,this.currPenState),this.moveCursor(1))},clearFromPos:function(N){var $;for($=N;$<y;$++)this.chars[$].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var N=[],$=!0,ce=0;ce<y;ce++){var oe=this.chars[ce].uchar;oe!==" "&&($=!1),N.push(oe)}return $?"":N.join("")},setPenStyles:function(N){this.currPenState.setStyles(N),this.chars[this.pos].setPenState(this.currPenState)}};var W=function(){this.rows=[];for(var N=0;N<v;N++)this.rows.push(new Y);this.currRow=14,this.nrRollUpRows=null,this.reset()};W.prototype={reset:function(){for(var N=0;N<v;N++)this.rows[N].clear();this.currRow=14},equals:function(N){for(var $=!0,ce=0;ce<v;ce++)if(!this.rows[ce].equals(N.rows[ce])){$=!1;break}return $},copy:function(N){for(var $=0;$<v;$++)this.rows[$].copy(N.rows[$])},isEmpty:function(){for(var N=!0,$=0;$<v;$++)if(!this.rows[$].isEmpty()){N=!1;break}return N},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(N){this.rows[this.currRow].insertChar(N)},setPen:function(N){this.rows[this.currRow].setPenStyles(N)},moveCursor:function(N){this.rows[this.currRow].moveCursor(N)},setCursor:function(N){_.log("INFO","setCursor: "+N),this.rows[this.currRow].setCursor(N)},setPAC:function(N){_.log("INFO","pacData = "+JSON.stringify(N));var $=N.row-1;this.nrRollUpRows&&$<this.nrRollUpRows-1&&($=this.nrRollUpRows-1),this.currRow=$;var ce=this.rows[this.currRow];if(N.indent!==null){var oe=N.indent,ye=Math.max(oe-1,0);ce.setCursor(N.indent),N.color=ce.chars[ye].penState.foreground}var be={foreground:N.color,underline:N.underline,italics:N.italics,background:"black",flash:!1};this.setPen(be)},setBkgData:function(N){_.log("INFO","bkgData = "+JSON.stringify(N)),this.backSpace(),this.setPen(N),this.insertChar(32)},setRollUpRows:function(N){this.nrRollUpRows=N},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var N=this.currRow+1-this.nrRollUpRows,$=this.rows.splice(N,1)[0];$.clear(),this.rows.splice(this.currRow,0,$),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(N){N=N||!1;for(var $=[],ce="",oe=-1,ye=0;ye<v;ye++){var be=this.rows[ye].getTextString();be&&(oe=ye+1,N?$.push("Row "+oe+': "'+be+'"'):$.push(be.trim()))}return $.length>0&&(ce=N?"["+$.join(" | ")+"]":$.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var X=function(N,$){this.chNr=N,this.outputFilter=$,this.mode=null,this.verbose=0,this.displayedMemory=new W,this.nonDisplayedMemory=new W,this.lastOutputScreen=new W,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};X.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(N){this.outputFilter=N},setPAC:function(N){this.writeScreen.setPAC(N)},setBkgData:function(N){this.writeScreen.setBkgData(N)},setMode:function(N){N!==this.mode&&(this.mode=N,_.log("INFO","MODE="+N),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=N)},insertChars:function(N){for(var $=0;$<N.length;$++)this.writeScreen.insertChar(N[$]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(N){_.log("INFO","RU("+N+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(N)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var N=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=N,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(N){_.log("INFO","TO("+N+") - Tab Offset"),this.writeScreen.moveCursor(N)},cc_MIDROW:function(N){var $={flash:!1};if($.underline=N%2==1,$.italics=N>=46,$.italics)$.foreground="white";else{var ce=Math.floor(N/2)-16;$.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify($)),this.writeScreen.setPen($)},outputDataUpdate:function(){var N=_.time;N!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(N,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:N):this.cueStartTime=N,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(N){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,N,this.displayedMemory),this.cueStartTime=N))}};var se=function(N,$,ce){this.field=N||1,this.outputs=[$,ce],this.channels=[new X(1,$),new X(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};se.prototype={getHandler:function(N){return this.channels[N].getHandler()},setHandler:function(N,$){this.channels[N].setHandler($)},addData:function(N,$){var ce,oe,ye,be=!1;this.lastTime=N,_.setTime(N);for(var $e=0;$e<$.length;$e+=2)oe=127&$[$e],ye=127&$[$e+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&ye===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,ye])+") is dropped")):oe!==0||ye!==0?(_.log("DATA","["+I([$[$e],$[$e+1]])+"] -> ("+I([oe,ye])+")"),(ce=this.parseCmd(oe,ye))||(ce=this.parseMidrow(oe,ye)),ce||(ce=this.parsePAC(oe,ye)),ce||(ce=this.parseBackgroundAttributes(oe,ye)),ce||(be=this.parseChars(oe,ye))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(be):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:be?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,ye])+" orig: "+I([$[$e],$[$e+1]])))):this.dataCounters.padding+=2},parseCmd:function(N,$){var ce;if(!((N===20||N===21||N===28||N===29)&&32<=$&&$<=47||(N===23||N===31)&&33<=$&&$<=35))return!1;ce=N===20||N===21||N===23?1:2;var oe=this.channels[ce-1];return N===20||N===21||N===28||N===29?$===32?oe.cc_RCL():$===33?oe.cc_BS():$===34?oe.cc_AOF():$===35?oe.cc_AON():$===36?oe.cc_DER():$===37?oe.cc_RU(2):$===38?oe.cc_RU(3):$===39?oe.cc_RU(4):$===40?oe.cc_FON():$===41?oe.cc_RDC():$===42?oe.cc_TR():$===43?oe.cc_RTD():$===44?oe.cc_EDM():$===45?oe.cc_CR():$===46?oe.cc_ENM():$===47&&oe.cc_EOC():oe.cc_TO($-32),this.lastCmdA=N,this.lastCmdB=$,this.currChNr=ce,!0},parseMidrow:function(N,$){var ce=null;if((N===17||N===25)&&32<=$&&$<=47){if((ce=N===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW($),_.log("DEBUG","MIDROW ("+I([N,$])+")"),this.lastCmdA=N,this.lastCmdB=$,!0}return!1},parsePAC:function(N,$){var ce,oe;if(!((17<=N&&N<=23||25<=N&&N<=31)&&64<=$&&$<=127||(N===16||N===24)&&64<=$&&$<=95))return!1;ce=N<=23?1:2,oe=64<=$&&$<=95?ce===1?O[N]:T[N]:ce===1?m[N]:U[N];var ye=this.interpretPAC(oe,$);return this.channels[ce-1].setPAC(ye),this.lastCmdA=N,this.lastCmdB=$,this.currChNr=ce,!0},interpretPAC:function(N,$){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:N};return ce=$>95?$-96:$-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(N,$){var ce=null,oe=null,ye=null;if(N>=25?(ce=2,ye=N-8):(ce=1,ye=N),17<=ye&&ye<=19){var be;be=ye===17?$+80:ye===18?$+112:$+144,_.log("INFO","Special char '"+R(be)+"' in channel "+ce),oe=[be],this.lastCmdA=N,this.lastCmdB=$}else 32<=N&&N<=127&&(oe=$===0?[N]:[N,$],this.lastCmdA=null,this.lastCmdB=null);if(oe){var $e=I(oe);_.log("DEBUG","Char codes =  "+$e.join(","))}return oe},parseBackgroundAttributes:function(N,$){var ce,oe,ye;return((N===16||N===24)&&32<=$&&$<=47||(N===23||N===31)&&45<=$&&$<=47)&&(ce={},N===16||N===24?(oe=Math.floor(($-32)/2),ce.background=x[oe],$%2==1&&(ce.background=ce.background+"_semi")):$===45?ce.background="transparent":(ce.foreground="black",$===47&&(ce.underline=!0)),ye=N<24?1:2,this.channels[ye-1].setBkgData(ce),this.lastCmdA=N,this.lastCmdB=$,!0)},reset:function(){for(var N=0;N<this.channels.length;N++)this.channels[N]&&this.channels[N].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(N){for(var $=0;$<this.channels.length;$++)this.channels[$]&&this.channels[$].cueSplitAtTime(N)}},S.logger=_,S.PenState=b,S.CaptionScreen=W,S.Cea608Parser=se,S.findCea608Nalus=function(N,$,ce){for(var oe=0,ye=$,be=[],$e=function(Xe,st,wt,Oe){if(Xe!==4||st<8)return null;var Qe=wt.getUint8(Oe),ct=wt.getUint16(Oe+1),Qt=wt.getUint32(Oe+3),Vt=wt.getUint8(Oe+7);return Qe==181&&ct==49&&Qt==1195456820&&Vt==3};ye<$+ce;){if(oe=N.getUint32(ye),(31&N.getUint8(ye+4))==6)for(var Ae=ye+5,Ze=-1;Ae<ye+4+oe-1;){Ze=0;for(var it=255;it===255;)Ze+=it=N.getUint8(Ae),Ae++;var lt=0;for(it=255;it===255;)lt+=it=N.getUint8(Ae),Ae++;$e(Ze,lt,N,Ae)&&be.push([Ae,lt]),Ae+=lt}ye+=oe+4}return be},S.extractCea608DataFromRange=function(N,$){var ce=$[0],oe=[[],[]];ce+=8;var ye=31&N.getUint8(ce);ce+=2;for(var be=0;be<ye;be++){var $e=N.getUint8(ce),Ae=4&$e,Ze=3&$e;ce++;var it=N.getUint8(ce);ce++;var lt=N.getUint8(ce);ce++,Ae&&(127&it)+(127&lt)!=0&&(Ze===0?(oe[0].push(it),oe[0].push(lt)):Ze===1&&(oe[1].push(it),oe[1].push(lt)))}return oe}})(g)},8416:function(C,g,S){var F=S(1139),R=S(5448),v=S(6398),y=S(2032),O=(S(5530),typeof window<"u"&&window||S.g),m=O.dashjs;m||(m=O.dashjs={}),m.MediaPlayer=F.Z,m.FactoryMaker=R.Z,m.Debug=v.Z,m.Version=(0,y.e)()},6398:function(C,g,S){var F=S(5595),R=S(8512),v=S(5448),y=1,O=2,m=3,T=4,U=5;function x(I){I=I||{};var b,j,Y,W,X=this.context,se=(0,F.Z)(X).getInstance(),N=I.settings,$=[];function ce(it){return it&&it.bind?it.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var it=arguments.length,lt=new Array(it),Xe=0;Xe<it;Xe++)lt[Xe]=arguments[Xe];Ze.apply(void 0,[y,this].concat(lt))}function ye(){for(var it=arguments.length,lt=new Array(it),Xe=0;Xe<it;Xe++)lt[Xe]=arguments[Xe];Ze.apply(void 0,[O,this].concat(lt))}function be(){for(var it=arguments.length,lt=new Array(it),Xe=0;Xe<it;Xe++)lt[Xe]=arguments[Xe];Ze.apply(void 0,[m,this].concat(lt))}function $e(){for(var it=arguments.length,lt=new Array(it),Xe=0;Xe<it;Xe++)lt[Xe]=arguments[Xe];Ze.apply(void 0,[T,this].concat(lt))}function Ae(){for(var it=arguments.length,lt=new Array(it),Xe=0;Xe<it;Xe++)lt[Xe]=arguments[Xe];Ze.apply(void 0,[U,this].concat(lt))}function Ze(it,lt){var Xe="",st=null;j&&(st=new Date().getTime(),Xe+="["+(st-W)+"]"),Y&&lt&&lt.getClassName&&(Xe+="["+lt.getClassName()+"]",lt.getType&&(Xe+="["+lt.getType()+"]")),Xe.length>0&&(Xe+=" ");for(var wt=arguments.length,Oe=new Array(wt>2?wt-2:0),Qe=2;Qe<wt;Qe++)Oe[Qe-2]=arguments[Qe];Array.apply(null,Oe).forEach(function(ct){Xe+=ct+" "}),$[it]&&N&&N.get().debug.logLevel>=it&&$[it](Xe),N&&N.get().debug.dispatchEvent&&se.trigger(R.Z.LOG,{message:Xe,level:it})}return b={getLogger:function(it){return{fatal:oe.bind(it),error:ye.bind(it),warn:be.bind(it),info:$e.bind(it),debug:Ae.bind(it)}},setLogTimestampVisible:function(it){j=it},setCalleeNameVisible:function(it){Y=it}},j=!0,Y=!0,W=new Date().getTime(),typeof window<"u"&&window.console&&($[y]=ce(window.console.error),$[O]=ce(window.console.error),$[m]=ce(window.console.warn),$[T]=ce(window.console.info),$[U]=ce(window.console.debug)),b}x.__dashjs_factory_name="Debug";var _=v.Z.getSingletonFactory(x);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=y,_.LOG_LEVEL_ERROR=O,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,v.Z.updateSingletonFactory(x.__dashjs_factory_name,_),g.Z=_},5595:function(C,g,S){var F=S(5448),R=S(8825);function v(){var O={};function m(U,x,_){var I=-1;return O[U]&&O[U].some(function(b,j){if(b&&b.callback===x&&(!_||_===b.scope))return I=j,!0}),I}var T={on:function(U,x,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!x||typeof x!="function")throw new Error("listener must be a function: "+x);var b=I.priority||0;if(!(m(U,x,_)>=0)){O[U]=O[U]||[];var j={callback:x,scope:_,priority:b};_&&_.getStreamId&&(j.streamId=_.getStreamId()),_&&_.getType&&(j.mediaType=_.getType()),I&&I.mode&&(j.mode=I.mode);var Y=O[U].some(function(W,X){if(W&&b>W.priority)return O[U].splice(X,0,j),!0});Y||O[U].push(j)}},off:function(U,x,_){if(U&&x&&O[U]){var I=m(U,x,_);I<0||(O[U][I]=null)}},trigger:function(U){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&O[U]){if((x=x||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");x.type=U,_.streamId&&(x.streamId=_.streamId),_.mediaType&&(x.mediaType=_.mediaType),O[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===R.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,x)})}},reset:function(){O={}}};return T}v.__dashjs_factory_name="EventBus";var y=F.Z.getSingletonFactory(v);y.EVENT_PRIORITY_LOW=0,y.EVENT_PRIORITY_HIGH=5e3,F.Z.updateSingletonFactory(v.__dashjs_factory_name,y),g.Z=y},5448:function(C,g){var S=function(){var F,R=[],v={},y={};function O(x,_){for(var I in R){var b=R[I];if(b.context===x&&b.name===_)return b.instance}return null}function m(x,_){return _[x]}function T(x,_,I){x in I&&(I[x]=_)}function U(x,_,I){var b,j=x.__dashjs_factory_name,Y=_[j];if(Y){var W=Y.instance;if(!Y.override)return W.apply({context:_,factory:F},I);for(var X in b=x.apply({context:_},I),W=W.apply({context:_,factory:F,parent:b},I))b.hasOwnProperty(X)&&(b[X]=W[X])}else b=x.apply({context:_},I);return b.getClassName=function(){return j},b}return F={extend:function(x,_,I,b){!b[x]&&_&&(b[x]={instance:_,override:I})},getSingletonInstance:O,setSingletonInstance:function(x,_,I){for(var b in R){var j=R[b];if(j.context===x&&j.name===_)return void(R[b].instance=I)}R.push({name:_,context:x,instance:I})},deleteSingletonInstances:function(x){R=R.filter(function(_){return _.context!==x})},getSingletonFactory:function(x){var _=m(x.__dashjs_factory_name,v);return _||(_=function(I){var b;return I===void 0&&(I={}),{getInstance:function(){return b||(b=O(I,x.__dashjs_factory_name)),b||(b=U(x,I,arguments),R.push({name:x.__dashjs_factory_name,context:I,instance:b})),b}}},v[x.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(x){return m(x,v)},updateSingletonFactory:function(x,_){T(x,_,v)},getClassFactory:function(x){var _=m(x.__dashjs_factory_name,y);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(x,I,arguments)}}},y[x.__dashjs_factory_name]=_),_},getClassFactoryByName:function(x){return m(x,y)},updateClassFactory:function(x,_){T(x,_,y)}},F}();g.Z=S},1264:function(C,g,S){var F=S(5448),R=S(703),v=S(6398),y=S(3393),O=S(7855),m=S(5595),T=S(8512);function U(b){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},U(b)}function x(b,j,Y){return j in b?Object.defineProperty(b,j,{value:Y,enumerable:!0,configurable:!0,writable:!0}):b[j]=Y,b}function _(){var b,j,Y=this.context,W=(0,m.Z)(Y).getInstance(),X={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},se={debug:{logLevel:v.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:y.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:y.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(b={},x(b,O.w.MPD_TYPE,500),x(b,O.w.XLINK_EXPANSION_TYPE,500),x(b,O.w.MEDIA_SEGMENT_TYPE,1e3),x(b,O.w.INIT_SEGMENT_TYPE,1e3),x(b,O.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),x(b,O.w.INDEX_SEGMENT_TYPE,1e3),x(b,O.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),x(b,O.w.LICENSE,1e3),x(b,O.w.OTHER_TYPE,1e3),x(b,"lowLatencyReductionFactor",10),b),retryAttempts:(j={},x(j,O.w.MPD_TYPE,3),x(j,O.w.XLINK_EXPANSION_TYPE,1),x(j,O.w.MEDIA_SEGMENT_TYPE,3),x(j,O.w.INIT_SEGMENT_TYPE,3),x(j,O.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),x(j,O.w.INDEX_SEGMENT_TYPE,3),x(j,O.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),x(j,O.w.LICENSE,3),x(j,O.w.OTHER_TYPE,3),x(j,"lowLatencyMultiplyFactor",5),j),abr:{movingAverageMethod:y.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:y.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:y.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},N=R.Z.clone(se);function $(ce,oe,ye){for(var be in ce)ce.hasOwnProperty(be)&&(oe.hasOwnProperty(be)?U(ce[be])!=="object"||ce[be]instanceof Array||ce[be]===null?(oe[be]=R.Z.clone(ce[be]),X[ye+be]&&W.trigger(X[ye+be])):$(ce[be],oe[be],ye.slice()+be+"."):console.error("Settings parameter "+ye+be+" is not supported"))}return{get:function(){return N},update:function(ce){U(ce)==="object"&&$(ce,N,"")},reset:function(){N=R.Z.clone(se)}}}_.__dashjs_factory_name="Settings";var I=F.Z.getSingletonFactory(_);g.Z=I},703:function(C,g,S){var F=S(3875),R=S.n(F),v=S(1067);function y(T){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},y(T)}function O(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,x;return U=T,x=[{key:"mixin",value:function(_,I,b){var j,Y={};if(_)for(var W in I)I.hasOwnProperty(W)&&(j=I[W],W in _&&(_[W]===j||W in Y&&Y[W]===j)||(y(_[W])==="object"&&_[W]!==null?_[W]=T.mixin(_[W],j,b):_[W]=b(j)));return _}},{key:"clone",value:function(_){if(!_||y(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var b=0,j=_.length;b<j;++b)b in _&&I.push(T.clone(_[b]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var b=new URL(_);return I.forEach(function(j){j.key&&j.value&&b.searchParams.set(j.key,j.value)}),b.href}catch(j){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var b=_.trim().split("\r\n"),j=0,Y=b.length;j<Y;j++){var W=b[j],X=W.indexOf(": ");X>0&&(I[W.substring(0,X)]=W.substring(X+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var b=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?b:3&b|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var b=0;b<_.length;b++)I=(I<<5)-I+_.charCodeAt(b),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var b=new URL(_),j=new URL(I);if(b.protocol=j.protocol,b.origin!==j.origin)return I;var Y=R().relative(b.pathname.substr(0,b.pathname.lastIndexOf("/")),j.pathname.substr(0,j.pathname.lastIndexOf("/"))),W=Y.length===0?1:0;return Y+=j.pathname.substr(j.pathname.lastIndexOf("/")+W,j.pathname.length-1),j.pathname.length<Y.length?j.pathname:Y}catch(X){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,v.UAParser)(I)}catch(b){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],x&&O(U,x),T}();g.Z=m},2032:function(C,g,S){function F(){return"4.7.4"}S.d(g,{e:function(){return F}})},2230:function(C,g){function S(R,v){for(var y=0;y<v.length;y++){var O=v[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}var F=function(){function R(){(function(O,m){if(!(O instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R)}var v,y;return v=R,(y=[{key:"extend",value:function(O,m){if(O){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in O)!O.hasOwnProperty(x)||this[x]&&!T||U&&O[x].indexOf("public_")===-1||(this[x]=O[x])}}}])&&S(v.prototype,y),R}();g.Z=F},4351:function(C,g,S){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},R(m,T)}function v(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var O=function(m){(function(I,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(b&&b.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),b&&R(I,b)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,b=y(T);if(U){var j=y(this).constructor;I=Reflect.construct(b,arguments,j)}else I=b.apply(this,arguments);return v(this,I)});function _(){var I;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(S(8342).Z);g.Z=O},8512:function(C,g,S){function F(U){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},F(U)}function R(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")}function v(U,x){return v=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},v(U,x)}function y(U,x){return!x||F(x)!=="object"&&typeof x!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):x}function O(U){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},O(U)}var m=function(U){(function(j,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Y&&Y.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Y&&v(j,Y)})(b,U);var x,_,I=(x=b,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(j){return!1}}(),function(){var j,Y=O(x);if(_){var W=O(this).constructor;j=Reflect.construct(Y,arguments,W)}else j=Y.apply(this,arguments);return y(this,j)});function b(){return R(this,b),I.apply(this,arguments)}return b}(S(4351).Z),T=new m;g.Z=T},8342:function(C,g){function S(R,v){for(var y=0;y<v.length;y++){var O=v[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}var F=function(){function R(){(function(O,m){if(!(O instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R)}var v,y;return v=R,(y=[{key:"extend",value:function(O,m){if(O){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var x in O)!O.hasOwnProperty(x)||this[x]&&!T||U&&O[x].indexOf("public_")===-1||(this[x]=O[x])}}}])&&S(v.prototype,y),R}();g.Z=F},9326:function(C,g,S){var F=S(3186),R=S(7855),v=S(5448),y=S(8825),O=S(7387),m=S(1553);function T(U){var x,_,I,b,j,Y=(U=U||{}).eventBus,W=U.debug,X=U.urlUtils,se=U.type,N=U.streamInfo,$=U.segmentsController,ce=U.timelineConverter,oe=U.baseURLController;function ye(){return se}function be(){I=null}function $e(Xe,st,wt){var Oe,Qe,ct=oe.resolve(wt.path),Qt={};return ct&&st!==ct.url&&X.isRelative(st)?(Oe=ct.url,Qe=ct.serviceLocation,Qt=ct.queryParams,st&&(Oe=X.resolve(st,Oe))):Oe=st,!X.isRelative(Oe)&&(Xe.url=Oe,Xe.serviceLocation=Qe,Xe.queryParams=Qt,!0)}function Ae(Xe,st){if(st==null)return null;var wt=new F.Z,Oe=st.representation,Qe=Oe.adaptation.period.mpd.manifest.Period_asArray[Oe.adaptation.period.index].AdaptationSet_asArray[Oe.adaptation.index].Representation_asArray[Oe.index].bandwidth,ct=st.media;return ct=(0,O.vi)(ct,"Number",st.replacementNumber),ct=(0,O.vi)(ct,"Time",st.replacementTime),ct=(0,O.vi)(ct,"Bandwidth",Qe),ct=(0,O.Aj)(ct,Oe.id),ct=(0,O.eR)(ct),wt.mediaType=ye(),wt.type=R.w.MEDIA_SEGMENT_TYPE,wt.range=st.mediaRange,wt.startTime=st.presentationStartTime,wt.mediaStartTime=st.mediaStartTime,wt.duration=st.duration,wt.timescale=Oe.timescale,wt.availabilityStartTime=st.availabilityStartTime,wt.availabilityEndTime=st.availabilityEndTime,wt.availabilityTimeComplete=Oe.availabilityTimeComplete,wt.wallStartTime=st.wallStartTime,wt.quality=Oe.index,wt.index=st.index,wt.mediaInfo=Xe,wt.adaptationIndex=Oe.adaptation.index,wt.representationId=Oe.id,$e(wt,ct,Oe)?wt:void 0}function Ze(Xe,st,wt){var Oe=null;if(!st||!st.segmentInfoType)return Oe;var Qe=$.getSegmentByTime(st,wt);return Qe&&(I=Qe,_.debug("Index for time "+wt+" is "+Qe.index),Oe=Ae(Xe,Qe)),Oe}function it(Xe,st,wt){var Oe=null,Qe=$.getSegmentByIndex(st,wt,I?I.mediaStartTime:-1);if(Qe)Oe=Ae(Xe,Qe),I=Qe;else{if(b&&!j)return _.debug(ye()+" No segment found at index: "+wt+". Wait for next loop"),null;j=!0}return Oe}function lt(){_.debug("Dynamic stream complete"),j=!0}return x={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function(Xe,st){return st?function(wt,Oe,Qe){var ct=new F.Z,Qt=Oe.adaptation.period,Vt=Qt.start;if(ct.mediaType=Qe,ct.type=R.w.INIT_SEGMENT_TYPE,ct.range=Oe.range,ct.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(Vt,Oe,b),ct.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(Vt+Qt.duration,Oe,b),ct.quality=Oe.index,ct.mediaInfo=wt,ct.representationId=Oe.id,$e(ct,Oe.initialization,Oe))return ct.url=(0,O.vi)(ct.url,"Bandwidth",Oe.bandwidth),ct}(Xe,st,ye()):null},getNextSegmentRequest:function(Xe,st){return st&&st.segmentInfoType?it(Xe,st,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function(Xe,st){var wt=I?I.index+1:0,Oe=$.getSegmentByIndex(st,wt,I?I.mediaStartTime:-1);return Oe?Ae(Xe,Oe):null},getSegmentRequestForTime:Ze,getStreamId:function(){return N.id},getStreamInfo:function(){return N},getType:ye,getValidTimeAheadOfTargetTime:function(Xe,st,wt,Oe){try{if(isNaN(Xe)||!st||!wt)return NaN;if(Xe<0&&(Xe=0),isNaN(Oe)&&(Oe=.5),Ze(st,wt,Xe))return Xe;if(wt.adaptation.period.start+wt.adaptation.period.duration<Xe)return NaN;for(var Qe=isFinite(wt.adaptation.period.duration)?wt.adaptation.period.start+wt.adaptation.period.duration:Xe+30,ct=Math.min(Xe+Oe,Qe),Qt=NaN,Vt=null;ct<=Qe;){var Tt=null;if(ct<=Qe&&(Tt=Ze(st,wt,ct)),Tt){Qt=ct,Vt=Tt;break}ct+=Oe}if(Vt){var Pt=Vt.startTime+Vt.duration;return Xe>Vt.startTime&&Pt-Xe>Oe?Xe:!isNaN(Vt.startTime)&&Xe<Vt.startTime&&Qt>Vt.startTime?Vt.startTime+.001:Math.min(Pt-Oe,Qt)}return Qt}catch(Ce){return NaN}},initialize:function(Xe){b=Xe,j=!1,$.initialize(Xe)},isLastSegmentRequested:function(Xe,st){return!Xe||!I?!1:j?!0:!isFinite(Xe.adaptation.period.duration)||I.presentationStartTime+I.duration>st?!1:Xe.mediaFinishedInformation&&!isNaN(Xe.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=Xe.mediaFinishedInformation.numberOfSegments-1&&(!b||Xe.segmentInfoType===m.Z.SEGMENT_TEMPLATE||b&&Xe.segmentInfoType===m.Z.SEGMENT_LIST&&Xe.adaptation.period.nextPeriodId)?!0:!!(b&&Xe.adaptation.period.nextPeriodId&&Xe.segmentInfoType===m.Z.SEGMENT_TIMELINE&&Xe.mediaFinishedInformation&&!isNaN(Xe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=Xe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Xe,st){return st&&st.segmentInfoType?it(Xe,st,I?I.index:0):null},reset:function(){be(),Y.off(y.Z.DYNAMIC_TO_STATIC,lt,x)}},_=W.getLogger(x),be(),Y.on(y.Z.DYNAMIC_TO_STATIC,lt,x),x}T.__dashjs_factory_name="DashHandler",g.Z=v.Z.getClassFactory(T)},1553:function(C,g){function S(R,v){for(var y=0;y<v.length;y++){var O=v[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}var F=new(function(){function R(){(function(O,m){if(!(O instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var v,y;return v=R,(y=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&S(v.prototype,y),R}());g.Z=F},7802:function(C,g,S){var F=S(5448),R=S(1724),v=S(3636),y=S(1736),O=S(5246);function m(U){U=U||{};var x,_,I=this.context,b=U.dashConstants,j=U.type,Y=U.segmentBaseController;function W(X){return X?X.segments?_[b.SEGMENT_BASE]:_[X.segmentInfoType]:null}return x={initialize:function(X){_[b.SEGMENT_TIMELINE]=(0,R.Z)(I).create(U,X),_[b.SEGMENT_TEMPLATE]=(0,v.Z)(I).create(U,X),_[b.SEGMENT_LIST]=(0,y.Z)(I).create(U,X),_[b.SEGMENT_BASE]=(0,O.Z)(I).create(U,X)},updateInitData:function(X,se){return se?Promise.resolve():Y.getSegmentBaseInitSegment({representation:X,mediaType:j})},updateSegmentData:function(X,se){return se?Promise.resolve():Y.getSegmentList({mimeType:X.mimeType,representation:X,mediaType:j})},getSegmentByIndex:function(X,se,N){var $=W(X);return $?$.getSegmentByIndex(X,se,N):null},getSegmentByTime:function(X,se){var N=W(X);return N?N.getSegmentByTime(X,se):null},getMediaFinishedInformation:function(X){var se=W(X);return se?se.getMediaFinishedInformation(X):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},x}m.__dashjs_factory_name="SegmentsController";var T=F.Z.getClassFactory(m);g.Z=T},1736:function(C,g,S){var F=S(5448),R=S(3393),v=S(7387);function y(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function _(I,b){if(x(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=j.SegmentURL_asArray.length,W=I&&!isNaN(I.startNumber)?I.startNumber:1,X=Math.max(W-1,0),se=Math.max(b-X,0),N=null;if(se<Y){var $=j.SegmentURL_asArray[se];(N=(0,v.NF)(U,T,I,b))&&(N.replacementTime=(W+b-1)*I.segmentDuration,N.media=$.media?$.media:"",N.mediaRange=$.mediaRange,N.indexRange=$.indexRange)}return N}return{getSegmentByIndex:_,getSegmentByTime:function(I,b){if(x(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,b);return _(I,Math.floor(Y/j))},getMediaFinishedInformation:function(I){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return b;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=I&&!isNaN(I.startNumber)?I.startNumber:1,W=Math.max(Y-1,0);return b.numberOfSegments=W+j.SegmentURL_asArray.length,b}}}y.__dashjs_factory_name="ListSegmentsGetter";var O=F.Z.getClassFactory(y);g.Z=O},5246:function(C,g,S){var F=S(5448),R=S(3393);function v(O){var m=(O=O||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function U(x,_){if(T(),!x)return null;var I,b=x.segments?x.segments.length:-1;if(_<b&&(I=x.segments[_])&&I.index===_)return I;for(var j=0;j<b;j++)if((I=x.segments[j])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(x,_){T();var I=function(b,j){if(!b)return-1;var Y,W,X,se,N,$=b.segments,ce=$?$.length:null,oe=-1;if($&&ce>0){for(N=0;N<ce;N++)if(X=(W=$[N]).presentationStartTime,j+(Y=(se=W.duration)/2)>=X&&j-Y<X+se){oe=W.index;break}}return oe}(x,_);return U(x,I)},getMediaFinishedInformation:function(x){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return x&&x.segments&&(_.numberOfSegments=x.segments.length),_}}}v.__dashjs_factory_name="SegmentBaseGetter";var y=F.Z.getClassFactory(v);g.Z=y},7387:function(C,g,S){S.d(g,{Aj:function(){return y},NF:function(){return U},TJ:function(){return x},eR:function(){return v},vi:function(){return O}});var F=S(2011);function R(_,I){for(;_.length<I;)_="0"+_;return _}function v(_){return _&&_.split("$$").join("$")}function y(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var b=I.toString();return _.split("$RepresentationID$").join(b)}function O(_,I,b){var j,Y,W,X,se,N,$=I.length,ce=2;if(!_)return _;for(;;){if((j=_.indexOf("$"+I))<0||(Y=_.indexOf("$",j+$))<0)return _;if((W=_.indexOf("%0",j+$))>j&&W<Y)switch(X=_.charAt(Y-1),se=parseInt(_.substring(W+ce,Y-1),10),X){case"d":case"i":case"u":N=R(b.toString(),se);break;case"x":N=R(b.toString(16),se);break;case"X":N=R(b.toString(16),se).toUpperCase();break;case"o":N=R(b.toString(8),se);break;default:return _}else N=b;_=_.substring(0,j)+N+_.substring(Y+1)}}function m(_,I,b,j,Y,W,X,se){var N,$=new F.Z;return $.representation=_,$.duration=I,$.presentationStartTime=b,$.mediaStartTime=j,$.availabilityStartTime=Y.calcAvailabilityStartTimeFromPresentationTime(W,_,X),$.availabilityEndTime=Y.calcAvailabilityEndTimeFromPresentationTime(W+I,_,X),$.wallStartTime=Y.calcWallTimeForSegment($,X),$.replacementNumber=(N=se,$.representation.startNumber+N),$.index=se,$}function T(_,I,b,j){var Y=I.adaptation.period;if(isFinite(Y.duration)&&Y.start+Y.duration<=b.presentationStartTime)return!1;if(j){if(I.availabilityTimeOffset==="INF")return!0;var W=_.getClientReferenceTime();return b.availabilityStartTime.getTime()<=W&&(!isFinite(b.availabilityEndTime)||b.availabilityEndTime.getTime()>=W)}return!0}function U(_,I,b,j){var Y,W,X;Y=b.segmentDuration,isNaN(Y)&&(Y=b.adaptation.period.duration),W=parseFloat((b.adaptation.period.start+j*Y).toFixed(5)),X=parseFloat((W+Y).toFixed(5));var se=m(b,Y,W,_.calcMediaTimeFromPresentationTime(W,b),_,X,I,j);return T(_,b,se,I)?se:null}function x(_,I,b,j,Y,W,X,se,N,$){var ce,oe,ye=j/W,be=Y/W;return ce=_.calcPresentationTimeFromMediaTime(ye,b),T(_,b,oe=m(b,be,ce,ye,_,ce+be,I,N),I)?(oe.replacementTime=$||j,X=O(X,"Number",oe.replacementNumber),X=O(X,"Time",oe.replacementTime),oe.media=X,oe.mediaRange=se,oe):null}},3636:function(C,g,S){var F=S(5448),R=S(3393),v=S(7387);function y(m,T){var U=(m=m||{}).timelineConverter;function x(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function _(I,b){if(x(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;b=Math.max(b,0);var Y=(0,v.NF)(U,T,I,b);if(Y){Y.replacementTime=Math.round((b-1)*I.segmentDuration*I.timescale,10);var W=j.media;W=(0,v.vi)(W,"Number",Y.replacementNumber),W=(0,v.vi)(W,"Time",Y.replacementTime),Y.media=W}return Y}return{getSegmentByIndex:_,getSegmentByTime:function(I,b){if(x(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,b);return _(I,Math.floor(Y/j))},getMediaFinishedInformation:function(I){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return b;var j=I.segmentDuration;return isNaN(j)?b.numberOfSegments=1:b.numberOfSegments=Math.ceil(I.adaptation.period.duration/j),b}}}y.__dashjs_factory_name="TemplateSegmentsGetter";var O=F.Z.getClassFactory(y);g.Z=O},1724:function(C,g,S){var F=S(5448),R=S(3393),v=S(7387);function y(m,T){var U=(m=m||{}).timelineConverter,x=m.dashMetrics;function _(){if(!U)throw new Error(R.Z.MISSING_CONFIG_ERROR)}function I(j,Y){var W,X,se,N,$,ce,oe,ye=j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList,be=ye.SegmentTimeline,$e=ye.SegmentURL_asArray,Ae=0,Ze=-1;oe=j.timescale;var it=!1;for(se=0,N=(W=be.S_asArray).length;se<N&&!it;se++)for(ce=0,(X=W[se]).hasOwnProperty("r")&&(ce=X.r),X.hasOwnProperty("t")&&(Ae=X.t),ce<0&&(ce=b(j,W[se+1],X,oe,Ae/oe)),$=0;$<=ce&&!it;$++)(it=Y(Ae,ye,$e,X,oe,++Ze,se))&&(j.segmentDuration=X.d/oe),Ae+=X.d}function b(j,Y,W,X,se){var N;if(Y&&Y.hasOwnProperty("t"))N=Y.t/X;else try{var $=0;if(isNaN(j.adaptation.period.start)||isNaN(j.adaptation.period.duration)||!isFinite(j.adaptation.period.duration)){var ce=x.getCurrentDVRInfo();$=isNaN(ce.end)?0:ce.end}else $=j.adaptation.period.start+j.adaptation.period.duration;N=U.calcMediaTimeFromPresentationTime($,j),j.segmentDuration=W.d/X}catch(oe){N=0}return Math.max(Math.ceil((N-se)/(W.d/X))-1,0)}return{getSegmentByIndex:function(j,Y,W){if(_(),!j)return null;var X=null,se=!1;return I(j,function(N,$,ce,oe,ye,be,$e){if(se||W<0){var Ae=$.media,Ze=oe.mediaRange;return ce&&(Ae=ce[$e].media||"",Ze=ce[$e].mediaRange),X=(0,v.TJ)(U,T,j,N,oe.d,ye,Ae,Ze,be,oe.tManifest),!0}return N>=W*ye-.5*oe.d&&(se=!0),!1}),X},getSegmentByTime:function(j,Y){if(_(),!j)return null;Y===void 0&&(Y=null);var W=null,X=U.calcMediaTimeFromPresentationTime(Y,j);return I(j,function(se,N,$,ce,oe,ye,be){var $e=parseFloat((X*oe).toPrecision(15));if($e<se+ce.d&&$e>=se){var Ae=N.media,Ze=ce.mediaRange;return $&&(Ae=$[be].media||"",Ze=$[be].mediaRange),W=(0,v.TJ)(U,T,j,se,ce.d,oe,Ae,Ze,ye,ce.tManifest),!0}return!1}),W},getMediaFinishedInformation:function(j){if(!j)return 0;var Y,W,X,se,N,$,ce,oe=(j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList).SegmentTimeline,ye=0,be=0,$e=0;for(ce=j.timescale,se=(Y=oe.S_asArray).length,X=0;X<se;X++)for($=0,(W=Y[X]).hasOwnProperty("r")&&($=W.r),W.hasOwnProperty("t")&&(be=(ye=W.t)/ce),$<0&&($=b(j,Y[X+1],W,ce,be)),N=0;N<=$;N++)$e++,be=(ye+=W.d)/ce;return{numberOfSegments:$e,mediaTimeOfLastSignaledSegment:be}}}}y.__dashjs_factory_name="TimelineSegmentsGetter";var O=F.Z.getClassFactory(y);g.Z=O},2011:function(C,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(C,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.schemeIdUri="",this.value=""}},1139:function(C,g,S){S.d(g,{Z:function(){return Em}});var F=S(452),R=S.n(F),v=S(3393),y=S(1553),O=S(3860),m=S(5595),T=S(8512),U=S(5448),x=S(6398),_=S(8825);function I(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,ue=this.context,Q=(0,m.Z)(ue).getInstance();function Me(){pe(),ge=!1,Se=0,Ee=0,Be=0,Z=!1,ze=!0,_e=!1,le=!1,Le=NaN,De=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,Rt,L),Q.off(T.Z.LOADING_PROGRESS,Lt,L),Q.off(T.Z.MANIFEST_UPDATED,qt,L),Q.off(T.Z.STREAMS_COMPOSED,Ke,L),Q.off(_.Z.PLAYBACK_ENDED,It,L),Q.off(_.Z.STREAM_INITIALIZING,ut,L),Q.off(_.Z.REPRESENTATION_SWITCH,tt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Wt(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",Nn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",At),H.removeEventListener("seeked",Xt),H.removeEventListener("timeupdate",Zt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",mn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",xn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),de=null,H=null,ie=null,me=null}function Ie(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ke(Ve)-at()).toFixed(5))}function ke(Ve){var Mt=Ve||ie;return Mt.start+Mt.duration}function Re(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Ve&&me&&dt(at()),H.play()):ge=!0}function pe(){ie&&H&&H.pause()}function Ne(Ve){var Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(Le)?H.getTime():Le;Ve!==sr&&((we=fn===!0)||(Le=Ve),D.info("Requesting seek to time: "+Ve+(we?" (internal)":"")),me&&Tn&&dt(Ve),H.setCurrentTime(Ve,Mt))}}function Ye(){if(ie&&H&&me){var Ve=B&&B.hasVideoTrack()?v.Z.VIDEO:v.Z.AUDIO,Mt=ee.getCurrentDVRInfo(Ve);return Mt&&Mt.range?Mt.range.end:0}}function dt(Ve){var Mt=new Date(re.getClientReferenceTime()),fn=J.getRegularPeriods()[0],Tn=re.calcPresentationTimeFromWallTime(Mt,fn);Se=Tn-Ve}function at(){return ie&&H?H.getTime():null}function Je(){return ie&&H?H.isPaused():null}function ht(){return ie&&H?H.isSeeking():null}function Bt(){return ie&&H?H.isStalled():null}function Gt(){return ie&&H?H.getPlaybackRate():null}function kt(){return ie&&H?H.getEnded():null}function Ft(){return me}function An(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Je()&&me&&H.getReadyState()!==0&&!ht()&&!Z){Ve||(Ve=B.hasVideoTrack()?v.Z.VIDEO:v.Z.AUDIO);var Mt=at(),fn=nt(Mt,Ve),Tn=!isNaN(fn)&&fn!==Mt;Tn&&!ht()&&(Bt()||je||H.getReadyState()===1)&&(D.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(Mt)),Ne(fn,!1,!1))}}function nt(Ve,Mt){var fn=ee.getCurrentDVRInfo(Mt),Tn=fn?fn.range:null;return Tn?Ve>Tn.end?Math.max(Tn.end-Se,Tn.start):Ve>0&&Ve+.25<Tn.start&&Math.abs(Ve-Tn.start)<31536e4?_e?Math.max(Tn.end-Se,Tn.start):Tn.start:Ve:NaN}function mt(){de===null&&(de=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date}),Ft()){var Ve=Date.now();(isNaN(De)||Ve>De+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),Je()?function(){var Mt=Date.now();(!qe||Mt>qe+500)&&(qe=Mt,Zt())}():An(),De=Ve)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Wt(){clearInterval(de),de=null}function Rt(Ve){var Mt=J.convertRepresentationToRepresentationInfo(Ve.currentRepresentation),fn=Mt?Mt.mediaInfo.streamInfo:null;fn!==null&&ie.id===fn.id&&(ie=fn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Yt(Ve){Ve.streamId===B.getActiveStreamInfo().id&&(je=Ve.state===O.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Ve.mediaType,Ve.state===O.Z.BUFFER_EMPTY))}function Dn(){D.info("Native video element event: play"),An(),mt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:at()})}function Nn(){D.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:at()})}function rr(){D.info("Native video element event: playing"),we=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:at()})}function ir(){D.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:kt()})}function At(){if(!we){var Ve=at();isNaN(Le)||Le===Ve||(Ve=Le),Le=NaN,D.info("Seeking to: "+Ve),mt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Ve,streamId:ie.id})}}function Xt(){D.info("Native video element event: seeked"),we=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Zt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:Ie(),time:at(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function mn(){var Ve=Gt();D.info("Native video element event: ratechange: ",Ve),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Ve})}function Pn(){D.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),mt()}function xn(){D.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){D.info("Native video element event: ended"),pe(),Wt();var Ve=B?B.getActiveStreamInfo():null;Ve&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:Ve.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function It(Ve){if(de&&Ve.isLast){D.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Mt=Ve.seekTime?Ve.seekTime:ke();H.setCurrentTime(Mt),pe(),Wt()}}function Sn(Ve){var Mt=Ve.target||Ve.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Mt.error})}function En(){me=!1}function Lt(Ve){if(Ve.stream===!1&&_e&&!isNaN(Ve.request.duration)){var Mt=1.2*Ve.request.duration;Mt>Se&&(D.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Mt.toFixed(2)),Se=Mt,Ee=Mt)}}function On(Ve){Q.trigger(T.Z.PLAYBACK_STALLED,{e:Ve})}function ut(Ve){var Mt;(Mt=Ve.mediaInfo)&&Mt.supplementalProperties&&Mt.supplementalProperties[v.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Mt.supplementalProperties[v.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(D.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),_e=!0)}function tt(Ve){var Mt=B.getActiveStreamInfo();Ve&&Mt&&Ve.currentRepresentation&&Ve.streamId&&Ve.streamId===Mt.id&&Ve.mediaType&&(Ve.mediaType===v.Z.VIDEO||Ve.mediaType===v.Z.AUDIO)&&(ze=Ve.currentRepresentation.availabilityTimeComplete,(_e=!ze)&&!le&&(le=!0))}function qt(){Z=!0}function Ke(){Z=!1}return L={initialize:function(Ve,Mt){ie=Ve,Mt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",Nn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",At),H.addEventListener("seeked",Xt),H.addEventListener("timeupdate",Zt),H.addEventListener("progress",un),H.addEventListener("ratechange",mn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",xn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),me=ie.manifestInfo.isDynamic,je=!1,we=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,Rt,L),Q.on(T.Z.LOADING_PROGRESS,Lt,L),Q.on(T.Z.MANIFEST_UPDATED,qt,L),Q.on(T.Z.STREAMS_COMPOSED,Ke,L),Q.on(_.Z.PLAYBACK_ENDED,It,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,ut,L),Q.on(_.Z.REPRESENTATION_SWITCH,tt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),ge&&(ge=!1,Re()))},setConfig:function(Ve){Ve&&(Ve.streamController&&(B=Ve.streamController),Ve.serviceDescriptionController&&(K=Ve.serviceDescriptionController),Ve.dashMetrics&&(ee=Ve.dashMetrics),Ve.adapter&&(J=Ve.adapter),Ve.videoModel&&(H=Ve.videoModel),Ve.timelineConverter&&(re=Ve.timelineConverter),Ve.settings&&(ae=Ve.settings))},getTimeToStreamEnd:Ie,getBufferLevel:function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Mt=null;return B.getActiveStreamProcessors().forEach(function(fn){if(!Ve||Ve.length===0||Ve.indexOf(fn.getType())===-1){var Tn=fn.getBufferLevel();Mt=Mt===null?Tn:Math.min(Mt,Tn)}}),Mt},getPlaybackStalled:function(){return je},getTime:at,getLowLatencyModeEnabled:function(){return _e},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return Z},getPlaybackRate:Gt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:kt,getIsDynamic:Ft,getStreamController:function(){return B},computeAndSetLiveDelay:function(Ve,Mt){var fn,Tn,sr,Zr=!isNaN(Ve)&&isFinite(Ve)?Ve:NaN,Ai=J.getSuggestedPresentationDelay(),zr=K.getServiceDescriptionSettings();return fn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ai!==null&&!isNaN(Ai)&&Ai>0?Ai:isNaN(Zr)?Mt&&!isNaN(Mt.minBufferTime)?4*Mt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Be=sr),Tn=Mt&&Mt.dvrWindowSize>0?Math.min(fn,Mt.dvrWindowSize):fn,Se=Tn,Ee=Tn,Tn},getLiveDelay:function(){return Se},getOriginalLiveDelay:function(){return Ee},getCurrentLiveLatency:function(){if(!me||isNaN(Be))return NaN;var Ve=at();if(isNaN(Ve)||Ve===0)return 0;var Mt=new Date().getTime()+1e3*re.getClientTimeOffset();return Math.max(((Mt-Be-1e3*Ve)/1e3).toFixed(3),0)},play:Re,isPaused:Je,isStalled:Bt,pause:pe,isSeeking:ht,getStreamEndTime:ke,seek:Ne,seekToOriginalLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Ye();if(Tn!==0){var sr=Tn-(Se=Ee);Ne(sr,Ve,Mt,fn)}},seekToCurrentLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Ye();if(Tn!==0){var sr=Tn-Se;Ne(sr,Ve,Mt,fn)}},reset:Me,updateCurrentTime:An,getAvailabilityStartTime:function(){return Be}},D=(0,x.Z)(ue).getInstance().getLogger(L),Me(),L}I.__dashjs_factory_name="PlaybackController";var b=U.Z.getSingletonFactory(I),j=S(3186),Y="loading",W="executed",X="failed";function se(L){var D,B,K,ee,J=(L=L||{}).eventBus,H=L.events,re=L.dashMetrics,de=L.fragmentLoader,Se=L.debug,Ee=L.streamInfo,ie=L.type;function me(Z){var le;return!!Z&&(le=!1,K.some(function(ae){if(ue=Z,Q=ae,!isNaN(ue.index)&&ue.startTime===Q.startTime&&ue.adaptationIndex===Q.adaptationIndex&&ue.type===Q.type||function(Me,Ie){return isNaN(Me.index)&&isNaN(Ie.index)&&Me.quality===Ie.quality}(Z,ae)||function(Me,Ie){return Me.action===j.Z.ACTION_COMPLETE&&Me.action===Ie.action}(Z,ae))return le=!0;var ue,Q}),le)}function ge(Z){return isNaN(Z.duration)?.25:Math.min(Z.duration/8,.5)}function qe(Z){K=K.filter(function(le){var ae=ge(le);return isNaN(le.startTime)||Z!==void 0&&le.startTime>=Z-ae})}function De(Z,le){le<=Z+.5||(K=K.filter(function(ae){var ue=ge(ae);return isNaN(ae.startTime)||ae.startTime>=le-ue||isNaN(ae.duration)||ae.startTime+ae.duration<=Z+ue}))}function Be(Z,le,ae){for(var ue=Z.length-1;ue>=0;ue--){var Q=Z[ue],Me=Q.startTime,Ie=Me+Q.duration;if(ae=isNaN(ae)?ge(Q):ae,!isNaN(Me)&&!isNaN(Ie)&&le+ae>=Me&&le-ae<Ie||isNaN(Me)&&isNaN(le))return Q}return null}function ze(Z,le){re.addSchedulingInfo(Z,le),re.addRequestsQueue(Z.mediaType,ee,K)}function _e(Z){Z.sender===de&&(ee.splice(ee.indexOf(Z.request),1),Z.response&&!Z.error&&K.push(Z.request),ze(Z.request,Z.error?X:W),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie}))}function Le(Z){Z.sender===de&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie})}function we(Z){Z.sender===de&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:Z.request},{streamId:Ee.id,mediaType:ie})}function je(){K=[],ee=[]}return D={getStreamId:function(){return Ee.id},getType:function(){return ie},getRequests:function(Z){var le=Z?Z.state instanceof Array?Z.state:[Z.state]:[],ae=[];return le.forEach(function(ue){var Q=function(Me){var Ie;switch(Me){case Y:Ie=ee;break;case W:Ie=K;break;default:Ie=[]}return Ie}(ue);ae=ae.concat(function(Me,Ie){return Ie.hasOwnProperty("time")?[Be(Me,Ie.time,Ie.threshold)]:Me.filter(function(ke){for(var Re in Ie)if(Re!=="state"&&Ie.hasOwnProperty(Re)&&ke[Re]!=Ie[Re])return!1;return!0})}(Q,Z))}),ae},isFragmentLoaded:me,isFragmentLoadedOrPending:function(Z){var le,ae=!1,ue=0;if(!(ae=me(Z)))for(ue=0;ue<ee.length;ue++)le=ee[ue],Z.url===le.url&&Z.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:qe,removeExecutedRequestsAfterTime:function(Z){K=K.filter(function(le){return isNaN(le.startTime)||Z!==void 0&&le.startTime<Z})},syncExecutedRequestsWithBufferedRange:function(Z,le){if(Z&&Z.length!==0){for(var ae=0,ue=0,Q=Z.length;ue<Q;ue++)De(ae,Z.start(ue)),ae=Z.end(ue);le>0&&De(ae,le)}else qe()},abortRequests:function(){B.debug("abort requests"),de.abort(),ee=[]},executeRequest:function(Z){Z.action===j.Z.ACTION_DOWNLOAD?(ze(Z,Y),ee.push(Z),function(le){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Ee.id,mediaType:ie}),de.load(le)}(Z)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,_e,this),J.off(H.LOADING_DATA_PROGRESS,Le,this),J.off(H.LOADING_ABANDONED,we,this),de&&de.reset(),je()},resetInitialSettings:je,addExecutedRequest:function(Z){K.push(Z)}},B=Se.getLogger(D),je(),J.on(H.LOADING_COMPLETED,_e,D),J.on(H.LOADING_DATA_PROGRESS,Le,D),J.on(H.LOADING_ABANDONED,we,D),D}se.__dashjs_factory_name="FragmentModel";var N=U.Z.getClassFactory(se);N.FRAGMENT_MODEL_LOADING=Y,N.FRAGMENT_MODEL_EXECUTED=W,N.FRAGMENT_MODEL_CANCELED="canceled",N.FRAGMENT_MODEL_FAILED=X,U.Z.updateClassFactory(se.__dashjs_factory_name,N);var $=N,ce=S(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},oe(L)}function ye(L,D){return ye=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},ye(L,D)}function be(L,D){return!D||oe(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function $e(L){return $e=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},$e(L)}var Ae=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&ye(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=$e(D);if(B){var re=$e(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return be(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=K.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(S(2230).Z)),Ze=S(1264),it=S(7855);function lt(L){var D,B,K,ee,J,H,re=this.context,de=(0,Ze.Z)(re).getInstance(),Se=L.textController,Ee=L.eventBus,ie=[],me=[],ge=!1,qe=L.mediaSource,De=null;function Be(Q){return new Promise(function(Me){ue(function(){ee.changeType&&ee.changeType(Q),Me()})})}function ze(Q){return ee=Se.getTextSourceBuffer(Q),Promise.resolve()}function _e(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",le,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(le,50)}else H=setInterval(le,50)}function Le(Q){return new Promise(function(Me){ee&&de.get().streaming.buffer.useAppendWindow?ue(function(){try{if(!ee)return void Me();var Ie=qe.duration,ke=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(Ie=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(ke=Q.start),ee.appendWindowEnd===Ie&&ee.appendWindowStart===ke||(ee.appendWindowStart=0,ee.appendWindowEnd=Ie+.01,ee.appendWindowStart=Math.max(ke-.1,0),K.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Me()}catch(Re){K.warn("Failed to set append window"),Me()}}):Me()})}function we(Q){return new Promise(function(Me){ee?ue(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,K.debug("Set MSE timestamp offset to ".concat(Q))),Me()}catch(Ie){Me()}}):Me()})}function je(){if(!ge&&me.length>0){ge=!0;var Q=me[0];me.splice(0,1);var Me=function(){ge=!1,me.length>0&&je.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==it.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{De=Q.request,Q.data.bytes.byteLength===0?Me.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),ue(Me.bind(this)))}catch(Ie){K.fatal('SourceBuffer append failed "'+Ie+'"'),me.length>0?je():ge=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new ce.Z(Ie.code,Ie.message)})}}}function Z(){ie.length>0&&(ee.updating||(ie.shift()(),Z()))}function le(){ee.updating||Z()}function ae(Q){var Me,Ie,ke=Q.target||{};Me=T.Z.SOURCE_BUFFER_ERROR,Ie={error:ke,lastRequestAppended:De},Ee.trigger(Me,Ie,{streamId:J.streamInfo.id,mediaType:B})}function ue(Q){ie.push(Q),ee.updating||Z()}return D={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return K.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Me=this,Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ke,Re){Q?(me.push({data:Q,promise:{resolve:ke,reject:Re},request:Ie}),ue(je.bind(Me))):Re({chunk:Q,error:new ce.Z(Ae.APPEND_ERROR_CODE,Ae.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Me,Ie){var ke=Q.start,Re=Q.end;ke>=0&&Re>ke?ue(function(){try{ee.remove(ke,Re),ue(function(){Me({from:ke,to:Re,unintended:!1}),Q.resolve&&Q.resolve()})}catch(pe){Ie({from:ke,to:Re,unintended:!1,error:new ce.Z(Ae.REMOVE_ERROR_CODE,Ae.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(pe)}}):Me()})},abort:function(){return new Promise(function(Q){try{me=[],qe.readyState==="open"?ue(function(){try{ee&&ee.abort(),Q()}catch(Me){Q()}}):(ee&&ee.setTextTrack&&qe.readyState==="ended"&&ee.abort(),Q())}catch(Me){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",le,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){K.error(Q)}}(),ge=!1,me=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(K.debug("Removing sourcebuffer from media source"),qe.removeSourceBuffer(ee))}catch(Q){}ee=null}De=null},updateTimestampOffset:we,initializeForStreamSwitch:function(Q,Me,Ie){B=(J=Q).type;var ke=J.codec;(function(pe){ee=pe.getBuffer()})(Ie),_e();var Re=[];return Re.push(new Promise(function(pe){ue(function(){var Ne=ee.appendWindowStart,Ye=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=Ne,ee.appendWindowEnd=Ye),pe()})})),Re.push(Le(J.streamInfo)),de.get().streaming.buffer.useChangeTypeForTrackSwitch&&Re.push(Be(ke)),Me&&Me.MSETimeOffset!==void 0&&Re.push(we(Me.MSETimeOffset)),Promise.all(Re)},initializeForFirstUse:function(Q,Me,Ie){B=(J=Me).type;var ke=J.codec;try{if(ke.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return ze(Q);ee=qe.addSourceBuffer(ke),_e();var Re=[];return Re.push(Le(J.streamInfo)),Ie&&Ie.MSETimeOffset!==void 0&&Re.push(we(Ie.MSETimeOffset)),Promise.all(Re)}catch(pe){return J.type==v.Z.TEXT&&!J.isFragmented||ke.indexOf('codecs="stpp')!==-1||ke.indexOf('codecs="vtt')!==-1||ke.indexOf("text/vtt")!==-1?ze(Q):Promise.reject(pe)}},updateAppendWindow:Le,changeType:Be},K=(0,x.Z)(re).getInstance().getLogger(D),D}lt.__dashjs_factory_name="SourceBufferSink";var Xe=U.Z.getClassFactory(lt);function st(L){var D,B,K,ee=this.context,J=[],H=L;function re(de,Se){return J=J.filter(function(Ee){return!((isNaN(Se)||Ee.start<Se)&&(isNaN(de)||Ee.end>de))}),Promise.resolve()}return D={getAllBufferRanges:function(){for(var de=[],Se=0;Se<J.length;Se++){var Ee=J[Se];de.length===0||Ee.start>de[de.length-1].end?de.push({start:Ee.start,end:Ee.end}):de[de.length-1].end=Ee.end}var ie={start:function(me){return de[me].start},end:function(me){return de[me].end}};return Object.defineProperty(ie,"length",{get:function(){return de.length}}),ie},append:function(de){return de.segmentType!=="InitializationSegment"?(J.push(de),J.sort(function(Se,Ee){return Se.start-Ee.start}),K=null):K=de,B.debug("PreBufferSink appended chunk s: "+de.start+"; e: "+de.end),H&&H({chunk:de}),Promise.resolve()},remove:re,abort:function(){return Promise.resolve()},discharge:function(de,Se){var Ee=function(ie,me){return J.filter(function(ge){return(isNaN(me)||ge.start<me)&&(isNaN(ie)||ge.end>ie)})}(de,Se);return K&&(Ee.push(K),K=null),re(de,Se),Ee},reset:function(){J=[],K=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(de){de()},getBuffer:function(){return this}},B=(0,x.Z)(ee).getInstance().getLogger(D),D}st.__dashjs_factory_name="PreBufferSink";var wt=U.Z.getClassFactory(st);function Oe(){var L={};return{save:function(D){var B=D.streamId,K=D.representationId;L[B]=L[B]||{},L[B][K]=D},extract:function(D,B){return L&&L[D]&&L[D][B]?L[D][B]:null},reset:function(){L={}}}}Oe.__dashjs_factory_name="InitCache";var Qe=U.Z.getSingletonFactory(Oe),ct=.01,Qt="BufferController";function Vt(L){L=L||{};var D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z=this.context,le=(0,m.Z)(Z).getInstance(),ae=L.errHandler,ue=L.fragmentModel,Q=L.representationController,Me=L.adapter,Ie=L.textController,ke=L.abrController,Re=L.playbackController,pe=L.streamInfo,Ne=L.type,Ye=L.settings;function dt(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Ke,Ve){H=tt,Se&&qt&&typeof Se.discharge=="function"?(Ee=Se,Je(qt).then(function(){Ke()}).catch(function(Mt){Ve(Mt)})):Ke()})}function at(tt){return Me.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(tt))}function Je(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ke,Ve){_e&&tt?H?(ie=!1,Bt(tt,qt).then(function(Mt){Ke(Mt)}).catch(function(Mt){Ve(Mt)})):(ie=!0,ht().then(function(Mt){Ke(Mt)}).catch(function(Mt){Ve(Mt)})):Ke(null)})}function ht(){var tt=this;return new Promise(function(qt,Ke){var Ve=ke.getQualityFor(Ne,pe.id);Se=wt(Z).create(nt.bind(tt)),Pn(at(Ve)).then(function(){qt(Se)}).catch(function(){Ke()})})}function Bt(tt,qt){return new Promise(function(Ke,Ve){var Mt=ke.getQualityFor(Ne,pe.id);Se=Xe(Z).create({mediaSource:H,textController:Ie,eventBus:le}),function(fn,Tn,sr){var Zr=at(sr);return Tn&&Tn[Ne]&&(Ne===v.Z.VIDEO||Ne===v.Z.AUDIO)?Se.initializeForStreamSwitch(fn,Zr,Tn[Ne]):Se.initializeForFirstUse(pe,fn,Zr)}(tt,qt,Mt).then(function(){return Pn(at(Mt))}).then(function(){Ke(Se)}).catch(function(fn){B.fatal("Caught error on create SourceBuffer: "+fn),ae.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Ne)),Ve(fn)})})}function Gt(tt){Ye.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",Ne+"'s init cache"),_e.save(tt.chunk)),B.debug("Append Init fragment",Ne," with representationId:",tt.chunk.representationId," and quality:",tt.chunk.quality,", data size:",tt.chunk.bytes.byteLength),Ft(tt.chunk)}function kt(tt){Ft(tt.chunk,tt.request)}function Ft(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Se&&(Se.append(tt,qt).then(function(Ke){nt(Ke)}).catch(function(Ke){nt(Ke)}),tt.mediaInfo.type===v.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:tt}))}function An(tt){if(tt&&tt.length>0)for(var qt=0,Ke=tt.length;qt<Ke;qt++)B.debug("Buffered range: "+tt.start(qt)+" - "+tt.end(qt)+", currentTime = ",Re.getTime())}function nt(tt){if(tt.error)return tt.error.code===22&&function(){if(ze=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var Ve=Math.max(.2*J,1),Mt=J-Ve,fn=Math.min(Ye.get().streaming.buffer.bufferTimeAtTopQuality,.9*Mt),Tn=Math.min(Ye.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Mt),sr={streaming:{buffer:{bufferToKeep:parseFloat(Ve.toFixed(5)),bufferTimeAtTopQuality:parseFloat(fn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};Ye.update(sr)}}(),void(tt.error.code!==22&&Lt()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:tt.chunk.start}),Zt(Xt())));if(Se&&(Dn(),ze=!1,(qe=tt.chunk)&&qe.endFragment)){qe&&!isNaN(qe.index)&&(re=Math.max(qe.index,re),Nn());var qt=Se.getAllBufferRanges();qe.segmentType===it.w.MEDIA_SEGMENT_TYPE&&(An(qt),Rt(),function(){if(!isNaN(je)&&!ie)if(Ne===v.Z.AUDIO||Ne===v.Z.VIDEO){var Ve=Re.getTime(),Mt=Yt(Ve,0),fn=Yt(je,0);if(Mt&&fn&&Mt.start===fn.start)je=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Yt(je,Tn);sr&&(Ye.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ve-je)>Tn?je<=sr.end&&Re.seek(Math.max(je,sr.start),!1,!0):Ve<sr.start&&Re.seek(sr.start,!1,!0))}}else je=NaN}());var Ke=!1;me&&(me.indexOf(qe)>0&&(Ke=!0),me=null),qe&&!Ke&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:qe.quality,startTime:qe.start,index:qe.index,bufferedRanges:qt,segmentType:qe.segmentType,mediaType:Ne})}}function mt(){return new Promise(function(tt,qt){var Ke=Wt();if(!Ke||Ke.length===0)return Rt(),void tt();Zt(Ke).then(function(){tt()}).catch(function(Ve){qt(Ve)})})}function Wt(tt){var qt=[],Ke=Se.getAllBufferRanges();if(!Ke||Ke.length===0)return qt;if(!tt&&tt!==0||isNaN(tt))qt.push({start:Ke.start(0),end:Ke.end(Ke.length-1)+.5});else{var Ve=function(fn,Tn){var sr=Ye.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(fn-Zr>sr){var Ai=Math.max(0,fn-sr),zr=ue.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(zr&&(Ai=Math.min(zr.startTime,Ai)),Ai>0)return{start:Zr,end:Ai}}return null}(tt,Ke),Mt=function(fn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(fn),Ai=pe.manifestInfo.duration>=Ye.get().streaming.buffer.longFormContentDurationThreshold?Ye.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Ye.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?fn:Math.min(Zr,fn+Ai);if(zr>=Tn.end(Tn.length-1))return null;var io=ue.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(io&&(zr=Math.max(io.startTime+io.duration,zr)),Ye.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=fn&&fn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var ks=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+fn+" and range to be pruned ["+ks+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(tt,Ke);Ve&&qt.push(Ve),Mt&&qt.push(Mt)}return qt}function Rt(){(!we||Ne===v.Z.TEXT&&Ie.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),je=NaN}function Yt(tt,qt){if(!Se)return null;var Ke,Ve,Mt=Se.getAllBufferRanges(),fn=0,Tn=0,sr=null,Zr=null,Ai=0,zr=isNaN(qt)?.15:qt;if(Mt!=null){for(Ve=0,Ke=Mt.length;Ve<Ke;Ve++)if(fn=Mt.start(Ve),Tn=Mt.end(Ve),sr===null)Ai=Math.abs(fn-tt),(tt>=fn&&tt<Tn||Ai<=zr)&&(sr=fn,Zr=Tn);else{if(!((Ai=fn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(Re){var tt=Re.getTime()||0;ie&&(tt=isNaN(je)?0:je);var qt=Ye.get().streaming.gaps.jumpGaps&&!isNaN(Ye.get().streaming.gaps.smallGapLimit)?Ye.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(Ke,Ve){var Mt;return Ye.get().streaming.gaps.jumpGaps&&(Ve=Ye.get().streaming.gaps.smallGapLimit),(Mt=Yt(Ke,Ve))===null?0:Mt.end-Ke}(tt,qt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:Ne,bufferLevel:ee}),rr()}}function Nn(){var tt=re>=de-1,qt=Re.getTimeToStreamEnd(pe)-ee<1e-5;!tt&&!qt||K||(It(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(pe.id," and type ").concat(Ne)))}function rr(){Ne!==v.Z.AUDIO&&Ne!==v.Z.VIDEO||((!Re.getLowLatencyModeEnabled()&&ee<Ye.get().streaming.buffer.stallThreshold||ee===0)&&!K?ir(O.Z.BUFFER_EMPTY):(K||ee>=Ye.get().streaming.buffer.stallThreshold||Re.getLowLatencyModeEnabled()&&ee>0)&&ir(O.Z.BUFFER_LOADED))}function ir(tt){ge===tt||tt===O.Z.BUFFER_EMPTY&&Re.getTime()===0||Ne===v.Z.TEXT&&!Ie.isTextEnabled()||(ge=tt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:tt}),On(tt===O.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(tt===O.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function At(){Se&&Ne!==v.Z.TEXT&&(K||Zt(Xt()))}function Xt(){var tt=[],qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return tt;var Ke=Re.getTime(),Ve=Math.max(0,Ke-Ye.get().streaming.buffer.bufferToKeep),Mt=ue.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:Ke,threshold:ct})[0];if(Mt)Ve=Math.min(Mt.startTime,Ve);else if(Ke===0&&Re.getIsDynamic())return[];if(qt.start(0)<=Ve){for(var fn={start:0,end:Ve},Tn=0;Tn<qt.length&&qt.end(Tn)<=Ve;Tn++)fn.end=qt.end(Tn);fn.start<fn.end&&tt.push(fn)}return tt}function Zt(tt){return new Promise(function(qt,Ke){if(tt&&Se&&tt.length!==0){var Ve=[];tt.forEach(function(Mt){Ve.push(function(fn){return new Promise(function(Tn,sr){fn.resolve=Tn,fn.reject=sr,Le.push(fn)})}(Mt))}),Be||un(),Promise.all(Ve).then(function(){qt()}).catch(function(Mt){Ke(Mt)})}else qt()})}function un(){try{if(Le.length===0||!Se)return B.debug("Nothing to prune, halt pruning"),Le=[],void(Be=!1);var tt=Se.getBuffer();if(!tt||!tt.buffered||tt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),Le=[],void(Be=!1);var qt=Le.shift();B.debug("".concat(Ne,": Removing buffer from: ").concat(qt.start," to ").concat(qt.end)),Be=!0,Re.getTime()<qt.end&&It(!1),Se.remove(qt).then(function(Ke){mn(Ke)}).catch(function(Ke){mn(Ke)})}catch(Ke){Be=!1}}function mn(tt){B.debug("onRemoved buffer from:",tt.from,"to",tt.to),Se&&(An(Se.getAllBufferRanges()),Le.length===0&&(Be=!1,Dn()),tt.unintended&&(B.warn("Detected unintended removal from:",tt.from,"to",tt.to,"setting streamprocessor time to",tt.from),On(T.Z.SEEK_TARGET,{time:tt.from})),Be?un():(we?we=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:tt.from,to:tt.to,unintended:tt.unintended,hasEnoughSpaceToAppend:Lt(),quotaExceeded:ze})))}function Pn(tt){return new Promise(function(qt){tt&&tt.MSETimeOffset!==void 0&&Se&&Se.updateTimestampOffset?Se.updateTimestampOffset(tt.MSETimeOffset).then(function(){qt()}).catch(function(){qt()}):qt()})}function xn(){return Se&&!K?Se.updateAppendWindow(pe):Promise.resolve()}function Fn(){++De*(Ye.get().streaming.wallclockTimeUpdateInterval/1e3)>=Ye.get().streaming.buffer.bufferPruningInterval&&(De=0,At())}function Gn(){rr()}function It(tt){(K=tt)?On(T.Z.BUFFERING_COMPLETED):de=Number.POSITIVE_INFINITY}function Sn(){try{var tt,qt,Ke=Se.getAllBufferRanges(),Ve=0;if(!Ke)return Ve;for(qt=0,tt=Ke.length;qt<tt;qt++)Ve+=Ke.end(qt)-Ke.start(qt);return Ve}catch(Mt){return 0}}function En(tt){try{var qt=tt,Ke=Se.getAllBufferRanges();if(!Ke||Ke.length===0)return NaN;for(var Ve=0;qt===tt&&Ve<Ke.length;){var Mt=Ke.start(Ve),fn=Ke.end(Ve);qt>=Mt&&qt<=fn&&(qt=fn),Ve+=1}return qt===tt?NaN:qt}catch(Tn){}}function Lt(){var tt=Sn();return isNaN(tt)||tt<J}function On(tt,qt){var Ke=qt||{};le.trigger(tt,Ke,{streamId:pe.id,mediaType:Ne})}function ut(tt,qt){if(J=Number.POSITIVE_INFINITY,ge=void 0,de=Number.POSITIVE_INFINITY,re=0,qe=null,K=!1,Be=!1,ze=!1,ee=0,De=0,Le=[],je=NaN,ie=!1,Se){var Ke=Se;Se=null,tt||qt||Ke.abort().then(function(){Ke.reset(qt),Ke=null})}we=!1}return D={initialize:function(tt){dt(tt),le.on(T.Z.INIT_FRAGMENT_LOADED,Gt,D),le.on(T.Z.MEDIA_FRAGMENT_LOADED,kt,D),le.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,D),le.on(_.Z.PLAYBACK_PLAYING,Jt,D),le.on(_.Z.PLAYBACK_PROGRESS,Rt,D),le.on(_.Z.PLAYBACK_TIME_UPDATED,Rt,D),le.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,D),le.on(_.Z.PLAYBACK_STALLED,en,D)},getStreamId:function(){return pe.id},getType:function(){return Ne},getBufferControllerType:function(){return Qt},createBufferSink:Je,dischargePreBuffer:function(){if(Se&&Ee&&typeof Ee.discharge=="function"){var tt=Ee.getAllBufferRanges();if(tt.length>0){for(var qt="Beginning "+Ne+"PreBuffer discharge, adding buffer for:",Ke=0;Ke<tt.length;Ke++)qt+=" start: "+tt.start(Ke)+", end: "+tt.end(Ke)+";";B.debug(qt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");me=[];for(var Ve=Ee.discharge(),Mt=null,fn=0;fn<Ve.length;fn++){var Tn=Ve[fn];if(Tn.segmentType!==it.w.INIT_SEGMENT_TYPE){var sr=_e.extract(Tn.streamId,Tn.representationId);sr&&Mt!==sr&&(me.push(sr),Se.append(sr),Mt=sr)}me.push(Tn),Se.append(Tn)}Ee.reset(),Ee=null}},getBuffer:function(){return Se},getBufferLevel:function(){return ee},getRangeAt:Yt,hasBufferAtTime:function(tt){try{var qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return!1;for(var Ke=0;Ke<qt.length;){var Ve=qt.start(Ke),Mt=qt.end(Ke);if(tt>=Ve&&tt<=Mt)return!0;Ke+=1}return!1}catch(fn){return B.error(fn),!1}},pruneBuffer:At,setMediaSource:dt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(tt){var qt=_e.extract(pe.id,tt);return!!qt&&(B.info("Append Init fragment",Ne," with representationId:",qt.representationId," and quality:",qt.quality,", data size:",qt.bytes.byteLength),Ft(qt),!0)},getIsBufferingCompleted:function(){return K},setIsBufferingCompleted:It,getIsPruningInProgress:function(){return Be},reset:function(tt,qt){le.off(T.Z.INIT_FRAGMENT_LOADED,Gt,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,kt,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),le.off(_.Z.PLAYBACK_PLAYING,Jt,this),le.off(_.Z.PLAYBACK_PROGRESS,Rt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,Rt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),le.off(_.Z.PLAYBACK_STALLED,en,this),ut(tt,qt)},prepareForPlaybackSeek:function(){return K&&It(!1),Se.abort()},prepareForReplacementTrackSwitch:function(tt){return new Promise(function(qt,Ke){Se.abort().then(function(){return xn()}).then(function(){return Ye.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){return mt()}).then(function(){It(!1),qt()}).catch(function(Ve){Ke(Ve)})})},prepareForNonReplacementTrackSwitch:function(tt){return new Promise(function(qt,Ke){xn().then(function(){return Ye.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){qt()}).catch(function(Ve){Ke(Ve)})})},prepareForForceReplacementQualitySwitch:function(tt){return new Promise(function(qt,Ke){Se.abort().then(function(){return xn()}).then(function(){return mt()}).then(function(){return Pn(tt)}).then(function(){It(!1),qt()}).catch(function(Ve){Ke(Ve)})})},updateAppendWindow:xn,getAllRangesWithSafetyFactor:Wt,getContinuousBufferTimeForTargetTime:En,clearBuffers:Zt,pruneAllSafely:mt,updateBufferTimestampOffset:Pn,setSeekTarget:function(tt){je=tt},segmentRequestingCompleted:function(tt){isNaN(tt)||(de=tt,Nn())}},B=(0,x.Z)(Z).getInstance().getLogger(D),_e=Qe(Z).getInstance(),ut(),D}Vt.__dashjs_factory_name=Qt;var Tt=U.Z.getClassFactory(Vt),Pt="NotFragmentedTextBufferController";function Ce(L){L=L||{};var D,B,K,ee,J,H,re=this.context,de=(0,m.Z)(re).getInstance(),Se=L.textController,Ee=L.errHandler,ie=L.streamInfo,me=L.type;function ge(Be){ee=Be}function qe(Be){var ze,_e;B!==Be&&(B=Be)&&(ze=T.Z.BUFFERING_COMPLETED,_e={},de.trigger(ze,_e,{streamId:ie.id,mediaType:me}))}function De(Be){Be.chunk.bytes&&!B&&(H.save(Be.chunk),J.append(Be.chunk),qe(!0))}return D={initialize:function(Be){ge(Be)},getStreamId:function(){return ie.id},getType:function(){return me},getBufferControllerType:function(){return Pt},createBufferSink:function(Be){return new Promise(function(ze,_e){try{(J=Xe(re).create({mediaSource:ee,textController:Se,eventBus:de})).initializeForFirstUse(ie,Be),K||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),K=!0),ze(J)}catch(Le){Ee.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),_e(Le)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ge,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Be){return H.extract(ie.id,Be)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:qe,getIsPruningInProgress:function(){return!1},reset:function(Be){de.off(T.Z.INIT_FRAGMENT_LOADED,De,D),!Be&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},K=!1,ee=null,B=!1,H=Qe(re).getInstance(),de.on(T.Z.INIT_FRAGMENT_LOADED,De,D),D}Ce.__dashjs_factory_name=Pt;var te=U.Z.getClassFactory(Ce);function Fe(L){L=L||{};var D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=L.dashMetrics,ze=L.mediaPlayerModel,_e=L.fragmentModel,Le=L.abrController,we=L.playbackController,je=L.textController,Z=L.type,le=L.bufferController,ae=L.representationController,ue=L.settings;function Q(){me=!0}function Me(){me=!1}function Ie(Bt){if(!le.getIsBufferingCompleted()){ke();var Gt=isNaN(Bt)?0:Bt;J=setTimeout(Re,Gt)}}function ke(){J&&(clearTimeout(J),J=null)}function Re(){try{if(function(){try{return Z===v.Z.TEXT&&!je.isTextEnabled()||we.isPaused()&&(!we.getStreamController().getInitialPlayback()||!we.getStreamController().getAutoPlay())&&!ue.get().streaming.scheduling.scheduleWhilePaused}catch(kt){return!1}}())return void ke();if(function(){try{return!!me&&ae.getCurrentRepresentationInfo()&&(isNaN(Se)||Ee||(kt=B.id,Ft=Le.getMaxAllowedIndexFor(Z,kt),!(!isNaN(de)&&de==Ft||(K.info("Top quality "+Z+" index has changed from "+de+" to "+Ft),de=Ft,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!Z||!An||Be.getCurrentBufferLevel(Z)<pe()}())}catch(An){return!1}var kt,Ft}()){var Bt=!1;ge&&(Bt=Le.checkPlaybackQuality(Z,B.id)),Bt||(Gt=ae.getCurrentRepresentationInfo(),ie||Gt.quality!==Se||Ee?(Ee?(K.debug("Switch track for "+Z+", representation id = "+Gt.id),Ee=!1):K.debug("Quality has changed, get init request for representationid = "+Gt.id),De.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Gt.id,sender:D},{streamId:B.id,mediaType:Z}),ge=!1,ie=!1):(K.debug("Media segment needed for ".concat(Z," and stream id ").concat(B.id)),De.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:Z}),ge=!0))}else Ie(we.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}catch(kt){Ie(we.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}var Gt}function pe(){var Bt=NaN,Gt=ae.getCurrentRepresentationInfo();return Z&&Gt&&(Bt=Z===v.Z.TEXT?function(){try{if(je.isTextEnabled()){var kt=ae.getCurrentRepresentationInfo();if(isNaN(kt.fragmentDuration)){var Ft=Be.getCurrentSchedulingInfo(O.Z.SCHEDULING_INFO);return Ft?Ft.duration:0}return kt.fragmentDuration}return 0}catch(An){return 0}}():Z===v.Z.AUDIO&&H?function(){try{var kt=Be.getCurrentBufferLevel(v.Z.VIDEO),Ft=ae.getCurrentRepresentationInfo();return isNaN(Ft.fragmentDuration)?kt+1:Math.max(kt+1,Ft.fragmentDuration)}catch(An){return 0}}():function(){try{var kt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Le.isPlayingAtTopQuality(kt)?kt.manifestInfo.duration>=ue.get().streaming.buffer.longFormContentDurationThreshold?ue.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ue.get().streaming.buffer.bufferTimeAtTopQuality:ze.getStableBufferTime()}catch(Ft){return ze.getStableBufferTime()}}()),Bt}function Ne(){Ye(!0)}function Ye(Bt){if(we&&_e){var Gt=_e.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:we.getTime(),threshold:0})[0];Gt&&we.getTime()>=Gt.startTime&&((!re.mediaInfo||Gt.mediaInfo.type===re.mediaInfo.type&&Gt.mediaInfo.index!==re.mediaInfo.index)&&Bt&&De.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:Z,oldMediaInfo:re.mediaInfo,newMediaInfo:Gt.mediaInfo,streamId:B.id}),Gt.quality===re.quality&&Gt.adaptationIndex===re.adaptationIndex||!Bt||(K.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(Z)),De.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:Z,oldQuality:re.quality,newQuality:Gt.quality,streamId:B.id})),re={mediaInfo:Gt.mediaInfo,quality:Gt.quality,adaptationIndex:Gt.adaptationIndex})}}function dt(){_e.abortRequests(),ke()}function at(){ue.get().streaming.scheduling.scheduleWhilePaused||Ie()}function Je(Bt){Be.updatePlayListTraceMetrics({playbackspeed:Bt.playbackRate.toString()})}function ht(){ge=!0,ee=0,Se=NaN,re={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},de=NaN,Ee=!1,ie=!1,me=!0}return D={initialize:function(Bt){H=Bt,De.on(T.Z.URL_RESOLUTION_FAILED,dt,D),De.on(_.Z.PLAYBACK_STARTED,at,D),De.on(_.Z.PLAYBACK_RATE_CHANGED,Je,D),De.on(_.Z.PLAYBACK_TIME_UPDATED,Ne,D),De.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,D),De.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,D)},getType:function(){return Z},getStreamId:function(){return B.id},setTimeToLoadDelay:function(Bt){ee=Bt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(Bt){Ee=Bt},getSwitchTrack:function(){return Ee},startScheduleTimer:Ie,clearScheduleTimer:ke,reset:function(){De.off(T.Z.URL_RESOLUTION_FAILED,dt,D),De.off(_.Z.PLAYBACK_STARTED,at,D),De.off(_.Z.PLAYBACK_RATE_CHANGED,Je,D),De.off(_.Z.PLAYBACK_TIME_UPDATED,Ne,D),De.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,D),De.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,D),ke(),Ye(!1),ht(),B=null},getBufferTarget:pe,getPlaybackController:function(){return we},setCheckPlaybackQuality:function(Bt){ge=Bt},setInitSegmentRequired:function(Bt){ie=Bt},setLastInitializedQuality:function(Bt){Se=Bt}},K=(0,x.Z)(qe).getInstance().getLogger(D),ht(),B=L.streamInfo,D}Fe.__dashjs_factory_name="ScheduleController";var P=U.Z.getClassFactory(Fe),M=S(7387);function q(L){var D,B,K,ee,J,H,re=(L=L||{}).eventBus,de=L.events,Se=L.abrController,Ee=L.dashMetrics,ie=L.playbackController,me=L.timelineConverter,ge=L.type,qe=L.streamInfo,De=L.dashConstants,Be=L.segmentsController,ze=L.isDynamic,_e=L.adapter;function Le(){return ge}function we(){return K}function je(){return H}function Z(){B=null,K=!0,ee=[],J=null}function le(ke){return new Promise(function(Re,pe){var Ne=ke.hasInitialization(),Ye=ke.hasSegments(),dt=[];dt.push(Be.updateInitData(ke,Ne)),dt.push(Be.updateSegmentData(ke,Ye)),Promise.all(dt).then(function(at){var Je;at[0]&&!at[0].error&&(ke=function(ht,Bt){return Bt&&!Bt.error&&Bt.representation?Bt.representation:ht}(ke,at[0])),at[1]&&!at[1].error&&(ke=function(ht,Bt){if(Bt&&!Bt.error){var Gt,kt,Ft,An,nt=Bt.segments,mt=[],Wt=0;for(Gt=0,kt=nt?nt.length:0;Gt<kt;Gt++)Ft=nt[Gt],(An=(0,M.TJ)(me,ze,ht,Ft.startTime,Ft.duration,Ft.timescale,Ft.media,Ft.mediaRange,Wt))&&(mt.push(An),An=null,Wt++);return mt.length>0&&(ht.segments=mt),ht}}(ke,at[1])),(Je=ke).mediaFinishedInformation=Be.getMediaFinishedInformation(Je),function(ht){if(we()){var Bt,Gt,kt=Ee.getCurrentManifestUpdate(),Ft=!1;if(kt){for(var An=0;An<kt.representationInfo.length;An++)if((Bt=kt.representationInfo[An]).index===ht.index&&Bt.mediaType===Le()){Ft=!0;break}Ft||Ee.addManifestUpdateRepresentationInfo(ht,Le())}if(function(){for(var mt=0,Wt=ee.length;mt<Wt;mt++){var Rt=ee[mt].segmentInfoType;if(!ee[mt].hasInitialization()||(Rt===De.SEGMENT_BASE||Rt===De.BASE_URL)&&!ee[mt].segments)return!1}return!0}()){Se.setPlaybackQuality(ge,qe,(Gt=H,ee.indexOf(Gt)));var nt=Ee.getCurrentDVRInfo(ge);nt&&Ee.updateManifestUpdateInfo({latency:nt.range.end-ie.getTime()}),Ee.getCurrentRepresentationSwitch(je().adaptation.type)||ae(),Q()}}}(ke),Re()}).catch(function(at){pe(at)})})}function ae(){(function(){if(!(Se&&Ee&&ie&&me))throw new Error(v.Z.MISSING_CONFIG_ERROR)})();var ke=new Date,Re=je(),pe=1e3*ie.getTime();Re&&Ee.addRepresentationSwitch(Re.adaptation.type,ke,pe,Re.id),re.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ge,streamId:qe.id,currentRepresentation:Re,numberOfRepresentations:ee.length},{streamId:qe.id,mediaType:ge})}function ue(ke){return ke==null||ke>=ee.length?null:ee[ke]}function Q(ke){K=!1,re.trigger(de.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:ke},{streamId:qe.id,mediaType:ge})}function Me(ke){H=ke,J=_e.convertRepresentationToRepresentationInfo(H)}function Ie(ke){if(ke.newDuration){var Re=je();Re&&Re.adaptation.period&&(Re.adaptation.period.duration=ke.newDuration)}}return D={getStreamId:function(){return qe.id},getType:Le,getData:function(){return B},isUpdating:we,updateData:function(ke,Re,pe,Ne,Ye){return new Promise(function(dt,at){if(K=!0,ee=Re,B=ke,Me(ue(Ye)),pe!==v.Z.VIDEO&&pe!==v.Z.AUDIO&&(pe!==v.Z.TEXT||!Ne))return Q(),void dt();for(var Je=[],ht=0,Bt=ee.length;ht<Bt;ht++){var Gt=ee[ht];Je.push(le(Gt))}Promise.all(Je).then(function(){Me(ue(Ye)),dt()}).catch(function(kt){at(kt)})})},getCurrentRepresentation:je,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:ue,prepareQualityChange:function(ke){Me(ue(ke)),ae()},reset:function(){re.off(_.Z.MANIFEST_VALIDITY_CHANGED,Ie,D),Z()}},Z(),re.on(_.Z.MANIFEST_VALIDITY_CHANGED,Ie,D),D}q.__dashjs_factory_name="RepresentationController";var V=U.Z.getClassFactory(q),he=S(3106),fe=S(9326),He=S(7473),_t=S(2594);function ot(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")}var rt=function L(){ot(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};rt.INITIAL_PLAYOUT_START_REASON="initial_playout",rt.SEEK_START_REASON="seek",rt.RESUME_FROM_PAUSE_START_REASON="resume",rt.METRICS_COLLECTION_START_REASON="metrics_collection_start";var et=function L(){ot(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};et.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",et.REBUFFERING_REASON="rebuffering",et.USER_REQUEST_STOP_REASON="user_request",et.END_OF_PERIOD_STOP_REASON="end_of_period",et.END_OF_CONTENT_STOP_REASON="end_of_content",et.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",et.FAILURE_STOP_REASON="failure";var ft=S(7802);function yt(){return{ntpToUTC:function(L){var D=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(D.getTime()+L).getTime()}}}yt.__dashjs_factory_name="TimeUtils";var Et=U.Z.getSingletonFactory(yt);function Ct(L){L=L||{};var D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),_e=L.streamInfo,Le=L.type,we=L.errHandler,je=L.mimeType,Z=L.timelineConverter,le=L.adapter,ae=L.manifestModel,ue=L.mediaPlayerModel,Q=L.fragmentModel,Me=L.abrController,Ie=L.playbackController,ke=L.mediaController,Re=L.textController,pe=L.dashMetrics,Ne=L.settings,Ye=L.boxParser,dt=L.segmentBlacklistController;function at(){return _e.id}function Je(){return Le}function ht(){return le.getIsTextTrack(de.getData())}function Bt(){J=[],ee=null,qe=0,Se=!1,Ee=!1,ie=!1,De=null}function Gt(ut){return!isNaN(ut)&&!isNaN(_e.duration)&&isFinite(_e.duration)&&ut>=_e.start+_e.duration}function kt(ut){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(ut.sender){if(Ie.getIsManifestUpdateInProgress())Wt();else if((!ht()||Re.isTextEnabled())&&H&&ut.representationId&&!H.appendInitSegmentFromCache(ut.representationId)){var qt=de.getCurrentRepresentation();if(qt.range===0)return void Ft();var Ke=me?me.getInitRequest(ee,qt):null;Ke?Q.executeRequest(Ke):tt&&(re.setInitSegmentRequired(!0),Wt())}}}function Ft(ut){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ie.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Wt();else{var qt=mt();qt?(Se=!1,Ee=!1,An(qt)):nt(tt)}}function An(ut){isNaN(ut.startTime+ut.duration)||(qe=ut.startTime+ut.duration),ut.delayLoadingTime=new Date().getTime()+re.getTimeToLoadDelay(),re.setTimeToLoadDelay(0),function(tt){var qt=tt.url;return tt.range&&(qt=qt.concat("_",tt.range)),dt.contains(qt)}(ut)?(B.warn("Fragment request url ".concat(ut.url," for stream id ").concat(_e.id," and media type ").concat(Le," is on the ignore list and will be skipped")),Wt()):(B.debug("Next fragment request url for stream id ".concat(_e.id," and media type ").concat(Le," is ").concat(ut.url)),Q.executeRequest(ut))}function nt(ut){var tt,qt=de.getCurrentRepresentation();if(!Ne.get().streaming.gaps.enableSeekFix||!Se&&Ie.getTime()!==0||(K?K&&qt.segmentInfoType===y.Z.SEGMENT_TIMELINE&&(tt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,Ne.get().streaming.gaps.threshold)):tt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,Ne.get().streaming.gaps.threshold),isNaN(tt)||tt===qe)){if(me.isLastSegmentRequested(qt,qe)){var Ke=me.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(_e.id," has finished")),ze.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ke},{streamId:_e.id,mediaType:Le}),H.segmentRequestingCompleted(Ke),void re.clearScheduleTimer()}ut&&Wt()}else Ie.isSeeking()||Ie.getTime()===0?(B.warn("Adjusting playback time ".concat(tt," because of gap in the manifest. Seeking by ").concat(tt-qe)),Ie.seek(tt,!1,!1)):(B.warn("Adjusting buffering time ".concat(tt," because of gap in the manifest. Adjusting time by ").concat(tt-qe)),On(tt),ut&&Wt())}function mt(){var ut,tt=xn();if(isNaN(qe)||Je()===v.Z.TEXT&&!Re.isTextEnabled())return null;if(me){var qt=de&&tt?de.getRepresentationForQuality(tt.quality):null;ut=Se?me.getSegmentRequestForTime(ee,qt,qe):Ee?me.repeatSegmentRequest(ee,qt):me.getNextSegmentRequest(ee,qt)}return ut}function Wt(){re.startScheduleTimer(Ie.getLowLatencyModeEnabled()?Ne.get().streaming.scheduling.lowLatencyTimeout:Ne.get().streaming.scheduling.defaultTimeout)}function Rt(ut){ut.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(ut.currentRepresentation)}function en(ut){pe.addBufferState(Le,ut.state,re.getBufferTarget()),ut.state!==O.Z.BUFFER_EMPTY||Ie.isSeeking()||(B.info("Buffer is empty! Stalling!"),pe.pushPlayListTraceMetrics(new Date,et.REBUFFERING_REASON))}function Jt(ut){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),_e.duration),ut.quotaExceeded&&ut.from>Ie.getTime()&&On(ut.from),ut.hasEnoughSpaceToAppend&&ut.quotaExceeded&&re.startScheduleTimer()}function Yt(ut){if(ut&&ut.lastRequestAppended&&ut.lastRequestAppended.url){var tt=ut.lastRequestAppended.url;ut.lastRequestAppended.range&&(tt=tt.concat("_",ut.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(tt)),dt.add(tt)}}function Dn(ut){if(B.debug("Appended bytes for ".concat(ut.mediaType," and stream id ").concat(ut.streamId)),ut.segmentType===it.w.INIT_SEGMENT_TYPE){var tt=ut.quality;re.setLastInitializedQuality(tt),B.info("["+Le+"] lastInitializedRepresentationInfo changed to "+ut.quality)}De?Nn(De):re.startScheduleTimer(0)}function Nn(ut){var tt=Q.getRequests({state:$.FRAGMENT_MODEL_LOADING});if(tt&&tt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(De=ut);H.updateBufferTimestampOffset(ut).then(function(){re.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?re.startScheduleTimer():En(),De=null,ie=!1}).catch(function(){De=null,ie=!1})}function rr(ut){B.info("onFragmentLoadingAbandoned request: "+ut.request.url+" has been aborted"),Ie.isSeeking()||re.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+ut.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ut.request&&ut.request.isInitializationRequest()?re.setInitSegmentRequired(!0):On(ut.request.startTime+ut.request.duration/2),re.startScheduleTimer(0))}function ir(ut){B.info("OnFragmentLoadingCompleted for stream id "+_e.id+" and media type "+Le+" - Url:",ut.request?ut.request.url:"undefined",ut.request.range?", Range:"+ut.request.range:""),ht()&&re.startScheduleTimer(0),ut.error&&ut.request.serviceLocation&&function(tt){B.info("Fragment loading completed with an error"),tt&&tt.request&&tt.request.type&&(tt.request.type===it.w.INIT_SEGMENT_TYPE?kt({representationId:tt.request.representationId,sender:{}},!1):tt.request.type===it.w.MEDIA_SEGMENT_TYPE&&(On(tt.request.startTime+tt.request.duration/2),Ft({},!1)))}(ut)}function At(){On(Ie.getTime()),Pn().startScheduleTimer()}function Xt(ut){var tt=ut.currentTrackInfo;if(tt){var qt=J.find(function(Ke){return Ke.index===tt.index&&Ke.lang===tt.lang});qt&&mn(qt).then(function(){H.setIsBufferingCompleted(!1),On(Ie.getTime()),re.setInitSegmentRequired(!0),re.startScheduleTimer()})}}function Zt(ut){On(ut.quotaExceededTime),re.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function mn(ut){ut===ee||ut&&ee&&ut.type!==ee.type||(ee=ut);var tt=le.getRealAdaptation(_e,ee),qt=le.getVoRepresentations(ee);if(de){var Ke,Ve=de.getData(),Mt=Me.getMaxAllowedIndexFor(Le,_e.id),fn=Me.getMinAllowedIndexFor(Le,_e.id),Tn=null;return Ve!==null&&Ve.id===tt.id||Le===v.Z.TEXT?Ke=Me.getQualityFor(Le,_e.id):(Tn=Me.getThroughputHistory().getAverageThroughput(Le,K)||Me.getInitialBitrateFor(Le,_e.id),Ke=Me.getQualityForBitrate(ee,Tn,_e.id)),fn!==void 0&&Ke<fn&&(Ke=fn),Ke>Mt&&(Ke=Mt),de.updateData(tt,qt,Le,ee.isFragmented,Ke)}return Promise.resolve()}function Pn(){return re}function xn(ut){var tt;return ut!==void 0?((0,he.SE)(ut),tt=de?de.getRepresentationForQuality(ut):null):tt=de?de.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(tt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(ut){if(Ne.get().streaming.enableManifestTimescaleMismatchFix){var tt=ut.chunk,qt=tt.bytes,Ke=xn(tt.quality),Ve=de&&Ke?de.getRepresentationForQuality(Ke.quality):null;Ke&&Ve&&(Ve.timescale=Ye.getMediaTimescaleFromMoov(qt))}}function It(ut){var tt=ut.chunk,qt=tt.bytes,Ke=tt.quality,Ve=xn(Ke),Mt=de&&Ve?de.getRepresentationForQuality(Ve.quality):null;if(Ve&&Mt){var fn;if(Ne.get().streaming.parseInbandPrft&&ut.request.type===it.w.MEDIA_SEGMENT_TYPE){var Tn=function(io,Zi){var ks=io.getBoxes("prft"),Ku=[];return ks.forEach(function(zu){Ku.push(function(Ya,Fs){var Po="unknown";switch(Ya.flags){case 0:Po=y.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Po=y.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Po=y.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var pu=1e3*Ya.ntp_timestamp_sec+Ya.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Po,ntpTimestamp:pu=Et(Be).getInstance().ntpToUTC(pu),mediaTime:Ya.media_time/Fs}}(zu,Zi))}),Ku}(fn=fn||Ye.parse(qt),Mt.timescale);Tn&&Tn.length&&ze.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:_e.id,mediaType:Le})}var sr=le.getEventsFor(Ve.mediaInfo,null,_e),Zr=le.getEventsFor(Ve,Mt,_e);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ai=Q.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,quality:Ke,index:tt.index})[0],zr=function(io,Zi,ks,Ku){try{for(var zu={},Ya=[],Fs=ks.concat(Ku),Po=0,pu=Fs.length;Po<pu;Po++)zu[Fs[Po].schemeIdUri+"/"+Fs[Po].value]=Fs[Po];var gu=io.getBoxes("emsg");if(!gu||gu.length===0)return Ya;for(var la=io.getBox("sidx"),Rc=!la||isNaN(la.earliest_presentation_time)||isNaN(la.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:la.earliest_presentation_time/la.timescale,Uf=Math.max(Rc,0),Yu=de.getCurrentRepresentation(),Wa=0,Nc=gu.length;Wa<Nc;Wa++){var Us=le.getEvent(gu[Wa],zu,Uf,Yu);Us&&Ya.push(Us)}return Ya}catch(Dt){return[]}}(fn=fn||Ye.parse(qt),Ai,sr,Zr);ze.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:_e.id})}}}function Sn(){var ut=Ie.getTime();Ne.get().streaming.buffer.flushBufferAtTrackSwitch&&Ie.seek(ut+.001,!1,!0),On(ut),H.setSeekTarget(ut),re.startScheduleTimer()}function En(){var ut=Ie.getTime(),tt=H.getContinuousBufferTimeForTargetTime(ut);On(isNaN(tt)?ut:tt),re.startScheduleTimer()}function Lt(ut){ut&&!isNaN(ut.time)&&(On(ut.time),H.setSeekTarget(ut.time))}function On(ut){qe=ut,Se=!0}return D={initialize:function(ut,tt,qt){ge=(0,ft.Z)(Be).create({events:T.Z,eventBus:ze,streamInfo:_e,timelineConverter:Z,dashConstants:y.Z,segmentBaseController:L.segmentBaseController,type:Le}),me=(0,fe.Z)(Be).create({streamInfo:_e,type:Le,timelineConverter:Z,dashMetrics:pe,mediaPlayerModel:ue,baseURLController:L.baseURLController,errHandler:we,segmentsController:ge,settings:Ne,boxParser:Ye,events:T.Z,eventBus:ze,errors:Ae,debug:(0,x.Z)(Be).getInstance(),requestModifier:(0,He.Z)(Be).getInstance(),dashConstants:y.Z,constants:v.Z,urlUtils:(0,_t.Z)(Be).getInstance()}),K=_e.manifestInfo.isDynamic,me.initialize(K),Me.registerStreamType(Le,D),de=V(Be).create({streamInfo:_e,type:Le,abrController:Me,dashMetrics:pe,playbackController:Ie,timelineConverter:Z,dashConstants:y.Z,events:T.Z,eventBus:ze,errors:Ae,isDynamic:K,adapter:le,segmentsController:ge}),H=function(Ke,Ve){return Ke?Ke!==v.Z.TEXT||Ve?Tt(Be).create({streamInfo:_e,type:Ke,mediaPlayerModel:ue,manifestModel:ae,fragmentModel:Q,errHandler:we,mediaController:ke,representationController:de,adapter:le,textController:Re,abrController:Me,playbackController:Ie,settings:Ne}):te(Be).create({streamInfo:_e,type:Ke,mimeType:je,fragmentModel:Q,textController:Re,errHandler:we,settings:Ne}):(we.error(new ce.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(Le,qt),H&&H.initialize(ut),(re=P(Be).create({streamInfo:_e,type:Le,mimeType:je,adapter:le,dashMetrics:pe,mediaPlayerModel:ue,fragmentModel:Q,abrController:Me,playbackController:Ie,textController:Re,mediaController:ke,bufferController:H,representationController:de,settings:Ne})).initialize(tt),qe=0,Se=!1,Ee=!1},getStreamId:at,getType:Je,isUpdating:function(){return!!de&&de.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return de},getRepresentationInfo:xn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(ut){var tt=un();return tt?Promise.resolve(tt):H?H.createBufferSink(ee,ut):Promise.resolve(null)},updateStreamInfo:function(ut){return _e=ut,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return _e},selectMediaInfo:mn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(ut){J.indexOf(ut)===-1&&J.push(ut)},prepareTrackSwitch:function(){return new Promise(function(ut){B.debug("Preparing track switch for type ".concat(Le));var tt=Le===v.Z.TEXT||Ne.get().streaming.trackSwitchMode[Le]===v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ie.getTimeToStreamEnd(_e)>Ne.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!tt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:Le})}).catch(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:Le})}),void ut();re.clearScheduleTimer(),re.setSwitchTrack(!0),tt?(ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:_e.id},{mediaType:Le,streamId:_e.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var qt=xn();return H.updateBufferTimestampOffset(qt)}).then(function(){Sn(),ut()}).catch(function(){Sn(),ut()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),ut()}).catch(function(){En(),ut()})})},prepareQualityChange:function(ut){De&&B.warn("Canceling queued representation switch to ".concat(De.quality," for ").concat(Le)),B.debug("Preparing quality switch for type ".concat(Le));var tt=ut.newQuality;ie=!0,re.clearScheduleTimer(),de.prepareQualityChange(tt);var qt=xn(tt);ut.reason&&ut.reason.forceReplace?function(Ke){Q.abortRequests(),ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:_e.id},{mediaType:Le,streamId:_e.id}),re.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(Ke).then(function(){Sn(),De=null,ie=!1}).catch(function(){Sn(),De=null,ie=!1})}(qt):ut&&ut.reason&&ut.reason.forceAbandon?function(Ke){H.updateBufferTimestampOffset(Ke).then(function(){Q.abortRequests(),Ee=!0,re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1,De=null}).catch(function(){De=null,ie=!1})}(qt):Ne.get().streaming.buffer.fastSwitchEnabled?function(Ke){var Ve=Ie.getTime(),Mt=1.5*(isNaN(Ke.fragmentDuration)?1:Ke.fragmentDuration),fn=Q.getRequests({state:$.FRAGMENT_MODEL_EXECUTED,time:Ve+Mt,threshold:0})[0];if(fn&&!ht()){var Tn=H.getBufferLevel(),sr=Me.getAbandonmentStateFor(_e.id,Le);fn.quality<Ke.quality&&Tn>=Mt&&sr!==O.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(Ke).then(function(){Q.abortRequests(),On(Ve+Mt),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):Nn(Ke)}else Nn(Ke)}(qt):Nn(qt),pe.pushPlayListTraceMetrics(new Date,et.REPRESENTATION_SWITCH_STOP_REASON),pe.createPlaylistTraceMetrics(qt.id,1e3*Ie.getTime(),Ie.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(ut){return H.setMediaSource(ut,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(ut,tt){pe.pushPlayListTraceMetrics(ut,tt)},probeNextRequest:function(){var ut=xn(),tt=de&&ut?de.getRepresentationForQuality(ut.quality):null;return me.getNextSegmentRequestIdempotent(ee,tt)},prepareInnerPeriodPlaybackSeeking:function(ut){return new Promise(function(tt){if(H.hasBufferAtTime(ut.seekTime))return H.pruneBuffer(),Gt(H.getContinuousBufferTimeForTargetTime(ut.seekTime))&&H.setIsBufferingCompleted(!0),void tt();re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var qt=H.getAllRangesWithSafetyFactor(ut.seekTime);return H.clearBuffers(qt)}).then(function(){var qt=H.getContinuousBufferTimeForTargetTime(ut.seekTime);if(Gt(qt))H.setIsBufferingCompleted(!0),tt();else{var Ke=isNaN(qt)?ut.seekTime:qt;On(Ke),H.setSeekTarget(Ke);var Ve=[];Ve.push(H.updateAppendWindow());var Mt=xn();Ve.push(H.updateBufferTimestampOffset(Mt)),Promise.all(Ve).then(function(){re.setInitSegmentRequired(!0),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),tt()})}}).catch(function(qt){B.error(qt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(ut,tt){try{re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){ut()})}catch(qt){tt(qt)}})},reset:function(ut,tt){me&&me.reset(),H&&(H.reset(ut,tt),H=null),re&&(re.reset(),re=null),de&&(de.reset(),de=null),ge&&(ge=null),Me&&Me.unRegisterStreamType(at(),Le),ze.off(T.Z.DATA_UPDATE_COMPLETED,Rt,D),ze.off(T.Z.INIT_FRAGMENT_NEEDED,kt,D),ze.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,D),ze.off(T.Z.INIT_FRAGMENT_LOADED,Gn,D),ze.off(T.Z.MEDIA_FRAGMENT_LOADED,It,D),ze.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,D),ze.off(T.Z.BUFFER_CLEARED,Jt,D),ze.off(T.Z.SEEK_TARGET,Lt,D),ze.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,D),ze.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,D),ze.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,At,D),ze.off(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,D),ze.off(T.Z.QUOTA_EXCEEDED,Zt,D),ze.off(T.Z.SOURCE_BUFFER_ERROR,Yt,D),ze.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,D),Bt(),Le=null,_e=null}},B=(0,x.Z)(Be).getInstance().getLogger(D),Bt(),ze.on(T.Z.DATA_UPDATE_COMPLETED,Rt,D,{priority:m.Z.EVENT_PRIORITY_HIGH}),ze.on(T.Z.INIT_FRAGMENT_NEEDED,kt,D),ze.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,D),ze.on(T.Z.INIT_FRAGMENT_LOADED,Gn,D),ze.on(T.Z.MEDIA_FRAGMENT_LOADED,It,D),ze.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,D),ze.on(T.Z.BUFFER_CLEARED,Jt,D),ze.on(T.Z.SEEK_TARGET,Lt,D),ze.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,D),ze.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,D),ze.on(T.Z.QUOTA_EXCEEDED,Zt,D),ze.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,At,D),ze.on(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,D),ze.on(T.Z.SOURCE_BUFFER_ERROR,Yt,D),ze.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,D),D}Ct.__dashjs_factory_name="StreamProcessor";var hn=U.Z.getClassFactory(Ct),$t=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=S(9032);function Ot(L,D){if(L){if(typeof L=="string")return Un(L,D);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,D):void 0}}function Un(L,D){(D==null||D>L.length)&&(D=L.length);for(var B=0,K=new Array(D);B<D;B++)K[B]=L[B];return K}function gr(L){L=L||{};var D,B,K=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,re=(0,Ze.Z)(K).getInstance();function de(ie){var me,ge=new Date,qe=ie.request,De=new Headers;if(qe.range&&De.append("Range","bytes="+qe.range),ie.headers)for(var Be in ie.headers){var ze=ie.headers[Be];ze&&De.append(Be,ze)}qe.requestStartDate||(qe.requestStartDate=ge),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(Z,le){De.append(Z,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(me=new AbortController,ie.abortController=me,me.signal.onabort=ie.onabort);var _e={method:ie.method,headers:De,credentials:ie.withCredentials?"include":void 0,signal:me?me.signal:void 0},Le=re.get().streaming.abr.fetchThroughputCalculationMode,we=Date.now(),je=0;new Promise(function(Z){if(Le===v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(je=J.getThroughputCapacityDelayMS(qe,1e3*B.getCurrentBufferLevel(qe.mediaType))))return setTimeout(Z,je);Z()}).then(function(){var Z=Date.now();fetch(ie.url,_e).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,ue="",Q=function(Rt,en){var Jt;if(typeof Symbol>"u"||Rt[Symbol.iterator]==null){if(Array.isArray(Rt)||(Jt=Ot(Rt))){Jt&&(Rt=Jt);var Yt=0,Dn=function(){};return{s:Dn,n:function(){return Yt>=Rt.length?{done:!0}:{done:!1,value:Rt[Yt++]}},e:function(At){throw At},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Nn,rr=!0,ir=!1;return{s:function(){Jt=Rt[Symbol.iterator]()},n:function(){var At=Jt.next();return rr=At.done,At},e:function(At){ir=!0,Nn=At},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw Nn}}}}(le.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Me=ae.value;ue+=Me+": "+le.headers.get(Me)+"\r\n"}}catch(Rt){Q.e(Rt)}finally{Q.f()}if(ie.response.responseHeaders=ue,!le.body)return le.arrayBuffer().then(function(Rt){ie.response.response=Rt;var en={loaded:Rt.byteLength,total:Rt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var Ie,ke,Re,pe,Ne=parseInt(le.headers.get("Content-Length"),10),Ye=0,dt=!1,at=new Uint8Array,Je=0;if(Le===v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var ht=Z,Bt=0,Gt=(Re=le.body.tee(),pe=2,function(Rt){if(Array.isArray(Rt))return Rt}(Re)||function(Rt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(Rt)){var Jt=[],Yt=!0,Dn=!1,Nn=void 0;try{for(var rr,ir=Rt[Symbol.iterator]();!(Yt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Yt=!0);}catch(At){Dn=!0,Nn=At}finally{try{Yt||ir.return==null||ir.return()}finally{if(Dn)throw Nn}}return Jt}}(Re,pe)||Ot(Re,pe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),kt=Gt[0],Ft=Gt[1];Ie=kt.getReader(),ke=[],Ie.read().then(function Rt(en){var Jt=en.value,Yt=en.done;if(Bt=Date.now(),Jt&&Jt.length){var Dn=Bt-ht,Nn=Jt.length;ke.push({chunkDownloadTimeRelativeMS:Bt-Z,chunkDownloadDurationMS:Dn,chunkBytes:Nn,kbps:Math.round(8*Nn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(qe.mediaType)})}if(Yt){var rr=Bt-Z,ir=ke.reduce(function(At,Xt){return At+Xt.chunkBytes},0);return J.addMeasurement(qe,rr,ke,we,je,ue),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(qe),stream:!0})}return ht=Date.now(),Ie.read().then(Rt)}),ie.reader=Ft.getReader()}else ie.reader=le.body.getReader();var An=[],nt=[],mt=[],Wt=!0;Se(ie,function Rt(en){var Jt=en.value;if(en.done){if(at){if(Le!==v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Yt=null,Dn=null;Le===v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Yt=function(At,Xt){try{var Zt,un;Zt=At.filter(function(Sn,En){return En<At.length-1}),un=Xt.filter(function(Sn,En){return En<Xt.length-1});var mn=[];if(Zt.length>1){for(var Pn=0,xn=0,Fn=0;Fn<Zt.length;Fn++)if(Zt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Zt[Fn].ts;if(Gn>1)mn.push(8*un[Fn].bytes/Gn),xn=0;else{xn===0&&(xn=Zt[Fn].ts,Pn=0);var It=un[Fn].ts-xn;It>1?(Pn+=un[Fn].bytes,mn.push(8*Pn/It),xn=0):Pn+=un[Fn].bytes}}if(mn.length>0)return mn.reduce(function(Sn,En){return Sn+En},0)/mn.length}return null}catch(Sn){return null}}(nt,mt),Yt&&(Dn=8*Ye/Yt)):Le===v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=Ee(An,Ye)),ie.progress({loaded:Ye,total:isNaN(Ne)?Ye:Ne,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=at.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){at=function(At,Xt){if(At.length===0)return Xt;var Zt=new Uint8Array(At.length+Xt.length);return Zt.set(At),Zt.set(Xt,At.length),Zt}(at,Jt),Ye+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),Le===v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Wt&&H.findLastTopIsoBoxCompleted(["moof"],at,Je).found&&(Wt=!1,nt.push({ts:performance.now(),bytes:Jt.length}));var Nn=H.findLastTopIsoBoxCompleted(["moov","mdat"],at,Je);if(Nn.found){var rr,ir=Nn.lastCompletedOffset+Nn.size;Le!==v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Wt||(Wt=!0,mt.push({ts:performance.now(),bytes:at.length})),ir===at.length?(rr=at,at=new Uint8Array):(rr=new Uint8Array(at.subarray(0,ir)),at=at.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),Je=0}else Je=Nn.lastCompletedOffset,dt||(ie.progress({lengthComputable:!1,noTrace:!0}),dt=!0)}Se(ie,Rt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function Se(ie,me){ie.reader.read().then(me).catch(function(ge){ie.onerror&&ie.response.status===200&&ie.onerror(ge)})}function Ee(ie,me){try{if((ie=ie.filter(function(De){return De.bytes>me/4/ie.length})).length>1){var ge=0,qe=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(De,Be){var ze=ie[Be+1];if(ze){var _e=ze.ts-De.ts;ge+=_e<qe?_e:0}}),ge}return null}catch(De){return null}}return D={load:function(ie){ee&&ee.modifyRequest?(0,He.k)(ie,ee).then(function(){return de(ie)}):de(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(me){}},calculateDownloadedTime:Ee,setup:function(ie){B=ie.dashMetrics}},D}gr.__dashjs_factory_name="FetchLoader";var Pr=U.Z.getClassFactory(gr),dr=S(1180);function ei(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var Ji=function(){function L(){(function(K,ee){if(!(K instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var D,B;return D=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==y.Z.BASE_URL&&this.segmentInfoType!==y.Z.SEGMENT_BASE&&!this.indexRange}}])&&ei(D.prototype,B),L}(),Or=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},eo=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};eo.DEFAULT_ID="defaultId";var _i=eo,Mi=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=S(2610),to=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ti=function L(D,B,K,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=D||"",this.serviceLocation=B||D||"",this.dvbPriority=K||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ti.DEFAULT_DVB_PRIORITY=1,Ti.DEFAULT_DVB_WEIGHT=1;var Qn=Ti,bu=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var St=function(){function L(){(function(K,ee){if(!(K instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var D,B;return D=L,(B=[{key:"init",value:function(K){return K&&(this.schemeIdUri=K.schemeIdUri?K.schemeIdUri:null,this.value=K.value?K.value:null,this.id=K.id?K.id:null,K[y.Z.DVB_URL]&&(this.dvbUrl=K[y.Z.DVB_URL]),K[y.Z.DVB_MIMETYPE]&&(this.dvbMimeType=K[y.Z.DVB_MIMETYPE]),K[y.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=K[y.Z.DVB_FONTFAMILY])),this}}])&&an(D.prototype,B),L}(),zt=S(3101),Nt=S.n(zt);function Kt(){return{areEqual:function(L,D){return Nt()(L,D)}}}Kt.__dashjs_factory_name="ObjectUtils";var gn=U.Z.getSingletonFactory(Kt),In=S(7803),Zn=function L(D,B){(function(K,ee){if(!(K instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=D||"",this.serviceLocation=B||null,this.queryParams={}},bn=function L(D,B,K){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=D||"",this.serviceLocation=B||null,this.ttl=K||NaN,this.queryParams={}};function Rn(L,D){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(L);D&&(K=K.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,K)}return B}function on(L){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?Rn(Object(B),!0).forEach(function(K){Bn(L,K,B[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(K){Object.defineProperty(L,K,Object.getOwnPropertyDescriptor(B,K))})}return L}function Bn(L,D,B){return D in L?Object.defineProperty(L,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[D]=B,L}function kn(L,D){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||D){B&&(L=B);var K=0,ee=function(){};return{s:ee,n:function(){return K>=L.length?{done:!0}:{done:!1,value:L[K++]}},e:function(de){throw de},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var de=B.next();return H=de.done,de},e:function(de){re=!0,J=de},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function er(L,D){if(L){if(typeof L=="string")return Er(L,D);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,D):void 0}}function Er(L,D){(D==null||D>L.length)&&(D=L.length);for(var B=0,K=new Array(D);B<D;B++)K[B]=L[B];return K}function Ur(){var L,D,B,K,ee=this.context,J=(0,_t.Z)(ee).getInstance(),H=Number.isInteger||function(Z){return typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z};function re(Z,le){if(!Z)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(Z.Representation_asArray&&Z.Representation_asArray.length){var ae=Be(Z.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return le===v.Z.IMAGE}if(Z.ContentComponent_asArray&&Z.ContentComponent_asArray.length>0){if(Z.ContentComponent_asArray.length>1)return le===v.Z.MUXED;if(Z.ContentComponent_asArray[0].contentType===le)return!0}var ue=le===v.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(Z.Representation_asArray&&Z.Representation_asArray.length){var Q=Z.Representation_asArray[0].codecs;if(ue.test(Q))return!0}if(Z.hasOwnProperty(y.Z.MIME_TYPE))return ue.test(Z.mimeType);if(Z.Representation_asArray){for(var Me,Ie=0;Ie<Z.Representation_asArray.length;Ie++)if((Me=Z.Representation_asArray[Ie]).hasOwnProperty(y.Z.MIME_TYPE))return ue.test(Me.mimeType)}return!1}function de(Z){if(!Z)throw new Error("adaptation is not defined");if(Z.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||Z.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||Z.hasOwnProperty(y.Z.SEGMENT_LIST)||Z.hasOwnProperty(y.Z.SEGMENT_BASE))return!0;if(Z.Representation_asArray&&Z.Representation_asArray.length>0){var le=Z.Representation_asArray[0];if(le.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(y.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(y.Z.SEGMENT_LIST)||le.hasOwnProperty(y.Z.SEGMENT_BASE))return!0}return!1}function Se(Z){return re(Z,v.Z.VIDEO)}function Ee(Z){return re(Z,v.Z.TEXT)}function ie(Z){return re(Z,v.Z.IMAGE)}function me(Z){return Z&&Array.isArray(Z.Representation_asArray)&&Z.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),Z}function ge(Z,le){return Z&&Z.Period_asArray&&H(le)&&Z.Period_asArray[le]?Z.Period_asArray[le].AdaptationSet_asArray:[]}function qe(Z){return Z&&Z.Period_asArray?Z.Period_asArray:[]}function De(Z){var le=!1;return Z&&Z.hasOwnProperty("type")&&(le=Z.type===y.Z.DYNAMIC),le}function Be(Z){return Z&&Z.EssentialProperty_asArray&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function ze(Z){if(!Z||!Z.S_asArray)return NaN;var le=Z.S_asArray[0],ae=Z.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function _e(Z,le){if(!Z)throw new Error("Period cannot be null or undefined");var ae=_i.DEFAULT_ID+"_"+le;return Z.hasOwnProperty(y.Z.ID)&&Z.id.length>0&&Z.id!=="__proto__"&&(ae=Z.id),ae}function Le(Z,le,ae){var ue,Q=[];if(!Z)return Q;for(ue=0;ue<Z.length;ue++){var Me=new bu;if(Me.timescale=1,Me.representation=le,!Z[ue].hasOwnProperty(v.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Me.schemeIdUri=Z[ue].schemeIdUri,Z[ue].hasOwnProperty(y.Z.TIMESCALE)&&(Me.timescale=Z[ue].timescale),Z[ue].hasOwnProperty(y.Z.VALUE)&&(Me.value=Z[ue].value),Q.push(Me),Me.period=ae}return Q}function we(Z){var le=[],ae=Z.BaseURL_asArray||[Z.baseUri],ue=!1;return ae.some(function(Q){if(Q){var Me=new Qn,Ie=Q.__text||Q;return J.isRelative(Ie)&&(ue=!0,Z.baseUri&&(Ie=J.resolve(Ie,Z.baseUri))),Me.url=Ie,Q.hasOwnProperty(y.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Me.serviceLocation=Q.serviceLocation:Me.serviceLocation=Ie,Q.hasOwnProperty(y.Z.DVB_PRIORITY)&&(Me.dvbPriority=Q[y.Z.DVB_PRIORITY]),Q.hasOwnProperty(y.Z.DVB_WEIGHT)&&(Me.dvbWeight=Q[y.Z.DVB_WEIGHT]),Q.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)&&(Me.availabilityTimeOffset=Q[y.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)&&(Me.availabilityTimeComplete=Q[y.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(Me),ue}}),le}function je(Z){var le=new sn;return le.serverUrl=Z.__text,Z.hasOwnProperty(y.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=Z[y.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),Z.hasOwnProperty(y.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=Z[y.Z.QUERY_BEFORE_START].toLowerCase()==="true"),Z.hasOwnProperty(y.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=Z[y.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return L={getIsTypeOf:re,getIsText:Ee,getIsFragmented:de,getProducerReferenceTimesForAdaptation:function(Z){var le=Z&&Z.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)?Z[y.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(Z&&Z.hasOwnProperty(y.Z.REPRESENTATION_ASARRAY)?Z[y.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(ue){var Q;ue.hasOwnProperty(y.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(Me){if(Array.isArray(Me))return Er(Me)}(Q=ue[y.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Me){if(typeof Symbol<"u"&&Symbol.iterator in Object(Me))return Array.from(Me)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(ue){var Q=new tn;ue.hasOwnProperty(y.Z.ID)&&(Q[y.Z.ID]=ue[y.Z.ID],ue.hasOwnProperty(y.Z.WALL_CLOCK_TIME)&&(Q[y.Z.WALL_CLOCK_TIME]=ue[y.Z.WALL_CLOCK_TIME],ue.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(Q[y.Z.PRESENTATION_TIME]=ue[y.Z.PRESENTATION_TIME],ue.hasOwnProperty(y.Z.INBAND)&&(Q[y.Z.INBAND]=ue[y.Z.INBAND]!=="false"),ue.hasOwnProperty(y.Z.TYPE)&&(Q[y.Z.TYPE]=ue[y.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(Z){var le="";return Z&&Z.hasOwnProperty(y.Z.LANG)&&(le=Z.lang),le},getViewpointForAdaptation:function(Z){return Z&&Z.hasOwnProperty(y.Z.VIEWPOINT_ASARRAY)&&Z[y.Z.VIEWPOINT_ASARRAY].length?Z[y.Z.VIEWPOINT_ASARRAY].map(function(le){return new St().init(le)}):[]},getRolesForAdaptation:function(Z){return Z&&Z.hasOwnProperty(y.Z.ROLE_ASARRAY)&&Z[y.Z.ROLE_ASARRAY].length?Z[y.Z.ROLE_ASARRAY].map(function(le){return new St().init(le)}):[]},getAccessibilityForAdaptation:function(Z){return Z&&Z.hasOwnProperty(y.Z.ACCESSIBILITY_ASARRAY)&&Z[y.Z.ACCESSIBILITY_ASARRAY].length?Z[y.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new St().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(Z){return Z&&Z.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new St().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(Z){return Z&&Z.hasOwnProperty(y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[y.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new St().init(le)}):[]},getAdaptationForIndex:function(Z,le,ae){var ue=ge(le,ae);return ue.length>0&&H(Z)?ue[Z]:null},getIndexForAdaptation:function(Z,le,ae){if(!Z)return-1;for(var ue=ge(le,ae),Q=0;Q<ue.length;Q++)if(gn(ee).getInstance().areEqual(ue[Q],Z))return Q;return-1},getAdaptationForId:function(Z,le,ae){var ue,Q,Me=ge(le,ae);for(ue=0,Q=Me.length;ue<Q;ue++)if(Me[ue].hasOwnProperty(y.Z.ID)&&Me[ue].id===Z)return Me[ue];return null},getAdaptationsForType:function(Z,le,ae){var ue,Q,Me=ge(Z,le),Ie=[];for(ue=0,Q=Me.length;ue<Q;ue++)re(Me[ue],ae)&&Ie.push(me(Me[ue]));return Ie},getRealPeriods:qe,getRealPeriodForIndex:function(Z,le){var ae=qe(le);return ae.length>0&&H(Z)?ae[Z]:null},getCodec:function(Z,le,ae){var ue=null;if(Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0){var Q=H(le)&&le>=0&&le<Z.Representation_asArray.length?Z.Representation_asArray[le]:Z.Representation_asArray[0];Q&&(ue=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(ue+=';width="'+Q.width+'";height="'+Q.height+'"'))}return ue&&(ue=ue.replace(/\sprofiles=[^;]*/g,"")),ue},getSelectionPriority:function(Z){try{var le=Z&&Z.selectionPriority!==void 0?parseInt(Z.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(Z){return Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0?Z.Representation_asArray[0].mimeType:null},getKID:function(Z){return Z&&Z.hasOwnProperty(y.Z.CENC_DEFAULT_KID)?Z[y.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(Z){if(!Z||!Array.isArray(Z.Label_asArray))return[];for(var le=[],ae=0;ae<Z.Label_asArray.length;ae++)le.push({lang:Z.Label_asArray[ae].lang,text:Z.Label_asArray[ae].__text||Z.Label_asArray[ae]});return le},getContentProtectionData:function(Z){return Z&&Z.hasOwnProperty(y.Z.CONTENTPROTECTION_ASARRAY)&&Z.ContentProtection_asArray.length!==0?Z.ContentProtection_asArray:null},getIsDynamic:De,getId:function(Z){return Z&&Z[y.Z.ID]||null},hasProfile:function(Z,le){var ae=!1;return Z&&Z.profiles&&Z.profiles.length>0&&(ae=Z.profiles.indexOf(le)!==-1),ae},getDuration:function(Z){return Z&&Z.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)?Z.mediaPresentationDuration:Z&&Z.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(Z){return Z&&Z.bandwidth?Z.bandwidth:NaN},getManifestUpdatePeriod:function(Z){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return Z&&Z.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(ae=Z.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(Z){return Z&&Z.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(Z[y.Z.PUBLISH_TIME]):null},getRepresentationCount:function(Z){return Z&&Array.isArray(Z.Representation_asArray)?Z.Representation_asArray.length:0},getBitrateListForAdaptation:function(Z){var le=me(Z);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(Z,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(Z)?le.Representation_asArray[Z]:null},getRepresentationsForAdaptation:function(Z){var le,ae,ue,Q,Me=[],Ie=function(at){if(at&&at.period&&H(at.period.index)){var Je=at.period.mpd.manifest.Period_asArray[at.period.index];if(Je&&Je.AdaptationSet_asArray&&H(at.index))return me(Je.AdaptationSet_asArray[at.index])}}(Z);if(Ie&&Ie.Representation_asArray){if(Z&&Z.period&&H(Z.period.index)){var ke=we(Z.period.mpd.manifest);ke&&(ae=ke[0])}for(var Re=0,pe=Ie.Representation_asArray.length;Re<pe;++Re){var Ne=Ie.Representation_asArray[Re],Ye=new Ji;if(Ye.index=Re,Ye.adaptation=Z,Ne.hasOwnProperty(y.Z.ID)&&(Ye.id=Ne.id),Ne.hasOwnProperty(y.Z.CODECS)&&(Ye.codecs=Ne.codecs),Ne.hasOwnProperty(y.Z.MIME_TYPE)&&(Ye.mimeType=Ne[y.Z.MIME_TYPE]),Ne.hasOwnProperty(y.Z.CODEC_PRIVATE_DATA)&&(Ye.codecPrivateData=Ne.codecPrivateData),Ne.hasOwnProperty(y.Z.BANDWITH)&&(Ye.bandwidth=Ne.bandwidth),Ne.hasOwnProperty(y.Z.WIDTH)&&(Ye.width=Ne.width),Ne.hasOwnProperty(y.Z.HEIGHT)&&(Ye.height=Ne.height),Ne.hasOwnProperty(y.Z.SCAN_TYPE)&&(Ye.scanType=Ne.scanType),Ne.hasOwnProperty(y.Z.MAX_PLAYOUT_RATE)&&(Ye.maxPlayoutRate=Ne.maxPlayoutRate),Ne.hasOwnProperty(y.Z.SEGMENT_BASE)?(le=Ne.SegmentBase,Ye.segmentInfoType=y.Z.SEGMENT_BASE):Ne.hasOwnProperty(y.Z.SEGMENT_LIST)?(le=Ne.SegmentList).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?Ye.segmentInfoType=y.Z.SEGMENT_TIMELINE:Ye.segmentInfoType=y.Z.SEGMENT_LIST:Ne.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)?((le=Ne.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)?Ye.segmentInfoType=y.Z.SEGMENT_TIMELINE:Ye.segmentInfoType=y.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(y.Z.INITIALIZATION_MINUS)&&(Ye.initialization=le.initialization.split("$Bandwidth$").join(Ne.bandwidth).split("$RepresentationID$").join(Ne.id))):Ye.segmentInfoType=y.Z.BASE_URL,Ye.essentialProperties=Be(Ne),le){if(le.hasOwnProperty(y.Z.INITIALIZATION)){var dt=le.Initialization;dt.hasOwnProperty(y.Z.SOURCE_URL)&&(Ye.initialization=dt.sourceURL),dt.hasOwnProperty(y.Z.RANGE)&&(Ye.range=dt.range)}else Ee(Ie)&&de(Ie)&&Ie.mimeType&&Ie.mimeType.indexOf("application/mp4")===-1&&(Ye.range=0);le.hasOwnProperty(y.Z.TIMESCALE)&&(Ye.timescale=le.timescale),le.hasOwnProperty(y.Z.DURATION)?Ye.segmentDuration=le.duration/Ye.timescale:Ne.hasOwnProperty(y.Z.SEGMENT_TEMPLATE)&&(le=Ne.SegmentTemplate).hasOwnProperty(y.Z.SEGMENT_TIMELINE)&&(Ye.segmentDuration=ze(le.SegmentTimeline)/Ye.timescale),le.hasOwnProperty(y.Z.MEDIA)&&(Ye.media=le.media),le.hasOwnProperty(y.Z.START_NUMBER)&&(Ye.startNumber=le.startNumber),le.hasOwnProperty(y.Z.INDEX_RANGE)&&(Ye.indexRange=le.indexRange),le.hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&(Ye.presentationTimeOffset=le.presentationTimeOffset/Ye.timescale),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_OFFSET)?Ye.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(Ye.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(y.Z.AVAILABILITY_TIME_COMPLETE)?Ye.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(Ye.availabilityTimeComplete=ae.availabilityTimeComplete)}Ye.MSETimeOffset=(Q=(ue=Ye).presentationTimeOffset,ue.adaptation.period.start-Q),Ye.path=[Z.period.index,Z.index,Re],Me.push(Ye)}}return Me},getAdaptationsForPeriod:function(Z){var le,ae,ue,Q=Z&&H(Z.index)?Z.mpd.manifest.Period_asArray[Z.index]:null,Me=[];if(Q&&Q.AdaptationSet_asArray)for(ue=0;ue<Q.AdaptationSet_asArray.length;ue++)ae=Q.AdaptationSet_asArray[ue],le=new Or,ae.hasOwnProperty(y.Z.ID)&&(le.id=ae.id),le.index=ue,le.period=Z,re(ae,v.Z.MUXED)?le.type=v.Z.MUXED:re(ae,v.Z.AUDIO)?le.type=v.Z.AUDIO:Se(ae)?le.type=v.Z.VIDEO:Ee(ae)?le.type=v.Z.TEXT:ie(ae)?le.type=v.Z.IMAGE:D.warn("Unknown Adaptation stream type"),Me.push(le);return Me},getRegularPeriods:function(Z){var le,ae,ue=!!Z&&De(Z.manifest),Q=[],Me=null,Ie=null,ke=null,Re=null;for(ae=0,le=Z&&Z.manifest&&Z.manifest.Period_asArray?Z.manifest.Period_asArray.length:0;ae<le;ae++)(Ie=Z.manifest.Period_asArray[ae]).hasOwnProperty(y.Z.START)?(Re=new _i).start=Ie.start:Me!==null&&Me.hasOwnProperty(y.Z.DURATION)&&ke!==null?(Re=new _i).start=parseFloat((ke.start+ke.duration).toFixed(5)):ae!==0||ue||((Re=new _i).start=0),ke!==null&&isNaN(ke.duration)&&(Re!==null?ke.duration=parseFloat((Re.start-ke.start).toFixed(5)):D.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Re!==null&&(Re.id=_e(Ie,ae),Re.index=ae,Re.mpd=Z,Ie.hasOwnProperty(y.Z.DURATION)&&(Re.duration=Ie.duration),ke&&(ke.nextPeriodId=Re.id),Q.push(Re),Me=Ie,ke=Re),Ie=null,Re=null;return Q.length===0||ke!==null&&isNaN(ke.duration)&&(ke.duration=parseFloat((function(pe){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(v.Z.MISSING_CONFIG_ERROR)})();var Ne,Ye=De(pe.mpd.manifest);return pe.mpd.manifest.mediaPresentationDuration?Ne=pe.mpd.manifest.mediaPresentationDuration:pe.duration?Ne=pe.duration:Ye?Ne=Number.POSITIVE_INFINITY:B.error(new ce.Z(Ae.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),Ne}(ke)-ke.start).toFixed(5))),Q},getMpd:function(Z){var le=new Mi;return Z&&(le.manifest=Z,Z.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(Z.availabilityStartTime.getTime()):Z.loadedTime&&(le.availabilityStartTime=new Date(Z.loadedTime.getTime())),Z.hasOwnProperty(y.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(Z.availabilityEndTime.getTime())),Z.hasOwnProperty(y.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=Z.minimumUpdatePeriod),Z.hasOwnProperty(y.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=Z.mediaPresentationDuration),Z.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=Z.suggestedPresentationDelay),Z.hasOwnProperty(y.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=Z.timeShiftBufferDepth),Z.hasOwnProperty(y.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=Z.maxSegmentDuration),Z.hasOwnProperty(y.Z.PUBLISH_TIME)&&(le.publishTime=new Date(Z.publishTime))),le},getEventsForPeriod:function(Z){var le,ae,ue=Z&&Z.mpd&&Z.mpd.manifest?Z.mpd.manifest:null,Q=ue?ue.Period_asArray:null,Me=Q&&Z&&H(Z.index)?Q[Z.index].EventStream_asArray:null,Ie=[];if(Me)for(le=0;le<Me.length;le++){var ke=new bu;if(ke.period=Z,ke.timescale=1,!Me[le].hasOwnProperty(v.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ke.schemeIdUri=Me[le][v.Z.SCHEME_ID_URI],Me[le].hasOwnProperty(y.Z.TIMESCALE)&&(ke.timescale=Me[le][y.Z.TIMESCALE]),Me[le].hasOwnProperty(y.Z.VALUE)&&(ke.value=Me[le][y.Z.VALUE]),Me[le].hasOwnProperty(y.Z.PRESENTATION_TIME_OFFSET)&&(ke.presentationTimeOffset=Me[le][y.Z.PRESENTATION_TIME_OFFSET]),ae=0;Me[le].Event_asArray&&ae<Me[le].Event_asArray.length;ae++){var Re=Me[le].Event_asArray[ae],pe=new to;pe.presentationTime=0,pe.eventStream=ke,Re.hasOwnProperty(y.Z.PRESENTATION_TIME)&&(pe.presentationTime=Re.presentationTime);var Ne=ke.presentationTimeOffset?ke.presentationTimeOffset/ke.timescale:0;pe.calculatedPresentationTime=pe.presentationTime/ke.timescale+Z.start-Ne,Re.hasOwnProperty(y.Z.DURATION)&&(pe.duration=Re.duration/ke.timescale),Re.hasOwnProperty(y.Z.ID)?pe.id=Re.id:pe.id=null,Re.Signal&&Re.Signal.Binary?pe.messageData=K.decodeArray(Re.Signal.Binary.toString()):pe.messageData=Re.messageData||Re.__cdata||Re.__text,Ie.push(pe)}}return Ie},getEssentialPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,ue=kn(Z.EssentialProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value;Q.hasOwnProperty(v.Z.SCHEME_ID_URI)&&(le[Q[v.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){ue.e(Me)}finally{ue.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(y.Z.ESSENTIAL_PROPERTY_ASARRAY)&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return new St().init(le)}):[]},getEssentialPropertiesForRepresentation:Be,getEventStreamForAdaptationSet:function(Z,le,ae){var ue,Q,Me;return Z&&Z.Period_asArray&&le&&le.period&&H(le.period.index)&&(Q=Z.Period_asArray[le.period.index])&&Q.AdaptationSet_asArray&&H(le.index)&&(Me=Q.AdaptationSet_asArray[le.index])&&(ue=Me.InbandEventStream_asArray),Le(ue,null,ae)},getEventStreamForRepresentation:function(Z,le,ae){var ue,Q,Me,Ie;return Z&&Z.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(Q=Z.Period_asArray[le.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(le.adaptation.index)&&(Me=Q.AdaptationSet_asArray[le.adaptation.index])&&Me.Representation_asArray&&H(le.index)&&(Ie=Me.Representation_asArray[le.index])&&(ue=Ie.InbandEventStream_asArray),Le(ue,le,ae)},getUTCTimingSources:function(Z){var le=De(Z),ae=!!Z&&Z.hasOwnProperty(y.Z.AVAILABILITY_START_TIME),ue=Z?Z.UTCTiming_asArray:null,Q=[];return(le||ae)&&ue&&ue.forEach(function(Me){var Ie=new zi.Z;Me.hasOwnProperty(v.Z.SCHEME_ID_URI)&&(Ie.schemeIdUri=Me.schemeIdUri,Me.hasOwnProperty(y.Z.VALUE)&&(Ie.value=Me.value.toString(),Q.push(Ie)))}),Q},getBaseURLsFromElement:we,getRepresentationSortFunction:function(){return function(Z,le){return Z.bandwidth-le.bandwidth}},getContentSteering:function(Z){if(Z&&Z.hasOwnProperty(y.Z.CONTENT_STEERING_AS_ARRAY))return je(Z[y.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(Z){return Z&&Z.hasOwnProperty(y.Z.LOCATION_AS_ARRAY)?Z[y.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null;return new Zn(ae,ue)}):[]},getPatchLocation:function(Z){return Z&&Z.hasOwnProperty(y.Z.PATCH_LOCATION_AS_ARRAY)?Z[y.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(y.Z.SERVICE_LOCATION)?le[y.Z.SERVICE_LOCATION]:null,Q=le.hasOwnProperty(y.Z.TTL)?1e3*parseFloat(le[y.Z.TTL]):NaN;return new bn(ae,ue,Q)}):[]},getSuggestedPresentationDelay:function(Z){return Z&&Z.hasOwnProperty(y.Z.SUGGESTED_PRESENTATION_DELAY)?Z.suggestedPresentationDelay:null},getAvailabilityStartTime:function(Z){return Z&&Z.hasOwnProperty(y.Z.AVAILABILITY_START_TIME)&&Z.availabilityStartTime!==null?Z.availabilityStartTime.getTime():null},getServiceDescriptions:function(Z){var le=[];if(Z&&Z.hasOwnProperty(y.Z.SERVICE_DESCRIPTION)){var ae,ue=kn(Z.ServiceDescription_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value,Me=null,Ie=null,ke=null,Re=null,pe=null,Ne=null,Ye=null;for(var dt in Q)Q.hasOwnProperty(dt)&&(dt===y.Z.ID?Me=Q[dt]:dt===y.Z.SERVICE_DESCRIPTION_SCOPE?Ie=Q[dt].schemeIdUri:dt===y.Z.SERVICE_DESCRIPTION_LATENCY?ke={target:parseInt(Q[dt].target),max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),referenceId:parseInt(Q[dt].referenceId)}:dt===y.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Re={max:parseFloat(Q[dt].max),min:parseFloat(Q[dt].min)}:dt===y.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?pe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target),type:Q[dt].type,maxQualityDifference:parseInt(Q[dt].maxQualityDifference)}:dt===y.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Ne={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target)}:dt===y.Z.CONTENT_STEERING&&(Ye=je(Q[dt])));le.push({id:Me,schemeIdUri:Ie,latency:ke,playbackRate:Re,operatingQuality:pe,operatingBandwidth:Ne,contentSteering:Ye})}}catch(at){ue.e(at)}finally{ue.f()}}return le},getSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(y.Z.SEGMENT_ALIGNMENT))&&Z[y.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(y.Z.SUB_SEGMENT_ALIGNMENT))&&Z[y.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=kn(Z.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value;Q.hasOwnProperty(v.Z.SCHEME_ID_URI)&&(le[Q[v.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){ue.e(Me)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new St().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(Z){var le={};if(Z&&Z.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=kn(Z.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value;Q.hasOwnProperty(v.Z.SCHEME_ID_URI)&&(le[Q[v.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){ue.e(Me)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(Z){return Z&&Z.hasOwnProperty(y.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new St().init(le)}):[]},setConfig:function(Z){Z&&(Z.errHandler&&(B=Z.errHandler),Z.BASE64&&(K=Z.BASE64))}},D=(0,x.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Kn=U.Z.getSingletonFactory(Ur),rn=S(703);function cn(L,D){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(de,Se){if(de){if(typeof de=="string")return Cn(de,Se);var Ee=Object.prototype.toString.call(de).slice(8,-1);return Ee==="Object"&&de.constructor&&(Ee=de.constructor.name),Ee==="Map"||Ee==="Set"?Array.from(de):Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee)?Cn(de,Se):void 0}}(L))||D){B&&(L=B);var K=0,ee=function(){};return{s:ee,n:function(){return K>=L.length?{done:!0}:{done:!1,value:L[K++]}},e:function(de){throw de},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var de=B.next();return H=de.done,de},e:function(de){re=!0,J=de},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function Cn(L,D){(D==null||D>L.length)&&(D=L.length);for(var B=0,K=new Array(D);B<D;B++)K[B]=L[B];return K}function Jn(){var L,D,B,K,ee,J,H,re,de,Se,Ee=this.context,ie=(0,m.Z)(Ee).getInstance(),me=(0,Ze.Z)(Ee).getInstance();function ge(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},de={},re={},Se={},De()}function qe(){De()}function De(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Me=Q.getActiveStream();Me&&(H=Me.getProcessors())}}}function Be(Q,Me){var Ie,ke={},Re=cn(Me);try{for(Re.s();!(Ie=Re.n()).done;){var pe=Ie.value;Q[pe]&&(ke[pe]=Q[pe])}}catch(Ne){Re.e(Ne)}finally{Re.f()}return ke}function ze(Q){var Me=me.get().streaming.cmcd.enabledKeys;return Q.filter(function(Ie){return Me.includes(Ie)})}function _e(Q){try{return Q.type===it.w.MPD_TYPE?((Ie=Le()).ot="m",Ie):Q.type===it.w.MEDIA_SEGMENT_TYPE?(Me=Q.mediaType,Se.hasOwnProperty(Me)||(Se[Me]=!1),re.hasOwnProperty(Me)||(re[Me]=!1),de.hasOwnProperty(Me)||(de[Me]=!1),function(ke){var Re,pe=Le(),Ne=function(Ft){try{var An=Ft.quality,nt=Ft.mediaInfo.bitrateList;return parseInt(nt[An].bandwidth/1e3)}catch(mt){return null}}(ke),Ye=function(Ft){try{return isNaN(Ft.duration)?NaN:Math.round(1e3*Ft.duration)}catch(An){return null}}(ke),dt=function(Ft){try{return 100*parseInt(K.getThroughputHistory().getSafeAverageThroughput(Ft)/100)}catch(An){return null}}(ke.mediaType),at=function(Ft){try{var An=B.pr,nt=ee.getCurrentBufferLevel(Ft);return isNaN(An)||isNaN(nt)?null:100*parseInt(nt/An*10)}catch(mt){return null}}(ke.mediaType),Je=we(ke.mediaType),ht=function(Ft){try{var An=K.getTopBitrateInfoFor(Ft);return Math.round(An.bitrate/1e3)}catch(nt){return null}}(ke.mediaType),Bt=B.pr,Gt=function(Ft){if(H&&H.length!==0){var An,nt=cn(H);try{for(nt.s();!(An=nt.n()).done;){var mt=An.value;if(mt.getType()===Ft)return mt.probeNextRequest()}}catch(Wt){nt.e(Wt)}finally{nt.f()}}}(ke.mediaType);ke.mediaType===v.Z.VIDEO&&(Re="v"),ke.mediaType===v.Z.AUDIO&&(Re="a"),ke.mediaType===v.Z.TEXT&&(Re=ke.mediaInfo.mimeType==="application/mp4"?"tt":"c");var kt=me.get().streaming.cmcd.rtp;return kt||(kt=function(Ft){try{var An=J.getPlaybackRate();An||(An=1);var nt=Ft.quality,mt=Ft.mediaType,Wt=Ft.mediaInfo,Rt=Ft.duration;if(!Wt)return NaN;var en=we(mt);en===0&&(en=500);var Jt=Wt.bitrateList[nt].bandwidth*Rt/1e3/(en/An/1e3),Yt=me.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(me.get().streaming.cmcd.rtpSafetyFactor)?me.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Yt/100)+1)}catch(Dn){return NaN}}(ke)),isNaN(kt)||(pe.rtp=kt),Gt&&(ke.url!==Gt.url?pe.nor=encodeURIComponent(rn.Z.getRelativeUrl(ke.url,Gt.url)):Gt.range&&(pe.nrr=Gt.range)),Ne&&(pe.br=Ne),Re&&(pe.ot=Re),isNaN(Ye)||(pe.d=Ye),isNaN(dt)||(pe.mtp=dt),isNaN(at)||(pe.dl=at),isNaN(Je)||(pe.bl=Je),isNaN(ht)||(pe.tb=ht),isNaN(Bt)||Bt===1||(pe.pr=Bt),de[ke.mediaType]&&(pe.bs=!0,de[ke.mediaType]=!1),!re[ke.mediaType]&&Se[ke.mediaType]||(pe.su=!0,re[ke.mediaType]=!1,Se[ke.mediaType]=!0),pe}(Q)):Q.type===it.w.INIT_SEGMENT_TYPE?function(){var ke=Le();return ke.ot="i",ke.su=!0,ke}():Q.type===it.w.OTHER_TYPE||Q.type===it.w.XLINK_EXPANSION_TYPE?function(){var ke=Le();return ke.ot="o",ke}():Q.type===it.w.LICENSE?function(ke){var Re=Le();return Re.ot="k",Re}():null}catch(ke){return null}var Me,Ie}function Le(){var Q={},Me=me.get().streaming.cmcd.cid?me.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=me.get().streaming.cmcd.sid?me.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Me&&(Q.cid="".concat(Me)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function we(Q){try{var Me=ee.getCurrentBufferLevel(Q);return isNaN(Me)?null:100*parseInt(10*Me)}catch(Ie){return null}}function je(Q){try{B.pr=Q.playbackRate}catch(Me){}}function Z(Q){try{var Me=L.getIsDynamic(Q.data)?"l":"v",Ie=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Me),B.sf="".concat(Ie)}catch(ke){}}function le(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(de[Q.mediaType]||(de[Q.mediaType]=!0),re[Q.mediaType]||(re[Q.mediaType]=!0))}catch(Me){}}function ae(){for(var Q in de)de.hasOwnProperty(Q)&&(de[Q]=!0);for(var Me in re)re.hasOwnProperty(Me)&&(re[Me]=!0)}function ue(Q){try{if(!Q)return null;var Me=Object.keys(Q).sort(function(Re,pe){return Re.localeCompare(pe)}),Ie=Me.length,ke=Me.reduce(function(Re,pe,Ne){return pe==="v"&&Q[pe]===1||(typeof Q[pe]=="string"&&pe!=="ot"&&pe!=="sf"&&pe!=="st"?Re+="".concat(pe,"=").concat(JSON.stringify(Q[pe])):Re+="".concat(pe,"=").concat(Q[pe]),Ne<Ie-1&&(Re+=",")),Re},"");return(ke=ke.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Re){return null}}return D={getQueryParameter:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=_e(Q),Ie=function(Re){try{var pe=me.get().streaming.cmcd.enabledKeys;return Object.keys(Re).filter(function(Ne){return pe.includes(Ne)}).reduce(function(Ne,Ye){return Ne[Ye]=Re[Ye],Ne},{})}catch(Ne){return Re}}(Me),ke=ue(Ie);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch(Re){return null}},getHeaderParameters:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=_e(Q),Ie=Be(Me,ze(["br","d","ot","tb"])),ke=Be(Me,ze(["bl","dl","mtp","nor","nrr","su"])),Re=Be(Me,ze(["bs","rtp"])),pe=Be(Me,ze(["cid","pr","sf","sid","st","v"])),Ne={"CMCD-Object":ue(Ie),"CMCD-Request":ue(ke),"CMCD-Status":ue(Re),"CMCD-Session":ue(pe)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,headers:Ne}),Ne}return null}catch(Ye){return null}},setConfig:function(Q){Q&&(Q.abrController&&(K=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,je,this),ie.off(_.Z.MANIFEST_LOADED,Z,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,D),ie.off(_.Z.PLAYBACK_SEEKED,ae,D),ge()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,je,D),ie.on(_.Z.MANIFEST_LOADED,Z,D),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,D),ie.on(_.Z.PLAYBACK_SEEKED,ae,D),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,qe,D)}},L=Kn(Ee).getInstance(),ge(),D}Jn.__dashjs_factory_name="CmcdModel";var ar=U.Z.getSingletonFactory(Jn);function Cr(L){return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Cr(L)}function Lr(L,D){Lr=function(re,de){return new J(re,void 0,de)};var B=no(RegExp),K=RegExp.prototype,ee=new WeakMap;function J(re,de,Se){var Ee=B.call(this,re,de);return ee.set(Ee,Se||ee.get(re)),Ee}function H(re,de){var Se=ee.get(de);return Object.keys(Se).reduce(function(Ee,ie){return Ee[ie]=re[Se[ie]],Ee},Object.create(null))}return Yi(J,B),J.prototype.exec=function(re){var de=K.exec.call(this,re);return de&&(de.groups=H(de,this)),de},J.prototype[Symbol.replace]=function(re,de){if(typeof de=="string"){var Se=ee.get(this);return K[Symbol.replace].call(this,re,de.replace(/\$<([^>]+)>/g,function(ie,me){return"$"+Se[me]}))}if(typeof de=="function"){var Ee=this;return K[Symbol.replace].call(this,re,function(){var ie=[];return ie.push.apply(ie,arguments),Cr(ie[ie.length-1])!=="object"&&ie.push(H(ie,Ee)),de.apply(this,ie)})}return K[Symbol.replace].call(this,re,de)},Lr.apply(this,arguments)}function Yi(L,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(D&&D.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),D&&hi(L,D)}function no(L){var D=typeof Map=="function"?new Map:void 0;return no=function(B){if(B===null||(K=B,Function.toString.call(K).indexOf("[native code]")===-1))return B;var K;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(D!==void 0){if(D.has(B))return D.get(B);D.set(B,ee)}function ee(){return Br(B,arguments,yi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),hi(ee,B)},no(L)}function Br(L,D,B){return Br=qr()?Reflect.construct:function(K,ee,J){var H=[null];H.push.apply(H,ee);var re=new(Function.bind.apply(K,H));return J&&hi(re,J.prototype),re},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function hi(L,D){return hi=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},hi(L,D)}function yi(L){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},yi(L)}var So="static",ro="dynamic",Jo="cmsd-",Ci=Jo+So,ml=Jo+ro,ru="stream",sc=["mb","st","sf","v"],gf={video:"v",audio:"a",text:"tt",stream:ru},si=/^[-0-9]/;function Rs(){var L,D,B,K,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},K={}}function re(ge){ge&&Object.keys(ge).forEach(function(qe){sc.includes(qe)||delete ge[qe]})}function de(ge){return!ge||ge.toLowerCase()!=="false"&&(si.test(ge)?parseInt(ge,10):ge.replace(/["]+/g,""))}function Se(ge){try{for(var qe={},De=ge.split(","),Be=0;Be<De.length;Be++){var ze=De[Be].split("="),_e=ze[0],Le=de(ze[1]);qe[_e]=Le}return qe}catch(we){D.error("Failed to parse CMSD-Static response header value:",we)}}function Ee(ge){try{for(var qe={},De=ge.split(","),Be=De[De.length-1].split(";"),ze=1;ze<Be.length;ze++){var _e=Be[ze].split("="),Le=_e[0],we=de(_e[1]);qe[Le]=we}return qe}catch(je){return D.error("Failed to parse CMSD-Dynamic response header value:",je),[]}}function ie(ge){return gf[ge]||"o"}function me(ge,qe,De){var Be=ge===So?B:K,ze=Be[qe]||{},_e=Be[ru]||{};return ze[De]||_e[De]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ge,qe){for(var De=null,Be=null,ze=ge.split("\r\n"),_e=ze.length-1;_e>=0;_e--){var Le=ze[_e].match(Lr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Le&&Le.groups){var we=Le.groups.key.toLowerCase(),je=Le.groups.value;switch(we){case Ci:De=Se(je),J.trigger(T.Z.CMSD_STATIC_HEADER,De);break;case ml:Be||(Be=Ee(je))}}}var Z=ru;return De&&De.ot?Z=De.ot:qe&&(Z=ie(qe)),re(B[Z]),re(K[Z]),De&&(B[Z]=Object.assign(B[Z]||{},De)),Be&&(K[Z]=Object.assign(K[Z]||{},Be)),{static:De,dynamic:Be}},getMaxBitrate:function(ge){var qe=ie(ge);return me(ro,qe,"mb")||-1},getEstimatedThroughput:function(ge){var qe=ie(ge);return me(ro,qe,"etp")||null},getResponseDelay:function(ge){var qe=ie(ge);return me(ro,qe,"rd")||null},getRoundTripTime:function(ge){var qe=ie(ge);return me(ro,qe,"rtt")||null}},D=(0,x.Z)(ee).getInstance().getLogger(L),H(),L}Rs.__dashjs_factory_name="CmsdModel";var _n=U.Z.getSingletonFactory(Rs);function $n(){var L,D,B=this.context,K={};function ee(){D=(0,x.Z)(B).getInstance().getLogger(L)}function J(re){for(var de={},Se=0,Ee=0,ie=0,me=0,ge=re.length,qe=0;qe<ge;++qe)Se+=re[qe].chunkDownloadTimeRelativeMS,Ee+=re[qe].bufferLevel,ie+=re[qe].chunkDownloadTimeRelativeMS*re[qe].bufferLevel,me+=re[qe].chunkDownloadTimeRelativeMS*re[qe].chunkDownloadTimeRelativeMS;return de.m=(ie-Se*Ee/ge)/(me-Se*Se/ge),de.b=Ee/ge-de.m*Se/ge,function(De){return de.m*De+de.b}}function H(re){var de,Se=!0,Ee=re.reduce(function(ie,me){return ie+me.bufferLevelAtSegmentEnd},0)/re.length;return re.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(Se=!1),ie.bufferLevelAtSegmentEnd/Ee<.8&&(Se=!1),de?de>ie.bitrate&&(Se=!1):de=ie.bitrate}),Se}return L={setup:ee,addMeasurement:function(re,de,Se,Ee,ie){re&&re.mediaType&&!K[re.mediaType]&&(K[re.mediaType]=[]);var me=re.mediaInfo.bitrateList.find(function(ge){return ge.id===re.representationId});K[re.mediaType].push({index:re.index,repId:re.representationId,mediaType:re.mediaType,requestTimeMS:Ee,adjustedAvailabilityStartTimeMS:re.availabilityStartTime.getTime(),segDurationMS:1e3*re.duration,chunksDurationMS:Se.reduce(function(ge,qe){return ge+qe.chunkDownloadDurationMS},0),segmentBytes:Se.reduce(function(ge,qe){return ge+qe.chunkBytes},0),bitrate:me&&me.bandwidth,bitrateList:re.mediaInfo.bitrateList,chunkMeasurements:Se,fetchDownloadDurationMS:de,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(Se.slice(1))}),K[re.mediaType].length>10&&K[re.mediaType].shift()},getThroughputCapacityDelayMS:function(re,de){var Se=K[re.mediaType]&&K[re.mediaType].slice(-3);return!Se||Se.length<3?0:H(Se)?de/4>250?250:de/4:0},getEstimatedDownloadDurationMS:function(re){var de=K[re.mediaType].slice(-1).pop(),Se=K[re.mediaType].slice(-3),Ee=de.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;de.bufferLevelAtSegmentStart=de.getEstimatedBufferLevel(Ee/2),de.bufferLevelAtSegmentEnd=de.getEstimatedBufferLevel(Ee);var ie=H(Se),me=ie?.6:.8;if(de.isBufferStable&&1.05*de.segDurationMS<de.fetchDownloadDurationMS)return de.fetchDownloadDurationMS;if(!ie||de.segDurationMS<de.fetchDownloadDurationMS||de.adjustedAvailabilityStartTimeMS<=de.requestTimeMS+de.throughputCapacityDelayMS-de.segDurationMS)return .8*de.fetchDownloadDurationMS;for(var ge=de.requestTimeMS+de.throughputCapacityDelayMS-de.adjustedAvailabilityStartTimeMS,qe=0,De=0,Be=0,ze=0;ze<de.chunkMeasurements.length;ze++){var _e=de.chunkMeasurements[ze];if(ge<De+_e.chunkDownloadDurationMS)break;De+=_e.chunkDownloadDurationMS,qe+=_e.chunkBytes,Be++}if(ge<0&&D.warn("request time was before adjusted availibitly start time"),qe&&De&&Be>.2*de.chunkMeasurements.length){var Le=qe/De,we=de.segmentBytes/Le;return de.fetchDownloadDurationMS<we?de.fetchDownloadDurationMS*me:we*me}var je=de.bitrate;return de.bitrateList.some(function(Z){if(Z.bandwidth>de.bitrate)return je=Z.bandwidth,!0}),je===de.bitrate?de.fetchDownloadDurationMS*me:me*de.segmentBytes*8*1e3/je}},ee(),L}$n.__dashjs_factory_name="LowLatencyThroughputModel";var hr=U.Z.getSingletonFactory($n),ti=S(5717);function Mr(L,D,B){return D in L?Object.defineProperty(L,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[D]=B,L}function Bi(L){L=L||{};var D,B,K,ee,J,H,re,de,Se,Ee,ie,me=this.context,ge=L.errHandler,qe=L.dashMetrics,De=L.mediaPlayerModel,Be=L.requestModifier,ze=L.boxParser,_e=L.errors,Le=L.requestTimeout||0,we=(0,m.Z)(me).getInstance(),je=(0,Ze.Z)(me).getInstance();function Z(le,ae){var ue,Q=le.request,Me=[],Ie=!0,ke=!0,Re=new Date,pe=Re,Ne=0,Ye=null,dt=null;if(!Be||!qe||!ge)throw new Error("config object is not correct or missing");var at,Je=function(en){Q.requestStartDate=Re,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||Re,Q.fileLoaderType=dt;var Jt=ue.response?ue.response.responseURL:null,Yt=ue.response?ue.response.status:null,Dn=ue.response&&ue.response.getAllResponseHeaders?ue.response.getAllResponseHeaders():ue.response?ue.response.responseHeaders:null,Nn=Dn&&je.get().streaming.cmsd&&je.get().streaming.cmsd.enabled?re.parseResponseHeaders(Dn,Q.mediaType):null;qe.addHttpRequest(Q,Jt,Yt,Dn,en?Me:null,Nn)},ht=function(en){ke=!1,Je(en),Q.type===it.w.MPD_TYPE&&(qe.addManifestUpdate(Q),we.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},Bt=function(){if(Ye&&(clearTimeout(Ye),Ye=null),B.indexOf(ue)!==-1&&(B.splice(B.indexOf(ue),1),ke))if(ht(!1),ae>0){try{je.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===it.w.MEDIA_SEGMENT_TYPE&&De.getRetryAttemptsForType(it.w.MEDIA_SEGMENT_TYPE)===ae&&we.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:le};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),Z(le,ae))},De.getRetryIntervalsForType(Q.type))}else{if(Q.type===it.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ge.error(new ce.Z(J[Q.type],Q.url+" is not available",{request:Q,response:ue.response})),le.error&&le.error(Q,"error",ue.response.statusText,ue.response),le.complete&&le.complete(Q,ue.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===it.w.MEDIA_SEGMENT_TYPE?((at=Pr(me).create({requestModifier:Be,lowLatencyThroughputModel:Se,boxParser:ze})).setup({dashMetrics:qe}),dt=v.Z.FILE_LOADER_TYPES.FETCH):(at=(0,nn.Z)(me).create({requestModifier:Be}),dt=v.Z.FILE_LOADER_TYPES.XHR);var Gt=null,kt=Be.modifyRequestURL?Be.modifyRequestURL(Q.url):Q.url;if(je.get().streaming.cmcd&&je.get().streaming.cmcd.enabled){var Ft=je.get().streaming.cmcd.mode;if(Ft===v.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Yt=H.getQueryParameter(en);return Yt&&Jt.push(Yt),Jt}catch(Dn){return[]}}(Q);kt=rn.Z.addAditionalQueryParameterToUrl(kt,An)}else Ft===v.Z.CMCD_MODE_HEADER&&(Gt=H.getHeaderParameters(Q))}var nt=de.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var mt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});kt=rn.Z.addAditionalQueryParameterToUrl(kt,mt)}Q.url=kt,ue={url:kt,method:it.w.GET,withCredentials:nt,request:Q,onload:function(){ue.response.status>=200&&ue.response.status<=299&&(ht(!0),le.success&&le.success(ue.response.response,ue.response.statusText,ue.response.responseURL),le.complete&&le.complete(Q,ue.response.statusText))},onend:Bt,onerror:Bt,progress:function(en){var Jt=new Date;Ie&&(Ie=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Me.push({s:pe,d:en.time?en.time:Jt.getTime()-pe.getTime(),b:[en.loaded?en.loaded-Ne:0]}),pe=Jt,Ne=en.loaded),Ye&&(clearTimeout(Ye),Ye=null),je.get().streaming.fragmentRequestProgressTimeout>0&&(Ye=setTimeout(function(){Ee.warn("Abort request "+ue.url+" due to progress timeout"),ue.response.onabort=null,ue.loader.abort(ue),Bt()},je.get().streaming.fragmentRequestProgressTimeout)),le.progress&&en&&le.progress(en)},onabort:function(){Je(!0),Ye&&(clearTimeout(Ye),Ye=null),le.abort&&le.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Yt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Yt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";Ee.warn(Jt)},loader:at,timeout:Le,headers:Gt};var Wt=new Date().getTime();if(isNaN(Q.delayLoadingTime)||Wt>=Q.delayLoadingTime)B.push(ue),at.load(ue);else{var Rt={httpRequest:ue};K.push(Rt),Rt.delayTimeout=setTimeout(function(){if(K.indexOf(Rt)!==-1){K.splice(K.indexOf(Rt),1);try{Re=new Date,pe=Re,B.push(Rt.httpRequest),at.load(Rt.httpRequest)}catch(en){Rt.httpRequest.onerror()}}},Q.delayLoadingTime-Wt)}}return D={load:function(le){le.request?Z(le,De.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){ee.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),ee=[],K.forEach(function(le){return clearTimeout(le.delayTimeout)}),K=[],B.forEach(function(le){le.request.type!==it.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),B=[]}},Ee=(0,x.Z)(me).getInstance().getLogger(D),B=[],K=[],ee=[],H=ar(me).getInstance(),re=_n(me).getInstance(),Se=hr(me).getInstance(),de=(0,ti.Z)(me).getInstance(),Mr(ie={},it.w.MPD_TYPE,_e.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,it.w.XLINK_EXPANSION_TYPE,_e.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,it.w.INIT_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,it.w.MEDIA_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.INDEX_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.OTHER_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,D}Bi.__dashjs_factory_name="HTTPLoader";var $r=U.Z.getClassFactory(Bi);function ea(){var L;function D(){L={}}function B(){D()}return B(),{getLoader:function(K){for(var ee in L)if(L.hasOwnProperty(ee)&&K.startsWith(ee))return L[ee];return $r},registerLoader:function(K,ee){L[K]=ee},unregisterLoader:function(K){L[K]&&delete L[K]},unregisterAllLoader:D,reset:B}}ea.__dashjs_factory_name="SchemeLoaderFactory";var Di=U.Z.getSingletonFactory(ea);function ui(L){L=L||{};var D,B,K=this.context;return D=Di(K).getInstance(),{load:function(ee){if(!B){var J=D.getLoader(ee&&ee.request?ee.request.url:null);B=J(K).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}ui.__dashjs_factory_name="URLLoader";var wo=U.Z.getClassFactory(ui);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Wi(L)}function Go(L,D){return Go=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},Go(L,D)}function ta(L,D){return!D||Wi(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function pt(L){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},pt(L)}var na=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Go(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=pt(D);if(B){var re=pt(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return ta(this,J)});function ee(J){var H;return function(re,de){if(!(re instanceof de))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=K.call(this,J)).checkForExistenceOnly=!0,H}return ee}(j.Z);function Ns(L){L=L||{};var D,B,K=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,re=L.errors,de=L.streamId;return D={checkForExistence:function(Se){var Ee=function(me){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:Se,exists:me})};if(Se){var ie=new na(Se.url);B.load({request:ie,success:function(){Ee(!0)},error:function(){Ee(!1)}})}else Ee(!1)},load:function(Se){var Ee=function(ie,me){ee.trigger(J.LOADING_COMPLETED,{request:Se,response:ie||null,error:me||null,sender:D})};Se?B.load({request:Se,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:Se,stream:ie.stream,streamId:de}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:Se,response:ie.data||null,error:null,sender:D})},success:function(ie){Ee(ie)},error:function(ie,me,ge){Ee(void 0,new ce.Z(re.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ge,me))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:D})}}):Ee(void 0,new ce.Z(re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=wo(K).create({errHandler:L.errHandler,errors:re,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:v.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),D}Ns.__dashjs_factory_name="FragmentLoader";var pr=U.Z.getClassFactory(Ns);function Ao(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}Ao.__dashjs_factory_name="SegmentResponseModifier";var iu=U.Z.getSingletonFactory(Ao);function yl(L){L=L||{};var D,B,K,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,re=L.mediaPlayerModel,de=L.dashMetrics,Se=(0,x.Z)(ee).getInstance(),Ee=iu(ee).getInstance(),ie=L.streamInfo;function me(){return ie.id}function ge(){for(var De in K)K[De].reset();K={}}function qe(De){if(De.sender){var Be=De.request,ze=De.response,_e=Be.isInitializationRequest(),Le=Be.mediaInfo.streamInfo;if(De.error&&(Be.mediaType===v.Z.AUDIO||Be.mediaType===v.Z.VIDEO||Be.mediaType===v.Z.TEXT&&Be.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:De.request.serviceLocation}),ze&&Le){var we=function(je,Z,le,ae){var ue=new $t;return ue.streamId=le,ue.mediaInfo=Z.mediaInfo,ue.segmentType=Z.type,ue.start=Z.startTime,ue.duration=Z.duration,ue.end=ue.start+ue.duration,ue.bytes=je,ue.index=Z.index,ue.quality=Z.quality,ue.representationId=Z.representationId,ue.endFragment=ae,ue}(ze,Be,ie.id,De.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Ee.modifyResponseAsync(we).then(function(je){J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:je,request:Be},{streamId:Le.id,mediaType:Be.mediaType})}).catch(function(je){B.error(je),J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:we,request:Be},{streamId:Le.id,mediaType:Be.mediaType})})}else B.warn("No "+Be.mediaType+" bytes to push or stream is inactive.")}}return D={getStreamId:me,getModel:function(De){var Be=K[De];return Be||(Be=$(ee).create({streamInfo:ie,type:De,dashMetrics:de,fragmentLoader:pr(ee).create({dashMetrics:de,mediaPlayerModel:re,errHandler:H,requestModifier:(0,He.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Ae,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:me()}),debug:Se,eventBus:J,events:T.Z}),K[De]=Be),Be},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,qe,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,qe,this),ge()}},B=Se.getLogger(D),ge(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,qe,D),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,qe,D),D}yl.__dashjs_factory_name="FragmentController";var ds=U.Z.getClassFactory(yl),ja=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Ru=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Nu(L){var D,B,K=this.context,ee=L.streamInfo;function J(re){B.setTrackByIndex(re)}function H(){B&&B.reset()}return D={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var re=B.getTracks();re&&re.length>0&&J(0)},provide:function(re,de){if(typeof de=="function"){var Se,Ee,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||re==null)de(null);else{(Ee=B.getThumbnailRequestForTime(re))&&(ie.segmentDuration=Ee.duration),Se=re%ie.segmentDuration;var me=Math.floor(Se*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ge=new ja;if(ge.width=Math.floor(ie.widthPerTile),ge.height=Math.floor(ie.heightPerTile),ge.x=Math.floor(me%ie.tilesHor)*ie.widthPerTile,ge.y=Math.floor(me/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(re,function(De){ge.url=De,de(ge)});if(Ee)ge.url=Ee.url,ie.segmentDuration=NaN;else{var qe=Math.floor(re/ie.segmentDuration);ge.url=function(De,Be){var ze=Be+De.startNumber,_e=(0,M.vi)(De.templateUrl,"Number",ze);return _e=(0,M.vi)(_e,"Time",(ze-1)*De.segmentDuration*De.timescale),_e=(0,M.vi)(_e,"Bandwidth",De.bandwidth),(0,M.eR)(_e)}(ie,qe)}de(ge)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var re=B.getTracks(),de=0;return re.map(function(Se){var Ee=new Ru;return Ee.mediaType=v.Z.IMAGE,Ee.qualityIndex=de++,Ee.bitrate=Se.bitrate,Ee.width=Se.width,Ee.height=Se.height,Ee})},reset:H},H(),B=(0,In.Z)(K).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),D}Nu.__dashjs_factory_name="ThumbnailController";var ra=U.Z.getClassFactory(Nu),ia=S(7417);function ou(L){var D;L=L||{};var B=[],K=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(re){B.indexOf(re)===-1&&(B.push(re),K.trigger(ee,{entry:re}))}return D={add:H,contains:function(re){return!!(B.length&&re&&re.length)&&B.indexOf(re)!==-1},reset:function(){B=[]}},J&&K.on(J,function(re){H(re.entry)},D),D}ou.__dashjs_factory_name="BlackListController";var hs=U.Z.getClassFactory(ou),uc=[v.Z.VIDEO,v.Z.AUDIO,v.Z.TEXT,v.Z.MUXED,v.Z.IMAGE];function Nr(L){L=L||{};var D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le=this.context,we=(0,m.Z)(Le).getInstance(),je=(0,_t.Z)(Le).getInstance(),Z=L.manifestModel,le=L.mediaPlayerModel,ae=L.dashMetrics,ue=L.manifestUpdater,Q=L.adapter,Me=L.timelineConverter,Ie=L.capabilities,ke=L.errHandler,Re=L.abrController,pe=L.playbackController,Ne=L.eventController,Ye=L.mediaController,dt=L.protectionController,at=L.textController,Je=L.videoModel,ht=L.streamInfo,Bt=L.settings;function Gt(It,Sn){return new Promise(function(En,Lt){Jt(),Ee=!0,Dn();var On=Je.getElement(),ut=[];uc.forEach(function(tt){(tt!==v.Z.TEXT||It)&&(tt!==v.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&ut.push(kt(tt,It))}),Promise.all(ut).then(function(){return tt=Sn,new Promise(function(qt){var Ke={},Ve=K.map(function(Mt){return Mt.createBufferSinks(tt)});Promise.all(Ve).then(function(Mt){Mt.forEach(function(fn){fn&&(Ke[fn.getType()]=fn)}),qt(Ke)}).catch(function(){qt(Ke)})});var tt}).then(function(tt){if(Ee=!1,K.length===0){var qt="No streams to play.";ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qt,Z.getValue())),B.fatal(qt)}else Nn();It&&at.createTracks(ht),En(tt)}).catch(function(tt){Lt(tt)})})}function kt(It,Sn){var En,Lt=Q.getAllMediaInfoForType(ht,It),On=[],ut=null;if(!Lt||Lt.length===0)return B.info("No "+It+" data."),Promise.resolve();It===v.Z.VIDEO&&(re=!0),It===v.Z.AUDIO&&(de=!0);for(var tt=0,qt=Lt.length;tt<qt;tt++)ut=Lt[tt],It===v.Z.TEXT&&ut.isEmbedded&&(at.addEmbeddedTrack(ht,ut),On.push(ut)),Ft(ut)&&Ye.addTrack(ut);if(On.length>0&&(Ye.setInitialMediaSettingsForType(It,ht),at.addMediaInfosToBuffer(ht,It,On)),Lt=Lt.filter(function(Ve){return!Ve.isEmbedded}),Lt.length===0)return Promise.resolve();if(It===v.Z.IMAGE)return(me=ra(Le).create({streamInfo:ht,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Be,eventBus:we,events:T.Z,dashConstants:y.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();we.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:ht,mediaInfo:ut}),Ye.setInitialMediaSettingsForType(It,ht);var Ke=function(Ve,Mt){var fn=Ve&&Ve.length>0?Ve[0]:null,Tn=ie.getModel(fn?fn.type:null),sr=fn?fn.type:null,Zr=fn?fn.mimeType:null,Ai=fn?fn.isFragmented:null,zr=hn(Le).create({streamInfo:ht,type:sr,mimeType:Zr,timelineConverter:Me,adapter:Q,manifestModel:Z,mediaPlayerModel:le,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:Re,playbackController:pe,mediaController:Ye,textController:at,errHandler:ke,settings:Bt,boxParser:De,segmentBlacklistController:ge});zr.initialize(Mt,re,Ai),K.push(zr);for(var io=0;io<Ve.length;io++)zr.addMediaInfo(Ve[io]);return sr===v.Z.TEXT&&at.addMediaInfosToBuffer(ht,sr,Ve,Tn),zr}(Lt,Sn);return(En=Ye.getCurrentTrackFor(It,ht.id))?(Re.updateTopQualityIndex(En),Ke.selectMediaInfo(It===v.Z.TEXT&&En.isEmbedded?Lt[0]:En)):Promise.resolve()}function Ft(It){var Sn,En=It?It.type:null;return En===v.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,Z.getValue())),!1):!(En!==v.Z.TEXT&&En!==v.Z.IMAGE&&It.contentProtection&&!Ie.supportsEncryptedMedia()&&(ke.error(new ce.Z(Ae.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ae.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(It){for(var Sn=K?K.length:0,En=0;En<Sn;En++){var Lt=K[En].getFragmentModel();Lt.abortRequests(),Lt.resetInitialSettings(),K[En].reset(!1,It)}at&&at.deactivateStream(ht),K=[],J=!1,H=!1,Fn(!1),mt(!1),we.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:ht})}function nt(It){An(It),ee=!1,re=!1,de=!1,Se={},Ee=!1,ze=!1,_e=[]}function mt(It){ze=It}function Wt(){return ht?ht.start:NaN}function Rt(){return ht?ht.id:null}function en(){return ht}function Jt(){if(!Je||!Re)throw new Error(v.Z.MISSING_CONFIG_ERROR)}function Yt(It){It.error&&(ke.error(It.error),B.fatal(It.error.message))}function Dn(){if(Ne){var It=Q.getEventsFor(ht);It&&It.length>0&&Ne.addInlineEvents(It,ht.id)}}function Nn(){for(var It=K.length,Sn=Se.audio||Se.video?new ce.Z(Ae.DATA_UPDATE_FAILED_ERROR_CODE,Ae.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<It;En++)if(K[En].isUpdating()||Ee)return;if(dt){dt.clearMediaInfoArray();for(var Lt=0;Lt<It&&K[Lt];Lt++){var On=K[Lt].getType(),ut=K[Lt].getMediaInfo();if(On===v.Z.AUDIO||On===v.Z.VIDEO||On===v.Z.TEXT&&ut.isFragmented){var tt=K[Lt].getMediaInfo();tt&&dt.initializeForMedia(tt)}}dt.handleKeySystemFromManifest()}Sn?ke.error(Sn):ee||(ee=!0,Je.waitForReadyState(v.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){we.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:ht})}))}function rr(){var It=un(),Sn=It.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!It[En].isBufferingCompleted()&&(It[En].getType()===v.Z.AUDIO||It[En].getType()===v.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",It[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,we.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:ht},{streamInfo:ht})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(It){Se[It.mediaType]=It.error,Nn()}function At(It){Ne&&Ne.addInbandEvents(It.events,ht.id)}function Xt(It){return It&&It.type?Zt(It.type):null}function Zt(It){return It?un().filter(function(Sn){return Sn.getType()===It})[0]:null}function un(){for(var It,Sn,En=[],Lt=0;Lt<K.length;Lt++)(It=(Sn=K[Lt]).getType())!==v.Z.AUDIO&&It!==v.Z.VIDEO&&It!==v.Z.TEXT||En.push(Sn);return En}function mn(It,Sn){var En=en(),Lt=Sn.getStreamInfo();if(!Lt||!En)return!0;var On=Q.getAdaptationForType(Lt.index,It,Lt),ut=Q.getAdaptationForType(En.index,It,En);return On&&ut?!(!Pn(ut)&&Pn(On)):!On&&!ut}function Pn(It){return!!It&&!!(It.ContentProtection||It.Representation_asArray&&It.Representation_asArray.length>0&&It.Representation_asArray[0].ContentProtection)}function xn(It,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!It||!It.hasOwnProperty("getStreamInfo"))return!1;var Lt=It.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Lt||!On)return!1;var ut=Q.getAdaptationForType(Lt.index,Sn,Lt),tt=Q.getAdaptationForType(On.index,Sn,On);if(!ut||!tt)return!ut&&!tt;var qt=ut&&tt&&ut.mimeType===tt.mimeType,Ke=tt.Representation_asArray.map(function(Tn){return Tn.codecs}),Ve=ut.Representation_asArray.map(function(Tn){return Tn.codecs}),Mt=Ve.some(function(Tn){return Ke.indexOf(Tn)>-1}),fn=Ve.some(function(Tn){return Ke.some(function(sr){return Ie.codecRootCompatibleWithCodec(sr,Tn)})});return Mt||fn&&qt}function Fn(It){qe=It}function Gn(){return qe}return D={initialize:function(){we.on(T.Z.BUFFERING_COMPLETED,rr,D),we.on(T.Z.DATA_UPDATE_COMPLETED,ir,D),we.on(T.Z.INBAND_EVENTS,At,D),dt&&(we.on(T.Z.KEY_ERROR,Yt,D),we.on(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,D),we.on(T.Z.LICENSE_REQUEST_COMPLETE,Yt,D),we.on(T.Z.KEY_SYSTEM_SELECTED,Yt,D),we.on(T.Z.KEY_SESSION_CREATED,Yt,D),we.on(T.Z.KEY_STATUSES_CHANGED,Yt,D)),at.initializeForStream(ht),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht})},getStreamId:function(){return ht?ht.id:null},activate:function(It,Sn){return new Promise(function(En,Lt){if(!J)return Gn()?(J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),void En(Sn)):void function(On,ut){return Gt(On,ut)}(It,Sn).then(function(On){J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),En(On)}).catch(function(On){Lt(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return ht?ht.duration:NaN},getStartTime:Wt,getId:Rt,getStreamInfo:en,getHasAudioTrack:function(){return de},getHasVideoTrack:function(){return re},startPreloading:function(It,Sn){return new Promise(function(En,Lt){Gn()?Lt():(B.info("[startPreloading] Preloading next stream with id ".concat(Rt())),Fn(!0),Gt(It,Sn).then(function(){for(var On=0;On<K.length&&K[On];On++)K[On].setExplicitBufferingTime(Wt()),K[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Lt()}))})},initializeForTextWithMediaSource:function(It){return new Promise(function(Sn,En){kt(v.Z.TEXT,It).then(function(){return(Lt=Zt(v.Z.TEXT))?Lt.createBufferSinks():Promise.resolve();var Lt}).then(function(){at.createTracks(ht),Sn()}).catch(function(Lt){En(Lt)})})},getThumbnailController:function(){return me},getBitrateListFor:function(It){if(Jt(),It===v.Z.IMAGE)return me?me.getBitrateList():[];var Sn=function(En){for(var Lt=null,On=0;On<K.length;On++)if((Lt=K[On]).getType()===En)return Lt.getMediaInfo();return null}(It);return Re.getBitrateList(Sn)},updateData:function(It){return new Promise(function(Sn){Ee=!0,ht=It,Ne&&Dn();for(var En=[],Lt=0,On=K.length;Lt<On;Lt++){var ut=K[Lt],tt=ut.getMediaInfo();En.push(ut.updateStreamInfo(ht));var qt=Q.getAllMediaInfoForType(ht,ut.getType());if(qt=qt.filter(function(Mt){return!Mt.isEmbedded})){ut.clearMediaInfoArray();for(var Ke=0;Ke<qt.length;Ke++){var Ve=qt[Ke];ut.addMediaInfo(qt[Ke]),Q.areMediaInfosEqual(tt,Ve)&&(Re.updateTopQualityIndex(Ve),En.push(ut.selectMediaInfo(Ve)))}}}Promise.all(En).then(function(){for(En=[];_e.length>0;){var Mt=_e.pop(),fn=Mt.newMediaInfo,Tn=Xt(Mt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(fn))}return Promise.all(En)}).then(function(){Ee=!1,Nn(),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht}),Sn()})})},reset:function(It){ie&&(ie.reset(),ie=null),Re&&ht&&Re.clearDataForStream(ht.id),ge&&(ge.reset(),ge=null),nt(It),ht=null,we.off(T.Z.DATA_UPDATE_COMPLETED,ir,D),we.off(T.Z.BUFFERING_COMPLETED,rr,D),we.off(T.Z.INBAND_EVENTS,At,D),dt&&(we.off(T.Z.KEY_ERROR,Yt,D),we.off(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,D),we.off(T.Z.LICENSE_REQUEST_COMPLETE,Yt,D),we.off(T.Z.KEY_SYSTEM_SELECTED,Yt,D),we.off(T.Z.KEY_SESSION_CREATED,Yt,D),we.off(T.Z.KEY_STATUSES_CHANGED,Yt,D))},getProcessors:un,setMediaSource:function(It){return new Promise(function(Sn,En){for(var Lt=[],On=0;On<K.length;)Ft(K[On].getMediaInfo())?(Lt.push(K[On].setMediaSource(It)),On++):(K[On].reset(),K.splice(On,1));Promise.all(Lt).then(function(){for(var ut=0;ut<K.length;ut++)K[ut].dischargePreBuffer();if(K.length===0){var tt="No streams to play.";ke.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,tt+"nostreams",Z.getValue())),B.fatal(tt)}Sn()}).catch(function(ut){B.error(ut),En(ut)})})},isMediaCodecCompatible:function(It){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return xn(It,v.Z.VIDEO,Sn)&&xn(It,v.Z.AUDIO,Sn)},isProtectionCompatible:function(It){return!It||mn(v.Z.VIDEO,It)&&mn(v.Z.AUDIO,It)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return ze},setIsEndedEventSignaled:mt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var It=K.length,Sn=0;Sn<It&&K[Sn];Sn++)K[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(It){if(J&&ht){H=!1;var Sn=It.newMediaInfo,En=Z.getValue();Q.setCurrentMediaInfo(ht.id,Sn.type,Sn);var Lt=Xt(Sn);if(Lt){var On=pe.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(_e.push(It),ue.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),ue.refreshManifest())):Lt.selectMediaInfo(Sn).then(function(){Sn.type!==v.Z.VIDEO&&Sn.type!==v.Z.AUDIO||Re.updateTopQualityIndex(Sn),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function(It){var Sn=Zt(It.mediaType);Sn&&Sn.prepareQualityChange(It)}},function(){try{Be=(0,x.Z)(Le).getInstance(),B=Be.getLogger(D),nt(),De=(0,ia.Z)(Le).getInstance(),ge=hs(Le).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=ds(Le).create({streamInfo:ht,mediaPlayerModel:le,dashMetrics:ae,errHandler:ke,settings:Bt,boxParser:De,dashConstants:y.Z,urlUtils:je})}catch(It){throw It}}(),D}Nr.__dashjs_factory_name="Stream";var ps=U.Z.getClassFactory(Nr),gs=function L(D){(function(B,K){if(!(B instanceof K))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=D||null,this.type=it.w.CONTENT_STEERING_TYPE,this.responseType="json"},Yr=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function lc(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De=this.context,Be=(0,_t.Z)(De).getInstance();function ze(Re){Z(Re,"baseUrl")}function _e(Re){Z(Re,"location")}function Le(Re){if(Re&&Re.request&&Re.request.serviceLocation&&Re.request.requestStartDate&&Re.request.requestEndDate&&!isNaN(Re.request.bytesTotal)){var pe=Re.request.serviceLocation,Ne=Re.request.requestEndDate.getTime()-Re.request.requestStartDate.getTime();je(pe,parseInt(8*Re.request.bytesTotal/Ne*1e3))}}function we(Re){Re&&Re.httpRequest&&Re.httpRequest._serviceLocation&&!isNaN(Re.throughput)&&je(Re.httpRequest._serviceLocation,1e3*Re.throughput)}function je(Re,pe){ee[Re]||(ee[Re]=[]),ee[Re].push(pe),ee[Re].length>4&&ee[Re].shift()}function Z(Re,pe){if(Re&&Re.request&&Re.request.serviceLocation){var Ne=Re.request.serviceLocation;K[pe].all.indexOf(Ne)===-1&&K[pe].all.push(Ne),K[pe].current=Ne}}function le(){var Re=Ee.getValue(),pe=qe.getContentSteering(Re);return pe||(pe=me.getServiceDescriptionSettings().contentSteering),pe}function ae(){return new Promise(function(Re){try{var pe=le();if(!pe||!pe.serverUrl)return void Re();var Ne=function(dt){var at=dt.serverUrl;B&&B.reloadUri&&(at=Be.isRelative(B.reloadUri)?Be.resolve(B.reloadUri,dt.serverUrl):B.reloadUri);var Je=[],ht=K.baseUrl.all.concat(K.location.all);if(ht.length>0){var Bt=ht.map(function(Ft){var An=function(nt){if(!nt||!ee[nt]||ee[nt].length===0)return-1;var mt=ee[nt].reduce(function(Wt,Rt){return Wt+Rt})/ee[nt].length;return parseInt(mt)}(Ft);return{serviceLocation:Ft,throughput:An}});Bt.sort(function(Ft,An){return An.throughput-Ft.throughput});var Gt="",kt="";Bt.forEach(function(Ft,An){An!==0&&(Gt="".concat(Gt,","),Ft.throughput>-1&&(kt="".concat(kt,","))),Gt="".concat(Gt).concat(Ft.serviceLocation),Ft.throughput>-1&&(kt="".concat(kt).concat(Ft.throughput))}),Je.push({key:"_DASH_pathway",value:'"'.concat(Gt,'"')}),Je.push({key:"_DASH_throughput",value:kt})}return at=rn.Z.addAditionalQueryParameterToUrl(at,Je)}(pe),Ye=new gs(Ne);H.load({request:Ye,success:function(dt){(function(at){at&&at[y.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(at[y.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Yr).version=at[y.Z.CONTENT_STEERING_RESPONSE.VERSION],at[y.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(at[y.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=at[y.Z.CONTENT_STEERING_RESPONSE.TTL]),at[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=at[y.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),at[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=at[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),at[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=at[y.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(Je){return function(ht){return ht[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&ht[y.Z.CONTENT_STEERING_RESPONSE.ID]&&ht[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ht[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST]}(Je)})),Me())})(dt),ge.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:Ne}),Re()},error:function(dt,at,Je,ht){(function(Bt,Gt){try{switch(D.warn("Error fetching data from content steering server",Bt),Gt.status){case 410:break;case 429:var kt=Gt&&Gt.getResponseHeader?Gt.getResponseHeader("retry-after"):null;kt!==null&&(B||(B={}),B.ttl=parseInt(kt)),Me();break;default:Me()}}catch(Ft){D.error(Ft)}})(dt,ht),Re(dt)},complete:function(){K.baseUrl.all=ue(K.baseUrl),K.location.all=ue(K.location)}})}catch(dt){Re(dt)}})}function ue(Re){return Re.all&&Re.all.length!==0&&Re.current?Re.all.filter(function(pe){return pe===Re.current}):[]}function Q(Re){try{var pe=[];return Re&&Re.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(Ne){var Ye=Re.filter(function(Bt){return Ne[y.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Bt.serviceLocation}),dt=null;if(Ye&&Ye.length>0&&(dt=Ye[0]),dt){var at=new URL(dt.url),Je=Ne[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.HOST];Je=rn.Z.stringHasProtocol(Je)?Je:"".concat(at.protocol,"//").concat(Je);var ht={synthesizedUrl:"".concat(Je).concat(at.pathname),serviceLocation:Ne[y.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Ne[y.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][y.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:dt};pe.push(ht)}}),pe}catch(Ne){return D.error(Ne),[]}}function Me(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function Ie(){J&&clearTimeout(J),J=null}function ke(){B=null,ee={},K={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Ie()}return L={reset:function(){ke(),ge.off(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.off(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.off(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)},setConfig:function(Re){Re&&(Re.adapter&&(qe=Re.adapter),Re.errHandler&&(re=Re.errHandler),Re.dashMetrics&&(de=Re.dashMetrics),Re.mediaPlayerModel&&(Se=Re.mediaPlayerModel),Re.requestModifier&&(ie=Re.requestModifier),Re.manifestModel&&(Ee=Re.manifestModel),Re.serviceDescriptionController&&(me=Re.serviceDescriptionController),Re.eventBus&&(ge=Re.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var Re=le();return!!Re&&Re.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:Ie,getSynthesizedBaseUrlElements:function(Re){try{return Q(Re).map(function(pe){var Ne=new Qn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne.dvbPriority=pe.reference.dvbPriority,Ne.dvbWeight=pe.reference.dvbWeight,Ne.availabilityTimeOffset=pe.reference.availabilityTimeOffset,Ne.availabilityTimeComplete=pe.reference.availabilityTimeComplete,Ne})}catch(pe){return D.error(pe),[]}},getSynthesizedLocationElements:function(Re){try{return Q(Re).map(function(pe){var Ne=new Zn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne})}catch(pe){return D.error(pe),[]}},initialize:function(){H=wo(De).create({errHandler:re,dashMetrics:de,mediaPlayerModel:Se,requestModifier:ie,errors:Ae}),ge.on(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.on(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.on(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)}},D=(0,x.Z)(De).getInstance().getLogger(L),ke(),L}lc.__dashjs_factory_name="ContentSteeringController";var Ta=U.Z.getSingletonFactory(lc);function vl(){var L,D,B,K=this.context,ee=(0,Ze.Z)(K).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(re){var de=B.getCurrentSteeringResponseData();return de&&de.pathwayPriority&&de.pathwayPriority.length>0?function(){for(var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,me=null,ge=function(){var qe=Se[ie],De=Ee.findIndex(function(Be){return Be.serviceLocation&&Be.serviceLocation===qe});if(De!==-1&&!D.contains(Ee[De].serviceLocation))return me=Ee[De],"break";ie+=1};ie<Se.length&&ge()!=="break";);return me}(de.pathwayPriority,re):null}(J)),H||(H=function(re){return re[0]}(J)),H},setConfig:function(J){J.blacklistController&&(D=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){D.reset()}},D=hs(K).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Ta(K).getInstance(),L}vl.__dashjs_factory_name="LocationSelector";var oa=U.Z.getClassFactory(vl);function ms(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=(0,_t.Z)(qe).getInstance();function ze(){B=NaN,H=!1,ee=!0,J=!1,_e()}function _e(){K!==null&&(clearTimeout(K),K=null)}function Le(Ie){_e(),J||(isNaN(Ie)&&!isNaN(B)&&(Ie=1e3*B),isNaN(Ie)||(D.debug("Refresh manifest in "+Ie+" milliseconds."),K=setTimeout(le,Ie)))}function we(){var Ie=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var ke=de.getValue(),Re=ke.url,pe=null,Ne=Ee.getPatchLocation(ke),Ye=Se.select(Ne),dt=null;if(Ye&&!Ie)Re=Ye.url,pe=Ye.serviceLocation,dt=Ye.queryParams;else{var at=je(ke),Je=Se.select(at);Je&&(Re=Je.url,pe=Je.serviceLocation,dt=Je.queryParams)}Be.isRelative(Re)&&(Re=Be.resolve(Re,ke.url)),re.load(Re,pe,dt)}function je(Ie){var ke=Ee.getLocation(Ie),Re=me.getSynthesizedLocationElements(ke);return ke.concat(Re)}function Z(Ie){if(Ie){if(Ee.getIsPatch(Ie)){var ke=Ie;Ie=de.getValue();var Re=Ee.isPatchValid(Ie,ke),pe=Re;if(Re){var Ne=Ee.getPublishTime(Ie);pe=Ee.applyPatchToManifest(Ie,ke);var Ye=Ee.getPublishTime(Ie);pe=Ne.getTime()!=Ye.getTime()}if(!pe)return D.debug("Patch provided is invalid, performing full manifest refresh"),void we(!0);Ie.loadedTime=new Date}}else(Ie=de.getValue()).loadedTime=new Date;if(de.getValue()&&de.getValue().type===y.Z.DYNAMIC&&Ie.type===y.Z.STATIC)return De.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);de.setValue(Ie);var dt=new Date,at=(dt.getTime()-Ie.loadedTime.getTime())/1e3;1e3*(B=Ee.getManifestUpdatePeriod(Ie,at))>2147483647&&(B=2147483647e-3),De.trigger(T.Z.MANIFEST_UPDATED,{manifest:Ie}),D.info("Manifest has been refreshed at "+dt+"["+dt.getTime()/1e3+"] "),ee||Le()}function le(){ee||(H?Le(ge.get().streaming.manifestUpdateRetryInterval):we())}function ae(Ie){Ie.error?Ie.error.code===Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(Ie.error):Z(Ie.manifest)}function ue(){ee=!1,Le()}function Q(){(ee=!ge.get().streaming.scheduling.scheduleWhilePaused)&&_e()}function Me(){H=!1}return L={initialize:function(){ze(),De.on(T.Z.STREAMS_COMPOSED,Me,this),De.on(_.Z.PLAYBACK_STARTED,ue,this),De.on(_.Z.PLAYBACK_PAUSED,Q,this),De.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(Ie){Z(Ie)},refreshManifest:we,getIsUpdating:function(){return H},setConfig:function(Ie){Ie&&(Ie.manifestModel&&(de=Ie.manifestModel),Ie.adapter&&(Ee=Ie.adapter),Ie.manifestLoader&&(re=Ie.manifestLoader),Ie.errHandler&&(ie=Ie.errHandler),Ie.locationSelector&&(Se=Ie.locationSelector),Ie.settings&&(ge=Ie.settings),Ie.contentSteeringController&&(me=Ie.contentSteeringController))},reset:function(){De.off(_.Z.PLAYBACK_STARTED,ue,this),De.off(_.Z.PLAYBACK_PAUSED,Q,this),De.off(T.Z.STREAMS_COMPOSED,Me,this),De.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),ze()}},D=(0,x.Z)(qe).getInstance().getLogger(L),Se=oa(qe).create(),L}ms.__dashjs_factory_name="ManifestUpdater";var Kr=U.Z.getClassFactory(ms);function Za(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),_e=(0,_t.Z)(Be).getInstance();function Le(){re=[],de=[],Se=null,Ee=null,me=null,ie=NaN,B=!1,K=!1,ge=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function we(){ee.get().streaming.utcSynchronization.enabled&&!B&&!K&&me&&me.value&&me.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(Ee&&(Date.now()-Ee)/1e3<30||(re=[],K=!0,je(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function je(Je){try{if(Je<=0)return void dt();var ht=Date.now();J[me.schemeIdUri](me.value,function(Bt){var Gt=Date.now(),kt=le(ht,Gt,Bt);re.push(kt),je(Je-1)},function(){dt()})}catch(Bt){dt()}}function Z(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ht=Je||0;if(!de||de.length===0||ht>=de.length)ae();else{var Bt=de[ht];if(Bt)if(J.hasOwnProperty(Bt.schemeIdUri)){var Gt=new Date().getTime();J[Bt.schemeIdUri](Bt.value,function(kt){var Ft=new Date().getTime(),An=le(Gt,Ft,kt);me=Bt,ae(An)},function(){Z(ht+1)})}else Z(ht+1);else ae()}}function le(Je,ht,Bt){return Bt-(ht-(ht-Je)/2)}function ae(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ht=isNaN(Je);ht&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Ne():Ye(ht,Je)}function ue(Je){var ht=Date.parse(Je);return isNaN(ht)&&(ht=function(Bt){var Gt,kt,Ft=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Bt);return Gt=Date.UTC(parseInt(Ft[1],10),parseInt(Ft[2],10)-1,parseInt(Ft[3],10),parseInt(Ft[4],10),parseInt(Ft[5],10),Ft[6]&&(parseInt(Ft[6],10)||0),Ft[7]&&1e3*parseFloat(Ft[7])||0),Ft[9]&&Ft[10]&&(kt=60*parseInt(Ft[9],10)+parseInt(Ft[10],10),Gt+=(Ft[8]==="+"?-1:1)*kt*60*1e3),new Date(Gt).getTime()}(Je)),ht}function Q(Je){return Date.parse(Je)}function Me(Je){return Date.parse(Je)}function Ie(Je,ht,Bt){Bt()}function ke(Je,ht,Bt){var Gt=ue(Je);isNaN(Gt)?Bt():ht(Gt)}function Re(Je,ht,Bt,Gt,kt){var Ft,An,nt=!1,mt=new XMLHttpRequest,Wt=kt?it.w.HEAD:it.w.GET,Rt=ht.match(/\S+/g);if(ht=Rt.shift(),Ft=function(){nt||(nt=!0,Rt.length?Re(Je,Rt.join(" "),Bt,Gt,kt):Gt())},An=function(){var Jt,Yt;mt.status===200&&(Jt=kt?mt.getResponseHeader("Date"):mt.response,Yt=Je(Jt),isNaN(Yt)||(Bt(Yt),nt=!0))},_e.isRelative(ht)){var en=De.resolve();en&&(ht=_e.resolve(ht,en.url))}mt.open(Wt,ht),mt.timeout=5e3,mt.onload=An,mt.onloadend=Ft,mt.send()}function pe(Je,ht,Bt){Re(Me,Je,ht,Bt,!0)}function Ne(){var Je=H.getLatestMPDRequestHeaderValueByID("Date"),ht=Je!==null?new Date(Je).getTime():Number.NaN;isNaN(ht)?Ye(!0):Ye(!1,ht-Date.now())}function Ye(Je,ht){if(isNaN(ie)||isNaN(ht)||Je||function(Gt){try{var kt,Ft=at(Gt),An=isNaN(ge)?30:ge,nt=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,mt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Wt=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ft?(kt=Math.min(An*nt,mt),D.debug("Increasing timeBetweenSyncAttempts to ".concat(kt))):(kt=Math.max(An/nt,Wt),D.debug("Decreasing timeBetweenSyncAttempts to ".concat(kt))),ge=kt}catch(Rt){}}(ht),!Je&&!isNaN(ht)){Se=Date.now(),B=!1;var Bt=isNaN(ie);ie=ht,Bt&&we(),D.debug("Completed UTC sync. Setting client - server offset to ".concat(ht))}Je&&(me=null,B=!1,qe.error(new ce.Z(Ae.TIME_SYNC_FAILED_ERROR_CODE,Ae.TIME_SYNC_FAILED_ERROR_MESSAGE))),ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ht}),ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function dt(){if(re&&re.length!==0){var Je=re.reduce(function(ht,Bt){return ht+Bt},0)/re.length;at(Je)?D.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(D.debug("Completed background UTC sync. Setting client - server offset to ".concat(Je)),ie=Je,ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),K=!1,Ee=Date.now()}}function at(Je){try{if(isNaN(ie))return!0;var ht=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Je>=ie-ht&&Je<=ie+ht}catch(Bt){return!0}}return L={initialize:function(){Le(),J={"urn:mpeg:dash:utc:http-head:2014":pe,"urn:mpeg:dash:utc:http-xsdate:2014":Re.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2014":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":ke,"urn:mpeg:dash:utc:http-head:2012":pe,"urn:mpeg:dash:utc:http-xsdate:2012":Re.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2012":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":ke,"urn:mpeg:dash:utc:http-ntp:2014":Ie,"urn:mpeg:dash:utc:ntp:2014":Ie,"urn:mpeg:dash:utc:sntp:2014":Ie}},attemptSync:function(Je,ht){de=Je,B||(function(Bt){try{if(!Bt||!ee.get().streaming.utcSynchronization.enabled)return!1;var Gt=isNaN(ge)?30:ge;return!(Se&&Gt&&!isNaN(Gt))||(Date.now()-Se)/1e3>=Gt}catch(kt){return!0}}(ht)?(B=!0,Z()):ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Je){Je&&(Je.dashMetrics&&(H=Je.dashMetrics),Je.baseURLController&&(De=Je.baseURLController),Je.errHandler&&(qe=Je.errHandler),Je.settings&&(ee=Je.settings))},reset:function(){Le(),ze.off(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L)}},D=(0,x.Z)(Be).getInstance().getLogger(L),ze.on(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L),L}Za.__dashjs_factory_name="TimeSyncController";var Ga=U.Z.getSingletonFactory(Za);Ga.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(Za.__dashjs_factory_name,Ga);var qa=Ga;function mf(){var L,D,B,K,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(re){var de=window.URL.createObjectURL(D);return re.setSource(de),K==="managedMediaSource"&&(re.setDisableRemotePlayback(!0),D.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),D.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),de},createMediaSource:function(){var re="WebKitMediaSource"in window,de="MediaSource"in window;return"ManagedMediaSource"in window?(D=new ManagedMediaSource,K="managedMediaSource",ee.info("Created ManagedMediaSource")):de?(D=new MediaSource,K="mediaSource",ee.info("Created MediaSource")):re&&(D=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),D},detachMediaSource:function(re){re.setSource(null)},setConfig:function(re){re&&re.settings&&(B=re.settings)},setDuration:function re(de){D&&D.readyState==="open"&&(de===null&&isNaN(de)||D.duration!==de&&(de!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(de=Math.pow(2,32)),function(Se){for(var Ee=Se.sourceBuffers,ie=0;ie<Ee.length;ie++)if(Ee[ie].updating)return!0;return!1}(D)?setTimeout(re.bind(null,de),50):(ee.info("Set MediaSource duration:"+de),D.duration=de)))},setSeekable:function(re,de){D&&typeof D.setLiveSeekableRange=="function"&&typeof D.clearLiveSeekableRange=="function"&&D.readyState==="open"&&re>=0&&re<de&&(D.clearLiveSeekableRange(),D.setLiveSeekableRange(re,de))},signalEndOfStream:function(re){if(re&&re.readyState==="open"){for(var de=re.sourceBuffers,Se=0;Se<de.length;Se++)if(de[Se].updating||de[Se].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),re.endOfStream()}}},ee=(0,x.Z)(J).getInstance().getLogger(L),L}mf.__dashjs_factory_name="MediaSourceController";var uh=U.Z.getSingletonFactory(mf);function Io(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie="urn:mpeg:dash:event:2012",me="discarded",ge="updated",qe="added",De=this.context,Be=(0,m.Z)(De).getInstance();function ze(){if(!H||!re)throw new Error("setConfig function has to be called previously")}function _e(){Ee=!1,B={},K={},ee=null,Se=!1,J=Date.now()/1e3}function Le(){try{if(!Se){Se=!0;var Ie=re.getTime(),ke=Ie-J;ke=J>0?Math.max(0,ke):0,we(K,ke,Ie),we(B,ke,Ie),je(K),je(B),J=Ie,Se=!1}}catch(Re){Se=!1,D.error(Re)}}function we(Ie,ke,Re){try{ue(Ie,function(pe){if(pe!==void 0){var Ne=isNaN(pe.duration)?0:pe.duration;pe.calculatedPresentationTime<=Re&&pe.calculatedPresentationTime+ke+Ne>=Re?Me(pe,_.Z.EVENT_MODE_ON_START):(Q(Re,Ne+ke,pe.calculatedPresentationTime)||function(Ye){try{var dt=Ye.eventStream.period.start+Ye.eventStream.period.duration;return Ye.calculatedPresentationTime>dt}catch(at){return D.error(at),!1}}(pe))&&(D.debug("Removing event ".concat(pe.id," from period ").concat(pe.eventStream.period.id," as it is expired or invalid")),function(Ye,dt){try{var at=dt.eventStream.schemeIdUri,Je=dt.eventStream.period.id,ht=dt.eventStream.value,Bt=dt.id;Ye[Je][at]=Ye[Je][at].filter(function(Gt){return ht&&Gt.eventStream.value&&Gt.eventStream.value!==ht||Gt.id!==Bt}),Ye[Je][at].length===0&&delete Ye[Je][at]}catch(Gt){D.error(Gt)}}(Ie,pe))}})}catch(pe){D.error(pe)}}function je(Ie){try{for(var ke in Ie)Ie.hasOwnProperty(ke)&&Object.keys(Ie[ke]).length===0&&delete Ie[ke]}catch(Re){D.error(Re)}}function Z(Ie,ke){var Re=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pe=Ie.eventStream.schemeIdUri,Ne=Ie.eventStream.value,Ye=Ie.id,dt=me;ke[pe]||(ke[pe]=[]);var at=ke[pe].findIndex(function(ht){return(!Ne||ht.eventStream.value&&ht.eventStream.value===Ne)&&ht.id===Ye});if(at===-1)ke[pe].push(Ie),Ie.triggeredReceivedEvent=!1,Ie.triggeredStartEvent=!1,dt=qe;else if(Re){var Je=ke[pe][at];Ie.triggeredReceivedEvent=Je.triggeredReceivedEvent,Ie.triggeredStartEvent=Je.triggeredStartEvent,ke[pe][at]=Ie,dt=ge}return dt}function le(Ie){try{if(Ie.eventStream.value==1){var ke,Re=Ie.calculatedPresentationTime;ke=Ie.calculatedPresentationTime==4294967295?NaN:Ie.calculatedPresentationTime+Ie.duration,Be.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:Ie.id,validUntil:Re,newDuration:ke,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(pe){D.error(pe)}}function ae(Ie){try{var ke=re.getTime();ue(Ie,function(Re){var pe=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.duration)?Re.eventStream.period.duration:NaN,Ne=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.start)?Re.eventStream.period.start:NaN;if(!isNaN(pe)&&!isNaN(Ne)){var Ye=Re.calculatedPresentationTime;Math.abs(Ye-ke)<300&&Me(Re,_.Z.EVENT_MODE_ON_START)}})}catch(Re){D.error(Re)}}function ue(Ie,ke){try{if(Ie)for(var Re=Object.keys(Ie),pe=0;pe<Re.length;pe++)for(var Ne=Ie[Re[pe]],Ye=Object.keys(Ne),dt=0;dt<Ye.length;dt++)Ne[Ye[dt]].forEach(function(at){at!==void 0&&ke(at)})}catch(at){D.error(at)}}function Q(Ie,ke,Re){try{return Ie-ke>Re}catch(pe){return D.error(pe),!1}}function Me(Ie,ke){try{var Re=re.getTime(),pe=Ie.id;if(ke===_.Z.EVENT_MODE_ON_RECEIVE&&!Ie.triggeredReceivedEvent)return D.debug("Received event ".concat(pe)),Ie.triggeredReceivedEvent=!0,void Be.trigger(Ie.eventStream.schemeIdUri,{event:Ie},{mode:ke});Ie.triggeredStartEvent||(Ie.eventStream.schemeIdUri===ie&&Ie.eventStream.value==1?Ie.duration===0&&Ie.presentationTimeDelta===0||(D.debug("Starting manifest refresh event ".concat(pe," at ").concat(Re)),function(){try{ze(),H.refreshManifest()}catch(Ne){D.error(Ne)}}()):Ie.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&Ie.eventStream.value==1?(D.debug("Starting callback event ".concat(pe," at ").concat(Re)),function(Ne){try{(0,nn.Z)(De).create({}).load({method:"get",url:Ne,request:{responseType:"arraybuffer"}})}catch(Ye){D.error(Ye)}}(Ie.messageData)):(D.debug("Starting event ".concat(pe," from period ").concat(Ie.eventStream.period.id," at ").concat(Re)),Be.trigger(Ie.eventStream.schemeIdUri,{event:Ie},{mode:ke})),Ie.triggeredStartEvent=!0)}catch(Ne){D.error(Ne)}}return L={addInlineEvents:function(Ie,ke){try{if(ze(),B[ke]||(B[ke]={}),Ie)for(var Re=0;Re<Ie.length;Re++){var pe=Ie[Re];if(!Q(re.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)){var Ne=Z(pe,B[ke],!0);Ne===qe?(D.debug("Added inline event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):Ne===ge&&D.debug("Updated inline event with id ".concat(pe.id," from period ").concat(ke))}}}catch(Ye){throw Ye}},addInbandEvents:function(Ie,ke){try{ze(),K[ke]||(K[ke]={});for(var Re=0;Re<Ie.length;Re++){var pe=Ie[Re];Q(re.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)||(Z(pe,K[ke],!1)===qe?(pe.eventStream.schemeIdUri===ie&&le(pe),D.debug("Added inband event with id ".concat(pe.id," from period ").concat(ke)),Me(pe,_.Z.EVENT_MODE_ON_RECEIVE)):D.debug("Inband event with scheme_id_uri ".concat(pe.eventStream.schemeIdUri,", value ").concat(pe.eventStream.value,", period id ").concat(ke," and event id ").concat(pe.id," was ignored because it has been added before.")))}Le()}catch(Ne){throw Ne}},getInbandEvents:function(){return K},getInlineEvents:function(){return B},start:function(){try{ze(),D.debug("Start Event Controller");var Ie=de.get().streaming.eventControllerRefreshDelay;Ee||isNaN(Ie)||(Ee=!0,ee=setInterval(Le,Ie))}catch(ke){throw ke}},setConfig:function(Ie){try{if(!Ie)return;Ie.manifestUpdater&&(H=Ie.manifestUpdater),Ie.playbackController&&(re=Ie.playbackController),Ie.settings&&(de=Ie.settings)}catch(ke){throw ke}},reset:function(){(function(){try{ee!==null&&Ee&&(clearInterval(ee),ee=null,Ee=!1,function(){try{ae(K),ae(B)}catch(Ie){D.error(Ie)}}())}catch(Ie){throw Ie}})(),_e()}},D=(0,x.Z)(De).getInstance().getLogger(L),_e(),L}Io.__dashjs_factory_name="EventController";var Fg=U.Z.getSingletonFactory(Io),Pi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function yf(L,D){(D==null||D>L.length)&&(D=L.length);for(var B=0,K=new Array(D);B<D;B++)K[B]=L[B];return K}function au(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,ue,Q,Me,Ie,ke,Re,pe,Ne,Ye,dt,at,Je,ht,Bt,Gt,kt,Ft,An,nt,mt,Wt,Rt,en,Jt=this.context,Yt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&we&&we.hasOwnProperty("initialize")&&we.hasOwnProperty("reset")&&we.hasOwnProperty("getClientTimeOffset")&&H&&Le&&de&&Ne))throw new Error(v.Z.MISSING_CONFIG_ERROR)}function Nn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Dt=re.getStreamsInfo();if(!Z&&Dt.length===0)throw new Error("There are no periods in the MPD");Z&&Dt.length>0&&de.updateManifestUpdateInfo({currentTime:Ne.getTime(),buffered:pe.getBufferRange(),presentationStartTime:Dt[0].start,clientTimeOffset:we.getClientTimeOffset()}),je.length>0&&function(Ir){Ir.length!==0?je=je.filter(function(fr){var ri=Ir.filter(function(Qr){return Qr.id===fr.getId()}).length>0||fr.getId()===Z.getId();return ri||(D.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ri}):D.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Dt);for(var yn=[],Hn=0,ur=Dt.length;Hn<ur;Hn++){var Tr=Dt[Hn];yn.push(At(Tr)),de.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){Z?Ir():Xt(Dt,Ir,fr)})}).then(function(){Yt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){Le.error(new ce.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),ke=!0,Wa()}})()}function ir(){mt=!0}function At(Dt){var yn=Rc(Dt.id);return yn?yn.updateData(Dt):(yn=ps(Jt).create({manifestModel:H,mediaPlayerModel:dt,dashMetrics:de,manifestUpdater:ee,adapter:re,timelineConverter:we,capabilities:B,capabilitiesFilter:K,errHandler:Le,baseURLController:me,segmentBaseController:ge,textController:ae,abrController:De,playbackController:Ne,eventController:ze,mediaController:Be,protectionController:le,videoModel:pe,streamInfo:Dt,settings:nt}),je.push(yn),yn.initialize(),Promise.resolve())}function Xt(Dt,yn,Hn){try{On();var ur=de.getCurrentDVRInfo().range;if(ur.end<ur.start){Wt&&clearTimeout(Wt);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return D.debug("Waiting for ".concat(Tr," ms before playback can start")),Yt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void(Wt=setTimeout(function(){Xt(Dt,yn,Hn)},Tr))}nt.get().streaming.applyProducerReferenceTime&&Ye.calculateProducerReferenceTimeOffsets(Dt);var Ir=Dt[0].manifestInfo;if(nt.get().streaming.applyServiceDescription&&Ye.applyServiceDescription(Ir),re.getIsDynamic()){var fr=Ku(Dt,Ir);Ne.computeAndSetLiveDelay(fr,Ir)}(nt.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ri=H.getValue();ri&&me.update(ri),Zt(),yn()}).catch(function(ri){D.error(ri),Zt(),yn()})}catch(ri){Hn(ri)}}function Zt(){var Dt=function(){var ur;if(re.getIsDynamic()){var Tr=de.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-Ne.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(Rt)&&Rt.toString().indexOf("posix:")===-1){var fr=io(!0);isNaN(fr)||(D.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{D.info("Start time provided by the app: ".concat(Rt));var ri=Zi(!0,Rt);isNaN(ri)||(ur=Math.min(ur,ri))}var Qr=nt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Qr)}}else if(ur=Us()[0].getStreamInfo().start,isNaN(Rt)){var Bs=io(!1);isNaN(Bs)||(D.info("Start time from URI parameters: ".concat(Bs)),ur=Math.max(ur,Bs))}else{D.info("Start time provided by the app: ".concat(Rt));var js=Zi(!1,Rt);isNaN(js)||(ur=Math.max(ur,js))}return ur}(),yn=Lt(Dt),Hn=yn!==null?yn:je[0];Yt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Dt}),un(Hn,null,Dt),Gt||(Gt=setInterval(function(){!Me&&Ne.getTimeToStreamEnd()<=0&&!Ne.isSeeking()&&Yt.trigger(T.Z.PLAYBACK_ENDED,{isLast:la().isLast})},200))}function un(Dt,yn,Hn){try{if(Me||!Dt||yn===Dt&&Dt.getIsActive())return;Me=!0,Yt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Dt.getStreamInfo()});var ur=!1;Z=Dt,yn&&(ur=Sn(Dt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Dt.getStreamInfo().start:NaN:Hn,D.info("Switch to stream ".concat(Dt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(Ne.getTime(),". Seamless period switch is set to ").concat(ur)),Ft=Ft.filter(function(Tr){return Tr.getId()!==Z.getId()}),Ne.initialize(la(),!!yn),pe.getElement()?mn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Me=!1}}function mn(Dt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(Re&&Re.readyState==="open"){D.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),Re.removeEventListener("sourceopen",Tr),Re.removeEventListener("webkitsourceopen",Tr),zr();var fr=de.getCurrentDVRInfo();Se.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Dt)||Ne.seek(Dt,!0,!0),Z.setMediaSource(Re).then(function(){Z.initializeForTextWithMediaSource(Re)})):Pn(Dt,yn)}}function Ir(){Re.addEventListener("sourceopen",Tr,!1),Re.addEventListener("webkitsourceopen",Tr,!1),Hn=Se.attachMediaSource(pe),D.debug("MediaSource attached to element.  Waiting on open...")}Re?yn?Pn(Dt,yn):(Se.detachMediaSource(pe),Ir()):(Re=Se.createMediaSource(),Ir())}function Pn(Dt,yn){Z.activate(Re,yn?kt:void 0,Dt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),kt=Hn}isNaN(Dt)||(Yt.trigger(T.Z.SEEK_TARGET,{time:Dt},{streamId:Z.getId()}),Ne.seek(Dt,!1,!0),Z.startScheduleControllers()),Me=!1,Yt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:la()})})}function xn(Dt){var yn=Lt(Dt.seekTime);yn&&yn!==Z?yn&&yn!==Z&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=Z.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,Z,Tr)}).catch(function(fr){Le.error(fr)})}(Dt,yn)):(Fn(),function(Hn){Z.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Po(et.USER_REQUEST_STOP_REASON)}(Dt)),pu(rt.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ft&&Ft.length>0&&(Ft.forEach(function(Dt){Dt.deactivate(!0)}),Ft=[])}function It(Dt){if(Dt.newMediaInfo.streamInfo.id===Z.getId()){if(Gn(),nt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Dt.oldMediaInfo&&Dt.oldMediaInfo.codec!==Dt.newMediaInfo.codec){var yn=Ne.getTime();return Z.deactivate(!1),void mn(yn,!1,!1)}Z.prepareTrackChange(Dt)}}function Sn(Dt,yn){try{return nt.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Dt)||mt)&&(An&&nt.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Dt,yn))}catch(Hn){return!1}}function En(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Re&&!Dt.getPreloaded()){var Hn=Sn(Dt,yn);Hn&&Dt.startPreloading(Re,kt).then(function(){Ft.push(Dt)})}}function Lt(Dt){if(isNaN(Dt))return null;for(var yn=je.length,Hn=0;Hn<yn;Hn++){var ur=je[Hn];if(Dt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Dt=re.getIsDynamic(),yn=re.getStreamsInfo()[0].manifestInfo,Hn=Ne.getTime(),ur=we.calcTimeShiftBufferWindow(je,Dt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){de.addDVRInfo(Ir.getType(),Hn,yn,ur)}):de.addDVRInfo(v.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function ut(Dt){if(ht&&Q){var yn=dt.getInitialBufferLevel(),Hn=[v.Z.TEXT];(isNaN(yn)||yn<=Ne.getBufferLevel(Hn)||re.getIsDynamic()&&yn>Ne.getLiveDelay())&&(ht=!1,pu(rt.INITIAL_PLAYOUT_START_REASON),Ne.play())}Dt&&Dt.mediaType&&de.addBufferLevel(Dt.mediaType,new Date,1e3*Dt.bufferLevel)}function tt(Dt){Dt.streamInfo.id===Z.getId()&&Dt.reason&&Dt.reason.forceReplace&&Gn(),Rc(Dt.streamInfo.id).prepareQualityChange(Dt)}function qt(){if(re.getIsDynamic()&&Ne.getOriginalLiveDelay()!==0&&Z){var Dt=re.getStreamsInfo();if(Dt.length>0){var yn=Dt[0].manifestInfo,Hn=Ku(Dt,yn);Ne.computeAndSetLiveDelay(Hn,yn)}}}function Ke(){if(Ya()){var Dt=pe.getPlaybackQuality();Dt&&de.addDroppedFrames(Dt)}}function Ve(){D.debug("[onPlaybackStarted]"),!ht&&Je&&pu(rt.RESUME_FROM_PAUSE_START_REASON),ht&&(ht=!1),Bt&&(Bt=!1,nt.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),Je=!1}function Mt(Dt){D.debug("[onPlaybackPaused]"),Dt.ended||(Je=!0,Po(et.USER_REQUEST_STOP_REASON))}function fn(Dt){D.debug("Stream with id ".concat(Dt.streamInfo.id," finished buffering"));var yn=Dt.streamInfo.isLast;Re&&yn?(D.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Se.signalEndOfStream(Re)):Tn()}function Tn(){if(Z&&Z.getHasFinishedBuffering())for(var Dt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||Z||null;if(Ir){var fr=Ir.getStreamInfo();return je.filter(function(ri){var Qr=ri.getStreamInfo();return Qr.start>fr.start&&fr.id!==Qr.id})}}catch(ri){return[]}}(Z),yn=0;yn<Dt.length;){var Hn=Dt[yn],ur=yn===0?Z:Dt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&Re&&En(Hn,ur),yn+=1}}function sr(){Gt&&(clearInterval(Gt),Gt=null)}function Zr(){return Z?Z.getProcessors():[]}function Ai(Dt){if(Z&&!Z.getIsEndedEventSignaled()){Z.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||Z||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ri=-1,Qr=NaN;fr<je.length;){var Bs=je[fr].getStreamInfo(),js=Bs.start-Ir;js>0&&(isNaN(Qr)||js<Qr)&&Tr.id!==Bs.id&&(Qr=js,ri=fr),fr+=1}return ri>=0?je[ri]:null}();yn?(D.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(Z.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,Z,NaN)):(D.debug("StreamController no next stream found"),Z.setIsEndedEventSignaled(!1)),Po(yn?et.END_OF_PERIOD_STOP_REASON:et.END_OF_CONTENT_STOP_REASON)}Dt&&Dt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Dt){var yn=Dt||la().manifestInfo.duration;Se.setDuration(yn)}function io(Dt){var yn=qe.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Us()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],ks(Dt,yn.t,Hn)}function Zi(Dt,yn){var Hn=0;return Dt||(Hn=Us()[0].getStreamInfo().start),ks(Dt,yn,Hn)}function ks(Dt,yn,Hn){var ur=re.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Dt&&!isNaN(Ir)?we.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function Ku(Dt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Dt&&Dt.length===1){var ur=Dt[0],Tr=[v.Z.VIDEO,v.Z.AUDIO,v.Z.TEXT].reduce(function(fr,ri){var Qr=re.getMediaInfoForType(ur,ri);return Qr&&Qr.isFragmented!==!1&&fr.push(Qr),fr},[]).reduce(function(fr,ri){var Qr=re.getVoRepresentations(ri);return Qr&&Qr.length>0&&Qr.forEach(function(Bs){Bs&&fr.push(Bs)}),fr},[]).reduce(function(fr,ri){var Qr=re.convertRepresentationToRepresentationInfo(ri);return Qr&&Qr.fragmentDuration&&!isNaN(Qr.fragmentDuration)&&fr.push(Qr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return yf(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ri){if(fr){if(typeof fr=="string")return yf(fr,ri);var Qr=Object.prototype.toString.call(fr).slice(8,-1);return Qr==="Object"&&fr.constructor&&(Qr=fr.constructor.name),Qr==="Map"||Qr==="Set"?Array.from(fr):Qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qr)?yf(fr,ri):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function zu(Dt){if(Dt.error)ke=!0,Wa();else{D.info("Manifest updated... updating data system wide.");var yn=Dt.manifest;re.updatePeriods(yn);var Hn=re.getUTCTimingSources();!re.getIsDynamic()||Hn&&Hn.length!==0||Yt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=re.getIsDynamic()?Hn.concat(at.getUTCTimingSources()):Hn;K.filterUnsupportedFeatures(yn).then(function(){me.initialize(yn),Ee.attemptSync(ur,re.getIsDynamic())})}}function Ya(){return!!Z&&Z.getHasVideoTrack()}function Fs(){return!!Z&&Z.getHasAudioTrack()}function Po(Dt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Dt)}),de.addPlayList()}function pu(Dt){de.createPlaylistMetrics(1e3*Ne.getTime(),Dt)}function gu(Dt){if(Dt.error){var yn="";switch(Dt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&nt.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){D.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=Ne.getTime();Z.deactivate(!1),D.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),mn(Hn,!1,!1)}():(Ie=!0,Dt.error.message&&(yn+=" ("+Dt.error.message+")"),Dt.error.msExtendedCode&&(yn+=" (0x"+(Dt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),D.fatal("Video Element Error: "+yn),Dt.error&&D.fatal(Dt.error),Le.error(new ce.Z(Dt.error.code,yn)),Wa())}}function la(){return Z?Z.getStreamInfo():null}function Rc(Dt){for(var yn=0,Hn=je.length;yn<Hn;yn++)if(je[yn].getId()===Dt)return je[yn];return null}function Uf(Dt){isNaN(Dt.newDuration)||zr(Dt.newDuration)}function Yu(){je=[],Rt=NaN,le=null,Me=!1,Z=null,Ie=!1,ke=!1,ht=!0,Bt=!0,Je=!1,Q=!0,Gt=null,mt=!1,An=!1,Ft=[],Wt=null,en={counts:{mediaErrorDecode:0}}}function Wa(){Dn(),Ee.reset(),Po(Ie||ke?et.FAILURE_STOP_REASON:et.USER_REQUEST_STOP_REASON);for(var Dt=0,yn=je?je.length:0;Dt<yn;Dt++)je[Dt].reset(Ie);Yt.off(_.Z.PLAYBACK_TIME_UPDATED,Ke,L),Yt.off(_.Z.PLAYBACK_SEEKING,xn,L),Yt.off(_.Z.PLAYBACK_ERROR,gu,L),Yt.off(_.Z.PLAYBACK_STARTED,Ve,L),Yt.off(_.Z.PLAYBACK_PAUSED,Mt,L),Yt.off(_.Z.PLAYBACK_ENDED,Ai,L),Yt.off(_.Z.METRIC_ADDED,Nc,L),Yt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Uf,L),Yt.off(_.Z.BUFFER_LEVEL_UPDATED,ut,L),Yt.off(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.off(T.Z.MANIFEST_UPDATED,zu,L),Yt.off(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.off(T.Z.CURRENT_TRACK_CHANGED,It,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L),me.reset(),ee.reset(),ze.reset(),de.clearAllCurrentMetrics(),H.setValue(null),J.reset(),we.reset(),_e.reset(),Re&&(Se.detachMediaSource(pe),Re=null),pe=null,le&&(le=null,ue=null,H.getValue()&&Yt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Yt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),Yu()}function Nc(Dt){if(Dt.metric===O.Z.DVR_INFO){var yn=Fs()?v.Z.AUDIO:v.Z.VIDEO;Dt.mediaType===yn&&Se.setSeekable(Dt.value.range.start,Dt.value.range.end)}}function Us(){return je}return L={initialize:function(Dt,yn){Dn(),Q=Dt,ue=yn,we.initialize(),(ee=Kr(Jt).create()).setConfig({manifestModel:H,adapter:re,manifestLoader:J,errHandler:Le,settings:nt,contentSteeringController:ie}),ee.initialize(),(ze=Fg(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:Ne,settings:nt}),ze.start(),Ee.setConfig({dashMetrics:de,baseURLController:me,errHandler:Le,settings:nt}),Ee.initialize(),Se.setConfig({settings:nt}),le&&(Yt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(pe.getElement()),ue&&le.setProtectionData(ue)),Yt.on(_.Z.PLAYBACK_TIME_UPDATED,Ke,L),Yt.on(_.Z.PLAYBACK_SEEKING,xn,L),Yt.on(_.Z.PLAYBACK_ERROR,gu,L),Yt.on(_.Z.PLAYBACK_STARTED,Ve,L),Yt.on(_.Z.PLAYBACK_PAUSED,Mt,L),Yt.on(_.Z.PLAYBACK_ENDED,Ai,L),Yt.on(_.Z.METRIC_ADDED,Nc,L),Yt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Uf,L),Yt.on(_.Z.BUFFER_LEVEL_UPDATED,ut,L),Yt.on(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.on(T.Z.MANIFEST_UPDATED,zu,L),Yt.on(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.on(T.Z.CURRENT_TRACK_CHANGED,It,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L)},getActiveStreamInfo:la,addDVRMetric:On,hasVideoTrack:Ya,hasAudioTrack:Fs,getStreamById:Rc,getStreamForTime:Lt,getTimeRelativeToStreamId:function(Dt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<je.length;fr++){if(Tr=(Hn=je[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Dt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),Rt=yn,J.load(Dt)},loadWithManifest:function(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Nn(),Rt=yn,ee.setManifest(Dt)},getActiveStreamProcessors:Zr,setConfig:function(Dt){Dt&&(Dt.capabilities&&(B=Dt.capabilities),Dt.capabilitiesFilter&&(K=Dt.capabilitiesFilter),Dt.manifestLoader&&(J=Dt.manifestLoader),Dt.manifestModel&&(H=Dt.manifestModel),Dt.mediaPlayerModel&&(dt=Dt.mediaPlayerModel),Dt.customParametersModel&&(at=Dt.customParametersModel),Dt.protectionController&&(le=Dt.protectionController),Dt.adapter&&(re=Dt.adapter),Dt.dashMetrics&&(de=Dt.dashMetrics),Dt.errHandler&&(Le=Dt.errHandler),Dt.timelineConverter&&(we=Dt.timelineConverter),Dt.videoModel&&(pe=Dt.videoModel),Dt.playbackController&&(Ne=Dt.playbackController),Dt.serviceDescriptionController&&(Ye=Dt.serviceDescriptionController),Dt.contentSteeringController&&(ie=Dt.contentSteeringController),Dt.textController&&(ae=Dt.textController),Dt.abrController&&(De=Dt.abrController),Dt.mediaController&&(Be=Dt.mediaController),Dt.settings&&(nt=Dt.settings),Dt.baseURLController&&(me=Dt.baseURLController),Dt.uriFragmentModel&&(qe=Dt.uriFragmentModel),Dt.segmentBaseController&&(ge=Dt.segmentBaseController),Dt.manifestUpdater&&(ee=Dt.manifestUpdater))},setProtectionData:function(Dt){ue=Dt,le&&le.setProtectionData(ue)},getIsStreamSwitchInProgress:function(){return Me},switchToVideoElement:function(Dt){Z&&(Ne.initialize(la()),mn(Dt,!1,!0))},getHasMediaOrInitialisationError:function(){return Ie||ke},getStreams:Us,getActiveStream:function(){return Z},getInitialPlayback:function(){return ht},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:Wa},D=(0,x.Z)(Jt).getInstance().getLogger(L),Ee=qa(Jt).getInstance(),Se=uh(Jt).getInstance(),_e=Qe(Jt).getInstance(),Yu(),L}au.__dashjs_factory_name="StreamController";var qo=U.Z.getSingletonFactory(au);function su(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me=this.context,ge=(0,m.Z)(me).getInstance();function qe(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){ge.off(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.off(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.off(T.Z.PLAYBACK_SEEKING,De,this),ge.off(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.off(T.Z.TRACK_CHANGE_RENDERED,ze,L)}(),ee=null,J=NaN,K=0,Se=null,Ee={}}function De(){Se&&(clearTimeout(Se),Se=null)}function Be(ue){try{if(ue.streamId!==re.getActiveStreamInfo().id||ue.mediaType!==v.Z.VIDEO&&ue.mediaType!==v.Z.AUDIO)return;ue.streamId===re.getActiveStreamInfo().id&&(Ee[ue.mediaType]=!0)}catch(Q){ie.error(Q)}}function ze(ue){ue&&ue.mediaType&&(Ee[ue.mediaType]=!1)}function _e(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){we()&&ae(H.getTime())},100))}catch(ue){}}()}function Le(){if(we(B.get().streaming.gaps.enableSeekFix)&&++K>=10){var ue=H.getTime();D===ue?ae(ue,!0):(D=ue,J=NaN),K=0}}function we(){var ue=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!re.getActiveStream())return!1;var Q=Object.keys(Ee).some(function(Ie){return Ee[Ie]}),Me=!!ue&&je();return!Q&&B.get().streaming.gaps.jumpGaps&&re.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Me)&&!H.isPaused()&&!re.getIsStreamSwitchInProgress()&&!re.getHasMediaOrInitialisationError()}function je(){var ue=re.getActiveStream(),Q=parseFloat((ue.getStartTime()+ue.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function Z(ue,Q){try{if(!ue||ue.length<=1&&Q>0)return NaN;for(var Me=NaN,Ie=0;isNaN(Me)&&Ie<ue.length;){var ke=Ie>0?ue.end(Ie-1):0;Q<ue.start(Ie)&&ke-Q<B.get().streaming.gaps.threshold&&(Me=Ie),Ie+=1}return Me}catch(Re){return null}}function le(ue,Q){for(var Me=0,Ie=ue.length;Me<Ie;Me++)if(Q>=ue.start(Me)&&Q<=ue.end(Me))return!0;return!1}function ae(ue){var Q,Me=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ie=B.get().streaming.gaps.enableStallFix,ke=B.get().streaming.gaps.stallSeek,Re=B.get().streaming.gaps.smallGapLimit,pe=B.get().streaming.gaps.jumpLargeGaps,Ne=de.getBufferRange(),Ye=NaN,dt=!1;if(Q=Z(Ne,ue),!isNaN(Q)){var at=Ne.start(Q),Je=at-ue;Je>0&&(Je<=Re||pe)&&(Ye=at)}var ht=H.getTimeToStreamEnd();if(isNaN(Ye)&&Me&&isFinite(ht)&&!isNaN(ht)&&ht<Re&&(Ye=parseFloat(H.getStreamEndTime().toFixed(5)),dt=!0),Ie&&isNaN(Ye)&&Me&&isNaN(Q)&&le(Ne,ue)&&(ke===0?(ie.warn("Toggle play pause to break stall"),de.pause(),de.play()):(ie.warn("Jumping ".concat(ke,"s to break stall")),Ye=ue+ke)),Ye>0&&J!==Ye&&Ye>ue&&!Se){var Bt=Ye-ue;if(dt){var Gt=re.getStreamForTime(Ye),kt=Gt&&!!Gt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(ue," to ").concat(Ye,". Gap duration: ").concat(Bt)),H.seek(Ye,!0,kt)}else{var Ft=H.getIsDynamic(),An=Q>0?Ne.end(Q-1):ue,nt=Ft?1e3*Math.max(0,Bt-.1):0;Se=window.setTimeout(function(){H.seek(Ye,!0,!0),ie.warn("Jumping gap occuring in period ".concat(re.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(Ye,". Jumping by: ").concat(Ye-An)),Se=null},nt)}J=Ye}}return L={reset:qe,setConfig:function(ue){ue&&(ue.settings&&(B=ue.settings),ue.playbackController&&(H=ue.playbackController),ue.streamController&&(re=ue.streamController),ue.videoModel&&(de=ue.videoModel))},initialize:function(){(function(){ge.on(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.on(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.on(T.Z.PLAYBACK_SEEKING,De,this),ge.on(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.on(T.Z.TRACK_CHANGE_RENDERED,ze,L)})()}},ie=(0,x.Z)(me).getInstance().getLogger(L),qe(),L}su.__dashjs_factory_name="GapController";var xs=U.Z.getSingletonFactory(su);function li(){var L,D,B,K,ee,J,H,re,de,Se,Ee=this.context,ie=(0,m.Z)(Ee).getInstance();function me(){D=!1;var je=rn.Z.parseUserAgent();B=je&&je.browser&&je.browser.name&&je.browser.name.toLowerCase()==="safari"}function ge(){D=!1}function qe(je){if(je.streamId===J.getActiveStreamInfo().id&&de){var Z=H.getLiveDelay();H.getBufferLevel()>Z/2&&(de=!1)}}function De(je){je.streamId===J.getActiveStreamInfo().id&&(de=je.state===O.Z.BUFFER_EMPTY)}function Be(){re.getCatchupModeEnabled()||K.setPlaybackRate(1)}function ze(){H.getIsDynamic()&&re.getCatchupModeEnabled()&&(re.getCatchupPlaybackRates().max>0||re.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||D)&&(Le()===v.Z.LIVE_CATCHUP_MODE_LOLP?function(je,Z){try{return Math.abs(_e())>0||je<Z}catch(le){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(_e())>0}catch(je){return!1}}())}catch(je){return!1}}()&&function(){if(!D&&K){var je,Z=K.getPlaybackRate(),le=re.getCatchupPlaybackRates(),ae=H.getBufferLevel(),ue=_e(),Q=re.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&ue>Q)Se.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),D=!0,H.seekToCurrentLive(!0,!1);else{var Me=H.getCurrentLiveLatency(),Ie=H.getLiveDelay();je=Le()===v.Z.LIVE_CATCHUP_MODE_LOLP?function(Re,pe,Ne,Ye,dt){var at;if(dt<Ye){var Je=Math.abs(Re.min),ht=5*(dt-Ye);at=1-Je+2*Je/(1+Math.pow(Math.E,-ht)),Se.debug("[LoL+ playback control_buffer-based] bufferLevel: "+dt+", newRate: "+at)}else{if(Math.abs(pe-Ne)<=.02*Ne)at=1;else{var Bt=pe-Ne,Gt=Bt<0?Math.abs(Re.min):Re.max,kt=5*Bt;at=1-Gt+2*Gt/(1+Math.pow(Math.E,-kt))}Se.debug("[LoL+ playback control_latency-based] latency: "+pe+", newRate: "+at)}return at}(le,Me,Ie,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(Re,pe,Ne,Ye){if(de)return 1;var dt=pe-Ne,at=dt<0?Math.abs(Re.min):Re.max,Je=5*dt,ht=1-at+2*at/(1+Math.pow(Math.E,-Je));return H.getPlaybackStalled()&&Ye<=Ne/2&&dt>0&&(ht=1),ht}(le,Me,Ie,ae);var ke=B?.25:.02/(.5/le.max);je&&Math.abs(Z-je)>=ke&&(Se.debug("[CatchupController]: Setting playback rate to ".concat(je)),K.setPlaybackRate(je))}}}()}function _e(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function Le(){var je=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==v.Z.LIVE_CATCHUP_MODE_LOLP||je===null||isNaN(je)?v.Z.LIVE_CATCHUP_MODE_DEFAULT:v.Z.LIVE_CATCHUP_MODE_LOLP}function we(){re.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.off(_.Z.PLAYBACK_PROGRESS,ze,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.off(_.Z.PLAYBACK_SEEKED,ge,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.off(_.Z.STREAM_INITIALIZED,we,L),me(),K.setPlaybackRate(1,!0)},setConfig:function(je){je&&(je.settings&&(ee=je.settings),je.videoModel&&(K=je.videoModel),je.streamController&&(J=je.streamController),je.playbackController&&(H=je.playbackController),je.mediaPlayerModel&&(re=je.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.on(_.Z.PLAYBACK_PROGRESS,ze,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.on(_.Z.PLAYBACK_SEEKED,ge,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.on(_.Z.STREAM_INITIALIZED,we,L),we()}},Se=(0,x.Z)(Ee).getInstance().getLogger(L),me(),L}li.__dashjs_factory_name="CatchupController";var co=U.Z.getSingletonFactory(li),xu=[v.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],lh="video",Mu="audio";function Co(){var L,D,B,K,ee,J=this.context;function H(){D={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function re(de,Se,Ee){try{D[de][Se]=Ee/1e3}catch(ie){K.error(ie)}}return L={getServiceDescriptionSettings:function(){return D},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(de){try{var Se=[];if(de&&de.length>0){var Ee=[v.Z.VIDEO,v.Z.AUDIO,v.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;de.forEach(function(me){var ge=Ee.reduce(function(qe,De){return qe.concat(ee.getAllMediaInfoForType(me,De))},[]).reduce(function(qe,De){return ee.getProducerReferenceTimes(me,De).forEach(function(Be){var ze=ee.getVoRepresentations(De);if(ze&&ze.length>0&&ze[0].adaptation&&ze[0].segmentInfoType===y.Z.SEGMENT_TEMPLATE){var _e=ze[0],Le=new Date(Be[y.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Be[y.Z.PRESENTATION_TIME]/_e[y.Z.TIMESCALE]-_e[y.Z.PRESENTATION_TIME_OFFSET]+me.start),we=ie-Le;qe.push({id:Be[y.Z.ID],to:we})}}),qe},[]);Se=Se.concat(ge)})}B=Se}catch(me){K.error(me),B=[]}},applyServiceDescription:function(de){if(de&&de.serviceDescriptions){var Se=de.serviceDescriptions.filter(function(me){return xu.includes(me.schemeIdUri)}),Ee=de.serviceDescriptions.filter(function(me){return me.schemeIdUri==null}),ie=Se.length>0?Se[Se.length-1]:Ee[Ee.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(me){var ge;if(me.schemeIdUri,v.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ge=function(ze){return{liveDelay:ze.latency.target/1e3,maxDrift:!isNaN(ze.latency.max)&&ze.latency.max>ze.latency.target?(ze.latency.max-ze.latency.target+500)/1e3:NaN,referenceId:ze.latency.referenceId||NaN}}(me),B.length>0){var qe=function(ze){var _e,Le=0,we=B.filter(function(je){return je.id===ze.referenceId});return we.length===0?(Le=B.length>0?B[0].to:0,_e=B[0].id||NaN):(Le=we[0].to||0,_e=we[0].id||NaN),{to:Le,id:_e}}(ge),De=qe.to,Be=qe.id;D.liveDelay=ge.liveDelay-De,D.liveCatchup.maxDrift=ge.maxDrift,K.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(De," from ProducerReferenceTime element with id ").concat(Be,".\n                Live Delay: ").concat(ge.liveDelay-De,", Live catchup max drift: ").concat(ge.maxDrift,"\n            "))}else D.liveDelay=ge.liveDelay,D.liveCatchup.maxDrift=ge.maxDrift,K.debug("Found latency properties coming from service description: Live Delay: ".concat(ge.liveDelay,", Live catchup max drift: ").concat(ge.maxDrift))}(ie),ie.playbackRate&&function(me){var ge=me.playbackRate.min?Math.round(1e3*(me.playbackRate.min-1))/1e3:NaN,qe=me.playbackRate.max?Math.round(1e3*(me.playbackRate.max-1))/1e3:NaN;D.liveCatchup.playbackRate.min=ge,D.liveCatchup.playbackRate.max=qe,K.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ge)),K.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(qe))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(me){if(me&&me.operatingBandwidth&&me.operatingBandwidth.mediaType&&me.operatingBandwidth.mediaType!=="all"){var ge={};ge.minBandwidth=me.operatingBandwidth.min,ge.maxBandwidth=me.operatingBandwidth.max,ge.targetBandwidth=me.operatingBandwidth.target;var qe=[];me.operatingBandwidth.mediaType===lh||me.operatingBandwidth.mediaType===Mu?qe.push(me.operatingBandwidth.mediaType):me.operatingBandwidth.mediaType==="any"&&(qe.push(Mu),qe.push(lh)),qe.forEach(function(De){isNaN(ge.minBandwidth)||re("minBitrate",De,ge.minBandwidth),isNaN(ge.maxBandwidth)||re("maxBitrate",De,ge.maxBandwidth),isNaN(ge.targetBandwidth)||re("initialBitrate",De,ge.targetBandwidth)})}}(ie),ie.contentSteering&&function(me){D.contentSteering=me.contentSteering}(ie))}},reset:function(){H()},setConfig:function(de){de&&de.adapter&&(ee=de.adapter)}},K=(0,x.Z)(J).getInstance().getLogger(L),H(),L}Co.__dashjs_factory_name="ServiceDescriptionController";var ch=U.Z.getSingletonFactory(Co),yr=S(3973),vi=S.n(yr),fh=S(3039);function cc(){var L,D,B,K,ee,J,H,re,de=this.context,Se=(0,m.Z)(de).getInstance();function Ee(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].list:[]}function ie(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].current:null}function me(pe){var Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(pe&&pe.streamInfo){var Ye=pe.type,dt=pe.streamInfo,at=dt.id,Je=ie(Ye,at);if(B[at]&&B[at][Ye]&&(B[at][Ye].current=pe,B[at][Ye].current&&(Ye!==v.Z.TEXT&&!De(pe,Je)||Ye===v.Z.TEXT&&pe.isFragmented)&&Se.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Je,newMediaInfo:pe,switchMode:K.get().streaming.trackSwitchMode[Ye]},{streamId:at}),!Ne)){var ht=ze(pe);if(!ht||!B[at][Ye].storeLastSettings)return;ht.roles&&(ht.role=ht.roles[0],delete ht.roles),ht.accessibility&&(ht.accessibility=ht.accessibility[0]),ht.audioChannelConfiguration&&(ht.audioChannelConfiguration=ht.audioChannelConfiguration[0]),J[Ye]=ht,re.setSavedMediaSettings(Ye,ht)}}}function ge(pe,Ne){pe&&Ne&&(ee[pe]=Ne)}function qe(pe){return pe?ee[pe]:null}function De(pe,Ne){if(!pe&&!Ne)return!0;if(!pe||!Ne)return!1;var Ye=pe.id===Ne.id,dt=pe.viewpoint===Ne.viewpoint,at=JSON.stringify(pe.viewpointsWithSchemeIdUri)===JSON.stringify(Ne.viewpointsWithSchemeIdUri),Je=pe.lang===Ne.lang,ht=pe.codec===Ne.codec,Bt=pe.roles.toString()===Ne.roles.toString(),Gt=JSON.stringify(pe.rolesWithSchemeIdUri)===JSON.stringify(Ne.rolesWithSchemeIdUri),kt=pe.accessibility.toString()===Ne.accessibility.toString(),Ft=JSON.stringify(pe.accessibilitiesWithSchemeIdUri)===JSON.stringify(Ne.accessibilitiesWithSchemeIdUri),An=pe.audioChannelConfiguration.toString()===Ne.audioChannelConfiguration.toString(),nt=JSON.stringify(pe.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Ne.audioChannelConfigurationsWithSchemeIdUri);return Ye&&ht&&dt&&at&&Je&&Bt&&Gt&&kt&&Ft&&An&&nt}function Be(){B={},J={},ee={audio:null,video:null,text:null}}function ze(pe){var Ne={lang:pe.lang,viewpoint:pe.viewpoint,roles:pe.roles,accessibility:pe.accessibility,audioChannelConfiguration:pe.audioChannelConfiguration,codec:pe.codec};return Ne.lang||Ne.viewpoint||Ne.role&&Ne.role.length>0||Ne.accessibility&&Ne.accessibility.length>0||Ne.audioChannelConfiguration&&Ne.audioChannelConfiguration.length>0?Ne:null}function _e(pe,Ne,Ye){var dt=[];return pe.forEach(function(at){Ne(Ye,at)&&dt.push(at)}),dt.length!==0?dt:pe}function Le(pe,Ne){try{return!pe.lang||pe.lang instanceof RegExp?Ne.lang.match(pe.lang):Ne.lang!==""&&(0,fh.extendedFilter)(Ne.lang,vi()(pe.lang)).length>0}catch(Ye){return!1}}function we(pe,Ne){return pe.index===void 0||pe.index===null||Ne.index===pe.index}function je(pe,Ne){return!pe.viewpoint||pe.viewpoint===Ne.viewpoint}function Z(pe,Ne){var Ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2],dt=!pe.role||!!Ne.roles.filter(function(at){return at===pe.role})[0];return dt||Ne.type===v.Z.AUDIO&&Ye}function le(pe,Ne){return pe.accessibility?!!Ne.accessibility.filter(function(Ye){return Ye===pe.accessibility})[0]:!Ne.accessibility.length}function ae(pe,Ne){return!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ye){return Ye===pe.audioChannelConfiguration})[0]}function ue(pe,Ne){return!pe.codec||pe.codec===Ne.codec}function Q(pe){var Ne,Ye=0,dt=[];return pe.forEach(function(at){(Ne=Math.max.apply(Math,at.bitrateList.map(function(Je){return Je.bandwidth})))>Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function Me(pe){var Ne,Ye=1/0,dt=[];return pe.forEach(function(at){var Je=at.bitrateList.reduce(function(ht,Bt){var Gt=Math.max(1,Bt.width*Bt.height);return ht+Bt.bandwidth/Gt},0);(Ne=Je/at.bitrateList.length)<Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function Ie(pe){var Ne,Ye=0,dt=[];return pe.forEach(function(at){(Ne=at.representationCount)>Ye?(Ye=Ne,dt=[at]):Ne===Ye&&dt.push(at)}),dt}function ke(pe,Ne){if(pe===v.Z.TEXT)return Ne[0];var Ye,dt=K.get().streaming.selectionModeForInitialTrack,at=H.getCustomInitialTrackSelectionFunction();if(at&&typeof at=="function")Ye=at(Ne);else switch(dt){case v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Ye=function(Je){var ht,Bt,Gt=(ht=0,Bt=[],Je.forEach(function(kt){isNaN(kt.selectionPriority)||(kt.selectionPriority>ht?(ht=kt.selectionPriority,Bt=[kt]):kt.selectionPriority===ht&&Bt.push(kt))}),Bt);return Gt.length>1&&(Gt=Q(Gt)),Gt.length>1&&(Gt=Ie(Gt)),Gt}(Ne);break;case v.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Ye=function(Je){var ht=Q(Je);return ht.length>1&&(ht=Ie(ht)),ht}(Ne);break;case v.Z.TRACK_SELECTION_MODE_FIRST_TRACK:Ye=Re(Ne);break;case v.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Ye=function(Je){var ht=Me(Je);return ht.length>1&&(ht=Q(ht)),ht}(Ne);break;case v.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:Ye=function(Je){var ht=Ie(Je);return ht.length>1&&(ht=Q(Je)),ht}(Ne);break;default:D.warn("Track selection mode ".concat(dt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Ye=Re(Ne)}return Ye.length>0?Ye[0]:Ne[0]}function Re(pe){return pe[0]}return L={setInitialMediaSettingsForType:function(pe,Ne){var Ye=J[pe]||qe(pe),dt=Ee(pe,Ne.id),at=[];Ye||((Ye=re.getSavedMediaSettings(pe))&&delete Ye.codec,ge(pe,Ye)),dt&&dt.length!==0&&(Ye&&(at=_e(at=Array.from(dt),Le,Ye),at=_e(at,we,Ye),at=_e(at,je,Ye),pe===v.Z.AUDIO&&J[pe]||(at=_e(at,Z,Ye)),at=_e(at,le,Ye),at=_e(at,ae,Ye),at=_e(at,ue,Ye)),at.length===0?me(ke(pe,dt),!0):at.length>1?me(ke(pe,at)):me(at[0]))},addTrack:function(pe){if(pe){var Ne=pe.type;if((Ye=Ne)===v.Z.AUDIO||Ye===v.Z.VIDEO||Ye===v.Z.TEXT||Ye===v.Z.IMAGE){var Ye,dt,at=pe.streamInfo.id;B[at]||(B[at]={audio:{list:[],storeLastSettings:dt=K.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:dt,current:null},text:{list:[],storeLastSettings:dt,current:null},image:{list:[],storeLastSettings:dt,current:null}});for(var Je=B[at][Ne].list,ht=0,Bt=Je.length;ht<Bt;++ht)if(De(Je[ht],pe))return;Je.push(pe)}}},getTracksFor:Ee,getCurrentTrackFor:ie,isCurrentTrack:function(pe){if(!pe)return!1;var Ne=pe.type,Ye=pe.streamInfo.id;return B[Ye]&&B[Ye][Ne]&&De(B[Ye][Ne].current,pe)},setTrack:me,selectInitialTrack:ke,setInitialSettings:ge,getInitialSettings:qe,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Me,getTracksWithWidestRange:Ie,isTracksEqual:De,matchSettings:function(pe,Ne){var Ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var dt=!1;if(pe.lang){if(pe.lang instanceof RegExp)dt=Ne.lang.match(pe.lang);else if(Ne.lang!==""){var at=vi()(pe.lang);at&&(dt=(0,fh.extendedFilter)(Ne.lang,at).length>0)}}else dt=!0;var Je=pe.index===void 0||pe.index===null||Ne.index===pe.index,ht=!pe.viewpoint||pe.viewpoint===Ne.viewpoint,Bt=!pe.role||!!Ne.roles.filter(function(Ft){return Ft===pe.role})[0],Gt=!pe.accessibility||!!Ne.accessibility.filter(function(Ft){return Ft===pe.accessibility})[0],kt=!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ft){return Ft===pe.audioChannelConfiguration})[0];return dt&&Je&&ht&&(Bt||Ne.type===v.Z.AUDIO&&Ye)&&Gt&&kt}catch(Ft){return!1}},matchSettingsLang:Le,matchSettingsIndex:we,matchSettingsViewPoint:je,matchSettingsRole:Z,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){re.setSavedMediaSettings(v.Z.TEXT,null)},setConfig:function(pe){pe&&(pe.domStorage&&(re=pe.domStorage),pe.settings&&(K=pe.settings),pe.customParametersModel&&(H=pe.customParametersModel))},reset:Be},D=(0,x.Z)(de).getInstance().getLogger(L),Be(),L}cc.__dashjs_factory_name="MediaController";var Si=U.Z.getSingletonFactory(cc);U.Z.updateSingletonFactory(cc.__dashjs_factory_name,Si);var Du=Si,Ms=NaN,Ug=function L(D,B){(function(K,ee){if(!(K instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:D||null,selectedIdx:B||Ms},this.children=[]};function vf(){var L,D,B,K,ee=this.context,J=gn(ee).getInstance();function H(Ee,ie,me){var ge=re(me);Ee[ie]?J.areEqual(ge,Ee[ie].data.baseUrls)||(Ee[ie].data.baseUrls=ge,Ee[ie].data.selectedIdx=Ms):Ee[ie]=new Ug(ge)}function re(Ee){var ie=B.getBaseURLsFromElement(Ee),me=K.getSynthesizedBaseUrlElements(ie);return me&&me.length>0&&(ie=ie.concat(me)),ie}function de(Ee,ie){var me=ie||D;Ee(me.data),me.children&&me.children.forEach(function(ge){return de(Ee,ge)})}function Se(){D=new Ug}return L={reset:Se,update:function(Ee){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var me=re(ie);J.areEqual(me,D.data.baseUrls)||(D.data.baseUrls=me,D.data.selectedIdx=Ms),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ge,qe){H(D.children,qe,ge),ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.forEach(function(De,Be){H(D.children[qe].children,Be,De),De.Representation_asArray&&De.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function(ze,_e){H(D.children[qe].children[Be].children,_e,ze)})})})})(Ee)},getForPath:function(Ee){var ie=D,me=[ie.data];return Ee&&Ee.forEach(function(ge){(ie=ie.children[ge])&&me.push(ie.data)}),me.filter(function(ge){return ge.baseUrls.length})},invalidateSelectedIndexes:function(Ee){de(function(ie){isNaN(ie.selectedIdx)||Ee===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Ms)})},setConfig:function(Ee){Ee.adapter&&(B=Ee.adapter),Ee.contentSteeringController&&(K=Ee.contentSteeringController)},getBaseUrls:function(Ee){return re(Ee)}},Se(),L}vf.__dashjs_factory_name="BaseURLTreeModel";var Sa=U.Z.getClassFactory(vf);function Ha(L){var D=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,re=0,de=[],Se=0;if((H=ee.sort(function(Ee,ie){var me=Ee.dvbPriority-ie.dvbPriority;return isNaN(me)?0:me}).filter(function(Ee,ie,me){return!ie||me[0].dvbPriority&&Ee.dvbPriority&&me[0].dvbPriority===Ee.dvbPriority})).length)return H.length>1&&(H.forEach(function(Ee){re+=Ee.dvbWeight,de.push(re)}),J=Math.floor(Math.random()*(re-1)),de.every(function(Ee,ie){return Se=ie,!(J<Ee)})),H[Se]}((K=[],B.filter(function(ee){return!D.contains(ee.serviceLocation)||(ee.dvbPriority&&K.push(ee.dvbPriority),!1)}).filter(function(ee){return!K.length||!ee.dvbPriority||K.indexOf(ee.dvbPriority)===-1})));var K}}}Ha.__dashjs_factory_name="DVBSelector";var wa=U.Z.getClassFactory(Ha);function Do(L){var D=(L=L||{}).blacklistController;return{select:function(B){var K,ee=0;return B&&B.some(function(J,H){return ee=H,!D.contains(J.serviceLocation)})&&(K=B[ee]),K}}}Do.__dashjs_factory_name="BasicSelector";var Bg=U.Z.getClassFactory(Do);function dh(){var L,D,B,K=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=0,de=NaN,Se=function(){var ie=J[re],me=H.findIndex(function(ge){return ge.serviceLocation&&ge.serviceLocation===ie});if(me!==-1&&!B.contains(H[me].serviceLocation))return de=me,"break";re+=1};re<J.length;){var Ee=Se();if(Ee==="break")break}return de}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var re=D.getSteeringDataFromManifest();re&&re.defaultServiceLocationArray.length>0&&(H=ee(re.defaultServiceLocationArray,J.baseUrls))}var de=D.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&de&&de.pathwayPriority&&de.pathwayPriority.length&&(H=ee(de.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(D=J.contentSteeringController)}},D=Ta(K).getInstance(),L}dh.__dashjs_factory_name="ContentSteeringSelector";var P0=U.Z.getClassFactory(dh);function uu(){var L,D,B,K,ee,J,H=this.context,re=(0,m.Z)(H).getInstance(),de=(0,Ze.Z)(H).getInstance();function Se(){D.reset()}return L={chooseSelector:function(Ee){(0,he.PS)(Ee,"boolean"),J=Ee?K:B},select:function(Ee){if(Ee){if(de.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(Ee);isNaN(ie)||ie===-1||(Ee.selectedIdx=ie)}if(!isNaN(Ee.selectedIdx))return Ee.baseUrls[Ee.selectedIdx];var me=J.select(Ee.baseUrls);return me?(Ee.selectedIdx=Ee.baseUrls.indexOf(me),me):(re.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&Se()))}},reset:Se,setConfig:function(Ee){Ee.selector&&(J=Ee.selector),Ee.contentSteeringSelector&&(ee=Ee.contentSteeringSelector)}},D=hs(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=Bg(H).create({blacklistController:D}),K=wa(H).create({blacklistController:D}),(ee=P0(H).create()).setConfig({blacklistController:D}),J=B,L}uu.__dashjs_factory_name="BaseURLSelector";var Ds=U.Z.getClassFactory(uu);function El(){var L,D,B,K,ee,J=this.context,H=(0,m.Z)(J).getInstance(),re=(0,_t.Z)(J).getInstance();function de(Ee){B.update(Ee),K.chooseSelector(D.getIsDVB(Ee)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:Se(Ee)})}function Se(Ee){return B.getBaseUrls(Ee)}return L={reset:function(){B.reset(),K.reset()},initialize:function(Ee){B.setConfig({adapter:D,contentSteeringController:ee}),de(Ee)},resolve:function(Ee){var ie=B.getForPath(Ee).reduce(function(me,ge){var qe=K.select(ge);return qe?(re.isRelative(qe.url)?me.url=re.resolve(qe.url,me.url):(me.url=qe.url,me.serviceLocation=qe.serviceLocation),me.availabilityTimeOffset=qe.availabilityTimeOffset,me.availabilityTimeComplete=qe.availabilityTimeComplete,me.queryParams=qe.queryParams,me):new Qn},new Qn);if(!re.isRelative(ie.url))return ie},setConfig:function(Ee){Ee.baseURLTreeModel&&(B=Ee.baseURLTreeModel),Ee.baseURLSelector&&(K=Ee.baseURLSelector),Ee.adapter&&(D=Ee.adapter),Ee.contentSteeringController&&(ee=Ee.contentSteeringController)},getBaseUrls:Se,update:de},B=Sa(J).create(),K=Ds(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Ee){B.invalidateSelectedIndexes(Ee.entry)},L),L}El.__dashjs_factory_name="BaseURLController";var O0=U.Z.getClassFactory(El);function hh(L){return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},hh(L)}function Ef(L,D){return Ef=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},Ef(L,D)}function jg(L,D){return!D||hh(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function _f(L){return _f=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},_f(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Ef(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=_f(D);if(B){var re=_f(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return jg(this,J)});function ee(J,H){var re;return function(de,Se){if(!(de instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,ee),(re=K.call(this)).url=J||null,re.type=H||null,re.mediaType=v.Z.STREAM,re.responseType="",re}return ee}(j.Z);function Zg(L){L=L||{};var D=this.context,B=(0,m.Z)(D).getInstance(),K=wo(D).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Ae});return{load:function(ee,J,H){var re=function(Se,Ee){J.resolved=!0,J.resolvedContent=Se||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:Se||Ee?null:new ce.Z(Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")re(null,!0);else{var de=new ji(ee,it.w.XLINK_EXPANSION_TYPE);K.load({request:de,success:function(Se){re(Se)},error:function(){re(null)}})}},reset:function(){K&&(K.abort(),K=null)}}}Zg.__dashjs_factory_name="XlinkLoader";var Gg=U.Z.getClassFactory(Zg),Pu=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function D(_e){var Le=_e.localName;return Le==null&&(Le=_e.baseName),Le!=null&&Le!=""||(Le=_e.nodeName),Le}function B(_e){return typeof _e=="string"?_e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):_e}function K(_e,Le,we,je){for(var Z=0;Z<_e.length;Z++){var le=_e[Z];if(typeof le=="string"){if(le==je)break}else if(le instanceof RegExp){if(le.test(je))break}else if(typeof le=="function"&&le(Le,we,je))break}return Z!=_e.length}function ee(_e,Le,we){L.arrayAccessForm==="property"&&(_e[Le]instanceof Array?_e[Le+"_asArray"]=_e[Le]:_e[Le+"_asArray"]=[_e[Le]]),!(_e[Le]instanceof Array)&&L.arrayAccessFormPaths.length>0&&K(L.arrayAccessFormPaths,_e,Le,we)&&(_e[Le]=[_e[Le]])}function J(_e){var Le=_e.split(/[-T:+Z]/g),we=new Date(Le[0],Le[1]-1,Le[2]),je=Le[5].split(".");if(we.setHours(Le[3],Le[4],je[0]),je.length>1&&we.setMilliseconds(je[1]),Le[6]&&Le[7]){var Z=60*Le[6]+Number(Le[7]);Z=0+((/\d\d-\d\d:\d\d$/.test(_e)?"-":"+")=="-"?-1*Z:Z),we.setMinutes(we.getMinutes()-Z-we.getTimezoneOffset())}else _e.indexOf("Z",_e.length-1)!==-1&&(we=new Date(Date.UTC(we.getFullYear(),we.getMonth(),we.getDate(),we.getHours(),we.getMinutes(),we.getSeconds(),we.getMilliseconds())));return we}function H(_e,Le,we,je){return!(Le==1&&L.xmlElementsFilter.length>0)||K(L.xmlElementsFilter,_e,we,je)}function re(_e,Le){if(_e.nodeType==9){for(var we=new Object,je=_e.childNodes,Z=0;Z<je.length;Z++)(ae=je[Z]).nodeType==1&&(L.ignoreRoot?we=re(ae):(we={})[ue=D(ae)]=re(ae));return we}if(_e.nodeType==1){(we=new Object).__cnt=0;var le=[];for(je=_e.childNodes,Z=0;Z<je.length;Z++){var ae,ue=D(ae=je[Z]);if(ae.nodeType!=8){var Q=Le+"."+ue;if(H(we,ae.nodeType,ue,Q))if(we.__cnt++,we[ue]==null){var Me=re(ae,Q);(ue!="#text"||/[^\s]/.test(Me))&&((Ie={})[ue]=Me,le.push(Ie)),we[ue]=Me,ee(we,ue,Q)}else{var Ie;we[ue]!=null&&(we[ue]instanceof Array||(we[ue]=[we[ue]],ee(we,ue,Q))),Me=re(ae,Q),(ue!="#text"||/[^\s]/.test(Me))&&((Ie={})[ue]=Me,le.push(Ie)),we[ue][we[ue].length]=Me}}}we.__children=le;for(var ke=D(_e),Re=0;Re<_e.attributes.length;Re++){var pe=_e.attributes[Re];we.__cnt++;for(var Ne=pe.value,Ye=0,dt=L.matchers.length;Ye<dt;Ye++){var at=L.matchers[Ye];at.test(pe,ke)&&(Ne=at.converter(pe.value))}we[L.attributePrefix+pe.name]=Ne}var Je=function(ht){return ht.prefix}(_e);return Je!=null&&Je!=""&&(we.__cnt++,we.__prefix=Je),we["#text"]!=null&&(we.__text=we["#text"],we.__text instanceof Array&&(we.__text=we.__text.join("\n")),L.stripWhitespaces&&(we.__text=we.__text.trim()),delete we["#text"],L.arrayAccessForm=="property"&&delete we["#text_asArray"],we.__text=function(ht,Bt,Gt){if(L.datetimeAccessFormPaths.length>0){var kt=Gt.split(".#")[0];return K(L.datetimeAccessFormPaths,ht,Bt,kt)?J(ht):ht}return ht}(we.__text,ue,Le+"."+ue)),we["#cdata-section"]!=null&&(we.__cdata=we["#cdata-section"],delete we["#cdata-section"],L.arrayAccessForm=="property"&&delete we["#cdata-section_asArray"]),we.__cnt==0&&L.emptyNodeForm=="text"?we="":we.__cnt==1&&we.__text!=null?we=we.__text:we.__cnt!=1||we.__cdata==null||L.keepCData?we.__cnt>1&&we.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&we.__text==""||we.__text.trim()=="")&&delete we.__text:we=we.__cdata,delete we.__cnt,!L.enableToStringFunc||we.__text==null&&we.__cdata==null||(we.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),we}if(_e.nodeType==3||_e.nodeType==4)return _e.nodeValue}function de(_e,Le,we,je){var Z="<"+(_e!=null&&_e.__prefix!=null?_e.__prefix+":":"")+Le;if(we!=null)for(var le=0;le<we.length;le++){var ae=we[le],ue=_e[ae];L.escapeMode&&(ue=B(ue)),Z+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?Z+='"'+ue+'"':Z+="'"+ue+"'"}return Z+(je?"/>":">")}function Se(_e,Le){return"</"+(_e.__prefix!=null?_e.__prefix+":":"")+Le+">"}function Ee(_e,Le){return L.arrayAccessForm=="property"&&(je="_asArray",(we=Le.toString()).indexOf(je,we.length-je.length)!==-1)||Le.toString().indexOf(L.attributePrefix)==0||Le.toString().indexOf("__")==0||_e[Le]instanceof Function;var we,je}function ie(_e){var Le=0;if(_e instanceof Object)for(var we in _e)Ee(_e,we)||Le++;return Le}function me(_e,Le,we){return L.jsonPropertiesFilter.length==0||we==""||K(L.jsonPropertiesFilter,_e,Le,we)}function ge(_e){var Le=[];if(_e instanceof Object)for(var we in _e)we.toString().indexOf("__")==-1&&we.toString().indexOf(L.attributePrefix)==0&&Le.push(we);return Le}function qe(_e){var Le="";return _e instanceof Object?Le+=function(we){var je="";return we.__cdata!=null&&(je+="<![CDATA["+we.__cdata+"]]>"),we.__text!=null&&(L.escapeMode?je+=B(we.__text):je+=we.__text),je}(_e):_e!=null&&(L.escapeMode?Le+=B(_e):Le+=_e),Le}function De(_e,Le){return _e===""?Le:_e+"."+Le}function Be(_e,Le,we,je){var Z="";if(_e.length==0)Z+=de(_e,Le,we,!0);else for(var le=0;le<_e.length;le++)Z+=de(_e[le],Le,ge(_e[le]),!1),Z+=ze(_e[le],De(je,Le)),Z+=Se(_e[le],Le);return Z}function ze(_e,Le){var we="";if(ie(_e)>0){for(var je in _e)if(!Ee(_e,je)&&(Le==""||me(_e,je,De(Le,je)))){var Z=_e[je],le=ge(Z);Z==null||Z==null?we+=de(Z,je,le,!0):Z instanceof Object?Z instanceof Array?we+=Be(Z,je,le,Le):Z instanceof Date?(we+=de(Z,je,le,!1),we+=Z.toISOString(),we+=Se(Z,je)):ie(Z)>0||Z.__text!=null||Z.__cdata!=null?(we+=de(Z,je,le,!1),we+=ze(Z,De(Le,je)),we+=Se(Z,je)):we+=de(Z,je,le,!0):(we+=de(Z,je,le,!1),we+=qe(Z),we+=Se(Z,je))}}return we+qe(_e)}this.parseXmlString=function(_e){var Le;if(_e===void 0)return null;if(window.DOMParser){var we=new window.DOMParser;try{(Le=we.parseFromString(_e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Le=null)}catch(je){Le=null}}else _e.indexOf("<?")==0&&(_e=_e.substr(_e.indexOf("?>")+2)),(Le=new ActiveXObject("Microsoft.XMLDOM")).async="false",Le.loadXML(_e);return Le},this.asArray=function(_e){return _e===void 0||_e==null?[]:_e instanceof Array?_e:[_e]},this.toXmlDateTime=function(_e){return _e instanceof Date?_e.toISOString():typeof _e=="number"?new Date(_e).toISOString():null},this.asDateTime=function(_e){return typeof _e=="string"?J(_e):_e},this.xml2json=function(_e){return re(_e)},this.xml_str2json=function(_e){var Le=this.parseXmlString(_e);return Le!=null?this.xml2json(Le):null},this.json2xml_str=function(_e){return ze(_e,"")},this.json2xml=function(_e){var Le=this.json2xml_str(_e);return this.parseXmlString(Le)},this.getVersion=function(){return"1.2.0"}},go="onLoad";function Ou(L){L=L||{};var D,B,K,ee,J,H,re=this.context,de=(0,m.Z)(re).getInstance(),Se=(0,_t.Z)(re).getInstance();function Ee(De,Be,ze){var _e,Le,we={};we.elements=De,we.type=Be,we.resolveType=ze,we.elements.length===0&&me(we);for(var je=0;je<we.elements.length;je++)_e=we.elements[je],Le=Se.isHTTPURL(_e.url)?_e.url:_e.originalContent.BaseURL+_e.url,H.load(Le,_e,we)}function ie(De){var Be,ze,_e="";if(Be=De.element,ze=De.resolveObject,Be.resolvedContent){var Le=0;Be.resolvedContent.indexOf("<?xml")===0&&(Le=Be.resolvedContent.indexOf("?>")+2),_e=Be.resolvedContent.substr(0,Le)+"<response>"+Be.resolvedContent.substr(Le)+"</response>",Be.resolvedContent=J.xml_str2json(_e)}(function(we){var je;for(je=0;je<we.elements.length;je++)if(we.elements[je].resolved===!1)return!1;return!0})(ze)&&me(ze)}function me(De){var Be,ze,_e=[];if(function(Le){var we,je,Z,le,ae,ue,Q=[];for(le=Le.elements.length-1;le>=0;le--){if(je=(we=Le.elements[le]).type+"_asArray",we.resolvedContent){if(we.resolvedContent)for(ae=0;ae<we.resolvedContent[je].length;ae++)Z=we.resolvedContent[je][ae],Q.push(Z)}else delete we.originalContent["xlink:actuate"],delete we.originalContent["xlink:href"],Q.push(we.originalContent);for(we.parentElement[je].splice(we.index,1),ue=0;ue<Q.length;ue++)we.parentElement[je].splice(we.index+ue,0,Q[ue]);Q=[]}Le.elements.length>0&&K.run(ee)}(De),De.resolveType==="onActuate"&&de.trigger(T.Z.XLINK_READY,{manifest:ee}),De.resolveType===go)switch(De.type){case y.Z.PERIOD:for(Be=0;Be<ee[y.Z.PERIOD+"_asArray"].length;Be++)(ze=ee[y.Z.PERIOD+"_asArray"][Be]).hasOwnProperty(y.Z.ADAPTATION_SET+"_asArray")&&(_e=_e.concat(ge(ze[y.Z.ADAPTATION_SET+"_asArray"],ze,y.Z.ADAPTATION_SET,go))),ze.hasOwnProperty(y.Z.EVENT_STREAM+"_asArray")&&(_e=_e.concat(ge(ze[y.Z.EVENT_STREAM+"_asArray"],ze,y.Z.EVENT_STREAM,go)));Ee(_e,y.Z.ADAPTATION_SET,go);break;case y.Z.ADAPTATION_SET:de.trigger(T.Z.XLINK_READY,{manifest:ee})}}function ge(De,Be,ze,_e){var Le,we,je,Z=[];for(we=De.length-1;we>=0;we--)(Le=De[we]).hasOwnProperty("xlink:href")&&Le["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&De.splice(we,1);for(we=0;we<De.length;we++)(Le=De[we]).hasOwnProperty("xlink:href")&&Le.hasOwnProperty("xlink:actuate")&&Le["xlink:actuate"]===_e&&(je=qe(Le["xlink:href"],Be,ze,we,_e,Le),Z.push(je));return Z}function qe(De,Be,ze,_e,Le,we){return{url:De,parentElement:Be,type:ze,index:_e,resolveType:Le,originalContent:we,resolvedContent:null,resolved:!1}}return D={resolveManifestOnLoad:function(De){J=new Pu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=De).Period_asArray?Ee(ge(ee.Period_asArray,ee,y.Z.PERIOD,go),y.Z.PERIOD,go):de.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(De){De&&(B=De)},setIron:function(De){De&&(K=De)},reset:function(){de.off(T.Z.XLINK_ELEMENT_LOADED,ie,D),H&&(H.reset(),H=null)}},de.on(T.Z.XLINK_ELEMENT_LOADED,ie,D),H=Gg(re).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),D}Ou.__dashjs_factory_name="XlinkController";var fc=U.Z.getClassFactory(Ou);function Lu(L){return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Lu(L)}function br(L){function D(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var re=0,de=ee.length;re<de;++re){var Se=ee[re];if(J[Se.name])if(H[Se.name]){if(Se.merge){var Ee=J[Se.name],ie=H[Se.name];Lu(Ee)==="object"&&Lu(ie)==="object"?D(Ee,ie):H[Se.name]=Ee+ie}}else H[Se.name]=J[Se.name]}}function K(ee,J){for(var H=0,re=ee.children.length;H<re;++H){var de=ee.children[H],Se=J[de.name+"_asArray"];if(Se)for(var Ee=0,ie=Se.length;Ee<ie;++Ee){var me=Se[Ee];B(ee.properties,J,me),K(de,me)}}}return{run:function(ee){if(ee===null||Lu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,re=0,de=H.length;re<de;++re){var Se=H[re];if(K(J,Se),"adaptationset"in L){var Ee=Se.AdaptationSet_asArray;if(Ee)for(var ie=L.adaptationset,me=0,ge=Ee.length;me<ge;++me)K(ie,Ee[me])}}return ee}}}br.__dashjs_factory_name="ObjectIron";var ku=U.Z.getClassFactory(br);function ph(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var Fu=function(){function L(K,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=K,this._converter=ee}var D,B;return D=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&ph(D.prototype,B),L}();function _l(L){return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},_l(L)}function ni(L,D,B){return D in L?Object.defineProperty(L,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[D]=B,L}function Va(L,D){return Va=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},Va(L,D)}function qg(L,D){return!D||_l(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function dc(L){return dc=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},dc(L)}var Hg=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Va(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=dc(D);if(B){var re=dc(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return qg(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),K.call(this,function(J,H){var re,de=(ni(re={},y.Z.MPD,[y.Z.ID,y.Z.PROFILES]),ni(re,y.Z.PERIOD,[y.Z.ID]),ni(re,y.Z.BASE_URL,[y.Z.SERVICE_LOCATION,y.Z.BYTE_RANGE]),ni(re,y.Z.SEGMENT_BASE,[y.Z.INDEX_RANGE]),ni(re,y.Z.INITIALIZATION,[y.Z.RANGE]),ni(re,y.Z.REPRESENTATION_INDEX,[y.Z.RANGE]),ni(re,y.Z.SEGMENT_LIST,[y.Z.INDEX_RANGE]),ni(re,y.Z.BITSTREAM_SWITCHING,[y.Z.RANGE]),ni(re,y.Z.SEGMENT_URL,[y.Z.MEDIA_RANGE,y.Z.INDEX_RANGE]),ni(re,y.Z.SEGMENT_TEMPLATE,[y.Z.INDEX_RANGE,y.Z.MEDIA,y.Z.INDEX,y.Z.INITIALIZATION_MINUS,y.Z.BITSTREAM_SWITCHING_MINUS]),ni(re,y.Z.ASSET_IDENTIFIER,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.EVENT_STREAM,[y.Z.VALUE]),ni(re,y.Z.ADAPTATION_SET,[y.Z.PROFILES,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.CONTENT_TYPE]),ni(re,y.Z.FRAME_PACKING,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.AUDIO_CHANNEL_CONFIGURATION,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.CONTENT_PROTECTION,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.ESSENTIAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.SUPPLEMENTAL_PROPERTY,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.INBAND_EVENT_STREAM,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.ACCESSIBILITY,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.ROLE,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.RATING,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.VIEWPOINT,[y.Z.VALUE,y.Z.ID]),ni(re,y.Z.CONTENT_COMPONENT,[y.Z.CONTENT_TYPE]),ni(re,y.Z.REPRESENTATION,[y.Z.ID,y.Z.DEPENDENCY_ID,y.Z.MEDIA_STREAM_STRUCTURE_ID]),ni(re,y.Z.SUBSET,[y.Z.ID]),ni(re,y.Z.METRICS,[y.Z.METRICS_MINUS]),ni(re,y.Z.REPORTING,[y.Z.VALUE,y.Z.ID]),re);if(de.hasOwnProperty(H)){var Se=de[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(Fu);function gh(L){return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},gh(L)}function mh(L,D){return mh=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},mh(L,D)}function Tf(L,D){return!D||gh(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function hc(L){return hc=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},hc(L)}var Vg=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Kg=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&mh(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=hc(D);if(B){var re=hc(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Tf(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),K.call(this,function(J){for(var H=[y.Z.MIN_BUFFER_TIME,y.Z.MEDIA_PRESENTATION_DURATION,y.Z.MINIMUM_UPDATE_PERIOD,y.Z.TIMESHIFT_BUFFER_DEPTH,y.Z.MAX_SEGMENT_DURATION,y.Z.MAX_SUBSEGMENT_DURATION,y.Z.SUGGESTED_PRESENTATION_DELAY,y.Z.START,v.Z.START_TIME,y.Z.DURATION],re=H.length,de=0;de<re;de++)if(J.nodeName===H[de])return Vg.test(J.value);return!1},function(J){var H=Vg.exec(J),re=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(re=-re),re})}return ee}(Fu);function yh(L){return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},yh(L)}function Sf(L,D){return Sf=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},Sf(L,D)}function zg(L,D){return!D||yh(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function wf(L){return wf=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},wf(L)}var vh=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Yg=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Sf(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=wf(D);if(B){var re=wf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return zg(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),K.call(this,function(J){return vh.test(J.value)},function(J){var H,re=vh.exec(J);if(H=Date.UTC(parseInt(re[1],10),parseInt(re[2],10)-1,parseInt(re[3],10),parseInt(re[4],10),parseInt(re[5],10),re[6]&&parseInt(re[6],10)||0,re[7]&&1e3*parseFloat(re[7])||0),re[9]&&re[10]){var de=60*parseInt(re[9],10)+parseInt(re[10],10);H+=(re[8]==="+"?-1:1)*de*60*1e3}return new Date(H)})}return ee}(Fu);function Uu(L){return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Uu(L)}function Tl(L,D){return Tl=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},Tl(L,D)}function L0(L,D){return!D||Uu(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function Af(L){return Af=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},Af(L)}var k0=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Sl=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Tl(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Af(D);if(B){var re=Af(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return L0(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),K.call(this,function(J){return k0.test(J.value)},function(J){return parseFloat(J)})}return ee}(Fu);function wl(L){return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},wl(L)}function Bu(L,D,B){return D in L?Object.defineProperty(L,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[D]=B,L}function pc(L,D){return pc=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},pc(L,D)}function Wg(L,D){return!D||wl(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function Al(L){return Al=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},Al(L)}var Xg=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&pc(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Al(D);if(B){var re=Al(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Wg(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),K.call(this,function(J,H){var re,de=(Bu(re={},y.Z.ADAPTATION_SET,[y.Z.LANG]),Bu(re,y.Z.REPRESENTATION,[y.Z.LANG]),Bu(re,y.Z.CONTENT_COMPONENT,[y.Z.LANG]),Bu(re,y.Z.LABEL,[y.Z.LANG]),Bu(re,y.Z.GROUP_LABEL,[y.Z.LANG]),re);if(de.hasOwnProperty(H)){var Se=de[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return vi()(J)||String(J)})}return ee}(Fu);function If(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var Cf=function(){function L(K){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=K,this._merge=(ee=K)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var D,B;return D=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&If(D.prototype,B),L}();function gc(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var ju=function(){function L(K,ee,J){var H=this;(function(re,de){if(!(re instanceof de))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=K||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(re){H._properties.push(new Cf(re))})}var D,B;return D=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&gc(D.prototype,B),L}();function bf(L){return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},bf(L)}function Eh(L,D){return Eh=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},Eh(L,D)}function F0(L,D){return!D||bf(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function Zu(L){return Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},Zu(L)}var U0=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Eh(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Zu(D);if(B){var re=Zu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return F0(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[y.Z.PROFILES,y.Z.WIDTH,y.Z.HEIGHT,y.Z.SAR,y.Z.FRAMERATE,y.Z.AUDIO_SAMPLING_RATE,y.Z.MIME_TYPE,y.Z.SEGMENT_PROFILES,y.Z.CODECS,y.Z.MAXIMUM_SAP_PERIOD,y.Z.START_WITH_SAP,y.Z.MAX_PLAYOUT_RATE,y.Z.CODING_DEPENDENCY,y.Z.SCAN_TYPE,y.Z.FRAME_PACKING,y.Z.AUDIO_CHANNEL_CONFIGURATION,y.Z.CONTENT_PROTECTION,y.Z.ESSENTIAL_PROPERTY,y.Z.ESSENTIAL_PROPERTY+"_asArray",y.Z.SUPPLEMENTAL_PROPERTY,y.Z.INBAND_EVENT_STREAM];return K.call(this,y.Z.ADAPTATION_SET,J,[new ju(y.Z.REPRESENTATION,J,[new ju(y.Z.SUB_REPRESENTATION,J)])])}return ee}(ju);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Hr(L)}function Rf(L,D){return Rf=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},Rf(L,D)}function _h(L,D){return!D||Hr(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function Nf(L){return Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},Nf(L)}var B0=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Rf(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Nf(D);if(B){var re=Nf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return _h(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[y.Z.SEGMENT_BASE,y.Z.SEGMENT_TEMPLATE,y.Z.SEGMENT_LIST];return K.call(this,y.Z.PERIOD,J,[new ju(y.Z.ADAPTATION_SET,J,[new ju(y.Z.REPRESENTATION,J)])])}return ee}(ju);function mc(L){L=L||{};var D,B,K,ee,J,H=this.context,re=L.debug;return D={parse:function(de){var Se,Ee=window.performance.now();if(!(Se=ee.xml_str2json(de)))throw new Error("parsing the manifest failed");var ie=window.performance.now();Se.Patch?((Se=Se.Patch).add_asArray&&Se.add_asArray.forEach(function(ge){return J.run(ge)}),Se.replace_asArray&&Se.replace_asArray.forEach(function(ge){return J.run(ge)})):(Se=Se.MPD,J.run(Se));var me=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-Ee).toPrecision(3)+"ms, objectiron: "+(me-ie).toPrecision(3)+"ms, total: "+((me-Ee)/1e3).toPrecision(3)+"s)"),Se.protocol="DASH",Se},getMatchers:function(){return K},getIron:function(){return J}},B=re.getLogger(D),K=[new Kg,new Yg,new Sl,new Xg,new Hg],ee=new Pu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:K}),J=ku(H).create({adaptationset:new U0,period:new B0}),D}mc.__dashjs_factory_name="DashParser";var $g=U.Z.getClassFactory(mc);function Th(L){L=L||{};var D,B,K,ee,J,H=this.context,re=L.debug,de=L.settings,Se=(0,m.Z)(H).getInstance(),Ee=(0,_t.Z)(H).getInstance(),ie=L.mssHandler,me=L.errHandler;function ge(De){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:De.manifest})}function qe(De){var Be=null;return De.indexOf("SmoothStreamingMedia")>-1?(ie&&(Be=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Be):De.indexOf("MPD")>-1||De.indexOf("Patch")>-1?$g(H).create({debug:re}):Be}return D={load:function(De){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_e=new Date,Le=new ji(De,it.w.MPD_TYPE);Be&&(Le.serviceLocation=Be),ze&&(Le.queryParams=ze),Le.requestStartDate||(Le.requestStartDate=_e),Se.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:Le}),K.load({request:Le,success:function(we,je,Z){var le,ae,ue;if(ee)if(Z&&Z!==De?(ae=Ee.parseBaseUrl(Z),le=Z):(Ee.isRelative(De)&&(De=Ee.resolve(De,window.location.href)),ae=Ee.parseBaseUrl(De)),je!="No Content")if(J===null&&(J=qe(we)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{ue=J.parse(we)}catch(Me){return void Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}if(ue){if(ue.url=le||De,ue.originalUrl||(ue.originalUrl=ue.url),de&&de.get().streaming.enableManifestDurationMismatchFix&&ue.mediaPresentationDuration&&ue.Period_asArray.length>1){var Q=ue.Period_asArray.reduce(function(Me,Ie){return Me+Ie.duration},0);!isNaN(Q)&&ue.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),ue.mediaPresentationDuration=Q)}ue.baseUri=ae,ue.loadedTime=new Date,ee.resolveManifestOnLoad(ue),Se.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:we})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))});else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(we,je,Z){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(De,", ").concat(Z))})}})},reset:function(){Se.off(T.Z.XLINK_READY,ge,D),ie&&ie.reset(),ee&&(ee.reset(),ee=null),K&&(K.abort(),K=null)}},B=re.getLogger(D),Se.on(T.Z.XLINK_READY,ge,D),K=wo(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:Ee,constants:v.Z,dashConstants:y.Z,errors:Ae,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=fc(H).create({errHandler:me,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,D}Th.__dashjs_factory_name="ManifestLoader";var Qg=U.Z.getClassFactory(Th);function Sh(){var L=this.context,D=(0,m.Z)(L).getInstance();return{error:function(B){D.trigger(T.Z.ERROR,{error:B})}}}Sh.__dashjs_factory_name="ErrorHandler";var Il=U.Z.getSingletonFactory(Sh),Jg=S(1715);function em(){var L,D,B,K,ee,J,H=this.context,re=(0,m.Z)(H).getInstance();function de(Se,Ee){if(!Ee||!Ee.Period_asArray||Ee.Period_asArray.length===0)return Promise.resolve();var ie=[];return Ee.Period_asArray.forEach(function(me){ie.push(function(ge,qe){return new Promise(function(De){if(ge&&ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.length!==0){var Be=[];ge.AdaptationSet_asArray.forEach(function(ze){D.getIsTypeOf(ze,qe)&&Be.push(function(_e,Le){return new Promise(function(we){if(_e.Representation_asArray&&_e.Representation_asArray.length!==0){var je=[],Z=[];_e.Representation_asArray.forEach(function(le,ae){var ue=D.getCodec(_e,ae,!1),Q=function(Me,Ie,ke){switch(Me){case v.Z.VIDEO:return function(Re,pe){return{codec:pe,width:Re.width||null,height:Re.height||null,framerate:Re.frameRate||null,bitrate:Re.bandwidth||null}}(Ie,ke);case v.Z.AUDIO:return function(Re,pe){var Ne=Re.audioSamplingRate||null;return{codec:pe,bitrate:Re.bandwidth||null,samplerate:Ne}}(Ie,ke);default:return null}}(Le,le,ue);Z.push(Q),je.push(B.supportsCodec(Q,Le))}),Promise.all(je).then(function(le){_e.Representation_asArray=_e.Representation_asArray.filter(function(ae,ue){return le[ue]||J.debug("[Stream] Codec ".concat(Z[ue].codec," not supported ")),le[ue]}),we()}).catch(function(){we()})}else we()})}(ze,qe))}),Promise.all(Be).then(function(){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(ze){var _e=ze.Representation_asArray&&ze.Representation_asArray.length>0;return _e||(re.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:ze}),J.warn("AdaptationSet has been removed because of no supported Representation")),_e}),De()}).catch(function(){De()})}else De()})}(me,Se))}),Promise.all(ie)}return L={setConfig:function(Se){Se&&(Se.adapter&&(D=Se.adapter),Se.capabilities&&(B=Se.capabilities),Se.settings&&(K=Se.settings),Se.customParametersModel&&(ee=Se.customParametersModel))},filterUnsupportedFeatures:function(Se){return new Promise(function(Ee){var ie=[];ie.push(de(v.Z.VIDEO,Se)),ie.push(de(v.Z.AUDIO,Se)),Promise.all(ie).then(function(){K.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(me){me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(qe){return!qe.Representation_asArray||qe.Representation_asArray.length===0||(qe.Representation_asArray=qe.Representation_asArray.filter(function(De){var Be=D.getEssentialPropertiesForRepresentation(De);if(Be&&Be.length>0)for(var ze=0;ze<Be.length;){if(!B.supportsEssentialProperty(Be[ze]))return J.debug("[Stream] EssentialProperty not supported: "+Be[ze].schemeIdUri),!1;ze+=1}return!0}),qe.Representation_asArray&&qe.Representation_asArray.length>0)})})}(Se),function(me){var ge=ee.getCustomCapabilitiesFilters();ge&&ge.length!==0&&me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(qe){qe.AdaptationSet_asArray=qe.AdaptationSet_asArray.filter(function(De){return!De.Representation_asArray||De.Representation_asArray.length===0||(De.Representation_asArray=De.Representation_asArray.filter(function(Be){return!ge.some(function(ze){return!ze(Be)})}),De.Representation_asArray&&De.Representation_asArray.length>0)})})}(Se),Ee()}).catch(function(){Ee()})})}},J=(0,x.Z)(H).getInstance().getLogger(L),L}em.__dashjs_factory_name="CapabilitiesFilter";var j0=U.Z.getSingletonFactory(em),Z0=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function tm(){var L;return{initialize:function(D){if(L=new Z0,!D)return null;var B=D.indexOf("#");if(B!==-1)for(var K=D.substr(B+1).split("&"),ee=0,J=K.length;ee<J;++ee){var H=K[ee],re=H.indexOf("=");if(re!==-1){var de=H.substring(0,re);L.hasOwnProperty(de)&&(L[de]=H.substr(re+1))}}},getURIFragmentData:function(){return L}}}tm.__dashjs_factory_name="URIFragmentModel";var G0=U.Z.getSingletonFactory(tm);function nm(){var L,D=this.context,B=(0,m.Z)(D).getInstance();return{getValue:function(){return L},setValue:function(K){L=K,K&&B.trigger(T.Z.MANIFEST_LOADED,{data:K})}}}nm.__dashjs_factory_name="ManifestModel";var q0=U.Z.getSingletonFactory(nm),wh=-.5;function Ah(){var L,D,B,K,ee=this.context,J=(0,Ze.Z)(ee).getInstance();function H(Se,Ee){return isNaN(Se)?0:Se>0?(Ee&&D.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se<wh?(Ee&&D.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(wh,": ").concat(-50,"% playback speed.")),wh):Se}function re(Se,Ee){return isNaN(Se)?0:Se<0?(Ee&&D.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se>1?(Ee&&D.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Se}function de(){var Se=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,Ee=B.getLiveDelay();return!isNaN(Ee)&&Ee>0?Math.min(Se,Ee):Se}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var Se=K.getServiceDescriptionSettings();return Se&&Se.liveCatchup&&!isNaN(Se.liveCatchup.maxDrift)&&Se.liveCatchup.maxDrift>0?Se.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:de,getInitialBufferLevel:function(){var Se=J.get().streaming.buffer.initialBufferLevel;return isNaN(Se)||Se<0?0:Math.min(de(),Se)},getRetryAttemptsForType:function(Se){var Ee=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[Se]*Ee:J.get().streaming.retryAttempts[Se]},getRetryIntervalsForType:function(Se){var Ee=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[Se]/Ee:J.get().streaming.retryIntervals[Se]},getCatchupPlaybackRates:function(Se){var Ee=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(Ee.min)||!isNaN(Ee.max))return{min:H(Ee.min,Se),max:re(Ee.max,Se)};var ie=K.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var me=ie.liveCatchup.playbackRate;return{min:H(me.min,Se),max:re(me.max,Se)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Se,Ee){try{var ie=J.get().streaming.abr[Se][Ee];if(!isNaN(ie)&&ie!==-1)return ie;var me=K.getServiceDescriptionSettings();return me&&me[Se]&&!isNaN(me[Se][Ee])?me[Se][Ee]:-1}catch(ge){return-1}},setConfig:function(Se){Se.playbackController&&(B=Se.playbackController),Se.serviceDescriptionController&&(K=Se.serviceDescriptionController)},reset:function(){}},D=(0,x.Z)(ee).getInstance().getLogger(L),L}Ah.__dashjs_factory_name="MediaPlayerModel";var Cl=U.Z.getSingletonFactory(Ah),yc=S(1767);function Ih(L){var D=(L=L||{}).abrController,B=L.switchHistory,K=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,re=L.useLoLPABR,de=L.streamProcessor?L.streamProcessor.getScheduleController():null,Se=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,Ee=L.videoModel?L.videoModel:null;function ie(){return Se?Se.mediaInfo:null}return{getMediaType:function(){var me=ie();return me?me.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return K},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var me=ie();return me?me.streamInfo:null},getScheduleController:function(){return de},getAbrController:function(){return D},getRepresentationInfo:function(){return Se},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return re},getVideoModel:function(){return Ee}}}Ih.__dashjs_factory_name="RulesContext";var Ch=U.Z.getClassFactory(Ih),aa=S(2068);function Rr(){var L=[],D=[];return{push:function(B){B.newValue===aa.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var K=B.newValue-B.oldValue,ee=K<0?1:0,J=ee?-K:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,D.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),D.length>8){var re=D.shift();L[re.idx].drops-=re.drop,L[re.idx].dropSize-=re.dropSize,L[re.idx].noDrops-=re.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],D=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var pi=U.Z.getClassFactory(Rr);function lu(){var L={},D={},B={};return{push:function(K,ee,J){if(ee){L[K]||(L[K]=[],D[K]=0,B[K]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,re=J&&J.totalVideoFrames?J.totalVideoFrames:0,de=H-D[K];D[K]=H;var Se=re-B[K];B[K]=re;var Ee=L[K];isNaN(ee)||(Ee[ee]?(Ee[ee].droppedVideoFrames+=de,Ee[ee].totalVideoFrames+=Se):Ee[ee]={droppedVideoFrames:de,totalVideoFrames:Se})}},getFrameHistory:function(K){return L[K]},clearForStream:function(K){try{delete L[K],delete D[K],delete B[K]}catch(ee){}},reset:function(){L={},D={},B={}}}}lu.__dashjs_factory_name="DroppedFramesHistory";var bh=U.Z.getClassFactory(lu);function Gu(L){var D,B,K,ee,J,H=this.context,re=(L=L||{}).settings,de=(0,m.Z)(H).getInstance();function Se(De,Be,ze,_e){var Le=Math.pow(.5,ze/_e.fast);De.fastEstimate=(1-Le)*Be+Le*De.fastEstimate;var we=Math.pow(.5,ze/_e.slow);De.slowEstimate=(1-we)*Be+we*De.slowEstimate,De.totalWeight+=ze}function Ee(De,Be,ze){return re.get().streaming.abr.movingAverageMethod!==v.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(_e,Le){var we=_e?J.throughputHalfLife:J.latencyHalfLife,je=_e?K[Le]:ee[Le];if(!je||je.totalWeight<=0)return NaN;var Z=je.fastEstimate/(1-Math.pow(.5,je.totalWeight/we.fast)),le=je.slowEstimate/(1-Math.pow(.5,je.totalWeight/we.slow));return _e?Math.min(Z,le):Math.max(Z,le)}(De,Be):function(_e,Le,we){var je=function(le,ae,ue){var Q,Me;if(le?(Q=D[ae],Me=ue?3:4):(Q=B[ae],Me=4),Q){if(Me>=Q.length)Me=Q.length;else if(le)for(var Ie=1;Ie<Me;++Ie){var ke=Q[Q.length-Ie]/Q[Q.length-Ie-1];if((ke>=1.3||ke<=.7692307692307692)&&(Me+=1)===Q.length)break}}else Me=0;return Me}(_e,Le,we),Z=(_e?D:B)[Le];return je!==0&&Z&&Z.length!==0?(Z=Z.slice(-je)).reduce(function(le,ae){return le+ae})/Z.length:NaN}(De,Be,ze)}function ie(De,Be){return Ee(!0,De,Be)}function me(De){D[De]=D[De]||[],B[De]=B[De]||[],K[De]=K[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[De]=ee[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ge(){D={},B={},K={},ee={}}var qe={push:function(De,Be,ze){if(Be.trace&&Be.trace.length){var _e,Le=Be.tresponse.getTime()-Be.trequest.getTime()||1,we=Be._tfinish.getTime()-Be.tresponse.getTime()||1,je=Be.trace.reduce(function(ue,Q){return ue+Q.b[0]},0),Z=0;if((_e=Be._fileLoaderType&&Be._fileLoaderType===v.Z.FILE_LOADER_TYPES.FETCH?Be.trace.reduce(function(ue,Q){return ue+Q.d},0):ze?we:Le+we)!==0&&(Z=Math.round(8*je/_e)),Be.cmsd){var le=Be.cmsd.dynamic&&Be.cmsd.dynamic.etp?Be.cmsd.dynamic.etp:null;if(le){var ae=re.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(Z=Z*(1-ae)+le*ae)}}if(me(De),function(ue,Q,Me){return ue===v.Z.VIDEO?Me<re.get().streaming.cacheLoadThresholds[v.Z.VIDEO]:ue===v.Z.AUDIO?Me<re.get().streaming.cacheLoadThresholds[v.Z.AUDIO]:void 0}(De,0,we)){if(D[De].length>0&&!D[De].hasCachedEntries)return;D[De].hasCachedEntries=!0}else D[De]&&D[De].hasCachedEntries&&function(ue){delete D[ue],delete B[ue],delete K[ue],delete ee[ue],me(ue)}(De);D[De].push(Z),de.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:Z,mediaType:De,httpRequest:Be}),D[De].length>20&&D[De].shift(),B[De].push(Le),B[De].length>20&&B[De].shift(),Se(K[De],Z,.001*we,J.throughputHalfLife),Se(ee[De],Le,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(De,Be){var ze=ie(De,Be);return isNaN(ze)||(ze*=re.get().streaming.abr.bandwidthSafetyFactor),ze},getAverageLatency:function(De){return Ee(!1,De)},reset:ge};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ge(),qe}Gu.__dashjs_factory_name="ThroughputHistory";var rm=U.Z.getClassFactory(Gu);function xf(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,ue,Q,Me=this.context,Ie=(0,x.Z)(Me).getInstance(),ke=(0,m.Z)(Me).getInstance();function Re(){ee={},J={},re={},H={},Le={},Z={},le={},ae={},Se===void 0&&(Se=!1),we&&we.reset(),_e=void 0,we=void 0,je=void 0,clearTimeout(de),de=null}function pe(nt){var mt=nt.request.mediaType,Wt=nt.streamId;if(mt&&Wt&&H[Wt]&&Q.get().streaming.abr.autoSwitchBitrate[mt]){var Rt=H[Wt][mt];if(Rt){var en=Ch(Me).create({abrController:L,streamProcessor:Rt,currentRequest:nt.request,useBufferOccupancyABR:Z[mt],useL2AABR:le[mt],useLoLPABR:ae[mt],videoModel:ge}),Jt=B.shouldAbandonFragment(en,Wt);Jt.quality>aa.Z.NO_CHANGE&&Rt.getFragmentModel().getRequests({state:$.FRAGMENT_MODEL_LOADING,index:nt.request.index})[0]&&(re[Wt][mt].state=O.Z.ABANDON_LOAD,Le[Wt][mt].reset(),Le[Wt][mt].push({oldValue:Je(mt,Wt),newValue:Jt.quality,confidence:1,reason:Jt.reason}),ht(mt,K.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(de),de=setTimeout(function(){re[Wt][mt].state=O.Z.ALLOW_LOAD,de=null},Q.get().streaming.abandonLoadTimeout))}}}function Ne(nt){nt.mediaType===v.Z.VIDEO&&(_e!==void 0&&we.push(nt.streamId,_e,ge.getPlaybackQuality()),_e=nt.newQuality)}function Ye(nt){var mt,Wt;nt.metric!==O.Z.HTTP_REQUEST||!nt.value||nt.value.type!==it.w.MEDIA_SEGMENT_TYPE||nt.mediaType!==v.Z.AUDIO&&nt.mediaType!==v.Z.VIDEO||je.push(nt.mediaType,nt.value,Q.get().streaming.abr.useDeadTimeLatency),nt.metric!==O.Z.BUFFER_LEVEL||nt.mediaType!==v.Z.AUDIO&&nt.mediaType!==v.Z.VIDEO||(mt=nt.mediaType,Wt=.001*nt.value.level,Q.get().streaming.abr.ABRStrategy===v.Z.ABR_STRATEGY_DYNAMIC&&function(Rt,en){try{var Jt=qe.getStableBufferTime(),Yt=Jt,Dn=.5*Jt,Nn=Z[Rt],rr=en>(Nn?Dn:Yt);Z[Rt]=rr,rr!==Nn&&(rr?D.info("["+Rt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):D.info("["+Rt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){D.error(ir)}}(mt,Wt))}function dt(nt,mt){try{var Wt;return ee[mt]=ee[mt]||{},ee[mt].hasOwnProperty(nt)||(ee[mt][nt]=0),Wt=function(Rt,en){var Jt=ee[en][Rt],Yt=Jt;if(!H[en]||!H[en][Rt])return Yt;var Dn=at(Rt,en);Dn!==void 0&&(Yt=Math.max(Jt,Dn));var Nn=function(rr,ir){try{var At=qe.getAbrBitrateParameter("maxBitrate",rr);return At>-1?kt(H[ir][rr].getMediaInfo(),At,ir):void 0}catch(Xt){return}}(Rt,en);return Nn!==void 0&&(Yt=Math.min(Yt,Nn)),Yt}(nt,mt),Wt=function(Rt,en,Jt){var Yt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?Rt:Math.min(Rt,Math.round(Yt*Dn))}(Wt,nt,mt),Wt=function(Rt,en,Jt){if(en!==v.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return Rt;Se||An();var Yt=H[Jt][en].getStreamInfo(),Dn=me.getAdaptationForType(Yt.index,en,Yt).Representation_asArray,Nn=Rt;if(Ee>0&&ie>0){for(;Nn>0&&Dn[Nn]&&Ee<Dn[Nn].width&&Ee-Dn[Nn-1].width<Dn[Nn].width-Ee;)Nn-=1;for(;Nn<Dn.length-1&&Dn[Nn].width===Dn[Nn+1].width;)Nn+=1}return Nn}(Wt,nt,mt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&(Wt=function(Rt,en,Jt){if(en!=="video")return Rt;var Yt=Be.getMaxBitrate(en);if(Yt<0)return Rt;var Dn=Gt(Jt,"audio",Je("audio",Jt));Yt-=Dn?Dn.bitrate/1e3:0;var Nn=kt(H[Jt][en].getMediaInfo(),Yt,Jt);return D.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Yt),Math.min(Rt,Nn)}(Wt,nt,mt)),Wt}catch(Rt){return}}function at(nt,mt){try{return function(Wt,Rt){try{var en=qe.getAbrBitrateParameter("minBitrate",Wt);if(en>-1){var Jt=H[Rt][Wt].getMediaInfo(),Yt=Ft(Jt),Dn=kt(Jt,en,Rt);return Yt[Dn]&&Dn<Yt.length-1&&Yt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(Nn){return}}(nt,mt)}catch(Wt){return}}function Je(nt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return mt||(mt=K.getActiveStreamInfo().id),nt&&H[mt]&&H[mt][nt]&&mt?(J[mt]=J[mt]||{},J[mt].hasOwnProperty(nt)||(J[mt][nt]=0),J[mt][nt]):0}catch(Wt){return 0}}function ht(nt,mt,Wt){var Rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(mt&&mt.id&&nt){var en=mt.id,Jt=Je(nt,en);(0,he.SE)(Wt);var Yt=dt(nt,en);Wt!==Jt&&Wt>=0&&Wt<=Yt&&Bt(nt,Jt,Wt,Yt,Rt,en)}}function Bt(nt,mt,Wt,Rt,en,Jt){if(nt&&H[Jt]&&H[Jt][nt]){var Yt=H[Jt][nt].getStreamInfo(),Dn=Yt&&Yt.manifestInfo&&Yt.manifestInfo.isDynamic,Nn=ue.getCurrentBufferLevel(nt);D.info("Stream ID: "+Jt+" ["+nt+"] switch from "+mt+" to "+Wt+"/"+Rt+" (buffer: "+Nn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][nt]=Wt;var rr=Gt(Jt,nt,Wt);ke.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:mt,newQuality:Wt,reason:en,streamInfo:Yt,bitrateInfo:rr,maxIdx:Rt,mediaType:nt},{streamId:Yt.id,mediaType:nt});var ir=je.getAverageThroughput(nt,Dn);isNaN(ir)||ze.setSavedBitrateSettings(nt,ir)}}function Gt(nt,mt,Wt){if(mt&&H&&H[nt]&&H[nt][mt]){var Rt=Ft(H[nt][mt].getMediaInfo());return Rt[Wt]?Rt[Wt]:null}return null}function kt(nt,mt,Wt){var Rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=nt&&nt.type?H[Wt][nt.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&Rt&&en&&en.fragmentDuration){Rt/=1e3;var Jt=en.fragmentDuration;if(Rt>Jt)return 0;var Yt=Rt/Jt;mt*=1-Yt}for(var Dn=Ft(nt),Nn=Dn.length-1;Nn>=0;Nn--){var rr=Dn[Nn];if(1e3*mt>=rr.bitrate)return Nn}return 0}function Ft(nt){var mt=[];if(!nt||!nt.bitrateList)return mt;for(var Wt,Rt=nt.bitrateList,en=nt.type,Jt=0,Yt=Rt.length;Jt<Yt;Jt++)(Wt=new Ru).mediaType=en,Wt.qualityIndex=Jt,Wt.bitrate=Rt[Jt].bandwidth,Wt.width=Rt[Jt].width,Wt.height=Rt[Jt].height,Wt.scanType=Rt[Jt].scanType,mt.push(Wt);return mt}function An(){if(ge){var nt=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Ee=ge.getClientWidth()*nt,ie=ge.getClientHeight()*nt}}return L={initialize:function(){we=bh(Me).create(),je=rm(Me).create({settings:Q}),(B=(0,yc.Z)(Me).create({dashMetrics:ue,customParametersModel:De,mediaPlayerModel:qe,settings:Q})).initialize(),ke.on(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),ke.on(_.Z.METRIC_ADDED,Ye,L),ke.on(T.Z.LOADING_PROGRESS,pe,L)},isPlayingAtTopQuality:function(nt){var mt=nt?nt.id:null,Wt=Je(v.Z.AUDIO,mt),Rt=Je(v.Z.VIDEO,mt);return Wt===dt(v.Z.AUDIO,mt)&&Rt===dt(v.Z.VIDEO,mt)},updateTopQualityIndex:function(nt){var mt=nt.type,Wt=nt.streamInfo.id,Rt=nt.representationCount-1;return ee[Wt]=ee[Wt]||{},ee[Wt][mt]=Rt,Rt},clearDataForStream:function(nt){we&&we.clearForStream(nt),H[nt]&&delete H[nt],Le[nt]&&delete Le[nt],re[nt]&&delete re[nt]},getThroughputHistory:function(){return je},getBitrateList:Ft,getQualityForBitrate:kt,getTopBitrateInfoFor:function(nt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(mt||(mt=K.getActiveStreamInfo().id),nt&&H&&H[mt]&&H[mt][nt]){var Wt=dt(nt,mt),Rt=Ft(H[mt][nt].getMediaInfo());return Rt[Wt]?Rt[Wt]:null}return null},getMinAllowedIndexFor:at,getMaxAllowedIndexFor:dt,getInitialBitrateFor:function(nt,mt){if(function(){if(!ze||!ze.hasOwnProperty("getSavedBitrateSettings"))throw new Error(v.Z.MISSING_CONFIG_ERROR)}(),nt===v.Z.TEXT)return NaN;var Wt=ze.getSavedBitrateSettings(nt),Rt=qe.getAbrBitrateParameter("initialBitrate",nt),en=Q.get().streaming.abr.initialRepresentationRatio[nt];if(Rt===-1)if(en>-1){var Jt=H[mt][nt].getStreamInfo(),Yt=me.getAdaptationForType(Jt.index,nt,Jt).Representation_asArray;Rt=Array.isArray(Yt)?Yt[Math.max(Math.round(Yt.length*en)-1,0)].bandwidth/1e3:0}else Rt=isNaN(Wt)?nt===v.Z.VIDEO?1e3:100:Wt;return Rt},getQualityFor:Je,getAbandonmentStateFor:function(nt,mt){return re[nt]&&re[nt][mt]?re[nt][mt].state:null},setPlaybackQuality:ht,checkPlaybackQuality:function(nt,mt){try{if(!(nt&&H&&H[mt]&&H[mt][nt]))return!1;if(we){var Wt=ge.getPlaybackQuality();Wt&&we.push(mt,_e,Wt)}if(!Q.get().streaming.abr.autoSwitchBitrate[nt])return!1;var Rt=Je(nt,mt),en=Ch(Me).create({abrController:L,switchHistory:Le[mt][nt],droppedFramesHistory:we,streamProcessor:H[mt][nt],currentValue:Rt,useBufferOccupancyABR:Z[nt],useL2AABR:le[nt],useLoLPABR:ae[nt],videoModel:ge}),Jt=at(nt,mt),Yt=dt(nt,mt),Dn=B.getMaxQuality(en),Nn=Dn.quality;return Jt!==void 0&&(Nn>aa.Z.NO_CHANGE?Nn:Rt)<Jt&&(Nn=Jt),Nn>Yt&&(Nn=Yt),Le[mt][nt].push({oldValue:Rt,newValue:Nn}),Nn>aa.Z.NO_CHANGE&&Nn!==Rt&&(re[mt][nt].state===O.Z.ALLOW_LOAD||Nn<Rt)&&(Bt(nt,Rt,Nn,Yt,Dn.reason,mt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(nt){Se=nt},registerStreamType:function(nt,mt){var Wt=mt.getStreamInfo().id;H[Wt]||(H[Wt]={}),Le[Wt]||(Le[Wt]={}),re[Wt]||(re[Wt]={}),Le[Wt][nt]=pi(Me).create(),H[Wt][nt]=mt,re[Wt][nt]={},re[Wt][nt].state=O.Z.ALLOW_LOAD,function(Rt){var en=Q.get().streaming.abr.ABRStrategy;en===v.Z.ABR_STRATEGY_L2A?(Z[Rt]=!1,ae[Rt]=!1,le[Rt]=!0):en===v.Z.ABR_STRATEGY_LoLP?(Z[Rt]=!1,ae[Rt]=!0,le[Rt]=!1):en===v.Z.ABR_STRATEGY_BOLA?(Z[Rt]=!0,ae[Rt]=!1,le[Rt]=!1):en===v.Z.ABR_STRATEGY_THROUGHPUT?(Z[Rt]=!1,ae[Rt]=!1,le[Rt]=!1):en===v.Z.ABR_STRATEGY_DYNAMIC&&(Z[Rt]=!(!Z||!Z[Rt])&&Z[Rt],ae[Rt]=!1,le[Rt]=!1)}(nt),nt===v.Z.VIDEO&&An()},unRegisterStreamType:function(nt,mt){try{H[nt]&&H[nt][mt]&&delete H[nt][mt],Le[nt]&&Le[nt][mt]&&delete Le[nt][mt],re[nt]&&re[nt][mt]&&delete re[nt][mt]}catch(Wt){}},setConfig:function(nt){nt&&(nt.streamController&&(K=nt.streamController),nt.domStorage&&(ze=nt.domStorage),nt.mediaPlayerModel&&(qe=nt.mediaPlayerModel),nt.customParametersModel&&(De=nt.customParametersModel),nt.cmsdModel&&(Be=nt.cmsdModel),nt.dashMetrics&&(ue=nt.dashMetrics),nt.adapter&&(me=nt.adapter),nt.videoModel&&(ge=nt.videoModel),nt.settings&&(Q=nt.settings))},reset:function(){Re(),ke.off(T.Z.LOADING_PROGRESS,pe,L),ke.off(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),ke.off(_.Z.METRIC_ADDED,Ye,L),B&&B.reset()}},D=Ie.getLogger(L),Re(),L}xf.__dashjs_factory_name="AbrController";var Rh=U.Z.getSingletonFactory(xf);Rh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(xf.__dashjs_factory_name,Rh);var Wn=Rh,im=new Map([[v.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[v.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[v.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[v.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function vc(){var L,D,B,K,ee,J,H,re,de=this.context,Se=(0,m.Z)(de).getInstance(),Ee=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function me(){return Ee.length>0}function ge(){if(B&&me()&&B.playbackRate===0){var we=document.createEvent("Event");we.initEvent("waiting",!0,!1),B.dispatchEvent(we)}}function qe(we,je){B&&B.addEventListener(we,je)}function De(we,je){B&&B.removeEventListener(we,je)}function Be(){return B?B.readyState:NaN}function ze(){return B?B.buffered:null}function _e(we,je,Z,le,ae){if(B){for(var ue=0;ue<B.textTracks.length;ue++)if(B.textTracks[ue].kind===we&&(!je||B.textTracks[ue].label==je)&&B.textTracks[ue].language===Z&&B.textTracks[ue].isTTML===le&&B.textTracks[ue].isEmbedded===ae)return B.textTracks[ue]}return null}function Le(we,je){return we===v.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Be()>=we?(je(),null):function(Z,le){var ae=function ue(){De(Z,ue),le(Z)};return qe(Z,ae),{func:ae,event:Z}}(im.get(we),je)}return L={addEventListener:qe,addTextTrack:function(we,je,Z,le,ae){if(!B)return null;var ue=_e(we,je,Z,le,ae);return ue||((ue=B.addTextTrack(we,je,Z)).isEmbedded=ae,ue.isTTML=le),ue},appendChild:function(we){B&&(B.appendChild(we),we.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=we.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=we.isEmbedded))},getBufferRange:ze,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var we="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,je=null;return"getVideoPlaybackQuality"in B?je=B.getVideoPlaybackQuality():we&&(je={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),je},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Be,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:_e,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(K)?B.currentTime:K:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().left-we.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().top-we.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){Se.on(T.Z.PLAYBACK_PLAYING,ge,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(K):null},isStalled:me,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var we=B.play();we&&we.catch&&typeof Promise<"u"&&we.catch(function(je){je.name==="NotAllowedError"&&Se.trigger(T.Z.PLAYBACK_NOT_ALLOWED),D.warn("Caught pending play exception - continuing (".concat(je,")"))})}},removeChild:function(we){B&&B.removeChild(we)},removeEventListener:De,reset:function(){clearTimeout(re),Se.off(T.Z.PLAYBACK_PLAYING,ge,this)},setCurrentTime:function(we,je){B&&(ee&&ee.func&&ee.event&&De(ee.event,ee.func),K=we,ee=Le(v.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==K)try{K=je?function(Z){var le=ze(),ae=Z,ue=9999999999;if(le)for(var Q=0;Q<le.length;Q++){var Me=le.start(Q),Ie=le.end(Q),ke=Math.abs(Me-Z),Re=Math.abs(Ie-Z);if(Z>=Me&&Z<=Ie)return Z;ke<ue&&(ue=ke,ae=Me),Re<ue&&(ue=Re,ae=Ie)}return ae}(K):K,isNaN(K)||(B.currentTime=K),K=NaN}catch(Z){B.readyState===0&&Z.code===Z.INVALID_STATE_ERR&&(re=setTimeout(function(){B.currentTime=K,K=NaN},400))}else K=NaN}))},setElement:function(we){if(!(we==null||we&&/^(VIDEO|AUDIO)$/i.test(we.nodeName)))throw"element is not video or audio DOM type!";(B=we)&&(B.preload="auto")},setPlaybackRate:function(we){var je=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!je&&B.readyState<=2&&we>0?B.addEventListener("canplay",ie):B.playbackRate=we)},setSource:function(we){B&&(we?B.src=we:(B.removeAttribute("src"),B.load()))},setStallState:function(we,je){(function(Z,le){le?function(ae){ae!==null&&B&&!B.seeking&&Ee.indexOf(ae)===-1&&Ee.push(ae)}(Z):function(ae){var ue=Ee.indexOf(ae);ae!==null&&ue!==-1&&Ee.splice(ue,1)}(Z)})(we,je)},setTTMLRenderingDiv:function(we){(J=we).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(we){H=we},waitForReadyState:Le,setDisableRemotePlayback:function(we){B&&(B.disableRemotePlayback=we)}},D=(0,x.Z)(de).getInstance().getLogger(L),K=NaN,L}vc.__dashjs_factory_name="VideoModel";var Sr=U.Z.getSingletonFactory(vc),bl=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],cu="dashjs_?_bitrate",Vr="dashjs_?_settings",Ho="localStorage",Oi="lastBitrate",om="lastMediaSettings";function Nh(L){L=L||{};var D,B,K,ee=this.context,J=L.settings;function H(Ee){if(K!==void 0)return K;var ie;K=!1;try{typeof window<"u"&&(ie=window[Ee])}catch(me){return B.warn("DOMStorage access denied: "+me.message),K}if(!ie||Ee!==Ho)return K;try{ie.setItem("1","1"),ie.removeItem("1"),K=!0}catch(me){B.warn("DOMStorage is supported, but cannot be used: "+me.message)}return K}function re(){var Ee=6e5;return Math.round(new Date().getTime()/Ee)*Ee}function de(Ee,ie){return H(Ee)&&J.get().streaming[ie+"CachingInfo"].enabled}function Se(){if(!J)throw new Error(v.Z.MISSING_CONFIG_ERROR)}return D={getSavedBitrateSettings:function(Ee){if(Se(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(de(Ho,Oi)){var me=cu.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,De=parseFloat(ge.bitrate);isNaN(De)||qe?qe&&localStorage.removeItem(me):(ie=De,B.debug("Last saved bitrate for "+Ee+" was "+De))}catch(Be){return null}}return ie},setSavedBitrateSettings:function(Ee,ie){if(de(Ho,Oi)&&ie){var me=cu.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({bitrate:ie.toFixed(3),timestamp:re()}))}catch(ge){B.error(ge.message)}}},getSavedMediaSettings:function(Ee){if(Se(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(de(Ho,om)){var me=Vr.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ge.settings,qe&&(localStorage.removeItem(me),ie=null)}catch(De){return null}}return ie},setSavedMediaSettings:function(Ee,ie){if(de(Ho,om)){var me=Vr.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({settings:ie,timestamp:re()}))}catch(ge){B.error(ge.message)}}}},B=(0,x.Z)(ee).getInstance().getLogger(D),H(Ho)&&bl.forEach(function(Ee){var ie=localStorage.getItem(Ee.oldKey);if(ie){localStorage.removeItem(Ee.oldKey);try{localStorage.setItem(Ee.newKey,ie)}catch(me){B.error(me.message)}}}),D}Nh.__dashjs_factory_name="DOMStorage";var H0=U.Z.getSingletonFactory(Nh),am=S(2032),xh=S(2011);function Ec(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge=this.context;function qe(_e,Le,we,je){var Z=null,le=_e?me.resolve(_e.path):null,ae=je||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Le};D.debug("Start searching for initialization.");var ue=ze(ae);re.load({request:ue,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(Z=K.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,qe(_e,Le,we,ae);_e.range=Z,we(_e)},error:function(){we(_e)}}),D.debug("Perform init search: "+ae.url)}function De(_e,Le,we,je,Z,le){if(we&&(we.start===void 0||we.end===void 0)){var ae=we?we.toString().split("-"):null;we=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}Z=Z||Be;var ue=null,Q=null,Me=!!we,Ie=_e?me.resolve(_e.path):null,ke={init:!1,url:Ie?Ie.url:void 0,range:Me?we:{start:0,end:1500},searching:!Me,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:Le},Re=ze(ke);re.load({request:Re,success:function(pe){var Ne=ke.bytesToLoad,Ye=pe.byteLength;if(ke.bytesLoaded=ke.range.end-ke.range.start,ue=K.parse(pe),(Q=ue.getBox("sidx"))&&Q.isComplete){var dt,at,Je=Q.references;if(Je!=null&&Je.length>0&&(dt=Je[0].reference_type===1),dt){var ht,Bt,Gt,kt;D.debug("Initiate multiple SIDX load."),ke.range.end=ke.range.start+Q.size;var Ft=[],An=0,nt=(Q.offset||ke.range.start)+Q.size,mt=function(Rt){Rt?(Ft=Ft.concat(Rt),++An>=Bt&&(Ft.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),Z(Ft,_e,je))):Z(null,_e,je)};for(ht=0,Bt=Je.length;ht<Bt;ht++)Gt=nt,kt=nt+Je[ht].referenced_size-1,nt+=Je[ht].referenced_size,De(_e,Le,{start:Gt,end:kt},je,mt,ke)}else D.debug("Parsing segments from SIDX. representation "+Le+" - id: "+_e.id+" for range : "+ke.range.start+" - "+ke.range.end),at=function(Rt,en){for(var Jt,Yt,Dn,Nn,rr=Rt.references,ir=rr.length,At=Rt.timescale,Xt=Rt.earliest_presentation_time,Zt=en.range.start+Rt.offset+Rt.first_offset+Rt.size,un=[],mn=0;mn<ir;mn++)Dn=rr[mn].subsegment_duration,Nn=rr[mn].referenced_size,(Jt=new xh.Z).duration=Dn,Jt.startTime=Xt,Jt.timescale=At,Yt=Zt+Nn-1,Jt.mediaRange=Zt+"-"+Yt,un.push(Jt),Xt+=Dn,Zt+=Nn;return un}(Q,ke),Z(at,_e,je)}else{if(Q)ke.range.start=Q.offset||ke.range.start,ke.range.end=ke.range.start+(Q.size||Ne);else{if(Ye<ke.bytesLoaded)return void Z(null,_e,je);var Wt=ue.getLastBox();Wt&&Wt.size?(ke.range.start=Wt.offset+Wt.size,ke.range.end=ke.range.start+Ne):ke.range.end+=Ne}De(_e,Le,ke.range,je,null,ke)}},error:function(){Z(null,_e,je)}}),D.debug("Perform SIDX load for type ".concat(Le," : ").concat(ke.url," with range ").concat(ke.range.start," - ").concat(ke.range.end))}function Be(_e,Le,we){we({segments:_e,representation:Le,error:_e?void 0:new ce.Z(de.SEGMENT_BASE_LOADER_ERROR_CODE,de.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ze(_e){if(_e.url){var Le=new j.Z;return Le.setInfo(_e),Le}}return L={setConfig:function(_e){_e.baseURLController&&(me=_e.baseURLController),_e.dashMetrics&&(J=_e.dashMetrics),_e.mediaPlayerModel&&(H=_e.mediaPlayerModel),_e.errHandler&&(B=_e.errHandler),_e.boxParser&&(K=_e.boxParser),_e.debug&&(D=_e.debug.getLogger(L)),_e.requestModifier&&(ee=_e.requestModifier),_e.errors&&(de=_e.errors),_e.urlUtils&&(ie=_e.urlUtils),_e.constants&&(Se=_e.constants),_e.dashConstants&&(Ee=_e.dashConstants)},initialize:function(){re=wo(ge).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:K,errors:de,urlUtils:ie,constants:Se,dashConstants:Ee})},loadInitialization:function(_e,Le){return new Promise(function(we){qe(_e,Le,we)})},loadSegments:function(_e,Le,we){return new Promise(function(je){De(_e,Le,we,je)})},reset:function(){re&&(re.abort(),re=null)}}}Ec.__dashjs_factory_name="SegmentBaseLoader";var Ka=U.Z.getSingletonFactory(Ec);function Mh(L){var D;L=L||{};var B=new DataView(L.data),K=0;function ee(H,re){var de=!0,Se=0;if(re===void 0&&(re=!1),H.tag>16777215?(B.getUint32(K)!==H.tag&&(de=!1),Se=4):H.tag>65535?(256*B.getUint16(K)+B.getUint8(K+2)!==H.tag&&(de=!1),Se=3):H.tag>255?(B.getUint16(K)!==H.tag&&(de=!1),Se=2):(B.getUint8(K)!==H.tag&&(de=!1),Se=1),!de&&H.required&&!re)throw new Error("required tag not found");return de&&(K+=Se),de}function J(H){var re=1,de=128,Se=-1,Ee=0,ie=B.getUint8(K),me=0;for(me=0;me<8;me+=1){if((ie&de)===de){Ee=H===void 0?ie&~de:ie,Se=me;break}de>>=1}for(me=0;me<Se;me+=1,re+=1)Ee=Ee<<8|255&B.getUint8(K+re);return K+=re,Ee}return D={getPos:function(){return K},setPos:function(H){K=H},consumeTag:ee,consumeTagAndSize:function(H,re){var de=ee(H,re);return de&&J(),de},parseTag:function(H){var re;return ee(H),re=J(),D[H.parse](re)},skipOverElement:function(H,re){var de,Se=ee(H,re);return Se&&(de=J(),K+=de),Se},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var re;switch(H){case 4:re=B.getFloat32(K),K+=4;break;case 8:re=B.getFloat64(K),K+=8}return re},getMatroskaUint:function(H){if(H>4)return function(Se){for(var Ee=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,me=0;me<Se;me+=1){if(ie>Ee)throw new Error("Value exceeds safe integer limit");ie*=256;var ge=B.getUint8(K+me);if(ie>Number.MAX_SAFE_INTEGER-ge)throw new Error("Value exceeds safe integer limit");ie+=ge}return K+=Se,ie}(H);for(var re=0,de=0;de<H;de+=1)re<<=8,re|=255&B.getUint8(K+de);return K+=H,re>>>0},moreData:function(){return K<B.byteLength}}}Mh.__dashjs_factory_name="EBMLParser";var _c=U.Z.getClassFactory(Mh);function qu(){var L,D,B,K,ee,J,H,re,de,Se,Ee=this.context;function ie(me){var ge=new j.Z;return ge.setInfo(me),ge}return L={setConfig:function(me){if(!(me.baseURLController&&me.dashMetrics&&me.mediaPlayerModel&&me.errHandler))throw new Error(v.Z.MISSING_CONFIG_ERROR);Se=me.baseURLController,J=me.dashMetrics,H=me.mediaPlayerModel,K=me.errHandler,de=me.errors,D=me.debug.getLogger(L),ee=me.requestModifier},initialize:function(){re=wo(Ee).create({errHandler:K,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:de})},loadInitialization:function(me,ge){return new Promise(function(qe){var De=null,Be=me?Se.resolve(me.path):null,ze=me?me.range.split("-"):null,_e={range:{start:ze?parseFloat(ze[0]):null,end:ze?parseFloat(ze[1]):null},request:De,url:Be?Be.url:void 0,init:!0,mediaType:ge};D.info("Start loading initialization."),De=ie(_e),re.load({request:De,success:function(){qe(me)},error:function(){qe(me)}}),D.debug("Perform init load: "+_e.url)})},loadSegments:function(me,ge,qe){return new Promise(function(De){var Be=null,ze=me?Se.resolve(me.path):null,_e=ze?ze.url:void 0;Be=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Be,url:_e,init:!1,mediaType:ge}),D.debug("Parsing ebml header"),re.load({request:Be,success:function(Le){(function(we,je,Z,le){if(we&&we.byteLength!==0){var ae,ue,Q,Me,Ie=_c(Ee).create({data:we}),ke=Z?Z.split("-"):null,Re=null,pe={url:je,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:Re};for(D.debug("Parse EBML header: "+pe.url),Ie.skipOverElement(B.EBML),Ie.consumeTag(B.Segment),Q=Ie.getMatroskaCodedNum(),Q+=Ie.getPos(),Me=Ie.getPos();Ie.moreData()&&!Ie.consumeTagAndSize(B.Segment.Info,!0);)if(!(Ie.skipOverElement(B.Segment.SeekHead,!0)||Ie.skipOverElement(B.Segment.Tracks,!0)||Ie.skipOverElement(B.Segment.Cues,!0)||Ie.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var Ne=Ie.getMatroskaCodedNum(!0),Ye=Ie.getMatroskaCodedNum();Ne===B.Segment.Info.Duration.tag?ae=Ie[B.Segment.Info.Duration.parse](Ye):Ie.setPos(Ie.getPos()+Ye)}Re=ie(pe),re.load({request:Re,success:function(dt){ue=function(at,Je,ht,Bt){var Gt,kt,Ft,An,nt,mt,Wt,Rt;for(Ft=[],nt=0,mt=(kt=function(en){var Jt,Yt,Dn=[],Nn=_c(Ee).create({data:en});for(Nn.consumeTagAndSize(B.Segment.Cues);Nn.moreData()&&Nn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=Nn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];Nn.moreData()&&Nn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=Nn.getMatroskaCodedNum(),ir=Nn.getPos();if((Yt={}).Track=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Yt.Track===0)throw new Error("Cue track cannot be 0");Yt.ClusterPosition=Nn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Yt),Nn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(at)).length;nt<mt;nt+=1)An=new xh.Z,Gt=nt<kt.length-1?kt[nt+1].CueTime-kt[nt].CueTime:Bt-kt[nt].CueTime,An.duration=Gt,An.startTime=kt[nt].CueTime,An.timescale=1e3,Wt=kt[nt].CueTracks[0].ClusterPosition+Je,Rt=nt<kt.length-1?kt[nt+1].CueTracks[0].ClusterPosition+Je-1:ht-1,An.mediaRange=Wt+"-"+Rt,Ft.push(An);return D.debug("Parsed cues: "+Ft.length+" cues."),Ft}(dt,Me,Q,ae),le(ue)},error:function(){D.error("Download Error: Cues "+pe.url),le(null)}}),D.debug("Perform cues load: "+pe.url+" bytes="+pe.range.start+"-"+pe.range.end)}else le(null)})(Le,_e,qe,function(we){De({segments:we,representation:me,error:we?void 0:new ce.Z(de.SEGMENT_BASE_LOADER_ERROR_CODE,de.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){De({representation:me,error:new ce.Z(de.SEGMENT_BASE_LOADER_ERROR_CODE,de.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){re&&(re.abort(),re=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}qu.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=U.Z.getSingletonFactory(qu);function Mf(L){L=L||{};var D,B,K,ee=this.context,J=L.eventBus,H=L.events,re=L.dashMetrics,de=L.mediaPlayerModel,Se=L.errHandler,Ee=L.baseURLController,ie=L.debug,me=L.boxParser,ge=L.requestModifier,qe=L.errors;function De(Be){return(Be?Be.split("/")[1]:"").toLowerCase()==="webm"}return D={initialize:function(){B.initialize(),K.initialize()},getSegmentBaseInitSegment:function(Be){return De(Be.representation.mimeType)?K.loadInitialization(Be.representation,Be.mediaType):B.loadInitialization(Be.representation,Be.mediaType)},getSegmentList:function(Be){return De(Be.mimeType)?K.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null):B.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null)},reset:function(){B.reset(),K.reset()}},B=Ka(ee).getInstance(),K=jr(ee).getInstance(),B.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:de,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,boxParser:me,requestModifier:ge}),K.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:de,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,requestModifier:ge}),D}Mf.__dashjs_factory_name="SegmentBaseController";var V0=U.Z.getSingletonFactory(Mf),Rl=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Tc=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Ps=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function sm(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var kr=function(){function L(K){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=K[0]=="/",this.path=K.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},re=J.indexOf("[");if(re!=-1){H.name=J.substring(0,re);var de=J.substring(re+1,J.length-1);ee.valid=ee.valid&&de.indexOf("[")==-1;var Se=de.indexOf("=");Se!=-1?(H.attribute={name:de.substring(1,Se),value:de.substring(Se+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(de,10)-1}return H})}var D,B;return D=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(K,ee){for(var J=null,H=K,re=1,de="MPD";re<this.path.length&&H!==null;){J=H;var Se=this.path[re];if(de=Se.name,re!==this.path.length-1||!de.startsWith("@")&&de!=="text()"){var Ee=J[de+"_asArray"]||[];Ee.length===0&&J[de]&&Ee.push(J[de]),Se.position?H=Ee[Se.position]||null:Se.attribute?function(){var ie=Se.attribute;H=Ee.filter(function(me){return me[ie.name]==ie.value})[0]||null}():H=Ee[0]||null}re++}return H===null?null:de.startsWith("@")?{name:de.substring(1),leaf:H,target:H}:de==="text()"?{name:"__text",leaf:H,target:H}:{name:de,leaf:H,target:ee?J:H}}}])&&sm(D.prototype,B),L}();function vr(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var fu=function(){function L(K,ee,J){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=K,this.xpath=ee,this.value=J,this.position=null}var D,B;return D=L,(B=[{key:"getMpdTarget",value:function(K){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(K,ee)}}])&&vr(D.prototype,B),L}();function wi(){var L,D,B=this.context;return L={getIsPatch:function(K){return K&&K.hasOwnProperty(y.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(K){return K&&K.hasOwnProperty(y.Z.PUBLISH_TIME)?new Date(K[y.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(K){return K&&K.hasOwnProperty(y.Z.ORIGINAL_PUBLISH_TIME)?new Date(K[y.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(K){return K&&K[y.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(K){return K?(K.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return D.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],re=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return D.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;re="".concat(re,"/").concat(H.type)}var de=new kr(re);if(!de.isValid())return D.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(re)),null;var Se=null;de.findsAttribute()||de.findsTextReplace()?Se=H.__text||"":J!=="remove"&&(Se=H.__children.reduce(function(ie,me){var ge=Object.keys(me)[0];return ge!=="#text"&&(ie[ge]=ie[ge]||[],ie[ge].push(me[ge])),ie},{}));var Ee=new fu(J,de,Se);return J==="add"&&(Ee.position=H.pos),Ee}).filter(function(ee){return!!ee}):[]}},D=(0,x.Z)(B).getInstance().getLogger(L),L}wi.__dashjs_factory_name="PatchManifestModel";var Dh=U.Z.getSingletonFactory(wi);function Hu(){var L,D,B,K,ee,J,H,re=this.context;function de(ae,ue,Q){var Me,Ie=D.getAdaptationsForType(K[0].mpd.manifest,ae,ue);if(!Ie||Ie.length===0)return null;if(Ie.length>1&&Q){var ke=ie(Q,ue);if(ee[Q.id]&&ee[Q.id][ue]){for(var Re=0,pe=Ie.length;Re<pe;Re++)if(Se(ee[Q.id][ue],ke[Re]))return Ie[Re]}for(var Ne=0,Ye=Ie.length;Ne<Ye;Ne++)if(Me=Ie[Ne],D.getRolesForAdaptation(Me).filter(function(dt){return dt.value===y.Z.MAIN})[0])return Ie[Ne]}return Ie[0]}function Se(ae,ue){if(!ae||!ue)return!1;var Q=ae.id===ue.id,Me=ae.codec===ue.codec,Ie=ae.viewpoint===ue.viewpoint,ke=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(ue.viewpointsWithSchemeIdUri),Re=ae.lang===ue.lang,pe=ae.roles.toString()===ue.roles.toString(),Ne=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(ue.rolesWithSchemeIdUri),Ye=ae.accessibility.toString()===ue.accessibility.toString(),dt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(ue.accessibilitiesWithSchemeIdUri),at=ae.audioChannelConfiguration.toString()===ue.audioChannelConfiguration.toString(),Je=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(ue.audioChannelConfigurationsWithSchemeIdUri);return Q&&Me&&Ie&&ke&&Re&&pe&&Ne&&Ye&&dt&&at&&Je}function Ee(ae,ue,Q,Me,Ie,ke){var Re,pe,Ne,Ye,dt,at,Je=[];if(!Me||Me.length===0)return[];var ht=D.getAdaptationsForPeriod(ue);for(Ye=0,at=Me.length;Ye<at;Ye++)if(Re=Me[Ye],pe=_e(ht[Ne=D.getIndexForAdaptation(Re,ae,Q.index)]),ke){var Bt=pe.accessibility.length;for(dt=0;dt<Bt;dt++)if(pe){var Gt=pe.accessibility[dt];if(Gt.indexOf("cea-608:")===0){var kt=Gt.substring(8).split(";");if(kt[0].substring(0,2)==="CC")for(dt=0;dt<kt.length;dt++)pe||(pe=_e.call(this,ht[Ne])),Le(pe,kt[dt].substring(0,3),kt[dt].substring(4)),Je.push(pe),pe=null;else for(dt=0;dt<kt.length;dt++)pe||(pe=_e.call(this,ht[Ne])),Le(pe,"CC"+(dt+1),kt[dt]),Je.push(pe),pe=null}else Gt.indexOf("cea-608")===0&&(Le(pe,J.CC1,"eng"),Je.push(pe),pe=null)}}else Ie===J.IMAGE?(pe.type=J.IMAGE,Je.push(pe),pe=null):pe&&Je.push(pe);return Je}function ie(ae,ue,Q){var Me=K,Ie=Q,ke=[];if(Ie)je(),Me=me(Ie);else{if(!(K.length>0))return ke;Ie=K[0].mpd.manifest}var Re=ze(ae,Me),pe=D.getAdaptationsForType(Ie,ae?ae.index:null,ue);return ke=Ee(Ie,Re,ae,pe,ue),ue===J.TEXT&&(pe=D.getAdaptationsForType(Ie,ae?ae.index:null,J.VIDEO),ke=ke.concat(Ee(Ie,Re,ae,pe,ue,!0))),ke}function me(ae){var ue=ge(ae);return D.getRegularPeriods(ue)}function ge(ae){var ue=De(ae);return D.getMpd(ue)}function qe(){K=[],ee={}}function De(ae){return ae||(K.length>0?K[0].mpd.manifest:null)}function Be(ae){try{var ue=ze(ae.streamInfo,K),Q=D.getAdaptationsForPeriod(ue);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Me){return null}}function ze(ae,ue){for(var Q=ue.length,Me=0;Me<Q;Me++){var Ie=ue[Me];if(ae&&ae.id===Ie.id)return Ie}return null}function _e(ae){if(!ae)return null;var ue,Q,Me,Ie,ke,Re=new Tc,pe=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Re.id=ae.id,Re.index=ae.index,Re.type=ae.type,Re.streamInfo=we(ae.period),Re.representationCount=D.getRepresentationCount(pe),Re.labels=D.getLabelsForAdaptation(pe),Re.lang=D.getLanguageForAdaptation(pe),Re.segmentAlignment=D.getSegmentAlignment(pe),Re.subSegmentAlignment=D.getSubSegmentAlignment(pe),ue=D.getViewpointForAdaptation(pe),Re.viewpoint=ue.length?ue[0].value:void 0,Re.viewpointsWithSchemeIdUri=ue,ke=D.getAccessibilityForAdaptation(pe),Re.accessibility=ke.map(function(Je){var ht=Je.value,Bt=ht;return Je.schemeIdUri&&Je.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(Bt=ht?"cea-608:"+ht:"cea-608",Re.embeddedCaptions=!0),Bt}),Re.accessibilitiesWithSchemeIdUri=ke,Q=D.getAudioChannelConfigurationForAdaptation(pe),Re.audioChannelConfiguration=Q.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Q,Re.audioChannelConfiguration.length===0&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0&&(Me=D.getAudioChannelConfigurationForRepresentation(pe.Representation_asArray[0]),Re.audioChannelConfiguration=Me.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Me),Ie=D.getRolesForAdaptation(pe),Re.roles=Ie.map(function(Je){return Je.value}),Re.rolesWithSchemeIdUri=Ie,Re.codec=D.getCodec(pe),Re.mimeType=D.getMimeType(pe),Re.contentProtection=D.getContentProtectionData(pe),Re.bitrateList=D.getBitrateListForAdaptation(pe),Re.selectionPriority=D.getSelectionPriority(pe),Re.contentProtection){var Ne=Re.contentProtection.map(function(Je){return D.getKID(Je)}).filter(function(Je){return Je!==null});if(Ne.length){var Ye=Ne[0];Re.contentProtection.forEach(function(Je){Je.keyId=Ye})}}if(Re.isText=D.getIsText(pe),Re.supplementalProperties=D.getSupplementalPropertiesForAdaptation(pe),(!Re.supplementalProperties||Object.keys(Re.supplementalProperties).length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var dt=pe.Representation_asArray.map(function(Je){return D.getSupplementalPropertiesForRepresentation(Je)});dt.every(function(Je){return JSON.stringify(Je)===JSON.stringify(dt[0])})&&(Re.supplementalProperties=dt[0])}if(Re.supplementalPropertiesAsArray=D.getSupplementalPropertiesAsArrayForAdaptation(pe),(!Re.supplementalPropertiesAsArray||Re.supplementalPropertiesAsArray.length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var at=pe.Representation_asArray.map(function(Je){return D.getSupplementalPropertiesAsArrayForRepresentation(Je)});at.every(function(Je){return JSON.stringify(Je)===JSON.stringify(at[0])})&&(Re.supplementalPropertiesAsArray=at[0])}return Re.essentialProperties=D.getEssentialPropertiesForAdaptation(pe),Re.essentialPropertiesAsArray=D.getEssentialPropertiesAsArrayForAdaptation(pe),Re.isFragmented=D.getIsFragmented(pe),Re.isEmbedded=!1,Re}function Le(ae,ue,Q){ae.id=ue,ae.index=100+parseInt(ue.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Me=vi()(Q);ae.lang=Me||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function we(ae){var ue,Q,Me=new Dr;return Me.id=ae.id,Me.index=ae.index,Me.start=ae.start,Me.duration=ae.duration,Me.manifestInfo=(ue=ae.mpd,(Q=new Ps).dvrWindowSize=ue.timeShiftBufferDepth,Q.loadedTime=ue.manifest.loadedTime,Q.availableFrom=ue.availabilityStartTime,Q.minBufferTime=ue.manifest.minBufferTime,Q.maxFragmentDuration=ue.maxSegmentDuration,Q.duration=D.getDuration(ue.manifest),Q.isDynamic=D.getIsDynamic(ue.manifest),Q.serviceDescriptions=D.getServiceDescriptions(ue.manifest),Q.protocol=ue.manifest.protocol,Q),Me.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Me.start+Me.duration-Me.manifestInfo.duration)<1,Me}function je(){if(!J)throw new Error("setConfig function has to be called previously")}function Z(ae){return K.length>0?K[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,ue,Q){var Me,Ie,ke,Re,pe;if(ae){for(Me=ae.AdaptationSet_asArray,Re=0;Re<Me.length;Re+=1)for(ke=Me[Re].Representation_asArray,pe=0;pe<ke.length;pe+=1)if(ue===(Ie=ke[pe]).id)return Q?pe:Ie}return null}return L={getBandwidthForRepresentation:function(ae,ue){var Q;return(Q=le(Z(ue),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,ue){return function(Q,Me){var Ie=le(Q,Me,!0);return Ie!==null?Ie:-1}(Z(ue),ae)},getMaxIndexForBufferType:function(ae,ue){return function(Q,Me){var Ie,ke,Re,pe;if(!Q||!Me)return-1;for(ke=Q.AdaptationSet_asArray,pe=0;pe<ke.length;pe+=1)if(Re=(Ie=ke[pe]).Representation_asArray,D.getIsTypeOf(Ie,Me))return Re.length;return-1}(Z(ue),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var ue=new Rl,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Me=D.getRepresentationFor(ae.index,Q);return ue.id=ae.id,ue.quality=ae.index,ue.bandwidth=D.getBandwidth(Me),ue.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),ue.MSETimeOffset=ae.MSETimeOffset,ue.mediaInfo=_e(ae.adaptation),ue}return null},getStreamsInfo:function(ae,ue){var Q=[],Me=K;if(ae&&(je(),Me=me(ae)),Me.length>0){(!ue||ue>Me.length)&&(ue=Me.length);for(var Ie=0;Ie<ue;Ie++)Q.push(we(Me[Ie]))}return Q},getMediaInfoForType:function(ae,ue){if(K.length===0||!ae)return null;var Q=ze(ae,K);if(!Q)return null;var Me=D.getAdaptationsForPeriod(Q),Ie=de(ae.index,ue,ae);return Ie?_e(Me[D.getIndexForAdaptation(Ie,K[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:de,getRealAdaptation:function(ae,ue){var Q,Me,Ie=ze(ae,K);return Q=ue?ue.id:null,K.length>0&&Ie&&(Me=Q?D.getAdaptationForId(Q,K[0].mpd.manifest,Ie.index):D.getAdaptationForIndex(ue?ue.index:null,K[0].mpd.manifest,Ie.index)),Me},getProducerReferenceTimes:function(ae,ue){var Q,Me,Ie=ze(ae,K);return Q=ue?ue.id:null,K.length>0&&Ie&&(Me=Q?D.getAdaptationForId(Q,K[0].mpd.manifest,Ie.index):D.getAdaptationForIndex(ue?ue.index:null,K[0].mpd.manifest,Ie.index)),Me?D.getProducerReferenceTimesForAdaptation(Me):[]},getRealPeriodByIndex:function(ae){return D.getRealPeriodForIndex(ae,K[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return D.getEssentialPropertiesForRepresentation(ae)}catch(ue){return[]}},getVoRepresentations:function(ae){var ue=Be(ae);return D.getRepresentationsForAdaptation(ue)},getEventsFor:function(ae,ue,Q){var Me=[];if(K.length>0){var Ie=K[0].mpd.manifest;if(ae instanceof Dr){var ke=ze(ae,K);Me=D.getEventsForPeriod(ke)}else if(ae instanceof Tc){var Re=ze(Q,K);Me=D.getEventStreamForAdaptationSet(Ie,Be(ae),Re)}else if(ae instanceof Rl){var pe=ze(Q,K);Me=D.getEventStreamForRepresentation(Ie,ue,pe)}}return Me},getEvent:function(ae,ue,Q,Me){try{if(!ae||!ue||isNaN(Q)||!Me)return null;var Ie=ae.scheme_id_uri,ke=ae.value;if(!ue[Ie+"/"+ke])return null;var Re,pe=new to,Ne=ae.timescale||1,Ye=Me.adaptation.period.start,dt=ue[Ie+"/"+ke],at=isNaN(Me.presentationTimeOffset)?isNaN(dt.presentationTimeOffset)?0:dt.presentationTimeOffset:Me.presentationTimeOffset,Je=ae.presentation_time_delta/Ne;Re=ae.version===0?Ye+Q-at+Je:Ye-at+Je;var ht=ae.event_duration/Ne,Bt=ae.id,Gt=ae.message_data;return pe.eventStream=dt,pe.eventStream.value=ke,pe.eventStream.timescale=Ne,pe.duration=ht,pe.id=Bt,pe.calculatedPresentationTime=Re,pe.messageData=Gt,pe.presentationTimeDelta=Je,pe}catch(kt){return null}},getMpd:ge,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&D.setConfig({errHandler:ae.errHandler}),ae.BASE64&&D.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;je(),K=me(ae)},getIsTextTrack:function(ae){return D.getIsText(ae)},getUTCTimingSources:function(){var ae=De();return D.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=K.length>0?K[0].mpd:null;return D.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var ue=ge(ae);return D.getAvailabilityStartTime(ue)},getIsTypeOf:function(ae,ue){return D.getIsTypeOf(ae,ue)},getIsDynamic:function(ae){var ue=De(ae);return D.getIsDynamic(ue)},getDuration:function(ae){var ue=De(ae);return D.getDuration(ue)},getRegularPeriods:me,getContentSteering:function(ae){return D.getContentSteering(ae)},getLocation:function(ae){return D.getLocation(ae)},getPatchLocation:function(ae){var ue=D.getPatchLocation(ae),Q=D.getPublishTime(ae);return ue&&ue.length!==0&&Q?ue.filter(function(Me){return isNaN(Me.ttl)||Q.getTime()+Me.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return D.getManifestUpdatePeriod(ae,ue)},getPublishTime:function(ae){return D.getPublishTime(ae)},getIsDVB:function(ae){return D.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return D.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return D.getRepresentationSortFunction()},getCodec:function(ae,ue,Q){return D.getCodec(ae,ue,Q)},getPeriodById:function(ae){if(!ae||K.length===0)return null;var ue=K.filter(function(Q){return Q.id===ae});return ue&&ue.length>0?ue[0]:null},setCurrentMediaInfo:function(ae,ue,Q){ee[ae]=ee[ae]||{},ee[ae][ue]=ee[ae][ue]||{},ee[ae][ue]=Q},isPatchValid:function(ae,ue){var Q=D.getId(ae),Me=B.getMpdId(ue),Ie=D.getPublishTime(ae),ke=B.getPublishTime(ue),Re=B.getOriginalPublishTime(ue);return!!(Q&&Me&&Q==Me&&Ie&&Re&&Ie.getTime()==Re.getTime()&&ke&&Ie.getTime()<ke.getTime())},applyPatchToManifest:function(ae,ue){B.getPatchOperations(ue).forEach(function(Q){var Me=Q.getMpdTarget(ae);if(Me!==null){var Ie=Me.name,ke=Me.target,Re=Me.leaf;if(Q.xpath.findsAttribute()||Ie==="__text")switch(Q.action){case"add":case"replace":ke[Ie]=Q.value;break;case"remove":delete ke[Ie]}else{var pe=(ke[Ie+"_asArray"]||[]).indexOf(Re),Ne=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete ke[Ie],pe!=-1)){var Ye=ke[Ie+"_asArray"];Ye.splice(pe,1),Ye.length>1?ke[Ie]=Ye:Ye.length==1?ke[Ie]=Ye[0]:delete ke[Ie+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(dt){var at=Q.value[dt],Je=ke[dt+"_asArray"]||[];if(Je.length===0&&ke[dt]&&Je.push(ke[dt]),Je.length===0)Je=at;else{var ht=Je.length;ht=dt==Ie&&pe!=-1?pe+(Ne?0:1)+(Q.action=="replace"?-1:0):Ne?0:Je.length,Je.splice.apply(Je,[ht,0].concat(at))}ke[dt+"_asArray"]=Je,ke[dt]=Je.length==1?Je[0]:Je})}}})},areMediaInfosEqual:Se,reset:qe},D=Kn(re).getInstance(),B=Dh(re).getInstance(),qe(),L}Hu.__dashjs_factory_name="DashAdapter";var um=U.Z.getSingletonFactory(Hu);function Df(L,D){for(var B=0;B<D.length;B++){var K=D[B];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(L,K.key,K)}}var Nl=function(){function L(){(function(K,ee){if(!(K instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var D,B;return D=L,B=[{key:"round10",value:function(K,ee){return function(J,H,re){return re===void 0||+re==0?Math[J](H):(re=+re,(H=+H)===null||isNaN(H)||typeof re!="number"||re%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-re:-re)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+re:re))))}("round",K,ee)}}],B&&Df(D,B),L}(),K0=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},lm=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},cm=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},Pf=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=O.Z.BUFFER_EMPTY},Ph=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},xl=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Sc(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")}var z0=function L(){Sc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Of=function L(){Sc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},Y0=function L(){Sc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Wr=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},bi=function L(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function du(L){var D,B,K=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function re(ge){J.trigger(T.Z.METRIC_CHANGED,{mediaType:ge}),H()}function de(ge,qe,De){J.trigger(T.Z.METRIC_UPDATED,{mediaType:ge,metric:qe,value:De}),re(ge)}function Se(ge,qe,De){J.trigger(T.Z.METRIC_ADDED,{mediaType:ge,metric:qe,value:De}),re(ge)}function Ee(ge,qe){var De=null;return ge&&(B.hasOwnProperty(ge)?De=B[ge]:qe||(De=new K0,B[ge]=De)),De}function ie(ge,qe,De){var Be=Ee(ge);Be!==null&&(Be[qe].push(De),Be[qe].length>K.get().streaming.metrics.maxListDepth&&Be[qe].shift())}function me(ge,qe,De){ie(ge,qe,De),Se(ge,qe,De)}return D={clearCurrentMetricsForType:function(ge){delete B[ge],re(ge)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:Ee,addHttpRequest:function ge(qe,De,Be,ze,_e,Le,we,je,Z,le,ae,ue,Q,Me,Ie,ke,Re){var pe=new it.w;Le!=null&&Le!==ze&&(ge(qe,null,Be,ze,_e,null,null,je,Z,null,null,null,Q,null,null,ke,Re),pe.actualurl=Le),pe.tcpid=De,pe.type=Be,pe.url=ze,pe.range=je,pe.trequest=Z,pe.tresponse=le,pe.responsecode=ue,pe.cmsd=Re,pe._tfinish=ae,pe._stream=qe,pe._mediaduration=Q,pe._quality=_e,pe._responseHeaders=Me,pe._serviceLocation=we,pe._fileLoaderType=ke,Ie?Ie.forEach(function(Ne){(function(Ye,dt,at,Je){var ht=new it.O;ht.s=dt,ht.d=at,ht.b=Je,Ye.trace.push(ht),Ye.interval||(Ye.interval=0),Ye.interval+=at})(pe,Ne.s,Ne.d,Ne.b)}):(delete pe.interval,delete pe.trace),me(qe,O.Z.HTTP_REQUEST,pe)},addRepresentationSwitch:function(ge,qe,De,Be,ze){var _e=new lm;_e.t=qe,_e.mt=De,_e.to=Be,ze?_e.lto=ze:delete _e.lto,me(ge,O.Z.TRACK_SWITCH,_e)},addBufferLevel:function(ge,qe,De){var Be=new cm;Be.t=qe,Be.level=De,me(ge,O.Z.BUFFER_LEVEL,Be)},addBufferState:function(ge,qe,De){var Be=new Pf;Be.target=De,Be.state=qe,me(ge,O.Z.BUFFER_STATE,Be)},addDVRInfo:function(ge,qe,De,Be){var ze=new Ph;ze.time=qe,ze.range=Be,ze.manifestInfo=De,me(ge,O.Z.DVR_INFO,ze)},addDroppedFrames:function(ge,qe){var De=new xl,Be=Ee(ge).DroppedFrames;qe&&(De.time=qe.creationTime,De.droppedFrames=qe.droppedVideoFrames,Be.length>0&&Be[Be.length-1]==De||me(ge,O.Z.DROPPED_FRAMES,De))},addSchedulingInfo:function(ge,qe,De,Be,ze,_e,Le,we,je){var Z=new Wr;Z.mediaType=ge,Z.t=qe,Z.type=De,Z.startTime=Be,Z.availabilityStartTime=ze,Z.duration=_e,Z.quality=Le,Z.range=we,Z.state=je,me(ge,O.Z.SCHEDULING_INFO,Z)},addRequestsQueue:function(ge,qe,De){var Be=new bi;Be.loadingRequests=qe,Be.executedRequests=De,Ee(ge).RequestsQueue=Be,Se(ge,O.Z.REQUESTS_QUEUE,Be)},addManifestUpdate:function(ge,qe,De,Be,ze,_e,Le,we,je,Z){var le=new z0;le.mediaType=ge,le.type=qe,le.requestTime=De,le.fetchTime=Be,le.availabilityStartTime=ze,le.presentationStartTime=_e,le.clientTimeOffset=Le,le.currentTime=we,le.buffered=je,le.latency=Z,ie(v.Z.STREAM,O.Z.MANIFEST_UPDATE,le),Se(ge,O.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(ge,qe){if(ge){for(var De in qe)ge[De]=qe[De];de(ge.mediaType,O.Z.MANIFEST_UPDATE,ge)}},addManifestUpdateStreamInfo:function(ge,qe,De,Be,ze){if(ge){var _e=new Of;_e.id=qe,_e.index=De,_e.start=Be,_e.duration=ze,ge.streamInfo.push(_e),de(ge.mediaType,O.Z.MANIFEST_UPDATE_STREAM_INFO,ge)}},addManifestUpdateRepresentationInfo:function(ge,qe,De,Be,ze,_e,Le,we){if(ge&&ge.representationInfo){var je=new Y0;je.id=qe,je.index=De,je.streamIndex=Be,je.mediaType=ze,je.startNumber=Le,je.fragmentInfoType=we,je.presentationTimeOffset=_e,ge.representationInfo.push(je),de(ge.mediaType,O.Z.MANIFEST_UPDATE_TRACK_INFO,ge)}},addPlayList:function(ge){ge.trace&&Array.isArray(ge.trace)?ge.trace.forEach(function(qe){qe.hasOwnProperty("subreplevel")&&!qe.subreplevel&&delete qe.subreplevel}):delete ge.trace,me(v.Z.STREAM,O.Z.PLAY_LIST,ge)},addDVBErrors:function(ge){me(v.Z.STREAM,O.Z.DVB_ERRORS,ge)}},B={},D}du.__dashjs_factory_name="MetricsModel";var Aa=U.Z.getSingletonFactory(du);function sa(L){L=L||{};var D,B,K,ee,J=this.context,H=L.metricsModel;function re(Ee){var ie=H.getMetricsFor(Ee,!0);if(!ie)return null;var me,ge=ie.HttpList,qe=null;if(!ge||ge.length<=0)return null;for(me=ge.length-1;me>=0;){if(ge[me].responsecode){qe=ge[me];break}me--}return qe}function de(Ee){var ie=H.getMetricsFor(Ee,!0);return ie&&ie.HttpList?ie.HttpList:[]}function Se(Ee,ie){if(!Ee)return null;var me=Ee[ie];return me&&me.length!==0?me[me.length-1]:null}return D={getCurrentRepresentationSwitch:function(Ee){return Se(H.getMetricsFor(Ee,!0),O.Z.TRACK_SWITCH)},getCurrentBufferState:function(Ee){return Se(H.getMetricsFor(Ee,!0),O.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Ee){var ie=Se(H.getMetricsFor(Ee,!0),O.Z.BUFFER_LEVEL);return ie?Nl.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:re,getHttpRequests:de,getCurrentDroppedFrames:function(){return Se(H.getMetricsFor(v.Z.VIDEO,!0),O.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Ee){return Se(H.getMetricsFor(Ee,!0),O.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Ee){return Se(Ee?H.getMetricsFor(Ee,!0):H.getMetricsFor(v.Z.VIDEO,!0)||H.getMetricsFor(v.Z.AUDIO,!0),O.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Se(H.getMetricsFor(v.Z.STREAM),O.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Ee,ie){if(!ie)return null;var me={},ge=re(Ee);ge&&(me=rn.Z.parseHttpHeaders(ge._responseHeaders));var qe=me[ie.toLowerCase()];return qe===void 0?null:qe},getLatestMPDRequestHeaderValueByID:function(Ee){if(!Ee)return null;var ie,me,ge,qe={};for(ge=(ie=de(v.Z.STREAM)).length-1;ge>=0;ge--)if((me=ie[ge]).type===it.w.MPD_TYPE){qe=rn.Z.parseHttpHeaders(me._responseHeaders);break}var De=qe[Ee.toLowerCase()];return De===void 0?null:De},addRepresentationSwitch:function(Ee,ie,me,ge,qe){H.addRepresentationSwitch(Ee,ie,me,ge,qe)},addDVRInfo:function(Ee,ie,me,ge){H.addDVRInfo(Ee,ie,me,ge)},updateManifestUpdateInfo:function(Ee){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Ee)},addManifestUpdateStreamInfo:function(Ee){if(Ee){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Ee.id,Ee.index,Ee.start,Ee.duration)}},addManifestUpdateRepresentationInfo:function(Ee,ie){if(Ee){var me=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(me,Ee.id,Ee.index,Ee.streamIndex,ie,Ee.presentationTimeOffset,Ee.startNumber,Ee.fragmentInfoType)}},addManifestUpdate:function(Ee){H.addManifestUpdate(v.Z.STREAM,Ee.type,Ee.requestStartDate,Ee.requestEndDate)},addHttpRequest:function(Ee,ie,me,ge,qe,De){H.addHttpRequest(Ee.mediaType,null,Ee.type,Ee.url,Ee.quality,ie,Ee.serviceLocation||null,Ee.range||null,Ee.requestStartDate,Ee.firstByteDate,Ee.requestEndDate,me,Ee.duration,ge,qe,Ee.fileLoaderType,De)},addSchedulingInfo:function(Ee,ie){H.addSchedulingInfo(Ee.mediaType,new Date,Ee.type,Ee.startTime,Ee.availabilityStartTime,Ee.duration,Ee.quality,Ee.range,ie)},addRequestsQueue:function(Ee,ie,me){H.addRequestsQueue(Ee,ie,me)},addBufferLevel:function(Ee,ie,me){H.addBufferLevel(Ee,ie,me)},addBufferState:function(Ee,ie,me){H.addBufferState(Ee,ie,me)},addDroppedFrames:function(Ee){H.addDroppedFrames(v.Z.VIDEO,Ee)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(Ee){H.addDVBErrors(Ee)},createPlaylistMetrics:function(Ee,ie){(ee=new rt).start=new Date,ee.mstart=Ee,ee.starttype=ie},createPlaylistTraceMetrics:function(Ee,ie,me){B===!0&&(B=!1,(K=new et).representationid=Ee,K.start=new Date,K.mstart=ie,K.playbackspeed=me!==null?me.toString():null)},updatePlayListTraceMetrics:function(Ee){if(K)for(var ie in K)K[ie]=Ee[ie]},pushPlayListTraceMetrics:function(Ee,ie){if(B===!1&&ee&&K&&K.start){var me=K.start,ge=Ee.getTime()-me.getTime();K.duration=ge,K.stopreason=ie,ee.trace.push(K),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Aa(J).getInstance({settings:L.settings}),B=!0,K=null,ee=null,D}sa.__dashjs_factory_name="DashMetrics";var Os=U.Z.getSingletonFactory(sa);function _r(){var L,D,B,K,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Ze.Z)(ee).getInstance();function re(ze){K=ze}function de(ze,_e,Le,we){var je,Z=_e.adaptation.period.mpd,le=Z.availabilityStartTime;if(we)je=Le&&Z.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*(ze+Z.timeShiftBufferDepth)):Z.availabilityEndTime;else if(Le){var ae=_e.availabilityTimeOffset;je=new Date(le.getTime()+1e3*(ze-ae))}else je=le;return je}function Se(ze,_e){return(ze.getTime()-_e.mpd.availabilityStartTime.getTime()+1e3*K)/1e3}function Ee(ze,_e){return ze+(_e.adaptation.period.start-_e.presentationTimeOffset)}function ie(ze){var _e={start:NaN,end:NaN},Le=ze[0].getAdapter().getRegularPeriods()[0],we=Se(new Date,Le);if(!ze||ze.length===0)return{range:_e,now:we};ze.forEach(function(Z){var le=Z.getAdapter(),ae=le.getMediaInfoForType(Z.getStreamInfo(),v.Z.VIDEO)||le.getMediaInfoForType(Z.getStreamInfo(),v.Z.AUDIO),ue=le.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(ue)if(ue.segmentInfoType===y.Z.SEGMENT_TIMELINE)Q=function(Ie){var ke,Re,pe,Ne,Ye=Ie.adaptation.period.mpd.manifest.Period_asArray[Ie.adaptation.period.index].AdaptationSet_asArray[Ie.adaptation.index],dt=D.getRepresentationFor(Ie.index,Ye),at=dt.SegmentTemplate||dt.SegmentList,Je=at.SegmentTimeline,ht=at.timescale,Bt=Je.S_asArray,Gt={start:0,end:0},kt=Bt[0].t,Ft=!isNaN(kt),An=Ft?kt:0,nt=0;for(Ft&&(Gt.start=Ee(An/ht,Ie)),pe=0,Ne=Bt.length;pe<Ne;pe++)Re=0,(ke=Bt[pe]).hasOwnProperty("r")&&(Re=ke.r),nt+=ke.d*(1+Re);return Gt.end=Ee((An+nt)/ht,Ie),Gt}(ue);else{var Me=ue.adaptation.period;Q.start=Me.start,Q.end=Math.max(we,Me.start+Me.duration)}!isNaN(Q.start)&&(isNaN(_e.start)||_e.start>Q.start)&&(_e.start=Q.start),!isNaN(Q.end)&&(isNaN(_e.end)||_e.end<Q.end)&&(_e.end=Q.end)}),_e.end=Math.min(we,_e.end);var je=ge(ze,_e.end,!0);return _e.end=isNaN(je)?_e.end:je,_e.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(_e.end)?Math.max(_e.end-Le.mpd.timeShiftBufferDepth,_e.start):_e.start,_e.start=ge(ze,_e.start),{range:_e,now:we}}function me(ze,_e){B=ze-_e.end}function ge(ze,_e){var Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var we=0,je=!1,Z=NaN;!je&&we<ze.length;){var le=ze[we].getStreamInfo();le.start<=_e&&(!isFinite(le.duration)||le.start+le.duration>=_e)?(Z=_e,je=!0):!Le&&le.start>_e&&(isNaN(Z)||le.start<Z)?Z=le.start:Le&&le.start+le.duration<_e&&(isNaN(Z)||le.start+le.duration>Z)&&(Z=le.start+le.duration),we+=1}return Z}catch(ae){return _e}}function qe(ze){ze.offset===void 0||isNaN(ze.offset)||re(ze.offset/1e3)}function De(){K=0,B=0}function Be(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this),De()}return L={initialize:function(){De(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this)},getClientTimeOffset:function(){return K},setClientTimeOffset:re,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*K},calcAvailabilityStartTimeFromPresentationTime:function(ze,_e,Le){return de(ze,_e,Le)},calcAvailabilityEndTimeFromPresentationTime:function(ze,_e,Le){return de(ze,_e,Le,!0)},calcPresentationTimeFromWallTime:Se,calcPresentationTimeFromMediaTime:Ee,calcPeriodRelativeTimeFromMpdRelativeTime:function(ze,_e){return _e-ze.adaptation.period.start},calcMediaTimeFromPresentationTime:function(ze,_e){return ze-_e.adaptation.period.start+_e.presentationTimeOffset},calcWallTimeForSegment:function(ze,_e){var Le,we,je;return _e&&(Le=ze.representation.adaptation.period.mpd.suggestedPresentationDelay,we=ze.presentationStartTime+Le,je=new Date(ze.availabilityStartTime.getTime()+1e3*we)),je},calcTimeShiftBufferWindow:function(ze,_e){if(!_e)return function(we){var je={start:NaN,end:NaN},Z=0,le=NaN;return we.forEach(function(ae){var ue=ae.getStreamInfo();Z+=ue.duration,(isNaN(le)||ue.start<le)&&(le=ue.start)}),je.start=le,je.end=le+Z,je}(ze);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Le=ie(ze);return me(Le.now,Le.range),Le.range}return function(we){var je={start:NaN,end:NaN};if(!we||we.length===0)return je;var Z=we[0].getAdapter().getRegularPeriods()[0],le=Se(new Date,Z),ae=Z.mpd.timeShiftBufferDepth,ue=isNaN(ae)?0:le-ae;if(je.start=ge(we,ue),je.end=!isNaN(je.start)&&le<je.start?le:ge(we,le,!0),!isNaN(ae)&&je.end<le-ae&&(je.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(we);if(Q.range.end<je.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.INVALID_DVR_WINDOW}),me(Q.now,Q.range),Q.range}return je}(ze)},reset:Be},D=Kn(ee).getInstance(),Be(),L}_r.__dashjs_factory_name="TimelineConverter";var hu=U.Z.getSingletonFactory(_r),Lf=S(4593),ua=S(6934);function kf(L){return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},kf(L)}function za(L,D){return za=Object.setPrototypeOf||function(B,K){return B.__proto__=K,B},za(L,D)}function Ff(L,D){return!D||kf(D)!=="object"&&typeof D!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):D}function Vu(L){return Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},Vu(L)}var Ls=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&za(J,H)})(ee,L);var D,B,K=(D=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Vu(D);if(B){var re=Vu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Ff(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=K.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Tc),bo=S(2295);function wc(){var L=0;function D(re){for(var de="",Se=0;Se<re.length;++Se)de+=re[Se].uchar;return de.length-de.replace(/^\s+/,"").length}function B(re){return"left: "+3.125*re.x+"%; top: "+6.66*re.y1+"%; width: "+(100-3.125*re.x)+"%; height: "+6.66*Math.max(re.y2-1-re.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function K(re){return re==="red"?"rgb(255, 0, 0)":re==="green"?"rgb(0, 255, 0)":re==="blue"?"rgb(0, 0, 255)":re==="cyan"?"rgb(0, 255, 255)":re==="magenta"?"rgb(255, 0, 255)":re==="yellow"?"rgb(255, 255, 0)":re==="white"?"rgb(255, 255, 255)":re==="black"?"rgb(0, 0, 0)":re}function ee(re,de){var Se=re.videoHeight/15;return de?"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(de.foreground?K(de.foreground):"rgb(255, 255, 255)")+"; font-style: "+(de.italics?"italic":"normal")+"; text-decoration: "+(de.underline?"underline":"none")+"; white-space: pre; background-color: "+(de.background?K(de.background):"transparent")+";":"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(re){return re.replace(/^\s+/g,"")}function H(re){return re.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(re,de,Se,Ee){var ie,me,ge=null,qe=!1,De=-1,Be={start:de,end:Se,spans:[]},ze="style_cea608_white_black",_e={},Le={},we=[];for(ie=0;ie<15;++ie){var je=Ee.rows[ie],Z="",le=null;if(je.isEmpty()===!1){var ae=D(je.chars);ge===null&&(ge={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==De&&qe&&(ge.p.push(Be),Be={start:de,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge={x:ae,y1:ie,y2:ie+1,p:[]});for(var ue=0;ue<je.chars.length;++ue){var Q=je.chars[ue],Me=Q.penState;if(le===null||!Me.equals(le)){Z.trim().length>0&&(Be.spans.push({name:ze,line:Z,row:ie}),Z="");var Ie="style_cea608_"+Me.foreground+"_"+Me.background;Me.underline&&(Ie+="_underline"),Me.italics&&(Ie+="_italics"),Le.hasOwnProperty(Ie)||(Le[Ie]=JSON.parse(JSON.stringify(Me))),le=Me,ze=Ie}Z+=Q.uchar}Z.trim().length>0&&Be.spans.push({name:ze,line:Z,row:ie}),qe=!0,De=ae}else qe=!1,De=-1,ge&&(ge.p.push(Be),Be={start:de,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null)}ge&&(ge.p.push(Be),ge.y2=ie+1,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null);var ke=[];for(ie=0;ie<we.length;++ie){var Re=we[ie],pe="sub_cea608_"+L++,Ne=document.createElement("div");Ne.id=pe;var Ye=B(Re);Ne.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Ye;var dt=document.createElement("div");dt.className="paragraph bodyStyle",dt.style.cssText=ee(re);var at=document.createElement("div");at.className="cueUniWrapper",at.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Je=0;Je<Re.p.length;++Je){var ht=Re.p[Je],Bt=0;for(me=0;me<ht.spans.length;++me){var Gt=ht.spans[me];if(Gt.line.length>0){if(me!==0&&Bt!=Gt.row){var kt=document.createElement("br");kt.className="lineBreak",at.appendChild(kt)}var Ft=!1;Bt===Gt.row&&(Ft=!0),Bt=Gt.row;var An=Le[Gt.name],nt=document.createElement("span");nt.className="spanPadding "+Gt.name+" customSpanColor",nt.style.cssText=ee(re,An),me!==0&&Ft?me===ht.spans.length-1?nt.textContent=H(Gt.line):nt.textContent=Gt.line:ht.spans.length>1&&me<ht.spans.length-1&&Gt.row===ht.spans[me+1].row?nt.textContent=J(Gt.line):nt.textContent=Gt.line.trim(),at.appendChild(nt)}}}dt.appendChild(at),Ne.appendChild(dt);var mt={bodyStyle:["%",90]};for(var Wt in Le)Le.hasOwnProperty(Wt)&&(mt[Wt]=["%",90]);ke.push({type:"html",start:de,end:Se,cueHTMLElement:Ne,cueID:pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:mt,lineHeight:{},linePadding:{}})}return ke}}}wc.__dashjs_factory_name="EmbeddedTextHtmlRender";var Oh=U.Z.getSingletonFactory(wc);function fm(L){var D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e=L.errHandler,Le=L.manifestModel,we=L.mediaController,je=L.videoModel,Z=L.textTracks,le=L.vttParser,ae=L.vttCustomRenderingParser,ue=L.ttmlParser,Q=L.streamInfo,Me=L.settings,Ie=this.context,ke=(0,m.Z)(Ie).getInstance(),Re=!1;function pe(){H=null,de=NaN,Se=[],Ee=null,re=!1,J=[],ee=null}function Ne(kt){var Ft=new Ls;for(var An in kt)Ft[An]=kt[An];Ft.labels=kt.labels,Ft.defaultTrack=function(nt){var mt=!1;return me.length>1&&nt.isEmbedded?mt=nt.id&&nt.id===v.Z.CC1:me.length===1?nt.id&&typeof nt.id=="string"&&nt.id.substring(0,2)==="CC"&&(mt=!0):me.length===0&&(mt=nt.index===J[0].index),mt}(kt),Ft.isFragmented=kt.isFragmented,Ft.isEmbedded=!!kt.isEmbedded,Ft.isTTML=function(nt){return nt.codec&&nt.codec.search(v.Z.STPP)>=0||nt.mimeType&&nt.mimeType.search(v.Z.TTML)>=0}(kt),Ft.kind=function(nt,mt){var Wt=nt.roles&&nt.roles.length>0?mt[nt.roles[0]]:mt.caption;return Wt=Wt===mt.caption||Wt===mt.subtitle?Wt:mt.caption}(kt,{subtitle:"subtitles",caption:"captions"}),Z.addTextTrack(Ft)}function Ye(kt){var Ft=kt.chunk;Ft.mediaInfo.embeddedCaptions&&at(Ft.bytes,Ft)}function dt(kt){ie=kt}function at(kt,Ft){var An=Ft.mediaInfo,nt=An.type,mt=An.mimeType,Wt=An.codec||mt;Wt?An.codec.indexOf("application/mp4")!==-1?function(Rt,en,Jt){var Yt;if(en.segmentType==="InitializationSegment")re=!0,de=K.getMediaTimescaleFromMoov(Rt);else{if(!re)return;(Yt=K.getSamplesInfo(Rt).sampleList).length>0&&(Ee=Yt[0].cts-en.start*de),Jt.search(v.Z.STPP)>=0?function(Dn,Nn,rr){var ir,At;for(ee=ee!==null?ee:Bt(rr),ir=0;ir<Nn.length;ir++){var Xt=Nn[ir],Zt=Xt.cts,un=ht(),mn=un+Zt/de,Pn=mn+Xt.duration/de;D.buffered.add(mn,Pn);var xn=new DataView(Dn,Xt.offset,Xt.subSizes[0]),Fn=ua.Utils.dataViewToString(xn,v.Z.UTF8),Gn=[],It=Xt.offset+Xt.subSizes[0];for(At=1;At<Xt.subSizes.length;At++){var Sn=new Uint8Array(Dn,It,Xt.subSizes[At]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),It+=Xt.subSizes[At]}try{var Lt=Le.getValue().ttmlTimeIsRelative?Zt/de:0,On=ee.parse(Fn,Lt,Zt/de,(Zt+Xt.duration)/de,Gn);Z.addCaptions(ie,un,On)}catch(ut){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+ut.message)}}}(Rt,Yt,Jt):function(Dn,Nn){var rr,ir,At,Xt=[];for(rr=0;rr<Nn.length;rr++){var Zt=Nn[rr];Zt.cts-=Ee;var un=ht()+Zt.cts/de,mn=un+Zt.duration/de;D.buffered.add(un,mn);var Pn=Dn.slice(Zt.offset,Zt.offset+Zt.size),xn=ua.parseBuffer(Pn);for(ir=0;ir<xn.boxes.length;ir++){var Fn=xn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(At=0;At<Fn.boxes.length;At++){var It=Fn.boxes[At];if(B.debug("VTT box2: "+It.type),It.type==="payl")Gn.start=Zt.cts/de,Gn.end=(Zt.cts+Zt.duration)/de,Gn.data=It.cue_text;else if(It.type==="sttg"&&It.settings&&It.settings!=="")try{var Sn=It.settings.split(" ");Gn.styles=le.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&(Xt.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}Xt.length>0&&Z.addCaptions(ie,0,Xt)}(Rt,Yt)}}(kt,Ft,Wt):nt===v.Z.VIDEO?function(Rt,en){var Jt,Yt;if(en.segmentType===it.w.INIT_SEGMENT_TYPE)ge===0&&(ge=K.getMediaTimescaleFromMoov(Rt));else if(en.segmentType===it.w.MEDIA_SEGMENT_TYPE){if(ge===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Yt=K.getSamplesInfo(Rt)).lastSequenceNumber,Nn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Be[0]||Be[1]||function(){for(var un,mn=0;mn<me.length;mn++){if((un=Z.getTrackIdxForId(me[mn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=Je(un);Be[mn]=new(R()).Cea608Parser(mn+1,{newCue:Pn},null)}}(),ge){if(function(un,mn,Pn,xn,Fn){return un!==null&&mn!==null&&xn!==null&&Fn!==null&&(mn===un?xn!==Fn:mn!==un+Pn)}(qe,Dn,Yt.numSequences,De,Nn))for(Jt=0;Jt<Be.length;Jt++)Be[Jt]&&Be[Jt].reset();for(var ir=function(un,mn){if(mn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},xn=new DataView(un),Fn=0;Fn<mn.length;Fn++)for(var Gn=mn[Fn],It=R().findCea608Nalus(xn,Gn.offset,Gn.size),Sn=null,En=0,Lt=0;Lt<It.length;Lt++)for(var On=R().extractCea608DataFromRange(xn,It[Lt]),ut=0;ut<2;ut++)if(On[ut].length>0){Gn.cts!==Sn?En=0:En+=1;var tt=ht();Pn.fields[ut].push([Gn.cts+tt*ge,On[ut],En]),Sn=Gn.cts}return Pn.fields.forEach(function(qt){qt.sort(function(Ke,Ve){return Ke[0]===Ve[0]?Ke[2]-Ve[2]:Ke[0]-Ve[0]})}),Pn}(Rt,Yt.sampleList),At=0;At<Be.length;At++){var Xt=ir.fields[At],Zt=Be[At];if(Zt)for(Jt=0;Jt<Xt.length;Jt++)Zt.addData(Xt[Jt][0]/ge,Xt[Jt][1])}qe=Dn,De=rr}}}(kt,Ft):function(Rt,en,Jt){var Yt,Dn,Nn=new DataView(Rt,0,Rt.byteLength);Dn=ua.Utils.dataViewToString(Nn,v.Z.UTF8);try{Yt=Bt(Jt).parse(Dn,0),Z.addCaptions(Z.getCurrentTrackIdx(),0,Yt),D.buffered&&D.buffered.add(en.start,en.end)}catch(rr){_e.error(new ce.Z(Ae.TIMED_TEXT_ERROR_ID_PARSE_CODE,Ae.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(kt,Ft,Wt):B.error("No text type defined")}function Je(kt){return function(Ft,An,nt){var mt;(mt=je.getTTMLRenderingDiv()?ze.createHTMLCaptionsFromScreen(je.getElement(),Ft,An,nt):[{start:Ft,end:An,data:nt.getDisplayText(),styles:{}}])&&Z.addCaptions(kt,0,mt)}}function ht(){return isNaN(D.timestampOffset)?0:D.timestampOffset}function Bt(kt){var Ft;return kt.search(v.Z.VTT)>=0?Ft=Me.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(kt.search(v.Z.TTML)>=0||kt.search(v.Z.STPP)>=0)&&(Ft=ue),Ft}function Gt(kt){me.forEach(function(Ft){var An=Z.getTrackIdxForId(Ft.id);An>=0&&Z.deleteCuesFromTrackIdx(An,kt.from,kt.to)})}return D={initialize:function(){Re||(me=[],ie=null,ge=0,Be=[],qe=null,De=null,Re=!0,ze=Oh(Ie).getInstance(),ke.on(T.Z.VIDEO_CHUNK_RECEIVED,Ye,D),ke.on(T.Z.BUFFER_CLEARED,Gt,D))},addMediaInfos:function(kt,Ft,An){if(J=J.concat(Ft),kt===v.Z.TEXT&&Ft[0].isFragmented&&!Ft[0].isEmbedded){H=An,D.buffered=(0,bo.Z)(Ie).create(),Se=we.getTracksFor(v.Z.TEXT,Q.id).filter(function(Rt){return Rt.isFragmented});for(var nt=we.getCurrentTrackFor(v.Z.TEXT,Q.id),mt=0;mt<Se.length;mt++)if(Se[mt]===nt){dt(mt);break}}for(var Wt=0;Wt<Ft.length;Wt++)Ne(Ft[Wt])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:at,abort:function(){},addEmbeddedTrack:function(kt){if(Re&&kt)if(kt.id===v.Z.CC1||kt.id===v.Z.CC3){for(var Ft=0;Ft<me.length;Ft++)if(me[Ft].id===kt.id)return;me.push(kt)}else B.warn("Embedded track "+kt.id+" not supported!")},resetEmbedded:function(){ke.off(T.Z.VIDEO_CHUNK_RECEIVED,Ye,D),ke.off(T.Z.BUFFER_CLEARED,Gt,D),Z&&Z.deleteAllTextTracks(),Re=!1,me=[],Be=[null,null],qe=null,De=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:Se,videoModel:je}},setCurrentFragmentedTrackIdx:dt,remove:function(kt,Ft){kt===void 0&&kt===Ft&&(kt=D.buffered.start(0),Ft=D.buffered.end(D.buffered.length-1)),D.buffered.remove(kt,Ft),Z.deleteCuesFromTrackIdx(ie,kt,Ft)},reset:function(){pe(),J=[],K=null}},B=(0,x.Z)(Ie).getInstance().getLogger(D),K=(0,ia.Z)(Ie).getInstance(),pe(),D}fm.__dashjs_factory_name="TextSourceBuffer";var Lh=U.Z.getClassFactory(fm),Ac=S(4403);function Ic(L,D){(D==null||D>L.length)&&(D=L.length);for(var B=0,K=new Array(D);B<D;B++)K[B]=L[B];return K}var W0=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function dm(L){var D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je=this.context,Z=(0,m.Z)(je).getInstance(),le=L.videoModel,ae=L.streamInfo,ue=L.settings;function Q(At,Xt,Zt,un,mn,Pn){var xn=0,Fn=0;At/Xt>Zt/un?xn=(Fn=Xt)/un*Zt:Fn=(xn=At)/Zt*un;var Gn,It,Sn=0,En=0;return xn/Fn>mn?(En=Fn,Sn=Fn*mn):(Sn=xn,En=xn/mn),Gn=(At-Sn)/2,It=(Xt-En)/2,Pn?{x:Gn+.1*Sn,y:It+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:It,w:Sn,h:En}}function Me(At,Xt){var Zt=le.getClientWidth(),un=le.getClientHeight(),mn=le.getVideoWidth(),Pn=le.getVideoHeight(),xn=le.getVideoRelativeOffsetTop(),Fn=le.getVideoRelativeOffsetLeft();if(mn!==0&&Pn!==0){var Gn=mn/Pn,It=!1;At.isFromCEA608&&(Gn=1.1666666666666667,It=!0);var Sn=Q.call(this,Zt,un,mn,Pn,Gn,It),En=Sn.w,Lt=Sn.h,On=Sn.x,ut=Sn.y;if(En!=Se||Lt!=Ee||On!=re||ut!=de||Xt){if(re=On+Fn,de=ut+xn,Se=En,Ee=Lt,ie){var tt=ie.style;tt&&(tt.left=re+"px",tt.top=de+"px",tt.width=Se+"px",tt.height=Ee+"px",tt.zIndex=qe&&document[qe]||De?ze:null,Z.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var qt=At.activeCues;if(qt)for(var Ke=qt.length,Ve=0;Ve<Ke;++Ve){var Mt=qt[Ve];Mt.scaleCue(Mt)}}}}function Ie(At){var Xt,Zt,un,mn,Pn,xn=Se,Fn=Ee;if(At.cellResolution){var Gn=[xn/At.cellResolution[0],Fn/At.cellResolution[1]];if(At.linePadding){for(Xt in At.linePadding)if(At.linePadding.hasOwnProperty(Xt)){Zt=(At.linePadding[Xt]*Gn[0]).toString();for(var It=document.getElementsByClassName("spanPadding"),Sn=0;Sn<It.length;Sn++)It[Sn].style.cssText=It[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt),It[Sn].style.cssText=It[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}if(At.fontSize){for(Xt in At.fontSize)if(At.fontSize.hasOwnProperty(Xt)){At.fontSize[Xt][0]==="%"?un=At.fontSize[Xt][1]/100:At.fontSize[Xt][0]==="c"&&(un=At.fontSize[Xt][1]),Zt=(un*Gn[1]).toString(),Pn=Xt!=="defaultFontSize"?document.getElementsByClassName(Xt):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}if(At.lineHeight){for(Xt in At.lineHeight)if(At.lineHeight.hasOwnProperty(Xt)){At.lineHeight[Xt][0]==="%"?mn=At.lineHeight[Xt][1]/100:At.fontSize[Xt][0]==="c"&&(mn=At.lineHeight[Xt][1]),Zt=(mn*Gn[1]).toString(),Pn=document.getElementsByClassName(Xt);for(var Lt=0;Lt<Pn.length;Lt++)Pn[Lt].style.cssText=Pn[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}}}if(At.isd){var On=document.getElementById(At.cueID);On&&ie.removeChild(On),Re(At)}}function ke(At,Xt){var Zt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Zt.test(Xt)){var mn=Zt.exec(Xt),Pn=parseInt(mn[4],10)-1;return"data:image/png;base64,"+btoa(At.images[Pn])}if(un.test(Xt)){var xn=un.exec(Xt)[1];return"data:image/png;base64,"+At.embeddedImages[xn]}return Xt}function Re(At){if(ie){ir.call(this);var Xt=document.createElement("div");ie.appendChild(Xt),Be=(0,Ac.renderHTML)(At.isd,Xt,function(Zt){return ke(At,Zt)},ie.clientHeight,ie.clientWidth,ue.get().streaming.text.imsc.displayForcedOnlyMode,function(Zt){B.info("renderCaption :",Zt)},Be,ue.get().streaming.text.imsc.enableRollUp),Xt.id=At.cueID,Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:Xt,currentTrackIdx:H})}}function pe(At,Xt){return!!Xt&&Xt.endTime>=At.startTime}function Ne(At,Xt){return!!ue.get().streaming.text.extendSegmentedCues&&!!function(Zt,un,mn){for(var Pn=0;Pn<mn.length;Pn++){var xn=mn[Pn];if(JSON.stringify(Zt[xn])!==JSON.stringify(un[xn]))return!1}return!0}(Xt,At,W0)&&(Xt.endTime=Math.max(Xt.endTime,At.endTime),!0)}function Ye(At,Xt){Xt&&Xt.forEach(function(Zt){Zt.kind&&Zt.kind==="image"&&(Zt.src=ke(At,Zt.src)),Ye(At,Zt.contents)})}function dt(At,Xt,Zt){var un=mt(At),mn=ue.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Zt)&&Zt.length!==0)for(var Pn=0;Pn<Zt.length;Pn++){var xn=null,Fn=Zt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(mn?xn=at(Fn,Xt):kt(Fn)&&ie?xn=Bt(Fn,Xt,un):Fn.data&&(xn=Gt(Fn,Xt,un)));try{if(xn){if(!en(un,xn))if(ue.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(xn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),pe(xn,Gn)?Ne(xn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==v.Z.TEXT_DISABLED&&un.addCue(xn)):un.mode!==v.Z.TEXT_DISABLED&&un.addCue(xn)}var It=ue.get().streaming.buffer.bufferToKeep;Yt(un,0,le.getTime()-It)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(xn),Sn}}}function at(At,Xt){var Zt=Ft(At,Xt);return Zt.onenter=function(){kt(At)&&we&&we.cueID!==Zt.cueID&&ht(we),delete Zt.type,we=Zt,Je(Zt)},Zt.onexit=function(){ht(Zt),we=null},Zt}function Je(At){Z.trigger(_.Z.CUE_ENTER,At)}function ht(At){Z.trigger(_.Z.CUE_EXIT,{cueID:At.cueID})}function Bt(At,Xt,Zt){var un=this,mn=Ft(At,Xt);return ie.style.left=re+"px",ie.style.top=de+"px",ie.style.width=Se+"px",ie.style.height=Ee+"px",mn.onenter=function(){var Pn=this;Zt.mode===v.Z.TEXT_SHOWING&&(this.isd?(Le?requestAnimationFrame(function(){return Re(Pn)}):Re(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),Ie.call(un,this),Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},mn.onexit=function(){if(ie)for(var Pn=ie.childNodes,xn=0;xn<Pn.length;++xn)Pn[xn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[xn].id),ie.removeChild(Pn[xn]),--xn)},mn}function Gt(At,Xt,Zt){var un=Ft(At,Xt);if(un.isActive=!1,At.styles)try{At.styles.align!==void 0&&"align"in un&&(un.align=At.styles.align),At.styles.line!==void 0&&"line"in un&&(un.line=At.styles.line),At.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=At.styles.snapToLines),At.styles.position!==void 0&&"position"in un&&(un.position=At.styles.position),At.styles.size!==void 0&&"size"in un&&(un.size=At.styles.size)}catch(mn){B.error(mn)}return un.onenter=function(){Zt.mode===v.Z.TEXT_SHOWING&&Z.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function kt(At){return At.type==="html"}function Ft(At,Xt){return kt(At)?function(Zt,un){var mn=new K(Zt.start+un,Zt.end+un,"");return mn.cueHTMLElement=Zt.cueHTMLElement,mn.isd=Zt.isd,mn.images=Zt.images,mn.embeddedImages=Zt.embeddedImages,mn.cueID=Zt.cueID,mn.scaleCue=Ie.bind(self),mn.cellResolution=Zt.cellResolution,mn.lineHeight=Zt.lineHeight,mn.linePadding=Zt.linePadding,mn.fontSize=Zt.fontSize,mn.isd&&Ye(mn,mn.isd.contents),mn}(At,Xt):function(Zt,un){var mn=new K(Zt.start-un,Zt.end-un,Zt.data);return mn.cueID="".concat(mn.startTime,"_").concat(mn.endTime),mn}(At,Xt)}function An(At){if(me)for(var Xt=me.childNodes,Zt=0;Zt<Xt.length;++Zt)Xt[Zt].id===At.cueID&&(me.removeChild(Xt[Zt]),--Zt)}function nt(){var At,Xt=[],Zt=function(mn,Pn){var xn;if(typeof Symbol>"u"||mn[Symbol.iterator]==null){if(Array.isArray(mn)||(xn=function(Lt,On){if(Lt){if(typeof Lt=="string")return Ic(Lt,On);var ut=Object.prototype.toString.call(Lt).slice(8,-1);return ut==="Object"&&Lt.constructor&&(ut=Lt.constructor.name),ut==="Map"||ut==="Set"?Array.from(Lt):ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut)?Ic(Lt,On):void 0}}(mn))||Pn){xn&&(mn=xn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=mn.length?{done:!0}:{done:!1,value:mn[Fn++]}},e:function(Lt){throw Lt},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var It,Sn=!0,En=!1;return{s:function(){xn=mn[Symbol.iterator]()},n:function(){var Lt=xn.next();return Sn=Lt.done,Lt},e:function(Lt){En=!0,It=Lt},f:function(){try{Sn||xn.return==null||xn.return()}finally{if(En)throw It}}}}(le.getTextTracks());try{for(Zt.s();!(At=Zt.n()).done;){var un=At.value;un.manualMode===v.Z.TEXT_SHOWING&&Xt.push(un)}}catch(mn){Zt.e(mn)}finally{Zt.f()}return Xt}function mt(At){return At>=0&&ee[At]?le.getTextTrack(ee[At].kind,ee[At].id,ee[At].lang,ee[At].isTTML,ee[At].isEmbedded):null}function Wt(At){var Xt=this;if(At!==H){var Zt=mt(H=At);Rt.call(this,Zt),ge&&(clearInterval(ge),ge=null),Zt&&Zt.renderingType==="html"&&(Me.call(this,Zt,!0),window.ResizeObserver?(_e=new window.ResizeObserver(function(){Me.call(Xt,Zt,!0)})).observe(le.getElement()):ge=setInterval(Me.bind(this,Zt),500))}}function Rt(At){ir.call(this),At&&At.renderingType==="html"?Nn.call(this):rr.call(this)}function en(At,Xt){if(!At.cues)return!1;for(var Zt=0;Zt<At.cues.length;Zt++)if(At.cues[Zt].startTime===Xt.startTime&&At.cues[Zt].endTime===Xt.endTime)return!0;return!1}function Jt(At,Xt,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!At&&(isNaN(Xt)||(un?At.startTime:At.endTime)>=Xt)&&(isNaN(Zt)||(un?At.endTime:At.startTime)<=Zt)}function Yt(At,Xt,Zt){var un,mn;if(!(Zt<Xt)&&At&&(At.cues||At.manualCueList)){var Pn=At.cues&&At.cues.length>0?"native":"custom",xn=Pn==="native"?At.cues:At.manualCueList;if(!xn||xn.length===0)return;for(var Fn=xn.length-1;Fn>=0;Fn--)!Jt(xn[Fn],Xt,Zt,!0)||(un=xn[Fn],mn=le.getTime(),un.startTime>=mn&&un.endTime<=mn)||(Pn==="native"?At.removeCue(xn[Fn]):(An(xn[Fn]),delete At.manualCueList[Fn]))}}function Dn(At,Xt,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(At&&(At.cues||At.manualCueList)){var mn=At.cues&&At.cues.length>0?"native":"custom",Pn=mn==="native"?At.cues:At.manualCueList;if(!Pn||Pn.length===0)return;for(var xn=Pn.length-1,Fn=xn;Fn>=0;Fn--)Jt(Pn[Fn],Xt,Zt,un)&&(mn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),At.removeCue(Pn[Fn])):(An(Pn[Fn]),delete At.manualCueList[Fn]))}}function Nn(){var At=document.getElementById("native-cue-style");if(!At){(At=document.createElement("style")).id="native-cue-style",document.head.appendChild(At);var Xt=At.sheet,Zt=le.getElement();try{Zt&&(Zt.id?Xt.insertRule("#"+Zt.id+"::cue {background: transparent}",0):Zt.classList.length!==0?Xt.insertRule("."+Zt.className+"::cue {background: transparent}",0):Xt.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var At=document.getElementById("native-cue-style");At&&document.head.removeChild(At)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return D={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(K=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,re=0,de=0,Se=0,Ee=0,ie=null,me=null,ge=null,De=!1,ze=2147483647,Be=null,Le="requestAnimationFrame"in window,document.fullscreenElement!==void 0?qe="fullscreenElement":document.webkitIsFullScreen!==void 0?qe="webkitIsFullScreen":document.msFullscreenElement?qe="msFullscreenElement":document.mozFullScreen&&(qe="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(At){ee.push(At)},addCaptions:dt,createTracks:function(){var At=ue.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,ut){return On.index-ut.index}),ie=le.getTTMLRenderingDiv(),me=le.getVttRenderingDiv();for(var Xt,Zt,un,mn,Pn,xn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var It=(Zt=(Xt=ee[Gn]).kind,un=Xt.id!==void 0?Xt.id:Xt.lang,mn=Xt.lang,Pn=Xt.isTTML,xn=Xt.isEmbedded,le.addTextTrack(Zt,un,mn,Pn,xn));J.push(It),ee[Gn].defaultTrack&&(It.default=!0,Fn=Gn);var Sn=mt(Gn);Sn&&(Sn.mode=v.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),dt(Gn,0,ee[Gn].captionData),Z.trigger(_.Z.TEXT_TRACK_ADDED)}if(Wt.call(this,Fn),Fn>=0){Z.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var ut=mt(Fn);ut&&ut.renderingType==="html"&&Me.call(this,ut,!0),Z.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Lt=mt(En);Lt&&(Lt.mode=En!==Fn||At?v.Z.TEXT_HIDDEN:v.Z.TEXT_SHOWING,Lt.manualMode=En===Fn?v.Z.TEXT_SHOWING:v.Z.TEXT_HIDDEN)}}Z.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Wt,getTrackIdxForId:function(At){for(var Xt=-1,Zt=0;Zt<ee.length;Zt++)if(ee[Zt].id===At){Xt=Zt;break}return Xt},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(At,Xt){var Zt=mt(At);Zt&&Zt.mode!==Xt&&(Zt.mode=Xt),Zt&&Zt.manualMode!==Xt&&(Zt.manualMode=Xt)},deleteCuesFromTrackIdx:function(At,Xt,Zt){var un=mt(At);un&&Dn(un,Xt,Zt)},deleteAllTextTracks:function(){for(var At=J?J.length:0,Xt=0;Xt<At;Xt++){var Zt=mt(Xt);Zt&&Dn.call(this,Zt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],ge&&(clearInterval(ge),ge=null),_e&&le&&(_e.unobserve(le.getElement()),_e=null),H=-1,ir.call(this)},manualCueProcessing:function(At){var Xt=nt();if(Xt&&Xt.length>0){var Zt=Xt[0].manualCueList;Zt&&Zt.length>0&&Zt.forEach(function(un){un.startTime<=At&&un.endTime>=At&&!un.isActive?(un.isActive=!0,ue.get().streaming.text.dispatchForManualRendering?Je(un):WebVTT.processCues(window,[un],me,un.cueID)):un.isActive&&(un.startTime>At||un.endTime<At)&&(un.isActive=!1,ue.get().streaming.text.dispatchForManualRendering?ht(un):An(un))})}},disableManualTracks:function(){var At=nt();if(At&&At.length>0){var Xt=At[0].manualCueList;Xt&&Xt.length>0&&Xt.forEach(function(Zt){if(Zt.isActive){if(Zt.isActive=!1,ue.get().streaming.text.dispatchForManualRendering)ht(Zt);else if(me)for(var un=me.childNodes,mn=0;mn<un.length;++mn)un[mn].id===Zt.cueID&&(me.removeChild(un[mn]),--mn)}})}}},B=(0,x.Z)(je).getInstance().getLogger(D),D}dm.__dashjs_factory_name="TextTracks";var hm=U.Z.getClassFactory(dm);function pm(){var L,D,B,K,ee,J,H=this.context;function re(ie){var me=ie.split(":"),ge=me.length-1;return ie=60*parseInt(me[ge-1],10)+parseFloat(me[ge]),ge===2&&(ie+=3600*parseInt(me[0],10)),ie}function de(ie){var me=ie.split(K),ge=me[1].split(J);return ge.shift(),me[1]=ge[0],ge.shift(),{cuePoints:me,styles:Se(ge)}}function Se(ie){var me={};return ie.forEach(function(ge){if(ge.split(/:/).length>1){var qe=ge.split(/:/)[1],De=!1;qe&&qe.search(/%/)!=-1&&(De=!0,qe=parseInt(qe.replace(/%/,""),10)),(ge.match(/align/)||ge.match(/A/))&&(me.align=qe),(ge.match(/line/)||ge.match(/L/))&&(me.line=qe==="auto"?qe:parseInt(qe,10),De&&(me.snapToLines=!1)),(ge.match(/position/)||ge.match(/P/))&&(me.position=qe),(ge.match(/size/)||ge.match(/S/))&&(me.size=qe)}}),me}function Ee(ie,me){for(var ge,qe=me,De="",Be="";ie[qe]!==""&&qe<ie.length;)qe++;if((ge=qe-me)>1)for(var ze=0;ze<ge;ze++){if((Be=ie[me+ze]).match(K)){De="";break}De+=Be,ze!==ge-1&&(De+="\n")}else(Be=ie[me]).match(K)||(De=Be);return De}return L={parse:function(ie){var me,ge,qe=[];if(!ie)return qe;me=(ie=ie.split(B)).length,ge=-1;for(var De=0;De<me;De++){var Be=ie[De];if(Be.length>0&&Be!=="WEBVTT"&&Be.match(K)){var ze=de(Be),_e=ze.cuePoints,Le=ze.styles,we=Ee(ie,De+1),je=re(_e[0].replace(ee,"")),Z=re(_e[1].replace(ee,""));!isNaN(je)&&!isNaN(Z)&&je>=ge&&Z>je?we!==""?(ge=je,qe.push({start:je,end:Z,data:we,styles:Le})):D.error("Skipping cue due to empty/malformed cue text"):D.error("Skipping cue due to incorrect cue timing")}}return qe},getCaptionStyles:Se},D=(0,x.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,K=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}pm.__dashjs_factory_name="VTTParser";var gm=U.Z.getSingletonFactory(pm);function kh(){var L,D;return L={parse:function(B){var K=[];return D.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},K.push(ee)},D.parse(B),K}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(D=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}kh.__dashjs_factory_name="VttCustomRenderingParser";var X0=U.Z.getSingletonFactory(kh);function mm(){var L,D,B=this.context,K=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,re,de,Se){var Ee,ie,me,ge="",qe=[],De={},Be={},ze="",_e="",Le={onOpenTag:function(ae,ue,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(K.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.ERROR,event:Pi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),ue==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void D.warn("smpte-tt imageType != PNG. Discarded");ze=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){ze&&(Be[ze]=_e.trim()),_e="",ze=""},onText:function(ae){ze&&(_e+=ae)}};if(!J)throw ge="no ttml data to parse",new Error(ge);De.data=J,K.trigger(T.Z.TTML_TO_PARSE,De);var we=(0,Ac.fromXML)(De.data,function(ae){ge=ae},Le);K.trigger(T.Z.TTML_PARSED,{ttmlString:De.data,ttmlDoc:we});var je,Z=we.getMediaTimeEvents();for(me=0;me<Z.length;me++){var le=(0,Ac.generateISD)(we,Z[me],function(ae){ge=ae});le.contents.some(function(ae){return ae.contents.length})&&(Ee=Z[me]+H)<(ie=Z[me+1]+H)&&qe.push({start:Ee,end:ie,type:"html",cueID:(je="cue_TTML_"+ee,ee++,je),isd:le,images:Se,embeddedImages:Be})}if(ge!=="")throw D.error(ge),new Error(ge);return qe}},D=(0,x.Z)(B).getInstance().getLogger(L),L}mm.__dashjs_factory_name="TTMLParser";var $0=U.Z.getSingletonFactory(mm);function Fh(L,D){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(L);D&&(K=K.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,K)}return B}function Ml(L){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?Fh(Object(B),!0).forEach(function(K){ym(L,K,B[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Fh(Object(B)).forEach(function(K){Object.defineProperty(L,K,Object.getOwnPropertyDescriptor(B,K))})}return L}function ym(L,D,B){return D in L?Object.defineProperty(L,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[D]=B,L}function Uh(L,D){(D==null||D>L.length)&&(D=L.length);for(var B=0,K=new Array(D);B<D;B++)K[B]=L[B];return K}function Bh(L){var D,B,K,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,_t.Z)(ee).getInstance(),re=L.adapter,de=L.baseURLController;function Se(me,ge){var qe,De,Be=!1;if(de.resolve()){var ze=re.getVoRepresentations(me);ze&&ze.length>0&&(qe=de.resolve(ze[0].path).url)}var _e=me.essentialPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===v.Z.FONT_DOWNLOAD_DVB_SCHEME}),Le=me.supplementalPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===v.Z.FONT_DOWNLOAD_DVB_SCHEME});_e.length>0?(Be=!0,De=_e):De=Le,De.forEach(function(we){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==v.Z.OFF_MIMETYPE&&ae.dvbMimeType!==v.Z.WOFF_MIMETYPE)}(we)){var je=(Z=we.dvbUrl,le=qe,H.isPathAbsolute(Z)?Z:H.isRelative(Z)?le?H.resolve(Z,le):H.resolve(Z):Z);K.push({fontFamily:we.dvbFontFamily,url:je,mimeType:we.dvbMimeType,trackId:me.id,streamId:ge,isEssential:Be,status:"unloaded",fontFace:new FontFace(we.dvbFontFamily,"url(".concat(je,")"),{display:"swap"})})}var Z,le})}function Ee(me,ge){var qe=K[me];K[me]=Ml(Ml({},qe),{},{status:ge})}function ie(){K=[]}return D={addFontsFromTracks:function(me,ge){if(me&&Array.isArray(me)&&ge)for(var qe=0;qe<me.length;qe++)Se(me[qe],ge)},downloadFonts:function(){for(var me=function(qe){var De=K[qe];document.fonts.add(De.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,De),De.fontFace.load().then(function(){Ee(qe,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,De)},function(Be){Ee(qe,"error"),B.debug("Font download error: ",Be),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,De)})},ge=0;ge<K.length;ge++)me(ge)},getFonts:function(){return K},getFontsForTrackId:function(me){return K.filter(function(ge){return ge.trackId&&ge.trackId===me})},reset:function(){(function(){var me,ge=function(Be,ze){var _e;if(typeof Symbol>"u"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(_e=function(ae,ue){if(ae){if(typeof ae=="string")return Uh(ae,ue);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?Uh(ae,ue):void 0}}(Be))||ze){_e&&(Be=_e);var Le=0,we=function(){};return{s:we,n:function(){return Le>=Be.length?{done:!0}:{done:!1,value:Be[Le++]}},e:function(ae){throw ae},f:we}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je,Z=!0,le=!1;return{s:function(){_e=Be[Symbol.iterator]()},n:function(){var ae=_e.next();return Z=ae.done,ae},e:function(ae){le=!0,je=ae},f:function(){try{Z||_e.return==null||_e.return()}finally{if(le)throw je}}}}(K);try{for(ge.s();!(me=ge.n()).done;){var qe=me.value,De=document.fonts.delete(qe.fontFace);B.debug("Removal of fontFamily: ".concat(qe.fontFamily," was ").concat(De?"successful":"unsuccessful"))}}catch(Be){ge.e(Be)}finally{ge.f()}})(),ie()}},B=(0,x.Z)(ee).getInstance().getLogger(D),ie(),D}Bh.__dashjs_factory_name="DVBFonts";var Q0=U.Z.getClassFactory(Bh);function vm(L){var D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De=this.context,Be=L.adapter,ze=L.errHandler,_e=L.manifestModel,Le=L.mediaController,we=L.baseURLController,je=L.videoModel,Z=L.settings;function le(Ne){if(qe.error("Could not download ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Ye=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);ee[Ne.streamId].setModeForTrackIdx(Ye,v.Z.TEXT_DISABLED)}}function ae(Ne){if(qe.debug("Successfully downloaded ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Ye=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);Ye===ee[Ne.streamId].getCurrentTrackIdx()?ee[Ne.streamId].setModeForTrackIdx(Ye,v.Z.TEXT_SHOWING):ee[Ne.streamId].setModeForTrackIdx(Ye,v.Z.TEXT_HIDDEN)}}function ue(Ne){var Ye=Ne.tracks,dt=Ne.index,at=Ne.streamId;if(Z.get().streaming.text.defaultEnabled===!1&&!Ie()||me)ke(at,-1);else{var Je=Le.getCurrentTrackFor(v.Z.TEXT,at);if(Je){var ht={lang:Je.lang,role:Je.roles[0],index:Je.index,codec:Je.codec,accessibility:Je.accessibility[0]};Ye.some(function(Bt,Gt){if(Le.matchSettings(ht,Bt))return ke(at,Gt),dt=Gt,!0})}Se=!1}B[at].lastEnabledIndex=dt,de.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:Ie(),index:dt,tracks:Ye,streamId:at}),ie=!0,ge.addFontsFromTracks(Ye,at),ge.getFonts().forEach(function(Bt){if(Bt.isEssential){var Gt=ee[Bt.streamId].getTrackIdxForId(Bt.trackId);ee[Bt.streamId].setModeForTrackIdx(Gt,v.Z.TEXT_DISABLED)}}),ge.downloadFonts()}function Q(Ne){try{var Ye=Ne.streamId;if(!ee[Ye]||isNaN(Ne.time))return;ee[Ye].manualCueProcessing(Ne.time)}catch(dt){}}function Me(Ne){try{var Ye=Ne.streamId;if(!ee[Ye])return;ee[Ye].disableManualTracks()}catch(dt){}}function Ie(){var Ne=!0;return Se&&!Ee&&(Ne=!1),Ne}function ke(Ne,Ye){(Se=Ye===-1)&&Le&&Le.saveTextSettingsDisabled();var dt=Re(Ne);if(dt!==Ye&&ee[Ne]){ee[Ne].disableManualTracks();var at=ee[Ne].getCurrentTrackInfo(),Je=at?je.getTextTrack(at.kind,at.id,at.lang,at.isTTML,at.isEmbedded):null;Je&&Je.mode!==v.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(dt,v.Z.TEXT_HIDDEN),ee[Ne].setCurrentTrackIdx(Ye),at=ee[Ne].getCurrentTrackInfo();var ht=Z.get().streaming.text.dispatchForManualRendering;at&&!ht&&at.mode!==v.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(Ye,v.Z.TEXT_SHOWING),at&&at.isFragmented&&!at.isEmbedded?function(Bt,Gt,kt){if(K[Bt])for(var Ft=K[Bt].getConfig().fragmentedTracks,An=0;An<Ft.length;An++){var nt=Ft[An];if(Gt.lang===nt.lang&&(nt.id?Gt.id===nt.id:Gt.index===nt.index)){var mt=Le.getCurrentTrackFor(v.Z.TEXT,Bt);(nt.id?mt.id!==nt.id:mt.index!==nt.index)?(ee[Bt].deleteCuesFromTrackIdx(kt),K[Bt].setCurrentFragmentedTrackIdx(An)):kt===-1&&de.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Bt,mediaType:v.Z.TEXT})}}}(Ne,at,dt):at&&!at.isFragmented&&function(Bt,Gt){de.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Gt},{streamId:Bt,mediaType:v.Z.TEXT})}(Ne,at),Le.setTrack(at)}}function Re(Ne){return ee[Ne].getCurrentTrackIdx()}function pe(){K={},ee={},B={},Se=!0,ie=!1,me=!1}return D={deactivateStream:function(Ne){if(Ne){var Ye=Ne.id;K[Ye]&&K[Ye].resetMediaInfos(),ee[Ye]&&ee[Ye].deleteAllTextTracks()}},initialize:function(){ge=Q0(De).create({adapter:Be,baseURLController:we}),de.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,D),de.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,D),de.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,D),Z.get().streaming.text.webvtt.customRenderingEnabled&&(de.on(T.Z.PLAYBACK_TIME_UPDATED,Q,D),de.on(T.Z.PLAYBACK_SEEKING,Me,D))},initializeForStream:function(Ne){var Ye=Ne.id,dt=hm(De).create({videoModel:je,settings:Z,streamInfo:Ne});dt.initialize(),ee[Ye]=dt;var at=Lh(De).create({errHandler:ze,adapter:Be,dvbFonts:ge,manifestModel:_e,mediaController:Le,videoModel:je,textTracks:dt,vttParser:J,vttCustomRenderingParser:H,ttmlParser:re,streamInfo:Ne,settings:Z});at.initialize(),K[Ye]=at,B[Ye]={},B[Ye].lastEnabledIndex=-1},createTracks:function(Ne){var Ye=Ne.id;ee[Ye]&&ee[Ye].createTracks()},getTextSourceBuffer:function(Ne){var Ye=Ne.id;if(K&&K[Ye])return K[Ye]},getAllTracksAreDisabled:function(){return Se},addEmbeddedTrack:function(Ne,Ye){var dt=Ne.id;K[dt]&&K[dt].addEmbeddedTrack(Ye)},enableText:function(Ne,Ye){return(0,he.PS)(Ye,"boolean"),Ie()!==Ye&&(Ye&&ke(Ne,B[Ne].lastEnabledIndex),Ye||(B[Ne].lastEnabledIndex=Re(Ne),ie?ke(Ne,-1):me=!0)),!0},isTextEnabled:Ie,setTextTrack:ke,getCurrentTrackIdx:Re,enableForcedTextStreaming:function(Ne){return(0,he.PS)(Ne,"boolean"),Ee=Ne,!0},addMediaInfosToBuffer:function(Ne,Ye,dt){var at=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Je=Ne.id;K[Je]&&K[Je].addMediaInfos(Ye,dt,at)},reset:function(){ge.reset(),pe(),de.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,D),de.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,D),de.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,D),Z.get().streaming.text.webvtt.customRenderingEnabled&&(de.off(T.Z.PLAYBACK_TIME_UPDATED,Q,D),de.off(T.Z.PLAYBACK_SEEKING,Me,D)),Object.keys(K).forEach(function(Ne){K[Ne].resetEmbedded(),K[Ne].reset()})}},Ee=!1,ie=!1,me=!1,J=gm(De).getInstance(),H=X0(De).getInstance(),re=$0(De).getInstance(),de=(0,m.Z)(De).getInstance(),qe=(0,x.Z)(De).getInstance().getLogger(D),pe(),D}vm.__dashjs_factory_name="TextController";var J0=U.Z.getClassFactory(vm);function Cc(){var L,D,B,K,ee,J,H,re,de,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,ue,Q,Me,Ie,ke,Re,pe,Ne,Ye,dt,at,Je,ht,Bt,Gt="You must first call initialize() and set a source before calling this method",kt="You must first call initialize() and set a valid source and view before calling this method",Ft="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",nt="MediaPlayer not initialized!",mt=this.context,Wt=(0,m.Z)(mt).getInstance(),Rt=(0,Ze.Z)(mt).getInstance(),en=(0,x.Z)(mt).getInstance({settings:Rt});function Jt(){Gn(null),xn(null),K=null,ge&&(ge.reset(),ge=null),qe&&(qe.reset(),qe=null),Le&&Le.reset(),Rt.reset(),Be&&(Be.reset(),Be=null)}function Yt(){return!!B&&!!at.getElement()}function Dn(){return(0,am.e)()}function Nn(){if(!H)throw kt;return Me.isPaused()}function rr(){if(!H)throw kt;return Me.getIsDynamic()}function ir(Ke){var Ve=ae&&ae.hasVideoTrack()?v.Z.VIDEO:v.Z.AUDIO,Mt=pe.getCurrentDVRInfo(Ve);if(!Mt)return 0;var fn=Me.getOriginalLiveDelay(),Tn=Mt.range.start+Ke;return Tn>Mt.range.end-fn&&(Tn=Mt.range.end-fn),Tn}function At(Ke){if(!H)throw kt;var Ve=Pn().currentTime;if(Ke!==void 0)Ve=ae.getTimeRelativeToStreamId(Ve,Ke);else if(Me.getIsDynamic()){var Mt=ae&&ae.hasVideoTrack()?v.Z.VIDEO:v.Z.AUDIO,fn=pe.getCurrentDVRInfo(Mt);Ve=fn===null||Ve===0?0:Math.max(0,Ve-fn.range.start)}return Ve}function Xt(){if(!H)throw kt;var Ke=Pn().duration;if(Me.getIsDynamic()){var Ve=ae&&ae.hasVideoTrack()?v.Z.VIDEO:v.Z.AUDIO,Mt=pe.getCurrentDVRInfo(Ve);Ke=Mt?Mt.range.end-Mt.range.start:0}return Ke}function Zt(Ke){(0,he.PS)(Ke,"boolean"),re=Ke}function un(){Le.restoreDefaultUTCTimingSources()}function mn(){return pe}function Pn(){if(!at.getElement())throw Ft;return at.getElement()}function xn(Ke){if(!ee)throw nt;at.setElement(Ke),Ke&&(On(),function(){if(!qe){var Ve=dashjs.MetricsReporting;if(typeof Ve=="function"){var Mt=Ve(mt).create();qe=Mt.createMetricsReporting({debug:en,eventBus:Wt,mediaElement:Pn(),adapter:ze,dashMetrics:pe,mediaPlayerModel:_e,events:T.Z,constants:v.Z,metricsConstants:O.Z})}}}(),function(){if(!De){var Ve=dashjs.MssHandler;typeof Ve=="function"&&(Ae.extend(Ve.errors),De=Ve(mt).create({eventBus:Wt,mediaPlayerModel:_e,dashMetrics:pe,manifestModel:Ne,playbackController:Me,streamController:ae,protectionController:ge,baseURLController:je,errHandler:we,events:T.Z,constants:v.Z,debug:en,initSegmentType:it.w.INIT_SEGMENT_TYPE,BASE64:Lf,ISOBoxer:ua,settings:Rt}))}}(),ae&&ae.switchToVideoElement(de)),H&&Sn(),qt(de)}function Fn(Ke){if(!J)throw Gt;var Ve=ae.getActiveStreamInfo();return Ve?me.getTracksFor(Ke,Ve.id):[]}function Gn(Ke){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw nt;typeof Ke=="string"&&Je.initialize(Ke),Ve==null&&(Ve=NaN),isNaN(Ve)||(Ve=Math.max(0,Ve)),de=Ve,B=Ke,(J||H)&&Sn(),Yt()&&qt(de)}function It(){if(!J)throw Gt;var Ke=ae.getActiveStreamInfo();return Ke?ae.getStreamById(Ke.id):null}function Sn(){H=!1,J=!1,ze.reset(),ae.reset(),Q.reset(),Re.reset(),Me.reset(),Ie.reset(),ke.reset(),Se.reset(),me.reset(),Bt.reset(),ge&&(Rt.get().streaming.protection.keepProtectionMediaKeys?ge.stop():(ge.reset(),ge=null,On())),ue.reset(),Ye.reset(),dt.reset()}function En(){var Ke=Lt();ae||(ae=qo(mt).getInstance()),ue||(ue=J0(mt).create({errHandler:we,manifestModel:Ne,adapter:ze,mediaController:me,baseURLController:je,videoModel:at,settings:Rt})),le.setConfig({capabilities:Z,customParametersModel:Le,adapter:ze,settings:Rt,manifestModel:Ne,errHandler:we}),ae.setConfig({capabilities:Z,capabilitiesFilter:le,manifestLoader:Ke,manifestModel:Ne,mediaPlayerModel:_e,customParametersModel:Le,protectionController:ge,textController:ue,adapter:ze,dashMetrics:pe,errHandler:we,timelineConverter:ie,videoModel:at,playbackController:Me,serviceDescriptionController:Ie,contentSteeringController:ke,abrController:Se,mediaController:me,settings:Rt,baseURLController:je,uriFragmentModel:Je,segmentBaseController:Bt}),Q.setConfig({settings:Rt,playbackController:Me,streamController:ae,videoModel:at,timelineConverter:ie,adapter:ze}),Me.setConfig({streamController:ae,serviceDescriptionController:Ie,dashMetrics:pe,adapter:ze,videoModel:at,timelineConverter:ie,settings:Rt}),Re.setConfig({streamController:ae,playbackController:Me,mediaPlayerModel:_e,videoModel:at,settings:Rt}),Se.setConfig({streamController:ae,domStorage:ht,mediaPlayerModel:_e,customParametersModel:Le,cmsdModel:dt,dashMetrics:pe,adapter:ze,videoModel:at,settings:Rt}),Ye.setConfig({abrController:Se,dashMetrics:pe,playbackController:Me}),dt.setConfig({}),Se.initialize(),ae.initialize(re,K),ue.initialize(),Q.initialize(),Re.initialize(),Ye.initialize(),dt.initialize(),ke.initialize(),Bt.initialize()}function Lt(){return Qg(mt).create({debug:en,errHandler:we,dashMetrics:pe,mediaPlayerModel:_e,requestModifier:(0,He.Z)(mt).getInstance(),mssHandler:De,settings:Rt})}function On(){if(ge)return ge;var Ke=dashjs.Protection;if(typeof Ke=="function"){var Ve=Ke(mt).create();return T.Z.extend(Ke.events),_.Z.extend(Ke.events,{publicOnly:!0}),Ae.extend(Ke.errors),Z||(Z=(0,Jg.Z)(mt).getInstance()),ge=Ve.createProtectionSystem({debug:en,errHandler:we,videoModel:at,customParametersModel:Le,capabilities:Z,eventBus:Wt,events:T.Z,BASE64:Lf,constants:v.Z,cmcdModel:Ye,settings:Rt})}return null}function ut(){if(!ee)throw nt;if(Be)return Be;var Ke=dashjs.OfflineController;if(typeof Ke=="function"){T.Z.extend(Ke.events),_.Z.extend(Ke.events,{publicOnly:!0}),Ae.extend(Ke.errors);var Ve=Lt(),Mt=Kr(mt).create();return Mt.setConfig({manifestModel:Ne,adapter:ze,manifestLoader:Ve,errHandler:we,contentSteeringController:ke}),Be=Ke(mt).create({debug:en,manifestUpdater:Mt,baseURLController:je,manifestLoader:Ve,manifestModel:Ne,mediaPlayerModel:_e,abrController:Se,playbackController:Me,adapter:ze,errHandler:we,dashMetrics:pe,timelineConverter:ie,segmentBaseController:Bt,schemeLoaderFactory:Ee,eventBus:Wt,events:T.Z,errors:Ae,constants:v.Z,settings:Rt,dashConstants:y.Z,urlUtils:(0,_t.Z)(mt).getInstance()})}return null}function tt(Ke){var Ve=ae&&ae.hasVideoTrack()?v.Z.VIDEO:v.Z.AUDIO,Mt=pe.getCurrentDVRInfo(Ve);return Mt?Ke+(Mt.manifestInfo.availableFrom.getTime()/1e3+Mt.range.start):0}function qt(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Be&&Be.resetRecords(),!J&&B&&(J=!0,D.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,Ke):ae.loadWithManifest(B,Ke)),!H&&Yt()&&(H=!0,D.info("Playback Initialized"))}return L={initialize:function(Ke,Ve,Mt){var fn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;Z||(Z=(0,Jg.Z)(mt).getInstance()).setConfig({settings:Rt}),we||(we=Il(mt).getInstance()),Z.supportsMediaSource()?(ee||(ee=!0,ie=hu(mt).getInstance(),Se||(Se=Wn(mt).getInstance()).setConfig({settings:Rt}),Ee||(Ee=Di(mt).getInstance()),Me||(Me=b(mt).getInstance()),me||(me=Du(mt).getInstance()),ae||(ae=qo(mt).getInstance()),Q||(Q=xs(mt).getInstance()),Re||(Re=co(mt).getInstance()),Ie||(Ie=ch(mt).getInstance()),ke||(ke=Ta(mt).getInstance()),le||(le=j0(mt).getInstance()),ze=um(mt).getInstance(),Ne=q0(mt).getInstance(),Ye=ar(mt).getInstance(),dt=_n(mt).getInstance(),pe=Os(mt).getInstance({settings:Rt}),ht=H0(mt).getInstance({settings:Rt}),ze.setConfig({constants:v.Z,cea608parser:R(),errHandler:we,BASE64:Lf}),je||(je=O0(mt).create()),je.setConfig({adapter:ze,contentSteeringController:ke}),Ie.setConfig({adapter:ze}),Bt||(Bt=V0(mt).getInstance({dashMetrics:pe,mediaPlayerModel:_e,errHandler:we,baseURLController:je,events:T.Z,eventBus:Wt,debug:en,boxParser:(0,ia.Z)(mt).getInstance(),requestModifier:(0,He.Z)(mt).getInstance(),errors:Ae})),me.setConfig({domStorage:ht,settings:Rt,customParametersModel:Le}),_e.setConfig({playbackController:Me,serviceDescriptionController:Ie}),ke.setConfig({adapter:ze,errHandler:we,dashMetrics:pe,mediaPlayerModel:_e,manifestModel:Ne,serviceDescriptionController:Ie,eventBus:Wt,requestModifier:(0,He.Z)(mt).getInstance()}),un(),Zt(Mt===void 0||Mt),ut()),Ke&&xn(Ke),Ve&&Gn(Ve,fn),D.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):we.error(new ce.Z(Ae.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ae.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ke){Ke&&(Ke.capabilities&&(Z=Ke.capabilities),Ke.capabilitiesFilter&&(le=Ke.capabilitiesFilter),Ke.streamController&&(ae=Ke.streamController),Ke.textController&&(ue=Ke.textController),Ke.gapController&&(Q=Ke.gapController),Ke.playbackController&&(Me=Ke.playbackController),Ke.serviceDescriptionController&&(Ie=Ke.serviceDescriptionController),Ke.contentSteeringController&&(ke=Ke.contentSteeringController),Ke.catchupController&&(Re=Ke.catchupController),Ke.mediaPlayerModel&&(_e=Ke.mediaPlayerModel),Ke.customParametersModel&&(Le=Ke.customParametersModel),Ke.abrController&&(Se=Ke.abrController),Ke.schemeLoaderFactory&&(Ee=Ke.schemeLoaderFactory),Ke.mediaController&&(me=Ke.mediaController),Ke.settings&&(Rt=Ke.settings))},on:function(Ke,Ve,Mt,fn){Wt.on(Ke,Ve,Mt,fn)},off:function(Ke,Ve,Mt){Wt.off(Ke,Ve,Mt)},extend:function(Ke,Ve,Mt){U.Z.extend(Ke,Ve,Mt,mt)},attachView:xn,attachSource:Gn,refreshManifest:function(Ke){if(!ee)throw nt;if(!Yt())return Ke(null,An);var Ve=this;typeof Ke=="function"&&Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Mt(fn){Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Mt,Ve),fn.error?Ke(null,fn.error):Ke(fn.manifest)},Ve),ae.refreshManifest()},isReady:Yt,preload:function(){if(!at.getElement()&&!J){if(!B)throw An;qt(de)}},play:function(){if(!H)throw kt;(!re||Nn()&&H)&&Me.play(!0)},isPaused:Nn,pause:function(){if(!H)throw kt;Me.pause()},isSeeking:function(){if(!H)throw kt;return Me.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw kt;return Me.getLowLatencyModeEnabled()},seek:function(Ke){if(!H)throw kt;if((0,he.PS)(Ke,"number"),isNaN(Ke))throw v.Z.BAD_ARGUMENT_ERROR;Ke<0&&(Ke=0);var Ve=Me.getIsDynamic()?ir(Ke):Ke,Mt=Pn();!Me.getIsDynamic()&&Mt.duration&&(Ve=Math.min(Mt.duration,Ve)),Me.seek(Ve,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Me.seekToOriginalLive()},setPlaybackRate:function(Ke){Pn().playbackRate=Ke},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(Ke){(0,he.PS)(Ke,"boolean"),Pn().muted=Ke},isMuted:function(){return Pn().muted},setVolume:function(Ke){if(typeof Ke!="number"||isNaN(Ke)||Ke<0||Ke>1)throw v.Z.BAD_ARGUMENT_ERROR;Pn().volume=Ke},getVolume:function(){return Pn().volume},time:At,duration:Xt,timeAsUTC:function(){if(!H)throw kt;return At()<0?NaN:tt(At())},durationAsUTC:function(){if(!H)throw kt;return tt(Xt())},getActiveStream:It,getDVRWindowSize:function(){var Ke=ae&&ae.hasVideoTrack()?v.Z.VIDEO:v.Z.AUDIO,Ve=pe.getCurrentDVRInfo(Ke);return Ve?Ve.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var Ke=Ne.getValue();return Ke?je.getBaseUrls(Ke):[]},getAvailableLocations:function(){var Ke=Ne.getValue();if(!Ke)return[];var Ve=ze.getLocation(Ke),Mt=ke.getSynthesizedLocationElements(Ve);return Ve.concat(Mt)},getTargetLiveDelay:function(){if(!H)throw kt;return Me.getOriginalLiveDelay()},convertToTimeCode:function(Ke){Ke=Math.max(Ke,0);var Ve=Math.floor(Ke/3600),Mt=Math.floor(Ke%3600/60),fn=Math.floor(Ke%3600%60);return(Ve===0?"":Ve<10?"0"+Ve.toString()+":":Ve.toString()+":")+(Mt<10?"0"+Mt.toString():Mt.toString())+":"+(fn<10?"0"+fn.toString():fn.toString())},formatUTC:function(Ke,Ve,Mt){var fn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*Ke),sr=Tn.toLocaleDateString(Ve),Zr=Tn.toLocaleTimeString(Ve,{hour12:Mt});return fn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(Ke){var Ve=[v.Z.VIDEO,v.Z.AUDIO,v.Z.TEXT];if(Ke)return Ve.indexOf(Ke)!==-1?mn().getCurrentBufferLevel(Ke)||NaN:(D.warn("getBufferLength requested for invalid type"),NaN);var Mt=Ve.map(function(fn){return Fn(fn).length>0?mn().getCurrentBufferLevel(fn):Number.MAX_VALUE}).reduce(function(fn,Tn){return Math.min(fn,Tn)});return Mt===Number.MAX_VALUE?NaN:Mt},getTTMLRenderingDiv:function(){return at?at.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(Ke){B=Ke,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw nt;return H?Me.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ke){if(!J)throw Gt;return Se.getTopBitrateInfoFor(Ke)},setAutoPlay:Zt,getAutoPlay:function(){return re},getDashMetrics:mn,getQualityFor:function(Ke){if(!J)throw Gt;if(Ke===v.Z.IMAGE){var Ve=It();if(!Ve)return-1;var Mt=Ve.getThumbnailController();return Mt?Mt.getCurrentTrackIndex():-1}return Se.getQualityFor(Ke)},setQualityFor:function(Ke,Ve){var Mt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw Gt;if(Ke===v.Z.IMAGE){var fn=It();if(!fn)return;var Tn=fn.getThumbnailController();Tn&&Tn.setTrackByIndex(Ve)}Se.setPlaybackQuality(Ke,ae.getActiveStreamInfo(),Ve,{forceReplace:Mt})},updatePortalSize:function(){Se.setElementSize(),Se.setWindowResizeEventCalled(!0)},enableText:function(Ke){var Ve=ae.getActiveStreamInfo();return!(!Ve||!ue)&&ue.enableText(Ve.id,Ke)},enableForcedTextStreaming:function(Ke){return!(!ae.getActiveStreamInfo()||!ue)&&ue.enableForcedTextStreaming(Ke)},isTextEnabled:function(){var Ke=ae.getActiveStreamInfo();return!(!Ke||!ue)&&ue.isTextEnabled(Ke)},setTextTrack:function(Ke){if(!H)throw kt;var Ve=ae.getActiveStreamInfo();Ve&&ue&&ue.setTextTrack(Ve.id,Ke)},getBitrateInfoListFor:function(Ke){if(!J)throw Gt;var Ve=It();return Ve?Ve.getBitrateListFor(Ke):[]},getStreamsFromManifest:function(Ke){if(!J)throw Gt;return ze.getStreamsInfo(Ke)},getTracksFor:Fn,getTracksForTypeFromManifest:function(Ke,Ve,Mt){if(!J)throw Gt;return(Mt=Mt||ze.getStreamsInfo(Ve,1)[0])?ze.getAllMediaInfoForType(Mt,Ke,Ve):[]},getCurrentTrackFor:function(Ke){if(!J)throw Gt;var Ve=ae.getActiveStreamInfo();return me.getCurrentTrackFor(Ke,Ve.id)},setInitialMediaSettingsFor:function(Ke,Ve){if(!ee)throw nt;me.setInitialSettings(Ke,Ve)},getInitialMediaSettingsFor:function(Ke){if(!ee)throw nt;return me.getInitialSettings(Ke)},setCurrentTrack:function(Ke){var Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw Gt;me.setTrack(Ke,Ve)},addABRCustomRule:function(Ke,Ve,Mt){Le.addAbrCustomRule(Ke,Ve,Mt)},removeABRCustomRule:function(Ke){Le.removeAbrCustomRule(Ke)},removeAllABRCustomRule:function(){Le.removeAllAbrCustomRule()},getABRCustomRules:function(){return Le.getAbrCustomRules()},getAverageThroughput:function(Ke){var Ve=Se.getThroughputHistory(),Mt=Me.getIsDynamic();return Ve?Ve.getAverageThroughput(Ke,Mt):0},retrieveManifest:function(Ke,Ve){var Mt=Lt(),fn=this;Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?Ve(null,sr.error):Ve(sr.manifest),Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,fn),Mt.reset()},fn),Je.initialize(Ke),Mt.load(Ke)},addUTCTimingSource:function(Ke,Ve){Le.addUTCTimingSource(Ke,Ve)},removeUTCTimingSource:function(Ke,Ve){Le.removeUTCTimingSource(Ke,Ve)},clearDefaultUTCTimingSources:function(){Le.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(Ke,Ve){Le.setXHRWithCredentialsForType(Ke,Ve)},getXHRWithCredentialsForType:function(Ke){return Le.getXHRWithCredentialsForType(Ke)},getProtectionController:function(){return On()},attachProtectionController:function(Ke){ge=Ke},setProtectionData:function(Ke){K=Ke,ae&&ae.setProtectionData(K)},registerLicenseRequestFilter:function(Ke){Le.registerLicenseRequestFilter(Ke)},registerLicenseResponseFilter:function(Ke){Le.registerLicenseResponseFilter(Ke)},unregisterLicenseRequestFilter:function(Ke){Le.unregisterLicenseRequestFilter(Ke)},unregisterLicenseResponseFilter:function(Ke){Le.unregisterLicenseResponseFilter(Ke)},registerCustomCapabilitiesFilter:function(Ke){Le.registerCustomCapabilitiesFilter(Ke)},unregisterCustomCapabilitiesFilter:function(Ke){Le.unregisterCustomCapabilitiesFilter(Ke)},setCustomInitialTrackSelectionFunction:function(Ke){Le.setCustomInitialTrackSelectionFunction(Ke)},resetCustomInitialTrackSelectionFunction:function(){Le.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ke){if(!at.getElement())throw Ft;at.setTTMLRenderingDiv(Ke)},attachVttRenderingDiv:function(Ke){if(!at.getElement())throw Ft;at.setVttRenderingDiv(Ke)},getCurrentTextTrackIndex:function(){var Ke=ae.getActiveStreamInfo();if(Ke&&ue)return ue.getCurrentTrackIdx(Ke.id)},provideThumbnail:function(Ke,Ve){if(typeof Ve=="function")if(Ke<0)Ve(null);else{var Mt=Me.getIsDynamic()?ir(Ke):Ke,fn=ae.getStreamForTime(Mt);if(fn!==null){var Tn=fn.getThumbnailController();if(Tn)return Tn.provide(Mt,Ve);Ve(null)}else Ve(null)}},getDashAdapter:function(){return ze},getOfflineController:function(){return ut()},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getSettings:function(){return Rt.get()},updateSettings:function(Ke){Rt.update(Ke)},resetSettings:function(){Rt.reset()},reset:Jt,destroy:function(){Jt(),U.Z.deleteSingletonInstances(mt)}},D=en.getLogger(L),ee=!1,H=!1,J=!1,re=!0,de=NaN,ge=null,Be=null,K=null,ze=null,Bt=null,T.Z.extend(_.Z),_e=Cl(mt).getInstance(),Le=(0,ti.Z)(mt).getInstance(),at=Sr(mt).getInstance(),Je=G0(mt).getInstance(),L}Cc.__dashjs_factory_name="MediaPlayer";var bc=U.Z.getClassFactory(Cc);bc.events=_.Z,bc.errors=Ae,U.Z.updateClassFactory(Cc.__dashjs_factory_name,bc);var Em=bc},8825:function(C,g,S){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},R(m,T)}function v(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var O=new(function(m){(function(I,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(b&&b.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),b&&R(I,b)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,b=y(T);if(U){var j=y(this).constructor;I=Reflect.construct(b,arguments,j)}else I=b.apply(this,arguments);return v(this,I)});function _(){var I;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(S(8342).Z));g.Z=O},3393:function(C,g){function S(R,v){for(var y=0;y<v.length;y++){var O=v[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}var F=new(function(){function R(){(function(O,m){if(!(O instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var v,y;return v=R,(y=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&S(v.prototype,y),R}());g.Z=F},3860:function(C,g){function S(R,v){for(var y=0;y<v.length;y++){var O=v[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}var F=new(function(){function R(){(function(O,m){if(!(O instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var v,y;return v=R,(y=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&S(v.prototype,y),R}());g.Z=F},8080:function(C,g,S){S.d(g,{default:function(){return q}});var F=function V(){(function(he,fe){if(!(he instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,V),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};F.SSL_CONNECTION_FAILED_PREFIX="SSL",F.DNS_RESOLUTION_FAILED="C00",F.HOST_UNREACHABLE="C01",F.CONNECTION_REFUSED="C02",F.CONNECTION_ERROR="C03",F.CORRUPT_MEDIA_ISOBMFF="M00",F.CORRUPT_MEDIA_OTHER="M01",F.BASE_URL_CHANGED="F00",F.BECAME_REPORTER="S00";var R=F,v=S(1180);function y(V){var he,fe,He=(V=V||{}).eventBus,_t=V.dashMetrics,ot=V.metricsConstants,rt=V.events;function et($t){var nn=new R;if(fe){for(var Ot in $t)$t.hasOwnProperty(Ot)&&(nn[Ot]=$t[Ot]);nn.mpdurl||(nn.mpdurl=fe.originalUrl||fe.url),nn.terror||(nn.terror=new Date),_t.addDVBErrors(nn)}}function ft($t){$t.error||(fe=$t.manifest)}function yt($t){et({errorcode:R.BASE_URL_CHANGED,servicelocation:$t.entry})}function Et(){et({errorcode:R.BECAME_REPORTER})}function Ct($t){var nn;$t.metric===ot.HTTP_REQUEST&&((nn=$t.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&et({errorcode:nn.responsecode||R.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function hn($t){var nn;switch($t.error?$t.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=R.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=R.CORRUPT_MEDIA_OTHER;break;default:return}et({errorcode:nn})}return he={initialize:function(){He.on(rt.MANIFEST_UPDATED,ft,he),He.on(rt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,he),He.on(rt.METRIC_ADDED,Ct,he),He.on(rt.METRIC_UPDATED,Ct,he),He.on(rt.PLAYBACK_ERROR,hn,he),He.on(v.Z.BECAME_REPORTING_PLAYER,Et,he)},reset:function(){He.off(rt.MANIFEST_UPDATED,ft,he),He.off(rt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,yt,he),He.off(rt.METRIC_ADDED,Ct,he),He.off(rt.METRIC_UPDATED,Ct,he),He.off(rt.PLAYBACK_ERROR,hn,he),He.off(v.Z.BECAME_REPORTING_PLAYER,Et,he)}}}y.__dashjs_factory_name="DVBErrorsTranslator";var O=dashjs.FactoryMaker.getSingletonFactory(y),m=S(2295);function T(V){V=V||{};var he,fe,He=!1,_t=this.context,ot=V.mediaElement;return he={initialize:function(rt){rt&&rt.length&&(rt.forEach(function(et){var ft=et.starttime,yt=ft+et.duration;fe.add(ft,yt)}),He=!!rt[0]._useWallClockTime)},reset:function(){fe.clear()},isEnabled:function(){var rt,et=fe.length;if(!et)return!0;rt=He?new Date().getTime()/1e3:ot.currentTime;for(var ft=0;ft<et;ft+=1){var yt=fe.start(ft),Et=fe.end(ft);if(yt<=rt&&rt<Et)return!0}return!1}},fe=(0,m.Z)(_t).create(),he}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function x(){return{serialise:function V(he){var fe,He,_t=[],ot=[];for(fe in he)if(he.hasOwnProperty(fe)&&fe.indexOf("_")!==0){if((He=he[fe])==null&&(He=""),Array.isArray(He)){if(!He.length)continue;ot=[],He.forEach(function(rt){var et=Object.prototype.toString.call(rt).slice(8,-1)!=="Object";ot.push(et?rt:V(rt))}),He=ot.map(encodeURIComponent).join(",")}else typeof He=="string"?He=encodeURIComponent(He):He instanceof Date?He=He.toISOString():typeof He=="number"&&(He=Math.round(He));_t.push(fe+"="+He)}return _t.join("&")}}}x.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(x);function I(){var V,he,fe,He=window.crypto||window.msCrypto,_t=Uint32Array,ot=Math.pow(2,8*_t.BYTES_PER_ELEMENT)-1;function rt(){He&&(V||(V=new _t(10)),He.getRandomValues(V),he=0)}return fe={random:function(et,ft){var yt;return et||(et=0),ft||(ft=1),He?(he===V.length&&rt(),yt=V[he]/ot,he+=1):yt=Math.random(),yt*(ft-et)+et}},rt(),fe}I.__dashjs_factory_name="RNG";var b=dashjs.FactoryMaker.getSingletonFactory(I),j=S(5717);function Y(V){var he;V=V||{};var fe,He,_t,ot,rt,et,ft,yt=this.context,Et=[],Ct=V.metricsConstants;function hn(){ot=!1,rt=!1,et=null,ft=null}return he={report:function($t,nn){Array.isArray(nn)||(nn=[nn]),rt&&ft.isEnabled()&&nn.forEach(function(Ot){var Un=fe.serialise(Ot);$t!==Ct.DVB_ERRORS&&(Un="metricname=".concat($t,"&").concat(Un)),function(gr,Pr,dr){var ei=new XMLHttpRequest;ei.withCredentials=He.getXHRWithCredentialsForType(Ct.HTTP_REQUEST_DVB_REPORTING_TYPE);var Ji=function(){var Or=Et.indexOf(ei);Or!==-1&&(Et.splice(Or,1),!(ei.status>=200&&ei.status<300)&&dr&&dr())};Et.push(ei);try{ei.open("GET",gr),ei.onloadend=Ji,ei.onerror=Ji,ei.send()}catch(Or){ei.onerror()}}(Un="".concat(et,"?").concat(Un),0,function(){rt=!1})})},initialize:function($t,nn){var Ot;if(ft=nn,!(et=$t.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");ot||((Ot=$t.dvbProbability)&&(Ot===1e3||Ot/1e3>=_t.random())&&(rt=!0),ot=!0)},reset:function(){hn()}},fe=_(yt).getInstance(),_t=b(yt).getInstance(),He=(0,j.Z)(yt).getInstance(),hn(),he}Y.__dashjs_factory_name="DVBReporting";var W=dashjs.FactoryMaker.getClassFactory(Y);function X(V){V=V||{};var he,fe={"urn:dvb:dash:reporting:2014":W},He=this.context,_t=V.debug?V.debug.getLogger(he):{},ot=V.metricsConstants,rt=V.mediaPlayerModel||{};return{create:function(et,ft){var yt;try{(yt=fe[et.schemeIdUri](He).create({metricsConstants:ot,mediaPlayerModel:rt})).initialize(et,ft)}catch(Et){yt=null,_t.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(et.schemeIdUri," (").concat(Et.message,")"))}return yt},register:function(et,ft){fe[et]=ft},unregister:function(et){delete fe[et]}}}X.__dashjs_factory_name="ReportingFactory";var se=dashjs.FactoryMaker.getSingletonFactory(X);function N(V){var he=[],fe=se(this.context).getInstance(V);return{initialize:function(He,_t){He.some(function(ot){var rt=fe.create(ot,_t);if(rt)return he.push(rt),!0})},reset:function(){he.forEach(function(He){return He.reset()}),he=[]},report:function(He,_t){he.forEach(function(ot){return ot.report(He,_t)})}}}N.__dashjs_factory_name="ReportingController";var $=dashjs.FactoryMaker.getClassFactory(N);function ce(){return{reconstructFullMetricName:function(V,he,fe){var He=V;return he&&(He+="("+he,fe&&fe.length&&(He+=","+fe),He+=")"),He},validateN:function(V){if(!V)throw new Error("missing n");if(isNaN(V))throw new Error("n is NaN");if(V<0)throw new Error("n must be positive");return V}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function ye(V){var he,fe,He,_t,ot;V=V||{};var rt=this.context,et=oe(rt).getInstance(),ft=[],yt=V.metricsConstants;function Et(){var Ct=function(){try{return Object.keys(ft).map(function(hn){return ft[hn]}).reduce(function(hn,$t){return hn.level<$t.level?hn:$t})}catch(hn){return}}();Ct&&ot!==Ct.t&&(ot=Ct.t,he.report(He,Ct))}return{initialize:function(Ct,hn,$t){hn&&(fe=et.validateN($t),he=hn,He=et.reconstructFullMetricName(Ct,$t),_t=setInterval(Et,fe))},reset:function(){clearInterval(_t),_t=null,fe=0,he=null,ot=null},handleNewMetric:function(Ct,hn,$t){Ct===yt.BUFFER_LEVEL&&(ft[$t]=hn)}}}ye.__dashjs_factory_name="BufferLevelHandler";var be=dashjs.FactoryMaker.getClassFactory(ye),$e=dashjs.FactoryMaker.getClassFactory(function(V){var he,fe=(V=V||{}).eventBus,He=V.metricsConstants;function _t(){fe.off(v.Z.METRICS_INITIALISATION_COMPLETE,_t,this),fe.trigger(v.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(ot,rt){rt&&(he=rt,fe.on(v.Z.METRICS_INITIALISATION_COMPLETE,_t,this))},reset:function(){he=null},handleNewMetric:function(ot,rt){ot===He.DVB_ERRORS&&he&&he.report(ot,rt)}}});function Ae(V){var he,fe,He,_t,ot;V=V||{};var rt=[],et=oe(this.context).getInstance(),ft=V.metricsConstants;function yt(){var Et=rt;Et.length&&he&&he.report(_t,Et),rt=[]}return{initialize:function(Et,Ct,hn,$t){Ct&&(fe=et.validateN(hn),he=Ct,$t&&$t.length&&(He=$t),_t=et.reconstructFullMetricName(Et,hn,$t),ot=setInterval(yt,fe))},reset:function(){clearInterval(ot),ot=null,fe=null,He=null,rt=[],he=null},handleNewMetric:function(Et,Ct){Et===ft.HTTP_REQUEST&&(He&&He!==Ct.type||rt.push(Ct))}}}Ae.__dashjs_factory_name="HttpListHandler";var Ze=dashjs.FactoryMaker.getClassFactory(Ae);function it(){var V,he;return{initialize:function(fe,He){V=fe,he=He},reset:function(){he=null,V=void 0},handleNewMetric:function(fe,He){fe===V&&he&&he.report(V,He)}}}it.__dashjs_factory_name="GenericMetricHandler";var lt=dashjs.FactoryMaker.getClassFactory(it);function Xe(V){var he,fe=(V=V||{}).debug?V.debug.getLogger(he):{},He=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,_t=this.context,ot={BufferLevel:be,DVBErrors:$e,HttpList:Ze,PlayList:lt,RepSwitchList:lt,TcpList:lt};return{create:function(rt,et){var ft,yt=rt.match(He);if(yt){try{(ft=ot[yt[1]](_t).create({eventBus:V.eventBus,metricsConstants:V.metricsConstants})).initialize(yt[1],et,yt[3],yt[5])}catch(Et){ft=null,fe.error("MetricsHandlerFactory: Could not create handler for type ".concat(yt[1]," with args ").concat(yt[3],", ").concat(yt[5]," (").concat(Et.message,")"))}return ft}},register:function(rt,et){ot[rt]=et},unregister:function(rt){delete ot[rt]}}}Xe.__dashjs_factory_name="MetricsHandlerFactory";var st=dashjs.FactoryMaker.getSingletonFactory(Xe);function wt(V){V=V||{};var he,fe=[],He=this.context,_t=V.eventBus,ot=V.events,rt=st(He).getInstance({debug:V.debug,eventBus:V.eventBus,metricsConstants:V.metricsConstants});function et(ft){fe.forEach(function(yt){yt.handleNewMetric(ft.metric,ft.value,ft.mediaType)})}return he={initialize:function(ft,yt){ft.split(",").forEach(function(Et,Ct,hn){var $t;if(Et.indexOf("(")!==-1&&Et.indexOf(")")===-1){var nn=hn[Ct+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(Et+=","+nn,delete hn[Ct+1])}($t=rt.create(Et,yt))&&fe.push($t)}),_t.on(ot.METRIC_ADDED,et,he),_t.on(ot.METRIC_UPDATED,et,he)},reset:function(){_t.off(ot.METRIC_ADDED,et,he),_t.off(ot.METRIC_UPDATED,et,he),fe.forEach(function(ft){return ft.reset()}),fe=[]}}}wt.__dashjs_factory_name="MetricsHandlersController";var Oe=dashjs.FactoryMaker.getClassFactory(wt);function Qe(V){var he,fe,He;V=V||{};var _t=this.context;function ot(){he&&he.reset(),fe&&fe.reset(),He&&He.reset()}return{initialize:function(rt){try{(He=U(_t).create({mediaElement:V.mediaElement})).initialize(rt.Range),(fe=$(_t).create({debug:V.debug,metricsConstants:V.metricsConstants,mediaPlayerModel:V.mediaPlayerModel})).initialize(rt.Reporting,He),(he=Oe(_t).create({debug:V.debug,eventBus:V.eventBus,metricsConstants:V.metricsConstants,events:V.events})).initialize(rt.metrics,fe)}catch(et){throw ot(),et}},reset:ot}}Qe.__dashjs_factory_name="MetricsController";var ct=dashjs.FactoryMaker.getClassFactory(Qe),Qt=function V(){(function(he,fe){if(!(he instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,V),this.metrics="",this.Range=[],this.Reporting=[]},Vt=function V(){(function(he,fe){if(!(he instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,V),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Tt=function V(){(function(he,fe){if(!(he instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,V),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Pt(V){var he=(V=V||{}).adapter,fe=V.constants;return{getMetrics:function(He){var _t=[];return He&&He.Metrics_asArray&&He.Metrics_asArray.forEach(function(ot){var rt=new Qt,et=he.getIsDynamic(He);ot.hasOwnProperty("metrics")&&(rt.metrics=ot.metrics,ot.Range_asArray&&ot.Range_asArray.forEach(function(ft){var yt=new Vt;yt.starttime=function(Et,Ct,hn){var $t,nn,Ot=0;return Ct?Ot=he.getAvailabilityStartTime(Et)/1e3:($t=he.getRegularPeriods(Et)).length&&(Ot=$t[0].start),nn=Ot,hn&&hn.hasOwnProperty(fe.START_TIME)&&(nn+=hn.starttime),nn}(He,et,ft),ft.hasOwnProperty("duration")?yt.duration=ft.duration:yt.duration=he.getDuration(He),yt._useWallClockTime=et,rt.Range.push(yt)}),ot.Reporting_asArray&&(ot.Reporting_asArray.forEach(function(ft){var yt=new Tt;ft.hasOwnProperty(fe.SCHEME_ID_URI)&&(yt.schemeIdUri=ft.schemeIdUri,ft.hasOwnProperty("value")&&(yt.value=ft.value),ft.hasOwnProperty(fe.DVB_REPORTING_URL)&&(yt.dvbReportingUrl=ft[fe.DVB_REPORTING_URL]),ft.hasOwnProperty(fe.DVB_PROBABILITY)&&(yt.dvbProbability=ft[fe.DVB_PROBABILITY]),rt.Reporting.push(yt))}),_t.push(rt)))}),_t}}}Pt.__dashjs_factory_name="ManifestParsing";var Ce=dashjs.FactoryMaker.getSingletonFactory(Pt);function te(V){var he;V=V||{};var fe={},He=this.context,_t=V.eventBus,ot=V.events;function rt(ft){if(!ft.error){var yt=Object.keys(fe);Ce(He).getInstance({adapter:V.adapter,constants:V.constants}).getMetrics(ft.manifest).forEach(function(Et){var Ct=JSON.stringify(Et);if(fe.hasOwnProperty(Ct))yt.splice(Ct,1);else try{var hn=ct(He).create(V);hn.initialize(Et),fe[Ct]=hn}catch($t){}}),yt.forEach(function(Et){fe[Et].reset(),delete fe[Et]}),_t.trigger(v.Z.METRICS_INITIALISATION_COMPLETE)}}function et(){Object.keys(fe).forEach(function(ft){fe[ft].reset()}),fe={}}return he={reset:function(){_t.off(ot.MANIFEST_UPDATED,rt,he),_t.off(ot.STREAM_TEARDOWN_COMPLETE,et,he)}},_t.on(ot.MANIFEST_UPDATED,rt,he),_t.on(ot.STREAM_TEARDOWN_COMPLETE,et,he),he}te.__dashjs_factory_name="MetricsCollectionController";var Fe=dashjs.FactoryMaker.getClassFactory(te);function P(){var V=this.context;return{createMetricsReporting:function(he){return O(V).getInstance({eventBus:he.eventBus,dashMetrics:he.dashMetrics,metricsConstants:he.metricsConstants,events:he.events}).initialize(),Fe(V).create(he)},getReportingFactory:function(){return se(V).getInstance()},getMetricsHandlerFactory:function(){return st(V).getInstance()}}}P.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(P);M.events=v.Z,dashjs.FactoryMaker.updateClassFactory(P.__dashjs_factory_name,M);var q=M},1180:function(C,g,S){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,x){return U.__proto__=x,U},R(m,T)}function v(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function y(m){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},y(m)}var O=new(function(m){(function(I,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(b&&b.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),b&&R(I,b)})(_,m);var T,U,x=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,b=y(T);if(U){var j=y(this).constructor;I=Reflect.construct(b,arguments,j)}else I=b.apply(this,arguments);return v(this,I)});function _(){var I;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=x.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(S(8342).Z));g.Z=O},5717:function(C,g,S){var F=S(2610),R=S(5448),v=S(1264),y=S(3106),O=S(1767),m=S(3393);function T(){var U,x,_,I,b,j,Y,W,X=this.context,se=(0,v.Z)(X).getInstance();function N(){I=[],b=[],j=[],W=[],Y=null,x=[]}function $(be,$e){var Ae=-1;be.some(function(Ze,it){if(Ze===$e)return Ae=it,!0}),Ae<0||be.splice(Ae,1)}function ce(be){var $e;for($e=0;$e<W.length;$e++)if(W[$e].rulename===be)return $e;return-1}function oe(be,$e){ye(be,$e);var Ae=new F.Z;Ae.schemeIdUri=be,Ae.value=$e,x.push(Ae)}function ye(be,$e){(0,y.PS)(be,"string"),(0,y.PS)($e,"string"),x.forEach(function(Ae,Ze){Ae.schemeIdUri===be&&Ae.value===$e&&x.splice(Ze,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return Y},setCustomInitialTrackSelectionFunction:function(be){Y=be},resetCustomInitialTrackSelectionFunction:function(){Y=null},getLicenseResponseFilters:function(){return b},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return j},registerCustomCapabilitiesFilter:function(be){j.push(be)},registerLicenseResponseFilter:function(be){b.push(be)},registerLicenseRequestFilter:function(be){I.push(be)},unregisterCustomCapabilitiesFilter:function(be){$(j,be)},unregisterLicenseResponseFilter:function(be){$(b,be)},unregisterLicenseRequestFilter:function(be){$(I,be)},addAbrCustomRule:function(be,$e,Ae){if(typeof be!="string"||be!==O.Z.ABANDON_FRAGMENT_RULES&&be!==O.Z.QUALITY_SWITCH_RULES||typeof $e!="string")throw m.Z.BAD_ARGUMENT_ERROR;var Ze=ce($e);Ze===-1?W.push({type:be,rulename:$e,rule:Ae}):(W[Ze].type=be,W[Ze].rule=Ae)},removeAllAbrCustomRule:function(){W=[]},removeAbrCustomRule:function(be){if(be){var $e=ce(be);$e!==-1&&W.splice($e,1)}else W=[]},getAbrCustomRules:function(){return W},addUTCTimingSource:oe,removeUTCTimingSource:ye,getUTCTimingSources:function(){return x},clearDefaultUTCTimingSources:function(){x=[]},restoreDefaultUTCTimingSources:function(){var be=se.get().streaming.utcSynchronization.defaultTimingSource;oe(be.scheme,be.value)},setXHRWithCredentialsForType:function be($e,Ae){$e?_[$e]=!!Ae:Object.keys(_).forEach(function(Ze){be(Ze,Ae)})},getXHRWithCredentialsForType:function(be){var $e=_[be];return $e===void 0?_.default:$e},setConfig:function(){},reset:function(){N()}},_={default:!1},N(),U}T.__dashjs_factory_name="CustomParametersModel",g.Z=R.Z.getSingletonFactory(T)},9032:function(C,g,S){var F=S(5448),R=S(7473);function v(O){var m=(O=O||{}).requestModifier;function T(U){var x=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=x),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var b in U.headers){var j=U.headers[b];j&&I.setRequestHeader(b,j)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,R.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var x=U.response;x.onloadend=x.onerror=x.onprogress=void 0,x.abort()}}}v.__dashjs_factory_name="XHRLoader";var y=F.Z.getClassFactory(v);g.Z=y},1737:function(C,g,S){function F(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}S.d(g,{default:function(){return bu}});var R={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},v=function(){function tn(){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(St){for(var zt=null,Nt=0;Nt<St.length;++Nt){var Kt=St[Nt];Kt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Kt.value.toLowerCase()!=="cenc"&&Kt.value.toLowerCase()!=="cbcs"||(zt=Kt)}return zt}},{key:"getPSSHData",value:function(St){var zt=8,Nt=new DataView(St),Kt=Nt.getUint8(zt);return zt+=20,Kt>0&&(zt+=4+16*Nt.getUint32(zt)),zt+=4,St.slice(zt)}},{key:"getPSSHForKeySystem",value:function(St,zt){var Nt=tn.parsePSSHList(zt);return St&&Nt.hasOwnProperty(St.uuid.toLowerCase())?Nt[St.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(St,zt){return"pssh"in St?(St.pssh.__text=St.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),zt.decodeArray(St.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(St){if(St==null)return[];for(var zt=new DataView(St.buffer||St),Nt={},Kt=0;;){var gn,In,Zn=void 0,bn=Kt;if(Kt>=zt.buffer.byteLength)break;if(gn=Kt+zt.getUint32(Kt),Kt+=4,zt.getUint32(Kt)===1886614376)if(Kt+=4,(In=zt.getUint8(Kt))===0||In===1){Kt++,Kt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=zt.getUint8(Kt+Rn).toString(16)).length===1?"0"+on:on;for(Kt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Kt+Rn).toString(16)).length===1?"0"+on:on;for(Kt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Kt+Rn).toString(16)).length===1?"0"+on:on;for(Kt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Kt+Rn).toString(16)).length===1?"0"+on:on;for(Kt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=zt.getUint8(Kt+Rn).toString(16)).length===1?"0"+on:on;Kt+=6,Kt+=4,Nt[Zn=Zn.toLowerCase()]=zt.buffer.slice(bn,gn),Kt=gn}else Kt=gn;else Kt=gn}return Nt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(St,zt){try{if(!St||St.length===0)return null;for(var Nt=0,Kt=null;Nt<St.length&&!Kt;){var gn=St[Nt];if(gn&&gn.contentProtection&&gn.contentProtection.length>0){var In=gn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===zt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!Kt;){for(var bn=In[Zn],Rn=0;Rn<R.attributes.length&&!Kt;){for(var on=0,Bn=R.attributes[Rn];on<R.prefixes.length&&!Kt;){var kn=R.prefixes[on];bn[Bn]&&bn[Bn].__prefix&&bn[Bn].__prefix===kn&&bn[Bn].__text&&(Kt=bn[Bn].__text),on+=1}Rn+=1}Zn+=1}}Nt+=1}return Kt}catch(er){return null}}}],an&&F(sn,an),tn}(),y=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},O=function tn(sn,an,St,zt,Nt){(function(Kt,gn){if(!(Kt instanceof gn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=St,this.persistentState=zt,this.sessionTypes=Nt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,St){return an.__proto__=St,an},T(tn,sn)}function U(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function x(tn){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},x(tn)}var _=new(function(tn){(function(Nt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),Kt&&T(Nt,Kt)})(zt,tn);var sn,an,St=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Nt){return!1}}(),function(){var Nt,Kt=x(sn);if(an){var gn=x(this).constructor;Nt=Reflect.construct(Kt,arguments,gn)}else Nt=Kt.apply(this,arguments);return U(this,Nt)});function zt(){var Nt;return function(Kt,gn){if(!(Kt instanceof gn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Nt=St.call(this)).MEDIA_KEYERR_CODE=100,Nt.MEDIA_KEYERR_UNKNOWN_CODE=101,Nt.MEDIA_KEYERR_CLIENT_CODE=102,Nt.MEDIA_KEYERR_SERVICE_CODE=103,Nt.MEDIA_KEYERR_OUTPUT_CODE=104,Nt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Nt.MEDIA_KEYERR_DOMAIN_CODE=106,Nt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Nt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Nt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Nt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Nt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Nt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Nt.KEY_SESSION_CREATED_ERROR_CODE=113,Nt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Nt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Nt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Nt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Nt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Nt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Nt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Nt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Nt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Nt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Nt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Nt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Nt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Nt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Nt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Nt}return zt}(S(2230).Z)),I=S(5459),b=function tn(sn,an,St,zt,Nt,Kt,gn,In){(function(Zn,bn){if(!(Zn instanceof bn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=St,this.headers=zt,this.withCredentials=Nt,this.messageType=Kt,this.sessionId=gn,this.data=In},j=function tn(sn,an,St){(function(zt,Nt){if(!(zt instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=St},Y=S(7855),W=S(703),X=S(3393),se=S(5448);function N(tn){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},N(tn)}function $(tn){var sn,an,St,zt,Nt,Kt,gn,In,Zn,bn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Kn=tn.constants,rn=[],cn=tn.cmcdModel,Cn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function Cr(_n,$n){In||Zn?In&&Lr():function(hr,ti){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Di,ui){return(Nt&&Nt[Di.ks.systemString]&&Nt[Di.ks.systemString].priority>=0?Nt[Di.ks.systemString].priority:hr.length)-(Nt&&Nt[ui.ks.systemString]&&Nt[ui.ks.systemString].priority>=0?Nt[ui.ks.systemString].priority:hr.length)});for(var $r=0;$r<hr.length;$r++){var ea=So(hr[$r]);Bi.push({ks:hr[$r].ks,configs:[ea],protData:hr[$r].protData})}Bn.requestKeySystemAccess(Bi).then(function(Di){var ui=(Mr=Di.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+ui+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Di){if(In=Di,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var ui=qr(In);ui&&ui.serverCertificate&&ui.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(ui.serverCertificate).buffer),Lr()}}).catch(function(Di){In=null,Zn=!1,ti||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Di.error)})})}}(_n,$n)}function Lr(){for(var _n,$n=0;$n<St.length;$n++)for(_n=0;_n<St[$n].length;_n++)if(In===St[$n][_n].ks){Yi(St[$n][_n]);break}St=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var $n={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify($n))}_n.sessionId?no(_n):_n.initData!==null&&Br(_n)}function no(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var $n=v.getPSSHForKeySystem(In,_n?_n.initData:null);if($n){if(function(hr){if(!hr)return!1;try{for(var ti=Bn.getSessions(),Mr=0;Mr<ti.length;Mr++)if(ti[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||hi($n))return;try{_n.initData=$n,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var $n=_n.systemString;if(Nt)return $n in Nt?Nt[$n]:null}return null}function hi(_n){if(!_n)return!1;try{for(var $n=Bn.getAllInitData(),hr=0;hr<$n.length;hr++)if(on.initDataEquals(_n,$n[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ti){return!1}}function yi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Rs,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Rs,sn))}function So(_n){var $n=_n.protData,hr=[],ti=[],Mr=$n&&$n.audioRobustness&&$n.audioRobustness.length>0?$n.audioRobustness:gn,Bi=$n&&$n.videoRobustness&&$n.videoRobustness.length>0?$n.videoRobustness:gn,$r=_n.sessionType,ea=$n&&$n.distinctiveIdentifier?$n.distinctiveIdentifier:"optional",Di=$n&&$n.persistentState?$n.persistentState:$r==="temporary"?"optional":"required";return zt.forEach(function(ui){ui.type===Kn.AUDIO?hr.push(new y(ui.codec,Mr)):ui.type===Kn.VIDEO&&ti.push(new y(ui.codec,Bi))}),new O(hr,ti,ea,Di,[$r])}function ro(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function Jo(_n){an.debug("DRM: onKeyMessage");var $n=_n.data;kn.trigger(er.KEY_MESSAGE,{data:$n});var hr=$n.messageType?$n.messageType:"license-request",ti=$n.message,Mr=$n.sessionToken,Bi=qr(In),$r=on.getLicenseServerModelInstance(In,Bi,hr),ea={sessionToken:Mr,messageType:hr};if(ti&&ti.byteLength!==0){if(!$r)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void Ci(ea);if(on.isClearKey(In)){var Di=on.processClearKeyLicenseRequest(In,Bi,ti);if(Di&&Di.keyPairs&&Di.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),Ci(ea),void Bn.updateKeySession(Mr,Di)}(function(ui,wo,Wi){var Go=ui.sessionToken,ta=ui.messageType?ui.messageType:"license-request",pt={sessionToken:Go,messageType:ta},na=In?In.systemString:null,Ns=function(Nr,ps,gs,Yr,lc){var Ta=null,vl=Yr.message;if(Nr&&Nr.serverURL){var oa=Nr.serverURL;typeof oa=="string"&&oa!==""?Ta=oa:N(oa)==="object"&&oa.hasOwnProperty(ps)&&(Ta=oa[ps])}else if(Nr&&Nr.laURL&&Nr.laURL!=="")Ta=Nr.laURL;else if(!(Ta=v.getLicenseServerUrlFromMediaInfo(zt,In.schemeIdURI))&&!on.isClearKey(In)){var ms=v.getPSSHData(gs.initData);(Ta=In.getLicenseServerURLFromInitData(ms))||(Ta=Yr.laURL)}return Ta=lc.getServerURLFromMessage(Ta,vl,ps)}(Wi,ta,Go,ui,wo);if(Ns){var pr={},Ao=!1;Wi&&sc(pr,Wi.httpRequestHeaders);var iu=ui.message;sc(pr,In.getRequestHeadersFromMessage(iu)),Object.keys(pr).forEach(function(Nr){Nr.toLowerCase()==="authorization"&&(Ao=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(Ao=Wi.withCredentials);var yl=function(Nr){if(Bn)if(Nr.status>=200&&Nr.status<=299){var ps=W.Z.parseHttpHeaders(Nr.getAllResponseHeaders?Nr.getAllResponseHeaders():null),gs=new j(Nr.responseURL,ps,Nr.response);si(Jn.getLicenseResponseFilters(),gs).then(function(){var Yr=wo.getLicenseMessage(gs.data,na,ta);Yr!==null?(Ci(pt),Bn.updateKeySession(Go,Yr)):gf(Nr,pt,na,ta,wo)})}else gf(Nr,pt,na,ta,wo)},ds=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+na+' update, XHR aborted. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},ja=function(Nr){Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+na+' update, XHR error. status is "'+Nr.statusText+'" ('+Nr.status+"), readyState is "+Nr.readyState))},Ru=In.getLicenseRequestFromMessage(iu),Nu=wo.getHTTPMethod(ta),ra=wo.getResponseType(na,ta),ia=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,ou=Go.getSessionId()||null,hs=new b(Ns,Nu,ra,pr,Ao,ta,ou,Ru),uc=isNaN(Cn.get().streaming.retryAttempts[Y.w.LICENSE])?3:Cn.get().streaming.retryAttempts[Y.w.LICENSE];si(Jn.getLicenseRequestFilters(),hs).then(function(){ml(hs,uc,ia,yl,ds,ja)})}else Ci(pt,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})($n,$r,Bi)}else Ci(ea,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Ci(_n,$n){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:$n})}function ml(_n,$n,hr,ti,Mr,Bi){var $r=new XMLHttpRequest;if(Cn.get().streaming.cmcd&&Cn.get().streaming.cmcd.enabled&&Cn.get().streaming.cmcd.mode===X.Z.CMCD_MODE_QUERY){var ea=cn.getQueryParameter({url:_n.url,type:Y.w.LICENSE});ea&&(_n.url=W.Z.addAditionalQueryParameterToUrl(_n.url,[ea]))}for(var Di in $r.open(_n.method,_n.url,!0),$r.responseType=_n.responseType,$r.withCredentials=_n.withCredentials,hr>0&&($r.timeout=hr),_n.headers)$r.setRequestHeader(Di,_n.headers[Di]);if(Cn.get().streaming.cmcd&&Cn.get().streaming.cmcd.enabled&&Cn.get().streaming.cmcd.mode===X.Z.CMCD_MODE_HEADER){var ui=cn.getHeaderParameters({url:_n.url,type:Y.w.LICENSE});if(ui)for(var wo in ui){var Wi=ui[wo];Wi&&$r.setRequestHeader(wo,Wi)}}var Go=function(){$n--;var ta=isNaN(Cn.get().streaming.retryIntervals[Y.w.LICENSE])?1e3:Cn.get().streaming.retryIntervals[Y.w.LICENSE];Rn=setTimeout(function(){ml(_n,$n,hr,ti,Mr,Bi)},ta)};$r.onload=function(){bn=null,this.status>=200&&this.status<=299||$n<=0?ti(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+$n),Go())},$r.ontimeout=$r.onerror=function(){bn=null,$n<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+$n),Go())},$r.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),bn=$r,$r.send(_n.data)}function ru(){bn&&(bn.onloadend=bn.onerror=bn.onprogress=void 0,bn.abort(),bn=null),Rn&&(clearTimeout(Rn),Rn=null)}function sc(_n,$n){if($n)for(var hr in $n)_n[hr]=$n[hr]}function gf(_n,$n,hr,ti,Mr){var Bi="NONE",$r=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ti),$r={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),Ci($n,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,$r))}function si(_n,$n){return _n?_n.reduce(function(hr,ti){return hr.then(function(){return ti($n)})},Promise.resolve()):Promise.resolve()}function Rs(_n,$n){if(!Cn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(zt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),($n=$n===void 0?1:$n+1)<5))return void rn.push(setTimeout(function(){Rs(_n,$n)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ti=v.getPSSHForKeySystem(In,hr);if(ti&&hi(ti))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,Nt,Kt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){St.push(Bi),Cr(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),zt.push(_n)},clearMediaInfoArray:function(){zt=[]},handleKeySystemFromManifest:function(){if(zt&&zt.length!==0){var _n=[];zt.forEach(function($n){var hr=on.getSupportedKeySystemsFromContentProtection($n.contentProtection,Nt,Kt);hr.length>0&&(_n.length===0&&(_n=hr),St.push(hr))}),_n&&_n.length>0&&Cr(_n,!0)}},createKeySession:Br,loadKeySession:no,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:yi,setSessionType:function(_n){Kt=_n},setRobustnessLevel:function(_n){gn=_n},setProtectionData:function(_n){Nt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,Nt,Kt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){ru(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,Jo,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),ar(),ru(),yi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],zt=[],St=[]}},an=Er.getLogger(sn),St=[],zt=[],Kt="temporary",gn="",bn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,Jo,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),sn}$.__dashjs_factory_name="ProtectionController";var ce=se.Z.getClassFactory($),oe=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function ye(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}var be=function(){function tn(St,zt){if(function(Nt,Kt){if(!(Nt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,tn),zt&&zt!=="persistent"&&zt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=St,this.type=zt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var St,zt=this.keyPairs.length,Nt={keys:[]};for(St=0;St<zt;St++){var Kt={kty:"oct",alg:"A128KW",kid:this.keyPairs[St].keyID,k:this.keyPairs[St].key};Nt.keys.push(Kt)}this.type&&(Nt.type=this.type);var gn=JSON.stringify(Nt),In=gn.length,Zn=new ArrayBuffer(In),bn=new Uint8Array(Zn);for(St=0;St<In;St++)bn[St]=gn.charCodeAt(St);return Zn}}])&&ye(sn.prototype,an),tn}();function $e(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}var Ae=new(function(){function tn(){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&$e(sn.prototype,an),tn}()),Ze="e2719d58-a985-b3c9-781a-b030af78d30e",it=Ae.CLEARKEY_KEYSTEM_STRING,lt="urn:uuid:"+Ze;function Xe(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Ze,schemeIdURI:lt,systemString:it,getInitData:function(an,St){try{var zt=v.parseInitDataFromContentProtection(an,sn);if(!zt&&St){var Nt={kids:[function(Kt){try{var gn=Kt.replace(/-/g,"");return(gn=btoa(gn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(St["cenc:default_KID"])]};zt=new TextEncoder().encode(JSON.stringify(Nt))}return zt}catch(Kt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,St){var zt=null;if(an){for(var Nt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(St))),Kt=[],gn=0;gn<Nt.kids.length;gn++){var In=Nt.kids[gn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");Kt.push(new oe(In,Zn))}zt=new be(Kt)}return zt}}}Xe.__dashjs_factory_name="KeySystemClearKey";var st=dashjs.FactoryMaker.getSingletonFactory(Xe),wt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Oe=Ae.CLEARKEY_KEYSTEM_STRING,Qe="urn:uuid:"+wt;function ct(tn){var sn,an=tn.BASE64,St=tn.debug.getLogger(sn);return{uuid:wt,schemeIdURI:Qe,systemString:Oe,getInitData:function(zt){return v.parseInitDataFromContentProtection(zt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(zt){return new Uint8Array(zt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(zt,Nt){var Kt=null;if(zt){for(var gn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Nt))),In=[],Zn=0;Zn<gn.kids.length;Zn++){var bn=gn.kids[Zn],Rn=zt.clearkeys&&zt.clearkeys.hasOwnProperty(bn)?zt.clearkeys[bn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+bn+") is not known!");In.push(new oe(bn,Rn))}Kt=new be(In),St.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Kt}}}ct.__dashjs_factory_name="KeySystemW3CClearKey";var Qt=dashjs.FactoryMaker.getSingletonFactory(ct),Vt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Tt=Ae.WIDEVINE_KEYSTEM_STRING,Pt="urn:uuid:"+Vt;function Ce(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Vt,schemeIdURI:Pt,systemString:Tt,getInitData:function(an){return v.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ce.__dashjs_factory_name="KeySystemWidevine";var te=dashjs.FactoryMaker.getSingletonFactory(Ce),Fe="9a04f079-9840-4286-ab92-e65be0885f95",P=Ae.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+Fe;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,St=tn.settings;function zt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Fe,schemeIdURI:M,systemString:P,getInitData:function(Nt){var Kt,gn,In,Zn,bn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(zt(),!Nt)return null;if("pssh"in Nt)return v.parseInitDataFromContentProtection(Nt,an);if("pro"in Nt)kn=an.decodeArray(Nt.pro.__text);else{if(!("prheader"in Nt))return null;kn=an.decodeArray(Nt.prheader.__text)}return Kt=kn.length,gn=4+Rn.length+on.length+4+Kt,In=new ArrayBuffer(gn),Zn=new Uint8Array(In),(bn=new DataView(In)).setUint32(Bn,gn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,bn.setUint32(Bn,Kt),Bn+=4,Zn.set(kn,Bn),Bn+=Kt,Zn.buffer},getRequestHeadersFromMessage:function(Nt){var Kt,gn,In={},Zn=new DOMParser;if(St&&St.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Nt&&Nt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var bn=sn==="utf-16"?new Uint16Array(Nt):new Uint8Array(Nt);Kt=String.fromCharCode.apply(null,bn);for(var Rn=(gn=Zn.parseFromString(Kt,"application/xml")).getElementsByTagName("name"),on=gn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(Nt){var Kt=null,gn=new DOMParser;if(St&&St.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Nt&&Nt.byteLength%2==1)return Nt;var In=sn==="utf-16"?new Uint16Array(Nt):new Uint8Array(Nt);zt();var Zn=String.fromCharCode.apply(null,In),bn=gn.parseFromString(Zn,"application/xml");if(!bn.getElementsByTagName("PlayReadyKeyMessage")[0])return Nt;var Rn=bn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(Kt=an.decode(Rn)),Kt},getLicenseServerURLFromInitData:function(Nt){if(Nt)for(var Kt=new DataView(Nt),gn=Kt.getUint16(4,!0),In=6,Zn=new DOMParser,bn=0;bn<gn;bn++){var Rn=Kt.getUint16(In,!0);In+=2;var on=Kt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=Nt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(Nt){var Kt,gn,In,Zn;if(zt(),!Nt)return null;for(Kt=[],Zn=0;Zn<Nt.length;++Zn)Kt.push(Nt.charCodeAt(Zn)),Kt.push(0);for(Kt=String.fromCharCode.apply(null,Kt),Kt=an.encode(Kt),gn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Kt),In=[],Zn=0;Zn<gn.length;++Zn)In.push(gn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(Nt){if(Nt!=="utf-8"&&Nt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=Nt}}}q.__dashjs_factory_name="KeySystemPlayReady";var V=dashjs.FactoryMaker.getSingletonFactory(q);function he(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Ae.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(St){return sn.decodeArray(St.license)},getErrorResponse:function(St){return St}},an[Ae.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(St){return St},getErrorResponse:function(St){return String.fromCharCode.apply(null,new Uint8Array(St))}},{getServerURLFromMessage:function(St){return St},getHTTPMethod:function(){return"POST"},getResponseType:function(St){return an[St].responseType},getLicenseMessage:function(St,zt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[zt].getLicenseMessage(St)},getErrorResponse:function(St,zt){return an[zt].getErrorResponse(St)}}}he.__dashjs_factory_name="DRMToday";var fe=dashjs.FactoryMaker.getSingletonFactory(he);function He(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(zt){var Nt=String.fromCharCode.apply(null,new Uint8Array(zt));return decodeURIComponent(escape(Nt))}function an(zt){if(window.DOMParser){var Nt=sn(zt),Kt=new window.DOMParser().parseFromString(Nt,"text/xml"),gn=Kt?Kt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=gn?gn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return zt}function St(zt){var Nt="",Kt="",gn="",In=-1,Zn=-1;if(window.DOMParser){var bn=sn(zt),Rn=new window.DOMParser().parseFromString(bn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return bn;Nt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(Kt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(gn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?gn.lastIndexOf("[")+1:-1,Zn=gn?gn.indexOf("]"):-1,gn=gn?gn.substring(In,Zn):"")}var Kn="code: ".concat(Kt,", name: ").concat(Nt);return gn&&(Kn+=", message: ".concat(gn)),Kn}return{getServerURLFromMessage:function(zt){return zt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(zt){return an.call(this,zt)},getErrorResponse:function(zt){return St.call(this,zt)}}}He.__dashjs_factory_name="PlayReady";var _t=se.Z.getSingletonFactory(He);function ot(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}ot.__dashjs_factory_name="Widevine";var rt=dashjs.FactoryMaker.getSingletonFactory(ot);function et(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var St=tn.keys[an],zt=St.kid.replace(/=/g,""),Nt=St.k.replace(/=/g,"");sn.push(new oe(zt,Nt))}return new be(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}et.__dashjs_factory_name="ClearKey";var ft=dashjs.FactoryMaker.getSingletonFactory(et);function yt(){var tn,sn,an,St,zt,Nt,Kt,gn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function bn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;St=[],on=V(In).getInstance({BASE64:zt,settings:Nt}),St.push(on),on=te(In).getInstance({BASE64:zt}),St.push(on),on=st(In).getInstance({BASE64:zt}),St.push(on),Kt=on,on=Qt(In).getInstance({BASE64:zt,debug:sn}),St.push(on),gn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<St.length;er++){var Er=St[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===Kt||on===gn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return St},setKeySystems:function(on){St=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<St.length;Bn++)if(St[Bn].systemString===on)return St[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Kn,rn=[];if(on){var cn=v.findCencContentProtection(on);for(Ur=0;Ur<St.length;++Ur){var Cn=Zn((Er=St[Ur]).systemString,Bn);for(Kn=0;Kn<on.length;++Kn)if((er=on[Kn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,cn);rn.push({ks:St[Ur],keyId:er.keyId,initData:Jn,protData:Cn,cdmData:Er.getCDMData(Cn?Cn.cdmData:null),sessionId:bn(Cn,er),sessionType:Rn(Cn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=v.parsePSSHList(on),Kn=0;Kn<St.length;++Kn){var rn=Zn((er=St[Kn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:bn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=fe(In).getInstance({BASE64:zt}):on.systemString===Ae.WIDEVINE_KEYSTEM_STRING?er=rt(In).getInstance():on.systemString===Ae.PLAYREADY_KEYSTEM_STRING?er=_t(In).getInstance():on.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(er=ft(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(zt=on.BASE64),on.settings&&(Nt=on.settings))}},tn}yt.__dashjs_factory_name="ProtectionKeyController";var Et=dashjs.FactoryMaker.getSingletonFactory(yt);function Ct(tn){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Ct(tn)}function hn(tn,sn){return hn=Object.setPrototypeOf||function(an,St){return an.__proto__=St,an},hn(tn,sn)}function $t(tn,sn){return!sn||Ct(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Ot=new(function(tn){(function(Nt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),Kt&&hn(Nt,Kt)})(zt,tn);var sn,an,St=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Nt){return!1}}(),function(){var Nt,Kt=nn(sn);if(an){var gn=nn(this).constructor;Nt=Reflect.construct(Kt,arguments,gn)}else Nt=Kt.apply(this,arguments);return $t(this,Nt)});function zt(){var Nt;return function(Kt,gn){if(!(Kt instanceof gn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Nt=St.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Nt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Nt.KEY_ADDED="public_keyAdded",Nt.KEY_ERROR="public_keyError",Nt.KEY_MESSAGE="public_keyMessage",Nt.KEY_SESSION_CLOSED="public_keySessionClosed",Nt.KEY_SESSION_CREATED="public_keySessionCreated",Nt.KEY_SESSION_REMOVED="public_keySessionRemoved",Nt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Nt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Nt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Nt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Nt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Nt.NEED_KEY="needkey",Nt.PROTECTION_CREATED="public_protectioncreated",Nt.PROTECTION_DESTROYED="public_protectiondestroyed",Nt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Nt.TEARDOWN_COMPLETE="protectionTeardownComplete",Nt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Nt.KEY_SESSION_UPDATED="public_keySessionUpdated",Nt}return zt}(S(8342).Z)),Un=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,St,zt){(function(Nt,Kt){if(!(Nt instanceof Kt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=St,this.messageType=zt||"license-request"},Pr=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ei(tn){tn=tn||{};var sn,an,St,zt,Nt,Kt,gn,In,Zn=this.context,bn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,cn,Cn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return bn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var Cr=rn[cn].protData&&rn[cn].protData.systemStringPriority?rn[cn].protData.systemStringPriority:null,Lr=rn[cn].configs,Yi=rn[cn].ks,no=Yi.systemString;(function(Br,qr){return new Promise(function(hi,yi){kn(Br,qr,0,hi,yi)})})(Cr||(dr[no]?dr[no]:[no]),Lr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,hi=new Pr(Yi,qr);hi.mksa=Br,bn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:hi}),Cn({data:hi})}).catch(function(Br){if(cn+1<rn.length)Bn(rn,cn+1,Cn,Jn);else{var qr="Key system access denied! ";bn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,cn,Cn,Jn,ar){var Cr=rn[Cn];an.debug("Requesting key system access for system string ".concat(Cr)),navigator.requestMediaKeySystemAccess(Cr,cn).then(function(Lr){Lr.selectedSystemString=Cr,Jn(Lr)}).catch(function(Lr){Cn+1<rn.length?kn(rn,cn,Cn+1,Jn,ar):ar(Lr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var cn=rn.session;return cn.removeEventListener("keystatuseschange",rn),cn.removeEventListener("message",rn),cn.close()}function Er(rn){for(var cn=0;cn<Kt.length;cn++)if(Kt[cn]===rn){Kt.splice(cn,1);break}}function Ur(rn){var cn,Cn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?cn=rn[0]:Cn=rn[0]),rn[1]&&(typeof rn[1]=="string"?cn=rn[1]:Cn=rn[1])),{status:cn,keyId:Cn}}function Kn(rn,cn){var Cn={session:rn,keyId:cn.keyId,initData:cn.initData,sessionId:cn.sessionId,sessionType:cn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":bn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var Cr=Ur(arguments);Cr.status==="expired"?bn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):bn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,Cr)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;bn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",Cn),rn.addEventListener("message",Cn),rn.closed.then(function(){Er(Cn),an.debug("DRM: Session closed.  SessionID = "+Cn.getSessionId()),bn.trigger(Rn.KEY_SESSION_CLOSED,{data:Cn.getSessionId()})}),Kt.push(Cn),Cn}return sn={getAllInitData:function(){for(var rn=[],cn=0;cn<Kt.length;cn++)Kt[cn].initData&&rn.push(Kt[cn].initData);return rn},getSessions:function(){return Kt},requestKeySystemAccess:function(rn){return new Promise(function(cn,Cn){Bn(rn,0,cn,Cn)})},selectKeySystem:function(rn){return new Promise(function(cn,Cn){rn.mksa.createMediaKeys().then(function(Jn){return St=rn.keySystem,Nt=Jn,zt?zt.setMediaKeys(Nt):Promise.resolve()}).then(function(){cn(St)}).catch(function(){Cn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){zt!==rn&&(zt&&(zt.removeEventListener("encrypted",gn),zt.setMediaKeys&&zt.setMediaKeys(null)),(zt=rn)&&(zt.addEventListener("encrypted",gn),zt.setMediaKeys&&Nt&&zt.setMediaKeys(Nt)))},setServerCertificate:function(rn){if(!St||!Nt)throw new Error("Can not set server certificate until you have selected a key system");Nt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),bn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(cn){bn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+cn.name)})})},createKeySession:function(rn){if(!St||!Nt)throw new Error("Can not create sessions until you have selected a key system");var cn=Nt.createSession(rn.sessionType),Cn=Kn(cn,rn),Jn=St.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Ae.INITIALIZATION_DATA_TYPE_KEYIDS:Ae.INITIALIZATION_DATA_TYPE_CENC;cn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+Cn.getSessionId()),bn.trigger(Rn.KEY_SESSION_CREATED,{data:Cn})}).catch(function(ar){Er(Cn),bn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,cn){var Cn=rn.session;In.isClearKey(St)&&(cn=cn.toJWK()),Cn.update(cn).then(function(){bn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){bn.trigger(Rn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!St||!Nt)throw new Error("Can not load sessions until you have selected a key system");for(var cn=rn.sessionId,Cn=0;Cn<Kt.length;Cn++)if(cn===Kt[Cn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=Nt.createSession(rn.sessionType),ar=Kn(Jn,rn);Jn.load(cn).then(function(Cr){Cr?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),bn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),bn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+cn+")")}))}).catch(function(Cr){Er(ar),bn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+cn+")! "+Cr.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),bn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(cn){bn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+cn.name})})},closeKeySession:function(rn){er(rn).catch(function(cn){Er(rn),bn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+cn.name})})},stop:function(){for(var rn,cn=0;cn<Kt.length;cn++)(rn=Kt[cn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,cn=Kt.length;cn!==0?function(){for(var Cn=function(ar){Er(ar),Kt.length===0&&(zt?(zt.removeEventListener("encrypted",gn),zt.setMediaKeys(null).then(function(){bn.trigger(Rn.TEARDOWN_COMPLETE)})):bn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<cn;Jn++)(function(ar){er(rn),Cn(ar)})(rn=Kt[Jn])}():bn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),St=null,zt=null,Nt=null,Kt=[],In=Et(Zn).getInstance(),gn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var cn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;bn.trigger(Rn.NEED_KEY,{key:new Un(cn,rn.initDataType)})}}},sn}dr[Ae.PLAYREADY_KEYSTEM_STRING]=[Ae.PLAYREADY_KEYSTEM_STRING,Ae.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Ae.WIDEVINE_KEYSTEM_STRING]=[Ae.WIDEVINE_KEYSTEM_STRING],dr[Ae.CLEARKEY_KEYSTEM_STRING]=[Ae.CLEARKEY_KEYSTEM_STRING],ei.__dashjs_factory_name="ProtectionModel_21Jan2015";var Ji=dashjs.FactoryMaker.getClassFactory(ei);function Or(tn){tn=tn||{};var sn,an,St,zt,Nt,Kt,gn,In,Zn,bn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Kn=0;Kn<gn.length;Kn++)Er(gn[Kn]);St&&St.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Kn){var rn=Kn.session;rn.removeEventListener(kn.error,Kn),rn.removeEventListener(kn.message,Kn),rn.removeEventListener(kn.ready,Kn),rn.removeEventListener(kn.close,Kn);for(var cn=0;cn<gn.length;cn++)if(gn[cn]===Kn){gn.splice(cn,1);break}rn[kn.release]()}function Ur(){var Kn=null,rn=function(){St.removeEventListener("loadedmetadata",Kn),St[kn.setMediaKeys](Nt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};St.readyState>=1?rn():(Kn=rn.bind(this),St.addEventListener("loadedmetadata",Kn))}return sn={getAllInitData:function(){for(var Kn=[],rn=0;rn<gn.length;rn++)Kn.push(gn[rn].initData);return Kn},getSessions:function(){return gn},requestKeySystemAccess:function(Kn){return new Promise(function(rn,cn){for(var Cn=!1,Jn=0;Jn<Kn.length;Jn++)for(var ar=Kn[Jn].ks.systemString,Cr=Kn[Jn].configs,Lr=null,Yi=null,no=0;no<Cr.length;no++){var Br=Cr[no].audioCapabilities,qr=Cr[no].videoCapabilities;if(Br&&Br.length!==0){Lr=[];for(var hi=0;hi<Br.length;hi++)window[kn.MediaKeys].isTypeSupported(ar,Br[hi].contentType)&&Lr.push(Br[hi])}if(qr&&qr.length!==0){Yi=[];for(var yi=0;yi<qr.length;yi++)window[kn.MediaKeys].isTypeSupported(ar,qr[yi].contentType)&&Yi.push(qr[yi])}if(!(!Lr&&!Yi||Lr&&Lr.length===0||Yi&&Yi.length===0)){Cn=!0;var So=new O(Lr,Yi),ro=Zn.getKeySystemBySystemString(ar),Jo=new Pr(ro,So);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:Jo}),rn({data:Jo});break}}if(!Cn){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),cn({error:Ci})}})},selectKeySystem:function(Kn){return new Promise(function(rn,cn){try{Nt=Kn.mediaKeys=new window[kn.MediaKeys](Kn.keySystem.systemString),zt=Kn.keySystem,Kt=Kn,St&&Ur(),rn(zt)}catch(Cn){cn({error:"Error selecting keys system ("+zt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Kn){St!==Kn&&(St&&St.removeEventListener(kn.needkey,In),(St=Kn)&&(St.addEventListener(kn.needkey,In),Nt&&Ur()))},createKeySession:function(Kn){if(!zt||!Nt||!Kt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(Kt.ksConfiguration.videoCapabilities&&Kt.ksConfiguration.videoCapabilities.length>0&&(rn=Kt.ksConfiguration.videoCapabilities[0]),rn===null&&Kt.ksConfiguration.audioCapabilities&&Kt.ksConfiguration.audioCapabilities.length>0&&(rn=Kt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var cn=rn.contentType,Cn=Nt.createSession(cn,new Uint8Array(Kn.initData),Kn.cdmData?new Uint8Array(Kn.cdmData):null),Jn=function(ar,Cr){return{session:ar,keyId:Cr.keyId,initData:Cr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Lr){switch(Lr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(Lr.message)?Lr.message.buffer:Lr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,Lr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Cn,Kn);Cn.addEventListener(kn.error,Jn),Cn.addEventListener(kn.message,Jn),Cn.addEventListener(kn.ready,Jn),Cn.addEventListener(kn.close,Jn),gn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Kn,rn){var cn=Kn.session;Zn.isClearKey(zt)?cn.update(new Uint8Array(rn.toJWK())):cn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),St=null,zt=null,Nt=null,Kt=null,gn=[],Zn=Et(bn).getInstance(),In={handleEvent:function(Kn){if(Kn.type===kn.needkey&&Kn.initData){var rn=ArrayBuffer.isView(Kn.initData)?Kn.initData.buffer:Kn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Or.__dashjs_factory_name="ProtectionModel_3Feb2014";var eo=dashjs.FactoryMaker.getClassFactory(Or);function _i(tn){tn=tn||{};var sn,an,St,zt,Nt,Kt,gn,In,Zn,bn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){St&&rn();for(var cn=0;cn<gn.length;cn++)Ur(gn[cn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(cn){try{St[kn.cancelKeyRequest](zt.systemString,cn.sessionId)}catch(Cn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.sessionId+") "+Cn.message})}}function Kn(cn,Cn){if(Cn&&cn){for(var Jn=cn.length,ar=0;ar<Jn;ar++)if(cn[ar].sessionId==Cn)return cn[ar];return null}return null}function rn(){St.removeEventListener(kn.keyerror,Zn),St.removeEventListener(kn.needkey,Zn),St.removeEventListener(kn.keymessage,Zn),St.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var cn=[],Cn=0;Cn<Kt.length;Cn++)cn.push(Kt[Cn].initData);for(var Jn=0;Jn<gn.length;Jn++)cn.push(gn[Jn].initData);return cn},getSessions:function(){return gn.concat(Kt)},requestKeySystemAccess:function(cn){return new Promise(function(Cn,Jn){var ar=St;ar||(ar=document.createElement("video"));for(var Cr=!1,Lr=0;Lr<cn.length;Lr++)for(var Yi=cn[Lr].ks.systemString,no=cn[Lr].configs,Br=null,qr=0;qr<no.length;qr++){var hi=no[qr].videoCapabilities;if(hi&&hi.length!==0){Br=[];for(var yi=0;yi<hi.length;yi++)ar.canPlayType(hi[yi].contentType,Yi)!==""&&Br.push(hi[yi])}if(Br&&(!Br||Br.length!==0)){Cr=!0;var So=new O(null,Br),ro=Nt.getKeySystemBySystemString(Yi),Jo=new Pr(ro,So);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:Jo}),Cn({data:Jo});break}}if(!Cr){var Ci="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ci}),Jn({error:Ci})}})},selectKeySystem:function(cn){return zt=cn.keySystem,Promise.resolve(zt)},setMediaElement:function(cn){if(St!==cn){if(St){rn();for(var Cn=0;Cn<gn.length;Cn++)Ur(gn[Cn]);gn=[]}(St=cn)&&(St.addEventListener(kn.keyerror,Zn),St.addEventListener(kn.needkey,Zn),St.addEventListener(kn.keymessage,Zn),St.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(cn){if(!zt)throw new Error("Can not create sessions until you have selected a key system");if(In||gn.length===0){var Cn={sessionId:null,keyId:cn.keyId,initData:cn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Kt.push(Cn),St[kn.generateKeyRequest](zt.systemString,new Uint8Array(cn.initData)),Cn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(cn,Cn){var Jn=cn.sessionId;if(Nt.isClearKey(zt))for(var ar=0;ar<Cn.keyPairs.length;ar++)St[kn.addKey](zt.systemString,Cn.keyPairs[ar].key,Cn.keyPairs[ar].keyID,Jn);else St[kn.addKey](zt.systemString,new Uint8Array(Cn),new Uint8Array(cn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),St=null,zt=null,Kt=[],gn=[],Nt=Et(bn).getInstance(),Zn={handleEvent:function(cn){var Cn=null;switch(cn.type){case kn.needkey:var Jn=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((Cn=Kn(gn,cn.sessionId))||(Cn=Kn(Kt,cn.sessionId)),Cn){var ar=_.MEDIA_KEYERR_CODE,Cr="";switch(cn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,Cr+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,Cr+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,Cr+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,Cr+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,Cr+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,Cr+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}Cr+="  System Code = "+cn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new I.Z(ar,Cr,Cn)})}else an.error("No session token found for key error");break;case kn.keyadded:(Cn=Kn(gn,cn.sessionId))||(Cn=Kn(Kt,cn.sessionId)),Cn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:Cn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=cn.sessionId!==null&&cn.sessionId!==void 0)?!(Cn=Kn(gn,cn.sessionId))&&Kt.length>0&&(Cn=Kt.shift(),gn.push(Cn),Cn.sessionId=cn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:Cn})):Kt.length>0&&(Cn=Kt.shift(),gn.push(Cn),Kt.length!==0&&er.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Cn){var Lr=ArrayBuffer.isView(cn.message)?cn.message.buffer:cn.message;Cn.keyMessage=Lr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(Cn,Lr,cn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}_i.__dashjs_factory_name="ProtectionModel_01b";var Mi=dashjs.FactoryMaker.getClassFactory(_i),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],to=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ti(){var tn,sn=this.context;function an(St,zt){for(var Nt=0;Nt<zt.length;Nt++){var Kt=zt[Nt];if(typeof St[Kt[Object.keys(Kt)[0]]]=="function")return Kt}return null}return tn={createProtectionSystem:function(St){var zt=null,Nt=Et(sn).getInstance();Nt.setConfig({debug:St.debug,BASE64:St.BASE64,settings:St.settings}),Nt.initialize();var Kt=function(gn){var In=gn.debug,Zn=In.getLogger(tn),bn=gn.eventBus,Rn=gn.errHandler,on=gn.videoModel?gn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,to)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),eo(sn).create({debug:In,eventBus:bn,events:gn.events,api:an(on,to)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Mi(sn).create({debug:In,eventBus:bn,errHandler:Rn,events:gn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Ji(sn).create({debug:In,eventBus:bn,events:gn.events}))}(St);return!zt&&Kt&&(zt=ce(sn).create({protectionModel:Kt,protectionKeyController:Nt,eventBus:St.eventBus,debug:St.debug,events:St.events,BASE64:St.BASE64,constants:St.constants,cmcdModel:St.cmcdModel,customParametersModel:St.customParametersModel,settings:St.settings}),St.capabilities.setEncryptedMediaSupported(!0)),zt}}}Ti.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Ti);Qn.events=Ot,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Ti.__dashjs_factory_name,Qn);var bu=Qn},2068:function(C,g,S){var F=S(5448),R={DEFAULT:.5,STRONG:1,WEAK:0};function v(O,m,T){var U,x;return U=O===void 0?-1:O,x=function(_){var I=R.DEFAULT;return _!==R.DEFAULT&&_!==R.STRONG&&_!==R.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:x}}v.__dashjs_factory_name="SwitchRequest";var y=F.Z.getClassFactory(v);y.NO_CHANGE=-1,y.PRIORITY=R,F.Z.updateClassFactory(v.__dashjs_factory_name,y),g.Z=y},1767:function(C,g,S){var F=S(5628),R=S(6535),v=S(7423),y=S(895),O=S(6070),m=S(3112),T=S(1914),U=S(5435),x=S(5448),_=S(2068),I=S(3393),b="qualitySwitchRules",j="abandonFragmentRules";function Y(X){X=X||{};var se,N,$=this.context,ce=X.mediaPlayerModel,oe=X.customParametersModel,ye=X.dashMetrics,be=X.settings;function $e(Ze){return Ze.filter(function(it){return it.quality>_.Z.NO_CHANGE})}function Ae(Ze){var it,lt,Xe,st,wt,Oe={},Qe=null;if(Ze.length!==0){for(Oe[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},it=0,lt=Ze.length;it<lt;it+=1)(Xe=Ze[it]).quality!==_.Z.NO_CHANGE&&(Oe[Xe.priority].quality===_.Z.NO_CHANGE||Oe[Xe.priority].quality>Xe.quality)&&(Oe[Xe.priority].quality=Xe.quality,Oe[Xe.priority].reason=Xe.reason||null);return Oe[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.WEAK]),Oe[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.DEFAULT]),Oe[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.STRONG]),Qe&&(st=Qe.quality,wt=Qe.reason),(0,_.Z)($).create(st,wt)}}return{initialize:function(){se=[],N=[],be.get().streaming.abr.useDefaultABRRules&&(be.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?se.push((0,T.Z)($).create({dashMetrics:ye,settings:be})):be.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?se.push((0,U.Z)($).create({dashMetrics:ye})):(se.push((0,m.Z)($).create({dashMetrics:ye,mediaPlayerModel:ce,settings:be})),se.push((0,F.Z)($).create({dashMetrics:ye})),be.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&se.push((0,R.Z)($).create({dashMetrics:ye,settings:be})),be.get().streaming.abr.additionalAbrRules.switchHistoryRule&&se.push((0,O.Z)($).create()),be.get().streaming.abr.additionalAbrRules.droppedFramesRule&&se.push((0,y.Z)($).create()),be.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&N.push((0,v.Z)($).create({dashMetrics:ye,mediaPlayerModel:ce,settings:be})))),oe.getAbrCustomRules().forEach(function(Ze){Ze.type===b&&se.push(Ze.rule($).create()),Ze.type===j&&N.push(Ze.rule($).create())})},reset:function(){[se,N].forEach(function(Ze){Ze&&Ze.length&&Ze.forEach(function(it){return it.reset&&it.reset()})}),se=[],N=[]},getMaxQuality:function(Ze){return Ae($e(se.map(function(it){return it.getMaxIndex(Ze)})))||(0,_.Z)($).create()},getMinSwitchRequest:Ae,shouldAbandonFragment:function(Ze,it){var lt=Ae($e(N.map(function(Xe){return Xe.shouldAbandon(Ze,it)})));return lt&&(lt.reason.forceAbandon=!0),lt||(0,_.Z)($).create()},getQualitySwitchRules:function(){return se}}}Y.__dashjs_factory_name="ABRRulesCollection";var W=x.Z.getClassFactory(Y);W.QUALITY_SWITCH_RULES=b,W.ABANDON_FRAGMENT_RULES=j,x.Z.updateSingletonFactory(Y.__dashjs_factory_name,W),g.Z=W},7423:function(C,g,S){var F=S(2068),R=S(5448),v=S(6398);function y(O){O=O||{};var m,T,U,x,_,I=this.context,b=O.mediaPlayerModel,j=O.dashMetrics,Y=O.settings;function W(){U={},x={},_=[]}return m={shouldAbandon:function(X){var se=(0,F.Z)(I).create(F.Z.NO_CHANGE,{name:y.__dashjs_factory_name});if(!(X&&X.hasOwnProperty("getMediaInfo")&&X.hasOwnProperty("getMediaType")&&X.hasOwnProperty("getCurrentRequest")&&X.hasOwnProperty("getRepresentationInfo")&&X.hasOwnProperty("getAbrController")))return se;var N,$,ce=X.getMediaInfo(),oe=X.getMediaType(),ye=X.getStreamInfo(),be=ye?ye.id:null,$e=X.getCurrentRequest();if(!isNaN($e.index)){N=oe,$=$e.index,U[N]=U[N]||{},U[N][$]=U[N][$]||{};var Ae=b.getStableBufferTime();if(j.getCurrentBufferLevel(oe)>Ae)return se;var Ze=U[oe][$e.index];if(Ze===null||$e.firstByteDate===null||x.hasOwnProperty(Ze.id))return se;if(Ze.firstByteTime===void 0&&(_[oe]=[],Ze.firstByteTime=$e.firstByteDate.getTime(),Ze.segmentDuration=$e.duration,Ze.bytesTotal=$e.bytesTotal,Ze.id=$e.index),Ze.bytesLoaded=$e.bytesLoaded,Ze.elapsedTime=new Date().getTime()-Ze.firstByteTime,Ze.bytesLoaded>0&&Ze.elapsedTime>0&&function(ct,Qt){_[ct]=_[ct]||[],_[ct].push(Qt)}(oe,Math.round(8*Ze.bytesLoaded/Ze.elapsedTime)),_[oe].length>=Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ze.elapsedTime>Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ze.bytesLoaded<Ze.bytesTotal){var it=_[oe].reduce(function(ct,Qt){return ct+Qt},0);if(Ze.measuredBandwidthInKbps=Math.round(it/_[oe].length),Ze.estimatedTimeOfDownload=+(8*Ze.bytesTotal/Ze.measuredBandwidthInKbps/1e3).toFixed(2),Ze.estimatedTimeOfDownload<Ze.segmentDuration*Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||X.getRepresentationInfo().quality===0)return se;if(!x.hasOwnProperty(Ze.id)){var lt=X.getAbrController(),Xe=Ze.bytesTotal-Ze.bytesLoaded,st=lt.getBitrateList(ce),wt=lt.getQualityForBitrate(ce,Ze.measuredBandwidthInKbps*Y.get().streaming.abr.bandwidthSafetyFactor,be),Oe=lt.getMinAllowedIndexFor(oe,be),Qe=Oe!==void 0?Math.max(Oe,wt):wt;Xe>Ze.bytesTotal*st[Qe].bitrate/st[lt.getQualityFor(oe,be)].bitrate&&(se.quality=Qe,se.reason.throughput=Ze.measuredBandwidthInKbps,se.reason.fragmentID=Ze.id,se.reason.rule=this.getClassName(),x[Ze.id]=Ze,T.debug("["+oe+"] frag id",Ze.id," is asking to abandon and switch to quality to ",Qe," measured bandwidth was",Ze.measuredBandwidthInKbps),delete U[oe][Ze.id])}}else Ze.bytesLoaded===Ze.bytesTotal&&delete U[oe][Ze.id]}return se},reset:W},T=(0,v.Z)(I).getInstance().getLogger(m),W(),m}y.__dashjs_factory_name="AbandonRequestsRule",g.Z=R.Z.getClassFactory(y)},3112:function(C,g,S){var F=S(3860),R=S(2068),v=S(5448),y=S(7855),O=S(5595),m=S(8512),T=S(6398),U=S(8825),x=S(3393),_=10;function I(b){b=b||{};var j,Y,W,X=this.context,se=b.dashMetrics,N=b.mediaPlayerModel,$=(0,O.Z)(X).getInstance();function ce(Qe,ct,Qt){var Vt=Qt.reduce(function(Ce,te,Fe){return te>Qt[Ce]?Fe:Ce},0);if(Vt===0)return null;var Tt=Math.max(Qe,_+2*ct.length),Pt=(Qt[Vt]-1)/(Tt/_-1);return{gp:Pt,Vp:_/Pt}}function oe(Qe){Qe.placeholderBuffer=0,Qe.mostAdvancedSegmentStart=NaN,Qe.lastSegmentWasReplacement=!1,Qe.lastSegmentStart=NaN,Qe.lastSegmentDurationS=NaN,Qe.lastSegmentRequestTimeMs=NaN,Qe.lastSegmentFinishTimeMs=NaN}function ye(Qe,ct){var Qt=N.getStableBufferTime();if(Qe.stableBufferTime!==Qt){var Vt=ce(Qt,Qe.bitrates,Qe.utilities);if(Vt.Vp!==Qe.Vp||Vt.gp!==Qe.gp){var Tt=se.getCurrentBufferLevel(ct),Pt=Tt+Qe.placeholderBuffer;Pt-=_,Pt*=Vt.Vp/Qe.Vp,Pt+=_,Qe.stableBufferTime=Qt,Qe.Vp=Vt.Vp,Qe.gp=Vt.gp,Qe.placeholderBuffer=Math.max(0,Pt-Tt)}}}function be(Qe,ct){return Qe.Vp*(Qe.utilities[ct]+Qe.gp)}function $e(Qe,ct){for(var Qt=Qe.bitrates[ct],Vt=Qe.utilities[ct],Tt=0,Pt=ct-1;Pt>=0;--Pt)if(Qe.utilities[Pt]<Qe.utilities[ct]){var Ce=Qe.bitrates[Pt],te=Qe.utilities[Pt],Fe=Qe.Vp*(Qe.gp+(Qt*te-Ce*Vt)/(Qt-Ce));Tt=Math.max(Tt,Fe)}return Tt}function Ae(Qe){var ct=Qe.mediaType===x.Z.AUDIO?[x.Z.AUDIO]:W;for(var Qt in ct)W.hasOwnProperty(Qt)&&W[Qt].state===2&&(W[Qt].placeholderBuffer=0)}function Ze(){for(var Qe in W)if(W.hasOwnProperty(Qe)){var ct=W[Qe];ct.state!==0&&(ct.state=1,oe(ct))}}function it(Qe){if(Qe&&Qe.chunk&&Qe.chunk.mediaInfo){var ct=W[Qe.chunk.mediaInfo.type];if(ct&&ct.state!==0){var Qt=Qe.chunk.start;isNaN(ct.mostAdvancedSegmentStart)||Qt>ct.mostAdvancedSegmentStart?(ct.mostAdvancedSegmentStart=Qt,ct.lastSegmentWasReplacement=!1):ct.lastSegmentWasReplacement=!0,ct.lastSegmentStart=Qt,ct.lastSegmentDurationS=Qe.chunk.duration,ct.lastQuality=Qe.chunk.quality,Xe(ct,Qe.chunk.mediaInfo.type)}}}function lt(Qe){if(Qe&&Qe.metric===F.Z.HTTP_REQUEST&&Qe.value&&Qe.value.type===y.w.MEDIA_SEGMENT_TYPE&&Qe.value.trace&&Qe.value.trace.length){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.lastSegmentRequestTimeMs=Qe.value.trequest.getTime(),ct.lastSegmentFinishTimeMs=Qe.value._tfinish.getTime(),Xe(ct,Qe.mediaType))}}function Xe(Qe,ct){if(!isNaN(Qe.lastSegmentStart)&&!isNaN(Qe.lastSegmentRequestTimeMs)&&!isNaN(Qe.placeholderBuffer)){if(Qe.placeholderBuffer*=.99,!isNaN(Qe.lastSegmentFinishTimeMs)){var Qt=se.getCurrentBufferLevel(ct)+.001*(Qe.lastSegmentFinishTimeMs-Qe.lastSegmentRequestTimeMs),Vt=be(Qe,Qe.lastQuality),Tt=Math.max(0,Vt-Qt);Qe.placeholderBuffer=Math.min(Tt,Qe.placeholderBuffer)}Qe.lastSegmentWasReplacement&&!isNaN(Qe.lastSegmentDurationS)&&(Qe.placeholderBuffer+=Qe.lastSegmentDurationS),Qe.lastSegmentStart=NaN,Qe.lastSegmentRequestTimeMs=NaN}}function st(Qe){if(Qe){var ct=W[Qe.mediaType];ct&&ct.state!==0&&(ct.abrQuality=Qe.newQuality)}}function wt(Qe){if(Qe){var ct=W[Qe.mediaType];if(ct&&ct.state!==0){var Qt,Vt=se.getCurrentBufferLevel(Qe.mediaType);Qt=ct.abrQuality>0?$e(ct,ct.abrQuality):_;var Tt=Math.max(0,Qt-Vt);ct.placeholderBuffer=Math.min(ct.placeholderBuffer,Tt)}}}function Oe(){W={}}return j={getMaxIndex:function(Qe){var ct=(0,R.Z)(X).create();if(!(Qe&&Qe.hasOwnProperty("getMediaInfo")&&Qe.hasOwnProperty("getMediaType")&&Qe.hasOwnProperty("getScheduleController")&&Qe.hasOwnProperty("getStreamInfo")&&Qe.hasOwnProperty("getAbrController")&&Qe.hasOwnProperty("useBufferOccupancyABR")))return ct;var Qt=Qe.getMediaInfo(),Vt=Qe.getMediaType(),Tt=Qe.getScheduleController(),Pt=Qe.getStreamInfo(),Ce=Qe.getAbrController(),te=Ce.getThroughputHistory(),Fe=Pt?Pt.id:null,P=Pt&&Pt.manifestInfo&&Pt.manifestInfo.isDynamic,M=Qe.useBufferOccupancyABR();if(ct.reason=ct.reason||{},!M)return ct;Tt.setTimeToLoadDelay(0);var q=function(et){var ft=et.getMediaType(),yt=W[ft];return yt?yt.state!==0&&ye(yt,ft):(yt=function(Et){var Ct={},hn=Et.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),$t=function(Un){return Un.map(function(gr){return Math.log(gr)})}(hn);$t=$t.map(function(Un){return Un-$t[0]+1});var nn=N.getStableBufferTime(),Ot=ce(nn,hn,$t);return Ot?(Ct.state=1,Ct.bitrates=hn,Ct.utilities=$t,Ct.stableBufferTime=nn,Ct.Vp=Ot.Vp,Ct.gp=Ot.gp,Ct.lastQuality=0,oe(Ct)):Ct.state=0,Ct}(et),W[ft]=yt),yt}(Qe);if(q.state===0)return ct;var V,he=se.getCurrentBufferLevel(Vt),fe=te.getAverageThroughput(Vt,P),He=te.getSafeAverageThroughput(Vt,P),_t=te.getAverageLatency(Vt);if(ct.reason.state=q.state,ct.reason.throughput=fe,ct.reason.latency=_t,isNaN(fe))return ct;switch(q.state){case 1:V=Ce.getQualityForBitrate(Qt,He,Fe,_t),ct.quality=V,ct.reason.throughput=He,q.placeholderBuffer=Math.max(0,$e(q,V)-he),q.lastQuality=V,!isNaN(q.lastSegmentDurationS)&&he>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(et,ft){var yt=Date.now();if(isNaN(et.lastSegmentFinishTimeMs)){if(!isNaN(et.lastCallTimeMs)){var Et=.001*(yt-et.lastCallTimeMs);et.placeholderBuffer+=Math.max(0,Et)}}else{var Ct=.001*(yt-et.lastSegmentFinishTimeMs);et.placeholderBuffer+=Math.max(0,Ct)}et.lastCallTimeMs=yt,et.lastSegmentStart=NaN,et.lastSegmentRequestTimeMs=NaN,et.lastSegmentFinishTimeMs=NaN,ye(et,ft)})(q,Vt),V=function(et,ft){for(var yt=et.bitrates.length,Et=NaN,Ct=NaN,hn=0;hn<yt;++hn){var $t=(et.Vp*(et.utilities[hn]+et.gp)-ft)/et.bitrates[hn];(isNaN(Ct)||$t>=Ct)&&(Ct=$t,Et=hn)}return Et}(q,he+q.placeholderBuffer);var ot=Ce.getQualityForBitrate(Qt,He,Fe,_t);V>q.lastQuality&&V>ot&&(V=Math.max(ot,q.lastQuality));var rt=Math.max(0,he+q.placeholderBuffer-be(q,V));rt<=q.placeholderBuffer?(q.placeholderBuffer-=rt,rt=0):(rt-=q.placeholderBuffer,q.placeholderBuffer=0,V<Ce.getMaxAllowedIndexFor(Vt,Fe)?Tt.setTimeToLoadDelay(1e3*rt):rt=0),ct.quality=V,ct.reason.throughput=fe,ct.reason.latency=_t,ct.reason.bufferLevel=he,ct.reason.placeholderBuffer=q.placeholderBuffer,ct.reason.delay=rt,q.lastQuality=V;break;default:Y.debug("BOLA ABR rule invoked in bad state."),ct.quality=Ce.getQualityForBitrate(Qt,He,Fe,_t),ct.reason.state=q.state,ct.reason.throughput=He,ct.reason.latency=_t,q.state=1,oe(q)}return ct},reset:function(){Oe(),$.off(U.Z.BUFFER_EMPTY,Ae,j),$.off(U.Z.PLAYBACK_SEEKING,Ze,j),$.off(U.Z.METRIC_ADDED,lt,j),$.off(U.Z.QUALITY_CHANGE_REQUESTED,st,j),$.off(U.Z.FRAGMENT_LOADING_ABANDONED,wt,j),$.off(m.Z.MEDIA_FRAGMENT_LOADED,it,j)}},Y=(0,T.Z)(X).getInstance().getLogger(j),Oe(),$.on(U.Z.BUFFER_EMPTY,Ae,j),$.on(U.Z.PLAYBACK_SEEKING,Ze,j),$.on(U.Z.METRIC_ADDED,lt,j),$.on(U.Z.QUALITY_CHANGE_REQUESTED,st,j),$.on(U.Z.FRAGMENT_LOADING_ABANDONED,wt,j),$.on(m.Z.MEDIA_FRAGMENT_LOADED,it,j),j}I.__dashjs_factory_name="BolaRule",g.Z=v.Z.getClassFactory(I)},895:function(C,g,S){var F=S(5448),R=S(2068),v=S(6398);function y(){var O,m,T=this.context;return O={getMaxIndex:function(U){var x=(0,R.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return x;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var b=_.getFrameHistory(I);if(!b||b.length===0)return x;for(var j=0,Y=0,W=R.Z.NO_CHANGE,X=1;X<b.length;X++)if(b[X]&&(j=b[X].droppedVideoFrames,(Y=b[X].totalVideoFrames)>375&&j/Y>.15)){W=X-1,m.debug("index: "+W+" Dropped Frames: "+j+" Total Frames: "+Y);break}return(0,R.Z)(T).create(W,{droppedFrames:j})}return x}},m=(0,v.Z)(T).getInstance().getLogger(O),O}y.__dashjs_factory_name="DroppedFramesRule",g.Z=F.Z.getClassFactory(y)},6535:function(C,g,S){var F=S(5595),R=S(8512),v=S(5448),y=S(6398),O=S(2068),m=S(3393),T=S(3860),U=S(8825);function x(_){_=_||{};var I,b,j,Y=this.context,W=(0,F.Z)(Y).getInstance(),X=_.dashMetrics;function se(){(j={})[m.Z.VIDEO]={ignoreCount:2},j[m.Z.AUDIO]={ignoreCount:2}}function N(){se()}function $(ce){isNaN(ce.startTime)||ce.mediaType!==m.Z.AUDIO&&ce.mediaType!==m.Z.VIDEO||j[ce.mediaType].ignoreCount>0&&j[ce.mediaType].ignoreCount--}return I={getMaxIndex:function(ce){var oe=(0,O.Z)(Y).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!X||!X.hasOwnProperty("getCurrentBufferLevel")||!X.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var ye=ce.getMediaType(),be=X.getCurrentBufferState(ye),$e=ce.getRepresentationInfo().fragmentDuration,Ae=ce.getStreamInfo(),Ze=Ae?Ae.id:null,it=ce.getScheduleController(),lt=Ae&&Ae.manifestInfo&&Ae.manifestInfo.isDynamic;if(function(Vt,Tt){return!Vt&&j[Tt].ignoreCount>0}(it.getPlaybackController().getLowLatencyModeEnabled(),ye)||!$e)return oe;if(be&&be.state===T.Z.BUFFER_EMPTY)b.debug("["+ye+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var Xe=ce.getMediaInfo(),st=ce.getAbrController(),wt=st.getThroughputHistory(),Oe=X.getCurrentBufferLevel(ye),Qe=wt.getAverageThroughput(ye,lt),ct=wt.getAverageLatency(ye),Qt=Qe*(Oe/$e)*.5;oe.quality=st.getQualityForBitrate(Xe,Qt,Ze,ct),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){se(),W.off(U.Z.PLAYBACK_SEEKING,N,I),W.off(R.Z.BYTES_APPENDED_END_FRAGMENT,$,I)}},b=(0,y.Z)(Y).getInstance().getLogger(I),se(),W.on(U.Z.PLAYBACK_SEEKING,N,I),W.on(R.Z.BYTES_APPENDED_END_FRAGMENT,$,I),I}x.__dashjs_factory_name="InsufficientBufferRule",g.Z=v.Z.getClassFactory(x)},1914:function(C,g,S){var F=S(3860),R=S(2068),v=S(5448),y=S(7855),O=S(5595),m=S(8512),T=S(6398),U=S(3393);function x(_){_=_||{};var I,b,j,Y,W=this.context,X=_.dashMetrics,se=(0,O.Z)(W).getInstance();function N(Ze){Ze.placeholderBuffer=0,Ze.mostAdvancedSegmentStart=NaN,Ze.lastSegmentWasReplacement=!1,Ze.lastSegmentStart=NaN,Ze.lastSegmentDurationS=NaN,Ze.lastSegmentRequestTimeMs=NaN,Ze.lastSegmentFinishTimeMs=NaN,Ze.lastSegmentUrl=""}function $(){for(var Ze in b)if(b.hasOwnProperty(Ze)){var it=b[Ze];it.state!==0&&(it.state=1,N(it))}}function ce(Ze){if(Ze&&Ze.chunk&&Ze.chunk.mediaInfo){var it=b[Ze.chunk.mediaInfo.type],lt=j[Ze.chunk.mediaInfo.type];if(it&&it.state!==0){var Xe=Ze.chunk.start;isNaN(it.mostAdvancedSegmentStart)||Xe>it.mostAdvancedSegmentStart?(it.mostAdvancedSegmentStart=Xe,it.lastSegmentWasReplacement=!1):it.lastSegmentWasReplacement=!0,it.lastSegmentStart=Xe,it.lastSegmentDurationS=Ze.chunk.duration,it.lastQuality=Ze.chunk.quality,ye(it,lt)}}}function oe(Ze){if(Ze&&Ze.metric===F.Z.HTTP_REQUEST&&Ze.value&&Ze.value.type===y.w.MEDIA_SEGMENT_TYPE&&Ze.value.trace&&Ze.value.trace.length){var it=b[Ze.mediaType],lt=j[Ze.mediaType];it&&it.state!==0&&(it.lastSegmentRequestTimeMs=Ze.value.trequest.getTime(),it.lastSegmentFinishTimeMs=Ze.value._tfinish.getTime(),ye(it,lt))}}function ye(Ze,it){isNaN(Ze.lastSegmentStart)||isNaN(Ze.lastSegmentRequestTimeMs)||(it.segment_request_start_s=.001*Ze.lastSegmentRequestTimeMs,it.segment_download_finish_s=.001*Ze.lastSegmentFinishTimeMs,Ze.lastSegmentStart=NaN,Ze.lastSegmentRequestTimeMs=NaN)}function be(Ze){if(Ze&&Ze.mediaType){var it=b[Ze.mediaType];it&&it.state!==0&&(it.abrQuality=Ze.newQuality)}}function $e(Ze,it){if(Ze.length!==it.length)return-1;for(var lt=0,Xe=0;Xe<Ze.length;Xe++)lt+=Ze[Xe]*it[Xe];return lt}function Ae(){b={},j={}}return I={getMaxIndex:function(Ze){var it,lt=(0,R.Z)(W).create(),Xe=Math.pow(4,.99),st=Math.max(Math.pow(4,1),Xe*Math.sqrt(4)),wt=Ze.getMediaInfo(),Oe=Ze.getMediaType(),Qe=wt.bitrateList.map(function(Ot){return Ot.bandwidth}),ct=Qe.length,Qt=Ze.getScheduleController(),Vt=Ze.getStreamInfo(),Tt=Ze.getAbrController(),Pt=Tt.getThroughputHistory(),Ce=Vt&&Vt.manifestInfo&&Vt.manifestInfo.isDynamic,te=Ze.useL2AABR(),Fe=X.getCurrentBufferLevel(Oe,!0),P=Pt.getSafeAverageThroughput(Oe,Ce),M=Pt.getAverageThroughput(Oe,Ce),q=Pt.getAverageLatency(Oe),V=Ze.getVideoModel().getPlaybackRate();if(!(Ze&&Ze.hasOwnProperty("getMediaInfo")&&Ze.hasOwnProperty("getMediaType")&&Ze.hasOwnProperty("getScheduleController")&&Ze.hasOwnProperty("getStreamInfo")&&Ze.hasOwnProperty("getAbrController")&&Ze.hasOwnProperty("useL2AABR"))||(lt.reason=lt.reason||{},!te||Oe===U.Z.AUDIO))return lt;Qt.setTimeToLoadDelay(0);var he=function(Ot){var Un=Ot.getMediaType(),gr=b[Un];return gr||(gr=function(Pr){var dr={},ei=Pr.getMediaInfo(),Ji=ei.bitrateList.map(function(Or){return Or.bandwidth/1e3});return dr.state=1,dr.bitrates=Ji,dr.lastQuality=0,function(Or){Or&&Or.type&&(j[Or.type]={},j[Or.type].w=[],j[Or.type].prev_w=[],j[Or.type].Q=0,j[Or.type].segment_request_start_s=0,j[Or.type].segment_download_finish_s=0,j[Or.type].B_target=1.5)}(ei),N(dr),dr}(Ot),b[Un]=gr),gr}(Ze);if(he.state===0)return lt;var fe=j[Oe];if(!fe||(lt.reason.state=he.state,lt.reason.throughput=M,lt.reason.latency=q,isNaN(M)))return lt;switch(he.state){case 1:if(it=Tt.getQualityForBitrate(wt,P,Vt.id,q),lt.quality=it,lt.reason.throughput=P,he.lastQuality=it,!isNaN(he.lastSegmentDurationS)&&Fe>=fe.B_target){he.state=2,fe.Q=Xe;for(var He=0;He<ct;++He)He===he.lastQuality?fe.prev_w[He]=1:fe.prev_w[He]=0}break;case 2:var _t=[],ot=X.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.d},0),rt=X.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.b[0]},0),et=Math.round(8*rt/ot),ft=X.getCurrentHttpRequest(Oe);if(et<1&&(et=1),ft.url===he.lastSegmentUrl||ft.type===y.w.INIT_SEGMENT_TYPE)it=he.lastQuality;else{for(var yt=he.lastSegmentDurationS,Et=1,Ct=0;Ct<ct;++Ct)Qe[Ct]=Qe[Ct]/1e3,V*Qe[Ct]>et&&(Et=-1),fe.w[Ct]=fe.prev_w[Ct]+Et*(yt/(2*st))*((fe.Q+Xe)*(V*Qe[Ct]/et));fe.w=function(Ot){for(var Un=Ot.length,gr=!1,Pr=[],dr=0;dr<Un;++dr)Pr[dr]=Ot[dr];for(var ei=Ot.sort(function(zi,to){return to-zi}),Ji=0,Or=0,eo=[],_i=0;_i<Un-1;++_i)if((Or=((Ji+=ei[_i])-1)/(_i+1))>=ei[_i+1]){gr=!0;break}gr||(Or=(Ji+ei[Un-1]-1)/Un);for(var Mi=0;Mi<Un;++Mi)eo[Mi]=Math.max(Pr[Mi]-Or,0);return eo}(fe.w);for(var hn=0;hn<ct;++hn)_t[hn]=fe.w[hn]-fe.prev_w[hn],fe.prev_w[hn]=fe.w[hn];fe.Q=Math.max(0,fe.Q-yt+yt*V*(($e(Qe,fe.prev_w)+$e(Qe,_t))/et));for(var $t=[],nn=0;nn<ct;++nn)$t[nn]=Math.abs(Qe[nn]-$e(fe.w,Qe));(it=$t.indexOf(Math.min.apply(Math,$t)))>he.lastQuality&&Qe[he.lastQuality+1]<=et&&(it=he.lastQuality+1),Qe[it]>=et&&(fe.Q=2*Math.max(Xe,fe.Q)),he.lastSegmentUrl=ft.url}lt.quality=it,lt.reason.throughput=M,lt.reason.latency=q,lt.reason.bufferLevel=Fe,he.lastQuality=lt.quality;break;default:Y.debug("L2A ABR rule invoked in bad state."),lt.quality=Tt.getQualityForBitrate(wt,P,Vt.id,q),lt.reason.state=he.state,lt.reason.throughput=P,lt.reason.latency=q,he.state=1,N(he)}return lt},reset:function(){Ae(),se.off(m.Z.PLAYBACK_SEEKING,$,I),se.off(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),se.off(m.Z.METRIC_ADDED,oe,I),se.off(m.Z.QUALITY_CHANGE_REQUESTED,be,I)}},Y=(0,T.Z)(W).getInstance().getLogger(I),Ae(),se.on(m.Z.PLAYBACK_SEEKING,$,I),se.on(m.Z.MEDIA_FRAGMENT_LOADED,ce,I),se.on(m.Z.METRIC_ADDED,oe,I),se.on(m.Z.QUALITY_CHANGE_REQUESTED,be,I),I}x.__dashjs_factory_name="L2ARule",g.Z=v.Z.getClassFactory(x)},6070:function(C,g,S){var F=S(5448),R=S(6398),v=S(2068);function y(){var O,m,T=this.context;return O={getMaxIndex:function(U){for(var x=U?U.getSwitchHistory():null,_=x?x.getSwitchRequests():[],I=0,b=0,j=0,Y=(0,v.Z)(T).create(),W=0;W<_.length;W++)if(_[W]!==void 0&&(I+=_[W].drops,b+=_[W].noDrops,j+=_[W].dropSize,I+b>=6&&I/b>.075)){Y.quality=W>0&&_[W].drops>0?W-1:W,Y.reason={index:Y.quality,drops:I,noDrops:b,dropSize:j},m.debug("Switch history rule index: "+Y.quality+" samples: "+(I+b)+" drops: "+I);break}return Y}},m=(0,R.Z)(T).getInstance().getLogger(O),O}y.__dashjs_factory_name="SwitchHistoryRule",g.Z=F.Z.getClassFactory(y)},5628:function(C,g,S){var F=S(5448),R=S(2068),v=S(3393),y=S(3860);function O(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(x){var _=(0,R.Z)(T).create();if(!(x&&x.hasOwnProperty("getMediaInfo")&&x.hasOwnProperty("getMediaType")&&x.hasOwnProperty("useBufferOccupancyABR")&&x.hasOwnProperty("getAbrController")&&x.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(v.Z.MISSING_CONFIG_ERROR)})();var I=x.getMediaInfo(),b=x.getMediaType(),j=U.getCurrentBufferState(b),Y=x.getScheduleController(),W=x.getAbrController(),X=x.getStreamInfo(),se=X?X.id:null,N=X&&X.manifestInfo?X.manifestInfo.isDynamic:null,$=W.getThroughputHistory(),ce=$.getSafeAverageThroughput(b,N),oe=$.getAverageLatency(b),ye=x.useBufferOccupancyABR();return isNaN(ce)||!j||ye||W.getAbandonmentStateFor(se,b)!==y.Z.ABANDON_LOAD&&(j.state===y.Z.BUFFER_LOADED||N)&&(_.quality=W.getQualityForBitrate(I,ce,se,oe),Y.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}O.__dashjs_factory_name="ThroughputRule",g.Z=F.Z.getClassFactory(O)},4722:function(C,g,S){var F=S(5448),R=S(6398);function v(){var y,O,m,T,U,x,_,I,b,j=this.context;function Y(){m=null,T=1,U=100,x=0,_=null,I=null,b="dynamic_weight_selection"}function W(){var ce=0;if(m)for(var oe=0;oe<m.length;oe++){var ye=m[oe];ye.state.throughput>ce&&(ce=ye.state.throughput)}return ce}function X(ce,oe,ye){var be=ce.map(function($e,Ae){return ye[Ae]*Math.pow($e-oe[Ae],2)}).reduce(function($e,Ae){return $e+Ae});return(be<0?-1:1)*Math.sqrt(Math.abs(be))}function se(ce,oe){return X([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function N(ce,oe,ye){for(var be=0;be<oe.length;be++){var $e=oe[be],Ae=se($e,ce);$($e,ye,Math.exp(-1*Math.pow(Ae,2)/(2*Math.pow(.1,2))))}}function $(ce,oe,ye){var be=ce.state,$e=[.01,.01,.01,.01];be.throughput=be.throughput+(oe[0]-be.throughput)*$e[0]*ye,be.latency=be.latency+(oe[1]-be.latency)*$e[1]*ye,be.rebuffer=be.rebuffer+(oe[2]-be.rebuffer)*$e[2]*ye,be.switch=be.switch+(oe[3]-be.switch)*$e[3]*ye}return y={getNextQuality:function(ce,oe,ye,be,$e,Ae,Ze){var it=ye,lt=be,Xe=oe,st=function(fe){if(!m){m=[];var He=fe.bitrateList,_t=[];x=He[0].bandwidth,He.forEach(function(ft){_t.push(ft.bandwidth),ft.bandwidth<x&&(x=ft.bandwidth)}),et=_t.map(function(ft){return Math.pow(ft,2)}).reduce(function(ft,yt){return ft+yt}),T=Math.sqrt(et);for(var ot=0;ot<He.length;ot++){var rt={qualityIndex:ot,bitrate:He[ot].bandwidth,state:{throughput:He[ot].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(rt)}I=function(ft){var yt=[],Et=function(bu){for(var tn=[],sn=0;sn<bu;sn++){var an=[Math.random()*W(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(ft.length,2));yt.push(Et[0]);for(var Ct=[1,1,1,1],hn=1;hn<ft.length;hn++){for(var $t=null,nn=null,Ot=0;Ot<Et.length;Ot++){for(var Un=Et[Ot],gr=null,Pr=0;Pr<yt.length;Pr++){var dr=X(Un,yt[Pr],Ct);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&($t=Un,nn=gr)}yt.push($t)}for(var ei=null,Ji=null,Or=0;Or<yt.length;Or++){for(var eo=0,_i=0;_i<yt.length;_i++)Or!==_i&&(eo+=X(yt[Or],yt[_i],Ct));(ei===null||eo>ei)&&(ei=eo,Ji=Or)}var Mi=[];for(Mi.push(yt[Ji]),yt.splice(Ji,1);yt.length>0;){for(var zi=null,to=null,Ti=0;Ti<yt.length;Ti++){var Qn=X(Mi[0],yt[Ti],Ct);(zi===null||Qn<zi)&&(zi=Qn,to=Ti)}Mi.push(yt[to]),yt.splice(to,1)}return Mi}(m)}var et;return m}(ce),wt=oe/T;wt>1&&(wt=W()),ye/=U,O.debug("getNextQuality called throughput:".concat(wt," latency:").concat(ye," bufferSize:").concat(be," currentQualityIndex:").concat(Ae," playbackRate:").concat($e));var Oe=st[Ae],Qe=Oe.bitrate*Ze.getSegmentDuration()/Xe,ct=Math.max(0,Qe-lt);if(lt-Qe<Ze.getMinBuffer())return O.debug("Buffer is low for bitrate= ".concat(Oe.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(lt," rebuffer=").concat(ct)),function(fe,He){var _t=0,ot=fe;if(m)for(var rt=0;rt<m.length;rt++){var et=m[rt];et.bitrate<fe.bitrate&&et.bitrate>_t&&He>et.bitrate&&(_t=et.bitrate,ot=et)}return ot}(Oe,Xe).qualityIndex;switch(b){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(fe){_=function(He,_t){for(var ot=[],rt=Math.sqrt(2/He),et=0;et<4;et++)ot.push(Math.random()*rt);return _=ot}(fe.length)})(st);break;default:(function(fe,He,_t,ot,rt,et,ft){_||(_=I[I.length-1]);var yt=fe.findWeightVector(He,_t,ot,rt,et,ft);yt!==null&&yt!==-1&&(_=yt)})(Ze,st,it,lt,ct,Xe,$e)}for(var Qt=null,Vt=null,Tt=null,Pt=0;Pt<st.length;Pt++){var Ce=st[Pt],te=Ce.state,Fe=[te.throughput,te.latency,te.rebuffer,te.switch],P=_.slice(),M=Ze.getNextBufferWithBitrate(Ce.bitrate,lt,Xe),q=M<Ze.getMinBuffer();q&&O.debug("Buffer is low for bitrate=".concat(Ce.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(lt," nextBuffer=").concat(M)),(Ce.bitrate>oe-1e4||q)&&Ce.bitrate!==x&&(P[0]=100);var V=X(Fe,[wt,0,0,0],P);(Qt===null||V<Qt)&&(Qt=V,Vt=Ce.qualityIndex,Tt=Ce)}var he=Math.abs(Oe.bitrate-Tt.bitrate)/T;return N(Oe,st,[wt,ye,ct,he]),N(Tt,st,[wt,0,0,he]),Vt},reset:function(){Y()}},O=(0,R.Z)(j).getInstance().getLogger(y),Y(),y}v.__dashjs_factory_name="LearningAbrController",g.Z=F.Z.getClassFactory(v)},5317:function(C,g,S){var F=S(5448),R=S(2298);function v(){var y,O,m,T,U;function x(){O=null,m=null,T=null,U=null}function _(b,j,Y,W){var X=new R.Z;return X.type=b,X.weights.bitrateReward=j||1,X.weights.bitrateSwitchPenalty=1,X.weights.rebufferPenalty=Y||1e3,X.weights.latencyPenalty=[],X.weights.latencyPenalty.push({threshold:1.1,penalty:.05*W}),X.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),X.weights.playbackSpeedPenalty=W||200,X}function I(b,j,Y,W,X){X.bitrateWSum+=X.weights.bitrateReward*b,X.lastBitrate&&(X.bitrateSwitchWSum+=X.weights.bitrateSwitchPenalty*Math.abs(b-X.lastBitrate)),X.lastBitrate=b,X.rebufferWSum+=X.weights.rebufferPenalty*j;for(var se=0;se<X.weights.latencyPenalty.length;se++){var N=X.weights.latencyPenalty[se];if(Y<=N.threshold){X.latencyWSum+=N.penalty*Y;break}}X.playbackSpeedWSum+=X.weights.playbackSpeedPenalty*Math.abs(1-W),X.totalQoe=X.bitrateWSum-X.bitrateSwitchWSum-X.rebufferWSum-X.latencyWSum-X.playbackSpeedWSum}return y={setupPerSegmentQoe:function(b,j,Y){O=_("segment",b,j,Y),m=b,T=j,U=Y},logSegmentMetrics:function(b,j,Y,W){O&&I(b,j,Y,W,O)},getPerSegmentQoe:function(){return O},calculateSingleUseQoe:function(b,j,Y,W){var X=null;return m&&T&&U&&(X=_("segment",m,T,U)),X?(I(b,j,Y,W,X),X.totalQoe):0},reset:function(){x()}},x(),y}v.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=F.Z.getClassFactory(v)},5435:function(C,g,S){var F=S(6398),R=S(5448),v=S(4722),y=S(5317),O=S(2068),m=S(3860),T=S(6523),U=S(3393);function x(_){var I,b,j,Y,W=(_=_||{}).dashMetrics,X=this.context;return b={getMaxIndex:function(se){try{var N=(0,O.Z)(X).create(),$=se.getMediaInfo().type,ce=se.getAbrController(),oe=se.getStreamInfo(),ye=ce.getQualityFor($,oe.id),be=se.getMediaInfo(),$e=W.getCurrentBufferState($),Ae=se.getScheduleController(),Ze=W.getCurrentBufferLevel($,!0),it=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,lt=Ae.getPlaybackController(),Xe=lt.getCurrentLiveLatency();if(!se.useLoLPABR()||$===U.Z.AUDIO)return N;Xe||(Xe=0);var st=lt.getPlaybackRate(),wt=ce.getThroughputHistory().getSafeAverageThroughput($,it);if(I.debug("Throughput ".concat(Math.round(wt)," kbps")),isNaN(wt)||!$e||ce.getAbandonmentStateFor(oe.id,$)===m.Z.ABANDON_LOAD)return N;for(var Oe=be.bitrateList,Qe=se.getRepresentationInfo().fragmentDuration,ct=Oe[0].bandwidth/1e3,Qt=Oe[Oe.length-1].bandwidth/1e3,Vt=0;Vt<Oe.length;Vt++){var Tt=Oe[Vt].bandwidth/1e3;Tt>Qt?Qt=Tt:Tt<ct&&(ct=Tt)}var Pt=Oe[ye].bandwidth/1e3,Ce=W.getCurrentHttpRequest($,!0),te=(Ce.tresponse.getTime()-Ce.trequest.getTime())/1e3,Fe=te>Qe?te-Qe:0;Y.setupPerSegmentQoe(Qe,Qt,ct),Y.logSegmentMetrics(Pt,Fe,Xe,st);var P=(0,T.Z)(X).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Qe,qoeEvaluator:Y});return N.quality=j.getNextQuality(be,1e3*wt,Xe,Ze,st,ye,P),N.reason={throughput:wt,latency:Xe},N.priority=O.Z.PRIORITY.STRONG,Ae.setTimeToLoadDelay(0),N.quality!==ye&&I.debug("[TgcLearningRule]["+$+"] requesting switch to index: ",N.quality,"Average throughput",Math.round(wt),"kbps"),N}catch(M){throw M}},reset:function(){j.reset(),Y.reset()}},I=(0,F.Z)(X).getInstance().getLogger(b),j=(0,v.Z)(X).create(),Y=(0,y.Z)(X).create(),b}x.__dashjs_factory_name="LoLPRule",g.Z=R.Z.getClassFactory(x)},6523:function(C,g,S){var F=S(5448);function R(v){var y,O,m,T,U=v.targetLatency,x=v.bufferMin,_=v.segmentDuration,I=v.qoeEvaluator;function b(){return _}function j(Y,W){var X=b();return W>X?Y-X:Y+X-W}return y={getMinBuffer:function(){return x},getSegmentDuration:b,getNextBufferWithBitrate:function(Y,W,X){return j(W,Y*_/X)},getNextBuffer:j,findWeightVector:function(Y,W,X,se,N,$){var ce=null,oe=null,ye=null,be=Math.abs(W-m);return Y.forEach(function($e){O.forEach(function(Ae){Ae[0];var Ze=Ae[1],it=Ae[2],lt=(Ae[3],$e.bitrate*_/N),Xe=j(X,lt),st=(it===0?10:1/it)*Math.max(1e-5,lt-Xe),wt=(Ze===0?10:1/Ze)*$e.state.latency,Oe=I.calculateSingleUseQoe($e.bitrate,st,wt,$);(ce===null||Oe>ce)&&function(Qe,ct,Qt){return!(Qe>U+Qt)&&ct>=x}(W,Xe,be)&&(ce=Oe,oe=Ae,ye=$e.bitrate)})}),oe===null&&ye===null&&(oe=-1),m=W,oe}},O=function Y(W,X,se){if(se===X)return W;for(var N=W.length,$=0;$<N;$++)for(var ce=W.shift(),oe=0;oe<T.length;oe++)W.push(ce.concat(T[oe]));return Y(W,X,se+1)}((T=[.2,.4,.6,.8,1]).map(function(Y){return[Y]}),4,1),m=0,y}R.__dashjs_factory_name="LoLpWeightSelector",g.Z=F.Z.getClassFactory(R)},2298:function(C,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(C,g,S){S.d(g,{Y:function(){return I}});var F=S(3393),R=S(1553),v=S(5448),y=S(2128),O=S(2594),m=S(7387),T=S(7417),U=S(9032),x=S(9326),_=S(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function b(j){var Y,W,X,se,N,$,ce,oe,ye=this.context,be=j.adapter,$e=j.baseURLController,Ae=j.streamInfo,Ze=j.timelineConverter,it=j.debug,lt=j.eventBus,Xe=j.events,st=j.dashConstants,wt=(0,O.Z)(ye).getInstance();function Oe(ct,Qt){var Vt=new y.Z;Vt.id=ct.id,Vt.bitrate=ct.bandwidth,Vt.width=ct.width,Vt.height=ct.height,Vt.tilesHor=1,Vt.tilesVert=1,ct.essentialProperties&&ct.essentialProperties.forEach(function(Tt){if(I.indexOf(Tt.schemeIdUri)>=0&&Tt.value){var Pt=Tt.value.split("x");Pt.length!==2||isNaN(Pt[0])||isNaN(Pt[1])||(Vt.tilesHor=parseInt(Pt[0],10),Vt.tilesVert=parseInt(Pt[1],10))}}),Qt?$.updateSegmentData(ct).then(function(Tt){(function(Pt,Ce,te){var Fe=[],P=function(M,q){var V,he,fe,He,_t=[],ot=0;for(V=0,he=M.segments.length;V<he;V++)fe=M.segments[V],(He=(0,m.TJ)(Ze,be.getIsDynamic(),q,fe.startTime,fe.duration,fe.timescale,fe.media,fe.mediaRange,ot))&&(_t.push(He),He=null,ot++);return _t}(te,Ce);Ce.segments=P,Pt.segmentDuration=Ce.segments[0].duration,Pt.readThumbnail=function(M,q){var V=null;Fe.some(function(he){if(he.start<=M&&he.end>M)return V=he.url,!0}),V?q(V):Ce.segments.some(function(he){if(he.mediaStartTime<=M&&he.mediaStartTime+he.duration>M){var fe=$e.resolve(Ce.path);return ce.load({method:"get",url:fe.url,request:{range:he.mediaRange,responseType:"arraybuffer"},onload:function(He){var _t=oe.getSamplesInfo(He.target.response),ot=new Blob([He.target.response.slice(_t.sampleList[0].offset,_t.sampleList[0].offset+_t.sampleList[0].size)],{type:"image/jpeg"}),rt=window.URL.createObjectURL(ot);Fe.push({start:he.mediaStartTime,end:he.mediaStartTime+he.duration,url:rt}),q&&q(rt)}}),!0}})}})(Vt,ct,Tt)}):(Vt.startNumber=ct.startNumber,Vt.segmentDuration=ct.segmentDuration,Vt.timescale=ct.timescale,Vt.templateUrl=function(Tt){var Pt=wt.isRelative(Tt.media)?wt.resolve(Tt.media,$e.resolve(Tt.path).url):Tt.media;return Pt?(0,m.Aj)(Pt,Tt.id):""}(ct)),Vt.tilesHor>0&&Vt.tilesVert>0&&(Vt.widthPerTile=Vt.width/Vt.tilesHor,Vt.heightPerTile=Vt.height/Vt.tilesVert,W.push(Vt))}function Qe(){W=[],se=-1,N=null}return Y={getTracks:function(){return W},addTracks:function(){if(Ae&&be&&(N=be.getMediaInfoForType(Ae,F.Z.IMAGE))){var ct=be.getVoRepresentations(N);ct&&ct.length>0&&ct.forEach(function(Qt){(Qt.segmentInfoType===R.Z.SEGMENT_TEMPLATE&&Qt.segmentDuration>0&&Qt.media||Qt.segmentInfoType===R.Z.SEGMENT_TIMELINE)&&Oe(Qt),Qt.segmentInfoType===R.Z.SEGMENT_BASE&&Oe(Qt,!0)}),W.length>0&&W.sort(function(Qt,Vt){return Qt.bitrate-Vt.bitrate})}},reset:Qe,setTrackByIndex:function(ct){W&&W.length!==0&&(ct>=W.length&&(ct=W.length-1),se=ct)},getCurrentTrack:function(){return se<0?null:W[se]},getCurrentTrackIndex:function(){return se},getThumbnailRequestForTime:function(ct){for(var Qt,Vt=be.getVoRepresentations(N),Tt=0;Tt<Vt.length;Tt++)if(W[se].id===Vt[Tt].id){Qt=Vt[Tt];break}return X.getSegmentRequestForTime(N,Qt,ct)}},Qe(),ce=(0,U.Z)(ye).create({}),oe=(0,T.Z)(ye).getInstance(),$=(0,_.Z)(ye).create({events:Xe,eventBus:lt,streamInfo:Ae,timelineConverter:Ze,dashConstants:st,dashMetrics:j.dashMetrics,segmentBaseController:j.segmentBaseController,type:F.Z.IMAGE}),(X=(0,x.Z)(ye).create({streamInfo:Ae,type:F.Z.IMAGE,timelineConverter:Ze,segmentsController:$,baseURLController:$e,debug:it,eventBus:lt,events:Xe,dashConstants:st,urlUtils:wt})).initialize(!!be&&be.getIsDynamic()),Y}b.__dashjs_factory_name="ThumbnailTracks",g.Z=v.Z.getClassFactory(b)},7417:function(C,g,S){var F=S(6398),R=S(8260),v=S(5448),y=S(6934),O=S(9597);function m(){var T,U,x=this.context;function _(j){if(!j)return null;j.fileStart===void 0&&(j.fileStart=0);var Y=y.parseBuffer(j),W=(0,R.Z)(x).create();return W.setData(Y),W}function I(j,Y){return j[Y+3]>>>0|j[Y+2]<<8>>>0|j[Y+1]<<16>>>0|j[Y]<<24>>>0}function b(j,Y){return String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y])}return U={parse:_,findLastTopIsoBoxCompleted:function(j,Y,W){if(W===void 0&&(W=0),!Y||W+8>=Y.byteLength)return new O.Z(0,!1);for(var X,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,N=0;W<se.byteLength;){var $=I(se,W),ce=b(se,W+4);if($===0)break;W+$<=se.byteLength&&(j.indexOf(ce)>=0?X=new O.Z(W,!0,$):N=W+$),W+=$}return X||new O.Z(N,!1)},getMediaTimescaleFromMoov:function(j){var Y=_(j),W=Y?Y.getBox("mdhd"):void 0;return W?W.timescale:NaN},getSamplesInfo:function(j){if(!j||j.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Y,W,X,se,N,$,ce,oe,ye,be,$e,Ae,Ze,it,lt,Xe,st=_(j),wt=st.getBoxes("moof"),Oe=st.getBoxes("mfhd");lt=st.getBoxes("moof").length,it=Oe[Oe.length-1].sequence_number,W=0,N=[];var Qe=-1,ct=-1;for(be=0;be<wt.length;be++){var Qt=wt[be],Vt=Qt.getChildBoxes("traf");for(oe=0;oe<Vt.length;oe++){var Tt=Vt[oe],Pt=Tt.getChildBox("tfhd"),Ce=Tt.getChildBox("tfdt");se=Ce.baseMediaDecodeTime;var te=Tt.getChildBoxes("trun"),Fe=Tt.getChildBoxes("subs");for(ye=0;ye<te.length;ye++){var P=te[ye];for(W=P.sample_count,Ze=(Pt.base_data_offset||0)+(P.data_offset||0),ce=0;ce<W;ce++){Y=($=P.samples[ce]).sample_duration!==void 0?$.sample_duration:Pt.default_sample_duration,X=$.sample_size!==void 0?$.sample_size:Pt.default_sample_size;var M={dts:se,cts:se+($.sample_composition_time_offset!==void 0?$.sample_composition_time_offset:0),duration:Y,offset:Qt.offset+Ze,size:X,subSizes:[X]};if(Fe)for($e=0;$e<Fe.length;$e++){var q=Fe[$e];if(Qe<q.entry_count-1&&ce>ct&&(Qe++,ct+=q.entries[Qe].sample_delta),ce==ct){M.subSizes=[];var V=q.entries[Qe];for(Ae=0;Ae<V.subsample_count;Ae++)M.subSizes.push(V.subsamples[Ae].subsample_size)}}N.push(M),Ze+=X,se+=Y}}Xe=se-Ce.baseMediaDecodeTime}}return{sampleList:N,lastSequenceNumber:it,totalDuration:Xe,numSequences:lt}},findInitRange:function(j){var Y=null,W=_(j);if(!W)return Y;var X=W.getBox("ftyp"),se=W.getBox("moov");return T.debug("Searching for initialization."),se&&se.isComplete&&(Y=(X?X.offset:se.offset)+"-"+(se.offset+se.size-1),T.debug("Found the initialization.  Range: "+Y)),Y},parsePayload:function(j,Y,W){if(W===void 0&&(W=0),!Y||W+8>=Y.byteLength)return new O.Z(0,!1);for(var X,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,N=0;W<se.byteLength;){var $=I(se,W),ce=b(se,W+4);if($===0)break;W+$<=se.byteLength&&(j.indexOf(ce)>=0?X=new O.Z(W,!0,$,ce):N=W+$),W+=$}return X||new O.Z(N,!1)}},T=(0,F.Z)(x).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",g.Z=v.Z.getSingletonFactory(m)},1715:function(C,g,S){S.d(g,{B:function(){return O}});var F=S(5448),R=S(7803),v=S(3393),y=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function O(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,x="MediaSource"in window;return T||U||x}function m(){var T,U,x;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:O,supportsEncryptedMedia:function(){return x},supportsCodec:function(_,I){return I!==v.Z.AUDIO&&I!==v.Z.VIDEO?Promise.resolve(!0):function(b,j){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(b.codec&&j===v.Z.AUDIO||j===v.Z.VIDEO&&b.codec&&b.width&&b.height&&b.bitrate&&b.framerate)}(_,I)?function(b,j){return new Promise(function(Y){if(b&&b.codec){var W={type:"media-source"};W[j]={},W[j].contentType=b.codec,W[j].width=b.width,W[j].height=b.height,W[j].bitrate=parseInt(b.bitrate),W[j].framerate=parseFloat(b.framerate),navigator.mediaCapabilities.decodingInfo(W).then(function(X){Y(X.supported)}).catch(function(){Y(!1)})}else Y(!1)})}(_,I):function(b){return new Promise(function(j){if(b&&b.codec){var Y=b.codec;b.width&&b.height&&(Y+=';width="'+b.width+'";height="'+b.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Y)||"MediaSource"in window&&MediaSource.isTypeSupported(Y)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Y)?j(!0):j(!1)}else j(!1)})}(_)},setEncryptedMediaSupported:function(_){x=_},supportsEssentialProperty:function(_){try{return R.Y.indexOf(_.schemeIdUri)!==-1||v.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var b,j=_.split(".")[0],Y=I.indexOf(j)===0,W=0;W<y.length;W++)if(y[W].codec===j){b=y[W];break}return b?Y||b.compatibleCodecs.some(function(X){return I.indexOf(X)===0}):Y}},x=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=F.Z.getSingletonFactory(m)},2295:function(C,g,S){var F=S(5448),R=S(3106);function v(){return{customTimeRangeArray:[],length:0,add:function(y,O){var m;for(m=0;m<this.customTimeRangeArray.length&&y>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:y,end:O}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(y,O){for(var m=0;m<this.customTimeRangeArray.length;m++)if(y<=this.customTimeRangeArray[m].start&&O>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(y>this.customTimeRangeArray[m].start&&O<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:O,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=y;break}y>this.customTimeRangeArray[m].start&&y<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=y:O>this.customTimeRangeArray[m].start&&O<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=O)}this.length=this.customTimeRangeArray.length},mergeRanges:function(y,O){var m=this.customTimeRangeArray[y],T=this.customTimeRangeArray[O];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(O,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(O,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(y,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(O,1),!0)},start:function(y){return(0,R.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].start},end:function(y){return(0,R.SE)(y),y>=this.customTimeRangeArray.length||y<0?NaN:this.customTimeRangeArray[y].end}}}v.__dashjs_factory_name="CustomTimeRanges",g.Z=F.Z.getClassFactory(v)},5:function(C,g,S){var F=S(5448);function R(){var v,y=/^[a-z][a-z0-9+\-_.]*:/i,O=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function(X,se){try{return new window.URL(X,se).toString()}catch(N){return X}},x=function(X,se){var N=_;if(!se||!j(X))return X;Y(X)&&(N=I),W(X)&&(N=b);var $=N(se),ce=$.charAt($.length-1)!=="/"&&X.charAt(0)!=="/"?"/":"";return[$,X].join(ce)};function _(X){var se=X.indexOf("/"),N=X.lastIndexOf("/");return se!==-1?N===se+1?X:(X.indexOf("?")!==-1&&(X=X.substring(0,X.indexOf("?"))),X.substring(0,N+1)):""}function I(X){var se=X.match(T);return se?se[1]:""}function b(X){var se=X.match(y);return se?se[0]:""}function j(X){return!y.test(X)}function Y(X){return j(X)&&X.charAt(0)==="/"}function W(X){return X.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),v=U}catch(X){}finally{v=v||x}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:b,isRelative:j,isPathAbsolute:Y,isSchemeRelative:W,isHTTPURL:function(X){return O.test(X)},isHTTPS:function(X){return m.test(X)},removeHostname:function(X){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(X)[2].substring(1)},resolve:function(X,se){return v(X,se)}}}R.__dashjs_factory_name="DefaultURLUtils",g.Z=F.Z.getSingletonFactory(R)},8260:function(C,g,S){var F=S(2839),R=S(5448);function v(){var y;function O(T){var U=[];if(!T||!y||typeof y.fetchAll!="function")return U;for(var x,_=y.fetchAll(T),I=0,b=_.length;I<b;I++)(x=m(_[I]))&&U.push(x);return U}function m(T){if(!T)return null;var U=new F.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&y&&y.boxes&&y.boxes.length!==0&&typeof y.fetch=="function"?m(y.fetch(T)):null},getBoxes:O,setData:function(T){y=T},getLastBox:function(){if(!y||!y.boxes||!y.boxes.length)return null;var T=O(y.boxes[y.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}v.__dashjs_factory_name="IsoFile",g.Z=R.Z.getClassFactory(v)},7473:function(C,g,S){S.d(g,{k:function(){return R}});var F=S(5448);function R(y,O){var m={url:y.url,method:y.method,headers:Object.assign({},y.headers),credentials:y.withCredentials?"include":void 0,range:y.request.range};return Promise.resolve(O.modifyRequest(m)).then(function(){return Object.assign(y,m,{withCredentials:m.credentials==="include"})})}function v(){return{modifyRequest:null,modifyRequestURL:function(y){return y},modifyRequestHeader:function(y,O){return O.url,y}}}v.__dashjs_factory_name="RequestModifier",g.Z=F.Z.getSingletonFactory(v)},3106:function(C,g,S){S.d(g,{PS:function(){return v},SE:function(){return y}});var F=S(3393);function R(O){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},R(O)}function v(O,m){if(R(O)!==m)throw F.Z.BAD_ARGUMENT_ERROR}function y(O){if(O===null||isNaN(O)||O%1!=0)throw F.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(C,g,S){var F=S(5448),R=S(5);function v(){var O,m=[],T=this.context;function U(x,_,I){var b=function(j){var Y;for(Y=0;Y<m.length;Y++)if(m[Y].regex.test(j))return m[Y].utils;return O}(I||_);return b&&typeof b[x]=="function"?b[x](_,I):O[x](_,I)}return O=(0,R.Z)(T).getInstance(),{registerUrlRegex:function(x,_){m.push({regex:x,utils:_})},parseBaseUrl:function(x){return U("parseBaseUrl",x)},parseOrigin:function(x){return U("parseOrigin",x)},parseScheme:function(x){return U("parseScheme",x)},isRelative:function(x){return U("isRelative",x)},isPathAbsolute:function(x){return U("isPathAbsolute",x)},isSchemeRelative:function(x){return U("isSchemeRelative",x)},isHTTPURL:function(x){return U("isHTTPURL",x)},isHTTPS:function(x){return U("isHTTPS",x)},removeHostname:function(x){return U("removeHostname",x)},resolve:function(x,_){return U("resolve",x,_)}}}v.__dashjs_factory_name="URLUtils";var y=F.Z.getSingletonFactory(v);g.Z=y},5459:function(C,g){g.Z=function S(F,R,v){(function(y,O){if(!(y instanceof O))throw new TypeError("Cannot call a class as a function")})(this,S),this.code=F||null,this.message=R||null,this.data=v||null}},3186:function(C,g,S){var F=S(7855);function R(y,O){for(var m=0;m<O.length;m++){var T=O[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(y,T.key,T)}}var v=function(){function y(T){(function(U,x){if(!(U instanceof x))throw new TypeError("Cannot call a class as a function")})(this,y),this.action=y.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var O,m;return O=y,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===F.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?F.w.INIT_SEGMENT_TYPE:F.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&R(O.prototype,m),y}();v.ACTION_DOWNLOAD="download",v.ACTION_COMPLETE="complete",g.Z=v},2839:function(C,g){function S(R,v){for(var y=0;y<v.length;y++){var O=v[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}var F=function(){function R(O){if(function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,R),this.offset=O._offset,this.type=O.type,this.size=O.size,this.boxes=[],O.boxes)for(var m=0;m<O.boxes.length;m++)this.boxes.push(new R(O.boxes[m]));switch(this.isComplete=!0,O.type){case"sidx":if(this.timescale=O.timescale,this.earliest_presentation_time=O.earliest_presentation_time,this.first_offset=O.first_offset,this.references=O.references,O.references){this.references=[];for(var T=0;T<O.references.length;T++){var U={reference_type:O.references[T].reference_type,referenced_size:O.references[T].referenced_size,subsegment_duration:O.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=O.id,this.version=O.version===1?1:0,this.value=O.value,this.timescale=O.timescale,this.scheme_id_uri=O.scheme_id_uri,this.presentation_time_delta=O.version===1?O.presentation_time:O.presentation_time_delta,this.event_duration=O.event_duration,this.message_data=O.message_data;break;case"mdhd":this.timescale=O.timescale;break;case"mfhd":this.sequence_number=O.sequence_number;break;case"subs":this.entry_count=O.entry_count,this.entries=O.entries;break;case"tfhd":this.base_data_offset=O.base_data_offset,this.sample_description_index=O.sample_description_index,this.default_sample_duration=O.default_sample_duration,this.default_sample_size=O.default_sample_size,this.default_sample_flags=O.default_sample_flags,this.flags=O.flags;break;case"tfdt":this.version=O.version,this.baseMediaDecodeTime=O.baseMediaDecodeTime,this.flags=O.flags;break;case"trun":if(this.sample_count=O.sample_count,this.first_sample_flags=O.first_sample_flags,this.data_offset=O.data_offset,this.flags=O.flags,this.samples=O.samples,O.samples){this.samples=[];for(var x=0,_=O.samples.length;x<_;x++){var I={sample_size:O.samples[x].sample_size,sample_duration:O.samples[x].sample_duration,sample_composition_time_offset:O.samples[x].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=O.version,this.reference_track_ID=O.reference_track_ID,this.ntp_timestamp_sec=O.ntp_timestamp_sec,this.ntp_timestamp_frac=O.ntp_timestamp_frac,this.media_time=O.media_time,this.flags=O.flags}}var v,y;return v=R,(y=[{key:"getChildBox",value:function(O){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===O)return this.boxes[m]}},{key:"getChildBoxes",value:function(O){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===O&&m.push(this.boxes[T]);return m}}])&&S(v.prototype,y),R}();g.Z=F},9597:function(C,g){g.Z=function S(F,R,v){(function(y,O){if(!(y instanceof O))throw new TypeError("Cannot call a class as a function")})(this,S),this.lastCompletedOffset=F,this.found=R,this.size=v}},2128:function(C,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(C,g,S){function F(y,O){if(!(y instanceof O))throw new TypeError("Cannot call a class as a function")}S.d(g,{O:function(){return v},w:function(){return R}});var R=function y(){F(this,y),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},v=function y(){F(this,y),this.s=null,this.d=null,this.b=[]};R.GET="GET",R.HEAD="HEAD",R.MPD_TYPE="MPD",R.XLINK_EXPANSION_TYPE="XLinkExpansion",R.INIT_SEGMENT_TYPE="InitializationSegment",R.INDEX_SEGMENT_TYPE="IndexSegment",R.MEDIA_SEGMENT_TYPE="MediaSegment",R.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",R.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",R.DVB_REPORTING_TYPE="DVBReporting",R.LICENSE="license",R.CONTENT_STEERING_TYPE="ContentSteering",R.OTHER_TYPE="other"},3039:function(C,g){function S(R,v){return function(y,O){for(var m,T,U,x=F(y,"tag"),_=F(O==null?"*":O,"range"),I=[],b=-1;++b<_.length;)if(m=_[b].toLowerCase(),v||m!=="*"){for(T=-1,U=[];++T<x.length;)if(R(x[T].toLowerCase(),m)){if(!v)return x[T];I.push(x[T])}else U.push(x[T]);x=U}return v?I:void 0}}function F(R,v){var y=R&&typeof R=="string"?[R]:R;if(!y||typeof y!="object"||!("length"in y))throw new Error("Invalid "+v+" `"+y+"`, expected non-empty string");return y}g.basicFilter=S(function(R,v){return v==="*"||R===v||R.indexOf(v+"-")>-1},!0),g.extendedFilter=S(function(R,v){var y=R.split("-"),O=v.split("-"),m=0,T=0;if(O[T]!=="*"&&y[m]!==O[T])return!1;for(m++,T++;T<O.length;)if(O[T]!=="*"){if(!y[m])return!1;if(y[m]!==O[T]){if(y[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=S(function(R,v){for(var y,O=v;;){if(O==="*"||R===O)return!0;if((y=O.lastIndexOf("-"))<0)return!1;O.charAt(y-2)==="-"&&(y-=2),O=O.slice(0,y)}})},3973:function(C,g,S){C.exports=S(3854)},3854:function(C,g,S){var F=S(2415),R=S(3039),v=S(7778),y=S(5813),O=S(3165),m=S(9460);C.exports=function(Y,W){var X,se=W||{},N=F.parse(String(Y||"").toLowerCase(),se),$=F.stringify(N),ce=-1;if(!$)return $;for(;++ce<v.length;)R.extendedFilter($,v[ce].from).length&&(_(N,v[ce].from,v[ce].to),$=F.stringify(N));for(ce=-1;++ce<y.length;)I(N,y[ce].from.field,y[ce].from.value)&&b(N,y[ce].to.field,y[ce].to.value);for($=F.stringify(Object.assign({},N,x)),ce=-1;++ce<O.length;)$===O[ce]&&(_(N,O[ce],O[ce].split("-").slice(0,-1).join("-")),$=F.stringify(Object.assign({},N,x)));if(N.extensions.sort(j),se.warning)for(X in m)T.call(m[X],N[X])&&se.warning("Deprecated "+X+" `"+N[X]+"`, expected one of `"+m[X][N[X]].join("`, `")+"`",null,7);return N.script&&(N.script=N.script.charAt(0).toUpperCase()+N.script.slice(1)),N.region&&(N.region=N.region.toUpperCase()),F.stringify(N)};var T={}.hasOwnProperty,U=new Intl.Collator,x={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(Y,W,X){var se,N=F.parse(W),$=F.parse(X),ce=[];for(se in N)N[se]&&N[se].length&&I(Y,se,N[se])&&ce.push(se);for(se in $)$[se]&&$[se].length&&(ce.indexOf(se)>-1||!Y[se]||!Y[se].length)&&b(Y,se,$[se])}function I(Y,W,X){var se,N,$,ce,oe=!1;if(X){if(N=se=Y[W],se&&typeof se=="object")for(N=[],$=-1;++$<se.length;)ce=se[$],X.indexOf(ce)<0?N.push(ce):oe=!0;else se===X&&(N=null,oe=!0);Y[W]=N}return oe}function b(Y,W,X){var se,N,$,ce=Y[W];if(ce&&typeof ce=="object")for(se=[].concat(X),N=-1;++N<se.length;)$=se[N],ce.indexOf($)<0&&ce.push($);else Y[W]=X}function j(Y,W){return U.compare(Y.singleton,W.singleton)}},2415:function(C,g,S){g.parse=S(6903),g.stringify=S(6713)},6903:function(C,g,S){var F=S(2219),R=S(3516),v=S(395),y=S(858),O=S(8589);C.exports=function T(U,x){var _,I,b,j=x||{},Y={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},W=String(U),X=W.toLowerCase(),se=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(O,X))return(j.normalize==null||j.normalize)&&O[X]?T(O[X]):(Y[y.indexOf(X)===-1?"irregular":"regular"]=W,Y);for(;R(X.charCodeAt(se))&&se<9;)se++;if(se>1&&se<9){if(Y.language=W.slice(0,se),se<4)for(I=0;X.charCodeAt(se)===45&&R(X.charCodeAt(se+1))&&R(X.charCodeAt(se+2))&&R(X.charCodeAt(se+3))&&!R(X.charCodeAt(se+4));){if(I>2)return N(se,3,"Too many extended language subtags, expected at most 3 subtags");Y.extendedLanguageSubtags.push(W.slice(se+1,se+4)),se+=4,I++}for(X.charCodeAt(se)===45&&R(X.charCodeAt(se+1))&&R(X.charCodeAt(se+2))&&R(X.charCodeAt(se+3))&&R(X.charCodeAt(se+4))&&!R(X.charCodeAt(se+5))&&(Y.script=W.slice(se+1,se+5),se+=5),X.charCodeAt(se)===45&&(R(X.charCodeAt(se+1))&&R(X.charCodeAt(se+2))&&!R(X.charCodeAt(se+3))?(Y.region=W.slice(se+1,se+3),se+=3):v(X.charCodeAt(se+1))&&v(X.charCodeAt(se+2))&&v(X.charCodeAt(se+3))&&!v(X.charCodeAt(se+4))&&(Y.region=W.slice(se+1,se+4),se+=4));X.charCodeAt(se)===45;){for(b=_=se+1;F(X.charCodeAt(b));){if(b-_>7)return N(b,1,"Too long variant, expected at most 8 characters");b++}if(!(b-_>4||b-_>3&&v(X.charCodeAt(_))))break;Y.variants.push(W.slice(_,b)),se=b}for(;X.charCodeAt(se)===45&&X.charCodeAt(se+1)!==120&&F(X.charCodeAt(se+1))&&X.charCodeAt(se+2)===45&&F(X.charCodeAt(se+3));){for(b=se+2,I=0;X.charCodeAt(b)===45&&F(X.charCodeAt(b+1))&&F(X.charCodeAt(b+2));)for(b=(_=b+1)+2,I++;F(X.charCodeAt(b));){if(b-_>7)return N(b,2,"Too long extension, expected at most 8 characters");b++}if(!I)return N(b,4,"Empty extension, extensions must have at least 2 characters of content");Y.extensions.push({singleton:W.charAt(se+1),extensions:W.slice(se+3,b).split("-")}),se=b}}else se=0;if(se===0&&X.charCodeAt(se)===120||X.charCodeAt(se)===45&&X.charCodeAt(se+1)===120)for(b=se=se?se+2:1;X.charCodeAt(b)===45&&F(X.charCodeAt(b+1));){for(b=_=se+1;F(X.charCodeAt(b));){if(b-_>7)return N(b,5,"Too long private-use area, expected at most 8 characters");b++}Y.privateuse.push(W.slice(se+1,b)),se=b}return se!==W.length?N(se,6,"Found superfluous content after tag"):Y;function N($,ce,oe){return j.warning&&j.warning(oe,ce,$),j.forgiving?Y:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(C){C.exports=function(g){var S,F,R,v=g||{},y=[];if(v.irregular||v.regular)return v.irregular||v.regular;if(v.language)for(y=y.concat(v.language,v.extendedLanguageSubtags||[],v.script||[],v.region||[],v.variants||[]),S=v.extensions||[],F=-1;++F<S.length;)(R=S[F]).singleton&&R.extensions&&R.extensions.length&&(y=y.concat(R.singleton,R.extensions));return v.privateuse&&v.privateuse.length&&(y=y.concat("x",v.privateuse)),y.join("-")}},1549:function(C,g,S){var F=S(6693),R=S(2165),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(P){return+P!=P&&(P=0),m.alloc(+P)},g.INSPECT_MAX_BYTES=50;var y=2147483647;function O(P){if(P>y)throw new RangeError('The value "'+P+'" is invalid for option "size"');var M=new Uint8Array(P);return Object.setPrototypeOf(M,m.prototype),M}function m(P,M,q){if(typeof P=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(P)}return T(P,M,q)}function T(P,M,q){if(typeof P=="string")return function(fe,He){if(typeof He=="string"&&He!==""||(He="utf8"),!m.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var _t=0|j(fe,He),ot=O(_t),rt=ot.write(fe,He);return rt!==_t&&(ot=ot.slice(0,rt)),ot}(P,M);if(ArrayBuffer.isView(P))return function(fe){if(Ce(fe,Uint8Array)){var He=new Uint8Array(fe);return I(He.buffer,He.byteOffset,He.byteLength)}return _(fe)}(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(Ce(P,ArrayBuffer)||P&&Ce(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(P,SharedArrayBuffer)||P&&Ce(P.buffer,SharedArrayBuffer)))return I(P,M,q);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var V=P.valueOf&&P.valueOf();if(V!=null&&V!==P)return m.from(V,M,q);var he=function(fe){if(m.isBuffer(fe)){var He=0|b(fe.length),_t=O(He);return _t.length===0||fe.copy(_t,0,0,He),_t}return fe.length!==void 0?typeof fe.length!="number"||te(fe.length)?O(0):_(fe):fe.type==="Buffer"&&Array.isArray(fe.data)?_(fe.data):void 0}(P);if(he)return he;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return m.from(P[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}function U(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function x(P){return U(P),O(P<0?0:0|b(P))}function _(P){for(var M=P.length<0?0:0|b(P.length),q=O(M),V=0;V<M;V+=1)q[V]=255&P[V];return q}function I(P,M,q){if(M<0||P.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var V;return V=M===void 0&&q===void 0?new Uint8Array(P):q===void 0?new Uint8Array(P,M):new Uint8Array(P,M,q),Object.setPrototypeOf(V,m.prototype),V}function b(P){if(P>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|P}function j(P,M){if(m.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||Ce(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var q=P.length,V=arguments.length>2&&arguments[2]===!0;if(!V&&q===0)return 0;for(var he=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Vt(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return Tt(P).length;default:if(he)return V?-1:Vt(P).length;M=(""+M).toLowerCase(),he=!0}}function Y(P,M,q){var V=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(P||(P="utf8");;)switch(P){case"hex":return lt(this,M,q);case"utf8":case"utf-8":return $e(this,M,q);case"ascii":return Ze(this,M,q);case"latin1":case"binary":return it(this,M,q);case"base64":return be(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xe(this,M,q);default:if(V)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),V=!0}}function W(P,M,q){var V=P[M];P[M]=P[q],P[q]=V}function X(P,M,q,V,he){if(P.length===0)return-1;if(typeof q=="string"?(V=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),te(q=+q)&&(q=he?0:P.length-1),q<0&&(q=P.length+q),q>=P.length){if(he)return-1;q=P.length-1}else if(q<0){if(!he)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,V)),m.isBuffer(M))return M.length===0?-1:se(P,M,q,V,he);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?he?Uint8Array.prototype.indexOf.call(P,M,q):Uint8Array.prototype.lastIndexOf.call(P,M,q):se(P,[M],q,V,he);throw new TypeError("val must be string, number or Buffer")}function se(P,M,q,V,he){var fe,He=1,_t=P.length,ot=M.length;if(V!==void 0&&((V=String(V).toLowerCase())==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(P.length<2||M.length<2)return-1;He=2,_t/=2,ot/=2,q/=2}function rt(Et,Ct){return He===1?Et[Ct]:Et.readUInt16BE(Ct*He)}if(he){var et=-1;for(fe=q;fe<_t;fe++)if(rt(P,fe)===rt(M,et===-1?0:fe-et)){if(et===-1&&(et=fe),fe-et+1===ot)return et*He}else et!==-1&&(fe-=fe-et),et=-1}else for(q+ot>_t&&(q=_t-ot),fe=q;fe>=0;fe--){for(var ft=!0,yt=0;yt<ot;yt++)if(rt(P,fe+yt)!==rt(M,yt)){ft=!1;break}if(ft)return fe}return-1}function N(P,M,q,V){q=Number(q)||0;var he=P.length-q;V?(V=Number(V))>he&&(V=he):V=he;var fe=M.length;V>fe/2&&(V=fe/2);for(var He=0;He<V;++He){var _t=parseInt(M.substr(2*He,2),16);if(te(_t))return He;P[q+He]=_t}return He}function $(P,M,q,V){return Pt(Vt(M,P.length-q),P,q,V)}function ce(P,M,q,V){return Pt(function(he){for(var fe=[],He=0;He<he.length;++He)fe.push(255&he.charCodeAt(He));return fe}(M),P,q,V)}function oe(P,M,q,V){return Pt(Tt(M),P,q,V)}function ye(P,M,q,V){return Pt(function(he,fe){for(var He,_t,ot,rt=[],et=0;et<he.length&&!((fe-=2)<0);++et)_t=(He=he.charCodeAt(et))>>8,ot=He%256,rt.push(ot),rt.push(_t);return rt}(M,P.length-q),P,q,V)}function be(P,M,q){return M===0&&q===P.length?F.fromByteArray(P):F.fromByteArray(P.slice(M,q))}function $e(P,M,q){q=Math.min(P.length,q);for(var V=[],he=M;he<q;){var fe,He,_t,ot,rt=P[he],et=null,ft=rt>239?4:rt>223?3:rt>191?2:1;if(he+ft<=q)switch(ft){case 1:rt<128&&(et=rt);break;case 2:(192&(fe=P[he+1]))==128&&(ot=(31&rt)<<6|63&fe)>127&&(et=ot);break;case 3:fe=P[he+1],He=P[he+2],(192&fe)==128&&(192&He)==128&&(ot=(15&rt)<<12|(63&fe)<<6|63&He)>2047&&(ot<55296||ot>57343)&&(et=ot);break;case 4:fe=P[he+1],He=P[he+2],_t=P[he+3],(192&fe)==128&&(192&He)==128&&(192&_t)==128&&(ot=(15&rt)<<18|(63&fe)<<12|(63&He)<<6|63&_t)>65535&&ot<1114112&&(et=ot)}et===null?(et=65533,ft=1):et>65535&&(et-=65536,V.push(et>>>10&1023|55296),et=56320|1023&et),V.push(et),he+=ft}return function(yt){var Et=yt.length;if(Et<=Ae)return String.fromCharCode.apply(String,yt);for(var Ct="",hn=0;hn<Et;)Ct+=String.fromCharCode.apply(String,yt.slice(hn,hn+=Ae));return Ct}(V)}g.kMaxLength=y,m.TYPED_ARRAY_SUPPORT=function(){try{var P=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(P,M),P.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(P,M,q){return T(P,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(P,M,q){return function(V,he,fe){return U(V),V<=0?O(V):he!==void 0?typeof fe=="string"?O(V).fill(he,fe):O(V).fill(he):O(V)}(P,M,q)},m.allocUnsafe=function(P){return x(P)},m.allocUnsafeSlow=function(P){return x(P)},m.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==m.prototype},m.compare=function(P,M){if(Ce(P,Uint8Array)&&(P=m.from(P,P.offset,P.byteLength)),Ce(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(P)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===M)return 0;for(var q=P.length,V=M.length,he=0,fe=Math.min(q,V);he<fe;++he)if(P[he]!==M[he]){q=P[he],V=M[he];break}return q<V?-1:V<q?1:0},m.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(P,M){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<P.length;++q)M+=P[q].length;var V=m.allocUnsafe(M),he=0;for(q=0;q<P.length;++q){var fe=P[q];if(Ce(fe,Uint8Array))he+fe.length>V.length?m.from(fe).copy(V,he):Uint8Array.prototype.set.call(V,fe,he);else{if(!m.isBuffer(fe))throw new TypeError('"list" argument must be an Array of Buffers');fe.copy(V,he)}he+=fe.length}return V},m.byteLength=j,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<P;M+=2)W(this,M,M+1);return this},m.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<P;M+=4)W(this,M,M+3),W(this,M+1,M+2);return this},m.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<P;M+=8)W(this,M,M+7),W(this,M+1,M+6),W(this,M+2,M+5),W(this,M+3,M+4);return this},m.prototype.toString=function(){var P=this.length;return P===0?"":arguments.length===0?$e(this,0,P):Y.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(P){if(!m.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||m.compare(this,P)===0},m.prototype.inspect=function(){var P="",M=g.INSPECT_MAX_BYTES;return P=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(P+=" ... "),"<Buffer "+P+">"},v&&(m.prototype[v]=m.prototype.inspect),m.prototype.compare=function(P,M,q,V,he){if(Ce(P,Uint8Array)&&(P=m.from(P,P.offset,P.byteLength)),!m.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(M===void 0&&(M=0),q===void 0&&(q=P?P.length:0),V===void 0&&(V=0),he===void 0&&(he=this.length),M<0||q>P.length||V<0||he>this.length)throw new RangeError("out of range index");if(V>=he&&M>=q)return 0;if(V>=he)return-1;if(M>=q)return 1;if(this===P)return 0;for(var fe=(he>>>=0)-(V>>>=0),He=(q>>>=0)-(M>>>=0),_t=Math.min(fe,He),ot=this.slice(V,he),rt=P.slice(M,q),et=0;et<_t;++et)if(ot[et]!==rt[et]){fe=ot[et],He=rt[et];break}return fe<He?-1:He<fe?1:0},m.prototype.includes=function(P,M,q){return this.indexOf(P,M,q)!==-1},m.prototype.indexOf=function(P,M,q){return X(this,P,M,q,!0)},m.prototype.lastIndexOf=function(P,M,q){return X(this,P,M,q,!1)},m.prototype.write=function(P,M,q,V){if(M===void 0)V="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")V=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,V===void 0&&(V="utf8")):(V=q,q=void 0)}var he=this.length-M;if((q===void 0||q>he)&&(q=he),P.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(var fe=!1;;)switch(V){case"hex":return N(this,P,M,q);case"utf8":case"utf-8":return $(this,P,M,q);case"ascii":case"latin1":case"binary":return ce(this,P,M,q);case"base64":return oe(this,P,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,P,M,q);default:if(fe)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),fe=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ae=4096;function Ze(P,M,q){var V="";q=Math.min(P.length,q);for(var he=M;he<q;++he)V+=String.fromCharCode(127&P[he]);return V}function it(P,M,q){var V="";q=Math.min(P.length,q);for(var he=M;he<q;++he)V+=String.fromCharCode(P[he]);return V}function lt(P,M,q){var V=P.length;(!M||M<0)&&(M=0),(!q||q<0||q>V)&&(q=V);for(var he="",fe=M;fe<q;++fe)he+=Fe[P[fe]];return he}function Xe(P,M,q){for(var V=P.slice(M,q),he="",fe=0;fe<V.length-1;fe+=2)he+=String.fromCharCode(V[fe]+256*V[fe+1]);return he}function st(P,M,q){if(P%1!=0||P<0)throw new RangeError("offset is not uint");if(P+M>q)throw new RangeError("Trying to access beyond buffer length")}function wt(P,M,q,V,he,fe){if(!m.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>he||M<fe)throw new RangeError('"value" argument is out of bounds');if(q+V>P.length)throw new RangeError("Index out of range")}function Oe(P,M,q,V,he,fe){if(q+V>P.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Qe(P,M,q,V,he){return M=+M,q>>>=0,he||Oe(P,0,q,4),R.write(P,M,q,V,23,4),q+4}function ct(P,M,q,V,he){return M=+M,q>>>=0,he||Oe(P,0,q,8),R.write(P,M,q,V,52,8),q+8}m.prototype.slice=function(P,M){var q=this.length;(P=~~P)<0?(P+=q)<0&&(P=0):P>q&&(P=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<P&&(M=P);var V=this.subarray(P,M);return Object.setPrototypeOf(V,m.prototype),V},m.prototype.readUintLE=m.prototype.readUIntLE=function(P,M,q){P>>>=0,M>>>=0,q||st(P,M,this.length);for(var V=this[P],he=1,fe=0;++fe<M&&(he*=256);)V+=this[P+fe]*he;return V},m.prototype.readUintBE=m.prototype.readUIntBE=function(P,M,q){P>>>=0,M>>>=0,q||st(P,M,this.length);for(var V=this[P+--M],he=1;M>0&&(he*=256);)V+=this[P+--M]*he;return V},m.prototype.readUint8=m.prototype.readUInt8=function(P,M){return P>>>=0,M||st(P,1,this.length),this[P]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(P,M){return P>>>=0,M||st(P,2,this.length),this[P]|this[P+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(P,M){return P>>>=0,M||st(P,2,this.length),this[P]<<8|this[P+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(P,M){return P>>>=0,M||st(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(P,M){return P>>>=0,M||st(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},m.prototype.readIntLE=function(P,M,q){P>>>=0,M>>>=0,q||st(P,M,this.length);for(var V=this[P],he=1,fe=0;++fe<M&&(he*=256);)V+=this[P+fe]*he;return V>=(he*=128)&&(V-=Math.pow(2,8*M)),V},m.prototype.readIntBE=function(P,M,q){P>>>=0,M>>>=0,q||st(P,M,this.length);for(var V=M,he=1,fe=this[P+--V];V>0&&(he*=256);)fe+=this[P+--V]*he;return fe>=(he*=128)&&(fe-=Math.pow(2,8*M)),fe},m.prototype.readInt8=function(P,M){return P>>>=0,M||st(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},m.prototype.readInt16LE=function(P,M){P>>>=0,M||st(P,2,this.length);var q=this[P]|this[P+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(P,M){P>>>=0,M||st(P,2,this.length);var q=this[P+1]|this[P]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(P,M){return P>>>=0,M||st(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},m.prototype.readInt32BE=function(P,M){return P>>>=0,M||st(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},m.prototype.readFloatLE=function(P,M){return P>>>=0,M||st(P,4,this.length),R.read(this,P,!0,23,4)},m.prototype.readFloatBE=function(P,M){return P>>>=0,M||st(P,4,this.length),R.read(this,P,!1,23,4)},m.prototype.readDoubleLE=function(P,M){return P>>>=0,M||st(P,8,this.length),R.read(this,P,!0,52,8)},m.prototype.readDoubleBE=function(P,M){return P>>>=0,M||st(P,8,this.length),R.read(this,P,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(P,M,q,V){P=+P,M>>>=0,q>>>=0,V||wt(this,P,M,q,Math.pow(2,8*q)-1,0);var he=1,fe=0;for(this[M]=255&P;++fe<q&&(he*=256);)this[M+fe]=P/he&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(P,M,q,V){P=+P,M>>>=0,q>>>=0,V||wt(this,P,M,q,Math.pow(2,8*q)-1,0);var he=q-1,fe=1;for(this[M+he]=255&P;--he>=0&&(fe*=256);)this[M+he]=P/fe&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,1,255,0),this[M]=255&P,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,2,65535,0),this[M]=255&P,this[M+1]=P>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,2,65535,0),this[M]=P>>>8,this[M+1]=255&P,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,4,4294967295,0),this[M+3]=P>>>24,this[M+2]=P>>>16,this[M+1]=P>>>8,this[M]=255&P,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,4,4294967295,0),this[M]=P>>>24,this[M+1]=P>>>16,this[M+2]=P>>>8,this[M+3]=255&P,M+4},m.prototype.writeIntLE=function(P,M,q,V){if(P=+P,M>>>=0,!V){var he=Math.pow(2,8*q-1);wt(this,P,M,q,he-1,-he)}var fe=0,He=1,_t=0;for(this[M]=255&P;++fe<q&&(He*=256);)P<0&&_t===0&&this[M+fe-1]!==0&&(_t=1),this[M+fe]=(P/He>>0)-_t&255;return M+q},m.prototype.writeIntBE=function(P,M,q,V){if(P=+P,M>>>=0,!V){var he=Math.pow(2,8*q-1);wt(this,P,M,q,he-1,-he)}var fe=q-1,He=1,_t=0;for(this[M+fe]=255&P;--fe>=0&&(He*=256);)P<0&&_t===0&&this[M+fe+1]!==0&&(_t=1),this[M+fe]=(P/He>>0)-_t&255;return M+q},m.prototype.writeInt8=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,1,127,-128),P<0&&(P=255+P+1),this[M]=255&P,M+1},m.prototype.writeInt16LE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,2,32767,-32768),this[M]=255&P,this[M+1]=P>>>8,M+2},m.prototype.writeInt16BE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,2,32767,-32768),this[M]=P>>>8,this[M+1]=255&P,M+2},m.prototype.writeInt32LE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,4,2147483647,-2147483648),this[M]=255&P,this[M+1]=P>>>8,this[M+2]=P>>>16,this[M+3]=P>>>24,M+4},m.prototype.writeInt32BE=function(P,M,q){return P=+P,M>>>=0,q||wt(this,P,M,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[M]=P>>>24,this[M+1]=P>>>16,this[M+2]=P>>>8,this[M+3]=255&P,M+4},m.prototype.writeFloatLE=function(P,M,q){return Qe(this,P,M,!0,q)},m.prototype.writeFloatBE=function(P,M,q){return Qe(this,P,M,!1,q)},m.prototype.writeDoubleLE=function(P,M,q){return ct(this,P,M,!0,q)},m.prototype.writeDoubleBE=function(P,M,q){return ct(this,P,M,!1,q)},m.prototype.copy=function(P,M,q,V){if(!m.isBuffer(P))throw new TypeError("argument should be a Buffer");if(q||(q=0),V||V===0||(V=this.length),M>=P.length&&(M=P.length),M||(M=0),V>0&&V<q&&(V=q),V===q||P.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),P.length-M<V-q&&(V=P.length-M+q);var he=V-q;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,V):Uint8Array.prototype.set.call(P,this.subarray(q,V),M),he},m.prototype.fill=function(P,M,q,V){if(typeof P=="string"){if(typeof M=="string"?(V=M,M=0,q=this.length):typeof q=="string"&&(V=q,q=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!m.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(P.length===1){var he=P.charCodeAt(0);(V==="utf8"&&he<128||V==="latin1")&&(P=he)}}else typeof P=="number"?P&=255:typeof P=="boolean"&&(P=Number(P));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var fe;if(M>>>=0,q=q===void 0?this.length:q>>>0,P||(P=0),typeof P=="number")for(fe=M;fe<q;++fe)this[fe]=P;else{var He=m.isBuffer(P)?P:m.from(P,V),_t=He.length;if(_t===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(fe=0;fe<q-M;++fe)this[fe+M]=He[fe%_t]}return this};var Qt=/[^+/0-9A-Za-z-_]/g;function Vt(P,M){var q;M=M||1/0;for(var V=P.length,he=null,fe=[],He=0;He<V;++He){if((q=P.charCodeAt(He))>55295&&q<57344){if(!he){if(q>56319){(M-=3)>-1&&fe.push(239,191,189);continue}if(He+1===V){(M-=3)>-1&&fe.push(239,191,189);continue}he=q;continue}if(q<56320){(M-=3)>-1&&fe.push(239,191,189),he=q;continue}q=65536+(he-55296<<10|q-56320)}else he&&(M-=3)>-1&&fe.push(239,191,189);if(he=null,q<128){if((M-=1)<0)break;fe.push(q)}else if(q<2048){if((M-=2)<0)break;fe.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;fe.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;fe.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return fe}function Tt(P){return F.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(Qt,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(P))}function Pt(P,M,q,V){for(var he=0;he<V&&!(he+q>=M.length||he>=P.length);++he)M[he+q]=P[he];return he}function Ce(P,M){return P instanceof M||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===M.name}function te(P){return P!=P}var Fe=function(){for(var P="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var V=16*q,he=0;he<16;++he)M[V+he]=P[q]+P[he];return M}()},6693:function(C,g){g.byteLength=function(U){var x=m(U),_=x[0],I=x[1];return 3*(_+I)/4-I},g.toByteArray=function(U){var x,_,I=m(U),b=I[0],j=I[1],Y=new R(function(se,N,$){return 3*(N+$)/4-$}(0,b,j)),W=0,X=j>0?b-4:b;for(_=0;_<X;_+=4)x=F[U.charCodeAt(_)]<<18|F[U.charCodeAt(_+1)]<<12|F[U.charCodeAt(_+2)]<<6|F[U.charCodeAt(_+3)],Y[W++]=x>>16&255,Y[W++]=x>>8&255,Y[W++]=255&x;return j===2&&(x=F[U.charCodeAt(_)]<<2|F[U.charCodeAt(_+1)]>>4,Y[W++]=255&x),j===1&&(x=F[U.charCodeAt(_)]<<10|F[U.charCodeAt(_+1)]<<4|F[U.charCodeAt(_+2)]>>2,Y[W++]=x>>8&255,Y[W++]=255&x),Y},g.fromByteArray=function(U){for(var x,_=U.length,I=_%3,b=[],j=16383,Y=0,W=_-I;Y<W;Y+=j)b.push(T(U,Y,Y+j>W?W:Y+j));return I===1?(x=U[_-1],b.push(S[x>>2]+S[x<<4&63]+"==")):I===2&&(x=(U[_-2]<<8)+U[_-1],b.push(S[x>>10]+S[x>>4&63]+S[x<<2&63]+"=")),b.join("")};for(var S=[],F=[],R=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,O=v.length;y<O;++y)S[y]=v[y],F[v.charCodeAt(y)]=y;function m(U){var x=U.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=x),[_,_===x?0:4-_%4]}function T(U,x,_){for(var I,b,j=[],Y=x;Y<_;Y+=3)I=(U[Y]<<16&16711680)+(U[Y+1]<<8&65280)+(255&U[Y+2]),j.push(S[(b=I)>>18&63]+S[b>>12&63]+S[b>>6&63]+S[63&b]);return j.join("")}F[45]=62,F[95]=63},2165:function(C,g){g.read=function(S,F,R,v,y){var O,m,T=8*y-v-1,U=(1<<T)-1,x=U>>1,_=-7,I=R?y-1:0,b=R?-1:1,j=S[F+I];for(I+=b,O=j&(1<<-_)-1,j>>=-_,_+=T;_>0;O=256*O+S[F+I],I+=b,_-=8);for(m=O&(1<<-_)-1,O>>=-_,_+=v;_>0;m=256*m+S[F+I],I+=b,_-=8);if(O===0)O=1-x;else{if(O===U)return m?NaN:1/0*(j?-1:1);m+=Math.pow(2,v),O-=x}return(j?-1:1)*m*Math.pow(2,O-v)},g.write=function(S,F,R,v,y,O){var m,T,U,x=8*O-y-1,_=(1<<x)-1,I=_>>1,b=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=v?0:O-1,Y=v?1:-1,W=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(T=isNaN(F)?1:0,m=_):(m=Math.floor(Math.log(F)/Math.LN2),F*(U=Math.pow(2,-m))<1&&(m--,U*=2),(F+=m+I>=1?b/U:b*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(F*U-1)*Math.pow(2,y),m+=I):(T=F*Math.pow(2,I-1)*Math.pow(2,y),m=0));y>=8;S[R+j]=255&T,j+=Y,T/=256,y-=8);for(m=m<<y|T,x+=y;x>0;S[R+j]=255&m,j+=Y,m/=256,x-=8);S[R+j-Y]|=128*W}},6934:function(C,g){var S={parseBuffer:function(v){return new F(v).parse()},addBoxProcessor:function(v,y){typeof v=="string"&&typeof y=="function"&&(R.prototype._boxProcessors[v]=y)},createFile:function(){return new F},createBox:function(v,y,O){var m=R.create(v);return y&&y.append(m,O),m},createFullBox:function(v,y,O){var m=S.createBox(v,y,O);return m.version=0,m.flags=0,m},Utils:{}};S.Utils.dataViewToString=function(v,y){var O=y||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(O).decode(v);var m=[],T=0;if(O==="utf-8")for(;T<v.byteLength;){var U=v.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&v.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&v.getUint8(T++))<<6,U|=63&v.getUint8(T++)):(U=(7&U)<<18,U|=(63&v.getUint8(T++))<<12,U|=(63&v.getUint8(T++))<<6,U|=63&v.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<v.byteLength;)m.push(String.fromCharCode(v.getUint8(T++)));return m.join("")},S.Utils.utf8ToByteArray=function(v){var y,O;if(typeof TextEncoder<"u")y=new TextEncoder().encode(v);else for(y=[],O=0;O<v.length;++O){var m=v.charCodeAt(O);m<128?y.push(m):m<2048?(y.push(192|m>>6),y.push(128|63&m)):m<65536?(y.push(224|m>>12),y.push(128|63&m>>6),y.push(128|63&m)):(y.push(240|m>>18),y.push(128|63&m>>12),y.push(128|63&m>>6),y.push(128|63&m))}return y},S.Utils.appendBox=function(v,y,O){if(y._offset=v._cursor.offset,y._root=v._root?v._root:v,y._raw=v._raw,y._parent=v,O!==-1)if(O!=null){var m,T=-1;if(typeof O=="number")T=O;else{if(typeof O=="string")m=O;else{if(typeof O!="object"||!O.type)return void v.boxes.push(y);m=O.type}for(var U=0;U<v.boxes.length;U++)if(m===v.boxes[U].type){T=U+1;break}}v.boxes.splice(T,0,y)}else v.boxes.push(y)},g.parseBuffer=S.parseBuffer,g.addBoxProcessor=S.addBoxProcessor,g.createFile=S.createFile,g.createBox=S.createBox,g.createFullBox=S.createFullBox,g.Utils=S.Utils,S.Cursor=function(v){this.offset=v===void 0?0:v};var F=function(v){this._cursor=new S.Cursor,this.boxes=[],v&&(this._raw=new DataView(v))};F.prototype.fetch=function(v){var y=this.fetchAll(v,!0);return y.length?y[0]:null},F.prototype.fetchAll=function(v,y){var O=[];return F._sweep.call(this,v,O,y),O},F.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var v=R.parse(this);if(v.type===void 0)break;this.boxes.push(v)}return this},F._sweep=function(v,y,O){for(var m in this.type&&this.type==v&&y.push(this),this.boxes){if(y.length&&O)return;F._sweep.call(this.boxes[m],v,y,O)}},F.prototype.write=function(){var v,y=0;for(v=0;v<this.boxes.length;v++)y+=this.boxes[v].getLength(!1);var O=new Uint8Array(y);for(this._rawo=new DataView(O.buffer),this.bytes=O,this._cursor.offset=0,v=0;v<this.boxes.length;v++)this.boxes[v].write();return O.buffer},F.prototype.append=function(v,y){S.Utils.appendBox(this,v,y)};var R=function(){this._cursor=new S.Cursor};R.parse=function(v){var y=new R;return y._offset=v._cursor.offset,y._root=v._root?v._root:v,y._raw=v._raw,y._parent=v,y._parseBox(),v._cursor.offset=y._raw.byteOffset+y._raw.byteLength,y},R.create=function(v){var y=new R;return y.type=v,y.boxes=[],y},R.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],R.prototype._boxProcessors={},R.prototype._procField=function(v,y,O){this._parsing?this[v]=this._readField(y,O):this._writeField(y,O,this[v])},R.prototype._procFieldArray=function(v,y,O,m){var T;if(this._parsing)for(this[v]=[],T=0;T<y;T++)this[v][T]=this._readField(O,m);else for(T=0;T<this[v].length;T++)this._writeField(O,m,this[v][T])},R.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},R.prototype._procEntries=function(v,y,O){var m;if(this._parsing)for(this[v]=[],m=0;m<y;m++)this[v].push({}),O.call(this,this[v][m]);else for(m=0;m<y;m++)O.call(this,this[v][m])},R.prototype._procSubEntries=function(v,y,O,m){var T;if(this._parsing)for(v[y]=[],T=0;T<O;T++)v[y].push({}),m.call(this,v[y][T]);else for(T=0;T<O;T++)m.call(this,v[y][T])},R.prototype._procEntryField=function(v,y,O,m){this._parsing?v[y]=this._readField(O,m):this._writeField(O,m,v[y])},R.prototype._procSubBoxes=function(v,y){var O;if(this._parsing)for(this[v]=[],O=0;O<y;O++)this[v].push(R.parse(this));else for(O=0;O<y;O++)this._rawo?this[v][O].write():this.size+=this[v][O].getLength()},R.prototype._readField=function(v,y){switch(v){case"uint":return this._readUint(y);case"int":return this._readInt(y);case"template":return this._readTemplate(y);case"string":return y===-1?this._readTerminatedString():this._readString(y);case"data":return this._readData(y);case"utf8":return this._readUTF8String();default:return-1}},R.prototype._readInt=function(v){var y=null,O=this._cursor.offset-this._raw.byteOffset;switch(v){case 8:y=this._raw.getInt8(O);break;case 16:y=this._raw.getInt16(O);break;case 32:y=this._raw.getInt32(O);break;case 64:var m=this._raw.getInt32(O),T=this._raw.getInt32(O+4);y=m*Math.pow(2,32)+T}return this._cursor.offset+=v>>3,y},R.prototype._readUint=function(v){var y,O,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(v){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((y=this._raw.getUint16(T))<<8)+(O=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:y=this._raw.getUint32(T),O=this._raw.getUint32(T+4),m=y*Math.pow(2,32)+O}return this._cursor.offset+=v>>3,m},R.prototype._readString=function(v){for(var y="",O=0;O<v;O++){var m=this._readUint(8);y+=String.fromCharCode(m)}return y},R.prototype._readTemplate=function(v){return this._readUint(v/2)+this._readUint(v/2)/Math.pow(2,v/2)},R.prototype._readTerminatedString=function(){for(var v="";this._cursor.offset-this._offset<this._raw.byteLength;){var y=this._readUint(8);if(y===0)break;v+=String.fromCharCode(y)}return v},R.prototype._readData=function(v){var y=v>0?v:this._raw.byteLength-(this._cursor.offset-this._offset);if(y>0){var O=new Uint8Array(this._raw.buffer,this._cursor.offset,y);return this._cursor.offset+=y,O}return null},R.prototype._readUTF8String=function(){var v=this._raw.byteLength-(this._cursor.offset-this._offset),y=null;return v>0&&(y=new DataView(this._raw.buffer,this._cursor.offset,v),this._cursor.offset+=v),y&&S.Utils.dataViewToString(y)},R.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},R.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},R.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(R.parse(this))},R.prototype.append=function(v,y){S.Utils.appendBox(this,v,y)},R.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var v=0;v<this.boxes.length;v++)this.size+=this.boxes[v].getLength();return this._data&&this._writeData(this._data),this.size},R.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var v=0;v<this.boxes.length;v++)this.boxes[v].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},R.prototype._writeInt=function(v,y){if(this._rawo){var O=this._cursor.offset-this._rawo.byteOffset;switch(v){case 8:this._rawo.setInt8(O,y);break;case 16:this._rawo.setInt16(O,y);break;case 32:this._rawo.setInt32(O,y);break;case 64:var m=Math.floor(y/Math.pow(2,32)),T=y-m*Math.pow(2,32);this._rawo.setUint32(O,m),this._rawo.setUint32(O+4,T)}this._cursor.offset+=v>>3}else this.size+=v>>3},R.prototype._writeUint=function(v,y){if(this._rawo){var O,m,T=this._cursor.offset-this._rawo.byteOffset;switch(v){case 8:this._rawo.setUint8(T,y);break;case 16:this._rawo.setUint16(T,y);break;case 24:O=(16776960&y)>>8,m=255&y,this._rawo.setUint16(T,O),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,y);break;case 64:m=y-(O=Math.floor(y/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,O),this._rawo.setUint32(T+4,m)}this._cursor.offset+=v>>3}else this.size+=v>>3},R.prototype._writeString=function(v,y){for(var O=0;O<v;O++)this._writeUint(8,y.charCodeAt(O))},R.prototype._writeTerminatedString=function(v){if(v.length!==0){for(var y=0;y<v.length;y++)this._writeUint(8,v.charCodeAt(y));this._writeUint(8,0)}},R.prototype._writeTemplate=function(v,y){var O=Math.floor(y),m=(y-O)*Math.pow(2,v/2);this._writeUint(v/2,O),this._writeUint(v/2,m)},R.prototype._writeData=function(v){if(v)if(this._rawo){if(v instanceof Array){for(var y=this._cursor.offset-this._rawo.byteOffset,O=0;O<v.length;O++)this._rawo.setInt8(y+O,v[O]);this._cursor.offset+=v.length}v instanceof Uint8Array&&(this._root.bytes.set(v,this._cursor.offset),this._cursor.offset+=v.length)}else this.size+=v.length},R.prototype._writeUTF8String=function(v){var y=S.Utils.utf8ToByteArray(v);if(this._rawo)for(var O=new DataView(this._rawo.buffer,this._cursor.offset,y.length),m=0;m<y.length;m++)O.setUint8(m,y[m]);else this.size+=y.length},R.prototype._writeField=function(v,y,O){switch(v){case"uint":this._writeUint(y,O);break;case"int":this._writeInt(y,O);break;case"template":this._writeTemplate(y,O);break;case"string":y==-1?this._writeTerminatedString(O):this._writeString(y,O);break;case"data":this._writeData(O);break;case"utf8":this._writeUTF8String(O)}},R.prototype._boxProcessors.avc1=R.prototype._boxProcessors.avc2=R.prototype._boxProcessors.avc3=R.prototype._boxProcessors.avc4=R.prototype._boxProcessors.hvc1=R.prototype._boxProcessors.hev1=R.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},R.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(v){this._procEntryField(v,"sample_count","uint",32),this._procEntryField(v,"sample_offset",this.version===1?"int":"uint",32)})},R.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(v){this._procEntryField(v,"segment_duration","uint",this.version===1?64:32),this._procEntryField(v,"media_time","int",this.version===1?64:32),this._procEntryField(v,"media_rate_integer","int",16),this._procEntryField(v,"media_rate_fraction","int",16)})},R.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},R.prototype._boxProcessors.free=R.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},R.prototype._boxProcessors.ftyp=R.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var v=-1;this._parsing&&(v=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",v,"string",4)},R.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},R.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},R.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},R.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},R.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},R.prototype._boxProcessors.mp4a=R.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},R.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},R.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},R.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},R.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},R.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},R.prototype._boxProcessors.sdtp=function(){this._procFullBox();var v=-1;this._parsing&&(v=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",v,"uint",8)},R.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(v){this._parsing||(v.reference=(1&v.reference_type)<<31,v.reference|=2147483647&v.referenced_size,v.sap=(1&v.starts_with_SAP)<<31,v.sap|=(3&v.SAP_type)<<28,v.sap|=268435455&v.SAP_delta_time),this._procEntryField(v,"reference","uint",32),this._procEntryField(v,"subsegment_duration","uint",32),this._procEntryField(v,"sap","uint",32),this._parsing&&(v.reference_type=v.reference>>31&1,v.referenced_size=2147483647&v.reference,v.starts_with_SAP=v.sap>>31&1,v.SAP_type=v.sap>>28&7,v.SAP_delta_time=268435455&v.sap)})},R.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},R.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(v){this._procEntryField(v,"ranges_count","uint",32),this._procSubEntries(v,"ranges",v.ranges_count,function(y){this._procEntryField(y,"level","uint",8),this._procEntryField(y,"range_size","uint",24)})})},R.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},R.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(v){this._procEntryField(v,"sample_count","uint",32),this._procEntryField(v,"sample_delta","uint",32)})},R.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(v){this._procEntryField(v,"sample_delta","uint",32),this._procEntryField(v,"subsample_count","uint",16),this._procSubEntries(v,"subsamples",v.subsample_count,function(y){this._procEntryField(y,"subsample_size","uint",this.version===1?32:16),this._procEntryField(y,"subsample_priority","uint",8),this._procEntryField(y,"discardable","uint",8),this._procEntryField(y,"codec_specific_parameters","uint",32)})})},R.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},R.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},R.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(v){this._procEntryField(v,"time","uint",this.version===1?64:32),this._procEntryField(v,"moof_offset","uint",this.version===1?64:32),this._procEntryField(v,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(v,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(v,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},R.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},R.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(v){256&this.flags&&this._procEntryField(v,"sample_duration","uint",32),512&this.flags&&this._procEntryField(v,"sample_size","uint",32),1024&this.flags&&this._procEntryField(v,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(v,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},R.prototype._boxProcessors["url "]=R.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},R.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},R.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},R.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},R.prototype._boxProcessors.vtte=function(){}},5530:function(C,g,S){C.exports=S(6146).polyfill()},6146:function(C,g,S){C.exports=function(){function F(Tt){return typeof Tt=="function"}var R=Array.isArray?Array.isArray:function(Tt){return Object.prototype.toString.call(Tt)==="[object Array]"},v=0,y=void 0,O=void 0,m=function(Tt,Pt){j[v]=Tt,j[v+1]=Pt,(v+=2)===2&&(O?O(Y):$())},T=typeof window<"u"?window:void 0,U=T||{},x=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function b(){var Tt=setTimeout;return function(){return Tt(Y,1)}}var j=new Array(1e3);function Y(){for(var Tt=0;Tt<v;Tt+=2)(0,j[Tt])(j[Tt+1]),j[Tt]=void 0,j[Tt+1]=void 0;v=0}var W,X,se,N,$=void 0;function ce(Tt,Pt){var Ce=this,te=new this.constructor(be);te[ye]===void 0&&ct(te);var Fe=Ce._state;if(Fe){var P=arguments[Fe-1];m(function(){return Oe(Fe,te,P,Ce._result)})}else st(Ce,te,Tt,Pt);return te}function oe(Tt){if(Tt&&typeof Tt=="object"&&Tt.constructor===this)return Tt;var Pt=new this(be);return Ze(Pt,Tt),Pt}$=_?function(){return process.nextTick(Y)}:x?(X=0,se=new x(Y),N=document.createTextNode(""),se.observe(N,{characterData:!0}),function(){N.data=X=++X%2}):I?((W=new MessageChannel).port1.onmessage=Y,function(){return W.port2.postMessage(0)}):T===void 0?function(){try{var Tt=Function("return this")().require("vertx");return(y=Tt.runOnLoop||Tt.runOnContext)!==void 0?function(){y(Y)}:b()}catch(Pt){return b()}}():b();var ye=Math.random().toString(36).substring(2);function be(){}var $e=void 0;function Ae(Tt,Pt,Ce){Pt.constructor===Tt.constructor&&Ce===ce&&Pt.constructor.resolve===oe?function(te,Fe){Fe._state===1?lt(te,Fe._result):Fe._state===2?Xe(te,Fe._result):st(Fe,void 0,function(P){return Ze(te,P)},function(P){return Xe(te,P)})}(Tt,Pt):Ce===void 0?lt(Tt,Pt):F(Ce)?function(te,Fe,P){m(function(M){var q=!1,V=function(he,fe,He,_t){try{he.call(fe,He,_t)}catch(ot){return ot}}(P,Fe,function(he){q||(q=!0,Fe!==he?Ze(M,he):lt(M,he))},function(he){q||(q=!0,Xe(M,he))},M._label);!q&&V&&(q=!0,Xe(M,V))},te)}(Tt,Pt,Ce):lt(Tt,Pt)}function Ze(Tt,Pt){if(Tt===Pt)Xe(Tt,new TypeError("You cannot resolve a promise with itself"));else if(Fe=typeof(te=Pt),te===null||Fe!=="object"&&Fe!=="function")lt(Tt,Pt);else{var Ce=void 0;try{Ce=Pt.then}catch(P){return void Xe(Tt,P)}Ae(Tt,Pt,Ce)}var te,Fe}function it(Tt){Tt._onerror&&Tt._onerror(Tt._result),wt(Tt)}function lt(Tt,Pt){Tt._state===$e&&(Tt._result=Pt,Tt._state=1,Tt._subscribers.length!==0&&m(wt,Tt))}function Xe(Tt,Pt){Tt._state===$e&&(Tt._state=2,Tt._result=Pt,m(it,Tt))}function st(Tt,Pt,Ce,te){var Fe=Tt._subscribers,P=Fe.length;Tt._onerror=null,Fe[P]=Pt,Fe[P+1]=Ce,Fe[P+2]=te,P===0&&Tt._state&&m(wt,Tt)}function wt(Tt){var Pt=Tt._subscribers,Ce=Tt._state;if(Pt.length!==0){for(var te=void 0,Fe=void 0,P=Tt._result,M=0;M<Pt.length;M+=3)te=Pt[M],Fe=Pt[M+Ce],te?Oe(Ce,te,Fe,P):Fe(P);Tt._subscribers.length=0}}function Oe(Tt,Pt,Ce,te){var Fe=F(Ce),P=void 0,M=void 0,q=!0;if(Fe){try{P=Ce(te)}catch(V){q=!1,M=V}if(Pt===P)return void Xe(Pt,new TypeError("A promises callback cannot return that same promise."))}else P=te;Pt._state!==$e||(Fe&&q?Ze(Pt,P):q===!1?Xe(Pt,M):Tt===1?lt(Pt,P):Tt===2&&Xe(Pt,P))}var Qe=0;function ct(Tt){Tt[ye]=Qe++,Tt._state=void 0,Tt._result=void 0,Tt._subscribers=[]}var Qt=function(){function Tt(Pt,Ce){this._instanceConstructor=Pt,this.promise=new Pt(be),this.promise[ye]||ct(this.promise),R(Ce)?(this.length=Ce.length,this._remaining=Ce.length,this._result=new Array(this.length),this.length===0?lt(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ce),this._remaining===0&&lt(this.promise,this._result))):Xe(this.promise,new Error("Array Methods must be provided an Array"))}return Tt.prototype._enumerate=function(Pt){for(var Ce=0;this._state===$e&&Ce<Pt.length;Ce++)this._eachEntry(Pt[Ce],Ce)},Tt.prototype._eachEntry=function(Pt,Ce){var te=this._instanceConstructor,Fe=te.resolve;if(Fe===oe){var P=void 0,M=void 0,q=!1;try{P=Pt.then}catch(he){q=!0,M=he}if(P===ce&&Pt._state!==$e)this._settledAt(Pt._state,Ce,Pt._result);else if(typeof P!="function")this._remaining--,this._result[Ce]=Pt;else if(te===Vt){var V=new te(be);q?Xe(V,M):Ae(V,Pt,P),this._willSettleAt(V,Ce)}else this._willSettleAt(new te(function(he){return he(Pt)}),Ce)}else this._willSettleAt(Fe(Pt),Ce)},Tt.prototype._settledAt=function(Pt,Ce,te){var Fe=this.promise;Fe._state===$e&&(this._remaining--,Pt===2?Xe(Fe,te):this._result[Ce]=te),this._remaining===0&&lt(Fe,this._result)},Tt.prototype._willSettleAt=function(Pt,Ce){var te=this;st(Pt,void 0,function(Fe){return te._settledAt(1,Ce,Fe)},function(Fe){return te._settledAt(2,Ce,Fe)})},Tt}(),Vt=function(){function Tt(Pt){this[ye]=Qe++,this._result=this._state=void 0,this._subscribers=[],be!==Pt&&(typeof Pt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Tt?function(Ce,te){try{te(function(Fe){Ze(Ce,Fe)},function(Fe){Xe(Ce,Fe)})}catch(Fe){Xe(Ce,Fe)}}(this,Pt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Tt.prototype.catch=function(Pt){return this.then(null,Pt)},Tt.prototype.finally=function(Pt){var Ce=this,te=Ce.constructor;return F(Pt)?Ce.then(function(Fe){return te.resolve(Pt()).then(function(){return Fe})},function(Fe){return te.resolve(Pt()).then(function(){throw Fe})}):Ce.then(Pt,Pt)},Tt}();return Vt.prototype.then=ce,Vt.all=function(Tt){return new Qt(this,Tt).promise},Vt.race=function(Tt){var Pt=this;return R(Tt)?new Pt(function(Ce,te){for(var Fe=Tt.length,P=0;P<Fe;P++)Pt.resolve(Tt[P]).then(Ce,te)}):new Pt(function(Ce,te){return te(new TypeError("You must pass an array to race."))})},Vt.resolve=oe,Vt.reject=function(Tt){var Pt=new this(be);return Xe(Pt,Tt),Pt},Vt._setScheduler=function(Tt){O=Tt},Vt._setAsap=function(Tt){m=Tt},Vt._asap=m,Vt.polyfill=function(){var Tt=void 0;if(S.g!==void 0)Tt=S.g;else if(typeof self<"u")Tt=self;else try{Tt=Function("return this")()}catch(te){throw new Error("polyfill failed because global object is unavailable in this environment")}var Pt=Tt.Promise;if(Pt){var Ce=null;try{Ce=Object.prototype.toString.call(Pt.resolve())}catch(te){}if(Ce==="[object Promise]"&&!Pt.cast)return}Tt.Promise=Vt},Vt.Promise=Vt,Vt}()},1159:function(C){var g,S=typeof Reflect=="object"?Reflect:null,F=S&&typeof S.apply=="function"?S.apply:function(Y,W,X){return Function.prototype.apply.call(Y,W,X)};g=S&&typeof S.ownKeys=="function"?S.ownKeys:Object.getOwnPropertySymbols?function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:function(Y){return Object.getOwnPropertyNames(Y)};var R=Number.isNaN||function(Y){return Y!=Y};function v(){v.init.call(this)}C.exports=v,C.exports.once=function(Y,W){return new Promise(function(X,se){function N(ce){Y.removeListener(W,$),se(ce)}function $(){typeof Y.removeListener=="function"&&Y.removeListener("error",N),X([].slice.call(arguments))}j(Y,W,$,{once:!0}),W!=="error"&&function(ce,oe,ye){typeof ce.on=="function"&&j(ce,"error",oe,{once:!0})}(Y,N)})},v.EventEmitter=v,v.prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var y=10;function O(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function m(Y){return Y._maxListeners===void 0?v.defaultMaxListeners:Y._maxListeners}function T(Y,W,X,se){var N,$,ce,oe;if(O(X),($=Y._events)===void 0?($=Y._events=Object.create(null),Y._eventsCount=0):($.newListener!==void 0&&(Y.emit("newListener",W,X.listener?X.listener:X),$=Y._events),ce=$[W]),ce===void 0)ce=$[W]=X,++Y._eventsCount;else if(typeof ce=="function"?ce=$[W]=se?[X,ce]:[ce,X]:se?ce.unshift(X):ce.push(X),(N=m(Y))>0&&ce.length>N&&!ce.warned){ce.warned=!0;var ye=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");ye.name="MaxListenersExceededWarning",ye.emitter=Y,ye.type=W,ye.count=ce.length,oe=ye,console&&console.warn&&console.warn(oe)}return Y}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(Y,W,X){var se={fired:!1,wrapFn:void 0,target:Y,type:W,listener:X},N=U.bind(se);return N.listener=X,se.wrapFn=N,N}function _(Y,W,X){var se=Y._events;if(se===void 0)return[];var N=se[W];return N===void 0?[]:typeof N=="function"?X?[N.listener||N]:[N]:X?function($){for(var ce=new Array($.length),oe=0;oe<ce.length;++oe)ce[oe]=$[oe].listener||$[oe];return ce}(N):b(N,N.length)}function I(Y){var W=this._events;if(W!==void 0){var X=W[Y];if(typeof X=="function")return 1;if(X!==void 0)return X.length}return 0}function b(Y,W){for(var X=new Array(W),se=0;se<W;++se)X[se]=Y[se];return X}function j(Y,W,X,se){if(typeof Y.on=="function")se.once?Y.once(W,X):Y.on(W,X);else{if(typeof Y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener(W,function N($){se.once&&Y.removeEventListener(W,N),X($)})}}Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(Y){if(typeof Y!="number"||Y<0||R(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");y=Y}}),v.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||R(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this},v.prototype.getMaxListeners=function(){return m(this)},v.prototype.emit=function(Y){for(var W=[],X=1;X<arguments.length;X++)W.push(arguments[X]);var se=Y==="error",N=this._events;if(N!==void 0)se=se&&N.error===void 0;else if(!se)return!1;if(se){var $;if(W.length>0&&($=W[0]),$ instanceof Error)throw $;var ce=new Error("Unhandled error."+($?" ("+$.message+")":""));throw ce.context=$,ce}var oe=N[Y];if(oe===void 0)return!1;if(typeof oe=="function")F(oe,this,W);else{var ye=oe.length,be=b(oe,ye);for(X=0;X<ye;++X)F(be[X],this,W)}return!0},v.prototype.addListener=function(Y,W){return T(this,Y,W,!1)},v.prototype.on=v.prototype.addListener,v.prototype.prependListener=function(Y,W){return T(this,Y,W,!0)},v.prototype.once=function(Y,W){return O(W),this.on(Y,x(this,Y,W)),this},v.prototype.prependOnceListener=function(Y,W){return O(W),this.prependListener(Y,x(this,Y,W)),this},v.prototype.removeListener=function(Y,W){var X,se,N,$,ce;if(O(W),(se=this._events)===void 0)return this;if((X=se[Y])===void 0)return this;if(X===W||X.listener===W)--this._eventsCount==0?this._events=Object.create(null):(delete se[Y],se.removeListener&&this.emit("removeListener",Y,X.listener||W));else if(typeof X!="function"){for(N=-1,$=X.length-1;$>=0;$--)if(X[$]===W||X[$].listener===W){ce=X[$].listener,N=$;break}if(N<0)return this;N===0?X.shift():function(oe,ye){for(;ye+1<oe.length;ye++)oe[ye]=oe[ye+1];oe.pop()}(X,N),X.length===1&&(se[Y]=X[0]),se.removeListener!==void 0&&this.emit("removeListener",Y,ce||W)}return this},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(Y){var W,X,se;if((X=this._events)===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[Y]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete X[Y]),this;if(arguments.length===0){var N,$=Object.keys(X);for(se=0;se<$.length;++se)(N=$[se])!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(W=X[Y])=="function")this.removeListener(Y,W);else if(W!==void 0)for(se=W.length-1;se>=0;se--)this.removeListener(Y,W[se]);return this},v.prototype.listeners=function(Y){return _(this,Y,!0)},v.prototype.rawListeners=function(Y){return _(this,Y,!1)},v.listenerCount=function(Y,W){return typeof Y.listenerCount=="function"?Y.listenerCount(W):I.call(Y,W)},v.prototype.listenerCount=I,v.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(C){var g=Array.isArray,S=Object.keys,F=Object.prototype.hasOwnProperty;C.exports=function R(v,y){if(v===y)return!0;if(v&&y&&typeof v=="object"&&typeof y=="object"){var O,m,T,U=g(v),x=g(y);if(U&&x){if((m=v.length)!=y.length)return!1;for(O=m;O--!=0;)if(!R(v[O],y[O]))return!1;return!0}if(U!=x)return!1;var _=v instanceof Date,I=y instanceof Date;if(_!=I)return!1;if(_&&I)return v.getTime()==y.getTime();var b=v instanceof RegExp,j=y instanceof RegExp;if(b!=j)return!1;if(b&&j)return v.toString()==y.toString();var Y=S(v);if((m=Y.length)!==S(y).length)return!1;for(O=m;O--!=0;)if(!F.call(y,Y[O]))return!1;for(O=m;O--!=0;)if(!R(v[T=Y[O]],y[T]))return!1;return!0}return v!=v&&y!=y}},3362:function(C,g,S){(function(F,R,v,y,O){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[y.byName.ruby.qname]:null,V=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),he=M.contents.length-1;he>=0;he--)!V||"styleAttrs"in M.contents[he]&&y.byName.ruby.qname in M.contents[he].styleAttrs?m(M.contents[he]):delete M.contents[he]}function T(M,q,V,he){var fe=he&&he.timeContainer==="seq",He=0;he&&(He=fe&&V?V.end:he.begin),q.begin=q.explicit_begin?q.explicit_begin+He:He;var _t=q.begin,ot=null;if("sets"in q)for(var rt=0;rt<q.sets.length;rt++)T(M,q.sets[rt],ot,q),_t=q.timeContainer==="seq"?q.sets[rt].end:Math.max(_t,q.sets[rt].end),ot=q.sets[rt];if("contents"in q){if("contents"in q)for(var et=0;et<q.contents.length;et++)T(M,q.contents[et],ot,q),_t=q.timeContainer==="seq"?q.contents[et].end:Math.max(_t,q.contents[et].end),ot=q.contents[et]}else _t=fe?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,He+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=He+q.explicit_end:q.end=_t,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function U(M){this.node=M}function x(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new Y}function I(){this.styles={},this.initials={}}function b(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function j(){this.styleAttrs=null}function Y(){this.regions={}}function W(M,q){X.call(this,"image"),this.src=M,this.type=q}function X(M){this.kind=M}function se(M){this.id=M}function N(M){this.regionID=M}function $(M){this.styleAttrs=M}function ce(M){this.sets=M}function oe(M){this.contents=M}function ye(M,q,V){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=V}function be(){X.call(this,"body")}function $e(){X.call(this,"div")}function Ae(){X.call(this,"p")}function Ze(){X.call(this,"span")}function it(){X.call(this,"span")}function lt(){X.call(this,"br")}function Xe(){}function st(){}function wt(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function Oe(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function Qe(M,q){var V={};if(M!==null)for(var he in M.attributes){var fe=M.attributes[he].uri+" "+M.attributes[he].local,He=y.byQName[fe];if(He!==void 0){var _t=He.parse(M.attributes[he].value);_t!==null?(V[fe]=_t,He===y.byName.zIndex&&Ce(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):te(q,"Cannot parse styling attribute "+fe+" --> "+M.attributes[he].value)}}return V}function ct(M,q,V){for(var he in M.attributes)if(M.attributes[he].uri===q&&M.attributes[he].local===V)return M.attributes[he].value;return null}function Qt(M,q,V){var he,fe=null;return(he=/^(\d+(?:\.\d+)?)f$/.exec(V))!==null?q!==null&&(fe=parseFloat(he[1])/q):(he=/^(\d+(?:\.\d+)?)t$/.exec(V))!==null?M!==null&&(fe=parseFloat(he[1])/M):(he=/^(\d+(?:\.\d+)?)ms$/.exec(V))!==null?fe=parseFloat(he[1])/1e3:(he=/^(\d+(?:\.\d+)?)s$/.exec(V))!==null?fe=parseFloat(he[1]):(he=/^(\d+(?:\.\d+)?)h$/.exec(V))!==null?fe=3600*parseFloat(he[1]):(he=/^(\d+(?:\.\d+)?)m$/.exec(V))!==null?fe=60*parseFloat(he[1]):(he=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(V))!==null?fe=3600*parseInt(he[1])+60*parseInt(he[2])+parseFloat(he[3]):(he=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(V))!==null&&q!==null&&(fe=3600*parseInt(he[1])+60*parseInt(he[2])+parseInt(he[3])+(he[4]===null?0:parseInt(he[4])/q)),fe}function Vt(M,q,V){for(;q.styleRefs.length>0;){var he=q.styleRefs.pop();he in M.styles?(Vt(M,M.styles[he],V),Pt(M.styles[he].styleAttrs,q.styleAttrs)):te(V,"Non-existant style id referenced")}}function Tt(M,q,V,he){for(var fe=q.length-1;fe>=0;fe--){var He=q[fe];He in M.styles?Pt(M.styles[He].styleAttrs,V):te(he,"Non-existant style id referenced")}}function Pt(M,q){for(var V in M)M.hasOwnProperty(V)&&(V in q||(q[V]=M[V]))}function Ce(M,q){if(M&&M.warn&&M.warn(q))throw q}function te(M,q){if(M&&M.error&&M.error(q))throw q}function Fe(M,q){throw M&&M.fatal&&M.fatal(q),q}function P(M,q){for(var V,he=0,fe=M.length-1;he<=fe;){var He=M[V=Math.floor((he+fe)/2)];if(He<q)he=V+1;else{if(!(He>q))return{found:!0,index:V};fe=V-1}}return{found:!1,index:he}}F.fromXML=function(M,q,V){var he=R.parser(!0,{xmlns:!0}),fe=[],He=[],_t=[],ot=0,rt=null;he.onclosetag=function(Ct){if(fe[0]instanceof Xe)rt.head!==null&&rt.head.styling!==null&&Tt(rt.head.styling,fe[0].styleRefs,fe[0].styleAttrs,q),delete fe[0].styleRefs;else if(fe[0]instanceof I)for(var hn in fe[0].styles)fe[0].styles.hasOwnProperty(hn)&&Vt(fe[0],fe[0].styles[hn],q);else if(fe[0]instanceof Ae||fe[0]instanceof Ze){if(fe[0].contents.length>1){var $t,nn=[fe[0].contents[0]];for($t=1;$t<fe[0].contents.length;$t++)fe[0].contents[$t]instanceof it&&nn[nn.length-1]instanceof it?nn[nn.length-1].text+=fe[0].contents[$t].text:nn.push(fe[0].contents[$t]);fe[0].contents=nn}fe[0]instanceof Ze&&fe[0].contents.length===1&&fe[0].contents[0]instanceof it&&(fe[0].text=fe[0].contents[0].text,delete fe[0].contents)}else fe[0]instanceof U&&(fe[0].node.uri===v.ns_tt&&fe[0].node.local==="metadata"?ot--:ot>0&&V&&"onCloseTag"in V&&V.onCloseTag());_t.shift(),He.shift(),fe.shift()},he.ontext=function(Ct){if(fe[0]!==void 0)if(fe[0]instanceof Ze||fe[0]instanceof Ae){if(fe[0]instanceof Ze){var hn=fe[0].styleAttrs[y.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var $t=new it;$t.initFromText(rt,fe[0],Ct,He[0],_t[0],q),fe[0].contents.push($t)}else fe[0]instanceof U&&ot>0&&V&&"onText"in V&&V.onText(Ct)},he.onopentag=function(Ct){var hn=Ct.attributes["xml:space"];hn?_t.unshift(hn.value):_t.length===0?_t.unshift("default"):_t.unshift(_t[0]);var $t=Ct.attributes["xml:lang"];if($t?He.unshift($t.value):He.length===0?He.unshift(""):He.unshift(He[0]),Ct.uri===v.ns_tt)if(Ct.local==="tt")rt!==null&&Fe(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(rt=new x).initFromNode(Ct,He[0],q),fe.unshift(rt);else if(Ct.local==="head")fe[0]instanceof x||Fe(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),fe.unshift(rt.head);else if(Ct.local==="styling")fe[0]instanceof _||Fe(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),fe.unshift(rt.head.styling);else if(Ct.local==="style"){var nn;fe[0]instanceof I?((nn=new b).initFromNode(Ct,q),nn.id?rt.head.styling.styles[nn.id]=nn:te(q,"<style> element missing @id attribute"),fe.unshift(nn)):fe[0]instanceof Xe?((nn=new b).initFromNode(Ct,q),Pt(nn.styleAttrs,fe[0].styleAttrs),fe.unshift(nn)):Fe(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Ct.local==="initial"){var Ot;if(fe[0]instanceof I){for(var Un in(Ot=new j).initFromNode(Ct,q),Ot.styleAttrs)Ot.styleAttrs.hasOwnProperty(Un)&&(rt.head.styling.initials[Un]=Ot.styleAttrs[Un]);fe.unshift(Ot)}else Fe(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Ct.local==="layout")fe[0]instanceof _||Fe(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),fe.unshift(rt.head.layout);else if(Ct.local==="region"){fe[0]instanceof Y||Fe(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new Xe;gr.initFromNode(rt,Ct,He[0],q),!gr.id||gr.id in rt.head.layout.regions?te(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):rt.head.layout.regions[gr.id]=gr,fe.unshift(gr)}else if(Ct.local==="body"){fe[0]instanceof x||Fe(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),rt.body!==null&&Fe(q,"Second <body> element at "+this.line+","+this.column+")");var Pr=new be;Pr.initFromNode(rt,Ct,He[0],q),rt.body=Pr,fe.unshift(Pr)}else if(Ct.local==="div"){fe[0]instanceof $e||fe[0]instanceof be||Fe(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new $e;dr.initFromNode(rt,fe[0],Ct,He[0],q);var ei=dr.styleAttrs[y.byName.backgroundImage.qname];ei&&(dr.contents.push(new W(ei)),delete dr.styleAttrs[y.byName.backgroundImage.qname]),fe[0].contents.push(dr),fe.unshift(dr)}else if(Ct.local==="image"){fe[0]instanceof $e||Fe(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Ji=new W;Ji.initFromNode(rt,fe[0],Ct,He[0],q),fe[0].contents.push(Ji),fe.unshift(Ji)}else if(Ct.local==="p"){fe[0]instanceof $e||Fe(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Or=new Ae;Or.initFromNode(rt,fe[0],Ct,He[0],q),fe[0].contents.push(Or),fe.unshift(Or)}else if(Ct.local==="span"){fe[0]instanceof Ze||fe[0]instanceof Ae||Fe(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var eo=new Ze;eo.initFromNode(rt,fe[0],Ct,He[0],_t[0],q),fe[0].contents.push(eo),fe.unshift(eo)}else if(Ct.local==="br"){fe[0]instanceof Ze||fe[0]instanceof Ae||Fe(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var _i=new lt;_i.initFromNode(rt,fe[0],Ct,He[0],q),fe[0].contents.push(_i),fe.unshift(_i)}else if(Ct.local==="set"){fe[0]instanceof Ze||fe[0]instanceof Ae||fe[0]instanceof $e||fe[0]instanceof be||fe[0]instanceof Xe||fe[0]instanceof lt||Fe(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Mi=new st;Mi.initFromNode(rt,fe[0],Ct,q),fe[0].sets.push(Mi),fe.unshift(Mi)}else fe.unshift(new U(Ct));else fe.unshift(new U(Ct));if(fe[0]instanceof U){if(Ct.uri===v.ns_tt&&Ct.local==="metadata")ot++;else if(ot>0&&V&&"onOpenTag"in V){var zi=[];for(var to in Ct.attributes)zi[Ct.attributes[to].uri+" "+Ct.attributes[to].local]={uri:Ct.attributes[to].uri,local:Ct.attributes[to].local,value:Ct.attributes[to].value};V.onOpenTag(Ct.uri,Ct.local,zi)}}},he.write(M).close(),delete rt.head.styling.styles;var et=!1;for(var ft in rt.head.layout.regions)if(rt.head.layout.regions.hasOwnProperty(ft)){et=!0;break}if(!et){var yt=Xe.prototype.createDefaultRegion(rt.lang);rt.head.layout.regions[yt.id]=yt}for(var Et in rt.head.layout.regions)rt.head.layout.regions.hasOwnProperty(Et)&&T(rt,rt.head.layout.regions[Et],null,null);return rt.body&&T(rt,rt.body,null,null),rt.body&&m(rt.body),rt},x.prototype.initFromNode=function(M,q,V){var he=function(ot,rt){var et=ct(ot,v.ns_ttp,"cellResolution"),ft=15,yt=32;if(et!==null){var Et=/(\d+) (\d+)/.exec(et);Et!==null?(yt=parseInt(Et[1]),ft=parseInt(Et[2])):Ce(rt,"Malformed cellResolution value (using initial value instead)")}return{w:yt,h:ft}}(M,V);this.cellLength={h:new O.ComputedLength(0,1/he.h),w:new O.ComputedLength(1/he.w,0)};var fe=function(ot,rt){var et,ft=ct(ot,v.ns_ttp,"frameRate"),yt=30;ft!==null&&((et=/(\d+)/.exec(ft))!==null?yt=parseInt(et[1]):Ce(rt,"Malformed frame rate attribute (using initial value instead)"));var Et=ct(ot,v.ns_ttp,"frameRateMultiplier"),Ct=1;Et!==null&&((et=/(\d+) (\d+)/.exec(Et))!==null?Ct=parseInt(et[1])/parseInt(et[2]):Ce(rt,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=Ct*yt,$t=1,nn=ct(ot,v.ns_ttp,"tickRate");return nn===null?ft!==null&&($t=hn):(et=/(\d+)/.exec(nn))!==null?$t=parseInt(et[1]):Ce(rt,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:$t}}(M,V);this.effectiveFrameRate=fe.effectiveFrameRate,this.tickRate=fe.tickRate,this.aspectRatio=function(ot,rt){var et=ct(ot,v.ns_ittp,"aspectRatio");et===null&&(et=ct(ot,v.ns_ttp,"displayAspectRatio"));var ft=null;if(et!==null){var yt=/(\d+)\s+(\d+)/.exec(et);if(yt!==null){var Et=parseInt(yt[1]),Ct=parseInt(yt[2]);Et!==0&&Ct!==0?ft=Et/Ct:te(rt,"Illegal aspectRatio values (ignoring)")}else te(rt,"Malformed aspectRatio attribute (ignoring)")}return ft}(M,V);var He=ct(M,v.ns_ttp,"timeBase");He!==null&&He!=="media"&&Fe(V,"Unsupported time base");var _t=function(ot,rt){var et=ct(ot,v.ns_tts,"extent");if(et===null)return null;var ft=et.split(" ");if(ft.length!==2)return Ce(rt,"Malformed extent (ignoring)"),null;var yt=O.parseLength(ft[0]),Et=O.parseLength(ft[1]);return Et&&yt?{h:Et,w:yt}:(Ce(rt,"Malformed extent values (ignoring)"),null)}(M,V);_t===null?this.pxLength={h:null,w:null}:(_t.h.unit==="px"&&_t.w.unit==="px"||Fe(V,"Extent on TT must be in px or absent"),this.pxLength={h:new O.ComputedLength(0,1/_t.h.value),w:new O.ComputedLength(1/_t.w.value,0)}),this.dimensions={h:new O.ComputedLength(0,1),w:new O.ComputedLength(1,0)},this.lang=q},x.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=P(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var V=P(this.events,M.end);V.found||this.events.splice(V.index,0,M.end)}}},x.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},x.prototype.getMediaTimeEvents=function(){return this.events},b.prototype.initFromNode=function(M,q){this.id=wt(M),this.styleAttrs=Qe(M,q),this.styleRefs=Oe(M)},j.prototype.initFromNode=function(M,q){for(var V in this.styleAttrs={},M.attributes)if(M.attributes[V].uri===v.ns_itts||M.attributes[V].uri===v.ns_ebutts||M.attributes[V].uri===v.ns_tts){var he=M.attributes[V].uri+" "+M.attributes[V].local;this.styleAttrs[he]=M.attributes[V].value}},W.prototype.initFromNode=function(M,q,V,he,fe){this.src="src"in V.attributes?V.attributes.src.value:null,this.src||te(fe,"Invalid image@src attribute"),this.type="type"in V.attributes?V.attributes.type.value:null,this.type||te(fe,"Invalid image@type attribute"),$.prototype.initFromNode.call(this,M,q,V,fe),ye.prototype.initFromNode.call(this,M,q,V,fe),ce.prototype.initFromNode.call(this,M,q,V,fe),N.prototype.initFromNode.call(this,M,q,V,fe),this.lang=he},se.prototype.initFromNode=function(M,q,V,he){this.id=wt(V)},N.prototype.initFromNode=function(M,q,V,he){this.regionID=function(fe){return fe&&"region"in fe.attributes?fe.attributes.region.value:""}(V)},$.prototype.initFromNode=function(M,q,V,he){this.styleAttrs=Qe(V,he),M.head!==null&&M.head.styling!==null&&Tt(M.head.styling,Oe(V),this.styleAttrs,he)},ce.prototype.initFromNode=function(M,q,V,he){this.sets=[]},oe.prototype.initFromNode=function(M,q,V,he){this.contents=[]},ye.prototype.initFromNode=function(M,q,V,he){var fe=function(He,_t,ot,rt){var et=null;ot&&"begin"in ot.attributes&&(et=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.begin.value))===null&&Ce(rt,"Malformed begin value "+ot.attributes.begin.value+" (using 0)");var ft=null;ot&&"dur"in ot.attributes&&(ft=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.dur.value))===null&&Ce(rt,"Malformed dur value "+ot.attributes.dur.value+" (ignoring)");var yt=null;return ot&&"end"in ot.attributes&&(yt=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.end.value))===null&&Ce(rt,"Malformed end value (ignoring)"),{explicit_begin:et,explicit_end:yt,explicit_dur:ft}}(M,0,V,he);this.explicit_begin=fe.explicit_begin,this.explicit_end=fe.explicit_end,this.explicit_dur=fe.explicit_dur,this.timeContainer=function(He,_t){var ot=He&&"timeContainer"in He.attributes?He.attributes.timeContainer.value:null;return ot&&ot!=="par"?ot==="seq"?"seq":(te(_t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(V,he)},be.prototype.initFromNode=function(M,q,V,he){$.prototype.initFromNode.call(this,M,null,q,he),ye.prototype.initFromNode.call(this,M,null,q,he),ce.prototype.initFromNode.call(this,M,null,q,he),N.prototype.initFromNode.call(this,M,null,q,he),oe.prototype.initFromNode.call(this,M,null,q,he),this.lang=V},$e.prototype.initFromNode=function(M,q,V,he,fe){$.prototype.initFromNode.call(this,M,q,V,fe),ye.prototype.initFromNode.call(this,M,q,V,fe),ce.prototype.initFromNode.call(this,M,q,V,fe),N.prototype.initFromNode.call(this,M,q,V,fe),oe.prototype.initFromNode.call(this,M,q,V,fe),this.lang=he},Ae.prototype.initFromNode=function(M,q,V,he,fe){$.prototype.initFromNode.call(this,M,q,V,fe),ye.prototype.initFromNode.call(this,M,q,V,fe),ce.prototype.initFromNode.call(this,M,q,V,fe),N.prototype.initFromNode.call(this,M,q,V,fe),oe.prototype.initFromNode.call(this,M,q,V,fe),this.lang=he},Ze.prototype.initFromNode=function(M,q,V,he,fe,He){$.prototype.initFromNode.call(this,M,q,V,He),ye.prototype.initFromNode.call(this,M,q,V,He),ce.prototype.initFromNode.call(this,M,q,V,He),N.prototype.initFromNode.call(this,M,q,V,He),oe.prototype.initFromNode.call(this,M,q,V,He),this.space=fe,this.lang=he},it.prototype.initFromText=function(M,q,V,he,fe,He){ye.prototype.initFromNode.call(this,M,q,null,He),this.text=V,this.space=fe,this.lang=he},lt.prototype.initFromNode=function(M,q,V,he,fe){N.prototype.initFromNode.call(this,M,q,V,fe),ye.prototype.initFromNode.call(this,M,q,V,fe),this.lang=he},Xe.prototype.createDefaultRegion=function(M){var q=new Xe;return se.call(q,""),$.call(q,{}),ce.call(q,[]),ye.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},Xe.prototype.initFromNode=function(M,q,V,he){se.prototype.initFromNode.call(this,M,null,q,he),ye.prototype.initFromNode.call(this,M,null,q,he),ce.prototype.initFromNode.call(this,M,null,q,he),this.styleAttrs=Qe(q,he),this.styleRefs=Oe(q),this.lang=V},st.prototype.initFromNode=function(M,q,V,he){ye.prototype.initFromNode.call(this,M,q,V,he);var fe=Qe(V,he);for(var He in this.qname=null,this.value=null,fe)if(fe.hasOwnProperty(He)){if(this.qname){te(he,"More than one style specified on set");break}this.qname=He,this.value=fe[He]}}})(g,typeof sax>"u"?S(5378):sax,typeof imscNames>"u"?S(210):imscNames,typeof imscStyles>"u"?S(6811):imscStyles,typeof imscUtils>"u"?S(5926):imscUtils)},506:function(C,g,S){var F=/firefox/i.test(navigator.userAgent);(function(R,v,y){function O(oe,ye,be,$e){var Ae;if(be.kind==="region")(Ae=document.createElement("div")).style.position="absolute";else if(be.kind==="body")Ae=document.createElement("div");else if(be.kind==="div")Ae=document.createElement("div");else if(be.kind==="image"){if(Ae=document.createElement("img"),oe.imgResolver!==null&&be.src!==null){var Ze=oe.imgResolver(be.src,Ae);Ze&&(Ae.src=Ze),Ae.height=oe.regionH,Ae.width=oe.regionW}}else if(be.kind==="p")Ae=document.createElement("p");else if(be.kind==="span")if(be.styleAttrs[y.byName.ruby.qname]==="container")Ae=document.createElement("ruby"),oe.ruby=!0;else if(be.styleAttrs[y.byName.ruby.qname]==="base")Ae=document.createElement("span");else if(be.styleAttrs[y.byName.ruby.qname]==="text")Ae=document.createElement("rt");else if(be.styleAttrs[y.byName.ruby.qname]==="baseContainer")Ae=document.createElement("rbc");else if(be.styleAttrs[y.byName.ruby.qname]==="textContainer")Ae=document.createElement("rtc");else{if(be.styleAttrs[y.byName.ruby.qname]==="delimiter")return;Ae=document.createElement("span")}else be.kind==="br"&&(Ae=document.createElement("br"));if(Ae){if(be.lang&&(be.kind!=="region"&&be.lang===$e.lang||(Ae.lang=be.lang)),ye.appendChild(Ae),Ae.style.margin="0",be.kind==="region"){var it=be.styleAttrs[y.byName.writingMode.qname];it==="lrtb"||it==="lr"?(oe.ipd="lr",oe.bpd="tb"):it==="rltb"||it==="rl"?(oe.ipd="rl",oe.bpd="tb"):it==="tblr"?(oe.ipd="tb",oe.bpd="lr"):it!=="tbrl"&&it!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(be.kind==="p"&&oe.bpd==="tb"){var lt=be.styleAttrs[y.byName.direction.qname];oe.ipd=lt==="ltr"?"lr":"rl"}for(var Xe=0;Xe<j.length;Xe++){var st=j[Xe],wt=be.styleAttrs[st.qname];wt!==void 0&&st.map!==null&&st.map(oe,Ae,be,wt)}var Oe=Ae,Qe=be.styleAttrs[y.byName.linePadding.qname];if(Qe&&!Qe.isZero()){var ct=Qe.toUsedLength(oe.w,oe.h);if(ct>0){var Qt=Math.ceil(ct)+"px";oe.bpd==="tb"?(Oe.style.paddingLeft=Qt,Oe.style.paddingRight=Qt):(Oe.style.paddingTop=Qt,Oe.style.paddingBottom=Qt),oe.lp=Qe}}var Vt=be.styleAttrs[y.byName.multiRowAlign.qname];if(Vt&&Vt!=="auto"){var Tt=document.createElement("span");Tt.style.display="inline-block",Tt.style.textAlign=Vt,Ae.appendChild(Tt),Oe=Tt,oe.mra=Vt}var Pt=be.styleAttrs[y.byName.rubyReserve.qname];if(Pt&&Pt[0]!=="none"&&(oe.rubyReserve=Pt),be.styleAttrs[y.byName.fillLineGap.qname]&&(oe.flg=!0),be.kind==="span"&&be.text){var Ce=be.styleAttrs[y.byName.textEmphasis.qname];if(Ce&&Ce.style!=="none"&&(oe.textEmphasis=!0),y.byName.textCombine.qname in be.styleAttrs&&be.styleAttrs[y.byName.textCombine.qname]==="all")Ae.textContent=be.text,Ae._isd_element=be,Ce&&I(oe,Ae,0,Ce);else for(var te="",Fe=0;Fe<be.text.length;Fe++){te+=be.text.charAt(Fe);var P=be.text.charCodeAt(Fe);if(P<55296||P>56319||Fe===be.text.length-1){var M=document.createElement("span");M.textContent=te,Ce&&I(oe,M,0,Ce),Ae.appendChild(M),te="",M._isd_element=be}}}if("contents"in be)for(var q=0;q<be.contents.length;q++)O(oe,Oe,be.contents[q],be);var V=[];if(be.kind==="p"&&(_(oe,Oe,V,null),oe.rubyReserve&&(function(ot,rt){for(var et=0;et<ot.length;et++){var ft,yt,Et=document.createElement("ruby"),Ct=document.createElement("span");Ct.textContent="​",Et.appendChild(Ct);var hn,$t=rt.rubyReserve[1].toUsedLength(rt.w,rt.h)+"px";rt.rubyReserve[0]==="both"||rt.rubyReserve[0]==="outside"&&ot.length==1?((ft=document.createElement("rtc")).style[se]=X?"after":"under",ft.textContent="​",ft.style.fontSize=$t,(yt=document.createElement("rtc")).style[se]=X?"before":"over",yt.textContent="​",yt.style.fontSize=$t,Et.appendChild(ft),Et.appendChild(yt)):((ft=document.createElement("rtc")).textContent="​",ft.style.fontSize=$t,hn=rt.rubyReserve[0]==="after"||rt.rubyReserve[0]==="outside"&&et>0?X?"after":rt.bpd==="tb"||rt.bpd==="rl"?"under":"over":X?"before":rt.bpd==="tb"||rt.bpd==="rl"?"over":"under",ft.style[se]=hn,Et.appendChild(ft));for(var nn=null,Ot=0;Ot<ot[et].rbc.length;Ot++)if(ot[et].rbc[Ot].localName==="ruby"){nn=ot[et].rbc[Ot];for(var Un=0;Un<nn.style.length;Un++)Et.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||ot[et].elements[0].node).parentElement.insertBefore(Et,nn)}}(V,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].rbc.length;ft++){var yt;ot[et].rbc[ft].style[se]||(yt=X?et===0?"before":"after":rt.bpd==="tb"||rt.bpd==="rl"?et===0?"over":"under":et===0?"under":"over",ot[et].rbc[ft].style[se]=yt)}}(V,oe),oe.ruby=null),oe.textEmphasis&&(function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].te.length;ft++){var yt;ot[et].te[ft].style[$]&&ot[et].te[ft].style[$]!=="none"||(yt=rt.bpd==="tb"?et===0?"left over":"left under":rt.bpd==="rl"?et===0?"right under":"left under":et===0?"left under":"right under",ot[et].te[ft].style[$]=yt)}}(V,oe),oe.textEmphasis=null),oe.mra&&(function(ot){for(var rt=0;rt<ot.length-1;rt++){var et=ot[rt].elements.length;if(et!==0&&ot[rt].br===!1){var ft=document.createElement("br"),yt=ot[rt].elements[et-1].node;yt.parentElement.insertBefore(ft,yt.nextSibling)}}}(V),oe.mra=null),oe.lp&&(function(ot,rt,et){if(ot!==null)for(var ft=0;ft<ot.length;ft++){var yt=ot[ft].elements.length,Et=Math.ceil(rt)+"px",Ct="-"+Math.ceil(rt)+"px";if(yt!==0){var hn=ot[ft].elements[ot[ft].start_elem],$t=ot[ft].elements[ot[ft].end_elem];if(hn===$t){var nn=hn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}et.ipd==="lr"?(hn.node.style.marginLeft=Ct,hn.node.style.paddingLeft=Et):et.ipd==="rl"?(hn.node.style.paddingRight=Et,hn.node.style.marginRight=Ct):et.ipd==="tb"&&(hn.node.style.paddingTop=Et,hn.node.style.marginTop=Ct),et.ipd==="lr"?(F||($t.node.style.marginRight=Ct),$t.node.style.paddingRight=Et):et.ipd==="rl"?($t.node.style.paddingLeft=Et,F||($t.node.style.marginLeft=Ct)):et.ipd==="tb"&&($t.node.style.paddingBottom=Et,$t.node.style.marginBottom=Ct)}}}(V,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=ot[et],yt=1;yt<ft.elements.length;){var Et=ft.elements[yt-1],Ct=ft.elements[yt];T(Et.node,Ct.node,rt)?ft.elements.splice(yt,1):yt++}for(var hn,$t,nn=[],Ot=0;Ot<ot.length;Ot++)for(var Un=0;Un<ot[Ot].elements.length;Un++)($t=m(hn=ot[Ot].elements[Un].node,nn,!1))&&(hn.style.backgroundColor=$t);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(V,oe),oe.flg)){var he=x(Oe.getBoundingClientRect(),oe);(function(ot,rt,et,ft,yt){for(var Et=Math.sign(et-rt),Ct=0;Ct<=ot.length;Ct++){var hn,$t,nn,Ot;if(hn=Ct===0?Math.round(rt):Ct===ot.length?Math.round(et):Math.round((ot[Ct-1].after+ot[Ct].before)/2),Ct>0&&ot[Ct-1])for(nn=0;nn<ot[Ct-1].elements.length;nn++)$t=Et*(hn-(Ot=ot[Ct-1].elements[nn]).after)+"px",ft.bpd==="lr"?Ot.node.style.paddingRight=$t:ft.bpd==="rl"?Ot.node.style.paddingLeft=$t:ft.bpd==="tb"&&(Ot.node.style.paddingBottom=$t);if(Ct<ot.length)for(nn=0;nn<ot[Ct].elements.length;nn++)$t=Et*((Ot=ot[Ct].elements[nn]).before-hn)+"px",ft.bpd==="lr"?Ot.node.style.paddingLeft=$t:ft.bpd==="rl"?Ot.node.style.paddingRight=$t:ft.bpd==="tb"&&(Ot.node.style.paddingTop=$t)}})(V,he.before,he.after,oe),oe.flg=null}if(be.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&be.contents.length>0&&be.styleAttrs[y.byName.displayAlign.qname]==="after"){_(oe,Oe,V,null);var fe=new U(be.id===""?"_":be.id,V);if(oe.currentISDState[fe.id]=fe,oe.previousISDState&&fe.id in oe.previousISDState&&oe.previousISDState[fe.id].plist.length>0&&fe.plist.length>1&&fe.plist[fe.plist.length-2].text===oe.previousISDState[fe.id].plist[oe.previousISDState[fe.id].plist.length-1].text){var He=Ae.firstElementChild,_t=fe.plist[fe.plist.length-1].after-fe.plist[fe.plist.length-1].before;He.style.bottom="-"+_t+"px",He.style.transition="transform 0.4s",He.style.position="relative",He.style.transform="translateY(-"+_t+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+be.kind)}function m(oe,ye,be){return oe.style.backgroundColor?(be&&!ye.includes(oe)&&ye.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,ye,!0):void 0}function T(oe,ye,be){if(oe.tagName==="SPAN"&&ye.tagName==="SPAN"&&oe._isd_element===ye._isd_element){if(!oe._isd_element)return ce(be.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=ye.textContent;for(var $e=0;$e<ye.style.length;$e++){var Ae=ye.style[$e];(Ae.indexOf("border")>=0||Ae.indexOf("padding")>=0||Ae.indexOf("margin")>=0)&&(oe.style[Ae]=ye.style[Ae])}return ye.parentElement.removeChild(ye),!0}return!1}function U(oe,ye){this.id=oe,this.plist=ye}function x(oe,ye){var be={before:null,after:null,start:null,end:null};return ye.bpd==="tb"?(be.before=oe.top,be.after=oe.bottom,ye.ipd==="lr"?(be.start=oe.left,be.end=oe.right):(be.start=oe.right,be.end=oe.left)):ye.bpd==="lr"?(be.before=oe.left,be.after=oe.right,be.start=oe.top,be.end=oe.bottom):ye.bpd==="rl"&&(be.before=oe.right,be.after=oe.left,be.start=oe.top,be.end=oe.bottom),be}function _(oe,ye,be,$e){if(ye.localName!=="rt"&&ye.localName!=="rtc"){var Ae,Ze,it,lt,Xe=ye.style.backgroundColor||$e;if(ye.childElementCount===0)if(ye.localName==="span"||ye.localName==="rb"){var st=x(ye.getBoundingClientRect(),oe);if(be.length!==0&&(Ae=st.before,Ze=st.after,it=be[be.length-1].before,Ze<(lt=be[be.length-1].after)&&Ae>it||lt<=Ze&&it>=Ae)){var wt=Math.sign(st.after-st.before),Oe=Math.sign(st.end-st.start);wt*(st.before-be[be.length-1].before)<0&&(be[be.length-1].before=st.before),wt*(st.after-be[be.length-1].after)>0&&(be[be.length-1].after=st.after),Oe*(st.start-be[be.length-1].start)<0&&(be[be.length-1].start=st.start,be[be.length-1].start_elem=be[be.length-1].elements.length),Oe*(st.end-be[be.length-1].end)>0&&(be[be.length-1].end=st.end,be[be.length-1].end_elem=be[be.length-1].elements.length)}else be.push({before:st.before,after:st.after,start:st.start,end:st.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});be[be.length-1].text+=ye.textContent,be[be.length-1].elements.push({node:ye,bgcolor:Xe,before:st.before,after:st.after})}else ye.localName==="br"&&be.length!==0&&(be[be.length-1].br=!0);else for(var Qe=ye.firstChild;Qe;)Qe.nodeType===Node.ELEMENT_NODE&&(_(oe,Qe,be,Xe),Qe.localName==="ruby"||Qe.localName==="rtc"?be.length>0&&be[be.length-1].rbc.push(Qe):Qe.localName==="span"&&Qe.style[N]&&Qe.style[N]!=="none"&&be.length>0&&be[be.length-1].te.push(Qe)),Qe=Qe.nextSibling}}function I(oe,ye,be,$e){var Ae;$e.style!=="none"&&($e.style==="auto"?ye.style[N]="filled":ye.style[N]=$e.style+" "+$e.symbol,($e.position==="before"||$e.position==="after")&&(Ae=oe.bpd==="tb"?$e.position==="before"?"left over":"left under":oe.bpd==="rl"?$e.position==="before"?"right under":"left under":$e.position==="before"?"left under":"right under",ye.style[$]=Ae))}function b(oe,ye){this.qname=oe,this.map=ye}R.render=function(oe,ye,be,$e,Ae,Ze,it,lt,Xe){var st=$e||ye.clientHeight,wt=Ae||ye.clientWidth;if(oe.aspectRatio!==null){var Oe=st*oe.aspectRatio;Oe>wt?st=Math.round(wt/oe.aspectRatio):wt=Oe}var Qe=document.createElement("div");Qe.style.position="relative",Qe.style.width=wt+"px",Qe.style.height=st+"px",Qe.style.margin="auto",Qe.style.top=0,Qe.style.bottom=0,Qe.style.left=0,Qe.style.right=0,Qe.style.zIndex=0;var ct={h:st,w:wt,regionH:null,regionW:null,imgResolver:be,displayForcedOnlyMode:Ze||!1,isd:oe,errorHandler:it,previousISDState:lt,enableRollUp:Xe||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ye.appendChild(Qe),"contents"in oe)for(var Qt=0;Qt<oe.contents.length;Qt++)O(ct,Qe,oe.contents[Qt],oe);return ct.currentISDState};for(var j=[new b("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,ye,be,$e){$e[3]!==0&&(ye.style.backgroundColor="rgba("+$e[0].toString()+","+$e[1].toString()+","+$e[2].toString()+","+($e[3]/255).toString()+")")}),new b("http://www.w3.org/ns/ttml#styling color",function(oe,ye,be,$e){ye.style.color="rgba("+$e[0].toString()+","+$e[1].toString()+","+$e[2].toString()+","+($e[3]/255).toString()+")"}),new b("http://www.w3.org/ns/ttml#styling direction",function(oe,ye,be,$e){ye.style.direction=$e}),new b("http://www.w3.org/ns/ttml#styling display",function(oe,ye,be,$e){}),new b("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,ye,be,$e){ye.style.display="flex",ye.style.flexDirection="column",$e==="before"?ye.style.justifyContent="flex-start":$e==="center"?ye.style.justifyContent="center":$e==="after"&&(ye.style.justifyContent="flex-end")}),new b("http://www.w3.org/ns/ttml#styling extent",function(oe,ye,be,$e){oe.regionH=$e.h.toUsedLength(oe.w,oe.h),oe.regionW=$e.w.toUsedLength(oe.w,oe.h);var Ae=0,Ze=0,it=be.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];it&&(Ae=it[0].toUsedLength(oe.w,oe.h)+it[2].toUsedLength(oe.w,oe.h),Ze=it[1].toUsedLength(oe.w,oe.h)+it[3].toUsedLength(oe.w,oe.h)),ye.style.height=oe.regionH-Ae+"px",ye.style.width=oe.regionW-Ze+"px"}),new b("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,ye,be,$e){for(var Ae=[],Ze=0;Ze<$e.length;Ze++)$e[Ze]=$e[Ze].trim(),$e[Ze]==="monospaceSerif"?(Ae.push("Courier New"),Ae.push('"Liberation Mono"'),Ae.push("Courier"),Ae.push("monospace")):$e[Ze]==="proportionalSansSerif"?(Ae.push("Arial"),Ae.push("Helvetica"),Ae.push('"Liberation Sans"'),Ae.push("sans-serif")):$e[Ze]==="monospace"?Ae.push("monospace"):$e[Ze]==="sansSerif"?Ae.push("sans-serif"):$e[Ze]==="serif"?Ae.push("serif"):$e[Ze]==="monospaceSansSerif"?(Ae.push("Consolas"),Ae.push("monospace")):$e[Ze]==="proportionalSerif"?Ae.push("serif"):Ae.push($e[Ze]);if(Ae.length>0){for(var it=[Ae[0]],lt=1;lt<Ae.length;lt++)it.indexOf(Ae[lt])==-1&&it.push(Ae[lt]);Ae=it}ye.style.fontFamily=Ae.join(",")}),new b("http://www.w3.org/ns/ttml#styling shear",function(oe,ye,be,$e){if($e!==0){var Ae=-.9*$e;oe.bpd==="tb"?ye.style.transform="skewX("+Ae+"deg)":ye.style.transform="skewY("+Ae+"deg)"}}),new b("http://www.w3.org/ns/ttml#styling fontSize",function(oe,ye,be,$e){ye.style.fontSize=$e.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,ye,be,$e){ye.style.fontStyle=$e}),new b("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,ye,be,$e){ye.style.fontWeight=$e}),new b("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,ye,be,$e){ye.style.lineHeight=$e==="normal"?"normal":$e.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling opacity",function(oe,ye,be,$e){ye.style.opacity=$e}),new b("http://www.w3.org/ns/ttml#styling origin",function(oe,ye,be,$e){ye.style.top=$e.h.toUsedLength(oe.w,oe.h)+"px",ye.style.left=$e.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling overflow",function(oe,ye,be,$e){ye.style.overflow=$e}),new b("http://www.w3.org/ns/ttml#styling padding",function(oe,ye,be,$e){var Ae=[];Ae[0]=$e[0].toUsedLength(oe.w,oe.h)+"px",Ae[1]=$e[3].toUsedLength(oe.w,oe.h)+"px",Ae[2]=$e[2].toUsedLength(oe.w,oe.h)+"px",Ae[3]=$e[1].toUsedLength(oe.w,oe.h)+"px",ye.style.padding=Ae.join(" ")}),new b("http://www.w3.org/ns/ttml#styling position",function(oe,ye,be,$e){ye.style.top=$e.h.toUsedLength(oe.w,oe.h)+"px",ye.style.left=$e.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,ye,be,$e){ye.style.rubyAlign=$e==="spaceAround"?"space-around":"center"}),new b("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,ye,be,$e){var Ae;$e!=="before"&&$e!=="after"||(Ae=X?$e:oe.bpd==="tb"||oe.bpd==="rl"?$e==="before"?"over":"under":$e==="before"?"under":"over",ye.parentElement.style[se]=Ae)}),new b("http://www.w3.org/ns/ttml#styling showBackground",null),new b("http://www.w3.org/ns/ttml#styling textAlign",function(oe,ye,be,$e){var Ae;Ae=$e==="start"?oe.ipd==="rl"?"right":"left":$e==="end"?oe.ipd==="rl"?"left":"right":$e,ye.style.textAlign=Ae}),new b("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,ye,be,$e){ye.style.textDecoration=$e.join(" ").replace("lineThrough","line-through")}),new b("http://www.w3.org/ns/ttml#styling textOutline",function(oe,ye,be,$e){}),new b("http://www.w3.org/ns/ttml#styling textShadow",function(oe,ye,be,$e){var Ae=be.styleAttrs[y.byName.textOutline.qname];if($e==="none"&&Ae==="none")ye.style.textShadow="";else{var Ze=[];if(Ae!=="none"){var it="rgba("+Ae.color[0].toString()+","+Ae.color[1].toString()+","+Ae.color[2].toString()+","+(Ae.color[3]/255).toString()+")";Ze.push("1px 1px 1px "+it),Ze.push("-1px 1px 1px "+it),Ze.push("1px -1px 1px "+it),Ze.push("-1px -1px 1px "+it)}if($e!=="none")for(var lt=0;lt<$e.length;lt++)Ze.push($e[lt].x_off.toUsedLength(oe.w,oe.h)+"px "+$e[lt].y_off.toUsedLength(oe.w,oe.h)+"px "+$e[lt].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+$e[lt].color[0].toString()+","+$e[lt].color[1].toString()+","+$e[lt].color[2].toString()+","+($e[lt].color[3]/255).toString()+")");ye.style.textShadow=Ze.join(",")}}),new b("http://www.w3.org/ns/ttml#styling textCombine",function(oe,ye,be,$e){ye.style.textCombineUpright=$e}),new b("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,ye,be,$e){}),new b("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,ye,be,$e){var Ae;Ae=$e==="bidiOverride"?"bidi-override":$e,ye.style.unicodeBidi=Ae}),new b("http://www.w3.org/ns/ttml#styling visibility",function(oe,ye,be,$e){ye.style.visibility=$e}),new b("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,ye,be,$e){$e==="wrap"?be.space==="preserve"?ye.style.whiteSpace="pre-wrap":ye.style.whiteSpace="normal":be.space==="preserve"?ye.style.whiteSpace="pre":ye.style.whiteSpace="noWrap"}),new b("http://www.w3.org/ns/ttml#styling writingMode",function(oe,ye,be,$e){$e==="lrtb"||$e==="lr"||$e==="rltb"||$e==="rl"?ye.style.writingMode="horizontal-tb":$e==="tblr"?ye.style.writingMode="vertical-lr":$e!=="tbrl"&&$e!=="tb"||(ye.style.writingMode="vertical-rl")}),new b("http://www.w3.org/ns/ttml#styling zIndex",function(oe,ye,be,$e){ye.style.zIndex=$e}),new b("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,ye,be,$e){oe.displayForcedOnlyMode&&$e===!1&&(ye.style.visibility="hidden")})],Y={},W=0;W<j.length;W++)Y[j[W].qname]=j[W];var X="webkitRubyPosition"in window.getComputedStyle(document.documentElement),se=X?"webkitRubyPosition":"rubyPosition",N="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",$="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,ye){if(oe&&oe.error&&oe.error(ye))throw ye}})(g,typeof imscNames>"u"?S(210):imscNames,typeof imscStyles>"u"?S(6811):imscStyles,typeof imscUtils>"u"?S(5926):imscUtils)},4080:function(C,g,S){(function(F,R,v,y){F.generateISD=function(b,j,Y){var W,X=new x(b),se={},N={},$=b.head.styling.initials[v.byName.showBackground.qname],ce=b.head.styling.initials[v.byName.backgroundColor.qname];for(var oe in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(oe)){var ye=b.head.layout.regions[oe],be=ye.styleAttrs[v.byName.showBackground.qname]||$,$e=ye.styleAttrs[v.byName.backgroundColor.qname]||ce;N[ye.id]=(be==="always"||be===void 0)&&$e!==void 0&&!(j<ye.begin||j>=ye.end)}for(var Ae in b.body&&b.body.regionID&&(N[b.body.regionID]=!0),W=b.body!==null?function it(lt,Xe){if(Xe.contents){var st={};for(var wt in Xe)Xe.hasOwnProperty(wt)&&(st[wt]=Xe[wt]);return st.contents=[],Xe.contents.filter(function(Oe){return!(lt<Oe.begin||lt>=Oe.end)}).forEach(function(Oe){var Qe=it(lt,Oe);Qe.regionID&&(N[Qe.regionID]=!0),Qe!==null&&st.contents.push(Qe)}),st}return Xe}(j,b.body):null,N[""]!==void 0&&(N[""]=!0),N)if(N[Ae]){var Ze=m(b,j,b.head.layout.regions[Ae],W,null,"",b.head.layout.regions[Ae],Y,se);Ze!==null&&X.contents.push(Ze.element)}return X};var O=[v.byName.color.qname,v.byName.textCombine.qname,v.byName.textDecoration.qname,v.byName.textEmphasis.qname,v.byName.textOutline.qname,v.byName.textShadow.qname];function m(b,j,Y,W,X,se,N,$,ce){if(j<N.begin||j>=N.end)return null;var oe="regionID"in N&&N.regionID!==""?N.regionID:se;if(X!==null&&oe!==Y.id&&(!("contents"in N)||"contents"in N&&N.contents.length===0||oe!==""))return null;var ye=new _(N);if("sets"in N)for(var be=0;be<N.sets.length;be++)j<N.sets[be].begin||j>=N.sets[be].end||(ye.styleAttrs[N.sets[be].qname]=N.sets[be].value);var $e={};for(var Ae in ye.styleAttrs)if(ye.styleAttrs.hasOwnProperty(Ae)&&($e[Ae]=!0,ye.kind==="region"&&Ae===v.byName.writingMode.qname&&!(v.byName.direction.qname in ye.styleAttrs))){var Ze=ye.styleAttrs[Ae];Ze==="lrtb"||Ze==="lr"?ye.styleAttrs[v.byName.direction.qname]="ltr":Ze!=="rltb"&&Ze!=="rl"||(ye.styleAttrs[v.byName.direction.qname]="rtl")}if(X!==null)for(var it=0;it<v.all.length;it++){var lt=v.all[it];if(lt.qname===v.byName.textDecoration.qname){var Xe=X.styleAttrs[lt.qname],st=ye.styleAttrs[lt.qname],wt=[];st===void 0?wt=Xe:st.indexOf("none")===-1?((st.indexOf("noUnderline")===-1&&Xe.indexOf("underline")!==-1||st.indexOf("underline")!==-1)&&wt.push("underline"),(st.indexOf("noLineThrough")===-1&&Xe.indexOf("lineThrough")!==-1||st.indexOf("lineThrough")!==-1)&&wt.push("lineThrough"),(st.indexOf("noOverline")===-1&&Xe.indexOf("overline")!==-1||st.indexOf("overline")!==-1)&&wt.push("overline")):wt.push("none"),ye.styleAttrs[lt.qname]=wt}else if(lt.qname!==v.byName.fontSize.qname||lt.qname in ye.styleAttrs||ye.kind!=="span"||ye.styleAttrs[v.byName.ruby.qname]!=="textContainer")if(lt.qname!==v.byName.fontSize.qname||lt.qname in ye.styleAttrs||ye.kind!=="span"||ye.styleAttrs[v.byName.ruby.qname]!=="text")lt.inherit&&lt.qname in X.styleAttrs&&!(lt.qname in ye.styleAttrs)&&(ye.styleAttrs[lt.qname]=X.styleAttrs[lt.qname]);else{var Oe=X.styleAttrs[v.byName.fontSize.qname];X.styleAttrs[v.byName.ruby.qname]==="textContainer"?ye.styleAttrs[lt.qname]=Oe:ye.styleAttrs[lt.qname]=new y.ComputedLength(.5*Oe.rw,.5*Oe.rh)}else{var Qe=X.styleAttrs[v.byName.fontSize.qname];ye.styleAttrs[lt.qname]=new y.ComputedLength(.5*Qe.rw,.5*Qe.rh)}}for(var ct=0;ct<v.all.length;ct++){var Qt=v.all[ct];if(!(Qt.qname in ye.styleAttrs)&&!(Qt.qname===v.byName.position.qname&&v.byName.origin.qname in ye.styleAttrs||Qt.qname===v.byName.origin.qname&&v.byName.position.qname in ye.styleAttrs)){var Vt=b.head.styling.initials[Qt.qname]||Qt.initial;if(Vt!==null&&(ye.kind==="region"||Qt.inherit===!1&&Vt!==null)){var Tt=Qt.parse(Vt);Tt!==null?(ye.styleAttrs[Qt.qname]=Tt,$e[Qt.qname]=!0):I($,"Invalid initial value for '"+Qt.qname+"' on element '"+ye.kind)}}}for(var Pt=0;Pt<v.all.length;Pt++){var Ce=v.all[Pt];if(Ce.qname in $e&&Ce.compute!==null){var te=Ce.compute(b,X,ye,ye.styleAttrs[Ce.qname],ce);te!==null?ye.styleAttrs[Ce.qname]=te:(ye.styleAttrs[Ce.qname]=Ce.compute(b,X,ye,Ce.parse(Ce.initial),ce),I($,"Style '"+Ce.qname+"' on element '"+ye.kind+"' cannot be computed"))}}if(ye.styleAttrs[v.byName.display.qname]==="none")return null;var Fe=null;X===null?Fe=W===null?[]:[W]:"contents"in N&&(Fe=N.contents);for(var P=0;Fe!==null&&P<Fe.length;P++){var M=m(b,j,Y,W,ye,oe,Fe[P],$,ce);M!==null&&ye.contents.push(M.element)}for(var q in ye.styleAttrs)if(ye.styleAttrs.hasOwnProperty(q)){var V=!1;if(ye.kind==="span"){var he=ye.styleAttrs[v.byName.ruby.qname];(V=(he==="container"||he==="textContainer"||he==="baseContainer")&&O.indexOf(q)!==-1)||(V=he!=="container"&&q===v.byName.rubyAlign.qname),V||(V=!(he==="textContainer"||he==="text")&&q===v.byName.rubyPosition.qname)}if(!V){var fe=v.byQName[q];"applies"in fe&&(V=fe.applies.indexOf(ye.kind)===-1)}V&&delete ye.styleAttrs[q]}var He=ye.styleAttrs[v.byName.ruby.qname];if(ye.kind==="p"||ye.kind==="span"&&(He==="textContainer"||He==="text")){var _t=[];T(ye,_t),function(ot){for(var rt,et=0;et<ot.length;)if((rt=ot[et]).kind!=="br"&&rt.space!=="preserve"){var ft=rt.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ft)&&(et===0||(yt=ot[et-1]).kind==="br"||/[\r\n\t ]$/.test(yt.text))&&(ft=ft.substring(1)),rt.text=ft,ft.length===0?ot.splice(et,1):et++}else et++;var yt,Et;for(et=0;et<ot.length;et++)(rt=ot[et]).kind!=="br"&&rt.space!=="preserve"?/[ ]$/.test(rt.text)&&(et===ot.length-1||(Et=ot[et+1]).kind==="br"||Et.space==="preserve"&&/^[\r\n]/.test(Et.text))&&(rt.text=rt.text.slice(0,-1)):et++}(_t),U(ye)}return ye.kind==="div"&&v.byName.backgroundImage.qname in ye.styleAttrs||ye.kind==="br"||ye.kind==="image"||"contents"in ye&&ye.contents.length>0||ye.kind==="span"&&ye.text!==null||ye.kind==="region"&&ye.styleAttrs[v.byName.showBackground.qname]==="always"?{region_id:oe,element:ye}:null}function T(b,j){if("contents"in b)for(var Y=0;Y<b.contents.length;Y++){var W=b.contents[Y],X=W.styleAttrs[v.byName.ruby.qname];(W.kind!=="span"||X!=="textContainer"&&X!=="text")&&("contents"in W?T(W,j):(W.kind==="span"&&W.text.length!==0||W.kind==="br")&&j.push(W))}}function U(b){if(b.kind==="br")return!1;if("text"in b)return b.text.length===0;if("contents"in b){for(var j=b.contents.length;j--;)U(b.contents[j])&&b.contents.splice(j,1);return b.contents.length===0}}function x(b){this.contents=[],this.aspectRatio=b.aspectRatio,this.lang=b.lang}function _(b){for(var j in this.kind=b.kind||"region",this.lang=b.lang,b.id&&(this.id=b.id),this.styleAttrs={},b.styleAttrs)b.styleAttrs.hasOwnProperty(j)&&(this.styleAttrs[j]=b.styleAttrs[j]);"src"in b&&(this.src=b.src),"type"in b&&(this.type=b.type),"text"in b?this.text=b.text:(this.kind==="region"||"contents"in b)&&(this.contents=[]),"space"in b&&(this.space=b.space)}function I(b,j){if(b&&b.error&&b.error(j))throw j}})(g,typeof imscNames>"u"?S(210):imscNames,typeof imscStyles>"u"?S(6811):imscStyles,typeof imscUtils>"u"?S(5926):imscUtils)},4403:function(C,g,S){g.generateISD=S(4080).generateISD,g.fromXML=S(3362).fromXML,g.renderHTML=S(506).render},210:function(C,g){(function(S){S.ns_tt="http://www.w3.org/ns/ttml",S.ns_tts="http://www.w3.org/ns/ttml#styling",S.ns_ttp="http://www.w3.org/ns/ttml#parameter",S.ns_xml="http://www.w3.org/XML/1998/namespace",S.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",S.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",S.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",S.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(C,g,S){(function(F,R,v){function y(T,U,x,_,I,b,j,Y){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=b,this.initial=x,this.applies=_,this.parse=j,this.compute=Y}for(var O in F.all=[new y(R.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,v.parseColor,null),new y(R.ns_tts,"color","white",["span"],!0,!0,v.parseColor,null),new y(R.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new y(R.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new y(R.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new y(R.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=v.parseLength(U[0]),_=v.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var b,j;if(_==="auto")b=new v.ComputedLength(0,1);else if((b=v.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new v.ComputedLength(1,0);else if((j=v.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:j}}),new y(R.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),x=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?x.push("monospaceSerif"):x.push(U[_]);return x},null),new y(R.ns_tts,"shear","0%",["p"],!0,!0,v.parseLength,function(T,U,x,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new y(R.ns_tts,"fontSize","1c",["span","p"],!0,!0,v.parseLength,function(T,U,x,_,I){return v.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new y(R.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new y(R.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new y(R.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:v.parseLength(T)},function(T,U,x,_,I){var b;if(_==="normal")b=_;else if((b=v.toComputedLength(_.value,_.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return b}),new y(R.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new y(R.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var x=v.parseLength(U[0]),_=v.parseLength(U[1]);return _&&x?{h:_,w:x}:null},function(T,U,x,_,I){var b,j;if(_==="auto")b=new v.ComputedLength(0,0);else if((b=v.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new v.ComputedLength(0,0);else if((j=v.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:j}}),new y(R.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new y(R.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var x=[],_=0;_<U.length;_++){var I=v.parseLength(U[_]);if(!I)return null;x.push(I)}return x},function(T,U,x,_,I){var b;if(_.length===1)b=[_[0],_[0],_[0],_[0]];else if(_.length===2)b=[_[0],_[1],_[0],_[1]];else if(_.length===3)b=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;b=[_[0],_[1],_[2],_[3]]}var j=x.styleAttrs[F.byName.writingMode.qname];if(j==="lrtb"||j==="lr")b=[b[0],b[3],b[2],b[1]];else if(j==="rltb"||j==="rl")b=[b[0],b[1],b[2],b[3]];else if(j==="tblr")b=[b[3],b[0],b[1],b[2]];else{if(j!=="tbrl"&&j!=="tb")return null;b=[b[3],b[2],b[1],b[0]]}for(var Y=[],W=0;W<b.length;W++)if(b[W].value===0)Y[W]=new v.ComputedLength(0,0);else if(Y[W]=v.toComputedLength(b[W].value,b[W].unit,x.styleAttrs[F.byName.fontSize.qname],W===0||W===2?x.styleAttrs[F.byName.extent.qname].h:x.styleAttrs[F.byName.extent.qname].w,W===0||W===2?T.cellLength.h:T.cellLength.w,W===0||W===2?T.pxLength.h:T.pxLength.w),Y[W]===null)return null;return Y}),new y(R.ns_tts,"position","top left",["region"],!1,!0,function(T){return v.parsePosition(T)},function(T,U,x,_){var I,b;return(I=v.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new v.ComputedLength(-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-x.styleAttrs[F.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new v.ComputedLength(-I.rw-x.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-x.styleAttrs[F.byName.extent.qname].h.rh)),b=v.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new v.ComputedLength(T.dimensions.w.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-x.styleAttrs[F.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(b=new v.ComputedLength(T.dimensions.w.rw-b.rw-x.styleAttrs[F.byName.extent.qname].w.rw,-b.rh-x.styleAttrs[F.byName.extent.qname].w.rh)),{h:I,w:b}))}),new y(R.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new y(R.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new y(R.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new y(R.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),x=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(x[0]=U[0],U.length===2&&U[0]!=="none"){var _=v.parseLength(U[1]);if(!_)return null;x[1]=_}return x},function(T,U,x,_,I){if(_[0]==="none")return _;var b;return(b=_[1]===null?new v.ComputedLength(.5*x.styleAttrs[F.byName.fontSize.qname].rw,.5*x.styleAttrs[F.byName.fontSize.qname].rh):v.toComputedLength(_[1].value,_[1].unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],b]}),new y(R.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new y(R.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,x,_,I){return _==="left"?"start":_==="right"?"end":_}),new y(R.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new y(R.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new y(R.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),x={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")x.style=U[_];else if(U[_]==="filled"||U[_]==="open")x.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")x.symbol=U[_];else if(U[_]==="current")x.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")x.position=U[_];else if(x.color=v.parseColor(U[_]),x.color===null)return null;return x.style==null&&x.symbol==null?x.style="auto":(x.symbol=x.symbol||"circle",x.style=x.style||"filled"),x.position=x.position||"outside",x.color=x.color||"current",x},null),new y(R.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},x=T.split(" ");if(x.length===0||x.length>2)return null;var _=v.parseColor(x[0]);if(U.color=_,_!==null&&x.shift(),x.length!==1)return null;var I=v.parseLength(x[0]);return I?(U.thickness=I,U):null},function(T,U,x,_,I){if(_==="none")return _;var b={};return _.color===null?b.color=x.styleAttrs[F.byName.color.qname]:b.color=_.color,b.thickness=v.toComputedLength(_.thickness.value,_.thickness.unit,x.styleAttrs[F.byName.fontSize.qname],x.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),b.thickness===null?null:b}),new y(R.ns_tts,"textShadow","none",["span"],!0,!0,v.parseTextShadow,function(T,U,x,_){if(_==="none")return _;for(var I=[],b=0;b<_.length;b++){var j={};if(j.x_off=v.toComputedLength(_[b][0].value,_[b][0].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.w),j.x_off===null||(j.y_off=v.toComputedLength(_[b][1].value,_[b][1].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.y_off===null))return null;if(_[b][2]===null)j.b_radius=0;else if(j.b_radius=v.toComputedLength(_[b][2].value,_[b][2].unit,null,x.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.b_radius===null)return null;_[b][3]===null?j.color=x.styleAttrs[F.byName.color.qname]:j.color=_[b][3],I.push(j)}return I}),new y(R.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new y(R.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new y(R.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new y(R.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new y(R.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new y(R.ns_ebutts,"linePadding","0c",["p"],!0,!1,v.parseLength,function(T,U,x,_,I){return v.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new y(R.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new y(R.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new y(R.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new y(R.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],F.byQName={},F.all)F.byQName[F.all[O].qname]=F.all[O];for(var m in F.byName={},F.all)F.byName[F.all[m].name]=F.all[m]})(g,typeof imscNames>"u"?S(210):imscNames,typeof imscUtils>"u"?S(5926):imscUtils)},5926:function(C,g){(function(S){var F=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,R=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};S.parseColor=function(m){var T,U=null,x=y[m.toLowerCase()];return x!==void 0?U=x:(T=F.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=R.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=v.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var O=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;S.parseLength=function(m){var T,U=null;return(T=O.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},S.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],x=0;x<T.length;x++){var _=T[x].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],b=S.parseLength(_.shift());if(b===null||(I[0]=b,(b=S.parseLength(_.shift()))===null))return null;if(I[1]=b,_.length===0){U.push(I);continue}if((b=S.parseLength(_[0]))!==null&&(I[2]=b,_.shift()),_.length===0){U.push(I);continue}var j=S.parseColor(_[0]);if(j===null)return null;I[3]=j,U.push(I)}}return U},S.parsePosition=function(m){var T=m.split(" "),U=function(W){return W==="center"||W==="left"||W==="top"||W==="bottom"||W==="right"};if(T.length>4)return null;for(var x=0;x<T.length;x++)if(!U(T[x])){var _=S.parseLength(T[x]);if(_===null)return null;T[x]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},b=0;b<T.length;){var j=T[b++];if(U(j)){var Y={value:0,unit:"%"};T.length!==2&&b<T.length&&!U(T[b])&&(Y=T[b++]),j==="right"?(I.h.edge=j,I.h.offset=Y):j==="bottom"?(I.v.edge=j,I.v.offset=Y):j==="left"?I.h.offset=Y:j==="top"&&(I.v.offset=Y)}else{if(T.length!==1&&T.length!==2)return null;b===1?I.h.offset=j:I.v.offset=j}}return I},S.ComputedLength=function(m,T){this.rw=m,this.rh=T},S.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},S.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},S.toComputedLength=function(m,T,U,x,_,I){return T==="%"&&x?new S.ComputedLength(x.rw*m/100,x.rh*m/100):T==="em"&&U?new S.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new S.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new S.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new S.ComputedLength(0,m/100):T==="rw"?new S.ComputedLength(m/100,0):null}})(g)},3516:function(C){C.exports=function(g){var S=typeof g=="string"?g.charCodeAt(0):g;return S>=97&&S<=122||S>=65&&S<=90}},2219:function(C,g,S){var F=S(3516),R=S(395);C.exports=function(v){return F(v)||R(v)}},395:function(C){C.exports=function(g){var S=typeof g=="string"?g.charCodeAt(0):g;return S>=48&&S<=57}},3875:function(C){function g(R){if(typeof R!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(R))}function S(R,v){for(var y,O="",m=0,T=-1,U=0,x=0;x<=R.length;++x){if(x<R.length)y=R.charCodeAt(x);else{if(y===47)break;y=47}if(y===47){if(!(T===x-1||U===1))if(T!==x-1&&U===2){if(O.length<2||m!==2||O.charCodeAt(O.length-1)!==46||O.charCodeAt(O.length-2)!==46){if(O.length>2){var _=O.lastIndexOf("/");if(_!==O.length-1){_===-1?(O="",m=0):m=(O=O.slice(0,_)).length-1-O.lastIndexOf("/"),T=x,U=0;continue}}else if(O.length===2||O.length===1){O="",m=0,T=x,U=0;continue}}v&&(O.length>0?O+="/..":O="..",m=2)}else O.length>0?O+="/"+R.slice(T+1,x):O=R.slice(T+1,x),m=x-T-1;T=x,U=0}else y===46&&U!==-1?++U:U=-1}return O}var F={resolve:function(){for(var R,v="",y=!1,O=arguments.length-1;O>=-1&&!y;O--){var m;O>=0?m=arguments[O]:(R===void 0&&(R=process.cwd()),m=R),g(m),m.length!==0&&(v=m+"/"+v,y=m.charCodeAt(0)===47)}return v=S(v,!y),y?v.length>0?"/"+v:"/":v.length>0?v:"."},normalize:function(R){if(g(R),R.length===0)return".";var v=R.charCodeAt(0)===47,y=R.charCodeAt(R.length-1)===47;return(R=S(R,!v)).length!==0||v||(R="."),R.length>0&&y&&(R+="/"),v?"/"+R:R},isAbsolute:function(R){return g(R),R.length>0&&R.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var R,v=0;v<arguments.length;++v){var y=arguments[v];g(y),y.length>0&&(R===void 0?R=y:R+="/"+y)}return R===void 0?".":F.normalize(R)},relative:function(R,v){if(g(R),g(v),R===v||(R=F.resolve(R))===(v=F.resolve(v)))return"";for(var y=1;y<R.length&&R.charCodeAt(y)===47;++y);for(var O=R.length,m=O-y,T=1;T<v.length&&v.charCodeAt(T)===47;++T);for(var U=v.length-T,x=m<U?m:U,_=-1,I=0;I<=x;++I){if(I===x){if(U>x){if(v.charCodeAt(T+I)===47)return v.slice(T+I+1);if(I===0)return v.slice(T+I)}else m>x&&(R.charCodeAt(y+I)===47?_=I:I===0&&(_=0));break}var b=R.charCodeAt(y+I);if(b!==v.charCodeAt(T+I))break;b===47&&(_=I)}var j="";for(I=y+_+1;I<=O;++I)I!==O&&R.charCodeAt(I)!==47||(j.length===0?j+="..":j+="/..");return j.length>0?j+v.slice(T+_):(T+=_,v.charCodeAt(T)===47&&++T,v.slice(T))},_makeLong:function(R){return R},dirname:function(R){if(g(R),R.length===0)return".";for(var v=R.charCodeAt(0),y=v===47,O=-1,m=!0,T=R.length-1;T>=1;--T)if((v=R.charCodeAt(T))===47){if(!m){O=T;break}}else m=!1;return O===-1?y?"/":".":y&&O===1?"//":R.slice(0,O)},basename:function(R,v){if(v!==void 0&&typeof v!="string")throw new TypeError('"ext" argument must be a string');g(R);var y,O=0,m=-1,T=!0;if(v!==void 0&&v.length>0&&v.length<=R.length){if(v.length===R.length&&v===R)return"";var U=v.length-1,x=-1;for(y=R.length-1;y>=0;--y){var _=R.charCodeAt(y);if(_===47){if(!T){O=y+1;break}}else x===-1&&(T=!1,x=y+1),U>=0&&(_===v.charCodeAt(U)?--U==-1&&(m=y):(U=-1,m=x))}return O===m?m=x:m===-1&&(m=R.length),R.slice(O,m)}for(y=R.length-1;y>=0;--y)if(R.charCodeAt(y)===47){if(!T){O=y+1;break}}else m===-1&&(T=!1,m=y+1);return m===-1?"":R.slice(O,m)},extname:function(R){g(R);for(var v=-1,y=0,O=-1,m=!0,T=0,U=R.length-1;U>=0;--U){var x=R.charCodeAt(U);if(x!==47)O===-1&&(m=!1,O=U+1),x===46?v===-1?v=U:T!==1&&(T=1):v!==-1&&(T=-1);else if(!m){y=U+1;break}}return v===-1||O===-1||T===0||T===1&&v===O-1&&v===y+1?"":R.slice(v,O)},format:function(R){if(R===null||typeof R!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof R);return function(v,y){var O=y.dir||y.root,m=y.base||(y.name||"")+(y.ext||"");return O?O===y.root?O+m:O+"/"+m:m}(0,R)},parse:function(R){g(R);var v={root:"",dir:"",base:"",ext:"",name:""};if(R.length===0)return v;var y,O=R.charCodeAt(0),m=O===47;m?(v.root="/",y=1):y=0;for(var T=-1,U=0,x=-1,_=!0,I=R.length-1,b=0;I>=y;--I)if((O=R.charCodeAt(I))!==47)x===-1&&(_=!1,x=I+1),O===46?T===-1?T=I:b!==1&&(b=1):T!==-1&&(b=-1);else if(!_){U=I+1;break}return T===-1||x===-1||b===0||b===1&&T===x-1&&T===U+1?x!==-1&&(v.base=v.name=U===0&&m?R.slice(1,x):R.slice(U,x)):(U===0&&m?(v.name=R.slice(1,T),v.base=R.slice(1,x)):(v.name=R.slice(U,T),v.base=R.slice(U,x)),v.ext=R.slice(T,x)),U>0?v.dir=R.slice(0,U-1):m&&(v.dir="/"),v},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,C.exports=F},8387:function(C,g,S){var F=S(1549),R=F.Buffer;function v(O,m){for(var T in O)m[T]=O[T]}function y(O,m,T){return R(O,m,T)}R.from&&R.alloc&&R.allocUnsafe&&R.allocUnsafeSlow?C.exports=F:(v(F,g),g.Buffer=y),v(R,y),y.from=function(O,m,T){if(typeof O=="number")throw new TypeError("Argument must not be a number");return R(O,m,T)},y.alloc=function(O,m,T){if(typeof O!="number")throw new TypeError("Argument must be a number");var U=R(O);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},y.allocUnsafe=function(O){if(typeof O!="number")throw new TypeError("Argument must be a number");return R(O)},y.allocUnsafeSlow=function(O){if(typeof O!="number")throw new TypeError("Argument must be a number");return F.SlowBuffer(O)}},5378:function(C,g,S){(function(F){F.parser=function(P,M){return new y(P,M)},F.SAXParser=y,F.SAXStream=m,F.createStream=function(P,M){return new m(P,M)},F.MAX_BUFFER_LENGTH=65536;var R,v=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function y(P,M){if(!(this instanceof y))return new y(P,M);var q=this;(function(V){for(var he=0,fe=v.length;he<fe;he++)V[v[he]]=""})(q),q.q=q.c="",q.bufferCheckPosition=F.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!P,q.noscript=!(!P&&!q.opt.noscript),q.state=Ae.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(F.XML_ENTITIES):Object.create(F.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(Y)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),it(q,"onready")}F.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(P){function M(){}return M.prototype=P,new M}),Object.keys||(Object.keys=function(P){var M=[];for(var q in P)P.hasOwnProperty(q)&&M.push(q);return M}),y.prototype={end:function(){Oe(this)},write:function(P){var M=this;if(this.error)throw this.error;if(M.closed)return wt(M,"Cannot write after close. Assign an onready handler.");if(P===null)return Oe(M);typeof P=="object"&&(P=P.toString());for(var q=0,V="";V=Fe(P,q++),M.c=V,V;)switch(M.trackPosition&&(M.position++,V==="\n"?(M.line++,M.column=0):M.column++),M.state){case Ae.BEGIN:if(M.state=Ae.BEGIN_WHITESPACE,V==="\uFEFF")continue;te(M,V);continue;case Ae.BEGIN_WHITESPACE:te(M,V);continue;case Ae.TEXT:if(M.sawRoot&&!M.closedRoot){for(var he=q-1;V&&V!=="<"&&V!=="&";)(V=Fe(P,q++))&&M.trackPosition&&(M.position++,V==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=P.substring(he,q-1)}V!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,V)||M.sawRoot&&!M.closedRoot||Qe(M,"Text data outside of root node."),V==="&"?M.state=Ae.TEXT_ENTITY:M.textNode+=V):(M.state=Ae.OPEN_WAKA,M.startTagPosition=M.position);continue;case Ae.SCRIPT:V==="<"?M.state=Ae.SCRIPT_ENDING:M.script+=V;continue;case Ae.SCRIPT_ENDING:V==="/"?M.state=Ae.CLOSE_TAG:(M.script+="<"+V,M.state=Ae.SCRIPT);continue;case Ae.OPEN_WAKA:if(V==="!")M.state=Ae.SGML_DECL,M.sgmlDecl="";else if(!ce(T,V))if(ce(W,V))M.state=Ae.OPEN_TAG,M.tagName=V;else if(V==="/")M.state=Ae.CLOSE_TAG,M.tagName="";else if(V==="?")M.state=Ae.PROC_INST,M.procInstName=M.procInstBody="";else{if(Qe(M,"Unencoded <"),M.startTagPosition+1<M.position){var fe=M.position-M.startTagPosition;V=new Array(fe).join(" ")+V}M.textNode+="<"+V,M.state=Ae.TEXT}continue;case Ae.SGML_DECL:(M.sgmlDecl+V).toUpperCase()==="[CDATA["?(lt(M,"onopencdata"),M.state=Ae.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+V==="--"?(M.state=Ae.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+V).toUpperCase()==="DOCTYPE"?(M.state=Ae.DOCTYPE,(M.doctype||M.sawRoot)&&Qe(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):V===">"?(lt(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Ae.TEXT):(ce(_,V)&&(M.state=Ae.SGML_DECL_QUOTED),M.sgmlDecl+=V);continue;case Ae.SGML_DECL_QUOTED:V===M.q&&(M.state=Ae.SGML_DECL,M.q=""),M.sgmlDecl+=V;continue;case Ae.DOCTYPE:V===">"?(M.state=Ae.TEXT,lt(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=V,V==="["?M.state=Ae.DOCTYPE_DTD:ce(_,V)&&(M.state=Ae.DOCTYPE_QUOTED,M.q=V));continue;case Ae.DOCTYPE_QUOTED:M.doctype+=V,V===M.q&&(M.q="",M.state=Ae.DOCTYPE);continue;case Ae.DOCTYPE_DTD:M.doctype+=V,V==="]"?M.state=Ae.DOCTYPE:ce(_,V)&&(M.state=Ae.DOCTYPE_DTD_QUOTED,M.q=V);continue;case Ae.DOCTYPE_DTD_QUOTED:M.doctype+=V,V===M.q&&(M.state=Ae.DOCTYPE_DTD,M.q="");continue;case Ae.COMMENT:V==="-"?M.state=Ae.COMMENT_ENDING:M.comment+=V;continue;case Ae.COMMENT_ENDING:V==="-"?(M.state=Ae.COMMENT_ENDED,M.comment=st(M.opt,M.comment),M.comment&&lt(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+V,M.state=Ae.COMMENT);continue;case Ae.COMMENT_ENDED:V!==">"?(Qe(M,"Malformed comment"),M.comment+="--"+V,M.state=Ae.COMMENT):M.state=Ae.TEXT;continue;case Ae.CDATA:V==="]"?M.state=Ae.CDATA_ENDING:M.cdata+=V;continue;case Ae.CDATA_ENDING:V==="]"?M.state=Ae.CDATA_ENDING_2:(M.cdata+="]"+V,M.state=Ae.CDATA);continue;case Ae.CDATA_ENDING_2:V===">"?(M.cdata&&lt(M,"oncdata",M.cdata),lt(M,"onclosecdata"),M.cdata="",M.state=Ae.TEXT):V==="]"?M.cdata+="]":(M.cdata+="]]"+V,M.state=Ae.CDATA);continue;case Ae.PROC_INST:V==="?"?M.state=Ae.PROC_INST_ENDING:ce(T,V)?M.state=Ae.PROC_INST_BODY:M.procInstName+=V;continue;case Ae.PROC_INST_BODY:if(!M.procInstBody&&ce(T,V))continue;V==="?"?M.state=Ae.PROC_INST_ENDING:M.procInstBody+=V;continue;case Ae.PROC_INST_ENDING:V===">"?(lt(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Ae.TEXT):(M.procInstBody+="?"+V,M.state=Ae.PROC_INST_BODY);continue;case Ae.OPEN_TAG:ce(X,V)?M.tagName+=V:(ct(M),V===">"?Tt(M):V==="/"?M.state=Ae.OPEN_TAG_SLASH:(oe(T,V)&&Qe(M,"Invalid character in tag name"),M.state=Ae.ATTRIB));continue;case Ae.OPEN_TAG_SLASH:V===">"?(Tt(M,!0),Pt(M)):(Qe(M,"Forward-slash in opening tag not followed by >"),M.state=Ae.ATTRIB);continue;case Ae.ATTRIB:if(ce(T,V))continue;V===">"?Tt(M):V==="/"?M.state=Ae.OPEN_TAG_SLASH:ce(W,V)?(M.attribName=V,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME:V==="="?M.state=Ae.ATTRIB_VALUE:V===">"?(Qe(M,"Attribute without value"),M.attribValue=M.attribName,Vt(M),Tt(M)):ce(T,V)?M.state=Ae.ATTRIB_NAME_SAW_WHITE:ce(X,V)?M.attribName+=V:Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME_SAW_WHITE:if(V==="=")M.state=Ae.ATTRIB_VALUE;else{if(ce(T,V))continue;Qe(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",lt(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",V===">"?Tt(M):ce(W,V)?(M.attribName=V,M.state=Ae.ATTRIB_NAME):(Qe(M,"Invalid attribute name"),M.state=Ae.ATTRIB)}continue;case Ae.ATTRIB_VALUE:if(ce(T,V))continue;ce(_,V)?(M.q=V,M.state=Ae.ATTRIB_VALUE_QUOTED):(Qe(M,"Unquoted attribute value"),M.state=Ae.ATTRIB_VALUE_UNQUOTED,M.attribValue=V);continue;case Ae.ATTRIB_VALUE_QUOTED:if(V!==M.q){V==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=V;continue}Vt(M),M.q="",M.state=Ae.ATTRIB_VALUE_CLOSED;continue;case Ae.ATTRIB_VALUE_CLOSED:ce(T,V)?M.state=Ae.ATTRIB:V===">"?Tt(M):V==="/"?M.state=Ae.OPEN_TAG_SLASH:ce(W,V)?(Qe(M,"No whitespace between attributes"),M.attribName=V,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_VALUE_UNQUOTED:if(oe(I,V)){V==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_U:M.attribValue+=V;continue}Vt(M),V===">"?Tt(M):M.state=Ae.ATTRIB;continue;case Ae.CLOSE_TAG:if(M.tagName)V===">"?Pt(M):ce(X,V)?M.tagName+=V:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Ae.SCRIPT):(oe(T,V)&&Qe(M,"Invalid tagname in closing tag"),M.state=Ae.CLOSE_TAG_SAW_WHITE);else{if(ce(T,V))continue;oe(W,V)?M.script?(M.script+="</"+V,M.state=Ae.SCRIPT):Qe(M,"Invalid tagname in closing tag."):M.tagName=V}continue;case Ae.CLOSE_TAG_SAW_WHITE:if(ce(T,V))continue;V===">"?Pt(M):Qe(M,"Invalid characters in closing tag");continue;case Ae.TEXT_ENTITY:case Ae.ATTRIB_VALUE_ENTITY_Q:case Ae.ATTRIB_VALUE_ENTITY_U:var He,_t;switch(M.state){case Ae.TEXT_ENTITY:He=Ae.TEXT,_t="textNode";break;case Ae.ATTRIB_VALUE_ENTITY_Q:He=Ae.ATTRIB_VALUE_QUOTED,_t="attribValue";break;case Ae.ATTRIB_VALUE_ENTITY_U:He=Ae.ATTRIB_VALUE_UNQUOTED,_t="attribValue"}V===";"?(M[_t]+=Ce(M),M.entity="",M.state=He):ce(M.entity.length?N:se,V)?M.entity+=V:(Qe(M,"Invalid character in entity name"),M[_t]+="&"+M.entity+V,M.entity="",M.state=He);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(ot){for(var rt=Math.max(F.MAX_BUFFER_LENGTH,10),et=0,ft=0,yt=v.length;ft<yt;ft++){var Et=ot[v[ft]].length;if(Et>rt)switch(v[ft]){case"textNode":Xe(ot);break;case"cdata":lt(ot,"oncdata",ot.cdata),ot.cdata="";break;case"script":lt(ot,"onscript",ot.script),ot.script="";break;default:wt(ot,"Max buffer length exceeded: "+v[ft])}et=Math.max(et,Et)}var Ct=F.MAX_BUFFER_LENGTH-et;ot.bufferCheckPosition=Ct+ot.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var P;Xe(P=this),P.cdata!==""&&(lt(P,"oncdata",P.cdata),P.cdata=""),P.script!==""&&(lt(P,"onscript",P.script),P.script="")}};try{R=S(182).Stream}catch(P){R=function(){}}var O=F.EVENTS.filter(function(P){return P!=="error"&&P!=="end"});function m(P,M){if(!(this instanceof m))return new m(P,M);R.apply(this),this._parser=new y(P,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(V){q.emit("error",V),q._parser.error=null},this._decoder=null,O.forEach(function(V){Object.defineProperty(q,"on"+V,{get:function(){return q._parser["on"+V]},set:function(he){if(!he)return q.removeAllListeners(V),q._parser["on"+V]=he,he;q.on(V,he)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(R.prototype,{constructor:{value:m}}),m.prototype.write=function(P){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(P)){if(!this._decoder){var M=S(7503).s;this._decoder=new M("utf8")}P=this._decoder.write(P)}return this._parser.write(P.toString()),this.emit("data",P),!0},m.prototype.end=function(P){return P&&P.length&&this.write(P),this._parser.end(),!0},m.prototype.on=function(P,M){var q=this;return q._parser["on"+P]||O.indexOf(P)===-1||(q._parser["on"+P]=function(){var V=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);V.splice(0,0,P),q.emit.apply(q,V)}),R.prototype.on.call(q,P,M)};var T="\r\n	 ",U="0124356789",x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",b="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",Y={xml:b,xmlns:j};T=$(T),U=$(U),x=$(x);var W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,X=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,se=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function $(P){return P.split("").reduce(function(M,q){return M[q]=!0,M},{})}function ce(P,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(P)?!!M.match(P):P[M]}function oe(P,M){return!ce(P,M)}_=$(_),I=$(I);var ye,be,$e,Ae=0;for(var Ze in F.STATE={BEGIN:Ae++,BEGIN_WHITESPACE:Ae++,TEXT:Ae++,TEXT_ENTITY:Ae++,OPEN_WAKA:Ae++,SGML_DECL:Ae++,SGML_DECL_QUOTED:Ae++,DOCTYPE:Ae++,DOCTYPE_QUOTED:Ae++,DOCTYPE_DTD:Ae++,DOCTYPE_DTD_QUOTED:Ae++,COMMENT_STARTING:Ae++,COMMENT:Ae++,COMMENT_ENDING:Ae++,COMMENT_ENDED:Ae++,CDATA:Ae++,CDATA_ENDING:Ae++,CDATA_ENDING_2:Ae++,PROC_INST:Ae++,PROC_INST_BODY:Ae++,PROC_INST_ENDING:Ae++,OPEN_TAG:Ae++,OPEN_TAG_SLASH:Ae++,ATTRIB:Ae++,ATTRIB_NAME:Ae++,ATTRIB_NAME_SAW_WHITE:Ae++,ATTRIB_VALUE:Ae++,ATTRIB_VALUE_QUOTED:Ae++,ATTRIB_VALUE_CLOSED:Ae++,ATTRIB_VALUE_UNQUOTED:Ae++,ATTRIB_VALUE_ENTITY_Q:Ae++,ATTRIB_VALUE_ENTITY_U:Ae++,CLOSE_TAG:Ae++,CLOSE_TAG_SAW_WHITE:Ae++,SCRIPT:Ae++,SCRIPT_ENDING:Ae++},F.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(F.ENTITIES).forEach(function(P){var M=F.ENTITIES[P],q=typeof M=="number"?String.fromCharCode(M):M;F.ENTITIES[P]=q}),F.STATE)F.STATE[F.STATE[Ze]]=Ze;function it(P,M,q){P[M]&&P[M](q)}function lt(P,M,q){P.textNode&&Xe(P),it(P,M,q)}function Xe(P){P.textNode=st(P.opt,P.textNode),P.textNode&&it(P,"ontext",P.textNode),P.textNode=""}function st(P,M){return P.trim&&(M=M.trim()),P.normalize&&(M=M.replace(/\s+/g," ")),M}function wt(P,M){return Xe(P),P.trackPosition&&(M+="\nLine: "+P.line+"\nColumn: "+P.column+"\nChar: "+P.c),M=new Error(M),P.error=M,it(P,"onerror",M),P}function Oe(P){return P.sawRoot&&!P.closedRoot&&Qe(P,"Unclosed root tag"),P.state!==Ae.BEGIN&&P.state!==Ae.BEGIN_WHITESPACE&&P.state!==Ae.TEXT&&wt(P,"Unexpected end"),Xe(P),P.c="",P.closed=!0,it(P,"onend"),y.call(P,P.strict,P.opt),P}function Qe(P,M){if(typeof P!="object"||!(P instanceof y))throw new Error("bad call to strictFail");P.strict&&wt(P,M)}function ct(P){P.strict||(P.tagName=P.tagName[P.looseCase]());var M=P.tags[P.tags.length-1]||P,q=P.tag={name:P.tagName,attributes:{}};P.opt.xmlns&&(q.ns=M.ns),P.attribList.length=0,lt(P,"onopentagstart",q)}function Qt(P,M){var q=P.indexOf(":")<0?["",P]:P.split(":"),V=q[0],he=q[1];return M&&P==="xmlns"&&(V="xmlns",he=""),{prefix:V,local:he}}function Vt(P){if(P.strict||(P.attribName=P.attribName[P.looseCase]()),P.attribList.indexOf(P.attribName)!==-1||P.tag.attributes.hasOwnProperty(P.attribName))P.attribName=P.attribValue="";else{if(P.opt.xmlns){var M=Qt(P.attribName,!0),q=M.prefix,V=M.local;if(q==="xmlns")if(V==="xml"&&P.attribValue!==b)Qe(P,"xml: prefix must be bound to "+b+"\nActual: "+P.attribValue);else if(V==="xmlns"&&P.attribValue!==j)Qe(P,"xmlns: prefix must be bound to "+j+"\nActual: "+P.attribValue);else{var he=P.tag,fe=P.tags[P.tags.length-1]||P;he.ns===fe.ns&&(he.ns=Object.create(fe.ns)),he.ns[V]=P.attribValue}P.attribList.push([P.attribName,P.attribValue])}else P.tag.attributes[P.attribName]=P.attribValue,lt(P,"onattribute",{name:P.attribName,value:P.attribValue});P.attribName=P.attribValue=""}}function Tt(P,M){if(P.opt.xmlns){var q=P.tag,V=Qt(P.tagName);q.prefix=V.prefix,q.local=V.local,q.uri=q.ns[V.prefix]||"",q.prefix&&!q.uri&&(Qe(P,"Unbound namespace prefix: "+JSON.stringify(P.tagName)),q.uri=V.prefix);var he=P.tags[P.tags.length-1]||P;q.ns&&he.ns!==q.ns&&Object.keys(q.ns).forEach(function(hn){lt(P,"onopennamespace",{prefix:hn,uri:q.ns[hn]})});for(var fe=0,He=P.attribList.length;fe<He;fe++){var _t=P.attribList[fe],ot=_t[0],rt=_t[1],et=Qt(ot,!0),ft=et.prefix,yt=et.local,Et=ft===""?"":q.ns[ft]||"",Ct={name:ot,value:rt,prefix:ft,local:yt,uri:Et};ft&&ft!=="xmlns"&&!Et&&(Qe(P,"Unbound namespace prefix: "+JSON.stringify(ft)),Ct.uri=ft),P.tag.attributes[ot]=Ct,lt(P,"onattribute",Ct)}P.attribList.length=0}P.tag.isSelfClosing=!!M,P.sawRoot=!0,P.tags.push(P.tag),lt(P,"onopentag",P.tag),M||(P.noscript||P.tagName.toLowerCase()!=="script"?P.state=Ae.TEXT:P.state=Ae.SCRIPT,P.tag=null,P.tagName=""),P.attribName=P.attribValue="",P.attribList.length=0}function Pt(P){if(!P.tagName)return Qe(P,"Weird empty close tag."),P.textNode+="</>",void(P.state=Ae.TEXT);if(P.script){if(P.tagName!=="script")return P.script+="</"+P.tagName+">",P.tagName="",void(P.state=Ae.SCRIPT);lt(P,"onscript",P.script),P.script=""}var M=P.tags.length,q=P.tagName;P.strict||(q=q[P.looseCase]());for(var V=q;M--&&P.tags[M].name!==V;)Qe(P,"Unexpected close tag");if(M<0)return Qe(P,"Unmatched closing tag: "+P.tagName),P.textNode+="</"+P.tagName+">",void(P.state=Ae.TEXT);P.tagName=q;for(var he=P.tags.length;he-- >M;){var fe=P.tag=P.tags.pop();P.tagName=P.tag.name,lt(P,"onclosetag",P.tagName);var He={};for(var _t in fe.ns)He[_t]=fe.ns[_t];var ot=P.tags[P.tags.length-1]||P;P.opt.xmlns&&fe.ns!==ot.ns&&Object.keys(fe.ns).forEach(function(rt){var et=fe.ns[rt];lt(P,"onclosenamespace",{prefix:rt,uri:et})})}M===0&&(P.closedRoot=!0),P.tagName=P.attribValue=P.attribName="",P.attribList.length=0,P.state=Ae.TEXT}function Ce(P){var M,q=P.entity,V=q.toLowerCase(),he="";return P.ENTITIES[q]?P.ENTITIES[q]:P.ENTITIES[V]?P.ENTITIES[V]:((q=V).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),he=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),he=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),he.toLowerCase()!==q?(Qe(P,"Invalid character entity"),"&"+P.entity+";"):String.fromCodePoint(M))}function te(P,M){M==="<"?(P.state=Ae.OPEN_WAKA,P.startTagPosition=P.position):oe(T,M)&&(Qe(P,"Non-whitespace before first tag."),P.textNode=M,P.state=Ae.TEXT)}function Fe(P,M){var q="";return M<P.length&&(q=P.charAt(M)),q}Ae=F.STATE,String.fromCodePoint||(ye=String.fromCharCode,be=Math.floor,$e=function(){var P,M,q=16384,V=[],he=-1,fe=arguments.length;if(!fe)return"";for(var He="";++he<fe;){var _t=Number(arguments[he]);if(!isFinite(_t)||_t<0||_t>1114111||be(_t)!==_t)throw RangeError("Invalid code point: "+_t);_t<=65535?V.push(_t):(P=55296+((_t-=65536)>>10),M=_t%1024+56320,V.push(P,M)),(he+1===fe||V.length>q)&&(He+=ye.apply(null,V),V.length=0)}return He},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:$e,configurable:!0,writable:!0}):String.fromCodePoint=$e)})(g)},182:function(C,g,S){C.exports=R;var F=S(1159).EventEmitter;function R(){F.call(this)}S(1765)(R,F),R.Readable=S(2846),R.Writable=S(8318),R.Duplex=S(6138),R.Transform=S(9798),R.PassThrough=S(5472),R.finished=S(8800),R.pipeline=S(7295),R.Stream=R,R.prototype.pipe=function(v,y){var O=this;function m(j){v.writable&&v.write(j)===!1&&O.pause&&O.pause()}function T(){O.readable&&O.resume&&O.resume()}O.on("data",m),v.on("drain",T),v._isStdio||y&&y.end===!1||(O.on("end",x),O.on("close",_));var U=!1;function x(){U||(U=!0,v.end())}function _(){U||(U=!0,typeof v.destroy=="function"&&v.destroy())}function I(j){if(b(),F.listenerCount(this,"error")===0)throw j}function b(){O.removeListener("data",m),v.removeListener("drain",T),O.removeListener("end",x),O.removeListener("close",_),O.removeListener("error",I),v.removeListener("error",I),O.removeListener("end",b),O.removeListener("close",b),v.removeListener("close",b)}return O.on("error",I),v.on("error",I),O.on("end",b),O.on("close",b),v.on("close",b),v.emit("pipe",O),v}},1765:function(C){typeof Object.create=="function"?C.exports=function(g,S){S&&(g.super_=S,g.prototype=Object.create(S.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:C.exports=function(g,S){if(S){g.super_=S;var F=function(){};F.prototype=S.prototype,g.prototype=new F,g.prototype.constructor=g}}},3690:function(C){var g={};function S(R,v,y){y||(y=Error);var O=function(m){var T,U;function x(_,I,b){return m.call(this,function(j,Y,W){return typeof v=="string"?v:v(j,Y,W)}(_,I,b))||this}return U=m,(T=x).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,x}(y);O.prototype.name=y.name,O.prototype.code=R,g[R]=O}function F(R,v){if(Array.isArray(R)){var y=R.length;return R=R.map(function(O){return String(O)}),y>2?"one of ".concat(v," ").concat(R.slice(0,y-1).join(", "),", or ")+R[y-1]:y===2?"one of ".concat(v," ").concat(R[0]," or ").concat(R[1]):"of ".concat(v," ").concat(R[0])}return"of ".concat(v," ").concat(String(R))}S("ERR_INVALID_OPT_VALUE",function(R,v){return'The value "'+v+'" is invalid for option "'+R+'"'},TypeError),S("ERR_INVALID_ARG_TYPE",function(R,v,y){var O,m,T,U,x;if(typeof v=="string"&&(m="not ",v.substr(0,m.length)===m)?(O="must not be",v=v.replace(/^not /,"")):O="must be",function(I,b,j){return(j===void 0||j>I.length)&&(j=I.length),I.substring(j-b.length,j)===b}(R," argument"))T="The ".concat(R," ").concat(O," ").concat(F(v,"type"));else{var _=(typeof x!="number"&&(x=0),x+1>(U=R).length||U.indexOf(".",x)===-1?"argument":"property");T='The "'.concat(R,'" ').concat(_," ").concat(O," ").concat(F(v,"type"))}return T+". Received type ".concat(typeof y)},TypeError),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),S("ERR_METHOD_NOT_IMPLEMENTED",function(R){return"The "+R+" method is not implemented"}),S("ERR_STREAM_PREMATURE_CLOSE","Premature close"),S("ERR_STREAM_DESTROYED",function(R){return"Cannot call "+R+" after a stream was destroyed"}),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),S("ERR_STREAM_WRITE_AFTER_END","write after end"),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_UNKNOWN_ENCODING",function(R){return"Unknown encoding: "+R},TypeError),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),C.exports.q=g},6138:function(C,g,S){var F=Object.keys||function(_){var I=[];for(var b in _)I.push(b);return I};C.exports=T;var R=S(2846),v=S(8318);S(1765)(T,R);for(var y=F(v.prototype),O=0;O<y.length;O++){var m=y[O];T.prototype[m]||(T.prototype[m]=v.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);R.call(this,_),v.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(x,this)}function x(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(C,g,S){C.exports=R;var F=S(9798);function R(v){if(!(this instanceof R))return new R(v);F.call(this,v)}S(1765)(R,F),R.prototype._transform=function(v,y,O){O(null,v)}},2846:function(C,g,S){var F;C.exports=ye,ye.ReadableState=oe,S(1159).EventEmitter;var R,v=function(Ce,te){return Ce.listeners(te).length},y=S(9299),O=S(1549).Buffer,m=S.g.Uint8Array||function(){},T=S(964);R=T&&T.debuglog?T.debuglog("stream"):function(){};var U,x,_,I=S(8393),b=S(6163),j=S(7269).getHighWaterMark,Y=S(3690).q,W=Y.ERR_INVALID_ARG_TYPE,X=Y.ERR_STREAM_PUSH_AFTER_EOF,se=Y.ERR_METHOD_NOT_IMPLEMENTED,N=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(1765)(ye,y);var $=b.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(Ce,te,Fe){F=F||S(6138),Ce=Ce||{},typeof Fe!="boolean"&&(Fe=te instanceof F),this.objectMode=!!Ce.objectMode,Fe&&(this.objectMode=this.objectMode||!!Ce.readableObjectMode),this.highWaterMark=j(this,Ce,"readableHighWaterMark",Fe),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ce.emitClose!==!1,this.autoDestroy=!!Ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ce.encoding&&(U||(U=S(7503).s),this.decoder=new U(Ce.encoding),this.encoding=Ce.encoding)}function ye(Ce){if(F=F||S(6138),!(this instanceof ye))return new ye(Ce);var te=this instanceof F;this._readableState=new oe(Ce,this,te),this.readable=!0,Ce&&(typeof Ce.read=="function"&&(this._read=Ce.read),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy)),y.call(this)}function be(Ce,te,Fe,P,M){R("readableAddChunk",te);var q,V=Ce._readableState;if(te===null)V.reading=!1,function(he,fe){if(R("onEofChunk"),!fe.ended){if(fe.decoder){var He=fe.decoder.end();He&&He.length&&(fe.buffer.push(He),fe.length+=fe.objectMode?1:He.length)}fe.ended=!0,fe.sync?it(he):(fe.needReadable=!1,fe.emittedReadable||(fe.emittedReadable=!0,lt(he)))}}(Ce,V);else if(M||(q=function(he,fe){var He,_t;return _t=fe,O.isBuffer(_t)||_t instanceof m||typeof fe=="string"||fe===void 0||he.objectMode||(He=new W("chunk",["string","Buffer","Uint8Array"],fe)),He}(V,te)),q)$(Ce,q);else if(V.objectMode||te&&te.length>0)if(typeof te=="string"||V.objectMode||Object.getPrototypeOf(te)===O.prototype||(te=function(he){return O.from(he)}(te)),P)V.endEmitted?$(Ce,new N):$e(Ce,V,te,!0);else if(V.ended)$(Ce,new X);else{if(V.destroyed)return!1;V.reading=!1,V.decoder&&!Fe?(te=V.decoder.write(te),V.objectMode||te.length!==0?$e(Ce,V,te,!1):Xe(Ce,V)):$e(Ce,V,te,!1)}else P||(V.reading=!1,Xe(Ce,V));return!V.ended&&(V.length<V.highWaterMark||V.length===0)}function $e(Ce,te,Fe,P){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,Ce.emit("data",Fe)):(te.length+=te.objectMode?1:Fe.length,P?te.buffer.unshift(Fe):te.buffer.push(Fe),te.needReadable&&it(Ce)),Xe(Ce,te)}Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ce){this._readableState&&(this._readableState.destroyed=Ce)}}),ye.prototype.destroy=b.destroy,ye.prototype._undestroy=b.undestroy,ye.prototype._destroy=function(Ce,te){te(Ce)},ye.prototype.push=function(Ce,te){var Fe,P=this._readableState;return P.objectMode?Fe=!0:typeof Ce=="string"&&((te=te||P.defaultEncoding)!==P.encoding&&(Ce=O.from(Ce,te),te=""),Fe=!0),be(this,Ce,te,!1,Fe)},ye.prototype.unshift=function(Ce){return be(this,Ce,null,!0,!1)},ye.prototype.isPaused=function(){return this._readableState.flowing===!1},ye.prototype.setEncoding=function(Ce){U||(U=S(7503).s);var te=new U(Ce);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var Fe=this._readableState.buffer.head,P="";Fe!==null;)P+=te.write(Fe.data),Fe=Fe.next;return this._readableState.buffer.clear(),P!==""&&this._readableState.buffer.push(P),this._readableState.length=P.length,this};var Ae=1073741824;function Ze(Ce,te){return Ce<=0||te.length===0&&te.ended?0:te.objectMode?1:Ce!=Ce?te.flowing&&te.length?te.buffer.head.data.length:te.length:(Ce>te.highWaterMark&&(te.highWaterMark=function(Fe){return Fe>=Ae?Fe=Ae:(Fe--,Fe|=Fe>>>1,Fe|=Fe>>>2,Fe|=Fe>>>4,Fe|=Fe>>>8,Fe|=Fe>>>16,Fe++),Fe}(Ce)),Ce<=te.length?Ce:te.ended?te.length:(te.needReadable=!0,0))}function it(Ce){var te=Ce._readableState;R("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(R("emitReadable",te.flowing),te.emittedReadable=!0,process.nextTick(lt,Ce))}function lt(Ce){var te=Ce._readableState;R("emitReadable_",te.destroyed,te.length,te.ended),te.destroyed||!te.length&&!te.ended||(Ce.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,ct(Ce)}function Xe(Ce,te){te.readingMore||(te.readingMore=!0,process.nextTick(st,Ce,te))}function st(Ce,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var Fe=te.length;if(R("maybeReadMore read 0"),Ce.read(0),Fe===te.length)break}te.readingMore=!1}function wt(Ce){var te=Ce._readableState;te.readableListening=Ce.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:Ce.listenerCount("data")>0&&Ce.resume()}function Oe(Ce){R("readable nexttick read 0"),Ce.read(0)}function Qe(Ce,te){R("resume",te.reading),te.reading||Ce.read(0),te.resumeScheduled=!1,Ce.emit("resume"),ct(Ce),te.flowing&&!te.reading&&Ce.read(0)}function ct(Ce){var te=Ce._readableState;for(R("flow",te.flowing);te.flowing&&Ce.read()!==null;);}function Qt(Ce,te){return te.length===0?null:(te.objectMode?Fe=te.buffer.shift():!Ce||Ce>=te.length?(Fe=te.decoder?te.buffer.join(""):te.buffer.length===1?te.buffer.first():te.buffer.concat(te.length),te.buffer.clear()):Fe=te.buffer.consume(Ce,te.decoder),Fe);var Fe}function Vt(Ce){var te=Ce._readableState;R("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,process.nextTick(Tt,te,Ce))}function Tt(Ce,te){if(R("endReadableNT",Ce.endEmitted,Ce.length),!Ce.endEmitted&&Ce.length===0&&(Ce.endEmitted=!0,te.readable=!1,te.emit("end"),Ce.autoDestroy)){var Fe=te._writableState;(!Fe||Fe.autoDestroy&&Fe.finished)&&te.destroy()}}function Pt(Ce,te){for(var Fe=0,P=Ce.length;Fe<P;Fe++)if(Ce[Fe]===te)return Fe;return-1}ye.prototype.read=function(Ce){R("read",Ce),Ce=parseInt(Ce,10);var te=this._readableState,Fe=Ce;if(Ce!==0&&(te.emittedReadable=!1),Ce===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return R("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?Vt(this):it(this),null;if((Ce=Ze(Ce,te))===0&&te.ended)return te.length===0&&Vt(this),null;var P,M=te.needReadable;return R("need readable",M),(te.length===0||te.length-Ce<te.highWaterMark)&&R("length less than watermark",M=!0),te.ended||te.reading?R("reading or ended",M=!1):M&&(R("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(Ce=Ze(Fe,te))),(P=Ce>0?Qt(Ce,te):null)===null?(te.needReadable=te.length<=te.highWaterMark,Ce=0):(te.length-=Ce,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),Fe!==Ce&&te.ended&&Vt(this)),P!==null&&this.emit("data",P),P},ye.prototype._read=function(Ce){$(this,new se("_read()"))},ye.prototype.pipe=function(Ce,te){var Fe=this,P=this._readableState;switch(P.pipesCount){case 0:P.pipes=Ce;break;case 1:P.pipes=[P.pipes,Ce];break;default:P.pipes.push(Ce)}P.pipesCount+=1,R("pipe count=%d opts=%j",P.pipesCount,te);var M=te&&te.end===!1||Ce===process.stdout||Ce===process.stderr?rt:q;function q(){R("onend"),Ce.end()}P.endEmitted?process.nextTick(M):Fe.once("end",M),Ce.on("unpipe",function et(ft,yt){R("onunpipe"),ft===Fe&&yt&&yt.hasUnpiped===!1&&(yt.hasUnpiped=!0,R("cleanup"),Ce.removeListener("close",_t),Ce.removeListener("finish",ot),Ce.removeListener("drain",V),Ce.removeListener("error",He),Ce.removeListener("unpipe",et),Fe.removeListener("end",q),Fe.removeListener("end",rt),Fe.removeListener("data",fe),he=!0,!P.awaitDrain||Ce._writableState&&!Ce._writableState.needDrain||V())});var V=function(et){return function(){var ft=et._readableState;R("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&v(et,"data")&&(ft.flowing=!0,ct(et))}}(Fe);Ce.on("drain",V);var he=!1;function fe(et){R("ondata");var ft=Ce.write(et);R("dest.write",ft),ft===!1&&((P.pipesCount===1&&P.pipes===Ce||P.pipesCount>1&&Pt(P.pipes,Ce)!==-1)&&!he&&(R("false write response, pause",P.awaitDrain),P.awaitDrain++),Fe.pause())}function He(et){R("onerror",et),rt(),Ce.removeListener("error",He),v(Ce,"error")===0&&$(Ce,et)}function _t(){Ce.removeListener("finish",ot),rt()}function ot(){R("onfinish"),Ce.removeListener("close",_t),rt()}function rt(){R("unpipe"),Fe.unpipe(Ce)}return Fe.on("data",fe),function(et,ft,yt){if(typeof et.prependListener=="function")return et.prependListener(ft,yt);et._events&&et._events[ft]?Array.isArray(et._events[ft])?et._events[ft].unshift(yt):et._events[ft]=[yt,et._events[ft]]:et.on(ft,yt)}(Ce,"error",He),Ce.once("close",_t),Ce.once("finish",ot),Ce.emit("pipe",Fe),P.flowing||(R("pipe resume"),Fe.resume()),Ce},ye.prototype.unpipe=function(Ce){var te=this._readableState,Fe={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return Ce&&Ce!==te.pipes||(Ce||(Ce=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,Ce&&Ce.emit("unpipe",this,Fe)),this;if(!Ce){var P=te.pipes,M=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var q=0;q<M;q++)P[q].emit("unpipe",this,{hasUnpiped:!1});return this}var V=Pt(te.pipes,Ce);return V===-1||(te.pipes.splice(V,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),Ce.emit("unpipe",this,Fe)),this},ye.prototype.on=function(Ce,te){var Fe=y.prototype.on.call(this,Ce,te),P=this._readableState;return Ce==="data"?(P.readableListening=this.listenerCount("readable")>0,P.flowing!==!1&&this.resume()):Ce==="readable"&&(P.endEmitted||P.readableListening||(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,R("on readable",P.length,P.reading),P.length?it(this):P.reading||process.nextTick(Oe,this))),Fe},ye.prototype.addListener=ye.prototype.on,ye.prototype.removeListener=function(Ce,te){var Fe=y.prototype.removeListener.call(this,Ce,te);return Ce==="readable"&&process.nextTick(wt,this),Fe},ye.prototype.removeAllListeners=function(Ce){var te=y.prototype.removeAllListeners.apply(this,arguments);return Ce!=="readable"&&Ce!==void 0||process.nextTick(wt,this),te},ye.prototype.resume=function(){var Ce=this._readableState;return Ce.flowing||(R("resume"),Ce.flowing=!Ce.readableListening,function(te,Fe){Fe.resumeScheduled||(Fe.resumeScheduled=!0,process.nextTick(Qe,te,Fe))}(this,Ce)),Ce.paused=!1,this},ye.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ye.prototype.wrap=function(Ce){var te=this,Fe=this._readableState,P=!1;for(var M in Ce.on("end",function(){if(R("wrapped end"),Fe.decoder&&!Fe.ended){var V=Fe.decoder.end();V&&V.length&&te.push(V)}te.push(null)}),Ce.on("data",function(V){R("wrapped data"),Fe.decoder&&(V=Fe.decoder.write(V)),Fe.objectMode&&V==null||(Fe.objectMode||V&&V.length)&&(te.push(V)||(P=!0,Ce.pause()))}),Ce)this[M]===void 0&&typeof Ce[M]=="function"&&(this[M]=function(V){return function(){return Ce[V].apply(Ce,arguments)}}(M));for(var q=0;q<ce.length;q++)Ce.on(ce[q],this.emit.bind(this,ce[q]));return this._read=function(V){R("wrapped _read",V),P&&(P=!1,Ce.resume())},this},typeof Symbol=="function"&&(ye.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=S(7299)),x(this)}),Object.defineProperty(ye.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ye.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ye.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ce){this._readableState&&(this._readableState.flowing=Ce)}}),ye._fromList=Qt,Object.defineProperty(ye.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ye.from=function(Ce,te){return _===void 0&&(_=S(6233)),_(ye,Ce,te)})},9798:function(C,g,S){C.exports=U;var F=S(3690).q,R=F.ERR_METHOD_NOT_IMPLEMENTED,v=F.ERR_MULTIPLE_CALLBACK,y=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,O=F.ERR_TRANSFORM_WITH_LENGTH_0,m=S(6138);function T(I,b){var j=this._transformState;j.transforming=!1;var Y=j.writecb;if(Y===null)return this.emit("error",new v);j.writechunk=null,j.writecb=null,b!=null&&this.push(b),Y(I);var W=this._readableState;W.reading=!1,(W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",x)}function x(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(b,j){_(I,b,j)})}function _(I,b,j){if(b)return I.emit("error",b);if(j!=null&&I.push(j),I._writableState.length)throw new O;if(I._transformState.transforming)throw new y;return I.push(null)}S(1765)(U,m),U.prototype.push=function(I,b){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,b)},U.prototype._transform=function(I,b,j){j(new R("_transform()"))},U.prototype._write=function(I,b,j){var Y=this._transformState;if(Y.writecb=j,Y.writechunk=I,Y.writeencoding=b,!Y.transforming){var W=this._readableState;(Y.needTransform||W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}},U.prototype._read=function(I){var b=this._transformState;b.writechunk===null||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},U.prototype._destroy=function(I,b){m.prototype._destroy.call(this,I,function(j){b(j)})}},8318:function(C,g,S){function F(Xe){var st=this;this.next=null,this.entry=null,this.finish=function(){(function(wt,Oe,Qe){var ct=wt.entry;for(wt.entry=null;ct;){var Qt=ct.callback;Oe.pendingcb--,Qt(void 0),ct=ct.next}Oe.corkedRequestsFree.next=wt})(st,Xe)}}var R;C.exports=ye,ye.WritableState=oe;var v,y={deprecate:S(7839)},O=S(9299),m=S(1549).Buffer,T=S.g.Uint8Array||function(){},U=S(6163),x=S(7269).getHighWaterMark,_=S(3690).q,I=_.ERR_INVALID_ARG_TYPE,b=_.ERR_METHOD_NOT_IMPLEMENTED,j=_.ERR_MULTIPLE_CALLBACK,Y=_.ERR_STREAM_CANNOT_PIPE,W=_.ERR_STREAM_DESTROYED,X=_.ERR_STREAM_NULL_VALUES,se=_.ERR_STREAM_WRITE_AFTER_END,N=_.ERR_UNKNOWN_ENCODING,$=U.errorOrDestroy;function ce(){}function oe(Xe,st,wt){R=R||S(6138),Xe=Xe||{},typeof wt!="boolean"&&(wt=st instanceof R),this.objectMode=!!Xe.objectMode,wt&&(this.objectMode=this.objectMode||!!Xe.writableObjectMode),this.highWaterMark=x(this,Xe,"writableHighWaterMark",wt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Oe=Xe.decodeStrings===!1;this.decodeStrings=!Oe,this.defaultEncoding=Xe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qe){(function(ct,Qt){var Vt=ct._writableState,Tt=Vt.sync,Pt=Vt.writecb;if(typeof Pt!="function")throw new j;if(function(te){te.writing=!1,te.writecb=null,te.length-=te.writelen,te.writelen=0}(Vt),Qt)(function(te,Fe,P,M,q){--Fe.pendingcb,P?(process.nextTick(q,M),process.nextTick(lt,te,Fe),te._writableState.errorEmitted=!0,$(te,M)):(q(M),te._writableState.errorEmitted=!0,$(te,M),lt(te,Fe))})(ct,Vt,Tt,Qt,Pt);else{var Ce=Ze(Vt)||ct.destroyed;Ce||Vt.corked||Vt.bufferProcessing||!Vt.bufferedRequest||Ae(ct,Vt),Tt?process.nextTick($e,ct,Vt,Ce,Pt):$e(ct,Vt,Ce,Pt)}})(st,Qe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Xe.emitClose!==!1,this.autoDestroy=!!Xe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function ye(Xe){var st=this instanceof(R=R||S(6138));if(!st&&!v.call(ye,this))return new ye(Xe);this._writableState=new oe(Xe,this,st),this.writable=!0,Xe&&(typeof Xe.write=="function"&&(this._write=Xe.write),typeof Xe.writev=="function"&&(this._writev=Xe.writev),typeof Xe.destroy=="function"&&(this._destroy=Xe.destroy),typeof Xe.final=="function"&&(this._final=Xe.final)),O.call(this)}function be(Xe,st,wt,Oe,Qe,ct,Qt){st.writelen=Oe,st.writecb=Qt,st.writing=!0,st.sync=!0,st.destroyed?st.onwrite(new W("write")):wt?Xe._writev(Qe,st.onwrite):Xe._write(Qe,ct,st.onwrite),st.sync=!1}function $e(Xe,st,wt,Oe){wt||function(Qe,ct){ct.length===0&&ct.needDrain&&(ct.needDrain=!1,Qe.emit("drain"))}(Xe,st),st.pendingcb--,Oe(),lt(Xe,st)}function Ae(Xe,st){st.bufferProcessing=!0;var wt=st.bufferedRequest;if(Xe._writev&&wt&&wt.next){var Oe=st.bufferedRequestCount,Qe=new Array(Oe),ct=st.corkedRequestsFree;ct.entry=wt;for(var Qt=0,Vt=!0;wt;)Qe[Qt]=wt,wt.isBuf||(Vt=!1),wt=wt.next,Qt+=1;Qe.allBuffers=Vt,be(Xe,st,!0,st.length,Qe,"",ct.finish),st.pendingcb++,st.lastBufferedRequest=null,ct.next?(st.corkedRequestsFree=ct.next,ct.next=null):st.corkedRequestsFree=new F(st),st.bufferedRequestCount=0}else{for(;wt;){var Tt=wt.chunk,Pt=wt.encoding,Ce=wt.callback;if(be(Xe,st,!1,st.objectMode?1:Tt.length,Tt,Pt,Ce),wt=wt.next,st.bufferedRequestCount--,st.writing)break}wt===null&&(st.lastBufferedRequest=null)}st.bufferedRequest=wt,st.bufferProcessing=!1}function Ze(Xe){return Xe.ending&&Xe.length===0&&Xe.bufferedRequest===null&&!Xe.finished&&!Xe.writing}function it(Xe,st){Xe._final(function(wt){st.pendingcb--,wt&&$(Xe,wt),st.prefinished=!0,Xe.emit("prefinish"),lt(Xe,st)})}function lt(Xe,st){var wt=Ze(st);if(wt&&(function(Qe,ct){ct.prefinished||ct.finalCalled||(typeof Qe._final!="function"||ct.destroyed?(ct.prefinished=!0,Qe.emit("prefinish")):(ct.pendingcb++,ct.finalCalled=!0,process.nextTick(it,Qe,ct)))}(Xe,st),st.pendingcb===0&&(st.finished=!0,Xe.emit("finish"),st.autoDestroy))){var Oe=Xe._readableState;(!Oe||Oe.autoDestroy&&Oe.endEmitted)&&Xe.destroy()}return wt}S(1765)(ye,O),oe.prototype.getBuffer=function(){for(var Xe=this.bufferedRequest,st=[];Xe;)st.push(Xe),Xe=Xe.next;return st},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Xe){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(ye,Symbol.hasInstance,{value:function(Xe){return!!v.call(this,Xe)||this===ye&&Xe&&Xe._writableState instanceof oe}})):v=function(Xe){return Xe instanceof this},ye.prototype.pipe=function(){$(this,new Y)},ye.prototype.write=function(Xe,st,wt){var Oe,Qe=this._writableState,ct=!1,Qt=!Qe.objectMode&&(Oe=Xe,m.isBuffer(Oe)||Oe instanceof T);return Qt&&!m.isBuffer(Xe)&&(Xe=function(Vt){return m.from(Vt)}(Xe)),typeof st=="function"&&(wt=st,st=null),Qt?st="buffer":st||(st=Qe.defaultEncoding),typeof wt!="function"&&(wt=ce),Qe.ending?function(Vt,Tt){var Pt=new se;$(Vt,Pt),process.nextTick(Tt,Pt)}(this,wt):(Qt||function(Vt,Tt,Pt,Ce){var te;return Pt===null?te=new X:typeof Pt=="string"||Tt.objectMode||(te=new I("chunk",["string","Buffer"],Pt)),!te||($(Vt,te),process.nextTick(Ce,te),!1)}(this,Qe,Xe,wt))&&(Qe.pendingcb++,ct=function(Vt,Tt,Pt,Ce,te,Fe){if(!Pt){var P=function(he,fe,He){return he.objectMode||he.decodeStrings===!1||typeof fe!="string"||(fe=m.from(fe,He)),fe}(Tt,Ce,te);Ce!==P&&(Pt=!0,te="buffer",Ce=P)}var M=Tt.objectMode?1:Ce.length;Tt.length+=M;var q=Tt.length<Tt.highWaterMark;if(q||(Tt.needDrain=!0),Tt.writing||Tt.corked){var V=Tt.lastBufferedRequest;Tt.lastBufferedRequest={chunk:Ce,encoding:te,isBuf:Pt,callback:Fe,next:null},V?V.next=Tt.lastBufferedRequest:Tt.bufferedRequest=Tt.lastBufferedRequest,Tt.bufferedRequestCount+=1}else be(Vt,Tt,!1,M,Ce,te,Fe);return q}(this,Qe,Qt,Xe,st,wt)),ct},ye.prototype.cork=function(){this._writableState.corked++},ye.prototype.uncork=function(){var Xe=this._writableState;Xe.corked&&(Xe.corked--,Xe.writing||Xe.corked||Xe.bufferProcessing||!Xe.bufferedRequest||Ae(this,Xe))},ye.prototype.setDefaultEncoding=function(Xe){if(typeof Xe=="string"&&(Xe=Xe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Xe+"").toLowerCase())>-1))throw new N(Xe);return this._writableState.defaultEncoding=Xe,this},Object.defineProperty(ye.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ye.prototype._write=function(Xe,st,wt){wt(new b("_write()"))},ye.prototype._writev=null,ye.prototype.end=function(Xe,st,wt){var Oe=this._writableState;return typeof Xe=="function"?(wt=Xe,Xe=null,st=null):typeof st=="function"&&(wt=st,st=null),Xe!=null&&this.write(Xe,st),Oe.corked&&(Oe.corked=1,this.uncork()),Oe.ending||function(Qe,ct,Qt){ct.ending=!0,lt(Qe,ct),Qt&&(ct.finished?process.nextTick(Qt):Qe.once("finish",Qt)),ct.ended=!0,Qe.writable=!1}(this,Oe,wt),this},Object.defineProperty(ye.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Xe){this._writableState&&(this._writableState.destroyed=Xe)}}),ye.prototype.destroy=U.destroy,ye.prototype._undestroy=U.undestroy,ye.prototype._destroy=function(Xe,st){st(Xe)}},7299:function(C,g,S){var F;function R(X,se,N){return se in X?Object.defineProperty(X,se,{value:N,enumerable:!0,configurable:!0,writable:!0}):X[se]=N,X}var v=S(8800),y=Symbol("lastResolve"),O=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),x=Symbol("handlePromise"),_=Symbol("stream");function I(X,se){return{value:X,done:se}}function b(X){var se=X[y];if(se!==null){var N=X[_].read();N!==null&&(X[U]=null,X[y]=null,X[O]=null,se(I(N,!1)))}}function j(X){process.nextTick(b,X)}var Y=Object.getPrototypeOf(function(){}),W=Object.setPrototypeOf((R(F={get stream(){return this[_]},next:function(){var X=this,se=this[m];if(se!==null)return Promise.reject(se);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,ye){process.nextTick(function(){X[m]?ye(X[m]):oe(I(void 0,!0))})});var N,$=this[U];if($)N=new Promise(function(oe,ye){return function(be,$e){oe.then(function(){ye[T]?be(I(void 0,!0)):ye[x](be,$e)},$e)}}($,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(I(ce,!1));N=new Promise(this[x])}return this[U]=N,N}},Symbol.asyncIterator,function(){return this}),R(F,"return",function(){var X=this;return new Promise(function(se,N){X[_].destroy(null,function($){$?N($):se(I(void 0,!0))})})}),F),Y);C.exports=function(X){var se,N=Object.create(W,(R(se={},_,{value:X,writable:!0}),R(se,y,{value:null,writable:!0}),R(se,O,{value:null,writable:!0}),R(se,m,{value:null,writable:!0}),R(se,T,{value:X._readableState.endEmitted,writable:!0}),R(se,x,{value:function($,ce){var oe=N[_].read();oe?(N[U]=null,N[y]=null,N[O]=null,$(I(oe,!1))):(N[y]=$,N[O]=ce)},writable:!0}),se));return N[U]=null,v(X,function($){if($&&$.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=N[O];return ce!==null&&(N[U]=null,N[y]=null,N[O]=null,ce($)),void(N[m]=$)}var oe=N[y];oe!==null&&(N[U]=null,N[y]=null,N[O]=null,oe(I(void 0,!0))),N[T]=!0}),X.on("readable",j.bind(null,N)),N}},8393:function(C,g,S){function F(T,U){var x=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),x.push.apply(x,_)}return x}function R(T,U,x){return U in T?Object.defineProperty(T,U,{value:x,enumerable:!0,configurable:!0,writable:!0}):T[U]=x,T}function v(T,U){for(var x=0;x<U.length;x++){var _=U[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var y=S(1549).Buffer,O=S(9862).inspect,m=O&&O.custom||"inspect";C.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,x;return U=T,x=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,b=""+I.data;I=I.next;)b+=_+I.data;return b}},{key:"concat",value:function(_){if(this.length===0)return y.alloc(0);for(var I,b,j,Y=y.allocUnsafe(_>>>0),W=this.head,X=0;W;)I=W.data,b=Y,j=X,y.prototype.copy.call(I,b,j),X+=W.data.length,W=W.next;return Y}},{key:"consume",value:function(_,I){var b;return _<this.head.data.length?(b=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):b=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,b=1,j=I.data;for(_-=j.length;I=I.next;){var Y=I.data,W=_>Y.length?Y.length:_;if(W===Y.length?j+=Y:j+=Y.slice(0,_),(_-=W)==0){W===Y.length?(++b,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=Y.slice(W));break}++b}return this.length-=b,j}},{key:"_getBuffer",value:function(_){var I=y.allocUnsafe(_),b=this.head,j=1;for(b.data.copy(I),_-=b.data.length;b=b.next;){var Y=b.data,W=_>Y.length?Y.length:_;if(Y.copy(I,I.length-_,0,W),(_-=W)==0){W===Y.length?(++j,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=Y.slice(W));break}++j}return this.length-=j,I}},{key:m,value:function(_,I){return O(this,function(b){for(var j=1;j<arguments.length;j++){var Y=arguments[j]!=null?arguments[j]:{};j%2?F(Object(Y),!0).forEach(function(W){R(b,W,Y[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(Y)):F(Object(Y)).forEach(function(W){Object.defineProperty(b,W,Object.getOwnPropertyDescriptor(Y,W))})}return b}({},I,{depth:0,customInspect:!1}))}}],x&&v(U.prototype,x),T}()},6163:function(C){function g(R,v){F(R,v),S(R)}function S(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function F(R,v){R.emit("error",v)}C.exports={destroy:function(R,v){var y=this,O=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return O||m?(v?v(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(F,this,R)):process.nextTick(F,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(T){!v&&T?y._writableState?y._writableState.errorEmitted?process.nextTick(S,y):(y._writableState.errorEmitted=!0,process.nextTick(g,y,T)):process.nextTick(g,y,T):v?(process.nextTick(S,y),v(T)):process.nextTick(S,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(R,v){var y=R._readableState,O=R._writableState;y&&y.autoDestroy||O&&O.autoDestroy?R.destroy(v):R.emit("error",v)}}},8800:function(C,g,S){var F=S(3690).q.ERR_STREAM_PREMATURE_CLOSE;function R(){}C.exports=function v(y,O,m){if(typeof O=="function")return v(y,null,O);O||(O={}),m=function(se){var N=!1;return function(){if(!N){N=!0;for(var $=arguments.length,ce=new Array($),oe=0;oe<$;oe++)ce[oe]=arguments[oe];se.apply(this,ce)}}}(m||R);var T=O.readable||O.readable!==!1&&y.readable,U=O.writable||O.writable!==!1&&y.writable,x=function(){y.writable||I()},_=y._writableState&&y._writableState.finished,I=function(){U=!1,_=!0,T||m.call(y)},b=y._readableState&&y._readableState.endEmitted,j=function(){T=!1,b=!0,U||m.call(y)},Y=function(se){m.call(y,se)},W=function(){var se;return T&&!b?(y._readableState&&y._readableState.ended||(se=new F),m.call(y,se)):U&&!_?(y._writableState&&y._writableState.ended||(se=new F),m.call(y,se)):void 0},X=function(){y.req.on("finish",I)};return function(se){return se.setHeader&&typeof se.abort=="function"}(y)?(y.on("complete",I),y.on("abort",W),y.req?X():y.on("request",X)):U&&!y._writableState&&(y.on("end",x),y.on("close",x)),y.on("end",j),y.on("finish",I),O.error!==!1&&y.on("error",Y),y.on("close",W),function(){y.removeListener("complete",I),y.removeListener("abort",W),y.removeListener("request",X),y.req&&y.req.removeListener("finish",I),y.removeListener("end",x),y.removeListener("close",x),y.removeListener("finish",I),y.removeListener("end",j),y.removeListener("error",Y),y.removeListener("close",W)}}},6233:function(C){C.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(C,g,S){var F,R=S(3690).q,v=R.ERR_MISSING_ARGS,y=R.ERR_STREAM_DESTROYED;function O(_){if(_)throw _}function m(_,I,b,j){j=function(X){var se=!1;return function(){se||(se=!0,X.apply(void 0,arguments))}}(j);var Y=!1;_.on("close",function(){Y=!0}),F===void 0&&(F=S(8800)),F(_,{readable:I,writable:b},function(X){if(X)return j(X);Y=!0,j()});var W=!1;return function(X){if(!Y&&!W)return W=!0,function(se){return se.setHeader&&typeof se.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void j(X||new y("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function x(_){return _.length?typeof _[_.length-1]!="function"?O:_.pop():O}C.exports=function(){for(var _=arguments.length,I=new Array(_),b=0;b<_;b++)I[b]=arguments[b];var j,Y=x(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new v("streams");var W=I.map(function(X,se){var N=se<I.length-1;return m(X,N,se>0,function($){j||(j=$),$&&W.forEach(T),N||(W.forEach(T),Y(j))})});return I.reduce(U)}},7269:function(C,g,S){var F=S(3690).q.ERR_INVALID_OPT_VALUE;C.exports={getHighWaterMark:function(R,v,y,O){var m=function(T,U,x){return T.highWaterMark!=null?T.highWaterMark:U?T[x]:null}(v,O,y);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new F(O?y:"highWaterMark",m);return Math.floor(m)}return R.objectMode?16:16384}}},9299:function(C,g,S){C.exports=S(1159).EventEmitter},7503:function(C,g,S){var F=S(8387).Buffer,R=F.isEncoding||function(b){switch((b=""+b)&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function v(b){var j;switch(this.encoding=function(Y){var W=function(X){if(!X)return"utf8";for(var se;;)switch(X){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return X;default:if(se)return;X=(""+X).toLowerCase(),se=!0}}(Y);if(typeof W!="string"&&(F.isEncoding===R||!R(Y)))throw new Error("Unknown encoding: "+Y);return W||Y}(b),this.encoding){case"utf16le":this.text=m,this.end=T,j=4;break;case"utf8":this.fillLast=O,j=4;break;case"base64":this.text=U,this.end=x,j=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=F.allocUnsafe(j)}function y(b){return b<=127?0:b>>5==6?2:b>>4==14?3:b>>3==30?4:b>>6==2?-1:-2}function O(b){var j=this.lastTotal-this.lastNeed,Y=function(W,X,se){if((192&X[0])!=128)return W.lastNeed=0,"�";if(W.lastNeed>1&&X.length>1){if((192&X[1])!=128)return W.lastNeed=1,"�";if(W.lastNeed>2&&X.length>2&&(192&X[2])!=128)return W.lastNeed=2,"�"}}(this,b);return Y!==void 0?Y:this.lastNeed<=b.length?(b.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(b.copy(this.lastChar,j,0,b.length),void(this.lastNeed-=b.length))}function m(b,j){if((b.length-j)%2==0){var Y=b.toString("utf16le",j);if(Y){var W=Y.charCodeAt(Y.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],Y.slice(0,-1)}return Y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",j,b.length-1)}function T(b){var j=b&&b.length?this.write(b):"";if(this.lastNeed){var Y=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,Y)}return j}function U(b,j){var Y=(b.length-j)%3;return Y===0?b.toString("base64",j):(this.lastNeed=3-Y,this.lastTotal=3,Y===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",j,b.length-Y))}function x(b){var j=b&&b.length?this.write(b):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function _(b){return b.toString(this.encoding)}function I(b){return b&&b.length?this.write(b):""}g.s=v,v.prototype.write=function(b){if(b.length===0)return"";var j,Y;if(this.lastNeed){if((j=this.fillLast(b))===void 0)return"";Y=this.lastNeed,this.lastNeed=0}else Y=0;return Y<b.length?j?j+this.text(b,Y):this.text(b,Y):j||""},v.prototype.end=function(b){var j=b&&b.length?this.write(b):"";return this.lastNeed?j+"�":j},v.prototype.text=function(b,j){var Y=function(X,se,N){var $=se.length-1;if($<N)return 0;var ce=y(se[$]);return ce>=0?(ce>0&&(X.lastNeed=ce-1),ce):--$<N||ce===-2?0:(ce=y(se[$]))>=0?(ce>0&&(X.lastNeed=ce-2),ce):--$<N||ce===-2?0:(ce=y(se[$]))>=0?(ce>0&&(ce===2?ce=0:X.lastNeed=ce-3),ce):0}(this,b,j);if(!this.lastNeed)return b.toString("utf8",j);this.lastTotal=Y;var W=b.length-(Y-this.lastNeed);return b.copy(this.lastChar,0,W),b.toString("utf8",j,W)},v.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length}},1067:function(C,g,S){var F;(function(R,v){var y="function",O="undefined",m="object",T="string",U="major",x="model",_="name",I="type",b="vendor",j="version",Y="architecture",W="console",X="mobile",se="tablet",N="smarttv",$="wearable",ce="embedded",oe="Amazon",ye="Apple",be="ASUS",$e="BlackBerry",Ae="Browser",Ze="Chrome",it="Firefox",lt="Google",Xe="Huawei",st="LG",wt="Microsoft",Oe="Motorola",Qe="Opera",ct="Samsung",Qt="Sharp",Vt="Sony",Tt="Xiaomi",Pt="Zebra",Ce="Facebook",te="Chromium OS",Fe="Mac OS",P=function(ft){for(var yt={},Et=0;Et<ft.length;Et++)yt[ft[Et].toUpperCase()]=ft[Et];return yt},M=function(ft,yt){return typeof ft===T&&q(yt).indexOf(q(ft))!==-1},q=function(ft){return ft.toLowerCase()},V=function(ft,yt){if(typeof ft===T)return ft=ft.replace(/^\s\s*/,""),typeof yt===O?ft:ft.substring(0,500)},he=function(ft,yt){for(var Et,Ct,hn,$t,nn,Ot,Un=0;Un<yt.length&&!nn;){var gr=yt[Un],Pr=yt[Un+1];for(Et=Ct=0;Et<gr.length&&!nn&&gr[Et];)if(nn=gr[Et++].exec(ft))for(hn=0;hn<Pr.length;hn++)Ot=nn[++Ct],typeof($t=Pr[hn])===m&&$t.length>0?$t.length===2?typeof $t[1]==y?this[$t[0]]=$t[1].call(this,Ot):this[$t[0]]=$t[1]:$t.length===3?typeof $t[1]!==y||$t[1].exec&&$t[1].test?this[$t[0]]=Ot?Ot.replace($t[1],$t[2]):v:this[$t[0]]=Ot?$t[1].call(this,Ot,$t[2]):v:$t.length===4&&(this[$t[0]]=Ot?$t[3].call(this,Ot.replace($t[1],$t[2])):v):this[$t]=Ot||v;Un+=2}},fe=function(ft,yt){for(var Et in yt)if(typeof yt[Et]===m&&yt[Et].length>0){for(var Ct=0;Ct<yt[Et].length;Ct++)if(M(yt[Et][Ct],ft))return Et==="?"?v:Et}else if(M(yt[Et],ft))return Et==="?"?v:Et;return ft},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_t={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,j],[/opios[\/ ]+([\w\.]+)/i],[j,[_,Qe+" Mini"]],[/\bopr\/([\w\.]+)/i],[j,[_,Qe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[j,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,j],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[_,"UC"+Ae]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[j,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[j,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[j,[_,"Smart Lenovo "+Ae]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Ae],j],[/\bfocus\/([\w\.]+)/i],[j,[_,it+" Focus"]],[/\bopt\/([\w\.]+)/i],[j,[_,Qe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[_,Qe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[_,"MIUI "+Ae]],[/fxios\/([-\w\.]+)/i],[j,[_,it]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Ae]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Ae],j],[/samsungbrowser\/([\w\.]+)/i],[j,[_,ct+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],j],[/metasr[\/ ]?([\d\.]+)/i],[j,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,j],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Ce],j],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,j],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[j,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[_,Ze+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Ze+" WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[_,"Android "+Ae]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,j],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[j,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[j,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[j,fe,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[_,it+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,j],[/(cobalt)\/([\w\.]+)/i],[_,[j,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,q]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[x,[b,ct],[I,se]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[x,[b,ct],[I,X]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[x,[b,ye],[I,X]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[x,[b,ye],[I,se]],[/(macintosh);/i],[x,[b,ye]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[x,[b,Qt],[I,X]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[x,[b,Xe],[I,se]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[x,[b,Xe],[I,X]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[x,/_/g," "],[b,Tt],[I,X]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[x,/_/g," "],[b,Tt],[I,se]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[x,[b,"OPPO"],[I,X]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[x,[b,"Vivo"],[I,X]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[x,[b,"Realme"],[I,X]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[x,[b,Oe],[I,X]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[x,[b,Oe],[I,se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[x,[b,st],[I,se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[x,[b,st],[I,X]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[x,[b,"Lenovo"],[I,se]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[x,/_/g," "],[b,"Nokia"],[I,X]],[/(pixel c)\b/i],[x,[b,lt],[I,se]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[x,[b,lt],[I,X]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[x,[b,Vt],[I,X]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[x,"Xperia Tablet"],[b,Vt],[I,se]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[x,[b,"OnePlus"],[I,X]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[x,[b,oe],[I,se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[x,/(.+)/g,"Fire Phone $1"],[b,oe],[I,X]],[/(playbook);[-\w\),; ]+(rim)/i],[x,b,[I,se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[x,[b,$e],[I,X]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[x,[b,be],[I,se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[x,[b,be],[I,X]],[/(nexus 9)/i],[x,[b,"HTC"],[I,se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[x,/_/g," "],[I,X]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[x,[b,"Acer"],[I,se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[x,[b,"Meizu"],[I,X]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[x,[b,"Ulefone"],[I,X]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,x,[I,X]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,x,[I,se]],[/(surface duo)/i],[x,[b,wt],[I,se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[x,[b,"Fairphone"],[I,X]],[/(u304aa)/i],[x,[b,"AT&T"],[I,X]],[/\bsie-(\w*)/i],[x,[b,"Siemens"],[I,X]],[/\b(rct\w+) b/i],[x,[b,"RCA"],[I,se]],[/\b(venue[\d ]{2,7}) b/i],[x,[b,"Dell"],[I,se]],[/\b(q(?:mv|ta)\w+) b/i],[x,[b,"Verizon"],[I,se]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[x,[b,"Barnes & Noble"],[I,se]],[/\b(tm\d{3}\w+) b/i],[x,[b,"NuVision"],[I,se]],[/\b(k88) b/i],[x,[b,"ZTE"],[I,se]],[/\b(nx\d{3}j) b/i],[x,[b,"ZTE"],[I,X]],[/\b(gen\d{3}) b.+49h/i],[x,[b,"Swiss"],[I,X]],[/\b(zur\d{3}) b/i],[x,[b,"Swiss"],[I,se]],[/\b((zeki)?tb.*\b) b/i],[x,[b,"Zeki"],[I,se]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],x,[I,se]],[/\b(ns-?\w{0,9}) b/i],[x,[b,"Insignia"],[I,se]],[/\b((nxa|next)-?\w{0,9}) b/i],[x,[b,"NextBook"],[I,se]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],x,[I,X]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],x,[I,X]],[/\b(ph-1) /i],[x,[b,"Essential"],[I,X]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[x,[b,"Envizen"],[I,se]],[/\b(trio[-\w\. ]+) b/i],[x,[b,"MachSpeed"],[I,se]],[/\btu_(1491) b/i],[x,[b,"Rotor"],[I,se]],[/(shield[\w ]+) b/i],[x,[b,"Nvidia"],[I,se]],[/(sprint) (\w+)/i],[b,x,[I,X]],[/(kin\.[onetw]{3})/i],[[x,/\./g," "],[b,wt],[I,X]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[x,[b,Pt],[I,se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[x,[b,Pt],[I,X]],[/smart-tv.+(samsung)/i],[b,[I,N]],[/hbbtv.+maple;(\d+)/i],[[x,/^/,"SmartTV"],[b,ct],[I,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,st],[I,N]],[/(apple) ?tv/i],[b,[x,ye+" TV"],[I,N]],[/crkey/i],[[x,Ze+"cast"],[b,lt],[I,N]],[/droid.+aft(\w+)( bui|\))/i],[x,[b,oe],[I,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[x,[b,Qt],[I,N]],[/(bravia[\w ]+)( bui|\))/i],[x,[b,Vt],[I,N]],[/(mitv-\w{5}) bui/i],[x,[b,Tt],[I,N]],[/Hbbtv.*(technisat) (.*);/i],[b,x,[I,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,V],[x,V],[I,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,x,[I,W]],[/droid.+; (shield) bui/i],[x,[b,"Nvidia"],[I,W]],[/(playstation [345portablevi]+)/i],[x,[b,Vt],[I,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[x,[b,wt],[I,W]],[/((pebble))app/i],[b,x,[I,$]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[x,[b,ye],[I,$]],[/droid.+; (glass) \d/i],[x,[b,lt],[I,$]],[/droid.+; (wt63?0{2,3})\)/i],[x,[b,Pt],[I,$]],[/(quest( 2| pro)?)/i],[x,[b,Ce],[I,$]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[I,ce]],[/(aeobc)\b/i],[x,[b,oe],[I,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[x,[I,X]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[x,[I,se]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,se]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,X]],[/(android[-\w\. ]{0,9});.+buil/i],[x,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,j],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,j],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[j,fe,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[j,fe,He],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Fe],[j,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[j,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,j],[/\(bb(10);/i],[j,[_,$e]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[j,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[_,it+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[j,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[j,[_,Ze+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,te],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,j],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],j],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,j]]},ot=function(ft,yt){if(typeof ft===m&&(yt=ft,ft=v),!(this instanceof ot))return new ot(ft,yt).getResult();var Et=typeof R!==O&&R.navigator?R.navigator:v,Ct=ft||(Et&&Et.userAgent?Et.userAgent:""),hn=Et&&Et.userAgentData?Et.userAgentData:v,$t=yt?function(Ot,Un){var gr={};for(var Pr in Ot)Un[Pr]&&Un[Pr].length%2==0?gr[Pr]=Un[Pr].concat(Ot[Pr]):gr[Pr]=Ot[Pr];return gr}(_t,yt):_t,nn=Et&&Et.userAgent==Ct;return this.getBrowser=function(){var Ot,Un={};return Un[_]=v,Un[j]=v,he.call(Un,Ct,$t.browser),Un[U]=typeof(Ot=Un[j])===T?Ot.replace(/[^\d\.]/g,"").split(".")[0]:v,nn&&Et&&Et.brave&&typeof Et.brave.isBrave==y&&(Un[_]="Brave"),Un},this.getCPU=function(){var Ot={};return Ot[Y]=v,he.call(Ot,Ct,$t.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[b]=v,Ot[x]=v,Ot[I]=v,he.call(Ot,Ct,$t.device),nn&&!Ot[I]&&hn&&hn.mobile&&(Ot[I]=X),nn&&Ot[x]=="Macintosh"&&Et&&typeof Et.standalone!==O&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ot[x]="iPad",Ot[I]=se),Ot},this.getEngine=function(){var Ot={};return Ot[_]=v,Ot[j]=v,he.call(Ot,Ct,$t.engine),Ot},this.getOS=function(){var Ot={};return Ot[_]=v,Ot[j]=v,he.call(Ot,Ct,$t.os),nn&&!Ot[_]&&hn&&hn.platform!="Unknown"&&(Ot[_]=hn.platform.replace(/chrome os/i,te).replace(/macos/i,Fe)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===T&&Ot.length>500?V(Ot,500):Ot,this},this.setUA(Ct),this};ot.VERSION="1.0.37",ot.BROWSER=P([_,j,U]),ot.CPU=P([Y]),ot.DEVICE=P([x,b,I,W,X,N,se,$,ce]),ot.ENGINE=ot.OS=P([_,j]),typeof g!==O?(C.exports&&(g=C.exports=ot),g.UAParser=ot):S.amdO?(F=(function(){return ot}).call(g,S,g,C))===v||(C.exports=F):typeof R!==O&&(R.UAParser=ot);var rt=typeof R!==O&&(R.jQuery||R.Zepto);if(rt&&!rt.ua){var et=new ot;rt.ua=et.getResult(),rt.ua.get=function(){return et.getUA()},rt.ua.set=function(ft){et.setUA(ft);var yt=et.getResult();for(var Et in yt)rt.ua[Et]=yt[Et]}}})(typeof window=="object"?window:this)},7839:function(C,g,S){function F(R){try{if(!S.g.localStorage)return!1}catch(y){return!1}var v=S.g.localStorage[R];return v!=null&&String(v).toLowerCase()==="true"}C.exports=function(R,v){if(F("noDeprecation"))return R;var y=!1;return function(){if(!y){if(F("throwDeprecation"))throw new Error(v);F("traceDeprecation")?console.trace(v):console.warn(v),y=!0}return R.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(C){C.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(C){C.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(C){C.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(C){C.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(C){C.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(C){C.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},d={};function p(C){var g=d[C];if(g!==void 0)return g.exports;var S=d[C]={exports:{}};return l[C].call(S.exports,S,S.exports,p),S.exports}p.amdO={},p.n=function(C){var g=C&&C.__esModule?function(){return C.default}:function(){return C};return p.d(g,{a:g}),g},p.d=function(C,g){for(var S in g)p.o(g,S)&&!p.o(C,S)&&Object.defineProperty(C,S,{enumerable:!0,get:g[S]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(C){if(typeof window=="object")return window}}(),p.o=function(C,g){return Object.prototype.hasOwnProperty.call(C,g)};var w={};return function(){p.d(w,{default:function(){return m}}),p(8416);var C,g=p(1715),S=p(8080),F=p(1737),R=p(1139),v=function(){var T,U="application/dash+xml";function x(I,b,j){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var Y,W=I.id||I.name||"video element";if(!(b=b||[].slice.call(I.querySelectorAll("source")).filter(function(X){return X.type==U})[0])&&I.src)(b=document.createElement("source")).src=I.src;else if(!b&&!I.src)return null;return j=j||{},(Y=(0,R.Z)(j).create()).initialize(I,b.src,I.autoplay),T||(T=Y.getDebug().getLogger()),T.debug("Converted "+W+" to dash.js player and added content: "+b.src),I._dashjs_player=Y,Y}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:x,createAll:function(I,b){var j=[];I=I||"[data-dashjs-player]";for(var Y=(b=b||document).querySelectorAll(I),W=0;W<Y.length;W++){var X=x(Y[W],null);j.push(X)}for(var se=b.querySelectorAll('source[type="'+U+'"]'),N=0;N<se.length;N++){var $=x(_(se[N]),null);j.push($)}return j}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?v.createAll():C=window.setInterval(function(){window.dashjs&&(window.clearInterval(C),v.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),v.createAll()}));var y=v,O=p(6398);dashjs.Protection=F.default,dashjs.MetricsReporting=S.default,dashjs.MediaPlayerFactory=y,dashjs.Debug=O.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),w.default}()})})(TF);var J7=TF.exports;const eV=WA(J7);var _u,Gi,Hw,Vw,Yp={};Yp.d=(o,i)=>{for(var l in i)Yp.o(i,l)&&!Yp.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:i[l]})},Yp.o=(o,i)=>Object.prototype.hasOwnProperty.call(o,i);var D0={};function TL(o,i){(i==null||i>o.length)&&(i=o.length);for(var l=0,d=Array(i);l<i;l++)d[l]=o[l];return d}function $i(o){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),d.forEach(function(p){var w;w=l[p],p in o?Object.defineProperty(o,p,{value:w,enumerable:!0,configurable:!0,writable:!0}):o[p]=w})}return o}function so(o,i){return i=i!=null?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(l,d){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);p.push.apply(p,w)}return p}(Object(i)).forEach(function(l){Object.defineProperty(o,l,Object.getOwnPropertyDescriptor(i,l))}),o}function SL(o,i){return function(l){if(Array.isArray(l))return l}(o)||function(l,d){var p,w,C=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(C!=null){var g=[],S=!0,F=!1;try{for(C=C.call(l);!(S=(p=C.next()).done)&&(g.push(p.value),!d||g.length!==d);S=!0);}catch(R){F=!0,w=R}finally{try{S||C.return==null||C.return()}finally{if(F)throw w}}return g}}(o,i)||function(l,d){if(l){if(typeof l=="string")return TL(l,d);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return TL(l,d)}}(o,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Yp.d(D0,{GP:()=>Hw,fZ:()=>nV,vn:()=>Vw}),(_u=Hw||(Hw={})).LOADED="loaded",_u.SEEKING="seeking",_u.SEEKED="seeked",_u.BUFFERING="buffering",_u.BUFFERED="buffered",_u.PLAY="play",_u.PLAYING="playing",_u.PAUSE="pause",_u.ENDED="ended",_u.TIME_UPDATE="timeupdate",(Gi=Vw||(Vw={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var tV={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},nV=function(o){var i=o.mediaElement,l=o.callback,d=o.allowResumeAfterEnded,p=d!==void 0&&d,w=null,C=function(){typeof w=="number"&&clearTimeout(w)},g=$i({},tV),S=function(){return p?g.loading:g.loading||g.ended},F=function(){!g.loading&&g.buffering&&i.playbackRate>0&&(g=so($i({},g),{buffering:!1}),l("buffered")),g.loading&&(i.playbackRate===0?g=so($i({},g),{deferLoadedEvent:!0}):(g=so($i({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},R=function(){S()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=so($i({},g),{seeking:!0,buffering:!1}),l("seeking"))},v=function(){if(!S()&&g.seeking){if(i.playbackRate===0){g=so($i({},g),{deferSeekedEvent:!0});return}g=so($i({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},y=function(){if(C(),!S()&&!g.seeking){if(i.seeking){R();return}g.buffering||(g=so($i({},g),{buffering:!0}),l("buffering"))}},O=function(){if(C(),i.playbackRate===0){g=so($i({},g),{deferPlayingEvent:!0});return}(g=so($i({},g),{deferPlayingEvent:!1})).loading&&F(),g.initialPlayFired?g.buffering?(g=so($i({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=so($i({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=so($i({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=so($i({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&i.playbackRate===0&&!i.seeking},T=[["canplaythrough",F],["playing",O],["waiting",y],["seeking",R],["seeked",v],["ended",function(){g=so($i({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),C(),l("ended")}],["timeupdate",function(){S()||(g.buffering&&!i.paused&&(g=so($i({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!S()&&g.paused&&g.initialPlayFired&&(g=so($i({},g),{playRequested:!0}),l("play"))}],["pause",function(){!i.ended&&(g.playRequested||!g.paused)&&((g=so($i({},g),{playRequested:!1})).deferLoadedEvent?(g=so($i({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),i.paused&&(g=so($i({},g),{paused:!0}),l("pause"))):(g=so($i({},g),{paused:!0}),l("pause")))}],["ratechange",function(){C();var U=i.playbackRate>0;g.deferLoadedEvent&&U&&F(),g.deferSeekedEvent&&U&&v(),g.deferPlayingEvent&&U&&O(),!S()&&(m()?w=window.setTimeout(function(){m()&&y()},50):g.buffering&&U&&(g=so($i({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var x=SL(U,2),_=x[0],I=x[1];return i.addEventListener(_,I)}),{teardown:function(){C(),T.forEach(function(U){var x=SL(U,2),_=x[0],I=x[1];return i.removeEventListener(_,I)})}}},Tu=D0.GP;D0.vn;var rV=D0.fZ;const iV={NEAR_END:"nearend"};class SF extends hf{constructor(i){var l;super(),this.options=i,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(i){return{currentTime:i.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=rV({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:i=>{const l=this.createBaseEventPayload(this.video);switch(i){case Tu.LOADED:{this.emit("loaded",l);break}case Tu.SEEKING:{this.emit("seeking",l);break}case Tu.SEEKED:{this.emit("seeked",l);break}case Tu.BUFFERING:{this.emit("buffering",l);break}case Tu.BUFFERED:{this.emit("buffered",l);break}case Tu.PLAY:{this.emit("play",l);break}case Tu.PLAYING:{this.emit("playing",l);break}case Tu.PAUSE:{this.emit("pause",l);break}case Tu.ENDED:{this.emit("ended",l);break}case Tu.TIME_UPDATE:{const d=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&d>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&d<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(iV.NEAR_END,{...l,remainingTime:d})),this.emit("timeupdate",l);break}}}})}destroy(){var i;(i=this.eventFilter)==null||i.teardown()}getStats(){const i=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:i.droppedVideoFrames,totalVideoFrames:i.totalVideoFrames}}}class oV extends Error{constructor(i,l){super(i),this.rawError=l}}class aV extends SF{constructor(i){var d,p;super(i),this.name="DashJSEngine",this.player=eV.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(w){return w+i.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(d=this.options)==null?void 0:d.widevineLicenseUrl,httpRequestHeaders:i.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),console.log("init dash player"),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(i,l){this.setupMediaEventFilter(),await new Promise((d,p)=>{var w;this.once("loaded",()=>{d()});try{this.player.attachSource(i,(w=l==null?void 0:l.startTimeSeconds)!=null?w:0)}catch(C){p(new oV("UnknownError",C))}})}}var wF={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(o){(function(){var i=typeof window<"u"?window:Kc,l={};(function(p,w,C){var g;function S(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var F=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function R(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof w=="object"&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var v=R(this);function y(e,t){if(t)e:{var n=v;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&F(n,e,{configurable:!0,writable:!0,value:t})}}y("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,f){this.g=c,F(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),y("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=v[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&F(r.prototype,e,{configurable:!0,writable:!0,value:function(){return O(S(this))}})}return e});function O(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:S(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},x;if(typeof Object.setPrototypeOf=="function")x=Object.setPrototypeOf;else{var _;e:{var I={a:!0},b={};try{b.__proto__=I,_=b.a;break e}catch(e){}_=!1}x=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var j=x;function Y(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,j)j(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Ij=t.prototype}function W(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function X(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}W.prototype.s=function(e){this.h=e};function se(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}W.prototype.return=function(e){this.i={return:e},this.g=this.j};function N(e,t,n){return e.g=n,{value:t}}W.prototype.u=function(e){this.g=e};function $(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function ye(e,t,n){e.g=t,e.m=n||0}function be(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function $e(e){e.A=[e.i],e.m=0,e.j=0}function Ae(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Ze(e){this.g=new W,this.h=e}function it(e,t){X(e.g);var n=e.g.l;return n?lt(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),Xe(e))}function lt(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(f){return e.g.l=null,se(e.g,f),Xe(e)}return e.g.l=null,r.call(e.g,c),Xe(e)}function Xe(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,se(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function st(e){this.next=function(t){return X(e.g),e.g.l?t=lt(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Xe(e)),t},this.throw=function(t){return X(e.g),e.g.l?t=lt(e,e.g.l.throw,t,e.g.s):(se(e.g,t),t=Xe(e)),t},this.return=function(t){return it(e,t)},this[Symbol.iterator]=function(){return this}}function wt(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(f){f.done?r(f.value):Promise.resolve(f.value).then(t,n).then(c,u)}c(e.next())})}function Oe(e){return wt(new st(new Ze(e)))}function Qe(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}y("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function r(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var u=v.setTimeout;n.prototype.i=function(f){u(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var E=f[h];f[h]=null;try{E()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(A){return function(k){E||(E=!0,A.call(h,k))}}var h=this,E=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;u(function(){if(f.B()){var h=v.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=v.CustomEvent,h=v.Event,E=v.dispatchEvent;return typeof E>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=v.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,E(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)c.h(this.g[f]);this.g=null}};var c=new n;return t.prototype.H=function(f){var h=this.j();f.Fd(h.resolve,h.reject)},t.prototype.I=function(f,h){var E=this.j();try{f.call(h,E.resolve,E.reject)}catch(A){E.reject(A)}},t.prototype.then=function(f,h){function E(ne,z){return typeof ne=="function"?function(ve){try{A(ne(ve))}catch(Pe){k(Pe)}}:z}var A,k,G=new t(function(ne,z){A=ne,k=z});return this.Fd(E(f,A),E(h,k)),G},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Fd=function(f,h){function E(){switch(A.h){case 1:f(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=r,t.reject=function(f){return new t(function(h,E){E(f)})},t.race=function(f){return new t(function(h,E){for(var A=m(f),k=A.next();!k.done;k=A.next())r(k.value).Fd(h,E)})},t.all=function(f){var h=m(f),E=h.next();return E.done?r([]):new t(function(A,k){function G(ve){return function(Pe){ne[ve]=Pe,z--,z==0&&A(ne)}}var ne=[],z=0;do ne.push(void 0),z++,r(E.value).Fd(G(ne.length-1),k),E=h.next();while(!E.done)})},t});function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}y("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var A;!(A=E.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function r(E){var A=typeof E;return A==="object"&&E!==null||A==="function"}function u(E){if(!ct(E,f)){var A=new n;F(E,f,{value:A})}}function c(E){var A=Object[E];A&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),A(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),A=Object.seal({}),k=new e([[E,2],[A,3]]);return k.get(E)!=2||k.get(A)!=3?!1:(k.delete(E),k.set(A,4),!k.has(E)&&k.get(A)==4)}catch(G){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,A){if(!r(E))throw Error("Invalid WeakMap key");if(u(E),!ct(E,f))throw Error("WeakMap key fail: "+E);return E[f][this.g]=A,this},t.prototype.get=function(E){return r(E)&&ct(E,f)?E[f][this.g]:void 0},t.prototype.has=function(E){return r(E)&&ct(E,f)&&ct(E[f],this.g)},t.prototype.delete=function(E){return r(E)&&ct(E,f)&&ct(E[f],this.g)?delete E[f][this.g]:!1},t}),y("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var A=h.g;return O(function(){if(A){for(;A.head!=h.g;)A=A.Ab;for(;A.next!=A.head;)return A=A.next,{done:!1,value:E(A)};A=null}return{done:!0,value:void 0}})}function r(h,E){var A=E&&typeof E;A=="object"||A=="function"?c.has(E)?A=c.get(E):(A=""+ ++f,c.set(E,A)):A="p_"+E;var k=h.h[A];if(k&&ct(h.h,A))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:A,list:k,index:h,entry:G}}return{id:A,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var A=E.entries(),k=A.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=A.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!A.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var A=r(this,h);return A.list||(A.list=this.h[A.id]=[]),A.entry?A.entry.value=E:(A.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},A.list.push(A.entry),this.g.Ab.next=A.entry,this.g.Ab=A.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var A=this.entries(),k;!(k=A.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var f=0;return u}),y("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(f){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function Qt(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}y("Array.prototype.keys",function(e){return e||function(){return Qt(this,function(t){return t})}});function Vt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}y("Array.prototype.findIndex",function(e){return e||function(t,n){return Vt(this,t,n).gg}}),y("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),y("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function Tt(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y("String.prototype.includes",function(e){return e||function(t,n){return Tt(this,t,"includes").indexOf(t,n||0)!==-1}}),y("Array.prototype.find",function(e){return e||function(t,n){return Vt(this,t,n).v}}),y("String.prototype.startsWith",function(e){return e||function(t,n){var r=Tt(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var f=0;f<c&&n<u;)if(r[n++]!=t[f++])return!1;return f>=c}}),y("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),y("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var f=0;!(c=t.next()).done;)u.push(n.call(r,c.value,f++))}else for(c=t.length,f=0;f<c;f++)u.push(n.call(r,t[f],f));return u}});var Pt=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)ct(r,u)&&(e[u]=r[u])}return e};y("Object.assign",function(e){return e||Pt}),y("Array.prototype.values",function(e){return e||function(){return Qt(this,function(t,n){return n})}}),y("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),y("Array.prototype.entries",function(e){return e||function(){return Qt(this,function(t,n){return[t,n]})}}),y("String.prototype.repeat",function(e){return e||function(t){var n=Tt(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),y("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),y("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),y("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ct(t,r)&&n.push(t[r]);return n}}),y("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),y("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),y("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),y("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ct(t,r)&&n.push([r,t[r]]);return n}});var Ce=this||self;function te(e,t){e=e.split(".");var n=Ce;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Fe(){}function P(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function V(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}V.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},V.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},V.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function he(){}function fe(){}function He(){}function _t(e){var t=Qe.apply(1,arguments);ft.has(e)||(ft.add(e),He.apply(he,T(t)))}function ot(){}function rt(){}function et(){}var ft=new Set;p.console&&(He=function(){return console.warn.apply(console,T(Qe.apply(0,arguments)))},fe=function(){console.error.apply(console,T(Qe.apply(0,arguments)))});function yt(){this.g={}}g=yt.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function Et(){this.g=new yt}g=Et.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,r){this.g&&(e=new Ct(e,t,n,r),this.g.push(t,e))},g.na=function(e,t,n,r){function u(f){c.Kb(e,t,u),n(f)}var c=this;this.D(e,t,u,r)},g.Kb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},te("shaka.util.EventManager",Et),Et.prototype.removeAll=Et.prototype.ib,Et.prototype.unlisten=Et.prototype.Kb,Et.prototype.listenOnce=Et.prototype.na,Et.prototype.listen=Et.prototype.D,Et.prototype.release=Et.prototype.release;function Ct(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=hn(e,r),this.target.addEventListener(t,n,this.g)}Ct.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function hn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),$t(e)?t:t.capture||!1}function $t(e){var t=nn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Ot(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Pr(e,t){this.g=e,this.h=t}Pr.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Pr(5,0),r=Or,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function ei(e,t,n,r){He([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Ji(e,t,n,r){fe([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Or=null;function eo(){}eo.prototype.extract=function(){},eo.prototype.decode=function(){return[]},eo.prototype.clear=function(){},eo.prototype.getStreams=function(){return[]};function _i(){}_i.prototype.init=function(){},_i.prototype.parse=function(){return[]};function Mi(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(to(e)==to(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function to(e){return e instanceof ArrayBuffer?e:e.buffer}function Ti(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function bu(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,r){var u=to(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,f))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}te("shaka.util.BufferUtils",Mi),Mi.toDataView=tn,Mi.toUint16=bu,Mi.toUint8=Qn,Mi.toArrayBuffer=Ti,Mi.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},te("shaka.media.IClosedCaptionParser",an);function St(e){this.l=new _i,(e=zt[e.toLowerCase()])&&(this.l=e()),this.g=new eo,(e=Nt)&&(this.g=e())}St.prototype.init=function(e){this.l.init(e)},St.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},St.prototype.h=function(){this.g.clear()},St.prototype.j=function(){return this.g.getStreams()},te("shaka.media.ClosedCaptionParser",St),St.findDecoder=function(){return Nt},St.unregisterDecoder=function(){Nt=null},St.registerDecoder=function(e){Nt=e},St.findParser=function(e){return zt[e]},St.unregisterParser=function(e){delete zt[e]},St.registerParser=function(e,t){zt[e]=t};var zt={},Nt=null;function Kt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function gn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=Kt),e.length!=t.length)return!1;t=t.slice();var r={};e=m(e);for(var u=e.next();!u.done;r={ne:r.ne},u=e.next()){if(r.ne=u.value,u=t.findIndex(function(c){return function(f){return n(c.ne,f)}}(r)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=Kt),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function bn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Kn,this.writingMode=rn,this.lineInterpretation=cn,this.line=null,this.lineHeight="",this.lineAlign=Cn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Lr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new bn(e,t,""),e.lineBreak=!0,e}bn.prototype.clone=function(){var e=new bn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}te("shaka.text.Cue",bn),bn.equal=on,bn.prototype.clone=bn.prototype.clone;var Bn="auto";bn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};bn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};bn.displayAlign=Ur;var Kn="ltr";bn.direction={HORIZONTAL_LEFT_TO_RIGHT:Kn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";bn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var cn=0;bn.lineInterpretation={LINE_NUMBER:cn,PERCENTAGE:1};var Cn="start",Jn={CENTER:"center",START:Cn,END:"end"};bn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};bn.defaultTextColor=ar;var Cr={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};bn.defaultTextBackgroundColor=Cr;var Lr=400;bn.fontWeight={NORMAL:Lr,BOLD:700};var Yi="normal",no={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};bn.fontStyle=no,bn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=hi}te("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var hi="";Br.scrollMode={NONE:hi,UP:"up"};function yi(){}yi.prototype.destroy=function(){};function So(e,t,n){Jo[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function ro(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([sc,ru,ml,Ci]),u=r.next();!u.done;u=r.next())if(u=Jo[n+"-"+u.value]){var c=u.ge(),f=c.isSupported(e,t);if(c.destroy(),f)return u.ge}return null}te("shaka.transmuxer.TransmuxerEngine",yi),yi.findTransmuxer=ro,yi.unregisterTransmuxer=function(e,t){delete Jo[e.toLowerCase().split(";")[0]+"-"+t]},yi.registerTransmuxer=So,yi.prototype.destroy=yi.prototype.destroy;var Jo={},Ci=1,ml=2,ru=3,sc=4;yi.PluginPriority={FALLBACK:Ci,PREFERRED_SECONDARY:ml,PREFERRED:ru,APPLICATION:sc};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var gf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function si(e){var t;e instanceof si?(Rs(this,e.kb),this.mc=e.mc,_n(this,e.wb),$n(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(gf))?(Rs(this,t[1]||"",!0),this.mc=ti(t[2]||""),_n(this,t[3]||"",!0),$n(this,t[4]),this.Pa=ti(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ti(t[7]||"")):this.g=new Wi(null)}g=si.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,$r,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,$r,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Di:ea,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,wo)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new si);var n=!!e.kb;n?Rs(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var r=e.Pa;if(n)$n(t,e.Bc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.wb&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],f=0;f<r.length;){var h=r[f++];h=="."?u&&f==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&f==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new si(this)};function Rs(e,t,n){e.kb=n?ti(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ti(t,!0):t}function $n(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,ui)),e.g=new Wi(t))}function ti(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var $r=/[#\/\?@]/g,ea=/[#\?:]/g,Di=/[#\?]/g,ui=/[#\?@]/g,wo=/#/g;function Wi(e){this.g=e||null}function Go(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function ta(e){return Go(e),e.Zc}g.add=function(e,t){Go(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return Go(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return Go(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),r=this.Ca[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function pt(e,t,n){var r=Qe.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}pt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},te("shaka.util.Error",pt),pt.Severity={RECOVERABLE:1,CRITICAL:2},pt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},pt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function na(e){this.h=e,this.g=void 0}na.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ns(e){this.h=e,this.g=null}Ns.prototype.X=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){p.clearTimeout(r),n=!1},r=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ns.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ns(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ns(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},te("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function Ao(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function iu(e){return lc().canPlayType(e)!=""}function yl(){return!!navigator.userAgent.match(/Edge?\//)}function ds(){return Yr("Xbox One")}function ja(){return Yr("Tizen")}function Ru(){return Yr("Tizen 3")}function Nu(){return Yr("Tizen 2")}function ra(){return Yr("Web0S")}function ia(){return Yr("CrKey")}function ou(){if(!Yr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function hs(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ja()&&!Yr("PC=EOS")&&!Yr("PC=APL")&&!Yr("VirginMedia")&&!Yr("SOPOpenBrowser")&&!Nr()&&!Yr("AFT")&&!Yr("WPE")}function uc(){return Yr("PlayStation 5")}function Nr(){return Yr("PlayStation 4")}function ps(){return Yr("Hisense")||Yr("VIDAA")}function gs(){if(!hs())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yr(e){return(navigator.userAgent||"").includes(e)}function lc(){return oa||(vl||(vl=new pr(function(){oa=null})),(oa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(oa=document.createElement("video")),vl.X(1),oa)}function Ta(){var e,t,n,r,u,c,f,h,E,A;return Oe(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},ia()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(ja()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){He("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(ds()){n=new Windows.Media.Protection.ProtectionCapabilities,r=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===r.maybe)}catch(G){u=r.notSupported}u===r.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(ra()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){He("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(ps()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!Nr()&&!uc()){k.u(2);break}return f=!1,ce(k,8),N(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,f=h.resolution==="4K",ye(k,9);break;case 8:return be(k),ce(k,11),N(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,f=E.resolution==="4K",ye(k,9);break;case 11:A=be(k),He("PlayStation: Failed to get the display info:",A);case 9:f?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var vl=null,oa=null;function ms(){}function Kr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!Nr())return e=new TextDecoder().decode(e),e.includes("�")&&fe('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function Za(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new pt(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return uh(r)}function Ga(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Kr(n);if(n[0]==254&&n[1]==255)return Za(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Za(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Za(e,!1);if(n[1]==0&&n[3]==0)return Za(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Kr(e);throw new pt(2,2,2003)}function qa(e){if(p.TextEncoder&&!Nr()){var t=new TextEncoder;return Ti(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ti(t)}function mf(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function uh(e){return Fg.value()(e)}function Io(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}te("shaka.util.StringUtils",ms),ms.resetFromCharCode=function(){Fg.g=void 0},ms.toUTF16=mf,ms.toUTF8=qa,ms.fromBytesAutoDetect=Ga,ms.fromUTF16=Za,ms.fromUTF8=Kr;var Fg=new na(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.Db)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.Db));return u}}(t);return null});function Pi(){}function yf(e){return e=uh(Qn(e)),btoa(e)}function au(e,t){return t=t==null?!0:t,e=yf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function qo(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function su(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=p.parseInt(e.substr(2*r,2),16);return n}function xs(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function li(){for(var e=Qe.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}te("shaka.util.Uint8ArrayUtils",Pi),Pi.concat=li,Pi.toHex=xs,Pi.fromHex=su,Pi.fromBase64=qo,Pi.toBase64=au,Pi.toStandardBase64=yf;function co(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new si(e[0]);return t=new si(t[0]),[n.resolve(t).toString()]}t=t.map(function(f){return new si(f)}),n=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new si(r.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(r.resolve(c.value).toString())}return n}function xu(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function lh(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(f,h){var E=h;E.length!=22&&(E=au(su(h),!1));var A=f;A.length!=22&&(A=au(su(f),!1)),f={kty:"oct",kid:E,k:A},n.push(f),r.push(f.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:Qn(qa(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Mu(e,t){if(t.length==1)return t[0];if(e=Co(e,t),e!=null)return e;throw new pt(2,4,4025,t)}function Co(e,t){for(var n=m(fh[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==yr?"":null}function ch(e,t){var n=[];e=m(fh[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var yr="text",vi={fa:"video",S:"audio",ma:yr,ue:"image",Gi:"application"},fh={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function cc(){}function Si(e,t){var n=e;return t&&!uu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Du(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ms(e,t,n){var r=Si(e,t);return t=Du(e,t),ro(t)?(e=ro(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function Ug(e,t,n){var r=[t];return P0.forEach(function(u,c){var f=e[c];c=="codecs"?uu.includes(e.mimeType)||r.push('codecs="'+n+'"'):f&&r.push(u+'="'+f+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function vf(e){return e.split(";")[0].split("/")[1]}function Sa(e){var t=dh(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Ha(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=dh(n.value),t.push(n[0]);return t.sort().join(",")}function wa(e){return e.split(";")[0]}function Do(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Bg(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function dh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}te("shaka.util.MimeUtils",cc),cc.getFullTypeWithAllCodecs=Du,cc.getFullType=Si;var P0=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),uu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ds(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function El(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Nt:!1}Ds.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function O0(e,t,n,r,u){var c,f,h,E,A,k,G;return Oe(function(ne){if(ne.g==1)return N(ne,Promise.resolve(),2);if(!e.i||!e.j)return ne.return();if(n==null||r==null)return e.i.parseInit(Qn(t)),ne.return();for(c=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(Qn(t),f,u),E=m(h),A=E.next();!A.done;A=E.next())k=A.value,e.A(k,u||null,f);G=h.filter(function(z){return z.startTime>=e.l&&z.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),$(ne)})}Ds.prototype.remove=function(e,t){var n=this;return Oe(function(r){if(r.g==1)return N(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),$(r)})};function hh(e,t,n){e.l=t,e.m=n}function Ef(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function jg(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())jg(e,r.value,n)}function _f(e,t,n,r,u){var c=n+" "+r,f=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,f.has(h)||f.set(h,new Map),f.get(h).has(c)||f.get(h).set(c,[]),jg(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(f.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(f.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(f.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=f.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}te("shaka.text.TextEngine",Ds),Ds.prototype.destroy=Ds.prototype.destroy,Ds.findParser=function(e){return ji[e]},Ds.unregisterParser=function(e){delete ji[e]},Ds.registerParser=function(e,t){ji[e]=t};var ji={};function Zg(e,t){return e.concat(t)}function Gg(){}function Pu(e){return e!=null}function go(){}function Ou(e,t){return e=br(e),t=br(t),e.split("-")[0]==t.split("-")[0]}function fc(e,t){return e=br(e),t=br(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Lu(e,t){return e=br(e),t=br(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function br(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ni.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function ku(e,t){return e=br(e),t=br(t),t==e?4:fc(t,e)?3:Lu(t,e)?2:fc(e,t)?1:0}function ph(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ni.get(e)||e}function Fu(e){return e.language?br(e.language):e.audio&&e.audio.language?br(e.audio.language):e.video&&e.video.language?br(e.video.language):"und"}function _l(e,t){e=br(e);var n=new Set,r=m(t);for(t=r.next();!t.done;t=r.next())n.add(br(t.value));for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,t==e)return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,fc(t,e))return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Lu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,fc(e,t))return t;return null}te("shaka.util.LanguageUtils",go),go.findClosestLocale=_l,go.getLocaleForVariant=Fu,go.getLocaleForText=function(e){return br(e.language||"und")},go.getBase=ph,go.relatedness=ku,go.areSiblings=function(e,t){var n=ph(e),r=ph(t);return e!=n&&t!=r&&n==r},go.normalize=br,go.isSiblingOf=Lu,go.isParentOf=fc,go.areLanguageCompatible=Ou,go.areLocaleCompatible=function(e,t){return e=br(e),t=br(t),e==t};var ni=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Va(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},f;for(f in r)c[f]=t(r[f]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function qg(e){var t={},n;for(n in e)t[n]=e[n];return t}function dc(){}function Hg(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=gh(u,t,n)),r.length){for(t=new yt,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ve,Pe){ve=0;var xe=[],Ge={};Pe=m(Pe);for(var Te=Pe.next();!Te.done;Ge={Uc:Ge.Uc},Te=Pe.next())Ge.Uc=Te.value,Te=r.filter(function(We){return function(Ue){return We.Uc.decodingInfos[0][Ue]}}(Ge)).length,Te>ve?(ve=Te,xe=[Ge.Uc]):Te==ve&&xe.push(Ge.Uc);c.push.apply(c,T(xe))}),u=c}n=new Set,t=new Set;var f=m(u);for(u=f.next();!u.done;u=f.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ve,Pe){return ve.bandwidth-Pe.bandwidth});var h=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){f=f.value;var E=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,A=u.get(E)||[];if(A.length){var k=A[A.length-1],G=Sa(k.codecs),ne=Sa(f.codecs);G==ne&&f.bandwidth>k.bandwidth&&(A.push(f),h.push(f.id))}else A.push(f),h.push(f.id);u.set(E,A)}n=Array.from(t).sort(function(ve,Pe){return ve.bandwidth&&Pe.bandwidth?ve.bandwidth-Pe.bandwidth:ve.width-Pe.width}),t=Un();var z=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){if(f=f.value,E=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,A=u.get(E)||[],A.length){if(k=A[A.length-1],!t&&(G=Sa(k.codecs),ne=Sa(f.codecs),G!==ne))continue;f.width>k.width||f.height>k.height?(A.push(f),z.push(f.id)):f.width==k.width&&f.height==k.height&&(G=Sa(k.codecs),ne=Sa(f.codecs),G==ne&&f.bandwidth>k.bandwidth&&(A.push(f),z.push(f.id)))}else A.push(f),z.push(f.id);u.set(E,A)}e.variants=e.variants.filter(function(ve){var Pe=ve.audio;return ve=ve.video,!(Pe&&!h.includes(Pe.id)||ve&&!z.includes(ve.id))})}function gh(e,t,n){var r={};t=m(t);for(var u=t.next();!u.done;r={te:r.te},u=t.next())if(r.te=u.value,u=e.filter(function(c){return function(f){return f.video&&f.video.codecs.startsWith(c.te)}}(r)),u.length){e=u;break}for(r={},n=m(n),t=n.next();!t.done;r={me:r.me},t=n.next())if(r.me=t.value,t=e.filter(function(c){return function(f){return f.audio&&f.audio.codecs.startsWith(c.me)}}(r)),t.length){e=t;break}return e}function mh(e,t,n){e.variants=e.variants.filter(function(r){return Tf(r,t,n)})}function Tf(e,t,n){function r(h,E,A){return h>=E&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,f=u.height;if(f>c&&(f=m([f,c]),c=f.next().value,f=f.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(f,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function hc(e,t,n){var r=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Tf(u,t,n),c!=u.allowedByApplication&&(r=!0)}return r}function Vg(e,t,n){return n=n===void 0?[]:n,Oe(function(r){return r.g==1?N(r,Kg(e,t,0<t.offlineSessionIds.length,n),2):(L0(t),N(r,Af(t),0))})}function Kg(e,t,n,r){var u,c;return Oe(function(f){if(f.g==1)return N(f,vh(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=yh(h,u);if(!E){var A=[];h.audio&&A.push(bf(h.audio)),h.video&&A.push(bf(h.video))}return E}),$(f)})}function yh(e,t){var n=ds(),r=Yr("Firefox")&&Yr("Android"),u=e.video,c=u&&u.width||0,f=u&&u.height||0;if(n&&u&&(1920<c||1080<f)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=Tl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Mu("video",c),n=Tl(n),c=Mu("audio",c),c=Uu(c),f=Ms(u.mimeType,c,"audio"),!Ot(f))return!1;n=[n,c].join()}if(c=Ms(u.mimeType,n,"video"),!Ot(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=Uu(u.codecs),n=Ms(u.mimeType,r,"audio"),!Ot(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function Sf(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=Sf(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function zg(e,t){var n,r,u,c,f,h,E;return Oe(function(A){if(A.g==1){for(n=function(k,G){if(k){var ne=Va(k);return ne.supported=k.supported&&G.supported,ne.powerEfficient=k.powerEfficient&&G.powerEfficient,ne.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!ne.keySystemAccess&&(ne.keySystemAccess=G.keySystemAccess),ne}return G},r=null,u=[],c={},f=m(t),h=f.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=f.next())E=h.value,c.Hc=Sf(E),c.Gc=Eh,c.Gc[c.Hc]?r=n(r,c.Gc[c.Hc]):u.push(wf(E).then(function(k){return function(G){var ne=null;G=m(G||[]);for(var z=G.next();!z.done;z=G.next())ne=n(ne,z.value);ne&&(k.Gc[k.Hc]=ne,r=n(r,ne))}}(c)));return N(A,Promise.all(u),2)}r&&e.decodingInfos.push(r),$(A)})}function wf(e){var t=[""];e.video&&(t=Do(e.video.contentType).split(","));var n=[""];e.audio&&(n=Do(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},f=m(n),h=f.next();!h.done;c={Mb:c.Mb},h=f.next())h=h.value,c.Mb=Va(e),e.video&&(c.Mb.video.contentType=Si(wa(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=Si(wa(c.Mb.audio.contentType),h)),r.push(new Promise(function(E){return function(A,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){A(G)}).catch(k)}}(c)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function vh(e,t,n,r){var u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(e.some(function(gt){return gt.decodingInfos.length}))return Ue.return();u={},c=m(r),f=c.next();case 2:if(f.done){Ue.u(4);break}u.oe=f.value,h=!1,E=m(e),A=E.next();case 5:if(A.done){Ue.u(7);break}k=A.value,G=Yg(k,t,n).filter(function(gt){return function(bt){return bt=bt[0],(bt.keySystemConfiguration&&bt.keySystemConfiguration.keySystem)===gt.oe}}(u)),ne=m(G),z=ne.next();case 8:if(z.done){Ue.u(10);break}return ve=z.value,N(Ue,zg(k,ve),9);case 9:z=ne.next(),Ue.u(8);break;case 10:k.decodingInfos.length&&(h=!0),A=E.next(),Ue.u(5);break;case 7:if(h)return Ue.return();u={oe:u.oe},f=c.next(),Ue.u(2);break;case 4:Pe=m(e),A=Pe.next();case 12:if(A.done){Ue.u(0);break}xe=A.value,Ge=Yg(xe,t,n).filter(function(gt){return gt=gt[0],gt=gt.keySystemConfiguration&&gt.keySystemConfiguration.keySystem,!gt||!r.includes(gt)}),Te=m(Ge),z=Te.next();case 15:if(z.done){A=Pe.next(),Ue.u(12);break}return We=z.value,N(Ue,zg(xe,We),16);case 16:z=Te.next(),Ue.u(15)}})}function Yg(e,t,n){var r=e.audio,u=e.video,c=[],f=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var A=Do(E);if(A.includes(",")&&!r){var k=A.split(",");A=Mu("video",k),k=Mu("audio",k),k=Uu(k),k=Ms(wa(E),k,"audio"),f.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=Tl(A),E={contentType:Ms(wa(E),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(r)for(h=m(r.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,A=Uu(Do(E)),E=Ms(wa(E),A,"audio"),f.push({contentType:E,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),f.length==0&&f.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,A=m(f),k=A.next();!k.done;k=A.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];e=[],n=new Map,f=m(f);for(var ne=f.next();!ne.done;ne=f.next())c=ne.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,A=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var z=n.get(E),ve={keySystem:E,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};for(z=m(z),ne=z.next();!ne.done;ne=z.next()){if(ne=ne.value,ne.initData&&ne.initData.length){for(var Pe=new Set,xe=m(ne.initData),Ge=xe.next();!Ge.done;Ge=xe.next())Pe.add(Ge.value.initDataType);ve.initDataType=ne.initData[0].initDataType}ne.distinctiveIdentifierRequired&&(ve.distinctiveIdentifier="required"),ne.persistentStateRequired&&(ve.persistentState="required"),ne.sessionType&&(ve.sessionTypes=[ne.sessionType]),r&&(ne.audioRobustness!=""?ve.audio?ve.audio.robustness=ve.audio.robustness||ne.audioRobustness:ve.audio={robustness:ne.audioRobustness}:ve.audio||(ve.audio={})),u&&(ne.videoRobustness!=""?ve.video?ve.video.robustness=ve.video.robustness||ne.videoRobustness:ve.video={robustness:ne.videoRobustness}:ve.video||(ve.video={}))}G.keySystemConfiguration=ve,A.push(G)}e.push(A)}return e}function Uu(e){return e.toLowerCase()=="flac"?gs()?"fLaC":"flac":e==="Opus"?"opus":e}function Tl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function L0(e){e.textStreams=e.textStreams.filter(function(t){return t=Si(t.mimeType,t.codecs),El(t)})}function Af(e){var t,n,r,u,c,f,h;return Oe(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){E.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),Zu.has(c)){E.u(5);break}if(f=U0.get(c),!f){Zu.set(c,!1),E.u(5);break}return N(E,k0(f),7);case 7:h=E.h,Zu.set(c,h);case 5:Zu.get(c)&&t.push(u),r=n.next(),E.u(2);break;case 4:e.imageStreams=t,$(E)}})}function k0(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Sl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var k=new Set;if(t)for(var G=m(t.roles),ne=G.next();!ne.done;ne=G.next())k.add(ne.value);if(n)for(G=m(n.roles),ne=G.next();!ne.done;ne=G.next())k.add(ne.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:f,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function wl(e){return{id:e.id,active:!1,type:yr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Bu(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function pc(e){return e.__shaka_id||(e.__shaka_id=F0++),e.__shaka_id}function Wg(e){var t=Xg(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Al(e){var t=Xg(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Xg(e){var t=e.language;return{id:pc(e),active:!1,type:"",bandwidth:0,language:br(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function If(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Cf(e){return e.filter(function(t){return If(t)})}function gc(e,t,n,r){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var f=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==f}),t){var h=_l(br(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return br(E.language)==h}))}if(u=u.filter(function(E){return E.forced==r}),n){if(e=ju(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(Zg,[]),e.length?ju(u,e[0]):u}function ju(e,t){return e.filter(function(n){return n.roles.includes(t)})}function bf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}te("shaka.util.StreamUtils",dc),dc.meetsRestrictions=Tf;var Eh={},F0=0,Zu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),U0=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new V,this.F=new Et,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new V,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*r),n=Math.min(n,this.l.clientWidth*r)}var u=this.m.filter(function(A){return!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)});if(u.length||(u=this.m),r=u,e&&u.length!=this.m.length&&(r=this.m.filter(function(A){return!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),e=_h(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=Nf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=_h(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=_h(this,null,r,1/0,1/0),e=[e[0]]),n=e[0]||null,r=0;r<e.length;r++){u=e[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),f=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=r+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=f&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&Rf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&Rf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(B0)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Rf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function _h(e,t,n,r,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(f){return f.bandwidth&&c?f.bandwidth<=c:!0}))}return t&&(n=n.filter(function(f){return Tf(f,t,{width:u,height:r})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function Nf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}te("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var B0=1;te("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),te("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function mc(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}mc.prototype.add=function(e,t,n){return $g(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function $g(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!Th(u,c)||!Qg(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Th(e,t))&&Qg(e.roles,t.roles))),!r}mc.prototype.values=function(){return this.g.values()};function Th(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return Ha(r)}),t=t.codecs.split(",").map(function(r){return Ha(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Qg(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Sh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Il(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Sh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),r=e.filter(function(u){return $g(t.i,u,!n,t.g)});return r.length?new mc(r[0],r,!n,this.g):this.j.create(e)};function Il(e,t,n,r,u,c,f,h,E,A){this.s=e,this.A=t,this.h=n,this.i=r,this.B=u,this.l=c,this.g=f===void 0?"":f,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=A===void 0?!1:A}Il.prototype.create=function(e){var t=[];t=Jg(e,this.s);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=em(t,this.A),e.length&&(t=e),this.l&&(e=nm(t,this.l),e.length&&(t=e)),this.i&&(e=G0(t,this.i),e.length&&(t=e)),this.h&&(e=tm(t,this.h),e.length&&(t=e)),this.g&&(e=j0(t,this.g),e.length&&(t=e)),this.j&&(e=Z0(t,this.j),e.length&&(t=e)),e=q0(t,this.B),e.length&&(t=e),new mc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function Jg(e,t){t=br(t);var n=_l(t,e.map(function(r){return Fu(r)}));return n?e.filter(function(r){return n==Fu(r)}):[]}function em(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function j0(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Z0(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function tm(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function G0(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function nm(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function q0(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function wh(){this.g=yc,this.i=new Map().set(yc,2).set(Cl,1),this.h=0}function Ah(e,t,n){e.i.set(yc,n).set(Cl,t)}var Cl=0,yc=1;function Ih(e,t){var n=aa();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Ch(e){var t,n;return Oe(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new pt(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),N(r,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,$(r)})}function aa(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function lu(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function bh(){var e=Promise.reject(new pt(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function Gu(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function rm(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function xf(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(f);else{var A=h?e:t;A?r=Rh(A,E,c):(h?c.resolve:c.reject)(E)}}}function r(){return c.reject(f),u.abort()}var u=this,c=new Rr,f=new pt(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return r()})};function Rh(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}te("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.va,pi.prototype.finally=pi.prototype.finally,pi.all=xf,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=rm,pi.completed=Gu,pi.aborted=bh,pi.failed=lu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function im(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},te("shaka.util.FakeEvent",Wn);var vc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new yt,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function bl(){this.g=[]}function cu(e,t){e.g.push(t.finally(function(){gn(e.g,t)}))}bl.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Vr(e,t,n,r,u,c){Sr.call(this),this.i=!1,this.m=new bl,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=r||null,this.C=u||null,this.B=c||null,this.o=!1}Y(Vr,Sr),g=Vr.prototype,g.Cf=function(e){this.o=e};function Ho(e,t,n,r){n=n||Mh;var u=_c[e];(!u||n>=u.priority)&&(_c[e]={priority:n,ge:t,bi:r===void 0?!1:r})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Oi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var r=this,u=new xh;if(this.i){var c=Promise.reject(new pt(2,7,7001));return c.catch(function(){}),new Ec(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Va(t.retryParameters):aa(),t.uris=Va(t.uris),c=om(this,e,t,n);var f=c.va(function(){return Nh(r,e,t,n,new Ih(t.retryParameters,!1),0,null,u)}),h=f.va(function(ne){return H0(r,e,ne,n)}),E=Date.now(),A=0;c.promise.then(function(){A=Date.now()-E},function(){});var k=0;f.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(ne){var z=Date.now()-k,ve=ne.response;return ve.timeMs+=A,ve.timeMs+=z,ne.Ih||!r.l||ve.fromCache||t.method=="HEAD"||e!=Ka||r.l(ve.timeMs,ve.data.byteLength,am(n)),r.B&&r.B(e,ve,n),ve},function(ne){throw ne&&(ne.severity=2),ne});return c=new Ec(G.promise,function(){return G.abort()},u),cu(this.m,c),c};function om(e,t,n,r){function u(h){c=c.va(function(){return n.body&&(n.body=Ti(n.body)),h(t,n,r)})}var c=Gu(void 0);e.A&&u(e.A),e=m(e.g);for(var f=e.next();!f.done;f=e.next())u(f.value);return c.va(void 0,function(h){throw h instanceof pt&&h.code==7001?h:new pt(2,1,1006,h)})}function Nh(e,t,n,r,u,c,f,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,r,n.uris[c],n.uris[c-1]);var E=new si(n.uris[c]),A=E.kb,k=!1;A||(A=location.protocol,A=A.slice(0,-1),Rs(E,A),n.uris[c]=E.toString()),A=A.toLowerCase();var G=(A=_c[A])?A.ge:null;if(!G)return lu(new pt(2,1,1e3,E));var ne=A.bi,z=null,ve=null,Pe=!1,xe=!1,Ge;return rm(Ch(u)).va(function(){if(e.i)return bh();Ge=Date.now();var Te=0;n.requestStartTime=Date.now();var We=G(n.uris[c],n,t,function(bt,Ht,Ut){z&&z.stop(),ve&&ve.X(gt/1e3),e.l&&t==Ka&&(Te++,n.packetNumber=Te,e.l(bt,Ht,am(r),n),k=!0,h.g=Ut)},function(bt){e.j&&e.j(bt,n,t),xe=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!ne)return We;var Ue=n.retryParameters.connectionTimeout;Ue&&(z=new pr(function(){Pe=!0,We.abort()}),z.X(Ue/1e3));var gt=n.retryParameters.stallTimeout;return gt&&(ve=new pr(function(){Pe=!0,We.abort()})),We}).va(function(Te){z&&z.stop(),ve&&ve.stop(),Te.timeMs==null&&(Te.timeMs=Date.now()-Ge);var We={response:Te,Ih:k};return!xe&&e.j&&e.j(Te.headers,n,t),We},function(Te){if(z&&z.stop(),ve&&ve.stop(),e.s){var We=null,Ue=0;Te instanceof pt&&(We=Te,Te.code==1001&&(Ue=Te.data[1])),e.s(n,We,Ue,Pe)}if(e.i)return bh();if(Pe&&(Te=new pt(1,1,1003,n.uris[c],t)),Te instanceof pt){if(Te.code==7001)throw Te;if(Te.code==1010)throw f;if(Te.severity==1)return We=new Map().set("error",Te),We=new Wn("retry",We),e.dispatchEvent(We),c=(c+1)%n.uris.length,Nh(e,t,n,r,u,c,Te,h)}throw Te})}function H0(e,t,n,r){var u=Gu(void 0),c={};e=m(e.h);for(var f=e.next();!f.done;c={qe:c.qe},f=e.next())c.qe=f.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Ti(E.data)),h.qe(t,E,r)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof pt){if(h.code==7001)throw h;E=h.severity}throw new pt(E,1,1007,h)})}function am(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}te("shaka.net.NetworkingEngine",Vr),Vr.prototype.request=Vr.prototype.request,Vr.prototype.destroy=Vr.prototype.destroy,Vr.makeRequest=Oi,Vr.defaultRetryParameters=function(){return aa()},Vr.prototype.clearAllResponseFilters=Vr.prototype.ah,Vr.prototype.unregisterResponseFilter=Vr.prototype.Ci,Vr.prototype.registerResponseFilter=Vr.prototype.fi,Vr.prototype.clearAllRequestFilters=Vr.prototype.$g,Vr.prototype.unregisterRequestFilter=Vr.prototype.Bi,Vr.prototype.registerRequestFilter=Vr.prototype.ei,Vr.unregisterScheme=function(e){delete _c[e]},Vr.registerScheme=Ho,Vr.prototype.setForceHTTPS=Vr.prototype.Cf;function xh(){this.g=0}Vr.NumBytesRemainingClass=xh;function Ec(e,t,n){pi.call(this,e,t),this.h=n}Y(Ec,pi),Vr.PendingRequest=Ec;var Ka=1;Vr.RequestType={MANIFEST:0,SEGMENT:Ka,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Vr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var Mh=3;Vr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Mh};var _c={};function qu(e){this.g=!1,this.h=new Rr,this.i=e}qu.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof pt&&t.code==7003?t:new pt(2,7,7003,t)}function Mf(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function V0(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Rl(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Tc(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==sm,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Ps()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Ps()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Ps()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Ps()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Ps()}if(2097151<t)throw new pt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw Ps();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw Ps();this.g+=e},g.mi=function(e){if(this.g<e)throw Ps();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw Ps();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Kr(e)};function Ps(){return new pt(2,3,3e3)}te("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var sm=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:sm};function kr(){this.i=[],this.h=[],this.g=!1}g=kr.prototype,g.box=function(e,t){return e=um(e),this.i[e]=K0,this.h[e]=t,this},g.O=function(e,t){return e=um(e),this.i[e]=lm,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,r){var u=t.wa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.M(),f=t.M(),h=Df(f),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var A=this.h[f];if(A){var k=null,G=null;if(this.i[f]==lm){if(r&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}f=u+c,n&&f>t.getLength()&&(f=t.getLength()),r&&f>t.getLength()?this.g=!0:(r=f-t.wa(),t=0<r?t.sb(r):new Uint8Array(0),t=new Dr(t,0),A({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function vr(e){for(var t=Nl(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function fu(e){for(var t=Nl(e),n=e.reader.M(),r=0;r<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function wi(e){var t=Nl(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Dh(e){var t=Nl(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Hu(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function um(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Df(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Nl(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}te("shaka.util.Mp4Parser",kr),kr.headerSize=Nl,kr.typeToString=Df,kr.allData=Hu,kr.audioSampleEntry=Dh,kr.visualSampleEntry=wi,kr.sampleDescription=fu,kr.children=vr,kr.prototype.parseNext=kr.prototype.Ac,kr.prototype.parse=kr.prototype.parse,kr.prototype.stop=kr.prototype.stop,kr.prototype.fullBox=kr.prototype.O,kr.prototype.box=kr.prototype.box;var K0=0,lm=1;function cm(e){var t=this;this.g=[],this.h=[],this.data=[],new kr().box("moov",vr).box("moof",vr).O("pssh",function(n){if(!(1<n.version)){var r=Qn(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(xs(n.reader.sb(16))),0<n.version){r=n.reader.M();for(var u=0;u<r;u++){var c=xs(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function Pf(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var f=new Uint8Array(c),h=tn(f),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>r?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,f.set(t,E),E+=t.length,0<r)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=su(n.value),f.set(n,E),E+=n.length;return h.setUint32(E,u),f.set(e,E+4),f}function Ph(e,t){return e=Ga(e),xl(e,t)}function xl(e,t){return e=z0(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Sc(e){return Ac.has(e)?Ac.get(e):""}function z0(e){function t(u,c){c=c===void 0?!1:c;for(var f=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){c=r+2,r=e.indexOf(">",r),c=e.substring(c,r);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",r),h==-1?(f.push(e.substr(r+9)),r=e.length):(f.push(e.substring(r+9,h)),r=h+3);continue}r++;continue}e:{E=c,r++;var A=n(),k={};for(h=[];e.charCodeAt(r)!==62&&e[r];){var G=e.charCodeAt(r);if(64<G&&91>G||96<G&&123>G){G=n();for(var ne=e.charCodeAt(r);ne&&ne!==39&&ne!==34&&!(64<ne&&91>ne||96<ne&&123>ne)&&ne!==62;)r++,ne=e.charCodeAt(r);var z=r+1;if(r=e.indexOf(e[r],z),z=e.slice(z,r),ne===39||ne===34){if(r===-1){for(E={tagName:A,attributes:k,children:h,parent:null},A=0;A<h.length;A++)typeof h[A]!="string"&&(h[A].parent=E);h=E;break e}}else z=null,r--;G.startsWith("xmlns:")&&Ac.set(z,G.split(":")[1]),A==="tt"&&G==="xml:space"&&z==="preserve"&&(E=!0),k[G]=z}r++}for(e.charCodeAt(r-1)!==47?(r++,h=t(A,E)):r++,E={tagName:A,attributes:k,children:h,parent:null},A=h.length,k=0;k<A;k++)G=h[k],typeof G!="string"?G.parent=E:k==A-1&&G=="\n"&&h.pop();h=E}if(f.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(f.push.apply(f,T(h.children)),h.children=[])}else h=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),h=e.slice(h,r+1),c?0<h.length&&f.push(h):(f.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&f.push(h),r++;return f}function n(){for(var u=r;"\r\n	>/= ".indexOf(e[r])===-1&&e[r];)r++;return e.slice(u,r)}var r=0;return t("")}function Of(e){return typeof e=="string"}function Y0(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Wr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function bi(e){return typeof e=="string"?Io(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Io(e))}function du(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=bi(e))&&(e=e.trim()),e):null}function Aa(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Aa(r.value,t,n)}return n}function sa(e,t){return e=Wr(e,t),e.length!=1?null:e[0]}function Os(e,t,n){return e=Lf(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function hu(e,t,n){return t=Sc(t),e.attributes[t+":"+n]||null}function Lf(e,t,n){t=Sc(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function ua(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=hu(e,r.value,n))return r;return null}function kf(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function za(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Ff(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Vu(e){return e=Number(e),e%1===0?e:null}function Ls(e){return e=Number(e),e%1===0&&0<e?e:null}function bo(e){return e=Number(e),e%1===0&&0<=e?e:null}function wc(e){return e=Number(e),isNaN(e)?null:e}function Oh(e){return e?e.toLowerCase()==="true":!1}function fm(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Lh(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var r=document.createElement(e.tagName),u;for(u in e.attributes)r.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&Lh(e.parent,!0,!1).appendChild(r),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=Lh(t,!1,!0),r.appendChild(n);return r}var Ac=new Map([]);function Ic(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new Et,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return K(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){Ee(t)}),this.l.catch(function(){}),this.j=new qu(function(){return W0(t)}),this.ba=!1,this.F=this.G=null}g=Ic.prototype,g.destroy=function(){return this.j.destroy()};function W0(e){return Oe(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,N(t,H(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),N(t,e.m.setMediaKeys(null),6);case 6:ye(t,5);break;case 4:be(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,$(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function dm(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,gm(e,t)}function hm(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.T=0<e.A.size,gm(e,t)}function pm(e,t,n,r,u,c){var f=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,u),Bh(e,f,[])}function gm(e,t){var n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te;return Oe(function(We){if(We.g==1){if(n=J0(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(f=t.some(function(Ue){return!!(Ue.video&&Ue.video.drmInfos.length||Ue.audio&&Ue.audio.drmInfos.length)}),f||(h=Rl(e.h.servers),ge(t,h)),E=new Set,A=m(t),u=A.next();!u.done;u=A.next())for(k=u.value,G=Se(k),ne=m(G),z=ne.next();!z.done;z=ne.next())ve=z.value,E.add(ve);for(Pe=m(E),z=Pe.next();!z.done;z=Pe.next())xe=z.value,De(xe,Rl(e.h.servers),Rl(e.h.advanced||{}),e.h.keySystemsMapping);return N(We,vh(t,e.T,e.ba,e.h.preferredKeySystems),2)}return Ge=f||Object.keys(e.h.servers).length,Ge?(Te=Bh(e,void 0,t),We.return(f?Te:Te.catch(function(){}))):(e.da=!0,We.return(Promise.resolve()))})}function kh(e){var t;return Oe(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return N(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),N(n,e.G,6);case 6:ye(n,5);break;case 4:t=be(n),e.o(new pt(2,6,6003,t.message));case 5:jr(e.j),$(n)}})}function X0(e,t){return Oe(function(n){if(n.g==1)return N(n,kh(e),2);Ml(e,t.initDataType,Qn(t.initData)),$(n)})}g.Vc=function(e){var t=this;return Oe(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())D(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?N(n,kh(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new pt(2,6,6010))}),n.return());Fh(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return X0(t,r)}),$(n)})};function mm(e){var t,n,r,u,c;return Oe(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Oi([e.g.serverCertificateUri],e.h.retryParameters),ce(f,3),n=e.C.zb.request(5,t),N(f,n.promise,5);case 5:r=f.h,e.g.serverCertificate=Qn(r.data),ye(f,4);break;case 3:throw u=be(f),new pt(2,6,6017,u);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(ce(f,6),N(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:ye(f,0);break;case 6:throw c=be(f),new pt(2,6,6004,c.message)}})}function $0(e,t){var n,r,u;return Oe(function(c){if(c.g==1)return N(c,Em(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.ab=new Rr,r.push(u.ab)),r.push(n.remove()),N(c,Promise.all(r),3)):c.return();e.i.delete(n),$(c)})}function Fh(e){var t,n,r,u,c;return Oe(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,E){Em(e,E,h)}),N(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&me(e))return f.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,Ml(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),f.return(e.l)})}function Ml(e,t,n){if(n.length){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function ym(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Uh(e){return e=e.i.keys(),e=Mf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=Mf(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Tc(this.ea)};function Bh(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge;return Oe(function(Te){switch(Te.g){case 1:if(r=new Map,n.length){u=Q0(e,n,r),Te.u(2);break}return N(Te,vm(e,t),3);case 3:u=Te.h;case 2:if(c=u,!c)throw new pt(2,6,6001);for(jr(e.j),ce(Te,4),e.H.clear(),f=c.getConfiguration(),h=f.audioCapabilities||[],E=f.videoCapabilities||[],A=m(h),k=A.next();!k.done;k=A.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(ne=m(E),k=ne.next();!k.done;k=ne.next())z=k.value,e.H.add(z.contentType.toLowerCase());if(n.length){var We=c.keySystem,Ue=r.get(c.keySystem),gt=[],bt=[],Ht=[],Ut=[],vt=[],jt=new Set;qe(Ue,gt,bt,Ut,Ht,vt,jt);var ln=e.T?"persistent-license":"temporary";for(We={keySystem:We,encryptionScheme:gt[0],licenseServerUri:bt[0],distinctiveIdentifierRequired:Ue[0].distinctiveIdentifierRequired,persistentStateRequired:Ue[0].persistentStateRequired,sessionType:Ue[0].sessionType||ln,audioRobustness:Ue[0].audioRobustness||"",videoRobustness:Ue[0].videoRobustness||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:vt,keyIds:jt},Ue=m(Ue),gt=Ue.next();!gt.done;gt=Ue.next())gt=gt.value,gt.distinctiveIdentifierRequired&&(We.distinctiveIdentifierRequired=gt.distinctiveIdentifierRequired),gt.persistentStateRequired&&(We.persistentStateRequired=gt.persistentStateRequired);Ue=We}else Ue=c.keySystem,We=t.get(c.keySystem),gt=[],bt=[],Ht=[],Ut=[],vt=[],jt=new Set,qe(We.drmInfos,gt,bt,Ut,Ht,vt,jt),Ue={keySystem:Ue,encryptionScheme:gt[0],licenseServerUri:bt[0],distinctiveIdentifierRequired:We.distinctiveIdentifier=="required",persistentStateRequired:We.persistentState=="required",sessionType:We.sessionTypes[0]||"temporary",audioRobustness:(We.audioCapabilities?We.audioCapabilities[0].robustness:"")||"",videoRobustness:(We.videoCapabilities?We.videoCapabilities[0].robustness:"")||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:vt,keyIds:jt};if(e.g=Ue,!e.g.licenseServerUri)throw new pt(2,6,6012,e.g.keySystem);return N(Te,c.createMediaKeys(),6);case 6:if(ve=Te.h,jr(e.j),e.s=ve,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Te.u(7);break}return ce(Te,8),N(Te,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Pe=Te.h,Pe!="usable")throw new pt(2,6,6018);jr(e.j),ye(Te,7,4);break;case 8:throw xe=be(Te,4),xe instanceof pt?xe:new pt(2,6,6019,xe.message);case 7:return e.da=!0,N(Te,mm(e),11);case 11:jr(e.j),ye(Te,0);break;case 4:throw Ge=be(Te),jr(e.j,Ge),e.g=null,e.H.clear(),Ge instanceof pt?Ge:new pt(2,6,6002,Ge.message)}})}function Q0(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){var c=m(Se(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new pt(2,6,6e3);for(r={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;r={pe:r.pe},u=e.next())for(r.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(A){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==A.pe}}(r)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(r=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var f=m(u.value.decodingInfos);for(u=f.next();!u.done;u=f.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==r)return h.keySystemAccess}}}return null}function vm(e,t){var n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:if(t.size==1&&t.has(""))throw new pt(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;f=m(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){Ge.u(4);break}if(E=h.value,!t.has(E)){Ge.u(3);break}return A=t.get(E),ce(Ge,6),N(Ge,navigator.requestMediaKeySystemAccess(E,[A]),8);case 8:return n=Ge.h,Ge.return(n);case 6:be(Ge);case 7:jr(e.j);case 3:h=f.next(),Ge.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){Ge.u(11);break}ne=G.value,z=m(t.keys()),h=z.next();case 12:if(h.done){G=k.next(),Ge.u(9);break}if(ve=h.value,Pe=t.get(ve),xe=Pe.drmInfos.some(function(Te){return!!Te.licenseServerUri}),xe!=ne){Ge.u(13);break}return ce(Ge,15),N(Ge,navigator.requestMediaKeySystemAccess(ve,[Pe]),17);case 17:return n=Ge.h,Ge.return(n);case 15:be(Ge);case 16:jr(e.j);case 13:h=z.next(),Ge.u(12);break;case 11:return Ge.return(n)}})}function J0(e){return e=Rl(e.h.clearKeys),e.size==0?null:lh(e)}function Cc(e){ie(e)&&e.l.resolve()}function bc(e,t){new pr(function(){t.loaded=!0,Cc(e)}).X(ze)}function Em(e,t,n){var r,u,c,f,h,E,A;return Oe(function(k){switch(k.g){case 1:try{r=e.s.createSession("persistent-license")}catch(G){return u=new pt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(r,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):D(e,G)}),e.B.D(r,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(r,c),ce(k,2),N(k,r.load(t),4);case 4:return f=k.h,jr(e.j),f||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(h,6,6013)),c.loaded=!0),bc(e,c),Cc(e),k.return(r);case 2:E=be(k),jr(e.j,E),e.i.delete(r),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(A,6,6005,E.message)),c.loaded=!0,Cc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new pt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):D(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof pt||(t=new pt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&au(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var f=c.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new pt(2,6,6006,c.message,c,h))}})}function D(e,t){var n,r,u,c,f,h,E,A,k,G,ne,z,ve;Oe(function(Pe){switch(Pe.g){case 1:if(n=t.target,e.h.logLicenseExchange&&au(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),f=Oi([u],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,r&&(f.initData=r.initData,f.initDataType=r.initDataType),ym(e.g.keySystem)){var xe=Za(f.body,!0,!0);if(xe.includes("PlayReadyKeyMessage")){xe=xl(xe,"PlayReadyKeyMessage");var Ge=Aa(xe,"HttpHeader");Ge=m(Ge);for(var Te=Ge.next();!Te.done;Te=Ge.next()){var We=Te.value;Te=Aa(We,"name")[0],We=Aa(We,"value")[0],f.headers[bi(Te)]=bi(We)}xe=Aa(xe,"Challenge")[0],f.body=qo(bi(xe))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),ce(Pe,2),A=e.C.zb.request(2,f),N(Pe,A.promise,4);case 4:E=Pe.h,ye(Pe,3);break;case 2:return k=be(Pe),e.j.g||(G=new pt(2,6,6007,k),e.i.size==1?(e.o(G),r&&r.ab&&r.ab.reject(G)):(r&&r.ab&&r.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Pe.return();case 3:return e.j.g?Pe.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&au(E.data),ce(Pe,5),N(Pe,n.update(E.data),7));case 7:ye(Pe,6);break;case 5:return ne=be(Pe),z=new pt(2,6,6008,ne.message),e.o(z),r&&r.ab&&r.ab.reject(z),Pe.return();case 6:if(e.j.g)return Pe.return();ve=new Wn("drmsessionupdate"),e.C.onEvent(ve),r&&(r.ab&&r.ab.resolve(),bc(e,r)),$(Pe)}})}function B(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,f){if(typeof f=="string"){var h=f;f=c,c=h}if(ym(e.g.keySystem)&&f.byteLength==16&&(yl()||Nr())){h=tn(f);var E=h.getUint32(0,!0),A=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,A,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),f=xs(f).slice(0,32),e.aa.set(f,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(_e))}function K(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new pt(2,6,6014)),e.C.ee(Tc(n))}function ee(){var e,t,n,r,u,c,f,h;return Oe(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[r,n],c=new Map,f=function(A){var k,G,ne;return Oe(function(z){switch(z.g){case 1:if(ce(z,2),A==="org.w3.clearkey"&&gs())throw Error("Unsupported keySystem");return N(z,navigator.requestMediaKeySystemAccess(A,u),4);case 4:return k=z.h,ne=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,Ru()&&(ne=!1),c.set(A,{persistentState:ne}),N(z,k.createMediaKeys(),5);case 5:ye(z,0);break;case 2:be(z),c.set(A,null),$(z)}})},h=e.map(function(A){return f(A)}),N(E,Promise.all(h),2)):E.return(Tc(c))})}function J(e){var t;return Oe(function(n){if(n.g==1)return t=new Promise(function(r,u){new pr(u).X(Be)}),ce(n,2),N(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return ye(n,0);be(n),$(n)})}function H(e){var t;return Oe(function(n){return t=Array.from(e.i.entries()),e.i.clear(),N(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return Oe(function(f){if(f.g==1)return ce(f,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?N(f,J(u),5):N(f,u.remove(),5);if(f.g!=2)return ye(f,0);be(f),$(f)})})),0)})}function re(e,t){return e.length&&t.length&&e!==t?0<de(e,t).length:!0}function de(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var f=m((r.initData||[]).concat(c.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),f=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:f});break}}return n}function Se(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ee(e){e.i.forEach(function(t,n){var r=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),V0(e,function(t){return t.loaded})}function me(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function ge(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function qe(e,t,n,r,u,c,f){var h=[],E={};e=m(e);for(var A=e.next();!A.done;E={la:E.la},A=e.next()){if(E.la=A.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(r.some(function(ne){return function(z){return zi(z,ne.la.serverCertificate)}}(E))||r.push(E.la.serverCertificate)),E.la.initData){A={};for(var k=m(E.la.initData),G=k.next();!G.done;A={vd:A.vd},G=k.next())A.vd=G.value,c.some(function(ne){return function(z){var ve=ne.vd;return z.keyId&&z.keyId==ve.keyId?!0:z.initDataType==ve.initDataType&&zi(z.initData,ve.initData)}}(A))||c.push(A.vd)}if(E.la.keyIds)for(A=m(E.la.keyIds),k=A.next();!k.done;k=A.next())f.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),r=h.next();!r.done;r=h.next())r=p.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function De(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Be=1,ze=5,_e=.5,Le=new na(function(){return Ti(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function we(e,t,n){this.h=e,this.i=t,this.g=n}function je(e,t){return Oe(function(n){return n.g==1?N(n,Z(e,t),2):n.return(le(e,t))})}function Z(e,t){return Oe(function(n){if(n.g==1)return N(n,Vg(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(If))throw new pt(2,4,4032);$(n)})}function le(e,t){var n=hc(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,r.keySystem,c.video),ae(e,r.keySystem,c.audio);ue(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,Ml(e.g,u.initDataType,u.initData)}}}function ue(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,f=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var k=A.next();!k.done;k=A.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&f.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(f)},new pt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Me(){}function Ie(e,t){if(t){var n=ke[t.toLowerCase()];if(n)return n}throw new pt(2,4,4e3,e,t)}te("shaka.media.ManifestParser",Me),Me.unregisterParserByMime=function(e){delete ke[e]},Me.registerParserByMime=function(e,t){ke[e]=t},Me.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Me.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var ke={};function Re(e){function t(){r=!0}function n(A){c.push(A),vr(A)}e=Qn(e);var r=!1,u,c=[],f=[];if(new kr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(A){u=A,c.push(A),fu(A)}).O("encv",t).O("enca",t).O("dvav",function(A){f.push({box:A,Xa:1701733238})}).O("dva1",function(A){f.push({box:A,Xa:1701733238})}).O("dvh1",function(A){f.push({box:A,Xa:1701733238})}).O("dvhe",function(A){f.push({box:A,Xa:1701733238})}).O("hev1",function(A){f.push({box:A,Xa:1701733238})}).O("hvc1",function(A){f.push({box:A,Xa:1701733238})}).O("avc1",function(A){f.push({box:A,Xa:1701733238})}).O("avc3",function(A){f.push({box:A,Xa:1701733238})}).O("ac-3",function(A){f.push({box:A,Xa:1701733217})}).O("ec-3",function(A){f.push({box:A,Xa:1701733217})}).O("ac-4",function(A){f.push({box:A,Xa:1701733217})}).O("mp4a",function(A){f.push({box:A,Xa:1701733217})}).parse(e),r)return e;if(f.length==0||!u)throw xs(e),new pt(2,3,3019);f.reverse();for(var h=m(f),E=h.next();!E.done;E=h.next())E=E.value,e=pe(e,u,E.box,c,E.Xa);return e}function pe(e,t,n,r,u){var c=Ye.value(),f=e.subarray(n.start,n.start+n.size),h=tn(f),E=new Uint8Array(n.size+c.byteLength);for(E.set(f,0),f=tn(E),f.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),f.setUint32(n.size+16,u),Ne(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=ds()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,Ne(u,r.start,r.size+E.byteLength);return E=tn(u,t.start),t=Nl(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function Ne(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Ye=new na(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function dt(e,t,n,r,u,c,f){this.$=e,this.Aa=t,this.ja=n,this.ff=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}dt.prototype.ac=function(){return this.Aa},dt.prototype.Yb=function(){return this.ja},dt.prototype.ed=function(){return this.g};function at(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}te("shaka.media.InitSegmentReference",dt),dt.prototype.getEndByte=dt.prototype.Yb,dt.prototype.getStartByte=dt.prototype.ac;function Je(e,t,n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe){for(A=A===void 0?[]:A,z=z===void 0?Bt:z,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=r,this.ja=u,this.ca=c,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=A,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=ne===void 0?null:ne,this.status=z,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ve===void 0?null:ve,this.s=null,this.j=0,this.o=Pe===void 0?!1:Pe,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=Je.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=Gt},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?fe("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function ht(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())ht(n.value,t)}te("shaka.media.SegmentReference",Je),Je.prototype.getSegmentData=Je.prototype.ed,Je.prototype.setSegmentData=Je.prototype.yi,Je.prototype.syncAgainst=Je.prototype.Ff,Je.prototype.offset=Je.prototype.offset,Je.prototype.getThumbnailSprite=Je.prototype.Bh,Je.prototype.setThumbnailSprite=Je.prototype.Eg,Je.prototype.hasByterangeOptimization=Je.prototype.Jh,Je.prototype.markAsByterangeOptimization=Je.prototype.lg,Je.prototype.isLastPartial=Je.prototype.Nh,Je.prototype.markAsLastPartial=Je.prototype.mg,Je.prototype.isPartial=Je.prototype.Oh,Je.prototype.markAsPartial=Je.prototype.ng,Je.prototype.isIndependent=Je.prototype.Mh,Je.prototype.markAsNonIndependent=Je.prototype.Zd,Je.prototype.isPreload=Je.prototype.Ph,Je.prototype.markAsPreload=Je.prototype.ef,Je.prototype.markAsUnavailable=Je.prototype.Vh,Je.prototype.getStatus=Je.prototype.bc,Je.prototype.getTileDuration=Je.prototype.Ch,Je.prototype.getTilesLayout=Je.prototype.Dh,Je.prototype.getEndByte=Je.prototype.Yb,Je.prototype.getStartByte=Je.prototype.ac,Je.prototype.getEndTime=Je.prototype.mh,Je.prototype.getStartTime=Je.prototype.getStartTime,Je.prototype.getUris=Je.prototype.$;var Bt=0,Gt=1;Je.Status={Hi:Bt,xj:Gt,$i:2};function kt(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ft(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(mt(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function nt(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=mt(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function mt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Wt(){}function Rt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Yt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Kr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var f=Kr(Qn(e.data,3+n,c)),h;return r==="-->"?h=Kr(Qn(e.data,4+n+c)):h=Ti(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Kr(Qn(e.data,1,r)),e=Kr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Kr(Qn(e.data,1,r)),e=Kr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Kr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ti(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Kr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Kr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ti(e.data),t):null}function Dn(e){for(var t=0,n=[];Rt(e,t);){var r=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Yt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function Nn(e,t){for(var n=t=t===void 0?0:t,r=0;Rt(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Jt(e,t+6),en(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}te("shaka.util.Id3Utils",Wt),Wt.getID3Data=Nn,Wt.getID3Frames=Dn;function rr(e,t){var n=null,r=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(r=e.M()),{trackId:c,Wf:n,fh:r,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function At(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Xt(e,t,n){var r=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var f=0;f<r;f++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:r,vg:u,eh:c}}function Zt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:Df(e)}}function mn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function xn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new Dr(n,0).M(),e.g=8*r,e.i-=r)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function It(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?r<<n|It(e,n):r}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Lt(e){var t=Sn(e);return It(e,t+1)-1}function On(e){return e=Lt(e),1&e?1+e>>>1:-1*(e>>>1)}function ut(e){return It(e,1)===1}function tt(e){return It(e,8)}function qt(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=On(e),r=(n+r+256)%256),n=r===0?n:r}function Ke(e){return tt(e),Lt(e),Lt(e)}te("shaka.util.ExpGolomb",xn);function Ve(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=Ve.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ai(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),f=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(f){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,f={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var A=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,ne=k;2<ne;){var z=c[G+1]+2;switch(c[G]){case 5:var ve=uh(c.subarray(G+2,G+z));f.audio==-1&&ve==="Opus"?(f.audio=A,f.audioCodec="opus"):f.video==-1&&ve==="AV01"&&(f.video=A,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=A,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(ve=null,c[G+2]===128&&(ve=c[G+3]),ve!=null&&(this.F={channelCount:ve&15?ve&15:2,Zg:ve,sampleRate:48e3}))}G+=z,ne-=z}break;case 15:f.audio==-1&&(f.audio=A,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=A,f.audioCodec="aac-loas");break;case 21:f.Sd==-1&&(f.Sd=A);break;case 27:f.video==-1&&(f.video=A,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=A,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=A,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=A,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=A,f.audioCodec="ec3")}h+=k+5}c=f,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function Mt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=sr(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var f=n||0,h=[],E=-1,A=0,k,G=0;G<u;++G){var ne=e[G];if(ne){if(2<=f&&ne==1){if(t&&!h.length&&E==-1&&(ne=G-(3<f?3:f),n&&ne!=0&&(ne=e.subarray(0,ne),t.data=li(t.data,ne),t.fullData=li(t.fullData,ne))),0<=E?(f=G-((3<f?3:f)+1),h.push({data:e.subarray(E+c,f+1),fullData:e.subarray(E,f+1),type:A,time:r})):t&&!h.length&&(E=G-f,0<E&&(E=e.subarray(0,E),t.data=li(t.data,E),t.fullData=li(t.fullData,E))),G>=u-c)return h;G++,E=G,A=this.m=="hvc"?e[G]>>1&63:e[G]&31}f=0}else f++;G>=u-1&&0<=E&&0<=f&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:A,time:r})}return k&&h.push(k),!h.length&&t&&(t.data=li(t.data,e),t.fullData=li(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=li.apply(Pi,T(n.value)),(n=Mt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=li.apply(Pi,T(n.value)),u=Mt(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=li(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,f){var h=(c.pts||0)-(f.pts||0);return(c.dts||0)-(f.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=li.apply(Pi,T(r.value)),c=Mt(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=li(r.data,u),this.g.push(r))}if(e){var f;for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.qf(r,f,void 0),r.nalus.length&&(f=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var A=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):fn(this)};function fn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(ne){return ne.type==7}),!e))return t;e=new xn(e.data);var n=tt(e),r=tt(e),u=tt(e);if(En(e),zr.includes(n)){var c=Lt(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),ut(e)){c=c!==3?8:12;for(var f=0;f<c;f++)ut(e)&&(6>f?qt(e,16):qt(e,64))}}if(En(e),c=Lt(e),c===0)Lt(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Lt(e),f=0;f<c;f++)En(e);En(e),Gn(e,1),c=Lt(e),f=Lt(e);var h=It(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,A=0,k=0,G=0;return ut(e)&&(E=Lt(e),A=Lt(e),k=Lt(e),G=Lt(e)),t.height=String((2-h)*(f+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*A),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Ue){return Ue.type==33}),!e))return t;var n=new xn(e.fullData,!0);tt(n),tt(n),It(n,4);var r=It(n,3);ut(n);var u=It(n,2),c=It(n,1),f=It(n,5),h=It(n,32);e=tt(n);for(var E=tt(n),A=tt(n),k=tt(n),G=tt(n),ne=tt(n),z=tt(n),ve=[],Pe=[],xe=0;xe<r;xe++)ve.push(ut(n)),Pe.push(ut(n));if(0<r)for(xe=r;8>xe;xe++)It(n,2);for(xe=0;xe<r;xe++)ve[xe]&&It(n,88),Pe[xe]&&tt(n);Lt(n),r=Lt(n),r==3&&It(n,1),ve=Lt(n),Pe=Lt(n);var Ge=xe=0,Te=0,We=0;return ut(n)&&(xe+=Lt(n),Ge+=Lt(n),Te+=Lt(n),We+=Lt(n)),t.width=String(ve-(xe+Ge)*(r===1||r===2?2:1)),t.height=String(Pe-(Te+We)*(r===1?2:1)),n=function(Ue){for(var gt=0,bt=0;32>bt;bt++)gt|=(Ue>>bt&1)<<31-bt;return gt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+f),u+="."+n.toString(16).toUpperCase(),u+="."+c+z,ne&&(u+="."+ne.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),A&&(u+="."+A.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ai(e))}function Ai(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}te("shaka.util.TsParser",Ve),Ve.syncOffset=Ai,Ve.probe=Zr,Ve.prototype.getVideoInfo=Ve.prototype.We,Ve.prototype.getVideoResolution=Ve.prototype.Gh,Ve.prototype.getVideoNalus=Ve.prototype.Od,Ve.prototype.getCodecs=Ve.prototype.bd,Ve.prototype.getStartTime=Ve.prototype.getStartTime,Ve.prototype.getVideoData=Ve.prototype.xc,Ve.prototype.getAudioData=Ve.prototype.Fb,Ve.prototype.getMetadata=Ve.prototype.getMetadata,Ve.prototype.parseNalus=Ve.prototype.qf,Ve.prototype.parseAvcNalus=Ve.prototype.ai,Ve.prototype.parse=Ve.prototype.parse,Ve.prototype.clearData=Ve.prototype.clearData,Ve.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function io(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&He("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{He("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(He("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||He(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}io.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function ks(e,t,n){var r=Ku,u=pu;switch(t.mimeType){case"video/webm":r=zu;break;case"video/mp4":r=Ya}switch(n){case"DASH":u=Po;break;case"HLS":u=Fs}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}te("shaka.lcevc.Dec",io),io.prototype.release=io.prototype.release;var Ku=0,zu=1,Ya=2,Fs=0,Po=1,pu=-1;function gu(e,t,n,r){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=r||null,this.j={},this.o=new Et,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=la(this,this.L),this.C=!1,this.I=new qu(function(){return Uf(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function la(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=_m(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=_m(n),e.i.src=e.N,n}function Rc(e,t){var n,r,u,c,f,h,E,A,k,G,ne;return Oe(function(z){if(z.g==1)return e.createSegmentIndex?N(z,e.createSegmentIndex(),2):z.u(2);if(!e.segmentIndex)return z.return(!1);if(e.segmentIndex.getNumReferences()==0)return z.return(!0);for(n=vi,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(f=c.value,h=f.mimeType||e.mimeType||"",E=f.codecs||e.codecs||"",A=h+":"+E,!r.has(A)){if(r.add(A),t==n.ma){if(k=Si(h,E),!El(k))return z.return(!1)}else if(t==n.fa?E=Tl(E):t==n.S&&(E=Uu(E)),G=Ug(e,h,E),ne=Du(h,E),!Ot(G)&&!ro(ne))return z.return(!1)}return z.return(!0)})}g=gu.prototype,g.destroy=function(){return this.I.destroy()};function Uf(e){var t,n,r,u,c,f,h,E;return Oe(function(A){if(A.g==1){t=[];for(n in e.j)for(r=e.j[n],u=r[0],e.j[n]=r.slice(0,1),u&&t.push(u.p.catch(Gg)),c=m(r.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new pt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return N(A,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,$(A)})}g.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,f,h,E,A;return Oe(function(k){switch(k.g){case 1:return c=vi,N(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=r,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,f=m(e.keys()),h=f.next();case 3:if(h.done){k.u(0);break}return E=h.value,A=e.get(E),N(k,Yu(u,E,A,A.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=f.next(),k.u(3)}})};function Yu(e,t,n,r){var u,c,f,h,E,A,k,G,ne,z,ve,Pe;return Oe(function(xe){switch(xe.g){case 1:return u=vi,c=Fe,f=P,N(xe,Rc(n,t),2);case 2:if(f.call(c,xe.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Si(n.mimeType,r),t==u.ma){Wa(e,h,e.B,n.external),xe.u(0);break}if(E=e.A.forceTransmux,(!Ot(h)||!e.B&&uu.includes(h))&&(E=!0),A=Du(n.mimeType,r),!E){xe.u(4);break}if(k=Co(u.S,(r||"").split(",")),G=Co(u.fa,(r||"").split(",")),!k||!G){xe.u(5);break}return e.s=!0,N(xe,Yu(e,u.S,n,k),6);case 6:return N(xe,Yu(e,u.fa,n,G),7);case 7:return xe.return();case 5:(ne=ro(A))&&(z=ne(),e.m[t]=z,h=z.convertCodecs(t,A));case 4:ve=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Pe=e.l.addSourceBuffer(ve)}catch(Ge){throw new pt(2,3,3015,Ge,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Pe.mode=HF),e.o.D(Pe,"error",function(){e.j[t][0].p.reject(new pt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Pe,"updateend",function(){return Wu(e,t)}),e.h[t]=Pe,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,$(xe)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Wa(e,t,n,r){e.g||(e.g=new Ds(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function Nc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Us(e,t){return e.C||!Object.keys(e.h).length?e=null:t==yr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Dt(e,t){return e.C?null:t==yr?e.g.h:kt(Hn(e,t))}function yn(e,t,n){return e.C?0:t==yr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:mt(this.i.buffered),audio:this.C?[]:mt(Hn(this,"audio")),video:this.C?[]:mt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,r,u,c){var f=null,h=Qn(n);if(uu.includes(u))c=Dn(h),c.length&&r&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.ta([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.ca&&r.ca.timescale){var E=r.ca.timescale;if(!isNaN(E)){var A=0,k=!1;new kr().box("moof",vr).box("traf",vr).O("tfdt",function(G){A=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(f=A)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new Ve,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length&&e.ta(h,c,r?r.endTime:null));return f}function Tr(e,t,n,r,u,c,f,h,E,A){f=f===void 0?!1:f,h=h===void 0?!1:h,E=E===void 0?!1:E,A=A===void 0?!1:A;var k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){switch(gt.g){case 1:if(k=vi,t!=k.ma){gt.u(2);break}if(!e.B){gt.u(3);break}return N(gt,e.ia,4);case 4:G=gt.h,e.g.s=G;case 3:return N(gt,O0(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.$()[0]:null),5);case 5:return gt.return();case 2:if(A||!e.s){gt.u(6);break}return N(gt,Tr(e,k.S,n,r,u,c,f,h,E,!0),7);case 7:return N(gt,Tr(e,k.fa,n,r,u,c,f,h,E,!0),8);case 8:return gt.return();case 6:if(!e.h[t])return gt.return();if(ne=e.h[t].timestampOffset,z=e.G[t],e.m[t]&&(z=e.m[t].getOriginalMimeType()),r&&(ve=ur(e,t,n,r,z,ne),ve!=null&&(Pe=r.startTime-ve,xe=Math.abs(ne-Pe),(.001<=xe||f||h)&&(!E||0<Pe||!ne)&&(ne=Pe,e.pa&&(Xi(e,t,function(){return Bf(e,t)}),Xi(e,t,function(){return jf(e,t,ne)}))),Ge=t==k.fa||!(k.fa in e.h),e.B&&Ge&&e.ia.resolve(ne))),c&&t==k.fa&&(e.g||Wa(e,"application/cea-608",e.B,!1),e.H||(Te=z.split(";",1)[0],e.H=new St(Te)),r?(We=e.H.i(n),We.length&&_f(e.g,We,r.startTime,r.endTime,ne)):e.H.init(n)),!e.m[t]){gt.u(9);break}return N(gt,e.m[t].transmux(n,u,r,e.l.duration,t),10);case 10:n=gt.h;case 9:return n=BF(e,n,r?r.startTime:null,t),r&&e.B&&t!=k.ma&&(f||h)&&(Ue=r.startTime,Xi(e,t,function(){return Bf(e,t)}),Xi(e,t,function(){return jf(e,t,Ue)})),N(gt,Xi(e,t,function(){var bt=n;if(t=="video"&&e.T){var Ht=e.T;Ht.g&&Ht.g.appendBuffer(bt,"video",Ht.o,-ne)}e.h[t].appendBuffer(bt)}),11);case 11:$(gt)}})}function Ir(e,t){var n=Dt(e,"video")||0;Ef(e.g,t,n)}function fr(e){e.g&&Ef(e.g,"",0)}g.remove=function(e,t,n){var r=this,u;return Oe(function(c){return c.g==1?(u=vi,e==u.ma?N(c,r.g.remove(t,n),0):N(c,Xi(r,e,function(){return js(r,e,t,n)}),4)):r.s?N(c,Xi(r,u.S,function(){return js(r,u.S,t,n)}),0):c.u(0)})};function ri(e,t){var n;return Oe(function(r){return r.g==1?(n=vi,t==n.ma?e.g?N(r,e.g.remove(0,1/0),0):r.return():N(r,Xi(e,t,function(){return js(e,t,0,e.l.duration)}),4)):e.s?N(r,Xi(e,n.S,function(){return js(e,n.S,0,e.l.duration)}),0):r.u(0)})}g.flush=function(e){var t=this,n;return Oe(function(r){return r.g==1?(n=vi,e==n.ma?r.return():N(r,Xi(t,e,function(){t.i.currentTime-=.001,Wu(t,e)}),2)):t.s?N(r,Xi(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,Wu(t,u)}),0):r.u(0)})};function Qr(e,t,n,r,u,c,f,h,E){var A,k,G;return Oe(function(ne){return ne.g==1?(A=vi,t==A.ma?(c||(e.g.s=n),hh(e.g,r,u),ne.return()):(k=[],N(ne,GF(e,t,f,h,E),2))):(G=ne.h,G||(k.push(Xi(e,t,function(){return Bf(e,t)})),e.s&&k.push(Xi(e,A.S,function(){return Bf(e,A.S)}))),c||(k.push(Xi(e,t,function(){return jf(e,t,n)})),e.s&&k.push(Xi(e,A.S,function(){return jf(e,A.S,n)}))),k.push(Xi(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,Wu(e,t)})),e.s&&k.push(Xi(e,A.S,function(){var z=A.S;e.h[z].appendWindowStart=0,e.h[z].appendWindowEnd=u,e.h[z].appendWindowStart=r,Wu(e,z)})),N(ne,Promise.all(k),0))})}function Bs(e,t,n){var r;return Oe(function(u){return u.g==1?(r=vi,t==r.ma?u.return():(t==r.fa&&(e.ia=new Rr),Xi(e,t,function(){return Bf(e,t)}),e.s&&Xi(e,r.S,function(){return Bf(e,r.S)}),N(u,Xi(e,t,function(){return jf(e,t,n)}),2))):e.s?N(u,Xi(e,r.S,function(){return jf(e,r.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return Oe(function(n){return N(n,eE(t,function(){Nc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return Oe(function(n){return N(n,eE(t,function(){if(e<t.l.duration)for(var r in t.h){var u={start:function(){},p:new Rr};t.j[r].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function js(e,t,n,r){r<=n?Wu(e,t):e.h[t].remove(n,r)}function Bf(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,Wu(e,t)}function jf(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Wu(e,t)}function Wu(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),tE(e,t))}}function Xi(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&mC(e,t),n.p}function eE(e,t){var n,r,u,c,f,h,E;return Oe(function(A){switch(A.g){case 1:jr(e.I),n=[],r={};for(u in e.h)r.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(r),p:r.Mc},e.j[u].push(c),n.push(r.Mc),e.j[u].length==1&&c.start(),r={Mc:r.Mc};return ce(A,2),N(A,Promise.all(n),4);case 4:ye(A,3);break;case 2:throw f=be(A),f;case 3:return ce(A,5,6),N(A,t(),6);case 6:$e(A);for(h in e.h)tE(e,h);Ae(A,0);break;case 5:throw E=be(A),new pt(2,3,3015,E,e.i.error||"No error in the media element")}})}function tE(e,t){e.j[t].shift(),mC(e,t)}function mC(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new pt(2,3,3017,t)):n.p.reject(new pt(2,3,3015,r,e.i.error||"No error in the media element")),tE(e,t)}}function BF(e,t,n,r){var u=e.qa[r];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(ja()||ds()||Yr("SOPOpenBrowser"))&&vf(e.G[r])=="mp4"&&(t=Re(t)),t}function jF(e,t,n,r){return Xi(e,t,function(){t!==yr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),Wu(e,t))})}function ZF(e,t){var n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt;return Oe(function(jt){switch(jt.g){case 1:n=vi,e.C=!0,e.s=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(jt,2),e.o.ib(),f=[];for(h in e.m)f.push(e.m[h].destroy());for(E in e.j)for(A=e.j[E],k=A[0],e.j[E]=A.slice(0,1),k&&f.push(k.p.catch(Gg)),G=m(A.slice(1)),ne=G.next();!ne.done;ne=G.next())z=ne.value,z.p.reject(new pt(2,7,7003,void 0));for(ve in e.h){Pe=e.h[ve];try{e.l.removeSourceBuffer(Pe)}catch(ln){}}return N(jt,Promise.all(f),4);case 4:return e.m={},e.h={},xe=e.l.duration,e.L=new Rr,e.l=la(e,e.L),N(jt,e.L,5);case 5:!isNaN(xe)&&xe?e.l.duration=xe:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),Ge=new Rr,Te=e.l.sourceBuffers,We=t.size,Ue=0,gt=function(){Ue++,Ue===We&&(Ge.resolve(),e.o.Kb(Te,"addsourcebuffer",gt))},e.o.D(Te,"addsourcebuffer",gt),bt=m(t.keys()),Ht=bt.next();case 6:return Ht.done?(e.i.currentTime=r,N(jt,Ge,2)):(Ut=Ht.value,vt=t.get(Ut),N(jt,Yu(e,Ut,vt,vt.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Ut]=[],Ht=bt.next(),jt.u(6);break;case 2:$e(jt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Ae(jt,0)}})}function yC(e,t){return eE(e,function(){return ZF(e,t)})}function GF(e,t,n,r,u){var c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){return Ue.g==1?(c=vi,t==c.ma||(f=Ha(Do(e.G[t])),h=wa(e.G[t]),A=!1,k=Si(n,r),G=e.A.forceTransmux,(!Ot(k)||!e.B&&uu.includes(k))&&(G=!0),G&&(ne=Du(n,r),z=ro(ne))&&(E=z(),ve=Co(c.S,(r||"").split(",")),Pe=Co(c.fa,(r||"").split(",")),ve&&Pe?(A=!0,xe=Pe,t==c.S&&(xe=ve),k=E.convertCodecs(t,Du(n,xe))):k=E.convertCodecs(t,ne)),Ge=Ha(Do(k)),Te=wa(k),f===Ge&&h===Te)?Ue.return(!1):(We=!0,(e.s||A&&E&&!e.m[t])&&(We=!1),We&&e.A.codecSwitchingStrategy==="smooth"&&Un()?N(Ue,jF(e,t,k,E),3):(E&&E.destroy(),N(Ue,yC(e,u),3)))):Ue.return(!0)})}function qF(e,t,n,r){if(t==yr)var u=!1;else{u=Ha(Do(e.G[t]));var c=wa(e.G[t]),f=Si(n,r),h=e.A.forceTransmux;(!Ot(f)||!e.B&&uu.includes(f))&&(h=!0),n=Du(n,r),h&&(h=ro(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=Ha(Do(f)),f=wa(f),u=u!==t||c!==f}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var _m=p.URL.createObjectURL,HF="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(r,u){return Math.max(r,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=r-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},te("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function vC(e,t,n){this.j=n,this.l=e,this.s=EC(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}vC.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function VF(e,t){e.i=t}function KF(e){this.g=e}function EC(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(mt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function nE(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new Et,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return rE(c)}),this.m=new pr(function(){rE(c)}).$a(this.s.gapJumpTimerTime)}nE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},nE.prototype.mf=function(){this.o=!0,rE(this)};function rE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=EC(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=nt(n,t,e.s.gapDetectionThreshold),r==null||r==0&&!e.o||(u=n.start(r),u>=e.B.pb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function Zf(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=zF.value().get(t),n.na(e,t,r))}var zF=new na(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function _C(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Et,this.i=new AC(e),Zf(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){SC(u,u.j())})}_C.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function iE(e){return e.o?e.g.currentTime:e.j()}function TC(e,t){0<e.g.readyState?IC(e.i,t):Zf(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){SC(e,e.j())})}function SC(e,t){.001>Math.abs(e.g.currentTime-t)?wC(e):(e.h.na(e.g,"seeking",function(){wC(e)}),IC(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function wC(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function AC(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}AC.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function IC(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function CC(e){this.g=e,this.j=!1,this.h=null,this.i=new Et}g=CC.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Zf(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function bC(e,t,n,r,u,c){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=YF(e,n,c),this.j=new nE(e,t.presentationTimeline,n,this.o,c),this.h=new _C(e,function(){e:{var h=f.j;h.j=!0,h.o=!1;var E=iE(f.h);if(h=NC(f,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!f.s||f.s<E-1)){f.s=E,TC(f.h,h),h=void 0;break e}f.A(),h=void 0}return h},function(h){var E=f.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=r;return h==null?h=1/0>f.g.getDuration()?f.g.$b():f.g.pb():0>h&&(h=f.g.pb()+h),RC(f,xC(f,h))}),this.m=new pr(function(){if(f.i.readyState!=0&&!f.i.paused){var h=iE(f.h),E=f.g.$b(),A=f.g.pb();3>A-E&&(E=A-3),h<E&&(h=NC(f,h),f.i.currentTime=h)}})}g=bC.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){TC(this.h,e)},g.Dd=function(){var e=iE(this.h);return 0<this.i.readyState&&!this.i.paused?xC(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function RC(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function NC(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),f=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(r);return n=e.g.dd(n+r),t>=f?RC(e,t):t>c?c:t<u?Ft(e.i.buffered,E)?E:n:t>=h||Ft(e.i.buffered,t)?t:n}function xC(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function YF(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new vC(new KF(e),t.stallThreshold,n),VF(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Je(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;r--;var u=this.get(r+1),c=-1;if(u&&0<u.g.length)for(var f=u.g.length-1;0<=f;--f){var h=u.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=u.g[f];if(!h.l)return fe("No independent partial segment found!"),null}r++,c=f-1;break}}return new Ia(this,r,c,n)};function oE(e,t,n){return e=new Je(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}te("shaka.media.SegmentIndex",wr),wr.forSingleSegment=oE,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function Ia(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Ia.prototype.ie=function(e){this.reverse=e},Ia.prototype.dh=function(){return this.h},Ia.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Ia.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},te("shaka.media.SegmentIterator",Ia),Ia.prototype.next=Ia.prototype.next,Ia.prototype.current=Ia.prototype.current,Ia.prototype.currentPosition=Ia.prototype.dh,Ia.prototype.setReverse=Ia.prototype.ie;function Ei(){wr.call(this,[]),this.h=[]}Y(Ei,wr),g=Ei.prototype,g.clone=function(){var e=new Ei;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},te("shaka.media.MetaSegmentIndex",Ei),Ei.prototype.updateEvery=Ei.prototype.ke,Ei.prototype.fit=Ei.prototype.sc,Ei.prototype.mergeAndEvict=Ei.prototype.kd,Ei.prototype.evict=Ei.prototype.La,Ei.prototype.merge=Ei.prototype.ae,Ei.prototype.offset=Ei.prototype.offset,Ei.prototype.get=Ei.prototype.get,Ei.prototype.find=Ei.prototype.find,Ei.prototype.forEachTopLevelReference=Ei.prototype.tc,Ei.prototype.release=Ei.prototype.release;function jh(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}jh.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},jh.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},jh.prototype.Xb=function(){return this.g.Xb()};function MC(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){DC(t,!1)}).$a(.25)}MC.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function DC(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function WF(){this.g=null,this.h=[]}function aE(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function XF(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function $F(){this.i=this.h=null,this.g=[]}function sE(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Tm(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new WF,this.h=new $F}function uE(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function QF(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Zh(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var r=t.next().value;if(n&&(r=t.next().value),r){for(;e.g.size<e.m&&r!=null&&(n=!0,r.preload&&r.ja!=null&&(n=!1),r.bc()==2&&(n=!1),n&&r.ca&&PC(e,r.ca),n&&!e.g.has(r)&&(n=new cE(e.j),kC(n,r,e.h),e.g.set(r,n)),e.l=r.startTime,!(e.h.fastSwitching&&r.md&&r.Wd));)r=t.next().value;lE(e)}}}function PC(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(r){return at(r,t)})){var n=new cE(e.j);kC(n,t,e.h),e.i.set(t,n)}}function OC(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Gh(e,n)}function Xu(e){OC(e,e.g),OC(e,e.i),e.l=0}uE.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&Gh(this,r);t&&lE(this)};function lE(e){for(var t=Array.from(e.g.keys()),n={},r=m(e.i.keys()),u=r.next();!u.done;n={wd:n.wd},u=r.next())n.wd=u.value,t.some(function(c){return function(f){return at(f.ca,c.wd)}}(n))||Gh(e,n.wd)}function LC(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&Gh(e,r)}lE(e)}function JF(e,t){t&&t!==e.h&&(Xu(e),e.h=t)}function Gh(e,t){var n=e.g;t instanceof dt&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function cE(e){this.g=e,this.fe=this.Ef=null}function kC(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(u){return Oe(function(c){if(c.g==1)return 0<r.byteLength?r=li(r,u):r=u,e.Ef?N(c,e.Ef(r),3):c.u(0);r=new Uint8Array(0),$(c)})})}cE.prototype.abort=function(){this.fe&&this.fe.abort()};function fE(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}Y(fE,Sr),fE.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function Sm(e){Sr.call(this),this.g=new Map,this.h=e}Y(Sm,Sr),Sm.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function e4(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function t4(e,t,n){var r=e4(e,t.contentType);n4(e,r),e={ff:t,position:n},r=r.nd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Sm.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.nd,u=r.length-1;0<=u;u--){var c=r[u];if(c.position<=e){r=c.ff;break e}}r=null}if((u=r)&&(u=n.Uf,u=!(u===r||u&&r&&u.bandwidth==r.bandwidth&&u.audioSamplingRate==r.audioSamplingRate&&u.codecs==r.codecs&&u.contentType==r.contentType&&u.frameRate==r.frameRate&&u.height==r.height&&u.mimeType==r.mimeType&&u.channelsCount==r.channelsCount&&u.pixelAspectRatio==r.pixelAspectRatio&&u.width==r.width)),u)e:{if(u=e,c=r.contentType,(c=this.h()[c])&&0<c.length){var f=c[c.length-1].end;if(u>=c[0].start&&u<f){u=!0;break e}}u=!1}u&&(n.Uf=r,JSON.stringify(r),n=new Wn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function n4(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,f){return!(c.position<=n&&f+1<u.length&&u[f+1].position<=n||c.position>=r)})}else t.nd=[]}function qh(e,t,n,r,u){return e=Oi(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function FC(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new qu(function(){return r4(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=FC.prototype,g.destroy=function(){return this.l.destroy()};function r4(e){var t,n,r,u,c,f,h;return Oe(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,Hh(u),t.push(Vh(u));for(c=m(e.o.values()),f=c.next();!f.done;f=c.next())h=f.value,Xu(h);return N(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,$(E)})}g.configure=function(e){if(this.h=e,this.I=new Ih({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(Xu(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Xu(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(yr))&&t.W&&(Xu(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(Xu(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(LC(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=dE(this,n.stream));e.disableAudioPrefetch||u4(this)},g.start=function(e){var t=this;return Oe(function(n){if(n.g==1)return N(n,s4(t,e||new Map),2);jr(t.l),t.C=!0,$(n)})};function i4(e,t){var n,r,u,c,f,h;Oe(function(E){switch(E.g){case 1:return n=vi,e.H++,r=e.H,ce(E,2),N(E,ri(e.g.V,n.ma),4);case 4:ye(E,3);break;case 2:u=be(E),e.g&&e.g.onError(u);case 3:c=Si(t.mimeType,t.codecs),Wa(e.g.V,c,e.m.sequenceMode,t.external),f=e.g.V.F,(f.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(h=jC(e,t),e.i.set(n.ma,h),ys(e,h,0)),$(E)}})}function o4(e){var t=e.i.get(yr);t&&(Hh(t),Vh(t).catch(function(){}),e.i.delete(yr)),e.s=null}function UC(e,t){var n=0>e.g.eb(),r=e.i.get("video");r&&r.Z&&r.Z.ie(n),(r=e.i.get("audio"))&&r.Z&&r.Z.ie(n),(r=e.i.get(yr))&&r.Z&&r.Z.ie(n),(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.jc&&(Gf(e,t,!1,0,!1),n.jc=r):(t=n.jc)&&(n.jc=null,Gf(e,t,!0,0,!1)))}function BC(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&Gf(e,t.video,n,r,u,c),t.audio&&Gf(e,t.audio,n,r,u,c))}function wm(e,t){Oe(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):N(n,t.createSegmentIndex(),2):n.return();Gf(e,t,!0,0,!1),$(n)})}function Gf(e,t,n,r,u,c){var f=e.i.get(t.type);f||t.type!=yr?f&&(f.jc&&(t.trickModeVideo?(f.jc=t,t=t.trickModeVideo):f.jc=null),f.stream!=t||u)&&(e.o.has(t)?f.W=e.o.get(t):f.W&&JF(f.W,t),t.type==yr&&(u=Si(t.mimeType,t.codecs),Wa(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(f.stream)||f.stream.closeSegmentIndex&&f.stream.closeSegmentIndex(),f.stream=t,f.Z=null,f.Of=!!c,n&&(f.Xc?f.le=!0:f.Qa?(f.Lb=!0,f.Id=r,f.le=!0):(Hh(f),mE(e,f,!0,r).catch(function(h){e.g&&e.g.onError(h)}))),a4(e,f).catch(function(h){e.g&&e.g.onError(h)})):i4(e,t)}function a4(e,t){var n,r;return Oe(function(u){if(u.g==1)return t.Ya?(n=t.stream,r=t.Ya,n.segmentIndex?u.u(2):N(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=r||t.stream!=n)return u.return();var c=e.g.Ld(),f=Dt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(f||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),$(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:r==yr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,r),u=Ft(u,e)),u||((Dt(this.g.V,r)!=null||n.Qa)&&Am(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),r===yr&&(r=this.g.V,r.H&&r.H.h()),n.od=!0)}};function Am(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Us(e.g.V,t.type)==null?t.ub==null&&ys(e,t,0):(Hh(t),mE(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function s4(e,t){var n,r,u,c,f,h,E,A,k,G;return Oe(function(ne){if(ne.g==1){if(n=vi,!e.j)throw new pt(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.ma,e.s),u.add(e.s)),c=e.g.V,N(ne,c.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),f=m(r.keys()),h=f.next();!h.done;h=f.next())E=h.value,A=r.get(E),e.i.has(E)||(k=jC(e,A),t.has(A.id)&&(G=t.get(A.id),QF(G,function(z,ve,Pe){return Im(z,ve,Pe||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),ys(e,k,0));$(ne)})}function jC(e,t){return{stream:t,type:t.type,Z:null,W:dE(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function dE(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===yr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===yr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new uE(e.h.segmentPrefetchLimit,t,function(r,u,c){return Im(r,u,c||null,e.h.retryParameters,e.g.zb)}):null}function u4(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r={},u=m(e.m.variants),c=u.next();!c.done;r={Fa:r.Fa},c=u.next())if(r.Fa=c.value,r.Fa.audio)if(e.o.has(r.Fa.audio)){if(c=e.o.get(r.Fa.audio),LC(c,t),!(0<t&&n.some(function(h){return function(E){return Ou(h.Fa.audio.language,E)}}(r)))){var f=e.i.get(r.Fa.audio.type);c!==(f&&f.W)&&Xu(c),e.o.delete(r.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return Ou(h.Fa.audio.language,E)}}(r))||!(c=dE(e,r.Fa.audio))||(r.Fa.audio.segmentIndex||r.Fa.audio.createSegmentIndex(),e.o.set(r.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function l4(e,t){var n,r,u,c,f;return Oe(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return N(h,mE(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,N(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||ys(e,t,0),h.return();case 4:ce(h,6),r=c4(e,t),r!=null&&(ys(e,t,r),t.gd=!1),ye(h,7);break;case 6:return u=be(h),N(h,ZC(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return N(h,e.g.V.endOfStream(),10);case 10:jr(e.l),f=e.g.V.getDuration(),f!=0&&f<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(f),$(h)}})}function c4(e,t){if(pE(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==yr&&fr(e.g.V),!e.g.V.ea&&t.type!=yr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.La(n,!0),Zh(u,n);r=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),f=e.m.presentationTimeline.getDuration()-r,h=Dt(e.g.V,t.type);if(1e-6>f&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(yr))&&pE(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=f4(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,f=Array.from(e.i.values()),f=m(f),h=f.next();!h.done;h=f.next())h=h.value,pE(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return r>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),Zh(t.W,u.startTime)),d4(e,t,n,u).catch(function(){}),null)}function f4(e,t,n,r){if(t.Z)return t.Z.current();if(t.Oa||r)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:r,!1,0>e.g.eb()),t.Z&&t.Z.next().value;r=e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.eb();var c=null;return r&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function d4(e,t,n,r){var u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(u=vi,c=t.stream,f=t.Z,t.Qa=!0,ce(Ue,2),r.bc()==2)throw new pt(1,1,1011);return N(Ue,m4(e,t,r),4);case 4:return jr(e.l),e.A?Ue.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||r.m)?(G=new Uint8Array(0),z=ne=!1,Pe=function(gt){var bt,Ht,Ut;return Oe(function(vt){switch(vt.g){case 1:if(ne||(z=!0,jr(e.l),e.A))return vt.return();if(ce(vt,2),G=p4(G,gt),bt=!1,Ht=0,new kr().box("mdat",function(jt){Ht=jt.size+jt.start,bt=!0}).parse(G,!1,!0),!bt){vt.u(4);break}return Ut=G.subarray(0,Ht),G=G.subarray(Ht),N(vt,hE(e,t,n,c,r,Ut,!0),5);case 5:t.W&&t.Z&&Zh(t.W,r.startTime,!0);case 4:ye(vt,0);break;case 2:ve=be(vt),$(vt)}})},N(Ue,gE(e,t,r,Pe),9)):(A=gE(e,t,r),N(Ue,A,7)));case 7:return k=Ue.h,jr(e.l),e.A?Ue.return():(jr(e.l),t.Lb?(t.Qa=!1,ys(e,t,0),Ue.return()):N(Ue,hE(e,t,n,c,r,k),6));case 9:if(xe=Ue.h,ve)throw ve;if(z){Ue.u(10);break}return ne=!0,jr(e.l),e.A?Ue.return():t.Lb?(t.Qa=!1,ys(e,t,0),Ue.return()):N(Ue,hE(e,t,n,c,r,xe),10);case 10:t.W&&t.Z&&Zh(t.W,r.startTime,!0);case 6:if(jr(e.l),e.A)return Ue.return();t.Oa=r,f.next(),t.Qa=!1,t.uf=!1,Ge=e.g.V.ob(),Te=Ge[t.type],JSON.stringify(Te),t.Lb||e.g.mf(r,t.stream),ys(e,t,0),ye(Ue,0);break;case 2:if(We=be(Ue),jr(e.l,We),e.A)return Ue.return();if(t.Qa=!1,We.code==7001)t.Qa=!1,Hh(t),ys(e,t,0),Ue.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Ue.u(0);else if(We.code==3017)g4(e,t,We),Ue.u(0);else return t.gd=!0,We.category==1&&t.W&&Gh(t.W,r),We.severity=2,N(Ue,ZC(e,t,We),0)}})}function h4(e,t,n){var r,u,c,f,h;return Oe(function(E){if(E.g==1)return r=t,r.cryptoKey?E.u(2):N(E,r.fetchKey(),3);if(u=r.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,f=u.byteLength-1;0<=f;f--)u[f]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function p4(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function g4(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}ys(e,t,4)}function m4(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z,ve,Pe;return Oe(function(xe){switch(xe.g){case 1:if(r=vi,u=[],c=Math.max(0,n.appendWindowStart-.1),f=n.appendWindowEnd+.01,h=Ha(t.stream.codecs),E=wa(t.stream.mimeType),A=n.timestampOffset,A==t.cf&&c==t.af&&f==t.$e&&h==t.bf&&E==t.kg){xe.u(2);break}if(k=t.bf&&t.kg&&qF(e.g.V,t.type,E,h),!k){xe.u(3);break}if(G=null,t.type===r.fa?G=e.i.get(r.S):t.type===r.S&&(G=e.i.get(r.fa)),!G){xe.u(3);break}return N(xe,Vh(G).catch(function(){}),5);case 5:G.ec=null,Am(e,G);case 3:return ne=function(){var Ge,Te,We;return Oe(function(Ue){if(Ue.g==1)return Ge=new Map,e.j.audio&&Ge.set(r.S,e.j.audio),e.j.video&&Ge.set(r.fa,e.j.video),ce(Ue,2),t.af=c,t.$e=f,t.bf=h,t.kg=E,t.cf=A,Te=e.m.sequenceMode||e.m.type=="HLS",N(Ue,Qr(e.g.V,t.type,A,c,f,Te,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,Ge),4);if(Ue.g!=2)return ye(Ue,0);throw We=be(Ue),t.af=null,t.$e=null,t.bf=null,t.cf=null,We})},N(xe,ne(),2);case 2:return at(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(z=gE(e,t,n.ca),ve=function(){var Ge,Te,We,Ue,gt,bt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:return ce(Ut,2),N(Ut,z,4);case 4:return Ge=Ut.h,jr(e.l),Te=null,We=new Map,Ue={projection:null,hfov:null},gt=new kr,gt.box("moov",vr).box("trak",vr).box("mdia",vr).O("mdhd",function(vt){Te=At(vt.reader,vt.version).timescale}).box("hdlr",function(vt){switch(vt=vt.reader,vt.skip(8),vt.hc()){case"soun":We.set(r.S,Te);break;case"vide":We.set(r.fa,Te)}Te=null}).box("minf",vr).box("stbl",vr).O("stsd",fu).box("encv",wi).box("avc1",wi).box("avc3",wi).box("hev1",wi).box("hvc1",wi).box("dvav",wi).box("dva1",wi).box("dvh1",wi).box("dvhe",wi).box("vexu",vr).box("proj",vr).O("prji",function(vt){vt=vt.reader.hc(),Ue.projection=vt}).box("hfov",function(vt){vt=vt.reader.M()/1e3,Ue.hfov=vt}).parse(Ge),E4(e,Ue),We.has(t.type)?n.ca.timescale=We.get(t.type):Te!=null&&(n.ca.timescale=Te),bt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,N(Ut,e.g.Qf(t.type,Ge),5);case 5:return N(Ut,Tr(e.g.V,t.type,Ge,null,t.stream,bt),6);case 6:ye(Ut,0);break;case 2:throw Ht=be(Ut),t.ec=null,Ht}})},e.g.Yh(n.startTime,n.ca),u.push(ve()))),e.m.sequenceMode&&(Pe=t.Oa?t.Oa.j:null,n.j!=Pe&&u.push(Bs(e.g.V,t.type,n.startTime))),N(xe,Promise.all(u),0)}})}function hE(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h,E,A,k,G,ne;return Oe(function(z){switch(z.g){case 1:return h=r.closedCaptions&&0<r.closedCaptions.size,A=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(A||k)&&(E=new kr),A&&E.O("emsg",function(ve){var Pe=r.emsgSchemeIdUris;if(ve.version===0)var xe=ve.reader.hc(),Ge=ve.reader.hc(),Te=ve.reader.M(),We=ve.reader.M(),Ue=ve.reader.M(),gt=ve.reader.M(),bt=u.startTime+We/Te;else Te=ve.reader.M(),bt=ve.reader.Cc()/Te+u.timestampOffset,We=bt-u.startTime,Ue=ve.reader.M(),gt=ve.reader.M(),xe=ve.reader.hc(),Ge=ve.reader.hc();ve=ve.reader.sb(ve.reader.getLength()-ve.reader.wa()),(Pe&&Pe.includes(xe)||e.h.dispatchAllEmsgBoxes)&&(xe=="urn:mpeg:dash:event:2012"?e.g.Zh():(Pe=new Map().set("detail",{startTime:bt,endTime:bt+Ue/Te,schemeIdUri:xe,value:Ge,timescale:Te,presentationTimeDelta:We,eventDuration:Ue,id:gt,messageData:ve}),Pe=new Wn("emsg",Pe),Pe.cancelable=!0,e.g.onEvent(Pe),Pe.defaultPrevented||xe!="https://aomedia.org/emsg/ID3"&&xe!="https://developer.apple.com/streaming/emsg-id3"||(xe=Dn(ve),xe.length&&u&&e.g.$h([{cueTime:u.startTime,data:ve,frames:xe,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ve){if(!e.F&&u.ca.timescale){var Pe=ve.reader,xe=ve.version;Pe.M(),ve=Pe.M();var Ge=Pe.M();ve=1e3*ve+Ge/Math.pow(2,32)*1e3,xe===0?Pe=Pe.M():(xe=Pe.M(),Pe=Pe.M(),Pe=xe*Math.pow(2,32)+Pe),ve=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ve).getTime(),Pe=new Map().set("detail",{wallClockTime:ve,programStartDate:new Date(ve-Pe/u.ca.timescale*1e3)}),Pe=new Wn("prft",Pe),e.g.onEvent(Pe),e.F=!0}}),(A||k)&&E.parse(c),N(z,y4(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,ne=t.Of,t.Of=!1,N(z,e.g.Qf(t.type,c),3);case 3:return N(z,Tr(e.g.V,t.type,c,u,r,h,G,ne,f),4);case 4:jr(e.l),$(z)}})}function y4(e,t,n){var r,u,c,f;return Oe(function(h){if(h.g==1)return r=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Us(e.g.V,t.type),u==null?h.return():(c=n-u,f=c-r,f<=e.h.evictionGoal?h.return():N(h,e.g.V.remove(t.type,u,u+f),2));jr(e.l),$(h)})}function pE(e){return e&&e.type==yr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function gE(e,t,n,r){var u,c,f,h,E;return Oe(function(A){switch(A.g){case 1:if(u=n.ed())return A.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof dt&&(G=k.i),G.has(n)?(k=G.get(n),r&&(k.Ef=r),c=k.fe):c=null}return c||(c=Im(n,t.stream,r||null,e.h.retryParameters,e.g.zb)),f=0,t.Z&&(f=t.Z.h),t.Ya=c,N(A,c.promise,2);case 2:if(h=A.h,t.Ya=null,E=h.data,!n.aesKey){A.u(3);break}return N(A,h4(E,n.aesKey,f),4);case 4:E=A.h;case 3:return A.return(E)}})}function Im(e,t,n,r,u){var c=e instanceof Je?e:void 0,f=c?1:0;return e=qh(e.$(),e.Aa,e.ja,r,n),e.contentType=t.type,u.request(Ka,e,{type:f,stream:t,segment:c})}function mE(e,t,n,r){var u,c;return Oe(function(f){if(f.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&Xu(t.W),r?(u=e.g.Ld(),c=e.g.V.getDuration(),N(f,e.g.V.remove(t.type,u+r,c),3)):N(f,ri(e.g.V,t.type),4);if(f.g!=3)return jr(e.l),n?N(f,e.g.V.flush(t.type),3):f.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||ys(e,t,0),$(f)})}function ys(e,t,n){var r=t.type;(r!=yr||e.i.has(r))&&(t.ub=new Ns(function(){var u;return Oe(function(c){if(c.g==1)return ce(c,2),N(c,l4(e,t),4);if(c.g!=2)return ye(c,0);u=be(c),e.g&&e.g.onError(u),$(c)})}).X(n))}function Hh(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function Vh(e){return Oe(function(t){return e.Ya?N(t,e.Ya.abort(),0):t.u(0)})}function ZC(e,t,n){var r;return Oe(function(u){if(u.g==1)return N(u,Ch(e.I),2);jr(e.l),r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<r&&(n.handled=e.g.Jd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),$(u)})}function v4(e){var t,n,r,u,c,f;return Oe(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,r=vi,(u=e.i.get(r.S))&&(u.ec=null,Am(e,u),Vh(u).catch(function(){})),(c=e.i.get(r.fa))&&(c.ec=null,Am(e,c),Vh(c).catch(function(){})),f=new Map,e.j.audio&&f.set(r.S,e.j.audio),e.j.video&&f.set(r.fa,e.j.video),N(h,yC(e.g.V,f),2))):h.return(!0)})}function E4(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function yE(){}function vE(e,t,n,r,u){var c=u in r,f=!0,h;for(h in t){var E=u+"."+h,A=c?r[u]:n[h];c||h in n?t[h]===void 0?A===void 0||c?delete e[h]:e[h]=Va(A):A.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=Va(A)),E=vE(e[h],t[h],A,r,E),f=f&&E):typeof t[h]!=typeof A||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=A.constructor?(fe("Invalid config, wrong type for "+E),f=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&He("Unexpected number of arguments for "+E),e[h]=t[h]):(fe("Invalid config, unrecognized key "+E),f=!1)}return f}function Cm(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function qf(e,t){return e&&t}te("shaka.util.ConfigUtils",yE),yE.convertToConfigObject=Cm,yE.mergeConfigObjects=vE;function Xa(){}function GC(e){return e=Ga(e),new si(e).wb}function Kh(e,t,n){function r(h){tn(c).setUint32(f,h.byteLength,!0),f+=4,c.set(Qn(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new pt(2,6,6015);var u;typeof t=="string"?u=mf(t,!0):u=t,e=Ga(e),e=mf(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),f=0;return r(e),r(u),r(n),c}function qC(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ga(e).split("skd://").pop(),Kh(e,n,t))}function EE(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}te("shaka.util.FairPlayUtils",Xa),Xa.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Kr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Ti(qo(n)))}},Xa.expressplayFairPlayRequest=function(e,t){EE(e,t)},Xa.conaxFairPlayRequest=function(e,t){EE(e,t)},Xa.ezdrmFairPlayRequest=function(e,t){EE(e,t)},Xa.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=au(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=qa("spc="+e))},Xa.expressplayInitDataTransform=function(e,t,n){return qC(e,t,n)},Xa.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Ga(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var r=new ArrayBuffer(2*n.length);r=bu(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return Kh(e,r,t)},Xa.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ga(e).split(";").pop(),Kh(e,n,t))},Xa.verimatrixInitDataTransform=function(e,t,n){return qC(e,t,n)},Xa.initDataTransform=Kh,Xa.defaultGetContentId=GC,Xa.isFairPlaySupported=function(){var e;return Oe(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),N(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(be(t),t.return(!1))})};function _E(){}function Hf(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:aa(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,A,k){return p.shakaMediaKeysPolyfill&&A=="skd"&&(A=k.serverCertificate,k=GC(E),E=Kh(E,k,A)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ds(),minHdcpVersion:"",ignoreDuplicateInitData:!Nu()};(ds()||Nr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Nu()||Ru()||Yr("Tizen 4")||ra()&&ou()===38||ra()&&ou()===53||ra()&&ou()===68||ia()&&(!ia()||!Yr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&yl()||(n="smooth",r=!0),r={retryParameters:aa(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:bm,manifestPreprocessorTXml:Rm,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ru()||Nu()||ra()&&ou()===38||Nr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:bm,manifestPreprocessorTXml:Rm,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:aa(),failureCallback:function(E){return qf([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(ra()||ja()||ia()||ps())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return Oe(function(A){return A.return(E)})},downloadSizeCallback:function(E){var A;return Oe(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?N(k,navigator.storage.estimate(),3):k.return(!0):(A=k.h,k.return(A.usage+E<.95*A.quota))})},progressCallback:function(E,A){return qf([E,A])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return qf([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,A){return qf([E,A])}};var f=!1;(ra()||ja()||ia()||ps()||uc()||Nr()||ds())&&(f=!0);var h={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:f}};return c.trackSelectionCallback=function(E){return Oe(function(A){return A.return(_4(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function xc(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return vE(e,t,n||Hf(),r,"")}function _4(e,t,n){var r=n;r=="AUTO"&&(r=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=_l(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return br(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,E){return E.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=yr&&n.type!="image"||t.push(n);return t}function bm(e){return qf([e],e)}function Rm(e){return qf([e],e)}te("shaka.util.PlayerConfiguration",_E),_E.mergeConfigObjects=xc,_E.createDefault=Hf;function $u(e,t,n,r,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=r,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new Tm,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}Y($u,Sr);function Nm(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function T4(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function HC(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=$u.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function S4(e){return e.da=!0,e.i}function w4(e){return e.sa=!0,e.j}function A4(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function I4(e){return e.ea=!0,e.l}function C4(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return N(n,Promise.resolve(),2);case 2:return ce(n,3),N(n,b4(e),5);case 5:return e.o?n.return():(e.qa.resolve(),N(n,R4(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Il(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),Hg(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var r=e.g.abrFactory;e.s=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Rb){r=e.h.presentationTimeline.R();var u=Cf(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&VC(e,u.video,r),u.audio&&VC(e,u.audio,r))}return N(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),ye(n,0);break;case 3:throw t=be(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function TE(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function b4(e){var t,n,r,u,c;return Oe(function(f){if(f.g==1)return TE(e,"manifest-parser"),e.j||(e.B=Ie(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,TE(e,"manifest"),e.h?f.u(2):(n=e,N(f,e.j.start(e.K,e.Ub),3));if(f.g!=2&&(n.h=f.h),r=new Wn("manifestparsed",void 0),e.dispatchEvent(r),e.h.variants.length==0)throw new pt(2,4,4036);N4(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,$(f)})}function R4(e){var t,n,r,u,c;return Oe(function(f){switch(f.g){case 1:TE(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=hc(e.h.variants,h.h.restrictions,h.i),!t){f.u(2);break}return n=new Wn("trackschanged",void 0),N(f,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return r=Cf(e.h.variants),N(f,hm(e.l,r,e.h.offlineSessionIds),4);case 4:return N(f,je(e.A,e.h),5);case 5:if(u=f.h,!u){f.u(0);break}return c=new Wn("trackschanged",void 0),N(f,Promise.resolve(),7);case 7:e.dispatchEvent(c),$(f)}})}g.configure=function(e,t){e=Cm(e,t),xc(this.g,e)},g.getConfiguration=function(){return Va(this.g)};function VC(e,t,n){var r,u,c,f,h;Oe(function(E){if(E.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new uE(r,t,function(A,k,G){return Im(A,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),N(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(f=t.segmentIndex.xb(c))?f.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&PC(u,h.ca):Zh(u,h.startTime)),$(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,r;return Oe(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return N(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return N(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return N(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())r=n.value,Xu(r);$(u)}})};function N4(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}te("shaka.media.PreloadManager",$u),$u.prototype.destroy=$u.prototype.destroy,$u.prototype.waitForFinish=$u.prototype.Fi;function xm(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:Vf,cc:function(r,u){return Mc(n,"enter",r,u)}},{oc:zh,nc:Vf,cc:function(r,u){return Mc(n,"enter",r,u)}},{oc:Yh,nc:Vf,cc:function(r,u){return Mc(n,"enter",r,u)}},{oc:Vf,nc:zh,cc:function(r,u){return Mc(n,"exit",r,u)}},{oc:Vf,nc:Yh,cc:function(r,u){return Mc(n,"exit",r,u)}},{oc:zh,nc:Yh,cc:function(r,u){return Mc(n,"skip",r,u)}},{oc:Yh,nc:zh,cc:function(r,u){return Mc(n,"skip",r,u)}}],this.h=new Et,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Y(xm,Sr),xm.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},xm.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?zh:e>r.endTime?Yh:Vf;this.g.set(r,c);for(var f=m(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(r,t)}}};function Mc(e,t,n,r){t=new Wn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var zh=1,Vf=2,Yh=3;function SE(e,t,n){var r,u,c,f,h,E,A;return Oe(function(k){switch(k.g){case 1:var G=new si(e).Pa.split("/").pop().split(".");return r=G.length==1?"":G.pop().toLowerCase(),(u=x4[r])?k.return(u):(c=0,f=Oi([e],n),ce(k,2),f.method="HEAD",N(k,t.request(c,f).promise,4));case 4:h=k.h,u=h.headers["content-type"],ye(k,3);break;case 2:if(E=be(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return f.method="GET",N(k,t.request(c,f).promise,6);case 6:A=k.h,u=A.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var x4={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function KC(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(f){return KC(f,e)}).join("");var n=[],r=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=zC(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=zC(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(f,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+f+"</"+h+">"},e.payload)}function zC(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function wE(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(wE(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=KC(r,t),n.push(u)}return n}function ca(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=ca.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(YC(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=wE(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=m(t);for(var u=t.next();!u.done;r={qc:r.qc},u=t.next())r.qc=u.value,e.some(function(c){return function(f){return f.startTime==c.qc.startTime&&f.endTime==c.qc.endTime&&f.text==c.qc.payload}}(r))||(u=M4(r.qc))&&n.push(u);for(e=n.slice().sort(function(c,f){return c.startTime!=f.startTime?c.startTime-f.startTime:c.endTime!=f.endTime?c.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(c):n.indexOf(c)-n.indexOf(f)}),e=m(e),r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},g.destroy=function(){return this.g&&(YC(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function M4(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function YC(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}te("shaka.text.SimpleTextDisplayer",ca),ca.prototype.setTextVisibility=ca.prototype.setTextVisibility,ca.prototype.isTextVisible=ca.prototype.isTextVisible,ca.prototype.destroy=ca.prototype.destroy,ca.prototype.append=ca.prototype.append,ca.prototype.remove=ca.prototype.remove,ca.prototype.configure=ca.prototype.configure;function fa(){}g=fa.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},te("shaka.text.StubTextDisplayer",fa),fa.prototype.setTextVisibility=fa.prototype.setTextVisibility,fa.prototype.isTextVisible=fa.prototype.isTextVisible,fa.prototype.destroy=fa.prototype.destroy,fa.prototype.append=fa.prototype.append,fa.prototype.remove=fa.prototype.remove,fa.prototype.configure=fa.prototype.configure;function WC(){}function Wh(e){for(;e.firstChild;)e.removeChild(e.firstChild)}te("shaka.util.Dom",WC),WC.removeAllChildren=Wh;function da(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){r.A.paused||Kf(r)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Et,this.j.D(document,"fullscreenchange",function(){Kf(r,!0)}),this.j.D(this.A,"seeking",function(){Kf(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){Kf(r,!0)}),this.o.observe(this.g)),this.B=new Map}g=da.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var r=e.next();!r.done;n={ud:n.ud},r=e.next())n.ud=r.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);Kf(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),Kf(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function D4(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function XC(e,t,n,r,u){var c=!1,f=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var A=e.i.get(E),k=E.startTime<=r&&E.endTime>r,G=A?A.Mg:null;A&&(f.push(A.Ce),A.ic&&f.push(A.ic),k||(c=!0,e.i.delete(E),A=null)),k&&(h.push(E),A?D4(e,G)||(c=!0):(P4(e,E,u),A=e.i.get(E),G=A.Mg,c=!0)),0<E.nestedCues.length&&G&&XC(e,E.nestedCues,G,r,u),u.pop()}if(c){for(r=m(f),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(ne,z){return ne.startTime!=z.startTime?ne.startTime-z.startTime:ne.endTime-z.endTime}),h=m(h),E=h.next();!E.done;E=h.next())r=e.i.get(E.value),r.ic?(r.ic.contains(n)&&r.ic.removeChild(n),n.appendChild(r.ic),r.ic.appendChild(r.Ce)):n.appendChild(r.Ce)}}function Kf(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())Wh(r.value);Wh(e.g),e.i.clear(),e.B.clear()}e.m&&XC(e,e.h,e.g,n,[])}}function P4(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&L4(e,c,t,n,r),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var f=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(f))n=e.B.get(f);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",A=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+f,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+A),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,A=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,A-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=A+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(f,h),n=h}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function O4(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Kn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Kn?"line-right":"center"}function L4(e,t,n,r,u){var c=t.style,f=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return" ".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=AE(n.linePadding,n,e.s),c.paddingRight=AE(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),!u&&((t=$C(r,function(k){return k.backgroundColor}))?A.style.backgroundColor=t:E&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=$C(r,function(k){return k.fontFamily}))&&(A.style.fontFamily=t),E&&(A.textContent=E)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=AE(n.fontSize,n,e.s),r=n.line,r!=null&&(f=n.lineInterpretation,f==cn&&(f=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),f==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==Cn?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==Cn?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==Cn?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=O4(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function AE(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function $C(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}te("shaka.text.UITextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.remove=da.prototype.remove,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.configure=da.prototype.configure;function k4(e,t){function n(c){for(var f=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(f+=E.end-E.start);return c=Math.floor(f/3600),h=Math.floor(f/60%60),E=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>f?10>f?"00":"0":"")+f}var r=wE(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var f=[];switch(c.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case kn:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(c.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}te("shaka.text.WebVttGenerator",function(){});function QC(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}QC.prototype.configure=function(e){this.g=e};function F4(e,t,n){try{if(!e.g.enabled)return t;var r=IE(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=Dm;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=Om;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=eb;break e}u=void 0}r.ot=u,r.su=!0;var c=Mm(r);return CE(t,c)}catch(f){return _t("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function IE(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function zf(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,IE(e)),n.pr=e.h.eb();var u=n.ot===Pm||n.ot===Om;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=U4(e,n),r)r=G4(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=Mm(e);c&&(t.uris=t.uris.map(function(f){return CE(f,c)}))}}}function U4(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function B4(e){if(e.type===0)return q4;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Om:Pm;if(t=="audio")return Dm;if(t=="text")return e.mimeType==="application/mp4"?Lm:bE}}function j4(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function JC(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function Z4(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case Pm:return e.videoBandwidth||NaN;case Dm:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Mm(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function r(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=m(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var E=e[h];if(r(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var A=c[h];A&&(E=A(E)),A=typeof E;var k=void 0;k=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):A==="boolean"?h:A==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function G4(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,u[c[f]!=null?c[f]:1][f]=e[f];for(e=0;e<u.length;e++)(c=Mm(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function CE(e,t){return!t||e.includes("offline:")?e:(e=new si(e),e.g.set("CMCD",t),e.toString())}var eb="m",Dm="a",Pm="v",Om="av",q4="i",bE="c",Lm="tt";te("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function $a(e){this.h=e,this.g=null}g=$a.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(rb)?1e3*this.g.get(rb):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(nb)?1e3*this.g.get(nb):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has(ib)?this.g.get(ib):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(ob)?this.g.get(ob):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function tb(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}te("shaka.util.CmsdManager",$a),$a.prototype.getBandwidthEstimate=$a.prototype.getBandwidthEstimate,$a.prototype.getRoundTripTime=$a.prototype.yh,$a.prototype.getResponseDelay=$a.prototype.xh,$a.prototype.getEstimatedThroughput=$a.prototype.cg,$a.prototype.getMaxBitrate=$a.prototype.dg;var nb="etp",rb="mb",ib="rd",ob="rtt";function ab(){this.g=null,this.h=[]}function RE(e,t){return Oe(function(n){if(n.g==1)return e.g?N(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,$(n)})}ab.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function dn(e,t){Sr.call(this);var n=this;this.l=FE,this.Rd=this.g=null,this.da=!1,this.Vd=new Et,this.Rb=new Et,this.m=new Et,this.ta=new Et,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new ab,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=Xf(this),this.ba={width:1/0,height:1/0},this.Pd=new we(this.h,this.ba,null),this.s=null,this.sa=new Il(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=nU(this),this.aa=new $a(this.h.cmsd),this.G=hb(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,Zm&&(this.A=Zm(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){OE(n),n.vf()}),this.Td=new pr(function(){return sU(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}Y(dn,Sr);function km(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function H4(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(yl()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||He("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),km(e),e.K==null&&(e.K=new io(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else km(e)}function Jr(e,t){return new Wn(e,t)}g=dn.prototype,g.destroy=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return e.l==Zs?n.return():(km(e),t=e.detach(),e.l=Zs,N(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return N(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),$(n)}})};function Yf(e,t){e.dispatchEvent(Jr("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Oe(function(f){switch(f.g){case 1:if(n.l==Zs)throw new pt(2,7,7e3);if(r=n.g&&n.g==e,!n.g||n.g==e){f.u(2);break}return N(f,n.detach(),2);case 2:return N(f,NE(n,"attach"),4);case 4:if(f.h)return f.return();if(ce(f,5,6),r||(Yf(n,"attach"),u=function(){var h=LE(n);h&&Jf(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!Ao()||n.F){f.u(6);break}return N(f,xE(n),6);case 6:$e(f),n.Y.release(),Ae(f,0);break;case 5:return c=be(f),N(f,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return Oe(function(n){if(n.g==1){if(t.l==Zs)throw new pt(2,7,7e3);return N(n,t.lc(!1,e),2)}if(n.g!=3)return N(n,NE(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),Yf(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}$(n)})};function NE(e,t){var n;return Oe(function(r){return r.g==1?(n=++e.Yd,N(r,RE(e.Y,t),2)):n!=e.Yd?(e.Y.release(),r.return(!0)):r.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,f,h,E,A,k,G;return Oe(function(ne){switch(ne.g){case 1:return n.l!=Zs&&(n.l=FE),N(ne,NE(n,"unload"),2);case 2:return ne.h?ne.return():(oe(ne,3),n.Ia=!1,Yf(n,"unload"),e&&!Ao()&&(e=!1),km(n),r=n.Tb.map(function(z){return z()}),n.Tb=[],N(ne,Promise.all(r),5));case 5:if(n.dispatchEvent(Jr("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){ne.u(6);break}return N(ne,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){ne.u(8);break}return N(ne,n.o.stop(),8);case 8:if(!n.j){ne.u(10);break}return N(ne,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){ne.u(12);break}return N(ne,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&Wh(n.g),!n.g||!n.g.src){ne.u(14);break}return N(ne,new Promise(function(z){return new pr(z).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){ne.u(16);break}return N(ne,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(f=c.value,h=m([f.audio,f.video]),E=h.next();!E.done;E=h.next())(A=E.value)&&A.segmentIndex&&A.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new Tm,n.kf=null,n.$c=[],n.N=NaN,PE(n);case 3:$e(ne),n.Y.release(),Ae(ne,4);break;case 4:if(e&&Ao()&&!n.F)return N(ne,xE(n),0);ne.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:if(r.l==Zs)throw new pt(2,7,7e3);return u=null,c="",e instanceof $u?(u=e,c=u.ad()||""):c=e||"",N(Ge,RE(r.Y,"load"),2);case 2:if(r.Y.release(),!r.g)throw new pt(2,7,7002);if(!r.qa){Ge.u(3);break}return N(Ge,r.lc(!1),3);case 3:if(f=++r.Yd,h=function(){return Oe(function(Te){if(Te.g==1)return r.Yd==f?Te.u(0):u?N(Te,u.destroy(),3):Te.u(3);throw new pt(2,7,7e3)})},E=function(Te,We){return Oe(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),N(Ue,RE(r.Y,We),4);case 4:return N(Ue,h(),5);case 5:return N(Ue,Te(),6);case 6:return N(Ue,h(),7);case 7:u&&r.h&&(u.g=r.h);case 2:$e(Ue),r.Y.release(),Ae(Ue,0)}})},ce(Ge,5,6),t==null&&u&&(t=u.getStartTime()),r.ea=t,r.Ia=!1,r.dispatchEvent(Jr("loading")),u){n=u.Y,Ge.u(8);break}if(n){Ge.u(8);break}return N(Ge,E(function(){return Oe(function(Te){if(Te.g==1)return N(Te,lb(r,c),2);n=Te.h,$(Te)})},"guessMimeType_"),8);case 8:if(A=!!u,u){HC(u,r),r.s=u.getStats(),Ge.u(11);break}return N(Ge,sb(r,c,t,n,!0),12);case 12:if(u=Ge.h,!u){r.s=new Tm,Ge.u(11);break}return HC(u,r),r.s=u.getStats(),N(Ge,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,r.s=u?u.getStats():new Tm,r.qa=c,r.gf=n||null,k)return N(Ge,E(function(){return Oe(function(Te){return N(Te,Y4(r,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(r.F){Ge.u(17);break}return N(Ge,E(function(){return Oe(function(Te){return N(Te,xE(r),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return N(Ge,E(function(){return u.qa},"waitForManifest"),19);case 19:return r.h=u.getConfiguration(),r.Pd=u.A,r.Ga=u.B,r.I=w4(u),r.mb=A4(u),r.lb=u.lb,r.i=u.Te(),(ne=u.m)&&(r.sa=ne),A&&r.g&&r.g.nodeName==="AUDIO"&&(V4(r),r.configure("manifest.disableVideo",!0)),N(Ge,E(function(){return u.pa},"waitForDrm"),20);case 20:return r.B=I4(u),N(Ge,E(function(){return Oe(function(Te){return N(Te,r.B.Vc(r.g),0)})},"drmEngine_.attach"),21);case 21:return N(Ge,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(z=u.s)||r.pa&&r.pa==z||(r.o=S4(u),r.pa=u.s,typeof r.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),ve=C4(u),Pe=u.ta,N(Ge,E(function(){return Oe(function(Te){return N(Te,z4(r,G,Pe,ve),0)})},"loadInner_"),23);case 23:T4(u),Ge.u(16);break;case 24:return N(Ge,E(function(){return Oe(function(Te){return N(Te,W4(r,G,n),0)})},"srcEqualsInner_"),16);case 16:r.dispatchEvent(Jr("loaded"));case 6:if($e(Ge),!u){Ge.u(26);break}return N(Ge,u.destroy(),26);case 26:Ae(Ge,0);break;case 5:if(xe=be(Ge),xe.code==7e3){Ge.u(28);break}return N(Ge,r.lc(!1),28);case 28:throw xe}})};function V4(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c;return Oe(function(f){switch(f.g){case 1:if(r=null,!(n.i&&n.I&&n.Ga&&n.qa)){f.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,N(f,ub(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=r=f.h,E=n.I,A=n.Ga;h.h=n.i,h.j=E,h.B=A,h=r,E=n.pa,h.i=n.o,h.s=E,r.m=n.sa,r.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return N(f,n.lc(e,t),4);case 4:return f.return(r)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Oe(function(c){return c.g==1?N(c,sb(r,e,t,n),2):((u=c.h)?u.start().catch(function(){}):Jf(r,new pt(2,7,7005)),c.return(u))})};function sb(e,t,n,r,u){u=u===void 0?!1:u;var c,f,h;return Oe(function(E){return E.g==1?(c=Date.now()/1e3,r?E.u(2):N(E,lb(e,t),3)):(E.g!=2&&(r=E.h),K4(e,r)?E.return(null):(f=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(f=!0)),E.return(ub(e,t,n,r||null,c,!u,f,h))))})}function ub(e,t,n,r,u,c,f,h){c=c===void 0?!0:c,f=f===void 0?!1:f,h=h===void 0?!0:h;var E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt;return Oe(function(Ht){return Ht.g==1?(E=null,A=Va(e.h),f&&(A.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},ne=function(Ut,vt){k()?E.configure(Ut,vt):e.configure(Ut,vt)},e.ba.width!=1/0||e.ba.height!=1/0?Ht.u(2):N(Ht,Ta(),3)):(Ht.g!=2&&(z=Ht.h,e.ba.width=z.width,e.ba.height=z.height),ve=new we(A,e.ba,null),Pe={networkingEngine:e.G,filter:function(Ut){var vt,jt;return Oe(function(ln){if(ln.g==1)return N(ln,je(ve,Ut),2);if(ln.g!=4)return vt=ln.h,vt?(jt=Jr("trackschanged"),N(ln,Promise.resolve(),4)):ln.u(0);E.dispatchEvent(jt),$(ln)})},makeTextStreamsForClosedCaptions:function(Ut){return oU(e,Ut)},onTimelineRegionAdded:function(Ut){var vt=E.C;e:{for(var jt=m(vt.g),ln=jt.next();!ln.done;ln=jt.next())if(ln=ln.value,ln.schemeIdUri==Ut.schemeIdUri&&ln.id==Ut.id&&ln.startTime==Ut.startTime&&ln.endTime==Ut.endTime){jt=ln;break e}jt=null}jt==null&&(vt.g.add(Ut),Ut=new Wn("regionadd",new Map([["region",Ut]])),vt.dispatchEvent(Ut))},onEvent:function(Ut){return E.dispatchEvent(Ut)},onError:function(Ut){return E.onError(Ut)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){ne("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Ut){var vt=E.l,jt=vt?vt.g:null;jt&&vt.s&&ae(ve,jt.keySystem,Ut)},onManifestUpdated:function(){var Ut=new Map().set("isLive",e.R());E.dispatchEvent(Jr("manifestupdated",Ut)),Nm(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},xe=new fE(function(){return e.Ib()}),xe.addEventListener("regionadd",function(Ut){var vt=Ut.region;$h(e,"timelineregionadded",vt,E),Nm(E,!1,function(){e.A&&e.A.onDashTimedMetadata(vt)})}),Ge=null,A.streaming.observeQualityChanges&&(Ge=new Sm(function(){return e.ob()}),Ge.addEventListener("qualitychange",function(Ut){var vt=Ut.quality;Ut=Ut.position,vt=new Map().set("mediaQuality",{bandwidth:vt.bandwidth,audioSamplingRate:vt.audioSamplingRate,codecs:vt.codecs,contentType:vt.contentType,frameRate:vt.frameRate,height:vt.height,mimeType:vt.mimeType,channelsCount:vt.channelsCount,pixelAspectRatio:vt.pixelAspectRatio,width:vt.width}).set("position",Ut),e.dispatchEvent(Jr("mediaqualitychanged",vt))})),Te=!0,We={zb:e.G,onError:function(Ut){return E.onError(Ut)},ee:function(Ut){Nm(E,!0,function(){e:{var vt=Jr("keystatuschanged");e.dispatchEvent(vt);var jt=Object.keys(Ut);vt=jt.length==1&&jt[0]=="00";var ln=!1;if(jt.length){jt=m(e.i.variants);for(var pn=jt.next();!pn.done;pn=jt.next()){pn=pn.value;var Ln=[];pn.audio&&Ln.push(pn.audio),pn.video&&Ln.push(pn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=pn.allowedByKeySystem,qn.keyIds.size){pn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Ut[vt?"00":Yn])||e.B.F)&&(pn.allowedByKeySystem=pn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=pn.allowedByKeySystem&&(ln=!0)}}}if(ln&&(Qa(e),!$f(e)))break e;(vt=e.j.j)&&!vt.allowedByKeySystem&&Qf(e)}})},onExpirationUpdated:function(Ut,vt){var jt=Jr("expirationupdated");E.dispatchEvent(jt),(jt=E.j)&&jt.onExpirationUpdated&&jt.onExpirationUpdated(Ut,vt)},onEvent:function(Ut){E.dispatchEvent(Ut),Ut.type=="drmsessionupdate"&&Te&&(Te=!1,Ut=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Ut,e.K&&Zi(e.K))}},Ue=hb(e,k),gt=function(){return e.rc(We)},bt={config:A,Uh:Pe,di:xe,ci:Ge,rc:gt,Th:ve,networkingEngine:Ue,Vg:c,Ug:h},E=new $u(t,r,u,n,bt),Ht.return(E))})}function lb(e,t){var n,r;return Oe(function(u){return u.g==1?(n=e.h.manifest.retryParameters,N(u,SE(t,e.G,n),2)):(r=u.h,r=="application/x-mpegurl"&&hs()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function K4(e,t){if(!Ao())return!0;if(t){if((e.g||lc()).canPlayType(t)=="")return!1;if(!(Ao()&&t in ke))return!0;if(Bg(t)){if(e.h.streaming.preferNativeHls)return!0;if(hs()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(hs())return e.h.streaming.useNativeHlsOnSafari}}return!1}function xE(e){var t,n,r,u,c;return Oe(function(f){if(f.g==1)return Yf(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,r=tU(e.g,n,function(h,E,A){cb(e,h,E,A)},e.K),r.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,r.ba=c,N(f,r.L,2);e.F=r,$(f)})}function z4(e,t,n,r){var u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut;return Oe(function(vt){switch(vt.g){case 1:for(Yf(e,"load"),u=e.g,e.H=new jh({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(jt){u.playbackRate=jt},og:function(jt){u.currentTime+=jt}}),c=function(){return Fm(e)},f=function(){return _b(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",f),H4(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,kE(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(jt,ln,pn){e.j&&jt!=e.j.j&&Bm(e,jt,!0,ln===void 0?!1:ln,pn===void 0?0:pn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=rU(e),e.j.configure(e.h.streaming),e.l=Oo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(jt){if(jt.track)switch(jt=jt.track,jt.kind){case"chapters":db(e,jt)}}),e.dispatchEvent(Jr("streaming")),h=n,(E=e.j.j)||h||(h=Sb(e,!0)),A=[],k=E||h,G=m([k.video,k.audio]),ne=G.next();!ne.done;ne=G.next())(z=ne.value)&&!z.segmentIndex&&A.push(z.createSegmentIndex());if(!(0<A.length)){vt.u(2);break}return N(vt,Promise.all(A),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),kE(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ve=function(jt){e.C=J4(e,jt),e.bb=eU(e,t),pb(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ve(e.ea),E){vt.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){vt.u(5);break}return Pe=e.i.presentationTimeline,xe=e.ea||e.g.currentTime,Ge=Pe.$b(),Te=Pe.pb(),xe<Ge?xe=Ge:xe>Te&&(xe=Te),N(vt,aU(h,xe),6);case 6:We=vt.h,ve(We);case 5:Bm(e,h,!0,!1,0);case 4:return e.C.ve(),Ue=e.wc().find(function(jt){return jt.active}),Ue||((gt=gc(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&sE(e.s.h,gt,!0),h&&(gt?(h.audio&&uU(e,h.audio,gt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),Ib(e)):e.da=!1),gt&&(e.h.streaming.alwaysStreamText||e.Ze())&&wm(e.j,gt)),N(vt,e.j.start(r),7);case 7:e.h.abr.enabled&&(e.o.enable(),Cb(e)),Qa(e),$f(e),e.i.variants.some(function(jt){return jt.primary}),(bt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Ht=function(){return Tb(e)},e.m.D(u,"timeupdate",Ht)):bt||(Ut=function(){return Um(e)},e.m.D(u,"timeupdate",Ut),Um(e)),e.A&&e.A.onManifestUpdated(bt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),$(vt)}})}function Y4(e,t){var n,r,u,c;return Oe(function(f){return f.g==1?(n=vi,r=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){Jf(e,h)},ee:function(){},onExpirationUpdated:function(){var h=Jr("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?wa(t):"",codecs:t?Do(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(Si(c.video.mimeType,c.video.codecs)),e.B.ba=!0,N(f,hm(e.B,[c],[]),2)):N(f,e.B.Vc(e.g),0)})}function W4(e,t,n){var r,u,c,f,h,E,A,k,G,ne;return Oe(function(z){if(z.g==1)return Yf(e,"src-equals"),r=e.g,e.C=new CC(r),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new jh({Md:function(){return r.playbackRate},Xb:function(){return r.defaultPlaybackRate},Df:function(ve){r.playbackRate=ve},og:function(ve){r.currentTime+=ve}}),c=e.h.streaming.rebufferingGoal,pb(e,r,c),f=function(){return Fm(e)},h=function(){return _b(e)},e.m.D(r,"playing",f),e.m.D(r,"pause",f),e.m.D(r,"ended",f),e.m.D(r,"ratechange",h),r.preload!="none"&&e.m.na(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return Qa(e)}),e.m.D(r.audioTracks,"removetrack",function(){return Qa(e)}),e.m.D(r.audioTracks,"change",function(){return Qa(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(ve){if(ve.track)switch(ve=ve.track,ve.kind){case"metadata":Q4(e,ve);break;case"chapters":db(e,ve);break;default:Qa(e)}}),e.m.D(r.textTracks,"removetrack",function(){return Qa(e)}),e.m.D(r.textTracks,"change",function(){return Qa(e)})),r.src=F4(e.T,e.qa,n),(ja()||ra())&&r.load(),r.preload!="none"&&!r.autoplay&&Bg(n)&&gs()&&r.load(),e.l=ha,e.dispatchEvent(Jr("streaming")),E=new Rr,Zf(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),Zf(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ve;return Oe(function(Pe){if(Pe.g==1)return X4(e),ve=Xh(e),ve.find(function(xe){return xe.mode!="disabled"})?(0<ve.length&&(e.da=!0),Pe.u(2)):N(Pe,new Promise(function(xe){e.m.na(r.textTracks,"change",xe),new pr(xe).X(1)}),2);if(u)return Pe.return();$4(e),$(Pe)})}),r.error?E.reject(LE(e)):r.preload=="none"&&(He('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(r,"error",function(){E.reject(LE(e))}),N(z,E,2);(A=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return Tb(e)},e.m.D(r,"timeupdate",k)):A||(G=function(){return Um(e)},e.m.D(r,"timeupdate",G),Um(e)),e.A&&(e.A.onManifestUpdated(A),A&&(ne=e.Ib().end,e.m.D(r,"progress",function(){var ve=e.Ib().end;ne!=ve&&(e.A.onManifestUpdated(e.R()),ne=ve)}))),e.Ia=!0,$(z)})}function X4(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function $4(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function Q4(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,fb(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var r=iU(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function cb(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,f=r;f&&c>f&&(f=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())fb(e,c,f,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function fb(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(Jr("metadata",t))}function db(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new Ic(e)};function hb(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?Nm(t(),!0,u):u()}return t||(t=function(){return null}),new Vr(function(u,c,f,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,f,h)},function(u,c,f){c=new Map().set("headers",u).set("request",c).set("requestType",f),n(Jr("downloadheadersreceived",c)),r(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var A=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");A.set(G[0],tb(G[1]))}}catch(xe){}if(A=u["cmsd-dynamic"]){try{var ne=new Map,z=A.split(";");for(A=1;A<z.length;A++){var ve=z[A].split("=");ne.set(ve[0],tb(ve[1]))}var Pe=ne}catch(xe){Pe=null}Pe&&(h.g=Pe)}}}})},function(u,c,f,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",f).set("aborted",h),n(Jr("downloadfailed",u))},function(u,c,f){r(function(){var h=e.T,E=f;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")zf(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var A="d";break e;case 3:case 2:A="h";break e;case 5:A="s";break e}A=void 0}h.m=A}zf(h,c,{ot:eb,su:!h.i})}}catch(Mn){_t("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case Ka:try{if(h.g.enabled){var k=E.segment;A=0,k&&(A=k.endTime-k.startTime);var G={d:1e3*A,st:h.h.R()?"l":"v"};G.ot=B4(E);var ne=G.ot===Pm||G.ot===Dm||G.ot===Om||G.ot===Lm,z=E.stream;if(z){var ve=h.h.eb();if(ne&&(G.bl=j4(h,z.type),G.ot!==Lm)){var Pe=JC(h,z.type);G.dl=ve?Pe/Math.abs(ve):Pe}if(z.bandwidth&&(G.br=z.bandwidth/1e3),z.segmentIndex&&k){var xe=z.segmentIndex.xb(k.endTime,!0,0>ve);if(xe){var Ge=xe.next().value;if(Ge&&Ge!=k){if(!Zn(k.$(),Ge.$())){var Te=Ge.$()[0],We=c.uris[0],Ue=new URL(Te),gt=new URL(We);if(Ue.origin!==gt.origin)var bt=Te;else{for(var Ht=Ue.pathname.split("/").slice(1),Ut=gt.pathname.split("/").slice(1,-1);Ht[0]===Ut[0];)Ht.shift(),Ut.shift();for(;Ut.length;)Ut.shift(),Ht.unshift("..");bt=Ht.join("/")}G.nor=bt}if((Ge.Aa||Ge.ja)&&(k.Aa!=Ge.Aa||k.ja!=Ge.ja)){var vt=Ge.Aa+"-";Ge.ja&&(vt+=Ge.ja),G.nrr=vt}}}var jt=h.h.eb()||1,ln=JC(h,z.type)||500,pn=z.bandwidth,Ln=pn?pn*(k.endTime-k.startTime)/1e3/(ln/jt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}ne&&G.ot!==Lm&&(G.tb=Z4(h,G.ot)/1e3),zf(h,c,G)}}catch(Mn){_t("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:zf(h,c,{ot:"k"});break;case 4:zf(h,c,{ot:"o"})}})},function(u,c,f,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function J4(e,t){return new bC(e.g,e.i,e.h.streaming,t,function(){e.bb&&DC(e.bb,!0),e.j&&e.j.od(),e.L&&Wf(e)},function(n){return e.dispatchEvent(n)})}function eU(e,t){t=new xm(e.mb,e.R()||0<t),t.addEventListener("enter",function(r){$h(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){$h(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||($h(e,"timelineregionenter",u),$h(e,"timelineregionexit",u))});var n=new MC(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function pb(e,t,n){e.L=new wh,e.L.g=Cl,Ah(e.L,n,Math.min(.5,n/2)),PE(e),e.m.D(t,"waiting",function(){return Wf(e)}),e.m.D(t,"stalled",function(){return Wf(e)}),e.m.D(t,"canplaythrough",function(){return Wf(e)}),e.m.D(t,"progress",function(){return Wf(e)})}function Wf(e){switch(e.l){case ha:if(e.g.ended)var t=!0;else{var n=kt(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Oo:e:if(e.g.ended||Nc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var r=kt(e.g.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?yc:Cl,n.g=r,(t=t!=r)&&r===yc&&(n.h=Date.now()),t&&PE(e)}function tU(e,t,n,r){return new gu(e,t,n,r)}function nU(e){return new QC({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function rU(e){return new FC(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return Jf(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var r=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var f=Us(e.F,c);!e.R()&&e.g.paused&&f!=null&&0<f&&e.C.Dd()<f&&e.C.we(f)}Wf(e),r=new Map().set("start",r).set("end",u).set("contentType",c),e.dispatchEvent(Jr("segmentappended",r)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&t4(e.lb,n,t)},Qf:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new cm(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)r=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;Ml(r,"cenc",u),r=r.l}}else r=Promise.resolve();return r},$h:function(t,n,r){cb(e,t,n,r)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Cm(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var r=xc(this.h,e,Xf(this));return gb(this),r};function gb(e){if(e.Pd=new we(e.h,e.ba,e.B),e.I){var t=Va(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=Zs&&le(e.Pd,e.i)&&Qa(e)}catch(c){Jf(e,c)}e.o&&$f(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||Qf(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.F,u=r.F;r.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),r.g&&(r.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(yr))&&Gf(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),Cb(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Ah(e.L,t,Math.min(.5,t/2))),e.i&&kE(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=Xf(this);return xc(e,this.h,Xf(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];xc(this.h,Xf(this),Xf(this)),gb(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Cl:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?He("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Oo&&(this.o.playbackRateChanged(e),UC(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,r=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Wc():Math.floor(n)<=Math.floor(r.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==ha&&this.H.set(e),this.l==Oo&&(this.H.set(e),this.o.playbackRateChanged(e),UC(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,If(u)){var c=Sl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(f){return Al(f)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=wl(r);u.active=r==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?Xh(this).map(function(c){return Wg(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Bu(t)})},g.gh=function(e){var t=this,n,r,u,c;return Oe(function(f){return f.g==1?t.l!=Oo&&t.l!=ha?f.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?f.u(2):N(f,r.createSegmentIndex(),2):f.return(null)):f.g!=4?(u=[],r.segmentIndex.tc(function(h){var E=mb(h.tilesLayout||r.tilesLayout);if(E){E=E.rows*E.Sb;for(var A=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+A*k/E))}}),N(f,Promise.all(u),4)):(c=f.h,f.return(c.filter(function(h){return h})))})};function mb(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){return gt.g==1?n.l!=Oo&&n.l!=ha?gt.return(null):(r=n.$c,n.i&&(r=n.i.imageStreams),(u=r.find(function(bt){return bt.id==e}))?u.segmentIndex?gt.u(2):N(gt,u.createSegmentIndex(),2):gt.return(null)):(c=u.segmentIndex.find(t),c==null||(f=u.segmentIndex.get(c),h=mb(f.tilesLayout||u.tilesLayout),!h)?gt.return(null):(E=u.width||0,A=u.height||0,k=E/h.Sb,G=A/h.rows,ne=h.Sb*h.rows,z=f.i-f.startTime,ve=f.A||z/ne,Pe=f.startTime,Ge=xe=0,1<ne&&(Te=Math.floor((t-f.startTime)/ve),Pe=f.startTime+Te*ve,xe=Te%h.Sb*k,Ge=Math.floor(Te/h.Sb)*G),We=!1,(Ue=f.s)&&(We=!0,G=Ue.height,xe=Ue.positionX,Ge=Ue.positionY,k=Ue.width),gt.return({segment:f,imageHeight:A,imageWidth:E,height:G,positionX:xe,positionY:Ge,startTime:Pe,duration:ve,uris:f.$(),width:k,sprite:We})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(sE(this.s.h,t,!1),wm(this.j,t),jm(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=Xh(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,pc(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";jm(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&He("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(u){return u.id==e.id});r&&If(r)&&(Bm(this,r,!1,t,n),this.sa=new Sh(r,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),$f(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,pc(n)==e.id){wb(this,n);break}}},g.ih=function(){return Rb(this.Hb())},g.Ah=function(){return Rb(this.wc())},g.hh=function(){return Array.from(bb(this.Hb()))},g.zh=function(){return Array.from(bb(this.wc()))},g.wg=function(e,t,n,r){if(n=n===void 0?0:n,r=r===void 0?0:r,this.i&&this.C){this.sa=new Il(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=Sl(n),this.zf(e,!0,r)):Qf(this)}else this.g&&this.g.audioTracks&&(r=gc(this.Hb(),e,t||"",!1)[0])&&this.zf(r)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=gc(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&(sE(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&(wm(this.j,e),jm(this))):(e=gc(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.sa=new Il(r.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),Qf(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&wb(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Oo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?Xh(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?yb(this).map(function(e){return Wg(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=br(e),n=yb(this).filter(function(h){return br(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var f=c.value;(c=f.id)&&c!=""||(c=f.startTime+"-"+f.endTime+"-"+f.text),f={id:c,title:f.text,startTime:f.startTime,endTime:f.endTime},r.has(c)||(e.push(f),r.add(c))}}return e};function Xh(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function iU(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function yb(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Oo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=gc(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&(wm(this.j,e[0]),jm(this))):o4(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=Xh(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}Ib(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Oo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==ha&&(e.total=mt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Oo&&this.l!=ha)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};Fm(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=r,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Oo){if(n=this.j.j,t=this.j.s,n){r=this.H?this.H.h:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==ha&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.I,u=c.K;var f=c.H,h=c.N,E=c.L,A=c.A,k=c.i,G=c.m,ne=c.F,z=c.j,ve=aE(c.g,"playing"),Pe=aE(c.g,"paused"),xe=aE(c.g,"buffering"),Ge=c.s,Te=c.C,We=c.G,Ue=c.Ed,gt=XF(c.g),bt=[];c=m(c.h.g);for(var Ht=c.next();!Ht.done;Ht=c.next())Ht=Ht.value,bt.push({timestamp:Ht.timestamp,id:Ht.id,type:Ht.type,fromAdaptation:Ht.fromAdaptation,bandwidth:Ht.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:f,stallsDetected:h,gapsJumped:E,estimatedBandwidth:A,completionPercent:k,loadLatency:G,manifestTimeSeconds:ne,drmTimeSeconds:z,playTime:ve,pauseTime:Pe,bufferingTime:xe,licenseTime:Ge,liveLatency:Te,maxSegmentDuration:We,bytesDownloaded:Ue,stateHistory:gt,switchHistory:bt}},g.Rg=function(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h=this,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(h.l!=Oo&&h.l!=ha)throw new pt(1,7,7004);if(n!="subtitles"&&n!="captions"&&He("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Ue.u(2);break}return N(Ue,ME(h,e),3);case 3:r=Ue.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=ha){Ue.u(4);break}return f&&(n="forced"),N(Ue,vb(h,e,t,n,r,c||"",E),5);case 5:if(A=br(t),k=h.wc(),G=k.find(function(gt){return br(gt.language)==A&&gt.label==(c||"")&&gt.kind==n}))return Qa(h),Ue.return(G);throw new pt(1,2,2012);case 4:if(ne=vi,z=h.g.duration,h.i&&(z=h.i.presentationTimeline.getDuration()),z==1/0)throw new pt(1,4,4033);if(!E.length){Ue.u(6);break}return N(Ue,DE(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ve=Ue.h,Pe=Eb(h,ve,r,E),xe=new Blob([Pe],{type:"text/vtt"}),e=_m(xe),r="text/vtt";case 6:if(Ge={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:oE(0,z,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:ne.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(r||"",u||"")])},Te=Si(Ge.mimeType,Ge.codecs),We=El(Te),!We)throw new pt(2,2,2014,r);return h.i.textStreams.push(Ge),Qa(h),Ue.return(wl(Ge))}})},g.Sg=function(e,t){var n=this,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:if(n.l!=Oo&&n.l!=ha)throw new pt(1,7,7004);if(t){We.u(2);break}return N(We,ME(n,e),3);case 3:t=We.h;case 2:if(t!="text/vtt")throw new pt(1,2,2017,e);if(r=vi,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new pt(1,4,4045);return N(We,DE(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=We.h,f=ji[t],!f)throw new pt(2,2,2014,t);for(h=f(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=Qn(c),k=h.parseMedia(A,E,e),G=[],ne={},z=m(k),ve=z.next();!ve.done;ne={Rc:ne.Rc,Nb:ne.Nb},ve=z.next())ne.Nb=ve.value,ne.Rc=null,Pe=function(Ue){return function(){return Ue.Rc==null&&(Ue.Rc=co([e],[Ue.Nb.payload])),Ue.Rc||[]}}(ne),xe=new Je(ne.Nb.startTime,ne.Nb.endTime,Pe,0,null,null,0,0,1/0),ne.Nb.payload.includes("#xywh")&&(Ge=ne.Nb.payload.split("#xywh=")[1].split(","),Ge.length===4&&xe.Eg({height:parseInt(Ge[3],10),positionX:parseInt(Ge[0],10),positionY:parseInt(Ge[1],10),width:parseInt(Ge[2],10)})),G.push(xe);return Te={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(t||"","")])},n.l==ha?n.$c.push(Te):n.i.imageStreams.push(Te),Qa(n),We.return(Bu(Te))}})},g.Qg=function(e,t,n){var r=this,u,c,f,h;return Oe(function(E){switch(E.g){case 1:if(r.l!=Oo&&r.l!=ha)throw new pt(1,7,7004);if(n){E.u(2);break}return N(E,ME(r,e),3);case 3:n=E.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),N(E,vb(r,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,f=r.bg(),h=f.find(function(A){return A.language==t}),!h){E.u(5);break}return N(E,new Promise(function(A,k){r.m.na(c,"load",A),r.m.na(c,"error",function(){k(new pt(1,2,2015))})}),6);case 6:return Qa(r),E.return(h);case 5:throw new pt(1,2,2012)}})};function ME(e,t){var n;return Oe(function(r){switch(r.g){case 1:return ce(r,2),N(r,SE(t,e.G,e.h.streaming.retryParameters),4);case 4:n=r.h,ye(r,3);break;case 2:be(r);case 3:if(n)return r.return(n);throw new pt(1,2,2011,t)}})}function vb(e,t,n,r,u,c,f){var h,E,A,k;return Oe(function(G){if(G.g==1)return u!="text/vtt"||f.length?N(G,DE(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=Eb(e,h,u,f),A=new Blob([E],{type:"text/vtt"}),t=_m(A),u="text/vtt"),k=document.createElement("track");var ne=e.T,z=t;try{if(ne.g.enabled){var ve=IE(ne);ve.ot=bE,ve.su=!0;var Pe=Mm(ve),xe=CE(z,Pe)}else xe=z}catch(Ge){_t("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ge),xe=z}return k.src=xe,k.label=c,k.kind=r,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function DE(e,t,n,r){var u,c,f;return Oe(function(h){if(h.g==1){u=Ka,c=Oi([t],r),c.method="GET";var E=e.T;try{E.g.enabled&&zf(E,c,{ot:bE,su:!0})}catch(A){_t("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return N(h,n.request(u,c).promise,2)}return f=h.h,h.return(f.data)})}function Eb(e,t,n,r){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),k4(t,r);throw new pt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Oo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.gd||r.Qa||r.ub||(r.gd=!1,ys(t,r,e));t=!0}}else t=!1;return t},g.Te=function(){return He("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function Xf(e){var t=Hf();return t.streaming.failureCallback=function(n){if(e.R()){var r=null;n.code==1001||n.code==1002?r=1:n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.vf(r))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new da(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new ca(e.g,"Shaka Player TextTrack"):new fa},t}g.Hg=function(e){this.Rd=e};function oU(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),f=c.next();!f.done;f=c.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",E=new Ei,A=u.closedCaptions.get(f);h={id:e.nf++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:yr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(h,"")])},t.textStreams.push(h),n.add(f)}}}function aU(e,t){var n,r,u,c,f;return Oe(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(E,A){var k,G,ne;return Oe(function(z){return z.g==1?E?N(z,E.createSegmentIndex(),2):z.return(null):(G=(k=E.segmentIndex.xb(A))?k.next().value:null,G?(ne=G.startTime,z.return(ne)):z.return(null))})},N(h,u(n,t),2)):h.g!=3?(c=h.h,N(h,u(r,t),3)):(f=h.h,f!=null&&c!=null?h.return(Math.max(f,c)):f!=null?h.return(f):c!=null?h.return(c):h.return(t))})}function PE(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}Fm(e)}t=new Map().set("buffering",t),e.dispatchEvent(Jr("buffering",t))}function _b(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=Jr("ratechange"),e.dispatchEvent(t))}function Fm(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Cl?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Jr("statechanged",n)))}}function Tb(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var r=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.sd(r):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,f=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,f=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,r=0,e.l==ha){var A=e.g.buffered;0<A.length&&(r=A.end(A.length-1),r=Math.max(f,r-u.end))}u=e.h.streaming.liveSyncPanicMode,A=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=A?t!=E&&e.sd(E):c&&f&&n-r>c?t!=f&&e.sd(f):h&&E&&n-r<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function Um(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var r;e.N==0?r=Jr("started"):e.N==25?r=Jr("firstquartile"):e.N==50?r=Jr("midpoint"):e.N==75?r=Jr("thirdquartile"):e.N==100&&(r=Jr("complete")),r&&e.dispatchEvent(r)}}}function $f(e){try{ue(e.Pd,e.i)}catch(n){return Jf(e,n),!1}var t=Cf(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function Sb(e,t){return t=t===void 0?!1:t,$f(e)?e.o.chooseVariant(t):null}function sU(e){function t(f){var h="";return f.video&&(h+="video:"+f.video.id),f.audio&&(h=h+(h?"&":"")+("audio:"+f.audio.id)),h}for(var n=Date.now()/1e3,r=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,r=!0,""+t(c),void 0);e.i.variants.every(function(f){return f.disabledUntilTime===0})&&e.Td.stop(),r&&Qf(e,!0,void 0,!1,!1)}function Qf(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c=Sb(e);c&&Bm(e,c,u,t,n,r)}function Bm(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e.j.j;if(t==f)r&&BC(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),BC(e.j,t,r,u,c,n),r=null,f&&(r=Sl(f)),t=Sl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&ks(e.K,t,e.Ue()),n=Jr("adaptation",n),ed(e,n)):Ab(e,r,t)}}function wb(e,t){var n=Array.from(e.g.audioTracks).find(function(r){return r.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Al(n),t=Al(t),Ab(e,n,t)}function uU(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var r=br(e.h.preferredTextLanguage);return n=br(n.language),e.h.autoShowText==2?Ou(n,r):e.h.autoShowText==3?(e=br(t.language),Ou(n,r)&&!Ou(e,n)):(He("Invalid autoShowText setting!"),!1)}function Qa(e){var t=Jr("trackschanged");ed(e,t)}function Ab(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&ks(e.K,n,e.Ue()),n=Jr("variantchanged",t),ed(e,n)}function jm(e){var t=Jr("textchanged");ed(e,t)}function Ib(e){var t=Jr("texttrackvisibility");ed(e,t)}function Cb(e){e.h.abr.enabled||OE(e);var t=new Map().set("newStatus",e.h.abr.enabled);ed(e,Jr("abrstatuschanged",t))}function OE(e,t){if(t=t===void 0?!0:t,e.l==Oo){e.Td.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&$f(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===Zs||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var u=r[e.type];u&&u.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,f){return c+f.end-f.start},0),Qf(this,!0,t,!0,!1),!0}return!1};function Jf(e,t){var n,r,u;return Oe(function(c){switch(c.g){case 1:if(e.l==Zs)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return ce(c,3),N(c,v4(e.j),5);case 5:r=c.h,n=!r,ye(c,2);break;case 3:be(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&OE(e,!1),u=Jr("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),$(c)}})}function $h(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Jr(t,e))}function LE(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pt(2,3,3016,t,n,e.g.error.message)}function kE(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function ed(e,t){Oe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);e.l!=Zs&&e.dispatchEvent(t),$(n)})}function bb(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(br(n.language)):t.add("und");return t}function Rb(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=br(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var f=c.next();!f.done;f=c.next())f=f.value,t.get(u).add(f),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(f,r.label))}var h=[];return t.forEach(function(E,A){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(A)&&n.get(A).has(k)&&(G=n.get(A).get(k)),h.push({language:A,role:k,label:G})}}),h}te("shaka.Player",dn),dn.prototype.setVideoContainer=dn.prototype.Hg,dn.prototype.getManifestParserFactory=dn.prototype.rh,dn.prototype.getManifest=dn.prototype.Te,dn.prototype.retryStreaming=dn.prototype.vf,dn.prototype.setMaxHardwareResolution=dn.prototype.xi,dn.prototype.addChaptersTrack=dn.prototype.Qg,dn.prototype.addThumbnailsTrack=dn.prototype.Sg,dn.prototype.addTextTrackAsync=dn.prototype.Rg,dn.prototype.getStats=dn.prototype.getStats,dn.prototype.getBufferedInfo=dn.prototype.ob,dn.prototype.getSegmentAvailabilityDuration=dn.prototype.Nd,dn.prototype.getPresentationStartTimeAsDate=dn.prototype.eg,dn.prototype.getPlayheadTimeAsDate=dn.prototype.vh,dn.prototype.setTextTrackVisibility=dn.prototype.Dg,dn.prototype.getChapters=dn.prototype.jh,dn.prototype.getChaptersTracks=dn.prototype.bg,dn.prototype.isTextTrackVisible=dn.prototype.Ze,dn.prototype.selectVariantsByLabel=dn.prototype.si,dn.prototype.selectTextLanguage=dn.prototype.yf,dn.prototype.selectAudioLanguage=dn.prototype.wg,dn.prototype.getTextLanguages=dn.prototype.zh,dn.prototype.getAudioLanguages=dn.prototype.hh,dn.prototype.getTextLanguagesAndRoles=dn.prototype.Ah,dn.prototype.getAudioLanguagesAndRoles=dn.prototype.ih,dn.prototype.selectVariantTrack=dn.prototype.zf,dn.prototype.selectTextTrack=dn.prototype.xg,dn.prototype.getThumbnails=dn.prototype.fg,dn.prototype.getAllThumbnails=dn.prototype.gh,dn.prototype.getImageTracks=dn.prototype.oh,dn.prototype.getTextTracks=dn.prototype.wc,dn.prototype.getVariantTracks=dn.prototype.Hb,dn.prototype.cancelTrickPlay=dn.prototype.Wc,dn.prototype.trickPlay=dn.prototype.sd,dn.prototype.getPlaybackRate=dn.prototype.eb,dn.prototype.isBuffering=dn.prototype.Xe,dn.prototype.getKeyStatuses=dn.prototype.Kd,dn.prototype.getActiveSessionsMetadata=dn.prototype.Se,dn.prototype.getExpiration=dn.prototype.cd,dn.prototype.drmInfo=dn.prototype.drmInfo,dn.prototype.keySystem=dn.prototype.keySystem,dn.prototype.goToLive=dn.prototype.Hh,dn.prototype.seekRange=dn.prototype.Ib,dn.prototype.isAudioOnly=dn.prototype.Kh,dn.prototype.isInProgress=dn.prototype.dc,dn.prototype.isLive=dn.prototype.R,dn.prototype.getAdManager=dn.prototype.$f,dn.prototype.getAssetUri=dn.prototype.ad,dn.prototype.getNetworkingEngine=dn.prototype.Zb,dn.prototype.getMediaElement=dn.prototype.th,dn.prototype.getManifestType=dn.prototype.Ue,dn.prototype.getLoadMode=dn.prototype.qh,dn.prototype.resetConfiguration=dn.prototype.li,dn.prototype.getBufferFullness=dn.prototype.ag,dn.prototype.getConfiguration=dn.prototype.getConfiguration,dn.prototype.configure=dn.prototype.configure,dn.prototype.releaseAllMutexes=dn.prototype.hi,dn.prototype.preload=dn.prototype.preload,dn.prototype.unloadAndSavePreload=dn.prototype.Ai,dn.prototype.load=dn.prototype.load,dn.prototype.updateStartTime=dn.prototype.Ei,dn.prototype.unload=dn.prototype.lc,dn.prototype.detach=dn.prototype.detach,dn.prototype.attachCanvas=dn.prototype.Wg,dn.prototype.attach=dn.prototype.Vc,dn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,f;return Oe(function(h){if(h.g==1)return t={},e?N(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(Ao())for(var A in ke)E[A]=!0;A=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=A.next();!k.done;k=A.next())k=k.value,E[k]=Ao()?!!ke[k]:iu(k);for(n=E,A='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(uu)),E={},A=m(A),k=A.next();!k.done;k=A.next()){k=k.value,E[k]=Ao()?El(k)?!0:Ot(k)||!!ro(k):iu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}r=E,u={manifest:n,media:r,drm:t},c=UE;for(f in c)u[f]=c[f]();return h.return(u)})},dn.isBrowserSupported=function(){if(p.Promise||He("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Yr("Trident/"))return!1;var e=gs();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:Ao()?!0:iu("application/x-mpegurl")},dn.setAdManagerFactory=function(e){Zm=e},dn.registerSupportPlugin=function(e,t){UE[e]=t},dn.prototype.destroy=dn.prototype.destroy;var Zs=0,FE=1,Oo=2,ha=3;dn.LoadMode={DESTROYED:Zs,NOT_LOADED:FE,MEDIA_SOURCE:Oo,SRC_EQUALS:ha},dn.version="v4.8.2";var Nb=["4","8"];Or=new function(e){this.g=e,this.i=ei,this.h=Ji}(new Pr(Number(Nb[0]),Number(Nb[1])));var UE={},Zm=null;function xb(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Et,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},te("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function Gm(e,t,n,r,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new Et,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){lU(c,f)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){Mb(c,f)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}Gm.prototype.configure=function(e){this.s=e},Gm.prototype.stop=function(){this.g&&this.g.stop(),this.o&&Wh(this.o)},Gm.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function Mb(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),Hm(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function lU(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}cU(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,qm(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,qm(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,qm(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,qm(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){Hm(e,null)}}function qm(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function cU(e){function t(n,r){n=new Map().set("originalEvent",n),e.m(new Wn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Mb(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Db(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Db(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Hm(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Hm(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Db(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):He("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Hm(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,r,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=r}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},te("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function Qh(e,t,n,r){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new Et}Qh.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);td(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},Qh.prototype.release=function(){this.stop(),this.o&&this.o.release()},Qh.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(dU(this,this.G,this.T),this.T=!1)},Qh.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function fU(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z;Oe(function(ve){if(ve.g==1)return r=Oi([t],aa()),r.method="POST",n&&(u=JSON.stringify(n),r.body=qa(u)),c=e.K.request(7,r),ce(ve,2),N(ve,c.promise,4);if(ve.g!=2){if(f=ve.h,h=Kr(f.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)A=new si(t),k=new si(E.trackingUrl),e.G=A.resolve(k).toString(),G=Date.now()/1e3,ne=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",ne))),z=new si(E.manifestUrl),e.l.resolve(A.resolve(z).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return ye(ve,0)}if(be(ve),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ve.return();e.l.resolve(e.H),e.l=null,$(ve)})}function dU(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge;Oe(function(Te){if(Te.g==1)return r=Oi([t],aa()),u=e.K.request(7,r),ce(Te,2),N(Te,u.promise,4);if(Te.g!=2){if(c=Te.h,f=[],h=Kr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,A=m(e.j),k=A.next();!k.done;k=A.next())for(G=k.value,ne=m(G.nonLinearAdsList),z=ne.next();!z.done;z=ne.next())for(ve=z.value,Pe=m(ve.nonLinearAdList),xe=Pe.next();!xe.done;xe=Pe.next())Ge=xe.value,hU(e,Ge);f=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f))),td(e),e.j=[];return n&&(e.I||0<f.length)&&pU(e),ye(Te,0)}be(Te),$(Te)})}function hU(e,t){var n,r,u,c,f,h,E;Oe(function(A){if(A.g==1)return!t.staticResource||(n=Pb(t),e.F.get(n))?A.return():(r=Oi([t.staticResource],aa()),u=e.K.request(7,r),ce(A,2),e.F.set(n,[]),N(A,u.promise,4));if(A.g!=2)return c=A.h,f=Kr(c.data),h=JSON.parse(f),E=h.apps,e.F.set(n,E),ye(A,0);be(A),e.F.delete(n),$(A)})}function Pb(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function pU(e){Lb(e),e.I||(Ob(e),e.o.D(e.g,"seeked",function(){Ob(e)}),e.o.D(e.g,"ended",function(){td(e)})),e.o.D(e.g,"timeupdate",function(){Lb(e)})}function Ob(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var f=m(c.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function Lb(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),pa(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),pa(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),pa(e,"thirdQuartile")),r=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=r||r>u)&&td(e)}if(!e.h||!e.h.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var f=u.ads[c],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}td(e),e.L=u,e.h=new or(f,c+1,u.ads.length,!0,e.g),e.C=f,c===0&&pa(e,"breakStart"),kb(e);break}}if(!e.h){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.h);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(f=u.nonLinearAdsList[c],f.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(Pb(f.nonLinearAdList[0]));if(h<=t&&E&&E.length){td(e),h=e,E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.data.source.length){var k=document.createElement("img");k.src=A.data.source[0].url,k.style.top=(A.placeholder.top||0)+"%",k.style.height=100-(A.placeholder.top||0)+"%",k.style.left=(A.placeholder.left||0)+"%",k.style.maxWidth=100-(A.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(f,c+1,u.ads.length,!1,e.g),e.C=f,c===0&&pa(e,"breakStart"),kb(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function td(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),pa(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&pa(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function kb(e){var t=!1;e.g.paused?t=!0:(pa(e,"impression"),pa(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&pa(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||pa(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(pa(e,"impression"),pa(e,"start"),t=!1):pa(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){pa(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function pa(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Oi([r],aa()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},te("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function Fb(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Et,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){gU(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var f=c.getStreamData();c=[],f=m(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=Fb.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function gU(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function Xn(){Sr.call(this),this.g=this.h=this.i=null,this.j=new xb,this.m=navigator.language,this.l=null}Y(Xn,Sr),g=Xn.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var r=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new pt(2,10,1e4);this.i&&this.i.release(),this.i=new Gm(e,t,this.m,n,function(u){return BE(r,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new xb},g.requestClientSideAds=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new Qh(e,t,n,function(u){return BE(r,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new pt(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new pt(1,10,10004)):(r.l=new Rr,fU(r,e,t),r.H=n||"",r.Y=Date.now()/1e3,e=r.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new pt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new pt(2,10,10002);this.g&&this.g.release(),this.g=new Fb(e,t,this.m,function(r){return BE(n,r)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new pt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new pt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new pt(1,10,10003);(e.mpt||e.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function BE(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}te("shaka.ads.AdManager",Xn),Xn.prototype.onCueMetadataChange=Xn.prototype.onCueMetadataChange,Xn.prototype.onHlsTimedMetadata=Xn.prototype.onHlsTimedMetadata,Xn.prototype.onDashTimedMetadata=Xn.prototype.onDashTimedMetadata,Xn.prototype.onManifestUpdated=Xn.prototype.onManifestUpdated,Xn.prototype.getStats=Xn.prototype.getStats,Xn.prototype.getCuePoints=Xn.prototype.getCuePoints,Xn.prototype.getServerSideCuePoints=Xn.prototype.getServerSideCuePoints,Xn.prototype.replaceServerSideAdTagParameters=Xn.prototype.replaceServerSideAdTagParameters,Xn.prototype.requestServerSideStream=Xn.prototype.requestServerSideStream,Xn.prototype.initServerSide=Xn.prototype.initServerSide,Xn.prototype.addMediaTailorTrackingUrl=Xn.prototype.addMediaTailorTrackingUrl,Xn.prototype.requestMediaTailorStream=Xn.prototype.requestMediaTailorStream,Xn.prototype.initMediaTailor=Xn.prototype.initMediaTailor,Xn.prototype.updateClientSideAdsRenderingSettings=Xn.prototype.updateClientSideAdsRenderingSettings,Xn.prototype.requestClientSideAds=Xn.prototype.requestClientSideAds,Xn.prototype.onAssetUnload=Xn.prototype.onAssetUnload,Xn.prototype.release=Xn.prototype.release,Xn.prototype.initClientSide=Xn.prototype.initClientSide,Xn.prototype.configure=Xn.prototype.configure,Xn.prototype.setLocale=Xn.prototype.setLocale,Xn.ADS_LOADED="ads-loaded",Xn.AD_STARTED="ad-started",Xn.AD_FIRST_QUARTILE="ad-first-quartile",Xn.AD_MIDPOINT="ad-midpoint",Xn.AD_THIRD_QUARTILE="ad-third-quartile",Xn.AD_COMPLETE="ad-complete",Xn.AD_STOPPED="ad-stopped",Xn.AD_SKIPPED="ad-skipped",Xn.AD_VOLUME_CHANGED="ad-volume-changed",Xn.AD_MUTED="ad-muted",Xn.AD_PAUSED="ad-paused",Xn.AD_RESUMED="ad-resumed",Xn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Xn.CUEPOINTS_CHANGED="ad-cue-points-changed",Xn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Xn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Xn.AD_CLICKED="ad-clicked",Xn.AD_PROGRESS="ad-progress",Xn.AD_BUFFERING="ad-buffering",Xn.AD_IMPRESSION="ad-impression",Xn.AD_DURATION_CHANGED="ad-duration-changed",Xn.AD_CLOSED="ad-closed",Xn.AD_LOADED="ad-loaded",Xn.ALL_ADS_COMPLETED="all-ads-completed",Xn.AD_LINEAR_CHANGED="ad-linear-changed",Xn.AD_METADATA="ad-metadata",Xn.AD_RECOVERABLE_ERROR="ad-recoverable-error",Xn.AD_ERROR="ad-error",Xn.AD_BREAK_READY="ad-break-ready",Xn.AD_INTERACTION="ad-interaction",Zm=function(){return new Xn};function Ub(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(t=m(Object.getOwnPropertyNames(n)),r=t.next();!r.done;r=t.next())u.add(r.value);for(t={},u=m(u),r=u.next();!r.done;r=u.next())r=r.value,t[r]=n[r];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(mt(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function jE(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=mU(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function mU(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Bb="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),yU="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ZE=["loop","playbackRate"],vU=["pause","play"],Vm={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},Km={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},GE={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},jb=[["getConfiguration","configure"]],Zb=[["isTextTrackVisible","setTextTrackVisibility"]],EU="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),_U=["attach","attachCanvas","detach","load","unload"];function qE(e,t,n,r,u,c,f){var h=this;this.G=e,this.K=f,this.l=new pr(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return HE(h)},this.C=function(E,A){switch(E=jE(A),E.type){case"event":var k=E.targetName,G=im(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var ne in k[G])E[ne]=k[G][ne]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,ne=E.error,E=h.i[G],delete h.i[G],E)if(ne){G=new pt(ne.severity,ne.category,ne.code);for(k in ne)G[k]=ne[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,ep.add(this)}g=qE.prototype,g.destroy=function(){return ep.delete(this),VE(this),vs&&qb(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(ep),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Rr,r.s=!0,zm(r,u)}},function(t){for(var n=m(ep),r=n.next();!r.done;r=n.next())r=r.value,Ym=t=="available",r.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Ym&&this.l.X(SU),(e=vs)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,zm(this,e)):vs=null}else p.__onGCastApiAvailable!==Hb&&(Wm=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=Hb)},g.Af=function(e){this.o=e,this.h&&Jh(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return Oe(function(t){if(!e.m)throw new pt(1,8,8e3);if(!Ym)throw new pt(1,8,8001);if(e.h)throw new pt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return zm(e,n)},function(n){return Gb(e,n)}),N(t,e.j,0)})};function TU(e){e.h&&chrome.cast.requestSession(function(t){return zm(e,t)},function(t){return Gb(e,t)})}g.uc=function(){if(this.h){if(VE(this),vs){qb(this);try{vs.stop(function(){},function(){})}catch(e){}vs=null}HE(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(vU.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))}}else if(e=="player"){if(GE[t]&&!this.get("player","isLive")())return function(){};if(EU.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(_U.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(Vm[t]||Km[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,Jh(this,{type:"set",targetName:e,property:t,value:n})};function zm(e,t){var n=e.N();vs=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),HE(e),Jh(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Gb(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new pt(2,8,n,t))}g.ug=function(e,t){Jh(this,{type:"call",targetName:e,methodName:t,args:Qe.apply(2,arguments)})},g.ii=function(e,t){var n=Qe.apply(2,arguments),r=new Rr,u=this.H.toString();this.H++,this.i[u]=r;try{Jh(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function qb(e){var t=vs;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function HE(e){var t=vs?vs.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};VE(e)}e.h=t,e.I=t?vs.receiver.friendlyName:"",e.l.kc()}function VE(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new pt(1,7,7e3))}}function Jh(e,t){t=Ub(t);var n=vs;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},ot)}catch(r){throw t=new pt(2,8,8005,r),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var SU=.02,Ym=!1,vs=null,Wm=null,ep=new Set;function Hb(e){if(Wm?p.__onGCastApiAvailable=Wm:delete p.__onGCastApiAvailable,Wm=null,e)for(var t=m(ep),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function Ri(e,t,n,r){r=r===void 0?!1:r,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new qE(n,function(){return zb(u)},function(){return Yb(u)},function(c,f){return Xb(u,c,f)},function(){return Wb(u)},function(){return Kb(u)},r),wU(this)}Y(Ri,Sr),g=Ri.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&Ym},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return Oe(function(t){return t.g==1?N(t,e.g.cast(),2):e.h?N(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){TU(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return Oe(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.uc(),N(r,n.g.destroy(),2));n.g=null,n.g=new qE(e,function(){return zb(n)},function(){return Yb(n)},function(u,c){return Xb(n,u,c)},function(){return Wb(n)},function(){return Kb(n)},t),n.g.init(),$(r)})};function wU(e){e.g.init(),e.m=new Et;for(var t=m(Bb),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=im(c),e.j.dispatchEvent(c))});for(var r in vc)e.m.D(e.h,vc[r],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return IU(e,c.Kc)}}(t),set:function(c){return function(f){var h=c.Kc;e.g.Ua()?e.g.set("video",h,f):e.i[h]=f}}(t)}),t={Kc:t.Kc};e.s={},Vb(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return CU(e,c)}})}),AU(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function AU(e){var t=new Map;Vb(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function Vb(e,t){function n(E){return E=="constructor"||typeof r[E]!="function"?!1:!u.has(E)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var f=m(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function Kb(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(ZE),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(jb),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(Zb),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function zb(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function Yb(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Wb(e){for(var t=m(jb),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var f;(r=e.g.get("player","getTextTracks")())&&r.length&&(f=r.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(ZE),r=n.next();!r.done;r=n.next())r=r.value,E[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var A=m(ZE),k=A.next();!k.done;k=A.next())k=k.value,e.i[k]=E[k];for(A=m(Zb),k=A.next();!k.done;k=A.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),f&&e.h.yf(f.language,f.roles,f.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new Wn("error",A),e.h.dispatchEvent(A)})}function IU(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function CU(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return He(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return He(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(Vm[t]||Km[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function Xb(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}te("shaka.cast.CastProxy",Ri),Ri.prototype.changeReceiverId=Ri.prototype.Yg,Ri.prototype.forceDisconnect=Ri.prototype.uc,Ri.prototype.suggestDisconnect=Ri.prototype.zi,Ri.prototype.setAppData=Ri.prototype.Af,Ri.prototype.cast=Ri.prototype.cast,Ri.prototype.receiverName=Ri.prototype.tf,Ri.prototype.isCasting=Ri.prototype.Ua,Ri.prototype.canCast=Ri.prototype.Xg,Ri.prototype.getPlayer=Ri.prototype.uh,Ri.prototype.getVideo=Ri.prototype.Fh,Ri.prototype.destroy=Ri.prototype.destroy;function mo(e,t,n,r){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new Et,this.H={video:e,player:t},this.C=n||function(){},this.I=r||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){KE(u)}),bU(this)}Y(mo,Sr),g=mo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return Oe(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),N(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),$(r)})};function bU(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return $b(e)},t.onSenderDisconnected=function(){return $b(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&Qu(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),Qu(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return xU(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return NU(e,u)},t.start(),t=m(Bb);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return Qb(e,"video",u)});for(var r in vc)e.j.D(e.h,vc[r],function(u){return Qb(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,nd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,nd(e)}),e.j.D(e.g,"pause",function(){nd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,nd(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,nd(e))}).X(DU)})}function $b(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,nd(e)}function nd(e){var t;Oe(function(n){if(n.g==1)return N(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),Jb(e)||Ju(e),$(n)})}function RU(e,t,n){var r,u,c,f,h,E,A,k,G,ne;Oe(function(z){switch(z.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(z,5),N(z,e.h.load(t.manifest,t.startTime),7)):N(z,Promise.resolve(),3);case 7:ye(z,3);break;case 5:return f=be(z),h=new Map().set("detail",f),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),z.return();case 3:if(!e.h)return z.return();for(A in t.video)k=t.video[A],e.g[A]=k;for(G in t.playerAfterLoad)ne=t.playerAfterLoad[G],e.h[G](ne);e.g.autoplay=c,t.manifest&&(e.g.play(),Ju(e)),$(z)}})}function Qb(e,t,n){e.h&&(KE(e),Qu(e,{type:"event",targetName:t,event:n},e.l))}function KE(e){e.G.X(MU);for(var t={video:{},player:{}},n=m(yU),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.R())for(var u in GE)e.m%GE[u]==0&&(t.player[u]=e.h[u]());for(var c in Vm)e.m%Vm[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Qu(e,{type:"update",update:t},e.l);for(var f in Km)e.m%Km[f]==0&&(t={player:{}},t.player[f]=e.h[f](),Qu(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),Jb(e)}function Jb(e){return e.A&&(e.g.duration||e.h.R())?(zE(e),e.A=!1,!0):!1}function zE(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Ju(e,t===void 0?0:t,n)}function NU(e,t){var n=jE(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,RU(e,n.initState,n.appData),KE(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,f=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return eR(e,f,c,null)},function(h){return eR(e,f,c,h)})}}function xU(e,t){var n=jE(t.data);switch(n.type){case"PLAY":e.g.play(),Ju(e);break;case"PAUSE":e.g.pause(),Ju(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),Ju(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),Ju(e));break;case"STOP":e.h.lc().then(function(){e.h&&Ju(e)});break;case"GET_STATUS":zE(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||Ju(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&zE(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),Qu(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:Qu(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function eR(e,t,n,r){e.h&&Qu(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function Qu(e,t,n,r){e.F&&(e=Ub(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Ju(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?PU:e.h.Xe()?LU:e.g.paused?kU:OU,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),Qu(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}te("shaka.cast.CastReceiver",mo),mo.prototype.destroy=mo.prototype.destroy,mo.prototype.setContentArtist=mo.prototype.ti,mo.prototype.setContentImage=mo.prototype.ui,mo.prototype.setContentTitle=mo.prototype.wi,mo.prototype.clearContentMetadata=mo.prototype.bh,mo.prototype.setContentMetadata=mo.prototype.vi,mo.prototype.isIdle=mo.prototype.Lh,mo.prototype.isConnected=mo.prototype.isConnected;var MU=.5,DU=5,PU="IDLE",OU="PLAYING",LU="BUFFERING",kU="PAUSED";function tR(e,t,n,r,u){if(r>=u)return null;for(var c=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){f=h;break}if(c===-1||f===-1)return null;for(var E=h=!1,A="white",k="black",G=YE(r,u,h,E,A,k);c<=f;c++){for(var ne=n[c],z=-1,ve=-1,Pe=0;Pe<ne.length;Pe++)if(ne[Pe]!=null&&ne[Pe].g.trim()!==""){z=Pe;break}for(Pe=ne.length-1;0<=Pe;Pe--)if(ne[Pe]!=null&&ne[Pe].g.trim()!==""){ve=Pe;break}if(z===-1||ve===-1)ne=nR(r,u),e.nestedCues.push(ne);else{for(;z<=ve;z++)if(Pe=ne[z]){var xe=Pe.l,Ge=Pe.i,Te=Pe.j,We=Pe.h;(xe!=h||Ge!=E||Te!=A||We!=k)&&(G.payload&&e.nestedCues.push(G),G=YE(r,u,xe,Ge,Te,We),h=xe,E=Ge,A=Te,k=We),G.payload+=Pe.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==f&&(G=nR(r,u),e.nestedCues.push(G)),G=YE(r,u,h,E,A,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function YE(e,t,n,r,u,c){return e=new bn(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function nR(e,t){return e=new bn(e,t,""),e.lineBreak=!0,e}function rR(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function WE(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",tp(this)}function Xm(e,t,n){var r="CC"+((e.A<<1|e.s)+1),u=new bn(t,n,"");u.lineInterpretation=1;var c=jU.get(e.g);return c&&(u.line=c),tR(u,r,e.i,t,n)}function tp(e){el(e,0,15),e.g=1}function rd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case np:r=uR.has(n)?uR.get(n):String.fromCharCode(n);break;case oR:r=FU.get(n);break;case aR:e.i[e.g].pop(),r=UU.get(n);break;case sR:e.i[e.g].pop(),r=BU.get(n)}r&&e.i[e.g].push(new rR(r,e.m,e.j,e.o,e.l))}}function iR(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function el(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var np=0,oR=1,aR=2,sR=3,uR=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),FU=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),UU=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),BU=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),jU=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function $m(e,t){this.h=fR,this.o=new WE(e,t),this.i=new WE(e,t),this.g=this.j=new WE(e,t),this.l=0,this.m=null}function XE(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==Qm&&e.h!==rp&&(u=Xm(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,el(n,0,15),n=e.j,n.g=0<n.h?n.h:0,el(n,0,15),r.g=15),e.h=Qm,r.h=t,u}function lR(e){e.h=ZU,e.g=e.j,e.g.h=0}function cR(e){_t("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=rp}var fR=0,ZU=1,Qm=3,rp=4,GU="black green blue cyan red yellow magenta black".split(" "),dR="white green blue cyan red yellow magenta white_italics".split(" ");function hR(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=VU,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",$E(this)}function $E(e){e.i=[];for(var t=0;16>t;t++)e.i.push(QE())}function QE(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Dc(e,t){pR(e)&&(e.i[e.h][e.g]=new rR(t,e.C,e.A,e.s,e.B),e.g++)}function pR(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}hR.prototype.isVisible=function(){return this.l};function Pc(e,t,n){var r=new bn(e.j,t,"");r.textAlign=e.F===qU?"left":e.F===HU?"right":kn;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case KU:u.regionAnchorX=0,u.regionAnchorY=0;break;case zU:u.regionAnchorX=50,u.regionAnchorY=0;break;case YU:u.regionAnchorX=100,u.regionAnchorY=0;break;case WU:u.regionAnchorX=0,u.regionAnchorY=50;break;case XU:u.regionAnchorX=50,u.regionAnchorY=50;break;case $U:u.regionAnchorX=100,u.regionAnchorY=50;break;case QU:u.regionAnchorX=0,u.regionAnchorY=100;break;case JU:u.regionAnchorX=50,u.regionAnchorY=100;break;case eB:u.regionAnchorX=100,u.regionAnchorY=100}return(n=tR(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var qU=0,HU=1,VU=2,KU=0,zU=1,YU=2,WU=3,XU=4,$U=5,QU=6,JU=7,eB=8;function tB(){this.i=[],this.h=null,this.g=0}function nB(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Jm(e.h)),e.h=null,e.g=0))}function Jm(e){this.g=0,this.h=e}Jm.prototype.ka=function(){return this.g<this.h.length},Jm.prototype.wa=function(){return this.g};function oo(e){if(!e.ka())throw new pt(2,2,3e3);return e.h[e.g++]}Jm.prototype.skip=function(e){if(this.g+e>this.h.length)throw new pt(2,2,3e3);this.g+=e};function rB(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function iB(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=oo(t).value,t=null,n=m(ip(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Pc(u,r,e.i)),$E(u);return t}if(n===137)for(t=oo(t).value,t=m(ip(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=oo(t).value,t=null,n=m(ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Pc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=oo(t).value,t=null,n=m(ip(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Pc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=oo(t).value,gR(e,t,r);if(n===143)return r=gR(e,255,r),mR(e),r;if(n===144)t.skip(1),r=oo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=oo(t).value,n=oo(t).value,t.skip(1),e.g&&(t=yR((n&48)>>4,(n&12)>>2,n&3),e.g.B=yR((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=oo(t).value,t=oo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=oo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new hR(n,e.i);c.j=r,e.h[n]=c}r=oo(t).value,c=oo(t).value;var f=oo(t).value,h=oo(t).value,E=oo(t).value;t=oo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=f,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function ip(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function gR(e,t,n){var r=null;t=m(ip(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=Pc(c,n,e.i)),e.h[u]=null}return r}function mR(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function yR(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],oB[e<<2|t<<1|n]}var vR=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),oB="black blue green cyan red magenta yellow white".split(" ");function id(){this.h=[],this.g=[],this.i=new tB,this.l=0,this.m=new Map([["CC1",new $m(0,0)],["CC2",new $m(0,1)],["CC3",new $m(1,0)],["CC4",new $m(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,JE(this)}id.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,JE(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())mR(t.value)};function JE(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=fR,n.g=n.j,n.m=null,tp(n.i),tp(n.j),tp(n.o);e.B=!0}id.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.P(),c=(u&4)>>2,f=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:f,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},id.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=aB(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())nB(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=sB(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function aB(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!ER(t.cb)||!ER(t.vb))return 45<=++e.l&&JE(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(r),e=null,(t.cb&112)===16)e:{if(r=t.cb,e=t.vb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white";var c=!1;7>u?r=dR[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==rp&&(u=n.g,n.h===Qm&&t!==u.g&&(n=1+t-u.h,iR(u,n,1+u.g-u.h,u.h),el(u,0,n-1),el(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",rd(n.g,np,32),r=!1,t=dR[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=GU[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)rd(n.g,oR,e);else if((r&246)===18&&(e&224)===32)rd(n.g,r&1?sR:aR,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.vb){case 32:lR(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=XE(n,2,e);break;case 38:r=XE(n,3,e);break;case 39:r=XE(n,4,e);break;case 40:rd(n.g,np,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:tp(n.o),cR(n);break;case 43:cR(n);break;case 44:t=n.i,r=null,n.h!==rp&&(r=Xm(t,n.l,e)),el(t,0,15);break;case 45:t=n.g,n.h!==Qm?r=null:(r=Xm(t,n.l,e),c=t.g-t.h+1,iR(t,c-1,c,t.h),el(t,0,c-1),el(t,t.g,15-t.g),n.l=e);break;case 46:el(n.j,0,15);break;case 47:t=null,n.h!==rp&&(t=Xm(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,lR(n),n.l=e,r=t}e=r;break e}e=null}else r=t.vb,rd(n.g,np,t.cb),rd(n.g,np,r);return e}function sB(e,t){var n=[];try{for(;t.ka();){var r=oo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=oo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new rB(u));for(var f=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=oo(u),A=E.value,k=E.pts;if(A===16){var G=oo(u);A=A<<16|G.value}if(0<=A&&31>=A){var ne=k;if(f.g){var z=f.g;switch(u=null,A){case 8:!pR(z)||0>=z.g&&0>=z.h||(0>=z.g?(z.g=z.m-1,z.h--):z.g--,z.i[z.h][z.g]=null);break;case 13:if(z.isVisible()&&(u=Pc(z,ne,f.i)),z.h+1>=z.o){ne=z;for(var ve=0,Pe=1;16>Pe;Pe++,ve++)ne.i[ve]=ne.i[Pe];for(Pe=0;1>Pe;Pe++,ve++)ne.i[ve]=QE()}else z.h++;z.g=0;break;case 14:z.isVisible()&&(u=Pc(z,ne,f.i)),z.i[z.h]=QE(),z.g=0;break;case 12:z.isVisible()&&(u=Pc(z,ne,f.i)),$E(z),ne=z,ne.h=0,ne.g=0}var xe=u}else xe=null}else if(128<=A&&159>=A)xe=iB(f,u,A,k);else{if(4096<=A&&4127>=A)ne=A&255,8<=ne&&15>=ne?u.skip(1):16<=ne&&23>=ne?u.skip(2):24<=ne&&31>=ne&&u.skip(3);else if(4224<=A&&4255>=A)ne=A&255,128<=ne&&135>=ne?u.skip(4):136<=ne&&143>=ne&&u.skip(5);else if(32<=A&&127>=A)u=A,f.g&&(u===127?Dc(f.g,"♪"):Dc(f.g,String.fromCharCode(u)));else if(160<=A&&255>=A)f.g&&Dc(f.g,String.fromCharCode(A));else if(4128<=A&&4223>=A){if(u=A&255,f.g)if(vR.has(u)){var Ge=vR.get(u);Dc(f.g,Ge)}else Dc(f.g,"_")}else 4256<=A&&4351>=A&&f.g&&((A&255)!=160?Dc(f.g,"_"):Dc(f.g,"[CC]"));xe=null}(u=xe)&&n.push(u)}}}}catch(Te){if(Te instanceof pt&&Te.code===3e3)_t("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Te}return n}function ER(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}id.prototype.getStreams=function(){return Array.from(this.A)},te("shaka.cea.CeaDecoder",id),Nt=function(){return new id};function _R(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function ey(){this.j=new Map,this.i=this.h=0,this.g=e_}ey.prototype.init=function(e){function t(c){c=c.name,c in ty&&(n.g=ty[c])}var n=this,r=[],u=[];if(new kr().box("moov",vr).box("mvex",vr).O("trex",function(c){var f=c.reader;f.skip(4),f.skip(4),c=f.M(),f=f.M(),n.h=c,n.i=f}).box("trak",vr).O("tkhd",function(c){c=Zt(c.reader,c.version),r.push(c.trackId)}).box("mdia",vr).O("mdhd",function(c){c=At(c.reader,c.version),u.push(c.timescale)}).box("minf",vr).box("stbl",vr).O("stsd",fu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",wi).box("sinf",vr).box("frma",function(c){c=un(c.reader).Ea,c in ty&&(n.g=ty[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new pt(2,2,2010);this.g==e_&&He("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,f){n.j.set(c,u[f])})},ey.prototype.parse=function(e){var t=this;if(this.g==e_)return[];var n=[],r=this.h,u=this.i,c=0,f=[],h=null,E=9e4;return new kr().box("moof",function(A){c=A.start,f=[],vr(A)}).box("traf",vr).O("trun",function(A){A=Xt(A.reader,A.version,A.flags),f.push(A)}).O("tfhd",function(A){A=rr(A.reader,A.flags),r=A.Wf||t.h,u=A.fh||t.i,A=A.trackId,t.j.has(A)&&(E=t.j.get(A))}).O("tfdt",function(A){h=ir(A.reader,A.version).baseMediaDecodeTime}).box("mdat",function(A){if(h===null)throw He("Unable to find base media decode time for CEA captions!"),new pt(2,2,2010);uB(t,A.reader,h,E,r,u,c-A.start-8,f,n)}).parse(e,!1),n};function uB(e,t,n,r,u,c,f,h,E){var A=0,k=c,G=h.map(function(ve){return ve.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(f+h[0].eh);t.ka();){f=t.M();var ne=t.P(),z=null;switch(z=!1,h=1,e.g){case op:z=ne&31,z=z==6;break;case ap:h=2,t.skip(1),z=ne>>1&63,z=z==39||z==40;break;default:return}if(z)for(ne=0,A<G.length&&(ne=G[A].he||0),ne=(n+ne)/r,h=m(_R(t.sb(f-h))),z=h.next();!z.done;z=h.next())E.push({packet:z.value,pts:ne});else try{t.skip(f-h)}catch(ve){break}k-=f+4,k==0&&(n=A<G.length?n+(G[A].wf||u):n+u,A++,A<G.length?k=G[A].sampleSize||c:k=c)}}te("shaka.cea.Mp4CeaParser",ey);var e_=0,op=1,ap=2,ty={avc1:op,avc3:op,hev1:ap,hvc1:ap,dvav:op,dva1:op,dvh1:ap,dvhe:ap};zt["video/mp4"]=function(){return new ey};function ny(){this.g=null}ny.prototype.init=function(){},ny.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ve;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),r=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(_R(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},te("shaka.cea.TsCeaParser",ny),zt["video/mp2t"]=function(){return new ny};function TR(e,t,n){var r=hB(e),u=null;e=[];var c=[],f=null,h=new Set(r.map(function(A){return A.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new pt(2,4,4010);if(!t){if(c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new pt(2,4,4050);c.length&&(f=gB(c[0])),(c=r.find(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=dB(u,E,c,n,h),e.length==0&&(e=[xu("",E,u)]))}if(r.length&&!f&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(xu(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:f,Zf:!0}}function lB(e,t,n,r){var u=TR(e,n,r);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(f){return f.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new pt(2,4,4008);return u.Vf||t.Vf}function cB(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function fB(e){e=m(Aa(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return bi(n)}return""}function ry(e){var t=Os(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=bi(t))?t:(e=Os(e.node,"urn:microsoft:playready","pro"),!e||!bi(e)||(e=bi(e),e=qo(e),e=cB(e).filter(function(n){return n.type===mB})[0],!e)?"":(e=Za(e.value,!0),(e=xl(e,"WRMHEADER"))?fB(e):""))}function dB(e,t,n,r,u){var c=[];n=m(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=r[f.Dc];if(h){var E;if((E=Os(f.node,"urn:microsoft:playready","pro"))&&bi(E)){E=bi(E),E=qo(E);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:Pf(E,A,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else E=null;if(A=null,f.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(A=u,A.size==0)A=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);A=[{initData:Pf(G,k,A,1),initDataType:"cenc",keyId:f.keyId}]}E=xu(h,t,f.init||e||E||A),(h=yB.get(h))&&(E.licenseServerUri=h(f)),c.push(E)}}return c}function hB(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=pB(n.value))&&t.push(n);return t}function pB(e){var t=e.attributes.schemeIdUri,n=hu(e,"urn:mpeg:cenc:2013","default_KID"),r=Lf(e,"urn:mpeg:cenc:2013","pssh").map(du),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new pt(2,4,4009);var c=[];try{c=r.map(function(f){return{initDataType:"cenc",initData:qo(f),keyId:null}})}catch(f){throw new pt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function gB(e){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var t=Os(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new pt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new pt(2,4,4051);if(t=Os(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new pt(2,4,4051);if(e=t.attributes.IV,t=Io(t.attributes.keyUriTemplate),!e||!t)throw new pt(2,4,4051);if(e=su(e.substr(2)),e.byteLength!=16)throw new pt(2,4,4048);return{Rh:t,iv:e}}var mB=1,yB=new Map().set("com.widevine.alpha",function(e){var t=Os(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=bi(t))?t:(e=Os(e.node,"urn:microsoft","laurl"))&&Io(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",ry).set("com.microsoft.playready.recommendation",ry).set("com.microsoft.playready.software",ry).set("com.microsoft.playready.hardware",ry).set("org.w3.clearkey",function(e){var t=Os(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=bi(t))?t:(e=Os(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=bi(e))?e:""});function iy(e,t,n,r,u,c){var f={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,A,k){if(h=="$$")return"$";var G=f[E];if(G==null)return h;switch(E=="RepresentationID"&&A&&(A=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&He("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return A=p.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function SR(e,t){var n=mu(e,t,"timescale"),r=1;n&&(r=Ls(n)||1),n=mu(e,t,"duration"),(n=Ls(n||""))&&(n/=r);var u=mu(e,t,"startNumber"),c=Number(mu(e,t,"presentationTimeOffset"))||0,f=bo(u||"");(u==null||f==null)&&(f=1);var h=oy(e,t,"SegmentTimeline");if(t=null,h){t=r,e=e.ha.duration||1/0,u=f,h=Wr(h,"S");for(var E=[],A=-c,k=0;k<h.length;++k){var G=h[k],ne=h[k+1],z=_r(G,"t",bo),ve=_r(G,"d",bo),Pe=_r(G,"r",Vu);if(G=_r(G,"k",Vu)||0,z!=null&&(z-=c),!ve)break;if(z=z!=null?z:A,Pe=Pe||0,0>Pe)if(ne){if(ne=_r(ne,"t",bo),ne==null)break;if(z>=ne)break;Pe=Math.ceil((ne-z)/ve)-1}else{if(e==1/0)break;if(z/t>=e)break;Pe=Math.ceil((e*t-z)/ve)-1}for(0<E.length&&z!=A&&(E[E.length-1].end=z/t),ne=0;ne<=Pe;++ne)A=z+ve,E.push({start:z/t,end:A/t,Kf:z,rb:G,ri:E.length+u}),z=A}t=E}return{timescale:r,Da:n,rd:f,Bb:c/r||0,Jf:c,timeline:t}}function wR(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(Pu)}function mu(e,t,n){t=wR(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function oy(e,t,n){t=wR(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=sa(r.value,n));r=t.next());return e}function vB(e,t,n,r,u,c){for(var f=hu(e,"http://www.w3.org/1999/xlink","href"),h=hu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),A=E.next();!A.done;A=E.next()){A=A.value;var k=A.split(":"),G=Sc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[A]}if(5<=c)return lu(new pt(2,4,4028));if(h!="onLoad")return lu(new pt(2,4,4027));var ne=co([r],[f]);return u.request(0,Oi(ne,t)).va(function(z){if(z=Ph(z.data,e.tagName),!z)return lu(new pt(2,4,4001,f));for(e.children=[];z.children.length;){var ve=z.children.shift();ve.tagName&&(ve.parent=e),e.children.push(ve)}ve=m(Object.keys(z.attributes));for(var Pe=ve.next();!Pe.done;Pe=ve.next())Pe=Pe.value,e.attributes[Pe]=z.attributes[Pe];return ay(e,t,n,ne[0],u,c+1)})}function ay(e,t,n,r,u,c){if(c=c===void 0?0:c,hu(e,"http://www.w3.org/1999/xlink","href")){var f=vB(e,t,n,r,u,c);return n&&(f=f.va(void 0,function(){return ay(e,t,n,r,u,c)})),f}f=[];for(var h={},E=m(Y0(e)),A=E.next();!A.done;h={pc:h.pc},A=E.next())h.pc=A.value,hu(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&f.push(ay(h.pc,t,n,r,u,c));return xf(f).va(function(){return e})}function EB(e,t,n,r,u,c,f){var h,E=new kr().O("sidx",function(A){h=_B(t,r,u,c,f,n,A)});if(e&&E.parse(e),h)return h;throw new pt(2,3,3004)}function _B(e,t,n,r,u,c,f){var h=[];f.reader.skip(4);var E=f.reader.M();if(E==0)throw new pt(2,3,3005);if(f.version==0)var A=f.reader.M(),k=f.reader.M();else A=f.reader.Cc(),k=f.reader.Cc();f.reader.skip(2);var G=f.reader.ra();for(e=e+f.size+k,k=0;k<G;k++){var ne=f.reader.M(),z=(ne&2147483648)>>>31;ne&=2147483647;var ve=f.reader.M();if(f.reader.skip(4),z==1)throw new pt(2,3,3006);h.push(new Je(A/E+n,(A+ve)/E+n,function(){return c},e,e+ne-1,t,n,r,u)),A+=ve,e+=ne}return f.parser.stop(),h}function Dl(e){this.h=tn(e),this.g=new Dr(this.h,0)}Dl.prototype.ka=function(){return this.g.ka()};function tl(e){var t=AR(e);if(7<t.length)throw new pt(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=AR(e);e:{r=m(TB);for(var u=r.next();!u.done;u=r.next())if(zi(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new pt(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),r=tn(e.h,e.g.wa(),t),e.g.skip(t),new SB(n,r)}function AR(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new pt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var TB=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function SB(e,t){this.id=e,this.g=t}function t_(e){if(8<e.g.byteLength)throw new pt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new pt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function wB(e,t,n,r,u,c,f,h,E){function A(){return u}var k=[];e=new Dl(e.g);for(var G=null,ne=null;e.ka();){var z=tl(e);if(z.id==187){var ve=AB(z);ve&&(z=n*ve.Di,ve=t+ve.gi,G!=null&&k.push(new Je(G+f,z+f,A,ne,ve-1,c,f,h,E)),G=z,ne=ve)}}return G!=null&&k.push(new Je(G+f,r+f,A,ne,null,c,f,h,E)),k}function AB(e){var t=new Dl(e.g);if(e=tl(t),e.id!=179)throw new pt(2,3,3013);if(e=t_(e),t=tl(t),t.id!=183)throw new pt(2,3,3012);t=new Dl(t.g);for(var n=0;t.ka();){var r=tl(t);if(r.id==241){n=t_(r);break}}return{Di:e,gi:n}}function IR(e,t,n){if(t=oy(e,t,"Initialization"),!t)return null;var r=e.J.nb(),u=t.attributes.sourceURL;u&&(r=co(r,[Io(u)])),u=0;var c=null;return(t=_r(t,"range",Ff))&&(u=t.start,c=t.end),n=new dt(function(){return r},u,c,NR(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function IB(e,t,n){var r=Number(mu(e,od,"presentationTimeOffset"))||0,u=mu(e,od,"timescale"),c=1;u&&(c=Ls(u)||1);var f=r/c||0,h=IR(e,od,n);CB(e,h);var E=qg(e);return{vc:function(){var A=oy(E,od,"RepresentationIndex"),k=E.J.nb();return A&&(A=Io(A.attributes.sourceURL))&&(k=co(k,[A])),A=bR(E),CR(E,t,h,k,A.start,A.end,f)}}}function CR(e,t,n,r,u,c,f){var h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut;return Oe(function(vt){if(vt.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,A=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],ne=t,z=null,ve=[ne(r,u,c,!1),G=="webm"?ne(n.$(),n.Aa,n.ja,!0):null],ne=null,N(vt,Promise.all(ve),2);if(Pe=vt.h,xe=Pe[0],Ge=Pe[1]||null,Te=null,We=A-f,Ue=A,gt=k?A+k:1/0,G=="mp4")var jt=EB(xe,u,r,n,We,Ue,gt);else{if(jt=new Dl(Ge),tl(jt).id!=440786851)throw new pt(2,3,3008);var ln=tl(jt);if(ln.id!=408125543)throw new pt(2,3,3009);jt=ln.g.byteOffset,ln=new Dl(ln.g);for(var pn=null;ln.ka();){var Ln=tl(ln);if(Ln.id==357149030){pn=Ln;break}}if(!pn)throw new pt(2,3,3010);for(pn=new Dl(pn.g),Ln=1e6,ln=null;pn.ka();){var Mn=tl(pn);if(Mn.id==2807729)Ln=t_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)ln=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)ln=Mn.g.getFloat64(0);else throw new pt(2,3,3003)}if(ln==null)throw new pt(2,3,3011);if(pn=Ln/1e9,ln*=pn,Ln=tl(new Dl(xe)),Ln.id!=475249515)throw new pt(2,3,3007);jt=wB(Ln,jt,pn,ln,r,n,We,Ue,gt)}for(Te=jt,bt=m(Te),Ht=bt.next();!Ht.done;Ht=bt.next())Ut=Ht.value,Ut.codecs=e.J.codecs,Ut.mimeType=e.J.mimeType;return h.ld(Te),z=new wr(Te),E&&z.sc(Ue,gt,!0),vt.return(z)})}function od(e){return e.pd}function bR(e){var t=oy(e,od,"RepresentationIndex");return e=mu(e,od,"indexRange"),e=Ff(e||""),t&&(e=_r(t,"range",Ff,e)),e}function CB(e,t){if(RR(e,t),!bR(e))throw new pt(2,4,4002)}function RR(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=yr&&n!="mp4"&&n!="webm")throw new pt(2,4,4006);if(n=="webm"&&!t)throw new pt(2,4,4005)}function NR(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function bB(e,t,n){var r=IR(e,xR,n),u=RB(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new pt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new pt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new pt(2,4,4002);var c=null,f=null;e.za.id&&e.J.id&&(f=t[e.za.id+","+e.J.id])&&(c=f.segmentIndex);var h=NB(e.ha.start,e.ha.duration,e.J.nb,u,r,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),f&&(f.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function xR(e){return e.Jb}function RB(e){var t=xB(e);e=SR(e,xR);var n=e.rd;n==0&&(n=1);var r=0;return e.Da?r=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Da:e.Da,startTime:r,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function NB(e,t,n,r,u,c,f,h){var E=r.yc.length;r.timeline&&r.timeline.length!=r.yc.length&&(E=Math.min(r.timeline.length,r.yc.length));for(var A=e-r.Bb,k=t?e+t:1/0,G=[],ne=r.startTime,z={},ve=0;ve<E;z={Sc:z.Sc,Oc:z.Oc},ve++){z.Oc=r.yc[ve];var Pe=ne;ne=void 0,ne=r.Da!=null?Pe+r.Da:r.timeline?r.timeline[ve].end:Pe+t,z.Sc=null,Pe=new Je(e+Pe,e+ne,function(xe){return function(){return xe.Sc==null&&(xe.Sc=co(n(),[xe.Oc.Xh])),xe.Sc}}(z),z.Oc.start,z.Oc.end,u,A,e,k,[],"",null,null,Bt,c),Pe.codecs=h,Pe.mimeType=f,G.push(Pe)}return G}function xB(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(Pu).map(function(t){return Wr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=Io(t.attributes.media);return t=_r(t,"mediaRange",Ff,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function MB(e,t,n,r,u,c,f,h){var E=LB(e,f),A=DB(e);PB(A);var k=qg(e);if(A.hd)return RR(e,E),{vc:function(){var Pe=iy(A.hd,k.J.id,null,null,k.bandwidth||null,null);return Pe=co(k.J.nb(),[Pe]),CR(k,t,E,Pe,0,null,A.Bb)}};if(A.Da)return r||e.ua.contentType==="image"||(e.presentationTimeline.hf(A.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return OB(k,A,u,E,c,f,h)}};var G=null;r=r=null,e.za.id&&e.J.id&&(r=e.za.id+","+e.J.id,r=n[r])&&(G=r.segmentIndex);var ne=e.ha.start,z=e.ha.duration?ne+e.ha.duration:1/0,ve=!(e.Eb&&e.ha.Ye);return G?(n=G,MR(n,A,ne,z,ve,E),n.La(e.presentationTimeline.qb())):G=new uy(A,e.J.id,e.bandwidth,e.J.nb,ne,z,E,ve,f,e.J.xf),A.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(A.timeline,ne),r&&e.Eb&&(r.segmentIndex=G),{vc:function(){return G instanceof uy&&G.getNumReferences()==0&&MR(G,A,ne,z,ve,E),Promise.resolve(G)}}}function sy(e){return e.qd}function DB(e){var t=SR(e,sy),n=mu(e,sy,"media"),r=mu(e,sy,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&Io(n),hd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function PB(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new pt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new pt(2,4,4002)}function OB(e,t,n,r,u,c,f){function h(ln){var pn=(ln-Pe)*ve,Ln=pn+t.Bb,Mn=pn+G;pn=Mn+ve;var qn=Math.min(pn,A());return Mn=new Je(Mn,qn,function(){var Yn=Ln*xe;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(xe)),Yn=iy(Ge,We,ln,null,Te,Yn),co(Ue(),[Yn])},0,null,r,gt,G,A(),[],"",null,null,Bt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=pn,Mn}function E(){var ln=[Math.max(k.qb(),G),Math.min(k.Gb(),A())].map(function(pn){return pn-G});return ln=[Math.ceil(ln[0]/ve),Math.ceil(ln[1]/ve)-1],e.J.Qb&&ln[1]++,ln.map(function(pn){return pn+Pe})}function A(){var ln=ne!=null&&u[ne]||z;return ln?G+ln:1/0}var k=e.presentationTimeline,G=e.ha.start,ne=e.za.id,z=e.ha.duration,ve=t.Da,Pe=t.rd,xe=t.timescale,Ge=t.zc,Te=e.bandwidth||null,We=e.J.id,Ue=e.J.nb,gt=G-t.Bb,bt=E();n=e.Eb?Math.max(bt[0],bt[1]-n+1):bt[0],f=f||bt[1],bt=[];for(var Ht=n;Ht<=f;++Ht){var Ut=h(Ht);bt.push(Ut)}var vt=new wr(bt);if(bt=k.Gb()<A(),Ht=k.R(),bt||Ht){var jt=Math.max(n,f+1);vt.ke(ve,function(){var ln=k.qb();vt.La(ln);var pn=m(E());pn.next(),pn=pn.next().value;for(var Ln=[];jt<=pn;){var Mn=h(jt);Ln.push(Mn),jt++}return ln>A()&&!Ln.length?null:Ln})}return Promise.resolve(vt)}function LB(e,t){var n=mu(e,sy,"initialization");if(!n)return null;n=Io(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new dt(function(){var f=iy(n,r,null,null,u,null);return co(c(),[f])},0,null,NR(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function uy(e,t,n,r,u,c,f,h,E,A){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.i=u,this.l=c,this.s=f,this.A=E,this.G=A,h&&DR(this)}Y(uy,wr),g=uy.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.i<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function MR(e,t,n,r,u,c){if(kB(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;u&&DR(e)}function kB(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ht(n,t)}}function DR(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.i;if(u=r<n?t[r+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return r+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.zc,u=this.h.timeline[e],c=u.ri,f=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var A=this.h.codecs,k=this.h.mimeType,G=[],ne=(u.end-u.start)/u.rb,z={},ve=0;ve<u.rb;z={Tc:z.Tc,se:z.se},ve++){var Pe=u.start+ne*ve,xe=Pe+ne;z.se=ve+1,z.Tc=null,Pe=new Je(this.i+Pe,this.i+xe,function(Ge){return function(){return t.h?(Ge.Tc==null&&(Ge.Tc=PR(t.h.zc,t.F,c,t.B,f,Ge.se,t.C)),Ge.Tc):[]}}(z),0,null,this.s,n,this.i,this.l,[],"",null,null,Bt,this.A),Pe.codecs=A,Pe.mimeType=k,this.G==0?0<ve&&Pe.Zd():ve%this.G!=0&&Pe.Zd(),G.push(Pe)}n=new Je(this.i+u.start,E,function(){return 0<u.rb?[]:PR(r,t.F,c,t.B,f,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,Bt,this.A,0<u.rb),n.codecs=A,n.mimeType=k,n.i=h,this.g[e]=n}return n};function PR(e,t,n,r,u,c,f){return e=iy(e,t,n,c,r||null,u),co(f(),[e]).map(function(h){return h.toString()})}function ad(e){this.o=null,this.A=e,this.G=new bl,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}ad.prototype.configure=function(e){this.o=e},ad.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},ad.prototype.setManifestType=function(e){this.s=e};function sp(e,t){var n,r,u,c,f,h,E;return Oe(function(A){if(A.g==1)return n=co(e.i,[FB(e,t)]),r=Oi(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),cu(e.G,u),ce(A,2),N(A,u.promise,4);if(A.g!=2)return c=A.h,f=Kr(c.data),h=JSON.parse(f),h.VERSION==1&&UB(e,h,c.uri),ye(A,0);if((E=be(A))&&E.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){sp(e,t)}),e.g.X(e.C),$(A)})}function FB(e,t){if(!e.m.length)return t;t=new si(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),ta(u)&&hr(t,u),t.toString()}function UB(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new pr(function(){sp(e,r)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function sd(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}ad.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function up(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u={},c=m(e.m),f=c.next();!f.done;u={Pb:u.Pb},f=c.next())if(u.Pb=f.value,f=t.get(u.Pb))r.push({rf:u.Pb,location:f});else if(f=e.F.find(function(E){return function(A){return A.Vi==E.Pb}}(u))){var h=t.get(f["BASE-ID"]);h&&(f["URI-REPLACEMENT"].Ng?(h=new si(h),_n(h,f["URI-REPLACEMENT"].Ng),r.push({rf:u.Pb,location:h.toString()})):r.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),f=c.next();!f.done;f=c.next())f=f.value,h=e.j.get(f),u>h&&e.j.delete(f);if(r=r.filter(function(E){for(var A=m(e.j.keys()),k=A.next();!k.done;k=A.next())if(k.value.includes(new si(E.location).wb))return!1;return!0}),r.length&&(e.B=r[0].rf),r=r.map(function(E){return E.location}),!r.length&&e.h)for(u=m(e.h.split(",")),f=u.next();!f.done;f=u.next())(c=t.get(f.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:co(e.i,r)}function Vo(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Vo.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function OR(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(G){return[o_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[i_(G),G]})),A=new Map(h.textStreams.map(function(G){return[dp(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[hp(G),G]})),t){var k=jR(yr);A.set(dp(k),k),k=jR("image"),h.set(hp(k),k)}n.push(f),r.push(E),u.push(A),c.push(h)}return{Pf:n,Lg:r,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn,qn;return Oe(function(Yn){if(Yn.g==1){if(r=vi,!t&&e.length==1)return u=OR(e,!1),c=u.Pf,f=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(f[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(A=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),A==-1&&(A=k));return A==-1?Yn.return():(ne=OR(e,!0),z=ne.Pf,ve=ne.Lg,Pe=ne.Ig,xe=ne.hg,N(Yn,Promise.all([Pl(n,n.h,z,A,lp,ud),Pl(n,n.g,ve,A,lp,ud),Pl(n,n.l,Pe,A,lp,ud),Pl(n,n.i,xe,A,lp,ud)]),2))}if(Ge=0,Te=[],n.g.length&&n.h.length)for(Ut=m(n.h),vt=Ut.next();!vt.done;vt=Ut.next())for(jt=vt.value,ln=m(n.g),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=de(jt.drmInfos,Ln.drmInfos),jt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=Ge++,Te.push({id:qn,language:jt.language,disabledUntilTime:0,primary:jt.primary,audio:jt,video:Ln,bandwidth:(jt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(We=n.g.length?n.g:n.h,Ue=m(We),gt=Ue.next();!gt.done;gt=Ue.next())bt=gt.value,Ht=Ge++,Te.push({id:Ht,language:bt.language,disabledUntilTime:0,primary:bt.primary,audio:bt.type==r.S?bt:null,video:bt.type==r.fa?bt:null,bandwidth:bt.bandwidth||0,drmInfos:bt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Te,$(Yn)})};function LR(e){var t,n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:if(t=vi,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Vn){return Vn.type===t.S}).map(function(Vn){return[o_(Vn),Vn]}))}),r=e.map(function(Yn){return new Map(Yn.filter(function(Vn){return Vn.type===t.fa}).map(function(Vn){return[i_(Vn),Vn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Vn){return Vn.type===t.ma}).map(function(Vn){return[dp(Vn),Vn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Vn){return Vn.type===t.ue}).map(function(Vn){return[hp(Vn),Vn]}))}),f=m(u),h=f.next();!h.done;h=f.next())E=h.value,A=BR(t.ma),E.set(dp(A),A);for(k=m(c),G=k.next();!G.done;G=k.next())ne=G.value,z=BR(t.ue),ne.set(hp(z),z);return ve=new Vo,N(qn,Pl(ve,[],n,0,ly,cy),2);case 2:return Pe=qn.h,N(qn,Pl(ve,[],r,0,ly,cy),3);case 3:return xe=qn.h,N(qn,Pl(ve,[],u,0,ly,cy),4);case 4:return Ge=qn.h,N(qn,Pl(ve,[],c,0,ly,cy),5);case 5:if(Te=qn.h,We=0,xe.length&&Pe.length)for(Ut=m(Pe),vt=Ut.next();!vt.done;vt=Ut.next())for(jt=vt.value,ln=m(xe),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=We++,Ln.variantIds.push(Mn),jt.variantIds.push(Mn);else for(Ue=xe.concat(Pe),gt=m(Ue),bt=gt.next();!bt.done;bt=gt.next())Ht=bt.value,Ht.variantIds=[We++];return qn.return(xe.concat(Pe).concat(Ge).concat(Te))}})}function Pl(e,t,n,r,u,c){var f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:for(f=[],h=0;h<r;h++)f.push(new Set);for(E=r;E<n.length;E++)f.push(new Set(n[E].values()));A=m(t),k=A.next();case 2:if(k.done){Ut.u(4);break}return G=k.value,N(Ut,BB(e,G,n,r,c,f),5);case 5:if(ne=Ut.h,!ne)throw new pt(2,4,4037);k=A.next(),Ut.u(2);break;case 4:for(z=m(f),ve=z.next();!ve.done;ve=z.next())for(Pe=ve.value,xe=m(Pe),Ge=xe.next();!Ge.done;Ge=xe.next())Te=Ge.value,(We=jB(e,Te,n,u,c,f))&&t.push(We);for(Ue=m(f),ve=Ue.next();!ve.done;ve=Ue.next())for(gt=ve.value,bt={},Ht=m(gt),Ge=Ht.next();!Ge.done;bt={Bd:bt.Bd},Ge=Ht.next())if(bt.Bd=Ge.value,!r_(bt.Bd)&&t.some(function(vt){return function(jt){return n_(e,vt.Bd,jt)}}(bt)))throw new pt(2,4,4037);return Ut.return(t)}})}function BB(e,t,n,r,u,c){return Oe(function(f){return f.g==1?(UR(e,n,t),t.matchedStreams?t.segmentIndex?N(f,kR(t,r),2):f.u(2):f.return(!1)):(FR(t,r,u,c),f.return(!0))})}function kR(e,t){var n,r,u,c,f,h,E;return Oe(function(A){if(A.g==1){for(n=[],r=e.matchedStreams,u=m(r),c=u.next();!c.done;c=u.next())f=c.value,n.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&n.push(f.trickModeVideo.createSegmentIndex());return N(A,Promise.all(n),2)}if(e.segmentIndex instanceof Ei)for(h=t;h<r.length;h++)E=r[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);$(A)})}function jB(e,t,n,r,u,c){if(r_(t))return null;var f=r(t);return UR(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return Oe(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new Ei,N(h,kR(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(FR(f,0,u,c),f)}function FR(e,t,n,r){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var f=!0;if(e.type=="audio"&&ku(e.language,c.language)==0&&(f=!1),f&&(r[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),f=c.next();!f.done;f=c.next())e.fullMimeTypes.add(f.value)}}function lp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function ly(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function ud(e,t){function n(f,h){f||(f=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,f.includes(E)||f.push(E);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=de(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new pt(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=lp(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),ud(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&ud(e.trickModeVideo,t)}function cy(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function UR(e,t,n){var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=ZB(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function ZB(e,t,n){var r={audio:o_,video:i_,text:dp,image:hp}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,k){return n_(e,A,k)},video:function(A,k){return n_(e,A,k)},text:GB,image:qB}[n.type];for(var f={audio:HB,video:VB,text:KB,image:zB}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!f(n,u,E)||(u=E)}return e.o&&!r_(u)&&t.delete(r(u)),u}function cp(e,t){function n(r){if(!a_.has(r)){var u=Sa(r);a_.set(r,u)}return a_.get(r)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function n_(e,t,n){return!(!cp(t,n)&&!e.m||t.drmInfos&&!re(t.drmInfos,n.drmInfos))}function GB(e,t){return t.language?!(e.forced!==t.forced||ku(e.language,t.language)==0||t.kind!=e.kind):!0}function qB(){return!0}function HB(e,t,n){var r=cp(e,t),u=cp(e,n);if(r&&!u)return!1;if(!r&&u||(r=ku(e.language,t.language),u=ku(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length?!0:u.length<r.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=fp(e.channelsCount,t.channelsCount,n.channelsCount),r==Gs?!0:r==nl?!1:(r=fp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Gs?!0:r==nl?!1:!!(e.bandwidth&&ZR(e.bandwidth,t.bandwidth,n.bandwidth)==Gs)))}function VB(e,t,n){var r=cp(e,t),u=cp(e,n);if(r&&!u)return!1;if(!r&&u||(r=fp(e.width*e.height,t.width*t.height,n.width*n.height),r==Gs))return!0;if(r==nl)return!1;if(e.frameRate){if(r=fp(e.frameRate,t.frameRate,n.frameRate),r==Gs)return!0;if(r==nl)return!1}return!!(e.bandwidth&&ZR(e.bandwidth,t.bandwidth,n.bandwidth)==Gs)}function KB(e,t,n){var r=ku(e.language,t.language),u=ku(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function zB(e,t,n){return fp(e.width*e.height,t.width*t.height,n.width*n.height)==Gs}function BR(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function jR(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function fp(e,t,n){if(t==e&&e!=n)return nl;if(n==e&&e!=t)return Gs;if(t>e){if(n<=e||n-e<t-e)return Gs;if(n-e>t-e)return nl}else{if(n>e)return nl;if(e-n<e-t)return Gs;if(e-n>e-t)return nl}return GR}function ZR(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Gs:t<e?nl:GR}function r_(e){switch(e.type){case yr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function i_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function o_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function dp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function hp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}te("shaka.util.PeriodCombiner",Vo),Vo.prototype.setUseStreamOnce=Vo.prototype.Fg,Vo.prototype.setAllowMultiTypeVariants=Vo.prototype.yg,Vo.prototype.combinePeriods=Vo.prototype.Sf,Vo.prototype.getImageStreams=Vo.prototype.nh,Vo.prototype.getTextStreams=Vo.prototype.Ve,Vo.prototype.getVariants=Vo.prototype.Eh;var Gs=1,GR=0,nl=-1,a_=new Map;function YB(e,t){var n=new DOMParser,r=WB.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function qR(e,t){try{var n=Ga(e);return YB(n,t)}catch(r){return null}}var WB=new na(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function fy(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Vo,this.G=0,this.H=new M(5),this.A=new pr(function(){n8(e)}),this.F=new bl,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=fy.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,r;return Oe(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,N(u,s_(n),2);if(r=u.h,n.i&&u_(n,r),!n.i)throw new pt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return ce(n,2),N(n,s_(e),4);if(n.g!=2)return ye(n,0);if(t=be(n),!e.i||!t)return n.return();e.i.onError(t),$(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,u_(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function s_(e){var t,n,r,u,c,f,h;return Oe(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=up(e.h,"Location",!0),n.length&&(t=n)),r=Oi(t,e.g.retryParameters),u=Date.now(),N(E,c_(e,r,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),N(E,XB(e,c.data,c.uri),3)):E.return(0)):(f=Date.now(),h=(f-u)/1e3,e.H.sample(1,h),E.return(h))})}function XB(e,t,n){var r,u,c,f,h,E,A,k,G,ne;return Oe(function(z){if(z.g==1){if(r=t,u=e.g.dash.manifestPreprocessor,c=bm,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),f=qR(r,"MPD"),!f)throw new pt(2,4,4001,n);u(f),r=qa(f.outerHTML)}if(h=Ph(r,"MPD"),!h)throw new pt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,A=Rm,E!=A&&E(h),e.g.dash.disableXlinkProcessing?z.return(HR(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=ay(h,e.g.retryParameters,k,n,e.i.networkingEngine),cu(e.F,G),N(z,G.promise,2))}return ne=z.h,z.return(HR(e,ne,n))})}function HR(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn,qn,Yn,Vn,xr,fi,Li,ci,gi,Gr,fo,Fo,ai,Hs,Uc,Bc,yd,rl,Vs,il,Ul,vd,Ed,zy,_d,Np,Yy;return Oe(function(Es){switch(Es.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,f=Wr(t,"Location"),h=m(f),E=h.next();!E.done;E=h.next())A=E.value,k=A.attributes.serviceLocation,(G=du(A))&&(ne=co(r,[G])[0],k&&(e.h?sd(e.h,"Location",k,ne):c.set(k,ne)),u.push(ne));if(e.h?(z=up(e.h,"Location",!0),0<z.length&&(r=e.o=z)):u.length&&(r=e.o=u),ve=Promise.resolve(),(Pe=sa(t,"ContentSteering"))&&e.i)for(xe=Pe.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=xe):(e.h=new ad(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=xe,(Ge=du(Pe))&&(_r(Pe,"queryBeforeStart",Oh,!1)?ve=sp(e.h,Ge):sp(e.h,Ge))),Te=m(c.keys()),We=Te.next();!We.done;We=Te.next())Ue=We.value,gt=c.get(Ue),sd(e.h,"Location",Ue,gt);if(bt=Wr(t,"BaseURL"),Ut=!1,e.h)for(vt=m(bt),jt=vt.next();!jt.done;jt=vt.next())ln=jt.value,pn=ln.attributes.serviceLocation,Ln=du(ln),pn&&Ln&&(sd(e.h,"BaseURL",pn,Ln),Ut=!0);if(Ut&&e.h||(Mn=bt.map(du),Ht=co(r,Mn)),qn=function(){return e.h&&Ut?up(e.h,"BaseURL"):Ht||[]},Yn=0,bt&&bt.length&&(Yn=_r(bt[0],"availabilityTimeOffset",wc)||0),Vn=e.g.dash.ignoreMinBufferTime,xr=0,Vn||(xr=_r(t,"minBufferTime",za)||0),e.G=_r(t,"minimumUpdatePeriod",za,-1),fi=_r(t,"availabilityStartTime",kf),Li=_r(t,"timeShiftBufferDepth",za),ci=e.g.dash.ignoreSuggestedPresentationDelay,gi=null,ci||(gi=_r(t,"suggestedPresentationDelay",za)),Gr=e.g.dash.ignoreMaxSegmentDuration,fo=null,Gr||(fo=_r(t,"maxSegmentDuration",za)),Fo=t.attributes.type||"static",e.j)for(ai=e.j.presentationTimeline,Hs=m(Object.values(e.m)),Uc=Hs.next();!Uc.done;Uc=Hs.next())Bc=Uc.value,Bc.segmentIndex&&Bc.segmentIndex.La(ai.qb());else yd=e.g.defaultPresentationDelay||1.5*xr,rl=gi!=null?gi:yd,ai=new tr(fi,rl,e.g.dash.autoCorrectDrift);return ai.Ec(Fo=="static"),ai.R()&&!isNaN(e.g.availabilityWindowOverride)&&(Li=e.g.availabilityWindowOverride),Li==null&&(Li=1/0),ai.je(Li),Vs=t.attributes.profiles||"",il={Eb:Fo!="static",presentationTimeline:ai,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Vs.split(",")},Ul=QB(e,il,qn,t),vd=Ul.duration,Ed=Ul.periods,Fo!="static"&&Ul.Xf||ai.Za(vd||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?ai.zg(e.C):e.C&&He("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ai.hf(fo||1),N(Es,e.l.Sf(Ed,il.Eb),2);case 2:return N(Es,ve,3);case 3:if(e.s&&(xr=0,zy=gi!=null?gi:e.g.defaultPresentationDelay,ai.Bf(zy)),e.j){e.j.variants=e.l.j,_d=e.l.Ve(),0<_d.length&&(e.j.textStreams=_d),e.j.imageStreams=e.l.i,e.i.filter(e.j),Es.u(4);break}if(e.j={presentationTimeline:ai,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:xr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:$B(t)},!ai.Kg()){Es.u(5);break}return Np=Wr(t,"UTCTiming"),N(Es,a8(e,qn,Np),6);case 6:if(Yy=Es.h,!e.i)return Es.return();ai.Ag(Yy);case 5:ai.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),$(Es)}})}function $B(e){var t=sa(e,"ServiceDescription");return t?(e=sa(t,"Latency"),t=sa(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function QB(e,t,n,r){var u=_r(r,"mediaPresentationDuration",za),c=[],f=0;r=Wr(r,"Period");for(var h=0;h<r.length;h++){var E=r[h],A=r[h+1],k=_r(E,"start",za,f),G=E.attributes.id,ne=_r(E,"duration",za),z=null;if(A){var ve=_r(A,"start",za);ve!=null&&(z=ve-k)}else u!=null&&(z=u-k);if(z==null&&(z=ne),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==r.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),f=JB(e,t,n,{start:k,duration:z,node:E,Ye:z==null||!A}),c.push(f),t.za.id&&z&&(e.L[t.za.id]=z),z==null){f=null;break}f=k+z}}return e.K=c.map(function(Pe){return Pe.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:f,Xf:!0}}function JB(e,t,n,r){t.za=l_(e,r.node,null,n),t.ha=r,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+r.start);var u=Wr(r.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())s8(e,r.start,r.duration,c.value,n);if(n=Wr(r.node,"AdaptationSet").map(function(k){return e8(e,t,k)}).filter(Pu),t.Eb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var f=c.next();!f.done;f=c.next())r.push(f.value)}if(r.length!=new Set(r).size)throw new pt(2,4,4018)}for(r=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),f=m(r);for(var h=f.next();!h.done;h=f.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var A=E.next();!A.done;h={Cd:h.Cd},A=E.next())h.Cd=A.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return Sa(k.Cd.codecs)==Sa(G.codecs)}}(h))}}}if(n=dy(e.g.disableAudio,r,"audio"),u=dy(e.g.disableVideo,r,"video"),c=dy(e.g.disableText,r,yr),r=dy(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new pt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function dy(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function e8(e,t,n){function r(vt){switch(vt){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=l_(e,n,t.za,null);var u=!1,c=Wr(n,"Role"),f=c.map(function(vt){return vt.attributes.value}).filter(Pu),h=void 0,E=t.ua.contentType==yr;E&&(h="subtitle"),c=m(c);for(var A=c.next();!A.done;A=c.next()){A=A.value;var k=A.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(A=A.attributes.value,A){case"main":u=!0;break;case"caption":case"subtitle":h=A}}var G;k=Wr(n,"EssentialProperty"),c=null;var ne=!1;A=!1,k=m(k);for(var z=k.next();!z.done;z=k.next()){z=z.value;var ve=z.attributes.schemeIdUri;ve=="http://dashif.org/guidelines/trickmode"?c=z.attributes.value:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=r(parseInt(z.attributes.value,10)):ve!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ve!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ve=="urn:mpeg:dash:ssr:2023"?ne=!0:A=!0)}var Pe=null;for(k=Wr(n,"SupplementalProperty"),k=m(k),z=k.next();!z.done;z=k.next())z=z.value,ve=z.attributes.schemeIdUri,ve=="http://dashif.org/guidelines/last-segment-number"?Pe=parseInt(z.attributes.value,10)-1:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=r(parseInt(z.attributes.value,10)));k=Wr(n,"Accessibility");var xe=new Map,Ge;for(k=m(k),z=k.next();!z.done;z=k.next())if(ve=z.value,z=ve.attributes.schemeIdUri,ve=ve.attributes.value,z=="urn:scte:dash:cc:cea-608:2015")if(z=1,ve!=null){ve=ve.split(";");for(var Te=m(ve),We=Te.next();!We.done;We=Te.next()){var Ue=We.value,gt=We=void 0;Ue.includes("=")?(Ue=Ue.split("="),We=Ue[0].startsWith("CC")?Ue[0]:"CC"+Ue[0],gt=Ue[1]||"und"):(We="CC"+z,ve.length==2?z+=2:z++,gt=Ue),xe.set(We,br(gt))}}else xe.set("CC1","und");else if(z=="urn:scte:dash:cc:cea-708:2015")if(z=1,ve!=null)for(ve=m(ve.split(";")),We=ve.next();!We.done;We=ve.next())We=We.value,Ue=Te=void 0,We.includes("=")?(We=We.split("="),Te="svc"+We[0],Ue=We[1].split(",")[0].split(":").pop()):(Te="svc"+z,z++,Ue=We),xe.set(Te,br(Ue));else xe.set("svc1","und");else z=="urn:mpeg:dash:role:2011"?ve!=null&&(f.push(ve),ve=="captions"&&(h="caption")):z=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ve=="1"?Ge="visually impaired":ve=="2"&&(Ge="hard of hearing"));if(A)return null;A=Wr(n,"ContentProtection");var bt=TR(A,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Ht=br(t.ua.language||"und"),Ut=n.attributes.label;if((A=Wr(n,"Label"))&&A.length&&(A=bi(A[0]))&&(Ut=A),A=Wr(n,"Representation"),n=A.map(function(vt){return(vt=t8(e,t,bt,h,Ht,Ut,u,f,xe,vt,Ge,Pe))&&(vt.hdr=vt.hdr||G,vt.fastSwitching=ne),vt}).filter(function(vt){return!!vt}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new pt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=KR(n[0].mimeType,n[0].codecs),E=m(n),z=E.next();!z.done;z=E.next())z.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),z=k.next();!z.done;z=k.next()){for(z=z.value,ve=m(bt.drmInfos),Te=ve.next();!Te.done;Te=ve.next())Te=Te.value,Te.keyIds=Te.keyIds&&z.keyIds?new Set([].concat(T(Te.keyIds),T(z.keyIds))):Te.keyIds||z.keyIds;e.g.dash.enableAudioGroups&&(z.groupId=E)}return A=A.map(function(vt){return vt.attributes.id}).filter(Pu),{id:E,contentType:t.ua.contentType,language:Ht,Dj:u,streams:n,drmInfos:bt.drmInfos,If:c,ki:A}}function t8(e,t,n,r,u,c,f,h,E,A,k,G){if(t.J=l_(e,A,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!o8(t.J))return null;var ne=t.ha.start;t.bandwidth=_r(A,"bandwidth",Ls)||0;var z=t.J.contentType,ve=z==yr||z=="application";z=z=="image";try{var Pe=void 0;if(n.xe){var xe=t.J.nb,Ge=co(xe(),[n.xe.Rh]),Te=Oi(Ge,e.g.retryParameters);Pe={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var vt,jt,ln;return Oe(function(pn){if(pn.g==1)return N(pn,c_(e,Te,6),2);if(pn.g!=3){if(vt=pn.h,!vt.data||vt.data.byteLength!=16)throw new pt(2,4,4049);return jt={name:"AES-CBC"},ln=Pe,N(pn,p.crypto.subtle.importKey("raw",vt.data,jt,!0,["decrypt"]),3)}ln.cryptoKey=pn.h,Pe.fetchKey=void 0,$(pn)})}}}if(xe=function(vt,jt,ln,pn){return u8(e,vt,jt,ln,pn)},t.J.pd)var We=IB(t,xe,Pe);else if(t.J.Jb)We=bB(t,e.m,Pe);else if(t.J.qd)We=MB(t,xe,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Pe,G);else{var Ue=t.ha.duration||0,gt=t.J.nb;We={vc:function(){var vt=oE(ne,Ue,gt());return vt.tc(function(jt){jt.mimeType=t.J.mimeType,jt.codecs=t.J.codecs}),Promise.resolve(vt)}}}}catch(vt){if((ve||z)&&vt.code==4002)return null;throw vt}G=Wr(A,"ContentProtection"),G=lB(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),xe=!1,Wr(A,"SupplementalProperty").some(function(vt){return vt.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&vt.attributes.value=="JOC"})&&(xe=!0),Ge=!1,ve&&(Ge=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var bt;if(z&&((A=Wr(A,"EssentialProperty").find(function(vt){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(vt.attributes.schemeIdUri)}))&&(bt=A.attributes.value),!bt))return null;var Ht;A=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(A.includes("hvc1.2.4.L153.B0")||A.includes("hev1.2.4.L153.B0"))&&(Ht="PQ"),ve=t.J.id?t.za.id+","+t.J.id:"";var Ut=ve&&e.m[ve]?e.m[ve]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Ut.segmentIndex&&(Ut.segmentIndex.release(),Ut.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:A,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:Ge,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:xe,closedCaptions:E,hdr:Ht,videoLayout:void 0,tilesLayout:bt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(t.J.mimeType,t.J.codecs)])};return Ut.createSegmentIndex=function(){var vt;return Oe(function(jt){if(jt.g==1)return Ut.segmentIndex?jt.u(0):(vt=Ut,N(jt,We.vc(),3));vt.segmentIndex=jt.h,$(jt)})},ve&&t.Eb&&!e.m[ve]&&(e.m[ve]=Ut),Ut}function n8(e){var t,n;Oe(function(r){switch(r.g){case 1:return t=0,ce(r,2),N(r,s_(e),4);case 4:t=r.h,ye(r,3);break;case 2:if(n=be(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),u_(e,t),$(r)}})}function u_(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function l_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},r=r||n.nb;var u=t.attributes.id,c=Wr(t,"BaseURL"),f,h=!1;if(e.h)for(var E=m(c),A=E.next();!A.done;A=E.next()){var k=A.value;A=k.attributes.serviceLocation,k=du(k),A&&k&&(sd(e.h,u,A,k),h=!0)}h&&e.h||(f=c.map(du)),E=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",fm)||n.frameRate,ne=t.attributes.sar||n.pixelAspectRatio,z=r8(Wr(t,"InbandEventStream"),n.emsgSchemeIdUris),ve=Wr(t,"AudioChannelConfiguration");ve=i8(ve)||n.de;var Pe=_r(t,"audioSamplingRate",bo)||n.audioSamplingRate;E||(E=KR(A,k));var xe=sa(t,"SegmentBase"),Ge=sa(t,"SegmentTemplate"),Te=xe&&_r(xe,"availabilityTimeOffset",wc)||0,We=Ge&&_r(Ge,"availabilityTimeOffset",wc)||0,Ue=c&&c.length&&_r(c[0],"availabilityTimeOffset",wc)||0;return Te=n.Qb+Ue+Te+We,We=null,(Ue=sa(t,"SegmentSequenceProperties"))&&(Ue=sa(Ue,"SAP"))&&(We=_r(Ue,"cadence",Vu)),{nb:function(){return co(r(),c.length?e.h&&h?up(e.h,u):f||[]:[])},pd:xe||n.pd,Jb:sa(t,"SegmentList")||n.Jb,qd:Ge||n.qd,width:_r(t,"width",bo)||n.width,height:_r(t,"height",bo)||n.height,contentType:E,mimeType:A,codecs:k,frameRate:G,pixelAspectRatio:ne,emsgSchemeIdUris:z,id:u,language:t.attributes.lang,de:ve,audioSamplingRate:Pe,Qb:Te,xf:We||n.xf}}function r8(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function i8(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function o8(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==yr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function VR(e,t,n,r){var u,c,f,h,E,A,k;return Oe(function(G){if(G.g==1)return u=[Io(n)],c=co(t(),u),f=Oi(c,e.g.retryParameters),f.method=r,h=e.i.networkingEngine.request(4,f),cu(e.F,h),N(G,h.promise,2);if(E=G.h,r=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);A=E.headers.date}else A=Kr(E.data);return k=Date.parse(A),isNaN(k)?G.return(0):G.return(k-Date.now())})}function a8(e,t,n){var r,u,c,f,h,E,A,k;return Oe(function(G){switch(G.g){case 1:r=n.map(function(ne){return{scheme:ne.attributes.schemeIdUri,value:ne.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),f=c.next();case 2:if(f.done){G.u(4);break}switch(h=f.value,ce(G,5),E=h.scheme,A=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(A),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":He("NTP UTCTiming scheme is not supported");break;default:He("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return N(G,VR(e,t,A,"HEAD"),10);case 10:return G.return(G.h);case 8:return N(G,VR(e,t,A,"GET"),11);case 11:return G.return(G.h);case 9:ye(G,3);break;case 5:be(G);case 3:f=c.next(),G.u(2);break;case 4:return He("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function s8(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",f=r.attributes.value||"",h=_r(r,"timescale",bo)||1;r=m(Wr(r,"Event"));for(var E=r.next();!E.done;E=r.next()){E=E.value;var A=_r(E,"presentationTime",bo)||0,k=_r(E,"duration",bo)||0;A=A/h+t,k=A+k/h,n!=null&&(A=Math.min(A,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:f,startTime:A,endTime:k,id:E.attributes.id||"",eventElement:Lh(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function u8(e,t,n,r,u){var c,f,h,E;return Oe(function(A){return A.g==1?(c=Ka,f=u?0:1,h=qh(t,n,r,e.g.retryParameters),N(A,c_(e,h,c,{type:f}),2)):(E=A.h,A.return(E.data))})}function KR(e,t){return t=Si(e,t),El(t)?yr:e.split("/")[0]}function c_(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),cu(e.F,t),t.promise}te("shaka.dash.DashParser",fy),ke["application/dash+xml"]=function(){return new fy},ke["video/vnd.mpeg.dash.mpd"]=function(){return new fy};function hy(){}te("shaka.dependencies",hy),hy.has=function(e){return f_.has(e)},hy.add=function(e,t){if(!YR[e])throw Error(e+" is not supported");e==zR?dr("mux.js","mux.js is no longer used in Shaka Player."):f_.set(e,function(){return t})};var zR="muxjs",YR={Ej:zR,ISOBoxer:"ISOBoxer"};hy.Allowed=YR;var f_=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function WR(e,t,n){this.type=e,this.g=t,this.segments=n||null}function XR(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}XR.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function $R(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function pp(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=pp(e,t))?e.value:n||null}function ii(e,t){if(e=pp(e,t),!e)throw new pt(2,4,4023,t);return e.value}function QR(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function JR(e,t){this.name=e,this.value=t}function qs(e,t){return e.filter(function(n){return n.name==t})}function eN(e,t){return e.filter(function(n){return ii(n,"TYPE")==t})}function Ro(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function ld(e,t,n){return n=n===void 0?0:n,(e=Ro(e,t))?Number(e.value):n}function Ol(e,t,n){return t?tN(e,[t],n):[]}function tN(e,t,n){if(!t.length)return[];t=co(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=e,c=u.push,f=r.value;if((r=n)&&r.size){f=String(f).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=f.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var A=E.slice(2,E.length-1),k=r.get(A);if(k)f=f.replace(E,k);else throw new pt(2,4,4039,A)}}r=f}else r=f;c.call(u,r)}return e}function Oc(e){this.h=e||"",this.g=0}function cd(e){Ll(e,/[ \t]+/gm)}function Ll(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Lc(e){return e.g==e.h.length?null:(e=Ll(e,/[^ \t\n]*/gm))?e[0]:null}function l8(){this.g=0}function d_(e,t){t=Kr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new pt(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=h_(e,c),--e.g,nN.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var f=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(f)||r)r=!1;else{if(f=h_(e,f),c8.includes(f.name)){if(t!=1)throw new pt(2,4,4017);f=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,f=m(f);for(var E=f.next();!E.done;E=f.next())E=E.value,/^(#EXT)/.test(E)?(E=h_(e,E),nN.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):r.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&r.push(h),n.push(new QR(E,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new QR("",r,c))),new WR(t,u,n)}u.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new JR("URI",h)),r=!0)}}return new WR(t,u)}function h_(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new pt(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new Oc(r);var c;(c=Ll(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Ll(r,f);)n.push(new JR(c[1],c[2]||c[3])),cd(r)}return new XR(e,t,n,u)}var nN="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),c8="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function rN(){}function iN(e){try{var t=p_(e);return Gu({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return lu(n)}}function p_(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new pt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new pt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=qo(e):u=qa(e),{data:u,contentType:n}}te("shaka.net.DataUriPlugin",rN),rN.parse=iN,Ho("data",iN);function oN(e){var t=wa(e),n=t.split("/")[0];return e=Do(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function f8(e,t){function n(Te){return r(Te.name)}function r(Te){switch(Te=Te.toLowerCase(),Te){case"avc1":case"avc3":c.push(Te+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Te+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Te+".05.04"),h=!0;break;case"vp09":c.push(Te+".00.10.08"),h=!0;break;case"av01":c.push(Te+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),f=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Te),f=!0}}var u=[],c=[],f=!1,h=!1,E=null,A=null,k=null,G=null,ne=null,z=null,ve;if(new kr().box("moov",vr).box("trak",vr).O("tkhd",function(Te){Te=Zt(Te.reader,Te.version),A=String(Te.height),k=String(Te.width)}).box("mdia",vr).O("mdhd",function(Te){E=At(Te.reader,Te.version).language}).box("minf",vr).box("stbl",vr).O("stsd",fu).box("mp4a",function(Te){var We=Te.reader;We.skip(6),We.skip(2),We.skip(8);var Ue=We.ra();We.skip(2),We.skip(2),We.skip(2),We=We.ra()+We.ra()/65536,G=Ue,ne=We,Te.reader.ka()?vr(Te):n(Te)}).box("esds",function(Te){Te=Te.reader;for(var We="mp4a",Ue,gt;Te.ka();){Ue=Te.P();for(var bt=Te.P();bt&128;)bt=Te.P();if(Ue==3)Te.ra(),bt=Te.P(),bt&128&&Te.ra(),bt&64&&Te.skip(Te.P()),bt&32&&Te.ra();else if(Ue==4)gt=Te.P(),Te.skip(12);else if(Ue==5)break}gt&&(We+="."+mn(gt),Ue==5&&Te.ka()&&(Ue=Te.P(),gt=(Ue&248)>>3,gt===31&&Te.ka()&&(gt=32+((Ue&7)<<3)+((Te.P()&224)>>5)),We+="."+gt)),u.push(We),f=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Te){ve=Te.name,wi(Te)}).box("avc3",function(Te){ve=Te.name,wi(Te)}).box("hev1",function(Te){ve=Te.name,wi(Te)}).box("hvc1",function(Te){ve=Te.name,wi(Te)}).box("dva1",function(Te){ve=Te.name,wi(Te)}).box("dvav",function(Te){ve=Te.name,wi(Te)}).box("dvh1",function(Te){ve=Te.name,wi(Te)}).box("dvhe",function(Te){ve=Te.name,wi(Te)}).box("vp09",function(Te){ve=Te.name,wi(Te)}).box("av01",function(Te){ve=Te.name,wi(Te)}).box("avcC",function(Te){var We=ve||"";switch(ve){case"dvav":We="avc3";break;case"dva1":We="avc1"}Te=Te.reader,Te.skip(1),Te=We+"."+mn(Te.P())+mn(Te.P())+mn(Te.P()),c.push(Te),h=!0}).box("hvcC",function(Te){var We=ve||"";switch(ve){case"dvh1":We="hvc1";break;case"dvhe":We="hev1"}var Ue=Te.reader;Ue.skip(1),Te=Ue.P();var gt=["","A","B","C"][Te>>6],bt=Te&31,Ht=Ue.M(),Ut=(Te&32)>>5?"H":"L";Te=[Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P()],Ue=Ue.P();for(var vt=0,jt=0;32>jt&&(vt|=Ht&1,jt!=31);jt++)vt<<=1,Ht>>=1;for(We=We+("."+gt+bt)+("."+mn(vt,!0)),We+="."+Ut+Ue,gt="",bt=Te.length;bt--;)((Ut=Te[bt])||gt)&&(gt="."+Ut.toString(16).toUpperCase()+gt);We+=gt,c.push(We),h=!0}).box("dvcC",function(Te){var We=ve||"";switch(ve){case"hvc1":We="dvh1";break;case"hev1":We="dvhe";break;case"avc1":We="dva1";break;case"avc3":We="dvav"}var Ue=Te.reader;Ue.skip(2),Te=Ue.P(),Ue=Ue.P(),c.push(We+"."+Pn(Te>>1&127)+"."+Pn(Te<<5&32|Ue>>3&31)),h=!0}).O("vpcC",function(Te){var We=ve||"",Ue=Te.reader;Te=Ue.P();var gt=Ue.P();Ue=Ue.P()>>4&15,c.push(We+"."+Pn(Te)+"."+Pn(gt)+"."+Pn(Ue)),h=!0}).box("av1C",function(Te){var We=ve||"",Ue=Te.reader;Ue.skip(1),Te=Ue.P(),Ue=Ue.P();var gt=Te>>>5,bt=(Ue&64)>>6;c.push(We+"."+gt+"."+Pn(Te&31)+(Ue>>>7?"H":"M")+"."+Pn(gt===2&&bt?(Ue&32)>>5?12:10:bt?10:8)+"."+((Ue&16)>>4)+"."+((Ue&8)>>3)+((Ue&4)>>2)+(Ue&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",Dh).box("encv",wi).box("sinf",vr).box("frma",function(Te){Te=un(Te.reader).Ea,r(Te)}).box("colr",function(Te){Te=Te.reader;var We=null,Ue=Te.sb(4),gt=String.fromCharCode(Ue[0]);if(gt+=String.fromCharCode(Ue[1]),gt+=String.fromCharCode(Ue[2]),gt+=String.fromCharCode(Ue[3]),gt==="nclx")switch(Te.ra(),Ue=Te.ra(),Te.ra(),Ue){case 1:case 6:case 13:case 14:case 15:We="SDR";break;case 16:We="PQ";break;case 18:We="HLG"}z=We}).parse(e||t,!0),!u.length&&!c.length)return null;var Pe=f&&!h,xe=new Map;if(h){var Ge=new St("video/mp4");for(e&&Ge.init(e),Ge.i(t),e=m(Ge.j()),t=e.next();!t.done;t=e.next())t=t.value,xe.set(t,t);Ge.h()}return{type:Pe?"audio":"video",mimeType:Pe?"audio/mp4":"video/mp4",codecs:aN(u.concat(c)).join(", "),language:E,height:A,width:k,channelCount:G,sampleRate:ne,closedCaptions:xe,Lf:z}}function aN(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=Ha(r);t.has(u)||(n.push(r),t.add(u))}return t=ch("audio",n),r=ch("video",n),e=ch(yr,n),r=d8(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function d8(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Ot('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function h8(e){var t=null;return new kr().box("moov",vr).box("trak",vr).box("mdia",vr).box("minf",vr).box("stbl",vr).O("stsd",fu).box("encv",wi).box("enca",Dh).box("sinf",vr).box("schi",vr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=xs(n.sb(16))}).parse(e,!0),t}function py(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(yr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new l8,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){O8(e)}),this.qa=Ey,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new bl,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=py.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,r;return Oe(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),N(u,S_(n,[e]),2)):u.g!=3?(r=u.h,n.aa=r.uri,N(u,m8(n,r.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,r,u,c,f,h,E,A;return Oe(function(k){if(k.g==1){if(!Ca(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,r=n.filter(function(G){return G.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())f=c.value,t.push(p8(e,f));return N(k,Promise.all(t),2)}yN(e,r.map(function(G){return G.stream})),h=r.some(function(G){return G.fd==0}),r.length&&!h&&(E=L8,yy(e,E.Pg),A=r.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(A))),e.i.updateDuration()),h&&m_(e),$(k)})};function g_(e,t){return Ca(e)?e.K.get(t.type):t.$d}function p8(e,t){var n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn;return Oe(function(qn){if(qn.g==1){for(n=[],r=m(t.$()),u=r.next();!u.done;u=r.next())c=u.value,f=new si(c),h=f.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),ta(h)&&hr(f,h),n.push(f.toString());return N(qn,S_(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(A=d_(e.Ga,E.data),A.type!=1)throw new pt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=qs(A.g,"EXT-X-DEFINE"),ne=cN(e,G,k),z=t.stream,ve=g_(e,t),N(qn,TN(e,A,z.mimeType,t.$,ne),3)}Pe=qn.h,xe=Pe.keyIds,Ge=Pe.drmInfos,Te=function(Yn,Vn){return Yn.size===Vn.size&&[].concat(T(Yn)).every(function(xr){return Vn.has(xr)})},Te(z.keyIds,xe)||(z.keyIds=xe,z.drmInfos=Ge,e.i.newDrmInfo(z)),We=IN(e,A,z,ve,ne,t.$,t.type),Ue=We.segments,(gt=We.bandwidth)&&(z.bandwidth=gt),z.segmentIndex.kd(Ue,e.l.qb()),Ue.length&&(bt=ld(A.g,"EXT-X-MEDIA-SEQUENCE",0),Ut=(Ht=Ro(A.g,"EXT-X-SKIP"))?Number(zn(Ht,"SKIPPED-SEGMENTS")):0,vt=EN(bt,Ue),jt=vt.gb,ln=vt.hb,t.gb=jt+Ut,t.hb=ln,pn=ve.get(bt),z.segmentIndex.La(pn)),Ln=Ue[0],t.fc=Ln.startTime,Mn=Ue[Ue.length-1],t.yb=Mn.endTime,Ro(A.g,"EXT-X-ENDLIST")&&(t.fd=!0),v_(e,A),$(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function sN(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,f=g_(e,u);if(c=c.g[0]||null){f=m(f);for(var h=f.next();!h.done;h=f.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,my(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(r.g.splice(0,u),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),uN(e,n,r)))}function g8(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;r!=null&&r.h!=null&&(e.T=Math.min(e.T,r.h))}}if(t=e.T,t!=1/0){for(r=m(e.h.values()),n=r.next();!n.done;n=r.next())if(n=n.value,!my(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)fe("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(uN(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function uN(e,t,n){t.fc+=n,t.yb+=n,e=g_(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function m8(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn,qn,Yn,Vn,xr,fi,Li,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return r=d_(e.Ga,t),u=qs(r.g,"EXT-X-DEFINE"),c=[],f=[],h=[],E=function(){return[n]},r.type==1?N(Gr,lN(e,r,E),7):(y8(e,u),A=qs(r.g,"EXT-X-MEDIA"),k=qs(r.g,"EXT-X-STREAM-INF"),G=qs(r.g,"EXT-X-IMAGE-STREAM-INF"),ne=qs(r.g,"EXT-X-I-FRAME-STREAM-INF"),z=qs(r.g,"EXT-X-SESSION-KEY"),ve=qs(r.g,"EXT-X-SESSION-DATA"),Pe=qs(r.g,"EXT-X-CONTENT-STEERING"),E8(e,ve),N(Gr,_8(e,Pe),4));case 4:return v8(e,k),b8(e,A),N(Gr,A8(e,k,z,A,E,e.o),5);case 5:return c=Gr.h,f=T8(e,A),N(Gr,S8(e,G,ne),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return xe=Gr.h,Ge=xe.type,Te=xe.mimeType,We=xe.codecs,Ue=xe.language,gt=xe.height,bt=xe.width,Ht=xe.channelCount,Ut=xe.sampleRate,vt=xe.closedCaptions,jt=xe.Lf,N(Gr,vN(e,e.A++,r,E,n,We,Ge,Ue,!0,"Media Playlist",Ht,vt,null,!1,Ut,!1,Te),8);case 8:ln=Gr.h,e.h.set(n,ln),Ge=="video"&&CN(ln.stream,bt,gt,null,jt,null),c.push({id:0,language:br(Ue||"und"),disabledUntilTime:0,primary:!0,audio:Ge=="audio"?ln.stream:null,video:Ge=="video"?ln.stream:null,bandwidth:ln.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new pt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),r.type==1&&(Ca(e)&&(wN(e,r),pn=e.m,e.s.X(pn)),Ln=Array.from(e.h.values()),y_(e,Ln),m_(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:f,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Vn=Yn.value,Vn.audio&&Vn.audio.codecs===""&&Mn.push(Vn.audio.createSegmentIndex()),Vn.video&&Vn.video.codecs===""&&Mn.push(Vn.video.createSegmentIndex());return N(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(xr=[],fi=c[0],Li=m([fi.video,fi.audio]),ci=Li.next();!ci.done;ci=Li.next())(gi=ci.value)&&!gi.segmentIndex&&xr.push(gi.createSegmentIndex());if(0<xr.length)return N(Gr,Promise.all(xr),0)}Gr.u(0)}})}function lN(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){switch(gt.g){case 1:if(r=oN(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return gt.return(r);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],f=Ol(n(),t.segments[0].h),h=f[0],E=new si(h),A=E.Pa.split(".").pop(),k=RN[A])return gt.return(oN(k));if(G=Ka,ne=null,z=E_(e,t,c.g,n),e.Y.clear(),!z){gt.u(2);break}return ve=qh(z.$(),z.ac(),z.Yb(),e.g.retryParameters),N(gt,kl(e,ve,G,{type:0}),3);case 3:Pe=gt.h,ne=Pe.data;case 2:return xe=Oi(f,e.g.retryParameters),N(gt,kl(e,xe,G,{type:1}),4);case 4:if(Ge=gt.h,(Te=Ge.headers["content-type"])&&(Te=Te.split(";")[0].toLowerCase()),A=="ts"||Te=="video/mp2t"){var bt=Ge.data,Ht=Qn(bt);Ht=new Ve().parse(Ht);var Ut=Ht.bd();Ht=Ht.We();var vt=[],jt=!1,ln=!1;switch(Ut.audio){case"aac":case"aac-loas":vt.push("mp4a.40.2"),jt=!0;break;case"mp3":vt.push("mp4a.40.34"),jt=!0;break;case"ac3":vt.push("ac-3"),jt=!0;break;case"ec3":vt.push("ec-3"),jt=!0;break;case"opus":vt.push("opus"),jt=!0}switch(Ut.video){case"avc":Ht.Ea?vt.push(Ht.Ea):vt.push("avc1.42E01E"),ln=!0;break;case"hvc":Ht.Ea?vt.push(Ht.Ea):vt.push("hvc1.1.6.L93.90"),ln=!0;break;case"av1":vt.push("av01.0.01M.08"),ln=!0}if(vt.length){if(Ut=jt&&!ln,jt=new Map,ln){ln=new St("video/mp2t"),ln.i(bt),bt=m(ln.j());for(var pn=bt.next();!pn.done;pn=bt.next())pn=pn.value,jt.set(pn,pn);ln.h()}Ht={type:Ut?"audio":"video",mimeType:"video/mp2t",codecs:vt.join(", "),language:null,height:Ht.height,width:Ht.width,channelCount:null,sampleRate:null,closedCaptions:jt,Lf:null}}else Ht=null;if(We=Ht)return gt.return(We)}else if((A=="mp4"||A=="cmfv"||A=="m4s"||Te=="video/mp4"||Te=="audio/mp4"||Te=="video/iso.segment")&&(Ue=f8(ne,Ge.data)))return gt.return(Ue);return gt.return(r)}})}function m_(e){if(Ca(e)){if(e.qa==_y){for(var t,n=t=1/0,r=m(e.h.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za(mN(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function y8(e,t){var n=new si(e.aa).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),r&&c&&(e.o.has(r)||e.o.set(r,c)),u&&(r=n.get(u)[0])&&!e.o.has(r)&&e.o.set(u,r)}}function cN(e,t,n){n=new si(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,f=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),f&&h&&(r.has(f)||r.set(f,h)),u&&(f=n.get(u)[0])&&!r.has(f)&&r.set(u,f),c&&(u=e.o.get(c))&&r.set(c,u)}return r}function v8(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"AUDIO");n=zn(r,"VIDEO");var c=zn(r,"SUBTITLES");if(r=fN(e,r),c){var f=Co(yr,r);e.G.set(c,f),gn(r,f)}u&&(c=Co("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Co("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function E8(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"DATA-ID");n=zn(r,"URI");var c=zn(r,"LANGUAGE");r=zn(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",Ol([e.aa],n,e.o)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function _8(e,t){var n,r,u,c,f,h;return Oe(function(E){if(!e.i||!e.g)return E.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,f=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),f&&h){e.j=new ad(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=f,n=sp(e.j,h);break}return N(E,n,0)})}function T8(e,t){var n=eN(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return gN(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=ii(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=__(yr,r)||T_(yr),fd(c.stream)}}return t.filter(function(f){return f})}function fd(e){e.fullMimeTypes=new Set([Si(e.mimeType,e.codecs)])}function S8(e,t,n){var r,u;return Oe(function(c){return c.g==1?(r=t.map(function(f){var h,E;return Oe(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(ce(A,2),N(A,R8(e,f),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(E=be(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw E})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=ii(f,"URI"),E=zn(f,"CODECS")||"";if(e.h.has(h))var A=e.h.get(h);else{var k=zn(f,"LANGUAGE"),G=zn(f,"NAME"),ne=zn(f,"CHARACTERISTICS"),z=gy(e,e.A++,[h],E,"image",k,!1,G,null,null,ne,!1,null,!1),ve=zn(f,"RESOLUTION"),Pe=m(ve?ve.split("x"):[null,null]),xe=Pe.next().value,Ge=Pe.next().value;z.stream.width=Number(xe)||void 0,z.stream.height=Number(Ge)||void 0;var Te=zn(f,"BANDWIDTH");Te&&(z.stream.bandwidth=Number(Te)),e.h.set(h,z),A=z}return f=A,f.stream.codecs!=="mjpg"?null:f.stream}catch(We){if(e.g.hls.ignoreImageStreamFailures)return null;throw We}})),N(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(f){return f})))})}function w8(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=$R(u);r[c]?r[c].push(u):r[c]=[u]}for(var f in r)gN(e,r[f],n)}function A8(e,t,n,r,u,c){var f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn,qn,Yn,Vn,xr,fi,Li;return Oe(function(ci){switch(ci.g){case 1:if(f=[],h=new Set,!(0<n.length)){ci.u(2);break}E=m(n),A=E.next();case 3:if(A.done){ci.u(2);break}if(k=A.value,G=ii(k,"METHOD"),ne=zn(k,"KEYFORMAT")||"identity",z=null,G=="NONE"||vy(G)){ci.u(4);break}if(ne!="identity"){z=(ve=xN[ne])?ve(k,""):null,ci.u(6);break}return N(ci,bN(e,k,"",u,null,c),8);case 8:z=ci.h;case 6:if(z){if(z.keyIds)for(Pe=m(z.keyIds),xe=Pe.next();!xe.done;xe=Pe.next())Ge=xe.value,h.add(Ge);f.push(z)}case 4:A=E.next(),ci.u(3);break;case 2:for(Te={},We=m(t),Ue=We.next();!Ue.done;Ue=We.next())gt=Ue.value,bt=$R(gt),Te[bt]?Te[bt].push(gt):Te[bt]=[gt];Ht=[];for(Ut in Te)vt=Te[Ut],jt=vt[0],ln=zn(jt,"FRAME-RATE"),pn=Number(zn(jt,"AVERAGE-BANDWIDTH"))||Number(ii(jt,"BANDWIDTH")),Ln=zn(jt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Vn=zn(jt,"VIDEO-RANGE"),(xr=zn(jt,"REQ-VIDEO-LAYOUT"))&&xr.includes(",")&&(fi=xr.split(",").filter(function(gi){return gi=="CH-STEREO"||gi=="CH-MONO"}),xr=fi[0]),xr=xr||"CH-MONO",Li=I8(e,vt,r,pn),Ht.push.apply(Ht,T(C8(e,Li.audio,Li.video,pn,qn,Yn,ln,Vn,xr,f,h)));return ci.return(Ht.filter(function(gi){return gi!=null}))}})}function I8(e,t,n,r){for(var u={audio:[],video:[]},c=new Map,f=[],h=!1,E=!1,A=m(t),k=A.next();!k.done;k=A.next()){var G=k.value;k=zn(G,"AUDIO");var ne=zn(G,"VIDEO"),z=k||ne;z&&(f.includes(z)||f.push(z),(G=zn(G,"PATHWAY-ID"))&&c.set(z,G),k?h=!0:ne&&(E=!0))}f.length&&n.length&&(A=n.filter(function(xe){return f.includes(ii(xe,"GROUP-ID"))}),w8(e,A,c)),A=(c=f.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(A)):E&&u.video.push.apply(u.video,T(A)),k=!1;var ve=t.map(function(xe){return ii(xe,"URI")});if(E=u.audio.find(function(xe){return xe&&xe.$().find(function(Ge){return ve.includes(Ge)})}),h=fN(e,t[0]),ne=Co("video",h),(z=Co("audio",h))&&!ne?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&z&&ne?(E="video",h=[[ne,z].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Pe=G=z=ne=k=null;!A.length&&(n=n.find(function(xe){var Ge=zn(xe,"URI")||"",Te=zn(xe,"TYPE");return xe=ii(xe,"GROUP-ID"),Te!="SUBTITLES"&&Ge==""&&f.includes(xe)}))&&(k=zn(n,"LANGUAGE"),ne=zn(n,"NAME"),z=dN(n),pN(n),G=zn(n,"CHARACTERISTICS"),Pe=hN(n)),e=N8(e,t,h,E,k,ne,z,G,Pe),c&&(e.stream.groupId=c),A.length||(e.stream.bandwidth=r),u[e.stream.type]=[e]}return u}function fN(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),aN(e)}function dN(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function hN(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function pN(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function C8(e,t,n,r,u,c,f,h,E,A,k){for(var G=m(n),ne=G.next();!ne.done;ne=G.next())CN(ne.value.stream,u,c,f,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,f=m(n),h=f.next();!h.done;h=f.next()){var z=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=k),(E=z?z.stream:null)&&(E.drmInfos=A,E.keyIds=k),G=c?c.stream.drmInfos:null,ne=z?z.stream.drmInfos:null,z=z?z.$().sort().join(","):"";var ve=c?c.$().sort().join(","):"";z=z+" - "+ve,h&&E&&!re(G,ne)||e.Ia.has(z)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(z))}return u}function b8(e,t){t=eN(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"LANGUAGE");n=br(u||"und"),u||(u=zn(r,"NAME"))&&(n=u),u=ii(r,"GROUP-ID"),r=ii(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function gN(e,t,n){for(var r=[],u=[],c=new Map,f=m(t),h=f.next();!h.done;h=f.next()){var E=h.value;h=ii(E,"URI"),E=ii(E,"GROUP-ID"),r.push(h),u.push(E),c.set(E,h)}if(f=u.sort().join(","),h=t[0],t="",E=ii(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=yr),E==yr)t=zn(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=r.sort().join(","),e.h.has(u))return e.h.get(u);if(A=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&sd(e.j,A,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?dN(h):null;var ne=E=="audio"?pN(h):!1,z=zn(h,"CHARACTERISTICS"),ve=zn(h,"FORCED")=="YES";return h=E=="audio"?hN(h):null,r=gy(e,A,r,t,E,n,k,c,G,null,z,ve,h,ne),r.stream&&(r.stream.groupId=f),e.H.has(f)?e.H.get(f).push(r):e.H.set(f,[r]),e.h.set(u,r),r}function R8(e,t){var n,r,u,c,f,h,E,A,k,G;return Oe(function(ne){return ne.g==1?(n=ii(t,"URI"),r=zn(t,"CODECS","jpeg")||"",e.h.has(n)?ne.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),f=zn(t,"CHARACTERISTICS"),h=gy(e,e.A++,[n],r,"image",u,!1,c,null,null,f,!1,null,!1),(E=zn(t,"RESOLUTION"))?N(ne,h.stream.createSegmentIndex(),3):ne.u(2))):(ne.g!=2&&(A=h.stream.segmentIndex.get(0),k=A.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),ne.return(h))})}function N8(e,t,n,r,u,c,f,h,E){for(var A=e.A++,k=[],G=m(t),ne=G.next();!ne.done;ne=G.next()){var z=ne.value;ne=ii(z,"URI"),z=zn(z,"PATHWAY-ID"),e.j&&z&&sd(e.j,A,z,ne),k.push(ne)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),r=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Mu(r,n),r=gy(e,A,k,n,r,u,!1,c,f,t,h,!1,E,!1),e.h.set(G,r),r}function gy(e,t,n,r,u,c,f,h,E,A,k,G,ne,z){function ve(gt){var bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn,qn,Yn,Vn,xr,fi,Li,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return bt=Te.$(),N(Gr,S_(e,Te.$(),!0),2);case 2:if(Ht=Gr.h,gt.aborted)return Gr.return();if(Ut=Ht.uri,Ut==Ht.originalUri||bt.includes(Ut)||Ge.push(Ut),vt=d_(e.Ga,Ht.data),jt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return N(Gr,lN(e,vt,Pe),4);case 4:ln=Gr.h,jt=ln.mimeType,r=ln.codecs;case 3:return pn=Ca(e),N(Gr,vN(e,0,vt,Pe,Ut,r,u,c,f,h,E,A,k,G,ne,z,jt),5);case 5:if(Ln=Gr.h,gt.aborted)return Gr.return();if(Mn=Ln.stream,Ca(e)&&!pn&&wN(e,vt),Te.fc=Ln.fc,Te.yb=Ln.yb,Te.Hd=Ln.Hd,Te.Gd=Ln.Gd,Te.fd=Ln.fd,Te.$d=Ln.$d,Te.gb=Ln.gb,Te.hb=Ln.hb,Te.df=!0,xe.segmentIndex=Mn.segmentIndex,xe.encrypted=Mn.encrypted,xe.drmInfos=Mn.drmInfos,xe.keyIds=Mn.keyIds,xe.mimeType=Mn.mimeType,xe.bandwidth=xe.bandwidth||Mn.bandwidth,xe.codecs=xe.codecs||Mn.codecs,fd(xe),xe.drmInfos.length&&e.i.newDrmInfo(xe),qn=vi,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Vn=Yn.next();!Vn.done;Vn=Yn.next())xr=Vn.value,xr.df||xr.type!=u||(xr.stream.mimeType=Mn.mimeType,fd(xr.stream));u==qn.ma&&(fi=Mn.segmentIndex.get(0))&&fi.ca&&(xe.mimeType="application/mp4",fd(xe)),x8(e)&&(e.mb?y_(e,[Te]):(e.mb=!0,Li=Array.from(e.h.values()),ci=Li.filter(function(fo){return fo.stream.segmentIndex}),y_(e,ci),m_(e),gi=e.m,0<gi&&e.s.X(gi))),$(Gr)}})}function Pe(){return e.j&&1<n.length?up(e.j,t):Ge.concat(tN([e.aa],n,e.o))}var xe=_N(e,r,u,c,f,h,E,A,k,G,ne,z),Ge=[],Te={stream:xe,type:u,tg:Ge,$:Pe,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},We=null,Ue=new AbortController;return xe.createSegmentIndex=function(){return We||(Ue=new AbortController,We=new Promise(function(gt){gt(ve(Ue.signal))}))},xe.closeSegmentIndex=function(){We&&!xe.segmentIndex&&Ue.abort(),xe.segmentIndex&&(xe.segmentIndex.release(),xe.segmentIndex=null),We=null},Te}function mN(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function yN(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function y_(e,t){if(!Ca(e))for(var n=mN(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.sc(0,n);yN(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?sN(e,t):(g8(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&sN(e,t))}function my(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function x8(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function vN(e,t,n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe){var Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn,qn,Yn,Vn,xr,fi,Li,ci,gi,Gr;return Oe(function(fo){switch(fo.g){case 1:if(n.type!=1)throw new pt(2,4,4017);Ge=qs(n.g,"EXT-X-DEFINE"),Te=cN(e,Ge,u);var Fo=Ro(n.g,"EXT-X-PLAYLIST-TYPE"),ai=Ro(n.g,"EXT-X-ENDLIST");if(ai=Fo&&Fo.value=="VOD"||ai,Fo=Fo&&Fo.value=="EVENT"&&!ai,Fo=!ai&&!Fo,ai?yy(e,Ey):Fo?yy(e,_y):yy(e,MN),Ca(e)&&v_(e,n),xe){fo.u(2);break}return N(fo,P8(e,f,c,n,Te,r),3);case 3:xe=fo.h;case 2:return N(fo,TN(e,n,xe,r,Te),4);case 4:if(We=fo.h,Ue=We.drmInfos,gt=We.keyIds,bt=We.encrypted,Ht=We.Tg,bt&&!Ue.length&&!Ht)throw new pt(2,4,4026);return Ut=_N(e,c,f,h,E,A,k,G,ne,z,ve,Pe),Ut.encrypted=bt,Ut.drmInfos=Ue,Ut.keyIds=gt,Ut.mimeType=xe,fd(Ut),vt=Ca(e)?e.K.get(f):new Map,jt=IN(e,n,Ut,vt,Te,r,f),ln=jt.segments,(pn=jt.bandwidth)&&(Ut.bandwidth=pn),Ca(e)&&v_(e,n),Ln=ln[0].startTime,Mn=ln[ln.length-1],qn=Mn.endTime,Yn=new wr(ln),Ut.segmentIndex=Yn,xr=(Vn=Ro(n.g,"EXT-X-SERVER-CONTROL"))?pp(Vn,"CAN-SKIP-UNTIL")!=null:!1,fi=Vn?pp(Vn,"CAN-BLOCK-RELOAD")!=null:!1,Li=ld(n.g,"EXT-X-MEDIA-SEQUENCE",0),ci=EN(Li,ln),gi=ci.gb,Gr=ci.hb,fo.return({stream:Ut,type:f,tg:[],$:r,fc:Ln,yb:qn,Hd:xr,Gd:fi,fd:!1,De:-1,gb:gi,hb:Gr,$d:vt,df:!1})}})}function EN(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function _N(e,t,n,r,u,c,f,h,E,A,k,G){var ne=__(n,t)||T_(n),z=[];if(E){E=m(E.split(","));for(var ve=E.next();!ve.done;ve=E.next())z.push(ve.value)}return E=void 0,ve=null,n==yr?E=z.includes("public.accessibility.transcribes-spoken-dialog")&&z.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":z.includes("public.accessibility.describes-video")&&(ve="visually impaired"),z.length||E!=="subtitle"||z.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:ne,codecs:t,kind:n==yr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:br(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:z,forced:A,channelsCount:f,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ve,external:!1,fastSwitching:!1,fullMimeTypes:new Set},fd(e),e}function TN(e,t,n,r,u){var c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn,qn,Yn;return Oe(function(Vn){switch(Vn.g){case 1:if(c=new Map,t.segments){for(f=m(t.segments),h=f.next();!h.done;h=f.next())if(E=h.value,A=qs(E.g,"EXT-X-KEY"),k=null,A.length)for(k=E_(e,t,E.g,r,u),G=m(A),ne=G.next();!ne.done;ne=G.next())z=ne.value,c.set(z,k)}Pe=ve=!1,xe=[],Ge=new Set,Te=m(c),We=Te.next();case 2:if(We.done){Vn.u(4);break}if(Ue=We.value,gt=m(Ue),bt=gt.next().value,Ht=gt.next().value,Ut=bt,vt=Ht,jt=ii(Ut,"METHOD"),jt=="NONE"){Vn.u(3);break}if(ve=!0,ln=zn(Ut,"KEYFORMAT")||"identity",pn=null,vy(jt)){Pe=!0,Vn.u(3);break}if(ln!="identity"){pn=(Ln=xN[ln])?Ln(Ut,n):null,Vn.u(6);break}return N(Vn,bN(e,Ut,n,r,vt,u),8);case 8:pn=Vn.h;case 6:if(pn){if(pn.keyIds)for(Mn=m(pn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,Ge.add(Yn);xe.push(pn)}case 3:We=Te.next(),Vn.u(2);break;case 4:return Vn.return({drmInfos:xe,keyIds:Ge,encrypted:ve,Tg:Pe})}})}function SN(e,t,n,r,u){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var c=0,f=zn(t,"IV","");if(f){var h=su(f.substr(2));if(h.byteLength!=16)throw new pt(2,4,4048)}else c=ld(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(ii(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var A,k,G,ne,z,ve,Pe;return Oe(function(xe){if(xe.g==1)return A=Ol(r(),ii(t,"URI"),u),k=A.sort().join(""),e.da.has(k)||(G=Oi(A,e.g.retryParameters),ne=kl(e,G,6),e.da.set(k,ne)),N(xe,e.da.get(k),2);if(xe.g!=3){if(z=xe.h,!z.data||z.data.byteLength!=E.bitsKey/8)throw new pt(2,4,4049);return ve={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Pe=E,N(xe,p.crypto.subtle.importKey("raw",z.data,ve,!0,["decrypt"]),3)}Pe.cryptoKey=xe.h,E.fetchKey=void 0,$(xe)})},e.ba.set(n,E)}return e.ba.get(n)}function v_(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=Ro(r[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=Ro(t.g,"EXT-X-TARGETDURATION"),!r)throw new pt(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=Ro(t.g,"EXT-X-PART-INF"))&&(e.L=Number(ii(u,"PART-TARGET"))),t=Ro(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(ii(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?pp(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(r,e.Ha)}function wN(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function E_(e,t,n,r,u){var c=Ro(n,"EXT-X-MAP");if(!c)return null;var f=ii(c,"URI"),h=Ol(r(),f,u);if(f=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(f)){var E=void 0,A=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?vy(ii(k,"METHOD"))&&k.id<c.id&&(E=SN(e,k,t,r,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(A=k);t=M8(h,c,A,E),e.Y.set(f,t)}return e.Y.get(f)}function M8(e,t,n,r){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new dt(function(){return e},u,c,null,null,null,r)}function D8(e,t,n,r,u,c,f,h,E){var A=r.g,k=Ro(A,"EXTINF"),G=0,ne=0,z=null;r.rb.length&&!e.B&&He("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ve=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Pe=Ro(A,"EXT-X-PROGRAM-DATE-TIME");Pe&&Pe.value&&(ve=kf(Pe.value))}var xe=Bt;if(Ro(A,"EXT-X-GAP")&&(xe=2),!k){if(r.rb.length==0)throw new pt(2,4,4024,"EXTINF");if(!e.B)return null}var Ge=[];Pe=!1;var Te=null,We=!1,Ue=!1;if(e.B&&r.rb.length){G=(f.mimeType=="video/mp4"||f.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var gt=ve,bt={},Ht=0;Ht<r.rb.length;bt={Qc:bt.Qc,yd:bt.yd},Ht++){var Ut=r.rb[Ht],vt=Ht==0?n:Ge[Ge.length-1],jt=Ht==0?u:vt.endTime,ln=Number(zn(Ut,"DURATION"))||e.L;if(ln){var pn=jt+ln,Ln=0,Mn=null;if(Ut.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Ut,"BYTERANGE-START"))?Number(Ln):0,(vt=zn(Ut,"BYTERANGE-LENGTH"))?Mn=Ln+Number(vt)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Ut,"BYTERANGE"),Mn=m(AN(vt,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),bt.yd=zn(Ut,"URI"),bt.yd){vt=Bt,zn(Ut,"GAP")=="YES"&&(vt=2,We=!0),bt.Qc=null;var qn=function(Vn){return function(){return Vn.Qc==null&&(Vn.Qc=Ol(h(),Vn.yd,c)),Vn.Qc}}(bt);G&&0<=Ln&&Mn!=null&&(Te=qn,Pe=!0),jt=new Je(jt,pn,qn,Ln,Mn,t,0,0,1/0,[],"",null,gt,vt,E),Ut.name=="EXT-X-PRELOAD-HINT"&&(jt.ef(),Ue=!0),zn(Ut,"INDEPENDENT")!="YES"&&0<Ht&&jt.Zd(),Ge.push(jt),gt&&(gt+=ln)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(Ge.length)G=Ge[Ge.length-1].endTime;else return null;Pe&&(We||Ge[0].Aa!=0?(Pe=!1,Te=null):Ge=[]),(k=Ro(A,"EXT-X-BYTERANGE"))?(z=m(AN(n,k.value)),ne=z.next().value,z=z.next().value):Ge.length&&(ne=Ge[0].Aa,z=Ge[Ge.length-1].ja),n="",k=null,f.type=="image"&&(n="1x1",f=Ro(A,"EXT-X-TILES"))&&(n=ii(f,"LAYOUT"),(f=zn(f,"DURATION"))&&(k=Number(f)));var Yn=null;return t=new Je(u,G,function(){return Te?Te():(Yn==null&&(Yn=Ol(h(),r.h,c)),Yn||[])},ne,z,t,0,0,1/0,Ge,n,k,ve,xe,E,0<Ge.length&&!!r.h),Pe&&(e.lb=!0,t.lg(),Ue&&t.ef()),t}function AN(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,r=n+t-1),[n,r]}function IN(e,t,n,r,u,c,f){var h=t.segments,E=void 0,A=ld(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=ld(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=Ro(t.g,"EXT-X-SKIP"),ne=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,z=k+ne,ve=0;Ca(e)&&r.has(z)&&(ve=r.get(z)),ve===0&&e.qa==_y&&0<r.size&&!r.has(z)&&(ve=e.l.qb());var Pe=[],xe=null;G=[];for(var Ge=0;Ge<h.length;Ge++){var Te=h[Ge],We=Ge==0?ve:xe.endTime;z=k+ne+Ge,Ro(Te.g,"EXT-X-DISCONTINUITY")&&A++;for(var Ue=m(Te.g),gt=Ue.next();!gt.done;gt=Ue.next())gt=gt.value,gt.name=="EXT-X-KEY"&&(vy(ii(gt,"METHOD"))?E=SN(e,gt,t,c,u):E=void 0);r.set(z,We),Ue=E_(e,t,Te.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),(We=D8(e,Ue,xe,Te,We,u,n,c,E))&&((xe=ld(Te.g,"EXT-X-BITRATE"))?G.push({bitrate:xe,duration:We.endTime-We.startTime}):G.length&&(xe=G.pop(),xe.duration+=We.endTime-We.startTime,G.push(xe)),xe=We,We.j=A,my(e,f)&&e.I!=null&&z<e.I||Pe.push(We))}if(t=void 0,G.length&&(t=G.reduce(function(bt,Ht){return bt+Ht.duration},0),t=Math.round(G.reduce(function(bt,Ht){return bt+Ht.bitrate*Ht.duration},0)/t*1e3)),G=Pe.some(function(bt){return bt.h!=null})){for(n={},r=0;r<Pe.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},r++)if(n.Cb=Pe[r],n.Cb.h==null)for(n.Ic=0,n.Jc=r,u=function(bt){return function(){var Ht=Pe[bt.Jc];if(Ht){if(Ht.h!=null)return Ht.h+bt.Ic;bt.Ic-=Ht.endTime-Ht.startTime,bt.Jc+=1}return null}}(n),n.Fc=0,n.td=r,c=function(bt){return function(){var Ht=Pe[bt.td];if(Ht){if(Ht!=bt.Cb&&(bt.Fc+=Ht.endTime-Ht.startTime),Ht.h!=null)return Ht.h+bt.Fc;--bt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Pe),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!my(e,f))for(e=m(Pe),r=e.next();!r.done;r=e.next())r.value.Ff(n);return{segments:Pe,bandwidth:t}}function __(e,t){if(e==yr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function T_(e){return e==yr?"text/vtt":NN[e].mp4}function P8(e,t,n,r,u,c){var f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:return f=Ka,h=Math.trunc((r.segments.length-1)/2),E=Ol(c(),r.segments[h].h,u),A=new si(E[0]),k=A.Pa.split(".").pop(),G=NN[t],(ne=G[k])||(ne=RN[k])||(ne=__(t,n))?We.return(ne):(ve=1,Pe=Oi(E,e.g.retryParameters),ce(We,2),Pe.method="HEAD",N(We,kl(e,Pe,f,{type:ve}),4));case 4:xe=We.h,z=xe.headers["content-type"],ye(We,3);break;case 2:if(Ge=be(We),!Ge||Ge.code!=1002&&Ge.code!=1001){We.u(3);break}return Pe.method="GET",N(We,kl(e,Pe,f,{type:ve}),6);case 6:Te=We.h,z=Te.headers["content-type"];case 3:return z?We.return(z.split(";")[0]):We.return(T_(t))}})}function CN(e,t,n,r,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function S_(e,t,n){return kl(e,Oi(t,e.g.retryParameters),0,{type:n?2:3})}function O8(e){var t,n,r,u,c,f;Oe(function(h){switch(h.g){case 1:return e.i?(ce(h,2),t=Date.now(),N(h,e.update(),4)):h.return();case 4:n=Date.now(),Ca(e)&&(r=(n-t)/1e3,e.bb.sample(1,r),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),ye(h,3);break;case 2:if(f=be(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(f),h.return();f.severity=1,e.i.onError(f),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),$(h)}})}function Ca(e){return e.qa!=Ey}function yy(e,t){e.qa=t,e.l&&e.l.Ec(!Ca(e)),Ca(e)||e.s.stop()}function kl(e,t,n,r){if(!e.N)throw new pt(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),cu(e.N,t),t.promise}function vy(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function bN(e,t,n,r,u,c){var f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue;return Oe(function(gt){switch(gt.g){case 1:if(n=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);if(f=ii(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return gt.return(null);if(E=Ol(r(),ii(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){A=xs(qo(E[0].split("data:text/plain;base64,").pop())),gt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Oi(E,e.g.retryParameters),ne=kl(e,G,6),e.ia.set(k,ne)),N(gt,e.ia.get(k),3);case 3:z=gt.h,A=xs(z.data);case 2:if(ve="00000000000000000000000000000000",!u){gt.u(4);break}if(e.pa.has(u)){Pe=e.pa.get(u),gt.u(5);break}return xe=qh(u.$(),u.ac(),u.Yb(),e.g.retryParameters),Ge=Ka,N(gt,kl(e,xe,Ge,{type:0}),6);case 6:Te=gt.h,Pe=h8(Te.data),e.pa.set(u,Pe);case 5:Pe&&(ve=Pe);case 4:return We=new Map,We.set(ve,A),Ue="cenc",f=="SAMPLE-AES"&&(Ue="cbcs"),gt.return(lh(We,Ue))}})}te("shaka.hls.HlsParser",py);var RN={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},NN={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},xN={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);return e=ii(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),xu("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=ii(e,"URI"),t=p_(t),t=Qn(t.data),n=xu("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=ii(e,"URI"),e=p_(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Pf(e,t,new Set,0),xu("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Ey="VOD",MN="EVENT",_y="LIVE",L8={Pg:Ey,Pi:MN,Xi:_y};ke["application/x-mpegurl"]=function(){return new py},ke["application/vnd.apple.mpegurl"]=function(){return new py};function k8(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function Ty(e){if(e=DN(e))e:{e=m(Aa(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=sa(t.value,"LA_URL")){e=bi(t);break e}e=""}else e="";return e}function DN(e){return e=qo(bi(e)),e=k8(e).filter(function(t){return t.type===F8})[0],e?(e=Za(e.value,!0),(e=xl(e,"WRMHEADER"))?e:null):null}var F8=1,U8=new Map().set("com.microsoft.playready",Ty).set("com.microsoft.playready.recommendation",Ty).set("com.microsoft.playready.software",Ty).set("com.microsoft.playready.hardware",Ty);function dd(e){if(!kN){kN=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);Sy=mr("ftyp",t,r,t,n),t=mr("dref",W8),w_=mr("dinf",t)}this.g=e}function hd(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,f=r.value;r=mr;var h=f.id+1,E=f.stream.width||0,A=f.stream.height||0;f.type=="audio"&&(A=E=0);var k=f.duration*f.timescale,G=Math.floor(k/(Fl+1));switch(k=Math.floor(k%(Fl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(h,4)),[0,0,0,0],T(oi(G,4)),T(oi(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(oi(E,2)),[0,0],T(oi(A,2)),[0,0])),h=mr("tkhd",h),E=mr,G=f.duration*f.timescale,A=Math.floor(G/(Fl+1)),G=Math.floor(G%(Fl+1)),k=f.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(f.timescale,4)),T(oi(A,4)),T(oi(G,4)),T(oi(k,2)),[0,0])),A=mr("mdhd",A),G=f,k=new Uint8Array([]),G.type){case"video":k=j8;break;case"audio":k=Z8}G=mr("hdlr",k);e:{switch(f.type){case"video":f=mr("minf",mr("vmhd",K8),w_,PN(f));break e;case"audio":f=mr("minf",mr("smhd",z8),w_,PN(f));break e}f=new Uint8Array([])}f=E("mdia",A,G,f),r=r("trak",h,f),c.call(u,r)}for(t=li.apply(Pi,T(t)),c=e.g[0],n=mr,r=c.duration*c.timescale,u=Math.floor(r/(Fl+1)),r=Math.floor(r%(Fl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(c.timescale,4)),T(oi(u,4)),T(oi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),r=[],e=m(e.g),E=e.next();!E.done;E=e.next())f=r,h=f.push,E=new Uint8Array([0,0,0,0].concat(T(oi(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(f,E);if(e=li.apply(Pi,T(r)),e=mr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),f=c.next();!f.done;f=c.next())if(f=f.value,f.initData)for(f=m(f.initData),h=f.next();!h.done;h=f.next())r.push(h.value.initData);c=li.apply(Pi,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(Sy.byteLength+e.byteLength),t.set(Sy),t.set(e,Sy.byteLength),t}function PN(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,f=[],h=[],E=0,A=0,k=0,G=0;G<e.Sa.length;G++){var ne=LN(e.Sa[G]);switch(ne[0]&31){case 7:f.push(ne),c+=ne.length+2;break;case 8:h.push(ne),c+=ne.length+2}}for(0<f.length&&(E=f[0][1],k=f[0][2],A=f[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=A,c[G++]=255,c[G++]=224|f.length,E=0;E<f.length;E++)c[G++]=(f[E].length&65280)>>8,c[G++]=f[E].length&255,c.set(f[E],G),G+=f[E].length;for(c[G++]=h.length,f=0;f<h.length;f++)c[G++]=(h[f].length&65280)>>8,c[G++]=h[f].length&255,c.set(h[f],G),G+=h[f].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(n,2)),T(oi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=ON(e),f=new Uint8Array([]),e.encrypted&&(f=pd(e),r="encv"),n=mr(r,n,u,h,f)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(r,2)),T(oi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=ON(e),f=new Uint8Array([]),e.encrypted&&(f=pd(e),u="encv"),n=mr(u,r,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",gp(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=pd(e),r="enca"),e=mr(r,gp(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=pd(e),r="enca"),e=mr(r,gp(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=pd(e),r="enca"),e=mr(r,gp(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,r=e.id+1,u=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,E=Mu("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[f],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=A[2*f]),f=parseInt(E.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(oi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=pd(e),r="enca"),e=mr(r,gp(e),n,u)),n=e}return e=mr("stsd",Y8,n),t("stbl",e,mr("stts",G8),mr("stsc",q8),mr("stsz",V8),mr("stco",H8))}function ON(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(oi(e.xa,4)),T(oi(t,4)))),mr("pasp",e)}function gp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(oi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function pd(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(oi(r,4)))),n=mr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=mr("schm",r),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=m(f.keyIds);for(var h=f.next();!h.done;h=f.next())c=LN(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,r,u("schi",c))}function mp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=mr,f=new Uint8Array([0,0,0,0].concat(T(oi(n.data?n.data.jb:0,4))));f=mr("mfhd",f);var h,E=n.data?n.data.Ra:[],A=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;A[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",A);var G=E.length+92;A=mr,h=new Uint8Array([0,0,0,58].concat(T(oi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var ne=Math.floor(k%(Fl+1));k=new Uint8Array([1,0,0,0].concat(T(oi(Math.floor(k/(Fl+1)),4)),T(oi(ne,4)))),k=mr("tfdt",k);var z=G;G=n.data?n.data.Ra:[],ne=G.length;var ve=12+16*ne,Pe=new Uint8Array(ve);for(z+=8+ve,Pe.set([n.type==="video"?1:0,0,15,1].concat(T(oi(ne,4)),T(oi(z,4))),0),z=0;z<ne;z++){var xe=G[z];ve=oi(xe.duration,4);var Ge=oi(xe.size,4),Te=xe.flags;xe=oi(xe.Ta,4),Pe.set([].concat(T(ve),T(Ge),[Te.Va<<2|Te.Ka,Te.Na<<6|Te.Ma<<4|Te.Wa,Te.Ja&61440,Te.Ja&15],T(xe)),12+16*z)}G=mr("trun",Pe),E=A("traf",h,k,G,E),c=c("moof",f,E),u.call(r,t,[c,B8(n)])}return li.apply(Pi,T(t))}function B8(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=li.apply(Pi,T(e)),mr("mdat",e)}function oi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function LN(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=Qe.apply(1,arguments),n=FN[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],FN[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var kN=!1,Fl=Math.pow(2,32)-1,FN={},j8=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Z8=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),G8=new Uint8Array([0,0,0,0,0,0,0,0]),q8=new Uint8Array([0,0,0,0,0,0,0,0]),H8=new Uint8Array([0,0,0,0,0,0,0,0]),V8=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),K8=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),z8=new Uint8Array([0,0,0,0,0,0,0,0]),Y8=new Uint8Array([0,0,0,0,0,0,0,1]),Sy=new Uint8Array([]),W8=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),w_=new Uint8Array([]);function A_(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){X8(e)}),this.A=new bl,this.m=new Map}g=A_.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return Oe(function(r){if(r.g==1)return n.l=[e],n.h=t,N(r,I_(n),2);if(!n.h)throw new pt(2,7,7001);return r.return(n.j)})};function X8(e){var t;Oe(function(n){switch(n.g){case 1:return ce(n,2),N(n,I_(e),4);case 4:ye(n,3);break;case 2:t=be(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();$(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return ce(n,2),N(n,I_(e),4);if(n.g!=2)return ye(n,0);if(t=be(n),!e.h||!t)return n.return();e.h.onError(t),$(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function I_(e){var t,n,r,u,c,f,h;return Oe(function(E){if(E.g==1)return t=Oi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5}),cu(e.A,u),N(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=bm){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=qR(k,"SmoothStreamingMedia"),!k)throw new pt(2,4,4046,A);G(k),k=qa(k.outerHTML)}var ne=Ph(k,"SmoothStreamingMedia");if(!ne)throw new pt(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=Rm&&A(ne),e.i||(e.i=new tr(null,0)),A=_r(ne,"IsLive",Oh,!1))throw new pt(2,4,4047);e.i.Ec(!A),G=_r(ne,"TimeScale",bo,1e7),k=_r(ne,"DVRWindowLength",bo),A&&(k===0||isNaN(k))&&(k=1/0);var z=_r(ne,"CanSeek",Oh,!1);k===0&&z&&(k=1/0),z=null,k&&0<k&&(z=k/G),A&&!isNaN(e.g.availabilityWindowOverride)&&(z=e.g.availabilityWindowOverride),z==null&&(z=1/0),e.i.je(z),k=_r(ne,"Duration",bo,1/0),A||e.i.Za(k/G),A={variants:[],textStreams:[],timescale:G,duration:k/G},z=Wr(ne,"Protection");var ve;for(G=e.g.mss.keySystemsBySystemId,k=[],z=m(z),ve=z.next();!ve.done;ve=z.next())k=k.concat(Wr(ve.value,"ProtectionHeader"));if(k.length){for(z=[],ve=0;ve<k.length;ve++){var Pe=k[ve],xe=Pe.attributes.SystemID.toLowerCase(),Ge=G[xe];if(Ge){var Te=DN(Pe);if(Te)e:{Te=m(Aa(Te,"DATA"));for(var We=Te.next();!We.done;We=Te.next())if(We=sa(We.value,"KID")){Te=qo(bi(We)),Te=new Uint8Array([Te[3],Te[2],Te[1],Te[0],Te[5],Te[4],Te[7],Te[6]].concat(T(Te.slice(8)))),Te=xs(Te);break e}Te=null}else Te=null;We=qo(bi(Pe)),xe=su(xe.replace(/-/g,"")),xe=[{initData:Pf(We,xe,new Set,0),initDataType:"cenc",keyId:Te}],xe=xu(Ge,"cenc",xe),Te&&xe.keyIds.add(Te),(Ge=U8.get(Ge))&&(xe.licenseServerUri=Ge(Pe)),z.push(xe)}}G=z}else G=[];for(ve=G,z=[],G=[],k=[],ne=Wr(ne,"StreamIndex"),ne=m(ne),Pe=ne.next();!Pe.done;Pe=ne.next()){Pe=Pe.value,Ge=Wr(Pe,"QualityLevel"),xe=A.timescale,Te=A.duration,We=Wr(Pe,"c");for(var Ue=[],gt=0,bt=0;bt<We.length;++bt){var Ht=We[bt],Ut=We[bt+1],vt=_r(Ht,"t",bo),jt=_r(Ht,"d",bo);if(Ht=_r(Ht,"r",Vu),!jt)break;if(vt=vt!=null?vt:gt,Ht=Ht||0,0>Ht)if(Ut){if(Ut=_r(Ut,"t",bo),Ut==null)break;if(vt>=Ut)break;Ht=Math.ceil((Ut-vt)/jt)-1}else{if(Te==1/0)break;if(vt/xe>=Te)break;Ht=Math.ceil((Te*xe-vt)/jt)-1}for(Ut=0;Ut<=Ht;++Ut)gt=vt+jt,Ue.push({start:vt/xe,end:gt/xe,Kf:vt}),vt=gt}for(xe=Ue,Ge=m(Ge),Te=Ge.next();!Te.done;Te=Ge.next())(Te=$8(e,Pe,Te.value,xe,ve,A))&&(Te.type!="audio"||e.g.disableAudio?Te.type!="video"||e.g.disableVideo?Te.type!=yr||e.g.disableText||k.push(Te):G.push(Te):z.push(Te))}for(ne=[],z=m(0<z.length?z:[null]),ve=z.next();!ve.done;ve=z.next())for(ve=ve.value,Pe=m(0<G.length?G:[null]),Te=Pe.next();!Te.done;Te=Pe.next())Ge=ne,xe=Ge.push,Te=Te.value,We=0,ve&&ve.bandwidth&&0<ve.bandwidth&&(We+=ve.bandwidth),Te&&Te.bandwidth&&0<Te.bandwidth&&(We+=Te.bandwidth),Te={id:e.s++,language:ve?ve.language:"und",disabledUntilTime:0,primary:!!ve&&ve.primary||!!Te&&Te.primary,audio:ve,video:Te,bandwidth:We,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},xe.call(Ge,Te);A.variants=ne,A.textStreams=k,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),f=Date.now(),h=(f-r)/1e3,e.B.sample(1,h),$(E)})}function $8(e,t,n,r,u,c){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return He("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,E=e.s++,A=_r(n,"Bitrate",Ls),k=_r(n,"MaxWidth",Ls),G=_r(n,"MaxHeight",Ls),ne=_r(n,"Channels",Ls),z=_r(n,"SamplingRate",Ls),ve=c.duration;r.length&&(ve=r[r.length-1].end-r[0].start);var Pe=e.i.getDuration();e.i.Za(Math.min(ve,Pe));var xe={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:br(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:ne,audioSamplingRate:z,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ve,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=r6[u])&&xe.roles.push(u),u==="main"&&(xe.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(f==="audio")u="AAC";else if(f==="video")return He('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!n6.includes(u.toUpperCase()))return He("Codec not supported:",u),null;switch(n=Q8(n,f,u,xe),xe.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return He("Quality unsupported without CodecPrivateData",f),null;xe.type="audio",xe.mimeType="mss/audio/mp4",xe.codecs=J8(u,n);break;case"video":if(!n)return He("Quality unsupported without CodecPrivateData",f),null;xe.type="video",xe.mimeType="mss/video/mp4",xe.codecs=e6(n);break;case"text":xe.type=yr,xe.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(xe.codecs="stpp")}return xe.fullMimeTypes.add(Si(xe.mimeType,xe.codecs)),xe.createSegmentIndex=function(){if(xe.segmentIndex)return Promise.resolve();if(e.m.has(xe.id))var Ge=e.m.get(xe.id);else Ge=[],xe.type=="video"&&(Ge=xe.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Ge={id:xe.id,type:xe.type,codecs:xe.codecs,encrypted:xe.encrypted,timescale:xe.mssPrivateData.timescale,duration:xe.mssPrivateData.duration,Sa:Ge,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:xe},Ge=hd(new dd([Ge])),e.m.set(xe.id,Ge);return Ge=t6(e,new dt(function(){return[]},0,null,null,void 0,Ge),xe,t,r),xe.segmentIndex=new wr(Ge),Promise.resolve()},xe.closeSegmentIndex=function(){xe.segmentIndex&&(xe.segmentIndex.release(),xe.segmentIndex=null)},xe}function Q8(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function J8(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function e6(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function t6(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];var f={};u=m(u);for(var h=u.next();!h.done;f={Pc:f.Pc},h=u.next())f.Pc=h.value,r.push(new Je(f.Pc.start,f.Pc.end,function(E){return function(){return co(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(f),0,null,t,0,0,n.mssPrivateData.duration));return r}te("shaka.mss.MssParser",A_);var n6="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),r6={CAPT:"main",SUBT:"alternate",DESC:"main"};ke["application/vnd.ms-sstr+xml"]=function(){return new A_};function UN(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=Ga(t)}catch(f){}throw new pt(n==401||n==403?2:1,1,1001,r,n,u,e,c)}function C_(){}function wy(e,t,n,r,u){var c=new u6;Rl(t.headers).forEach(function(A,k){c.append(k,A)});var f=new a6,h={Rf:!1,Jg:!1};if(e=i6(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:f.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,r,u,t.streamDataCallback),e=new pi(e,function(){return h.Rf=!0,f.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,f.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function i6(e,t,n,r,u,c,f){var h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:return h=o6,E=s6,ne=G=0,z=Date.now(),ce(Ue,2),N(Ue,h(e,n),4);case 4:if(A=Ue.h,c(BN(A.headers)),n.method=="HEAD"){Ue.u(5);break}return ve=A.clone().body.getReader(),xe=(Pe=A.headers.get("Content-Length"))?parseInt(Pe,10):0,Ge=function(gt){function bt(){var Ht,Ut;return Oe(function(vt){switch(vt.g){case 1:return ce(vt,2),N(vt,ve.read(),4);case 4:Ht=vt.h,ye(vt,3);break;case 2:return be(vt),vt.return();case 3:if(Ht.done){vt.u(5);break}if(G+=Ht.value.byteLength,!f){vt.u(5);break}return N(vt,f(Ht.value),5);case 5:Ut=Date.now(),(100<Ut-z||Ht.done)&&(u(Ut-z,G-ne,xe-G),ne=G,z=Ut),Ht.done?gt.close():(gt.enqueue(Ht.value),bt()),$(vt)}})}bt()},new E({start:Ge}),N(Ue,A.arrayBuffer(),6);case 6:k=Ue.h;case 5:ye(Ue,3);break;case 2:throw Te=be(Ue),r.Rf?new pt(1,1,7001,e,t):r.Jg?new pt(1,1,1003,e,t):new pt(1,1,1002,e,Te,t);case 3:return We=BN(A.headers),Ue.return(UN(We,k,A.status,e,A.url,t))}})}function BN(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function jN(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}te("shaka.net.HttpFetchPlugin",C_),C_.isSupported=jN,C_.parse=wy;var o6=p.fetch,a6=p.AbortController,s6=p.ReadableStream,u6=p.Headers;jN()&&(Ho("http",wy,2,!0),Ho("https",wy,2,!0),Ho("blob",wy,2,!0));function ZN(){}function Ay(e,t,n,r,u){var c=new l6,f=Date.now(),h=0,E=new Promise(function(A,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new pt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var z=GN(c);u(z),G=!0}},c.onload=function(){var z=GN(c),ve=c.response;try{var Pe=UN(z,ve,c.status,e,c.responseURL,n);A(Pe)}catch(xe){k(xe)}},c.onerror=function(z){k(new pt(1,1,1002,e,z,n))},c.ontimeout=function(){k(new pt(1,1,1003,e,n))},c.onprogress=function(z){var ve=Date.now();(100<ve-f||z.lengthComputable&&z.loaded==z.total)&&(r(ve-f,z.loaded-h,z.total-z.loaded),h=z.loaded,f=ve)};for(var ne in t.headers)c.setRequestHeader(ne.toLowerCase(),t.headers[ne]);c.send(t.body)});return new pi(E,function(){return c.abort(),Promise.resolve()})}function GN(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}te("shaka.net.HttpXHRPlugin",ZN),ZN.parse=Ay;var l6=p.XMLHttpRequest;Ho("http",Ay,1,!0),Ho("https",Ay,1,!0),Ho("blob",Ay,1,!0);function qN(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function b_(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function c6(e,t){return qh(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function HN(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function VN(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}HN.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function KN(e){var t=this;this.o=e,this.j=new Map,this.i=new qu(function(){return R_(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new HN}KN.prototype.destroy=function(){return this.i.destroy()};function f6(e,t,n){e.m=t,e.l=n}function R_(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function d6(e,t,n,r,u,c){jr(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,A,k,G,ne,z;return Oe(function(ve){if(ve.g==1)return N(ve,p6(e,n),2);if(h=ve.h,e.i.g)throw new pt(2,9,7001);if(u)for(k in E=Qn(h),A=new cm(E),A.data)G=Number(k),ne=A.data[G],z=A.g[G],e.l(ne,z);e.g.close(r,h.byteLength);var Pe=e.g;return e.m(Pe.i==0?0:Pe.j/Pe.i,e.g.h),ve.return(c(h))})});e.j.set(t,f)}function h6(e){return Oe(function(t){return t.g==1?N(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function p6(e,t){var n,r,u,c;return Oe(function(f){return f.g==1?(n=Ka,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),N(f,r.promise,2)):(c=f.h,gn(e.h,u),f.return(c.data))})}function Iy(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Iy.prototype.abort=function(){var e=this;return Oe(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),N(t,e.g,4)}if(t.g!=2)return ye(t,0);be(t),$(t)})};function N_(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Oe(function(f){if(f.g==1)return u.result==null?(n(),f.return()):(c=u.result,N(f,t(c.key,c.value,c),2));c.continue(),$(f)})}})}Iy.prototype.store=function(){return this.h},Iy.prototype.promise=function(){return this.g};function x_(e){this.h=e,this.g=[]}x_.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function kc(e,t){return Cy(e,t,"readwrite")}function Cy(e,t,n){n=e.h.transaction([t],n);var r=new Iy(n,t);return e.g.push(r),r.promise().then(function(){gn(e.g,r)},function(){gn(e.g,r)}),r}function Fc(e,t,n){this.h=new x_(e),this.i=t,this.g=n}g=Fc.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return zN(this.i)},g.removeSegments=function(e,t){return YN(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return Oe(function(r){return r.g==1?N(r,WN(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return zN(this.g)},g.updateManifest=function(){return Promise.reject(new pt(2,9,9016,"Cannot modify values in "+this.g))};function g6(e,t,n){e=kc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=kc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},g.removeManifests=function(e,t){return YN(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return Oe(function(r){return r.g==1?N(r,WN(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return Oe(function(r){return r.g==1?(t=Cy(e.h,e.g,"readonly"),n=new Map,N(r,N_(t,function(u,c){var f;return Oe(function(h){if(h.g==1)return N(h,e.Yc(c),2);f=h.h,n.set(u,f),$(h)})}),2)):r.g!=3?N(r,t.promise(),3):r.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function zN(e){return Promise.reject(new pt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,r,u,c,f,h,E,A;return Oe(function(k){if(k.g==1){for(r=kc(n.h,e),u=r.store(),c=[],f={},h=m(t),E=h.next();!E.done;f={zd:f.zd},E=h.next())A=E.value,f.zd=u.add(A),f.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(f);return N(k,r.promise(),2)}return k.return(c)})};function YN(e,t,n,r){e=kc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(f){return function(){return r(f.xd)}}(u);return e.promise()}function WN(e,t,n){var r,u,c,f,h,E,A;return Oe(function(k){if(k.g==1){for(r=Cy(e.h,t,"readonly"),u=r.store(),c={},f=[],h={},E=m(n),A=E.next();!A.done;h={Nc:h.Nc,Lc:h.Lc},A=E.next())h.Lc=A.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&f.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return N(k,r.promise(),2)}if(f.length)throw new pt(2,9,9012,"Could not find values for "+f);return k.return(n.map(function(G){return c[G]}))})}function yp(e){this.g=new x_(e)}yp.prototype.destroy=function(){return this.g.destroy()},yp.prototype.getAll=function(){var e=this,t,n;return Oe(function(r){return r.g==1?(t=Cy(e.g,"session-ids","readonly"),n=[],N(r,N_(t,function(u,c){n.push(c)}),2)):r.g!=3?N(r,t.promise(),3):r.return(n)})},yp.prototype.add=function(e){var t=kc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},yp.prototype.remove=function(e){var t=this,n;return Oe(function(r){return r.g==1?(n=kc(t.g,"session-ids"),N(r,N_(n,function(u,c,f){e.includes(c.sessionId)&&f.delete()}),2)):N(r,n.promise(),0)})};function Ko(){this.g=new Map}Ko.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Ko.prototype.init=function(){var e=this;vp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function XN(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:r,Ba:c},Ba:u})})}),t)return t;throw new pt(2,9,9013,"Could not find a cell that supports add-operations")}function m6(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({fb:r,Ba:c},u)})})}function by(e,t,n){if(e=e.g.get(t),!e)throw new pt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new pt(2,9,9013,"Could not find cell with name "+n);return t}function y6(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function v6(e){var t=Array.from(e.g.keys());if(!t.length)throw new pt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function E6(e){var t,n,r;return Oe(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=vp,r.forEach(function(c){(c=c())&&t.push(c)})),N(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):N(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function $N(e,t){vp.set(e,t)}te("shaka.offline.StorageMuxer",Ko),Ko.unregister=function(e){vp.delete(e)},Ko.register=$N,Ko.prototype.destroy=Ko.prototype.destroy;var vp=new Map;function Ep(){Fc.apply(this,arguments)}Y(Ep,Fc),Ep.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Oe(function(f){return r=kc(n.h,n.g),u=r.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new pt(2,9,9012,"Could not find values for "+e))},N(f,Promise.all([r.promise(),c]),0)})},Ep.prototype.Yc=function(e){var t,n,r,u,c,f;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=_6(e.periods[n],u),t.push(c);return N(h,LR(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function _6(e,t){S6(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return T6(u,e.startTime,t)})}function T6(e,t,n){var r=e.initSegmentUri?QN(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=QN(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Ep.prototype.Tf=function(e){return{data:e.data}};function QN(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new pt(2,9,9004,"Could not parse uri "+e)}function S6(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(r=c.next();!r.done;r=c.next())r.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),r=c.next();!r.done;r=c.next())r.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var f=n++;r.variantIds.push(f),c.variantIds.push(f)}}}function Ry(){Fc.apply(this,arguments)}Y(Ry,Fc),Ry.prototype.Yc=function(e){var t,n,r,u,c,f;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var E=e.periods[n],A=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&A.push(w6(G,E.startTime,E.startTime+u));c=A,t.push(c)}return N(h,LR(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function w6(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function M_(){Fc.apply(this,arguments)}Y(M_,Fc),g=M_.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return g6(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function JN(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=JN.prototype,g.init=function(){var e=this,t=new Rr,n=!1,r=new pr(function(){n=!0,t.reject(new pt(2,9,9017))});r.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var f=c.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Ep(c,"segment","manifest"):null,e.g=f,f=c.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new Ry(c,"segment-v2","manifest-v2"):null,e.h=f,f=c.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new Ry(c,"segment-v3","manifest-v3"):null,e.i=f,f=c.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new M_(c,"segment-v5","manifest-v5"):null,e.j=f,c=c.objectStoreNames.contains("session-ids")?new yp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,f=m(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new pt(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return N(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),$(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return N(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return N(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return N(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return N(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),N(t,A6(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,N(t,e.init(),0)}})};function A6(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new pt(2,9,9001,t.error)),n.preventDefault()},e}$N("idb",function(){return ia()||ds()||!p.indexedDB?null:new JN});function yu(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}yu.prototype.fb=function(){return this.i},yu.prototype.Ba=function(){return this.h},yu.prototype.key=function(){return this.l},yu.prototype.toString=function(){return this.j};function D_(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new yu(t,n,r,Number(e[4])):null}function ex(e,t){this.h=e,this.g=t}function tx(e,t){var n=new tr(null,0);n.Za(t.duration);var r=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});r=I6(e,r,u,n),u=t.streams.filter(function(A){return A.type==yr}).map(function(A){return Ny(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return Ny(e,A,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=f),E.video&&E.video.encrypted&&(E.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function I6(e,t,n,r){for(var u=new Set,c=m(t),f=c.next();!f.done;f=c.next()){var h=m(f.value.variantIds);for(f=h.next();!f.done;f=h.next())u.add(f.value)}for(c=m(n),f=c.next();!f.done;f=c.next())for(h=m(f.value.variantIds),f=h.next();!f.done;f=h.next())u.add(f.value);for(c=new Map,u=m(u),f=u.next();!f.done;f=u.next())f=f.value,c.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,f=Ny(e,u,r),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=f.language,u.primary=u.primary||f.primary,u.audio=f;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=Ny(e,u,r),f=m(u.variantIds),u=f.next();!u.done;u=f.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function Ny(e,t,n){var r=t.segments.map(function(u){return C6(e,u,t)});return n.ld(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Si(t.mimeType,t.codecs)])}}function C6(e,t,n){var r=new yu("segment",e.h,e.g,t.dataKey);return e=new Je(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?b6(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function b6(e,t){var n=new yu("segment",e.h,e.g,t);return new dt(function(){return[n.toString()]},0,null)}function nx(){this.g=null}g=nx.prototype,g.configure=function(){},g.start=function(e,t){var n=this,r,u,c,f,h,E,A;return Oe(function(k){switch(k.g){case 1:if(r=D_(e),n.g=r,r==null||r.g!="manifest")throw new pt(2,1,9004,e);return u=new Ko,oe(k,2),N(k,u.init(),4);case 4:return N(k,by(u,r.fb(),r.Ba()),5);case 5:return c=k.h,N(k,c.getManifests([r.key()]),6);case 6:return f=k.h,h=f[0],E=new ex(r.fb(),r.Ba()),A=tx(E,h),t.makeTextStreamsForClosedCaptions(A),k.return(A);case 2:return $e(k),N(k,u.destroy(),7);case 7:Ae(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,r,u,c,f,h,E,A;return Oe(function(k){switch(k.g){case 1:return r=n.g,u=new Ko,ce(k,2,3),N(k,u.init(),5);case 5:return N(k,by(u,r.fb(),r.Ba()),6);case 6:return c=k.h,N(k,c.getManifests([r.key()]),7);case 7:if(f=k.h,h=f[0],E=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!E||!A){k.u(3);break}return N(k,c.updateManifestExpiration(r.key(),t),3);case 3:return $e(k),N(k,u.destroy(),10);case 10:Ae(k,0);break;case 2:be(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},ke["application/x-offline-manifest"]=function(){return new nx};function rx(){}function ix(e){var t=D_(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Gu(e)):e=t&&t.g=="segment"?R6(t.key(),t):lu(new pt(2,1,9004,e)),e}function R6(e,t){var n=new Ko;return Gu(void 0).va(function(){return n.init()}).va(function(){return by(n,t.fb(),t.Ba())}).va(function(r){return r.getSegments([t.key()])}).va(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}te("shaka.offline.OfflineScheme",rx),rx.plugin=ix,Ho("offline",ix);function ox(e,t,n){var r,u,c,f,h,E;return Oe(function(A){switch(A.g){case 1:r=[];for(var k=[],G=m(n),ne=G.next();!ne.done;ne=G.next()){ne=ne.value;for(var z=!1,ve=m(k),Pe=ve.next();!Pe.done;Pe=ve.next())if(Pe=Pe.value,x6(Pe.info,ne)){Pe.sessionIds.push(ne.sessionId),z=!0;break}z||k.push({info:ne,sessionIds:[ne.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){A.u(4);break}return f=c.value,h=N6(e,t,f),N(A,h,5);case 5:E=A.h,r=r.concat(E),c=u.next(),A.u(2);break;case 4:return A.return(r)}})}function N6(e,t,n){var r,u;return Oe(function(c){switch(c.g){case 1:return r=new Ic({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),r.configure(e),N(c,pm(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ye(c,3);break;case 2:return be(c),N(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],N(c,Promise.all(n.sessionIds.map(function(f){return Oe(function(h){if(h.g==1)return ce(h,2),N(h,$0(r,f),4);if(h.g!=2)return u.push(f),ye(h,0);be(h),$(h)})})),6);case 6:return N(c,r.destroy(),7);case 7:return c.return(u)}})}function x6(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function M6(e,t,n){var r=t.presentationTimeline.getDuration();return t=ax(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function P_(e,t){var n=tx(new ex(e.fb(),e.Ba()),t),r=t.appMetadata||{};return n=ax(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function ax(e){var t=[],n=Cf(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(Sl(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(wl(n.value));return t}function D6(){this.g={}}function P6(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function O6(e,t){e.g[t.id]=t.bandwidth||2048}function sx(e,t){return e=e.g[t],e==null&&(e=0),e}function ao(e){var t=this;if(e&&e.constructor!=dn)throw new pt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=Hf(),this.g=new Vr),this.i=[],this.j=[];var n=!e;this.l=new qu(function(){var r,u,c,f,h;return Oe(function(E){switch(E.g){case 1:return N(E,Promise.all(t.j.map(function(A){return R_(A)})),2);case 2:for(r=function(){},u=[],c=m(t.i),f=c.next();!f.done;f=c.next())h=f.value,u.push(h.then(r,r));return N(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return N(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,$(E)}})})}function O_(){if(Ao())e:{for(var e=m(vp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=ao.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Cm(e,t)),xc(this.h,e)},g.getConfiguration=function(){var e=Hf();return xc(e,this.h,Hf()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new KN(this.g);return this.j.push(c),t=L6(this,e,t||{},function(){var f;return Oe(function(h){return h.g==1?n?h.u(2):N(h,SE(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=Ie(e,n||null),h.return(f()))})},u,c),t=new pi(t,function(){return R_(c)}),t.finally(function(){gn(r.j,c)}),Y6(this,t)};function L6(e,t,n,r,u,c){var f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:return xy(),h=f=null,E=new Ko,G=k=A=null,ce(Ue,2,3),N(Ue,r(),5);case 5:return f=Ue.h,N(Ue,H6(e,t,f,u),6);case 6:if(ne=Ue.h,yo(e),z=!ne.presentationTimeline.R()&&!ne.presentationTimeline.dc(),!z)throw new pt(2,9,9005,t);return N(Ue,e.rc(ne,function(gt){G=G||gt},u),7);case 7:if(h=Ue.h,yo(e),G)throw G;return N(Ue,F6(ne,h,u),8);case 8:return N(Ue,E.init(),9);case 9:return yo(e),N(Ue,XN(E),10);case 10:return A=Ue.h,yo(e),ve=U6(h,ne,t,n,u,c),Pe=ve.Sh,xe=ve.Hf,N(Ue,A.Ba.addManifests([Pe]),11);case 11:if(Ge=Ue.h,yo(e),k=Ge[0],yo(e),G)throw G;return N(Ue,k6(e,xe,k,Pe,c,u,A.Ba,ne,h),12);case 12:return yo(e),fx(ne,Pe,h,u),N(Ue,A.Ba.updateManifest(k,Pe),13);case 13:return yo(e),Te=new yu("manifest",A.path.fb,A.path.Ba,k),Ue.return(P_(Te,Pe));case 3:return $e(Ue),N(Ue,E.destroy(),14);case 14:if(!f){Ue.u(15);break}return N(Ue,f.stop(),15);case 15:if(!h){Ue.u(17);break}return N(Ue,h.destroy(),17);case 17:Ae(Ue,0);break;case 2:if(We=be(Ue),k==null){Ue.u(19);break}return N(Ue,ux(k),19);case 19:throw G||We}})}function k6(e,t,n,r,u,c,f,h,E){var A,k,G,ne,z,ve,Pe,xe,Ge,Te;return Oe(function(We){switch(We.g){case 1:if(A={},k=0,G=function(Ue,gt){var bt,Ht,Ut,vt,jt,ln,pn;return Oe(function(Ln){if(Ln.g==1){for(bt={},Ht=m(Ue),Ut=Ht.next();!Ut.done;bt={Ob:bt.Ob},Ut=Ht.next())bt.Ob=Ut.value,vt=c6(bt.Ob,c),jt=bt.Ob.i,ln=bt.Ob.h,pn=function(Mn){return function(qn){var Yn,Vn,xr;return Oe(function(fi){if(fi.g==1)return N(fi,f.addSegments([{data:qn}]),2);Yn=fi.h,yo(e),Vn=Mn.Ob.g,xr=b_(Vn),A[xr]=Yn[0],k+=qn.byteLength,$(fi)})}}(bt),d6(u,bt.Ob.groupId,vt,jt,ln,pn);return N(Ln,h6(u),2)}return gt?(yo(e),fx(h,r,E,c),N(Ln,f.updateManifest(n,r),0)):Ln.u(0)})},ne=!1,ce(We,2),!L_(h)||!ne||cx(h)){We.u(4);break}return N(We,G(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return yo(e),t=t.filter(function(Ue){return!Ue.h}),z=A,ve=k,A={},k=0,N(We,lx(f,n,r,z,ve,function(){return yo(e)}),6);case 6:yo(e);case 4:if(ne){We.u(7);break}return N(We,G(t,!1),8);case 8:return yo(e),Pe=A,xe=k,A={},k=0,N(We,lx(f,n,r,Pe,xe,function(){return yo(e)}),9);case 9:yo(e);case 7:ye(We,0);break;case 2:return Ge=be(We),Te=Object.values(A),N(We,f.removeSegments(Te,function(){}),10);case 10:throw Ge}})}function ux(e){var t,n,r,u;return Oe(function(c){switch(c.g){case 1:return t=new Ko,N(c,t.init(),2);case 2:return N(c,XN(t),3);case 3:return n=c.h,r=new yu("manifest",n.path.fb,n.path.Ba,e),N(c,t.destroy(),4);case 4:return u=new ao,N(c,u.remove(r.toString()),0)}})}function lx(e,t,n,r,u,c){var f,h,E,A,k,G,ne,z,ve,Pe,xe;return Oe(function(Ge){switch(Ge.g){case 1:for(f=!1,ce(Ge,2),h=!0,E=m(n.streams),A=E.next();!A.done;A=E.next())for(k=A.value,G=m(k.segments),ne=G.next();!ne.done;ne=G.next())z=ne.value,ve=z.pendingSegmentRefId?r[z.pendingSegmentRefId]:null,ve!=null&&(z.dataKey=ve,z.pendingSegmentRefId=void 0),ve=z.pendingInitSegmentRefId?r[z.pendingInitSegmentRefId]:null,ve!=null&&(z.initSegmentKey=ve,z.pendingInitSegmentRefId=void 0),z.pendingSegmentRefId&&(h=!1),z.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),N(Ge,e.updateManifest(t,n),4);case 4:f=!0,c(),ye(Ge,0);break;case 2:return Pe=be(Ge),N(Ge,ux(t),5);case 5:if(f){Ge.u(6);break}return xe=Object.values(r),N(Ge,e.removeSegments(xe,function(){}),6);case 6:throw Pe}})}function F6(e,t,n){var r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We,Ue,gt,bt,Ht,Ut,vt,jt,ln,pn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:return r={width:1/0,height:1/0},mh(e,n.restrictions,r),N(qn,Kg(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,Hg(e,f,h,c),E=m(e.variants),A=E.next();!A.done;A=E.next())k=A.value,u.push(Sl(k));for(G=m(e.textStreams),ne=G.next();!ne.done;ne=G.next())z=ne.value,u.push(wl(z));for(ve=m(e.imageStreams),Pe=ve.next();!Pe.done;Pe=ve.next())xe=Pe.value,u.push(Bu(xe));return N(qn,n.offline.trackSelectionCallback(u),3);case 3:for(Ge=qn.h,Te=e.presentationTimeline.getDuration(),We=0,Ue=m(Ge),gt=Ue.next();!gt.done;gt=Ue.next())bt=gt.value,Ht=bt.bandwidth*Te/8,We+=Ht;return ce(qn,4),N(qn,n.offline.downloadSizeCallback(We),6);case 6:if(Ut=qn.h,!Ut)throw new pt(2,9,9014);ye(qn,5);break;case 4:throw vt=be(qn),vt instanceof pt?vt:new pt(2,9,9015);case 5:for(jt=new Set,ln=new Set,pn=new Set,Ln=m(Ge),gt=Ln.next();!gt.done;gt=Ln.next())Mn=gt.value,Mn.type=="variant"&&jt.add(Mn.id),Mn.type=="text"&&ln.add(Mn.id),Mn.type=="image"&&pn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return jt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return ln.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return pn.has(Yn.id)}),$6(e),$(qn)}})}function U6(e,t,n,r,u,c){var f=M6(n,t,r),h=u.offline.progressCallback;f6(c,function(z,ve){f.size=ve,h(f,z)},function(z,ve){E&&u.offline.usePersistentLicense&&A==ve&&Ml(e,"cenc",z)});var E=L_(t)&&!cx(t),A=null;E&&(A=Q6.get(e.g.keySystem));for(var k=new D6,G=m(t.textStreams),ne=G.next();!ne.done;ne=G.next())k.g[ne.value.id]=52;for(G=m(t.imageStreams),ne=G.next();!ne.done;ne=G.next())O6(k,ne.value);for(ne=m(t.variants),G=ne.next();!G.done;G=ne.next())P6(k,G.value);return k=V6(c,k,t,u),c=k.streams,k=k.Hf,ne=e.g,G=u.offline.usePersistentLicense,ne&&G&&(ne.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?Uh(e):[],drmInfo:ne,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function L_(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function cx(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function fx(e,t,n,r){if(t.expiration=n.cd(),n=Uh(n),t.sessionIds=r.offline.usePersistentLicense?n:[],L_(e)&&r.offline.usePersistentLicense&&!n.length)throw new pt(2,9,9007)}g.remove=function(e){return k_(this,B6(this,e))};function B6(e,t){var n,r,u,c,f,h;return Oe(function(E){switch(E.g){case 1:if(xy(),n=D_(t),n==null||n.g!="manifest")throw new pt(2,9,9004,t);return r=n,u=new Ko,oe(E,2),N(E,u.init(),4);case 4:return N(E,by(u,r.fb(),r.Ba()),5);case 5:return c=E.h,N(E,c.getManifests([r.key()]),6);case 6:return f=E.h,h=f[0],N(E,Promise.all([j6(e,h,u),Z6(c,r,h)]),2);case 2:return $e(E),N(E,u.destroy(),8);case 8:Ae(E,0)}})}function dx(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function j6(e,t,n){return Oe(function(r){return N(r,X6(e.g,e.h.drm,n,t),0)})}function Z6(e,t,n){function r(){}var u=W6(n);return P_(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}g.ji=function(){return k_(this,G6(this))};function G6(e){var t,n,r,u,c,f,h,E,A,k;return Oe(function(G){switch(G.g){case 1:return xy(),t=e.g,n=e.h.drm,r=new Ko,u=!1,oe(G,2),N(G,r.init(),4);case 4:c=[],y6(r,function(ne){return c.push(ne)}),f=m(c),h=f.next();case 5:if(h.done){G.u(2);break}return E=h.value,N(G,E.getAll(),8);case 8:return A=G.h,N(G,ox(n,t,A),9);case 9:return k=G.h,N(G,E.remove(k),10);case 10:k.length!=A.length&&(u=!0),h=f.next(),G.u(5);break;case 2:return $e(G),N(G,r.destroy(),11);case 11:Ae(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return k_(this,q6())};function q6(){var e,t,n;return Oe(function(r){switch(r.g){case 1:return xy(),e=[],t=new Ko,oe(r,2),N(r,t.init(),4);case 4:return n=Promise.resolve(),m6(t,function(u,c){n=n.then(function(){var f;return Oe(function(h){if(h.g==1)return N(h,c.getAllManifests(),2);f=h.h,f.forEach(function(E,A){E=P_(new yu("manifest",u.fb,u.Ba,A),E),e.push(E)}),$(h)})})}),N(r,n,2);case 2:return $e(r),N(r,t.destroy(),6);case 6:Ae(r,3);break;case 3:return r.return(e)}})}function H6(e,t,n,r){var u,c,f,h,E;return Oe(function(A){if(A.g==1)return u=null,c=e.g,f={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),yo(e),N(A,n.start(t,f),2);if(A.g!=3)return h=A.h,yo(e),E=hx(h),N(A,Promise.all(Mf(E,function(k){return k.createSegmentIndex()})),3);if(yo(e),u)throw u;return A.return(h)})}g.rc=function(e,t,n){var r=this,u;return Oe(function(c){return c.g==1?(u=new Ic({zb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),N(c,dm(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?N(c,Fh(u),3):c.return(u)})};function V6(e,t,n,r){var u=new Map,c=hx(n),f=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=K6(e,t,n,h,r,u);f.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Hf:Array.from(u.values())}}function K6(e,t,n,r,u,c){var f={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return z6(r,n.presentationTimeline.qb(),function(A){var k=b_(A),G=void 0;if(!c.has(k)){var ne=A.endTime-A.startTime;ne=sx(t,r.id)*ne,ne=VN(e.g,ne),c.set(k,new qN(A,ne,E,!1))}A.ca&&(G=b_(A.ca),c.has(G)||(ne=.5*sx(t,r.id),ne=VN(e.g,ne),c.set(G,new qN(A.ca,ne,E,!0)))),f.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),E=(E+1)%h}),f}function z6(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function yo(e){if(e.l.g)throw new pt(2,9,7001)}function xy(){if(!O_())throw new pt(2,9,9e3)}function k_(e,t){return Oe(function(n){return n.g==1?(e.i.push(t),oe(n,2),N(n,t,4)):n.g!=2?n.return(n.h):($e(n),gn(e.i,t),Ae(n,0))})}function Y6(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){gn(e.i,n)})}function W6(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function X6(e,t,n,r){var u,c,f;return Oe(function(h){return h.g==1?r.drmInfo?(u=v6(n),c=r.sessionIds.map(function(E){return{sessionId:E,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:dx(r,!1),videoCapabilities:dx(r,!0)}}),N(h,ox(t,e,c),2)):h.return():h.g!=3?(f=h.h,N(h,u.remove(f),3)):N(h,u.add(c.filter(function(E){return!f.includes(E.sessionId)})),0)})}function hx(e){for(var t=new Set,n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=m(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function $6(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}te("shaka.offline.Storage",ao),ao.deleteAll=function(){var e;return Oe(function(t){return t.g==1?(e=new Ko,oe(t,2),N(t,E6(e),2)):t.g!=5?($e(t),N(t,e.destroy(),5)):Ae(t,0)})},ao.prototype.list=ao.prototype.list,ao.prototype.removeEmeSessions=ao.prototype.ji,ao.prototype.remove=ao.prototype.remove,ao.prototype.store=ao.prototype.store,ao.prototype.getNetworkingEngine=ao.prototype.Zb,ao.prototype.getConfiguration=ao.prototype.getConfiguration,ao.prototype.configure=ao.prototype.configure,ao.prototype.destroy=ao.prototype.destroy,ao.support=O_;var Q6=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");UE.offline=O_;function vo(){}function zo(e,t){for(e={priority:t||0,callback:e},t=0;t<_p.length;t++)if(_p[t].priority<e.priority){_p.splice(t,0,e);return}_p.push(e)}te("shaka.polyfill",vo),vo.register=zo,vo.installAll=function(){for(var e=m(_p),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){He("Error installing polyfill!",n)}}};var _p=[];function Tp(){this.g=new My}function px(){p.AbortController||(p.AbortController=Tp,p.AbortSignal=My)}Tp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},v.Object.defineProperties(Tp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),vo.AbortController=Tp,Tp.install=px;function My(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}Y(My,Sr),v.Object.defineProperties(My.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),zo(px);function gx(){}function mx(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())J6(t.value)}function J6(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}vo.Aria=gx,gx.install=mx,zo(mx);function yx(){}function vx(){OM()}vo.EncryptionScheme=yx,yx.install=vx,zo(vx,-2);function Ex(){}function _x(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",gd),document.addEventListener("webkitfullscreenerror",gd),document.addEventListener("mozfullscreenchange",gd),document.addEventListener("mozfullscreenerror",gd),document.addEventListener("MSFullscreenChange",gd),document.addEventListener("MSFullscreenError",gd)}}function gd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}vo.Fullscreen=Ex,Ex.install=_x,zo(_x);function Sp(){}function Tx(){var e=!0;(hs()||uc()||Nr()||ra()||ja()||ia()||Yr("PC=EOS")||ps())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Sx=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=e5)}function e5(e){var t,n,r,u,c,f,h,E,A,k,G,ne,z,ve,Pe,xe,Ge,Te,We;return Oe(function(Ue){switch(Ue.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ue.return(t);if(n=e.video,r=e.audio,e.type=="media-source"){if(!Ao())return Ue.return(t);if(n){if(ia())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var gt=n.contentType;if(n.width&&n.height&&(gt+="; width="+n.width+"; height="+n.height),n.framerate&&(gt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(gt+="; eotf=smpte2084"),gt in Py)var bt=Py[gt];else bt=cast.__platform__.canDisplayType(gt),Py[gt]=bt;u=bt}else u=Ot(n.contentType);else ja()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Ot(c)):u=Ot(n.contentType);if(!u)return Ue.return(t)}if(r&&(ia()&&r.spatialRendering?(h=r.contentType+"; spatialRendering=true",f=Ot(h)):f=Ot(r.contentType),!f))return Ue.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,A=iu(E),!A)||r&&(k=r.contentType,G=iu(k),!G))return Ue.return(t)}else return Ue.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Ue.return(Promise.resolve(t));if(ne=e.keySystemConfiguration,z=[],ve=[],ne.audio&&(Pe={robustness:ne.audio.robustness||"",contentType:e.audio.contentType},ja()&&e.audio.contentType.includes('codecs="ac-3"')&&(Pe={robustness:Pe.robustness,contentType:'audio/mp4; codecs="ec-3"'}),ne.audio.encryptionScheme&&(Pe={robustness:Pe.robustness,contentType:Pe.contentType,encryptionScheme:ne.audio.encryptionScheme}),z.push(Pe)),ne.video&&(xe={robustness:ne.video.robustness||"",contentType:e.video.contentType},ne.video.encryptionScheme&&(xe={robustness:xe.robustness,contentType:xe.contentType,encryptionScheme:ne.video.encryptionScheme}),ve.push(xe)),Ge={initDataTypes:[ne.initDataType],distinctiveIdentifier:ne.distinctiveIdentifier,persistentState:ne.persistentState,sessionTypes:ne.sessionTypes},z.length&&(Ge.audioCapabilities=z),ve.length&&(Ge.videoCapabilities=ve),Te=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,ce(Ue,3),Te in Dy){We=Dy[Te],Ue.u(5);break}return N(Ue,navigator.requestMediaKeySystemAccess(ne.keySystem,[Ge]),6);case 6:We=Ue.h,Dy[Te]=We;case 5:ye(Ue,4);break;case 3:be(Ue);case 4:We&&(t.supported=!0,t.keySystemAccess=We);case 2:return Ue.return(t)}})}vo.MediaCapabilities=Sp,Sp.install=Tx;var Sx=null;Sp.originalMcap=Sx;var Dy={};Sp.memoizedMediaKeySystemAccessRequests_=Dy;var Py={};Sp.memoizedCanDisplayTypeRequests_=Py,zo(Tx,-1);function wx(){}function Ax(){var e=gs();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(Ix(),t5()):15>=e&&Ix():(Nu()||Ru()||Yr("Tizen 4"))&&r5()),(p.MediaSource||p.ManagedMediaSource)&&n5(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&i5()}function Ix(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Qe.apply(0,arguments));return t.abort=function(){},t}}function t5(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function n5(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return vf(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return vf(n)!="mp2t"&&t(n)}}}function r5(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ha(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Ha(n)!="opus"&&t(n)}}}function i5(){var e=MediaSource.isTypeSupported;ra()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(f){return f.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}vo.MediaSource=wx,wx.install=Ax,zo(Ax);function Cx(){}function bx(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?o5():p.orientation!=null&&a5())}function o5(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function a5(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Oy;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}vo.Orientation=Cx,Cx.install=bx;function Oy(){Sr.call(this),this.type="",this.angle=0}Y(Oy,Sr),Oy.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Oy.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},zo(bx);function F_(){}var U_,B_,j_,Z_,G_,q_;function s5(e,t){try{var n=new Ly(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function u5(e){var t=this.mediaKeys;return t&&t!=e&&Rx(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Rx(e,this):Promise.resolve()}function l5(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Za(e.subarray(4),!0),e=qa(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ti(e),this.dispatchEvent(t)}vo.PatchedMediaKeysApple=F_,F_.uninstall=function(){U_&&(U_=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",B_),HTMLMediaElement.prototype.setMediaKeys=j_,p.MediaKeys=Z_,p.MediaKeySystemAccess=G_,navigator.requestMediaKeySystemAccess=q_,B_=q_=j_=G_=Z_=null,p.shakaMediaKeysPolyfill=!1)},F_.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(U_=!0,B_=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),j_=HTMLMediaElement.prototype.setMediaKeys,Z_=p.MediaKeys,G_=p.MediaKeySystemAccess,q_=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=u5,p.MediaKeys=wp,p.MediaKeySystemAccess=Ly,navigator.requestMediaKeySystemAccess=s5,p.shakaMediaKeysPolyfill=!0)};function Ly(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),f=c.next();!f.done;f=c.next())f=f.value,f.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),f=n.next();!f.done;f=n.next())c=f.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ly.prototype.createMediaKeys=function(){var e=new wp(this.keySystem);return Promise.resolve(e)},Ly.prototype.getConfiguration=function(){return this.g};function wp(e){this.h=new WebKitMediaKeys(e),this.g=new Et}wp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new H_(this.h)},wp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Rx(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",l5);try{return Zf(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}wp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function H_(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Et,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new Nx}Y(H_,Sr),g=H_.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var r=this.l.createSession("video/mp4",Qn(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Ti(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(ky(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ky(n,"output-not-allowed");break;default:ky(n,"internal-error")}}),ky(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function ky(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function Nx(){this.size=0,this.g=void 0}g=Nx.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function xx(){}function Mx(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=c5,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=f5,p.MediaKeys=Fy,p.MediaKeySystemAccess=V_,p.shakaMediaKeysPolyfill=!0)}function c5(){return Promise.reject(Error("The key system specified is not supported."))}function f5(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}vo.PatchedMediaKeysNop=xx,xx.install=Mx;function Fy(){throw new TypeError("Illegal constructor.")}Fy.prototype.createSession=function(){},Fy.prototype.setServerCertificate=function(){},Fy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function V_(){throw this.keySystem="",new TypeError("Illegal constructor.")}V_.prototype.getConfiguration=function(){},V_.prototype.createMediaKeys=function(){},zo(Mx,-10);function Dx(){}function Px(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)X_="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=d5,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=h5,p.MediaKeys=Ap,p.MediaKeySystemAccess=Uy,p.shakaMediaKeysPolyfill=!0}}function K_(e){var t=X_;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function d5(e,t){try{var n=new Uy(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function h5(e){var t=this.mediaKeys;return t&&t!=e&&Ox(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Ox(e,this),Promise.resolve()}vo.PatchedMediaKeysWebkit=Dx,Dx.install=Px;function Uy(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(A),r=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(f.videoCapabilities.push(A),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):r=!1),r){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Uy.prototype.createMediaKeys=function(){var e=new Ap(this.g);return Promise.resolve(e)},Uy.prototype.getConfiguration=function(){return this.h};function Ap(e){this.l=e,this.h=null,this.g=new Et,this.i=[],this.j=new Map}function Ox(e,t){e.h=t,e.g.ib();var n=X_;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ti(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=z_(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Wn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=z_(e,r.sessionId))&&(By(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.g.D(t,n+"keyerror",function(r){var u=z_(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),f=r.errorCode;f.systemCode=r.systemCode,c.errorCode=f,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?By(u,"output-restricted"):c==1?By(u,"expired"):By(u,"internal-error"))}}))}Ap.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Y_(t,this.l,e),this.i.push(e),e},Ap.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Ap.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function z_(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Y_(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new kx}Y(Y_,Sr);function Lx(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Qn(qa("LOAD_SESSION|"+n));else{var u=qa("PERSISTENT|");r=li(u,t)}else r=Qn(t)}catch(f){return Promise.reject(f)}e.h=new Rr;var c=K_("generateKeyRequest");try{e.j[c](e.i,r)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new pr(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function W_(e,t,n){if(e.g)e.g.then(function(){return W_(e,t,n)}).catch(function(){return W_(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Kr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=qo(u.keys[0].k),u=qo(u.keys[0].kid)}else r=Qn(n),u=null;var c=K_("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function By(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=Y_.prototype,g.generateRequest=function(e,t){return Lx(this,t,null)},g.load=function(e){return this.l=="persistent-license"?Lx(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return W_(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=K_("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function kx(){this.size=0,this.g=void 0}g=kx.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var X_="";zo(Px);function Fx(){}function Ux(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=g5,Object.defineProperty(e,"disablePictureInPicture",{get:y5,set:v5,enumerable:!0,configurable:!0}),document.exitPictureInPicture=m5,document.addEventListener("webkitpresentationmodechanged",p5,!0))}}function p5(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function g5(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function m5(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function y5(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function v5(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}vo.PiPWebkit=Fx,Fx.install=Ux,zo(Ux);function Bx(){}function jx(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=E5))}function E5(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}vo.RandomUUID=Bx,Bx.install=jx,zo(jx);function Zx(){}function Gx(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:_5})}function _5(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}vo.Symbol=Zx,Zx.install=Gx,zo(Gx);function qx(){}function Hx(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}vo.VideoPlayPromise=qx,qx.install=Hx,zo(Hx);function Vx(){}function Kx(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||ra()&&ou()===38)&&(e.getVideoPlaybackQuality=T5)}}function T5(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}vo.VideoPlaybackQuality=Vx,Vx.install=Kx,zo(Kx);function zx(){}function Yx(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=$_;else if(t==6)e=S5;else{try{var n=!!$_(1,2,"")}catch(r){n=!1}n&&(e=$_)}e&&(p.VTTCue=function(r,u,c){return e(r,u,c)})}}function $_(e,t,n){return new p.TextTrackCue(e,t,n)}function S5(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}vo.VTTCue=zx,zx.install=Yx,zo(Yx);function ba(){}ba.prototype.parseInit=function(){},ba.prototype.setSequenceMode=function(){},ba.prototype.setManifestType=function(){},ba.prototype.parseMedia=function(e,t){var n=null,r=[];e=Kr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=w5.exec(u))){var c=A5.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new bn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},te("shaka.text.LrcTextParser",ba),ba.prototype.parseMedia=ba.prototype.parseMedia,ba.prototype.setManifestType=ba.prototype.setManifestType,ba.prototype.setSequenceMode=ba.prototype.setSequenceMode,ba.prototype.parseInit=ba.prototype.parseInit;var w5=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,A5=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new ba};function ga(){}ga.prototype.parseInit=function(){},ga.prototype.setSequenceMode=function(){},ga.prototype.setManifestType=function(){},ga.prototype.parseMedia=function(e,t,n){var r=Kr(e);if(e=[],r=="")return e;var u=xl(r,"tt");if(!u)throw new pt(2,2,2005,"Failed to parse TTML.");if(r=Aa(u,"body")[0],!r)return[];var c=ua(u,Ip,"frameRate"),f=ua(u,Ip,"subFrameRate"),h=ua(u,Ip,"frameRateMultiplier"),E=ua(u,Ip,"tickRate"),A=ua(u,Ip,"cellResolution"),k=u.attributes["xml:space"]||"default",G=ua(u,Gy,"extent");if(k!="default"&&k!="preserve")throw new pt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new b5(c,f,h,E),A=A&&(A=/^(\d+) (\d+)$/.exec(A))?{Sb:parseInt(A[1],10),rows:parseInt(A[2],10)}:null,f=(f=Aa(u,"metadata")[0])?f.children:[],h=Aa(u,"style"),u=Aa(u,"region"),E=[];for(var ne=m(u),z=ne.next();!z.done;z=ne.next()){var ve=z.value;z=new Br;var Pe=ve.attributes["xml:id"];if(Pe){z.id=Pe;var xe=null;G&&(xe=t1.exec(G)||n1.exec(G)),Pe=xe?Number(xe[1]):null,xe=xe?Number(xe[2]):null;var Ge,Te=jy(ve,h,"extent");if(Te){var We=(Ge=t1.exec(Te))||n1.exec(Te);We!=null&&(z.width=Number(We[1]),z.height=Number(We[2]),Ge||(Pe!=null&&(z.width=100*z.width/Pe),xe!=null&&(z.height=100*z.height/xe)),z.widthUnits=Ge||Pe!=null?qr:0,z.heightUnits=Ge||xe!=null?qr:0)}(ve=jy(ve,h,"origin"))&&(We=(Ge=t1.exec(ve))||n1.exec(ve),We!=null&&(z.viewportAnchorX=Number(We[1]),z.viewportAnchorY=Number(We[2]),Ge?Te||(z.width=100-z.viewportAnchorX,z.widthUnits=qr,z.height=100-z.viewportAnchorY,z.heightUnits=qr):(xe!=null&&(z.viewportAnchorY=100*z.viewportAnchorY/xe),Pe!=null&&(z.viewportAnchorX=100*z.viewportAnchorX/Pe)),z.viewportAnchorUnits=Ge||Pe!=null?qr:0))}else z=null;z&&E.push(z)}if(Wr(r,"p").length)throw new pt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m(Wr(r,"div")),ne=G.next();!ne.done;ne=G.next())if(Wr(ne.value,"span").length)throw new pt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Wx(r,t,c,f,h,u,E,k,A,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function Wx(e,t,n,r,u,c,f,h,E,A,k,G){var ne=A;if(Of(e)){if(!k)return null;var z={tagName:"span",children:[bi(e)],attributes:{},parent:null}}else z=e;for(var ve=null,Pe=m(oM),xe=Pe.next();!xe.done&&!(ve=Zy(z,"backgroundImage",r,"#",xe.value)[0]);xe=Pe.next());Pe=null;var Ge=ua(z,oM,"backgroundImage");if(G&&Ge&&!Ge.startsWith("#")&&(xe=new si(G),Ge=new si(Ge),(xe=xe.resolve(Ge).toString())&&(Pe=xe)),(e.tagName=="p"||ve||Pe)&&(k=!0),e=k,xe=(z.attributes["xml:space"]||(h?"default":"preserve"))=="default",Ge=z.children.every(Of),h=[],!Ge)for(var Te=m(z.children),We=Te.next();!We.done;We=Te.next())(We=Wx(We.value,t,n,r,u,c,f,xe,E,z,k,G))&&h.push(We);if(r=A!=null,G=bi(z),G=z.children.length&&G&&/\S/.test(G),We=z.attributes.begin||z.attributes.end||z.attributes.dur,!(We||G||z.tagName=="br"||h.length!=0||r&&!xe))return null;for(Te=Qx(z,n),G=Te.start,Te=Te.end;ne&&ne.tagName&&ne.tagName!="tt";)Te=C5(ne,n,G,Te),G=Te.start,Te=Te.end,ne=ne.parent;if(G==null&&(G=0),G+=t.periodStart,Te=Te==null?1/0:Te+t.periodStart,G=Math.max(G,t.segmentStart),Te=Math.min(Te,t.segmentEnd),!We&&0<h.length)for(G=1/0,Te=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Te=Math.max(Te,n.endTime);if(z.tagName=="br")return u=new bn(G,Te,""),u.lineBreak=!0,u;if(t="",Ge&&(t=Io(bi(z)||""),xe&&(t=t.replace(/\s+/g," "))),t=new bn(G,Te,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=Zy(z,"region",c,"")[0],z.attributes.region&&E&&E.attributes["xml:id"]){var Ue=E.attributes["xml:id"];t.region=f.filter(function(gt){return gt.id==Ue})[0]}return f=E,A&&r&&!z.attributes.region&&!z.attributes.style&&(f=Zy(A,"region",c,"")[0]),I5(t,z,f,ve,Pe,u,e,h.length==0),t}function I5(e,t,n,r,u,c,f,h){if(f=f||h,Eo(t,n,c,"direction",f)=="rtl"&&(e.direction="rtl"),h=Eo(t,n,c,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Kn),(h=Eo(t,n,c,"textAlign",!0))?(e.positionAlign=x5[h],e.lineAlign=N5[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=Eo(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=Eo(t,n,c,"color",f))&&(e.color=h),(h=Eo(t,n,c,"backgroundColor",f))&&(e.backgroundColor=h),(h=Eo(t,n,c,"border",f))&&(e.border=h),h=Eo(t,n,c,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=Eo(t,n,c,"fontWeight",f))&&h=="bold"&&(e.fontWeight=700),h=Eo(t,n,c,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=Eo(t,n,c,"lineHeight",f))&&h.match(md)&&(e.lineHeight=h),(h=Eo(t,n,c,"fontSize",f))&&(h.match(md)||h.match(R5))&&(e.fontSize=h),(h=Eo(t,n,c,"fontStyle",f))&&(e.fontStyle=no[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=bi(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=Eo(t,n,c,"textOutline",f))&&(r=r.split(" "),r[0].match(md)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(md)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=Eo(t,n,c,"letterSpacing",f))&&r.match(md)&&(e.letterSpacing=r),(r=Eo(t,n,c,"linePadding",f))&&r.match(md)&&(e.linePadding=r),(r=Eo(t,n,c,"opacity",f))&&(e.opacity=parseFloat(r)),(r=jy(n,c,"textDecoration"))&&Xx(e,r),(r=Q_(t,c,"textDecoration"))&&Xx(e,r),(r=Eo(t,n,c,"textCombine",f))&&(e.textCombineUpright=r),Eo(t,n,c,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function Xx(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&gn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&gn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&gn(e.textDecoration,"overline")}}function Eo(e,t,n,r,u){return u=u===void 0?!0:u,(e=Q_(e,n,r))?e:u?jy(t,n,r):null}function jy(e,t,n){if(!e)return null;var r=ua(e,Gy,n);return r||$x(e,t,n)}function Q_(e,t,n){var r=ua(e,Gy,n);return r||$x(e,t,n)}function $x(e,t,n){e=Zy(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=hu(e[u],"urn:ebu:tt:style",n);c||(c=ua(e[u],Gy,n)),c||(c=Q_(e[u],t,n)),c&&(r=c)}return r}function Zy(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var f=e;for(e=null;!e&&!(e=u?hu(f,u,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),f=e.next();!f.done;f=e.next())if(f=f.value,r+f.attributes["xml:id"]==u){c.push(f);break}}return c}function C5(e,t,n,r){return e=Qx(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function Qx(e,t){var n=J_(e.attributes.begin,t),r=J_(e.attributes.end,t);return e=J_(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function J_(e,t){var n=null;if(Jx.test(e)){e=Jx.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(eM.test(e))n=e1(eM,e);else if(tM.test(e))n=e1(tM,e);else if(nM.test(e))e=nM.exec(e),n=Number(e[1])/t.frameRate;else if(rM.test(e))e=rM.exec(e),n=Number(e[1])/t.g;else if(iM.test(e))n=e1(iM,e);else if(e)throw new pt(2,2,2001,"Could not parse cue time range in TTML");return n}function e1(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}te("shaka.text.TtmlTextParser",ga),ga.prototype.parseMedia=ga.prototype.parseMedia,ga.prototype.setManifestType=ga.prototype.setManifestType,ga.prototype.setSequenceMode=ga.prototype.setSequenceMode,ga.prototype.parseInit=ga.prototype.parseInit;function b5(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var t1=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,R5=/^(\d{1,2}(?:\.\d+)?|100)%$/,md=/^(\d+px|\d+em|\d*\.?\d+c)$/,n1=/^(\d+)px (\d+)px$/,Jx=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,eM=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,tM=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,nM=/^(\d*(?:\.\d*)?)f$/,rM=/^(\d*(?:\.\d*)?)t$/,iM=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),N5={left:Cn,center:"center",right:"end",start:Cn,end:"end"},x5={left:"line-left",center:"center",right:"line-right"},Ip=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Gy=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],oM=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new ga};function Lo(){this.g=new ga}Lo.prototype.parseInit=function(e){var t=!1;if(new kr().box("moov",vr).box("trak",vr).box("mdia",vr).box("minf",vr).box("stbl",vr).O("stsd",fu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new pt(2,2,2007)},Lo.prototype.setSequenceMode=function(){},Lo.prototype.setManifestType=function(){},Lo.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[];if(new kr().box("mdat",Hu(function(f){u=!0,c=c.concat(r.g.parseMedia(f,t,n))})).parse(e,!1),!u)throw new pt(2,2,2007);return c},te("shaka.text.Mp4TtmlParser",Lo),Lo.prototype.parseMedia=Lo.prototype.parseMedia,Lo.prototype.setManifestType=Lo.prototype.setManifestType,Lo.prototype.setSequenceMode=Lo.prototype.setSequenceMode,Lo.prototype.parseInit=Lo.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Lo},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Lo};function ko(){this.h=!1,this.g="UNKNOWN"}ko.prototype.parseInit=function(){},ko.prototype.setSequenceMode=function(e){this.h=e},ko.prototype.setManifestType=function(e){this.g=e},ko.prototype.parseMedia=function(e,t){e=Kr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new pt(2,2,2e3);if(e=qy(new Oc(e[1])),e==null)throw new pt(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=m(n[0].split("\n"));for(var u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new Oc(u);var c=new Br;Lc(u),cd(u);for(var f=Lc(u);f;){var h=c,E=f;(f=/^id=(.*)$/.exec(E))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(E))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),cd(u),f=Lc(u)}t.push(c)}for(r=new Map,aM(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],f=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(c[E]),c[E].includes("}")&&(f=-1));for(h=m(h),f=h.next();!f.done;f=h.next()){var A=f.value;f="global",(E=A[0].match(/\((.*)\)/))&&(f=E.pop()),E=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(E=A[1].split(";")),(A=r.get(f))||(A=new bn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var ne=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(ne){var z=ne[2].trim().replace(";","");switch(ne[1].trim()){case"background-color":case"background":k=!0,A.backgroundColor=z;break;case"color":k=!0,A.color=z;break;case"font-family":k=!0,A.fontFamily=z;break;case"font-size":k=!0,A.fontSize=z;break;case"font-weight":(700<=parseInt(z,10)||z=="bold")&&(k=!0,A.fontWeight=700);break;case"font-style":switch(z){case"normal":k=!0,A.fontStyle=Yi;break;case"italic":k=!0,A.fontStyle="italic";break;case"oblique":k=!0,A.fontStyle="oblique"}break;case"opacity":k=!0,A.opacity=parseFloat(z);break;case"text-combine-upright":k=!0,A.textCombineUpright=z;break;case"text-shadow":k=!0,A.textShadow=z;break;case"white-space":k=!0,A.wrapLine=z!="noWrap"}}}k&&r.set(f,A)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),f=new Oc(c[0]),E=qy(f),G=Ll(f,/[ \t]+--\x3e[ \t]+/g),A=qy(f),E==null||G==null||A==null)He("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,A+=k,c=c.slice(1).join("\n").trim(),r.has("global")?(k=r.get("global").clone(),k.startTime=E,k.endTime=A,k.payload=""):k=new bn(E,A,""),cd(f),E=Lc(f);E;)lM(k,E,t),cd(f),E=Lc(f);sM(c,k,r),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function aM(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new bn(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(Cr)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new bn(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function sM(e,t,n){if(e.includes("<")){n.size===0&&aM(n);var r=e;e=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(cM)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e=r;e:{c=e,u=[];var f=-1;e="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){r=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===E)e+="/"+E+">";else{if(!A.startsWith("v")){e+=c[h];continue}e+="/"+A+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(f=h+1,c[f]!="v"&&(f=-1)):c[h]===">"&&0<f&&(u.push(c.substr(f,h-f)),f=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,f=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+f+">"),e=e.replace("</"+u+">","</"+f+">"),r||(e+="</"+f+">")}e=M5(e);try{var k=xl("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())uM(e.value,t,n);else t.payload=Io(e);else t.payload=Io(e)}else t.payload=Io(e)}function M5(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Cp(e,t){return e&&0<e.length?e:t}function uM(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Br,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var f=c=c.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(f=n.get(f))&&(r.backgroundColor=Cp(f.backgroundColor,r.backgroundColor),r.color=Cp(f.color,r.color),r.fontFamily=Cp(f.fontFamily,r.fontFamily),r.fontSize=Cp(f.fontSize,r.fontSize),r.textShadow=Cp(f.textShadow,r.textShadow),r.fontWeight=f.fontWeight,r.fontStyle=f.fontStyle,r.opacity=f.opacity,r.rubyTag=f.rubyTag,r.textCombineUpright=f.textCombineUpright,r.wrapLine=f.wrapLine),c){case"br":r=Rn(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=qy(new Oc(c)))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,Of(e)||u.length==1&&Of(u[0]))for(n=bi(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=Io(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())uM(e.value,r,n)}function lM(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(r=/^region:(.*)$/.exec(t))?(t=D5(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=cn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function D5(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function qy(e){if(e=Ll(e,cM),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}te("shaka.text.VttTextParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit;var cM=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new ko},ji['text/vtt; codecs="vtt"']=function(){return new ko},ji['text/vtt; codecs="wvtt"']=function(){return new ko};function Ra(){this.g=null}Ra.prototype.parseInit=function(e){var t=this,n=!1;if(new kr().box("moov",vr).box("trak",vr).box("mdia",vr).O("mdhd",function(r){r=At(r.reader,r.version),t.g=r.timescale}).box("minf",vr).box("stbl",vr).O("stsd",fu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new pt(2,2,2008);if(!n)throw new pt(2,2,2008)},Ra.prototype.setSequenceMode=function(){},Ra.prototype.setManifestType=function(){},Ra.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new pt(2,2,2008);var n=0,r=[],u,c=[],f=!1,h=!1,E=!1,A=null;if(new kr().box("moof",vr).box("traf",vr).O("tfdt",function(We){f=!0,n=ir(We.reader,We.version).baseMediaDecodeTime}).O("tfhd",function(We){A=rr(We.reader,We.flags).Wf}).O("trun",function(We){h=!0,r=Xt(We.reader,We.version,We.flags).vg}).box("mdat",Hu(function(We){E=!0,u=We})).parse(e,!1),!E&&!f&&!h)throw new pt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(r),ne=G.next();!ne.done;ne=G.next()){ne=ne.value;var z=ne.wf||A,ve=ne.he?n+ne.he:e;e=ve+(z||0);var Pe=0;do{var xe=k.M();Pe+=xe;var Ge=k.M(),Te=null;Df(Ge)=="vttc"?8<xe&&(Te=k.sb(xe-8)):k.skip(xe-8),z&&Te&&(xe=P5(Te,t.periodStart+ve/this.g,t.periodStart+e/this.g),c.push(xe))}while(ne.sampleSize&&Pe<ne.sampleSize)}return c.filter(Pu)};function P5(e,t,n){var r,u,c;return new kr().box("payl",Hu(function(f){r=Kr(f)})).box("iden",Hu(function(f){u=Kr(f)})).box("sttg",Hu(function(f){c=Kr(f)})).parse(e),r?O5(r,u,c,t,n):null}function O5(e,t,n,r,u){if(r=new bn(r,u,""),sM(e,r,new Map),t&&(r.id=t),n)for(e=new Oc(n),t=Lc(e);t;)lM(r,t,[]),cd(e),t=Lc(e);return r}te("shaka.text.Mp4VttParser",Ra),Ra.prototype.parseMedia=Ra.prototype.parseMedia,Ra.prototype.setManifestType=Ra.prototype.setManifestType,Ra.prototype.setSequenceMode=Ra.prototype.setSequenceMode,Ra.prototype.parseInit=Ra.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new Ra};function Na(){}Na.prototype.parseInit=function(){},Na.prototype.setSequenceMode=function(){},Na.prototype.setManifestType=function(){},Na.prototype.parseMedia=function(e){var t=Kr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new Oc(n[0]),u=fM(r),c=Ll(r,/,/g);if(r=fM(r),u==null||c==null||r==null)throw new pt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new bn(u,r,n.slice(1).join("\n").trim()))}return e};function fM(e){if(e=Ll(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}te("shaka.text.SbvTextParser",Na),Na.prototype.parseMedia=Na.prototype.parseMedia,Na.prototype.setManifestType=Na.prototype.setManifestType,Na.prototype.setSequenceMode=Na.prototype.setSequenceMode,Na.prototype.parseInit=Na.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Na};function ma(){this.g=new ko}ma.prototype.parseInit=function(){},ma.prototype.setSequenceMode=function(){},ma.prototype.setManifestType=function(){},ma.prototype.parseMedia=function(e,t,n){return e=Kr(e),e=dM(e),e=Qn(qa(e)),this.g.parseMedia(e,t,n)};function dM(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}te("shaka.text.SrtTextParser",ma),ma.srt2webvtt=dM,ma.prototype.parseMedia=ma.prototype.parseMedia,ma.prototype.setManifestType=ma.prototype.setManifestType,ma.prototype.setSequenceMode=ma.prototype.setSequenceMode,ma.prototype.parseInit=ma.prototype.parseInit,ji["text/srt"]=function(){return new ma};function xa(){}xa.prototype.parseInit=function(){},xa.prototype.setSequenceMode=function(){},xa.prototype.setManifestType=function(){},xa.prototype.parseMedia=function(e){var t="",n="";e=Kr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next()){var u=k5.exec(r.value);u&&(r=u[1],u=u[2],r=="V4 Styles"||r=="V4+ Styles"?t=u:r=="Events"&&(n=u))}e=[],r=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=gM.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")r=c.split(Hy);else if(u=="Style"){u=c.split(Hy),c={};for(var f=0;f<r.length&&f<u.length;f++)c[r[f]]=u[f];e.push(c)}}for(r=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(f=gM.exec(c))){if(c=f[1].trim(),f=f[2].trim(),c=="Format")t=f.split(Hy);else if(c=="Dialogue"){f=f.split(Hy),c={};for(var h=0;h<t.length&&h<f.length;h++)c[t[h]]=f[h];h=pM(c.Start);var E=pM(c.End);f=new bn(h,E,f.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(A){return function(k){return k.Name==A.re}}(u)))&&L5(f,c),r.push(f)}}return r};function L5(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=hM(n))&&(e.color=n),(n=t.BackColour)&&(n=hM(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function hM(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function pM(e){return e=F5.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}te("shaka.text.SsaTextParser",xa),xa.prototype.parseMedia=xa.prototype.parseMedia,xa.prototype.setManifestType=xa.prototype.setManifestType,xa.prototype.setSequenceMode=xa.prototype.setSequenceMode,xa.prototype.parseInit=xa.prototype.parseInit;var k5=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,gM=/^\s*([^:]+):\s*(.*)/,Hy=/\s*,\s*/,F5=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new xa};function mM(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function yM(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,Ea:"mp4a.40."+u}}function vM(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function U5(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Ma(e){this.i=e,this.h=0,this.g=new Map}g=Ma.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Do(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){for(var u=Qn(e),c=Nn(u),f=c.length;f<u.length&&!vM(u,f);f++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=yM(u,f),!n)return Promise.reject(new pt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];f<u.length;){var h=mM(u,f);if(!h)return Promise.reject(new pt(2,3,3018));var E=h.Qd+h.U;f+E<=u.length&&c.push({data:u.subarray(f+h.Qd,f+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),f+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new dd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=hd(e),this.g.set(t.id,r)),t=mp(e),this.h++,t=li(r,t),Promise.resolve(t)},te("shaka.transmuxer.AacTransmuxer",Ma),Ma.prototype.transmux=Ma.prototype.transmux,Ma.prototype.getOriginalMimeType=Ma.prototype.getOriginalMimeType,Ma.prototype.convertCodecs=Ma.prototype.convertCodecs,Ma.prototype.isSupported=Ma.prototype.isSupported,Ma.prototype.destroy=Ma.prototype.destroy,So("audio/aac",function(){return new Ma("audio/aac")},Ci);function EM(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,f=0;c===2?f+=2:(c&1&&c!==1&&(f+=2),c&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|f<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+f,ga:e,U:u}}function B5(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var f=Math.min(r,8),h=8-f;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<f|u:u,t+=1,r-=f}if(16>n)return!0}return!1}function Ja(e){this.i=e,this.h=0,this.g=new Map}g=Ja.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&!B5(e,c);c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=EM(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new dd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=hd(e),this.g.set(t.id,r)),t=mp(e),this.h++,t=li(r,t),Promise.resolve(t)},te("shaka.transmuxer.Ac3Transmuxer",Ja),Ja.prototype.transmux=Ja.prototype.transmux,Ja.prototype.getOriginalMimeType=Ja.prototype.getOriginalMimeType,Ja.prototype.convertCodecs=Ja.prototype.convertCodecs,Ja.prototype.isSupported=Ja.prototype.isSupported,Ja.prototype.destroy=Ja.prototype.destroy,So("audio/ac3",function(){return new Ja("audio/ac3")},Ci);function _M(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new xn(e.subarray(t+2));Gn(n,2),Gn(n,3);var r=It(n,11)+1<<1,u=It(n,2);if(u==3){u=It(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=It(n,2);var f=It(n,3),h=It(n,1);return n=It(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][f]+h,ga:e,U:r})}function es(e){this.i=e,this.h=0,this.g=new Map}g=es.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=Nn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=_M(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new dd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=hd(e),this.g.set(t.id,r)),t=mp(e),this.h++,t=li(r,t),Promise.resolve(t)},te("shaka.transmuxer.Ec3Transmuxer",es),es.prototype.transmux=es.prototype.transmux,es.prototype.getOriginalMimeType=es.prototype.getOriginalMimeType,es.prototype.convertCodecs=es.prototype.convertCodecs,es.prototype.isSupported=es.prototype.isSupported,es.prototype.destroy=es.prototype.destroy,So("audio/ec3",function(){return new es("audio/ec3")},Ci);function j5(e){if(!e.length)return null;var t=e.find(function(Pe){return Pe.type==7});if(e=e.find(function(Pe){return Pe.type==8}),!t||!e)return null;var n=new xn(t.data),r=tt(n);if(tt(n),tt(n),En(n),G5.includes(r)&&(r=Lt(n),r===3&&Gn(n,1),En(n),En(n),Gn(n,1),ut(n))){r=r!==3?8:12;for(var u=0;u<r;u++)ut(n)&&(6>u?qt(n,16):qt(n,64))}if(En(n),r=Lt(n),r===0)Lt(n);else if(r===1)for(Gn(n,1),En(n),En(n),r=Lt(n),u=0;u<r;u++)En(n);En(n),Gn(n,1);var c=Lt(n),f=Lt(n),h=It(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,A=0,k=0,G=0;if(ut(n)&&(E=Lt(n),A=Lt(n),k=Lt(n),G=Lt(n)),u=r=1,ut(n)&&ut(n)){var ne=tt(n),z=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ve=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<ne&&16>=ne?(r=z[ne-1],u=ve[ne-1]):ne===255&&(r=It(n,16),u=It(n,16))}return n=(2-h)*(f+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*A,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:r,ya:u}}function Z5(e){var t=!1,n=[],r=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var f=!1;switch(c.type){case 1:f=u=!0;var h=c.data;r&&4<h.length&&(h=Ke(new xn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=u=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:u=f=!0;break;case 12:f=!0;break;default:f=!1}u&&f&&(f=c.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(c.fullData))}return n.length?{data:li.apply(Pi,T(n)),jd:t}:null}var G5=[100,110,122,244,44,83,86,118,128,138,139,134];function q5(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),r=e.find(function(f){return f.type==34});if(!t||!n||!r)return null;var u=H5(t.fullData);e=V5(n.fullData);var c=K5(r.fullData);return t=z5(t.fullData,n.fullData,r.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function H5(e){var t=new xn(e,!0);return tt(t),tt(t),It(t,4),It(t,2),It(t,6),e=It(t,3),t=ut(t),{jf:e+1,Gf:t}}function V5(e){e=new xn(e,!0),tt(e),tt(e);var t=0,n=0,r=0,u=0;It(e,4);var c=It(e,3);ut(e);for(var f=It(e,2),h=It(e,1),E=It(e,5),A=tt(e),k=tt(e),G=tt(e),ne=tt(e),z=tt(e),ve=tt(e),Pe=tt(e),xe=tt(e),Ge=tt(e),Te=tt(e),We=tt(e),Ue=[],gt=[],bt=0;bt<c;bt++)Ue.push(ut(e)),gt.push(ut(e));if(0<c)for(bt=c;8>bt;bt++)It(e,2);for(bt=0;bt<c;bt++)Ue[bt]&&It(e,88),gt[bt]&&tt(e);Lt(e),Ue=Lt(e),Ue==3&&It(e,1),gt=Lt(e),bt=Lt(e),ut(e)&&(t+=Lt(e),n+=Lt(e),r+=Lt(e),u+=Lt(e));var Ht=Lt(e),Ut=Lt(e),vt=Lt(e);if(ut(e))for(var jt=0;jt<=c;jt++)Lt(e),Lt(e),Lt(e);else Lt(e),Lt(e),Lt(e);if(Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),ut(e)&&ut(e))for(jt=0;4>jt;jt++)for(var ln=0;ln<(jt===3?2:6);ln++)if(ut(e)){var pn=Math.min(64,1<<4+(jt<<1));1<jt&&On(e);for(var Ln=0;Ln<pn;Ln++)On(e)}else Lt(e);for(ut(e),ut(e),ut(e)&&(tt(e),Lt(e),Lt(e),ut(e)),jt=Lt(e),pn=ln=0;pn<jt;pn++)if(Ln=!1,pn!==0&&(Ln=ut(e)),Ln){pn===jt&&Lt(e),ut(e),Lt(e);for(var Mn=Ln=0;Mn<=ln;Mn++){var qn=ut(e),Yn=!1;qn||(Yn=ut(e)),(qn||Yn)&&Ln++}ln=Ln}else{for(Mn=Lt(e),Ln=Lt(e),ln=Mn+Ln,qn=0;qn<Mn;qn++)Lt(e),ut(e);for(Mn=0;Mn<Ln;Mn++)Lt(e),ut(e)}if(ut(e))for(jt=Lt(e),ln=0;ln<jt;ln++){for(pn=0;pn<vt+4;pn++)It(e,1);It(e,1)}if(jt=vt=1,ln=0,ut(e),ut(e),ut(e)){if(ut(e)&&(pn=tt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<pn&&16>=pn?(vt=Ln[pn-1],jt=Mn[pn-1]):pn===255&&(vt=It(e,16),jt=It(e,16))),ut(e)&&ut(e),ut(e)&&(It(e,3),ut(e),ut(e)&&(tt(e),tt(e),tt(e))),ut(e)&&(Lt(e),Lt(e)),ut(e),ut(e),ut(e),(pn=ut(e))&&(Lt(e),Lt(e),Lt(e),Lt(e)),ut(e)&&(It(e,32),It(e,32),ut(e)&&Lt(e),ut(e)))for(Mn=!1,pn=ut(e),Ln=ut(e),(pn||Ln)&&((Mn=ut(e))&&(tt(e),It(e,5),ut(e),It(e,5)),It(e,4),It(e,4),Mn&&It(e,4),It(e,5),It(e,5),It(e,5)),qn=0;qn<=c;qn++){var Vn=!0;Yn=1,ut(e)||(Vn=ut(e));var xr=!1;if(Vn?Lt(e):xr=ut(e),xr||(Yn=Lt(e)+1),pn){for(Vn=0;Vn<Yn;Vn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));ut(e)}if(Ln){for(Vn=0;Vn<Yn;Vn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));ut(e)}}ut(e)&&(ut(e),ut(e),ut(e),ln=Lt(e),Lt(e),Lt(e),Lt(e),Lt(e))}return{Ke:We,Qe:f,Re:h,Pe:E,Le:A,Me:k,Ne:G,Oe:ne,Ee:z,Fe:ve,Ge:Pe,He:xe,Ie:Ge,Je:Te,be:ln,Be:0,Ae:Ue,ze:Ht,ye:Ut,width:gt-(t+n)*(Ue===1||Ue===2?2:1),height:bt-(r+u)*(Ue===1?2:1),pi:vt,oi:jt}}function K5(e){var t=new xn(e,!0);tt(t),tt(t),Lt(t),Lt(t),ut(t),ut(t),It(t,3),ut(t),ut(t),Lt(t),Lt(t),On(t),ut(t),ut(t),ut(t)&&Lt(t),On(t),On(t),ut(t),ut(t),ut(t),ut(t),e=ut(t),t=ut(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function z5(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.Qe&3)<<6|(r.Re?1:0)<<5|r.Pe&31,u[2]=r.Le,u[3]=r.Me,u[4]=r.Ne,u[5]=r.Oe,u[6]=r.Ee,u[7]=r.Fe,u[8]=r.Ge,u[9]=r.He,u[10]=r.Ie,u[11]=r.Je,u[12]=r.Ke,u[13]=240|(r.be&3840)>>8,u[14]=r.be&255,u[15]=252|r.pf&3,u[16]=252|r.Ae&3,u[17]=248|r.ze&7,u[18]=248|r.ye&7,u[19]=0,u[20]=0,u[21]=(r.Be&3)<<6|(r.jf&7)<<3|(r.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function Vy(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var f=e[t+3]>>6;u=1e3*Y5[14*(n===3?3-r:r===3?3:4)+u-1],c=W5[3*(n===3?0:n===2?1:2)+c],n=X5[n][r];var h=$5[r],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&r===2&&224e3<=u&&f===0&&(e[t+3]|=128),{sampleRate:c,channelCount:f===3?1:2,U:E,ni:8*n*h}}return null}function TM(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function SM(e,t){if(t+1<e.length&&TM(e,t)){var n=Vy(e,t),r=4;return n&&n.U&&(r=n.U),t+=r,t===e.length||t+1<e.length&&TM(e,t)}return!1}var Y5=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],W5=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],X5=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],$5=[0,1,1,4];function ts(e){this.i=e,this.h=0,this.g=new Map}g=ts.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){n=Qn(e);for(var u=Nn(n).length;u<n.length&&!SM(n,u);u++);var c;for(e=[];u<n.length;){var f=Vy(n,u);if(!f)return Promise.reject(new pt(2,3,3018));c||(c=f),u+f.U<=n.length&&e.push({data:n.subarray(u,u+f.U),size:f.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=f.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new dd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=hd(c),this.g.set(t.id,r)),t=mp(c),this.h++,t=li(r,t),Promise.resolve(t)):Promise.reject(new pt(2,3,3018))},te("shaka.transmuxer.Mp3Transmuxer",ts),ts.prototype.transmux=ts.prototype.transmux,ts.prototype.getOriginalMimeType=ts.prototype.getOriginalMimeType,ts.prototype.convertCodecs=ts.prototype.convertCodecs,ts.prototype.isSupported=ts.prototype.isSupported,ts.prototype.destroy=ts.prototype.destroy,So("audio/mpeg",function(){return new ts("audio/mpeg")},Ci);function ns(e){this.h=e,this.g=null}g=ns.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Do(e).split(","),n=Co("audio",t);return t=Co("video",t),!n||t||Sa(n)!="mp3"?!1:Ot(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new Ve,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new pt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(r=Vy(t,n))?(n+r.U<=t.length&&(u=li(u,t.subarray(n,n+r.U))),n+=r.U):n++;return Promise.resolve(u)},te("shaka.transmuxer.MpegTsTransmuxer",ns),ns.prototype.transmux=ns.prototype.transmux,ns.prototype.getOriginalMimeType=ns.prototype.getOriginalMimeType,ns.prototype.convertCodecs=ns.prototype.convertCodecs,ns.prototype.isSupported=ns.prototype.isSupported,ns.prototype.destroy=ns.prototype.destroy,So("video/mp2t",function(){return new ns("video/mp2t")},ml);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Da(e){this.h=e,(this.g=f_.get("ISOBoxer")())&&Q5(this)}function Q5(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==J5[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=Da.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new pt(2,3,3020));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var f=u.fetch("tfdt"),h=u.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,c),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var ne=u.fetch("saio");if(ne===null){ne=this.g.createFullBox("saio",h),ne.version=0,ne.flags=0,ne.entry_count=1,ne.offset=[0];var z=this.g.createFullBox("saiz",h);if(z.version=0,z.flags=0,z.sample_count=G.sample_count,z.default_sample_info_size=0,z.sample_info_size=[],G.flags&2)for(r=0;r<G.sample_count;r+=1)z.sample_info_size[r]=10+6*G.entry[r].NumberOfEntries;else z.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ve=u.fetch("moof");E.data_offset=ve.getLength()+8;var Pe=u.fetch("saio");Pe!==null&&(Pe.offset[0]=wM(ve,"traf")+wM(h,"senc")+16);var xe=Qn(u.write());return Promise.resolve(xe)}catch(Ge){return Ge instanceof pt?Promise.reject(Ge):Promise.reject(new pt(2,3,3022))}};function wM(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}te("shaka.transmuxer.MssTransmuxer",Da),Da.prototype.transmux=Da.prototype.transmux,Da.prototype.getOriginalMimeType=Da.prototype.getOriginalMimeType,Da.prototype.convertCodecs=Da.prototype.convertCodecs,Da.prototype.isSupported=Da.prototype.isSupported,Da.prototype.destroy=Da.prototype.destroy;var J5=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);So("mss/audio/mp4",function(){return new Da("mss/audio/mp4")},Ci),So("mss/video/mp4",function(){return new Da("mss/video/mp4")},Ci);function rs(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=rs.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Do(n).split(",");return n=Co("audio",r),r=Co("video",r),n&&(n=Sa(n),!ej.includes(n))||r&&(n=Sa(r),!tj.includes(n))?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Do(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,r,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var f=Nn(c),h=f.length;h<c.length;h++)if(SM(c,h))return Promise.reject(new pt(2,3,3018));for(h=f.length;h<c.length;h++)if(vM(c,h))return this.h||(this.h=new Ma("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new pt(2,3,3018))}this.j?this.j.clearData():this.j=new Ve;var E=this.j.parse(c),A=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var ne=[],z=null,ve=[],Pe=E.xc();if(!Pe.length)throw new pt(2,3,3023);for(var xe=0;xe<Pe.length;xe++){var Ge=Pe[xe],Te=Ge.nalus;ve.push.apply(ve,T(Te));var We=Z5(Te);if(We){z==null&&(z=Ge.dts);var Ue=void 0;Ue=xe+1<Pe.length?(Pe[xe+1].dts||0)-(Ge.dts||0):1<Pe.length?(Ge.dts||0)-(Pe[xe-1].dts||0):9e4*(n.endTime-n.startTime),ne.push({data:We.data,size:We.data.byteLength,duration:Ue,Ta:Math.round((Ge.pts||0)-(Ge.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:We.jd?2:1,Wa:We.jd?0:1}})}}var gt=j5(ve);if(!gt||z==null)throw new pt(2,3,3018);t.height=gt.height,t.width=gt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:gt.oa,xa:gt.xa,ya:gt.ya,data:{jb:this.g,baseMediaDecodeTime:z,Ra:ne},stream:t};break;case"hvc":var bt=[],Ht=null,Ut=[],vt=E.xc();if(!vt.length)throw new pt(2,3,3023);for(var jt=0;jt<vt.length;jt++){var ln=vt[jt],pn=ln.nalus;Ut.push.apply(Ut,T(pn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(pn),Vn=Yn.next();!Vn.done;Vn=Yn.next()){var xr=Vn.value;switch(xr.type){case 1:case 0:var fi=qn=!0;break;case 19:case 20:case 21:Ln=fi=qn=!0;break;case 32:fi=!0;break;case 33:fi=!0;break;case 34:fi=!0;break;case 35:qn=fi=!0;break;case 39:case 40:fi=!0;break;default:fi=!1}if(qn&&fi){var Li=xr.fullData.byteLength,ci=new Uint8Array(4);ci[0]=Li>>24&255,ci[1]=Li>>16&255,ci[2]=Li>>8&255,ci[3]=Li&255,Mn.push(ci),Mn.push(xr.fullData)}}var gi=Mn.length?{data:li.apply(Pi,T(Mn)),jd:Ln}:null;if(gi){Ht==null&&ln.dts!=null&&(Ht=ln.dts);var Gr=void 0;Gr=jt+1<vt.length?(vt[jt+1].dts||0)-(ln.dts||0):1<vt.length?(ln.dts||0)-(vt[jt-1].dts||0):9e4*(n.endTime-n.startTime),bt.push({data:gi.data,size:gi.data.byteLength,duration:Gr,Ta:Math.round((ln.pts||0)-(ln.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:gi.jd?2:1,Wa:gi.jd?0:1}})}}var fo=q5(Ut);if(!fo||Ht==null)throw new pt(2,3,3018);t.height=fo.height,t.width=fo.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:fo.oa,xa:fo.xa,ya:fo.ya,data:{jb:this.g,baseMediaDecodeTime:Ht,Ra:bt},stream:t}}G&&(A.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Fo=[],ai,Hs=null,Uc=m(E.Fb()),Bc=Uc.next();!Bc.done;Bc=Uc.next()){var yd=Bc.value,rl=yd.data;if(rl){var Vs=0;if(ai=yM(rl,Vs),!ai)throw new pt(2,3,3018);for(t.audioSamplingRate=ai.sampleRate,t.channelsCount=ai.channelCount,Hs==null&&yd.pts!==null&&(Hs=yd.pts);Vs<rl.length;){var il=mM(rl,Vs);if(il){var Ul=il.Qd+il.U;Vs+Ul<=rl.length&&Fo.push({data:rl.subarray(Vs+il.Qd,Vs+Ul),size:il.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Vs+=Ul}else Vs++}}}if(!ai||Hs==null){if(!E.xc().length)throw new pt(2,3,3018);Hs=9e4*n.startTime;var vd=Co("audio",t.codecs.split(","));if(!vd||!t.channelsCount||!t.audioSamplingRate)throw new pt(2,3,3018);ai={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:vd};var Ed=U5(vd,t.channelsCount);if(!Ed)throw new pt(2,3,3018);for(var zy=Hs+9e4*(n.endTime-n.startTime),_d=Hs;_d<zy;)Fo.push({data:Ed,size:Ed.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),_d+=1024/ai.sampleRate*9e4}var Np=ai.sampleRate,Yy=Hs/9e4*Np;G={id:t.id,type:"audio",codecs:ai.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Np,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:Yy,Ra:Fo},stream:t};break;case"ac3":for(var Es=[],Wy=0,i1=new Uint8Array([]),Xy=null,LM=m(E.Fb()),o1=LM.next();!o1.done;o1=LM.next()){var a1=o1.value,s1=a1.data;Xy==null&&a1.pts!==null&&(Xy=a1.pts);for(var Td=0;Td<s1.length;){var Bl=EM(s1,Td);Bl?(t.audioSamplingRate=Bl.sampleRate,t.channelsCount=Bl.channelCount,Wy=Bl.sampleRate,i1=Bl.ga,Es.push({data:s1.subarray(Td,Td+Bl.U),size:Bl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Td+=Bl.U):Td++}}if(Wy==0||i1.byteLength==0||Xy==null)throw new pt(2,3,3018);var ij=Xy/9e4*Wy;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Wy,duration:r,Sa:[],ga:i1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:ij,Ra:Es},stream:t};break;case"ec3":for(var kM=[],$y=0,u1=new Uint8Array([]),Qy=null,FM=m(E.Fb()),l1=FM.next();!l1.done;l1=FM.next()){var c1=l1.value,f1=c1.data;Qy==null&&c1.pts!==null&&(Qy=c1.pts);for(var Sd=0;Sd<f1.length;){var jl=_M(f1,Sd);jl?(t.audioSamplingRate=jl.sampleRate,t.channelsCount=jl.channelCount,$y=jl.sampleRate,u1=jl.ga,kM.push({data:f1.subarray(Sd,Sd+jl.U),size:jl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Sd+=jl.U):Sd++}}if($y==0||u1.byteLength==0||Qy==null)throw new pt(2,3,3018);var oj=Qy/9e4*$y;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:$y,duration:r,Sa:[],ga:u1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:oj,Ra:kM},stream:t};break;case"mp3":for(var UM=[],Jy,ev=null,BM=m(E.Fb()),d1=BM.next();!d1.done;d1=BM.next()){var h1=d1.value,xp=h1.data;if(xp){ev==null&&h1.pts!==null&&(ev=h1.pts);for(var jc=0;jc<xp.length;){var wd=Vy(xp,jc);wd?(Jy||(Jy=wd),jc+wd.U<=xp.length&&UM.push({data:xp.subarray(jc,jc+wd.U),size:wd.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),jc+=wd.U):jc++}}}if(!Jy||ev==null)throw new pt(2,3,3018);var jM=Jy.sampleRate,aj=ev/9e4*jM;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:jM,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:aj,Ra:UM},stream:t};break;case"opus":var ZM=[],tv=null,vu=E.F;if(!vu)throw new pt(2,3,3018);var Uo=[];switch(vu.Zg){case 1:case 2:Uo=[0];break;case 0:Uo=[255,1,1,0,1];break;case 128:Uo=[255,2,0,0,1];break;case 3:Uo=[1,2,1,0,2,1];break;case 4:Uo=[1,2,2,0,1,2,3];break;case 5:Uo=[1,3,2,0,4,1,2,3];break;case 6:Uo=[1,4,2,0,4,1,2,3,5];break;case 7:Uo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Uo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Uo=[1,1,2,0,1];break;case 131:Uo=[1,1,3,0,1,2];break;case 132:Uo=[1,1,4,0,1,2,3];break;case 133:Uo=[1,1,5,0,1,2,3,4];break;case 134:Uo=[1,1,6,0,1,2,3,4,5];break;case 135:Uo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Uo=[1,1,8,0,1,2,3,4,5,6,7]}for(var GM=new Uint8Array([0,vu.channelCount,0,0,vu.sampleRate>>>24&255,vu.sampleRate>>>17&255,vu.sampleRate>>>8&255,vu.sampleRate>>>0&255,0,0].concat(T(Uo))),qM=vu.sampleRate,HM=m(E.Fb()),p1=HM.next();!p1.done;p1=HM.next()){var g1=p1.value,Ad=g1.data;tv==null&&g1.pts!==null&&(tv=g1.pts);for(var Mp=0;Mp<Ad.length;){for(var sj=(Ad[Mp+1]&16)!==0,uj=(Ad[Mp+1]&8)!==0,ol=Mp+2,nv=0;Ad[ol]===255;)nv+=255,ol+=1;nv+=Ad[ol],ol+=1,ol+=sj?2:0,ol+=uj?2:0;var VM=Ad.slice(ol,ol+nv);ZM.push({data:VM,size:VM.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Mp=ol+nv}}if(GM.byteLength==0||tv==null)throw new pt(2,3,3018);t.audioSamplingRate=vu.sampleRate,t.channelsCount=vu.channelCount;var lj=tv/9e4*qM;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:qM,duration:r,Sa:[],ga:GM,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:lj,Ra:ZM},stream:t}}G&&(A.push(G),G=null)}}catch(y1){return y1&&y1.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(y1)}if(!A.length)return Promise.reject(new pt(2,3,3018));var KM=new dd(A);if(this.i.has(t.id))var m1=this.i.get(t.id);else m1=hd(KM),this.i.set(t.id,m1);var cj=mp(KM);this.g++;var fj=li(m1,cj);return Promise.resolve(fj)},te("shaka.transmuxer.TsTransmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy;var ej=["aac","ac-3","ec-3","mp3","opus"],tj=["avc","hevc"];So("video/mp2t",function(){return new rs("video/mp2t")},ru);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function AM(){}var bp;function IM(){bp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(bp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=nj):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function nj(e,t){var n=this,r;return Oe(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),N(u,bp.call(n,e,t),2)):(r=u.h,PM(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=bp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=CM,u.return(CM.call(n,e,t))))})}function CM(e,t){var n=this,r,u,c,f,h,E,A,k,G,ne;return Oe(function(z){if(z.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=DM(e),u=[],c=m(t),f=c.next();!f.done;f=c.next())h=f.value,E=bM(h.videoCapabilities,r),A=bM(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=A,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return N(z,bp.call(n,e,u),2)}return ne=z.h,z.return(new Ky(ne,r))})}function bM(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}te("EmeEncryptionSchemePolyfill",AM),AM.install=IM;function RM(){}var Rp;function NM(){Rp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Rp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=rj):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function rj(e){var t=this,n,r,u;return Oe(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),N(c,Rp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((r=n.keySystemAccess)&&PM(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Rp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=xM,r){c.u(3);break}return u=n,N(c,MM(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(xM.call(t,e))}})}function xM(e){var t=this,n,r,u,c,f,h,E,A;return Oe(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,u=r.keySystem,c=r.audio&&r.audio.encryptionScheme,f=r.video&&r.video.encryptionScheme,n=DM(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||f&&f!=n)?k.return(h):N(k,Rp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new Ky(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return A=E,N(k,MM(e),5);case 5:A.keySystemAccess=k.h;case 3:return k.return(E)}})}function MM(e){var t,n;return Oe(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],f=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&f.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),f.length&&(u.videoCapabilities=f),t=u,N(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}te("McEncryptionSchemePolyfill",RM),RM.install=NM;function Ky(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}Ky.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Ky.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function DM(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function PM(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function r1(){}function OM(){IM(),NM()}te("EncryptionSchemePolyfills",r1),r1.install=OM,typeof C<"u"&&C.exports&&(C.exports=r1)}).call(l,i,i,void 0);for(var d in l.shaka)o[d]=l.shaka[d]})()})(wF);const wv=WA(wF),Vc=class Vc{static async setup_stream(i,l,d){if(this.licenseUrl=l,this.customDrmHeaders=d,!i.mediaKeys)try{const p=await this.get_media_keys(i);if(p){await i.setMediaKeys(p.mediaKey);const w=p.mediaKey.createSession();this.on_handle_license_messageEvent=async C=>{await this.handle_license_messageEvent(p.mediaKey,w,C)},this.on_handle_encrypted_event=async C=>{await this.handle_encrypted_event(p,w,C)},w.addEventListener("message",this.on_handle_license_messageEvent),i.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(i){for(let l=0;l<i;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(i){const l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);this.mediaKey_pool.length>0&&l&&(await i.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(i){const l=this.mediaKey_pool.find(d=>d.mediaKey===i);return l?l.id:null}static async get_media_keys(i){let l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(d=>d.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(d=>!d.htmlMediaElement),l)return l.htmlMediaElement=i,l;throw new Error("No media keys available")}static async handle_license_messageEvent(i,l,d){try{const p=d.message.byteLength;console.log(p,"byteLength");let w;p===2?w=p.toString():w="".concat(this.get_mediaKey_id(i),"-").concat(p);let C;this.license_cache.has(w)?(console.log("using cached licence"),C=this.license_cache.get(w)):(C=await(await fetch(this.licenseUrl,{method:"POST",body:d.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),C?this.license_cache.set(w,C):console.error("License response is null")),C?await l.update(C):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(i,l,d){if(d.initDataType&&d.initData)try{if(!i.isInitialized){i.isInitialized=!0;const p=this.mediaKey_pool.findIndex(w=>w.id===i.id);p!==-1&&(this.mediaKey_pool[p]=i),await l.generateRequest(d.initDataType,d.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};Vc.licenseUrl="",Vc.customDrmHeaders={},Vc.license_cache=new Map,Vc.mediaKey_pool=[],Vc.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let YA=Vc;class sV extends SF{constructor(i){var l;super(i),this.name="ShakaEngine",this.addPolicyToRequests=(d,p)=>{switch(d){case wv.net.NetworkingEngine.RequestType.MANIFEST:case wv.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case wv.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([w,C])=>{p.headers[w]=C});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new wv.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(i){var l;if(this.player&&i){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await YA.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(d){console.log(d)}await this.player.attach(this.options.element),await this.player.load(i,void 0)}}}class wL extends hf{constructor(i){super(),this.options=i,this.options.preferredTech==="shaka"?this.engine=new sV(i):this.engine=new aV(i),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(i,l){this.emit(i,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(i,l){this.currentSource=i,await this.engine.load(i,l)}}class uV extends hf{constructor(i){super(),this.options=i,this.playerSyncerDestroyFunctions=[],this.eventClock=i.eventClock,this.containerElement=i.containerElement,this.players=[new wL({autoPlay:!1,...i.playerOptions,element:document.createElement("video")}),new wL({autoPlay:!1,...i.playerOptions,element:document.createElement("video")})]}get currentSource(){var i;return(i=this.runningPlayer)==null?void 0:i.currentSource}get currentCamera(){return this._currentCamera}get stats(){var i;return(i=this.runningPlayer)==null?void 0:i.engine.getStats()}logPlayerStuff(){this.players.forEach((i,l)=>{console.log("Bitrate",l,i.engine.video.getVideoPlaybackQuality()),console.log("Time",l,i.engine.video.currentTime),console.log("Paused",l,i.engine.video.paused)})}propagateEvent(i,l){this.emit(i,l)}async load(i,l,d){return await new Promise((p,w)=>{const C=this.players.find(g=>g!==this.runningPlayer);if(!C)throw new Error("Found no ImagienPlayer to use :( ");try{C.onAny(this.propagateEvent.bind(this)),console.log("LOAD"),C.load(l,d).then(()=>{p(async()=>{await new Promise((g,S)=>{var F;C.once("playing",()=>{var y,O;(y=this.runningPlayer)==null||y.playerEngine.video.pause(),(O=this.runningPlayer)==null||O.clearAllListeners(),this.runningPlayer=C,this._currentCamera=i;const R=this.containerElement.querySelector("video");R==null||R.remove(),this.containerElement.appendChild(C.engine.video),this.playerSyncerDestroyFunctions.forEach(m=>{m()});const v=((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0);this.playerSyncerDestroyFunctions.push(this.eventClock.playerSyncer.connectMediaElement(C.playerEngine.video,v)),g()});try{C.videoElement.currentTime=this.eventClock.getExpectedPositionInSeconds()-((F=d==null?void 0:d.eventOffset)!=null?F:0),C.playerEngine.video.play()}catch(R){S(R)}})})})}catch(g){console.error(g),w(g)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.players.forEach(i=>{i.destroy()})}}function dC(){const o=nu(),i=pf(),[l]=_F();return vn.useCallback(async(d,p)=>{var g;if(!l||!o)return;const w=(g=i==null?void 0:i.distributionUrl)!=null?g:"";let C=l.cameraURLTemplate;if(C=C.replace("{{baseURL}}",w),C=C.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),C=C.replaceAll("{{assetName}}",p.camera.assetName||""),console.log("# callback, ",C),C!==d.currentSource&&i)return await d.load(p,C,{startTimeSeconds:o.getExpectedPositionInSeconds()-mi(p.camera.span.time,i.frameRate),eventOffset:mi(p.camera.span.time,i.frameRate),reelOffset:mi(p.camera.reelOffset,i.frameRate)})},[o,l,i])}function lV(){const o=dC();return vn.useCallback(async(i,l)=>await o(i,l).then(async d=>await(d==null?void 0:d())),[o])}function cV(){const o=nu(),i=sh(),l=cC();vn.useEffect(()=>{if(!o||!i||!l)return;const d=({command:p,reference:w,start:C})=>{o.pausePlayStream(p,w,C)};return i.on("pausePlayStream",d),()=>{i.off("pausePlayStream",d)}},[o,i,l])}function fV(o){const i=nu(),l=pf(),d=sh(),p=lV(),w=dC();vn.useEffect(()=>{if(!d||!l||!i||!o)return;let C,g=[void 0,-1];const S=()=>{const T=i.getExpectedPositionInSeconds()<=0?0:i.getExpectedPositionInSeconds();return M0(l,T)[0]},F=T=>{g[0]=w(o,T),g[1]=T.index},R=T=>{if(g[0]&&g[1]===T.index){g[0].then(U=>{try{U==null||U()}catch(x){console.error("failed to play loaded stream",x)}}),g=[void 0,-1];return}try{p(o,T)}catch(U){console.error("failed to play stream",U)}},v=()=>{const T=S();T&&F(T)},y=()=>{const T=S();T&&R(T)},O=({index:T})=>{var x;const U=(x=pL(T,l))!=null?x:zA(T,l,i);U&&F(U)},m=({index:T})=>{var x;const U=(x=pL(T,l))!=null?x:zA(T,l,i);U&&(F(U),C=setTimeout(()=>{R(U)},1900))};return d.on("prepareCast",O),d.on("cast",m),i.on("prepareStart",v),i.on("start",y),i.isLive?(i.preparePlayback(),y()):i.isInPrepare?v():console.log("HÄÄRRR"),()=>{d.off("prepareCast",O),d.off("cast",m),i.off("prepareStart",v),i.off("start",y),clearTimeout(C)}},[d,l,i,o,p,w])}function dV(o){const i=kg();vn.useEffect(()=>{if(!o||!i)return;const l=()=>{o.currentCamera&&i.updatePlaying(o.currentCamera)};return o.on("playing",l),()=>{o.off("playing",l)}},[o,i])}function hV(o){const i=kg(),l=nu(),d=pf(),p=dC();vn.useEffect(()=>{if(!d||!l||!o||!i)return;const w=({remainingTime:C})=>{const g=fF(d,l.getExpectedPositionInSeconds(),C,o.currentCamera);if(g)try{const S=p(o,g);i.once("ended",()=>{S.then(F=>{F==null||F()})})}catch(S){console.error("failed to load stream",S)}else i.once("ended",()=>{i.endEvent()})};return i.on("nearEnd",w),()=>{i.off("nearEnd",w)}},[d,l,o,p,i])}function pV(o,i,l){const d=K7(),p=nu(),[w,C]=vn.useState(null);return vn.useEffect(()=>{const g=document.querySelector(o);if(g==null||!p||!l)return;const S=new uV({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:i,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:d}},eventClock:p});return C(S),()=>{S.destroy()}},[d,o,i,l,p]),w}function gV(o){const i=nu(),l=sh(),d=pf(),p=kg(),[w,C]=vn.useState(),[g,S]=vn.useState();return vn.useEffect(()=>{if(!d||!i||!o||!l||!p)return;const F=({index:v})=>{S(zA(v,d,i)),C(o.currentCamera)},R=()=>{const v=o.currentCamera;(v==null?void 0:v.camera.transition)==="mapAndClosing"&&(S(fF(d,i.getExpectedPositionInSeconds(),2,v)),C(v))};return l.on("cast",F),p.on("transition",R),()=>{l.off("cast",F),p.off("transition",R)}},[d,i,o,l,p]),[w,g]}function AF({x:o,y:i,mapScale:l}){const[d,p]=vn.useState(0),[w,C]=vn.useState(0),[g,S]=vn.useState(0),[F,R]=vn.useState(0),[v,y]=vn.useState(0);return vn.useEffect(()=>{const O=window.innerWidth,m=window.innerHeight,T=O/12,U=m/12;R(m/2-m*.05),y(O/m),p(o*T),C(i*U),S(T*l)},[o,i,l]),{scaledX:d,scaledY:w,size:g,baseY:F,aspectRatio:v}}const mV="_container_zht4e_1",yV="_fadeIn_zht4e_1",vV="_scrollWrapper_zht4e_15",EV="_scrollContainer_zht4e_29",Kw={container:mV,fadeIn:yV,scrollWrapper:vV,scrollContainer:EV};function _V(){const o=lC();return xt.jsxs("div",{className:Kw.container,children:[xt.jsx("h1",{children:o==null?void 0:o.postScreen.title}),xt.jsx("p",{className:"body-text",style:{opacity:.5},children:o==null?void 0:o.postScreen.body}),xt.jsx("div",{className:Kw.scrollWrapper,children:xt.jsx("div",{className:Kw.scrollContainer,children:o&&o.postScreen.offersCollection.items.map((i,l)=>xt.jsx("img",{src:i.image.url},l))})})]})}const TV="_transitionWrapper_jyngr_1",SV="_active_jyngr_17",wV="_transition_jyngr_1",AV="_fadeOut_jyngr_1",IV="_hidden_jyngr_57",CV="_visible_jyngr_67",bV="_videoTitle_jyngr_77",RV="_fadeIn_jyngr_1",Zp={transitionWrapper:TV,active:SV,transition:wV,fadeOut:AV,hidden:IV,visible:CV,videoTitle:bV,fadeIn:RV},NV="_placeContainer_ywyae_1",xV="_place_ywyae_1",MV="_background_ywyae_45",DV="_activePlace_ywyae_57",PV="_fadeOut_ywyae_1",OV="_normalPlace_ywyae_79",LV="_selectedPlace_ywyae_99",kV="_fadeIn_ywyae_1",FV="_pulseEffect_ywyae_1",UV="_title_ywyae_153",Zc={placeContainer:NV,place:xV,background:MV,activePlace:DV,fadeOut:PV,normalPlace:OV,selectedPlace:LV,fadeIn:kV,pulseEffect:FV,title:UV};var Ss=(o=>(o.ACTIVE_PLACE="ActivePlace",o.SELECTED_PLACE="SelectedPlace",o.NORMAL_PLACE="NormalPlace",o))(Ss||{});const BV=({place:o,mapPlacesLength:i})=>{const l=AF({x:o.mapPosition.x,y:o.mapPosition.y,mapScale:o.mapScale}),d=vn.useMemo(()=>{switch(o.placeType){case Ss.ACTIVE_PLACE:return Zc.activePlace;case Ss.SELECTED_PLACE:return Zc.selectedPlace;case Ss.NORMAL_PLACE:default:return Zc.normalPlace}},[o]);return xt.jsx("div",{className:Zc.placeContainer,children:xt.jsxs("div",{className:"".concat(Zc.place," ").concat(d),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(i>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(i>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[xt.jsx("div",{className:Zc.background}),(o.placeType===Ss.ACTIVE_PLACE||o.placeType===Ss.SELECTED_PLACE)&&xt.jsx("div",{className:"subheader-light ".concat(Zc.title),children:o.title})]})})},jV="_followContainer_1h8ds_1",ZV="_follow_1h8ds_1",GV="_selectedFollow_1h8ds_35",qV="_pulseEffect_1h8ds_1",HV="_notSelectedFollow_1h8ds_79",VV="_iconContainer_1h8ds_97",KV="_labelContainer_1h8ds_131",Cd={followContainer:jV,follow:ZV,selectedFollow:GV,pulseEffect:qV,notSelectedFollow:HV,iconContainer:VV,labelContainer:KV},zV="_label_svzic_1",YV={label:zV},WV=({content:o,classNames:i=""})=>xt.jsx("div",{className:"".concat(YV.label," ").concat(i," label"),children:o}),XV=({style:o})=>xt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:o,children:xt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),IF=({classNames:o,styles:i,color:l,stroke:d})=>xt.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[xt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),$V=({classNames:o,styles:i,color:l,stroke:d})=>xt.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[xt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),xt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),xt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),xt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"})]}),QV=()=>xt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[xt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),JV=()=>xt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[xt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),eK=()=>xt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[xt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),xt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),tK=()=>xt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:xt.jsxs("g",{children:[xt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),xt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),xt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),xt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),nK=()=>xt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:xt.jsxs("g",{children:[xt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),xt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),xt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),xt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),rK=({follow:o})=>{var p,w,C,g;const i=AF({x:(w=(p=o.mapPosition)==null?void 0:p.x)!=null?w:0,y:(g=(C=o.mapPosition)==null?void 0:C.y)!=null?g:0,mapScale:.6}),[l,d]=vn.useState(0);return vn.useEffect(()=>{function S(F,R,v){return-Math.atan2((F.x-R.x)*v,F.y-R.y)*(180/Math.PI)}o.mapPosition&&d(S(o.mapPositions[0],o.mapPositions[o.mapPositions.length-1],i.aspectRatio))},[o.mapPosition,o.mapPositions,i]),xt.jsxs("div",{className:Cd.followContainer,style:{width:i.size,height:i.size,left:"calc(50% + ".concat(i.scaledX,"px)"),top:"calc(50% - ".concat(i.scaledY,"px)")},children:[xt.jsx("div",{className:"".concat(Cd.follow," ").concat(o.isSelectedFollow?Cd.selectedFollow:Cd.notSelectedFollow," ").concat(Cd.iconContainer),children:xt.jsx(XV,{style:{transform:"rotate(".concat(l,"deg)")}})}),o.isSelectedFollow&&xt.jsx(WV,{classNames:Cd.labelContainer,content:o.title})]})},iK=({fromCamera:o,toCamera:i})=>{const l=pf(),d=nu(),p=4200,w=p+3950,C=1900,[g,S]=vn.useState([]),[F,R]=vn.useState([]),[v,y]=vn.useState(!1),[O,m]=vn.useState(!1),[T,U]=vn.useState(""),x=vn.useRef([]),_=vn.useMemo(()=>{function se(N,$){const ce=N.jumpSpots.map(Ze=>Ze.camera.span),ye=ce.map(Ze=>Ze.time).map(Ze=>mi(Ze,$.frameRate)),be=Math.min(...ye),$e=ce.map(Ze=>mi(Ze.time,$.frameRate)+mi(Ze.duration,$.frameRate)),Ae=Math.max(...$e);return{start:be,end:Ae}}return l==null?void 0:l.places.filter(N=>N.jumpSpots.length>0).map((N,$)=>({...N,span:se(N,l),placeType:Ss.NORMAL_PLACE,placeIndex:$}))},[l]),I=vn.useMemo(()=>(l==null?void 0:l.follows.map(se=>({...se,isSelectedFollow:!1})))||[],[l]),b=vn.useCallback((se,N)=>{const $=mi(se.camera.span.time,N.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=$&&$<=ce.span.end))||[]},[_]),j=vn.useCallback(se=>{const N=se.mapPositions[0]||{x:0,y:0};if(l&&d){const $=d.getExpectedPositionInSeconds()-mi(se.camera.span.time,l.frameRate),ce=mi(se.camera.span.duration,l.frameRate);let oe=Math.floor($*4/ce);return $===ce&&(oe-=1),se.mapPositions[oe]||N}return N},[d,l]),Y=vn.useCallback((se,N)=>{const $=mi(se.camera.span.time,N.frameRate)+2;return I.filter(ce=>mi(ce.camera.span.time,N.frameRate)<=$&&$<=mi(ce.camera.span.time,N.frameRate)+mi(ce.camera.span.duration,N.frameRate)).map(ce=>({...ce,mapPosition:j(ce)}))},[I,j]),W=vn.useCallback(se=>_==null?void 0:_.find(N=>N.jumpSpots.some($=>$.camera.assetName===se.camera.assetName)),[_]),X=(se,N)=>N.jumpSpots.some($=>$.camera.assetName===se.camera.assetName);return vn.useEffect(()=>{if(!_||!o||!i||!l||o.camera.assetName===i.camera.assetName)return;const se=x.current;let N=[],$=[],ce=[],oe=[];if(U(i.placeTitle?i.placeTitle:i.title),o.type===Hc.JUMPSPOT&&i.type===Hc.JUMPSPOT&&o.placeIndex===i.placeIndex)m(!1),y(!0);else{switch(m(!0),o.type){case Hc.JUMPSPOT:$=Y(i,l),N=b(o,l).map(Ze=>X(o,Ze)?{...Ze,placeType:Ss.ACTIVE_PLACE}:Ze);break;case Hc.FOLLOW:N=b(o,l),$=Y(o,l).map(Ze=>({...Ze,isSelectedFollow:o.camera.assetName===Ze.camera.assetName}));break}switch(S(N),R($),i.type){case Hc.JUMPSPOT:oe=Y(o,l);const Ze=N.find(lt=>X(i,lt));if(Ze)ce=N.map(lt=>({...lt,placeType:lt.placeIndex===Ze.placeIndex?Ss.SELECTED_PLACE:Ss.NORMAL_PLACE}));else{const lt=W(i);lt&&(lt.placeType=Ss.SELECTED_PLACE,ce=[...N.map(Xe=>({...Xe,placeType:Ss.NORMAL_PLACE})),lt])}break;case Hc.FOLLOW:ce=b(o,l),oe=Y(o,l);const it=$.find(lt=>lt.camera.assetName===i.camera.assetName);if(it)oe=$.map(lt=>({...lt,isSelectedFollow:lt.camera.assetName===it.camera.assetName}));else{const lt=I.find(Xe=>Xe.camera.assetName===i.camera.assetName);if(lt){const Xe={...lt,isSelectedFollow:!0,mapPosition:j(lt)};oe=[...$.map(st=>({...st,isSelectedFollow:!1})),Xe]}}break}}const ye=setTimeout(()=>{R(oe)},C);se.push(ye);const be=setTimeout(()=>{S(ce)},C);se.push(be);const $e=setTimeout(()=>{m(!1),y(!0)},p);se.push($e);const Ae=setTimeout(()=>{y(!1)},w);return se.push(Ae),()=>{se.forEach(Ze=>{clearTimeout(Ze)}),x.current=[]}},[o,i,_,I,Y,W,l,b,j,w]),xt.jsxs("div",{className:"".concat(Zp.transitionWrapper," ").concat(O?Zp.active:""),children:[O&&xt.jsxs("div",{className:"".concat(Zp.transition," ").concat(Zp.visible),children:[g.map((se,N)=>xt.jsx(BV,{place:se,mapPlacesLength:g.length},"place-".concat(N.toString()))),F.filter(se=>se.camera.assetName===(o==null?void 0:o.camera.assetName)||se.camera.assetName===(i==null?void 0:i.camera.assetName)).map((se,N)=>xt.jsx(rK,{follow:se},"follow-".concat(N.toString())))]}),v&&xt.jsx("h1",{className:Zp.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},oK="_playerPage_s22qw_1",aK="_playerContainer_s22qw_13",sK="_fadeIn_s22qw_1",AL={playerPage:oK,playerContainer:aK,fadeIn:sK},uK="_attention_1xh5o_1",lK="_ripple1_1xh5o_1",cK="_ripple2_1xh5o_1",fK="_thirdRipple_1xh5o_81",dK="_ripple3_1xh5o_1",hK="_iconWrapper_1xh5o_105",zw={attention:uK,ripple1:lK,ripple2:cK,thirdRipple:fK,ripple3:dK,iconWrapper:hK},pK=()=>{const o=kg(),[i,l]=vn.useState(!1),d=5e3;if(vn.useEffect(()=>{if(!o)return;let p;const w=()=>{l(!0),p=setTimeout(()=>{l(!1)},d)};return o.on("attention",w),()=>{o.off("attention",w),clearTimeout(p)}},[o]),!!i)return xt.jsxs("div",{className:zw.attention,children:[xt.jsx("span",{className:zw.iconWrapper,children:xt.jsx(eK,{})}),xt.jsx("span",{className:zw.thirdRipple})]})};var gK=Object.defineProperty,u0=Object.getOwnPropertySymbols,CF=Object.prototype.hasOwnProperty,bF=Object.prototype.propertyIsEnumerable,IL=(o,i,l)=>i in o?gK(o,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[i]=l,Ig=(o,i)=>{for(var l in i||(i={}))CF.call(i,l)&&IL(o,l,i[l]);if(u0)for(var l of u0(i))bF.call(i,l)&&IL(o,l,i[l]);return o},hC=(o,i)=>{var l={};for(var d in o)CF.call(o,d)&&i.indexOf(d)<0&&(l[d]=o[d]);if(o!=null&&u0)for(var d of u0(o))i.indexOf(d)<0&&bF.call(o,d)&&(l[d]=o[d]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var uf;(o=>{const i=class{constructor(S,F,R,v){if(this.version=S,this.errorCorrectionLevel=F,this.modules=[],this.isFunction=[],S<i.MIN_VERSION||S>i.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=S*4+17;let y=[];for(let m=0;m<this.size;m++)y.push(!1);for(let m=0;m<this.size;m++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const O=this.addEccAndInterleave(R);if(this.drawCodewords(O),v==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(v=T,m=U),this.applyMask(T)}}w(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(S,F){const R=o.QrSegment.makeSegments(S);return i.encodeSegments(R,F)}static encodeBinary(S,F){const R=o.QrSegment.makeBytes(S);return i.encodeSegments([R],F)}static encodeSegments(S,F,R=1,v=40,y=-1,O=!0){if(!(i.MIN_VERSION<=R&&R<=v&&v<=i.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let m,T;for(m=R;;m++){const I=i.getNumDataCodewords(m,F)*8,b=g.getTotalBits(S,m);if(b<=I){T=b;break}if(m>=v)throw new RangeError("Data too long")}for(const I of[i.Ecc.MEDIUM,i.Ecc.QUARTILE,i.Ecc.HIGH])O&&T<=i.getNumDataCodewords(m,I)*8&&(F=I);let U=[];for(const I of S){d(I.mode.modeBits,4,U),d(I.numChars,I.mode.numCharCountBits(m),U);for(const b of I.getData())U.push(b)}w(U.length==T);const x=i.getNumDataCodewords(m,F)*8;w(U.length<=x),d(0,Math.min(4,x-U.length),U),d(0,(8-U.length%8)%8,U),w(U.length%8==0);for(let I=236;U.length<x;I^=253)d(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,b)=>_[b>>>3]|=I<<7-(b&7)),new i(m,F,_,y)}getModule(S,F){return 0<=S&&S<this.size&&0<=F&&F<this.size&&this.modules[F][S]}getModules(){return this.modules}drawFunctionPatterns(){for(let R=0;R<this.size;R++)this.setFunctionModule(6,R,R%2==0),this.setFunctionModule(R,6,R%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const S=this.getAlignmentPatternPositions(),F=S.length;for(let R=0;R<F;R++)for(let v=0;v<F;v++)R==0&&v==0||R==0&&v==F-1||R==F-1&&v==0||this.drawAlignmentPattern(S[R],S[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(S){const F=this.errorCorrectionLevel.formatBits<<3|S;let R=F;for(let y=0;y<10;y++)R=R<<1^(R>>>9)*1335;const v=(F<<10|R)^21522;w(v>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,p(v,y));this.setFunctionModule(8,7,p(v,6)),this.setFunctionModule(8,8,p(v,7)),this.setFunctionModule(7,8,p(v,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,p(v,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,p(v,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,p(v,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let S=this.version;for(let R=0;R<12;R++)S=S<<1^(S>>>11)*7973;const F=this.version<<12|S;w(F>>>18==0);for(let R=0;R<18;R++){const v=p(F,R),y=this.size-11+R%3,O=Math.floor(R/3);this.setFunctionModule(y,O,v),this.setFunctionModule(O,y,v)}}drawFinderPattern(S,F){for(let R=-4;R<=4;R++)for(let v=-4;v<=4;v++){const y=Math.max(Math.abs(v),Math.abs(R)),O=S+v,m=F+R;0<=O&&O<this.size&&0<=m&&m<this.size&&this.setFunctionModule(O,m,y!=2&&y!=4)}}drawAlignmentPattern(S,F){for(let R=-2;R<=2;R++)for(let v=-2;v<=2;v++)this.setFunctionModule(S+v,F+R,Math.max(Math.abs(v),Math.abs(R))!=1)}setFunctionModule(S,F,R){this.modules[F][S]=R,this.isFunction[F][S]=!0}addEccAndInterleave(S){const F=this.version,R=this.errorCorrectionLevel;if(S.length!=i.getNumDataCodewords(F,R))throw new RangeError("Invalid argument");const v=i.NUM_ERROR_CORRECTION_BLOCKS[R.ordinal][F],y=i.ECC_CODEWORDS_PER_BLOCK[R.ordinal][F],O=Math.floor(i.getNumRawDataModules(F)/8),m=v-O%v,T=Math.floor(O/v);let U=[];const x=i.reedSolomonComputeDivisor(y);for(let I=0,b=0;I<v;I++){let j=S.slice(b,b+T-y+(I<m?0:1));b+=j.length;const Y=i.reedSolomonComputeRemainder(j,x);I<m&&j.push(0),U.push(j.concat(Y))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((b,j)=>{(I!=T-y||j>=m)&&_.push(b[I])});return w(_.length==O),_}drawCodewords(S){if(S.length!=Math.floor(i.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let F=0;for(let R=this.size-1;R>=1;R-=2){R==6&&(R=5);for(let v=0;v<this.size;v++)for(let y=0;y<2;y++){const O=R-y,T=(R+1&2)==0?this.size-1-v:v;!this.isFunction[T][O]&&F<S.length*8&&(this.modules[T][O]=p(S[F>>>3],7-(F&7)),F++)}}w(F==S.length*8)}applyMask(S){if(S<0||S>7)throw new RangeError("Mask value out of range");for(let F=0;F<this.size;F++)for(let R=0;R<this.size;R++){let v;switch(S){case 0:v=(R+F)%2==0;break;case 1:v=F%2==0;break;case 2:v=R%3==0;break;case 3:v=(R+F)%3==0;break;case 4:v=(Math.floor(R/3)+Math.floor(F/2))%2==0;break;case 5:v=R*F%2+R*F%3==0;break;case 6:v=(R*F%2+R*F%3)%2==0;break;case 7:v=((R+F)%2+R*F%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[F][R]&&v&&(this.modules[F][R]=!this.modules[F][R])}}getPenaltyScore(){let S=0;for(let y=0;y<this.size;y++){let O=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[y][U]==O?(m++,m==5?S+=i.PENALTY_N1:m>5&&S++):(this.finderPenaltyAddHistory(m,T),O||(S+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),O=this.modules[y][U],m=1);S+=this.finderPenaltyTerminateAndCount(O,m,T)*i.PENALTY_N3}for(let y=0;y<this.size;y++){let O=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][y]==O?(m++,m==5?S+=i.PENALTY_N1:m>5&&S++):(this.finderPenaltyAddHistory(m,T),O||(S+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),O=this.modules[U][y],m=1);S+=this.finderPenaltyTerminateAndCount(O,m,T)*i.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let O=0;O<this.size-1;O++){const m=this.modules[y][O];m==this.modules[y][O+1]&&m==this.modules[y+1][O]&&m==this.modules[y+1][O+1]&&(S+=i.PENALTY_N2)}let F=0;for(const y of this.modules)F=y.reduce((O,m)=>O+(m?1:0),F);const R=this.size*this.size,v=Math.ceil(Math.abs(F*20-R*10)/R)-1;return w(0<=v&&v<=9),S+=v*i.PENALTY_N4,w(0<=S&&S<=2568888),S}getAlignmentPatternPositions(){if(this.version==1)return[];{const S=Math.floor(this.version/7)+2,F=this.version==32?26:Math.ceil((this.version*4+4)/(S*2-2))*2;let R=[6];for(let v=this.size-7;R.length<S;v-=F)R.splice(1,0,v);return R}}static getNumRawDataModules(S){if(S<i.MIN_VERSION||S>i.MAX_VERSION)throw new RangeError("Version number out of range");let F=(16*S+128)*S+64;if(S>=2){const R=Math.floor(S/7)+2;F-=(25*R-10)*R-55,S>=7&&(F-=36)}return w(208<=F&&F<=29648),F}static getNumDataCodewords(S,F){return Math.floor(i.getNumRawDataModules(S)/8)-i.ECC_CODEWORDS_PER_BLOCK[F.ordinal][S]*i.NUM_ERROR_CORRECTION_BLOCKS[F.ordinal][S]}static reedSolomonComputeDivisor(S){if(S<1||S>255)throw new RangeError("Degree out of range");let F=[];for(let v=0;v<S-1;v++)F.push(0);F.push(1);let R=1;for(let v=0;v<S;v++){for(let y=0;y<F.length;y++)F[y]=i.reedSolomonMultiply(F[y],R),y+1<F.length&&(F[y]^=F[y+1]);R=i.reedSolomonMultiply(R,2)}return F}static reedSolomonComputeRemainder(S,F){let R=F.map(v=>0);for(const v of S){const y=v^R.shift();R.push(0),F.forEach((O,m)=>R[m]^=i.reedSolomonMultiply(O,y))}return R}static reedSolomonMultiply(S,F){if(S>>>8||F>>>8)throw new RangeError("Byte out of range");let R=0;for(let v=7;v>=0;v--)R=R<<1^(R>>>7)*285,R^=(F>>>v&1)*S;return w(R>>>8==0),R}finderPenaltyCountPatterns(S){const F=S[1];w(F<=this.size*3);const R=F>0&&S[2]==F&&S[3]==F*3&&S[4]==F&&S[5]==F;return(R&&S[0]>=F*4&&S[6]>=F?1:0)+(R&&S[6]>=F*4&&S[0]>=F?1:0)}finderPenaltyTerminateAndCount(S,F,R){return S&&(this.finderPenaltyAddHistory(F,R),F=0),F+=this.size,this.finderPenaltyAddHistory(F,R),this.finderPenaltyCountPatterns(R)}finderPenaltyAddHistory(S,F){F[0]==0&&(S+=this.size),F.pop(),F.unshift(S)}};let l=i;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o.QrCode=l;function d(S,F,R){if(F<0||F>31||S>>>F)throw new RangeError("Value out of range");for(let v=F-1;v>=0;v--)R.push(S>>>v&1)}function p(S,F){return(S>>>F&1)!=0}function w(S){if(!S)throw new Error("Assertion error")}const C=class{constructor(S,F,R){if(this.mode=S,this.numChars=F,this.bitData=R,F<0)throw new RangeError("Invalid argument");this.bitData=R.slice()}static makeBytes(S){let F=[];for(const R of S)d(R,8,F);return new C(C.Mode.BYTE,S.length,F)}static makeNumeric(S){if(!C.isNumeric(S))throw new RangeError("String contains non-numeric characters");let F=[];for(let R=0;R<S.length;){const v=Math.min(S.length-R,3);d(parseInt(S.substr(R,v),10),v*3+1,F),R+=v}return new C(C.Mode.NUMERIC,S.length,F)}static makeAlphanumeric(S){if(!C.isAlphanumeric(S))throw new RangeError("String contains unencodable characters in alphanumeric mode");let F=[],R;for(R=0;R+2<=S.length;R+=2){let v=C.ALPHANUMERIC_CHARSET.indexOf(S.charAt(R))*45;v+=C.ALPHANUMERIC_CHARSET.indexOf(S.charAt(R+1)),d(v,11,F)}return R<S.length&&d(C.ALPHANUMERIC_CHARSET.indexOf(S.charAt(R)),6,F),new C(C.Mode.ALPHANUMERIC,S.length,F)}static makeSegments(S){return S==""?[]:C.isNumeric(S)?[C.makeNumeric(S)]:C.isAlphanumeric(S)?[C.makeAlphanumeric(S)]:[C.makeBytes(C.toUtf8ByteArray(S))]}static makeEci(S){let F=[];if(S<0)throw new RangeError("ECI assignment value out of range");if(S<128)d(S,8,F);else if(S<16384)d(2,2,F),d(S,14,F);else if(S<1e6)d(6,3,F),d(S,21,F);else throw new RangeError("ECI assignment value out of range");return new C(C.Mode.ECI,0,F)}static isNumeric(S){return C.NUMERIC_REGEX.test(S)}static isAlphanumeric(S){return C.ALPHANUMERIC_REGEX.test(S)}getData(){return this.bitData.slice()}static getTotalBits(S,F){let R=0;for(const v of S){const y=v.mode.numCharCountBits(F);if(v.numChars>=1<<y)return 1/0;R+=4+y+v.bitData.length}return R}static toUtf8ByteArray(S){S=encodeURI(S);let F=[];for(let R=0;R<S.length;R++)S.charAt(R)!="%"?F.push(S.charCodeAt(R)):(F.push(parseInt(S.substr(R+1,2),16)),R+=2);return F}};let g=C;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o.QrSegment=g})(uf||(uf={}));(o=>{(i=>{const l=class{constructor(p,w){this.ordinal=p,this.formatBits=w}};let d=l;d.LOW=new l(0,1),d.MEDIUM=new l(1,0),d.QUARTILE=new l(2,3),d.HIGH=new l(3,2),i.Ecc=d})(o.QrCode||(o.QrCode={}))})(uf||(uf={}));(o=>{(i=>{const l=class{constructor(p,w){this.modeBits=p,this.numBitsCharCount=w}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let d=l;d.NUMERIC=new l(1,[10,12,14]),d.ALPHANUMERIC=new l(2,[9,11,13]),d.BYTE=new l(4,[8,16,16]),d.KANJI=new l(8,[8,10,12]),d.ECI=new l(7,[0,0,0]),i.Mode=d})(o.QrSegment||(o.QrSegment={}))})(uf||(uf={}));var jd=uf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var RF={L:jd.QrCode.Ecc.LOW,M:jd.QrCode.Ecc.MEDIUM,Q:jd.QrCode.Ecc.QUARTILE,H:jd.QrCode.Ecc.HIGH},NF=128,xF="L",MF="#FFFFFF",DF="#000000",PF=!1,pC=4,mK=.1;function OF(o,i=0){const l=[];return o.forEach(function(d,p){let w=null;d.forEach(function(C,g){if(!C&&w!==null){l.push("M".concat(w+i," ").concat(p+i,"h").concat(g-w,"v1H").concat(w+i,"z")),w=null;return}if(g===d.length-1){if(!C)return;w===null?l.push("M".concat(g+i,",").concat(p+i," h1v1H").concat(g+i,"z")):l.push("M".concat(w+i,",").concat(p+i," h").concat(g+1-w,"v1H").concat(w+i,"z"));return}C&&w===null&&(w=g)})}),l.join("")}function LF(o,i){return o.slice().map((l,d)=>d<i.y||d>=i.y+i.h?l:l.map((p,w)=>w<i.x||w>=i.x+i.w?p:!1))}function kF(o,i,l,d){if(d==null)return null;const p=l?pC:0,w=o.length+p*2,C=Math.floor(i*mK),g=w/i,S=(d.width||C)*g,F=(d.height||C)*g,R=d.x==null?o.length/2-S/2:d.x*g,v=d.y==null?o.length/2-F/2:d.y*g;let y=null;if(d.excavate){let O=Math.floor(R),m=Math.floor(v),T=Math.ceil(S+R-O),U=Math.ceil(F+v-m);y={x:O,y:m,w:T,h:U}}return{x:R,y:v,h:F,w:S,excavation:y}}var yK=function(){try{new Path2D().addPath(new Path2D)}catch(o){return!1}return!0}();function vK(o){const i=o,{value:l,size:d=NF,level:p=xF,bgColor:w=MF,fgColor:C=DF,includeMargin:g=PF,style:S,imageSettings:F}=i,R=hC(i,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),v=F==null?void 0:F.src,y=vn.useRef(null),O=vn.useRef(null),[m,T]=vn.useState(!1);vn.useEffect(()=>{if(y.current!=null){const _=y.current,I=_.getContext("2d");if(!I)return;let b=jd.QrCode.encodeText(l,RF[p]).getModules();const j=g?pC:0,Y=b.length+j*2,W=kF(b,d,g,F),X=O.current,se=W!=null&&X!==null&&X.complete&&X.naturalHeight!==0&&X.naturalWidth!==0;se&&W.excavation!=null&&(b=LF(b,W.excavation));const N=window.devicePixelRatio||1;_.height=_.width=d*N;const $=d/Y*N;I.scale($,$),I.fillStyle=w,I.fillRect(0,0,Y,Y),I.fillStyle=C,yK?I.fill(new Path2D(OF(b,j))):b.forEach(function(ce,oe){ce.forEach(function(ye,be){ye&&I.fillRect(be+j,oe+j,1,1)})}),se&&I.drawImage(X,W.x+j,W.y+j,W.w,W.h)}}),vn.useEffect(()=>{T(!1)},[v]);const U=Ig({height:d,width:d},S);let x=null;return v!=null&&(x=$s.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{T(!0)},ref:O})),$s.createElement($s.Fragment,null,$s.createElement("canvas",Ig({style:U,height:d,width:d,ref:y},R)),x)}function EK(o){const i=o,{value:l,size:d=NF,level:p=xF,bgColor:w=MF,fgColor:C=DF,includeMargin:g=PF,imageSettings:S}=i,F=hC(i,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let R=jd.QrCode.encodeText(l,RF[p]).getModules();const v=g?pC:0,y=R.length+v*2,O=kF(R,d,g,S);let m=null;S!=null&&O!=null&&(O.excavation!=null&&(R=LF(R,O.excavation)),m=$s.createElement("image",{xlinkHref:S.src,height:O.h,width:O.w,x:O.x+v,y:O.y+v,preserveAspectRatio:"none"}));const T=OF(R,v);return $s.createElement("svg",Ig({height:d,width:d,viewBox:"0 0 ".concat(y," ").concat(y)},F),$s.createElement("path",{fill:w,d:"M0,0 h".concat(y,"v").concat(y,"H0z"),shapeRendering:"crispEdges"}),$s.createElement("path",{fill:C,d:T,shapeRendering:"crispEdges"}),m)}var gC=o=>{const i=o,{renderAs:l}=i,d=hC(i,["renderAs"]);return l==="svg"?$s.createElement(EK,Ig({},d)):$s.createElement(vK,Ig({},d))};const _K="_container_1l3tn_1",TK="_qrCode_1l3tn_25",SK="_text_1l3tn_35",Yw={container:_K,qrCode:TK,text:SK},wK=({url:o})=>xt.jsxs("div",{className:Yw.container,children:[xt.jsx("p",{className:"body-text ".concat(Yw.text),style:{opacity:.75},children:"Scan the QR code with the app."}),xt.jsx(gC,{className:Yw.qrCode,bgColor:"white",fgColor:"black",value:o,size:500})]}),AK="_controlsWrapper_1v4q3_1",IK="_hidden_1v4q3_21",CK="_iconWrapper_1v4q3_29",Ww={controlsWrapper:AK,hidden:IK,iconWrapper:CK},bK=({visible:o,eventPlayer:i})=>{const[l,d]=vn.useState(!1),p=()=>{i&&(l?i.exitFullscreen().then(()=>{d(!1)}):i.requestFullscreen().then(()=>{d(!0)}))};return xt.jsx("div",{className:"".concat(Ww.controlsWrapper," ").concat(o?"":Ww.hidden),children:xt.jsx("div",{className:Ww.iconWrapper,onClick:p,children:l?xt.jsx(nK,{}):xt.jsx(tK,{})})})},RK="_warningContainer_1tqkb_1",NK={warningContainer:RK},FF=()=>xt.jsxs("div",{className:NK.warningContainer,children:[xt.jsx(IF,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),xt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),xK="_messageContainer_1jzyd_3",MK="_message_1jzyd_3",CL={messageContainer:xK,message:MK},DK=({message:o})=>xt.jsx("div",{className:CL.messageContainer,children:xt.jsx("div",{className:"".concat(CL.message," subheader-light"),children:o})});function PK(){const[o,i,l]=_F(),d=cC(),p=pV("#playerContainer",i,l),[w,C]=vn.useState(!1),[g,S]=vn.useState(),F=fC(),R=vn.useRef(),v=vn.useMemo(()=>{const U=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(U)},[]);vn.useEffect(()=>{const U=F==null?void 0:F.find(x=>x.deviceId===eh);S(U)},[F]);const y=!!(F!=null&&F.filter(U=>U.deviceId!==eh));fV(p),dV(p),hV(p);const[O,m]=gV(p);cV();const T=()=>{v||(C(!0),clearTimeout(R.current),R.current=setTimeout(()=>{C(!1)},3e3))};return xt.jsxs("div",{className:AL.playerPage,onMouseMove:T,children:[xt.jsxs("div",{id:"playerContainer",className:AL.playerContainer,children:[d&&xt.jsx(Q7,{eventPlayer:p}),xt.jsx(pK,{}),xt.jsx(bK,{visible:w,eventPlayer:p}),(g==null?void 0:g.stateInfo.state)==="showQrCode"&&xt.jsx(wK,{url:"".concat(iC,":").concat(g.stateInfo.qrCodeDeviceId)}),xt.jsx(iK,{fromCamera:O,toCamera:m})]}),!y&&xt.jsx(DK,{message:xt.jsx(FF,{})})]})}const OK="_gradientBackground_b6nct_1",LK="_container_b6nct_15",kK="_fadeIn_b6nct_1",FK="_connectedTV_b6nct_45",UK="_disconnectedTV_b6nct_47",BK="_popIn_b6nct_1",jK="_iconContainer_b6nct_105",ZK="_connectedText_b6nct_121",bd={gradientBackground:OK,container:LK,fadeIn:kK,connectedTV:FK,disconnectedTV:UK,popIn:BK,iconContainer:jK,connectedText:ZK},GK=({isDisconnected:o})=>xt.jsx("div",{className:bd.gradientBackground,children:xt.jsxs("div",{className:bd.container,children:[xt.jsx("div",{className:o?bd.disconnectedTV:bd.connectedTV,children:xt.jsx("div",{className:bd.iconContainer,children:o?xt.jsx(JV,{}):xt.jsx(QV,{})})}),xt.jsx("h1",{className:bd.connectedText,children:o?"TV disconnected":"TV connected"})]})}),qK="_hidden_zykq7_1",HK={hidden:qK},VK="_gradientBackground_14xmh_1",KK="_container_14xmh_15",zK="_fadeIn_14xmh_1",YK="_imageWrapper_14xmh_45",WK="_listText_14xmh_57",XK="_boldText_14xmh_57",$K="_image_14xmh_45",QK="_glow_14xmh_91",JK="_dividerWrapper_14xmh_119",ez="_divider_14xmh_119",tz="_buttonsWrapper_14xmh_149",nz="_testButton_14xmh_185",rz="_demoButton_14xmh_195",iz="_logoutButton_14xmh_203",oz="_title_14xmh_215",az="_countdownWrapper_14xmh_225",sz="_timeSectionContainer_14xmh_253",uz="_timeSection_14xmh_253",lz="_countdownTitle_14xmh_277",cz="_label_14xmh_285",fz="_logos_14xmh_293",dz="_warning_14xmh_339",ki={gradientBackground:VK,container:KK,fadeIn:zK,imageWrapper:YK,listText:WK,boldText:XK,image:$K,glow:QK,dividerWrapper:JK,divider:ez,buttonsWrapper:tz,testButton:nz,demoButton:rz,logoutButton:iz,title:oz,countdownWrapper:az,timeSectionContainer:sz,timeSection:uz,countdownTitle:lz,label:cz,logos:fz,warning:dz},hz="_errorContainer_1vpqa_1",pz={errorContainer:hz},UF=({errorIcon:o,errorMessage:i,errorName:l})=>xt.jsxs("div",{className:pz.errorContainer,children:[o&&xt.jsx("div",{children:o}),xt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(i)})]}),gz="_gradientBackground_1pfse_1",mz="_container_1pfse_19",yz="_qrCode_1pfse_33",Xw={gradientBackground:gz,container:mz,qrCode:yz},vz=({url:o})=>xt.jsxs("div",{className:"".concat(Xw.gradientBackground," ").concat(Xw.container),children:[xt.jsx(gC,{className:Xw.qrCode,bgColor:"white",fgColor:"black",value:o,size:500}),xt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),Ez=({timeToLive:o})=>{const i=W7(),l=nu(),d=lC(),p=cC(),w=fC(),[C,g]=vn.useState(),[S,F]=vn.useState("00:00:00:00"),[R,v]=vn.useState(!1),y=vn.useRef(null),O=5;vn.useEffect(()=>{const b=w==null?void 0:w.filter(j=>j.deviceId!==eh);v(!!(b!=null&&b.length))},[w]),vn.useEffect(()=>{const b=w==null?void 0:w.find(j=>j.deviceId===eh);g(b)},[w]);let m;(b=>{b.BEFORE="before",b.MIDDLE="middle",b.END="end"})(m||(m={}));const T=b=>{if(l){let j=new Date;switch(b){case"end":j=new Date(l.demoEndtime);break;case"middle":j.setMinutes(j.getMinutes()-22);break;default:case"before":j.setSeconds(j.getSeconds()+O);break}l.updateStartTime(j,!0)}};vn.useEffect(()=>{if(o&&o>0){const b=X=>{const se=Date.parse(X.toString())-Date.parse(new Date().toString()),N=Math.floor(se/1e3%60),$=Math.floor(se/1e3/60%60),ce=Math.floor(se/1e3/60/60%24),oe=Math.floor(se/1e3/60/60/24);return{total:se,days:oe,hours:ce,minutes:$,seconds:N}},j=X=>{const{total:se,days:N,hours:$,minutes:ce,seconds:oe}=b(X);se>=0&&F((N>9?N:"0"+N)+":"+($>9?$:"0"+$)+":"+(ce>9?ce:"0"+ce)+":"+(oe>9?oe:"0"+oe))};(X=>{y.current&&clearInterval(y.current),j(X);const se=setInterval(()=>{j(X)},1e3);y.current=se})((X=>{const se=new Date;return se.setSeconds(se.getSeconds()+Math.floor(X/1e3)),se})(o))}},[o]);const[U,x,_,I]=S.split(":");if(C&&C.stateInfo.state==="showQrCode"){const b="".concat(iC,":").concat(C.stateInfo.qrCodeDeviceId);return xt.jsx(vz,{url:b})}return xt.jsxs("div",{className:ki.container,children:[p&&xt.jsx("div",{className:ki.buttonsWrapper,children:xt.jsxs("div",{children:[xt.jsx(Pa,{className:"".concat(ki.demoButton," ").concat(ki.testButton),onClick:()=>{T("before")},selfFocus:!0,children:"Before"}),xt.jsx(Pa,{className:ki.testButton,onClick:()=>{T("middle")},children:"Middle"}),xt.jsx(Pa,{className:ki.testButton,onClick:()=>{T("end")},children:"End"})]})}),i.map((b,j)=>xt.jsx(UF,{errorMessage:b.toString},"".concat(b.name,"-error-").concat(j.toString()))),xt.jsxs("div",{className:ki.imageWrapper,children:[xt.jsx("div",{className:ki.glow}),xt.jsx("img",{className:ki.image,src:"".concat(d==null?void 0:d.preScreen.backgroundLandscape.url)})]}),xt.jsxs("div",{className:ki.countdownWrapper,children:[xt.jsx("div",{className:"".concat(ki.title," subheader-bold"),children:d==null?void 0:d.preScreen.showTitle}),xt.jsx("div",{className:ki.dividerWrapper,children:xt.jsx("div",{className:ki.divider})}),xt.jsx("p",{className:"body-text ".concat(ki.countdownTitle),children:"Starts in"}),xt.jsxs("div",{className:ki.timeSectionContainer,children:[xt.jsxs("div",{className:ki.timeSection,children:[xt.jsx("div",{className:"subheader-bold",children:U}),xt.jsx("div",{className:"".concat(ki.label," label"),children:"days"})]}),xt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),xt.jsxs("div",{className:ki.timeSection,children:[xt.jsx("div",{className:"subheader-bold",children:x}),xt.jsx("div",{className:"".concat(ki.label," label"),children:"hours"})]}),xt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),xt.jsxs("div",{className:ki.timeSection,children:[xt.jsx("div",{className:"subheader-bold",children:_}),xt.jsx("div",{className:"".concat(ki.label," label"),children:"mins"})]}),xt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),xt.jsxs("div",{className:ki.timeSection,children:[xt.jsx("div",{className:"subheader-bold",children:I}),xt.jsx("div",{className:"".concat(ki.label," label"),children:"secs"})]})]})]}),xt.jsx("div",{className:ki.warning,children:!R&&a0==="new"&&xt.jsx(FF,{})})]})},_z="_wrapper_11y07_1",Tz="_container_11y07_19",Sz="_qrCodeContainer_11y07_39",wz="_qrCode_11y07_39",Az="_listContainer_11y07_65",Iz="_list_11y07_65",Cz="_listItemContainer_11y07_99",bz="_listNumber_11y07_113",Rz="_listText_11y07_135",Nz="_circleRightCorner_11y07_147",xz="_circleLeftCorner_11y07_171",Mz="_circleCenter_11y07_193",Dz="_fadeIn_11y07_1",No={wrapper:_z,container:Tz,qrCodeContainer:Sz,qrCode:wz,listContainer:Az,list:Iz,listItemContainer:Cz,listNumber:bz,listText:Rz,circleRightCorner:Nz,circleLeftCorner:xz,circleCenter:Mz,fadeIn:Dz},Pz=({url:o})=>xt.jsxs("div",{className:No.wrapper,children:[xt.jsx("div",{className:No.circleRightCorner}),xt.jsx("div",{className:No.circleLeftCorner}),xt.jsx("div",{className:No.circleCenter}),xt.jsxs("div",{className:No.container,children:[xt.jsxs("div",{className:"".concat(No.listContainer," body-text"),children:[xt.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),xt.jsxs("div",{className:No.list,children:[xt.jsxs("span",{className:No.listItemContainer,children:[xt.jsx("span",{className:No.listNumber,children:"1"}),xt.jsxs("span",{className:No.listText,children:["Download the ",xt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),xt.jsxs("span",{className:No.listItemContainer,children:[xt.jsx("span",{className:No.listNumber,children:"2"}),xt.jsx("span",{className:No.listText,children:"Enter the ticket code from your confirmation email."})]}),xt.jsxs("span",{className:No.listItemContainer,children:[xt.jsx("span",{className:No.listNumber,children:"3"}),xt.jsx("span",{className:No.listText,children:"Scan the QR code with the app."})]})]})]}),xt.jsx("div",{className:No.qrCodeContainer,children:xt.jsx("div",{className:No.qrCode,children:xt.jsx(gC,{bgColor:"white",fgColor:"black",value:o!=null?o:"",size:512})})})]})]}),Oz="_container_zht4e_1",Lz="_fadeIn_zht4e_1",kz="_scrollWrapper_zht4e_15",Fz="_scrollContainer_zht4e_29",$w={container:Oz,fadeIn:Lz,scrollWrapper:kz,scrollContainer:Fz};function Uz(){const o=lC();return xt.jsxs("div",{className:$w.container,children:[xt.jsx("h1",{children:"Oh no! This event has been canceled."}),xt.jsx("div",{className:$w.scrollWrapper,children:xt.jsx("div",{className:$w.scrollContainer,children:o&&o.postScreen.offersCollection.items.map((i,l)=>xt.jsx("img",{src:i.image.url},l))})})]})}function Bz(){const o=nu();Y7();const i=kg(),l=V7(),d=sh(),p=fC(),[w,C]=vn.useState(!1),[g,S]=vn.useState(!1),[F,R]=vn.useState(!1),[v,y]=vn.useState(),[O,m]=vn.useState(!1),[T,U]=vn.useState(!1),[x,_]=vn.useState(!1),[I,b]=vn.useState(),[j,Y]=vn.useState(),[W,X]=vn.useState(),se="".concat(iC,":").concat(eh);vn.useEffect(()=>{p&&b(p.find(ce=>ce.deviceId===eh)||p[0])},[p]),vn.useEffect(()=>{Y(I==null?void 0:I.stateInfo.state)},[I]);const N=W&&W.code===404?xt.jsx($V,{color:"#ff4646"}):xt.jsx(IF,{stroke:"10",color:"#ff4646",styles:{width:"5rem",height:"5rem"}}),$=W&&W.code===404?"No Internet connection. Try scanning the code again.":"".concat(W==null?void 0:W.name,". Try scanning the code again.");if(vn.useEffect(()=>{if(!o)return;const ce=()=>{console.log(X),o.adjustedEndTime&&o.adjustedEndTime<Date.now()?S(!0):o.adjustedStartTime&&(S(!1),y(o.adjustedStartTime-Date.now()))};return o.on("startTimeUpdated",ce),()=>{o.off("startTimeUpdated",ce)}},[o]),vn.useEffect(()=>{if(!i)return;const ce=()=>{S(!0)};return i.on("eventEnded",ce),()=>{i.off("eventEnded",ce)}},[i]),vn.useEffect(()=>{if(!d)return;const ce=()=>{R(!0)};return d.on("eventCanceled",ce),()=>{d.off("eventCanceled",ce)}},[d]),vn.useEffect(()=>{if(!O)return;U(!0);const ce=setTimeout(()=>{m(!1)},1500);return()=>{clearTimeout(ce)}},[O]),vn.useEffect(()=>{if(v)if(v>0){C(!1);const ce=setTimeout(()=>{C(!0)},v);return()=>{clearTimeout(ce)}}else C(!0)},[v]),vn.useEffect(()=>{j==="hostTv"?(_(!0),m(!0)):l===VA.CONNECTED_STATE&&a0!=="new"&&m(!0)},[j,l]),F)return xt.jsx(Uz,{});if(g)return xt.jsx(_V,{});{if(!x&&j===void 0)return xt.jsxs(xt.Fragment,{children:[xt.jsx(Pz,{url:se}),W&&xt.jsx(UF,{errorMessage:$,errorIcon:N})]});if(O&&!T)return xt.jsx(GK,{})}return xt.jsxs("div",{children:[xt.jsx("div",{className:w?"":HK.hidden,children:xt.jsx(PK,{})}),!w&&xt.jsx(Ez,{timeToLive:v})]})}aF.init({debug:!1,shouldUseNativeEvents:!0});function jz(){const o=localStorage.getItem("ticketCode"),[i,l]=vn.useState(o!=null?o:"");return xt.jsx("div",{className:eH.pageContainer,children:xt.jsxs(q7,{baseUrl:zq,preferredProfile:"dash-drm",contentfulAccessToken:Yq,contentfulSpaceId:Wq,newSetupToggle:a0==="new",ticketCodeProp:i,children:[a0!=="new",xt.jsx(Bz,{})]})})}Qw.createRoot(document.getElementById("root")).render(xt.jsx(jz,{}));export{Zz as __vite_legacy_guard};
