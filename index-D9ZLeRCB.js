function vne(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const w of p)if(w.type==="childList")for(const b of w.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function l(p){const w={};return p.integrity&&(w.integrity=p.integrity),p.referrerPolicy&&(w.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?w.credentials="include":p.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function f(p){if(p.ep)return;p.ep=!0;const w=l(p);fetch(p.href,w)}})();var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var tF={exports:{}},K0={},nF={exports:{}},Fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg=Symbol.for("react.element"),E9=Symbol.for("react.portal"),_9=Symbol.for("react.fragment"),T9=Symbol.for("react.strict_mode"),S9=Symbol.for("react.profiler"),w9=Symbol.for("react.provider"),A9=Symbol.for("react.context"),I9=Symbol.for("react.forward_ref"),b9=Symbol.for("react.suspense"),C9=Symbol.for("react.memo"),R9=Symbol.for("react.lazy"),FD=Symbol.iterator;function x9(i){return i===null||typeof i!="object"?null:(i=FD&&i[FD]||i["@@iterator"],typeof i=="function"?i:null)}var rF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iF=Object.assign,oF={};function _h(i,o,l){this.props=i,this.context=o,this.refs=oF,this.updater=l||rF}_h.prototype.isReactComponent={};_h.prototype.setState=function(i,o){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,o,"setState")};_h.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function aF(){}aF.prototype=_h.prototype;function _b(i,o,l){this.props=i,this.context=o,this.refs=oF,this.updater=l||rF}var Tb=_b.prototype=new aF;Tb.constructor=_b;iF(Tb,_h.prototype);Tb.isPureReactComponent=!0;var UD=Array.isArray,sF=Object.prototype.hasOwnProperty,Sb={current:null},uF={key:!0,ref:!0,__self:!0,__source:!0};function lF(i,o,l){var f,p={},w=null,b=null;if(o!=null)for(f in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(w=""+o.key),o)sF.call(o,f)&&!uF.hasOwnProperty(f)&&(p[f]=o[f]);var g=arguments.length-2;if(g===1)p.children=l;else if(1<g){for(var S=Array(g),F=0;F<g;F++)S[F]=arguments[F+2];p.children=S}if(i&&i.defaultProps)for(f in g=i.defaultProps,g)p[f]===void 0&&(p[f]=g[f]);return{$$typeof:Yg,type:i,key:w,ref:b,props:p,_owner:Sb.current}}function N9(i,o){return{$$typeof:Yg,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}}function wb(i){return typeof i=="object"&&i!==null&&i.$$typeof===Yg}function M9(i){var o={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(l){return o[l]})}var BD=/\/+/g;function sT(i,o){return typeof i=="object"&&i!==null&&i.key!=null?M9(""+i.key):o.toString(36)}function Jy(i,o,l,f,p){var w=typeof i;(w==="undefined"||w==="boolean")&&(i=null);var b=!1;if(i===null)b=!0;else switch(w){case"string":case"number":b=!0;break;case"object":switch(i.$$typeof){case Yg:case E9:b=!0}}if(b)return b=i,p=p(b),i=f===""?"."+sT(b,0):f,UD(p)?(l="",i!=null&&(l=i.replace(BD,"$&/")+"/"),Jy(p,o,l,"",function(F){return F})):p!=null&&(wb(p)&&(p=N9(p,l+(!p.key||b&&b.key===p.key?"":(""+p.key).replace(BD,"$&/")+"/")+i)),o.push(p)),1;if(b=0,f=f===""?".":f+":",UD(i))for(var g=0;g<i.length;g++){w=i[g];var S=f+sT(w,g);b+=Jy(w,o,l,S,p)}else if(S=x9(i),typeof S=="function")for(i=S.call(i),g=0;!(w=i.next()).done;)w=w.value,S=f+sT(w,g++),b+=Jy(w,o,l,S,p);else if(w==="object")throw o=String(i),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return b}function Ry(i,o,l){if(i==null)return i;var f=[],p=0;return Jy(i,f,"","",function(w){return o.call(l,w,p++)}),f}function D9(i){if(i._status===-1){var o=i._result;o=o(),o.then(function(l){(i._status===0||i._status===-1)&&(i._status=1,i._result=l)},function(l){(i._status===0||i._status===-1)&&(i._status=2,i._result=l)}),i._status===-1&&(i._status=0,i._result=o)}if(i._status===1)return i._result.default;throw i._result}var Sa={current:null},e0={transition:null},P9={ReactCurrentDispatcher:Sa,ReactCurrentBatchConfig:e0,ReactCurrentOwner:Sb};function cF(){throw Error("act(...) is not supported in production builds of React.")}Fr.Children={map:Ry,forEach:function(i,o,l){Ry(i,function(){o.apply(this,arguments)},l)},count:function(i){var o=0;return Ry(i,function(){o++}),o},toArray:function(i){return Ry(i,function(o){return o})||[]},only:function(i){if(!wb(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};Fr.Component=_h;Fr.Fragment=_9;Fr.Profiler=S9;Fr.PureComponent=_b;Fr.StrictMode=T9;Fr.Suspense=b9;Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P9;Fr.act=cF;Fr.cloneElement=function(i,o,l){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var f=iF({},i.props),p=i.key,w=i.ref,b=i._owner;if(o!=null){if(o.ref!==void 0&&(w=o.ref,b=Sb.current),o.key!==void 0&&(p=""+o.key),i.type&&i.type.defaultProps)var g=i.type.defaultProps;for(S in o)sF.call(o,S)&&!uF.hasOwnProperty(S)&&(f[S]=o[S]===void 0&&g!==void 0?g[S]:o[S])}var S=arguments.length-2;if(S===1)f.children=l;else if(1<S){g=Array(S);for(var F=0;F<S;F++)g[F]=arguments[F+2];f.children=g}return{$$typeof:Yg,type:i.type,key:p,ref:w,props:f,_owner:b}};Fr.createContext=function(i){return i={$$typeof:A9,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:w9,_context:i},i.Consumer=i};Fr.createElement=lF;Fr.createFactory=function(i){var o=lF.bind(null,i);return o.type=i,o};Fr.createRef=function(){return{current:null}};Fr.forwardRef=function(i){return{$$typeof:I9,render:i}};Fr.isValidElement=wb;Fr.lazy=function(i){return{$$typeof:R9,_payload:{_status:-1,_result:i},_init:D9}};Fr.memo=function(i,o){return{$$typeof:C9,type:i,compare:o===void 0?null:o}};Fr.startTransition=function(i){var o=e0.transition;e0.transition={};try{i()}finally{e0.transition=o}};Fr.unstable_act=cF;Fr.useCallback=function(i,o){return Sa.current.useCallback(i,o)};Fr.useContext=function(i){return Sa.current.useContext(i)};Fr.useDebugValue=function(){};Fr.useDeferredValue=function(i){return Sa.current.useDeferredValue(i)};Fr.useEffect=function(i,o){return Sa.current.useEffect(i,o)};Fr.useId=function(){return Sa.current.useId()};Fr.useImperativeHandle=function(i,o,l){return Sa.current.useImperativeHandle(i,o,l)};Fr.useInsertionEffect=function(i,o){return Sa.current.useInsertionEffect(i,o)};Fr.useLayoutEffect=function(i,o){return Sa.current.useLayoutEffect(i,o)};Fr.useMemo=function(i,o){return Sa.current.useMemo(i,o)};Fr.useReducer=function(i,o,l){return Sa.current.useReducer(i,o,l)};Fr.useRef=function(i){return Sa.current.useRef(i)};Fr.useState=function(i){return Sa.current.useState(i)};Fr.useSyncExternalStore=function(i,o,l){return Sa.current.useSyncExternalStore(i,o,l)};Fr.useTransition=function(){return Sa.current.useTransition()};Fr.version="18.3.1";nF.exports=Fr;var pn=nF.exports;const ru=Eb(pn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O9=pn,L9=Symbol.for("react.element"),k9=Symbol.for("react.fragment"),F9=Object.prototype.hasOwnProperty,U9=O9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B9={key:!0,ref:!0,__self:!0,__source:!0};function fF(i,o,l){var f,p={},w=null,b=null;l!==void 0&&(w=""+l),o.key!==void 0&&(w=""+o.key),o.ref!==void 0&&(b=o.ref);for(f in o)F9.call(o,f)&&!B9.hasOwnProperty(f)&&(p[f]=o[f]);if(i&&i.defaultProps)for(f in o=i.defaultProps,o)p[f]===void 0&&(p[f]=o[f]);return{$$typeof:L9,type:i,key:w,ref:b,props:p,_owner:U9.current}}K0.Fragment=k9;K0.jsx=fF;K0.jsxs=fF;tF.exports=K0;var wt=tF.exports,lI={},dF={exports:{}},hs={},hF={exports:{}},pF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(Ze,it){var st=Ze.length;Ze.push(it);e:for(;0<st;){var Ye=st-1>>>1,lt=Ze[Ye];if(0<p(lt,it))Ze[Ye]=it,Ze[st]=lt,st=Ye;else break e}}function l(Ze){return Ze.length===0?null:Ze[0]}function f(Ze){if(Ze.length===0)return null;var it=Ze[0],st=Ze.pop();if(st!==it){Ze[0]=st;e:for(var Ye=0,lt=Ze.length,At=lt>>>1;Ye<At;){var Oe=2*(Ye+1)-1,Qe=Ze[Oe],ct=Oe+1,Qt=Ze[ct];if(0>p(Qe,st))ct<lt&&0>p(Qt,Qe)?(Ze[Ye]=Qt,Ze[ct]=st,Ye=ct):(Ze[Ye]=Qe,Ze[Oe]=st,Ye=Oe);else if(ct<lt&&0>p(Qt,st))Ze[Ye]=Qt,Ze[ct]=st,Ye=ct;else break e}}return it}function p(Ze,it){var st=Ze.sortIndex-it.sortIndex;return st!==0?st:Ze.id-it.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;i.unstable_now=function(){return w.now()}}else{var b=Date,g=b.now();i.unstable_now=function(){return b.now()-g}}var S=[],F=[],R=1,y=null,v=3,D=!1,m=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ze){for(var it=l(F);it!==null;){if(it.callback===null)f(F);else if(it.startTime<=Ze)f(F),it.sortIndex=it.expirationTime,o(S,it);else break;it=l(F)}}function C(Ze){if(T=!1,I(Ze),!m)if(l(S)!==null)m=!0,Xe(j);else{var it=l(F);it!==null&&Ae(C,it.startTime-Ze)}}function j(Ze,it){m=!1,T&&(T=!1,N(W),W=-1),D=!0;var st=v;try{for(I(it),y=l(S);y!==null&&(!(y.expirationTime>it)||Ze&&!X());){var Ye=y.callback;if(typeof Ye=="function"){y.callback=null,v=y.priorityLevel;var lt=Ye(y.expirationTime<=it);it=i.unstable_now(),typeof lt=="function"?y.callback=lt:y===l(S)&&f(S),I(it)}else f(S);y=l(S)}if(y!==null)var At=!0;else{var Oe=l(F);Oe!==null&&Ae(C,Oe.startTime-it),At=!1}return At}finally{y=null,v=st,D=!1}}var Y=!1,$=null,W=-1,ue=5,x=-1;function X(){return!(i.unstable_now()-x<ue)}function de(){if($!==null){var Ze=i.unstable_now();x=Ze;var it=!0;try{it=$(!0,Ze)}finally{it?oe():(Y=!1,$=null)}}else Y=!1}var oe;if(typeof _=="function")oe=function(){_(de)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ce=ve.port2;ve.port1.onmessage=de,oe=function(){Ce.postMessage(null)}}else oe=function(){U(de,0)};function Xe(Ze){$=Ze,Y||(Y=!0,oe())}function Ae(Ze,it){W=U(function(){Ze(i.unstable_now())},it)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ze){Ze.callback=null},i.unstable_continueExecution=function(){m||D||(m=!0,Xe(j))},i.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<Ze?Math.floor(1e3/Ze):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return l(S)},i.unstable_next=function(Ze){switch(v){case 1:case 2:case 3:var it=3;break;default:it=v}var st=v;v=it;try{return Ze()}finally{v=st}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Ze,it){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var st=v;v=Ze;try{return it()}finally{v=st}},i.unstable_scheduleCallback=function(Ze,it,st){var Ye=i.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Ye+st:Ye):st=Ye,Ze){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=st+lt,Ze={id:R++,callback:it,priorityLevel:Ze,startTime:st,expirationTime:lt,sortIndex:-1},st>Ye?(Ze.sortIndex=st,o(F,Ze),l(S)===null&&Ze===l(F)&&(T?(N(W),W=-1):T=!0,Ae(C,st-Ye))):(Ze.sortIndex=lt,o(S,Ze),m||D||(m=!0,Xe(j))),Ze},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(Ze){var it=v;return function(){var st=v;v=it;try{return Ze.apply(this,arguments)}finally{v=st}}}})(pF);hF.exports=pF;var j9=hF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z9=pn,ds=j9;function jn(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gF=new Set,bg={};function _f(i,o){fh(i,o),fh(i+"Capture",o)}function fh(i,o){for(bg[i]=o,i=0;i<o.length;i++)gF.add(o[i])}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cI=Object.prototype.hasOwnProperty,G9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jD={},ZD={};function q9(i){return cI.call(ZD,i)?!0:cI.call(jD,i)?!1:G9.test(i)?ZD[i]=!0:(jD[i]=!0,!1)}function H9(i,o,l,f){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function K9(i,o,l,f){if(o===null||typeof o>"u"||H9(i,o,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function wa(i,o,l,f,p,w,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=w,this.removeEmptyString=b}var Go={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Go[i]=new wa(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];Go[o]=new wa(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Go[i]=new wa(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Go[i]=new wa(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Go[i]=new wa(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Go[i]=new wa(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Go[i]=new wa(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Go[i]=new wa(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Go[i]=new wa(i,5,!1,i.toLowerCase(),null,!1,!1)});var Ab=/[\-:]([a-z])/g;function Ib(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Ab,Ib);Go[o]=new wa(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Ab,Ib);Go[o]=new wa(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Ab,Ib);Go[o]=new wa(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Go[i]=new wa(i,1,!1,i.toLowerCase(),null,!1,!1)});Go.xlinkHref=new wa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Go[i]=new wa(i,1,!1,i.toLowerCase(),null,!0,!0)});function bb(i,o,l,f){var p=Go.hasOwnProperty(o)?Go[o]:null;(p!==null?p.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(K9(o,l,p,f)&&(l=null),f||p===null?q9(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,f=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,f?i.setAttributeNS(f,o,l):i.setAttribute(o,l))))}var Sl=Z9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xy=Symbol.for("react.element"),Hd=Symbol.for("react.portal"),Kd=Symbol.for("react.fragment"),Cb=Symbol.for("react.strict_mode"),fI=Symbol.for("react.profiler"),mF=Symbol.for("react.provider"),vF=Symbol.for("react.context"),Rb=Symbol.for("react.forward_ref"),dI=Symbol.for("react.suspense"),hI=Symbol.for("react.suspense_list"),xb=Symbol.for("react.memo"),$l=Symbol.for("react.lazy"),yF=Symbol.for("react.offscreen"),GD=Symbol.iterator;function $p(i){return i===null||typeof i!="object"?null:(i=GD&&i[GD]||i["@@iterator"],typeof i=="function"?i:null)}var Vi=Object.assign,uT;function lg(i){if(uT===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);uT=o&&o[1]||""}return"\n"+uT+i}var lT=!1;function cT(i,o){if(!i||lT)return"";lT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(F){var f=F}Reflect.construct(i,[],o)}else{try{o.call()}catch(F){f=F}i.call(o.prototype)}else{try{throw Error()}catch(F){f=F}i()}}catch(F){if(F&&f&&typeof F.stack=="string"){for(var p=F.stack.split("\n"),w=f.stack.split("\n"),b=p.length-1,g=w.length-1;1<=b&&0<=g&&p[b]!==w[g];)g--;for(;1<=b&&0<=g;b--,g--)if(p[b]!==w[g]){if(b!==1||g!==1)do if(b--,g--,0>g||p[b]!==w[g]){var S="\n"+p[b].replace(" at new "," at ");return i.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",i.displayName)),S}while(1<=b&&0<=g);break}}}finally{lT=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?lg(i):""}function V9(i){switch(i.tag){case 5:return lg(i.type);case 16:return lg("Lazy");case 13:return lg("Suspense");case 19:return lg("SuspenseList");case 0:case 2:case 15:return i=cT(i.type,!1),i;case 11:return i=cT(i.type.render,!1),i;case 1:return i=cT(i.type,!0),i;default:return""}}function pI(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Kd:return"Fragment";case Hd:return"Portal";case fI:return"Profiler";case Cb:return"StrictMode";case dI:return"Suspense";case hI:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case vF:return(i.displayName||"Context")+".Consumer";case mF:return(i._context.displayName||"Context")+".Provider";case Rb:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case xb:return o=i.displayName||null,o!==null?o:pI(i.type)||"Memo";case $l:o=i._payload,i=i._init;try{return pI(i(o))}catch(l){}}return null}function z9(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pI(o);case 8:return o===Cb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function fc(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function EF(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Y9(i){var o=EF(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,w=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(b){f=""+b,w.call(this,b)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(b){f=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ny(i){i._valueTracker||(i._valueTracker=Y9(i))}function _F(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return i&&(f=EF(i)?i.checked?"true":"false":i.value),i=f,i!==l?(o.setValue(i),!0):!1}function p0(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(o){return i.body}}function gI(i,o){var l=o.checked;return Vi({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:i._wrapperState.initialChecked})}function qD(i,o){var l=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;l=fc(o.value!=null?o.value:l),i._wrapperState={initialChecked:f,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function TF(i,o){o=o.checked,o!=null&&bb(i,"checked",o,!1)}function mI(i,o){TF(i,o);var l=fc(o.value),f=o.type;if(l!=null)f==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?vI(i,o.type,l):o.hasOwnProperty("defaultValue")&&vI(i,o.type,fc(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function HD(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function vI(i,o,l){(o!=="number"||p0(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var cg=Array.isArray;function oh(i,o,l,f){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&f&&(i[l].defaultSelected=!0)}else{for(l=""+fc(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,f&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function yI(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Vi({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function KD(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(jn(92));if(cg(l)){if(1<l.length)throw Error(jn(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:fc(l)}}function SF(i,o){var l=fc(o.value),f=fc(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),f!=null&&(i.defaultValue=""+f)}function VD(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function wF(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function EI(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?wF(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var My,AF=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,f,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,f,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(My=My||document.createElement("div"),My.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=My.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Cg(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var mg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W9=["Webkit","ms","Moz","O"];Object.keys(mg).forEach(function(i){W9.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),mg[o]=mg[i]})});function IF(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||mg.hasOwnProperty(i)&&mg[i]?(""+o).trim():o+"px"}function bF(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var f=l.indexOf("--")===0,p=IF(l,o[l],f);l==="float"&&(l="cssFloat"),f?i.setProperty(l,p):i[l]=p}}var $9=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _I(i,o){if(o){if($9[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(jn(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(jn(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(jn(61))}if(o.style!=null&&typeof o.style!="object")throw Error(jn(62))}}function TI(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SI=null;function Nb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var wI=null,ah=null,sh=null;function zD(i){if(i=Xg(i)){if(typeof wI!="function")throw Error(jn(280));var o=i.stateNode;o&&(o=$0(o),wI(i.stateNode,i.type,o))}}function CF(i){ah?sh?sh.push(i):sh=[i]:ah=i}function RF(){if(ah){var i=ah,o=sh;if(sh=ah=null,zD(i),o)for(i=0;i<o.length;i++)zD(o[i])}}function xF(i,o){return i(o)}function NF(){}var fT=!1;function MF(i,o,l){if(fT)return i(o,l);fT=!0;try{return xF(i,o,l)}finally{fT=!1,(ah!==null||sh!==null)&&(NF(),RF())}}function Rg(i,o){var l=i.stateNode;if(l===null)return null;var f=$0(l);if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(jn(231,o,typeof l));return l}var AI=!1;if(yl)try{var Xp={};Object.defineProperty(Xp,"passive",{get:function(){AI=!0}}),window.addEventListener("test",Xp,Xp),window.removeEventListener("test",Xp,Xp)}catch(i){AI=!1}function X9(i,o,l,f,p,w,b,g,S){var F=Array.prototype.slice.call(arguments,3);try{o.apply(l,F)}catch(R){this.onError(R)}}var vg=!1,g0=null,m0=!1,II=null,Q9={onError:function(i){vg=!0,g0=i}};function J9(i,o,l,f,p,w,b,g,S){vg=!1,g0=null,X9.apply(Q9,arguments)}function eq(i,o,l,f,p,w,b,g,S){if(J9.apply(this,arguments),vg){if(vg){var F=g0;vg=!1,g0=null}else throw Error(jn(198));m0||(m0=!0,II=F)}}function Tf(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function DF(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function YD(i){if(Tf(i)!==i)throw Error(jn(188))}function tq(i){var o=i.alternate;if(!o){if(o=Tf(i),o===null)throw Error(jn(188));return o!==i?null:i}for(var l=i,f=o;;){var p=l.return;if(p===null)break;var w=p.alternate;if(w===null){if(f=p.return,f!==null){l=f;continue}break}if(p.child===w.child){for(w=p.child;w;){if(w===l)return YD(p),i;if(w===f)return YD(p),o;w=w.sibling}throw Error(jn(188))}if(l.return!==f.return)l=p,f=w;else{for(var b=!1,g=p.child;g;){if(g===l){b=!0,l=p,f=w;break}if(g===f){b=!0,f=p,l=w;break}g=g.sibling}if(!b){for(g=w.child;g;){if(g===l){b=!0,l=w,f=p;break}if(g===f){b=!0,f=w,l=p;break}g=g.sibling}if(!b)throw Error(jn(189))}}if(l.alternate!==f)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?i:o}function PF(i){return i=tq(i),i!==null?OF(i):null}function OF(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=OF(i);if(o!==null)return o;i=i.sibling}return null}var LF=ds.unstable_scheduleCallback,WD=ds.unstable_cancelCallback,nq=ds.unstable_shouldYield,rq=ds.unstable_requestPaint,lo=ds.unstable_now,iq=ds.unstable_getCurrentPriorityLevel,Mb=ds.unstable_ImmediatePriority,kF=ds.unstable_UserBlockingPriority,v0=ds.unstable_NormalPriority,oq=ds.unstable_LowPriority,FF=ds.unstable_IdlePriority,V0=null,Mu=null;function aq(i){if(Mu&&typeof Mu.onCommitFiberRoot=="function")try{Mu.onCommitFiberRoot(V0,i,void 0,(i.current.flags&128)===128)}catch(o){}}var ou=Math.clz32?Math.clz32:lq,sq=Math.log,uq=Math.LN2;function lq(i){return i>>>=0,i===0?32:31-(sq(i)/uq|0)|0}var Dy=64,Py=4194304;function fg(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function y0(i,o){var l=i.pendingLanes;if(l===0)return 0;var f=0,p=i.suspendedLanes,w=i.pingedLanes,b=l&268435455;if(b!==0){var g=b&~p;g!==0?f=fg(g):(w&=b,w!==0&&(f=fg(w)))}else b=l&~p,b!==0?f=fg(b):w!==0&&(f=fg(w));if(f===0)return 0;if(o!==0&&o!==f&&!(o&p)&&(p=f&-f,w=o&-o,p>=w||p===16&&(w&4194240)!==0))return o;if(f&4&&(f|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)l=31-ou(o),p=1<<l,f|=i[l],o&=~p;return f}function cq(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fq(i,o){for(var l=i.suspendedLanes,f=i.pingedLanes,p=i.expirationTimes,w=i.pendingLanes;0<w;){var b=31-ou(w),g=1<<b,S=p[b];S===-1?(!(g&l)||g&f)&&(p[b]=cq(g,o)):S<=o&&(i.expiredLanes|=g),w&=~g}}function bI(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function UF(){var i=Dy;return Dy<<=1,!(Dy&4194240)&&(Dy=64),i}function dT(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Wg(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-ou(o),i[o]=l}function dq(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-ou(l),w=1<<p;o[p]=0,f[p]=-1,i[p]=-1,l&=~w}}function Db(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var f=31-ou(l),p=1<<f;p&o|i[f]&o&&(i[f]|=o),l&=~p}}var di=0;function BF(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var jF,Pb,ZF,GF,qF,CI=!1,Oy=[],nc=null,rc=null,ic=null,xg=new Map,Ng=new Map,Ql=[],hq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $D(i,o){switch(i){case"focusin":case"focusout":nc=null;break;case"dragenter":case"dragleave":rc=null;break;case"mouseover":case"mouseout":ic=null;break;case"pointerover":case"pointerout":xg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ng.delete(o.pointerId)}}function Qp(i,o,l,f,p,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:w,targetContainers:[p]},o!==null&&(o=Xg(o),o!==null&&Pb(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function pq(i,o,l,f,p){switch(o){case"focusin":return nc=Qp(nc,i,o,l,f,p),!0;case"dragenter":return rc=Qp(rc,i,o,l,f,p),!0;case"mouseover":return ic=Qp(ic,i,o,l,f,p),!0;case"pointerover":var w=p.pointerId;return xg.set(w,Qp(xg.get(w)||null,i,o,l,f,p)),!0;case"gotpointercapture":return w=p.pointerId,Ng.set(w,Qp(Ng.get(w)||null,i,o,l,f,p)),!0}return!1}function HF(i){var o=of(i.target);if(o!==null){var l=Tf(o);if(l!==null){if(o=l.tag,o===13){if(o=DF(l),o!==null){i.blockedOn=o,qF(i.priority,function(){ZF(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function t0(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=RI(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);SI=f,l.target.dispatchEvent(f),SI=null}else return o=Xg(l),o!==null&&Pb(o),i.blockedOn=l,!1;o.shift()}return!0}function XD(i,o,l){t0(i)&&l.delete(o)}function gq(){CI=!1,nc!==null&&t0(nc)&&(nc=null),rc!==null&&t0(rc)&&(rc=null),ic!==null&&t0(ic)&&(ic=null),xg.forEach(XD),Ng.forEach(XD)}function Jp(i,o){i.blockedOn===o&&(i.blockedOn=null,CI||(CI=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,gq)))}function Mg(i){function o(p){return Jp(p,i)}if(0<Oy.length){Jp(Oy[0],i);for(var l=1;l<Oy.length;l++){var f=Oy[l];f.blockedOn===i&&(f.blockedOn=null)}}for(nc!==null&&Jp(nc,i),rc!==null&&Jp(rc,i),ic!==null&&Jp(ic,i),xg.forEach(o),Ng.forEach(o),l=0;l<Ql.length;l++)f=Ql[l],f.blockedOn===i&&(f.blockedOn=null);for(;0<Ql.length&&(l=Ql[0],l.blockedOn===null);)HF(l),l.blockedOn===null&&Ql.shift()}var uh=Sl.ReactCurrentBatchConfig,E0=!0;function mq(i,o,l,f){var p=di,w=uh.transition;uh.transition=null;try{di=1,Ob(i,o,l,f)}finally{di=p,uh.transition=w}}function vq(i,o,l,f){var p=di,w=uh.transition;uh.transition=null;try{di=4,Ob(i,o,l,f)}finally{di=p,uh.transition=w}}function Ob(i,o,l,f){if(E0){var p=RI(i,o,l,f);if(p===null)ST(i,o,f,_0,l),$D(i,f);else if(pq(p,i,o,l,f))f.stopPropagation();else if($D(i,f),o&4&&-1<hq.indexOf(i)){for(;p!==null;){var w=Xg(p);if(w!==null&&jF(w),w=RI(i,o,l,f),w===null&&ST(i,o,f,_0,l),w===p)break;p=w}p!==null&&f.stopPropagation()}else ST(i,o,f,null,l)}}var _0=null;function RI(i,o,l,f){if(_0=null,i=Nb(f),i=of(i),i!==null)if(o=Tf(i),o===null)i=null;else if(l=o.tag,l===13){if(i=DF(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return _0=i,null}function KF(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iq()){case Mb:return 1;case kF:return 4;case v0:case oq:return 16;case FF:return 536870912;default:return 16}default:return 16}}var ec=null,Lb=null,n0=null;function VF(){if(n0)return n0;var i,o=Lb,l=o.length,f,p="value"in ec?ec.value:ec.textContent,w=p.length;for(i=0;i<l&&o[i]===p[i];i++);var b=l-i;for(f=1;f<=b&&o[l-f]===p[w-f];f++);return n0=p.slice(i,1<f?1-f:void 0)}function r0(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ly(){return!0}function QD(){return!1}function ps(i){function o(l,f,p,w,b){this._reactName=l,this._targetInst=p,this.type=f,this.nativeEvent=w,this.target=b,this.currentTarget=null;for(var g in i)i.hasOwnProperty(g)&&(l=i[g],this[g]=l?l(w):w[g]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ly:QD,this.isPropagationStopped=QD,this}return Vi(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ly)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ly)},persist:function(){},isPersistent:Ly}),o}var Th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kb=ps(Th),$g=Vi({},Th,{view:0,detail:0}),yq=ps($g),hT,pT,eg,z0=Vi({},$g,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fb,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==eg&&(eg&&i.type==="mousemove"?(hT=i.screenX-eg.screenX,pT=i.screenY-eg.screenY):pT=hT=0,eg=i),hT)},movementY:function(i){return"movementY"in i?i.movementY:pT}}),JD=ps(z0),Eq=Vi({},z0,{dataTransfer:0}),_q=ps(Eq),Tq=Vi({},$g,{relatedTarget:0}),gT=ps(Tq),Sq=Vi({},Th,{animationName:0,elapsedTime:0,pseudoElement:0}),wq=ps(Sq),Aq=Vi({},Th,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Iq=ps(Aq),bq=Vi({},Th,{data:0}),eP=ps(bq),Cq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nq(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=xq[i])?!!o[i]:!1}function Fb(){return Nq}var Mq=Vi({},$g,{key:function(i){if(i.key){var o=Cq[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=r0(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rq[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fb,charCode:function(i){return i.type==="keypress"?r0(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?r0(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Dq=ps(Mq),Pq=Vi({},z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tP=ps(Pq),Oq=Vi({},$g,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fb}),Lq=ps(Oq),kq=Vi({},Th,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fq=ps(kq),Uq=Vi({},z0,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Bq=ps(Uq),jq=[9,13,27,32],Ub=yl&&"CompositionEvent"in window,yg=null;yl&&"documentMode"in document&&(yg=document.documentMode);var Zq=yl&&"TextEvent"in window&&!yg,zF=yl&&(!Ub||yg&&8<yg&&11>=yg),nP=" ",rP=!1;function YF(i,o){switch(i){case"keyup":return jq.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WF(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Vd=!1;function Gq(i,o){switch(i){case"compositionend":return WF(o);case"keypress":return o.which!==32?null:(rP=!0,nP);case"textInput":return i=o.data,i===nP&&rP?null:i;default:return null}}function qq(i,o){if(Vd)return i==="compositionend"||!Ub&&YF(i,o)?(i=VF(),n0=Lb=ec=null,Vd=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zF&&o.locale!=="ko"?null:o.data;default:return null}}var Hq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iP(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Hq[i.type]:o==="textarea"}function $F(i,o,l,f){CF(f),o=T0(o,"onChange"),0<o.length&&(l=new kb("onChange","change",null,l,f),i.push({event:l,listeners:o}))}var Eg=null,Dg=null;function Kq(i){s4(i,0)}function Y0(i){var o=Wd(i);if(_F(o))return i}function Vq(i,o){if(i==="change")return o}var XF=!1;if(yl){var mT;if(yl){var vT="oninput"in document;if(!vT){var oP=document.createElement("div");oP.setAttribute("oninput","return;"),vT=typeof oP.oninput=="function"}mT=vT}else mT=!1;XF=mT&&(!document.documentMode||9<document.documentMode)}function aP(){Eg&&(Eg.detachEvent("onpropertychange",QF),Dg=Eg=null)}function QF(i){if(i.propertyName==="value"&&Y0(Dg)){var o=[];$F(o,Dg,i,Nb(i)),MF(Kq,o)}}function zq(i,o,l){i==="focusin"?(aP(),Eg=o,Dg=l,Eg.attachEvent("onpropertychange",QF)):i==="focusout"&&aP()}function Yq(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Y0(Dg)}function Wq(i,o){if(i==="click")return Y0(o)}function $q(i,o){if(i==="input"||i==="change")return Y0(o)}function Xq(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var su=typeof Object.is=="function"?Object.is:Xq;function Pg(i,o){if(su(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var p=l[f];if(!cI.call(o,p)||!su(i[p],o[p]))return!1}return!0}function sP(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function uP(i,o){var l=sP(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=o&&f>=o)return{node:l,offset:o-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=sP(l)}}function JF(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?JF(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function e4(){for(var i=window,o=p0();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch(f){l=!1}if(l)i=o.contentWindow;else break;o=p0(i.document)}return o}function Bb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Qq(i){var o=e4(),l=i.focusedElem,f=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&JF(l.ownerDocument.documentElement,l)){if(f!==null&&Bb(l)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,w=Math.min(f.start,p);f=f.end===void 0?w:Math.min(f.end,p),!i.extend&&w>f&&(p=f,f=w,w=p),p=uP(l,w);var b=uP(l,f);p&&b&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),w>f?(i.addRange(o),i.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Jq=yl&&"documentMode"in document&&11>=document.documentMode,zd=null,xI=null,_g=null,NI=!1;function lP(i,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;NI||zd==null||zd!==p0(f)||(f=zd,"selectionStart"in f&&Bb(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),_g&&Pg(_g,f)||(_g=f,f=T0(xI,"onSelect"),0<f.length&&(o=new kb("onSelect","select",null,o,l),i.push({event:o,listeners:f}),o.target=zd)))}function ky(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Yd={animationend:ky("Animation","AnimationEnd"),animationiteration:ky("Animation","AnimationIteration"),animationstart:ky("Animation","AnimationStart"),transitionend:ky("Transition","TransitionEnd")},yT={},t4={};yl&&(t4=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function W0(i){if(yT[i])return yT[i];if(!Yd[i])return i;var o=Yd[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in t4)return yT[i]=o[l];return i}var n4=W0("animationend"),r4=W0("animationiteration"),i4=W0("animationstart"),o4=W0("transitionend"),a4=new Map,cP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hc(i,o){a4.set(i,o),_f(o,[i])}for(var ET=0;ET<cP.length;ET++){var _T=cP[ET],eH=_T.toLowerCase(),tH=_T[0].toUpperCase()+_T.slice(1);hc(eH,"on"+tH)}hc(n4,"onAnimationEnd");hc(r4,"onAnimationIteration");hc(i4,"onAnimationStart");hc("dblclick","onDoubleClick");hc("focusin","onFocus");hc("focusout","onBlur");hc(o4,"onTransitionEnd");fh("onMouseEnter",["mouseout","mouseover"]);fh("onMouseLeave",["mouseout","mouseover"]);fh("onPointerEnter",["pointerout","pointerover"]);fh("onPointerLeave",["pointerout","pointerover"]);_f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_f("onBeforeInput",["compositionend","keypress","textInput","paste"]);_f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nH=new Set("cancel close invalid load scroll toggle".split(" ").concat(dg));function fP(i,o,l){var f=i.type||"unknown-event";i.currentTarget=l,eq(f,o,void 0,i),i.currentTarget=null}function s4(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],p=f.event;f=f.listeners;e:{var w=void 0;if(o)for(var b=f.length-1;0<=b;b--){var g=f[b],S=g.instance,F=g.currentTarget;if(g=g.listener,S!==w&&p.isPropagationStopped())break e;fP(p,g,F),w=S}else for(b=0;b<f.length;b++){if(g=f[b],S=g.instance,F=g.currentTarget,g=g.listener,S!==w&&p.isPropagationStopped())break e;fP(p,g,F),w=S}}}if(m0)throw i=II,m0=!1,II=null,i}function xi(i,o){var l=o[LI];l===void 0&&(l=o[LI]=new Set);var f=i+"__bubble";l.has(f)||(u4(o,i,2,!1),l.add(f))}function TT(i,o,l){var f=0;o&&(f|=4),u4(l,i,f,o)}var Fy="_reactListening"+Math.random().toString(36).slice(2);function Og(i){if(!i[Fy]){i[Fy]=!0,gF.forEach(function(l){l!=="selectionchange"&&(nH.has(l)||TT(l,!1,i),TT(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Fy]||(o[Fy]=!0,TT("selectionchange",!1,o))}}function u4(i,o,l,f){switch(KF(o)){case 1:var p=mq;break;case 4:p=vq;break;default:p=Ob}l=p.bind(null,o,l,i),p=void 0,!AI||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),f?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function ST(i,o,l,f,p){var w=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var g=f.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(b===4)for(b=f.return;b!==null;){var S=b.tag;if((S===3||S===4)&&(S=b.stateNode.containerInfo,S===p||S.nodeType===8&&S.parentNode===p))return;b=b.return}for(;g!==null;){if(b=of(g),b===null)return;if(S=b.tag,S===5||S===6){f=w=b;continue e}g=g.parentNode}}f=f.return}MF(function(){var F=w,R=Nb(l),y=[];e:{var v=a4.get(i);if(v!==void 0){var D=kb,m=i;switch(i){case"keypress":if(r0(l)===0)break e;case"keydown":case"keyup":D=Dq;break;case"focusin":m="focus",D=gT;break;case"focusout":m="blur",D=gT;break;case"beforeblur":case"afterblur":D=gT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=JD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=_q;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Lq;break;case n4:case r4:case i4:D=wq;break;case o4:D=Fq;break;case"scroll":D=yq;break;case"wheel":D=Bq;break;case"copy":case"cut":case"paste":D=Iq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=tP}var T=(o&4)!==0,U=!T&&i==="scroll",N=T?v!==null?v+"Capture":null:v;T=[];for(var _=F,I;_!==null;){I=_;var C=I.stateNode;if(I.tag===5&&C!==null&&(I=C,N!==null&&(C=Rg(_,N),C!=null&&T.push(Lg(_,C,I)))),U)break;_=_.return}0<T.length&&(v=new D(v,m,null,l,R),y.push({event:v,listeners:T}))}}if(!(o&7)){e:{if(v=i==="mouseover"||i==="pointerover",D=i==="mouseout"||i==="pointerout",v&&l!==SI&&(m=l.relatedTarget||l.fromElement)&&(of(m)||m[El]))break e;if((D||v)&&(v=R.window===R?R:(v=R.ownerDocument)?v.defaultView||v.parentWindow:window,D?(m=l.relatedTarget||l.toElement,D=F,m=m?of(m):null,m!==null&&(U=Tf(m),m!==U||m.tag!==5&&m.tag!==6)&&(m=null)):(D=null,m=F),D!==m)){if(T=JD,C="onMouseLeave",N="onMouseEnter",_="mouse",(i==="pointerout"||i==="pointerover")&&(T=tP,C="onPointerLeave",N="onPointerEnter",_="pointer"),U=D==null?v:Wd(D),I=m==null?v:Wd(m),v=new T(C,_+"leave",D,l,R),v.target=U,v.relatedTarget=I,C=null,of(R)===F&&(T=new T(N,_+"enter",m,l,R),T.target=I,T.relatedTarget=U,C=T),U=C,D&&m)t:{for(T=D,N=m,_=0,I=T;I;I=Bd(I))_++;for(I=0,C=N;C;C=Bd(C))I++;for(;0<_-I;)T=Bd(T),_--;for(;0<I-_;)N=Bd(N),I--;for(;_--;){if(T===N||N!==null&&T===N.alternate)break t;T=Bd(T),N=Bd(N)}T=null}else T=null;D!==null&&dP(y,v,D,T,!1),m!==null&&U!==null&&dP(y,U,m,T,!0)}}e:{if(v=F?Wd(F):window,D=v.nodeName&&v.nodeName.toLowerCase(),D==="select"||D==="input"&&v.type==="file")var j=Vq;else if(iP(v))if(XF)j=$q;else{j=Yq;var Y=zq}else(D=v.nodeName)&&D.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(j=Wq);if(j&&(j=j(i,F))){$F(y,j,l,R);break e}Y&&Y(i,v,F),i==="focusout"&&(Y=v._wrapperState)&&Y.controlled&&v.type==="number"&&vI(v,"number",v.value)}switch(Y=F?Wd(F):window,i){case"focusin":(iP(Y)||Y.contentEditable==="true")&&(zd=Y,xI=F,_g=null);break;case"focusout":_g=xI=zd=null;break;case"mousedown":NI=!0;break;case"contextmenu":case"mouseup":case"dragend":NI=!1,lP(y,l,R);break;case"selectionchange":if(Jq)break;case"keydown":case"keyup":lP(y,l,R)}var $;if(Ub)e:{switch(i){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else Vd?YF(i,l)&&(W="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(W="onCompositionStart");W&&(zF&&l.locale!=="ko"&&(Vd||W!=="onCompositionStart"?W==="onCompositionEnd"&&Vd&&($=VF()):(ec=R,Lb="value"in ec?ec.value:ec.textContent,Vd=!0)),Y=T0(F,W),0<Y.length&&(W=new eP(W,i,null,l,R),y.push({event:W,listeners:Y}),$?W.data=$:($=WF(l),$!==null&&(W.data=$)))),($=Zq?Gq(i,l):qq(i,l))&&(F=T0(F,"onBeforeInput"),0<F.length&&(R=new eP("onBeforeInput","beforeinput",null,l,R),y.push({event:R,listeners:F}),R.data=$))}s4(y,o)})}function Lg(i,o,l){return{instance:i,listener:o,currentTarget:l}}function T0(i,o){for(var l=o+"Capture",f=[];i!==null;){var p=i,w=p.stateNode;p.tag===5&&w!==null&&(p=w,w=Rg(i,l),w!=null&&f.unshift(Lg(i,w,p)),w=Rg(i,o),w!=null&&f.push(Lg(i,w,p))),i=i.return}return f}function Bd(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function dP(i,o,l,f,p){for(var w=o._reactName,b=[];l!==null&&l!==f;){var g=l,S=g.alternate,F=g.stateNode;if(S!==null&&S===f)break;g.tag===5&&F!==null&&(g=F,p?(S=Rg(l,w),S!=null&&b.unshift(Lg(l,S,g))):p||(S=Rg(l,w),S!=null&&b.push(Lg(l,S,g)))),l=l.return}b.length!==0&&i.push({event:o,listeners:b})}var rH=/\r\n?/g,iH=/\u0000|\uFFFD/g;function hP(i){return(typeof i=="string"?i:""+i).replace(rH,"\n").replace(iH,"")}function Uy(i,o,l){if(o=hP(o),hP(i)!==o&&l)throw Error(jn(425))}function S0(){}var MI=null,DI=null;function PI(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var OI=typeof setTimeout=="function"?setTimeout:void 0,oH=typeof clearTimeout=="function"?clearTimeout:void 0,pP=typeof Promise=="function"?Promise:void 0,aH=typeof queueMicrotask=="function"?queueMicrotask:typeof pP<"u"?function(i){return pP.resolve(null).then(i).catch(sH)}:OI;function sH(i){setTimeout(function(){throw i})}function wT(i,o){var l=o,f=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(f===0){i.removeChild(p),Mg(o);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=p}while(l);Mg(o)}function oc(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function gP(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var Sh=Math.random().toString(36).slice(2),Nu="__reactFiber$"+Sh,kg="__reactProps$"+Sh,El="__reactContainer$"+Sh,LI="__reactEvents$"+Sh,uH="__reactListeners$"+Sh,lH="__reactHandles$"+Sh;function of(i){var o=i[Nu];if(o)return o;for(var l=i.parentNode;l;){if(o=l[El]||l[Nu]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=gP(i);i!==null;){if(l=i[Nu])return l;i=gP(i)}return o}i=l,l=i.parentNode}return null}function Xg(i){return i=i[Nu]||i[El],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Wd(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(jn(33))}function $0(i){return i[kg]||null}var kI=[],$d=-1;function pc(i){return{current:i}}function Ni(i){0>$d||(i.current=kI[$d],kI[$d]=null,$d--)}function Ii(i,o){$d++,kI[$d]=i.current,i.current=o}var dc={},Jo=pc(dc),Ba=pc(!1),hf=dc;function dh(i,o){var l=i.type.contextTypes;if(!l)return dc;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var p={},w;for(w in l)p[w]=o[w];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function ja(i){return i=i.childContextTypes,i!=null}function w0(){Ni(Ba),Ni(Jo)}function mP(i,o,l){if(Jo.current!==dc)throw Error(jn(168));Ii(Jo,o),Ii(Ba,l)}function l4(i,o,l){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var p in f)if(!(p in o))throw Error(jn(108,z9(i)||"Unknown",p));return Vi({},l,f)}function A0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||dc,hf=Jo.current,Ii(Jo,i),Ii(Ba,Ba.current),!0}function vP(i,o,l){var f=i.stateNode;if(!f)throw Error(jn(169));l?(i=l4(i,o,hf),f.__reactInternalMemoizedMergedChildContext=i,Ni(Ba),Ni(Jo),Ii(Jo,i)):Ni(Ba),Ii(Ba,l)}var pl=null,X0=!1,AT=!1;function c4(i){pl===null?pl=[i]:pl.push(i)}function cH(i){X0=!0,c4(i)}function gc(){if(!AT&&pl!==null){AT=!0;var i=0,o=di;try{var l=pl;for(di=1;i<l.length;i++){var f=l[i];do f=f(!0);while(f!==null)}pl=null,X0=!1}catch(p){throw pl!==null&&(pl=pl.slice(i+1)),LF(Mb,gc),p}finally{di=o,AT=!1}}return null}var Xd=[],Qd=0,I0=null,b0=0,As=[],Is=0,pf=null,gl=1,ml="";function ef(i,o){Xd[Qd++]=b0,Xd[Qd++]=I0,I0=i,b0=o}function f4(i,o,l){As[Is++]=gl,As[Is++]=ml,As[Is++]=pf,pf=i;var f=gl;i=ml;var p=32-ou(f)-1;f&=~(1<<p),l+=1;var w=32-ou(o)+p;if(30<w){var b=p-p%5;w=(f&(1<<b)-1).toString(32),f>>=b,p-=b,gl=1<<32-ou(o)+p|l<<p|f,ml=w+i}else gl=1<<w|l<<p|f,ml=i}function jb(i){i.return!==null&&(ef(i,1),f4(i,1,0))}function Zb(i){for(;i===I0;)I0=Xd[--Qd],Xd[Qd]=null,b0=Xd[--Qd],Xd[Qd]=null;for(;i===pf;)pf=As[--Is],As[Is]=null,ml=As[--Is],As[Is]=null,gl=As[--Is],As[Is]=null}var fs=null,ls=null,Ui=!1,eu=null;function d4(i,o){var l=Cs(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function yP(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,fs=i,ls=oc(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,fs=i,ls=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=pf!==null?{id:gl,overflow:ml}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Cs(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,fs=i,ls=null,!0):!1;default:return!1}}function FI(i){return(i.mode&1)!==0&&(i.flags&128)===0}function UI(i){if(Ui){var o=ls;if(o){var l=o;if(!yP(i,o)){if(FI(i))throw Error(jn(418));o=oc(l.nextSibling);var f=fs;o&&yP(i,o)?d4(f,l):(i.flags=i.flags&-4097|2,Ui=!1,fs=i)}}else{if(FI(i))throw Error(jn(418));i.flags=i.flags&-4097|2,Ui=!1,fs=i}}}function EP(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;fs=i}function By(i){if(i!==fs)return!1;if(!Ui)return EP(i),Ui=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!PI(i.type,i.memoizedProps)),o&&(o=ls)){if(FI(i))throw h4(),Error(jn(418));for(;o;)d4(i,o),o=oc(o.nextSibling)}if(EP(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(jn(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){ls=oc(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}ls=null}}else ls=fs?oc(i.stateNode.nextSibling):null;return!0}function h4(){for(var i=ls;i;)i=oc(i.nextSibling)}function hh(){ls=fs=null,Ui=!1}function Gb(i){eu===null?eu=[i]:eu.push(i)}var fH=Sl.ReactCurrentBatchConfig;function tg(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var f=l.stateNode}if(!f)throw Error(jn(147,i));var p=f,w=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===w?o.ref:(o=function(b){var g=p.refs;b===null?delete g[w]:g[w]=b},o._stringRef=w,o)}if(typeof i!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,i))}return i}function jy(i,o){throw i=Object.prototype.toString.call(o),Error(jn(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function _P(i){var o=i._init;return o(i._payload)}function p4(i){function o(N,_){if(i){var I=N.deletions;I===null?(N.deletions=[_],N.flags|=16):I.push(_)}}function l(N,_){if(!i)return null;for(;_!==null;)o(N,_),_=_.sibling;return null}function f(N,_){for(N=new Map;_!==null;)_.key!==null?N.set(_.key,_):N.set(_.index,_),_=_.sibling;return N}function p(N,_){return N=lc(N,_),N.index=0,N.sibling=null,N}function w(N,_,I){return N.index=I,i?(I=N.alternate,I!==null?(I=I.index,I<_?(N.flags|=2,_):I):(N.flags|=2,_)):(N.flags|=1048576,_)}function b(N){return i&&N.alternate===null&&(N.flags|=2),N}function g(N,_,I,C){return _===null||_.tag!==6?(_=MT(I,N.mode,C),_.return=N,_):(_=p(_,I),_.return=N,_)}function S(N,_,I,C){var j=I.type;return j===Kd?R(N,_,I.props.children,C,I.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===$l&&_P(j)===_.type)?(C=p(_,I.props),C.ref=tg(N,_,I),C.return=N,C):(C=c0(I.type,I.key,I.props,null,N.mode,C),C.ref=tg(N,_,I),C.return=N,C)}function F(N,_,I,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=DT(I,N.mode,C),_.return=N,_):(_=p(_,I.children||[]),_.return=N,_)}function R(N,_,I,C,j){return _===null||_.tag!==7?(_=cf(I,N.mode,C,j),_.return=N,_):(_=p(_,I),_.return=N,_)}function y(N,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=MT(""+_,N.mode,I),_.return=N,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xy:return I=c0(_.type,_.key,_.props,null,N.mode,I),I.ref=tg(N,null,_),I.return=N,I;case Hd:return _=DT(_,N.mode,I),_.return=N,_;case $l:var C=_._init;return y(N,C(_._payload),I)}if(cg(_)||$p(_))return _=cf(_,N.mode,I,null),_.return=N,_;jy(N,_)}return null}function v(N,_,I,C){var j=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:g(N,_,""+I,C);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case xy:return I.key===j?S(N,_,I,C):null;case Hd:return I.key===j?F(N,_,I,C):null;case $l:return j=I._init,v(N,_,j(I._payload),C)}if(cg(I)||$p(I))return j!==null?null:R(N,_,I,C,null);jy(N,I)}return null}function D(N,_,I,C,j){if(typeof C=="string"&&C!==""||typeof C=="number")return N=N.get(I)||null,g(_,N,""+C,j);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case xy:return N=N.get(C.key===null?I:C.key)||null,S(_,N,C,j);case Hd:return N=N.get(C.key===null?I:C.key)||null,F(_,N,C,j);case $l:var Y=C._init;return D(N,_,I,Y(C._payload),j)}if(cg(C)||$p(C))return N=N.get(I)||null,R(_,N,C,j,null);jy(_,C)}return null}function m(N,_,I,C){for(var j=null,Y=null,$=_,W=_=0,ue=null;$!==null&&W<I.length;W++){$.index>W?(ue=$,$=null):ue=$.sibling;var x=v(N,$,I[W],C);if(x===null){$===null&&($=ue);break}i&&$&&x.alternate===null&&o(N,$),_=w(x,_,W),Y===null?j=x:Y.sibling=x,Y=x,$=ue}if(W===I.length)return l(N,$),Ui&&ef(N,W),j;if($===null){for(;W<I.length;W++)$=y(N,I[W],C),$!==null&&(_=w($,_,W),Y===null?j=$:Y.sibling=$,Y=$);return Ui&&ef(N,W),j}for($=f(N,$);W<I.length;W++)ue=D($,N,W,I[W],C),ue!==null&&(i&&ue.alternate!==null&&$.delete(ue.key===null?W:ue.key),_=w(ue,_,W),Y===null?j=ue:Y.sibling=ue,Y=ue);return i&&$.forEach(function(X){return o(N,X)}),Ui&&ef(N,W),j}function T(N,_,I,C){var j=$p(I);if(typeof j!="function")throw Error(jn(150));if(I=j.call(I),I==null)throw Error(jn(151));for(var Y=j=null,$=_,W=_=0,ue=null,x=I.next();$!==null&&!x.done;W++,x=I.next()){$.index>W?(ue=$,$=null):ue=$.sibling;var X=v(N,$,x.value,C);if(X===null){$===null&&($=ue);break}i&&$&&X.alternate===null&&o(N,$),_=w(X,_,W),Y===null?j=X:Y.sibling=X,Y=X,$=ue}if(x.done)return l(N,$),Ui&&ef(N,W),j;if($===null){for(;!x.done;W++,x=I.next())x=y(N,x.value,C),x!==null&&(_=w(x,_,W),Y===null?j=x:Y.sibling=x,Y=x);return Ui&&ef(N,W),j}for($=f(N,$);!x.done;W++,x=I.next())x=D($,N,W,x.value,C),x!==null&&(i&&x.alternate!==null&&$.delete(x.key===null?W:x.key),_=w(x,_,W),Y===null?j=x:Y.sibling=x,Y=x);return i&&$.forEach(function(de){return o(N,de)}),Ui&&ef(N,W),j}function U(N,_,I,C){if(typeof I=="object"&&I!==null&&I.type===Kd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case xy:e:{for(var j=I.key,Y=_;Y!==null;){if(Y.key===j){if(j=I.type,j===Kd){if(Y.tag===7){l(N,Y.sibling),_=p(Y,I.props.children),_.return=N,N=_;break e}}else if(Y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===$l&&_P(j)===Y.type){l(N,Y.sibling),_=p(Y,I.props),_.ref=tg(N,Y,I),_.return=N,N=_;break e}l(N,Y);break}else o(N,Y);Y=Y.sibling}I.type===Kd?(_=cf(I.props.children,N.mode,C,I.key),_.return=N,N=_):(C=c0(I.type,I.key,I.props,null,N.mode,C),C.ref=tg(N,_,I),C.return=N,N=C)}return b(N);case Hd:e:{for(Y=I.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(N,_.sibling),_=p(_,I.children||[]),_.return=N,N=_;break e}else{l(N,_);break}else o(N,_);_=_.sibling}_=DT(I,N.mode,C),_.return=N,N=_}return b(N);case $l:return Y=I._init,U(N,_,Y(I._payload),C)}if(cg(I))return m(N,_,I,C);if($p(I))return T(N,_,I,C);jy(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(N,_.sibling),_=p(_,I),_.return=N,N=_):(l(N,_),_=MT(I,N.mode,C),_.return=N,N=_),b(N)):l(N,_)}return U}var ph=p4(!0),g4=p4(!1),C0=pc(null),R0=null,Jd=null,qb=null;function Hb(){qb=Jd=R0=null}function Kb(i){var o=C0.current;Ni(C0),i._currentValue=o}function BI(i,o,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===l)break;i=i.return}}function lh(i,o){R0=i,qb=Jd=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ua=!0),i.firstContext=null)}function xs(i){var o=i._currentValue;if(qb!==i)if(i={context:i,memoizedValue:o,next:null},Jd===null){if(R0===null)throw Error(jn(308));Jd=i,R0.dependencies={lanes:0,firstContext:i}}else Jd=Jd.next=i;return o}var af=null;function Vb(i){af===null?af=[i]:af.push(i)}function m4(i,o,l,f){var p=o.interleaved;return p===null?(l.next=l,Vb(o)):(l.next=p.next,p.next=l),o.interleaved=l,_l(i,f)}function _l(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Xl=!1;function zb(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v4(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function vl(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ac(i,o,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,$r&2){var p=f.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),f.pending=o,_l(i,l)}return p=f.interleaved,p===null?(o.next=o,Vb(f)):(o.next=p.next,p.next=o),f.interleaved=o,_l(i,l)}function i0(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Db(i,l)}}function TP(i,o){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var p=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};w===null?p=w=b:w=w.next=b,l=l.next}while(l!==null);w===null?p=w=o:w=w.next=o}else p=w=o;l={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:w,shared:f.shared,effects:f.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function x0(i,o,l,f){var p=i.updateQueue;Xl=!1;var w=p.firstBaseUpdate,b=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var S=g,F=S.next;S.next=null,b===null?w=F:b.next=F,b=S;var R=i.alternate;R!==null&&(R=R.updateQueue,g=R.lastBaseUpdate,g!==b&&(g===null?R.firstBaseUpdate=F:g.next=F,R.lastBaseUpdate=S))}if(w!==null){var y=p.baseState;b=0,R=F=S=null,g=w;do{var v=g.lane,D=g.eventTime;if((f&v)===v){R!==null&&(R=R.next={eventTime:D,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=i,T=g;switch(v=o,D=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){y=m.call(D,y,v);break e}y=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,v=typeof m=="function"?m.call(D,y,v):m,v==null)break e;y=Vi({},y,v);break e;case 2:Xl=!0}}g.callback!==null&&g.lane!==0&&(i.flags|=64,v=p.effects,v===null?p.effects=[g]:v.push(g))}else D={eventTime:D,lane:v,tag:g.tag,payload:g.payload,callback:g.callback,next:null},R===null?(F=R=D,S=y):R=R.next=D,b|=v;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;v=g,g=v.next,v.next=null,p.lastBaseUpdate=v,p.shared.pending=null}}while(!0);if(R===null&&(S=y),p.baseState=S,p.firstBaseUpdate=F,p.lastBaseUpdate=R,o=p.shared.interleaved,o!==null){p=o;do b|=p.lane,p=p.next;while(p!==o)}else w===null&&(p.shared.lanes=0);mf|=b,i.lanes=b,i.memoizedState=y}}function SP(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],p=f.callback;if(p!==null){if(f.callback=null,f=l,typeof p!="function")throw Error(jn(191,p));p.call(f)}}}var Qg={},Du=pc(Qg),Fg=pc(Qg),Ug=pc(Qg);function sf(i){if(i===Qg)throw Error(jn(174));return i}function Yb(i,o){switch(Ii(Ug,o),Ii(Fg,i),Ii(Du,Qg),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:EI(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=EI(o,i)}Ni(Du),Ii(Du,o)}function gh(){Ni(Du),Ni(Fg),Ni(Ug)}function y4(i){sf(Ug.current);var o=sf(Du.current),l=EI(o,i.type);o!==l&&(Ii(Fg,i),Ii(Du,l))}function Wb(i){Fg.current===i&&(Ni(Du),Ni(Fg))}var qi=pc(0);function N0(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var IT=[];function $b(){for(var i=0;i<IT.length;i++)IT[i]._workInProgressVersionPrimary=null;IT.length=0}var o0=Sl.ReactCurrentDispatcher,bT=Sl.ReactCurrentBatchConfig,gf=0,Ki=null,To=null,No=null,M0=!1,Tg=!1,Bg=0,dH=0;function Wo(){throw Error(jn(321))}function Xb(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!su(i[l],o[l]))return!1;return!0}function Qb(i,o,l,f,p,w){if(gf=w,Ki=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,o0.current=i===null||i.memoizedState===null?mH:vH,i=l(f,p),Tg){w=0;do{if(Tg=!1,Bg=0,25<=w)throw Error(jn(301));w+=1,No=To=null,o.updateQueue=null,o0.current=yH,i=l(f,p)}while(Tg)}if(o0.current=D0,o=To!==null&&To.next!==null,gf=0,No=To=Ki=null,M0=!1,o)throw Error(jn(300));return i}function Jb(){var i=Bg!==0;return Bg=0,i}function xu(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return No===null?Ki.memoizedState=No=i:No=No.next=i,No}function Ns(){if(To===null){var i=Ki.alternate;i=i!==null?i.memoizedState:null}else i=To.next;var o=No===null?Ki.memoizedState:No.next;if(o!==null)No=o,To=i;else{if(i===null)throw Error(jn(310));To=i,i={memoizedState:To.memoizedState,baseState:To.baseState,baseQueue:To.baseQueue,queue:To.queue,next:null},No===null?Ki.memoizedState=No=i:No=No.next=i}return No}function jg(i,o){return typeof o=="function"?o(i):o}function CT(i){var o=Ns(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=i;var f=To,p=f.baseQueue,w=l.pending;if(w!==null){if(p!==null){var b=p.next;p.next=w.next,w.next=b}f.baseQueue=p=w,l.pending=null}if(p!==null){w=p.next,f=f.baseState;var g=b=null,S=null,F=w;do{var R=F.lane;if((gf&R)===R)S!==null&&(S=S.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),f=F.hasEagerState?F.eagerState:i(f,F.action);else{var y={lane:R,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};S===null?(g=S=y,b=f):S=S.next=y,Ki.lanes|=R,mf|=R}F=F.next}while(F!==null&&F!==w);S===null?b=f:S.next=g,su(f,o.memoizedState)||(Ua=!0),o.memoizedState=f,o.baseState=b,o.baseQueue=S,l.lastRenderedState=f}if(i=l.interleaved,i!==null){p=i;do w=p.lane,Ki.lanes|=w,mf|=w,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function RT(i){var o=Ns(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=i;var f=l.dispatch,p=l.pending,w=o.memoizedState;if(p!==null){l.pending=null;var b=p=p.next;do w=i(w,b.action),b=b.next;while(b!==p);su(w,o.memoizedState)||(Ua=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),l.lastRenderedState=w}return[w,f]}function E4(){}function _4(i,o){var l=Ki,f=Ns(),p=o(),w=!su(f.memoizedState,p);if(w&&(f.memoizedState=p,Ua=!0),f=f.queue,eC(w4.bind(null,l,f,i),[i]),f.getSnapshot!==o||w||No!==null&&No.memoizedState.tag&1){if(l.flags|=2048,Zg(9,S4.bind(null,l,f,p,o),void 0,null),Mo===null)throw Error(jn(349));gf&30||T4(l,o,p)}return p}function T4(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function S4(i,o,l,f){o.value=l,o.getSnapshot=f,A4(o)&&I4(i)}function w4(i,o,l){return l(function(){A4(o)&&I4(i)})}function A4(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!su(i,l)}catch(f){return!0}}function I4(i){var o=_l(i,1);o!==null&&au(o,i,1,-1)}function wP(i){var o=xu();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:i},o.queue=i,i=i.dispatch=gH.bind(null,Ki,i),[o.memoizedState,i]}function Zg(i,o,l,f){return i={tag:i,create:o,destroy:l,deps:f,next:null},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,o.lastEffect=i)),i}function b4(){return Ns().memoizedState}function a0(i,o,l,f){var p=xu();Ki.flags|=i,p.memoizedState=Zg(1|o,l,void 0,f===void 0?null:f)}function Q0(i,o,l,f){var p=Ns();f=f===void 0?null:f;var w=void 0;if(To!==null){var b=To.memoizedState;if(w=b.destroy,f!==null&&Xb(f,b.deps)){p.memoizedState=Zg(o,l,w,f);return}}Ki.flags|=i,p.memoizedState=Zg(1|o,l,w,f)}function AP(i,o){return a0(8390656,8,i,o)}function eC(i,o){return Q0(2048,8,i,o)}function C4(i,o){return Q0(4,2,i,o)}function R4(i,o){return Q0(4,4,i,o)}function x4(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function N4(i,o,l){return l=l!=null?l.concat([i]):null,Q0(4,4,x4.bind(null,o,i),l)}function tC(){}function M4(i,o){var l=Ns();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Xb(o,f[1])?f[0]:(l.memoizedState=[i,o],i)}function D4(i,o){var l=Ns();o=o===void 0?null:o;var f=l.memoizedState;return f!==null&&o!==null&&Xb(o,f[1])?f[0]:(i=i(),l.memoizedState=[i,o],i)}function P4(i,o,l){return gf&21?(su(l,o)||(l=UF(),Ki.lanes|=l,mf|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ua=!0),i.memoizedState=l)}function hH(i,o){var l=di;di=l!==0&&4>l?l:4,i(!0);var f=bT.transition;bT.transition={};try{i(!1),o()}finally{di=l,bT.transition=f}}function O4(){return Ns().memoizedState}function pH(i,o,l){var f=uc(i);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},L4(i))k4(o,l);else if(l=m4(i,o,l,f),l!==null){var p=Ta();au(l,i,f,p),F4(l,o,f)}}function gH(i,o,l){var f=uc(i),p={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(L4(i))k4(o,p);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var b=o.lastRenderedState,g=w(b,l);if(p.hasEagerState=!0,p.eagerState=g,su(g,b)){var S=o.interleaved;S===null?(p.next=p,Vb(o)):(p.next=S.next,S.next=p),o.interleaved=p;return}}catch(F){}finally{}l=m4(i,o,p,f),l!==null&&(p=Ta(),au(l,i,f,p),F4(l,o,f))}}function L4(i){var o=i.alternate;return i===Ki||o!==null&&o===Ki}function k4(i,o){Tg=M0=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function F4(i,o,l){if(l&4194240){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,Db(i,l)}}var D0={readContext:xs,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},mH={readContext:xs,useCallback:function(i,o){return xu().memoizedState=[i,o===void 0?null:o],i},useContext:xs,useEffect:AP,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,a0(4194308,4,x4.bind(null,o,i),l)},useLayoutEffect:function(i,o){return a0(4194308,4,i,o)},useInsertionEffect:function(i,o){return a0(4,2,i,o)},useMemo:function(i,o){var l=xu();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var f=xu();return o=l!==void 0?l(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=pH.bind(null,Ki,i),[f.memoizedState,i]},useRef:function(i){var o=xu();return i={current:i},o.memoizedState=i},useState:wP,useDebugValue:tC,useDeferredValue:function(i){return xu().memoizedState=i},useTransition:function(){var i=wP(!1),o=i[0];return i=hH.bind(null,i[1]),xu().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var f=Ki,p=xu();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=o(),Mo===null)throw Error(jn(349));gf&30||T4(f,o,l)}p.memoizedState=l;var w={value:l,getSnapshot:o};return p.queue=w,AP(w4.bind(null,f,w,i),[i]),f.flags|=2048,Zg(9,S4.bind(null,f,w,l,o),void 0,null),l},useId:function(){var i=xu(),o=Mo.identifierPrefix;if(Ui){var l=ml,f=gl;l=(f&~(1<<32-ou(f)-1)).toString(32)+l,o=":"+o+"R"+l,l=Bg++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=dH++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},vH={readContext:xs,useCallback:M4,useContext:xs,useEffect:eC,useImperativeHandle:N4,useInsertionEffect:C4,useLayoutEffect:R4,useMemo:D4,useReducer:CT,useRef:b4,useState:function(){return CT(jg)},useDebugValue:tC,useDeferredValue:function(i){var o=Ns();return P4(o,To.memoizedState,i)},useTransition:function(){var i=CT(jg)[0],o=Ns().memoizedState;return[i,o]},useMutableSource:E4,useSyncExternalStore:_4,useId:O4,unstable_isNewReconciler:!1},yH={readContext:xs,useCallback:M4,useContext:xs,useEffect:eC,useImperativeHandle:N4,useInsertionEffect:C4,useLayoutEffect:R4,useMemo:D4,useReducer:RT,useRef:b4,useState:function(){return RT(jg)},useDebugValue:tC,useDeferredValue:function(i){var o=Ns();return To===null?o.memoizedState=i:P4(o,To.memoizedState,i)},useTransition:function(){var i=RT(jg)[0],o=Ns().memoizedState;return[i,o]},useMutableSource:E4,useSyncExternalStore:_4,useId:O4,unstable_isNewReconciler:!1};function Qs(i,o){if(i&&i.defaultProps){o=Vi({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function jI(i,o,l,f){o=i.memoizedState,l=l(f,o),l=l==null?o:Vi({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var J0={isMounted:function(i){return(i=i._reactInternals)?Tf(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var f=Ta(),p=uc(i),w=vl(f,p);w.payload=o,l!=null&&(w.callback=l),o=ac(i,w,p),o!==null&&(au(o,i,p,f),i0(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var f=Ta(),p=uc(i),w=vl(f,p);w.tag=1,w.payload=o,l!=null&&(w.callback=l),o=ac(i,w,p),o!==null&&(au(o,i,p,f),i0(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Ta(),f=uc(i),p=vl(l,f);p.tag=2,o!=null&&(p.callback=o),o=ac(i,p,f),o!==null&&(au(o,i,f,l),i0(o,i,f))}};function IP(i,o,l,f,p,w,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,w,b):o.prototype&&o.prototype.isPureReactComponent?!Pg(l,f)||!Pg(p,w):!0}function U4(i,o,l){var f=!1,p=dc,w=o.contextType;return typeof w=="object"&&w!==null?w=xs(w):(p=ja(o)?hf:Jo.current,f=o.contextTypes,w=(f=f!=null)?dh(i,p):dc),o=new o(l,w),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=J0,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=w),o}function bP(i,o,l,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==i&&J0.enqueueReplaceState(o,o.state,null)}function ZI(i,o,l,f){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},zb(i);var w=o.contextType;typeof w=="object"&&w!==null?p.context=xs(w):(w=ja(o)?hf:Jo.current,p.context=dh(i,w)),p.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(jI(i,o,w,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&J0.enqueueReplaceState(p,p.state,null),x0(i,l,p,f),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function mh(i,o){try{var l="",f=o;do l+=V9(f),f=f.return;while(f);var p=l}catch(w){p="\nError generating stack: "+w.message+"\n"+w.stack}return{value:i,source:o,stack:p,digest:null}}function xT(i,o,l){return{value:i,source:null,stack:l!=null?l:null,digest:o!=null?o:null}}function GI(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var EH=typeof WeakMap=="function"?WeakMap:Map;function B4(i,o,l){l=vl(-1,l),l.tag=3,l.payload={element:null};var f=o.value;return l.callback=function(){O0||(O0=!0,QI=f),GI(i,o)},l}function j4(i,o,l){l=vl(-1,l),l.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var p=o.value;l.payload=function(){return f(p)},l.callback=function(){GI(i,o)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(l.callback=function(){GI(i,o),typeof f!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),l}function CP(i,o,l){var f=i.pingCache;if(f===null){f=i.pingCache=new EH;var p=new Set;f.set(o,p)}else p=f.get(o),p===void 0&&(p=new Set,f.set(o,p));p.has(l)||(p.add(l),i=PH.bind(null,i,o,l),o.then(i,i))}function RP(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function xP(i,o,l,f,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=vl(-1,1),o.tag=2,ac(l,o,1))),l.lanes|=1),i)}var _H=Sl.ReactCurrentOwner,Ua=!1;function Ea(i,o,l,f){o.child=i===null?g4(o,null,l,f):ph(o,i.child,l,f)}function NP(i,o,l,f,p){l=l.render;var w=o.ref;return lh(o,p),f=Qb(i,o,l,f,w,p),l=Jb(),i!==null&&!Ua?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Tl(i,o,p)):(Ui&&l&&jb(o),o.flags|=1,Ea(i,o,f,p),o.child)}function MP(i,o,l,f,p){if(i===null){var w=l.type;return typeof w=="function"&&!lC(w)&&w.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=w,Z4(i,o,w,f,p)):(i=c0(l.type,null,f,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,!(i.lanes&p)){var b=w.memoizedProps;if(l=l.compare,l=l!==null?l:Pg,l(b,f)&&i.ref===o.ref)return Tl(i,o,p)}return o.flags|=1,i=lc(w,f),i.ref=o.ref,i.return=o,o.child=i}function Z4(i,o,l,f,p){if(i!==null){var w=i.memoizedProps;if(Pg(w,f)&&i.ref===o.ref)if(Ua=!1,o.pendingProps=f=w,(i.lanes&p)!==0)i.flags&131072&&(Ua=!0);else return o.lanes=i.lanes,Tl(i,o,p)}return qI(i,o,l,f,p)}function G4(i,o,l){var f=o.pendingProps,p=f.children,w=i!==null?i.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(th,us),us|=l;else{if(!(l&1073741824))return i=w!==null?w.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ii(th,us),us|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:l,Ii(th,us),us|=f}else w!==null?(f=w.baseLanes|l,o.memoizedState=null):f=l,Ii(th,us),us|=f;return Ea(i,o,p,l),o.child}function q4(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function qI(i,o,l,f,p){var w=ja(l)?hf:Jo.current;return w=dh(o,w),lh(o,p),l=Qb(i,o,l,f,w,p),f=Jb(),i!==null&&!Ua?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Tl(i,o,p)):(Ui&&f&&jb(o),o.flags|=1,Ea(i,o,l,p),o.child)}function DP(i,o,l,f,p){if(ja(l)){var w=!0;A0(o)}else w=!1;if(lh(o,p),o.stateNode===null)s0(i,o),U4(o,l,f),ZI(o,l,f,p),f=!0;else if(i===null){var b=o.stateNode,g=o.memoizedProps;b.props=g;var S=b.context,F=l.contextType;typeof F=="object"&&F!==null?F=xs(F):(F=ja(l)?hf:Jo.current,F=dh(o,F));var R=l.getDerivedStateFromProps,y=typeof R=="function"||typeof b.getSnapshotBeforeUpdate=="function";y||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==f||S!==F)&&bP(o,b,f,F),Xl=!1;var v=o.memoizedState;b.state=v,x0(o,f,b,p),S=o.memoizedState,g!==f||v!==S||Ba.current||Xl?(typeof R=="function"&&(jI(o,l,R,f),S=o.memoizedState),(g=Xl||IP(o,l,g,f,v,S,F))?(y||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=S),b.props=f,b.state=S,b.context=F,f=g):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,v4(i,o),g=o.memoizedProps,F=o.type===o.elementType?g:Qs(o.type,g),b.props=F,y=o.pendingProps,v=b.context,S=l.contextType,typeof S=="object"&&S!==null?S=xs(S):(S=ja(l)?hf:Jo.current,S=dh(o,S));var D=l.getDerivedStateFromProps;(R=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(g!==y||v!==S)&&bP(o,b,f,S),Xl=!1,v=o.memoizedState,b.state=v,x0(o,f,b,p);var m=o.memoizedState;g!==y||v!==m||Ba.current||Xl?(typeof D=="function"&&(jI(o,l,D,f),m=o.memoizedState),(F=Xl||IP(o,l,F,f,v,m,S)||!1)?(R||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,m,S),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,m,S)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=m),b.props=f,b.state=m,b.context=S,f=F):(typeof b.componentDidUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=1024),f=!1)}return HI(i,o,l,f,w,p)}function HI(i,o,l,f,p,w){q4(i,o);var b=(o.flags&128)!==0;if(!f&&!b)return p&&vP(o,l,!1),Tl(i,o,w);f=o.stateNode,_H.current=o;var g=b&&typeof l.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&b?(o.child=ph(o,i.child,null,w),o.child=ph(o,null,g,w)):Ea(i,o,g,w),o.memoizedState=f.state,p&&vP(o,l,!0),o.child}function H4(i){var o=i.stateNode;o.pendingContext?mP(i,o.pendingContext,o.pendingContext!==o.context):o.context&&mP(i,o.context,!1),Yb(i,o.containerInfo)}function PP(i,o,l,f,p){return hh(),Gb(p),o.flags|=256,Ea(i,o,l,f),o.child}var KI={dehydrated:null,treeContext:null,retryLane:0};function VI(i){return{baseLanes:i,cachePool:null,transitions:null}}function K4(i,o,l){var f=o.pendingProps,p=qi.current,w=!1,b=(o.flags&128)!==0,g;if((g=b)||(g=i!==null&&i.memoizedState===null?!1:(p&2)!==0),g?(w=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Ii(qi,p&1),i===null)return UI(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=f.children,i=f.fallback,w?(f=o.mode,w=o.child,b={mode:"hidden",children:b},!(f&1)&&w!==null?(w.childLanes=0,w.pendingProps=b):w=nE(b,f,0,null),i=cf(i,f,l,null),w.return=o,i.return=o,w.sibling=i,o.child=w,o.child.memoizedState=VI(l),o.memoizedState=KI,i):nC(o,b));if(p=i.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return TH(i,o,b,f,g,p,l);if(w){w=f.fallback,b=o.mode,p=i.child,g=p.sibling;var S={mode:"hidden",children:f.children};return!(b&1)&&o.child!==p?(f=o.child,f.childLanes=0,f.pendingProps=S,o.deletions=null):(f=lc(p,S),f.subtreeFlags=p.subtreeFlags&14680064),g!==null?w=lc(g,w):(w=cf(w,b,l,null),w.flags|=2),w.return=o,f.return=o,f.sibling=w,o.child=f,f=w,w=o.child,b=i.child.memoizedState,b=b===null?VI(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},w.memoizedState=b,w.childLanes=i.childLanes&~l,o.memoizedState=KI,f}return w=i.child,i=w.sibling,f=lc(w,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=l),f.return=o,f.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=f,o.memoizedState=null,f}function nC(i,o){return o=nE({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Zy(i,o,l,f){return f!==null&&Gb(f),ph(o,i.child,null,l),i=nC(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function TH(i,o,l,f,p,w,b){if(l)return o.flags&256?(o.flags&=-257,f=xT(Error(jn(422))),Zy(i,o,b,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(w=f.fallback,p=o.mode,f=nE({mode:"visible",children:f.children},p,0,null),w=cf(w,p,b,null),w.flags|=2,f.return=o,w.return=o,f.sibling=w,o.child=f,o.mode&1&&ph(o,i.child,null,b),o.child.memoizedState=VI(b),o.memoizedState=KI,w);if(!(o.mode&1))return Zy(i,o,b,null);if(p.data==="$!"){if(f=p.nextSibling&&p.nextSibling.dataset,f)var g=f.dgst;return f=g,w=Error(jn(419)),f=xT(w,f,void 0),Zy(i,o,b,f)}if(g=(b&i.childLanes)!==0,Ua||g){if(f=Mo,f!==null){switch(b&-b){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(f.suspendedLanes|b)?0:p,p!==0&&p!==w.retryLane&&(w.retryLane=p,_l(i,p),au(f,i,p,-1))}return uC(),f=xT(Error(jn(421))),Zy(i,o,b,f)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=OH.bind(null,i),p._reactRetry=o,null):(i=w.treeContext,ls=oc(p.nextSibling),fs=o,Ui=!0,eu=null,i!==null&&(As[Is++]=gl,As[Is++]=ml,As[Is++]=pf,gl=i.id,ml=i.overflow,pf=o),o=nC(o,f.children),o.flags|=4096,o)}function OP(i,o,l){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),BI(i.return,o,l)}function NT(i,o,l,f,p){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:p}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=l,w.tailMode=p)}function V4(i,o,l){var f=o.pendingProps,p=f.revealOrder,w=f.tail;if(Ea(i,o,f.children,l),f=qi.current,f&2)f=f&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&OP(i,l,o);else if(i.tag===19)OP(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Ii(qi,f),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&N0(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),NT(o,!1,p,l,w);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&N0(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}NT(o,!0,l,null,w);break;case"together":NT(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function s0(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Tl(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),mf|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(jn(153));if(o.child!==null){for(i=o.child,l=lc(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=lc(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function SH(i,o,l){switch(o.tag){case 3:H4(o),hh();break;case 5:y4(o);break;case 1:ja(o.type)&&A0(o);break;case 4:Yb(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,p=o.memoizedProps.value;Ii(C0,f._currentValue),f._currentValue=p;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ii(qi,qi.current&1),o.flags|=128,null):l&o.child.childLanes?K4(i,o,l):(Ii(qi,qi.current&1),i=Tl(i,o,l),i!==null?i.sibling:null);Ii(qi,qi.current&1);break;case 19:if(f=(l&o.childLanes)!==0,i.flags&128){if(f)return V4(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ii(qi,qi.current),f)break;return null;case 22:case 23:return o.lanes=0,G4(i,o,l)}return Tl(i,o,l)}var z4,zI,Y4,W4;z4=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};zI=function(){};Y4=function(i,o,l,f){var p=i.memoizedProps;if(p!==f){i=o.stateNode,sf(Du.current);var w=null;switch(l){case"input":p=gI(i,p),f=gI(i,f),w=[];break;case"select":p=Vi({},p,{value:void 0}),f=Vi({},f,{value:void 0}),w=[];break;case"textarea":p=yI(i,p),f=yI(i,f),w=[];break;default:typeof p.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=S0)}_I(l,f);var b;l=null;for(F in p)if(!f.hasOwnProperty(F)&&p.hasOwnProperty(F)&&p[F]!=null)if(F==="style"){var g=p[F];for(b in g)g.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(bg.hasOwnProperty(F)?w||(w=[]):(w=w||[]).push(F,null));for(F in f){var S=f[F];if(g=p!=null?p[F]:void 0,f.hasOwnProperty(F)&&S!==g&&(S!=null||g!=null))if(F==="style")if(g){for(b in g)!g.hasOwnProperty(b)||S&&S.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in S)S.hasOwnProperty(b)&&g[b]!==S[b]&&(l||(l={}),l[b]=S[b])}else l||(w||(w=[]),w.push(F,l)),l=S;else F==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,g=g?g.__html:void 0,S!=null&&g!==S&&(w=w||[]).push(F,S)):F==="children"?typeof S!="string"&&typeof S!="number"||(w=w||[]).push(F,""+S):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(bg.hasOwnProperty(F)?(S!=null&&F==="onScroll"&&xi("scroll",i),w||g===S||(w=[])):(w=w||[]).push(F,S))}l&&(w=w||[]).push("style",l);var F=w;(o.updateQueue=F)&&(o.flags|=4)}};W4=function(i,o,l,f){l!==f&&(o.flags|=4)};function ng(i,o){if(!Ui)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function $o(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags&14680064,f|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=f,i.childLanes=l,o}function wH(i,o,l){var f=o.pendingProps;switch(Zb(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(o),null;case 1:return ja(o.type)&&w0(),$o(o),null;case 3:return f=o.stateNode,gh(),Ni(Ba),Ni(Jo),$b(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(By(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,eu!==null&&(tb(eu),eu=null))),zI(i,o),$o(o),null;case 5:Wb(o);var p=sf(Ug.current);if(l=o.type,i!==null&&o.stateNode!=null)Y4(i,o,l,f,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(jn(166));return $o(o),null}if(i=sf(Du.current),By(o)){f=o.stateNode,l=o.type;var w=o.memoizedProps;switch(f[Nu]=o,f[kg]=w,i=(o.mode&1)!==0,l){case"dialog":xi("cancel",f),xi("close",f);break;case"iframe":case"object":case"embed":xi("load",f);break;case"video":case"audio":for(p=0;p<dg.length;p++)xi(dg[p],f);break;case"source":xi("error",f);break;case"img":case"image":case"link":xi("error",f),xi("load",f);break;case"details":xi("toggle",f);break;case"input":qD(f,w),xi("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},xi("invalid",f);break;case"textarea":KD(f,w),xi("invalid",f)}_I(l,w),p=null;for(var b in w)if(w.hasOwnProperty(b)){var g=w[b];b==="children"?typeof g=="string"?f.textContent!==g&&(w.suppressHydrationWarning!==!0&&Uy(f.textContent,g,i),p=["children",g]):typeof g=="number"&&f.textContent!==""+g&&(w.suppressHydrationWarning!==!0&&Uy(f.textContent,g,i),p=["children",""+g]):bg.hasOwnProperty(b)&&g!=null&&b==="onScroll"&&xi("scroll",f)}switch(l){case"input":Ny(f),HD(f,w,!0);break;case"textarea":Ny(f),VD(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=S0)}f=p,o.updateQueue=f,f!==null&&(o.flags|=4)}else{b=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=wF(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=b.createElement(l,{is:f.is}):(i=b.createElement(l),l==="select"&&(b=i,f.multiple?b.multiple=!0:f.size&&(b.size=f.size))):i=b.createElementNS(i,l),i[Nu]=o,i[kg]=f,z4(i,o,!1,!1),o.stateNode=i;e:{switch(b=TI(l,f),l){case"dialog":xi("cancel",i),xi("close",i),p=f;break;case"iframe":case"object":case"embed":xi("load",i),p=f;break;case"video":case"audio":for(p=0;p<dg.length;p++)xi(dg[p],i);p=f;break;case"source":xi("error",i),p=f;break;case"img":case"image":case"link":xi("error",i),xi("load",i),p=f;break;case"details":xi("toggle",i),p=f;break;case"input":qD(i,f),p=gI(i,f),xi("invalid",i);break;case"option":p=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},p=Vi({},f,{value:void 0}),xi("invalid",i);break;case"textarea":KD(i,f),p=yI(i,f),xi("invalid",i);break;default:p=f}_I(l,p),g=p;for(w in g)if(g.hasOwnProperty(w)){var S=g[w];w==="style"?bF(i,S):w==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&AF(i,S)):w==="children"?typeof S=="string"?(l!=="textarea"||S!=="")&&Cg(i,S):typeof S=="number"&&Cg(i,""+S):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(bg.hasOwnProperty(w)?S!=null&&w==="onScroll"&&xi("scroll",i):S!=null&&bb(i,w,S,b))}switch(l){case"input":Ny(i),HD(i,f,!1);break;case"textarea":Ny(i),VD(i);break;case"option":f.value!=null&&i.setAttribute("value",""+fc(f.value));break;case"select":i.multiple=!!f.multiple,w=f.value,w!=null?oh(i,!!f.multiple,w,!1):f.defaultValue!=null&&oh(i,!!f.multiple,f.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=S0)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return $o(o),null;case 6:if(i&&o.stateNode!=null)W4(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(jn(166));if(l=sf(Ug.current),sf(Du.current),By(o)){if(f=o.stateNode,l=o.memoizedProps,f[Nu]=o,(w=f.nodeValue!==l)&&(i=fs,i!==null))switch(i.tag){case 3:Uy(f.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Uy(f.nodeValue,l,(i.mode&1)!==0)}w&&(o.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Nu]=o,o.stateNode=f}return $o(o),null;case 13:if(Ni(qi),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ui&&ls!==null&&o.mode&1&&!(o.flags&128))h4(),hh(),o.flags|=98560,w=!1;else if(w=By(o),f!==null&&f.dehydrated!==null){if(i===null){if(!w)throw Error(jn(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(jn(317));w[Nu]=o}else hh(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;$o(o),w=!1}else eu!==null&&(tb(eu),eu=null),w=!0;if(!w)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(i===null||qi.current&1?So===0&&(So=3):uC())),o.updateQueue!==null&&(o.flags|=4),$o(o),null);case 4:return gh(),zI(i,o),i===null&&Og(o.stateNode.containerInfo),$o(o),null;case 10:return Kb(o.type._context),$o(o),null;case 17:return ja(o.type)&&w0(),$o(o),null;case 19:if(Ni(qi),w=o.memoizedState,w===null)return $o(o),null;if(f=(o.flags&128)!==0,b=w.rendering,b===null)if(f)ng(w,!1);else{if(So!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(b=N0(i),b!==null){for(o.flags|=128,ng(w,!1),f=b.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=l,l=o.child;l!==null;)w=l,i=f,w.flags&=14680066,b=w.alternate,b===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=b.childLanes,w.lanes=b.lanes,w.child=b.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=b.memoizedProps,w.memoizedState=b.memoizedState,w.updateQueue=b.updateQueue,w.type=b.type,i=b.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Ii(qi,qi.current&1|2),o.child}i=i.sibling}w.tail!==null&&lo()>vh&&(o.flags|=128,f=!0,ng(w,!1),o.lanes=4194304)}else{if(!f)if(i=N0(b),i!==null){if(o.flags|=128,f=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),ng(w,!0),w.tail===null&&w.tailMode==="hidden"&&!b.alternate&&!Ui)return $o(o),null}else 2*lo()-w.renderingStartTime>vh&&l!==1073741824&&(o.flags|=128,f=!0,ng(w,!1),o.lanes=4194304);w.isBackwards?(b.sibling=o.child,o.child=b):(l=w.last,l!==null?l.sibling=b:o.child=b,w.last=b)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=lo(),o.sibling=null,l=qi.current,Ii(qi,f?l&1|2:l&1),o):($o(o),null);case 22:case 23:return sC(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?us&1073741824&&($o(o),o.subtreeFlags&6&&(o.flags|=8192)):$o(o),null;case 24:return null;case 25:return null}throw Error(jn(156,o.tag))}function AH(i,o){switch(Zb(o),o.tag){case 1:return ja(o.type)&&w0(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return gh(),Ni(Ba),Ni(Jo),$b(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Wb(o),null;case 13:if(Ni(qi),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(jn(340));hh()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ni(qi),null;case 4:return gh(),null;case 10:return Kb(o.type._context),null;case 22:case 23:return sC(),null;case 24:return null;default:return null}}var Gy=!1,Xo=!1,IH=typeof WeakSet=="function"?WeakSet:Set,nr=null;function eh(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){Qi(i,o,f)}else l.current=null}function YI(i,o,l){try{l()}catch(f){Qi(i,o,f)}}var LP=!1;function bH(i,o){if(MI=E0,i=e4(),Bb(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var p=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{l.nodeType,w.nodeType}catch(C){l=null;break e}var b=0,g=-1,S=-1,F=0,R=0,y=i,v=null;t:for(;;){for(var D;y!==l||p!==0&&y.nodeType!==3||(g=b+p),y!==w||f!==0&&y.nodeType!==3||(S=b+f),y.nodeType===3&&(b+=y.nodeValue.length),(D=y.firstChild)!==null;)v=y,y=D;for(;;){if(y===i)break t;if(v===l&&++F===p&&(g=b),v===w&&++R===f&&(S=b),(D=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=D}l=g===-1||S===-1?null:{start:g,end:S}}else l=null}l=l||{start:0,end:0}}else l=null;for(DI={focusedElem:i,selectionRange:l},E0=!1,nr=o;nr!==null;)if(o=nr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,nr=i;else for(;nr!==null;){o=nr;try{var m=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,U=m.memoizedState,N=o.stateNode,_=N.getSnapshotBeforeUpdate(o.elementType===o.type?T:Qs(o.type,T),U);N.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=o.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(C){Qi(o,o.return,C)}if(i=o.sibling,i!==null){i.return=o.return,nr=i;break}nr=o.return}return m=LP,LP=!1,m}function Sg(i,o,l){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var p=f=f.next;do{if((p.tag&i)===i){var w=p.destroy;p.destroy=void 0,w!==void 0&&YI(o,l,w)}p=p.next}while(p!==f)}}function eE(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var f=l.create;l.destroy=f()}l=l.next}while(l!==o)}}function WI(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function $4(i){var o=i.alternate;o!==null&&(i.alternate=null,$4(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Nu],delete o[kg],delete o[LI],delete o[uH],delete o[lH])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function X4(i){return i.tag===5||i.tag===3||i.tag===4}function kP(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||X4(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $I(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=S0));else if(f!==4&&(i=i.child,i!==null))for($I(i,o,l),i=i.sibling;i!==null;)$I(i,o,l),i=i.sibling}function XI(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(XI(i,o,l),i=i.sibling;i!==null;)XI(i,o,l),i=i.sibling}var Bo=null,Js=!1;function Wl(i,o,l){for(l=l.child;l!==null;)Q4(i,o,l),l=l.sibling}function Q4(i,o,l){if(Mu&&typeof Mu.onCommitFiberUnmount=="function")try{Mu.onCommitFiberUnmount(V0,l)}catch(g){}switch(l.tag){case 5:Xo||eh(l,o);case 6:var f=Bo,p=Js;Bo=null,Wl(i,o,l),Bo=f,Js=p,Bo!==null&&(Js?(i=Bo,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Bo.removeChild(l.stateNode));break;case 18:Bo!==null&&(Js?(i=Bo,l=l.stateNode,i.nodeType===8?wT(i.parentNode,l):i.nodeType===1&&wT(i,l),Mg(i)):wT(Bo,l.stateNode));break;case 4:f=Bo,p=Js,Bo=l.stateNode.containerInfo,Js=!0,Wl(i,o,l),Bo=f,Js=p;break;case 0:case 11:case 14:case 15:if(!Xo&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){p=f=f.next;do{var w=p,b=w.destroy;w=w.tag,b!==void 0&&(w&2||w&4)&&YI(l,o,b),p=p.next}while(p!==f)}Wl(i,o,l);break;case 1:if(!Xo&&(eh(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(g){Qi(l,o,g)}Wl(i,o,l);break;case 21:Wl(i,o,l);break;case 22:l.mode&1?(Xo=(f=Xo)||l.memoizedState!==null,Wl(i,o,l),Xo=f):Wl(i,o,l);break;default:Wl(i,o,l)}}function FP(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new IH),o.forEach(function(f){var p=LH.bind(null,i,f);l.has(f)||(l.add(f),f.then(p,p))})}}function $s(i,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];try{var w=i,b=o,g=b;e:for(;g!==null;){switch(g.tag){case 5:Bo=g.stateNode,Js=!1;break e;case 3:Bo=g.stateNode.containerInfo,Js=!0;break e;case 4:Bo=g.stateNode.containerInfo,Js=!0;break e}g=g.return}if(Bo===null)throw Error(jn(160));Q4(w,b,p),Bo=null,Js=!1;var S=p.alternate;S!==null&&(S.return=null),p.return=null}catch(F){Qi(p,o,F)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)J4(o,i),o=o.sibling}function J4(i,o){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if($s(o,i),Iu(i),f&4){try{Sg(3,i,i.return),eE(3,i)}catch(T){Qi(i,i.return,T)}try{Sg(5,i,i.return)}catch(T){Qi(i,i.return,T)}}break;case 1:$s(o,i),Iu(i),f&512&&l!==null&&eh(l,l.return);break;case 5:if($s(o,i),Iu(i),f&512&&l!==null&&eh(l,l.return),i.flags&32){var p=i.stateNode;try{Cg(p,"")}catch(T){Qi(i,i.return,T)}}if(f&4&&(p=i.stateNode,p!=null)){var w=i.memoizedProps,b=l!==null?l.memoizedProps:w,g=i.type,S=i.updateQueue;if(i.updateQueue=null,S!==null)try{g==="input"&&w.type==="radio"&&w.name!=null&&TF(p,w),TI(g,b);var F=TI(g,w);for(b=0;b<S.length;b+=2){var R=S[b],y=S[b+1];R==="style"?bF(p,y):R==="dangerouslySetInnerHTML"?AF(p,y):R==="children"?Cg(p,y):bb(p,R,y,F)}switch(g){case"input":mI(p,w);break;case"textarea":SF(p,w);break;case"select":var v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!w.multiple;var D=w.value;D!=null?oh(p,!!w.multiple,D,!1):v!==!!w.multiple&&(w.defaultValue!=null?oh(p,!!w.multiple,w.defaultValue,!0):oh(p,!!w.multiple,w.multiple?[]:"",!1))}p[kg]=w}catch(T){Qi(i,i.return,T)}}break;case 6:if($s(o,i),Iu(i),f&4){if(i.stateNode===null)throw Error(jn(162));p=i.stateNode,w=i.memoizedProps;try{p.nodeValue=w}catch(T){Qi(i,i.return,T)}}break;case 3:if($s(o,i),Iu(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Mg(o.containerInfo)}catch(T){Qi(i,i.return,T)}break;case 4:$s(o,i),Iu(i);break;case 13:$s(o,i),Iu(i),p=i.child,p.flags&8192&&(w=p.memoizedState!==null,p.stateNode.isHidden=w,!w||p.alternate!==null&&p.alternate.memoizedState!==null||(oC=lo())),f&4&&FP(i);break;case 22:if(R=l!==null&&l.memoizedState!==null,i.mode&1?(Xo=(F=Xo)||R,$s(o,i),Xo=F):$s(o,i),Iu(i),f&8192){if(F=i.memoizedState!==null,(i.stateNode.isHidden=F)&&!R&&i.mode&1)for(nr=i,R=i.child;R!==null;){for(y=nr=R;nr!==null;){switch(v=nr,D=v.child,v.tag){case 0:case 11:case 14:case 15:Sg(4,v,v.return);break;case 1:eh(v,v.return);var m=v.stateNode;if(typeof m.componentWillUnmount=="function"){f=v,l=v.return;try{o=f,m.props=o.memoizedProps,m.state=o.memoizedState,m.componentWillUnmount()}catch(T){Qi(f,l,T)}}break;case 5:eh(v,v.return);break;case 22:if(v.memoizedState!==null){BP(y);continue}}D!==null?(D.return=v,nr=D):BP(y)}R=R.sibling}e:for(R=null,y=i;;){if(y.tag===5){if(R===null){R=y;try{p=y.stateNode,F?(w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(g=y.stateNode,S=y.memoizedProps.style,b=S!=null&&S.hasOwnProperty("display")?S.display:null,g.style.display=IF("display",b))}catch(T){Qi(i,i.return,T)}}}else if(y.tag===6){if(R===null)try{y.stateNode.nodeValue=F?"":y.memoizedProps}catch(T){Qi(i,i.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===i)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;R===y&&(R=null),y=y.return}R===y&&(R=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:$s(o,i),Iu(i),f&4&&FP(i);break;case 21:break;default:$s(o,i),Iu(i)}}function Iu(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(X4(l)){var f=l;break e}l=l.return}throw Error(jn(160))}switch(f.tag){case 5:var p=f.stateNode;f.flags&32&&(Cg(p,""),f.flags&=-33);var w=kP(i);XI(i,w,p);break;case 3:case 4:var b=f.stateNode.containerInfo,g=kP(i);$I(i,g,b);break;default:throw Error(jn(161))}}catch(S){Qi(i,i.return,S)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function CH(i,o,l){nr=i,eU(i)}function eU(i,o,l){for(var f=(i.mode&1)!==0;nr!==null;){var p=nr,w=p.child;if(p.tag===22&&f){var b=p.memoizedState!==null||Gy;if(!b){var g=p.alternate,S=g!==null&&g.memoizedState!==null||Xo;g=Gy;var F=Xo;if(Gy=b,(Xo=S)&&!F)for(nr=p;nr!==null;)b=nr,S=b.child,b.tag===22&&b.memoizedState!==null?jP(p):S!==null?(S.return=b,nr=S):jP(p);for(;w!==null;)nr=w,eU(w),w=w.sibling;nr=p,Gy=g,Xo=F}UP(i)}else p.subtreeFlags&8772&&w!==null?(w.return=p,nr=w):UP(i)}}function UP(i){for(;nr!==null;){var o=nr;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Xo||eE(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Xo)if(l===null)f.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Qs(o.type,l.memoizedProps);f.componentDidUpdate(p,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=o.updateQueue;w!==null&&SP(o,w,f);break;case 3:var b=o.updateQueue;if(b!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}SP(o,b,l)}break;case 5:var g=o.stateNode;if(l===null&&o.flags&4){l=g;var S=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&l.focus();break;case"img":S.src&&(l.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var F=o.alternate;if(F!==null){var R=F.memoizedState;if(R!==null){var y=R.dehydrated;y!==null&&Mg(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Xo||o.flags&512&&WI(o)}catch(v){Qi(o,o.return,v)}}if(o===i){nr=null;break}if(l=o.sibling,l!==null){l.return=o.return,nr=l;break}nr=o.return}}function BP(i){for(;nr!==null;){var o=nr;if(o===i){nr=null;break}var l=o.sibling;if(l!==null){l.return=o.return,nr=l;break}nr=o.return}}function jP(i){for(;nr!==null;){var o=nr;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{eE(4,o)}catch(S){Qi(o,l,S)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var p=o.return;try{f.componentDidMount()}catch(S){Qi(o,p,S)}}var w=o.return;try{WI(o)}catch(S){Qi(o,w,S)}break;case 5:var b=o.return;try{WI(o)}catch(S){Qi(o,b,S)}}}catch(S){Qi(o,o.return,S)}if(o===i){nr=null;break}var g=o.sibling;if(g!==null){g.return=o.return,nr=g;break}nr=o.return}}var RH=Math.ceil,P0=Sl.ReactCurrentDispatcher,rC=Sl.ReactCurrentOwner,Rs=Sl.ReactCurrentBatchConfig,$r=0,Mo=null,go=null,Zo=0,us=0,th=pc(0),So=0,Gg=null,mf=0,tE=0,iC=0,wg=null,Fa=null,oC=0,vh=1/0,hl=null,O0=!1,QI=null,sc=null,qy=!1,tc=null,L0=0,Ag=0,JI=null,u0=-1,l0=0;function Ta(){return $r&6?lo():u0!==-1?u0:u0=lo()}function uc(i){return i.mode&1?$r&2&&Zo!==0?Zo&-Zo:fH.transition!==null?(l0===0&&(l0=UF()),l0):(i=di,i!==0||(i=window.event,i=i===void 0?16:KF(i.type)),i):1}function au(i,o,l,f){if(50<Ag)throw Ag=0,JI=null,Error(jn(185));Wg(i,l,f),(!($r&2)||i!==Mo)&&(i===Mo&&(!($r&2)&&(tE|=l),So===4&&Jl(i,Zo)),Za(i,f),l===1&&$r===0&&!(o.mode&1)&&(vh=lo()+500,X0&&gc()))}function Za(i,o){var l=i.callbackNode;fq(i,o);var f=y0(i,i===Mo?Zo:0);if(f===0)l!==null&&WD(l),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(l!=null&&WD(l),o===1)i.tag===0?cH(ZP.bind(null,i)):c4(ZP.bind(null,i)),aH(function(){!($r&6)&&gc()}),l=null;else{switch(BF(f)){case 1:l=Mb;break;case 4:l=kF;break;case 16:l=v0;break;case 536870912:l=FF;break;default:l=v0}l=uU(l,tU.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function tU(i,o){if(u0=-1,l0=0,$r&6)throw Error(jn(327));var l=i.callbackNode;if(ch()&&i.callbackNode!==l)return null;var f=y0(i,i===Mo?Zo:0);if(f===0)return null;if(f&30||f&i.expiredLanes||o)o=k0(i,f);else{o=f;var p=$r;$r|=2;var w=rU();(Mo!==i||Zo!==o)&&(hl=null,vh=lo()+500,lf(i,o));do try{MH();break}catch(g){nU(i,g)}while(!0);Hb(),P0.current=w,$r=p,go!==null?o=0:(Mo=null,Zo=0,o=So)}if(o!==0){if(o===2&&(p=bI(i),p!==0&&(f=p,o=eb(i,p))),o===1)throw l=Gg,lf(i,0),Jl(i,f),Za(i,lo()),l;if(o===6)Jl(i,f);else{if(p=i.current.alternate,!(f&30)&&!xH(p)&&(o=k0(i,f),o===2&&(w=bI(i),w!==0&&(f=w,o=eb(i,w))),o===1))throw l=Gg,lf(i,0),Jl(i,f),Za(i,lo()),l;switch(i.finishedWork=p,i.finishedLanes=f,o){case 0:case 1:throw Error(jn(345));case 2:tf(i,Fa,hl);break;case 3:if(Jl(i,f),(f&130023424)===f&&(o=oC+500-lo(),10<o)){if(y0(i,0)!==0)break;if(p=i.suspendedLanes,(p&f)!==f){Ta(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=OI(tf.bind(null,i,Fa,hl),o);break}tf(i,Fa,hl);break;case 4:if(Jl(i,f),(f&4194240)===f)break;for(o=i.eventTimes,p=-1;0<f;){var b=31-ou(f);w=1<<b,b=o[b],b>p&&(p=b),f&=~w}if(f=p,f=lo()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*RH(f/1960))-f,10<f){i.timeoutHandle=OI(tf.bind(null,i,Fa,hl),f);break}tf(i,Fa,hl);break;case 5:tf(i,Fa,hl);break;default:throw Error(jn(329))}}}return Za(i,lo()),i.callbackNode===l?tU.bind(null,i):null}function eb(i,o){var l=wg;return i.current.memoizedState.isDehydrated&&(lf(i,o).flags|=256),i=k0(i,o),i!==2&&(o=Fa,Fa=l,o!==null&&tb(o)),i}function tb(i){Fa===null?Fa=i:Fa.push.apply(Fa,i)}function xH(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var p=l[f],w=p.getSnapshot;p=p.value;try{if(!su(w(),p))return!1}catch(b){return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Jl(i,o){for(o&=~iC,o&=~tE,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-ou(o),f=1<<l;i[l]=-1,o&=~f}}function ZP(i){if($r&6)throw Error(jn(327));ch();var o=y0(i,0);if(!(o&1))return Za(i,lo()),null;var l=k0(i,o);if(i.tag!==0&&l===2){var f=bI(i);f!==0&&(o=f,l=eb(i,f))}if(l===1)throw l=Gg,lf(i,0),Jl(i,o),Za(i,lo()),l;if(l===6)throw Error(jn(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,tf(i,Fa,hl),Za(i,lo()),null}function aC(i,o){var l=$r;$r|=1;try{return i(o)}finally{$r=l,$r===0&&(vh=lo()+500,X0&&gc())}}function vf(i){tc!==null&&tc.tag===0&&!($r&6)&&ch();var o=$r;$r|=1;var l=Rs.transition,f=di;try{if(Rs.transition=null,di=1,i)return i()}finally{di=f,Rs.transition=l,$r=o,!($r&6)&&gc()}}function sC(){us=th.current,Ni(th)}function lf(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,oH(l)),go!==null)for(l=go.return;l!==null;){var f=l;switch(Zb(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&w0();break;case 3:gh(),Ni(Ba),Ni(Jo),$b();break;case 5:Wb(f);break;case 4:gh();break;case 13:Ni(qi);break;case 19:Ni(qi);break;case 10:Kb(f.type._context);break;case 22:case 23:sC()}l=l.return}if(Mo=i,go=i=lc(i.current,null),Zo=us=o,So=0,Gg=null,iC=tE=mf=0,Fa=wg=null,af!==null){for(o=0;o<af.length;o++)if(l=af[o],f=l.interleaved,f!==null){l.interleaved=null;var p=f.next,w=l.pending;if(w!==null){var b=w.next;w.next=p,f.next=b}l.pending=f}af=null}return i}function nU(i,o){do{var l=go;try{if(Hb(),o0.current=D0,M0){for(var f=Ki.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}M0=!1}if(gf=0,No=To=Ki=null,Tg=!1,Bg=0,rC.current=null,l===null||l.return===null){So=1,Gg=o,go=null;break}e:{var w=i,b=l.return,g=l,S=o;if(o=Zo,g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var F=S,R=g,y=R.tag;if(!(R.mode&1)&&(y===0||y===11||y===15)){var v=R.alternate;v?(R.updateQueue=v.updateQueue,R.memoizedState=v.memoizedState,R.lanes=v.lanes):(R.updateQueue=null,R.memoizedState=null)}var D=RP(b);if(D!==null){D.flags&=-257,xP(D,b,g,w,o),D.mode&1&&CP(w,F,o),o=D,S=F;var m=o.updateQueue;if(m===null){var T=new Set;T.add(S),o.updateQueue=T}else m.add(S);break e}else{if(!(o&1)){CP(w,F,o),uC();break e}S=Error(jn(426))}}else if(Ui&&g.mode&1){var U=RP(b);if(U!==null){!(U.flags&65536)&&(U.flags|=256),xP(U,b,g,w,o),Gb(mh(S,g));break e}}w=S=mh(S,g),So!==4&&(So=2),wg===null?wg=[w]:wg.push(w),w=b;do{switch(w.tag){case 3:w.flags|=65536,o&=-o,w.lanes|=o;var N=B4(w,S,o);TP(w,N);break e;case 1:g=S;var _=w.type,I=w.stateNode;if(!(w.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(sc===null||!sc.has(I)))){w.flags|=65536,o&=-o,w.lanes|=o;var C=j4(w,g,o);TP(w,C);break e}}w=w.return}while(w!==null)}oU(l)}catch(j){o=j,go===l&&l!==null&&(go=l=l.return);continue}break}while(!0)}function rU(){var i=P0.current;return P0.current=D0,i===null?D0:i}function uC(){(So===0||So===3||So===2)&&(So=4),Mo===null||!(mf&268435455)&&!(tE&268435455)||Jl(Mo,Zo)}function k0(i,o){var l=$r;$r|=2;var f=rU();(Mo!==i||Zo!==o)&&(hl=null,lf(i,o));do try{NH();break}catch(p){nU(i,p)}while(!0);if(Hb(),$r=l,P0.current=f,go!==null)throw Error(jn(261));return Mo=null,Zo=0,So}function NH(){for(;go!==null;)iU(go)}function MH(){for(;go!==null&&!nq();)iU(go)}function iU(i){var o=sU(i.alternate,i,us);i.memoizedProps=i.pendingProps,o===null?oU(i):go=o,rC.current=null}function oU(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=AH(l,o),l!==null){l.flags&=32767,go=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{So=6,go=null;return}}else if(l=wH(l,o,us),l!==null){go=l;return}if(o=o.sibling,o!==null){go=o;return}go=o=i}while(o!==null);So===0&&(So=5)}function tf(i,o,l){var f=di,p=Rs.transition;try{Rs.transition=null,di=1,DH(i,o,l,f)}finally{Rs.transition=p,di=f}return null}function DH(i,o,l,f){do ch();while(tc!==null);if($r&6)throw Error(jn(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(jn(177));i.callbackNode=null,i.callbackPriority=0;var w=l.lanes|l.childLanes;if(dq(i,w),i===Mo&&(go=Mo=null,Zo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||qy||(qy=!0,uU(v0,function(){return ch(),null})),w=(l.flags&15990)!==0,l.subtreeFlags&15990||w){w=Rs.transition,Rs.transition=null;var b=di;di=1;var g=$r;$r|=4,rC.current=null,bH(i,l),J4(l,i),Qq(DI),E0=!!MI,DI=MI=null,i.current=l,CH(l),rq(),$r=g,di=b,Rs.transition=w}else i.current=l;if(qy&&(qy=!1,tc=i,L0=p),w=i.pendingLanes,w===0&&(sc=null),aq(l.stateNode),Za(i,lo()),o!==null)for(f=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],f(p.value,{componentStack:p.stack,digest:p.digest});if(O0)throw O0=!1,i=QI,QI=null,i;return L0&1&&i.tag!==0&&ch(),w=i.pendingLanes,w&1?i===JI?Ag++:(Ag=0,JI=i):Ag=0,gc(),null}function ch(){if(tc!==null){var i=BF(L0),o=Rs.transition,l=di;try{if(Rs.transition=null,di=16>i?16:i,tc===null)var f=!1;else{if(i=tc,tc=null,L0=0,$r&6)throw Error(jn(331));var p=$r;for($r|=4,nr=i.current;nr!==null;){var w=nr,b=w.child;if(nr.flags&16){var g=w.deletions;if(g!==null){for(var S=0;S<g.length;S++){var F=g[S];for(nr=F;nr!==null;){var R=nr;switch(R.tag){case 0:case 11:case 15:Sg(8,R,w)}var y=R.child;if(y!==null)y.return=R,nr=y;else for(;nr!==null;){R=nr;var v=R.sibling,D=R.return;if($4(R),R===F){nr=null;break}if(v!==null){v.return=D,nr=v;break}nr=D}}}var m=w.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}nr=w}}if(w.subtreeFlags&2064&&b!==null)b.return=w,nr=b;else e:for(;nr!==null;){if(w=nr,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Sg(9,w,w.return)}var N=w.sibling;if(N!==null){N.return=w.return,nr=N;break e}nr=w.return}}var _=i.current;for(nr=_;nr!==null;){b=nr;var I=b.child;if(b.subtreeFlags&2064&&I!==null)I.return=b,nr=I;else e:for(b=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:eE(9,g)}}catch(j){Qi(g,g.return,j)}if(g===b){nr=null;break e}var C=g.sibling;if(C!==null){C.return=g.return,nr=C;break e}nr=g.return}}if($r=p,gc(),Mu&&typeof Mu.onPostCommitFiberRoot=="function")try{Mu.onPostCommitFiberRoot(V0,i)}catch(j){}f=!0}return f}finally{di=l,Rs.transition=o}}return!1}function GP(i,o,l){o=mh(l,o),o=B4(i,o,1),i=ac(i,o,1),o=Ta(),i!==null&&(Wg(i,1,o),Za(i,o))}function Qi(i,o,l){if(i.tag===3)GP(i,i,l);else for(;o!==null;){if(o.tag===3){GP(o,i,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(sc===null||!sc.has(f))){i=mh(l,i),i=j4(o,i,1),o=ac(o,i,1),i=Ta(),o!==null&&(Wg(o,1,i),Za(o,i));break}}o=o.return}}function PH(i,o,l){var f=i.pingCache;f!==null&&f.delete(o),o=Ta(),i.pingedLanes|=i.suspendedLanes&l,Mo===i&&(Zo&l)===l&&(So===4||So===3&&(Zo&130023424)===Zo&&500>lo()-oC?lf(i,0):iC|=l),Za(i,o)}function aU(i,o){o===0&&(i.mode&1?(o=Py,Py<<=1,!(Py&130023424)&&(Py=4194304)):o=1);var l=Ta();i=_l(i,o),i!==null&&(Wg(i,o,l),Za(i,l))}function OH(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),aU(i,l)}function LH(i,o){var l=0;switch(i.tag){case 13:var f=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(jn(314))}f!==null&&f.delete(o),aU(i,l)}var sU;sU=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Ba.current)Ua=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return Ua=!1,SH(i,o,l);Ua=!!(i.flags&131072)}else Ua=!1,Ui&&o.flags&1048576&&f4(o,b0,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;s0(i,o),i=o.pendingProps;var p=dh(o,Jo.current);lh(o,l),p=Qb(null,o,f,i,p,l);var w=Jb();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ja(f)?(w=!0,A0(o)):w=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,zb(o),p.updater=J0,o.stateNode=p,p._reactInternals=o,ZI(o,f,i,l),o=HI(null,o,f,!0,w,l)):(o.tag=0,Ui&&w&&jb(o),Ea(null,o,p,l),o=o.child),o;case 16:f=o.elementType;e:{switch(s0(i,o),i=o.pendingProps,p=f._init,f=p(f._payload),o.type=f,p=o.tag=FH(f),i=Qs(f,i),p){case 0:o=qI(null,o,f,i,l);break e;case 1:o=DP(null,o,f,i,l);break e;case 11:o=NP(null,o,f,i,l);break e;case 14:o=MP(null,o,f,Qs(f.type,i),l);break e}throw Error(jn(306,f,""))}return o;case 0:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),qI(i,o,f,p,l);case 1:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),DP(i,o,f,p,l);case 3:e:{if(H4(o),i===null)throw Error(jn(387));f=o.pendingProps,w=o.memoizedState,p=w.element,v4(i,o),x0(o,f,null,l);var b=o.memoizedState;if(f=b.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){p=mh(Error(jn(423)),o),o=PP(i,o,f,l,p);break e}else if(f!==p){p=mh(Error(jn(424)),o),o=PP(i,o,f,l,p);break e}else for(ls=oc(o.stateNode.containerInfo.firstChild),fs=o,Ui=!0,eu=null,l=g4(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(hh(),f===p){o=Tl(i,o,l);break e}Ea(i,o,f,l)}o=o.child}return o;case 5:return y4(o),i===null&&UI(o),f=o.type,p=o.pendingProps,w=i!==null?i.memoizedProps:null,b=p.children,PI(f,p)?b=null:w!==null&&PI(f,w)&&(o.flags|=32),q4(i,o),Ea(i,o,b,l),o.child;case 6:return i===null&&UI(o),null;case 13:return K4(i,o,l);case 4:return Yb(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=ph(o,null,f,l):Ea(i,o,f,l),o.child;case 11:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),NP(i,o,f,p,l);case 7:return Ea(i,o,o.pendingProps,l),o.child;case 8:return Ea(i,o,o.pendingProps.children,l),o.child;case 12:return Ea(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(f=o.type._context,p=o.pendingProps,w=o.memoizedProps,b=p.value,Ii(C0,f._currentValue),f._currentValue=b,w!==null)if(su(w.value,b)){if(w.children===p.children&&!Ba.current){o=Tl(i,o,l);break e}}else for(w=o.child,w!==null&&(w.return=o);w!==null;){var g=w.dependencies;if(g!==null){b=w.child;for(var S=g.firstContext;S!==null;){if(S.context===f){if(w.tag===1){S=vl(-1,l&-l),S.tag=2;var F=w.updateQueue;if(F!==null){F=F.shared;var R=F.pending;R===null?S.next=S:(S.next=R.next,R.next=S),F.pending=S}}w.lanes|=l,S=w.alternate,S!==null&&(S.lanes|=l),BI(w.return,l,o),g.lanes|=l;break}S=S.next}}else if(w.tag===10)b=w.type===o.type?null:w.child;else if(w.tag===18){if(b=w.return,b===null)throw Error(jn(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),BI(b,l,o),b=w.sibling}else b=w.child;if(b!==null)b.return=w;else for(b=w;b!==null;){if(b===o){b=null;break}if(w=b.sibling,w!==null){w.return=b.return,b=w;break}b=b.return}w=b}Ea(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,f=o.pendingProps.children,lh(o,l),p=xs(p),f=f(p),o.flags|=1,Ea(i,o,f,l),o.child;case 14:return f=o.type,p=Qs(f,o.pendingProps),p=Qs(f.type,p),MP(i,o,f,p,l);case 15:return Z4(i,o,o.type,o.pendingProps,l);case 17:return f=o.type,p=o.pendingProps,p=o.elementType===f?p:Qs(f,p),s0(i,o),o.tag=1,ja(f)?(i=!0,A0(o)):i=!1,lh(o,l),U4(o,f,p),ZI(o,f,p,l),HI(null,o,f,!0,i,l);case 19:return V4(i,o,l);case 22:return G4(i,o,l)}throw Error(jn(156,o.tag))};function uU(i,o){return LF(i,o)}function kH(i,o,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(i,o,l,f){return new kH(i,o,l,f)}function lC(i){return i=i.prototype,!(!i||!i.isReactComponent)}function FH(i){if(typeof i=="function")return lC(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Rb)return 11;if(i===xb)return 14}return 2}function lc(i,o){var l=i.alternate;return l===null?(l=Cs(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function c0(i,o,l,f,p,w){var b=2;if(f=i,typeof i=="function")lC(i)&&(b=1);else if(typeof i=="string")b=5;else e:switch(i){case Kd:return cf(l.children,p,w,o);case Cb:b=8,p|=8;break;case fI:return i=Cs(12,l,o,p|2),i.elementType=fI,i.lanes=w,i;case dI:return i=Cs(13,l,o,p),i.elementType=dI,i.lanes=w,i;case hI:return i=Cs(19,l,o,p),i.elementType=hI,i.lanes=w,i;case yF:return nE(l,p,w,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case mF:b=10;break e;case vF:b=9;break e;case Rb:b=11;break e;case xb:b=14;break e;case $l:b=16,f=null;break e}throw Error(jn(130,i==null?i:typeof i,""))}return o=Cs(b,l,o,p),o.elementType=i,o.type=f,o.lanes=w,o}function cf(i,o,l,f){return i=Cs(7,i,f,o),i.lanes=l,i}function nE(i,o,l,f){return i=Cs(22,i,f,o),i.elementType=yF,i.lanes=l,i.stateNode={isHidden:!1},i}function MT(i,o,l){return i=Cs(6,i,null,o),i.lanes=l,i}function DT(i,o,l){return o=Cs(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function UH(i,o,l,f,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dT(0),this.expirationTimes=dT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dT(0),this.identifierPrefix=f,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function cC(i,o,l,f,p,w,b,g,S){return i=new UH(i,o,l,g,S),o===1?(o=1,w===!0&&(o|=8)):o=0,w=Cs(3,null,null,o),i.current=w,w.stateNode=i,w.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},zb(w),i}function BH(i,o,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hd,key:f==null?null:""+f,children:i,containerInfo:o,implementation:l}}function lU(i){if(!i)return dc;i=i._reactInternals;e:{if(Tf(i)!==i||i.tag!==1)throw Error(jn(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(ja(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(jn(171))}if(i.tag===1){var l=i.type;if(ja(l))return l4(i,l,o)}return o}function cU(i,o,l,f,p,w,b,g,S){return i=cC(l,f,!0,i,p,w,b,g,S),i.context=lU(null),l=i.current,f=Ta(),p=uc(l),w=vl(f,p),w.callback=o!=null?o:null,ac(l,w,p),i.current.lanes=p,Wg(i,p,f),Za(i,f),i}function rE(i,o,l,f){var p=o.current,w=Ta(),b=uc(p);return l=lU(l),o.context===null?o.context=l:o.pendingContext=l,o=vl(w,b),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=ac(p,o,b),i!==null&&(au(i,p,b,w),i0(i,p,b)),b}function F0(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function qP(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function fC(i,o){qP(i,o),(i=i.alternate)&&qP(i,o)}function jH(){return null}var fU=typeof reportError=="function"?reportError:function(i){console.error(i)};function dC(i){this._internalRoot=i}iE.prototype.render=dC.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(jn(409));rE(i,o,null,null)};iE.prototype.unmount=dC.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;vf(function(){rE(null,i,null,null)}),o[El]=null}};function iE(i){this._internalRoot=i}iE.prototype.unstable_scheduleHydration=function(i){if(i){var o=GF();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Ql.length&&o!==0&&o<Ql[l].priority;l++);Ql.splice(l,0,i),l===0&&HF(i)}};function hC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function oE(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function HP(){}function ZH(i,o,l,f,p){if(p){if(typeof f=="function"){var w=f;f=function(){var F=F0(b);w.call(F)}}var b=cU(o,f,i,0,null,!1,!1,"",HP);return i._reactRootContainer=b,i[El]=b.current,Og(i.nodeType===8?i.parentNode:i),vf(),b}for(;p=i.lastChild;)i.removeChild(p);if(typeof f=="function"){var g=f;f=function(){var F=F0(S);g.call(F)}}var S=cC(i,0,!1,null,null,!1,!1,"",HP);return i._reactRootContainer=S,i[El]=S.current,Og(i.nodeType===8?i.parentNode:i),vf(function(){rE(o,S,l,f)}),S}function aE(i,o,l,f,p){var w=l._reactRootContainer;if(w){var b=w;if(typeof p=="function"){var g=p;p=function(){var S=F0(b);g.call(S)}}rE(o,b,i,p)}else b=ZH(l,o,i,p,f);return F0(b)}jF=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=fg(o.pendingLanes);l!==0&&(Db(o,l|1),Za(o,lo()),!($r&6)&&(vh=lo()+500,gc()))}break;case 13:vf(function(){var f=_l(i,1);if(f!==null){var p=Ta();au(f,i,1,p)}}),fC(i,1)}};Pb=function(i){if(i.tag===13){var o=_l(i,134217728);if(o!==null){var l=Ta();au(o,i,134217728,l)}fC(i,134217728)}};ZF=function(i){if(i.tag===13){var o=uc(i),l=_l(i,o);if(l!==null){var f=Ta();au(l,i,o,f)}fC(i,o)}};GF=function(){return di};qF=function(i,o){var l=di;try{return di=i,o()}finally{di=l}};wI=function(i,o,l){switch(o){case"input":if(mI(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==i&&f.form===i.form){var p=$0(f);if(!p)throw Error(jn(90));_F(f),mI(f,p)}}}break;case"textarea":SF(i,l);break;case"select":o=l.value,o!=null&&oh(i,!!l.multiple,o,!1)}};xF=aC;NF=vf;var GH={usingClientEntryPoint:!1,Events:[Xg,Wd,$0,CF,RF,aC]},rg={findFiberByHostInstance:of,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qH={bundleType:rg.bundleType,version:rg.version,rendererPackageName:rg.rendererPackageName,rendererConfig:rg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sl.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=PF(i),i===null?null:i.stateNode},findFiberByHostInstance:rg.findFiberByHostInstance||jH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hy.isDisabled&&Hy.supportsFiber)try{V0=Hy.inject(qH),Mu=Hy}catch(i){}}hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GH;hs.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hC(o))throw Error(jn(200));return BH(i,o,null,l)};hs.createRoot=function(i,o){if(!hC(i))throw Error(jn(299));var l=!1,f="",p=fU;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=cC(i,1,!1,null,null,l,!1,f,p),i[El]=o.current,Og(i.nodeType===8?i.parentNode:i),new dC(o)};hs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(jn(188)):(i=Object.keys(i).join(","),Error(jn(268,i)));return i=PF(o),i=i===null?null:i.stateNode,i};hs.flushSync=function(i){return vf(i)};hs.hydrate=function(i,o,l){if(!oE(o))throw Error(jn(200));return aE(null,i,o,!0,l)};hs.hydrateRoot=function(i,o,l){if(!hC(i))throw Error(jn(405));var f=l!=null&&l.hydratedSources||null,p=!1,w="",b=fU;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),o=cU(o,null,i,1,l!=null?l:null,p,!1,w,b),i[El]=o.current,Og(i),f)for(i=0;i<f.length;i++)l=f[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new iE(o)};hs.render=function(i,o,l){if(!oE(o))throw Error(jn(200));return aE(null,i,o,!1,l)};hs.unmountComponentAtNode=function(i){if(!oE(i))throw Error(jn(40));return i._reactRootContainer?(vf(function(){aE(null,null,i,!1,function(){i._reactRootContainer=null,i[El]=null})}),!0):!1};hs.unstable_batchedUpdates=aC;hs.unstable_renderSubtreeIntoContainer=function(i,o,l,f){if(!oE(l))throw Error(jn(200));if(i==null||i._reactInternals===void 0)throw Error(jn(38));return aE(i,o,l,!1,f)};hs.version="18.3.1-next-f1338f8080-20240426";function dU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dU)}catch(i){console.error(i)}}dU(),dF.exports=hs;var HH=dF.exports,KP=HH;lI.createRoot=KP.createRoot,lI.hydrateRoot=KP.hydrateRoot;var hU={exports:{}},PT,VP;function Sf(){if(VP)return PT;VP=1;function i(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}return PT=i,PT}var OT,zP;function pU(){if(zP)return OT;zP=1;var i=typeof nu=="object"&&nu&&nu.Object===Object&&nu;return OT=i,OT}var LT,YP;function Pu(){if(YP)return LT;YP=1;var i=pU(),o=typeof self=="object"&&self&&self.Object===Object&&self,l=i||o||Function("return this")();return LT=l,LT}var kT,WP;function KH(){if(WP)return kT;WP=1;var i=Pu(),o=function(){return i.Date.now()};return kT=o,kT}var FT,$P;function VH(){if($P)return FT;$P=1;var i=/\s/;function o(l){for(var f=l.length;f--&&i.test(l.charAt(f)););return f}return FT=o,FT}var UT,XP;function zH(){if(XP)return UT;XP=1;var i=VH(),o=/^\s+/;function l(f){return f&&f.slice(0,i(f)+1).replace(o,"")}return UT=l,UT}var BT,QP;function Jg(){if(QP)return BT;QP=1;var i=Pu(),o=i.Symbol;return BT=o,BT}var jT,JP;function YH(){if(JP)return jT;JP=1;var i=Jg(),o=Object.prototype,l=o.hasOwnProperty,f=o.toString,p=i?i.toStringTag:void 0;function w(b){var g=l.call(b,p),S=b[p];try{b[p]=void 0;var F=!0}catch(y){}var R=f.call(b);return F&&(g?b[p]=S:delete b[p]),R}return jT=w,jT}var ZT,eO;function WH(){if(eO)return ZT;eO=1;var i=Object.prototype,o=i.toString;function l(f){return o.call(f)}return ZT=l,ZT}var GT,tO;function em(){if(tO)return GT;tO=1;var i=Jg(),o=YH(),l=WH(),f="[object Null]",p="[object Undefined]",w=i?i.toStringTag:void 0;function b(g){return g==null?g===void 0?p:f:w&&w in Object(g)?o(g):l(g)}return GT=b,GT}var qT,nO;function wh(){if(nO)return qT;nO=1;function i(o){return o!=null&&typeof o=="object"}return qT=i,qT}var HT,rO;function tm(){if(rO)return HT;rO=1;var i=em(),o=wh(),l="[object Symbol]";function f(p){return typeof p=="symbol"||o(p)&&i(p)==l}return HT=f,HT}var KT,iO;function $H(){if(iO)return KT;iO=1;var i=zH(),o=Sf(),l=tm(),f=NaN,p=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,b=/^0o[0-7]+$/i,g=parseInt;function S(F){if(typeof F=="number")return F;if(l(F))return f;if(o(F)){var R=typeof F.valueOf=="function"?F.valueOf():F;F=o(R)?R+"":R}if(typeof F!="string")return F===0?F:+F;F=i(F);var y=w.test(F);return y||b.test(F)?g(F.slice(2),y?2:8):p.test(F)?f:+F}return KT=S,KT}var VT,oO;function gU(){if(oO)return VT;oO=1;var i=Sf(),o=KH(),l=$H(),f="Expected a function",p=Math.max,w=Math.min;function b(g,S,F){var R,y,v,D,m,T,U=0,N=!1,_=!1,I=!0;if(typeof g!="function")throw new TypeError(f);S=l(S)||0,i(F)&&(N=!!F.leading,_="maxWait"in F,v=_?p(l(F.maxWait)||0,S):v,I="trailing"in F?!!F.trailing:I);function C(oe){var ve=R,Ce=y;return R=y=void 0,U=oe,D=g.apply(Ce,ve),D}function j(oe){return U=oe,m=setTimeout(W,S),N?C(oe):D}function Y(oe){var ve=oe-T,Ce=oe-U,Xe=S-ve;return _?w(Xe,v-Ce):Xe}function $(oe){var ve=oe-T,Ce=oe-U;return T===void 0||ve>=S||ve<0||_&&Ce>=v}function W(){var oe=o();if($(oe))return ue(oe);m=setTimeout(W,Y(oe))}function ue(oe){return m=void 0,I&&R?C(oe):(R=y=void 0,D)}function x(){m!==void 0&&clearTimeout(m),U=0,R=T=y=m=void 0}function X(){return m===void 0?D:ue(o())}function de(){var oe=o(),ve=$(oe);if(R=arguments,y=this,T=oe,ve){if(m===void 0)return j(T);if(_)return clearTimeout(m),m=setTimeout(W,S),C(T)}return m===void 0&&(m=setTimeout(W,S)),D}return de.cancel=x,de.flush=X,de}return VT=b,VT}var zT,aO;function mU(){if(aO)return zT;aO=1;var i=em(),o=Sf(),l="[object AsyncFunction]",f="[object Function]",p="[object GeneratorFunction]",w="[object Proxy]";function b(g){if(!o(g))return!1;var S=i(g);return S==f||S==p||S==l||S==w}return zT=b,zT}var YT,sO;function XH(){if(sO)return YT;sO=1;var i=Pu(),o=i["__core-js_shared__"];return YT=o,YT}var WT,uO;function QH(){if(uO)return WT;uO=1;var i=XH(),o=function(){var f=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}();function l(f){return!!o&&o in f}return WT=l,WT}var $T,lO;function vU(){if(lO)return $T;lO=1;var i=Function.prototype,o=i.toString;function l(f){if(f!=null){try{return o.call(f)}catch(p){}try{return f+""}catch(p){}}return""}return $T=l,$T}var XT,cO;function JH(){if(cO)return XT;cO=1;var i=mU(),o=QH(),l=Sf(),f=vU(),p=/[\\^$.*+?()[\]{}|]/g,w=/^\[object .+?Constructor\]$/,b=Function.prototype,g=Object.prototype,S=b.toString,F=g.hasOwnProperty,R=RegExp("^"+S.call(F).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(v){if(!l(v)||o(v))return!1;var D=i(v)?R:w;return D.test(f(v))}return XT=y,XT}var QT,fO;function e7(){if(fO)return QT;fO=1;function i(o,l){return o==null?void 0:o[l]}return QT=i,QT}var JT,dO;function wf(){if(dO)return JT;dO=1;var i=JH(),o=e7();function l(f,p){var w=o(f,p);return i(w)?w:void 0}return JT=l,JT}var eS,hO;function sE(){if(hO)return eS;hO=1;var i=wf(),o=i(Object,"create");return eS=o,eS}var tS,pO;function t7(){if(pO)return tS;pO=1;var i=sE();function o(){this.__data__=i?i(null):{},this.size=0}return tS=o,tS}var nS,gO;function n7(){if(gO)return nS;gO=1;function i(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}return nS=i,nS}var rS,mO;function r7(){if(mO)return rS;mO=1;var i=sE(),o="__lodash_hash_undefined__",l=Object.prototype,f=l.hasOwnProperty;function p(w){var b=this.__data__;if(i){var g=b[w];return g===o?void 0:g}return f.call(b,w)?b[w]:void 0}return rS=p,rS}var iS,vO;function i7(){if(vO)return iS;vO=1;var i=sE(),o=Object.prototype,l=o.hasOwnProperty;function f(p){var w=this.__data__;return i?w[p]!==void 0:l.call(w,p)}return iS=f,iS}var oS,yO;function o7(){if(yO)return oS;yO=1;var i=sE(),o="__lodash_hash_undefined__";function l(f,p){var w=this.__data__;return this.size+=this.has(f)?0:1,w[f]=i&&p===void 0?o:p,this}return oS=l,oS}var aS,EO;function a7(){if(EO)return aS;EO=1;var i=t7(),o=n7(),l=r7(),f=i7(),p=o7();function w(b){var g=-1,S=b==null?0:b.length;for(this.clear();++g<S;){var F=b[g];this.set(F[0],F[1])}}return w.prototype.clear=i,w.prototype.delete=o,w.prototype.get=l,w.prototype.has=f,w.prototype.set=p,aS=w,aS}var sS,_O;function s7(){if(_O)return sS;_O=1;function i(){this.__data__=[],this.size=0}return sS=i,sS}var uS,TO;function pC(){if(TO)return uS;TO=1;function i(o,l){return o===l||o!==o&&l!==l}return uS=i,uS}var lS,SO;function uE(){if(SO)return lS;SO=1;var i=pC();function o(l,f){for(var p=l.length;p--;)if(i(l[p][0],f))return p;return-1}return lS=o,lS}var cS,wO;function u7(){if(wO)return cS;wO=1;var i=uE(),o=Array.prototype,l=o.splice;function f(p){var w=this.__data__,b=i(w,p);if(b<0)return!1;var g=w.length-1;return b==g?w.pop():l.call(w,b,1),--this.size,!0}return cS=f,cS}var fS,AO;function l7(){if(AO)return fS;AO=1;var i=uE();function o(l){var f=this.__data__,p=i(f,l);return p<0?void 0:f[p][1]}return fS=o,fS}var dS,IO;function c7(){if(IO)return dS;IO=1;var i=uE();function o(l){return i(this.__data__,l)>-1}return dS=o,dS}var hS,bO;function f7(){if(bO)return hS;bO=1;var i=uE();function o(l,f){var p=this.__data__,w=i(p,l);return w<0?(++this.size,p.push([l,f])):p[w][1]=f,this}return hS=o,hS}var pS,CO;function lE(){if(CO)return pS;CO=1;var i=s7(),o=u7(),l=l7(),f=c7(),p=f7();function w(b){var g=-1,S=b==null?0:b.length;for(this.clear();++g<S;){var F=b[g];this.set(F[0],F[1])}}return w.prototype.clear=i,w.prototype.delete=o,w.prototype.get=l,w.prototype.has=f,w.prototype.set=p,pS=w,pS}var gS,RO;function gC(){if(RO)return gS;RO=1;var i=wf(),o=Pu(),l=i(o,"Map");return gS=l,gS}var mS,xO;function d7(){if(xO)return mS;xO=1;var i=a7(),o=lE(),l=gC();function f(){this.size=0,this.__data__={hash:new i,map:new(l||o),string:new i}}return mS=f,mS}var vS,NO;function h7(){if(NO)return vS;NO=1;function i(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}return vS=i,vS}var yS,MO;function cE(){if(MO)return yS;MO=1;var i=h7();function o(l,f){var p=l.__data__;return i(f)?p[typeof f=="string"?"string":"hash"]:p.map}return yS=o,yS}var ES,DO;function p7(){if(DO)return ES;DO=1;var i=cE();function o(l){var f=i(this,l).delete(l);return this.size-=f?1:0,f}return ES=o,ES}var _S,PO;function g7(){if(PO)return _S;PO=1;var i=cE();function o(l){return i(this,l).get(l)}return _S=o,_S}var TS,OO;function m7(){if(OO)return TS;OO=1;var i=cE();function o(l){return i(this,l).has(l)}return TS=o,TS}var SS,LO;function v7(){if(LO)return SS;LO=1;var i=cE();function o(l,f){var p=i(this,l),w=p.size;return p.set(l,f),this.size+=p.size==w?0:1,this}return SS=o,SS}var wS,kO;function mC(){if(kO)return wS;kO=1;var i=d7(),o=p7(),l=g7(),f=m7(),p=v7();function w(b){var g=-1,S=b==null?0:b.length;for(this.clear();++g<S;){var F=b[g];this.set(F[0],F[1])}}return w.prototype.clear=i,w.prototype.delete=o,w.prototype.get=l,w.prototype.has=f,w.prototype.set=p,wS=w,wS}var AS,FO;function y7(){if(FO)return AS;FO=1;var i="__lodash_hash_undefined__";function o(l){return this.__data__.set(l,i),this}return AS=o,AS}var IS,UO;function E7(){if(UO)return IS;UO=1;function i(o){return this.__data__.has(o)}return IS=i,IS}var bS,BO;function yU(){if(BO)return bS;BO=1;var i=mC(),o=y7(),l=E7();function f(p){var w=-1,b=p==null?0:p.length;for(this.__data__=new i;++w<b;)this.add(p[w])}return f.prototype.add=f.prototype.push=o,f.prototype.has=l,bS=f,bS}var CS,jO;function _7(){if(jO)return CS;jO=1;function i(o,l,f,p){for(var w=o.length,b=f+(p?1:-1);p?b--:++b<w;)if(l(o[b],b,o))return b;return-1}return CS=i,CS}var RS,ZO;function T7(){if(ZO)return RS;ZO=1;function i(o){return o!==o}return RS=i,RS}var xS,GO;function S7(){if(GO)return xS;GO=1;function i(o,l,f){for(var p=f-1,w=o.length;++p<w;)if(o[p]===l)return p;return-1}return xS=i,xS}var NS,qO;function w7(){if(qO)return NS;qO=1;var i=_7(),o=T7(),l=S7();function f(p,w,b){return w===w?l(p,w,b):i(p,o,b)}return NS=f,NS}var MS,HO;function A7(){if(HO)return MS;HO=1;var i=w7();function o(l,f){var p=l==null?0:l.length;return!!p&&i(l,f,0)>-1}return MS=o,MS}var DS,KO;function I7(){if(KO)return DS;KO=1;function i(o,l,f){for(var p=-1,w=o==null?0:o.length;++p<w;)if(f(l,o[p]))return!0;return!1}return DS=i,DS}var PS,VO;function vC(){if(VO)return PS;VO=1;function i(o,l){for(var f=-1,p=o==null?0:o.length,w=Array(p);++f<p;)w[f]=l(o[f],f,o);return w}return PS=i,PS}var OS,zO;function yC(){if(zO)return OS;zO=1;function i(o){return function(l){return o(l)}}return OS=i,OS}var LS,YO;function EU(){if(YO)return LS;YO=1;function i(o,l){return o.has(l)}return LS=i,LS}var kS,WO;function b7(){if(WO)return kS;WO=1;var i=yU(),o=A7(),l=I7(),f=vC(),p=yC(),w=EU(),b=200;function g(S,F,R,y){var v=-1,D=o,m=!0,T=S.length,U=[],N=F.length;if(!T)return U;R&&(F=f(F,p(R))),y?(D=l,m=!1):F.length>=b&&(D=w,m=!1,F=new i(F));e:for(;++v<T;){var _=S[v],I=R==null?_:R(_);if(_=y||_!==0?_:0,m&&I===I){for(var C=N;C--;)if(F[C]===I)continue e;U.push(_)}else D(F,I,y)||U.push(_)}return U}return kS=g,kS}var FS,$O;function _U(){if($O)return FS;$O=1;function i(o,l){for(var f=-1,p=l.length,w=o.length;++f<p;)o[w+f]=l[f];return o}return FS=i,FS}var US,XO;function C7(){if(XO)return US;XO=1;var i=em(),o=wh(),l="[object Arguments]";function f(p){return o(p)&&i(p)==l}return US=f,US}var BS,QO;function EC(){if(QO)return BS;QO=1;var i=C7(),o=wh(),l=Object.prototype,f=l.hasOwnProperty,p=l.propertyIsEnumerable,w=i(function(){return arguments}())?i:function(b){return o(b)&&f.call(b,"callee")&&!p.call(b,"callee")};return BS=w,BS}var jS,JO;function Ms(){if(JO)return jS;JO=1;var i=Array.isArray;return jS=i,jS}var ZS,eL;function R7(){if(eL)return ZS;eL=1;var i=Jg(),o=EC(),l=Ms(),f=i?i.isConcatSpreadable:void 0;function p(w){return l(w)||o(w)||!!(f&&w&&w[f])}return ZS=p,ZS}var GS,tL;function TU(){if(tL)return GS;tL=1;var i=_U(),o=R7();function l(f,p,w,b,g){var S=-1,F=f.length;for(w||(w=o),g||(g=[]);++S<F;){var R=f[S];p>0&&w(R)?p>1?l(R,p-1,w,b,g):i(g,R):b||(g[g.length]=R)}return g}return GS=l,GS}var qS,nL;function nm(){if(nL)return qS;nL=1;function i(o){return o}return qS=i,qS}var HS,rL;function x7(){if(rL)return HS;rL=1;function i(o,l,f){switch(f.length){case 0:return o.call(l);case 1:return o.call(l,f[0]);case 2:return o.call(l,f[0],f[1]);case 3:return o.call(l,f[0],f[1],f[2])}return o.apply(l,f)}return HS=i,HS}var KS,iL;function N7(){if(iL)return KS;iL=1;var i=x7(),o=Math.max;function l(f,p,w){return p=o(p===void 0?f.length-1:p,0),function(){for(var b=arguments,g=-1,S=o(b.length-p,0),F=Array(S);++g<S;)F[g]=b[p+g];g=-1;for(var R=Array(p+1);++g<p;)R[g]=b[g];return R[p]=w(F),i(f,this,R)}}return KS=l,KS}var VS,oL;function M7(){if(oL)return VS;oL=1;function i(o){return function(){return o}}return VS=i,VS}var zS,aL;function D7(){if(aL)return zS;aL=1;var i=wf(),o=function(){try{var l=i(Object,"defineProperty");return l({},"",{}),l}catch(f){}}();return zS=o,zS}var YS,sL;function P7(){if(sL)return YS;sL=1;var i=M7(),o=D7(),l=nm(),f=o?function(p,w){return o(p,"toString",{configurable:!0,enumerable:!1,value:i(w),writable:!0})}:l;return YS=f,YS}var WS,uL;function O7(){if(uL)return WS;uL=1;var i=800,o=16,l=Date.now;function f(p){var w=0,b=0;return function(){var g=l(),S=o-(g-b);if(b=g,S>0){if(++w>=i)return arguments[0]}else w=0;return p.apply(void 0,arguments)}}return WS=f,WS}var $S,lL;function L7(){if(lL)return $S;lL=1;var i=P7(),o=O7(),l=o(i);return $S=l,$S}var XS,cL;function SU(){if(cL)return XS;cL=1;var i=nm(),o=N7(),l=L7();function f(p,w){return l(o(p,w,i),p+"")}return XS=f,XS}var QS,fL;function _C(){if(fL)return QS;fL=1;var i=9007199254740991;function o(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=i}return QS=o,QS}var JS,dL;function rm(){if(dL)return JS;dL=1;var i=mU(),o=_C();function l(f){return f!=null&&o(f.length)&&!i(f)}return JS=l,JS}var ew,hL;function k7(){if(hL)return ew;hL=1;var i=rm(),o=wh();function l(f){return o(f)&&i(f)}return ew=l,ew}var tw,pL;function F7(){if(pL)return tw;pL=1;var i=b7(),o=TU(),l=SU(),f=k7(),p=l(function(w,b){return f(w)?i(w,o(b,1,f,!0)):[]});return tw=p,tw}var nw,gL;function wU(){if(gL)return nw;gL=1;function i(o,l){for(var f=-1,p=o==null?0:o.length,w=0,b=[];++f<p;){var g=o[f];l(g,f,o)&&(b[w++]=g)}return b}return nw=i,nw}var rw,mL;function U7(){if(mL)return rw;mL=1;function i(o){return function(l,f,p){for(var w=-1,b=Object(l),g=p(l),S=g.length;S--;){var F=g[o?S:++w];if(f(b[F],F,b)===!1)break}return l}}return rw=i,rw}var iw,vL;function B7(){if(vL)return iw;vL=1;var i=U7(),o=i();return iw=o,iw}var ow,yL;function j7(){if(yL)return ow;yL=1;function i(o,l){for(var f=-1,p=Array(o);++f<o;)p[f]=l(f);return p}return ow=i,ow}var hg={exports:{}},aw,EL;function Z7(){if(EL)return aw;EL=1;function i(){return!1}return aw=i,aw}hg.exports;var _L;function AU(){return _L||(_L=1,function(i,o){var l=Pu(),f=Z7(),p=o&&!o.nodeType&&o,w=p&&!0&&i&&!i.nodeType&&i,b=w&&w.exports===p,g=b?l.Buffer:void 0,S=g?g.isBuffer:void 0,F=S||f;i.exports=F}(hg,hg.exports)),hg.exports}var sw,TL;function TC(){if(TL)return sw;TL=1;var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function l(f,p){var w=typeof f;return p=p==null?i:p,!!p&&(w=="number"||w!="symbol"&&o.test(f))&&f>-1&&f%1==0&&f<p}return sw=l,sw}var uw,SL;function G7(){if(SL)return uw;SL=1;var i=em(),o=_C(),l=wh(),f="[object Arguments]",p="[object Array]",w="[object Boolean]",b="[object Date]",g="[object Error]",S="[object Function]",F="[object Map]",R="[object Number]",y="[object Object]",v="[object RegExp]",D="[object Set]",m="[object String]",T="[object WeakMap]",U="[object ArrayBuffer]",N="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",C="[object Int8Array]",j="[object Int16Array]",Y="[object Int32Array]",$="[object Uint8Array]",W="[object Uint8ClampedArray]",ue="[object Uint16Array]",x="[object Uint32Array]",X={};X[_]=X[I]=X[C]=X[j]=X[Y]=X[$]=X[W]=X[ue]=X[x]=!0,X[f]=X[p]=X[U]=X[w]=X[N]=X[b]=X[g]=X[S]=X[F]=X[R]=X[y]=X[v]=X[D]=X[m]=X[T]=!1;function de(oe){return l(oe)&&o(oe.length)&&!!X[i(oe)]}return uw=de,uw}var pg={exports:{}};pg.exports;var wL;function q7(){return wL||(wL=1,function(i,o){var l=pU(),f=o&&!o.nodeType&&o,p=f&&!0&&i&&!i.nodeType&&i,w=p&&p.exports===f,b=w&&l.process,g=function(){try{var S=p&&p.require&&p.require("util").types;return S||b&&b.binding&&b.binding("util")}catch(F){}}();i.exports=g}(pg,pg.exports)),pg.exports}var lw,AL;function IU(){if(AL)return lw;AL=1;var i=G7(),o=yC(),l=q7(),f=l&&l.isTypedArray,p=f?o(f):i;return lw=p,lw}var cw,IL;function H7(){if(IL)return cw;IL=1;var i=j7(),o=EC(),l=Ms(),f=AU(),p=TC(),w=IU(),b=Object.prototype,g=b.hasOwnProperty;function S(F,R){var y=l(F),v=!y&&o(F),D=!y&&!v&&f(F),m=!y&&!v&&!D&&w(F),T=y||v||D||m,U=T?i(F.length,String):[],N=U.length;for(var _ in F)(R||g.call(F,_))&&!(T&&(_=="length"||D&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,N)))&&U.push(_);return U}return cw=S,cw}var fw,bL;function K7(){if(bL)return fw;bL=1;var i=Object.prototype;function o(l){var f=l&&l.constructor,p=typeof f=="function"&&f.prototype||i;return l===p}return fw=o,fw}var dw,CL;function V7(){if(CL)return dw;CL=1;function i(o,l){return function(f){return o(l(f))}}return dw=i,dw}var hw,RL;function z7(){if(RL)return hw;RL=1;var i=V7(),o=i(Object.keys,Object);return hw=o,hw}var pw,xL;function Y7(){if(xL)return pw;xL=1;var i=K7(),o=z7(),l=Object.prototype,f=l.hasOwnProperty;function p(w){if(!i(w))return o(w);var b=[];for(var g in Object(w))f.call(w,g)&&g!="constructor"&&b.push(g);return b}return pw=p,pw}var gw,NL;function SC(){if(NL)return gw;NL=1;var i=H7(),o=Y7(),l=rm();function f(p){return l(p)?i(p):o(p)}return gw=f,gw}var mw,ML;function wC(){if(ML)return mw;ML=1;var i=B7(),o=SC();function l(f,p){return f&&i(f,p,o)}return mw=l,mw}var vw,DL;function W7(){if(DL)return vw;DL=1;var i=rm();function o(l,f){return function(p,w){if(p==null)return p;if(!i(p))return l(p,w);for(var b=p.length,g=f?b:-1,S=Object(p);(f?g--:++g<b)&&w(S[g],g,S)!==!1;);return p}}return vw=o,vw}var yw,PL;function AC(){if(PL)return yw;PL=1;var i=wC(),o=W7(),l=o(i);return yw=l,yw}var Ew,OL;function $7(){if(OL)return Ew;OL=1;var i=AC();function o(l,f){var p=[];return i(l,function(w,b,g){f(w,b,g)&&p.push(w)}),p}return Ew=o,Ew}var _w,LL;function X7(){if(LL)return _w;LL=1;var i=lE();function o(){this.__data__=new i,this.size=0}return _w=o,_w}var Tw,kL;function Q7(){if(kL)return Tw;kL=1;function i(o){var l=this.__data__,f=l.delete(o);return this.size=l.size,f}return Tw=i,Tw}var Sw,FL;function J7(){if(FL)return Sw;FL=1;function i(o){return this.__data__.get(o)}return Sw=i,Sw}var ww,UL;function eK(){if(UL)return ww;UL=1;function i(o){return this.__data__.has(o)}return ww=i,ww}var Aw,BL;function tK(){if(BL)return Aw;BL=1;var i=lE(),o=gC(),l=mC(),f=200;function p(w,b){var g=this.__data__;if(g instanceof i){var S=g.__data__;if(!o||S.length<f-1)return S.push([w,b]),this.size=++g.size,this;g=this.__data__=new l(S)}return g.set(w,b),this.size=g.size,this}return Aw=p,Aw}var Iw,jL;function bU(){if(jL)return Iw;jL=1;var i=lE(),o=X7(),l=Q7(),f=J7(),p=eK(),w=tK();function b(g){var S=this.__data__=new i(g);this.size=S.size}return b.prototype.clear=o,b.prototype.delete=l,b.prototype.get=f,b.prototype.has=p,b.prototype.set=w,Iw=b,Iw}var bw,ZL;function nK(){if(ZL)return bw;ZL=1;function i(o,l){for(var f=-1,p=o==null?0:o.length;++f<p;)if(l(o[f],f,o))return!0;return!1}return bw=i,bw}var Cw,GL;function CU(){if(GL)return Cw;GL=1;var i=yU(),o=nK(),l=EU(),f=1,p=2;function w(b,g,S,F,R,y){var v=S&f,D=b.length,m=g.length;if(D!=m&&!(v&&m>D))return!1;var T=y.get(b),U=y.get(g);if(T&&U)return T==g&&U==b;var N=-1,_=!0,I=S&p?new i:void 0;for(y.set(b,g),y.set(g,b);++N<D;){var C=b[N],j=g[N];if(F)var Y=v?F(j,C,N,g,b,y):F(C,j,N,b,g,y);if(Y!==void 0){if(Y)continue;_=!1;break}if(I){if(!o(g,function($,W){if(!l(I,W)&&(C===$||R(C,$,S,F,y)))return I.push(W)})){_=!1;break}}else if(!(C===j||R(C,j,S,F,y))){_=!1;break}}return y.delete(b),y.delete(g),_}return Cw=w,Cw}var Rw,qL;function rK(){if(qL)return Rw;qL=1;var i=Pu(),o=i.Uint8Array;return Rw=o,Rw}var xw,HL;function iK(){if(HL)return xw;HL=1;function i(o){var l=-1,f=Array(o.size);return o.forEach(function(p,w){f[++l]=[w,p]}),f}return xw=i,xw}var Nw,KL;function oK(){if(KL)return Nw;KL=1;function i(o){var l=-1,f=Array(o.size);return o.forEach(function(p){f[++l]=p}),f}return Nw=i,Nw}var Mw,VL;function aK(){if(VL)return Mw;VL=1;var i=Jg(),o=rK(),l=pC(),f=CU(),p=iK(),w=oK(),b=1,g=2,S="[object Boolean]",F="[object Date]",R="[object Error]",y="[object Map]",v="[object Number]",D="[object RegExp]",m="[object Set]",T="[object String]",U="[object Symbol]",N="[object ArrayBuffer]",_="[object DataView]",I=i?i.prototype:void 0,C=I?I.valueOf:void 0;function j(Y,$,W,ue,x,X,de){switch(W){case _:if(Y.byteLength!=$.byteLength||Y.byteOffset!=$.byteOffset)return!1;Y=Y.buffer,$=$.buffer;case N:return!(Y.byteLength!=$.byteLength||!X(new o(Y),new o($)));case S:case F:case v:return l(+Y,+$);case R:return Y.name==$.name&&Y.message==$.message;case D:case T:return Y==$+"";case y:var oe=p;case m:var ve=ue&b;if(oe||(oe=w),Y.size!=$.size&&!ve)return!1;var Ce=de.get(Y);if(Ce)return Ce==$;ue|=g,de.set(Y,$);var Xe=f(oe(Y),oe($),ue,x,X,de);return de.delete(Y),Xe;case U:if(C)return C.call(Y)==C.call($)}return!1}return Mw=j,Mw}var Dw,zL;function sK(){if(zL)return Dw;zL=1;var i=_U(),o=Ms();function l(f,p,w){var b=p(f);return o(f)?b:i(b,w(f))}return Dw=l,Dw}var Pw,YL;function uK(){if(YL)return Pw;YL=1;function i(){return[]}return Pw=i,Pw}var Ow,WL;function lK(){if(WL)return Ow;WL=1;var i=wU(),o=uK(),l=Object.prototype,f=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,w=p?function(b){return b==null?[]:(b=Object(b),i(p(b),function(g){return f.call(b,g)}))}:o;return Ow=w,Ow}var Lw,$L;function cK(){if($L)return Lw;$L=1;var i=sK(),o=lK(),l=SC();function f(p){return i(p,l,o)}return Lw=f,Lw}var kw,XL;function fK(){if(XL)return kw;XL=1;var i=cK(),o=1,l=Object.prototype,f=l.hasOwnProperty;function p(w,b,g,S,F,R){var y=g&o,v=i(w),D=v.length,m=i(b),T=m.length;if(D!=T&&!y)return!1;for(var U=D;U--;){var N=v[U];if(!(y?N in b:f.call(b,N)))return!1}var _=R.get(w),I=R.get(b);if(_&&I)return _==b&&I==w;var C=!0;R.set(w,b),R.set(b,w);for(var j=y;++U<D;){N=v[U];var Y=w[N],$=b[N];if(S)var W=y?S($,Y,N,b,w,R):S(Y,$,N,w,b,R);if(!(W===void 0?Y===$||F(Y,$,g,S,R):W)){C=!1;break}j||(j=N=="constructor")}if(C&&!j){var ue=w.constructor,x=b.constructor;ue!=x&&"constructor"in w&&"constructor"in b&&!(typeof ue=="function"&&ue instanceof ue&&typeof x=="function"&&x instanceof x)&&(C=!1)}return R.delete(w),R.delete(b),C}return kw=p,kw}var Fw,QL;function dK(){if(QL)return Fw;QL=1;var i=wf(),o=Pu(),l=i(o,"DataView");return Fw=l,Fw}var Uw,JL;function hK(){if(JL)return Uw;JL=1;var i=wf(),o=Pu(),l=i(o,"Promise");return Uw=l,Uw}var Bw,ek;function pK(){if(ek)return Bw;ek=1;var i=wf(),o=Pu(),l=i(o,"Set");return Bw=l,Bw}var jw,tk;function gK(){if(tk)return jw;tk=1;var i=wf(),o=Pu(),l=i(o,"WeakMap");return jw=l,jw}var Zw,nk;function mK(){if(nk)return Zw;nk=1;var i=dK(),o=gC(),l=hK(),f=pK(),p=gK(),w=em(),b=vU(),g="[object Map]",S="[object Object]",F="[object Promise]",R="[object Set]",y="[object WeakMap]",v="[object DataView]",D=b(i),m=b(o),T=b(l),U=b(f),N=b(p),_=w;return(i&&_(new i(new ArrayBuffer(1)))!=v||o&&_(new o)!=g||l&&_(l.resolve())!=F||f&&_(new f)!=R||p&&_(new p)!=y)&&(_=function(I){var C=w(I),j=C==S?I.constructor:void 0,Y=j?b(j):"";if(Y)switch(Y){case D:return v;case m:return g;case T:return F;case U:return R;case N:return y}return C}),Zw=_,Zw}var Gw,rk;function vK(){if(rk)return Gw;rk=1;var i=bU(),o=CU(),l=aK(),f=fK(),p=mK(),w=Ms(),b=AU(),g=IU(),S=1,F="[object Arguments]",R="[object Array]",y="[object Object]",v=Object.prototype,D=v.hasOwnProperty;function m(T,U,N,_,I,C){var j=w(T),Y=w(U),$=j?R:p(T),W=Y?R:p(U);$=$==F?y:$,W=W==F?y:W;var ue=$==y,x=W==y,X=$==W;if(X&&b(T)){if(!b(U))return!1;j=!0,ue=!1}if(X&&!ue)return C||(C=new i),j||g(T)?o(T,U,N,_,I,C):l(T,U,$,N,_,I,C);if(!(N&S)){var de=ue&&D.call(T,"__wrapped__"),oe=x&&D.call(U,"__wrapped__");if(de||oe){var ve=de?T.value():T,Ce=oe?U.value():U;return C||(C=new i),I(ve,Ce,N,_,C)}}return X?(C||(C=new i),f(T,U,N,_,I,C)):!1}return Gw=m,Gw}var qw,ik;function RU(){if(ik)return qw;ik=1;var i=vK(),o=wh();function l(f,p,w,b,g){return f===p?!0:f==null||p==null||!o(f)&&!o(p)?f!==f&&p!==p:i(f,p,w,b,l,g)}return qw=l,qw}var Hw,ok;function yK(){if(ok)return Hw;ok=1;var i=bU(),o=RU(),l=1,f=2;function p(w,b,g,S){var F=g.length,R=F,y=!S;if(w==null)return!R;for(w=Object(w);F--;){var v=g[F];if(y&&v[2]?v[1]!==w[v[0]]:!(v[0]in w))return!1}for(;++F<R;){v=g[F];var D=v[0],m=w[D],T=v[1];if(y&&v[2]){if(m===void 0&&!(D in w))return!1}else{var U=new i;if(S)var N=S(m,T,D,w,b,U);if(!(N===void 0?o(T,m,l|f,S,U):N))return!1}}return!0}return Hw=p,Hw}var Kw,ak;function xU(){if(ak)return Kw;ak=1;var i=Sf();function o(l){return l===l&&!i(l)}return Kw=o,Kw}var Vw,sk;function EK(){if(sk)return Vw;sk=1;var i=xU(),o=SC();function l(f){for(var p=o(f),w=p.length;w--;){var b=p[w],g=f[b];p[w]=[b,g,i(g)]}return p}return Vw=l,Vw}var zw,uk;function NU(){if(uk)return zw;uk=1;function i(o,l){return function(f){return f==null?!1:f[o]===l&&(l!==void 0||o in Object(f))}}return zw=i,zw}var Yw,lk;function _K(){if(lk)return Yw;lk=1;var i=yK(),o=EK(),l=NU();function f(p){var w=o(p);return w.length==1&&w[0][2]?l(w[0][0],w[0][1]):function(b){return b===p||i(b,p,w)}}return Yw=f,Yw}var Ww,ck;function IC(){if(ck)return Ww;ck=1;var i=Ms(),o=tm(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;function p(w,b){if(i(w))return!1;var g=typeof w;return g=="number"||g=="symbol"||g=="boolean"||w==null||o(w)?!0:f.test(w)||!l.test(w)||b!=null&&w in Object(b)}return Ww=p,Ww}var $w,fk;function TK(){if(fk)return $w;fk=1;var i=mC(),o="Expected a function";function l(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new TypeError(o);var w=function(){var b=arguments,g=p?p.apply(this,b):b[0],S=w.cache;if(S.has(g))return S.get(g);var F=f.apply(this,b);return w.cache=S.set(g,F)||S,F};return w.cache=new(l.Cache||i),w}return l.Cache=i,$w=l,$w}var Xw,dk;function SK(){if(dk)return Xw;dk=1;var i=TK(),o=500;function l(f){var p=i(f,function(b){return w.size===o&&w.clear(),b}),w=p.cache;return p}return Xw=l,Xw}var Qw,hk;function wK(){if(hk)return Qw;hk=1;var i=SK(),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,f=i(function(p){var w=[];return p.charCodeAt(0)===46&&w.push(""),p.replace(o,function(b,g,S,F){w.push(S?F.replace(l,"$1"):g||b)}),w});return Qw=f,Qw}var Jw,pk;function AK(){if(pk)return Jw;pk=1;var i=Jg(),o=vC(),l=Ms(),f=tm(),p=1/0,w=i?i.prototype:void 0,b=w?w.toString:void 0;function g(S){if(typeof S=="string")return S;if(l(S))return o(S,g)+"";if(f(S))return b?b.call(S):"";var F=S+"";return F=="0"&&1/S==-p?"-0":F}return Jw=g,Jw}var eA,gk;function MU(){if(gk)return eA;gk=1;var i=AK();function o(l){return l==null?"":i(l)}return eA=o,eA}var tA,mk;function DU(){if(mk)return tA;mk=1;var i=Ms(),o=IC(),l=wK(),f=MU();function p(w,b){return i(w)?w:o(w,b)?[w]:l(f(w))}return tA=p,tA}var nA,vk;function fE(){if(vk)return nA;vk=1;var i=tm(),o=1/0;function l(f){if(typeof f=="string"||i(f))return f;var p=f+"";return p=="0"&&1/f==-o?"-0":p}return nA=l,nA}var rA,yk;function bC(){if(yk)return rA;yk=1;var i=DU(),o=fE();function l(f,p){p=i(p,f);for(var w=0,b=p.length;f!=null&&w<b;)f=f[o(p[w++])];return w&&w==b?f:void 0}return rA=l,rA}var iA,Ek;function IK(){if(Ek)return iA;Ek=1;var i=bC();function o(l,f,p){var w=l==null?void 0:i(l,f);return w===void 0?p:w}return iA=o,iA}var oA,_k;function bK(){if(_k)return oA;_k=1;function i(o,l){return o!=null&&l in Object(o)}return oA=i,oA}var aA,Tk;function CK(){if(Tk)return aA;Tk=1;var i=DU(),o=EC(),l=Ms(),f=TC(),p=_C(),w=fE();function b(g,S,F){S=i(S,g);for(var R=-1,y=S.length,v=!1;++R<y;){var D=w(S[R]);if(!(v=g!=null&&F(g,D)))break;g=g[D]}return v||++R!=y?v:(y=g==null?0:g.length,!!y&&p(y)&&f(D,y)&&(l(g)||o(g)))}return aA=b,aA}var sA,Sk;function RK(){if(Sk)return sA;Sk=1;var i=bK(),o=CK();function l(f,p){return f!=null&&o(f,p,i)}return sA=l,sA}var uA,wk;function xK(){if(wk)return uA;wk=1;var i=RU(),o=IK(),l=RK(),f=IC(),p=xU(),w=NU(),b=fE(),g=1,S=2;function F(R,y){return f(R)&&p(y)?w(b(R),y):function(v){var D=o(v,R);return D===void 0&&D===y?l(v,R):i(y,D,g|S)}}return uA=F,uA}var lA,Ak;function NK(){if(Ak)return lA;Ak=1;function i(o){return function(l){return l==null?void 0:l[o]}}return lA=i,lA}var cA,Ik;function MK(){if(Ik)return cA;Ik=1;var i=bC();function o(l){return function(f){return i(f,l)}}return cA=o,cA}var fA,bk;function DK(){if(bk)return fA;bk=1;var i=NK(),o=MK(),l=IC(),f=fE();function p(w){return l(w)?i(f(w)):o(w)}return fA=p,fA}var dA,Ck;function CC(){if(Ck)return dA;Ck=1;var i=_K(),o=xK(),l=nm(),f=Ms(),p=DK();function w(b){return typeof b=="function"?b:b==null?l:typeof b=="object"?f(b)?o(b[0],b[1]):i(b):p(b)}return dA=w,dA}var hA,Rk;function PK(){if(Rk)return hA;Rk=1;var i=wU(),o=$7(),l=CC(),f=Ms();function p(w,b){var g=f(w)?i:o;return g(w,l(b,3))}return hA=p,hA}var pA,xk;function OK(){if(xk)return pA;xk=1;function i(o,l,f){var p;return f(o,function(w,b,g){if(l(w,b,g))return p=b,!1}),p}return pA=i,pA}var gA,Nk;function LK(){if(Nk)return gA;Nk=1;var i=OK(),o=wC(),l=CC();function f(p,w){return i(p,l(w,3),o)}return gA=f,gA}var mA,Mk;function kK(){if(Mk)return mA;Mk=1;function i(o){return o&&o.length?o[0]:void 0}return mA=i,mA}var vA,Dk;function FK(){return Dk||(Dk=1,vA=kK()),vA}var yA,Pk;function UK(){if(Pk)return yA;Pk=1;function i(o,l){for(var f=-1,p=o==null?0:o.length;++f<p&&l(o[f],f,o)!==!1;);return o}return yA=i,yA}var EA,Ok;function PU(){if(Ok)return EA;Ok=1;var i=nm();function o(l){return typeof l=="function"?l:i}return EA=o,EA}var _A,Lk;function BK(){if(Lk)return _A;Lk=1;var i=UK(),o=AC(),l=PU(),f=Ms();function p(w,b){var g=f(w)?i:o;return g(w,l(b))}return _A=p,_A}var TA,kk;function jK(){if(kk)return TA;kk=1;var i=wC(),o=PU();function l(f,p){return f&&i(f,o(p))}return TA=l,TA}var SA,Fk;function ZK(){if(Fk)return SA;Fk=1;function i(){}return SA=i,SA}var wA,Uk;function GK(){if(Uk)return wA;Uk=1;var i=AC(),o=rm();function l(f,p){var w=-1,b=o(f)?Array(f.length):[];return i(f,function(g,S,F){b[++w]=p(g,S,F)}),b}return wA=l,wA}var AA,Bk;function qK(){if(Bk)return AA;Bk=1;function i(o,l){var f=o.length;for(o.sort(l);f--;)o[f]=o[f].value;return o}return AA=i,AA}var IA,jk;function HK(){if(jk)return IA;jk=1;var i=tm();function o(l,f){if(l!==f){var p=l!==void 0,w=l===null,b=l===l,g=i(l),S=f!==void 0,F=f===null,R=f===f,y=i(f);if(!F&&!y&&!g&&l>f||g&&S&&R&&!F&&!y||w&&S&&R||!p&&R||!b)return 1;if(!w&&!g&&!y&&l<f||y&&p&&b&&!w&&!g||F&&p&&b||!S&&b||!R)return-1}return 0}return IA=o,IA}var bA,Zk;function KK(){if(Zk)return bA;Zk=1;var i=HK();function o(l,f,p){for(var w=-1,b=l.criteria,g=f.criteria,S=b.length,F=p.length;++w<S;){var R=i(b[w],g[w]);if(R){if(w>=F)return R;var y=p[w];return R*(y=="desc"?-1:1)}}return l.index-f.index}return bA=o,bA}var CA,Gk;function VK(){if(Gk)return CA;Gk=1;var i=vC(),o=bC(),l=CC(),f=GK(),p=qK(),w=yC(),b=KK(),g=nm(),S=Ms();function F(R,y,v){y.length?y=i(y,function(T){return S(T)?function(U){return o(U,T.length===1?T[0]:T)}:T}):y=[g];var D=-1;y=i(y,w(l));var m=f(R,function(T,U,N){var _=i(y,function(I){return I(T)});return{criteria:_,index:++D,value:T}});return p(m,function(T,U){return b(T,U,v)})}return CA=F,CA}var RA,qk;function zK(){if(qk)return RA;qk=1;var i=pC(),o=rm(),l=TC(),f=Sf();function p(w,b,g){if(!f(g))return!1;var S=typeof b;return(S=="number"?o(g)&&l(b,g.length):S=="string"&&b in g)?i(g[b],w):!1}return RA=p,RA}var xA,Hk;function YK(){if(Hk)return xA;Hk=1;var i=TU(),o=VK(),l=SU(),f=zK(),p=l(function(w,b){if(w==null)return[];var g=b.length;return g>1&&f(w,b[0],b[1])?b=[]:g>2&&f(b[0],b[1],b[2])&&(b=[b[0]]),o(w,i(b,1),[])});return xA=p,xA}var NA,Kk;function WK(){if(Kk)return NA;Kk=1;var i=gU(),o=Sf(),l="Expected a function";function f(p,w,b){var g=!0,S=!0;if(typeof p!="function")throw new TypeError(l);return o(b)&&(g="leading"in b?!!b.leading:g,S="trailing"in b?!!b.trailing:S),i(p,w,{leading:g,maxWait:w,trailing:S})}return NA=f,NA}var MA,Vk;function $K(){if(Vk)return MA;Vk=1;var i=MU(),o=0;function l(f){var p=++o;return i(f)+p}return MA=l,MA}(function(i,o){(function(l,f){i.exports=f(gU(),F7(),PK(),LK(),FK(),BK(),jK(),ZK(),YK(),WK(),$K(),pn)})(nu,function(l,f,p,w,b,g,S,F,R,y,v,D){return function(){var m={654:function(U,N,_){var I,C=this&&this.__assign||function(){return C=Object.assign||function(Ie){for(var ne,Fe=1,O=arguments.length;Fe<O;Fe++)for(var M in ne=arguments[Fe])Object.prototype.hasOwnProperty.call(ne,M)&&(Ie[M]=ne[M]);return Ie},C.apply(this,arguments)},j=this&&this.__createBinding||(Object.create?function(Ie,ne,Fe,O){O===void 0&&(O=Fe);var M=Object.getOwnPropertyDescriptor(ne,Fe);M&&!("get"in M?!ne.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return ne[Fe]}}),Object.defineProperty(Ie,O,M)}:function(Ie,ne,Fe,O){O===void 0&&(O=Fe),Ie[O]=ne[Fe]}),Y=this&&this.__setModuleDefault||(Object.create?function(Ie,ne){Object.defineProperty(Ie,"default",{enumerable:!0,value:ne})}:function(Ie,ne){Ie.default=ne}),$=this&&this.__importStar||function(Ie){if(Ie&&Ie.__esModule)return Ie;var ne={};if(Ie!=null)for(var Fe in Ie)Fe!=="default"&&Object.prototype.hasOwnProperty.call(Ie,Fe)&&j(ne,Ie,Fe);return Y(ne,Ie),ne},W=this&&this.__spreadArray||function(Ie,ne,Fe){if(Fe||arguments.length===2)for(var O,M=0,q=ne.length;M<q;M++)!O&&M in ne||(O||(O=Array.prototype.slice.call(ne,0,M)),O[M]=ne[M]);return Ie.concat(O||Array.prototype.slice.call(ne))},ue=this&&this.__importDefault||function(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}};Object.defineProperty(N,"__esModule",{value:!0}),N.doesFocusableExist=N.getCurrentFocusKey=N.updateAllLayouts=N.resume=N.pause=N.navigateByDirection=N.setFocus=N.setKeyMap=N.destroy=N.setThrottle=N.init=N.SpatialNavigation=N.ROOT_FOCUS_KEY=void 0;var x=ue(_(150)),X=ue(_(117)),de=ue(_(747)),oe=ue(_(23)),ve=ue(_(842)),Ce=ue(_(682)),Xe=ue(_(784)),Ae=ue(_(432)),Ze=ue(_(67)),it=ue(_(35)),st=ue(_(119)),Ye=$(_(964)),lt="left",At="right",Oe="up",Qe="down",ct="enter",Qt=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);N.ROOT_FOCUS_KEY="SN:ROOT";var Kt=["#0FF","#FF0","#F0F"],Tt={leading:!0,trailing:!1},Pt=function(){function Ie(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=st.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Qt,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,x.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Ie.getCutoffCoordinate=function(ne,Fe,O,M,q){var K=ne?M.top:q===st.default.LTR?M.left:M.right,pe=ne?M.bottom:q===st.default.LTR?M.right:M.left;return Fe?O?K:pe:O?pe:K},Ie.getRefCorners=function(ne,Fe,O){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(ne){case Oe:var q=Fe?O.bottom:O.top;M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case Qe:q=Fe?O.top:O.bottom,M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case lt:var K=Fe?O.right:O.left;M.a={x:K,y:O.top},M.b={x:K,y:O.bottom};break;case At:K=Fe?O.left:O.right,M.a={x:K,y:O.top},M.b={x:K,y:O.bottom}}return M},Ie.isAdjacentSlice=function(ne,Fe,O){var M=ne.a,q=ne.b,K=Fe.a,pe=Fe.b,ce=O?"x":"y",He=M[ce],_t=q[ce],ot=K[ce],rt=pe[ce],et=.2*(_t-He);return Math.max(0,Math.min(_t,rt)-Math.max(He,ot))>=et},Ie.getPrimaryAxisDistance=function(ne,Fe,O){var M=ne.a,q=Fe.a,K=O?"y":"x";return Math.abs(q[K]-M[K])},Ie.getSecondaryAxisDistance=function(ne,Fe,O){var M=ne.a,q=ne.b,K=Fe.a,pe=Fe.b,ce=O?"x":"y",He=M[ce],_t=q[ce],ot=K[ce],rt=pe[ce],et=[];return et.push(Math.abs(ot-He)),et.push(Math.abs(ot-_t)),et.push(Math.abs(rt-He)),et.push(Math.abs(rt-_t)),Math.min.apply(Math,et)},Ie.prototype.sortSiblingsByPriority=function(ne,Fe,O,M){var q=this,K=O===Qe||O===Oe,pe=Ie.getRefCorners(O,!1,Fe);return(0,Ae.default)(ne,function(ce){var He=Ie.getRefCorners(O,!0,ce.layout),_t=Ie.isAdjacentSlice(pe,He,K),ot=_t?Ie.getPrimaryAxisDistance:Ie.getSecondaryAxisDistance,rt=_t?Ie.getSecondaryAxisDistance:Ie.getPrimaryAxisDistance,et=ot(pe,He,K),ft=rt(pe,He,K),vt=5*et+ft,Et=(vt+1)/(_t?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(ce.focusKey," relative to ").concat(M," is"),et,ft,vt),q.log("smartNavigate","priority for ".concat(ce.focusKey," relative to ").concat(M," is"),Et),q.visualDebugger&&(q.visualDebugger.drawPoint(He.a.x,He.a.y,"yellow",6),q.visualDebugger.drawPoint(He.b.x,He.b.y,"yellow",6)),Et})},Ie.prototype.init=function(ne){var Fe=ne===void 0?{}:ne,O=Fe.debug,M=O!==void 0&&O,q=Fe.visualDebug,K=q!==void 0&&q,pe=Fe.nativeMode,ce=pe!==void 0&&pe,He=Fe.throttle,_t=He===void 0?0:He,ot=Fe.throttleKeypresses,rt=ot!==void 0&&ot,et=Fe.useGetBoundingClientRect,ft=et!==void 0&&et,vt=Fe.shouldFocusDOMNode,Et=vt!==void 0&&vt,Ct=Fe.shouldUseNativeEvents,hn=Ct!==void 0&&Ct,Xt=Fe.rtl,nn=Xt!==void 0&&Xt;this.enabled||(this.enabled=!0,this.nativeMode=ce,this.throttleKeypresses=rt,this.useGetBoundingClientRect=ft,this.shouldFocusDOMNode=Et&&!ce,this.shouldUseNativeEvents=hn,this.writingDirection=nn?st.default.RTL:st.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(_t)&&_t>0&&(this.throttle=_t),this.bindEventHandlers(),K&&(this.visualDebugger=new it.default(this.writingDirection),this.startDrawLayouts())))},Ie.prototype.setThrottle=function(ne){var Fe=ne===void 0?{}:ne,O=Fe.throttle,M=O===void 0?0:O,q=Fe.throttleKeypresses,K=q!==void 0&&q;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},Ie.prototype.startDrawLayouts=function(){var ne=this,Fe=function(){requestAnimationFrame(function(){ne.visualDebugger.clearLayouts(),(0,Xe.default)(ne.focusableComponents,function(O,M){ne.visualDebugger.drawLayout(O.layout,M,O.parentFocusKey)}),Fe()})};Fe()},Ie.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Qt,this.unbindEventHandlers())},Ie.prototype.getEventType=function(ne){return(0,oe.default)(this.getKeyMap(),function(Fe){return Fe.includes(ne)})},Ie.getKeyCode=function(ne){return ne.keyCode||ne.code},Ie.prototype.bindEventHandlers=function(){var ne=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Fe){if(ne.paused!==!0){ne.debug&&(ne.logIndex+=1);var O=Ie.getKeyCode(Fe),M=ne.getEventType(O);if(M){ne.pressedKeys[M]=ne.pressedKeys[M]?ne.pressedKeys[M]+1:1,ne.shouldUseNativeEvents||(Fe.preventDefault(),Fe.stopPropagation());var q={pressedKeys:ne.pressedKeys};M===ct&&ne.focusKey?ne.onEnterPress(q):ne.onArrowPress(M,q)===!1?(ne.log("keyDownEventListener","default navigation prevented"),ne.visualDebugger&&ne.visualDebugger.clear()):ne.onKeyEvent(Fe)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,Ze.default)(this.keyDownEventListener.bind(this),this.throttle,Tt)),this.keyUpEventListener=function(Fe){var O=Ie.getKeyCode(Fe),M=ne.getEventType(O);delete ne.pressedKeys[M],ne.throttle&&!ne.throttleKeypresses&&ne.keyDownEventListenerThrottled.cancel(),M===ct&&ne.focusKey&&ne.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Ie.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var ne=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",ne),this.keyDownEventListener=null}},Ie.prototype.onEnterPress=function(ne){var Fe=this.focusableComponents[this.focusKey];Fe?Fe.focusable?Fe.onEnterPress&&Fe.onEnterPress(ne):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Ie.prototype.onEnterRelease=function(){var ne=this.focusableComponents[this.focusKey];ne?ne.focusable?ne.onEnterRelease&&ne.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Ie.prototype.onArrowPress=function(ne,Fe){var O=this.focusableComponents[this.focusKey];if(O)return O&&O.onArrowPress&&O.onArrowPress(ne,Fe);this.log("onArrowPress","noComponent")},Ie.prototype.navigateByDirection=function(ne,Fe){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var O=[Qe,Oe,lt,At];O.includes(ne)?(this.log("navigateByDirection","direction",ne),this.smartNavigate(ne,null,Fe)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(ne,"`, but you can use only these: "),O)}},Ie.prototype.onKeyEvent=function(ne){this.visualDebugger&&this.visualDebugger.clear();var Fe=Ie.getKeyCode(ne),O=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(Fe)});this.smartNavigate(O,null,{event:ne})},Ie.prototype.smartNavigate=function(ne,Fe,O){var M=this;if(!this.nativeMode){var q=ne===Qe||ne===Oe,K=ne===Qe||(this.writingDirection===st.default.LTR?ne===At:ne===lt);this.log("smartNavigate","direction",ne),this.log("smartNavigate","fromParentFocusKey",Fe),this.log("smartNavigate","this.focusKey",this.focusKey),Fe||(0,Xe.default)(this.focusableComponents,function(hn){hn.layoutUpdated=!1});var pe=this.focusableComponents[Fe||this.focusKey];if(Fe||pe){if(this.log("smartNavigate","currentComponent",pe?pe.focusKey:void 0,pe?pe.node:void 0,pe),pe){this.updateLayout(pe.focusKey);var ce=pe.parentFocusKey,He=pe.focusKey,_t=pe.layout,ot=Ie.getCutoffCoordinate(q,K,!1,_t,this.writingDirection),rt=(0,de.default)(this.focusableComponents,function(hn){if(hn.parentFocusKey===ce&&hn.focusable){M.updateLayout(hn.focusKey);var Xt=Ie.getCutoffCoordinate(q,K,!0,hn.layout,M.writingDirection);return q||M.writingDirection===st.default.LTR?K?Xt>=ot:Xt<=ot:K?Xt<=ot:Xt>=ot}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",ot),this.log("smartNavigate","siblings","".concat(rt.length," elements:"),rt.map(function(hn){return hn.focusKey}).join(", "),rt.map(function(hn){return hn.node}),rt.map(function(hn){return hn}))),this.visualDebugger){var et=Ie.getRefCorners(ne,!1,_t);this.visualDebugger.drawPoint(et.a.x,et.a.y),this.visualDebugger.drawPoint(et.b.x,et.b.y)}var ft=this.sortSiblingsByPriority(rt,_t,ne,He),vt=(0,ve.default)(ft);if(this.log("smartNavigate","nextComponent",vt?vt.focusKey:void 0,vt?vt.node:void 0,vt),vt)this.setFocus(vt.focusKey,O);else{var Et=this.focusableComponents[ce],Ct=Et!=null&&Et.isFocusBoundary?Et.focusBoundaryDirections||[ne]:[];Et&&Ct.includes(ne)||this.smartNavigate(ne,ce,O)}}}else this.setFocus(this.getForcedFocusKey())}},Ie.prototype.saveLastFocusedChildKey=function(ne,Fe){ne&&(this.log("saveLastFocusedChildKey","".concat(ne.focusKey," lastFocusedChildKey set"),Fe),ne.lastFocusedChildKey=Fe)},Ie.prototype.log=function(ne,Fe){for(var O=[],M=2;M<arguments.length;M++)O[M-2]=arguments[M];this.debug&&console.log.apply(console,W(["%c".concat(ne,"%c").concat(Fe),"background: ".concat(Kt[this.logIndex%Kt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],O,!1))},Ie.prototype.getCurrentFocusKey=function(){return this.focusKey},Ie.prototype.getForcedFocusKey=function(){var ne,Fe=(0,de.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),O=this.sortSiblingsByPriority(Fe,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",N.ROOT_FOCUS_KEY);return(ne=(0,ve.default)(O))===null||ne===void 0?void 0:ne.focusKey},Ie.prototype.getNextFocusKey=function(ne){var Fe=this,O=this.focusableComponents[ne];if(!O||this.nativeMode)return ne;var M=(0,de.default)(this.focusableComponents,function(ce){return ce.parentFocusKey===ne&&ce.focusable});if(M.length>0){var q=O.lastFocusedChildKey,K=O.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",K),q&&O.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);M.forEach(function(ce){return Fe.updateLayout(ce.focusKey)});var pe=function(ce,He){var _t=He===st.default.LTR?function(rt){var et=rt.layout;return Math.abs(et.left)+Math.abs(et.top)}:function(rt){var et=rt.layout;return Math.abs(window.innerWidth-et.right)+Math.abs(et.top)},ot=(0,Ae.default)(ce,_t);return(0,ve.default)(ot)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",pe),this.getNextFocusKey(pe)}return this.log("getNextFocusKey","targetFocusKey",ne),ne},Ie.prototype.addFocusable=function(ne){var Fe=ne.focusKey,O=ne.node,M=ne.parentFocusKey,q=ne.onEnterPress,K=ne.onEnterRelease,pe=ne.onArrowPress,ce=ne.onFocus,He=ne.onBlur,_t=ne.saveLastFocusedChild,ot=ne.trackChildren,rt=ne.onUpdateFocus,et=ne.onUpdateHasFocusedChild,ft=ne.preferredChildFocusKey,vt=ne.autoRestoreFocus,Et=ne.forceFocus,Ct=ne.focusable,hn=ne.isFocusBoundary,Xt=ne.focusBoundaryDirections;if(this.focusableComponents[Fe]={focusKey:Fe,node:O,parentFocusKey:M,onEnterPress:q,onEnterRelease:K,onArrowPress:pe,onFocus:ce,onBlur:He,onUpdateFocus:rt,onUpdateHasFocusedChild:et,saveLastFocusedChild:_t,trackChildren:ot,preferredChildFocusKey:ft,focusable:Ct,isFocusBoundary:hn,focusBoundaryDirections:Xt,autoRestoreFocus:vt,forceFocus:Et,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:O},layoutUpdated:!1},O||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Fe]),!this.nativeMode){this.updateLayout(Fe),this.log("addFocusable","Component added: ",this.focusableComponents[Fe]),Fe===this.focusKey&&this.setFocus(ft||Fe);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===Fe){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},Ie.prototype.removeFocusable=function(ne){var Fe=ne.focusKey,O=this.focusableComponents[Fe];if(O){var M=O.parentFocusKey;(0,O.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",O),delete this.focusableComponents[Fe];var q=this.parentsHavingFocusedChild.includes(Fe);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(ce){return ce!==Fe});var K=this.focusableComponents[M],pe=Fe===this.focusKey;if(K&&K.lastFocusedChildKey===Fe&&(K.lastFocusedChildKey=null),this.nativeMode)return;(pe||q)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",pe?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},Ie.prototype.getNodeLayoutByFocusKey=function(ne){var Fe=this.focusableComponents[ne];return Fe?(this.updateLayout(Fe.focusKey),Fe.layout):null},Ie.prototype.setCurrentFocusedKey=function(ne,Fe){if(this.isFocusableComponent(this.focusKey)&&ne!==this.focusKey){var O=this.focusableComponents[this.focusKey];O.onUpdateFocus(!1),O.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onBlur",O)}if(this.focusKey=ne,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Fe),this.log("setCurrentFocusedKey","onFocus",M)}},Ie.prototype.updateParentsHasFocusedChild=function(ne,Fe){for(var O=this,M=[],q=this.focusableComponents[ne];q;){var K=q.parentFocusKey,pe=this.focusableComponents[K];if(pe){var ce=pe.focusKey;M.push(ce)}q=pe}var He=(0,X.default)(this.parentsHavingFocusedChild,M),_t=(0,X.default)(M,this.parentsHavingFocusedChild);(0,Ce.default)(He,function(ot){var rt=O.focusableComponents[ot];rt&&rt.trackChildren&&rt.onUpdateHasFocusedChild(!1),O.onIntermediateNodeBecameBlurred(ot,Fe)}),(0,Ce.default)(_t,function(ot){var rt=O.focusableComponents[ot];rt&&rt.trackChildren&&rt.onUpdateHasFocusedChild(!0),O.onIntermediateNodeBecameFocused(ot,Fe)}),this.parentsHavingFocusedChild=M},Ie.prototype.updateParentsLastFocusedChild=function(ne){for(var Fe=this.focusableComponents[ne];Fe;){var O=Fe.parentFocusKey,M=this.focusableComponents[O];M&&this.saveLastFocusedChildKey(M,Fe.focusKey),Fe=M}},Ie.prototype.getKeyMap=function(){return this.keyMap},Ie.prototype.setKeyMap=function(ne){this.keyMap=C(C({},this.getKeyMap()),function(Fe){var O={};return Object.entries(Fe).forEach(function(M){var q=M[0],K=M[1];O[q]=Array.isArray(K)?K:[K]}),O}(ne))},Ie.prototype.isFocusableComponent=function(ne){return!!this.focusableComponents[ne]},Ie.prototype.isParticipatingFocusableComponent=function(ne){return this.isFocusableComponent(ne)&&this.focusableComponents[ne].focusable},Ie.prototype.onIntermediateNodeBecameFocused=function(ne,Fe){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onFocus(this.getNodeLayoutByFocusKey(ne),Fe)},Ie.prototype.onIntermediateNodeBecameBlurred=function(ne,Fe){this.isParticipatingFocusableComponent(ne)&&this.focusableComponents[ne].onBlur(this.getNodeLayoutByFocusKey(ne),Fe)},Ie.prototype.pause=function(){this.paused=!0},Ie.prototype.resume=function(){this.paused=!1},Ie.prototype.setFocus=function(ne,Fe){if(Fe===void 0&&(Fe={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",ne),ne&&ne!==N.ROOT_FOCUS_KEY||(ne=this.getForcedFocusKey());var O=this.getNextFocusKey(ne);this.log("setFocus","newFocusKey",O),this.setCurrentFocusedKey(O,Fe),this.updateParentsHasFocusedChild(O,Fe),this.updateParentsLastFocusedChild(O)}},Ie.prototype.updateAllLayouts=function(){var ne=this;this.enabled&&!this.nativeMode&&(0,Xe.default)(this.focusableComponents,function(Fe,O){ne.updateLayout(O)})},Ie.prototype.updateLayout=function(ne){var Fe=this.focusableComponents[ne];if(Fe&&!this.nativeMode&&!Fe.layoutUpdated){var O=Fe.node,M=this.useGetBoundingClientRect?(0,Ye.getBoundingClientRect)(O):(0,Ye.default)(O);Fe.layout=C(C({},M),{node:O})}},Ie.prototype.updateFocusable=function(ne,Fe){var O=Fe.node,M=Fe.preferredChildFocusKey,q=Fe.focusable,K=Fe.isFocusBoundary,pe=Fe.focusBoundaryDirections,ce=Fe.onEnterPress,He=Fe.onEnterRelease,_t=Fe.onArrowPress,ot=Fe.onFocus,rt=Fe.onBlur;if(!this.nativeMode){var et=this.focusableComponents[ne];et&&(et.preferredChildFocusKey=M,et.focusable=q,et.isFocusBoundary=K,et.focusBoundaryDirections=pe,et.onEnterPress=ce,et.onEnterRelease=He,et.onArrowPress=_t,et.onFocus=ot,et.onBlur=rt,O&&(et.node=O))}},Ie.prototype.isNativeMode=function(){return this.nativeMode},Ie.prototype.doesFocusableExist=function(ne){return!!this.focusableComponents[ne]},Ie}();N.SpatialNavigation=new Pt,N.init=N.SpatialNavigation.init,N.setThrottle=N.SpatialNavigation.setThrottle,N.destroy=N.SpatialNavigation.destroy,N.setKeyMap=N.SpatialNavigation.setKeyMap,N.setFocus=N.SpatialNavigation.setFocus,N.navigateByDirection=N.SpatialNavigation.navigateByDirection,N.pause=N.SpatialNavigation.pause,N.resume=N.SpatialNavigation.resume,N.updateAllLayouts=N.SpatialNavigation.updateAllLayouts,N.getCurrentFocusKey=N.SpatialNavigation.getCurrentFocusKey,N.doesFocusableExist=N.SpatialNavigation.doesFocusableExist},35:function(U,N,_){var I=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(N,"__esModule",{value:!0});var C=I(_(119)),j=typeof window<"u"&&window.document,Y=j?window.innerWidth:0,$=j?window.innerHeight:0,W=function(){function ue(x){j&&(this.debugCtx=ue.createCanvas("sn-debug","1010",x),this.layoutsCtx=ue.createCanvas("sn-layouts","1000",x),this.writingDirection=x)}return ue.createCanvas=function(x,X,de){var oe=document.querySelector("#".concat(x))||document.createElement("canvas");oe.setAttribute("id",x),oe.setAttribute("dir",de===C.default.LTR?"ltr":"rtl");var ve=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=Y,oe.height=$,ve},ue.prototype.clear=function(){j&&this.debugCtx.clearRect(0,0,Y,$)},ue.prototype.clearLayouts=function(){j&&this.layoutsCtx.clearRect(0,0,Y,$)},ue.prototype.drawLayout=function(x,X,de){if(j){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(x.left,x.top,x.width,x.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===C.default.LTR?"left":"right",ve=x[oe];this.layoutsCtx.fillText(X,ve,x.top+10),this.layoutsCtx.fillText(de,ve,x.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(ve),ve,x.top+40),this.layoutsCtx.fillText("top: ".concat(x.top),ve,x.top+55)}},ue.prototype.drawPoint=function(x,X,de,oe){de===void 0&&(de="blue"),oe===void 0&&(oe=10),j&&(this.debugCtx.strokeStyle=de,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(x-oe/2,X-oe/2,oe,oe))},ue}();N.default=W},119:function(U,N){var _;Object.defineProperty(N,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),N.default=_},607:function(U,N,_){var I=this&&this.__createBinding||(Object.create?function(j,Y,$,W){W===void 0&&(W=$);var ue=Object.getOwnPropertyDescriptor(Y,$);ue&&!("get"in ue?!Y.__esModule:ue.writable||ue.configurable)||(ue={enumerable:!0,get:function(){return Y[$]}}),Object.defineProperty(j,W,ue)}:function(j,Y,$,W){W===void 0&&(W=$),j[W]=Y[$]}),C=this&&this.__exportStar||function(j,Y){for(var $ in j)$==="default"||Object.prototype.hasOwnProperty.call(Y,$)||I(Y,j,$)};Object.defineProperty(N,"__esModule",{value:!0}),C(_(79),N),C(_(445),N),C(_(654),N)},964:function(U,N){Object.defineProperty(N,"__esModule",{value:!0}),N.getBoundingClientRect=void 0;var _=function(I){for(var C=I.offsetParent,j=I.offsetHeight,Y=I.offsetWidth,$=I.offsetLeft,W=I.offsetTop;C&&C.nodeType===1;)$+=C.offsetLeft-C.scrollLeft,W+=C.offsetTop-C.scrollTop,C=C.offsetParent;return{height:j,left:$,top:W,width:Y}};N.default=function(I){var C=I&&I.parentElement;if(I&&C){var j=_(C),Y=_(I),$=Y.height,W=Y.left,ue=Y.top,x=Y.width;return{x:W-j.left,y:ue-j.top,width:x,height:$,left:W,top:ue,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},N.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var C=I.getBoundingClientRect();return{x:C.x,y:C.y,width:C.width,height:C.height,left:C.left,top:C.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(U,N,_){Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusContext=N.FocusContext=void 0;var I=_(156),C=_(654);N.FocusContext=(0,I.createContext)(C.ROOT_FOCUS_KEY),N.FocusContext.displayName="FocusContext",N.useFocusContext=function(){return(0,I.useContext)(N.FocusContext)}},79:function(U,N,_){var I=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusable=void 0;var C=_(156),j=I(_(604)),Y=I(_(461)),$=_(654),W=_(445);N.useFocusable=function(ue){var x=ue===void 0?{}:ue,X=x.focusable,de=X===void 0||X,oe=x.saveLastFocusedChild,ve=oe===void 0||oe,Ce=x.trackChildren,Xe=Ce!==void 0&&Ce,Ae=x.autoRestoreFocus,Ze=Ae===void 0||Ae,it=x.forceFocus,st=it!==void 0&&it,Ye=x.isFocusBoundary,lt=Ye!==void 0&&Ye,At=x.focusBoundaryDirections,Oe=x.focusKey,Qe=x.preferredChildFocusKey,ct=x.onEnterPress,Qt=ct===void 0?j.default:ct,Kt=x.onEnterRelease,Tt=Kt===void 0?j.default:Kt,Pt=x.onArrowPress,Ie=Pt===void 0?function(){return!0}:Pt,ne=x.onFocus,Fe=ne===void 0?j.default:ne,O=x.onBlur,M=O===void 0?j.default:O,q=x.extraProps,K=(0,C.useCallback)(function(Ot){Qt(q,Ot)},[Qt,q]),pe=(0,C.useCallback)(function(){Tt(q)},[Tt,q]),ce=(0,C.useCallback)(function(Ot,Un){return Ie(Ot,q,Un)},[q,Ie]),He=(0,C.useCallback)(function(Ot,Un){Fe(Ot,q,Un)},[q,Fe]),_t=(0,C.useCallback)(function(Ot,Un){M(Ot,q,Un)},[q,M]),ot=(0,C.useRef)(null),rt=(0,C.useState)(!1),et=rt[0],ft=rt[1],vt=(0,C.useState)(!1),Et=vt[0],Ct=vt[1],hn=(0,W.useFocusContext)(),Xt=(0,C.useMemo)(function(){return Oe||(0,Y.default)("sn:focusable-item-")},[Oe]),nn=(0,C.useCallback)(function(Ot){Ot===void 0&&(Ot={}),$.SpatialNavigation.setFocus(Xt,Ot)},[Xt]);return(0,C.useEffect)(function(){var Ot=ot.current;return $.SpatialNavigation.addFocusable({focusKey:Xt,node:Ot,parentFocusKey:hn,preferredChildFocusKey:Qe,onEnterPress:K,onEnterRelease:pe,onArrowPress:ce,onFocus:He,onBlur:_t,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),ft(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Ct(Un)},saveLastFocusedChild:ve,trackChildren:Xe,isFocusBoundary:lt,focusBoundaryDirections:At,autoRestoreFocus:Ze,forceFocus:st,focusable:de}),function(){$.SpatialNavigation.removeFocusable({focusKey:Xt})}},[]),(0,C.useEffect)(function(){var Ot=ot.current;$.SpatialNavigation.updateFocusable(Xt,{node:Ot,preferredChildFocusKey:Qe,focusable:de,isFocusBoundary:lt,focusBoundaryDirections:At,onEnterPress:K,onEnterRelease:pe,onArrowPress:ce,onFocus:He,onBlur:_t})},[Xt,Qe,de,lt,At,K,pe,ce,He,_t]),{ref:ot,focusSelf:nn,focused:et,hasFocusedChild:Et,focusKey:Xt}}},150:function(U){U.exports=l},117:function(U){U.exports=f},747:function(U){U.exports=p},23:function(U){U.exports=w},842:function(U){U.exports=b},682:function(U){U.exports=g},784:function(U){U.exports=S},604:function(U){U.exports=F},432:function(U){U.exports=R},67:function(U){U.exports=y},461:function(U){U.exports=v},156:function(U){U.exports=D}},T={};return function U(N){var _=T[N];if(_!==void 0)return _.exports;var I=T[N]={exports:{}};return m[N].call(I.exports,I,I.exports,U),I.exports}(607)}()})})(hU);var OU=hU.exports;function XK(i){return{all:i=i||new Map,on:function(o,l){var f=i.get(o);f?f.push(l):i.set(o,[l])},off:function(o,l){var f=i.get(o);f&&(l?f.splice(f.indexOf(l)>>>0,1):i.set(o,[]))},emit:function(o,l){var f=i.get(o);f&&f.slice().map(function(p){p(l)}),(f=i.get("*"))&&f.slice().map(function(p){p(o,l)})}}}class Af{constructor(){this.emitter=XK()}emit(o,l){this.emitter.emit(o,l)}on(o,l){var f;(f=this.emitter)==null||f.on(o,l)}once(o,l){var p;const f=w=>{var b;(b=this.emitter)==null||b.off(o,f),l(w)};(p=this.emitter)==null||p.on(o,f)}off(o,l){var f;(f=this.emitter)==null||f.off(o,l)}onAny(o){this.emitter.on("*",o)}offAny(o){this.emitter.off("*",o)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var uf=256,LU=[],zk=256,Ky;for(;uf--;)LU[uf]=(uf+256).toString(16).substring(1);function QK(i){var o=0,l=11;if(!Ky||uf+l>zk*2)for(Ky="",uf=0;o<zk;o++)Ky+=LU[Math.random()*256|0];return Ky.substring(uf,uf+++l)}const Yk={DEVICE_ID:"deviceId"};function Ig(){const i=localStorage.getItem(Yk.DEVICE_ID);if(i)return i;const o=QK();return localStorage.setItem(Yk.DEVICE_ID,o),o}function JK(i){i=[...i].sort((l,f)=>l-f);const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o])/2}var _a=(i=>(i.NEGOTIATE="negotiate",i.NEGOTIATE_TV="negotiate-tv",i.EVENT_STATUS="eventStatus",i.EVENT_META="eventMeta",i.GENERATE="generate",i.CONTENTFUL="contentful",i))(_a||{});class ig extends Error{constructor(o,l,f,p){super(),this._name=o,this._title=l,this._code=p,this._message=f}get toString(){var o,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((o=this._title.toUpperCase())!=null?o:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(o){this._name=o}get message(){return this._message}set message(o){this._message=o}get title(){return this._title}set title(o){this._title=o}get code(){return this._code}set code(o){this._code=o}}var cc=(i=>(i.TIZEN="tizen",i.WEBOS="webos",i.WEBZEROS="web0s",i.WEB="web",i))(cc||{});function RC(){const i=navigator.userAgent.toLowerCase();return i.includes("tizen")?"tizen":i.includes("webos")||i.includes("web0s")?"webos":"web"}const yh=Ig(),eV="https://staging-api.gigset.io",U0="new",tV="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",nV="v203lmr0b15v",xC="setup-device-id",rV="_appContainer_1isul_1",iV="_pageContainer_1isul_53",oV="_input_1isul_67",aV="_ellipsis_1isul_1",sV={appContainer:rV,pageContainer:iV,input:oV,ellipsis:aV};class ff extends Error{constructor(o,l){const f=new.target.prototype;super("".concat(o,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=f}}class NC extends Error{constructor(o="A timeout occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class iu extends Error{constructor(o="An abort occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class uV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=f}}class lV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=f}}class cV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=f}}class Wk extends Error{constructor(o){const l=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class fV extends Error{constructor(o,l){const f=new.target.prototype;super(o),this.innerErrors=l,this.__proto__=f}}class kU{constructor(o,l,f){this.statusCode=o,this.statusText=l,this.content=f}}class dE{get(o,l){return this.send({...l,method:"GET",url:o})}post(o,l){return this.send({...l,method:"POST",url:o})}delete(o,l){return this.send({...l,method:"DELETE",url:o})}getCookieString(o){return""}}var wn;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None"})(wn||(wn={}));class qg{constructor(){}log(o,l){}}qg.instance=new qg;const dV="8.0.0";class po{static isRequired(o,l){if(o==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(o,l){if(!o||o.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(o,l,f){if(!(o in l))throw new Error("Unknown ".concat(f," value: ").concat(o,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Hg(i,o){let l="";return yf(i)?(l="Binary data of length ".concat(i.byteLength),o&&(l+=". Content: '".concat(hV(i),"'"))):typeof i=="string"&&(l="String data of length ".concat(i.length),o&&(l+=". Content: '".concat(i,"'"))),l}function hV(i){const o=new Uint8Array(i);let l="";return o.forEach(f=>{const p=f<16?"0":"";l+="0x".concat(p).concat(f.toString(16)," ")}),l.substr(0,l.length-1)}function yf(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}async function FU(i,o,l,f,p,w){const b={},[g,S]=Eh();b[g]=S,i.log(wn.Trace,"(".concat(o," transport) sending data. ").concat(Hg(p,w.logMessageContent),"."));const F=yf(p)?"arraybuffer":"text",R=await l.post(f,{content:p,headers:{...b,...w.headers},responseType:F,timeout:w.timeout,withCredentials:w.withCredentials});i.log(wn.Trace,"(".concat(o," transport) request complete. Response status: ").concat(R.statusCode,"."))}function pV(i){return i===void 0?new B0(wn.Information):i===null?qg.instance:i.log!==void 0?i:new B0(i)}class gV{constructor(o,l){this._subject=o,this._observer=l}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class B0{constructor(o){this._minLevel=o,this.out=console}log(o,l){if(o>=this._minLevel){const f="[".concat(new Date().toISOString(),"] ").concat(wn[o],": ").concat(l);switch(o){case wn.Critical:case wn.Error:this.out.error(f);break;case wn.Warning:this.out.warn(f);break;case wn.Information:this.out.info(f);break;default:this.out.log(f);break}}}}function Eh(){let i="X-SignalR-User-Agent";return Hi.isNode&&(i="User-Agent"),[i,mV(dV,vV(),EV(),yV())]}function mV(i,o,l,f){let p="Microsoft SignalR/";const w=i.split(".");return p+="".concat(w[0],".").concat(w[1]),p+=" (".concat(i,"; "),o&&o!==""?p+="".concat(o,"; "):p+="Unknown OS; ",p+="".concat(l),f?p+="; ".concat(f):p+="; Unknown Runtime Version",p+=")",p}function vV(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function yV(){if(Hi.isNode)return process.versions.node}function EV(){return Hi.isNode?"NodeJS":"Browser"}function $k(i){return i.stack?i.stack:i.message?i.message:"".concat(i)}function _V(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function TV(i){return typeof fetch>"u"||Hi.isNode?(i._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?i._fetchType=require("node-fetch"):i._fetchType=fetch,i._fetchType=require("fetch-cookie")(i._fetchType,i._jar),!0):!1}function SV(i){return typeof AbortController>"u"?(i._abortControllerType=require("abort-controller"),!0):!1}function wV(){return require("ws")}function AV(){return require("eventsource")}class IV extends dE{constructor(o){super(),this._logger=o;const l={_fetchType:void 0,_jar:void 0};TV(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(_V()),this._abortControllerType=AbortController;const f={_abortControllerType:this._abortControllerType};SV(f)&&(this._abortControllerType=f._abortControllerType)}async send(o){if(o.abortSignal&&o.abortSignal.aborted)throw new iu;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const l=new this._abortControllerType;let f;o.abortSignal&&(o.abortSignal.onabort=()=>{l.abort(),f=new iu});let p=null;if(o.timeout){const S=o.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),f=new NC},S)}o.content===""&&(o.content=void 0),o.content&&(o.headers=o.headers||{},yf(o.content)?o.headers["Content-Type"]="application/octet-stream":o.headers["Content-Type"]="text/plain;charset=UTF-8");let w;try{w=await this._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:o.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(S){throw f||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(S,".")),S)}finally{p&&clearTimeout(p),o.abortSignal&&(o.abortSignal.onabort=null)}if(!w.ok){const S=await Xk(w,"text");throw new ff(S||w.statusText,w.status)}const g=await Xk(w,o.responseType);return new kU(w.status,w.statusText,g)}getCookieString(o){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(o,(f,p)=>l=p.join("; ")),l}}function Xk(i,o){let l;switch(o){case"arraybuffer":l=i.arrayBuffer();break;case"text":l=i.text();break;case"blob":case"document":case"json":throw new Error("".concat(o," is not supported."));default:l=i.text();break}return l}class bV extends dE{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new iu):o.method?o.url?new Promise((l,f)=>{const p=new XMLHttpRequest;p.open(o.method,o.url,!0),p.withCredentials=o.withCredentials===void 0?!0:o.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.content===""&&(o.content=void 0),o.content&&(yf(o.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const w=o.headers;w&&Object.keys(w).forEach(b=>{p.setRequestHeader(b,w[b])}),o.responseType&&(p.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{p.abort(),f(new iu)}),o.timeout&&(p.timeout=o.timeout),p.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new kU(p.status,p.statusText,p.response||p.responseText)):f(new ff(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),f(new ff(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),f(new NC)},p.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class CV extends dE{constructor(o){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new IV(o);else if(typeof XMLHttpRequest<"u")this._httpClient=new bV(o);else throw new Error("No usable HttpClient found.")}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new iu):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}class cs{static write(o){return"".concat(o).concat(cs.RecordSeparator)}static parse(o){if(o[o.length-1]!==cs.RecordSeparator)throw new Error("Message is incomplete.");const l=o.split(cs.RecordSeparator);return l.pop(),l}}cs.RecordSeparatorCode=30;cs.RecordSeparator=String.fromCharCode(cs.RecordSeparatorCode);class RV{writeHandshakeRequest(o){return cs.write(JSON.stringify(o))}parseHandshakeResponse(o){let l,f;if(yf(o)){const g=new Uint8Array(o),S=g.indexOf(cs.RecordSeparatorCode);if(S===-1)throw new Error("Message is incomplete.");const F=S+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,F))),f=g.byteLength>F?g.slice(F).buffer:null}else{const g=o,S=g.indexOf(cs.RecordSeparator);if(S===-1)throw new Error("Message is incomplete.");const F=S+1;l=g.substring(0,F),f=g.length>F?g.substring(F):null}const p=cs.parse(l),w=JSON.parse(p[0]);if(w.type)throw new Error("Expected a handshake response from the server.");return[f,w]}}var Ar;(function(i){i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence"})(Ar||(Ar={}));class xV{constructor(){this.observers=[]}next(o){for(const l of this.observers)l.next(o)}error(o){for(const l of this.observers)l.error&&l.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new gV(this,o)}}class NV{constructor(o,l,f){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=l,this._bufferSize=f}async _send(o){const l=this._protocol.writeMessage(o);let f=Promise.resolve();if(this._isInvocationMessage(o)){this._totalMessageCount++;let p=()=>{},w=()=>{};yf(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(f=new Promise((b,g)=>{p=b,w=g})),this._messages.push(new MV(l,this._totalMessageCount,p,w))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await f}_ack(o){let l=-1;for(let f=0;f<this._messages.length;f++){const p=this._messages[f];if(p._id<=o.sequenceId)l=f,yf(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(o){if(o.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const o=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:o}));const l=this._messages;for(const f of l)await this._connection.send(f._message);this._reconnectInProgress=!1}_dispose(o){o!=null||(o=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(o)}_isInvocationMessage(o){switch(o.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(o){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class MV{constructor(o,l,f,p){this._message=o,this._id=l,this._resolver=f,this._rejector=p}}const DV=30*1e3,PV=15*1e3,OV=1e5;var Fi;(function(i){i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting"})(Fi||(Fi={}));class MC{static create(o,l,f,p,w,b,g){return new MC(o,l,f,p,w,b,g)}constructor(o,l,f,p,w,b,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},po.isRequired(o,"connection"),po.isRequired(l,"logger"),po.isRequired(f,"protocol"),this.serverTimeoutInMilliseconds=w!=null?w:DV,this.keepAliveIntervalInMilliseconds=b!=null?b:PV,this._statefulReconnectBufferSize=g!=null?g:OV,this._logger=l,this._protocol=f,this.connection=o,this._reconnectPolicy=p,this._handshakeProtocol=new RV,this.connection.onreceive=S=>this._processIncomingData(S),this.connection.onclose=S=>this._connectionClosed(S),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(o){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(o,"'.")),Promise.reject(o)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const o=new Promise((l,f)=>{this._handshakeResolver=l,this._handshakeRejecter=f});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const f={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(f)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await o,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new NV(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const o=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await o}catch(l){}}_stopInternal(o){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(o,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new iu("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(o){}}stream(o,...l){const[f,p]=this._replaceStreamingParams(l),w=this._createStreamInvocation(o,l,p);let b;const g=new xV;return g.cancelCallback=()=>{const S=this._createCancelInvocation(w.invocationId);return delete this._callbacks[w.invocationId],b.then(()=>this._sendWithProtocol(S))},this._callbacks[w.invocationId]=(S,F)=>{if(F){g.error(F);return}else S&&(S.type===Ar.Completion?S.error?g.error(new Error(S.error)):g.complete():g.next(S.item))},b=this._sendWithProtocol(w).catch(S=>{g.error(S),delete this._callbacks[w.invocationId]}),this._launchStreams(f,b),g}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...l){const[f,p]=this._replaceStreamingParams(l),w=this._sendWithProtocol(this._createInvocation(o,l,!0,p));return this._launchStreams(f,w),w}invoke(o,...l){const[f,p]=this._replaceStreamingParams(l),w=this._createInvocation(o,l,!1,p);return new Promise((g,S)=>{this._callbacks[w.invocationId]=(R,y)=>{if(y){S(y);return}else R&&(R.type===Ar.Completion?R.error?S(new Error(R.error)):g(R.result):S(new Error("Unexpected message type: ".concat(R.type))))};const F=this._sendWithProtocol(w).catch(R=>{S(R),delete this._callbacks[w.invocationId]});this._launchStreams(f,F)})}on(o,l){!o||!l||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),this._methods[o].indexOf(l)===-1&&this._methods[o].push(l))}off(o,l){if(!o)return;o=o.toLowerCase();const f=this._methods[o];if(f)if(l){const p=f.indexOf(l);p!==-1&&(f.splice(p,1),f.length===0&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const l=this._protocol.parseMessages(o,this._logger);for(const f of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(f)))switch(f.type){case Ar.Invocation:this._invokeClientMethod(f);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[f.invocationId];if(p){f.type===Ar.Completion&&delete this._callbacks[f.invocationId];try{p(f)}catch(w){this._logger.log(wn.Error,"Stream callback threw error: ".concat($k(w)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=f.error?new Error("Server returned an error on close: "+f.error):void 0;f.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(f);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(f);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(f.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let l,f;try{[f,l]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(p){const w="Error parsing handshake response: "+p;this._logger.log(wn.Error,w);const b=new Error(w);throw this._handshakeRejecter(b),b}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const w=new Error(p);throw this._handshakeRejecter(w),w}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),f}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let o=this._nextKeepAlive-new Date().getTime();o<0&&(o=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(o){const l=o.target.toLowerCase(),f=this._methods[l];if(!f){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),o.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)));return}const p=f.slice(),w=!!o.invocationId;let b,g,S;for(const F of p)try{const R=b;b=await F.apply(this,o.arguments),w&&b&&R&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),S=this._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),g=void 0}catch(R){g=R,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(R,"'."))}S?await this._sendWithProtocol(S):w?(g?S=this._createCompletionMessage(o.invocationId,"".concat(g),null):b!==void 0?S=this._createCompletionMessage(o.invocationId,null,b):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),S=this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(S)):b&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(o){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(o,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||o||new iu("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(o):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===Fi.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o!=null?o:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[o]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(o,"' threw error '").concat(l,"'."))}}}async _reconnect(o){const l=Date.now();let f=0,p=o!==void 0?o:new Error("Attempting to reconnect due to a unknown error."),w=this._getNextRetryDelay(f++,0,p);if(w===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(o);return}if(this._connectionState=Fi.Reconnecting,o?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(b=>b.apply(this,[o]))}catch(b){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(o,"' threw error '").concat(b,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;w!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(f," will start in ").concat(w," ms.")),await new Promise(b=>{this._reconnectDelayHandle=setTimeout(b,w)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(b=>b.apply(this,[this.connection.connectionId]))}catch(b){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(b,"'."))}return}catch(b){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(b,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=b instanceof Error?b:new Error(b.toString()),w=this._getNextRetryDelay(f++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(f," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(o,l,f){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:o,retryReason:f})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(o,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(o){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(f=>{const p=l[f];try{p(null,o)}catch(w){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(o,"' threw error: ").concat($k(w)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,l,f,p){if(f)return p.length!==0?{arguments:l,streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,target:o,type:Ar.Invocation};{const w=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:w.toString(),streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,invocationId:w.toString(),target:o,type:Ar.Invocation}}}_launchStreams(o,l){if(o.length!==0){l||(l=Promise.resolve());for(const f in o)o[f].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f)))},error:p=>{let w;p instanceof Error?w=p.message:p&&p.toString?w=p.toString():w="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(f,w)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(f,p)))}})}}_replaceStreamingParams(o){const l=[],f=[];for(let p=0;p<o.length;p++){const w=o[p];if(this._isObservable(w)){const b=this._invocationId;this._invocationId++,l[b]=w,f.push(b.toString()),o.splice(p,1)}}return[l,f]}_isObservable(o){return o&&o.subscribe&&typeof o.subscribe=="function"}_createStreamInvocation(o,l,f){const p=this._invocationId;return this._invocationId++,f.length!==0?{arguments:l,invocationId:p.toString(),streamIds:f,target:o,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:o,type:Ar.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:Ar.CancelInvocation}}_createStreamItemMessage(o,l){return{invocationId:o,item:l,type:Ar.StreamItem}}_createCompletionMessage(o,l,f){return l?{error:l,invocationId:o,type:Ar.Completion}:{invocationId:o,result:f,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const LV=[0,2e3,1e4,3e4,null];class Qk{constructor(o){this._retryDelays=o!==void 0?[...o,null]:LV}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}class df{}df.Authorization="Authorization";df.Cookie="Cookie";class kV extends dE{constructor(o,l){super(),this._innerClient=o,this._accessTokenFactory=l}async send(o){let l=!0;this._accessTokenFactory&&(!this._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(o);const f=await this._innerClient.send(o);return l&&f.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(o),await this._innerClient.send(o)):f}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[df.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&o.headers[df.Authorization]&&delete o.headers[df.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}var uo;(function(i){i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling"})(uo||(uo={}));var Qo;(function(i){i[i.Text=1]="Text",i[i.Binary=2]="Binary"})(Qo||(Qo={}));let FV=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Jk{get pollAborted(){return this._pollAbort.aborted}constructor(o,l,f){this._httpClient=o,this._logger=l,this._pollAbort=new FV,this._options=f,this._running=!1,this.onreceive=null,this.onclose=null}async connect(o,l){if(po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._url=o,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===Qo.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[f,p]=Eh(),w={[f]:p,...this._options.headers},b={abortSignal:this._pollAbort.signal,headers:w,timeout:1e5,withCredentials:this._options.withCredentials};l===Qo.Binary&&(b.responseType="arraybuffer");const g="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const S=await this._httpClient.get(g,b);S.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(S.statusCode,".")),this._closeError=new ff(S.statusText||"",S.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,b)}async _poll(o,l){try{for(;this._running;)try{const f="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(f,"."));const p=await this._httpClient.get(f,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new ff(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(Hg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(f){this._running?f instanceof NC?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=f,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(f.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(o){return this._running?FU(this._logger,"LongPolling",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const o={},[l,f]=Eh();o[l]=f;const p={headers:{...o,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let w;try{await this._httpClient.delete(this._url,p)}catch(b){w=b}w?w instanceof ff&&(w.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(w))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(wn.Trace,o),this.onclose(this._closeError)}}}class UV{constructor(o,l,f,p){this._httpClient=o,this._accessToken=l,this._logger=f,this._options=p,this.onreceive=null,this.onclose=null}async connect(o,l){return po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=o,this._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((f,p)=>{let w=!1;if(l!==Qo.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let b;if(Hi.isBrowser||Hi.isWebWorker)b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(o),S={};S.Cookie=g;const[F,R]=Eh();S[F]=R,b=new this._options.EventSource(o,{withCredentials:this._options.withCredentials,headers:{...S,...this._options.headers}})}try{b.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(Hg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(S){this._close(S);return}},b.onerror=g=>{w?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},b.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=b,w=!0,f()}}catch(g){p(g);return}})}async send(o){return this._eventSource?FU(this._logger,"SSE",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class BV{constructor(o,l,f,p,w,b){this._logger=f,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=w,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=b}async connect(o,l){po.isRequired(o,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let f;return this._accessTokenFactory&&(f=await this._accessTokenFactory()),new Promise((p,w)=>{o=o.replace(/^http/,"ws");let b;const g=this._httpClient.getCookieString(o);let S=!1;if(Hi.isNode||Hi.isReactNative){const F={},[R,y]=Eh();F[R]=y,f&&(F[df.Authorization]="Bearer ".concat(f)),g&&(F[df.Cookie]=g),b=new this._webSocketConstructor(o,void 0,{headers:{...F,...this._headers}})}else f&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(f)));b||(b=new this._webSocketConstructor(o)),l===Qo.Binary&&(b.binaryType="arraybuffer"),b.onopen=F=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(o,".")),this._webSocket=b,S=!0,p()},b.onerror=F=>{let R=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?R=F.error:R="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(R,"."))},b.onmessage=F=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(Hg(F.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(F.data)}catch(R){this._close(R);return}},b.onclose=F=>{if(S)this._close(F);else{let R=null;typeof ErrorEvent<"u"&&F instanceof ErrorEvent?R=F.error:R="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",w(new Error(R))}}})}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(Hg(o,this._logMessageContent),".")),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(o)&&(o.wasClean===!1||o.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(o.code," (").concat(o.reason||"no reason given",")."))):o instanceof Error?this.onclose(o):this.onclose())}_isCloseEvent(o){return o&&typeof o.wasClean=="boolean"&&typeof o.code=="number"}}const e3=100;class jV{constructor(o,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,po.isRequired(o,"url"),this._logger=pV(l.logger),this.baseUrl=this._resolveUrl(o),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let f=null,p=null;Hi.isNode&&typeof require<"u"&&(f=wV(),p=AV()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&f&&(l.WebSocket=f),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new kV(l.httpClient||new CV(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(o){if(o=o||Qo.Binary,po.isIn(o,Qo,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat(Qo[o],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(o),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new iu(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new iu(l))}this._connectionStarted=!0}send(o){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new DC(this.transport)),this._sendQueue.send(o))}async stop(o){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(o),await this._stopPromise}async _stopInternal(o){this._stopError=o;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(o){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===uo.WebSockets)this.transport=this._constructTransport(uo.WebSockets),await this._startTransport(l,o);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let f=null,p=0;do{if(f=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new iu("The connection was stopped during negotiation.");if(f.error)throw new Error(f.error);if(f.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(f.url&&(l=f.url),f.accessToken){const w=f.accessToken;this._accessTokenFactory=()=>w,this._httpClient._accessToken=w,this._httpClient._accessTokenFactory=void 0}p++}while(f.url&&p<e3);if(p===e3&&f.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,f,o)}this.transport instanceof Jk&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(f){return this._logger.log(wn.Error,"Failed to start the connection: "+f),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(f)}}async _getNegotiationResponse(o){const l={},[f,p]=Eh();l[f]=p;const w=this._resolveNegotiateUrl(o);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(w,"."));try{const b=await this._httpClient.post(w,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(b.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(b.statusCode,"'")));const g=JSON.parse(b.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Wk("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(b){let g="Failed to complete negotiation with the server: "+b;return b instanceof ff&&b.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new Wk(g))}}_createConnectUrl(o,l){return l?o+(o.indexOf("?")===-1?"?":"&")+"id=".concat(l):o}async _createTransport(o,l,f,p){let w=this._createConnectUrl(o,f.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(w,p),this.connectionId=f.connectionId;return}const b=[],g=f.availableTransports||[];let S=f;for(const F of g){const R=this._resolveTransportOrError(F,l,p,(S==null?void 0:S.useStatefulReconnect)===!0);if(R instanceof Error)b.push("".concat(F.transport," failed:")),b.push(R);else if(this._isITransport(R)){if(this.transport=R,!S){try{S=await this._getNegotiationResponse(o)}catch(y){return Promise.reject(y)}w=this._createConnectUrl(o,S.connectionToken)}try{await this._startTransport(w,p),this.connectionId=S.connectionId;return}catch(y){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(F.transport,"': ").concat(y)),S=void 0,b.push(new cV("".concat(F.transport," failed: ").concat(y),uo[F.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,v),Promise.reject(new iu(v))}}}}return b.length>0?Promise.reject(new fV("Unable to connect to the server with any of the available transports. ".concat(b.join(" ")),b)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(o){switch(o){case uo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new BV(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case uo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new UV(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case uo.LongPolling:return new Jk(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(o,"."))}}_startTransport(o,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async f=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(o,l),await this.features.resend()}catch(w){p=!0}else{this._stopConnection(f);return}p&&this._stopConnection(f)}:this.transport.onclose=f=>this._stopConnection(f),this.transport.connect(o,l)}_resolveTransportOrError(o,l,f,p){const w=uo[o.transport];if(w==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(o.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(o.transport,"' because it is not supported by this client."));if(ZV(l,w))if(o.transferFormats.map(g=>Qo[g]).indexOf(f)>=0){if(w===uo.WebSockets&&!this._options.WebSocket||w===uo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it is not supported in your environment.'")),new uV("'".concat(uo[w],"' is not supported in your environment."),w);this._logger.log(wn.Debug,"Selecting transport '".concat(uo[w],"'."));try{return this.features.reconnect=w===uo.WebSockets?p:void 0,this._constructTransport(w)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it does not support the requested transfer format '").concat(Qo[f],"'.")),new Error("'".concat(uo[w],"' does not support ").concat(Qo[f],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it was disabled by the client.")),new lV("'".concat(uo[w],"' is disabled by the client."),w)}_isITransport(o){return o&&typeof o=="object"&&"connect"in o}_stopConnection(o){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(o,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(o,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),o?this._logger.log(wn.Error,"Connection disconnected with error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(o,") threw error '").concat(l,"'."))}}}_resolveUrl(o){if(o.lastIndexOf("https://",0)===0||o.lastIndexOf("http://",0)===0)return o;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(o,"'."));const l=window.document.createElement("a");return l.href=o,this._logger.log(wn.Information,"Normalizing '".concat(o,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(o){const l=new URL(o);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const f=new URLSearchParams(l.searchParams);return f.has("negotiateVersion")||f.append("negotiateVersion",this._negotiateVersion.toString()),f.has("useStatefulReconnect")?f.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&f.append("useStatefulReconnect","true"),l.search=f.toString(),l.toString()}}function ZV(i,o){return!i||(o&i)!==0}class DC{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new Vy,this._transportResult=new Vy,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new Vy),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof o));this._buffer.push(o),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Vy;const o=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):DC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),o.resolve()}catch(f){o.reject(f)}}}static _concatBuffers(o){const l=o.map(w=>w.byteLength).reduce((w,b)=>w+b),f=new Uint8Array(l);let p=0;for(const w of o)f.set(new Uint8Array(w),p),p+=w.byteLength;return f.buffer}}class Vy{constructor(){this.promise=new Promise((o,l)=>[this._resolver,this._rejecter]=[o,l])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}const GV="json";class qV{constructor(){this.name=GV,this.version=2,this.transferFormat=Qo.Text}parseMessages(o,l){if(typeof o!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];l===null&&(l=qg.instance);const f=cs.parse(o),p=[];for(const w of f){const b=JSON.parse(w);if(typeof b.type!="number")throw new Error("Invalid payload.");switch(b.type){case Ar.Invocation:this._isInvocationMessage(b);break;case Ar.StreamItem:this._isStreamItemMessage(b);break;case Ar.Completion:this._isCompletionMessage(b);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(b);break;case Ar.Sequence:this._isSequenceMessage(b);break;default:l.log(wn.Information,"Unknown message type '"+b.type+"' ignored.");continue}p.push(b)}return p}writeMessage(o){return cs.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),o.invocationId!==void 0&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),o.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,l){if(typeof o!="string"||o==="")throw new Error(l)}}const HV={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function KV(i){const o=HV[i.toLowerCase()];if(typeof o<"u")return o;throw new Error("Unknown log level: ".concat(i))}class t3{configureLogging(o){if(po.isRequired(o,"logging"),VV(o))this.logger=o;else if(typeof o=="string"){const l=KV(o);this.logger=new B0(l)}else this.logger=new B0(o);return this}withUrl(o,l){return po.isRequired(o,"url"),po.isNotEmpty(o,"url"),this.url=o,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(o){return po.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new Qk(o):this.reconnectPolicy=o:this.reconnectPolicy=new Qk,this}withServerTimeout(o){return po.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return po.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o==null?void 0:o.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(o.logger===void 0&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new jV(this.url,o);return MC.create(l,this.logger||qg.instance,this.protocol||new qV,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function VV(i){return i.log!==void 0}class zV extends Af{constructor(o){var l;super(),this.options=o,this.hubConnection=o.hubConnection,this.updateIntervalFrequency=(l=o.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const o=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-o.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const o=this,l=12,f=1e4,p=20;let w;return await new Promise((b,g)=>{var T;const S=[];let F=0,R,y;function v(){var U;y=Date.now(),(U=o.hubConnection)==null||U.invoke("echo"),R=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},f)}function D(U){w=U,clearTimeout(R),S.push(Date.now()-y),F++,F<l?setTimeout(v,p):m()}(T=o.hubConnection)==null||T.on("echo",D);function m(){var N;if((N=o.hubConnection)==null||N.off("echo",D),w===void 0){g(new Error("Server timestamp is undefined"));return}let U;o.options.roundtripCalcStrategy==="mean"?U=S.reduce((_,I)=>_+I)/S.length:U=JK(S),b(new Date(w+U/2))}v()})}destroy(){clearTimeout(this.timeoutInstance)}}const Xs={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},nb={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class YV extends Af{constructor({deviceId:o,debug:l}){super(),this.hubConnection=null,this.globalHubConnection=null,this.connected=!1,this.serverTimeService=null,this.state=nb.IDLE,this.deviceId=o,this.debugLogging=l!=null?l:!1}setupTimeService(){this.serverTimeService=new zV({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",o=>{this.emit("serverTimeOffsetUpdate",o)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var o;console.log("SignalR: disconnect",Xs.CLIENT_DISCONNECT,{deviceId:this.deviceId}),this.connected=!1,await((o=this.hubConnection)==null?void 0:o.invoke(Xs.CLIENT_DISCONNECT))}globalDisconnect(){var o;console.log("Disconnecting global signalR...",this.deviceId),(o=this.globalHubConnection)==null||o.invoke(Xs.CLIENT_DISCONNECT)}connect({url:o,accessToken:l,groupName:f}){var p;this.groupName=f,this.hubConnection=new t3().withUrl(o,{accessTokenFactory:()=>l,transport:uo.WebSockets}).configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(p=this.hubConnection)==null||p.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.connected=!0,this.join()}).catch(w=>{console.error("Connection failed:",w)})}async globalConnect({url:o,accessToken:l}){return new Promise((f,p)=>{this.globalHubConnection=new t3().withUrl(o,{accessTokenFactory:()=>l,transport:uo.WebSockets}).build(),this.globalHubConnection.start().catch(w=>{console.error("Global signalR connection failed:",w),p()}),this.globalHubConnection.on(Xs.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:w,ticketCode:b})=>{localStorage.setItem("ticketCode",b),f({ticketCode:b,scanTvDeviceId:w})})})}connectEventHandlers(){var o,l,f,p,w,b;(o=this.hubConnection)==null||o.on(Xs.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on(Xs.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.on(Xs.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on(Xs.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(w=this.hubConnection)==null||w.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(b=this.hubConnection)==null||b.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var o,l,f;(o=this.hubConnection)==null||o.off(Xs.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off(Xs.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(f=this.hubConnection)==null||f.off(Xs.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),super.destroy()}onReceiveGroupCommand(o){var l,f,p,w,b;switch(console.log("onReceiveGroupCommand",o),o.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(o.value.startDate)}),((l=o.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(f=o.value.rateClockState)==null?void 0:f.reference,start:(p=o.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(w=o.value.rateClockState)==null?void 0:w.reference,start:(b=o.value.rateClockState)==null?void 0:b.start});break;case"cast":this.emit("cast",{index:o.value});break;case"prepareCast":this.emit("prepareCast",{index:o.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(o){switch(console.log("onReceiveGlobalCommand",o),o.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(o){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[o]}))}onStateUpdate(o){switch(this.state=o.state.$type,o.state.$type){case nb.CONNECTED_STATE:if(!o.state.sessionId)return;this.emit("connected",{sessionId:o.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(o){console.log("SetupStatusUpdate: ",o),this.emit("setupStatusUpdate",{deviceLists:o})}}async function Ah(i,o,l){var f;try{const p=await fetch(i,o);switch(p.status){case 401:throw new ig(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new ig(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const w=await p.json();if(!p.ok)throw new ig(l==null?void 0:l.name,(f=w.sys)==null?void 0:f.id,w.message,p.status);return w}catch(p){throw p instanceof ig?p:new ig(l.name,"Network Error",l.message||"Could not make the request")}}var rb={exports:{}};(function(i,o){(function(l,f){var p="1.0.38",w="",b="?",g="function",S="undefined",F="object",R="string",y="major",v="model",D="name",m="type",T="vendor",U="version",N="architecture",_="console",I="mobile",C="tablet",j="smarttv",Y="wearable",$="embedded",W=500,ue="Amazon",x="Apple",X="ASUS",de="BlackBerry",oe="Browser",ve="Chrome",Ce="Edge",Xe="Firefox",Ae="Google",Ze="Huawei",it="LG",st="Microsoft",Ye="Motorola",lt="Opera",At="Samsung",Oe="Sharp",Qe="Sony",ct="Xiaomi",Qt="Zebra",Kt="Facebook",Tt="Chromium OS",Pt="Mac OS",Ie=function(ft,vt){var Et={};for(var Ct in ft)vt[Ct]&&vt[Ct].length%2===0?Et[Ct]=vt[Ct].concat(ft[Ct]):Et[Ct]=ft[Ct];return Et},ne=function(ft){for(var vt={},Et=0;Et<ft.length;Et++)vt[ft[Et].toUpperCase()]=ft[Et];return vt},Fe=function(ft,vt){return typeof ft===R?O(vt).indexOf(O(ft))!==-1:!1},O=function(ft){return ft.toLowerCase()},M=function(ft){return typeof ft===R?ft.replace(/[^\d\.]/g,w).split(".")[0]:f},q=function(ft,vt){if(typeof ft===R)return ft=ft.replace(/^\s\s*/,w),typeof vt===S?ft:ft.substring(0,W)},K=function(ft,vt){for(var Et=0,Ct,hn,Xt,nn,Ot,Un;Et<vt.length&&!Ot;){var gr=vt[Et],Pr=vt[Et+1];for(Ct=hn=0;Ct<gr.length&&!Ot&&gr[Ct];)if(Ot=gr[Ct++].exec(ft),Ot)for(Xt=0;Xt<Pr.length;Xt++)Un=Ot[++hn],nn=Pr[Xt],typeof nn===F&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):f:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):f:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):f):this[nn]=Un||f;Et+=2}},pe=function(ft,vt){for(var Et in vt)if(typeof vt[Et]===F&&vt[Et].length>0){for(var Ct=0;Ct<vt[Et].length;Ct++)if(Fe(vt[Et][Ct],ft))return Et===b?f:Et}else if(Fe(vt[Et],ft))return Et===b?f:Et;return ft},ce={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_t={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[D,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[D,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[D,U],[/opios[\/ ]+([\w\.]+)/i],[U,[D,lt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[U,[D,lt+" GX"]],[/\bopr\/([\w\.]+)/i],[U,[D,lt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[U,[D,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[D,U],[/\bddg\/([\w\.]+)/i],[U,[D,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[D,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[U,[D,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[D,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[D,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[D,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[U,[D,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[D,/(.+)/,"$1 Secure "+oe],U],[/\bfocus\/([\w\.]+)/i],[U,[D,Xe+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[D,lt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[D,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[D,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[D,lt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[D,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[U,[D,Xe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[D,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[D,/(.+)/,"$1 "+oe],U],[/samsungbrowser\/([\w\.]+)/i],[U,[D,At+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[D,/_/g," "],U],[/metasr[\/ ]?([\d\.]+)/i],[U,[D,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[D,"Sogou Mobile"],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[D,U],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[D],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[D,Kt],U],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[D,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[D,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[D,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[D,ve+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[D,ve+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[D,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[D,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[D,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,D],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[D,[U,pe,ce]],[/(webkit|khtml)\/([\w\.]+)/i],[D,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[D,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[D,Xe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[D,U],[/(cobalt)\/([\w\.]+)/i],[D,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[N,"amd64"]],[/(ia32(?=;))/i],[[N,O]],[/((?:i[346]|x)86)[;\)]/i],[[N,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[N,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[N,"armhf"]],[/windows (ce|mobile); ppc;/i],[[N,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[N,/ower/,w,O]],[/(sun4\w)[;\)]/i],[[N,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[N,O]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[T,At],[m,C]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[T,At],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[T,x],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[T,x],[m,C]],[/(macintosh);/i],[v,[T,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[T,Oe],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[T,Ze],[m,C]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[T,Ze],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[T,ct],[m,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[v,[T,"OPPO"],[m,C]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[T,Ye],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[T,Ye],[m,C]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[T,it],[m,C]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[T,it],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[T,"Lenovo"],[m,C]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[v,[T,Ae],[m,C]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[T,Ae],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[T,Qe],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[T,Qe],[m,C]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[T,ue],[m,C]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[T,ue],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[v,T,[m,C]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[T,de],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[T,X],[m,C]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[T,X],[m,I]],[/(nexus 9)/i],[v,[T,"HTC"],[m,C]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[v,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[T,"Acer"],[m,C]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,v,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,v,[m,C]],[/(surface duo)/i],[v,[T,st],[m,C]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[v,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[v,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[v,[T,"RCA"],[m,C]],[/\b(venue[\d ]{2,7}) b/i],[v,[T,"Dell"],[m,C]],[/\b(q(?:mv|ta)\w+) b/i],[v,[T,"Verizon"],[m,C]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[T,"Barnes & Noble"],[m,C]],[/\b(tm\d{3}\w+) b/i],[v,[T,"NuVision"],[m,C]],[/\b(k88) b/i],[v,[T,"ZTE"],[m,C]],[/\b(nx\d{3}j) b/i],[v,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[v,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[v,[T,"Swiss"],[m,C]],[/\b((zeki)?tb.*\b) b/i],[v,[T,"Zeki"],[m,C]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],v,[m,C]],[/\b(ns-?\w{0,9}) b/i],[v,[T,"Insignia"],[m,C]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[T,"NextBook"],[m,C]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],v,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],v,[m,I]],[/\b(ph-1) /i],[v,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[T,"Envizen"],[m,C]],[/\b(trio[-\w\. ]+) b/i],[v,[T,"MachSpeed"],[m,C]],[/\btu_(1491) b/i],[v,[T,"Rotor"],[m,C]],[/(shield[\w ]+) b/i],[v,[T,"Nvidia"],[m,C]],[/(sprint) (\w+)/i],[T,v,[m,I]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[T,st],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[T,Qt],[m,C]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[T,Qt],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,j]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[T,At],[m,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,it],[m,j]],[/(apple) ?tv/i],[T,[v,x+" TV"],[m,j]],[/crkey/i],[[v,ve+"cast"],[T,Ae],[m,j]],[/droid.+aft(\w+)( bui|\))/i],[v,[T,ue],[m,j]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[T,Oe],[m,j]],[/(bravia[\w ]+)( bui|\))/i],[v,[T,Qe],[m,j]],[/(mitv-\w{5}) bui/i],[v,[T,ct],[m,j]],[/Hbbtv.*(technisat) (.*);/i],[T,v,[m,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[v,q],[m,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,v,[m,_]],[/droid.+; (shield) bui/i],[v,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[v,[T,Qe],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[T,st],[m,_]],[/((pebble))app/i],[T,v,[m,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[T,x],[m,Y]],[/droid.+; (glass) \d/i],[v,[T,Ae],[m,Y]],[/droid.+; (wt63?0{2,3})\)/i],[v,[T,Qt],[m,Y]],[/(quest( \d| pro)?)/i],[v,[T,Kt],[m,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,$]],[/(aeobc)\b/i],[v,[T,ue],[m,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[m,C]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,C]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[D,Ce+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[D,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[D,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,D]],os:[[/microsoft (windows) (vista|xp)/i],[D,U],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[D,[U,pe,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,pe,He],[D,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[D,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[D,Pt],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,D],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[D,U],[/\(bb(10);/i],[U,[D,de]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[D,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[D,Xe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[D,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[D,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[D,ve+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[D,Tt],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[D,U],[/(sunos) ?([\w\.\d]*)/i],[[D,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[D,U]]},ot=function(ft,vt){if(typeof ft===F&&(vt=ft,ft=f),!(this instanceof ot))return new ot(ft,vt).getResult();var Et=typeof l!==S&&l.navigator?l.navigator:f,Ct=ft||(Et&&Et.userAgent?Et.userAgent:w),hn=Et&&Et.userAgentData?Et.userAgentData:f,Xt=vt?Ie(_t,vt):_t,nn=Et&&Et.userAgent==Ct;return this.getBrowser=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Ct,Xt.browser),Ot[y]=M(Ot[U]),nn&&Et&&Et.brave&&typeof Et.brave.isBrave==g&&(Ot[D]="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot[N]=f,K.call(Ot,Ct,Xt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[T]=f,Ot[v]=f,Ot[m]=f,K.call(Ot,Ct,Xt.device),nn&&!Ot[m]&&hn&&hn.mobile&&(Ot[m]=I),nn&&Ot[v]=="Macintosh"&&Et&&typeof Et.standalone!==S&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ot[v]="iPad",Ot[m]=C),Ot},this.getEngine=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Ct,Xt.engine),Ot},this.getOS=function(){var Ot={};return Ot[D]=f,Ot[U]=f,K.call(Ot,Ct,Xt.os),nn&&!Ot[D]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Ot[D]=hn.platform.replace(/chrome os/i,Tt).replace(/macos/i,Pt)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===R&&Ot.length>W?q(Ot,W):Ot,this},this.setUA(Ct),this};ot.VERSION=p,ot.BROWSER=ne([D,U,y]),ot.CPU=ne([N]),ot.DEVICE=ne([v,T,m,_,I,j,C,Y,$]),ot.ENGINE=ot.OS=ne([D,U]),i.exports&&(o=i.exports=ot),o.UAParser=ot;var rt=typeof l!==S&&(l.jQuery||l.Zepto);if(rt&&!rt.ua){var et=new ot;rt.ua=et.getResult(),rt.ua.get=function(){return et.getUA()},rt.ua.set=function(ft){et.setUA(ft);var vt=et.getResult();for(var Et in vt)rt.ua[Et]=vt[Et]}}})(typeof window=="object"?window:nu)})(rb,rb.exports);var WV=rb.exports;const n3=new WV.UAParser;function $V(i){const o=n3.getOS(),l=n3.getBrowser();return"Gigset/".concat(i," (").concat(o.name," ").concat(o.version,"; ").concat(l.name," ").concat(l.version,")")}function Kg({sessionId:i,appVersion:o,apiVersion:l}){const f={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":$V(o),"Api-version":l!=null?l:"v1"};return i&&(f.Session=i),f}async function XV({deviceId:i,appVersion:o,baseUrl:l}){const f={deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i};return(await Ah)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(f),headers:Kg({appVersion:o})},{name:_a.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function QV({deviceId:i,ticketCode:o,scanTvDeviceId:l,appVersion:f,baseUrl:p,ticketPrefix:w}){let b=p;w&&(b="".concat(p));const g={ticketCode:o,deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i,scanTvDeviceId:l};return(await Ah)("".concat(b,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:Kg({appVersion:f})},{name:_a.NEGOTIATE,message:"could not fetch negotiate data"})}async function r3({sessionId:i,appVersion:o,baseUrl:l,ticketPrefix:f,ticketCode:p}){let w=l;f&&(w="".concat(l,"/").concat(f));const b=await Ah("".concat(w,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:Kg({sessionId:i,appVersion:o})},{name:_a.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(b.timelineUrl).concat(b.queryParameters),{method:"GET",headers:Kg({sessionId:i,appVersion:o})}).then(async S=>await S.json()),queryParameters:b.queryParameters,distributionUrl:b.distributionUrl}}async function i3({sessionId:i,appVersion:o,baseUrl:l,ticketCode:f}){return(await Ah)("".concat(l,"/static-api/event/").concat(f,"/status"),{method:"GET",headers:Kg({sessionId:i,appVersion:o})},{name:_a.EVENT_STATUS,message:"failed to get event status data"})}function JV(i){return"".concat(i,"/timeline-api/drm/license?drm=widevine")}var nf=(i=>(i.JUMPSPOT="jumpspot",i.FOLLOW="follow",i))(nf||{});function PC(i){return[...i.places.flatMap((o,l)=>o.jumpSpots.map(f=>({camera:f.camera,title:f.title,type:"jumpspot",placeIndex:l,mapPosition:o.mapPosition,mapScale:o.mapScale,placeTitle:o.title}))),...i.follows.map(o=>({camera:o.camera,title:o.title,type:"follow",mapPosition:o.mapPositions}))].map((o,l)=>({...o,index:l}))}function hE(i,o){return PC(i).filter(f=>{const p=mi(f.camera.span.time,i.frameRate),w=mi(f.camera.span.time,i.frameRate)+mi(f.camera.span.duration,i.frameRate);return p<=o&&w>=o})}function UU(i,o,l,f){const p=hE(i,o+l+2);if(!p.length)return;if(f){const g=(f==null?void 0:f.placeIndex)!==void 0&&p.find(S=>S.type==="jumpspot"&&S.placeIndex===(f==null?void 0:f.placeIndex));if(g)return g}const w=p.find(g=>g.type==="jumpspot");if(w)return w;const b=p.find(g=>g.type==="follow");if(b)return b}function ez(i){const o=PC(i),l=i.frameRate;return o.sort((f,p)=>{const w=mi(f.camera.span.time,l)+mi(f.camera.span.duration,l);return mi(p.camera.span.time,l)+mi(p.camera.span.duration,l)-w}),o[0]}function mi(i,o){if(!i)return 0;const[l,f,p,w]=i.split(":").map(Number),b=l*60*60,g=f*60;if(o){const S=w/o;return b+g+p+S}else return b+g+p}function ib(i,o,l){return hE(o,l.getExpectedPositionInSeconds()).find(f=>f.index===i)}function ob(i,o){return PC(o).find(f=>f.camera.cameraID===i)}const tz=i=>{if(typeof i=="string")return"String!";if(typeof i=="number")return"Int";if(typeof i=="boolean")return"Boolean";if(typeof i=="object"&&"OR"in i)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof i))};function BU(i,o,l){const f=i.includes("staging")||i.includes("qa"),p={...l,preview:f},b=(Array.isArray(o)?o[0]:o).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([F,R])=>"$".concat(F,": ").concat(tz(R))).join(", "),S="query(".concat(g,")").concat(b);return JSON.stringify({query:S,variables:p})}const jU=i=>"https://graphql.contentful.com/content/v1/spaces/".concat(i,"/environments/master");function ZU(i,o){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:i}}const nz=(i,o)=>BU(o,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:i});async function o3(i,o,l,f){var b,g;const p=nz(i.toUpperCase(),o),w=await Ah(jU(f),ZU(p,l),{name:_a.EVENT_META,message:"Could not fetch event meta."});return(g=(b=w==null?void 0:w.data)==null?void 0:b.eventCollection.items)==null?void 0:g[0]}function rz(i,o){const l=i.reduce((f,p)=>(f.OR.push({slug:p}),f),{OR:[]});return BU(o,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function iz(i,o,l){var w,b;const f=rz(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],i);return(b=(w=(await Ah(jU(l),ZU(f,o),{name:_a.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:w.resourceSetCollection)==null?void 0:b.items}const a3=.4,s3=.2;class oz{constructor(){switch(this._algorithmArray=[l=>{const f=this._videoElement;if(f){const p=l-f.currentTime-this._offset+.14;if((p>s3||p<-s3)&&!this._switchingInProgress)if(this._switchingInProgress=!0,setTimeout(()=>{this._switchingInProgress=!1},2e3),p>1)f.currentTime=f.currentTime+p+1.8;else{const w=p/2;f.playbackRate=Math.sign(p)===1?2:.5,setTimeout(()=>{f.playbackRate=1},Math.abs(w)*2200)}}},l=>{if(this._videoElement&&!this._switchingInProgress){const f=this._videoElement,p=l-f.currentTime-this._offset+.9;(p>a3||p<-a3)&&!this._switchingInProgress&&(this._switchingInProgress=!0,f.currentTime=f.currentTime+p,setTimeout(()=>{this._switchingInProgress=!1},3e3))}}],this._offset=0,this._switchingInProgress=!1,RC()){case cc.TIZEN:this._algorithm=0;break;case cc.WEBOS:this._algorithm=1;break;default:this._algorithm=0;break}}connectMediaElement(o,l=0){this._videoElement=o,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(o){this._algorithmArray[this._algorithm](o)}destroy(){}}class az extends Af{constructor(o){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new oz,this.state="idle",this.startTime=o,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const o=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&o&&o>Date.now()}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const o=this._timelineData.frameRate,l=ez(this._timelineData);return this.adjustedStartTime+(mi(l.camera.span.time,o)+mi(l.camera.span.duration,o))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(o){this._timelineData=o}pausePlayStream(o,l,f){if(o==="pause"&&!this.isPaused)this.isPaused=!0;else if(o==="play"){if(l&&f){const p=new Date(l).getTime()/1e3,w=new Date(f).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-w}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const o=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(o)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(o,l=!1){this.startTime=o,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,console.log("start timeout = ",(this.adjustedStartTime-Date.now())/6e4),this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.adjustedStartTime<Date.now()&&this.state!=="started"?(this.emit("fetchTimeline",void 0),this.onStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(o){this.serverTimeOffset=o,this.emit("startTimeUpdated",void 0),this.preparePlayback()}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class sz extends Af{constructor(o,l,f){super(),this.eventClock=o,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=f!=null?f:2}updateTimelineData(o){this.timelineData=o}updatePlaying(o){var f,p,w;let l=!1;if(this.timelineData){const b=this.timelineData.frameRate,g=(w=(p=(f=o.camera.attentions)==null?void 0:f.filter(S=>S.scope==="global"))==null?void 0:p.sort((S,F)=>mi(S.time)-mi(F.time)))!=null?w:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const F=this.eventClock.getExpectedPositionInSeconds()-mi(o.camera.span.time,b),R=mi(o.camera.span.duration,b)-F;if(g.length){const y=g.find(D=>F<mi(D.time)),v=y?mi(y.time)-F:0;v>0&&v<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},v))}R<=this.nearEndThreshold+1&&R>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(R-this.nearEndThreshold)*1e3):R<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),R<=this.transitionThreshold+1&&R>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(R-this.transitionThreshold)*1e3)),R<=1&&R>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},R*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const uz="1.0.0";function lz({baseUrl:i,contentfulAccessToken:o,contentfulSpaceId:l}){const[f,p]=pn.useState(),[w,b]=pn.useState(),g=pn.useCallback((S,F)=>{var R,y;return f&&((y=(R=f.find(v=>v.slug===S))==null?void 0:R.resourcesCollection.items.find(v=>v.key===F))==null?void 0:y.value)||""},[f]);return pn.useEffect(()=>{i&&o&&l&&(b(void 0),iz(i,o,l).then(S=>{p(S)}).catch(S=>{b(S)}))},[i,o,l]),{contentfulData:f,getContentfulValue:g,error:w}}const cz={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},ea=ru.createContext(cz);function fz({children:i,baseUrl:o,preferredProfile:l,contentfulAccessToken:f,contentfulSpaceId:p,newSetupToggle:w=!1,ticketCodeProp:b}){const g=Ig(),S=uz,[F,R]=pn.useState(),[y,v]=pn.useState(),[D,m]=pn.useState(),[T,U]=pn.useState(),[N,_]=pn.useState(),[I,C]=pn.useState(),[j,Y]=pn.useState(b),[$,W]=pn.useState(),[ue,x]=pn.useState(),[X,de]=pn.useState(),[oe,ve]=pn.useState(),[Ce,Xe]=pn.useState(),[Ae,Ze]=pn.useState([]),[it,st]=pn.useState([]),[Ye,lt]=pn.useState(!1),[At,Oe]=pn.useState(),Qe=pn.useRef(),ct=pn.useRef(),{getContentfulValue:Qt,error:Kt}=lz({baseUrl:o,contentfulAccessToken:f,contentfulSpaceId:p}),Tt=3;function Pt(Ie,ne){return ne.filter(Fe=>Ie!==Fe.name)}return pn.useEffect(()=>{Ze(Kt?Ie=>[...Ie,Kt]:Ie=>Pt(_a.CONTENTFUL,Ie))},[Kt]),pn.useEffect(()=>{Y(b)},[b]),pn.useEffect(()=>{o&&g&&w&&(async()=>{let ne=0;const Fe=()=>XV({deviceId:g,appVersion:S,baseUrl:o});for(;ne<Tt;)await Fe().then(O=>{Xe(O),ne=Tt}).catch(O=>{ne+=1,ne===2&&console.error(O)})})()},[S,o,g,w]),pn.useEffect(()=>{if(!Ce)return;const Ie=new YV({deviceId:g,debug:!1});U(Ie),Ie==null||Ie.globalConnect(Ce).then(({ticketCode:ne,scanTvDeviceId:Fe})=>{Y(ne),W(Fe)}),setTimeout(()=>{localStorage.getItem("ticketCode")&&(Y(localStorage.getItem("ticketCode")),W("SCAN_DEVICE_ID"))},500)},[Ce]),pn.useEffect(()=>{!j||!$||!(T!=null&&T.globalHubConnection)||T.globalDisconnect()},[j,$,T==null?void 0:T.globalHubConnection]),pn.useEffect(()=>{if(!j||!$&&w){ve(void 0);return}const Ie=j[0];Ze(ne=>Pt(_a.NEGOTIATE,ne)),QV({deviceId:g,deviceType:6,appVersion:S,ticketCode:j,scanTvDeviceId:$,ticketPrefix:Ie,baseUrl:o}).then(ne=>{ve(ne),lt(ne.ticketType>3)}).catch(ne=>{Ze(Fe=>[...Fe,ne])})},[j,S,o,g,$,w]),pn.useEffect(()=>{if(!(oe!=null&&oe.accessToken)||!oe.url||!j)return;const Ie=new az(new Date(0)),ne=new sz(Ie);return T==null||T.connect({url:oe.url,accessToken:oe.accessToken,groupName:j}),T==null||T.on("setupStatusUpdate",({deviceLists:Fe})=>{var K;const O=(K=Fe.connectedDevices[0])==null?void 0:K.sessionId;Oe(Fe.connectedDevices),console.log("signalRClient `setupStatusUpdate` connected with sessionId: ",O),_(O),st(pe=>Pt(_a.EVENT_STATUS,pe));const M=()=>{i3({appVersion:S,baseUrl:o,ticketCode:j,sessionId:O}).then(pe=>{if(v(pe),pe.broadcastStart&&Qe.current!==pe.broadcastStart&&!ct.current)if(Qe.current=pe.broadcastStart,Ye){const ce=new Date;ce.setHours(ce.getHours()+1),Ie.updateStartTime(ce,!0)}else Ie.updateStartTime(new Date(pe.broadcastStart),!0)}).catch(pe=>{st(ce=>[...ce,pe])})};M(),T.on("eventStatusChanged",M),o3(j[0],o,f,p).then(pe=>{m(pe)}).catch(pe=>{st(ce=>[...ce,pe])}),st(pe=>Pt(_a.GENERATE,pe));const q=()=>{console.log("# get timeline"),r3({sessionId:O,appVersion:S,baseUrl:o,ticketCode:j}).then(pe=>{Ie.timelineData=pe,R(pe),ne.updateTimelineData(pe)}).catch(pe=>{st(ce=>[...ce,pe])})};Ie.on("fetchTimeline",q)}),T==null||T.on("stateUpdated",({state:Fe})=>{console.log(Fe,"stateUpdate"),C(Fe)}),T==null||T.on("serverTimeOffsetUpdate",({serverTimeOffset:Fe})=>{console.log("signalRClient: server time offset updated",Fe),Ie.updateServerTimeOffset(Fe)}),T==null||T.on("startTimeUpdated",({startTime:Fe})=>{console.log("signalRClient: `startTimeUpdated`",Fe),console.log("updateStartTime[3]"),Qe.current=Fe.toString(),ct.current=Fe.toString(),Ie.updateStartTime(Fe,!0)}),T==null||T.on("connected",({sessionId:Fe})=>{console.log("signalRClient: `connected` with sessionId: ",Fe),_(Fe),st(q=>Pt(_a.EVENT_STATUS,q));const O=()=>{i3({appVersion:S,baseUrl:o,ticketCode:j,sessionId:Fe}).then(q=>{if(v(q),q.broadcastStart)if(Ye){const K=new Date;K.setHours(K.getHours()+1),console.log("updateStartTime[4]"),Ie.updateStartTime(K,!0)}else console.log("updateStartTime[5]"),Ie.updateStartTime(new Date(q.broadcastStart),!0)}).catch(q=>{st(K=>[...K,q])})};O(),T.on("eventStatusChanged",O),o3(j[0],o,f,p).then(q=>{m(q)}).catch(q=>{st(K=>[...K,q])}),st(q=>Pt(_a.GENERATE,q));const M=()=>{r3({sessionId:Fe,appVersion:S,baseUrl:o,ticketCode:j}).then(q=>{Ie.timelineData=q,R(q),ne.updateTimelineData(q)}).catch(q=>{st(K=>[...K,q])})};Ie.on("fetchTimeline",M)}),x(Ie),de(ne),()=>{C(void 0),Oe(void 0),T==null||T.destroy(),ne.destroy(),Ie.destroy()}},[oe,j,S,o,g,f,p,Ye]),wt.jsx(ea.Provider,{value:{signalRClient:T,timelineData:F,eventStatus:y,eventMeta:D,hubState:I,sessionId:N,ticketCode:j,eventClock:ue,orchestrator:X,preferredProfile:l,baseUrl:o,negotiateData:oe,isDev:Ye,getContentfulValue:Qt,preConnectErrors:Ae,postConnectErrors:it,connectedDevices:At},children:i})}const dz="_focused_tk4zu_1",hz={focused:dz};function jo({selfFocus:i,...o}){const{ref:l,focused:f,focusSelf:p}=OU.useFocusable({onEnterPress:()=>{o.onClick()}});return pn.useEffect(()=>{i&&p()},[p,i]),wt.jsx("button",{...o,ref:l,className:"".concat(o.className||""," ").concat(f?hz.focused:""," ").concat(f&&o.focusstile?o.focusstile:"")})}function If(){return pn.useContext(ea).signalRClient}function bf(){return pn.useContext(ea).timelineData}function OC(){return pn.useContext(ea).eventMeta}function pz(){return pn.useContext(ea).hubState}function gz(){return pn.useContext(ea).sessionId}function mz(){return pn.useContext(ea).ticketCode?[0]:null}function uu(){return pn.useContext(ea).eventClock}function vz(){return pn.useContext(ea).negotiateData}function LC(){return pn.useContext(ea).isDev}function yz(){return pn.useContext(ea).getContentfulValue}function Ez(){return pn.useContext(ea).preConnectErrors}function _z(){return pn.useContext(ea).postConnectErrors}function im(){return pn.useContext(ea).orchestrator}function kC(){return pn.useContext(ea).connectedDevices}function GU(){const i=bf(),o=mz(),l=pn.useContext(ea);return pn.useMemo(()=>[i==null?void 0:i.profiles.find(f=>f.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?JV(l.baseUrl):void 0,i==null?void 0:i.queryParameters],[l.preferredProfile,o,i,l.baseUrl])}const Tz=()=>wt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:wt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function Sz(){const i=If(),o=uu(),l=pn.useCallback(b=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:Ig(),startDate:new Date(o.startTime.getTime()-b).toISOString(),rateClockState:{rate:1}}})},[i,o]),f=pn.useCallback(b=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:Ig(),startDate:new Date(o.serverNow()-b).toISOString(),rateClockState:{rate:1}}})},[i,o]),p=pn.useCallback(()=>{if(!o||!i)return;const b=new Date;b.setSeconds(b.getSeconds()+5),i.sendGroupCommand({command:"play",value:{senderID:Ig(),startDate:new Date(b).toISOString(),rateClockState:{rate:1}}})},[i,o]);return{seekBy:l,seekTo:f,disconnect:()=>{i==null||i.disconnect()},restart:p}}function wz({eventPlayer:i}){var T,U;const o=If(),l=uu(),[f,p]=pn.useState(!1),[w,b]=pn.useState(),{seekBy:g,seekTo:S,disconnect:F,restart:R}=Sz(),[y,v]=pn.useState([]),D=bf(),m=()=>{p(!f)};return pn.useEffect(()=>{if(!l||!D)return;const N=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),I=hE(D,_);v(I.map(C=>C)),b({expectedPosition:_})},500);return()=>{clearInterval(N)}},[l,D]),wt.jsxs("div",{className:"demo-remote-container",children:[wt.jsx("div",{className:"icon-wrapper",onClick:m,children:wt.jsx(Tz,{})}),f&&wt.jsxs(wt.Fragment,{children:[wt.jsx("h2",{children:"Demo Remote"}),wt.jsx(jo,{selfFocus:!0,onClick:()=>{i==null||i.requestFullscreen()},children:"Go to fullscreen"}),w&&wt.jsx("div",{children:wt.jsxs("p",{children:["Expected position in seconds"," ",w.expectedPosition.toFixed(2)]})}),wt.jsx(jo,{onClick:()=>{S(-5e3)},children:"Start in 5 sec"}),wt.jsx(jo,{onClick:()=>{R()},children:"Restart"}),wt.jsx(jo,{onClick:()=>{g(1e4)},children:"Seek Forward"}),wt.jsx(jo,{onClick:()=>{g(-1e4)},children:"Seek Backward"}),wt.jsx(jo,{onClick:()=>{S(1e4)},children:"Seek to first video"}),wt.jsx(jo,{onClick:()=>{S(1e5)},children:"Seek to 100"}),wt.jsx(jo,{onClick:F,children:"Disconnect"}),wt.jsx("h3",{children:"Available streams right now:"}),y.map(N=>wt.jsxs("div",{className:"cast-button-group",children:[wt.jsxs(jo,{onClick:()=>{o==null||o.sendGroupCommand({command:"cast",value:N.index})},children:[wt.jsx("span",{style:{margin:"10px"},children:""}),N.title]}),wt.jsxs(jo,{onClick:()=>{o==null||o.sendGroupCommand({command:"prepareCast",value:N.index})},children:[wt.jsx("span",{style:{margin:"10px"},children:""}),"prepare cast"]}),wt.jsxs(jo,{onClick:()=>{o==null||o.sendGroupCommand({command:"cancelCast",value:N.index})},children:[wt.jsx("span",{style:{margin:"10px"},children:""}),"cancel cast"]})]},N.camera.assetName)),wt.jsx("h3",{children:"Statistics:"}),wt.jsxs("div",{className:"statistics-block",children:[wt.jsx("label",{children:"Total frames:"}),wt.jsx("div",{children:((T=i==null?void 0:i.stats)==null?void 0:T.totalVideoFrames)||0})]}),wt.jsxs("div",{className:"statistics-block",children:[wt.jsx("label",{children:"Dropped frames:"}),wt.jsx("div",{children:((U=i==null?void 0:i.stats)==null?void 0:U.droppedVideoFrames)||0})]})]})]})}var qU={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(i,o){(function(l,f){i.exports=f()})(self,function(){return function(){var l={4593:function(b,g){var S,F,R,y,v,D=function(U){for(var N=[],_=0;_<U.length;++_){var I=U.charCodeAt(_);I<128?N.push(I):I<2048?(N.push(192|I>>6),N.push(128|63&I)):I<65536?(N.push(224|I>>12),N.push(128|63&I>>6),N.push(128|63&I)):(N.push(240|I>>18),N.push(128|63&I>>12),N.push(128|63&I>>6),N.push(128|63&I))}return N},m=function(U){for(var N=[],_=0;_<U.length;){var I=U[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&U[_++]):I<240?(I=(15&I)<<12,I|=(63&U[_++])<<6,I|=63&U[_++]):(I=(7&I)<<18,I|=(63&U[_++])<<12,I|=(63&U[_++])<<6,I|=63&U[_++])),N.push(String.fromCharCode(I))}return N.join("")},T={};S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(U){for(var N=0,_=[],I=0|U.length/3;0<I--;){var C=(U[N]<<16)+(U[N+1]<<8)+U[N+2];N+=3,_.push(S.charAt(63&C>>18)),_.push(S.charAt(63&C>>12)),_.push(S.charAt(63&C>>6)),_.push(S.charAt(63&C))}return U.length-N==2?(C=(U[N]<<16)+(U[N+1]<<8),_.push(S.charAt(63&C>>18)),_.push(S.charAt(63&C>>12)),_.push(S.charAt(63&C>>6)),_.push("=")):U.length-N==1&&(C=U[N]<<16,_.push(S.charAt(63&C>>18)),_.push(S.charAt(63&C>>12)),_.push("==")),_.join("")},R=function(){for(var U=[],N=0;N<S.length;++N)U[S.charCodeAt(N)]=N;return U[61]=0,U}(),y=function(U){for(var N=0,_=[],I=0|U.length/4;0<I--;){var C=(R[U.charCodeAt(N)]<<18)+(R[U.charCodeAt(N+1)]<<12)+(R[U.charCodeAt(N+2)]<<6)+R[U.charCodeAt(N+3)];_.push(255&C>>16),_.push(255&C>>8),_.push(255&C),N+=4}return _&&(U.charAt(N-2)=="="?(_.pop(),_.pop()):U.charAt(N-1)=="="&&_.pop()),_},v={encode:function(U){for(var N=[],_=0;_<U.length;++_)N.push(U.charCodeAt(_));return N},decode:function(U){for(var N=0;N<s.length;++N)a[N]=String.fromCharCode(a[N]);return a.join("")}},T.decodeArray=function(U){var N=y(U);return new Uint8Array(N)},T.encodeASCII=function(U){var N=v.encode(U);return F(N)},T.decodeASCII=function(U){var N=y(U);return v.decode(N)},T.encode=function(U){var N=D(U);return F(N)},T.decode=function(U){var N=y(U);return m(N)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(b,g){(function(S){var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},R=function(x){var X=x;return F.hasOwnProperty(x)&&(X=F[x]),String.fromCharCode(X)},y=15,v=32,D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U={25:2,26:4,29:6,30:8,31:10,27:13,28:15},N=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(x){this.time=x},log:function(x,X){var de=this.verboseFilter[x];this.verboseLevel>=de&&console.log(this.time+" ["+x+"] "+X)}},I=function(x){for(var X=[],de=0;de<x.length;de++)X.push(x[de].toString(16));return X},C=function(x,X,de,oe,ve){this.foreground=x||"white",this.underline=X||!1,this.italics=de||!1,this.background=oe||"black",this.flash=ve||!1};C.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(x){for(var X=["foreground","underline","italics","background","flash"],de=0;de<X.length;de++){var oe=X[de];x.hasOwnProperty(oe)&&(this[oe]=x[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(x){return this.foreground===x.foreground&&this.underline===x.underline&&this.italics===x.italics&&this.background===x.background&&this.flash===x.flash},copy:function(x){this.foreground=x.foreground,this.underline=x.underline,this.italics=x.italics,this.background=x.background,this.flash=x.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var j=function(x,X,de,oe,ve,Ce){this.uchar=x||" ",this.penState=new C(X,de,oe,ve,Ce)};j.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(x,X){this.uchar=x,this.penState.copy(X)},setPenState:function(x){this.penState.copy(x)},equals:function(x){return this.uchar===x.uchar&&this.penState.equals(x.penState)},copy:function(x){this.uchar=x.uchar,this.penState.copy(x.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Y=function(){this.chars=[];for(var x=0;x<v;x++)this.chars.push(new j);this.pos=0,this.currPenState=new C};Y.prototype={equals:function(x){for(var X=!0,de=0;de<v;de++)if(!this.chars[de].equals(x.chars[de])){X=!1;break}return X},copy:function(x){for(var X=0;X<v;X++)this.chars[X].copy(x.chars[X])},isEmpty:function(){for(var x=!0,X=0;X<v;X++)if(!this.chars[X].isEmpty()){x=!1;break}return x},setCursor:function(x){this.pos!==x&&(this.pos=x),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},moveCursor:function(x){var X=this.pos+x;if(x>1)for(var de=this.pos+1;de<X+1;de++)this.chars[de].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(x){x>=144&&this.backSpace();var X=R(x);this.pos>=v?_.log("ERROR","Cannot insert "+x.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(x){var X;for(X=x;X<v;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var x=[],X=!0,de=0;de<v;de++){var oe=this.chars[de].uchar;oe!==" "&&(X=!1),x.push(oe)}return X?"":x.join("")},setPenStyles:function(x){this.currPenState.setStyles(x),this.chars[this.pos].setPenState(this.currPenState)}};var $=function(){this.rows=[];for(var x=0;x<y;x++)this.rows.push(new Y);this.currRow=14,this.nrRollUpRows=null,this.reset()};$.prototype={reset:function(){for(var x=0;x<y;x++)this.rows[x].clear();this.currRow=14},equals:function(x){for(var X=!0,de=0;de<y;de++)if(!this.rows[de].equals(x.rows[de])){X=!1;break}return X},copy:function(x){for(var X=0;X<y;X++)this.rows[X].copy(x.rows[X])},isEmpty:function(){for(var x=!0,X=0;X<y;X++)if(!this.rows[X].isEmpty()){x=!1;break}return x},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(x){this.rows[this.currRow].insertChar(x)},setPen:function(x){this.rows[this.currRow].setPenStyles(x)},moveCursor:function(x){this.rows[this.currRow].moveCursor(x)},setCursor:function(x){_.log("INFO","setCursor: "+x),this.rows[this.currRow].setCursor(x)},setPAC:function(x){_.log("INFO","pacData = "+JSON.stringify(x));var X=x.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var de=this.rows[this.currRow];if(x.indent!==null){var oe=x.indent,ve=Math.max(oe-1,0);de.setCursor(x.indent),x.color=de.chars[ve].penState.foreground}var Ce={foreground:x.color,underline:x.underline,italics:x.italics,background:"black",flash:!1};this.setPen(Ce)},setBkgData:function(x){_.log("INFO","bkgData = "+JSON.stringify(x)),this.backSpace(),this.setPen(x),this.insertChar(32)},setRollUpRows:function(x){this.nrRollUpRows=x},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var x=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(x,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(x){x=x||!1;for(var X=[],de="",oe=-1,ve=0;ve<y;ve++){var Ce=this.rows[ve].getTextString();Ce&&(oe=ve+1,x?X.push("Row "+oe+': "'+Ce+'"'):X.push(Ce.trim()))}return X.length>0&&(de=x?"["+X.join(" | ")+"]":X.join("\n")),de},getTextAndFormat:function(){return this.rows}};var W=function(x,X){this.chNr=x,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new $,this.nonDisplayedMemory=new $,this.lastOutputScreen=new $,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};W.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(x){this.outputFilter=x},setPAC:function(x){this.writeScreen.setPAC(x)},setBkgData:function(x){this.writeScreen.setBkgData(x)},setMode:function(x){x!==this.mode&&(this.mode=x,_.log("INFO","MODE="+x),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=x)},insertChars:function(x){for(var X=0;X<x.length;X++)this.writeScreen.insertChar(x[X]);var de=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",de+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(x){_.log("INFO","RU("+x+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(x)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var x=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=x,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(x){_.log("INFO","TO("+x+") - Tab Offset"),this.writeScreen.moveCursor(x)},cc_MIDROW:function(x){var X={flash:!1};if(X.underline=x%2==1,X.italics=x>=46,X.italics)X.foreground="white";else{var de=Math.floor(x/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][de]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var x=_.time;x!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(x,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:x):this.cueStartTime=x,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(x){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.displayedMemory),this.cueStartTime=x))}};var ue=function(x,X,de){this.field=x||1,this.outputs=[X,de],this.channels=[new W(1,X),new W(2,de)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};ue.prototype={getHandler:function(x){return this.channels[x].getHandler()},setHandler:function(x,X){this.channels[x].setHandler(X)},addData:function(x,X){var de,oe,ve,Ce=!1;this.lastTime=x,_.setTime(x);for(var Xe=0;Xe<X.length;Xe+=2)oe=127&X[Xe],ve=127&X[Xe+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&ve===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,ve])+") is dropped")):oe!==0||ve!==0?(_.log("DATA","["+I([X[Xe],X[Xe+1]])+"] -> ("+I([oe,ve])+")"),(de=this.parseCmd(oe,ve))||(de=this.parseMidrow(oe,ve)),de||(de=this.parsePAC(oe,ve)),de||(de=this.parseBackgroundAttributes(oe,ve)),de||(Ce=this.parseChars(oe,ve))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ce):_.log("WARNING","No channel found yet. TEXT-MODE?")),de?this.dataCounters.cmd+=2:Ce?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,ve])+" orig: "+I([X[Xe],X[Xe+1]])))):this.dataCounters.padding+=2},parseCmd:function(x,X){var de;if(!((x===20||x===21||x===28||x===29)&&32<=X&&X<=47||(x===23||x===31)&&33<=X&&X<=35))return!1;de=x===20||x===21||x===23?1:2;var oe=this.channels[de-1];return x===20||x===21||x===28||x===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=x,this.lastCmdB=X,this.currChNr=de,!0},parseMidrow:function(x,X){var de=null;if((x===17||x===25)&&32<=X&&X<=47){if((de=x===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[de-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+I([x,X])+")"),this.lastCmdA=x,this.lastCmdB=X,!0}return!1},parsePAC:function(x,X){var de,oe;if(!((17<=x&&x<=23||25<=x&&x<=31)&&64<=X&&X<=127||(x===16||x===24)&&64<=X&&X<=95))return!1;de=x<=23?1:2,oe=64<=X&&X<=95?de===1?D[x]:T[x]:de===1?m[x]:U[x];var ve=this.interpretPAC(oe,X);return this.channels[de-1].setPAC(ve),this.lastCmdA=x,this.lastCmdB=X,this.currChNr=de,!0},interpretPAC:function(x,X){var de,oe={color:null,italics:!1,indent:null,underline:!1,row:x};return de=X>95?X-96:X-64,oe.underline=(1&de)==1,de<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(de/2)]:de<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((de-16)/2),oe},parseChars:function(x,X){var de=null,oe=null,ve=null;if(x>=25?(de=2,ve=x-8):(de=1,ve=x),17<=ve&&ve<=19){var Ce;Ce=ve===17?X+80:ve===18?X+112:X+144,_.log("INFO","Special char '"+R(Ce)+"' in channel "+de),oe=[Ce],this.lastCmdA=x,this.lastCmdB=X}else 32<=x&&x<=127&&(oe=X===0?[x]:[x,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Xe=I(oe);_.log("DEBUG","Char codes =  "+Xe.join(","))}return oe},parseBackgroundAttributes:function(x,X){var de,oe,ve;return((x===16||x===24)&&32<=X&&X<=47||(x===23||x===31)&&45<=X&&X<=47)&&(de={},x===16||x===24?(oe=Math.floor((X-32)/2),de.background=N[oe],X%2==1&&(de.background=de.background+"_semi")):X===45?de.background="transparent":(de.foreground="black",X===47&&(de.underline=!0)),ve=x<24?1:2,this.channels[ve-1].setBkgData(de),this.lastCmdA=x,this.lastCmdB=X,!0)},reset:function(){for(var x=0;x<this.channels.length;x++)this.channels[x]&&this.channels[x].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(x){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(x)}},S.logger=_,S.PenState=C,S.CaptionScreen=$,S.Cea608Parser=ue,S.findCea608Nalus=function(x,X,de){for(var oe=0,ve=X,Ce=[],Xe=function(Ye,lt,At,Oe){if(Ye!==4||lt<8)return null;var Qe=At.getUint8(Oe),ct=At.getUint16(Oe+1),Qt=At.getUint32(Oe+3),Kt=At.getUint8(Oe+7);return Qe==181&&ct==49&&Qt==1195456820&&Kt==3};ve<X+de;){if(oe=x.getUint32(ve),(31&x.getUint8(ve+4))==6)for(var Ae=ve+5,Ze=-1;Ae<ve+4+oe-1;){Ze=0;for(var it=255;it===255;)Ze+=it=x.getUint8(Ae),Ae++;var st=0;for(it=255;it===255;)st+=it=x.getUint8(Ae),Ae++;Xe(Ze,st,x,Ae)&&Ce.push([Ae,st]),Ae+=st}ve+=oe+4}return Ce},S.extractCea608DataFromRange=function(x,X){var de=X[0],oe=[[],[]];de+=8;var ve=31&x.getUint8(de);de+=2;for(var Ce=0;Ce<ve;Ce++){var Xe=x.getUint8(de),Ae=4&Xe,Ze=3&Xe;de++;var it=x.getUint8(de);de++;var st=x.getUint8(de);de++,Ae&&(127&it)+(127&st)!=0&&(Ze===0?(oe[0].push(it),oe[0].push(st)):Ze===1&&(oe[1].push(it),oe[1].push(st)))}return oe}})(g)},8416:function(b,g,S){var F=S(1139),R=S(5448),y=S(6398),v=S(2032),D=(S(5530),typeof window<"u"&&window||S.g),m=D.dashjs;m||(m=D.dashjs={}),m.MediaPlayer=F.Z,m.FactoryMaker=R.Z,m.Debug=y.Z,m.Version=(0,v.e)()},6398:function(b,g,S){var F=S(5595),R=S(8512),y=S(5448),v=1,D=2,m=3,T=4,U=5;function N(I){I=I||{};var C,j,Y,$,W=this.context,ue=(0,F.Z)(W).getInstance(),x=I.settings,X=[];function de(it){return it&&it.bind?it.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var it=arguments.length,st=new Array(it),Ye=0;Ye<it;Ye++)st[Ye]=arguments[Ye];Ze.apply(void 0,[v,this].concat(st))}function ve(){for(var it=arguments.length,st=new Array(it),Ye=0;Ye<it;Ye++)st[Ye]=arguments[Ye];Ze.apply(void 0,[D,this].concat(st))}function Ce(){for(var it=arguments.length,st=new Array(it),Ye=0;Ye<it;Ye++)st[Ye]=arguments[Ye];Ze.apply(void 0,[m,this].concat(st))}function Xe(){for(var it=arguments.length,st=new Array(it),Ye=0;Ye<it;Ye++)st[Ye]=arguments[Ye];Ze.apply(void 0,[T,this].concat(st))}function Ae(){for(var it=arguments.length,st=new Array(it),Ye=0;Ye<it;Ye++)st[Ye]=arguments[Ye];Ze.apply(void 0,[U,this].concat(st))}function Ze(it,st){var Ye="",lt=null;j&&(lt=new Date().getTime(),Ye+="["+(lt-$)+"]"),Y&&st&&st.getClassName&&(Ye+="["+st.getClassName()+"]",st.getType&&(Ye+="["+st.getType()+"]")),Ye.length>0&&(Ye+=" ");for(var At=arguments.length,Oe=new Array(At>2?At-2:0),Qe=2;Qe<At;Qe++)Oe[Qe-2]=arguments[Qe];Array.apply(null,Oe).forEach(function(ct){Ye+=ct+" "}),X[it]&&x&&x.get().debug.logLevel>=it&&X[it](Ye),x&&x.get().debug.dispatchEvent&&ue.trigger(R.Z.LOG,{message:Ye,level:it})}return C={getLogger:function(it){return{fatal:oe.bind(it),error:ve.bind(it),warn:Ce.bind(it),info:Xe.bind(it),debug:Ae.bind(it)}},setLogTimestampVisible:function(it){j=it},setCalleeNameVisible:function(it){Y=it}},j=!0,Y=!0,$=new Date().getTime(),typeof window<"u"&&window.console&&(X[v]=de(window.console.error),X[D]=de(window.console.error),X[m]=de(window.console.warn),X[T]=de(window.console.info),X[U]=de(window.console.debug)),C}N.__dashjs_factory_name="Debug";var _=y.Z.getSingletonFactory(N);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=v,_.LOG_LEVEL_ERROR=D,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=U,y.Z.updateSingletonFactory(N.__dashjs_factory_name,_),g.Z=_},5595:function(b,g,S){var F=S(5448),R=S(8825);function y(){var D={};function m(U,N,_){var I=-1;return D[U]&&D[U].some(function(C,j){if(C&&C.callback===N&&(!_||_===C.scope))return I=j,!0}),I}var T={on:function(U,N,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!U)throw new Error("event type cannot be null or undefined");if(!N||typeof N!="function")throw new Error("listener must be a function: "+N);var C=I.priority||0;if(!(m(U,N,_)>=0)){D[U]=D[U]||[];var j={callback:N,scope:_,priority:C};_&&_.getStreamId&&(j.streamId=_.getStreamId()),_&&_.getType&&(j.mediaType=_.getType()),I&&I.mode&&(j.mode=I.mode);var Y=D[U].some(function($,W){if($&&C>$.priority)return D[U].splice(W,0,j),!0});Y||D[U].push(j)}},off:function(U,N,_){if(U&&N&&D[U]){var I=m(U,N,_);I<0||(D[U][I]=null)}},trigger:function(U){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(U&&D[U]){if((N=N||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");N.type=U,_.streamId&&(N.streamId=_.streamId),_.mediaType&&(N.mediaType=_.mediaType),D[U].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===R.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,N)})}},reset:function(){D={}}};return T}y.__dashjs_factory_name="EventBus";var v=F.Z.getSingletonFactory(y);v.EVENT_PRIORITY_LOW=0,v.EVENT_PRIORITY_HIGH=5e3,F.Z.updateSingletonFactory(y.__dashjs_factory_name,v),g.Z=v},5448:function(b,g){var S=function(){var F,R=[],y={},v={};function D(N,_){for(var I in R){var C=R[I];if(C.context===N&&C.name===_)return C.instance}return null}function m(N,_){return _[N]}function T(N,_,I){N in I&&(I[N]=_)}function U(N,_,I){var C,j=N.__dashjs_factory_name,Y=_[j];if(Y){var $=Y.instance;if(!Y.override)return $.apply({context:_,factory:F},I);for(var W in C=N.apply({context:_},I),$=$.apply({context:_,factory:F,parent:C},I))C.hasOwnProperty(W)&&(C[W]=$[W])}else C=N.apply({context:_},I);return C.getClassName=function(){return j},C}return F={extend:function(N,_,I,C){!C[N]&&_&&(C[N]={instance:_,override:I})},getSingletonInstance:D,setSingletonInstance:function(N,_,I){for(var C in R){var j=R[C];if(j.context===N&&j.name===_)return void(R[C].instance=I)}R.push({name:_,context:N,instance:I})},deleteSingletonInstances:function(N){R=R.filter(function(_){return _.context!==N})},getSingletonFactory:function(N){var _=m(N.__dashjs_factory_name,y);return _||(_=function(I){var C;return I===void 0&&(I={}),{getInstance:function(){return C||(C=D(I,N.__dashjs_factory_name)),C||(C=U(N,I,arguments),R.push({name:N.__dashjs_factory_name,context:I,instance:C})),C}}},y[N.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(N){return m(N,y)},updateSingletonFactory:function(N,_){T(N,_,y)},getClassFactory:function(N){var _=m(N.__dashjs_factory_name,v);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return U(N,I,arguments)}}},v[N.__dashjs_factory_name]=_),_},getClassFactoryByName:function(N){return m(N,v)},updateClassFactory:function(N,_){T(N,_,v)}},F}();g.Z=S},1264:function(b,g,S){var F=S(5448),R=S(703),y=S(6398),v=S(3393),D=S(7855),m=S(5595),T=S(8512);function U(C){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},U(C)}function N(C,j,Y){return j in C?Object.defineProperty(C,j,{value:Y,enumerable:!0,configurable:!0,writable:!0}):C[j]=Y,C}function _(){var C,j,Y=this.context,$=(0,m.Z)(Y).getInstance(),W={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},ue={debug:{logLevel:y.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:v.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:v.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(C={},N(C,D.w.MPD_TYPE,500),N(C,D.w.XLINK_EXPANSION_TYPE,500),N(C,D.w.MEDIA_SEGMENT_TYPE,1e3),N(C,D.w.INIT_SEGMENT_TYPE,1e3),N(C,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),N(C,D.w.INDEX_SEGMENT_TYPE,1e3),N(C,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),N(C,D.w.LICENSE,1e3),N(C,D.w.OTHER_TYPE,1e3),N(C,"lowLatencyReductionFactor",10),C),retryAttempts:(j={},N(j,D.w.MPD_TYPE,3),N(j,D.w.XLINK_EXPANSION_TYPE,1),N(j,D.w.MEDIA_SEGMENT_TYPE,3),N(j,D.w.INIT_SEGMENT_TYPE,3),N(j,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),N(j,D.w.INDEX_SEGMENT_TYPE,3),N(j,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),N(j,D.w.LICENSE,3),N(j,D.w.OTHER_TYPE,3),N(j,"lowLatencyMultiplyFactor",5),j),abr:{movingAverageMethod:v.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:v.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:v.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},x=R.Z.clone(ue);function X(de,oe,ve){for(var Ce in de)de.hasOwnProperty(Ce)&&(oe.hasOwnProperty(Ce)?U(de[Ce])!=="object"||de[Ce]instanceof Array||de[Ce]===null?(oe[Ce]=R.Z.clone(de[Ce]),W[ve+Ce]&&$.trigger(W[ve+Ce])):X(de[Ce],oe[Ce],ve.slice()+Ce+"."):console.error("Settings parameter "+ve+Ce+" is not supported"))}return{get:function(){return x},update:function(de){U(de)==="object"&&X(de,x,"")},reset:function(){x=R.Z.clone(ue)}}}_.__dashjs_factory_name="Settings";var I=F.Z.getSingletonFactory(_);g.Z=I},703:function(b,g,S){var F=S(3875),R=S.n(F),y=S(1067);function v(T){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},v(T)}function D(T,U){for(var N=0;N<U.length;N++){var _=U[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var U,N;return U=T,N=[{key:"mixin",value:function(_,I,C){var j,Y={};if(_)for(var $ in I)I.hasOwnProperty($)&&(j=I[$],$ in _&&(_[$]===j||$ in Y&&Y[$]===j)||(v(_[$])==="object"&&_[$]!==null?_[$]=T.mixin(_[$],j,C):_[$]=C(j)));return _}},{key:"clone",value:function(_){if(!_||v(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var C=0,j=_.length;C<j;++C)C in _&&I.push(T.clone(_[C]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var C=new URL(_);return I.forEach(function(j){j.key&&j.value&&C.searchParams.set(j.key,j.value)}),C.href}catch(j){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var C=_.trim().split("\r\n"),j=0,Y=C.length;j<Y;j++){var $=C[j],W=$.indexOf(": ");W>0&&(I[$.substring(0,W)]=$.substring(W+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var C=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?C:3&C|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var C=0;C<_.length;C++)I=(I<<5)-I+_.charCodeAt(C),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var C=new URL(_),j=new URL(I);if(C.protocol=j.protocol,C.origin!==j.origin)return I;var Y=R().relative(C.pathname.substr(0,C.pathname.lastIndexOf("/")),j.pathname.substr(0,j.pathname.lastIndexOf("/"))),$=Y.length===0?1:0;return Y+=j.pathname.substr(j.pathname.lastIndexOf("/")+$,j.pathname.length-1),j.pathname.length<Y.length?j.pathname:Y}catch(W){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,y.UAParser)(I)}catch(C){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],N&&D(U,N),T}();g.Z=m},2032:function(b,g,S){function F(){return"4.7.4"}S.d(g,{e:function(){return F}})},2230:function(b,g){function S(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R)}var y,v;return y=R,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||U&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&S(y.prototype,v),R}();g.Z=F},4351:function(b,g,S){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,N){return U.__proto__=N,U},R(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=function(m){(function(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),C&&R(I,C)})(_,m);var T,U,N=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,C=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(C,arguments,j)}else I=C.apply(this,arguments);return y(this,I)});function _(){var I;return function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(S(8342).Z);g.Z=D},8512:function(b,g,S){function F(U){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},F(U)}function R(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}function y(U,N){return y=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},y(U,N)}function v(U,N){return!N||F(N)!=="object"&&typeof N!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(U):N}function D(U){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},D(U)}var m=function(U){(function(j,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Y&&Y.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Y&&y(j,Y)})(C,U);var N,_,I=(N=C,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(j){return!1}}(),function(){var j,Y=D(N);if(_){var $=D(this).constructor;j=Reflect.construct(Y,arguments,$)}else j=Y.apply(this,arguments);return v(this,j)});function C(){return R(this,C),I.apply(this,arguments)}return C}(S(4351).Z),T=new m;g.Z=T},8342:function(b,g){function S(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R)}var y,v;return y=R,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,U=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||U&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&S(y.prototype,v),R}();g.Z=F},9326:function(b,g,S){var F=S(3186),R=S(7855),y=S(5448),v=S(8825),D=S(7387),m=S(1553);function T(U){var N,_,I,C,j,Y=(U=U||{}).eventBus,$=U.debug,W=U.urlUtils,ue=U.type,x=U.streamInfo,X=U.segmentsController,de=U.timelineConverter,oe=U.baseURLController;function ve(){return ue}function Ce(){I=null}function Xe(Ye,lt,At){var Oe,Qe,ct=oe.resolve(At.path),Qt={};return ct&&lt!==ct.url&&W.isRelative(lt)?(Oe=ct.url,Qe=ct.serviceLocation,Qt=ct.queryParams,lt&&(Oe=W.resolve(lt,Oe))):Oe=lt,!W.isRelative(Oe)&&(Ye.url=Oe,Ye.serviceLocation=Qe,Ye.queryParams=Qt,!0)}function Ae(Ye,lt){if(lt==null)return null;var At=new F.Z,Oe=lt.representation,Qe=Oe.adaptation.period.mpd.manifest.Period_asArray[Oe.adaptation.period.index].AdaptationSet_asArray[Oe.adaptation.index].Representation_asArray[Oe.index].bandwidth,ct=lt.media;return ct=(0,D.vi)(ct,"Number",lt.replacementNumber),ct=(0,D.vi)(ct,"Time",lt.replacementTime),ct=(0,D.vi)(ct,"Bandwidth",Qe),ct=(0,D.Aj)(ct,Oe.id),ct=(0,D.eR)(ct),At.mediaType=ve(),At.type=R.w.MEDIA_SEGMENT_TYPE,At.range=lt.mediaRange,At.startTime=lt.presentationStartTime,At.mediaStartTime=lt.mediaStartTime,At.duration=lt.duration,At.timescale=Oe.timescale,At.availabilityStartTime=lt.availabilityStartTime,At.availabilityEndTime=lt.availabilityEndTime,At.availabilityTimeComplete=Oe.availabilityTimeComplete,At.wallStartTime=lt.wallStartTime,At.quality=Oe.index,At.index=lt.index,At.mediaInfo=Ye,At.adaptationIndex=Oe.adaptation.index,At.representationId=Oe.id,Xe(At,ct,Oe)?At:void 0}function Ze(Ye,lt,At){var Oe=null;if(!lt||!lt.segmentInfoType)return Oe;var Qe=X.getSegmentByTime(lt,At);return Qe&&(I=Qe,_.debug("Index for time "+At+" is "+Qe.index),Oe=Ae(Ye,Qe)),Oe}function it(Ye,lt,At){var Oe=null,Qe=X.getSegmentByIndex(lt,At,I?I.mediaStartTime:-1);if(Qe)Oe=Ae(Ye,Qe),I=Qe;else{if(C&&!j)return _.debug(ve()+" No segment found at index: "+At+". Wait for next loop"),null;j=!0}return Oe}function st(){_.debug("Dynamic stream complete"),j=!0}return N={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function(Ye,lt){return lt?function(At,Oe,Qe){var ct=new F.Z,Qt=Oe.adaptation.period,Kt=Qt.start;if(ct.mediaType=Qe,ct.type=R.w.INIT_SEGMENT_TYPE,ct.range=Oe.range,ct.availabilityStartTime=de.calcAvailabilityStartTimeFromPresentationTime(Kt,Oe,C),ct.availabilityEndTime=de.calcAvailabilityEndTimeFromPresentationTime(Kt+Qt.duration,Oe,C),ct.quality=Oe.index,ct.mediaInfo=At,ct.representationId=Oe.id,Xe(ct,Oe.initialization,Oe))return ct.url=(0,D.vi)(ct.url,"Bandwidth",Oe.bandwidth),ct}(Ye,lt,ve()):null},getNextSegmentRequest:function(Ye,lt){return lt&&lt.segmentInfoType?it(Ye,lt,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function(Ye,lt){var At=I?I.index+1:0,Oe=X.getSegmentByIndex(lt,At,I?I.mediaStartTime:-1);return Oe?Ae(Ye,Oe):null},getSegmentRequestForTime:Ze,getStreamId:function(){return x.id},getStreamInfo:function(){return x},getType:ve,getValidTimeAheadOfTargetTime:function(Ye,lt,At,Oe){try{if(isNaN(Ye)||!lt||!At)return NaN;if(Ye<0&&(Ye=0),isNaN(Oe)&&(Oe=.5),Ze(lt,At,Ye))return Ye;if(At.adaptation.period.start+At.adaptation.period.duration<Ye)return NaN;for(var Qe=isFinite(At.adaptation.period.duration)?At.adaptation.period.start+At.adaptation.period.duration:Ye+30,ct=Math.min(Ye+Oe,Qe),Qt=NaN,Kt=null;ct<=Qe;){var Tt=null;if(ct<=Qe&&(Tt=Ze(lt,At,ct)),Tt){Qt=ct,Kt=Tt;break}ct+=Oe}if(Kt){var Pt=Kt.startTime+Kt.duration;return Ye>Kt.startTime&&Pt-Ye>Oe?Ye:!isNaN(Kt.startTime)&&Ye<Kt.startTime&&Qt>Kt.startTime?Kt.startTime+.001:Math.min(Pt-Oe,Qt)}return Qt}catch(Ie){return NaN}},initialize:function(Ye){C=Ye,j=!1,X.initialize(Ye)},isLastSegmentRequested:function(Ye,lt){return!Ye||!I?!1:j?!0:!isFinite(Ye.adaptation.period.duration)||I.presentationStartTime+I.duration>lt?!1:Ye.mediaFinishedInformation&&!isNaN(Ye.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=Ye.mediaFinishedInformation.numberOfSegments-1&&(!C||Ye.segmentInfoType===m.Z.SEGMENT_TEMPLATE||C&&Ye.segmentInfoType===m.Z.SEGMENT_LIST&&Ye.adaptation.period.nextPeriodId)?!0:!!(C&&Ye.adaptation.period.nextPeriodId&&Ye.segmentInfoType===m.Z.SEGMENT_TIMELINE&&Ye.mediaFinishedInformation&&!isNaN(Ye.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=Ye.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Ye,lt){return lt&&lt.segmentInfoType?it(Ye,lt,I?I.index:0):null},reset:function(){Ce(),Y.off(v.Z.DYNAMIC_TO_STATIC,st,N)}},_=$.getLogger(N),Ce(),Y.on(v.Z.DYNAMIC_TO_STATIC,st,N),N}T.__dashjs_factory_name="DashHandler",g.Z=y.Z.getClassFactory(T)},1553:function(b,g){function S(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=new(function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var y,v;return y=R,(v=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&S(y.prototype,v),R}());g.Z=F},7802:function(b,g,S){var F=S(5448),R=S(1724),y=S(3636),v=S(1736),D=S(5246);function m(U){U=U||{};var N,_,I=this.context,C=U.dashConstants,j=U.type,Y=U.segmentBaseController;function $(W){return W?W.segments?_[C.SEGMENT_BASE]:_[W.segmentInfoType]:null}return N={initialize:function(W){_[C.SEGMENT_TIMELINE]=(0,R.Z)(I).create(U,W),_[C.SEGMENT_TEMPLATE]=(0,y.Z)(I).create(U,W),_[C.SEGMENT_LIST]=(0,v.Z)(I).create(U,W),_[C.SEGMENT_BASE]=(0,D.Z)(I).create(U,W)},updateInitData:function(W,ue){return ue?Promise.resolve():Y.getSegmentBaseInitSegment({representation:W,mediaType:j})},updateSegmentData:function(W,ue){return ue?Promise.resolve():Y.getSegmentList({mimeType:W.mimeType,representation:W,mediaType:j})},getSegmentByIndex:function(W,ue,x){var X=$(W);return X?X.getSegmentByIndex(W,ue,x):null},getSegmentByTime:function(W,ue){var x=$(W);return x?x.getSegmentByTime(W,ue):null},getMediaFinishedInformation:function(W){var ue=$(W);return ue?ue.getMediaFinishedInformation(W):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},N}m.__dashjs_factory_name="SegmentsController";var T=F.Z.getClassFactory(m);g.Z=T},1736:function(b,g,S){var F=S(5448),R=S(3393),y=S(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function N(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function _(I,C){if(N(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=j.SegmentURL_asArray.length,$=I&&!isNaN(I.startNumber)?I.startNumber:1,W=Math.max($-1,0),ue=Math.max(C-W,0),x=null;if(ue<Y){var X=j.SegmentURL_asArray[ue];(x=(0,y.NF)(U,T,I,C))&&(x.replacementTime=($+C-1)*I.segmentDuration,x.media=X.media?X.media:"",x.mediaRange=X.mediaRange,x.indexRange=X.indexRange)}return x}return{getSegmentByIndex:_,getSegmentByTime:function(I,C){if(N(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,C);return _(I,Math.floor(Y/j))},getMediaFinishedInformation:function(I){var C={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return C;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=I&&!isNaN(I.startNumber)?I.startNumber:1,$=Math.max(Y-1,0);return C.numberOfSegments=$+j.SegmentURL_asArray.length,C}}}v.__dashjs_factory_name="ListSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},5246:function(b,g,S){var F=S(5448),R=S(3393);function y(D){var m=(D=D||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function U(N,_){if(T(),!N)return null;var I,C=N.segments?N.segments.length:-1;if(_<C&&(I=N.segments[_])&&I.index===_)return I;for(var j=0;j<C;j++)if((I=N.segments[j])&&I.index===_)return I;return null}return{getSegmentByIndex:U,getSegmentByTime:function(N,_){T();var I=function(C,j){if(!C)return-1;var Y,$,W,ue,x,X=C.segments,de=X?X.length:null,oe=-1;if(X&&de>0){for(x=0;x<de;x++)if(W=($=X[x]).presentationStartTime,j+(Y=(ue=$.duration)/2)>=W&&j-Y<W+ue){oe=$.index;break}}return oe}(N,_);return U(N,I)},getMediaFinishedInformation:function(N){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return N&&N.segments&&(_.numberOfSegments=N.segments.length),_}}}y.__dashjs_factory_name="SegmentBaseGetter";var v=F.Z.getClassFactory(y);g.Z=v},7387:function(b,g,S){S.d(g,{Aj:function(){return v},NF:function(){return U},TJ:function(){return N},eR:function(){return y},vi:function(){return D}});var F=S(2011);function R(_,I){for(;_.length<I;)_="0"+_;return _}function y(_){return _&&_.split("$$").join("$")}function v(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var C=I.toString();return _.split("$RepresentationID$").join(C)}function D(_,I,C){var j,Y,$,W,ue,x,X=I.length,de=2;if(!_)return _;for(;;){if((j=_.indexOf("$"+I))<0||(Y=_.indexOf("$",j+X))<0)return _;if(($=_.indexOf("%0",j+X))>j&&$<Y)switch(W=_.charAt(Y-1),ue=parseInt(_.substring($+de,Y-1),10),W){case"d":case"i":case"u":x=R(C.toString(),ue);break;case"x":x=R(C.toString(16),ue);break;case"X":x=R(C.toString(16),ue).toUpperCase();break;case"o":x=R(C.toString(8),ue);break;default:return _}else x=C;_=_.substring(0,j)+x+_.substring(Y+1)}}function m(_,I,C,j,Y,$,W,ue){var x,X=new F.Z;return X.representation=_,X.duration=I,X.presentationStartTime=C,X.mediaStartTime=j,X.availabilityStartTime=Y.calcAvailabilityStartTimeFromPresentationTime($,_,W),X.availabilityEndTime=Y.calcAvailabilityEndTimeFromPresentationTime($+I,_,W),X.wallStartTime=Y.calcWallTimeForSegment(X,W),X.replacementNumber=(x=ue,X.representation.startNumber+x),X.index=ue,X}function T(_,I,C,j){var Y=I.adaptation.period;if(isFinite(Y.duration)&&Y.start+Y.duration<=C.presentationStartTime)return!1;if(j){if(I.availabilityTimeOffset==="INF")return!0;var $=_.getClientReferenceTime();return C.availabilityStartTime.getTime()<=$&&(!isFinite(C.availabilityEndTime)||C.availabilityEndTime.getTime()>=$)}return!0}function U(_,I,C,j){var Y,$,W;Y=C.segmentDuration,isNaN(Y)&&(Y=C.adaptation.period.duration),$=parseFloat((C.adaptation.period.start+j*Y).toFixed(5)),W=parseFloat(($+Y).toFixed(5));var ue=m(C,Y,$,_.calcMediaTimeFromPresentationTime($,C),_,W,I,j);return T(_,C,ue,I)?ue:null}function N(_,I,C,j,Y,$,W,ue,x,X){var de,oe,ve=j/$,Ce=Y/$;return de=_.calcPresentationTimeFromMediaTime(ve,C),T(_,C,oe=m(C,Ce,de,ve,_,de+Ce,I,x),I)?(oe.replacementTime=X||j,W=D(W,"Number",oe.replacementNumber),W=D(W,"Time",oe.replacementTime),oe.media=W,oe.mediaRange=ue,oe):null}},3636:function(b,g,S){var F=S(5448),R=S(3393),y=S(7387);function v(m,T){var U=(m=m||{}).timelineConverter;function N(){if(!U||!U.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(R.Z.MISSING_CONFIG_ERROR)}function _(I,C){if(N(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;C=Math.max(C,0);var Y=(0,y.NF)(U,T,I,C);if(Y){Y.replacementTime=Math.round((C-1)*I.segmentDuration*I.timescale,10);var $=j.media;$=(0,y.vi)($,"Number",Y.replacementNumber),$=(0,y.vi)($,"Time",Y.replacementTime),Y.media=$}return Y}return{getSegmentByIndex:_,getSegmentByTime:function(I,C){if(N(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var Y=U.calcPeriodRelativeTimeFromMpdRelativeTime(I,C);return _(I,Math.floor(Y/j))},getMediaFinishedInformation:function(I){var C={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return C;var j=I.segmentDuration;return isNaN(j)?C.numberOfSegments=1:C.numberOfSegments=Math.ceil(I.adaptation.period.duration/j),C}}}v.__dashjs_factory_name="TemplateSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},1724:function(b,g,S){var F=S(5448),R=S(3393),y=S(7387);function v(m,T){var U=(m=m||{}).timelineConverter,N=m.dashMetrics;function _(){if(!U)throw new Error(R.Z.MISSING_CONFIG_ERROR)}function I(j,Y){var $,W,ue,x,X,de,oe,ve=j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList,Ce=ve.SegmentTimeline,Xe=ve.SegmentURL_asArray,Ae=0,Ze=-1;oe=j.timescale;var it=!1;for(ue=0,x=($=Ce.S_asArray).length;ue<x&&!it;ue++)for(de=0,(W=$[ue]).hasOwnProperty("r")&&(de=W.r),W.hasOwnProperty("t")&&(Ae=W.t),de<0&&(de=C(j,$[ue+1],W,oe,Ae/oe)),X=0;X<=de&&!it;X++)(it=Y(Ae,ve,Xe,W,oe,++Ze,ue))&&(j.segmentDuration=W.d/oe),Ae+=W.d}function C(j,Y,$,W,ue){var x;if(Y&&Y.hasOwnProperty("t"))x=Y.t/W;else try{var X=0;if(isNaN(j.adaptation.period.start)||isNaN(j.adaptation.period.duration)||!isFinite(j.adaptation.period.duration)){var de=N.getCurrentDVRInfo();X=isNaN(de.end)?0:de.end}else X=j.adaptation.period.start+j.adaptation.period.duration;x=U.calcMediaTimeFromPresentationTime(X,j),j.segmentDuration=$.d/W}catch(oe){x=0}return Math.max(Math.ceil((x-ue)/($.d/W))-1,0)}return{getSegmentByIndex:function(j,Y,$){if(_(),!j)return null;var W=null,ue=!1;return I(j,function(x,X,de,oe,ve,Ce,Xe){if(ue||$<0){var Ae=X.media,Ze=oe.mediaRange;return de&&(Ae=de[Xe].media||"",Ze=de[Xe].mediaRange),W=(0,y.TJ)(U,T,j,x,oe.d,ve,Ae,Ze,Ce,oe.tManifest),!0}return x>=$*ve-.5*oe.d&&(ue=!0),!1}),W},getSegmentByTime:function(j,Y){if(_(),!j)return null;Y===void 0&&(Y=null);var $=null,W=U.calcMediaTimeFromPresentationTime(Y,j);return I(j,function(ue,x,X,de,oe,ve,Ce){var Xe=parseFloat((W*oe).toPrecision(15));if(Xe<ue+de.d&&Xe>=ue){var Ae=x.media,Ze=de.mediaRange;return X&&(Ae=X[Ce].media||"",Ze=X[Ce].mediaRange),$=(0,y.TJ)(U,T,j,ue,de.d,oe,Ae,Ze,ve,de.tManifest),!0}return!1}),$},getMediaFinishedInformation:function(j){if(!j)return 0;var Y,$,W,ue,x,X,de,oe=(j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList).SegmentTimeline,ve=0,Ce=0,Xe=0;for(de=j.timescale,ue=(Y=oe.S_asArray).length,W=0;W<ue;W++)for(X=0,($=Y[W]).hasOwnProperty("r")&&(X=$.r),$.hasOwnProperty("t")&&(Ce=(ve=$.t)/de),X<0&&(X=C(j,Y[W+1],$,de,Ce)),x=0;x<=X;x++)Xe++,Ce=(ve+=$.d)/de;return{numberOfSegments:Xe,mediaTimeOfLastSignaledSegment:Ce}}}}v.__dashjs_factory_name="TimelineSegmentsGetter";var D=F.Z.getClassFactory(v);g.Z=D},2011:function(b,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(b,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.schemeIdUri="",this.value=""}},1139:function(b,g,S){S.d(g,{Z:function(){return Hm}});var F=S(452),R=S.n(F),y=S(3393),v=S(1553),D=S(3860),m=S(5595),T=S(8512),U=S(5448),N=S(6398),_=S(8825);function I(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,se=this.context,Q=(0,m.Z)(se).getInstance();function Me(){he(),ge=!1,Se=0,Ee=0,Be=0,Z=!1,ze=!0,_e=!1,le=!1,Le=NaN,De=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,xt,L),Q.off(T.Z.LOADING_PROGRESS,Lt,L),Q.off(T.Z.MANIFEST_UPDATED,qt,L),Q.off(T.Z.STREAMS_COMPOSED,Ve,L),Q.off(_.Z.PLAYBACK_ENDED,bt,L),Q.off(_.Z.STREAM_INITIALIZING,ut,L),Q.off(_.Z.REPRESENTATION_SWITCH,tt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Wt(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",xn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",It),H.removeEventListener("seeked",$t),H.removeEventListener("timeupdate",Zt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",vn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",Nn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),fe=null,H=null,ie=null,me=null}function be(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ke(Ke)-at()).toFixed(5))}function ke(Ke){var Mt=Ke||ie;return Mt.start+Mt.duration}function Re(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Ke&&me&&dt(at()),H.play()):ge=!0}function he(){ie&&H&&H.pause()}function xe(Ke){var Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(Le)?H.getTime():Le;Ke!==sr&&((we=fn===!0)||(Le=Ke),P.info("Requesting seek to time: "+Ke+(we?" (internal)":"")),me&&Tn&&dt(Ke),H.setCurrentTime(Ke,Mt))}}function We(){if(ie&&H&&me){var Ke=B&&B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=ee.getCurrentDVRInfo(Ke);return Mt&&Mt.range?Mt.range.end:0}}function dt(Ke){var Mt=new Date(re.getClientReferenceTime()),fn=J.getRegularPeriods()[0],Tn=re.calcPresentationTimeFromWallTime(Mt,fn);Se=Tn-Ke}function at(){return ie&&H?H.getTime():null}function Je(){return ie&&H?H.isPaused():null}function ht(){return ie&&H?H.isSeeking():null}function Bt(){return ie&&H?H.isStalled():null}function Gt(){return ie&&H?H.getPlaybackRate():null}function kt(){return ie&&H?H.getEnded():null}function Ft(){return me}function An(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Je()&&me&&H.getReadyState()!==0&&!ht()&&!Z){Ke||(Ke=B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO);var Mt=at(),fn=nt(Mt,Ke),Tn=!isNaN(fn)&&fn!==Mt;Tn&&!ht()&&(Bt()||je||H.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(Mt)),xe(fn,!1,!1))}}function nt(Ke,Mt){var fn=ee.getCurrentDVRInfo(Mt),Tn=fn?fn.range:null;return Tn?Ke>Tn.end?Math.max(Tn.end-Se,Tn.start):Ke>0&&Ke+.25<Tn.start&&Math.abs(Ke-Tn.start)<31536e4?_e?Math.max(Tn.end-Se,Tn.start):Tn.start:Ke:NaN}function mt(){fe===null&&(fe=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date}),Ft()){var Ke=Date.now();(isNaN(De)||Ke>De+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),Je()?function(){var Mt=Date.now();(!qe||Mt>qe+500)&&(qe=Mt,Zt())}():An(),De=Ke)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function Wt(){clearInterval(fe),fe=null}function xt(Ke){var Mt=J.convertRepresentationToRepresentationInfo(Ke.currentRepresentation),fn=Mt?Mt.mediaInfo.streamInfo:null;fn!==null&&ie.id===fn.id&&(ie=fn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Yt(Ke){Ke.streamId===B.getActiveStreamInfo().id&&(je=Ke.state===D.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Ke.mediaType,Ke.state===D.Z.BUFFER_EMPTY))}function Dn(){P.info("Native video element event: play"),An(),mt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:at()})}function xn(){P.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:at()})}function rr(){P.info("Native video element event: playing"),we=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:at()})}function ir(){P.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:kt()})}function It(){if(!we){var Ke=at();isNaN(Le)||Le===Ke||(Ke=Le),Le=NaN,P.info("Seeking to: "+Ke),mt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Ke,streamId:ie.id})}}function $t(){P.info("Native video element event: seeked"),we=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Zt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:be(),time:at(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function vn(){var Ke=Gt();P.info("Native video element event: ratechange: ",Ke),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Ke})}function Pn(){P.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),mt()}function Nn(){P.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){P.info("Native video element event: ended"),he(),Wt();var Ke=B?B.getActiveStreamInfo():null;Ke&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:Ke.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function bt(Ke){if(fe&&Ke.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Mt=Ke.seekTime?Ke.seekTime:ke();H.setCurrentTime(Mt),he(),Wt()}}function Sn(Ke){var Mt=Ke.target||Ke.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Mt.error})}function En(){me=!1}function Lt(Ke){if(Ke.stream===!1&&_e&&!isNaN(Ke.request.duration)){var Mt=1.2*Ke.request.duration;Mt>Se&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Mt.toFixed(2)),Se=Mt,Ee=Mt)}}function On(Ke){Q.trigger(T.Z.PLAYBACK_STALLED,{e:Ke})}function ut(Ke){var Mt;(Mt=Ke.mediaInfo)&&Mt.supplementalProperties&&Mt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Mt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),_e=!0)}function tt(Ke){var Mt=B.getActiveStreamInfo();Ke&&Mt&&Ke.currentRepresentation&&Ke.streamId&&Ke.streamId===Mt.id&&Ke.mediaType&&(Ke.mediaType===y.Z.VIDEO||Ke.mediaType===y.Z.AUDIO)&&(ze=Ke.currentRepresentation.availabilityTimeComplete,(_e=!ze)&&!le&&(le=!0))}function qt(){Z=!0}function Ve(){Z=!1}return L={initialize:function(Ke,Mt){ie=Ke,Mt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",xn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",It),H.addEventListener("seeked",$t),H.addEventListener("timeupdate",Zt),H.addEventListener("progress",un),H.addEventListener("ratechange",vn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",Nn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),me=ie.manifestInfo.isDynamic,je=!1,we=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,xt,L),Q.on(T.Z.LOADING_PROGRESS,Lt,L),Q.on(T.Z.MANIFEST_UPDATED,qt,L),Q.on(T.Z.STREAMS_COMPOSED,Ve,L),Q.on(_.Z.PLAYBACK_ENDED,bt,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,ut,L),Q.on(_.Z.REPRESENTATION_SWITCH,tt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Yt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),ge&&(ge=!1,Re()))},setConfig:function(Ke){Ke&&(Ke.streamController&&(B=Ke.streamController),Ke.serviceDescriptionController&&(V=Ke.serviceDescriptionController),Ke.dashMetrics&&(ee=Ke.dashMetrics),Ke.adapter&&(J=Ke.adapter),Ke.videoModel&&(H=Ke.videoModel),Ke.timelineConverter&&(re=Ke.timelineConverter),Ke.settings&&(ae=Ke.settings))},getTimeToStreamEnd:be,getBufferLevel:function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Mt=null;return B.getActiveStreamProcessors().forEach(function(fn){if(!Ke||Ke.length===0||Ke.indexOf(fn.getType())===-1){var Tn=fn.getBufferLevel();Mt=Mt===null?Tn:Math.min(Mt,Tn)}}),Mt},getPlaybackStalled:function(){return je},getTime:at,getLowLatencyModeEnabled:function(){return _e},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return Z},getPlaybackRate:Gt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:kt,getIsDynamic:Ft,getStreamController:function(){return B},computeAndSetLiveDelay:function(Ke,Mt){var fn,Tn,sr,Zr=!isNaN(Ke)&&isFinite(Ke)?Ke:NaN,Ai=J.getSuggestedPresentationDelay(),zr=V.getServiceDescriptionSettings();return fn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ai!==null&&!isNaN(Ai)&&Ai>0?Ai:isNaN(Zr)?Mt&&!isNaN(Mt.minBufferTime)?4*Mt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Be=sr),Tn=Mt&&Mt.dvrWindowSize>0?Math.min(fn,Mt.dvrWindowSize):fn,Se=Tn,Ee=Tn,Tn},getLiveDelay:function(){return Se},getOriginalLiveDelay:function(){return Ee},getCurrentLiveLatency:function(){if(!me||isNaN(Be))return NaN;var Ke=at();if(isNaN(Ke)||Ke===0)return 0;var Mt=new Date().getTime()+1e3*re.getClientTimeOffset();return Math.max(((Mt-Be-1e3*Ke)/1e3).toFixed(3),0)},play:Re,isPaused:Je,isStalled:Bt,pause:he,isSeeking:ht,getStreamEndTime:ke,seek:xe,seekToOriginalLive:function(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=We();if(Tn!==0){var sr=Tn-(Se=Ee);xe(sr,Ke,Mt,fn)}},seekToCurrentLive:function(){var Ke=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=We();if(Tn!==0){var sr=Tn-Se;xe(sr,Ke,Mt,fn)}},reset:Me,updateCurrentTime:An,getAvailabilityStartTime:function(){return Be}},P=(0,N.Z)(se).getInstance().getLogger(L),Me(),L}I.__dashjs_factory_name="PlaybackController";var C=U.Z.getSingletonFactory(I),j=S(3186),Y="loading",$="executed",W="failed";function ue(L){var P,B,V,ee,J=(L=L||{}).eventBus,H=L.events,re=L.dashMetrics,fe=L.fragmentLoader,Se=L.debug,Ee=L.streamInfo,ie=L.type;function me(Z){var le;return!!Z&&(le=!1,V.some(function(ae){if(se=Z,Q=ae,!isNaN(se.index)&&se.startTime===Q.startTime&&se.adaptationIndex===Q.adaptationIndex&&se.type===Q.type||function(Me,be){return isNaN(Me.index)&&isNaN(be.index)&&Me.quality===be.quality}(Z,ae)||function(Me,be){return Me.action===j.Z.ACTION_COMPLETE&&Me.action===be.action}(Z,ae))return le=!0;var se,Q}),le)}function ge(Z){return isNaN(Z.duration)?.25:Math.min(Z.duration/8,.5)}function qe(Z){V=V.filter(function(le){var ae=ge(le);return isNaN(le.startTime)||Z!==void 0&&le.startTime>=Z-ae})}function De(Z,le){le<=Z+.5||(V=V.filter(function(ae){var se=ge(ae);return isNaN(ae.startTime)||ae.startTime>=le-se||isNaN(ae.duration)||ae.startTime+ae.duration<=Z+se}))}function Be(Z,le,ae){for(var se=Z.length-1;se>=0;se--){var Q=Z[se],Me=Q.startTime,be=Me+Q.duration;if(ae=isNaN(ae)?ge(Q):ae,!isNaN(Me)&&!isNaN(be)&&le+ae>=Me&&le-ae<be||isNaN(Me)&&isNaN(le))return Q}return null}function ze(Z,le){re.addSchedulingInfo(Z,le),re.addRequestsQueue(Z.mediaType,ee,V)}function _e(Z){Z.sender===fe&&(ee.splice(ee.indexOf(Z.request),1),Z.response&&!Z.error&&V.push(Z.request),ze(Z.request,Z.error?W:$),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie}))}function Le(Z){Z.sender===fe&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie})}function we(Z){Z.sender===fe&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:Z.request},{streamId:Ee.id,mediaType:ie})}function je(){V=[],ee=[]}return P={getStreamId:function(){return Ee.id},getType:function(){return ie},getRequests:function(Z){var le=Z?Z.state instanceof Array?Z.state:[Z.state]:[],ae=[];return le.forEach(function(se){var Q=function(Me){var be;switch(Me){case Y:be=ee;break;case $:be=V;break;default:be=[]}return be}(se);ae=ae.concat(function(Me,be){return be.hasOwnProperty("time")?[Be(Me,be.time,be.threshold)]:Me.filter(function(ke){for(var Re in be)if(Re!=="state"&&be.hasOwnProperty(Re)&&ke[Re]!=be[Re])return!1;return!0})}(Q,Z))}),ae},isFragmentLoaded:me,isFragmentLoadedOrPending:function(Z){var le,ae=!1,se=0;if(!(ae=me(Z)))for(se=0;se<ee.length;se++)le=ee[se],Z.url===le.url&&Z.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:qe,removeExecutedRequestsAfterTime:function(Z){V=V.filter(function(le){return isNaN(le.startTime)||Z!==void 0&&le.startTime<Z})},syncExecutedRequestsWithBufferedRange:function(Z,le){if(Z&&Z.length!==0){for(var ae=0,se=0,Q=Z.length;se<Q;se++)De(ae,Z.start(se)),ae=Z.end(se);le>0&&De(ae,le)}else qe()},abortRequests:function(){B.debug("abort requests"),fe.abort(),ee=[]},executeRequest:function(Z){Z.action===j.Z.ACTION_DOWNLOAD?(ze(Z,Y),ee.push(Z),function(le){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Ee.id,mediaType:ie}),fe.load(le)}(Z)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,_e,this),J.off(H.LOADING_DATA_PROGRESS,Le,this),J.off(H.LOADING_ABANDONED,we,this),fe&&fe.reset(),je()},resetInitialSettings:je,addExecutedRequest:function(Z){V.push(Z)}},B=Se.getLogger(P),je(),J.on(H.LOADING_COMPLETED,_e,P),J.on(H.LOADING_DATA_PROGRESS,Le,P),J.on(H.LOADING_ABANDONED,we,P),P}ue.__dashjs_factory_name="FragmentModel";var x=U.Z.getClassFactory(ue);x.FRAGMENT_MODEL_LOADING=Y,x.FRAGMENT_MODEL_EXECUTED=$,x.FRAGMENT_MODEL_CANCELED="canceled",x.FRAGMENT_MODEL_FAILED=W,U.Z.updateClassFactory(ue.__dashjs_factory_name,x);var X=x,de=S(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},oe(L)}function ve(L,P){return ve=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},ve(L,P)}function Ce(L,P){return!P||oe(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Xe(L){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Xe(L)}var Ae=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&ve(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Xe(P);if(B){var re=Xe(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Ce(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(S(2230).Z)),Ze=S(1264),it=S(7855);function st(L){var P,B,V,ee,J,H,re=this.context,fe=(0,Ze.Z)(re).getInstance(),Se=L.textController,Ee=L.eventBus,ie=[],me=[],ge=!1,qe=L.mediaSource,De=null;function Be(Q){return new Promise(function(Me){se(function(){ee.changeType&&ee.changeType(Q),Me()})})}function ze(Q){return ee=Se.getTextSourceBuffer(Q),Promise.resolve()}function _e(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",le,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(le,50)}else H=setInterval(le,50)}function Le(Q){return new Promise(function(Me){ee&&fe.get().streaming.buffer.useAppendWindow?se(function(){try{if(!ee)return void Me();var be=qe.duration,ke=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(be=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(ke=Q.start),ee.appendWindowEnd===be&&ee.appendWindowStart===ke||(ee.appendWindowStart=0,ee.appendWindowEnd=be+.01,ee.appendWindowStart=Math.max(ke-.1,0),V.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Me()}catch(Re){V.warn("Failed to set append window"),Me()}}):Me()})}function we(Q){return new Promise(function(Me){ee?se(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,V.debug("Set MSE timestamp offset to ".concat(Q))),Me()}catch(be){Me()}}):Me()})}function je(){if(!ge&&me.length>0){ge=!0;var Q=me[0];me.splice(0,1);var Me=function(){ge=!1,me.length>0&&je.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==it.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{De=Q.request,Q.data.bytes.byteLength===0?Me.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),se(Me.bind(this)))}catch(be){V.fatal('SourceBuffer append failed "'+be+'"'),me.length>0?je():ge=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new de.Z(be.code,be.message)})}}}function Z(){ie.length>0&&(ee.updating||(ie.shift()(),Z()))}function le(){ee.updating||Z()}function ae(Q){var Me,be,ke=Q.target||{};Me=T.Z.SOURCE_BUFFER_ERROR,be={error:ke,lastRequestAppended:De},Ee.trigger(Me,be,{streamId:J.streamInfo.id,mediaType:B})}function se(Q){ie.push(Q),ee.updating||Z()}return P={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return V.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Me=this,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ke,Re){Q?(me.push({data:Q,promise:{resolve:ke,reject:Re},request:be}),se(je.bind(Me))):Re({chunk:Q,error:new de.Z(Ae.APPEND_ERROR_CODE,Ae.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Me,be){var ke=Q.start,Re=Q.end;ke>=0&&Re>ke?se(function(){try{ee.remove(ke,Re),se(function(){Me({from:ke,to:Re,unintended:!1}),Q.resolve&&Q.resolve()})}catch(he){be({from:ke,to:Re,unintended:!1,error:new de.Z(Ae.REMOVE_ERROR_CODE,Ae.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(he)}}):Me()})},abort:function(){return new Promise(function(Q){try{me=[],qe.readyState==="open"?se(function(){try{ee&&ee.abort(),Q()}catch(Me){Q()}}):(ee&&ee.setTextTrack&&qe.readyState==="ended"&&ee.abort(),Q())}catch(Me){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",le,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){V.error(Q)}}(),ge=!1,me=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),qe.removeSourceBuffer(ee))}catch(Q){}ee=null}De=null},updateTimestampOffset:we,initializeForStreamSwitch:function(Q,Me,be){B=(J=Q).type;var ke=J.codec;(function(he){ee=he.getBuffer()})(be),_e();var Re=[];return Re.push(new Promise(function(he){se(function(){var xe=ee.appendWindowStart,We=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=xe,ee.appendWindowEnd=We),he()})})),Re.push(Le(J.streamInfo)),fe.get().streaming.buffer.useChangeTypeForTrackSwitch&&Re.push(Be(ke)),Me&&Me.MSETimeOffset!==void 0&&Re.push(we(Me.MSETimeOffset)),Promise.all(Re)},initializeForFirstUse:function(Q,Me,be){B=(J=Me).type;var ke=J.codec;try{if(ke.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return ze(Q);ee=qe.addSourceBuffer(ke),_e();var Re=[];return Re.push(Le(J.streamInfo)),be&&be.MSETimeOffset!==void 0&&Re.push(we(be.MSETimeOffset)),Promise.all(Re)}catch(he){return J.type==y.Z.TEXT&&!J.isFragmented||ke.indexOf('codecs="stpp')!==-1||ke.indexOf('codecs="vtt')!==-1||ke.indexOf("text/vtt")!==-1?ze(Q):Promise.reject(he)}},updateAppendWindow:Le,changeType:Be},V=(0,N.Z)(re).getInstance().getLogger(P),P}st.__dashjs_factory_name="SourceBufferSink";var Ye=U.Z.getClassFactory(st);function lt(L){var P,B,V,ee=this.context,J=[],H=L;function re(fe,Se){return J=J.filter(function(Ee){return!((isNaN(Se)||Ee.start<Se)&&(isNaN(fe)||Ee.end>fe))}),Promise.resolve()}return P={getAllBufferRanges:function(){for(var fe=[],Se=0;Se<J.length;Se++){var Ee=J[Se];fe.length===0||Ee.start>fe[fe.length-1].end?fe.push({start:Ee.start,end:Ee.end}):fe[fe.length-1].end=Ee.end}var ie={start:function(me){return fe[me].start},end:function(me){return fe[me].end}};return Object.defineProperty(ie,"length",{get:function(){return fe.length}}),ie},append:function(fe){return fe.segmentType!=="InitializationSegment"?(J.push(fe),J.sort(function(Se,Ee){return Se.start-Ee.start}),V=null):V=fe,B.debug("PreBufferSink appended chunk s: "+fe.start+"; e: "+fe.end),H&&H({chunk:fe}),Promise.resolve()},remove:re,abort:function(){return Promise.resolve()},discharge:function(fe,Se){var Ee=function(ie,me){return J.filter(function(ge){return(isNaN(me)||ge.start<me)&&(isNaN(ie)||ge.end>ie)})}(fe,Se);return V&&(Ee.push(V),V=null),re(fe,Se),Ee},reset:function(){J=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(fe){fe()},getBuffer:function(){return this}},B=(0,N.Z)(ee).getInstance().getLogger(P),P}lt.__dashjs_factory_name="PreBufferSink";var At=U.Z.getClassFactory(lt);function Oe(){var L={};return{save:function(P){var B=P.streamId,V=P.representationId;L[B]=L[B]||{},L[B][V]=P},extract:function(P,B){return L&&L[P]&&L[P][B]?L[P][B]:null},reset:function(){L={}}}}Oe.__dashjs_factory_name="InitCache";var Qe=U.Z.getSingletonFactory(Oe),ct=.01,Qt="BufferController";function Kt(L){L=L||{};var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z=this.context,le=(0,m.Z)(Z).getInstance(),ae=L.errHandler,se=L.fragmentModel,Q=L.representationController,Me=L.adapter,be=L.textController,ke=L.abrController,Re=L.playbackController,he=L.streamInfo,xe=L.type,We=L.settings;function dt(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Ve,Ke){H=tt,Se&&qt&&typeof Se.discharge=="function"?(Ee=Se,Je(qt).then(function(){Ve()}).catch(function(Mt){Ke(Mt)})):Ve()})}function at(tt){return Me.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(tt))}function Je(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ve,Ke){_e&&tt?H?(ie=!1,Bt(tt,qt).then(function(Mt){Ve(Mt)}).catch(function(Mt){Ke(Mt)})):(ie=!0,ht().then(function(Mt){Ve(Mt)}).catch(function(Mt){Ke(Mt)})):Ve(null)})}function ht(){var tt=this;return new Promise(function(qt,Ve){var Ke=ke.getQualityFor(xe,he.id);Se=At(Z).create(nt.bind(tt)),Pn(at(Ke)).then(function(){qt(Se)}).catch(function(){Ve()})})}function Bt(tt,qt){return new Promise(function(Ve,Ke){var Mt=ke.getQualityFor(xe,he.id);Se=Ye(Z).create({mediaSource:H,textController:be,eventBus:le}),function(fn,Tn,sr){var Zr=at(sr);return Tn&&Tn[xe]&&(xe===y.Z.VIDEO||xe===y.Z.AUDIO)?Se.initializeForStreamSwitch(fn,Zr,Tn[xe]):Se.initializeForFirstUse(he,fn,Zr)}(tt,qt,Mt).then(function(){return Pn(at(Mt))}).then(function(){Ve(Se)}).catch(function(fn){B.fatal("Caught error on create SourceBuffer: "+fn),ae.error(new de.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+xe)),Ke(fn)})})}function Gt(tt){We.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",xe+"'s init cache"),_e.save(tt.chunk)),B.debug("Append Init fragment",xe," with representationId:",tt.chunk.representationId," and quality:",tt.chunk.quality,", data size:",tt.chunk.bytes.byteLength),Ft(tt.chunk)}function kt(tt){Ft(tt.chunk,tt.request)}function Ft(tt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Se&&(Se.append(tt,qt).then(function(Ve){nt(Ve)}).catch(function(Ve){nt(Ve)}),tt.mediaInfo.type===y.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:tt}))}function An(tt){if(tt&&tt.length>0)for(var qt=0,Ve=tt.length;qt<Ve;qt++)B.debug("Buffered range: "+tt.start(qt)+" - "+tt.end(qt)+", currentTime = ",Re.getTime())}function nt(tt){if(tt.error)return tt.error.code===22&&function(){if(ze=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var Ke=Math.max(.2*J,1),Mt=J-Ke,fn=Math.min(We.get().streaming.buffer.bufferTimeAtTopQuality,.9*Mt),Tn=Math.min(We.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Mt),sr={streaming:{buffer:{bufferToKeep:parseFloat(Ke.toFixed(5)),bufferTimeAtTopQuality:parseFloat(fn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};We.update(sr)}}(),void(tt.error.code!==22&&Lt()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:tt.chunk.start}),Zt($t())));if(Se&&(Dn(),ze=!1,(qe=tt.chunk)&&qe.endFragment)){qe&&!isNaN(qe.index)&&(re=Math.max(qe.index,re),xn());var qt=Se.getAllBufferRanges();qe.segmentType===it.w.MEDIA_SEGMENT_TYPE&&(An(qt),xt(),function(){if(!isNaN(je)&&!ie)if(xe===y.Z.AUDIO||xe===y.Z.VIDEO){var Ke=Re.getTime(),Mt=Yt(Ke,0),fn=Yt(je,0);if(Mt&&fn&&Mt.start===fn.start)je=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Yt(je,Tn);sr&&(We.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ke-je)>Tn?je<=sr.end&&Re.seek(Math.max(je,sr.start),!1,!0):Ke<sr.start&&Re.seek(sr.start,!1,!0))}}else je=NaN}());var Ve=!1;me&&(me.indexOf(qe)>0&&(Ve=!0),me=null),qe&&!Ve&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:qe.quality,startTime:qe.start,index:qe.index,bufferedRanges:qt,segmentType:qe.segmentType,mediaType:xe})}}function mt(){return new Promise(function(tt,qt){var Ve=Wt();if(!Ve||Ve.length===0)return xt(),void tt();Zt(Ve).then(function(){tt()}).catch(function(Ke){qt(Ke)})})}function Wt(tt){var qt=[],Ve=Se.getAllBufferRanges();if(!Ve||Ve.length===0)return qt;if(!tt&&tt!==0||isNaN(tt))qt.push({start:Ve.start(0),end:Ve.end(Ve.length-1)+.5});else{var Ke=function(fn,Tn){var sr=We.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(fn-Zr>sr){var Ai=Math.max(0,fn-sr),zr=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(zr&&(Ai=Math.min(zr.startTime,Ai)),Ai>0)return{start:Zr,end:Ai}}return null}(tt,Ve),Mt=function(fn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(fn),Ai=he.manifestInfo.duration>=We.get().streaming.buffer.longFormContentDurationThreshold?We.get().streaming.buffer.bufferTimeAtTopQualityLongForm:We.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?fn:Math.min(Zr,fn+Ai);if(zr>=Tn.end(Tn.length-1))return null;var io=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:ct})[0];if(io&&(zr=Math.max(io.startTime+io.duration,zr)),We.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=fn&&fn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var js=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+fn+" and range to be pruned ["+js+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(tt,Ve);Ke&&qt.push(Ke),Mt&&qt.push(Mt)}return qt}function xt(){(!we||xe===y.Z.TEXT&&be.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),je=NaN}function Yt(tt,qt){if(!Se)return null;var Ve,Ke,Mt=Se.getAllBufferRanges(),fn=0,Tn=0,sr=null,Zr=null,Ai=0,zr=isNaN(qt)?.15:qt;if(Mt!=null){for(Ke=0,Ve=Mt.length;Ke<Ve;Ke++)if(fn=Mt.start(Ke),Tn=Mt.end(Ke),sr===null)Ai=Math.abs(fn-tt),(tt>=fn&&tt<Tn||Ai<=zr)&&(sr=fn,Zr=Tn);else{if(!((Ai=fn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(Re){var tt=Re.getTime()||0;ie&&(tt=isNaN(je)?0:je);var qt=We.get().streaming.gaps.jumpGaps&&!isNaN(We.get().streaming.gaps.smallGapLimit)?We.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(Ve,Ke){var Mt;return We.get().streaming.gaps.jumpGaps&&(Ke=We.get().streaming.gaps.smallGapLimit),(Mt=Yt(Ve,Ke))===null?0:Mt.end-Ve}(tt,qt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:xe,bufferLevel:ee}),rr()}}function xn(){var tt=re>=fe-1,qt=Re.getTimeToStreamEnd(he)-ee<1e-5;!tt&&!qt||V||(bt(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(he.id," and type ").concat(xe)))}function rr(){xe!==y.Z.AUDIO&&xe!==y.Z.VIDEO||((!Re.getLowLatencyModeEnabled()&&ee<We.get().streaming.buffer.stallThreshold||ee===0)&&!V?ir(D.Z.BUFFER_EMPTY):(V||ee>=We.get().streaming.buffer.stallThreshold||Re.getLowLatencyModeEnabled()&&ee>0)&&ir(D.Z.BUFFER_LOADED))}function ir(tt){ge===tt||tt===D.Z.BUFFER_EMPTY&&Re.getTime()===0||xe===y.Z.TEXT&&!be.isTextEnabled()||(ge=tt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:tt}),On(tt===D.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(tt===D.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function It(){Se&&xe!==y.Z.TEXT&&(V||Zt($t()))}function $t(){var tt=[],qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return tt;var Ve=Re.getTime(),Ke=Math.max(0,Ve-We.get().streaming.buffer.bufferToKeep),Mt=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ve,threshold:ct})[0];if(Mt)Ke=Math.min(Mt.startTime,Ke);else if(Ve===0&&Re.getIsDynamic())return[];if(qt.start(0)<=Ke){for(var fn={start:0,end:Ke},Tn=0;Tn<qt.length&&qt.end(Tn)<=Ke;Tn++)fn.end=qt.end(Tn);fn.start<fn.end&&tt.push(fn)}return tt}function Zt(tt){return new Promise(function(qt,Ve){if(tt&&Se&&tt.length!==0){var Ke=[];tt.forEach(function(Mt){Ke.push(function(fn){return new Promise(function(Tn,sr){fn.resolve=Tn,fn.reject=sr,Le.push(fn)})}(Mt))}),Be||un(),Promise.all(Ke).then(function(){qt()}).catch(function(Mt){Ve(Mt)})}else qt()})}function un(){try{if(Le.length===0||!Se)return B.debug("Nothing to prune, halt pruning"),Le=[],void(Be=!1);var tt=Se.getBuffer();if(!tt||!tt.buffered||tt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),Le=[],void(Be=!1);var qt=Le.shift();B.debug("".concat(xe,": Removing buffer from: ").concat(qt.start," to ").concat(qt.end)),Be=!0,Re.getTime()<qt.end&&bt(!1),Se.remove(qt).then(function(Ve){vn(Ve)}).catch(function(Ve){vn(Ve)})}catch(Ve){Be=!1}}function vn(tt){B.debug("onRemoved buffer from:",tt.from,"to",tt.to),Se&&(An(Se.getAllBufferRanges()),Le.length===0&&(Be=!1,Dn()),tt.unintended&&(B.warn("Detected unintended removal from:",tt.from,"to",tt.to,"setting streamprocessor time to",tt.from),On(T.Z.SEEK_TARGET,{time:tt.from})),Be?un():(we?we=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:tt.from,to:tt.to,unintended:tt.unintended,hasEnoughSpaceToAppend:Lt(),quotaExceeded:ze})))}function Pn(tt){return new Promise(function(qt){tt&&tt.MSETimeOffset!==void 0&&Se&&Se.updateTimestampOffset?Se.updateTimestampOffset(tt.MSETimeOffset).then(function(){qt()}).catch(function(){qt()}):qt()})}function Nn(){return Se&&!V?Se.updateAppendWindow(he):Promise.resolve()}function Fn(){++De*(We.get().streaming.wallclockTimeUpdateInterval/1e3)>=We.get().streaming.buffer.bufferPruningInterval&&(De=0,It())}function Gn(){rr()}function bt(tt){(V=tt)?On(T.Z.BUFFERING_COMPLETED):fe=Number.POSITIVE_INFINITY}function Sn(){try{var tt,qt,Ve=Se.getAllBufferRanges(),Ke=0;if(!Ve)return Ke;for(qt=0,tt=Ve.length;qt<tt;qt++)Ke+=Ve.end(qt)-Ve.start(qt);return Ke}catch(Mt){return 0}}function En(tt){try{var qt=tt,Ve=Se.getAllBufferRanges();if(!Ve||Ve.length===0)return NaN;for(var Ke=0;qt===tt&&Ke<Ve.length;){var Mt=Ve.start(Ke),fn=Ve.end(Ke);qt>=Mt&&qt<=fn&&(qt=fn),Ke+=1}return qt===tt?NaN:qt}catch(Tn){}}function Lt(){var tt=Sn();return isNaN(tt)||tt<J}function On(tt,qt){var Ve=qt||{};le.trigger(tt,Ve,{streamId:he.id,mediaType:xe})}function ut(tt,qt){if(J=Number.POSITIVE_INFINITY,ge=void 0,fe=Number.POSITIVE_INFINITY,re=0,qe=null,V=!1,Be=!1,ze=!1,ee=0,De=0,Le=[],je=NaN,ie=!1,Se){var Ve=Se;Se=null,tt||qt||Ve.abort().then(function(){Ve.reset(qt),Ve=null})}we=!1}return P={initialize:function(tt){dt(tt),le.on(T.Z.INIT_FRAGMENT_LOADED,Gt,P),le.on(T.Z.MEDIA_FRAGMENT_LOADED,kt,P),le.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,P),le.on(_.Z.PLAYBACK_PLAYING,Jt,P),le.on(_.Z.PLAYBACK_PROGRESS,xt,P),le.on(_.Z.PLAYBACK_TIME_UPDATED,xt,P),le.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,P),le.on(_.Z.PLAYBACK_STALLED,en,P)},getStreamId:function(){return he.id},getType:function(){return xe},getBufferControllerType:function(){return Qt},createBufferSink:Je,dischargePreBuffer:function(){if(Se&&Ee&&typeof Ee.discharge=="function"){var tt=Ee.getAllBufferRanges();if(tt.length>0){for(var qt="Beginning "+xe+"PreBuffer discharge, adding buffer for:",Ve=0;Ve<tt.length;Ve++)qt+=" start: "+tt.start(Ve)+", end: "+tt.end(Ve)+";";B.debug(qt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");me=[];for(var Ke=Ee.discharge(),Mt=null,fn=0;fn<Ke.length;fn++){var Tn=Ke[fn];if(Tn.segmentType!==it.w.INIT_SEGMENT_TYPE){var sr=_e.extract(Tn.streamId,Tn.representationId);sr&&Mt!==sr&&(me.push(sr),Se.append(sr),Mt=sr)}me.push(Tn),Se.append(Tn)}Ee.reset(),Ee=null}},getBuffer:function(){return Se},getBufferLevel:function(){return ee},getRangeAt:Yt,hasBufferAtTime:function(tt){try{var qt=Se.getAllBufferRanges();if(!qt||qt.length===0)return!1;for(var Ve=0;Ve<qt.length;){var Ke=qt.start(Ve),Mt=qt.end(Ve);if(tt>=Ke&&tt<=Mt)return!0;Ve+=1}return!1}catch(fn){return B.error(fn),!1}},pruneBuffer:It,setMediaSource:dt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(tt){var qt=_e.extract(he.id,tt);return!!qt&&(B.info("Append Init fragment",xe," with representationId:",qt.representationId," and quality:",qt.quality,", data size:",qt.bytes.byteLength),Ft(qt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:bt,getIsPruningInProgress:function(){return Be},reset:function(tt,qt){le.off(T.Z.INIT_FRAGMENT_LOADED,Gt,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,kt,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),le.off(_.Z.PLAYBACK_PLAYING,Jt,this),le.off(_.Z.PLAYBACK_PROGRESS,xt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,xt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),le.off(_.Z.PLAYBACK_STALLED,en,this),ut(tt,qt)},prepareForPlaybackSeek:function(){return V&&bt(!1),Se.abort()},prepareForReplacementTrackSwitch:function(tt){return new Promise(function(qt,Ve){Se.abort().then(function(){return Nn()}).then(function(){return We.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){return mt()}).then(function(){bt(!1),qt()}).catch(function(Ke){Ve(Ke)})})},prepareForNonReplacementTrackSwitch:function(tt){return new Promise(function(qt,Ve){Nn().then(function(){return We.get().streaming.buffer.useChangeTypeForTrackSwitch?Se.changeType(tt):Promise.resolve()}).then(function(){qt()}).catch(function(Ke){Ve(Ke)})})},prepareForForceReplacementQualitySwitch:function(tt){return new Promise(function(qt,Ve){Se.abort().then(function(){return Nn()}).then(function(){return mt()}).then(function(){return Pn(tt)}).then(function(){bt(!1),qt()}).catch(function(Ke){Ve(Ke)})})},updateAppendWindow:Nn,getAllRangesWithSafetyFactor:Wt,getContinuousBufferTimeForTargetTime:En,clearBuffers:Zt,pruneAllSafely:mt,updateBufferTimestampOffset:Pn,setSeekTarget:function(tt){je=tt},segmentRequestingCompleted:function(tt){isNaN(tt)||(fe=tt,xn())}},B=(0,N.Z)(Z).getInstance().getLogger(P),_e=Qe(Z).getInstance(),ut(),P}Kt.__dashjs_factory_name=Qt;var Tt=U.Z.getClassFactory(Kt),Pt="NotFragmentedTextBufferController";function Ie(L){L=L||{};var P,B,V,ee,J,H,re=this.context,fe=(0,m.Z)(re).getInstance(),Se=L.textController,Ee=L.errHandler,ie=L.streamInfo,me=L.type;function ge(Be){ee=Be}function qe(Be){var ze,_e;B!==Be&&(B=Be)&&(ze=T.Z.BUFFERING_COMPLETED,_e={},fe.trigger(ze,_e,{streamId:ie.id,mediaType:me}))}function De(Be){Be.chunk.bytes&&!B&&(H.save(Be.chunk),J.append(Be.chunk),qe(!0))}return P={initialize:function(Be){ge(Be)},getStreamId:function(){return ie.id},getType:function(){return me},getBufferControllerType:function(){return Pt},createBufferSink:function(Be){return new Promise(function(ze,_e){try{(J=Ye(re).create({mediaSource:ee,textController:Se,eventBus:fe})).initializeForFirstUse(ie,Be),V||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),V=!0),ze(J)}catch(Le){Ee.error(new de.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),_e(Le)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ge,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Be){return H.extract(ie.id,Be)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:qe,getIsPruningInProgress:function(){return!1},reset:function(Be){fe.off(T.Z.INIT_FRAGMENT_LOADED,De,P),!Be&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,ee=null,B=!1,H=Qe(re).getInstance(),fe.on(T.Z.INIT_FRAGMENT_LOADED,De,P),P}Ie.__dashjs_factory_name=Pt;var ne=U.Z.getClassFactory(Ie);function Fe(L){L=L||{};var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=L.dashMetrics,ze=L.mediaPlayerModel,_e=L.fragmentModel,Le=L.abrController,we=L.playbackController,je=L.textController,Z=L.type,le=L.bufferController,ae=L.representationController,se=L.settings;function Q(){me=!0}function Me(){me=!1}function be(Bt){if(!le.getIsBufferingCompleted()){ke();var Gt=isNaN(Bt)?0:Bt;J=setTimeout(Re,Gt)}}function ke(){J&&(clearTimeout(J),J=null)}function Re(){try{if(function(){try{return Z===y.Z.TEXT&&!je.isTextEnabled()||we.isPaused()&&(!we.getStreamController().getInitialPlayback()||!we.getStreamController().getAutoPlay())&&!se.get().streaming.scheduling.scheduleWhilePaused}catch(kt){return!1}}())return void ke();if(function(){try{return!!me&&ae.getCurrentRepresentationInfo()&&(isNaN(Se)||Ee||(kt=B.id,Ft=Le.getMaxAllowedIndexFor(Z,kt),!(!isNaN(fe)&&fe==Ft||(V.info("Top quality "+Z+" index has changed from "+fe+" to "+Ft),fe=Ft,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!Z||!An||Be.getCurrentBufferLevel(Z)<he()}())}catch(An){return!1}var kt,Ft}()){var Bt=!1;ge&&(Bt=Le.checkPlaybackQuality(Z,B.id)),Bt||(Gt=ae.getCurrentRepresentationInfo(),ie||Gt.quality!==Se||Ee?(Ee?(V.debug("Switch track for "+Z+", representation id = "+Gt.id),Ee=!1):V.debug("Quality has changed, get init request for representationid = "+Gt.id),De.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Gt.id,sender:P},{streamId:B.id,mediaType:Z}),ge=!1,ie=!1):(V.debug("Media segment needed for ".concat(Z," and stream id ").concat(B.id)),De.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:Z}),ge=!0))}else be(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}catch(kt){be(we.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}var Gt}function he(){var Bt=NaN,Gt=ae.getCurrentRepresentationInfo();return Z&&Gt&&(Bt=Z===y.Z.TEXT?function(){try{if(je.isTextEnabled()){var kt=ae.getCurrentRepresentationInfo();if(isNaN(kt.fragmentDuration)){var Ft=Be.getCurrentSchedulingInfo(D.Z.SCHEDULING_INFO);return Ft?Ft.duration:0}return kt.fragmentDuration}return 0}catch(An){return 0}}():Z===y.Z.AUDIO&&H?function(){try{var kt=Be.getCurrentBufferLevel(y.Z.VIDEO),Ft=ae.getCurrentRepresentationInfo();return isNaN(Ft.fragmentDuration)?kt+1:Math.max(kt+1,Ft.fragmentDuration)}catch(An){return 0}}():function(){try{var kt=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Le.isPlayingAtTopQuality(kt)?kt.manifestInfo.duration>=se.get().streaming.buffer.longFormContentDurationThreshold?se.get().streaming.buffer.bufferTimeAtTopQualityLongForm:se.get().streaming.buffer.bufferTimeAtTopQuality:ze.getStableBufferTime()}catch(Ft){return ze.getStableBufferTime()}}()),Bt}function xe(){We(!0)}function We(Bt){if(we&&_e){var Gt=_e.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:we.getTime(),threshold:0})[0];Gt&&we.getTime()>=Gt.startTime&&((!re.mediaInfo||Gt.mediaInfo.type===re.mediaInfo.type&&Gt.mediaInfo.index!==re.mediaInfo.index)&&Bt&&De.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:Z,oldMediaInfo:re.mediaInfo,newMediaInfo:Gt.mediaInfo,streamId:B.id}),Gt.quality===re.quality&&Gt.adaptationIndex===re.adaptationIndex||!Bt||(V.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(Z)),De.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:Z,oldQuality:re.quality,newQuality:Gt.quality,streamId:B.id})),re={mediaInfo:Gt.mediaInfo,quality:Gt.quality,adaptationIndex:Gt.adaptationIndex})}}function dt(){_e.abortRequests(),ke()}function at(){se.get().streaming.scheduling.scheduleWhilePaused||be()}function Je(Bt){Be.updatePlayListTraceMetrics({playbackspeed:Bt.playbackRate.toString()})}function ht(){ge=!0,ee=0,Se=NaN,re={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},fe=NaN,Ee=!1,ie=!1,me=!0}return P={initialize:function(Bt){H=Bt,De.on(T.Z.URL_RESOLUTION_FAILED,dt,P),De.on(_.Z.PLAYBACK_STARTED,at,P),De.on(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.on(_.Z.PLAYBACK_TIME_UPDATED,xe,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P)},getType:function(){return Z},getStreamId:function(){return B.id},setTimeToLoadDelay:function(Bt){ee=Bt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(Bt){Ee=Bt},getSwitchTrack:function(){return Ee},startScheduleTimer:be,clearScheduleTimer:ke,reset:function(){De.off(T.Z.URL_RESOLUTION_FAILED,dt,P),De.off(_.Z.PLAYBACK_STARTED,at,P),De.off(_.Z.PLAYBACK_RATE_CHANGED,Je,P),De.off(_.Z.PLAYBACK_TIME_UPDATED,xe,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),De.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Me,P),ke(),We(!1),ht(),B=null},getBufferTarget:he,getPlaybackController:function(){return we},setCheckPlaybackQuality:function(Bt){ge=Bt},setInitSegmentRequired:function(Bt){ie=Bt},setLastInitializedQuality:function(Bt){Se=Bt}},V=(0,N.Z)(qe).getInstance().getLogger(P),ht(),B=L.streamInfo,P}Fe.__dashjs_factory_name="ScheduleController";var O=U.Z.getClassFactory(Fe),M=S(7387);function q(L){var P,B,V,ee,J,H,re=(L=L||{}).eventBus,fe=L.events,Se=L.abrController,Ee=L.dashMetrics,ie=L.playbackController,me=L.timelineConverter,ge=L.type,qe=L.streamInfo,De=L.dashConstants,Be=L.segmentsController,ze=L.isDynamic,_e=L.adapter;function Le(){return ge}function we(){return V}function je(){return H}function Z(){B=null,V=!0,ee=[],J=null}function le(ke){return new Promise(function(Re,he){var xe=ke.hasInitialization(),We=ke.hasSegments(),dt=[];dt.push(Be.updateInitData(ke,xe)),dt.push(Be.updateSegmentData(ke,We)),Promise.all(dt).then(function(at){var Je;at[0]&&!at[0].error&&(ke=function(ht,Bt){return Bt&&!Bt.error&&Bt.representation?Bt.representation:ht}(ke,at[0])),at[1]&&!at[1].error&&(ke=function(ht,Bt){if(Bt&&!Bt.error){var Gt,kt,Ft,An,nt=Bt.segments,mt=[],Wt=0;for(Gt=0,kt=nt?nt.length:0;Gt<kt;Gt++)Ft=nt[Gt],(An=(0,M.TJ)(me,ze,ht,Ft.startTime,Ft.duration,Ft.timescale,Ft.media,Ft.mediaRange,Wt))&&(mt.push(An),An=null,Wt++);return mt.length>0&&(ht.segments=mt),ht}}(ke,at[1])),(Je=ke).mediaFinishedInformation=Be.getMediaFinishedInformation(Je),function(ht){if(we()){var Bt,Gt,kt=Ee.getCurrentManifestUpdate(),Ft=!1;if(kt){for(var An=0;An<kt.representationInfo.length;An++)if((Bt=kt.representationInfo[An]).index===ht.index&&Bt.mediaType===Le()){Ft=!0;break}Ft||Ee.addManifestUpdateRepresentationInfo(ht,Le())}if(function(){for(var mt=0,Wt=ee.length;mt<Wt;mt++){var xt=ee[mt].segmentInfoType;if(!ee[mt].hasInitialization()||(xt===De.SEGMENT_BASE||xt===De.BASE_URL)&&!ee[mt].segments)return!1}return!0}()){Se.setPlaybackQuality(ge,qe,(Gt=H,ee.indexOf(Gt)));var nt=Ee.getCurrentDVRInfo(ge);nt&&Ee.updateManifestUpdateInfo({latency:nt.range.end-ie.getTime()}),Ee.getCurrentRepresentationSwitch(je().adaptation.type)||ae(),Q()}}}(ke),Re()}).catch(function(at){he(at)})})}function ae(){(function(){if(!(Se&&Ee&&ie&&me))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var ke=new Date,Re=je(),he=1e3*ie.getTime();Re&&Ee.addRepresentationSwitch(Re.adaptation.type,ke,he,Re.id),re.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ge,streamId:qe.id,currentRepresentation:Re,numberOfRepresentations:ee.length},{streamId:qe.id,mediaType:ge})}function se(ke){return ke==null||ke>=ee.length?null:ee[ke]}function Q(ke){V=!1,re.trigger(fe.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:ke},{streamId:qe.id,mediaType:ge})}function Me(ke){H=ke,J=_e.convertRepresentationToRepresentationInfo(H)}function be(ke){if(ke.newDuration){var Re=je();Re&&Re.adaptation.period&&(Re.adaptation.period.duration=ke.newDuration)}}return P={getStreamId:function(){return qe.id},getType:Le,getData:function(){return B},isUpdating:we,updateData:function(ke,Re,he,xe,We){return new Promise(function(dt,at){if(V=!0,ee=Re,B=ke,Me(se(We)),he!==y.Z.VIDEO&&he!==y.Z.AUDIO&&(he!==y.Z.TEXT||!xe))return Q(),void dt();for(var Je=[],ht=0,Bt=ee.length;ht<Bt;ht++){var Gt=ee[ht];Je.push(le(Gt))}Promise.all(Je).then(function(){Me(se(We)),dt()}).catch(function(kt){at(kt)})})},getCurrentRepresentation:je,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:se,prepareQualityChange:function(ke){Me(se(ke)),ae()},reset:function(){re.off(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),Z()}},Z(),re.on(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),P}q.__dashjs_factory_name="RepresentationController";var K=U.Z.getClassFactory(q),pe=S(3106),ce=S(9326),He=S(7473),_t=S(2594);function ot(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var rt=function L(){ot(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};rt.INITIAL_PLAYOUT_START_REASON="initial_playout",rt.SEEK_START_REASON="seek",rt.RESUME_FROM_PAUSE_START_REASON="resume",rt.METRICS_COLLECTION_START_REASON="metrics_collection_start";var et=function L(){ot(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};et.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",et.REBUFFERING_REASON="rebuffering",et.USER_REQUEST_STOP_REASON="user_request",et.END_OF_PERIOD_STOP_REASON="end_of_period",et.END_OF_CONTENT_STOP_REASON="end_of_content",et.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",et.FAILURE_STOP_REASON="failure";var ft=S(7802);function vt(){return{ntpToUTC:function(L){var P=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(P.getTime()+L).getTime()}}}vt.__dashjs_factory_name="TimeUtils";var Et=U.Z.getSingletonFactory(vt);function Ct(L){L=L||{};var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),_e=L.streamInfo,Le=L.type,we=L.errHandler,je=L.mimeType,Z=L.timelineConverter,le=L.adapter,ae=L.manifestModel,se=L.mediaPlayerModel,Q=L.fragmentModel,Me=L.abrController,be=L.playbackController,ke=L.mediaController,Re=L.textController,he=L.dashMetrics,xe=L.settings,We=L.boxParser,dt=L.segmentBlacklistController;function at(){return _e.id}function Je(){return Le}function ht(){return le.getIsTextTrack(fe.getData())}function Bt(){J=[],ee=null,qe=0,Se=!1,Ee=!1,ie=!1,De=null}function Gt(ut){return!isNaN(ut)&&!isNaN(_e.duration)&&isFinite(_e.duration)&&ut>=_e.start+_e.duration}function kt(ut){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(ut.sender){if(be.getIsManifestUpdateInProgress())Wt();else if((!ht()||Re.isTextEnabled())&&H&&ut.representationId&&!H.appendInitSegmentFromCache(ut.representationId)){var qt=fe.getCurrentRepresentation();if(qt.range===0)return void Ft();var Ve=me?me.getInitRequest(ee,qt):null;Ve?Q.executeRequest(Ve):tt&&(re.setInitSegmentRequired(!0),Wt())}}}function Ft(ut){var tt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(be.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())Wt();else{var qt=mt();qt?(Se=!1,Ee=!1,An(qt)):nt(tt)}}function An(ut){isNaN(ut.startTime+ut.duration)||(qe=ut.startTime+ut.duration),ut.delayLoadingTime=new Date().getTime()+re.getTimeToLoadDelay(),re.setTimeToLoadDelay(0),function(tt){var qt=tt.url;return tt.range&&(qt=qt.concat("_",tt.range)),dt.contains(qt)}(ut)?(B.warn("Fragment request url ".concat(ut.url," for stream id ").concat(_e.id," and media type ").concat(Le," is on the ignore list and will be skipped")),Wt()):(B.debug("Next fragment request url for stream id ".concat(_e.id," and media type ").concat(Le," is ").concat(ut.url)),Q.executeRequest(ut))}function nt(ut){var tt,qt=fe.getCurrentRepresentation();if(!xe.get().streaming.gaps.enableSeekFix||!Se&&be.getTime()!==0||(V?V&&qt.segmentInfoType===v.Z.SEGMENT_TIMELINE&&(tt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,xe.get().streaming.gaps.threshold)):tt=me.getValidTimeAheadOfTargetTime(qe,ee,qt,xe.get().streaming.gaps.threshold),isNaN(tt)||tt===qe)){if(me.isLastSegmentRequested(qt,qe)){var Ve=me.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(_e.id," has finished")),ze.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ve},{streamId:_e.id,mediaType:Le}),H.segmentRequestingCompleted(Ve),void re.clearScheduleTimer()}ut&&Wt()}else be.isSeeking()||be.getTime()===0?(B.warn("Adjusting playback time ".concat(tt," because of gap in the manifest. Seeking by ").concat(tt-qe)),be.seek(tt,!1,!1)):(B.warn("Adjusting buffering time ".concat(tt," because of gap in the manifest. Adjusting time by ").concat(tt-qe)),On(tt),ut&&Wt())}function mt(){var ut,tt=Nn();if(isNaN(qe)||Je()===y.Z.TEXT&&!Re.isTextEnabled())return null;if(me){var qt=fe&&tt?fe.getRepresentationForQuality(tt.quality):null;ut=Se?me.getSegmentRequestForTime(ee,qt,qe):Ee?me.repeatSegmentRequest(ee,qt):me.getNextSegmentRequest(ee,qt)}return ut}function Wt(){re.startScheduleTimer(be.getLowLatencyModeEnabled()?xe.get().streaming.scheduling.lowLatencyTimeout:xe.get().streaming.scheduling.defaultTimeout)}function xt(ut){ut.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(ut.currentRepresentation)}function en(ut){he.addBufferState(Le,ut.state,re.getBufferTarget()),ut.state!==D.Z.BUFFER_EMPTY||be.isSeeking()||(B.info("Buffer is empty! Stalling!"),he.pushPlayListTraceMetrics(new Date,et.REBUFFERING_REASON))}function Jt(ut){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),_e.duration),ut.quotaExceeded&&ut.from>be.getTime()&&On(ut.from),ut.hasEnoughSpaceToAppend&&ut.quotaExceeded&&re.startScheduleTimer()}function Yt(ut){if(ut&&ut.lastRequestAppended&&ut.lastRequestAppended.url){var tt=ut.lastRequestAppended.url;ut.lastRequestAppended.range&&(tt=tt.concat("_",ut.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(tt)),dt.add(tt)}}function Dn(ut){if(B.debug("Appended bytes for ".concat(ut.mediaType," and stream id ").concat(ut.streamId)),ut.segmentType===it.w.INIT_SEGMENT_TYPE){var tt=ut.quality;re.setLastInitializedQuality(tt),B.info("["+Le+"] lastInitializedRepresentationInfo changed to "+ut.quality)}De?xn(De):re.startScheduleTimer(0)}function xn(ut){var tt=Q.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(tt&&tt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(De=ut);H.updateBufferTimestampOffset(ut).then(function(){re.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?re.startScheduleTimer():En(),De=null,ie=!1}).catch(function(){De=null,ie=!1})}function rr(ut){B.info("onFragmentLoadingAbandoned request: "+ut.request.url+" has been aborted"),be.isSeeking()||re.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+ut.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ut.request&&ut.request.isInitializationRequest()?re.setInitSegmentRequired(!0):On(ut.request.startTime+ut.request.duration/2),re.startScheduleTimer(0))}function ir(ut){B.info("OnFragmentLoadingCompleted for stream id "+_e.id+" and media type "+Le+" - Url:",ut.request?ut.request.url:"undefined",ut.request.range?", Range:"+ut.request.range:""),ht()&&re.startScheduleTimer(0),ut.error&&ut.request.serviceLocation&&function(tt){B.info("Fragment loading completed with an error"),tt&&tt.request&&tt.request.type&&(tt.request.type===it.w.INIT_SEGMENT_TYPE?kt({representationId:tt.request.representationId,sender:{}},!1):tt.request.type===it.w.MEDIA_SEGMENT_TYPE&&(On(tt.request.startTime+tt.request.duration/2),Ft({},!1)))}(ut)}function It(){On(be.getTime()),Pn().startScheduleTimer()}function $t(ut){var tt=ut.currentTrackInfo;if(tt){var qt=J.find(function(Ve){return Ve.index===tt.index&&Ve.lang===tt.lang});qt&&vn(qt).then(function(){H.setIsBufferingCompleted(!1),On(be.getTime()),re.setInitSegmentRequired(!0),re.startScheduleTimer()})}}function Zt(ut){On(ut.quotaExceededTime),re.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function vn(ut){ut===ee||ut&&ee&&ut.type!==ee.type||(ee=ut);var tt=le.getRealAdaptation(_e,ee),qt=le.getVoRepresentations(ee);if(fe){var Ve,Ke=fe.getData(),Mt=Me.getMaxAllowedIndexFor(Le,_e.id),fn=Me.getMinAllowedIndexFor(Le,_e.id),Tn=null;return Ke!==null&&Ke.id===tt.id||Le===y.Z.TEXT?Ve=Me.getQualityFor(Le,_e.id):(Tn=Me.getThroughputHistory().getAverageThroughput(Le,V)||Me.getInitialBitrateFor(Le,_e.id),Ve=Me.getQualityForBitrate(ee,Tn,_e.id)),fn!==void 0&&Ve<fn&&(Ve=fn),Ve>Mt&&(Ve=Mt),fe.updateData(tt,qt,Le,ee.isFragmented,Ve)}return Promise.resolve()}function Pn(){return re}function Nn(ut){var tt;return ut!==void 0?((0,pe.SE)(ut),tt=fe?fe.getRepresentationForQuality(ut):null):tt=fe?fe.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(tt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(ut){if(xe.get().streaming.enableManifestTimescaleMismatchFix){var tt=ut.chunk,qt=tt.bytes,Ve=Nn(tt.quality),Ke=fe&&Ve?fe.getRepresentationForQuality(Ve.quality):null;Ve&&Ke&&(Ke.timescale=We.getMediaTimescaleFromMoov(qt))}}function bt(ut){var tt=ut.chunk,qt=tt.bytes,Ve=tt.quality,Ke=Nn(Ve),Mt=fe&&Ke?fe.getRepresentationForQuality(Ke.quality):null;if(Ke&&Mt){var fn;if(xe.get().streaming.parseInbandPrft&&ut.request.type===it.w.MEDIA_SEGMENT_TYPE){var Tn=function(io,Zi){var js=io.getBoxes("prft"),Ju=[];return js.forEach(function(el){Ju.push(function(Qa,Zs){var Po="unknown";switch(Qa.flags){case 0:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var _u=1e3*Qa.ntp_timestamp_sec+Qa.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Po,ntpTimestamp:_u=Et(Be).getInstance().ntpToUTC(_u),mediaTime:Qa.media_time/Zs}}(el,Zi))}),Ju}(fn=fn||We.parse(qt),Mt.timescale);Tn&&Tn.length&&ze.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:_e.id,mediaType:Le})}var sr=le.getEventsFor(Ke.mediaInfo,null,_e),Zr=le.getEventsFor(Ke,Mt,_e);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ai=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:Ve,index:tt.index})[0],zr=function(io,Zi,js,Ju){try{for(var el={},Qa=[],Zs=js.concat(Ju),Po=0,_u=Zs.length;Po<_u;Po++)el[Zs[Po].schemeIdUri+"/"+Zs[Po].value]=Zs[Po];var Tu=io.getBoxes("emsg");if(!Tu||Tu.length===0)return Qa;for(var fa=io.getBox("sidx"),Bc=!fa||isNaN(fa.earliest_presentation_time)||isNaN(fa.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:fa.earliest_presentation_time/fa.timescale,Qf=Math.max(Bc,0),tl=fe.getCurrentRepresentation(),Ja=0,jc=Tu.length;Ja<jc;Ja++){var Gs=le.getEvent(Tu[Ja],el,Qf,tl);Gs&&Qa.push(Gs)}return Qa}catch(Dt){return[]}}(fn=fn||We.parse(qt),Ai,sr,Zr);ze.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:_e.id})}}}function Sn(){var ut=be.getTime();xe.get().streaming.buffer.flushBufferAtTrackSwitch&&be.seek(ut+.001,!1,!0),On(ut),H.setSeekTarget(ut),re.startScheduleTimer()}function En(){var ut=be.getTime(),tt=H.getContinuousBufferTimeForTargetTime(ut);On(isNaN(tt)?ut:tt),re.startScheduleTimer()}function Lt(ut){ut&&!isNaN(ut.time)&&(On(ut.time),H.setSeekTarget(ut.time))}function On(ut){qe=ut,Se=!0}return P={initialize:function(ut,tt,qt){ge=(0,ft.Z)(Be).create({events:T.Z,eventBus:ze,streamInfo:_e,timelineConverter:Z,dashConstants:v.Z,segmentBaseController:L.segmentBaseController,type:Le}),me=(0,ce.Z)(Be).create({streamInfo:_e,type:Le,timelineConverter:Z,dashMetrics:he,mediaPlayerModel:se,baseURLController:L.baseURLController,errHandler:we,segmentsController:ge,settings:xe,boxParser:We,events:T.Z,eventBus:ze,errors:Ae,debug:(0,N.Z)(Be).getInstance(),requestModifier:(0,He.Z)(Be).getInstance(),dashConstants:v.Z,constants:y.Z,urlUtils:(0,_t.Z)(Be).getInstance()}),V=_e.manifestInfo.isDynamic,me.initialize(V),Me.registerStreamType(Le,P),fe=K(Be).create({streamInfo:_e,type:Le,abrController:Me,dashMetrics:he,playbackController:be,timelineConverter:Z,dashConstants:v.Z,events:T.Z,eventBus:ze,errors:Ae,isDynamic:V,adapter:le,segmentsController:ge}),H=function(Ve,Ke){return Ve?Ve!==y.Z.TEXT||Ke?Tt(Be).create({streamInfo:_e,type:Ve,mediaPlayerModel:se,manifestModel:ae,fragmentModel:Q,errHandler:we,mediaController:ke,representationController:fe,adapter:le,textController:Re,abrController:Me,playbackController:be,settings:xe}):ne(Be).create({streamInfo:_e,type:Ve,mimeType:je,fragmentModel:Q,textController:Re,errHandler:we,settings:xe}):(we.error(new de.Z(Ae.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ae.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(Le,qt),H&&H.initialize(ut),(re=O(Be).create({streamInfo:_e,type:Le,mimeType:je,adapter:le,dashMetrics:he,mediaPlayerModel:se,fragmentModel:Q,abrController:Me,playbackController:be,textController:Re,mediaController:ke,bufferController:H,representationController:fe,settings:xe})).initialize(tt),qe=0,Se=!1,Ee=!1},getStreamId:at,getType:Je,isUpdating:function(){return!!fe&&fe.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return fe},getRepresentationInfo:Nn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(ut){var tt=un();return tt?Promise.resolve(tt):H?H.createBufferSink(ee,ut):Promise.resolve(null)},updateStreamInfo:function(ut){return _e=ut,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return _e},selectMediaInfo:vn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(ut){J.indexOf(ut)===-1&&J.push(ut)},prepareTrackSwitch:function(){return new Promise(function(ut){B.debug("Preparing track switch for type ".concat(Le));var tt=Le===y.Z.TEXT||xe.get().streaming.trackSwitchMode[Le]===y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&be.getTimeToStreamEnd(_e)>xe.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!tt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:Le})}).catch(function(){ze.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:Le})}),void ut();re.clearScheduleTimer(),re.setSwitchTrack(!0),tt?(ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:_e.id},{mediaType:Le,streamId:_e.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var qt=Nn();return H.updateBufferTimestampOffset(qt)}).then(function(){Sn(),ut()}).catch(function(){Sn(),ut()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),ut()}).catch(function(){En(),ut()})})},prepareQualityChange:function(ut){De&&B.warn("Canceling queued representation switch to ".concat(De.quality," for ").concat(Le)),B.debug("Preparing quality switch for type ".concat(Le));var tt=ut.newQuality;ie=!0,re.clearScheduleTimer(),fe.prepareQualityChange(tt);var qt=Nn(tt);ut.reason&&ut.reason.forceReplace?function(Ve){Q.abortRequests(),ze.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:_e.id},{mediaType:Le,streamId:_e.id}),re.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(Ve).then(function(){Sn(),De=null,ie=!1}).catch(function(){Sn(),De=null,ie=!1})}(qt):ut&&ut.reason&&ut.reason.forceAbandon?function(Ve){H.updateBufferTimestampOffset(Ve).then(function(){Q.abortRequests(),Ee=!0,re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1,De=null}).catch(function(){De=null,ie=!1})}(qt):xe.get().streaming.buffer.fastSwitchEnabled?function(Ve){var Ke=be.getTime(),Mt=1.5*(isNaN(Ve.fragmentDuration)?1:Ve.fragmentDuration),fn=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ke+Mt,threshold:0})[0];if(fn&&!ht()){var Tn=H.getBufferLevel(),sr=Me.getAbandonmentStateFor(_e.id,Le);fn.quality<Ve.quality&&Tn>=Mt&&sr!==D.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(Ve).then(function(){Q.abortRequests(),On(Ke+Mt),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):xn(Ve)}else xn(Ve)}(qt):xn(qt),he.pushPlayListTraceMetrics(new Date,et.REPRESENTATION_SWITCH_STOP_REASON),he.createPlaylistTraceMetrics(qt.id,1e3*be.getTime(),be.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(ut){return H.setMediaSource(ut,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(ut,tt){he.pushPlayListTraceMetrics(ut,tt)},probeNextRequest:function(){var ut=Nn(),tt=fe&&ut?fe.getRepresentationForQuality(ut.quality):null;return me.getNextSegmentRequestIdempotent(ee,tt)},prepareInnerPeriodPlaybackSeeking:function(ut){return new Promise(function(tt){if(H.hasBufferAtTime(ut.seekTime))return H.pruneBuffer(),Gt(H.getContinuousBufferTimeForTargetTime(ut.seekTime))&&H.setIsBufferingCompleted(!0),void tt();re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var qt=H.getAllRangesWithSafetyFactor(ut.seekTime);return H.clearBuffers(qt)}).then(function(){var qt=H.getContinuousBufferTimeForTargetTime(ut.seekTime);if(Gt(qt))H.setIsBufferingCompleted(!0),tt();else{var Ve=isNaN(qt)?ut.seekTime:qt;On(Ve),H.setSeekTarget(Ve);var Ke=[];Ke.push(H.updateAppendWindow());var Mt=Nn();Ke.push(H.updateBufferTimestampOffset(Mt)),Promise.all(Ke).then(function(){re.setInitSegmentRequired(!0),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),tt()})}}).catch(function(qt){B.error(qt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(ut,tt){try{re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){ut()})}catch(qt){tt(qt)}})},reset:function(ut,tt){me&&me.reset(),H&&(H.reset(ut,tt),H=null),re&&(re.reset(),re=null),fe&&(fe.reset(),fe=null),ge&&(ge=null),Me&&Me.unRegisterStreamType(at(),Le),ze.off(T.Z.DATA_UPDATE_COMPLETED,xt,P),ze.off(T.Z.INIT_FRAGMENT_NEEDED,kt,P),ze.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),ze.off(T.Z.INIT_FRAGMENT_LOADED,Gn,P),ze.off(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),ze.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),ze.off(T.Z.BUFFER_CLEARED,Jt,P),ze.off(T.Z.SEEK_TARGET,Lt,P),ze.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),ze.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),ze.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),ze.off(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),ze.off(T.Z.QUOTA_EXCEEDED,Zt,P),ze.off(T.Z.SOURCE_BUFFER_ERROR,Yt,P),ze.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),Bt(),Le=null,_e=null}},B=(0,N.Z)(Be).getInstance().getLogger(P),Bt(),ze.on(T.Z.DATA_UPDATE_COMPLETED,xt,P,{priority:m.Z.EVENT_PRIORITY_HIGH}),ze.on(T.Z.INIT_FRAGMENT_NEEDED,kt,P),ze.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ft,P),ze.on(T.Z.INIT_FRAGMENT_LOADED,Gn,P),ze.on(T.Z.MEDIA_FRAGMENT_LOADED,bt,P),ze.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),ze.on(T.Z.BUFFER_CLEARED,Jt,P),ze.on(T.Z.SEEK_TARGET,Lt,P),ze.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),ze.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),ze.on(T.Z.QUOTA_EXCEEDED,Zt,P),ze.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,It,P),ze.on(T.Z.SET_NON_FRAGMENTED_TEXT,$t,P),ze.on(T.Z.SOURCE_BUFFER_ERROR,Yt,P),ze.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),P}Ct.__dashjs_factory_name="StreamProcessor";var hn=U.Z.getClassFactory(Ct),Xt=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=S(9032);function Ot(L,P){if(L){if(typeof L=="string")return Un(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,P):void 0}}function Un(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function gr(L){L=L||{};var P,B,V=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,re=(0,Ze.Z)(V).getInstance();function fe(ie){var me,ge=new Date,qe=ie.request,De=new Headers;if(qe.range&&De.append("Range","bytes="+qe.range),ie.headers)for(var Be in ie.headers){var ze=ie.headers[Be];ze&&De.append(Be,ze)}qe.requestStartDate||(qe.requestStartDate=ge),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(Z,le){De.append(Z,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(me=new AbortController,ie.abortController=me,me.signal.onabort=ie.onabort);var _e={method:ie.method,headers:De,credentials:ie.withCredentials?"include":void 0,signal:me?me.signal:void 0},Le=re.get().streaming.abr.fetchThroughputCalculationMode,we=Date.now(),je=0;new Promise(function(Z){if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(je=J.getThroughputCapacityDelayMS(qe,1e3*B.getCurrentBufferLevel(qe.mediaType))))return setTimeout(Z,je);Z()}).then(function(){var Z=Date.now();fetch(ie.url,_e).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,se="",Q=function(xt,en){var Jt;if(typeof Symbol>"u"||xt[Symbol.iterator]==null){if(Array.isArray(xt)||(Jt=Ot(xt))){Jt&&(xt=Jt);var Yt=0,Dn=function(){};return{s:Dn,n:function(){return Yt>=xt.length?{done:!0}:{done:!1,value:xt[Yt++]}},e:function(It){throw It},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var xn,rr=!0,ir=!1;return{s:function(){Jt=xt[Symbol.iterator]()},n:function(){var It=Jt.next();return rr=It.done,It},e:function(It){ir=!0,xn=It},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw xn}}}}(le.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Me=ae.value;se+=Me+": "+le.headers.get(Me)+"\r\n"}}catch(xt){Q.e(xt)}finally{Q.f()}if(ie.response.responseHeaders=se,!le.body)return le.arrayBuffer().then(function(xt){ie.response.response=xt;var en={loaded:xt.byteLength,total:xt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var be,ke,Re,he,xe=parseInt(le.headers.get("Content-Length"),10),We=0,dt=!1,at=new Uint8Array,Je=0;if(Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var ht=Z,Bt=0,Gt=(Re=le.body.tee(),he=2,function(xt){if(Array.isArray(xt))return xt}(Re)||function(xt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(xt)){var Jt=[],Yt=!0,Dn=!1,xn=void 0;try{for(var rr,ir=xt[Symbol.iterator]();!(Yt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Yt=!0);}catch(It){Dn=!0,xn=It}finally{try{Yt||ir.return==null||ir.return()}finally{if(Dn)throw xn}}return Jt}}(Re,he)||Ot(Re,he)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),kt=Gt[0],Ft=Gt[1];be=kt.getReader(),ke=[],be.read().then(function xt(en){var Jt=en.value,Yt=en.done;if(Bt=Date.now(),Jt&&Jt.length){var Dn=Bt-ht,xn=Jt.length;ke.push({chunkDownloadTimeRelativeMS:Bt-Z,chunkDownloadDurationMS:Dn,chunkBytes:xn,kbps:Math.round(8*xn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(qe.mediaType)})}if(Yt){var rr=Bt-Z,ir=ke.reduce(function(It,$t){return It+$t.chunkBytes},0);return J.addMeasurement(qe,rr,ke,we,je,se),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(qe),stream:!0})}return ht=Date.now(),be.read().then(xt)}),ie.reader=Ft.getReader()}else ie.reader=le.body.getReader();var An=[],nt=[],mt=[],Wt=!0;Se(ie,function xt(en){var Jt=en.value;if(en.done){if(at){if(Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Yt=null,Dn=null;Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Yt=function(It,$t){try{var Zt,un;Zt=It.filter(function(Sn,En){return En<It.length-1}),un=$t.filter(function(Sn,En){return En<$t.length-1});var vn=[];if(Zt.length>1){for(var Pn=0,Nn=0,Fn=0;Fn<Zt.length;Fn++)if(Zt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Zt[Fn].ts;if(Gn>1)vn.push(8*un[Fn].bytes/Gn),Nn=0;else{Nn===0&&(Nn=Zt[Fn].ts,Pn=0);var bt=un[Fn].ts-Nn;bt>1?(Pn+=un[Fn].bytes,vn.push(8*Pn/bt),Nn=0):Pn+=un[Fn].bytes}}if(vn.length>0)return vn.reduce(function(Sn,En){return Sn+En},0)/vn.length}return null}catch(Sn){return null}}(nt,mt),Yt&&(Dn=8*We/Yt)):Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=Ee(An,We)),ie.progress({loaded:We,total:isNaN(xe)?We:xe,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=at.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){at=function(It,$t){if(It.length===0)return $t;var Zt=new Uint8Array(It.length+$t.length);return Zt.set(It),Zt.set($t,It.length),Zt}(at,Jt),We+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),Le===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Wt&&H.findLastTopIsoBoxCompleted(["moof"],at,Je).found&&(Wt=!1,nt.push({ts:performance.now(),bytes:Jt.length}));var xn=H.findLastTopIsoBoxCompleted(["moov","mdat"],at,Je);if(xn.found){var rr,ir=xn.lastCompletedOffset+xn.size;Le!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Wt||(Wt=!0,mt.push({ts:performance.now(),bytes:at.length})),ir===at.length?(rr=at,at=new Uint8Array):(rr=new Uint8Array(at.subarray(0,ir)),at=at.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),Je=0}else Je=xn.lastCompletedOffset,dt||(ie.progress({lengthComputable:!1,noTrace:!0}),dt=!0)}Se(ie,xt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function Se(ie,me){ie.reader.read().then(me).catch(function(ge){ie.onerror&&ie.response.status===200&&ie.onerror(ge)})}function Ee(ie,me){try{if((ie=ie.filter(function(De){return De.bytes>me/4/ie.length})).length>1){var ge=0,qe=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(De,Be){var ze=ie[Be+1];if(ze){var _e=ze.ts-De.ts;ge+=_e<qe?_e:0}}),ge}return null}catch(De){return null}}return P={load:function(ie){ee&&ee.modifyRequest?(0,He.k)(ie,ee).then(function(){return fe(ie)}):fe(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(me){}},calculateDownloadedTime:Ee,setup:function(ie){B=ie.dashMetrics}},P}gr.__dashjs_factory_name="FetchLoader";var Pr=U.Z.getClassFactory(gr),dr=S(1180);function ei(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ji=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var P,B;return P=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==v.Z.BASE_URL&&this.segmentInfoType!==v.Z.SEGMENT_BASE&&!this.indexRange}}])&&ei(P.prototype,B),L}(),Or=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},eo=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};eo.DEFAULT_ID="defaultId";var _i=eo,Mi=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=S(2610),to=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ti=function L(P,B,V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||P||"",this.dvbPriority=V||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ti.DEFAULT_DVB_PRIORITY=1,Ti.DEFAULT_DVB_WEIGHT=1;var Qn=Ti,Ou=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var St=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var P,B;return P=L,(B=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[v.Z.DVB_URL]&&(this.dvbUrl=V[v.Z.DVB_URL]),V[v.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[v.Z.DVB_MIMETYPE]),V[v.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[v.Z.DVB_FONTFAMILY])),this}}])&&an(P.prototype,B),L}(),zt=S(3101),Nt=S.n(zt);function Vt(){return{areEqual:function(L,P){return Nt()(L,P)}}}Vt.__dashjs_factory_name="ObjectUtils";var mn=U.Z.getSingletonFactory(Vt),In=S(7803),Zn=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.queryParams={}},Cn=function L(P,B,V){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.ttl=V||NaN,this.queryParams={}};function Rn(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function on(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Rn(Object(B),!0).forEach(function(V){Bn(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bn(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function kn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){re=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function er(L,P){if(L){if(typeof L=="string")return Er(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,P):void 0}}function Er(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Ur(){var L,P,B,V,ee=this.context,J=(0,_t.Z)(ee).getInstance(),H=Number.isInteger||function(Z){return typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z};function re(Z,le){if(!Z)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(Z.Representation_asArray&&Z.Representation_asArray.length){var ae=Be(Z.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return le===y.Z.IMAGE}if(Z.ContentComponent_asArray&&Z.ContentComponent_asArray.length>0){if(Z.ContentComponent_asArray.length>1)return le===y.Z.MUXED;if(Z.ContentComponent_asArray[0].contentType===le)return!0}var se=le===y.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(Z.Representation_asArray&&Z.Representation_asArray.length){var Q=Z.Representation_asArray[0].codecs;if(se.test(Q))return!0}if(Z.hasOwnProperty(v.Z.MIME_TYPE))return se.test(Z.mimeType);if(Z.Representation_asArray){for(var Me,be=0;be<Z.Representation_asArray.length;be++)if((Me=Z.Representation_asArray[be]).hasOwnProperty(v.Z.MIME_TYPE))return se.test(Me.mimeType)}return!1}function fe(Z){if(!Z)throw new Error("adaptation is not defined");if(Z.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||Z.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||Z.hasOwnProperty(v.Z.SEGMENT_LIST)||Z.hasOwnProperty(v.Z.SEGMENT_BASE))return!0;if(Z.Representation_asArray&&Z.Representation_asArray.length>0){var le=Z.Representation_asArray[0];if(le.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(v.Z.SEGMENT_LIST)||le.hasOwnProperty(v.Z.SEGMENT_BASE))return!0}return!1}function Se(Z){return re(Z,y.Z.VIDEO)}function Ee(Z){return re(Z,y.Z.TEXT)}function ie(Z){return re(Z,y.Z.IMAGE)}function me(Z){return Z&&Array.isArray(Z.Representation_asArray)&&Z.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),Z}function ge(Z,le){return Z&&Z.Period_asArray&&H(le)&&Z.Period_asArray[le]?Z.Period_asArray[le].AdaptationSet_asArray:[]}function qe(Z){return Z&&Z.Period_asArray?Z.Period_asArray:[]}function De(Z){var le=!1;return Z&&Z.hasOwnProperty("type")&&(le=Z.type===v.Z.DYNAMIC),le}function Be(Z){return Z&&Z.EssentialProperty_asArray&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function ze(Z){if(!Z||!Z.S_asArray)return NaN;var le=Z.S_asArray[0],ae=Z.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function _e(Z,le){if(!Z)throw new Error("Period cannot be null or undefined");var ae=_i.DEFAULT_ID+"_"+le;return Z.hasOwnProperty(v.Z.ID)&&Z.id.length>0&&Z.id!=="__proto__"&&(ae=Z.id),ae}function Le(Z,le,ae){var se,Q=[];if(!Z)return Q;for(se=0;se<Z.length;se++){var Me=new Ou;if(Me.timescale=1,Me.representation=le,!Z[se].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Me.schemeIdUri=Z[se].schemeIdUri,Z[se].hasOwnProperty(v.Z.TIMESCALE)&&(Me.timescale=Z[se].timescale),Z[se].hasOwnProperty(v.Z.VALUE)&&(Me.value=Z[se].value),Q.push(Me),Me.period=ae}return Q}function we(Z){var le=[],ae=Z.BaseURL_asArray||[Z.baseUri],se=!1;return ae.some(function(Q){if(Q){var Me=new Qn,be=Q.__text||Q;return J.isRelative(be)&&(se=!0,Z.baseUri&&(be=J.resolve(be,Z.baseUri))),Me.url=be,Q.hasOwnProperty(v.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Me.serviceLocation=Q.serviceLocation:Me.serviceLocation=be,Q.hasOwnProperty(v.Z.DVB_PRIORITY)&&(Me.dvbPriority=Q[v.Z.DVB_PRIORITY]),Q.hasOwnProperty(v.Z.DVB_WEIGHT)&&(Me.dvbWeight=Q[v.Z.DVB_WEIGHT]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)&&(Me.availabilityTimeOffset=Q[v.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)&&(Me.availabilityTimeComplete=Q[v.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(Me),se}}),le}function je(Z){var le=new sn;return le.serverUrl=Z.__text,Z.hasOwnProperty(v.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=Z[v.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),Z.hasOwnProperty(v.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=Z[v.Z.QUERY_BEFORE_START].toLowerCase()==="true"),Z.hasOwnProperty(v.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=Z[v.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return L={getIsTypeOf:re,getIsText:Ee,getIsFragmented:fe,getProducerReferenceTimesForAdaptation:function(Z){var le=Z&&Z.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)?Z[v.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(Z&&Z.hasOwnProperty(v.Z.REPRESENTATION_ASARRAY)?Z[v.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(se){var Q;se.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(Me){if(Array.isArray(Me))return Er(Me)}(Q=se[v.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Me){if(typeof Symbol<"u"&&Symbol.iterator in Object(Me))return Array.from(Me)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(se){var Q=new tn;se.hasOwnProperty(v.Z.ID)&&(Q[v.Z.ID]=se[v.Z.ID],se.hasOwnProperty(v.Z.WALL_CLOCK_TIME)&&(Q[v.Z.WALL_CLOCK_TIME]=se[v.Z.WALL_CLOCK_TIME],se.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(Q[v.Z.PRESENTATION_TIME]=se[v.Z.PRESENTATION_TIME],se.hasOwnProperty(v.Z.INBAND)&&(Q[v.Z.INBAND]=se[v.Z.INBAND]!=="false"),se.hasOwnProperty(v.Z.TYPE)&&(Q[v.Z.TYPE]=se[v.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(Z){var le="";return Z&&Z.hasOwnProperty(v.Z.LANG)&&(le=Z.lang),le},getViewpointForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.VIEWPOINT_ASARRAY)&&Z[v.Z.VIEWPOINT_ASARRAY].length?Z[v.Z.VIEWPOINT_ASARRAY].map(function(le){return new St().init(le)}):[]},getRolesForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ROLE_ASARRAY)&&Z[v.Z.ROLE_ASARRAY].length?Z[v.Z.ROLE_ASARRAY].map(function(le){return new St().init(le)}):[]},getAccessibilityForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ACCESSIBILITY_ASARRAY)&&Z[v.Z.ACCESSIBILITY_ASARRAY].length?Z[v.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new St().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new St().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new St().init(le)}):[]},getAdaptationForIndex:function(Z,le,ae){var se=ge(le,ae);return se.length>0&&H(Z)?se[Z]:null},getIndexForAdaptation:function(Z,le,ae){if(!Z)return-1;for(var se=ge(le,ae),Q=0;Q<se.length;Q++)if(mn(ee).getInstance().areEqual(se[Q],Z))return Q;return-1},getAdaptationForId:function(Z,le,ae){var se,Q,Me=ge(le,ae);for(se=0,Q=Me.length;se<Q;se++)if(Me[se].hasOwnProperty(v.Z.ID)&&Me[se].id===Z)return Me[se];return null},getAdaptationsForType:function(Z,le,ae){var se,Q,Me=ge(Z,le),be=[];for(se=0,Q=Me.length;se<Q;se++)re(Me[se],ae)&&be.push(me(Me[se]));return be},getRealPeriods:qe,getRealPeriodForIndex:function(Z,le){var ae=qe(le);return ae.length>0&&H(Z)?ae[Z]:null},getCodec:function(Z,le,ae){var se=null;if(Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0){var Q=H(le)&&le>=0&&le<Z.Representation_asArray.length?Z.Representation_asArray[le]:Z.Representation_asArray[0];Q&&(se=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(se+=';width="'+Q.width+'";height="'+Q.height+'"'))}return se&&(se=se.replace(/\sprofiles=[^;]*/g,"")),se},getSelectionPriority:function(Z){try{var le=Z&&Z.selectionPriority!==void 0?parseInt(Z.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(Z){return Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0?Z.Representation_asArray[0].mimeType:null},getKID:function(Z){return Z&&Z.hasOwnProperty(v.Z.CENC_DEFAULT_KID)?Z[v.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(Z){if(!Z||!Array.isArray(Z.Label_asArray))return[];for(var le=[],ae=0;ae<Z.Label_asArray.length;ae++)le.push({lang:Z.Label_asArray[ae].lang,text:Z.Label_asArray[ae].__text||Z.Label_asArray[ae]});return le},getContentProtectionData:function(Z){return Z&&Z.hasOwnProperty(v.Z.CONTENTPROTECTION_ASARRAY)&&Z.ContentProtection_asArray.length!==0?Z.ContentProtection_asArray:null},getIsDynamic:De,getId:function(Z){return Z&&Z[v.Z.ID]||null},hasProfile:function(Z,le){var ae=!1;return Z&&Z.profiles&&Z.profiles.length>0&&(ae=Z.profiles.indexOf(le)!==-1),ae},getDuration:function(Z){return Z&&Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)?Z.mediaPresentationDuration:Z&&Z.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(Z){return Z&&Z.bandwidth?Z.bandwidth:NaN},getManifestUpdatePeriod:function(Z){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return Z&&Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ae=Z.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(Z[v.Z.PUBLISH_TIME]):null},getRepresentationCount:function(Z){return Z&&Array.isArray(Z.Representation_asArray)?Z.Representation_asArray.length:0},getBitrateListForAdaptation:function(Z){var le=me(Z);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(Z,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(Z)?le.Representation_asArray[Z]:null},getRepresentationsForAdaptation:function(Z){var le,ae,se,Q,Me=[],be=function(at){if(at&&at.period&&H(at.period.index)){var Je=at.period.mpd.manifest.Period_asArray[at.period.index];if(Je&&Je.AdaptationSet_asArray&&H(at.index))return me(Je.AdaptationSet_asArray[at.index])}}(Z);if(be&&be.Representation_asArray){if(Z&&Z.period&&H(Z.period.index)){var ke=we(Z.period.mpd.manifest);ke&&(ae=ke[0])}for(var Re=0,he=be.Representation_asArray.length;Re<he;++Re){var xe=be.Representation_asArray[Re],We=new Ji;if(We.index=Re,We.adaptation=Z,xe.hasOwnProperty(v.Z.ID)&&(We.id=xe.id),xe.hasOwnProperty(v.Z.CODECS)&&(We.codecs=xe.codecs),xe.hasOwnProperty(v.Z.MIME_TYPE)&&(We.mimeType=xe[v.Z.MIME_TYPE]),xe.hasOwnProperty(v.Z.CODEC_PRIVATE_DATA)&&(We.codecPrivateData=xe.codecPrivateData),xe.hasOwnProperty(v.Z.BANDWITH)&&(We.bandwidth=xe.bandwidth),xe.hasOwnProperty(v.Z.WIDTH)&&(We.width=xe.width),xe.hasOwnProperty(v.Z.HEIGHT)&&(We.height=xe.height),xe.hasOwnProperty(v.Z.SCAN_TYPE)&&(We.scanType=xe.scanType),xe.hasOwnProperty(v.Z.MAX_PLAYOUT_RATE)&&(We.maxPlayoutRate=xe.maxPlayoutRate),xe.hasOwnProperty(v.Z.SEGMENT_BASE)?(le=xe.SegmentBase,We.segmentInfoType=v.Z.SEGMENT_BASE):xe.hasOwnProperty(v.Z.SEGMENT_LIST)?(le=xe.SegmentList).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?We.segmentInfoType=v.Z.SEGMENT_TIMELINE:We.segmentInfoType=v.Z.SEGMENT_LIST:xe.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)?((le=xe.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?We.segmentInfoType=v.Z.SEGMENT_TIMELINE:We.segmentInfoType=v.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(v.Z.INITIALIZATION_MINUS)&&(We.initialization=le.initialization.split("$Bandwidth$").join(xe.bandwidth).split("$RepresentationID$").join(xe.id))):We.segmentInfoType=v.Z.BASE_URL,We.essentialProperties=Be(xe),le){if(le.hasOwnProperty(v.Z.INITIALIZATION)){var dt=le.Initialization;dt.hasOwnProperty(v.Z.SOURCE_URL)&&(We.initialization=dt.sourceURL),dt.hasOwnProperty(v.Z.RANGE)&&(We.range=dt.range)}else Ee(be)&&fe(be)&&be.mimeType&&be.mimeType.indexOf("application/mp4")===-1&&(We.range=0);le.hasOwnProperty(v.Z.TIMESCALE)&&(We.timescale=le.timescale),le.hasOwnProperty(v.Z.DURATION)?We.segmentDuration=le.duration/We.timescale:xe.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)&&(le=xe.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)&&(We.segmentDuration=ze(le.SegmentTimeline)/We.timescale),le.hasOwnProperty(v.Z.MEDIA)&&(We.media=le.media),le.hasOwnProperty(v.Z.START_NUMBER)&&(We.startNumber=le.startNumber),le.hasOwnProperty(v.Z.INDEX_RANGE)&&(We.indexRange=le.indexRange),le.hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(We.presentationTimeOffset=le.presentationTimeOffset/We.timescale),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)?We.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(We.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)?We.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(We.availabilityTimeComplete=ae.availabilityTimeComplete)}We.MSETimeOffset=(Q=(se=We).presentationTimeOffset,se.adaptation.period.start-Q),We.path=[Z.period.index,Z.index,Re],Me.push(We)}}return Me},getAdaptationsForPeriod:function(Z){var le,ae,se,Q=Z&&H(Z.index)?Z.mpd.manifest.Period_asArray[Z.index]:null,Me=[];if(Q&&Q.AdaptationSet_asArray)for(se=0;se<Q.AdaptationSet_asArray.length;se++)ae=Q.AdaptationSet_asArray[se],le=new Or,ae.hasOwnProperty(v.Z.ID)&&(le.id=ae.id),le.index=se,le.period=Z,re(ae,y.Z.MUXED)?le.type=y.Z.MUXED:re(ae,y.Z.AUDIO)?le.type=y.Z.AUDIO:Se(ae)?le.type=y.Z.VIDEO:Ee(ae)?le.type=y.Z.TEXT:ie(ae)?le.type=y.Z.IMAGE:P.warn("Unknown Adaptation stream type"),Me.push(le);return Me},getRegularPeriods:function(Z){var le,ae,se=!!Z&&De(Z.manifest),Q=[],Me=null,be=null,ke=null,Re=null;for(ae=0,le=Z&&Z.manifest&&Z.manifest.Period_asArray?Z.manifest.Period_asArray.length:0;ae<le;ae++)(be=Z.manifest.Period_asArray[ae]).hasOwnProperty(v.Z.START)?(Re=new _i).start=be.start:Me!==null&&Me.hasOwnProperty(v.Z.DURATION)&&ke!==null?(Re=new _i).start=parseFloat((ke.start+ke.duration).toFixed(5)):ae!==0||se||((Re=new _i).start=0),ke!==null&&isNaN(ke.duration)&&(Re!==null?ke.duration=parseFloat((Re.start-ke.start).toFixed(5)):P.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Re!==null&&(Re.id=_e(be,ae),Re.index=ae,Re.mpd=Z,be.hasOwnProperty(v.Z.DURATION)&&(Re.duration=be.duration),ke&&(ke.nextPeriodId=Re.id),Q.push(Re),Me=be,ke=Re),be=null,Re=null;return Q.length===0||ke!==null&&isNaN(ke.duration)&&(ke.duration=parseFloat((function(he){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var xe,We=De(he.mpd.manifest);return he.mpd.manifest.mediaPresentationDuration?xe=he.mpd.manifest.mediaPresentationDuration:he.duration?xe=he.duration:We?xe=Number.POSITIVE_INFINITY:B.error(new de.Z(Ae.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",he)),xe}(ke)-ke.start).toFixed(5))),Q},getMpd:function(Z){var le=new Mi;return Z&&(le.manifest=Z,Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(Z.availabilityStartTime.getTime()):Z.loadedTime&&(le.availabilityStartTime=new Date(Z.loadedTime.getTime())),Z.hasOwnProperty(v.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(Z.availabilityEndTime.getTime())),Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=Z.minimumUpdatePeriod),Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=Z.mediaPresentationDuration),Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=Z.suggestedPresentationDelay),Z.hasOwnProperty(v.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=Z.timeShiftBufferDepth),Z.hasOwnProperty(v.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=Z.maxSegmentDuration),Z.hasOwnProperty(v.Z.PUBLISH_TIME)&&(le.publishTime=new Date(Z.publishTime))),le},getEventsForPeriod:function(Z){var le,ae,se=Z&&Z.mpd&&Z.mpd.manifest?Z.mpd.manifest:null,Q=se?se.Period_asArray:null,Me=Q&&Z&&H(Z.index)?Q[Z.index].EventStream_asArray:null,be=[];if(Me)for(le=0;le<Me.length;le++){var ke=new Ou;if(ke.period=Z,ke.timescale=1,!Me[le].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ke.schemeIdUri=Me[le][y.Z.SCHEME_ID_URI],Me[le].hasOwnProperty(v.Z.TIMESCALE)&&(ke.timescale=Me[le][v.Z.TIMESCALE]),Me[le].hasOwnProperty(v.Z.VALUE)&&(ke.value=Me[le][v.Z.VALUE]),Me[le].hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(ke.presentationTimeOffset=Me[le][v.Z.PRESENTATION_TIME_OFFSET]),ae=0;Me[le].Event_asArray&&ae<Me[le].Event_asArray.length;ae++){var Re=Me[le].Event_asArray[ae],he=new to;he.presentationTime=0,he.eventStream=ke,Re.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(he.presentationTime=Re.presentationTime);var xe=ke.presentationTimeOffset?ke.presentationTimeOffset/ke.timescale:0;he.calculatedPresentationTime=he.presentationTime/ke.timescale+Z.start-xe,Re.hasOwnProperty(v.Z.DURATION)&&(he.duration=Re.duration/ke.timescale),Re.hasOwnProperty(v.Z.ID)?he.id=Re.id:he.id=null,Re.Signal&&Re.Signal.Binary?he.messageData=V.decodeArray(Re.Signal.Binary.toString()):he.messageData=Re.messageData||Re.__cdata||Re.__text,be.push(he)}}return be},getEssentialPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.EssentialProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return new St().init(le)}):[]},getEssentialPropertiesForRepresentation:Be,getEventStreamForAdaptationSet:function(Z,le,ae){var se,Q,Me;return Z&&Z.Period_asArray&&le&&le.period&&H(le.period.index)&&(Q=Z.Period_asArray[le.period.index])&&Q.AdaptationSet_asArray&&H(le.index)&&(Me=Q.AdaptationSet_asArray[le.index])&&(se=Me.InbandEventStream_asArray),Le(se,null,ae)},getEventStreamForRepresentation:function(Z,le,ae){var se,Q,Me,be;return Z&&Z.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(Q=Z.Period_asArray[le.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(le.adaptation.index)&&(Me=Q.AdaptationSet_asArray[le.adaptation.index])&&Me.Representation_asArray&&H(le.index)&&(be=Me.Representation_asArray[le.index])&&(se=be.InbandEventStream_asArray),Le(se,le,ae)},getUTCTimingSources:function(Z){var le=De(Z),ae=!!Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME),se=Z?Z.UTCTiming_asArray:null,Q=[];return(le||ae)&&se&&se.forEach(function(Me){var be=new zi.Z;Me.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(be.schemeIdUri=Me.schemeIdUri,Me.hasOwnProperty(v.Z.VALUE)&&(be.value=Me.value.toString(),Q.push(be)))}),Q},getBaseURLsFromElement:we,getRepresentationSortFunction:function(){return function(Z,le){return Z.bandwidth-le.bandwidth}},getContentSteering:function(Z){if(Z&&Z.hasOwnProperty(v.Z.CONTENT_STEERING_AS_ARRAY))return je(Z[v.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.LOCATION_AS_ARRAY)?Z[v.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,se=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null;return new Zn(ae,se)}):[]},getPatchLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.PATCH_LOCATION_AS_ARRAY)?Z[v.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,se=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null,Q=le.hasOwnProperty(v.Z.TTL)?1e3*parseFloat(le[v.Z.TTL]):NaN;return new Cn(ae,se,Q)}):[]},getSuggestedPresentationDelay:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)?Z.suggestedPresentationDelay:null},getAvailabilityStartTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)&&Z.availabilityStartTime!==null?Z.availabilityStartTime.getTime():null},getServiceDescriptions:function(Z){var le=[];if(Z&&Z.hasOwnProperty(v.Z.SERVICE_DESCRIPTION)){var ae,se=kn(Z.ServiceDescription_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value,Me=null,be=null,ke=null,Re=null,he=null,xe=null,We=null;for(var dt in Q)Q.hasOwnProperty(dt)&&(dt===v.Z.ID?Me=Q[dt]:dt===v.Z.SERVICE_DESCRIPTION_SCOPE?be=Q[dt].schemeIdUri:dt===v.Z.SERVICE_DESCRIPTION_LATENCY?ke={target:parseInt(Q[dt].target),max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),referenceId:parseInt(Q[dt].referenceId)}:dt===v.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Re={max:parseFloat(Q[dt].max),min:parseFloat(Q[dt].min)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?he={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target),type:Q[dt].type,maxQualityDifference:parseInt(Q[dt].maxQualityDifference)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?xe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target)}:dt===v.Z.CONTENT_STEERING&&(We=je(Q[dt])));le.push({id:Me,schemeIdUri:be,latency:ke,playbackRate:Re,operatingQuality:he,operatingBandwidth:xe,contentSteering:We})}}catch(at){se.e(at)}finally{se.f()}}return le},getSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SEGMENT_ALIGNMENT))&&Z[v.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SUB_SEGMENT_ALIGNMENT))&&Z[v.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new St().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Me){se.e(Me)}finally{se.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new St().init(le)}):[]},setConfig:function(Z){Z&&(Z.errHandler&&(B=Z.errHandler),Z.BASE64&&(V=Z.BASE64))}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Vn=U.Z.getSingletonFactory(Ur),rn=S(703);function cn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(fe,Se){if(fe){if(typeof fe=="string")return bn(fe,Se);var Ee=Object.prototype.toString.call(fe).slice(8,-1);return Ee==="Object"&&fe.constructor&&(Ee=fe.constructor.name),Ee==="Map"||Ee==="Set"?Array.from(fe):Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee)?bn(fe,Se):void 0}}(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){re=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function bn(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Jn(){var L,P,B,V,ee,J,H,re,fe,Se,Ee=this.context,ie=(0,m.Z)(Ee).getInstance(),me=(0,Ze.Z)(Ee).getInstance();function ge(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},fe={},re={},Se={},De()}function qe(){De()}function De(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Me=Q.getActiveStream();Me&&(H=Me.getProcessors())}}}function Be(Q,Me){var be,ke={},Re=cn(Me);try{for(Re.s();!(be=Re.n()).done;){var he=be.value;Q[he]&&(ke[he]=Q[he])}}catch(xe){Re.e(xe)}finally{Re.f()}return ke}function ze(Q){var Me=me.get().streaming.cmcd.enabledKeys;return Q.filter(function(be){return Me.includes(be)})}function _e(Q){try{return Q.type===it.w.MPD_TYPE?((be=Le()).ot="m",be):Q.type===it.w.MEDIA_SEGMENT_TYPE?(Me=Q.mediaType,Se.hasOwnProperty(Me)||(Se[Me]=!1),re.hasOwnProperty(Me)||(re[Me]=!1),fe.hasOwnProperty(Me)||(fe[Me]=!1),function(ke){var Re,he=Le(),xe=function(Ft){try{var An=Ft.quality,nt=Ft.mediaInfo.bitrateList;return parseInt(nt[An].bandwidth/1e3)}catch(mt){return null}}(ke),We=function(Ft){try{return isNaN(Ft.duration)?NaN:Math.round(1e3*Ft.duration)}catch(An){return null}}(ke),dt=function(Ft){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Ft)/100)}catch(An){return null}}(ke.mediaType),at=function(Ft){try{var An=B.pr,nt=ee.getCurrentBufferLevel(Ft);return isNaN(An)||isNaN(nt)?null:100*parseInt(nt/An*10)}catch(mt){return null}}(ke.mediaType),Je=we(ke.mediaType),ht=function(Ft){try{var An=V.getTopBitrateInfoFor(Ft);return Math.round(An.bitrate/1e3)}catch(nt){return null}}(ke.mediaType),Bt=B.pr,Gt=function(Ft){if(H&&H.length!==0){var An,nt=cn(H);try{for(nt.s();!(An=nt.n()).done;){var mt=An.value;if(mt.getType()===Ft)return mt.probeNextRequest()}}catch(Wt){nt.e(Wt)}finally{nt.f()}}}(ke.mediaType);ke.mediaType===y.Z.VIDEO&&(Re="v"),ke.mediaType===y.Z.AUDIO&&(Re="a"),ke.mediaType===y.Z.TEXT&&(Re=ke.mediaInfo.mimeType==="application/mp4"?"tt":"c");var kt=me.get().streaming.cmcd.rtp;return kt||(kt=function(Ft){try{var An=J.getPlaybackRate();An||(An=1);var nt=Ft.quality,mt=Ft.mediaType,Wt=Ft.mediaInfo,xt=Ft.duration;if(!Wt)return NaN;var en=we(mt);en===0&&(en=500);var Jt=Wt.bitrateList[nt].bandwidth*xt/1e3/(en/An/1e3),Yt=me.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(me.get().streaming.cmcd.rtpSafetyFactor)?me.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Yt/100)+1)}catch(Dn){return NaN}}(ke)),isNaN(kt)||(he.rtp=kt),Gt&&(ke.url!==Gt.url?he.nor=encodeURIComponent(rn.Z.getRelativeUrl(ke.url,Gt.url)):Gt.range&&(he.nrr=Gt.range)),xe&&(he.br=xe),Re&&(he.ot=Re),isNaN(We)||(he.d=We),isNaN(dt)||(he.mtp=dt),isNaN(at)||(he.dl=at),isNaN(Je)||(he.bl=Je),isNaN(ht)||(he.tb=ht),isNaN(Bt)||Bt===1||(he.pr=Bt),fe[ke.mediaType]&&(he.bs=!0,fe[ke.mediaType]=!1),!re[ke.mediaType]&&Se[ke.mediaType]||(he.su=!0,re[ke.mediaType]=!1,Se[ke.mediaType]=!0),he}(Q)):Q.type===it.w.INIT_SEGMENT_TYPE?function(){var ke=Le();return ke.ot="i",ke.su=!0,ke}():Q.type===it.w.OTHER_TYPE||Q.type===it.w.XLINK_EXPANSION_TYPE?function(){var ke=Le();return ke.ot="o",ke}():Q.type===it.w.LICENSE?function(ke){var Re=Le();return Re.ot="k",Re}():null}catch(ke){return null}var Me,be}function Le(){var Q={},Me=me.get().streaming.cmcd.cid?me.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=me.get().streaming.cmcd.sid?me.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Me&&(Q.cid="".concat(Me)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function we(Q){try{var Me=ee.getCurrentBufferLevel(Q);return isNaN(Me)?null:100*parseInt(10*Me)}catch(be){return null}}function je(Q){try{B.pr=Q.playbackRate}catch(Me){}}function Z(Q){try{var Me=L.getIsDynamic(Q.data)?"l":"v",be=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Me),B.sf="".concat(be)}catch(ke){}}function le(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(fe[Q.mediaType]||(fe[Q.mediaType]=!0),re[Q.mediaType]||(re[Q.mediaType]=!0))}catch(Me){}}function ae(){for(var Q in fe)fe.hasOwnProperty(Q)&&(fe[Q]=!0);for(var Me in re)re.hasOwnProperty(Me)&&(re[Me]=!0)}function se(Q){try{if(!Q)return null;var Me=Object.keys(Q).sort(function(Re,he){return Re.localeCompare(he)}),be=Me.length,ke=Me.reduce(function(Re,he,xe){return he==="v"&&Q[he]===1||(typeof Q[he]=="string"&&he!=="ot"&&he!=="sf"&&he!=="st"?Re+="".concat(he,"=").concat(JSON.stringify(Q[he])):Re+="".concat(he,"=").concat(Q[he]),xe<be-1&&(Re+=",")),Re},"");return(ke=ke.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(Re){return null}}return P={getQueryParameter:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=_e(Q),be=function(Re){try{var he=me.get().streaming.cmcd.enabledKeys;return Object.keys(Re).filter(function(xe){return he.includes(xe)}).reduce(function(xe,We){return xe[We]=Re[We],xe},{})}catch(xe){return Re}}(Me),ke=se(be);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch(Re){return null}},getHeaderParameters:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Me=_e(Q),be=Be(Me,ze(["br","d","ot","tb"])),ke=Be(Me,ze(["bl","dl","mtp","nor","nrr","su"])),Re=Be(Me,ze(["bs","rtp"])),he=Be(Me,ze(["cid","pr","sf","sid","st","v"])),xe={"CMCD-Object":se(be),"CMCD-Request":se(ke),"CMCD-Status":se(Re),"CMCD-Session":se(he)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Me,headers:xe}),xe}return null}catch(We){return null}},setConfig:function(Q){Q&&(Q.abrController&&(V=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,je,this),ie.off(_.Z.MANIFEST_LOADED,Z,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.off(_.Z.PLAYBACK_SEEKED,ae,P),ge()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,je,P),ie.on(_.Z.MANIFEST_LOADED,Z,P),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.on(_.Z.PLAYBACK_SEEKED,ae,P),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,qe,P)}},L=Vn(Ee).getInstance(),ge(),P}Jn.__dashjs_factory_name="CmcdModel";var ar=U.Z.getSingletonFactory(Jn);function br(L){return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},br(L)}function Lr(L,P){Lr=function(re,fe){return new J(re,void 0,fe)};var B=no(RegExp),V=RegExp.prototype,ee=new WeakMap;function J(re,fe,Se){var Ee=B.call(this,re,fe);return ee.set(Ee,Se||ee.get(re)),Ee}function H(re,fe){var Se=ee.get(fe);return Object.keys(Se).reduce(function(Ee,ie){return Ee[ie]=re[Se[ie]],Ee},Object.create(null))}return Yi(J,B),J.prototype.exec=function(re){var fe=V.exec.call(this,re);return fe&&(fe.groups=H(fe,this)),fe},J.prototype[Symbol.replace]=function(re,fe){if(typeof fe=="string"){var Se=ee.get(this);return V[Symbol.replace].call(this,re,fe.replace(/\$<([^>]+)>/g,function(ie,me){return"$"+Se[me]}))}if(typeof fe=="function"){var Ee=this;return V[Symbol.replace].call(this,re,function(){var ie=[];return ie.push.apply(ie,arguments),br(ie[ie.length-1])!=="object"&&ie.push(H(ie,Ee)),fe.apply(this,ie)})}return V[Symbol.replace].call(this,re,fe)},Lr.apply(this,arguments)}function Yi(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&hi(L,P)}function no(L){var P=typeof Map=="function"?new Map:void 0;return no=function(B){if(B===null||(V=B,Function.toString.call(V).indexOf("[native code]")===-1))return B;var V;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(P!==void 0){if(P.has(B))return P.get(B);P.set(B,ee)}function ee(){return Br(B,arguments,vi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),hi(ee,B)},no(L)}function Br(L,P,B){return Br=qr()?Reflect.construct:function(V,ee,J){var H=[null];H.push.apply(H,ee);var re=new(Function.bind.apply(V,H));return J&&hi(re,J.prototype),re},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function hi(L,P){return hi=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},hi(L,P)}function vi(L){return vi=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},vi(L)}var wo="static",ro="dynamic",ta="cmsd-",bi=ta+wo,Al=ta+ro,lu="stream",yc=["mb","st","sf","v"],xf={video:"v",audio:"a",text:"tt",stream:lu},si=/^[-0-9]/;function Ds(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},V={}}function re(ge){ge&&Object.keys(ge).forEach(function(qe){yc.includes(qe)||delete ge[qe]})}function fe(ge){return!ge||ge.toLowerCase()!=="false"&&(si.test(ge)?parseInt(ge,10):ge.replace(/["]+/g,""))}function Se(ge){try{for(var qe={},De=ge.split(","),Be=0;Be<De.length;Be++){var ze=De[Be].split("="),_e=ze[0],Le=fe(ze[1]);qe[_e]=Le}return qe}catch(we){P.error("Failed to parse CMSD-Static response header value:",we)}}function Ee(ge){try{for(var qe={},De=ge.split(","),Be=De[De.length-1].split(";"),ze=1;ze<Be.length;ze++){var _e=Be[ze].split("="),Le=_e[0],we=fe(_e[1]);qe[Le]=we}return qe}catch(je){return P.error("Failed to parse CMSD-Dynamic response header value:",je),[]}}function ie(ge){return xf[ge]||"o"}function me(ge,qe,De){var Be=ge===wo?B:V,ze=Be[qe]||{},_e=Be[lu]||{};return ze[De]||_e[De]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ge,qe){for(var De=null,Be=null,ze=ge.split("\r\n"),_e=ze.length-1;_e>=0;_e--){var Le=ze[_e].match(Lr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Le&&Le.groups){var we=Le.groups.key.toLowerCase(),je=Le.groups.value;switch(we){case bi:De=Se(je),J.trigger(T.Z.CMSD_STATIC_HEADER,De);break;case Al:Be||(Be=Ee(je))}}}var Z=lu;return De&&De.ot?Z=De.ot:qe&&(Z=ie(qe)),re(B[Z]),re(V[Z]),De&&(B[Z]=Object.assign(B[Z]||{},De)),Be&&(V[Z]=Object.assign(V[Z]||{},Be)),{static:De,dynamic:Be}},getMaxBitrate:function(ge){var qe=ie(ge);return me(ro,qe,"mb")||-1},getEstimatedThroughput:function(ge){var qe=ie(ge);return me(ro,qe,"etp")||null},getResponseDelay:function(ge){var qe=ie(ge);return me(ro,qe,"rd")||null},getRoundTripTime:function(ge){var qe=ie(ge);return me(ro,qe,"rtt")||null}},P=(0,N.Z)(ee).getInstance().getLogger(L),H(),L}Ds.__dashjs_factory_name="CmsdModel";var _n=U.Z.getSingletonFactory(Ds);function Xn(){var L,P,B=this.context,V={};function ee(){P=(0,N.Z)(B).getInstance().getLogger(L)}function J(re){for(var fe={},Se=0,Ee=0,ie=0,me=0,ge=re.length,qe=0;qe<ge;++qe)Se+=re[qe].chunkDownloadTimeRelativeMS,Ee+=re[qe].bufferLevel,ie+=re[qe].chunkDownloadTimeRelativeMS*re[qe].bufferLevel,me+=re[qe].chunkDownloadTimeRelativeMS*re[qe].chunkDownloadTimeRelativeMS;return fe.m=(ie-Se*Ee/ge)/(me-Se*Se/ge),fe.b=Ee/ge-fe.m*Se/ge,function(De){return fe.m*De+fe.b}}function H(re){var fe,Se=!0,Ee=re.reduce(function(ie,me){return ie+me.bufferLevelAtSegmentEnd},0)/re.length;return re.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(Se=!1),ie.bufferLevelAtSegmentEnd/Ee<.8&&(Se=!1),fe?fe>ie.bitrate&&(Se=!1):fe=ie.bitrate}),Se}return L={setup:ee,addMeasurement:function(re,fe,Se,Ee,ie){re&&re.mediaType&&!V[re.mediaType]&&(V[re.mediaType]=[]);var me=re.mediaInfo.bitrateList.find(function(ge){return ge.id===re.representationId});V[re.mediaType].push({index:re.index,repId:re.representationId,mediaType:re.mediaType,requestTimeMS:Ee,adjustedAvailabilityStartTimeMS:re.availabilityStartTime.getTime(),segDurationMS:1e3*re.duration,chunksDurationMS:Se.reduce(function(ge,qe){return ge+qe.chunkDownloadDurationMS},0),segmentBytes:Se.reduce(function(ge,qe){return ge+qe.chunkBytes},0),bitrate:me&&me.bandwidth,bitrateList:re.mediaInfo.bitrateList,chunkMeasurements:Se,fetchDownloadDurationMS:fe,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(Se.slice(1))}),V[re.mediaType].length>10&&V[re.mediaType].shift()},getThroughputCapacityDelayMS:function(re,fe){var Se=V[re.mediaType]&&V[re.mediaType].slice(-3);return!Se||Se.length<3?0:H(Se)?fe/4>250?250:fe/4:0},getEstimatedDownloadDurationMS:function(re){var fe=V[re.mediaType].slice(-1).pop(),Se=V[re.mediaType].slice(-3),Ee=fe.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;fe.bufferLevelAtSegmentStart=fe.getEstimatedBufferLevel(Ee/2),fe.bufferLevelAtSegmentEnd=fe.getEstimatedBufferLevel(Ee);var ie=H(Se),me=ie?.6:.8;if(fe.isBufferStable&&1.05*fe.segDurationMS<fe.fetchDownloadDurationMS)return fe.fetchDownloadDurationMS;if(!ie||fe.segDurationMS<fe.fetchDownloadDurationMS||fe.adjustedAvailabilityStartTimeMS<=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.segDurationMS)return .8*fe.fetchDownloadDurationMS;for(var ge=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.adjustedAvailabilityStartTimeMS,qe=0,De=0,Be=0,ze=0;ze<fe.chunkMeasurements.length;ze++){var _e=fe.chunkMeasurements[ze];if(ge<De+_e.chunkDownloadDurationMS)break;De+=_e.chunkDownloadDurationMS,qe+=_e.chunkBytes,Be++}if(ge<0&&P.warn("request time was before adjusted availibitly start time"),qe&&De&&Be>.2*fe.chunkMeasurements.length){var Le=qe/De,we=fe.segmentBytes/Le;return fe.fetchDownloadDurationMS<we?fe.fetchDownloadDurationMS*me:we*me}var je=fe.bitrate;return fe.bitrateList.some(function(Z){if(Z.bandwidth>fe.bitrate)return je=Z.bandwidth,!0}),je===fe.bitrate?fe.fetchDownloadDurationMS*me:me*fe.segmentBytes*8*1e3/je}},ee(),L}Xn.__dashjs_factory_name="LowLatencyThroughputModel";var hr=U.Z.getSingletonFactory(Xn),ti=S(5717);function Mr(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Bi(L){L=L||{};var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me=this.context,ge=L.errHandler,qe=L.dashMetrics,De=L.mediaPlayerModel,Be=L.requestModifier,ze=L.boxParser,_e=L.errors,Le=L.requestTimeout||0,we=(0,m.Z)(me).getInstance(),je=(0,Ze.Z)(me).getInstance();function Z(le,ae){var se,Q=le.request,Me=[],be=!0,ke=!0,Re=new Date,he=Re,xe=0,We=null,dt=null;if(!Be||!qe||!ge)throw new Error("config object is not correct or missing");var at,Je=function(en){Q.requestStartDate=Re,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||Re,Q.fileLoaderType=dt;var Jt=se.response?se.response.responseURL:null,Yt=se.response?se.response.status:null,Dn=se.response&&se.response.getAllResponseHeaders?se.response.getAllResponseHeaders():se.response?se.response.responseHeaders:null,xn=Dn&&je.get().streaming.cmsd&&je.get().streaming.cmsd.enabled?re.parseResponseHeaders(Dn,Q.mediaType):null;qe.addHttpRequest(Q,Jt,Yt,Dn,en?Me:null,xn)},ht=function(en){ke=!1,Je(en),Q.type===it.w.MPD_TYPE&&(qe.addManifestUpdate(Q),we.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},Bt=function(){if(We&&(clearTimeout(We),We=null),B.indexOf(se)!==-1&&(B.splice(B.indexOf(se),1),ke))if(ht(!1),ae>0){try{je.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===it.w.MEDIA_SEGMENT_TYPE&&De.getRetryAttemptsForType(it.w.MEDIA_SEGMENT_TYPE)===ae&&we.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:le};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),Z(le,ae))},De.getRetryIntervalsForType(Q.type))}else{if(Q.type===it.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ge.error(new de.Z(J[Q.type],Q.url+" is not available",{request:Q,response:se.response})),le.error&&le.error(Q,"error",se.response.statusText,se.response),le.complete&&le.complete(Q,se.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===it.w.MEDIA_SEGMENT_TYPE?((at=Pr(me).create({requestModifier:Be,lowLatencyThroughputModel:Se,boxParser:ze})).setup({dashMetrics:qe}),dt=y.Z.FILE_LOADER_TYPES.FETCH):(at=(0,nn.Z)(me).create({requestModifier:Be}),dt=y.Z.FILE_LOADER_TYPES.XHR);var Gt=null,kt=Be.modifyRequestURL?Be.modifyRequestURL(Q.url):Q.url;if(je.get().streaming.cmcd&&je.get().streaming.cmcd.enabled){var Ft=je.get().streaming.cmcd.mode;if(Ft===y.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Yt=H.getQueryParameter(en);return Yt&&Jt.push(Yt),Jt}catch(Dn){return[]}}(Q);kt=rn.Z.addAditionalQueryParameterToUrl(kt,An)}else Ft===y.Z.CMCD_MODE_HEADER&&(Gt=H.getHeaderParameters(Q))}var nt=fe.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var mt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});kt=rn.Z.addAditionalQueryParameterToUrl(kt,mt)}Q.url=kt,se={url:kt,method:it.w.GET,withCredentials:nt,request:Q,onload:function(){se.response.status>=200&&se.response.status<=299&&(ht(!0),le.success&&le.success(se.response.response,se.response.statusText,se.response.responseURL),le.complete&&le.complete(Q,se.response.statusText))},onend:Bt,onerror:Bt,progress:function(en){var Jt=new Date;be&&(be=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Me.push({s:he,d:en.time?en.time:Jt.getTime()-he.getTime(),b:[en.loaded?en.loaded-xe:0]}),he=Jt,xe=en.loaded),We&&(clearTimeout(We),We=null),je.get().streaming.fragmentRequestProgressTimeout>0&&(We=setTimeout(function(){Ee.warn("Abort request "+se.url+" due to progress timeout"),se.response.onabort=null,se.loader.abort(se),Bt()},je.get().streaming.fragmentRequestProgressTimeout)),le.progress&&en&&le.progress(en)},onabort:function(){Je(!0),We&&(clearTimeout(We),We=null),le.abort&&le.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Yt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Yt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";Ee.warn(Jt)},loader:at,timeout:Le,headers:Gt};var Wt=new Date().getTime();if(isNaN(Q.delayLoadingTime)||Wt>=Q.delayLoadingTime)B.push(se),at.load(se);else{var xt={httpRequest:se};V.push(xt),xt.delayTimeout=setTimeout(function(){if(V.indexOf(xt)!==-1){V.splice(V.indexOf(xt),1);try{Re=new Date,he=Re,B.push(xt.httpRequest),at.load(xt.httpRequest)}catch(en){xt.httpRequest.onerror()}}},Q.delayLoadingTime-Wt)}}return P={load:function(le){le.request?Z(le,De.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){ee.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),ee=[],V.forEach(function(le){return clearTimeout(le.delayTimeout)}),V=[],B.forEach(function(le){le.request.type!==it.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),B=[]}},Ee=(0,N.Z)(me).getInstance().getLogger(P),B=[],V=[],ee=[],H=ar(me).getInstance(),re=_n(me).getInstance(),Se=hr(me).getInstance(),fe=(0,ti.Z)(me).getInstance(),Mr(ie={},it.w.MPD_TYPE,_e.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,it.w.XLINK_EXPANSION_TYPE,_e.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,it.w.INIT_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,it.w.MEDIA_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.INDEX_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,it.w.OTHER_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,P}Bi.__dashjs_factory_name="HTTPLoader";var Xr=U.Z.getClassFactory(Bi);function na(){var L;function P(){L={}}function B(){P()}return B(),{getLoader:function(V){for(var ee in L)if(L.hasOwnProperty(ee)&&V.startsWith(ee))return L[ee];return Xr},registerLoader:function(V,ee){L[V]=ee},unregisterLoader:function(V){L[V]&&delete L[V]},unregisterAllLoader:P,reset:B}}na.__dashjs_factory_name="SchemeLoaderFactory";var Di=U.Z.getSingletonFactory(na);function ui(L){L=L||{};var P,B,V=this.context;return P=Di(V).getInstance(),{load:function(ee){if(!B){var J=P.getLoader(ee&&ee.request?ee.request.url:null);B=J(V).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}ui.__dashjs_factory_name="URLLoader";var Ao=U.Z.getClassFactory(ui);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wi(L)}function qo(L,P){return qo=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},qo(L,P)}function ra(L,P){return!P||Wi(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function pt(L){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},pt(L)}var ia=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&qo(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=pt(P);if(B){var re=pt(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return ra(this,J)});function ee(J){var H;return function(re,fe){if(!(re instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=V.call(this,J)).checkForExistenceOnly=!0,H}return ee}(j.Z);function Ps(L){L=L||{};var P,B,V=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,re=L.errors,fe=L.streamId;return P={checkForExistence:function(Se){var Ee=function(me){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:Se,exists:me})};if(Se){var ie=new ia(Se.url);B.load({request:ie,success:function(){Ee(!0)},error:function(){Ee(!1)}})}else Ee(!1)},load:function(Se){var Ee=function(ie,me){ee.trigger(J.LOADING_COMPLETED,{request:Se,response:ie||null,error:me||null,sender:P})};Se?B.load({request:Se,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:Se,stream:ie.stream,streamId:fe}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:Se,response:ie.data||null,error:null,sender:P})},success:function(ie){Ee(ie)},error:function(ie,me,ge){Ee(void 0,new de.Z(re.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ge,me))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:P})}}):Ee(void 0,new de.Z(re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=Ao(V).create({errHandler:L.errHandler,errors:re,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:y.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),P}Ps.__dashjs_factory_name="FragmentLoader";var pr=U.Z.getClassFactory(Ps);function Io(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}Io.__dashjs_factory_name="SegmentResponseModifier";var cu=U.Z.getSingletonFactory(Io);function Il(L){L=L||{};var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,re=L.mediaPlayerModel,fe=L.dashMetrics,Se=(0,N.Z)(ee).getInstance(),Ee=cu(ee).getInstance(),ie=L.streamInfo;function me(){return ie.id}function ge(){for(var De in V)V[De].reset();V={}}function qe(De){if(De.sender){var Be=De.request,ze=De.response,_e=Be.isInitializationRequest(),Le=Be.mediaInfo.streamInfo;if(De.error&&(Be.mediaType===y.Z.AUDIO||Be.mediaType===y.Z.VIDEO||Be.mediaType===y.Z.TEXT&&Be.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:De.request.serviceLocation}),ze&&Le){var we=function(je,Z,le,ae){var se=new Xt;return se.streamId=le,se.mediaInfo=Z.mediaInfo,se.segmentType=Z.type,se.start=Z.startTime,se.duration=Z.duration,se.end=se.start+se.duration,se.bytes=je,se.index=Z.index,se.quality=Z.quality,se.representationId=Z.representationId,se.endFragment=ae,se}(ze,Be,ie.id,De.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Ee.modifyResponseAsync(we).then(function(je){J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:je,request:Be},{streamId:Le.id,mediaType:Be.mediaType})}).catch(function(je){B.error(je),J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:we,request:Be},{streamId:Le.id,mediaType:Be.mediaType})})}else B.warn("No "+Be.mediaType+" bytes to push or stream is inactive.")}}return P={getStreamId:me,getModel:function(De){var Be=V[De];return Be||(Be=X(ee).create({streamInfo:ie,type:De,dashMetrics:fe,fragmentLoader:pr(ee).create({dashMetrics:fe,mediaPlayerModel:re,errHandler:H,requestModifier:(0,He.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Ae,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:me()}),debug:Se,eventBus:J,events:T.Z}),V[De]=Be),Be},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,qe,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,qe,this),ge()}},B=Se.getLogger(P),ge(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,qe,P),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,qe,P),P}Il.__dashjs_factory_name="FragmentController";var ms=U.Z.getClassFactory(Il),Ha=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Lu=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function ku(L){var P,B,V=this.context,ee=L.streamInfo;function J(re){B.setTrackByIndex(re)}function H(){B&&B.reset()}return P={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var re=B.getTracks();re&&re.length>0&&J(0)},provide:function(re,fe){if(typeof fe=="function"){var Se,Ee,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||re==null)fe(null);else{(Ee=B.getThumbnailRequestForTime(re))&&(ie.segmentDuration=Ee.duration),Se=re%ie.segmentDuration;var me=Math.floor(Se*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ge=new Ha;if(ge.width=Math.floor(ie.widthPerTile),ge.height=Math.floor(ie.heightPerTile),ge.x=Math.floor(me%ie.tilesHor)*ie.widthPerTile,ge.y=Math.floor(me/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(re,function(De){ge.url=De,fe(ge)});if(Ee)ge.url=Ee.url,ie.segmentDuration=NaN;else{var qe=Math.floor(re/ie.segmentDuration);ge.url=function(De,Be){var ze=Be+De.startNumber,_e=(0,M.vi)(De.templateUrl,"Number",ze);return _e=(0,M.vi)(_e,"Time",(ze-1)*De.segmentDuration*De.timescale),_e=(0,M.vi)(_e,"Bandwidth",De.bandwidth),(0,M.eR)(_e)}(ie,qe)}fe(ge)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var re=B.getTracks(),fe=0;return re.map(function(Se){var Ee=new Lu;return Ee.mediaType=y.Z.IMAGE,Ee.qualityIndex=fe++,Ee.bitrate=Se.bitrate,Ee.width=Se.width,Ee.height=Se.height,Ee})},reset:H},H(),B=(0,In.Z)(V).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),P}ku.__dashjs_factory_name="ThumbnailController";var oa=U.Z.getClassFactory(ku),aa=S(7417);function fu(L){var P;L=L||{};var B=[],V=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(re){B.indexOf(re)===-1&&(B.push(re),V.trigger(ee,{entry:re}))}return P={add:H,contains:function(re){return!!(B.length&&re&&re.length)&&B.indexOf(re)!==-1},reset:function(){B=[]}},J&&V.on(J,function(re){H(re.entry)},P),P}fu.__dashjs_factory_name="BlackListController";var vs=U.Z.getClassFactory(fu),Ec=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT,y.Z.MUXED,y.Z.IMAGE];function xr(L){L=L||{};var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le=this.context,we=(0,m.Z)(Le).getInstance(),je=(0,_t.Z)(Le).getInstance(),Z=L.manifestModel,le=L.mediaPlayerModel,ae=L.dashMetrics,se=L.manifestUpdater,Q=L.adapter,Me=L.timelineConverter,be=L.capabilities,ke=L.errHandler,Re=L.abrController,he=L.playbackController,xe=L.eventController,We=L.mediaController,dt=L.protectionController,at=L.textController,Je=L.videoModel,ht=L.streamInfo,Bt=L.settings;function Gt(bt,Sn){return new Promise(function(En,Lt){Jt(),Ee=!0,Dn();var On=Je.getElement(),ut=[];Ec.forEach(function(tt){(tt!==y.Z.TEXT||bt)&&(tt!==y.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&ut.push(kt(tt,bt))}),Promise.all(ut).then(function(){return tt=Sn,new Promise(function(qt){var Ve={},Ke=V.map(function(Mt){return Mt.createBufferSinks(tt)});Promise.all(Ke).then(function(Mt){Mt.forEach(function(fn){fn&&(Ve[fn.getType()]=fn)}),qt(Ve)}).catch(function(){qt(Ve)})});var tt}).then(function(tt){if(Ee=!1,V.length===0){var qt="No streams to play.";ke.error(new de.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qt,Z.getValue())),B.fatal(qt)}else xn();bt&&at.createTracks(ht),En(tt)}).catch(function(tt){Lt(tt)})})}function kt(bt,Sn){var En,Lt=Q.getAllMediaInfoForType(ht,bt),On=[],ut=null;if(!Lt||Lt.length===0)return B.info("No "+bt+" data."),Promise.resolve();bt===y.Z.VIDEO&&(re=!0),bt===y.Z.AUDIO&&(fe=!0);for(var tt=0,qt=Lt.length;tt<qt;tt++)ut=Lt[tt],bt===y.Z.TEXT&&ut.isEmbedded&&(at.addEmbeddedTrack(ht,ut),On.push(ut)),Ft(ut)&&We.addTrack(ut);if(On.length>0&&(We.setInitialMediaSettingsForType(bt,ht),at.addMediaInfosToBuffer(ht,bt,On)),Lt=Lt.filter(function(Ke){return!Ke.isEmbedded}),Lt.length===0)return Promise.resolve();if(bt===y.Z.IMAGE)return(me=oa(Le).create({streamInfo:ht,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Be,eventBus:we,events:T.Z,dashConstants:v.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();we.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:ht,mediaInfo:ut}),We.setInitialMediaSettingsForType(bt,ht);var Ve=function(Ke,Mt){var fn=Ke&&Ke.length>0?Ke[0]:null,Tn=ie.getModel(fn?fn.type:null),sr=fn?fn.type:null,Zr=fn?fn.mimeType:null,Ai=fn?fn.isFragmented:null,zr=hn(Le).create({streamInfo:ht,type:sr,mimeType:Zr,timelineConverter:Me,adapter:Q,manifestModel:Z,mediaPlayerModel:le,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:Re,playbackController:he,mediaController:We,textController:at,errHandler:ke,settings:Bt,boxParser:De,segmentBlacklistController:ge});zr.initialize(Mt,re,Ai),V.push(zr);for(var io=0;io<Ke.length;io++)zr.addMediaInfo(Ke[io]);return sr===y.Z.TEXT&&at.addMediaInfosToBuffer(ht,sr,Ke,Tn),zr}(Lt,Sn);return(En=We.getCurrentTrackFor(bt,ht.id))?(Re.updateTopQualityIndex(En),Ve.selectMediaInfo(bt===y.Z.TEXT&&En.isEmbedded?Lt[0]:En)):Promise.resolve()}function Ft(bt){var Sn,En=bt?bt.type:null;return En===y.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),ke.error(new de.Z(Ae.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,Z.getValue())),!1):!(En!==y.Z.TEXT&&En!==y.Z.IMAGE&&bt.contentProtection&&!be.supportsEncryptedMedia()&&(ke.error(new de.Z(Ae.CAPABILITY_MEDIAKEYS_ERROR_CODE,Ae.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(bt){for(var Sn=V?V.length:0,En=0;En<Sn;En++){var Lt=V[En].getFragmentModel();Lt.abortRequests(),Lt.resetInitialSettings(),V[En].reset(!1,bt)}at&&at.deactivateStream(ht),V=[],J=!1,H=!1,Fn(!1),mt(!1),we.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:ht})}function nt(bt){An(bt),ee=!1,re=!1,fe=!1,Se={},Ee=!1,ze=!1,_e=[]}function mt(bt){ze=bt}function Wt(){return ht?ht.start:NaN}function xt(){return ht?ht.id:null}function en(){return ht}function Jt(){if(!Je||!Re)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Yt(bt){bt.error&&(ke.error(bt.error),B.fatal(bt.error.message))}function Dn(){if(xe){var bt=Q.getEventsFor(ht);bt&&bt.length>0&&xe.addInlineEvents(bt,ht.id)}}function xn(){for(var bt=V.length,Sn=Se.audio||Se.video?new de.Z(Ae.DATA_UPDATE_FAILED_ERROR_CODE,Ae.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<bt;En++)if(V[En].isUpdating()||Ee)return;if(dt){dt.clearMediaInfoArray();for(var Lt=0;Lt<bt&&V[Lt];Lt++){var On=V[Lt].getType(),ut=V[Lt].getMediaInfo();if(On===y.Z.AUDIO||On===y.Z.VIDEO||On===y.Z.TEXT&&ut.isFragmented){var tt=V[Lt].getMediaInfo();tt&&dt.initializeForMedia(tt)}}dt.handleKeySystemFromManifest()}Sn?ke.error(Sn):ee||(ee=!0,Je.waitForReadyState(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){we.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:ht})}))}function rr(){var bt=un(),Sn=bt.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!bt[En].isBufferingCompleted()&&(bt[En].getType()===y.Z.AUDIO||bt[En].getType()===y.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",bt[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,we.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:ht},{streamInfo:ht})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(bt){Se[bt.mediaType]=bt.error,xn()}function It(bt){xe&&xe.addInbandEvents(bt.events,ht.id)}function $t(bt){return bt&&bt.type?Zt(bt.type):null}function Zt(bt){return bt?un().filter(function(Sn){return Sn.getType()===bt})[0]:null}function un(){for(var bt,Sn,En=[],Lt=0;Lt<V.length;Lt++)(bt=(Sn=V[Lt]).getType())!==y.Z.AUDIO&&bt!==y.Z.VIDEO&&bt!==y.Z.TEXT||En.push(Sn);return En}function vn(bt,Sn){var En=en(),Lt=Sn.getStreamInfo();if(!Lt||!En)return!0;var On=Q.getAdaptationForType(Lt.index,bt,Lt),ut=Q.getAdaptationForType(En.index,bt,En);return On&&ut?!(!Pn(ut)&&Pn(On)):!On&&!ut}function Pn(bt){return!!bt&&!!(bt.ContentProtection||bt.Representation_asArray&&bt.Representation_asArray.length>0&&bt.Representation_asArray[0].ContentProtection)}function Nn(bt,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!bt||!bt.hasOwnProperty("getStreamInfo"))return!1;var Lt=bt.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Lt||!On)return!1;var ut=Q.getAdaptationForType(Lt.index,Sn,Lt),tt=Q.getAdaptationForType(On.index,Sn,On);if(!ut||!tt)return!ut&&!tt;var qt=ut&&tt&&ut.mimeType===tt.mimeType,Ve=tt.Representation_asArray.map(function(Tn){return Tn.codecs}),Ke=ut.Representation_asArray.map(function(Tn){return Tn.codecs}),Mt=Ke.some(function(Tn){return Ve.indexOf(Tn)>-1}),fn=Ke.some(function(Tn){return Ve.some(function(sr){return be.codecRootCompatibleWithCodec(sr,Tn)})});return Mt||fn&&qt}function Fn(bt){qe=bt}function Gn(){return qe}return P={initialize:function(){we.on(T.Z.BUFFERING_COMPLETED,rr,P),we.on(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.on(T.Z.INBAND_EVENTS,It,P),dt&&(we.on(T.Z.KEY_ERROR,Yt,P),we.on(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.on(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.on(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.on(T.Z.KEY_SESSION_CREATED,Yt,P),we.on(T.Z.KEY_STATUSES_CHANGED,Yt,P)),at.initializeForStream(ht),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht})},getStreamId:function(){return ht?ht.id:null},activate:function(bt,Sn){return new Promise(function(En,Lt){if(!J)return Gn()?(J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),void En(Sn)):void function(On,ut){return Gt(On,ut)}(bt,Sn).then(function(On){J=!0,we.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),En(On)}).catch(function(On){Lt(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return ht?ht.duration:NaN},getStartTime:Wt,getId:xt,getStreamInfo:en,getHasAudioTrack:function(){return fe},getHasVideoTrack:function(){return re},startPreloading:function(bt,Sn){return new Promise(function(En,Lt){Gn()?Lt():(B.info("[startPreloading] Preloading next stream with id ".concat(xt())),Fn(!0),Gt(bt,Sn).then(function(){for(var On=0;On<V.length&&V[On];On++)V[On].setExplicitBufferingTime(Wt()),V[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Lt()}))})},initializeForTextWithMediaSource:function(bt){return new Promise(function(Sn,En){kt(y.Z.TEXT,bt).then(function(){return(Lt=Zt(y.Z.TEXT))?Lt.createBufferSinks():Promise.resolve();var Lt}).then(function(){at.createTracks(ht),Sn()}).catch(function(Lt){En(Lt)})})},getThumbnailController:function(){return me},getBitrateListFor:function(bt){if(Jt(),bt===y.Z.IMAGE)return me?me.getBitrateList():[];var Sn=function(En){for(var Lt=null,On=0;On<V.length;On++)if((Lt=V[On]).getType()===En)return Lt.getMediaInfo();return null}(bt);return Re.getBitrateList(Sn)},updateData:function(bt){return new Promise(function(Sn){Ee=!0,ht=bt,xe&&Dn();for(var En=[],Lt=0,On=V.length;Lt<On;Lt++){var ut=V[Lt],tt=ut.getMediaInfo();En.push(ut.updateStreamInfo(ht));var qt=Q.getAllMediaInfoForType(ht,ut.getType());if(qt=qt.filter(function(Mt){return!Mt.isEmbedded})){ut.clearMediaInfoArray();for(var Ve=0;Ve<qt.length;Ve++){var Ke=qt[Ve];ut.addMediaInfo(qt[Ve]),Q.areMediaInfosEqual(tt,Ke)&&(Re.updateTopQualityIndex(Ke),En.push(ut.selectMediaInfo(Ke)))}}}Promise.all(En).then(function(){for(En=[];_e.length>0;){var Mt=_e.pop(),fn=Mt.newMediaInfo,Tn=$t(Mt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(fn))}return Promise.all(En)}).then(function(){Ee=!1,xn(),we.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht}),Sn()})})},reset:function(bt){ie&&(ie.reset(),ie=null),Re&&ht&&Re.clearDataForStream(ht.id),ge&&(ge.reset(),ge=null),nt(bt),ht=null,we.off(T.Z.DATA_UPDATE_COMPLETED,ir,P),we.off(T.Z.BUFFERING_COMPLETED,rr,P),we.off(T.Z.INBAND_EVENTS,It,P),dt&&(we.off(T.Z.KEY_ERROR,Yt,P),we.off(T.Z.SERVER_CERTIFICATE_UPDATED,Yt,P),we.off(T.Z.LICENSE_REQUEST_COMPLETE,Yt,P),we.off(T.Z.KEY_SYSTEM_SELECTED,Yt,P),we.off(T.Z.KEY_SESSION_CREATED,Yt,P),we.off(T.Z.KEY_STATUSES_CHANGED,Yt,P))},getProcessors:un,setMediaSource:function(bt){return new Promise(function(Sn,En){for(var Lt=[],On=0;On<V.length;)Ft(V[On].getMediaInfo())?(Lt.push(V[On].setMediaSource(bt)),On++):(V[On].reset(),V.splice(On,1));Promise.all(Lt).then(function(){for(var ut=0;ut<V.length;ut++)V[ut].dischargePreBuffer();if(V.length===0){var tt="No streams to play.";ke.error(new de.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,tt+"nostreams",Z.getValue())),B.fatal(tt)}Sn()}).catch(function(ut){B.error(ut),En(ut)})})},isMediaCodecCompatible:function(bt){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Nn(bt,y.Z.VIDEO,Sn)&&Nn(bt,y.Z.AUDIO,Sn)},isProtectionCompatible:function(bt){return!bt||vn(y.Z.VIDEO,bt)&&vn(y.Z.AUDIO,bt)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return ze},setIsEndedEventSignaled:mt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var bt=V.length,Sn=0;Sn<bt&&V[Sn];Sn++)V[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(bt){if(J&&ht){H=!1;var Sn=bt.newMediaInfo,En=Z.getValue();Q.setCurrentMediaInfo(ht.id,Sn.type,Sn);var Lt=$t(Sn);if(Lt){var On=he.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(_e.push(bt),se.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),se.refreshManifest())):Lt.selectMediaInfo(Sn).then(function(){Sn.type!==y.Z.VIDEO&&Sn.type!==y.Z.AUDIO||Re.updateTopQualityIndex(Sn),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function(bt){var Sn=Zt(bt.mediaType);Sn&&Sn.prepareQualityChange(bt)}},function(){try{Be=(0,N.Z)(Le).getInstance(),B=Be.getLogger(P),nt(),De=(0,aa.Z)(Le).getInstance(),ge=vs(Le).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=ms(Le).create({streamInfo:ht,mediaPlayerModel:le,dashMetrics:ae,errHandler:ke,settings:Bt,boxParser:De,dashConstants:v.Z,urlUtils:je})}catch(bt){throw bt}}(),P}xr.__dashjs_factory_name="Stream";var ys=U.Z.getClassFactory(xr),Es=function L(P){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||null,this.type=it.w.CONTENT_STEERING_TYPE,this.responseType="json"},Yr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function _c(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De=this.context,Be=(0,_t.Z)(De).getInstance();function ze(Re){Z(Re,"baseUrl")}function _e(Re){Z(Re,"location")}function Le(Re){if(Re&&Re.request&&Re.request.serviceLocation&&Re.request.requestStartDate&&Re.request.requestEndDate&&!isNaN(Re.request.bytesTotal)){var he=Re.request.serviceLocation,xe=Re.request.requestEndDate.getTime()-Re.request.requestStartDate.getTime();je(he,parseInt(8*Re.request.bytesTotal/xe*1e3))}}function we(Re){Re&&Re.httpRequest&&Re.httpRequest._serviceLocation&&!isNaN(Re.throughput)&&je(Re.httpRequest._serviceLocation,1e3*Re.throughput)}function je(Re,he){ee[Re]||(ee[Re]=[]),ee[Re].push(he),ee[Re].length>4&&ee[Re].shift()}function Z(Re,he){if(Re&&Re.request&&Re.request.serviceLocation){var xe=Re.request.serviceLocation;V[he].all.indexOf(xe)===-1&&V[he].all.push(xe),V[he].current=xe}}function le(){var Re=Ee.getValue(),he=qe.getContentSteering(Re);return he||(he=me.getServiceDescriptionSettings().contentSteering),he}function ae(){return new Promise(function(Re){try{var he=le();if(!he||!he.serverUrl)return void Re();var xe=function(dt){var at=dt.serverUrl;B&&B.reloadUri&&(at=Be.isRelative(B.reloadUri)?Be.resolve(B.reloadUri,dt.serverUrl):B.reloadUri);var Je=[],ht=V.baseUrl.all.concat(V.location.all);if(ht.length>0){var Bt=ht.map(function(Ft){var An=function(nt){if(!nt||!ee[nt]||ee[nt].length===0)return-1;var mt=ee[nt].reduce(function(Wt,xt){return Wt+xt})/ee[nt].length;return parseInt(mt)}(Ft);return{serviceLocation:Ft,throughput:An}});Bt.sort(function(Ft,An){return An.throughput-Ft.throughput});var Gt="",kt="";Bt.forEach(function(Ft,An){An!==0&&(Gt="".concat(Gt,","),Ft.throughput>-1&&(kt="".concat(kt,","))),Gt="".concat(Gt).concat(Ft.serviceLocation),Ft.throughput>-1&&(kt="".concat(kt).concat(Ft.throughput))}),Je.push({key:"_DASH_pathway",value:'"'.concat(Gt,'"')}),Je.push({key:"_DASH_throughput",value:kt})}return at=rn.Z.addAditionalQueryParameterToUrl(at,Je)}(he),We=new Es(xe);H.load({request:We,success:function(dt){(function(at){at&&at[v.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(at[v.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Yr).version=at[v.Z.CONTENT_STEERING_RESPONSE.VERSION],at[v.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(at[v.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=at[v.Z.CONTENT_STEERING_RESPONSE.TTL]),at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=at[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=at[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(Je){return function(ht){return ht[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST]}(Je)})),Me())})(dt),ge.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:xe}),Re()},error:function(dt,at,Je,ht){(function(Bt,Gt){try{switch(P.warn("Error fetching data from content steering server",Bt),Gt.status){case 410:break;case 429:var kt=Gt&&Gt.getResponseHeader?Gt.getResponseHeader("retry-after"):null;kt!==null&&(B||(B={}),B.ttl=parseInt(kt)),Me();break;default:Me()}}catch(Ft){P.error(Ft)}})(dt,ht),Re(dt)},complete:function(){V.baseUrl.all=se(V.baseUrl),V.location.all=se(V.location)}})}catch(dt){Re(dt)}})}function se(Re){return Re.all&&Re.all.length!==0&&Re.current?Re.all.filter(function(he){return he===Re.current}):[]}function Q(Re){try{var he=[];return Re&&Re.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(xe){var We=Re.filter(function(Bt){return xe[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===Bt.serviceLocation}),dt=null;if(We&&We.length>0&&(dt=We[0]),dt){var at=new URL(dt.url),Je=xe[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST];Je=rn.Z.stringHasProtocol(Je)?Je:"".concat(at.protocol,"//").concat(Je);var ht={synthesizedUrl:"".concat(Je).concat(at.pathname),serviceLocation:xe[v.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:xe[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:dt};he.push(ht)}}),he}catch(xe){return P.error(xe),[]}}function Me(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function be(){J&&clearTimeout(J),J=null}function ke(){B=null,ee={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},be()}return L={reset:function(){ke(),ge.off(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.off(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.off(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)},setConfig:function(Re){Re&&(Re.adapter&&(qe=Re.adapter),Re.errHandler&&(re=Re.errHandler),Re.dashMetrics&&(fe=Re.dashMetrics),Re.mediaPlayerModel&&(Se=Re.mediaPlayerModel),Re.requestModifier&&(ie=Re.requestModifier),Re.manifestModel&&(Ee=Re.manifestModel),Re.serviceDescriptionController&&(me=Re.serviceDescriptionController),Re.eventBus&&(ge=Re.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var Re=le();return!!Re&&Re.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:be,getSynthesizedBaseUrlElements:function(Re){try{return Q(Re).map(function(he){var xe=new Qn(he.synthesizedUrl,he.serviceLocation);return xe.queryParams=he.queryParams,xe.dvbPriority=he.reference.dvbPriority,xe.dvbWeight=he.reference.dvbWeight,xe.availabilityTimeOffset=he.reference.availabilityTimeOffset,xe.availabilityTimeComplete=he.reference.availabilityTimeComplete,xe})}catch(he){return P.error(he),[]}},getSynthesizedLocationElements:function(Re){try{return Q(Re).map(function(he){var xe=new Zn(he.synthesizedUrl,he.serviceLocation);return xe.queryParams=he.queryParams,xe})}catch(he){return P.error(he),[]}},initialize:function(){H=Ao(De).create({errHandler:re,dashMetrics:fe,mediaPlayerModel:Se,requestModifier:ie,errors:Ae}),ge.on(_.Z.FRAGMENT_LOADING_STARTED,ze,L),ge.on(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.on(_.Z.MANIFEST_LOADING_FINISHED,Le,L),ge.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,we,L)}},P=(0,N.Z)(De).getInstance().getLogger(L),ke(),L}_c.__dashjs_factory_name="ContentSteeringController";var Ia=U.Z.getSingletonFactory(_c);function bl(){var L,P,B,V=this.context,ee=(0,Ze.Z)(V).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(re){var fe=B.getCurrentSteeringResponseData();return fe&&fe.pathwayPriority&&fe.pathwayPriority.length>0?function(){for(var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,me=null,ge=function(){var qe=Se[ie],De=Ee.findIndex(function(Be){return Be.serviceLocation&&Be.serviceLocation===qe});if(De!==-1&&!P.contains(Ee[De].serviceLocation))return me=Ee[De],"break";ie+=1};ie<Se.length&&ge()!=="break";);return me}(fe.pathwayPriority,re):null}(J)),H||(H=function(re){return re[0]}(J)),H},setConfig:function(J){J.blacklistController&&(P=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){P.reset()}},P=vs(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Ia(V).getInstance(),L}bl.__dashjs_factory_name="LocationSelector";var sa=U.Z.getClassFactory(bl);function _s(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe=this.context,De=(0,m.Z)(qe).getInstance(),Be=(0,_t.Z)(qe).getInstance();function ze(){B=NaN,H=!1,ee=!0,J=!1,_e()}function _e(){V!==null&&(clearTimeout(V),V=null)}function Le(be){_e(),J||(isNaN(be)&&!isNaN(B)&&(be=1e3*B),isNaN(be)||(P.debug("Refresh manifest in "+be+" milliseconds."),V=setTimeout(le,be)))}function we(){var be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var ke=fe.getValue(),Re=ke.url,he=null,xe=Ee.getPatchLocation(ke),We=Se.select(xe),dt=null;if(We&&!be)Re=We.url,he=We.serviceLocation,dt=We.queryParams;else{var at=je(ke),Je=Se.select(at);Je&&(Re=Je.url,he=Je.serviceLocation,dt=Je.queryParams)}Be.isRelative(Re)&&(Re=Be.resolve(Re,ke.url)),re.load(Re,he,dt)}function je(be){var ke=Ee.getLocation(be),Re=me.getSynthesizedLocationElements(ke);return ke.concat(Re)}function Z(be){if(be){if(Ee.getIsPatch(be)){var ke=be;be=fe.getValue();var Re=Ee.isPatchValid(be,ke),he=Re;if(Re){var xe=Ee.getPublishTime(be);he=Ee.applyPatchToManifest(be,ke);var We=Ee.getPublishTime(be);he=xe.getTime()!=We.getTime()}if(!he)return P.debug("Patch provided is invalid, performing full manifest refresh"),void we(!0);be.loadedTime=new Date}}else(be=fe.getValue()).loadedTime=new Date;if(fe.getValue()&&fe.getValue().type===v.Z.DYNAMIC&&be.type===v.Z.STATIC)return De.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);fe.setValue(be);var dt=new Date,at=(dt.getTime()-be.loadedTime.getTime())/1e3;1e3*(B=Ee.getManifestUpdatePeriod(be,at))>2147483647&&(B=2147483647e-3),De.trigger(T.Z.MANIFEST_UPDATED,{manifest:be}),P.info("Manifest has been refreshed at "+dt+"["+dt.getTime()/1e3+"] "),ee||Le()}function le(){ee||(H?Le(ge.get().streaming.manifestUpdateRetryInterval):we())}function ae(be){be.error?be.error.code===Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(be.error):Z(be.manifest)}function se(){ee=!1,Le()}function Q(){(ee=!ge.get().streaming.scheduling.scheduleWhilePaused)&&_e()}function Me(){H=!1}return L={initialize:function(){ze(),De.on(T.Z.STREAMS_COMPOSED,Me,this),De.on(_.Z.PLAYBACK_STARTED,se,this),De.on(_.Z.PLAYBACK_PAUSED,Q,this),De.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(be){Z(be)},refreshManifest:we,getIsUpdating:function(){return H},setConfig:function(be){be&&(be.manifestModel&&(fe=be.manifestModel),be.adapter&&(Ee=be.adapter),be.manifestLoader&&(re=be.manifestLoader),be.errHandler&&(ie=be.errHandler),be.locationSelector&&(Se=be.locationSelector),be.settings&&(ge=be.settings),be.contentSteeringController&&(me=be.contentSteeringController))},reset:function(){De.off(_.Z.PLAYBACK_STARTED,se,this),De.off(_.Z.PLAYBACK_PAUSED,Q,this),De.off(T.Z.STREAMS_COMPOSED,Me,this),De.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),ze()}},P=(0,N.Z)(qe).getInstance().getLogger(L),Se=sa(qe).create(),L}_s.__dashjs_factory_name="ManifestUpdater";var Vr=U.Z.getClassFactory(_s);function Ka(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be=this.context,ze=(0,m.Z)(Be).getInstance(),_e=(0,_t.Z)(Be).getInstance();function Le(){re=[],fe=[],Se=null,Ee=null,me=null,ie=NaN,B=!1,V=!1,ge=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function we(){ee.get().streaming.utcSynchronization.enabled&&!B&&!V&&me&&me.value&&me.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(Ee&&(Date.now()-Ee)/1e3<30||(re=[],V=!0,je(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function je(Je){try{if(Je<=0)return void dt();var ht=Date.now();J[me.schemeIdUri](me.value,function(Bt){var Gt=Date.now(),kt=le(ht,Gt,Bt);re.push(kt),je(Je-1)},function(){dt()})}catch(Bt){dt()}}function Z(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ht=Je||0;if(!fe||fe.length===0||ht>=fe.length)ae();else{var Bt=fe[ht];if(Bt)if(J.hasOwnProperty(Bt.schemeIdUri)){var Gt=new Date().getTime();J[Bt.schemeIdUri](Bt.value,function(kt){var Ft=new Date().getTime(),An=le(Gt,Ft,kt);me=Bt,ae(An)},function(){Z(ht+1)})}else Z(ht+1);else ae()}}function le(Je,ht,Bt){return Bt-(ht-(ht-Je)/2)}function ae(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ht=isNaN(Je);ht&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?xe():We(ht,Je)}function se(Je){var ht=Date.parse(Je);return isNaN(ht)&&(ht=function(Bt){var Gt,kt,Ft=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Bt);return Gt=Date.UTC(parseInt(Ft[1],10),parseInt(Ft[2],10)-1,parseInt(Ft[3],10),parseInt(Ft[4],10),parseInt(Ft[5],10),Ft[6]&&(parseInt(Ft[6],10)||0),Ft[7]&&1e3*parseFloat(Ft[7])||0),Ft[9]&&Ft[10]&&(kt=60*parseInt(Ft[9],10)+parseInt(Ft[10],10),Gt+=(Ft[8]==="+"?-1:1)*kt*60*1e3),new Date(Gt).getTime()}(Je)),ht}function Q(Je){return Date.parse(Je)}function Me(Je){return Date.parse(Je)}function be(Je,ht,Bt){Bt()}function ke(Je,ht,Bt){var Gt=se(Je);isNaN(Gt)?Bt():ht(Gt)}function Re(Je,ht,Bt,Gt,kt){var Ft,An,nt=!1,mt=new XMLHttpRequest,Wt=kt?it.w.HEAD:it.w.GET,xt=ht.match(/\S+/g);if(ht=xt.shift(),Ft=function(){nt||(nt=!0,xt.length?Re(Je,xt.join(" "),Bt,Gt,kt):Gt())},An=function(){var Jt,Yt;mt.status===200&&(Jt=kt?mt.getResponseHeader("Date"):mt.response,Yt=Je(Jt),isNaN(Yt)||(Bt(Yt),nt=!0))},_e.isRelative(ht)){var en=De.resolve();en&&(ht=_e.resolve(ht,en.url))}mt.open(Wt,ht),mt.timeout=5e3,mt.onload=An,mt.onloadend=Ft,mt.send()}function he(Je,ht,Bt){Re(Me,Je,ht,Bt,!0)}function xe(){var Je=H.getLatestMPDRequestHeaderValueByID("Date"),ht=Je!==null?new Date(Je).getTime():Number.NaN;isNaN(ht)?We(!0):We(!1,ht-Date.now())}function We(Je,ht){if(isNaN(ie)||isNaN(ht)||Je||function(Gt){try{var kt,Ft=at(Gt),An=isNaN(ge)?30:ge,nt=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,mt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Wt=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ft?(kt=Math.min(An*nt,mt),P.debug("Increasing timeBetweenSyncAttempts to ".concat(kt))):(kt=Math.max(An/nt,Wt),P.debug("Decreasing timeBetweenSyncAttempts to ".concat(kt))),ge=kt}catch(xt){}}(ht),!Je&&!isNaN(ht)){Se=Date.now(),B=!1;var Bt=isNaN(ie);ie=ht,Bt&&we(),P.debug("Completed UTC sync. Setting client - server offset to ".concat(ht))}Je&&(me=null,B=!1,qe.error(new de.Z(Ae.TIME_SYNC_FAILED_ERROR_CODE,Ae.TIME_SYNC_FAILED_ERROR_MESSAGE))),ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ht}),ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function dt(){if(re&&re.length!==0){var Je=re.reduce(function(ht,Bt){return ht+Bt},0)/re.length;at(Je)?P.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(P.debug("Completed background UTC sync. Setting client - server offset to ".concat(Je)),ie=Je,ze.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,Ee=Date.now()}}function at(Je){try{if(isNaN(ie))return!0;var ht=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Je>=ie-ht&&Je<=ie+ht}catch(Bt){return!0}}return L={initialize:function(){Le(),J={"urn:mpeg:dash:utc:http-head:2014":he,"urn:mpeg:dash:utc:http-xsdate:2014":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2014":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":ke,"urn:mpeg:dash:utc:http-head:2012":he,"urn:mpeg:dash:utc:http-xsdate:2012":Re.bind(null,se),"urn:mpeg:dash:utc:http-iso:2012":Re.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":ke,"urn:mpeg:dash:utc:http-ntp:2014":be,"urn:mpeg:dash:utc:ntp:2014":be,"urn:mpeg:dash:utc:sntp:2014":be}},attemptSync:function(Je,ht){fe=Je,B||(function(Bt){try{if(!Bt||!ee.get().streaming.utcSynchronization.enabled)return!1;var Gt=isNaN(ge)?30:ge;return!(Se&&Gt&&!isNaN(Gt))||(Date.now()-Se)/1e3>=Gt}catch(kt){return!0}}(ht)?(B=!0,Z()):ze.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Je){Je&&(Je.dashMetrics&&(H=Je.dashMetrics),Je.baseURLController&&(De=Je.baseURLController),Je.errHandler&&(qe=Je.errHandler),Je.settings&&(ee=Je.settings))},reset:function(){Le(),ze.off(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L)}},P=(0,N.Z)(Be).getInstance().getLogger(L),ze.on(T.Z.ATTEMPT_BACKGROUND_SYNC,we,L),L}Ka.__dashjs_factory_name="TimeSyncController";var Va=U.Z.getSingletonFactory(Ka);Va.HTTP_TIMEOUT_MS=5e3,U.Z.updateSingletonFactory(Ka.__dashjs_factory_name,Va);var za=Va;function Nf(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(re){var fe=window.URL.createObjectURL(P);return re.setSource(fe),V==="managedMediaSource"&&(re.setDisableRemotePlayback(!0),P.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),P.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),fe},createMediaSource:function(){var re="WebKitMediaSource"in window,fe="MediaSource"in window;return"ManagedMediaSource"in window?(P=new ManagedMediaSource,V="managedMediaSource",ee.info("Created ManagedMediaSource")):fe?(P=new MediaSource,V="mediaSource",ee.info("Created MediaSource")):re&&(P=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),P},detachMediaSource:function(re){re.setSource(null)},setConfig:function(re){re&&re.settings&&(B=re.settings)},setDuration:function re(fe){P&&P.readyState==="open"&&(fe===null&&isNaN(fe)||P.duration!==fe&&(fe!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(fe=Math.pow(2,32)),function(Se){for(var Ee=Se.sourceBuffers,ie=0;ie<Ee.length;ie++)if(Ee[ie].updating)return!0;return!1}(P)?setTimeout(re.bind(null,fe),50):(ee.info("Set MediaSource duration:"+fe),P.duration=fe)))},setSeekable:function(re,fe){P&&typeof P.setLiveSeekableRange=="function"&&typeof P.clearLiveSeekableRange=="function"&&P.readyState==="open"&&re>=0&&re<fe&&(P.clearLiveSeekableRange(),P.setLiveSeekableRange(re,fe))},signalEndOfStream:function(re){if(re&&re.readyState==="open"){for(var fe=re.sourceBuffers,Se=0;Se<fe.length;Se++)if(fe[Se].updating||fe[Se].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),re.endOfStream()}}},ee=(0,N.Z)(J).getInstance().getLogger(L),L}Nf.__dashjs_factory_name="MediaSourceController";var bh=U.Z.getSingletonFactory(Nf);function bo(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie="urn:mpeg:dash:event:2012",me="discarded",ge="updated",qe="added",De=this.context,Be=(0,m.Z)(De).getInstance();function ze(){if(!H||!re)throw new Error("setConfig function has to be called previously")}function _e(){Ee=!1,B={},V={},ee=null,Se=!1,J=Date.now()/1e3}function Le(){try{if(!Se){Se=!0;var be=re.getTime(),ke=be-J;ke=J>0?Math.max(0,ke):0,we(V,ke,be),we(B,ke,be),je(V),je(B),J=be,Se=!1}}catch(Re){Se=!1,P.error(Re)}}function we(be,ke,Re){try{se(be,function(he){if(he!==void 0){var xe=isNaN(he.duration)?0:he.duration;he.calculatedPresentationTime<=Re&&he.calculatedPresentationTime+ke+xe>=Re?Me(he,_.Z.EVENT_MODE_ON_START):(Q(Re,xe+ke,he.calculatedPresentationTime)||function(We){try{var dt=We.eventStream.period.start+We.eventStream.period.duration;return We.calculatedPresentationTime>dt}catch(at){return P.error(at),!1}}(he))&&(P.debug("Removing event ".concat(he.id," from period ").concat(he.eventStream.period.id," as it is expired or invalid")),function(We,dt){try{var at=dt.eventStream.schemeIdUri,Je=dt.eventStream.period.id,ht=dt.eventStream.value,Bt=dt.id;We[Je][at]=We[Je][at].filter(function(Gt){return ht&&Gt.eventStream.value&&Gt.eventStream.value!==ht||Gt.id!==Bt}),We[Je][at].length===0&&delete We[Je][at]}catch(Gt){P.error(Gt)}}(be,he))}})}catch(he){P.error(he)}}function je(be){try{for(var ke in be)be.hasOwnProperty(ke)&&Object.keys(be[ke]).length===0&&delete be[ke]}catch(Re){P.error(Re)}}function Z(be,ke){var Re=arguments.length>2&&arguments[2]!==void 0&&arguments[2],he=be.eventStream.schemeIdUri,xe=be.eventStream.value,We=be.id,dt=me;ke[he]||(ke[he]=[]);var at=ke[he].findIndex(function(ht){return(!xe||ht.eventStream.value&&ht.eventStream.value===xe)&&ht.id===We});if(at===-1)ke[he].push(be),be.triggeredReceivedEvent=!1,be.triggeredStartEvent=!1,dt=qe;else if(Re){var Je=ke[he][at];be.triggeredReceivedEvent=Je.triggeredReceivedEvent,be.triggeredStartEvent=Je.triggeredStartEvent,ke[he][at]=be,dt=ge}return dt}function le(be){try{if(be.eventStream.value==1){var ke,Re=be.calculatedPresentationTime;ke=be.calculatedPresentationTime==4294967295?NaN:be.calculatedPresentationTime+be.duration,Be.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:be.id,validUntil:Re,newDuration:ke,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(he){P.error(he)}}function ae(be){try{var ke=re.getTime();se(be,function(Re){var he=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.duration)?Re.eventStream.period.duration:NaN,xe=Re.eventStream&&Re.eventStream.period&&!isNaN(Re.eventStream.period.start)?Re.eventStream.period.start:NaN;if(!isNaN(he)&&!isNaN(xe)){var We=Re.calculatedPresentationTime;Math.abs(We-ke)<300&&Me(Re,_.Z.EVENT_MODE_ON_START)}})}catch(Re){P.error(Re)}}function se(be,ke){try{if(be)for(var Re=Object.keys(be),he=0;he<Re.length;he++)for(var xe=be[Re[he]],We=Object.keys(xe),dt=0;dt<We.length;dt++)xe[We[dt]].forEach(function(at){at!==void 0&&ke(at)})}catch(at){P.error(at)}}function Q(be,ke,Re){try{return be-ke>Re}catch(he){return P.error(he),!1}}function Me(be,ke){try{var Re=re.getTime(),he=be.id;if(ke===_.Z.EVENT_MODE_ON_RECEIVE&&!be.triggeredReceivedEvent)return P.debug("Received event ".concat(he)),be.triggeredReceivedEvent=!0,void Be.trigger(be.eventStream.schemeIdUri,{event:be},{mode:ke});be.triggeredStartEvent||(be.eventStream.schemeIdUri===ie&&be.eventStream.value==1?be.duration===0&&be.presentationTimeDelta===0||(P.debug("Starting manifest refresh event ".concat(he," at ").concat(Re)),function(){try{ze(),H.refreshManifest()}catch(xe){P.error(xe)}}()):be.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&be.eventStream.value==1?(P.debug("Starting callback event ".concat(he," at ").concat(Re)),function(xe){try{(0,nn.Z)(De).create({}).load({method:"get",url:xe,request:{responseType:"arraybuffer"}})}catch(We){P.error(We)}}(be.messageData)):(P.debug("Starting event ".concat(he," from period ").concat(be.eventStream.period.id," at ").concat(Re)),Be.trigger(be.eventStream.schemeIdUri,{event:be},{mode:ke})),be.triggeredStartEvent=!0)}catch(xe){P.error(xe)}}return L={addInlineEvents:function(be,ke){try{if(ze(),B[ke]||(B[ke]={}),be)for(var Re=0;Re<be.length;Re++){var he=be[Re];if(!Q(re.getTime(),isNaN(he.duration)?0:he.duration,he.calculatedPresentationTime)){var xe=Z(he,B[ke],!0);xe===qe?(P.debug("Added inline event with id ".concat(he.id," from period ").concat(ke)),Me(he,_.Z.EVENT_MODE_ON_RECEIVE)):xe===ge&&P.debug("Updated inline event with id ".concat(he.id," from period ").concat(ke))}}}catch(We){throw We}},addInbandEvents:function(be,ke){try{ze(),V[ke]||(V[ke]={});for(var Re=0;Re<be.length;Re++){var he=be[Re];Q(re.getTime(),isNaN(he.duration)?0:he.duration,he.calculatedPresentationTime)||(Z(he,V[ke],!1)===qe?(he.eventStream.schemeIdUri===ie&&le(he),P.debug("Added inband event with id ".concat(he.id," from period ").concat(ke)),Me(he,_.Z.EVENT_MODE_ON_RECEIVE)):P.debug("Inband event with scheme_id_uri ".concat(he.eventStream.schemeIdUri,", value ").concat(he.eventStream.value,", period id ").concat(ke," and event id ").concat(he.id," was ignored because it has been added before.")))}Le()}catch(xe){throw xe}},getInbandEvents:function(){return V},getInlineEvents:function(){return B},start:function(){try{ze(),P.debug("Start Event Controller");var be=fe.get().streaming.eventControllerRefreshDelay;Ee||isNaN(be)||(Ee=!0,ee=setInterval(Le,be))}catch(ke){throw ke}},setConfig:function(be){try{if(!be)return;be.manifestUpdater&&(H=be.manifestUpdater),be.playbackController&&(re=be.playbackController),be.settings&&(fe=be.settings)}catch(ke){throw ke}},reset:function(){(function(){try{ee!==null&&Ee&&(clearInterval(ee),ee=null,Ee=!1,function(){try{ae(V),ae(B)}catch(be){P.error(be)}}())}catch(be){throw be}})(),_e()}},P=(0,N.Z)(De).getInstance().getLogger(L),_e(),L}bo.__dashjs_factory_name="EventController";var um=U.Z.getSingletonFactory(bo),Pi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Mf(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function du(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,se,Q,Me,be,ke,Re,he,xe,We,dt,at,Je,ht,Bt,Gt,kt,Ft,An,nt,mt,Wt,xt,en,Jt=this.context,Yt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&we&&we.hasOwnProperty("initialize")&&we.hasOwnProperty("reset")&&we.hasOwnProperty("getClientTimeOffset")&&H&&Le&&fe&&xe))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function xn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Dt=re.getStreamsInfo();if(!Z&&Dt.length===0)throw new Error("There are no periods in the MPD");Z&&Dt.length>0&&fe.updateManifestUpdateInfo({currentTime:xe.getTime(),buffered:he.getBufferRange(),presentationStartTime:Dt[0].start,clientTimeOffset:we.getClientTimeOffset()}),je.length>0&&function(Ir){Ir.length!==0?je=je.filter(function(fr){var ri=Ir.filter(function(Qr){return Qr.id===fr.getId()}).length>0||fr.getId()===Z.getId();return ri||(P.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ri}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Dt);for(var yn=[],Hn=0,ur=Dt.length;Hn<ur;Hn++){var Tr=Dt[Hn];yn.push(It(Tr)),fe.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){Z?Ir():$t(Dt,Ir,fr)})}).then(function(){Yt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){Le.error(new de.Z(Ae.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),ke=!0,Ja()}})()}function ir(){mt=!0}function It(Dt){var yn=Bc(Dt.id);return yn?yn.updateData(Dt):(yn=ys(Jt).create({manifestModel:H,mediaPlayerModel:dt,dashMetrics:fe,manifestUpdater:ee,adapter:re,timelineConverter:we,capabilities:B,capabilitiesFilter:V,errHandler:Le,baseURLController:me,segmentBaseController:ge,textController:ae,abrController:De,playbackController:xe,eventController:ze,mediaController:Be,protectionController:le,videoModel:he,streamInfo:Dt,settings:nt}),je.push(yn),yn.initialize(),Promise.resolve())}function $t(Dt,yn,Hn){try{On();var ur=fe.getCurrentDVRInfo().range;if(ur.end<ur.start){Wt&&clearTimeout(Wt);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return P.debug("Waiting for ".concat(Tr," ms before playback can start")),Yt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void(Wt=setTimeout(function(){$t(Dt,yn,Hn)},Tr))}nt.get().streaming.applyProducerReferenceTime&&We.calculateProducerReferenceTimeOffsets(Dt);var Ir=Dt[0].manifestInfo;if(nt.get().streaming.applyServiceDescription&&We.applyServiceDescription(Ir),re.getIsDynamic()){var fr=Ju(Dt,Ir);xe.computeAndSetLiveDelay(fr,Ir)}(nt.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ri=H.getValue();ri&&me.update(ri),Zt(),yn()}).catch(function(ri){P.error(ri),Zt(),yn()})}catch(ri){Hn(ri)}}function Zt(){var Dt=function(){var ur;if(re.getIsDynamic()){var Tr=fe.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-xe.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(xt)&&xt.toString().indexOf("posix:")===-1){var fr=io(!0);isNaN(fr)||(P.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{P.info("Start time provided by the app: ".concat(xt));var ri=Zi(!0,xt);isNaN(ri)||(ur=Math.min(ur,ri))}var Qr=nt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Qr)}}else if(ur=Gs()[0].getStreamInfo().start,isNaN(xt)){var qs=io(!1);isNaN(qs)||(P.info("Start time from URI parameters: ".concat(qs)),ur=Math.max(ur,qs))}else{P.info("Start time provided by the app: ".concat(xt));var Hs=Zi(!1,xt);isNaN(Hs)||(ur=Math.max(ur,Hs))}return ur}(),yn=Lt(Dt),Hn=yn!==null?yn:je[0];Yt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Dt}),un(Hn,null,Dt),Gt||(Gt=setInterval(function(){!Me&&xe.getTimeToStreamEnd()<=0&&!xe.isSeeking()&&Yt.trigger(T.Z.PLAYBACK_ENDED,{isLast:fa().isLast})},200))}function un(Dt,yn,Hn){try{if(Me||!Dt||yn===Dt&&Dt.getIsActive())return;Me=!0,Yt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Dt.getStreamInfo()});var ur=!1;Z=Dt,yn&&(ur=Sn(Dt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Dt.getStreamInfo().start:NaN:Hn,P.info("Switch to stream ".concat(Dt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(xe.getTime(),". Seamless period switch is set to ").concat(ur)),Ft=Ft.filter(function(Tr){return Tr.getId()!==Z.getId()}),xe.initialize(fa(),!!yn),he.getElement()?vn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Me=!1}}function vn(Dt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(Re&&Re.readyState==="open"){P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),Re.removeEventListener("sourceopen",Tr),Re.removeEventListener("webkitsourceopen",Tr),zr();var fr=fe.getCurrentDVRInfo();Se.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Dt)||xe.seek(Dt,!0,!0),Z.setMediaSource(Re).then(function(){Z.initializeForTextWithMediaSource(Re)})):Pn(Dt,yn)}}function Ir(){Re.addEventListener("sourceopen",Tr,!1),Re.addEventListener("webkitsourceopen",Tr,!1),Hn=Se.attachMediaSource(he),P.debug("MediaSource attached to element.  Waiting on open...")}Re?yn?Pn(Dt,yn):(Se.detachMediaSource(he),Ir()):(Re=Se.createMediaSource(),Ir())}function Pn(Dt,yn){Z.activate(Re,yn?kt:void 0,Dt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),kt=Hn}isNaN(Dt)||(Yt.trigger(T.Z.SEEK_TARGET,{time:Dt},{streamId:Z.getId()}),xe.seek(Dt,!1,!0),Z.startScheduleControllers()),Me=!1,Yt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:fa()})})}function Nn(Dt){var yn=Lt(Dt.seekTime);yn&&yn!==Z?yn&&yn!==Z&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=Z.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,Z,Tr)}).catch(function(fr){Le.error(fr)})}(Dt,yn)):(Fn(),function(Hn){Z.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Po(et.USER_REQUEST_STOP_REASON)}(Dt)),_u(rt.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ft&&Ft.length>0&&(Ft.forEach(function(Dt){Dt.deactivate(!0)}),Ft=[])}function bt(Dt){if(Dt.newMediaInfo.streamInfo.id===Z.getId()){if(Gn(),nt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Dt.oldMediaInfo&&Dt.oldMediaInfo.codec!==Dt.newMediaInfo.codec){var yn=xe.getTime();return Z.deactivate(!1),void vn(yn,!1,!1)}Z.prepareTrackChange(Dt)}}function Sn(Dt,yn){try{return nt.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Dt)||mt)&&(An&&nt.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Dt,yn))}catch(Hn){return!1}}function En(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Re&&!Dt.getPreloaded()){var Hn=Sn(Dt,yn);Hn&&Dt.startPreloading(Re,kt).then(function(){Ft.push(Dt)})}}function Lt(Dt){if(isNaN(Dt))return null;for(var yn=je.length,Hn=0;Hn<yn;Hn++){var ur=je[Hn];if(Dt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Dt=re.getIsDynamic(),yn=re.getStreamsInfo()[0].manifestInfo,Hn=xe.getTime(),ur=we.calcTimeShiftBufferWindow(je,Dt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){fe.addDVRInfo(Ir.getType(),Hn,yn,ur)}):fe.addDVRInfo(y.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function ut(Dt){if(ht&&Q){var yn=dt.getInitialBufferLevel(),Hn=[y.Z.TEXT];(isNaN(yn)||yn<=xe.getBufferLevel(Hn)||re.getIsDynamic()&&yn>xe.getLiveDelay())&&(ht=!1,_u(rt.INITIAL_PLAYOUT_START_REASON),xe.play())}Dt&&Dt.mediaType&&fe.addBufferLevel(Dt.mediaType,new Date,1e3*Dt.bufferLevel)}function tt(Dt){Dt.streamInfo.id===Z.getId()&&Dt.reason&&Dt.reason.forceReplace&&Gn(),Bc(Dt.streamInfo.id).prepareQualityChange(Dt)}function qt(){if(re.getIsDynamic()&&xe.getOriginalLiveDelay()!==0&&Z){var Dt=re.getStreamsInfo();if(Dt.length>0){var yn=Dt[0].manifestInfo,Hn=Ju(Dt,yn);xe.computeAndSetLiveDelay(Hn,yn)}}}function Ve(){if(Qa()){var Dt=he.getPlaybackQuality();Dt&&fe.addDroppedFrames(Dt)}}function Ke(){P.debug("[onPlaybackStarted]"),!ht&&Je&&_u(rt.RESUME_FROM_PAUSE_START_REASON),ht&&(ht=!1),Bt&&(Bt=!1,nt.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),Je=!1}function Mt(Dt){P.debug("[onPlaybackPaused]"),Dt.ended||(Je=!0,Po(et.USER_REQUEST_STOP_REASON))}function fn(Dt){P.debug("Stream with id ".concat(Dt.streamInfo.id," finished buffering"));var yn=Dt.streamInfo.isLast;Re&&yn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Se.signalEndOfStream(Re)):Tn()}function Tn(){if(Z&&Z.getHasFinishedBuffering())for(var Dt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||Z||null;if(Ir){var fr=Ir.getStreamInfo();return je.filter(function(ri){var Qr=ri.getStreamInfo();return Qr.start>fr.start&&fr.id!==Qr.id})}}catch(ri){return[]}}(Z),yn=0;yn<Dt.length;){var Hn=Dt[yn],ur=yn===0?Z:Dt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&Re&&En(Hn,ur),yn+=1}}function sr(){Gt&&(clearInterval(Gt),Gt=null)}function Zr(){return Z?Z.getProcessors():[]}function Ai(Dt){if(Z&&!Z.getIsEndedEventSignaled()){Z.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||Z||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ri=-1,Qr=NaN;fr<je.length;){var qs=je[fr].getStreamInfo(),Hs=qs.start-Ir;Hs>0&&(isNaN(Qr)||Hs<Qr)&&Tr.id!==qs.id&&(Qr=Hs,ri=fr),fr+=1}return ri>=0?je[ri]:null}();yn?(P.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(Z.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,Z,NaN)):(P.debug("StreamController no next stream found"),Z.setIsEndedEventSignaled(!1)),Po(yn?et.END_OF_PERIOD_STOP_REASON:et.END_OF_CONTENT_STOP_REASON)}Dt&&Dt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Dt){var yn=Dt||fa().manifestInfo.duration;Se.setDuration(yn)}function io(Dt){var yn=qe.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Gs()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],js(Dt,yn.t,Hn)}function Zi(Dt,yn){var Hn=0;return Dt||(Hn=Gs()[0].getStreamInfo().start),js(Dt,yn,Hn)}function js(Dt,yn,Hn){var ur=re.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Dt&&!isNaN(Ir)?we.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function Ju(Dt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Dt&&Dt.length===1){var ur=Dt[0],Tr=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT].reduce(function(fr,ri){var Qr=re.getMediaInfoForType(ur,ri);return Qr&&Qr.isFragmented!==!1&&fr.push(Qr),fr},[]).reduce(function(fr,ri){var Qr=re.getVoRepresentations(ri);return Qr&&Qr.length>0&&Qr.forEach(function(qs){qs&&fr.push(qs)}),fr},[]).reduce(function(fr,ri){var Qr=re.convertRepresentationToRepresentationInfo(ri);return Qr&&Qr.fragmentDuration&&!isNaN(Qr.fragmentDuration)&&fr.push(Qr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return Mf(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ri){if(fr){if(typeof fr=="string")return Mf(fr,ri);var Qr=Object.prototype.toString.call(fr).slice(8,-1);return Qr==="Object"&&fr.constructor&&(Qr=fr.constructor.name),Qr==="Map"||Qr==="Set"?Array.from(fr):Qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qr)?Mf(fr,ri):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function el(Dt){if(Dt.error)ke=!0,Ja();else{P.info("Manifest updated... updating data system wide.");var yn=Dt.manifest;re.updatePeriods(yn);var Hn=re.getUTCTimingSources();!re.getIsDynamic()||Hn&&Hn.length!==0||Yt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=re.getIsDynamic()?Hn.concat(at.getUTCTimingSources()):Hn;V.filterUnsupportedFeatures(yn).then(function(){me.initialize(yn),Ee.attemptSync(ur,re.getIsDynamic())})}}function Qa(){return!!Z&&Z.getHasVideoTrack()}function Zs(){return!!Z&&Z.getHasAudioTrack()}function Po(Dt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Dt)}),fe.addPlayList()}function _u(Dt){fe.createPlaylistMetrics(1e3*xe.getTime(),Dt)}function Tu(Dt){if(Dt.error){var yn="";switch(Dt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&nt.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){P.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=xe.getTime();Z.deactivate(!1),P.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),vn(Hn,!1,!1)}():(be=!0,Dt.error.message&&(yn+=" ("+Dt.error.message+")"),Dt.error.msExtendedCode&&(yn+=" (0x"+(Dt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+yn),Dt.error&&P.fatal(Dt.error),Le.error(new de.Z(Dt.error.code,yn)),Ja())}}function fa(){return Z?Z.getStreamInfo():null}function Bc(Dt){for(var yn=0,Hn=je.length;yn<Hn;yn++)if(je[yn].getId()===Dt)return je[yn];return null}function Qf(Dt){isNaN(Dt.newDuration)||zr(Dt.newDuration)}function tl(){je=[],xt=NaN,le=null,Me=!1,Z=null,be=!1,ke=!1,ht=!0,Bt=!0,Je=!1,Q=!0,Gt=null,mt=!1,An=!1,Ft=[],Wt=null,en={counts:{mediaErrorDecode:0}}}function Ja(){Dn(),Ee.reset(),Po(be||ke?et.FAILURE_STOP_REASON:et.USER_REQUEST_STOP_REASON);for(var Dt=0,yn=je?je.length:0;Dt<yn;Dt++)je[Dt].reset(be);Yt.off(_.Z.PLAYBACK_TIME_UPDATED,Ve,L),Yt.off(_.Z.PLAYBACK_SEEKING,Nn,L),Yt.off(_.Z.PLAYBACK_ERROR,Tu,L),Yt.off(_.Z.PLAYBACK_STARTED,Ke,L),Yt.off(_.Z.PLAYBACK_PAUSED,Mt,L),Yt.off(_.Z.PLAYBACK_ENDED,Ai,L),Yt.off(_.Z.METRIC_ADDED,jc,L),Yt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,L),Yt.off(_.Z.BUFFER_LEVEL_UPDATED,ut,L),Yt.off(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.off(T.Z.MANIFEST_UPDATED,el,L),Yt.off(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.off(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L),me.reset(),ee.reset(),ze.reset(),fe.clearAllCurrentMetrics(),H.setValue(null),J.reset(),we.reset(),_e.reset(),Re&&(Se.detachMediaSource(he),Re=null),he=null,le&&(le=null,se=null,H.getValue()&&Yt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Yt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),tl()}function jc(Dt){if(Dt.metric===D.Z.DVR_INFO){var yn=Zs()?y.Z.AUDIO:y.Z.VIDEO;Dt.mediaType===yn&&Se.setSeekable(Dt.value.range.start,Dt.value.range.end)}}function Gs(){return je}return L={initialize:function(Dt,yn){Dn(),Q=Dt,se=yn,we.initialize(),(ee=Vr(Jt).create()).setConfig({manifestModel:H,adapter:re,manifestLoader:J,errHandler:Le,settings:nt,contentSteeringController:ie}),ee.initialize(),(ze=um(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:xe,settings:nt}),ze.start(),Ee.setConfig({dashMetrics:fe,baseURLController:me,errHandler:Le,settings:nt}),Ee.initialize(),Se.setConfig({settings:nt}),le&&(Yt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(he.getElement()),se&&le.setProtectionData(se)),Yt.on(_.Z.PLAYBACK_TIME_UPDATED,Ve,L),Yt.on(_.Z.PLAYBACK_SEEKING,Nn,L),Yt.on(_.Z.PLAYBACK_ERROR,Tu,L),Yt.on(_.Z.PLAYBACK_STARTED,Ke,L),Yt.on(_.Z.PLAYBACK_PAUSED,Mt,L),Yt.on(_.Z.PLAYBACK_ENDED,Ai,L),Yt.on(_.Z.METRIC_ADDED,jc,L),Yt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Qf,L),Yt.on(_.Z.BUFFER_LEVEL_UPDATED,ut,L),Yt.on(_.Z.QUALITY_CHANGE_REQUESTED,tt,L),T.Z.KEY_SESSION_UPDATED&&Yt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Yt.on(T.Z.MANIFEST_UPDATED,el,L),Yt.on(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Yt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Yt.on(T.Z.CURRENT_TRACK_CHANGED,bt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,qt,L),Yt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,qt,L)},getActiveStreamInfo:fa,addDVRMetric:On,hasVideoTrack:Qa,hasAudioTrack:Zs,getStreamById:Bc,getStreamForTime:Lt,getTimeRelativeToStreamId:function(Dt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<je.length;fr++){if(Tr=(Hn=je[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Dt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),xt=yn,J.load(Dt)},loadWithManifest:function(Dt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;xn(),xt=yn,ee.setManifest(Dt)},getActiveStreamProcessors:Zr,setConfig:function(Dt){Dt&&(Dt.capabilities&&(B=Dt.capabilities),Dt.capabilitiesFilter&&(V=Dt.capabilitiesFilter),Dt.manifestLoader&&(J=Dt.manifestLoader),Dt.manifestModel&&(H=Dt.manifestModel),Dt.mediaPlayerModel&&(dt=Dt.mediaPlayerModel),Dt.customParametersModel&&(at=Dt.customParametersModel),Dt.protectionController&&(le=Dt.protectionController),Dt.adapter&&(re=Dt.adapter),Dt.dashMetrics&&(fe=Dt.dashMetrics),Dt.errHandler&&(Le=Dt.errHandler),Dt.timelineConverter&&(we=Dt.timelineConverter),Dt.videoModel&&(he=Dt.videoModel),Dt.playbackController&&(xe=Dt.playbackController),Dt.serviceDescriptionController&&(We=Dt.serviceDescriptionController),Dt.contentSteeringController&&(ie=Dt.contentSteeringController),Dt.textController&&(ae=Dt.textController),Dt.abrController&&(De=Dt.abrController),Dt.mediaController&&(Be=Dt.mediaController),Dt.settings&&(nt=Dt.settings),Dt.baseURLController&&(me=Dt.baseURLController),Dt.uriFragmentModel&&(qe=Dt.uriFragmentModel),Dt.segmentBaseController&&(ge=Dt.segmentBaseController),Dt.manifestUpdater&&(ee=Dt.manifestUpdater))},setProtectionData:function(Dt){se=Dt,le&&le.setProtectionData(se)},getIsStreamSwitchInProgress:function(){return Me},switchToVideoElement:function(Dt){Z&&(xe.initialize(fa()),vn(Dt,!1,!0))},getHasMediaOrInitialisationError:function(){return be||ke},getStreams:Gs,getActiveStream:function(){return Z},getInitialPlayback:function(){return ht},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:Ja},P=(0,N.Z)(Jt).getInstance().getLogger(L),Ee=za(Jt).getInstance(),Se=bh(Jt).getInstance(),_e=Qe(Jt).getInstance(),tl(),L}du.__dashjs_factory_name="StreamController";var Ho=U.Z.getSingletonFactory(du);function hu(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me=this.context,ge=(0,m.Z)(me).getInstance();function qe(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){ge.off(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.off(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.off(T.Z.PLAYBACK_SEEKING,De,this),ge.off(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.off(T.Z.TRACK_CHANGE_RENDERED,ze,L)}(),ee=null,J=NaN,V=0,Se=null,Ee={}}function De(){Se&&(clearTimeout(Se),Se=null)}function Be(se){try{if(se.streamId!==re.getActiveStreamInfo().id||se.mediaType!==y.Z.VIDEO&&se.mediaType!==y.Z.AUDIO)return;se.streamId===re.getActiveStreamInfo().id&&(Ee[se.mediaType]=!0)}catch(Q){ie.error(Q)}}function ze(se){se&&se.mediaType&&(Ee[se.mediaType]=!1)}function _e(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){we()&&ae(H.getTime())},100))}catch(se){}}()}function Le(){if(we(B.get().streaming.gaps.enableSeekFix)&&++V>=10){var se=H.getTime();P===se?ae(se,!0):(P=se,J=NaN),V=0}}function we(){var se=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!re.getActiveStream())return!1;var Q=Object.keys(Ee).some(function(be){return Ee[be]}),Me=!!se&&je();return!Q&&B.get().streaming.gaps.jumpGaps&&re.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Me)&&!H.isPaused()&&!re.getIsStreamSwitchInProgress()&&!re.getHasMediaOrInitialisationError()}function je(){var se=re.getActiveStream(),Q=parseFloat((se.getStartTime()+se.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function Z(se,Q){try{if(!se||se.length<=1&&Q>0)return NaN;for(var Me=NaN,be=0;isNaN(Me)&&be<se.length;){var ke=be>0?se.end(be-1):0;Q<se.start(be)&&ke-Q<B.get().streaming.gaps.threshold&&(Me=be),be+=1}return Me}catch(Re){return null}}function le(se,Q){for(var Me=0,be=se.length;Me<be;Me++)if(Q>=se.start(Me)&&Q<=se.end(Me))return!0;return!1}function ae(se){var Q,Me=arguments.length>1&&arguments[1]!==void 0&&arguments[1],be=B.get().streaming.gaps.enableStallFix,ke=B.get().streaming.gaps.stallSeek,Re=B.get().streaming.gaps.smallGapLimit,he=B.get().streaming.gaps.jumpLargeGaps,xe=fe.getBufferRange(),We=NaN,dt=!1;if(Q=Z(xe,se),!isNaN(Q)){var at=xe.start(Q),Je=at-se;Je>0&&(Je<=Re||he)&&(We=at)}var ht=H.getTimeToStreamEnd();if(isNaN(We)&&Me&&isFinite(ht)&&!isNaN(ht)&&ht<Re&&(We=parseFloat(H.getStreamEndTime().toFixed(5)),dt=!0),be&&isNaN(We)&&Me&&isNaN(Q)&&le(xe,se)&&(ke===0?(ie.warn("Toggle play pause to break stall"),fe.pause(),fe.play()):(ie.warn("Jumping ".concat(ke,"s to break stall")),We=se+ke)),We>0&&J!==We&&We>se&&!Se){var Bt=We-se;if(dt){var Gt=re.getStreamForTime(We),kt=Gt&&!!Gt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(se," to ").concat(We,". Gap duration: ").concat(Bt)),H.seek(We,!0,kt)}else{var Ft=H.getIsDynamic(),An=Q>0?xe.end(Q-1):se,nt=Ft?1e3*Math.max(0,Bt-.1):0;Se=window.setTimeout(function(){H.seek(We,!0,!0),ie.warn("Jumping gap occuring in period ".concat(re.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(We,". Jumping by: ").concat(We-An)),Se=null},nt)}J=We}}return L={reset:qe,setConfig:function(se){se&&(se.settings&&(B=se.settings),se.playbackController&&(H=se.playbackController),se.streamController&&(re=se.streamController),se.videoModel&&(fe=se.videoModel))},initialize:function(){(function(){ge.on(T.Z.WALLCLOCK_TIME_UPDATED,Le,this),ge.on(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.on(T.Z.PLAYBACK_SEEKING,De,this),ge.on(T.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ge.on(T.Z.TRACK_CHANGE_RENDERED,ze,L)})()}},ie=(0,N.Z)(me).getInstance().getLogger(L),qe(),L}hu.__dashjs_factory_name="GapController";var Os=U.Z.getSingletonFactory(hu);function li(){var L,P,B,V,ee,J,H,re,fe,Se,Ee=this.context,ie=(0,m.Z)(Ee).getInstance();function me(){P=!1;var je=rn.Z.parseUserAgent();B=je&&je.browser&&je.browser.name&&je.browser.name.toLowerCase()==="safari"}function ge(){P=!1}function qe(je){if(je.streamId===J.getActiveStreamInfo().id&&fe){var Z=H.getLiveDelay();H.getBufferLevel()>Z/2&&(fe=!1)}}function De(je){je.streamId===J.getActiveStreamInfo().id&&(fe=je.state===D.Z.BUFFER_EMPTY)}function Be(){re.getCatchupModeEnabled()||V.setPlaybackRate(1)}function ze(){H.getIsDynamic()&&re.getCatchupModeEnabled()&&(re.getCatchupPlaybackRates().max>0||re.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||P)&&(Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(je,Z){try{return Math.abs(_e())>0||je<Z}catch(le){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(_e())>0}catch(je){return!1}}())}catch(je){return!1}}()&&function(){if(!P&&V){var je,Z=V.getPlaybackRate(),le=re.getCatchupPlaybackRates(),ae=H.getBufferLevel(),se=_e(),Q=re.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&se>Q)Se.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,H.seekToCurrentLive(!0,!1);else{var Me=H.getCurrentLiveLatency(),be=H.getLiveDelay();je=Le()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Re,he,xe,We,dt){var at;if(dt<We){var Je=Math.abs(Re.min),ht=5*(dt-We);at=1-Je+2*Je/(1+Math.pow(Math.E,-ht)),Se.debug("[LoL+ playback control_buffer-based] bufferLevel: "+dt+", newRate: "+at)}else{if(Math.abs(he-xe)<=.02*xe)at=1;else{var Bt=he-xe,Gt=Bt<0?Math.abs(Re.min):Re.max,kt=5*Bt;at=1-Gt+2*Gt/(1+Math.pow(Math.E,-kt))}Se.debug("[LoL+ playback control_latency-based] latency: "+he+", newRate: "+at)}return at}(le,Me,be,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(Re,he,xe,We){if(fe)return 1;var dt=he-xe,at=dt<0?Math.abs(Re.min):Re.max,Je=5*dt,ht=1-at+2*at/(1+Math.pow(Math.E,-Je));return H.getPlaybackStalled()&&We<=xe/2&&dt>0&&(ht=1),ht}(le,Me,be,ae);var ke=B?.25:.02/(.5/le.max);je&&Math.abs(Z-je)>=ke&&(Se.debug("[CatchupController]: Setting playback rate to ".concat(je)),V.setPlaybackRate(je))}}}()}function _e(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function Le(){var je=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==y.Z.LIVE_CATCHUP_MODE_LOLP||je===null||isNaN(je)?y.Z.LIVE_CATCHUP_MODE_DEFAULT:y.Z.LIVE_CATCHUP_MODE_LOLP}function we(){re.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.off(_.Z.PLAYBACK_PROGRESS,ze,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.off(_.Z.PLAYBACK_SEEKED,ge,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.off(_.Z.STREAM_INITIALIZED,we,L),me(),V.setPlaybackRate(1,!0)},setConfig:function(je){je&&(je.settings&&(ee=je.settings),je.videoModel&&(V=je.videoModel),je.streamController&&(J=je.streamController),je.playbackController&&(H=je.playbackController),je.mediaPlayerModel&&(re=je.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,qe,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,De,L),ie.on(_.Z.PLAYBACK_PROGRESS,ze,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,ze,L),ie.on(_.Z.PLAYBACK_SEEKED,ge,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,L),ie.on(_.Z.STREAM_INITIALIZED,we,L),we()}},Se=(0,N.Z)(Ee).getInstance().getLogger(L),me(),L}li.__dashjs_factory_name="CatchupController";var co=U.Z.getSingletonFactory(li),Fu=[y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Ch="video",Uu="audio";function Co(){var L,P,B,V,ee,J=this.context;function H(){P={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function re(fe,Se,Ee){try{P[fe][Se]=Ee/1e3}catch(ie){V.error(ie)}}return L={getServiceDescriptionSettings:function(){return P},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(fe){try{var Se=[];if(fe&&fe.length>0){var Ee=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;fe.forEach(function(me){var ge=Ee.reduce(function(qe,De){return qe.concat(ee.getAllMediaInfoForType(me,De))},[]).reduce(function(qe,De){return ee.getProducerReferenceTimes(me,De).forEach(function(Be){var ze=ee.getVoRepresentations(De);if(ze&&ze.length>0&&ze[0].adaptation&&ze[0].segmentInfoType===v.Z.SEGMENT_TEMPLATE){var _e=ze[0],Le=new Date(Be[v.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Be[v.Z.PRESENTATION_TIME]/_e[v.Z.TIMESCALE]-_e[v.Z.PRESENTATION_TIME_OFFSET]+me.start),we=ie-Le;qe.push({id:Be[v.Z.ID],to:we})}}),qe},[]);Se=Se.concat(ge)})}B=Se}catch(me){V.error(me),B=[]}},applyServiceDescription:function(fe){if(fe&&fe.serviceDescriptions){var Se=fe.serviceDescriptions.filter(function(me){return Fu.includes(me.schemeIdUri)}),Ee=fe.serviceDescriptions.filter(function(me){return me.schemeIdUri==null}),ie=Se.length>0?Se[Se.length-1]:Ee[Ee.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(me){var ge;if(me.schemeIdUri,y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ge=function(ze){return{liveDelay:ze.latency.target/1e3,maxDrift:!isNaN(ze.latency.max)&&ze.latency.max>ze.latency.target?(ze.latency.max-ze.latency.target+500)/1e3:NaN,referenceId:ze.latency.referenceId||NaN}}(me),B.length>0){var qe=function(ze){var _e,Le=0,we=B.filter(function(je){return je.id===ze.referenceId});return we.length===0?(Le=B.length>0?B[0].to:0,_e=B[0].id||NaN):(Le=we[0].to||0,_e=we[0].id||NaN),{to:Le,id:_e}}(ge),De=qe.to,Be=qe.id;P.liveDelay=ge.liveDelay-De,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(De," from ProducerReferenceTime element with id ").concat(Be,".\n                Live Delay: ").concat(ge.liveDelay-De,", Live catchup max drift: ").concat(ge.maxDrift,"\n            "))}else P.liveDelay=ge.liveDelay,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ge.liveDelay,", Live catchup max drift: ").concat(ge.maxDrift))}(ie),ie.playbackRate&&function(me){var ge=me.playbackRate.min?Math.round(1e3*(me.playbackRate.min-1))/1e3:NaN,qe=me.playbackRate.max?Math.round(1e3*(me.playbackRate.max-1))/1e3:NaN;P.liveCatchup.playbackRate.min=ge,P.liveCatchup.playbackRate.max=qe,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ge)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(qe))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(me){if(me&&me.operatingBandwidth&&me.operatingBandwidth.mediaType&&me.operatingBandwidth.mediaType!=="all"){var ge={};ge.minBandwidth=me.operatingBandwidth.min,ge.maxBandwidth=me.operatingBandwidth.max,ge.targetBandwidth=me.operatingBandwidth.target;var qe=[];me.operatingBandwidth.mediaType===Ch||me.operatingBandwidth.mediaType===Uu?qe.push(me.operatingBandwidth.mediaType):me.operatingBandwidth.mediaType==="any"&&(qe.push(Uu),qe.push(Ch)),qe.forEach(function(De){isNaN(ge.minBandwidth)||re("minBitrate",De,ge.minBandwidth),isNaN(ge.maxBandwidth)||re("maxBitrate",De,ge.maxBandwidth),isNaN(ge.targetBandwidth)||re("initialBitrate",De,ge.targetBandwidth)})}}(ie),ie.contentSteering&&function(me){P.contentSteering=me.contentSteering}(ie))}},reset:function(){H()},setConfig:function(fe){fe&&fe.adapter&&(ee=fe.adapter)}},V=(0,N.Z)(J).getInstance().getLogger(L),H(),L}Co.__dashjs_factory_name="ServiceDescriptionController";var Rh=U.Z.getSingletonFactory(Co),vr=S(3973),yi=S.n(vr),xh=S(3039);function Tc(){var L,P,B,V,ee,J,H,re,fe=this.context,Se=(0,m.Z)(fe).getInstance();function Ee(he,xe){return he&&B[xe]&&B[xe][he]?B[xe][he].list:[]}function ie(he,xe){return he&&B[xe]&&B[xe][he]?B[xe][he].current:null}function me(he){var xe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(he&&he.streamInfo){var We=he.type,dt=he.streamInfo,at=dt.id,Je=ie(We,at);if(B[at]&&B[at][We]&&(B[at][We].current=he,B[at][We].current&&(We!==y.Z.TEXT&&!De(he,Je)||We===y.Z.TEXT&&he.isFragmented)&&Se.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Je,newMediaInfo:he,switchMode:V.get().streaming.trackSwitchMode[We]},{streamId:at}),!xe)){var ht=ze(he);if(!ht||!B[at][We].storeLastSettings)return;ht.roles&&(ht.role=ht.roles[0],delete ht.roles),ht.accessibility&&(ht.accessibility=ht.accessibility[0]),ht.audioChannelConfiguration&&(ht.audioChannelConfiguration=ht.audioChannelConfiguration[0]),J[We]=ht,re.setSavedMediaSettings(We,ht)}}}function ge(he,xe){he&&xe&&(ee[he]=xe)}function qe(he){return he?ee[he]:null}function De(he,xe){if(!he&&!xe)return!0;if(!he||!xe)return!1;var We=he.id===xe.id,dt=he.viewpoint===xe.viewpoint,at=JSON.stringify(he.viewpointsWithSchemeIdUri)===JSON.stringify(xe.viewpointsWithSchemeIdUri),Je=he.lang===xe.lang,ht=he.codec===xe.codec,Bt=he.roles.toString()===xe.roles.toString(),Gt=JSON.stringify(he.rolesWithSchemeIdUri)===JSON.stringify(xe.rolesWithSchemeIdUri),kt=he.accessibility.toString()===xe.accessibility.toString(),Ft=JSON.stringify(he.accessibilitiesWithSchemeIdUri)===JSON.stringify(xe.accessibilitiesWithSchemeIdUri),An=he.audioChannelConfiguration.toString()===xe.audioChannelConfiguration.toString(),nt=JSON.stringify(he.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(xe.audioChannelConfigurationsWithSchemeIdUri);return We&&ht&&dt&&at&&Je&&Bt&&Gt&&kt&&Ft&&An&&nt}function Be(){B={},J={},ee={audio:null,video:null,text:null}}function ze(he){var xe={lang:he.lang,viewpoint:he.viewpoint,roles:he.roles,accessibility:he.accessibility,audioChannelConfiguration:he.audioChannelConfiguration,codec:he.codec};return xe.lang||xe.viewpoint||xe.role&&xe.role.length>0||xe.accessibility&&xe.accessibility.length>0||xe.audioChannelConfiguration&&xe.audioChannelConfiguration.length>0?xe:null}function _e(he,xe,We){var dt=[];return he.forEach(function(at){xe(We,at)&&dt.push(at)}),dt.length!==0?dt:he}function Le(he,xe){try{return!he.lang||he.lang instanceof RegExp?xe.lang.match(he.lang):xe.lang!==""&&(0,xh.extendedFilter)(xe.lang,yi()(he.lang)).length>0}catch(We){return!1}}function we(he,xe){return he.index===void 0||he.index===null||xe.index===he.index}function je(he,xe){return!he.viewpoint||he.viewpoint===xe.viewpoint}function Z(he,xe){var We=arguments.length>2&&arguments[2]!==void 0&&arguments[2],dt=!he.role||!!xe.roles.filter(function(at){return at===he.role})[0];return dt||xe.type===y.Z.AUDIO&&We}function le(he,xe){return he.accessibility?!!xe.accessibility.filter(function(We){return We===he.accessibility})[0]:!xe.accessibility.length}function ae(he,xe){return!he.audioChannelConfiguration||!!xe.audioChannelConfiguration.filter(function(We){return We===he.audioChannelConfiguration})[0]}function se(he,xe){return!he.codec||he.codec===xe.codec}function Q(he){var xe,We=0,dt=[];return he.forEach(function(at){(xe=Math.max.apply(Math,at.bitrateList.map(function(Je){return Je.bandwidth})))>We?(We=xe,dt=[at]):xe===We&&dt.push(at)}),dt}function Me(he){var xe,We=1/0,dt=[];return he.forEach(function(at){var Je=at.bitrateList.reduce(function(ht,Bt){var Gt=Math.max(1,Bt.width*Bt.height);return ht+Bt.bandwidth/Gt},0);(xe=Je/at.bitrateList.length)<We?(We=xe,dt=[at]):xe===We&&dt.push(at)}),dt}function be(he){var xe,We=0,dt=[];return he.forEach(function(at){(xe=at.representationCount)>We?(We=xe,dt=[at]):xe===We&&dt.push(at)}),dt}function ke(he,xe){if(he===y.Z.TEXT)return xe[0];var We,dt=V.get().streaming.selectionModeForInitialTrack,at=H.getCustomInitialTrackSelectionFunction();if(at&&typeof at=="function")We=at(xe);else switch(dt){case y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:We=function(Je){var ht,Bt,Gt=(ht=0,Bt=[],Je.forEach(function(kt){isNaN(kt.selectionPriority)||(kt.selectionPriority>ht?(ht=kt.selectionPriority,Bt=[kt]):kt.selectionPriority===ht&&Bt.push(kt))}),Bt);return Gt.length>1&&(Gt=Q(Gt)),Gt.length>1&&(Gt=be(Gt)),Gt}(xe);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:We=function(Je){var ht=Q(Je);return ht.length>1&&(ht=be(ht)),ht}(xe);break;case y.Z.TRACK_SELECTION_MODE_FIRST_TRACK:We=Re(xe);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:We=function(Je){var ht=Me(Je);return ht.length>1&&(ht=Q(ht)),ht}(xe);break;case y.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:We=function(Je){var ht=be(Je);return ht.length>1&&(ht=Q(Je)),ht}(xe);break;default:P.warn("Track selection mode ".concat(dt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),We=Re(xe)}return We.length>0?We[0]:xe[0]}function Re(he){return he[0]}return L={setInitialMediaSettingsForType:function(he,xe){var We=J[he]||qe(he),dt=Ee(he,xe.id),at=[];We||((We=re.getSavedMediaSettings(he))&&delete We.codec,ge(he,We)),dt&&dt.length!==0&&(We&&(at=_e(at=Array.from(dt),Le,We),at=_e(at,we,We),at=_e(at,je,We),he===y.Z.AUDIO&&J[he]||(at=_e(at,Z,We)),at=_e(at,le,We),at=_e(at,ae,We),at=_e(at,se,We)),at.length===0?me(ke(he,dt),!0):at.length>1?me(ke(he,at)):me(at[0]))},addTrack:function(he){if(he){var xe=he.type;if((We=xe)===y.Z.AUDIO||We===y.Z.VIDEO||We===y.Z.TEXT||We===y.Z.IMAGE){var We,dt,at=he.streamInfo.id;B[at]||(B[at]={audio:{list:[],storeLastSettings:dt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:dt,current:null},text:{list:[],storeLastSettings:dt,current:null},image:{list:[],storeLastSettings:dt,current:null}});for(var Je=B[at][xe].list,ht=0,Bt=Je.length;ht<Bt;++ht)if(De(Je[ht],he))return;Je.push(he)}}},getTracksFor:Ee,getCurrentTrackFor:ie,isCurrentTrack:function(he){if(!he)return!1;var xe=he.type,We=he.streamInfo.id;return B[We]&&B[We][xe]&&De(B[We][xe].current,he)},setTrack:me,selectInitialTrack:ke,setInitialSettings:ge,getInitialSettings:qe,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Me,getTracksWithWidestRange:be,isTracksEqual:De,matchSettings:function(he,xe){var We=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var dt=!1;if(he.lang){if(he.lang instanceof RegExp)dt=xe.lang.match(he.lang);else if(xe.lang!==""){var at=yi()(he.lang);at&&(dt=(0,xh.extendedFilter)(xe.lang,at).length>0)}}else dt=!0;var Je=he.index===void 0||he.index===null||xe.index===he.index,ht=!he.viewpoint||he.viewpoint===xe.viewpoint,Bt=!he.role||!!xe.roles.filter(function(Ft){return Ft===he.role})[0],Gt=!he.accessibility||!!xe.accessibility.filter(function(Ft){return Ft===he.accessibility})[0],kt=!he.audioChannelConfiguration||!!xe.audioChannelConfiguration.filter(function(Ft){return Ft===he.audioChannelConfiguration})[0];return dt&&Je&&ht&&(Bt||xe.type===y.Z.AUDIO&&We)&&Gt&&kt}catch(Ft){return!1}},matchSettingsLang:Le,matchSettingsIndex:we,matchSettingsViewPoint:je,matchSettingsRole:Z,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){re.setSavedMediaSettings(y.Z.TEXT,null)},setConfig:function(he){he&&(he.domStorage&&(re=he.domStorage),he.settings&&(V=he.settings),he.customParametersModel&&(H=he.customParametersModel))},reset:Be},P=(0,N.Z)(fe).getInstance().getLogger(L),Be(),L}Tc.__dashjs_factory_name="MediaController";var Si=U.Z.getSingletonFactory(Tc);U.Z.updateSingletonFactory(Tc.__dashjs_factory_name,Si);var Bu=Si,Ls=NaN,lm=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:P||null,selectedIdx:B||Ls},this.children=[]};function Df(){var L,P,B,V,ee=this.context,J=mn(ee).getInstance();function H(Ee,ie,me){var ge=re(me);Ee[ie]?J.areEqual(ge,Ee[ie].data.baseUrls)||(Ee[ie].data.baseUrls=ge,Ee[ie].data.selectedIdx=Ls):Ee[ie]=new lm(ge)}function re(Ee){var ie=B.getBaseURLsFromElement(Ee),me=V.getSynthesizedBaseUrlElements(ie);return me&&me.length>0&&(ie=ie.concat(me)),ie}function fe(Ee,ie){var me=ie||P;Ee(me.data),me.children&&me.children.forEach(function(ge){return fe(Ee,ge)})}function Se(){P=new lm}return L={reset:Se,update:function(Ee){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var me=re(ie);J.areEqual(me,P.data.baseUrls)||(P.data.baseUrls=me,P.data.selectedIdx=Ls),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ge,qe){H(P.children,qe,ge),ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.forEach(function(De,Be){H(P.children[qe].children,Be,De),De.Representation_asArray&&De.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function(ze,_e){H(P.children[qe].children[Be].children,_e,ze)})})})})(Ee)},getForPath:function(Ee){var ie=P,me=[ie.data];return Ee&&Ee.forEach(function(ge){(ie=ie.children[ge])&&me.push(ie.data)}),me.filter(function(ge){return ge.baseUrls.length})},invalidateSelectedIndexes:function(Ee){fe(function(ie){isNaN(ie.selectedIdx)||Ee===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Ls)})},setConfig:function(Ee){Ee.adapter&&(B=Ee.adapter),Ee.contentSteeringController&&(V=Ee.contentSteeringController)},getBaseUrls:function(Ee){return re(Ee)}},Se(),L}Df.__dashjs_factory_name="BaseURLTreeModel";var ba=U.Z.getClassFactory(Df);function Ya(L){var P=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,re=0,fe=[],Se=0;if((H=ee.sort(function(Ee,ie){var me=Ee.dvbPriority-ie.dvbPriority;return isNaN(me)?0:me}).filter(function(Ee,ie,me){return!ie||me[0].dvbPriority&&Ee.dvbPriority&&me[0].dvbPriority===Ee.dvbPriority})).length)return H.length>1&&(H.forEach(function(Ee){re+=Ee.dvbWeight,fe.push(re)}),J=Math.floor(Math.random()*(re-1)),fe.every(function(Ee,ie){return Se=ie,!(J<Ee)})),H[Se]}((V=[],B.filter(function(ee){return!P.contains(ee.serviceLocation)||(ee.dvbPriority&&V.push(ee.dvbPriority),!1)}).filter(function(ee){return!V.length||!ee.dvbPriority||V.indexOf(ee.dvbPriority)===-1})));var V}}}Ya.__dashjs_factory_name="DVBSelector";var Ca=U.Z.getClassFactory(Ya);function Do(L){var P=(L=L||{}).blacklistController;return{select:function(B){var V,ee=0;return B&&B.some(function(J,H){return ee=H,!P.contains(J.serviceLocation)})&&(V=B[ee]),V}}}Do.__dashjs_factory_name="BasicSelector";var cm=U.Z.getClassFactory(Do);function Nh(){var L,P,B,V=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=0,fe=NaN,Se=function(){var ie=J[re],me=H.findIndex(function(ge){return ge.serviceLocation&&ge.serviceLocation===ie});if(me!==-1&&!B.contains(H[me].serviceLocation))return fe=me,"break";re+=1};re<J.length;){var Ee=Se();if(Ee==="break")break}return fe}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var re=P.getSteeringDataFromManifest();re&&re.defaultServiceLocationArray.length>0&&(H=ee(re.defaultServiceLocationArray,J.baseUrls))}var fe=P.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&fe&&fe.pathwayPriority&&fe.pathwayPriority.length&&(H=ee(fe.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(P=J.contentSteeringController)}},P=Ia(V).getInstance(),L}Nh.__dashjs_factory_name="ContentSteeringSelector";var SE=U.Z.getClassFactory(Nh);function pu(){var L,P,B,V,ee,J,H=this.context,re=(0,m.Z)(H).getInstance(),fe=(0,Ze.Z)(H).getInstance();function Se(){P.reset()}return L={chooseSelector:function(Ee){(0,pe.PS)(Ee,"boolean"),J=Ee?V:B},select:function(Ee){if(Ee){if(fe.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(Ee);isNaN(ie)||ie===-1||(Ee.selectedIdx=ie)}if(!isNaN(Ee.selectedIdx))return Ee.baseUrls[Ee.selectedIdx];var me=J.select(Ee.baseUrls);return me?(Ee.selectedIdx=Ee.baseUrls.indexOf(me),me):(re.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new de.Z(Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Ae.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&Se()))}},reset:Se,setConfig:function(Ee){Ee.selector&&(J=Ee.selector),Ee.contentSteeringSelector&&(ee=Ee.contentSteeringSelector)}},P=vs(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=cm(H).create({blacklistController:P}),V=Ca(H).create({blacklistController:P}),(ee=SE(H).create()).setConfig({blacklistController:P}),J=B,L}pu.__dashjs_factory_name="BaseURLSelector";var ks=U.Z.getClassFactory(pu);function Cl(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance(),re=(0,_t.Z)(J).getInstance();function fe(Ee){B.update(Ee),V.chooseSelector(P.getIsDVB(Ee)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:Se(Ee)})}function Se(Ee){return B.getBaseUrls(Ee)}return L={reset:function(){B.reset(),V.reset()},initialize:function(Ee){B.setConfig({adapter:P,contentSteeringController:ee}),fe(Ee)},resolve:function(Ee){var ie=B.getForPath(Ee).reduce(function(me,ge){var qe=V.select(ge);return qe?(re.isRelative(qe.url)?me.url=re.resolve(qe.url,me.url):(me.url=qe.url,me.serviceLocation=qe.serviceLocation),me.availabilityTimeOffset=qe.availabilityTimeOffset,me.availabilityTimeComplete=qe.availabilityTimeComplete,me.queryParams=qe.queryParams,me):new Qn},new Qn);if(!re.isRelative(ie.url))return ie},setConfig:function(Ee){Ee.baseURLTreeModel&&(B=Ee.baseURLTreeModel),Ee.baseURLSelector&&(V=Ee.baseURLSelector),Ee.adapter&&(P=Ee.adapter),Ee.contentSteeringController&&(ee=Ee.contentSteeringController)},getBaseUrls:Se,update:fe},B=ba(J).create(),V=ks(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Ee){B.invalidateSelectedIndexes(Ee.entry)},L),L}Cl.__dashjs_factory_name="BaseURLController";var wE=U.Z.getClassFactory(Cl);function Mh(L){return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Mh(L)}function Pf(L,P){return Pf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Pf(L,P)}function fm(L,P){return!P||Mh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Of(L){return Of=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Of(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Pf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Of(P);if(B){var re=Of(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return fm(this,J)});function ee(J,H){var re;return function(fe,Se){if(!(fe instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,ee),(re=V.call(this)).url=J||null,re.type=H||null,re.mediaType=y.Z.STREAM,re.responseType="",re}return ee}(j.Z);function dm(L){L=L||{};var P=this.context,B=(0,m.Z)(P).getInstance(),V=Ao(P).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Ae});return{load:function(ee,J,H){var re=function(Se,Ee){J.resolved=!0,J.resolvedContent=Se||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:Se||Ee?null:new de.Z(Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")re(null,!0);else{var fe=new ji(ee,it.w.XLINK_EXPANSION_TYPE);V.load({request:fe,success:function(Se){re(Se)},error:function(){re(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}dm.__dashjs_factory_name="XlinkLoader";var hm=U.Z.getClassFactory(dm),ju=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function P(_e){var Le=_e.localName;return Le==null&&(Le=_e.baseName),Le!=null&&Le!=""||(Le=_e.nodeName),Le}function B(_e){return typeof _e=="string"?_e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):_e}function V(_e,Le,we,je){for(var Z=0;Z<_e.length;Z++){var le=_e[Z];if(typeof le=="string"){if(le==je)break}else if(le instanceof RegExp){if(le.test(je))break}else if(typeof le=="function"&&le(Le,we,je))break}return Z!=_e.length}function ee(_e,Le,we){L.arrayAccessForm==="property"&&(_e[Le]instanceof Array?_e[Le+"_asArray"]=_e[Le]:_e[Le+"_asArray"]=[_e[Le]]),!(_e[Le]instanceof Array)&&L.arrayAccessFormPaths.length>0&&V(L.arrayAccessFormPaths,_e,Le,we)&&(_e[Le]=[_e[Le]])}function J(_e){var Le=_e.split(/[-T:+Z]/g),we=new Date(Le[0],Le[1]-1,Le[2]),je=Le[5].split(".");if(we.setHours(Le[3],Le[4],je[0]),je.length>1&&we.setMilliseconds(je[1]),Le[6]&&Le[7]){var Z=60*Le[6]+Number(Le[7]);Z=0+((/\d\d-\d\d:\d\d$/.test(_e)?"-":"+")=="-"?-1*Z:Z),we.setMinutes(we.getMinutes()-Z-we.getTimezoneOffset())}else _e.indexOf("Z",_e.length-1)!==-1&&(we=new Date(Date.UTC(we.getFullYear(),we.getMonth(),we.getDate(),we.getHours(),we.getMinutes(),we.getSeconds(),we.getMilliseconds())));return we}function H(_e,Le,we,je){return!(Le==1&&L.xmlElementsFilter.length>0)||V(L.xmlElementsFilter,_e,we,je)}function re(_e,Le){if(_e.nodeType==9){for(var we=new Object,je=_e.childNodes,Z=0;Z<je.length;Z++)(ae=je[Z]).nodeType==1&&(L.ignoreRoot?we=re(ae):(we={})[se=P(ae)]=re(ae));return we}if(_e.nodeType==1){(we=new Object).__cnt=0;var le=[];for(je=_e.childNodes,Z=0;Z<je.length;Z++){var ae,se=P(ae=je[Z]);if(ae.nodeType!=8){var Q=Le+"."+se;if(H(we,ae.nodeType,se,Q))if(we.__cnt++,we[se]==null){var Me=re(ae,Q);(se!="#text"||/[^\s]/.test(Me))&&((be={})[se]=Me,le.push(be)),we[se]=Me,ee(we,se,Q)}else{var be;we[se]!=null&&(we[se]instanceof Array||(we[se]=[we[se]],ee(we,se,Q))),Me=re(ae,Q),(se!="#text"||/[^\s]/.test(Me))&&((be={})[se]=Me,le.push(be)),we[se][we[se].length]=Me}}}we.__children=le;for(var ke=P(_e),Re=0;Re<_e.attributes.length;Re++){var he=_e.attributes[Re];we.__cnt++;for(var xe=he.value,We=0,dt=L.matchers.length;We<dt;We++){var at=L.matchers[We];at.test(he,ke)&&(xe=at.converter(he.value))}we[L.attributePrefix+he.name]=xe}var Je=function(ht){return ht.prefix}(_e);return Je!=null&&Je!=""&&(we.__cnt++,we.__prefix=Je),we["#text"]!=null&&(we.__text=we["#text"],we.__text instanceof Array&&(we.__text=we.__text.join("\n")),L.stripWhitespaces&&(we.__text=we.__text.trim()),delete we["#text"],L.arrayAccessForm=="property"&&delete we["#text_asArray"],we.__text=function(ht,Bt,Gt){if(L.datetimeAccessFormPaths.length>0){var kt=Gt.split(".#")[0];return V(L.datetimeAccessFormPaths,ht,Bt,kt)?J(ht):ht}return ht}(we.__text,se,Le+"."+se)),we["#cdata-section"]!=null&&(we.__cdata=we["#cdata-section"],delete we["#cdata-section"],L.arrayAccessForm=="property"&&delete we["#cdata-section_asArray"]),we.__cnt==0&&L.emptyNodeForm=="text"?we="":we.__cnt==1&&we.__text!=null?we=we.__text:we.__cnt!=1||we.__cdata==null||L.keepCData?we.__cnt>1&&we.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&we.__text==""||we.__text.trim()=="")&&delete we.__text:we=we.__cdata,delete we.__cnt,!L.enableToStringFunc||we.__text==null&&we.__cdata==null||(we.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),we}if(_e.nodeType==3||_e.nodeType==4)return _e.nodeValue}function fe(_e,Le,we,je){var Z="<"+(_e!=null&&_e.__prefix!=null?_e.__prefix+":":"")+Le;if(we!=null)for(var le=0;le<we.length;le++){var ae=we[le],se=_e[ae];L.escapeMode&&(se=B(se)),Z+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?Z+='"'+se+'"':Z+="'"+se+"'"}return Z+(je?"/>":">")}function Se(_e,Le){return"</"+(_e.__prefix!=null?_e.__prefix+":":"")+Le+">"}function Ee(_e,Le){return L.arrayAccessForm=="property"&&(je="_asArray",(we=Le.toString()).indexOf(je,we.length-je.length)!==-1)||Le.toString().indexOf(L.attributePrefix)==0||Le.toString().indexOf("__")==0||_e[Le]instanceof Function;var we,je}function ie(_e){var Le=0;if(_e instanceof Object)for(var we in _e)Ee(_e,we)||Le++;return Le}function me(_e,Le,we){return L.jsonPropertiesFilter.length==0||we==""||V(L.jsonPropertiesFilter,_e,Le,we)}function ge(_e){var Le=[];if(_e instanceof Object)for(var we in _e)we.toString().indexOf("__")==-1&&we.toString().indexOf(L.attributePrefix)==0&&Le.push(we);return Le}function qe(_e){var Le="";return _e instanceof Object?Le+=function(we){var je="";return we.__cdata!=null&&(je+="<![CDATA["+we.__cdata+"]]>"),we.__text!=null&&(L.escapeMode?je+=B(we.__text):je+=we.__text),je}(_e):_e!=null&&(L.escapeMode?Le+=B(_e):Le+=_e),Le}function De(_e,Le){return _e===""?Le:_e+"."+Le}function Be(_e,Le,we,je){var Z="";if(_e.length==0)Z+=fe(_e,Le,we,!0);else for(var le=0;le<_e.length;le++)Z+=fe(_e[le],Le,ge(_e[le]),!1),Z+=ze(_e[le],De(je,Le)),Z+=Se(_e[le],Le);return Z}function ze(_e,Le){var we="";if(ie(_e)>0){for(var je in _e)if(!Ee(_e,je)&&(Le==""||me(_e,je,De(Le,je)))){var Z=_e[je],le=ge(Z);Z==null||Z==null?we+=fe(Z,je,le,!0):Z instanceof Object?Z instanceof Array?we+=Be(Z,je,le,Le):Z instanceof Date?(we+=fe(Z,je,le,!1),we+=Z.toISOString(),we+=Se(Z,je)):ie(Z)>0||Z.__text!=null||Z.__cdata!=null?(we+=fe(Z,je,le,!1),we+=ze(Z,De(Le,je)),we+=Se(Z,je)):we+=fe(Z,je,le,!0):(we+=fe(Z,je,le,!1),we+=qe(Z),we+=Se(Z,je))}}return we+qe(_e)}this.parseXmlString=function(_e){var Le;if(_e===void 0)return null;if(window.DOMParser){var we=new window.DOMParser;try{(Le=we.parseFromString(_e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Le=null)}catch(je){Le=null}}else _e.indexOf("<?")==0&&(_e=_e.substr(_e.indexOf("?>")+2)),(Le=new ActiveXObject("Microsoft.XMLDOM")).async="false",Le.loadXML(_e);return Le},this.asArray=function(_e){return _e===void 0||_e==null?[]:_e instanceof Array?_e:[_e]},this.toXmlDateTime=function(_e){return _e instanceof Date?_e.toISOString():typeof _e=="number"?new Date(_e).toISOString():null},this.asDateTime=function(_e){return typeof _e=="string"?J(_e):_e},this.xml2json=function(_e){return re(_e)},this.xml_str2json=function(_e){var Le=this.parseXmlString(_e);return Le!=null?this.xml2json(Le):null},this.json2xml_str=function(_e){return ze(_e,"")},this.json2xml=function(_e){var Le=this.json2xml_str(_e);return this.parseXmlString(Le)},this.getVersion=function(){return"1.2.0"}},mo="onLoad";function Zu(L){L=L||{};var P,B,V,ee,J,H,re=this.context,fe=(0,m.Z)(re).getInstance(),Se=(0,_t.Z)(re).getInstance();function Ee(De,Be,ze){var _e,Le,we={};we.elements=De,we.type=Be,we.resolveType=ze,we.elements.length===0&&me(we);for(var je=0;je<we.elements.length;je++)_e=we.elements[je],Le=Se.isHTTPURL(_e.url)?_e.url:_e.originalContent.BaseURL+_e.url,H.load(Le,_e,we)}function ie(De){var Be,ze,_e="";if(Be=De.element,ze=De.resolveObject,Be.resolvedContent){var Le=0;Be.resolvedContent.indexOf("<?xml")===0&&(Le=Be.resolvedContent.indexOf("?>")+2),_e=Be.resolvedContent.substr(0,Le)+"<response>"+Be.resolvedContent.substr(Le)+"</response>",Be.resolvedContent=J.xml_str2json(_e)}(function(we){var je;for(je=0;je<we.elements.length;je++)if(we.elements[je].resolved===!1)return!1;return!0})(ze)&&me(ze)}function me(De){var Be,ze,_e=[];if(function(Le){var we,je,Z,le,ae,se,Q=[];for(le=Le.elements.length-1;le>=0;le--){if(je=(we=Le.elements[le]).type+"_asArray",we.resolvedContent){if(we.resolvedContent)for(ae=0;ae<we.resolvedContent[je].length;ae++)Z=we.resolvedContent[je][ae],Q.push(Z)}else delete we.originalContent["xlink:actuate"],delete we.originalContent["xlink:href"],Q.push(we.originalContent);for(we.parentElement[je].splice(we.index,1),se=0;se<Q.length;se++)we.parentElement[je].splice(we.index+se,0,Q[se]);Q=[]}Le.elements.length>0&&V.run(ee)}(De),De.resolveType==="onActuate"&&fe.trigger(T.Z.XLINK_READY,{manifest:ee}),De.resolveType===mo)switch(De.type){case v.Z.PERIOD:for(Be=0;Be<ee[v.Z.PERIOD+"_asArray"].length;Be++)(ze=ee[v.Z.PERIOD+"_asArray"][Be]).hasOwnProperty(v.Z.ADAPTATION_SET+"_asArray")&&(_e=_e.concat(ge(ze[v.Z.ADAPTATION_SET+"_asArray"],ze,v.Z.ADAPTATION_SET,mo))),ze.hasOwnProperty(v.Z.EVENT_STREAM+"_asArray")&&(_e=_e.concat(ge(ze[v.Z.EVENT_STREAM+"_asArray"],ze,v.Z.EVENT_STREAM,mo)));Ee(_e,v.Z.ADAPTATION_SET,mo);break;case v.Z.ADAPTATION_SET:fe.trigger(T.Z.XLINK_READY,{manifest:ee})}}function ge(De,Be,ze,_e){var Le,we,je,Z=[];for(we=De.length-1;we>=0;we--)(Le=De[we]).hasOwnProperty("xlink:href")&&Le["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&De.splice(we,1);for(we=0;we<De.length;we++)(Le=De[we]).hasOwnProperty("xlink:href")&&Le.hasOwnProperty("xlink:actuate")&&Le["xlink:actuate"]===_e&&(je=qe(Le["xlink:href"],Be,ze,we,_e,Le),Z.push(je));return Z}function qe(De,Be,ze,_e,Le,we){return{url:De,parentElement:Be,type:ze,index:_e,resolveType:Le,originalContent:we,resolvedContent:null,resolved:!1}}return P={resolveManifestOnLoad:function(De){J=new ju({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=De).Period_asArray?Ee(ge(ee.Period_asArray,ee,v.Z.PERIOD,mo),v.Z.PERIOD,mo):fe.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(De){De&&(B=De)},setIron:function(De){De&&(V=De)},reset:function(){fe.off(T.Z.XLINK_ELEMENT_LOADED,ie,P),H&&(H.reset(),H=null)}},fe.on(T.Z.XLINK_ELEMENT_LOADED,ie,P),H=hm(re).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),P}Zu.__dashjs_factory_name="XlinkController";var Sc=U.Z.getClassFactory(Zu);function Gu(L){return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Gu(L)}function Cr(L){function P(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var re=0,fe=ee.length;re<fe;++re){var Se=ee[re];if(J[Se.name])if(H[Se.name]){if(Se.merge){var Ee=J[Se.name],ie=H[Se.name];Gu(Ee)==="object"&&Gu(ie)==="object"?P(Ee,ie):H[Se.name]=Ee+ie}}else H[Se.name]=J[Se.name]}}function V(ee,J){for(var H=0,re=ee.children.length;H<re;++H){var fe=ee.children[H],Se=J[fe.name+"_asArray"];if(Se)for(var Ee=0,ie=Se.length;Ee<ie;++Ee){var me=Se[Ee];B(ee.properties,J,me),V(fe,me)}}}return{run:function(ee){if(ee===null||Gu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,re=0,fe=H.length;re<fe;++re){var Se=H[re];if(V(J,Se),"adaptationset"in L){var Ee=Se.AdaptationSet_asArray;if(Ee)for(var ie=L.adaptationset,me=0,ge=Ee.length;me<ge;++me)V(ie,Ee[me])}}return ee}}}Cr.__dashjs_factory_name="ObjectIron";var qu=U.Z.getClassFactory(Cr);function Dh(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Hu=function(){function L(V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=V,this._converter=ee}var P,B;return P=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Dh(P.prototype,B),L}();function Rl(L){return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Rl(L)}function ni(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Wa(L,P){return Wa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Wa(L,P)}function pm(L,P){return!P||Rl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function wc(L){return wc=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},wc(L)}var gm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Wa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=wc(P);if(B){var re=wc(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return pm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var re,fe=(ni(re={},v.Z.MPD,[v.Z.ID,v.Z.PROFILES]),ni(re,v.Z.PERIOD,[v.Z.ID]),ni(re,v.Z.BASE_URL,[v.Z.SERVICE_LOCATION,v.Z.BYTE_RANGE]),ni(re,v.Z.SEGMENT_BASE,[v.Z.INDEX_RANGE]),ni(re,v.Z.INITIALIZATION,[v.Z.RANGE]),ni(re,v.Z.REPRESENTATION_INDEX,[v.Z.RANGE]),ni(re,v.Z.SEGMENT_LIST,[v.Z.INDEX_RANGE]),ni(re,v.Z.BITSTREAM_SWITCHING,[v.Z.RANGE]),ni(re,v.Z.SEGMENT_URL,[v.Z.MEDIA_RANGE,v.Z.INDEX_RANGE]),ni(re,v.Z.SEGMENT_TEMPLATE,[v.Z.INDEX_RANGE,v.Z.MEDIA,v.Z.INDEX,v.Z.INITIALIZATION_MINUS,v.Z.BITSTREAM_SWITCHING_MINUS]),ni(re,v.Z.ASSET_IDENTIFIER,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.EVENT_STREAM,[v.Z.VALUE]),ni(re,v.Z.ADAPTATION_SET,[v.Z.PROFILES,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.CONTENT_TYPE]),ni(re,v.Z.FRAME_PACKING,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.AUDIO_CHANNEL_CONFIGURATION,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.CONTENT_PROTECTION,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ESSENTIAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.SUPPLEMENTAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.INBAND_EVENT_STREAM,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ACCESSIBILITY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ROLE,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.RATING,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.VIEWPOINT,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.CONTENT_COMPONENT,[v.Z.CONTENT_TYPE]),ni(re,v.Z.REPRESENTATION,[v.Z.ID,v.Z.DEPENDENCY_ID,v.Z.MEDIA_STREAM_STRUCTURE_ID]),ni(re,v.Z.SUBSET,[v.Z.ID]),ni(re,v.Z.METRICS,[v.Z.METRICS_MINUS]),ni(re,v.Z.REPORTING,[v.Z.VALUE,v.Z.ID]),re);if(fe.hasOwnProperty(H)){var Se=fe[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(Hu);function Ph(L){return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Ph(L)}function Oh(L,P){return Oh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Oh(L,P)}function Lf(L,P){return!P||Ph(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ac(L){return Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ac(L)}var mm=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,vm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Oh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ac(P);if(B){var re=Ac(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Lf(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){for(var H=[v.Z.MIN_BUFFER_TIME,v.Z.MEDIA_PRESENTATION_DURATION,v.Z.MINIMUM_UPDATE_PERIOD,v.Z.TIMESHIFT_BUFFER_DEPTH,v.Z.MAX_SEGMENT_DURATION,v.Z.MAX_SUBSEGMENT_DURATION,v.Z.SUGGESTED_PRESENTATION_DELAY,v.Z.START,y.Z.START_TIME,v.Z.DURATION],re=H.length,fe=0;fe<re;fe++)if(J.nodeName===H[fe])return mm.test(J.value);return!1},function(J){var H=mm.exec(J),re=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(re=-re),re})}return ee}(Hu);function Lh(L){return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Lh(L)}function kf(L,P){return kf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},kf(L,P)}function ym(L,P){return!P||Lh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ff(L){return Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ff(L)}var kh=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Em=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&kf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ff(P);if(B){var re=Ff(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return ym(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return kh.test(J.value)},function(J){var H,re=kh.exec(J);if(H=Date.UTC(parseInt(re[1],10),parseInt(re[2],10)-1,parseInt(re[3],10),parseInt(re[4],10),parseInt(re[5],10),re[6]&&parseInt(re[6],10)||0,re[7]&&1e3*parseFloat(re[7])||0),re[9]&&re[10]){var fe=60*parseInt(re[9],10)+parseInt(re[10],10);H+=(re[8]==="+"?-1:1)*fe*60*1e3}return new Date(H)})}return ee}(Hu);function Ku(L){return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Ku(L)}function xl(L,P){return xl=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},xl(L,P)}function AE(L,P){return!P||Ku(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Uf(L){return Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Uf(L)}var IE=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Nl=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&xl(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Uf(P);if(B){var re=Uf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return AE(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return IE.test(J.value)},function(J){return parseFloat(J)})}return ee}(Hu);function Ml(L){return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Ml(L)}function Vu(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Ic(L,P){return Ic=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Ic(L,P)}function _m(L,P){return!P||Ml(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Dl(L){return Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Dl(L)}var Tm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Ic(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Dl(P);if(B){var re=Dl(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return _m(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var re,fe=(Vu(re={},v.Z.ADAPTATION_SET,[v.Z.LANG]),Vu(re,v.Z.REPRESENTATION,[v.Z.LANG]),Vu(re,v.Z.CONTENT_COMPONENT,[v.Z.LANG]),Vu(re,v.Z.LABEL,[v.Z.LANG]),Vu(re,v.Z.GROUP_LABEL,[v.Z.LANG]),re);if(fe.hasOwnProperty(H)){var Se=fe[H];return Se!==void 0&&Se.indexOf(J.name)>=0}return!1},function(J){return yi()(J)||String(J)})}return ee}(Hu);function Bf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var jf=function(){function L(V){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V,this._merge=(ee=V)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Bf(P.prototype,B),L}();function bc(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var zu=function(){function L(V,ee,J){var H=this;(function(re,fe){if(!(re instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(re){H._properties.push(new jf(re))})}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&bc(P.prototype,B),L}();function Zf(L){return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Zf(L)}function Fh(L,P){return Fh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Fh(L,P)}function bE(L,P){return!P||Zf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Yu(L){return Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Yu(L)}var CE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Fh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Yu(P);if(B){var re=Yu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return bE(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.PROFILES,v.Z.WIDTH,v.Z.HEIGHT,v.Z.SAR,v.Z.FRAMERATE,v.Z.AUDIO_SAMPLING_RATE,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.MAXIMUM_SAP_PERIOD,v.Z.START_WITH_SAP,v.Z.MAX_PLAYOUT_RATE,v.Z.CODING_DEPENDENCY,v.Z.SCAN_TYPE,v.Z.FRAME_PACKING,v.Z.AUDIO_CHANNEL_CONFIGURATION,v.Z.CONTENT_PROTECTION,v.Z.ESSENTIAL_PROPERTY,v.Z.ESSENTIAL_PROPERTY+"_asArray",v.Z.SUPPLEMENTAL_PROPERTY,v.Z.INBAND_EVENT_STREAM];return V.call(this,v.Z.ADAPTATION_SET,J,[new zu(v.Z.REPRESENTATION,J,[new zu(v.Z.SUB_REPRESENTATION,J)])])}return ee}(zu);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hr(L)}function Gf(L,P){return Gf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Gf(L,P)}function Uh(L,P){return!P||Hr(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function qf(L){return qf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},qf(L)}var RE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Gf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=qf(P);if(B){var re=qf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Uh(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.SEGMENT_BASE,v.Z.SEGMENT_TEMPLATE,v.Z.SEGMENT_LIST];return V.call(this,v.Z.PERIOD,J,[new zu(v.Z.ADAPTATION_SET,J,[new zu(v.Z.REPRESENTATION,J)])])}return ee}(zu);function Cc(L){L=L||{};var P,B,V,ee,J,H=this.context,re=L.debug;return P={parse:function(fe){var Se,Ee=window.performance.now();if(!(Se=ee.xml_str2json(fe)))throw new Error("parsing the manifest failed");var ie=window.performance.now();Se.Patch?((Se=Se.Patch).add_asArray&&Se.add_asArray.forEach(function(ge){return J.run(ge)}),Se.replace_asArray&&Se.replace_asArray.forEach(function(ge){return J.run(ge)})):(Se=Se.MPD,J.run(Se));var me=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-Ee).toPrecision(3)+"ms, objectiron: "+(me-ie).toPrecision(3)+"ms, total: "+((me-Ee)/1e3).toPrecision(3)+"s)"),Se.protocol="DASH",Se},getMatchers:function(){return V},getIron:function(){return J}},B=re.getLogger(P),V=[new vm,new Em,new Nl,new Tm,new gm],ee=new ju({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),J=qu(H).create({adaptationset:new CE,period:new RE}),P}Cc.__dashjs_factory_name="DashParser";var Sm=U.Z.getClassFactory(Cc);function Bh(L){L=L||{};var P,B,V,ee,J,H=this.context,re=L.debug,fe=L.settings,Se=(0,m.Z)(H).getInstance(),Ee=(0,_t.Z)(H).getInstance(),ie=L.mssHandler,me=L.errHandler;function ge(De){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:De.manifest})}function qe(De){var Be=null;return De.indexOf("SmoothStreamingMedia")>-1?(ie&&(Be=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Be):De.indexOf("MPD")>-1||De.indexOf("Patch")>-1?Sm(H).create({debug:re}):Be}return P={load:function(De){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_e=new Date,Le=new ji(De,it.w.MPD_TYPE);Be&&(Le.serviceLocation=Be),ze&&(Le.queryParams=ze),Le.requestStartDate||(Le.requestStartDate=_e),Se.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:Le}),V.load({request:Le,success:function(we,je,Z){var le,ae,se;if(ee)if(Z&&Z!==De?(ae=Ee.parseBaseUrl(Z),le=Z):(Ee.isRelative(De)&&(De=Ee.resolve(De,window.location.href)),ae=Ee.parseBaseUrl(De)),je!="No Content")if(J===null&&(J=qe(we)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{se=J.parse(we)}catch(Me){return void Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new de.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}if(se){if(se.url=le||De,se.originalUrl||(se.originalUrl=se.url),fe&&fe.get().streaming.enableManifestDurationMismatchFix&&se.mediaPresentationDuration&&se.Period_asArray.length>1){var Q=se.Period_asArray.reduce(function(Me,be){return Me+be.duration},0);!isNaN(Q)&&se.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),se.mediaPresentationDuration=Q)}se.baseUri=ae,se.loadedTime=new Date,ee.resolveManifestOnLoad(se),Se.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:we})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new de.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))})}else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new de.Z(Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(De))});else Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(we,je,Z){Se.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new de.Z(Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Ae.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(De,", ").concat(Z))})}})},reset:function(){Se.off(T.Z.XLINK_READY,ge,P),ie&&ie.reset(),ee&&(ee.reset(),ee=null),V&&(V.abort(),V=null)}},B=re.getLogger(P),Se.on(T.Z.XLINK_READY,ge,P),V=Ao(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:Ee,constants:y.Z,dashConstants:v.Z,errors:Ae,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=Sc(H).create({errHandler:me,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,P}Bh.__dashjs_factory_name="ManifestLoader";var wm=U.Z.getClassFactory(Bh);function jh(){var L=this.context,P=(0,m.Z)(L).getInstance();return{error:function(B){P.trigger(T.Z.ERROR,{error:B})}}}jh.__dashjs_factory_name="ErrorHandler";var Pl=U.Z.getSingletonFactory(jh),Am=S(1715);function Im(){var L,P,B,V,ee,J,H=this.context,re=(0,m.Z)(H).getInstance();function fe(Se,Ee){if(!Ee||!Ee.Period_asArray||Ee.Period_asArray.length===0)return Promise.resolve();var ie=[];return Ee.Period_asArray.forEach(function(me){ie.push(function(ge,qe){return new Promise(function(De){if(ge&&ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.length!==0){var Be=[];ge.AdaptationSet_asArray.forEach(function(ze){P.getIsTypeOf(ze,qe)&&Be.push(function(_e,Le){return new Promise(function(we){if(_e.Representation_asArray&&_e.Representation_asArray.length!==0){var je=[],Z=[];_e.Representation_asArray.forEach(function(le,ae){var se=P.getCodec(_e,ae,!1),Q=function(Me,be,ke){switch(Me){case y.Z.VIDEO:return function(Re,he){return{codec:he,width:Re.width||null,height:Re.height||null,framerate:Re.frameRate||null,bitrate:Re.bandwidth||null}}(be,ke);case y.Z.AUDIO:return function(Re,he){var xe=Re.audioSamplingRate||null;return{codec:he,bitrate:Re.bandwidth||null,samplerate:xe}}(be,ke);default:return null}}(Le,le,se);Z.push(Q),je.push(B.supportsCodec(Q,Le))}),Promise.all(je).then(function(le){_e.Representation_asArray=_e.Representation_asArray.filter(function(ae,se){return le[se]||J.debug("[Stream] Codec ".concat(Z[se].codec," not supported ")),le[se]}),we()}).catch(function(){we()})}else we()})}(ze,qe))}),Promise.all(Be).then(function(){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(ze){var _e=ze.Representation_asArray&&ze.Representation_asArray.length>0;return _e||(re.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:ze}),J.warn("AdaptationSet has been removed because of no supported Representation")),_e}),De()}).catch(function(){De()})}else De()})}(me,Se))}),Promise.all(ie)}return L={setConfig:function(Se){Se&&(Se.adapter&&(P=Se.adapter),Se.capabilities&&(B=Se.capabilities),Se.settings&&(V=Se.settings),Se.customParametersModel&&(ee=Se.customParametersModel))},filterUnsupportedFeatures:function(Se){return new Promise(function(Ee){var ie=[];ie.push(fe(y.Z.VIDEO,Se)),ie.push(fe(y.Z.AUDIO,Se)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(me){me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(qe){return!qe.Representation_asArray||qe.Representation_asArray.length===0||(qe.Representation_asArray=qe.Representation_asArray.filter(function(De){var Be=P.getEssentialPropertiesForRepresentation(De);if(Be&&Be.length>0)for(var ze=0;ze<Be.length;){if(!B.supportsEssentialProperty(Be[ze]))return J.debug("[Stream] EssentialProperty not supported: "+Be[ze].schemeIdUri),!1;ze+=1}return!0}),qe.Representation_asArray&&qe.Representation_asArray.length>0)})})}(Se),function(me){var ge=ee.getCustomCapabilitiesFilters();ge&&ge.length!==0&&me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(qe){qe.AdaptationSet_asArray=qe.AdaptationSet_asArray.filter(function(De){return!De.Representation_asArray||De.Representation_asArray.length===0||(De.Representation_asArray=De.Representation_asArray.filter(function(Be){return!ge.some(function(ze){return!ze(Be)})}),De.Representation_asArray&&De.Representation_asArray.length>0)})})}(Se),Ee()}).catch(function(){Ee()})})}},J=(0,N.Z)(H).getInstance().getLogger(L),L}Im.__dashjs_factory_name="CapabilitiesFilter";var xE=U.Z.getSingletonFactory(Im),NE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function bm(){var L;return{initialize:function(P){if(L=new NE,!P)return null;var B=P.indexOf("#");if(B!==-1)for(var V=P.substr(B+1).split("&"),ee=0,J=V.length;ee<J;++ee){var H=V[ee],re=H.indexOf("=");if(re!==-1){var fe=H.substring(0,re);L.hasOwnProperty(fe)&&(L[fe]=H.substr(re+1))}}},getURIFragmentData:function(){return L}}}bm.__dashjs_factory_name="URIFragmentModel";var ME=U.Z.getSingletonFactory(bm);function Cm(){var L,P=this.context,B=(0,m.Z)(P).getInstance();return{getValue:function(){return L},setValue:function(V){L=V,V&&B.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}Cm.__dashjs_factory_name="ManifestModel";var DE=U.Z.getSingletonFactory(Cm),Zh=-.5;function Gh(){var L,P,B,V,ee=this.context,J=(0,Ze.Z)(ee).getInstance();function H(Se,Ee){return isNaN(Se)?0:Se>0?(Ee&&P.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se<Zh?(Ee&&P.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Zh,": ").concat(-50,"% playback speed.")),Zh):Se}function re(Se,Ee){return isNaN(Se)?0:Se<0?(Ee&&P.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Se>1?(Ee&&P.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Se}function fe(){var Se=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,Ee=B.getLiveDelay();return!isNaN(Ee)&&Ee>0?Math.min(Se,Ee):Se}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var Se=V.getServiceDescriptionSettings();return Se&&Se.liveCatchup&&!isNaN(Se.liveCatchup.maxDrift)&&Se.liveCatchup.maxDrift>0?Se.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:fe,getInitialBufferLevel:function(){var Se=J.get().streaming.buffer.initialBufferLevel;return isNaN(Se)||Se<0?0:Math.min(fe(),Se)},getRetryAttemptsForType:function(Se){var Ee=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[Se]*Ee:J.get().streaming.retryAttempts[Se]},getRetryIntervalsForType:function(Se){var Ee=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[Se]/Ee:J.get().streaming.retryIntervals[Se]},getCatchupPlaybackRates:function(Se){var Ee=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(Ee.min)||!isNaN(Ee.max))return{min:H(Ee.min,Se),max:re(Ee.max,Se)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var me=ie.liveCatchup.playbackRate;return{min:H(me.min,Se),max:re(me.max,Se)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Se,Ee){try{var ie=J.get().streaming.abr[Se][Ee];if(!isNaN(ie)&&ie!==-1)return ie;var me=V.getServiceDescriptionSettings();return me&&me[Se]&&!isNaN(me[Se][Ee])?me[Se][Ee]:-1}catch(ge){return-1}},setConfig:function(Se){Se.playbackController&&(B=Se.playbackController),Se.serviceDescriptionController&&(V=Se.serviceDescriptionController)},reset:function(){}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}Gh.__dashjs_factory_name="MediaPlayerModel";var Ol=U.Z.getSingletonFactory(Gh),Rc=S(1767);function qh(L){var P=(L=L||{}).abrController,B=L.switchHistory,V=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,re=L.useLoLPABR,fe=L.streamProcessor?L.streamProcessor.getScheduleController():null,Se=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,Ee=L.videoModel?L.videoModel:null;function ie(){return Se?Se.mediaInfo:null}return{getMediaType:function(){var me=ie();return me?me.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var me=ie();return me?me.streamInfo:null},getScheduleController:function(){return fe},getAbrController:function(){return P},getRepresentationInfo:function(){return Se},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return re},getVideoModel:function(){return Ee}}}qh.__dashjs_factory_name="RulesContext";var Hh=U.Z.getClassFactory(qh),ua=S(2068);function Rr(){var L=[],P=[];return{push:function(B){B.newValue===ua.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var V=B.newValue-B.oldValue,ee=V<0?1:0,J=ee?-V:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,P.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),P.length>8){var re=P.shift();L[re.idx].drops-=re.drop,L[re.idx].dropSize-=re.dropSize,L[re.idx].noDrops-=re.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],P=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var pi=U.Z.getClassFactory(Rr);function gu(){var L={},P={},B={};return{push:function(V,ee,J){if(ee){L[V]||(L[V]=[],P[V]=0,B[V]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,re=J&&J.totalVideoFrames?J.totalVideoFrames:0,fe=H-P[V];P[V]=H;var Se=re-B[V];B[V]=re;var Ee=L[V];isNaN(ee)||(Ee[ee]?(Ee[ee].droppedVideoFrames+=fe,Ee[ee].totalVideoFrames+=Se):Ee[ee]={droppedVideoFrames:fe,totalVideoFrames:Se})}},getFrameHistory:function(V){return L[V]},clearForStream:function(V){try{delete L[V],delete P[V],delete B[V]}catch(ee){}},reset:function(){L={},P={},B={}}}}gu.__dashjs_factory_name="DroppedFramesHistory";var Kh=U.Z.getClassFactory(gu);function Wu(L){var P,B,V,ee,J,H=this.context,re=(L=L||{}).settings,fe=(0,m.Z)(H).getInstance();function Se(De,Be,ze,_e){var Le=Math.pow(.5,ze/_e.fast);De.fastEstimate=(1-Le)*Be+Le*De.fastEstimate;var we=Math.pow(.5,ze/_e.slow);De.slowEstimate=(1-we)*Be+we*De.slowEstimate,De.totalWeight+=ze}function Ee(De,Be,ze){return re.get().streaming.abr.movingAverageMethod!==y.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(_e,Le){var we=_e?J.throughputHalfLife:J.latencyHalfLife,je=_e?V[Le]:ee[Le];if(!je||je.totalWeight<=0)return NaN;var Z=je.fastEstimate/(1-Math.pow(.5,je.totalWeight/we.fast)),le=je.slowEstimate/(1-Math.pow(.5,je.totalWeight/we.slow));return _e?Math.min(Z,le):Math.max(Z,le)}(De,Be):function(_e,Le,we){var je=function(le,ae,se){var Q,Me;if(le?(Q=P[ae],Me=se?3:4):(Q=B[ae],Me=4),Q){if(Me>=Q.length)Me=Q.length;else if(le)for(var be=1;be<Me;++be){var ke=Q[Q.length-be]/Q[Q.length-be-1];if((ke>=1.3||ke<=.7692307692307692)&&(Me+=1)===Q.length)break}}else Me=0;return Me}(_e,Le,we),Z=(_e?P:B)[Le];return je!==0&&Z&&Z.length!==0?(Z=Z.slice(-je)).reduce(function(le,ae){return le+ae})/Z.length:NaN}(De,Be,ze)}function ie(De,Be){return Ee(!0,De,Be)}function me(De){P[De]=P[De]||[],B[De]=B[De]||[],V[De]=V[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[De]=ee[De]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ge(){P={},B={},V={},ee={}}var qe={push:function(De,Be,ze){if(Be.trace&&Be.trace.length){var _e,Le=Be.tresponse.getTime()-Be.trequest.getTime()||1,we=Be._tfinish.getTime()-Be.tresponse.getTime()||1,je=Be.trace.reduce(function(se,Q){return se+Q.b[0]},0),Z=0;if((_e=Be._fileLoaderType&&Be._fileLoaderType===y.Z.FILE_LOADER_TYPES.FETCH?Be.trace.reduce(function(se,Q){return se+Q.d},0):ze?we:Le+we)!==0&&(Z=Math.round(8*je/_e)),Be.cmsd){var le=Be.cmsd.dynamic&&Be.cmsd.dynamic.etp?Be.cmsd.dynamic.etp:null;if(le){var ae=re.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(Z=Z*(1-ae)+le*ae)}}if(me(De),function(se,Q,Me){return se===y.Z.VIDEO?Me<re.get().streaming.cacheLoadThresholds[y.Z.VIDEO]:se===y.Z.AUDIO?Me<re.get().streaming.cacheLoadThresholds[y.Z.AUDIO]:void 0}(De,0,we)){if(P[De].length>0&&!P[De].hasCachedEntries)return;P[De].hasCachedEntries=!0}else P[De]&&P[De].hasCachedEntries&&function(se){delete P[se],delete B[se],delete V[se],delete ee[se],me(se)}(De);P[De].push(Z),fe.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:Z,mediaType:De,httpRequest:Be}),P[De].length>20&&P[De].shift(),B[De].push(Le),B[De].length>20&&B[De].shift(),Se(V[De],Z,.001*we,J.throughputHalfLife),Se(ee[De],Le,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(De,Be){var ze=ie(De,Be);return isNaN(ze)||(ze*=re.get().streaming.abr.bandwidthSafetyFactor),ze},getAverageLatency:function(De){return Ee(!1,De)},reset:ge};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ge(),qe}Wu.__dashjs_factory_name="ThroughputHistory";var Rm=U.Z.getClassFactory(Wu);function Hf(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,se,Q,Me=this.context,be=(0,N.Z)(Me).getInstance(),ke=(0,m.Z)(Me).getInstance();function Re(){ee={},J={},re={},H={},Le={},Z={},le={},ae={},Se===void 0&&(Se=!1),we&&we.reset(),_e=void 0,we=void 0,je=void 0,clearTimeout(fe),fe=null}function he(nt){var mt=nt.request.mediaType,Wt=nt.streamId;if(mt&&Wt&&H[Wt]&&Q.get().streaming.abr.autoSwitchBitrate[mt]){var xt=H[Wt][mt];if(xt){var en=Hh(Me).create({abrController:L,streamProcessor:xt,currentRequest:nt.request,useBufferOccupancyABR:Z[mt],useL2AABR:le[mt],useLoLPABR:ae[mt],videoModel:ge}),Jt=B.shouldAbandonFragment(en,Wt);Jt.quality>ua.Z.NO_CHANGE&&xt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:nt.request.index})[0]&&(re[Wt][mt].state=D.Z.ABANDON_LOAD,Le[Wt][mt].reset(),Le[Wt][mt].push({oldValue:Je(mt,Wt),newValue:Jt.quality,confidence:1,reason:Jt.reason}),ht(mt,V.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(fe),fe=setTimeout(function(){re[Wt][mt].state=D.Z.ALLOW_LOAD,fe=null},Q.get().streaming.abandonLoadTimeout))}}}function xe(nt){nt.mediaType===y.Z.VIDEO&&(_e!==void 0&&we.push(nt.streamId,_e,ge.getPlaybackQuality()),_e=nt.newQuality)}function We(nt){var mt,Wt;nt.metric!==D.Z.HTTP_REQUEST||!nt.value||nt.value.type!==it.w.MEDIA_SEGMENT_TYPE||nt.mediaType!==y.Z.AUDIO&&nt.mediaType!==y.Z.VIDEO||je.push(nt.mediaType,nt.value,Q.get().streaming.abr.useDeadTimeLatency),nt.metric!==D.Z.BUFFER_LEVEL||nt.mediaType!==y.Z.AUDIO&&nt.mediaType!==y.Z.VIDEO||(mt=nt.mediaType,Wt=.001*nt.value.level,Q.get().streaming.abr.ABRStrategy===y.Z.ABR_STRATEGY_DYNAMIC&&function(xt,en){try{var Jt=qe.getStableBufferTime(),Yt=Jt,Dn=.5*Jt,xn=Z[xt],rr=en>(xn?Dn:Yt);Z[xt]=rr,rr!==xn&&(rr?P.info("["+xt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):P.info("["+xt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){P.error(ir)}}(mt,Wt))}function dt(nt,mt){try{var Wt;return ee[mt]=ee[mt]||{},ee[mt].hasOwnProperty(nt)||(ee[mt][nt]=0),Wt=function(xt,en){var Jt=ee[en][xt],Yt=Jt;if(!H[en]||!H[en][xt])return Yt;var Dn=at(xt,en);Dn!==void 0&&(Yt=Math.max(Jt,Dn));var xn=function(rr,ir){try{var It=qe.getAbrBitrateParameter("maxBitrate",rr);return It>-1?kt(H[ir][rr].getMediaInfo(),It,ir):void 0}catch($t){return}}(xt,en);return xn!==void 0&&(Yt=Math.min(Yt,xn)),Yt}(nt,mt),Wt=function(xt,en,Jt){var Yt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?xt:Math.min(xt,Math.round(Yt*Dn))}(Wt,nt,mt),Wt=function(xt,en,Jt){if(en!==y.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return xt;Se||An();var Yt=H[Jt][en].getStreamInfo(),Dn=me.getAdaptationForType(Yt.index,en,Yt).Representation_asArray,xn=xt;if(Ee>0&&ie>0){for(;xn>0&&Dn[xn]&&Ee<Dn[xn].width&&Ee-Dn[xn-1].width<Dn[xn].width-Ee;)xn-=1;for(;xn<Dn.length-1&&Dn[xn].width===Dn[xn+1].width;)xn+=1}return xn}(Wt,nt,mt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&(Wt=function(xt,en,Jt){if(en!=="video")return xt;var Yt=Be.getMaxBitrate(en);if(Yt<0)return xt;var Dn=Gt(Jt,"audio",Je("audio",Jt));Yt-=Dn?Dn.bitrate/1e3:0;var xn=kt(H[Jt][en].getMediaInfo(),Yt,Jt);return P.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Yt),Math.min(xt,xn)}(Wt,nt,mt)),Wt}catch(xt){return}}function at(nt,mt){try{return function(Wt,xt){try{var en=qe.getAbrBitrateParameter("minBitrate",Wt);if(en>-1){var Jt=H[xt][Wt].getMediaInfo(),Yt=Ft(Jt),Dn=kt(Jt,en,xt);return Yt[Dn]&&Dn<Yt.length-1&&Yt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(xn){return}}(nt,mt)}catch(Wt){return}}function Je(nt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return mt||(mt=V.getActiveStreamInfo().id),nt&&H[mt]&&H[mt][nt]&&mt?(J[mt]=J[mt]||{},J[mt].hasOwnProperty(nt)||(J[mt][nt]=0),J[mt][nt]):0}catch(Wt){return 0}}function ht(nt,mt,Wt){var xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(mt&&mt.id&&nt){var en=mt.id,Jt=Je(nt,en);(0,pe.SE)(Wt);var Yt=dt(nt,en);Wt!==Jt&&Wt>=0&&Wt<=Yt&&Bt(nt,Jt,Wt,Yt,xt,en)}}function Bt(nt,mt,Wt,xt,en,Jt){if(nt&&H[Jt]&&H[Jt][nt]){var Yt=H[Jt][nt].getStreamInfo(),Dn=Yt&&Yt.manifestInfo&&Yt.manifestInfo.isDynamic,xn=se.getCurrentBufferLevel(nt);P.info("Stream ID: "+Jt+" ["+nt+"] switch from "+mt+" to "+Wt+"/"+xt+" (buffer: "+xn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][nt]=Wt;var rr=Gt(Jt,nt,Wt);ke.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:mt,newQuality:Wt,reason:en,streamInfo:Yt,bitrateInfo:rr,maxIdx:xt,mediaType:nt},{streamId:Yt.id,mediaType:nt});var ir=je.getAverageThroughput(nt,Dn);isNaN(ir)||ze.setSavedBitrateSettings(nt,ir)}}function Gt(nt,mt,Wt){if(mt&&H&&H[nt]&&H[nt][mt]){var xt=Ft(H[nt][mt].getMediaInfo());return xt[Wt]?xt[Wt]:null}return null}function kt(nt,mt,Wt){var xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=nt&&nt.type?H[Wt][nt.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&xt&&en&&en.fragmentDuration){xt/=1e3;var Jt=en.fragmentDuration;if(xt>Jt)return 0;var Yt=xt/Jt;mt*=1-Yt}for(var Dn=Ft(nt),xn=Dn.length-1;xn>=0;xn--){var rr=Dn[xn];if(1e3*mt>=rr.bitrate)return xn}return 0}function Ft(nt){var mt=[];if(!nt||!nt.bitrateList)return mt;for(var Wt,xt=nt.bitrateList,en=nt.type,Jt=0,Yt=xt.length;Jt<Yt;Jt++)(Wt=new Lu).mediaType=en,Wt.qualityIndex=Jt,Wt.bitrate=xt[Jt].bandwidth,Wt.width=xt[Jt].width,Wt.height=xt[Jt].height,Wt.scanType=xt[Jt].scanType,mt.push(Wt);return mt}function An(){if(ge){var nt=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Ee=ge.getClientWidth()*nt,ie=ge.getClientHeight()*nt}}return L={initialize:function(){we=Kh(Me).create(),je=Rm(Me).create({settings:Q}),(B=(0,Rc.Z)(Me).create({dashMetrics:se,customParametersModel:De,mediaPlayerModel:qe,settings:Q})).initialize(),ke.on(_.Z.QUALITY_CHANGE_RENDERED,xe,L),ke.on(_.Z.METRIC_ADDED,We,L),ke.on(T.Z.LOADING_PROGRESS,he,L)},isPlayingAtTopQuality:function(nt){var mt=nt?nt.id:null,Wt=Je(y.Z.AUDIO,mt),xt=Je(y.Z.VIDEO,mt);return Wt===dt(y.Z.AUDIO,mt)&&xt===dt(y.Z.VIDEO,mt)},updateTopQualityIndex:function(nt){var mt=nt.type,Wt=nt.streamInfo.id,xt=nt.representationCount-1;return ee[Wt]=ee[Wt]||{},ee[Wt][mt]=xt,xt},clearDataForStream:function(nt){we&&we.clearForStream(nt),H[nt]&&delete H[nt],Le[nt]&&delete Le[nt],re[nt]&&delete re[nt]},getThroughputHistory:function(){return je},getBitrateList:Ft,getQualityForBitrate:kt,getTopBitrateInfoFor:function(nt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(mt||(mt=V.getActiveStreamInfo().id),nt&&H&&H[mt]&&H[mt][nt]){var Wt=dt(nt,mt),xt=Ft(H[mt][nt].getMediaInfo());return xt[Wt]?xt[Wt]:null}return null},getMinAllowedIndexFor:at,getMaxAllowedIndexFor:dt,getInitialBitrateFor:function(nt,mt){if(function(){if(!ze||!ze.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}(),nt===y.Z.TEXT)return NaN;var Wt=ze.getSavedBitrateSettings(nt),xt=qe.getAbrBitrateParameter("initialBitrate",nt),en=Q.get().streaming.abr.initialRepresentationRatio[nt];if(xt===-1)if(en>-1){var Jt=H[mt][nt].getStreamInfo(),Yt=me.getAdaptationForType(Jt.index,nt,Jt).Representation_asArray;xt=Array.isArray(Yt)?Yt[Math.max(Math.round(Yt.length*en)-1,0)].bandwidth/1e3:0}else xt=isNaN(Wt)?nt===y.Z.VIDEO?1e3:100:Wt;return xt},getQualityFor:Je,getAbandonmentStateFor:function(nt,mt){return re[nt]&&re[nt][mt]?re[nt][mt].state:null},setPlaybackQuality:ht,checkPlaybackQuality:function(nt,mt){try{if(!(nt&&H&&H[mt]&&H[mt][nt]))return!1;if(we){var Wt=ge.getPlaybackQuality();Wt&&we.push(mt,_e,Wt)}if(!Q.get().streaming.abr.autoSwitchBitrate[nt])return!1;var xt=Je(nt,mt),en=Hh(Me).create({abrController:L,switchHistory:Le[mt][nt],droppedFramesHistory:we,streamProcessor:H[mt][nt],currentValue:xt,useBufferOccupancyABR:Z[nt],useL2AABR:le[nt],useLoLPABR:ae[nt],videoModel:ge}),Jt=at(nt,mt),Yt=dt(nt,mt),Dn=B.getMaxQuality(en),xn=Dn.quality;return Jt!==void 0&&(xn>ua.Z.NO_CHANGE?xn:xt)<Jt&&(xn=Jt),xn>Yt&&(xn=Yt),Le[mt][nt].push({oldValue:xt,newValue:xn}),xn>ua.Z.NO_CHANGE&&xn!==xt&&(re[mt][nt].state===D.Z.ALLOW_LOAD||xn<xt)&&(Bt(nt,xt,xn,Yt,Dn.reason,mt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(nt){Se=nt},registerStreamType:function(nt,mt){var Wt=mt.getStreamInfo().id;H[Wt]||(H[Wt]={}),Le[Wt]||(Le[Wt]={}),re[Wt]||(re[Wt]={}),Le[Wt][nt]=pi(Me).create(),H[Wt][nt]=mt,re[Wt][nt]={},re[Wt][nt].state=D.Z.ALLOW_LOAD,function(xt){var en=Q.get().streaming.abr.ABRStrategy;en===y.Z.ABR_STRATEGY_L2A?(Z[xt]=!1,ae[xt]=!1,le[xt]=!0):en===y.Z.ABR_STRATEGY_LoLP?(Z[xt]=!1,ae[xt]=!0,le[xt]=!1):en===y.Z.ABR_STRATEGY_BOLA?(Z[xt]=!0,ae[xt]=!1,le[xt]=!1):en===y.Z.ABR_STRATEGY_THROUGHPUT?(Z[xt]=!1,ae[xt]=!1,le[xt]=!1):en===y.Z.ABR_STRATEGY_DYNAMIC&&(Z[xt]=!(!Z||!Z[xt])&&Z[xt],ae[xt]=!1,le[xt]=!1)}(nt),nt===y.Z.VIDEO&&An()},unRegisterStreamType:function(nt,mt){try{H[nt]&&H[nt][mt]&&delete H[nt][mt],Le[nt]&&Le[nt][mt]&&delete Le[nt][mt],re[nt]&&re[nt][mt]&&delete re[nt][mt]}catch(Wt){}},setConfig:function(nt){nt&&(nt.streamController&&(V=nt.streamController),nt.domStorage&&(ze=nt.domStorage),nt.mediaPlayerModel&&(qe=nt.mediaPlayerModel),nt.customParametersModel&&(De=nt.customParametersModel),nt.cmsdModel&&(Be=nt.cmsdModel),nt.dashMetrics&&(se=nt.dashMetrics),nt.adapter&&(me=nt.adapter),nt.videoModel&&(ge=nt.videoModel),nt.settings&&(Q=nt.settings))},reset:function(){Re(),ke.off(T.Z.LOADING_PROGRESS,he,L),ke.off(_.Z.QUALITY_CHANGE_RENDERED,xe,L),ke.off(_.Z.METRIC_ADDED,We,L),B&&B.reset()}},P=be.getLogger(L),Re(),L}Hf.__dashjs_factory_name="AbrController";var Vh=U.Z.getSingletonFactory(Hf);Vh.QUALITY_DEFAULT=0,U.Z.updateSingletonFactory(Hf.__dashjs_factory_name,Vh);var Wn=Vh,xm=new Map([[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function xc(){var L,P,B,V,ee,J,H,re,fe=this.context,Se=(0,m.Z)(fe).getInstance(),Ee=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function me(){return Ee.length>0}function ge(){if(B&&me()&&B.playbackRate===0){var we=document.createEvent("Event");we.initEvent("waiting",!0,!1),B.dispatchEvent(we)}}function qe(we,je){B&&B.addEventListener(we,je)}function De(we,je){B&&B.removeEventListener(we,je)}function Be(){return B?B.readyState:NaN}function ze(){return B?B.buffered:null}function _e(we,je,Z,le,ae){if(B){for(var se=0;se<B.textTracks.length;se++)if(B.textTracks[se].kind===we&&(!je||B.textTracks[se].label==je)&&B.textTracks[se].language===Z&&B.textTracks[se].isTTML===le&&B.textTracks[se].isEmbedded===ae)return B.textTracks[se]}return null}function Le(we,je){return we===y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Be()>=we?(je(),null):function(Z,le){var ae=function se(){De(Z,se),le(Z)};return qe(Z,ae),{func:ae,event:Z}}(xm.get(we),je)}return L={addEventListener:qe,addTextTrack:function(we,je,Z,le,ae){if(!B)return null;var se=_e(we,je,Z,le,ae);return se||((se=B.addTextTrack(we,je,Z)).isEmbedded=ae,se.isTTML=le),se},appendChild:function(we){B&&(B.appendChild(we),we.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=we.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=we.isEmbedded))},getBufferRange:ze,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var we="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,je=null;return"getVideoPlaybackQuality"in B?je=B.getVideoPlaybackQuality():we&&(je={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),je},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Be,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:_e,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(V)?B.currentTime:V:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().left-we.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var we=B.parentNode.host||B.parentNode;return we?B.getBoundingClientRect().top-we.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){Se.on(T.Z.PLAYBACK_PLAYING,ge,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(V):null},isStalled:me,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var we=B.play();we&&we.catch&&typeof Promise<"u"&&we.catch(function(je){je.name==="NotAllowedError"&&Se.trigger(T.Z.PLAYBACK_NOT_ALLOWED),P.warn("Caught pending play exception - continuing (".concat(je,")"))})}},removeChild:function(we){B&&B.removeChild(we)},removeEventListener:De,reset:function(){clearTimeout(re),Se.off(T.Z.PLAYBACK_PLAYING,ge,this)},setCurrentTime:function(we,je){B&&(ee&&ee.func&&ee.event&&De(ee.event,ee.func),V=we,ee=Le(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==V)try{V=je?function(Z){var le=ze(),ae=Z,se=9999999999;if(le)for(var Q=0;Q<le.length;Q++){var Me=le.start(Q),be=le.end(Q),ke=Math.abs(Me-Z),Re=Math.abs(be-Z);if(Z>=Me&&Z<=be)return Z;ke<se&&(se=ke,ae=Me),Re<se&&(se=Re,ae=be)}return ae}(V):V,isNaN(V)||(B.currentTime=V),V=NaN}catch(Z){B.readyState===0&&Z.code===Z.INVALID_STATE_ERR&&(re=setTimeout(function(){B.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(we){if(!(we==null||we&&/^(VIDEO|AUDIO)$/i.test(we.nodeName)))throw"element is not video or audio DOM type!";(B=we)&&(B.preload="auto")},setPlaybackRate:function(we){var je=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!je&&B.readyState<=2&&we>0?B.addEventListener("canplay",ie):B.playbackRate=we)},setSource:function(we){B&&(we?B.src=we:(B.removeAttribute("src"),B.load()))},setStallState:function(we,je){(function(Z,le){le?function(ae){ae!==null&&B&&!B.seeking&&Ee.indexOf(ae)===-1&&Ee.push(ae)}(Z):function(ae){var se=Ee.indexOf(ae);ae!==null&&se!==-1&&Ee.splice(se,1)}(Z)})(we,je)},setTTMLRenderingDiv:function(we){(J=we).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(we){H=we},waitForReadyState:Le,setDisableRemotePlayback:function(we){B&&(B.disableRemotePlayback=we)}},P=(0,N.Z)(fe).getInstance().getLogger(L),V=NaN,L}xc.__dashjs_factory_name="VideoModel";var Sr=U.Z.getSingletonFactory(xc),Ll=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],mu="dashjs_?_bitrate",Kr="dashjs_?_settings",Ko="localStorage",Oi="lastBitrate",Nm="lastMediaSettings";function zh(L){L=L||{};var P,B,V,ee=this.context,J=L.settings;function H(Ee){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[Ee])}catch(me){return B.warn("DOMStorage access denied: "+me.message),V}if(!ie||Ee!==Ko)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(me){B.warn("DOMStorage is supported, but cannot be used: "+me.message)}return V}function re(){var Ee=6e5;return Math.round(new Date().getTime()/Ee)*Ee}function fe(Ee,ie){return H(Ee)&&J.get().streaming[ie+"CachingInfo"].enabled}function Se(){if(!J)throw new Error(y.Z.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(Ee){if(Se(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(fe(Ko,Oi)){var me=mu.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,De=parseFloat(ge.bitrate);isNaN(De)||qe?qe&&localStorage.removeItem(me):(ie=De,B.debug("Last saved bitrate for "+Ee+" was "+De))}catch(Be){return null}}return ie},setSavedBitrateSettings:function(Ee,ie){if(fe(Ko,Oi)&&ie){var me=mu.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({bitrate:ie.toFixed(3),timestamp:re()}))}catch(ge){B.error(ge.message)}}},getSavedMediaSettings:function(Ee){if(Se(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(fe(Ko,Nm)){var me=Kr.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(me))||{},qe=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ge.settings,qe&&(localStorage.removeItem(me),ie=null)}catch(De){return null}}return ie},setSavedMediaSettings:function(Ee,ie){if(fe(Ko,Nm)){var me=Kr.replace(/\?/,Ee);try{localStorage.setItem(me,JSON.stringify({settings:ie,timestamp:re()}))}catch(ge){B.error(ge.message)}}}},B=(0,N.Z)(ee).getInstance().getLogger(P),H(Ko)&&Ll.forEach(function(Ee){var ie=localStorage.getItem(Ee.oldKey);if(ie){localStorage.removeItem(Ee.oldKey);try{localStorage.setItem(Ee.newKey,ie)}catch(me){B.error(me.message)}}}),P}zh.__dashjs_factory_name="DOMStorage";var PE=U.Z.getSingletonFactory(zh),Mm=S(2032),Yh=S(2011);function Nc(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge=this.context;function qe(_e,Le,we,je){var Z=null,le=_e?me.resolve(_e.path):null,ae=je||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Le};P.debug("Start searching for initialization.");var se=ze(ae);re.load({request:se,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(Z=V.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,qe(_e,Le,we,ae);_e.range=Z,we(_e)},error:function(){we(_e)}}),P.debug("Perform init search: "+ae.url)}function De(_e,Le,we,je,Z,le){if(we&&(we.start===void 0||we.end===void 0)){var ae=we?we.toString().split("-"):null;we=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}Z=Z||Be;var se=null,Q=null,Me=!!we,be=_e?me.resolve(_e.path):null,ke={init:!1,url:be?be.url:void 0,range:Me?we:{start:0,end:1500},searching:!Me,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:Le},Re=ze(ke);re.load({request:Re,success:function(he){var xe=ke.bytesToLoad,We=he.byteLength;if(ke.bytesLoaded=ke.range.end-ke.range.start,se=V.parse(he),(Q=se.getBox("sidx"))&&Q.isComplete){var dt,at,Je=Q.references;if(Je!=null&&Je.length>0&&(dt=Je[0].reference_type===1),dt){var ht,Bt,Gt,kt;P.debug("Initiate multiple SIDX load."),ke.range.end=ke.range.start+Q.size;var Ft=[],An=0,nt=(Q.offset||ke.range.start)+Q.size,mt=function(xt){xt?(Ft=Ft.concat(xt),++An>=Bt&&(Ft.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),Z(Ft,_e,je))):Z(null,_e,je)};for(ht=0,Bt=Je.length;ht<Bt;ht++)Gt=nt,kt=nt+Je[ht].referenced_size-1,nt+=Je[ht].referenced_size,De(_e,Le,{start:Gt,end:kt},je,mt,ke)}else P.debug("Parsing segments from SIDX. representation "+Le+" - id: "+_e.id+" for range : "+ke.range.start+" - "+ke.range.end),at=function(xt,en){for(var Jt,Yt,Dn,xn,rr=xt.references,ir=rr.length,It=xt.timescale,$t=xt.earliest_presentation_time,Zt=en.range.start+xt.offset+xt.first_offset+xt.size,un=[],vn=0;vn<ir;vn++)Dn=rr[vn].subsegment_duration,xn=rr[vn].referenced_size,(Jt=new Yh.Z).duration=Dn,Jt.startTime=$t,Jt.timescale=It,Yt=Zt+xn-1,Jt.mediaRange=Zt+"-"+Yt,un.push(Jt),$t+=Dn,Zt+=xn;return un}(Q,ke),Z(at,_e,je)}else{if(Q)ke.range.start=Q.offset||ke.range.start,ke.range.end=ke.range.start+(Q.size||xe);else{if(We<ke.bytesLoaded)return void Z(null,_e,je);var Wt=se.getLastBox();Wt&&Wt.size?(ke.range.start=Wt.offset+Wt.size,ke.range.end=ke.range.start+xe):ke.range.end+=xe}De(_e,Le,ke.range,je,null,ke)}},error:function(){Z(null,_e,je)}}),P.debug("Perform SIDX load for type ".concat(Le," : ").concat(ke.url," with range ").concat(ke.range.start," - ").concat(ke.range.end))}function Be(_e,Le,we){we({segments:_e,representation:Le,error:_e?void 0:new de.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ze(_e){if(_e.url){var Le=new j.Z;return Le.setInfo(_e),Le}}return L={setConfig:function(_e){_e.baseURLController&&(me=_e.baseURLController),_e.dashMetrics&&(J=_e.dashMetrics),_e.mediaPlayerModel&&(H=_e.mediaPlayerModel),_e.errHandler&&(B=_e.errHandler),_e.boxParser&&(V=_e.boxParser),_e.debug&&(P=_e.debug.getLogger(L)),_e.requestModifier&&(ee=_e.requestModifier),_e.errors&&(fe=_e.errors),_e.urlUtils&&(ie=_e.urlUtils),_e.constants&&(Se=_e.constants),_e.dashConstants&&(Ee=_e.dashConstants)},initialize:function(){re=Ao(ge).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:V,errors:fe,urlUtils:ie,constants:Se,dashConstants:Ee})},loadInitialization:function(_e,Le){return new Promise(function(we){qe(_e,Le,we)})},loadSegments:function(_e,Le,we){return new Promise(function(je){De(_e,Le,we,je)})},reset:function(){re&&(re.abort(),re=null)}}}Nc.__dashjs_factory_name="SegmentBaseLoader";var $a=U.Z.getSingletonFactory(Nc);function Wh(L){var P;L=L||{};var B=new DataView(L.data),V=0;function ee(H,re){var fe=!0,Se=0;if(re===void 0&&(re=!1),H.tag>16777215?(B.getUint32(V)!==H.tag&&(fe=!1),Se=4):H.tag>65535?(256*B.getUint16(V)+B.getUint8(V+2)!==H.tag&&(fe=!1),Se=3):H.tag>255?(B.getUint16(V)!==H.tag&&(fe=!1),Se=2):(B.getUint8(V)!==H.tag&&(fe=!1),Se=1),!fe&&H.required&&!re)throw new Error("required tag not found");return fe&&(V+=Se),fe}function J(H){var re=1,fe=128,Se=-1,Ee=0,ie=B.getUint8(V),me=0;for(me=0;me<8;me+=1){if((ie&fe)===fe){Ee=H===void 0?ie&~fe:ie,Se=me;break}fe>>=1}for(me=0;me<Se;me+=1,re+=1)Ee=Ee<<8|255&B.getUint8(V+re);return V+=re,Ee}return P={getPos:function(){return V},setPos:function(H){V=H},consumeTag:ee,consumeTagAndSize:function(H,re){var fe=ee(H,re);return fe&&J(),fe},parseTag:function(H){var re;return ee(H),re=J(),P[H.parse](re)},skipOverElement:function(H,re){var fe,Se=ee(H,re);return Se&&(fe=J(),V+=fe),Se},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var re;switch(H){case 4:re=B.getFloat32(V),V+=4;break;case 8:re=B.getFloat64(V),V+=8}return re},getMatroskaUint:function(H){if(H>4)return function(Se){for(var Ee=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,me=0;me<Se;me+=1){if(ie>Ee)throw new Error("Value exceeds safe integer limit");ie*=256;var ge=B.getUint8(V+me);if(ie>Number.MAX_SAFE_INTEGER-ge)throw new Error("Value exceeds safe integer limit");ie+=ge}return V+=Se,ie}(H);for(var re=0,fe=0;fe<H;fe+=1)re<<=8,re|=255&B.getUint8(V+fe);return V+=H,re>>>0},moreData:function(){return V<B.byteLength}}}Wh.__dashjs_factory_name="EBMLParser";var Mc=U.Z.getClassFactory(Wh);function $u(){var L,P,B,V,ee,J,H,re,fe,Se,Ee=this.context;function ie(me){var ge=new j.Z;return ge.setInfo(me),ge}return L={setConfig:function(me){if(!(me.baseURLController&&me.dashMetrics&&me.mediaPlayerModel&&me.errHandler))throw new Error(y.Z.MISSING_CONFIG_ERROR);Se=me.baseURLController,J=me.dashMetrics,H=me.mediaPlayerModel,V=me.errHandler,fe=me.errors,P=me.debug.getLogger(L),ee=me.requestModifier},initialize:function(){re=Ao(Ee).create({errHandler:V,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:fe})},loadInitialization:function(me,ge){return new Promise(function(qe){var De=null,Be=me?Se.resolve(me.path):null,ze=me?me.range.split("-"):null,_e={range:{start:ze?parseFloat(ze[0]):null,end:ze?parseFloat(ze[1]):null},request:De,url:Be?Be.url:void 0,init:!0,mediaType:ge};P.info("Start loading initialization."),De=ie(_e),re.load({request:De,success:function(){qe(me)},error:function(){qe(me)}}),P.debug("Perform init load: "+_e.url)})},loadSegments:function(me,ge,qe){return new Promise(function(De){var Be=null,ze=me?Se.resolve(me.path):null,_e=ze?ze.url:void 0;Be=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Be,url:_e,init:!1,mediaType:ge}),P.debug("Parsing ebml header"),re.load({request:Be,success:function(Le){(function(we,je,Z,le){if(we&&we.byteLength!==0){var ae,se,Q,Me,be=Mc(Ee).create({data:we}),ke=Z?Z.split("-"):null,Re=null,he={url:je,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:Re};for(P.debug("Parse EBML header: "+he.url),be.skipOverElement(B.EBML),be.consumeTag(B.Segment),Q=be.getMatroskaCodedNum(),Q+=be.getPos(),Me=be.getPos();be.moreData()&&!be.consumeTagAndSize(B.Segment.Info,!0);)if(!(be.skipOverElement(B.Segment.SeekHead,!0)||be.skipOverElement(B.Segment.Tracks,!0)||be.skipOverElement(B.Segment.Cues,!0)||be.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var xe=be.getMatroskaCodedNum(!0),We=be.getMatroskaCodedNum();xe===B.Segment.Info.Duration.tag?ae=be[B.Segment.Info.Duration.parse](We):be.setPos(be.getPos()+We)}Re=ie(he),re.load({request:Re,success:function(dt){se=function(at,Je,ht,Bt){var Gt,kt,Ft,An,nt,mt,Wt,xt;for(Ft=[],nt=0,mt=(kt=function(en){var Jt,Yt,Dn=[],xn=Mc(Ee).create({data:en});for(xn.consumeTagAndSize(B.Segment.Cues);xn.moreData()&&xn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=xn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];xn.moreData()&&xn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=xn.getMatroskaCodedNum(),ir=xn.getPos();if((Yt={}).Track=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Yt.Track===0)throw new Error("Cue track cannot be 0");Yt.ClusterPosition=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Yt),xn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(at)).length;nt<mt;nt+=1)An=new Yh.Z,Gt=nt<kt.length-1?kt[nt+1].CueTime-kt[nt].CueTime:Bt-kt[nt].CueTime,An.duration=Gt,An.startTime=kt[nt].CueTime,An.timescale=1e3,Wt=kt[nt].CueTracks[0].ClusterPosition+Je,xt=nt<kt.length-1?kt[nt+1].CueTracks[0].ClusterPosition+Je-1:ht-1,An.mediaRange=Wt+"-"+xt,Ft.push(An);return P.debug("Parsed cues: "+Ft.length+" cues."),Ft}(dt,Me,Q,ae),le(se)},error:function(){P.error("Download Error: Cues "+he.url),le(null)}}),P.debug("Perform cues load: "+he.url+" bytes="+he.range.start+"-"+he.range.end)}else le(null)})(Le,_e,qe,function(we){De({segments:we,representation:me,error:we?void 0:new de.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){De({representation:me,error:new de.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){re&&(re.abort(),re=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}$u.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=U.Z.getSingletonFactory($u);function Kf(L){L=L||{};var P,B,V,ee=this.context,J=L.eventBus,H=L.events,re=L.dashMetrics,fe=L.mediaPlayerModel,Se=L.errHandler,Ee=L.baseURLController,ie=L.debug,me=L.boxParser,ge=L.requestModifier,qe=L.errors;function De(Be){return(Be?Be.split("/")[1]:"").toLowerCase()==="webm"}return P={initialize:function(){B.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Be){return De(Be.representation.mimeType)?V.loadInitialization(Be.representation,Be.mediaType):B.loadInitialization(Be.representation,Be.mediaType)},getSegmentList:function(Be){return De(Be.mimeType)?V.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null):B.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null)},reset:function(){B.reset(),V.reset()}},B=$a(ee).getInstance(),V=jr(ee).getInstance(),B.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:fe,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,boxParser:me,requestModifier:ge}),V.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:fe,errHandler:Se,eventBus:J,events:H,errors:qe,debug:ie,requestModifier:ge}),P}Kf.__dashjs_factory_name="SegmentBaseController";var OE=U.Z.getSingletonFactory(Kf),kl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Dc=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Fs=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Dm(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var kr=function(){function L(V){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=V[0]=="/",this.path=V.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},re=J.indexOf("[");if(re!=-1){H.name=J.substring(0,re);var fe=J.substring(re+1,J.length-1);ee.valid=ee.valid&&fe.indexOf("[")==-1;var Se=fe.indexOf("=");Se!=-1?(H.attribute={name:fe.substring(1,Se),value:fe.substring(Se+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(fe,10)-1}return H})}var P,B;return P=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,ee){for(var J=null,H=V,re=1,fe="MPD";re<this.path.length&&H!==null;){J=H;var Se=this.path[re];if(fe=Se.name,re!==this.path.length-1||!fe.startsWith("@")&&fe!=="text()"){var Ee=J[fe+"_asArray"]||[];Ee.length===0&&J[fe]&&Ee.push(J[fe]),Se.position?H=Ee[Se.position]||null:Se.attribute?function(){var ie=Se.attribute;H=Ee.filter(function(me){return me[ie.name]==ie.value})[0]||null}():H=Ee[0]||null}re++}return H===null?null:fe.startsWith("@")?{name:fe.substring(1),leaf:H,target:H}:fe==="text()"?{name:"__text",leaf:H,target:H}:{name:fe,leaf:H,target:ee?J:H}}}])&&Dm(P.prototype,B),L}();function yr(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var vu=function(){function L(V,ee,J){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=V,this.xpath=ee,this.value=J,this.position=null}var P,B;return P=L,(B=[{key:"getMpdTarget",value:function(V){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,ee)}}])&&yr(P.prototype,B),L}();function wi(){var L,P,B=this.context;return L={getIsPatch:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(V[v.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[v.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[v.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return P.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],re=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return P.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;re="".concat(re,"/").concat(H.type)}var fe=new kr(re);if(!fe.isValid())return P.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(re)),null;var Se=null;fe.findsAttribute()||fe.findsTextReplace()?Se=H.__text||"":J!=="remove"&&(Se=H.__children.reduce(function(ie,me){var ge=Object.keys(me)[0];return ge!=="#text"&&(ie[ge]=ie[ge]||[],ie[ge].push(me[ge])),ie},{}));var Ee=new vu(J,fe,Se);return J==="add"&&(Ee.position=H.pos),Ee}).filter(function(ee){return!!ee}):[]}},P=(0,N.Z)(B).getInstance().getLogger(L),L}wi.__dashjs_factory_name="PatchManifestModel";var $h=U.Z.getSingletonFactory(wi);function Xu(){var L,P,B,V,ee,J,H,re=this.context;function fe(ae,se,Q){var Me,be=P.getAdaptationsForType(V[0].mpd.manifest,ae,se);if(!be||be.length===0)return null;if(be.length>1&&Q){var ke=ie(Q,se);if(ee[Q.id]&&ee[Q.id][se]){for(var Re=0,he=be.length;Re<he;Re++)if(Se(ee[Q.id][se],ke[Re]))return be[Re]}for(var xe=0,We=be.length;xe<We;xe++)if(Me=be[xe],P.getRolesForAdaptation(Me).filter(function(dt){return dt.value===v.Z.MAIN})[0])return be[xe]}return be[0]}function Se(ae,se){if(!ae||!se)return!1;var Q=ae.id===se.id,Me=ae.codec===se.codec,be=ae.viewpoint===se.viewpoint,ke=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(se.viewpointsWithSchemeIdUri),Re=ae.lang===se.lang,he=ae.roles.toString()===se.roles.toString(),xe=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(se.rolesWithSchemeIdUri),We=ae.accessibility.toString()===se.accessibility.toString(),dt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(se.accessibilitiesWithSchemeIdUri),at=ae.audioChannelConfiguration.toString()===se.audioChannelConfiguration.toString(),Je=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(se.audioChannelConfigurationsWithSchemeIdUri);return Q&&Me&&be&&ke&&Re&&he&&xe&&We&&dt&&at&&Je}function Ee(ae,se,Q,Me,be,ke){var Re,he,xe,We,dt,at,Je=[];if(!Me||Me.length===0)return[];var ht=P.getAdaptationsForPeriod(se);for(We=0,at=Me.length;We<at;We++)if(Re=Me[We],he=_e(ht[xe=P.getIndexForAdaptation(Re,ae,Q.index)]),ke){var Bt=he.accessibility.length;for(dt=0;dt<Bt;dt++)if(he){var Gt=he.accessibility[dt];if(Gt.indexOf("cea-608:")===0){var kt=Gt.substring(8).split(";");if(kt[0].substring(0,2)==="CC")for(dt=0;dt<kt.length;dt++)he||(he=_e.call(this,ht[xe])),Le(he,kt[dt].substring(0,3),kt[dt].substring(4)),Je.push(he),he=null;else for(dt=0;dt<kt.length;dt++)he||(he=_e.call(this,ht[xe])),Le(he,"CC"+(dt+1),kt[dt]),Je.push(he),he=null}else Gt.indexOf("cea-608")===0&&(Le(he,J.CC1,"eng"),Je.push(he),he=null)}}else be===J.IMAGE?(he.type=J.IMAGE,Je.push(he),he=null):he&&Je.push(he);return Je}function ie(ae,se,Q){var Me=V,be=Q,ke=[];if(be)je(),Me=me(be);else{if(!(V.length>0))return ke;be=V[0].mpd.manifest}var Re=ze(ae,Me),he=P.getAdaptationsForType(be,ae?ae.index:null,se);return ke=Ee(be,Re,ae,he,se),se===J.TEXT&&(he=P.getAdaptationsForType(be,ae?ae.index:null,J.VIDEO),ke=ke.concat(Ee(be,Re,ae,he,se,!0))),ke}function me(ae){var se=ge(ae);return P.getRegularPeriods(se)}function ge(ae){var se=De(ae);return P.getMpd(se)}function qe(){V=[],ee={}}function De(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Be(ae){try{var se=ze(ae.streamInfo,V),Q=P.getAdaptationsForPeriod(se);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Me){return null}}function ze(ae,se){for(var Q=se.length,Me=0;Me<Q;Me++){var be=se[Me];if(ae&&ae.id===be.id)return be}return null}function _e(ae){if(!ae)return null;var se,Q,Me,be,ke,Re=new Dc,he=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(Re.id=ae.id,Re.index=ae.index,Re.type=ae.type,Re.streamInfo=we(ae.period),Re.representationCount=P.getRepresentationCount(he),Re.labels=P.getLabelsForAdaptation(he),Re.lang=P.getLanguageForAdaptation(he),Re.segmentAlignment=P.getSegmentAlignment(he),Re.subSegmentAlignment=P.getSubSegmentAlignment(he),se=P.getViewpointForAdaptation(he),Re.viewpoint=se.length?se[0].value:void 0,Re.viewpointsWithSchemeIdUri=se,ke=P.getAccessibilityForAdaptation(he),Re.accessibility=ke.map(function(Je){var ht=Je.value,Bt=ht;return Je.schemeIdUri&&Je.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(Bt=ht?"cea-608:"+ht:"cea-608",Re.embeddedCaptions=!0),Bt}),Re.accessibilitiesWithSchemeIdUri=ke,Q=P.getAudioChannelConfigurationForAdaptation(he),Re.audioChannelConfiguration=Q.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Q,Re.audioChannelConfiguration.length===0&&Array.isArray(he.Representation_asArray)&&he.Representation_asArray.length>0&&(Me=P.getAudioChannelConfigurationForRepresentation(he.Representation_asArray[0]),Re.audioChannelConfiguration=Me.map(function(Je){return Je.value}),Re.audioChannelConfigurationsWithSchemeIdUri=Me),be=P.getRolesForAdaptation(he),Re.roles=be.map(function(Je){return Je.value}),Re.rolesWithSchemeIdUri=be,Re.codec=P.getCodec(he),Re.mimeType=P.getMimeType(he),Re.contentProtection=P.getContentProtectionData(he),Re.bitrateList=P.getBitrateListForAdaptation(he),Re.selectionPriority=P.getSelectionPriority(he),Re.contentProtection){var xe=Re.contentProtection.map(function(Je){return P.getKID(Je)}).filter(function(Je){return Je!==null});if(xe.length){var We=xe[0];Re.contentProtection.forEach(function(Je){Je.keyId=We})}}if(Re.isText=P.getIsText(he),Re.supplementalProperties=P.getSupplementalPropertiesForAdaptation(he),(!Re.supplementalProperties||Object.keys(Re.supplementalProperties).length===0)&&Array.isArray(he.Representation_asArray)&&he.Representation_asArray.length>0){var dt=he.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesForRepresentation(Je)});dt.every(function(Je){return JSON.stringify(Je)===JSON.stringify(dt[0])})&&(Re.supplementalProperties=dt[0])}if(Re.supplementalPropertiesAsArray=P.getSupplementalPropertiesAsArrayForAdaptation(he),(!Re.supplementalPropertiesAsArray||Re.supplementalPropertiesAsArray.length===0)&&Array.isArray(he.Representation_asArray)&&he.Representation_asArray.length>0){var at=he.Representation_asArray.map(function(Je){return P.getSupplementalPropertiesAsArrayForRepresentation(Je)});at.every(function(Je){return JSON.stringify(Je)===JSON.stringify(at[0])})&&(Re.supplementalPropertiesAsArray=at[0])}return Re.essentialProperties=P.getEssentialPropertiesForAdaptation(he),Re.essentialPropertiesAsArray=P.getEssentialPropertiesAsArrayForAdaptation(he),Re.isFragmented=P.getIsFragmented(he),Re.isEmbedded=!1,Re}function Le(ae,se,Q){ae.id=se,ae.index=100+parseInt(se.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Me=yi()(Q);ae.lang=Me||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function we(ae){var se,Q,Me=new Dr;return Me.id=ae.id,Me.index=ae.index,Me.start=ae.start,Me.duration=ae.duration,Me.manifestInfo=(se=ae.mpd,(Q=new Fs).dvrWindowSize=se.timeShiftBufferDepth,Q.loadedTime=se.manifest.loadedTime,Q.availableFrom=se.availabilityStartTime,Q.minBufferTime=se.manifest.minBufferTime,Q.maxFragmentDuration=se.maxSegmentDuration,Q.duration=P.getDuration(se.manifest),Q.isDynamic=P.getIsDynamic(se.manifest),Q.serviceDescriptions=P.getServiceDescriptions(se.manifest),Q.protocol=se.manifest.protocol,Q),Me.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Me.start+Me.duration-Me.manifestInfo.duration)<1,Me}function je(){if(!J)throw new Error("setConfig function has to be called previously")}function Z(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,se,Q){var Me,be,ke,Re,he;if(ae){for(Me=ae.AdaptationSet_asArray,Re=0;Re<Me.length;Re+=1)for(ke=Me[Re].Representation_asArray,he=0;he<ke.length;he+=1)if(se===(be=ke[he]).id)return Q?he:be}return null}return L={getBandwidthForRepresentation:function(ae,se){var Q;return(Q=le(Z(se),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,se){return function(Q,Me){var be=le(Q,Me,!0);return be!==null?be:-1}(Z(se),ae)},getMaxIndexForBufferType:function(ae,se){return function(Q,Me){var be,ke,Re,he;if(!Q||!Me)return-1;for(ke=Q.AdaptationSet_asArray,he=0;he<ke.length;he+=1)if(Re=(be=ke[he]).Representation_asArray,P.getIsTypeOf(be,Me))return Re.length;return-1}(Z(se),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var se=new kl,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Me=P.getRepresentationFor(ae.index,Q);return se.id=ae.id,se.quality=ae.index,se.bandwidth=P.getBandwidth(Me),se.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),se.MSETimeOffset=ae.MSETimeOffset,se.mediaInfo=_e(ae.adaptation),se}return null},getStreamsInfo:function(ae,se){var Q=[],Me=V;if(ae&&(je(),Me=me(ae)),Me.length>0){(!se||se>Me.length)&&(se=Me.length);for(var be=0;be<se;be++)Q.push(we(Me[be]))}return Q},getMediaInfoForType:function(ae,se){if(V.length===0||!ae)return null;var Q=ze(ae,V);if(!Q)return null;var Me=P.getAdaptationsForPeriod(Q),be=fe(ae.index,se,ae);return be?_e(Me[P.getIndexForAdaptation(be,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:fe,getRealAdaptation:function(ae,se){var Q,Me,be=ze(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Me},getProducerReferenceTimes:function(ae,se){var Q,Me,be=ze(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Me=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Me?P.getProducerReferenceTimesForAdaptation(Me):[]},getRealPeriodByIndex:function(ae){return P.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return P.getEssentialPropertiesForRepresentation(ae)}catch(se){return[]}},getVoRepresentations:function(ae){var se=Be(ae);return P.getRepresentationsForAdaptation(se)},getEventsFor:function(ae,se,Q){var Me=[];if(V.length>0){var be=V[0].mpd.manifest;if(ae instanceof Dr){var ke=ze(ae,V);Me=P.getEventsForPeriod(ke)}else if(ae instanceof Dc){var Re=ze(Q,V);Me=P.getEventStreamForAdaptationSet(be,Be(ae),Re)}else if(ae instanceof kl){var he=ze(Q,V);Me=P.getEventStreamForRepresentation(be,se,he)}}return Me},getEvent:function(ae,se,Q,Me){try{if(!ae||!se||isNaN(Q)||!Me)return null;var be=ae.scheme_id_uri,ke=ae.value;if(!se[be+"/"+ke])return null;var Re,he=new to,xe=ae.timescale||1,We=Me.adaptation.period.start,dt=se[be+"/"+ke],at=isNaN(Me.presentationTimeOffset)?isNaN(dt.presentationTimeOffset)?0:dt.presentationTimeOffset:Me.presentationTimeOffset,Je=ae.presentation_time_delta/xe;Re=ae.version===0?We+Q-at+Je:We-at+Je;var ht=ae.event_duration/xe,Bt=ae.id,Gt=ae.message_data;return he.eventStream=dt,he.eventStream.value=ke,he.eventStream.timescale=xe,he.duration=ht,he.id=Bt,he.calculatedPresentationTime=Re,he.messageData=Gt,he.presentationTimeDelta=Je,he}catch(kt){return null}},getMpd:ge,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&P.setConfig({errHandler:ae.errHandler}),ae.BASE64&&P.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;je(),V=me(ae)},getIsTextTrack:function(ae){return P.getIsText(ae)},getUTCTimingSources:function(){var ae=De();return P.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return P.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var se=ge(ae);return P.getAvailabilityStartTime(se)},getIsTypeOf:function(ae,se){return P.getIsTypeOf(ae,se)},getIsDynamic:function(ae){var se=De(ae);return P.getIsDynamic(se)},getDuration:function(ae){var se=De(ae);return P.getDuration(se)},getRegularPeriods:me,getContentSteering:function(ae){return P.getContentSteering(ae)},getLocation:function(ae){return P.getLocation(ae)},getPatchLocation:function(ae){var se=P.getPatchLocation(ae),Q=P.getPublishTime(ae);return se&&se.length!==0&&Q?se.filter(function(Me){return isNaN(Me.ttl)||Q.getTime()+Me.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return P.getManifestUpdatePeriod(ae,se)},getPublishTime:function(ae){return P.getPublishTime(ae)},getIsDVB:function(ae){return P.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return P.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return P.getRepresentationSortFunction()},getCodec:function(ae,se,Q){return P.getCodec(ae,se,Q)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var se=V.filter(function(Q){return Q.id===ae});return se&&se.length>0?se[0]:null},setCurrentMediaInfo:function(ae,se,Q){ee[ae]=ee[ae]||{},ee[ae][se]=ee[ae][se]||{},ee[ae][se]=Q},isPatchValid:function(ae,se){var Q=P.getId(ae),Me=B.getMpdId(se),be=P.getPublishTime(ae),ke=B.getPublishTime(se),Re=B.getOriginalPublishTime(se);return!!(Q&&Me&&Q==Me&&be&&Re&&be.getTime()==Re.getTime()&&ke&&be.getTime()<ke.getTime())},applyPatchToManifest:function(ae,se){B.getPatchOperations(se).forEach(function(Q){var Me=Q.getMpdTarget(ae);if(Me!==null){var be=Me.name,ke=Me.target,Re=Me.leaf;if(Q.xpath.findsAttribute()||be==="__text")switch(Q.action){case"add":case"replace":ke[be]=Q.value;break;case"remove":delete ke[be]}else{var he=(ke[be+"_asArray"]||[]).indexOf(Re),xe=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete ke[be],he!=-1)){var We=ke[be+"_asArray"];We.splice(he,1),We.length>1?ke[be]=We:We.length==1?ke[be]=We[0]:delete ke[be+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(dt){var at=Q.value[dt],Je=ke[dt+"_asArray"]||[];if(Je.length===0&&ke[dt]&&Je.push(ke[dt]),Je.length===0)Je=at;else{var ht=Je.length;ht=dt==be&&he!=-1?he+(xe?0:1)+(Q.action=="replace"?-1:0):xe?0:Je.length,Je.splice.apply(Je,[ht,0].concat(at))}ke[dt+"_asArray"]=Je,ke[dt]=Je.length==1?Je[0]:Je})}}})},areMediaInfosEqual:Se,reset:qe},P=Vn(re).getInstance(),B=$h(re).getInstance(),qe(),L}Xu.__dashjs_factory_name="DashAdapter";var Pm=U.Z.getSingletonFactory(Xu);function Vf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Fl=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var P,B;return P=L,B=[{key:"round10",value:function(V,ee){return function(J,H,re){return re===void 0||+re==0?Math[J](H):(re=+re,(H=+H)===null||isNaN(H)||typeof re!="number"||re%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-re:-re)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+re:re))))}("round",V,ee)}}],B&&Vf(P,B),L}(),LE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Om=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},Lm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},zf=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=D.Z.BUFFER_EMPTY},Xh=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Ul=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Pc(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var kE=function L(){Pc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Yf=function L(){Pc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},FE=function L(){Pc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Wr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ci=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function yu(L){var P,B,V=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function re(ge){J.trigger(T.Z.METRIC_CHANGED,{mediaType:ge}),H()}function fe(ge,qe,De){J.trigger(T.Z.METRIC_UPDATED,{mediaType:ge,metric:qe,value:De}),re(ge)}function Se(ge,qe,De){J.trigger(T.Z.METRIC_ADDED,{mediaType:ge,metric:qe,value:De}),re(ge)}function Ee(ge,qe){var De=null;return ge&&(B.hasOwnProperty(ge)?De=B[ge]:qe||(De=new LE,B[ge]=De)),De}function ie(ge,qe,De){var Be=Ee(ge);Be!==null&&(Be[qe].push(De),Be[qe].length>V.get().streaming.metrics.maxListDepth&&Be[qe].shift())}function me(ge,qe,De){ie(ge,qe,De),Se(ge,qe,De)}return P={clearCurrentMetricsForType:function(ge){delete B[ge],re(ge)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:Ee,addHttpRequest:function ge(qe,De,Be,ze,_e,Le,we,je,Z,le,ae,se,Q,Me,be,ke,Re){var he=new it.w;Le!=null&&Le!==ze&&(ge(qe,null,Be,ze,_e,null,null,je,Z,null,null,null,Q,null,null,ke,Re),he.actualurl=Le),he.tcpid=De,he.type=Be,he.url=ze,he.range=je,he.trequest=Z,he.tresponse=le,he.responsecode=se,he.cmsd=Re,he._tfinish=ae,he._stream=qe,he._mediaduration=Q,he._quality=_e,he._responseHeaders=Me,he._serviceLocation=we,he._fileLoaderType=ke,be?be.forEach(function(xe){(function(We,dt,at,Je){var ht=new it.O;ht.s=dt,ht.d=at,ht.b=Je,We.trace.push(ht),We.interval||(We.interval=0),We.interval+=at})(he,xe.s,xe.d,xe.b)}):(delete he.interval,delete he.trace),me(qe,D.Z.HTTP_REQUEST,he)},addRepresentationSwitch:function(ge,qe,De,Be,ze){var _e=new Om;_e.t=qe,_e.mt=De,_e.to=Be,ze?_e.lto=ze:delete _e.lto,me(ge,D.Z.TRACK_SWITCH,_e)},addBufferLevel:function(ge,qe,De){var Be=new Lm;Be.t=qe,Be.level=De,me(ge,D.Z.BUFFER_LEVEL,Be)},addBufferState:function(ge,qe,De){var Be=new zf;Be.target=De,Be.state=qe,me(ge,D.Z.BUFFER_STATE,Be)},addDVRInfo:function(ge,qe,De,Be){var ze=new Xh;ze.time=qe,ze.range=Be,ze.manifestInfo=De,me(ge,D.Z.DVR_INFO,ze)},addDroppedFrames:function(ge,qe){var De=new Ul,Be=Ee(ge).DroppedFrames;qe&&(De.time=qe.creationTime,De.droppedFrames=qe.droppedVideoFrames,Be.length>0&&Be[Be.length-1]==De||me(ge,D.Z.DROPPED_FRAMES,De))},addSchedulingInfo:function(ge,qe,De,Be,ze,_e,Le,we,je){var Z=new Wr;Z.mediaType=ge,Z.t=qe,Z.type=De,Z.startTime=Be,Z.availabilityStartTime=ze,Z.duration=_e,Z.quality=Le,Z.range=we,Z.state=je,me(ge,D.Z.SCHEDULING_INFO,Z)},addRequestsQueue:function(ge,qe,De){var Be=new Ci;Be.loadingRequests=qe,Be.executedRequests=De,Ee(ge).RequestsQueue=Be,Se(ge,D.Z.REQUESTS_QUEUE,Be)},addManifestUpdate:function(ge,qe,De,Be,ze,_e,Le,we,je,Z){var le=new kE;le.mediaType=ge,le.type=qe,le.requestTime=De,le.fetchTime=Be,le.availabilityStartTime=ze,le.presentationStartTime=_e,le.clientTimeOffset=Le,le.currentTime=we,le.buffered=je,le.latency=Z,ie(y.Z.STREAM,D.Z.MANIFEST_UPDATE,le),Se(ge,D.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(ge,qe){if(ge){for(var De in qe)ge[De]=qe[De];fe(ge.mediaType,D.Z.MANIFEST_UPDATE,ge)}},addManifestUpdateStreamInfo:function(ge,qe,De,Be,ze){if(ge){var _e=new Yf;_e.id=qe,_e.index=De,_e.start=Be,_e.duration=ze,ge.streamInfo.push(_e),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_STREAM_INFO,ge)}},addManifestUpdateRepresentationInfo:function(ge,qe,De,Be,ze,_e,Le,we){if(ge&&ge.representationInfo){var je=new FE;je.id=qe,je.index=De,je.streamIndex=Be,je.mediaType=ze,je.startNumber=Le,je.fragmentInfoType=we,je.presentationTimeOffset=_e,ge.representationInfo.push(je),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_TRACK_INFO,ge)}},addPlayList:function(ge){ge.trace&&Array.isArray(ge.trace)?ge.trace.forEach(function(qe){qe.hasOwnProperty("subreplevel")&&!qe.subreplevel&&delete qe.subreplevel}):delete ge.trace,me(y.Z.STREAM,D.Z.PLAY_LIST,ge)},addDVBErrors:function(ge){me(y.Z.STREAM,D.Z.DVB_ERRORS,ge)}},B={},P}yu.__dashjs_factory_name="MetricsModel";var Ra=U.Z.getSingletonFactory(yu);function la(L){L=L||{};var P,B,V,ee,J=this.context,H=L.metricsModel;function re(Ee){var ie=H.getMetricsFor(Ee,!0);if(!ie)return null;var me,ge=ie.HttpList,qe=null;if(!ge||ge.length<=0)return null;for(me=ge.length-1;me>=0;){if(ge[me].responsecode){qe=ge[me];break}me--}return qe}function fe(Ee){var ie=H.getMetricsFor(Ee,!0);return ie&&ie.HttpList?ie.HttpList:[]}function Se(Ee,ie){if(!Ee)return null;var me=Ee[ie];return me&&me.length!==0?me[me.length-1]:null}return P={getCurrentRepresentationSwitch:function(Ee){return Se(H.getMetricsFor(Ee,!0),D.Z.TRACK_SWITCH)},getCurrentBufferState:function(Ee){return Se(H.getMetricsFor(Ee,!0),D.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Ee){var ie=Se(H.getMetricsFor(Ee,!0),D.Z.BUFFER_LEVEL);return ie?Fl.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:re,getHttpRequests:fe,getCurrentDroppedFrames:function(){return Se(H.getMetricsFor(y.Z.VIDEO,!0),D.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Ee){return Se(H.getMetricsFor(Ee,!0),D.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Ee){return Se(Ee?H.getMetricsFor(Ee,!0):H.getMetricsFor(y.Z.VIDEO,!0)||H.getMetricsFor(y.Z.AUDIO,!0),D.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Se(H.getMetricsFor(y.Z.STREAM),D.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Ee,ie){if(!ie)return null;var me={},ge=re(Ee);ge&&(me=rn.Z.parseHttpHeaders(ge._responseHeaders));var qe=me[ie.toLowerCase()];return qe===void 0?null:qe},getLatestMPDRequestHeaderValueByID:function(Ee){if(!Ee)return null;var ie,me,ge,qe={};for(ge=(ie=fe(y.Z.STREAM)).length-1;ge>=0;ge--)if((me=ie[ge]).type===it.w.MPD_TYPE){qe=rn.Z.parseHttpHeaders(me._responseHeaders);break}var De=qe[Ee.toLowerCase()];return De===void 0?null:De},addRepresentationSwitch:function(Ee,ie,me,ge,qe){H.addRepresentationSwitch(Ee,ie,me,ge,qe)},addDVRInfo:function(Ee,ie,me,ge){H.addDVRInfo(Ee,ie,me,ge)},updateManifestUpdateInfo:function(Ee){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Ee)},addManifestUpdateStreamInfo:function(Ee){if(Ee){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Ee.id,Ee.index,Ee.start,Ee.duration)}},addManifestUpdateRepresentationInfo:function(Ee,ie){if(Ee){var me=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(me,Ee.id,Ee.index,Ee.streamIndex,ie,Ee.presentationTimeOffset,Ee.startNumber,Ee.fragmentInfoType)}},addManifestUpdate:function(Ee){H.addManifestUpdate(y.Z.STREAM,Ee.type,Ee.requestStartDate,Ee.requestEndDate)},addHttpRequest:function(Ee,ie,me,ge,qe,De){H.addHttpRequest(Ee.mediaType,null,Ee.type,Ee.url,Ee.quality,ie,Ee.serviceLocation||null,Ee.range||null,Ee.requestStartDate,Ee.firstByteDate,Ee.requestEndDate,me,Ee.duration,ge,qe,Ee.fileLoaderType,De)},addSchedulingInfo:function(Ee,ie){H.addSchedulingInfo(Ee.mediaType,new Date,Ee.type,Ee.startTime,Ee.availabilityStartTime,Ee.duration,Ee.quality,Ee.range,ie)},addRequestsQueue:function(Ee,ie,me){H.addRequestsQueue(Ee,ie,me)},addBufferLevel:function(Ee,ie,me){H.addBufferLevel(Ee,ie,me)},addBufferState:function(Ee,ie,me){H.addBufferState(Ee,ie,me)},addDroppedFrames:function(Ee){H.addDroppedFrames(y.Z.VIDEO,Ee)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(Ee){H.addDVBErrors(Ee)},createPlaylistMetrics:function(Ee,ie){(ee=new rt).start=new Date,ee.mstart=Ee,ee.starttype=ie},createPlaylistTraceMetrics:function(Ee,ie,me){B===!0&&(B=!1,(V=new et).representationid=Ee,V.start=new Date,V.mstart=ie,V.playbackspeed=me!==null?me.toString():null)},updatePlayListTraceMetrics:function(Ee){if(V)for(var ie in V)V[ie]=Ee[ie]},pushPlayListTraceMetrics:function(Ee,ie){if(B===!1&&ee&&V&&V.start){var me=V.start,ge=Ee.getTime()-me.getTime();V.duration=ge,V.stopreason=ie,ee.trace.push(V),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Ra(J).getInstance({settings:L.settings}),B=!0,V=null,ee=null,P}la.__dashjs_factory_name="DashMetrics";var Us=U.Z.getSingletonFactory(la);function _r(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Ze.Z)(ee).getInstance();function re(ze){V=ze}function fe(ze,_e,Le,we){var je,Z=_e.adaptation.period.mpd,le=Z.availabilityStartTime;if(we)je=Le&&Z.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*(ze+Z.timeShiftBufferDepth)):Z.availabilityEndTime;else if(Le){var ae=_e.availabilityTimeOffset;je=new Date(le.getTime()+1e3*(ze-ae))}else je=le;return je}function Se(ze,_e){return(ze.getTime()-_e.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function Ee(ze,_e){return ze+(_e.adaptation.period.start-_e.presentationTimeOffset)}function ie(ze){var _e={start:NaN,end:NaN},Le=ze[0].getAdapter().getRegularPeriods()[0],we=Se(new Date,Le);if(!ze||ze.length===0)return{range:_e,now:we};ze.forEach(function(Z){var le=Z.getAdapter(),ae=le.getMediaInfoForType(Z.getStreamInfo(),y.Z.VIDEO)||le.getMediaInfoForType(Z.getStreamInfo(),y.Z.AUDIO),se=le.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(se)if(se.segmentInfoType===v.Z.SEGMENT_TIMELINE)Q=function(be){var ke,Re,he,xe,We=be.adaptation.period.mpd.manifest.Period_asArray[be.adaptation.period.index].AdaptationSet_asArray[be.adaptation.index],dt=P.getRepresentationFor(be.index,We),at=dt.SegmentTemplate||dt.SegmentList,Je=at.SegmentTimeline,ht=at.timescale,Bt=Je.S_asArray,Gt={start:0,end:0},kt=Bt[0].t,Ft=!isNaN(kt),An=Ft?kt:0,nt=0;for(Ft&&(Gt.start=Ee(An/ht,be)),he=0,xe=Bt.length;he<xe;he++)Re=0,(ke=Bt[he]).hasOwnProperty("r")&&(Re=ke.r),nt+=ke.d*(1+Re);return Gt.end=Ee((An+nt)/ht,be),Gt}(se);else{var Me=se.adaptation.period;Q.start=Me.start,Q.end=Math.max(we,Me.start+Me.duration)}!isNaN(Q.start)&&(isNaN(_e.start)||_e.start>Q.start)&&(_e.start=Q.start),!isNaN(Q.end)&&(isNaN(_e.end)||_e.end<Q.end)&&(_e.end=Q.end)}),_e.end=Math.min(we,_e.end);var je=ge(ze,_e.end,!0);return _e.end=isNaN(je)?_e.end:je,_e.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(_e.end)?Math.max(_e.end-Le.mpd.timeShiftBufferDepth,_e.start):_e.start,_e.start=ge(ze,_e.start),{range:_e,now:we}}function me(ze,_e){B=ze-_e.end}function ge(ze,_e){var Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var we=0,je=!1,Z=NaN;!je&&we<ze.length;){var le=ze[we].getStreamInfo();le.start<=_e&&(!isFinite(le.duration)||le.start+le.duration>=_e)?(Z=_e,je=!0):!Le&&le.start>_e&&(isNaN(Z)||le.start<Z)?Z=le.start:Le&&le.start+le.duration<_e&&(isNaN(Z)||le.start+le.duration>Z)&&(Z=le.start+le.duration),we+=1}return Z}catch(ae){return _e}}function qe(ze){ze.offset===void 0||isNaN(ze.offset)||re(ze.offset/1e3)}function De(){V=0,B=0}function Be(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this),De()}return L={initialize:function(){De(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,qe,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:re,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function(ze,_e,Le){return fe(ze,_e,Le)},calcAvailabilityEndTimeFromPresentationTime:function(ze,_e,Le){return fe(ze,_e,Le,!0)},calcPresentationTimeFromWallTime:Se,calcPresentationTimeFromMediaTime:Ee,calcPeriodRelativeTimeFromMpdRelativeTime:function(ze,_e){return _e-ze.adaptation.period.start},calcMediaTimeFromPresentationTime:function(ze,_e){return ze-_e.adaptation.period.start+_e.presentationTimeOffset},calcWallTimeForSegment:function(ze,_e){var Le,we,je;return _e&&(Le=ze.representation.adaptation.period.mpd.suggestedPresentationDelay,we=ze.presentationStartTime+Le,je=new Date(ze.availabilityStartTime.getTime()+1e3*we)),je},calcTimeShiftBufferWindow:function(ze,_e){if(!_e)return function(we){var je={start:NaN,end:NaN},Z=0,le=NaN;return we.forEach(function(ae){var se=ae.getStreamInfo();Z+=se.duration,(isNaN(le)||se.start<le)&&(le=se.start)}),je.start=le,je.end=le+Z,je}(ze);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Le=ie(ze);return me(Le.now,Le.range),Le.range}return function(we){var je={start:NaN,end:NaN};if(!we||we.length===0)return je;var Z=we[0].getAdapter().getRegularPeriods()[0],le=Se(new Date,Z),ae=Z.mpd.timeShiftBufferDepth,se=isNaN(ae)?0:le-ae;if(je.start=ge(we,se),je.end=!isNaN(je.start)&&le<je.start?le:ge(we,le,!0),!isNaN(ae)&&je.end<le-ae&&(je.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(we);if(Q.range.end<je.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.INVALID_DVR_WINDOW}),me(Q.now,Q.range),Q.range}return je}(ze)},reset:Be},P=Vn(ee).getInstance(),Be(),L}_r.__dashjs_factory_name="TimelineConverter";var Eu=U.Z.getSingletonFactory(_r),Wf=S(4593),ca=S(6934);function $f(L){return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},$f(L)}function Xa(L,P){return Xa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Xa(L,P)}function Xf(L,P){return!P||$f(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Qu(L){return Qu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Qu(L)}var Bs=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Xa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Qu(P);if(B){var re=Qu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Xf(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Dc),Ro=S(2295);function Oc(){var L=0;function P(re){for(var fe="",Se=0;Se<re.length;++Se)fe+=re[Se].uchar;return fe.length-fe.replace(/^\s+/,"").length}function B(re){return"left: "+3.125*re.x+"%; top: "+6.66*re.y1+"%; width: "+(100-3.125*re.x)+"%; height: "+6.66*Math.max(re.y2-1-re.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(re){return re==="red"?"rgb(255, 0, 0)":re==="green"?"rgb(0, 255, 0)":re==="blue"?"rgb(0, 0, 255)":re==="cyan"?"rgb(0, 255, 255)":re==="magenta"?"rgb(255, 0, 255)":re==="yellow"?"rgb(255, 255, 0)":re==="white"?"rgb(255, 255, 255)":re==="black"?"rgb(0, 0, 0)":re}function ee(re,fe){var Se=re.videoHeight/15;return fe?"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(fe.foreground?V(fe.foreground):"rgb(255, 255, 255)")+"; font-style: "+(fe.italics?"italic":"normal")+"; text-decoration: "+(fe.underline?"underline":"none")+"; white-space: pre; background-color: "+(fe.background?V(fe.background):"transparent")+";":"font-size: "+Se+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(re){return re.replace(/^\s+/g,"")}function H(re){return re.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(re,fe,Se,Ee){var ie,me,ge=null,qe=!1,De=-1,Be={start:fe,end:Se,spans:[]},ze="style_cea608_white_black",_e={},Le={},we=[];for(ie=0;ie<15;++ie){var je=Ee.rows[ie],Z="",le=null;if(je.isEmpty()===!1){var ae=P(je.chars);ge===null&&(ge={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==De&&qe&&(ge.p.push(Be),Be={start:fe,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge={x:ae,y1:ie,y2:ie+1,p:[]});for(var se=0;se<je.chars.length;++se){var Q=je.chars[se],Me=Q.penState;if(le===null||!Me.equals(le)){Z.trim().length>0&&(Be.spans.push({name:ze,line:Z,row:ie}),Z="");var be="style_cea608_"+Me.foreground+"_"+Me.background;Me.underline&&(be+="_underline"),Me.italics&&(be+="_italics"),Le.hasOwnProperty(be)||(Le[be]=JSON.parse(JSON.stringify(Me))),le=Me,ze=be}Z+=Q.uchar}Z.trim().length>0&&Be.spans.push({name:ze,line:Z,row:ie}),qe=!0,De=ae}else qe=!1,De=-1,ge&&(ge.p.push(Be),Be={start:fe,end:Se,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null)}ge&&(ge.p.push(Be),ge.y2=ie+1,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(we.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null);var ke=[];for(ie=0;ie<we.length;++ie){var Re=we[ie],he="sub_cea608_"+L++,xe=document.createElement("div");xe.id=he;var We=B(Re);xe.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+We;var dt=document.createElement("div");dt.className="paragraph bodyStyle",dt.style.cssText=ee(re);var at=document.createElement("div");at.className="cueUniWrapper",at.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Je=0;Je<Re.p.length;++Je){var ht=Re.p[Je],Bt=0;for(me=0;me<ht.spans.length;++me){var Gt=ht.spans[me];if(Gt.line.length>0){if(me!==0&&Bt!=Gt.row){var kt=document.createElement("br");kt.className="lineBreak",at.appendChild(kt)}var Ft=!1;Bt===Gt.row&&(Ft=!0),Bt=Gt.row;var An=Le[Gt.name],nt=document.createElement("span");nt.className="spanPadding "+Gt.name+" customSpanColor",nt.style.cssText=ee(re,An),me!==0&&Ft?me===ht.spans.length-1?nt.textContent=H(Gt.line):nt.textContent=Gt.line:ht.spans.length>1&&me<ht.spans.length-1&&Gt.row===ht.spans[me+1].row?nt.textContent=J(Gt.line):nt.textContent=Gt.line.trim(),at.appendChild(nt)}}}dt.appendChild(at),xe.appendChild(dt);var mt={bodyStyle:["%",90]};for(var Wt in Le)Le.hasOwnProperty(Wt)&&(mt[Wt]=["%",90]);ke.push({type:"html",start:fe,end:Se,cueHTMLElement:xe,cueID:he,cellResolution:[32,15],isFromCEA608:!0,fontSize:mt,lineHeight:{},linePadding:{}})}return ke}}}Oc.__dashjs_factory_name="EmbeddedTextHtmlRender";var Qh=U.Z.getSingletonFactory(Oc);function km(L){var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e=L.errHandler,Le=L.manifestModel,we=L.mediaController,je=L.videoModel,Z=L.textTracks,le=L.vttParser,ae=L.vttCustomRenderingParser,se=L.ttmlParser,Q=L.streamInfo,Me=L.settings,be=this.context,ke=(0,m.Z)(be).getInstance(),Re=!1;function he(){H=null,fe=NaN,Se=[],Ee=null,re=!1,J=[],ee=null}function xe(kt){var Ft=new Bs;for(var An in kt)Ft[An]=kt[An];Ft.labels=kt.labels,Ft.defaultTrack=function(nt){var mt=!1;return me.length>1&&nt.isEmbedded?mt=nt.id&&nt.id===y.Z.CC1:me.length===1?nt.id&&typeof nt.id=="string"&&nt.id.substring(0,2)==="CC"&&(mt=!0):me.length===0&&(mt=nt.index===J[0].index),mt}(kt),Ft.isFragmented=kt.isFragmented,Ft.isEmbedded=!!kt.isEmbedded,Ft.isTTML=function(nt){return nt.codec&&nt.codec.search(y.Z.STPP)>=0||nt.mimeType&&nt.mimeType.search(y.Z.TTML)>=0}(kt),Ft.kind=function(nt,mt){var Wt=nt.roles&&nt.roles.length>0?mt[nt.roles[0]]:mt.caption;return Wt=Wt===mt.caption||Wt===mt.subtitle?Wt:mt.caption}(kt,{subtitle:"subtitles",caption:"captions"}),Z.addTextTrack(Ft)}function We(kt){var Ft=kt.chunk;Ft.mediaInfo.embeddedCaptions&&at(Ft.bytes,Ft)}function dt(kt){ie=kt}function at(kt,Ft){var An=Ft.mediaInfo,nt=An.type,mt=An.mimeType,Wt=An.codec||mt;Wt?An.codec.indexOf("application/mp4")!==-1?function(xt,en,Jt){var Yt;if(en.segmentType==="InitializationSegment")re=!0,fe=V.getMediaTimescaleFromMoov(xt);else{if(!re)return;(Yt=V.getSamplesInfo(xt).sampleList).length>0&&(Ee=Yt[0].cts-en.start*fe),Jt.search(y.Z.STPP)>=0?function(Dn,xn,rr){var ir,It;for(ee=ee!==null?ee:Bt(rr),ir=0;ir<xn.length;ir++){var $t=xn[ir],Zt=$t.cts,un=ht(),vn=un+Zt/fe,Pn=vn+$t.duration/fe;P.buffered.add(vn,Pn);var Nn=new DataView(Dn,$t.offset,$t.subSizes[0]),Fn=ca.Utils.dataViewToString(Nn,y.Z.UTF8),Gn=[],bt=$t.offset+$t.subSizes[0];for(It=1;It<$t.subSizes.length;It++){var Sn=new Uint8Array(Dn,bt,$t.subSizes[It]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),bt+=$t.subSizes[It]}try{var Lt=Le.getValue().ttmlTimeIsRelative?Zt/fe:0,On=ee.parse(Fn,Lt,Zt/fe,(Zt+$t.duration)/fe,Gn);Z.addCaptions(ie,un,On)}catch(ut){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+ut.message)}}}(xt,Yt,Jt):function(Dn,xn){var rr,ir,It,$t=[];for(rr=0;rr<xn.length;rr++){var Zt=xn[rr];Zt.cts-=Ee;var un=ht()+Zt.cts/fe,vn=un+Zt.duration/fe;P.buffered.add(un,vn);var Pn=Dn.slice(Zt.offset,Zt.offset+Zt.size),Nn=ca.parseBuffer(Pn);for(ir=0;ir<Nn.boxes.length;ir++){var Fn=Nn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(It=0;It<Fn.boxes.length;It++){var bt=Fn.boxes[It];if(B.debug("VTT box2: "+bt.type),bt.type==="payl")Gn.start=Zt.cts/fe,Gn.end=(Zt.cts+Zt.duration)/fe,Gn.data=bt.cue_text;else if(bt.type==="sttg"&&bt.settings&&bt.settings!=="")try{var Sn=bt.settings.split(" ");Gn.styles=le.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&($t.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}$t.length>0&&Z.addCaptions(ie,0,$t)}(xt,Yt)}}(kt,Ft,Wt):nt===y.Z.VIDEO?function(xt,en){var Jt,Yt;if(en.segmentType===it.w.INIT_SEGMENT_TYPE)ge===0&&(ge=V.getMediaTimescaleFromMoov(xt));else if(en.segmentType===it.w.MEDIA_SEGMENT_TYPE){if(ge===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Yt=V.getSamplesInfo(xt)).lastSequenceNumber,xn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Be[0]||Be[1]||function(){for(var un,vn=0;vn<me.length;vn++){if((un=Z.getTrackIdxForId(me[vn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=Je(un);Be[vn]=new(R()).Cea608Parser(vn+1,{newCue:Pn},null)}}(),ge){if(function(un,vn,Pn,Nn,Fn){return un!==null&&vn!==null&&Nn!==null&&Fn!==null&&(vn===un?Nn!==Fn:vn!==un+Pn)}(qe,Dn,Yt.numSequences,De,xn))for(Jt=0;Jt<Be.length;Jt++)Be[Jt]&&Be[Jt].reset();for(var ir=function(un,vn){if(vn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},Nn=new DataView(un),Fn=0;Fn<vn.length;Fn++)for(var Gn=vn[Fn],bt=R().findCea608Nalus(Nn,Gn.offset,Gn.size),Sn=null,En=0,Lt=0;Lt<bt.length;Lt++)for(var On=R().extractCea608DataFromRange(Nn,bt[Lt]),ut=0;ut<2;ut++)if(On[ut].length>0){Gn.cts!==Sn?En=0:En+=1;var tt=ht();Pn.fields[ut].push([Gn.cts+tt*ge,On[ut],En]),Sn=Gn.cts}return Pn.fields.forEach(function(qt){qt.sort(function(Ve,Ke){return Ve[0]===Ke[0]?Ve[2]-Ke[2]:Ve[0]-Ke[0]})}),Pn}(xt,Yt.sampleList),It=0;It<Be.length;It++){var $t=ir.fields[It],Zt=Be[It];if(Zt)for(Jt=0;Jt<$t.length;Jt++)Zt.addData($t[Jt][0]/ge,$t[Jt][1])}qe=Dn,De=rr}}}(kt,Ft):function(xt,en,Jt){var Yt,Dn,xn=new DataView(xt,0,xt.byteLength);Dn=ca.Utils.dataViewToString(xn,y.Z.UTF8);try{Yt=Bt(Jt).parse(Dn,0),Z.addCaptions(Z.getCurrentTrackIdx(),0,Yt),P.buffered&&P.buffered.add(en.start,en.end)}catch(rr){_e.error(new de.Z(Ae.TIMED_TEXT_ERROR_ID_PARSE_CODE,Ae.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(kt,Ft,Wt):B.error("No text type defined")}function Je(kt){return function(Ft,An,nt){var mt;(mt=je.getTTMLRenderingDiv()?ze.createHTMLCaptionsFromScreen(je.getElement(),Ft,An,nt):[{start:Ft,end:An,data:nt.getDisplayText(),styles:{}}])&&Z.addCaptions(kt,0,mt)}}function ht(){return isNaN(P.timestampOffset)?0:P.timestampOffset}function Bt(kt){var Ft;return kt.search(y.Z.VTT)>=0?Ft=Me.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(kt.search(y.Z.TTML)>=0||kt.search(y.Z.STPP)>=0)&&(Ft=se),Ft}function Gt(kt){me.forEach(function(Ft){var An=Z.getTrackIdxForId(Ft.id);An>=0&&Z.deleteCuesFromTrackIdx(An,kt.from,kt.to)})}return P={initialize:function(){Re||(me=[],ie=null,ge=0,Be=[],qe=null,De=null,Re=!0,ze=Qh(be).getInstance(),ke.on(T.Z.VIDEO_CHUNK_RECEIVED,We,P),ke.on(T.Z.BUFFER_CLEARED,Gt,P))},addMediaInfos:function(kt,Ft,An){if(J=J.concat(Ft),kt===y.Z.TEXT&&Ft[0].isFragmented&&!Ft[0].isEmbedded){H=An,P.buffered=(0,Ro.Z)(be).create(),Se=we.getTracksFor(y.Z.TEXT,Q.id).filter(function(xt){return xt.isFragmented});for(var nt=we.getCurrentTrackFor(y.Z.TEXT,Q.id),mt=0;mt<Se.length;mt++)if(Se[mt]===nt){dt(mt);break}}for(var Wt=0;Wt<Ft.length;Wt++)xe(Ft[Wt])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:at,abort:function(){},addEmbeddedTrack:function(kt){if(Re&&kt)if(kt.id===y.Z.CC1||kt.id===y.Z.CC3){for(var Ft=0;Ft<me.length;Ft++)if(me[Ft].id===kt.id)return;me.push(kt)}else B.warn("Embedded track "+kt.id+" not supported!")},resetEmbedded:function(){ke.off(T.Z.VIDEO_CHUNK_RECEIVED,We,P),ke.off(T.Z.BUFFER_CLEARED,Gt,P),Z&&Z.deleteAllTextTracks(),Re=!1,me=[],Be=[null,null],qe=null,De=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:Se,videoModel:je}},setCurrentFragmentedTrackIdx:dt,remove:function(kt,Ft){kt===void 0&&kt===Ft&&(kt=P.buffered.start(0),Ft=P.buffered.end(P.buffered.length-1)),P.buffered.remove(kt,Ft),Z.deleteCuesFromTrackIdx(ie,kt,Ft)},reset:function(){he(),J=[],V=null}},B=(0,N.Z)(be).getInstance().getLogger(P),V=(0,aa.Z)(be).getInstance(),he(),P}km.__dashjs_factory_name="TextSourceBuffer";var Jh=U.Z.getClassFactory(km),Lc=S(4403);function kc(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}var UE=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Fm(L){var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je=this.context,Z=(0,m.Z)(je).getInstance(),le=L.videoModel,ae=L.streamInfo,se=L.settings;function Q(It,$t,Zt,un,vn,Pn){var Nn=0,Fn=0;It/$t>Zt/un?Nn=(Fn=$t)/un*Zt:Fn=(Nn=It)/Zt*un;var Gn,bt,Sn=0,En=0;return Nn/Fn>vn?(En=Fn,Sn=Fn*vn):(Sn=Nn,En=Nn/vn),Gn=(It-Sn)/2,bt=($t-En)/2,Pn?{x:Gn+.1*Sn,y:bt+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:bt,w:Sn,h:En}}function Me(It,$t){var Zt=le.getClientWidth(),un=le.getClientHeight(),vn=le.getVideoWidth(),Pn=le.getVideoHeight(),Nn=le.getVideoRelativeOffsetTop(),Fn=le.getVideoRelativeOffsetLeft();if(vn!==0&&Pn!==0){var Gn=vn/Pn,bt=!1;It.isFromCEA608&&(Gn=1.1666666666666667,bt=!0);var Sn=Q.call(this,Zt,un,vn,Pn,Gn,bt),En=Sn.w,Lt=Sn.h,On=Sn.x,ut=Sn.y;if(En!=Se||Lt!=Ee||On!=re||ut!=fe||$t){if(re=On+Fn,fe=ut+Nn,Se=En,Ee=Lt,ie){var tt=ie.style;tt&&(tt.left=re+"px",tt.top=fe+"px",tt.width=Se+"px",tt.height=Ee+"px",tt.zIndex=qe&&document[qe]||De?ze:null,Z.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var qt=It.activeCues;if(qt)for(var Ve=qt.length,Ke=0;Ke<Ve;++Ke){var Mt=qt[Ke];Mt.scaleCue(Mt)}}}}function be(It){var $t,Zt,un,vn,Pn,Nn=Se,Fn=Ee;if(It.cellResolution){var Gn=[Nn/It.cellResolution[0],Fn/It.cellResolution[1]];if(It.linePadding){for($t in It.linePadding)if(It.linePadding.hasOwnProperty($t)){Zt=(It.linePadding[$t]*Gn[0]).toString();for(var bt=document.getElementsByClassName("spanPadding"),Sn=0;Sn<bt.length;Sn++)bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt),bt[Sn].style.cssText=bt[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}if(It.fontSize){for($t in It.fontSize)if(It.fontSize.hasOwnProperty($t)){It.fontSize[$t][0]==="%"?un=It.fontSize[$t][1]/100:It.fontSize[$t][0]==="c"&&(un=It.fontSize[$t][1]),Zt=(un*Gn[1]).toString(),Pn=$t!=="defaultFontSize"?document.getElementsByClassName($t):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}if(It.lineHeight){for($t in It.lineHeight)if(It.lineHeight.hasOwnProperty($t)){It.lineHeight[$t][0]==="%"?vn=It.lineHeight[$t][1]/100:It.fontSize[$t][0]==="c"&&(vn=It.lineHeight[$t][1]),Zt=(vn*Gn[1]).toString(),Pn=document.getElementsByClassName($t);for(var Lt=0;Lt<Pn.length;Lt++)Pn[Lt].style.cssText=Pn[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Zt)}}}}if(It.isd){var On=document.getElementById(It.cueID);On&&ie.removeChild(On),Re(It)}}function ke(It,$t){var Zt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Zt.test($t)){var vn=Zt.exec($t),Pn=parseInt(vn[4],10)-1;return"data:image/png;base64,"+btoa(It.images[Pn])}if(un.test($t)){var Nn=un.exec($t)[1];return"data:image/png;base64,"+It.embeddedImages[Nn]}return $t}function Re(It){if(ie){ir.call(this);var $t=document.createElement("div");ie.appendChild($t),Be=(0,Lc.renderHTML)(It.isd,$t,function(Zt){return ke(It,Zt)},ie.clientHeight,ie.clientWidth,se.get().streaming.text.imsc.displayForcedOnlyMode,function(Zt){B.info("renderCaption :",Zt)},Be,se.get().streaming.text.imsc.enableRollUp),$t.id=It.cueID,Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:$t,currentTrackIdx:H})}}function he(It,$t){return!!$t&&$t.endTime>=It.startTime}function xe(It,$t){return!!se.get().streaming.text.extendSegmentedCues&&!!function(Zt,un,vn){for(var Pn=0;Pn<vn.length;Pn++){var Nn=vn[Pn];if(JSON.stringify(Zt[Nn])!==JSON.stringify(un[Nn]))return!1}return!0}($t,It,UE)&&($t.endTime=Math.max($t.endTime,It.endTime),!0)}function We(It,$t){$t&&$t.forEach(function(Zt){Zt.kind&&Zt.kind==="image"&&(Zt.src=ke(It,Zt.src)),We(It,Zt.contents)})}function dt(It,$t,Zt){var un=mt(It),vn=se.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Zt)&&Zt.length!==0)for(var Pn=0;Pn<Zt.length;Pn++){var Nn=null,Fn=Zt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(vn?Nn=at(Fn,$t):kt(Fn)&&ie?Nn=Bt(Fn,$t,un):Fn.data&&(Nn=Gt(Fn,$t,un)));try{if(Nn){if(!en(un,Nn))if(se.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(Nn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),he(Nn,Gn)?xe(Nn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)):un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)}var bt=se.get().streaming.buffer.bufferToKeep;Yt(un,0,le.getTime()-bt)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(Nn),Sn}}}function at(It,$t){var Zt=Ft(It,$t);return Zt.onenter=function(){kt(It)&&we&&we.cueID!==Zt.cueID&&ht(we),delete Zt.type,we=Zt,Je(Zt)},Zt.onexit=function(){ht(Zt),we=null},Zt}function Je(It){Z.trigger(_.Z.CUE_ENTER,It)}function ht(It){Z.trigger(_.Z.CUE_EXIT,{cueID:It.cueID})}function Bt(It,$t,Zt){var un=this,vn=Ft(It,$t);return ie.style.left=re+"px",ie.style.top=fe+"px",ie.style.width=Se+"px",ie.style.height=Ee+"px",vn.onenter=function(){var Pn=this;Zt.mode===y.Z.TEXT_SHOWING&&(this.isd?(Le?requestAnimationFrame(function(){return Re(Pn)}):Re(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),be.call(un,this),Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},vn.onexit=function(){if(ie)for(var Pn=ie.childNodes,Nn=0;Nn<Pn.length;++Nn)Pn[Nn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[Nn].id),ie.removeChild(Pn[Nn]),--Nn)},vn}function Gt(It,$t,Zt){var un=Ft(It,$t);if(un.isActive=!1,It.styles)try{It.styles.align!==void 0&&"align"in un&&(un.align=It.styles.align),It.styles.line!==void 0&&"line"in un&&(un.line=It.styles.line),It.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=It.styles.snapToLines),It.styles.position!==void 0&&"position"in un&&(un.position=It.styles.position),It.styles.size!==void 0&&"size"in un&&(un.size=It.styles.size)}catch(vn){B.error(vn)}return un.onenter=function(){Zt.mode===y.Z.TEXT_SHOWING&&Z.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function kt(It){return It.type==="html"}function Ft(It,$t){return kt(It)?function(Zt,un){var vn=new V(Zt.start+un,Zt.end+un,"");return vn.cueHTMLElement=Zt.cueHTMLElement,vn.isd=Zt.isd,vn.images=Zt.images,vn.embeddedImages=Zt.embeddedImages,vn.cueID=Zt.cueID,vn.scaleCue=be.bind(self),vn.cellResolution=Zt.cellResolution,vn.lineHeight=Zt.lineHeight,vn.linePadding=Zt.linePadding,vn.fontSize=Zt.fontSize,vn.isd&&We(vn,vn.isd.contents),vn}(It,$t):function(Zt,un){var vn=new V(Zt.start-un,Zt.end-un,Zt.data);return vn.cueID="".concat(vn.startTime,"_").concat(vn.endTime),vn}(It,$t)}function An(It){if(me)for(var $t=me.childNodes,Zt=0;Zt<$t.length;++Zt)$t[Zt].id===It.cueID&&(me.removeChild($t[Zt]),--Zt)}function nt(){var It,$t=[],Zt=function(vn,Pn){var Nn;if(typeof Symbol>"u"||vn[Symbol.iterator]==null){if(Array.isArray(vn)||(Nn=function(Lt,On){if(Lt){if(typeof Lt=="string")return kc(Lt,On);var ut=Object.prototype.toString.call(Lt).slice(8,-1);return ut==="Object"&&Lt.constructor&&(ut=Lt.constructor.name),ut==="Map"||ut==="Set"?Array.from(Lt):ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut)?kc(Lt,On):void 0}}(vn))||Pn){Nn&&(vn=Nn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=vn.length?{done:!0}:{done:!1,value:vn[Fn++]}},e:function(Lt){throw Lt},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var bt,Sn=!0,En=!1;return{s:function(){Nn=vn[Symbol.iterator]()},n:function(){var Lt=Nn.next();return Sn=Lt.done,Lt},e:function(Lt){En=!0,bt=Lt},f:function(){try{Sn||Nn.return==null||Nn.return()}finally{if(En)throw bt}}}}(le.getTextTracks());try{for(Zt.s();!(It=Zt.n()).done;){var un=It.value;un.manualMode===y.Z.TEXT_SHOWING&&$t.push(un)}}catch(vn){Zt.e(vn)}finally{Zt.f()}return $t}function mt(It){return It>=0&&ee[It]?le.getTextTrack(ee[It].kind,ee[It].id,ee[It].lang,ee[It].isTTML,ee[It].isEmbedded):null}function Wt(It){var $t=this;if(It!==H){var Zt=mt(H=It);xt.call(this,Zt),ge&&(clearInterval(ge),ge=null),Zt&&Zt.renderingType==="html"&&(Me.call(this,Zt,!0),window.ResizeObserver?(_e=new window.ResizeObserver(function(){Me.call($t,Zt,!0)})).observe(le.getElement()):ge=setInterval(Me.bind(this,Zt),500))}}function xt(It){ir.call(this),It&&It.renderingType==="html"?xn.call(this):rr.call(this)}function en(It,$t){if(!It.cues)return!1;for(var Zt=0;Zt<It.cues.length;Zt++)if(It.cues[Zt].startTime===$t.startTime&&It.cues[Zt].endTime===$t.endTime)return!0;return!1}function Jt(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!It&&(isNaN($t)||(un?It.startTime:It.endTime)>=$t)&&(isNaN(Zt)||(un?It.endTime:It.startTime)<=Zt)}function Yt(It,$t,Zt){var un,vn;if(!(Zt<$t)&&It&&(It.cues||It.manualCueList)){var Pn=It.cues&&It.cues.length>0?"native":"custom",Nn=Pn==="native"?It.cues:It.manualCueList;if(!Nn||Nn.length===0)return;for(var Fn=Nn.length-1;Fn>=0;Fn--)!Jt(Nn[Fn],$t,Zt,!0)||(un=Nn[Fn],vn=le.getTime(),un.startTime>=vn&&un.endTime<=vn)||(Pn==="native"?It.removeCue(Nn[Fn]):(An(Nn[Fn]),delete It.manualCueList[Fn]))}}function Dn(It,$t,Zt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(It&&(It.cues||It.manualCueList)){var vn=It.cues&&It.cues.length>0?"native":"custom",Pn=vn==="native"?It.cues:It.manualCueList;if(!Pn||Pn.length===0)return;for(var Nn=Pn.length-1,Fn=Nn;Fn>=0;Fn--)Jt(Pn[Fn],$t,Zt,un)&&(vn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),It.removeCue(Pn[Fn])):(An(Pn[Fn]),delete It.manualCueList[Fn]))}}function xn(){var It=document.getElementById("native-cue-style");if(!It){(It=document.createElement("style")).id="native-cue-style",document.head.appendChild(It);var $t=It.sheet,Zt=le.getElement();try{Zt&&(Zt.id?$t.insertRule("#"+Zt.id+"::cue {background: transparent}",0):Zt.classList.length!==0?$t.insertRule("."+Zt.className+"::cue {background: transparent}",0):$t.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var It=document.getElementById("native-cue-style");It&&document.head.removeChild(It)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return P={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,re=0,fe=0,Se=0,Ee=0,ie=null,me=null,ge=null,De=!1,ze=2147483647,Be=null,Le="requestAnimationFrame"in window,document.fullscreenElement!==void 0?qe="fullscreenElement":document.webkitIsFullScreen!==void 0?qe="webkitIsFullScreen":document.msFullscreenElement?qe="msFullscreenElement":document.mozFullScreen&&(qe="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(It){ee.push(It)},addCaptions:dt,createTracks:function(){var It=se.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,ut){return On.index-ut.index}),ie=le.getTTMLRenderingDiv(),me=le.getVttRenderingDiv();for(var $t,Zt,un,vn,Pn,Nn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var bt=(Zt=($t=ee[Gn]).kind,un=$t.id!==void 0?$t.id:$t.lang,vn=$t.lang,Pn=$t.isTTML,Nn=$t.isEmbedded,le.addTextTrack(Zt,un,vn,Pn,Nn));J.push(bt),ee[Gn].defaultTrack&&(bt.default=!0,Fn=Gn);var Sn=mt(Gn);Sn&&(Sn.mode=y.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),dt(Gn,0,ee[Gn].captionData),Z.trigger(_.Z.TEXT_TRACK_ADDED)}if(Wt.call(this,Fn),Fn>=0){Z.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var ut=mt(Fn);ut&&ut.renderingType==="html"&&Me.call(this,ut,!0),Z.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Lt=mt(En);Lt&&(Lt.mode=En!==Fn||It?y.Z.TEXT_HIDDEN:y.Z.TEXT_SHOWING,Lt.manualMode=En===Fn?y.Z.TEXT_SHOWING:y.Z.TEXT_HIDDEN)}}Z.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:Wt,getTrackIdxForId:function(It){for(var $t=-1,Zt=0;Zt<ee.length;Zt++)if(ee[Zt].id===It){$t=Zt;break}return $t},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(It,$t){var Zt=mt(It);Zt&&Zt.mode!==$t&&(Zt.mode=$t),Zt&&Zt.manualMode!==$t&&(Zt.manualMode=$t)},deleteCuesFromTrackIdx:function(It,$t,Zt){var un=mt(It);un&&Dn(un,$t,Zt)},deleteAllTextTracks:function(){for(var It=J?J.length:0,$t=0;$t<It;$t++){var Zt=mt($t);Zt&&Dn.call(this,Zt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],ge&&(clearInterval(ge),ge=null),_e&&le&&(_e.unobserve(le.getElement()),_e=null),H=-1,ir.call(this)},manualCueProcessing:function(It){var $t=nt();if($t&&$t.length>0){var Zt=$t[0].manualCueList;Zt&&Zt.length>0&&Zt.forEach(function(un){un.startTime<=It&&un.endTime>=It&&!un.isActive?(un.isActive=!0,se.get().streaming.text.dispatchForManualRendering?Je(un):WebVTT.processCues(window,[un],me,un.cueID)):un.isActive&&(un.startTime>It||un.endTime<It)&&(un.isActive=!1,se.get().streaming.text.dispatchForManualRendering?ht(un):An(un))})}},disableManualTracks:function(){var It=nt();if(It&&It.length>0){var $t=It[0].manualCueList;$t&&$t.length>0&&$t.forEach(function(Zt){if(Zt.isActive){if(Zt.isActive=!1,se.get().streaming.text.dispatchForManualRendering)ht(Zt);else if(me)for(var un=me.childNodes,vn=0;vn<un.length;++vn)un[vn].id===Zt.cueID&&(me.removeChild(un[vn]),--vn)}})}}},B=(0,N.Z)(je).getInstance().getLogger(P),P}Fm.__dashjs_factory_name="TextTracks";var Um=U.Z.getClassFactory(Fm);function Bm(){var L,P,B,V,ee,J,H=this.context;function re(ie){var me=ie.split(":"),ge=me.length-1;return ie=60*parseInt(me[ge-1],10)+parseFloat(me[ge]),ge===2&&(ie+=3600*parseInt(me[0],10)),ie}function fe(ie){var me=ie.split(V),ge=me[1].split(J);return ge.shift(),me[1]=ge[0],ge.shift(),{cuePoints:me,styles:Se(ge)}}function Se(ie){var me={};return ie.forEach(function(ge){if(ge.split(/:/).length>1){var qe=ge.split(/:/)[1],De=!1;qe&&qe.search(/%/)!=-1&&(De=!0,qe=parseInt(qe.replace(/%/,""),10)),(ge.match(/align/)||ge.match(/A/))&&(me.align=qe),(ge.match(/line/)||ge.match(/L/))&&(me.line=qe==="auto"?qe:parseInt(qe,10),De&&(me.snapToLines=!1)),(ge.match(/position/)||ge.match(/P/))&&(me.position=qe),(ge.match(/size/)||ge.match(/S/))&&(me.size=qe)}}),me}function Ee(ie,me){for(var ge,qe=me,De="",Be="";ie[qe]!==""&&qe<ie.length;)qe++;if((ge=qe-me)>1)for(var ze=0;ze<ge;ze++){if((Be=ie[me+ze]).match(V)){De="";break}De+=Be,ze!==ge-1&&(De+="\n")}else(Be=ie[me]).match(V)||(De=Be);return De}return L={parse:function(ie){var me,ge,qe=[];if(!ie)return qe;me=(ie=ie.split(B)).length,ge=-1;for(var De=0;De<me;De++){var Be=ie[De];if(Be.length>0&&Be!=="WEBVTT"&&Be.match(V)){var ze=fe(Be),_e=ze.cuePoints,Le=ze.styles,we=Ee(ie,De+1),je=re(_e[0].replace(ee,"")),Z=re(_e[1].replace(ee,""));!isNaN(je)&&!isNaN(Z)&&je>=ge&&Z>je?we!==""?(ge=je,qe.push({start:je,end:Z,data:we,styles:Le})):P.error("Skipping cue due to empty/malformed cue text"):P.error("Skipping cue due to incorrect cue timing")}}return qe},getCaptionStyles:Se},P=(0,N.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,V=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}Bm.__dashjs_factory_name="VTTParser";var jm=U.Z.getSingletonFactory(Bm);function ep(){var L,P;return L={parse:function(B){var V=[];return P.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},V.push(ee)},P.parse(B),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(P=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}ep.__dashjs_factory_name="VttCustomRenderingParser";var BE=U.Z.getSingletonFactory(ep);function Zm(){var L,P,B=this.context,V=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,re,fe,Se){var Ee,ie,me,ge="",qe=[],De={},Be={},ze="",_e="",Le={onOpenTag:function(ae,se,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.ERROR,event:Pi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),se==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");ze=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){ze&&(Be[ze]=_e.trim()),_e="",ze=""},onText:function(ae){ze&&(_e+=ae)}};if(!J)throw ge="no ttml data to parse",new Error(ge);De.data=J,V.trigger(T.Z.TTML_TO_PARSE,De);var we=(0,Lc.fromXML)(De.data,function(ae){ge=ae},Le);V.trigger(T.Z.TTML_PARSED,{ttmlString:De.data,ttmlDoc:we});var je,Z=we.getMediaTimeEvents();for(me=0;me<Z.length;me++){var le=(0,Lc.generateISD)(we,Z[me],function(ae){ge=ae});le.contents.some(function(ae){return ae.contents.length})&&(Ee=Z[me]+H)<(ie=Z[me+1]+H)&&qe.push({start:Ee,end:ie,type:"html",cueID:(je="cue_TTML_"+ee,ee++,je),isd:le,images:Se,embeddedImages:Be})}if(ge!=="")throw P.error(ge),new Error(ge);return qe}},P=(0,N.Z)(B).getInstance().getLogger(L),L}Zm.__dashjs_factory_name="TTMLParser";var jE=U.Z.getSingletonFactory(Zm);function tp(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function Bl(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?tp(Object(B),!0).forEach(function(V){Gm(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):tp(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Gm(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function np(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function rp(L){var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,_t.Z)(ee).getInstance(),re=L.adapter,fe=L.baseURLController;function Se(me,ge){var qe,De,Be=!1;if(fe.resolve()){var ze=re.getVoRepresentations(me);ze&&ze.length>0&&(qe=fe.resolve(ze[0].path).url)}var _e=me.essentialPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME}),Le=me.supplementalPropertiesAsArray.filter(function(we){return we.schemeIdUri&&we.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME});_e.length>0?(Be=!0,De=_e):De=Le,De.forEach(function(we){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==y.Z.OFF_MIMETYPE&&ae.dvbMimeType!==y.Z.WOFF_MIMETYPE)}(we)){var je=(Z=we.dvbUrl,le=qe,H.isPathAbsolute(Z)?Z:H.isRelative(Z)?le?H.resolve(Z,le):H.resolve(Z):Z);V.push({fontFamily:we.dvbFontFamily,url:je,mimeType:we.dvbMimeType,trackId:me.id,streamId:ge,isEssential:Be,status:"unloaded",fontFace:new FontFace(we.dvbFontFamily,"url(".concat(je,")"),{display:"swap"})})}var Z,le})}function Ee(me,ge){var qe=V[me];V[me]=Bl(Bl({},qe),{},{status:ge})}function ie(){V=[]}return P={addFontsFromTracks:function(me,ge){if(me&&Array.isArray(me)&&ge)for(var qe=0;qe<me.length;qe++)Se(me[qe],ge)},downloadFonts:function(){for(var me=function(qe){var De=V[qe];document.fonts.add(De.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,De),De.fontFace.load().then(function(){Ee(qe,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,De)},function(Be){Ee(qe,"error"),B.debug("Font download error: ",Be),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,De)})},ge=0;ge<V.length;ge++)me(ge)},getFonts:function(){return V},getFontsForTrackId:function(me){return V.filter(function(ge){return ge.trackId&&ge.trackId===me})},reset:function(){(function(){var me,ge=function(Be,ze){var _e;if(typeof Symbol>"u"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(_e=function(ae,se){if(ae){if(typeof ae=="string")return np(ae,se);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?np(ae,se):void 0}}(Be))||ze){_e&&(Be=_e);var Le=0,we=function(){};return{s:we,n:function(){return Le>=Be.length?{done:!0}:{done:!1,value:Be[Le++]}},e:function(ae){throw ae},f:we}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je,Z=!0,le=!1;return{s:function(){_e=Be[Symbol.iterator]()},n:function(){var ae=_e.next();return Z=ae.done,ae},e:function(ae){le=!0,je=ae},f:function(){try{Z||_e.return==null||_e.return()}finally{if(le)throw je}}}}(V);try{for(ge.s();!(me=ge.n()).done;){var qe=me.value,De=document.fonts.delete(qe.fontFace);B.debug("Removal of fontFamily: ".concat(qe.fontFamily," was ").concat(De?"successful":"unsuccessful"))}}catch(Be){ge.e(Be)}finally{ge.f()}})(),ie()}},B=(0,N.Z)(ee).getInstance().getLogger(P),ie(),P}rp.__dashjs_factory_name="DVBFonts";var ZE=U.Z.getClassFactory(rp);function qm(L){var P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De=this.context,Be=L.adapter,ze=L.errHandler,_e=L.manifestModel,Le=L.mediaController,we=L.baseURLController,je=L.videoModel,Z=L.settings;function le(xe){if(qe.error("Could not download ".concat(xe.isEssential?"an essential":"a"," font - fontFamily: ").concat(xe.fontFamily,", url: ").concat(xe.url)),xe.isEssential){var We=ee[xe.streamId].getTrackIdxForId(xe.trackId);ee[xe.streamId].setModeForTrackIdx(We,y.Z.TEXT_DISABLED)}}function ae(xe){if(qe.debug("Successfully downloaded ".concat(xe.isEssential?"an essential":"a"," font - fontFamily: ").concat(xe.fontFamily,", url: ").concat(xe.url)),xe.isEssential){var We=ee[xe.streamId].getTrackIdxForId(xe.trackId);We===ee[xe.streamId].getCurrentTrackIdx()?ee[xe.streamId].setModeForTrackIdx(We,y.Z.TEXT_SHOWING):ee[xe.streamId].setModeForTrackIdx(We,y.Z.TEXT_HIDDEN)}}function se(xe){var We=xe.tracks,dt=xe.index,at=xe.streamId;if(Z.get().streaming.text.defaultEnabled===!1&&!be()||me)ke(at,-1);else{var Je=Le.getCurrentTrackFor(y.Z.TEXT,at);if(Je){var ht={lang:Je.lang,role:Je.roles[0],index:Je.index,codec:Je.codec,accessibility:Je.accessibility[0]};We.some(function(Bt,Gt){if(Le.matchSettings(ht,Bt))return ke(at,Gt),dt=Gt,!0})}Se=!1}B[at].lastEnabledIndex=dt,fe.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:be(),index:dt,tracks:We,streamId:at}),ie=!0,ge.addFontsFromTracks(We,at),ge.getFonts().forEach(function(Bt){if(Bt.isEssential){var Gt=ee[Bt.streamId].getTrackIdxForId(Bt.trackId);ee[Bt.streamId].setModeForTrackIdx(Gt,y.Z.TEXT_DISABLED)}}),ge.downloadFonts()}function Q(xe){try{var We=xe.streamId;if(!ee[We]||isNaN(xe.time))return;ee[We].manualCueProcessing(xe.time)}catch(dt){}}function Me(xe){try{var We=xe.streamId;if(!ee[We])return;ee[We].disableManualTracks()}catch(dt){}}function be(){var xe=!0;return Se&&!Ee&&(xe=!1),xe}function ke(xe,We){(Se=We===-1)&&Le&&Le.saveTextSettingsDisabled();var dt=Re(xe);if(dt!==We&&ee[xe]){ee[xe].disableManualTracks();var at=ee[xe].getCurrentTrackInfo(),Je=at?je.getTextTrack(at.kind,at.id,at.lang,at.isTTML,at.isEmbedded):null;Je&&Je.mode!==y.Z.TEXT_DISABLED&&ee[xe].setModeForTrackIdx(dt,y.Z.TEXT_HIDDEN),ee[xe].setCurrentTrackIdx(We),at=ee[xe].getCurrentTrackInfo();var ht=Z.get().streaming.text.dispatchForManualRendering;at&&!ht&&at.mode!==y.Z.TEXT_DISABLED&&ee[xe].setModeForTrackIdx(We,y.Z.TEXT_SHOWING),at&&at.isFragmented&&!at.isEmbedded?function(Bt,Gt,kt){if(V[Bt])for(var Ft=V[Bt].getConfig().fragmentedTracks,An=0;An<Ft.length;An++){var nt=Ft[An];if(Gt.lang===nt.lang&&(nt.id?Gt.id===nt.id:Gt.index===nt.index)){var mt=Le.getCurrentTrackFor(y.Z.TEXT,Bt);(nt.id?mt.id!==nt.id:mt.index!==nt.index)?(ee[Bt].deleteCuesFromTrackIdx(kt),V[Bt].setCurrentFragmentedTrackIdx(An)):kt===-1&&fe.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Bt,mediaType:y.Z.TEXT})}}}(xe,at,dt):at&&!at.isFragmented&&function(Bt,Gt){fe.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Gt},{streamId:Bt,mediaType:y.Z.TEXT})}(xe,at),Le.setTrack(at)}}function Re(xe){return ee[xe].getCurrentTrackIdx()}function he(){V={},ee={},B={},Se=!0,ie=!1,me=!1}return P={deactivateStream:function(xe){if(xe){var We=xe.id;V[We]&&V[We].resetMediaInfos(),ee[We]&&ee[We].deleteAllTextTracks()}},initialize:function(){ge=ZE(De).create({adapter:Be,baseURLController:we}),fe.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(fe.on(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.on(T.Z.PLAYBACK_SEEKING,Me,P))},initializeForStream:function(xe){var We=xe.id,dt=Um(De).create({videoModel:je,settings:Z,streamInfo:xe});dt.initialize(),ee[We]=dt;var at=Jh(De).create({errHandler:ze,adapter:Be,dvbFonts:ge,manifestModel:_e,mediaController:Le,videoModel:je,textTracks:dt,vttParser:J,vttCustomRenderingParser:H,ttmlParser:re,streamInfo:xe,settings:Z});at.initialize(),V[We]=at,B[We]={},B[We].lastEnabledIndex=-1},createTracks:function(xe){var We=xe.id;ee[We]&&ee[We].createTracks()},getTextSourceBuffer:function(xe){var We=xe.id;if(V&&V[We])return V[We]},getAllTracksAreDisabled:function(){return Se},addEmbeddedTrack:function(xe,We){var dt=xe.id;V[dt]&&V[dt].addEmbeddedTrack(We)},enableText:function(xe,We){return(0,pe.PS)(We,"boolean"),be()!==We&&(We&&ke(xe,B[xe].lastEnabledIndex),We||(B[xe].lastEnabledIndex=Re(xe),ie?ke(xe,-1):me=!0)),!0},isTextEnabled:be,setTextTrack:ke,getCurrentTrackIdx:Re,enableForcedTextStreaming:function(xe){return(0,pe.PS)(xe,"boolean"),Ee=xe,!0},addMediaInfosToBuffer:function(xe,We,dt){var at=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Je=xe.id;V[Je]&&V[Je].addMediaInfos(We,dt,at)},reset:function(){ge.reset(),he(),fe.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(fe.off(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.off(T.Z.PLAYBACK_SEEKING,Me,P)),Object.keys(V).forEach(function(xe){V[xe].resetEmbedded(),V[xe].reset()})}},Ee=!1,ie=!1,me=!1,J=jm(De).getInstance(),H=BE(De).getInstance(),re=jE(De).getInstance(),fe=(0,m.Z)(De).getInstance(),qe=(0,N.Z)(De).getInstance().getLogger(P),he(),P}qm.__dashjs_factory_name="TextController";var GE=U.Z.getClassFactory(qm);function Fc(){var L,P,B,V,ee,J,H,re,fe,Se,Ee,ie,me,ge,qe,De,Be,ze,_e,Le,we,je,Z,le,ae,se,Q,Me,be,ke,Re,he,xe,We,dt,at,Je,ht,Bt,Gt="You must first call initialize() and set a source before calling this method",kt="You must first call initialize() and set a valid source and view before calling this method",Ft="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",nt="MediaPlayer not initialized!",mt=this.context,Wt=(0,m.Z)(mt).getInstance(),xt=(0,Ze.Z)(mt).getInstance(),en=(0,N.Z)(mt).getInstance({settings:xt});function Jt(){Gn(null),Nn(null),V=null,ge&&(ge.reset(),ge=null),qe&&(qe.reset(),qe=null),Le&&Le.reset(),xt.reset(),Be&&(Be.reset(),Be=null)}function Yt(){return!!B&&!!at.getElement()}function Dn(){return(0,Mm.e)()}function xn(){if(!H)throw kt;return Me.isPaused()}function rr(){if(!H)throw kt;return Me.getIsDynamic()}function ir(Ve){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=he.getCurrentDVRInfo(Ke);if(!Mt)return 0;var fn=Me.getOriginalLiveDelay(),Tn=Mt.range.start+Ve;return Tn>Mt.range.end-fn&&(Tn=Mt.range.end-fn),Tn}function It(Ve){if(!H)throw kt;var Ke=Pn().currentTime;if(Ve!==void 0)Ke=ae.getTimeRelativeToStreamId(Ke,Ve);else if(Me.getIsDynamic()){var Mt=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,fn=he.getCurrentDVRInfo(Mt);Ke=fn===null||Ke===0?0:Math.max(0,Ke-fn.range.start)}return Ke}function $t(){if(!H)throw kt;var Ve=Pn().duration;if(Me.getIsDynamic()){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=he.getCurrentDVRInfo(Ke);Ve=Mt?Mt.range.end-Mt.range.start:0}return Ve}function Zt(Ve){(0,pe.PS)(Ve,"boolean"),re=Ve}function un(){Le.restoreDefaultUTCTimingSources()}function vn(){return he}function Pn(){if(!at.getElement())throw Ft;return at.getElement()}function Nn(Ve){if(!ee)throw nt;at.setElement(Ve),Ve&&(On(),function(){if(!qe){var Ke=dashjs.MetricsReporting;if(typeof Ke=="function"){var Mt=Ke(mt).create();qe=Mt.createMetricsReporting({debug:en,eventBus:Wt,mediaElement:Pn(),adapter:ze,dashMetrics:he,mediaPlayerModel:_e,events:T.Z,constants:y.Z,metricsConstants:D.Z})}}}(),function(){if(!De){var Ke=dashjs.MssHandler;typeof Ke=="function"&&(Ae.extend(Ke.errors),De=Ke(mt).create({eventBus:Wt,mediaPlayerModel:_e,dashMetrics:he,manifestModel:xe,playbackController:Me,streamController:ae,protectionController:ge,baseURLController:je,errHandler:we,events:T.Z,constants:y.Z,debug:en,initSegmentType:it.w.INIT_SEGMENT_TYPE,BASE64:Wf,ISOBoxer:ca,settings:xt}))}}(),ae&&ae.switchToVideoElement(fe)),H&&Sn(),qt(fe)}function Fn(Ve){if(!J)throw Gt;var Ke=ae.getActiveStreamInfo();return Ke?me.getTracksFor(Ve,Ke.id):[]}function Gn(Ve){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw nt;typeof Ve=="string"&&Je.initialize(Ve),Ke==null&&(Ke=NaN),isNaN(Ke)||(Ke=Math.max(0,Ke)),fe=Ke,B=Ve,(J||H)&&Sn(),Yt()&&qt(fe)}function bt(){if(!J)throw Gt;var Ve=ae.getActiveStreamInfo();return Ve?ae.getStreamById(Ve.id):null}function Sn(){H=!1,J=!1,ze.reset(),ae.reset(),Q.reset(),Re.reset(),Me.reset(),be.reset(),ke.reset(),Se.reset(),me.reset(),Bt.reset(),ge&&(xt.get().streaming.protection.keepProtectionMediaKeys?ge.stop():(ge.reset(),ge=null,On())),se.reset(),We.reset(),dt.reset()}function En(){var Ve=Lt();ae||(ae=Ho(mt).getInstance()),se||(se=GE(mt).create({errHandler:we,manifestModel:xe,adapter:ze,mediaController:me,baseURLController:je,videoModel:at,settings:xt})),le.setConfig({capabilities:Z,customParametersModel:Le,adapter:ze,settings:xt,manifestModel:xe,errHandler:we}),ae.setConfig({capabilities:Z,capabilitiesFilter:le,manifestLoader:Ve,manifestModel:xe,mediaPlayerModel:_e,customParametersModel:Le,protectionController:ge,textController:se,adapter:ze,dashMetrics:he,errHandler:we,timelineConverter:ie,videoModel:at,playbackController:Me,serviceDescriptionController:be,contentSteeringController:ke,abrController:Se,mediaController:me,settings:xt,baseURLController:je,uriFragmentModel:Je,segmentBaseController:Bt}),Q.setConfig({settings:xt,playbackController:Me,streamController:ae,videoModel:at,timelineConverter:ie,adapter:ze}),Me.setConfig({streamController:ae,serviceDescriptionController:be,dashMetrics:he,adapter:ze,videoModel:at,timelineConverter:ie,settings:xt}),Re.setConfig({streamController:ae,playbackController:Me,mediaPlayerModel:_e,videoModel:at,settings:xt}),Se.setConfig({streamController:ae,domStorage:ht,mediaPlayerModel:_e,customParametersModel:Le,cmsdModel:dt,dashMetrics:he,adapter:ze,videoModel:at,settings:xt}),We.setConfig({abrController:Se,dashMetrics:he,playbackController:Me}),dt.setConfig({}),Se.initialize(),ae.initialize(re,V),se.initialize(),Q.initialize(),Re.initialize(),We.initialize(),dt.initialize(),ke.initialize(),Bt.initialize()}function Lt(){return wm(mt).create({debug:en,errHandler:we,dashMetrics:he,mediaPlayerModel:_e,requestModifier:(0,He.Z)(mt).getInstance(),mssHandler:De,settings:xt})}function On(){if(ge)return ge;var Ve=dashjs.Protection;if(typeof Ve=="function"){var Ke=Ve(mt).create();return T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),Ae.extend(Ve.errors),Z||(Z=(0,Am.Z)(mt).getInstance()),ge=Ke.createProtectionSystem({debug:en,errHandler:we,videoModel:at,customParametersModel:Le,capabilities:Z,eventBus:Wt,events:T.Z,BASE64:Wf,constants:y.Z,cmcdModel:We,settings:xt})}return null}function ut(){if(!ee)throw nt;if(Be)return Be;var Ve=dashjs.OfflineController;if(typeof Ve=="function"){T.Z.extend(Ve.events),_.Z.extend(Ve.events,{publicOnly:!0}),Ae.extend(Ve.errors);var Ke=Lt(),Mt=Vr(mt).create();return Mt.setConfig({manifestModel:xe,adapter:ze,manifestLoader:Ke,errHandler:we,contentSteeringController:ke}),Be=Ve(mt).create({debug:en,manifestUpdater:Mt,baseURLController:je,manifestLoader:Ke,manifestModel:xe,mediaPlayerModel:_e,abrController:Se,playbackController:Me,adapter:ze,errHandler:we,dashMetrics:he,timelineConverter:ie,segmentBaseController:Bt,schemeLoaderFactory:Ee,eventBus:Wt,events:T.Z,errors:Ae,constants:y.Z,settings:xt,dashConstants:v.Z,urlUtils:(0,_t.Z)(mt).getInstance()})}return null}function tt(Ve){var Ke=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Mt=he.getCurrentDVRInfo(Ke);return Mt?Ve+(Mt.manifestInfo.availableFrom.getTime()/1e3+Mt.range.start):0}function qt(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Be&&Be.resetRecords(),!J&&B&&(J=!0,P.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,Ve):ae.loadWithManifest(B,Ve)),!H&&Yt()&&(H=!0,P.info("Playback Initialized"))}return L={initialize:function(Ve,Ke,Mt){var fn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;Z||(Z=(0,Am.Z)(mt).getInstance()).setConfig({settings:xt}),we||(we=Pl(mt).getInstance()),Z.supportsMediaSource()?(ee||(ee=!0,ie=Eu(mt).getInstance(),Se||(Se=Wn(mt).getInstance()).setConfig({settings:xt}),Ee||(Ee=Di(mt).getInstance()),Me||(Me=C(mt).getInstance()),me||(me=Bu(mt).getInstance()),ae||(ae=Ho(mt).getInstance()),Q||(Q=Os(mt).getInstance()),Re||(Re=co(mt).getInstance()),be||(be=Rh(mt).getInstance()),ke||(ke=Ia(mt).getInstance()),le||(le=xE(mt).getInstance()),ze=Pm(mt).getInstance(),xe=DE(mt).getInstance(),We=ar(mt).getInstance(),dt=_n(mt).getInstance(),he=Us(mt).getInstance({settings:xt}),ht=PE(mt).getInstance({settings:xt}),ze.setConfig({constants:y.Z,cea608parser:R(),errHandler:we,BASE64:Wf}),je||(je=wE(mt).create()),je.setConfig({adapter:ze,contentSteeringController:ke}),be.setConfig({adapter:ze}),Bt||(Bt=OE(mt).getInstance({dashMetrics:he,mediaPlayerModel:_e,errHandler:we,baseURLController:je,events:T.Z,eventBus:Wt,debug:en,boxParser:(0,aa.Z)(mt).getInstance(),requestModifier:(0,He.Z)(mt).getInstance(),errors:Ae})),me.setConfig({domStorage:ht,settings:xt,customParametersModel:Le}),_e.setConfig({playbackController:Me,serviceDescriptionController:be}),ke.setConfig({adapter:ze,errHandler:we,dashMetrics:he,mediaPlayerModel:_e,manifestModel:xe,serviceDescriptionController:be,eventBus:Wt,requestModifier:(0,He.Z)(mt).getInstance()}),un(),Zt(Mt===void 0||Mt),ut()),Ve&&Nn(Ve),Ke&&Gn(Ke,fn),P.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):we.error(new de.Z(Ae.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ae.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ve){Ve&&(Ve.capabilities&&(Z=Ve.capabilities),Ve.capabilitiesFilter&&(le=Ve.capabilitiesFilter),Ve.streamController&&(ae=Ve.streamController),Ve.textController&&(se=Ve.textController),Ve.gapController&&(Q=Ve.gapController),Ve.playbackController&&(Me=Ve.playbackController),Ve.serviceDescriptionController&&(be=Ve.serviceDescriptionController),Ve.contentSteeringController&&(ke=Ve.contentSteeringController),Ve.catchupController&&(Re=Ve.catchupController),Ve.mediaPlayerModel&&(_e=Ve.mediaPlayerModel),Ve.customParametersModel&&(Le=Ve.customParametersModel),Ve.abrController&&(Se=Ve.abrController),Ve.schemeLoaderFactory&&(Ee=Ve.schemeLoaderFactory),Ve.mediaController&&(me=Ve.mediaController),Ve.settings&&(xt=Ve.settings))},on:function(Ve,Ke,Mt,fn){Wt.on(Ve,Ke,Mt,fn)},off:function(Ve,Ke,Mt){Wt.off(Ve,Ke,Mt)},extend:function(Ve,Ke,Mt){U.Z.extend(Ve,Ke,Mt,mt)},attachView:Nn,attachSource:Gn,refreshManifest:function(Ve){if(!ee)throw nt;if(!Yt())return Ve(null,An);var Ke=this;typeof Ve=="function"&&Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Mt(fn){Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Mt,Ke),fn.error?Ve(null,fn.error):Ve(fn.manifest)},Ke),ae.refreshManifest()},isReady:Yt,preload:function(){if(!at.getElement()&&!J){if(!B)throw An;qt(fe)}},play:function(){if(!H)throw kt;(!re||xn()&&H)&&Me.play(!0)},isPaused:xn,pause:function(){if(!H)throw kt;Me.pause()},isSeeking:function(){if(!H)throw kt;return Me.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw kt;return Me.getLowLatencyModeEnabled()},seek:function(Ve){if(!H)throw kt;if((0,pe.PS)(Ve,"number"),isNaN(Ve))throw y.Z.BAD_ARGUMENT_ERROR;Ve<0&&(Ve=0);var Ke=Me.getIsDynamic()?ir(Ve):Ve,Mt=Pn();!Me.getIsDynamic()&&Mt.duration&&(Ke=Math.min(Mt.duration,Ke)),Me.seek(Ke,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Me.seekToOriginalLive()},setPlaybackRate:function(Ve){Pn().playbackRate=Ve},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(Ve){(0,pe.PS)(Ve,"boolean"),Pn().muted=Ve},isMuted:function(){return Pn().muted},setVolume:function(Ve){if(typeof Ve!="number"||isNaN(Ve)||Ve<0||Ve>1)throw y.Z.BAD_ARGUMENT_ERROR;Pn().volume=Ve},getVolume:function(){return Pn().volume},time:It,duration:$t,timeAsUTC:function(){if(!H)throw kt;return It()<0?NaN:tt(It())},durationAsUTC:function(){if(!H)throw kt;return tt($t())},getActiveStream:bt,getDVRWindowSize:function(){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Ke=he.getCurrentDVRInfo(Ve);return Ke?Ke.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var Ve=xe.getValue();return Ve?je.getBaseUrls(Ve):[]},getAvailableLocations:function(){var Ve=xe.getValue();if(!Ve)return[];var Ke=ze.getLocation(Ve),Mt=ke.getSynthesizedLocationElements(Ke);return Ke.concat(Mt)},getTargetLiveDelay:function(){if(!H)throw kt;return Me.getOriginalLiveDelay()},convertToTimeCode:function(Ve){Ve=Math.max(Ve,0);var Ke=Math.floor(Ve/3600),Mt=Math.floor(Ve%3600/60),fn=Math.floor(Ve%3600%60);return(Ke===0?"":Ke<10?"0"+Ke.toString()+":":Ke.toString()+":")+(Mt<10?"0"+Mt.toString():Mt.toString())+":"+(fn<10?"0"+fn.toString():fn.toString())},formatUTC:function(Ve,Ke,Mt){var fn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*Ve),sr=Tn.toLocaleDateString(Ke),Zr=Tn.toLocaleTimeString(Ke,{hour12:Mt});return fn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(Ve){var Ke=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT];if(Ve)return Ke.indexOf(Ve)!==-1?vn().getCurrentBufferLevel(Ve)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);var Mt=Ke.map(function(fn){return Fn(fn).length>0?vn().getCurrentBufferLevel(fn):Number.MAX_VALUE}).reduce(function(fn,Tn){return Math.min(fn,Tn)});return Mt===Number.MAX_VALUE?NaN:Mt},getTTMLRenderingDiv:function(){return at?at.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(Ve){B=Ve,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw nt;return H?Me.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ve){if(!J)throw Gt;return Se.getTopBitrateInfoFor(Ve)},setAutoPlay:Zt,getAutoPlay:function(){return re},getDashMetrics:vn,getQualityFor:function(Ve){if(!J)throw Gt;if(Ve===y.Z.IMAGE){var Ke=bt();if(!Ke)return-1;var Mt=Ke.getThumbnailController();return Mt?Mt.getCurrentTrackIndex():-1}return Se.getQualityFor(Ve)},setQualityFor:function(Ve,Ke){var Mt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw Gt;if(Ve===y.Z.IMAGE){var fn=bt();if(!fn)return;var Tn=fn.getThumbnailController();Tn&&Tn.setTrackByIndex(Ke)}Se.setPlaybackQuality(Ve,ae.getActiveStreamInfo(),Ke,{forceReplace:Mt})},updatePortalSize:function(){Se.setElementSize(),Se.setWindowResizeEventCalled(!0)},enableText:function(Ve){var Ke=ae.getActiveStreamInfo();return!(!Ke||!se)&&se.enableText(Ke.id,Ve)},enableForcedTextStreaming:function(Ve){return!(!ae.getActiveStreamInfo()||!se)&&se.enableForcedTextStreaming(Ve)},isTextEnabled:function(){var Ve=ae.getActiveStreamInfo();return!(!Ve||!se)&&se.isTextEnabled(Ve)},setTextTrack:function(Ve){if(!H)throw kt;var Ke=ae.getActiveStreamInfo();Ke&&se&&se.setTextTrack(Ke.id,Ve)},getBitrateInfoListFor:function(Ve){if(!J)throw Gt;var Ke=bt();return Ke?Ke.getBitrateListFor(Ve):[]},getStreamsFromManifest:function(Ve){if(!J)throw Gt;return ze.getStreamsInfo(Ve)},getTracksFor:Fn,getTracksForTypeFromManifest:function(Ve,Ke,Mt){if(!J)throw Gt;return(Mt=Mt||ze.getStreamsInfo(Ke,1)[0])?ze.getAllMediaInfoForType(Mt,Ve,Ke):[]},getCurrentTrackFor:function(Ve){if(!J)throw Gt;var Ke=ae.getActiveStreamInfo();return me.getCurrentTrackFor(Ve,Ke.id)},setInitialMediaSettingsFor:function(Ve,Ke){if(!ee)throw nt;me.setInitialSettings(Ve,Ke)},getInitialMediaSettingsFor:function(Ve){if(!ee)throw nt;return me.getInitialSettings(Ve)},setCurrentTrack:function(Ve){var Ke=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw Gt;me.setTrack(Ve,Ke)},addABRCustomRule:function(Ve,Ke,Mt){Le.addAbrCustomRule(Ve,Ke,Mt)},removeABRCustomRule:function(Ve){Le.removeAbrCustomRule(Ve)},removeAllABRCustomRule:function(){Le.removeAllAbrCustomRule()},getABRCustomRules:function(){return Le.getAbrCustomRules()},getAverageThroughput:function(Ve){var Ke=Se.getThroughputHistory(),Mt=Me.getIsDynamic();return Ke?Ke.getAverageThroughput(Ve,Mt):0},retrieveManifest:function(Ve,Ke){var Mt=Lt(),fn=this;Wt.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?Ke(null,sr.error):Ke(sr.manifest),Wt.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,fn),Mt.reset()},fn),Je.initialize(Ve),Mt.load(Ve)},addUTCTimingSource:function(Ve,Ke){Le.addUTCTimingSource(Ve,Ke)},removeUTCTimingSource:function(Ve,Ke){Le.removeUTCTimingSource(Ve,Ke)},clearDefaultUTCTimingSources:function(){Le.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(Ve,Ke){Le.setXHRWithCredentialsForType(Ve,Ke)},getXHRWithCredentialsForType:function(Ve){return Le.getXHRWithCredentialsForType(Ve)},getProtectionController:function(){return On()},attachProtectionController:function(Ve){ge=Ve},setProtectionData:function(Ve){V=Ve,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(Ve){Le.registerLicenseRequestFilter(Ve)},registerLicenseResponseFilter:function(Ve){Le.registerLicenseResponseFilter(Ve)},unregisterLicenseRequestFilter:function(Ve){Le.unregisterLicenseRequestFilter(Ve)},unregisterLicenseResponseFilter:function(Ve){Le.unregisterLicenseResponseFilter(Ve)},registerCustomCapabilitiesFilter:function(Ve){Le.registerCustomCapabilitiesFilter(Ve)},unregisterCustomCapabilitiesFilter:function(Ve){Le.unregisterCustomCapabilitiesFilter(Ve)},setCustomInitialTrackSelectionFunction:function(Ve){Le.setCustomInitialTrackSelectionFunction(Ve)},resetCustomInitialTrackSelectionFunction:function(){Le.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ve){if(!at.getElement())throw Ft;at.setTTMLRenderingDiv(Ve)},attachVttRenderingDiv:function(Ve){if(!at.getElement())throw Ft;at.setVttRenderingDiv(Ve)},getCurrentTextTrackIndex:function(){var Ve=ae.getActiveStreamInfo();if(Ve&&se)return se.getCurrentTrackIdx(Ve.id)},provideThumbnail:function(Ve,Ke){if(typeof Ke=="function")if(Ve<0)Ke(null);else{var Mt=Me.getIsDynamic()?ir(Ve):Ve,fn=ae.getStreamForTime(Mt);if(fn!==null){var Tn=fn.getThumbnailController();if(Tn)return Tn.provide(Mt,Ke);Ke(null)}else Ke(null)}},getDashAdapter:function(){return ze},getOfflineController:function(){return ut()},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getSettings:function(){return xt.get()},updateSettings:function(Ve){xt.update(Ve)},resetSettings:function(){xt.reset()},reset:Jt,destroy:function(){Jt(),U.Z.deleteSingletonInstances(mt)}},P=en.getLogger(L),ee=!1,H=!1,J=!1,re=!0,fe=NaN,ge=null,Be=null,V=null,ze=null,Bt=null,T.Z.extend(_.Z),_e=Ol(mt).getInstance(),Le=(0,ti.Z)(mt).getInstance(),at=Sr(mt).getInstance(),Je=ME(mt).getInstance(),L}Fc.__dashjs_factory_name="MediaPlayer";var Uc=U.Z.getClassFactory(Fc);Uc.events=_.Z,Uc.errors=Ae,U.Z.updateClassFactory(Fc.__dashjs_factory_name,Uc);var Hm=Uc},8825:function(b,g,S){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,N){return U.__proto__=N,U},R(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),C&&R(I,C)})(_,m);var T,U,N=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,C=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(C,arguments,j)}else I=C.apply(this,arguments);return y(this,I)});function _(){var I;return function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(S(8342).Z));g.Z=D},3393:function(b,g){function S(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=new(function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var y,v;return y=R,(v=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&S(y.prototype,v),R}());g.Z=F},3860:function(b,g){function S(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=new(function(){function R(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,R),this.init()}var y,v;return y=R,(v=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&S(y.prototype,v),R}());g.Z=F},8080:function(b,g,S){S.d(g,{default:function(){return q}});var F=function K(){(function(pe,ce){if(!(pe instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};F.SSL_CONNECTION_FAILED_PREFIX="SSL",F.DNS_RESOLUTION_FAILED="C00",F.HOST_UNREACHABLE="C01",F.CONNECTION_REFUSED="C02",F.CONNECTION_ERROR="C03",F.CORRUPT_MEDIA_ISOBMFF="M00",F.CORRUPT_MEDIA_OTHER="M01",F.BASE_URL_CHANGED="F00",F.BECAME_REPORTER="S00";var R=F,y=S(1180);function v(K){var pe,ce,He=(K=K||{}).eventBus,_t=K.dashMetrics,ot=K.metricsConstants,rt=K.events;function et(Xt){var nn=new R;if(ce){for(var Ot in Xt)Xt.hasOwnProperty(Ot)&&(nn[Ot]=Xt[Ot]);nn.mpdurl||(nn.mpdurl=ce.originalUrl||ce.url),nn.terror||(nn.terror=new Date),_t.addDVBErrors(nn)}}function ft(Xt){Xt.error||(ce=Xt.manifest)}function vt(Xt){et({errorcode:R.BASE_URL_CHANGED,servicelocation:Xt.entry})}function Et(){et({errorcode:R.BECAME_REPORTER})}function Ct(Xt){var nn;Xt.metric===ot.HTTP_REQUEST&&((nn=Xt.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&et({errorcode:nn.responsecode||R.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function hn(Xt){var nn;switch(Xt.error?Xt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=R.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=R.CORRUPT_MEDIA_OTHER;break;default:return}et({errorcode:nn})}return pe={initialize:function(){He.on(rt.MANIFEST_UPDATED,ft,pe),He.on(rt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,vt,pe),He.on(rt.METRIC_ADDED,Ct,pe),He.on(rt.METRIC_UPDATED,Ct,pe),He.on(rt.PLAYBACK_ERROR,hn,pe),He.on(y.Z.BECAME_REPORTING_PLAYER,Et,pe)},reset:function(){He.off(rt.MANIFEST_UPDATED,ft,pe),He.off(rt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,vt,pe),He.off(rt.METRIC_ADDED,Ct,pe),He.off(rt.METRIC_UPDATED,Ct,pe),He.off(rt.PLAYBACK_ERROR,hn,pe),He.off(y.Z.BECAME_REPORTING_PLAYER,Et,pe)}}}v.__dashjs_factory_name="DVBErrorsTranslator";var D=dashjs.FactoryMaker.getSingletonFactory(v),m=S(2295);function T(K){K=K||{};var pe,ce,He=!1,_t=this.context,ot=K.mediaElement;return pe={initialize:function(rt){rt&&rt.length&&(rt.forEach(function(et){var ft=et.starttime,vt=ft+et.duration;ce.add(ft,vt)}),He=!!rt[0]._useWallClockTime)},reset:function(){ce.clear()},isEnabled:function(){var rt,et=ce.length;if(!et)return!0;rt=He?new Date().getTime()/1e3:ot.currentTime;for(var ft=0;ft<et;ft+=1){var vt=ce.start(ft),Et=ce.end(ft);if(vt<=rt&&rt<Et)return!0}return!1}},ce=(0,m.Z)(_t).create(),pe}T.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(T);function N(){return{serialise:function K(pe){var ce,He,_t=[],ot=[];for(ce in pe)if(pe.hasOwnProperty(ce)&&ce.indexOf("_")!==0){if((He=pe[ce])==null&&(He=""),Array.isArray(He)){if(!He.length)continue;ot=[],He.forEach(function(rt){var et=Object.prototype.toString.call(rt).slice(8,-1)!=="Object";ot.push(et?rt:K(rt))}),He=ot.map(encodeURIComponent).join(",")}else typeof He=="string"?He=encodeURIComponent(He):He instanceof Date?He=He.toISOString():typeof He=="number"&&(He=Math.round(He));_t.push(ce+"="+He)}return _t.join("&")}}}N.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(N);function I(){var K,pe,ce,He=window.crypto||window.msCrypto,_t=Uint32Array,ot=Math.pow(2,8*_t.BYTES_PER_ELEMENT)-1;function rt(){He&&(K||(K=new _t(10)),He.getRandomValues(K),pe=0)}return ce={random:function(et,ft){var vt;return et||(et=0),ft||(ft=1),He?(pe===K.length&&rt(),vt=K[pe]/ot,pe+=1):vt=Math.random(),vt*(ft-et)+et}},rt(),ce}I.__dashjs_factory_name="RNG";var C=dashjs.FactoryMaker.getSingletonFactory(I),j=S(5717);function Y(K){var pe;K=K||{};var ce,He,_t,ot,rt,et,ft,vt=this.context,Et=[],Ct=K.metricsConstants;function hn(){ot=!1,rt=!1,et=null,ft=null}return pe={report:function(Xt,nn){Array.isArray(nn)||(nn=[nn]),rt&&ft.isEnabled()&&nn.forEach(function(Ot){var Un=ce.serialise(Ot);Xt!==Ct.DVB_ERRORS&&(Un="metricname=".concat(Xt,"&").concat(Un)),function(gr,Pr,dr){var ei=new XMLHttpRequest;ei.withCredentials=He.getXHRWithCredentialsForType(Ct.HTTP_REQUEST_DVB_REPORTING_TYPE);var Ji=function(){var Or=Et.indexOf(ei);Or!==-1&&(Et.splice(Or,1),!(ei.status>=200&&ei.status<300)&&dr&&dr())};Et.push(ei);try{ei.open("GET",gr),ei.onloadend=Ji,ei.onerror=Ji,ei.send()}catch(Or){ei.onerror()}}(Un="".concat(et,"?").concat(Un),0,function(){rt=!1})})},initialize:function(Xt,nn){var Ot;if(ft=nn,!(et=Xt.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");ot||((Ot=Xt.dvbProbability)&&(Ot===1e3||Ot/1e3>=_t.random())&&(rt=!0),ot=!0)},reset:function(){hn()}},ce=_(vt).getInstance(),_t=C(vt).getInstance(),He=(0,j.Z)(vt).getInstance(),hn(),pe}Y.__dashjs_factory_name="DVBReporting";var $=dashjs.FactoryMaker.getClassFactory(Y);function W(K){K=K||{};var pe,ce={"urn:dvb:dash:reporting:2014":$},He=this.context,_t=K.debug?K.debug.getLogger(pe):{},ot=K.metricsConstants,rt=K.mediaPlayerModel||{};return{create:function(et,ft){var vt;try{(vt=ce[et.schemeIdUri](He).create({metricsConstants:ot,mediaPlayerModel:rt})).initialize(et,ft)}catch(Et){vt=null,_t.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(et.schemeIdUri," (").concat(Et.message,")"))}return vt},register:function(et,ft){ce[et]=ft},unregister:function(et){delete ce[et]}}}W.__dashjs_factory_name="ReportingFactory";var ue=dashjs.FactoryMaker.getSingletonFactory(W);function x(K){var pe=[],ce=ue(this.context).getInstance(K);return{initialize:function(He,_t){He.some(function(ot){var rt=ce.create(ot,_t);if(rt)return pe.push(rt),!0})},reset:function(){pe.forEach(function(He){return He.reset()}),pe=[]},report:function(He,_t){pe.forEach(function(ot){return ot.report(He,_t)})}}}x.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(x);function de(){return{reconstructFullMetricName:function(K,pe,ce){var He=K;return pe&&(He+="("+pe,ce&&ce.length&&(He+=","+ce),He+=")"),He},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}de.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(de);function ve(K){var pe,ce,He,_t,ot;K=K||{};var rt=this.context,et=oe(rt).getInstance(),ft=[],vt=K.metricsConstants;function Et(){var Ct=function(){try{return Object.keys(ft).map(function(hn){return ft[hn]}).reduce(function(hn,Xt){return hn.level<Xt.level?hn:Xt})}catch(hn){return}}();Ct&&ot!==Ct.t&&(ot=Ct.t,pe.report(He,Ct))}return{initialize:function(Ct,hn,Xt){hn&&(ce=et.validateN(Xt),pe=hn,He=et.reconstructFullMetricName(Ct,Xt),_t=setInterval(Et,ce))},reset:function(){clearInterval(_t),_t=null,ce=0,pe=null,ot=null},handleNewMetric:function(Ct,hn,Xt){Ct===vt.BUFFER_LEVEL&&(ft[Xt]=hn)}}}ve.__dashjs_factory_name="BufferLevelHandler";var Ce=dashjs.FactoryMaker.getClassFactory(ve),Xe=dashjs.FactoryMaker.getClassFactory(function(K){var pe,ce=(K=K||{}).eventBus,He=K.metricsConstants;function _t(){ce.off(y.Z.METRICS_INITIALISATION_COMPLETE,_t,this),ce.trigger(y.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(ot,rt){rt&&(pe=rt,ce.on(y.Z.METRICS_INITIALISATION_COMPLETE,_t,this))},reset:function(){pe=null},handleNewMetric:function(ot,rt){ot===He.DVB_ERRORS&&pe&&pe.report(ot,rt)}}});function Ae(K){var pe,ce,He,_t,ot;K=K||{};var rt=[],et=oe(this.context).getInstance(),ft=K.metricsConstants;function vt(){var Et=rt;Et.length&&pe&&pe.report(_t,Et),rt=[]}return{initialize:function(Et,Ct,hn,Xt){Ct&&(ce=et.validateN(hn),pe=Ct,Xt&&Xt.length&&(He=Xt),_t=et.reconstructFullMetricName(Et,hn,Xt),ot=setInterval(vt,ce))},reset:function(){clearInterval(ot),ot=null,ce=null,He=null,rt=[],pe=null},handleNewMetric:function(Et,Ct){Et===ft.HTTP_REQUEST&&(He&&He!==Ct.type||rt.push(Ct))}}}Ae.__dashjs_factory_name="HttpListHandler";var Ze=dashjs.FactoryMaker.getClassFactory(Ae);function it(){var K,pe;return{initialize:function(ce,He){K=ce,pe=He},reset:function(){pe=null,K=void 0},handleNewMetric:function(ce,He){ce===K&&pe&&pe.report(K,He)}}}it.__dashjs_factory_name="GenericMetricHandler";var st=dashjs.FactoryMaker.getClassFactory(it);function Ye(K){var pe,ce=(K=K||{}).debug?K.debug.getLogger(pe):{},He=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,_t=this.context,ot={BufferLevel:Ce,DVBErrors:Xe,HttpList:Ze,PlayList:st,RepSwitchList:st,TcpList:st};return{create:function(rt,et){var ft,vt=rt.match(He);if(vt){try{(ft=ot[vt[1]](_t).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(vt[1],et,vt[3],vt[5])}catch(Et){ft=null,ce.error("MetricsHandlerFactory: Could not create handler for type ".concat(vt[1]," with args ").concat(vt[3],", ").concat(vt[5]," (").concat(Et.message,")"))}return ft}},register:function(rt,et){ot[rt]=et},unregister:function(rt){delete ot[rt]}}}Ye.__dashjs_factory_name="MetricsHandlerFactory";var lt=dashjs.FactoryMaker.getSingletonFactory(Ye);function At(K){K=K||{};var pe,ce=[],He=this.context,_t=K.eventBus,ot=K.events,rt=lt(He).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function et(ft){ce.forEach(function(vt){vt.handleNewMetric(ft.metric,ft.value,ft.mediaType)})}return pe={initialize:function(ft,vt){ft.split(",").forEach(function(Et,Ct,hn){var Xt;if(Et.indexOf("(")!==-1&&Et.indexOf(")")===-1){var nn=hn[Ct+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(Et+=","+nn,delete hn[Ct+1])}(Xt=rt.create(Et,vt))&&ce.push(Xt)}),_t.on(ot.METRIC_ADDED,et,pe),_t.on(ot.METRIC_UPDATED,et,pe)},reset:function(){_t.off(ot.METRIC_ADDED,et,pe),_t.off(ot.METRIC_UPDATED,et,pe),ce.forEach(function(ft){return ft.reset()}),ce=[]}}}At.__dashjs_factory_name="MetricsHandlersController";var Oe=dashjs.FactoryMaker.getClassFactory(At);function Qe(K){var pe,ce,He;K=K||{};var _t=this.context;function ot(){pe&&pe.reset(),ce&&ce.reset(),He&&He.reset()}return{initialize:function(rt){try{(He=U(_t).create({mediaElement:K.mediaElement})).initialize(rt.Range),(ce=X(_t).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(rt.Reporting,He),(pe=Oe(_t).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(rt.metrics,ce)}catch(et){throw ot(),et}},reset:ot}}Qe.__dashjs_factory_name="MetricsController";var ct=dashjs.FactoryMaker.getClassFactory(Qe),Qt=function K(){(function(pe,ce){if(!(pe instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},Kt=function K(){(function(pe,ce){if(!(pe instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Tt=function K(){(function(pe,ce){if(!(pe instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Pt(K){var pe=(K=K||{}).adapter,ce=K.constants;return{getMetrics:function(He){var _t=[];return He&&He.Metrics_asArray&&He.Metrics_asArray.forEach(function(ot){var rt=new Qt,et=pe.getIsDynamic(He);ot.hasOwnProperty("metrics")&&(rt.metrics=ot.metrics,ot.Range_asArray&&ot.Range_asArray.forEach(function(ft){var vt=new Kt;vt.starttime=function(Et,Ct,hn){var Xt,nn,Ot=0;return Ct?Ot=pe.getAvailabilityStartTime(Et)/1e3:(Xt=pe.getRegularPeriods(Et)).length&&(Ot=Xt[0].start),nn=Ot,hn&&hn.hasOwnProperty(ce.START_TIME)&&(nn+=hn.starttime),nn}(He,et,ft),ft.hasOwnProperty("duration")?vt.duration=ft.duration:vt.duration=pe.getDuration(He),vt._useWallClockTime=et,rt.Range.push(vt)}),ot.Reporting_asArray&&(ot.Reporting_asArray.forEach(function(ft){var vt=new Tt;ft.hasOwnProperty(ce.SCHEME_ID_URI)&&(vt.schemeIdUri=ft.schemeIdUri,ft.hasOwnProperty("value")&&(vt.value=ft.value),ft.hasOwnProperty(ce.DVB_REPORTING_URL)&&(vt.dvbReportingUrl=ft[ce.DVB_REPORTING_URL]),ft.hasOwnProperty(ce.DVB_PROBABILITY)&&(vt.dvbProbability=ft[ce.DVB_PROBABILITY]),rt.Reporting.push(vt))}),_t.push(rt)))}),_t}}}Pt.__dashjs_factory_name="ManifestParsing";var Ie=dashjs.FactoryMaker.getSingletonFactory(Pt);function ne(K){var pe;K=K||{};var ce={},He=this.context,_t=K.eventBus,ot=K.events;function rt(ft){if(!ft.error){var vt=Object.keys(ce);Ie(He).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ft.manifest).forEach(function(Et){var Ct=JSON.stringify(Et);if(ce.hasOwnProperty(Ct))vt.splice(Ct,1);else try{var hn=ct(He).create(K);hn.initialize(Et),ce[Ct]=hn}catch(Xt){}}),vt.forEach(function(Et){ce[Et].reset(),delete ce[Et]}),_t.trigger(y.Z.METRICS_INITIALISATION_COMPLETE)}}function et(){Object.keys(ce).forEach(function(ft){ce[ft].reset()}),ce={}}return pe={reset:function(){_t.off(ot.MANIFEST_UPDATED,rt,pe),_t.off(ot.STREAM_TEARDOWN_COMPLETE,et,pe)}},_t.on(ot.MANIFEST_UPDATED,rt,pe),_t.on(ot.STREAM_TEARDOWN_COMPLETE,et,pe),pe}ne.__dashjs_factory_name="MetricsCollectionController";var Fe=dashjs.FactoryMaker.getClassFactory(ne);function O(){var K=this.context;return{createMetricsReporting:function(pe){return D(K).getInstance({eventBus:pe.eventBus,dashMetrics:pe.dashMetrics,metricsConstants:pe.metricsConstants,events:pe.events}).initialize(),Fe(K).create(pe)},getReportingFactory:function(){return ue(K).getInstance()},getMetricsHandlerFactory:function(){return lt(K).getInstance()}}}O.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(O);M.events=y.Z,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,M);var q=M},1180:function(b,g,S){function F(m){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},F(m)}function R(m,T){return R=Object.setPrototypeOf||function(U,N){return U.__proto__=N,U},R(m,T)}function y(m,T){return!T||F(T)!=="object"&&typeof T!="function"?function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),C&&R(I,C)})(_,m);var T,U,N=(T=_,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,C=v(T);if(U){var j=v(this).constructor;I=Reflect.construct(C,arguments,j)}else I=C.apply(this,arguments);return y(this,I)});function _(){var I;return function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(S(8342).Z));g.Z=D},5717:function(b,g,S){var F=S(2610),R=S(5448),y=S(1264),v=S(3106),D=S(1767),m=S(3393);function T(){var U,N,_,I,C,j,Y,$,W=this.context,ue=(0,y.Z)(W).getInstance();function x(){I=[],C=[],j=[],$=[],Y=null,N=[]}function X(Ce,Xe){var Ae=-1;Ce.some(function(Ze,it){if(Ze===Xe)return Ae=it,!0}),Ae<0||Ce.splice(Ae,1)}function de(Ce){var Xe;for(Xe=0;Xe<$.length;Xe++)if($[Xe].rulename===Ce)return Xe;return-1}function oe(Ce,Xe){ve(Ce,Xe);var Ae=new F.Z;Ae.schemeIdUri=Ce,Ae.value=Xe,N.push(Ae)}function ve(Ce,Xe){(0,v.PS)(Ce,"string"),(0,v.PS)(Xe,"string"),N.forEach(function(Ae,Ze){Ae.schemeIdUri===Ce&&Ae.value===Xe&&N.splice(Ze,1)})}return U={getCustomInitialTrackSelectionFunction:function(){return Y},setCustomInitialTrackSelectionFunction:function(Ce){Y=Ce},resetCustomInitialTrackSelectionFunction:function(){Y=null},getLicenseResponseFilters:function(){return C},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return j},registerCustomCapabilitiesFilter:function(Ce){j.push(Ce)},registerLicenseResponseFilter:function(Ce){C.push(Ce)},registerLicenseRequestFilter:function(Ce){I.push(Ce)},unregisterCustomCapabilitiesFilter:function(Ce){X(j,Ce)},unregisterLicenseResponseFilter:function(Ce){X(C,Ce)},unregisterLicenseRequestFilter:function(Ce){X(I,Ce)},addAbrCustomRule:function(Ce,Xe,Ae){if(typeof Ce!="string"||Ce!==D.Z.ABANDON_FRAGMENT_RULES&&Ce!==D.Z.QUALITY_SWITCH_RULES||typeof Xe!="string")throw m.Z.BAD_ARGUMENT_ERROR;var Ze=de(Xe);Ze===-1?$.push({type:Ce,rulename:Xe,rule:Ae}):($[Ze].type=Ce,$[Ze].rule=Ae)},removeAllAbrCustomRule:function(){$=[]},removeAbrCustomRule:function(Ce){if(Ce){var Xe=de(Ce);Xe!==-1&&$.splice(Xe,1)}else $=[]},getAbrCustomRules:function(){return $},addUTCTimingSource:oe,removeUTCTimingSource:ve,getUTCTimingSources:function(){return N},clearDefaultUTCTimingSources:function(){N=[]},restoreDefaultUTCTimingSources:function(){var Ce=ue.get().streaming.utcSynchronization.defaultTimingSource;oe(Ce.scheme,Ce.value)},setXHRWithCredentialsForType:function Ce(Xe,Ae){Xe?_[Xe]=!!Ae:Object.keys(_).forEach(function(Ze){Ce(Ze,Ae)})},getXHRWithCredentialsForType:function(Ce){var Xe=_[Ce];return Xe===void 0?_.default:Xe},setConfig:function(){},reset:function(){x()}},_={default:!1},x(),U}T.__dashjs_factory_name="CustomParametersModel",g.Z=R.Z.getSingletonFactory(T)},9032:function(b,g,S){var F=S(5448),R=S(7473);function y(D){var m=(D=D||{}).requestModifier;function T(U){var N=new Date,_=U.request,I=new XMLHttpRequest;if(I.open(U.method,U.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=N),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:U.url})),U.headers)for(var C in U.headers){var j=U.headers[C];j&&I.setRequestHeader(C,j)}I.withCredentials=U.withCredentials,I.onload=U.onload,I.onloadend=U.onend,I.onerror=U.onerror,I.onprogress=U.progress,I.onabort=U.onabort,I.ontimeout=U.ontimeout,I.timeout=U.timeout,I.send(),U.response=I}return{load:function(U){m&&m.modifyRequest?(0,R.k)(U,m).then(function(){return T(U)}):T(U)},abort:function(U){var N=U.response;N.onloadend=N.onerror=N.onprogress=void 0,N.abort()}}}y.__dashjs_factory_name="XHRLoader";var v=F.Z.getClassFactory(y);g.Z=v},1737:function(b,g,S){function F(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}S.d(g,{default:function(){return Ou}});var R={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},y=function(){function tn(){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(St){for(var zt=null,Nt=0;Nt<St.length;++Nt){var Vt=St[Nt];Vt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Vt.value.toLowerCase()!=="cenc"&&Vt.value.toLowerCase()!=="cbcs"||(zt=Vt)}return zt}},{key:"getPSSHData",value:function(St){var zt=8,Nt=new DataView(St),Vt=Nt.getUint8(zt);return zt+=20,Vt>0&&(zt+=4+16*Nt.getUint32(zt)),zt+=4,St.slice(zt)}},{key:"getPSSHForKeySystem",value:function(St,zt){var Nt=tn.parsePSSHList(zt);return St&&Nt.hasOwnProperty(St.uuid.toLowerCase())?Nt[St.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(St,zt){return"pssh"in St?(St.pssh.__text=St.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),zt.decodeArray(St.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(St){if(St==null)return[];for(var zt=new DataView(St.buffer||St),Nt={},Vt=0;;){var mn,In,Zn=void 0,Cn=Vt;if(Vt>=zt.buffer.byteLength)break;if(mn=Vt+zt.getUint32(Vt),Vt+=4,zt.getUint32(Vt)===1886614376)if(Vt+=4,(In=zt.getUint8(Vt))===0||In===1){Vt++,Vt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;for(Vt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=zt.getUint8(Vt+Rn).toString(16)).length===1?"0"+on:on;Vt+=6,Vt+=4,Nt[Zn=Zn.toLowerCase()]=zt.buffer.slice(Cn,mn),Vt=mn}else Vt=mn;else Vt=mn}return Nt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(St,zt){try{if(!St||St.length===0)return null;for(var Nt=0,Vt=null;Nt<St.length&&!Vt;){var mn=St[Nt];if(mn&&mn.contentProtection&&mn.contentProtection.length>0){var In=mn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===zt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!Vt;){for(var Cn=In[Zn],Rn=0;Rn<R.attributes.length&&!Vt;){for(var on=0,Bn=R.attributes[Rn];on<R.prefixes.length&&!Vt;){var kn=R.prefixes[on];Cn[Bn]&&Cn[Bn].__prefix&&Cn[Bn].__prefix===kn&&Cn[Bn].__text&&(Vt=Cn[Bn].__text),on+=1}Rn+=1}Zn+=1}}Nt+=1}return Vt}catch(er){return null}}}],an&&F(sn,an),tn}(),v=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},D=function tn(sn,an,St,zt,Nt){(function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=St,this.persistentState=zt,this.sessionTypes=Nt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,St){return an.__proto__=St,an},T(tn,sn)}function U(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function N(tn){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},N(tn)}var _=new(function(tn){(function(Nt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),Vt&&T(Nt,Vt)})(zt,tn);var sn,an,St=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Nt){return!1}}(),function(){var Nt,Vt=N(sn);if(an){var mn=N(this).constructor;Nt=Reflect.construct(Vt,arguments,mn)}else Nt=Vt.apply(this,arguments);return U(this,Nt)});function zt(){var Nt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Nt=St.call(this)).MEDIA_KEYERR_CODE=100,Nt.MEDIA_KEYERR_UNKNOWN_CODE=101,Nt.MEDIA_KEYERR_CLIENT_CODE=102,Nt.MEDIA_KEYERR_SERVICE_CODE=103,Nt.MEDIA_KEYERR_OUTPUT_CODE=104,Nt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Nt.MEDIA_KEYERR_DOMAIN_CODE=106,Nt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Nt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Nt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Nt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Nt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Nt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Nt.KEY_SESSION_CREATED_ERROR_CODE=113,Nt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Nt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Nt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Nt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Nt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Nt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Nt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Nt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Nt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Nt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Nt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Nt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Nt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Nt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Nt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Nt}return zt}(S(2230).Z)),I=S(5459),C=function tn(sn,an,St,zt,Nt,Vt,mn,In){(function(Zn,Cn){if(!(Zn instanceof Cn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=St,this.headers=zt,this.withCredentials=Nt,this.messageType=Vt,this.sessionId=mn,this.data=In},j=function tn(sn,an,St){(function(zt,Nt){if(!(zt instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=St},Y=S(7855),$=S(703),W=S(3393),ue=S(5448);function x(tn){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},x(tn)}function X(tn){var sn,an,St,zt,Nt,Vt,mn,In,Zn,Cn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Vn=tn.constants,rn=[],cn=tn.cmcdModel,bn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function br(_n,Xn){In||Zn?In&&Lr():function(hr,ti){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Di,ui){return(Nt&&Nt[Di.ks.systemString]&&Nt[Di.ks.systemString].priority>=0?Nt[Di.ks.systemString].priority:hr.length)-(Nt&&Nt[ui.ks.systemString]&&Nt[ui.ks.systemString].priority>=0?Nt[ui.ks.systemString].priority:hr.length)});for(var Xr=0;Xr<hr.length;Xr++){var na=wo(hr[Xr]);Bi.push({ks:hr[Xr].ks,configs:[na],protData:hr[Xr].protData})}Bn.requestKeySystemAccess(Bi).then(function(Di){var ui=(Mr=Di.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+ui+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Di){if(In=Di,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var ui=qr(In);ui&&ui.serverCertificate&&ui.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(ui.serverCertificate).buffer),Lr()}}).catch(function(Di){In=null,Zn=!1,ti||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Di.error)})})}}(_n,Xn)}function Lr(){for(var _n,Xn=0;Xn<St.length;Xn++)for(_n=0;_n<St[Xn].length;_n++)if(In===St[Xn][_n].ks){Yi(St[Xn][_n]);break}St=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var Xn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(Xn))}_n.sessionId?no(_n):_n.initData!==null&&Br(_n)}function no(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var Xn=y.getPSSHForKeySystem(In,_n?_n.initData:null);if(Xn){if(function(hr){if(!hr)return!1;try{for(var ti=Bn.getSessions(),Mr=0;Mr<ti.length;Mr++)if(ti[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||hi(Xn))return;try{_n.initData=Xn,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var Xn=_n.systemString;if(Nt)return Xn in Nt?Nt[Xn]:null}return null}function hi(_n){if(!_n)return!1;try{for(var Xn=Bn.getAllInitData(),hr=0;hr<Xn.length;hr++)if(on.initDataEquals(_n,Xn[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ti){return!1}}function vi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Ds,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Ds,sn))}function wo(_n){var Xn=_n.protData,hr=[],ti=[],Mr=Xn&&Xn.audioRobustness&&Xn.audioRobustness.length>0?Xn.audioRobustness:mn,Bi=Xn&&Xn.videoRobustness&&Xn.videoRobustness.length>0?Xn.videoRobustness:mn,Xr=_n.sessionType,na=Xn&&Xn.distinctiveIdentifier?Xn.distinctiveIdentifier:"optional",Di=Xn&&Xn.persistentState?Xn.persistentState:Xr==="temporary"?"optional":"required";return zt.forEach(function(ui){ui.type===Vn.AUDIO?hr.push(new v(ui.codec,Mr)):ui.type===Vn.VIDEO&&ti.push(new v(ui.codec,Bi))}),new D(hr,ti,na,Di,[Xr])}function ro(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function ta(_n){an.debug("DRM: onKeyMessage");var Xn=_n.data;kn.trigger(er.KEY_MESSAGE,{data:Xn});var hr=Xn.messageType?Xn.messageType:"license-request",ti=Xn.message,Mr=Xn.sessionToken,Bi=qr(In),Xr=on.getLicenseServerModelInstance(In,Bi,hr),na={sessionToken:Mr,messageType:hr};if(ti&&ti.byteLength!==0){if(!Xr)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void bi(na);if(on.isClearKey(In)){var Di=on.processClearKeyLicenseRequest(In,Bi,ti);if(Di&&Di.keyPairs&&Di.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),bi(na),void Bn.updateKeySession(Mr,Di)}(function(ui,Ao,Wi){var qo=ui.sessionToken,ra=ui.messageType?ui.messageType:"license-request",pt={sessionToken:qo,messageType:ra},ia=In?In.systemString:null,Ps=function(xr,ys,Es,Yr,_c){var Ia=null,bl=Yr.message;if(xr&&xr.serverURL){var sa=xr.serverURL;typeof sa=="string"&&sa!==""?Ia=sa:x(sa)==="object"&&sa.hasOwnProperty(ys)&&(Ia=sa[ys])}else if(xr&&xr.laURL&&xr.laURL!=="")Ia=xr.laURL;else if(!(Ia=y.getLicenseServerUrlFromMediaInfo(zt,In.schemeIdURI))&&!on.isClearKey(In)){var _s=y.getPSSHData(Es.initData);(Ia=In.getLicenseServerURLFromInitData(_s))||(Ia=Yr.laURL)}return Ia=_c.getServerURLFromMessage(Ia,bl,ys)}(Wi,ra,qo,ui,Ao);if(Ps){var pr={},Io=!1;Wi&&yc(pr,Wi.httpRequestHeaders);var cu=ui.message;yc(pr,In.getRequestHeadersFromMessage(cu)),Object.keys(pr).forEach(function(xr){xr.toLowerCase()==="authorization"&&(Io=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(Io=Wi.withCredentials);var Il=function(xr){if(Bn)if(xr.status>=200&&xr.status<=299){var ys=$.Z.parseHttpHeaders(xr.getAllResponseHeaders?xr.getAllResponseHeaders():null),Es=new j(xr.responseURL,ys,xr.response);si(Jn.getLicenseResponseFilters(),Es).then(function(){var Yr=Ao.getLicenseMessage(Es.data,ia,ra);Yr!==null?(bi(pt),Bn.updateKeySession(qo,Yr)):xf(xr,pt,ia,ra,Ao)})}else xf(xr,pt,ia,ra,Ao)},ms=function(xr){bi(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ia+' update, XHR aborted. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},Ha=function(xr){bi(pt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ia+' update, XHR error. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},Lu=In.getLicenseRequestFromMessage(cu),ku=Ao.getHTTPMethod(ra),oa=Ao.getResponseType(ia,ra),aa=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,fu=qo.getSessionId()||null,vs=new C(Ps,ku,oa,pr,Io,ra,fu,Lu),Ec=isNaN(bn.get().streaming.retryAttempts[Y.w.LICENSE])?3:bn.get().streaming.retryAttempts[Y.w.LICENSE];si(Jn.getLicenseRequestFilters(),vs).then(function(){Al(vs,Ec,aa,Il,ms,Ha)})}else bi(pt,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(Xn,Xr,Bi)}else bi(na,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function bi(_n,Xn){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:Xn})}function Al(_n,Xn,hr,ti,Mr,Bi){var Xr=new XMLHttpRequest;if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===W.Z.CMCD_MODE_QUERY){var na=cn.getQueryParameter({url:_n.url,type:Y.w.LICENSE});na&&(_n.url=$.Z.addAditionalQueryParameterToUrl(_n.url,[na]))}for(var Di in Xr.open(_n.method,_n.url,!0),Xr.responseType=_n.responseType,Xr.withCredentials=_n.withCredentials,hr>0&&(Xr.timeout=hr),_n.headers)Xr.setRequestHeader(Di,_n.headers[Di]);if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===W.Z.CMCD_MODE_HEADER){var ui=cn.getHeaderParameters({url:_n.url,type:Y.w.LICENSE});if(ui)for(var Ao in ui){var Wi=ui[Ao];Wi&&Xr.setRequestHeader(Ao,Wi)}}var qo=function(){Xn--;var ra=isNaN(bn.get().streaming.retryIntervals[Y.w.LICENSE])?1e3:bn.get().streaming.retryIntervals[Y.w.LICENSE];Rn=setTimeout(function(){Al(_n,Xn,hr,ti,Mr,Bi)},ra)};Xr.onload=function(){Cn=null,this.status>=200&&this.status<=299||Xn<=0?ti(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Xn),qo())},Xr.ontimeout=Xr.onerror=function(){Cn=null,Xn<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+Xn),qo())},Xr.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),Cn=Xr,Xr.send(_n.data)}function lu(){Cn&&(Cn.onloadend=Cn.onerror=Cn.onprogress=void 0,Cn.abort(),Cn=null),Rn&&(clearTimeout(Rn),Rn=null)}function yc(_n,Xn){if(Xn)for(var hr in Xn)_n[hr]=Xn[hr]}function xf(_n,Xn,hr,ti,Mr){var Bi="NONE",Xr=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ti),Xr={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),bi(Xn,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,Xr))}function si(_n,Xn){return _n?_n.reduce(function(hr,ti){return hr.then(function(){return ti(Xn)})},Promise.resolve()):Promise.resolve()}function Ds(_n,Xn){if(!bn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(zt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Xn=Xn===void 0?1:Xn+1)<5))return void rn.push(setTimeout(function(){Ds(_n,Xn)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ti=y.getPSSHForKeySystem(In,hr);if(ti&&hi(ti))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,Nt,Vt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){St.push(Bi),br(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),zt.push(_n)},clearMediaInfoArray:function(){zt=[]},handleKeySystemFromManifest:function(){if(zt&&zt.length!==0){var _n=[];zt.forEach(function(Xn){var hr=on.getSupportedKeySystemsFromContentProtection(Xn.contentProtection,Nt,Vt);hr.length>0&&(_n.length===0&&(_n=hr),St.push(hr))}),_n&&_n.length>0&&br(_n,!0)}},createKeySession:Br,loadKeySession:no,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:vi,setSessionType:function(_n){Vt=_n},setRobustnessLevel:function(_n){mn=_n},setProtectionData:function(_n){Nt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,Nt,Vt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){lu(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,ta,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),ar(),lu(),vi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],zt=[],St=[]}},an=Er.getLogger(sn),St=[],zt=[],Vt="temporary",mn="",Cn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,ta,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),sn}X.__dashjs_factory_name="ProtectionController";var de=ue.Z.getClassFactory(X),oe=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function ve(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}var Ce=function(){function tn(St,zt){if(function(Nt,Vt){if(!(Nt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,tn),zt&&zt!=="persistent"&&zt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=St,this.type=zt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var St,zt=this.keyPairs.length,Nt={keys:[]};for(St=0;St<zt;St++){var Vt={kty:"oct",alg:"A128KW",kid:this.keyPairs[St].keyID,k:this.keyPairs[St].key};Nt.keys.push(Vt)}this.type&&(Nt.type=this.type);var mn=JSON.stringify(Nt),In=mn.length,Zn=new ArrayBuffer(In),Cn=new Uint8Array(Zn);for(St=0;St<In;St++)Cn[St]=mn.charCodeAt(St);return Zn}}])&&ve(sn.prototype,an),tn}();function Xe(tn,sn){for(var an=0;an<sn.length;an++){var St=sn[an];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(tn,St.key,St)}}var Ae=new(function(){function tn(){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Xe(sn.prototype,an),tn}()),Ze="e2719d58-a985-b3c9-781a-b030af78d30e",it=Ae.CLEARKEY_KEYSTEM_STRING,st="urn:uuid:"+Ze;function Ye(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Ze,schemeIdURI:st,systemString:it,getInitData:function(an,St){try{var zt=y.parseInitDataFromContentProtection(an,sn);if(!zt&&St){var Nt={kids:[function(Vt){try{var mn=Vt.replace(/-/g,"");return(mn=btoa(mn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(St["cenc:default_KID"])]};zt=new TextEncoder().encode(JSON.stringify(Nt))}return zt}catch(Vt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,St){var zt=null;if(an){for(var Nt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(St))),Vt=[],mn=0;mn<Nt.kids.length;mn++){var In=Nt.kids[mn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");Vt.push(new oe(In,Zn))}zt=new Ce(Vt)}return zt}}}Ye.__dashjs_factory_name="KeySystemClearKey";var lt=dashjs.FactoryMaker.getSingletonFactory(Ye),At="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Oe=Ae.CLEARKEY_KEYSTEM_STRING,Qe="urn:uuid:"+At;function ct(tn){var sn,an=tn.BASE64,St=tn.debug.getLogger(sn);return{uuid:At,schemeIdURI:Qe,systemString:Oe,getInitData:function(zt){return y.parseInitDataFromContentProtection(zt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(zt){return new Uint8Array(zt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(zt,Nt){var Vt=null;if(zt){for(var mn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Nt))),In=[],Zn=0;Zn<mn.kids.length;Zn++){var Cn=mn.kids[Zn],Rn=zt.clearkeys&&zt.clearkeys.hasOwnProperty(Cn)?zt.clearkeys[Cn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+Cn+") is not known!");In.push(new oe(Cn,Rn))}Vt=new Ce(In),St.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Vt}}}ct.__dashjs_factory_name="KeySystemW3CClearKey";var Qt=dashjs.FactoryMaker.getSingletonFactory(ct),Kt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Tt=Ae.WIDEVINE_KEYSTEM_STRING,Pt="urn:uuid:"+Kt;function Ie(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Kt,schemeIdURI:Pt,systemString:Tt,getInitData:function(an){return y.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ie.__dashjs_factory_name="KeySystemWidevine";var ne=dashjs.FactoryMaker.getSingletonFactory(Ie),Fe="9a04f079-9840-4286-ab92-e65be0885f95",O=Ae.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+Fe;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,St=tn.settings;function zt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Fe,schemeIdURI:M,systemString:O,getInitData:function(Nt){var Vt,mn,In,Zn,Cn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(zt(),!Nt)return null;if("pssh"in Nt)return y.parseInitDataFromContentProtection(Nt,an);if("pro"in Nt)kn=an.decodeArray(Nt.pro.__text);else{if(!("prheader"in Nt))return null;kn=an.decodeArray(Nt.prheader.__text)}return Vt=kn.length,mn=4+Rn.length+on.length+4+Vt,In=new ArrayBuffer(mn),Zn=new Uint8Array(In),(Cn=new DataView(In)).setUint32(Bn,mn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,Cn.setUint32(Bn,Vt),Bn+=4,Zn.set(kn,Bn),Bn+=Vt,Zn.buffer},getRequestHeadersFromMessage:function(Nt){var Vt,mn,In={},Zn=new DOMParser;if(St&&St.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Nt&&Nt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var Cn=sn==="utf-16"?new Uint16Array(Nt):new Uint8Array(Nt);Vt=String.fromCharCode.apply(null,Cn);for(var Rn=(mn=Zn.parseFromString(Vt,"application/xml")).getElementsByTagName("name"),on=mn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(Nt){var Vt=null,mn=new DOMParser;if(St&&St.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Nt&&Nt.byteLength%2==1)return Nt;var In=sn==="utf-16"?new Uint16Array(Nt):new Uint8Array(Nt);zt();var Zn=String.fromCharCode.apply(null,In),Cn=mn.parseFromString(Zn,"application/xml");if(!Cn.getElementsByTagName("PlayReadyKeyMessage")[0])return Nt;var Rn=Cn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(Vt=an.decode(Rn)),Vt},getLicenseServerURLFromInitData:function(Nt){if(Nt)for(var Vt=new DataView(Nt),mn=Vt.getUint16(4,!0),In=6,Zn=new DOMParser,Cn=0;Cn<mn;Cn++){var Rn=Vt.getUint16(In,!0);In+=2;var on=Vt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=Nt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(Nt){var Vt,mn,In,Zn;if(zt(),!Nt)return null;for(Vt=[],Zn=0;Zn<Nt.length;++Zn)Vt.push(Nt.charCodeAt(Zn)),Vt.push(0);for(Vt=String.fromCharCode.apply(null,Vt),Vt=an.encode(Vt),mn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Vt),In=[],Zn=0;Zn<mn.length;++Zn)In.push(mn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(Nt){if(Nt!=="utf-8"&&Nt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=Nt}}}q.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(q);function pe(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Ae.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(St){return sn.decodeArray(St.license)},getErrorResponse:function(St){return St}},an[Ae.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(St){return St},getErrorResponse:function(St){return String.fromCharCode.apply(null,new Uint8Array(St))}},{getServerURLFromMessage:function(St){return St},getHTTPMethod:function(){return"POST"},getResponseType:function(St){return an[St].responseType},getLicenseMessage:function(St,zt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[zt].getLicenseMessage(St)},getErrorResponse:function(St,zt){return an[zt].getErrorResponse(St)}}}pe.__dashjs_factory_name="DRMToday";var ce=dashjs.FactoryMaker.getSingletonFactory(pe);function He(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(zt){var Nt=String.fromCharCode.apply(null,new Uint8Array(zt));return decodeURIComponent(escape(Nt))}function an(zt){if(window.DOMParser){var Nt=sn(zt),Vt=new window.DOMParser().parseFromString(Nt,"text/xml"),mn=Vt?Vt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=mn?mn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return zt}function St(zt){var Nt="",Vt="",mn="",In=-1,Zn=-1;if(window.DOMParser){var Cn=sn(zt),Rn=new window.DOMParser().parseFromString(Cn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return Cn;Nt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(Vt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(mn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?mn.lastIndexOf("[")+1:-1,Zn=mn?mn.indexOf("]"):-1,mn=mn?mn.substring(In,Zn):"")}var Vn="code: ".concat(Vt,", name: ").concat(Nt);return mn&&(Vn+=", message: ".concat(mn)),Vn}return{getServerURLFromMessage:function(zt){return zt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(zt){return an.call(this,zt)},getErrorResponse:function(zt){return St.call(this,zt)}}}He.__dashjs_factory_name="PlayReady";var _t=ue.Z.getSingletonFactory(He);function ot(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}ot.__dashjs_factory_name="Widevine";var rt=dashjs.FactoryMaker.getSingletonFactory(ot);function et(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var St=tn.keys[an],zt=St.kid.replace(/=/g,""),Nt=St.k.replace(/=/g,"");sn.push(new oe(zt,Nt))}return new Ce(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}et.__dashjs_factory_name="ClearKey";var ft=dashjs.FactoryMaker.getSingletonFactory(et);function vt(){var tn,sn,an,St,zt,Nt,Vt,mn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function Cn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;St=[],on=K(In).getInstance({BASE64:zt,settings:Nt}),St.push(on),on=ne(In).getInstance({BASE64:zt}),St.push(on),on=lt(In).getInstance({BASE64:zt}),St.push(on),Vt=on,on=Qt(In).getInstance({BASE64:zt,debug:sn}),St.push(on),mn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<St.length;er++){var Er=St[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===Vt||on===mn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return St},setKeySystems:function(on){St=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<St.length;Bn++)if(St[Bn].systemString===on)return St[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Vn,rn=[];if(on){var cn=y.findCencContentProtection(on);for(Ur=0;Ur<St.length;++Ur){var bn=Zn((Er=St[Ur]).systemString,Bn);for(Vn=0;Vn<on.length;++Vn)if((er=on[Vn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,cn);rn.push({ks:St[Ur],keyId:er.keyId,initData:Jn,protData:bn,cdmData:Er.getCDMData(bn?bn.cdmData:null),sessionId:Cn(bn,er),sessionType:Rn(bn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=y.parsePSSHList(on),Vn=0;Vn<St.length;++Vn){var rn=Zn((er=St[Vn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:Cn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=ce(In).getInstance({BASE64:zt}):on.systemString===Ae.WIDEVINE_KEYSTEM_STRING?er=rt(In).getInstance():on.systemString===Ae.PLAYREADY_KEYSTEM_STRING?er=_t(In).getInstance():on.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(er=ft(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(zt=on.BASE64),on.settings&&(Nt=on.settings))}},tn}vt.__dashjs_factory_name="ProtectionKeyController";var Et=dashjs.FactoryMaker.getSingletonFactory(vt);function Ct(tn){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Ct(tn)}function hn(tn,sn){return hn=Object.setPrototypeOf||function(an,St){return an.__proto__=St,an},hn(tn,sn)}function Xt(tn,sn){return!sn||Ct(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Ot=new(function(tn){(function(Nt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),Vt&&hn(Nt,Vt)})(zt,tn);var sn,an,St=(sn=zt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Nt){return!1}}(),function(){var Nt,Vt=nn(sn);if(an){var mn=nn(this).constructor;Nt=Reflect.construct(Vt,arguments,mn)}else Nt=Vt.apply(this,arguments);return Xt(this,Nt)});function zt(){var Nt;return function(Vt,mn){if(!(Vt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,zt),(Nt=St.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Nt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Nt.KEY_ADDED="public_keyAdded",Nt.KEY_ERROR="public_keyError",Nt.KEY_MESSAGE="public_keyMessage",Nt.KEY_SESSION_CLOSED="public_keySessionClosed",Nt.KEY_SESSION_CREATED="public_keySessionCreated",Nt.KEY_SESSION_REMOVED="public_keySessionRemoved",Nt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Nt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Nt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Nt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Nt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Nt.NEED_KEY="needkey",Nt.PROTECTION_CREATED="public_protectioncreated",Nt.PROTECTION_DESTROYED="public_protectiondestroyed",Nt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Nt.TEARDOWN_COMPLETE="protectionTeardownComplete",Nt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Nt.KEY_SESSION_UPDATED="public_keySessionUpdated",Nt}return zt}(S(8342).Z)),Un=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,St,zt){(function(Nt,Vt){if(!(Nt instanceof Vt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=St,this.messageType=zt||"license-request"},Pr=function tn(sn,an){(function(St,zt){if(!(St instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ei(tn){tn=tn||{};var sn,an,St,zt,Nt,Vt,mn,In,Zn=this.context,Cn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,cn,bn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var br=rn[cn].protData&&rn[cn].protData.systemStringPriority?rn[cn].protData.systemStringPriority:null,Lr=rn[cn].configs,Yi=rn[cn].ks,no=Yi.systemString;(function(Br,qr){return new Promise(function(hi,vi){kn(Br,qr,0,hi,vi)})})(br||(dr[no]?dr[no]:[no]),Lr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,hi=new Pr(Yi,qr);hi.mksa=Br,Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:hi}),bn({data:hi})}).catch(function(Br){if(cn+1<rn.length)Bn(rn,cn+1,bn,Jn);else{var qr="Key system access denied! ";Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,cn,bn,Jn,ar){var br=rn[bn];an.debug("Requesting key system access for system string ".concat(br)),navigator.requestMediaKeySystemAccess(br,cn).then(function(Lr){Lr.selectedSystemString=br,Jn(Lr)}).catch(function(Lr){bn+1<rn.length?kn(rn,cn,bn+1,Jn,ar):ar(Lr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var cn=rn.session;return cn.removeEventListener("keystatuseschange",rn),cn.removeEventListener("message",rn),cn.close()}function Er(rn){for(var cn=0;cn<Vt.length;cn++)if(Vt[cn]===rn){Vt.splice(cn,1);break}}function Ur(rn){var cn,bn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?cn=rn[0]:bn=rn[0]),rn[1]&&(typeof rn[1]=="string"?cn=rn[1]:bn=rn[1])),{status:cn,keyId:bn}}function Vn(rn,cn){var bn={session:rn,keyId:cn.keyId,initData:cn.initData,sessionId:cn.sessionId,sessionType:cn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":Cn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var br=Ur(arguments);br.status==="expired"?Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,br)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;Cn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",bn),rn.addEventListener("message",bn),rn.closed.then(function(){Er(bn),an.debug("DRM: Session closed.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:bn.getSessionId()})}),Vt.push(bn),bn}return sn={getAllInitData:function(){for(var rn=[],cn=0;cn<Vt.length;cn++)Vt[cn].initData&&rn.push(Vt[cn].initData);return rn},getSessions:function(){return Vt},requestKeySystemAccess:function(rn){return new Promise(function(cn,bn){Bn(rn,0,cn,bn)})},selectKeySystem:function(rn){return new Promise(function(cn,bn){rn.mksa.createMediaKeys().then(function(Jn){return St=rn.keySystem,Nt=Jn,zt?zt.setMediaKeys(Nt):Promise.resolve()}).then(function(){cn(St)}).catch(function(){bn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){zt!==rn&&(zt&&(zt.removeEventListener("encrypted",mn),zt.setMediaKeys&&zt.setMediaKeys(null)),(zt=rn)&&(zt.addEventListener("encrypted",mn),zt.setMediaKeys&&Nt&&zt.setMediaKeys(Nt)))},setServerCertificate:function(rn){if(!St||!Nt)throw new Error("Can not set server certificate until you have selected a key system");Nt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(cn){Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+cn.name)})})},createKeySession:function(rn){if(!St||!Nt)throw new Error("Can not create sessions until you have selected a key system");var cn=Nt.createSession(rn.sessionType),bn=Vn(cn,rn),Jn=St.systemString===Ae.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Ae.INITIALIZATION_DATA_TYPE_KEYIDS:Ae.INITIALIZATION_DATA_TYPE_CENC;cn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:bn})}).catch(function(ar){Er(bn),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,cn){var bn=rn.session;In.isClearKey(St)&&(cn=cn.toJWK()),bn.update(cn).then(function(){Cn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){Cn.trigger(Rn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!St||!Nt)throw new Error("Can not load sessions until you have selected a key system");for(var cn=rn.sessionId,bn=0;bn<Vt.length;bn++)if(cn===Vt[bn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=Nt.createSession(rn.sessionType),ar=Vn(Jn,rn);Jn.load(cn).then(function(br){br?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+cn+")")}))}).catch(function(br){Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+cn+")! "+br.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(cn){Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+cn.name})})},closeKeySession:function(rn){er(rn).catch(function(cn){Er(rn),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+cn.name})})},stop:function(){for(var rn,cn=0;cn<Vt.length;cn++)(rn=Vt[cn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,cn=Vt.length;cn!==0?function(){for(var bn=function(ar){Er(ar),Vt.length===0&&(zt?(zt.removeEventListener("encrypted",mn),zt.setMediaKeys(null).then(function(){Cn.trigger(Rn.TEARDOWN_COMPLETE)})):Cn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<cn;Jn++)(function(ar){er(rn),bn(ar)})(rn=Vt[Jn])}():Cn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),St=null,zt=null,Nt=null,Vt=[],In=Et(Zn).getInstance(),mn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var cn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;Cn.trigger(Rn.NEED_KEY,{key:new Un(cn,rn.initDataType)})}}},sn}dr[Ae.PLAYREADY_KEYSTEM_STRING]=[Ae.PLAYREADY_KEYSTEM_STRING,Ae.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Ae.WIDEVINE_KEYSTEM_STRING]=[Ae.WIDEVINE_KEYSTEM_STRING],dr[Ae.CLEARKEY_KEYSTEM_STRING]=[Ae.CLEARKEY_KEYSTEM_STRING],ei.__dashjs_factory_name="ProtectionModel_21Jan2015";var Ji=dashjs.FactoryMaker.getClassFactory(ei);function Or(tn){tn=tn||{};var sn,an,St,zt,Nt,Vt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Vn=0;Vn<mn.length;Vn++)Er(mn[Vn]);St&&St.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Vn){var rn=Vn.session;rn.removeEventListener(kn.error,Vn),rn.removeEventListener(kn.message,Vn),rn.removeEventListener(kn.ready,Vn),rn.removeEventListener(kn.close,Vn);for(var cn=0;cn<mn.length;cn++)if(mn[cn]===Vn){mn.splice(cn,1);break}rn[kn.release]()}function Ur(){var Vn=null,rn=function(){St.removeEventListener("loadedmetadata",Vn),St[kn.setMediaKeys](Nt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};St.readyState>=1?rn():(Vn=rn.bind(this),St.addEventListener("loadedmetadata",Vn))}return sn={getAllInitData:function(){for(var Vn=[],rn=0;rn<mn.length;rn++)Vn.push(mn[rn].initData);return Vn},getSessions:function(){return mn},requestKeySystemAccess:function(Vn){return new Promise(function(rn,cn){for(var bn=!1,Jn=0;Jn<Vn.length;Jn++)for(var ar=Vn[Jn].ks.systemString,br=Vn[Jn].configs,Lr=null,Yi=null,no=0;no<br.length;no++){var Br=br[no].audioCapabilities,qr=br[no].videoCapabilities;if(Br&&Br.length!==0){Lr=[];for(var hi=0;hi<Br.length;hi++)window[kn.MediaKeys].isTypeSupported(ar,Br[hi].contentType)&&Lr.push(Br[hi])}if(qr&&qr.length!==0){Yi=[];for(var vi=0;vi<qr.length;vi++)window[kn.MediaKeys].isTypeSupported(ar,qr[vi].contentType)&&Yi.push(qr[vi])}if(!(!Lr&&!Yi||Lr&&Lr.length===0||Yi&&Yi.length===0)){bn=!0;var wo=new D(Lr,Yi),ro=Zn.getKeySystemBySystemString(ar),ta=new Pr(ro,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),rn({data:ta});break}}if(!bn){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),cn({error:bi})}})},selectKeySystem:function(Vn){return new Promise(function(rn,cn){try{Nt=Vn.mediaKeys=new window[kn.MediaKeys](Vn.keySystem.systemString),zt=Vn.keySystem,Vt=Vn,St&&Ur(),rn(zt)}catch(bn){cn({error:"Error selecting keys system ("+zt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Vn){St!==Vn&&(St&&St.removeEventListener(kn.needkey,In),(St=Vn)&&(St.addEventListener(kn.needkey,In),Nt&&Ur()))},createKeySession:function(Vn){if(!zt||!Nt||!Vt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(Vt.ksConfiguration.videoCapabilities&&Vt.ksConfiguration.videoCapabilities.length>0&&(rn=Vt.ksConfiguration.videoCapabilities[0]),rn===null&&Vt.ksConfiguration.audioCapabilities&&Vt.ksConfiguration.audioCapabilities.length>0&&(rn=Vt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var cn=rn.contentType,bn=Nt.createSession(cn,new Uint8Array(Vn.initData),Vn.cdmData?new Uint8Array(Vn.cdmData):null),Jn=function(ar,br){return{session:ar,keyId:br.keyId,initData:br.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Lr){switch(Lr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(Lr.message)?Lr.message.buffer:Lr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,Lr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(bn,Vn);bn.addEventListener(kn.error,Jn),bn.addEventListener(kn.message,Jn),bn.addEventListener(kn.ready,Jn),bn.addEventListener(kn.close,Jn),mn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Vn,rn){var cn=Vn.session;Zn.isClearKey(zt)?cn.update(new Uint8Array(rn.toJWK())):cn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),St=null,zt=null,Nt=null,Vt=null,mn=[],Zn=Et(Cn).getInstance(),In={handleEvent:function(Vn){if(Vn.type===kn.needkey&&Vn.initData){var rn=ArrayBuffer.isView(Vn.initData)?Vn.initData.buffer:Vn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Or.__dashjs_factory_name="ProtectionModel_3Feb2014";var eo=dashjs.FactoryMaker.getClassFactory(Or);function _i(tn){tn=tn||{};var sn,an,St,zt,Nt,Vt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){St&&rn();for(var cn=0;cn<mn.length;cn++)Ur(mn[cn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(cn){try{St[kn.cancelKeyRequest](zt.systemString,cn.sessionId)}catch(bn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.sessionId+") "+bn.message})}}function Vn(cn,bn){if(bn&&cn){for(var Jn=cn.length,ar=0;ar<Jn;ar++)if(cn[ar].sessionId==bn)return cn[ar];return null}return null}function rn(){St.removeEventListener(kn.keyerror,Zn),St.removeEventListener(kn.needkey,Zn),St.removeEventListener(kn.keymessage,Zn),St.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var cn=[],bn=0;bn<Vt.length;bn++)cn.push(Vt[bn].initData);for(var Jn=0;Jn<mn.length;Jn++)cn.push(mn[Jn].initData);return cn},getSessions:function(){return mn.concat(Vt)},requestKeySystemAccess:function(cn){return new Promise(function(bn,Jn){var ar=St;ar||(ar=document.createElement("video"));for(var br=!1,Lr=0;Lr<cn.length;Lr++)for(var Yi=cn[Lr].ks.systemString,no=cn[Lr].configs,Br=null,qr=0;qr<no.length;qr++){var hi=no[qr].videoCapabilities;if(hi&&hi.length!==0){Br=[];for(var vi=0;vi<hi.length;vi++)ar.canPlayType(hi[vi].contentType,Yi)!==""&&Br.push(hi[vi])}if(Br&&(!Br||Br.length!==0)){br=!0;var wo=new D(null,Br),ro=Nt.getKeySystemBySystemString(Yi),ta=new Pr(ro,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),bn({data:ta});break}}if(!br){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),Jn({error:bi})}})},selectKeySystem:function(cn){return zt=cn.keySystem,Promise.resolve(zt)},setMediaElement:function(cn){if(St!==cn){if(St){rn();for(var bn=0;bn<mn.length;bn++)Ur(mn[bn]);mn=[]}(St=cn)&&(St.addEventListener(kn.keyerror,Zn),St.addEventListener(kn.needkey,Zn),St.addEventListener(kn.keymessage,Zn),St.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(cn){if(!zt)throw new Error("Can not create sessions until you have selected a key system");if(In||mn.length===0){var bn={sessionId:null,keyId:cn.keyId,initData:cn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Vt.push(bn),St[kn.generateKeyRequest](zt.systemString,new Uint8Array(cn.initData)),bn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(cn,bn){var Jn=cn.sessionId;if(Nt.isClearKey(zt))for(var ar=0;ar<bn.keyPairs.length;ar++)St[kn.addKey](zt.systemString,bn.keyPairs[ar].key,bn.keyPairs[ar].keyID,Jn);else St[kn.addKey](zt.systemString,new Uint8Array(bn),new Uint8Array(cn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),St=null,zt=null,Vt=[],mn=[],Nt=Et(Cn).getInstance(),Zn={handleEvent:function(cn){var bn=null;switch(cn.type){case kn.needkey:var Jn=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((bn=Vn(mn,cn.sessionId))||(bn=Vn(Vt,cn.sessionId)),bn){var ar=_.MEDIA_KEYERR_CODE,br="";switch(cn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,br+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,br+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,br+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,br+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,br+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,br+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}br+="  System Code = "+cn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new I.Z(ar,br,bn)})}else an.error("No session token found for key error");break;case kn.keyadded:(bn=Vn(mn,cn.sessionId))||(bn=Vn(Vt,cn.sessionId)),bn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:bn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=cn.sessionId!==null&&cn.sessionId!==void 0)?!(bn=Vn(mn,cn.sessionId))&&Vt.length>0&&(bn=Vt.shift(),mn.push(bn),bn.sessionId=cn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:bn})):Vt.length>0&&(bn=Vt.shift(),mn.push(bn),Vt.length!==0&&er.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),bn){var Lr=ArrayBuffer.isView(cn.message)?cn.message.buffer:cn.message;bn.keyMessage=Lr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(bn,Lr,cn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}_i.__dashjs_factory_name="ProtectionModel_01b";var Mi=dashjs.FactoryMaker.getClassFactory(_i),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],to=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ti(){var tn,sn=this.context;function an(St,zt){for(var Nt=0;Nt<zt.length;Nt++){var Vt=zt[Nt];if(typeof St[Vt[Object.keys(Vt)[0]]]=="function")return Vt}return null}return tn={createProtectionSystem:function(St){var zt=null,Nt=Et(sn).getInstance();Nt.setConfig({debug:St.debug,BASE64:St.BASE64,settings:St.settings}),Nt.initialize();var Vt=function(mn){var In=mn.debug,Zn=In.getLogger(tn),Cn=mn.eventBus,Rn=mn.errHandler,on=mn.videoModel?mn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,to)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),eo(sn).create({debug:In,eventBus:Cn,events:mn.events,api:an(on,to)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Mi(sn).create({debug:In,eventBus:Cn,errHandler:Rn,events:mn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Ji(sn).create({debug:In,eventBus:Cn,events:mn.events}))}(St);return!zt&&Vt&&(zt=de(sn).create({protectionModel:Vt,protectionKeyController:Nt,eventBus:St.eventBus,debug:St.debug,events:St.events,BASE64:St.BASE64,constants:St.constants,cmcdModel:St.cmcdModel,customParametersModel:St.customParametersModel,settings:St.settings}),St.capabilities.setEncryptedMediaSupported(!0)),zt}}}Ti.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Ti);Qn.events=Ot,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Ti.__dashjs_factory_name,Qn);var Ou=Qn},2068:function(b,g,S){var F=S(5448),R={DEFAULT:.5,STRONG:1,WEAK:0};function y(D,m,T){var U,N;return U=D===void 0?-1:D,N=function(_){var I=R.DEFAULT;return _!==R.DEFAULT&&_!==R.STRONG&&_!==R.WEAK||(I=_),I}(T),{quality:U,reason:m===void 0?null:m,priority:N}}y.__dashjs_factory_name="SwitchRequest";var v=F.Z.getClassFactory(y);v.NO_CHANGE=-1,v.PRIORITY=R,F.Z.updateClassFactory(y.__dashjs_factory_name,v),g.Z=v},1767:function(b,g,S){var F=S(5628),R=S(6535),y=S(7423),v=S(895),D=S(6070),m=S(3112),T=S(1914),U=S(5435),N=S(5448),_=S(2068),I=S(3393),C="qualitySwitchRules",j="abandonFragmentRules";function Y(W){W=W||{};var ue,x,X=this.context,de=W.mediaPlayerModel,oe=W.customParametersModel,ve=W.dashMetrics,Ce=W.settings;function Xe(Ze){return Ze.filter(function(it){return it.quality>_.Z.NO_CHANGE})}function Ae(Ze){var it,st,Ye,lt,At,Oe={},Qe=null;if(Ze.length!==0){for(Oe[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Oe[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},it=0,st=Ze.length;it<st;it+=1)(Ye=Ze[it]).quality!==_.Z.NO_CHANGE&&(Oe[Ye.priority].quality===_.Z.NO_CHANGE||Oe[Ye.priority].quality>Ye.quality)&&(Oe[Ye.priority].quality=Ye.quality,Oe[Ye.priority].reason=Ye.reason||null);return Oe[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.WEAK]),Oe[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.DEFAULT]),Oe[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(Qe=Oe[_.Z.PRIORITY.STRONG]),Qe&&(lt=Qe.quality,At=Qe.reason),(0,_.Z)(X).create(lt,At)}}return{initialize:function(){ue=[],x=[],Ce.get().streaming.abr.useDefaultABRRules&&(Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?ue.push((0,T.Z)(X).create({dashMetrics:ve,settings:Ce})):Ce.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?ue.push((0,U.Z)(X).create({dashMetrics:ve})):(ue.push((0,m.Z)(X).create({dashMetrics:ve,mediaPlayerModel:de,settings:Ce})),ue.push((0,F.Z)(X).create({dashMetrics:ve})),Ce.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&ue.push((0,R.Z)(X).create({dashMetrics:ve,settings:Ce})),Ce.get().streaming.abr.additionalAbrRules.switchHistoryRule&&ue.push((0,D.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.droppedFramesRule&&ue.push((0,v.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&x.push((0,y.Z)(X).create({dashMetrics:ve,mediaPlayerModel:de,settings:Ce})))),oe.getAbrCustomRules().forEach(function(Ze){Ze.type===C&&ue.push(Ze.rule(X).create()),Ze.type===j&&x.push(Ze.rule(X).create())})},reset:function(){[ue,x].forEach(function(Ze){Ze&&Ze.length&&Ze.forEach(function(it){return it.reset&&it.reset()})}),ue=[],x=[]},getMaxQuality:function(Ze){return Ae(Xe(ue.map(function(it){return it.getMaxIndex(Ze)})))||(0,_.Z)(X).create()},getMinSwitchRequest:Ae,shouldAbandonFragment:function(Ze,it){var st=Ae(Xe(x.map(function(Ye){return Ye.shouldAbandon(Ze,it)})));return st&&(st.reason.forceAbandon=!0),st||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return ue}}}Y.__dashjs_factory_name="ABRRulesCollection";var $=N.Z.getClassFactory(Y);$.QUALITY_SWITCH_RULES=C,$.ABANDON_FRAGMENT_RULES=j,N.Z.updateSingletonFactory(Y.__dashjs_factory_name,$),g.Z=$},7423:function(b,g,S){var F=S(2068),R=S(5448),y=S(6398);function v(D){D=D||{};var m,T,U,N,_,I=this.context,C=D.mediaPlayerModel,j=D.dashMetrics,Y=D.settings;function $(){U={},N={},_=[]}return m={shouldAbandon:function(W){var ue=(0,F.Z)(I).create(F.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(!(W&&W.hasOwnProperty("getMediaInfo")&&W.hasOwnProperty("getMediaType")&&W.hasOwnProperty("getCurrentRequest")&&W.hasOwnProperty("getRepresentationInfo")&&W.hasOwnProperty("getAbrController")))return ue;var x,X,de=W.getMediaInfo(),oe=W.getMediaType(),ve=W.getStreamInfo(),Ce=ve?ve.id:null,Xe=W.getCurrentRequest();if(!isNaN(Xe.index)){x=oe,X=Xe.index,U[x]=U[x]||{},U[x][X]=U[x][X]||{};var Ae=C.getStableBufferTime();if(j.getCurrentBufferLevel(oe)>Ae)return ue;var Ze=U[oe][Xe.index];if(Ze===null||Xe.firstByteDate===null||N.hasOwnProperty(Ze.id))return ue;if(Ze.firstByteTime===void 0&&(_[oe]=[],Ze.firstByteTime=Xe.firstByteDate.getTime(),Ze.segmentDuration=Xe.duration,Ze.bytesTotal=Xe.bytesTotal,Ze.id=Xe.index),Ze.bytesLoaded=Xe.bytesLoaded,Ze.elapsedTime=new Date().getTime()-Ze.firstByteTime,Ze.bytesLoaded>0&&Ze.elapsedTime>0&&function(ct,Qt){_[ct]=_[ct]||[],_[ct].push(Qt)}(oe,Math.round(8*Ze.bytesLoaded/Ze.elapsedTime)),_[oe].length>=Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ze.elapsedTime>Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ze.bytesLoaded<Ze.bytesTotal){var it=_[oe].reduce(function(ct,Qt){return ct+Qt},0);if(Ze.measuredBandwidthInKbps=Math.round(it/_[oe].length),Ze.estimatedTimeOfDownload=+(8*Ze.bytesTotal/Ze.measuredBandwidthInKbps/1e3).toFixed(2),Ze.estimatedTimeOfDownload<Ze.segmentDuration*Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||W.getRepresentationInfo().quality===0)return ue;if(!N.hasOwnProperty(Ze.id)){var st=W.getAbrController(),Ye=Ze.bytesTotal-Ze.bytesLoaded,lt=st.getBitrateList(de),At=st.getQualityForBitrate(de,Ze.measuredBandwidthInKbps*Y.get().streaming.abr.bandwidthSafetyFactor,Ce),Oe=st.getMinAllowedIndexFor(oe,Ce),Qe=Oe!==void 0?Math.max(Oe,At):At;Ye>Ze.bytesTotal*lt[Qe].bitrate/lt[st.getQualityFor(oe,Ce)].bitrate&&(ue.quality=Qe,ue.reason.throughput=Ze.measuredBandwidthInKbps,ue.reason.fragmentID=Ze.id,ue.reason.rule=this.getClassName(),N[Ze.id]=Ze,T.debug("["+oe+"] frag id",Ze.id," is asking to abandon and switch to quality to ",Qe," measured bandwidth was",Ze.measuredBandwidthInKbps),delete U[oe][Ze.id])}}else Ze.bytesLoaded===Ze.bytesTotal&&delete U[oe][Ze.id]}return ue},reset:$},T=(0,y.Z)(I).getInstance().getLogger(m),$(),m}v.__dashjs_factory_name="AbandonRequestsRule",g.Z=R.Z.getClassFactory(v)},3112:function(b,g,S){var F=S(3860),R=S(2068),y=S(5448),v=S(7855),D=S(5595),m=S(8512),T=S(6398),U=S(8825),N=S(3393),_=10;function I(C){C=C||{};var j,Y,$,W=this.context,ue=C.dashMetrics,x=C.mediaPlayerModel,X=(0,D.Z)(W).getInstance();function de(Qe,ct,Qt){var Kt=Qt.reduce(function(Ie,ne,Fe){return ne>Qt[Ie]?Fe:Ie},0);if(Kt===0)return null;var Tt=Math.max(Qe,_+2*ct.length),Pt=(Qt[Kt]-1)/(Tt/_-1);return{gp:Pt,Vp:_/Pt}}function oe(Qe){Qe.placeholderBuffer=0,Qe.mostAdvancedSegmentStart=NaN,Qe.lastSegmentWasReplacement=!1,Qe.lastSegmentStart=NaN,Qe.lastSegmentDurationS=NaN,Qe.lastSegmentRequestTimeMs=NaN,Qe.lastSegmentFinishTimeMs=NaN}function ve(Qe,ct){var Qt=x.getStableBufferTime();if(Qe.stableBufferTime!==Qt){var Kt=de(Qt,Qe.bitrates,Qe.utilities);if(Kt.Vp!==Qe.Vp||Kt.gp!==Qe.gp){var Tt=ue.getCurrentBufferLevel(ct),Pt=Tt+Qe.placeholderBuffer;Pt-=_,Pt*=Kt.Vp/Qe.Vp,Pt+=_,Qe.stableBufferTime=Qt,Qe.Vp=Kt.Vp,Qe.gp=Kt.gp,Qe.placeholderBuffer=Math.max(0,Pt-Tt)}}}function Ce(Qe,ct){return Qe.Vp*(Qe.utilities[ct]+Qe.gp)}function Xe(Qe,ct){for(var Qt=Qe.bitrates[ct],Kt=Qe.utilities[ct],Tt=0,Pt=ct-1;Pt>=0;--Pt)if(Qe.utilities[Pt]<Qe.utilities[ct]){var Ie=Qe.bitrates[Pt],ne=Qe.utilities[Pt],Fe=Qe.Vp*(Qe.gp+(Qt*ne-Ie*Kt)/(Qt-Ie));Tt=Math.max(Tt,Fe)}return Tt}function Ae(Qe){var ct=Qe.mediaType===N.Z.AUDIO?[N.Z.AUDIO]:$;for(var Qt in ct)$.hasOwnProperty(Qt)&&$[Qt].state===2&&($[Qt].placeholderBuffer=0)}function Ze(){for(var Qe in $)if($.hasOwnProperty(Qe)){var ct=$[Qe];ct.state!==0&&(ct.state=1,oe(ct))}}function it(Qe){if(Qe&&Qe.chunk&&Qe.chunk.mediaInfo){var ct=$[Qe.chunk.mediaInfo.type];if(ct&&ct.state!==0){var Qt=Qe.chunk.start;isNaN(ct.mostAdvancedSegmentStart)||Qt>ct.mostAdvancedSegmentStart?(ct.mostAdvancedSegmentStart=Qt,ct.lastSegmentWasReplacement=!1):ct.lastSegmentWasReplacement=!0,ct.lastSegmentStart=Qt,ct.lastSegmentDurationS=Qe.chunk.duration,ct.lastQuality=Qe.chunk.quality,Ye(ct,Qe.chunk.mediaInfo.type)}}}function st(Qe){if(Qe&&Qe.metric===F.Z.HTTP_REQUEST&&Qe.value&&Qe.value.type===v.w.MEDIA_SEGMENT_TYPE&&Qe.value.trace&&Qe.value.trace.length){var ct=$[Qe.mediaType];ct&&ct.state!==0&&(ct.lastSegmentRequestTimeMs=Qe.value.trequest.getTime(),ct.lastSegmentFinishTimeMs=Qe.value._tfinish.getTime(),Ye(ct,Qe.mediaType))}}function Ye(Qe,ct){if(!isNaN(Qe.lastSegmentStart)&&!isNaN(Qe.lastSegmentRequestTimeMs)&&!isNaN(Qe.placeholderBuffer)){if(Qe.placeholderBuffer*=.99,!isNaN(Qe.lastSegmentFinishTimeMs)){var Qt=ue.getCurrentBufferLevel(ct)+.001*(Qe.lastSegmentFinishTimeMs-Qe.lastSegmentRequestTimeMs),Kt=Ce(Qe,Qe.lastQuality),Tt=Math.max(0,Kt-Qt);Qe.placeholderBuffer=Math.min(Tt,Qe.placeholderBuffer)}Qe.lastSegmentWasReplacement&&!isNaN(Qe.lastSegmentDurationS)&&(Qe.placeholderBuffer+=Qe.lastSegmentDurationS),Qe.lastSegmentStart=NaN,Qe.lastSegmentRequestTimeMs=NaN}}function lt(Qe){if(Qe){var ct=$[Qe.mediaType];ct&&ct.state!==0&&(ct.abrQuality=Qe.newQuality)}}function At(Qe){if(Qe){var ct=$[Qe.mediaType];if(ct&&ct.state!==0){var Qt,Kt=ue.getCurrentBufferLevel(Qe.mediaType);Qt=ct.abrQuality>0?Xe(ct,ct.abrQuality):_;var Tt=Math.max(0,Qt-Kt);ct.placeholderBuffer=Math.min(ct.placeholderBuffer,Tt)}}}function Oe(){$={}}return j={getMaxIndex:function(Qe){var ct=(0,R.Z)(W).create();if(!(Qe&&Qe.hasOwnProperty("getMediaInfo")&&Qe.hasOwnProperty("getMediaType")&&Qe.hasOwnProperty("getScheduleController")&&Qe.hasOwnProperty("getStreamInfo")&&Qe.hasOwnProperty("getAbrController")&&Qe.hasOwnProperty("useBufferOccupancyABR")))return ct;var Qt=Qe.getMediaInfo(),Kt=Qe.getMediaType(),Tt=Qe.getScheduleController(),Pt=Qe.getStreamInfo(),Ie=Qe.getAbrController(),ne=Ie.getThroughputHistory(),Fe=Pt?Pt.id:null,O=Pt&&Pt.manifestInfo&&Pt.manifestInfo.isDynamic,M=Qe.useBufferOccupancyABR();if(ct.reason=ct.reason||{},!M)return ct;Tt.setTimeToLoadDelay(0);var q=function(et){var ft=et.getMediaType(),vt=$[ft];return vt?vt.state!==0&&ve(vt,ft):(vt=function(Et){var Ct={},hn=Et.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),Xt=function(Un){return Un.map(function(gr){return Math.log(gr)})}(hn);Xt=Xt.map(function(Un){return Un-Xt[0]+1});var nn=x.getStableBufferTime(),Ot=de(nn,hn,Xt);return Ot?(Ct.state=1,Ct.bitrates=hn,Ct.utilities=Xt,Ct.stableBufferTime=nn,Ct.Vp=Ot.Vp,Ct.gp=Ot.gp,Ct.lastQuality=0,oe(Ct)):Ct.state=0,Ct}(et),$[ft]=vt),vt}(Qe);if(q.state===0)return ct;var K,pe=ue.getCurrentBufferLevel(Kt),ce=ne.getAverageThroughput(Kt,O),He=ne.getSafeAverageThroughput(Kt,O),_t=ne.getAverageLatency(Kt);if(ct.reason.state=q.state,ct.reason.throughput=ce,ct.reason.latency=_t,isNaN(ce))return ct;switch(q.state){case 1:K=Ie.getQualityForBitrate(Qt,He,Fe,_t),ct.quality=K,ct.reason.throughput=He,q.placeholderBuffer=Math.max(0,Xe(q,K)-pe),q.lastQuality=K,!isNaN(q.lastSegmentDurationS)&&pe>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(et,ft){var vt=Date.now();if(isNaN(et.lastSegmentFinishTimeMs)){if(!isNaN(et.lastCallTimeMs)){var Et=.001*(vt-et.lastCallTimeMs);et.placeholderBuffer+=Math.max(0,Et)}}else{var Ct=.001*(vt-et.lastSegmentFinishTimeMs);et.placeholderBuffer+=Math.max(0,Ct)}et.lastCallTimeMs=vt,et.lastSegmentStart=NaN,et.lastSegmentRequestTimeMs=NaN,et.lastSegmentFinishTimeMs=NaN,ve(et,ft)})(q,Kt),K=function(et,ft){for(var vt=et.bitrates.length,Et=NaN,Ct=NaN,hn=0;hn<vt;++hn){var Xt=(et.Vp*(et.utilities[hn]+et.gp)-ft)/et.bitrates[hn];(isNaN(Ct)||Xt>=Ct)&&(Ct=Xt,Et=hn)}return Et}(q,pe+q.placeholderBuffer);var ot=Ie.getQualityForBitrate(Qt,He,Fe,_t);K>q.lastQuality&&K>ot&&(K=Math.max(ot,q.lastQuality));var rt=Math.max(0,pe+q.placeholderBuffer-Ce(q,K));rt<=q.placeholderBuffer?(q.placeholderBuffer-=rt,rt=0):(rt-=q.placeholderBuffer,q.placeholderBuffer=0,K<Ie.getMaxAllowedIndexFor(Kt,Fe)?Tt.setTimeToLoadDelay(1e3*rt):rt=0),ct.quality=K,ct.reason.throughput=ce,ct.reason.latency=_t,ct.reason.bufferLevel=pe,ct.reason.placeholderBuffer=q.placeholderBuffer,ct.reason.delay=rt,q.lastQuality=K;break;default:Y.debug("BOLA ABR rule invoked in bad state."),ct.quality=Ie.getQualityForBitrate(Qt,He,Fe,_t),ct.reason.state=q.state,ct.reason.throughput=He,ct.reason.latency=_t,q.state=1,oe(q)}return ct},reset:function(){Oe(),X.off(U.Z.BUFFER_EMPTY,Ae,j),X.off(U.Z.PLAYBACK_SEEKING,Ze,j),X.off(U.Z.METRIC_ADDED,st,j),X.off(U.Z.QUALITY_CHANGE_REQUESTED,lt,j),X.off(U.Z.FRAGMENT_LOADING_ABANDONED,At,j),X.off(m.Z.MEDIA_FRAGMENT_LOADED,it,j)}},Y=(0,T.Z)(W).getInstance().getLogger(j),Oe(),X.on(U.Z.BUFFER_EMPTY,Ae,j),X.on(U.Z.PLAYBACK_SEEKING,Ze,j),X.on(U.Z.METRIC_ADDED,st,j),X.on(U.Z.QUALITY_CHANGE_REQUESTED,lt,j),X.on(U.Z.FRAGMENT_LOADING_ABANDONED,At,j),X.on(m.Z.MEDIA_FRAGMENT_LOADED,it,j),j}I.__dashjs_factory_name="BolaRule",g.Z=y.Z.getClassFactory(I)},895:function(b,g,S){var F=S(5448),R=S(2068),y=S(6398);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){var N=(0,R.Z)(T).create();if(!U||!U.hasOwnProperty("getDroppedFramesHistory"))return N;var _=U.getDroppedFramesHistory(),I=U.getStreamInfo().id;if(_){var C=_.getFrameHistory(I);if(!C||C.length===0)return N;for(var j=0,Y=0,$=R.Z.NO_CHANGE,W=1;W<C.length;W++)if(C[W]&&(j=C[W].droppedVideoFrames,(Y=C[W].totalVideoFrames)>375&&j/Y>.15)){$=W-1,m.debug("index: "+$+" Dropped Frames: "+j+" Total Frames: "+Y);break}return(0,R.Z)(T).create($,{droppedFrames:j})}return N}},m=(0,y.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="DroppedFramesRule",g.Z=F.Z.getClassFactory(v)},6535:function(b,g,S){var F=S(5595),R=S(8512),y=S(5448),v=S(6398),D=S(2068),m=S(3393),T=S(3860),U=S(8825);function N(_){_=_||{};var I,C,j,Y=this.context,$=(0,F.Z)(Y).getInstance(),W=_.dashMetrics;function ue(){(j={})[m.Z.VIDEO]={ignoreCount:2},j[m.Z.AUDIO]={ignoreCount:2}}function x(){ue()}function X(de){isNaN(de.startTime)||de.mediaType!==m.Z.AUDIO&&de.mediaType!==m.Z.VIDEO||j[de.mediaType].ignoreCount>0&&j[de.mediaType].ignoreCount--}return I={getMaxIndex:function(de){var oe=(0,D.Z)(Y).create();if(!de||!de.hasOwnProperty("getMediaType"))return oe;(function(){if(!W||!W.hasOwnProperty("getCurrentBufferLevel")||!W.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var ve=de.getMediaType(),Ce=W.getCurrentBufferState(ve),Xe=de.getRepresentationInfo().fragmentDuration,Ae=de.getStreamInfo(),Ze=Ae?Ae.id:null,it=de.getScheduleController(),st=Ae&&Ae.manifestInfo&&Ae.manifestInfo.isDynamic;if(function(Kt,Tt){return!Kt&&j[Tt].ignoreCount>0}(it.getPlaybackController().getLowLatencyModeEnabled(),ve)||!Xe)return oe;if(Ce&&Ce.state===T.Z.BUFFER_EMPTY)C.debug("["+ve+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var Ye=de.getMediaInfo(),lt=de.getAbrController(),At=lt.getThroughputHistory(),Oe=W.getCurrentBufferLevel(ve),Qe=At.getAverageThroughput(ve,st),ct=At.getAverageLatency(ve),Qt=Qe*(Oe/Xe)*.5;oe.quality=lt.getQualityForBitrate(Ye,Qt,Ze,ct),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){ue(),$.off(U.Z.PLAYBACK_SEEKING,x,I),$.off(R.Z.BYTES_APPENDED_END_FRAGMENT,X,I)}},C=(0,v.Z)(Y).getInstance().getLogger(I),ue(),$.on(U.Z.PLAYBACK_SEEKING,x,I),$.on(R.Z.BYTES_APPENDED_END_FRAGMENT,X,I),I}N.__dashjs_factory_name="InsufficientBufferRule",g.Z=y.Z.getClassFactory(N)},1914:function(b,g,S){var F=S(3860),R=S(2068),y=S(5448),v=S(7855),D=S(5595),m=S(8512),T=S(6398),U=S(3393);function N(_){_=_||{};var I,C,j,Y,$=this.context,W=_.dashMetrics,ue=(0,D.Z)($).getInstance();function x(Ze){Ze.placeholderBuffer=0,Ze.mostAdvancedSegmentStart=NaN,Ze.lastSegmentWasReplacement=!1,Ze.lastSegmentStart=NaN,Ze.lastSegmentDurationS=NaN,Ze.lastSegmentRequestTimeMs=NaN,Ze.lastSegmentFinishTimeMs=NaN,Ze.lastSegmentUrl=""}function X(){for(var Ze in C)if(C.hasOwnProperty(Ze)){var it=C[Ze];it.state!==0&&(it.state=1,x(it))}}function de(Ze){if(Ze&&Ze.chunk&&Ze.chunk.mediaInfo){var it=C[Ze.chunk.mediaInfo.type],st=j[Ze.chunk.mediaInfo.type];if(it&&it.state!==0){var Ye=Ze.chunk.start;isNaN(it.mostAdvancedSegmentStart)||Ye>it.mostAdvancedSegmentStart?(it.mostAdvancedSegmentStart=Ye,it.lastSegmentWasReplacement=!1):it.lastSegmentWasReplacement=!0,it.lastSegmentStart=Ye,it.lastSegmentDurationS=Ze.chunk.duration,it.lastQuality=Ze.chunk.quality,ve(it,st)}}}function oe(Ze){if(Ze&&Ze.metric===F.Z.HTTP_REQUEST&&Ze.value&&Ze.value.type===v.w.MEDIA_SEGMENT_TYPE&&Ze.value.trace&&Ze.value.trace.length){var it=C[Ze.mediaType],st=j[Ze.mediaType];it&&it.state!==0&&(it.lastSegmentRequestTimeMs=Ze.value.trequest.getTime(),it.lastSegmentFinishTimeMs=Ze.value._tfinish.getTime(),ve(it,st))}}function ve(Ze,it){isNaN(Ze.lastSegmentStart)||isNaN(Ze.lastSegmentRequestTimeMs)||(it.segment_request_start_s=.001*Ze.lastSegmentRequestTimeMs,it.segment_download_finish_s=.001*Ze.lastSegmentFinishTimeMs,Ze.lastSegmentStart=NaN,Ze.lastSegmentRequestTimeMs=NaN)}function Ce(Ze){if(Ze&&Ze.mediaType){var it=C[Ze.mediaType];it&&it.state!==0&&(it.abrQuality=Ze.newQuality)}}function Xe(Ze,it){if(Ze.length!==it.length)return-1;for(var st=0,Ye=0;Ye<Ze.length;Ye++)st+=Ze[Ye]*it[Ye];return st}function Ae(){C={},j={}}return I={getMaxIndex:function(Ze){var it,st=(0,R.Z)($).create(),Ye=Math.pow(4,.99),lt=Math.max(Math.pow(4,1),Ye*Math.sqrt(4)),At=Ze.getMediaInfo(),Oe=Ze.getMediaType(),Qe=At.bitrateList.map(function(Ot){return Ot.bandwidth}),ct=Qe.length,Qt=Ze.getScheduleController(),Kt=Ze.getStreamInfo(),Tt=Ze.getAbrController(),Pt=Tt.getThroughputHistory(),Ie=Kt&&Kt.manifestInfo&&Kt.manifestInfo.isDynamic,ne=Ze.useL2AABR(),Fe=W.getCurrentBufferLevel(Oe,!0),O=Pt.getSafeAverageThroughput(Oe,Ie),M=Pt.getAverageThroughput(Oe,Ie),q=Pt.getAverageLatency(Oe),K=Ze.getVideoModel().getPlaybackRate();if(!(Ze&&Ze.hasOwnProperty("getMediaInfo")&&Ze.hasOwnProperty("getMediaType")&&Ze.hasOwnProperty("getScheduleController")&&Ze.hasOwnProperty("getStreamInfo")&&Ze.hasOwnProperty("getAbrController")&&Ze.hasOwnProperty("useL2AABR"))||(st.reason=st.reason||{},!ne||Oe===U.Z.AUDIO))return st;Qt.setTimeToLoadDelay(0);var pe=function(Ot){var Un=Ot.getMediaType(),gr=C[Un];return gr||(gr=function(Pr){var dr={},ei=Pr.getMediaInfo(),Ji=ei.bitrateList.map(function(Or){return Or.bandwidth/1e3});return dr.state=1,dr.bitrates=Ji,dr.lastQuality=0,function(Or){Or&&Or.type&&(j[Or.type]={},j[Or.type].w=[],j[Or.type].prev_w=[],j[Or.type].Q=0,j[Or.type].segment_request_start_s=0,j[Or.type].segment_download_finish_s=0,j[Or.type].B_target=1.5)}(ei),x(dr),dr}(Ot),C[Un]=gr),gr}(Ze);if(pe.state===0)return st;var ce=j[Oe];if(!ce||(st.reason.state=pe.state,st.reason.throughput=M,st.reason.latency=q,isNaN(M)))return st;switch(pe.state){case 1:if(it=Tt.getQualityForBitrate(At,O,Kt.id,q),st.quality=it,st.reason.throughput=O,pe.lastQuality=it,!isNaN(pe.lastSegmentDurationS)&&Fe>=ce.B_target){pe.state=2,ce.Q=Ye;for(var He=0;He<ct;++He)He===pe.lastQuality?ce.prev_w[He]=1:ce.prev_w[He]=0}break;case 2:var _t=[],ot=W.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.d},0),rt=W.getCurrentHttpRequest(Oe).trace.reduce(function(Ot,Un){return Ot+Un.b[0]},0),et=Math.round(8*rt/ot),ft=W.getCurrentHttpRequest(Oe);if(et<1&&(et=1),ft.url===pe.lastSegmentUrl||ft.type===v.w.INIT_SEGMENT_TYPE)it=pe.lastQuality;else{for(var vt=pe.lastSegmentDurationS,Et=1,Ct=0;Ct<ct;++Ct)Qe[Ct]=Qe[Ct]/1e3,K*Qe[Ct]>et&&(Et=-1),ce.w[Ct]=ce.prev_w[Ct]+Et*(vt/(2*lt))*((ce.Q+Ye)*(K*Qe[Ct]/et));ce.w=function(Ot){for(var Un=Ot.length,gr=!1,Pr=[],dr=0;dr<Un;++dr)Pr[dr]=Ot[dr];for(var ei=Ot.sort(function(zi,to){return to-zi}),Ji=0,Or=0,eo=[],_i=0;_i<Un-1;++_i)if((Or=((Ji+=ei[_i])-1)/(_i+1))>=ei[_i+1]){gr=!0;break}gr||(Or=(Ji+ei[Un-1]-1)/Un);for(var Mi=0;Mi<Un;++Mi)eo[Mi]=Math.max(Pr[Mi]-Or,0);return eo}(ce.w);for(var hn=0;hn<ct;++hn)_t[hn]=ce.w[hn]-ce.prev_w[hn],ce.prev_w[hn]=ce.w[hn];ce.Q=Math.max(0,ce.Q-vt+vt*K*((Xe(Qe,ce.prev_w)+Xe(Qe,_t))/et));for(var Xt=[],nn=0;nn<ct;++nn)Xt[nn]=Math.abs(Qe[nn]-Xe(ce.w,Qe));(it=Xt.indexOf(Math.min.apply(Math,Xt)))>pe.lastQuality&&Qe[pe.lastQuality+1]<=et&&(it=pe.lastQuality+1),Qe[it]>=et&&(ce.Q=2*Math.max(Ye,ce.Q)),pe.lastSegmentUrl=ft.url}st.quality=it,st.reason.throughput=M,st.reason.latency=q,st.reason.bufferLevel=Fe,pe.lastQuality=st.quality;break;default:Y.debug("L2A ABR rule invoked in bad state."),st.quality=Tt.getQualityForBitrate(At,O,Kt.id,q),st.reason.state=pe.state,st.reason.throughput=O,st.reason.latency=q,pe.state=1,x(pe)}return st},reset:function(){Ae(),ue.off(m.Z.PLAYBACK_SEEKING,X,I),ue.off(m.Z.MEDIA_FRAGMENT_LOADED,de,I),ue.off(m.Z.METRIC_ADDED,oe,I),ue.off(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I)}},Y=(0,T.Z)($).getInstance().getLogger(I),Ae(),ue.on(m.Z.PLAYBACK_SEEKING,X,I),ue.on(m.Z.MEDIA_FRAGMENT_LOADED,de,I),ue.on(m.Z.METRIC_ADDED,oe,I),ue.on(m.Z.QUALITY_CHANGE_REQUESTED,Ce,I),I}N.__dashjs_factory_name="L2ARule",g.Z=y.Z.getClassFactory(N)},6070:function(b,g,S){var F=S(5448),R=S(6398),y=S(2068);function v(){var D,m,T=this.context;return D={getMaxIndex:function(U){for(var N=U?U.getSwitchHistory():null,_=N?N.getSwitchRequests():[],I=0,C=0,j=0,Y=(0,y.Z)(T).create(),$=0;$<_.length;$++)if(_[$]!==void 0&&(I+=_[$].drops,C+=_[$].noDrops,j+=_[$].dropSize,I+C>=6&&I/C>.075)){Y.quality=$>0&&_[$].drops>0?$-1:$,Y.reason={index:Y.quality,drops:I,noDrops:C,dropSize:j},m.debug("Switch history rule index: "+Y.quality+" samples: "+(I+C)+" drops: "+I);break}return Y}},m=(0,R.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="SwitchHistoryRule",g.Z=F.Z.getClassFactory(v)},5628:function(b,g,S){var F=S(5448),R=S(2068),y=S(3393),v=S(3860);function D(m){m=m||{};var T=this.context,U=m.dashMetrics;return{getMaxIndex:function(N){var _=(0,R.Z)(T).create();if(!(N&&N.hasOwnProperty("getMediaInfo")&&N.hasOwnProperty("getMediaType")&&N.hasOwnProperty("useBufferOccupancyABR")&&N.hasOwnProperty("getAbrController")&&N.hasOwnProperty("getScheduleController")))return _;(function(){if(!U||!U.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var I=N.getMediaInfo(),C=N.getMediaType(),j=U.getCurrentBufferState(C),Y=N.getScheduleController(),$=N.getAbrController(),W=N.getStreamInfo(),ue=W?W.id:null,x=W&&W.manifestInfo?W.manifestInfo.isDynamic:null,X=$.getThroughputHistory(),de=X.getSafeAverageThroughput(C,x),oe=X.getAverageLatency(C),ve=N.useBufferOccupancyABR();return isNaN(de)||!j||ve||$.getAbandonmentStateFor(ue,C)!==v.Z.ABANDON_LOAD&&(j.state===v.Z.BUFFER_LOADED||x)&&(_.quality=$.getQualityForBitrate(I,de,ue,oe),Y.setTimeToLoadDelay(0),_.reason={throughput:de,latency:oe}),_},reset:function(){}}}D.__dashjs_factory_name="ThroughputRule",g.Z=F.Z.getClassFactory(D)},4722:function(b,g,S){var F=S(5448),R=S(6398);function y(){var v,D,m,T,U,N,_,I,C,j=this.context;function Y(){m=null,T=1,U=100,N=0,_=null,I=null,C="dynamic_weight_selection"}function $(){var de=0;if(m)for(var oe=0;oe<m.length;oe++){var ve=m[oe];ve.state.throughput>de&&(de=ve.state.throughput)}return de}function W(de,oe,ve){var Ce=de.map(function(Xe,Ae){return ve[Ae]*Math.pow(Xe-oe[Ae],2)}).reduce(function(Xe,Ae){return Xe+Ae});return(Ce<0?-1:1)*Math.sqrt(Math.abs(Ce))}function ue(de,oe){return W([de.state.throughput,de.state.latency,de.state.rebuffer,de.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function x(de,oe,ve){for(var Ce=0;Ce<oe.length;Ce++){var Xe=oe[Ce],Ae=ue(Xe,de);X(Xe,ve,Math.exp(-1*Math.pow(Ae,2)/(2*Math.pow(.1,2))))}}function X(de,oe,ve){var Ce=de.state,Xe=[.01,.01,.01,.01];Ce.throughput=Ce.throughput+(oe[0]-Ce.throughput)*Xe[0]*ve,Ce.latency=Ce.latency+(oe[1]-Ce.latency)*Xe[1]*ve,Ce.rebuffer=Ce.rebuffer+(oe[2]-Ce.rebuffer)*Xe[2]*ve,Ce.switch=Ce.switch+(oe[3]-Ce.switch)*Xe[3]*ve}return v={getNextQuality:function(de,oe,ve,Ce,Xe,Ae,Ze){var it=ve,st=Ce,Ye=oe,lt=function(ce){if(!m){m=[];var He=ce.bitrateList,_t=[];N=He[0].bandwidth,He.forEach(function(ft){_t.push(ft.bandwidth),ft.bandwidth<N&&(N=ft.bandwidth)}),et=_t.map(function(ft){return Math.pow(ft,2)}).reduce(function(ft,vt){return ft+vt}),T=Math.sqrt(et);for(var ot=0;ot<He.length;ot++){var rt={qualityIndex:ot,bitrate:He[ot].bandwidth,state:{throughput:He[ot].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(rt)}I=function(ft){var vt=[],Et=function(Ou){for(var tn=[],sn=0;sn<Ou;sn++){var an=[Math.random()*$(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(ft.length,2));vt.push(Et[0]);for(var Ct=[1,1,1,1],hn=1;hn<ft.length;hn++){for(var Xt=null,nn=null,Ot=0;Ot<Et.length;Ot++){for(var Un=Et[Ot],gr=null,Pr=0;Pr<vt.length;Pr++){var dr=W(Un,vt[Pr],Ct);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&(Xt=Un,nn=gr)}vt.push(Xt)}for(var ei=null,Ji=null,Or=0;Or<vt.length;Or++){for(var eo=0,_i=0;_i<vt.length;_i++)Or!==_i&&(eo+=W(vt[Or],vt[_i],Ct));(ei===null||eo>ei)&&(ei=eo,Ji=Or)}var Mi=[];for(Mi.push(vt[Ji]),vt.splice(Ji,1);vt.length>0;){for(var zi=null,to=null,Ti=0;Ti<vt.length;Ti++){var Qn=W(Mi[0],vt[Ti],Ct);(zi===null||Qn<zi)&&(zi=Qn,to=Ti)}Mi.push(vt[to]),vt.splice(to,1)}return Mi}(m)}var et;return m}(de),At=oe/T;At>1&&(At=$()),ve/=U,D.debug("getNextQuality called throughput:".concat(At," latency:").concat(ve," bufferSize:").concat(Ce," currentQualityIndex:").concat(Ae," playbackRate:").concat(Xe));var Oe=lt[Ae],Qe=Oe.bitrate*Ze.getSegmentDuration()/Ye,ct=Math.max(0,Qe-st);if(st-Qe<Ze.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(Oe.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(st," rebuffer=").concat(ct)),function(ce,He){var _t=0,ot=ce;if(m)for(var rt=0;rt<m.length;rt++){var et=m[rt];et.bitrate<ce.bitrate&&et.bitrate>_t&&He>et.bitrate&&(_t=et.bitrate,ot=et)}return ot}(Oe,Ye).qualityIndex;switch(C){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(ce){_=function(He,_t){for(var ot=[],rt=Math.sqrt(2/He),et=0;et<4;et++)ot.push(Math.random()*rt);return _=ot}(ce.length)})(lt);break;default:(function(ce,He,_t,ot,rt,et,ft){_||(_=I[I.length-1]);var vt=ce.findWeightVector(He,_t,ot,rt,et,ft);vt!==null&&vt!==-1&&(_=vt)})(Ze,lt,it,st,ct,Ye,Xe)}for(var Qt=null,Kt=null,Tt=null,Pt=0;Pt<lt.length;Pt++){var Ie=lt[Pt],ne=Ie.state,Fe=[ne.throughput,ne.latency,ne.rebuffer,ne.switch],O=_.slice(),M=Ze.getNextBufferWithBitrate(Ie.bitrate,st,Ye),q=M<Ze.getMinBuffer();q&&D.debug("Buffer is low for bitrate=".concat(Ie.bitrate," downloadTime=").concat(Qe," currentBuffer=").concat(st," nextBuffer=").concat(M)),(Ie.bitrate>oe-1e4||q)&&Ie.bitrate!==N&&(O[0]=100);var K=W(Fe,[At,0,0,0],O);(Qt===null||K<Qt)&&(Qt=K,Kt=Ie.qualityIndex,Tt=Ie)}var pe=Math.abs(Oe.bitrate-Tt.bitrate)/T;return x(Oe,lt,[At,ve,ct,pe]),x(Tt,lt,[At,0,0,pe]),Kt},reset:function(){Y()}},D=(0,R.Z)(j).getInstance().getLogger(v),Y(),v}y.__dashjs_factory_name="LearningAbrController",g.Z=F.Z.getClassFactory(y)},5317:function(b,g,S){var F=S(5448),R=S(2298);function y(){var v,D,m,T,U;function N(){D=null,m=null,T=null,U=null}function _(C,j,Y,$){var W=new R.Z;return W.type=C,W.weights.bitrateReward=j||1,W.weights.bitrateSwitchPenalty=1,W.weights.rebufferPenalty=Y||1e3,W.weights.latencyPenalty=[],W.weights.latencyPenalty.push({threshold:1.1,penalty:.05*$}),W.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),W.weights.playbackSpeedPenalty=$||200,W}function I(C,j,Y,$,W){W.bitrateWSum+=W.weights.bitrateReward*C,W.lastBitrate&&(W.bitrateSwitchWSum+=W.weights.bitrateSwitchPenalty*Math.abs(C-W.lastBitrate)),W.lastBitrate=C,W.rebufferWSum+=W.weights.rebufferPenalty*j;for(var ue=0;ue<W.weights.latencyPenalty.length;ue++){var x=W.weights.latencyPenalty[ue];if(Y<=x.threshold){W.latencyWSum+=x.penalty*Y;break}}W.playbackSpeedWSum+=W.weights.playbackSpeedPenalty*Math.abs(1-$),W.totalQoe=W.bitrateWSum-W.bitrateSwitchWSum-W.rebufferWSum-W.latencyWSum-W.playbackSpeedWSum}return v={setupPerSegmentQoe:function(C,j,Y){D=_("segment",C,j,Y),m=C,T=j,U=Y},logSegmentMetrics:function(C,j,Y,$){D&&I(C,j,Y,$,D)},getPerSegmentQoe:function(){return D},calculateSingleUseQoe:function(C,j,Y,$){var W=null;return m&&T&&U&&(W=_("segment",m,T,U)),W?(I(C,j,Y,$,W),W.totalQoe):0},reset:function(){N()}},N(),v}y.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=F.Z.getClassFactory(y)},5435:function(b,g,S){var F=S(6398),R=S(5448),y=S(4722),v=S(5317),D=S(2068),m=S(3860),T=S(6523),U=S(3393);function N(_){var I,C,j,Y,$=(_=_||{}).dashMetrics,W=this.context;return C={getMaxIndex:function(ue){try{var x=(0,D.Z)(W).create(),X=ue.getMediaInfo().type,de=ue.getAbrController(),oe=ue.getStreamInfo(),ve=de.getQualityFor(X,oe.id),Ce=ue.getMediaInfo(),Xe=$.getCurrentBufferState(X),Ae=ue.getScheduleController(),Ze=$.getCurrentBufferLevel(X,!0),it=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,st=Ae.getPlaybackController(),Ye=st.getCurrentLiveLatency();if(!ue.useLoLPABR()||X===U.Z.AUDIO)return x;Ye||(Ye=0);var lt=st.getPlaybackRate(),At=de.getThroughputHistory().getSafeAverageThroughput(X,it);if(I.debug("Throughput ".concat(Math.round(At)," kbps")),isNaN(At)||!Xe||de.getAbandonmentStateFor(oe.id,X)===m.Z.ABANDON_LOAD)return x;for(var Oe=Ce.bitrateList,Qe=ue.getRepresentationInfo().fragmentDuration,ct=Oe[0].bandwidth/1e3,Qt=Oe[Oe.length-1].bandwidth/1e3,Kt=0;Kt<Oe.length;Kt++){var Tt=Oe[Kt].bandwidth/1e3;Tt>Qt?Qt=Tt:Tt<ct&&(ct=Tt)}var Pt=Oe[ve].bandwidth/1e3,Ie=$.getCurrentHttpRequest(X,!0),ne=(Ie.tresponse.getTime()-Ie.trequest.getTime())/1e3,Fe=ne>Qe?ne-Qe:0;Y.setupPerSegmentQoe(Qe,Qt,ct),Y.logSegmentMetrics(Pt,Fe,Ye,lt);var O=(0,T.Z)(W).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Qe,qoeEvaluator:Y});return x.quality=j.getNextQuality(Ce,1e3*At,Ye,Ze,lt,ve,O),x.reason={throughput:At,latency:Ye},x.priority=D.Z.PRIORITY.STRONG,Ae.setTimeToLoadDelay(0),x.quality!==ve&&I.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",x.quality,"Average throughput",Math.round(At),"kbps"),x}catch(M){throw M}},reset:function(){j.reset(),Y.reset()}},I=(0,F.Z)(W).getInstance().getLogger(C),j=(0,y.Z)(W).create(),Y=(0,v.Z)(W).create(),C}N.__dashjs_factory_name="LoLPRule",g.Z=R.Z.getClassFactory(N)},6523:function(b,g,S){var F=S(5448);function R(y){var v,D,m,T,U=y.targetLatency,N=y.bufferMin,_=y.segmentDuration,I=y.qoeEvaluator;function C(){return _}function j(Y,$){var W=C();return $>W?Y-W:Y+W-$}return v={getMinBuffer:function(){return N},getSegmentDuration:C,getNextBufferWithBitrate:function(Y,$,W){return j($,Y*_/W)},getNextBuffer:j,findWeightVector:function(Y,$,W,ue,x,X){var de=null,oe=null,ve=null,Ce=Math.abs($-m);return Y.forEach(function(Xe){D.forEach(function(Ae){Ae[0];var Ze=Ae[1],it=Ae[2],st=(Ae[3],Xe.bitrate*_/x),Ye=j(W,st),lt=(it===0?10:1/it)*Math.max(1e-5,st-Ye),At=(Ze===0?10:1/Ze)*Xe.state.latency,Oe=I.calculateSingleUseQoe(Xe.bitrate,lt,At,X);(de===null||Oe>de)&&function(Qe,ct,Qt){return!(Qe>U+Qt)&&ct>=N}($,Ye,Ce)&&(de=Oe,oe=Ae,ve=Xe.bitrate)})}),oe===null&&ve===null&&(oe=-1),m=$,oe}},D=function Y($,W,ue){if(ue===W)return $;for(var x=$.length,X=0;X<x;X++)for(var de=$.shift(),oe=0;oe<T.length;oe++)$.push(de.concat(T[oe]));return Y($,W,ue+1)}((T=[.2,.4,.6,.8,1]).map(function(Y){return[Y]}),4,1),m=0,v}R.__dashjs_factory_name="LoLpWeightSelector",g.Z=F.Z.getClassFactory(R)},2298:function(b,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(b,g,S){S.d(g,{Y:function(){return I}});var F=S(3393),R=S(1553),y=S(5448),v=S(2128),D=S(2594),m=S(7387),T=S(7417),U=S(9032),N=S(9326),_=S(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function C(j){var Y,$,W,ue,x,X,de,oe,ve=this.context,Ce=j.adapter,Xe=j.baseURLController,Ae=j.streamInfo,Ze=j.timelineConverter,it=j.debug,st=j.eventBus,Ye=j.events,lt=j.dashConstants,At=(0,D.Z)(ve).getInstance();function Oe(ct,Qt){var Kt=new v.Z;Kt.id=ct.id,Kt.bitrate=ct.bandwidth,Kt.width=ct.width,Kt.height=ct.height,Kt.tilesHor=1,Kt.tilesVert=1,ct.essentialProperties&&ct.essentialProperties.forEach(function(Tt){if(I.indexOf(Tt.schemeIdUri)>=0&&Tt.value){var Pt=Tt.value.split("x");Pt.length!==2||isNaN(Pt[0])||isNaN(Pt[1])||(Kt.tilesHor=parseInt(Pt[0],10),Kt.tilesVert=parseInt(Pt[1],10))}}),Qt?X.updateSegmentData(ct).then(function(Tt){(function(Pt,Ie,ne){var Fe=[],O=function(M,q){var K,pe,ce,He,_t=[],ot=0;for(K=0,pe=M.segments.length;K<pe;K++)ce=M.segments[K],(He=(0,m.TJ)(Ze,Ce.getIsDynamic(),q,ce.startTime,ce.duration,ce.timescale,ce.media,ce.mediaRange,ot))&&(_t.push(He),He=null,ot++);return _t}(ne,Ie);Ie.segments=O,Pt.segmentDuration=Ie.segments[0].duration,Pt.readThumbnail=function(M,q){var K=null;Fe.some(function(pe){if(pe.start<=M&&pe.end>M)return K=pe.url,!0}),K?q(K):Ie.segments.some(function(pe){if(pe.mediaStartTime<=M&&pe.mediaStartTime+pe.duration>M){var ce=Xe.resolve(Ie.path);return de.load({method:"get",url:ce.url,request:{range:pe.mediaRange,responseType:"arraybuffer"},onload:function(He){var _t=oe.getSamplesInfo(He.target.response),ot=new Blob([He.target.response.slice(_t.sampleList[0].offset,_t.sampleList[0].offset+_t.sampleList[0].size)],{type:"image/jpeg"}),rt=window.URL.createObjectURL(ot);Fe.push({start:pe.mediaStartTime,end:pe.mediaStartTime+pe.duration,url:rt}),q&&q(rt)}}),!0}})}})(Kt,ct,Tt)}):(Kt.startNumber=ct.startNumber,Kt.segmentDuration=ct.segmentDuration,Kt.timescale=ct.timescale,Kt.templateUrl=function(Tt){var Pt=At.isRelative(Tt.media)?At.resolve(Tt.media,Xe.resolve(Tt.path).url):Tt.media;return Pt?(0,m.Aj)(Pt,Tt.id):""}(ct)),Kt.tilesHor>0&&Kt.tilesVert>0&&(Kt.widthPerTile=Kt.width/Kt.tilesHor,Kt.heightPerTile=Kt.height/Kt.tilesVert,$.push(Kt))}function Qe(){$=[],ue=-1,x=null}return Y={getTracks:function(){return $},addTracks:function(){if(Ae&&Ce&&(x=Ce.getMediaInfoForType(Ae,F.Z.IMAGE))){var ct=Ce.getVoRepresentations(x);ct&&ct.length>0&&ct.forEach(function(Qt){(Qt.segmentInfoType===R.Z.SEGMENT_TEMPLATE&&Qt.segmentDuration>0&&Qt.media||Qt.segmentInfoType===R.Z.SEGMENT_TIMELINE)&&Oe(Qt),Qt.segmentInfoType===R.Z.SEGMENT_BASE&&Oe(Qt,!0)}),$.length>0&&$.sort(function(Qt,Kt){return Qt.bitrate-Kt.bitrate})}},reset:Qe,setTrackByIndex:function(ct){$&&$.length!==0&&(ct>=$.length&&(ct=$.length-1),ue=ct)},getCurrentTrack:function(){return ue<0?null:$[ue]},getCurrentTrackIndex:function(){return ue},getThumbnailRequestForTime:function(ct){for(var Qt,Kt=Ce.getVoRepresentations(x),Tt=0;Tt<Kt.length;Tt++)if($[ue].id===Kt[Tt].id){Qt=Kt[Tt];break}return W.getSegmentRequestForTime(x,Qt,ct)}},Qe(),de=(0,U.Z)(ve).create({}),oe=(0,T.Z)(ve).getInstance(),X=(0,_.Z)(ve).create({events:Ye,eventBus:st,streamInfo:Ae,timelineConverter:Ze,dashConstants:lt,dashMetrics:j.dashMetrics,segmentBaseController:j.segmentBaseController,type:F.Z.IMAGE}),(W=(0,N.Z)(ve).create({streamInfo:Ae,type:F.Z.IMAGE,timelineConverter:Ze,segmentsController:X,baseURLController:Xe,debug:it,eventBus:st,events:Ye,dashConstants:lt,urlUtils:At})).initialize(!!Ce&&Ce.getIsDynamic()),Y}C.__dashjs_factory_name="ThumbnailTracks",g.Z=y.Z.getClassFactory(C)},7417:function(b,g,S){var F=S(6398),R=S(8260),y=S(5448),v=S(6934),D=S(9597);function m(){var T,U,N=this.context;function _(j){if(!j)return null;j.fileStart===void 0&&(j.fileStart=0);var Y=v.parseBuffer(j),$=(0,R.Z)(N).create();return $.setData(Y),$}function I(j,Y){return j[Y+3]>>>0|j[Y+2]<<8>>>0|j[Y+1]<<16>>>0|j[Y]<<24>>>0}function C(j,Y){return String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y])}return U={parse:_,findLastTopIsoBoxCompleted:function(j,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new D.Z(0,!1);for(var W,ue=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,x=0;$<ue.byteLength;){var X=I(ue,$),de=C(ue,$+4);if(X===0)break;$+X<=ue.byteLength&&(j.indexOf(de)>=0?W=new D.Z($,!0,X):x=$+X),$+=X}return W||new D.Z(x,!1)},getMediaTimescaleFromMoov:function(j){var Y=_(j),$=Y?Y.getBox("mdhd"):void 0;return $?$.timescale:NaN},getSamplesInfo:function(j){if(!j||j.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Y,$,W,ue,x,X,de,oe,ve,Ce,Xe,Ae,Ze,it,st,Ye,lt=_(j),At=lt.getBoxes("moof"),Oe=lt.getBoxes("mfhd");st=lt.getBoxes("moof").length,it=Oe[Oe.length-1].sequence_number,$=0,x=[];var Qe=-1,ct=-1;for(Ce=0;Ce<At.length;Ce++){var Qt=At[Ce],Kt=Qt.getChildBoxes("traf");for(oe=0;oe<Kt.length;oe++){var Tt=Kt[oe],Pt=Tt.getChildBox("tfhd"),Ie=Tt.getChildBox("tfdt");ue=Ie.baseMediaDecodeTime;var ne=Tt.getChildBoxes("trun"),Fe=Tt.getChildBoxes("subs");for(ve=0;ve<ne.length;ve++){var O=ne[ve];for($=O.sample_count,Ze=(Pt.base_data_offset||0)+(O.data_offset||0),de=0;de<$;de++){Y=(X=O.samples[de]).sample_duration!==void 0?X.sample_duration:Pt.default_sample_duration,W=X.sample_size!==void 0?X.sample_size:Pt.default_sample_size;var M={dts:ue,cts:ue+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:Y,offset:Qt.offset+Ze,size:W,subSizes:[W]};if(Fe)for(Xe=0;Xe<Fe.length;Xe++){var q=Fe[Xe];if(Qe<q.entry_count-1&&de>ct&&(Qe++,ct+=q.entries[Qe].sample_delta),de==ct){M.subSizes=[];var K=q.entries[Qe];for(Ae=0;Ae<K.subsample_count;Ae++)M.subSizes.push(K.subsamples[Ae].subsample_size)}}x.push(M),Ze+=W,ue+=Y}}Ye=ue-Ie.baseMediaDecodeTime}}return{sampleList:x,lastSequenceNumber:it,totalDuration:Ye,numSequences:st}},findInitRange:function(j){var Y=null,$=_(j);if(!$)return Y;var W=$.getBox("ftyp"),ue=$.getBox("moov");return T.debug("Searching for initialization."),ue&&ue.isComplete&&(Y=(W?W.offset:ue.offset)+"-"+(ue.offset+ue.size-1),T.debug("Found the initialization.  Range: "+Y)),Y},parsePayload:function(j,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new D.Z(0,!1);for(var W,ue=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,x=0;$<ue.byteLength;){var X=I(ue,$),de=C(ue,$+4);if(X===0)break;$+X<=ue.byteLength&&(j.indexOf(de)>=0?W=new D.Z($,!0,X,de):x=$+X),$+=X}return W||new D.Z(x,!1)}},T=(0,F.Z)(N).getInstance().getLogger(U),U}m.__dashjs_factory_name="BoxParser",g.Z=y.Z.getSingletonFactory(m)},1715:function(b,g,S){S.d(g,{B:function(){return D}});var F=S(5448),R=S(7803),y=S(3393),v=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var T="ManagedMediaSource"in window,U="WebKitMediaSource"in window,N="MediaSource"in window;return T||U||N}function m(){var T,U,N;return T={setConfig:function(_){_&&_.settings&&(U=_.settings)},supportsMediaSource:D,supportsEncryptedMedia:function(){return N},supportsCodec:function(_,I){return I!==y.Z.AUDIO&&I!==y.Z.VIDEO?Promise.resolve(!0):function(C,j){return U.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(C.codec&&j===y.Z.AUDIO||j===y.Z.VIDEO&&C.codec&&C.width&&C.height&&C.bitrate&&C.framerate)}(_,I)?function(C,j){return new Promise(function(Y){if(C&&C.codec){var $={type:"media-source"};$[j]={},$[j].contentType=C.codec,$[j].width=C.width,$[j].height=C.height,$[j].bitrate=parseInt(C.bitrate),$[j].framerate=parseFloat(C.framerate),navigator.mediaCapabilities.decodingInfo($).then(function(W){Y(W.supported)}).catch(function(){Y(!1)})}else Y(!1)})}(_,I):function(C){return new Promise(function(j){if(C&&C.codec){var Y=C.codec;C.width&&C.height&&(Y+=';width="'+C.width+'";height="'+C.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Y)||"MediaSource"in window&&MediaSource.isTypeSupported(Y)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Y)?j(!0):j(!1)}else j(!1)})}(_)},setEncryptedMediaSupported:function(_){N=_},supportsEssentialProperty:function(_){try{return R.Y.indexOf(_.schemeIdUri)!==-1||y.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var C,j=_.split(".")[0],Y=I.indexOf(j)===0,$=0;$<v.length;$++)if(v[$].codec===j){C=v[$];break}return C?Y||C.compatibleCodecs.some(function(W){return I.indexOf(W)===0}):Y}},N=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=F.Z.getSingletonFactory(m)},2295:function(b,g,S){var F=S(5448),R=S(3106);function y(){return{customTimeRangeArray:[],length:0,add:function(v,D){var m;for(m=0;m<this.customTimeRangeArray.length&&v>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:v,end:D}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(v,D){for(var m=0;m<this.customTimeRangeArray.length;m++)if(v<=this.customTimeRangeArray[m].start&&D>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(v>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:D,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=v;break}v>this.customTimeRangeArray[m].start&&v<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=v:D>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=D)}this.length=this.customTimeRangeArray.length},mergeRanges:function(v,D){var m=this.customTimeRangeArray[v],T=this.customTimeRangeArray[D];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(v,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(D,1),!0)},start:function(v){return(0,R.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].start},end:function(v){return(0,R.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].end}}}y.__dashjs_factory_name="CustomTimeRanges",g.Z=F.Z.getClassFactory(y)},5:function(b,g,S){var F=S(5448);function R(){var y,v=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,U=function(W,ue){try{return new window.URL(W,ue).toString()}catch(x){return W}},N=function(W,ue){var x=_;if(!ue||!j(W))return W;Y(W)&&(x=I),$(W)&&(x=C);var X=x(ue),de=X.charAt(X.length-1)!=="/"&&W.charAt(0)!=="/"?"/":"";return[X,W].join(de)};function _(W){var ue=W.indexOf("/"),x=W.lastIndexOf("/");return ue!==-1?x===ue+1?W:(W.indexOf("?")!==-1&&(W=W.substring(0,W.indexOf("?"))),W.substring(0,x+1)):""}function I(W){var ue=W.match(T);return ue?ue[1]:""}function C(W){var ue=W.match(v);return ue?ue[0]:""}function j(W){return!v.test(W)}function Y(W){return j(W)&&W.charAt(0)==="/"}function $(W){return W.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),y=U}catch(W){}finally{y=y||N}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:C,isRelative:j,isPathAbsolute:Y,isSchemeRelative:$,isHTTPURL:function(W){return D.test(W)},isHTTPS:function(W){return m.test(W)},removeHostname:function(W){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(W)[2].substring(1)},resolve:function(W,ue){return y(W,ue)}}}R.__dashjs_factory_name="DefaultURLUtils",g.Z=F.Z.getSingletonFactory(R)},8260:function(b,g,S){var F=S(2839),R=S(5448);function y(){var v;function D(T){var U=[];if(!T||!v||typeof v.fetchAll!="function")return U;for(var N,_=v.fetchAll(T),I=0,C=_.length;I<C;I++)(N=m(_[I]))&&U.push(N);return U}function m(T){if(!T)return null;var U=new F.Z(T);return T.hasOwnProperty("_incomplete")&&(U.isComplete=!T._incomplete),U}return{getBox:function(T){return T&&v&&v.boxes&&v.boxes.length!==0&&typeof v.fetch=="function"?m(v.fetch(T)):null},getBoxes:D,setData:function(T){v=T},getLastBox:function(){if(!v||!v.boxes||!v.boxes.length)return null;var T=D(v.boxes[v.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}y.__dashjs_factory_name="IsoFile",g.Z=R.Z.getClassFactory(y)},7473:function(b,g,S){S.d(g,{k:function(){return R}});var F=S(5448);function R(v,D){var m={url:v.url,method:v.method,headers:Object.assign({},v.headers),credentials:v.withCredentials?"include":void 0,range:v.request.range};return Promise.resolve(D.modifyRequest(m)).then(function(){return Object.assign(v,m,{withCredentials:m.credentials==="include"})})}function y(){return{modifyRequest:null,modifyRequestURL:function(v){return v},modifyRequestHeader:function(v,D){return D.url,v}}}y.__dashjs_factory_name="RequestModifier",g.Z=F.Z.getSingletonFactory(y)},3106:function(b,g,S){S.d(g,{PS:function(){return y},SE:function(){return v}});var F=S(3393);function R(D){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},R(D)}function y(D,m){if(R(D)!==m)throw F.Z.BAD_ARGUMENT_ERROR}function v(D){if(D===null||isNaN(D)||D%1!=0)throw F.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(b,g,S){var F=S(5448),R=S(5);function y(){var D,m=[],T=this.context;function U(N,_,I){var C=function(j){var Y;for(Y=0;Y<m.length;Y++)if(m[Y].regex.test(j))return m[Y].utils;return D}(I||_);return C&&typeof C[N]=="function"?C[N](_,I):D[N](_,I)}return D=(0,R.Z)(T).getInstance(),{registerUrlRegex:function(N,_){m.push({regex:N,utils:_})},parseBaseUrl:function(N){return U("parseBaseUrl",N)},parseOrigin:function(N){return U("parseOrigin",N)},parseScheme:function(N){return U("parseScheme",N)},isRelative:function(N){return U("isRelative",N)},isPathAbsolute:function(N){return U("isPathAbsolute",N)},isSchemeRelative:function(N){return U("isSchemeRelative",N)},isHTTPURL:function(N){return U("isHTTPURL",N)},isHTTPS:function(N){return U("isHTTPS",N)},removeHostname:function(N){return U("removeHostname",N)},resolve:function(N,_){return U("resolve",N,_)}}}y.__dashjs_factory_name="URLUtils";var v=F.Z.getSingletonFactory(y);g.Z=v},5459:function(b,g){g.Z=function S(F,R,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,S),this.code=F||null,this.message=R||null,this.data=y||null}},3186:function(b,g,S){var F=S(7855);function R(v,D){for(var m=0;m<D.length;m++){var T=D[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var y=function(){function v(T){(function(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")})(this,v),this.action=v.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var D,m;return D=v,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===F.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?F.w.INIT_SEGMENT_TYPE:F.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&R(D.prototype,m),v}();y.ACTION_DOWNLOAD="download",y.ACTION_COMPLETE="complete",g.Z=y},2839:function(b,g){function S(R,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}var F=function(){function R(D){if(function(C,j){if(!(C instanceof j))throw new TypeError("Cannot call a class as a function")}(this,R),this.offset=D._offset,this.type=D.type,this.size=D.size,this.boxes=[],D.boxes)for(var m=0;m<D.boxes.length;m++)this.boxes.push(new R(D.boxes[m]));switch(this.isComplete=!0,D.type){case"sidx":if(this.timescale=D.timescale,this.earliest_presentation_time=D.earliest_presentation_time,this.first_offset=D.first_offset,this.references=D.references,D.references){this.references=[];for(var T=0;T<D.references.length;T++){var U={reference_type:D.references[T].reference_type,referenced_size:D.references[T].referenced_size,subsegment_duration:D.references[T].subsegment_duration};this.references.push(U)}}break;case"emsg":this.id=D.id,this.version=D.version===1?1:0,this.value=D.value,this.timescale=D.timescale,this.scheme_id_uri=D.scheme_id_uri,this.presentation_time_delta=D.version===1?D.presentation_time:D.presentation_time_delta,this.event_duration=D.event_duration,this.message_data=D.message_data;break;case"mdhd":this.timescale=D.timescale;break;case"mfhd":this.sequence_number=D.sequence_number;break;case"subs":this.entry_count=D.entry_count,this.entries=D.entries;break;case"tfhd":this.base_data_offset=D.base_data_offset,this.sample_description_index=D.sample_description_index,this.default_sample_duration=D.default_sample_duration,this.default_sample_size=D.default_sample_size,this.default_sample_flags=D.default_sample_flags,this.flags=D.flags;break;case"tfdt":this.version=D.version,this.baseMediaDecodeTime=D.baseMediaDecodeTime,this.flags=D.flags;break;case"trun":if(this.sample_count=D.sample_count,this.first_sample_flags=D.first_sample_flags,this.data_offset=D.data_offset,this.flags=D.flags,this.samples=D.samples,D.samples){this.samples=[];for(var N=0,_=D.samples.length;N<_;N++){var I={sample_size:D.samples[N].sample_size,sample_duration:D.samples[N].sample_duration,sample_composition_time_offset:D.samples[N].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=D.version,this.reference_track_ID=D.reference_track_ID,this.ntp_timestamp_sec=D.ntp_timestamp_sec,this.ntp_timestamp_frac=D.ntp_timestamp_frac,this.media_time=D.media_time,this.flags=D.flags}}var y,v;return y=R,(v=[{key:"getChildBox",value:function(D){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===D)return this.boxes[m]}},{key:"getChildBoxes",value:function(D){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===D&&m.push(this.boxes[T]);return m}}])&&S(y.prototype,v),R}();g.Z=F},9597:function(b,g){g.Z=function S(F,R,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,S),this.lastCompletedOffset=F,this.found=R,this.size=y}},2128:function(b,g){g.Z=function S(){(function(F,R){if(!(F instanceof R))throw new TypeError("Cannot call a class as a function")})(this,S),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(b,g,S){function F(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}S.d(g,{O:function(){return y},w:function(){return R}});var R=function v(){F(this,v),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},y=function v(){F(this,v),this.s=null,this.d=null,this.b=[]};R.GET="GET",R.HEAD="HEAD",R.MPD_TYPE="MPD",R.XLINK_EXPANSION_TYPE="XLinkExpansion",R.INIT_SEGMENT_TYPE="InitializationSegment",R.INDEX_SEGMENT_TYPE="IndexSegment",R.MEDIA_SEGMENT_TYPE="MediaSegment",R.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",R.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",R.DVB_REPORTING_TYPE="DVBReporting",R.LICENSE="license",R.CONTENT_STEERING_TYPE="ContentSteering",R.OTHER_TYPE="other"},3039:function(b,g){function S(R,y){return function(v,D){for(var m,T,U,N=F(v,"tag"),_=F(D==null?"*":D,"range"),I=[],C=-1;++C<_.length;)if(m=_[C].toLowerCase(),y||m!=="*"){for(T=-1,U=[];++T<N.length;)if(R(N[T].toLowerCase(),m)){if(!y)return N[T];I.push(N[T])}else U.push(N[T]);N=U}return y?I:void 0}}function F(R,y){var v=R&&typeof R=="string"?[R]:R;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}g.basicFilter=S(function(R,y){return y==="*"||R===y||R.indexOf(y+"-")>-1},!0),g.extendedFilter=S(function(R,y){var v=R.split("-"),D=y.split("-"),m=0,T=0;if(D[T]!=="*"&&v[m]!==D[T])return!1;for(m++,T++;T<D.length;)if(D[T]!=="*"){if(!v[m])return!1;if(v[m]!==D[T]){if(v[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=S(function(R,y){for(var v,D=y;;){if(D==="*"||R===D)return!0;if((v=D.lastIndexOf("-"))<0)return!1;D.charAt(v-2)==="-"&&(v-=2),D=D.slice(0,v)}})},3973:function(b,g,S){b.exports=S(3854)},3854:function(b,g,S){var F=S(2415),R=S(3039),y=S(7778),v=S(5813),D=S(3165),m=S(9460);b.exports=function(Y,$){var W,ue=$||{},x=F.parse(String(Y||"").toLowerCase(),ue),X=F.stringify(x),de=-1;if(!X)return X;for(;++de<y.length;)R.extendedFilter(X,y[de].from).length&&(_(x,y[de].from,y[de].to),X=F.stringify(x));for(de=-1;++de<v.length;)I(x,v[de].from.field,v[de].from.value)&&C(x,v[de].to.field,v[de].to.value);for(X=F.stringify(Object.assign({},x,N)),de=-1;++de<D.length;)X===D[de]&&(_(x,D[de],D[de].split("-").slice(0,-1).join("-")),X=F.stringify(Object.assign({},x,N)));if(x.extensions.sort(j),ue.warning)for(W in m)T.call(m[W],x[W])&&ue.warning("Deprecated "+W+" `"+x[W]+"`, expected one of `"+m[W][x[W]].join("`, `")+"`",null,7);return x.script&&(x.script=x.script.charAt(0).toUpperCase()+x.script.slice(1)),x.region&&(x.region=x.region.toUpperCase()),F.stringify(x)};var T={}.hasOwnProperty,U=new Intl.Collator,N={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(Y,$,W){var ue,x=F.parse($),X=F.parse(W),de=[];for(ue in x)x[ue]&&x[ue].length&&I(Y,ue,x[ue])&&de.push(ue);for(ue in X)X[ue]&&X[ue].length&&(de.indexOf(ue)>-1||!Y[ue]||!Y[ue].length)&&C(Y,ue,X[ue])}function I(Y,$,W){var ue,x,X,de,oe=!1;if(W){if(x=ue=Y[$],ue&&typeof ue=="object")for(x=[],X=-1;++X<ue.length;)de=ue[X],W.indexOf(de)<0?x.push(de):oe=!0;else ue===W&&(x=null,oe=!0);Y[$]=x}return oe}function C(Y,$,W){var ue,x,X,de=Y[$];if(de&&typeof de=="object")for(ue=[].concat(W),x=-1;++x<ue.length;)X=ue[x],de.indexOf(X)<0&&de.push(X);else Y[$]=W}function j(Y,$){return U.compare(Y.singleton,$.singleton)}},2415:function(b,g,S){g.parse=S(6903),g.stringify=S(6713)},6903:function(b,g,S){var F=S(2219),R=S(3516),y=S(395),v=S(858),D=S(8589);b.exports=function T(U,N){var _,I,C,j=N||{},Y={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},$=String(U),W=$.toLowerCase(),ue=0;if(U==null)throw new Error("Expected string, got `"+U+"`");if(m.call(D,W))return(j.normalize==null||j.normalize)&&D[W]?T(D[W]):(Y[v.indexOf(W)===-1?"irregular":"regular"]=$,Y);for(;R(W.charCodeAt(ue))&&ue<9;)ue++;if(ue>1&&ue<9){if(Y.language=$.slice(0,ue),ue<4)for(I=0;W.charCodeAt(ue)===45&&R(W.charCodeAt(ue+1))&&R(W.charCodeAt(ue+2))&&R(W.charCodeAt(ue+3))&&!R(W.charCodeAt(ue+4));){if(I>2)return x(ue,3,"Too many extended language subtags, expected at most 3 subtags");Y.extendedLanguageSubtags.push($.slice(ue+1,ue+4)),ue+=4,I++}for(W.charCodeAt(ue)===45&&R(W.charCodeAt(ue+1))&&R(W.charCodeAt(ue+2))&&R(W.charCodeAt(ue+3))&&R(W.charCodeAt(ue+4))&&!R(W.charCodeAt(ue+5))&&(Y.script=$.slice(ue+1,ue+5),ue+=5),W.charCodeAt(ue)===45&&(R(W.charCodeAt(ue+1))&&R(W.charCodeAt(ue+2))&&!R(W.charCodeAt(ue+3))?(Y.region=$.slice(ue+1,ue+3),ue+=3):y(W.charCodeAt(ue+1))&&y(W.charCodeAt(ue+2))&&y(W.charCodeAt(ue+3))&&!y(W.charCodeAt(ue+4))&&(Y.region=$.slice(ue+1,ue+4),ue+=4));W.charCodeAt(ue)===45;){for(C=_=ue+1;F(W.charCodeAt(C));){if(C-_>7)return x(C,1,"Too long variant, expected at most 8 characters");C++}if(!(C-_>4||C-_>3&&y(W.charCodeAt(_))))break;Y.variants.push($.slice(_,C)),ue=C}for(;W.charCodeAt(ue)===45&&W.charCodeAt(ue+1)!==120&&F(W.charCodeAt(ue+1))&&W.charCodeAt(ue+2)===45&&F(W.charCodeAt(ue+3));){for(C=ue+2,I=0;W.charCodeAt(C)===45&&F(W.charCodeAt(C+1))&&F(W.charCodeAt(C+2));)for(C=(_=C+1)+2,I++;F(W.charCodeAt(C));){if(C-_>7)return x(C,2,"Too long extension, expected at most 8 characters");C++}if(!I)return x(C,4,"Empty extension, extensions must have at least 2 characters of content");Y.extensions.push({singleton:$.charAt(ue+1),extensions:$.slice(ue+3,C).split("-")}),ue=C}}else ue=0;if(ue===0&&W.charCodeAt(ue)===120||W.charCodeAt(ue)===45&&W.charCodeAt(ue+1)===120)for(C=ue=ue?ue+2:1;W.charCodeAt(C)===45&&F(W.charCodeAt(C+1));){for(C=_=ue+1;F(W.charCodeAt(C));){if(C-_>7)return x(C,5,"Too long private-use area, expected at most 8 characters");C++}Y.privateuse.push($.slice(ue+1,C)),ue=C}return ue!==$.length?x(ue,6,"Found superfluous content after tag"):Y;function x(X,de,oe){return j.warning&&j.warning(oe,de,X),j.forgiving?Y:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(b){b.exports=function(g){var S,F,R,y=g||{},v=[];if(y.irregular||y.regular)return y.irregular||y.regular;if(y.language)for(v=v.concat(y.language,y.extendedLanguageSubtags||[],y.script||[],y.region||[],y.variants||[]),S=y.extensions||[],F=-1;++F<S.length;)(R=S[F]).singleton&&R.extensions&&R.extensions.length&&(v=v.concat(R.singleton,R.extensions));return y.privateuse&&y.privateuse.length&&(v=v.concat("x",y.privateuse)),v.join("-")}},1549:function(b,g,S){var F=S(6693),R=S(2165),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(O){return+O!=O&&(O=0),m.alloc(+O)},g.INSPECT_MAX_BYTES=50;var v=2147483647;function D(O){if(O>v)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return Object.setPrototypeOf(M,m.prototype),M}function m(O,M,q){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(O)}return T(O,M,q)}function T(O,M,q){if(typeof O=="string")return function(ce,He){if(typeof He=="string"&&He!==""||(He="utf8"),!m.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var _t=0|j(ce,He),ot=D(_t),rt=ot.write(ce,He);return rt!==_t&&(ot=ot.slice(0,rt)),ot}(O,M);if(ArrayBuffer.isView(O))return function(ce){if(Ie(ce,Uint8Array)){var He=new Uint8Array(ce);return I(He.buffer,He.byteOffset,He.byteLength)}return _(ce)}(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Ie(O,ArrayBuffer)||O&&Ie(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(O,SharedArrayBuffer)||O&&Ie(O.buffer,SharedArrayBuffer)))return I(O,M,q);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return m.from(K,M,q);var pe=function(ce){if(m.isBuffer(ce)){var He=0|C(ce.length),_t=D(He);return _t.length===0||ce.copy(_t,0,0,He),_t}return ce.length!==void 0?typeof ce.length!="number"||ne(ce.length)?D(0):_(ce):ce.type==="Buffer"&&Array.isArray(ce.data)?_(ce.data):void 0}(O);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return m.from(O[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function U(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function N(O){return U(O),D(O<0?0:0|C(O))}function _(O){for(var M=O.length<0?0:0|C(O.length),q=D(M),K=0;K<M;K+=1)q[K]=255&O[K];return q}function I(O,M,q){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=M===void 0&&q===void 0?new Uint8Array(O):q===void 0?new Uint8Array(O,M):new Uint8Array(O,M,q),Object.setPrototypeOf(K,m.prototype),K}function C(O){if(O>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|O}function j(O,M){if(m.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Ie(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&q===0)return 0;for(var pe=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Kt(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return Tt(O).length;default:if(pe)return K?-1:Kt(O).length;M=(""+M).toLowerCase(),pe=!0}}function Y(O,M,q){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return st(this,M,q);case"utf8":case"utf-8":return Xe(this,M,q);case"ascii":return Ze(this,M,q);case"latin1":case"binary":return it(this,M,q);case"base64":return Ce(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ye(this,M,q);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function $(O,M,q){var K=O[M];O[M]=O[q],O[q]=K}function W(O,M,q,K,pe){if(O.length===0)return-1;if(typeof q=="string"?(K=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),ne(q=+q)&&(q=pe?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(pe)return-1;q=O.length-1}else if(q<0){if(!pe)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,K)),m.isBuffer(M))return M.length===0?-1:ue(O,M,q,K,pe);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?pe?Uint8Array.prototype.indexOf.call(O,M,q):Uint8Array.prototype.lastIndexOf.call(O,M,q):ue(O,[M],q,K,pe);throw new TypeError("val must be string, number or Buffer")}function ue(O,M,q,K,pe){var ce,He=1,_t=O.length,ot=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;He=2,_t/=2,ot/=2,q/=2}function rt(Et,Ct){return He===1?Et[Ct]:Et.readUInt16BE(Ct*He)}if(pe){var et=-1;for(ce=q;ce<_t;ce++)if(rt(O,ce)===rt(M,et===-1?0:ce-et)){if(et===-1&&(et=ce),ce-et+1===ot)return et*He}else et!==-1&&(ce-=ce-et),et=-1}else for(q+ot>_t&&(q=_t-ot),ce=q;ce>=0;ce--){for(var ft=!0,vt=0;vt<ot;vt++)if(rt(O,ce+vt)!==rt(M,vt)){ft=!1;break}if(ft)return ce}return-1}function x(O,M,q,K){q=Number(q)||0;var pe=O.length-q;K?(K=Number(K))>pe&&(K=pe):K=pe;var ce=M.length;K>ce/2&&(K=ce/2);for(var He=0;He<K;++He){var _t=parseInt(M.substr(2*He,2),16);if(ne(_t))return He;O[q+He]=_t}return He}function X(O,M,q,K){return Pt(Kt(M,O.length-q),O,q,K)}function de(O,M,q,K){return Pt(function(pe){for(var ce=[],He=0;He<pe.length;++He)ce.push(255&pe.charCodeAt(He));return ce}(M),O,q,K)}function oe(O,M,q,K){return Pt(Tt(M),O,q,K)}function ve(O,M,q,K){return Pt(function(pe,ce){for(var He,_t,ot,rt=[],et=0;et<pe.length&&!((ce-=2)<0);++et)_t=(He=pe.charCodeAt(et))>>8,ot=He%256,rt.push(ot),rt.push(_t);return rt}(M,O.length-q),O,q,K)}function Ce(O,M,q){return M===0&&q===O.length?F.fromByteArray(O):F.fromByteArray(O.slice(M,q))}function Xe(O,M,q){q=Math.min(O.length,q);for(var K=[],pe=M;pe<q;){var ce,He,_t,ot,rt=O[pe],et=null,ft=rt>239?4:rt>223?3:rt>191?2:1;if(pe+ft<=q)switch(ft){case 1:rt<128&&(et=rt);break;case 2:(192&(ce=O[pe+1]))==128&&(ot=(31&rt)<<6|63&ce)>127&&(et=ot);break;case 3:ce=O[pe+1],He=O[pe+2],(192&ce)==128&&(192&He)==128&&(ot=(15&rt)<<12|(63&ce)<<6|63&He)>2047&&(ot<55296||ot>57343)&&(et=ot);break;case 4:ce=O[pe+1],He=O[pe+2],_t=O[pe+3],(192&ce)==128&&(192&He)==128&&(192&_t)==128&&(ot=(15&rt)<<18|(63&ce)<<12|(63&He)<<6|63&_t)>65535&&ot<1114112&&(et=ot)}et===null?(et=65533,ft=1):et>65535&&(et-=65536,K.push(et>>>10&1023|55296),et=56320|1023&et),K.push(et),pe+=ft}return function(vt){var Et=vt.length;if(Et<=Ae)return String.fromCharCode.apply(String,vt);for(var Ct="",hn=0;hn<Et;)Ct+=String.fromCharCode.apply(String,vt.slice(hn,hn+=Ae));return Ct}(K)}g.kMaxLength=v,m.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(O,M,q){return T(O,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(O,M,q){return function(K,pe,ce){return U(K),K<=0?D(K):pe!==void 0?typeof ce=="string"?D(K).fill(pe,ce):D(K).fill(pe):D(K)}(O,M,q)},m.allocUnsafe=function(O){return N(O)},m.allocUnsafeSlow=function(O){return N(O)},m.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==m.prototype},m.compare=function(O,M){if(Ie(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),Ie(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(O)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var q=O.length,K=M.length,pe=0,ce=Math.min(q,K);pe<ce;++pe)if(O[pe]!==M[pe]){q=O[pe],K=M[pe];break}return q<K?-1:K<q?1:0},m.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<O.length;++q)M+=O[q].length;var K=m.allocUnsafe(M),pe=0;for(q=0;q<O.length;++q){var ce=O[q];if(Ie(ce,Uint8Array))pe+ce.length>K.length?m.from(ce).copy(K,pe):Uint8Array.prototype.set.call(K,ce,pe);else{if(!m.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(K,pe)}pe+=ce.length}return K},m.byteLength=j,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)$(this,M,M+1);return this},m.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)$(this,M,M+3),$(this,M+1,M+2);return this},m.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)$(this,M,M+7),$(this,M+1,M+6),$(this,M+2,M+5),$(this,M+3,M+4);return this},m.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?Xe(this,0,O):Y.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(O){if(!m.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||m.compare(this,O)===0},m.prototype.inspect=function(){var O="",M=g.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},y&&(m.prototype[y]=m.prototype.inspect),m.prototype.compare=function(O,M,q,K,pe){if(Ie(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),!m.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),q===void 0&&(q=O?O.length:0),K===void 0&&(K=0),pe===void 0&&(pe=this.length),M<0||q>O.length||K<0||pe>this.length)throw new RangeError("out of range index");if(K>=pe&&M>=q)return 0;if(K>=pe)return-1;if(M>=q)return 1;if(this===O)return 0;for(var ce=(pe>>>=0)-(K>>>=0),He=(q>>>=0)-(M>>>=0),_t=Math.min(ce,He),ot=this.slice(K,pe),rt=O.slice(M,q),et=0;et<_t;++et)if(ot[et]!==rt[et]){ce=ot[et],He=rt[et];break}return ce<He?-1:He<ce?1:0},m.prototype.includes=function(O,M,q){return this.indexOf(O,M,q)!==-1},m.prototype.indexOf=function(O,M,q){return W(this,O,M,q,!0)},m.prototype.lastIndexOf=function(O,M,q){return W(this,O,M,q,!1)},m.prototype.write=function(O,M,q,K){if(M===void 0)K="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")K=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,K===void 0&&(K="utf8")):(K=q,q=void 0)}var pe=this.length-M;if((q===void 0||q>pe)&&(q=pe),O.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var ce=!1;;)switch(K){case"hex":return x(this,O,M,q);case"utf8":case"utf-8":return X(this,O,M,q);case"ascii":case"latin1":case"binary":return de(this,O,M,q);case"base64":return oe(this,O,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,O,M,q);default:if(ce)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),ce=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ae=4096;function Ze(O,M,q){var K="";q=Math.min(O.length,q);for(var pe=M;pe<q;++pe)K+=String.fromCharCode(127&O[pe]);return K}function it(O,M,q){var K="";q=Math.min(O.length,q);for(var pe=M;pe<q;++pe)K+=String.fromCharCode(O[pe]);return K}function st(O,M,q){var K=O.length;(!M||M<0)&&(M=0),(!q||q<0||q>K)&&(q=K);for(var pe="",ce=M;ce<q;++ce)pe+=Fe[O[ce]];return pe}function Ye(O,M,q){for(var K=O.slice(M,q),pe="",ce=0;ce<K.length-1;ce+=2)pe+=String.fromCharCode(K[ce]+256*K[ce+1]);return pe}function lt(O,M,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>q)throw new RangeError("Trying to access beyond buffer length")}function At(O,M,q,K,pe,ce){if(!m.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>pe||M<ce)throw new RangeError('"value" argument is out of bounds');if(q+K>O.length)throw new RangeError("Index out of range")}function Oe(O,M,q,K,pe,ce){if(q+K>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Qe(O,M,q,K,pe){return M=+M,q>>>=0,pe||Oe(O,0,q,4),R.write(O,M,q,K,23,4),q+4}function ct(O,M,q,K,pe){return M=+M,q>>>=0,pe||Oe(O,0,q,8),R.write(O,M,q,K,52,8),q+8}m.prototype.slice=function(O,M){var q=this.length;(O=~~O)<0?(O+=q)<0&&(O=0):O>q&&(O=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<O&&(M=O);var K=this.subarray(O,M);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O],pe=1,ce=0;++ce<M&&(pe*=256);)K+=this[O+ce]*pe;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O+--M],pe=1;M>0&&(pe*=256);)K+=this[O+--M]*pe;return K},m.prototype.readUint8=m.prototype.readUInt8=function(O,M){return O>>>=0,M||lt(O,1,this.length),this[O]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(O,M){return O>>>=0,M||lt(O,2,this.length),this[O]|this[O+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(O,M){return O>>>=0,M||lt(O,2,this.length),this[O]<<8|this[O+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(O,M){return O>>>=0,M||lt(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(O,M){return O>>>=0,M||lt(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},m.prototype.readIntLE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=this[O],pe=1,ce=0;++ce<M&&(pe*=256);)K+=this[O+ce]*pe;return K>=(pe*=128)&&(K-=Math.pow(2,8*M)),K},m.prototype.readIntBE=function(O,M,q){O>>>=0,M>>>=0,q||lt(O,M,this.length);for(var K=M,pe=1,ce=this[O+--K];K>0&&(pe*=256);)ce+=this[O+--K]*pe;return ce>=(pe*=128)&&(ce-=Math.pow(2,8*M)),ce},m.prototype.readInt8=function(O,M){return O>>>=0,M||lt(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},m.prototype.readInt16LE=function(O,M){O>>>=0,M||lt(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(O,M){O>>>=0,M||lt(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(O,M){return O>>>=0,M||lt(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},m.prototype.readInt32BE=function(O,M){return O>>>=0,M||lt(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},m.prototype.readFloatLE=function(O,M){return O>>>=0,M||lt(O,4,this.length),R.read(this,O,!0,23,4)},m.prototype.readFloatBE=function(O,M){return O>>>=0,M||lt(O,4,this.length),R.read(this,O,!1,23,4)},m.prototype.readDoubleLE=function(O,M){return O>>>=0,M||lt(O,8,this.length),R.read(this,O,!0,52,8)},m.prototype.readDoubleBE=function(O,M){return O>>>=0,M||lt(O,8,this.length),R.read(this,O,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||At(this,O,M,q,Math.pow(2,8*q)-1,0);var pe=1,ce=0;for(this[M]=255&O;++ce<q&&(pe*=256);)this[M+ce]=O/pe&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||At(this,O,M,q,Math.pow(2,8*q)-1,0);var pe=q-1,ce=1;for(this[M+pe]=255&O;--pe>=0&&(ce*=256);)this[M+pe]=O/ce&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,1,255,0),this[M]=255&O,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeIntLE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var pe=Math.pow(2,8*q-1);At(this,O,M,q,pe-1,-pe)}var ce=0,He=1,_t=0;for(this[M]=255&O;++ce<q&&(He*=256);)O<0&&_t===0&&this[M+ce-1]!==0&&(_t=1),this[M+ce]=(O/He>>0)-_t&255;return M+q},m.prototype.writeIntBE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var pe=Math.pow(2,8*q-1);At(this,O,M,q,pe-1,-pe)}var ce=q-1,He=1,_t=0;for(this[M+ce]=255&O;--ce>=0&&(He*=256);)O<0&&_t===0&&this[M+ce+1]!==0&&(_t=1),this[M+ce]=(O/He>>0)-_t&255;return M+q},m.prototype.writeInt8=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},m.prototype.writeInt16LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeInt16BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeInt32LE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},m.prototype.writeInt32BE=function(O,M,q){return O=+O,M>>>=0,q||At(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeFloatLE=function(O,M,q){return Qe(this,O,M,!0,q)},m.prototype.writeFloatBE=function(O,M,q){return Qe(this,O,M,!1,q)},m.prototype.writeDoubleLE=function(O,M,q){return ct(this,O,M,!0,q)},m.prototype.writeDoubleBE=function(O,M,q){return ct(this,O,M,!1,q)},m.prototype.copy=function(O,M,q,K){if(!m.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q||(q=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<q&&(K=q),K===q||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-q&&(K=O.length-M+q);var pe=K-q;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,K):Uint8Array.prototype.set.call(O,this.subarray(q,K),M),pe},m.prototype.fill=function(O,M,q,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,q=this.length):typeof q=="string"&&(K=q,q=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var pe=O.charCodeAt(0);(K==="utf8"&&pe<128||K==="latin1")&&(O=pe)}}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var ce;if(M>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0),typeof O=="number")for(ce=M;ce<q;++ce)this[ce]=O;else{var He=m.isBuffer(O)?O:m.from(O,K),_t=He.length;if(_t===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(ce=0;ce<q-M;++ce)this[ce+M]=He[ce%_t]}return this};var Qt=/[^+/0-9A-Za-z-_]/g;function Kt(O,M){var q;M=M||1/0;for(var K=O.length,pe=null,ce=[],He=0;He<K;++He){if((q=O.charCodeAt(He))>55295&&q<57344){if(!pe){if(q>56319){(M-=3)>-1&&ce.push(239,191,189);continue}if(He+1===K){(M-=3)>-1&&ce.push(239,191,189);continue}pe=q;continue}if(q<56320){(M-=3)>-1&&ce.push(239,191,189),pe=q;continue}q=65536+(pe-55296<<10|q-56320)}else pe&&(M-=3)>-1&&ce.push(239,191,189);if(pe=null,q<128){if((M-=1)<0)break;ce.push(q)}else if(q<2048){if((M-=2)<0)break;ce.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;ce.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;ce.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return ce}function Tt(O){return F.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(Qt,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function Pt(O,M,q,K){for(var pe=0;pe<K&&!(pe+q>=M.length||pe>=O.length);++pe)M[pe+q]=O[pe];return pe}function Ie(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function ne(O){return O!=O}var Fe=function(){for(var O="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var K=16*q,pe=0;pe<16;++pe)M[K+pe]=O[q]+O[pe];return M}()},6693:function(b,g){g.byteLength=function(U){var N=m(U),_=N[0],I=N[1];return 3*(_+I)/4-I},g.toByteArray=function(U){var N,_,I=m(U),C=I[0],j=I[1],Y=new R(function(ue,x,X){return 3*(x+X)/4-X}(0,C,j)),$=0,W=j>0?C-4:C;for(_=0;_<W;_+=4)N=F[U.charCodeAt(_)]<<18|F[U.charCodeAt(_+1)]<<12|F[U.charCodeAt(_+2)]<<6|F[U.charCodeAt(_+3)],Y[$++]=N>>16&255,Y[$++]=N>>8&255,Y[$++]=255&N;return j===2&&(N=F[U.charCodeAt(_)]<<2|F[U.charCodeAt(_+1)]>>4,Y[$++]=255&N),j===1&&(N=F[U.charCodeAt(_)]<<10|F[U.charCodeAt(_+1)]<<4|F[U.charCodeAt(_+2)]>>2,Y[$++]=N>>8&255,Y[$++]=255&N),Y},g.fromByteArray=function(U){for(var N,_=U.length,I=_%3,C=[],j=16383,Y=0,$=_-I;Y<$;Y+=j)C.push(T(U,Y,Y+j>$?$:Y+j));return I===1?(N=U[_-1],C.push(S[N>>2]+S[N<<4&63]+"==")):I===2&&(N=(U[_-2]<<8)+U[_-1],C.push(S[N>>10]+S[N>>4&63]+S[N<<2&63]+"=")),C.join("")};for(var S=[],F=[],R=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,D=y.length;v<D;++v)S[v]=y[v],F[y.charCodeAt(v)]=v;function m(U){var N=U.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=U.indexOf("=");return _===-1&&(_=N),[_,_===N?0:4-_%4]}function T(U,N,_){for(var I,C,j=[],Y=N;Y<_;Y+=3)I=(U[Y]<<16&16711680)+(U[Y+1]<<8&65280)+(255&U[Y+2]),j.push(S[(C=I)>>18&63]+S[C>>12&63]+S[C>>6&63]+S[63&C]);return j.join("")}F[45]=62,F[95]=63},2165:function(b,g){g.read=function(S,F,R,y,v){var D,m,T=8*v-y-1,U=(1<<T)-1,N=U>>1,_=-7,I=R?v-1:0,C=R?-1:1,j=S[F+I];for(I+=C,D=j&(1<<-_)-1,j>>=-_,_+=T;_>0;D=256*D+S[F+I],I+=C,_-=8);for(m=D&(1<<-_)-1,D>>=-_,_+=y;_>0;m=256*m+S[F+I],I+=C,_-=8);if(D===0)D=1-N;else{if(D===U)return m?NaN:1/0*(j?-1:1);m+=Math.pow(2,y),D-=N}return(j?-1:1)*m*Math.pow(2,D-y)},g.write=function(S,F,R,y,v,D){var m,T,U,N=8*D-v-1,_=(1<<N)-1,I=_>>1,C=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=y?0:D-1,Y=y?1:-1,$=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(T=isNaN(F)?1:0,m=_):(m=Math.floor(Math.log(F)/Math.LN2),F*(U=Math.pow(2,-m))<1&&(m--,U*=2),(F+=m+I>=1?C/U:C*Math.pow(2,1-I))*U>=2&&(m++,U/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(F*U-1)*Math.pow(2,v),m+=I):(T=F*Math.pow(2,I-1)*Math.pow(2,v),m=0));v>=8;S[R+j]=255&T,j+=Y,T/=256,v-=8);for(m=m<<v|T,N+=v;N>0;S[R+j]=255&m,j+=Y,m/=256,N-=8);S[R+j-Y]|=128*$}},6934:function(b,g){var S={parseBuffer:function(y){return new F(y).parse()},addBoxProcessor:function(y,v){typeof y=="string"&&typeof v=="function"&&(R.prototype._boxProcessors[y]=v)},createFile:function(){return new F},createBox:function(y,v,D){var m=R.create(y);return v&&v.append(m,D),m},createFullBox:function(y,v,D){var m=S.createBox(y,v,D);return m.version=0,m.flags=0,m},Utils:{}};S.Utils.dataViewToString=function(y,v){var D=v||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(D).decode(y);var m=[],T=0;if(D==="utf-8")for(;T<y.byteLength;){var U=y.getUint8(T++);U<128||(U<224?(U=(31&U)<<6,U|=63&y.getUint8(T++)):U<240?(U=(15&U)<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++)):(U=(7&U)<<18,U|=(63&y.getUint8(T++))<<12,U|=(63&y.getUint8(T++))<<6,U|=63&y.getUint8(T++))),m.push(String.fromCharCode(U))}else for(;T<y.byteLength;)m.push(String.fromCharCode(y.getUint8(T++)));return m.join("")},S.Utils.utf8ToByteArray=function(y){var v,D;if(typeof TextEncoder<"u")v=new TextEncoder().encode(y);else for(v=[],D=0;D<y.length;++D){var m=y.charCodeAt(D);m<128?v.push(m):m<2048?(v.push(192|m>>6),v.push(128|63&m)):m<65536?(v.push(224|m>>12),v.push(128|63&m>>6),v.push(128|63&m)):(v.push(240|m>>18),v.push(128|63&m>>12),v.push(128|63&m>>6),v.push(128|63&m))}return v},S.Utils.appendBox=function(y,v,D){if(v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,D!==-1)if(D!=null){var m,T=-1;if(typeof D=="number")T=D;else{if(typeof D=="string")m=D;else{if(typeof D!="object"||!D.type)return void y.boxes.push(v);m=D.type}for(var U=0;U<y.boxes.length;U++)if(m===y.boxes[U].type){T=U+1;break}}y.boxes.splice(T,0,v)}else y.boxes.push(v)},g.parseBuffer=S.parseBuffer,g.addBoxProcessor=S.addBoxProcessor,g.createFile=S.createFile,g.createBox=S.createBox,g.createFullBox=S.createFullBox,g.Utils=S.Utils,S.Cursor=function(y){this.offset=y===void 0?0:y};var F=function(y){this._cursor=new S.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};F.prototype.fetch=function(y){var v=this.fetchAll(y,!0);return v.length?v[0]:null},F.prototype.fetchAll=function(y,v){var D=[];return F._sweep.call(this,y,D,v),D},F.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=R.parse(this);if(y.type===void 0)break;this.boxes.push(y)}return this},F._sweep=function(y,v,D){for(var m in this.type&&this.type==y&&v.push(this),this.boxes){if(v.length&&D)return;F._sweep.call(this.boxes[m],y,v,D)}},F.prototype.write=function(){var y,v=0;for(y=0;y<this.boxes.length;y++)v+=this.boxes[y].getLength(!1);var D=new Uint8Array(v);for(this._rawo=new DataView(D.buffer),this.bytes=D,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return D.buffer},F.prototype.append=function(y,v){S.Utils.appendBox(this,y,v)};var R=function(){this._cursor=new S.Cursor};R.parse=function(y){var v=new R;return v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,v._parseBox(),y._cursor.offset=v._raw.byteOffset+v._raw.byteLength,v},R.create=function(y){var v=new R;return v.type=y,v.boxes=[],v},R.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],R.prototype._boxProcessors={},R.prototype._procField=function(y,v,D){this._parsing?this[y]=this._readField(v,D):this._writeField(v,D,this[y])},R.prototype._procFieldArray=function(y,v,D,m){var T;if(this._parsing)for(this[y]=[],T=0;T<v;T++)this[y][T]=this._readField(D,m);else for(T=0;T<this[y].length;T++)this._writeField(D,m,this[y][T])},R.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},R.prototype._procEntries=function(y,v,D){var m;if(this._parsing)for(this[y]=[],m=0;m<v;m++)this[y].push({}),D.call(this,this[y][m]);else for(m=0;m<v;m++)D.call(this,this[y][m])},R.prototype._procSubEntries=function(y,v,D,m){var T;if(this._parsing)for(y[v]=[],T=0;T<D;T++)y[v].push({}),m.call(this,y[v][T]);else for(T=0;T<D;T++)m.call(this,y[v][T])},R.prototype._procEntryField=function(y,v,D,m){this._parsing?y[v]=this._readField(D,m):this._writeField(D,m,y[v])},R.prototype._procSubBoxes=function(y,v){var D;if(this._parsing)for(this[y]=[],D=0;D<v;D++)this[y].push(R.parse(this));else for(D=0;D<v;D++)this._rawo?this[y][D].write():this.size+=this[y][D].getLength()},R.prototype._readField=function(y,v){switch(y){case"uint":return this._readUint(v);case"int":return this._readInt(v);case"template":return this._readTemplate(v);case"string":return v===-1?this._readTerminatedString():this._readString(v);case"data":return this._readData(v);case"utf8":return this._readUTF8String();default:return-1}},R.prototype._readInt=function(y){var v=null,D=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:v=this._raw.getInt8(D);break;case 16:v=this._raw.getInt16(D);break;case 32:v=this._raw.getInt32(D);break;case 64:var m=this._raw.getInt32(D),T=this._raw.getInt32(D+4);v=m*Math.pow(2,32)+T}return this._cursor.offset+=y>>3,v},R.prototype._readUint=function(y){var v,D,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((v=this._raw.getUint16(T))<<8)+(D=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:v=this._raw.getUint32(T),D=this._raw.getUint32(T+4),m=v*Math.pow(2,32)+D}return this._cursor.offset+=y>>3,m},R.prototype._readString=function(y){for(var v="",D=0;D<y;D++){var m=this._readUint(8);v+=String.fromCharCode(m)}return v},R.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},R.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var v=this._readUint(8);if(v===0)break;y+=String.fromCharCode(v)}return y},R.prototype._readData=function(y){var v=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(v>0){var D=new Uint8Array(this._raw.buffer,this._cursor.offset,v);return this._cursor.offset+=v,D}return null},R.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),v=null;return y>0&&(v=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),v&&S.Utils.dataViewToString(v)},R.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},R.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},R.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(R.parse(this))},R.prototype.append=function(y,v){S.Utils.appendBox(this,y,v)},R.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},R.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},R.prototype._writeInt=function(y,v){if(this._rawo){var D=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(D,v);break;case 16:this._rawo.setInt16(D,v);break;case 32:this._rawo.setInt32(D,v);break;case 64:var m=Math.floor(v/Math.pow(2,32)),T=v-m*Math.pow(2,32);this._rawo.setUint32(D,m),this._rawo.setUint32(D+4,T)}this._cursor.offset+=y>>3}else this.size+=y>>3},R.prototype._writeUint=function(y,v){if(this._rawo){var D,m,T=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(T,v);break;case 16:this._rawo.setUint16(T,v);break;case 24:D=(16776960&v)>>8,m=255&v,this._rawo.setUint16(T,D),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,v);break;case 64:m=v-(D=Math.floor(v/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,D),this._rawo.setUint32(T+4,m)}this._cursor.offset+=y>>3}else this.size+=y>>3},R.prototype._writeString=function(y,v){for(var D=0;D<y;D++)this._writeUint(8,v.charCodeAt(D))},R.prototype._writeTerminatedString=function(y){if(y.length!==0){for(var v=0;v<y.length;v++)this._writeUint(8,y.charCodeAt(v));this._writeUint(8,0)}},R.prototype._writeTemplate=function(y,v){var D=Math.floor(v),m=(v-D)*Math.pow(2,y/2);this._writeUint(y/2,D),this._writeUint(y/2,m)},R.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var v=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(v+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},R.prototype._writeUTF8String=function(y){var v=S.Utils.utf8ToByteArray(y);if(this._rawo)for(var D=new DataView(this._rawo.buffer,this._cursor.offset,v.length),m=0;m<v.length;m++)D.setUint8(m,v[m]);else this.size+=v.length},R.prototype._writeField=function(y,v,D){switch(y){case"uint":this._writeUint(v,D);break;case"int":this._writeInt(v,D);break;case"template":this._writeTemplate(v,D);break;case"string":v==-1?this._writeTerminatedString(D):this._writeString(v,D);break;case"data":this._writeData(D);break;case"utf8":this._writeUTF8String(D)}},R.prototype._boxProcessors.avc1=R.prototype._boxProcessors.avc2=R.prototype._boxProcessors.avc3=R.prototype._boxProcessors.avc4=R.prototype._boxProcessors.hvc1=R.prototype._boxProcessors.hev1=R.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},R.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_offset",this.version===1?"int":"uint",32)})},R.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",this.version===1?64:32),this._procEntryField(y,"media_time","int",this.version===1?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},R.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},R.prototype._boxProcessors.free=R.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},R.prototype._boxProcessors.ftyp=R.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},R.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},R.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},R.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},R.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},R.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},R.prototype._boxProcessors.mp4a=R.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},R.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},R.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},R.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},R.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},R.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},R.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},R.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},R.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},R.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(v){this._procEntryField(v,"level","uint",8),this._procEntryField(v,"range_size","uint",24)})})},R.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},R.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_delta","uint",32)})},R.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(v){this._procEntryField(v,"subsample_size","uint",this.version===1?32:16),this._procEntryField(v,"subsample_priority","uint",8),this._procEntryField(v,"discardable","uint",8),this._procEntryField(v,"codec_specific_parameters","uint",32)})})},R.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},R.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},R.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",this.version===1?64:32),this._procEntryField(y,"moof_offset","uint",this.version===1?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},R.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},R.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},R.prototype._boxProcessors["url "]=R.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},R.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},R.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},R.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},R.prototype._boxProcessors.vtte=function(){}},5530:function(b,g,S){b.exports=S(6146).polyfill()},6146:function(b,g,S){b.exports=function(){function F(Tt){return typeof Tt=="function"}var R=Array.isArray?Array.isArray:function(Tt){return Object.prototype.toString.call(Tt)==="[object Array]"},y=0,v=void 0,D=void 0,m=function(Tt,Pt){j[y]=Tt,j[y+1]=Pt,(y+=2)===2&&(D?D(Y):X())},T=typeof window<"u"?window:void 0,U=T||{},N=U.MutationObserver||U.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function C(){var Tt=setTimeout;return function(){return Tt(Y,1)}}var j=new Array(1e3);function Y(){for(var Tt=0;Tt<y;Tt+=2)(0,j[Tt])(j[Tt+1]),j[Tt]=void 0,j[Tt+1]=void 0;y=0}var $,W,ue,x,X=void 0;function de(Tt,Pt){var Ie=this,ne=new this.constructor(Ce);ne[ve]===void 0&&ct(ne);var Fe=Ie._state;if(Fe){var O=arguments[Fe-1];m(function(){return Oe(Fe,ne,O,Ie._result)})}else lt(Ie,ne,Tt,Pt);return ne}function oe(Tt){if(Tt&&typeof Tt=="object"&&Tt.constructor===this)return Tt;var Pt=new this(Ce);return Ze(Pt,Tt),Pt}X=_?function(){return process.nextTick(Y)}:N?(W=0,ue=new N(Y),x=document.createTextNode(""),ue.observe(x,{characterData:!0}),function(){x.data=W=++W%2}):I?(($=new MessageChannel).port1.onmessage=Y,function(){return $.port2.postMessage(0)}):T===void 0?function(){try{var Tt=Function("return this")().require("vertx");return(v=Tt.runOnLoop||Tt.runOnContext)!==void 0?function(){v(Y)}:C()}catch(Pt){return C()}}():C();var ve=Math.random().toString(36).substring(2);function Ce(){}var Xe=void 0;function Ae(Tt,Pt,Ie){Pt.constructor===Tt.constructor&&Ie===de&&Pt.constructor.resolve===oe?function(ne,Fe){Fe._state===1?st(ne,Fe._result):Fe._state===2?Ye(ne,Fe._result):lt(Fe,void 0,function(O){return Ze(ne,O)},function(O){return Ye(ne,O)})}(Tt,Pt):Ie===void 0?st(Tt,Pt):F(Ie)?function(ne,Fe,O){m(function(M){var q=!1,K=function(pe,ce,He,_t){try{pe.call(ce,He,_t)}catch(ot){return ot}}(O,Fe,function(pe){q||(q=!0,Fe!==pe?Ze(M,pe):st(M,pe))},function(pe){q||(q=!0,Ye(M,pe))},M._label);!q&&K&&(q=!0,Ye(M,K))},ne)}(Tt,Pt,Ie):st(Tt,Pt)}function Ze(Tt,Pt){if(Tt===Pt)Ye(Tt,new TypeError("You cannot resolve a promise with itself"));else if(Fe=typeof(ne=Pt),ne===null||Fe!=="object"&&Fe!=="function")st(Tt,Pt);else{var Ie=void 0;try{Ie=Pt.then}catch(O){return void Ye(Tt,O)}Ae(Tt,Pt,Ie)}var ne,Fe}function it(Tt){Tt._onerror&&Tt._onerror(Tt._result),At(Tt)}function st(Tt,Pt){Tt._state===Xe&&(Tt._result=Pt,Tt._state=1,Tt._subscribers.length!==0&&m(At,Tt))}function Ye(Tt,Pt){Tt._state===Xe&&(Tt._state=2,Tt._result=Pt,m(it,Tt))}function lt(Tt,Pt,Ie,ne){var Fe=Tt._subscribers,O=Fe.length;Tt._onerror=null,Fe[O]=Pt,Fe[O+1]=Ie,Fe[O+2]=ne,O===0&&Tt._state&&m(At,Tt)}function At(Tt){var Pt=Tt._subscribers,Ie=Tt._state;if(Pt.length!==0){for(var ne=void 0,Fe=void 0,O=Tt._result,M=0;M<Pt.length;M+=3)ne=Pt[M],Fe=Pt[M+Ie],ne?Oe(Ie,ne,Fe,O):Fe(O);Tt._subscribers.length=0}}function Oe(Tt,Pt,Ie,ne){var Fe=F(Ie),O=void 0,M=void 0,q=!0;if(Fe){try{O=Ie(ne)}catch(K){q=!1,M=K}if(Pt===O)return void Ye(Pt,new TypeError("A promises callback cannot return that same promise."))}else O=ne;Pt._state!==Xe||(Fe&&q?Ze(Pt,O):q===!1?Ye(Pt,M):Tt===1?st(Pt,O):Tt===2&&Ye(Pt,O))}var Qe=0;function ct(Tt){Tt[ve]=Qe++,Tt._state=void 0,Tt._result=void 0,Tt._subscribers=[]}var Qt=function(){function Tt(Pt,Ie){this._instanceConstructor=Pt,this.promise=new Pt(Ce),this.promise[ve]||ct(this.promise),R(Ie)?(this.length=Ie.length,this._remaining=Ie.length,this._result=new Array(this.length),this.length===0?st(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ie),this._remaining===0&&st(this.promise,this._result))):Ye(this.promise,new Error("Array Methods must be provided an Array"))}return Tt.prototype._enumerate=function(Pt){for(var Ie=0;this._state===Xe&&Ie<Pt.length;Ie++)this._eachEntry(Pt[Ie],Ie)},Tt.prototype._eachEntry=function(Pt,Ie){var ne=this._instanceConstructor,Fe=ne.resolve;if(Fe===oe){var O=void 0,M=void 0,q=!1;try{O=Pt.then}catch(pe){q=!0,M=pe}if(O===de&&Pt._state!==Xe)this._settledAt(Pt._state,Ie,Pt._result);else if(typeof O!="function")this._remaining--,this._result[Ie]=Pt;else if(ne===Kt){var K=new ne(Ce);q?Ye(K,M):Ae(K,Pt,O),this._willSettleAt(K,Ie)}else this._willSettleAt(new ne(function(pe){return pe(Pt)}),Ie)}else this._willSettleAt(Fe(Pt),Ie)},Tt.prototype._settledAt=function(Pt,Ie,ne){var Fe=this.promise;Fe._state===Xe&&(this._remaining--,Pt===2?Ye(Fe,ne):this._result[Ie]=ne),this._remaining===0&&st(Fe,this._result)},Tt.prototype._willSettleAt=function(Pt,Ie){var ne=this;lt(Pt,void 0,function(Fe){return ne._settledAt(1,Ie,Fe)},function(Fe){return ne._settledAt(2,Ie,Fe)})},Tt}(),Kt=function(){function Tt(Pt){this[ve]=Qe++,this._result=this._state=void 0,this._subscribers=[],Ce!==Pt&&(typeof Pt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Tt?function(Ie,ne){try{ne(function(Fe){Ze(Ie,Fe)},function(Fe){Ye(Ie,Fe)})}catch(Fe){Ye(Ie,Fe)}}(this,Pt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Tt.prototype.catch=function(Pt){return this.then(null,Pt)},Tt.prototype.finally=function(Pt){var Ie=this,ne=Ie.constructor;return F(Pt)?Ie.then(function(Fe){return ne.resolve(Pt()).then(function(){return Fe})},function(Fe){return ne.resolve(Pt()).then(function(){throw Fe})}):Ie.then(Pt,Pt)},Tt}();return Kt.prototype.then=de,Kt.all=function(Tt){return new Qt(this,Tt).promise},Kt.race=function(Tt){var Pt=this;return R(Tt)?new Pt(function(Ie,ne){for(var Fe=Tt.length,O=0;O<Fe;O++)Pt.resolve(Tt[O]).then(Ie,ne)}):new Pt(function(Ie,ne){return ne(new TypeError("You must pass an array to race."))})},Kt.resolve=oe,Kt.reject=function(Tt){var Pt=new this(Ce);return Ye(Pt,Tt),Pt},Kt._setScheduler=function(Tt){D=Tt},Kt._setAsap=function(Tt){m=Tt},Kt._asap=m,Kt.polyfill=function(){var Tt=void 0;if(S.g!==void 0)Tt=S.g;else if(typeof self<"u")Tt=self;else try{Tt=Function("return this")()}catch(ne){throw new Error("polyfill failed because global object is unavailable in this environment")}var Pt=Tt.Promise;if(Pt){var Ie=null;try{Ie=Object.prototype.toString.call(Pt.resolve())}catch(ne){}if(Ie==="[object Promise]"&&!Pt.cast)return}Tt.Promise=Kt},Kt.Promise=Kt,Kt}()},1159:function(b){var g,S=typeof Reflect=="object"?Reflect:null,F=S&&typeof S.apply=="function"?S.apply:function(Y,$,W){return Function.prototype.apply.call(Y,$,W)};g=S&&typeof S.ownKeys=="function"?S.ownKeys:Object.getOwnPropertySymbols?function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:function(Y){return Object.getOwnPropertyNames(Y)};var R=Number.isNaN||function(Y){return Y!=Y};function y(){y.init.call(this)}b.exports=y,b.exports.once=function(Y,$){return new Promise(function(W,ue){function x(de){Y.removeListener($,X),ue(de)}function X(){typeof Y.removeListener=="function"&&Y.removeListener("error",x),W([].slice.call(arguments))}j(Y,$,X,{once:!0}),$!=="error"&&function(de,oe,ve){typeof de.on=="function"&&j(de,"error",oe,{once:!0})}(Y,x)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var v=10;function D(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function m(Y){return Y._maxListeners===void 0?y.defaultMaxListeners:Y._maxListeners}function T(Y,$,W,ue){var x,X,de,oe;if(D(W),(X=Y._events)===void 0?(X=Y._events=Object.create(null),Y._eventsCount=0):(X.newListener!==void 0&&(Y.emit("newListener",$,W.listener?W.listener:W),X=Y._events),de=X[$]),de===void 0)de=X[$]=W,++Y._eventsCount;else if(typeof de=="function"?de=X[$]=ue?[W,de]:[de,W]:ue?de.unshift(W):de.push(W),(x=m(Y))>0&&de.length>x&&!de.warned){de.warned=!0;var ve=new Error("Possible EventEmitter memory leak detected. "+de.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");ve.name="MaxListenersExceededWarning",ve.emitter=Y,ve.type=$,ve.count=de.length,oe=ve,console&&console.warn&&console.warn(oe)}return Y}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(Y,$,W){var ue={fired:!1,wrapFn:void 0,target:Y,type:$,listener:W},x=U.bind(ue);return x.listener=W,ue.wrapFn=x,x}function _(Y,$,W){var ue=Y._events;if(ue===void 0)return[];var x=ue[$];return x===void 0?[]:typeof x=="function"?W?[x.listener||x]:[x]:W?function(X){for(var de=new Array(X.length),oe=0;oe<de.length;++oe)de[oe]=X[oe].listener||X[oe];return de}(x):C(x,x.length)}function I(Y){var $=this._events;if($!==void 0){var W=$[Y];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}function C(Y,$){for(var W=new Array($),ue=0;ue<$;++ue)W[ue]=Y[ue];return W}function j(Y,$,W,ue){if(typeof Y.on=="function")ue.once?Y.once($,W):Y.on($,W);else{if(typeof Y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener($,function x(X){ue.once&&Y.removeEventListener($,x),W(X)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(Y){if(typeof Y!="number"||Y<0||R(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");v=Y}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||R(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(Y){for(var $=[],W=1;W<arguments.length;W++)$.push(arguments[W]);var ue=Y==="error",x=this._events;if(x!==void 0)ue=ue&&x.error===void 0;else if(!ue)return!1;if(ue){var X;if($.length>0&&(X=$[0]),X instanceof Error)throw X;var de=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw de.context=X,de}var oe=x[Y];if(oe===void 0)return!1;if(typeof oe=="function")F(oe,this,$);else{var ve=oe.length,Ce=C(oe,ve);for(W=0;W<ve;++W)F(Ce[W],this,$)}return!0},y.prototype.addListener=function(Y,$){return T(this,Y,$,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(Y,$){return T(this,Y,$,!0)},y.prototype.once=function(Y,$){return D($),this.on(Y,N(this,Y,$)),this},y.prototype.prependOnceListener=function(Y,$){return D($),this.prependListener(Y,N(this,Y,$)),this},y.prototype.removeListener=function(Y,$){var W,ue,x,X,de;if(D($),(ue=this._events)===void 0)return this;if((W=ue[Y])===void 0)return this;if(W===$||W.listener===$)--this._eventsCount==0?this._events=Object.create(null):(delete ue[Y],ue.removeListener&&this.emit("removeListener",Y,W.listener||$));else if(typeof W!="function"){for(x=-1,X=W.length-1;X>=0;X--)if(W[X]===$||W[X].listener===$){de=W[X].listener,x=X;break}if(x<0)return this;x===0?W.shift():function(oe,ve){for(;ve+1<oe.length;ve++)oe[ve]=oe[ve+1];oe.pop()}(W,x),W.length===1&&(ue[Y]=W[0]),ue.removeListener!==void 0&&this.emit("removeListener",Y,de||$)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(Y){var $,W,ue;if((W=this._events)===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[Y]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete W[Y]),this;if(arguments.length===0){var x,X=Object.keys(W);for(ue=0;ue<X.length;++ue)(x=X[ue])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof($=W[Y])=="function")this.removeListener(Y,$);else if($!==void 0)for(ue=$.length-1;ue>=0;ue--)this.removeListener(Y,$[ue]);return this},y.prototype.listeners=function(Y){return _(this,Y,!0)},y.prototype.rawListeners=function(Y){return _(this,Y,!1)},y.listenerCount=function(Y,$){return typeof Y.listenerCount=="function"?Y.listenerCount($):I.call(Y,$)},y.prototype.listenerCount=I,y.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(b){var g=Array.isArray,S=Object.keys,F=Object.prototype.hasOwnProperty;b.exports=function R(y,v){if(y===v)return!0;if(y&&v&&typeof y=="object"&&typeof v=="object"){var D,m,T,U=g(y),N=g(v);if(U&&N){if((m=y.length)!=v.length)return!1;for(D=m;D--!=0;)if(!R(y[D],v[D]))return!1;return!0}if(U!=N)return!1;var _=y instanceof Date,I=v instanceof Date;if(_!=I)return!1;if(_&&I)return y.getTime()==v.getTime();var C=y instanceof RegExp,j=v instanceof RegExp;if(C!=j)return!1;if(C&&j)return y.toString()==v.toString();var Y=S(y);if((m=Y.length)!==S(v).length)return!1;for(D=m;D--!=0;)if(!F.call(v,Y[D]))return!1;for(D=m;D--!=0;)if(!R(y[T=Y[D]],v[T]))return!1;return!0}return y!=y&&v!=v}},3362:function(b,g,S){(function(F,R,y,v,D){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[v.byName.ruby.qname]:null,K=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),pe=M.contents.length-1;pe>=0;pe--)!K||"styleAttrs"in M.contents[pe]&&v.byName.ruby.qname in M.contents[pe].styleAttrs?m(M.contents[pe]):delete M.contents[pe]}function T(M,q,K,pe){var ce=pe&&pe.timeContainer==="seq",He=0;pe&&(He=ce&&K?K.end:pe.begin),q.begin=q.explicit_begin?q.explicit_begin+He:He;var _t=q.begin,ot=null;if("sets"in q)for(var rt=0;rt<q.sets.length;rt++)T(M,q.sets[rt],ot,q),_t=q.timeContainer==="seq"?q.sets[rt].end:Math.max(_t,q.sets[rt].end),ot=q.sets[rt];if("contents"in q){if("contents"in q)for(var et=0;et<q.contents.length;et++)T(M,q.contents[et],ot,q),_t=q.timeContainer==="seq"?q.contents[et].end:Math.max(_t,q.contents[et].end),ot=q.contents[et]}else _t=ce?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,He+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=He+q.explicit_end:q.end=_t,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function U(M){this.node=M}function N(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new Y}function I(){this.styles={},this.initials={}}function C(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function j(){this.styleAttrs=null}function Y(){this.regions={}}function $(M,q){W.call(this,"image"),this.src=M,this.type=q}function W(M){this.kind=M}function ue(M){this.id=M}function x(M){this.regionID=M}function X(M){this.styleAttrs=M}function de(M){this.sets=M}function oe(M){this.contents=M}function ve(M,q,K){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=K}function Ce(){W.call(this,"body")}function Xe(){W.call(this,"div")}function Ae(){W.call(this,"p")}function Ze(){W.call(this,"span")}function it(){W.call(this,"span")}function st(){W.call(this,"br")}function Ye(){}function lt(){}function At(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function Oe(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function Qe(M,q){var K={};if(M!==null)for(var pe in M.attributes){var ce=M.attributes[pe].uri+" "+M.attributes[pe].local,He=v.byQName[ce];if(He!==void 0){var _t=He.parse(M.attributes[pe].value);_t!==null?(K[ce]=_t,He===v.byName.zIndex&&Ie(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ne(q,"Cannot parse styling attribute "+ce+" --> "+M.attributes[pe].value)}}return K}function ct(M,q,K){for(var pe in M.attributes)if(M.attributes[pe].uri===q&&M.attributes[pe].local===K)return M.attributes[pe].value;return null}function Qt(M,q,K){var pe,ce=null;return(pe=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?q!==null&&(ce=parseFloat(pe[1])/q):(pe=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?M!==null&&(ce=parseFloat(pe[1])/M):(pe=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?ce=parseFloat(pe[1])/1e3:(pe=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?ce=parseFloat(pe[1]):(pe=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?ce=3600*parseFloat(pe[1]):(pe=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?ce=60*parseFloat(pe[1]):(pe=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?ce=3600*parseInt(pe[1])+60*parseInt(pe[2])+parseFloat(pe[3]):(pe=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&q!==null&&(ce=3600*parseInt(pe[1])+60*parseInt(pe[2])+parseInt(pe[3])+(pe[4]===null?0:parseInt(pe[4])/q)),ce}function Kt(M,q,K){for(;q.styleRefs.length>0;){var pe=q.styleRefs.pop();pe in M.styles?(Kt(M,M.styles[pe],K),Pt(M.styles[pe].styleAttrs,q.styleAttrs)):ne(K,"Non-existant style id referenced")}}function Tt(M,q,K,pe){for(var ce=q.length-1;ce>=0;ce--){var He=q[ce];He in M.styles?Pt(M.styles[He].styleAttrs,K):ne(pe,"Non-existant style id referenced")}}function Pt(M,q){for(var K in M)M.hasOwnProperty(K)&&(K in q||(q[K]=M[K]))}function Ie(M,q){if(M&&M.warn&&M.warn(q))throw q}function ne(M,q){if(M&&M.error&&M.error(q))throw q}function Fe(M,q){throw M&&M.fatal&&M.fatal(q),q}function O(M,q){for(var K,pe=0,ce=M.length-1;pe<=ce;){var He=M[K=Math.floor((pe+ce)/2)];if(He<q)pe=K+1;else{if(!(He>q))return{found:!0,index:K};ce=K-1}}return{found:!1,index:pe}}F.fromXML=function(M,q,K){var pe=R.parser(!0,{xmlns:!0}),ce=[],He=[],_t=[],ot=0,rt=null;pe.onclosetag=function(Ct){if(ce[0]instanceof Ye)rt.head!==null&&rt.head.styling!==null&&Tt(rt.head.styling,ce[0].styleRefs,ce[0].styleAttrs,q),delete ce[0].styleRefs;else if(ce[0]instanceof I)for(var hn in ce[0].styles)ce[0].styles.hasOwnProperty(hn)&&Kt(ce[0],ce[0].styles[hn],q);else if(ce[0]instanceof Ae||ce[0]instanceof Ze){if(ce[0].contents.length>1){var Xt,nn=[ce[0].contents[0]];for(Xt=1;Xt<ce[0].contents.length;Xt++)ce[0].contents[Xt]instanceof it&&nn[nn.length-1]instanceof it?nn[nn.length-1].text+=ce[0].contents[Xt].text:nn.push(ce[0].contents[Xt]);ce[0].contents=nn}ce[0]instanceof Ze&&ce[0].contents.length===1&&ce[0].contents[0]instanceof it&&(ce[0].text=ce[0].contents[0].text,delete ce[0].contents)}else ce[0]instanceof U&&(ce[0].node.uri===y.ns_tt&&ce[0].node.local==="metadata"?ot--:ot>0&&K&&"onCloseTag"in K&&K.onCloseTag());_t.shift(),He.shift(),ce.shift()},pe.ontext=function(Ct){if(ce[0]!==void 0)if(ce[0]instanceof Ze||ce[0]instanceof Ae){if(ce[0]instanceof Ze){var hn=ce[0].styleAttrs[v.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var Xt=new it;Xt.initFromText(rt,ce[0],Ct,He[0],_t[0],q),ce[0].contents.push(Xt)}else ce[0]instanceof U&&ot>0&&K&&"onText"in K&&K.onText(Ct)},pe.onopentag=function(Ct){var hn=Ct.attributes["xml:space"];hn?_t.unshift(hn.value):_t.length===0?_t.unshift("default"):_t.unshift(_t[0]);var Xt=Ct.attributes["xml:lang"];if(Xt?He.unshift(Xt.value):He.length===0?He.unshift(""):He.unshift(He[0]),Ct.uri===y.ns_tt)if(Ct.local==="tt")rt!==null&&Fe(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(rt=new N).initFromNode(Ct,He[0],q),ce.unshift(rt);else if(Ct.local==="head")ce[0]instanceof N||Fe(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),ce.unshift(rt.head);else if(Ct.local==="styling")ce[0]instanceof _||Fe(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),ce.unshift(rt.head.styling);else if(Ct.local==="style"){var nn;ce[0]instanceof I?((nn=new C).initFromNode(Ct,q),nn.id?rt.head.styling.styles[nn.id]=nn:ne(q,"<style> element missing @id attribute"),ce.unshift(nn)):ce[0]instanceof Ye?((nn=new C).initFromNode(Ct,q),Pt(nn.styleAttrs,ce[0].styleAttrs),ce.unshift(nn)):Fe(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Ct.local==="initial"){var Ot;if(ce[0]instanceof I){for(var Un in(Ot=new j).initFromNode(Ct,q),Ot.styleAttrs)Ot.styleAttrs.hasOwnProperty(Un)&&(rt.head.styling.initials[Un]=Ot.styleAttrs[Un]);ce.unshift(Ot)}else Fe(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Ct.local==="layout")ce[0]instanceof _||Fe(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),ce.unshift(rt.head.layout);else if(Ct.local==="region"){ce[0]instanceof Y||Fe(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new Ye;gr.initFromNode(rt,Ct,He[0],q),!gr.id||gr.id in rt.head.layout.regions?ne(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):rt.head.layout.regions[gr.id]=gr,ce.unshift(gr)}else if(Ct.local==="body"){ce[0]instanceof N||Fe(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),rt.body!==null&&Fe(q,"Second <body> element at "+this.line+","+this.column+")");var Pr=new Ce;Pr.initFromNode(rt,Ct,He[0],q),rt.body=Pr,ce.unshift(Pr)}else if(Ct.local==="div"){ce[0]instanceof Xe||ce[0]instanceof Ce||Fe(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new Xe;dr.initFromNode(rt,ce[0],Ct,He[0],q);var ei=dr.styleAttrs[v.byName.backgroundImage.qname];ei&&(dr.contents.push(new $(ei)),delete dr.styleAttrs[v.byName.backgroundImage.qname]),ce[0].contents.push(dr),ce.unshift(dr)}else if(Ct.local==="image"){ce[0]instanceof Xe||Fe(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Ji=new $;Ji.initFromNode(rt,ce[0],Ct,He[0],q),ce[0].contents.push(Ji),ce.unshift(Ji)}else if(Ct.local==="p"){ce[0]instanceof Xe||Fe(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Or=new Ae;Or.initFromNode(rt,ce[0],Ct,He[0],q),ce[0].contents.push(Or),ce.unshift(Or)}else if(Ct.local==="span"){ce[0]instanceof Ze||ce[0]instanceof Ae||Fe(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var eo=new Ze;eo.initFromNode(rt,ce[0],Ct,He[0],_t[0],q),ce[0].contents.push(eo),ce.unshift(eo)}else if(Ct.local==="br"){ce[0]instanceof Ze||ce[0]instanceof Ae||Fe(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var _i=new st;_i.initFromNode(rt,ce[0],Ct,He[0],q),ce[0].contents.push(_i),ce.unshift(_i)}else if(Ct.local==="set"){ce[0]instanceof Ze||ce[0]instanceof Ae||ce[0]instanceof Xe||ce[0]instanceof Ce||ce[0]instanceof Ye||ce[0]instanceof st||Fe(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Mi=new lt;Mi.initFromNode(rt,ce[0],Ct,q),ce[0].sets.push(Mi),ce.unshift(Mi)}else ce.unshift(new U(Ct));else ce.unshift(new U(Ct));if(ce[0]instanceof U){if(Ct.uri===y.ns_tt&&Ct.local==="metadata")ot++;else if(ot>0&&K&&"onOpenTag"in K){var zi=[];for(var to in Ct.attributes)zi[Ct.attributes[to].uri+" "+Ct.attributes[to].local]={uri:Ct.attributes[to].uri,local:Ct.attributes[to].local,value:Ct.attributes[to].value};K.onOpenTag(Ct.uri,Ct.local,zi)}}},pe.write(M).close(),delete rt.head.styling.styles;var et=!1;for(var ft in rt.head.layout.regions)if(rt.head.layout.regions.hasOwnProperty(ft)){et=!0;break}if(!et){var vt=Ye.prototype.createDefaultRegion(rt.lang);rt.head.layout.regions[vt.id]=vt}for(var Et in rt.head.layout.regions)rt.head.layout.regions.hasOwnProperty(Et)&&T(rt,rt.head.layout.regions[Et],null,null);return rt.body&&T(rt,rt.body,null,null),rt.body&&m(rt.body),rt},N.prototype.initFromNode=function(M,q,K){var pe=function(ot,rt){var et=ct(ot,y.ns_ttp,"cellResolution"),ft=15,vt=32;if(et!==null){var Et=/(\d+) (\d+)/.exec(et);Et!==null?(vt=parseInt(Et[1]),ft=parseInt(Et[2])):Ie(rt,"Malformed cellResolution value (using initial value instead)")}return{w:vt,h:ft}}(M,K);this.cellLength={h:new D.ComputedLength(0,1/pe.h),w:new D.ComputedLength(1/pe.w,0)};var ce=function(ot,rt){var et,ft=ct(ot,y.ns_ttp,"frameRate"),vt=30;ft!==null&&((et=/(\d+)/.exec(ft))!==null?vt=parseInt(et[1]):Ie(rt,"Malformed frame rate attribute (using initial value instead)"));var Et=ct(ot,y.ns_ttp,"frameRateMultiplier"),Ct=1;Et!==null&&((et=/(\d+) (\d+)/.exec(Et))!==null?Ct=parseInt(et[1])/parseInt(et[2]):Ie(rt,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=Ct*vt,Xt=1,nn=ct(ot,y.ns_ttp,"tickRate");return nn===null?ft!==null&&(Xt=hn):(et=/(\d+)/.exec(nn))!==null?Xt=parseInt(et[1]):Ie(rt,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:Xt}}(M,K);this.effectiveFrameRate=ce.effectiveFrameRate,this.tickRate=ce.tickRate,this.aspectRatio=function(ot,rt){var et=ct(ot,y.ns_ittp,"aspectRatio");et===null&&(et=ct(ot,y.ns_ttp,"displayAspectRatio"));var ft=null;if(et!==null){var vt=/(\d+)\s+(\d+)/.exec(et);if(vt!==null){var Et=parseInt(vt[1]),Ct=parseInt(vt[2]);Et!==0&&Ct!==0?ft=Et/Ct:ne(rt,"Illegal aspectRatio values (ignoring)")}else ne(rt,"Malformed aspectRatio attribute (ignoring)")}return ft}(M,K);var He=ct(M,y.ns_ttp,"timeBase");He!==null&&He!=="media"&&Fe(K,"Unsupported time base");var _t=function(ot,rt){var et=ct(ot,y.ns_tts,"extent");if(et===null)return null;var ft=et.split(" ");if(ft.length!==2)return Ie(rt,"Malformed extent (ignoring)"),null;var vt=D.parseLength(ft[0]),Et=D.parseLength(ft[1]);return Et&&vt?{h:Et,w:vt}:(Ie(rt,"Malformed extent values (ignoring)"),null)}(M,K);_t===null?this.pxLength={h:null,w:null}:(_t.h.unit==="px"&&_t.w.unit==="px"||Fe(K,"Extent on TT must be in px or absent"),this.pxLength={h:new D.ComputedLength(0,1/_t.h.value),w:new D.ComputedLength(1/_t.w.value,0)}),this.dimensions={h:new D.ComputedLength(0,1),w:new D.ComputedLength(1,0)},this.lang=q},N.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=O(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var K=O(this.events,M.end);K.found||this.events.splice(K.index,0,M.end)}}},N.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},N.prototype.getMediaTimeEvents=function(){return this.events},C.prototype.initFromNode=function(M,q){this.id=At(M),this.styleAttrs=Qe(M,q),this.styleRefs=Oe(M)},j.prototype.initFromNode=function(M,q){for(var K in this.styleAttrs={},M.attributes)if(M.attributes[K].uri===y.ns_itts||M.attributes[K].uri===y.ns_ebutts||M.attributes[K].uri===y.ns_tts){var pe=M.attributes[K].uri+" "+M.attributes[K].local;this.styleAttrs[pe]=M.attributes[K].value}},$.prototype.initFromNode=function(M,q,K,pe,ce){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||ne(ce,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||ne(ce,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,M,q,K,ce),ve.prototype.initFromNode.call(this,M,q,K,ce),de.prototype.initFromNode.call(this,M,q,K,ce),x.prototype.initFromNode.call(this,M,q,K,ce),this.lang=pe},ue.prototype.initFromNode=function(M,q,K,pe){this.id=At(K)},x.prototype.initFromNode=function(M,q,K,pe){this.regionID=function(ce){return ce&&"region"in ce.attributes?ce.attributes.region.value:""}(K)},X.prototype.initFromNode=function(M,q,K,pe){this.styleAttrs=Qe(K,pe),M.head!==null&&M.head.styling!==null&&Tt(M.head.styling,Oe(K),this.styleAttrs,pe)},de.prototype.initFromNode=function(M,q,K,pe){this.sets=[]},oe.prototype.initFromNode=function(M,q,K,pe){this.contents=[]},ve.prototype.initFromNode=function(M,q,K,pe){var ce=function(He,_t,ot,rt){var et=null;ot&&"begin"in ot.attributes&&(et=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.begin.value))===null&&Ie(rt,"Malformed begin value "+ot.attributes.begin.value+" (using 0)");var ft=null;ot&&"dur"in ot.attributes&&(ft=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.dur.value))===null&&Ie(rt,"Malformed dur value "+ot.attributes.dur.value+" (ignoring)");var vt=null;return ot&&"end"in ot.attributes&&(vt=Qt(He.tickRate,He.effectiveFrameRate,ot.attributes.end.value))===null&&Ie(rt,"Malformed end value (ignoring)"),{explicit_begin:et,explicit_end:vt,explicit_dur:ft}}(M,0,K,pe);this.explicit_begin=ce.explicit_begin,this.explicit_end=ce.explicit_end,this.explicit_dur=ce.explicit_dur,this.timeContainer=function(He,_t){var ot=He&&"timeContainer"in He.attributes?He.attributes.timeContainer.value:null;return ot&&ot!=="par"?ot==="seq"?"seq":(ne(_t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,pe)},Ce.prototype.initFromNode=function(M,q,K,pe){X.prototype.initFromNode.call(this,M,null,q,pe),ve.prototype.initFromNode.call(this,M,null,q,pe),de.prototype.initFromNode.call(this,M,null,q,pe),x.prototype.initFromNode.call(this,M,null,q,pe),oe.prototype.initFromNode.call(this,M,null,q,pe),this.lang=K},Xe.prototype.initFromNode=function(M,q,K,pe,ce){X.prototype.initFromNode.call(this,M,q,K,ce),ve.prototype.initFromNode.call(this,M,q,K,ce),de.prototype.initFromNode.call(this,M,q,K,ce),x.prototype.initFromNode.call(this,M,q,K,ce),oe.prototype.initFromNode.call(this,M,q,K,ce),this.lang=pe},Ae.prototype.initFromNode=function(M,q,K,pe,ce){X.prototype.initFromNode.call(this,M,q,K,ce),ve.prototype.initFromNode.call(this,M,q,K,ce),de.prototype.initFromNode.call(this,M,q,K,ce),x.prototype.initFromNode.call(this,M,q,K,ce),oe.prototype.initFromNode.call(this,M,q,K,ce),this.lang=pe},Ze.prototype.initFromNode=function(M,q,K,pe,ce,He){X.prototype.initFromNode.call(this,M,q,K,He),ve.prototype.initFromNode.call(this,M,q,K,He),de.prototype.initFromNode.call(this,M,q,K,He),x.prototype.initFromNode.call(this,M,q,K,He),oe.prototype.initFromNode.call(this,M,q,K,He),this.space=ce,this.lang=pe},it.prototype.initFromText=function(M,q,K,pe,ce,He){ve.prototype.initFromNode.call(this,M,q,null,He),this.text=K,this.space=ce,this.lang=pe},st.prototype.initFromNode=function(M,q,K,pe,ce){x.prototype.initFromNode.call(this,M,q,K,ce),ve.prototype.initFromNode.call(this,M,q,K,ce),this.lang=pe},Ye.prototype.createDefaultRegion=function(M){var q=new Ye;return ue.call(q,""),X.call(q,{}),de.call(q,[]),ve.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},Ye.prototype.initFromNode=function(M,q,K,pe){ue.prototype.initFromNode.call(this,M,null,q,pe),ve.prototype.initFromNode.call(this,M,null,q,pe),de.prototype.initFromNode.call(this,M,null,q,pe),this.styleAttrs=Qe(q,pe),this.styleRefs=Oe(q),this.lang=K},lt.prototype.initFromNode=function(M,q,K,pe){ve.prototype.initFromNode.call(this,M,q,K,pe);var ce=Qe(K,pe);for(var He in this.qname=null,this.value=null,ce)if(ce.hasOwnProperty(He)){if(this.qname){ne(pe,"More than one style specified on set");break}this.qname=He,this.value=ce[He]}}})(g,typeof sax>"u"?S(5378):sax,typeof imscNames>"u"?S(210):imscNames,typeof imscStyles>"u"?S(6811):imscStyles,typeof imscUtils>"u"?S(5926):imscUtils)},506:function(b,g,S){var F=/firefox/i.test(navigator.userAgent);(function(R,y,v){function D(oe,ve,Ce,Xe){var Ae;if(Ce.kind==="region")(Ae=document.createElement("div")).style.position="absolute";else if(Ce.kind==="body")Ae=document.createElement("div");else if(Ce.kind==="div")Ae=document.createElement("div");else if(Ce.kind==="image"){if(Ae=document.createElement("img"),oe.imgResolver!==null&&Ce.src!==null){var Ze=oe.imgResolver(Ce.src,Ae);Ze&&(Ae.src=Ze),Ae.height=oe.regionH,Ae.width=oe.regionW}}else if(Ce.kind==="p")Ae=document.createElement("p");else if(Ce.kind==="span")if(Ce.styleAttrs[v.byName.ruby.qname]==="container")Ae=document.createElement("ruby"),oe.ruby=!0;else if(Ce.styleAttrs[v.byName.ruby.qname]==="base")Ae=document.createElement("span");else if(Ce.styleAttrs[v.byName.ruby.qname]==="text")Ae=document.createElement("rt");else if(Ce.styleAttrs[v.byName.ruby.qname]==="baseContainer")Ae=document.createElement("rbc");else if(Ce.styleAttrs[v.byName.ruby.qname]==="textContainer")Ae=document.createElement("rtc");else{if(Ce.styleAttrs[v.byName.ruby.qname]==="delimiter")return;Ae=document.createElement("span")}else Ce.kind==="br"&&(Ae=document.createElement("br"));if(Ae){if(Ce.lang&&(Ce.kind!=="region"&&Ce.lang===Xe.lang||(Ae.lang=Ce.lang)),ve.appendChild(Ae),Ae.style.margin="0",Ce.kind==="region"){var it=Ce.styleAttrs[v.byName.writingMode.qname];it==="lrtb"||it==="lr"?(oe.ipd="lr",oe.bpd="tb"):it==="rltb"||it==="rl"?(oe.ipd="rl",oe.bpd="tb"):it==="tblr"?(oe.ipd="tb",oe.bpd="lr"):it!=="tbrl"&&it!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(Ce.kind==="p"&&oe.bpd==="tb"){var st=Ce.styleAttrs[v.byName.direction.qname];oe.ipd=st==="ltr"?"lr":"rl"}for(var Ye=0;Ye<j.length;Ye++){var lt=j[Ye],At=Ce.styleAttrs[lt.qname];At!==void 0&&lt.map!==null&&lt.map(oe,Ae,Ce,At)}var Oe=Ae,Qe=Ce.styleAttrs[v.byName.linePadding.qname];if(Qe&&!Qe.isZero()){var ct=Qe.toUsedLength(oe.w,oe.h);if(ct>0){var Qt=Math.ceil(ct)+"px";oe.bpd==="tb"?(Oe.style.paddingLeft=Qt,Oe.style.paddingRight=Qt):(Oe.style.paddingTop=Qt,Oe.style.paddingBottom=Qt),oe.lp=Qe}}var Kt=Ce.styleAttrs[v.byName.multiRowAlign.qname];if(Kt&&Kt!=="auto"){var Tt=document.createElement("span");Tt.style.display="inline-block",Tt.style.textAlign=Kt,Ae.appendChild(Tt),Oe=Tt,oe.mra=Kt}var Pt=Ce.styleAttrs[v.byName.rubyReserve.qname];if(Pt&&Pt[0]!=="none"&&(oe.rubyReserve=Pt),Ce.styleAttrs[v.byName.fillLineGap.qname]&&(oe.flg=!0),Ce.kind==="span"&&Ce.text){var Ie=Ce.styleAttrs[v.byName.textEmphasis.qname];if(Ie&&Ie.style!=="none"&&(oe.textEmphasis=!0),v.byName.textCombine.qname in Ce.styleAttrs&&Ce.styleAttrs[v.byName.textCombine.qname]==="all")Ae.textContent=Ce.text,Ae._isd_element=Ce,Ie&&I(oe,Ae,0,Ie);else for(var ne="",Fe=0;Fe<Ce.text.length;Fe++){ne+=Ce.text.charAt(Fe);var O=Ce.text.charCodeAt(Fe);if(O<55296||O>56319||Fe===Ce.text.length-1){var M=document.createElement("span");M.textContent=ne,Ie&&I(oe,M,0,Ie),Ae.appendChild(M),ne="",M._isd_element=Ce}}}if("contents"in Ce)for(var q=0;q<Ce.contents.length;q++)D(oe,Oe,Ce.contents[q],Ce);var K=[];if(Ce.kind==="p"&&(_(oe,Oe,K,null),oe.rubyReserve&&(function(ot,rt){for(var et=0;et<ot.length;et++){var ft,vt,Et=document.createElement("ruby"),Ct=document.createElement("span");Ct.textContent="",Et.appendChild(Ct);var hn,Xt=rt.rubyReserve[1].toUsedLength(rt.w,rt.h)+"px";rt.rubyReserve[0]==="both"||rt.rubyReserve[0]==="outside"&&ot.length==1?((ft=document.createElement("rtc")).style[ue]=W?"after":"under",ft.textContent="",ft.style.fontSize=Xt,(vt=document.createElement("rtc")).style[ue]=W?"before":"over",vt.textContent="",vt.style.fontSize=Xt,Et.appendChild(ft),Et.appendChild(vt)):((ft=document.createElement("rtc")).textContent="",ft.style.fontSize=Xt,hn=rt.rubyReserve[0]==="after"||rt.rubyReserve[0]==="outside"&&et>0?W?"after":rt.bpd==="tb"||rt.bpd==="rl"?"under":"over":W?"before":rt.bpd==="tb"||rt.bpd==="rl"?"over":"under",ft.style[ue]=hn,Et.appendChild(ft));for(var nn=null,Ot=0;Ot<ot[et].rbc.length;Ot++)if(ot[et].rbc[Ot].localName==="ruby"){nn=ot[et].rbc[Ot];for(var Un=0;Un<nn.style.length;Un++)Et.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||ot[et].elements[0].node).parentElement.insertBefore(Et,nn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].rbc.length;ft++){var vt;ot[et].rbc[ft].style[ue]||(vt=W?et===0?"before":"after":rt.bpd==="tb"||rt.bpd==="rl"?et===0?"over":"under":et===0?"under":"over",ot[et].rbc[ft].style[ue]=vt)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=0;ft<ot[et].te.length;ft++){var vt;ot[et].te[ft].style[X]&&ot[et].te[ft].style[X]!=="none"||(vt=rt.bpd==="tb"?et===0?"left over":"left under":rt.bpd==="rl"?et===0?"right under":"left under":et===0?"left under":"right under",ot[et].te[ft].style[X]=vt)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(ot){for(var rt=0;rt<ot.length-1;rt++){var et=ot[rt].elements.length;if(et!==0&&ot[rt].br===!1){var ft=document.createElement("br"),vt=ot[rt].elements[et-1].node;vt.parentElement.insertBefore(ft,vt.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(ot,rt,et){if(ot!==null)for(var ft=0;ft<ot.length;ft++){var vt=ot[ft].elements.length,Et=Math.ceil(rt)+"px",Ct="-"+Math.ceil(rt)+"px";if(vt!==0){var hn=ot[ft].elements[ot[ft].start_elem],Xt=ot[ft].elements[ot[ft].end_elem];if(hn===Xt){var nn=hn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}et.ipd==="lr"?(hn.node.style.marginLeft=Ct,hn.node.style.paddingLeft=Et):et.ipd==="rl"?(hn.node.style.paddingRight=Et,hn.node.style.marginRight=Ct):et.ipd==="tb"&&(hn.node.style.paddingTop=Et,hn.node.style.marginTop=Ct),et.ipd==="lr"?(F||(Xt.node.style.marginRight=Ct),Xt.node.style.paddingRight=Et):et.ipd==="rl"?(Xt.node.style.paddingLeft=Et,F||(Xt.node.style.marginLeft=Ct)):et.ipd==="tb"&&(Xt.node.style.paddingBottom=Et,Xt.node.style.marginBottom=Ct)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(ot,rt){for(var et=0;et<ot.length;et++)for(var ft=ot[et],vt=1;vt<ft.elements.length;){var Et=ft.elements[vt-1],Ct=ft.elements[vt];T(Et.node,Ct.node,rt)?ft.elements.splice(vt,1):vt++}for(var hn,Xt,nn=[],Ot=0;Ot<ot.length;Ot++)for(var Un=0;Un<ot[Ot].elements.length;Un++)(Xt=m(hn=ot[Ot].elements[Un].node,nn,!1))&&(hn.style.backgroundColor=Xt);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(K,oe),oe.flg)){var pe=N(Oe.getBoundingClientRect(),oe);(function(ot,rt,et,ft,vt){for(var Et=Math.sign(et-rt),Ct=0;Ct<=ot.length;Ct++){var hn,Xt,nn,Ot;if(hn=Ct===0?Math.round(rt):Ct===ot.length?Math.round(et):Math.round((ot[Ct-1].after+ot[Ct].before)/2),Ct>0&&ot[Ct-1])for(nn=0;nn<ot[Ct-1].elements.length;nn++)Xt=Et*(hn-(Ot=ot[Ct-1].elements[nn]).after)+"px",ft.bpd==="lr"?Ot.node.style.paddingRight=Xt:ft.bpd==="rl"?Ot.node.style.paddingLeft=Xt:ft.bpd==="tb"&&(Ot.node.style.paddingBottom=Xt);if(Ct<ot.length)for(nn=0;nn<ot[Ct].elements.length;nn++)Xt=Et*((Ot=ot[Ct].elements[nn]).before-hn)+"px",ft.bpd==="lr"?Ot.node.style.paddingLeft=Xt:ft.bpd==="rl"?Ot.node.style.paddingRight=Xt:ft.bpd==="tb"&&(Ot.node.style.paddingTop=Xt)}})(K,pe.before,pe.after,oe),oe.flg=null}if(Ce.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&Ce.contents.length>0&&Ce.styleAttrs[v.byName.displayAlign.qname]==="after"){_(oe,Oe,K,null);var ce=new U(Ce.id===""?"_":Ce.id,K);if(oe.currentISDState[ce.id]=ce,oe.previousISDState&&ce.id in oe.previousISDState&&oe.previousISDState[ce.id].plist.length>0&&ce.plist.length>1&&ce.plist[ce.plist.length-2].text===oe.previousISDState[ce.id].plist[oe.previousISDState[ce.id].plist.length-1].text){var He=Ae.firstElementChild,_t=ce.plist[ce.plist.length-1].after-ce.plist[ce.plist.length-1].before;He.style.bottom="-"+_t+"px",He.style.transition="transform 0.4s",He.style.position="relative",He.style.transform="translateY(-"+_t+"px)"}}}else de(oe.errorHandler,"Error processing ISD element kind: "+Ce.kind)}function m(oe,ve,Ce){return oe.style.backgroundColor?(Ce&&!ve.includes(oe)&&ve.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,ve,!0):void 0}function T(oe,ve,Ce){if(oe.tagName==="SPAN"&&ve.tagName==="SPAN"&&oe._isd_element===ve._isd_element){if(!oe._isd_element)return de(Ce.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=ve.textContent;for(var Xe=0;Xe<ve.style.length;Xe++){var Ae=ve.style[Xe];(Ae.indexOf("border")>=0||Ae.indexOf("padding")>=0||Ae.indexOf("margin")>=0)&&(oe.style[Ae]=ve.style[Ae])}return ve.parentElement.removeChild(ve),!0}return!1}function U(oe,ve){this.id=oe,this.plist=ve}function N(oe,ve){var Ce={before:null,after:null,start:null,end:null};return ve.bpd==="tb"?(Ce.before=oe.top,Ce.after=oe.bottom,ve.ipd==="lr"?(Ce.start=oe.left,Ce.end=oe.right):(Ce.start=oe.right,Ce.end=oe.left)):ve.bpd==="lr"?(Ce.before=oe.left,Ce.after=oe.right,Ce.start=oe.top,Ce.end=oe.bottom):ve.bpd==="rl"&&(Ce.before=oe.right,Ce.after=oe.left,Ce.start=oe.top,Ce.end=oe.bottom),Ce}function _(oe,ve,Ce,Xe){if(ve.localName!=="rt"&&ve.localName!=="rtc"){var Ae,Ze,it,st,Ye=ve.style.backgroundColor||Xe;if(ve.childElementCount===0)if(ve.localName==="span"||ve.localName==="rb"){var lt=N(ve.getBoundingClientRect(),oe);if(Ce.length!==0&&(Ae=lt.before,Ze=lt.after,it=Ce[Ce.length-1].before,Ze<(st=Ce[Ce.length-1].after)&&Ae>it||st<=Ze&&it>=Ae)){var At=Math.sign(lt.after-lt.before),Oe=Math.sign(lt.end-lt.start);At*(lt.before-Ce[Ce.length-1].before)<0&&(Ce[Ce.length-1].before=lt.before),At*(lt.after-Ce[Ce.length-1].after)>0&&(Ce[Ce.length-1].after=lt.after),Oe*(lt.start-Ce[Ce.length-1].start)<0&&(Ce[Ce.length-1].start=lt.start,Ce[Ce.length-1].start_elem=Ce[Ce.length-1].elements.length),Oe*(lt.end-Ce[Ce.length-1].end)>0&&(Ce[Ce.length-1].end=lt.end,Ce[Ce.length-1].end_elem=Ce[Ce.length-1].elements.length)}else Ce.push({before:lt.before,after:lt.after,start:lt.start,end:lt.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ce[Ce.length-1].text+=ve.textContent,Ce[Ce.length-1].elements.push({node:ve,bgcolor:Ye,before:lt.before,after:lt.after})}else ve.localName==="br"&&Ce.length!==0&&(Ce[Ce.length-1].br=!0);else for(var Qe=ve.firstChild;Qe;)Qe.nodeType===Node.ELEMENT_NODE&&(_(oe,Qe,Ce,Ye),Qe.localName==="ruby"||Qe.localName==="rtc"?Ce.length>0&&Ce[Ce.length-1].rbc.push(Qe):Qe.localName==="span"&&Qe.style[x]&&Qe.style[x]!=="none"&&Ce.length>0&&Ce[Ce.length-1].te.push(Qe)),Qe=Qe.nextSibling}}function I(oe,ve,Ce,Xe){var Ae;Xe.style!=="none"&&(Xe.style==="auto"?ve.style[x]="filled":ve.style[x]=Xe.style+" "+Xe.symbol,(Xe.position==="before"||Xe.position==="after")&&(Ae=oe.bpd==="tb"?Xe.position==="before"?"left over":"left under":oe.bpd==="rl"?Xe.position==="before"?"right under":"left under":Xe.position==="before"?"left under":"right under",ve.style[X]=Ae))}function C(oe,ve){this.qname=oe,this.map=ve}R.render=function(oe,ve,Ce,Xe,Ae,Ze,it,st,Ye){var lt=Xe||ve.clientHeight,At=Ae||ve.clientWidth;if(oe.aspectRatio!==null){var Oe=lt*oe.aspectRatio;Oe>At?lt=Math.round(At/oe.aspectRatio):At=Oe}var Qe=document.createElement("div");Qe.style.position="relative",Qe.style.width=At+"px",Qe.style.height=lt+"px",Qe.style.margin="auto",Qe.style.top=0,Qe.style.bottom=0,Qe.style.left=0,Qe.style.right=0,Qe.style.zIndex=0;var ct={h:lt,w:At,regionH:null,regionW:null,imgResolver:Ce,displayForcedOnlyMode:Ze||!1,isd:oe,errorHandler:it,previousISDState:st,enableRollUp:Ye||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ve.appendChild(Qe),"contents"in oe)for(var Qt=0;Qt<oe.contents.length;Qt++)D(ct,Qe,oe.contents[Qt],oe);return ct.currentISDState};for(var j=[new C("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,ve,Ce,Xe){Xe[3]!==0&&(ve.style.backgroundColor="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")")}),new C("http://www.w3.org/ns/ttml#styling color",function(oe,ve,Ce,Xe){ve.style.color="rgba("+Xe[0].toString()+","+Xe[1].toString()+","+Xe[2].toString()+","+(Xe[3]/255).toString()+")"}),new C("http://www.w3.org/ns/ttml#styling direction",function(oe,ve,Ce,Xe){ve.style.direction=Xe}),new C("http://www.w3.org/ns/ttml#styling display",function(oe,ve,Ce,Xe){}),new C("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,ve,Ce,Xe){ve.style.display="flex",ve.style.flexDirection="column",Xe==="before"?ve.style.justifyContent="flex-start":Xe==="center"?ve.style.justifyContent="center":Xe==="after"&&(ve.style.justifyContent="flex-end")}),new C("http://www.w3.org/ns/ttml#styling extent",function(oe,ve,Ce,Xe){oe.regionH=Xe.h.toUsedLength(oe.w,oe.h),oe.regionW=Xe.w.toUsedLength(oe.w,oe.h);var Ae=0,Ze=0,it=Ce.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];it&&(Ae=it[0].toUsedLength(oe.w,oe.h)+it[2].toUsedLength(oe.w,oe.h),Ze=it[1].toUsedLength(oe.w,oe.h)+it[3].toUsedLength(oe.w,oe.h)),ve.style.height=oe.regionH-Ae+"px",ve.style.width=oe.regionW-Ze+"px"}),new C("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,ve,Ce,Xe){for(var Ae=[],Ze=0;Ze<Xe.length;Ze++)Xe[Ze]=Xe[Ze].trim(),Xe[Ze]==="monospaceSerif"?(Ae.push("Courier New"),Ae.push('"Liberation Mono"'),Ae.push("Courier"),Ae.push("monospace")):Xe[Ze]==="proportionalSansSerif"?(Ae.push("Arial"),Ae.push("Helvetica"),Ae.push('"Liberation Sans"'),Ae.push("sans-serif")):Xe[Ze]==="monospace"?Ae.push("monospace"):Xe[Ze]==="sansSerif"?Ae.push("sans-serif"):Xe[Ze]==="serif"?Ae.push("serif"):Xe[Ze]==="monospaceSansSerif"?(Ae.push("Consolas"),Ae.push("monospace")):Xe[Ze]==="proportionalSerif"?Ae.push("serif"):Ae.push(Xe[Ze]);if(Ae.length>0){for(var it=[Ae[0]],st=1;st<Ae.length;st++)it.indexOf(Ae[st])==-1&&it.push(Ae[st]);Ae=it}ve.style.fontFamily=Ae.join(",")}),new C("http://www.w3.org/ns/ttml#styling shear",function(oe,ve,Ce,Xe){if(Xe!==0){var Ae=-.9*Xe;oe.bpd==="tb"?ve.style.transform="skewX("+Ae+"deg)":ve.style.transform="skewY("+Ae+"deg)"}}),new C("http://www.w3.org/ns/ttml#styling fontSize",function(oe,ve,Ce,Xe){ve.style.fontSize=Xe.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,ve,Ce,Xe){ve.style.fontStyle=Xe}),new C("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,ve,Ce,Xe){ve.style.fontWeight=Xe}),new C("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,ve,Ce,Xe){ve.style.lineHeight=Xe==="normal"?"normal":Xe.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling opacity",function(oe,ve,Ce,Xe){ve.style.opacity=Xe}),new C("http://www.w3.org/ns/ttml#styling origin",function(oe,ve,Ce,Xe){ve.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",ve.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling overflow",function(oe,ve,Ce,Xe){ve.style.overflow=Xe}),new C("http://www.w3.org/ns/ttml#styling padding",function(oe,ve,Ce,Xe){var Ae=[];Ae[0]=Xe[0].toUsedLength(oe.w,oe.h)+"px",Ae[1]=Xe[3].toUsedLength(oe.w,oe.h)+"px",Ae[2]=Xe[2].toUsedLength(oe.w,oe.h)+"px",Ae[3]=Xe[1].toUsedLength(oe.w,oe.h)+"px",ve.style.padding=Ae.join(" ")}),new C("http://www.w3.org/ns/ttml#styling position",function(oe,ve,Ce,Xe){ve.style.top=Xe.h.toUsedLength(oe.w,oe.h)+"px",ve.style.left=Xe.w.toUsedLength(oe.w,oe.h)+"px"}),new C("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,ve,Ce,Xe){ve.style.rubyAlign=Xe==="spaceAround"?"space-around":"center"}),new C("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,ve,Ce,Xe){var Ae;Xe!=="before"&&Xe!=="after"||(Ae=W?Xe:oe.bpd==="tb"||oe.bpd==="rl"?Xe==="before"?"over":"under":Xe==="before"?"under":"over",ve.parentElement.style[ue]=Ae)}),new C("http://www.w3.org/ns/ttml#styling showBackground",null),new C("http://www.w3.org/ns/ttml#styling textAlign",function(oe,ve,Ce,Xe){var Ae;Ae=Xe==="start"?oe.ipd==="rl"?"right":"left":Xe==="end"?oe.ipd==="rl"?"left":"right":Xe,ve.style.textAlign=Ae}),new C("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,ve,Ce,Xe){ve.style.textDecoration=Xe.join(" ").replace("lineThrough","line-through")}),new C("http://www.w3.org/ns/ttml#styling textOutline",function(oe,ve,Ce,Xe){}),new C("http://www.w3.org/ns/ttml#styling textShadow",function(oe,ve,Ce,Xe){var Ae=Ce.styleAttrs[v.byName.textOutline.qname];if(Xe==="none"&&Ae==="none")ve.style.textShadow="";else{var Ze=[];if(Ae!=="none"){var it="rgba("+Ae.color[0].toString()+","+Ae.color[1].toString()+","+Ae.color[2].toString()+","+(Ae.color[3]/255).toString()+")";Ze.push("1px 1px 1px "+it),Ze.push("-1px 1px 1px "+it),Ze.push("1px -1px 1px "+it),Ze.push("-1px -1px 1px "+it)}if(Xe!=="none")for(var st=0;st<Xe.length;st++)Ze.push(Xe[st].x_off.toUsedLength(oe.w,oe.h)+"px "+Xe[st].y_off.toUsedLength(oe.w,oe.h)+"px "+Xe[st].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Xe[st].color[0].toString()+","+Xe[st].color[1].toString()+","+Xe[st].color[2].toString()+","+(Xe[st].color[3]/255).toString()+")");ve.style.textShadow=Ze.join(",")}}),new C("http://www.w3.org/ns/ttml#styling textCombine",function(oe,ve,Ce,Xe){ve.style.textCombineUpright=Xe}),new C("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,ve,Ce,Xe){}),new C("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,ve,Ce,Xe){var Ae;Ae=Xe==="bidiOverride"?"bidi-override":Xe,ve.style.unicodeBidi=Ae}),new C("http://www.w3.org/ns/ttml#styling visibility",function(oe,ve,Ce,Xe){ve.style.visibility=Xe}),new C("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,ve,Ce,Xe){Xe==="wrap"?Ce.space==="preserve"?ve.style.whiteSpace="pre-wrap":ve.style.whiteSpace="normal":Ce.space==="preserve"?ve.style.whiteSpace="pre":ve.style.whiteSpace="noWrap"}),new C("http://www.w3.org/ns/ttml#styling writingMode",function(oe,ve,Ce,Xe){Xe==="lrtb"||Xe==="lr"||Xe==="rltb"||Xe==="rl"?ve.style.writingMode="horizontal-tb":Xe==="tblr"?ve.style.writingMode="vertical-lr":Xe!=="tbrl"&&Xe!=="tb"||(ve.style.writingMode="vertical-rl")}),new C("http://www.w3.org/ns/ttml#styling zIndex",function(oe,ve,Ce,Xe){ve.style.zIndex=Xe}),new C("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,ve,Ce,Xe){oe.displayForcedOnlyMode&&Xe===!1&&(ve.style.visibility="hidden")})],Y={},$=0;$<j.length;$++)Y[j[$].qname]=j[$];var W="webkitRubyPosition"in window.getComputedStyle(document.documentElement),ue=W?"webkitRubyPosition":"rubyPosition",x="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function de(oe,ve){if(oe&&oe.error&&oe.error(ve))throw ve}})(g,typeof imscNames>"u"?S(210):imscNames,typeof imscStyles>"u"?S(6811):imscStyles,typeof imscUtils>"u"?S(5926):imscUtils)},4080:function(b,g,S){(function(F,R,y,v){F.generateISD=function(C,j,Y){var $,W=new N(C),ue={},x={},X=C.head.styling.initials[y.byName.showBackground.qname],de=C.head.styling.initials[y.byName.backgroundColor.qname];for(var oe in C.head.layout.regions)if(C.head.layout.regions.hasOwnProperty(oe)){var ve=C.head.layout.regions[oe],Ce=ve.styleAttrs[y.byName.showBackground.qname]||X,Xe=ve.styleAttrs[y.byName.backgroundColor.qname]||de;x[ve.id]=(Ce==="always"||Ce===void 0)&&Xe!==void 0&&!(j<ve.begin||j>=ve.end)}for(var Ae in C.body&&C.body.regionID&&(x[C.body.regionID]=!0),$=C.body!==null?function it(st,Ye){if(Ye.contents){var lt={};for(var At in Ye)Ye.hasOwnProperty(At)&&(lt[At]=Ye[At]);return lt.contents=[],Ye.contents.filter(function(Oe){return!(st<Oe.begin||st>=Oe.end)}).forEach(function(Oe){var Qe=it(st,Oe);Qe.regionID&&(x[Qe.regionID]=!0),Qe!==null&&lt.contents.push(Qe)}),lt}return Ye}(j,C.body):null,x[""]!==void 0&&(x[""]=!0),x)if(x[Ae]){var Ze=m(C,j,C.head.layout.regions[Ae],$,null,"",C.head.layout.regions[Ae],Y,ue);Ze!==null&&W.contents.push(Ze.element)}return W};var D=[y.byName.color.qname,y.byName.textCombine.qname,y.byName.textDecoration.qname,y.byName.textEmphasis.qname,y.byName.textOutline.qname,y.byName.textShadow.qname];function m(C,j,Y,$,W,ue,x,X,de){if(j<x.begin||j>=x.end)return null;var oe="regionID"in x&&x.regionID!==""?x.regionID:ue;if(W!==null&&oe!==Y.id&&(!("contents"in x)||"contents"in x&&x.contents.length===0||oe!==""))return null;var ve=new _(x);if("sets"in x)for(var Ce=0;Ce<x.sets.length;Ce++)j<x.sets[Ce].begin||j>=x.sets[Ce].end||(ve.styleAttrs[x.sets[Ce].qname]=x.sets[Ce].value);var Xe={};for(var Ae in ve.styleAttrs)if(ve.styleAttrs.hasOwnProperty(Ae)&&(Xe[Ae]=!0,ve.kind==="region"&&Ae===y.byName.writingMode.qname&&!(y.byName.direction.qname in ve.styleAttrs))){var Ze=ve.styleAttrs[Ae];Ze==="lrtb"||Ze==="lr"?ve.styleAttrs[y.byName.direction.qname]="ltr":Ze!=="rltb"&&Ze!=="rl"||(ve.styleAttrs[y.byName.direction.qname]="rtl")}if(W!==null)for(var it=0;it<y.all.length;it++){var st=y.all[it];if(st.qname===y.byName.textDecoration.qname){var Ye=W.styleAttrs[st.qname],lt=ve.styleAttrs[st.qname],At=[];lt===void 0?At=Ye:lt.indexOf("none")===-1?((lt.indexOf("noUnderline")===-1&&Ye.indexOf("underline")!==-1||lt.indexOf("underline")!==-1)&&At.push("underline"),(lt.indexOf("noLineThrough")===-1&&Ye.indexOf("lineThrough")!==-1||lt.indexOf("lineThrough")!==-1)&&At.push("lineThrough"),(lt.indexOf("noOverline")===-1&&Ye.indexOf("overline")!==-1||lt.indexOf("overline")!==-1)&&At.push("overline")):At.push("none"),ve.styleAttrs[st.qname]=At}else if(st.qname!==y.byName.fontSize.qname||st.qname in ve.styleAttrs||ve.kind!=="span"||ve.styleAttrs[y.byName.ruby.qname]!=="textContainer")if(st.qname!==y.byName.fontSize.qname||st.qname in ve.styleAttrs||ve.kind!=="span"||ve.styleAttrs[y.byName.ruby.qname]!=="text")st.inherit&&st.qname in W.styleAttrs&&!(st.qname in ve.styleAttrs)&&(ve.styleAttrs[st.qname]=W.styleAttrs[st.qname]);else{var Oe=W.styleAttrs[y.byName.fontSize.qname];W.styleAttrs[y.byName.ruby.qname]==="textContainer"?ve.styleAttrs[st.qname]=Oe:ve.styleAttrs[st.qname]=new v.ComputedLength(.5*Oe.rw,.5*Oe.rh)}else{var Qe=W.styleAttrs[y.byName.fontSize.qname];ve.styleAttrs[st.qname]=new v.ComputedLength(.5*Qe.rw,.5*Qe.rh)}}for(var ct=0;ct<y.all.length;ct++){var Qt=y.all[ct];if(!(Qt.qname in ve.styleAttrs)&&!(Qt.qname===y.byName.position.qname&&y.byName.origin.qname in ve.styleAttrs||Qt.qname===y.byName.origin.qname&&y.byName.position.qname in ve.styleAttrs)){var Kt=C.head.styling.initials[Qt.qname]||Qt.initial;if(Kt!==null&&(ve.kind==="region"||Qt.inherit===!1&&Kt!==null)){var Tt=Qt.parse(Kt);Tt!==null?(ve.styleAttrs[Qt.qname]=Tt,Xe[Qt.qname]=!0):I(X,"Invalid initial value for '"+Qt.qname+"' on element '"+ve.kind)}}}for(var Pt=0;Pt<y.all.length;Pt++){var Ie=y.all[Pt];if(Ie.qname in Xe&&Ie.compute!==null){var ne=Ie.compute(C,W,ve,ve.styleAttrs[Ie.qname],de);ne!==null?ve.styleAttrs[Ie.qname]=ne:(ve.styleAttrs[Ie.qname]=Ie.compute(C,W,ve,Ie.parse(Ie.initial),de),I(X,"Style '"+Ie.qname+"' on element '"+ve.kind+"' cannot be computed"))}}if(ve.styleAttrs[y.byName.display.qname]==="none")return null;var Fe=null;W===null?Fe=$===null?[]:[$]:"contents"in x&&(Fe=x.contents);for(var O=0;Fe!==null&&O<Fe.length;O++){var M=m(C,j,Y,$,ve,oe,Fe[O],X,de);M!==null&&ve.contents.push(M.element)}for(var q in ve.styleAttrs)if(ve.styleAttrs.hasOwnProperty(q)){var K=!1;if(ve.kind==="span"){var pe=ve.styleAttrs[y.byName.ruby.qname];(K=(pe==="container"||pe==="textContainer"||pe==="baseContainer")&&D.indexOf(q)!==-1)||(K=pe!=="container"&&q===y.byName.rubyAlign.qname),K||(K=!(pe==="textContainer"||pe==="text")&&q===y.byName.rubyPosition.qname)}if(!K){var ce=y.byQName[q];"applies"in ce&&(K=ce.applies.indexOf(ve.kind)===-1)}K&&delete ve.styleAttrs[q]}var He=ve.styleAttrs[y.byName.ruby.qname];if(ve.kind==="p"||ve.kind==="span"&&(He==="textContainer"||He==="text")){var _t=[];T(ve,_t),function(ot){for(var rt,et=0;et<ot.length;)if((rt=ot[et]).kind!=="br"&&rt.space!=="preserve"){var ft=rt.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ft)&&(et===0||(vt=ot[et-1]).kind==="br"||/[\r\n\t ]$/.test(vt.text))&&(ft=ft.substring(1)),rt.text=ft,ft.length===0?ot.splice(et,1):et++}else et++;var vt,Et;for(et=0;et<ot.length;et++)(rt=ot[et]).kind!=="br"&&rt.space!=="preserve"?/[ ]$/.test(rt.text)&&(et===ot.length-1||(Et=ot[et+1]).kind==="br"||Et.space==="preserve"&&/^[\r\n]/.test(Et.text))&&(rt.text=rt.text.slice(0,-1)):et++}(_t),U(ve)}return ve.kind==="div"&&y.byName.backgroundImage.qname in ve.styleAttrs||ve.kind==="br"||ve.kind==="image"||"contents"in ve&&ve.contents.length>0||ve.kind==="span"&&ve.text!==null||ve.kind==="region"&&ve.styleAttrs[y.byName.showBackground.qname]==="always"?{region_id:oe,element:ve}:null}function T(C,j){if("contents"in C)for(var Y=0;Y<C.contents.length;Y++){var $=C.contents[Y],W=$.styleAttrs[y.byName.ruby.qname];($.kind!=="span"||W!=="textContainer"&&W!=="text")&&("contents"in $?T($,j):($.kind==="span"&&$.text.length!==0||$.kind==="br")&&j.push($))}}function U(C){if(C.kind==="br")return!1;if("text"in C)return C.text.length===0;if("contents"in C){for(var j=C.contents.length;j--;)U(C.contents[j])&&C.contents.splice(j,1);return C.contents.length===0}}function N(C){this.contents=[],this.aspectRatio=C.aspectRatio,this.lang=C.lang}function _(C){for(var j in this.kind=C.kind||"region",this.lang=C.lang,C.id&&(this.id=C.id),this.styleAttrs={},C.styleAttrs)C.styleAttrs.hasOwnProperty(j)&&(this.styleAttrs[j]=C.styleAttrs[j]);"src"in C&&(this.src=C.src),"type"in C&&(this.type=C.type),"text"in C?this.text=C.text:(this.kind==="region"||"contents"in C)&&(this.contents=[]),"space"in C&&(this.space=C.space)}function I(C,j){if(C&&C.error&&C.error(j))throw j}})(g,typeof imscNames>"u"?S(210):imscNames,typeof imscStyles>"u"?S(6811):imscStyles,typeof imscUtils>"u"?S(5926):imscUtils)},4403:function(b,g,S){g.generateISD=S(4080).generateISD,g.fromXML=S(3362).fromXML,g.renderHTML=S(506).render},210:function(b,g){(function(S){S.ns_tt="http://www.w3.org/ns/ttml",S.ns_tts="http://www.w3.org/ns/ttml#styling",S.ns_ttp="http://www.w3.org/ns/ttml#parameter",S.ns_xml="http://www.w3.org/XML/1998/namespace",S.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",S.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",S.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",S.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(b,g,S){(function(F,R,y){function v(T,U,N,_,I,C,j,Y){this.name=U,this.ns=T,this.qname=T+" "+U,this.inherit=I,this.animatable=C,this.initial=N,this.applies=_,this.parse=j,this.compute=Y}for(var D in F.all=[new v(R.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,y.parseColor,null),new v(R.ns_tts,"color","white",["span"],!0,!0,y.parseColor,null),new v(R.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new v(R.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var N=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&N?{h:_,w:N}:null},function(T,U,N,_,I){var C,j;if(_==="auto")C=new y.ComputedLength(0,1);else if((C=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(1,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:C,w:j}}),new v(R.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var U=T.split(","),N=[],_=0;_<U.length;_++)U[_]=U[_].trim(),U[_].charAt(0)!=="'"&&U[_].charAt(0)!=='"'&&U[_]==="default"?N.push("monospaceSerif"):N.push(U[_]);return N},null),new v(R.ns_tts,"shear","0%",["p"],!0,!0,y.parseLength,function(T,U,N,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new v(R.ns_tts,"fontSize","1c",["span","p"],!0,!0,y.parseLength,function(T,U,N,_,I){return y.toComputedLength(_.value,_.unit,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,U!==null?U.styleAttrs[F.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new v(R.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new v(R.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new v(R.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:y.parseLength(T)},function(T,U,N,_,I){var C;if(_==="normal")C=_;else if((C=y.toComputedLength(_.value,_.unit,N.styleAttrs[F.byName.fontSize.qname],N.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return C}),new v(R.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new v(R.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var U=T.split(" ");if(U.length!==2)return null;var N=y.parseLength(U[0]),_=y.parseLength(U[1]);return _&&N?{h:_,w:N}:null},function(T,U,N,_,I){var C,j;if(_==="auto")C=new y.ComputedLength(0,0);else if((C=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(0,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:C,w:j}}),new v(R.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"padding","0px",["region"],!1,!0,function(T){var U=T.split(" ");if(U.length>4)return null;for(var N=[],_=0;_<U.length;_++){var I=y.parseLength(U[_]);if(!I)return null;N.push(I)}return N},function(T,U,N,_,I){var C;if(_.length===1)C=[_[0],_[0],_[0],_[0]];else if(_.length===2)C=[_[0],_[1],_[0],_[1]];else if(_.length===3)C=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;C=[_[0],_[1],_[2],_[3]]}var j=N.styleAttrs[F.byName.writingMode.qname];if(j==="lrtb"||j==="lr")C=[C[0],C[3],C[2],C[1]];else if(j==="rltb"||j==="rl")C=[C[0],C[1],C[2],C[3]];else if(j==="tblr")C=[C[3],C[0],C[1],C[2]];else{if(j!=="tbrl"&&j!=="tb")return null;C=[C[3],C[2],C[1],C[0]]}for(var Y=[],$=0;$<C.length;$++)if(C[$].value===0)Y[$]=new y.ComputedLength(0,0);else if(Y[$]=y.toComputedLength(C[$].value,C[$].unit,N.styleAttrs[F.byName.fontSize.qname],$===0||$===2?N.styleAttrs[F.byName.extent.qname].h:N.styleAttrs[F.byName.extent.qname].w,$===0||$===2?T.cellLength.h:T.cellLength.w,$===0||$===2?T.pxLength.h:T.pxLength.w),Y[$]===null)return null;return Y}),new v(R.ns_tts,"position","top left",["region"],!1,!0,function(T){return y.parsePosition(T)},function(T,U,N,_){var I,C;return(I=y.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new y.ComputedLength(-N.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-N.styleAttrs[F.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new y.ComputedLength(-I.rw-N.styleAttrs[F.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-N.styleAttrs[F.byName.extent.qname].h.rh)),C=y.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new y.ComputedLength(T.dimensions.w.rw-N.styleAttrs[F.byName.extent.qname].w.rw,-N.styleAttrs[F.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(C=new y.ComputedLength(T.dimensions.w.rw-C.rw-N.styleAttrs[F.byName.extent.qname].w.rw,-C.rh-N.styleAttrs[F.byName.extent.qname].w.rh)),{h:I,w:C}))}),new v(R.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new v(R.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new v(R.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var U=T.split(" "),N=[null,null];if(U.length===0||U.length>2||U[0]!=="none"&&U[0]!=="both"&&U[0]!=="after"&&U[0]!=="before"&&U[0]!=="outside")return null;if(N[0]=U[0],U.length===2&&U[0]!=="none"){var _=y.parseLength(U[1]);if(!_)return null;N[1]=_}return N},function(T,U,N,_,I){if(_[0]==="none")return _;var C;return(C=_[1]===null?new y.ComputedLength(.5*N.styleAttrs[F.byName.fontSize.qname].rw,.5*N.styleAttrs[F.byName.fontSize.qname].rh):y.toComputedLength(_[1].value,_[1].unit,N.styleAttrs[F.byName.fontSize.qname],N.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],C]}),new v(R.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,U,N,_,I){return _==="left"?"start":_==="right"?"end":_}),new v(R.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new v(R.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new v(R.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var U=T.split(" "),N={style:null,symbol:null,color:null,position:null},_=0;_<U.length;_++)if(U[_]==="none"||U[_]==="auto")N.style=U[_];else if(U[_]==="filled"||U[_]==="open")N.style=U[_];else if(U[_]==="circle"||U[_]==="dot"||U[_]==="sesame")N.symbol=U[_];else if(U[_]==="current")N.color=U[_];else if(U[_]==="outside"||U[_]==="before"||U[_]==="after")N.position=U[_];else if(N.color=y.parseColor(U[_]),N.color===null)return null;return N.style==null&&N.symbol==null?N.style="auto":(N.symbol=N.symbol||"circle",N.style=N.style||"filled"),N.position=N.position||"outside",N.color=N.color||"current",N},null),new v(R.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var U={},N=T.split(" ");if(N.length===0||N.length>2)return null;var _=y.parseColor(N[0]);if(U.color=_,_!==null&&N.shift(),N.length!==1)return null;var I=y.parseLength(N[0]);return I?(U.thickness=I,U):null},function(T,U,N,_,I){if(_==="none")return _;var C={};return _.color===null?C.color=N.styleAttrs[F.byName.color.qname]:C.color=_.color,C.thickness=y.toComputedLength(_.thickness.value,_.thickness.unit,N.styleAttrs[F.byName.fontSize.qname],N.styleAttrs[F.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),C.thickness===null?null:C}),new v(R.ns_tts,"textShadow","none",["span"],!0,!0,y.parseTextShadow,function(T,U,N,_){if(_==="none")return _;for(var I=[],C=0;C<_.length;C++){var j={};if(j.x_off=y.toComputedLength(_[C][0].value,_[C][0].unit,null,N.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.w),j.x_off===null||(j.y_off=y.toComputedLength(_[C][1].value,_[C][1].unit,null,N.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.y_off===null))return null;if(_[C][2]===null)j.b_radius=0;else if(j.b_radius=y.toComputedLength(_[C][2].value,_[C][2].unit,null,N.styleAttrs[F.byName.fontSize.qname],null,T.pxLength.h),j.b_radius===null)return null;_[C][3]===null?j.color=N.styleAttrs[F.byName.color.qname]:j.color=_[C][3],I.push(j)}return I}),new v(R.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new v(R.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new v(R.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new v(R.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var U;return T==="auto"?U=T:(U=parseInt(T),isNaN(U)&&(U=null)),U},null),new v(R.ns_ebutts,"linePadding","0c",["p"],!0,!1,y.parseLength,function(T,U,N,_,I){return y.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new v(R.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new v(R.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new v(R.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new v(R.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],F.byQName={},F.all)F.byQName[F.all[D].qname]=F.all[D];for(var m in F.byName={},F.all)F.byName[F.all[m].name]=F.all[m]})(g,typeof imscNames>"u"?S(210):imscNames,typeof imscUtils>"u"?S(5926):imscUtils)},5926:function(b,g){(function(S){var F=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,R=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};S.parseColor=function(m){var T,U=null,N=v[m.toLowerCase()];return N!==void 0?U=N:(T=F.exec(m))!==null?U=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=R.exec(m))!==null?U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=y.exec(m))!==null&&(U=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),U};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;S.parseLength=function(m){var T,U=null;return(T=D.exec(m))!==null&&(U={value:parseFloat(T[1]),unit:T[2]}),U},S.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),U=[],N=0;N<T.length;N++){var _=T[N].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],C=S.parseLength(_.shift());if(C===null||(I[0]=C,(C=S.parseLength(_.shift()))===null))return null;if(I[1]=C,_.length===0){U.push(I);continue}if((C=S.parseLength(_[0]))!==null&&(I[2]=C,_.shift()),_.length===0){U.push(I);continue}var j=S.parseColor(_[0]);if(j===null)return null;I[3]=j,U.push(I)}}return U},S.parsePosition=function(m){var T=m.split(" "),U=function($){return $==="center"||$==="left"||$==="top"||$==="bottom"||$==="right"};if(T.length>4)return null;for(var N=0;N<T.length;N++)if(!U(T[N])){var _=S.parseLength(T[N]);if(_===null)return null;T[N]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},C=0;C<T.length;){var j=T[C++];if(U(j)){var Y={value:0,unit:"%"};T.length!==2&&C<T.length&&!U(T[C])&&(Y=T[C++]),j==="right"?(I.h.edge=j,I.h.offset=Y):j==="bottom"?(I.v.edge=j,I.v.offset=Y):j==="left"?I.h.offset=Y:j==="top"&&(I.v.offset=Y)}else{if(T.length!==1&&T.length!==2)return null;C===1?I.h.offset=j:I.v.offset=j}}return I},S.ComputedLength=function(m,T){this.rw=m,this.rh=T},S.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},S.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},S.toComputedLength=function(m,T,U,N,_,I){return T==="%"&&N?new S.ComputedLength(N.rw*m/100,N.rh*m/100):T==="em"&&U?new S.ComputedLength(U.rw*m,U.rh*m):T==="c"&&_?new S.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new S.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new S.ComputedLength(0,m/100):T==="rw"?new S.ComputedLength(m/100,0):null}})(g)},3516:function(b){b.exports=function(g){var S=typeof g=="string"?g.charCodeAt(0):g;return S>=97&&S<=122||S>=65&&S<=90}},2219:function(b,g,S){var F=S(3516),R=S(395);b.exports=function(y){return F(y)||R(y)}},395:function(b){b.exports=function(g){var S=typeof g=="string"?g.charCodeAt(0):g;return S>=48&&S<=57}},3875:function(b){function g(R){if(typeof R!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(R))}function S(R,y){for(var v,D="",m=0,T=-1,U=0,N=0;N<=R.length;++N){if(N<R.length)v=R.charCodeAt(N);else{if(v===47)break;v=47}if(v===47){if(!(T===N-1||U===1))if(T!==N-1&&U===2){if(D.length<2||m!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var _=D.lastIndexOf("/");if(_!==D.length-1){_===-1?(D="",m=0):m=(D=D.slice(0,_)).length-1-D.lastIndexOf("/"),T=N,U=0;continue}}else if(D.length===2||D.length===1){D="",m=0,T=N,U=0;continue}}y&&(D.length>0?D+="/..":D="..",m=2)}else D.length>0?D+="/"+R.slice(T+1,N):D=R.slice(T+1,N),m=N-T-1;T=N,U=0}else v===46&&U!==-1?++U:U=-1}return D}var F={resolve:function(){for(var R,y="",v=!1,D=arguments.length-1;D>=-1&&!v;D--){var m;D>=0?m=arguments[D]:(R===void 0&&(R=process.cwd()),m=R),g(m),m.length!==0&&(y=m+"/"+y,v=m.charCodeAt(0)===47)}return y=S(y,!v),v?y.length>0?"/"+y:"/":y.length>0?y:"."},normalize:function(R){if(g(R),R.length===0)return".";var y=R.charCodeAt(0)===47,v=R.charCodeAt(R.length-1)===47;return(R=S(R,!y)).length!==0||y||(R="."),R.length>0&&v&&(R+="/"),y?"/"+R:R},isAbsolute:function(R){return g(R),R.length>0&&R.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var R,y=0;y<arguments.length;++y){var v=arguments[y];g(v),v.length>0&&(R===void 0?R=v:R+="/"+v)}return R===void 0?".":F.normalize(R)},relative:function(R,y){if(g(R),g(y),R===y||(R=F.resolve(R))===(y=F.resolve(y)))return"";for(var v=1;v<R.length&&R.charCodeAt(v)===47;++v);for(var D=R.length,m=D-v,T=1;T<y.length&&y.charCodeAt(T)===47;++T);for(var U=y.length-T,N=m<U?m:U,_=-1,I=0;I<=N;++I){if(I===N){if(U>N){if(y.charCodeAt(T+I)===47)return y.slice(T+I+1);if(I===0)return y.slice(T+I)}else m>N&&(R.charCodeAt(v+I)===47?_=I:I===0&&(_=0));break}var C=R.charCodeAt(v+I);if(C!==y.charCodeAt(T+I))break;C===47&&(_=I)}var j="";for(I=v+_+1;I<=D;++I)I!==D&&R.charCodeAt(I)!==47||(j.length===0?j+="..":j+="/..");return j.length>0?j+y.slice(T+_):(T+=_,y.charCodeAt(T)===47&&++T,y.slice(T))},_makeLong:function(R){return R},dirname:function(R){if(g(R),R.length===0)return".";for(var y=R.charCodeAt(0),v=y===47,D=-1,m=!0,T=R.length-1;T>=1;--T)if((y=R.charCodeAt(T))===47){if(!m){D=T;break}}else m=!1;return D===-1?v?"/":".":v&&D===1?"//":R.slice(0,D)},basename:function(R,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');g(R);var v,D=0,m=-1,T=!0;if(y!==void 0&&y.length>0&&y.length<=R.length){if(y.length===R.length&&y===R)return"";var U=y.length-1,N=-1;for(v=R.length-1;v>=0;--v){var _=R.charCodeAt(v);if(_===47){if(!T){D=v+1;break}}else N===-1&&(T=!1,N=v+1),U>=0&&(_===y.charCodeAt(U)?--U==-1&&(m=v):(U=-1,m=N))}return D===m?m=N:m===-1&&(m=R.length),R.slice(D,m)}for(v=R.length-1;v>=0;--v)if(R.charCodeAt(v)===47){if(!T){D=v+1;break}}else m===-1&&(T=!1,m=v+1);return m===-1?"":R.slice(D,m)},extname:function(R){g(R);for(var y=-1,v=0,D=-1,m=!0,T=0,U=R.length-1;U>=0;--U){var N=R.charCodeAt(U);if(N!==47)D===-1&&(m=!1,D=U+1),N===46?y===-1?y=U:T!==1&&(T=1):y!==-1&&(T=-1);else if(!m){v=U+1;break}}return y===-1||D===-1||T===0||T===1&&y===D-1&&y===v+1?"":R.slice(y,D)},format:function(R){if(R===null||typeof R!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof R);return function(y,v){var D=v.dir||v.root,m=v.base||(v.name||"")+(v.ext||"");return D?D===v.root?D+m:D+"/"+m:m}(0,R)},parse:function(R){g(R);var y={root:"",dir:"",base:"",ext:"",name:""};if(R.length===0)return y;var v,D=R.charCodeAt(0),m=D===47;m?(y.root="/",v=1):v=0;for(var T=-1,U=0,N=-1,_=!0,I=R.length-1,C=0;I>=v;--I)if((D=R.charCodeAt(I))!==47)N===-1&&(_=!1,N=I+1),D===46?T===-1?T=I:C!==1&&(C=1):T!==-1&&(C=-1);else if(!_){U=I+1;break}return T===-1||N===-1||C===0||C===1&&T===N-1&&T===U+1?N!==-1&&(y.base=y.name=U===0&&m?R.slice(1,N):R.slice(U,N)):(U===0&&m?(y.name=R.slice(1,T),y.base=R.slice(1,N)):(y.name=R.slice(U,T),y.base=R.slice(U,N)),y.ext=R.slice(T,N)),U>0?y.dir=R.slice(0,U-1):m&&(y.dir="/"),y},sep:"/",delimiter:":",win32:null,posix:null};F.posix=F,b.exports=F},8387:function(b,g,S){var F=S(1549),R=F.Buffer;function y(D,m){for(var T in D)m[T]=D[T]}function v(D,m,T){return R(D,m,T)}R.from&&R.alloc&&R.allocUnsafe&&R.allocUnsafeSlow?b.exports=F:(y(F,g),g.Buffer=v),y(R,v),v.from=function(D,m,T){if(typeof D=="number")throw new TypeError("Argument must not be a number");return R(D,m,T)},v.alloc=function(D,m,T){if(typeof D!="number")throw new TypeError("Argument must be a number");var U=R(D);return m!==void 0?typeof T=="string"?U.fill(m,T):U.fill(m):U.fill(0),U},v.allocUnsafe=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return R(D)},v.allocUnsafeSlow=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return F.SlowBuffer(D)}},5378:function(b,g,S){(function(F){F.parser=function(O,M){return new v(O,M)},F.SAXParser=v,F.SAXStream=m,F.createStream=function(O,M){return new m(O,M)},F.MAX_BUFFER_LENGTH=65536;var R,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function v(O,M){if(!(this instanceof v))return new v(O,M);var q=this;(function(K){for(var pe=0,ce=y.length;pe<ce;pe++)K[y[pe]]=""})(q),q.q=q.c="",q.bufferCheckPosition=F.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!O,q.noscript=!(!O&&!q.opt.noscript),q.state=Ae.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(F.XML_ENTITIES):Object.create(F.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(Y)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),it(q,"onready")}F.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function M(){}return M.prototype=O,new M}),Object.keys||(Object.keys=function(O){var M=[];for(var q in O)O.hasOwnProperty(q)&&M.push(q);return M}),v.prototype={end:function(){Oe(this)},write:function(O){var M=this;if(this.error)throw this.error;if(M.closed)return At(M,"Cannot write after close. Assign an onready handler.");if(O===null)return Oe(M);typeof O=="object"&&(O=O.toString());for(var q=0,K="";K=Fe(O,q++),M.c=K,K;)switch(M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++),M.state){case Ae.BEGIN:if(M.state=Ae.BEGIN_WHITESPACE,K==="\uFEFF")continue;ne(M,K);continue;case Ae.BEGIN_WHITESPACE:ne(M,K);continue;case Ae.TEXT:if(M.sawRoot&&!M.closedRoot){for(var pe=q-1;K&&K!=="<"&&K!=="&";)(K=Fe(O,q++))&&M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=O.substring(pe,q-1)}K!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,K)||M.sawRoot&&!M.closedRoot||Qe(M,"Text data outside of root node."),K==="&"?M.state=Ae.TEXT_ENTITY:M.textNode+=K):(M.state=Ae.OPEN_WAKA,M.startTagPosition=M.position);continue;case Ae.SCRIPT:K==="<"?M.state=Ae.SCRIPT_ENDING:M.script+=K;continue;case Ae.SCRIPT_ENDING:K==="/"?M.state=Ae.CLOSE_TAG:(M.script+="<"+K,M.state=Ae.SCRIPT);continue;case Ae.OPEN_WAKA:if(K==="!")M.state=Ae.SGML_DECL,M.sgmlDecl="";else if(!de(T,K))if(de($,K))M.state=Ae.OPEN_TAG,M.tagName=K;else if(K==="/")M.state=Ae.CLOSE_TAG,M.tagName="";else if(K==="?")M.state=Ae.PROC_INST,M.procInstName=M.procInstBody="";else{if(Qe(M,"Unencoded <"),M.startTagPosition+1<M.position){var ce=M.position-M.startTagPosition;K=new Array(ce).join(" ")+K}M.textNode+="<"+K,M.state=Ae.TEXT}continue;case Ae.SGML_DECL:(M.sgmlDecl+K).toUpperCase()==="[CDATA["?(st(M,"onopencdata"),M.state=Ae.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+K==="--"?(M.state=Ae.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(M.state=Ae.DOCTYPE,(M.doctype||M.sawRoot)&&Qe(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):K===">"?(st(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Ae.TEXT):(de(_,K)&&(M.state=Ae.SGML_DECL_QUOTED),M.sgmlDecl+=K);continue;case Ae.SGML_DECL_QUOTED:K===M.q&&(M.state=Ae.SGML_DECL,M.q=""),M.sgmlDecl+=K;continue;case Ae.DOCTYPE:K===">"?(M.state=Ae.TEXT,st(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=K,K==="["?M.state=Ae.DOCTYPE_DTD:de(_,K)&&(M.state=Ae.DOCTYPE_QUOTED,M.q=K));continue;case Ae.DOCTYPE_QUOTED:M.doctype+=K,K===M.q&&(M.q="",M.state=Ae.DOCTYPE);continue;case Ae.DOCTYPE_DTD:M.doctype+=K,K==="]"?M.state=Ae.DOCTYPE:de(_,K)&&(M.state=Ae.DOCTYPE_DTD_QUOTED,M.q=K);continue;case Ae.DOCTYPE_DTD_QUOTED:M.doctype+=K,K===M.q&&(M.state=Ae.DOCTYPE_DTD,M.q="");continue;case Ae.COMMENT:K==="-"?M.state=Ae.COMMENT_ENDING:M.comment+=K;continue;case Ae.COMMENT_ENDING:K==="-"?(M.state=Ae.COMMENT_ENDED,M.comment=lt(M.opt,M.comment),M.comment&&st(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+K,M.state=Ae.COMMENT);continue;case Ae.COMMENT_ENDED:K!==">"?(Qe(M,"Malformed comment"),M.comment+="--"+K,M.state=Ae.COMMENT):M.state=Ae.TEXT;continue;case Ae.CDATA:K==="]"?M.state=Ae.CDATA_ENDING:M.cdata+=K;continue;case Ae.CDATA_ENDING:K==="]"?M.state=Ae.CDATA_ENDING_2:(M.cdata+="]"+K,M.state=Ae.CDATA);continue;case Ae.CDATA_ENDING_2:K===">"?(M.cdata&&st(M,"oncdata",M.cdata),st(M,"onclosecdata"),M.cdata="",M.state=Ae.TEXT):K==="]"?M.cdata+="]":(M.cdata+="]]"+K,M.state=Ae.CDATA);continue;case Ae.PROC_INST:K==="?"?M.state=Ae.PROC_INST_ENDING:de(T,K)?M.state=Ae.PROC_INST_BODY:M.procInstName+=K;continue;case Ae.PROC_INST_BODY:if(!M.procInstBody&&de(T,K))continue;K==="?"?M.state=Ae.PROC_INST_ENDING:M.procInstBody+=K;continue;case Ae.PROC_INST_ENDING:K===">"?(st(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Ae.TEXT):(M.procInstBody+="?"+K,M.state=Ae.PROC_INST_BODY);continue;case Ae.OPEN_TAG:de(W,K)?M.tagName+=K:(ct(M),K===">"?Tt(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:(oe(T,K)&&Qe(M,"Invalid character in tag name"),M.state=Ae.ATTRIB));continue;case Ae.OPEN_TAG_SLASH:K===">"?(Tt(M,!0),Pt(M)):(Qe(M,"Forward-slash in opening tag not followed by >"),M.state=Ae.ATTRIB);continue;case Ae.ATTRIB:if(de(T,K))continue;K===">"?Tt(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:de($,K)?(M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME:K==="="?M.state=Ae.ATTRIB_VALUE:K===">"?(Qe(M,"Attribute without value"),M.attribValue=M.attribName,Kt(M),Tt(M)):de(T,K)?M.state=Ae.ATTRIB_NAME_SAW_WHITE:de(W,K)?M.attribName+=K:Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_NAME_SAW_WHITE:if(K==="=")M.state=Ae.ATTRIB_VALUE;else{if(de(T,K))continue;Qe(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",st(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",K===">"?Tt(M):de($,K)?(M.attribName=K,M.state=Ae.ATTRIB_NAME):(Qe(M,"Invalid attribute name"),M.state=Ae.ATTRIB)}continue;case Ae.ATTRIB_VALUE:if(de(T,K))continue;de(_,K)?(M.q=K,M.state=Ae.ATTRIB_VALUE_QUOTED):(Qe(M,"Unquoted attribute value"),M.state=Ae.ATTRIB_VALUE_UNQUOTED,M.attribValue=K);continue;case Ae.ATTRIB_VALUE_QUOTED:if(K!==M.q){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=K;continue}Kt(M),M.q="",M.state=Ae.ATTRIB_VALUE_CLOSED;continue;case Ae.ATTRIB_VALUE_CLOSED:de(T,K)?M.state=Ae.ATTRIB:K===">"?Tt(M):K==="/"?M.state=Ae.OPEN_TAG_SLASH:de($,K)?(Qe(M,"No whitespace between attributes"),M.attribName=K,M.attribValue="",M.state=Ae.ATTRIB_NAME):Qe(M,"Invalid attribute name");continue;case Ae.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?M.state=Ae.ATTRIB_VALUE_ENTITY_U:M.attribValue+=K;continue}Kt(M),K===">"?Tt(M):M.state=Ae.ATTRIB;continue;case Ae.CLOSE_TAG:if(M.tagName)K===">"?Pt(M):de(W,K)?M.tagName+=K:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Ae.SCRIPT):(oe(T,K)&&Qe(M,"Invalid tagname in closing tag"),M.state=Ae.CLOSE_TAG_SAW_WHITE);else{if(de(T,K))continue;oe($,K)?M.script?(M.script+="</"+K,M.state=Ae.SCRIPT):Qe(M,"Invalid tagname in closing tag."):M.tagName=K}continue;case Ae.CLOSE_TAG_SAW_WHITE:if(de(T,K))continue;K===">"?Pt(M):Qe(M,"Invalid characters in closing tag");continue;case Ae.TEXT_ENTITY:case Ae.ATTRIB_VALUE_ENTITY_Q:case Ae.ATTRIB_VALUE_ENTITY_U:var He,_t;switch(M.state){case Ae.TEXT_ENTITY:He=Ae.TEXT,_t="textNode";break;case Ae.ATTRIB_VALUE_ENTITY_Q:He=Ae.ATTRIB_VALUE_QUOTED,_t="attribValue";break;case Ae.ATTRIB_VALUE_ENTITY_U:He=Ae.ATTRIB_VALUE_UNQUOTED,_t="attribValue"}K===";"?(M[_t]+=Ie(M),M.entity="",M.state=He):de(M.entity.length?x:ue,K)?M.entity+=K:(Qe(M,"Invalid character in entity name"),M[_t]+="&"+M.entity+K,M.entity="",M.state=He);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(ot){for(var rt=Math.max(F.MAX_BUFFER_LENGTH,10),et=0,ft=0,vt=y.length;ft<vt;ft++){var Et=ot[y[ft]].length;if(Et>rt)switch(y[ft]){case"textNode":Ye(ot);break;case"cdata":st(ot,"oncdata",ot.cdata),ot.cdata="";break;case"script":st(ot,"onscript",ot.script),ot.script="";break;default:At(ot,"Max buffer length exceeded: "+y[ft])}et=Math.max(et,Et)}var Ct=F.MAX_BUFFER_LENGTH-et;ot.bufferCheckPosition=Ct+ot.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var O;Ye(O=this),O.cdata!==""&&(st(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(st(O,"onscript",O.script),O.script="")}};try{R=S(182).Stream}catch(O){R=function(){}}var D=F.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function m(O,M){if(!(this instanceof m))return new m(O,M);R.apply(this),this._parser=new v(O,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(K){q.emit("error",K),q._parser.error=null},this._decoder=null,D.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(pe){if(!pe)return q.removeAllListeners(K),q._parser["on"+K]=pe,pe;q.on(K,pe)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(R.prototype,{constructor:{value:m}}),m.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var M=S(7503).s;this._decoder=new M("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},m.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},m.prototype.on=function(O,M){var q=this;return q._parser["on"+O]||D.indexOf(O)===-1||(q._parser["on"+O]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,O),q.emit.apply(q,K)}),R.prototype.on.call(q,O,M)};var T="\r\n	 ",U="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",C="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",Y={xml:C,xmlns:j};T=X(T),U=X(U),N=X(N);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ue=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(O){return O.split("").reduce(function(M,q){return M[q]=!0,M},{})}function de(O,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(O)?!!M.match(O):O[M]}function oe(O,M){return!de(O,M)}_=X(_),I=X(I);var ve,Ce,Xe,Ae=0;for(var Ze in F.STATE={BEGIN:Ae++,BEGIN_WHITESPACE:Ae++,TEXT:Ae++,TEXT_ENTITY:Ae++,OPEN_WAKA:Ae++,SGML_DECL:Ae++,SGML_DECL_QUOTED:Ae++,DOCTYPE:Ae++,DOCTYPE_QUOTED:Ae++,DOCTYPE_DTD:Ae++,DOCTYPE_DTD_QUOTED:Ae++,COMMENT_STARTING:Ae++,COMMENT:Ae++,COMMENT_ENDING:Ae++,COMMENT_ENDED:Ae++,CDATA:Ae++,CDATA_ENDING:Ae++,CDATA_ENDING_2:Ae++,PROC_INST:Ae++,PROC_INST_BODY:Ae++,PROC_INST_ENDING:Ae++,OPEN_TAG:Ae++,OPEN_TAG_SLASH:Ae++,ATTRIB:Ae++,ATTRIB_NAME:Ae++,ATTRIB_NAME_SAW_WHITE:Ae++,ATTRIB_VALUE:Ae++,ATTRIB_VALUE_QUOTED:Ae++,ATTRIB_VALUE_CLOSED:Ae++,ATTRIB_VALUE_UNQUOTED:Ae++,ATTRIB_VALUE_ENTITY_Q:Ae++,ATTRIB_VALUE_ENTITY_U:Ae++,CLOSE_TAG:Ae++,CLOSE_TAG_SAW_WHITE:Ae++,SCRIPT:Ae++,SCRIPT_ENDING:Ae++},F.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},F.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(F.ENTITIES).forEach(function(O){var M=F.ENTITIES[O],q=typeof M=="number"?String.fromCharCode(M):M;F.ENTITIES[O]=q}),F.STATE)F.STATE[F.STATE[Ze]]=Ze;function it(O,M,q){O[M]&&O[M](q)}function st(O,M,q){O.textNode&&Ye(O),it(O,M,q)}function Ye(O){O.textNode=lt(O.opt,O.textNode),O.textNode&&it(O,"ontext",O.textNode),O.textNode=""}function lt(O,M){return O.trim&&(M=M.trim()),O.normalize&&(M=M.replace(/\s+/g," ")),M}function At(O,M){return Ye(O),O.trackPosition&&(M+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),M=new Error(M),O.error=M,it(O,"onerror",M),O}function Oe(O){return O.sawRoot&&!O.closedRoot&&Qe(O,"Unclosed root tag"),O.state!==Ae.BEGIN&&O.state!==Ae.BEGIN_WHITESPACE&&O.state!==Ae.TEXT&&At(O,"Unexpected end"),Ye(O),O.c="",O.closed=!0,it(O,"onend"),v.call(O,O.strict,O.opt),O}function Qe(O,M){if(typeof O!="object"||!(O instanceof v))throw new Error("bad call to strictFail");O.strict&&At(O,M)}function ct(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var M=O.tags[O.tags.length-1]||O,q=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(q.ns=M.ns),O.attribList.length=0,st(O,"onopentagstart",q)}function Qt(O,M){var q=O.indexOf(":")<0?["",O]:O.split(":"),K=q[0],pe=q[1];return M&&O==="xmlns"&&(K="xmlns",pe=""),{prefix:K,local:pe}}function Kt(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var M=Qt(O.attribName,!0),q=M.prefix,K=M.local;if(q==="xmlns")if(K==="xml"&&O.attribValue!==C)Qe(O,"xml: prefix must be bound to "+C+"\nActual: "+O.attribValue);else if(K==="xmlns"&&O.attribValue!==j)Qe(O,"xmlns: prefix must be bound to "+j+"\nActual: "+O.attribValue);else{var pe=O.tag,ce=O.tags[O.tags.length-1]||O;pe.ns===ce.ns&&(pe.ns=Object.create(ce.ns)),pe.ns[K]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,st(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function Tt(O,M){if(O.opt.xmlns){var q=O.tag,K=Qt(O.tagName);q.prefix=K.prefix,q.local=K.local,q.uri=q.ns[K.prefix]||"",q.prefix&&!q.uri&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),q.uri=K.prefix);var pe=O.tags[O.tags.length-1]||O;q.ns&&pe.ns!==q.ns&&Object.keys(q.ns).forEach(function(hn){st(O,"onopennamespace",{prefix:hn,uri:q.ns[hn]})});for(var ce=0,He=O.attribList.length;ce<He;ce++){var _t=O.attribList[ce],ot=_t[0],rt=_t[1],et=Qt(ot,!0),ft=et.prefix,vt=et.local,Et=ft===""?"":q.ns[ft]||"",Ct={name:ot,value:rt,prefix:ft,local:vt,uri:Et};ft&&ft!=="xmlns"&&!Et&&(Qe(O,"Unbound namespace prefix: "+JSON.stringify(ft)),Ct.uri=ft),O.tag.attributes[ot]=Ct,st(O,"onattribute",Ct)}O.attribList.length=0}O.tag.isSelfClosing=!!M,O.sawRoot=!0,O.tags.push(O.tag),st(O,"onopentag",O.tag),M||(O.noscript||O.tagName.toLowerCase()!=="script"?O.state=Ae.TEXT:O.state=Ae.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function Pt(O){if(!O.tagName)return Qe(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=Ae.TEXT);if(O.script){if(O.tagName!=="script")return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=Ae.SCRIPT);st(O,"onscript",O.script),O.script=""}var M=O.tags.length,q=O.tagName;O.strict||(q=q[O.looseCase]());for(var K=q;M--&&O.tags[M].name!==K;)Qe(O,"Unexpected close tag");if(M<0)return Qe(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=Ae.TEXT);O.tagName=q;for(var pe=O.tags.length;pe-- >M;){var ce=O.tag=O.tags.pop();O.tagName=O.tag.name,st(O,"onclosetag",O.tagName);var He={};for(var _t in ce.ns)He[_t]=ce.ns[_t];var ot=O.tags[O.tags.length-1]||O;O.opt.xmlns&&ce.ns!==ot.ns&&Object.keys(ce.ns).forEach(function(rt){var et=ce.ns[rt];st(O,"onclosenamespace",{prefix:rt,uri:et})})}M===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=Ae.TEXT}function Ie(O){var M,q=O.entity,K=q.toLowerCase(),pe="";return O.ENTITIES[q]?O.ENTITIES[q]:O.ENTITIES[K]?O.ENTITIES[K]:((q=K).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),pe=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),pe=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),pe.toLowerCase()!==q?(Qe(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(M))}function ne(O,M){M==="<"?(O.state=Ae.OPEN_WAKA,O.startTagPosition=O.position):oe(T,M)&&(Qe(O,"Non-whitespace before first tag."),O.textNode=M,O.state=Ae.TEXT)}function Fe(O,M){var q="";return M<O.length&&(q=O.charAt(M)),q}Ae=F.STATE,String.fromCodePoint||(ve=String.fromCharCode,Ce=Math.floor,Xe=function(){var O,M,q=16384,K=[],pe=-1,ce=arguments.length;if(!ce)return"";for(var He="";++pe<ce;){var _t=Number(arguments[pe]);if(!isFinite(_t)||_t<0||_t>1114111||Ce(_t)!==_t)throw RangeError("Invalid code point: "+_t);_t<=65535?K.push(_t):(O=55296+((_t-=65536)>>10),M=_t%1024+56320,K.push(O,M)),(pe+1===ce||K.length>q)&&(He+=ve.apply(null,K),K.length=0)}return He},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Xe,configurable:!0,writable:!0}):String.fromCodePoint=Xe)})(g)},182:function(b,g,S){b.exports=R;var F=S(1159).EventEmitter;function R(){F.call(this)}S(1765)(R,F),R.Readable=S(2846),R.Writable=S(8318),R.Duplex=S(6138),R.Transform=S(9798),R.PassThrough=S(5472),R.finished=S(8800),R.pipeline=S(7295),R.Stream=R,R.prototype.pipe=function(y,v){var D=this;function m(j){y.writable&&y.write(j)===!1&&D.pause&&D.pause()}function T(){D.readable&&D.resume&&D.resume()}D.on("data",m),y.on("drain",T),y._isStdio||v&&v.end===!1||(D.on("end",N),D.on("close",_));var U=!1;function N(){U||(U=!0,y.end())}function _(){U||(U=!0,typeof y.destroy=="function"&&y.destroy())}function I(j){if(C(),F.listenerCount(this,"error")===0)throw j}function C(){D.removeListener("data",m),y.removeListener("drain",T),D.removeListener("end",N),D.removeListener("close",_),D.removeListener("error",I),y.removeListener("error",I),D.removeListener("end",C),D.removeListener("close",C),y.removeListener("close",C)}return D.on("error",I),y.on("error",I),D.on("end",C),D.on("close",C),y.on("close",C),y.emit("pipe",D),y}},1765:function(b){typeof Object.create=="function"?b.exports=function(g,S){S&&(g.super_=S,g.prototype=Object.create(S.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(g,S){if(S){g.super_=S;var F=function(){};F.prototype=S.prototype,g.prototype=new F,g.prototype.constructor=g}}},3690:function(b){var g={};function S(R,y,v){v||(v=Error);var D=function(m){var T,U;function N(_,I,C){return m.call(this,function(j,Y,$){return typeof y=="string"?y:y(j,Y,$)}(_,I,C))||this}return U=m,(T=N).prototype=Object.create(U.prototype),T.prototype.constructor=T,T.__proto__=U,N}(v);D.prototype.name=v.name,D.prototype.code=R,g[R]=D}function F(R,y){if(Array.isArray(R)){var v=R.length;return R=R.map(function(D){return String(D)}),v>2?"one of ".concat(y," ").concat(R.slice(0,v-1).join(", "),", or ")+R[v-1]:v===2?"one of ".concat(y," ").concat(R[0]," or ").concat(R[1]):"of ".concat(y," ").concat(R[0])}return"of ".concat(y," ").concat(String(R))}S("ERR_INVALID_OPT_VALUE",function(R,y){return'The value "'+y+'" is invalid for option "'+R+'"'},TypeError),S("ERR_INVALID_ARG_TYPE",function(R,y,v){var D,m,T,U,N;if(typeof y=="string"&&(m="not ",y.substr(0,m.length)===m)?(D="must not be",y=y.replace(/^not /,"")):D="must be",function(I,C,j){return(j===void 0||j>I.length)&&(j=I.length),I.substring(j-C.length,j)===C}(R," argument"))T="The ".concat(R," ").concat(D," ").concat(F(y,"type"));else{var _=(typeof N!="number"&&(N=0),N+1>(U=R).length||U.indexOf(".",N)===-1?"argument":"property");T='The "'.concat(R,'" ').concat(_," ").concat(D," ").concat(F(y,"type"))}return T+". Received type ".concat(typeof v)},TypeError),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),S("ERR_METHOD_NOT_IMPLEMENTED",function(R){return"The "+R+" method is not implemented"}),S("ERR_STREAM_PREMATURE_CLOSE","Premature close"),S("ERR_STREAM_DESTROYED",function(R){return"Cannot call "+R+" after a stream was destroyed"}),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),S("ERR_STREAM_WRITE_AFTER_END","write after end"),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_UNKNOWN_ENCODING",function(R){return"Unknown encoding: "+R},TypeError),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.q=g},6138:function(b,g,S){var F=Object.keys||function(_){var I=[];for(var C in _)I.push(C);return I};b.exports=T;var R=S(2846),y=S(8318);S(1765)(T,R);for(var v=F(y.prototype),D=0;D<v.length;D++){var m=v[D];T.prototype[m]||(T.prototype[m]=y.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);R.call(this,_),y.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||process.nextTick(N,this)}function N(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(b,g,S){b.exports=R;var F=S(9798);function R(y){if(!(this instanceof R))return new R(y);F.call(this,y)}S(1765)(R,F),R.prototype._transform=function(y,v,D){D(null,y)}},2846:function(b,g,S){var F;b.exports=ve,ve.ReadableState=oe,S(1159).EventEmitter;var R,y=function(Ie,ne){return Ie.listeners(ne).length},v=S(9299),D=S(1549).Buffer,m=S.g.Uint8Array||function(){},T=S(964);R=T&&T.debuglog?T.debuglog("stream"):function(){};var U,N,_,I=S(8393),C=S(6163),j=S(7269).getHighWaterMark,Y=S(3690).q,$=Y.ERR_INVALID_ARG_TYPE,W=Y.ERR_STREAM_PUSH_AFTER_EOF,ue=Y.ERR_METHOD_NOT_IMPLEMENTED,x=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(1765)(ve,v);var X=C.errorOrDestroy,de=["error","close","destroy","pause","resume"];function oe(Ie,ne,Fe){F=F||S(6138),Ie=Ie||{},typeof Fe!="boolean"&&(Fe=ne instanceof F),this.objectMode=!!Ie.objectMode,Fe&&(this.objectMode=this.objectMode||!!Ie.readableObjectMode),this.highWaterMark=j(this,Ie,"readableHighWaterMark",Fe),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ie.emitClose!==!1,this.autoDestroy=!!Ie.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ie.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ie.encoding&&(U||(U=S(7503).s),this.decoder=new U(Ie.encoding),this.encoding=Ie.encoding)}function ve(Ie){if(F=F||S(6138),!(this instanceof ve))return new ve(Ie);var ne=this instanceof F;this._readableState=new oe(Ie,this,ne),this.readable=!0,Ie&&(typeof Ie.read=="function"&&(this._read=Ie.read),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy)),v.call(this)}function Ce(Ie,ne,Fe,O,M){R("readableAddChunk",ne);var q,K=Ie._readableState;if(ne===null)K.reading=!1,function(pe,ce){if(R("onEofChunk"),!ce.ended){if(ce.decoder){var He=ce.decoder.end();He&&He.length&&(ce.buffer.push(He),ce.length+=ce.objectMode?1:He.length)}ce.ended=!0,ce.sync?it(pe):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,st(pe)))}}(Ie,K);else if(M||(q=function(pe,ce){var He,_t;return _t=ce,D.isBuffer(_t)||_t instanceof m||typeof ce=="string"||ce===void 0||pe.objectMode||(He=new $("chunk",["string","Buffer","Uint8Array"],ce)),He}(K,ne)),q)X(Ie,q);else if(K.objectMode||ne&&ne.length>0)if(typeof ne=="string"||K.objectMode||Object.getPrototypeOf(ne)===D.prototype||(ne=function(pe){return D.from(pe)}(ne)),O)K.endEmitted?X(Ie,new x):Xe(Ie,K,ne,!0);else if(K.ended)X(Ie,new W);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Fe?(ne=K.decoder.write(ne),K.objectMode||ne.length!==0?Xe(Ie,K,ne,!1):Ye(Ie,K)):Xe(Ie,K,ne,!1)}else O||(K.reading=!1,Ye(Ie,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Xe(Ie,ne,Fe,O){ne.flowing&&ne.length===0&&!ne.sync?(ne.awaitDrain=0,Ie.emit("data",Fe)):(ne.length+=ne.objectMode?1:Fe.length,O?ne.buffer.unshift(Fe):ne.buffer.push(Fe),ne.needReadable&&it(Ie)),Ye(Ie,ne)}Object.defineProperty(ve.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ie){this._readableState&&(this._readableState.destroyed=Ie)}}),ve.prototype.destroy=C.destroy,ve.prototype._undestroy=C.undestroy,ve.prototype._destroy=function(Ie,ne){ne(Ie)},ve.prototype.push=function(Ie,ne){var Fe,O=this._readableState;return O.objectMode?Fe=!0:typeof Ie=="string"&&((ne=ne||O.defaultEncoding)!==O.encoding&&(Ie=D.from(Ie,ne),ne=""),Fe=!0),Ce(this,Ie,ne,!1,Fe)},ve.prototype.unshift=function(Ie){return Ce(this,Ie,null,!0,!1)},ve.prototype.isPaused=function(){return this._readableState.flowing===!1},ve.prototype.setEncoding=function(Ie){U||(U=S(7503).s);var ne=new U(Ie);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var Fe=this._readableState.buffer.head,O="";Fe!==null;)O+=ne.write(Fe.data),Fe=Fe.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var Ae=1073741824;function Ze(Ie,ne){return Ie<=0||ne.length===0&&ne.ended?0:ne.objectMode?1:Ie!=Ie?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(Ie>ne.highWaterMark&&(ne.highWaterMark=function(Fe){return Fe>=Ae?Fe=Ae:(Fe--,Fe|=Fe>>>1,Fe|=Fe>>>2,Fe|=Fe>>>4,Fe|=Fe>>>8,Fe|=Fe>>>16,Fe++),Fe}(Ie)),Ie<=ne.length?Ie:ne.ended?ne.length:(ne.needReadable=!0,0))}function it(Ie){var ne=Ie._readableState;R("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(R("emitReadable",ne.flowing),ne.emittedReadable=!0,process.nextTick(st,Ie))}function st(Ie){var ne=Ie._readableState;R("emitReadable_",ne.destroyed,ne.length,ne.ended),ne.destroyed||!ne.length&&!ne.ended||(Ie.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,ct(Ie)}function Ye(Ie,ne){ne.readingMore||(ne.readingMore=!0,process.nextTick(lt,Ie,ne))}function lt(Ie,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){var Fe=ne.length;if(R("maybeReadMore read 0"),Ie.read(0),Fe===ne.length)break}ne.readingMore=!1}function At(Ie){var ne=Ie._readableState;ne.readableListening=Ie.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:Ie.listenerCount("data")>0&&Ie.resume()}function Oe(Ie){R("readable nexttick read 0"),Ie.read(0)}function Qe(Ie,ne){R("resume",ne.reading),ne.reading||Ie.read(0),ne.resumeScheduled=!1,Ie.emit("resume"),ct(Ie),ne.flowing&&!ne.reading&&Ie.read(0)}function ct(Ie){var ne=Ie._readableState;for(R("flow",ne.flowing);ne.flowing&&Ie.read()!==null;);}function Qt(Ie,ne){return ne.length===0?null:(ne.objectMode?Fe=ne.buffer.shift():!Ie||Ie>=ne.length?(Fe=ne.decoder?ne.buffer.join(""):ne.buffer.length===1?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):Fe=ne.buffer.consume(Ie,ne.decoder),Fe);var Fe}function Kt(Ie){var ne=Ie._readableState;R("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,process.nextTick(Tt,ne,Ie))}function Tt(Ie,ne){if(R("endReadableNT",Ie.endEmitted,Ie.length),!Ie.endEmitted&&Ie.length===0&&(Ie.endEmitted=!0,ne.readable=!1,ne.emit("end"),Ie.autoDestroy)){var Fe=ne._writableState;(!Fe||Fe.autoDestroy&&Fe.finished)&&ne.destroy()}}function Pt(Ie,ne){for(var Fe=0,O=Ie.length;Fe<O;Fe++)if(Ie[Fe]===ne)return Fe;return-1}ve.prototype.read=function(Ie){R("read",Ie),Ie=parseInt(Ie,10);var ne=this._readableState,Fe=Ie;if(Ie!==0&&(ne.emittedReadable=!1),Ie===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return R("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Kt(this):it(this),null;if((Ie=Ze(Ie,ne))===0&&ne.ended)return ne.length===0&&Kt(this),null;var O,M=ne.needReadable;return R("need readable",M),(ne.length===0||ne.length-Ie<ne.highWaterMark)&&R("length less than watermark",M=!0),ne.ended||ne.reading?R("reading or ended",M=!1):M&&(R("do read"),ne.reading=!0,ne.sync=!0,ne.length===0&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(Ie=Ze(Fe,ne))),(O=Ie>0?Qt(Ie,ne):null)===null?(ne.needReadable=ne.length<=ne.highWaterMark,Ie=0):(ne.length-=Ie,ne.awaitDrain=0),ne.length===0&&(ne.ended||(ne.needReadable=!0),Fe!==Ie&&ne.ended&&Kt(this)),O!==null&&this.emit("data",O),O},ve.prototype._read=function(Ie){X(this,new ue("_read()"))},ve.prototype.pipe=function(Ie,ne){var Fe=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=Ie;break;case 1:O.pipes=[O.pipes,Ie];break;default:O.pipes.push(Ie)}O.pipesCount+=1,R("pipe count=%d opts=%j",O.pipesCount,ne);var M=ne&&ne.end===!1||Ie===process.stdout||Ie===process.stderr?rt:q;function q(){R("onend"),Ie.end()}O.endEmitted?process.nextTick(M):Fe.once("end",M),Ie.on("unpipe",function et(ft,vt){R("onunpipe"),ft===Fe&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,R("cleanup"),Ie.removeListener("close",_t),Ie.removeListener("finish",ot),Ie.removeListener("drain",K),Ie.removeListener("error",He),Ie.removeListener("unpipe",et),Fe.removeListener("end",q),Fe.removeListener("end",rt),Fe.removeListener("data",ce),pe=!0,!O.awaitDrain||Ie._writableState&&!Ie._writableState.needDrain||K())});var K=function(et){return function(){var ft=et._readableState;R("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&y(et,"data")&&(ft.flowing=!0,ct(et))}}(Fe);Ie.on("drain",K);var pe=!1;function ce(et){R("ondata");var ft=Ie.write(et);R("dest.write",ft),ft===!1&&((O.pipesCount===1&&O.pipes===Ie||O.pipesCount>1&&Pt(O.pipes,Ie)!==-1)&&!pe&&(R("false write response, pause",O.awaitDrain),O.awaitDrain++),Fe.pause())}function He(et){R("onerror",et),rt(),Ie.removeListener("error",He),y(Ie,"error")===0&&X(Ie,et)}function _t(){Ie.removeListener("finish",ot),rt()}function ot(){R("onfinish"),Ie.removeListener("close",_t),rt()}function rt(){R("unpipe"),Fe.unpipe(Ie)}return Fe.on("data",ce),function(et,ft,vt){if(typeof et.prependListener=="function")return et.prependListener(ft,vt);et._events&&et._events[ft]?Array.isArray(et._events[ft])?et._events[ft].unshift(vt):et._events[ft]=[vt,et._events[ft]]:et.on(ft,vt)}(Ie,"error",He),Ie.once("close",_t),Ie.once("finish",ot),Ie.emit("pipe",Fe),O.flowing||(R("pipe resume"),Fe.resume()),Ie},ve.prototype.unpipe=function(Ie){var ne=this._readableState,Fe={hasUnpiped:!1};if(ne.pipesCount===0)return this;if(ne.pipesCount===1)return Ie&&Ie!==ne.pipes||(Ie||(Ie=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,Ie&&Ie.emit("unpipe",this,Fe)),this;if(!Ie){var O=ne.pipes,M=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var q=0;q<M;q++)O[q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=Pt(ne.pipes,Ie);return K===-1||(ne.pipes.splice(K,1),ne.pipesCount-=1,ne.pipesCount===1&&(ne.pipes=ne.pipes[0]),Ie.emit("unpipe",this,Fe)),this},ve.prototype.on=function(Ie,ne){var Fe=v.prototype.on.call(this,Ie,ne),O=this._readableState;return Ie==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):Ie==="readable"&&(O.endEmitted||O.readableListening||(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,R("on readable",O.length,O.reading),O.length?it(this):O.reading||process.nextTick(Oe,this))),Fe},ve.prototype.addListener=ve.prototype.on,ve.prototype.removeListener=function(Ie,ne){var Fe=v.prototype.removeListener.call(this,Ie,ne);return Ie==="readable"&&process.nextTick(At,this),Fe},ve.prototype.removeAllListeners=function(Ie){var ne=v.prototype.removeAllListeners.apply(this,arguments);return Ie!=="readable"&&Ie!==void 0||process.nextTick(At,this),ne},ve.prototype.resume=function(){var Ie=this._readableState;return Ie.flowing||(R("resume"),Ie.flowing=!Ie.readableListening,function(ne,Fe){Fe.resumeScheduled||(Fe.resumeScheduled=!0,process.nextTick(Qe,ne,Fe))}(this,Ie)),Ie.paused=!1,this},ve.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ve.prototype.wrap=function(Ie){var ne=this,Fe=this._readableState,O=!1;for(var M in Ie.on("end",function(){if(R("wrapped end"),Fe.decoder&&!Fe.ended){var K=Fe.decoder.end();K&&K.length&&ne.push(K)}ne.push(null)}),Ie.on("data",function(K){R("wrapped data"),Fe.decoder&&(K=Fe.decoder.write(K)),Fe.objectMode&&K==null||(Fe.objectMode||K&&K.length)&&(ne.push(K)||(O=!0,Ie.pause()))}),Ie)this[M]===void 0&&typeof Ie[M]=="function"&&(this[M]=function(K){return function(){return Ie[K].apply(Ie,arguments)}}(M));for(var q=0;q<de.length;q++)Ie.on(de[q],this.emit.bind(this,de[q]));return this._read=function(K){R("wrapped _read",K),O&&(O=!1,Ie.resume())},this},typeof Symbol=="function"&&(ve.prototype[Symbol.asyncIterator]=function(){return N===void 0&&(N=S(7299)),N(this)}),Object.defineProperty(ve.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ve.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ve.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ie){this._readableState&&(this._readableState.flowing=Ie)}}),ve._fromList=Qt,Object.defineProperty(ve.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ve.from=function(Ie,ne){return _===void 0&&(_=S(6233)),_(ve,Ie,ne)})},9798:function(b,g,S){b.exports=U;var F=S(3690).q,R=F.ERR_METHOD_NOT_IMPLEMENTED,y=F.ERR_MULTIPLE_CALLBACK,v=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,D=F.ERR_TRANSFORM_WITH_LENGTH_0,m=S(6138);function T(I,C){var j=this._transformState;j.transforming=!1;var Y=j.writecb;if(Y===null)return this.emit("error",new y);j.writechunk=null,j.writecb=null,C!=null&&this.push(C),Y(I);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function U(I){if(!(this instanceof U))return new U(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",N)}function N(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(C,j){_(I,C,j)})}function _(I,C,j){if(C)return I.emit("error",C);if(j!=null&&I.push(j),I._writableState.length)throw new D;if(I._transformState.transforming)throw new v;return I.push(null)}S(1765)(U,m),U.prototype.push=function(I,C){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,C)},U.prototype._transform=function(I,C,j){j(new R("_transform()"))},U.prototype._write=function(I,C,j){var Y=this._transformState;if(Y.writecb=j,Y.writechunk=I,Y.writeencoding=C,!Y.transforming){var $=this._readableState;(Y.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}},U.prototype._read=function(I){var C=this._transformState;C.writechunk===null||C.transforming?C.needTransform=!0:(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform))},U.prototype._destroy=function(I,C){m.prototype._destroy.call(this,I,function(j){C(j)})}},8318:function(b,g,S){function F(Ye){var lt=this;this.next=null,this.entry=null,this.finish=function(){(function(At,Oe,Qe){var ct=At.entry;for(At.entry=null;ct;){var Qt=ct.callback;Oe.pendingcb--,Qt(void 0),ct=ct.next}Oe.corkedRequestsFree.next=At})(lt,Ye)}}var R;b.exports=ve,ve.WritableState=oe;var y,v={deprecate:S(7839)},D=S(9299),m=S(1549).Buffer,T=S.g.Uint8Array||function(){},U=S(6163),N=S(7269).getHighWaterMark,_=S(3690).q,I=_.ERR_INVALID_ARG_TYPE,C=_.ERR_METHOD_NOT_IMPLEMENTED,j=_.ERR_MULTIPLE_CALLBACK,Y=_.ERR_STREAM_CANNOT_PIPE,$=_.ERR_STREAM_DESTROYED,W=_.ERR_STREAM_NULL_VALUES,ue=_.ERR_STREAM_WRITE_AFTER_END,x=_.ERR_UNKNOWN_ENCODING,X=U.errorOrDestroy;function de(){}function oe(Ye,lt,At){R=R||S(6138),Ye=Ye||{},typeof At!="boolean"&&(At=lt instanceof R),this.objectMode=!!Ye.objectMode,At&&(this.objectMode=this.objectMode||!!Ye.writableObjectMode),this.highWaterMark=N(this,Ye,"writableHighWaterMark",At),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Oe=Ye.decodeStrings===!1;this.decodeStrings=!Oe,this.defaultEncoding=Ye.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qe){(function(ct,Qt){var Kt=ct._writableState,Tt=Kt.sync,Pt=Kt.writecb;if(typeof Pt!="function")throw new j;if(function(ne){ne.writing=!1,ne.writecb=null,ne.length-=ne.writelen,ne.writelen=0}(Kt),Qt)(function(ne,Fe,O,M,q){--Fe.pendingcb,O?(process.nextTick(q,M),process.nextTick(st,ne,Fe),ne._writableState.errorEmitted=!0,X(ne,M)):(q(M),ne._writableState.errorEmitted=!0,X(ne,M),st(ne,Fe))})(ct,Kt,Tt,Qt,Pt);else{var Ie=Ze(Kt)||ct.destroyed;Ie||Kt.corked||Kt.bufferProcessing||!Kt.bufferedRequest||Ae(ct,Kt),Tt?process.nextTick(Xe,ct,Kt,Ie,Pt):Xe(ct,Kt,Ie,Pt)}})(lt,Qe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ye.emitClose!==!1,this.autoDestroy=!!Ye.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function ve(Ye){var lt=this instanceof(R=R||S(6138));if(!lt&&!y.call(ve,this))return new ve(Ye);this._writableState=new oe(Ye,this,lt),this.writable=!0,Ye&&(typeof Ye.write=="function"&&(this._write=Ye.write),typeof Ye.writev=="function"&&(this._writev=Ye.writev),typeof Ye.destroy=="function"&&(this._destroy=Ye.destroy),typeof Ye.final=="function"&&(this._final=Ye.final)),D.call(this)}function Ce(Ye,lt,At,Oe,Qe,ct,Qt){lt.writelen=Oe,lt.writecb=Qt,lt.writing=!0,lt.sync=!0,lt.destroyed?lt.onwrite(new $("write")):At?Ye._writev(Qe,lt.onwrite):Ye._write(Qe,ct,lt.onwrite),lt.sync=!1}function Xe(Ye,lt,At,Oe){At||function(Qe,ct){ct.length===0&&ct.needDrain&&(ct.needDrain=!1,Qe.emit("drain"))}(Ye,lt),lt.pendingcb--,Oe(),st(Ye,lt)}function Ae(Ye,lt){lt.bufferProcessing=!0;var At=lt.bufferedRequest;if(Ye._writev&&At&&At.next){var Oe=lt.bufferedRequestCount,Qe=new Array(Oe),ct=lt.corkedRequestsFree;ct.entry=At;for(var Qt=0,Kt=!0;At;)Qe[Qt]=At,At.isBuf||(Kt=!1),At=At.next,Qt+=1;Qe.allBuffers=Kt,Ce(Ye,lt,!0,lt.length,Qe,"",ct.finish),lt.pendingcb++,lt.lastBufferedRequest=null,ct.next?(lt.corkedRequestsFree=ct.next,ct.next=null):lt.corkedRequestsFree=new F(lt),lt.bufferedRequestCount=0}else{for(;At;){var Tt=At.chunk,Pt=At.encoding,Ie=At.callback;if(Ce(Ye,lt,!1,lt.objectMode?1:Tt.length,Tt,Pt,Ie),At=At.next,lt.bufferedRequestCount--,lt.writing)break}At===null&&(lt.lastBufferedRequest=null)}lt.bufferedRequest=At,lt.bufferProcessing=!1}function Ze(Ye){return Ye.ending&&Ye.length===0&&Ye.bufferedRequest===null&&!Ye.finished&&!Ye.writing}function it(Ye,lt){Ye._final(function(At){lt.pendingcb--,At&&X(Ye,At),lt.prefinished=!0,Ye.emit("prefinish"),st(Ye,lt)})}function st(Ye,lt){var At=Ze(lt);if(At&&(function(Qe,ct){ct.prefinished||ct.finalCalled||(typeof Qe._final!="function"||ct.destroyed?(ct.prefinished=!0,Qe.emit("prefinish")):(ct.pendingcb++,ct.finalCalled=!0,process.nextTick(it,Qe,ct)))}(Ye,lt),lt.pendingcb===0&&(lt.finished=!0,Ye.emit("finish"),lt.autoDestroy))){var Oe=Ye._readableState;(!Oe||Oe.autoDestroy&&Oe.endEmitted)&&Ye.destroy()}return At}S(1765)(ve,D),oe.prototype.getBuffer=function(){for(var Ye=this.bufferedRequest,lt=[];Ye;)lt.push(Ye),Ye=Ye.next;return lt},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ye){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(ve,Symbol.hasInstance,{value:function(Ye){return!!y.call(this,Ye)||this===ve&&Ye&&Ye._writableState instanceof oe}})):y=function(Ye){return Ye instanceof this},ve.prototype.pipe=function(){X(this,new Y)},ve.prototype.write=function(Ye,lt,At){var Oe,Qe=this._writableState,ct=!1,Qt=!Qe.objectMode&&(Oe=Ye,m.isBuffer(Oe)||Oe instanceof T);return Qt&&!m.isBuffer(Ye)&&(Ye=function(Kt){return m.from(Kt)}(Ye)),typeof lt=="function"&&(At=lt,lt=null),Qt?lt="buffer":lt||(lt=Qe.defaultEncoding),typeof At!="function"&&(At=de),Qe.ending?function(Kt,Tt){var Pt=new ue;X(Kt,Pt),process.nextTick(Tt,Pt)}(this,At):(Qt||function(Kt,Tt,Pt,Ie){var ne;return Pt===null?ne=new W:typeof Pt=="string"||Tt.objectMode||(ne=new I("chunk",["string","Buffer"],Pt)),!ne||(X(Kt,ne),process.nextTick(Ie,ne),!1)}(this,Qe,Ye,At))&&(Qe.pendingcb++,ct=function(Kt,Tt,Pt,Ie,ne,Fe){if(!Pt){var O=function(pe,ce,He){return pe.objectMode||pe.decodeStrings===!1||typeof ce!="string"||(ce=m.from(ce,He)),ce}(Tt,Ie,ne);Ie!==O&&(Pt=!0,ne="buffer",Ie=O)}var M=Tt.objectMode?1:Ie.length;Tt.length+=M;var q=Tt.length<Tt.highWaterMark;if(q||(Tt.needDrain=!0),Tt.writing||Tt.corked){var K=Tt.lastBufferedRequest;Tt.lastBufferedRequest={chunk:Ie,encoding:ne,isBuf:Pt,callback:Fe,next:null},K?K.next=Tt.lastBufferedRequest:Tt.bufferedRequest=Tt.lastBufferedRequest,Tt.bufferedRequestCount+=1}else Ce(Kt,Tt,!1,M,Ie,ne,Fe);return q}(this,Qe,Qt,Ye,lt,At)),ct},ve.prototype.cork=function(){this._writableState.corked++},ve.prototype.uncork=function(){var Ye=this._writableState;Ye.corked&&(Ye.corked--,Ye.writing||Ye.corked||Ye.bufferProcessing||!Ye.bufferedRequest||Ae(this,Ye))},ve.prototype.setDefaultEncoding=function(Ye){if(typeof Ye=="string"&&(Ye=Ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ye+"").toLowerCase())>-1))throw new x(Ye);return this._writableState.defaultEncoding=Ye,this},Object.defineProperty(ve.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ve.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ve.prototype._write=function(Ye,lt,At){At(new C("_write()"))},ve.prototype._writev=null,ve.prototype.end=function(Ye,lt,At){var Oe=this._writableState;return typeof Ye=="function"?(At=Ye,Ye=null,lt=null):typeof lt=="function"&&(At=lt,lt=null),Ye!=null&&this.write(Ye,lt),Oe.corked&&(Oe.corked=1,this.uncork()),Oe.ending||function(Qe,ct,Qt){ct.ending=!0,st(Qe,ct),Qt&&(ct.finished?process.nextTick(Qt):Qe.once("finish",Qt)),ct.ended=!0,Qe.writable=!1}(this,Oe,At),this},Object.defineProperty(ve.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ve.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ye){this._writableState&&(this._writableState.destroyed=Ye)}}),ve.prototype.destroy=U.destroy,ve.prototype._undestroy=U.undestroy,ve.prototype._destroy=function(Ye,lt){lt(Ye)}},7299:function(b,g,S){var F;function R(W,ue,x){return ue in W?Object.defineProperty(W,ue,{value:x,enumerable:!0,configurable:!0,writable:!0}):W[ue]=x,W}var y=S(8800),v=Symbol("lastResolve"),D=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),U=Symbol("lastPromise"),N=Symbol("handlePromise"),_=Symbol("stream");function I(W,ue){return{value:W,done:ue}}function C(W){var ue=W[v];if(ue!==null){var x=W[_].read();x!==null&&(W[U]=null,W[v]=null,W[D]=null,ue(I(x,!1)))}}function j(W){process.nextTick(C,W)}var Y=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((R(F={get stream(){return this[_]},next:function(){var W=this,ue=this[m];if(ue!==null)return Promise.reject(ue);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,ve){process.nextTick(function(){W[m]?ve(W[m]):oe(I(void 0,!0))})});var x,X=this[U];if(X)x=new Promise(function(oe,ve){return function(Ce,Xe){oe.then(function(){ve[T]?Ce(I(void 0,!0)):ve[N](Ce,Xe)},Xe)}}(X,this));else{var de=this[_].read();if(de!==null)return Promise.resolve(I(de,!1));x=new Promise(this[N])}return this[U]=x,x}},Symbol.asyncIterator,function(){return this}),R(F,"return",function(){var W=this;return new Promise(function(ue,x){W[_].destroy(null,function(X){X?x(X):ue(I(void 0,!0))})})}),F),Y);b.exports=function(W){var ue,x=Object.create($,(R(ue={},_,{value:W,writable:!0}),R(ue,v,{value:null,writable:!0}),R(ue,D,{value:null,writable:!0}),R(ue,m,{value:null,writable:!0}),R(ue,T,{value:W._readableState.endEmitted,writable:!0}),R(ue,N,{value:function(X,de){var oe=x[_].read();oe?(x[U]=null,x[v]=null,x[D]=null,X(I(oe,!1))):(x[v]=X,x[D]=de)},writable:!0}),ue));return x[U]=null,y(W,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var de=x[D];return de!==null&&(x[U]=null,x[v]=null,x[D]=null,de(X)),void(x[m]=X)}var oe=x[v];oe!==null&&(x[U]=null,x[v]=null,x[D]=null,oe(I(void 0,!0))),x[T]=!0}),W.on("readable",j.bind(null,x)),x}},8393:function(b,g,S){function F(T,U){var N=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);U&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),N.push.apply(N,_)}return N}function R(T,U,N){return U in T?Object.defineProperty(T,U,{value:N,enumerable:!0,configurable:!0,writable:!0}):T[U]=N,T}function y(T,U){for(var N=0;N<U.length;N++){var _=U[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var v=S(1549).Buffer,D=S(9862).inspect,m=D&&D.custom||"inspect";b.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var U,N;return U=T,N=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,C=""+I.data;I=I.next;)C+=_+I.data;return C}},{key:"concat",value:function(_){if(this.length===0)return v.alloc(0);for(var I,C,j,Y=v.allocUnsafe(_>>>0),$=this.head,W=0;$;)I=$.data,C=Y,j=W,v.prototype.copy.call(I,C,j),W+=$.data.length,$=$.next;return Y}},{key:"consume",value:function(_,I){var C;return _<this.head.data.length?(C=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):C=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),C}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,C=1,j=I.data;for(_-=j.length;I=I.next;){var Y=I.data,$=_>Y.length?Y.length:_;if($===Y.length?j+=Y:j+=Y.slice(0,_),(_-=$)==0){$===Y.length?(++C,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=Y.slice($));break}++C}return this.length-=C,j}},{key:"_getBuffer",value:function(_){var I=v.allocUnsafe(_),C=this.head,j=1;for(C.data.copy(I),_-=C.data.length;C=C.next;){var Y=C.data,$=_>Y.length?Y.length:_;if(Y.copy(I,I.length-_,0,$),(_-=$)==0){$===Y.length?(++j,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=Y.slice($));break}++j}return this.length-=j,I}},{key:m,value:function(_,I){return D(this,function(C){for(var j=1;j<arguments.length;j++){var Y=arguments[j]!=null?arguments[j]:{};j%2?F(Object(Y),!0).forEach(function($){R(C,$,Y[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(Y)):F(Object(Y)).forEach(function($){Object.defineProperty(C,$,Object.getOwnPropertyDescriptor(Y,$))})}return C}({},I,{depth:0,customInspect:!1}))}}],N&&y(U.prototype,N),T}()},6163:function(b){function g(R,y){F(R,y),S(R)}function S(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function F(R,y){R.emit("error",y)}b.exports={destroy:function(R,y){var v=this,D=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return D||m?(y?y(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(F,this,R)):process.nextTick(F,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(T){!y&&T?v._writableState?v._writableState.errorEmitted?process.nextTick(S,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,T)):process.nextTick(g,v,T):y?(process.nextTick(S,v),y(T)):process.nextTick(S,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(R,y){var v=R._readableState,D=R._writableState;v&&v.autoDestroy||D&&D.autoDestroy?R.destroy(y):R.emit("error",y)}}},8800:function(b,g,S){var F=S(3690).q.ERR_STREAM_PREMATURE_CLOSE;function R(){}b.exports=function y(v,D,m){if(typeof D=="function")return y(v,null,D);D||(D={}),m=function(ue){var x=!1;return function(){if(!x){x=!0;for(var X=arguments.length,de=new Array(X),oe=0;oe<X;oe++)de[oe]=arguments[oe];ue.apply(this,de)}}}(m||R);var T=D.readable||D.readable!==!1&&v.readable,U=D.writable||D.writable!==!1&&v.writable,N=function(){v.writable||I()},_=v._writableState&&v._writableState.finished,I=function(){U=!1,_=!0,T||m.call(v)},C=v._readableState&&v._readableState.endEmitted,j=function(){T=!1,C=!0,U||m.call(v)},Y=function(ue){m.call(v,ue)},$=function(){var ue;return T&&!C?(v._readableState&&v._readableState.ended||(ue=new F),m.call(v,ue)):U&&!_?(v._writableState&&v._writableState.ended||(ue=new F),m.call(v,ue)):void 0},W=function(){v.req.on("finish",I)};return function(ue){return ue.setHeader&&typeof ue.abort=="function"}(v)?(v.on("complete",I),v.on("abort",$),v.req?W():v.on("request",W)):U&&!v._writableState&&(v.on("end",N),v.on("close",N)),v.on("end",j),v.on("finish",I),D.error!==!1&&v.on("error",Y),v.on("close",$),function(){v.removeListener("complete",I),v.removeListener("abort",$),v.removeListener("request",W),v.req&&v.req.removeListener("finish",I),v.removeListener("end",N),v.removeListener("close",N),v.removeListener("finish",I),v.removeListener("end",j),v.removeListener("error",Y),v.removeListener("close",$)}}},6233:function(b){b.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(b,g,S){var F,R=S(3690).q,y=R.ERR_MISSING_ARGS,v=R.ERR_STREAM_DESTROYED;function D(_){if(_)throw _}function m(_,I,C,j){j=function(W){var ue=!1;return function(){ue||(ue=!0,W.apply(void 0,arguments))}}(j);var Y=!1;_.on("close",function(){Y=!0}),F===void 0&&(F=S(8800)),F(_,{readable:I,writable:C},function(W){if(W)return j(W);Y=!0,j()});var $=!1;return function(W){if(!Y&&!$)return $=!0,function(ue){return ue.setHeader&&typeof ue.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void j(W||new v("pipe"))}}function T(_){_()}function U(_,I){return _.pipe(I)}function N(_){return _.length?typeof _[_.length-1]!="function"?D:_.pop():D}b.exports=function(){for(var _=arguments.length,I=new Array(_),C=0;C<_;C++)I[C]=arguments[C];var j,Y=N(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new y("streams");var $=I.map(function(W,ue){var x=ue<I.length-1;return m(W,x,ue>0,function(X){j||(j=X),X&&$.forEach(T),x||($.forEach(T),Y(j))})});return I.reduce(U)}},7269:function(b,g,S){var F=S(3690).q.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(R,y,v,D){var m=function(T,U,N){return T.highWaterMark!=null?T.highWaterMark:U?T[N]:null}(y,D,v);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new F(D?v:"highWaterMark",m);return Math.floor(m)}return R.objectMode?16:16384}}},9299:function(b,g,S){b.exports=S(1159).EventEmitter},7503:function(b,g,S){var F=S(8387).Buffer,R=F.isEncoding||function(C){switch((C=""+C)&&C.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(C){var j;switch(this.encoding=function(Y){var $=function(W){if(!W)return"utf8";for(var ue;;)switch(W){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return W;default:if(ue)return;W=(""+W).toLowerCase(),ue=!0}}(Y);if(typeof $!="string"&&(F.isEncoding===R||!R(Y)))throw new Error("Unknown encoding: "+Y);return $||Y}(C),this.encoding){case"utf16le":this.text=m,this.end=T,j=4;break;case"utf8":this.fillLast=D,j=4;break;case"base64":this.text=U,this.end=N,j=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=F.allocUnsafe(j)}function v(C){return C<=127?0:C>>5==6?2:C>>4==14?3:C>>3==30?4:C>>6==2?-1:-2}function D(C){var j=this.lastTotal-this.lastNeed,Y=function($,W,ue){if((192&W[0])!=128)return $.lastNeed=0,"";if($.lastNeed>1&&W.length>1){if((192&W[1])!=128)return $.lastNeed=1,"";if($.lastNeed>2&&W.length>2&&(192&W[2])!=128)return $.lastNeed=2,""}}(this,C);return Y!==void 0?Y:this.lastNeed<=C.length?(C.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(C.copy(this.lastChar,j,0,C.length),void(this.lastNeed-=C.length))}function m(C,j){if((C.length-j)%2==0){var Y=C.toString("utf16le",j);if(Y){var $=Y.charCodeAt(Y.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1],Y.slice(0,-1)}return Y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=C[C.length-1],C.toString("utf16le",j,C.length-1)}function T(C){var j=C&&C.length?this.write(C):"";if(this.lastNeed){var Y=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,Y)}return j}function U(C,j){var Y=(C.length-j)%3;return Y===0?C.toString("base64",j):(this.lastNeed=3-Y,this.lastTotal=3,Y===1?this.lastChar[0]=C[C.length-1]:(this.lastChar[0]=C[C.length-2],this.lastChar[1]=C[C.length-1]),C.toString("base64",j,C.length-Y))}function N(C){var j=C&&C.length?this.write(C):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function _(C){return C.toString(this.encoding)}function I(C){return C&&C.length?this.write(C):""}g.s=y,y.prototype.write=function(C){if(C.length===0)return"";var j,Y;if(this.lastNeed){if((j=this.fillLast(C))===void 0)return"";Y=this.lastNeed,this.lastNeed=0}else Y=0;return Y<C.length?j?j+this.text(C,Y):this.text(C,Y):j||""},y.prototype.end=function(C){var j=C&&C.length?this.write(C):"";return this.lastNeed?j+"":j},y.prototype.text=function(C,j){var Y=function(W,ue,x){var X=ue.length-1;if(X<x)return 0;var de=v(ue[X]);return de>=0?(de>0&&(W.lastNeed=de-1),de):--X<x||de===-2?0:(de=v(ue[X]))>=0?(de>0&&(W.lastNeed=de-2),de):--X<x||de===-2?0:(de=v(ue[X]))>=0?(de>0&&(de===2?de=0:W.lastNeed=de-3),de):0}(this,C,j);if(!this.lastNeed)return C.toString("utf8",j);this.lastTotal=Y;var $=C.length-(Y-this.lastNeed);return C.copy(this.lastChar,0,$),C.toString("utf8",j,$)},y.prototype.fillLast=function(C){if(this.lastNeed<=C.length)return C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);C.copy(this.lastChar,this.lastTotal-this.lastNeed,0,C.length),this.lastNeed-=C.length}},1067:function(b,g,S){var F;(function(R,y){var v="function",D="undefined",m="object",T="string",U="major",N="model",_="name",I="type",C="vendor",j="version",Y="architecture",$="console",W="mobile",ue="tablet",x="smarttv",X="wearable",de="embedded",oe="Amazon",ve="Apple",Ce="ASUS",Xe="BlackBerry",Ae="Browser",Ze="Chrome",it="Firefox",st="Google",Ye="Huawei",lt="LG",At="Microsoft",Oe="Motorola",Qe="Opera",ct="Samsung",Qt="Sharp",Kt="Sony",Tt="Xiaomi",Pt="Zebra",Ie="Facebook",ne="Chromium OS",Fe="Mac OS",O=function(ft){for(var vt={},Et=0;Et<ft.length;Et++)vt[ft[Et].toUpperCase()]=ft[Et];return vt},M=function(ft,vt){return typeof ft===T&&q(vt).indexOf(q(ft))!==-1},q=function(ft){return ft.toLowerCase()},K=function(ft,vt){if(typeof ft===T)return ft=ft.replace(/^\s\s*/,""),typeof vt===D?ft:ft.substring(0,500)},pe=function(ft,vt){for(var Et,Ct,hn,Xt,nn,Ot,Un=0;Un<vt.length&&!nn;){var gr=vt[Un],Pr=vt[Un+1];for(Et=Ct=0;Et<gr.length&&!nn&&gr[Et];)if(nn=gr[Et++].exec(ft))for(hn=0;hn<Pr.length;hn++)Ot=nn[++Ct],typeof(Xt=Pr[hn])===m&&Xt.length>0?Xt.length===2?typeof Xt[1]==v?this[Xt[0]]=Xt[1].call(this,Ot):this[Xt[0]]=Xt[1]:Xt.length===3?typeof Xt[1]!==v||Xt[1].exec&&Xt[1].test?this[Xt[0]]=Ot?Ot.replace(Xt[1],Xt[2]):y:this[Xt[0]]=Ot?Xt[1].call(this,Ot,Xt[2]):y:Xt.length===4&&(this[Xt[0]]=Ot?Xt[3].call(this,Ot.replace(Xt[1],Xt[2])):y):this[Xt]=Ot||y;Un+=2}},ce=function(ft,vt){for(var Et in vt)if(typeof vt[Et]===m&&vt[Et].length>0){for(var Ct=0;Ct<vt[Et].length;Ct++)if(M(vt[Et][Ct],ft))return Et==="?"?y:Et}else if(M(vt[Et],ft))return Et==="?"?y:Et;return ft},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_t={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,j],[/opios[\/ ]+([\w\.]+)/i],[j,[_,Qe+" Mini"]],[/\bopr\/([\w\.]+)/i],[j,[_,Qe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[j,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,j],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[_,"UC"+Ae]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[j,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[j,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[j,[_,"Smart Lenovo "+Ae]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Ae],j],[/\bfocus\/([\w\.]+)/i],[j,[_,it+" Focus"]],[/\bopt\/([\w\.]+)/i],[j,[_,Qe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[_,Qe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[_,"MIUI "+Ae]],[/fxios\/([-\w\.]+)/i],[j,[_,it]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Ae]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Ae],j],[/samsungbrowser\/([\w\.]+)/i],[j,[_,ct+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],j],[/metasr[\/ ]?([\d\.]+)/i],[j,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,j],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Ie],j],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,j],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[j,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[_,Ze+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Ze+" WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[_,"Android "+Ae]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,j],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[j,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[j,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[j,ce,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[_,it+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,j],[/(cobalt)\/([\w\.]+)/i],[_,[j,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,q]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[N,[C,ct],[I,ue]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[N,[C,ct],[I,W]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[N,[C,ve],[I,W]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[N,[C,ve],[I,ue]],[/(macintosh);/i],[N,[C,ve]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[N,[C,Qt],[I,W]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[N,[C,Ye],[I,ue]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[N,[C,Ye],[I,W]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[N,/_/g," "],[C,Tt],[I,W]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[N,/_/g," "],[C,Tt],[I,ue]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[N,[C,"OPPO"],[I,W]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[N,[C,"Vivo"],[I,W]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[N,[C,"Realme"],[I,W]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[N,[C,Oe],[I,W]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[N,[C,Oe],[I,ue]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[N,[C,lt],[I,ue]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[N,[C,lt],[I,W]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[N,[C,"Lenovo"],[I,ue]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[N,/_/g," "],[C,"Nokia"],[I,W]],[/(pixel c)\b/i],[N,[C,st],[I,ue]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[N,[C,st],[I,W]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[N,[C,Kt],[I,W]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[N,"Xperia Tablet"],[C,Kt],[I,ue]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[N,[C,"OnePlus"],[I,W]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[N,[C,oe],[I,ue]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[N,/(.+)/g,"Fire Phone $1"],[C,oe],[I,W]],[/(playbook);[-\w\),; ]+(rim)/i],[N,C,[I,ue]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[N,[C,Xe],[I,W]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[N,[C,Ce],[I,ue]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[N,[C,Ce],[I,W]],[/(nexus 9)/i],[N,[C,"HTC"],[I,ue]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[C,[N,/_/g," "],[I,W]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[N,[C,"Acer"],[I,ue]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[N,[C,"Meizu"],[I,W]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[N,[C,"Ulefone"],[I,W]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[C,N,[I,W]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[C,N,[I,ue]],[/(surface duo)/i],[N,[C,At],[I,ue]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[N,[C,"Fairphone"],[I,W]],[/(u304aa)/i],[N,[C,"AT&T"],[I,W]],[/\bsie-(\w*)/i],[N,[C,"Siemens"],[I,W]],[/\b(rct\w+) b/i],[N,[C,"RCA"],[I,ue]],[/\b(venue[\d ]{2,7}) b/i],[N,[C,"Dell"],[I,ue]],[/\b(q(?:mv|ta)\w+) b/i],[N,[C,"Verizon"],[I,ue]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[N,[C,"Barnes & Noble"],[I,ue]],[/\b(tm\d{3}\w+) b/i],[N,[C,"NuVision"],[I,ue]],[/\b(k88) b/i],[N,[C,"ZTE"],[I,ue]],[/\b(nx\d{3}j) b/i],[N,[C,"ZTE"],[I,W]],[/\b(gen\d{3}) b.+49h/i],[N,[C,"Swiss"],[I,W]],[/\b(zur\d{3}) b/i],[N,[C,"Swiss"],[I,ue]],[/\b((zeki)?tb.*\b) b/i],[N,[C,"Zeki"],[I,ue]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[C,"Dragon Touch"],N,[I,ue]],[/\b(ns-?\w{0,9}) b/i],[N,[C,"Insignia"],[I,ue]],[/\b((nxa|next)-?\w{0,9}) b/i],[N,[C,"NextBook"],[I,ue]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[C,"Voice"],N,[I,W]],[/\b(lvtel\-)?(v1[12]) b/i],[[C,"LvTel"],N,[I,W]],[/\b(ph-1) /i],[N,[C,"Essential"],[I,W]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[N,[C,"Envizen"],[I,ue]],[/\b(trio[-\w\. ]+) b/i],[N,[C,"MachSpeed"],[I,ue]],[/\btu_(1491) b/i],[N,[C,"Rotor"],[I,ue]],[/(shield[\w ]+) b/i],[N,[C,"Nvidia"],[I,ue]],[/(sprint) (\w+)/i],[C,N,[I,W]],[/(kin\.[onetw]{3})/i],[[N,/\./g," "],[C,At],[I,W]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[N,[C,Pt],[I,ue]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[N,[C,Pt],[I,W]],[/smart-tv.+(samsung)/i],[C,[I,x]],[/hbbtv.+maple;(\d+)/i],[[N,/^/,"SmartTV"],[C,ct],[I,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[C,lt],[I,x]],[/(apple) ?tv/i],[C,[N,ve+" TV"],[I,x]],[/crkey/i],[[N,Ze+"cast"],[C,st],[I,x]],[/droid.+aft(\w+)( bui|\))/i],[N,[C,oe],[I,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[N,[C,Qt],[I,x]],[/(bravia[\w ]+)( bui|\))/i],[N,[C,Kt],[I,x]],[/(mitv-\w{5}) bui/i],[N,[C,Tt],[I,x]],[/Hbbtv.*(technisat) (.*);/i],[C,N,[I,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[C,K],[N,K],[I,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[C,N,[I,$]],[/droid.+; (shield) bui/i],[N,[C,"Nvidia"],[I,$]],[/(playstation [345portablevi]+)/i],[N,[C,Kt],[I,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[N,[C,At],[I,$]],[/((pebble))app/i],[C,N,[I,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[N,[C,ve],[I,X]],[/droid.+; (glass) \d/i],[N,[C,st],[I,X]],[/droid.+; (wt63?0{2,3})\)/i],[N,[C,Pt],[I,X]],[/(quest( 2| pro)?)/i],[N,[C,Ie],[I,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[C,[I,de]],[/(aeobc)\b/i],[N,[C,oe],[I,de]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[N,[I,W]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[N,[I,ue]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,ue]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,W]],[/(android[-\w\. ]{0,9});.+buil/i],[N,[C,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,j],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,j],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[j,ce,He]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[j,ce,He],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Fe],[j,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[j,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,j],[/\(bb(10);/i],[j,[_,Xe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[j,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[_,it+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[j,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[j,[_,Ze+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,ne],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,j],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],j],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,j]]},ot=function(ft,vt){if(typeof ft===m&&(vt=ft,ft=y),!(this instanceof ot))return new ot(ft,vt).getResult();var Et=typeof R!==D&&R.navigator?R.navigator:y,Ct=ft||(Et&&Et.userAgent?Et.userAgent:""),hn=Et&&Et.userAgentData?Et.userAgentData:y,Xt=vt?function(Ot,Un){var gr={};for(var Pr in Ot)Un[Pr]&&Un[Pr].length%2==0?gr[Pr]=Un[Pr].concat(Ot[Pr]):gr[Pr]=Ot[Pr];return gr}(_t,vt):_t,nn=Et&&Et.userAgent==Ct;return this.getBrowser=function(){var Ot,Un={};return Un[_]=y,Un[j]=y,pe.call(Un,Ct,Xt.browser),Un[U]=typeof(Ot=Un[j])===T?Ot.replace(/[^\d\.]/g,"").split(".")[0]:y,nn&&Et&&Et.brave&&typeof Et.brave.isBrave==v&&(Un[_]="Brave"),Un},this.getCPU=function(){var Ot={};return Ot[Y]=y,pe.call(Ot,Ct,Xt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[C]=y,Ot[N]=y,Ot[I]=y,pe.call(Ot,Ct,Xt.device),nn&&!Ot[I]&&hn&&hn.mobile&&(Ot[I]=W),nn&&Ot[N]=="Macintosh"&&Et&&typeof Et.standalone!==D&&Et.maxTouchPoints&&Et.maxTouchPoints>2&&(Ot[N]="iPad",Ot[I]=ue),Ot},this.getEngine=function(){var Ot={};return Ot[_]=y,Ot[j]=y,pe.call(Ot,Ct,Xt.engine),Ot},this.getOS=function(){var Ot={};return Ot[_]=y,Ot[j]=y,pe.call(Ot,Ct,Xt.os),nn&&!Ot[_]&&hn&&hn.platform!="Unknown"&&(Ot[_]=hn.platform.replace(/chrome os/i,ne).replace(/macos/i,Fe)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===T&&Ot.length>500?K(Ot,500):Ot,this},this.setUA(Ct),this};ot.VERSION="1.0.37",ot.BROWSER=O([_,j,U]),ot.CPU=O([Y]),ot.DEVICE=O([N,C,I,$,W,x,ue,X,de]),ot.ENGINE=ot.OS=O([_,j]),typeof g!==D?(b.exports&&(g=b.exports=ot),g.UAParser=ot):S.amdO?(F=(function(){return ot}).call(g,S,g,b))===y||(b.exports=F):typeof R!==D&&(R.UAParser=ot);var rt=typeof R!==D&&(R.jQuery||R.Zepto);if(rt&&!rt.ua){var et=new ot;rt.ua=et.getResult(),rt.ua.get=function(){return et.getUA()},rt.ua.set=function(ft){et.setUA(ft);var vt=et.getResult();for(var Et in vt)rt.ua[Et]=vt[Et]}}})(typeof window=="object"?window:this)},7839:function(b,g,S){function F(R){try{if(!S.g.localStorage)return!1}catch(v){return!1}var y=S.g.localStorage[R];return y!=null&&String(y).toLowerCase()==="true"}b.exports=function(R,y){if(F("noDeprecation"))return R;var v=!1;return function(){if(!v){if(F("throwDeprecation"))throw new Error(y);F("traceDeprecation")?console.trace(y):console.warn(y),v=!0}return R.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(b){b.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(b){b.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(b){b.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(b){b.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(b){b.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(b){b.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},f={};function p(b){var g=f[b];if(g!==void 0)return g.exports;var S=f[b]={exports:{}};return l[b].call(S.exports,S,S.exports,p),S.exports}p.amdO={},p.n=function(b){var g=b&&b.__esModule?function(){return b.default}:function(){return b};return p.d(g,{a:g}),g},p.d=function(b,g){for(var S in g)p.o(g,S)&&!p.o(b,S)&&Object.defineProperty(b,S,{enumerable:!0,get:g[S]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(b){if(typeof window=="object")return window}}(),p.o=function(b,g){return Object.prototype.hasOwnProperty.call(b,g)};var w={};return function(){p.d(w,{default:function(){return m}}),p(8416);var b,g=p(1715),S=p(8080),F=p(1737),R=p(1139),y=function(){var T,U="application/dash+xml";function N(I,C,j){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var Y,$=I.id||I.name||"video element";if(!(C=C||[].slice.call(I.querySelectorAll("source")).filter(function(W){return W.type==U})[0])&&I.src)(C=document.createElement("source")).src=I.src;else if(!C&&!I.src)return null;return j=j||{},(Y=(0,R.Z)(j).create()).initialize(I,C.src,I.autoplay),T||(T=Y.getDebug().getLogger()),T.debug("Converted "+$+" to dash.js player and added content: "+C.src),I._dashjs_player=Y,Y}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:N,createAll:function(I,C){var j=[];I=I||"[data-dashjs-player]";for(var Y=(C=C||document).querySelectorAll(I),$=0;$<Y.length;$++){var W=N(Y[$],null);j.push(W)}for(var ue=C.querySelectorAll('source[type="'+U+'"]'),x=0;x<ue.length;x++){var X=N(_(ue[x]),null);j.push(X)}return j}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?y.createAll():b=window.setInterval(function(){window.dashjs&&(window.clearInterval(b),y.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),y.createAll()}));var v=y,D=p(6398);dashjs.Protection=F.default,dashjs.MetricsReporting=S.default,dashjs.MediaPlayerFactory=v,dashjs.Debug=D.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),w.default}()})})(qU);var Az=qU.exports;const Iz=Eb(Az);var bu,Gi,DA,PA,gg={};gg.d=(i,o)=>{for(var l in o)gg.o(o,l)&&!gg.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:o[l]})},gg.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o);var pE={};function u3(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,f=Array(o);l<o;l++)f[l]=i[l];return f}function Xi(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},f=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),f.forEach(function(p){var w;w=l[p],p in i?Object.defineProperty(i,p,{value:w,enumerable:!0,configurable:!0,writable:!0}):i[p]=w})}return i}function so(i,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):function(l,f){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);p.push.apply(p,w)}return p}(Object(o)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(o,l))}),i}function l3(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,f){var p,w,b=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(b!=null){var g=[],S=!0,F=!1;try{for(b=b.call(l);!(S=(p=b.next()).done)&&(g.push(p.value),!f||g.length!==f);S=!0);}catch(R){F=!0,w=R}finally{try{S||b.return==null||b.return()}finally{if(F)throw w}}return g}}(i,o)||function(l,f){if(l){if(typeof l=="string")return u3(l,f);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return u3(l,f)}}(i,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}gg.d(pE,{GP:()=>DA,fZ:()=>Cz,vn:()=>PA}),(bu=DA||(DA={})).LOADED="loaded",bu.SEEKING="seeking",bu.SEEKED="seeked",bu.BUFFERING="buffering",bu.BUFFERED="buffered",bu.PLAY="play",bu.PLAYING="playing",bu.PAUSE="pause",bu.ENDED="ended",bu.TIME_UPDATE="timeupdate",(Gi=PA||(PA={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var bz={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},Cz=function(i){var o=i.mediaElement,l=i.callback,f=i.allowResumeAfterEnded,p=f!==void 0&&f,w=null,b=function(){typeof w=="number"&&clearTimeout(w)},g=Xi({},bz),S=function(){return p?g.loading:g.loading||g.ended},F=function(){!g.loading&&g.buffering&&o.playbackRate>0&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),g.loading&&(o.playbackRate===0?g=so(Xi({},g),{deferLoadedEvent:!0}):(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},R=function(){S()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=so(Xi({},g),{seeking:!0,buffering:!1}),l("seeking"))},y=function(){if(!S()&&g.seeking){if(o.playbackRate===0){g=so(Xi({},g),{deferSeekedEvent:!0});return}g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},v=function(){if(b(),!S()&&!g.seeking){if(o.seeking){R();return}g.buffering||(g=so(Xi({},g),{buffering:!0}),l("buffering"))}},D=function(){if(b(),o.playbackRate===0){g=so(Xi({},g),{deferPlayingEvent:!0});return}(g=so(Xi({},g),{deferPlayingEvent:!1})).loading&&F(),g.initialPlayFired?g.buffering?(g=so(Xi({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=so(Xi({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=so(Xi({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&o.playbackRate===0&&!o.seeking},T=[["canplaythrough",F],["playing",D],["waiting",v],["seeking",R],["seeked",y],["ended",function(){g=so(Xi({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),b(),l("ended")}],["timeupdate",function(){S()||(g.buffering&&!o.paused&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!S()&&g.paused&&g.initialPlayFired&&(g=so(Xi({},g),{playRequested:!0}),l("play"))}],["pause",function(){!o.ended&&(g.playRequested||!g.paused)&&((g=so(Xi({},g),{playRequested:!1})).deferLoadedEvent?(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),o.paused&&(g=so(Xi({},g),{paused:!0}),l("pause"))):(g=so(Xi({},g),{paused:!0}),l("pause")))}],["ratechange",function(){b();var U=o.playbackRate>0;g.deferLoadedEvent&&U&&F(),g.deferSeekedEvent&&U&&y(),g.deferPlayingEvent&&U&&D(),!S()&&(m()?w=window.setTimeout(function(){m()&&v()},50):g.buffering&&U&&(g=so(Xi({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(U){var N=l3(U,2),_=N[0],I=N[1];return o.addEventListener(_,I)}),{teardown:function(){b(),T.forEach(function(U){var N=l3(U,2),_=N[0],I=N[1];return o.removeEventListener(_,I)})}}},Cu=pE.GP;pE.vn;var Rz=pE.fZ;const xz={NEAR_END:"nearend"};class HU extends Af{constructor(o){var l;super(),this.options=o,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(o){return{currentTime:o.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=Rz({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:o=>{const l=this.createBaseEventPayload(this.video);switch(o){case Cu.LOADED:{this.emit("loaded",l);break}case Cu.SEEKING:{this.emit("seeking",l);break}case Cu.SEEKED:{this.emit("seeked",l);break}case Cu.BUFFERING:{this.emit("buffering",l);break}case Cu.BUFFERED:{this.emit("buffered",l);break}case Cu.PLAY:{this.emit("play",l);break}case Cu.PLAYING:{this.emit("playing",l);break}case Cu.PAUSE:{this.emit("pause",l);break}case Cu.ENDED:{this.emit("ended",l);break}case Cu.TIME_UPDATE:{const f=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&f>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&f<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(xz.NEAR_END,{...l,remainingTime:f})),this.emit("timeupdate",l);break}}}})}destroy(){var o;(o=this.eventFilter)==null||o.teardown()}getStats(){const o=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:o.droppedVideoFrames,totalVideoFrames:o.totalVideoFrames}}}class Nz extends Error{constructor(o,l){super(o),this.rawError=l}}class Mz extends HU{constructor(o){var f,p;super(o),this.name="DashJSEngine",this.player=Iz.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(w){return w+o.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(f=this.options)==null?void 0:f.widevineLicenseUrl,httpRequestHeaders:o.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(o,l){this.setupMediaEventFilter(),await new Promise((f,p)=>{var w;this.once("loaded",()=>{f()});try{this.player.attachSource(o,Math.max((w=l==null?void 0:l.startTimeSeconds)!=null?w:0,0))}catch(b){p(new Nz("UnknownError",b))}})}}var KU={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(i){(function(){var o=typeof window<"u"?window:nu,l={};(function(p,w,b){var g;function S(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var F=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function R(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof w=="object"&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=R(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&F(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,d){this.g=c,F(this,"description",{configurable:!0,writable:!0,value:d})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&F(r.prototype,e,{configurable:!0,writable:!0,value:function(){return D(S(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:S(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},N;if(typeof Object.setPrototypeOf=="function")N=Object.setPrototypeOf;else{var _;e:{var I={a:!0},C={};try{C.__proto__=I,_=C.a;break e}catch(e){}_=!1}N=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var j=N;function Y(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,j)j(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Ij=t.prototype}function $(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function W(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}$.prototype.s=function(e){this.h=e};function ue(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}$.prototype.return=function(e){this.i={return:e},this.g=this.j};function x(e,t,n){return e.g=n,{value:t}}$.prototype.u=function(e){this.g=e};function X(e){e.g=0}function de(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function ve(e,t,n){e.g=t,e.m=n||0}function Ce(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function Xe(e){e.A=[e.i],e.m=0,e.j=0}function Ae(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Ze(e){this.g=new $,this.h=e}function it(e,t){W(e.g);var n=e.g.l;return n?st(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),Ye(e))}function st(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(d){return e.g.l=null,ue(e.g,d),Ye(e)}return e.g.l=null,r.call(e.g,c),Ye(e)}function Ye(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,ue(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function lt(e){this.next=function(t){return W(e.g),e.g.l?t=st(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Ye(e)),t},this.throw=function(t){return W(e.g),e.g.l?t=st(e,e.g.l.throw,t,e.g.s):(ue(e.g,t),t=Ye(e)),t},this.return=function(t){return it(e,t)},this[Symbol.iterator]=function(){return this}}function At(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(d){d.done?r(d.value):Promise.resolve(d.value).then(t,n).then(c,u)}c(e.next())})}function Oe(e){return At(new lt(new Ze(e)))}function Qe(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(d){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{d(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function r(d){return d instanceof t?d:new t(function(h){h(d)})}if(e)return e;n.prototype.h=function(d){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(d)};var u=y.setTimeout;n.prototype.i=function(d){u(d,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var d=this.g;this.g=[];for(var h=0;h<d.length;++h){var E=d[h];d[h]=null;try{E()}catch(A){this.j(A)}}}this.g=null},n.prototype.j=function(d){this.i(function(){throw d})},t.prototype.j=function(){function d(A){return function(k){E||(E=!0,A.call(h,k))}}var h=this,E=!1;return{resolve:d(this.F),reject:d(this.l)}},t.prototype.F=function(d){if(d===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof t)this.H(d);else{e:switch(typeof d){case"object":var h=d!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(d):this.m(d)}},t.prototype.C=function(d){var h=void 0;try{h=d.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,d):this.m(d)},t.prototype.l=function(d){this.s(2,d)},t.prototype.m=function(d){this.s(1,d)},t.prototype.s=function(d,h){if(this.h!=0)throw Error("Cannot settle("+d+", "+h+"): Promise already settled in state"+this.h);this.h=d,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var d=this;u(function(){if(d.B()){var h=y.console;typeof h<"u"&&h.error(d.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var d=y.CustomEvent,h=y.Event,E=y.dispatchEvent;return typeof E>"u"?!0:(typeof d=="function"?d=new d("unhandledrejection",{cancelable:!0}):typeof h=="function"?d=new h("unhandledrejection",{cancelable:!0}):(d=y.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d)),d.promise=this,d.reason=this.i,E(d))},t.prototype.A=function(){if(this.g!=null){for(var d=0;d<this.g.length;++d)c.h(this.g[d]);this.g=null}};var c=new n;return t.prototype.H=function(d){var h=this.j();d.Fd(h.resolve,h.reject)},t.prototype.I=function(d,h){var E=this.j();try{d.call(h,E.resolve,E.reject)}catch(A){E.reject(A)}},t.prototype.then=function(d,h){function E(te,z){return typeof te=="function"?function(ye){try{A(te(ye))}catch(Pe){k(Pe)}}:z}var A,k,G=new t(function(te,z){A=te,k=z});return this.Fd(E(d,A),E(h,k)),G},t.prototype.catch=function(d){return this.then(void 0,d)},t.prototype.Fd=function(d,h){function E(){switch(A.h){case 1:d(A.i);break;case 2:h(A.i);break;default:throw Error("Unexpected state: "+A.h)}}var A=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=r,t.reject=function(d){return new t(function(h,E){E(d)})},t.race=function(d){return new t(function(h,E){for(var A=m(d),k=A.next();!k.done;k=A.next())r(k.value).Fd(h,E)})},t.all=function(d){var h=m(d),E=h.next();return E.done?r([]):new t(function(A,k){function G(ye){return function(Pe){te[ye]=Pe,z--,z==0&&A(te)}}var te=[],z=0;do te.push(void 0),z++,r(E.value).Fd(G(te.length-1),k),E=h.next();while(!E.done)})},t});function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var A;!(A=E.next()).done;)A=A.value,this.set(A[0],A[1])}}function n(){}function r(E){var A=typeof E;return A==="object"&&E!==null||A==="function"}function u(E){if(!ct(E,d)){var A=new n;F(E,d,{value:A})}}function c(E){var A=Object[E];A&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),A(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),A=Object.seal({}),k=new e([[E,2],[A,3]]);return k.get(E)!=2||k.get(A)!=3?!1:(k.delete(E),k.set(A,4),!k.has(E)&&k.get(A)==4)}catch(G){return!1}}())return e;var d="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,A){if(!r(E))throw Error("Invalid WeakMap key");if(u(E),!ct(E,d))throw Error("WeakMap key fail: "+E);return E[d][this.g]=A,this},t.prototype.get=function(E){return r(E)&&ct(E,d)?E[d][this.g]:void 0},t.prototype.has=function(E){return r(E)&&ct(E,d)&&ct(E[d],this.g)},t.prototype.delete=function(E){return r(E)&&ct(E,d)&&ct(E[d],this.g)?delete E[d][this.g]:!1},t}),v("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var A=h.g;return D(function(){if(A){for(;A.head!=h.g;)A=A.Ab;for(;A.next!=A.head;)return A=A.next,{done:!1,value:E(A)};A=null}return{done:!0,value:void 0}})}function r(h,E){var A=E&&typeof E;A=="object"||A=="function"?c.has(E)?A=c.get(E):(A=""+ ++d,c.set(E,A)):A="p_"+E;var k=h.h[A];if(k&&ct(h.h,A))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:A,list:k,index:h,entry:G}}return{id:A,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var A=E.entries(),k=A.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=A.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!A.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var A=r(this,h);return A.list||(A.list=this.h[A.id]=[]),A.entry?A.entry.value=E:(A.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},A.list.push(A.entry),this.g.Ab.next=A.entry,this.g.Ab=A.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var A=this.entries(),k;!(k=A.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var d=0;return u}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(d){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function Qt(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}v("Array.prototype.keys",function(e){return e||function(){return Qt(this,function(t){return t})}});function Kt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return Kt(this,t,n).gg}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function Tt(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return Tt(this,t,"includes").indexOf(t,n||0)!==-1}}),v("Array.prototype.find",function(e){return e||function(t,n){return Kt(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var r=Tt(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var d=0;d<c&&n<u;)if(r[n++]!=t[d++])return!1;return d>=c}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),v("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var d=0;!(c=t.next()).done;)u.push(n.call(r,c.value,d++))}else for(c=t.length,d=0;d<c;d++)u.push(n.call(r,t[d],d));return u}});var Pt=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)ct(r,u)&&(e[u]=r[u])}return e};v("Object.assign",function(e){return e||Pt}),v("Array.prototype.values",function(e){return e||function(){return Qt(this,function(t,n){return n})}}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return Qt(this,function(t,n){return[t,n]})}}),v("String.prototype.repeat",function(e){return e||function(t){var n=Tt(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ct(t,r)&&n.push(t[r]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ct(t,r)&&n.push([r,t[r]]);return n}});var Ie=this||self;function ne(e,t){e=e.split(".");var n=Ie;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Fe(){}function O(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function pe(){}function ce(){}function He(){}function _t(e){var t=Qe.apply(1,arguments);ft.has(e)||(ft.add(e),He.apply(pe,T(t)))}function ot(){}function rt(){}function et(){}var ft=new Set;p.console&&(He=function(){return console.warn.apply(console,T(Qe.apply(0,arguments)))},ce=function(){console.error.apply(console,T(Qe.apply(0,arguments)))});function vt(){this.g={}}g=vt.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function Et(){this.g=new vt}g=Et.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,r){this.g&&(e=new Ct(e,t,n,r),this.g.push(t,e))},g.na=function(e,t,n,r){function u(d){c.Kb(e,t,u),n(d)}var c=this;this.D(e,t,u,r)},g.Kb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},ne("shaka.util.EventManager",Et),Et.prototype.removeAll=Et.prototype.ib,Et.prototype.unlisten=Et.prototype.Kb,Et.prototype.listenOnce=Et.prototype.na,Et.prototype.listen=Et.prototype.D,Et.prototype.release=Et.prototype.release;function Ct(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=hn(e,r),this.target.addEventListener(t,n,this.g)}Ct.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function hn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Xt(e)?t:t.capture||!1}function Xt(e){var t=nn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Ot(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Pr(e,t){this.g=e,this.h=t}Pr.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Pr(5,0),r=Or,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function ei(e,t,n,r){He([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Ji(e,t,n,r){ce([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Or=null;function eo(){}eo.prototype.extract=function(){},eo.prototype.decode=function(){return[]},eo.prototype.clear=function(){},eo.prototype.getStreams=function(){return[]};function _i(){}_i.prototype.init=function(){},_i.prototype.parse=function(){return[]};function Mi(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(to(e)==to(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function to(e){return e instanceof ArrayBuffer?e:e.buffer}function Ti(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function Ou(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,r){var u=to(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var d=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,d))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),d))-e)}ne("shaka.util.BufferUtils",Mi),Mi.toDataView=tn,Mi.toUint16=Ou,Mi.toUint8=Qn,Mi.toArrayBuffer=Ti,Mi.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},ne("shaka.media.IClosedCaptionParser",an);function St(e){this.l=new _i,(e=zt[e.toLowerCase()])&&(this.l=e()),this.g=new eo,(e=Nt)&&(this.g=e())}St.prototype.init=function(e){this.l.init(e)},St.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},St.prototype.h=function(){this.g.clear()},St.prototype.j=function(){return this.g.getStreams()},ne("shaka.media.ClosedCaptionParser",St),St.findDecoder=function(){return Nt},St.unregisterDecoder=function(){Nt=null},St.registerDecoder=function(e){Nt=e},St.findParser=function(e){return zt[e]},St.unregisterParser=function(e){delete zt[e]},St.registerParser=function(e,t){zt[e]=t};var zt={},Nt=null;function Vt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function mn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;t=t.slice();var r={};e=m(e);for(var u=e.next();!u.done;r={ne:r.ne},u=e.next()){if(r.ne=u.value,u=t.findIndex(function(c){return function(d){return n(c.ne,d)}}(r)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=Vt),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Cn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Vn,this.writingMode=rn,this.lineInterpretation=cn,this.line=null,this.lineHeight="",this.lineAlign=bn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Lr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}Cn.prototype.clone=function(){var e=new Cn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}ne("shaka.text.Cue",Cn),Cn.equal=on,Cn.prototype.clone=Cn.prototype.clone;var Bn="auto";Cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};Cn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};Cn.displayAlign=Ur;var Vn="ltr";Cn.direction={HORIZONTAL_LEFT_TO_RIGHT:Vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";Cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var cn=0;Cn.lineInterpretation={LINE_NUMBER:cn,PERCENTAGE:1};var bn="start",Jn={CENTER:"center",START:bn,END:"end"};Cn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Cn.defaultTextColor=ar;var br={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Cn.defaultTextBackgroundColor=br;var Lr=400;Cn.fontWeight={NORMAL:Lr,BOLD:700};var Yi="normal",no={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};Cn.fontStyle=no,Cn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=hi}ne("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var hi="";Br.scrollMode={NONE:hi,UP:"up"};function vi(){}vi.prototype.destroy=function(){};function wo(e,t,n){ta[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function ro(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([yc,lu,Al,bi]),u=r.next();!u.done;u=r.next())if(u=ta[n+"-"+u.value]){var c=u.ge(),d=c.isSupported(e,t);if(c.destroy(),d)return u.ge}return null}ne("shaka.transmuxer.TransmuxerEngine",vi),vi.findTransmuxer=ro,vi.unregisterTransmuxer=function(e,t){delete ta[e.toLowerCase().split(";")[0]+"-"+t]},vi.registerTransmuxer=wo,vi.prototype.destroy=vi.prototype.destroy;var ta={},bi=1,Al=2,lu=3,yc=4;vi.PluginPriority={FALLBACK:bi,PREFERRED_SECONDARY:Al,PREFERRED:lu,APPLICATION:yc};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var xf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function si(e){var t;e instanceof si?(Ds(this,e.kb),this.mc=e.mc,_n(this,e.wb),Xn(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(xf))?(Ds(this,t[1]||"",!0),this.mc=ti(t[2]||""),_n(this,t[3]||"",!0),Xn(this,t[4]),this.Pa=ti(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ti(t[7]||"")):this.g=new Wi(null)}g=si.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,Xr,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,Xr,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Di:na,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,Ao)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new si);var n=!!e.kb;n?Ds(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var r=e.Pa;if(n)Xn(t,e.Bc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.wb&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],d=0;d<r.length;){var h=r[d++];h=="."?u&&d==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&d==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new si(this)};function Ds(e,t,n){e.kb=n?ti(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ti(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,ui)),e.g=new Wi(t))}function ti(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Xr=/[#\/\?@]/g,na=/[#\?:]/g,Di=/[#\?]/g,ui=/[#\?@]/g,Ao=/#/g;function Wi(e){this.g=e||null}function qo(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function ra(e){return qo(e),e.Zc}g.add=function(e,t){qo(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return qo(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return qo(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),r=this.Ca[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function pt(e,t,n){var r=Qe.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}pt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ne("shaka.util.Error",pt),pt.Severity={RECOVERABLE:1,CRITICAL:2},pt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},pt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function ia(e){this.h=e,this.g=void 0}ia.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ps(e){this.h=e,this.g=null}Ps.prototype.X=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){p.clearTimeout(r),n=!1},r=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ps.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ps(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ps(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},ne("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function Io(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function cu(e){return _c().canPlayType(e)!=""}function Il(){return!!navigator.userAgent.match(/Edge?\//)}function ms(){return Yr("Xbox One")}function Ha(){return Yr("Tizen")}function Lu(){return Yr("Tizen 3")}function ku(){return Yr("Tizen 2")}function oa(){return Yr("Web0S")}function aa(){return Yr("CrKey")}function fu(){if(!Yr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function vs(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ha()&&!Yr("PC=EOS")&&!Yr("PC=APL")&&!Yr("VirginMedia")&&!Yr("SOPOpenBrowser")&&!xr()&&!Yr("AFT")&&!Yr("WPE")}function Ec(){return Yr("PlayStation 5")}function xr(){return Yr("PlayStation 4")}function ys(){return Yr("Hisense")||Yr("VIDAA")}function Es(){if(!vs())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yr(e){return(navigator.userAgent||"").includes(e)}function _c(){return sa||(bl||(bl=new pr(function(){sa=null})),(sa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(sa=document.createElement("video")),bl.X(1),sa)}function Ia(){var e,t,n,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},aa()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(Ha()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){He("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(ms()){n=new Windows.Media.Protection.ProtectionCapabilities,r=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===r.maybe)}catch(G){u=r.notSupported}u===r.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(oa()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){He("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(ys()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!xr()&&!Ec()){k.u(2);break}return d=!1,de(k,8),x(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,d=h.resolution==="4K",ve(k,9);break;case 8:return Ce(k),de(k,11),x(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,d=E.resolution==="4K",ve(k,9);break;case 11:A=Ce(k),He("PlayStation: Failed to get the display info:",A);case 9:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var bl=null,sa=null;function _s(){}function Vr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!xr())return e=new TextDecoder().decode(e),e.includes("")&&ce('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function Ka(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new pt(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return bh(r)}function Va(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Vr(n);if(n[0]==254&&n[1]==255)return Ka(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ka(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ka(e,!1);if(n[1]==0&&n[3]==0)return Ka(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Vr(e);throw new pt(2,2,2003)}function za(e){if(p.TextEncoder&&!xr()){var t=new TextEncoder;return Ti(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ti(t)}function Nf(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function bh(e){return um.value()(e)}function bo(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}ne("shaka.util.StringUtils",_s),_s.resetFromCharCode=function(){um.g=void 0},_s.toUTF16=Nf,_s.toUTF8=za,_s.fromBytesAutoDetect=Va,_s.fromUTF16=Ka,_s.fromUTF8=Vr;var um=new ia(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.Db)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.Db));return u}}(t);return null});function Pi(){}function Mf(e){return e=bh(Qn(e)),btoa(e)}function du(e,t){return t=t==null?!0:t,e=Mf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ho(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function hu(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=p.parseInt(e.substr(2*r,2),16);return n}function Os(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function li(){for(var e=Qe.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}ne("shaka.util.Uint8ArrayUtils",Pi),Pi.concat=li,Pi.toHex=Os,Pi.fromHex=hu,Pi.fromBase64=Ho,Pi.toBase64=du,Pi.toStandardBase64=Mf;function co(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new si(e[0]);return t=new si(t[0]),[n.resolve(t).toString()]}t=t.map(function(d){return new si(d)}),n=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new si(r.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(r.resolve(c.value).toString())}return n}function Fu(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function Ch(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(d,h){var E=h;E.length!=22&&(E=du(hu(h),!1));var A=d;A.length!=22&&(A=du(hu(d),!1)),d={kty:"oct",kid:E,k:A},n.push(d),r.push(d.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:Qn(za(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Uu(e,t){if(t.length==1)return t[0];if(e=Co(e,t),e!=null)return e;throw new pt(2,4,4025,t)}function Co(e,t){for(var n=m(xh[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==vr?"":null}function Rh(e,t){var n=[];e=m(xh[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var vr="text",yi={fa:"video",S:"audio",ma:vr,ue:"image",Gi:"application"},xh={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Tc(){}function Si(e,t){var n=e;return t&&!pu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Bu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ls(e,t,n){var r=Si(e,t);return t=Bu(e,t),ro(t)?(e=ro(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function lm(e,t,n){var r=[t];return SE.forEach(function(u,c){var d=e[c];c=="codecs"?pu.includes(e.mimeType)||r.push('codecs="'+n+'"'):d&&r.push(u+'="'+d+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function Df(e){return e.split(";")[0].split("/")[1]}function ba(e){var t=Nh(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Ya(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Nh(n.value),t.push(n[0]);return t.sort().join(",")}function Ca(e){return e.split(";")[0]}function Do(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function cm(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Nh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}ne("shaka.util.MimeUtils",Tc),Tc.getFullTypeWithAllCodecs=Bu,Tc.getFullType=Si;var SE=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),pu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ks(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Cl(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Nt:!1}ks.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function wE(e,t,n,r,u){var c,d,h,E,A,k,G;return Oe(function(te){if(te.g==1)return x(te,Promise.resolve(),2);if(!e.i||!e.j)return te.return();if(n==null||r==null)return e.i.parseInit(Qn(t)),te.return();for(c=e.B?n:e.s,d={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(Qn(t),d,u),E=m(h),A=E.next();!A.done;A=E.next())k=A.value,e.A(k,u||null,d);G=h.filter(function(z){return z.startTime>=e.l&&z.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(te)})}ks.prototype.remove=function(e,t){var n=this;return Oe(function(r){if(r.g==1)return x(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function Mh(e,t,n){e.l=t,e.m=n}function Pf(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function fm(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())fm(e,r.value,n)}function Of(e,t,n,r,u){var c=n+" "+r,d=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,d.has(h)||d.set(h,new Map),d.get(h).has(c)||d.get(h).set(c,[]),fm(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(d.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(d.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(d.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=d.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}ne("shaka.text.TextEngine",ks),ks.prototype.destroy=ks.prototype.destroy,ks.findParser=function(e){return ji[e]},ks.unregisterParser=function(e){delete ji[e]},ks.registerParser=function(e,t){ji[e]=t};var ji={};function dm(e,t){return e.concat(t)}function hm(){}function ju(e){return e!=null}function mo(){}function Zu(e,t){return e=Cr(e),t=Cr(t),e.split("-")[0]==t.split("-")[0]}function Sc(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Gu(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Cr(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ni.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function qu(e,t){return e=Cr(e),t=Cr(t),t==e?4:Sc(t,e)?3:Gu(t,e)?2:Sc(e,t)?1:0}function Dh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ni.get(e)||e}function Hu(e){return e.language?Cr(e.language):e.audio&&e.audio.language?Cr(e.audio.language):e.video&&e.video.language?Cr(e.video.language):"und"}function Rl(e,t){e=Cr(e);var n=new Set,r=m(t);for(t=r.next();!t.done;t=r.next())n.add(Cr(t.value));for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,t==e)return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Sc(t,e))return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Gu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Sc(e,t))return t;return null}ne("shaka.util.LanguageUtils",mo),mo.findClosestLocale=Rl,mo.getLocaleForVariant=Hu,mo.getLocaleForText=function(e){return Cr(e.language||"und")},mo.getBase=Dh,mo.relatedness=qu,mo.areSiblings=function(e,t){var n=Dh(e),r=Dh(t);return e!=n&&t!=r&&n==r},mo.normalize=Cr,mo.isSiblingOf=Gu,mo.isParentOf=Sc,mo.areLanguageCompatible=Zu,mo.areLocaleCompatible=function(e,t){return e=Cr(e),t=Cr(t),e==t};var ni=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Wa(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},d;for(d in r)c[d]=t(r[d]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function pm(e){var t={},n;for(n in e)t[n]=e[n];return t}function wc(){}function gm(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=Ph(u,t,n)),r.length){for(t=new vt,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ye,Pe){ye=0;var Ne=[],Ge={};Pe=m(Pe);for(var Te=Pe.next();!Te.done;Ge={Uc:Ge.Uc},Te=Pe.next())Ge.Uc=Te.value,Te=r.filter(function($e){return function(Ue){return $e.Uc.decodingInfos[0][Ue]}}(Ge)).length,Te>ye?(ye=Te,Ne=[Ge.Uc]):Te==ye&&Ne.push(Ge.Uc);c.push.apply(c,T(Ne))}),u=c}n=new Set,t=new Set;var d=m(u);for(u=d.next();!u.done;u=d.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ye,Pe){return ye.bandwidth-Pe.bandwidth});var h=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){d=d.value;var E=d.language+(d.channelsCount||0)+(d.audioSamplingRate||0)+d.roles.join(",")+d.label+d.groupId+d.fastSwitching,A=u.get(E)||[];if(A.length){var k=A[A.length-1],G=ba(k.codecs),te=ba(d.codecs);G==te&&d.bandwidth>k.bandwidth&&(A.push(d),h.push(d.id))}else A.push(d),h.push(d.id);u.set(E,A)}n=Array.from(t).sort(function(ye,Pe){return ye.bandwidth&&Pe.bandwidth?ye.bandwidth-Pe.bandwidth:ye.width-Pe.width}),t=Un();var z=[];for(u=new Map,n=m(n),d=n.next();!d.done;d=n.next()){if(d=d.value,E=Math.round(d.frameRate||0)+(d.hdr||"")+d.fastSwitching,A=u.get(E)||[],A.length){if(k=A[A.length-1],!t&&(G=ba(k.codecs),te=ba(d.codecs),G!==te))continue;d.width>k.width||d.height>k.height?(A.push(d),z.push(d.id)):d.width==k.width&&d.height==k.height&&(G=ba(k.codecs),te=ba(d.codecs),G==te&&d.bandwidth>k.bandwidth&&(A.push(d),z.push(d.id)))}else A.push(d),z.push(d.id);u.set(E,A)}e.variants=e.variants.filter(function(ye){var Pe=ye.audio;return ye=ye.video,!(Pe&&!h.includes(Pe.id)||ye&&!z.includes(ye.id))})}function Ph(e,t,n){var r={};t=m(t);for(var u=t.next();!u.done;r={te:r.te},u=t.next())if(r.te=u.value,u=e.filter(function(c){return function(d){return d.video&&d.video.codecs.startsWith(c.te)}}(r)),u.length){e=u;break}for(r={},n=m(n),t=n.next();!t.done;r={me:r.me},t=n.next())if(r.me=t.value,t=e.filter(function(c){return function(d){return d.audio&&d.audio.codecs.startsWith(c.me)}}(r)),t.length){e=t;break}return e}function Oh(e,t,n){e.variants=e.variants.filter(function(r){return Lf(r,t,n)})}function Lf(e,t,n){function r(h,E,A){return h>=E&&h<=A}var u=e.video;if(u&&u.width&&u.height){var c=u.width,d=u.height;if(d>c&&(d=m([d,c]),c=d.next().value,d=d.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(d,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Ac(e,t,n){var r=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Lf(u,t,n),c!=u.allowedByApplication&&(r=!0)}return r}function mm(e,t,n){return n=n===void 0?[]:n,Oe(function(r){return r.g==1?x(r,vm(e,t,0<t.offlineSessionIds.length,n),2):(AE(t),x(r,Uf(t),0))})}function vm(e,t,n,r){var u,c;return Oe(function(d){if(d.g==1)return x(d,kh(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=Lh(h,u);if(!E){var A=[];h.audio&&A.push(Zf(h.audio)),h.video&&A.push(Zf(h.video))}return E}),X(d)})}function Lh(e,t){var n=ms(),r=Yr("Firefox")&&Yr("Android"),u=e.video,c=u&&u.width||0,d=u&&u.height||0;if(n&&u&&(1920<c||1080<d)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=xl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Uu("video",c),n=xl(n),c=Uu("audio",c),c=Ku(c),d=Ls(u.mimeType,c,"audio"),!Ot(d))return!1;n=[n,c].join()}if(c=Ls(u.mimeType,n,"video"),!Ot(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=Ku(u.codecs),n=Ls(u.mimeType,r,"audio"),!Ot(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function kf(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=kf(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function ym(e,t){var n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=function(k,G){if(k){var te=Wa(k);return te.supported=k.supported&&G.supported,te.powerEfficient=k.powerEfficient&&G.powerEfficient,te.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!te.keySystemAccess&&(te.keySystemAccess=G.keySystemAccess),te}return G},r=null,u=[],c={},d=m(t),h=d.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=d.next())E=h.value,c.Hc=kf(E),c.Gc=Fh,c.Gc[c.Hc]?r=n(r,c.Gc[c.Hc]):u.push(Ff(E).then(function(k){return function(G){var te=null;G=m(G||[]);for(var z=G.next();!z.done;z=G.next())te=n(te,z.value);te&&(k.Gc[k.Hc]=te,r=n(r,te))}}(c)));return x(A,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(A)})}function Ff(e){var t=[""];e.video&&(t=Do(e.video.contentType).split(","));var n=[""];e.audio&&(n=Do(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},d=m(n),h=d.next();!h.done;c={Mb:c.Mb},h=d.next())h=h.value,c.Mb=Wa(e),e.video&&(c.Mb.video.contentType=Si(Ca(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=Si(Ca(c.Mb.audio.contentType),h)),r.push(new Promise(function(E){return function(A,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){A(G)}).catch(k)}}(c)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function kh(e,t,n,r){var u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(e.some(function(gt){return gt.decodingInfos.length}))return Ue.return();u={},c=m(r),d=c.next();case 2:if(d.done){Ue.u(4);break}u.oe=d.value,h=!1,E=m(e),A=E.next();case 5:if(A.done){Ue.u(7);break}k=A.value,G=Em(k,t,n).filter(function(gt){return function(Rt){return Rt=Rt[0],(Rt.keySystemConfiguration&&Rt.keySystemConfiguration.keySystem)===gt.oe}}(u)),te=m(G),z=te.next();case 8:if(z.done){Ue.u(10);break}return ye=z.value,x(Ue,ym(k,ye),9);case 9:z=te.next(),Ue.u(8);break;case 10:k.decodingInfos.length&&(h=!0),A=E.next(),Ue.u(5);break;case 7:if(h)return Ue.return();u={oe:u.oe},d=c.next(),Ue.u(2);break;case 4:Pe=m(e),A=Pe.next();case 12:if(A.done){Ue.u(0);break}Ne=A.value,Ge=Em(Ne,t,n).filter(function(gt){return gt=gt[0],gt=gt.keySystemConfiguration&&gt.keySystemConfiguration.keySystem,!gt||!r.includes(gt)}),Te=m(Ge),z=Te.next();case 15:if(z.done){A=Pe.next(),Ue.u(12);break}return $e=z.value,x(Ue,ym(Ne,$e),16);case 16:z=Te.next(),Ue.u(15)}})}function Em(e,t,n){var r=e.audio,u=e.video,c=[],d=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var A=Do(E);if(A.includes(",")&&!r){var k=A.split(",");A=Uu("video",k),k=Uu("audio",k),k=Ku(k),k=Ls(Ca(E),k,"audio"),d.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(A=xl(A),E={contentType:Ls(Ca(E),A,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(r)for(h=m(r.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,A=Ku(Do(E)),E=Ls(Ca(E),A,"audio"),d.push({contentType:E,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),d.length==0&&d.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,A=m(d),k=A.next();!k.done;k=A.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(d=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!d.length)return[h];e=[],n=new Map,d=m(d);for(var te=d.next();!te.done;te=d.next())c=te.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(d=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,A=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var z=n.get(E),ye={keySystem:E,initDataType:"cenc",persistentState:d,distinctiveIdentifier:"optional",sessionTypes:t};for(z=m(z),te=z.next();!te.done;te=z.next()){if(te=te.value,te.initData&&te.initData.length){for(var Pe=new Set,Ne=m(te.initData),Ge=Ne.next();!Ge.done;Ge=Ne.next())Pe.add(Ge.value.initDataType);ye.initDataType=te.initData[0].initDataType}te.distinctiveIdentifierRequired&&(ye.distinctiveIdentifier="required"),te.persistentStateRequired&&(ye.persistentState="required"),te.sessionType&&(ye.sessionTypes=[te.sessionType]),r&&(te.audioRobustness!=""?ye.audio?ye.audio.robustness=ye.audio.robustness||te.audioRobustness:ye.audio={robustness:te.audioRobustness}:ye.audio||(ye.audio={})),u&&(te.videoRobustness!=""?ye.video?ye.video.robustness=ye.video.robustness||te.videoRobustness:ye.video={robustness:te.videoRobustness}:ye.video||(ye.video={}))}G.keySystemConfiguration=ye,A.push(G)}e.push(A)}return e}function Ku(e){return e.toLowerCase()=="flac"?Es()?"fLaC":"flac":e==="Opus"?"opus":e}function xl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function AE(e){e.textStreams=e.textStreams.filter(function(t){return t=Si(t.mimeType,t.codecs),Cl(t)})}function Uf(e){var t,n,r,u,c,d,h;return Oe(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){E.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),Yu.has(c)){E.u(5);break}if(d=CE.get(c),!d){Yu.set(c,!1),E.u(5);break}return x(E,IE(d),7);case 7:h=E.h,Yu.set(c,h);case 5:Yu.get(c)&&t.push(u),r=n.next(),E.u(2);break;case 4:e.imageStreams=t,X(E)}})}function IE(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Nl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,d=n?n.codecs:null,h=[];d&&h.push(d),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var A=[];t&&A.push(t.kind),n&&A.push(n.kind),A=A[0]||null;var k=new Set;if(t)for(var G=m(t.roles),te=G.next();!te.done;te=G.next())k.add(te.value);if(n)for(G=m(n.roles),te=G.next();!te.done;te=G.next())k.add(te.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:A,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:d,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Ml(e){return{id:e.id,active:!1,type:vr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Vu(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Ic(e){return e.__shaka_id||(e.__shaka_id=bE++),e.__shaka_id}function _m(e){var t=Tm(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Dl(e){var t=Tm(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Tm(e){var t=e.language;return{id:Ic(e),active:!1,type:"",bandwidth:0,language:Cr(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Bf(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function jf(e){return e.filter(function(t){return Bf(t)})}function bc(e,t,n,r){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var d=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==d}),t){var h=Rl(Cr(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return Cr(E.language)==h}))}if(u=u.filter(function(E){return E.forced==r}),n){if(e=zu(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(dm,[]),e.length?zu(u,e[0]):u}function zu(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Zf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}ne("shaka.util.StreamUtils",wc),wc.meetsRestrictions=Lf;var Fh={},bE=0,Yu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),CE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new K,this.F=new Et,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*r),n=Math.min(n,this.l.clientWidth*r)}var u=this.m.filter(function(A){return!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)});if(u.length||(u=this.m),r=u,e&&u.length!=this.m.length&&(r=this.m.filter(function(A){return!!(A.audio&&A.audio.fastSwitching||A.video&&A.video.fastSwitching)})),e=Uh(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=qf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=Uh(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=Uh(this,null,r,1/0,1/0),e=[e[0]]),n=e[0]||null,r=0;r<e.length;r++){u=e[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),d=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=r+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=d&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&Gf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&Gf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(RE)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Gf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Uh(e,t,n,r,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(d){return d.bandwidth&&c?d.bandwidth<=c:!0}))}return t&&(n=n.filter(function(d){return Lf(d,t,{width:u,height:r})})),n.sort(function(d,h){return d.bandwidth-h.bandwidth})}function qf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}ne("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var RE=1;ne("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ne("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function Cc(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}Cc.prototype.add=function(e,t,n){return Sm(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function Sm(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!Bh(u,c)||!wm(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Bh(e,t))&&wm(e.roles,t.roles))),!r}Cc.prototype.values=function(){return this.g.values()};function Bh(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return Ya(r)}),t=t.codecs.split(",").map(function(r){return Ya(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function wm(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function jh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Pl(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}jh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),r=e.filter(function(u){return Sm(t.i,u,!n,t.g)});return r.length?new Cc(r[0],r,!n,this.g):this.j.create(e)};function Pl(e,t,n,r,u,c,d,h,E,A){this.s=e,this.A=t,this.h=n,this.i=r,this.B=u,this.l=c,this.g=d===void 0?"":d,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=A===void 0?!1:A}Pl.prototype.create=function(e){var t=[];t=Am(e,this.s);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=Im(t,this.A),e.length&&(t=e),this.l&&(e=Cm(t,this.l),e.length&&(t=e)),this.i&&(e=ME(t,this.i),e.length&&(t=e)),this.h&&(e=bm(t,this.h),e.length&&(t=e)),this.g&&(e=xE(t,this.g),e.length&&(t=e)),this.j&&(e=NE(t,this.j),e.length&&(t=e)),e=DE(t,this.B),e.length&&(t=e),new Cc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function Am(e,t){t=Cr(t);var n=Rl(t,e.map(function(r){return Hu(r)}));return n?e.filter(function(r){return n==Hu(r)}):[]}function Im(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function xE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function NE(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function bm(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function ME(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Cm(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function DE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Zh(){this.g=Rc,this.i=new Map().set(Rc,2).set(Ol,1),this.h=0}function Gh(e,t,n){e.i.set(Rc,n).set(Ol,t)}var Ol=0,Rc=1;function qh(e,t){var n=ua();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Hh(e){var t,n;return Oe(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new pt(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),x(r,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,X(r)})}function ua(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function gu(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function Kh(){var e=Promise.reject(new pt(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function Wu(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Rm(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function Hf(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(d);else{var A=h?e:t;A?r=Vh(A,E,c):(h?c.resolve:c.reject)(E)}}}function r(){return c.reject(d),u.abort()}var u=this,c=new Rr,d=new pt(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return r()})};function Vh(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}ne("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.va,pi.prototype.finally=pi.prototype.finally,pi.all=Hf,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Rm,pi.completed=Wu,pi.aborted=Kh,pi.failed=gu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function xm(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},ne("shaka.util.FakeEvent",Wn);var xc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new vt,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function Ll(){this.g=[]}function mu(e,t){e.g.push(t.finally(function(){mn(e.g,t)}))}Ll.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,r,u,c){Sr.call(this),this.i=!1,this.m=new Ll,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=r||null,this.C=u||null,this.B=c||null,this.o=!1}Y(Kr,Sr),g=Kr.prototype,g.Cf=function(e){this.o=e};function Ko(e,t,n,r){n=n||Wh;var u=Mc[e];(!u||n>=u.priority)&&(Mc[e]={priority:n,ge:t,bi:r===void 0?!1:r})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Oi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var r=this,u=new Yh;if(this.i){var c=Promise.reject(new pt(2,7,7001));return c.catch(function(){}),new Nc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Wa(t.retryParameters):ua(),t.uris=Wa(t.uris),c=Nm(this,e,t,n);var d=c.va(function(){return zh(r,e,t,n,new qh(t.retryParameters,!1),0,null,u)}),h=d.va(function(te){return PE(r,e,te,n)}),E=Date.now(),A=0;c.promise.then(function(){A=Date.now()-E},function(){});var k=0;d.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(te){var z=Date.now()-k,ye=te.response;return ye.timeMs+=A,ye.timeMs+=z,te.Ih||!r.l||ye.fromCache||t.method=="HEAD"||e!=$a||r.l(ye.timeMs,ye.data.byteLength,Mm(n)),r.B&&r.B(e,ye,n),ye},function(te){throw te&&(te.severity=2),te});return c=new Nc(G.promise,function(){return G.abort()},u),mu(this.m,c),c};function Nm(e,t,n,r){function u(h){c=c.va(function(){return n.body&&(n.body=Ti(n.body)),h(t,n,r)})}var c=Wu(void 0);e.A&&u(e.A),e=m(e.g);for(var d=e.next();!d.done;d=e.next())u(d.value);return c.va(void 0,function(h){throw h instanceof pt&&h.code==7001?h:new pt(2,1,1006,h)})}function zh(e,t,n,r,u,c,d,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,r,n.uris[c],n.uris[c-1]);var E=new si(n.uris[c]),A=E.kb,k=!1;A||(A=location.protocol,A=A.slice(0,-1),Ds(E,A),n.uris[c]=E.toString()),A=A.toLowerCase();var G=(A=Mc[A])?A.ge:null;if(!G)return gu(new pt(2,1,1e3,E));var te=A.bi,z=null,ye=null,Pe=!1,Ne=!1,Ge;return Rm(Hh(u)).va(function(){if(e.i)return Kh();Ge=Date.now();var Te=0;n.requestStartTime=Date.now();var $e=G(n.uris[c],n,t,function(Rt,Ht,Ut){z&&z.stop(),ye&&ye.X(gt/1e3),e.l&&t==$a&&(Te++,n.packetNumber=Te,e.l(Rt,Ht,Mm(r),n),k=!0,h.g=Ut)},function(Rt){e.j&&e.j(Rt,n,t),Ne=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!te)return $e;var Ue=n.retryParameters.connectionTimeout;Ue&&(z=new pr(function(){Pe=!0,$e.abort()}),z.X(Ue/1e3));var gt=n.retryParameters.stallTimeout;return gt&&(ye=new pr(function(){Pe=!0,$e.abort()})),$e}).va(function(Te){z&&z.stop(),ye&&ye.stop(),Te.timeMs==null&&(Te.timeMs=Date.now()-Ge);var $e={response:Te,Ih:k};return!Ne&&e.j&&e.j(Te.headers,n,t),$e},function(Te){if(z&&z.stop(),ye&&ye.stop(),e.s){var $e=null,Ue=0;Te instanceof pt&&($e=Te,Te.code==1001&&(Ue=Te.data[1])),e.s(n,$e,Ue,Pe)}if(e.i)return Kh();if(Pe&&(Te=new pt(1,1,1003,n.uris[c],t)),Te instanceof pt){if(Te.code==7001)throw Te;if(Te.code==1010)throw d;if(Te.severity==1)return $e=new Map().set("error",Te),$e=new Wn("retry",$e),e.dispatchEvent($e),c=(c+1)%n.uris.length,zh(e,t,n,r,u,c,Te,h)}throw Te})}function PE(e,t,n,r){var u=Wu(void 0),c={};e=m(e.h);for(var d=e.next();!d.done;c={qe:c.qe},d=e.next())c.qe=d.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Ti(E.data)),h.qe(t,E,r)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof pt){if(h.code==7001)throw h;E=h.severity}throw new pt(E,1,1007,h)})}function Mm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}ne("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Oi,Kr.defaultRetryParameters=function(){return ua()},Kr.prototype.clearAllResponseFilters=Kr.prototype.ah,Kr.prototype.unregisterResponseFilter=Kr.prototype.Ci,Kr.prototype.registerResponseFilter=Kr.prototype.fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.$g,Kr.prototype.unregisterRequestFilter=Kr.prototype.Bi,Kr.prototype.registerRequestFilter=Kr.prototype.ei,Kr.unregisterScheme=function(e){delete Mc[e]},Kr.registerScheme=Ko,Kr.prototype.setForceHTTPS=Kr.prototype.Cf;function Yh(){this.g=0}Kr.NumBytesRemainingClass=Yh;function Nc(e,t,n){pi.call(this,e,t),this.h=n}Y(Nc,pi),Kr.PendingRequest=Nc;var $a=1;Kr.RequestType={MANIFEST:0,SEGMENT:$a,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var Wh=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Wh};var Mc={};function $u(e){this.g=!1,this.h=new Rr,this.i=e}$u.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof pt&&t.code==7003?t:new pt(2,7,7003,t)}function Kf(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function OE(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function kl(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Dc(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==Dm,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Fs()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Fs()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Fs()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Fs()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Fs()}if(2097151<t)throw new pt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw Fs();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw Fs();this.g+=e},g.mi=function(e){if(this.g<e)throw Fs();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw Fs();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Vr(e)};function Fs(){return new pt(2,3,3e3)}ne("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var Dm=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Dm};function kr(){this.i=[],this.h=[],this.g=!1}g=kr.prototype,g.box=function(e,t){return e=Pm(e),this.i[e]=LE,this.h[e]=t,this},g.O=function(e,t){return e=Pm(e),this.i[e]=Om,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,r){var u=t.wa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.M(),d=t.M(),h=Vf(d),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var A=this.h[d];if(A){var k=null,G=null;if(this.i[d]==Om){if(r&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}d=u+c,n&&d>t.getLength()&&(d=t.getLength()),r&&d>t.getLength()?this.g=!0:(r=d-t.wa(),t=0<r?t.sb(r):new Uint8Array(0),t=new Dr(t,0),A({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function yr(e){for(var t=Fl(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function vu(e){for(var t=Fl(e),n=e.reader.M(),r=0;r<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function wi(e){var t=Fl(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function $h(e){var t=Fl(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Xu(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function Pm(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Vf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Fl(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}ne("shaka.util.Mp4Parser",kr),kr.headerSize=Fl,kr.typeToString=Vf,kr.allData=Xu,kr.audioSampleEntry=$h,kr.visualSampleEntry=wi,kr.sampleDescription=vu,kr.children=yr,kr.prototype.parseNext=kr.prototype.Ac,kr.prototype.parse=kr.prototype.parse,kr.prototype.stop=kr.prototype.stop,kr.prototype.fullBox=kr.prototype.O,kr.prototype.box=kr.prototype.box;var LE=0,Om=1;function Lm(e){var t=this;this.g=[],this.h=[],this.data=[],new kr().box("moov",yr).box("moof",yr).O("pssh",function(n){if(!(1<n.version)){var r=Qn(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Os(n.reader.sb(16))),0<n.version){r=n.reader.M();for(var u=0;u<r;u++){var c=Os(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function zf(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var d=new Uint8Array(c),h=tn(d),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>r?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,d.set(t,E),E+=t.length,0<r)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=hu(n.value),d.set(n,E),E+=n.length;return h.setUint32(E,u),d.set(e,E+4),d}function Xh(e,t){return e=Va(e),Ul(e,t)}function Ul(e,t){return e=kE(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Pc(e){return Lc.has(e)?Lc.get(e):""}function kE(e){function t(u,c){c=c===void 0?!1:c;for(var d=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){c=r+2,r=e.indexOf(">",r),c=e.substring(c,r);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",r),h==-1?(d.push(e.substr(r+9)),r=e.length):(d.push(e.substring(r+9,h)),r=h+3);continue}r++;continue}e:{E=c,r++;var A=n(),k={};for(h=[];e.charCodeAt(r)!==62&&e[r];){var G=e.charCodeAt(r);if(64<G&&91>G||96<G&&123>G){G=n();for(var te=e.charCodeAt(r);te&&te!==39&&te!==34&&!(64<te&&91>te||96<te&&123>te)&&te!==62;)r++,te=e.charCodeAt(r);var z=r+1;if(r=e.indexOf(e[r],z),z=e.slice(z,r),te===39||te===34){if(r===-1){for(E={tagName:A,attributes:k,children:h,parent:null},A=0;A<h.length;A++)typeof h[A]!="string"&&(h[A].parent=E);h=E;break e}}else z=null,r--;G.startsWith("xmlns:")&&Lc.set(z,G.split(":")[1]),A==="tt"&&G==="xml:space"&&z==="preserve"&&(E=!0),k[G]=z}r++}for(e.charCodeAt(r-1)!==47?(r++,h=t(A,E)):r++,E={tagName:A,attributes:k,children:h,parent:null},A=h.length,k=0;k<A;k++)G=h[k],typeof G!="string"?G.parent=E:k==A-1&&G=="\n"&&h.pop();h=E}if(d.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(d.push.apply(d,T(h.children)),h.children=[])}else h=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),h=e.slice(h,r+1),c?0<h.length&&d.push(h):(d.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&d.push(h),r++;return d}function n(){for(var u=r;"\r\n	>/= ".indexOf(e[r])===-1&&e[r];)r++;return e.slice(u,r)}var r=0;return t("")}function Yf(e){return typeof e=="string"}function FE(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Wr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Ci(e){return typeof e=="string"?bo(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:bo(e))}function yu(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ci(e))&&(e=e.trim()),e):null}function Ra(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Ra(r.value,t,n)}return n}function la(e,t){return e=Wr(e,t),e.length!=1?null:e[0]}function Us(e,t,n){return e=Wf(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function Eu(e,t,n){return t=Pc(t),e.attributes[t+":"+n]||null}function Wf(e,t,n){t=Pc(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function ca(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=Eu(e,r.value,n))return r;return null}function $f(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Xa(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Xf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Qu(e){return e=Number(e),e%1===0?e:null}function Bs(e){return e=Number(e),e%1===0&&0<e?e:null}function Ro(e){return e=Number(e),e%1===0&&0<=e?e:null}function Oc(e){return e=Number(e),isNaN(e)?null:e}function Qh(e){return e?e.toLowerCase()==="true":!1}function km(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Jh(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var r=document.createElement(e.tagName),u;for(u in e.attributes)r.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&Jh(e.parent,!0,!1).appendChild(r),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=Jh(t,!1,!0),r.appendChild(n);return r}var Lc=new Map([]);function kc(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new Et,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return V(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){Ee(t)}),this.l.catch(function(){}),this.j=new $u(function(){return UE(t)}),this.ba=!1,this.F=this.G=null}g=kc.prototype,g.destroy=function(){return this.j.destroy()};function UE(e){return Oe(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,x(t,H(e),2);case 2:if(!e.m){t.u(3);break}return de(t,4),x(t,e.m.setMediaKeys(null),6);case 6:ve(t,5);break;case 4:Ce(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function Fm(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,jm(e,t)}function Um(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.T=0<e.A.size,jm(e,t)}function Bm(e,t,n,r,u,c){var d=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],d.set(t,u),rp(e,d,[])}function jm(e,t){var n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te;return Oe(function($e){if($e.g==1){if(n=GE(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(d=t.some(function(Ue){return!!(Ue.video&&Ue.video.drmInfos.length||Ue.audio&&Ue.audio.drmInfos.length)}),d||(h=kl(e.h.servers),ge(t,h)),E=new Set,A=m(t),u=A.next();!u.done;u=A.next())for(k=u.value,G=Se(k),te=m(G),z=te.next();!z.done;z=te.next())ye=z.value,E.add(ye);for(Pe=m(E),z=Pe.next();!z.done;z=Pe.next())Ne=z.value,De(Ne,kl(e.h.servers),kl(e.h.advanced||{}),e.h.keySystemsMapping);return x($e,kh(t,e.T,e.ba,e.h.preferredKeySystems),2)}return Ge=d||Object.keys(e.h.servers).length,Ge?(Te=rp(e,void 0,t),$e.return(d?Te:Te.catch(function(){}))):(e.da=!0,$e.return(Promise.resolve()))})}function ep(e){var t;return Oe(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return x(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return de(n,4),e.G=e.m.setMediaKeys(e.s),x(n,e.G,6);case 6:ve(n,5);break;case 4:t=Ce(n),e.o(new pt(2,6,6003,t.message));case 5:jr(e.j),X(n)}})}function BE(e,t){return Oe(function(n){if(n.g==1)return x(n,ep(e),2);Bl(e,t.initDataType,Qn(t.initData)),X(n)})}g.Vc=function(e){var t=this;return Oe(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())P(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?x(n,ep(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new pt(2,6,6010))}),n.return());tp(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return BE(t,r)}),X(n)})};function Zm(e){var t,n,r,u,c;return Oe(function(d){switch(d.g){case 1:if(!e.s||!e.g)return d.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){d.u(2);break}return t=Oi([e.g.serverCertificateUri],e.h.retryParameters),de(d,3),n=e.C.zb.request(5,t),x(d,n.promise,5);case 5:r=d.h,e.g.serverCertificate=Qn(r.data),ve(d,4);break;case 3:throw u=Ce(d),new pt(2,6,6017,u);case 4:if(e.j.g)return d.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?d.return():(de(d,6),x(d,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:ve(d,0);break;case 6:throw c=Ce(d),new pt(2,6,6004,c.message)}})}function jE(e,t){var n,r,u;return Oe(function(c){if(c.g==1)return x(c,Hm(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.ab=new Rr,r.push(u.ab)),r.push(n.remove()),x(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function tp(e){var t,n,r,u,c;return Oe(function(d){if(d.g==1)return e.A.size?(e.A.forEach(function(h,E){Hm(e,E,h)}),x(d,e.l,3)):d.u(2);if(d.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&me(e))return d.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,Bl(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),d.return(e.l)})}function Bl(e,t,n){if(n.length){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function Gm(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function np(e){return e=e.i.keys(),e=Kf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=Kf(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Dc(this.ea)};function rp(e,t,n){var r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge;return Oe(function(Te){switch(Te.g){case 1:if(r=new Map,n.length){u=ZE(e,n,r),Te.u(2);break}return x(Te,qm(e,t),3);case 3:u=Te.h;case 2:if(c=u,!c)throw new pt(2,6,6001);for(jr(e.j),de(Te,4),e.H.clear(),d=c.getConfiguration(),h=d.audioCapabilities||[],E=d.videoCapabilities||[],A=m(h),k=A.next();!k.done;k=A.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(te=m(E),k=te.next();!k.done;k=te.next())z=k.value,e.H.add(z.contentType.toLowerCase());if(n.length){var $e=c.keySystem,Ue=r.get(c.keySystem),gt=[],Rt=[],Ht=[],Ut=[],yt=[],jt=new Set;qe(Ue,gt,Rt,Ut,Ht,yt,jt);var ln=e.T?"persistent-license":"temporary";for($e={keySystem:$e,encryptionScheme:gt[0],licenseServerUri:Rt[0],distinctiveIdentifierRequired:Ue[0].distinctiveIdentifierRequired,persistentStateRequired:Ue[0].persistentStateRequired,sessionType:Ue[0].sessionType||ln,audioRobustness:Ue[0].audioRobustness||"",videoRobustness:Ue[0].videoRobustness||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:yt,keyIds:jt},Ue=m(Ue),gt=Ue.next();!gt.done;gt=Ue.next())gt=gt.value,gt.distinctiveIdentifierRequired&&($e.distinctiveIdentifierRequired=gt.distinctiveIdentifierRequired),gt.persistentStateRequired&&($e.persistentStateRequired=gt.persistentStateRequired);Ue=$e}else Ue=c.keySystem,$e=t.get(c.keySystem),gt=[],Rt=[],Ht=[],Ut=[],yt=[],jt=new Set,qe($e.drmInfos,gt,Rt,Ut,Ht,yt,jt),Ue={keySystem:Ue,encryptionScheme:gt[0],licenseServerUri:Rt[0],distinctiveIdentifierRequired:$e.distinctiveIdentifier=="required",persistentStateRequired:$e.persistentState=="required",sessionType:$e.sessionTypes[0]||"temporary",audioRobustness:($e.audioCapabilities?$e.audioCapabilities[0].robustness:"")||"",videoRobustness:($e.videoCapabilities?$e.videoCapabilities[0].robustness:"")||"",serverCertificate:Ut[0],serverCertificateUri:Ht[0],initData:yt,keyIds:jt};if(e.g=Ue,!e.g.licenseServerUri)throw new pt(2,6,6012,e.g.keySystem);return x(Te,c.createMediaKeys(),6);case 6:if(ye=Te.h,jr(e.j),e.s=ye,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Te.u(7);break}return de(Te,8),x(Te,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Pe=Te.h,Pe!="usable")throw new pt(2,6,6018);jr(e.j),ve(Te,7,4);break;case 8:throw Ne=Ce(Te,4),Ne instanceof pt?Ne:new pt(2,6,6019,Ne.message);case 7:return e.da=!0,x(Te,Zm(e),11);case 11:jr(e.j),ve(Te,0);break;case 4:throw Ge=Ce(Te),jr(e.j,Ge),e.g=null,e.H.clear(),Ge instanceof pt?Ge:new pt(2,6,6002,Ge.message)}})}function ZE(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){var c=m(Se(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new pt(2,6,6e3);for(r={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;r={pe:r.pe},u=e.next())for(r.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(A){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==A.pe}}(r)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(r=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var d=m(u.value.decodingInfos);for(u=d.next();!u.done;u=d.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==r)return h.keySystemAccess}}}return null}function qm(e,t){var n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne;return Oe(function(Ge){switch(Ge.g){case 1:if(t.size==1&&t.has(""))throw new pt(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;d=m(e.h.preferredKeySystems),h=d.next();case 2:if(h.done){Ge.u(4);break}if(E=h.value,!t.has(E)){Ge.u(3);break}return A=t.get(E),de(Ge,6),x(Ge,navigator.requestMediaKeySystemAccess(E,[A]),8);case 8:return n=Ge.h,Ge.return(n);case 6:Ce(Ge);case 7:jr(e.j);case 3:h=d.next(),Ge.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){Ge.u(11);break}te=G.value,z=m(t.keys()),h=z.next();case 12:if(h.done){G=k.next(),Ge.u(9);break}if(ye=h.value,Pe=t.get(ye),Ne=Pe.drmInfos.some(function(Te){return!!Te.licenseServerUri}),Ne!=te){Ge.u(13);break}return de(Ge,15),x(Ge,navigator.requestMediaKeySystemAccess(ye,[Pe]),17);case 17:return n=Ge.h,Ge.return(n);case 15:Ce(Ge);case 16:jr(e.j);case 13:h=z.next(),Ge.u(12);break;case 11:return Ge.return(n)}})}function GE(e){return e=kl(e.h.clearKeys),e.size==0?null:Ch(e)}function Fc(e){ie(e)&&e.l.resolve()}function Uc(e,t){new pr(function(){t.loaded=!0,Fc(e)}).X(ze)}function Hm(e,t,n){var r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:try{r=e.s.createSession("persistent-license")}catch(G){return u=new pt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(r,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):P(e,G)}),e.B.D(r,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(r,c),de(k,2),x(k,r.load(t),4);case 4:return d=k.h,jr(e.j),d||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(h,6,6013)),c.loaded=!0),Uc(e,c),Fc(e),k.return(r);case 2:E=Ce(k),jr(e.j,E),e.i.delete(r),A=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(A,6,6005,E.message)),c.loaded=!0,Fc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new pt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):P(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof pt||(t=new pt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&du(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var d=c.errorCode;if(d&&d.systemCode){var h=d.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new pt(2,6,6006,c.message,c,h))}})}function P(e,t){var n,r,u,c,d,h,E,A,k,G,te,z,ye;Oe(function(Pe){switch(Pe.g){case 1:if(n=t.target,e.h.logLicenseExchange&&du(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),d=Oi([u],e.h.retryParameters),d.body=t.message,d.method="POST",d.licenseRequestType=t.messageType,d.sessionId=n.sessionId,d.drmInfo=e.g,r&&(d.initData=r.initData,d.initDataType=r.initDataType),Gm(e.g.keySystem)){var Ne=Ka(d.body,!0,!0);if(Ne.includes("PlayReadyKeyMessage")){Ne=Ul(Ne,"PlayReadyKeyMessage");var Ge=Ra(Ne,"HttpHeader");Ge=m(Ge);for(var Te=Ge.next();!Te.done;Te=Ge.next()){var $e=Te.value;Te=Ra($e,"name")[0],$e=Ra($e,"value")[0],d.headers[Ci(Te)]=Ci($e)}Ne=Ra(Ne,"Challenge")[0],d.body=Ho(Ci(Ne))}else d.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),de(Pe,2),A=e.C.zb.request(2,d),x(Pe,A.promise,4);case 4:E=Pe.h,ve(Pe,3);break;case 2:return k=Ce(Pe),e.j.g||(G=new pt(2,6,6007,k),e.i.size==1?(e.o(G),r&&r.ab&&r.ab.reject(G)):(r&&r.ab&&r.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Pe.return();case 3:return e.j.g?Pe.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&du(E.data),de(Pe,5),x(Pe,n.update(E.data),7));case 7:ve(Pe,6);break;case 5:return te=Ce(Pe),z=new pt(2,6,6008,te.message),e.o(z),r&&r.ab&&r.ab.reject(z),Pe.return();case 6:if(e.j.g)return Pe.return();ye=new Wn("drmsessionupdate"),e.C.onEvent(ye),r&&(r.ab&&r.ab.resolve(),Uc(e,r)),X(Pe)}})}function B(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,d){if(typeof d=="string"){var h=d;d=c,c=h}if(Gm(e.g.keySystem)&&d.byteLength==16&&(Il()||xr())){h=tn(d);var E=h.getUint32(0,!0),A=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,A,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),d=Os(d).slice(0,32),e.aa.set(d,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(_e))}function V(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new pt(2,6,6014)),e.C.ee(Dc(n))}function ee(){var e,t,n,r,u,c,d,h;return Oe(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[r,n],c=new Map,d=function(A){var k,G,te;return Oe(function(z){switch(z.g){case 1:if(de(z,2),A==="org.w3.clearkey"&&Es())throw Error("Unsupported keySystem");return x(z,navigator.requestMediaKeySystemAccess(A,u),4);case 4:return k=z.h,te=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,Lu()&&(te=!1),c.set(A,{persistentState:te}),x(z,k.createMediaKeys(),5);case 5:ve(z,0);break;case 2:Ce(z),c.set(A,null),X(z)}})},h=e.map(function(A){return d(A)}),x(E,Promise.all(h),2)):E.return(Dc(c))})}function J(e){var t;return Oe(function(n){if(n.g==1)return t=new Promise(function(r,u){new pr(u).X(Be)}),de(n,2),x(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return ve(n,0);Ce(n),X(n)})}function H(e){var t;return Oe(function(n){return t=Array.from(e.i.entries()),e.i.clear(),x(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return Oe(function(d){if(d.g==1)return de(d,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?x(d,J(u),5):x(d,u.remove(),5);if(d.g!=2)return ve(d,0);Ce(d),X(d)})})),0)})}function re(e,t){return e.length&&t.length&&e!==t?0<fe(e,t).length:!0}function fe(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var d=m((r.initData||[]).concat(c.initData||[])),h=d.next();!h.done;h=d.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),d=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:d});break}}return n}function Se(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ee(e){e.i.forEach(function(t,n){var r=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),OE(e,function(t){return t.loaded})}function me(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function ge(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function qe(e,t,n,r,u,c,d){var h=[],E={};e=m(e);for(var A=e.next();!A.done;E={la:E.la},A=e.next()){if(E.la=A.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(r.some(function(te){return function(z){return zi(z,te.la.serverCertificate)}}(E))||r.push(E.la.serverCertificate)),E.la.initData){A={};for(var k=m(E.la.initData),G=k.next();!G.done;A={vd:A.vd},G=k.next())A.vd=G.value,c.some(function(te){return function(z){var ye=te.vd;return z.keyId&&z.keyId==ye.keyId?!0:z.initDataType==ye.initDataType&&zi(z.initData,ye.initData)}}(A))||c.push(A.vd)}if(E.la.keyIds)for(A=m(E.la.keyIds),k=A.next();!k.done;k=A.next())d.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),r=h.next();!r.done;r=h.next())r=p.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function De(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Be=1,ze=5,_e=.5,Le=new ia(function(){return Ti(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function we(e,t,n){this.h=e,this.i=t,this.g=n}function je(e,t){return Oe(function(n){return n.g==1?x(n,Z(e,t),2):n.return(le(e,t))})}function Z(e,t){return Oe(function(n){if(n.g==1)return x(n,mm(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(Bf))throw new pt(2,4,4032);X(n)})}function le(e,t){var n=Ac(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,r.keySystem,c.video),ae(e,r.keySystem,c.audio);se(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,Bl(e.g,u.initDataType,u.initData)}}}function se(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,d=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.keyIds.size){A=m(A.keyIds);for(var k=A.next();!k.done;k=A.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&d.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(d)},new pt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Me(){}function be(e,t){if(t){var n=ke[t.toLowerCase()];if(n)return n}throw new pt(2,4,4e3,e,t)}ne("shaka.media.ManifestParser",Me),Me.unregisterParserByMime=function(e){delete ke[e]},Me.registerParserByMime=function(e,t){ke[e]=t},Me.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Me.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var ke={};function Re(e){function t(){r=!0}function n(A){c.push(A),yr(A)}e=Qn(e);var r=!1,u,c=[],d=[];if(new kr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(A){u=A,c.push(A),vu(A)}).O("encv",t).O("enca",t).O("dvav",function(A){d.push({box:A,Xa:1701733238})}).O("dva1",function(A){d.push({box:A,Xa:1701733238})}).O("dvh1",function(A){d.push({box:A,Xa:1701733238})}).O("dvhe",function(A){d.push({box:A,Xa:1701733238})}).O("hev1",function(A){d.push({box:A,Xa:1701733238})}).O("hvc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc1",function(A){d.push({box:A,Xa:1701733238})}).O("avc3",function(A){d.push({box:A,Xa:1701733238})}).O("ac-3",function(A){d.push({box:A,Xa:1701733217})}).O("ec-3",function(A){d.push({box:A,Xa:1701733217})}).O("ac-4",function(A){d.push({box:A,Xa:1701733217})}).O("mp4a",function(A){d.push({box:A,Xa:1701733217})}).parse(e),r)return e;if(d.length==0||!u)throw Os(e),new pt(2,3,3019);d.reverse();for(var h=m(d),E=h.next();!E.done;E=h.next())E=E.value,e=he(e,u,E.box,c,E.Xa);return e}function he(e,t,n,r,u){var c=We.value(),d=e.subarray(n.start,n.start+n.size),h=tn(d),E=new Uint8Array(n.size+c.byteLength);for(E.set(d,0),d=tn(E),d.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),d.setUint32(n.size+16,u),xe(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=ms()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,xe(u,r.start,r.size+E.byteLength);return E=tn(u,t.start),t=Fl(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function xe(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var We=new ia(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function dt(e,t,n,r,u,c,d){this.$=e,this.Aa=t,this.ja=n,this.ff=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=d===void 0?null:d,this.mimeType=this.codecs=null}dt.prototype.ac=function(){return this.Aa},dt.prototype.Yb=function(){return this.ja},dt.prototype.ed=function(){return this.g};function at(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}ne("shaka.media.InitSegmentReference",dt),dt.prototype.getEndByte=dt.prototype.Yb,dt.prototype.getStartByte=dt.prototype.ac;function Je(e,t,n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe){for(A=A===void 0?[]:A,z=z===void 0?Bt:z,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=r,this.ja=u,this.ca=c,this.timestampOffset=d,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=A,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=te===void 0?null:te,this.status=z,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ye===void 0?null:ye,this.s=null,this.j=0,this.o=Pe===void 0?!1:Pe,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=Je.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=Gt},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?ce("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function ht(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())ht(n.value,t)}ne("shaka.media.SegmentReference",Je),Je.prototype.getSegmentData=Je.prototype.ed,Je.prototype.setSegmentData=Je.prototype.yi,Je.prototype.syncAgainst=Je.prototype.Ff,Je.prototype.offset=Je.prototype.offset,Je.prototype.getThumbnailSprite=Je.prototype.Bh,Je.prototype.setThumbnailSprite=Je.prototype.Eg,Je.prototype.hasByterangeOptimization=Je.prototype.Jh,Je.prototype.markAsByterangeOptimization=Je.prototype.lg,Je.prototype.isLastPartial=Je.prototype.Nh,Je.prototype.markAsLastPartial=Je.prototype.mg,Je.prototype.isPartial=Je.prototype.Oh,Je.prototype.markAsPartial=Je.prototype.ng,Je.prototype.isIndependent=Je.prototype.Mh,Je.prototype.markAsNonIndependent=Je.prototype.Zd,Je.prototype.isPreload=Je.prototype.Ph,Je.prototype.markAsPreload=Je.prototype.ef,Je.prototype.markAsUnavailable=Je.prototype.Vh,Je.prototype.getStatus=Je.prototype.bc,Je.prototype.getTileDuration=Je.prototype.Ch,Je.prototype.getTilesLayout=Je.prototype.Dh,Je.prototype.getEndByte=Je.prototype.Yb,Je.prototype.getStartByte=Je.prototype.ac,Je.prototype.getEndTime=Je.prototype.mh,Je.prototype.getStartTime=Je.prototype.getStartTime,Je.prototype.getUris=Je.prototype.$;var Bt=0,Gt=1;Je.Status={Hi:Bt,xj:Gt,$i:2};function kt(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ft(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(mt(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function nt(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=mt(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function mt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Wt(){}function xt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Yt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Vr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var d=Vr(Qn(e.data,3+n,c)),h;return r==="-->"?h=Vr(Qn(e.data,4+n+c)):h=Ti(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=d,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Vr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ti(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Vr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ti(e.data),t):null}function Dn(e){for(var t=0,n=[];xt(e,t);){var r=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Yt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function xn(e,t){for(var n=t=t===void 0?0:t,r=0;xt(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Jt(e,t+6),en(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}ne("shaka.util.Id3Utils",Wt),Wt.getID3Data=xn,Wt.getID3Frames=Dn;function rr(e,t){var n=null,r=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(r=e.M()),{trackId:c,Wf:n,fh:r,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function It(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function $t(e,t,n){var r=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var d=0;d<r;d++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:r,vg:u,eh:c}}function Zt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:Vf(e)}}function vn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function Nn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new Dr(n,0).M(),e.g=8*r,e.i-=r)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function bt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?r<<n|bt(e,n):r}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Lt(e){var t=Sn(e);return bt(e,t+1)-1}function On(e){return e=Lt(e),1&e?1+e>>>1:-1*(e>>>1)}function ut(e){return bt(e,1)===1}function tt(e){return bt(e,8)}function qt(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=On(e),r=(n+r+256)%256),n=r===0?n:r}function Ve(e){return tt(e),Lt(e),Lt(e)}ne("shaka.util.ExpGolomb",Nn);function Ke(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=Ke.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ai(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),d=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(d){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,d={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var A=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,te=k;2<te;){var z=c[G+1]+2;switch(c[G]){case 5:var ye=bh(c.subarray(G+2,G+z));d.audio==-1&&ye==="Opus"?(d.audio=A,d.audioCodec="opus"):d.video==-1&&ye==="AV01"&&(d.video=A,d.videoCodec="av1");break;case 106:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 122:d.audio==-1&&(d.audio=A,d.audioCodec="ec3");break;case 124:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 127:d.audioCodec=="opus"&&(ye=null,c[G+2]===128&&(ye=c[G+3]),ye!=null&&(this.F={channelCount:ye&15?ye&15:2,Zg:ye,sampleRate:48e3}))}G+=z,te-=z}break;case 15:d.audio==-1&&(d.audio=A,d.audioCodec="aac");break;case 17:d.audio==-1&&(d.audio=A,d.audioCodec="aac-loas");break;case 21:d.Sd==-1&&(d.Sd=A);break;case 27:d.video==-1&&(d.video=A,d.videoCodec="avc");break;case 3:case 4:d.audio==-1&&(d.audio=A,d.audioCodec="mp3");break;case 36:d.video==-1&&(d.video=A,d.videoCodec="hvc");break;case 129:d.audio==-1&&(d.audio=A,d.audioCodec="ac3");break;case 132:case 135:d.audio==-1&&(d.audio=A,d.audioCodec="ec3")}h+=k+5}c=d,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function Mt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=sr(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var d=n||0,h=[],E=-1,A=0,k,G=0;G<u;++G){var te=e[G];if(te){if(2<=d&&te==1){if(t&&!h.length&&E==-1&&(te=G-(3<d?3:d),n&&te!=0&&(te=e.subarray(0,te),t.data=li(t.data,te),t.fullData=li(t.fullData,te))),0<=E?(d=G-((3<d?3:d)+1),h.push({data:e.subarray(E+c,d+1),fullData:e.subarray(E,d+1),type:A,time:r})):t&&!h.length&&(E=G-d,0<E&&(E=e.subarray(0,E),t.data=li(t.data,E),t.fullData=li(t.fullData,E))),G>=u-c)return h;G++,E=G,A=this.m=="hvc"?e[G]>>1&63:e[G]&31}d=0}else d++;G>=u-1&&0<=E&&0<=d&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:A,time:r})}return k&&h.push(k),!h.length&&t&&(t.data=li(t.data,e),t.fullData=li(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=li.apply(Pi,T(n.value)),(n=Mt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=li.apply(Pi,T(n.value)),u=Mt(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=li(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,d){var h=(c.pts||0)-(d.pts||0);return(c.dts||0)-(d.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=li.apply(Pi,T(r.value)),c=Mt(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=li(r.data,u),this.g.push(r))}if(e){var d;for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.qf(r,d,void 0),r.nalus.length&&(d=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var A=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||A}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):fn(this)};function fn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(te){return te.type==7}),!e))return t;e=new Nn(e.data);var n=tt(e),r=tt(e),u=tt(e);if(En(e),zr.includes(n)){var c=Lt(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),ut(e)){c=c!==3?8:12;for(var d=0;d<c;d++)ut(e)&&(6>d?qt(e,16):qt(e,64))}}if(En(e),c=Lt(e),c===0)Lt(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Lt(e),d=0;d<c;d++)En(e);En(e),Gn(e,1),c=Lt(e),d=Lt(e);var h=bt(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,A=0,k=0,G=0;return ut(e)&&(E=Lt(e),A=Lt(e),k=Lt(e),G=Lt(e)),t.height=String((2-h)*(d+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*A),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Ue){return Ue.type==33}),!e))return t;var n=new Nn(e.fullData,!0);tt(n),tt(n),bt(n,4);var r=bt(n,3);ut(n);var u=bt(n,2),c=bt(n,1),d=bt(n,5),h=bt(n,32);e=tt(n);for(var E=tt(n),A=tt(n),k=tt(n),G=tt(n),te=tt(n),z=tt(n),ye=[],Pe=[],Ne=0;Ne<r;Ne++)ye.push(ut(n)),Pe.push(ut(n));if(0<r)for(Ne=r;8>Ne;Ne++)bt(n,2);for(Ne=0;Ne<r;Ne++)ye[Ne]&&bt(n,88),Pe[Ne]&&tt(n);Lt(n),r=Lt(n),r==3&&bt(n,1),ye=Lt(n),Pe=Lt(n);var Ge=Ne=0,Te=0,$e=0;return ut(n)&&(Ne+=Lt(n),Ge+=Lt(n),Te+=Lt(n),$e+=Lt(n)),t.width=String(ye-(Ne+Ge)*(r===1||r===2?2:1)),t.height=String(Pe-(Te+$e)*(r===1?2:1)),n=function(Ue){for(var gt=0,Rt=0;32>Rt;Rt++)gt|=(Ue>>Rt&1)<<31-Rt;return gt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+d),u+="."+n.toString(16).toUpperCase(),u+="."+c+z,te&&(u+="."+te.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),A&&(u+="."+A.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ai(e))}function Ai(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}ne("shaka.util.TsParser",Ke),Ke.syncOffset=Ai,Ke.probe=Zr,Ke.prototype.getVideoInfo=Ke.prototype.We,Ke.prototype.getVideoResolution=Ke.prototype.Gh,Ke.prototype.getVideoNalus=Ke.prototype.Od,Ke.prototype.getCodecs=Ke.prototype.bd,Ke.prototype.getStartTime=Ke.prototype.getStartTime,Ke.prototype.getVideoData=Ke.prototype.xc,Ke.prototype.getAudioData=Ke.prototype.Fb,Ke.prototype.getMetadata=Ke.prototype.getMetadata,Ke.prototype.parseNalus=Ke.prototype.qf,Ke.prototype.parseAvcNalus=Ke.prototype.ai,Ke.prototype.parse=Ke.prototype.parse,Ke.prototype.clearData=Ke.prototype.clearData,Ke.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function io(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&He("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{He("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(He("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||He(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}io.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function js(e,t,n){var r=Ju,u=_u;switch(t.mimeType){case"video/webm":r=el;break;case"video/mp4":r=Qa}switch(n){case"DASH":u=Po;break;case"HLS":u=Zs}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}ne("shaka.lcevc.Dec",io),io.prototype.release=io.prototype.release;var Ju=0,el=1,Qa=2,Zs=0,Po=1,_u=-1;function Tu(e,t,n,r){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=r||null,this.j={},this.o=new Et,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=fa(this,this.L),this.C=!1,this.I=new $u(function(){return Qf(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function fa(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Km(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Km(n),e.i.src=e.N,n}function Bc(e,t){var n,r,u,c,d,h,E,A,k,G,te;return Oe(function(z){if(z.g==1)return e.createSegmentIndex?x(z,e.createSegmentIndex(),2):z.u(2);if(!e.segmentIndex)return z.return(!1);if(e.segmentIndex.getNumReferences()==0)return z.return(!0);for(n=yi,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(d=c.value,h=d.mimeType||e.mimeType||"",E=d.codecs||e.codecs||"",A=h+":"+E,!r.has(A)){if(r.add(A),t==n.ma){if(k=Si(h,E),!Cl(k))return z.return(!1)}else if(t==n.fa?E=xl(E):t==n.S&&(E=Ku(E)),G=lm(e,h,E),te=Bu(h,E),!Ot(G)&&!ro(te))return z.return(!1)}return z.return(!0)})}g=Tu.prototype,g.destroy=function(){return this.I.destroy()};function Qf(e){var t,n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1){t=[];for(n in e.j)for(r=e.j[n],u=r[0],e.j[n]=r.slice(0,1),u&&t.push(u.p.catch(hm)),c=m(r.slice(1)),d=c.next();!d.done;d=c.next())h=d.value,h.p.reject(new pt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return x(A,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,X(A)})}g.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return c=yi,x(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=r,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,d=m(e.keys()),h=d.next();case 3:if(h.done){k.u(0);break}return E=h.value,A=e.get(E),x(k,tl(u,E,A,A.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=d.next(),k.u(3)}})};function tl(e,t,n,r){var u,c,d,h,E,A,k,G,te,z,ye,Pe;return Oe(function(Ne){switch(Ne.g){case 1:return u=yi,c=Fe,d=O,x(Ne,Bc(n,t),2);case 2:if(d.call(c,Ne.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Si(n.mimeType,r),t==u.ma){Ja(e,h,e.B,n.external),Ne.u(0);break}if(E=e.A.forceTransmux,(!Ot(h)||!e.B&&pu.includes(h))&&(E=!0),A=Bu(n.mimeType,r),!E){Ne.u(4);break}if(k=Co(u.S,(r||"").split(",")),G=Co(u.fa,(r||"").split(",")),!k||!G){Ne.u(5);break}return e.s=!0,x(Ne,tl(e,u.S,n,k),6);case 6:return x(Ne,tl(e,u.fa,n,G),7);case 7:return Ne.return();case 5:(te=ro(A))&&(z=te(),e.m[t]=z,h=z.convertCodecs(t,A));case 4:ye=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Pe=e.l.addSourceBuffer(ye)}catch(Ge){throw new pt(2,3,3015,Ge,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Pe.mode=XB),e.o.D(Pe,"error",function(){e.j[t][0].p.reject(new pt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Pe,"updateend",function(){return nl(e,t)}),e.h[t]=Pe,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,X(Ne)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Ja(e,t,n,r){e.g||(e.g=new ks(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function jc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Gs(e,t){return e.C||!Object.keys(e.h).length?e=null:t==vr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Dt(e,t){return e.C?null:t==vr?e.g.h:kt(Hn(e,t))}function yn(e,t,n){return e.C?0:t==vr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:mt(this.i.buffered),audio:this.C?[]:mt(Hn(this,"audio")),video:this.C?[]:mt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,r,u,c){var d=null,h=Qn(n);if(pu.includes(u))c=Dn(h),c.length&&r&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(d=Math.round(t.data)/1e3),e.ta([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.ca&&r.ca.timescale){var E=r.ca.timescale;if(!isNaN(E)){var A=0,k=!1;new kr().box("moof",yr).box("traf",yr).O("tfdt",function(G){A=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(d=A)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new Ke,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(d=t),h=h.getMetadata(),h.length&&e.ta(h,c,r?r.endTime:null));return d}function Tr(e,t,n,r,u,c,d,h,E,A){d=d===void 0?!1:d,h=h===void 0?!1:h,E=E===void 0?!1:E,A=A===void 0?!1:A;var k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(gt){switch(gt.g){case 1:if(k=yi,t!=k.ma){gt.u(2);break}if(!e.B){gt.u(3);break}return x(gt,e.ia,4);case 4:G=gt.h,e.g.s=G;case 3:return x(gt,wE(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.$()[0]:null),5);case 5:return gt.return();case 2:if(A||!e.s){gt.u(6);break}return x(gt,Tr(e,k.S,n,r,u,c,d,h,E,!0),7);case 7:return x(gt,Tr(e,k.fa,n,r,u,c,d,h,E,!0),8);case 8:return gt.return();case 6:if(!e.h[t])return gt.return();if(te=e.h[t].timestampOffset,z=e.G[t],e.m[t]&&(z=e.m[t].getOriginalMimeType()),r&&(ye=ur(e,t,n,r,z,te),ye!=null&&(Pe=r.startTime-ye,Ne=Math.abs(te-Pe),(.001<=Ne||d||h)&&(!E||0<Pe||!te)&&(te=Pe,e.pa&&($i(e,t,function(){return Jf(e,t)}),$i(e,t,function(){return ed(e,t,te)}))),Ge=t==k.fa||!(k.fa in e.h),e.B&&Ge&&e.ia.resolve(te))),c&&t==k.fa&&(e.g||Ja(e,"application/cea-608",e.B,!1),e.H||(Te=z.split(";",1)[0],e.H=new St(Te)),r?($e=e.H.i(n),$e.length&&Of(e.g,$e,r.startTime,r.endTime,te)):e.H.init(n)),!e.m[t]){gt.u(9);break}return x(gt,e.m[t].transmux(n,u,r,e.l.duration,t),10);case 10:n=gt.h;case 9:return n=VB(e,n,r?r.startTime:null,t),r&&e.B&&t!=k.ma&&(d||h)&&(Ue=r.startTime,$i(e,t,function(){return Jf(e,t)}),$i(e,t,function(){return ed(e,t,Ue)})),x(gt,$i(e,t,function(){var Rt=n;if(t=="video"&&e.T){var Ht=e.T;Ht.g&&Ht.g.appendBuffer(Rt,"video",Ht.o,-te)}e.h[t].appendBuffer(Rt)}),11);case 11:X(gt)}})}function Ir(e,t){var n=Dt(e,"video")||0;Pf(e.g,t,n)}function fr(e){e.g&&Pf(e.g,"",0)}g.remove=function(e,t,n){var r=this,u;return Oe(function(c){return c.g==1?(u=yi,e==u.ma?x(c,r.g.remove(t,n),0):x(c,$i(r,e,function(){return Hs(r,e,t,n)}),4)):r.s?x(c,$i(r,u.S,function(){return Hs(r,u.S,t,n)}),0):c.u(0)})};function ri(e,t){var n;return Oe(function(r){return r.g==1?(n=yi,t==n.ma?e.g?x(r,e.g.remove(0,1/0),0):r.return():x(r,$i(e,t,function(){return Hs(e,t,0,e.l.duration)}),4)):e.s?x(r,$i(e,n.S,function(){return Hs(e,n.S,0,e.l.duration)}),0):r.u(0)})}g.flush=function(e){var t=this,n;return Oe(function(r){return r.g==1?(n=yi,e==n.ma?r.return():x(r,$i(t,e,function(){t.i.currentTime-=.001,nl(t,e)}),2)):t.s?x(r,$i(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,nl(t,u)}),0):r.u(0)})};function Qr(e,t,n,r,u,c,d,h,E){var A,k,G;return Oe(function(te){return te.g==1?(A=yi,t==A.ma?(c||(e.g.s=n),Mh(e.g,r,u),te.return()):(k=[],x(te,WB(e,t,d,h,E),2))):(G=te.h,G||(k.push($i(e,t,function(){return Jf(e,t)})),e.s&&k.push($i(e,A.S,function(){return Jf(e,A.S)}))),c||(k.push($i(e,t,function(){return ed(e,t,n)})),e.s&&k.push($i(e,A.S,function(){return ed(e,A.S,n)}))),k.push($i(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,nl(e,t)})),e.s&&k.push($i(e,A.S,function(){var z=A.S;e.h[z].appendWindowStart=0,e.h[z].appendWindowEnd=u,e.h[z].appendWindowStart=r,nl(e,z)})),x(te,Promise.all(k),0))})}function qs(e,t,n){var r;return Oe(function(u){return u.g==1?(r=yi,t==r.ma?u.return():(t==r.fa&&(e.ia=new Rr),$i(e,t,function(){return Jf(e,t)}),e.s&&$i(e,r.S,function(){return Jf(e,r.S)}),x(u,$i(e,t,function(){return ed(e,t,n)}),2))):e.s?x(u,$i(e,r.S,function(){return ed(e,r.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return Oe(function(n){return x(n,qE(t,function(){jc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return Oe(function(n){return x(n,qE(t,function(){if(e<t.l.duration)for(var r in t.h){var u={start:function(){},p:new Rr};t.j[r].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function Hs(e,t,n,r){r<=n?nl(e,t):e.h[t].remove(n,r)}function Jf(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,nl(e,t)}function ed(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,nl(e,t)}function nl(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),HE(e,t))}}function $i(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&aR(e,t),n.p}function qE(e,t){var n,r,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:jr(e.I),n=[],r={};for(u in e.h)r.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(r),p:r.Mc},e.j[u].push(c),n.push(r.Mc),e.j[u].length==1&&c.start(),r={Mc:r.Mc};return de(A,2),x(A,Promise.all(n),4);case 4:ve(A,3);break;case 2:throw d=Ce(A),d;case 3:return de(A,5,6),x(A,t(),6);case 6:Xe(A);for(h in e.h)HE(e,h);Ae(A,0);break;case 5:throw E=Ce(A),new pt(2,3,3015,E,e.i.error||"No error in the media element")}})}function HE(e,t){e.j[t].shift(),aR(e,t)}function aR(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new pt(2,3,3017,t)):n.p.reject(new pt(2,3,3015,r,e.i.error||"No error in the media element")),HE(e,t)}}function VB(e,t,n,r){var u=e.qa[r];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(Ha()||ms()||Yr("SOPOpenBrowser"))&&Df(e.G[r])=="mp4"&&(t=Re(t)),t}function zB(e,t,n,r){return $i(e,t,function(){t!==vr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),nl(e,t))})}function YB(e,t){var n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt;return Oe(function(jt){switch(jt.g){case 1:n=yi,e.C=!0,e.s=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(jt,2),e.o.ib(),d=[];for(h in e.m)d.push(e.m[h].destroy());for(E in e.j)for(A=e.j[E],k=A[0],e.j[E]=A.slice(0,1),k&&d.push(k.p.catch(hm)),G=m(A.slice(1)),te=G.next();!te.done;te=G.next())z=te.value,z.p.reject(new pt(2,7,7003,void 0));for(ye in e.h){Pe=e.h[ye];try{e.l.removeSourceBuffer(Pe)}catch(ln){}}return x(jt,Promise.all(d),4);case 4:return e.m={},e.h={},Ne=e.l.duration,e.L=new Rr,e.l=fa(e,e.L),x(jt,e.L,5);case 5:!isNaN(Ne)&&Ne?e.l.duration=Ne:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),Ge=new Rr,Te=e.l.sourceBuffers,$e=t.size,Ue=0,gt=function(){Ue++,Ue===$e&&(Ge.resolve(),e.o.Kb(Te,"addsourcebuffer",gt))},e.o.D(Te,"addsourcebuffer",gt),Rt=m(t.keys()),Ht=Rt.next();case 6:return Ht.done?(e.i.currentTime=r,x(jt,Ge,2)):(Ut=Ht.value,yt=t.get(Ut),x(jt,tl(e,Ut,yt,yt.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Ut]=[],Ht=Rt.next(),jt.u(6);break;case 2:Xe(jt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Ae(jt,0)}})}function sR(e,t){return qE(e,function(){return YB(e,t)})}function WB(e,t,n,r,u){var c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){return Ue.g==1?(c=yi,t==c.ma||(d=Ya(Do(e.G[t])),h=Ca(e.G[t]),A=!1,k=Si(n,r),G=e.A.forceTransmux,(!Ot(k)||!e.B&&pu.includes(k))&&(G=!0),G&&(te=Bu(n,r),z=ro(te))&&(E=z(),ye=Co(c.S,(r||"").split(",")),Pe=Co(c.fa,(r||"").split(",")),ye&&Pe?(A=!0,Ne=Pe,t==c.S&&(Ne=ye),k=E.convertCodecs(t,Bu(n,Ne))):k=E.convertCodecs(t,te)),Ge=Ya(Do(k)),Te=Ca(k),d===Ge&&h===Te)?Ue.return(!1):($e=!0,(e.s||A&&E&&!e.m[t])&&($e=!1),$e&&e.A.codecSwitchingStrategy==="smooth"&&Un()?x(Ue,zB(e,t,k,E),3):(E&&E.destroy(),x(Ue,sR(e,u),3)))):Ue.return(!0)})}function $B(e,t,n,r){if(t==vr)var u=!1;else{u=Ya(Do(e.G[t]));var c=Ca(e.G[t]),d=Si(n,r),h=e.A.forceTransmux;(!Ot(d)||!e.B&&pu.includes(d))&&(h=!0),n=Bu(n,r),h&&(h=ro(n))&&(h=h(),d=h.convertCodecs(t,n),h.destroy()),t=Ya(Do(d)),d=Ca(d),u=u!==t||c!==d}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var Km=p.URL.createObjectURL,XB="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(r,u){return Math.max(r,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=r-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},ne("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function uR(e,t,n){this.j=n,this.l=e,this.s=lR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}uR.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function QB(e,t){e.i=t}function JB(e){this.g=e}function lR(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(mt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function KE(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new Et,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return VE(c)}),this.m=new pr(function(){VE(c)}).$a(this.s.gapJumpTimerTime)}KE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},KE.prototype.mf=function(){this.o=!0,VE(this)};function VE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=lR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=nt(n,t,e.s.gapDetectionThreshold),r==null||r==0&&!e.o||(u=n.start(r),u>=e.B.pb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function td(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=e8.value().get(t),n.na(e,t,r))}var e8=new ia(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function cR(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Et,this.i=new pR(e),td(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){dR(u,u.j())})}cR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function zE(e){return e.o?e.g.currentTime:e.j()}function fR(e,t){0<e.g.readyState?gR(e.i,t):td(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){dR(e,e.j())})}function dR(e,t){.001>Math.abs(e.g.currentTime-t)?hR(e):(e.h.na(e.g,"seeking",function(){hR(e)}),gR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function hR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function pR(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}pR.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function gR(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function mR(e){this.g=e,this.j=!1,this.h=null,this.i=new Et}g=mR.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;td(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function vR(e,t,n,r,u,c){var d=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=t8(e,n,c),this.j=new KE(e,t.presentationTimeline,n,this.o,c),this.h=new cR(e,function(){e:{var h=d.j;h.j=!0,h.o=!1;var E=zE(d.h);if(h=ER(d,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!d.s||d.s<E-1)){d.s=E,fR(d.h,h),h=void 0;break e}d.A(),h=void 0}return h},function(h){var E=d.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=r;return h==null?h=1/0>d.g.getDuration()?d.g.$b():d.g.pb():0>h&&(h=d.g.pb()+h),yR(d,_R(d,h))}),this.m=new pr(function(){if(d.i.readyState!=0&&!d.i.paused){var h=zE(d.h),E=d.g.$b(),A=d.g.pb();3>A-E&&(E=A-3),h<E&&(h=ER(d,h),d.i.currentTime=h)}})}g=vR.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){fR(this.h,e)},g.Dd=function(){var e=zE(this.h);return 0<this.i.readyState&&!this.i.paused?_R(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function yR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function ER(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),d=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(r);return n=e.g.dd(n+r),t>=d?yR(e,t):t>c?c:t<u?Ft(e.i.buffered,E)?E:n:t>=h||Ft(e.i.buffered,t)?t:n}function _R(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function t8(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new uR(new JB(e),t.stallThreshold,n),QB(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Je(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;r--;var u=this.get(r+1),c=-1;if(u&&0<u.g.length)for(var d=u.g.length-1;0<=d;--d){var h=u.g[d];if(e>=h.startTime&&e<h.endTime){if(!t){for(;d&&!h.l;)d--,h=u.g[d];if(!h.l)return ce("No independent partial segment found!"),null}r++,c=d-1;break}}return new xa(this,r,c,n)};function YE(e,t,n){return e=new Je(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}ne("shaka.media.SegmentIndex",wr),wr.forSingleSegment=YE,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function xa(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}xa.prototype.ie=function(e){this.reverse=e},xa.prototype.dh=function(){return this.h},xa.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},xa.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},ne("shaka.media.SegmentIterator",xa),xa.prototype.next=xa.prototype.next,xa.prototype.current=xa.prototype.current,xa.prototype.currentPosition=xa.prototype.dh,xa.prototype.setReverse=xa.prototype.ie;function Ei(){wr.call(this,[]),this.h=[]}Y(Ei,wr),g=Ei.prototype,g.clone=function(){var e=new Ei;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},ne("shaka.media.MetaSegmentIndex",Ei),Ei.prototype.updateEvery=Ei.prototype.ke,Ei.prototype.fit=Ei.prototype.sc,Ei.prototype.mergeAndEvict=Ei.prototype.kd,Ei.prototype.evict=Ei.prototype.La,Ei.prototype.merge=Ei.prototype.ae,Ei.prototype.offset=Ei.prototype.offset,Ei.prototype.get=Ei.prototype.get,Ei.prototype.find=Ei.prototype.find,Ei.prototype.forEachTopLevelReference=Ei.prototype.tc,Ei.prototype.release=Ei.prototype.release;function ip(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}ip.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},ip.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},ip.prototype.Xb=function(){return this.g.Xb()};function TR(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){SR(t,!1)}).$a(.25)}TR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function SR(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function n8(){this.g=null,this.h=[]}function WE(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function r8(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function i8(){this.i=this.h=null,this.g=[]}function $E(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Vm(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new n8,this.h=new i8}function XE(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function o8(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function op(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var r=t.next().value;if(n&&(r=t.next().value),r){for(;e.g.size<e.m&&r!=null&&(n=!0,r.preload&&r.ja!=null&&(n=!1),r.bc()==2&&(n=!1),n&&r.ca&&wR(e,r.ca),n&&!e.g.has(r)&&(n=new JE(e.j),bR(n,r,e.h),e.g.set(r,n)),e.l=r.startTime,!(e.h.fastSwitching&&r.md&&r.Wd));)r=t.next().value;QE(e)}}}function wR(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(r){return at(r,t)})){var n=new JE(e.j);bR(n,t,e.h),e.i.set(t,n)}}function AR(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&ap(e,n)}function rl(e){AR(e,e.g),AR(e,e.i),e.l=0}XE.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&ap(this,r);t&&QE(this)};function QE(e){for(var t=Array.from(e.g.keys()),n={},r=m(e.i.keys()),u=r.next();!u.done;n={wd:n.wd},u=r.next())n.wd=u.value,t.some(function(c){return function(d){return at(d.ca,c.wd)}}(n))||ap(e,n.wd)}function IR(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&ap(e,r)}QE(e)}function a8(e,t){t&&t!==e.h&&(rl(e),e.h=t)}function ap(e,t){var n=e.g;t instanceof dt&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function JE(e){this.g=e,this.fe=this.Ef=null}function bR(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(u){return Oe(function(c){if(c.g==1)return 0<r.byteLength?r=li(r,u):r=u,e.Ef?x(c,e.Ef(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}JE.prototype.abort=function(){this.fe&&this.fe.abort()};function e_(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}Y(e_,Sr),e_.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function zm(e){Sr.call(this),this.g=new Map,this.h=e}Y(zm,Sr),zm.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function s8(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function u8(e,t,n){var r=s8(e,t.contentType);l8(e,r),e={ff:t,position:n},r=r.nd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}zm.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.nd,u=r.length-1;0<=u;u--){var c=r[u];if(c.position<=e){r=c.ff;break e}}r=null}if((u=r)&&(u=n.Uf,u=!(u===r||u&&r&&u.bandwidth==r.bandwidth&&u.audioSamplingRate==r.audioSamplingRate&&u.codecs==r.codecs&&u.contentType==r.contentType&&u.frameRate==r.frameRate&&u.height==r.height&&u.mimeType==r.mimeType&&u.channelsCount==r.channelsCount&&u.pixelAspectRatio==r.pixelAspectRatio&&u.width==r.width)),u)e:{if(u=e,c=r.contentType,(c=this.h()[c])&&0<c.length){var d=c[c.length-1].end;if(u>=c[0].start&&u<d){u=!0;break e}}u=!1}u&&(n.Uf=r,JSON.stringify(r),n=new Wn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function l8(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,d){return!(c.position<=n&&d+1<u.length&&u[d+1].position<=n||c.position>=r)})}else t.nd=[]}function sp(e,t,n,r,u){return e=Oi(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function CR(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new $u(function(){return c8(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=CR.prototype,g.destroy=function(){return this.l.destroy()};function c8(e){var t,n,r,u,c,d,h;return Oe(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,up(u),t.push(lp(u));for(c=m(e.o.values()),d=c.next();!d.done;d=c.next())h=d.value,rl(h);return x(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,X(E)})}g.configure=function(e){if(this.h=e,this.I=new qh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(rl(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,rl(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(vr))&&t.W&&(rl(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(rl(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(IR(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=t_(this,n.stream));e.disableAudioPrefetch||g8(this)},g.start=function(e){var t=this;return Oe(function(n){if(n.g==1)return x(n,p8(t,e||new Map),2);jr(t.l),t.C=!0,X(n)})};function f8(e,t){var n,r,u,c,d,h;Oe(function(E){switch(E.g){case 1:return n=yi,e.H++,r=e.H,de(E,2),x(E,ri(e.g.V,n.ma),4);case 4:ve(E,3);break;case 2:u=Ce(E),e.g&&e.g.onError(u);case 3:c=Si(t.mimeType,t.codecs),Ja(e.g.V,c,e.m.sequenceMode,t.external),d=e.g.V.F,(d.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(h=NR(e,t),e.i.set(n.ma,h),Ts(e,h,0)),X(E)}})}function d8(e){var t=e.i.get(vr);t&&(up(t),lp(t).catch(function(){}),e.i.delete(vr)),e.s=null}function RR(e,t){var n=0>e.g.eb(),r=e.i.get("video");r&&r.Z&&r.Z.ie(n),(r=e.i.get("audio"))&&r.Z&&r.Z.ie(n),(r=e.i.get(vr))&&r.Z&&r.Z.ie(n),(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.jc&&(nd(e,t,!1,0,!1),n.jc=r):(t=n.jc)&&(n.jc=null,nd(e,t,!0,0,!1)))}function xR(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&nd(e,t.video,n,r,u,c),t.audio&&nd(e,t.audio,n,r,u,c))}function Ym(e,t){Oe(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):x(n,t.createSegmentIndex(),2):n.return();nd(e,t,!0,0,!1),X(n)})}function nd(e,t,n,r,u,c){var d=e.i.get(t.type);d||t.type!=vr?d&&(d.jc&&(t.trickModeVideo?(d.jc=t,t=t.trickModeVideo):d.jc=null),d.stream!=t||u)&&(e.o.has(t)?d.W=e.o.get(t):d.W&&a8(d.W,t),t.type==vr&&(u=Si(t.mimeType,t.codecs),Ja(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(d.stream)||d.stream.closeSegmentIndex&&d.stream.closeSegmentIndex(),d.stream=t,d.Z=null,d.Of=!!c,n&&(d.Xc?d.le=!0:d.Qa?(d.Lb=!0,d.Id=r,d.le=!0):(up(d),o_(e,d,!0,r).catch(function(h){e.g&&e.g.onError(h)}))),h8(e,d).catch(function(h){e.g&&e.g.onError(h)})):f8(e,t)}function h8(e,t){var n,r;return Oe(function(u){if(u.g==1)return t.Ya?(n=t.stream,r=t.Ya,n.segmentIndex?u.u(2):x(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=r||t.stream!=n)return u.return();var c=e.g.Ld(),d=Dt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(d||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),X(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:r==vr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,r),u=Ft(u,e)),u||((Dt(this.g.V,r)!=null||n.Qa)&&Wm(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),r===vr&&(r=this.g.V,r.H&&r.H.h()),n.od=!0)}};function Wm(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Gs(e.g.V,t.type)==null?t.ub==null&&Ts(e,t,0):(up(t),o_(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function p8(e,t){var n,r,u,c,d,h,E,A,k,G;return Oe(function(te){if(te.g==1){if(n=yi,!e.j)throw new pt(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.ma,e.s),u.add(e.s)),c=e.g.V,x(te,c.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),d=m(r.keys()),h=d.next();!h.done;h=d.next())E=h.value,A=r.get(E),e.i.has(E)||(k=NR(e,A),t.has(A.id)&&(G=t.get(A.id),o8(G,function(z,ye,Pe){return $m(z,ye,Pe||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),Ts(e,k,0));X(te)})}function NR(e,t){return{stream:t,type:t.type,Z:null,W:t_(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function t_(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===vr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===vr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new XE(e.h.segmentPrefetchLimit,t,function(r,u,c){return $m(r,u,c||null,e.h.retryParameters,e.g.zb)}):null}function g8(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r={},u=m(e.m.variants),c=u.next();!c.done;r={Fa:r.Fa},c=u.next())if(r.Fa=c.value,r.Fa.audio)if(e.o.has(r.Fa.audio)){if(c=e.o.get(r.Fa.audio),IR(c,t),!(0<t&&n.some(function(h){return function(E){return Zu(h.Fa.audio.language,E)}}(r)))){var d=e.i.get(r.Fa.audio.type);c!==(d&&d.W)&&rl(c),e.o.delete(r.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return Zu(h.Fa.audio.language,E)}}(r))||!(c=t_(e,r.Fa.audio))||(r.Fa.audio.segmentIndex||r.Fa.audio.createSegmentIndex(),e.o.set(r.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function m8(e,t){var n,r,u,c,d;return Oe(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return x(h,o_(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,x(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||Ts(e,t,0),h.return();case 4:de(h,6),r=v8(e,t),r!=null&&(Ts(e,t,r),t.gd=!1),ve(h,7);break;case 6:return u=Ce(h),x(h,MR(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return x(h,e.g.V.endOfStream(),10);case 10:jr(e.l),d=e.g.V.getDuration(),d!=0&&d<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(d),X(h)}})}function v8(e,t){if(r_(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==vr&&fr(e.g.V),!e.g.V.ea&&t.type!=vr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.La(n,!0),op(u,n);r=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.m.presentationTimeline.getDuration()-r,h=Dt(e.g.V,t.type);if(1e-6>d&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(vr))&&r_(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=y8(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,d=Array.from(e.i.values()),d=m(d),h=d.next();!h.done;h=d.next())h=h.value,r_(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return r>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),op(t.W,u.startTime)),E8(e,t,n,u).catch(function(){}),null)}function y8(e,t,n,r){if(t.Z)return t.Z.current();if(t.Oa||r)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:r,!1,0>e.g.eb()),t.Z&&t.Z.next().value;r=e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.eb();var c=null;return r&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function E8(e,t,n,r){var u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(u=yi,c=t.stream,d=t.Z,t.Qa=!0,de(Ue,2),r.bc()==2)throw new pt(1,1,1011);return x(Ue,w8(e,t,r),4);case 4:return jr(e.l),e.A?Ue.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||r.m)?(G=new Uint8Array(0),z=te=!1,Pe=function(gt){var Rt,Ht,Ut;return Oe(function(yt){switch(yt.g){case 1:if(te||(z=!0,jr(e.l),e.A))return yt.return();if(de(yt,2),G=T8(G,gt),Rt=!1,Ht=0,new kr().box("mdat",function(jt){Ht=jt.size+jt.start,Rt=!0}).parse(G,!1,!0),!Rt){yt.u(4);break}return Ut=G.subarray(0,Ht),G=G.subarray(Ht),x(yt,n_(e,t,n,c,r,Ut,!0),5);case 5:t.W&&t.Z&&op(t.W,r.startTime,!0);case 4:ve(yt,0);break;case 2:ye=Ce(yt),X(yt)}})},x(Ue,i_(e,t,r,Pe),9)):(A=i_(e,t,r),x(Ue,A,7)));case 7:return k=Ue.h,jr(e.l),e.A?Ue.return():(jr(e.l),t.Lb?(t.Qa=!1,Ts(e,t,0),Ue.return()):x(Ue,n_(e,t,n,c,r,k),6));case 9:if(Ne=Ue.h,ye)throw ye;if(z){Ue.u(10);break}return te=!0,jr(e.l),e.A?Ue.return():t.Lb?(t.Qa=!1,Ts(e,t,0),Ue.return()):x(Ue,n_(e,t,n,c,r,Ne),10);case 10:t.W&&t.Z&&op(t.W,r.startTime,!0);case 6:if(jr(e.l),e.A)return Ue.return();t.Oa=r,d.next(),t.Qa=!1,t.uf=!1,Ge=e.g.V.ob(),Te=Ge[t.type],JSON.stringify(Te),t.Lb||e.g.mf(r,t.stream),Ts(e,t,0),ve(Ue,0);break;case 2:if($e=Ce(Ue),jr(e.l,$e),e.A)return Ue.return();if(t.Qa=!1,$e.code==7001)t.Qa=!1,up(t),Ts(e,t,0),Ue.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Ue.u(0);else if($e.code==3017)S8(e,t,$e),Ue.u(0);else return t.gd=!0,$e.category==1&&t.W&&ap(t.W,r),$e.severity=2,x(Ue,MR(e,t,$e),0)}})}function _8(e,t,n){var r,u,c,d,h;return Oe(function(E){if(E.g==1)return r=t,r.cryptoKey?E.u(2):x(E,r.fetchKey(),3);if(u=r.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,d=u.byteLength-1;0<=d;d--)u[d]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function T8(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function S8(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}Ts(e,t,4)}function w8(e,t,n){var r,u,c,d,h,E,A,k,G,te,z,ye,Pe;return Oe(function(Ne){switch(Ne.g){case 1:if(r=yi,u=[],c=Math.max(0,n.appendWindowStart-.1),d=n.appendWindowEnd+.01,h=Ya(t.stream.codecs),E=Ca(t.stream.mimeType),A=n.timestampOffset,A==t.cf&&c==t.af&&d==t.$e&&h==t.bf&&E==t.kg){Ne.u(2);break}if(k=t.bf&&t.kg&&$B(e.g.V,t.type,E,h),!k){Ne.u(3);break}if(G=null,t.type===r.fa?G=e.i.get(r.S):t.type===r.S&&(G=e.i.get(r.fa)),!G){Ne.u(3);break}return x(Ne,lp(G).catch(function(){}),5);case 5:G.ec=null,Wm(e,G);case 3:return te=function(){var Ge,Te,$e;return Oe(function(Ue){if(Ue.g==1)return Ge=new Map,e.j.audio&&Ge.set(r.S,e.j.audio),e.j.video&&Ge.set(r.fa,e.j.video),de(Ue,2),t.af=c,t.$e=d,t.bf=h,t.kg=E,t.cf=A,Te=e.m.sequenceMode||e.m.type=="HLS",x(Ue,Qr(e.g.V,t.type,A,c,d,Te,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,Ge),4);if(Ue.g!=2)return ve(Ue,0);throw $e=Ce(Ue),t.af=null,t.$e=null,t.bf=null,t.cf=null,$e})},x(Ne,te(),2);case 2:return at(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(z=i_(e,t,n.ca),ye=function(){var Ge,Te,$e,Ue,gt,Rt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:return de(Ut,2),x(Ut,z,4);case 4:return Ge=Ut.h,jr(e.l),Te=null,$e=new Map,Ue={projection:null,hfov:null},gt=new kr,gt.box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(yt){Te=It(yt.reader,yt.version).timescale}).box("hdlr",function(yt){switch(yt=yt.reader,yt.skip(8),yt.hc()){case"soun":$e.set(r.S,Te);break;case"vide":$e.set(r.fa,Te)}Te=null}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("encv",wi).box("avc1",wi).box("avc3",wi).box("hev1",wi).box("hvc1",wi).box("dvav",wi).box("dva1",wi).box("dvh1",wi).box("dvhe",wi).box("vexu",yr).box("proj",yr).O("prji",function(yt){yt=yt.reader.hc(),Ue.projection=yt}).box("hfov",function(yt){yt=yt.reader.M()/1e3,Ue.hfov=yt}).parse(Ge),b8(e,Ue),$e.has(t.type)?n.ca.timescale=$e.get(t.type):Te!=null&&(n.ca.timescale=Te),Rt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,x(Ut,e.g.Qf(t.type,Ge),5);case 5:return x(Ut,Tr(e.g.V,t.type,Ge,null,t.stream,Rt),6);case 6:ve(Ut,0);break;case 2:throw Ht=Ce(Ut),t.ec=null,Ht}})},e.g.Yh(n.startTime,n.ca),u.push(ye()))),e.m.sequenceMode&&(Pe=t.Oa?t.Oa.j:null,n.j!=Pe&&u.push(qs(e.g.V,t.type,n.startTime))),x(Ne,Promise.all(u),0)}})}function n_(e,t,n,r,u,c,d){d=d===void 0?!1:d;var h,E,A,k,G,te;return Oe(function(z){switch(z.g){case 1:return h=r.closedCaptions&&0<r.closedCaptions.size,A=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(A||k)&&(E=new kr),A&&E.O("emsg",function(ye){var Pe=r.emsgSchemeIdUris;if(ye.version===0)var Ne=ye.reader.hc(),Ge=ye.reader.hc(),Te=ye.reader.M(),$e=ye.reader.M(),Ue=ye.reader.M(),gt=ye.reader.M(),Rt=u.startTime+$e/Te;else Te=ye.reader.M(),Rt=ye.reader.Cc()/Te+u.timestampOffset,$e=Rt-u.startTime,Ue=ye.reader.M(),gt=ye.reader.M(),Ne=ye.reader.hc(),Ge=ye.reader.hc();ye=ye.reader.sb(ye.reader.getLength()-ye.reader.wa()),(Pe&&Pe.includes(Ne)||e.h.dispatchAllEmsgBoxes)&&(Ne=="urn:mpeg:dash:event:2012"?e.g.Zh():(Pe=new Map().set("detail",{startTime:Rt,endTime:Rt+Ue/Te,schemeIdUri:Ne,value:Ge,timescale:Te,presentationTimeDelta:$e,eventDuration:Ue,id:gt,messageData:ye}),Pe=new Wn("emsg",Pe),Pe.cancelable=!0,e.g.onEvent(Pe),Pe.defaultPrevented||Ne!="https://aomedia.org/emsg/ID3"&&Ne!="https://developer.apple.com/streaming/emsg-id3"||(Ne=Dn(ye),Ne.length&&u&&e.g.$h([{cueTime:u.startTime,data:ye,frames:Ne,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ye){if(!e.F&&u.ca.timescale){var Pe=ye.reader,Ne=ye.version;Pe.M(),ye=Pe.M();var Ge=Pe.M();ye=1e3*ye+Ge/Math.pow(2,32)*1e3,Ne===0?Pe=Pe.M():(Ne=Pe.M(),Pe=Pe.M(),Pe=Ne*Math.pow(2,32)+Pe),ye=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ye).getTime(),Pe=new Map().set("detail",{wallClockTime:ye,programStartDate:new Date(ye-Pe/u.ca.timescale*1e3)}),Pe=new Wn("prft",Pe),e.g.onEvent(Pe),e.F=!0}}),(A||k)&&E.parse(c),x(z,A8(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,te=t.Of,t.Of=!1,x(z,e.g.Qf(t.type,c),3);case 3:return x(z,Tr(e.g.V,t.type,c,u,r,h,G,te,d),4);case 4:jr(e.l),X(z)}})}function A8(e,t,n){var r,u,c,d;return Oe(function(h){if(h.g==1)return r=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Gs(e.g.V,t.type),u==null?h.return():(c=n-u,d=c-r,d<=e.h.evictionGoal?h.return():x(h,e.g.V.remove(t.type,u,u+d),2));jr(e.l),X(h)})}function r_(e){return e&&e.type==vr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function i_(e,t,n,r){var u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:if(u=n.ed())return A.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof dt&&(G=k.i),G.has(n)?(k=G.get(n),r&&(k.Ef=r),c=k.fe):c=null}return c||(c=$m(n,t.stream,r||null,e.h.retryParameters,e.g.zb)),d=0,t.Z&&(d=t.Z.h),t.Ya=c,x(A,c.promise,2);case 2:if(h=A.h,t.Ya=null,E=h.data,!n.aesKey){A.u(3);break}return x(A,_8(E,n.aesKey,d),4);case 4:E=A.h;case 3:return A.return(E)}})}function $m(e,t,n,r,u){var c=e instanceof Je?e:void 0,d=c?1:0;return e=sp(e.$(),e.Aa,e.ja,r,n),e.contentType=t.type,u.request($a,e,{type:d,stream:t,segment:c})}function o_(e,t,n,r){var u,c;return Oe(function(d){if(d.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&rl(t.W),r?(u=e.g.Ld(),c=e.g.V.getDuration(),x(d,e.g.V.remove(t.type,u+r,c),3)):x(d,ri(e.g.V,t.type),4);if(d.g!=3)return jr(e.l),n?x(d,e.g.V.flush(t.type),3):d.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||Ts(e,t,0),X(d)})}function Ts(e,t,n){var r=t.type;(r!=vr||e.i.has(r))&&(t.ub=new Ps(function(){var u;return Oe(function(c){if(c.g==1)return de(c,2),x(c,m8(e,t),4);if(c.g!=2)return ve(c,0);u=Ce(c),e.g&&e.g.onError(u),X(c)})}).X(n))}function up(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function lp(e){return Oe(function(t){return e.Ya?x(t,e.Ya.abort(),0):t.u(0)})}function MR(e,t,n){var r;return Oe(function(u){if(u.g==1)return x(u,Hh(e.I),2);jr(e.l),r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<r&&(n.handled=e.g.Jd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function I8(e){var t,n,r,u,c,d;return Oe(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,r=yi,(u=e.i.get(r.S))&&(u.ec=null,Wm(e,u),lp(u).catch(function(){})),(c=e.i.get(r.fa))&&(c.ec=null,Wm(e,c),lp(c).catch(function(){})),d=new Map,e.j.audio&&d.set(r.S,e.j.audio),e.j.video&&d.set(r.fa,e.j.video),x(h,sR(e.g.V,d),2))):h.return(!0)})}function b8(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function a_(){}function s_(e,t,n,r,u){var c=u in r,d=!0,h;for(h in t){var E=u+"."+h,A=c?r[u]:n[h];c||h in n?t[h]===void 0?A===void 0||c?delete e[h]:e[h]=Wa(A):A.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=Wa(A)),E=s_(e[h],t[h],A,r,E),d=d&&E):typeof t[h]!=typeof A||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=A.constructor?(ce("Invalid config, wrong type for "+E),d=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&He("Unexpected number of arguments for "+E),e[h]=t[h]):(ce("Invalid config, unrecognized key "+E),d=!1)}return d}function Xm(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function rd(e,t){return e&&t}ne("shaka.util.ConfigUtils",a_),a_.convertToConfigObject=Xm,a_.mergeConfigObjects=s_;function es(){}function DR(e){return e=Va(e),new si(e).wb}function cp(e,t,n){function r(h){tn(c).setUint32(d,h.byteLength,!0),d+=4,c.set(Qn(h),d),d+=h.byteLength}if(!n||!n.byteLength)throw new pt(2,6,6015);var u;typeof t=="string"?u=Nf(t,!0):u=t,e=Va(e),e=Nf(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),d=0;return r(e),r(u),r(n),c}function PR(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Va(e).split("skd://").pop(),cp(e,n,t))}function u_(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}ne("shaka.util.FairPlayUtils",es),es.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Vr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Ti(Ho(n)))}},es.expressplayFairPlayRequest=function(e,t){u_(e,t)},es.conaxFairPlayRequest=function(e,t){u_(e,t)},es.ezdrmFairPlayRequest=function(e,t){u_(e,t)},es.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=du(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=za("spc="+e))},es.expressplayInitDataTransform=function(e,t,n){return PR(e,t,n)},es.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Va(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var r=new ArrayBuffer(2*n.length);r=Ou(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return cp(e,r,t)},es.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Va(e).split(";").pop(),cp(e,n,t))},es.verimatrixInitDataTransform=function(e,t,n){return PR(e,t,n)},es.initDataTransform=cp,es.defaultGetContentId=DR,es.isFairPlaySupported=function(){var e;return Oe(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},de(t,2),x(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Ce(t),t.return(!1))})};function l_(){}function id(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ua(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,A,k){return p.shakaMediaKeysPolyfill&&A=="skd"&&(A=k.serverCertificate,k=DR(E),E=cp(E,k,A)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ms(),minHdcpVersion:"",ignoreDuplicateInitData:!ku()};(ms()||xr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;ku()||Lu()||Yr("Tizen 4")||oa()&&fu()===38||oa()&&fu()===53||oa()&&fu()===68||aa()&&(!aa()||!Yr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&Il()||(n="smooth",r=!0),r={retryParameters:ua(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Qm,manifestPreprocessorTXml:Jm,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Lu()||ku()||oa()&&fu()===38||xr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Qm,manifestPreprocessorTXml:Jm,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:ua(),failureCallback:function(E){return rd([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(oa()||Ha()||aa()||ys())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return Oe(function(A){return A.return(E)})},downloadSizeCallback:function(E){var A;return Oe(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?x(k,navigator.storage.estimate(),3):k.return(!0):(A=k.h,k.return(A.usage+E<.95*A.quota))})},progressCallback:function(E,A){return rd([E,A])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return rd([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,A){return rd([E,A])}};var d=!1;(oa()||Ha()||aa()||ys()||Ec()||xr()||ms())&&(d=!0);var h={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:d}};return c.trackSelectionCallback=function(E){return Oe(function(A){return A.return(C8(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function Zc(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return s_(e,t,n||id(),r,"")}function C8(e,t,n){var r=n;r=="AUTO"&&(r=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=Rl(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Cr(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var d=n.filter(function(h){return h.height&&480>=h.height});for(d.length&&(d.sort(function(h,E){return E.height-h.height}),n=d.filter(function(h){return h.height==d[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=vr&&n.type!="image"||t.push(n);return t}function Qm(e){return rd([e],e)}function Jm(e){return rd([e],e)}ne("shaka.util.PlayerConfiguration",l_),l_.mergeConfigObjects=Zc,l_.createDefault=id;function il(e,t,n,r,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=r,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new Vm,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}Y(il,Sr);function ev(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function R8(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function OR(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=il.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function x8(e){return e.da=!0,e.i}function N8(e){return e.sa=!0,e.j}function M8(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function D8(e){return e.ea=!0,e.l}function P8(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return x(n,Promise.resolve(),2);case 2:return de(n,3),x(n,O8(e),5);case 5:return e.o?n.return():(e.qa.resolve(),x(n,L8(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Pl(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),gm(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var r=e.g.abrFactory;e.s=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Rb){r=e.h.presentationTimeline.R();var u=jf(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&LR(e,u.video,r),u.audio&&LR(e,u.audio,r))}return x(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),ve(n,0);break;case 3:throw t=Ce(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function c_(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function O8(e){var t,n,r,u,c;return Oe(function(d){if(d.g==1)return c_(e,"manifest-parser"),e.j||(e.B=be(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,c_(e,"manifest"),e.h?d.u(2):(n=e,x(d,e.j.start(e.K,e.Ub),3));if(d.g!=2&&(n.h=d.h),r=new Wn("manifestparsed",void 0),e.dispatchEvent(r),e.h.variants.length==0)throw new pt(2,4,4036);k8(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,X(d)})}function L8(e){var t,n,r,u,c;return Oe(function(d){switch(d.g){case 1:c_(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=Ac(e.h.variants,h.h.restrictions,h.i),!t){d.u(2);break}return n=new Wn("trackschanged",void 0),x(d,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return r=jf(e.h.variants),x(d,Um(e.l,r,e.h.offlineSessionIds),4);case 4:return x(d,je(e.A,e.h),5);case 5:if(u=d.h,!u){d.u(0);break}return c=new Wn("trackschanged",void 0),x(d,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(d)}})}g.configure=function(e,t){e=Xm(e,t),Zc(this.g,e)},g.getConfiguration=function(){return Wa(this.g)};function LR(e,t,n){var r,u,c,d,h;Oe(function(E){if(E.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new XE(r,t,function(A,k,G){return $m(A,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),x(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(d=t.segmentIndex.xb(c))?d.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&wR(u,h.ca):op(u,h.startTime)),X(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,r;return Oe(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return x(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return x(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return x(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())r=n.value,rl(r);X(u)}})};function k8(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}ne("shaka.media.PreloadManager",il),il.prototype.destroy=il.prototype.destroy,il.prototype.waitForFinish=il.prototype.Fi;function tv(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:od,cc:function(r,u){return Gc(n,"enter",r,u)}},{oc:fp,nc:od,cc:function(r,u){return Gc(n,"enter",r,u)}},{oc:dp,nc:od,cc:function(r,u){return Gc(n,"enter",r,u)}},{oc:od,nc:fp,cc:function(r,u){return Gc(n,"exit",r,u)}},{oc:od,nc:dp,cc:function(r,u){return Gc(n,"exit",r,u)}},{oc:fp,nc:dp,cc:function(r,u){return Gc(n,"skip",r,u)}},{oc:dp,nc:fp,cc:function(r,u){return Gc(n,"skip",r,u)}}],this.h=new Et,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Y(tv,Sr),tv.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},tv.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?fp:e>r.endTime?dp:od;this.g.set(r,c);for(var d=m(this.m),h=d.next();!h.done;h=d.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(r,t)}}};function Gc(e,t,n,r){t=new Wn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var fp=1,od=2,dp=3;function f_(e,t,n){var r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:var G=new si(e).Pa.split("/").pop().split(".");return r=G.length==1?"":G.pop().toLowerCase(),(u=F8[r])?k.return(u):(c=0,d=Oi([e],n),de(k,2),d.method="HEAD",x(k,t.request(c,d).promise,4));case 4:h=k.h,u=h.headers["content-type"],ve(k,3);break;case 2:if(E=Ce(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return d.method="GET",x(k,t.request(c,d).promise,6);case 6:A=k.h,u=A.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var F8={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function kR(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(d){return kR(d,e)}).join("");var n=[],r=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=FR(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=FR(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(d,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+d+"</"+h+">"},e.payload)}function FR(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function d_(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(d_(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=kR(r,t),n.push(u)}return n}function da(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=da.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(UR(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=d_(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=m(t);for(var u=t.next();!u.done;r={qc:r.qc},u=t.next())r.qc=u.value,e.some(function(c){return function(d){return d.startTime==c.qc.startTime&&d.endTime==c.qc.endTime&&d.text==c.qc.payload}}(r))||(u=U8(r.qc))&&n.push(u);for(e=n.slice().sort(function(c,d){return c.startTime!=d.startTime?c.startTime-d.startTime:c.endTime!=d.endTime?c.endTime-d.startTime:"line"in VTTCue.prototype?n.indexOf(d)-n.indexOf(c):n.indexOf(c)-n.indexOf(d)}),e=m(e),r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},g.destroy=function(){return this.g&&(UR(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function U8(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function UR(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}ne("shaka.text.SimpleTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function ha(){}g=ha.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},ne("shaka.text.StubTextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.remove=ha.prototype.remove,ha.prototype.configure=ha.prototype.configure;function BR(){}function hp(e){for(;e.firstChild;)e.removeChild(e.firstChild)}ne("shaka.util.Dom",BR),BR.removeAllChildren=hp;function pa(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){r.A.paused||ad(r)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Et,this.j.D(document,"fullscreenchange",function(){ad(r,!0)}),this.j.D(this.A,"seeking",function(){ad(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){ad(r,!0)}),this.o.observe(this.g)),this.B=new Map}g=pa.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var r=e.next();!r.done;n={ud:n.ud},r=e.next())n.ud=r.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);ad(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ad(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function B8(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function jR(e,t,n,r,u){var c=!1,d=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var A=e.i.get(E),k=E.startTime<=r&&E.endTime>r,G=A?A.Mg:null;A&&(d.push(A.Ce),A.ic&&d.push(A.ic),k||(c=!0,e.i.delete(E),A=null)),k&&(h.push(E),A?B8(e,G)||(c=!0):(j8(e,E,u),A=e.i.get(E),G=A.Mg,c=!0)),0<E.nestedCues.length&&G&&jR(e,E.nestedCues,G,r,u),u.pop()}if(c){for(r=m(d),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(te,z){return te.startTime!=z.startTime?te.startTime-z.startTime:te.endTime-z.endTime}),h=m(h),E=h.next();!E.done;E=h.next())r=e.i.get(E.value),r.ic?(r.ic.contains(n)&&r.ic.removeChild(n),n.appendChild(r.ic),r.ic.appendChild(r.Ce)):n.appendChild(r.Ce)}}function ad(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())hp(r.value);hp(e.g),e.i.clear(),e.B.clear()}e.m&&jR(e,e.h,e.g,n,[])}}function j8(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&G8(e,c,t,n,r),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var d=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(d))n=e.B.get(d);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",A=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+d,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+A),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,A=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,A-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=A+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(d,h),n=h}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function Z8(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Vn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Vn?"line-right":"center"}function G8(e,t,n,r,u){var c=t.style,d=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return"".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=h_(n.linePadding,n,e.s),c.paddingRight=h_(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var A=t;else A=document.createElement("span"),t.appendChild(A);n.border&&(A.style.border=n.border),!u&&((t=ZR(r,function(k){return k.backgroundColor}))?A.style.backgroundColor=t:E&&(A.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=ZR(r,function(k){return k.fontFamily}))&&(A.style.fontFamily=t),E&&(A.textContent=E)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),d||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=h_(n.fontSize,n,e.s),r=n.line,r!=null&&(d=n.lineInterpretation,d==cn&&(d=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),d==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==bn?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==bn?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==bn?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=Z8(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function h_(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function ZR(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}ne("shaka.text.UITextDisplayer",pa),pa.prototype.setTextVisibility=pa.prototype.setTextVisibility,pa.prototype.isTextVisible=pa.prototype.isTextVisible,pa.prototype.remove=pa.prototype.remove,pa.prototype.destroy=pa.prototype.destroy,pa.prototype.append=pa.prototype.append,pa.prototype.configure=pa.prototype.configure;function q8(e,t){function n(c){for(var d=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(d+=E.end-E.start);return c=Math.floor(d/3600),h=Math.floor(d/60%60),E=Math.floor(d%60),d=Math.floor(1e3*d%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>d?10>d?"00":"0":"")+d}var r=d_(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var d=[];switch(c.textAlign){case"left":d.push("align:left");break;case"right":d.push("align:right");break;case kn:d.push("align:middle");break;case"start":d.push("align:start");break;case"end":d.push("align:end")}switch(c.writingMode){case"vertical-lr":d.push("vertical:lr");break;case"vertical-rl":d.push("vertical:rl")}return d.length?" "+d.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}ne("shaka.text.WebVttGenerator",function(){});function GR(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}GR.prototype.configure=function(e){this.g=e};function H8(e,t,n){try{if(!e.g.enabled)return t;var r=p_(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=rv;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=ov;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=HR;break e}u=void 0}r.ot=u,r.su=!0;var c=nv(r);return g_(t,c)}catch(d){return _t("CMCD_SRC_ERROR","Could not generate src CMCD data.",d),t}}function p_(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function sd(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,p_(e)),n.pr=e.h.eb();var u=n.ot===iv||n.ot===ov;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=K8(e,n),r)r=W8(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=nv(e);c&&(t.uris=t.uris.map(function(d){return g_(d,c)}))}}}function K8(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function V8(e){if(e.type===0)return $8;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?ov:iv;if(t=="audio")return rv;if(t=="text")return e.mimeType==="application/mp4"?av:m_}}function z8(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function qR(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function Y8(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case iv:return e.videoBandwidth||NaN;case rv:return e.audioBandwidth||NaN;default:return e.bandwidth}}function nv(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function r(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},d=Object.keys(e||{}).sort();d=m(d);for(var h=d.next();!h.done;h=d.next()){h=h.value;var E=e[h];if(r(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var A=c[h];A&&(E=A(E)),A=typeof E;var k=void 0;k=A==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):A==="boolean"?h:A==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function W8(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var d=t.next();!d.done;d=t.next())d=d.value,u[c[d]!=null?c[d]:1][d]=e[d];for(e=0;e<u.length;e++)(c=nv(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function g_(e,t){return!t||e.includes("offline:")?e:(e=new si(e),e.g.set("CMCD",t),e.toString())}var HR="m",rv="a",iv="v",ov="av",$8="i",m_="c",av="tt";ne("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function ts(e){this.h=e,this.g=null}g=ts.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(zR)?1e3*this.g.get(zR):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(VR)?1e3*this.g.get(VR):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has(YR)?this.g.get(YR):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(WR)?this.g.get(WR):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function KR(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}ne("shaka.util.CmsdManager",ts),ts.prototype.getBandwidthEstimate=ts.prototype.getBandwidthEstimate,ts.prototype.getRoundTripTime=ts.prototype.yh,ts.prototype.getResponseDelay=ts.prototype.xh,ts.prototype.getEstimatedThroughput=ts.prototype.cg,ts.prototype.getMaxBitrate=ts.prototype.dg;var VR="etp",zR="mb",YR="rd",WR="rtt";function $R(){this.g=null,this.h=[]}function v_(e,t){return Oe(function(n){if(n.g==1)return e.g?x(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}$R.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function dn(e,t){Sr.call(this);var n=this;this.l=b_,this.Rd=this.g=null,this.da=!1,this.Vd=new Et,this.Rb=new Et,this.m=new Et,this.ta=new Et,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new $R,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=cd(this),this.ba={width:1/0,height:1/0},this.Pd=new we(this.h,this.ba,null),this.s=null,this.sa=new Pl(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=l6(this),this.aa=new ts(this.h.cmsd),this.G=rx(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,dv&&(this.A=dv(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){w_(n),n.vf()}),this.Td=new pr(function(){return p6(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}Y(dn,Sr);function sv(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function X8(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(Il()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||He("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),sv(e),e.K==null&&(e.K=new io(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else sv(e)}function Jr(e,t){return new Wn(e,t)}g=dn.prototype,g.destroy=function(){var e=this,t;return Oe(function(n){switch(n.g){case 1:return e.l==Ks?n.return():(sv(e),t=e.detach(),e.l=Ks,x(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return x(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),X(n)}})};function ud(e,t){e.dispatchEvent(Jr("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Oe(function(d){switch(d.g){case 1:if(n.l==Ks)throw new pt(2,7,7e3);if(r=n.g&&n.g==e,!n.g||n.g==e){d.u(2);break}return x(d,n.detach(),2);case 2:return x(d,y_(n,"attach"),4);case 4:if(d.h)return d.return();if(de(d,5,6),r||(ud(n,"attach"),u=function(){var h=A_(n);h&&hd(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!Io()||n.F){d.u(6);break}return x(d,E_(n),6);case 6:Xe(d),n.Y.release(),Ae(d,0);break;case 5:return c=Ce(d),x(d,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return Oe(function(n){if(n.g==1){if(t.l==Ks)throw new pt(2,7,7e3);return x(n,t.lc(!1,e),2)}if(n.g!=3)return x(n,y_(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),ud(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}X(n)})};function y_(e,t){var n;return Oe(function(r){return r.g==1?(n=++e.Yd,x(r,v_(e.Y,t),2)):n!=e.Yd?(e.Y.release(),r.return(!0)):r.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,d,h,E,A,k,G;return Oe(function(te){switch(te.g){case 1:return n.l!=Ks&&(n.l=b_),x(te,y_(n,"unload"),2);case 2:return te.h?te.return():(oe(te,3),n.Ia=!1,ud(n,"unload"),e&&!Io()&&(e=!1),sv(n),r=n.Tb.map(function(z){return z()}),n.Tb=[],x(te,Promise.all(r),5));case 5:if(n.dispatchEvent(Jr("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){te.u(6);break}return x(te,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){te.u(8);break}return x(te,n.o.stop(),8);case 8:if(!n.j){te.u(10);break}return x(te,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){te.u(12);break}return x(te,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&hp(n.g),!n.g||!n.g.src){te.u(14);break}return x(te,new Promise(function(z){return new pr(z).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){te.u(16);break}return x(te,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(d=c.value,h=m([d.audio,d.video]),E=h.next();!E.done;E=h.next())(A=E.value)&&A.segmentIndex&&A.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new Vm,n.kf=null,n.$c=[],n.N=NaN,S_(n);case 3:Xe(te),n.Y.release(),Ae(te,4);break;case 4:if(e&&Io()&&!n.F)return x(te,E_(n),0);te.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne;return Oe(function(Ge){switch(Ge.g){case 1:if(r.l==Ks)throw new pt(2,7,7e3);return u=null,c="",e instanceof il?(u=e,c=u.ad()||""):c=e||"",x(Ge,v_(r.Y,"load"),2);case 2:if(r.Y.release(),!r.g)throw new pt(2,7,7002);if(!r.qa){Ge.u(3);break}return x(Ge,r.lc(!1),3);case 3:if(d=++r.Yd,h=function(){return Oe(function(Te){if(Te.g==1)return r.Yd==d?Te.u(0):u?x(Te,u.destroy(),3):Te.u(3);throw new pt(2,7,7e3)})},E=function(Te,$e){return Oe(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),x(Ue,v_(r.Y,$e),4);case 4:return x(Ue,h(),5);case 5:return x(Ue,Te(),6);case 6:return x(Ue,h(),7);case 7:u&&r.h&&(u.g=r.h);case 2:Xe(Ue),r.Y.release(),Ae(Ue,0)}})},de(Ge,5,6),t==null&&u&&(t=u.getStartTime()),r.ea=t,r.Ia=!1,r.dispatchEvent(Jr("loading")),u){n=u.Y,Ge.u(8);break}if(n){Ge.u(8);break}return x(Ge,E(function(){return Oe(function(Te){if(Te.g==1)return x(Te,JR(r,c),2);n=Te.h,X(Te)})},"guessMimeType_"),8);case 8:if(A=!!u,u){OR(u,r),r.s=u.getStats(),Ge.u(11);break}return x(Ge,XR(r,c,t,n,!0),12);case 12:if(u=Ge.h,!u){r.s=new Vm,Ge.u(11);break}return OR(u,r),r.s=u.getStats(),x(Ge,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,r.s=u?u.getStats():new Vm,r.qa=c,r.gf=n||null,k)return x(Ge,E(function(){return Oe(function(Te){return x(Te,t6(r,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(r.F){Ge.u(17);break}return x(Ge,E(function(){return Oe(function(Te){return x(Te,E_(r),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return x(Ge,E(function(){return u.qa},"waitForManifest"),19);case 19:return r.h=u.getConfiguration(),r.Pd=u.A,r.Ga=u.B,r.I=N8(u),r.mb=M8(u),r.lb=u.lb,r.i=u.Te(),(te=u.m)&&(r.sa=te),A&&r.g&&r.g.nodeName==="AUDIO"&&(Q8(r),r.configure("manifest.disableVideo",!0)),x(Ge,E(function(){return u.pa},"waitForDrm"),20);case 20:return r.B=D8(u),x(Ge,E(function(){return Oe(function(Te){return x(Te,r.B.Vc(r.g),0)})},"drmEngine_.attach"),21);case 21:return x(Ge,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(z=u.s)||r.pa&&r.pa==z||(r.o=x8(u),r.pa=u.s,typeof r.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),ye=P8(u),Pe=u.ta,x(Ge,E(function(){return Oe(function(Te){return x(Te,e6(r,G,Pe,ye),0)})},"loadInner_"),23);case 23:R8(u),Ge.u(16);break;case 24:return x(Ge,E(function(){return Oe(function(Te){return x(Te,n6(r,G,n),0)})},"srcEqualsInner_"),16);case 16:r.dispatchEvent(Jr("loaded"));case 6:if(Xe(Ge),!u){Ge.u(26);break}return x(Ge,u.destroy(),26);case 26:Ae(Ge,0);break;case 5:if(Ne=Ce(Ge),Ne.code==7e3){Ge.u(28);break}return x(Ge,r.lc(!1),28);case 28:throw Ne}})};function Q8(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c;return Oe(function(d){switch(d.g){case 1:if(r=null,!(n.i&&n.I&&n.Ga&&n.qa)){d.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,x(d,QR(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=r=d.h,E=n.I,A=n.Ga;h.h=n.i,h.j=E,h.B=A,h=r,E=n.pa,h.i=n.o,h.s=E,r.m=n.sa,r.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return x(d,n.lc(e,t),4);case 4:return d.return(r)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Oe(function(c){return c.g==1?x(c,XR(r,e,t,n),2):((u=c.h)?u.start().catch(function(){}):hd(r,new pt(2,7,7005)),c.return(u))})};function XR(e,t,n,r,u){u=u===void 0?!1:u;var c,d,h;return Oe(function(E){return E.g==1?(c=Date.now()/1e3,r?E.u(2):x(E,JR(e,t),3)):(E.g!=2&&(r=E.h),J8(e,r)?E.return(null):(d=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(d=!0)),E.return(QR(e,t,n,r||null,c,!u,d,h))))})}function QR(e,t,n,r,u,c,d,h){c=c===void 0?!0:c,d=d===void 0?!1:d,h=h===void 0?!0:h;var E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt;return Oe(function(Ht){return Ht.g==1?(E=null,A=Wa(e.h),d&&(A.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},te=function(Ut,yt){k()?E.configure(Ut,yt):e.configure(Ut,yt)},e.ba.width!=1/0||e.ba.height!=1/0?Ht.u(2):x(Ht,Ia(),3)):(Ht.g!=2&&(z=Ht.h,e.ba.width=z.width,e.ba.height=z.height),ye=new we(A,e.ba,null),Pe={networkingEngine:e.G,filter:function(Ut){var yt,jt;return Oe(function(ln){if(ln.g==1)return x(ln,je(ye,Ut),2);if(ln.g!=4)return yt=ln.h,yt?(jt=Jr("trackschanged"),x(ln,Promise.resolve(),4)):ln.u(0);E.dispatchEvent(jt),X(ln)})},makeTextStreamsForClosedCaptions:function(Ut){return d6(e,Ut)},onTimelineRegionAdded:function(Ut){var yt=E.C;e:{for(var jt=m(yt.g),ln=jt.next();!ln.done;ln=jt.next())if(ln=ln.value,ln.schemeIdUri==Ut.schemeIdUri&&ln.id==Ut.id&&ln.startTime==Ut.startTime&&ln.endTime==Ut.endTime){jt=ln;break e}jt=null}jt==null&&(yt.g.add(Ut),Ut=new Wn("regionadd",new Map([["region",Ut]])),yt.dispatchEvent(Ut))},onEvent:function(Ut){return E.dispatchEvent(Ut)},onError:function(Ut){return E.onError(Ut)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){te("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Ut){var yt=E.l,jt=yt?yt.g:null;jt&&yt.s&&ae(ye,jt.keySystem,Ut)},onManifestUpdated:function(){var Ut=new Map().set("isLive",e.R());E.dispatchEvent(Jr("manifestupdated",Ut)),ev(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},Ne=new e_(function(){return e.Ib()}),Ne.addEventListener("regionadd",function(Ut){var yt=Ut.region;gp(e,"timelineregionadded",yt,E),ev(E,!1,function(){e.A&&e.A.onDashTimedMetadata(yt)})}),Ge=null,A.streaming.observeQualityChanges&&(Ge=new zm(function(){return e.ob()}),Ge.addEventListener("qualitychange",function(Ut){var yt=Ut.quality;Ut=Ut.position,yt=new Map().set("mediaQuality",{bandwidth:yt.bandwidth,audioSamplingRate:yt.audioSamplingRate,codecs:yt.codecs,contentType:yt.contentType,frameRate:yt.frameRate,height:yt.height,mimeType:yt.mimeType,channelsCount:yt.channelsCount,pixelAspectRatio:yt.pixelAspectRatio,width:yt.width}).set("position",Ut),e.dispatchEvent(Jr("mediaqualitychanged",yt))})),Te=!0,$e={zb:e.G,onError:function(Ut){return E.onError(Ut)},ee:function(Ut){ev(E,!0,function(){e:{var yt=Jr("keystatuschanged");e.dispatchEvent(yt);var jt=Object.keys(Ut);yt=jt.length==1&&jt[0]=="00";var ln=!1;if(jt.length){jt=m(e.i.variants);for(var gn=jt.next();!gn.done;gn=jt.next()){gn=gn.value;var Ln=[];gn.audio&&Ln.push(gn.audio),gn.video&&Ln.push(gn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=gn.allowedByKeySystem,qn.keyIds.size){gn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Ut[yt?"00":Yn])||e.B.F)&&(gn.allowedByKeySystem=gn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=gn.allowedByKeySystem&&(ln=!0)}}}if(ln&&(ns(e),!fd(e)))break e;(yt=e.j.j)&&!yt.allowedByKeySystem&&dd(e)}})},onExpirationUpdated:function(Ut,yt){var jt=Jr("expirationupdated");E.dispatchEvent(jt),(jt=E.j)&&jt.onExpirationUpdated&&jt.onExpirationUpdated(Ut,yt)},onEvent:function(Ut){E.dispatchEvent(Ut),Ut.type=="drmsessionupdate"&&Te&&(Te=!1,Ut=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Ut,e.K&&Zi(e.K))}},Ue=rx(e,k),gt=function(){return e.rc($e)},Rt={config:A,Uh:Pe,di:Ne,ci:Ge,rc:gt,Th:ye,networkingEngine:Ue,Vg:c,Ug:h},E=new il(t,r,u,n,Rt),Ht.return(E))})}function JR(e,t){var n,r;return Oe(function(u){return u.g==1?(n=e.h.manifest.retryParameters,x(u,f_(t,e.G,n),2)):(r=u.h,r=="application/x-mpegurl"&&vs()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function J8(e,t){if(!Io())return!0;if(t){if((e.g||_c()).canPlayType(t)=="")return!1;if(!(Io()&&t in ke))return!0;if(cm(t)){if(e.h.streaming.preferNativeHls)return!0;if(vs()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(vs())return e.h.streaming.useNativeHlsOnSafari}}return!1}function E_(e){var t,n,r,u,c;return Oe(function(d){if(d.g==1)return ud(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,r=u6(e.g,n,function(h,E,A){ex(e,h,E,A)},e.K),r.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,r.ba=c,x(d,r.L,2);e.F=r,X(d)})}function e6(e,t,n,r){var u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut;return Oe(function(yt){switch(yt.g){case 1:for(ud(e,"load"),u=e.g,e.H=new ip({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(jt){u.playbackRate=jt},og:function(jt){u.currentTime+=jt}}),c=function(){return uv(e)},d=function(){return cx(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",d),X8(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,I_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(jt,ln,gn){e.j&&jt!=e.j.j&&cv(e,jt,!0,ln===void 0?!1:ln,gn===void 0?0:gn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=c6(e),e.j.configure(e.h.streaming),e.l=Oo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(jt){if(jt.track)switch(jt=jt.track,jt.kind){case"chapters":nx(e,jt)}}),e.dispatchEvent(Jr("streaming")),h=n,(E=e.j.j)||h||(h=dx(e,!0)),A=[],k=E||h,G=m([k.video,k.audio]),te=G.next();!te.done;te=G.next())(z=te.value)&&!z.segmentIndex&&A.push(z.createSegmentIndex());if(!(0<A.length)){yt.u(2);break}return x(yt,Promise.all(A),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),I_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ye=function(jt){e.C=a6(e,jt),e.bb=s6(e,t),ix(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ye(e.ea),E){yt.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){yt.u(5);break}return Pe=e.i.presentationTimeline,Ne=e.ea||e.g.currentTime,Ge=Pe.$b(),Te=Pe.pb(),Ne<Ge?Ne=Ge:Ne>Te&&(Ne=Te),x(yt,h6(h,Ne),6);case 6:$e=yt.h,ye($e);case 5:cv(e,h,!0,!1,0);case 4:return e.C.ve(),Ue=e.wc().find(function(jt){return jt.active}),Ue||((gt=bc(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&$E(e.s.h,gt,!0),h&&(gt?(h.audio&&g6(e,h.audio,gt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),gx(e)):e.da=!1),gt&&(e.h.streaming.alwaysStreamText||e.Ze())&&Ym(e.j,gt)),x(yt,e.j.start(r),7);case 7:e.h.abr.enabled&&(e.o.enable(),mx(e)),ns(e),fd(e),e.i.variants.some(function(jt){return jt.primary}),(Rt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Ht=function(){return fx(e)},e.m.D(u,"timeupdate",Ht)):Rt||(Ut=function(){return lv(e)},e.m.D(u,"timeupdate",Ut),lv(e)),e.A&&e.A.onManifestUpdated(Rt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(yt)}})}function t6(e,t){var n,r,u,c;return Oe(function(d){return d.g==1?(n=yi,r=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){hd(e,h)},ee:function(){},onExpirationUpdated:function(){var h=Jr("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Ca(t):"",codecs:t?Do(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(Si(c.video.mimeType,c.video.codecs)),e.B.ba=!0,x(d,Um(e.B,[c],[]),2)):x(d,e.B.Vc(e.g),0)})}function n6(e,t,n){var r,u,c,d,h,E,A,k,G,te;return Oe(function(z){if(z.g==1)return ud(e,"src-equals"),r=e.g,e.C=new mR(r),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new ip({Md:function(){return r.playbackRate},Xb:function(){return r.defaultPlaybackRate},Df:function(ye){r.playbackRate=ye},og:function(ye){r.currentTime+=ye}}),c=e.h.streaming.rebufferingGoal,ix(e,r,c),d=function(){return uv(e)},h=function(){return cx(e)},e.m.D(r,"playing",d),e.m.D(r,"pause",d),e.m.D(r,"ended",d),e.m.D(r,"ratechange",h),r.preload!="none"&&e.m.na(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return ns(e)}),e.m.D(r.audioTracks,"removetrack",function(){return ns(e)}),e.m.D(r.audioTracks,"change",function(){return ns(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(ye){if(ye.track)switch(ye=ye.track,ye.kind){case"metadata":o6(e,ye);break;case"chapters":nx(e,ye);break;default:ns(e)}}),e.m.D(r.textTracks,"removetrack",function(){return ns(e)}),e.m.D(r.textTracks,"change",function(){return ns(e)})),r.src=H8(e.T,e.qa,n),(Ha()||oa())&&r.load(),r.preload!="none"&&!r.autoplay&&cm(n)&&Es()&&r.load(),e.l=ga,e.dispatchEvent(Jr("streaming")),E=new Rr,td(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),td(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ye;return Oe(function(Pe){if(Pe.g==1)return r6(e),ye=pp(e),ye.find(function(Ne){return Ne.mode!="disabled"})?(0<ye.length&&(e.da=!0),Pe.u(2)):x(Pe,new Promise(function(Ne){e.m.na(r.textTracks,"change",Ne),new pr(Ne).X(1)}),2);if(u)return Pe.return();i6(e),X(Pe)})}),r.error?E.reject(A_(e)):r.preload=="none"&&(He('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(r,"error",function(){E.reject(A_(e))}),x(z,E,2);(A=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return fx(e)},e.m.D(r,"timeupdate",k)):A||(G=function(){return lv(e)},e.m.D(r,"timeupdate",G),lv(e)),e.A&&(e.A.onManifestUpdated(A),A&&(te=e.Ib().end,e.m.D(r,"progress",function(){var ye=e.Ib().end;te!=ye&&(e.A.onManifestUpdated(e.R()),te=ye)}))),e.Ia=!0,X(z)})}function r6(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function i6(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function o6(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,tx(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var r=f6(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function ex(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,d=r;d&&c>d&&(d=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())tx(e,c,d,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function tx(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(Jr("metadata",t))}function nx(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new kc(e)};function rx(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?ev(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,d,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,d,h)},function(u,c,d){c=new Map().set("headers",u).set("request",c).set("requestType",d),n(Jr("downloadheadersreceived",c)),r(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var A=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");A.set(G[0],KR(G[1]))}}catch(Ne){}if(A=u["cmsd-dynamic"]){try{var te=new Map,z=A.split(";");for(A=1;A<z.length;A++){var ye=z[A].split("=");te.set(ye[0],KR(ye[1]))}var Pe=te}catch(Ne){Pe=null}Pe&&(h.g=Pe)}}}})},function(u,c,d,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",d).set("aborted",h),n(Jr("downloadfailed",u))},function(u,c,d){r(function(){var h=e.T,E=d;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")sd(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var A="d";break e;case 3:case 2:A="h";break e;case 5:A="s";break e}A=void 0}h.m=A}sd(h,c,{ot:HR,su:!h.i})}}catch(Mn){_t("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case $a:try{if(h.g.enabled){var k=E.segment;A=0,k&&(A=k.endTime-k.startTime);var G={d:1e3*A,st:h.h.R()?"l":"v"};G.ot=V8(E);var te=G.ot===iv||G.ot===rv||G.ot===ov||G.ot===av,z=E.stream;if(z){var ye=h.h.eb();if(te&&(G.bl=z8(h,z.type),G.ot!==av)){var Pe=qR(h,z.type);G.dl=ye?Pe/Math.abs(ye):Pe}if(z.bandwidth&&(G.br=z.bandwidth/1e3),z.segmentIndex&&k){var Ne=z.segmentIndex.xb(k.endTime,!0,0>ye);if(Ne){var Ge=Ne.next().value;if(Ge&&Ge!=k){if(!Zn(k.$(),Ge.$())){var Te=Ge.$()[0],$e=c.uris[0],Ue=new URL(Te),gt=new URL($e);if(Ue.origin!==gt.origin)var Rt=Te;else{for(var Ht=Ue.pathname.split("/").slice(1),Ut=gt.pathname.split("/").slice(1,-1);Ht[0]===Ut[0];)Ht.shift(),Ut.shift();for(;Ut.length;)Ut.shift(),Ht.unshift("..");Rt=Ht.join("/")}G.nor=Rt}if((Ge.Aa||Ge.ja)&&(k.Aa!=Ge.Aa||k.ja!=Ge.ja)){var yt=Ge.Aa+"-";Ge.ja&&(yt+=Ge.ja),G.nrr=yt}}}var jt=h.h.eb()||1,ln=qR(h,z.type)||500,gn=z.bandwidth,Ln=gn?gn*(k.endTime-k.startTime)/1e3/(ln/jt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}te&&G.ot!==av&&(G.tb=Y8(h,G.ot)/1e3),sd(h,c,G)}}catch(Mn){_t("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:sd(h,c,{ot:"k"});break;case 4:sd(h,c,{ot:"o"})}})},function(u,c,d,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function a6(e,t){return new vR(e.g,e.i,e.h.streaming,t,function(){e.bb&&SR(e.bb,!0),e.j&&e.j.od(),e.L&&ld(e)},function(n){return e.dispatchEvent(n)})}function s6(e,t){t=new tv(e.mb,e.R()||0<t),t.addEventListener("enter",function(r){gp(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){gp(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(gp(e,"timelineregionenter",u),gp(e,"timelineregionexit",u))});var n=new TR(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function ix(e,t,n){e.L=new Zh,e.L.g=Ol,Gh(e.L,n,Math.min(.5,n/2)),S_(e),e.m.D(t,"waiting",function(){return ld(e)}),e.m.D(t,"stalled",function(){return ld(e)}),e.m.D(t,"canplaythrough",function(){return ld(e)}),e.m.D(t,"progress",function(){return ld(e)})}function ld(e){switch(e.l){case ga:if(e.g.ended)var t=!0;else{var n=kt(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Oo:e:if(e.g.ended||jc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var r=kt(e.g.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?Rc:Ol,n.g=r,(t=t!=r)&&r===Rc&&(n.h=Date.now()),t&&S_(e)}function u6(e,t,n,r){return new Tu(e,t,n,r)}function l6(e){return new GR({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function c6(e){return new CR(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return hd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var r=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var d=Gs(e.F,c);!e.R()&&e.g.paused&&d!=null&&0<d&&e.C.Dd()<d&&e.C.we(d)}ld(e),r=new Map().set("start",r).set("end",u).set("contentType",c),e.dispatchEvent(Jr("segmentappended",r)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&u8(e.lb,n,t)},Qf:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new Lm(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)r=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;Bl(r,"cenc",u),r=r.l}}else r=Promise.resolve();return r},$h:function(t,n,r){ex(e,t,n,r)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Xm(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var r=Zc(this.h,e,cd(this));return ox(this),r};function ox(e){if(e.Pd=new we(e.h,e.ba,e.B),e.I){var t=Wa(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=Ks&&le(e.Pd,e.i)&&ns(e)}catch(c){hd(e,c)}e.o&&fd(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||dd(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.F,u=r.F;r.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),r.g&&(r.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(vr))&&nd(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),mx(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Gh(e.L,t,Math.min(.5,t/2))),e.i&&I_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=cd(this);return Zc(e,this.h,cd(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];Zc(this.h,cd(this),cd(this)),ox(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Ol:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?He("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Oo&&(this.o.playbackRateChanged(e),RR(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,r=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Wc():Math.floor(n)<=Math.floor(r.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==ga&&this.H.set(e),this.l==Oo&&(this.H.set(e),this.o.playbackRateChanged(e),RR(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,Bf(u)){var c=Nl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(d){return Dl(d)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=Ml(r);u.active=r==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?pp(this).map(function(c){return _m(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Vu(t)})},g.gh=function(e){var t=this,n,r,u,c;return Oe(function(d){return d.g==1?t.l!=Oo&&t.l!=ga?d.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?d.u(2):x(d,r.createSegmentIndex(),2):d.return(null)):d.g!=4?(u=[],r.segmentIndex.tc(function(h){var E=ax(h.tilesLayout||r.tilesLayout);if(E){E=E.rows*E.Sb;for(var A=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+A*k/E))}}),x(d,Promise.all(u),4)):(c=d.h,d.return(c.filter(function(h){return h})))})};function ax(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(gt){return gt.g==1?n.l!=Oo&&n.l!=ga?gt.return(null):(r=n.$c,n.i&&(r=n.i.imageStreams),(u=r.find(function(Rt){return Rt.id==e}))?u.segmentIndex?gt.u(2):x(gt,u.createSegmentIndex(),2):gt.return(null)):(c=u.segmentIndex.find(t),c==null||(d=u.segmentIndex.get(c),h=ax(d.tilesLayout||u.tilesLayout),!h)?gt.return(null):(E=u.width||0,A=u.height||0,k=E/h.Sb,G=A/h.rows,te=h.Sb*h.rows,z=d.i-d.startTime,ye=d.A||z/te,Pe=d.startTime,Ge=Ne=0,1<te&&(Te=Math.floor((t-d.startTime)/ye),Pe=d.startTime+Te*ye,Ne=Te%h.Sb*k,Ge=Math.floor(Te/h.Sb)*G),$e=!1,(Ue=d.s)&&($e=!0,G=Ue.height,Ne=Ue.positionX,Ge=Ue.positionY,k=Ue.width),gt.return({segment:d,imageHeight:A,imageWidth:E,height:G,positionX:Ne,positionY:Ge,startTime:Pe,duration:ye,uris:d.$(),width:k,sprite:$e})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&($E(this.s.h,t,!1),Ym(this.j,t),fv(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=pp(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Ic(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";fv(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&He("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(u){return u.id==e.id});r&&Bf(r)&&(cv(this,r,!1,t,n),this.sa=new jh(r,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),fd(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,Ic(n)==e.id){hx(this,n);break}}},g.ih=function(){return yx(this.Hb())},g.Ah=function(){return yx(this.wc())},g.hh=function(){return Array.from(vx(this.Hb()))},g.zh=function(){return Array.from(vx(this.wc()))},g.wg=function(e,t,n,r){if(n=n===void 0?0:n,r=r===void 0?0:r,this.i&&this.C){this.sa=new Pl(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(d,h){return d.video||h.video?d.video&&h.video?Math.abs((d.video.height||0)-(h.video.height||0))+Math.abs((d.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=Nl(n),this.zf(e,!0,r)):dd(this)}else this.g&&this.g.audioTracks&&(r=bc(this.Hb(),e,t||"",!1)[0])&&this.zf(r)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=bc(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&($E(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&(Ym(this.j,e),fv(this))):(e=bc(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.sa=new Pl(r.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),dd(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&hx(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Oo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?pp(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?sx(this).map(function(e){return _m(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=Cr(e),n=sx(this).filter(function(h){return Cr(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var d=c.value;(c=d.id)&&c!=""||(c=d.startTime+"-"+d.endTime+"-"+d.text),d={id:c,title:d.text,startTime:d.startTime,endTime:d.endTime},r.has(c)||(e.push(d),r.add(c))}}return e};function pp(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function f6(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function sx(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Oo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=bc(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&(Ym(this.j,e[0]),fv(this))):d8(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=pp(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}gx(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Oo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==ga&&(e.total=mt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Oo&&this.l!=ga)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};uv(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=r,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Oo){if(n=this.j.j,t=this.j.s,n){r=this.H?this.H.h:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==ga&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.I,u=c.K;var d=c.H,h=c.N,E=c.L,A=c.A,k=c.i,G=c.m,te=c.F,z=c.j,ye=WE(c.g,"playing"),Pe=WE(c.g,"paused"),Ne=WE(c.g,"buffering"),Ge=c.s,Te=c.C,$e=c.G,Ue=c.Ed,gt=r8(c.g),Rt=[];c=m(c.h.g);for(var Ht=c.next();!Ht.done;Ht=c.next())Ht=Ht.value,Rt.push({timestamp:Ht.timestamp,id:Ht.id,type:Ht.type,fromAdaptation:Ht.fromAdaptation,bandwidth:Ht.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:d,stallsDetected:h,gapsJumped:E,estimatedBandwidth:A,completionPercent:k,loadLatency:G,manifestTimeSeconds:te,drmTimeSeconds:z,playTime:ye,pauseTime:Pe,bufferingTime:Ne,licenseTime:Ge,liveLatency:Te,maxSegmentDuration:$e,bytesDownloaded:Ue,stateHistory:gt,switchHistory:Rt}},g.Rg=function(e,t,n,r,u,c,d){d=d===void 0?!1:d;var h=this,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(h.l!=Oo&&h.l!=ga)throw new pt(1,7,7004);if(n!="subtitles"&&n!="captions"&&He("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Ue.u(2);break}return x(Ue,__(h,e),3);case 3:r=Ue.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=ga){Ue.u(4);break}return d&&(n="forced"),x(Ue,ux(h,e,t,n,r,c||"",E),5);case 5:if(A=Cr(t),k=h.wc(),G=k.find(function(gt){return Cr(gt.language)==A&&gt.label==(c||"")&&gt.kind==n}))return ns(h),Ue.return(G);throw new pt(1,2,2012);case 4:if(te=yi,z=h.g.duration,h.i&&(z=h.i.presentationTimeline.getDuration()),z==1/0)throw new pt(1,4,4033);if(!E.length){Ue.u(6);break}return x(Ue,T_(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ye=Ue.h,Pe=lx(h,ye,r,E),Ne=new Blob([Pe],{type:"text/vtt"}),e=Km(Ne),r="text/vtt";case 6:if(Ge={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:YE(0,z,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:te.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!d,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(r||"",u||"")])},Te=Si(Ge.mimeType,Ge.codecs),$e=Cl(Te),!$e)throw new pt(2,2,2014,r);return h.i.textStreams.push(Ge),ns(h),Ue.return(Ml(Ge))}})},g.Sg=function(e,t){var n=this,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te;return Oe(function($e){switch($e.g){case 1:if(n.l!=Oo&&n.l!=ga)throw new pt(1,7,7004);if(t){$e.u(2);break}return x($e,__(n,e),3);case 3:t=$e.h;case 2:if(t!="text/vtt")throw new pt(1,2,2017,e);if(r=yi,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new pt(1,4,4045);return x($e,T_(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=$e.h,d=ji[t],!d)throw new pt(2,2,2014,t);for(h=d(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},A=Qn(c),k=h.parseMedia(A,E,e),G=[],te={},z=m(k),ye=z.next();!ye.done;te={Rc:te.Rc,Nb:te.Nb},ye=z.next())te.Nb=ye.value,te.Rc=null,Pe=function(Ue){return function(){return Ue.Rc==null&&(Ue.Rc=co([e],[Ue.Nb.payload])),Ue.Rc||[]}}(te),Ne=new Je(te.Nb.startTime,te.Nb.endTime,Pe,0,null,null,0,0,1/0),te.Nb.payload.includes("#xywh")&&(Ge=te.Nb.payload.split("#xywh=")[1].split(","),Ge.length===4&&Ne.Eg({height:parseInt(Ge[3],10),positionX:parseInt(Ge[0],10),positionY:parseInt(Ge[1],10),width:parseInt(Ge[2],10)})),G.push(Ne);return Te={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(t||"","")])},n.l==ga?n.$c.push(Te):n.i.imageStreams.push(Te),ns(n),$e.return(Vu(Te))}})},g.Qg=function(e,t,n){var r=this,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(r.l!=Oo&&r.l!=ga)throw new pt(1,7,7004);if(n){E.u(2);break}return x(E,__(r,e),3);case 3:n=E.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),x(E,ux(r,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,d=r.bg(),h=d.find(function(A){return A.language==t}),!h){E.u(5);break}return x(E,new Promise(function(A,k){r.m.na(c,"load",A),r.m.na(c,"error",function(){k(new pt(1,2,2015))})}),6);case 6:return ns(r),E.return(h);case 5:throw new pt(1,2,2012)}})};function __(e,t){var n;return Oe(function(r){switch(r.g){case 1:return de(r,2),x(r,f_(t,e.G,e.h.streaming.retryParameters),4);case 4:n=r.h,ve(r,3);break;case 2:Ce(r);case 3:if(n)return r.return(n);throw new pt(1,2,2011,t)}})}function ux(e,t,n,r,u,c,d){var h,E,A,k;return Oe(function(G){if(G.g==1)return u!="text/vtt"||d.length?x(G,T_(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=lx(e,h,u,d),A=new Blob([E],{type:"text/vtt"}),t=Km(A),u="text/vtt"),k=document.createElement("track");var te=e.T,z=t;try{if(te.g.enabled){var ye=p_(te);ye.ot=m_,ye.su=!0;var Pe=nv(ye),Ne=g_(z,Pe)}else Ne=z}catch(Ge){_t("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ge),Ne=z}return k.src=Ne,k.label=c,k.kind=r,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function T_(e,t,n,r){var u,c,d;return Oe(function(h){if(h.g==1){u=$a,c=Oi([t],r),c.method="GET";var E=e.T;try{E.g.enabled&&sd(E,c,{ot:m_,su:!0})}catch(A){_t("CMCD_TEXT_ERROR","Could not generate text CMCD data.",A)}return x(h,n.request(u,c).promise,2)}return d=h.h,h.return(d.data)})}function lx(e,t,n,r){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),q8(t,r);throw new pt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Oo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.gd||r.Qa||r.ub||(r.gd=!1,Ts(t,r,e));t=!0}}else t=!1;return t},g.Te=function(){return He("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function cd(e){var t=id();return t.streaming.failureCallback=function(n){if(e.R()){var r=null;n.code==1001||n.code==1002?r=1:n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.vf(r))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new pa(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new da(e.g,"Shaka Player TextTrack"):new ha},t}g.Hg=function(e){this.Rd=e};function d6(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),d=c.next();!d.done;d=c.next())if(d=d.value,!n.has(d)){var h=d.startsWith("CC")?"application/cea-608":"application/cea-708",E=new Ei,A=u.closedCaptions.get(d);h={id:e.nf++,originalId:d,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:A,originalLanguage:A,label:null,type:vr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(h,"")])},t.textStreams.push(h),n.add(d)}}}function h6(e,t){var n,r,u,c,d;return Oe(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(E,A){var k,G,te;return Oe(function(z){return z.g==1?E?x(z,E.createSegmentIndex(),2):z.return(null):(G=(k=E.segmentIndex.xb(A))?k.next().value:null,G?(te=G.startTime,z.return(te)):z.return(null))})},x(h,u(n,t),2)):h.g!=3?(c=h.h,x(h,u(r,t),3)):(d=h.h,d!=null&&c!=null?h.return(Math.max(d,c)):d!=null?h.return(d):c!=null?h.return(c):h.return(t))})}function S_(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}uv(e)}t=new Map().set("buffering",t),e.dispatchEvent(Jr("buffering",t))}function cx(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=Jr("ratechange"),e.dispatchEvent(t))}function uv(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Ol?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Jr("statechanged",n)))}}function fx(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var r=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.sd(r):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,d=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,d=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,r=0,e.l==ga){var A=e.g.buffered;0<A.length&&(r=A.end(A.length-1),r=Math.max(d,r-u.end))}u=e.h.streaming.liveSyncPanicMode,A=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=A?t!=E&&e.sd(E):c&&d&&n-r>c?t!=d&&e.sd(d):h&&E&&n-r<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function lv(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var r;e.N==0?r=Jr("started"):e.N==25?r=Jr("firstquartile"):e.N==50?r=Jr("midpoint"):e.N==75?r=Jr("thirdquartile"):e.N==100&&(r=Jr("complete")),r&&e.dispatchEvent(r)}}}function fd(e){try{se(e.Pd,e.i)}catch(n){return hd(e,n),!1}var t=jf(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function dx(e,t){return t=t===void 0?!1:t,fd(e)?e.o.chooseVariant(t):null}function p6(e){function t(d){var h="";return d.video&&(h+="video:"+d.video.id),d.audio&&(h=h+(h?"&":"")+("audio:"+d.audio.id)),h}for(var n=Date.now()/1e3,r=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,r=!0,""+t(c),void 0);e.i.variants.every(function(d){return d.disabledUntilTime===0})&&e.Td.stop(),r&&dd(e,!0,void 0,!1,!1)}function dd(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c=dx(e);c&&cv(e,c,u,t,n,r)}function cv(e,t,n,r,u,c){c=c===void 0?!1:c;var d=e.j.j;if(t==d)r&&xR(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),xR(e.j,t,r,u,c,n),r=null,d&&(r=Nl(d)),t=Nl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&js(e.K,t,e.Ue()),n=Jr("adaptation",n),pd(e,n)):px(e,r,t)}}function hx(e,t){var n=Array.from(e.g.audioTracks).find(function(r){return r.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Dl(n),t=Dl(t),px(e,n,t)}function g6(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var r=Cr(e.h.preferredTextLanguage);return n=Cr(n.language),e.h.autoShowText==2?Zu(n,r):e.h.autoShowText==3?(e=Cr(t.language),Zu(n,r)&&!Zu(e,n)):(He("Invalid autoShowText setting!"),!1)}function ns(e){var t=Jr("trackschanged");pd(e,t)}function px(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&js(e.K,n,e.Ue()),n=Jr("variantchanged",t),pd(e,n)}function fv(e){var t=Jr("textchanged");pd(e,t)}function gx(e){var t=Jr("texttrackvisibility");pd(e,t)}function mx(e){e.h.abr.enabled||w_(e);var t=new Map().set("newStatus",e.h.abr.enabled);pd(e,Jr("abrstatuschanged",t))}function w_(e,t){if(t=t===void 0?!0:t,e.l==Oo){e.Td.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&fd(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===Ks||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var u=r[e.type];u&&u.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,d){return c+d.end-d.start},0),dd(this,!0,t,!0,!1),!0}return!1};function hd(e,t){var n,r,u;return Oe(function(c){switch(c.g){case 1:if(e.l==Ks)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return de(c,3),x(c,I8(e.j),5);case 5:r=c.h,n=!r,ve(c,2);break;case 3:Ce(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&w_(e,!1),u=Jr("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),X(c)}})}function gp(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Jr(t,e))}function A_(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pt(2,3,3016,t,n,e.g.error.message)}function I_(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function pd(e,t){Oe(function(n){if(n.g==1)return x(n,Promise.resolve(),2);e.l!=Ks&&e.dispatchEvent(t),X(n)})}function vx(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Cr(n.language)):t.add("und");return t}function yx(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Cr(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var d=c.next();!d.done;d=c.next())d=d.value,t.get(u).add(d),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(d,r.label))}var h=[];return t.forEach(function(E,A){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(A)&&n.get(A).has(k)&&(G=n.get(A).get(k)),h.push({language:A,role:k,label:G})}}),h}ne("shaka.Player",dn),dn.prototype.setVideoContainer=dn.prototype.Hg,dn.prototype.getManifestParserFactory=dn.prototype.rh,dn.prototype.getManifest=dn.prototype.Te,dn.prototype.retryStreaming=dn.prototype.vf,dn.prototype.setMaxHardwareResolution=dn.prototype.xi,dn.prototype.addChaptersTrack=dn.prototype.Qg,dn.prototype.addThumbnailsTrack=dn.prototype.Sg,dn.prototype.addTextTrackAsync=dn.prototype.Rg,dn.prototype.getStats=dn.prototype.getStats,dn.prototype.getBufferedInfo=dn.prototype.ob,dn.prototype.getSegmentAvailabilityDuration=dn.prototype.Nd,dn.prototype.getPresentationStartTimeAsDate=dn.prototype.eg,dn.prototype.getPlayheadTimeAsDate=dn.prototype.vh,dn.prototype.setTextTrackVisibility=dn.prototype.Dg,dn.prototype.getChapters=dn.prototype.jh,dn.prototype.getChaptersTracks=dn.prototype.bg,dn.prototype.isTextTrackVisible=dn.prototype.Ze,dn.prototype.selectVariantsByLabel=dn.prototype.si,dn.prototype.selectTextLanguage=dn.prototype.yf,dn.prototype.selectAudioLanguage=dn.prototype.wg,dn.prototype.getTextLanguages=dn.prototype.zh,dn.prototype.getAudioLanguages=dn.prototype.hh,dn.prototype.getTextLanguagesAndRoles=dn.prototype.Ah,dn.prototype.getAudioLanguagesAndRoles=dn.prototype.ih,dn.prototype.selectVariantTrack=dn.prototype.zf,dn.prototype.selectTextTrack=dn.prototype.xg,dn.prototype.getThumbnails=dn.prototype.fg,dn.prototype.getAllThumbnails=dn.prototype.gh,dn.prototype.getImageTracks=dn.prototype.oh,dn.prototype.getTextTracks=dn.prototype.wc,dn.prototype.getVariantTracks=dn.prototype.Hb,dn.prototype.cancelTrickPlay=dn.prototype.Wc,dn.prototype.trickPlay=dn.prototype.sd,dn.prototype.getPlaybackRate=dn.prototype.eb,dn.prototype.isBuffering=dn.prototype.Xe,dn.prototype.getKeyStatuses=dn.prototype.Kd,dn.prototype.getActiveSessionsMetadata=dn.prototype.Se,dn.prototype.getExpiration=dn.prototype.cd,dn.prototype.drmInfo=dn.prototype.drmInfo,dn.prototype.keySystem=dn.prototype.keySystem,dn.prototype.goToLive=dn.prototype.Hh,dn.prototype.seekRange=dn.prototype.Ib,dn.prototype.isAudioOnly=dn.prototype.Kh,dn.prototype.isInProgress=dn.prototype.dc,dn.prototype.isLive=dn.prototype.R,dn.prototype.getAdManager=dn.prototype.$f,dn.prototype.getAssetUri=dn.prototype.ad,dn.prototype.getNetworkingEngine=dn.prototype.Zb,dn.prototype.getMediaElement=dn.prototype.th,dn.prototype.getManifestType=dn.prototype.Ue,dn.prototype.getLoadMode=dn.prototype.qh,dn.prototype.resetConfiguration=dn.prototype.li,dn.prototype.getBufferFullness=dn.prototype.ag,dn.prototype.getConfiguration=dn.prototype.getConfiguration,dn.prototype.configure=dn.prototype.configure,dn.prototype.releaseAllMutexes=dn.prototype.hi,dn.prototype.preload=dn.prototype.preload,dn.prototype.unloadAndSavePreload=dn.prototype.Ai,dn.prototype.load=dn.prototype.load,dn.prototype.updateStartTime=dn.prototype.Ei,dn.prototype.unload=dn.prototype.lc,dn.prototype.detach=dn.prototype.detach,dn.prototype.attachCanvas=dn.prototype.Wg,dn.prototype.attach=dn.prototype.Vc,dn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,d;return Oe(function(h){if(h.g==1)return t={},e?x(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(Io())for(var A in ke)E[A]=!0;A=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=A.next();!k.done;k=A.next())k=k.value,E[k]=Io()?!!ke[k]:cu(k);for(n=E,A='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(pu)),E={},A=m(A),k=A.next();!k.done;k=A.next()){k=k.value,E[k]=Io()?Cl(k)?!0:Ot(k)||!!ro(k):cu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}r=E,u={manifest:n,media:r,drm:t},c=C_;for(d in c)u[d]=c[d]();return h.return(u)})},dn.isBrowserSupported=function(){if(p.Promise||He("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Yr("Trident/"))return!1;var e=Es();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:Io()?!0:cu("application/x-mpegurl")},dn.setAdManagerFactory=function(e){dv=e},dn.registerSupportPlugin=function(e,t){C_[e]=t},dn.prototype.destroy=dn.prototype.destroy;var Ks=0,b_=1,Oo=2,ga=3;dn.LoadMode={DESTROYED:Ks,NOT_LOADED:b_,MEDIA_SOURCE:Oo,SRC_EQUALS:ga},dn.version="v4.8.2";var Ex=["4","8"];Or=new function(e){this.g=e,this.i=ei,this.h=Ji}(new Pr(Number(Ex[0]),Number(Ex[1])));var C_={},dv=null;function _x(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Et,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},ne("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function hv(e,t,n,r,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new Et,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){m6(c,d)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(d){Tx(c,d)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}hv.prototype.configure=function(e){this.s=e},hv.prototype.stop=function(){this.g&&this.g.stop(),this.o&&hp(this.o)},hv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function Tx(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),gv(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function m6(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}v6(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,pv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,pv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,pv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,pv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){gv(e,null)}}function pv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function v6(e){function t(n,r){n=new Map().set("originalEvent",n),e.m(new Wn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Tx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Sx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Sx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){gv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){gv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Sx(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):He("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function gv(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,r,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=r}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},ne("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function mp(e,t,n,r){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new Et}mp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);gd(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},mp.prototype.release=function(){this.stop(),this.o&&this.o.release()},mp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(E6(this,this.G,this.T),this.T=!1)},mp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function y6(e,t,n){var r,u,c,d,h,E,A,k,G,te,z;Oe(function(ye){if(ye.g==1)return r=Oi([t],ua()),r.method="POST",n&&(u=JSON.stringify(n),r.body=za(u)),c=e.K.request(7,r),de(ye,2),x(ye,c.promise,4);if(ye.g!=2){if(d=ye.h,h=Vr(d.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)A=new si(t),k=new si(E.trackingUrl),e.G=A.resolve(k).toString(),G=Date.now()/1e3,te=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",te))),z=new si(E.manifestUrl),e.l.resolve(A.resolve(z).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return ve(ye,0)}if(Ce(ye),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ye.return();e.l.resolve(e.H),e.l=null,X(ye)})}function E6(e,t,n){var r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge;Oe(function(Te){if(Te.g==1)return r=Oi([t],ua()),u=e.K.request(7,r),de(Te,2),x(Te,u.promise,4);if(Te.g!=2){if(c=Te.h,d=[],h=Vr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,A=m(e.j),k=A.next();!k.done;k=A.next())for(G=k.value,te=m(G.nonLinearAdsList),z=te.next();!z.done;z=te.next())for(ye=z.value,Pe=m(ye.nonLinearAdList),Ne=Pe.next();!Ne.done;Ne=Pe.next())Ge=Ne.value,_6(e,Ge);d=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",d))),gd(e),e.j=[];return n&&(e.I||0<d.length)&&T6(e),ve(Te,0)}Ce(Te),X(Te)})}function _6(e,t){var n,r,u,c,d,h,E;Oe(function(A){if(A.g==1)return!t.staticResource||(n=wx(t),e.F.get(n))?A.return():(r=Oi([t.staticResource],ua()),u=e.K.request(7,r),de(A,2),e.F.set(n,[]),x(A,u.promise,4));if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),E=h.apps,e.F.set(n,E),ve(A,0);Ce(A),e.F.delete(n),X(A)})}function wx(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function T6(e){Ix(e),e.I||(Ax(e),e.o.D(e.g,"seeked",function(){Ax(e)}),e.o.D(e.g,"ended",function(){gd(e)})),e.o.D(e.g,"timeupdate",function(){Ix(e)})}function Ax(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var d=m(c.ads),h=d.next();!h.done;h=d.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function Ix(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),ma(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),ma(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),ma(e,"thirdQuartile")),r=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=r||r>u)&&gd(e)}if(!e.h||!e.h.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var d=u.ads[c],h=d.startTimeInSeconds+d.durationInSeconds;if(d.startTimeInSeconds<=t&&h>t){if(e.N.includes(d.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}gd(e),e.L=u,e.h=new or(d,c+1,u.ads.length,!0,e.g),e.C=d,c===0&&ma(e,"breakStart"),bx(e);break}}if(!e.h){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.h);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(d=u.nonLinearAdsList[c],d.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(wx(d.nonLinearAdList[0]));if(h<=t&&E&&E.length){gd(e),h=e,E=m(E);for(var A=E.next();!A.done;A=E.next())if(A=A.value,A.data.source.length){var k=document.createElement("img");k.src=A.data.source[0].url,k.style.top=(A.placeholder.top||0)+"%",k.style.height=100-(A.placeholder.top||0)+"%",k.style.left=(A.placeholder.left||0)+"%",k.style.maxWidth=100-(A.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(d,c+1,u.ads.length,!1,e.g),e.C=d,c===0&&ma(e,"breakStart"),bx(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function gd(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),ma(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&ma(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function bx(e){var t=!1;e.g.paused?t=!0:(ma(e,"impression"),ma(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&ma(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||ma(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(ma(e,"impression"),ma(e,"start"),t=!1):ma(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){ma(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function ma(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Oi([r],ua()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},ne("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function Cx(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Et,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){S6(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var d=c.getStreamData();c=[],d=m(d.cuepoints);for(var h=d.next();!h.done;h=d.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=Cx.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function S6(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function $n(){Sr.call(this),this.g=this.h=this.i=null,this.j=new _x,this.m=navigator.language,this.l=null}Y($n,Sr),g=$n.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var r=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new pt(2,10,1e4);this.i&&this.i.release(),this.i=new hv(e,t,this.m,n,function(u){return R_(r,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new _x},g.requestClientSideAds=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new mp(e,t,n,function(u){return R_(r,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new pt(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new pt(1,10,10004)):(r.l=new Rr,y6(r,e,t),r.H=n||"",r.Y=Date.now()/1e3,e=r.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new pt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new pt(2,10,10002);this.g&&this.g.release(),this.g=new Cx(e,t,this.m,function(r){return R_(n,r)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new pt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new pt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new pt(1,10,10003);(e.mpt||e.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function R_(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}ne("shaka.ads.AdManager",$n),$n.prototype.onCueMetadataChange=$n.prototype.onCueMetadataChange,$n.prototype.onHlsTimedMetadata=$n.prototype.onHlsTimedMetadata,$n.prototype.onDashTimedMetadata=$n.prototype.onDashTimedMetadata,$n.prototype.onManifestUpdated=$n.prototype.onManifestUpdated,$n.prototype.getStats=$n.prototype.getStats,$n.prototype.getCuePoints=$n.prototype.getCuePoints,$n.prototype.getServerSideCuePoints=$n.prototype.getServerSideCuePoints,$n.prototype.replaceServerSideAdTagParameters=$n.prototype.replaceServerSideAdTagParameters,$n.prototype.requestServerSideStream=$n.prototype.requestServerSideStream,$n.prototype.initServerSide=$n.prototype.initServerSide,$n.prototype.addMediaTailorTrackingUrl=$n.prototype.addMediaTailorTrackingUrl,$n.prototype.requestMediaTailorStream=$n.prototype.requestMediaTailorStream,$n.prototype.initMediaTailor=$n.prototype.initMediaTailor,$n.prototype.updateClientSideAdsRenderingSettings=$n.prototype.updateClientSideAdsRenderingSettings,$n.prototype.requestClientSideAds=$n.prototype.requestClientSideAds,$n.prototype.onAssetUnload=$n.prototype.onAssetUnload,$n.prototype.release=$n.prototype.release,$n.prototype.initClientSide=$n.prototype.initClientSide,$n.prototype.configure=$n.prototype.configure,$n.prototype.setLocale=$n.prototype.setLocale,$n.ADS_LOADED="ads-loaded",$n.AD_STARTED="ad-started",$n.AD_FIRST_QUARTILE="ad-first-quartile",$n.AD_MIDPOINT="ad-midpoint",$n.AD_THIRD_QUARTILE="ad-third-quartile",$n.AD_COMPLETE="ad-complete",$n.AD_STOPPED="ad-stopped",$n.AD_SKIPPED="ad-skipped",$n.AD_VOLUME_CHANGED="ad-volume-changed",$n.AD_MUTED="ad-muted",$n.AD_PAUSED="ad-paused",$n.AD_RESUMED="ad-resumed",$n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$n.CUEPOINTS_CHANGED="ad-cue-points-changed",$n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$n.AD_CLICKED="ad-clicked",$n.AD_PROGRESS="ad-progress",$n.AD_BUFFERING="ad-buffering",$n.AD_IMPRESSION="ad-impression",$n.AD_DURATION_CHANGED="ad-duration-changed",$n.AD_CLOSED="ad-closed",$n.AD_LOADED="ad-loaded",$n.ALL_ADS_COMPLETED="all-ads-completed",$n.AD_LINEAR_CHANGED="ad-linear-changed",$n.AD_METADATA="ad-metadata",$n.AD_RECOVERABLE_ERROR="ad-recoverable-error",$n.AD_ERROR="ad-error",$n.AD_BREAK_READY="ad-break-ready",$n.AD_INTERACTION="ad-interaction",dv=function(){return new $n};function Rx(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(t=m(Object.getOwnPropertyNames(n)),r=t.next();!r.done;r=t.next())u.add(r.value);for(t={},u=m(u),r=u.next();!r.done;r=u.next())r=r.value,t[r]=n[r];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(mt(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function x_(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=w6(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function w6(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var xx="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),A6="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),N_=["loop","playbackRate"],I6=["pause","play"],mv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},vv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},M_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},Nx=[["getConfiguration","configure"]],Mx=[["isTextTrackVisible","setTextTrackVisibility"]],b6="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),C6=["attach","attachCanvas","detach","load","unload"];function D_(e,t,n,r,u,c,d){var h=this;this.G=e,this.K=d,this.l=new pr(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return P_(h)},this.C=function(E,A){switch(E=x_(A),E.type){case"event":var k=E.targetName,G=xm(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var te in k[G])E[te]=k[G][te]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,te=E.error,E=h.i[G],delete h.i[G],E)if(te){G=new pt(te.severity,te.category,te.code);for(k in te)G[k]=te[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,yp.add(this)}g=D_.prototype,g.destroy=function(){return yp.delete(this),O_(this),Ss&&Px(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(yp),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Rr,r.s=!0,yv(r,u)}},function(t){for(var n=m(yp),r=n.next();!r.done;r=n.next())r=r.value,Ev=t=="available",r.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Ev&&this.l.X(x6),(e=Ss)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,yv(this,e)):Ss=null}else p.__onGCastApiAvailable!==Ox&&(_v=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=Ox)},g.Af=function(e){this.o=e,this.h&&vp(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return Oe(function(t){if(!e.m)throw new pt(1,8,8e3);if(!Ev)throw new pt(1,8,8001);if(e.h)throw new pt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return yv(e,n)},function(n){return Dx(e,n)}),x(t,e.j,0)})};function R6(e){e.h&&chrome.cast.requestSession(function(t){return yv(e,t)},function(t){return Dx(e,t)})}g.uc=function(){if(this.h){if(O_(this),Ss){Px(this);try{Ss.stop(function(){},function(){})}catch(e){}Ss=null}P_(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(I6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))}}else if(e=="player"){if(M_[t]&&!this.get("player","isLive")())return function(){};if(b6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(C6.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(Qe.apply(0,arguments))))};if(mv[t]||vv[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,vp(this,{type:"set",targetName:e,property:t,value:n})};function yv(e,t){var n=e.N();Ss=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),P_(e),vp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Dx(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new pt(2,8,n,t))}g.ug=function(e,t){vp(this,{type:"call",targetName:e,methodName:t,args:Qe.apply(2,arguments)})},g.ii=function(e,t){var n=Qe.apply(2,arguments),r=new Rr,u=this.H.toString();this.H++,this.i[u]=r;try{vp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function Px(e){var t=Ss;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function P_(e){var t=Ss?Ss.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};O_(e)}e.h=t,e.I=t?Ss.receiver.friendlyName:"",e.l.kc()}function O_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new pt(1,7,7e3))}}function vp(e,t){t=Rx(t);var n=Ss;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},ot)}catch(r){throw t=new pt(2,8,8005,r),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var x6=.02,Ev=!1,Ss=null,_v=null,yp=new Set;function Ox(e){if(_v?p.__onGCastApiAvailable=_v:delete p.__onGCastApiAvailable,_v=null,e)for(var t=m(yp),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function Ri(e,t,n,r){r=r===void 0?!1:r,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new D_(n,function(){return Fx(u)},function(){return Ux(u)},function(c,d){return jx(u,c,d)},function(){return Bx(u)},function(){return kx(u)},r),N6(this)}Y(Ri,Sr),g=Ri.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&Ev},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return Oe(function(t){return t.g==1?x(t,e.g.cast(),2):e.h?x(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){R6(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return Oe(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.uc(),x(r,n.g.destroy(),2));n.g=null,n.g=new D_(e,function(){return Fx(n)},function(){return Ux(n)},function(u,c){return jx(n,u,c)},function(){return Bx(n)},function(){return kx(n)},t),n.g.init(),X(r)})};function N6(e){e.g.init(),e.m=new Et;for(var t=m(xx),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=xm(c),e.j.dispatchEvent(c))});for(var r in xc)e.m.D(e.h,xc[r],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return D6(e,c.Kc)}}(t),set:function(c){return function(d){var h=c.Kc;e.g.Ua()?e.g.set("video",h,d):e.i[h]=d}}(t)}),t={Kc:t.Kc};e.s={},Lx(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return P6(e,c)}})}),M6(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function M6(e){var t=new Map;Lx(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function Lx(e,t){function n(E){return E=="constructor"||typeof r[E]!="function"?!1:!u.has(E)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var d=m(Object.getOwnPropertyNames(e)),h=d.next();!h.done;h=d.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function kx(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(N_),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(Nx),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(Mx),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function Fx(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function Ux(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Bx(e){for(var t=m(Nx),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var d;(r=e.g.get("player","getTextTracks")())&&r.length&&(d=r.find(function(A){return A.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(N_),r=n.next();!r.done;r=n.next())r=r.value,E[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var A=m(N_),k=A.next();!k.done;k=A.next())k=k.value,e.i[k]=E[k];for(A=m(Mx),k=A.next();!k.done;k=A.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),d&&e.h.yf(d.language,d.roles,d.forced),e.i.autoplay=c,u&&e.i.play()}},function(A){A=new Map().set("detail",A),A=new Wn("error",A),e.h.dispatchEvent(A)})}function D6(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function P6(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return He(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return He(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(mv[t]||vv[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function jx(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}ne("shaka.cast.CastProxy",Ri),Ri.prototype.changeReceiverId=Ri.prototype.Yg,Ri.prototype.forceDisconnect=Ri.prototype.uc,Ri.prototype.suggestDisconnect=Ri.prototype.zi,Ri.prototype.setAppData=Ri.prototype.Af,Ri.prototype.cast=Ri.prototype.cast,Ri.prototype.receiverName=Ri.prototype.tf,Ri.prototype.isCasting=Ri.prototype.Ua,Ri.prototype.canCast=Ri.prototype.Xg,Ri.prototype.getPlayer=Ri.prototype.uh,Ri.prototype.getVideo=Ri.prototype.Fh,Ri.prototype.destroy=Ri.prototype.destroy;function vo(e,t,n,r){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new Et,this.H={video:e,player:t},this.C=n||function(){},this.I=r||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){L_(u)}),O6(this)}Y(vo,Sr),g=vo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return Oe(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),x(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function O6(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Zx(e)},t.onSenderDisconnected=function(){return Zx(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&ol(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),ol(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return F6(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return k6(e,u)},t.start(),t=m(xx);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return Gx(e,"video",u)});for(var r in xc)e.j.D(e.h,xc[r],function(u){return Gx(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,md(e)}),e.j.D(e.g,"playing",function(){e.o=!1,md(e)}),e.j.D(e.g,"pause",function(){md(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,md(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,md(e))}).X(B6)})}function Zx(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,md(e)}function md(e){var t;Oe(function(n){if(n.g==1)return x(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),qx(e)||al(e),X(n)})}function L6(e,t,n){var r,u,c,d,h,E,A,k,G,te;Oe(function(z){switch(z.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,de(z,5),x(z,e.h.load(t.manifest,t.startTime),7)):x(z,Promise.resolve(),3);case 7:ve(z,3);break;case 5:return d=Ce(z),h=new Map().set("detail",d),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),z.return();case 3:if(!e.h)return z.return();for(A in t.video)k=t.video[A],e.g[A]=k;for(G in t.playerAfterLoad)te=t.playerAfterLoad[G],e.h[G](te);e.g.autoplay=c,t.manifest&&(e.g.play(),al(e)),X(z)}})}function Gx(e,t,n){e.h&&(L_(e),ol(e,{type:"event",targetName:t,event:n},e.l))}function L_(e){e.G.X(U6);for(var t={video:{},player:{}},n=m(A6),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.R())for(var u in M_)e.m%M_[u]==0&&(t.player[u]=e.h[u]());for(var c in mv)e.m%mv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),ol(e,{type:"update",update:t},e.l);for(var d in vv)e.m%vv[d]==0&&(t={player:{}},t.player[d]=e.h[d](),ol(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),qx(e)}function qx(e){return e.A&&(e.g.duration||e.h.R())?(k_(e),e.A=!1,!0):!1}function k_(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),al(e,t===void 0?0:t,n)}function k6(e,t){var n=x_(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,L6(e,n.initState,n.appData),L_(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,d=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return Hx(e,d,c,null)},function(h){return Hx(e,d,c,h)})}}function F6(e,t){var n=x_(t.data);switch(n.type){case"PLAY":e.g.play(),al(e);break;case"PAUSE":e.g.pause(),al(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),al(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),al(e));break;case"STOP":e.h.lc().then(function(){e.h&&al(e)});break;case"GET_STATUS":k_(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||al(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&k_(e)}).catch(function(d){var h="LOAD_FAILED";d.category==7&&d.code==7e3&&(h="LOAD_CANCELLED"),ol(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:ol(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Hx(e,t,n,r){e.h&&ol(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function ol(e,t,n,r){e.F&&(e=Rx(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function al(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?j6:e.h.Xe()?G6:e.g.paused?q6:Z6,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),ol(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}ne("shaka.cast.CastReceiver",vo),vo.prototype.destroy=vo.prototype.destroy,vo.prototype.setContentArtist=vo.prototype.ti,vo.prototype.setContentImage=vo.prototype.ui,vo.prototype.setContentTitle=vo.prototype.wi,vo.prototype.clearContentMetadata=vo.prototype.bh,vo.prototype.setContentMetadata=vo.prototype.vi,vo.prototype.isIdle=vo.prototype.Lh,vo.prototype.isConnected=vo.prototype.isConnected;var U6=.5,B6=5,j6="IDLE",Z6="PLAYING",G6="BUFFERING",q6="PAUSED";function Kx(e,t,n,r,u){if(r>=u)return null;for(var c=-1,d=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){d=h;break}if(c===-1||d===-1)return null;for(var E=h=!1,A="white",k="black",G=F_(r,u,h,E,A,k);c<=d;c++){for(var te=n[c],z=-1,ye=-1,Pe=0;Pe<te.length;Pe++)if(te[Pe]!=null&&te[Pe].g.trim()!==""){z=Pe;break}for(Pe=te.length-1;0<=Pe;Pe--)if(te[Pe]!=null&&te[Pe].g.trim()!==""){ye=Pe;break}if(z===-1||ye===-1)te=Vx(r,u),e.nestedCues.push(te);else{for(;z<=ye;z++)if(Pe=te[z]){var Ne=Pe.l,Ge=Pe.i,Te=Pe.j,$e=Pe.h;(Ne!=h||Ge!=E||Te!=A||$e!=k)&&(G.payload&&e.nestedCues.push(G),G=F_(r,u,Ne,Ge,Te,$e),h=Ne,E=Ge,A=Te,k=$e),G.payload+=Pe.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==d&&(G=Vx(r,u),e.nestedCues.push(G)),G=F_(r,u,h,E,A,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function F_(e,t,n,r,u,c){return e=new Cn(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function Vx(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}function zx(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function U_(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Ep(this)}function Tv(e,t,n){var r="CC"+((e.A<<1|e.s)+1),u=new Cn(t,n,"");u.lineInterpretation=1;var c=z6.get(e.g);return c&&(u.line=c),Kx(u,r,e.i,t,n)}function Ep(e){sl(e,0,15),e.g=1}function vd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case _p:r=Qx.has(n)?Qx.get(n):String.fromCharCode(n);break;case Wx:r=H6.get(n);break;case $x:e.i[e.g].pop(),r=K6.get(n);break;case Xx:e.i[e.g].pop(),r=V6.get(n)}r&&e.i[e.g].push(new zx(r,e.m,e.j,e.o,e.l))}}function Yx(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function sl(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var _p=0,Wx=1,$x=2,Xx=3,Qx=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),H6=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),K6=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),V6=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),z6=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Sv(e,t){this.h=tN,this.o=new U_(e,t),this.i=new U_(e,t),this.g=this.j=new U_(e,t),this.l=0,this.m=null}function B_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==wv&&e.h!==Tp&&(u=Tv(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,sl(n,0,15),n=e.j,n.g=0<n.h?n.h:0,sl(n,0,15),r.g=15),e.h=wv,r.h=t,u}function Jx(e){e.h=Y6,e.g=e.j,e.g.h=0}function eN(e){_t("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Tp}var tN=0,Y6=1,wv=3,Tp=4,W6="black green blue cyan red yellow magenta black".split(" "),nN="white green blue cyan red yellow magenta white_italics".split(" ");function rN(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=Q6,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",j_(this)}function j_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Z_())}function Z_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function qc(e,t){iN(e)&&(e.i[e.h][e.g]=new zx(t,e.C,e.A,e.s,e.B),e.g++)}function iN(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}rN.prototype.isVisible=function(){return this.l};function Hc(e,t,n){var r=new Cn(e.j,t,"");r.textAlign=e.F===$6?"left":e.F===X6?"right":kn;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case J6:u.regionAnchorX=0,u.regionAnchorY=0;break;case ej:u.regionAnchorX=50,u.regionAnchorY=0;break;case tj:u.regionAnchorX=100,u.regionAnchorY=0;break;case nj:u.regionAnchorX=0,u.regionAnchorY=50;break;case rj:u.regionAnchorX=50,u.regionAnchorY=50;break;case ij:u.regionAnchorX=100,u.regionAnchorY=50;break;case oj:u.regionAnchorX=0,u.regionAnchorY=100;break;case aj:u.regionAnchorX=50,u.regionAnchorY=100;break;case sj:u.regionAnchorX=100,u.regionAnchorY=100}return(n=Kx(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var $6=0,X6=1,Q6=2,J6=0,ej=1,tj=2,nj=3,rj=4,ij=5,oj=6,aj=7,sj=8;function uj(){this.i=[],this.h=null,this.g=0}function lj(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Av(e.h)),e.h=null,e.g=0))}function Av(e){this.g=0,this.h=e}Av.prototype.ka=function(){return this.g<this.h.length},Av.prototype.wa=function(){return this.g};function oo(e){if(!e.ka())throw new pt(2,2,3e3);return e.h[e.g++]}Av.prototype.skip=function(e){if(this.g+e>this.h.length)throw new pt(2,2,3e3);this.g+=e};function cj(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function fj(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=oo(t).value,t=null,n=m(Sp(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Hc(u,r,e.i)),j_(u);return t}if(n===137)for(t=oo(t).value,t=m(Sp(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=oo(t).value,t=null,n=m(Sp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=Hc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=oo(t).value,t=null,n=m(Sp(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=Hc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=oo(t).value,oN(e,t,r);if(n===143)return r=oN(e,255,r),aN(e),r;if(n===144)t.skip(1),r=oo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=oo(t).value,n=oo(t).value,t.skip(1),e.g&&(t=sN((n&48)>>4,(n&12)>>2,n&3),e.g.B=sN((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=oo(t).value,t=oo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=oo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new rN(n,e.i);c.j=r,e.h[n]=c}r=oo(t).value,c=oo(t).value;var d=oo(t).value,h=oo(t).value,E=oo(t).value;t=oo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=d,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function Sp(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function oN(e,t,n){var r=null;t=m(Sp(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=Hc(c,n,e.i)),e.h[u]=null}return r}function aN(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function sN(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],dj[e<<2|t<<1|n]}var uN=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),dj="black blue green cyan red magenta yellow white".split(" ");function yd(){this.h=[],this.g=[],this.i=new uj,this.l=0,this.m=new Map([["CC1",new Sv(0,0)],["CC2",new Sv(0,1)],["CC3",new Sv(1,0)],["CC4",new Sv(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,G_(this)}yd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,G_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())aN(t.value)};function G_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=tN,n.g=n.j,n.m=null,Ep(n.i),Ep(n.j),Ep(n.o);e.B=!0}yd.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.P(),c=(u&4)>>2,d=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:d,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:d,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},yd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=hj(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())lj(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=pj(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function hj(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!lN(t.cb)||!lN(t.vb))return 45<=++e.l&&G_(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(r),e=null,(t.cb&112)===16)e:{if(r=t.cb,e=t.vb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white";var c=!1;7>u?r=nN[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==Tp&&(u=n.g,n.h===wv&&t!==u.g&&(n=1+t-u.h,Yx(u,n,1+u.g-u.h,u.h),sl(u,0,n-1),sl(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",vd(n.g,_p,32),r=!1,t=nN[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=W6[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)vd(n.g,Wx,e);else if((r&246)===18&&(e&224)===32)vd(n.g,r&1?Xx:$x,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.vb){case 32:Jx(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=B_(n,2,e);break;case 38:r=B_(n,3,e);break;case 39:r=B_(n,4,e);break;case 40:vd(n.g,_p,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ep(n.o),eN(n);break;case 43:eN(n);break;case 44:t=n.i,r=null,n.h!==Tp&&(r=Tv(t,n.l,e)),sl(t,0,15);break;case 45:t=n.g,n.h!==wv?r=null:(r=Tv(t,n.l,e),c=t.g-t.h+1,Yx(t,c-1,c,t.h),sl(t,0,c-1),sl(t,t.g,15-t.g),n.l=e);break;case 46:sl(n.j,0,15);break;case 47:t=null,n.h!==Tp&&(t=Tv(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,Jx(n),n.l=e,r=t}e=r;break e}e=null}else r=t.vb,vd(n.g,_p,t.cb),vd(n.g,_p,r);return e}function pj(e,t){var n=[];try{for(;t.ka();){var r=oo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=oo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new cj(u));for(var d=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=oo(u),A=E.value,k=E.pts;if(A===16){var G=oo(u);A=A<<16|G.value}if(0<=A&&31>=A){var te=k;if(d.g){var z=d.g;switch(u=null,A){case 8:!iN(z)||0>=z.g&&0>=z.h||(0>=z.g?(z.g=z.m-1,z.h--):z.g--,z.i[z.h][z.g]=null);break;case 13:if(z.isVisible()&&(u=Hc(z,te,d.i)),z.h+1>=z.o){te=z;for(var ye=0,Pe=1;16>Pe;Pe++,ye++)te.i[ye]=te.i[Pe];for(Pe=0;1>Pe;Pe++,ye++)te.i[ye]=Z_()}else z.h++;z.g=0;break;case 14:z.isVisible()&&(u=Hc(z,te,d.i)),z.i[z.h]=Z_(),z.g=0;break;case 12:z.isVisible()&&(u=Hc(z,te,d.i)),j_(z),te=z,te.h=0,te.g=0}var Ne=u}else Ne=null}else if(128<=A&&159>=A)Ne=fj(d,u,A,k);else{if(4096<=A&&4127>=A)te=A&255,8<=te&&15>=te?u.skip(1):16<=te&&23>=te?u.skip(2):24<=te&&31>=te&&u.skip(3);else if(4224<=A&&4255>=A)te=A&255,128<=te&&135>=te?u.skip(4):136<=te&&143>=te&&u.skip(5);else if(32<=A&&127>=A)u=A,d.g&&(u===127?qc(d.g,""):qc(d.g,String.fromCharCode(u)));else if(160<=A&&255>=A)d.g&&qc(d.g,String.fromCharCode(A));else if(4128<=A&&4223>=A){if(u=A&255,d.g)if(uN.has(u)){var Ge=uN.get(u);qc(d.g,Ge)}else qc(d.g,"_")}else 4256<=A&&4351>=A&&d.g&&((A&255)!=160?qc(d.g,"_"):qc(d.g,"[CC]"));Ne=null}(u=Ne)&&n.push(u)}}}}catch(Te){if(Te instanceof pt&&Te.code===3e3)_t("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Te}return n}function lN(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}yd.prototype.getStreams=function(){return Array.from(this.A)},ne("shaka.cea.CeaDecoder",yd),Nt=function(){return new yd};function cN(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function Iv(){this.j=new Map,this.i=this.h=0,this.g=q_}Iv.prototype.init=function(e){function t(c){c=c.name,c in bv&&(n.g=bv[c])}var n=this,r=[],u=[];if(new kr().box("moov",yr).box("mvex",yr).O("trex",function(c){var d=c.reader;d.skip(4),d.skip(4),c=d.M(),d=d.M(),n.h=c,n.i=d}).box("trak",yr).O("tkhd",function(c){c=Zt(c.reader,c.version),r.push(c.trackId)}).box("mdia",yr).O("mdhd",function(c){c=It(c.reader,c.version),u.push(c.timescale)}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",wi).box("sinf",yr).box("frma",function(c){c=un(c.reader).Ea,c in bv&&(n.g=bv[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new pt(2,2,2010);this.g==q_&&He("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,d){n.j.set(c,u[d])})},Iv.prototype.parse=function(e){var t=this;if(this.g==q_)return[];var n=[],r=this.h,u=this.i,c=0,d=[],h=null,E=9e4;return new kr().box("moof",function(A){c=A.start,d=[],yr(A)}).box("traf",yr).O("trun",function(A){A=$t(A.reader,A.version,A.flags),d.push(A)}).O("tfhd",function(A){A=rr(A.reader,A.flags),r=A.Wf||t.h,u=A.fh||t.i,A=A.trackId,t.j.has(A)&&(E=t.j.get(A))}).O("tfdt",function(A){h=ir(A.reader,A.version).baseMediaDecodeTime}).box("mdat",function(A){if(h===null)throw He("Unable to find base media decode time for CEA captions!"),new pt(2,2,2010);gj(t,A.reader,h,E,r,u,c-A.start-8,d,n)}).parse(e,!1),n};function gj(e,t,n,r,u,c,d,h,E){var A=0,k=c,G=h.map(function(ye){return ye.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(d+h[0].eh);t.ka();){d=t.M();var te=t.P(),z=null;switch(z=!1,h=1,e.g){case wp:z=te&31,z=z==6;break;case Ap:h=2,t.skip(1),z=te>>1&63,z=z==39||z==40;break;default:return}if(z)for(te=0,A<G.length&&(te=G[A].he||0),te=(n+te)/r,h=m(cN(t.sb(d-h))),z=h.next();!z.done;z=h.next())E.push({packet:z.value,pts:te});else try{t.skip(d-h)}catch(ye){break}k-=d+4,k==0&&(n=A<G.length?n+(G[A].wf||u):n+u,A++,A<G.length?k=G[A].sampleSize||c:k=c)}}ne("shaka.cea.Mp4CeaParser",Iv);var q_=0,wp=1,Ap=2,bv={avc1:wp,avc3:wp,hev1:Ap,hvc1:Ap,dvav:wp,dva1:wp,dvh1:Ap,dvhe:Ap};zt["video/mp4"]=function(){return new Iv};function Cv(){this.g=null}Cv.prototype.init=function(){},Cv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ke;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),r=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(cN(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},ne("shaka.cea.TsCeaParser",Cv),zt["video/mp2t"]=function(){return new Cv};function fN(e,t,n){var r=_j(e),u=null;e=[];var c=[],d=null,h=new Set(r.map(function(A){return A.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new pt(2,4,4010);if(!t){if(c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new pt(2,4,4050);c.length&&(d=Sj(c[0])),(c=r.find(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=r.filter(function(A){return A.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=A.init||u,!1):A.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=Ej(u,E,c,n,h),e.length==0&&(e=[Fu("",E,u)]))}if(r.length&&!d&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Fu(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:d,Zf:!0}}function mj(e,t,n,r){var u=fN(e,n,r);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(d){return d.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new pt(2,4,4008);return u.Vf||t.Vf}function vj(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function yj(e){e=m(Ra(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ci(n)}return""}function Rv(e){var t=Us(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Us(e.node,"urn:microsoft:playready","pro"),!e||!Ci(e)||(e=Ci(e),e=Ho(e),e=vj(e).filter(function(n){return n.type===wj})[0],!e)?"":(e=Ka(e.value,!0),(e=Ul(e,"WRMHEADER"))?yj(e):""))}function Ej(e,t,n,r,u){var c=[];n=m(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var h=r[d.Dc];if(h){var E;if((E=Us(d.node,"urn:microsoft:playready","pro"))&&Ci(E)){E=Ci(E),E=Ho(E);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:zf(E,A,new Set,0),initDataType:"cenc",keyId:d.keyId}]}else E=null;if(A=null,d.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(A=u,A.size==0)A=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);A=[{initData:zf(G,k,A,1),initDataType:"cenc",keyId:d.keyId}]}E=Fu(h,t,d.init||e||E||A),(h=Aj.get(h))&&(E.licenseServerUri=h(d)),c.push(E)}}return c}function _j(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=Tj(n.value))&&t.push(n);return t}function Tj(e){var t=e.attributes.schemeIdUri,n=Eu(e,"urn:mpeg:cenc:2013","default_KID"),r=Wf(e,"urn:mpeg:cenc:2013","pssh").map(yu),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new pt(2,4,4009);var c=[];try{c=r.map(function(d){return{initDataType:"cenc",initData:Ho(d),keyId:null}})}catch(d){throw new pt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function Sj(e){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var t=Us(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new pt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new pt(2,4,4051);if(t=Us(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new pt(2,4,4051);if(e=t.attributes.IV,t=bo(t.attributes.keyUriTemplate),!e||!t)throw new pt(2,4,4051);if(e=hu(e.substr(2)),e.byteLength!=16)throw new pt(2,4,4048);return{Rh:t,iv:e}}var wj=1,Aj=new Map().set("com.widevine.alpha",function(e){var t=Us(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Us(e.node,"urn:microsoft","laurl"))&&bo(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Rv).set("com.microsoft.playready.recommendation",Rv).set("com.microsoft.playready.software",Rv).set("com.microsoft.playready.hardware",Rv).set("org.w3.clearkey",function(e){var t=Us(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Us(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ci(e))?e:""});function xv(e,t,n,r,u,c){var d={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,A,k){if(h=="$$")return"$";var G=d[E];if(G==null)return h;switch(E=="RepresentationID"&&A&&(A=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&He("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return A=p.parseInt(A,10)||1,Array(Math.max(0,A-h.length)+1).join("0")+h})}function dN(e,t){var n=Su(e,t,"timescale"),r=1;n&&(r=Bs(n)||1),n=Su(e,t,"duration"),(n=Bs(n||""))&&(n/=r);var u=Su(e,t,"startNumber"),c=Number(Su(e,t,"presentationTimeOffset"))||0,d=Ro(u||"");(u==null||d==null)&&(d=1);var h=Nv(e,t,"SegmentTimeline");if(t=null,h){t=r,e=e.ha.duration||1/0,u=d,h=Wr(h,"S");for(var E=[],A=-c,k=0;k<h.length;++k){var G=h[k],te=h[k+1],z=_r(G,"t",Ro),ye=_r(G,"d",Ro),Pe=_r(G,"r",Qu);if(G=_r(G,"k",Qu)||0,z!=null&&(z-=c),!ye)break;if(z=z!=null?z:A,Pe=Pe||0,0>Pe)if(te){if(te=_r(te,"t",Ro),te==null)break;if(z>=te)break;Pe=Math.ceil((te-z)/ye)-1}else{if(e==1/0)break;if(z/t>=e)break;Pe=Math.ceil((e*t-z)/ye)-1}for(0<E.length&&z!=A&&(E[E.length-1].end=z/t),te=0;te<=Pe;++te)A=z+ye,E.push({start:z/t,end:A/t,Kf:z,rb:G,ri:E.length+u}),z=A}t=E}return{timescale:r,Da:n,rd:d,Bb:c/r||0,Jf:c,timeline:t}}function hN(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(ju)}function Su(e,t,n){t=hN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Nv(e,t,n){t=hN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=la(r.value,n));r=t.next());return e}function Ij(e,t,n,r,u,c){for(var d=Eu(e,"http://www.w3.org/1999/xlink","href"),h=Eu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),A=E.next();!A.done;A=E.next()){A=A.value;var k=A.split(":"),G=Pc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[A]}if(5<=c)return gu(new pt(2,4,4028));if(h!="onLoad")return gu(new pt(2,4,4027));var te=co([r],[d]);return u.request(0,Oi(te,t)).va(function(z){if(z=Xh(z.data,e.tagName),!z)return gu(new pt(2,4,4001,d));for(e.children=[];z.children.length;){var ye=z.children.shift();ye.tagName&&(ye.parent=e),e.children.push(ye)}ye=m(Object.keys(z.attributes));for(var Pe=ye.next();!Pe.done;Pe=ye.next())Pe=Pe.value,e.attributes[Pe]=z.attributes[Pe];return Mv(e,t,n,te[0],u,c+1)})}function Mv(e,t,n,r,u,c){if(c=c===void 0?0:c,Eu(e,"http://www.w3.org/1999/xlink","href")){var d=Ij(e,t,n,r,u,c);return n&&(d=d.va(void 0,function(){return Mv(e,t,n,r,u,c)})),d}d=[];for(var h={},E=m(FE(e)),A=E.next();!A.done;h={pc:h.pc},A=E.next())h.pc=A.value,Eu(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&d.push(Mv(h.pc,t,n,r,u,c));return Hf(d).va(function(){return e})}function bj(e,t,n,r,u,c,d){var h,E=new kr().O("sidx",function(A){h=Cj(t,r,u,c,d,n,A)});if(e&&E.parse(e),h)return h;throw new pt(2,3,3004)}function Cj(e,t,n,r,u,c,d){var h=[];d.reader.skip(4);var E=d.reader.M();if(E==0)throw new pt(2,3,3005);if(d.version==0)var A=d.reader.M(),k=d.reader.M();else A=d.reader.Cc(),k=d.reader.Cc();d.reader.skip(2);var G=d.reader.ra();for(e=e+d.size+k,k=0;k<G;k++){var te=d.reader.M(),z=(te&2147483648)>>>31;te&=2147483647;var ye=d.reader.M();if(d.reader.skip(4),z==1)throw new pt(2,3,3006);h.push(new Je(A/E+n,(A+ye)/E+n,function(){return c},e,e+te-1,t,n,r,u)),A+=ye,e+=te}return d.parser.stop(),h}function jl(e){this.h=tn(e),this.g=new Dr(this.h,0)}jl.prototype.ka=function(){return this.g.ka()};function ul(e){var t=pN(e);if(7<t.length)throw new pt(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=pN(e);e:{r=m(Rj);for(var u=r.next();!u.done;u=r.next())if(zi(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new pt(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),r=tn(e.h,e.g.wa(),t),e.g.skip(t),new xj(n,r)}function pN(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new pt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var Rj=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function xj(e,t){this.id=e,this.g=t}function H_(e){if(8<e.g.byteLength)throw new pt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new pt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function Nj(e,t,n,r,u,c,d,h,E){function A(){return u}var k=[];e=new jl(e.g);for(var G=null,te=null;e.ka();){var z=ul(e);if(z.id==187){var ye=Mj(z);ye&&(z=n*ye.Di,ye=t+ye.gi,G!=null&&k.push(new Je(G+d,z+d,A,te,ye-1,c,d,h,E)),G=z,te=ye)}}return G!=null&&k.push(new Je(G+d,r+d,A,te,null,c,d,h,E)),k}function Mj(e){var t=new jl(e.g);if(e=ul(t),e.id!=179)throw new pt(2,3,3013);if(e=H_(e),t=ul(t),t.id!=183)throw new pt(2,3,3012);t=new jl(t.g);for(var n=0;t.ka();){var r=ul(t);if(r.id==241){n=H_(r);break}}return{Di:e,gi:n}}function gN(e,t,n){if(t=Nv(e,t,"Initialization"),!t)return null;var r=e.J.nb(),u=t.attributes.sourceURL;u&&(r=co(r,[bo(u)])),u=0;var c=null;return(t=_r(t,"range",Xf))&&(u=t.start,c=t.end),n=new dt(function(){return r},u,c,EN(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function Dj(e,t,n){var r=Number(Su(e,Ed,"presentationTimeOffset"))||0,u=Su(e,Ed,"timescale"),c=1;u&&(c=Bs(u)||1);var d=r/c||0,h=gN(e,Ed,n);Pj(e,h);var E=pm(e);return{vc:function(){var A=Nv(E,Ed,"RepresentationIndex"),k=E.J.nb();return A&&(A=bo(A.attributes.sourceURL))&&(k=co(k,[A])),A=vN(E),mN(E,t,h,k,A.start,A.end,d)}}}function mN(e,t,n,r,u,c,d){var h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut;return Oe(function(yt){if(yt.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,A=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],te=t,z=null,ye=[te(r,u,c,!1),G=="webm"?te(n.$(),n.Aa,n.ja,!0):null],te=null,x(yt,Promise.all(ye),2);if(Pe=yt.h,Ne=Pe[0],Ge=Pe[1]||null,Te=null,$e=A-d,Ue=A,gt=k?A+k:1/0,G=="mp4")var jt=bj(Ne,u,r,n,$e,Ue,gt);else{if(jt=new jl(Ge),ul(jt).id!=440786851)throw new pt(2,3,3008);var ln=ul(jt);if(ln.id!=408125543)throw new pt(2,3,3009);jt=ln.g.byteOffset,ln=new jl(ln.g);for(var gn=null;ln.ka();){var Ln=ul(ln);if(Ln.id==357149030){gn=Ln;break}}if(!gn)throw new pt(2,3,3010);for(gn=new jl(gn.g),Ln=1e6,ln=null;gn.ka();){var Mn=ul(gn);if(Mn.id==2807729)Ln=H_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)ln=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)ln=Mn.g.getFloat64(0);else throw new pt(2,3,3003)}if(ln==null)throw new pt(2,3,3011);if(gn=Ln/1e9,ln*=gn,Ln=ul(new jl(Ne)),Ln.id!=475249515)throw new pt(2,3,3007);jt=Nj(Ln,jt,gn,ln,r,n,$e,Ue,gt)}for(Te=jt,Rt=m(Te),Ht=Rt.next();!Ht.done;Ht=Rt.next())Ut=Ht.value,Ut.codecs=e.J.codecs,Ut.mimeType=e.J.mimeType;return h.ld(Te),z=new wr(Te),E&&z.sc(Ue,gt,!0),yt.return(z)})}function Ed(e){return e.pd}function vN(e){var t=Nv(e,Ed,"RepresentationIndex");return e=Su(e,Ed,"indexRange"),e=Xf(e||""),t&&(e=_r(t,"range",Xf,e)),e}function Pj(e,t){if(yN(e,t),!vN(e))throw new pt(2,4,4002)}function yN(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=vr&&n!="mp4"&&n!="webm")throw new pt(2,4,4006);if(n=="webm"&&!t)throw new pt(2,4,4005)}function EN(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Oj(e,t,n){var r=gN(e,_N,n),u=Lj(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new pt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new pt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new pt(2,4,4002);var c=null,d=null;e.za.id&&e.J.id&&(d=t[e.za.id+","+e.J.id])&&(c=d.segmentIndex);var h=kj(e.ha.start,e.ha.duration,e.J.nb,u,r,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),d&&(d.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function _N(e){return e.Jb}function Lj(e){var t=Fj(e);e=dN(e,_N);var n=e.rd;n==0&&(n=1);var r=0;return e.Da?r=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Da:e.Da,startTime:r,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function kj(e,t,n,r,u,c,d,h){var E=r.yc.length;r.timeline&&r.timeline.length!=r.yc.length&&(E=Math.min(r.timeline.length,r.yc.length));for(var A=e-r.Bb,k=t?e+t:1/0,G=[],te=r.startTime,z={},ye=0;ye<E;z={Sc:z.Sc,Oc:z.Oc},ye++){z.Oc=r.yc[ye];var Pe=te;te=void 0,te=r.Da!=null?Pe+r.Da:r.timeline?r.timeline[ye].end:Pe+t,z.Sc=null,Pe=new Je(e+Pe,e+te,function(Ne){return function(){return Ne.Sc==null&&(Ne.Sc=co(n(),[Ne.Oc.Xh])),Ne.Sc}}(z),z.Oc.start,z.Oc.end,u,A,e,k,[],"",null,null,Bt,c),Pe.codecs=h,Pe.mimeType=d,G.push(Pe)}return G}function Fj(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(ju).map(function(t){return Wr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=bo(t.attributes.media);return t=_r(t,"mediaRange",Xf,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function Uj(e,t,n,r,u,c,d,h){var E=Gj(e,d),A=Bj(e);jj(A);var k=pm(e);if(A.hd)return yN(e,E),{vc:function(){var Pe=xv(A.hd,k.J.id,null,null,k.bandwidth||null,null);return Pe=co(k.J.nb(),[Pe]),mN(k,t,E,Pe,0,null,A.Bb)}};if(A.Da)return r||e.ua.contentType==="image"||(e.presentationTimeline.hf(A.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return Zj(k,A,u,E,c,d,h)}};var G=null;r=r=null,e.za.id&&e.J.id&&(r=e.za.id+","+e.J.id,r=n[r])&&(G=r.segmentIndex);var te=e.ha.start,z=e.ha.duration?te+e.ha.duration:1/0,ye=!(e.Eb&&e.ha.Ye);return G?(n=G,TN(n,A,te,z,ye,E),n.La(e.presentationTimeline.qb())):G=new Pv(A,e.J.id,e.bandwidth,e.J.nb,te,z,E,ye,d,e.J.xf),A.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(A.timeline,te),r&&e.Eb&&(r.segmentIndex=G),{vc:function(){return G instanceof Pv&&G.getNumReferences()==0&&TN(G,A,te,z,ye,E),Promise.resolve(G)}}}function Dv(e){return e.qd}function Bj(e){var t=dN(e,Dv),n=Su(e,Dv,"media"),r=Su(e,Dv,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&bo(n),hd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function jj(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new pt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new pt(2,4,4002)}function Zj(e,t,n,r,u,c,d){function h(ln){var gn=(ln-Pe)*ye,Ln=gn+t.Bb,Mn=gn+G;gn=Mn+ye;var qn=Math.min(gn,A());return Mn=new Je(Mn,qn,function(){var Yn=Ln*Ne;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(Ne)),Yn=xv(Ge,$e,ln,null,Te,Yn),co(Ue(),[Yn])},0,null,r,gt,G,A(),[],"",null,null,Bt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=gn,Mn}function E(){var ln=[Math.max(k.qb(),G),Math.min(k.Gb(),A())].map(function(gn){return gn-G});return ln=[Math.ceil(ln[0]/ye),Math.ceil(ln[1]/ye)-1],e.J.Qb&&ln[1]++,ln.map(function(gn){return gn+Pe})}function A(){var ln=te!=null&&u[te]||z;return ln?G+ln:1/0}var k=e.presentationTimeline,G=e.ha.start,te=e.za.id,z=e.ha.duration,ye=t.Da,Pe=t.rd,Ne=t.timescale,Ge=t.zc,Te=e.bandwidth||null,$e=e.J.id,Ue=e.J.nb,gt=G-t.Bb,Rt=E();n=e.Eb?Math.max(Rt[0],Rt[1]-n+1):Rt[0],d=d||Rt[1],Rt=[];for(var Ht=n;Ht<=d;++Ht){var Ut=h(Ht);Rt.push(Ut)}var yt=new wr(Rt);if(Rt=k.Gb()<A(),Ht=k.R(),Rt||Ht){var jt=Math.max(n,d+1);yt.ke(ye,function(){var ln=k.qb();yt.La(ln);var gn=m(E());gn.next(),gn=gn.next().value;for(var Ln=[];jt<=gn;){var Mn=h(jt);Ln.push(Mn),jt++}return ln>A()&&!Ln.length?null:Ln})}return Promise.resolve(yt)}function Gj(e,t){var n=Su(e,Dv,"initialization");if(!n)return null;n=bo(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new dt(function(){var d=xv(n,r,null,null,u,null);return co(c(),[d])},0,null,EN(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Pv(e,t,n,r,u,c,d,h,E,A){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.i=u,this.l=c,this.s=d,this.A=E,this.G=A,h&&SN(this)}Y(Pv,wr),g=Pv.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.i<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function TN(e,t,n,r,u,c){if(qj(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var d=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=d.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;u&&SN(e)}function qj(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ht(n,t)}}function SN(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.i;if(u=r<n?t[r+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return r+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.zc,u=this.h.timeline[e],c=u.ri,d=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var A=this.h.codecs,k=this.h.mimeType,G=[],te=(u.end-u.start)/u.rb,z={},ye=0;ye<u.rb;z={Tc:z.Tc,se:z.se},ye++){var Pe=u.start+te*ye,Ne=Pe+te;z.se=ye+1,z.Tc=null,Pe=new Je(this.i+Pe,this.i+Ne,function(Ge){return function(){return t.h?(Ge.Tc==null&&(Ge.Tc=wN(t.h.zc,t.F,c,t.B,d,Ge.se,t.C)),Ge.Tc):[]}}(z),0,null,this.s,n,this.i,this.l,[],"",null,null,Bt,this.A),Pe.codecs=A,Pe.mimeType=k,this.G==0?0<ye&&Pe.Zd():ye%this.G!=0&&Pe.Zd(),G.push(Pe)}n=new Je(this.i+u.start,E,function(){return 0<u.rb?[]:wN(r,t.F,c,t.B,d,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,Bt,this.A,0<u.rb),n.codecs=A,n.mimeType=k,n.i=h,this.g[e]=n}return n};function wN(e,t,n,r,u,c,d){return e=xv(e,t,n,c,r||null,u),co(d(),[e]).map(function(h){return h.toString()})}function _d(e){this.o=null,this.A=e,this.G=new Ll,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}_d.prototype.configure=function(e){this.o=e},_d.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},_d.prototype.setManifestType=function(e){this.s=e};function Ip(e,t){var n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1)return n=co(e.i,[Hj(e,t)]),r=Oi(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),mu(e.G,u),de(A,2),x(A,u.promise,4);if(A.g!=2)return c=A.h,d=Vr(c.data),h=JSON.parse(d),h.VERSION==1&&Kj(e,h,c.uri),ve(A,0);if((E=Ce(A))&&E.code==7001)return A.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){Ip(e,t)}),e.g.X(e.C),X(A)})}function Hj(e,t){if(!e.m.length)return t;t=new si(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),ra(u)&&hr(t,u),t.toString()}function Kj(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new pr(function(){Ip(e,r)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Td(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}_d.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function bp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u={},c=m(e.m),d=c.next();!d.done;u={Pb:u.Pb},d=c.next())if(u.Pb=d.value,d=t.get(u.Pb))r.push({rf:u.Pb,location:d});else if(d=e.F.find(function(E){return function(A){return A.Vi==E.Pb}}(u))){var h=t.get(d["BASE-ID"]);h&&(d["URI-REPLACEMENT"].Ng?(h=new si(h),_n(h,d["URI-REPLACEMENT"].Ng),r.push({rf:u.Pb,location:h.toString()})):r.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),d=c.next();!d.done;d=c.next())d=d.value,h=e.j.get(d),u>h&&e.j.delete(d);if(r=r.filter(function(E){for(var A=m(e.j.keys()),k=A.next();!k.done;k=A.next())if(k.value.includes(new si(E.location).wb))return!1;return!0}),r.length&&(e.B=r[0].rf),r=r.map(function(E){return E.location}),!r.length&&e.h)for(u=m(e.h.split(",")),d=u.next();!d.done;d=u.next())(c=t.get(d.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:co(e.i,r)}function Vo(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Vo.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function AN(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var d=e.next();!d.done;d=e.next()){var h=d.value;d=new Map(h.audioStreams.map(function(G){return[Y_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[z_(G),G]})),A=new Map(h.textStreams.map(function(G){return[Np(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[Mp(G),G]})),t){var k=NN(vr);A.set(Np(k),k),k=NN("image"),h.set(Mp(k),k)}n.push(d),r.push(E),u.push(A),c.push(h)}return{Pf:n,Lg:r,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn;return Oe(function(Yn){if(Yn.g==1){if(r=yi,!t&&e.length==1)return u=AN(e,!1),c=u.Pf,d=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(d[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(A=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),A==-1&&(A=k));return A==-1?Yn.return():(te=AN(e,!0),z=te.Pf,ye=te.Lg,Pe=te.Ig,Ne=te.hg,x(Yn,Promise.all([Zl(n,n.h,z,A,Cp,Sd),Zl(n,n.g,ye,A,Cp,Sd),Zl(n,n.l,Pe,A,Cp,Sd),Zl(n,n.i,Ne,A,Cp,Sd)]),2))}if(Ge=0,Te=[],n.g.length&&n.h.length)for(Ut=m(n.h),yt=Ut.next();!yt.done;yt=Ut.next())for(jt=yt.value,ln=m(n.g),gn=ln.next();!gn.done;gn=ln.next())Ln=gn.value,Mn=fe(jt.drmInfos,Ln.drmInfos),jt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=Ge++,Te.push({id:qn,language:jt.language,disabledUntilTime:0,primary:jt.primary,audio:jt,video:Ln,bandwidth:(jt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for($e=n.g.length?n.g:n.h,Ue=m($e),gt=Ue.next();!gt.done;gt=Ue.next())Rt=gt.value,Ht=Ge++,Te.push({id:Ht,language:Rt.language,disabledUntilTime:0,primary:Rt.primary,audio:Rt.type==r.S?Rt:null,video:Rt.type==r.fa?Rt:null,bandwidth:Rt.bandwidth||0,drmInfos:Rt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Te,X(Yn)})};function IN(e){var t,n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:if(t=yi,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.S}).map(function(Kn){return[Y_(Kn),Kn]}))}),r=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.fa}).map(function(Kn){return[z_(Kn),Kn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ma}).map(function(Kn){return[Np(Kn),Kn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ue}).map(function(Kn){return[Mp(Kn),Kn]}))}),d=m(u),h=d.next();!h.done;h=d.next())E=h.value,A=xN(t.ma),E.set(Np(A),A);for(k=m(c),G=k.next();!G.done;G=k.next())te=G.value,z=xN(t.ue),te.set(Mp(z),z);return ye=new Vo,x(qn,Zl(ye,[],n,0,Ov,Lv),2);case 2:return Pe=qn.h,x(qn,Zl(ye,[],r,0,Ov,Lv),3);case 3:return Ne=qn.h,x(qn,Zl(ye,[],u,0,Ov,Lv),4);case 4:return Ge=qn.h,x(qn,Zl(ye,[],c,0,Ov,Lv),5);case 5:if(Te=qn.h,$e=0,Ne.length&&Pe.length)for(Ut=m(Pe),yt=Ut.next();!yt.done;yt=Ut.next())for(jt=yt.value,ln=m(Ne),gn=ln.next();!gn.done;gn=ln.next())Ln=gn.value,Mn=$e++,Ln.variantIds.push(Mn),jt.variantIds.push(Mn);else for(Ue=Ne.concat(Pe),gt=m(Ue),Rt=gt.next();!Rt.done;Rt=gt.next())Ht=Rt.value,Ht.variantIds=[$e++];return qn.return(Ne.concat(Pe).concat(Ge).concat(Te))}})}function Zl(e,t,n,r,u,c){var d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht;return Oe(function(Ut){switch(Ut.g){case 1:for(d=[],h=0;h<r;h++)d.push(new Set);for(E=r;E<n.length;E++)d.push(new Set(n[E].values()));A=m(t),k=A.next();case 2:if(k.done){Ut.u(4);break}return G=k.value,x(Ut,Vj(e,G,n,r,c,d),5);case 5:if(te=Ut.h,!te)throw new pt(2,4,4037);k=A.next(),Ut.u(2);break;case 4:for(z=m(d),ye=z.next();!ye.done;ye=z.next())for(Pe=ye.value,Ne=m(Pe),Ge=Ne.next();!Ge.done;Ge=Ne.next())Te=Ge.value,($e=zj(e,Te,n,u,c,d))&&t.push($e);for(Ue=m(d),ye=Ue.next();!ye.done;ye=Ue.next())for(gt=ye.value,Rt={},Ht=m(gt),Ge=Ht.next();!Ge.done;Rt={Bd:Rt.Bd},Ge=Ht.next())if(Rt.Bd=Ge.value,!V_(Rt.Bd)&&t.some(function(yt){return function(jt){return K_(e,yt.Bd,jt)}}(Rt)))throw new pt(2,4,4037);return Ut.return(t)}})}function Vj(e,t,n,r,u,c){return Oe(function(d){return d.g==1?(RN(e,n,t),t.matchedStreams?t.segmentIndex?x(d,bN(t,r),2):d.u(2):d.return(!1)):(CN(t,r,u,c),d.return(!0))})}function bN(e,t){var n,r,u,c,d,h,E;return Oe(function(A){if(A.g==1){for(n=[],r=e.matchedStreams,u=m(r),c=u.next();!c.done;c=u.next())d=c.value,n.push(d.createSegmentIndex()),d.trickModeVideo&&!d.trickModeVideo.segmentIndex&&n.push(d.trickModeVideo.createSegmentIndex());return x(A,Promise.all(n),2)}if(e.segmentIndex instanceof Ei)for(h=t;h<r.length;h++)E=r[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);X(A)})}function zj(e,t,n,r,u,c){if(V_(t))return null;var d=r(t);return RN(e,n,d),d.createSegmentIndex&&(d.createSegmentIndex=function(){return Oe(function(h){return d.segmentIndex?h.u(0):(d.segmentIndex=new Ei,x(h,bN(d,0),0))})}),!d.matchedStreams||!d.matchedStreams.length?null:(CN(d,0,u,c),d)}function CN(e,t,n,r){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var d=!0;if(e.type=="audio"&&qu(e.language,c.language)==0&&(d=!1),d&&(r[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function Cp(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Ov(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Sd(e,t){function n(d,h){d||(d=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,d.includes(E)||d.push(E);return d}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=fe(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new pt(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Cp(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Sd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Sd(e.trickModeVideo,t)}function Lv(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function RN(e,t,n){var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=Yj(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function Yj(e,t,n){var r={audio:Y_,video:z_,text:Np,image:Mp}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(A,k){return K_(e,A,k)},video:function(A,k){return K_(e,A,k)},text:Wj,image:$j}[n.type];for(var d={audio:Xj,video:Qj,text:Jj,image:e5}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!d(n,u,E)||(u=E)}return e.o&&!V_(u)&&t.delete(r(u)),u}function Rp(e,t){function n(r){if(!W_.has(r)){var u=ba(r);W_.set(r,u)}return W_.get(r)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function K_(e,t,n){return!(!Rp(t,n)&&!e.m||t.drmInfos&&!re(t.drmInfos,n.drmInfos))}function Wj(e,t){return t.language?!(e.forced!==t.forced||qu(e.language,t.language)==0||t.kind!=e.kind):!0}function $j(){return!0}function Xj(e,t,n){var r=Rp(e,t),u=Rp(e,n);if(r&&!u)return!1;if(!r&&u||(r=qu(e.language,t.language),u=qu(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length?!0:u.length<r.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=xp(e.channelsCount,t.channelsCount,n.channelsCount),r==Vs?!0:r==ll?!1:(r=xp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Vs?!0:r==ll?!1:!!(e.bandwidth&&MN(e.bandwidth,t.bandwidth,n.bandwidth)==Vs)))}function Qj(e,t,n){var r=Rp(e,t),u=Rp(e,n);if(r&&!u)return!1;if(!r&&u||(r=xp(e.width*e.height,t.width*t.height,n.width*n.height),r==Vs))return!0;if(r==ll)return!1;if(e.frameRate){if(r=xp(e.frameRate,t.frameRate,n.frameRate),r==Vs)return!0;if(r==ll)return!1}return!!(e.bandwidth&&MN(e.bandwidth,t.bandwidth,n.bandwidth)==Vs)}function Jj(e,t,n){var r=qu(e.language,t.language),u=qu(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function e5(e,t,n){return xp(e.width*e.height,t.width*t.height,n.width*n.height)==Vs}function xN(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function NN(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function xp(e,t,n){if(t==e&&e!=n)return ll;if(n==e&&e!=t)return Vs;if(t>e){if(n<=e||n-e<t-e)return Vs;if(n-e>t-e)return ll}else{if(n>e)return ll;if(e-n<e-t)return Vs;if(e-n>e-t)return ll}return DN}function MN(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Vs:t<e?ll:DN}function V_(e){switch(e.type){case vr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function z_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Y_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Np(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Mp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}ne("shaka.util.PeriodCombiner",Vo),Vo.prototype.setUseStreamOnce=Vo.prototype.Fg,Vo.prototype.setAllowMultiTypeVariants=Vo.prototype.yg,Vo.prototype.combinePeriods=Vo.prototype.Sf,Vo.prototype.getImageStreams=Vo.prototype.nh,Vo.prototype.getTextStreams=Vo.prototype.Ve,Vo.prototype.getVariants=Vo.prototype.Eh;var Vs=1,DN=0,ll=-1,W_=new Map;function t5(e,t){var n=new DOMParser,r=n5.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function PN(e,t){try{var n=Va(e);return t5(n,t)}catch(r){return null}}var n5=new ia(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function kv(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Vo,this.G=0,this.H=new M(5),this.A=new pr(function(){l5(e)}),this.F=new Ll,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=kv.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,r;return Oe(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,x(u,$_(n),2);if(r=u.h,n.i&&X_(n,r),!n.i)throw new pt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return de(n,2),x(n,$_(e),4);if(n.g!=2)return ve(n,0);if(t=Ce(n),!e.i||!t)return n.return();e.i.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,X_(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function $_(e){var t,n,r,u,c,d,h;return Oe(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=bp(e.h,"Location",!0),n.length&&(t=n)),r=Oi(t,e.g.retryParameters),u=Date.now(),x(E,J_(e,r,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),x(E,r5(e,c.data,c.uri),3)):E.return(0)):(d=Date.now(),h=(d-u)/1e3,e.H.sample(1,h),E.return(h))})}function r5(e,t,n){var r,u,c,d,h,E,A,k,G,te;return Oe(function(z){if(z.g==1){if(r=t,u=e.g.dash.manifestPreprocessor,c=Qm,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=PN(r,"MPD"),!d)throw new pt(2,4,4001,n);u(d),r=za(d.outerHTML)}if(h=Xh(r,"MPD"),!h)throw new pt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,A=Jm,E!=A&&E(h),e.g.dash.disableXlinkProcessing?z.return(ON(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=Mv(h,e.g.retryParameters,k,n,e.i.networkingEngine),mu(e.F,G),x(z,G.promise,2))}return te=z.h,z.return(ON(e,te,n))})}function ON(e,t,n){var r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi,Gr,fo,Fo,ai,Ys,Wc,$c,Md,cl,Ws,fl,Vl,Dd,Pd,yy,Od,zp,Ey;return Oe(function(ws){switch(ws.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,d=Wr(t,"Location"),h=m(d),E=h.next();!E.done;E=h.next())A=E.value,k=A.attributes.serviceLocation,(G=yu(A))&&(te=co(r,[G])[0],k&&(e.h?Td(e.h,"Location",k,te):c.set(k,te)),u.push(te));if(e.h?(z=bp(e.h,"Location",!0),0<z.length&&(r=e.o=z)):u.length&&(r=e.o=u),ye=Promise.resolve(),(Pe=la(t,"ContentSteering"))&&e.i)for(Ne=Pe.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=Ne):(e.h=new _d(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=Ne,(Ge=yu(Pe))&&(_r(Pe,"queryBeforeStart",Qh,!1)?ye=Ip(e.h,Ge):Ip(e.h,Ge))),Te=m(c.keys()),$e=Te.next();!$e.done;$e=Te.next())Ue=$e.value,gt=c.get(Ue),Td(e.h,"Location",Ue,gt);if(Rt=Wr(t,"BaseURL"),Ut=!1,e.h)for(yt=m(Rt),jt=yt.next();!jt.done;jt=yt.next())ln=jt.value,gn=ln.attributes.serviceLocation,Ln=yu(ln),gn&&Ln&&(Td(e.h,"BaseURL",gn,Ln),Ut=!0);if(Ut&&e.h||(Mn=Rt.map(yu),Ht=co(r,Mn)),qn=function(){return e.h&&Ut?bp(e.h,"BaseURL"):Ht||[]},Yn=0,Rt&&Rt.length&&(Yn=_r(Rt[0],"availabilityTimeOffset",Oc)||0),Kn=e.g.dash.ignoreMinBufferTime,Nr=0,Kn||(Nr=_r(t,"minBufferTime",Xa)||0),e.G=_r(t,"minimumUpdatePeriod",Xa,-1),fi=_r(t,"availabilityStartTime",$f),Li=_r(t,"timeShiftBufferDepth",Xa),ci=e.g.dash.ignoreSuggestedPresentationDelay,gi=null,ci||(gi=_r(t,"suggestedPresentationDelay",Xa)),Gr=e.g.dash.ignoreMaxSegmentDuration,fo=null,Gr||(fo=_r(t,"maxSegmentDuration",Xa)),Fo=t.attributes.type||"static",e.j)for(ai=e.j.presentationTimeline,Ys=m(Object.values(e.m)),Wc=Ys.next();!Wc.done;Wc=Ys.next())$c=Wc.value,$c.segmentIndex&&$c.segmentIndex.La(ai.qb());else Md=e.g.defaultPresentationDelay||1.5*Nr,cl=gi!=null?gi:Md,ai=new tr(fi,cl,e.g.dash.autoCorrectDrift);return ai.Ec(Fo=="static"),ai.R()&&!isNaN(e.g.availabilityWindowOverride)&&(Li=e.g.availabilityWindowOverride),Li==null&&(Li=1/0),ai.je(Li),Ws=t.attributes.profiles||"",fl={Eb:Fo!="static",presentationTimeline:ai,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Ws.split(",")},Vl=o5(e,fl,qn,t),Dd=Vl.duration,Pd=Vl.periods,Fo!="static"&&Vl.Xf||ai.Za(Dd||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?ai.zg(e.C):e.C&&He("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ai.hf(fo||1),x(ws,e.l.Sf(Pd,fl.Eb),2);case 2:return x(ws,ye,3);case 3:if(e.s&&(Nr=0,yy=gi!=null?gi:e.g.defaultPresentationDelay,ai.Bf(yy)),e.j){e.j.variants=e.l.j,Od=e.l.Ve(),0<Od.length&&(e.j.textStreams=Od),e.j.imageStreams=e.l.i,e.i.filter(e.j),ws.u(4);break}if(e.j={presentationTimeline:ai,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:Nr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:i5(t)},!ai.Kg()){ws.u(5);break}return zp=Wr(t,"UTCTiming"),x(ws,h5(e,qn,zp),6);case 6:if(Ey=ws.h,!e.i)return ws.return();ai.Ag(Ey);case 5:ai.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),X(ws)}})}function i5(e){var t=la(e,"ServiceDescription");return t?(e=la(t,"Latency"),t=la(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function o5(e,t,n,r){var u=_r(r,"mediaPresentationDuration",Xa),c=[],d=0;r=Wr(r,"Period");for(var h=0;h<r.length;h++){var E=r[h],A=r[h+1],k=_r(E,"start",Xa,d),G=E.attributes.id,te=_r(E,"duration",Xa),z=null;if(A){var ye=_r(A,"start",Xa);ye!=null&&(z=ye-k)}else u!=null&&(z=u-k);if(z==null&&(z=te),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==r.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),d=a5(e,t,n,{start:k,duration:z,node:E,Ye:z==null||!A}),c.push(d),t.za.id&&z&&(e.L[t.za.id]=z),z==null){d=null;break}d=k+z}}return e.K=c.map(function(Pe){return Pe.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:d,Xf:!0}}function a5(e,t,n,r){t.za=Q_(e,r.node,null,n),t.ha=r,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+r.start);var u=Wr(r.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())p5(e,r.start,r.duration,c.value,n);if(n=Wr(r.node,"AdaptationSet").map(function(k){return s5(e,t,k)}).filter(ju),t.Eb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var d=c.next();!d.done;d=c.next())r.push(d.value)}if(r.length!=new Set(r).size)throw new pt(2,4,4018)}for(r=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),d=m(r);for(var h=d.next();!h.done;h=d.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var A=E.next();!A.done;h={Cd:h.Cd},A=E.next())h.Cd=A.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return ba(k.Cd.codecs)==ba(G.codecs)}}(h))}}}if(n=Fv(e.g.disableAudio,r,"audio"),u=Fv(e.g.disableVideo,r,"video"),c=Fv(e.g.disableText,r,vr),r=Fv(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new pt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function Fv(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function s5(e,t,n){function r(yt){switch(yt){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=Q_(e,n,t.za,null);var u=!1,c=Wr(n,"Role"),d=c.map(function(yt){return yt.attributes.value}).filter(ju),h=void 0,E=t.ua.contentType==vr;E&&(h="subtitle"),c=m(c);for(var A=c.next();!A.done;A=c.next()){A=A.value;var k=A.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(A=A.attributes.value,A){case"main":u=!0;break;case"caption":case"subtitle":h=A}}var G;k=Wr(n,"EssentialProperty"),c=null;var te=!1;A=!1,k=m(k);for(var z=k.next();!z.done;z=k.next()){z=z.value;var ye=z.attributes.schemeIdUri;ye=="http://dashif.org/guidelines/trickmode"?c=z.attributes.value:ye=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=r(parseInt(z.attributes.value,10)):ye!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ye!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ye=="urn:mpeg:dash:ssr:2023"?te=!0:A=!0)}var Pe=null;for(k=Wr(n,"SupplementalProperty"),k=m(k),z=k.next();!z.done;z=k.next())z=z.value,ye=z.attributes.schemeIdUri,ye=="http://dashif.org/guidelines/last-segment-number"?Pe=parseInt(z.attributes.value,10)-1:ye=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=r(parseInt(z.attributes.value,10)));k=Wr(n,"Accessibility");var Ne=new Map,Ge;for(k=m(k),z=k.next();!z.done;z=k.next())if(ye=z.value,z=ye.attributes.schemeIdUri,ye=ye.attributes.value,z=="urn:scte:dash:cc:cea-608:2015")if(z=1,ye!=null){ye=ye.split(";");for(var Te=m(ye),$e=Te.next();!$e.done;$e=Te.next()){var Ue=$e.value,gt=$e=void 0;Ue.includes("=")?(Ue=Ue.split("="),$e=Ue[0].startsWith("CC")?Ue[0]:"CC"+Ue[0],gt=Ue[1]||"und"):($e="CC"+z,ye.length==2?z+=2:z++,gt=Ue),Ne.set($e,Cr(gt))}}else Ne.set("CC1","und");else if(z=="urn:scte:dash:cc:cea-708:2015")if(z=1,ye!=null)for(ye=m(ye.split(";")),$e=ye.next();!$e.done;$e=ye.next())$e=$e.value,Ue=Te=void 0,$e.includes("=")?($e=$e.split("="),Te="svc"+$e[0],Ue=$e[1].split(",")[0].split(":").pop()):(Te="svc"+z,z++,Ue=$e),Ne.set(Te,Cr(Ue));else Ne.set("svc1","und");else z=="urn:mpeg:dash:role:2011"?ye!=null&&(d.push(ye),ye=="captions"&&(h="caption")):z=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ye=="1"?Ge="visually impaired":ye=="2"&&(Ge="hard of hearing"));if(A)return null;A=Wr(n,"ContentProtection");var Rt=fN(A,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Ht=Cr(t.ua.language||"und"),Ut=n.attributes.label;if((A=Wr(n,"Label"))&&A.length&&(A=Ci(A[0]))&&(Ut=A),A=Wr(n,"Representation"),n=A.map(function(yt){return(yt=u5(e,t,Rt,h,Ht,Ut,u,d,Ne,yt,Ge,Pe))&&(yt.hdr=yt.hdr||G,yt.fastSwitching=te),yt}).filter(function(yt){return!!yt}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new pt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=kN(n[0].mimeType,n[0].codecs),E=m(n),z=E.next();!z.done;z=E.next())z.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),z=k.next();!z.done;z=k.next()){for(z=z.value,ye=m(Rt.drmInfos),Te=ye.next();!Te.done;Te=ye.next())Te=Te.value,Te.keyIds=Te.keyIds&&z.keyIds?new Set([].concat(T(Te.keyIds),T(z.keyIds))):Te.keyIds||z.keyIds;e.g.dash.enableAudioGroups&&(z.groupId=E)}return A=A.map(function(yt){return yt.attributes.id}).filter(ju),{id:E,contentType:t.ua.contentType,language:Ht,Dj:u,streams:n,drmInfos:Rt.drmInfos,If:c,ki:A}}function u5(e,t,n,r,u,c,d,h,E,A,k,G){if(t.J=Q_(e,A,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!d5(t.J))return null;var te=t.ha.start;t.bandwidth=_r(A,"bandwidth",Bs)||0;var z=t.J.contentType,ye=z==vr||z=="application";z=z=="image";try{var Pe=void 0;if(n.xe){var Ne=t.J.nb,Ge=co(Ne(),[n.xe.Rh]),Te=Oi(Ge,e.g.retryParameters);Pe={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var yt,jt,ln;return Oe(function(gn){if(gn.g==1)return x(gn,J_(e,Te,6),2);if(gn.g!=3){if(yt=gn.h,!yt.data||yt.data.byteLength!=16)throw new pt(2,4,4049);return jt={name:"AES-CBC"},ln=Pe,x(gn,p.crypto.subtle.importKey("raw",yt.data,jt,!0,["decrypt"]),3)}ln.cryptoKey=gn.h,Pe.fetchKey=void 0,X(gn)})}}}if(Ne=function(yt,jt,ln,gn){return g5(e,yt,jt,ln,gn)},t.J.pd)var $e=Dj(t,Ne,Pe);else if(t.J.Jb)$e=Oj(t,e.m,Pe);else if(t.J.qd)$e=Uj(t,Ne,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Pe,G);else{var Ue=t.ha.duration||0,gt=t.J.nb;$e={vc:function(){var yt=YE(te,Ue,gt());return yt.tc(function(jt){jt.mimeType=t.J.mimeType,jt.codecs=t.J.codecs}),Promise.resolve(yt)}}}}catch(yt){if((ye||z)&&yt.code==4002)return null;throw yt}G=Wr(A,"ContentProtection"),G=mj(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),Ne=!1,Wr(A,"SupplementalProperty").some(function(yt){return yt.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&yt.attributes.value=="JOC"})&&(Ne=!0),Ge=!1,ye&&(Ge=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var Rt;if(z&&((A=Wr(A,"EssentialProperty").find(function(yt){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(yt.attributes.schemeIdUri)}))&&(Rt=A.attributes.value),!Rt))return null;var Ht;A=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(A.includes("hvc1.2.4.L153.B0")||A.includes("hev1.2.4.L153.B0"))&&(Ht="PQ"),ye=t.J.id?t.za.id+","+t.J.id:"";var Ut=ye&&e.m[ye]?e.m[ye]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Ut.segmentIndex&&(Ut.segmentIndex.release(),Ut.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:A,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:d,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:Ge,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:Ne,closedCaptions:E,hdr:Ht,videoLayout:void 0,tilesLayout:Rt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(t.J.mimeType,t.J.codecs)])};return Ut.createSegmentIndex=function(){var yt;return Oe(function(jt){if(jt.g==1)return Ut.segmentIndex?jt.u(0):(yt=Ut,x(jt,$e.vc(),3));yt.segmentIndex=jt.h,X(jt)})},ye&&t.Eb&&!e.m[ye]&&(e.m[ye]=Ut),Ut}function l5(e){var t,n;Oe(function(r){switch(r.g){case 1:return t=0,de(r,2),x(r,$_(e),4);case 4:t=r.h,ve(r,3);break;case 2:if(n=Ce(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),X_(e,t),X(r)}})}function X_(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function Q_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},r=r||n.nb;var u=t.attributes.id,c=Wr(t,"BaseURL"),d,h=!1;if(e.h)for(var E=m(c),A=E.next();!A.done;A=E.next()){var k=A.value;A=k.attributes.serviceLocation,k=yu(k),A&&k&&(Td(e.h,u,A,k),h=!0)}h&&e.h||(d=c.map(yu)),E=t.attributes.contentType||n.contentType,A=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",km)||n.frameRate,te=t.attributes.sar||n.pixelAspectRatio,z=c5(Wr(t,"InbandEventStream"),n.emsgSchemeIdUris),ye=Wr(t,"AudioChannelConfiguration");ye=f5(ye)||n.de;var Pe=_r(t,"audioSamplingRate",Ro)||n.audioSamplingRate;E||(E=kN(A,k));var Ne=la(t,"SegmentBase"),Ge=la(t,"SegmentTemplate"),Te=Ne&&_r(Ne,"availabilityTimeOffset",Oc)||0,$e=Ge&&_r(Ge,"availabilityTimeOffset",Oc)||0,Ue=c&&c.length&&_r(c[0],"availabilityTimeOffset",Oc)||0;return Te=n.Qb+Ue+Te+$e,$e=null,(Ue=la(t,"SegmentSequenceProperties"))&&(Ue=la(Ue,"SAP"))&&($e=_r(Ue,"cadence",Qu)),{nb:function(){return co(r(),c.length?e.h&&h?bp(e.h,u):d||[]:[])},pd:Ne||n.pd,Jb:la(t,"SegmentList")||n.Jb,qd:Ge||n.qd,width:_r(t,"width",Ro)||n.width,height:_r(t,"height",Ro)||n.height,contentType:E,mimeType:A,codecs:k,frameRate:G,pixelAspectRatio:te,emsgSchemeIdUris:z,id:u,language:t.attributes.lang,de:ye,audioSamplingRate:Pe,Qb:Te,xf:$e||n.xf}}function c5(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function f5(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function d5(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==vr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function LN(e,t,n,r){var u,c,d,h,E,A,k;return Oe(function(G){if(G.g==1)return u=[bo(n)],c=co(t(),u),d=Oi(c,e.g.retryParameters),d.method=r,h=e.i.networkingEngine.request(4,d),mu(e.F,h),x(G,h.promise,2);if(E=G.h,r=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);A=E.headers.date}else A=Vr(E.data);return k=Date.parse(A),isNaN(k)?G.return(0):G.return(k-Date.now())})}function h5(e,t,n){var r,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:r=n.map(function(te){return{scheme:te.attributes.schemeIdUri,value:te.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),d=c.next();case 2:if(d.done){G.u(4);break}switch(h=d.value,de(G,5),E=h.scheme,A=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(A),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":He("NTP UTCTiming scheme is not supported");break;default:He("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return x(G,LN(e,t,A,"HEAD"),10);case 10:return G.return(G.h);case 8:return x(G,LN(e,t,A,"GET"),11);case 11:return G.return(G.h);case 9:ve(G,3);break;case 5:Ce(G);case 3:d=c.next(),G.u(2);break;case 4:return He("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function p5(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",d=r.attributes.value||"",h=_r(r,"timescale",Ro)||1;r=m(Wr(r,"Event"));for(var E=r.next();!E.done;E=r.next()){E=E.value;var A=_r(E,"presentationTime",Ro)||0,k=_r(E,"duration",Ro)||0;A=A/h+t,k=A+k/h,n!=null&&(A=Math.min(A,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:d,startTime:A,endTime:k,id:E.attributes.id||"",eventElement:Jh(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function g5(e,t,n,r,u){var c,d,h,E;return Oe(function(A){return A.g==1?(c=$a,d=u?0:1,h=sp(t,n,r,e.g.retryParameters),x(A,J_(e,h,c,{type:d}),2)):(E=A.h,A.return(E.data))})}function kN(e,t){return t=Si(e,t),Cl(t)?vr:e.split("/")[0]}function J_(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),mu(e.F,t),t.promise}ne("shaka.dash.DashParser",kv),ke["application/dash+xml"]=function(){return new kv},ke["video/vnd.mpeg.dash.mpd"]=function(){return new kv};function Uv(){}ne("shaka.dependencies",Uv),Uv.has=function(e){return e1.has(e)},Uv.add=function(e,t){if(!UN[e])throw Error(e+" is not supported");e==FN?dr("mux.js","mux.js is no longer used in Shaka Player."):e1.set(e,function(){return t})};var FN="muxjs",UN={Ej:FN,ISOBoxer:"ISOBoxer"};Uv.Allowed=UN;var e1=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function BN(e,t,n){this.type=e,this.g=t,this.segments=n||null}function jN(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}jN.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function ZN(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function Dp(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=Dp(e,t))?e.value:n||null}function ii(e,t){if(e=Dp(e,t),!e)throw new pt(2,4,4023,t);return e.value}function GN(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function qN(e,t){this.name=e,this.value=t}function zs(e,t){return e.filter(function(n){return n.name==t})}function HN(e,t){return e.filter(function(n){return ii(n,"TYPE")==t})}function xo(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function wd(e,t,n){return n=n===void 0?0:n,(e=xo(e,t))?Number(e.value):n}function Gl(e,t,n){return t?KN(e,[t],n):[]}function KN(e,t,n){if(!t.length)return[];t=co(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=e,c=u.push,d=r.value;if((r=n)&&r.size){d=String(d).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=d.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var A=E.slice(2,E.length-1),k=r.get(A);if(k)d=d.replace(E,k);else throw new pt(2,4,4039,A)}}r=d}else r=d;c.call(u,r)}return e}function Kc(e){this.h=e||"",this.g=0}function Ad(e){ql(e,/[ \t]+/gm)}function ql(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Vc(e){return e.g==e.h.length?null:(e=ql(e,/[^ \t\n]*/gm))?e[0]:null}function m5(){this.g=0}function t1(e,t){t=Vr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new pt(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=n1(e,c),--e.g,VN.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var d=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(d)||r)r=!1;else{if(d=n1(e,d),v5.includes(d.name)){if(t!=1)throw new pt(2,4,4017);d=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,d=m(d);for(var E=d.next();!E.done;E=d.next())E=E.value,/^(#EXT)/.test(E)?(E=n1(e,E),VN.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):r.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&r.push(h),n.push(new GN(E,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new GN("",r,c))),new BN(t,u,n)}u.push(d),d.name=="EXT-X-STREAM-INF"&&(d.attributes.push(new qN("URI",h)),r=!0)}}return new BN(t,u)}function n1(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new pt(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new Kc(r);var c;(c=ql(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var d=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=ql(r,d);)n.push(new qN(c[1],c[2]||c[3])),Ad(r)}return new jN(e,t,n,u)}var VN="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),v5="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function zN(){}function YN(e){try{var t=r1(e);return Wu({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return gu(n)}}function r1(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new pt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new pt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=Ho(e):u=za(e),{data:u,contentType:n}}ne("shaka.net.DataUriPlugin",zN),zN.parse=YN,Ko("data",YN);function WN(e){var t=Ca(e),n=t.split("/")[0];return e=Do(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function y5(e,t){function n(Te){return r(Te.name)}function r(Te){switch(Te=Te.toLowerCase(),Te){case"avc1":case"avc3":c.push(Te+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Te+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Te+".05.04"),h=!0;break;case"vp09":c.push(Te+".00.10.08"),h=!0;break;case"av01":c.push(Te+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Te),d=!0}}var u=[],c=[],d=!1,h=!1,E=null,A=null,k=null,G=null,te=null,z=null,ye;if(new kr().box("moov",yr).box("trak",yr).O("tkhd",function(Te){Te=Zt(Te.reader,Te.version),A=String(Te.height),k=String(Te.width)}).box("mdia",yr).O("mdhd",function(Te){E=It(Te.reader,Te.version).language}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("mp4a",function(Te){var $e=Te.reader;$e.skip(6),$e.skip(2),$e.skip(8);var Ue=$e.ra();$e.skip(2),$e.skip(2),$e.skip(2),$e=$e.ra()+$e.ra()/65536,G=Ue,te=$e,Te.reader.ka()?yr(Te):n(Te)}).box("esds",function(Te){Te=Te.reader;for(var $e="mp4a",Ue,gt;Te.ka();){Ue=Te.P();for(var Rt=Te.P();Rt&128;)Rt=Te.P();if(Ue==3)Te.ra(),Rt=Te.P(),Rt&128&&Te.ra(),Rt&64&&Te.skip(Te.P()),Rt&32&&Te.ra();else if(Ue==4)gt=Te.P(),Te.skip(12);else if(Ue==5)break}gt&&($e+="."+vn(gt),Ue==5&&Te.ka()&&(Ue=Te.P(),gt=(Ue&248)>>3,gt===31&&Te.ka()&&(gt=32+((Ue&7)<<3)+((Te.P()&224)>>5)),$e+="."+gt)),u.push($e),d=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Te){ye=Te.name,wi(Te)}).box("avc3",function(Te){ye=Te.name,wi(Te)}).box("hev1",function(Te){ye=Te.name,wi(Te)}).box("hvc1",function(Te){ye=Te.name,wi(Te)}).box("dva1",function(Te){ye=Te.name,wi(Te)}).box("dvav",function(Te){ye=Te.name,wi(Te)}).box("dvh1",function(Te){ye=Te.name,wi(Te)}).box("dvhe",function(Te){ye=Te.name,wi(Te)}).box("vp09",function(Te){ye=Te.name,wi(Te)}).box("av01",function(Te){ye=Te.name,wi(Te)}).box("avcC",function(Te){var $e=ye||"";switch(ye){case"dvav":$e="avc3";break;case"dva1":$e="avc1"}Te=Te.reader,Te.skip(1),Te=$e+"."+vn(Te.P())+vn(Te.P())+vn(Te.P()),c.push(Te),h=!0}).box("hvcC",function(Te){var $e=ye||"";switch(ye){case"dvh1":$e="hvc1";break;case"dvhe":$e="hev1"}var Ue=Te.reader;Ue.skip(1),Te=Ue.P();var gt=["","A","B","C"][Te>>6],Rt=Te&31,Ht=Ue.M(),Ut=(Te&32)>>5?"H":"L";Te=[Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P()],Ue=Ue.P();for(var yt=0,jt=0;32>jt&&(yt|=Ht&1,jt!=31);jt++)yt<<=1,Ht>>=1;for($e=$e+("."+gt+Rt)+("."+vn(yt,!0)),$e+="."+Ut+Ue,gt="",Rt=Te.length;Rt--;)((Ut=Te[Rt])||gt)&&(gt="."+Ut.toString(16).toUpperCase()+gt);$e+=gt,c.push($e),h=!0}).box("dvcC",function(Te){var $e=ye||"";switch(ye){case"hvc1":$e="dvh1";break;case"hev1":$e="dvhe";break;case"avc1":$e="dva1";break;case"avc3":$e="dvav"}var Ue=Te.reader;Ue.skip(2),Te=Ue.P(),Ue=Ue.P(),c.push($e+"."+Pn(Te>>1&127)+"."+Pn(Te<<5&32|Ue>>3&31)),h=!0}).O("vpcC",function(Te){var $e=ye||"",Ue=Te.reader;Te=Ue.P();var gt=Ue.P();Ue=Ue.P()>>4&15,c.push($e+"."+Pn(Te)+"."+Pn(gt)+"."+Pn(Ue)),h=!0}).box("av1C",function(Te){var $e=ye||"",Ue=Te.reader;Ue.skip(1),Te=Ue.P(),Ue=Ue.P();var gt=Te>>>5,Rt=(Ue&64)>>6;c.push($e+"."+gt+"."+Pn(Te&31)+(Ue>>>7?"H":"M")+"."+Pn(gt===2&&Rt?(Ue&32)>>5?12:10:Rt?10:8)+"."+((Ue&16)>>4)+"."+((Ue&8)>>3)+((Ue&4)>>2)+(Ue&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",$h).box("encv",wi).box("sinf",yr).box("frma",function(Te){Te=un(Te.reader).Ea,r(Te)}).box("colr",function(Te){Te=Te.reader;var $e=null,Ue=Te.sb(4),gt=String.fromCharCode(Ue[0]);if(gt+=String.fromCharCode(Ue[1]),gt+=String.fromCharCode(Ue[2]),gt+=String.fromCharCode(Ue[3]),gt==="nclx")switch(Te.ra(),Ue=Te.ra(),Te.ra(),Ue){case 1:case 6:case 13:case 14:case 15:$e="SDR";break;case 16:$e="PQ";break;case 18:$e="HLG"}z=$e}).parse(e||t,!0),!u.length&&!c.length)return null;var Pe=d&&!h,Ne=new Map;if(h){var Ge=new St("video/mp4");for(e&&Ge.init(e),Ge.i(t),e=m(Ge.j()),t=e.next();!t.done;t=e.next())t=t.value,Ne.set(t,t);Ge.h()}return{type:Pe?"audio":"video",mimeType:Pe?"audio/mp4":"video/mp4",codecs:$N(u.concat(c)).join(", "),language:E,height:A,width:k,channelCount:G,sampleRate:te,closedCaptions:Ne,Lf:z}}function $N(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=Ya(r);t.has(u)||(n.push(r),t.add(u))}return t=Rh("audio",n),r=Rh("video",n),e=Rh(vr,n),r=E5(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function E5(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Ot('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function _5(e){var t=null;return new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",vu).box("encv",wi).box("enca",$h).box("sinf",yr).box("schi",yr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=Os(n.sb(16))}).parse(e,!0),t}function Bv(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(vr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new m5,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){Z5(e)}),this.qa=Hv,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new Ll,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=Bv.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,r;return Oe(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),x(u,f1(n,[e]),2)):u.g!=3?(r=u.h,n.aa=r.uri,x(u,w5(n,r.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,r,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){if(!Na(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,r=n.filter(function(G){return G.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())d=c.value,t.push(T5(e,d));return x(k,Promise.all(t),2)}sM(e,r.map(function(G){return G.stream})),h=r.some(function(G){return G.fd==0}),r.length&&!h&&(E=G5,Gv(e,E.Pg),A=r.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(A))),e.i.updateDuration()),h&&o1(e),X(k)})};function i1(e,t){return Na(e)?e.K.get(t.type):t.$d}function T5(e,t){var n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn;return Oe(function(qn){if(qn.g==1){for(n=[],r=m(t.$()),u=r.next();!u.done;u=r.next())c=u.value,d=new si(c),h=d.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),ra(h)&&hr(d,h),n.push(d.toString());return x(qn,f1(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(A=t1(e.Ga,E.data),A.type!=1)throw new pt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=zs(A.g,"EXT-X-DEFINE"),te=eM(e,G,k),z=t.stream,ye=i1(e,t),x(qn,fM(e,A,z.mimeType,t.$,te),3)}Pe=qn.h,Ne=Pe.keyIds,Ge=Pe.drmInfos,Te=function(Yn,Kn){return Yn.size===Kn.size&&[].concat(T(Yn)).every(function(Nr){return Kn.has(Nr)})},Te(z.keyIds,Ne)||(z.keyIds=Ne,z.drmInfos=Ge,e.i.newDrmInfo(z)),$e=gM(e,A,z,ye,te,t.$,t.type),Ue=$e.segments,(gt=$e.bandwidth)&&(z.bandwidth=gt),z.segmentIndex.kd(Ue,e.l.qb()),Ue.length&&(Rt=wd(A.g,"EXT-X-MEDIA-SEQUENCE",0),Ut=(Ht=xo(A.g,"EXT-X-SKIP"))?Number(zn(Ht,"SKIPPED-SEGMENTS")):0,yt=lM(Rt,Ue),jt=yt.gb,ln=yt.hb,t.gb=jt+Ut,t.hb=ln,gn=ye.get(Rt),z.segmentIndex.La(gn)),Ln=Ue[0],t.fc=Ln.startTime,Mn=Ue[Ue.length-1],t.yb=Mn.endTime,xo(A.g,"EXT-X-ENDLIST")&&(t.fd=!0),s1(e,A),X(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function XN(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,d=i1(e,u);if(c=c.g[0]||null){d=m(d);for(var h=d.next();!h.done;h=d.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,Zv(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(r.g.splice(0,u),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),QN(e,n,r)))}function S5(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;r!=null&&r.h!=null&&(e.T=Math.min(e.T,r.h))}}if(t=e.T,t!=1/0){for(r=m(e.h.values()),n=r.next();!n.done;n=r.next())if(n=n.value,!Zv(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)ce("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(QN(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function QN(e,t,n){t.fc+=n,t.yb+=n,e=i1(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function w5(e,t,n){var r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return r=t1(e.Ga,t),u=zs(r.g,"EXT-X-DEFINE"),c=[],d=[],h=[],E=function(){return[n]},r.type==1?x(Gr,JN(e,r,E),7):(A5(e,u),A=zs(r.g,"EXT-X-MEDIA"),k=zs(r.g,"EXT-X-STREAM-INF"),G=zs(r.g,"EXT-X-IMAGE-STREAM-INF"),te=zs(r.g,"EXT-X-I-FRAME-STREAM-INF"),z=zs(r.g,"EXT-X-SESSION-KEY"),ye=zs(r.g,"EXT-X-SESSION-DATA"),Pe=zs(r.g,"EXT-X-CONTENT-STEERING"),b5(e,ye),x(Gr,C5(e,Pe),4));case 4:return I5(e,k),O5(e,A),x(Gr,M5(e,k,z,A,E,e.o),5);case 5:return c=Gr.h,d=R5(e,A),x(Gr,x5(e,G,te),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return Ne=Gr.h,Ge=Ne.type,Te=Ne.mimeType,$e=Ne.codecs,Ue=Ne.language,gt=Ne.height,Rt=Ne.width,Ht=Ne.channelCount,Ut=Ne.sampleRate,yt=Ne.closedCaptions,jt=Ne.Lf,x(Gr,uM(e,e.A++,r,E,n,$e,Ge,Ue,!0,"Media Playlist",Ht,yt,null,!1,Ut,!1,Te),8);case 8:ln=Gr.h,e.h.set(n,ln),Ge=="video"&&mM(ln.stream,Rt,gt,null,jt,null),c.push({id:0,language:Cr(Ue||"und"),disabledUntilTime:0,primary:!0,audio:Ge=="audio"?ln.stream:null,video:Ge=="video"?ln.stream:null,bandwidth:ln.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new pt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),r.type==1&&(Na(e)&&(hM(e,r),gn=e.m,e.s.X(gn)),Ln=Array.from(e.h.values()),a1(e,Ln),o1(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Kn=Yn.value,Kn.audio&&Kn.audio.codecs===""&&Mn.push(Kn.audio.createSegmentIndex()),Kn.video&&Kn.video.codecs===""&&Mn.push(Kn.video.createSegmentIndex());return x(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(Nr=[],fi=c[0],Li=m([fi.video,fi.audio]),ci=Li.next();!ci.done;ci=Li.next())(gi=ci.value)&&!gi.segmentIndex&&Nr.push(gi.createSegmentIndex());if(0<Nr.length)return x(Gr,Promise.all(Nr),0)}Gr.u(0)}})}function JN(e,t,n){var r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(gt){switch(gt.g){case 1:if(r=WN(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return gt.return(r);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],d=Gl(n(),t.segments[0].h),h=d[0],E=new si(h),A=E.Pa.split(".").pop(),k=yM[A])return gt.return(WN(k));if(G=$a,te=null,z=u1(e,t,c.g,n),e.Y.clear(),!z){gt.u(2);break}return ye=sp(z.$(),z.ac(),z.Yb(),e.g.retryParameters),x(gt,Hl(e,ye,G,{type:0}),3);case 3:Pe=gt.h,te=Pe.data;case 2:return Ne=Oi(d,e.g.retryParameters),x(gt,Hl(e,Ne,G,{type:1}),4);case 4:if(Ge=gt.h,(Te=Ge.headers["content-type"])&&(Te=Te.split(";")[0].toLowerCase()),A=="ts"||Te=="video/mp2t"){var Rt=Ge.data,Ht=Qn(Rt);Ht=new Ke().parse(Ht);var Ut=Ht.bd();Ht=Ht.We();var yt=[],jt=!1,ln=!1;switch(Ut.audio){case"aac":case"aac-loas":yt.push("mp4a.40.2"),jt=!0;break;case"mp3":yt.push("mp4a.40.34"),jt=!0;break;case"ac3":yt.push("ac-3"),jt=!0;break;case"ec3":yt.push("ec-3"),jt=!0;break;case"opus":yt.push("opus"),jt=!0}switch(Ut.video){case"avc":Ht.Ea?yt.push(Ht.Ea):yt.push("avc1.42E01E"),ln=!0;break;case"hvc":Ht.Ea?yt.push(Ht.Ea):yt.push("hvc1.1.6.L93.90"),ln=!0;break;case"av1":yt.push("av01.0.01M.08"),ln=!0}if(yt.length){if(Ut=jt&&!ln,jt=new Map,ln){ln=new St("video/mp2t"),ln.i(Rt),Rt=m(ln.j());for(var gn=Rt.next();!gn.done;gn=Rt.next())gn=gn.value,jt.set(gn,gn);ln.h()}Ht={type:Ut?"audio":"video",mimeType:"video/mp2t",codecs:yt.join(", "),language:null,height:Ht.height,width:Ht.width,channelCount:null,sampleRate:null,closedCaptions:jt,Lf:null}}else Ht=null;if($e=Ht)return gt.return($e)}else if((A=="mp4"||A=="cmfv"||A=="m4s"||Te=="video/mp4"||Te=="audio/mp4"||Te=="video/iso.segment")&&(Ue=y5(te,Ge.data)))return gt.return(Ue);return gt.return(r)}})}function o1(e){if(Na(e)){if(e.qa==Kv){for(var t,n=t=1/0,r=m(e.h.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za(aM(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function A5(e,t){var n=new si(e.aa).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),r&&c&&(e.o.has(r)||e.o.set(r,c)),u&&(r=n.get(u)[0])&&!e.o.has(r)&&e.o.set(u,r)}}function eM(e,t,n){n=new si(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,d=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),d&&h&&(r.has(d)||r.set(d,h)),u&&(d=n.get(u)[0])&&!r.has(d)&&r.set(u,d),c&&(u=e.o.get(c))&&r.set(c,u)}return r}function I5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"AUDIO");n=zn(r,"VIDEO");var c=zn(r,"SUBTITLES");if(r=tM(e,r),c){var d=Co(vr,r);e.G.set(c,d),mn(r,d)}u&&(c=Co("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Co("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function b5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"DATA-ID");n=zn(r,"URI");var c=zn(r,"LANGUAGE");r=zn(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",Gl([e.aa],n,e.o)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function C5(e,t){var n,r,u,c,d,h;return Oe(function(E){if(!e.i||!e.g)return E.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,d=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),d&&h){e.j=new _d(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=d,n=Ip(e.j,h);break}return x(E,n,0)})}function R5(e,t){var n=HN(t,"SUBTITLES");t=n.map(function(d){if(e.g.disableText)return null;try{return oM(e,[d],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=ii(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=l1(vr,r)||c1(vr),Id(c.stream)}}return t.filter(function(d){return d})}function Id(e){e.fullMimeTypes=new Set([Si(e.mimeType,e.codecs)])}function x5(e,t,n){var r,u;return Oe(function(c){return c.g==1?(r=t.map(function(d){var h,E;return Oe(function(A){if(A.g==1)return e.g.disableThumbnails?A.return(null):(de(A,2),x(A,L5(e,d),4));if(A.g!=2)return h=A.h,A.return(h.stream);if(E=Ce(A),e.g.hls.ignoreImageStreamFailures)return A.return(null);throw E})}).concat(n.map(function(d){if(e.g.disableThumbnails)return null;try{var h=ii(d,"URI"),E=zn(d,"CODECS")||"";if(e.h.has(h))var A=e.h.get(h);else{var k=zn(d,"LANGUAGE"),G=zn(d,"NAME"),te=zn(d,"CHARACTERISTICS"),z=jv(e,e.A++,[h],E,"image",k,!1,G,null,null,te,!1,null,!1),ye=zn(d,"RESOLUTION"),Pe=m(ye?ye.split("x"):[null,null]),Ne=Pe.next().value,Ge=Pe.next().value;z.stream.width=Number(Ne)||void 0,z.stream.height=Number(Ge)||void 0;var Te=zn(d,"BANDWIDTH");Te&&(z.stream.bandwidth=Number(Te)),e.h.set(h,z),A=z}return d=A,d.stream.codecs!=="mjpg"?null:d.stream}catch($e){if(e.g.hls.ignoreImageStreamFailures)return null;throw $e}})),x(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(d){return d})))})}function N5(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=ZN(u);r[c]?r[c].push(u):r[c]=[u]}for(var d in r)oM(e,r[d],n)}function M5(e,t,n,r,u,c){var d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li;return Oe(function(ci){switch(ci.g){case 1:if(d=[],h=new Set,!(0<n.length)){ci.u(2);break}E=m(n),A=E.next();case 3:if(A.done){ci.u(2);break}if(k=A.value,G=ii(k,"METHOD"),te=zn(k,"KEYFORMAT")||"identity",z=null,G=="NONE"||qv(G)){ci.u(4);break}if(te!="identity"){z=(ye=_M[te])?ye(k,""):null,ci.u(6);break}return x(ci,vM(e,k,"",u,null,c),8);case 8:z=ci.h;case 6:if(z){if(z.keyIds)for(Pe=m(z.keyIds),Ne=Pe.next();!Ne.done;Ne=Pe.next())Ge=Ne.value,h.add(Ge);d.push(z)}case 4:A=E.next(),ci.u(3);break;case 2:for(Te={},$e=m(t),Ue=$e.next();!Ue.done;Ue=$e.next())gt=Ue.value,Rt=ZN(gt),Te[Rt]?Te[Rt].push(gt):Te[Rt]=[gt];Ht=[];for(Ut in Te)yt=Te[Ut],jt=yt[0],ln=zn(jt,"FRAME-RATE"),gn=Number(zn(jt,"AVERAGE-BANDWIDTH"))||Number(ii(jt,"BANDWIDTH")),Ln=zn(jt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Kn=zn(jt,"VIDEO-RANGE"),(Nr=zn(jt,"REQ-VIDEO-LAYOUT"))&&Nr.includes(",")&&(fi=Nr.split(",").filter(function(gi){return gi=="CH-STEREO"||gi=="CH-MONO"}),Nr=fi[0]),Nr=Nr||"CH-MONO",Li=D5(e,yt,r,gn),Ht.push.apply(Ht,T(P5(e,Li.audio,Li.video,gn,qn,Yn,ln,Kn,Nr,d,h)));return ci.return(Ht.filter(function(gi){return gi!=null}))}})}function D5(e,t,n,r){for(var u={audio:[],video:[]},c=new Map,d=[],h=!1,E=!1,A=m(t),k=A.next();!k.done;k=A.next()){var G=k.value;k=zn(G,"AUDIO");var te=zn(G,"VIDEO"),z=k||te;z&&(d.includes(z)||d.push(z),(G=zn(G,"PATHWAY-ID"))&&c.set(z,G),k?h=!0:te&&(E=!0))}d.length&&n.length&&(A=n.filter(function(Ne){return d.includes(ii(Ne,"GROUP-ID"))}),N5(e,A,c)),A=(c=d.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(A)):E&&u.video.push.apply(u.video,T(A)),k=!1;var ye=t.map(function(Ne){return ii(Ne,"URI")});if(E=u.audio.find(function(Ne){return Ne&&Ne.$().find(function(Ge){return ye.includes(Ge)})}),h=tM(e,t[0]),te=Co("video",h),(z=Co("audio",h))&&!te?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&z&&te?(E="video",h=[[te,z].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Pe=G=z=te=k=null;!A.length&&(n=n.find(function(Ne){var Ge=zn(Ne,"URI")||"",Te=zn(Ne,"TYPE");return Ne=ii(Ne,"GROUP-ID"),Te!="SUBTITLES"&&Ge==""&&d.includes(Ne)}))&&(k=zn(n,"LANGUAGE"),te=zn(n,"NAME"),z=nM(n),iM(n),G=zn(n,"CHARACTERISTICS"),Pe=rM(n)),e=k5(e,t,h,E,k,te,z,G,Pe),c&&(e.stream.groupId=c),A.length||(e.stream.bandwidth=r),u[e.stream.type]=[e]}return u}function tM(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),$N(e)}function nM(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function rM(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function iM(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function P5(e,t,n,r,u,c,d,h,E,A,k){for(var G=m(n),te=G.next();!te.done;te=G.next())mM(te.value.stream,u,c,d,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,d=m(n),h=d.next();!h.done;h=d.next()){var z=h.value;(h=c?c.stream:null)&&(h.drmInfos=A,h.keyIds=k),(E=z?z.stream:null)&&(E.drmInfos=A,E.keyIds=k),G=c?c.stream.drmInfos:null,te=z?z.stream.drmInfos:null,z=z?z.$().sort().join(","):"";var ye=c?c.$().sort().join(","):"";z=z+" - "+ye,h&&E&&!re(G,te)||e.Ia.has(z)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(z))}return u}function O5(e,t){t=HN(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"LANGUAGE");n=Cr(u||"und"),u||(u=zn(r,"NAME"))&&(n=u),u=ii(r,"GROUP-ID"),r=ii(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function oM(e,t,n){for(var r=[],u=[],c=new Map,d=m(t),h=d.next();!h.done;h=d.next()){var E=h.value;h=ii(E,"URI"),E=ii(E,"GROUP-ID"),r.push(h),u.push(E),c.set(E,h)}if(d=u.sort().join(","),h=t[0],t="",E=ii(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=vr),E==vr)t=zn(h,"CODECS")||"";else{u=m(u);for(var A=u.next();!A.done;A=u.next())if(A=A.value,e.G.has(A)){t=e.G.get(A);break}}if(u=r.sort().join(","),e.h.has(u))return e.h.get(u);if(A=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&Td(e.j,A,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?nM(h):null;var te=E=="audio"?iM(h):!1,z=zn(h,"CHARACTERISTICS"),ye=zn(h,"FORCED")=="YES";return h=E=="audio"?rM(h):null,r=jv(e,A,r,t,E,n,k,c,G,null,z,ye,h,te),r.stream&&(r.stream.groupId=d),e.H.has(d)?e.H.get(d).push(r):e.H.set(d,[r]),e.h.set(u,r),r}function L5(e,t){var n,r,u,c,d,h,E,A,k,G;return Oe(function(te){return te.g==1?(n=ii(t,"URI"),r=zn(t,"CODECS","jpeg")||"",e.h.has(n)?te.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),d=zn(t,"CHARACTERISTICS"),h=jv(e,e.A++,[n],r,"image",u,!1,c,null,null,d,!1,null,!1),(E=zn(t,"RESOLUTION"))?x(te,h.stream.createSegmentIndex(),3):te.u(2))):(te.g!=2&&(A=h.stream.segmentIndex.get(0),k=A.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),te.return(h))})}function k5(e,t,n,r,u,c,d,h,E){for(var A=e.A++,k=[],G=m(t),te=G.next();!te.done;te=G.next()){var z=te.value;te=ii(z,"URI"),z=zn(z,"PATHWAY-ID"),e.j&&z&&Td(e.j,A,z,te),k.push(te)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),r=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Uu(r,n),r=jv(e,A,k,n,r,u,!1,c,d,t,h,!1,E,!1),e.h.set(G,r),r}function jv(e,t,n,r,u,c,d,h,E,A,k,G,te,z){function ye(gt){var Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi;return Oe(function(Gr){switch(Gr.g){case 1:return Rt=Te.$(),x(Gr,f1(e,Te.$(),!0),2);case 2:if(Ht=Gr.h,gt.aborted)return Gr.return();if(Ut=Ht.uri,Ut==Ht.originalUri||Rt.includes(Ut)||Ge.push(Ut),yt=t1(e.Ga,Ht.data),jt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return x(Gr,JN(e,yt,Pe),4);case 4:ln=Gr.h,jt=ln.mimeType,r=ln.codecs;case 3:return gn=Na(e),x(Gr,uM(e,0,yt,Pe,Ut,r,u,c,d,h,E,A,k,G,te,z,jt),5);case 5:if(Ln=Gr.h,gt.aborted)return Gr.return();if(Mn=Ln.stream,Na(e)&&!gn&&hM(e,yt),Te.fc=Ln.fc,Te.yb=Ln.yb,Te.Hd=Ln.Hd,Te.Gd=Ln.Gd,Te.fd=Ln.fd,Te.$d=Ln.$d,Te.gb=Ln.gb,Te.hb=Ln.hb,Te.df=!0,Ne.segmentIndex=Mn.segmentIndex,Ne.encrypted=Mn.encrypted,Ne.drmInfos=Mn.drmInfos,Ne.keyIds=Mn.keyIds,Ne.mimeType=Mn.mimeType,Ne.bandwidth=Ne.bandwidth||Mn.bandwidth,Ne.codecs=Ne.codecs||Mn.codecs,Id(Ne),Ne.drmInfos.length&&e.i.newDrmInfo(Ne),qn=yi,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Kn=Yn.next();!Kn.done;Kn=Yn.next())Nr=Kn.value,Nr.df||Nr.type!=u||(Nr.stream.mimeType=Mn.mimeType,Id(Nr.stream));u==qn.ma&&(fi=Mn.segmentIndex.get(0))&&fi.ca&&(Ne.mimeType="application/mp4",Id(Ne)),F5(e)&&(e.mb?a1(e,[Te]):(e.mb=!0,Li=Array.from(e.h.values()),ci=Li.filter(function(fo){return fo.stream.segmentIndex}),a1(e,ci),o1(e),gi=e.m,0<gi&&e.s.X(gi))),X(Gr)}})}function Pe(){return e.j&&1<n.length?bp(e.j,t):Ge.concat(KN([e.aa],n,e.o))}var Ne=cM(e,r,u,c,d,h,E,A,k,G,te,z),Ge=[],Te={stream:Ne,type:u,tg:Ge,$:Pe,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},$e=null,Ue=new AbortController;return Ne.createSegmentIndex=function(){return $e||(Ue=new AbortController,$e=new Promise(function(gt){gt(ye(Ue.signal))}))},Ne.closeSegmentIndex=function(){$e&&!Ne.segmentIndex&&Ue.abort(),Ne.segmentIndex&&(Ne.segmentIndex.release(),Ne.segmentIndex=null),$e=null},Te}function aM(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function sM(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function a1(e,t){if(!Na(e))for(var n=aM(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.sc(0,n);sM(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?XN(e,t):(S5(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&XN(e,t))}function Zv(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function F5(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function uM(e,t,n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne){var Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi,Gr;return Oe(function(fo){switch(fo.g){case 1:if(n.type!=1)throw new pt(2,4,4017);Ge=zs(n.g,"EXT-X-DEFINE"),Te=eM(e,Ge,u);var Fo=xo(n.g,"EXT-X-PLAYLIST-TYPE"),ai=xo(n.g,"EXT-X-ENDLIST");if(ai=Fo&&Fo.value=="VOD"||ai,Fo=Fo&&Fo.value=="EVENT"&&!ai,Fo=!ai&&!Fo,ai?Gv(e,Hv):Fo?Gv(e,Kv):Gv(e,TM),Na(e)&&s1(e,n),Ne){fo.u(2);break}return x(fo,j5(e,d,c,n,Te,r),3);case 3:Ne=fo.h;case 2:return x(fo,fM(e,n,Ne,r,Te),4);case 4:if($e=fo.h,Ue=$e.drmInfos,gt=$e.keyIds,Rt=$e.encrypted,Ht=$e.Tg,Rt&&!Ue.length&&!Ht)throw new pt(2,4,4026);return Ut=cM(e,c,d,h,E,A,k,G,te,z,ye,Pe),Ut.encrypted=Rt,Ut.drmInfos=Ue,Ut.keyIds=gt,Ut.mimeType=Ne,Id(Ut),yt=Na(e)?e.K.get(d):new Map,jt=gM(e,n,Ut,yt,Te,r,d),ln=jt.segments,(gn=jt.bandwidth)&&(Ut.bandwidth=gn),Na(e)&&s1(e,n),Ln=ln[0].startTime,Mn=ln[ln.length-1],qn=Mn.endTime,Yn=new wr(ln),Ut.segmentIndex=Yn,Nr=(Kn=xo(n.g,"EXT-X-SERVER-CONTROL"))?Dp(Kn,"CAN-SKIP-UNTIL")!=null:!1,fi=Kn?Dp(Kn,"CAN-BLOCK-RELOAD")!=null:!1,Li=wd(n.g,"EXT-X-MEDIA-SEQUENCE",0),ci=lM(Li,ln),gi=ci.gb,Gr=ci.hb,fo.return({stream:Ut,type:d,tg:[],$:r,fc:Ln,yb:qn,Hd:Nr,Gd:fi,fd:!1,De:-1,gb:gi,hb:Gr,$d:yt,df:!1})}})}function lM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function cM(e,t,n,r,u,c,d,h,E,A,k,G){var te=l1(n,t)||c1(n),z=[];if(E){E=m(E.split(","));for(var ye=E.next();!ye.done;ye=E.next())z.push(ye.value)}return E=void 0,ye=null,n==vr?E=z.includes("public.accessibility.transcribes-spoken-dialog")&&z.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":z.includes("public.accessibility.describes-video")&&(ye="visually impaired"),z.length||E!=="subtitle"||z.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:te,codecs:t,kind:n==vr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Cr(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:z,forced:A,channelsCount:d,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ye,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Id(e),e}function fM(e,t,n,r,u){var c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn,qn,Yn;return Oe(function(Kn){switch(Kn.g){case 1:if(c=new Map,t.segments){for(d=m(t.segments),h=d.next();!h.done;h=d.next())if(E=h.value,A=zs(E.g,"EXT-X-KEY"),k=null,A.length)for(k=u1(e,t,E.g,r,u),G=m(A),te=G.next();!te.done;te=G.next())z=te.value,c.set(z,k)}Pe=ye=!1,Ne=[],Ge=new Set,Te=m(c),$e=Te.next();case 2:if($e.done){Kn.u(4);break}if(Ue=$e.value,gt=m(Ue),Rt=gt.next().value,Ht=gt.next().value,Ut=Rt,yt=Ht,jt=ii(Ut,"METHOD"),jt=="NONE"){Kn.u(3);break}if(ye=!0,ln=zn(Ut,"KEYFORMAT")||"identity",gn=null,qv(jt)){Pe=!0,Kn.u(3);break}if(ln!="identity"){gn=(Ln=_M[ln])?Ln(Ut,n):null,Kn.u(6);break}return x(Kn,vM(e,Ut,n,r,yt,u),8);case 8:gn=Kn.h;case 6:if(gn){if(gn.keyIds)for(Mn=m(gn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,Ge.add(Yn);Ne.push(gn)}case 3:$e=Te.next(),Kn.u(2);break;case 4:return Kn.return({drmInfos:Ne,keyIds:Ge,encrypted:ye,Tg:Pe})}})}function dM(e,t,n,r,u){if(!p.crypto||!p.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var c=0,d=zn(t,"IV","");if(d){var h=hu(d.substr(2));if(h.byteLength!=16)throw new pt(2,4,4048)}else c=wd(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(ii(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var A,k,G,te,z,ye,Pe;return Oe(function(Ne){if(Ne.g==1)return A=Gl(r(),ii(t,"URI"),u),k=A.sort().join(""),e.da.has(k)||(G=Oi(A,e.g.retryParameters),te=Hl(e,G,6),e.da.set(k,te)),x(Ne,e.da.get(k),2);if(Ne.g!=3){if(z=Ne.h,!z.data||z.data.byteLength!=E.bitsKey/8)throw new pt(2,4,4049);return ye={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Pe=E,x(Ne,p.crypto.subtle.importKey("raw",z.data,ye,!0,["decrypt"]),3)}Pe.cryptoKey=Ne.h,E.fetchKey=void 0,X(Ne)})},e.ba.set(n,E)}return e.ba.get(n)}function s1(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=xo(r[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=xo(t.g,"EXT-X-TARGETDURATION"),!r)throw new pt(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=xo(t.g,"EXT-X-PART-INF"))&&(e.L=Number(ii(u,"PART-TARGET"))),t=xo(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(ii(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?Dp(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(r,e.Ha)}function hM(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function u1(e,t,n,r,u){var c=xo(n,"EXT-X-MAP");if(!c)return null;var d=ii(c,"URI"),h=Gl(r(),d,u);if(d=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(d)){var E=void 0,A=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?qv(ii(k,"METHOD"))&&k.id<c.id&&(E=dM(e,k,t,r,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(A=k);t=U5(h,c,A,E),e.Y.set(d,t)}return e.Y.get(d)}function U5(e,t,n,r){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new dt(function(){return e},u,c,null,null,null,r)}function B5(e,t,n,r,u,c,d,h,E){var A=r.g,k=xo(A,"EXTINF"),G=0,te=0,z=null;r.rb.length&&!e.B&&He("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ye=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Pe=xo(A,"EXT-X-PROGRAM-DATE-TIME");Pe&&Pe.value&&(ye=$f(Pe.value))}var Ne=Bt;if(xo(A,"EXT-X-GAP")&&(Ne=2),!k){if(r.rb.length==0)throw new pt(2,4,4024,"EXTINF");if(!e.B)return null}var Ge=[];Pe=!1;var Te=null,$e=!1,Ue=!1;if(e.B&&r.rb.length){G=(d.mimeType=="video/mp4"||d.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var gt=ye,Rt={},Ht=0;Ht<r.rb.length;Rt={Qc:Rt.Qc,yd:Rt.yd},Ht++){var Ut=r.rb[Ht],yt=Ht==0?n:Ge[Ge.length-1],jt=Ht==0?u:yt.endTime,ln=Number(zn(Ut,"DURATION"))||e.L;if(ln){var gn=jt+ln,Ln=0,Mn=null;if(Ut.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Ut,"BYTERANGE-START"))?Number(Ln):0,(yt=zn(Ut,"BYTERANGE-LENGTH"))?Mn=Ln+Number(yt)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Ut,"BYTERANGE"),Mn=m(pM(yt,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),Rt.yd=zn(Ut,"URI"),Rt.yd){yt=Bt,zn(Ut,"GAP")=="YES"&&(yt=2,$e=!0),Rt.Qc=null;var qn=function(Kn){return function(){return Kn.Qc==null&&(Kn.Qc=Gl(h(),Kn.yd,c)),Kn.Qc}}(Rt);G&&0<=Ln&&Mn!=null&&(Te=qn,Pe=!0),jt=new Je(jt,gn,qn,Ln,Mn,t,0,0,1/0,[],"",null,gt,yt,E),Ut.name=="EXT-X-PRELOAD-HINT"&&(jt.ef(),Ue=!0),zn(Ut,"INDEPENDENT")!="YES"&&0<Ht&&jt.Zd(),Ge.push(jt),gt&&(gt+=ln)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(Ge.length)G=Ge[Ge.length-1].endTime;else return null;Pe&&($e||Ge[0].Aa!=0?(Pe=!1,Te=null):Ge=[]),(k=xo(A,"EXT-X-BYTERANGE"))?(z=m(pM(n,k.value)),te=z.next().value,z=z.next().value):Ge.length&&(te=Ge[0].Aa,z=Ge[Ge.length-1].ja),n="",k=null,d.type=="image"&&(n="1x1",d=xo(A,"EXT-X-TILES"))&&(n=ii(d,"LAYOUT"),(d=zn(d,"DURATION"))&&(k=Number(d)));var Yn=null;return t=new Je(u,G,function(){return Te?Te():(Yn==null&&(Yn=Gl(h(),r.h,c)),Yn||[])},te,z,t,0,0,1/0,Ge,n,k,ye,Ne,E,0<Ge.length&&!!r.h),Pe&&(e.lb=!0,t.lg(),Ue&&t.ef()),t}function pM(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,r=n+t-1),[n,r]}function gM(e,t,n,r,u,c,d){var h=t.segments,E=void 0,A=wd(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=wd(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=xo(t.g,"EXT-X-SKIP"),te=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,z=k+te,ye=0;Na(e)&&r.has(z)&&(ye=r.get(z)),ye===0&&e.qa==Kv&&0<r.size&&!r.has(z)&&(ye=e.l.qb());var Pe=[],Ne=null;G=[];for(var Ge=0;Ge<h.length;Ge++){var Te=h[Ge],$e=Ge==0?ye:Ne.endTime;z=k+te+Ge,xo(Te.g,"EXT-X-DISCONTINUITY")&&A++;for(var Ue=m(Te.g),gt=Ue.next();!gt.done;gt=Ue.next())gt=gt.value,gt.name=="EXT-X-KEY"&&(qv(ii(gt,"METHOD"))?E=dM(e,gt,t,c,u):E=void 0);r.set(z,$e),Ue=u1(e,t,Te.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),($e=B5(e,Ue,Ne,Te,$e,u,n,c,E))&&((Ne=wd(Te.g,"EXT-X-BITRATE"))?G.push({bitrate:Ne,duration:$e.endTime-$e.startTime}):G.length&&(Ne=G.pop(),Ne.duration+=$e.endTime-$e.startTime,G.push(Ne)),Ne=$e,$e.j=A,Zv(e,d)&&e.I!=null&&z<e.I||Pe.push($e))}if(t=void 0,G.length&&(t=G.reduce(function(Rt,Ht){return Rt+Ht.duration},0),t=Math.round(G.reduce(function(Rt,Ht){return Rt+Ht.bitrate*Ht.duration},0)/t*1e3)),G=Pe.some(function(Rt){return Rt.h!=null})){for(n={},r=0;r<Pe.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},r++)if(n.Cb=Pe[r],n.Cb.h==null)for(n.Ic=0,n.Jc=r,u=function(Rt){return function(){var Ht=Pe[Rt.Jc];if(Ht){if(Ht.h!=null)return Ht.h+Rt.Ic;Rt.Ic-=Ht.endTime-Ht.startTime,Rt.Jc+=1}return null}}(n),n.Fc=0,n.td=r,c=function(Rt){return function(){var Ht=Pe[Rt.td];if(Ht){if(Ht!=Rt.Cb&&(Rt.Fc+=Ht.endTime-Ht.startTime),Ht.h!=null)return Ht.h+Rt.Fc;--Rt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Pe),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!Zv(e,d))for(e=m(Pe),r=e.next();!r.done;r=e.next())r.value.Ff(n);return{segments:Pe,bandwidth:t}}function l1(e,t){if(e==vr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function c1(e){return e==vr?"text/vtt":EM[e].mp4}function j5(e,t,n,r,u,c){var d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te;return Oe(function($e){switch($e.g){case 1:return d=$a,h=Math.trunc((r.segments.length-1)/2),E=Gl(c(),r.segments[h].h,u),A=new si(E[0]),k=A.Pa.split(".").pop(),G=EM[t],(te=G[k])||(te=yM[k])||(te=l1(t,n))?$e.return(te):(ye=1,Pe=Oi(E,e.g.retryParameters),de($e,2),Pe.method="HEAD",x($e,Hl(e,Pe,d,{type:ye}),4));case 4:Ne=$e.h,z=Ne.headers["content-type"],ve($e,3);break;case 2:if(Ge=Ce($e),!Ge||Ge.code!=1002&&Ge.code!=1001){$e.u(3);break}return Pe.method="GET",x($e,Hl(e,Pe,d,{type:ye}),6);case 6:Te=$e.h,z=Te.headers["content-type"];case 3:return z?$e.return(z.split(";")[0]):$e.return(c1(t))}})}function mM(e,t,n,r,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function f1(e,t,n){return Hl(e,Oi(t,e.g.retryParameters),0,{type:n?2:3})}function Z5(e){var t,n,r,u,c,d;Oe(function(h){switch(h.g){case 1:return e.i?(de(h,2),t=Date.now(),x(h,e.update(),4)):h.return();case 4:n=Date.now(),Na(e)&&(r=(n-t)/1e3,e.bb.sample(1,r),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),ve(h,3);break;case 2:if(d=Ce(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(d),h.return();d.severity=1,e.i.onError(d),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),X(h)}})}function Na(e){return e.qa!=Hv}function Gv(e,t){e.qa=t,e.l&&e.l.Ec(!Na(e)),Na(e)||e.s.stop()}function Hl(e,t,n,r){if(!e.N)throw new pt(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),mu(e.N,t),t.promise}function qv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function vM(e,t,n,r,u,c){var d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue;return Oe(function(gt){switch(gt.g){case 1:if(n=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);if(d=ii(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(d))return gt.return(null);if(E=Gl(r(),ii(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){A=Os(Ho(E[0].split("data:text/plain;base64,").pop())),gt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Oi(E,e.g.retryParameters),te=Hl(e,G,6),e.ia.set(k,te)),x(gt,e.ia.get(k),3);case 3:z=gt.h,A=Os(z.data);case 2:if(ye="00000000000000000000000000000000",!u){gt.u(4);break}if(e.pa.has(u)){Pe=e.pa.get(u),gt.u(5);break}return Ne=sp(u.$(),u.ac(),u.Yb(),e.g.retryParameters),Ge=$a,x(gt,Hl(e,Ne,Ge,{type:0}),6);case 6:Te=gt.h,Pe=_5(Te.data),e.pa.set(u,Pe);case 5:Pe&&(ye=Pe);case 4:return $e=new Map,$e.set(ye,A),Ue="cenc",d=="SAMPLE-AES"&&(Ue="cbcs"),gt.return(Ch($e,Ue))}})}ne("shaka.hls.HlsParser",Bv);var yM={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},EM={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},_M={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);return e=ii(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),Fu("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=ii(e,"URI"),t=r1(t),t=Qn(t.data),n=Fu("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=ii(e,"URI"),e=r1(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=zf(e,t,new Set,0),Fu("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Hv="VOD",TM="EVENT",Kv="LIVE",G5={Pg:Hv,Pi:TM,Xi:Kv};ke["application/x-mpegurl"]=function(){return new Bv},ke["application/vnd.apple.mpegurl"]=function(){return new Bv};function q5(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function Vv(e){if(e=SM(e))e:{e=m(Ra(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=la(t.value,"LA_URL")){e=Ci(t);break e}e=""}else e="";return e}function SM(e){return e=Ho(Ci(e)),e=q5(e).filter(function(t){return t.type===H5})[0],e?(e=Ka(e.value,!0),(e=Ul(e,"WRMHEADER"))?e:null):null}var H5=1,K5=new Map().set("com.microsoft.playready",Vv).set("com.microsoft.playready.recommendation",Vv).set("com.microsoft.playready.software",Vv).set("com.microsoft.playready.hardware",Vv);function bd(e){if(!bM){bM=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);zv=mr("ftyp",t,r,t,n),t=mr("dref",nZ),d1=mr("dinf",t)}this.g=e}function Cd(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,d=r.value;r=mr;var h=d.id+1,E=d.stream.width||0,A=d.stream.height||0;d.type=="audio"&&(A=E=0);var k=d.duration*d.timescale,G=Math.floor(k/(Kl+1));switch(k=Math.floor(k%(Kl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(h,4)),[0,0,0,0],T(oi(G,4)),T(oi(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(oi(E,2)),[0,0],T(oi(A,2)),[0,0])),h=mr("tkhd",h),E=mr,G=d.duration*d.timescale,A=Math.floor(G/(Kl+1)),G=Math.floor(G%(Kl+1)),k=d.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,A=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(d.timescale,4)),T(oi(A,4)),T(oi(G,4)),T(oi(k,2)),[0,0])),A=mr("mdhd",A),G=d,k=new Uint8Array([]),G.type){case"video":k=z5;break;case"audio":k=Y5}G=mr("hdlr",k);e:{switch(d.type){case"video":d=mr("minf",mr("vmhd",J5),d1,wM(d));break e;case"audio":d=mr("minf",mr("smhd",eZ),d1,wM(d));break e}d=new Uint8Array([])}d=E("mdia",A,G,d),r=r("trak",h,d),c.call(u,r)}for(t=li.apply(Pi,T(t)),c=e.g[0],n=mr,r=c.duration*c.timescale,u=Math.floor(r/(Kl+1)),r=Math.floor(r%(Kl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(c.timescale,4)),T(oi(u,4)),T(oi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),r=[],e=m(e.g),E=e.next();!E.done;E=e.next())d=r,h=d.push,E=new Uint8Array([0,0,0,0].concat(T(oi(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(d,E);if(e=li.apply(Pi,T(r)),e=mr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),d=c.next();!d.done;d=c.next())if(d=d.value,d.initData)for(d=m(d.initData),h=d.next();!h.done;h=d.next())r.push(h.value.initData);c=li.apply(Pi,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(zv.byteLength+e.byteLength),t.set(zv),t.set(e,zv.byteLength),t}function wM(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,d=[],h=[],E=0,A=0,k=0,G=0;G<e.Sa.length;G++){var te=IM(e.Sa[G]);switch(te[0]&31){case 7:d.push(te),c+=te.length+2;break;case 8:h.push(te),c+=te.length+2}}for(0<d.length&&(E=d[0][1],k=d[0][2],A=d[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=A,c[G++]=255,c[G++]=224|d.length,E=0;E<d.length;E++)c[G++]=(d[E].length&65280)>>8,c[G++]=d[E].length&255,c.set(d[E],G),G+=d[E].length;for(c[G++]=h.length,d=0;d<h.length;d++)c[G++]=(h[d].length&65280)>>8,c[G++]=h[d].length&255,c.set(h[d],G),G+=h[d].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(n,2)),T(oi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=AM(e),d=new Uint8Array([]),e.encrypted&&(d=Rd(e),r="encv"),n=mr(r,n,u,h,d)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(r,2)),T(oi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=AM(e),d=new Uint8Array([]),e.encrypted&&(d=Rd(e),u="encv"),n=mr(u,r,n,h,d));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",Pp(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Pp(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Pp(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Pp(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,r=e.id+1,u=e.stream.channelsCount||2,d=e.stream.audioSamplingRate||44100,E=Uu("audio",e.codecs.split(",")),A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=A[d],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=A[2*d]),d=parseInt(E.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(oi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,d<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Rd(e),r="enca"),e=mr(r,Pp(e),n,u)),n=e}return e=mr("stsd",tZ,n),t("stbl",e,mr("stts",W5),mr("stsc",$5),mr("stsz",Q5),mr("stco",X5))}function AM(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(oi(e.xa,4)),T(oi(t,4)))),mr("pasp",e)}function Pp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(oi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Rd(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(oi(r,4)))),n=mr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=mr("schm",r),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var d=e.next();!d.done;d=e.next())if((d=d.value)&&d.keyIds&&d.keyIds.size){d=m(d.keyIds);for(var h=d.next();!h.done;h=d.next())c=IM(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Op(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=mr,d=new Uint8Array([0,0,0,0].concat(T(oi(n.data?n.data.jb:0,4))));d=mr("mfhd",d);var h,E=n.data?n.data.Ra:[],A=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;A[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",A);var G=E.length+92;A=mr,h=new Uint8Array([0,0,0,58].concat(T(oi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var te=Math.floor(k%(Kl+1));k=new Uint8Array([1,0,0,0].concat(T(oi(Math.floor(k/(Kl+1)),4)),T(oi(te,4)))),k=mr("tfdt",k);var z=G;G=n.data?n.data.Ra:[],te=G.length;var ye=12+16*te,Pe=new Uint8Array(ye);for(z+=8+ye,Pe.set([n.type==="video"?1:0,0,15,1].concat(T(oi(te,4)),T(oi(z,4))),0),z=0;z<te;z++){var Ne=G[z];ye=oi(Ne.duration,4);var Ge=oi(Ne.size,4),Te=Ne.flags;Ne=oi(Ne.Ta,4),Pe.set([].concat(T(ye),T(Ge),[Te.Va<<2|Te.Ka,Te.Na<<6|Te.Ma<<4|Te.Wa,Te.Ja&61440,Te.Ja&15],T(Ne)),12+16*z)}G=mr("trun",Pe),E=A("traf",h,k,G,E),c=c("moof",d,E),u.call(r,t,[c,V5(n)])}return li.apply(Pi,T(t))}function V5(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=li.apply(Pi,T(e)),mr("mdat",e)}function oi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function IM(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=Qe.apply(1,arguments),n=CM[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],CM[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var bM=!1,Kl=Math.pow(2,32)-1,CM={},z5=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Y5=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),W5=new Uint8Array([0,0,0,0,0,0,0,0]),$5=new Uint8Array([0,0,0,0,0,0,0,0]),X5=new Uint8Array([0,0,0,0,0,0,0,0]),Q5=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),J5=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),eZ=new Uint8Array([0,0,0,0,0,0,0,0]),tZ=new Uint8Array([0,0,0,0,0,0,0,1]),zv=new Uint8Array([]),nZ=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),d1=new Uint8Array([]);function h1(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){rZ(e)}),this.A=new Ll,this.m=new Map}g=h1.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return Oe(function(r){if(r.g==1)return n.l=[e],n.h=t,x(r,p1(n),2);if(!n.h)throw new pt(2,7,7001);return r.return(n.j)})};function rZ(e){var t;Oe(function(n){switch(n.g){case 1:return de(n,2),x(n,p1(e),4);case 4:ve(n,3);break;case 2:t=Ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return Oe(function(n){if(n.g==1)return de(n,2),x(n,p1(e),4);if(n.g!=2)return ve(n,0);if(t=Ce(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function p1(e){var t,n,r,u,c,d,h;return Oe(function(E){if(E.g==1)return t=Oi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5}),mu(e.A,u),x(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var A=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=Qm){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=PN(k,"SmoothStreamingMedia"),!k)throw new pt(2,4,4046,A);G(k),k=za(k.outerHTML)}var te=Xh(k,"SmoothStreamingMedia");if(!te)throw new pt(2,4,4046,A);if(A=e.g.mss.manifestPreprocessorTXml,A!=Jm&&A(te),e.i||(e.i=new tr(null,0)),A=_r(te,"IsLive",Qh,!1))throw new pt(2,4,4047);e.i.Ec(!A),G=_r(te,"TimeScale",Ro,1e7),k=_r(te,"DVRWindowLength",Ro),A&&(k===0||isNaN(k))&&(k=1/0);var z=_r(te,"CanSeek",Qh,!1);k===0&&z&&(k=1/0),z=null,k&&0<k&&(z=k/G),A&&!isNaN(e.g.availabilityWindowOverride)&&(z=e.g.availabilityWindowOverride),z==null&&(z=1/0),e.i.je(z),k=_r(te,"Duration",Ro,1/0),A||e.i.Za(k/G),A={variants:[],textStreams:[],timescale:G,duration:k/G},z=Wr(te,"Protection");var ye;for(G=e.g.mss.keySystemsBySystemId,k=[],z=m(z),ye=z.next();!ye.done;ye=z.next())k=k.concat(Wr(ye.value,"ProtectionHeader"));if(k.length){for(z=[],ye=0;ye<k.length;ye++){var Pe=k[ye],Ne=Pe.attributes.SystemID.toLowerCase(),Ge=G[Ne];if(Ge){var Te=SM(Pe);if(Te)e:{Te=m(Ra(Te,"DATA"));for(var $e=Te.next();!$e.done;$e=Te.next())if($e=la($e.value,"KID")){Te=Ho(Ci($e)),Te=new Uint8Array([Te[3],Te[2],Te[1],Te[0],Te[5],Te[4],Te[7],Te[6]].concat(T(Te.slice(8)))),Te=Os(Te);break e}Te=null}else Te=null;$e=Ho(Ci(Pe)),Ne=hu(Ne.replace(/-/g,"")),Ne=[{initData:zf($e,Ne,new Set,0),initDataType:"cenc",keyId:Te}],Ne=Fu(Ge,"cenc",Ne),Te&&Ne.keyIds.add(Te),(Ge=K5.get(Ge))&&(Ne.licenseServerUri=Ge(Pe)),z.push(Ne)}}G=z}else G=[];for(ye=G,z=[],G=[],k=[],te=Wr(te,"StreamIndex"),te=m(te),Pe=te.next();!Pe.done;Pe=te.next()){Pe=Pe.value,Ge=Wr(Pe,"QualityLevel"),Ne=A.timescale,Te=A.duration,$e=Wr(Pe,"c");for(var Ue=[],gt=0,Rt=0;Rt<$e.length;++Rt){var Ht=$e[Rt],Ut=$e[Rt+1],yt=_r(Ht,"t",Ro),jt=_r(Ht,"d",Ro);if(Ht=_r(Ht,"r",Qu),!jt)break;if(yt=yt!=null?yt:gt,Ht=Ht||0,0>Ht)if(Ut){if(Ut=_r(Ut,"t",Ro),Ut==null)break;if(yt>=Ut)break;Ht=Math.ceil((Ut-yt)/jt)-1}else{if(Te==1/0)break;if(yt/Ne>=Te)break;Ht=Math.ceil((Te*Ne-yt)/jt)-1}for(Ut=0;Ut<=Ht;++Ut)gt=yt+jt,Ue.push({start:yt/Ne,end:gt/Ne,Kf:yt}),yt=gt}for(Ne=Ue,Ge=m(Ge),Te=Ge.next();!Te.done;Te=Ge.next())(Te=iZ(e,Pe,Te.value,Ne,ye,A))&&(Te.type!="audio"||e.g.disableAudio?Te.type!="video"||e.g.disableVideo?Te.type!=vr||e.g.disableText||k.push(Te):G.push(Te):z.push(Te))}for(te=[],z=m(0<z.length?z:[null]),ye=z.next();!ye.done;ye=z.next())for(ye=ye.value,Pe=m(0<G.length?G:[null]),Te=Pe.next();!Te.done;Te=Pe.next())Ge=te,Ne=Ge.push,Te=Te.value,$e=0,ye&&ye.bandwidth&&0<ye.bandwidth&&($e+=ye.bandwidth),Te&&Te.bandwidth&&0<Te.bandwidth&&($e+=Te.bandwidth),Te={id:e.s++,language:ye?ye.language:"und",disabledUntilTime:0,primary:!!ye&&ye.primary||!!Te&&Te.primary,audio:ye,video:Te,bandwidth:$e,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},Ne.call(Ge,Te);A.variants=te,A.textStreams=k,e.j?(e.j.variants=A.variants,e.j.textStreams=A.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:A.variants,textStreams:A.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),d=Date.now(),h=(d-r)/1e3,e.B.sample(1,h),X(E)})}function iZ(e,t,n,r,u,c){var d=t.attributes.Type;if(d!=="audio"&&d!=="video"&&d!=="text")return He("Ignoring unrecognized type:",d),null;var h=t.attributes.Language,E=e.s++,A=_r(n,"Bitrate",Bs),k=_r(n,"MaxWidth",Bs),G=_r(n,"MaxHeight",Bs),te=_r(n,"Channels",Bs),z=_r(n,"SamplingRate",Bs),ye=c.duration;r.length&&(ye=r[r.length-1].end-r[0].start);var Pe=e.i.getDuration();e.i.Za(Math.min(ye,Pe));var Ne={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:A||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Cr(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:te,audioSamplingRate:z,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ye,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=cZ[u])&&Ne.roles.push(u),u==="main"&&(Ne.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(d==="audio")u="AAC";else if(d==="video")return He('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!lZ.includes(u.toUpperCase()))return He("Codec not supported:",u),null;switch(n=oZ(n,d,u,Ne),Ne.mssPrivateData.codecPrivateData=n,d){case"audio":if(!n)return He("Quality unsupported without CodecPrivateData",d),null;Ne.type="audio",Ne.mimeType="mss/audio/mp4",Ne.codecs=aZ(u,n);break;case"video":if(!n)return He("Quality unsupported without CodecPrivateData",d),null;Ne.type="video",Ne.mimeType="mss/video/mp4",Ne.codecs=sZ(n);break;case"text":Ne.type=vr,Ne.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(Ne.codecs="stpp")}return Ne.fullMimeTypes.add(Si(Ne.mimeType,Ne.codecs)),Ne.createSegmentIndex=function(){if(Ne.segmentIndex)return Promise.resolve();if(e.m.has(Ne.id))var Ge=e.m.get(Ne.id);else Ge=[],Ne.type=="video"&&(Ge=Ne.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Ge={id:Ne.id,type:Ne.type,codecs:Ne.codecs,encrypted:Ne.encrypted,timescale:Ne.mssPrivateData.timescale,duration:Ne.mssPrivateData.duration,Sa:Ge,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:Ne},Ge=Cd(new bd([Ge])),e.m.set(Ne.id,Ge);return Ge=uZ(e,new dt(function(){return[]},0,null,null,void 0,Ge),Ne,t,r),Ne.segmentIndex=new wr(Ge),Promise.resolve()},Ne.closeSegmentIndex=function(){Ne.segmentIndex&&(Ne.segmentIndex.release(),Ne.segmentIndex=null)},Ne}function oZ(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function aZ(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function sZ(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function uZ(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];var d={};u=m(u);for(var h=u.next();!h.done;d={Pc:d.Pc},h=u.next())d.Pc=h.value,r.push(new Je(d.Pc.start,d.Pc.end,function(E){return function(){return co(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return r}ne("shaka.mss.MssParser",h1);var lZ="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),cZ={CAPT:"main",SUBT:"alternate",DESC:"main"};ke["application/vnd.ms-sstr+xml"]=function(){return new h1};function RM(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=Va(t)}catch(d){}throw new pt(n==401||n==403?2:1,1,1001,r,n,u,e,c)}function g1(){}function Yv(e,t,n,r,u){var c=new gZ;kl(t.headers).forEach(function(A,k){c.append(k,A)});var d=new hZ,h={Rf:!1,Jg:!1};if(e=fZ(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:d.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,r,u,t.streamDataCallback),e=new pi(e,function(){return h.Rf=!0,d.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,d.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function fZ(e,t,n,r,u,c,d){var h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:return h=dZ,E=pZ,te=G=0,z=Date.now(),de(Ue,2),x(Ue,h(e,n),4);case 4:if(A=Ue.h,c(xM(A.headers)),n.method=="HEAD"){Ue.u(5);break}return ye=A.clone().body.getReader(),Ne=(Pe=A.headers.get("Content-Length"))?parseInt(Pe,10):0,Ge=function(gt){function Rt(){var Ht,Ut;return Oe(function(yt){switch(yt.g){case 1:return de(yt,2),x(yt,ye.read(),4);case 4:Ht=yt.h,ve(yt,3);break;case 2:return Ce(yt),yt.return();case 3:if(Ht.done){yt.u(5);break}if(G+=Ht.value.byteLength,!d){yt.u(5);break}return x(yt,d(Ht.value),5);case 5:Ut=Date.now(),(100<Ut-z||Ht.done)&&(u(Ut-z,G-te,Ne-G),te=G,z=Ut),Ht.done?gt.close():(gt.enqueue(Ht.value),Rt()),X(yt)}})}Rt()},new E({start:Ge}),x(Ue,A.arrayBuffer(),6);case 6:k=Ue.h;case 5:ve(Ue,3);break;case 2:throw Te=Ce(Ue),r.Rf?new pt(1,1,7001,e,t):r.Jg?new pt(1,1,1003,e,t):new pt(1,1,1002,e,Te,t);case 3:return $e=xM(A.headers),Ue.return(RM($e,k,A.status,e,A.url,t))}})}function xM(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function NM(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}ne("shaka.net.HttpFetchPlugin",g1),g1.isSupported=NM,g1.parse=Yv;var dZ=p.fetch,hZ=p.AbortController,pZ=p.ReadableStream,gZ=p.Headers;NM()&&(Ko("http",Yv,2,!0),Ko("https",Yv,2,!0),Ko("blob",Yv,2,!0));function MM(){}function Wv(e,t,n,r,u){var c=new mZ,d=Date.now(),h=0,E=new Promise(function(A,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new pt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var z=DM(c);u(z),G=!0}},c.onload=function(){var z=DM(c),ye=c.response;try{var Pe=RM(z,ye,c.status,e,c.responseURL,n);A(Pe)}catch(Ne){k(Ne)}},c.onerror=function(z){k(new pt(1,1,1002,e,z,n))},c.ontimeout=function(){k(new pt(1,1,1003,e,n))},c.onprogress=function(z){var ye=Date.now();(100<ye-d||z.lengthComputable&&z.loaded==z.total)&&(r(ye-d,z.loaded-h,z.total-z.loaded),h=z.loaded,d=ye)};for(var te in t.headers)c.setRequestHeader(te.toLowerCase(),t.headers[te]);c.send(t.body)});return new pi(E,function(){return c.abort(),Promise.resolve()})}function DM(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}ne("shaka.net.HttpXHRPlugin",MM),MM.parse=Wv;var mZ=p.XMLHttpRequest;Ko("http",Wv,1,!0),Ko("https",Wv,1,!0),Ko("blob",Wv,1,!0);function PM(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function m1(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function vZ(e,t){return sp(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function OM(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function LM(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}OM.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function kM(e){var t=this;this.o=e,this.j=new Map,this.i=new $u(function(){return v1(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new OM}kM.prototype.destroy=function(){return this.i.destroy()};function yZ(e,t,n){e.m=t,e.l=n}function v1(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function EZ(e,t,n,r,u,c){jr(e.i);var d=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,A,k,G,te,z;return Oe(function(ye){if(ye.g==1)return x(ye,TZ(e,n),2);if(h=ye.h,e.i.g)throw new pt(2,9,7001);if(u)for(k in E=Qn(h),A=new Lm(E),A.data)G=Number(k),te=A.data[G],z=A.g[G],e.l(te,z);e.g.close(r,h.byteLength);var Pe=e.g;return e.m(Pe.i==0?0:Pe.j/Pe.i,e.g.h),ye.return(c(h))})});e.j.set(t,d)}function _Z(e){return Oe(function(t){return t.g==1?x(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function TZ(e,t){var n,r,u,c;return Oe(function(d){return d.g==1?(n=$a,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),x(d,r.promise,2)):(c=d.h,mn(e.h,u),d.return(c.data))})}function $v(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}$v.prototype.abort=function(){var e=this;return Oe(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return de(t,2),x(t,e.g,4)}if(t.g!=2)return ve(t,0);Ce(t),X(t)})};function y1(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Oe(function(d){if(d.g==1)return u.result==null?(n(),d.return()):(c=u.result,x(d,t(c.key,c.value,c),2));c.continue(),X(d)})}})}$v.prototype.store=function(){return this.h},$v.prototype.promise=function(){return this.g};function E1(e){this.h=e,this.g=[]}E1.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function zc(e,t){return Xv(e,t,"readwrite")}function Xv(e,t,n){n=e.h.transaction([t],n);var r=new $v(n,t);return e.g.push(r),r.promise().then(function(){mn(e.g,r)},function(){mn(e.g,r)}),r}function Yc(e,t,n){this.h=new E1(e),this.i=t,this.g=n}g=Yc.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return FM(this.i)},g.removeSegments=function(e,t){return UM(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return Oe(function(r){return r.g==1?x(r,BM(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return FM(this.g)},g.updateManifest=function(){return Promise.reject(new pt(2,9,9016,"Cannot modify values in "+this.g))};function SZ(e,t,n){e=zc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=zc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},g.removeManifests=function(e,t){return UM(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return Oe(function(r){return r.g==1?x(r,BM(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return Oe(function(r){return r.g==1?(t=Xv(e.h,e.g,"readonly"),n=new Map,x(r,y1(t,function(u,c){var d;return Oe(function(h){if(h.g==1)return x(h,e.Yc(c),2);d=h.h,n.set(u,d),X(h)})}),2)):r.g!=3?x(r,t.promise(),3):r.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function FM(e){return Promise.reject(new pt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,r,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(r=zc(n.h,e),u=r.store(),c=[],d={},h=m(t),E=h.next();!E.done;d={zd:d.zd},E=h.next())A=E.value,d.zd=u.add(A),d.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(d);return x(k,r.promise(),2)}return k.return(c)})};function UM(e,t,n,r){e=zc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(d){return function(){return r(d.xd)}}(u);return e.promise()}function BM(e,t,n){var r,u,c,d,h,E,A;return Oe(function(k){if(k.g==1){for(r=Xv(e.h,t,"readonly"),u=r.store(),c={},d=[],h={},E=m(n),A=E.next();!A.done;h={Nc:h.Nc,Lc:h.Lc},A=E.next())h.Lc=A.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&d.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return x(k,r.promise(),2)}if(d.length)throw new pt(2,9,9012,"Could not find values for "+d);return k.return(n.map(function(G){return c[G]}))})}function Lp(e){this.g=new E1(e)}Lp.prototype.destroy=function(){return this.g.destroy()},Lp.prototype.getAll=function(){var e=this,t,n;return Oe(function(r){return r.g==1?(t=Xv(e.g,"session-ids","readonly"),n=[],x(r,y1(t,function(u,c){n.push(c)}),2)):r.g!=3?x(r,t.promise(),3):r.return(n)})},Lp.prototype.add=function(e){var t=zc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},Lp.prototype.remove=function(e){var t=this,n;return Oe(function(r){return r.g==1?(n=zc(t.g,"session-ids"),x(r,y1(n,function(u,c,d){e.includes(c.sessionId)&&d.delete()}),2)):x(r,n.promise(),0)})};function zo(){this.g=new Map}zo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},zo.prototype.init=function(){var e=this;kp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function jM(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:r,Ba:c},Ba:u})})}),t)return t;throw new pt(2,9,9013,"Could not find a cell that supports add-operations")}function wZ(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({fb:r,Ba:c},u)})})}function Qv(e,t,n){if(e=e.g.get(t),!e)throw new pt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new pt(2,9,9013,"Could not find cell with name "+n);return t}function AZ(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function IZ(e){var t=Array.from(e.g.keys());if(!t.length)throw new pt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function bZ(e){var t,n,r;return Oe(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=kp,r.forEach(function(c){(c=c())&&t.push(c)})),x(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):x(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function ZM(e,t){kp.set(e,t)}ne("shaka.offline.StorageMuxer",zo),zo.unregister=function(e){kp.delete(e)},zo.register=ZM,zo.prototype.destroy=zo.prototype.destroy;var kp=new Map;function Fp(){Yc.apply(this,arguments)}Y(Fp,Yc),Fp.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Oe(function(d){return r=zc(n.h,n.g),u=r.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new pt(2,9,9012,"Could not find values for "+e))},x(d,Promise.all([r.promise(),c]),0)})},Fp.prototype.Yc=function(e){var t,n,r,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=CZ(e.periods[n],u),t.push(c);return x(h,IN(t),2)}return d=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:d,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function CZ(e,t){xZ(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return RZ(u,e.startTime,t)})}function RZ(e,t,n){var r=e.initSegmentUri?GM(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(d){var h=GM(d.uri);return{startTime:t+d.startTime,endTime:t+d.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Fp.prototype.Tf=function(e){return{data:e.data}};function GM(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new pt(2,9,9004,"Could not parse uri "+e)}function xZ(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(r=c.next();!r.done;r=c.next())r.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),r=c.next();!r.done;r=c.next())r.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var d=n++;r.variantIds.push(d),c.variantIds.push(d)}}}function Jv(){Yc.apply(this,arguments)}Y(Jv,Yc),Jv.prototype.Yc=function(e){var t,n,r,u,c,d;return Oe(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var E=e.periods[n],A=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&A.push(NZ(G,E.startTime,E.startTime+u));c=A,t.push(c)}return x(h,IN(t),2)}return d=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:d,sequenceMode:!1})})};function NZ(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function _1(){Yc.apply(this,arguments)}Y(_1,Yc),g=_1.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return SZ(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function qM(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=qM.prototype,g.init=function(){var e=this,t=new Rr,n=!1,r=new pr(function(){n=!0,t.reject(new pt(2,9,9017))});r.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var d=c.objectStoreNames;d=d.contains("manifest")&&d.contains("segment")?new Fp(c,"segment","manifest"):null,e.g=d,d=c.objectStoreNames,d=d.contains("manifest-v2")&&d.contains("segment-v2")?new Jv(c,"segment-v2","manifest-v2"):null,e.h=d,d=c.objectStoreNames,d=d.contains("manifest-v3")&&d.contains("segment-v3")?new Jv(c,"segment-v3","manifest-v3"):null,e.i=d,d=c.objectStoreNames,d=d.contains("manifest-v5")&&d.contains("segment-v5")?new _1(c,"segment-v5","manifest-v5"):null,e.j=d,c=c.objectStoreNames.contains("session-ids")?new Lp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,d=m(["segment-v5","manifest-v5","session-ids"]),h=d.next();!h.done;h=d.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new pt(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return x(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return Oe(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),x(t,MZ(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,x(t,e.init(),0)}})};function MZ(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new pt(2,9,9001,t.error)),n.preventDefault()},e}ZM("idb",function(){return aa()||ms()||!p.indexedDB?null:new qM});function wu(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}wu.prototype.fb=function(){return this.i},wu.prototype.Ba=function(){return this.h},wu.prototype.key=function(){return this.l},wu.prototype.toString=function(){return this.j};function T1(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new wu(t,n,r,Number(e[4])):null}function HM(e,t){this.h=e,this.g=t}function KM(e,t){var n=new tr(null,0);n.Za(t.duration);var r=t.streams.filter(function(A){return A.type=="audio"}),u=t.streams.filter(function(A){return A.type=="video"});r=DZ(e,r,u,n),u=t.streams.filter(function(A){return A.type==vr}).map(function(A){return ey(e,A,n)});var c=t.streams.filter(function(A){return A.type=="image"}).map(function(A){return ey(e,A,n)}),d=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=d),E.video&&E.video.encrypted&&(E.video.drmInfos=d);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function DZ(e,t,n,r){for(var u=new Set,c=m(t),d=c.next();!d.done;d=c.next()){var h=m(d.value.variantIds);for(d=h.next();!d.done;d=h.next())u.add(d.value)}for(c=m(n),d=c.next();!d.done;d=c.next())for(h=m(d.value.variantIds),d=h.next();!d.done;d=h.next())u.add(d.value);for(c=new Map,u=m(u),d=u.next();!d.done;d=u.next())d=d.value,c.set(d,{id:d,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,d=ey(e,u,r),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=d.language,u.primary=u.primary||d.primary,u.audio=d;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=ey(e,u,r),d=m(u.variantIds),u=d.next();!u.done;u=d.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function ey(e,t,n){var r=t.segments.map(function(u){return PZ(e,u,t)});return n.ld(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Si(t.mimeType,t.codecs)])}}function PZ(e,t,n){var r=new wu("segment",e.h,e.g,t.dataKey);return e=new Je(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?OZ(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function OZ(e,t){var n=new wu("segment",e.h,e.g,t);return new dt(function(){return[n.toString()]},0,null)}function VM(){this.g=null}g=VM.prototype,g.configure=function(){},g.start=function(e,t){var n=this,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:if(r=T1(e),n.g=r,r==null||r.g!="manifest")throw new pt(2,1,9004,e);return u=new zo,oe(k,2),x(k,u.init(),4);case 4:return x(k,Qv(u,r.fb(),r.Ba()),5);case 5:return c=k.h,x(k,c.getManifests([r.key()]),6);case 6:return d=k.h,h=d[0],E=new HM(r.fb(),r.Ba()),A=KM(E,h),t.makeTextStreamsForClosedCaptions(A),k.return(A);case 2:return Xe(k),x(k,u.destroy(),7);case 7:Ae(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return r=n.g,u=new zo,de(k,2,3),x(k,u.init(),5);case 5:return x(k,Qv(u,r.fb(),r.Ba()),6);case 6:return c=k.h,x(k,c.getManifests([r.key()]),7);case 7:if(d=k.h,h=d[0],E=h.sessionIds.includes(e),A=h.expiration==null||h.expiration>t,!E||!A){k.u(3);break}return x(k,c.updateManifestExpiration(r.key(),t),3);case 3:return Xe(k),x(k,u.destroy(),10);case 10:Ae(k,0);break;case 2:Ce(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},ke["application/x-offline-manifest"]=function(){return new VM};function zM(){}function YM(e){var t=T1(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Wu(e)):e=t&&t.g=="segment"?LZ(t.key(),t):gu(new pt(2,1,9004,e)),e}function LZ(e,t){var n=new zo;return Wu(void 0).va(function(){return n.init()}).va(function(){return Qv(n,t.fb(),t.Ba())}).va(function(r){return r.getSegments([t.key()])}).va(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}ne("shaka.offline.OfflineScheme",zM),zM.plugin=YM,Ko("offline",YM);function WM(e,t,n){var r,u,c,d,h,E;return Oe(function(A){switch(A.g){case 1:r=[];for(var k=[],G=m(n),te=G.next();!te.done;te=G.next()){te=te.value;for(var z=!1,ye=m(k),Pe=ye.next();!Pe.done;Pe=ye.next())if(Pe=Pe.value,FZ(Pe.info,te)){Pe.sessionIds.push(te.sessionId),z=!0;break}z||k.push({info:te,sessionIds:[te.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){A.u(4);break}return d=c.value,h=kZ(e,t,d),x(A,h,5);case 5:E=A.h,r=r.concat(E),c=u.next(),A.u(2);break;case 4:return A.return(r)}})}function kZ(e,t,n){var r,u;return Oe(function(c){switch(c.g){case 1:return r=new kc({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),de(c,2),r.configure(e),x(c,Bm(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ve(c,3);break;case 2:return Ce(c),x(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],x(c,Promise.all(n.sessionIds.map(function(d){return Oe(function(h){if(h.g==1)return de(h,2),x(h,jE(r,d),4);if(h.g!=2)return u.push(d),ve(h,0);Ce(h),X(h)})})),6);case 6:return x(c,r.destroy(),7);case 7:return c.return(u)}})}function FZ(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function UZ(e,t,n){var r=t.presentationTimeline.getDuration();return t=$M(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function S1(e,t){var n=KM(new HM(e.fb(),e.Ba()),t),r=t.appMetadata||{};return n=$M(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function $M(e){var t=[],n=jf(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(Nl(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Ml(n.value));return t}function BZ(){this.g={}}function jZ(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function ZZ(e,t){e.g[t.id]=t.bandwidth||2048}function XM(e,t){return e=e.g[t],e==null&&(e=0),e}function ao(e){var t=this;if(e&&e.constructor!=dn)throw new pt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=id(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new $u(function(){var r,u,c,d,h;return Oe(function(E){switch(E.g){case 1:return x(E,Promise.all(t.j.map(function(A){return v1(A)})),2);case 2:for(r=function(){},u=[],c=m(t.i),d=c.next();!d.done;d=c.next())h=d.value,u.push(h.then(r,r));return x(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return x(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(E)}})})}function w1(){if(Io())e:{for(var e=m(kp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=ao.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Xm(e,t)),Zc(this.h,e)},g.getConfiguration=function(){var e=id();return Zc(e,this.h,id()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new kM(this.g);return this.j.push(c),t=GZ(this,e,t||{},function(){var d;return Oe(function(h){return h.g==1?n?h.u(2):x(h,f_(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),d=be(e,n||null),h.return(d()))})},u,c),t=new pi(t,function(){return v1(c)}),t.finally(function(){mn(r.j,c)}),tG(this,t)};function GZ(e,t,n,r,u,c){var d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:return ty(),h=d=null,E=new zo,G=k=A=null,de(Ue,2,3),x(Ue,r(),5);case 5:return d=Ue.h,x(Ue,XZ(e,t,d,u),6);case 6:if(te=Ue.h,yo(e),z=!te.presentationTimeline.R()&&!te.presentationTimeline.dc(),!z)throw new pt(2,9,9005,t);return x(Ue,e.rc(te,function(gt){G=G||gt},u),7);case 7:if(h=Ue.h,yo(e),G)throw G;return x(Ue,HZ(te,h,u),8);case 8:return x(Ue,E.init(),9);case 9:return yo(e),x(Ue,jM(E),10);case 10:return A=Ue.h,yo(e),ye=KZ(h,te,t,n,u,c),Pe=ye.Sh,Ne=ye.Hf,x(Ue,A.Ba.addManifests([Pe]),11);case 11:if(Ge=Ue.h,yo(e),k=Ge[0],yo(e),G)throw G;return x(Ue,qZ(e,Ne,k,Pe,c,u,A.Ba,te,h),12);case 12:return yo(e),t2(te,Pe,h,u),x(Ue,A.Ba.updateManifest(k,Pe),13);case 13:return yo(e),Te=new wu("manifest",A.path.fb,A.path.Ba,k),Ue.return(S1(Te,Pe));case 3:return Xe(Ue),x(Ue,E.destroy(),14);case 14:if(!d){Ue.u(15);break}return x(Ue,d.stop(),15);case 15:if(!h){Ue.u(17);break}return x(Ue,h.destroy(),17);case 17:Ae(Ue,0);break;case 2:if($e=Ce(Ue),k==null){Ue.u(19);break}return x(Ue,QM(k),19);case 19:throw G||$e}})}function qZ(e,t,n,r,u,c,d,h,E){var A,k,G,te,z,ye,Pe,Ne,Ge,Te;return Oe(function($e){switch($e.g){case 1:if(A={},k=0,G=function(Ue,gt){var Rt,Ht,Ut,yt,jt,ln,gn;return Oe(function(Ln){if(Ln.g==1){for(Rt={},Ht=m(Ue),Ut=Ht.next();!Ut.done;Rt={Ob:Rt.Ob},Ut=Ht.next())Rt.Ob=Ut.value,yt=vZ(Rt.Ob,c),jt=Rt.Ob.i,ln=Rt.Ob.h,gn=function(Mn){return function(qn){var Yn,Kn,Nr;return Oe(function(fi){if(fi.g==1)return x(fi,d.addSegments([{data:qn}]),2);Yn=fi.h,yo(e),Kn=Mn.Ob.g,Nr=m1(Kn),A[Nr]=Yn[0],k+=qn.byteLength,X(fi)})}}(Rt),EZ(u,Rt.Ob.groupId,yt,jt,ln,gn);return x(Ln,_Z(u),2)}return gt?(yo(e),t2(h,r,E,c),x(Ln,d.updateManifest(n,r),0)):Ln.u(0)})},te=!1,de($e,2),!A1(h)||!te||e2(h)){$e.u(4);break}return x($e,G(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return yo(e),t=t.filter(function(Ue){return!Ue.h}),z=A,ye=k,A={},k=0,x($e,JM(d,n,r,z,ye,function(){return yo(e)}),6);case 6:yo(e);case 4:if(te){$e.u(7);break}return x($e,G(t,!1),8);case 8:return yo(e),Pe=A,Ne=k,A={},k=0,x($e,JM(d,n,r,Pe,Ne,function(){return yo(e)}),9);case 9:yo(e);case 7:ve($e,0);break;case 2:return Ge=Ce($e),Te=Object.values(A),x($e,d.removeSegments(Te,function(){}),10);case 10:throw Ge}})}function QM(e){var t,n,r,u;return Oe(function(c){switch(c.g){case 1:return t=new zo,x(c,t.init(),2);case 2:return x(c,jM(t),3);case 3:return n=c.h,r=new wu("manifest",n.path.fb,n.path.Ba,e),x(c,t.destroy(),4);case 4:return u=new ao,x(c,u.remove(r.toString()),0)}})}function JM(e,t,n,r,u,c){var d,h,E,A,k,G,te,z,ye,Pe,Ne;return Oe(function(Ge){switch(Ge.g){case 1:for(d=!1,de(Ge,2),h=!0,E=m(n.streams),A=E.next();!A.done;A=E.next())for(k=A.value,G=m(k.segments),te=G.next();!te.done;te=G.next())z=te.value,ye=z.pendingSegmentRefId?r[z.pendingSegmentRefId]:null,ye!=null&&(z.dataKey=ye,z.pendingSegmentRefId=void 0),ye=z.pendingInitSegmentRefId?r[z.pendingInitSegmentRefId]:null,ye!=null&&(z.initSegmentKey=ye,z.pendingInitSegmentRefId=void 0),z.pendingSegmentRefId&&(h=!1),z.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),x(Ge,e.updateManifest(t,n),4);case 4:d=!0,c(),ve(Ge,0);break;case 2:return Pe=Ce(Ge),x(Ge,QM(t),5);case 5:if(d){Ge.u(6);break}return Ne=Object.values(r),x(Ge,e.removeSegments(Ne,function(){}),6);case 6:throw Pe}})}function HZ(e,t,n){var r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e,Ue,gt,Rt,Ht,Ut,yt,jt,ln,gn,Ln,Mn;return Oe(function(qn){switch(qn.g){case 1:return r={width:1/0,height:1/0},Oh(e,n.restrictions,r),x(qn,vm(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,d=n.preferredVideoCodecs,h=n.preferredAudioCodecs,gm(e,d,h,c),E=m(e.variants),A=E.next();!A.done;A=E.next())k=A.value,u.push(Nl(k));for(G=m(e.textStreams),te=G.next();!te.done;te=G.next())z=te.value,u.push(Ml(z));for(ye=m(e.imageStreams),Pe=ye.next();!Pe.done;Pe=ye.next())Ne=Pe.value,u.push(Vu(Ne));return x(qn,n.offline.trackSelectionCallback(u),3);case 3:for(Ge=qn.h,Te=e.presentationTimeline.getDuration(),$e=0,Ue=m(Ge),gt=Ue.next();!gt.done;gt=Ue.next())Rt=gt.value,Ht=Rt.bandwidth*Te/8,$e+=Ht;return de(qn,4),x(qn,n.offline.downloadSizeCallback($e),6);case 6:if(Ut=qn.h,!Ut)throw new pt(2,9,9014);ve(qn,5);break;case 4:throw yt=Ce(qn),yt instanceof pt?yt:new pt(2,9,9015);case 5:for(jt=new Set,ln=new Set,gn=new Set,Ln=m(Ge),gt=Ln.next();!gt.done;gt=Ln.next())Mn=gt.value,Mn.type=="variant"&&jt.add(Mn.id),Mn.type=="text"&&ln.add(Mn.id),Mn.type=="image"&&gn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return jt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return ln.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return gn.has(Yn.id)}),iG(e),X(qn)}})}function KZ(e,t,n,r,u,c){var d=UZ(n,t,r),h=u.offline.progressCallback;yZ(c,function(z,ye){d.size=ye,h(d,z)},function(z,ye){E&&u.offline.usePersistentLicense&&A==ye&&Bl(e,"cenc",z)});var E=A1(t)&&!e2(t),A=null;E&&(A=oG.get(e.g.keySystem));for(var k=new BZ,G=m(t.textStreams),te=G.next();!te.done;te=G.next())k.g[te.value.id]=52;for(G=m(t.imageStreams),te=G.next();!te.done;te=G.next())ZZ(k,te.value);for(te=m(t.variants),G=te.next();!G.done;G=te.next())jZ(k,G.value);return k=QZ(c,k,t,u),c=k.streams,k=k.Hf,te=e.g,G=u.offline.usePersistentLicense,te&&G&&(te.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?np(e):[],drmInfo:te,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function A1(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function e2(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function t2(e,t,n,r){if(t.expiration=n.cd(),n=np(n),t.sessionIds=r.offline.usePersistentLicense?n:[],A1(e)&&r.offline.usePersistentLicense&&!n.length)throw new pt(2,9,9007)}g.remove=function(e){return I1(this,VZ(this,e))};function VZ(e,t){var n,r,u,c,d,h;return Oe(function(E){switch(E.g){case 1:if(ty(),n=T1(t),n==null||n.g!="manifest")throw new pt(2,9,9004,t);return r=n,u=new zo,oe(E,2),x(E,u.init(),4);case 4:return x(E,Qv(u,r.fb(),r.Ba()),5);case 5:return c=E.h,x(E,c.getManifests([r.key()]),6);case 6:return d=E.h,h=d[0],x(E,Promise.all([zZ(e,h,u),YZ(c,r,h)]),2);case 2:return Xe(E),x(E,u.destroy(),8);case 8:Ae(E,0)}})}function n2(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function zZ(e,t,n){return Oe(function(r){return x(r,rG(e.g,e.h.drm,n,t),0)})}function YZ(e,t,n){function r(){}var u=nG(n);return S1(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}g.ji=function(){return I1(this,WZ(this))};function WZ(e){var t,n,r,u,c,d,h,E,A,k;return Oe(function(G){switch(G.g){case 1:return ty(),t=e.g,n=e.h.drm,r=new zo,u=!1,oe(G,2),x(G,r.init(),4);case 4:c=[],AZ(r,function(te){return c.push(te)}),d=m(c),h=d.next();case 5:if(h.done){G.u(2);break}return E=h.value,x(G,E.getAll(),8);case 8:return A=G.h,x(G,WM(n,t,A),9);case 9:return k=G.h,x(G,E.remove(k),10);case 10:k.length!=A.length&&(u=!0),h=d.next(),G.u(5);break;case 2:return Xe(G),x(G,r.destroy(),11);case 11:Ae(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return I1(this,$Z())};function $Z(){var e,t,n;return Oe(function(r){switch(r.g){case 1:return ty(),e=[],t=new zo,oe(r,2),x(r,t.init(),4);case 4:return n=Promise.resolve(),wZ(t,function(u,c){n=n.then(function(){var d;return Oe(function(h){if(h.g==1)return x(h,c.getAllManifests(),2);d=h.h,d.forEach(function(E,A){E=S1(new wu("manifest",u.fb,u.Ba,A),E),e.push(E)}),X(h)})})}),x(r,n,2);case 2:return Xe(r),x(r,t.destroy(),6);case 6:Ae(r,3);break;case 3:return r.return(e)}})}function XZ(e,t,n,r){var u,c,d,h,E;return Oe(function(A){if(A.g==1)return u=null,c=e.g,d={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),yo(e),x(A,n.start(t,d),2);if(A.g!=3)return h=A.h,yo(e),E=r2(h),x(A,Promise.all(Kf(E,function(k){return k.createSegmentIndex()})),3);if(yo(e),u)throw u;return A.return(h)})}g.rc=function(e,t,n){var r=this,u;return Oe(function(c){return c.g==1?(u=new kc({zb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),x(c,Fm(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?x(c,tp(u),3):c.return(u)})};function QZ(e,t,n,r){var u=new Map,c=r2(n),d=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=JZ(e,t,n,h,r,u);d.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&d.get(t.audio.id).variantIds.push(t.id),t.video&&d.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(d.values()),Hf:Array.from(u.values())}}function JZ(e,t,n,r,u,c){var d={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return eG(r,n.presentationTimeline.qb(),function(A){var k=m1(A),G=void 0;if(!c.has(k)){var te=A.endTime-A.startTime;te=XM(t,r.id)*te,te=LM(e.g,te),c.set(k,new PM(A,te,E,!1))}A.ca&&(G=m1(A.ca),c.has(G)||(te=.5*XM(t,r.id),te=LM(e.g,te),c.set(G,new PM(A.ca,te,E,!0)))),d.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:A.startTime,endTime:A.endTime,appendWindowStart:A.appendWindowStart,appendWindowEnd:A.appendWindowEnd,timestampOffset:A.timestampOffset,tilesLayout:A.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:A.mimeType,codecs:A.codecs}),E=(E+1)%h}),d}function eG(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function yo(e){if(e.l.g)throw new pt(2,9,7001)}function ty(){if(!w1())throw new pt(2,9,9e3)}function I1(e,t){return Oe(function(n){return n.g==1?(e.i.push(t),oe(n,2),x(n,t,4)):n.g!=2?n.return(n.h):(Xe(n),mn(e.i,t),Ae(n,0))})}function tG(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){mn(e.i,n)})}function nG(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function rG(e,t,n,r){var u,c,d;return Oe(function(h){return h.g==1?r.drmInfo?(u=IZ(n),c=r.sessionIds.map(function(E){return{sessionId:E,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:n2(r,!1),videoCapabilities:n2(r,!0)}}),x(h,WM(t,e,c),2)):h.return():h.g!=3?(d=h.h,x(h,u.remove(d),3)):x(h,u.add(c.filter(function(E){return!d.includes(E.sessionId)})),0)})}function r2(e){for(var t=new Set,n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=m(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function iG(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}ne("shaka.offline.Storage",ao),ao.deleteAll=function(){var e;return Oe(function(t){return t.g==1?(e=new zo,oe(t,2),x(t,bZ(e),2)):t.g!=5?(Xe(t),x(t,e.destroy(),5)):Ae(t,0)})},ao.prototype.list=ao.prototype.list,ao.prototype.removeEmeSessions=ao.prototype.ji,ao.prototype.remove=ao.prototype.remove,ao.prototype.store=ao.prototype.store,ao.prototype.getNetworkingEngine=ao.prototype.Zb,ao.prototype.getConfiguration=ao.prototype.getConfiguration,ao.prototype.configure=ao.prototype.configure,ao.prototype.destroy=ao.prototype.destroy,ao.support=w1;var oG=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");C_.offline=w1;function Eo(){}function Yo(e,t){for(e={priority:t||0,callback:e},t=0;t<Up.length;t++)if(Up[t].priority<e.priority){Up.splice(t,0,e);return}Up.push(e)}ne("shaka.polyfill",Eo),Eo.register=Yo,Eo.installAll=function(){for(var e=m(Up),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){He("Error installing polyfill!",n)}}};var Up=[];function Bp(){this.g=new ny}function i2(){p.AbortController||(p.AbortController=Bp,p.AbortSignal=ny)}Bp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(Bp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Eo.AbortController=Bp,Bp.install=i2;function ny(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}Y(ny,Sr),y.Object.defineProperties(ny.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yo(i2);function o2(){}function a2(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())aG(t.value)}function aG(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Eo.Aria=o2,o2.install=a2,Yo(a2);function s2(){}function u2(){AD()}Eo.EncryptionScheme=s2,s2.install=u2,Yo(u2,-2);function l2(){}function c2(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",xd),document.addEventListener("webkitfullscreenerror",xd),document.addEventListener("mozfullscreenchange",xd),document.addEventListener("mozfullscreenerror",xd),document.addEventListener("MSFullscreenChange",xd),document.addEventListener("MSFullscreenError",xd)}}function xd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Eo.Fullscreen=l2,l2.install=c2,Yo(c2);function jp(){}function f2(){var e=!0;(vs()||Ec()||xr()||oa()||Ha()||aa()||Yr("PC=EOS")||ys())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),d2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=sG)}function sG(e){var t,n,r,u,c,d,h,E,A,k,G,te,z,ye,Pe,Ne,Ge,Te,$e;return Oe(function(Ue){switch(Ue.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ue.return(t);if(n=e.video,r=e.audio,e.type=="media-source"){if(!Io())return Ue.return(t);if(n){if(aa())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var gt=n.contentType;if(n.width&&n.height&&(gt+="; width="+n.width+"; height="+n.height),n.framerate&&(gt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(gt+="; eotf=smpte2084"),gt in iy)var Rt=iy[gt];else Rt=cast.__platform__.canDisplayType(gt),iy[gt]=Rt;u=Rt}else u=Ot(n.contentType);else Ha()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Ot(c)):u=Ot(n.contentType);if(!u)return Ue.return(t)}if(r&&(aa()&&r.spatialRendering?(h=r.contentType+"; spatialRendering=true",d=Ot(h)):d=Ot(r.contentType),!d))return Ue.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,A=cu(E),!A)||r&&(k=r.contentType,G=cu(k),!G))return Ue.return(t)}else return Ue.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Ue.return(Promise.resolve(t));if(te=e.keySystemConfiguration,z=[],ye=[],te.audio&&(Pe={robustness:te.audio.robustness||"",contentType:e.audio.contentType},Ha()&&e.audio.contentType.includes('codecs="ac-3"')&&(Pe={robustness:Pe.robustness,contentType:'audio/mp4; codecs="ec-3"'}),te.audio.encryptionScheme&&(Pe={robustness:Pe.robustness,contentType:Pe.contentType,encryptionScheme:te.audio.encryptionScheme}),z.push(Pe)),te.video&&(Ne={robustness:te.video.robustness||"",contentType:e.video.contentType},te.video.encryptionScheme&&(Ne={robustness:Ne.robustness,contentType:Ne.contentType,encryptionScheme:te.video.encryptionScheme}),ye.push(Ne)),Ge={initDataTypes:[te.initDataType],distinctiveIdentifier:te.distinctiveIdentifier,persistentState:te.persistentState,sessionTypes:te.sessionTypes},z.length&&(Ge.audioCapabilities=z),ye.length&&(Ge.videoCapabilities=ye),Te=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,de(Ue,3),Te in ry){$e=ry[Te],Ue.u(5);break}return x(Ue,navigator.requestMediaKeySystemAccess(te.keySystem,[Ge]),6);case 6:$e=Ue.h,ry[Te]=$e;case 5:ve(Ue,4);break;case 3:Ce(Ue);case 4:$e&&(t.supported=!0,t.keySystemAccess=$e);case 2:return Ue.return(t)}})}Eo.MediaCapabilities=jp,jp.install=f2;var d2=null;jp.originalMcap=d2;var ry={};jp.memoizedMediaKeySystemAccessRequests_=ry;var iy={};jp.memoizedCanDisplayTypeRequests_=iy,Yo(f2,-1);function h2(){}function p2(){var e=Es();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(g2(),uG()):15>=e&&g2():(ku()||Lu()||Yr("Tizen 4"))&&cG()),(p.MediaSource||p.ManagedMediaSource)&&lG(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&fG()}function g2(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Qe.apply(0,arguments));return t.abort=function(){},t}}function uG(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function lG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Df(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Df(n)!="mp2t"&&t(n)}}}function cG(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ya(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Ya(n)!="opus"&&t(n)}}}function fG(){var e=MediaSource.isTypeSupported;oa()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(d){return d.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(d){return d.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}Eo.MediaSource=h2,h2.install=p2,Yo(p2);function m2(){}function v2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?dG():p.orientation!=null&&hG())}function dG(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function hG(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new oy;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}Eo.Orientation=m2,m2.install=v2;function oy(){Sr.call(this),this.type="",this.angle=0}Y(oy,Sr),oy.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},oy.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Yo(v2);function b1(){}var C1,R1,x1,N1,M1,D1;function pG(e,t){try{var n=new ay(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function gG(e){var t=this.mediaKeys;return t&&t!=e&&y2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?y2(e,this):Promise.resolve()}function mG(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ka(e.subarray(4),!0),e=za(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ti(e),this.dispatchEvent(t)}Eo.PatchedMediaKeysApple=b1,b1.uninstall=function(){C1&&(C1=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",R1),HTMLMediaElement.prototype.setMediaKeys=x1,p.MediaKeys=N1,p.MediaKeySystemAccess=M1,navigator.requestMediaKeySystemAccess=D1,R1=D1=x1=M1=N1=null,p.shakaMediaKeysPolyfill=!1)},b1.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(C1=!0,R1=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),x1=HTMLMediaElement.prototype.setMediaKeys,N1=p.MediaKeys,M1=p.MediaKeySystemAccess,D1=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=gG,p.MediaKeys=Zp,p.MediaKeySystemAccess=ay,navigator.requestMediaKeySystemAccess=pG,p.shakaMediaKeysPolyfill=!0)};function ay(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),d=c.next();!d.done;d=c.next())d=d.value,d.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,d.contentType.split(";")[0])&&(t.audioCapabilities.push(d),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),d=n.next();!d.done;d=n.next())c=d.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}ay.prototype.createMediaKeys=function(){var e=new Zp(this.keySystem);return Promise.resolve(e)},ay.prototype.getConfiguration=function(){return this.g};function Zp(e){this.h=new WebKitMediaKeys(e),this.g=new Et}Zp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new P1(this.h)},Zp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function y2(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",mG);try{return td(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Zp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function P1(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Et,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new E2}Y(P1,Sr),g=P1.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var r=this.l.createSession("video/mp4",Qn(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Ti(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(sy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:sy(n,"output-not-allowed");break;default:sy(n,"internal-error")}}),sy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function sy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function E2(){this.size=0,this.g=void 0}g=E2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function _2(){}function T2(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=vG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=yG,p.MediaKeys=uy,p.MediaKeySystemAccess=O1,p.shakaMediaKeysPolyfill=!0)}function vG(){return Promise.reject(Error("The key system specified is not supported."))}function yG(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Eo.PatchedMediaKeysNop=_2,_2.install=T2;function uy(){throw new TypeError("Illegal constructor.")}uy.prototype.createSession=function(){},uy.prototype.setServerCertificate=function(){},uy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function O1(){throw this.keySystem="",new TypeError("Illegal constructor.")}O1.prototype.getConfiguration=function(){},O1.prototype.createMediaKeys=function(){},Yo(T2,-10);function S2(){}function w2(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)B1="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=EG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=_G,p.MediaKeys=Gp,p.MediaKeySystemAccess=ly,p.shakaMediaKeysPolyfill=!0}}function L1(e){var t=B1;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function EG(e,t){try{var n=new ly(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function _G(e){var t=this.mediaKeys;return t&&t!=e&&A2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&A2(e,this),Promise.resolve()}Eo.PatchedMediaKeysWebkit=S2,S2.install=w2;function ly(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var d={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType.split(";")[0],this.g)&&(d.audioCapabilities.push(A),r=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),A=E.next();!A.done;A=E.next())A=A.value,A.contentType&&(h=!0,u.canPlayType(A.contentType,this.g)&&(d.videoCapabilities.push(A),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(d.persistentState="required",d.sessionTypes=["persistent-license"]):r=!1),r){this.h=d;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}ly.prototype.createMediaKeys=function(){var e=new Gp(this.g);return Promise.resolve(e)},ly.prototype.getConfiguration=function(){return this.h};function Gp(e){this.l=e,this.h=null,this.g=new Et,this.i=[],this.j=new Map}function A2(e,t){e.h=t,e.g.ib();var n=B1;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ti(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=k1(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Wn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=k1(e,r.sessionId))&&(cy(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.g.D(t,n+"keyerror",function(r){var u=k1(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),d=r.errorCode;d.systemCode=r.systemCode,c.errorCode=d,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?cy(u,"output-restricted"):c==1?cy(u,"expired"):cy(u,"internal-error"))}}))}Gp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new F1(t,this.l,e),this.i.push(e),e},Gp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Gp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function k1(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function F1(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new b2}Y(F1,Sr);function I2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Qn(za("LOAD_SESSION|"+n));else{var u=za("PERSISTENT|");r=li(u,t)}else r=Qn(t)}catch(d){return Promise.reject(d)}e.h=new Rr;var c=L1("generateKeyRequest");try{e.j[c](e.i,r)}catch(d){if(d.name!="InvalidStateError")return e.h=null,Promise.reject(d);new pr(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function U1(e,t,n){if(e.g)e.g.then(function(){return U1(e,t,n)}).catch(function(){return U1(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Vr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Ho(u.keys[0].k),u=Ho(u.keys[0].kid)}else r=Qn(n),u=null;var c=L1("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(d){e.g.reject(d),e.g=null}}}function cy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=F1.prototype,g.generateRequest=function(e,t){return I2(this,t,null)},g.load=function(e){return this.l=="persistent-license"?I2(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return U1(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=L1("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function b2(){this.size=0,this.g=void 0}g=b2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,Le.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=Le.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var B1="";Yo(w2);function C2(){}function R2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=SG,Object.defineProperty(e,"disablePictureInPicture",{get:AG,set:IG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=wG,document.addEventListener("webkitpresentationmodechanged",TG,!0))}}function TG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function SG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function wG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function AG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function IG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Eo.PiPWebkit=C2,C2.install=R2,Yo(R2);function x2(){}function N2(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=bG))}function bG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Eo.RandomUUID=x2,x2.install=N2,Yo(N2);function M2(){}function D2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:CG})}function CG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Eo.Symbol=M2,M2.install=D2,Yo(D2);function P2(){}function O2(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Eo.VideoPlayPromise=P2,P2.install=O2,Yo(O2);function L2(){}function k2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||oa()&&fu()===38)&&(e.getVideoPlaybackQuality=RG)}}function RG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Eo.VideoPlaybackQuality=L2,L2.install=k2,Yo(k2);function F2(){}function U2(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=j1;else if(t==6)e=xG;else{try{var n=!!j1(1,2,"")}catch(r){n=!1}n&&(e=j1)}e&&(p.VTTCue=function(r,u,c){return e(r,u,c)})}}function j1(e,t,n){return new p.TextTrackCue(e,t,n)}function xG(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Eo.VTTCue=F2,F2.install=U2,Yo(U2);function Ma(){}Ma.prototype.parseInit=function(){},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e,t){var n=null,r=[];e=Vr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=NG.exec(u))){var c=MG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new Cn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},ne("shaka.text.LrcTextParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit;var NG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,MG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new Ma};function va(){}va.prototype.parseInit=function(){},va.prototype.setSequenceMode=function(){},va.prototype.setManifestType=function(){},va.prototype.parseMedia=function(e,t,n){var r=Vr(e);if(e=[],r=="")return e;var u=Ul(r,"tt");if(!u)throw new pt(2,2,2005,"Failed to parse TTML.");if(r=Ra(u,"body")[0],!r)return[];var c=ca(u,qp,"frameRate"),d=ca(u,qp,"subFrameRate"),h=ca(u,qp,"frameRateMultiplier"),E=ca(u,qp,"tickRate"),A=ca(u,qp,"cellResolution"),k=u.attributes["xml:space"]||"default",G=ca(u,hy,"extent");if(k!="default"&&k!="preserve")throw new pt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new OG(c,d,h,E),A=A&&(A=/^(\d+) (\d+)$/.exec(A))?{Sb:parseInt(A[1],10),rows:parseInt(A[2],10)}:null,d=(d=Ra(u,"metadata")[0])?d.children:[],h=Ra(u,"style"),u=Ra(u,"region"),E=[];for(var te=m(u),z=te.next();!z.done;z=te.next()){var ye=z.value;z=new Br;var Pe=ye.attributes["xml:id"];if(Pe){z.id=Pe;var Ne=null;G&&(Ne=H1.exec(G)||K1.exec(G)),Pe=Ne?Number(Ne[1]):null,Ne=Ne?Number(Ne[2]):null;var Ge,Te=fy(ye,h,"extent");if(Te){var $e=(Ge=H1.exec(Te))||K1.exec(Te);$e!=null&&(z.width=Number($e[1]),z.height=Number($e[2]),Ge||(Pe!=null&&(z.width=100*z.width/Pe),Ne!=null&&(z.height=100*z.height/Ne)),z.widthUnits=Ge||Pe!=null?qr:0,z.heightUnits=Ge||Ne!=null?qr:0)}(ye=fy(ye,h,"origin"))&&($e=(Ge=H1.exec(ye))||K1.exec(ye),$e!=null&&(z.viewportAnchorX=Number($e[1]),z.viewportAnchorY=Number($e[2]),Ge?Te||(z.width=100-z.viewportAnchorX,z.widthUnits=qr,z.height=100-z.viewportAnchorY,z.heightUnits=qr):(Ne!=null&&(z.viewportAnchorY=100*z.viewportAnchorY/Ne),Pe!=null&&(z.viewportAnchorX=100*z.viewportAnchorX/Pe)),z.viewportAnchorUnits=Ge||Pe!=null?qr:0))}else z=null;z&&E.push(z)}if(Wr(r,"p").length)throw new pt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m(Wr(r,"div")),te=G.next();!te.done;te=G.next())if(Wr(te.value,"span").length)throw new pt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=B2(r,t,c,d,h,u,E,k,A,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function B2(e,t,n,r,u,c,d,h,E,A,k,G){var te=A;if(Yf(e)){if(!k)return null;var z={tagName:"span",children:[Ci(e)],attributes:{},parent:null}}else z=e;for(var ye=null,Pe=m(W2),Ne=Pe.next();!Ne.done&&!(ye=dy(z,"backgroundImage",r,"#",Ne.value)[0]);Ne=Pe.next());Pe=null;var Ge=ca(z,W2,"backgroundImage");if(G&&Ge&&!Ge.startsWith("#")&&(Ne=new si(G),Ge=new si(Ge),(Ne=Ne.resolve(Ge).toString())&&(Pe=Ne)),(e.tagName=="p"||ye||Pe)&&(k=!0),e=k,Ne=(z.attributes["xml:space"]||(h?"default":"preserve"))=="default",Ge=z.children.every(Yf),h=[],!Ge)for(var Te=m(z.children),$e=Te.next();!$e.done;$e=Te.next())($e=B2($e.value,t,n,r,u,c,d,Ne,E,z,k,G))&&h.push($e);if(r=A!=null,G=Ci(z),G=z.children.length&&G&&/\S/.test(G),$e=z.attributes.begin||z.attributes.end||z.attributes.dur,!($e||G||z.tagName=="br"||h.length!=0||r&&!Ne))return null;for(Te=G2(z,n),G=Te.start,Te=Te.end;te&&te.tagName&&te.tagName!="tt";)Te=PG(te,n,G,Te),G=Te.start,Te=Te.end,te=te.parent;if(G==null&&(G=0),G+=t.periodStart,Te=Te==null?1/0:Te+t.periodStart,G=Math.max(G,t.segmentStart),Te=Math.min(Te,t.segmentEnd),!$e&&0<h.length)for(G=1/0,Te=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Te=Math.max(Te,n.endTime);if(z.tagName=="br")return u=new Cn(G,Te,""),u.lineBreak=!0,u;if(t="",Ge&&(t=bo(Ci(z)||""),Ne&&(t=t.replace(/\s+/g," "))),t=new Cn(G,Te,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=dy(z,"region",c,"")[0],z.attributes.region&&E&&E.attributes["xml:id"]){var Ue=E.attributes["xml:id"];t.region=d.filter(function(gt){return gt.id==Ue})[0]}return d=E,A&&r&&!z.attributes.region&&!z.attributes.style&&(d=dy(A,"region",c,"")[0]),DG(t,z,d,ye,Pe,u,e,h.length==0),t}function DG(e,t,n,r,u,c,d,h){if(d=d||h,_o(t,n,c,"direction",d)=="rtl"&&(e.direction="rtl"),h=_o(t,n,c,"writingMode",d),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Vn),(h=_o(t,n,c,"textAlign",!0))?(e.positionAlign=FG[h],e.lineAlign=kG[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=_o(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=_o(t,n,c,"color",d))&&(e.color=h),(h=_o(t,n,c,"backgroundColor",d))&&(e.backgroundColor=h),(h=_o(t,n,c,"border",d))&&(e.border=h),h=_o(t,n,c,"fontFamily",d))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=_o(t,n,c,"fontWeight",d))&&h=="bold"&&(e.fontWeight=700),h=_o(t,n,c,"wrapOption",d),e.wrapLine=!(h&&h=="noWrap"),(h=_o(t,n,c,"lineHeight",d))&&h.match(Nd)&&(e.lineHeight=h),(h=_o(t,n,c,"fontSize",d))&&(h.match(Nd)||h.match(LG))&&(e.fontSize=h),(h=_o(t,n,c,"fontStyle",d))&&(e.fontStyle=no[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=Ci(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=_o(t,n,c,"textOutline",d))&&(r=r.split(" "),r[0].match(Nd)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(Nd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=_o(t,n,c,"letterSpacing",d))&&r.match(Nd)&&(e.letterSpacing=r),(r=_o(t,n,c,"linePadding",d))&&r.match(Nd)&&(e.linePadding=r),(r=_o(t,n,c,"opacity",d))&&(e.opacity=parseFloat(r)),(r=fy(n,c,"textDecoration"))&&j2(e,r),(r=Z1(t,c,"textDecoration"))&&j2(e,r),(r=_o(t,n,c,"textCombine",d))&&(e.textCombineUpright=r),_o(t,n,c,"ruby",d)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function j2(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&mn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&mn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&mn(e.textDecoration,"overline")}}function _o(e,t,n,r,u){return u=u===void 0?!0:u,(e=Z1(e,n,r))?e:u?fy(t,n,r):null}function fy(e,t,n){if(!e)return null;var r=ca(e,hy,n);return r||Z2(e,t,n)}function Z1(e,t,n){var r=ca(e,hy,n);return r||Z2(e,t,n)}function Z2(e,t,n){e=dy(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=Eu(e[u],"urn:ebu:tt:style",n);c||(c=ca(e[u],hy,n)),c||(c=Z1(e[u],t,n)),c&&(r=c)}return r}function dy(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var d=e;for(e=null;!e&&!(e=u?Eu(d,u,t):d.attributes[t])&&(d=d.parent,d););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),d=e.next();!d.done;d=e.next())if(d=d.value,r+d.attributes["xml:id"]==u){c.push(d);break}}return c}function PG(e,t,n,r){return e=G2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function G2(e,t){var n=G1(e.attributes.begin,t),r=G1(e.attributes.end,t);return e=G1(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function G1(e,t){var n=null;if(q2.test(e)){e=q2.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(H2.test(e))n=q1(H2,e);else if(K2.test(e))n=q1(K2,e);else if(V2.test(e))e=V2.exec(e),n=Number(e[1])/t.frameRate;else if(z2.test(e))e=z2.exec(e),n=Number(e[1])/t.g;else if(Y2.test(e))n=q1(Y2,e);else if(e)throw new pt(2,2,2001,"Could not parse cue time range in TTML");return n}function q1(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}ne("shaka.text.TtmlTextParser",va),va.prototype.parseMedia=va.prototype.parseMedia,va.prototype.setManifestType=va.prototype.setManifestType,va.prototype.setSequenceMode=va.prototype.setSequenceMode,va.prototype.parseInit=va.prototype.parseInit;function OG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var H1=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,LG=/^(\d{1,2}(?:\.\d+)?|100)%$/,Nd=/^(\d+px|\d+em|\d*\.?\d+c)$/,K1=/^(\d+)px (\d+)px$/,q2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,H2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,K2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,V2=/^(\d*(?:\.\d*)?)f$/,z2=/^(\d*(?:\.\d*)?)t$/,Y2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),kG={left:bn,center:"center",right:"end",start:bn,end:"end"},FG={left:"line-left",center:"center",right:"line-right"},qp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],hy=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],W2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new va};function Lo(){this.g=new va}Lo.prototype.parseInit=function(e){var t=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",vu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new pt(2,2,2007)},Lo.prototype.setSequenceMode=function(){},Lo.prototype.setManifestType=function(){},Lo.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[];if(new kr().box("mdat",Xu(function(d){u=!0,c=c.concat(r.g.parseMedia(d,t,n))})).parse(e,!1),!u)throw new pt(2,2,2007);return c},ne("shaka.text.Mp4TtmlParser",Lo),Lo.prototype.parseMedia=Lo.prototype.parseMedia,Lo.prototype.setManifestType=Lo.prototype.setManifestType,Lo.prototype.setSequenceMode=Lo.prototype.setSequenceMode,Lo.prototype.parseInit=Lo.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Lo},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Lo};function ko(){this.h=!1,this.g="UNKNOWN"}ko.prototype.parseInit=function(){},ko.prototype.setSequenceMode=function(e){this.h=e},ko.prototype.setManifestType=function(e){this.g=e},ko.prototype.parseMedia=function(e,t){e=Vr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new pt(2,2,2e3);if(e=py(new Kc(e[1])),e==null)throw new pt(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=m(n[0].split("\n"));for(var u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new Kc(u);var c=new Br;Vc(u),Ad(u);for(var d=Vc(u);d;){var h=c,E=d;(d=/^id=(.*)$/.exec(E))?h.id=d[1]:(d=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(d[1]):(d=/^lines=(\d+)$/.exec(E))?(h.height=Number(d[1]),h.heightUnits=2):(d=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(d[1]),h.regionAnchorY=Number(d[2])):(d=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(d[1]),h.viewportAnchorY=Number(d[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),Ad(u),d=Vc(u)}t.push(c)}for(r=new Map,$2(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],d=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),d=h.length-1),d!=-1&&(h[d].push(c[E]),c[E].includes("}")&&(d=-1));for(h=m(h),d=h.next();!d.done;d=h.next()){var A=d.value;d="global",(E=A[0].match(/\((.*)\)/))&&(d=E.pop()),E=A.slice(1,-1),A[0].includes("}")&&(A=/\{(.*?)\}/.exec(A[0]))&&(E=A[1].split(";")),(A=r.get(d))||(A=new Cn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var te=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(te){var z=te[2].trim().replace(";","");switch(te[1].trim()){case"background-color":case"background":k=!0,A.backgroundColor=z;break;case"color":k=!0,A.color=z;break;case"font-family":k=!0,A.fontFamily=z;break;case"font-size":k=!0,A.fontSize=z;break;case"font-weight":(700<=parseInt(z,10)||z=="bold")&&(k=!0,A.fontWeight=700);break;case"font-style":switch(z){case"normal":k=!0,A.fontStyle=Yi;break;case"italic":k=!0,A.fontStyle="italic";break;case"oblique":k=!0,A.fontStyle="oblique"}break;case"opacity":k=!0,A.opacity=parseFloat(z);break;case"text-combine-upright":k=!0,A.textCombineUpright=z;break;case"text-shadow":k=!0,A.textShadow=z;break;case"white-space":k=!0,A.wrapLine=z!="noWrap"}}}k&&r.set(d,A)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),d=new Kc(c[0]),E=py(d),G=ql(d,/[ \t]+--\x3e[ \t]+/g),A=py(d),E==null||G==null||A==null)He("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,A+=k,c=c.slice(1).join("\n").trim(),r.has("global")?(k=r.get("global").clone(),k.startTime=E,k.endTime=A,k.payload=""):k=new Cn(E,A,""),Ad(d),E=Vc(d);E;)J2(k,E,t),Ad(d),E=Vc(d);X2(c,k,r),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function $2(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new Cn(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(br)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new Cn(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function X2(e,t,n){if(e.includes("<")){n.size===0&&$2(n);var r=e;e=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(eD)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e=r;e:{c=e,u=[];var d=-1;e="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){r=!0;var A=null;if(u.length&&(A=u[u.length-1]),A){if(A===E)e+="/"+E+">";else{if(!A.startsWith("v")){e+=c[h];continue}e+="/"+A+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(d=h+1,c[d]!="v"&&(d=-1)):c[h]===">"&&0<d&&(u.push(c.substr(d,h-d)),d=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,d=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+d+">"),e=e.replace("</"+u+">","</"+d+">"),r||(e+="</"+d+">")}e=UG(e);try{var k=Ul("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())Q2(e.value,t,n);else t.payload=bo(e);else t.payload=bo(e)}else t.payload=bo(e)}function UG(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Hp(e,t){return e&&0<e.length?e:t}function Q2(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Br,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var d=c=c.value;if(d.startsWith(".voice-")){var h=d.split("-").pop();d='v[voice="'+h+'"]',n.has(d)||(d="v[voice="+h+"]")}switch(n.has(d)&&(d=n.get(d))&&(r.backgroundColor=Hp(d.backgroundColor,r.backgroundColor),r.color=Hp(d.color,r.color),r.fontFamily=Hp(d.fontFamily,r.fontFamily),r.fontSize=Hp(d.fontSize,r.fontSize),r.textShadow=Hp(d.textShadow,r.textShadow),r.fontWeight=d.fontWeight,r.fontStyle=d.fontStyle,r.opacity=d.opacity,r.rubyTag=d.rubyTag,r.textCombineUpright=d.textCombineUpright,r.wrapLine=d.wrapLine),c){case"br":r=Rn(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=py(new Kc(c)))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,Yf(e)||u.length==1&&Yf(u[0]))for(n=Ci(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=bo(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())Q2(e.value,r,n)}function J2(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(r=/^region:(.*)$/.exec(t))?(t=BG(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=cn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function BG(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function py(e){if(e=ql(e,eD),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ne("shaka.text.VttTextParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit;var eD=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new ko},ji['text/vtt; codecs="vtt"']=function(){return new ko},ji['text/vtt; codecs="wvtt"']=function(){return new ko};function Da(){this.g=null}Da.prototype.parseInit=function(e){var t=this,n=!1;if(new kr().box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(r){r=It(r.reader,r.version),t.g=r.timescale}).box("minf",yr).box("stbl",yr).O("stsd",vu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new pt(2,2,2008);if(!n)throw new pt(2,2,2008)},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new pt(2,2,2008);var n=0,r=[],u,c=[],d=!1,h=!1,E=!1,A=null;if(new kr().box("moof",yr).box("traf",yr).O("tfdt",function($e){d=!0,n=ir($e.reader,$e.version).baseMediaDecodeTime}).O("tfhd",function($e){A=rr($e.reader,$e.flags).Wf}).O("trun",function($e){h=!0,r=$t($e.reader,$e.version,$e.flags).vg}).box("mdat",Xu(function($e){E=!0,u=$e})).parse(e,!1),!E&&!d&&!h)throw new pt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(r),te=G.next();!te.done;te=G.next()){te=te.value;var z=te.wf||A,ye=te.he?n+te.he:e;e=ye+(z||0);var Pe=0;do{var Ne=k.M();Pe+=Ne;var Ge=k.M(),Te=null;Vf(Ge)=="vttc"?8<Ne&&(Te=k.sb(Ne-8)):k.skip(Ne-8),z&&Te&&(Ne=jG(Te,t.periodStart+ye/this.g,t.periodStart+e/this.g),c.push(Ne))}while(te.sampleSize&&Pe<te.sampleSize)}return c.filter(ju)};function jG(e,t,n){var r,u,c;return new kr().box("payl",Xu(function(d){r=Vr(d)})).box("iden",Xu(function(d){u=Vr(d)})).box("sttg",Xu(function(d){c=Vr(d)})).parse(e),r?ZG(r,u,c,t,n):null}function ZG(e,t,n,r,u){if(r=new Cn(r,u,""),X2(e,r,new Map),t&&(r.id=t),n)for(e=new Kc(n),t=Vc(e);t;)J2(r,t,[]),Ad(e),t=Vc(e);return r}ne("shaka.text.Mp4VttParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new Da};function Pa(){}Pa.prototype.parseInit=function(){},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e){var t=Vr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new Kc(n[0]),u=tD(r),c=ql(r,/,/g);if(r=tD(r),u==null||c==null||r==null)throw new pt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Cn(u,r,n.slice(1).join("\n").trim()))}return e};function tD(e){if(e=ql(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ne("shaka.text.SbvTextParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Pa};function ya(){this.g=new ko}ya.prototype.parseInit=function(){},ya.prototype.setSequenceMode=function(){},ya.prototype.setManifestType=function(){},ya.prototype.parseMedia=function(e,t,n){return e=Vr(e),e=nD(e),e=Qn(za(e)),this.g.parseMedia(e,t,n)};function nD(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}ne("shaka.text.SrtTextParser",ya),ya.srt2webvtt=nD,ya.prototype.parseMedia=ya.prototype.parseMedia,ya.prototype.setManifestType=ya.prototype.setManifestType,ya.prototype.setSequenceMode=ya.prototype.setSequenceMode,ya.prototype.parseInit=ya.prototype.parseInit,ji["text/srt"]=function(){return new ya};function Oa(){}Oa.prototype.parseInit=function(){},Oa.prototype.setSequenceMode=function(){},Oa.prototype.setManifestType=function(){},Oa.prototype.parseMedia=function(e){var t="",n="";e=Vr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next()){var u=qG.exec(r.value);u&&(r=u[1],u=u[2],r=="V4 Styles"||r=="V4+ Styles"?t=u:r=="Events"&&(n=u))}e=[],r=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=oD.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")r=c.split(gy);else if(u=="Style"){u=c.split(gy),c={};for(var d=0;d<r.length&&d<u.length;d++)c[r[d]]=u[d];e.push(c)}}for(r=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(d=oD.exec(c))){if(c=d[1].trim(),d=d[2].trim(),c=="Format")t=d.split(gy);else if(c=="Dialogue"){d=d.split(gy),c={};for(var h=0;h<t.length&&h<d.length;h++)c[t[h]]=d[h];h=iD(c.Start);var E=iD(c.End);d=new Cn(h,E,d.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(A){return function(k){return k.Name==A.re}}(u)))&&GG(d,c),r.push(d)}}return r};function GG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=rD(n))&&(e.color=n),(n=t.BackColour)&&(n=rD(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function rD(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function iD(e){return e=HG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ne("shaka.text.SsaTextParser",Oa),Oa.prototype.parseMedia=Oa.prototype.parseMedia,Oa.prototype.setManifestType=Oa.prototype.setManifestType,Oa.prototype.setSequenceMode=Oa.prototype.setSequenceMode,Oa.prototype.parseInit=Oa.prototype.parseInit;var qG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,oD=/^\s*([^:]+):\s*(.*)/,gy=/\s*,\s*/,HG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new Oa};function aD(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function sD(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,Ea:"mp4a.40."+u}}function uD(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function KG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function La(e){this.i=e,this.h=0,this.g=new Map}g=La.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Do(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){for(var u=Qn(e),c=xn(u),d=c.length;d<u.length&&!uD(u,d);d++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=sD(u,d),!n)return Promise.reject(new pt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];d<u.length;){var h=aD(u,d);if(!h)return Promise.reject(new pt(2,3,3018));var E=h.Qd+h.U;d+E<=u.length&&c.push({data:u.subarray(d+h.Qd,d+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),d+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Op(e),this.h++,t=li(r,t),Promise.resolve(t)},ne("shaka.transmuxer.AacTransmuxer",La),La.prototype.transmux=La.prototype.transmux,La.prototype.getOriginalMimeType=La.prototype.getOriginalMimeType,La.prototype.convertCodecs=La.prototype.convertCodecs,La.prototype.isSupported=La.prototype.isSupported,La.prototype.destroy=La.prototype.destroy,wo("audio/aac",function(){return new La("audio/aac")},bi);function lD(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,d=0;c===2?d+=2:(c&1&&c!==1&&(d+=2),c&4&&(d+=2)),d=(e[t+6]<<8|e[t+7])>>12-d&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|d<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+d,ga:e,U:u}}function VG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var d=Math.min(r,8),h=8-d;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<d|u:u,t+=1,r-=d}if(16>n)return!0}return!1}function rs(e){this.i=e,this.h=0,this.g=new Map}g=rs.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&!VG(e,c);c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=lD(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Op(e),this.h++,t=li(r,t),Promise.resolve(t)},ne("shaka.transmuxer.Ac3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,wo("audio/ac3",function(){return new rs("audio/ac3")},bi);function cD(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Nn(e.subarray(t+2));Gn(n,2),Gn(n,3);var r=bt(n,11)+1<<1,u=bt(n,2);if(u==3){u=bt(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=bt(n,2);var d=bt(n,3),h=bt(n,1);return n=bt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|d<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][d]+h,ga:e,U:r})}function is(e){this.i=e,this.h=0,this.g=new Map}g=is.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var d=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(A){return A.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=cD(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(d*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(e),this.g.set(t.id,r)),t=Op(e),this.h++,t=li(r,t),Promise.resolve(t)},ne("shaka.transmuxer.Ec3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,wo("audio/ec3",function(){return new is("audio/ec3")},bi);function zG(e){if(!e.length)return null;var t=e.find(function(Pe){return Pe.type==7});if(e=e.find(function(Pe){return Pe.type==8}),!t||!e)return null;var n=new Nn(t.data),r=tt(n);if(tt(n),tt(n),En(n),WG.includes(r)&&(r=Lt(n),r===3&&Gn(n,1),En(n),En(n),Gn(n,1),ut(n))){r=r!==3?8:12;for(var u=0;u<r;u++)ut(n)&&(6>u?qt(n,16):qt(n,64))}if(En(n),r=Lt(n),r===0)Lt(n);else if(r===1)for(Gn(n,1),En(n),En(n),r=Lt(n),u=0;u<r;u++)En(n);En(n),Gn(n,1);var c=Lt(n),d=Lt(n),h=bt(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,A=0,k=0,G=0;if(ut(n)&&(E=Lt(n),A=Lt(n),k=Lt(n),G=Lt(n)),u=r=1,ut(n)&&ut(n)){var te=tt(n),z=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ye=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<te&&16>=te?(r=z[te-1],u=ye[te-1]):te===255&&(r=bt(n,16),u=bt(n,16))}return n=(2-h)*(d+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*A,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:r,ya:u}}function YG(e){var t=!1,n=[],r=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var d=!1;switch(c.type){case 1:d=u=!0;var h=c.data;r&&4<h.length&&(h=Ve(new Nn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=d=u=!0;break;case 6:d=!0;break;case 7:d=!0;break;case 8:d=!0;break;case 9:u=d=!0;break;case 12:d=!0;break;default:d=!1}u&&d&&(d=c.fullData.byteLength,h=new Uint8Array(4),h[0]=d>>24&255,h[1]=d>>16&255,h[2]=d>>8&255,h[3]=d&255,n.push(h),n.push(c.fullData))}return n.length?{data:li.apply(Pi,T(n)),jd:t}:null}var WG=[100,110,122,244,44,83,86,118,128,138,139,134];function $G(e){if(!e.length)return null;var t=e.find(function(d){return d.type==32}),n=e.find(function(d){return d.type==33}),r=e.find(function(d){return d.type==34});if(!t||!n||!r)return null;var u=XG(t.fullData);e=QG(n.fullData);var c=JG(r.fullData);return t=e9(t.fullData,n.fullData,r.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function XG(e){var t=new Nn(e,!0);return tt(t),tt(t),bt(t,4),bt(t,2),bt(t,6),e=bt(t,3),t=ut(t),{jf:e+1,Gf:t}}function QG(e){e=new Nn(e,!0),tt(e),tt(e);var t=0,n=0,r=0,u=0;bt(e,4);var c=bt(e,3);ut(e);for(var d=bt(e,2),h=bt(e,1),E=bt(e,5),A=tt(e),k=tt(e),G=tt(e),te=tt(e),z=tt(e),ye=tt(e),Pe=tt(e),Ne=tt(e),Ge=tt(e),Te=tt(e),$e=tt(e),Ue=[],gt=[],Rt=0;Rt<c;Rt++)Ue.push(ut(e)),gt.push(ut(e));if(0<c)for(Rt=c;8>Rt;Rt++)bt(e,2);for(Rt=0;Rt<c;Rt++)Ue[Rt]&&bt(e,88),gt[Rt]&&tt(e);Lt(e),Ue=Lt(e),Ue==3&&bt(e,1),gt=Lt(e),Rt=Lt(e),ut(e)&&(t+=Lt(e),n+=Lt(e),r+=Lt(e),u+=Lt(e));var Ht=Lt(e),Ut=Lt(e),yt=Lt(e);if(ut(e))for(var jt=0;jt<=c;jt++)Lt(e),Lt(e),Lt(e);else Lt(e),Lt(e),Lt(e);if(Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),ut(e)&&ut(e))for(jt=0;4>jt;jt++)for(var ln=0;ln<(jt===3?2:6);ln++)if(ut(e)){var gn=Math.min(64,1<<4+(jt<<1));1<jt&&On(e);for(var Ln=0;Ln<gn;Ln++)On(e)}else Lt(e);for(ut(e),ut(e),ut(e)&&(tt(e),Lt(e),Lt(e),ut(e)),jt=Lt(e),gn=ln=0;gn<jt;gn++)if(Ln=!1,gn!==0&&(Ln=ut(e)),Ln){gn===jt&&Lt(e),ut(e),Lt(e);for(var Mn=Ln=0;Mn<=ln;Mn++){var qn=ut(e),Yn=!1;qn||(Yn=ut(e)),(qn||Yn)&&Ln++}ln=Ln}else{for(Mn=Lt(e),Ln=Lt(e),ln=Mn+Ln,qn=0;qn<Mn;qn++)Lt(e),ut(e);for(Mn=0;Mn<Ln;Mn++)Lt(e),ut(e)}if(ut(e))for(jt=Lt(e),ln=0;ln<jt;ln++){for(gn=0;gn<yt+4;gn++)bt(e,1);bt(e,1)}if(jt=yt=1,ln=0,ut(e),ut(e),ut(e)){if(ut(e)&&(gn=tt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<gn&&16>=gn?(yt=Ln[gn-1],jt=Mn[gn-1]):gn===255&&(yt=bt(e,16),jt=bt(e,16))),ut(e)&&ut(e),ut(e)&&(bt(e,3),ut(e),ut(e)&&(tt(e),tt(e),tt(e))),ut(e)&&(Lt(e),Lt(e)),ut(e),ut(e),ut(e),(gn=ut(e))&&(Lt(e),Lt(e),Lt(e),Lt(e)),ut(e)&&(bt(e,32),bt(e,32),ut(e)&&Lt(e),ut(e)))for(Mn=!1,gn=ut(e),Ln=ut(e),(gn||Ln)&&((Mn=ut(e))&&(tt(e),bt(e,5),ut(e),bt(e,5)),bt(e,4),bt(e,4),Mn&&bt(e,4),bt(e,5),bt(e,5),bt(e,5)),qn=0;qn<=c;qn++){var Kn=!0;Yn=1,ut(e)||(Kn=ut(e));var Nr=!1;if(Kn?Lt(e):Nr=ut(e),Nr||(Yn=Lt(e)+1),gn){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));ut(e)}if(Ln){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));ut(e)}}ut(e)&&(ut(e),ut(e),ut(e),ln=Lt(e),Lt(e),Lt(e),Lt(e),Lt(e))}return{Ke:$e,Qe:d,Re:h,Pe:E,Le:A,Me:k,Ne:G,Oe:te,Ee:z,Fe:ye,Ge:Pe,He:Ne,Ie:Ge,Je:Te,be:ln,Be:0,Ae:Ue,ze:Ht,ye:Ut,width:gt-(t+n)*(Ue===1||Ue===2?2:1),height:Rt-(r+u)*(Ue===1?2:1),pi:yt,oi:jt}}function JG(e){var t=new Nn(e,!0);tt(t),tt(t),Lt(t),Lt(t),ut(t),ut(t),bt(t,3),ut(t),ut(t),Lt(t),Lt(t),On(t),ut(t),ut(t),ut(t)&&Lt(t),On(t),On(t),ut(t),ut(t),ut(t),ut(t),e=ut(t),t=ut(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function e9(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.Qe&3)<<6|(r.Re?1:0)<<5|r.Pe&31,u[2]=r.Le,u[3]=r.Me,u[4]=r.Ne,u[5]=r.Oe,u[6]=r.Ee,u[7]=r.Fe,u[8]=r.Ge,u[9]=r.He,u[10]=r.Ie,u[11]=r.Je,u[12]=r.Ke,u[13]=240|(r.be&3840)>>8,u[14]=r.be&255,u[15]=252|r.pf&3,u[16]=252|r.Ae&3,u[17]=248|r.ze&7,u[18]=248|r.ye&7,u[19]=0,u[20]=0,u[21]=(r.Be&3)<<6|(r.jf&7)<<3|(r.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function my(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var d=e[t+3]>>6;u=1e3*t9[14*(n===3?3-r:r===3?3:4)+u-1],c=n9[3*(n===3?0:n===2?1:2)+c],n=r9[n][r];var h=i9[r],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(A=A?parseInt(A[1],10):0)&&87>=A&&r===2&&224e3<=u&&d===0&&(e[t+3]|=128),{sampleRate:c,channelCount:d===3?1:2,U:E,ni:8*n*h}}return null}function fD(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function dD(e,t){if(t+1<e.length&&fD(e,t)){var n=my(e,t),r=4;return n&&n.U&&(r=n.U),t+=r,t===e.length||t+1<e.length&&fD(e,t)}return!1}var t9=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],n9=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],r9=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],i9=[0,1,1,4];function os(e){this.i=e,this.h=0,this.g=new Map}g=os.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){n=Qn(e);for(var u=xn(n).length;u<n.length&&!dD(n,u);u++);var c;for(e=[];u<n.length;){var d=my(n,u);if(!d)return Promise.reject(new pt(2,3,3018));c||(c=d),u+d.U<=n.length&&e.push({data:n.subarray(u,u+d.U),size:d.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=d.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new bd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Cd(c),this.g.set(t.id,r)),t=Op(c),this.h++,t=li(r,t),Promise.resolve(t)):Promise.reject(new pt(2,3,3018))},ne("shaka.transmuxer.Mp3Transmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,wo("audio/mpeg",function(){return new os("audio/mpeg")},bi);function as(e){this.h=e,this.g=null}g=as.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Do(e).split(","),n=Co("audio",t);return t=Co("video",t),!n||t||ba(n)!="mp3"?!1:Ot(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new Ke,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new pt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(r=my(t,n))?(n+r.U<=t.length&&(u=li(u,t.subarray(n,n+r.U))),n+=r.U):n++;return Promise.resolve(u)},ne("shaka.transmuxer.MpegTsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy,wo("video/mp2t",function(){return new as("video/mp2t")},Al);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function ka(e){this.h=e,(this.g=e1.get("ISOBoxer")())&&o9(this)}function o9(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==a9[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=ka.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new pt(2,3,3020));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var d=u.fetch("tfdt"),h=u.fetch("traf");d===null&&(d=this.g.createFullBox("tfdt",h,c),d.version=1,d.flags=0,d.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),A=u.fetch("tfxd");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var te=u.fetch("saio");if(te===null){te=this.g.createFullBox("saio",h),te.version=0,te.flags=0,te.entry_count=1,te.offset=[0];var z=this.g.createFullBox("saiz",h);if(z.version=0,z.flags=0,z.sample_count=G.sample_count,z.default_sample_info_size=0,z.sample_info_size=[],G.flags&2)for(r=0;r<G.sample_count;r+=1)z.sample_info_size[r]=10+6*G.entry[r].NumberOfEntries;else z.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ye=u.fetch("moof");E.data_offset=ye.getLength()+8;var Pe=u.fetch("saio");Pe!==null&&(Pe.offset[0]=hD(ye,"traf")+hD(h,"senc")+16);var Ne=Qn(u.write());return Promise.resolve(Ne)}catch(Ge){return Ge instanceof pt?Promise.reject(Ge):Promise.reject(new pt(2,3,3022))}};function hD(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}ne("shaka.transmuxer.MssTransmuxer",ka),ka.prototype.transmux=ka.prototype.transmux,ka.prototype.getOriginalMimeType=ka.prototype.getOriginalMimeType,ka.prototype.convertCodecs=ka.prototype.convertCodecs,ka.prototype.isSupported=ka.prototype.isSupported,ka.prototype.destroy=ka.prototype.destroy;var a9=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);wo("mss/audio/mp4",function(){return new ka("mss/audio/mp4")},bi),wo("mss/video/mp4",function(){return new ka("mss/video/mp4")},bi);function ss(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=ss.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Do(n).split(",");return n=Co("audio",r),r=Co("video",r),n&&(n=ba(n),!s9.includes(n))||r&&(n=ba(r),!u9.includes(n))?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Do(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,r,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var d=xn(c),h=d.length;h<c.length;h++)if(dD(c,h))return Promise.reject(new pt(2,3,3018));for(h=d.length;h<c.length;h++)if(uD(c,h))return this.h||(this.h=new La("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new pt(2,3,3018))}this.j?this.j.clearData():this.j=new Ke;var E=this.j.parse(c),A=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var te=[],z=null,ye=[],Pe=E.xc();if(!Pe.length)throw new pt(2,3,3023);for(var Ne=0;Ne<Pe.length;Ne++){var Ge=Pe[Ne],Te=Ge.nalus;ye.push.apply(ye,T(Te));var $e=YG(Te);if($e){z==null&&(z=Ge.dts);var Ue=void 0;Ue=Ne+1<Pe.length?(Pe[Ne+1].dts||0)-(Ge.dts||0):1<Pe.length?(Ge.dts||0)-(Pe[Ne-1].dts||0):9e4*(n.endTime-n.startTime),te.push({data:$e.data,size:$e.data.byteLength,duration:Ue,Ta:Math.round((Ge.pts||0)-(Ge.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:$e.jd?2:1,Wa:$e.jd?0:1}})}}var gt=zG(ye);if(!gt||z==null)throw new pt(2,3,3018);t.height=gt.height,t.width=gt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:gt.oa,xa:gt.xa,ya:gt.ya,data:{jb:this.g,baseMediaDecodeTime:z,Ra:te},stream:t};break;case"hvc":var Rt=[],Ht=null,Ut=[],yt=E.xc();if(!yt.length)throw new pt(2,3,3023);for(var jt=0;jt<yt.length;jt++){var ln=yt[jt],gn=ln.nalus;Ut.push.apply(Ut,T(gn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(gn),Kn=Yn.next();!Kn.done;Kn=Yn.next()){var Nr=Kn.value;switch(Nr.type){case 1:case 0:var fi=qn=!0;break;case 19:case 20:case 21:Ln=fi=qn=!0;break;case 32:fi=!0;break;case 33:fi=!0;break;case 34:fi=!0;break;case 35:qn=fi=!0;break;case 39:case 40:fi=!0;break;default:fi=!1}if(qn&&fi){var Li=Nr.fullData.byteLength,ci=new Uint8Array(4);ci[0]=Li>>24&255,ci[1]=Li>>16&255,ci[2]=Li>>8&255,ci[3]=Li&255,Mn.push(ci),Mn.push(Nr.fullData)}}var gi=Mn.length?{data:li.apply(Pi,T(Mn)),jd:Ln}:null;if(gi){Ht==null&&ln.dts!=null&&(Ht=ln.dts);var Gr=void 0;Gr=jt+1<yt.length?(yt[jt+1].dts||0)-(ln.dts||0):1<yt.length?(ln.dts||0)-(yt[jt-1].dts||0):9e4*(n.endTime-n.startTime),Rt.push({data:gi.data,size:gi.data.byteLength,duration:Gr,Ta:Math.round((ln.pts||0)-(ln.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:gi.jd?2:1,Wa:gi.jd?0:1}})}}var fo=$G(Ut);if(!fo||Ht==null)throw new pt(2,3,3018);t.height=fo.height,t.width=fo.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:fo.oa,xa:fo.xa,ya:fo.ya,data:{jb:this.g,baseMediaDecodeTime:Ht,Ra:Rt},stream:t}}G&&(A.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Fo=[],ai,Ys=null,Wc=m(E.Fb()),$c=Wc.next();!$c.done;$c=Wc.next()){var Md=$c.value,cl=Md.data;if(cl){var Ws=0;if(ai=sD(cl,Ws),!ai)throw new pt(2,3,3018);for(t.audioSamplingRate=ai.sampleRate,t.channelsCount=ai.channelCount,Ys==null&&Md.pts!==null&&(Ys=Md.pts);Ws<cl.length;){var fl=aD(cl,Ws);if(fl){var Vl=fl.Qd+fl.U;Ws+Vl<=cl.length&&Fo.push({data:cl.subarray(Ws+fl.Qd,Ws+Vl),size:fl.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ws+=Vl}else Ws++}}}if(!ai||Ys==null){if(!E.xc().length)throw new pt(2,3,3018);Ys=9e4*n.startTime;var Dd=Co("audio",t.codecs.split(","));if(!Dd||!t.channelsCount||!t.audioSamplingRate)throw new pt(2,3,3018);ai={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:Dd};var Pd=KG(Dd,t.channelsCount);if(!Pd)throw new pt(2,3,3018);for(var yy=Ys+9e4*(n.endTime-n.startTime),Od=Ys;Od<yy;)Fo.push({data:Pd,size:Pd.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Od+=1024/ai.sampleRate*9e4}var zp=ai.sampleRate,Ey=Ys/9e4*zp;G={id:t.id,type:"audio",codecs:ai.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:zp,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:Ey,Ra:Fo},stream:t};break;case"ac3":for(var ws=[],_y=0,z1=new Uint8Array([]),Ty=null,ID=m(E.Fb()),Y1=ID.next();!Y1.done;Y1=ID.next()){var W1=Y1.value,$1=W1.data;Ty==null&&W1.pts!==null&&(Ty=W1.pts);for(var Ld=0;Ld<$1.length;){var zl=lD($1,Ld);zl?(t.audioSamplingRate=zl.sampleRate,t.channelsCount=zl.channelCount,_y=zl.sampleRate,z1=zl.ga,ws.push({data:$1.subarray(Ld,Ld+zl.U),size:zl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ld+=zl.U):Ld++}}if(_y==0||z1.byteLength==0||Ty==null)throw new pt(2,3,3018);var f9=Ty/9e4*_y;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:_y,duration:r,Sa:[],ga:z1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:f9,Ra:ws},stream:t};break;case"ec3":for(var bD=[],Sy=0,X1=new Uint8Array([]),wy=null,CD=m(E.Fb()),Q1=CD.next();!Q1.done;Q1=CD.next()){var J1=Q1.value,eT=J1.data;wy==null&&J1.pts!==null&&(wy=J1.pts);for(var kd=0;kd<eT.length;){var Yl=cD(eT,kd);Yl?(t.audioSamplingRate=Yl.sampleRate,t.channelsCount=Yl.channelCount,Sy=Yl.sampleRate,X1=Yl.ga,bD.push({data:eT.subarray(kd,kd+Yl.U),size:Yl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),kd+=Yl.U):kd++}}if(Sy==0||X1.byteLength==0||wy==null)throw new pt(2,3,3018);var d9=wy/9e4*Sy;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Sy,duration:r,Sa:[],ga:X1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:d9,Ra:bD},stream:t};break;case"mp3":for(var RD=[],Ay,Iy=null,xD=m(E.Fb()),tT=xD.next();!tT.done;tT=xD.next()){var nT=tT.value,Yp=nT.data;if(Yp){Iy==null&&nT.pts!==null&&(Iy=nT.pts);for(var Xc=0;Xc<Yp.length;){var Fd=my(Yp,Xc);Fd?(Ay||(Ay=Fd),Xc+Fd.U<=Yp.length&&RD.push({data:Yp.subarray(Xc,Xc+Fd.U),size:Fd.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Xc+=Fd.U):Xc++}}}if(!Ay||Iy==null)throw new pt(2,3,3018);var ND=Ay.sampleRate,h9=Iy/9e4*ND;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ND,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:h9,Ra:RD},stream:t};break;case"opus":var MD=[],by=null,Au=E.F;if(!Au)throw new pt(2,3,3018);var Uo=[];switch(Au.Zg){case 1:case 2:Uo=[0];break;case 0:Uo=[255,1,1,0,1];break;case 128:Uo=[255,2,0,0,1];break;case 3:Uo=[1,2,1,0,2,1];break;case 4:Uo=[1,2,2,0,1,2,3];break;case 5:Uo=[1,3,2,0,4,1,2,3];break;case 6:Uo=[1,4,2,0,4,1,2,3,5];break;case 7:Uo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Uo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Uo=[1,1,2,0,1];break;case 131:Uo=[1,1,3,0,1,2];break;case 132:Uo=[1,1,4,0,1,2,3];break;case 133:Uo=[1,1,5,0,1,2,3,4];break;case 134:Uo=[1,1,6,0,1,2,3,4,5];break;case 135:Uo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Uo=[1,1,8,0,1,2,3,4,5,6,7]}for(var DD=new Uint8Array([0,Au.channelCount,0,0,Au.sampleRate>>>24&255,Au.sampleRate>>>17&255,Au.sampleRate>>>8&255,Au.sampleRate>>>0&255,0,0].concat(T(Uo))),PD=Au.sampleRate,OD=m(E.Fb()),rT=OD.next();!rT.done;rT=OD.next()){var iT=rT.value,Ud=iT.data;by==null&&iT.pts!==null&&(by=iT.pts);for(var Wp=0;Wp<Ud.length;){for(var p9=(Ud[Wp+1]&16)!==0,g9=(Ud[Wp+1]&8)!==0,dl=Wp+2,Cy=0;Ud[dl]===255;)Cy+=255,dl+=1;Cy+=Ud[dl],dl+=1,dl+=p9?2:0,dl+=g9?2:0;var LD=Ud.slice(dl,dl+Cy);MD.push({data:LD,size:LD.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Wp=dl+Cy}}if(DD.byteLength==0||by==null)throw new pt(2,3,3018);t.audioSamplingRate=Au.sampleRate,t.channelsCount=Au.channelCount;var m9=by/9e4*PD;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:PD,duration:r,Sa:[],ga:DD,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:m9,Ra:MD},stream:t}}G&&(A.push(G),G=null)}}catch(aT){return aT&&aT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(aT)}if(!A.length)return Promise.reject(new pt(2,3,3018));var kD=new bd(A);if(this.i.has(t.id))var oT=this.i.get(t.id);else oT=Cd(kD),this.i.set(t.id,oT);var v9=Op(kD);this.g++;var y9=li(oT,v9);return Promise.resolve(y9)},ne("shaka.transmuxer.TsTransmuxer",ss),ss.prototype.transmux=ss.prototype.transmux,ss.prototype.getOriginalMimeType=ss.prototype.getOriginalMimeType,ss.prototype.convertCodecs=ss.prototype.convertCodecs,ss.prototype.isSupported=ss.prototype.isSupported,ss.prototype.destroy=ss.prototype.destroy;var s9=["aac","ac-3","ec-3","mp3","opus"],u9=["avc","hevc"];wo("video/mp2t",function(){return new ss("video/mp2t")},lu);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function pD(){}var Kp;function gD(){Kp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Kp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=l9):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function l9(e,t){var n=this,r;return Oe(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),x(u,Kp.call(n,e,t),2)):(r=u.h,wD(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Kp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=mD,u.return(mD.call(n,e,t))))})}function mD(e,t){var n=this,r,u,c,d,h,E,A,k,G,te;return Oe(function(z){if(z.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=SD(e),u=[],c=m(t),d=c.next();!d.done;d=c.next())h=d.value,E=vD(h.videoCapabilities,r),A=vD(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!A.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=A,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return x(z,Kp.call(n,e,u),2)}return te=z.h,z.return(new vy(te,r))})}function vD(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}ne("EmeEncryptionSchemePolyfill",pD),pD.install=gD;function yD(){}var Vp;function ED(){Vp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Vp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=c9):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function c9(e){var t=this,n,r,u;return Oe(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),x(c,Vp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((r=n.keySystemAccess)&&wD(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Vp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=_D,r){c.u(3);break}return u=n,x(c,TD(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(_D.call(t,e))}})}function _D(e){var t=this,n,r,u,c,d,h,E,A;return Oe(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,u=r.keySystem,c=r.audio&&r.audio.encryptionScheme,d=r.video&&r.video.encryptionScheme,n=SD(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||d&&d!=n)?k.return(h):x(k,Vp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new vy(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return A=E,x(k,TD(e),5);case 5:A.keySystemAccess=k.h;case 3:return k.return(E)}})}function TD(e){var t,n;return Oe(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],d=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&d.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),d.length&&(u.videoCapabilities=d),t=u,x(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}ne("McEncryptionSchemePolyfill",yD),yD.install=ED;function vy(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}vy.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},vy.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function SD(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function wD(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function V1(){}function AD(){gD(),ED()}ne("EncryptionSchemePolyfills",V1),V1.install=AD,typeof b<"u"&&b.exports&&(b.exports=V1)}).call(l,o,o,void 0);for(var f in l.shaka)i[f]=l.shaka[f]})()})(KU);const zy=Eb(KU),rf=class rf{static async setup_stream(o,l,f){if(this.licenseUrl=l,this.customDrmHeaders=f,!o.mediaKeys)try{const p=await this.get_media_keys(o);if(p){await o.setMediaKeys(p.mediaKey);const w=p.mediaKey.createSession();this.on_handle_license_messageEvent=async b=>{await this.handle_license_messageEvent(p.mediaKey,w,b)},this.on_handle_encrypted_event=async b=>{await this.handle_encrypted_event(p,w,b)},w.addEventListener("message",this.on_handle_license_messageEvent),o.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(o){for(let l=0;l<o;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(o){const l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);this.mediaKey_pool.length>0&&l&&(await o.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(o){const l=this.mediaKey_pool.find(f=>f.mediaKey===o);return l?l.id:null}static async get_media_keys(o){let l=this.mediaKey_pool.find(f=>f.htmlMediaElement===o);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(f=>f.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(f=>!f.htmlMediaElement),l)return l.htmlMediaElement=o,l;throw new Error("No media keys available")}static async handle_license_messageEvent(o,l,f){try{const p=f.message.byteLength;console.log(p,"byteLength");let w;p===2?w=p.toString():w="".concat(this.get_mediaKey_id(o),"-").concat(p);let b;this.license_cache.has(w)?(console.log("using cached licence"),b=this.license_cache.get(w)):(b=await(await fetch(this.licenseUrl,{method:"POST",body:f.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),b?this.license_cache.set(w,b):console.error("License response is null")),b?await l.update(b):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(o,l,f){if(f.initDataType&&f.initData)try{if(!o.isInitialized){o.isInitialized=!0;const p=this.mediaKey_pool.findIndex(w=>w.id===o.id);p!==-1&&(this.mediaKey_pool[p]=o),await l.generateRequest(f.initDataType,f.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};rf.licenseUrl="",rf.customDrmHeaders={},rf.license_cache=new Map,rf.mediaKey_pool=[],rf.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let ab=rf;class Dz extends HU{constructor(o){var l;super(o),this.name="ShakaEngine",this.addPolicyToRequests=(f,p)=>{switch(f){case zy.net.NetworkingEngine.RequestType.MANIFEST:case zy.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case zy.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([w,b])=>{p.headers[w]=b});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new zy.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(o){var l;if(this.player&&o){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await ab.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(f){console.log(f)}await this.player.attach(this.options.element),await this.player.load(o,void 0)}}}class Pz extends Af{constructor(o){super(),this.options=o,this.options.preferredTech==="shaka"?this.engine=new Dz(o):this.engine=new Mz(o),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(o,l){this.emit(o,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(o,l){this.currentSource=o,await this.engine.load(o,l)}}class Oz extends Af{constructor(o){var l;super(),this.options=o,this._eventsEmitted=!1,this.eventClock=o.eventClock,this.containerElement=o.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new Pz({autoPlay:!1,...o.playerOptions,element:this.videoElement})}get currentSource(){var o;return(o=this.player)==null?void 0:o.currentSource}get currentCamera(){return this._currentCamera}get stats(){var o;return(o=this.player)==null?void 0:o.engine.getStats()}logPlayerStuff(){console.log("Bitrate",this.player.engine.video.getVideoPlaybackQuality()),console.log("Time",this.player.engine.video.currentTime),console.log("Paused",this.player.engine.video.paused)}propagateEvent(o,l){this.emit(o,l)}async load(o,l,f){return new Promise((p,w)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),this.player.load(l,f).then(()=>{this.player.once("playing",()=>{this._currentCamera=o,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0))});const b=((f==null?void 0:f.eventOffset)||0)-((f==null?void 0:f.reelOffset)||0),g=this.eventClock.getExpectedPositionInSeconds()-b;Math.sign(g)<0?setTimeout(()=>{this.videoElement.play(),p()},Math.abs(g)*1e3):(this.videoElement.currentTime=g,this.videoElement.play(),p())})}catch(b){console.error(b),w(b)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.player.destroy()}}var og=function(i){return i&&i.Math===Math&&i},Ga=og(typeof globalThis=="object"&&globalThis)||og(typeof window=="object"&&window)||og(typeof self=="object"&&self)||og(typeof nu=="object"&&nu)||og(typeof nu=="object"&&nu)||function(){return this}()||Function("return this")(),FC={},gs=function(i){try{return!!i()}catch(o){return!0}},Lz=gs,mc=!Lz(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),kz=gs,UC=!kz(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),Fz=UC,Yy=Function.prototype.call,wl=Fz?Yy.bind(Yy):function(){return Yy.apply(Yy,arguments)},VU={},zU={}.propertyIsEnumerable,YU=Object.getOwnPropertyDescriptor,Uz=YU&&!zU.call({1:2},1);VU.f=Uz?function(o){var l=YU(this,o);return!!l&&l.enumerable}:zU;var WU=function(i,o){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:o}},$U=UC,XU=Function.prototype,sb=XU.call,Bz=$U&&XU.bind.bind(sb,sb),Aa=$U?Bz:function(i){return function(){return sb.apply(i,arguments)}},QU=Aa,jz=QU({}.toString),Zz=QU("".slice),gE=function(i){return Zz(jz(i),8,-1)},Gz=Aa,qz=gs,Hz=gE,OA=Object,Kz=Gz("".split),Vz=qz(function(){return!OA("z").propertyIsEnumerable(0)})?function(i){return Hz(i)==="String"?Kz(i,""):OA(i)}:OA,mE=function(i){return i==null},zz=mE,Yz=TypeError,om=function(i){if(zz(i))throw new Yz("Can't call method on "+i);return i},Wz=Vz,$z=om,vE=function(i){return Wz($z(i))},LA=typeof document=="object"&&document.all,qa=typeof LA>"u"&&LA!==void 0?function(i){return typeof i=="function"||i===LA}:function(i){return typeof i=="function"},Xz=qa,Ih=function(i){return typeof i=="object"?i!==null:Xz(i)},kA=Ga,Qz=qa,Jz=function(i){return Qz(i)?i:void 0},BC=function(i,o){return arguments.length<2?Jz(kA[i]):kA[i]&&kA[i][o]},eY=Aa,JU=eY({}.isPrototypeOf),tY=typeof navigator<"u"&&String(navigator.userAgent)||"",eB=Ga,FA=tY,c3=eB.process,f3=eB.Deno,d3=c3&&c3.versions||f3&&f3.version,h3=d3&&d3.v8,tu,j0;h3&&(tu=h3.split("."),j0=tu[0]>0&&tu[0]<4?1:+(tu[0]+tu[1]));!j0&&FA&&(tu=FA.match(/Edge\/(\d+)/),(!tu||tu[1]>=74)&&(tu=FA.match(/Chrome\/(\d+)/),tu&&(j0=+tu[1])));var nY=j0,p3=nY,rY=gs,iY=Ga,oY=iY.String,tB=!!Object.getOwnPropertySymbols&&!rY(function(){var i=Symbol("symbol detection");return!oY(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&p3&&p3<41}),aY=tB,nB=aY&&!Symbol.sham&&typeof Symbol.iterator=="symbol",sY=BC,uY=qa,lY=JU,cY=nB,fY=Object,rB=cY?function(i){return typeof i=="symbol"}:function(i){var o=sY("Symbol");return uY(o)&&lY(o.prototype,fY(i))},dY=String,hY=function(i){try{return dY(i)}catch(o){return"Object"}},pY=qa,gY=hY,mY=TypeError,vY=function(i){if(pY(i))return i;throw new mY(gY(i)+" is not a function")},yY=vY,EY=mE,jC=function(i,o){var l=i[o];return EY(l)?void 0:yY(l)},UA=wl,BA=qa,jA=Ih,_Y=TypeError,TY=function(i,o){var l,f;if(o==="string"&&BA(l=i.toString)&&!jA(f=UA(l,i))||BA(l=i.valueOf)&&!jA(f=UA(l,i))||o!=="string"&&BA(l=i.toString)&&!jA(f=UA(l,i)))return f;throw new _Y("Can't convert object to primitive value")},iB={exports:{}},g3=Ga,SY=Object.defineProperty,ZC=function(i,o){try{SY(g3,i,{value:o,configurable:!0,writable:!0})}catch(l){g3[i]=o}return o},wY=Ga,AY=ZC,m3="__core-js_shared__",v3=iB.exports=wY[m3]||AY(m3,{});(v3.versions||(v3.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var GC=iB.exports,y3=GC,qC=function(i,o){return y3[i]||(y3[i]=o||{})},IY=om,bY=Object,oB=function(i){return bY(IY(i))},CY=Aa,RY=oB,xY=CY({}.hasOwnProperty),vc=Object.hasOwn||function(o,l){return xY(RY(o),l)},NY=Aa,MY=0,DY=Math.random(),PY=NY(1 .toString),aB=function(i){return"Symbol("+(i===void 0?"":i)+")_"+PY(++MY+DY,36)},OY=Ga,LY=qC,E3=vc,kY=aB,FY=tB,UY=nB,nh=OY.Symbol,ZA=LY("wks"),BY=UY?nh.for||nh:nh&&nh.withoutSetter||kY,Cf=function(i){return E3(ZA,i)||(ZA[i]=FY&&E3(nh,i)?nh[i]:BY("Symbol."+i)),ZA[i]},jY=wl,_3=Ih,T3=rB,ZY=jC,GY=TY,qY=Cf,HY=TypeError,KY=qY("toPrimitive"),VY=function(i,o){if(!_3(i)||T3(i))return i;var l=ZY(i,KY),f;if(l){if(o===void 0&&(o="default"),f=jY(l,i,o),!_3(f)||T3(f))return f;throw new HY("Can't convert object to primitive value")}return o===void 0&&(o="number"),GY(i,o)},zY=VY,YY=rB,sB=function(i){var o=zY(i,"string");return YY(o)?o:o+""},WY=Ga,S3=Ih,ub=WY.document,$Y=S3(ub)&&S3(ub.createElement),uB=function(i){return $Y?ub.createElement(i):{}},XY=mc,QY=gs,JY=uB,lB=!XY&&!QY(function(){return Object.defineProperty(JY("div"),"a",{get:function(){return 7}}).a!==7}),eW=mc,tW=wl,nW=VU,rW=WU,iW=vE,oW=sB,aW=vc,sW=lB,w3=Object.getOwnPropertyDescriptor;FC.f=eW?w3:function(o,l){if(o=iW(o),l=oW(l),sW)try{return w3(o,l)}catch(f){}if(aW(o,l))return rW(!tW(nW.f,o,l),o[l])};var am={},uW=mc,lW=gs,cB=uW&&lW(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),cW=Ih,fW=String,dW=TypeError,Rf=function(i){if(cW(i))return i;throw new dW(fW(i)+" is not an object")},hW=mc,pW=lB,gW=cB,Wy=Rf,A3=sB,mW=TypeError,GA=Object.defineProperty,vW=Object.getOwnPropertyDescriptor,qA="enumerable",HA="configurable",KA="writable";am.f=hW?gW?function(o,l,f){if(Wy(o),l=A3(l),Wy(f),typeof o=="function"&&l==="prototype"&&"value"in f&&KA in f&&!f[KA]){var p=vW(o,l);p&&p[KA]&&(o[l]=f.value,f={configurable:HA in f?f[HA]:p[HA],enumerable:qA in f?f[qA]:p[qA],writable:!1})}return GA(o,l,f)}:GA:function(o,l,f){if(Wy(o),l=A3(l),Wy(f),pW)try{return GA(o,l,f)}catch(p){}if("get"in f||"set"in f)throw new mW("Accessors not supported");return"value"in f&&(o[l]=f.value),o};var yW=mc,EW=am,_W=WU,HC=yW?function(i,o,l){return EW.f(i,o,_W(1,l))}:function(i,o,l){return i[o]=l,i},fB={exports:{}},lb=mc,TW=vc,dB=Function.prototype,SW=lb&&Object.getOwnPropertyDescriptor,KC=TW(dB,"name"),wW=KC&&(function(){}).name==="something",AW=KC&&(!lb||lb&&SW(dB,"name").configurable),IW={EXISTS:KC,PROPER:wW,CONFIGURABLE:AW},bW=Aa,CW=qa,cb=GC,RW=bW(Function.toString);CW(cb.inspectSource)||(cb.inspectSource=function(i){return RW(i)});var xW=cb.inspectSource,NW=Ga,MW=qa,I3=NW.WeakMap,DW=MW(I3)&&/native code/.test(String(I3)),PW=qC,OW=aB,b3=PW("keys"),hB=function(i){return b3[i]||(b3[i]=OW(i))},VC={},LW=DW,pB=Ga,kW=Ih,FW=HC,VA=vc,zA=GC,UW=hB,BW=VC,C3="Object already initialized",fb=pB.TypeError,jW=pB.WeakMap,Z0,Vg,G0,ZW=function(i){return G0(i)?Vg(i):Z0(i,{})},GW=function(i){return function(o){var l;if(!kW(o)||(l=Vg(o)).type!==i)throw new fb("Incompatible receiver, "+i+" required");return l}};if(LW||zA.state){var Ru=zA.state||(zA.state=new jW);Ru.get=Ru.get,Ru.has=Ru.has,Ru.set=Ru.set,Z0=function(i,o){if(Ru.has(i))throw new fb(C3);return o.facade=i,Ru.set(i,o),o},Vg=function(i){return Ru.get(i)||{}},G0=function(i){return Ru.has(i)}}else{var jd=UW("state");BW[jd]=!0,Z0=function(i,o){if(VA(i,jd))throw new fb(C3);return o.facade=i,FW(i,jd,o),o},Vg=function(i){return VA(i,jd)?i[jd]:{}},G0=function(i){return VA(i,jd)}}var gB={set:Z0,get:Vg,has:G0,enforce:ZW,getterFor:GW},zC=Aa,qW=gs,HW=qa,$y=vc,db=mc,KW=IW.CONFIGURABLE,VW=xW,mB=gB,zW=mB.enforce,YW=mB.get,R3=String,f0=Object.defineProperty,WW=zC("".slice),$W=zC("".replace),XW=zC([].join),QW=db&&!qW(function(){return f0(function(){},"length",{value:8}).length!==8}),JW=String(String).split("String"),e$=fB.exports=function(i,o,l){WW(R3(o),0,7)==="Symbol("&&(o="["+$W(R3(o),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(o="get "+o),l&&l.setter&&(o="set "+o),(!$y(i,"name")||KW&&i.name!==o)&&(db?f0(i,"name",{value:o,configurable:!0}):i.name=o),QW&&l&&$y(l,"arity")&&i.length!==l.arity&&f0(i,"length",{value:l.arity});try{l&&$y(l,"constructor")&&l.constructor?db&&f0(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch(p){}var f=zW(i);return $y(f,"source")||(f.source=XW(JW,typeof o=="string"?o:"")),i};Function.prototype.toString=e$(function(){return HW(this)&&YW(this).source||VW(this)},"toString");var t$=fB.exports,n$=qa,r$=am,i$=t$,o$=ZC,vB=function(i,o,l,f){f||(f={});var p=f.enumerable,w=f.name!==void 0?f.name:o;if(n$(l)&&i$(l,w,f),f.global)p?i[o]=l:o$(o,l);else{try{f.unsafe?i[o]&&(p=!0):delete i[o]}catch(b){}p?i[o]=l:r$.f(i,o,{value:l,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return i},yB={},a$=Math.ceil,s$=Math.floor,u$=Math.trunc||function(o){var l=+o;return(l>0?s$:a$)(l)},l$=u$,yE=function(i){var o=+i;return o!==o||o===0?0:l$(o)},c$=yE,f$=Math.max,d$=Math.min,h$=function(i,o){var l=c$(i);return l<0?f$(l+o,0):d$(l,o)},p$=yE,g$=Math.min,EB=function(i){var o=p$(i);return o>0?g$(o,9007199254740991):0},m$=EB,v$=function(i){return m$(i.length)},y$=vE,E$=h$,_$=v$,x3=function(i){return function(o,l,f){var p=y$(o),w=_$(p);if(w===0)return!i&&-1;var b=E$(f,w),g;if(i&&l!==l){for(;w>b;)if(g=p[b++],g!==g)return!0}else for(;w>b;b++)if((i||b in p)&&p[b]===l)return i||b||0;return!i&&-1}},T$={includes:x3(!0),indexOf:x3(!1)},S$=Aa,YA=vc,w$=vE,A$=T$.indexOf,I$=VC,N3=S$([].push),_B=function(i,o){var l=w$(i),f=0,p=[],w;for(w in l)!YA(I$,w)&&YA(l,w)&&N3(p,w);for(;o.length>f;)YA(l,w=o[f++])&&(~A$(p,w)||N3(p,w));return p},YC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],b$=_B,C$=YC,R$=C$.concat("length","prototype");yB.f=Object.getOwnPropertyNames||function(o){return b$(o,R$)};var TB={};TB.f=Object.getOwnPropertySymbols;var x$=BC,N$=Aa,M$=yB,D$=TB,P$=Rf,O$=N$([].concat),L$=x$("Reflect","ownKeys")||function(o){var l=M$.f(P$(o)),f=D$.f;return f?O$(l,f(o)):l},M3=vc,k$=L$,F$=FC,U$=am,B$=function(i,o,l){for(var f=k$(o),p=U$.f,w=F$.f,b=0;b<f.length;b++){var g=f[b];!M3(i,g)&&!(l&&M3(l,g))&&p(i,g,w(o,g))}},j$=gs,Z$=qa,G$=/#|\.prototype\./,sm=function(i,o){var l=H$[q$(i)];return l===V$?!0:l===K$?!1:Z$(o)?j$(o):!!o},q$=sm.normalize=function(i){return String(i).replace(G$,".").toLowerCase()},H$=sm.data={},K$=sm.NATIVE="N",V$=sm.POLYFILL="P",z$=sm,Xy=Ga,Y$=FC.f,W$=HC,$$=vB,X$=ZC,Q$=B$,J$=z$,SB=function(i,o){var l=i.target,f=i.global,p=i.stat,w,b,g,S,F,R;if(f?b=Xy:p?b=Xy[l]||X$(l,{}):b=Xy[l]&&Xy[l].prototype,b)for(g in o){if(F=o[g],i.dontCallGetSet?(R=Y$(b,g),S=R&&R.value):S=b[g],w=J$(f?g:l+(p?".":"#")+g,i.forced),!w&&S!==void 0){if(typeof F==typeof S)continue;Q$(F,S)}(i.sham||S&&S.sham)&&W$(F,"sham",!0),$$(b,g,F,i)}},eX=Ih,tX=gE,nX=Cf,rX=nX("match"),iX=function(i){var o;return eX(i)&&((o=i[rX])!==void 0?!!o:tX(i)==="RegExp")},oX=Cf,aX=oX("toStringTag"),wB={};wB[aX]="z";var sX=String(wB)==="[object z]",uX=sX,lX=qa,d0=gE,cX=Cf,fX=cX("toStringTag"),dX=Object,hX=d0(function(){return arguments}())==="Arguments",pX=function(i,o){try{return i[o]}catch(l){}},gX=uX?d0:function(i){var o,l,f;return i===void 0?"Undefined":i===null?"Null":typeof(l=pX(o=dX(i),fX))=="string"?l:hX?d0(o):(f=d0(o))==="Object"&&lX(o.callee)?"Arguments":f},mX=gX,vX=String,EE=function(i){if(mX(i)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return vX(i)},yX=Rf,AB=function(){var i=yX(this),o="";return i.hasIndices&&(o+="d"),i.global&&(o+="g"),i.ignoreCase&&(o+="i"),i.multiline&&(o+="m"),i.dotAll&&(o+="s"),i.unicode&&(o+="u"),i.unicodeSets&&(o+="v"),i.sticky&&(o+="y"),o},EX=wl,_X=vc,TX=JU,SX=AB,D3=RegExp.prototype,wX=function(i){var o=i.flags;return o===void 0&&!("flags"in D3)&&!_X(i,"flags")&&TX(D3,i)?EX(SX,i):o},WC=Aa,AX=oB,IX=Math.floor,WA=WC("".charAt),bX=WC("".replace),$A=WC("".slice),CX=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,RX=/\$([$&'`]|\d{1,2})/g,IB=function(i,o,l,f,p,w){var b=l+i.length,g=f.length,S=RX;return p!==void 0&&(p=AX(p),S=CX),bX(w,S,function(F,R){var y;switch(WA(R,0)){case"$":return"$";case"&":return i;case"`":return $A(o,0,l);case"'":return $A(o,b);case"<":y=p[$A(R,1,-1)];break;default:var v=+R;if(v===0)return F;if(v>g){var D=IX(v/10);return D===0?F:D<=g?f[D-1]===void 0?WA(R,1):f[D-1]+WA(R,1):F}y=f[v-1]}return y===void 0?"":y})},xX=SB,NX=wl,$C=Aa,P3=om,MX=qa,DX=mE,PX=iX,ag=EE,OX=jC,LX=wX,kX=IB,FX=Cf,UX=FX("replace"),BX=TypeError,XA=$C("".indexOf);$C("".replace);var O3=$C("".slice),jX=Math.max;xX({target:"String",proto:!0},{replaceAll:function(o,l){var f=P3(this),p,w,b,g,S,F,R,y,v,D=0,m=0,T="";if(!DX(o)){if(p=PX(o),p&&(w=ag(P3(LX(o))),!~XA(w,"g")))throw new BX("`.replaceAll` does not allow non-global regexes");if(b=OX(o,UX),b)return NX(b,o,f,l)}for(g=ag(f),S=ag(o),F=MX(l),F||(l=ag(l)),R=S.length,y=jX(1,R),D=XA(g,S);D!==-1;)v=F?ag(l(S,D,g)):kX(S,g,D,[],void 0,l),T+=O3(g,m,D)+v,m=D+R,D=D+y>g.length?-1:XA(g,S,D+y);return m<g.length&&(T+=O3(g,m)),T}});var XC=gs,ZX=Ga,QC=ZX.RegExp,JC=XC(function(){var i=QC("a","y");return i.lastIndex=2,i.exec("abcd")!==null}),GX=JC||XC(function(){return!QC("a","y").sticky}),qX=JC||XC(function(){var i=QC("^r","gy");return i.lastIndex=2,i.exec("str")!==null}),HX={BROKEN_CARET:qX,MISSED_STICKY:GX,UNSUPPORTED_Y:JC},bB={},KX=_B,VX=YC,zX=Object.keys||function(o){return KX(o,VX)},YX=mc,WX=cB,$X=am,XX=Rf,QX=vE,JX=zX;bB.f=YX&&!WX?Object.defineProperties:function(o,l){XX(o);for(var f=QX(l),p=JX(l),w=p.length,b=0,g;w>b;)$X.f(o,g=p[b++],f[g]);return o};var eQ=BC,tQ=eQ("document","documentElement"),nQ=Rf,rQ=bB,L3=YC,iQ=VC,oQ=tQ,aQ=uB,sQ=hB,k3=">",F3="<",hb="prototype",pb="script",CB=sQ("IE_PROTO"),QA=function(){},RB=function(i){return F3+pb+k3+i+F3+"/"+pb+k3},U3=function(i){i.write(RB("")),i.close();var o=i.parentWindow.Object;return i=null,o},uQ=function(){var i=aQ("iframe"),o="java"+pb+":",l;return i.style.display="none",oQ.appendChild(i),i.src=String(o),l=i.contentWindow.document,l.open(),l.write(RB("document.F=Object")),l.close(),l.F},Qy,h0=function(){try{Qy=new ActiveXObject("htmlfile")}catch(o){}h0=typeof document<"u"?document.domain&&Qy?U3(Qy):uQ():U3(Qy);for(var i=L3.length;i--;)delete h0[hb][L3[i]];return h0()};iQ[CB]=!0;var lQ=Object.create||function(o,l){var f;return o!==null?(QA[hb]=nQ(o),f=new QA,QA[hb]=null,f[CB]=o):f=h0(),l===void 0?f:rQ.f(f,l)},cQ=gs,fQ=Ga,dQ=fQ.RegExp,hQ=cQ(function(){var i=dQ(".","s");return!(i.dotAll&&i.test("\n")&&i.flags==="s")}),pQ=gs,gQ=Ga,mQ=gQ.RegExp,vQ=pQ(function(){var i=mQ("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"}),rh=wl,_E=Aa,yQ=EE,EQ=AB,_Q=HX,TQ=qC,SQ=lQ,wQ=gB.get,AQ=hQ,IQ=vQ,bQ=TQ("native-string-replace",String.prototype.replace),q0=RegExp.prototype.exec,gb=q0,CQ=_E("".charAt),RQ=_E("".indexOf),xQ=_E("".replace),JA=_E("".slice),mb=function(){var i=/a/,o=/b*/g;return rh(q0,i,"a"),rh(q0,o,"a"),i.lastIndex!==0||o.lastIndex!==0}(),xB=_Q.BROKEN_CARET,vb=/()??/.exec("")[1]!==void 0,NQ=mb||vb||xB||AQ||IQ;NQ&&(gb=function(o){var l=this,f=wQ(l),p=yQ(o),w=f.raw,b,g,S,F,R,y,v;if(w)return w.lastIndex=l.lastIndex,b=rh(gb,w,p),l.lastIndex=w.lastIndex,b;var D=f.groups,m=xB&&l.sticky,T=rh(EQ,l),U=l.source,N=0,_=p;if(m&&(T=xQ(T,"y",""),RQ(T,"g")===-1&&(T+="g"),_=JA(p,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&CQ(p,l.lastIndex-1)!=="\n")&&(U="(?: "+U+")",_=" "+_,N++),g=new RegExp("^(?:"+U+")",T)),vb&&(g=new RegExp("^"+U+"$(?!\\s)",T)),mb&&(S=l.lastIndex),F=rh(q0,m?g:l,_),m?F?(F.input=JA(F.input,N),F[0]=JA(F[0],N),F.index=l.lastIndex,l.lastIndex+=F[0].length):l.lastIndex=0:mb&&F&&(l.lastIndex=l.global?F.index+F[0].length:S),vb&&F&&F.length>1&&rh(bQ,F[0],g,function(){for(R=1;R<arguments.length-2;R++)arguments[R]===void 0&&(F[R]=void 0)}),F&&D)for(F.groups=y=SQ(null),R=0;R<D.length;R++)v=D[R],y[v[0]]=F[v[1]];return F});var eR=gb,MQ=SB,B3=eR;MQ({target:"RegExp",proto:!0,forced:/./.exec!==B3},{exec:B3});var DQ=UC,NB=Function.prototype,j3=NB.apply,Z3=NB.call,PQ=typeof Reflect=="object"&&Reflect.apply||(DQ?Z3.bind(j3):function(){return Z3.apply(j3,arguments)}),G3=wl,q3=vB,OQ=eR,H3=gs,MB=Cf,LQ=HC,kQ=MB("species"),eI=RegExp.prototype,FQ=function(i,o,l,f){var p=MB(i),w=!H3(function(){var F={};return F[p]=function(){return 7},""[i](F)!==7}),b=w&&!H3(function(){var F=!1,R=/a/;return i==="split"&&(R={},R.constructor={},R.constructor[kQ]=function(){return R},R.flags="",R[p]=/./[p]),R.exec=function(){return F=!0,null},R[p](""),!F});if(!w||!b||l){var g=/./[p],S=o(p,""[i],function(F,R,y,v,D){var m=R.exec;return m===OQ||m===eI.exec?w&&!D?{done:!0,value:G3(g,R,y,v)}:{done:!0,value:G3(F,y,R,v)}:{done:!1}});q3(String.prototype,i,S[0]),q3(eI,p,S[1])}f&&LQ(eI[p],"sham",!0)},tR=Aa,UQ=yE,BQ=EE,jQ=om,ZQ=tR("".charAt),K3=tR("".charCodeAt),GQ=tR("".slice),V3=function(i){return function(o,l){var f=BQ(jQ(o)),p=UQ(l),w=f.length,b,g;return p<0||p>=w?i?"":void 0:(b=K3(f,p),b<55296||b>56319||p+1===w||(g=K3(f,p+1))<56320||g>57343?i?ZQ(f,p):b:i?GQ(f,p,p+2):(b-55296<<10)+(g-56320)+65536)}},qQ={codeAt:V3(!1),charAt:V3(!0)},HQ=qQ.charAt,KQ=function(i,o,l){return o+(l?HQ(i,o).length:1)},z3=wl,VQ=Rf,zQ=qa,YQ=gE,WQ=eR,$Q=TypeError,XQ=function(i,o){var l=i.exec;if(zQ(l)){var f=z3(l,i,o);return f!==null&&VQ(f),f}if(YQ(i)==="RegExp")return z3(WQ,i,o);throw new $Q("RegExp#exec called on incompatible receiver")},QQ=PQ,Y3=wl,TE=Aa,JQ=FQ,eJ=gs,tJ=Rf,nJ=qa,rJ=mE,iJ=yE,oJ=EB,Zd=EE,aJ=om,sJ=KQ,uJ=jC,lJ=IB,cJ=XQ,fJ=Cf,yb=fJ("replace"),dJ=Math.max,hJ=Math.min,pJ=TE([].concat),tI=TE([].push),W3=TE("".indexOf),$3=TE("".slice),gJ=function(i){return i===void 0?i:String(i)},mJ=function(){return"a".replace(/./,"$0")==="$0"}(),X3=function(){return/./[yb]?/./[yb]("a","$0")==="":!1}(),vJ=!eJ(function(){var i=/./;return i.exec=function(){var o=[];return o.groups={a:"7"},o},"".replace(i,"$<a>")!=="7"});JQ("replace",function(i,o,l){var f=X3?"$":"$0";return[function(w,b){var g=aJ(this),S=rJ(w)?void 0:uJ(w,yb);return S?Y3(S,w,g,b):Y3(o,Zd(g),w,b)},function(p,w){var b=tJ(this),g=Zd(p);if(typeof w=="string"&&W3(w,f)===-1&&W3(w,"$<")===-1){var S=l(o,b,g,w);if(S.done)return S.value}var F=nJ(w);F||(w=Zd(w));var R=b.global,y;R&&(y=b.unicode,b.lastIndex=0);for(var v=[],D;D=cJ(b,g),!(D===null||(tI(v,D),!R));){var m=Zd(D[0]);m===""&&(b.lastIndex=sJ(g,oJ(b.lastIndex),y))}for(var T="",U=0,N=0;N<v.length;N++){D=v[N];for(var _=Zd(D[0]),I=dJ(hJ(iJ(D.index),g.length),0),C=[],j,Y=1;Y<D.length;Y++)tI(C,gJ(D[Y]));var $=D.groups;if(F){var W=pJ([_],C,I,g);$!==void 0&&tI(W,$),j=Zd(QQ(w,void 0,W))}else j=lJ(_,g,I,C,$,w);I>=U&&(T+=$3(g,U,I)+j,U=I+_.length)}return T+$3(g,U)}]},!vJ||!mJ||X3);var yJ=Ga,EJ=Aa,_J=function(i,o){return EJ(yJ[i].prototype[o])},TJ=_J;TJ("String","replaceAll");function nR(){const i=uu(),o=bf(),[l]=GU();return pn.useCallback(async(f,p)=>{var g;if(!l||!i)return;const w=(g=o==null?void 0:o.distributionUrl)!=null?g:"";let b=l.cameraURLTemplate;if(b=b.replace("{{baseURL}}",w),b=b.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),b=b.replaceAll("{{assetName}}",p.camera.assetName||""),b!==f.currentSource&&o)return await f.load(p,b,{startTimeSeconds:i.getExpectedPositionInSeconds()-mi(p.camera.span.time,o.frameRate),eventOffset:mi(p.camera.span.time,o.frameRate),reelOffset:mi(p.camera.reelOffset,o.frameRate)})},[i,l,o])}function SJ(){const i=nR();return pn.useCallback(async(o,l)=>await i(o,l).then(),[i])}function wJ(){const i=uu(),o=If(),l=LC();pn.useEffect(()=>{if(!i||!o||!l)return;const f=({command:p,reference:w,start:b})=>{i.pausePlayStream(p,w,b)};return o.on("pausePlayStream",f),()=>{o.off("pausePlayStream",f)}},[i,o,l])}function AJ(i){const o=uu(),l=bf(),f=If(),p=SJ(),w=nR();pn.useEffect(()=>{if(!f||!l||!o||!i)return;let b,g=[void 0,-1];const S=()=>{const T=o.getExpectedPositionInSeconds()<=0?0:o.getExpectedPositionInSeconds();return hE(l,T)[0]},F=T=>{g[0]=w(i,T),g[1]=T.index},R=T=>{if(g[0]&&g[1]===T.index){g[0].then(()=>{}),g=[void 0,-1];return}try{p(i,T)}catch(U){console.error("failed to play stream",U)}},y=()=>{const T=S();T&&F(T)},v=()=>{const T=S();T&&R(T)},D=({index:T})=>{var N;const U=(N=ob(T,l))!=null?N:ib(T,l,o);U&&F(U)},m=({index:T})=>{var N;const U=(N=ob(T,l))!=null?N:ib(T,l,o);U&&(F(U),b=setTimeout(()=>{R(U)},1900))};return f.on("prepareCast",D),f.on("cast",m),o.on("prepareStart",y),o.on("start",v),o.isLive?(o.preparePlayback(),v()):o.isInPrepare?y():console.log("HRRR"),()=>{f.off("prepareCast",D),f.off("cast",m),o.off("prepareStart",y),o.off("start",v),clearTimeout(b)}},[f,l,o,i,p,w])}function IJ(i){const o=im();pn.useEffect(()=>{if(!i||!o)return;const l=()=>{i.currentCamera&&o.updatePlaying(i.currentCamera)};return i.on("playing",l),()=>{i.off("playing",l)}},[i,o])}function bJ(i){const o=im(),l=uu(),f=bf(),p=nR();pn.useEffect(()=>{if(!f||!l||!i||!o)return;const w=({remainingTime:b})=>{const g=UU(f,l.getExpectedPositionInSeconds(),b,i.currentCamera);if(g)try{const S=p(i,g);o.once("ended",()=>{S.then(()=>{})})}catch(S){console.error("failed to load stream",S)}else o.once("ended",()=>{o.endEvent()})};return o.on("nearEnd",w),()=>{o.off("nearEnd",w)}},[f,l,i,p,o])}function CJ(i,o,l){const f=gz(),p=uu(),[w,b]=pn.useState(null);return pn.useEffect(()=>{const g=document.querySelector(i);if(g==null||!p||!l)return;const S=new Oz({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:o,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:f}},eventClock:p});return b(S),()=>{S.destroy()}},[f,i,o,l,p]),w}function RJ(i){const o=uu(),l=If(),f=bf(),p=im(),[w,b]=pn.useState(),[g,S]=pn.useState();return pn.useEffect(()=>{if(!f||!o||!i||!l||!p)return;const F=({index:y})=>{var v;S((v=ob(y,f))!=null?v:ib(y,f,o)),b(i.currentCamera)},R=()=>{const y=i.currentCamera;(y==null?void 0:y.camera.transition)==="mapAndClosing"&&(S(UU(f,o.getExpectedPositionInSeconds(),2,y)),b(y))};return l.on("cast",F),p.on("transition",R),()=>{l.off("cast",F),p.off("transition",R)}},[f,o,i,l,p]),[w,g]}function DB({x:i,y:o,mapScale:l}){const[f,p]=pn.useState(0),[w,b]=pn.useState(0),[g,S]=pn.useState(0),[F,R]=pn.useState(0),[y,v]=pn.useState(0);return pn.useEffect(()=>{const D=window.innerWidth,m=window.innerHeight,T=D/12,U=m/12;R(m/2-m*.05),v(D/m),p(i*T),b(o*U),S(T*l)},[i,o,l]),{scaledX:f,scaledY:w,size:g,baseY:F,aspectRatio:y}}const xJ="_container_zht4e_1",NJ="_fadeIn_zht4e_1",MJ="_scrollWrapper_zht4e_15",DJ="_scrollContainer_zht4e_29",nI={container:xJ,fadeIn:NJ,scrollWrapper:MJ,scrollContainer:DJ};function PJ(){const i=OC();return wt.jsxs("div",{className:nI.container,children:[wt.jsx("h1",{children:i==null?void 0:i.postScreen.title}),wt.jsx("p",{className:"body-text",style:{opacity:.5},children:i==null?void 0:i.postScreen.body}),wt.jsx("div",{className:nI.scrollWrapper,children:wt.jsx("div",{className:nI.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>wt.jsx("img",{src:o.image.url},l))})})]})}const OJ="_transitionWrapper_jyngr_1",LJ="_active_jyngr_17",kJ="_transition_jyngr_1",FJ="_fadeOut_jyngr_1",UJ="_hidden_jyngr_57",BJ="_visible_jyngr_67",jJ="_videoTitle_jyngr_77",ZJ="_fadeIn_jyngr_1",sg={transitionWrapper:OJ,active:LJ,transition:kJ,fadeOut:FJ,hidden:UJ,visible:BJ,videoTitle:jJ,fadeIn:ZJ},GJ="_placeContainer_ywyae_1",qJ="_place_ywyae_1",HJ="_background_ywyae_45",KJ="_activePlace_ywyae_57",VJ="_fadeOut_ywyae_1",zJ="_normalPlace_ywyae_79",YJ="_selectedPlace_ywyae_99",WJ="_fadeIn_ywyae_1",$J="_pulseEffect_ywyae_1",XJ="_title_ywyae_153",Qc={placeContainer:GJ,place:qJ,background:HJ,activePlace:KJ,fadeOut:VJ,normalPlace:zJ,selectedPlace:YJ,fadeIn:WJ,pulseEffect:$J,title:XJ};var bs=(i=>(i.ACTIVE_PLACE="ActivePlace",i.SELECTED_PLACE="SelectedPlace",i.NORMAL_PLACE="NormalPlace",i))(bs||{});const QJ=({place:i,mapPlacesLength:o})=>{const l=DB({x:i.mapPosition.x,y:i.mapPosition.y,mapScale:i.mapScale}),f=pn.useMemo(()=>{switch(i.placeType){case bs.ACTIVE_PLACE:return Qc.activePlace;case bs.SELECTED_PLACE:return Qc.selectedPlace;case bs.NORMAL_PLACE:default:return Qc.normalPlace}},[i]);return wt.jsx("div",{className:Qc.placeContainer,children:wt.jsxs("div",{className:"".concat(Qc.place," ").concat(f),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(o>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(o>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[wt.jsx("div",{className:Qc.background}),(i.placeType===bs.ACTIVE_PLACE||i.placeType===bs.SELECTED_PLACE)&&wt.jsx("div",{className:"subheader-light ".concat(Qc.title),children:i.title})]})})},JJ="_followContainer_1h8ds_1",eee="_follow_1h8ds_1",tee="_selectedFollow_1h8ds_35",nee="_pulseEffect_1h8ds_1",ree="_notSelectedFollow_1h8ds_79",iee="_iconContainer_1h8ds_97",oee="_labelContainer_1h8ds_131",Gd={followContainer:JJ,follow:eee,selectedFollow:tee,pulseEffect:nee,notSelectedFollow:ree,iconContainer:iee,labelContainer:oee},aee="_label_svzic_1",see={label:aee},uee=({content:i,classNames:o=""})=>wt.jsx("div",{className:"".concat(see.label," ").concat(o," label"),children:i}),lee=({style:i})=>wt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:i,children:wt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),PB=({classNames:i,styles:o,color:l,stroke:f})=>wt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[wt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),cee=({classNames:i,styles:o,color:l,stroke:f})=>wt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[wt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),wt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),wt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"}),wt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:f||"6",strokeLinecap:"round"})]}),fee=()=>wt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[wt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),dee=()=>wt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[wt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),hee=()=>wt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[wt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),wt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),pee=()=>wt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:wt.jsxs("g",{children:[wt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),wt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),wt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),wt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),gee=()=>wt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:wt.jsxs("g",{children:[wt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),wt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),wt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),wt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),mee=({follow:i})=>{var p,w,b,g;const o=DB({x:(w=(p=i.mapPosition)==null?void 0:p.x)!=null?w:0,y:(g=(b=i.mapPosition)==null?void 0:b.y)!=null?g:0,mapScale:.6}),[l,f]=pn.useState(0);return pn.useEffect(()=>{function S(F,R,y){return-Math.atan2((F.x-R.x)*y,F.y-R.y)*(180/Math.PI)}i.mapPosition&&f(S(i.mapPositions[0],i.mapPositions[i.mapPositions.length-1],o.aspectRatio))},[i.mapPosition,i.mapPositions,o]),wt.jsxs("div",{className:Gd.followContainer,style:{width:o.size,height:o.size,left:"calc(50% + ".concat(o.scaledX,"px)"),top:"calc(50% - ".concat(o.scaledY,"px)")},children:[wt.jsx("div",{className:"".concat(Gd.follow," ").concat(i.isSelectedFollow?Gd.selectedFollow:Gd.notSelectedFollow," ").concat(Gd.iconContainer),children:wt.jsx(lee,{style:{transform:"rotate(".concat(l,"deg)")}})}),i.isSelectedFollow&&wt.jsx(uee,{classNames:Gd.labelContainer,content:i.title})]})},vee=({fromCamera:i,toCamera:o})=>{const l=bf(),f=uu(),p=4200,w=p+3950,b=1900,[g,S]=pn.useState([]),[F,R]=pn.useState([]),[y,v]=pn.useState(!1),[D,m]=pn.useState(!1),[T,U]=pn.useState(""),N=pn.useRef([]),_=pn.useMemo(()=>{function ue(x,X){const de=x.jumpSpots.map(Ze=>Ze.camera.span),ve=de.map(Ze=>Ze.time).map(Ze=>mi(Ze,X.frameRate)),Ce=Math.min(...ve),Xe=de.map(Ze=>mi(Ze.time,X.frameRate)+mi(Ze.duration,X.frameRate)),Ae=Math.max(...Xe);return{start:Ce,end:Ae}}return l==null?void 0:l.places.filter(x=>x.jumpSpots.length>0).map((x,X)=>({...x,span:ue(x,l),placeType:bs.NORMAL_PLACE,placeIndex:X}))},[l]),I=pn.useMemo(()=>(l==null?void 0:l.follows.map(ue=>({...ue,isSelectedFollow:!1})))||[],[l]),C=pn.useCallback((ue,x)=>{const X=mi(ue.camera.span.time,x.frameRate)+2;return(_==null?void 0:_.filter(de=>de.span.start<=X&&X<=de.span.end))||[]},[_]),j=pn.useCallback(ue=>{const x=ue.mapPositions[0]||{x:0,y:0};if(l&&f){const X=f.getExpectedPositionInSeconds()-mi(ue.camera.span.time,l.frameRate),de=mi(ue.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/de);return X===de&&(oe-=1),ue.mapPositions[oe]||x}return x},[f,l]),Y=pn.useCallback((ue,x)=>{const X=mi(ue.camera.span.time,x.frameRate)+2;return I.filter(de=>mi(de.camera.span.time,x.frameRate)<=X&&X<=mi(de.camera.span.time,x.frameRate)+mi(de.camera.span.duration,x.frameRate)).map(de=>({...de,mapPosition:j(de)}))},[I,j]),$=pn.useCallback(ue=>_==null?void 0:_.find(x=>x.jumpSpots.some(X=>X.camera.assetName===ue.camera.assetName)),[_]),W=(ue,x)=>x.jumpSpots.some(X=>X.camera.assetName===ue.camera.assetName);return pn.useEffect(()=>{if(!_||!i||!o||!l||i.camera.assetName===o.camera.assetName)return;const ue=N.current;let x=[],X=[],de=[],oe=[];if(U(o.placeTitle?o.placeTitle:o.title),i.type===nf.JUMPSPOT&&o.type===nf.JUMPSPOT&&i.placeIndex===o.placeIndex)m(!1),v(!0);else{switch(m(!0),i.type){case nf.JUMPSPOT:X=Y(o,l),x=C(i,l).map(Ze=>W(i,Ze)?{...Ze,placeType:bs.ACTIVE_PLACE}:Ze);break;case nf.FOLLOW:x=C(i,l),X=Y(i,l).map(Ze=>({...Ze,isSelectedFollow:i.camera.assetName===Ze.camera.assetName}));break}switch(S(x),R(X),o.type){case nf.JUMPSPOT:oe=Y(i,l);const Ze=x.find(st=>W(o,st));if(Ze)de=x.map(st=>({...st,placeType:st.placeIndex===Ze.placeIndex?bs.SELECTED_PLACE:bs.NORMAL_PLACE}));else{const st=$(o);st&&(st.placeType=bs.SELECTED_PLACE,de=[...x.map(Ye=>({...Ye,placeType:bs.NORMAL_PLACE})),st])}break;case nf.FOLLOW:de=C(i,l),oe=Y(i,l);const it=X.find(st=>st.camera.assetName===o.camera.assetName);if(it)oe=X.map(st=>({...st,isSelectedFollow:st.camera.assetName===it.camera.assetName}));else{const st=I.find(Ye=>Ye.camera.assetName===o.camera.assetName);if(st){const Ye={...st,isSelectedFollow:!0,mapPosition:j(st)};oe=[...X.map(lt=>({...lt,isSelectedFollow:!1})),Ye]}}break}}const ve=setTimeout(()=>{R(oe)},b);ue.push(ve);const Ce=setTimeout(()=>{S(de)},b);ue.push(Ce);const Xe=setTimeout(()=>{m(!1),v(!0)},p);ue.push(Xe);const Ae=setTimeout(()=>{v(!1)},w);return ue.push(Ae),()=>{ue.forEach(Ze=>{clearTimeout(Ze)}),N.current=[]}},[i,o,_,I,Y,$,l,C,j,w]),wt.jsxs("div",{className:"".concat(sg.transitionWrapper," ").concat(D?sg.active:""),children:[D&&wt.jsxs("div",{className:"".concat(sg.transition," ").concat(sg.visible),children:[g.map((ue,x)=>wt.jsx(QJ,{place:ue,mapPlacesLength:g.length},"place-".concat(x.toString()))),F.filter(ue=>ue.camera.assetName===(i==null?void 0:i.camera.assetName)||ue.camera.assetName===(o==null?void 0:o.camera.assetName)).map((ue,x)=>wt.jsx(mee,{follow:ue},"follow-".concat(x.toString())))]}),y&&wt.jsx("h1",{className:sg.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},yee="_playerPage_s22qw_1",Eee="_playerContainer_s22qw_13",_ee="_fadeIn_s22qw_1",Q3={playerPage:yee,playerContainer:Eee,fadeIn:_ee},Tee="_attention_1xh5o_1",See="_ripple1_1xh5o_1",wee="_ripple2_1xh5o_1",Aee="_thirdRipple_1xh5o_81",Iee="_ripple3_1xh5o_1",bee="_iconWrapper_1xh5o_105",rI={attention:Tee,ripple1:See,ripple2:wee,thirdRipple:Aee,ripple3:Iee,iconWrapper:bee},Cee=()=>{const i=im(),[o,l]=pn.useState(!1),f=5e3;if(pn.useEffect(()=>{if(!i)return;let p;const w=()=>{l(!0),p=setTimeout(()=>{l(!1)},f)};return i.on("attention",w),()=>{i.off("attention",w),clearTimeout(p)}},[i]),!!o)return wt.jsxs("div",{className:rI.attention,children:[wt.jsx("span",{className:rI.iconWrapper,children:wt.jsx(hee,{})}),wt.jsx("span",{className:rI.thirdRipple})]})};var Ree=Object.defineProperty,H0=Object.getOwnPropertySymbols,OB=Object.prototype.hasOwnProperty,LB=Object.prototype.propertyIsEnumerable,J3=(i,o,l)=>o in i?Ree(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,zg=(i,o)=>{for(var l in o||(o={}))OB.call(o,l)&&J3(i,l,o[l]);if(H0)for(var l of H0(o))LB.call(o,l)&&J3(i,l,o[l]);return i},rR=(i,o)=>{var l={};for(var f in i)OB.call(i,f)&&o.indexOf(f)<0&&(l[f]=i[f]);if(i!=null&&H0)for(var f of H0(i))o.indexOf(f)<0&&LB.call(i,f)&&(l[f]=i[f]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ef;(i=>{const o=class{constructor(S,F,R,y){if(this.version=S,this.errorCorrectionLevel=F,this.modules=[],this.isFunction=[],S<o.MIN_VERSION||S>o.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=S*4+17;let v=[];for(let m=0;m<this.size;m++)v.push(!1);for(let m=0;m<this.size;m++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(R);if(this.drawCodewords(D),y==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const U=this.getPenaltyScore();U<m&&(y=T,m=U),this.applyMask(T)}}w(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(S,F){const R=i.QrSegment.makeSegments(S);return o.encodeSegments(R,F)}static encodeBinary(S,F){const R=i.QrSegment.makeBytes(S);return o.encodeSegments([R],F)}static encodeSegments(S,F,R=1,y=40,v=-1,D=!0){if(!(o.MIN_VERSION<=R&&R<=y&&y<=o.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let m,T;for(m=R;;m++){const I=o.getNumDataCodewords(m,F)*8,C=g.getTotalBits(S,m);if(C<=I){T=C;break}if(m>=y)throw new RangeError("Data too long")}for(const I of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])D&&T<=o.getNumDataCodewords(m,I)*8&&(F=I);let U=[];for(const I of S){f(I.mode.modeBits,4,U),f(I.numChars,I.mode.numCharCountBits(m),U);for(const C of I.getData())U.push(C)}w(U.length==T);const N=o.getNumDataCodewords(m,F)*8;w(U.length<=N),f(0,Math.min(4,N-U.length),U),f(0,(8-U.length%8)%8,U),w(U.length%8==0);for(let I=236;U.length<N;I^=253)f(I,8,U);let _=[];for(;_.length*8<U.length;)_.push(0);return U.forEach((I,C)=>_[C>>>3]|=I<<7-(C&7)),new o(m,F,_,v)}getModule(S,F){return 0<=S&&S<this.size&&0<=F&&F<this.size&&this.modules[F][S]}getModules(){return this.modules}drawFunctionPatterns(){for(let R=0;R<this.size;R++)this.setFunctionModule(6,R,R%2==0),this.setFunctionModule(R,6,R%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const S=this.getAlignmentPatternPositions(),F=S.length;for(let R=0;R<F;R++)for(let y=0;y<F;y++)R==0&&y==0||R==0&&y==F-1||R==F-1&&y==0||this.drawAlignmentPattern(S[R],S[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(S){const F=this.errorCorrectionLevel.formatBits<<3|S;let R=F;for(let v=0;v<10;v++)R=R<<1^(R>>>9)*1335;const y=(F<<10|R)^21522;w(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,p(y,v));this.setFunctionModule(8,7,p(y,6)),this.setFunctionModule(8,8,p(y,7)),this.setFunctionModule(7,8,p(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,p(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,p(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,p(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let S=this.version;for(let R=0;R<12;R++)S=S<<1^(S>>>11)*7973;const F=this.version<<12|S;w(F>>>18==0);for(let R=0;R<18;R++){const y=p(F,R),v=this.size-11+R%3,D=Math.floor(R/3);this.setFunctionModule(v,D,y),this.setFunctionModule(D,v,y)}}drawFinderPattern(S,F){for(let R=-4;R<=4;R++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(R)),D=S+y,m=F+R;0<=D&&D<this.size&&0<=m&&m<this.size&&this.setFunctionModule(D,m,v!=2&&v!=4)}}drawAlignmentPattern(S,F){for(let R=-2;R<=2;R++)for(let y=-2;y<=2;y++)this.setFunctionModule(S+y,F+R,Math.max(Math.abs(y),Math.abs(R))!=1)}setFunctionModule(S,F,R){this.modules[F][S]=R,this.isFunction[F][S]=!0}addEccAndInterleave(S){const F=this.version,R=this.errorCorrectionLevel;if(S.length!=o.getNumDataCodewords(F,R))throw new RangeError("Invalid argument");const y=o.NUM_ERROR_CORRECTION_BLOCKS[R.ordinal][F],v=o.ECC_CODEWORDS_PER_BLOCK[R.ordinal][F],D=Math.floor(o.getNumRawDataModules(F)/8),m=y-D%y,T=Math.floor(D/y);let U=[];const N=o.reedSolomonComputeDivisor(v);for(let I=0,C=0;I<y;I++){let j=S.slice(C,C+T-v+(I<m?0:1));C+=j.length;const Y=o.reedSolomonComputeRemainder(j,N);I<m&&j.push(0),U.push(j.concat(Y))}let _=[];for(let I=0;I<U[0].length;I++)U.forEach((C,j)=>{(I!=T-v||j>=m)&&_.push(C[I])});return w(_.length==D),_}drawCodewords(S){if(S.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let F=0;for(let R=this.size-1;R>=1;R-=2){R==6&&(R=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const D=R-v,T=(R+1&2)==0?this.size-1-y:y;!this.isFunction[T][D]&&F<S.length*8&&(this.modules[T][D]=p(S[F>>>3],7-(F&7)),F++)}}w(F==S.length*8)}applyMask(S){if(S<0||S>7)throw new RangeError("Mask value out of range");for(let F=0;F<this.size;F++)for(let R=0;R<this.size;R++){let y;switch(S){case 0:y=(R+F)%2==0;break;case 1:y=F%2==0;break;case 2:y=R%3==0;break;case 3:y=(R+F)%3==0;break;case 4:y=(Math.floor(R/3)+Math.floor(F/2))%2==0;break;case 5:y=R*F%2+R*F%3==0;break;case 6:y=(R*F%2+R*F%3)%2==0;break;case 7:y=((R+F)%2+R*F%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[F][R]&&y&&(this.modules[F][R]=!this.modules[F][R])}}getPenaltyScore(){let S=0;for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[v][U]==D?(m++,m==5?S+=o.PENALTY_N1:m>5&&S++):(this.finderPenaltyAddHistory(m,T),D||(S+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[v][U],m=1);S+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let U=0;U<this.size;U++)this.modules[U][v]==D?(m++,m==5?S+=o.PENALTY_N1:m>5&&S++):(this.finderPenaltyAddHistory(m,T),D||(S+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[U][v],m=1);S+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let D=0;D<this.size-1;D++){const m=this.modules[v][D];m==this.modules[v][D+1]&&m==this.modules[v+1][D]&&m==this.modules[v+1][D+1]&&(S+=o.PENALTY_N2)}let F=0;for(const v of this.modules)F=v.reduce((D,m)=>D+(m?1:0),F);const R=this.size*this.size,y=Math.ceil(Math.abs(F*20-R*10)/R)-1;return w(0<=y&&y<=9),S+=y*o.PENALTY_N4,w(0<=S&&S<=2568888),S}getAlignmentPatternPositions(){if(this.version==1)return[];{const S=Math.floor(this.version/7)+2,F=this.version==32?26:Math.ceil((this.version*4+4)/(S*2-2))*2;let R=[6];for(let y=this.size-7;R.length<S;y-=F)R.splice(1,0,y);return R}}static getNumRawDataModules(S){if(S<o.MIN_VERSION||S>o.MAX_VERSION)throw new RangeError("Version number out of range");let F=(16*S+128)*S+64;if(S>=2){const R=Math.floor(S/7)+2;F-=(25*R-10)*R-55,S>=7&&(F-=36)}return w(208<=F&&F<=29648),F}static getNumDataCodewords(S,F){return Math.floor(o.getNumRawDataModules(S)/8)-o.ECC_CODEWORDS_PER_BLOCK[F.ordinal][S]*o.NUM_ERROR_CORRECTION_BLOCKS[F.ordinal][S]}static reedSolomonComputeDivisor(S){if(S<1||S>255)throw new RangeError("Degree out of range");let F=[];for(let y=0;y<S-1;y++)F.push(0);F.push(1);let R=1;for(let y=0;y<S;y++){for(let v=0;v<F.length;v++)F[v]=o.reedSolomonMultiply(F[v],R),v+1<F.length&&(F[v]^=F[v+1]);R=o.reedSolomonMultiply(R,2)}return F}static reedSolomonComputeRemainder(S,F){let R=F.map(y=>0);for(const y of S){const v=y^R.shift();R.push(0),F.forEach((D,m)=>R[m]^=o.reedSolomonMultiply(D,v))}return R}static reedSolomonMultiply(S,F){if(S>>>8||F>>>8)throw new RangeError("Byte out of range");let R=0;for(let y=7;y>=0;y--)R=R<<1^(R>>>7)*285,R^=(F>>>y&1)*S;return w(R>>>8==0),R}finderPenaltyCountPatterns(S){const F=S[1];w(F<=this.size*3);const R=F>0&&S[2]==F&&S[3]==F*3&&S[4]==F&&S[5]==F;return(R&&S[0]>=F*4&&S[6]>=F?1:0)+(R&&S[6]>=F*4&&S[0]>=F?1:0)}finderPenaltyTerminateAndCount(S,F,R){return S&&(this.finderPenaltyAddHistory(F,R),F=0),F+=this.size,this.finderPenaltyAddHistory(F,R),this.finderPenaltyCountPatterns(R)}finderPenaltyAddHistory(S,F){F[0]==0&&(S+=this.size),F.pop(),F.unshift(S)}};let l=o;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=l;function f(S,F,R){if(F<0||F>31||S>>>F)throw new RangeError("Value out of range");for(let y=F-1;y>=0;y--)R.push(S>>>y&1)}function p(S,F){return(S>>>F&1)!=0}function w(S){if(!S)throw new Error("Assertion error")}const b=class{constructor(S,F,R){if(this.mode=S,this.numChars=F,this.bitData=R,F<0)throw new RangeError("Invalid argument");this.bitData=R.slice()}static makeBytes(S){let F=[];for(const R of S)f(R,8,F);return new b(b.Mode.BYTE,S.length,F)}static makeNumeric(S){if(!b.isNumeric(S))throw new RangeError("String contains non-numeric characters");let F=[];for(let R=0;R<S.length;){const y=Math.min(S.length-R,3);f(parseInt(S.substr(R,y),10),y*3+1,F),R+=y}return new b(b.Mode.NUMERIC,S.length,F)}static makeAlphanumeric(S){if(!b.isAlphanumeric(S))throw new RangeError("String contains unencodable characters in alphanumeric mode");let F=[],R;for(R=0;R+2<=S.length;R+=2){let y=b.ALPHANUMERIC_CHARSET.indexOf(S.charAt(R))*45;y+=b.ALPHANUMERIC_CHARSET.indexOf(S.charAt(R+1)),f(y,11,F)}return R<S.length&&f(b.ALPHANUMERIC_CHARSET.indexOf(S.charAt(R)),6,F),new b(b.Mode.ALPHANUMERIC,S.length,F)}static makeSegments(S){return S==""?[]:b.isNumeric(S)?[b.makeNumeric(S)]:b.isAlphanumeric(S)?[b.makeAlphanumeric(S)]:[b.makeBytes(b.toUtf8ByteArray(S))]}static makeEci(S){let F=[];if(S<0)throw new RangeError("ECI assignment value out of range");if(S<128)f(S,8,F);else if(S<16384)f(2,2,F),f(S,14,F);else if(S<1e6)f(6,3,F),f(S,21,F);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,F)}static isNumeric(S){return b.NUMERIC_REGEX.test(S)}static isAlphanumeric(S){return b.ALPHANUMERIC_REGEX.test(S)}getData(){return this.bitData.slice()}static getTotalBits(S,F){let R=0;for(const y of S){const v=y.mode.numCharCountBits(F);if(y.numChars>=1<<v)return 1/0;R+=4+v+y.bitData.length}return R}static toUtf8ByteArray(S){S=encodeURI(S);let F=[];for(let R=0;R<S.length;R++)S.charAt(R)!="%"?F.push(S.charCodeAt(R)):(F.push(parseInt(S.substr(R+1,2),16)),R+=2);return F}};let g=b;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=g})(Ef||(Ef={}));(i=>{(o=>{const l=class{constructor(p,w){this.ordinal=p,this.formatBits=w}};let f=l;f.LOW=new l(0,1),f.MEDIUM=new l(1,0),f.QUARTILE=new l(2,3),f.HIGH=new l(3,2),o.Ecc=f})(i.QrCode||(i.QrCode={}))})(Ef||(Ef={}));(i=>{(o=>{const l=class{constructor(p,w){this.modeBits=p,this.numBitsCharCount=w}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let f=l;f.NUMERIC=new l(1,[10,12,14]),f.ALPHANUMERIC=new l(2,[9,11,13]),f.BYTE=new l(4,[8,16,16]),f.KANJI=new l(8,[8,10,12]),f.ECI=new l(7,[0,0,0]),o.Mode=f})(i.QrSegment||(i.QrSegment={}))})(Ef||(Ef={}));var ih=Ef;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var kB={L:ih.QrCode.Ecc.LOW,M:ih.QrCode.Ecc.MEDIUM,Q:ih.QrCode.Ecc.QUARTILE,H:ih.QrCode.Ecc.HIGH},FB=128,UB="L",BB="#FFFFFF",jB="#000000",ZB=!1,iR=4,xee=.1;function GB(i,o=0){const l=[];return i.forEach(function(f,p){let w=null;f.forEach(function(b,g){if(!b&&w!==null){l.push("M".concat(w+o," ").concat(p+o,"h").concat(g-w,"v1H").concat(w+o,"z")),w=null;return}if(g===f.length-1){if(!b)return;w===null?l.push("M".concat(g+o,",").concat(p+o," h1v1H").concat(g+o,"z")):l.push("M".concat(w+o,",").concat(p+o," h").concat(g+1-w,"v1H").concat(w+o,"z"));return}b&&w===null&&(w=g)})}),l.join("")}function qB(i,o){return i.slice().map((l,f)=>f<o.y||f>=o.y+o.h?l:l.map((p,w)=>w<o.x||w>=o.x+o.w?p:!1))}function HB(i,o,l,f){if(f==null)return null;const p=l?iR:0,w=i.length+p*2,b=Math.floor(o*xee),g=w/o,S=(f.width||b)*g,F=(f.height||b)*g,R=f.x==null?i.length/2-S/2:f.x*g,y=f.y==null?i.length/2-F/2:f.y*g;let v=null;if(f.excavate){let D=Math.floor(R),m=Math.floor(y),T=Math.ceil(S+R-D),U=Math.ceil(F+y-m);v={x:D,y:m,w:T,h:U}}return{x:R,y,h:F,w:S,excavation:v}}var Nee=function(){try{new Path2D().addPath(new Path2D)}catch(i){return!1}return!0}();function Mee(i){const o=i,{value:l,size:f=FB,level:p=UB,bgColor:w=BB,fgColor:b=jB,includeMargin:g=ZB,style:S,imageSettings:F}=o,R=rR(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),y=F==null?void 0:F.src,v=pn.useRef(null),D=pn.useRef(null),[m,T]=pn.useState(!1);pn.useEffect(()=>{if(v.current!=null){const _=v.current,I=_.getContext("2d");if(!I)return;let C=ih.QrCode.encodeText(l,kB[p]).getModules();const j=g?iR:0,Y=C.length+j*2,$=HB(C,f,g,F),W=D.current,ue=$!=null&&W!==null&&W.complete&&W.naturalHeight!==0&&W.naturalWidth!==0;ue&&$.excavation!=null&&(C=qB(C,$.excavation));const x=window.devicePixelRatio||1;_.height=_.width=f*x;const X=f/Y*x;I.scale(X,X),I.fillStyle=w,I.fillRect(0,0,Y,Y),I.fillStyle=b,Nee?I.fill(new Path2D(GB(C,j))):C.forEach(function(de,oe){de.forEach(function(ve,Ce){ve&&I.fillRect(Ce+j,oe+j,1,1)})}),ue&&I.drawImage(W,$.x+j,$.y+j,$.w,$.h)}}),pn.useEffect(()=>{T(!1)},[y]);const U=zg({height:f,width:f},S);let N=null;return y!=null&&(N=ru.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{T(!0)},ref:D})),ru.createElement(ru.Fragment,null,ru.createElement("canvas",zg({style:U,height:f,width:f,ref:v},R)),N)}function Dee(i){const o=i,{value:l,size:f=FB,level:p=UB,bgColor:w=BB,fgColor:b=jB,includeMargin:g=ZB,imageSettings:S}=o,F=rR(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let R=ih.QrCode.encodeText(l,kB[p]).getModules();const y=g?iR:0,v=R.length+y*2,D=HB(R,f,g,S);let m=null;S!=null&&D!=null&&(D.excavation!=null&&(R=qB(R,D.excavation)),m=ru.createElement("image",{xlinkHref:S.src,height:D.h,width:D.w,x:D.x+y,y:D.y+y,preserveAspectRatio:"none"}));const T=GB(R,y);return ru.createElement("svg",zg({height:f,width:f,viewBox:"0 0 ".concat(v," ").concat(v)},F),ru.createElement("path",{fill:w,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),ru.createElement("path",{fill:b,d:T,shapeRendering:"crispEdges"}),m)}var oR=i=>{const o=i,{renderAs:l}=o,f=rR(o,["renderAs"]);return l==="svg"?ru.createElement(Dee,zg({},f)):ru.createElement(Mee,zg({},f))};const Pee="_container_1l3tn_1",Oee="_qrCode_1l3tn_25",Lee="_text_1l3tn_35",iI={container:Pee,qrCode:Oee,text:Lee},kee=({url:i})=>wt.jsxs("div",{className:iI.container,children:[wt.jsx("p",{className:"body-text ".concat(iI.text),style:{opacity:.75},children:"Scan the QR code with the app."}),wt.jsx(oR,{className:iI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500})]}),Fee="_controlsWrapper_1v4q3_1",Uee="_hidden_1v4q3_21",Bee="_iconWrapper_1v4q3_29",oI={controlsWrapper:Fee,hidden:Uee,iconWrapper:Bee},jee=({visible:i,eventPlayer:o})=>{const[l,f]=pn.useState(!1),p=()=>{o&&(l?o.exitFullscreen().then(()=>{f(!1)}):o.requestFullscreen().then(()=>{f(!0)}))};return wt.jsx("div",{className:"".concat(oI.controlsWrapper," ").concat(i?"":oI.hidden),children:wt.jsx("div",{className:oI.iconWrapper,onClick:p,children:l?wt.jsx(gee,{}):wt.jsx(pee,{})})})},Zee="_warningContainer_1tqkb_1",Gee={warningContainer:Zee},KB=()=>wt.jsxs("div",{className:Gee.warningContainer,children:[wt.jsx(PB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),wt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),qee="_messageContainer_1jzyd_3",Hee="_message_1jzyd_3",eF={messageContainer:qee,message:Hee},Kee=({message:i})=>wt.jsx("div",{className:eF.messageContainer,children:wt.jsx("div",{className:"".concat(eF.message," subheader-light"),children:i})});function Vee(){const[i,o,l]=GU(),f=LC(),p=CJ("#playerContainer",o,l),[w,b]=pn.useState(!1),[g,S]=pn.useState(),F=kC(),R=pn.useRef(),y=pn.useMemo(()=>{const U=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(U)},[]);pn.useEffect(()=>{const U=F==null?void 0:F.find(N=>N.deviceId===yh);S(U)},[F]);const v=!!(F!=null&&F.filter(U=>U.deviceId!==yh));AJ(p),IJ(p),bJ(p);const[D,m]=RJ(p);wJ();const T=()=>{y||(b(!0),clearTimeout(R.current),R.current=setTimeout(()=>{b(!1)},3e3))};return wt.jsxs("div",{className:Q3.playerPage,onMouseMove:T,children:[wt.jsxs("div",{id:"playerContainer",className:Q3.playerContainer,children:[f&&wt.jsx(wz,{eventPlayer:p}),wt.jsx(Cee,{}),wt.jsx(jee,{visible:w,eventPlayer:p}),(g==null?void 0:g.stateInfo.state)==="showQrCode"&&wt.jsx(kee,{url:"".concat(xC,":").concat(g.deviceId)}),wt.jsx(vee,{fromCamera:D,toCamera:m})]}),!v&&wt.jsx(Kee,{message:wt.jsx(KB,{})})]})}const zee="_gradientBackground_b6nct_1",Yee="_container_b6nct_15",Wee="_fadeIn_b6nct_1",$ee="_connectedTV_b6nct_45",Xee="_disconnectedTV_b6nct_47",Qee="_popIn_b6nct_1",Jee="_iconContainer_b6nct_105",ete="_connectedText_b6nct_121",qd={gradientBackground:zee,container:Yee,fadeIn:Wee,connectedTV:$ee,disconnectedTV:Xee,popIn:Qee,iconContainer:Jee,connectedText:ete},tte=({isDisconnected:i})=>wt.jsx("div",{className:qd.gradientBackground,children:wt.jsxs("div",{className:qd.container,children:[wt.jsx("div",{className:i?qd.disconnectedTV:qd.connectedTV,children:wt.jsx("div",{className:qd.iconContainer,children:i?wt.jsx(dee,{}):wt.jsx(fee,{})})}),wt.jsx("h1",{className:qd.connectedText,children:i?"TV disconnected":"TV connected"})]})}),nte="_hidden_zykq7_1",rte={hidden:nte},ite="_gradientBackground_14xmh_1",ote="_container_14xmh_15",ate="_fadeIn_14xmh_1",ste="_imageWrapper_14xmh_45",ute="_listText_14xmh_57",lte="_boldText_14xmh_57",cte="_image_14xmh_45",fte="_glow_14xmh_91",dte="_dividerWrapper_14xmh_119",hte="_divider_14xmh_119",pte="_buttonsWrapper_14xmh_149",gte="_testButton_14xmh_185",mte="_demoButton_14xmh_195",vte="_logoutButton_14xmh_203",yte="_title_14xmh_215",Ete="_countdownWrapper_14xmh_225",_te="_timeSectionContainer_14xmh_253",Tte="_timeSection_14xmh_253",Ste="_countdownTitle_14xmh_277",wte="_label_14xmh_285",Ate="_logos_14xmh_293",Ite="_warning_14xmh_339",ki={gradientBackground:ite,container:ote,fadeIn:ate,imageWrapper:ste,listText:ute,boldText:lte,image:cte,glow:fte,dividerWrapper:dte,divider:hte,buttonsWrapper:pte,testButton:gte,demoButton:mte,logoutButton:vte,title:yte,countdownWrapper:Ete,timeSectionContainer:_te,timeSection:Tte,countdownTitle:Ste,label:wte,logos:Ate,warning:Ite},bte="_errorContainer_1vpqa_1",Cte={errorContainer:bte},Rte=({errorIcon:i,errorMessage:o,errorName:l})=>wt.jsxs("div",{className:Cte.errorContainer,children:[i&&wt.jsx("div",{children:i}),wt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(o)})]}),xte="_gradientBackground_1pfse_1",Nte="_container_1pfse_19",Mte="_qrCode_1pfse_33",aI={gradientBackground:xte,container:Nte,qrCode:Mte},Dte=({url:i})=>wt.jsxs("div",{className:"".concat(aI.gradientBackground," ").concat(aI.container),children:[wt.jsx(oR,{className:aI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500}),wt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),Pte=({timeToLive:i})=>{const o=_z(),l=uu(),f=OC(),p=LC(),w=kC(),[b,g]=pn.useState(),[S,F]=pn.useState("00:00:00:00"),[R,y]=pn.useState(!1),v=pn.useRef(null),D=5;pn.useEffect(()=>{const C=w==null?void 0:w.filter(j=>j.deviceId!==yh);y(!!(C!=null&&C.length))},[w]),pn.useEffect(()=>{const C=w==null?void 0:w.find(j=>j.deviceId===yh);g(C)},[w]);let m;(C=>{C.BEFORE="before",C.MIDDLE="middle",C.END="end"})(m||(m={}));const T=C=>{if(l){let j=new Date;switch(C){case"end":j=new Date(l.demoEndtime);break;case"middle":j.setMinutes(j.getMinutes()-22);break;default:case"before":j.setSeconds(j.getSeconds()+D);break}l.updateStartTime(j,!0)}};pn.useEffect(()=>{if(i&&i>0){const C=W=>{const ue=Date.parse(W.toString())-Date.parse(new Date().toString()),x=Math.floor(ue/1e3%60),X=Math.floor(ue/1e3/60%60),de=Math.floor(ue/1e3/60/60%24),oe=Math.floor(ue/1e3/60/60/24);return{total:ue,days:oe,hours:de,minutes:X,seconds:x}},j=W=>{const{total:ue,days:x,hours:X,minutes:de,seconds:oe}=C(W);ue>=0&&F((x>9?x:"0"+x)+":"+(X>9?X:"0"+X)+":"+(de>9?de:"0"+de)+":"+(oe>9?oe:"0"+oe))};(W=>{v.current&&clearInterval(v.current),j(W);const ue=setInterval(()=>{j(W)},1e3);v.current=ue})((W=>{const ue=new Date;return ue.setSeconds(ue.getSeconds()+Math.floor(W/1e3)),ue})(i))}},[i]);const[U,N,_,I]=S.split(":");if(b&&b.stateInfo.state==="showQrCode"){const C="".concat(xC,":").concat(b.deviceId);return wt.jsx(Dte,{url:C})}return wt.jsxs("div",{className:ki.container,children:[p&&wt.jsx("div",{className:ki.buttonsWrapper,children:wt.jsxs("div",{children:[wt.jsx(jo,{className:"".concat(ki.demoButton," ").concat(ki.testButton),onClick:()=>{T("before")},selfFocus:!0,children:"Before"}),wt.jsx(jo,{className:ki.testButton,onClick:()=>{T("middle")},children:"Middle"}),wt.jsx(jo,{className:ki.testButton,onClick:()=>{T("end")},children:"End"})]})}),o.map((C,j)=>wt.jsx(Rte,{errorMessage:C.toString},"".concat(C.name,"-error-").concat(j.toString()))),wt.jsxs("div",{className:ki.imageWrapper,children:[wt.jsx("div",{className:ki.glow}),wt.jsx("img",{className:ki.image,src:"".concat(f==null?void 0:f.preScreen.backgroundLandscape.url)})]}),wt.jsxs("div",{className:ki.countdownWrapper,children:[wt.jsx("div",{className:"".concat(ki.title," subheader-bold"),children:f==null?void 0:f.preScreen.showTitle}),wt.jsx("div",{className:ki.dividerWrapper,children:wt.jsx("div",{className:ki.divider})}),wt.jsx("p",{className:"body-text ".concat(ki.countdownTitle),children:"Starts in"}),wt.jsxs("div",{className:ki.timeSectionContainer,children:[wt.jsxs("div",{className:ki.timeSection,children:[wt.jsx("div",{className:"subheader-bold",children:U}),wt.jsx("div",{className:"".concat(ki.label," label"),children:"days"})]}),wt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),wt.jsxs("div",{className:ki.timeSection,children:[wt.jsx("div",{className:"subheader-bold",children:N}),wt.jsx("div",{className:"".concat(ki.label," label"),children:"hours"})]}),wt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),wt.jsxs("div",{className:ki.timeSection,children:[wt.jsx("div",{className:"subheader-bold",children:_}),wt.jsx("div",{className:"".concat(ki.label," label"),children:"mins"})]}),wt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),wt.jsxs("div",{className:ki.timeSection,children:[wt.jsx("div",{className:"subheader-bold",children:I}),wt.jsx("div",{className:"".concat(ki.label," label"),children:"secs"})]})]})]}),wt.jsx("div",{className:ki.warning,children:!R&&U0==="new"&&wt.jsx(KB,{})})]})},Ote="_wrapper_7lsmt_1",Lte="_container_7lsmt_21",kte="_qrCodeContainer_7lsmt_41",Fte="_qrCode_7lsmt_41",Ute="_listContainer_7lsmt_67",Bte="_list_7lsmt_67",jte="_listItemContainer_7lsmt_101",Zte="_listNumber_7lsmt_115",Gte="_listText_7lsmt_137",qte="_circleRightCorner_7lsmt_149",Hte="_circleLeftCorner_7lsmt_173",Kte="_circleCenter_7lsmt_195",Vte="_errorMessage_7lsmt_219",zte="_fadeIn_7lsmt_1",ho={wrapper:Ote,container:Lte,qrCodeContainer:kte,qrCode:Fte,listContainer:Ute,list:Bte,listItemContainer:jte,listNumber:Zte,listText:Gte,circleRightCorner:qte,circleLeftCorner:Hte,circleCenter:Kte,errorMessage:Vte,fadeIn:zte},Yte=({url:i})=>{const o=yz(),l=Ez(),f=p=>{if(p.name===_a.NEGOTIATE)switch(p.code){case 400:p.title=o("ticket-entry","error.toManyDevices.title"),p.message=o("ticket-entry","error.toManyDevices.body");break;case 401:p.title=o("ticket-entry","error.invalidCode.title"),p.message=o("ticket-entry","error.invalidCode.body");break;case 403:p.title=o("ticket-entry","error.codeNoLongerValid.title"),p.message=o("ticket-entry","error.codeNoLongerValid.body");break;case 404:p.title="Not Found",p.message="Ticket was not found";break}else if(p.name===_a.CONTENTFUL)switch(p.code){case 400:p.message="Could not fetch contentful environment"}return p.toString};return wt.jsxs("div",{className:ho.wrapper,children:[wt.jsx("div",{className:ho.circleRightCorner}),wt.jsx("div",{className:ho.circleLeftCorner}),wt.jsx("div",{className:ho.circleCenter}),wt.jsxs("div",{className:ho.container,children:[wt.jsxs("div",{className:"".concat(ho.listContainer," body-text"),children:[wt.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),wt.jsxs("div",{className:ho.list,children:[wt.jsxs("span",{className:ho.listItemContainer,children:[wt.jsx("span",{className:ho.listNumber,children:"1"}),wt.jsxs("span",{className:ho.listText,children:["Download the ",wt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),wt.jsxs("span",{className:ho.listItemContainer,children:[wt.jsx("span",{className:ho.listNumber,children:"2"}),wt.jsx("span",{className:ho.listText,children:"Enter the ticket code from your confirmation email."})]}),wt.jsxs("span",{className:ho.listItemContainer,children:[wt.jsx("span",{className:ho.listNumber,children:"3"}),wt.jsx("span",{className:ho.listText,children:"Scan the QR code with the app."})]})]})]}),wt.jsx("div",{className:ho.qrCodeContainer,children:wt.jsx("div",{className:ho.qrCode,children:wt.jsx(oR,{bgColor:"white",fgColor:"black",value:i!=null?i:"",size:512})})})]}),wt.jsx("div",{className:ho.errorMessage,children:l.map((p,w)=>wt.jsx("h3",{className:ho.errorMessage,children:f(p)},"".concat(p.name,"-error-").concat(w.toString())))})]})},Wte="_container_zht4e_1",$te="_fadeIn_zht4e_1",Xte="_scrollWrapper_zht4e_15",Qte="_scrollContainer_zht4e_29",sI={container:Wte,fadeIn:$te,scrollWrapper:Xte,scrollContainer:Qte};function Jte(){const i=OC();return wt.jsxs("div",{className:sI.container,children:[wt.jsx("h1",{children:"Oh no! This event has been canceled."}),wt.jsx("div",{className:sI.scrollWrapper,children:wt.jsx("div",{className:sI.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>wt.jsx("img",{src:o.image.url},l))})})]})}function ene(){const i=uu();vz();const o=im(),l=pz(),f=If(),p=kC(),[w,b]=pn.useState(!1),[g,S]=pn.useState(!1),[F,R]=pn.useState(!1),[y,v]=pn.useState(),[D,m]=pn.useState(!1),[T,U]=pn.useState(!1),[N,_]=pn.useState(!1),[I,C]=pn.useState(),[j,Y]=pn.useState(),$="".concat(xC,":").concat(yh);if(pn.useEffect(()=>{p&&C(p.find(W=>W.deviceId===yh)||p[0])},[p]),pn.useEffect(()=>{Y(I==null?void 0:I.stateInfo.state)},[I]),pn.useEffect(()=>{if(!i)return;const W=()=>{i.adjustedEndTime&&i.adjustedEndTime<Date.now()?S(!0):i.adjustedStartTime&&(S(!1),v(i.adjustedStartTime-Date.now()))};return i.on("startTimeUpdated",W),()=>{i.off("startTimeUpdated",W)}},[i]),pn.useEffect(()=>{if(!o)return;const W=()=>{S(!0)};return o.on("eventEnded",W),()=>{o.off("eventEnded",W)}},[o]),pn.useEffect(()=>{if(!f)return;const W=()=>{R(!0)};return f.on("eventCanceled",W),()=>{f.off("eventCanceled",W)}},[f]),pn.useEffect(()=>{if(!D)return;U(!0);const W=setTimeout(()=>{m(!1)},1500);return()=>{clearTimeout(W)}},[D]),pn.useEffect(()=>{if(y)if(y>0){b(!1);const W=setTimeout(()=>{b(!0)},y);return()=>{clearTimeout(W)}}else b(!0)},[y]),pn.useEffect(()=>{j==="hostTv"?(_(!0),m(!0)):l===nb.CONNECTED_STATE&&U0!=="new"&&m(!0)},[j,l]),F)return wt.jsx(Jte,{});if(g)return wt.jsx(PJ,{});{if(!N&&j===void 0)return wt.jsx(wt.Fragment,{children:wt.jsx(Yte,{url:$})});if(D&&!T)return wt.jsx(tte,{})}return wt.jsxs("div",{children:[wt.jsx("div",{className:w?"":rte.hidden,children:wt.jsx(Vee,{})}),!w&&wt.jsx(Pte,{timeToLive:y})]})}const tne=()=>{const[i,o]=pn.useState(0);return pn.useEffect(()=>{const l=p=>{o(p.keyCode)},f=()=>{o(0)};return document.addEventListener("keydown",l),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",f)}},[]),i};function nne(){switch(RC()){case cc.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case cc.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case cc.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const Jc=nne(),rne="_popupWrapper_19u5b_1",ine="_popup_19u5b_1",one="_controls_19u5b_59",ane="_focused_19u5b_93",ug={popupWrapper:rne,popup:ine,controls:one,focused:ane};function sne({close:i}){const o=If(),l=async()=>{const f=RC();o!=null&&o.connected&&await o.destroy(),localStorage.removeItem("ticketCode"),setTimeout(()=>{switch(f){case cc.TIZEN:window.tizen.application.getCurrentApplication().exit();break;case cc.WEBOS:window.close();break;default:location.reload();break}},1e3)};return wt.jsx("div",{className:ug.popupWrapper,children:wt.jsxs("div",{className:ug.popup,children:[wt.jsx("h3",{children:"Would you like to exit app?"}),wt.jsxs("div",{className:ug.controls,children:[wt.jsx(jo,{onClick:i,selfFocus:!0,focusstile:ug.focused,children:"Cancel"}),wt.jsx(jo,{onClick:l,focusstile:ug.focused,children:"Confirm"})]})]})})}const une="_popupWrapper_ohcuf_1",lne="_popup_ohcuf_1",cne="_focused_ohcuf_89",uI={popupWrapper:une,popup:lne,focused:cne};function fne({close:i}){return wt.jsx("div",{className:uI.popupWrapper,children:wt.jsxs("div",{className:uI.popup,children:[wt.jsx(cee,{styles:{width:"96px",height:"96px"}}),wt.jsx("h3",{children:"No Internet connection"}),wt.jsx("span",{children:"Check your connection and try again."}),wt.jsx(jo,{onClick:i,selfFocus:!0,focusstile:uI.focused,children:"OK"})]})})}const dne="_warningContainer_1q3xx_1",hne={warningContainer:dne},pne=()=>wt.jsxs("div",{className:hne.warningContainer,children:[wt.jsx(PB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),wt.jsx("p",{className:"label",children:"Unsupported key pressed "})]});function gne(){const i=tne(),[o,l]=pn.useState(),f=pn.useRef(),p=()=>{l(void 0)};switch(pn.useEffect(()=>(window.addEventListener("offline",()=>{l("network")}),window.addEventListener("online",()=>{p()}),()=>{window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{})}),[]),pn.useEffect(()=>{i===Jc.KEY_BACK?l("exit"):[Jc.KEY_UP,Jc.KEY_DOWN,Jc.KEY_LEFT,Jc.KEY_RIGHT,Jc.KEY_OK,Jc.KEY_BACK,0].includes(i)||(l("key_support"),clearTimeout(f.current),f.current=setTimeout(()=>{p()},3e3))},[i]),o){case"exit":return wt.jsx(sne,{close:p});case"network":return wt.jsx(fne,{close:p});case"key_support":return wt.jsx(pne,{});default:return}}OU.init({debug:!1,shouldUseNativeEvents:!0});function mne(){const i=localStorage.getItem("ticketCode"),[o,l]=pn.useState(i!=null?i:"");return wt.jsx("div",{className:sV.pageContainer,children:wt.jsxs(fz,{baseUrl:eV,preferredProfile:"dash-drm",contentfulAccessToken:tV,contentfulSpaceId:nV,newSetupToggle:U0==="new",ticketCodeProp:o,children:[U0!=="new",wt.jsx(ene,{}),wt.jsx(gne,{})]})})}lI.createRoot(document.getElementById("root")).render(wt.jsx(mne,{}));export{vne as __vite_legacy_guard};
