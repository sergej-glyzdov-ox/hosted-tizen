function xte(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const I of p)if(I.type==="childList")for(const R of I.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&d(R)}).observe(document,{childList:!0,subtree:!0});function l(p){const I={};return p.integrity&&(I.integrity=p.integrity),p.referrerPolicy&&(I.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?I.credentials="include":p.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function d(p){if(p.ep)return;p.ep=!0;const I=l(p);fetch(p.href,I)}})();var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var q3={exports:{}},U0={},tT={exports:{}},Pr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID;function e9(){if(ID)return Pr;ID=1;var i=Symbol.for("react.element"),o=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),R=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),U=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),y=Symbol.iterator;function v(Ie){return Ie===null||typeof Ie!="object"?null:(Ie=y&&Ie[y]||Ie["@@iterator"],typeof Ie=="function"?Ie:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,T={};function F(Ie,qe,gt){this.props=Ie,this.context=qe,this.refs=T,this.updater=gt||D}F.prototype.isReactComponent={},F.prototype.setState=function(Ie,qe){if(typeof Ie!="object"&&typeof Ie!="function"&&Ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ie,qe,"setState")},F.prototype.forceUpdate=function(Ie){this.updater.enqueueForceUpdate(this,Ie,"forceUpdate")};function N(){}N.prototype=F.prototype;function _(Ie,qe,gt){this.props=Ie,this.context=qe,this.refs=T,this.updater=gt||D}var A=_.prototype=new N;A.constructor=_,m(A,F.prototype),A.isPureReactComponent=!0;var b=Array.isArray,j=Object.prototype.hasOwnProperty,Y={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function $(Ie,qe,gt){var Me,We={},rt=null,Ht=null;if(qe!=null)for(Me in qe.ref!==void 0&&(Ht=qe.ref),qe.key!==void 0&&(rt=""+qe.key),qe)j.call(qe,Me)&&!W.hasOwnProperty(Me)&&(We[Me]=qe[Me]);var kt=arguments.length-2;if(kt===1)We.children=gt;else if(1<kt){for(var mt=Array(kt),Rt=0;Rt<kt;Rt++)mt[Rt]=arguments[Rt+2];We.children=mt}if(Ie&&Ie.defaultProps)for(Me in kt=Ie.defaultProps,kt)We[Me]===void 0&&(We[Me]=kt[Me]);return{$$typeof:i,type:Ie,key:rt,ref:Ht,props:We,_owner:Y.current}}function se(Ie,qe){return{$$typeof:i,type:Ie.type,key:qe,ref:Ie.ref,props:Ie.props,_owner:Ie._owner}}function x(Ie){return typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===i}function X(Ie){var qe={"=":"=0",":":"=2"};return"$"+Ie.replace(/[=:]/g,function(gt){return qe[gt]})}var ce=/\/+/g;function oe(Ie,qe){return typeof Ie=="object"&&Ie!==null&&Ie.key!=null?X(""+Ie.key):qe.toString(36)}function me(Ie,qe,gt,Me,We){var rt=typeof Ie;(rt==="undefined"||rt==="boolean")&&(Ie=null);var Ht=!1;if(Ie===null)Ht=!0;else switch(rt){case"string":case"number":Ht=!0;break;case"object":switch(Ie.$$typeof){case i:case o:Ht=!0}}if(Ht)return Ht=Ie,We=We(Ht),Ie=Me===""?"."+oe(Ht,0):Me,b(We)?(gt="",Ie!=null&&(gt=Ie.replace(ce,"$&/")+"/"),me(We,qe,gt,"",function(Rt){return Rt})):We!=null&&(x(We)&&(We=se(We,gt+(!We.key||Ht&&Ht.key===We.key?"":(""+We.key).replace(ce,"$&/")+"/")+Ie)),qe.push(We)),1;if(Ht=0,Me=Me===""?".":Me+":",b(Ie))for(var kt=0;kt<Ie.length;kt++){rt=Ie[kt];var mt=Me+oe(rt,kt);Ht+=me(rt,qe,gt,mt,We)}else if(mt=v(Ie),typeof mt=="function")for(Ie=mt.call(Ie),kt=0;!(rt=Ie.next()).done;)rt=rt.value,mt=Me+oe(rt,kt++),Ht+=me(rt,qe,gt,mt,We);else if(rt==="object")throw qe=String(Ie),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Ie).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.");return Ht}function Ce(Ie,qe,gt){if(Ie==null)return Ie;var Me=[],We=0;return me(Ie,Me,"","",function(rt){return qe.call(gt,rt,We++)}),Me}function Je(Ie){if(Ie._status===-1){var qe=Ie._result;qe=qe(),qe.then(function(gt){(Ie._status===0||Ie._status===-1)&&(Ie._status=1,Ie._result=gt)},function(gt){(Ie._status===0||Ie._status===-1)&&(Ie._status=2,Ie._result=gt)}),Ie._status===-1&&(Ie._status=0,Ie._result=qe)}if(Ie._status===1)return Ie._result.default;throw Ie._result}var Te={current:null},je={transition:null},ot={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:je,ReactCurrentOwner:Y};function ct(){throw Error("act(...) is not supported in production builds of React.")}return Pr.Children={map:Ce,forEach:function(Ie,qe,gt){Ce(Ie,function(){qe.apply(this,arguments)},gt)},count:function(Ie){var qe=0;return Ce(Ie,function(){qe++}),qe},toArray:function(Ie){return Ce(Ie,function(qe){return qe})||[]},only:function(Ie){if(!x(Ie))throw Error("React.Children.only expected to receive a single React element child.");return Ie}},Pr.Component=F,Pr.Fragment=l,Pr.Profiler=p,Pr.PureComponent=_,Pr.StrictMode=d,Pr.Suspense=w,Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ot,Pr.act=ct,Pr.cloneElement=function(Ie,qe,gt){if(Ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ie+".");var Me=m({},Ie.props),We=Ie.key,rt=Ie.ref,Ht=Ie._owner;if(qe!=null){if(qe.ref!==void 0&&(rt=qe.ref,Ht=Y.current),qe.key!==void 0&&(We=""+qe.key),Ie.type&&Ie.type.defaultProps)var kt=Ie.type.defaultProps;for(mt in qe)j.call(qe,mt)&&!W.hasOwnProperty(mt)&&(Me[mt]=qe[mt]===void 0&&kt!==void 0?kt[mt]:qe[mt])}var mt=arguments.length-2;if(mt===1)Me.children=gt;else if(1<mt){kt=Array(mt);for(var Rt=0;Rt<mt;Rt++)kt[Rt]=arguments[Rt+2];Me.children=kt}return{$$typeof:i,type:Ie.type,key:We,ref:rt,props:Me,_owner:Ht}},Pr.createContext=function(Ie){return Ie={$$typeof:R,_currentValue:Ie,_currentValue2:Ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ie.Provider={$$typeof:I,_context:Ie},Ie.Consumer=Ie},Pr.createElement=$,Pr.createFactory=function(Ie){var qe=$.bind(null,Ie);return qe.type=Ie,qe},Pr.createRef=function(){return{current:null}},Pr.forwardRef=function(Ie){return{$$typeof:g,render:Ie}},Pr.isValidElement=x,Pr.lazy=function(Ie){return{$$typeof:C,_payload:{_status:-1,_result:Ie},_init:Je}},Pr.memo=function(Ie,qe){return{$$typeof:U,type:Ie,compare:qe===void 0?null:qe}},Pr.startTransition=function(Ie){var qe=je.transition;je.transition={};try{Ie()}finally{je.transition=qe}},Pr.unstable_act=ct,Pr.useCallback=function(Ie,qe){return Te.current.useCallback(Ie,qe)},Pr.useContext=function(Ie){return Te.current.useContext(Ie)},Pr.useDebugValue=function(){},Pr.useDeferredValue=function(Ie){return Te.current.useDeferredValue(Ie)},Pr.useEffect=function(Ie,qe){return Te.current.useEffect(Ie,qe)},Pr.useId=function(){return Te.current.useId()},Pr.useImperativeHandle=function(Ie,qe,gt){return Te.current.useImperativeHandle(Ie,qe,gt)},Pr.useInsertionEffect=function(Ie,qe){return Te.current.useInsertionEffect(Ie,qe)},Pr.useLayoutEffect=function(Ie,qe){return Te.current.useLayoutEffect(Ie,qe)},Pr.useMemo=function(Ie,qe){return Te.current.useMemo(Ie,qe)},Pr.useReducer=function(Ie,qe,gt){return Te.current.useReducer(Ie,qe,gt)},Pr.useRef=function(Ie){return Te.current.useRef(Ie)},Pr.useState=function(Ie){return Te.current.useState(Ie)},Pr.useSyncExternalStore=function(Ie,qe,gt){return Te.current.useSyncExternalStore(Ie,qe,gt)},Pr.useTransition=function(){return Te.current.useTransition()},Pr.version="18.3.1",Pr}var bD;function B0(){return bD||(bD=1,tT.exports=e9()),tT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t9=B0(),n9=Symbol.for("react.element"),r9=Symbol.for("react.fragment"),i9=Object.prototype.hasOwnProperty,o9=t9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a9={key:!0,ref:!0,__self:!0,__source:!0};function H3(i,o,l){var d,p={},I=null,R=null;l!==void 0&&(I=""+l),o.key!==void 0&&(I=""+o.key),o.ref!==void 0&&(R=o.ref);for(d in o)i9.call(o,d)&&!a9.hasOwnProperty(d)&&(p[d]=o[d]);if(i&&i.defaultProps)for(d in o=i.defaultProps,o)p[d]===void 0&&(p[d]=o[d]);return{$$typeof:n9,type:i,key:I,ref:R,props:p,_owner:o9.current}}U0.Fragment=r9;U0.jsx=H3;U0.jsxs=H3;q3.exports=U0;var bt=q3.exports,nI={},K3={exports:{}},ds={},V3={exports:{}},z3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(je,ot){var ct=je.length;je.push(ot);e:for(;0<ct;){var Ie=ct-1>>>1,qe=je[Ie];if(0<p(qe,ot))je[Ie]=ot,je[ct]=qe,ct=Ie;else break e}}function l(je){return je.length===0?null:je[0]}function d(je){if(je.length===0)return null;var ot=je[0],ct=je.pop();if(ct!==ot){je[0]=ct;e:for(var Ie=0,qe=je.length,gt=qe>>>1;Ie<gt;){var Me=2*(Ie+1)-1,We=je[Me],rt=Me+1,Ht=je[rt];if(0>p(We,ct))rt<qe&&0>p(Ht,We)?(je[Ie]=Ht,je[rt]=ct,Ie=rt):(je[Ie]=We,je[Me]=ct,Ie=Me);else if(rt<qe&&0>p(Ht,ct))je[Ie]=Ht,je[rt]=ct,Ie=rt;else break e}}return ot}function p(je,ot){var ct=je.sortIndex-ot.sortIndex;return ct!==0?ct:je.id-ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var I=performance;i.unstable_now=function(){return I.now()}}else{var R=Date,g=R.now();i.unstable_now=function(){return R.now()-g}}var w=[],U=[],C=1,y=null,v=3,D=!1,m=!1,T=!1,F=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(je){for(var ot=l(U);ot!==null;){if(ot.callback===null)d(U);else if(ot.startTime<=je)d(U),ot.sortIndex=ot.expirationTime,o(w,ot);else break;ot=l(U)}}function b(je){if(T=!1,A(je),!m)if(l(w)!==null)m=!0,Je(j);else{var ot=l(U);ot!==null&&Te(b,ot.startTime-je)}}function j(je,ot){m=!1,T&&(T=!1,N($),$=-1),D=!0;var ct=v;try{for(A(ot),y=l(w);y!==null&&(!(y.expirationTime>ot)||je&&!X());){var Ie=y.callback;if(typeof Ie=="function"){y.callback=null,v=y.priorityLevel;var qe=Ie(y.expirationTime<=ot);ot=i.unstable_now(),typeof qe=="function"?y.callback=qe:y===l(w)&&d(w),A(ot)}else d(w);y=l(w)}if(y!==null)var gt=!0;else{var Me=l(U);Me!==null&&Te(b,Me.startTime-ot),gt=!1}return gt}finally{y=null,v=ct,D=!1}}var Y=!1,W=null,$=-1,se=5,x=-1;function X(){return!(i.unstable_now()-x<se)}function ce(){if(W!==null){var je=i.unstable_now();x=je;var ot=!0;try{ot=W(!0,je)}finally{ot?oe():(Y=!1,W=null)}}else Y=!1}var oe;if(typeof _=="function")oe=function(){_(ce)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ce=me.port2;me.port1.onmessage=ce,oe=function(){Ce.postMessage(null)}}else oe=function(){F(ce,0)};function Je(je){W=je,Y||(Y=!0,oe())}function Te(je,ot){$=F(function(){je(i.unstable_now())},ot)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(je){je.callback=null},i.unstable_continueExecution=function(){m||D||(m=!0,Je(j))},i.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<je?Math.floor(1e3/je):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return l(w)},i.unstable_next=function(je){switch(v){case 1:case 2:case 3:var ot=3;break;default:ot=v}var ct=v;v=ot;try{return je()}finally{v=ct}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(je,ot){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var ct=v;v=je;try{return ot()}finally{v=ct}},i.unstable_scheduleCallback=function(je,ot,ct){var Ie=i.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Ie+ct:Ie):ct=Ie,je){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=ct+qe,je={id:C++,callback:ot,priorityLevel:je,startTime:ct,expirationTime:qe,sortIndex:-1},ct>Ie?(je.sortIndex=ct,o(U,je),l(w)===null&&je===l(U)&&(T?(N($),$=-1):T=!0,Te(b,ct-Ie))):(je.sortIndex=qe,o(w,je),m||D||(m=!0,Je(j))),je},i.unstable_shouldYield=X,i.unstable_wrapCallback=function(je){var ot=v;return function(){var ct=v;v=ot;try{return je.apply(this,arguments)}finally{v=ct}}}})(z3);V3.exports=z3;var s9=V3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u9=B0(),fs=s9;function jn(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y3=new Set,wg={};function yf(i,o){uh(i,o),uh(i+"Capture",o)}function uh(i,o){for(wg[i]=o,i=0;i<o.length;i++)Y3.add(o[i])}var vl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rI=Object.prototype.hasOwnProperty,l9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,CD={},RD={};function c9(i){return rI.call(RD,i)?!0:rI.call(CD,i)?!1:l9.test(i)?RD[i]=!0:(CD[i]=!0,!1)}function f9(i,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function d9(i,o,l,d){if(o===null||typeof o>"u"||f9(i,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function _a(i,o,l,d,p,I,R){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=I,this.removeEmptyString=R}var Zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Zo[i]=new _a(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];Zo[o]=new _a(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Zo[i]=new _a(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Zo[i]=new _a(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Zo[i]=new _a(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Zo[i]=new _a(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Zo[i]=new _a(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Zo[i]=new _a(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Zo[i]=new _a(i,5,!1,i.toLowerCase(),null,!1,!1)});var db=/[\-:]([a-z])/g;function hb(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(db,hb);Zo[o]=new _a(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(db,hb);Zo[o]=new _a(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(db,hb);Zo[o]=new _a(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Zo[i]=new _a(i,1,!1,i.toLowerCase(),null,!1,!1)});Zo.xlinkHref=new _a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Zo[i]=new _a(i,1,!1,i.toLowerCase(),null,!0,!0)});function pb(i,o,l,d){var p=Zo.hasOwnProperty(o)?Zo[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(d9(o,l,p,d)&&(l=null),d||p===null?c9(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,o,l):i.setAttribute(o,l))))}var Tl=u9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ay=Symbol.for("react.element"),Zd=Symbol.for("react.portal"),Gd=Symbol.for("react.fragment"),gb=Symbol.for("react.strict_mode"),iI=Symbol.for("react.profiler"),W3=Symbol.for("react.provider"),$3=Symbol.for("react.context"),mb=Symbol.for("react.forward_ref"),oI=Symbol.for("react.suspense"),aI=Symbol.for("react.suspense_list"),vb=Symbol.for("react.memo"),Wl=Symbol.for("react.lazy"),X3=Symbol.for("react.offscreen"),xD=Symbol.iterator;function zp(i){return i===null||typeof i!="object"?null:(i=xD&&i[xD]||i["@@iterator"],typeof i=="function"?i:null)}var Vi=Object.assign,nT;function ag(i){if(nT===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);nT=o&&o[1]||""}return"\n"+nT+i}var rT=!1;function iT(i,o){if(!i||rT)return"";rT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(U){var d=U}Reflect.construct(i,[],o)}else{try{o.call()}catch(U){d=U}i.call(o.prototype)}else{try{throw Error()}catch(U){d=U}i()}}catch(U){if(U&&d&&typeof U.stack=="string"){for(var p=U.stack.split("\n"),I=d.stack.split("\n"),R=p.length-1,g=I.length-1;1<=R&&0<=g&&p[R]!==I[g];)g--;for(;1<=R&&0<=g;R--,g--)if(p[R]!==I[g]){if(R!==1||g!==1)do if(R--,g--,0>g||p[R]!==I[g]){var w="\n"+p[R].replace(" at new "," at ");return i.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",i.displayName)),w}while(1<=R&&0<=g);break}}}finally{rT=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?ag(i):""}function h9(i){switch(i.tag){case 5:return ag(i.type);case 16:return ag("Lazy");case 13:return ag("Suspense");case 19:return ag("SuspenseList");case 0:case 2:case 15:return i=iT(i.type,!1),i;case 11:return i=iT(i.type.render,!1),i;case 1:return i=iT(i.type,!0),i;default:return""}}function sI(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Gd:return"Fragment";case Zd:return"Portal";case iI:return"Profiler";case gb:return"StrictMode";case oI:return"Suspense";case aI:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $3:return(i.displayName||"Context")+".Consumer";case W3:return(i._context.displayName||"Context")+".Provider";case mb:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case vb:return o=i.displayName||null,o!==null?o:sI(i.type)||"Memo";case Wl:o=i._payload,i=i._init;try{return sI(i(o))}catch(l){}}return null}function p9(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sI(o);case 8:return o===gb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function cc(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Q3(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function g9(i){var o=Q3(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,I=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(R){d=""+R,I.call(this,R)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Iy(i){i._valueTracker||(i._valueTracker=g9(i))}function J3(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=Q3(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function s0(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(o){return i.body}}function uI(i,o){var l=o.checked;return Vi({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:i._wrapperState.initialChecked})}function ND(i,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=cc(o.value!=null?o.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function eF(i,o){o=o.checked,o!=null&&pb(i,"checked",o,!1)}function lI(i,o){eF(i,o);var l=cc(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?cI(i,o.type,l):o.hasOwnProperty("defaultValue")&&cI(i,o.type,cc(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function MD(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function cI(i,o,l){(o!=="number"||s0(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var sg=Array.isArray;function nh(i,o,l,d){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+cc(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function fI(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Vi({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function DD(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(jn(92));if(sg(l)){if(1<l.length)throw Error(jn(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:cc(l)}}function tF(i,o){var l=cc(o.value),d=cc(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function PD(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function nF(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dI(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?nF(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var by,rF=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,d,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(by=by||document.createElement("div"),by.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=by.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ag(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var hg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m9=["Webkit","ms","Moz","O"];Object.keys(hg).forEach(function(i){m9.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),hg[o]=hg[i]})});function iF(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||hg.hasOwnProperty(i)&&hg[i]?(""+o).trim():o+"px"}function oF(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=iF(l,o[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var v9=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hI(i,o){if(o){if(v9[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(jn(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(jn(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(jn(61))}if(o.style!=null&&typeof o.style!="object")throw Error(jn(62))}}function pI(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gI=null;function yb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mI=null,rh=null,ih=null;function OD(i){if(i=zg(i)){if(typeof mI!="function")throw Error(jn(280));var o=i.stateNode;o&&(o=H0(o),mI(i.stateNode,i.type,o))}}function aF(i){rh?ih?ih.push(i):ih=[i]:rh=i}function sF(){if(rh){var i=rh,o=ih;if(ih=rh=null,OD(i),o)for(i=0;i<o.length;i++)OD(o[i])}}function uF(i,o){return i(o)}function lF(){}var oT=!1;function cF(i,o,l){if(oT)return i(o,l);oT=!0;try{return uF(i,o,l)}finally{oT=!1,(rh!==null||ih!==null)&&(lF(),sF())}}function Ig(i,o){var l=i.stateNode;if(l===null)return null;var d=H0(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(jn(231,o,typeof l));return l}var vI=!1;if(vl)try{var Yp={};Object.defineProperty(Yp,"passive",{get:function(){vI=!0}}),window.addEventListener("test",Yp,Yp),window.removeEventListener("test",Yp,Yp)}catch(i){vI=!1}function y9(i,o,l,d,p,I,R,g,w){var U=Array.prototype.slice.call(arguments,3);try{o.apply(l,U)}catch(C){this.onError(C)}}var pg=!1,u0=null,l0=!1,yI=null,E9={onError:function(i){pg=!0,u0=i}};function _9(i,o,l,d,p,I,R,g,w){pg=!1,u0=null,y9.apply(E9,arguments)}function T9(i,o,l,d,p,I,R,g,w){if(_9.apply(this,arguments),pg){if(pg){var U=u0;pg=!1,u0=null}else throw Error(jn(198));l0||(l0=!0,yI=U)}}function Ef(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function fF(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function LD(i){if(Ef(i)!==i)throw Error(jn(188))}function S9(i){var o=i.alternate;if(!o){if(o=Ef(i),o===null)throw Error(jn(188));return o!==i?null:i}for(var l=i,d=o;;){var p=l.return;if(p===null)break;var I=p.alternate;if(I===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===I.child){for(I=p.child;I;){if(I===l)return LD(p),i;if(I===d)return LD(p),o;I=I.sibling}throw Error(jn(188))}if(l.return!==d.return)l=p,d=I;else{for(var R=!1,g=p.child;g;){if(g===l){R=!0,l=p,d=I;break}if(g===d){R=!0,d=p,l=I;break}g=g.sibling}if(!R){for(g=I.child;g;){if(g===l){R=!0,l=I,d=p;break}if(g===d){R=!0,d=I,l=p;break}g=g.sibling}if(!R)throw Error(jn(189))}}if(l.alternate!==d)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?i:o}function dF(i){return i=S9(i),i!==null?hF(i):null}function hF(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=hF(i);if(o!==null)return o;i=i.sibling}return null}var pF=fs.unstable_scheduleCallback,kD=fs.unstable_cancelCallback,w9=fs.unstable_shouldYield,A9=fs.unstable_requestPaint,lo=fs.unstable_now,I9=fs.unstable_getCurrentPriorityLevel,Eb=fs.unstable_ImmediatePriority,gF=fs.unstable_UserBlockingPriority,c0=fs.unstable_NormalPriority,b9=fs.unstable_LowPriority,mF=fs.unstable_IdlePriority,j0=null,Nu=null;function C9(i){if(Nu&&typeof Nu.onCommitFiberRoot=="function")try{Nu.onCommitFiberRoot(j0,i,void 0,(i.current.flags&128)===128)}catch(o){}}var iu=Math.clz32?Math.clz32:N9,R9=Math.log,x9=Math.LN2;function N9(i){return i>>>=0,i===0?32:31-(R9(i)/x9|0)|0}var Cy=64,Ry=4194304;function ug(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function f0(i,o){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,I=i.pingedLanes,R=l&268435455;if(R!==0){var g=R&~p;g!==0?d=ug(g):(I&=R,I!==0&&(d=ug(I)))}else R=l&~p,R!==0?d=ug(R):I!==0&&(d=ug(I));if(d===0)return 0;if(o!==0&&o!==d&&!(o&p)&&(p=d&-d,I=o&-o,p>=I||p===16&&(I&4194240)!==0))return o;if(d&4&&(d|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)l=31-iu(o),p=1<<l,d|=i[l],o&=~p;return d}function M9(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D9(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,I=i.pendingLanes;0<I;){var R=31-iu(I),g=1<<R,w=p[R];w===-1?(!(g&l)||g&d)&&(p[R]=M9(g,o)):w<=o&&(i.expiredLanes|=g),I&=~g}}function EI(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function vF(){var i=Cy;return Cy<<=1,!(Cy&4194240)&&(Cy=64),i}function aT(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Kg(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-iu(o),i[o]=l}function P9(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-iu(l),I=1<<p;o[p]=0,d[p]=-1,i[p]=-1,l&=~I}}function _b(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-iu(l),p=1<<d;p&o|i[d]&o&&(i[d]|=o),l&=~p}}var di=0;function yF(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var EF,Tb,_F,TF,SF,_I=!1,xy=[],tc=null,nc=null,rc=null,bg=new Map,Cg=new Map,Xl=[],O9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FD(i,o){switch(i){case"focusin":case"focusout":tc=null;break;case"dragenter":case"dragleave":nc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":bg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cg.delete(o.pointerId)}}function Wp(i,o,l,d,p,I){return i===null||i.nativeEvent!==I?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:I,targetContainers:[p]},o!==null&&(o=zg(o),o!==null&&Tb(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function L9(i,o,l,d,p){switch(o){case"focusin":return tc=Wp(tc,i,o,l,d,p),!0;case"dragenter":return nc=Wp(nc,i,o,l,d,p),!0;case"mouseover":return rc=Wp(rc,i,o,l,d,p),!0;case"pointerover":var I=p.pointerId;return bg.set(I,Wp(bg.get(I)||null,i,o,l,d,p)),!0;case"gotpointercapture":return I=p.pointerId,Cg.set(I,Wp(Cg.get(I)||null,i,o,l,d,p)),!0}return!1}function wF(i){var o=nf(i.target);if(o!==null){var l=Ef(o);if(l!==null){if(o=l.tag,o===13){if(o=fF(l),o!==null){i.blockedOn=o,SF(i.priority,function(){_F(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Yy(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=TI(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);gI=d,l.target.dispatchEvent(d),gI=null}else return o=zg(l),o!==null&&Tb(o),i.blockedOn=l,!1;o.shift()}return!0}function UD(i,o,l){Yy(i)&&l.delete(o)}function k9(){_I=!1,tc!==null&&Yy(tc)&&(tc=null),nc!==null&&Yy(nc)&&(nc=null),rc!==null&&Yy(rc)&&(rc=null),bg.forEach(UD),Cg.forEach(UD)}function $p(i,o){i.blockedOn===o&&(i.blockedOn=null,_I||(_I=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,k9)))}function Rg(i){function o(p){return $p(p,i)}if(0<xy.length){$p(xy[0],i);for(var l=1;l<xy.length;l++){var d=xy[l];d.blockedOn===i&&(d.blockedOn=null)}}for(tc!==null&&$p(tc,i),nc!==null&&$p(nc,i),rc!==null&&$p(rc,i),bg.forEach(o),Cg.forEach(o),l=0;l<Xl.length;l++)d=Xl[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<Xl.length&&(l=Xl[0],l.blockedOn===null);)wF(l),l.blockedOn===null&&Xl.shift()}var oh=Tl.ReactCurrentBatchConfig,d0=!0;function F9(i,o,l,d){var p=di,I=oh.transition;oh.transition=null;try{di=1,Sb(i,o,l,d)}finally{di=p,oh.transition=I}}function U9(i,o,l,d){var p=di,I=oh.transition;oh.transition=null;try{di=4,Sb(i,o,l,d)}finally{di=p,oh.transition=I}}function Sb(i,o,l,d){if(d0){var p=TI(i,o,l,d);if(p===null)mT(i,o,d,h0,l),FD(i,d);else if(L9(p,i,o,l,d))d.stopPropagation();else if(FD(i,d),o&4&&-1<O9.indexOf(i)){for(;p!==null;){var I=zg(p);if(I!==null&&EF(I),I=TI(i,o,l,d),I===null&&mT(i,o,d,h0,l),I===p)break;p=I}p!==null&&d.stopPropagation()}else mT(i,o,d,null,l)}}var h0=null;function TI(i,o,l,d){if(h0=null,i=yb(d),i=nf(i),i!==null)if(o=Ef(i),o===null)i=null;else if(l=o.tag,l===13){if(i=fF(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return h0=i,null}function AF(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I9()){case Eb:return 1;case gF:return 4;case c0:case b9:return 16;case mF:return 536870912;default:return 16}default:return 16}}var Jl=null,wb=null,Wy=null;function IF(){if(Wy)return Wy;var i,o=wb,l=o.length,d,p="value"in Jl?Jl.value:Jl.textContent,I=p.length;for(i=0;i<l&&o[i]===p[i];i++);var R=l-i;for(d=1;d<=R&&o[l-d]===p[I-d];d++);return Wy=p.slice(i,1<d?1-d:void 0)}function $y(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ny(){return!0}function BD(){return!1}function hs(i){function o(l,d,p,I,R){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=I,this.target=R,this.currentTarget=null;for(var g in i)i.hasOwnProperty(g)&&(l=i[g],this[g]=l?l(I):I[g]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Ny:BD,this.isPropagationStopped=BD,this}return Vi(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ny)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ny)},persist:function(){},isPersistent:Ny}),o}var vh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ab=hs(vh),Vg=Vi({},vh,{view:0,detail:0}),B9=hs(Vg),sT,uT,Xp,Z0=Vi({},Vg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ib,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xp&&(Xp&&i.type==="mousemove"?(sT=i.screenX-Xp.screenX,uT=i.screenY-Xp.screenY):uT=sT=0,Xp=i),sT)},movementY:function(i){return"movementY"in i?i.movementY:uT}}),jD=hs(Z0),j9=Vi({},Z0,{dataTransfer:0}),Z9=hs(j9),G9=Vi({},Vg,{relatedTarget:0}),lT=hs(G9),q9=Vi({},vh,{animationName:0,elapsedTime:0,pseudoElement:0}),H9=hs(q9),K9=Vi({},vh,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),V9=hs(K9),z9=Vi({},vh,{data:0}),ZD=hs(z9),Y9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X9(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=$9[i])?!!o[i]:!1}function Ib(){return X9}var Q9=Vi({},Vg,{key:function(i){if(i.key){var o=Y9[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=$y(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?W9[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ib,charCode:function(i){return i.type==="keypress"?$y(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?$y(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),J9=hs(Q9),eq=Vi({},Z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GD=hs(eq),tq=Vi({},Vg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ib}),nq=hs(tq),rq=Vi({},vh,{propertyName:0,elapsedTime:0,pseudoElement:0}),iq=hs(rq),oq=Vi({},Z0,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),aq=hs(oq),sq=[9,13,27,32],bb=vl&&"CompositionEvent"in window,gg=null;vl&&"documentMode"in document&&(gg=document.documentMode);var uq=vl&&"TextEvent"in window&&!gg,bF=vl&&(!bb||gg&&8<gg&&11>=gg),qD=" ",HD=!1;function CF(i,o){switch(i){case"keyup":return sq.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RF(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qd=!1;function lq(i,o){switch(i){case"compositionend":return RF(o);case"keypress":return o.which!==32?null:(HD=!0,qD);case"textInput":return i=o.data,i===qD&&HD?null:i;default:return null}}function cq(i,o){if(qd)return i==="compositionend"||!bb&&CF(i,o)?(i=IF(),Wy=wb=Jl=null,qd=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bF&&o.locale!=="ko"?null:o.data;default:return null}}var fq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KD(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!fq[i.type]:o==="textarea"}function xF(i,o,l,d){aF(d),o=p0(o,"onChange"),0<o.length&&(l=new Ab("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var mg=null,xg=null;function dq(i){jF(i,0)}function G0(i){var o=Vd(i);if(J3(o))return i}function hq(i,o){if(i==="change")return o}var NF=!1;if(vl){var cT;if(vl){var fT="oninput"in document;if(!fT){var VD=document.createElement("div");VD.setAttribute("oninput","return;"),fT=typeof VD.oninput=="function"}cT=fT}else cT=!1;NF=cT&&(!document.documentMode||9<document.documentMode)}function zD(){mg&&(mg.detachEvent("onpropertychange",MF),xg=mg=null)}function MF(i){if(i.propertyName==="value"&&G0(xg)){var o=[];xF(o,xg,i,yb(i)),cF(dq,o)}}function pq(i,o,l){i==="focusin"?(zD(),mg=o,xg=l,mg.attachEvent("onpropertychange",MF)):i==="focusout"&&zD()}function gq(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return G0(xg)}function mq(i,o){if(i==="click")return G0(o)}function vq(i,o){if(i==="input"||i==="change")return G0(o)}function yq(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var au=typeof Object.is=="function"?Object.is:yq;function Ng(i,o){if(au(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!rI.call(o,p)||!au(i[p],o[p]))return!1}return!0}function YD(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function WD(i,o){var l=YD(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=YD(l)}}function DF(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?DF(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function PF(){for(var i=window,o=s0();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch(d){l=!1}if(l)i=o.contentWindow;else break;o=s0(i.document)}return o}function Cb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Eq(i){var o=PF(),l=i.focusedElem,d=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&DF(l.ownerDocument.documentElement,l)){if(d!==null&&Cb(l)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,I=Math.min(d.start,p);d=d.end===void 0?I:Math.min(d.end,p),!i.extend&&I>d&&(p=d,d=I,I=p),p=WD(l,I);var R=WD(l,d);p&&R&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==R.node||i.focusOffset!==R.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),I>d?(i.addRange(o),i.extend(R.node,R.offset)):(o.setEnd(R.node,R.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var _q=vl&&"documentMode"in document&&11>=document.documentMode,Hd=null,SI=null,vg=null,wI=!1;function $D(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wI||Hd==null||Hd!==s0(d)||(d=Hd,"selectionStart"in d&&Cb(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),vg&&Ng(vg,d)||(vg=d,d=p0(SI,"onSelect"),0<d.length&&(o=new Ab("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=Hd)))}function My(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Kd={animationend:My("Animation","AnimationEnd"),animationiteration:My("Animation","AnimationIteration"),animationstart:My("Animation","AnimationStart"),transitionend:My("Transition","TransitionEnd")},dT={},OF={};vl&&(OF=document.createElement("div").style,"AnimationEvent"in window||(delete Kd.animationend.animation,delete Kd.animationiteration.animation,delete Kd.animationstart.animation),"TransitionEvent"in window||delete Kd.transitionend.transition);function q0(i){if(dT[i])return dT[i];if(!Kd[i])return i;var o=Kd[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in OF)return dT[i]=o[l];return i}var LF=q0("animationend"),kF=q0("animationiteration"),FF=q0("animationstart"),UF=q0("transitionend"),BF=new Map,XD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dc(i,o){BF.set(i,o),yf(o,[i])}for(var hT=0;hT<XD.length;hT++){var pT=XD[hT],Tq=pT.toLowerCase(),Sq=pT[0].toUpperCase()+pT.slice(1);dc(Tq,"on"+Sq)}dc(LF,"onAnimationEnd");dc(kF,"onAnimationIteration");dc(FF,"onAnimationStart");dc("dblclick","onDoubleClick");dc("focusin","onFocus");dc("focusout","onBlur");dc(UF,"onTransitionEnd");uh("onMouseEnter",["mouseout","mouseover"]);uh("onMouseLeave",["mouseout","mouseover"]);uh("onPointerEnter",["pointerout","pointerover"]);uh("onPointerLeave",["pointerout","pointerover"]);yf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yf("onBeforeInput",["compositionend","keypress","textInput","paste"]);yf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wq=new Set("cancel close invalid load scroll toggle".split(" ").concat(lg));function QD(i,o,l){var d=i.type||"unknown-event";i.currentTarget=l,T9(d,o,void 0,i),i.currentTarget=null}function jF(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var I=void 0;if(o)for(var R=d.length-1;0<=R;R--){var g=d[R],w=g.instance,U=g.currentTarget;if(g=g.listener,w!==I&&p.isPropagationStopped())break e;QD(p,g,U),I=w}else for(R=0;R<d.length;R++){if(g=d[R],w=g.instance,U=g.currentTarget,g=g.listener,w!==I&&p.isPropagationStopped())break e;QD(p,g,U),I=w}}}if(l0)throw i=yI,l0=!1,yI=null,i}function xi(i,o){var l=o[RI];l===void 0&&(l=o[RI]=new Set);var d=i+"__bubble";l.has(d)||(ZF(o,i,2,!1),l.add(d))}function gT(i,o,l){var d=0;o&&(d|=4),ZF(l,i,d,o)}var Dy="_reactListening"+Math.random().toString(36).slice(2);function Mg(i){if(!i[Dy]){i[Dy]=!0,Y3.forEach(function(l){l!=="selectionchange"&&(wq.has(l)||gT(l,!1,i),gT(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Dy]||(o[Dy]=!0,gT("selectionchange",!1,o))}}function ZF(i,o,l,d){switch(AF(o)){case 1:var p=F9;break;case 4:p=U9;break;default:p=Sb}l=p.bind(null,o,l,i),p=void 0,!vI||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function mT(i,o,l,d,p){var I=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var g=d.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(R===4)for(R=d.return;R!==null;){var w=R.tag;if((w===3||w===4)&&(w=R.stateNode.containerInfo,w===p||w.nodeType===8&&w.parentNode===p))return;R=R.return}for(;g!==null;){if(R=nf(g),R===null)return;if(w=R.tag,w===5||w===6){d=I=R;continue e}g=g.parentNode}}d=d.return}cF(function(){var U=I,C=yb(l),y=[];e:{var v=BF.get(i);if(v!==void 0){var D=Ab,m=i;switch(i){case"keypress":if($y(l)===0)break e;case"keydown":case"keyup":D=J9;break;case"focusin":m="focus",D=lT;break;case"focusout":m="blur",D=lT;break;case"beforeblur":case"afterblur":D=lT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=jD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Z9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=nq;break;case LF:case kF:case FF:D=H9;break;case UF:D=iq;break;case"scroll":D=B9;break;case"wheel":D=aq;break;case"copy":case"cut":case"paste":D=V9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=GD}var T=(o&4)!==0,F=!T&&i==="scroll",N=T?v!==null?v+"Capture":null:v;T=[];for(var _=U,A;_!==null;){A=_;var b=A.stateNode;if(A.tag===5&&b!==null&&(A=b,N!==null&&(b=Ig(_,N),b!=null&&T.push(Dg(_,b,A)))),F)break;_=_.return}0<T.length&&(v=new D(v,m,null,l,C),y.push({event:v,listeners:T}))}}if(!(o&7)){e:{if(v=i==="mouseover"||i==="pointerover",D=i==="mouseout"||i==="pointerout",v&&l!==gI&&(m=l.relatedTarget||l.fromElement)&&(nf(m)||m[yl]))break e;if((D||v)&&(v=C.window===C?C:(v=C.ownerDocument)?v.defaultView||v.parentWindow:window,D?(m=l.relatedTarget||l.toElement,D=U,m=m?nf(m):null,m!==null&&(F=Ef(m),m!==F||m.tag!==5&&m.tag!==6)&&(m=null)):(D=null,m=U),D!==m)){if(T=jD,b="onMouseLeave",N="onMouseEnter",_="mouse",(i==="pointerout"||i==="pointerover")&&(T=GD,b="onPointerLeave",N="onPointerEnter",_="pointer"),F=D==null?v:Vd(D),A=m==null?v:Vd(m),v=new T(b,_+"leave",D,l,C),v.target=F,v.relatedTarget=A,b=null,nf(C)===U&&(T=new T(N,_+"enter",m,l,C),T.target=A,T.relatedTarget=F,b=T),F=b,D&&m)t:{for(T=D,N=m,_=0,A=T;A;A=kd(A))_++;for(A=0,b=N;b;b=kd(b))A++;for(;0<_-A;)T=kd(T),_--;for(;0<A-_;)N=kd(N),A--;for(;_--;){if(T===N||N!==null&&T===N.alternate)break t;T=kd(T),N=kd(N)}T=null}else T=null;D!==null&&JD(y,v,D,T,!1),m!==null&&F!==null&&JD(y,F,m,T,!0)}}e:{if(v=U?Vd(U):window,D=v.nodeName&&v.nodeName.toLowerCase(),D==="select"||D==="input"&&v.type==="file")var j=hq;else if(KD(v))if(NF)j=vq;else{j=gq;var Y=pq}else(D=v.nodeName)&&D.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(j=mq);if(j&&(j=j(i,U))){xF(y,j,l,C);break e}Y&&Y(i,v,U),i==="focusout"&&(Y=v._wrapperState)&&Y.controlled&&v.type==="number"&&cI(v,"number",v.value)}switch(Y=U?Vd(U):window,i){case"focusin":(KD(Y)||Y.contentEditable==="true")&&(Hd=Y,SI=U,vg=null);break;case"focusout":vg=SI=Hd=null;break;case"mousedown":wI=!0;break;case"contextmenu":case"mouseup":case"dragend":wI=!1,$D(y,l,C);break;case"selectionchange":if(_q)break;case"keydown":case"keyup":$D(y,l,C)}var W;if(bb)e:{switch(i){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else qd?CF(i,l)&&($="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&($="onCompositionStart");$&&(bF&&l.locale!=="ko"&&(qd||$!=="onCompositionStart"?$==="onCompositionEnd"&&qd&&(W=IF()):(Jl=C,wb="value"in Jl?Jl.value:Jl.textContent,qd=!0)),Y=p0(U,$),0<Y.length&&($=new ZD($,i,null,l,C),y.push({event:$,listeners:Y}),W?$.data=W:(W=RF(l),W!==null&&($.data=W)))),(W=uq?lq(i,l):cq(i,l))&&(U=p0(U,"onBeforeInput"),0<U.length&&(C=new ZD("onBeforeInput","beforeinput",null,l,C),y.push({event:C,listeners:U}),C.data=W))}jF(y,o)})}function Dg(i,o,l){return{instance:i,listener:o,currentTarget:l}}function p0(i,o){for(var l=o+"Capture",d=[];i!==null;){var p=i,I=p.stateNode;p.tag===5&&I!==null&&(p=I,I=Ig(i,l),I!=null&&d.unshift(Dg(i,I,p)),I=Ig(i,o),I!=null&&d.push(Dg(i,I,p))),i=i.return}return d}function kd(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function JD(i,o,l,d,p){for(var I=o._reactName,R=[];l!==null&&l!==d;){var g=l,w=g.alternate,U=g.stateNode;if(w!==null&&w===d)break;g.tag===5&&U!==null&&(g=U,p?(w=Ig(l,I),w!=null&&R.unshift(Dg(l,w,g))):p||(w=Ig(l,I),w!=null&&R.push(Dg(l,w,g)))),l=l.return}R.length!==0&&i.push({event:o,listeners:R})}var Aq=/\r\n?/g,Iq=/\u0000|\uFFFD/g;function eP(i){return(typeof i=="string"?i:""+i).replace(Aq,"\n").replace(Iq,"")}function Py(i,o,l){if(o=eP(o),eP(i)!==o&&l)throw Error(jn(425))}function g0(){}var AI=null,II=null;function bI(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var CI=typeof setTimeout=="function"?setTimeout:void 0,bq=typeof clearTimeout=="function"?clearTimeout:void 0,tP=typeof Promise=="function"?Promise:void 0,Cq=typeof queueMicrotask=="function"?queueMicrotask:typeof tP<"u"?function(i){return tP.resolve(null).then(i).catch(Rq)}:CI;function Rq(i){setTimeout(function(){throw i})}function vT(i,o){var l=o,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),Rg(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Rg(o)}function ic(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function nP(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var yh=Math.random().toString(36).slice(2),xu="__reactFiber$"+yh,Pg="__reactProps$"+yh,yl="__reactContainer$"+yh,RI="__reactEvents$"+yh,xq="__reactListeners$"+yh,Nq="__reactHandles$"+yh;function nf(i){var o=i[xu];if(o)return o;for(var l=i.parentNode;l;){if(o=l[yl]||l[xu]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=nP(i);i!==null;){if(l=i[xu])return l;i=nP(i)}return o}i=l,l=i.parentNode}return null}function zg(i){return i=i[xu]||i[yl],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Vd(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(jn(33))}function H0(i){return i[Pg]||null}var xI=[],zd=-1;function hc(i){return{current:i}}function Ni(i){0>zd||(i.current=xI[zd],xI[zd]=null,zd--)}function Ii(i,o){zd++,xI[zd]=i.current,i.current=o}var fc={},Jo=hc(fc),ka=hc(!1),ff=fc;function lh(i,o){var l=i.type.contextTypes;if(!l)return fc;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},I;for(I in l)p[I]=o[I];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function Fa(i){return i=i.childContextTypes,i!=null}function m0(){Ni(ka),Ni(Jo)}function rP(i,o,l){if(Jo.current!==fc)throw Error(jn(168));Ii(Jo,o),Ii(ka,l)}function GF(i,o,l){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(jn(108,p9(i)||"Unknown",p));return Vi({},l,d)}function v0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||fc,ff=Jo.current,Ii(Jo,i),Ii(ka,ka.current),!0}function iP(i,o,l){var d=i.stateNode;if(!d)throw Error(jn(169));l?(i=GF(i,o,ff),d.__reactInternalMemoizedMergedChildContext=i,Ni(ka),Ni(Jo),Ii(Jo,i)):Ni(ka),Ii(ka,l)}var hl=null,K0=!1,yT=!1;function qF(i){hl===null?hl=[i]:hl.push(i)}function Mq(i){K0=!0,qF(i)}function pc(){if(!yT&&hl!==null){yT=!0;var i=0,o=di;try{var l=hl;for(di=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}hl=null,K0=!1}catch(p){throw hl!==null&&(hl=hl.slice(i+1)),pF(Eb,pc),p}finally{di=o,yT=!1}}return null}var Yd=[],Wd=0,y0=null,E0=0,ws=[],As=0,df=null,pl=1,gl="";function Qc(i,o){Yd[Wd++]=E0,Yd[Wd++]=y0,y0=i,E0=o}function HF(i,o,l){ws[As++]=pl,ws[As++]=gl,ws[As++]=df,df=i;var d=pl;i=gl;var p=32-iu(d)-1;d&=~(1<<p),l+=1;var I=32-iu(o)+p;if(30<I){var R=p-p%5;I=(d&(1<<R)-1).toString(32),d>>=R,p-=R,pl=1<<32-iu(o)+p|l<<p|d,gl=I+i}else pl=1<<I|l<<p|d,gl=i}function Rb(i){i.return!==null&&(Qc(i,1),HF(i,1,0))}function xb(i){for(;i===y0;)y0=Yd[--Wd],Yd[Wd]=null,E0=Yd[--Wd],Yd[Wd]=null;for(;i===df;)df=ws[--As],ws[As]=null,gl=ws[--As],ws[As]=null,pl=ws[--As],ws[As]=null}var cs=null,us=null,Ui=!1,Js=null;function KF(i,o){var l=bs(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function oP(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,cs=i,us=ic(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,cs=i,us=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=df!==null?{id:pl,overflow:gl}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=bs(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,cs=i,us=null,!0):!1;default:return!1}}function NI(i){return(i.mode&1)!==0&&(i.flags&128)===0}function MI(i){if(Ui){var o=us;if(o){var l=o;if(!oP(i,o)){if(NI(i))throw Error(jn(418));o=ic(l.nextSibling);var d=cs;o&&oP(i,o)?KF(d,l):(i.flags=i.flags&-4097|2,Ui=!1,cs=i)}}else{if(NI(i))throw Error(jn(418));i.flags=i.flags&-4097|2,Ui=!1,cs=i}}}function aP(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;cs=i}function Oy(i){if(i!==cs)return!1;if(!Ui)return aP(i),Ui=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!bI(i.type,i.memoizedProps)),o&&(o=us)){if(NI(i))throw VF(),Error(jn(418));for(;o;)KF(i,o),o=ic(o.nextSibling)}if(aP(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(jn(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){us=ic(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}us=null}}else us=cs?ic(i.stateNode.nextSibling):null;return!0}function VF(){for(var i=us;i;)i=ic(i.nextSibling)}function ch(){us=cs=null,Ui=!1}function Nb(i){Js===null?Js=[i]:Js.push(i)}var Dq=Tl.ReactCurrentBatchConfig;function Qp(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var d=l.stateNode}if(!d)throw Error(jn(147,i));var p=d,I=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===I?o.ref:(o=function(R){var g=p.refs;R===null?delete g[I]:g[I]=R},o._stringRef=I,o)}if(typeof i!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,i))}return i}function Ly(i,o){throw i=Object.prototype.toString.call(o),Error(jn(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function sP(i){var o=i._init;return o(i._payload)}function zF(i){function o(N,_){if(i){var A=N.deletions;A===null?(N.deletions=[_],N.flags|=16):A.push(_)}}function l(N,_){if(!i)return null;for(;_!==null;)o(N,_),_=_.sibling;return null}function d(N,_){for(N=new Map;_!==null;)_.key!==null?N.set(_.key,_):N.set(_.index,_),_=_.sibling;return N}function p(N,_){return N=uc(N,_),N.index=0,N.sibling=null,N}function I(N,_,A){return N.index=A,i?(A=N.alternate,A!==null?(A=A.index,A<_?(N.flags|=2,_):A):(N.flags|=2,_)):(N.flags|=1048576,_)}function R(N){return i&&N.alternate===null&&(N.flags|=2),N}function g(N,_,A,b){return _===null||_.tag!==6?(_=IT(A,N.mode,b),_.return=N,_):(_=p(_,A),_.return=N,_)}function w(N,_,A,b){var j=A.type;return j===Gd?C(N,_,A.props.children,b,A.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wl&&sP(j)===_.type)?(b=p(_,A.props),b.ref=Qp(N,_,A),b.return=N,b):(b=r0(A.type,A.key,A.props,null,N.mode,b),b.ref=Qp(N,_,A),b.return=N,b)}function U(N,_,A,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=bT(A,N.mode,b),_.return=N,_):(_=p(_,A.children||[]),_.return=N,_)}function C(N,_,A,b,j){return _===null||_.tag!==7?(_=uf(A,N.mode,b,j),_.return=N,_):(_=p(_,A),_.return=N,_)}function y(N,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=IT(""+_,N.mode,A),_.return=N,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ay:return A=r0(_.type,_.key,_.props,null,N.mode,A),A.ref=Qp(N,null,_),A.return=N,A;case Zd:return _=bT(_,N.mode,A),_.return=N,_;case Wl:var b=_._init;return y(N,b(_._payload),A)}if(sg(_)||zp(_))return _=uf(_,N.mode,A,null),_.return=N,_;Ly(N,_)}return null}function v(N,_,A,b){var j=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return j!==null?null:g(N,_,""+A,b);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ay:return A.key===j?w(N,_,A,b):null;case Zd:return A.key===j?U(N,_,A,b):null;case Wl:return j=A._init,v(N,_,j(A._payload),b)}if(sg(A)||zp(A))return j!==null?null:C(N,_,A,b,null);Ly(N,A)}return null}function D(N,_,A,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return N=N.get(A)||null,g(_,N,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ay:return N=N.get(b.key===null?A:b.key)||null,w(_,N,b,j);case Zd:return N=N.get(b.key===null?A:b.key)||null,U(_,N,b,j);case Wl:var Y=b._init;return D(N,_,A,Y(b._payload),j)}if(sg(b)||zp(b))return N=N.get(A)||null,C(_,N,b,j,null);Ly(_,b)}return null}function m(N,_,A,b){for(var j=null,Y=null,W=_,$=_=0,se=null;W!==null&&$<A.length;$++){W.index>$?(se=W,W=null):se=W.sibling;var x=v(N,W,A[$],b);if(x===null){W===null&&(W=se);break}i&&W&&x.alternate===null&&o(N,W),_=I(x,_,$),Y===null?j=x:Y.sibling=x,Y=x,W=se}if($===A.length)return l(N,W),Ui&&Qc(N,$),j;if(W===null){for(;$<A.length;$++)W=y(N,A[$],b),W!==null&&(_=I(W,_,$),Y===null?j=W:Y.sibling=W,Y=W);return Ui&&Qc(N,$),j}for(W=d(N,W);$<A.length;$++)se=D(W,N,$,A[$],b),se!==null&&(i&&se.alternate!==null&&W.delete(se.key===null?$:se.key),_=I(se,_,$),Y===null?j=se:Y.sibling=se,Y=se);return i&&W.forEach(function(X){return o(N,X)}),Ui&&Qc(N,$),j}function T(N,_,A,b){var j=zp(A);if(typeof j!="function")throw Error(jn(150));if(A=j.call(A),A==null)throw Error(jn(151));for(var Y=j=null,W=_,$=_=0,se=null,x=A.next();W!==null&&!x.done;$++,x=A.next()){W.index>$?(se=W,W=null):se=W.sibling;var X=v(N,W,x.value,b);if(X===null){W===null&&(W=se);break}i&&W&&X.alternate===null&&o(N,W),_=I(X,_,$),Y===null?j=X:Y.sibling=X,Y=X,W=se}if(x.done)return l(N,W),Ui&&Qc(N,$),j;if(W===null){for(;!x.done;$++,x=A.next())x=y(N,x.value,b),x!==null&&(_=I(x,_,$),Y===null?j=x:Y.sibling=x,Y=x);return Ui&&Qc(N,$),j}for(W=d(N,W);!x.done;$++,x=A.next())x=D(W,N,$,x.value,b),x!==null&&(i&&x.alternate!==null&&W.delete(x.key===null?$:x.key),_=I(x,_,$),Y===null?j=x:Y.sibling=x,Y=x);return i&&W.forEach(function(ce){return o(N,ce)}),Ui&&Qc(N,$),j}function F(N,_,A,b){if(typeof A=="object"&&A!==null&&A.type===Gd&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ay:e:{for(var j=A.key,Y=_;Y!==null;){if(Y.key===j){if(j=A.type,j===Gd){if(Y.tag===7){l(N,Y.sibling),_=p(Y,A.props.children),_.return=N,N=_;break e}}else if(Y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wl&&sP(j)===Y.type){l(N,Y.sibling),_=p(Y,A.props),_.ref=Qp(N,Y,A),_.return=N,N=_;break e}l(N,Y);break}else o(N,Y);Y=Y.sibling}A.type===Gd?(_=uf(A.props.children,N.mode,b,A.key),_.return=N,N=_):(b=r0(A.type,A.key,A.props,null,N.mode,b),b.ref=Qp(N,_,A),b.return=N,N=b)}return R(N);case Zd:e:{for(Y=A.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){l(N,_.sibling),_=p(_,A.children||[]),_.return=N,N=_;break e}else{l(N,_);break}else o(N,_);_=_.sibling}_=bT(A,N.mode,b),_.return=N,N=_}return R(N);case Wl:return Y=A._init,F(N,_,Y(A._payload),b)}if(sg(A))return m(N,_,A,b);if(zp(A))return T(N,_,A,b);Ly(N,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(l(N,_.sibling),_=p(_,A),_.return=N,N=_):(l(N,_),_=IT(A,N.mode,b),_.return=N,N=_),R(N)):l(N,_)}return F}var fh=zF(!0),YF=zF(!1),_0=hc(null),T0=null,$d=null,Mb=null;function Db(){Mb=$d=T0=null}function Pb(i){var o=_0.current;Ni(_0),i._currentValue=o}function DI(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function ah(i,o){T0=i,Mb=$d=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(La=!0),i.firstContext=null)}function Rs(i){var o=i._currentValue;if(Mb!==i)if(i={context:i,memoizedValue:o,next:null},$d===null){if(T0===null)throw Error(jn(308));$d=i,T0.dependencies={lanes:0,firstContext:i}}else $d=$d.next=i;return o}var rf=null;function Ob(i){rf===null?rf=[i]:rf.push(i)}function WF(i,o,l,d){var p=o.interleaved;return p===null?(l.next=l,Ob(o)):(l.next=p.next,p.next=l),o.interleaved=l,El(i,d)}function El(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var $l=!1;function Lb(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $F(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ml(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function oc(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,$r&2){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,El(i,l)}return p=d.interleaved,p===null?(o.next=o,Ob(d)):(o.next=p.next,p.next=o),d.interleaved=o,El(i,l)}function Xy(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,_b(i,l)}}function uP(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,I=null;if(l=l.firstBaseUpdate,l!==null){do{var R={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};I===null?p=I=R:I=I.next=R,l=l.next}while(l!==null);I===null?p=I=o:I=I.next=o}else p=I=o;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:I,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function S0(i,o,l,d){var p=i.updateQueue;$l=!1;var I=p.firstBaseUpdate,R=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var w=g,U=w.next;w.next=null,R===null?I=U:R.next=U,R=w;var C=i.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==R&&(g===null?C.firstBaseUpdate=U:g.next=U,C.lastBaseUpdate=w))}if(I!==null){var y=p.baseState;R=0,C=U=w=null,g=I;do{var v=g.lane,D=g.eventTime;if((d&v)===v){C!==null&&(C=C.next={eventTime:D,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=i,T=g;switch(v=o,D=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){y=m.call(D,y,v);break e}y=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,v=typeof m=="function"?m.call(D,y,v):m,v==null)break e;y=Vi({},y,v);break e;case 2:$l=!0}}g.callback!==null&&g.lane!==0&&(i.flags|=64,v=p.effects,v===null?p.effects=[g]:v.push(g))}else D={eventTime:D,lane:v,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(U=C=D,w=y):C=C.next=D,R|=v;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;v=g,g=v.next,v.next=null,p.lastBaseUpdate=v,p.shared.pending=null}}while(!0);if(C===null&&(w=y),p.baseState=w,p.firstBaseUpdate=U,p.lastBaseUpdate=C,o=p.shared.interleaved,o!==null){p=o;do R|=p.lane,p=p.next;while(p!==o)}else I===null&&(p.shared.lanes=0);pf|=R,i.lanes=R,i.memoizedState=y}}function lP(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(jn(191,p));p.call(d)}}}var Yg={},Mu=hc(Yg),Og=hc(Yg),Lg=hc(Yg);function of(i){if(i===Yg)throw Error(jn(174));return i}function kb(i,o){switch(Ii(Lg,o),Ii(Og,i),Ii(Mu,Yg),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:dI(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=dI(o,i)}Ni(Mu),Ii(Mu,o)}function dh(){Ni(Mu),Ni(Og),Ni(Lg)}function XF(i){of(Lg.current);var o=of(Mu.current),l=dI(o,i.type);o!==l&&(Ii(Og,i),Ii(Mu,l))}function Fb(i){Og.current===i&&(Ni(Mu),Ni(Og))}var qi=hc(0);function w0(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ET=[];function Ub(){for(var i=0;i<ET.length;i++)ET[i]._workInProgressVersionPrimary=null;ET.length=0}var Qy=Tl.ReactCurrentDispatcher,_T=Tl.ReactCurrentBatchConfig,hf=0,Ki=null,_o=null,No=null,A0=!1,yg=!1,kg=0,Pq=0;function Yo(){throw Error(jn(321))}function Bb(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!au(i[l],o[l]))return!1;return!0}function jb(i,o,l,d,p,I){if(hf=I,Ki=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Qy.current=i===null||i.memoizedState===null?Fq:Uq,i=l(d,p),yg){I=0;do{if(yg=!1,kg=0,25<=I)throw Error(jn(301));I+=1,No=_o=null,o.updateQueue=null,Qy.current=Bq,i=l(d,p)}while(yg)}if(Qy.current=I0,o=_o!==null&&_o.next!==null,hf=0,No=_o=Ki=null,A0=!1,o)throw Error(jn(300));return i}function Zb(){var i=kg!==0;return kg=0,i}function Ru(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return No===null?Ki.memoizedState=No=i:No=No.next=i,No}function xs(){if(_o===null){var i=Ki.alternate;i=i!==null?i.memoizedState:null}else i=_o.next;var o=No===null?Ki.memoizedState:No.next;if(o!==null)No=o,_o=i;else{if(i===null)throw Error(jn(310));_o=i,i={memoizedState:_o.memoizedState,baseState:_o.baseState,baseQueue:_o.baseQueue,queue:_o.queue,next:null},No===null?Ki.memoizedState=No=i:No=No.next=i}return No}function Fg(i,o){return typeof o=="function"?o(i):o}function TT(i){var o=xs(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=i;var d=_o,p=d.baseQueue,I=l.pending;if(I!==null){if(p!==null){var R=p.next;p.next=I.next,I.next=R}d.baseQueue=p=I,l.pending=null}if(p!==null){I=p.next,d=d.baseState;var g=R=null,w=null,U=I;do{var C=U.lane;if((hf&C)===C)w!==null&&(w=w.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),d=U.hasEagerState?U.eagerState:i(d,U.action);else{var y={lane:C,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};w===null?(g=w=y,R=d):w=w.next=y,Ki.lanes|=C,pf|=C}U=U.next}while(U!==null&&U!==I);w===null?R=d:w.next=g,au(d,o.memoizedState)||(La=!0),o.memoizedState=d,o.baseState=R,o.baseQueue=w,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do I=p.lane,Ki.lanes|=I,pf|=I,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function ST(i){var o=xs(),l=o.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,I=o.memoizedState;if(p!==null){l.pending=null;var R=p=p.next;do I=i(I,R.action),R=R.next;while(R!==p);au(I,o.memoizedState)||(La=!0),o.memoizedState=I,o.baseQueue===null&&(o.baseState=I),l.lastRenderedState=I}return[I,d]}function QF(){}function JF(i,o){var l=Ki,d=xs(),p=o(),I=!au(d.memoizedState,p);if(I&&(d.memoizedState=p,La=!0),d=d.queue,Gb(n4.bind(null,l,d,i),[i]),d.getSnapshot!==o||I||No!==null&&No.memoizedState.tag&1){if(l.flags|=2048,Ug(9,t4.bind(null,l,d,p,o),void 0,null),Mo===null)throw Error(jn(349));hf&30||e4(l,o,p)}return p}function e4(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function t4(i,o,l,d){o.value=l,o.getSnapshot=d,r4(o)&&i4(i)}function n4(i,o,l){return l(function(){r4(o)&&i4(i)})}function r4(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!au(i,l)}catch(d){return!0}}function i4(i){var o=El(i,1);o!==null&&ou(o,i,1,-1)}function cP(i){var o=Ru();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fg,lastRenderedState:i},o.queue=i,i=i.dispatch=kq.bind(null,Ki,i),[o.memoizedState,i]}function Ug(i,o,l,d){return i={tag:i,create:o,destroy:l,deps:d,next:null},o=Ki.updateQueue,o===null?(o={lastEffect:null,stores:null},Ki.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i)),i}function o4(){return xs().memoizedState}function Jy(i,o,l,d){var p=Ru();Ki.flags|=i,p.memoizedState=Ug(1|o,l,void 0,d===void 0?null:d)}function V0(i,o,l,d){var p=xs();d=d===void 0?null:d;var I=void 0;if(_o!==null){var R=_o.memoizedState;if(I=R.destroy,d!==null&&Bb(d,R.deps)){p.memoizedState=Ug(o,l,I,d);return}}Ki.flags|=i,p.memoizedState=Ug(1|o,l,I,d)}function fP(i,o){return Jy(8390656,8,i,o)}function Gb(i,o){return V0(2048,8,i,o)}function a4(i,o){return V0(4,2,i,o)}function s4(i,o){return V0(4,4,i,o)}function u4(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function l4(i,o,l){return l=l!=null?l.concat([i]):null,V0(4,4,u4.bind(null,o,i),l)}function qb(){}function c4(i,o){var l=xs();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Bb(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function f4(i,o){var l=xs();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Bb(o,d[1])?d[0]:(i=i(),l.memoizedState=[i,o],i)}function d4(i,o,l){return hf&21?(au(l,o)||(l=vF(),Ki.lanes|=l,pf|=l,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,La=!0),i.memoizedState=l)}function Oq(i,o){var l=di;di=l!==0&&4>l?l:4,i(!0);var d=_T.transition;_T.transition={};try{i(!1),o()}finally{di=l,_T.transition=d}}function h4(){return xs().memoizedState}function Lq(i,o,l){var d=sc(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},p4(i))g4(o,l);else if(l=WF(i,o,l,d),l!==null){var p=Ea();ou(l,i,d,p),m4(l,o,d)}}function kq(i,o,l){var d=sc(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(p4(i))g4(o,p);else{var I=i.alternate;if(i.lanes===0&&(I===null||I.lanes===0)&&(I=o.lastRenderedReducer,I!==null))try{var R=o.lastRenderedState,g=I(R,l);if(p.hasEagerState=!0,p.eagerState=g,au(g,R)){var w=o.interleaved;w===null?(p.next=p,Ob(o)):(p.next=w.next,w.next=p),o.interleaved=p;return}}catch(U){}finally{}l=WF(i,o,p,d),l!==null&&(p=Ea(),ou(l,i,d,p),m4(l,o,d))}}function p4(i){var o=i.alternate;return i===Ki||o!==null&&o===Ki}function g4(i,o){yg=A0=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function m4(i,o,l){if(l&4194240){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,_b(i,l)}}var I0={readContext:Rs,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},Fq={readContext:Rs,useCallback:function(i,o){return Ru().memoizedState=[i,o===void 0?null:o],i},useContext:Rs,useEffect:fP,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,Jy(4194308,4,u4.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Jy(4194308,4,i,o)},useInsertionEffect:function(i,o){return Jy(4,2,i,o)},useMemo:function(i,o){var l=Ru();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var d=Ru();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=Lq.bind(null,Ki,i),[d.memoizedState,i]},useRef:function(i){var o=Ru();return i={current:i},o.memoizedState=i},useState:cP,useDebugValue:qb,useDeferredValue:function(i){return Ru().memoizedState=i},useTransition:function(){var i=cP(!1),o=i[0];return i=Oq.bind(null,i[1]),Ru().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var d=Ki,p=Ru();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=o(),Mo===null)throw Error(jn(349));hf&30||e4(d,o,l)}p.memoizedState=l;var I={value:l,getSnapshot:o};return p.queue=I,fP(n4.bind(null,d,I,i),[i]),d.flags|=2048,Ug(9,t4.bind(null,d,I,l,o),void 0,null),l},useId:function(){var i=Ru(),o=Mo.identifierPrefix;if(Ui){var l=gl,d=pl;l=(d&~(1<<32-iu(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=kg++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=Pq++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Uq={readContext:Rs,useCallback:c4,useContext:Rs,useEffect:Gb,useImperativeHandle:l4,useInsertionEffect:a4,useLayoutEffect:s4,useMemo:f4,useReducer:TT,useRef:o4,useState:function(){return TT(Fg)},useDebugValue:qb,useDeferredValue:function(i){var o=xs();return d4(o,_o.memoizedState,i)},useTransition:function(){var i=TT(Fg)[0],o=xs().memoizedState;return[i,o]},useMutableSource:QF,useSyncExternalStore:JF,useId:h4,unstable_isNewReconciler:!1},Bq={readContext:Rs,useCallback:c4,useContext:Rs,useEffect:Gb,useImperativeHandle:l4,useInsertionEffect:a4,useLayoutEffect:s4,useMemo:f4,useReducer:ST,useRef:o4,useState:function(){return ST(Fg)},useDebugValue:qb,useDeferredValue:function(i){var o=xs();return _o===null?o.memoizedState=i:d4(o,_o.memoizedState,i)},useTransition:function(){var i=ST(Fg)[0],o=xs().memoizedState;return[i,o]},useMutableSource:QF,useSyncExternalStore:JF,useId:h4,unstable_isNewReconciler:!1};function Xs(i,o){if(i&&i.defaultProps){o=Vi({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function PI(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:Vi({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var z0={isMounted:function(i){return(i=i._reactInternals)?Ef(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var d=Ea(),p=sc(i),I=ml(d,p);I.payload=o,l!=null&&(I.callback=l),o=oc(i,I,p),o!==null&&(ou(o,i,p,d),Xy(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=Ea(),p=sc(i),I=ml(d,p);I.tag=1,I.payload=o,l!=null&&(I.callback=l),o=oc(i,I,p),o!==null&&(ou(o,i,p,d),Xy(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Ea(),d=sc(i),p=ml(l,d);p.tag=2,o!=null&&(p.callback=o),o=oc(i,p,d),o!==null&&(ou(o,i,d,l),Xy(o,i,d))}};function dP(i,o,l,d,p,I,R){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,I,R):o.prototype&&o.prototype.isPureReactComponent?!Ng(l,d)||!Ng(p,I):!0}function v4(i,o,l){var d=!1,p=fc,I=o.contextType;return typeof I=="object"&&I!==null?I=Rs(I):(p=Fa(o)?ff:Jo.current,d=o.contextTypes,I=(d=d!=null)?lh(i,p):fc),o=new o(l,I),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=z0,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=I),o}function hP(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&z0.enqueueReplaceState(o,o.state,null)}function OI(i,o,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},Lb(i);var I=o.contextType;typeof I=="object"&&I!==null?p.context=Rs(I):(I=Fa(o)?ff:Jo.current,p.context=lh(i,I)),p.state=i.memoizedState,I=o.getDerivedStateFromProps,typeof I=="function"&&(PI(i,o,I,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&z0.enqueueReplaceState(p,p.state,null),S0(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function hh(i,o){try{var l="",d=o;do l+=h9(d),d=d.return;while(d);var p=l}catch(I){p="\nError generating stack: "+I.message+"\n"+I.stack}return{value:i,source:o,stack:p,digest:null}}function wT(i,o,l){return{value:i,source:null,stack:l!=null?l:null,digest:o!=null?o:null}}function LI(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var jq=typeof WeakMap=="function"?WeakMap:Map;function y4(i,o,l){l=ml(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){C0||(C0=!0,KI=d),LI(i,o)},l}function E4(i,o,l){l=ml(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;l.payload=function(){return d(p)},l.callback=function(){LI(i,o)}}var I=i.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(l.callback=function(){LI(i,o),typeof d!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})}),l}function pP(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new jq;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(l)||(p.add(l),i=eH.bind(null,i,o,l),o.then(i,i))}function gP(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function mP(i,o,l,d,p){return i.mode&1?(i.flags|=65536,i.lanes=p,i):(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=ml(-1,1),o.tag=2,oc(l,o,1))),l.lanes|=1),i)}var Zq=Tl.ReactCurrentOwner,La=!1;function ya(i,o,l,d){o.child=i===null?YF(o,null,l,d):fh(o,i.child,l,d)}function vP(i,o,l,d,p){l=l.render;var I=o.ref;return ah(o,p),d=jb(i,o,l,d,I,p),l=Zb(),i!==null&&!La?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,_l(i,o,p)):(Ui&&l&&Rb(o),o.flags|=1,ya(i,o,d,p),o.child)}function yP(i,o,l,d,p){if(i===null){var I=l.type;return typeof I=="function"&&!Xb(I)&&I.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=I,_4(i,o,I,d,p)):(i=r0(l.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(I=i.child,!(i.lanes&p)){var R=I.memoizedProps;if(l=l.compare,l=l!==null?l:Ng,l(R,d)&&i.ref===o.ref)return _l(i,o,p)}return o.flags|=1,i=uc(I,d),i.ref=o.ref,i.return=o,o.child=i}function _4(i,o,l,d,p){if(i!==null){var I=i.memoizedProps;if(Ng(I,d)&&i.ref===o.ref)if(La=!1,o.pendingProps=d=I,(i.lanes&p)!==0)i.flags&131072&&(La=!0);else return o.lanes=i.lanes,_l(i,o,p)}return kI(i,o,l,d,p)}function T4(i,o,l){var d=o.pendingProps,p=d.children,I=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Qd,as),as|=l;else{if(!(l&1073741824))return i=I!==null?I.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ii(Qd,as),as|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=I!==null?I.baseLanes:l,Ii(Qd,as),as|=d}else I!==null?(d=I.baseLanes|l,o.memoizedState=null):d=l,Ii(Qd,as),as|=d;return ya(i,o,p,l),o.child}function S4(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function kI(i,o,l,d,p){var I=Fa(l)?ff:Jo.current;return I=lh(o,I),ah(o,p),l=jb(i,o,l,d,I,p),d=Zb(),i!==null&&!La?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,_l(i,o,p)):(Ui&&d&&Rb(o),o.flags|=1,ya(i,o,l,p),o.child)}function EP(i,o,l,d,p){if(Fa(l)){var I=!0;v0(o)}else I=!1;if(ah(o,p),o.stateNode===null)e0(i,o),v4(o,l,d),OI(o,l,d,p),d=!0;else if(i===null){var R=o.stateNode,g=o.memoizedProps;R.props=g;var w=R.context,U=l.contextType;typeof U=="object"&&U!==null?U=Rs(U):(U=Fa(l)?ff:Jo.current,U=lh(o,U));var C=l.getDerivedStateFromProps,y=typeof C=="function"||typeof R.getSnapshotBeforeUpdate=="function";y||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(g!==d||w!==U)&&hP(o,R,d,U),$l=!1;var v=o.memoizedState;R.state=v,S0(o,d,R,p),w=o.memoizedState,g!==d||v!==w||ka.current||$l?(typeof C=="function"&&(PI(o,l,C,d),w=o.memoizedState),(g=$l||dP(o,l,g,d,v,w,U))?(y||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(o.flags|=4194308)):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=w),R.props=d,R.state=w,R.context=U,d=g):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{R=o.stateNode,$F(i,o),g=o.memoizedProps,U=o.type===o.elementType?g:Xs(o.type,g),R.props=U,y=o.pendingProps,v=R.context,w=l.contextType,typeof w=="object"&&w!==null?w=Rs(w):(w=Fa(l)?ff:Jo.current,w=lh(o,w));var D=l.getDerivedStateFromProps;(C=typeof D=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(g!==y||v!==w)&&hP(o,R,d,w),$l=!1,v=o.memoizedState,R.state=v,S0(o,d,R,p);var m=o.memoizedState;g!==y||v!==m||ka.current||$l?(typeof D=="function"&&(PI(o,l,D,d),m=o.memoizedState),(U=$l||dP(o,l,U,d,v,m,w)||!1)?(C||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(d,m,w),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(d,m,w)),typeof R.componentDidUpdate=="function"&&(o.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof R.componentDidUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=m),R.props=d,R.state=m,R.context=w,d=U):(typeof R.componentDidUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&v===i.memoizedState||(o.flags|=1024),d=!1)}return FI(i,o,l,d,I,p)}function FI(i,o,l,d,p,I){S4(i,o);var R=(o.flags&128)!==0;if(!d&&!R)return p&&iP(o,l,!1),_l(i,o,I);d=o.stateNode,Zq.current=o;var g=R&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&R?(o.child=fh(o,i.child,null,I),o.child=fh(o,null,g,I)):ya(i,o,g,I),o.memoizedState=d.state,p&&iP(o,l,!0),o.child}function w4(i){var o=i.stateNode;o.pendingContext?rP(i,o.pendingContext,o.pendingContext!==o.context):o.context&&rP(i,o.context,!1),kb(i,o.containerInfo)}function _P(i,o,l,d,p){return ch(),Nb(p),o.flags|=256,ya(i,o,l,d),o.child}var UI={dehydrated:null,treeContext:null,retryLane:0};function BI(i){return{baseLanes:i,cachePool:null,transitions:null}}function A4(i,o,l){var d=o.pendingProps,p=qi.current,I=!1,R=(o.flags&128)!==0,g;if((g=R)||(g=i!==null&&i.memoizedState===null?!1:(p&2)!==0),g?(I=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Ii(qi,p&1),i===null)return MI(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(R=d.children,i=d.fallback,I?(d=o.mode,I=o.child,R={mode:"hidden",children:R},!(d&1)&&I!==null?(I.childLanes=0,I.pendingProps=R):I=$0(R,d,0,null),i=uf(i,d,l,null),I.return=o,i.return=o,I.sibling=i,o.child=I,o.child.memoizedState=BI(l),o.memoizedState=UI,i):Hb(o,R));if(p=i.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return Gq(i,o,R,d,g,p,l);if(I){I=d.fallback,R=o.mode,p=i.child,g=p.sibling;var w={mode:"hidden",children:d.children};return!(R&1)&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=w,o.deletions=null):(d=uc(p,w),d.subtreeFlags=p.subtreeFlags&14680064),g!==null?I=uc(g,I):(I=uf(I,R,l,null),I.flags|=2),I.return=o,d.return=o,d.sibling=I,o.child=d,d=I,I=o.child,R=i.child.memoizedState,R=R===null?BI(l):{baseLanes:R.baseLanes|l,cachePool:null,transitions:R.transitions},I.memoizedState=R,I.childLanes=i.childLanes&~l,o.memoizedState=UI,d}return I=i.child,i=I.sibling,d=uc(I,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=l),d.return=o,d.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=d,o.memoizedState=null,d}function Hb(i,o){return o=$0({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ky(i,o,l,d){return d!==null&&Nb(d),fh(o,i.child,null,l),i=Hb(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Gq(i,o,l,d,p,I,R){if(l)return o.flags&256?(o.flags&=-257,d=wT(Error(jn(422))),ky(i,o,R,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(I=d.fallback,p=o.mode,d=$0({mode:"visible",children:d.children},p,0,null),I=uf(I,p,R,null),I.flags|=2,d.return=o,I.return=o,d.sibling=I,o.child=d,o.mode&1&&fh(o,i.child,null,R),o.child.memoizedState=BI(R),o.memoizedState=UI,I);if(!(o.mode&1))return ky(i,o,R,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var g=d.dgst;return d=g,I=Error(jn(419)),d=wT(I,d,void 0),ky(i,o,R,d)}if(g=(R&i.childLanes)!==0,La||g){if(d=Mo,d!==null){switch(R&-R){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(d.suspendedLanes|R)?0:p,p!==0&&p!==I.retryLane&&(I.retryLane=p,El(i,p),ou(d,i,p,-1))}return $b(),d=wT(Error(jn(421))),ky(i,o,R,d)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=tH.bind(null,i),p._reactRetry=o,null):(i=I.treeContext,us=ic(p.nextSibling),cs=o,Ui=!0,Js=null,i!==null&&(ws[As++]=pl,ws[As++]=gl,ws[As++]=df,pl=i.id,gl=i.overflow,df=o),o=Hb(o,d.children),o.flags|=4096,o)}function TP(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),DI(i.return,o,l)}function AT(i,o,l,d,p){var I=i.memoizedState;I===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(I.isBackwards=o,I.rendering=null,I.renderingStartTime=0,I.last=d,I.tail=l,I.tailMode=p)}function I4(i,o,l){var d=o.pendingProps,p=d.revealOrder,I=d.tail;if(ya(i,o,d.children,l),d=qi.current,d&2)d=d&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&TP(i,l,o);else if(i.tag===19)TP(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Ii(qi,d),!(o.mode&1))o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&w0(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),AT(o,!1,p,l,I);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&w0(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}AT(o,!0,l,null,I);break;case"together":AT(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function e0(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function _l(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),pf|=o.lanes,!(l&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(jn(153));if(o.child!==null){for(i=o.child,l=uc(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=uc(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function qq(i,o,l){switch(o.tag){case 3:w4(o),ch();break;case 5:XF(o);break;case 1:Fa(o.type)&&v0(o);break;case 4:kb(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;Ii(_0,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Ii(qi,qi.current&1),o.flags|=128,null):l&o.child.childLanes?A4(i,o,l):(Ii(qi,qi.current&1),i=_l(i,o,l),i!==null?i.sibling:null);Ii(qi,qi.current&1);break;case 19:if(d=(l&o.childLanes)!==0,i.flags&128){if(d)return I4(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ii(qi,qi.current),d)break;return null;case 22:case 23:return o.lanes=0,T4(i,o,l)}return _l(i,o,l)}var b4,jI,C4,R4;b4=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};jI=function(){};C4=function(i,o,l,d){var p=i.memoizedProps;if(p!==d){i=o.stateNode,of(Mu.current);var I=null;switch(l){case"input":p=uI(i,p),d=uI(i,d),I=[];break;case"select":p=Vi({},p,{value:void 0}),d=Vi({},d,{value:void 0}),I=[];break;case"textarea":p=fI(i,p),d=fI(i,d),I=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=g0)}hI(l,d);var R;l=null;for(U in p)if(!d.hasOwnProperty(U)&&p.hasOwnProperty(U)&&p[U]!=null)if(U==="style"){var g=p[U];for(R in g)g.hasOwnProperty(R)&&(l||(l={}),l[R]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(wg.hasOwnProperty(U)?I||(I=[]):(I=I||[]).push(U,null));for(U in d){var w=d[U];if(g=p!=null?p[U]:void 0,d.hasOwnProperty(U)&&w!==g&&(w!=null||g!=null))if(U==="style")if(g){for(R in g)!g.hasOwnProperty(R)||w&&w.hasOwnProperty(R)||(l||(l={}),l[R]="");for(R in w)w.hasOwnProperty(R)&&g[R]!==w[R]&&(l||(l={}),l[R]=w[R])}else l||(I||(I=[]),I.push(U,l)),l=w;else U==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,g=g?g.__html:void 0,w!=null&&g!==w&&(I=I||[]).push(U,w)):U==="children"?typeof w!="string"&&typeof w!="number"||(I=I||[]).push(U,""+w):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(wg.hasOwnProperty(U)?(w!=null&&U==="onScroll"&&xi("scroll",i),I||g===w||(I=[])):(I=I||[]).push(U,w))}l&&(I=I||[]).push("style",l);var U=I;(o.updateQueue=U)&&(o.flags|=4)}};R4=function(i,o,l,d){l!==d&&(o.flags|=4)};function Jp(i,o){if(!Ui)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Wo(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function Hq(i,o,l){var d=o.pendingProps;switch(xb(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(o),null;case 1:return Fa(o.type)&&m0(),Wo(o),null;case 3:return d=o.stateNode,dh(),Ni(ka),Ni(Jo),Ub(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Oy(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Js!==null&&(YI(Js),Js=null))),jI(i,o),Wo(o),null;case 5:Fb(o);var p=of(Lg.current);if(l=o.type,i!==null&&o.stateNode!=null)C4(i,o,l,d,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(jn(166));return Wo(o),null}if(i=of(Mu.current),Oy(o)){d=o.stateNode,l=o.type;var I=o.memoizedProps;switch(d[xu]=o,d[Pg]=I,i=(o.mode&1)!==0,l){case"dialog":xi("cancel",d),xi("close",d);break;case"iframe":case"object":case"embed":xi("load",d);break;case"video":case"audio":for(p=0;p<lg.length;p++)xi(lg[p],d);break;case"source":xi("error",d);break;case"img":case"image":case"link":xi("error",d),xi("load",d);break;case"details":xi("toggle",d);break;case"input":ND(d,I),xi("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!I.multiple},xi("invalid",d);break;case"textarea":DD(d,I),xi("invalid",d)}hI(l,I),p=null;for(var R in I)if(I.hasOwnProperty(R)){var g=I[R];R==="children"?typeof g=="string"?d.textContent!==g&&(I.suppressHydrationWarning!==!0&&Py(d.textContent,g,i),p=["children",g]):typeof g=="number"&&d.textContent!==""+g&&(I.suppressHydrationWarning!==!0&&Py(d.textContent,g,i),p=["children",""+g]):wg.hasOwnProperty(R)&&g!=null&&R==="onScroll"&&xi("scroll",d)}switch(l){case"input":Iy(d),MD(d,I,!0);break;case"textarea":Iy(d),PD(d);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(d.onclick=g0)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{R=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=nF(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=R.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=R.createElement(l,{is:d.is}):(i=R.createElement(l),l==="select"&&(R=i,d.multiple?R.multiple=!0:d.size&&(R.size=d.size))):i=R.createElementNS(i,l),i[xu]=o,i[Pg]=d,b4(i,o,!1,!1),o.stateNode=i;e:{switch(R=pI(l,d),l){case"dialog":xi("cancel",i),xi("close",i),p=d;break;case"iframe":case"object":case"embed":xi("load",i),p=d;break;case"video":case"audio":for(p=0;p<lg.length;p++)xi(lg[p],i);p=d;break;case"source":xi("error",i),p=d;break;case"img":case"image":case"link":xi("error",i),xi("load",i),p=d;break;case"details":xi("toggle",i),p=d;break;case"input":ND(i,d),p=uI(i,d),xi("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=Vi({},d,{value:void 0}),xi("invalid",i);break;case"textarea":DD(i,d),p=fI(i,d),xi("invalid",i);break;default:p=d}hI(l,p),g=p;for(I in g)if(g.hasOwnProperty(I)){var w=g[I];I==="style"?oF(i,w):I==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&rF(i,w)):I==="children"?typeof w=="string"?(l!=="textarea"||w!=="")&&Ag(i,w):typeof w=="number"&&Ag(i,""+w):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(wg.hasOwnProperty(I)?w!=null&&I==="onScroll"&&xi("scroll",i):w!=null&&pb(i,I,w,R))}switch(l){case"input":Iy(i),MD(i,d,!1);break;case"textarea":Iy(i),PD(i);break;case"option":d.value!=null&&i.setAttribute("value",""+cc(d.value));break;case"select":i.multiple=!!d.multiple,I=d.value,I!=null?nh(i,!!d.multiple,I,!1):d.defaultValue!=null&&nh(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=g0)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Wo(o),null;case 6:if(i&&o.stateNode!=null)R4(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(jn(166));if(l=of(Lg.current),of(Mu.current),Oy(o)){if(d=o.stateNode,l=o.memoizedProps,d[xu]=o,(I=d.nodeValue!==l)&&(i=cs,i!==null))switch(i.tag){case 3:Py(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Py(d.nodeValue,l,(i.mode&1)!==0)}I&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[xu]=o,o.stateNode=d}return Wo(o),null;case 13:if(Ni(qi),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ui&&us!==null&&o.mode&1&&!(o.flags&128))VF(),ch(),o.flags|=98560,I=!1;else if(I=Oy(o),d!==null&&d.dehydrated!==null){if(i===null){if(!I)throw Error(jn(318));if(I=o.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(jn(317));I[xu]=o}else ch(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Wo(o),I=!1}else Js!==null&&(YI(Js),Js=null),I=!0;if(!I)return o.flags&65536?o:null}return o.flags&128?(o.lanes=l,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(i===null||qi.current&1?To===0&&(To=3):$b())),o.updateQueue!==null&&(o.flags|=4),Wo(o),null);case 4:return dh(),jI(i,o),i===null&&Mg(o.stateNode.containerInfo),Wo(o),null;case 10:return Pb(o.type._context),Wo(o),null;case 17:return Fa(o.type)&&m0(),Wo(o),null;case 19:if(Ni(qi),I=o.memoizedState,I===null)return Wo(o),null;if(d=(o.flags&128)!==0,R=I.rendering,R===null)if(d)Jp(I,!1);else{if(To!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(R=w0(i),R!==null){for(o.flags|=128,Jp(I,!1),d=R.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)I=l,i=d,I.flags&=14680066,R=I.alternate,R===null?(I.childLanes=0,I.lanes=i,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=R.childLanes,I.lanes=R.lanes,I.child=R.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=R.memoizedProps,I.memoizedState=R.memoizedState,I.updateQueue=R.updateQueue,I.type=R.type,i=R.dependencies,I.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Ii(qi,qi.current&1|2),o.child}i=i.sibling}I.tail!==null&&lo()>ph&&(o.flags|=128,d=!0,Jp(I,!1),o.lanes=4194304)}else{if(!d)if(i=w0(R),i!==null){if(o.flags|=128,d=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Jp(I,!0),I.tail===null&&I.tailMode==="hidden"&&!R.alternate&&!Ui)return Wo(o),null}else 2*lo()-I.renderingStartTime>ph&&l!==1073741824&&(o.flags|=128,d=!0,Jp(I,!1),o.lanes=4194304);I.isBackwards?(R.sibling=o.child,o.child=R):(l=I.last,l!==null?l.sibling=R:o.child=R,I.last=R)}return I.tail!==null?(o=I.tail,I.rendering=o,I.tail=o.sibling,I.renderingStartTime=lo(),o.sibling=null,l=qi.current,Ii(qi,d?l&1|2:l&1),o):(Wo(o),null);case 22:case 23:return Wb(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?as&1073741824&&(Wo(o),o.subtreeFlags&6&&(o.flags|=8192)):Wo(o),null;case 24:return null;case 25:return null}throw Error(jn(156,o.tag))}function Kq(i,o){switch(xb(o),o.tag){case 1:return Fa(o.type)&&m0(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return dh(),Ni(ka),Ni(Jo),Ub(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Fb(o),null;case 13:if(Ni(qi),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(jn(340));ch()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ni(qi),null;case 4:return dh(),null;case 10:return Pb(o.type._context),null;case 22:case 23:return Wb(),null;case 24:return null;default:return null}}var Fy=!1,Xo=!1,Vq=typeof WeakSet=="function"?WeakSet:Set,nr=null;function Xd(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Qi(i,o,d)}else l.current=null}function ZI(i,o,l){try{l()}catch(d){Qi(i,o,d)}}var SP=!1;function zq(i,o){if(AI=d0,i=PF(),Cb(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,I=d.focusNode;d=d.focusOffset;try{l.nodeType,I.nodeType}catch(b){l=null;break e}var R=0,g=-1,w=-1,U=0,C=0,y=i,v=null;t:for(;;){for(var D;y!==l||p!==0&&y.nodeType!==3||(g=R+p),y!==I||d!==0&&y.nodeType!==3||(w=R+d),y.nodeType===3&&(R+=y.nodeValue.length),(D=y.firstChild)!==null;)v=y,y=D;for(;;){if(y===i)break t;if(v===l&&++U===p&&(g=R),v===I&&++C===d&&(w=R),(D=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=D}l=g===-1||w===-1?null:{start:g,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(II={focusedElem:i,selectionRange:l},d0=!1,nr=o;nr!==null;)if(o=nr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,nr=i;else for(;nr!==null;){o=nr;try{var m=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,F=m.memoizedState,N=o.stateNode,_=N.getSnapshotBeforeUpdate(o.elementType===o.type?T:Xs(o.type,T),F);N.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=o.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(b){Qi(o,o.return,b)}if(i=o.sibling,i!==null){i.return=o.return,nr=i;break}nr=o.return}return m=SP,SP=!1,m}function Eg(i,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var I=p.destroy;p.destroy=void 0,I!==void 0&&ZI(o,l,I)}p=p.next}while(p!==d)}}function Y0(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function GI(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function x4(i){var o=i.alternate;o!==null&&(i.alternate=null,x4(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[xu],delete o[Pg],delete o[RI],delete o[xq],delete o[Nq])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function N4(i){return i.tag===5||i.tag===3||i.tag===4}function wP(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||N4(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qI(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=g0));else if(d!==4&&(i=i.child,i!==null))for(qI(i,o,l),i=i.sibling;i!==null;)qI(i,o,l),i=i.sibling}function HI(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(HI(i,o,l),i=i.sibling;i!==null;)HI(i,o,l),i=i.sibling}var Bo=null,Qs=!1;function Yl(i,o,l){for(l=l.child;l!==null;)M4(i,o,l),l=l.sibling}function M4(i,o,l){if(Nu&&typeof Nu.onCommitFiberUnmount=="function")try{Nu.onCommitFiberUnmount(j0,l)}catch(g){}switch(l.tag){case 5:Xo||Xd(l,o);case 6:var d=Bo,p=Qs;Bo=null,Yl(i,o,l),Bo=d,Qs=p,Bo!==null&&(Qs?(i=Bo,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Bo.removeChild(l.stateNode));break;case 18:Bo!==null&&(Qs?(i=Bo,l=l.stateNode,i.nodeType===8?vT(i.parentNode,l):i.nodeType===1&&vT(i,l),Rg(i)):vT(Bo,l.stateNode));break;case 4:d=Bo,p=Qs,Bo=l.stateNode.containerInfo,Qs=!0,Yl(i,o,l),Bo=d,Qs=p;break;case 0:case 11:case 14:case 15:if(!Xo&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var I=p,R=I.destroy;I=I.tag,R!==void 0&&(I&2||I&4)&&ZI(l,o,R),p=p.next}while(p!==d)}Yl(i,o,l);break;case 1:if(!Xo&&(Xd(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(g){Qi(l,o,g)}Yl(i,o,l);break;case 21:Yl(i,o,l);break;case 22:l.mode&1?(Xo=(d=Xo)||l.memoizedState!==null,Yl(i,o,l),Xo=d):Yl(i,o,l);break;default:Yl(i,o,l)}}function AP(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Vq),o.forEach(function(d){var p=nH.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Ws(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var I=i,R=o,g=R;e:for(;g!==null;){switch(g.tag){case 5:Bo=g.stateNode,Qs=!1;break e;case 3:Bo=g.stateNode.containerInfo,Qs=!0;break e;case 4:Bo=g.stateNode.containerInfo,Qs=!0;break e}g=g.return}if(Bo===null)throw Error(jn(160));M4(I,R,p),Bo=null,Qs=!1;var w=p.alternate;w!==null&&(w.return=null),p.return=null}catch(U){Qi(p,o,U)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)D4(o,i),o=o.sibling}function D4(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ws(o,i),Au(i),d&4){try{Eg(3,i,i.return),Y0(3,i)}catch(T){Qi(i,i.return,T)}try{Eg(5,i,i.return)}catch(T){Qi(i,i.return,T)}}break;case 1:Ws(o,i),Au(i),d&512&&l!==null&&Xd(l,l.return);break;case 5:if(Ws(o,i),Au(i),d&512&&l!==null&&Xd(l,l.return),i.flags&32){var p=i.stateNode;try{Ag(p,"")}catch(T){Qi(i,i.return,T)}}if(d&4&&(p=i.stateNode,p!=null)){var I=i.memoizedProps,R=l!==null?l.memoizedProps:I,g=i.type,w=i.updateQueue;if(i.updateQueue=null,w!==null)try{g==="input"&&I.type==="radio"&&I.name!=null&&eF(p,I),pI(g,R);var U=pI(g,I);for(R=0;R<w.length;R+=2){var C=w[R],y=w[R+1];C==="style"?oF(p,y):C==="dangerouslySetInnerHTML"?rF(p,y):C==="children"?Ag(p,y):pb(p,C,y,U)}switch(g){case"input":lI(p,I);break;case"textarea":tF(p,I);break;case"select":var v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!I.multiple;var D=I.value;D!=null?nh(p,!!I.multiple,D,!1):v!==!!I.multiple&&(I.defaultValue!=null?nh(p,!!I.multiple,I.defaultValue,!0):nh(p,!!I.multiple,I.multiple?[]:"",!1))}p[Pg]=I}catch(T){Qi(i,i.return,T)}}break;case 6:if(Ws(o,i),Au(i),d&4){if(i.stateNode===null)throw Error(jn(162));p=i.stateNode,I=i.memoizedProps;try{p.nodeValue=I}catch(T){Qi(i,i.return,T)}}break;case 3:if(Ws(o,i),Au(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Rg(o.containerInfo)}catch(T){Qi(i,i.return,T)}break;case 4:Ws(o,i),Au(i);break;case 13:Ws(o,i),Au(i),p=i.child,p.flags&8192&&(I=p.memoizedState!==null,p.stateNode.isHidden=I,!I||p.alternate!==null&&p.alternate.memoizedState!==null||(zb=lo())),d&4&&AP(i);break;case 22:if(C=l!==null&&l.memoizedState!==null,i.mode&1?(Xo=(U=Xo)||C,Ws(o,i),Xo=U):Ws(o,i),Au(i),d&8192){if(U=i.memoizedState!==null,(i.stateNode.isHidden=U)&&!C&&i.mode&1)for(nr=i,C=i.child;C!==null;){for(y=nr=C;nr!==null;){switch(v=nr,D=v.child,v.tag){case 0:case 11:case 14:case 15:Eg(4,v,v.return);break;case 1:Xd(v,v.return);var m=v.stateNode;if(typeof m.componentWillUnmount=="function"){d=v,l=v.return;try{o=d,m.props=o.memoizedProps,m.state=o.memoizedState,m.componentWillUnmount()}catch(T){Qi(d,l,T)}}break;case 5:Xd(v,v.return);break;case 22:if(v.memoizedState!==null){bP(y);continue}}D!==null?(D.return=v,nr=D):bP(y)}C=C.sibling}e:for(C=null,y=i;;){if(y.tag===5){if(C===null){C=y;try{p=y.stateNode,U?(I=p.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(g=y.stateNode,w=y.memoizedProps.style,R=w!=null&&w.hasOwnProperty("display")?w.display:null,g.style.display=iF("display",R))}catch(T){Qi(i,i.return,T)}}}else if(y.tag===6){if(C===null)try{y.stateNode.nodeValue=U?"":y.memoizedProps}catch(T){Qi(i,i.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===i)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;C===y&&(C=null),y=y.return}C===y&&(C=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ws(o,i),Au(i),d&4&&AP(i);break;case 21:break;default:Ws(o,i),Au(i)}}function Au(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(N4(l)){var d=l;break e}l=l.return}throw Error(jn(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Ag(p,""),d.flags&=-33);var I=wP(i);HI(i,I,p);break;case 3:case 4:var R=d.stateNode.containerInfo,g=wP(i);qI(i,g,R);break;default:throw Error(jn(161))}}catch(w){Qi(i,i.return,w)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Yq(i,o,l){nr=i,P4(i)}function P4(i,o,l){for(var d=(i.mode&1)!==0;nr!==null;){var p=nr,I=p.child;if(p.tag===22&&d){var R=p.memoizedState!==null||Fy;if(!R){var g=p.alternate,w=g!==null&&g.memoizedState!==null||Xo;g=Fy;var U=Xo;if(Fy=R,(Xo=w)&&!U)for(nr=p;nr!==null;)R=nr,w=R.child,R.tag===22&&R.memoizedState!==null?CP(p):w!==null?(w.return=R,nr=w):CP(p);for(;I!==null;)nr=I,P4(I),I=I.sibling;nr=p,Fy=g,Xo=U}IP(i)}else p.subtreeFlags&8772&&I!==null?(I.return=p,nr=I):IP(i)}}function IP(i){for(;nr!==null;){var o=nr;if(o.flags&8772){var l=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Xo||Y0(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Xo)if(l===null)d.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Xs(o.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var I=o.updateQueue;I!==null&&lP(o,I,d);break;case 3:var R=o.updateQueue;if(R!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}lP(o,R,l)}break;case 5:var g=o.stateNode;if(l===null&&o.flags&4){l=g;var w=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&l.focus();break;case"img":w.src&&(l.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var U=o.alternate;if(U!==null){var C=U.memoizedState;if(C!==null){var y=C.dehydrated;y!==null&&Rg(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Xo||o.flags&512&&GI(o)}catch(v){Qi(o,o.return,v)}}if(o===i){nr=null;break}if(l=o.sibling,l!==null){l.return=o.return,nr=l;break}nr=o.return}}function bP(i){for(;nr!==null;){var o=nr;if(o===i){nr=null;break}var l=o.sibling;if(l!==null){l.return=o.return,nr=l;break}nr=o.return}}function CP(i){for(;nr!==null;){var o=nr;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Y0(4,o)}catch(w){Qi(o,l,w)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(w){Qi(o,p,w)}}var I=o.return;try{GI(o)}catch(w){Qi(o,I,w)}break;case 5:var R=o.return;try{GI(o)}catch(w){Qi(o,R,w)}}}catch(w){Qi(o,o.return,w)}if(o===i){nr=null;break}var g=o.sibling;if(g!==null){g.return=o.return,nr=g;break}nr=o.return}}var Wq=Math.ceil,b0=Tl.ReactCurrentDispatcher,Kb=Tl.ReactCurrentOwner,Cs=Tl.ReactCurrentBatchConfig,$r=0,Mo=null,po=null,jo=0,as=0,Qd=hc(0),To=0,Bg=null,pf=0,W0=0,Vb=0,_g=null,Oa=null,zb=0,ph=1/0,dl=null,C0=!1,KI=null,ac=null,Uy=!1,ec=null,R0=0,Tg=0,VI=null,t0=-1,n0=0;function Ea(){return $r&6?lo():t0!==-1?t0:t0=lo()}function sc(i){return i.mode&1?$r&2&&jo!==0?jo&-jo:Dq.transition!==null?(n0===0&&(n0=vF()),n0):(i=di,i!==0||(i=window.event,i=i===void 0?16:AF(i.type)),i):1}function ou(i,o,l,d){if(50<Tg)throw Tg=0,VI=null,Error(jn(185));Kg(i,l,d),(!($r&2)||i!==Mo)&&(i===Mo&&(!($r&2)&&(W0|=l),To===4&&Ql(i,jo)),Ua(i,d),l===1&&$r===0&&!(o.mode&1)&&(ph=lo()+500,K0&&pc()))}function Ua(i,o){var l=i.callbackNode;D9(i,o);var d=f0(i,i===Mo?jo:0);if(d===0)l!==null&&kD(l),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(l!=null&&kD(l),o===1)i.tag===0?Mq(RP.bind(null,i)):qF(RP.bind(null,i)),Cq(function(){!($r&6)&&pc()}),l=null;else{switch(yF(d)){case 1:l=Eb;break;case 4:l=gF;break;case 16:l=c0;break;case 536870912:l=mF;break;default:l=c0}l=Z4(l,O4.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function O4(i,o){if(t0=-1,n0=0,$r&6)throw Error(jn(327));var l=i.callbackNode;if(sh()&&i.callbackNode!==l)return null;var d=f0(i,i===Mo?jo:0);if(d===0)return null;if(d&30||d&i.expiredLanes||o)o=x0(i,d);else{o=d;var p=$r;$r|=2;var I=k4();(Mo!==i||jo!==o)&&(dl=null,ph=lo()+500,sf(i,o));do try{Qq();break}catch(g){L4(i,g)}while(!0);Db(),b0.current=I,$r=p,po!==null?o=0:(Mo=null,jo=0,o=To)}if(o!==0){if(o===2&&(p=EI(i),p!==0&&(d=p,o=zI(i,p))),o===1)throw l=Bg,sf(i,0),Ql(i,d),Ua(i,lo()),l;if(o===6)Ql(i,d);else{if(p=i.current.alternate,!(d&30)&&!$q(p)&&(o=x0(i,d),o===2&&(I=EI(i),I!==0&&(d=I,o=zI(i,I))),o===1))throw l=Bg,sf(i,0),Ql(i,d),Ua(i,lo()),l;switch(i.finishedWork=p,i.finishedLanes=d,o){case 0:case 1:throw Error(jn(345));case 2:Jc(i,Oa,dl);break;case 3:if(Ql(i,d),(d&130023424)===d&&(o=zb+500-lo(),10<o)){if(f0(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){Ea(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=CI(Jc.bind(null,i,Oa,dl),o);break}Jc(i,Oa,dl);break;case 4:if(Ql(i,d),(d&4194240)===d)break;for(o=i.eventTimes,p=-1;0<d;){var R=31-iu(d);I=1<<R,R=o[R],R>p&&(p=R),d&=~I}if(d=p,d=lo()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Wq(d/1960))-d,10<d){i.timeoutHandle=CI(Jc.bind(null,i,Oa,dl),d);break}Jc(i,Oa,dl);break;case 5:Jc(i,Oa,dl);break;default:throw Error(jn(329))}}}return Ua(i,lo()),i.callbackNode===l?O4.bind(null,i):null}function zI(i,o){var l=_g;return i.current.memoizedState.isDehydrated&&(sf(i,o).flags|=256),i=x0(i,o),i!==2&&(o=Oa,Oa=l,o!==null&&YI(o)),i}function YI(i){Oa===null?Oa=i:Oa.push.apply(Oa,i)}function $q(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],I=p.getSnapshot;p=p.value;try{if(!au(I(),p))return!1}catch(R){return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ql(i,o){for(o&=~Vb,o&=~W0,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-iu(o),d=1<<l;i[l]=-1,o&=~d}}function RP(i){if($r&6)throw Error(jn(327));sh();var o=f0(i,0);if(!(o&1))return Ua(i,lo()),null;var l=x0(i,o);if(i.tag!==0&&l===2){var d=EI(i);d!==0&&(o=d,l=zI(i,d))}if(l===1)throw l=Bg,sf(i,0),Ql(i,o),Ua(i,lo()),l;if(l===6)throw Error(jn(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Jc(i,Oa,dl),Ua(i,lo()),null}function Yb(i,o){var l=$r;$r|=1;try{return i(o)}finally{$r=l,$r===0&&(ph=lo()+500,K0&&pc())}}function gf(i){ec!==null&&ec.tag===0&&!($r&6)&&sh();var o=$r;$r|=1;var l=Cs.transition,d=di;try{if(Cs.transition=null,di=1,i)return i()}finally{di=d,Cs.transition=l,$r=o,!($r&6)&&pc()}}function Wb(){as=Qd.current,Ni(Qd)}function sf(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,bq(l)),po!==null)for(l=po.return;l!==null;){var d=l;switch(xb(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&m0();break;case 3:dh(),Ni(ka),Ni(Jo),Ub();break;case 5:Fb(d);break;case 4:dh();break;case 13:Ni(qi);break;case 19:Ni(qi);break;case 10:Pb(d.type._context);break;case 22:case 23:Wb()}l=l.return}if(Mo=i,po=i=uc(i.current,null),jo=as=o,To=0,Bg=null,Vb=W0=pf=0,Oa=_g=null,rf!==null){for(o=0;o<rf.length;o++)if(l=rf[o],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,I=l.pending;if(I!==null){var R=I.next;I.next=p,d.next=R}l.pending=d}rf=null}return i}function L4(i,o){do{var l=po;try{if(Db(),Qy.current=I0,A0){for(var d=Ki.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}A0=!1}if(hf=0,No=_o=Ki=null,yg=!1,kg=0,Kb.current=null,l===null||l.return===null){To=1,Bg=o,po=null;break}e:{var I=i,R=l.return,g=l,w=o;if(o=jo,g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var U=w,C=g,y=C.tag;if(!(C.mode&1)&&(y===0||y===11||y===15)){var v=C.alternate;v?(C.updateQueue=v.updateQueue,C.memoizedState=v.memoizedState,C.lanes=v.lanes):(C.updateQueue=null,C.memoizedState=null)}var D=gP(R);if(D!==null){D.flags&=-257,mP(D,R,g,I,o),D.mode&1&&pP(I,U,o),o=D,w=U;var m=o.updateQueue;if(m===null){var T=new Set;T.add(w),o.updateQueue=T}else m.add(w);break e}else{if(!(o&1)){pP(I,U,o),$b();break e}w=Error(jn(426))}}else if(Ui&&g.mode&1){var F=gP(R);if(F!==null){!(F.flags&65536)&&(F.flags|=256),mP(F,R,g,I,o),Nb(hh(w,g));break e}}I=w=hh(w,g),To!==4&&(To=2),_g===null?_g=[I]:_g.push(I),I=R;do{switch(I.tag){case 3:I.flags|=65536,o&=-o,I.lanes|=o;var N=y4(I,w,o);uP(I,N);break e;case 1:g=w;var _=I.type,A=I.stateNode;if(!(I.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ac===null||!ac.has(A)))){I.flags|=65536,o&=-o,I.lanes|=o;var b=E4(I,g,o);uP(I,b);break e}}I=I.return}while(I!==null)}U4(l)}catch(j){o=j,po===l&&l!==null&&(po=l=l.return);continue}break}while(!0)}function k4(){var i=b0.current;return b0.current=I0,i===null?I0:i}function $b(){(To===0||To===3||To===2)&&(To=4),Mo===null||!(pf&268435455)&&!(W0&268435455)||Ql(Mo,jo)}function x0(i,o){var l=$r;$r|=2;var d=k4();(Mo!==i||jo!==o)&&(dl=null,sf(i,o));do try{Xq();break}catch(p){L4(i,p)}while(!0);if(Db(),$r=l,b0.current=d,po!==null)throw Error(jn(261));return Mo=null,jo=0,To}function Xq(){for(;po!==null;)F4(po)}function Qq(){for(;po!==null&&!w9();)F4(po)}function F4(i){var o=j4(i.alternate,i,as);i.memoizedProps=i.pendingProps,o===null?U4(i):po=o,Kb.current=null}function U4(i){var o=i;do{var l=o.alternate;if(i=o.return,o.flags&32768){if(l=Kq(l,o),l!==null){l.flags&=32767,po=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{To=6,po=null;return}}else if(l=Hq(l,o,as),l!==null){po=l;return}if(o=o.sibling,o!==null){po=o;return}po=o=i}while(o!==null);To===0&&(To=5)}function Jc(i,o,l){var d=di,p=Cs.transition;try{Cs.transition=null,di=1,Jq(i,o,l,d)}finally{Cs.transition=p,di=d}return null}function Jq(i,o,l,d){do sh();while(ec!==null);if($r&6)throw Error(jn(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(jn(177));i.callbackNode=null,i.callbackPriority=0;var I=l.lanes|l.childLanes;if(P9(i,I),i===Mo&&(po=Mo=null,jo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Uy||(Uy=!0,Z4(c0,function(){return sh(),null})),I=(l.flags&15990)!==0,l.subtreeFlags&15990||I){I=Cs.transition,Cs.transition=null;var R=di;di=1;var g=$r;$r|=4,Kb.current=null,zq(i,l),D4(l,i),Eq(II),d0=!!AI,II=AI=null,i.current=l,Yq(l),A9(),$r=g,di=R,Cs.transition=I}else i.current=l;if(Uy&&(Uy=!1,ec=i,R0=p),I=i.pendingLanes,I===0&&(ac=null),C9(l.stateNode),Ua(i,lo()),o!==null)for(d=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(C0)throw C0=!1,i=KI,KI=null,i;return R0&1&&i.tag!==0&&sh(),I=i.pendingLanes,I&1?i===VI?Tg++:(Tg=0,VI=i):Tg=0,pc(),null}function sh(){if(ec!==null){var i=yF(R0),o=Cs.transition,l=di;try{if(Cs.transition=null,di=16>i?16:i,ec===null)var d=!1;else{if(i=ec,ec=null,R0=0,$r&6)throw Error(jn(331));var p=$r;for($r|=4,nr=i.current;nr!==null;){var I=nr,R=I.child;if(nr.flags&16){var g=I.deletions;if(g!==null){for(var w=0;w<g.length;w++){var U=g[w];for(nr=U;nr!==null;){var C=nr;switch(C.tag){case 0:case 11:case 15:Eg(8,C,I)}var y=C.child;if(y!==null)y.return=C,nr=y;else for(;nr!==null;){C=nr;var v=C.sibling,D=C.return;if(x4(C),C===U){nr=null;break}if(v!==null){v.return=D,nr=v;break}nr=D}}}var m=I.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var F=T.sibling;T.sibling=null,T=F}while(T!==null)}}nr=I}}if(I.subtreeFlags&2064&&R!==null)R.return=I,nr=R;else e:for(;nr!==null;){if(I=nr,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Eg(9,I,I.return)}var N=I.sibling;if(N!==null){N.return=I.return,nr=N;break e}nr=I.return}}var _=i.current;for(nr=_;nr!==null;){R=nr;var A=R.child;if(R.subtreeFlags&2064&&A!==null)A.return=R,nr=A;else e:for(R=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Y0(9,g)}}catch(j){Qi(g,g.return,j)}if(g===R){nr=null;break e}var b=g.sibling;if(b!==null){b.return=g.return,nr=b;break e}nr=g.return}}if($r=p,pc(),Nu&&typeof Nu.onPostCommitFiberRoot=="function")try{Nu.onPostCommitFiberRoot(j0,i)}catch(j){}d=!0}return d}finally{di=l,Cs.transition=o}}return!1}function xP(i,o,l){o=hh(l,o),o=y4(i,o,1),i=oc(i,o,1),o=Ea(),i!==null&&(Kg(i,1,o),Ua(i,o))}function Qi(i,o,l){if(i.tag===3)xP(i,i,l);else for(;o!==null;){if(o.tag===3){xP(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ac===null||!ac.has(d))){i=hh(l,i),i=E4(o,i,1),o=oc(o,i,1),i=Ea(),o!==null&&(Kg(o,1,i),Ua(o,i));break}}o=o.return}}function eH(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),o=Ea(),i.pingedLanes|=i.suspendedLanes&l,Mo===i&&(jo&l)===l&&(To===4||To===3&&(jo&130023424)===jo&&500>lo()-zb?sf(i,0):Vb|=l),Ua(i,o)}function B4(i,o){o===0&&(i.mode&1?(o=Ry,Ry<<=1,!(Ry&130023424)&&(Ry=4194304)):o=1);var l=Ea();i=El(i,o),i!==null&&(Kg(i,o,l),Ua(i,l))}function tH(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),B4(i,l)}function nH(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(jn(314))}d!==null&&d.delete(o),B4(i,l)}var j4;j4=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||ka.current)La=!0;else{if(!(i.lanes&l)&&!(o.flags&128))return La=!1,qq(i,o,l);La=!!(i.flags&131072)}else La=!1,Ui&&o.flags&1048576&&HF(o,E0,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;e0(i,o),i=o.pendingProps;var p=lh(o,Jo.current);ah(o,l),p=jb(null,o,d,i,p,l);var I=Zb();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Fa(d)?(I=!0,v0(o)):I=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Lb(o),p.updater=z0,o.stateNode=p,p._reactInternals=o,OI(o,d,i,l),o=FI(null,o,d,!0,I,l)):(o.tag=0,Ui&&I&&Rb(o),ya(null,o,p,l),o=o.child),o;case 16:d=o.elementType;e:{switch(e0(i,o),i=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=iH(d),i=Xs(d,i),p){case 0:o=kI(null,o,d,i,l);break e;case 1:o=EP(null,o,d,i,l);break e;case 11:o=vP(null,o,d,i,l);break e;case 14:o=yP(null,o,d,Xs(d.type,i),l);break e}throw Error(jn(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Xs(d,p),kI(i,o,d,p,l);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Xs(d,p),EP(i,o,d,p,l);case 3:e:{if(w4(o),i===null)throw Error(jn(387));d=o.pendingProps,I=o.memoizedState,p=I.element,$F(i,o),S0(o,d,null,l);var R=o.memoizedState;if(d=R.element,I.isDehydrated)if(I={element:d,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},o.updateQueue.baseState=I,o.memoizedState=I,o.flags&256){p=hh(Error(jn(423)),o),o=_P(i,o,d,l,p);break e}else if(d!==p){p=hh(Error(jn(424)),o),o=_P(i,o,d,l,p);break e}else for(us=ic(o.stateNode.containerInfo.firstChild),cs=o,Ui=!0,Js=null,l=YF(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ch(),d===p){o=_l(i,o,l);break e}ya(i,o,d,l)}o=o.child}return o;case 5:return XF(o),i===null&&MI(o),d=o.type,p=o.pendingProps,I=i!==null?i.memoizedProps:null,R=p.children,bI(d,p)?R=null:I!==null&&bI(d,I)&&(o.flags|=32),S4(i,o),ya(i,o,R,l),o.child;case 6:return i===null&&MI(o),null;case 13:return A4(i,o,l);case 4:return kb(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=fh(o,null,d,l):ya(i,o,d,l),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Xs(d,p),vP(i,o,d,p,l);case 7:return ya(i,o,o.pendingProps,l),o.child;case 8:return ya(i,o,o.pendingProps.children,l),o.child;case 12:return ya(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,I=o.memoizedProps,R=p.value,Ii(_0,d._currentValue),d._currentValue=R,I!==null)if(au(I.value,R)){if(I.children===p.children&&!ka.current){o=_l(i,o,l);break e}}else for(I=o.child,I!==null&&(I.return=o);I!==null;){var g=I.dependencies;if(g!==null){R=I.child;for(var w=g.firstContext;w!==null;){if(w.context===d){if(I.tag===1){w=ml(-1,l&-l),w.tag=2;var U=I.updateQueue;if(U!==null){U=U.shared;var C=U.pending;C===null?w.next=w:(w.next=C.next,C.next=w),U.pending=w}}I.lanes|=l,w=I.alternate,w!==null&&(w.lanes|=l),DI(I.return,l,o),g.lanes|=l;break}w=w.next}}else if(I.tag===10)R=I.type===o.type?null:I.child;else if(I.tag===18){if(R=I.return,R===null)throw Error(jn(341));R.lanes|=l,g=R.alternate,g!==null&&(g.lanes|=l),DI(R,l,o),R=I.sibling}else R=I.child;if(R!==null)R.return=I;else for(R=I;R!==null;){if(R===o){R=null;break}if(I=R.sibling,I!==null){I.return=R.return,R=I;break}R=R.return}I=R}ya(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,ah(o,l),p=Rs(p),d=d(p),o.flags|=1,ya(i,o,d,l),o.child;case 14:return d=o.type,p=Xs(d,o.pendingProps),p=Xs(d.type,p),yP(i,o,d,p,l);case 15:return _4(i,o,o.type,o.pendingProps,l);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Xs(d,p),e0(i,o),o.tag=1,Fa(d)?(i=!0,v0(o)):i=!1,ah(o,l),v4(o,d,p),OI(o,d,p,l),FI(null,o,d,!0,i,l);case 19:return I4(i,o,l);case 22:return T4(i,o,l)}throw Error(jn(156,o.tag))};function Z4(i,o){return pF(i,o)}function rH(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(i,o,l,d){return new rH(i,o,l,d)}function Xb(i){return i=i.prototype,!(!i||!i.isReactComponent)}function iH(i){if(typeof i=="function")return Xb(i)?1:0;if(i!=null){if(i=i.$$typeof,i===mb)return 11;if(i===vb)return 14}return 2}function uc(i,o){var l=i.alternate;return l===null?(l=bs(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function r0(i,o,l,d,p,I){var R=2;if(d=i,typeof i=="function")Xb(i)&&(R=1);else if(typeof i=="string")R=5;else e:switch(i){case Gd:return uf(l.children,p,I,o);case gb:R=8,p|=8;break;case iI:return i=bs(12,l,o,p|2),i.elementType=iI,i.lanes=I,i;case oI:return i=bs(13,l,o,p),i.elementType=oI,i.lanes=I,i;case aI:return i=bs(19,l,o,p),i.elementType=aI,i.lanes=I,i;case X3:return $0(l,p,I,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case W3:R=10;break e;case $3:R=9;break e;case mb:R=11;break e;case vb:R=14;break e;case Wl:R=16,d=null;break e}throw Error(jn(130,i==null?i:typeof i,""))}return o=bs(R,l,o,p),o.elementType=i,o.type=d,o.lanes=I,o}function uf(i,o,l,d){return i=bs(7,i,d,o),i.lanes=l,i}function $0(i,o,l,d){return i=bs(22,i,d,o),i.elementType=X3,i.lanes=l,i.stateNode={isHidden:!1},i}function IT(i,o,l){return i=bs(6,i,null,o),i.lanes=l,i}function bT(i,o,l){return o=bs(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function oH(i,o,l,d,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aT(0),this.expirationTimes=aT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aT(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Qb(i,o,l,d,p,I,R,g,w){return i=new oH(i,o,l,g,w),o===1?(o=1,I===!0&&(o|=8)):o=0,I=bs(3,null,null,o),i.current=I,I.stateNode=i,I.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lb(I),i}function aH(i,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zd,key:d==null?null:""+d,children:i,containerInfo:o,implementation:l}}function G4(i){if(!i)return fc;i=i._reactInternals;e:{if(Ef(i)!==i||i.tag!==1)throw Error(jn(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Fa(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(jn(171))}if(i.tag===1){var l=i.type;if(Fa(l))return GF(i,l,o)}return o}function q4(i,o,l,d,p,I,R,g,w){return i=Qb(l,d,!0,i,p,I,R,g,w),i.context=G4(null),l=i.current,d=Ea(),p=sc(l),I=ml(d,p),I.callback=o!=null?o:null,oc(l,I,p),i.current.lanes=p,Kg(i,p,d),Ua(i,d),i}function X0(i,o,l,d){var p=o.current,I=Ea(),R=sc(p);return l=G4(l),o.context===null?o.context=l:o.pendingContext=l,o=ml(I,R),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=oc(p,o,R),i!==null&&(ou(i,p,R,I),Xy(i,p,R)),R}function N0(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function NP(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Jb(i,o){NP(i,o),(i=i.alternate)&&NP(i,o)}function sH(){return null}var H4=typeof reportError=="function"?reportError:function(i){console.error(i)};function eC(i){this._internalRoot=i}Q0.prototype.render=eC.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(jn(409));X0(i,o,null,null)};Q0.prototype.unmount=eC.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;gf(function(){X0(null,i,null,null)}),o[yl]=null}};function Q0(i){this._internalRoot=i}Q0.prototype.unstable_scheduleHydration=function(i){if(i){var o=TF();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Xl.length&&o!==0&&o<Xl[l].priority;l++);Xl.splice(l,0,i),l===0&&wF(i)}};function tC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function J0(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function MP(){}function uH(i,o,l,d,p){if(p){if(typeof d=="function"){var I=d;d=function(){var U=N0(R);I.call(U)}}var R=q4(o,d,i,0,null,!1,!1,"",MP);return i._reactRootContainer=R,i[yl]=R.current,Mg(i.nodeType===8?i.parentNode:i),gf(),R}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var g=d;d=function(){var U=N0(w);g.call(U)}}var w=Qb(i,0,!1,null,null,!1,!1,"",MP);return i._reactRootContainer=w,i[yl]=w.current,Mg(i.nodeType===8?i.parentNode:i),gf(function(){X0(o,w,l,d)}),w}function eE(i,o,l,d,p){var I=l._reactRootContainer;if(I){var R=I;if(typeof p=="function"){var g=p;p=function(){var w=N0(R);g.call(w)}}X0(o,R,i,p)}else R=uH(l,o,i,p,d);return N0(R)}EF=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=ug(o.pendingLanes);l!==0&&(_b(o,l|1),Ua(o,lo()),!($r&6)&&(ph=lo()+500,pc()))}break;case 13:gf(function(){var d=El(i,1);if(d!==null){var p=Ea();ou(d,i,1,p)}}),Jb(i,1)}};Tb=function(i){if(i.tag===13){var o=El(i,134217728);if(o!==null){var l=Ea();ou(o,i,134217728,l)}Jb(i,134217728)}};_F=function(i){if(i.tag===13){var o=sc(i),l=El(i,o);if(l!==null){var d=Ea();ou(l,i,o,d)}Jb(i,o)}};TF=function(){return di};SF=function(i,o){var l=di;try{return di=i,o()}finally{di=l}};mI=function(i,o,l){switch(o){case"input":if(lI(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var p=H0(d);if(!p)throw Error(jn(90));J3(d),lI(d,p)}}}break;case"textarea":tF(i,l);break;case"select":o=l.value,o!=null&&nh(i,!!l.multiple,o,!1)}};uF=Yb;lF=gf;var lH={usingClientEntryPoint:!1,Events:[zg,Vd,H0,aF,sF,Yb]},eg={findFiberByHostInstance:nf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cH={bundleType:eg.bundleType,version:eg.version,rendererPackageName:eg.rendererPackageName,rendererConfig:eg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=dF(i),i===null?null:i.stateNode},findFiberByHostInstance:eg.findFiberByHostInstance||sH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var By=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!By.isDisabled&&By.supportsFiber)try{j0=By.inject(cH),Nu=By}catch(i){}}ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lH;ds.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tC(o))throw Error(jn(200));return aH(i,o,null,l)};ds.createRoot=function(i,o){if(!tC(i))throw Error(jn(299));var l=!1,d="",p=H4;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Qb(i,1,!1,null,null,l,!1,d,p),i[yl]=o.current,Mg(i.nodeType===8?i.parentNode:i),new eC(o)};ds.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(jn(188)):(i=Object.keys(i).join(","),Error(jn(268,i)));return i=dF(o),i=i===null?null:i.stateNode,i};ds.flushSync=function(i){return gf(i)};ds.hydrate=function(i,o,l){if(!J0(o))throw Error(jn(200));return eE(null,i,o,!0,l)};ds.hydrateRoot=function(i,o,l){if(!tC(i))throw Error(jn(405));var d=l!=null&&l.hydratedSources||null,p=!1,I="",R=H4;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(I=l.identifierPrefix),l.onRecoverableError!==void 0&&(R=l.onRecoverableError)),o=q4(o,null,i,1,l!=null?l:null,p,!1,I,R),i[yl]=o.current,Mg(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Q0(o)};ds.render=function(i,o,l){if(!J0(o))throw Error(jn(200));return eE(null,i,o,!1,l)};ds.unmountComponentAtNode=function(i){if(!J0(i))throw Error(jn(40));return i._reactRootContainer?(gf(function(){eE(null,null,i,!1,function(){i._reactRootContainer=null,i[yl]=null})}),!0):!1};ds.unstable_batchedUpdates=Yb;ds.unstable_renderSubtreeIntoContainer=function(i,o,l,d){if(!J0(l))throw Error(jn(200));if(i==null||i._reactInternals===void 0)throw Error(jn(38));return eE(i,o,l,!1,d)};ds.version="18.3.1-next-f1338f8080-20240426";function K4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K4)}catch(i){console.error(i)}}K4(),K3.exports=ds;var fH=K3.exports,DP=fH;nI.createRoot=DP.createRoot,nI.hydrateRoot=DP.hydrateRoot;var V4={exports:{}},CT,PP;function _f(){if(PP)return CT;PP=1;function i(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}return CT=i,CT}var RT,OP;function z4(){if(OP)return RT;OP=1;var i=typeof tu=="object"&&tu&&tu.Object===Object&&tu;return RT=i,RT}var xT,LP;function Du(){if(LP)return xT;LP=1;var i=z4(),o=typeof self=="object"&&self&&self.Object===Object&&self,l=i||o||Function("return this")();return xT=l,xT}var NT,kP;function dH(){if(kP)return NT;kP=1;var i=Du(),o=function(){return i.Date.now()};return NT=o,NT}var MT,FP;function hH(){if(FP)return MT;FP=1;var i=/\s/;function o(l){for(var d=l.length;d--&&i.test(l.charAt(d)););return d}return MT=o,MT}var DT,UP;function pH(){if(UP)return DT;UP=1;var i=hH(),o=/^\s+/;function l(d){return d&&d.slice(0,i(d)+1).replace(o,"")}return DT=l,DT}var PT,BP;function Wg(){if(BP)return PT;BP=1;var i=Du(),o=i.Symbol;return PT=o,PT}var OT,jP;function gH(){if(jP)return OT;jP=1;var i=Wg(),o=Object.prototype,l=o.hasOwnProperty,d=o.toString,p=i?i.toStringTag:void 0;function I(R){var g=l.call(R,p),w=R[p];try{R[p]=void 0;var U=!0}catch(y){}var C=d.call(R);return U&&(g?R[p]=w:delete R[p]),C}return OT=I,OT}var LT,ZP;function mH(){if(ZP)return LT;ZP=1;var i=Object.prototype,o=i.toString;function l(d){return o.call(d)}return LT=l,LT}var kT,GP;function $g(){if(GP)return kT;GP=1;var i=Wg(),o=gH(),l=mH(),d="[object Null]",p="[object Undefined]",I=i?i.toStringTag:void 0;function R(g){return g==null?g===void 0?p:d:I&&I in Object(g)?o(g):l(g)}return kT=R,kT}var FT,qP;function Eh(){if(qP)return FT;qP=1;function i(o){return o!=null&&typeof o=="object"}return FT=i,FT}var UT,HP;function Xg(){if(HP)return UT;HP=1;var i=$g(),o=Eh(),l="[object Symbol]";function d(p){return typeof p=="symbol"||o(p)&&i(p)==l}return UT=d,UT}var BT,KP;function vH(){if(KP)return BT;KP=1;var i=pH(),o=_f(),l=Xg(),d=NaN,p=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,R=/^0o[0-7]+$/i,g=parseInt;function w(U){if(typeof U=="number")return U;if(l(U))return d;if(o(U)){var C=typeof U.valueOf=="function"?U.valueOf():U;U=o(C)?C+"":C}if(typeof U!="string")return U===0?U:+U;U=i(U);var y=I.test(U);return y||R.test(U)?g(U.slice(2),y?2:8):p.test(U)?d:+U}return BT=w,BT}var jT,VP;function Y4(){if(VP)return jT;VP=1;var i=_f(),o=dH(),l=vH(),d="Expected a function",p=Math.max,I=Math.min;function R(g,w,U){var C,y,v,D,m,T,F=0,N=!1,_=!1,A=!0;if(typeof g!="function")throw new TypeError(d);w=l(w)||0,i(U)&&(N=!!U.leading,_="maxWait"in U,v=_?p(l(U.maxWait)||0,w):v,A="trailing"in U?!!U.trailing:A);function b(oe){var me=C,Ce=y;return C=y=void 0,F=oe,D=g.apply(Ce,me),D}function j(oe){return F=oe,m=setTimeout($,w),N?b(oe):D}function Y(oe){var me=oe-T,Ce=oe-F,Je=w-me;return _?I(Je,v-Ce):Je}function W(oe){var me=oe-T,Ce=oe-F;return T===void 0||me>=w||me<0||_&&Ce>=v}function $(){var oe=o();if(W(oe))return se(oe);m=setTimeout($,Y(oe))}function se(oe){return m=void 0,A&&C?b(oe):(C=y=void 0,D)}function x(){m!==void 0&&clearTimeout(m),F=0,C=T=y=m=void 0}function X(){return m===void 0?D:se(o())}function ce(){var oe=o(),me=W(oe);if(C=arguments,y=this,T=oe,me){if(m===void 0)return j(T);if(_)return clearTimeout(m),m=setTimeout($,w),b(T)}return m===void 0&&(m=setTimeout($,w)),D}return ce.cancel=x,ce.flush=X,ce}return jT=R,jT}var ZT,zP;function W4(){if(zP)return ZT;zP=1;var i=$g(),o=_f(),l="[object AsyncFunction]",d="[object Function]",p="[object GeneratorFunction]",I="[object Proxy]";function R(g){if(!o(g))return!1;var w=i(g);return w==d||w==p||w==l||w==I}return ZT=R,ZT}var GT,YP;function yH(){if(YP)return GT;YP=1;var i=Du(),o=i["__core-js_shared__"];return GT=o,GT}var qT,WP;function EH(){if(WP)return qT;WP=1;var i=yH(),o=function(){var d=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function l(d){return!!o&&o in d}return qT=l,qT}var HT,$P;function $4(){if($P)return HT;$P=1;var i=Function.prototype,o=i.toString;function l(d){if(d!=null){try{return o.call(d)}catch(p){}try{return d+""}catch(p){}}return""}return HT=l,HT}var KT,XP;function _H(){if(XP)return KT;XP=1;var i=W4(),o=EH(),l=_f(),d=$4(),p=/[\\^$.*+?()[\]{}|]/g,I=/^\[object .+?Constructor\]$/,R=Function.prototype,g=Object.prototype,w=R.toString,U=g.hasOwnProperty,C=RegExp("^"+w.call(U).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(v){if(!l(v)||o(v))return!1;var D=i(v)?C:I;return D.test(d(v))}return KT=y,KT}var VT,QP;function TH(){if(QP)return VT;QP=1;function i(o,l){return o==null?void 0:o[l]}return VT=i,VT}var zT,JP;function Tf(){if(JP)return zT;JP=1;var i=_H(),o=TH();function l(d,p){var I=o(d,p);return i(I)?I:void 0}return zT=l,zT}var YT,eO;function tE(){if(eO)return YT;eO=1;var i=Tf(),o=i(Object,"create");return YT=o,YT}var WT,tO;function SH(){if(tO)return WT;tO=1;var i=tE();function o(){this.__data__=i?i(null):{},this.size=0}return WT=o,WT}var $T,nO;function wH(){if(nO)return $T;nO=1;function i(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}return $T=i,$T}var XT,rO;function AH(){if(rO)return XT;rO=1;var i=tE(),o="__lodash_hash_undefined__",l=Object.prototype,d=l.hasOwnProperty;function p(I){var R=this.__data__;if(i){var g=R[I];return g===o?void 0:g}return d.call(R,I)?R[I]:void 0}return XT=p,XT}var QT,iO;function IH(){if(iO)return QT;iO=1;var i=tE(),o=Object.prototype,l=o.hasOwnProperty;function d(p){var I=this.__data__;return i?I[p]!==void 0:l.call(I,p)}return QT=d,QT}var JT,oO;function bH(){if(oO)return JT;oO=1;var i=tE(),o="__lodash_hash_undefined__";function l(d,p){var I=this.__data__;return this.size+=this.has(d)?0:1,I[d]=i&&p===void 0?o:p,this}return JT=l,JT}var eS,aO;function CH(){if(aO)return eS;aO=1;var i=SH(),o=wH(),l=AH(),d=IH(),p=bH();function I(R){var g=-1,w=R==null?0:R.length;for(this.clear();++g<w;){var U=R[g];this.set(U[0],U[1])}}return I.prototype.clear=i,I.prototype.delete=o,I.prototype.get=l,I.prototype.has=d,I.prototype.set=p,eS=I,eS}var tS,sO;function RH(){if(sO)return tS;sO=1;function i(){this.__data__=[],this.size=0}return tS=i,tS}var nS,uO;function nC(){if(uO)return nS;uO=1;function i(o,l){return o===l||o!==o&&l!==l}return nS=i,nS}var rS,lO;function nE(){if(lO)return rS;lO=1;var i=nC();function o(l,d){for(var p=l.length;p--;)if(i(l[p][0],d))return p;return-1}return rS=o,rS}var iS,cO;function xH(){if(cO)return iS;cO=1;var i=nE(),o=Array.prototype,l=o.splice;function d(p){var I=this.__data__,R=i(I,p);if(R<0)return!1;var g=I.length-1;return R==g?I.pop():l.call(I,R,1),--this.size,!0}return iS=d,iS}var oS,fO;function NH(){if(fO)return oS;fO=1;var i=nE();function o(l){var d=this.__data__,p=i(d,l);return p<0?void 0:d[p][1]}return oS=o,oS}var aS,dO;function MH(){if(dO)return aS;dO=1;var i=nE();function o(l){return i(this.__data__,l)>-1}return aS=o,aS}var sS,hO;function DH(){if(hO)return sS;hO=1;var i=nE();function o(l,d){var p=this.__data__,I=i(p,l);return I<0?(++this.size,p.push([l,d])):p[I][1]=d,this}return sS=o,sS}var uS,pO;function rE(){if(pO)return uS;pO=1;var i=RH(),o=xH(),l=NH(),d=MH(),p=DH();function I(R){var g=-1,w=R==null?0:R.length;for(this.clear();++g<w;){var U=R[g];this.set(U[0],U[1])}}return I.prototype.clear=i,I.prototype.delete=o,I.prototype.get=l,I.prototype.has=d,I.prototype.set=p,uS=I,uS}var lS,gO;function rC(){if(gO)return lS;gO=1;var i=Tf(),o=Du(),l=i(o,"Map");return lS=l,lS}var cS,mO;function PH(){if(mO)return cS;mO=1;var i=CH(),o=rE(),l=rC();function d(){this.size=0,this.__data__={hash:new i,map:new(l||o),string:new i}}return cS=d,cS}var fS,vO;function OH(){if(vO)return fS;vO=1;function i(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}return fS=i,fS}var dS,yO;function iE(){if(yO)return dS;yO=1;var i=OH();function o(l,d){var p=l.__data__;return i(d)?p[typeof d=="string"?"string":"hash"]:p.map}return dS=o,dS}var hS,EO;function LH(){if(EO)return hS;EO=1;var i=iE();function o(l){var d=i(this,l).delete(l);return this.size-=d?1:0,d}return hS=o,hS}var pS,_O;function kH(){if(_O)return pS;_O=1;var i=iE();function o(l){return i(this,l).get(l)}return pS=o,pS}var gS,TO;function FH(){if(TO)return gS;TO=1;var i=iE();function o(l){return i(this,l).has(l)}return gS=o,gS}var mS,SO;function UH(){if(SO)return mS;SO=1;var i=iE();function o(l,d){var p=i(this,l),I=p.size;return p.set(l,d),this.size+=p.size==I?0:1,this}return mS=o,mS}var vS,wO;function iC(){if(wO)return vS;wO=1;var i=PH(),o=LH(),l=kH(),d=FH(),p=UH();function I(R){var g=-1,w=R==null?0:R.length;for(this.clear();++g<w;){var U=R[g];this.set(U[0],U[1])}}return I.prototype.clear=i,I.prototype.delete=o,I.prototype.get=l,I.prototype.has=d,I.prototype.set=p,vS=I,vS}var yS,AO;function BH(){if(AO)return yS;AO=1;var i="__lodash_hash_undefined__";function o(l){return this.__data__.set(l,i),this}return yS=o,yS}var ES,IO;function jH(){if(IO)return ES;IO=1;function i(o){return this.__data__.has(o)}return ES=i,ES}var _S,bO;function X4(){if(bO)return _S;bO=1;var i=iC(),o=BH(),l=jH();function d(p){var I=-1,R=p==null?0:p.length;for(this.__data__=new i;++I<R;)this.add(p[I])}return d.prototype.add=d.prototype.push=o,d.prototype.has=l,_S=d,_S}var TS,CO;function ZH(){if(CO)return TS;CO=1;function i(o,l,d,p){for(var I=o.length,R=d+(p?1:-1);p?R--:++R<I;)if(l(o[R],R,o))return R;return-1}return TS=i,TS}var SS,RO;function GH(){if(RO)return SS;RO=1;function i(o){return o!==o}return SS=i,SS}var wS,xO;function qH(){if(xO)return wS;xO=1;function i(o,l,d){for(var p=d-1,I=o.length;++p<I;)if(o[p]===l)return p;return-1}return wS=i,wS}var AS,NO;function HH(){if(NO)return AS;NO=1;var i=ZH(),o=GH(),l=qH();function d(p,I,R){return I===I?l(p,I,R):i(p,o,R)}return AS=d,AS}var IS,MO;function KH(){if(MO)return IS;MO=1;var i=HH();function o(l,d){var p=l==null?0:l.length;return!!p&&i(l,d,0)>-1}return IS=o,IS}var bS,DO;function VH(){if(DO)return bS;DO=1;function i(o,l,d){for(var p=-1,I=o==null?0:o.length;++p<I;)if(d(l,o[p]))return!0;return!1}return bS=i,bS}var CS,PO;function oC(){if(PO)return CS;PO=1;function i(o,l){for(var d=-1,p=o==null?0:o.length,I=Array(p);++d<p;)I[d]=l(o[d],d,o);return I}return CS=i,CS}var RS,OO;function aC(){if(OO)return RS;OO=1;function i(o){return function(l){return o(l)}}return RS=i,RS}var xS,LO;function Q4(){if(LO)return xS;LO=1;function i(o,l){return o.has(l)}return xS=i,xS}var NS,kO;function zH(){if(kO)return NS;kO=1;var i=X4(),o=KH(),l=VH(),d=oC(),p=aC(),I=Q4(),R=200;function g(w,U,C,y){var v=-1,D=o,m=!0,T=w.length,F=[],N=U.length;if(!T)return F;C&&(U=d(U,p(C))),y?(D=l,m=!1):U.length>=R&&(D=I,m=!1,U=new i(U));e:for(;++v<T;){var _=w[v],A=C==null?_:C(_);if(_=y||_!==0?_:0,m&&A===A){for(var b=N;b--;)if(U[b]===A)continue e;F.push(_)}else D(U,A,y)||F.push(_)}return F}return NS=g,NS}var MS,FO;function J4(){if(FO)return MS;FO=1;function i(o,l){for(var d=-1,p=l.length,I=o.length;++d<p;)o[I+d]=l[d];return o}return MS=i,MS}var DS,UO;function YH(){if(UO)return DS;UO=1;var i=$g(),o=Eh(),l="[object Arguments]";function d(p){return o(p)&&i(p)==l}return DS=d,DS}var PS,BO;function sC(){if(BO)return PS;BO=1;var i=YH(),o=Eh(),l=Object.prototype,d=l.hasOwnProperty,p=l.propertyIsEnumerable,I=i(function(){return arguments}())?i:function(R){return o(R)&&d.call(R,"callee")&&!p.call(R,"callee")};return PS=I,PS}var OS,jO;function Ns(){if(jO)return OS;jO=1;var i=Array.isArray;return OS=i,OS}var LS,ZO;function WH(){if(ZO)return LS;ZO=1;var i=Wg(),o=sC(),l=Ns(),d=i?i.isConcatSpreadable:void 0;function p(I){return l(I)||o(I)||!!(d&&I&&I[d])}return LS=p,LS}var kS,GO;function eU(){if(GO)return kS;GO=1;var i=J4(),o=WH();function l(d,p,I,R,g){var w=-1,U=d.length;for(I||(I=o),g||(g=[]);++w<U;){var C=d[w];p>0&&I(C)?p>1?l(C,p-1,I,R,g):i(g,C):R||(g[g.length]=C)}return g}return kS=l,kS}var FS,qO;function Qg(){if(qO)return FS;qO=1;function i(o){return o}return FS=i,FS}var US,HO;function $H(){if(HO)return US;HO=1;function i(o,l,d){switch(d.length){case 0:return o.call(l);case 1:return o.call(l,d[0]);case 2:return o.call(l,d[0],d[1]);case 3:return o.call(l,d[0],d[1],d[2])}return o.apply(l,d)}return US=i,US}var BS,KO;function XH(){if(KO)return BS;KO=1;var i=$H(),o=Math.max;function l(d,p,I){return p=o(p===void 0?d.length-1:p,0),function(){for(var R=arguments,g=-1,w=o(R.length-p,0),U=Array(w);++g<w;)U[g]=R[p+g];g=-1;for(var C=Array(p+1);++g<p;)C[g]=R[g];return C[p]=I(U),i(d,this,C)}}return BS=l,BS}var jS,VO;function QH(){if(VO)return jS;VO=1;function i(o){return function(){return o}}return jS=i,jS}var ZS,zO;function JH(){if(zO)return ZS;zO=1;var i=Tf(),o=function(){try{var l=i(Object,"defineProperty");return l({},"",{}),l}catch(d){}}();return ZS=o,ZS}var GS,YO;function e7(){if(YO)return GS;YO=1;var i=QH(),o=JH(),l=Qg(),d=o?function(p,I){return o(p,"toString",{configurable:!0,enumerable:!1,value:i(I),writable:!0})}:l;return GS=d,GS}var qS,WO;function t7(){if(WO)return qS;WO=1;var i=800,o=16,l=Date.now;function d(p){var I=0,R=0;return function(){var g=l(),w=o-(g-R);if(R=g,w>0){if(++I>=i)return arguments[0]}else I=0;return p.apply(void 0,arguments)}}return qS=d,qS}var HS,$O;function n7(){if($O)return HS;$O=1;var i=e7(),o=t7(),l=o(i);return HS=l,HS}var KS,XO;function tU(){if(XO)return KS;XO=1;var i=Qg(),o=XH(),l=n7();function d(p,I){return l(o(p,I,i),p+"")}return KS=d,KS}var VS,QO;function uC(){if(QO)return VS;QO=1;var i=9007199254740991;function o(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=i}return VS=o,VS}var zS,JO;function Jg(){if(JO)return zS;JO=1;var i=W4(),o=uC();function l(d){return d!=null&&o(d.length)&&!i(d)}return zS=l,zS}var YS,eL;function r7(){if(eL)return YS;eL=1;var i=Jg(),o=Eh();function l(d){return o(d)&&i(d)}return YS=l,YS}var WS,tL;function i7(){if(tL)return WS;tL=1;var i=zH(),o=eU(),l=tU(),d=r7(),p=l(function(I,R){return d(I)?i(I,o(R,1,d,!0)):[]});return WS=p,WS}var $S,nL;function nU(){if(nL)return $S;nL=1;function i(o,l){for(var d=-1,p=o==null?0:o.length,I=0,R=[];++d<p;){var g=o[d];l(g,d,o)&&(R[I++]=g)}return R}return $S=i,$S}var XS,rL;function o7(){if(rL)return XS;rL=1;function i(o){return function(l,d,p){for(var I=-1,R=Object(l),g=p(l),w=g.length;w--;){var U=g[o?w:++I];if(d(R[U],U,R)===!1)break}return l}}return XS=i,XS}var QS,iL;function a7(){if(iL)return QS;iL=1;var i=o7(),o=i();return QS=o,QS}var JS,oL;function s7(){if(oL)return JS;oL=1;function i(o,l){for(var d=-1,p=Array(o);++d<o;)p[d]=l(d);return p}return JS=i,JS}var cg={exports:{}},ew,aL;function u7(){if(aL)return ew;aL=1;function i(){return!1}return ew=i,ew}cg.exports;var sL;function rU(){return sL||(sL=1,function(i,o){var l=Du(),d=u7(),p=o&&!o.nodeType&&o,I=p&&!0&&i&&!i.nodeType&&i,R=I&&I.exports===p,g=R?l.Buffer:void 0,w=g?g.isBuffer:void 0,U=w||d;i.exports=U}(cg,cg.exports)),cg.exports}var tw,uL;function lC(){if(uL)return tw;uL=1;var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function l(d,p){var I=typeof d;return p=p==null?i:p,!!p&&(I=="number"||I!="symbol"&&o.test(d))&&d>-1&&d%1==0&&d<p}return tw=l,tw}var nw,lL;function l7(){if(lL)return nw;lL=1;var i=$g(),o=uC(),l=Eh(),d="[object Arguments]",p="[object Array]",I="[object Boolean]",R="[object Date]",g="[object Error]",w="[object Function]",U="[object Map]",C="[object Number]",y="[object Object]",v="[object RegExp]",D="[object Set]",m="[object String]",T="[object WeakMap]",F="[object ArrayBuffer]",N="[object DataView]",_="[object Float32Array]",A="[object Float64Array]",b="[object Int8Array]",j="[object Int16Array]",Y="[object Int32Array]",W="[object Uint8Array]",$="[object Uint8ClampedArray]",se="[object Uint16Array]",x="[object Uint32Array]",X={};X[_]=X[A]=X[b]=X[j]=X[Y]=X[W]=X[$]=X[se]=X[x]=!0,X[d]=X[p]=X[F]=X[I]=X[N]=X[R]=X[g]=X[w]=X[U]=X[C]=X[y]=X[v]=X[D]=X[m]=X[T]=!1;function ce(oe){return l(oe)&&o(oe.length)&&!!X[i(oe)]}return nw=ce,nw}var fg={exports:{}};fg.exports;var cL;function c7(){return cL||(cL=1,function(i,o){var l=z4(),d=o&&!o.nodeType&&o,p=d&&!0&&i&&!i.nodeType&&i,I=p&&p.exports===d,R=I&&l.process,g=function(){try{var w=p&&p.require&&p.require("util").types;return w||R&&R.binding&&R.binding("util")}catch(U){}}();i.exports=g}(fg,fg.exports)),fg.exports}var rw,fL;function iU(){if(fL)return rw;fL=1;var i=l7(),o=aC(),l=c7(),d=l&&l.isTypedArray,p=d?o(d):i;return rw=p,rw}var iw,dL;function f7(){if(dL)return iw;dL=1;var i=s7(),o=sC(),l=Ns(),d=rU(),p=lC(),I=iU(),R=Object.prototype,g=R.hasOwnProperty;function w(U,C){var y=l(U),v=!y&&o(U),D=!y&&!v&&d(U),m=!y&&!v&&!D&&I(U),T=y||v||D||m,F=T?i(U.length,String):[],N=F.length;for(var _ in U)(C||g.call(U,_))&&!(T&&(_=="length"||D&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,N)))&&F.push(_);return F}return iw=w,iw}var ow,hL;function d7(){if(hL)return ow;hL=1;var i=Object.prototype;function o(l){var d=l&&l.constructor,p=typeof d=="function"&&d.prototype||i;return l===p}return ow=o,ow}var aw,pL;function h7(){if(pL)return aw;pL=1;function i(o,l){return function(d){return o(l(d))}}return aw=i,aw}var sw,gL;function p7(){if(gL)return sw;gL=1;var i=h7(),o=i(Object.keys,Object);return sw=o,sw}var uw,mL;function g7(){if(mL)return uw;mL=1;var i=d7(),o=p7(),l=Object.prototype,d=l.hasOwnProperty;function p(I){if(!i(I))return o(I);var R=[];for(var g in Object(I))d.call(I,g)&&g!="constructor"&&R.push(g);return R}return uw=p,uw}var lw,vL;function cC(){if(vL)return lw;vL=1;var i=f7(),o=g7(),l=Jg();function d(p){return l(p)?i(p):o(p)}return lw=d,lw}var cw,yL;function fC(){if(yL)return cw;yL=1;var i=a7(),o=cC();function l(d,p){return d&&i(d,p,o)}return cw=l,cw}var fw,EL;function m7(){if(EL)return fw;EL=1;var i=Jg();function o(l,d){return function(p,I){if(p==null)return p;if(!i(p))return l(p,I);for(var R=p.length,g=d?R:-1,w=Object(p);(d?g--:++g<R)&&I(w[g],g,w)!==!1;);return p}}return fw=o,fw}var dw,_L;function dC(){if(_L)return dw;_L=1;var i=fC(),o=m7(),l=o(i);return dw=l,dw}var hw,TL;function v7(){if(TL)return hw;TL=1;var i=dC();function o(l,d){var p=[];return i(l,function(I,R,g){d(I,R,g)&&p.push(I)}),p}return hw=o,hw}var pw,SL;function y7(){if(SL)return pw;SL=1;var i=rE();function o(){this.__data__=new i,this.size=0}return pw=o,pw}var gw,wL;function E7(){if(wL)return gw;wL=1;function i(o){var l=this.__data__,d=l.delete(o);return this.size=l.size,d}return gw=i,gw}var mw,AL;function _7(){if(AL)return mw;AL=1;function i(o){return this.__data__.get(o)}return mw=i,mw}var vw,IL;function T7(){if(IL)return vw;IL=1;function i(o){return this.__data__.has(o)}return vw=i,vw}var yw,bL;function S7(){if(bL)return yw;bL=1;var i=rE(),o=rC(),l=iC(),d=200;function p(I,R){var g=this.__data__;if(g instanceof i){var w=g.__data__;if(!o||w.length<d-1)return w.push([I,R]),this.size=++g.size,this;g=this.__data__=new l(w)}return g.set(I,R),this.size=g.size,this}return yw=p,yw}var Ew,CL;function oU(){if(CL)return Ew;CL=1;var i=rE(),o=y7(),l=E7(),d=_7(),p=T7(),I=S7();function R(g){var w=this.__data__=new i(g);this.size=w.size}return R.prototype.clear=o,R.prototype.delete=l,R.prototype.get=d,R.prototype.has=p,R.prototype.set=I,Ew=R,Ew}var _w,RL;function w7(){if(RL)return _w;RL=1;function i(o,l){for(var d=-1,p=o==null?0:o.length;++d<p;)if(l(o[d],d,o))return!0;return!1}return _w=i,_w}var Tw,xL;function aU(){if(xL)return Tw;xL=1;var i=X4(),o=w7(),l=Q4(),d=1,p=2;function I(R,g,w,U,C,y){var v=w&d,D=R.length,m=g.length;if(D!=m&&!(v&&m>D))return!1;var T=y.get(R),F=y.get(g);if(T&&F)return T==g&&F==R;var N=-1,_=!0,A=w&p?new i:void 0;for(y.set(R,g),y.set(g,R);++N<D;){var b=R[N],j=g[N];if(U)var Y=v?U(j,b,N,g,R,y):U(b,j,N,R,g,y);if(Y!==void 0){if(Y)continue;_=!1;break}if(A){if(!o(g,function(W,$){if(!l(A,$)&&(b===W||C(b,W,w,U,y)))return A.push($)})){_=!1;break}}else if(!(b===j||C(b,j,w,U,y))){_=!1;break}}return y.delete(R),y.delete(g),_}return Tw=I,Tw}var Sw,NL;function A7(){if(NL)return Sw;NL=1;var i=Du(),o=i.Uint8Array;return Sw=o,Sw}var ww,ML;function I7(){if(ML)return ww;ML=1;function i(o){var l=-1,d=Array(o.size);return o.forEach(function(p,I){d[++l]=[I,p]}),d}return ww=i,ww}var Aw,DL;function b7(){if(DL)return Aw;DL=1;function i(o){var l=-1,d=Array(o.size);return o.forEach(function(p){d[++l]=p}),d}return Aw=i,Aw}var Iw,PL;function C7(){if(PL)return Iw;PL=1;var i=Wg(),o=A7(),l=nC(),d=aU(),p=I7(),I=b7(),R=1,g=2,w="[object Boolean]",U="[object Date]",C="[object Error]",y="[object Map]",v="[object Number]",D="[object RegExp]",m="[object Set]",T="[object String]",F="[object Symbol]",N="[object ArrayBuffer]",_="[object DataView]",A=i?i.prototype:void 0,b=A?A.valueOf:void 0;function j(Y,W,$,se,x,X,ce){switch($){case _:if(Y.byteLength!=W.byteLength||Y.byteOffset!=W.byteOffset)return!1;Y=Y.buffer,W=W.buffer;case N:return!(Y.byteLength!=W.byteLength||!X(new o(Y),new o(W)));case w:case U:case v:return l(+Y,+W);case C:return Y.name==W.name&&Y.message==W.message;case D:case T:return Y==W+"";case y:var oe=p;case m:var me=se&R;if(oe||(oe=I),Y.size!=W.size&&!me)return!1;var Ce=ce.get(Y);if(Ce)return Ce==W;se|=g,ce.set(Y,W);var Je=d(oe(Y),oe(W),se,x,X,ce);return ce.delete(Y),Je;case F:if(b)return b.call(Y)==b.call(W)}return!1}return Iw=j,Iw}var bw,OL;function R7(){if(OL)return bw;OL=1;var i=J4(),o=Ns();function l(d,p,I){var R=p(d);return o(d)?R:i(R,I(d))}return bw=l,bw}var Cw,LL;function x7(){if(LL)return Cw;LL=1;function i(){return[]}return Cw=i,Cw}var Rw,kL;function N7(){if(kL)return Rw;kL=1;var i=nU(),o=x7(),l=Object.prototype,d=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,I=p?function(R){return R==null?[]:(R=Object(R),i(p(R),function(g){return d.call(R,g)}))}:o;return Rw=I,Rw}var xw,FL;function M7(){if(FL)return xw;FL=1;var i=R7(),o=N7(),l=cC();function d(p){return i(p,l,o)}return xw=d,xw}var Nw,UL;function D7(){if(UL)return Nw;UL=1;var i=M7(),o=1,l=Object.prototype,d=l.hasOwnProperty;function p(I,R,g,w,U,C){var y=g&o,v=i(I),D=v.length,m=i(R),T=m.length;if(D!=T&&!y)return!1;for(var F=D;F--;){var N=v[F];if(!(y?N in R:d.call(R,N)))return!1}var _=C.get(I),A=C.get(R);if(_&&A)return _==R&&A==I;var b=!0;C.set(I,R),C.set(R,I);for(var j=y;++F<D;){N=v[F];var Y=I[N],W=R[N];if(w)var $=y?w(W,Y,N,R,I,C):w(Y,W,N,I,R,C);if(!($===void 0?Y===W||U(Y,W,g,w,C):$)){b=!1;break}j||(j=N=="constructor")}if(b&&!j){var se=I.constructor,x=R.constructor;se!=x&&"constructor"in I&&"constructor"in R&&!(typeof se=="function"&&se instanceof se&&typeof x=="function"&&x instanceof x)&&(b=!1)}return C.delete(I),C.delete(R),b}return Nw=p,Nw}var Mw,BL;function P7(){if(BL)return Mw;BL=1;var i=Tf(),o=Du(),l=i(o,"DataView");return Mw=l,Mw}var Dw,jL;function O7(){if(jL)return Dw;jL=1;var i=Tf(),o=Du(),l=i(o,"Promise");return Dw=l,Dw}var Pw,ZL;function L7(){if(ZL)return Pw;ZL=1;var i=Tf(),o=Du(),l=i(o,"Set");return Pw=l,Pw}var Ow,GL;function k7(){if(GL)return Ow;GL=1;var i=Tf(),o=Du(),l=i(o,"WeakMap");return Ow=l,Ow}var Lw,qL;function F7(){if(qL)return Lw;qL=1;var i=P7(),o=rC(),l=O7(),d=L7(),p=k7(),I=$g(),R=$4(),g="[object Map]",w="[object Object]",U="[object Promise]",C="[object Set]",y="[object WeakMap]",v="[object DataView]",D=R(i),m=R(o),T=R(l),F=R(d),N=R(p),_=I;return(i&&_(new i(new ArrayBuffer(1)))!=v||o&&_(new o)!=g||l&&_(l.resolve())!=U||d&&_(new d)!=C||p&&_(new p)!=y)&&(_=function(A){var b=I(A),j=b==w?A.constructor:void 0,Y=j?R(j):"";if(Y)switch(Y){case D:return v;case m:return g;case T:return U;case F:return C;case N:return y}return b}),Lw=_,Lw}var kw,HL;function U7(){if(HL)return kw;HL=1;var i=oU(),o=aU(),l=C7(),d=D7(),p=F7(),I=Ns(),R=rU(),g=iU(),w=1,U="[object Arguments]",C="[object Array]",y="[object Object]",v=Object.prototype,D=v.hasOwnProperty;function m(T,F,N,_,A,b){var j=I(T),Y=I(F),W=j?C:p(T),$=Y?C:p(F);W=W==U?y:W,$=$==U?y:$;var se=W==y,x=$==y,X=W==$;if(X&&R(T)){if(!R(F))return!1;j=!0,se=!1}if(X&&!se)return b||(b=new i),j||g(T)?o(T,F,N,_,A,b):l(T,F,W,N,_,A,b);if(!(N&w)){var ce=se&&D.call(T,"__wrapped__"),oe=x&&D.call(F,"__wrapped__");if(ce||oe){var me=ce?T.value():T,Ce=oe?F.value():F;return b||(b=new i),A(me,Ce,N,_,b)}}return X?(b||(b=new i),d(T,F,N,_,A,b)):!1}return kw=m,kw}var Fw,KL;function sU(){if(KL)return Fw;KL=1;var i=U7(),o=Eh();function l(d,p,I,R,g){return d===p?!0:d==null||p==null||!o(d)&&!o(p)?d!==d&&p!==p:i(d,p,I,R,l,g)}return Fw=l,Fw}var Uw,VL;function B7(){if(VL)return Uw;VL=1;var i=oU(),o=sU(),l=1,d=2;function p(I,R,g,w){var U=g.length,C=U,y=!w;if(I==null)return!C;for(I=Object(I);U--;){var v=g[U];if(y&&v[2]?v[1]!==I[v[0]]:!(v[0]in I))return!1}for(;++U<C;){v=g[U];var D=v[0],m=I[D],T=v[1];if(y&&v[2]){if(m===void 0&&!(D in I))return!1}else{var F=new i;if(w)var N=w(m,T,D,I,R,F);if(!(N===void 0?o(T,m,l|d,w,F):N))return!1}}return!0}return Uw=p,Uw}var Bw,zL;function uU(){if(zL)return Bw;zL=1;var i=_f();function o(l){return l===l&&!i(l)}return Bw=o,Bw}var jw,YL;function j7(){if(YL)return jw;YL=1;var i=uU(),o=cC();function l(d){for(var p=o(d),I=p.length;I--;){var R=p[I],g=d[R];p[I]=[R,g,i(g)]}return p}return jw=l,jw}var Zw,WL;function lU(){if(WL)return Zw;WL=1;function i(o,l){return function(d){return d==null?!1:d[o]===l&&(l!==void 0||o in Object(d))}}return Zw=i,Zw}var Gw,$L;function Z7(){if($L)return Gw;$L=1;var i=B7(),o=j7(),l=lU();function d(p){var I=o(p);return I.length==1&&I[0][2]?l(I[0][0],I[0][1]):function(R){return R===p||i(R,p,I)}}return Gw=d,Gw}var qw,XL;function hC(){if(XL)return qw;XL=1;var i=Ns(),o=Xg(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function p(I,R){if(i(I))return!1;var g=typeof I;return g=="number"||g=="symbol"||g=="boolean"||I==null||o(I)?!0:d.test(I)||!l.test(I)||R!=null&&I in Object(R)}return qw=p,qw}var Hw,QL;function G7(){if(QL)return Hw;QL=1;var i=iC(),o="Expected a function";function l(d,p){if(typeof d!="function"||p!=null&&typeof p!="function")throw new TypeError(o);var I=function(){var R=arguments,g=p?p.apply(this,R):R[0],w=I.cache;if(w.has(g))return w.get(g);var U=d.apply(this,R);return I.cache=w.set(g,U)||w,U};return I.cache=new(l.Cache||i),I}return l.Cache=i,Hw=l,Hw}var Kw,JL;function q7(){if(JL)return Kw;JL=1;var i=G7(),o=500;function l(d){var p=i(d,function(R){return I.size===o&&I.clear(),R}),I=p.cache;return p}return Kw=l,Kw}var Vw,ek;function H7(){if(ek)return Vw;ek=1;var i=q7(),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=i(function(p){var I=[];return p.charCodeAt(0)===46&&I.push(""),p.replace(o,function(R,g,w,U){I.push(w?U.replace(l,"$1"):g||R)}),I});return Vw=d,Vw}var zw,tk;function K7(){if(tk)return zw;tk=1;var i=Wg(),o=oC(),l=Ns(),d=Xg(),p=1/0,I=i?i.prototype:void 0,R=I?I.toString:void 0;function g(w){if(typeof w=="string")return w;if(l(w))return o(w,g)+"";if(d(w))return R?R.call(w):"";var U=w+"";return U=="0"&&1/w==-p?"-0":U}return zw=g,zw}var Yw,nk;function cU(){if(nk)return Yw;nk=1;var i=K7();function o(l){return l==null?"":i(l)}return Yw=o,Yw}var Ww,rk;function fU(){if(rk)return Ww;rk=1;var i=Ns(),o=hC(),l=H7(),d=cU();function p(I,R){return i(I)?I:o(I,R)?[I]:l(d(I))}return Ww=p,Ww}var $w,ik;function oE(){if(ik)return $w;ik=1;var i=Xg(),o=1/0;function l(d){if(typeof d=="string"||i(d))return d;var p=d+"";return p=="0"&&1/d==-o?"-0":p}return $w=l,$w}var Xw,ok;function pC(){if(ok)return Xw;ok=1;var i=fU(),o=oE();function l(d,p){p=i(p,d);for(var I=0,R=p.length;d!=null&&I<R;)d=d[o(p[I++])];return I&&I==R?d:void 0}return Xw=l,Xw}var Qw,ak;function V7(){if(ak)return Qw;ak=1;var i=pC();function o(l,d,p){var I=l==null?void 0:i(l,d);return I===void 0?p:I}return Qw=o,Qw}var Jw,sk;function z7(){if(sk)return Jw;sk=1;function i(o,l){return o!=null&&l in Object(o)}return Jw=i,Jw}var eA,uk;function Y7(){if(uk)return eA;uk=1;var i=fU(),o=sC(),l=Ns(),d=lC(),p=uC(),I=oE();function R(g,w,U){w=i(w,g);for(var C=-1,y=w.length,v=!1;++C<y;){var D=I(w[C]);if(!(v=g!=null&&U(g,D)))break;g=g[D]}return v||++C!=y?v:(y=g==null?0:g.length,!!y&&p(y)&&d(D,y)&&(l(g)||o(g)))}return eA=R,eA}var tA,lk;function W7(){if(lk)return tA;lk=1;var i=z7(),o=Y7();function l(d,p){return d!=null&&o(d,p,i)}return tA=l,tA}var nA,ck;function $7(){if(ck)return nA;ck=1;var i=sU(),o=V7(),l=W7(),d=hC(),p=uU(),I=lU(),R=oE(),g=1,w=2;function U(C,y){return d(C)&&p(y)?I(R(C),y):function(v){var D=o(v,C);return D===void 0&&D===y?l(v,C):i(y,D,g|w)}}return nA=U,nA}var rA,fk;function X7(){if(fk)return rA;fk=1;function i(o){return function(l){return l==null?void 0:l[o]}}return rA=i,rA}var iA,dk;function Q7(){if(dk)return iA;dk=1;var i=pC();function o(l){return function(d){return i(d,l)}}return iA=o,iA}var oA,hk;function J7(){if(hk)return oA;hk=1;var i=X7(),o=Q7(),l=hC(),d=oE();function p(I){return l(I)?i(d(I)):o(I)}return oA=p,oA}var aA,pk;function gC(){if(pk)return aA;pk=1;var i=Z7(),o=$7(),l=Qg(),d=Ns(),p=J7();function I(R){return typeof R=="function"?R:R==null?l:typeof R=="object"?d(R)?o(R[0],R[1]):i(R):p(R)}return aA=I,aA}var sA,gk;function eK(){if(gk)return sA;gk=1;var i=nU(),o=v7(),l=gC(),d=Ns();function p(I,R){var g=d(I)?i:o;return g(I,l(R,3))}return sA=p,sA}var uA,mk;function tK(){if(mk)return uA;mk=1;function i(o,l,d){var p;return d(o,function(I,R,g){if(l(I,R,g))return p=R,!1}),p}return uA=i,uA}var lA,vk;function nK(){if(vk)return lA;vk=1;var i=tK(),o=fC(),l=gC();function d(p,I){return i(p,l(I,3),o)}return lA=d,lA}var cA,yk;function rK(){if(yk)return cA;yk=1;function i(o){return o&&o.length?o[0]:void 0}return cA=i,cA}var fA,Ek;function iK(){return Ek||(Ek=1,fA=rK()),fA}var dA,_k;function oK(){if(_k)return dA;_k=1;function i(o,l){for(var d=-1,p=o==null?0:o.length;++d<p&&l(o[d],d,o)!==!1;);return o}return dA=i,dA}var hA,Tk;function dU(){if(Tk)return hA;Tk=1;var i=Qg();function o(l){return typeof l=="function"?l:i}return hA=o,hA}var pA,Sk;function aK(){if(Sk)return pA;Sk=1;var i=oK(),o=dC(),l=dU(),d=Ns();function p(I,R){var g=d(I)?i:o;return g(I,l(R))}return pA=p,pA}var gA,wk;function sK(){if(wk)return gA;wk=1;var i=fC(),o=dU();function l(d,p){return d&&i(d,o(p))}return gA=l,gA}var mA,Ak;function uK(){if(Ak)return mA;Ak=1;function i(){}return mA=i,mA}var vA,Ik;function lK(){if(Ik)return vA;Ik=1;var i=dC(),o=Jg();function l(d,p){var I=-1,R=o(d)?Array(d.length):[];return i(d,function(g,w,U){R[++I]=p(g,w,U)}),R}return vA=l,vA}var yA,bk;function cK(){if(bk)return yA;bk=1;function i(o,l){var d=o.length;for(o.sort(l);d--;)o[d]=o[d].value;return o}return yA=i,yA}var EA,Ck;function fK(){if(Ck)return EA;Ck=1;var i=Xg();function o(l,d){if(l!==d){var p=l!==void 0,I=l===null,R=l===l,g=i(l),w=d!==void 0,U=d===null,C=d===d,y=i(d);if(!U&&!y&&!g&&l>d||g&&w&&C&&!U&&!y||I&&w&&C||!p&&C||!R)return 1;if(!I&&!g&&!y&&l<d||y&&p&&R&&!I&&!g||U&&p&&R||!w&&R||!C)return-1}return 0}return EA=o,EA}var _A,Rk;function dK(){if(Rk)return _A;Rk=1;var i=fK();function o(l,d,p){for(var I=-1,R=l.criteria,g=d.criteria,w=R.length,U=p.length;++I<w;){var C=i(R[I],g[I]);if(C){if(I>=U)return C;var y=p[I];return C*(y=="desc"?-1:1)}}return l.index-d.index}return _A=o,_A}var TA,xk;function hK(){if(xk)return TA;xk=1;var i=oC(),o=pC(),l=gC(),d=lK(),p=cK(),I=aC(),R=dK(),g=Qg(),w=Ns();function U(C,y,v){y.length?y=i(y,function(T){return w(T)?function(F){return o(F,T.length===1?T[0]:T)}:T}):y=[g];var D=-1;y=i(y,I(l));var m=d(C,function(T,F,N){var _=i(y,function(A){return A(T)});return{criteria:_,index:++D,value:T}});return p(m,function(T,F){return R(T,F,v)})}return TA=U,TA}var SA,Nk;function pK(){if(Nk)return SA;Nk=1;var i=nC(),o=Jg(),l=lC(),d=_f();function p(I,R,g){if(!d(g))return!1;var w=typeof R;return(w=="number"?o(g)&&l(R,g.length):w=="string"&&R in g)?i(g[R],I):!1}return SA=p,SA}var wA,Mk;function gK(){if(Mk)return wA;Mk=1;var i=eU(),o=hK(),l=tU(),d=pK(),p=l(function(I,R){if(I==null)return[];var g=R.length;return g>1&&d(I,R[0],R[1])?R=[]:g>2&&d(R[0],R[1],R[2])&&(R=[R[0]]),o(I,i(R,1),[])});return wA=p,wA}var AA,Dk;function mK(){if(Dk)return AA;Dk=1;var i=Y4(),o=_f(),l="Expected a function";function d(p,I,R){var g=!0,w=!0;if(typeof p!="function")throw new TypeError(l);return o(R)&&(g="leading"in R?!!R.leading:g,w="trailing"in R?!!R.trailing:w),i(p,I,{leading:g,maxWait:I,trailing:w})}return AA=d,AA}var IA,Pk;function vK(){if(Pk)return IA;Pk=1;var i=cU(),o=0;function l(d){var p=++o;return i(d)+p}return IA=l,IA}(function(i,o){(function(l,d){i.exports=d(Y4(),i7(),eK(),nK(),iK(),aK(),sK(),uK(),gK(),mK(),vK(),B0())})(tu,function(l,d,p,I,R,g,w,U,C,y,v,D){return function(){var m={654:function(F,N,_){var A,b=this&&this.__assign||function(){return b=Object.assign||function(Re){for(var te,Ue=1,O=arguments.length;Ue<O;Ue++)for(var M in te=arguments[Ue])Object.prototype.hasOwnProperty.call(te,M)&&(Re[M]=te[M]);return Re},b.apply(this,arguments)},j=this&&this.__createBinding||(Object.create?function(Re,te,Ue,O){O===void 0&&(O=Ue);var M=Object.getOwnPropertyDescriptor(te,Ue);M&&!("get"in M?!te.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return te[Ue]}}),Object.defineProperty(Re,O,M)}:function(Re,te,Ue,O){O===void 0&&(O=Ue),Re[O]=te[Ue]}),Y=this&&this.__setModuleDefault||(Object.create?function(Re,te){Object.defineProperty(Re,"default",{enumerable:!0,value:te})}:function(Re,te){Re.default=te}),W=this&&this.__importStar||function(Re){if(Re&&Re.__esModule)return Re;var te={};if(Re!=null)for(var Ue in Re)Ue!=="default"&&Object.prototype.hasOwnProperty.call(Re,Ue)&&j(te,Re,Ue);return Y(te,Re),te},$=this&&this.__spreadArray||function(Re,te,Ue){if(Ue||arguments.length===2)for(var O,M=0,q=te.length;M<q;M++)!O&&M in te||(O||(O=Array.prototype.slice.call(te,0,M)),O[M]=te[M]);return Re.concat(O||Array.prototype.slice.call(te))},se=this&&this.__importDefault||function(Re){return Re&&Re.__esModule?Re:{default:Re}};Object.defineProperty(N,"__esModule",{value:!0}),N.doesFocusableExist=N.getCurrentFocusKey=N.updateAllLayouts=N.resume=N.pause=N.navigateByDirection=N.setFocus=N.setKeyMap=N.destroy=N.setThrottle=N.init=N.SpatialNavigation=N.ROOT_FOCUS_KEY=void 0;var x=se(_(150)),X=se(_(117)),ce=se(_(747)),oe=se(_(23)),me=se(_(842)),Ce=se(_(682)),Je=se(_(784)),Te=se(_(432)),je=se(_(67)),ot=se(_(35)),ct=se(_(119)),Ie=W(_(964)),qe="left",gt="right",Me="up",We="down",rt="enter",Ht=((A={}).left=[37,"ArrowLeft"],A.up=[38,"ArrowUp"],A.right=[39,"ArrowRight"],A.down=[40,"ArrowDown"],A.enter=[13,"Enter"],A);N.ROOT_FOCUS_KEY="SN:ROOT";var kt=["#0FF","#FF0","#F0F"],mt={leading:!0,trailing:!1},Rt=function(){function Re(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=ct.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Ht,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,x.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Re.getCutoffCoordinate=function(te,Ue,O,M,q){var K=te?M.top:q===ct.default.LTR?M.left:M.right,he=te?M.bottom:q===ct.default.LTR?M.right:M.left;return Ue?O?K:he:O?he:K},Re.getRefCorners=function(te,Ue,O){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(te){case Me:var q=Ue?O.bottom:O.top;M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case We:q=Ue?O.top:O.bottom,M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case qe:var K=Ue?O.right:O.left;M.a={x:K,y:O.top},M.b={x:K,y:O.bottom};break;case gt:K=Ue?O.left:O.right,M.a={x:K,y:O.top},M.b={x:K,y:O.bottom}}return M},Re.isAdjacentSlice=function(te,Ue,O){var M=te.a,q=te.b,K=Ue.a,he=Ue.b,de=O?"x":"y",Ve=M[de],St=q[de],st=K[de],at=he[de],tt=.2*(St-Ve);return Math.max(0,Math.min(St,at)-Math.max(Ve,st))>=tt},Re.getPrimaryAxisDistance=function(te,Ue,O){var M=te.a,q=Ue.a,K=O?"y":"x";return Math.abs(q[K]-M[K])},Re.getSecondaryAxisDistance=function(te,Ue,O){var M=te.a,q=te.b,K=Ue.a,he=Ue.b,de=O?"x":"y",Ve=M[de],St=q[de],st=K[de],at=he[de],tt=[];return tt.push(Math.abs(st-Ve)),tt.push(Math.abs(st-St)),tt.push(Math.abs(at-Ve)),tt.push(Math.abs(at-St)),Math.min.apply(Math,tt)},Re.prototype.sortSiblingsByPriority=function(te,Ue,O,M){var q=this,K=O===We||O===Me,he=Re.getRefCorners(O,!1,Ue);return(0,Te.default)(te,function(de){var Ve=Re.getRefCorners(O,!0,de.layout),St=Re.isAdjacentSlice(he,Ve,K),st=St?Re.getPrimaryAxisDistance:Re.getSecondaryAxisDistance,at=St?Re.getSecondaryAxisDistance:Re.getPrimaryAxisDistance,tt=st(he,Ve,K),ft=at(he,Ve,K),Et=5*tt+ft,Tt=(Et+1)/(St?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(de.focusKey," relative to ").concat(M," is"),tt,ft,Et),q.log("smartNavigate","priority for ".concat(de.focusKey," relative to ").concat(M," is"),Tt),q.visualDebugger&&(q.visualDebugger.drawPoint(Ve.a.x,Ve.a.y,"yellow",6),q.visualDebugger.drawPoint(Ve.b.x,Ve.b.y,"yellow",6)),Tt})},Re.prototype.init=function(te){var Ue=te===void 0?{}:te,O=Ue.debug,M=O!==void 0&&O,q=Ue.visualDebug,K=q!==void 0&&q,he=Ue.nativeMode,de=he!==void 0&&he,Ve=Ue.throttle,St=Ve===void 0?0:Ve,st=Ue.throttleKeypresses,at=st!==void 0&&st,tt=Ue.useGetBoundingClientRect,ft=tt!==void 0&&tt,Et=Ue.shouldFocusDOMNode,Tt=Et!==void 0&&Et,Ct=Ue.shouldUseNativeEvents,hn=Ct!==void 0&&Ct,Qt=Ue.rtl,nn=Qt!==void 0&&Qt;this.enabled||(this.enabled=!0,this.nativeMode=de,this.throttleKeypresses=at,this.useGetBoundingClientRect=ft,this.shouldFocusDOMNode=Tt&&!de,this.shouldUseNativeEvents=hn,this.writingDirection=nn?ct.default.RTL:ct.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(St)&&St>0&&(this.throttle=St),this.bindEventHandlers(),K&&(this.visualDebugger=new ot.default(this.writingDirection),this.startDrawLayouts())))},Re.prototype.setThrottle=function(te){var Ue=te===void 0?{}:te,O=Ue.throttle,M=O===void 0?0:O,q=Ue.throttleKeypresses,K=q!==void 0&&q;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},Re.prototype.startDrawLayouts=function(){var te=this,Ue=function(){requestAnimationFrame(function(){te.visualDebugger.clearLayouts(),(0,Je.default)(te.focusableComponents,function(O,M){te.visualDebugger.drawLayout(O.layout,M,O.parentFocusKey)}),Ue()})};Ue()},Re.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Ht,this.unbindEventHandlers())},Re.prototype.getEventType=function(te){return(0,oe.default)(this.getKeyMap(),function(Ue){return Ue.includes(te)})},Re.getKeyCode=function(te){return te.keyCode||te.code},Re.prototype.bindEventHandlers=function(){var te=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(Ue){if(te.paused!==!0){te.debug&&(te.logIndex+=1);var O=Re.getKeyCode(Ue),M=te.getEventType(O);if(M){te.pressedKeys[M]=te.pressedKeys[M]?te.pressedKeys[M]+1:1,te.shouldUseNativeEvents||(Ue.preventDefault(),Ue.stopPropagation());var q={pressedKeys:te.pressedKeys};M===rt&&te.focusKey?te.onEnterPress(q):te.onArrowPress(M,q)===!1?(te.log("keyDownEventListener","default navigation prevented"),te.visualDebugger&&te.visualDebugger.clear()):te.onKeyEvent(Ue)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,je.default)(this.keyDownEventListener.bind(this),this.throttle,mt)),this.keyUpEventListener=function(Ue){var O=Re.getKeyCode(Ue),M=te.getEventType(O);delete te.pressedKeys[M],te.throttle&&!te.throttleKeypresses&&te.keyDownEventListenerThrottled.cancel(),M===rt&&te.focusKey&&te.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Re.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var te=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",te),this.keyDownEventListener=null}},Re.prototype.onEnterPress=function(te){var Ue=this.focusableComponents[this.focusKey];Ue?Ue.focusable?Ue.onEnterPress&&Ue.onEnterPress(te):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Re.prototype.onEnterRelease=function(){var te=this.focusableComponents[this.focusKey];te?te.focusable?te.onEnterRelease&&te.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Re.prototype.onArrowPress=function(te,Ue){var O=this.focusableComponents[this.focusKey];if(O)return O&&O.onArrowPress&&O.onArrowPress(te,Ue);this.log("onArrowPress","noComponent")},Re.prototype.navigateByDirection=function(te,Ue){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var O=[We,Me,qe,gt];O.includes(te)?(this.log("navigateByDirection","direction",te),this.smartNavigate(te,null,Ue)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(te,"`, but you can use only these: "),O)}},Re.prototype.onKeyEvent=function(te){this.visualDebugger&&this.visualDebugger.clear();var Ue=Re.getKeyCode(te),O=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(Ue)});this.smartNavigate(O,null,{event:te})},Re.prototype.smartNavigate=function(te,Ue,O){var M=this;if(!this.nativeMode){var q=te===We||te===Me,K=te===We||(this.writingDirection===ct.default.LTR?te===gt:te===qe);this.log("smartNavigate","direction",te),this.log("smartNavigate","fromParentFocusKey",Ue),this.log("smartNavigate","this.focusKey",this.focusKey),Ue||(0,Je.default)(this.focusableComponents,function(hn){hn.layoutUpdated=!1});var he=this.focusableComponents[Ue||this.focusKey];if(Ue||he){if(this.log("smartNavigate","currentComponent",he?he.focusKey:void 0,he?he.node:void 0,he),he){this.updateLayout(he.focusKey);var de=he.parentFocusKey,Ve=he.focusKey,St=he.layout,st=Re.getCutoffCoordinate(q,K,!1,St,this.writingDirection),at=(0,ce.default)(this.focusableComponents,function(hn){if(hn.parentFocusKey===de&&hn.focusable){M.updateLayout(hn.focusKey);var Qt=Re.getCutoffCoordinate(q,K,!0,hn.layout,M.writingDirection);return q||M.writingDirection===ct.default.LTR?K?Qt>=st:Qt<=st:K?Qt<=st:Qt>=st}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",st),this.log("smartNavigate","siblings","".concat(at.length," elements:"),at.map(function(hn){return hn.focusKey}).join(", "),at.map(function(hn){return hn.node}),at.map(function(hn){return hn}))),this.visualDebugger){var tt=Re.getRefCorners(te,!1,St);this.visualDebugger.drawPoint(tt.a.x,tt.a.y),this.visualDebugger.drawPoint(tt.b.x,tt.b.y)}var ft=this.sortSiblingsByPriority(at,St,te,Ve),Et=(0,me.default)(ft);if(this.log("smartNavigate","nextComponent",Et?Et.focusKey:void 0,Et?Et.node:void 0,Et),Et)this.setFocus(Et.focusKey,O);else{var Tt=this.focusableComponents[de],Ct=Tt!=null&&Tt.isFocusBoundary?Tt.focusBoundaryDirections||[te]:[];Tt&&Ct.includes(te)||this.smartNavigate(te,de,O)}}}else this.setFocus(this.getForcedFocusKey())}},Re.prototype.saveLastFocusedChildKey=function(te,Ue){te&&(this.log("saveLastFocusedChildKey","".concat(te.focusKey," lastFocusedChildKey set"),Ue),te.lastFocusedChildKey=Ue)},Re.prototype.log=function(te,Ue){for(var O=[],M=2;M<arguments.length;M++)O[M-2]=arguments[M];this.debug&&console.log.apply(console,$(["%c".concat(te,"%c").concat(Ue),"background: ".concat(kt[this.logIndex%kt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],O,!1))},Re.prototype.getCurrentFocusKey=function(){return this.focusKey},Re.prototype.getForcedFocusKey=function(){var te,Ue=(0,ce.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),O=this.sortSiblingsByPriority(Ue,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",N.ROOT_FOCUS_KEY);return(te=(0,me.default)(O))===null||te===void 0?void 0:te.focusKey},Re.prototype.getNextFocusKey=function(te){var Ue=this,O=this.focusableComponents[te];if(!O||this.nativeMode)return te;var M=(0,ce.default)(this.focusableComponents,function(de){return de.parentFocusKey===te&&de.focusable});if(M.length>0){var q=O.lastFocusedChildKey,K=O.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",K),q&&O.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);M.forEach(function(de){return Ue.updateLayout(de.focusKey)});var he=function(de,Ve){var St=Ve===ct.default.LTR?function(at){var tt=at.layout;return Math.abs(tt.left)+Math.abs(tt.top)}:function(at){var tt=at.layout;return Math.abs(window.innerWidth-tt.right)+Math.abs(tt.top)},st=(0,Te.default)(de,St);return(0,me.default)(st)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",he),this.getNextFocusKey(he)}return this.log("getNextFocusKey","targetFocusKey",te),te},Re.prototype.addFocusable=function(te){var Ue=te.focusKey,O=te.node,M=te.parentFocusKey,q=te.onEnterPress,K=te.onEnterRelease,he=te.onArrowPress,de=te.onFocus,Ve=te.onBlur,St=te.saveLastFocusedChild,st=te.trackChildren,at=te.onUpdateFocus,tt=te.onUpdateHasFocusedChild,ft=te.preferredChildFocusKey,Et=te.autoRestoreFocus,Tt=te.forceFocus,Ct=te.focusable,hn=te.isFocusBoundary,Qt=te.focusBoundaryDirections;if(this.focusableComponents[Ue]={focusKey:Ue,node:O,parentFocusKey:M,onEnterPress:q,onEnterRelease:K,onArrowPress:he,onFocus:de,onBlur:Ve,onUpdateFocus:at,onUpdateHasFocusedChild:tt,saveLastFocusedChild:St,trackChildren:st,preferredChildFocusKey:ft,focusable:Ct,isFocusBoundary:hn,focusBoundaryDirections:Qt,autoRestoreFocus:Et,forceFocus:Tt,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:O},layoutUpdated:!1},O||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[Ue]),!this.nativeMode){this.updateLayout(Ue),this.log("addFocusable","Component added: ",this.focusableComponents[Ue]),Ue===this.focusKey&&this.setFocus(ft||Ue);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===Ue){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},Re.prototype.removeFocusable=function(te){var Ue=te.focusKey,O=this.focusableComponents[Ue];if(O){var M=O.parentFocusKey;(0,O.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",O),delete this.focusableComponents[Ue];var q=this.parentsHavingFocusedChild.includes(Ue);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(de){return de!==Ue});var K=this.focusableComponents[M],he=Ue===this.focusKey;if(K&&K.lastFocusedChildKey===Ue&&(K.lastFocusedChildKey=null),this.nativeMode)return;(he||q)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",he?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},Re.prototype.getNodeLayoutByFocusKey=function(te){var Ue=this.focusableComponents[te];return Ue?(this.updateLayout(Ue.focusKey),Ue.layout):null},Re.prototype.setCurrentFocusedKey=function(te,Ue){if(this.isFocusableComponent(this.focusKey)&&te!==this.focusKey){var O=this.focusableComponents[this.focusKey];O.onUpdateFocus(!1),O.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),Ue),this.log("setCurrentFocusedKey","onBlur",O)}if(this.focusKey=te,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),Ue),this.log("setCurrentFocusedKey","onFocus",M)}},Re.prototype.updateParentsHasFocusedChild=function(te,Ue){for(var O=this,M=[],q=this.focusableComponents[te];q;){var K=q.parentFocusKey,he=this.focusableComponents[K];if(he){var de=he.focusKey;M.push(de)}q=he}var Ve=(0,X.default)(this.parentsHavingFocusedChild,M),St=(0,X.default)(M,this.parentsHavingFocusedChild);(0,Ce.default)(Ve,function(st){var at=O.focusableComponents[st];at&&at.trackChildren&&at.onUpdateHasFocusedChild(!1),O.onIntermediateNodeBecameBlurred(st,Ue)}),(0,Ce.default)(St,function(st){var at=O.focusableComponents[st];at&&at.trackChildren&&at.onUpdateHasFocusedChild(!0),O.onIntermediateNodeBecameFocused(st,Ue)}),this.parentsHavingFocusedChild=M},Re.prototype.updateParentsLastFocusedChild=function(te){for(var Ue=this.focusableComponents[te];Ue;){var O=Ue.parentFocusKey,M=this.focusableComponents[O];M&&this.saveLastFocusedChildKey(M,Ue.focusKey),Ue=M}},Re.prototype.getKeyMap=function(){return this.keyMap},Re.prototype.setKeyMap=function(te){this.keyMap=b(b({},this.getKeyMap()),function(Ue){var O={};return Object.entries(Ue).forEach(function(M){var q=M[0],K=M[1];O[q]=Array.isArray(K)?K:[K]}),O}(te))},Re.prototype.isFocusableComponent=function(te){return!!this.focusableComponents[te]},Re.prototype.isParticipatingFocusableComponent=function(te){return this.isFocusableComponent(te)&&this.focusableComponents[te].focusable},Re.prototype.onIntermediateNodeBecameFocused=function(te,Ue){this.isParticipatingFocusableComponent(te)&&this.focusableComponents[te].onFocus(this.getNodeLayoutByFocusKey(te),Ue)},Re.prototype.onIntermediateNodeBecameBlurred=function(te,Ue){this.isParticipatingFocusableComponent(te)&&this.focusableComponents[te].onBlur(this.getNodeLayoutByFocusKey(te),Ue)},Re.prototype.pause=function(){this.paused=!0},Re.prototype.resume=function(){this.paused=!1},Re.prototype.setFocus=function(te,Ue){if(Ue===void 0&&(Ue={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",te),te&&te!==N.ROOT_FOCUS_KEY||(te=this.getForcedFocusKey());var O=this.getNextFocusKey(te);this.log("setFocus","newFocusKey",O),this.setCurrentFocusedKey(O,Ue),this.updateParentsHasFocusedChild(O,Ue),this.updateParentsLastFocusedChild(O)}},Re.prototype.updateAllLayouts=function(){var te=this;this.enabled&&!this.nativeMode&&(0,Je.default)(this.focusableComponents,function(Ue,O){te.updateLayout(O)})},Re.prototype.updateLayout=function(te){var Ue=this.focusableComponents[te];if(Ue&&!this.nativeMode&&!Ue.layoutUpdated){var O=Ue.node,M=this.useGetBoundingClientRect?(0,Ie.getBoundingClientRect)(O):(0,Ie.default)(O);Ue.layout=b(b({},M),{node:O})}},Re.prototype.updateFocusable=function(te,Ue){var O=Ue.node,M=Ue.preferredChildFocusKey,q=Ue.focusable,K=Ue.isFocusBoundary,he=Ue.focusBoundaryDirections,de=Ue.onEnterPress,Ve=Ue.onEnterRelease,St=Ue.onArrowPress,st=Ue.onFocus,at=Ue.onBlur;if(!this.nativeMode){var tt=this.focusableComponents[te];tt&&(tt.preferredChildFocusKey=M,tt.focusable=q,tt.isFocusBoundary=K,tt.focusBoundaryDirections=he,tt.onEnterPress=de,tt.onEnterRelease=Ve,tt.onArrowPress=St,tt.onFocus=st,tt.onBlur=at,O&&(tt.node=O))}},Re.prototype.isNativeMode=function(){return this.nativeMode},Re.prototype.doesFocusableExist=function(te){return!!this.focusableComponents[te]},Re}();N.SpatialNavigation=new Rt,N.init=N.SpatialNavigation.init,N.setThrottle=N.SpatialNavigation.setThrottle,N.destroy=N.SpatialNavigation.destroy,N.setKeyMap=N.SpatialNavigation.setKeyMap,N.setFocus=N.SpatialNavigation.setFocus,N.navigateByDirection=N.SpatialNavigation.navigateByDirection,N.pause=N.SpatialNavigation.pause,N.resume=N.SpatialNavigation.resume,N.updateAllLayouts=N.SpatialNavigation.updateAllLayouts,N.getCurrentFocusKey=N.SpatialNavigation.getCurrentFocusKey,N.doesFocusableExist=N.SpatialNavigation.doesFocusableExist},35:function(F,N,_){var A=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(N,"__esModule",{value:!0});var b=A(_(119)),j=typeof window<"u"&&window.document,Y=j?window.innerWidth:0,W=j?window.innerHeight:0,$=function(){function se(x){j&&(this.debugCtx=se.createCanvas("sn-debug","1010",x),this.layoutsCtx=se.createCanvas("sn-layouts","1000",x),this.writingDirection=x)}return se.createCanvas=function(x,X,ce){var oe=document.querySelector("#".concat(x))||document.createElement("canvas");oe.setAttribute("id",x),oe.setAttribute("dir",ce===b.default.LTR?"ltr":"rtl");var me=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=Y,oe.height=W,me},se.prototype.clear=function(){j&&this.debugCtx.clearRect(0,0,Y,W)},se.prototype.clearLayouts=function(){j&&this.layoutsCtx.clearRect(0,0,Y,W)},se.prototype.drawLayout=function(x,X,ce){if(j){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(x.left,x.top,x.width,x.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===b.default.LTR?"left":"right",me=x[oe];this.layoutsCtx.fillText(X,me,x.top+10),this.layoutsCtx.fillText(ce,me,x.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(me),me,x.top+40),this.layoutsCtx.fillText("top: ".concat(x.top),me,x.top+55)}},se.prototype.drawPoint=function(x,X,ce,oe){ce===void 0&&(ce="blue"),oe===void 0&&(oe=10),j&&(this.debugCtx.strokeStyle=ce,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(x-oe/2,X-oe/2,oe,oe))},se}();N.default=$},119:function(F,N){var _;Object.defineProperty(N,"__esModule",{value:!0}),function(A){A[A.LTR=0]="LTR",A[A.RTL=1]="RTL"}(_||(_={})),N.default=_},607:function(F,N,_){var A=this&&this.__createBinding||(Object.create?function(j,Y,W,$){$===void 0&&($=W);var se=Object.getOwnPropertyDescriptor(Y,W);se&&!("get"in se?!Y.__esModule:se.writable||se.configurable)||(se={enumerable:!0,get:function(){return Y[W]}}),Object.defineProperty(j,$,se)}:function(j,Y,W,$){$===void 0&&($=W),j[$]=Y[W]}),b=this&&this.__exportStar||function(j,Y){for(var W in j)W==="default"||Object.prototype.hasOwnProperty.call(Y,W)||A(Y,j,W)};Object.defineProperty(N,"__esModule",{value:!0}),b(_(79),N),b(_(445),N),b(_(654),N)},964:function(F,N){Object.defineProperty(N,"__esModule",{value:!0}),N.getBoundingClientRect=void 0;var _=function(A){for(var b=A.offsetParent,j=A.offsetHeight,Y=A.offsetWidth,W=A.offsetLeft,$=A.offsetTop;b&&b.nodeType===1;)W+=b.offsetLeft-b.scrollLeft,$+=b.offsetTop-b.scrollTop,b=b.offsetParent;return{height:j,left:W,top:$,width:Y}};N.default=function(A){var b=A&&A.parentElement;if(A&&b){var j=_(b),Y=_(A),W=Y.height,$=Y.left,se=Y.top,x=Y.width;return{x:$-j.left,y:se-j.top,width:x,height:W,left:$,top:se,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},N.getBoundingClientRect=function(A){if(A&&A.getBoundingClientRect){var b=A.getBoundingClientRect();return{x:b.x,y:b.y,width:b.width,height:b.height,left:b.left,top:b.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(F,N,_){Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusContext=N.FocusContext=void 0;var A=_(156),b=_(654);N.FocusContext=(0,A.createContext)(b.ROOT_FOCUS_KEY),N.FocusContext.displayName="FocusContext",N.useFocusContext=function(){return(0,A.useContext)(N.FocusContext)}},79:function(F,N,_){var A=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusable=void 0;var b=_(156),j=A(_(604)),Y=A(_(461)),W=_(654),$=_(445);N.useFocusable=function(se){var x=se===void 0?{}:se,X=x.focusable,ce=X===void 0||X,oe=x.saveLastFocusedChild,me=oe===void 0||oe,Ce=x.trackChildren,Je=Ce!==void 0&&Ce,Te=x.autoRestoreFocus,je=Te===void 0||Te,ot=x.forceFocus,ct=ot!==void 0&&ot,Ie=x.isFocusBoundary,qe=Ie!==void 0&&Ie,gt=x.focusBoundaryDirections,Me=x.focusKey,We=x.preferredChildFocusKey,rt=x.onEnterPress,Ht=rt===void 0?j.default:rt,kt=x.onEnterRelease,mt=kt===void 0?j.default:kt,Rt=x.onArrowPress,Re=Rt===void 0?function(){return!0}:Rt,te=x.onFocus,Ue=te===void 0?j.default:te,O=x.onBlur,M=O===void 0?j.default:O,q=x.extraProps,K=(0,b.useCallback)(function(Ot){Ht(q,Ot)},[Ht,q]),he=(0,b.useCallback)(function(){mt(q)},[mt,q]),de=(0,b.useCallback)(function(Ot,Un){return Re(Ot,q,Un)},[q,Re]),Ve=(0,b.useCallback)(function(Ot,Un){Ue(Ot,q,Un)},[q,Ue]),St=(0,b.useCallback)(function(Ot,Un){M(Ot,q,Un)},[q,M]),st=(0,b.useRef)(null),at=(0,b.useState)(!1),tt=at[0],ft=at[1],Et=(0,b.useState)(!1),Tt=Et[0],Ct=Et[1],hn=(0,$.useFocusContext)(),Qt=(0,b.useMemo)(function(){return Me||(0,Y.default)("sn:focusable-item-")},[Me]),nn=(0,b.useCallback)(function(Ot){Ot===void 0&&(Ot={}),W.SpatialNavigation.setFocus(Qt,Ot)},[Qt]);return(0,b.useEffect)(function(){var Ot=st.current;return W.SpatialNavigation.addFocusable({focusKey:Qt,node:Ot,parentFocusKey:hn,preferredChildFocusKey:We,onEnterPress:K,onEnterRelease:he,onArrowPress:de,onFocus:Ve,onBlur:St,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),ft(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Ct(Un)},saveLastFocusedChild:me,trackChildren:Je,isFocusBoundary:qe,focusBoundaryDirections:gt,autoRestoreFocus:je,forceFocus:ct,focusable:ce}),function(){W.SpatialNavigation.removeFocusable({focusKey:Qt})}},[]),(0,b.useEffect)(function(){var Ot=st.current;W.SpatialNavigation.updateFocusable(Qt,{node:Ot,preferredChildFocusKey:We,focusable:ce,isFocusBoundary:qe,focusBoundaryDirections:gt,onEnterPress:K,onEnterRelease:he,onArrowPress:de,onFocus:Ve,onBlur:St})},[Qt,We,ce,qe,gt,K,he,de,Ve,St]),{ref:st,focusSelf:nn,focused:tt,hasFocusedChild:Tt,focusKey:Qt}}},150:function(F){F.exports=l},117:function(F){F.exports=d},747:function(F){F.exports=p},23:function(F){F.exports=I},842:function(F){F.exports=R},682:function(F){F.exports=g},784:function(F){F.exports=w},604:function(F){F.exports=U},432:function(F){F.exports=C},67:function(F){F.exports=y},461:function(F){F.exports=v},156:function(F){F.exports=D}},T={};return function F(N){var _=T[N];if(_!==void 0)return _.exports;var A=T[N]={exports:{}};return m[N].call(A.exports,A,A.exports,F),A.exports}(607)}()})})(V4);var hU=V4.exports;function yK(i){return{all:i=i||new Map,on:function(o,l){var d=i.get(o);d?d.push(l):i.set(o,[l])},off:function(o,l){var d=i.get(o);d&&(l?d.splice(d.indexOf(l)>>>0,1):i.set(o,[]))},emit:function(o,l){var d=i.get(o);d&&d.slice().map(function(p){p(l)}),(d=i.get("*"))&&d.slice().map(function(p){p(o,l)})}}}class Sf{constructor(){this.emitter=yK()}emit(o,l){this.emitter.emit(o,l)}on(o,l){var d;(d=this.emitter)==null||d.on(o,l)}once(o,l){var p;const d=I=>{var R;(R=this.emitter)==null||R.off(o,d),l(I)};(p=this.emitter)==null||p.on(o,d)}off(o,l){var d;(d=this.emitter)==null||d.off(o,l)}onAny(o){this.emitter.on("*",o)}offAny(o){this.emitter.off("*",o)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var af=256,pU=[],Ok=256,jy;for(;af--;)pU[af]=(af+256).toString(16).substring(1);function EK(i){var o=0,l=11;if(!jy||af+l>Ok*2)for(jy="",af=0;o<Ok;o++)jy+=pU[Math.random()*256|0];return jy.substring(af,af+++l)}const Lk={DEVICE_ID:"deviceId"};function Sg(){const i=localStorage.getItem(Lk.DEVICE_ID);if(i)return i;const o=EK();return localStorage.setItem(Lk.DEVICE_ID,o),o}function _K(i){i=[...i].sort((l,d)=>l-d);const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o])/2}var ss=(i=>(i.NEGOTIATE="negotiate",i.NEGOTIATE_TV="negotiate-tv",i.EVENT_STATUS="eventStatus",i.EVENT_META="eventMeta",i.GENERATE="generate",i.CONTENTFUL="contentful",i))(ss||{});class tg extends Error{constructor(o,l,d,p){super(),this._name=o,this._title=l,this._code=p,this._message=d}get toString(){var o,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((o=this._title.toUpperCase())!=null?o:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(o){this._name=o}get message(){return this._message}set message(o){this._message=o}get title(){return this._title}set title(o){this._title=o}get code(){return this._code}set code(o){this._code=o}}var lc=(i=>(i.TIZEN="tizen",i.WEBOS="webos",i.WEBZEROS="web0s",i.WEB="web",i))(lc||{});function mC(){const i=navigator.userAgent.toLowerCase();return i.includes("tizen")?"tizen":i.includes("webos")||i.includes("web0s")?"webos":"web"}const gh=Sg(),TK="https://staging-api.gigset.io",M0="new",SK="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",wK="v203lmr0b15v",vC="setup-device-id",AK="_appContainer_1isul_1",IK="_pageContainer_1isul_53",bK="_input_1isul_67",CK="_ellipsis_1isul_1",RK={appContainer:AK,pageContainer:IK,input:bK,ellipsis:CK};class lf extends Error{constructor(o,l){const d=new.target.prototype;super("".concat(o,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=d}}class yC extends Error{constructor(o="A timeout occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class nu extends Error{constructor(o="An abort occurred."){const l=new.target.prototype;super(o),this.__proto__=l}}class xK extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=d}}class NK extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=d}}class MK extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=d}}class kk extends Error{constructor(o){const l=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class DK extends Error{constructor(o,l){const d=new.target.prototype;super(o),this.innerErrors=l,this.__proto__=d}}class gU{constructor(o,l,d){this.statusCode=o,this.statusText=l,this.content=d}}class aE{get(o,l){return this.send({...l,method:"GET",url:o})}post(o,l){return this.send({...l,method:"POST",url:o})}delete(o,l){return this.send({...l,method:"DELETE",url:o})}getCookieString(o){return""}}var wn;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None"})(wn||(wn={}));class jg{constructor(){}log(o,l){}}jg.instance=new jg;const PK="8.0.0";class ho{static isRequired(o,l){if(o==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(o,l){if(!o||o.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(o,l,d){if(!(o in l))throw new Error("Unknown ".concat(d," value: ").concat(o,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Zg(i,o){let l="";return mf(i)?(l="Binary data of length ".concat(i.byteLength),o&&(l+=". Content: '".concat(OK(i),"'"))):typeof i=="string"&&(l="String data of length ".concat(i.length),o&&(l+=". Content: '".concat(i,"'"))),l}function OK(i){const o=new Uint8Array(i);let l="";return o.forEach(d=>{const p=d<16?"0":"";l+="0x".concat(p).concat(d.toString(16)," ")}),l.substr(0,l.length-1)}function mf(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}async function mU(i,o,l,d,p,I){const R={},[g,w]=mh();R[g]=w,i.log(wn.Trace,"(".concat(o," transport) sending data. ").concat(Zg(p,I.logMessageContent),"."));const U=mf(p)?"arraybuffer":"text",C=await l.post(d,{content:p,headers:{...R,...I.headers},responseType:U,timeout:I.timeout,withCredentials:I.withCredentials});i.log(wn.Trace,"(".concat(o," transport) request complete. Response status: ").concat(C.statusCode,"."))}function LK(i){return i===void 0?new D0(wn.Information):i===null?jg.instance:i.log!==void 0?i:new D0(i)}class kK{constructor(o,l){this._subject=o,this._observer=l}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class D0{constructor(o){this._minLevel=o,this.out=console}log(o,l){if(o>=this._minLevel){const d="[".concat(new Date().toISOString(),"] ").concat(wn[o],": ").concat(l);switch(o){case wn.Critical:case wn.Error:this.out.error(d);break;case wn.Warning:this.out.warn(d);break;case wn.Information:this.out.info(d);break;default:this.out.log(d);break}}}}function mh(){let i="X-SignalR-User-Agent";return Hi.isNode&&(i="User-Agent"),[i,FK(PK,UK(),jK(),BK())]}function FK(i,o,l,d){let p="Microsoft SignalR/";const I=i.split(".");return p+="".concat(I[0],".").concat(I[1]),p+=" (".concat(i,"; "),o&&o!==""?p+="".concat(o,"; "):p+="Unknown OS; ",p+="".concat(l),d?p+="; ".concat(d):p+="; Unknown Runtime Version",p+=")",p}function UK(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function BK(){if(Hi.isNode)return process.versions.node}function jK(){return Hi.isNode?"NodeJS":"Browser"}function Fk(i){return i.stack?i.stack:i.message?i.message:"".concat(i)}function ZK(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function GK(i){return typeof fetch>"u"||Hi.isNode?(i._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?i._fetchType=require("node-fetch"):i._fetchType=fetch,i._fetchType=require("fetch-cookie")(i._fetchType,i._jar),!0):!1}function qK(i){return typeof AbortController>"u"?(i._abortControllerType=require("abort-controller"),!0):!1}function HK(){return require("ws")}function KK(){return require("eventsource")}class VK extends aE{constructor(o){super(),this._logger=o;const l={_fetchType:void 0,_jar:void 0};GK(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(ZK()),this._abortControllerType=AbortController;const d={_abortControllerType:this._abortControllerType};qK(d)&&(this._abortControllerType=d._abortControllerType)}async send(o){if(o.abortSignal&&o.abortSignal.aborted)throw new nu;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const l=new this._abortControllerType;let d;o.abortSignal&&(o.abortSignal.onabort=()=>{l.abort(),d=new nu});let p=null;if(o.timeout){const w=o.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),d=new yC},w)}o.content===""&&(o.content=void 0),o.content&&(o.headers=o.headers||{},mf(o.content)?o.headers["Content-Type"]="application/octet-stream":o.headers["Content-Type"]="text/plain;charset=UTF-8");let I;try{I=await this._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:o.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(w){throw d||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(w,".")),w)}finally{p&&clearTimeout(p),o.abortSignal&&(o.abortSignal.onabort=null)}if(!I.ok){const w=await Uk(I,"text");throw new lf(w||I.statusText,I.status)}const g=await Uk(I,o.responseType);return new gU(I.status,I.statusText,g)}getCookieString(o){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(o,(d,p)=>l=p.join("; ")),l}}function Uk(i,o){let l;switch(o){case"arraybuffer":l=i.arrayBuffer();break;case"text":l=i.text();break;case"blob":case"document":case"json":throw new Error("".concat(o," is not supported."));default:l=i.text();break}return l}class zK extends aE{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new nu):o.method?o.url?new Promise((l,d)=>{const p=new XMLHttpRequest;p.open(o.method,o.url,!0),p.withCredentials=o.withCredentials===void 0?!0:o.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.content===""&&(o.content=void 0),o.content&&(mf(o.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const I=o.headers;I&&Object.keys(I).forEach(R=>{p.setRequestHeader(R,I[R])}),o.responseType&&(p.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{p.abort(),d(new nu)}),o.timeout&&(p.timeout=o.timeout),p.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new gU(p.status,p.statusText,p.response||p.responseText)):d(new lf(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),d(new lf(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),d(new yC)},p.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class YK extends aE{constructor(o){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new VK(o);else if(typeof XMLHttpRequest<"u")this._httpClient=new zK(o);else throw new Error("No usable HttpClient found.")}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new nu):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}class ls{static write(o){return"".concat(o).concat(ls.RecordSeparator)}static parse(o){if(o[o.length-1]!==ls.RecordSeparator)throw new Error("Message is incomplete.");const l=o.split(ls.RecordSeparator);return l.pop(),l}}ls.RecordSeparatorCode=30;ls.RecordSeparator=String.fromCharCode(ls.RecordSeparatorCode);class WK{writeHandshakeRequest(o){return ls.write(JSON.stringify(o))}parseHandshakeResponse(o){let l,d;if(mf(o)){const g=new Uint8Array(o),w=g.indexOf(ls.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");const U=w+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,U))),d=g.byteLength>U?g.slice(U).buffer:null}else{const g=o,w=g.indexOf(ls.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");const U=w+1;l=g.substring(0,U),d=g.length>U?g.substring(U):null}const p=ls.parse(l),I=JSON.parse(p[0]);if(I.type)throw new Error("Expected a handshake response from the server.");return[d,I]}}var Ar;(function(i){i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence"})(Ar||(Ar={}));class $K{constructor(){this.observers=[]}next(o){for(const l of this.observers)l.next(o)}error(o){for(const l of this.observers)l.error&&l.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new kK(this,o)}}class XK{constructor(o,l,d){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=l,this._bufferSize=d}async _send(o){const l=this._protocol.writeMessage(o);let d=Promise.resolve();if(this._isInvocationMessage(o)){this._totalMessageCount++;let p=()=>{},I=()=>{};mf(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(d=new Promise((R,g)=>{p=R,I=g})),this._messages.push(new QK(l,this._totalMessageCount,p,I))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await d}_ack(o){let l=-1;for(let d=0;d<this._messages.length;d++){const p=this._messages[d];if(p._id<=o.sequenceId)l=d,mf(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(o){if(o.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const o=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:o}));const l=this._messages;for(const d of l)await this._connection.send(d._message);this._reconnectInProgress=!1}_dispose(o){o!=null||(o=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(o)}_isInvocationMessage(o){switch(o.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(o){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class QK{constructor(o,l,d,p){this._message=o,this._id=l,this._resolver=d,this._rejector=p}}const JK=30*1e3,eV=15*1e3,tV=1e5;var Fi;(function(i){i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting"})(Fi||(Fi={}));class EC{static create(o,l,d,p,I,R,g){return new EC(o,l,d,p,I,R,g)}constructor(o,l,d,p,I,R,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},ho.isRequired(o,"connection"),ho.isRequired(l,"logger"),ho.isRequired(d,"protocol"),this.serverTimeoutInMilliseconds=I!=null?I:JK,this.keepAliveIntervalInMilliseconds=R!=null?R:eV,this._statefulReconnectBufferSize=g!=null?g:tV,this._logger=l,this._protocol=d,this.connection=o,this._reconnectPolicy=p,this._handshakeProtocol=new WK,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(o){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(o,"'.")),Promise.reject(o)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const o=new Promise((l,d)=>{this._handshakeResolver=l,this._handshakeRejecter=d});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const d={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(d)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await o,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new XK(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const o=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await o}catch(l){}}_stopInternal(o){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(o,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new nu("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(o){}}stream(o,...l){const[d,p]=this._replaceStreamingParams(l),I=this._createStreamInvocation(o,l,p);let R;const g=new $K;return g.cancelCallback=()=>{const w=this._createCancelInvocation(I.invocationId);return delete this._callbacks[I.invocationId],R.then(()=>this._sendWithProtocol(w))},this._callbacks[I.invocationId]=(w,U)=>{if(U){g.error(U);return}else w&&(w.type===Ar.Completion?w.error?g.error(new Error(w.error)):g.complete():g.next(w.item))},R=this._sendWithProtocol(I).catch(w=>{g.error(w),delete this._callbacks[I.invocationId]}),this._launchStreams(d,R),g}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...l){const[d,p]=this._replaceStreamingParams(l),I=this._sendWithProtocol(this._createInvocation(o,l,!0,p));return this._launchStreams(d,I),I}invoke(o,...l){const[d,p]=this._replaceStreamingParams(l),I=this._createInvocation(o,l,!1,p);return new Promise((g,w)=>{this._callbacks[I.invocationId]=(C,y)=>{if(y){w(y);return}else C&&(C.type===Ar.Completion?C.error?w(new Error(C.error)):g(C.result):w(new Error("Unexpected message type: ".concat(C.type))))};const U=this._sendWithProtocol(I).catch(C=>{w(C),delete this._callbacks[I.invocationId]});this._launchStreams(d,U)})}on(o,l){!o||!l||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),this._methods[o].indexOf(l)===-1&&this._methods[o].push(l))}off(o,l){if(!o)return;o=o.toLowerCase();const d=this._methods[o];if(d)if(l){const p=d.indexOf(l);p!==-1&&(d.splice(p,1),d.length===0&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const l=this._protocol.parseMessages(o,this._logger);for(const d of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(d)))switch(d.type){case Ar.Invocation:this._invokeClientMethod(d);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[d.invocationId];if(p){d.type===Ar.Completion&&delete this._callbacks[d.invocationId];try{p(d)}catch(I){this._logger.log(wn.Error,"Stream callback threw error: ".concat(Fk(I)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=d.error?new Error("Server returned an error on close: "+d.error):void 0;d.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(d);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(d);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(d.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let l,d;try{[d,l]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(p){const I="Error parsing handshake response: "+p;this._logger.log(wn.Error,I);const R=new Error(I);throw this._handshakeRejecter(R),R}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const I=new Error(p);throw this._handshakeRejecter(I),I}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),d}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let o=this._nextKeepAlive-new Date().getTime();o<0&&(o=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(o){const l=o.target.toLowerCase(),d=this._methods[l];if(!d){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),o.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)));return}const p=d.slice(),I=!!o.invocationId;let R,g,w;for(const U of p)try{const C=R;R=await U.apply(this,o.arguments),I&&R&&C&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),w=this._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),g=void 0}catch(C){g=C,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(C,"'."))}w?await this._sendWithProtocol(w):I?(g?w=this._createCompletionMessage(o.invocationId,"".concat(g),null):R!==void 0?w=this._createCompletionMessage(o.invocationId,null,R):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(o.invocationId,"'.")),w=this._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(w)):R&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(o){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(o,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||o||new nu("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(o):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===Fi.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o!=null?o:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[o]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(o,"' threw error '").concat(l,"'."))}}}async _reconnect(o){const l=Date.now();let d=0,p=o!==void 0?o:new Error("Attempting to reconnect due to a unknown error."),I=this._getNextRetryDelay(d++,0,p);if(I===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(o);return}if(this._connectionState=Fi.Reconnecting,o?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(R=>R.apply(this,[o]))}catch(R){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(o,"' threw error '").concat(R,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;I!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(d," will start in ").concat(I," ms.")),await new Promise(R=>{this._reconnectDelayHandle=setTimeout(R,I)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(R=>R.apply(this,[this.connection.connectionId]))}catch(R){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(R,"'."))}return}catch(R){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(R,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=R instanceof Error?R:new Error(R.toString()),I=this._getNextRetryDelay(d++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(d," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(o,l,d){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:o,retryReason:d})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(o,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(o){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(d=>{const p=l[d];try{p(null,o)}catch(I){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(o,"' threw error: ").concat(Fk(I)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,l,d,p){if(d)return p.length!==0?{arguments:l,streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,target:o,type:Ar.Invocation};{const I=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:I.toString(),streamIds:p,target:o,type:Ar.Invocation}:{arguments:l,invocationId:I.toString(),target:o,type:Ar.Invocation}}}_launchStreams(o,l){if(o.length!==0){l||(l=Promise.resolve());for(const d in o)o[d].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d)))},error:p=>{let I;p instanceof Error?I=p.message:p&&p.toString?I=p.toString():I="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d,I)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(d,p)))}})}}_replaceStreamingParams(o){const l=[],d=[];for(let p=0;p<o.length;p++){const I=o[p];if(this._isObservable(I)){const R=this._invocationId;this._invocationId++,l[R]=I,d.push(R.toString()),o.splice(p,1)}}return[l,d]}_isObservable(o){return o&&o.subscribe&&typeof o.subscribe=="function"}_createStreamInvocation(o,l,d){const p=this._invocationId;return this._invocationId++,d.length!==0?{arguments:l,invocationId:p.toString(),streamIds:d,target:o,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:o,type:Ar.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:Ar.CancelInvocation}}_createStreamItemMessage(o,l){return{invocationId:o,item:l,type:Ar.StreamItem}}_createCompletionMessage(o,l,d){return l?{error:l,invocationId:o,type:Ar.Completion}:{invocationId:o,result:d,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const nV=[0,2e3,1e4,3e4,null];class Bk{constructor(o){this._retryDelays=o!==void 0?[...o,null]:nV}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}class cf{}cf.Authorization="Authorization";cf.Cookie="Cookie";class rV extends aE{constructor(o,l){super(),this._innerClient=o,this._accessTokenFactory=l}async send(o){let l=!0;this._accessTokenFactory&&(!this._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(o);const d=await this._innerClient.send(o);return l&&d.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(o),await this._innerClient.send(o)):d}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[cf.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&o.headers[cf.Authorization]&&delete o.headers[cf.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}var uo;(function(i){i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling"})(uo||(uo={}));var Qo;(function(i){i[i.Text=1]="Text",i[i.Binary=2]="Binary"})(Qo||(Qo={}));let iV=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class jk{get pollAborted(){return this._pollAbort.aborted}constructor(o,l,d){this._httpClient=o,this._logger=l,this._pollAbort=new iV,this._options=d,this._running=!1,this.onreceive=null,this.onclose=null}async connect(o,l){if(ho.isRequired(o,"url"),ho.isRequired(l,"transferFormat"),ho.isIn(l,Qo,"transferFormat"),this._url=o,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===Qo.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[d,p]=mh(),I={[d]:p,...this._options.headers},R={abortSignal:this._pollAbort.signal,headers:I,timeout:1e5,withCredentials:this._options.withCredentials};l===Qo.Binary&&(R.responseType="arraybuffer");const g="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const w=await this._httpClient.get(g,R);w.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(w.statusCode,".")),this._closeError=new lf(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,R)}async _poll(o,l){try{for(;this._running;)try{const d="".concat(o,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(d,"."));const p=await this._httpClient.get(d,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new lf(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(Zg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(d){this._running?d instanceof yC?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=d,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(d.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(o){return this._running?mU(this._logger,"LongPolling",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const o={},[l,d]=mh();o[l]=d;const p={headers:{...o,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let I;try{await this._httpClient.delete(this._url,p)}catch(R){I=R}I?I instanceof lf&&(I.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(I))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(wn.Trace,o),this.onclose(this._closeError)}}}class oV{constructor(o,l,d,p){this._httpClient=o,this._accessToken=l,this._logger=d,this._options=p,this.onreceive=null,this.onclose=null}async connect(o,l){return ho.isRequired(o,"url"),ho.isRequired(l,"transferFormat"),ho.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=o,this._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((d,p)=>{let I=!1;if(l!==Qo.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let R;if(Hi.isBrowser||Hi.isWebWorker)R=new this._options.EventSource(o,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(o),w={};w.Cookie=g;const[U,C]=mh();w[U]=C,R=new this._options.EventSource(o,{withCredentials:this._options.withCredentials,headers:{...w,...this._options.headers}})}try{R.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(Zg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(w){this._close(w);return}},R.onerror=g=>{I?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},R.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=R,I=!0,d()}}catch(g){p(g);return}})}async send(o){return this._eventSource?mU(this._logger,"SSE",this._httpClient,this._url,o,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class aV{constructor(o,l,d,p,I,R){this._logger=d,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=I,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=R}async connect(o,l){ho.isRequired(o,"url"),ho.isRequired(l,"transferFormat"),ho.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let d;return this._accessTokenFactory&&(d=await this._accessTokenFactory()),new Promise((p,I)=>{o=o.replace(/^http/,"ws");let R;const g=this._httpClient.getCookieString(o);let w=!1;if(Hi.isNode||Hi.isReactNative){const U={},[C,y]=mh();U[C]=y,d&&(U[cf.Authorization]="Bearer ".concat(d)),g&&(U[cf.Cookie]=g),R=new this._webSocketConstructor(o,void 0,{headers:{...U,...this._headers}})}else d&&(o+=(o.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(d)));R||(R=new this._webSocketConstructor(o)),l===Qo.Binary&&(R.binaryType="arraybuffer"),R.onopen=U=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(o,".")),this._webSocket=R,w=!0,p()},R.onerror=U=>{let C=null;typeof ErrorEvent<"u"&&U instanceof ErrorEvent?C=U.error:C="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(C,"."))},R.onmessage=U=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(Zg(U.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(U.data)}catch(C){this._close(C);return}},R.onclose=U=>{if(w)this._close(U);else{let C=null;typeof ErrorEvent<"u"&&U instanceof ErrorEvent?C=U.error:C="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",I(new Error(C))}}})}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(Zg(o,this._logMessageContent),".")),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(o)&&(o.wasClean===!1||o.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(o.code," (").concat(o.reason||"no reason given",")."))):o instanceof Error?this.onclose(o):this.onclose())}_isCloseEvent(o){return o&&typeof o.wasClean=="boolean"&&typeof o.code=="number"}}const Zk=100;class sV{constructor(o,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,ho.isRequired(o,"url"),this._logger=LK(l.logger),this.baseUrl=this._resolveUrl(o),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let d=null,p=null;Hi.isNode&&typeof require<"u"&&(d=HK(),p=KK()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&d&&(l.WebSocket=d),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new rV(l.httpClient||new YK(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(o){if(o=o||Qo.Binary,ho.isIn(o,Qo,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat(Qo[o],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(o),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new nu(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new nu(l))}this._connectionStarted=!0}send(o){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new _C(this.transport)),this._sendQueue.send(o))}async stop(o){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(o,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(o),await this._stopPromise}async _stopInternal(o){this._stopError=o;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(o){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===uo.WebSockets)this.transport=this._constructTransport(uo.WebSockets),await this._startTransport(l,o);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let d=null,p=0;do{if(d=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new nu("The connection was stopped during negotiation.");if(d.error)throw new Error(d.error);if(d.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(d.url&&(l=d.url),d.accessToken){const I=d.accessToken;this._accessTokenFactory=()=>I,this._httpClient._accessToken=I,this._httpClient._accessTokenFactory=void 0}p++}while(d.url&&p<Zk);if(p===Zk&&d.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,d,o)}this.transport instanceof jk&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(d){return this._logger.log(wn.Error,"Failed to start the connection: "+d),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(d)}}async _getNegotiationResponse(o){const l={},[d,p]=mh();l[d]=p;const I=this._resolveNegotiateUrl(o);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(I,"."));try{const R=await this._httpClient.post(I,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(R.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(R.statusCode,"'")));const g=JSON.parse(R.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new kk("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(R){let g="Failed to complete negotiation with the server: "+R;return R instanceof lf&&R.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new kk(g))}}_createConnectUrl(o,l){return l?o+(o.indexOf("?")===-1?"?":"&")+"id=".concat(l):o}async _createTransport(o,l,d,p){let I=this._createConnectUrl(o,d.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(I,p),this.connectionId=d.connectionId;return}const R=[],g=d.availableTransports||[];let w=d;for(const U of g){const C=this._resolveTransportOrError(U,l,p,(w==null?void 0:w.useStatefulReconnect)===!0);if(C instanceof Error)R.push("".concat(U.transport," failed:")),R.push(C);else if(this._isITransport(C)){if(this.transport=C,!w){try{w=await this._getNegotiationResponse(o)}catch(y){return Promise.reject(y)}I=this._createConnectUrl(o,w.connectionToken)}try{await this._startTransport(I,p),this.connectionId=w.connectionId;return}catch(y){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(U.transport,"': ").concat(y)),w=void 0,R.push(new MK("".concat(U.transport," failed: ").concat(y),uo[U.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,v),Promise.reject(new nu(v))}}}}return R.length>0?Promise.reject(new DK("Unable to connect to the server with any of the available transports. ".concat(R.join(" ")),R)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(o){switch(o){case uo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new aV(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case uo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new oV(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case uo.LongPolling:return new jk(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(o,"."))}}_startTransport(o,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async d=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(o,l),await this.features.resend()}catch(I){p=!0}else{this._stopConnection(d);return}p&&this._stopConnection(d)}:this.transport.onclose=d=>this._stopConnection(d),this.transport.connect(o,l)}_resolveTransportOrError(o,l,d,p){const I=uo[o.transport];if(I==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(o.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(o.transport,"' because it is not supported by this client."));if(uV(l,I))if(o.transferFormats.map(g=>Qo[g]).indexOf(d)>=0){if(I===uo.WebSockets&&!this._options.WebSocket||I===uo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[I],"' because it is not supported in your environment.'")),new xK("'".concat(uo[I],"' is not supported in your environment."),I);this._logger.log(wn.Debug,"Selecting transport '".concat(uo[I],"'."));try{return this.features.reconnect=I===uo.WebSockets?p:void 0,this._constructTransport(I)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[I],"' because it does not support the requested transfer format '").concat(Qo[d],"'.")),new Error("'".concat(uo[I],"' does not support ").concat(Qo[d],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[I],"' because it was disabled by the client.")),new NK("'".concat(uo[I],"' is disabled by the client."),I)}_isITransport(o){return o&&typeof o=="object"&&"connect"in o}_stopConnection(o){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(o,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(o,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(o,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),o?this._logger.log(wn.Error,"Connection disconnected with error '".concat(o,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(o,") threw error '").concat(l,"'."))}}}_resolveUrl(o){if(o.lastIndexOf("https://",0)===0||o.lastIndexOf("http://",0)===0)return o;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(o,"'."));const l=window.document.createElement("a");return l.href=o,this._logger.log(wn.Information,"Normalizing '".concat(o,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(o){const l=new URL(o);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const d=new URLSearchParams(l.searchParams);return d.has("negotiateVersion")||d.append("negotiateVersion",this._negotiateVersion.toString()),d.has("useStatefulReconnect")?d.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&d.append("useStatefulReconnect","true"),l.search=d.toString(),l.toString()}}function uV(i,o){return!i||(o&i)!==0}class _C{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new Zy,this._transportResult=new Zy,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new Zy),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof o));this._buffer.push(o),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Zy;const o=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):_C._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),o.resolve()}catch(d){o.reject(d)}}}static _concatBuffers(o){const l=o.map(I=>I.byteLength).reduce((I,R)=>I+R),d=new Uint8Array(l);let p=0;for(const I of o)d.set(new Uint8Array(I),p),p+=I.byteLength;return d.buffer}}class Zy{constructor(){this.promise=new Promise((o,l)=>[this._resolver,this._rejecter]=[o,l])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}const lV="json";class cV{constructor(){this.name=lV,this.version=2,this.transferFormat=Qo.Text}parseMessages(o,l){if(typeof o!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];l===null&&(l=jg.instance);const d=ls.parse(o),p=[];for(const I of d){const R=JSON.parse(I);if(typeof R.type!="number")throw new Error("Invalid payload.");switch(R.type){case Ar.Invocation:this._isInvocationMessage(R);break;case Ar.StreamItem:this._isStreamItemMessage(R);break;case Ar.Completion:this._isCompletionMessage(R);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(R);break;case Ar.Sequence:this._isSequenceMessage(R);break;default:l.log(wn.Information,"Unknown message type '"+R.type+"' ignored.");continue}p.push(R)}return p}writeMessage(o){return ls.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),o.invocationId!==void 0&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),o.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if(typeof o.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,l){if(typeof o!="string"||o==="")throw new Error(l)}}const fV={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function dV(i){const o=fV[i.toLowerCase()];if(typeof o<"u")return o;throw new Error("Unknown log level: ".concat(i))}class vU{configureLogging(o){if(ho.isRequired(o,"logging"),hV(o))this.logger=o;else if(typeof o=="string"){const l=dV(o);this.logger=new D0(l)}else this.logger=new D0(o);return this}withUrl(o,l){return ho.isRequired(o,"url"),ho.isNotEmpty(o,"url"),this.url=o,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(o){return ho.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return o?Array.isArray(o)?this.reconnectPolicy=new Bk(o):this.reconnectPolicy=o:this.reconnectPolicy=new Bk,this}withServerTimeout(o){return ho.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return ho.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o==null?void 0:o.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(o.logger===void 0&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new sV(this.url,o);return EC.create(l,this.logger||jg.instance,this.protocol||new cV,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function hV(i){return i.log!==void 0}class pV extends Sf{constructor(o){var l;super(),this.options=o,this.hubConnection=o.hubConnection,this.updateIntervalFrequency=(l=o.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const o=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-o.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const o=this,l=12,d=1e4,p=20;let I;return await new Promise((R,g)=>{var T;const w=[];let U=0,C,y;function v(){var F;y=Date.now(),(F=o.hubConnection)==null||F.invoke("echo"),C=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},d)}function D(F){I=F,clearTimeout(C),w.push(Date.now()-y),U++,U<l?setTimeout(v,p):m()}(T=o.hubConnection)==null||T.on("echo",D);function m(){var N;if((N=o.hubConnection)==null||N.off("echo",D),I===void 0){g(new Error("Server timestamp is undefined"));return}let F;o.options.roundtripCalcStrategy==="mean"?F=w.reduce((_,A)=>_+A)/w.length:F=_K(w),R(new Date(I+F/2))}v()})}destroy(){clearTimeout(this.timeoutInstance)}}const $s={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},WI={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class gV extends Sf{constructor({deviceId:o,debug:l,groupName:d}){super(),this.hubConnection=null,this.serverTimeService=null,this.state=WI.IDLE,this.deviceId=o,this.debugLogging=l!=null?l:!1,this.groupName=d}setupTimeService(){this.serverTimeService=new pV({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",o=>{this.emit("serverTimeOffsetUpdate",o)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var o;console.log("SignalR: disconnect",$s.CLIENT_DISCONNECT,{deviceId:this.deviceId}),await((o=this.hubConnection)==null?void 0:o.invoke($s.CLIENT_DISCONNECT))}connect({url:o,accessToken:l}){var d;this.hubConnection=new vU().withUrl(o,{accessTokenFactory:()=>l,transport:uo.WebSockets}).configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(d=this.hubConnection)==null||d.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.join()}).catch(p=>{console.error("Connection failed:",p)})}connectEventHandlers(){var o,l,d,p,I,R;(o=this.hubConnection)==null||o.on($s.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on($s.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.on($s.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on($s.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(I=this.hubConnection)==null||I.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(R=this.hubConnection)==null||R.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var o,l,d,p,I;(o=this.hubConnection)==null||o.off($s.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off($s.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.off($s.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),await((p=this.hubConnection)==null?void 0:p.stop()),(I=this.serverTimeService)==null||I.destroy(),super.destroy()}onReceiveGroupCommand(o){var l,d,p,I,R;switch(console.log("onReceiveGroupCommand",o),o.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(o.value.startDate)}),((l=o.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(d=o.value.rateClockState)==null?void 0:d.reference,start:(p=o.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(I=o.value.rateClockState)==null?void 0:I.reference,start:(R=o.value.rateClockState)==null?void 0:R.start});break;case"cast":this.emit("cast",{index:o.value});break;case"prepareCast":this.emit("prepareCast",{index:o.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(o){switch(console.log("onReceiveGlobalCommand",o),o.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(o){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[o]}))}onStateUpdate(o){switch(this.state=o.state.$type,o.state.$type){case WI.CONNECTED_STATE:if(!o.state.sessionId)return;this.emit("connected",{sessionId:o.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(o){console.log("SetupStatusUpdate: ",o),this.emit("setupStatusUpdate",{deviceLists:o})}}async function _h(i,o,l){var d;try{const p=await fetch(i,o);switch(p.status){case 401:throw new tg(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new tg(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const I=await p.json();if(!p.ok)throw new tg(l==null?void 0:l.name,(d=I.sys)==null?void 0:d.id,I.message,p.status);return I}catch(p){throw p instanceof tg?p:new tg(l.name,"Network Error",l.message||"Could not make the request")}}var $I={exports:{}};(function(i,o){(function(l,d){var p="1.0.38",I="",R="?",g="function",w="undefined",U="object",C="string",y="major",v="model",D="name",m="type",T="vendor",F="version",N="architecture",_="console",A="mobile",b="tablet",j="smarttv",Y="wearable",W="embedded",$=500,se="Amazon",x="Apple",X="ASUS",ce="BlackBerry",oe="Browser",me="Chrome",Ce="Edge",Je="Firefox",Te="Google",je="Huawei",ot="LG",ct="Microsoft",Ie="Motorola",qe="Opera",gt="Samsung",Me="Sharp",We="Sony",rt="Xiaomi",Ht="Zebra",kt="Facebook",mt="Chromium OS",Rt="Mac OS",Re=function(ft,Et){var Tt={};for(var Ct in ft)Et[Ct]&&Et[Ct].length%2===0?Tt[Ct]=Et[Ct].concat(ft[Ct]):Tt[Ct]=ft[Ct];return Tt},te=function(ft){for(var Et={},Tt=0;Tt<ft.length;Tt++)Et[ft[Tt].toUpperCase()]=ft[Tt];return Et},Ue=function(ft,Et){return typeof ft===C?O(Et).indexOf(O(ft))!==-1:!1},O=function(ft){return ft.toLowerCase()},M=function(ft){return typeof ft===C?ft.replace(/[^\d\.]/g,I).split(".")[0]:d},q=function(ft,Et){if(typeof ft===C)return ft=ft.replace(/^\s\s*/,I),typeof Et===w?ft:ft.substring(0,$)},K=function(ft,Et){for(var Tt=0,Ct,hn,Qt,nn,Ot,Un;Tt<Et.length&&!Ot;){var gr=Et[Tt],Or=Et[Tt+1];for(Ct=hn=0;Ct<gr.length&&!Ot&&gr[Ct];)if(Ot=gr[Ct++].exec(ft),Ot)for(Qt=0;Qt<Or.length;Qt++)Un=Ot[++hn],nn=Or[Qt],typeof nn===U&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):d:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):d:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):d):this[nn]=Un||d;Tt+=2}},he=function(ft,Et){for(var Tt in Et)if(typeof Et[Tt]===U&&Et[Tt].length>0){for(var Ct=0;Ct<Et[Tt].length;Ct++)if(Ue(Et[Tt][Ct],ft))return Tt===R?d:Tt}else if(Ue(Et[Tt],ft))return Tt===R?d:Tt;return ft},de={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ve={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},St={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[F,[D,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[F,[D,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[D,F],[/opios[\/ ]+([\w\.]+)/i],[F,[D,qe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[F,[D,qe+" GX"]],[/\bopr\/([\w\.]+)/i],[F,[D,qe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[F,[D,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[D,F],[/\bddg\/([\w\.]+)/i],[F,[D,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[F,[D,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[F,[D,"WeChat"]],[/konqueror\/([\w\.]+)/i],[F,[D,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[F,[D,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[F,[D,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[F,[D,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[D,/(.+)/,"$1 Secure "+oe],F],[/\bfocus\/([\w\.]+)/i],[F,[D,Je+" Focus"]],[/\bopt\/([\w\.]+)/i],[F,[D,qe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[F,[D,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[F,[D,"Dolphin"]],[/coast\/([\w\.]+)/i],[F,[D,qe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[F,[D,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[F,[D,Je]],[/\bqihu|(qi?ho?o?|360)browser/i],[[D,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[D,/(.+)/,"$1 "+oe],F],[/samsungbrowser\/([\w\.]+)/i],[F,[D,gt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[D,/_/g," "],F],[/metasr[\/ ]?([\d\.]+)/i],[F,[D,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[D,"Sogou Mobile"],F],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[D,F],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[D],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[D,kt],F],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[D,F],[/\bgsa\/([\w\.]+) .*safari\//i],[F,[D,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[F,[D,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[F,[D,me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[D,me+" WebView"],F],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[F,[D,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[D,F],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[F,[D,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[F,D],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[D,[F,he,de]],[/(webkit|khtml)\/([\w\.]+)/i],[D,F],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[D,"Netscape"],F],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[F,[D,Je+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[D,F],[/(cobalt)\/([\w\.]+)/i],[D,[F,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[N,"amd64"]],[/(ia32(?=;))/i],[[N,O]],[/((?:i[346]|x)86)[;\)]/i],[[N,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[N,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[N,"armhf"]],[/windows (ce|mobile); ppc;/i],[[N,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[N,/ower/,I,O]],[/(sun4\w)[;\)]/i],[[N,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[N,O]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[T,gt],[m,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[T,gt],[m,A]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[T,x],[m,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[T,x],[m,b]],[/(macintosh);/i],[v,[T,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[T,Me],[m,A]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[T,je],[m,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[T,je],[m,A]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[T,rt],[m,A]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[T,rt],[m,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[T,"OPPO"],[m,A]],[/\b(opd2\d{3}a?) bui/i],[v,[T,"OPPO"],[m,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[T,"Vivo"],[m,A]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[T,"Realme"],[m,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[T,Ie],[m,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[T,Ie],[m,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[T,ot],[m,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[T,ot],[m,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[T,"Lenovo"],[m,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[T,"Nokia"],[m,A]],[/(pixel c)\b/i],[v,[T,Te],[m,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[T,Te],[m,A]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[T,We],[m,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[T,We],[m,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[T,"OnePlus"],[m,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[T,se],[m,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[T,se],[m,A]],[/(playbook);[-\w\),; ]+(rim)/i],[v,T,[m,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[T,ce],[m,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[T,X],[m,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[T,X],[m,A]],[/(nexus 9)/i],[v,[T,"HTC"],[m,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[v,/_/g," "],[m,A]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[T,"Acer"],[m,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[T,"Meizu"],[m,A]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[T,"Ulefone"],[m,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,v,[m,A]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,v,[m,b]],[/(surface duo)/i],[v,[T,ct],[m,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[T,"Fairphone"],[m,A]],[/(u304aa)/i],[v,[T,"AT&T"],[m,A]],[/\bsie-(\w*)/i],[v,[T,"Siemens"],[m,A]],[/\b(rct\w+) b/i],[v,[T,"RCA"],[m,b]],[/\b(venue[\d ]{2,7}) b/i],[v,[T,"Dell"],[m,b]],[/\b(q(?:mv|ta)\w+) b/i],[v,[T,"Verizon"],[m,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[T,"Barnes & Noble"],[m,b]],[/\b(tm\d{3}\w+) b/i],[v,[T,"NuVision"],[m,b]],[/\b(k88) b/i],[v,[T,"ZTE"],[m,b]],[/\b(nx\d{3}j) b/i],[v,[T,"ZTE"],[m,A]],[/\b(gen\d{3}) b.+49h/i],[v,[T,"Swiss"],[m,A]],[/\b(zur\d{3}) b/i],[v,[T,"Swiss"],[m,b]],[/\b((zeki)?tb.*\b) b/i],[v,[T,"Zeki"],[m,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],v,[m,b]],[/\b(ns-?\w{0,9}) b/i],[v,[T,"Insignia"],[m,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[T,"NextBook"],[m,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],v,[m,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],v,[m,A]],[/\b(ph-1) /i],[v,[T,"Essential"],[m,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[T,"Envizen"],[m,b]],[/\b(trio[-\w\. ]+) b/i],[v,[T,"MachSpeed"],[m,b]],[/\btu_(1491) b/i],[v,[T,"Rotor"],[m,b]],[/(shield[\w ]+) b/i],[v,[T,"Nvidia"],[m,b]],[/(sprint) (\w+)/i],[T,v,[m,A]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[T,ct],[m,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[T,Ht],[m,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[T,Ht],[m,A]],[/smart-tv.+(samsung)/i],[T,[m,j]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[T,gt],[m,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,ot],[m,j]],[/(apple) ?tv/i],[T,[v,x+" TV"],[m,j]],[/crkey/i],[[v,me+"cast"],[T,Te],[m,j]],[/droid.+aft(\w+)( bui|\))/i],[v,[T,se],[m,j]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[T,Me],[m,j]],[/(bravia[\w ]+)( bui|\))/i],[v,[T,We],[m,j]],[/(mitv-\w{5}) bui/i],[v,[T,rt],[m,j]],[/Hbbtv.*(technisat) (.*);/i],[T,v,[m,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[v,q],[m,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,v,[m,_]],[/droid.+; (shield) bui/i],[v,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[v,[T,We],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[T,ct],[m,_]],[/((pebble))app/i],[T,v,[m,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[T,x],[m,Y]],[/droid.+; (glass) \d/i],[v,[T,Te],[m,Y]],[/droid.+; (wt63?0{2,3})\)/i],[v,[T,Ht],[m,Y]],[/(quest( \d| pro)?)/i],[v,[T,kt],[m,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,W]],[/(aeobc)\b/i],[v,[T,se],[m,W]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[m,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[m,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,A]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[F,[D,Ce+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[F,[D,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[D,F],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[F,D]],os:[[/microsoft (windows) (vista|xp)/i],[D,F],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[D,[F,he,Ve]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[F,he,Ve],[D,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[F,/_/g,"."],[D,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[D,Rt],[F,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[F,D],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[D,F],[/\(bb(10);/i],[F,[D,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[F,[D,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[F,[D,Je+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[F,[D,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[F,[D,"watchOS"]],[/crkey\/([\d\.]+)/i],[F,[D,me+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[D,mt],F],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[D,F],[/(sunos) ?([\w\.\d]*)/i],[[D,"Solaris"],F],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[D,F]]},st=function(ft,Et){if(typeof ft===U&&(Et=ft,ft=d),!(this instanceof st))return new st(ft,Et).getResult();var Tt=typeof l!==w&&l.navigator?l.navigator:d,Ct=ft||(Tt&&Tt.userAgent?Tt.userAgent:I),hn=Tt&&Tt.userAgentData?Tt.userAgentData:d,Qt=Et?Re(St,Et):St,nn=Tt&&Tt.userAgent==Ct;return this.getBrowser=function(){var Ot={};return Ot[D]=d,Ot[F]=d,K.call(Ot,Ct,Qt.browser),Ot[y]=M(Ot[F]),nn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==g&&(Ot[D]="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot[N]=d,K.call(Ot,Ct,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[T]=d,Ot[v]=d,Ot[m]=d,K.call(Ot,Ct,Qt.device),nn&&!Ot[m]&&hn&&hn.mobile&&(Ot[m]=A),nn&&Ot[v]=="Macintosh"&&Tt&&typeof Tt.standalone!==w&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ot[v]="iPad",Ot[m]=b),Ot},this.getEngine=function(){var Ot={};return Ot[D]=d,Ot[F]=d,K.call(Ot,Ct,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[D]=d,Ot[F]=d,K.call(Ot,Ct,Qt.os),nn&&!Ot[D]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Ot[D]=hn.platform.replace(/chrome os/i,mt).replace(/macos/i,Rt)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===C&&Ot.length>$?q(Ot,$):Ot,this},this.setUA(Ct),this};st.VERSION=p,st.BROWSER=te([D,F,y]),st.CPU=te([N]),st.DEVICE=te([v,T,m,_,A,j,b,Y,W]),st.ENGINE=st.OS=te([D,F]),i.exports&&(o=i.exports=st),o.UAParser=st;var at=typeof l!==w&&(l.jQuery||l.Zepto);if(at&&!at.ua){var tt=new st;at.ua=tt.getResult(),at.ua.get=function(){return tt.getUA()},at.ua.set=function(ft){tt.setUA(ft);var Et=tt.getResult();for(var Tt in Et)at.ua[Tt]=Et[Tt]}}})(typeof window=="object"?window:tu)})($I,$I.exports);var mV=$I.exports;const Gk=new mV.UAParser;function vV(i){const o=Gk.getOS(),l=Gk.getBrowser();return"Gigset/".concat(i," (").concat(o.name," ").concat(o.version,"; ").concat(l.name," ").concat(l.version,")")}function Gg({sessionId:i,appVersion:o,apiVersion:l}){const d={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":vV(o),"Api-version":l!=null?l:"v1"};return i&&(d.Session=i),d}async function yV({deviceId:i,appVersion:o,baseUrl:l}){const d={deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i};return(await _h)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(d),headers:Gg({appVersion:o})},{name:ss.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function EV({deviceId:i,ticketCode:o,scanTvDeviceId:l,appVersion:d,baseUrl:p,ticketPrefix:I}){let R=p;I&&(R="".concat(p));const g={ticketCode:o,deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(i,")"),deviceId:i,scanTvDeviceId:l};return(await _h)("".concat(R,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:Gg({appVersion:d})},{name:ss.NEGOTIATE,message:"could not fetch negotiate data"})}async function qk({sessionId:i,appVersion:o,baseUrl:l,ticketPrefix:d,ticketCode:p}){let I=l;d&&(I="".concat(l,"/").concat(d));const R=await _h("".concat(I,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:Gg({sessionId:i,appVersion:o})},{name:ss.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(R.timelineUrl).concat(R.queryParameters),{method:"GET",headers:Gg({sessionId:i,appVersion:o})}).then(async w=>await w.json()),queryParameters:R.queryParameters,distributionUrl:R.distributionUrl}}async function Hk({sessionId:i,appVersion:o,baseUrl:l,ticketCode:d}){return(await _h)("".concat(l,"/static-api/event/").concat(d,"/status"),{method:"GET",headers:Gg({sessionId:i,appVersion:o})},{name:ss.EVENT_STATUS,message:"failed to get event status data"})}function _V(i){return"".concat(i,"/timeline-api/drm/license?drm=widevine")}var ef=(i=>(i.JUMPSPOT="jumpspot",i.FOLLOW="follow",i))(ef||{});function TC(i){return[...i.places.flatMap((o,l)=>o.jumpSpots.map(d=>({camera:d.camera,title:d.title,type:"jumpspot",placeIndex:l,mapPosition:o.mapPosition,mapScale:o.mapScale,placeTitle:o.title}))),...i.follows.map(o=>({camera:o.camera,title:o.title,type:"follow",mapPosition:o.mapPositions}))].map((o,l)=>({...o,index:l}))}function sE(i,o){return TC(i).filter(d=>{const p=mi(d.camera.span.time,i.frameRate),I=mi(d.camera.span.time,i.frameRate)+mi(d.camera.span.duration,i.frameRate);return p<=o&&I>=o})}function yU(i,o,l,d){const p=sE(i,o+l+2);if(!p.length)return;if(d){const g=(d==null?void 0:d.placeIndex)!==void 0&&p.find(w=>w.type==="jumpspot"&&w.placeIndex===(d==null?void 0:d.placeIndex));if(g)return g}const I=p.find(g=>g.type==="jumpspot");if(I)return I;const R=p.find(g=>g.type==="follow");if(R)return R}function TV(i){const o=TC(i),l=i.frameRate;return o.sort((d,p)=>{const I=mi(d.camera.span.time,l)+mi(d.camera.span.duration,l);return mi(p.camera.span.time,l)+mi(p.camera.span.duration,l)-I}),o[0]}function mi(i,o){if(!i)return 0;const[l,d,p,I]=i.split(":").map(Number),R=l*60*60,g=d*60;if(o){const w=I/o;return R+g+p+w}else return R+g+p}function XI(i,o,l){return sE(o,l.getExpectedPositionInSeconds()).find(d=>d.index===i)}function Kk(i,o){return TC(o).find(d=>d.camera.cameraID===i)}const SV=i=>{if(typeof i=="string")return"String!";if(typeof i=="number")return"Int";if(typeof i=="boolean")return"Boolean";if(typeof i=="object"&&"OR"in i)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof i))};function EU(i,o,l){const d=i.includes("staging")||i.includes("qa"),p={...l,preview:d},R=(Array.isArray(o)?o[0]:o).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([U,C])=>"$".concat(U,": ").concat(SV(C))).join(", "),w="query(".concat(g,")").concat(R);return JSON.stringify({query:w,variables:p})}const _U=i=>"https://graphql.contentful.com/content/v1/spaces/".concat(i,"/environments/master");function TU(i,o){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:i}}const wV=(i,o)=>EU(o,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:i});async function Vk(i,o,l,d){var R,g;const p=wV(i.toUpperCase(),o),I=await _h(_U(d),TU(p,l),{name:ss.EVENT_META,message:"Could not fetch event meta."});return(g=(R=I==null?void 0:I.data)==null?void 0:R.eventCollection.items)==null?void 0:g[0]}function AV(i,o){const l=i.reduce((d,p)=>(d.OR.push({slug:p}),d),{OR:[]});return EU(o,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function IV(i,o,l){var I,R;const d=AV(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],i);return(R=(I=(await _h(_U(l),TU(d,o),{name:ss.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:I.resourceSetCollection)==null?void 0:R.items}const zk=.4,Yk=.2;class bV{constructor(){switch(this._algorithmArray=[l=>{const d=this._videoElement;if(d){const p=l-d.currentTime-this._offset+.14;if((p>Yk||p<-Yk)&&!this._switchingInProgress)if(this._switchingInProgress=!0,setTimeout(()=>{this._switchingInProgress=!1},2e3),p>1)d.currentTime=d.currentTime+p+1.8;else{const I=p/2;d.playbackRate=Math.sign(p)===1?2:.5,setTimeout(()=>{d.playbackRate=1},Math.abs(I)*2200)}}},l=>{if(this._videoElement&&!this._switchingInProgress){const d=this._videoElement,p=l-d.currentTime-this._offset+.9;(p>zk||p<-zk)&&!this._switchingInProgress&&(this._switchingInProgress=!0,d.currentTime=d.currentTime+p,setTimeout(()=>{this._switchingInProgress=!1},3e3))}}],this._offset=0,this._switchingInProgress=!1,mC()){case lc.TIZEN:this._algorithm=0;break;case lc.WEBOS:this._algorithm=1;break;default:this._algorithm=0;break}}connectMediaElement(o,l=0){this._videoElement=o,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(o){this._algorithmArray[this._algorithm](o)}destroy(){}}class CV extends Sf{constructor(o){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new bV,this.state="idle",this.startTime=o,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const o=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&o&&o>Date.now()}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const o=this._timelineData.frameRate,l=TV(this._timelineData);return this.adjustedStartTime+(mi(l.camera.span.time,o)+mi(l.camera.span.duration,o))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(o){this._timelineData=o}pausePlayStream(o,l,d){if(o==="pause"&&!this.isPaused)this.isPaused=!0;else if(o==="play"){if(l&&d){const p=new Date(l).getTime()/1e3,I=new Date(d).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-I}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){this.state="started",this.emit("start",void 0),this.isPaused=!1,clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const o=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(o)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(o,l=!1){this.startTime=o,this.emit("startTimeUpdated",void 0),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){this.adjustedStartTime>Date.now()?(clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(o){this.serverTimeOffset=o}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class RV extends Sf{constructor(o,l,d){super(),this.eventClock=o,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=d!=null?d:2}updateTimelineData(o){this.timelineData=o}updatePlaying(o){var d,p,I;let l=!1;if(this.timelineData){const R=this.timelineData.frameRate,g=(I=(p=(d=o.camera.attentions)==null?void 0:d.filter(w=>w.scope==="global"))==null?void 0:p.sort((w,U)=>mi(w.time)-mi(U.time)))!=null?I:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const U=this.eventClock.getExpectedPositionInSeconds()-mi(o.camera.span.time,R),C=mi(o.camera.span.duration,R)-U;if(g.length){const y=g.find(D=>U<mi(D.time)),v=y?mi(y.time)-U:0;v>0&&v<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},v))}C<=this.nearEndThreshold+1&&C>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(C-this.nearEndThreshold)*1e3):C<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),C<=this.transitionThreshold+1&&C>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(C-this.transitionThreshold)*1e3)),C<=1&&C>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},C*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const xV="1.0.0";var vn=B0();const ru=fb(vn);function NV({baseUrl:i,contentfulAccessToken:o,contentfulSpaceId:l}){const[d,p]=vn.useState(),[I,R]=vn.useState(),g=vn.useCallback((w,U)=>{var C,y;return d&&((y=(C=d.find(v=>v.slug===w))==null?void 0:C.resourcesCollection.items.find(v=>v.key===U))==null?void 0:y.value)||""},[d]);return vn.useEffect(()=>{i&&o&&l&&(R(void 0),IV(i,o,l).then(w=>{p(w)}).catch(w=>{R(w)}))},[i,o,l]),{contentfulData:d,getContentfulValue:g,error:I}}const MV={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},Ba=ru.createContext(MV);function DV({children:i,baseUrl:o,preferredProfile:l,contentfulAccessToken:d,contentfulSpaceId:p,newSetupToggle:I=!1,ticketCodeProp:R}){const g=Sg(),w=xV,[U,C]=vn.useState(),[y,v]=vn.useState(),[D,m]=vn.useState(),[T,F]=vn.useState(),[N,_]=vn.useState(),[A,b]=vn.useState(),[j,Y]=vn.useState(),[W,$]=vn.useState(R),[se,x]=vn.useState(),[X,ce]=vn.useState(),[oe,me]=vn.useState(),[Ce,Je]=vn.useState(),[Te,je]=vn.useState(),[ot,ct]=vn.useState([]),[Ie,qe]=vn.useState([]),[gt,Me]=vn.useState(!1),[We,rt]=vn.useState(),{getContentfulValue:Ht,error:kt}=NV({baseUrl:o,contentfulAccessToken:d,contentfulSpaceId:p}),mt=3;function Rt(Re,te){return te.filter(Ue=>Re!==Ue.name)}return vn.useEffect(()=>{ct(kt?Re=>[...Re,kt]:Re=>Rt(ss.CONTENTFUL,Re))},[kt]),vn.useEffect(()=>{$(R)},[R]),vn.useEffect(()=>{o&&g&&I&&(async()=>{let te=0;const Ue=()=>yV({deviceId:g,appVersion:w,baseUrl:o});for(;te<mt;)await Ue().then(O=>{je(O),te=mt}).catch(O=>{te+=1,te===2&&console.error(O)})})()},[w,o,g,I]),vn.useEffect(()=>{if(!Te)return;const Re=new vU().withUrl(Te.url,{accessTokenFactory:()=>Te.accessToken,transport:uo.WebSockets}).build();Re.start().catch(te=>{console.error("Global signalR connection failed:",te)}),Re.on($s.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:te,ticketCode:Ue})=>{$(Ue),x(te),localStorage.setItem("ticketCode",Ue)}),_(Re)},[Te]),vn.useEffect(()=>{!W||!se||!N||(console.log("Disconnecting global signalR..."),N.invoke($s.CLIENT_DISCONNECT))},[W,se,N]),vn.useEffect(()=>{if(!W||!se&&I){Je(void 0);return}const Re=W[0];ct(te=>Rt(ss.NEGOTIATE,te)),EV({deviceId:g,deviceType:6,appVersion:w,ticketCode:W,scanTvDeviceId:se,ticketPrefix:Re,baseUrl:o}).then(te=>{Je(te),Me(te.ticketType>3)}).catch(te=>{ct(Ue=>[...Ue,te])})},[W,w,o,g,se,I]),vn.useEffect(()=>{if(!(Ce!=null&&Ce.accessToken)||!Ce.url||!W)return;const Re=new CV(new Date(0)),te=new RV(Re),Ue=new gV({groupName:W,deviceId:g,debug:!1});return Ue.connect({url:Ce.url,accessToken:Ce.accessToken}),Ue.on("setupStatusUpdate",({deviceLists:O})=>{const M=O.connectedDevices[0].sessionId;rt(O.connectedDevices),console.log("signalRClient connected with sessionId: ",M),b(M),qe(he=>Rt(ss.EVENT_STATUS,he));const q=()=>{Hk({appVersion:w,baseUrl:o,ticketCode:W,sessionId:M}).then(he=>{v(he),he.broadcastStart&&(gt||Re.updateStartTime(new Date(he.broadcastStart),!0))}).catch(he=>{qe(de=>[...de,he])})};q(),Ue.on("eventStatusChanged",q),Vk(W[0],o,d,p).then(he=>{m(he)}).catch(he=>{qe(de=>[...de,he])}),qe(he=>Rt(ss.GENERATE,he));const K=()=>{qk({sessionId:M,appVersion:w,baseUrl:o,ticketCode:W}).then(he=>{Re.timelineData=he,C(he),te.updateTimelineData(he)}).catch(he=>{qe(de=>[...de,he])})};Re.on("fetchTimeline",K)}),Ue.on("stateUpdated",({state:O})=>{console.log(O,"stateUpdate"),Y(O)}),Ue.on("stateUpdated",({state:O})=>{console.log(O,"stateUpdate"),Y(O)}),Ue.on("serverTimeOffsetUpdate",({serverTimeOffset:O})=>{console.log("server time offset updated",O),Re.updateServerTimeOffset(O)}),Ue.on("startTimeUpdated",({startTime:O})=>{console.log("startTimeUpdated",O),Re.updateStartTime(O,!0)}),Ue.on("connected",({sessionId:O})=>{console.log("signalRClient connected with sessionId: ",O),b(O),qe(K=>Rt(ss.EVENT_STATUS,K));const M=()=>{Hk({appVersion:w,baseUrl:o,ticketCode:W,sessionId:O}).then(K=>{if(v(K),K.broadcastStart)if(gt){const he=new Date;he.setHours(he.getHours()+1),Re.updateStartTime(he,!0)}else Re.updateStartTime(new Date(K.broadcastStart),!0)}).catch(K=>{qe(he=>[...he,K])})};M(),Ue.on("eventStatusChanged",M),Vk(W[0],o,d,p).then(K=>{m(K)}).catch(K=>{qe(he=>[...he,K])}),qe(K=>Rt(ss.GENERATE,K));const q=()=>{qk({sessionId:O,appVersion:w,baseUrl:o,ticketCode:W}).then(K=>{Re.timelineData=K,C(K),te.updateTimelineData(K)}).catch(K=>{qe(he=>[...he,K])})};Re.on("fetchTimeline",q)}),F(Ue),ce(Re),me(te),()=>{Y(void 0),rt(void 0),Ue.destroy(),te.destroy(),Re.destroy()}},[Ce,W,w,o,g,d,p,gt]),bt.jsx(Ba.Provider,{value:{signalRClient:T,timelineData:U,eventStatus:y,eventMeta:D,hubState:j,sessionId:A,ticketCode:W,eventClock:X,orchestrator:oe,preferredProfile:l,baseUrl:o,negotiateData:Ce,isDev:gt,getContentfulValue:Ht,preConnectErrors:ot,postConnectErrors:Ie,connectedDevices:We},children:i})}const PV="_focused_tk4zu_1",OV={focused:PV};function $o({selfFocus:i,...o}){const{ref:l,focused:d,focusSelf:p}=hU.useFocusable({onEnterPress:()=>{o.onClick()}});return vn.useEffect(()=>{i&&p()},[p,i]),bt.jsx("button",{...o,ref:l,className:"".concat(o.className||""," ").concat(d?OV.focused:""," ").concat(d&&o.focusstile?o.focusstile:"")})}function Th(){return vn.useContext(Ba).signalRClient}function wf(){return vn.useContext(Ba).timelineData}function SC(){return vn.useContext(Ba).eventMeta}function LV(){return vn.useContext(Ba).hubState}function kV(){return vn.useContext(Ba).sessionId}function FV(){return vn.useContext(Ba).ticketCode[0]}function su(){return vn.useContext(Ba).eventClock}function UV(){return vn.useContext(Ba).negotiateData}function wC(){return vn.useContext(Ba).isDev}function BV(){return vn.useContext(Ba).postConnectErrors}function em(){return vn.useContext(Ba).orchestrator}function AC(){return vn.useContext(Ba).connectedDevices}function SU(){const i=wf(),o=FV(),l=vn.useContext(Ba);return vn.useMemo(()=>[i==null?void 0:i.profiles.find(d=>d.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?_V(l.baseUrl):void 0,i==null?void 0:i.queryParameters],[l.preferredProfile,o,i,l.baseUrl])}const jV=()=>bt.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:bt.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function ZV(){const i=Th(),o=su(),l=vn.useCallback(R=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:Sg(),startDate:new Date(o.startTime.getTime()-R).toISOString(),rateClockState:{rate:1}}})},[i,o]),d=vn.useCallback(R=>{!o||!i||i.sendGroupCommand({command:"play",value:{senderID:Sg(),startDate:new Date(o.serverNow()-R).toISOString(),rateClockState:{rate:1}}})},[i,o]),p=vn.useCallback(()=>{if(!o||!i)return;const R=new Date;R.setSeconds(R.getSeconds()+5),i.sendGroupCommand({command:"play",value:{senderID:Sg(),startDate:new Date(R).toISOString(),rateClockState:{rate:1}}})},[i,o]);return{seekBy:l,seekTo:d,disconnect:()=>{i==null||i.disconnect()},restart:p}}function GV({eventPlayer:i}){var T,F;const o=Th(),l=su(),[d,p]=vn.useState(!1),[I,R]=vn.useState(),{seekBy:g,seekTo:w,disconnect:U,restart:C}=ZV(),[y,v]=vn.useState([]),D=wf(),m=()=>{p(!d)};return vn.useEffect(()=>{if(!l||!D)return;const N=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),A=sE(D,_);v(A.map(b=>b)),R({expectedPosition:_})},500);return()=>{clearInterval(N)}},[l,D]),bt.jsxs("div",{className:"demo-remote-container",children:[bt.jsx("div",{className:"icon-wrapper",onClick:m,children:bt.jsx(jV,{})}),d&&bt.jsxs(bt.Fragment,{children:[bt.jsx("h2",{children:"Demo Remote"}),bt.jsx($o,{selfFocus:!0,onClick:()=>{i==null||i.requestFullscreen()},children:"Go to fullscreen"}),I&&bt.jsx("div",{children:bt.jsxs("p",{children:["Expected position in seconds"," ",I.expectedPosition.toFixed(2)]})}),bt.jsx($o,{onClick:()=>{w(-5e3)},children:"Start in 5 sec"}),bt.jsx($o,{onClick:()=>{C()},children:"Restart"}),bt.jsx($o,{onClick:()=>{g(1e4)},children:"Seek Forward"}),bt.jsx($o,{onClick:()=>{g(-1e4)},children:"Seek Backward"}),bt.jsx($o,{onClick:()=>{w(1e4)},children:"Seek to first video"}),bt.jsx($o,{onClick:()=>{w(1e5)},children:"Seek to 100"}),bt.jsx($o,{onClick:U,children:"Disconnect"}),bt.jsx("h3",{children:"Available streams right now:"}),y.map(N=>bt.jsxs("div",{className:"cast-button-group",children:[bt.jsxs($o,{onClick:()=>{o==null||o.sendGroupCommand({command:"cast",value:N.index})},children:[bt.jsx("span",{style:{margin:"10px"},children:""}),N.title]}),bt.jsxs($o,{onClick:()=>{o==null||o.sendGroupCommand({command:"prepareCast",value:N.index})},children:[bt.jsx("span",{style:{margin:"10px"},children:""}),"prepare cast"]}),bt.jsxs($o,{onClick:()=>{o==null||o.sendGroupCommand({command:"cancelCast",value:N.index})},children:[bt.jsx("span",{style:{margin:"10px"},children:""}),"cancel cast"]})]},N.camera.assetName)),bt.jsx("h3",{children:"Statistics:"}),bt.jsxs("div",{className:"statistics-block",children:[bt.jsx("label",{children:"Total frames:"}),bt.jsx("div",{children:((T=i==null?void 0:i.stats)==null?void 0:T.totalVideoFrames)||0})]}),bt.jsxs("div",{className:"statistics-block",children:[bt.jsx("label",{children:"Dropped frames:"}),bt.jsx("div",{children:((F=i==null?void 0:i.stats)==null?void 0:F.droppedVideoFrames)||0})]})]})]})}var wU={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(i,o){(function(l,d){i.exports=d()})(self,function(){return function(){var l={4593:function(R,g){var w,U,C,y,v,D=function(F){for(var N=[],_=0;_<F.length;++_){var A=F.charCodeAt(_);A<128?N.push(A):A<2048?(N.push(192|A>>6),N.push(128|63&A)):A<65536?(N.push(224|A>>12),N.push(128|63&A>>6),N.push(128|63&A)):(N.push(240|A>>18),N.push(128|63&A>>12),N.push(128|63&A>>6),N.push(128|63&A))}return N},m=function(F){for(var N=[],_=0;_<F.length;){var A=F[_++];A<128||(A<224?(A=(31&A)<<6,A|=63&F[_++]):A<240?(A=(15&A)<<12,A|=(63&F[_++])<<6,A|=63&F[_++]):(A=(7&A)<<18,A|=(63&F[_++])<<12,A|=(63&F[_++])<<6,A|=63&F[_++])),N.push(String.fromCharCode(A))}return N.join("")},T={};w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=function(F){for(var N=0,_=[],A=0|F.length/3;0<A--;){var b=(F[N]<<16)+(F[N+1]<<8)+F[N+2];N+=3,_.push(w.charAt(63&b>>18)),_.push(w.charAt(63&b>>12)),_.push(w.charAt(63&b>>6)),_.push(w.charAt(63&b))}return F.length-N==2?(b=(F[N]<<16)+(F[N+1]<<8),_.push(w.charAt(63&b>>18)),_.push(w.charAt(63&b>>12)),_.push(w.charAt(63&b>>6)),_.push("=")):F.length-N==1&&(b=F[N]<<16,_.push(w.charAt(63&b>>18)),_.push(w.charAt(63&b>>12)),_.push("==")),_.join("")},C=function(){for(var F=[],N=0;N<w.length;++N)F[w.charCodeAt(N)]=N;return F[61]=0,F}(),y=function(F){for(var N=0,_=[],A=0|F.length/4;0<A--;){var b=(C[F.charCodeAt(N)]<<18)+(C[F.charCodeAt(N+1)]<<12)+(C[F.charCodeAt(N+2)]<<6)+C[F.charCodeAt(N+3)];_.push(255&b>>16),_.push(255&b>>8),_.push(255&b),N+=4}return _&&(F.charAt(N-2)=="="?(_.pop(),_.pop()):F.charAt(N-1)=="="&&_.pop()),_},v={encode:function(F){for(var N=[],_=0;_<F.length;++_)N.push(F.charCodeAt(_));return N},decode:function(F){for(var N=0;N<s.length;++N)a[N]=String.fromCharCode(a[N]);return a.join("")}},T.decodeArray=function(F){var N=y(F);return new Uint8Array(N)},T.encodeASCII=function(F){var N=v.encode(F);return U(N)},T.decodeASCII=function(F){var N=y(F);return v.decode(N)},T.encode=function(F){var N=D(F);return U(N)},T.decode=function(F){var N=y(F);return m(N)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(R,g){(function(w){var U={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},C=function(x){var X=x;return U.hasOwnProperty(x)&&(X=U[x]),String.fromCharCode(X)},y=15,v=32,D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},F={25:2,26:4,29:6,30:8,31:10,27:13,28:15},N=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(x){this.time=x},log:function(x,X){var ce=this.verboseFilter[x];this.verboseLevel>=ce&&console.log(this.time+" ["+x+"] "+X)}},A=function(x){for(var X=[],ce=0;ce<x.length;ce++)X.push(x[ce].toString(16));return X},b=function(x,X,ce,oe,me){this.foreground=x||"white",this.underline=X||!1,this.italics=ce||!1,this.background=oe||"black",this.flash=me||!1};b.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(x){for(var X=["foreground","underline","italics","background","flash"],ce=0;ce<X.length;ce++){var oe=X[ce];x.hasOwnProperty(oe)&&(this[oe]=x[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(x){return this.foreground===x.foreground&&this.underline===x.underline&&this.italics===x.italics&&this.background===x.background&&this.flash===x.flash},copy:function(x){this.foreground=x.foreground,this.underline=x.underline,this.italics=x.italics,this.background=x.background,this.flash=x.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var j=function(x,X,ce,oe,me,Ce){this.uchar=x||" ",this.penState=new b(X,ce,oe,me,Ce)};j.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(x,X){this.uchar=x,this.penState.copy(X)},setPenState:function(x){this.penState.copy(x)},equals:function(x){return this.uchar===x.uchar&&this.penState.equals(x.penState)},copy:function(x){this.uchar=x.uchar,this.penState.copy(x.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Y=function(){this.chars=[];for(var x=0;x<v;x++)this.chars.push(new j);this.pos=0,this.currPenState=new b};Y.prototype={equals:function(x){for(var X=!0,ce=0;ce<v;ce++)if(!this.chars[ce].equals(x.chars[ce])){X=!1;break}return X},copy:function(x){for(var X=0;X<v;X++)this.chars[X].copy(x.chars[X])},isEmpty:function(){for(var x=!0,X=0;X<v;X++)if(!this.chars[X].isEmpty()){x=!1;break}return x},setCursor:function(x){this.pos!==x&&(this.pos=x),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},moveCursor:function(x){var X=this.pos+x;if(x>1)for(var ce=this.pos+1;ce<X+1;ce++)this.chars[ce].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(x){x>=144&&this.backSpace();var X=C(x);this.pos>=v?_.log("ERROR","Cannot insert "+x.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(x){var X;for(X=x;X<v;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var x=[],X=!0,ce=0;ce<v;ce++){var oe=this.chars[ce].uchar;oe!==" "&&(X=!1),x.push(oe)}return X?"":x.join("")},setPenStyles:function(x){this.currPenState.setStyles(x),this.chars[this.pos].setPenState(this.currPenState)}};var W=function(){this.rows=[];for(var x=0;x<y;x++)this.rows.push(new Y);this.currRow=14,this.nrRollUpRows=null,this.reset()};W.prototype={reset:function(){for(var x=0;x<y;x++)this.rows[x].clear();this.currRow=14},equals:function(x){for(var X=!0,ce=0;ce<y;ce++)if(!this.rows[ce].equals(x.rows[ce])){X=!1;break}return X},copy:function(x){for(var X=0;X<y;X++)this.rows[X].copy(x.rows[X])},isEmpty:function(){for(var x=!0,X=0;X<y;X++)if(!this.rows[X].isEmpty()){x=!1;break}return x},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(x){this.rows[this.currRow].insertChar(x)},setPen:function(x){this.rows[this.currRow].setPenStyles(x)},moveCursor:function(x){this.rows[this.currRow].moveCursor(x)},setCursor:function(x){_.log("INFO","setCursor: "+x),this.rows[this.currRow].setCursor(x)},setPAC:function(x){_.log("INFO","pacData = "+JSON.stringify(x));var X=x.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var ce=this.rows[this.currRow];if(x.indent!==null){var oe=x.indent,me=Math.max(oe-1,0);ce.setCursor(x.indent),x.color=ce.chars[me].penState.foreground}var Ce={foreground:x.color,underline:x.underline,italics:x.italics,background:"black",flash:!1};this.setPen(Ce)},setBkgData:function(x){_.log("INFO","bkgData = "+JSON.stringify(x)),this.backSpace(),this.setPen(x),this.insertChar(32)},setRollUpRows:function(x){this.nrRollUpRows=x},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var x=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(x,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(x){x=x||!1;for(var X=[],ce="",oe=-1,me=0;me<y;me++){var Ce=this.rows[me].getTextString();Ce&&(oe=me+1,x?X.push("Row "+oe+': "'+Ce+'"'):X.push(Ce.trim()))}return X.length>0&&(ce=x?"["+X.join(" | ")+"]":X.join("\n")),ce},getTextAndFormat:function(){return this.rows}};var $=function(x,X){this.chNr=x,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new W,this.nonDisplayedMemory=new W,this.lastOutputScreen=new W,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};$.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(x){this.outputFilter=x},setPAC:function(x){this.writeScreen.setPAC(x)},setBkgData:function(x){this.writeScreen.setBkgData(x)},setMode:function(x){x!==this.mode&&(this.mode=x,_.log("INFO","MODE="+x),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=x)},insertChars:function(x){for(var X=0;X<x.length;X++)this.writeScreen.insertChar(x[X]);var ce=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",ce+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(x){_.log("INFO","RU("+x+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(x)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var x=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=x,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(x){_.log("INFO","TO("+x+") - Tab Offset"),this.writeScreen.moveCursor(x)},cc_MIDROW:function(x){var X={flash:!1};if(X.underline=x%2==1,X.italics=x>=46,X.italics)X.foreground="white";else{var ce=Math.floor(x/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][ce]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var x=_.time;x!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(x,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:x):this.cueStartTime=x,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(x){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.displayedMemory),this.cueStartTime=x))}};var se=function(x,X,ce){this.field=x||1,this.outputs=[X,ce],this.channels=[new $(1,X),new $(2,ce)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};se.prototype={getHandler:function(x){return this.channels[x].getHandler()},setHandler:function(x,X){this.channels[x].setHandler(X)},addData:function(x,X){var ce,oe,me,Ce=!1;this.lastTime=x,_.setTime(x);for(var Je=0;Je<X.length;Je+=2)oe=127&X[Je],me=127&X[Je+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&me===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+A([oe,me])+") is dropped")):oe!==0||me!==0?(_.log("DATA","["+A([X[Je],X[Je+1]])+"] -> ("+A([oe,me])+")"),(ce=this.parseCmd(oe,me))||(ce=this.parseMidrow(oe,me)),ce||(ce=this.parsePAC(oe,me)),ce||(ce=this.parseBackgroundAttributes(oe,me)),ce||(Ce=this.parseChars(oe,me))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ce):_.log("WARNING","No channel found yet. TEXT-MODE?")),ce?this.dataCounters.cmd+=2:Ce?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+A([oe,me])+" orig: "+A([X[Je],X[Je+1]])))):this.dataCounters.padding+=2},parseCmd:function(x,X){var ce;if(!((x===20||x===21||x===28||x===29)&&32<=X&&X<=47||(x===23||x===31)&&33<=X&&X<=35))return!1;ce=x===20||x===21||x===23?1:2;var oe=this.channels[ce-1];return x===20||x===21||x===28||x===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=x,this.lastCmdB=X,this.currChNr=ce,!0},parseMidrow:function(x,X){var ce=null;if((x===17||x===25)&&32<=X&&X<=47){if((ce=x===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[ce-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+A([x,X])+")"),this.lastCmdA=x,this.lastCmdB=X,!0}return!1},parsePAC:function(x,X){var ce,oe;if(!((17<=x&&x<=23||25<=x&&x<=31)&&64<=X&&X<=127||(x===16||x===24)&&64<=X&&X<=95))return!1;ce=x<=23?1:2,oe=64<=X&&X<=95?ce===1?D[x]:T[x]:ce===1?m[x]:F[x];var me=this.interpretPAC(oe,X);return this.channels[ce-1].setPAC(me),this.lastCmdA=x,this.lastCmdB=X,this.currChNr=ce,!0},interpretPAC:function(x,X){var ce,oe={color:null,italics:!1,indent:null,underline:!1,row:x};return ce=X>95?X-96:X-64,oe.underline=(1&ce)==1,ce<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ce/2)]:ce<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((ce-16)/2),oe},parseChars:function(x,X){var ce=null,oe=null,me=null;if(x>=25?(ce=2,me=x-8):(ce=1,me=x),17<=me&&me<=19){var Ce;Ce=me===17?X+80:me===18?X+112:X+144,_.log("INFO","Special char '"+C(Ce)+"' in channel "+ce),oe=[Ce],this.lastCmdA=x,this.lastCmdB=X}else 32<=x&&x<=127&&(oe=X===0?[x]:[x,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Je=A(oe);_.log("DEBUG","Char codes =  "+Je.join(","))}return oe},parseBackgroundAttributes:function(x,X){var ce,oe,me;return((x===16||x===24)&&32<=X&&X<=47||(x===23||x===31)&&45<=X&&X<=47)&&(ce={},x===16||x===24?(oe=Math.floor((X-32)/2),ce.background=N[oe],X%2==1&&(ce.background=ce.background+"_semi")):X===45?ce.background="transparent":(ce.foreground="black",X===47&&(ce.underline=!0)),me=x<24?1:2,this.channels[me-1].setBkgData(ce),this.lastCmdA=x,this.lastCmdB=X,!0)},reset:function(){for(var x=0;x<this.channels.length;x++)this.channels[x]&&this.channels[x].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(x){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(x)}},w.logger=_,w.PenState=b,w.CaptionScreen=W,w.Cea608Parser=se,w.findCea608Nalus=function(x,X,ce){for(var oe=0,me=X,Ce=[],Je=function(Ie,qe,gt,Me){if(Ie!==4||qe<8)return null;var We=gt.getUint8(Me),rt=gt.getUint16(Me+1),Ht=gt.getUint32(Me+3),kt=gt.getUint8(Me+7);return We==181&&rt==49&&Ht==1195456820&&kt==3};me<X+ce;){if(oe=x.getUint32(me),(31&x.getUint8(me+4))==6)for(var Te=me+5,je=-1;Te<me+4+oe-1;){je=0;for(var ot=255;ot===255;)je+=ot=x.getUint8(Te),Te++;var ct=0;for(ot=255;ot===255;)ct+=ot=x.getUint8(Te),Te++;Je(je,ct,x,Te)&&Ce.push([Te,ct]),Te+=ct}me+=oe+4}return Ce},w.extractCea608DataFromRange=function(x,X){var ce=X[0],oe=[[],[]];ce+=8;var me=31&x.getUint8(ce);ce+=2;for(var Ce=0;Ce<me;Ce++){var Je=x.getUint8(ce),Te=4&Je,je=3&Je;ce++;var ot=x.getUint8(ce);ce++;var ct=x.getUint8(ce);ce++,Te&&(127&ot)+(127&ct)!=0&&(je===0?(oe[0].push(ot),oe[0].push(ct)):je===1&&(oe[1].push(ot),oe[1].push(ct)))}return oe}})(g)},8416:function(R,g,w){var U=w(1139),C=w(5448),y=w(6398),v=w(2032),D=(w(5530),typeof window<"u"&&window||w.g),m=D.dashjs;m||(m=D.dashjs={}),m.MediaPlayer=U.Z,m.FactoryMaker=C.Z,m.Debug=y.Z,m.Version=(0,v.e)()},6398:function(R,g,w){var U=w(5595),C=w(8512),y=w(5448),v=1,D=2,m=3,T=4,F=5;function N(A){A=A||{};var b,j,Y,W,$=this.context,se=(0,U.Z)($).getInstance(),x=A.settings,X=[];function ce(ot){return ot&&ot.bind?ot.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var ot=arguments.length,ct=new Array(ot),Ie=0;Ie<ot;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[v,this].concat(ct))}function me(){for(var ot=arguments.length,ct=new Array(ot),Ie=0;Ie<ot;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[D,this].concat(ct))}function Ce(){for(var ot=arguments.length,ct=new Array(ot),Ie=0;Ie<ot;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[m,this].concat(ct))}function Je(){for(var ot=arguments.length,ct=new Array(ot),Ie=0;Ie<ot;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[T,this].concat(ct))}function Te(){for(var ot=arguments.length,ct=new Array(ot),Ie=0;Ie<ot;Ie++)ct[Ie]=arguments[Ie];je.apply(void 0,[F,this].concat(ct))}function je(ot,ct){var Ie="",qe=null;j&&(qe=new Date().getTime(),Ie+="["+(qe-W)+"]"),Y&&ct&&ct.getClassName&&(Ie+="["+ct.getClassName()+"]",ct.getType&&(Ie+="["+ct.getType()+"]")),Ie.length>0&&(Ie+=" ");for(var gt=arguments.length,Me=new Array(gt>2?gt-2:0),We=2;We<gt;We++)Me[We-2]=arguments[We];Array.apply(null,Me).forEach(function(rt){Ie+=rt+" "}),X[ot]&&x&&x.get().debug.logLevel>=ot&&X[ot](Ie),x&&x.get().debug.dispatchEvent&&se.trigger(C.Z.LOG,{message:Ie,level:ot})}return b={getLogger:function(ot){return{fatal:oe.bind(ot),error:me.bind(ot),warn:Ce.bind(ot),info:Je.bind(ot),debug:Te.bind(ot)}},setLogTimestampVisible:function(ot){j=ot},setCalleeNameVisible:function(ot){Y=ot}},j=!0,Y=!0,W=new Date().getTime(),typeof window<"u"&&window.console&&(X[v]=ce(window.console.error),X[D]=ce(window.console.error),X[m]=ce(window.console.warn),X[T]=ce(window.console.info),X[F]=ce(window.console.debug)),b}N.__dashjs_factory_name="Debug";var _=y.Z.getSingletonFactory(N);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=v,_.LOG_LEVEL_ERROR=D,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=F,y.Z.updateSingletonFactory(N.__dashjs_factory_name,_),g.Z=_},5595:function(R,g,w){var U=w(5448),C=w(8825);function y(){var D={};function m(F,N,_){var A=-1;return D[F]&&D[F].some(function(b,j){if(b&&b.callback===N&&(!_||_===b.scope))return A=j,!0}),A}var T={on:function(F,N,_){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!F)throw new Error("event type cannot be null or undefined");if(!N||typeof N!="function")throw new Error("listener must be a function: "+N);var b=A.priority||0;if(!(m(F,N,_)>=0)){D[F]=D[F]||[];var j={callback:N,scope:_,priority:b};_&&_.getStreamId&&(j.streamId=_.getStreamId()),_&&_.getType&&(j.mediaType=_.getType()),A&&A.mode&&(j.mode=A.mode);var Y=D[F].some(function(W,$){if(W&&b>W.priority)return D[F].splice($,0,j),!0});Y||D[F].push(j)}},off:function(F,N,_){if(F&&N&&D[F]){var A=m(F,N,_);A<0||(D[F][A]=null)}},trigger:function(F){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(F&&D[F]){if((N=N||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");N.type=F,_.streamId&&(N.streamId=_.streamId),_.mediaType&&(N.mediaType=_.mediaType),D[F].filter(function(A){return!(!A||_.streamId&&A.streamId&&A.streamId!==_.streamId||_.mediaType&&A.mediaType&&A.mediaType!==_.mediaType||_.mode&&A.mode&&A.mode!==_.mode||!A.mode&&_.mode&&_.mode===C.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(A){return A&&A.callback.call(A.scope,N)})}},reset:function(){D={}}};return T}y.__dashjs_factory_name="EventBus";var v=U.Z.getSingletonFactory(y);v.EVENT_PRIORITY_LOW=0,v.EVENT_PRIORITY_HIGH=5e3,U.Z.updateSingletonFactory(y.__dashjs_factory_name,v),g.Z=v},5448:function(R,g){var w=function(){var U,C=[],y={},v={};function D(N,_){for(var A in C){var b=C[A];if(b.context===N&&b.name===_)return b.instance}return null}function m(N,_){return _[N]}function T(N,_,A){N in A&&(A[N]=_)}function F(N,_,A){var b,j=N.__dashjs_factory_name,Y=_[j];if(Y){var W=Y.instance;if(!Y.override)return W.apply({context:_,factory:U},A);for(var $ in b=N.apply({context:_},A),W=W.apply({context:_,factory:U,parent:b},A))b.hasOwnProperty($)&&(b[$]=W[$])}else b=N.apply({context:_},A);return b.getClassName=function(){return j},b}return U={extend:function(N,_,A,b){!b[N]&&_&&(b[N]={instance:_,override:A})},getSingletonInstance:D,setSingletonInstance:function(N,_,A){for(var b in C){var j=C[b];if(j.context===N&&j.name===_)return void(C[b].instance=A)}C.push({name:_,context:N,instance:A})},deleteSingletonInstances:function(N){C=C.filter(function(_){return _.context!==N})},getSingletonFactory:function(N){var _=m(N.__dashjs_factory_name,y);return _||(_=function(A){var b;return A===void 0&&(A={}),{getInstance:function(){return b||(b=D(A,N.__dashjs_factory_name)),b||(b=F(N,A,arguments),C.push({name:N.__dashjs_factory_name,context:A,instance:b})),b}}},y[N.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(N){return m(N,y)},updateSingletonFactory:function(N,_){T(N,_,y)},getClassFactory:function(N){var _=m(N.__dashjs_factory_name,v);return _||(_=function(A){return A===void 0&&(A={}),{create:function(){return F(N,A,arguments)}}},v[N.__dashjs_factory_name]=_),_},getClassFactoryByName:function(N){return m(N,v)},updateClassFactory:function(N,_){T(N,_,v)}},U}();g.Z=w},1264:function(R,g,w){var U=w(5448),C=w(703),y=w(6398),v=w(3393),D=w(7855),m=w(5595),T=w(8512);function F(b){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},F(b)}function N(b,j,Y){return j in b?Object.defineProperty(b,j,{value:Y,enumerable:!0,configurable:!0,writable:!0}):b[j]=Y,b}function _(){var b,j,Y=this.context,W=(0,m.Z)(Y).getInstance(),$={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},se={debug:{logLevel:y.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:v.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:v.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(b={},N(b,D.w.MPD_TYPE,500),N(b,D.w.XLINK_EXPANSION_TYPE,500),N(b,D.w.MEDIA_SEGMENT_TYPE,1e3),N(b,D.w.INIT_SEGMENT_TYPE,1e3),N(b,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),N(b,D.w.INDEX_SEGMENT_TYPE,1e3),N(b,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),N(b,D.w.LICENSE,1e3),N(b,D.w.OTHER_TYPE,1e3),N(b,"lowLatencyReductionFactor",10),b),retryAttempts:(j={},N(j,D.w.MPD_TYPE,3),N(j,D.w.XLINK_EXPANSION_TYPE,1),N(j,D.w.MEDIA_SEGMENT_TYPE,3),N(j,D.w.INIT_SEGMENT_TYPE,3),N(j,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),N(j,D.w.INDEX_SEGMENT_TYPE,3),N(j,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),N(j,D.w.LICENSE,3),N(j,D.w.OTHER_TYPE,3),N(j,"lowLatencyMultiplyFactor",5),j),abr:{movingAverageMethod:v.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:v.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:v.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},x=C.Z.clone(se);function X(ce,oe,me){for(var Ce in ce)ce.hasOwnProperty(Ce)&&(oe.hasOwnProperty(Ce)?F(ce[Ce])!=="object"||ce[Ce]instanceof Array||ce[Ce]===null?(oe[Ce]=C.Z.clone(ce[Ce]),$[me+Ce]&&W.trigger($[me+Ce])):X(ce[Ce],oe[Ce],me.slice()+Ce+"."):console.error("Settings parameter "+me+Ce+" is not supported"))}return{get:function(){return x},update:function(ce){F(ce)==="object"&&X(ce,x,"")},reset:function(){x=C.Z.clone(se)}}}_.__dashjs_factory_name="Settings";var A=U.Z.getSingletonFactory(_);g.Z=A},703:function(R,g,w){var U=w(3875),C=w.n(U),y=w(1067);function v(T){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},v(T)}function D(T,F){for(var N=0;N<F.length;N++){var _=F[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")})(this,T)}var F,N;return F=T,N=[{key:"mixin",value:function(_,A,b){var j,Y={};if(_)for(var W in A)A.hasOwnProperty(W)&&(j=A[W],W in _&&(_[W]===j||W in Y&&Y[W]===j)||(v(_[W])==="object"&&_[W]!==null?_[W]=T.mixin(_[W],j,b):_[W]=b(j)));return _}},{key:"clone",value:function(_){if(!_||v(_)!=="object")return _;var A;if(_ instanceof Array){A=[];for(var b=0,j=_.length;b<j;++b)b in _&&A.push(T.clone(_[b]))}else A={};return T.mixin(A,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,A){try{if(!A||A.length===0)return _;var b=new URL(_);return A.forEach(function(j){j.key&&j.value&&b.searchParams.set(j.key,j.value)}),b.href}catch(j){return _}}},{key:"parseHttpHeaders",value:function(_){var A={};if(!_)return A;for(var b=_.trim().split("\r\n"),j=0,Y=b.length;j<Y;j++){var W=b[j],$=W.indexOf(": ");$>0&&(A[W.substring(0,$)]=W.substring($+2))}return A}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(A){var b=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(A=="x"?b:3&b|8).toString(16)})}},{key:"generateHashCode",value:function(_){var A=0;if(_.length===0)return A;for(var b=0;b<_.length;b++)A=(A<<5)-A+_.charCodeAt(b),A|=0;return A}},{key:"getRelativeUrl",value:function(_,A){try{var b=new URL(_),j=new URL(A);if(b.protocol=j.protocol,b.origin!==j.origin)return A;var Y=C().relative(b.pathname.substr(0,b.pathname.lastIndexOf("/")),j.pathname.substr(0,j.pathname.lastIndexOf("/"))),W=Y.length===0?1:0;return Y+=j.pathname.substr(j.pathname.lastIndexOf("/")+W,j.pathname.length-1),j.pathname.length<Y.length?j.pathname:Y}catch($){return A}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var A=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,y.UAParser)(A)}catch(b){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],N&&D(F,N),T}();g.Z=m},2032:function(R,g,w){function U(){return"4.7.4"}w.d(g,{e:function(){return U}})},2230:function(R,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,F=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||F&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&w(y.prototype,v),C}();g.Z=U},4351:function(R,g,w){function U(m){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(m)}function C(m,T){return C=Object.setPrototypeOf||function(F,N){return F.__proto__=N,F},C(m,T)}function y(m,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=function(m){(function(A,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),b&&C(A,b)})(_,m);var T,F,N=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}(),function(){var A,b=v(T);if(F){var j=v(this).constructor;A=Reflect.construct(b,arguments,j)}else A=b.apply(this,arguments);return y(this,A)});function _(){var A;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(A=N.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",A.BUFFERING_COMPLETED="bufferingCompleted",A.BUFFER_CLEARED="bufferCleared",A.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",A.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",A.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",A.CMSD_STATIC_HEADER="cmsdStaticHeader",A.CURRENT_TRACK_CHANGED="currentTrackChanged",A.DATA_UPDATE_COMPLETED="dataUpdateCompleted",A.INBAND_EVENTS="inbandEvents",A.INITIAL_STREAM_SWITCH="initialStreamSwitch",A.INIT_FRAGMENT_LOADED="initFragmentLoaded",A.INIT_FRAGMENT_NEEDED="initFragmentNeeded",A.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",A.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",A.LOADING_COMPLETED="loadingCompleted",A.LOADING_PROGRESS="loadingProgress",A.LOADING_DATA_PROGRESS="loadingDataProgress",A.LOADING_ABANDONED="loadingAborted",A.MANIFEST_UPDATED="manifestUpdated",A.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",A.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",A.QUOTA_EXCEEDED="quotaExceeded",A.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",A.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",A.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",A.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",A.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",A.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",A.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",A.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",A.SOURCE_BUFFER_ERROR="sourceBufferError",A.STREAMS_COMPOSED="streamsComposed",A.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",A.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",A.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",A.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",A.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",A.URL_RESOLUTION_FAILED="urlResolutionFailed",A.VIDEO_CHUNK_RECEIVED="videoChunkReceived",A.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",A.XLINK_ELEMENT_LOADED="xlinkElementLoaded",A.XLINK_READY="xlinkReady",A.SEEK_TARGET="seekTarget",A.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",A.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",A.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",A.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",A}return _}(w(8342).Z);g.Z=D},8512:function(R,g,w){function U(F){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},U(F)}function C(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")}function y(F,N){return y=Object.setPrototypeOf||function(_,A){return _.__proto__=A,_},y(F,N)}function v(F,N){return!N||U(N)!=="object"&&typeof N!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(F):N}function D(F){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},D(F)}var m=function(F){(function(j,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Y&&Y.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Y&&y(j,Y)})(b,F);var N,_,A=(N=b,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(j){return!1}}(),function(){var j,Y=D(N);if(_){var W=D(this).constructor;j=Reflect.construct(Y,arguments,W)}else j=Y.apply(this,arguments);return v(this,j)});function b(){return C(this,b),A.apply(this,arguments)}return b}(w(4351).Z),T=new m;g.Z=T},8342:function(R,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,F=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||F&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&w(y.prototype,v),C}();g.Z=U},9326:function(R,g,w){var U=w(3186),C=w(7855),y=w(5448),v=w(8825),D=w(7387),m=w(1553);function T(F){var N,_,A,b,j,Y=(F=F||{}).eventBus,W=F.debug,$=F.urlUtils,se=F.type,x=F.streamInfo,X=F.segmentsController,ce=F.timelineConverter,oe=F.baseURLController;function me(){return se}function Ce(){A=null}function Je(Ie,qe,gt){var Me,We,rt=oe.resolve(gt.path),Ht={};return rt&&qe!==rt.url&&$.isRelative(qe)?(Me=rt.url,We=rt.serviceLocation,Ht=rt.queryParams,qe&&(Me=$.resolve(qe,Me))):Me=qe,!$.isRelative(Me)&&(Ie.url=Me,Ie.serviceLocation=We,Ie.queryParams=Ht,!0)}function Te(Ie,qe){if(qe==null)return null;var gt=new U.Z,Me=qe.representation,We=Me.adaptation.period.mpd.manifest.Period_asArray[Me.adaptation.period.index].AdaptationSet_asArray[Me.adaptation.index].Representation_asArray[Me.index].bandwidth,rt=qe.media;return rt=(0,D.vi)(rt,"Number",qe.replacementNumber),rt=(0,D.vi)(rt,"Time",qe.replacementTime),rt=(0,D.vi)(rt,"Bandwidth",We),rt=(0,D.Aj)(rt,Me.id),rt=(0,D.eR)(rt),gt.mediaType=me(),gt.type=C.w.MEDIA_SEGMENT_TYPE,gt.range=qe.mediaRange,gt.startTime=qe.presentationStartTime,gt.mediaStartTime=qe.mediaStartTime,gt.duration=qe.duration,gt.timescale=Me.timescale,gt.availabilityStartTime=qe.availabilityStartTime,gt.availabilityEndTime=qe.availabilityEndTime,gt.availabilityTimeComplete=Me.availabilityTimeComplete,gt.wallStartTime=qe.wallStartTime,gt.quality=Me.index,gt.index=qe.index,gt.mediaInfo=Ie,gt.adaptationIndex=Me.adaptation.index,gt.representationId=Me.id,Je(gt,rt,Me)?gt:void 0}function je(Ie,qe,gt){var Me=null;if(!qe||!qe.segmentInfoType)return Me;var We=X.getSegmentByTime(qe,gt);return We&&(A=We,_.debug("Index for time "+gt+" is "+We.index),Me=Te(Ie,We)),Me}function ot(Ie,qe,gt){var Me=null,We=X.getSegmentByIndex(qe,gt,A?A.mediaStartTime:-1);if(We)Me=Te(Ie,We),A=We;else{if(b&&!j)return _.debug(me()+" No segment found at index: "+gt+". Wait for next loop"),null;j=!0}return Me}function ct(){_.debug("Dynamic stream complete"),j=!0}return N={getCurrentIndex:function(){return A?A.index:-1},getInitRequest:function(Ie,qe){return qe?function(gt,Me,We){var rt=new U.Z,Ht=Me.adaptation.period,kt=Ht.start;if(rt.mediaType=We,rt.type=C.w.INIT_SEGMENT_TYPE,rt.range=Me.range,rt.availabilityStartTime=ce.calcAvailabilityStartTimeFromPresentationTime(kt,Me,b),rt.availabilityEndTime=ce.calcAvailabilityEndTimeFromPresentationTime(kt+Ht.duration,Me,b),rt.quality=Me.index,rt.mediaInfo=gt,rt.representationId=Me.id,Je(rt,Me.initialization,Me))return rt.url=(0,D.vi)(rt.url,"Bandwidth",Me.bandwidth),rt}(Ie,qe,me()):null},getNextSegmentRequest:function(Ie,qe){return qe&&qe.segmentInfoType?ot(Ie,qe,A?A.index+1:0):null},getNextSegmentRequestIdempotent:function(Ie,qe){var gt=A?A.index+1:0,Me=X.getSegmentByIndex(qe,gt,A?A.mediaStartTime:-1);return Me?Te(Ie,Me):null},getSegmentRequestForTime:je,getStreamId:function(){return x.id},getStreamInfo:function(){return x},getType:me,getValidTimeAheadOfTargetTime:function(Ie,qe,gt,Me){try{if(isNaN(Ie)||!qe||!gt)return NaN;if(Ie<0&&(Ie=0),isNaN(Me)&&(Me=.5),je(qe,gt,Ie))return Ie;if(gt.adaptation.period.start+gt.adaptation.period.duration<Ie)return NaN;for(var We=isFinite(gt.adaptation.period.duration)?gt.adaptation.period.start+gt.adaptation.period.duration:Ie+30,rt=Math.min(Ie+Me,We),Ht=NaN,kt=null;rt<=We;){var mt=null;if(rt<=We&&(mt=je(qe,gt,rt)),mt){Ht=rt,kt=mt;break}rt+=Me}if(kt){var Rt=kt.startTime+kt.duration;return Ie>kt.startTime&&Rt-Ie>Me?Ie:!isNaN(kt.startTime)&&Ie<kt.startTime&&Ht>kt.startTime?kt.startTime+.001:Math.min(Rt-Me,Ht)}return Ht}catch(Re){return NaN}},initialize:function(Ie){b=Ie,j=!1,X.initialize(Ie)},isLastSegmentRequested:function(Ie,qe){return!Ie||!A?!1:j?!0:!isFinite(Ie.adaptation.period.duration)||A.presentationStartTime+A.duration>qe?!1:Ie.mediaFinishedInformation&&!isNaN(Ie.mediaFinishedInformation.numberOfSegments)&&!isNaN(A.index)&&A.index>=Ie.mediaFinishedInformation.numberOfSegments-1&&(!b||Ie.segmentInfoType===m.Z.SEGMENT_TEMPLATE||b&&Ie.segmentInfoType===m.Z.SEGMENT_LIST&&Ie.adaptation.period.nextPeriodId)?!0:!!(b&&Ie.adaptation.period.nextPeriodId&&Ie.segmentInfoType===m.Z.SEGMENT_TIMELINE&&Ie.mediaFinishedInformation&&!isNaN(Ie.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&A&&!isNaN(A.mediaStartTime)&&!isNaN(A.duration)&&A.mediaStartTime+A.duration>=Ie.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Ie,qe){return qe&&qe.segmentInfoType?ot(Ie,qe,A?A.index:0):null},reset:function(){Ce(),Y.off(v.Z.DYNAMIC_TO_STATIC,ct,N)}},_=W.getLogger(N),Ce(),Y.on(v.Z.DYNAMIC_TO_STATIC,ct,N),N}T.__dashjs_factory_name="DashHandler",g.Z=y.Z.getClassFactory(T)},1553:function(R,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&w(y.prototype,v),C}());g.Z=U},7802:function(R,g,w){var U=w(5448),C=w(1724),y=w(3636),v=w(1736),D=w(5246);function m(F){F=F||{};var N,_,A=this.context,b=F.dashConstants,j=F.type,Y=F.segmentBaseController;function W($){return $?$.segments?_[b.SEGMENT_BASE]:_[$.segmentInfoType]:null}return N={initialize:function($){_[b.SEGMENT_TIMELINE]=(0,C.Z)(A).create(F,$),_[b.SEGMENT_TEMPLATE]=(0,y.Z)(A).create(F,$),_[b.SEGMENT_LIST]=(0,v.Z)(A).create(F,$),_[b.SEGMENT_BASE]=(0,D.Z)(A).create(F,$)},updateInitData:function($,se){return se?Promise.resolve():Y.getSegmentBaseInitSegment({representation:$,mediaType:j})},updateSegmentData:function($,se){return se?Promise.resolve():Y.getSegmentList({mimeType:$.mimeType,representation:$,mediaType:j})},getSegmentByIndex:function($,se,x){var X=W($);return X?X.getSegmentByIndex($,se,x):null},getSegmentByTime:function($,se){var x=W($);return x?x.getSegmentByTime($,se):null},getMediaFinishedInformation:function($){var se=W($);return se?se.getMediaFinishedInformation($):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},N}m.__dashjs_factory_name="SegmentsController";var T=U.Z.getClassFactory(m);g.Z=T},1736:function(R,g,w){var U=w(5448),C=w(3393),y=w(7387);function v(m,T){var F=(m=m||{}).timelineConverter;function N(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(A,b){if(N(),!A)return null;var j=A.adaptation.period.mpd.manifest.Period_asArray[A.adaptation.period.index].AdaptationSet_asArray[A.adaptation.index].Representation_asArray[A.index].SegmentList,Y=j.SegmentURL_asArray.length,W=A&&!isNaN(A.startNumber)?A.startNumber:1,$=Math.max(W-1,0),se=Math.max(b-$,0),x=null;if(se<Y){var X=j.SegmentURL_asArray[se];(x=(0,y.NF)(F,T,A,b))&&(x.replacementTime=(W+b-1)*A.segmentDuration,x.media=X.media?X.media:"",x.mediaRange=X.mediaRange,x.indexRange=X.indexRange)}return x}return{getSegmentByIndex:_,getSegmentByTime:function(A,b){if(N(),!A)return null;var j=A.segmentDuration;if(isNaN(j))return null;var Y=F.calcPeriodRelativeTimeFromMpdRelativeTime(A,b);return _(A,Math.floor(Y/j))},getMediaFinishedInformation:function(A){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!A)return b;var j=A.adaptation.period.mpd.manifest.Period_asArray[A.adaptation.period.index].AdaptationSet_asArray[A.adaptation.index].Representation_asArray[A.index].SegmentList,Y=A&&!isNaN(A.startNumber)?A.startNumber:1,W=Math.max(Y-1,0);return b.numberOfSegments=W+j.SegmentURL_asArray.length,b}}}v.__dashjs_factory_name="ListSegmentsGetter";var D=U.Z.getClassFactory(v);g.Z=D},5246:function(R,g,w){var U=w(5448),C=w(3393);function y(D){var m=(D=D||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function F(N,_){if(T(),!N)return null;var A,b=N.segments?N.segments.length:-1;if(_<b&&(A=N.segments[_])&&A.index===_)return A;for(var j=0;j<b;j++)if((A=N.segments[j])&&A.index===_)return A;return null}return{getSegmentByIndex:F,getSegmentByTime:function(N,_){T();var A=function(b,j){if(!b)return-1;var Y,W,$,se,x,X=b.segments,ce=X?X.length:null,oe=-1;if(X&&ce>0){for(x=0;x<ce;x++)if($=(W=X[x]).presentationStartTime,j+(Y=(se=W.duration)/2)>=$&&j-Y<$+se){oe=W.index;break}}return oe}(N,_);return F(N,A)},getMediaFinishedInformation:function(N){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return N&&N.segments&&(_.numberOfSegments=N.segments.length),_}}}y.__dashjs_factory_name="SegmentBaseGetter";var v=U.Z.getClassFactory(y);g.Z=v},7387:function(R,g,w){w.d(g,{Aj:function(){return v},NF:function(){return F},TJ:function(){return N},eR:function(){return y},vi:function(){return D}});var U=w(2011);function C(_,A){for(;_.length<A;)_="0"+_;return _}function y(_){return _&&_.split("$$").join("$")}function v(_,A){if(!A||!_||_.indexOf("$RepresentationID$")===-1)return _;var b=A.toString();return _.split("$RepresentationID$").join(b)}function D(_,A,b){var j,Y,W,$,se,x,X=A.length,ce=2;if(!_)return _;for(;;){if((j=_.indexOf("$"+A))<0||(Y=_.indexOf("$",j+X))<0)return _;if((W=_.indexOf("%0",j+X))>j&&W<Y)switch($=_.charAt(Y-1),se=parseInt(_.substring(W+ce,Y-1),10),$){case"d":case"i":case"u":x=C(b.toString(),se);break;case"x":x=C(b.toString(16),se);break;case"X":x=C(b.toString(16),se).toUpperCase();break;case"o":x=C(b.toString(8),se);break;default:return _}else x=b;_=_.substring(0,j)+x+_.substring(Y+1)}}function m(_,A,b,j,Y,W,$,se){var x,X=new U.Z;return X.representation=_,X.duration=A,X.presentationStartTime=b,X.mediaStartTime=j,X.availabilityStartTime=Y.calcAvailabilityStartTimeFromPresentationTime(W,_,$),X.availabilityEndTime=Y.calcAvailabilityEndTimeFromPresentationTime(W+A,_,$),X.wallStartTime=Y.calcWallTimeForSegment(X,$),X.replacementNumber=(x=se,X.representation.startNumber+x),X.index=se,X}function T(_,A,b,j){var Y=A.adaptation.period;if(isFinite(Y.duration)&&Y.start+Y.duration<=b.presentationStartTime)return!1;if(j){if(A.availabilityTimeOffset==="INF")return!0;var W=_.getClientReferenceTime();return b.availabilityStartTime.getTime()<=W&&(!isFinite(b.availabilityEndTime)||b.availabilityEndTime.getTime()>=W)}return!0}function F(_,A,b,j){var Y,W,$;Y=b.segmentDuration,isNaN(Y)&&(Y=b.adaptation.period.duration),W=parseFloat((b.adaptation.period.start+j*Y).toFixed(5)),$=parseFloat((W+Y).toFixed(5));var se=m(b,Y,W,_.calcMediaTimeFromPresentationTime(W,b),_,$,A,j);return T(_,b,se,A)?se:null}function N(_,A,b,j,Y,W,$,se,x,X){var ce,oe,me=j/W,Ce=Y/W;return ce=_.calcPresentationTimeFromMediaTime(me,b),T(_,b,oe=m(b,Ce,ce,me,_,ce+Ce,A,x),A)?(oe.replacementTime=X||j,$=D($,"Number",oe.replacementNumber),$=D($,"Time",oe.replacementTime),oe.media=$,oe.mediaRange=se,oe):null}},3636:function(R,g,w){var U=w(5448),C=w(3393),y=w(7387);function v(m,T){var F=(m=m||{}).timelineConverter;function N(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(A,b){if(N(),!A)return null;var j=A.adaptation.period.mpd.manifest.Period_asArray[A.adaptation.period.index].AdaptationSet_asArray[A.adaptation.index].Representation_asArray[A.index].SegmentTemplate;b=Math.max(b,0);var Y=(0,y.NF)(F,T,A,b);if(Y){Y.replacementTime=Math.round((b-1)*A.segmentDuration*A.timescale,10);var W=j.media;W=(0,y.vi)(W,"Number",Y.replacementNumber),W=(0,y.vi)(W,"Time",Y.replacementTime),Y.media=W}return Y}return{getSegmentByIndex:_,getSegmentByTime:function(A,b){if(N(),!A)return null;var j=A.segmentDuration;if(isNaN(j))return null;var Y=F.calcPeriodRelativeTimeFromMpdRelativeTime(A,b);return _(A,Math.floor(Y/j))},getMediaFinishedInformation:function(A){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!A)return b;var j=A.segmentDuration;return isNaN(j)?b.numberOfSegments=1:b.numberOfSegments=Math.ceil(A.adaptation.period.duration/j),b}}}v.__dashjs_factory_name="TemplateSegmentsGetter";var D=U.Z.getClassFactory(v);g.Z=D},1724:function(R,g,w){var U=w(5448),C=w(3393),y=w(7387);function v(m,T){var F=(m=m||{}).timelineConverter,N=m.dashMetrics;function _(){if(!F)throw new Error(C.Z.MISSING_CONFIG_ERROR)}function A(j,Y){var W,$,se,x,X,ce,oe,me=j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList,Ce=me.SegmentTimeline,Je=me.SegmentURL_asArray,Te=0,je=-1;oe=j.timescale;var ot=!1;for(se=0,x=(W=Ce.S_asArray).length;se<x&&!ot;se++)for(ce=0,($=W[se]).hasOwnProperty("r")&&(ce=$.r),$.hasOwnProperty("t")&&(Te=$.t),ce<0&&(ce=b(j,W[se+1],$,oe,Te/oe)),X=0;X<=ce&&!ot;X++)(ot=Y(Te,me,Je,$,oe,++je,se))&&(j.segmentDuration=$.d/oe),Te+=$.d}function b(j,Y,W,$,se){var x;if(Y&&Y.hasOwnProperty("t"))x=Y.t/$;else try{var X=0;if(isNaN(j.adaptation.period.start)||isNaN(j.adaptation.period.duration)||!isFinite(j.adaptation.period.duration)){var ce=N.getCurrentDVRInfo();X=isNaN(ce.end)?0:ce.end}else X=j.adaptation.period.start+j.adaptation.period.duration;x=F.calcMediaTimeFromPresentationTime(X,j),j.segmentDuration=W.d/$}catch(oe){x=0}return Math.max(Math.ceil((x-se)/(W.d/$))-1,0)}return{getSegmentByIndex:function(j,Y,W){if(_(),!j)return null;var $=null,se=!1;return A(j,function(x,X,ce,oe,me,Ce,Je){if(se||W<0){var Te=X.media,je=oe.mediaRange;return ce&&(Te=ce[Je].media||"",je=ce[Je].mediaRange),$=(0,y.TJ)(F,T,j,x,oe.d,me,Te,je,Ce,oe.tManifest),!0}return x>=W*me-.5*oe.d&&(se=!0),!1}),$},getSegmentByTime:function(j,Y){if(_(),!j)return null;Y===void 0&&(Y=null);var W=null,$=F.calcMediaTimeFromPresentationTime(Y,j);return A(j,function(se,x,X,ce,oe,me,Ce){var Je=parseFloat(($*oe).toPrecision(15));if(Je<se+ce.d&&Je>=se){var Te=x.media,je=ce.mediaRange;return X&&(Te=X[Ce].media||"",je=X[Ce].mediaRange),W=(0,y.TJ)(F,T,j,se,ce.d,oe,Te,je,me,ce.tManifest),!0}return!1}),W},getMediaFinishedInformation:function(j){if(!j)return 0;var Y,W,$,se,x,X,ce,oe=(j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList).SegmentTimeline,me=0,Ce=0,Je=0;for(ce=j.timescale,se=(Y=oe.S_asArray).length,$=0;$<se;$++)for(X=0,(W=Y[$]).hasOwnProperty("r")&&(X=W.r),W.hasOwnProperty("t")&&(Ce=(me=W.t)/ce),X<0&&(X=b(j,Y[$+1],W,ce,Ce)),x=0;x<=X;x++)Je++,Ce=(me+=W.d)/ce;return{numberOfSegments:Je,mediaTimeOfLastSignaledSegment:Ce}}}}v.__dashjs_factory_name="TimelineSegmentsGetter";var D=U.Z.getClassFactory(v);g.Z=D},2011:function(R,g){g.Z=function w(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(R,g){g.Z=function w(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.schemeIdUri="",this.value=""}},1139:function(R,g,w){w.d(g,{Z:function(){return jm}});var U=w(452),C=w.n(U),y=w(3393),v=w(1553),D=w(3860),m=w(5595),T=w(8512),F=w(5448),N=w(6398),_=w(8825);function A(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,ue=this.context,Q=(0,m.Z)(ue).getInstance();function Pe(){pe(),ge=!1,we=0,Ee=0,Ze=0,Z=!1,$e=!0,_e=!1,le=!1,ke=NaN,Oe=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.off(T.Z.LOADING_PROGRESS,Lt,L),Q.off(T.Z.MANIFEST_UPDATED,Kt,L),Q.off(T.Z.STREAMS_COMPOSED,Ye,L),Q.off(_.Z.PLAYBACK_ENDED,It,L),Q.off(_.Z.STREAM_INITIALIZING,lt,L),Q.off(_.Z.REPRESENTATION_SWITCH,nt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,L),$t(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",xn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",At),H.removeEventListener("seeked",Xt),H.removeEventListener("timeupdate",Gt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",mn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",Nn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),fe=null,H=null,ie=null,ve=null}function be(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((Fe(ze)-ut()).toFixed(5))}function Fe(ze){var Dt=ze||ie;return Dt.start+Dt.duration}function xe(){var ze=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(ze&&ve&&dt(ut()),H.play()):ge=!0}function pe(){ie&&H&&H.pause()}function Ne(ze){var Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(ke)?H.getTime():ke;ze!==sr&&((Ae=fn===!0)||(ke=ze),P.info("Requesting seek to time: "+ze+(Ae?" (internal)":"")),ve&&Tn&&dt(ze),H.setCurrentTime(ze,Dt))}}function Xe(){if(ie&&H&&ve){var ze=B&&B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=ee.getCurrentDVRInfo(ze);return Dt&&Dt.range?Dt.range.end:0}}function dt(ze){var Dt=new Date(re.getClientReferenceTime()),fn=J.getRegularPeriods()[0],Tn=re.calcPresentationTimeFromWallTime(Dt,fn);we=Tn-ze}function ut(){return ie&&H?H.getTime():null}function et(){return ie&&H?H.isPaused():null}function ht(){return ie&&H?H.isSeeking():null}function jt(){return ie&&H?H.isStalled():null}function qt(){return ie&&H?H.getPlaybackRate():null}function Ft(){return ie&&H?H.getEnded():null}function Ut(){return ve}function An(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!et()&&ve&&H.getReadyState()!==0&&!ht()&&!Z){ze||(ze=B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO);var Dt=ut(),fn=it(Dt,ze),Tn=!isNaN(fn)&&fn!==Dt;Tn&&!ht()&&(jt()||Ge||H.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(Dt)),Ne(fn,!1,!1))}}function it(ze,Dt){var fn=ee.getCurrentDVRInfo(Dt),Tn=fn?fn.range:null;return Tn?ze>Tn.end?Math.max(Tn.end-we,Tn.start):ze>0&&ze+.25<Tn.start&&Math.abs(ze-Tn.start)<31536e4?_e?Math.max(Tn.end-we,Tn.start):Tn.start:ze:NaN}function yt(){fe===null&&(fe=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:ve,time:new Date}),Ut()){var ze=Date.now();(isNaN(Oe)||ze>Oe+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),et()?function(){var Dt=Date.now();(!Ke||Dt>Ke+500)&&(Ke=Dt,Gt())}():An(),Oe=ze)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function $t(){clearInterval(fe),fe=null}function Nt(ze){var Dt=J.convertRepresentationToRepresentationInfo(ze.currentRepresentation),fn=Dt?Dt.mediaInfo.streamInfo:null;fn!==null&&ie.id===fn.id&&(ie=fn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Wt(ze){ze.streamId===B.getActiveStreamInfo().id&&(Ge=ze.state===D.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(ze.mediaType,ze.state===D.Z.BUFFER_EMPTY))}function Dn(){P.info("Native video element event: play"),An(),yt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:ut()})}function xn(){P.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:ut()})}function rr(){P.info("Native video element event: playing"),Ae=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:ut()})}function ir(){P.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:Ft()})}function At(){if(!Ae){var ze=ut();isNaN(ke)||ke===ze||(ze=ke),ke=NaN,P.info("Seeking to: "+ze),yt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:ze,streamId:ie.id})}}function Xt(){P.info("Native video element event: seeked"),Ae=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Gt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:be(),time:ut(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function mn(){var ze=qt();P.info("Native video element event: ratechange: ",ze),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:ze})}function Pn(){P.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),yt()}function Nn(){P.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){P.info("Native video element event: ended"),pe(),$t();var ze=B?B.getActiveStreamInfo():null;ze&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:ze.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function It(ze){if(fe&&ze.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Dt=ze.seekTime?ze.seekTime:Fe();H.setCurrentTime(Dt),pe(),$t()}}function Sn(ze){var Dt=ze.target||ze.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Dt.error})}function En(){ve=!1}function Lt(ze){if(ze.stream===!1&&_e&&!isNaN(ze.request.duration)){var Dt=1.2*ze.request.duration;Dt>we&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Dt.toFixed(2)),we=Dt,Ee=Dt)}}function On(ze){Q.trigger(T.Z.PLAYBACK_STALLED,{e:ze})}function lt(ze){var Dt;(Dt=ze.mediaInfo)&&Dt.supplementalProperties&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),_e=!0)}function nt(ze){var Dt=B.getActiveStreamInfo();ze&&Dt&&ze.currentRepresentation&&ze.streamId&&ze.streamId===Dt.id&&ze.mediaType&&(ze.mediaType===y.Z.VIDEO||ze.mediaType===y.Z.AUDIO)&&($e=ze.currentRepresentation.availabilityTimeComplete,(_e=!$e)&&!le&&(le=!0))}function Kt(){Z=!0}function Ye(){Z=!1}return L={initialize:function(ze,Dt){ie=ze,Dt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",xn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",At),H.addEventListener("seeked",Xt),H.addEventListener("timeupdate",Gt),H.addEventListener("progress",un),H.addEventListener("ratechange",mn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",Nn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),ve=ie.manifestInfo.isDynamic,Ge=!1,Ae=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.on(T.Z.LOADING_PROGRESS,Lt,L),Q.on(T.Z.MANIFEST_UPDATED,Kt,L),Q.on(T.Z.STREAMS_COMPOSED,Ye,L),Q.on(_.Z.PLAYBACK_ENDED,It,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,lt,L),Q.on(_.Z.REPRESENTATION_SWITCH,nt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),ge&&(ge=!1,xe()))},setConfig:function(ze){ze&&(ze.streamController&&(B=ze.streamController),ze.serviceDescriptionController&&(V=ze.serviceDescriptionController),ze.dashMetrics&&(ee=ze.dashMetrics),ze.adapter&&(J=ze.adapter),ze.videoModel&&(H=ze.videoModel),ze.timelineConverter&&(re=ze.timelineConverter),ze.settings&&(ae=ze.settings))},getTimeToStreamEnd:be,getBufferLevel:function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Dt=null;return B.getActiveStreamProcessors().forEach(function(fn){if(!ze||ze.length===0||ze.indexOf(fn.getType())===-1){var Tn=fn.getBufferLevel();Dt=Dt===null?Tn:Math.min(Dt,Tn)}}),Dt},getPlaybackStalled:function(){return Ge},getTime:ut,getLowLatencyModeEnabled:function(){return _e},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return Z},getPlaybackRate:qt,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:Ft,getIsDynamic:Ut,getStreamController:function(){return B},computeAndSetLiveDelay:function(ze,Dt){var fn,Tn,sr,Zr=!isNaN(ze)&&isFinite(ze)?ze:NaN,Ai=J.getSuggestedPresentationDelay(),zr=V.getServiceDescriptionSettings();return fn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ai!==null&&!isNaN(Ai)&&Ai>0?Ai:isNaN(Zr)?Dt&&!isNaN(Dt.minBufferTime)?4*Dt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Ze=sr),Tn=Dt&&Dt.dvrWindowSize>0?Math.min(fn,Dt.dvrWindowSize):fn,we=Tn,Ee=Tn,Tn},getLiveDelay:function(){return we},getOriginalLiveDelay:function(){return Ee},getCurrentLiveLatency:function(){if(!ve||isNaN(Ze))return NaN;var ze=ut();if(isNaN(ze)||ze===0)return 0;var Dt=new Date().getTime()+1e3*re.getClientTimeOffset();return Math.max(((Dt-Ze-1e3*ze)/1e3).toFixed(3),0)},play:xe,isPaused:et,isStalled:jt,pause:pe,isSeeking:ht,getStreamEndTime:Fe,seek:Ne,seekToOriginalLive:function(){var ze=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Xe();if(Tn!==0){var sr=Tn-(we=Ee);Ne(sr,ze,Dt,fn)}},seekToCurrentLive:function(){var ze=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Xe();if(Tn!==0){var sr=Tn-we;Ne(sr,ze,Dt,fn)}},reset:Pe,updateCurrentTime:An,getAvailabilityStartTime:function(){return Ze}},P=(0,N.Z)(ue).getInstance().getLogger(L),Pe(),L}A.__dashjs_factory_name="PlaybackController";var b=F.Z.getSingletonFactory(A),j=w(3186),Y="loading",W="executed",$="failed";function se(L){var P,B,V,ee,J=(L=L||{}).eventBus,H=L.events,re=L.dashMetrics,fe=L.fragmentLoader,we=L.debug,Ee=L.streamInfo,ie=L.type;function ve(Z){var le;return!!Z&&(le=!1,V.some(function(ae){if(ue=Z,Q=ae,!isNaN(ue.index)&&ue.startTime===Q.startTime&&ue.adaptationIndex===Q.adaptationIndex&&ue.type===Q.type||function(Pe,be){return isNaN(Pe.index)&&isNaN(be.index)&&Pe.quality===be.quality}(Z,ae)||function(Pe,be){return Pe.action===j.Z.ACTION_COMPLETE&&Pe.action===be.action}(Z,ae))return le=!0;var ue,Q}),le)}function ge(Z){return isNaN(Z.duration)?.25:Math.min(Z.duration/8,.5)}function Ke(Z){V=V.filter(function(le){var ae=ge(le);return isNaN(le.startTime)||Z!==void 0&&le.startTime>=Z-ae})}function Oe(Z,le){le<=Z+.5||(V=V.filter(function(ae){var ue=ge(ae);return isNaN(ae.startTime)||ae.startTime>=le-ue||isNaN(ae.duration)||ae.startTime+ae.duration<=Z+ue}))}function Ze(Z,le,ae){for(var ue=Z.length-1;ue>=0;ue--){var Q=Z[ue],Pe=Q.startTime,be=Pe+Q.duration;if(ae=isNaN(ae)?ge(Q):ae,!isNaN(Pe)&&!isNaN(be)&&le+ae>=Pe&&le-ae<be||isNaN(Pe)&&isNaN(le))return Q}return null}function $e(Z,le){re.addSchedulingInfo(Z,le),re.addRequestsQueue(Z.mediaType,ee,V)}function _e(Z){Z.sender===fe&&(ee.splice(ee.indexOf(Z.request),1),Z.response&&!Z.error&&V.push(Z.request),$e(Z.request,Z.error?$:W),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie}))}function ke(Z){Z.sender===fe&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:Ee.id,mediaType:ie})}function Ae(Z){Z.sender===fe&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:Z.request},{streamId:Ee.id,mediaType:ie})}function Ge(){V=[],ee=[]}return P={getStreamId:function(){return Ee.id},getType:function(){return ie},getRequests:function(Z){var le=Z?Z.state instanceof Array?Z.state:[Z.state]:[],ae=[];return le.forEach(function(ue){var Q=function(Pe){var be;switch(Pe){case Y:be=ee;break;case W:be=V;break;default:be=[]}return be}(ue);ae=ae.concat(function(Pe,be){return be.hasOwnProperty("time")?[Ze(Pe,be.time,be.threshold)]:Pe.filter(function(Fe){for(var xe in be)if(xe!=="state"&&be.hasOwnProperty(xe)&&Fe[xe]!=be[xe])return!1;return!0})}(Q,Z))}),ae},isFragmentLoaded:ve,isFragmentLoadedOrPending:function(Z){var le,ae=!1,ue=0;if(!(ae=ve(Z)))for(ue=0;ue<ee.length;ue++)le=ee[ue],Z.url===le.url&&Z.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:Ke,removeExecutedRequestsAfterTime:function(Z){V=V.filter(function(le){return isNaN(le.startTime)||Z!==void 0&&le.startTime<Z})},syncExecutedRequestsWithBufferedRange:function(Z,le){if(Z&&Z.length!==0){for(var ae=0,ue=0,Q=Z.length;ue<Q;ue++)Oe(ae,Z.start(ue)),ae=Z.end(ue);le>0&&Oe(ae,le)}else Ke()},abortRequests:function(){B.debug("abort requests"),fe.abort(),ee=[]},executeRequest:function(Z){Z.action===j.Z.ACTION_DOWNLOAD?($e(Z,Y),ee.push(Z),function(le){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Ee.id,mediaType:ie}),fe.load(le)}(Z)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,_e,this),J.off(H.LOADING_DATA_PROGRESS,ke,this),J.off(H.LOADING_ABANDONED,Ae,this),fe&&fe.reset(),Ge()},resetInitialSettings:Ge,addExecutedRequest:function(Z){V.push(Z)}},B=we.getLogger(P),Ge(),J.on(H.LOADING_COMPLETED,_e,P),J.on(H.LOADING_DATA_PROGRESS,ke,P),J.on(H.LOADING_ABANDONED,Ae,P),P}se.__dashjs_factory_name="FragmentModel";var x=F.Z.getClassFactory(se);x.FRAGMENT_MODEL_LOADING=Y,x.FRAGMENT_MODEL_EXECUTED=W,x.FRAGMENT_MODEL_CANCELED="canceled",x.FRAGMENT_MODEL_FAILED=$,F.Z.updateClassFactory(se.__dashjs_factory_name,x);var X=x,ce=w(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},oe(L)}function me(L,P){return me=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},me(L,P)}function Ce(L,P){return!P||oe(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Je(L){return Je=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Je(L)}var Te=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&me(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Je(P);if(B){var re=Je(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Ce(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(w(2230).Z)),je=w(1264),ot=w(7855);function ct(L){var P,B,V,ee,J,H,re=this.context,fe=(0,je.Z)(re).getInstance(),we=L.textController,Ee=L.eventBus,ie=[],ve=[],ge=!1,Ke=L.mediaSource,Oe=null;function Ze(Q){return new Promise(function(Pe){ue(function(){ee.changeType&&ee.changeType(Q),Pe()})})}function $e(Q){return ee=we.getTextSourceBuffer(Q),Promise.resolve()}function _e(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",le,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(le,50)}else H=setInterval(le,50)}function ke(Q){return new Promise(function(Pe){ee&&fe.get().streaming.buffer.useAppendWindow?ue(function(){try{if(!ee)return void Pe();var be=Ke.duration,Fe=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(be=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(Fe=Q.start),ee.appendWindowEnd===be&&ee.appendWindowStart===Fe||(ee.appendWindowStart=0,ee.appendWindowEnd=be+.01,ee.appendWindowStart=Math.max(Fe-.1,0),V.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Pe()}catch(xe){V.warn("Failed to set append window"),Pe()}}):Pe()})}function Ae(Q){return new Promise(function(Pe){ee?ue(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,V.debug("Set MSE timestamp offset to ".concat(Q))),Pe()}catch(be){Pe()}}):Pe()})}function Ge(){if(!ge&&ve.length>0){ge=!0;var Q=ve[0];ve.splice(0,1);var Pe=function(){ge=!1,ve.length>0&&Ge.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==ot.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{Oe=Q.request,Q.data.bytes.byteLength===0?Pe.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),ue(Pe.bind(this)))}catch(be){V.fatal('SourceBuffer append failed "'+be+'"'),ve.length>0?Ge():ge=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new ce.Z(be.code,be.message)})}}}function Z(){ie.length>0&&(ee.updating||(ie.shift()(),Z()))}function le(){ee.updating||Z()}function ae(Q){var Pe,be,Fe=Q.target||{};Pe=T.Z.SOURCE_BUFFER_ERROR,be={error:Fe,lastRequestAppended:Oe},Ee.trigger(Pe,be,{streamId:J.streamInfo.id,mediaType:B})}function ue(Q){ie.push(Q),ee.updating||Z()}return P={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return V.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Pe=this,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Fe,xe){Q?(ve.push({data:Q,promise:{resolve:Fe,reject:xe},request:be}),ue(Ge.bind(Pe))):xe({chunk:Q,error:new ce.Z(Te.APPEND_ERROR_CODE,Te.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Pe,be){var Fe=Q.start,xe=Q.end;Fe>=0&&xe>Fe?ue(function(){try{ee.remove(Fe,xe),ue(function(){Pe({from:Fe,to:xe,unintended:!1}),Q.resolve&&Q.resolve()})}catch(pe){be({from:Fe,to:xe,unintended:!1,error:new ce.Z(Te.REMOVE_ERROR_CODE,Te.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(pe)}}):Pe()})},abort:function(){return new Promise(function(Q){try{ve=[],Ke.readyState==="open"?ue(function(){try{ee&&ee.abort(),Q()}catch(Pe){Q()}}):(ee&&ee.setTextTrack&&Ke.readyState==="ended"&&ee.abort(),Q())}catch(Pe){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",le,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){V.error(Q)}}(),ge=!1,ve=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),Ke.removeSourceBuffer(ee))}catch(Q){}ee=null}Oe=null},updateTimestampOffset:Ae,initializeForStreamSwitch:function(Q,Pe,be){B=(J=Q).type;var Fe=J.codec;(function(pe){ee=pe.getBuffer()})(be),_e();var xe=[];return xe.push(new Promise(function(pe){ue(function(){var Ne=ee.appendWindowStart,Xe=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=Ne,ee.appendWindowEnd=Xe),pe()})})),xe.push(ke(J.streamInfo)),fe.get().streaming.buffer.useChangeTypeForTrackSwitch&&xe.push(Ze(Fe)),Pe&&Pe.MSETimeOffset!==void 0&&xe.push(Ae(Pe.MSETimeOffset)),Promise.all(xe)},initializeForFirstUse:function(Q,Pe,be){B=(J=Pe).type;var Fe=J.codec;try{if(Fe.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return $e(Q);ee=Ke.addSourceBuffer(Fe),_e();var xe=[];return xe.push(ke(J.streamInfo)),be&&be.MSETimeOffset!==void 0&&xe.push(Ae(be.MSETimeOffset)),Promise.all(xe)}catch(pe){return J.type==y.Z.TEXT&&!J.isFragmented||Fe.indexOf('codecs="stpp')!==-1||Fe.indexOf('codecs="vtt')!==-1||Fe.indexOf("text/vtt")!==-1?$e(Q):Promise.reject(pe)}},updateAppendWindow:ke,changeType:Ze},V=(0,N.Z)(re).getInstance().getLogger(P),P}ct.__dashjs_factory_name="SourceBufferSink";var Ie=F.Z.getClassFactory(ct);function qe(L){var P,B,V,ee=this.context,J=[],H=L;function re(fe,we){return J=J.filter(function(Ee){return!((isNaN(we)||Ee.start<we)&&(isNaN(fe)||Ee.end>fe))}),Promise.resolve()}return P={getAllBufferRanges:function(){for(var fe=[],we=0;we<J.length;we++){var Ee=J[we];fe.length===0||Ee.start>fe[fe.length-1].end?fe.push({start:Ee.start,end:Ee.end}):fe[fe.length-1].end=Ee.end}var ie={start:function(ve){return fe[ve].start},end:function(ve){return fe[ve].end}};return Object.defineProperty(ie,"length",{get:function(){return fe.length}}),ie},append:function(fe){return fe.segmentType!=="InitializationSegment"?(J.push(fe),J.sort(function(we,Ee){return we.start-Ee.start}),V=null):V=fe,B.debug("PreBufferSink appended chunk s: "+fe.start+"; e: "+fe.end),H&&H({chunk:fe}),Promise.resolve()},remove:re,abort:function(){return Promise.resolve()},discharge:function(fe,we){var Ee=function(ie,ve){return J.filter(function(ge){return(isNaN(ve)||ge.start<ve)&&(isNaN(ie)||ge.end>ie)})}(fe,we);return V&&(Ee.push(V),V=null),re(fe,we),Ee},reset:function(){J=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(fe){fe()},getBuffer:function(){return this}},B=(0,N.Z)(ee).getInstance().getLogger(P),P}qe.__dashjs_factory_name="PreBufferSink";var gt=F.Z.getClassFactory(qe);function Me(){var L={};return{save:function(P){var B=P.streamId,V=P.representationId;L[B]=L[B]||{},L[B][V]=P},extract:function(P,B){return L&&L[P]&&L[P][B]?L[P][B]:null},reset:function(){L={}}}}Me.__dashjs_factory_name="InitCache";var We=F.Z.getSingletonFactory(Me),rt=.01,Ht="BufferController";function kt(L){L=L||{};var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge,Z=this.context,le=(0,m.Z)(Z).getInstance(),ae=L.errHandler,ue=L.fragmentModel,Q=L.representationController,Pe=L.adapter,be=L.textController,Fe=L.abrController,xe=L.playbackController,pe=L.streamInfo,Ne=L.type,Xe=L.settings;function dt(nt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Ye,ze){H=nt,we&&Kt&&typeof we.discharge=="function"?(Ee=we,et(Kt).then(function(){Ye()}).catch(function(Dt){ze(Dt)})):Ye()})}function ut(nt){return Pe.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(nt))}function et(nt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Ye,ze){_e&&nt?H?(ie=!1,jt(nt,Kt).then(function(Dt){Ye(Dt)}).catch(function(Dt){ze(Dt)})):(ie=!0,ht().then(function(Dt){Ye(Dt)}).catch(function(Dt){ze(Dt)})):Ye(null)})}function ht(){var nt=this;return new Promise(function(Kt,Ye){var ze=Fe.getQualityFor(Ne,pe.id);we=gt(Z).create(it.bind(nt)),Pn(ut(ze)).then(function(){Kt(we)}).catch(function(){Ye()})})}function jt(nt,Kt){return new Promise(function(Ye,ze){var Dt=Fe.getQualityFor(Ne,pe.id);we=Ie(Z).create({mediaSource:H,textController:be,eventBus:le}),function(fn,Tn,sr){var Zr=ut(sr);return Tn&&Tn[Ne]&&(Ne===y.Z.VIDEO||Ne===y.Z.AUDIO)?we.initializeForStreamSwitch(fn,Zr,Tn[Ne]):we.initializeForFirstUse(pe,fn,Zr)}(nt,Kt,Dt).then(function(){return Pn(ut(Dt))}).then(function(){Ye(we)}).catch(function(fn){B.fatal("Caught error on create SourceBuffer: "+fn),ae.error(new ce.Z(Te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Ne)),ze(fn)})})}function qt(nt){Xe.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",Ne+"'s init cache"),_e.save(nt.chunk)),B.debug("Append Init fragment",Ne," with representationId:",nt.chunk.representationId," and quality:",nt.chunk.quality,", data size:",nt.chunk.bytes.byteLength),Ut(nt.chunk)}function Ft(nt){Ut(nt.chunk,nt.request)}function Ut(nt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;we&&(we.append(nt,Kt).then(function(Ye){it(Ye)}).catch(function(Ye){it(Ye)}),nt.mediaInfo.type===y.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:nt}))}function An(nt){if(nt&&nt.length>0)for(var Kt=0,Ye=nt.length;Kt<Ye;Kt++)B.debug("Buffered range: "+nt.start(Kt)+" - "+nt.end(Kt)+", currentTime = ",xe.getTime())}function it(nt){if(nt.error)return nt.error.code===22&&function(){if($e=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var ze=Math.max(.2*J,1),Dt=J-ze,fn=Math.min(Xe.get().streaming.buffer.bufferTimeAtTopQuality,.9*Dt),Tn=Math.min(Xe.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Dt),sr={streaming:{buffer:{bufferToKeep:parseFloat(ze.toFixed(5)),bufferTimeAtTopQuality:parseFloat(fn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};Xe.update(sr)}}(),void(nt.error.code!==22&&Lt()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:nt.chunk.start}),Gt(Xt())));if(we&&(Dn(),$e=!1,(Ke=nt.chunk)&&Ke.endFragment)){Ke&&!isNaN(Ke.index)&&(re=Math.max(Ke.index,re),xn());var Kt=we.getAllBufferRanges();Ke.segmentType===ot.w.MEDIA_SEGMENT_TYPE&&(An(Kt),Nt(),function(){if(!isNaN(Ge)&&!ie)if(Ne===y.Z.AUDIO||Ne===y.Z.VIDEO){var ze=xe.getTime(),Dt=Wt(ze,0),fn=Wt(Ge,0);if(Dt&&fn&&Dt.start===fn.start)Ge=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Wt(Ge,Tn);sr&&(Xe.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(ze-Ge)>Tn?Ge<=sr.end&&xe.seek(Math.max(Ge,sr.start),!1,!0):ze<sr.start&&xe.seek(sr.start,!1,!0))}}else Ge=NaN}());var Ye=!1;ve&&(ve.indexOf(Ke)>0&&(Ye=!0),ve=null),Ke&&!Ye&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:Ke.quality,startTime:Ke.start,index:Ke.index,bufferedRanges:Kt,segmentType:Ke.segmentType,mediaType:Ne})}}function yt(){return new Promise(function(nt,Kt){var Ye=$t();if(!Ye||Ye.length===0)return Nt(),void nt();Gt(Ye).then(function(){nt()}).catch(function(ze){Kt(ze)})})}function $t(nt){var Kt=[],Ye=we.getAllBufferRanges();if(!Ye||Ye.length===0)return Kt;if(!nt&&nt!==0||isNaN(nt))Kt.push({start:Ye.start(0),end:Ye.end(Ye.length-1)+.5});else{var ze=function(fn,Tn){var sr=Xe.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(fn-Zr>sr){var Ai=Math.max(0,fn-sr),zr=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:rt})[0];if(zr&&(Ai=Math.min(zr.startTime,Ai)),Ai>0)return{start:Zr,end:Ai}}return null}(nt,Ye),Dt=function(fn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(fn),Ai=pe.manifestInfo.duration>=Xe.get().streaming.buffer.longFormContentDurationThreshold?Xe.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Xe.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?fn:Math.min(Zr,fn+Ai);if(zr>=Tn.end(Tn.length-1))return null;var io=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:rt})[0];if(io&&(zr=Math.max(io.startTime+io.duration,zr)),Xe.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=fn&&fn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var Bs=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+fn+" and range to be pruned ["+Bs+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(nt,Ye);ze&&Kt.push(ze),Dt&&Kt.push(Dt)}return Kt}function Nt(){(!Ae||Ne===y.Z.TEXT&&be.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),Ge=NaN}function Wt(nt,Kt){if(!we)return null;var Ye,ze,Dt=we.getAllBufferRanges(),fn=0,Tn=0,sr=null,Zr=null,Ai=0,zr=isNaN(Kt)?.15:Kt;if(Dt!=null){for(ze=0,Ye=Dt.length;ze<Ye;ze++)if(fn=Dt.start(ze),Tn=Dt.end(ze),sr===null)Ai=Math.abs(fn-nt),(nt>=fn&&nt<Tn||Ai<=zr)&&(sr=fn,Zr=Tn);else{if(!((Ai=fn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(xe){var nt=xe.getTime()||0;ie&&(nt=isNaN(Ge)?0:Ge);var Kt=Xe.get().streaming.gaps.jumpGaps&&!isNaN(Xe.get().streaming.gaps.smallGapLimit)?Xe.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(Ye,ze){var Dt;return Xe.get().streaming.gaps.jumpGaps&&(ze=Xe.get().streaming.gaps.smallGapLimit),(Dt=Wt(Ye,ze))===null?0:Dt.end-Ye}(nt,Kt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:Ne,bufferLevel:ee}),rr()}}function xn(){var nt=re>=fe-1,Kt=xe.getTimeToStreamEnd(pe)-ee<1e-5;!nt&&!Kt||V||(It(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(pe.id," and type ").concat(Ne)))}function rr(){Ne!==y.Z.AUDIO&&Ne!==y.Z.VIDEO||((!xe.getLowLatencyModeEnabled()&&ee<Xe.get().streaming.buffer.stallThreshold||ee===0)&&!V?ir(D.Z.BUFFER_EMPTY):(V||ee>=Xe.get().streaming.buffer.stallThreshold||xe.getLowLatencyModeEnabled()&&ee>0)&&ir(D.Z.BUFFER_LOADED))}function ir(nt){ge===nt||nt===D.Z.BUFFER_EMPTY&&xe.getTime()===0||Ne===y.Z.TEXT&&!be.isTextEnabled()||(ge=nt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:nt}),On(nt===D.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(nt===D.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function At(){we&&Ne!==y.Z.TEXT&&(V||Gt(Xt()))}function Xt(){var nt=[],Kt=we.getAllBufferRanges();if(!Kt||Kt.length===0)return nt;var Ye=xe.getTime(),ze=Math.max(0,Ye-Xe.get().streaming.buffer.bufferToKeep),Dt=ue.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ye,threshold:rt})[0];if(Dt)ze=Math.min(Dt.startTime,ze);else if(Ye===0&&xe.getIsDynamic())return[];if(Kt.start(0)<=ze){for(var fn={start:0,end:ze},Tn=0;Tn<Kt.length&&Kt.end(Tn)<=ze;Tn++)fn.end=Kt.end(Tn);fn.start<fn.end&&nt.push(fn)}return nt}function Gt(nt){return new Promise(function(Kt,Ye){if(nt&&we&&nt.length!==0){var ze=[];nt.forEach(function(Dt){ze.push(function(fn){return new Promise(function(Tn,sr){fn.resolve=Tn,fn.reject=sr,ke.push(fn)})}(Dt))}),Ze||un(),Promise.all(ze).then(function(){Kt()}).catch(function(Dt){Ye(Dt)})}else Kt()})}function un(){try{if(ke.length===0||!we)return B.debug("Nothing to prune, halt pruning"),ke=[],void(Ze=!1);var nt=we.getBuffer();if(!nt||!nt.buffered||nt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),ke=[],void(Ze=!1);var Kt=ke.shift();B.debug("".concat(Ne,": Removing buffer from: ").concat(Kt.start," to ").concat(Kt.end)),Ze=!0,xe.getTime()<Kt.end&&It(!1),we.remove(Kt).then(function(Ye){mn(Ye)}).catch(function(Ye){mn(Ye)})}catch(Ye){Ze=!1}}function mn(nt){B.debug("onRemoved buffer from:",nt.from,"to",nt.to),we&&(An(we.getAllBufferRanges()),ke.length===0&&(Ze=!1,Dn()),nt.unintended&&(B.warn("Detected unintended removal from:",nt.from,"to",nt.to,"setting streamprocessor time to",nt.from),On(T.Z.SEEK_TARGET,{time:nt.from})),Ze?un():(Ae?Ae=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:nt.from,to:nt.to,unintended:nt.unintended,hasEnoughSpaceToAppend:Lt(),quotaExceeded:$e})))}function Pn(nt){return new Promise(function(Kt){nt&&nt.MSETimeOffset!==void 0&&we&&we.updateTimestampOffset?we.updateTimestampOffset(nt.MSETimeOffset).then(function(){Kt()}).catch(function(){Kt()}):Kt()})}function Nn(){return we&&!V?we.updateAppendWindow(pe):Promise.resolve()}function Fn(){++Oe*(Xe.get().streaming.wallclockTimeUpdateInterval/1e3)>=Xe.get().streaming.buffer.bufferPruningInterval&&(Oe=0,At())}function Gn(){rr()}function It(nt){(V=nt)?On(T.Z.BUFFERING_COMPLETED):fe=Number.POSITIVE_INFINITY}function Sn(){try{var nt,Kt,Ye=we.getAllBufferRanges(),ze=0;if(!Ye)return ze;for(Kt=0,nt=Ye.length;Kt<nt;Kt++)ze+=Ye.end(Kt)-Ye.start(Kt);return ze}catch(Dt){return 0}}function En(nt){try{var Kt=nt,Ye=we.getAllBufferRanges();if(!Ye||Ye.length===0)return NaN;for(var ze=0;Kt===nt&&ze<Ye.length;){var Dt=Ye.start(ze),fn=Ye.end(ze);Kt>=Dt&&Kt<=fn&&(Kt=fn),ze+=1}return Kt===nt?NaN:Kt}catch(Tn){}}function Lt(){var nt=Sn();return isNaN(nt)||nt<J}function On(nt,Kt){var Ye=Kt||{};le.trigger(nt,Ye,{streamId:pe.id,mediaType:Ne})}function lt(nt,Kt){if(J=Number.POSITIVE_INFINITY,ge=void 0,fe=Number.POSITIVE_INFINITY,re=0,Ke=null,V=!1,Ze=!1,$e=!1,ee=0,Oe=0,ke=[],Ge=NaN,ie=!1,we){var Ye=we;we=null,nt||Kt||Ye.abort().then(function(){Ye.reset(Kt),Ye=null})}Ae=!1}return P={initialize:function(nt){dt(nt),le.on(T.Z.INIT_FRAGMENT_LOADED,qt,P),le.on(T.Z.MEDIA_FRAGMENT_LOADED,Ft,P),le.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,P),le.on(_.Z.PLAYBACK_PLAYING,Jt,P),le.on(_.Z.PLAYBACK_PROGRESS,Nt,P),le.on(_.Z.PLAYBACK_TIME_UPDATED,Nt,P),le.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,P),le.on(_.Z.PLAYBACK_STALLED,en,P)},getStreamId:function(){return pe.id},getType:function(){return Ne},getBufferControllerType:function(){return Ht},createBufferSink:et,dischargePreBuffer:function(){if(we&&Ee&&typeof Ee.discharge=="function"){var nt=Ee.getAllBufferRanges();if(nt.length>0){for(var Kt="Beginning "+Ne+"PreBuffer discharge, adding buffer for:",Ye=0;Ye<nt.length;Ye++)Kt+=" start: "+nt.start(Ye)+", end: "+nt.end(Ye)+";";B.debug(Kt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");ve=[];for(var ze=Ee.discharge(),Dt=null,fn=0;fn<ze.length;fn++){var Tn=ze[fn];if(Tn.segmentType!==ot.w.INIT_SEGMENT_TYPE){var sr=_e.extract(Tn.streamId,Tn.representationId);sr&&Dt!==sr&&(ve.push(sr),we.append(sr),Dt=sr)}ve.push(Tn),we.append(Tn)}Ee.reset(),Ee=null}},getBuffer:function(){return we},getBufferLevel:function(){return ee},getRangeAt:Wt,hasBufferAtTime:function(nt){try{var Kt=we.getAllBufferRanges();if(!Kt||Kt.length===0)return!1;for(var Ye=0;Ye<Kt.length;){var ze=Kt.start(Ye),Dt=Kt.end(Ye);if(nt>=ze&&nt<=Dt)return!0;Ye+=1}return!1}catch(fn){return B.error(fn),!1}},pruneBuffer:At,setMediaSource:dt,getMediaSource:function(){return H},appendInitSegmentFromCache:function(nt){var Kt=_e.extract(pe.id,nt);return!!Kt&&(B.info("Append Init fragment",Ne," with representationId:",Kt.representationId," and quality:",Kt.quality,", data size:",Kt.bytes.byteLength),Ut(Kt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:It,getIsPruningInProgress:function(){return Ze},reset:function(nt,Kt){le.off(T.Z.INIT_FRAGMENT_LOADED,qt,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,Ft,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),le.off(_.Z.PLAYBACK_PLAYING,Jt,this),le.off(_.Z.PLAYBACK_PROGRESS,Nt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,Nt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),le.off(_.Z.PLAYBACK_STALLED,en,this),lt(nt,Kt)},prepareForPlaybackSeek:function(){return V&&It(!1),we.abort()},prepareForReplacementTrackSwitch:function(nt){return new Promise(function(Kt,Ye){we.abort().then(function(){return Nn()}).then(function(){return Xe.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(nt):Promise.resolve()}).then(function(){return yt()}).then(function(){It(!1),Kt()}).catch(function(ze){Ye(ze)})})},prepareForNonReplacementTrackSwitch:function(nt){return new Promise(function(Kt,Ye){Nn().then(function(){return Xe.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(nt):Promise.resolve()}).then(function(){Kt()}).catch(function(ze){Ye(ze)})})},prepareForForceReplacementQualitySwitch:function(nt){return new Promise(function(Kt,Ye){we.abort().then(function(){return Nn()}).then(function(){return yt()}).then(function(){return Pn(nt)}).then(function(){It(!1),Kt()}).catch(function(ze){Ye(ze)})})},updateAppendWindow:Nn,getAllRangesWithSafetyFactor:$t,getContinuousBufferTimeForTargetTime:En,clearBuffers:Gt,pruneAllSafely:yt,updateBufferTimestampOffset:Pn,setSeekTarget:function(nt){Ge=nt},segmentRequestingCompleted:function(nt){isNaN(nt)||(fe=nt,xn())}},B=(0,N.Z)(Z).getInstance().getLogger(P),_e=We(Z).getInstance(),lt(),P}kt.__dashjs_factory_name=Ht;var mt=F.Z.getClassFactory(kt),Rt="NotFragmentedTextBufferController";function Re(L){L=L||{};var P,B,V,ee,J,H,re=this.context,fe=(0,m.Z)(re).getInstance(),we=L.textController,Ee=L.errHandler,ie=L.streamInfo,ve=L.type;function ge(Ze){ee=Ze}function Ke(Ze){var $e,_e;B!==Ze&&(B=Ze)&&($e=T.Z.BUFFERING_COMPLETED,_e={},fe.trigger($e,_e,{streamId:ie.id,mediaType:ve}))}function Oe(Ze){Ze.chunk.bytes&&!B&&(H.save(Ze.chunk),J.append(Ze.chunk),Ke(!0))}return P={initialize:function(Ze){ge(Ze)},getStreamId:function(){return ie.id},getType:function(){return ve},getBufferControllerType:function(){return Rt},createBufferSink:function(Ze){return new Promise(function($e,_e){try{(J=Ie(re).create({mediaSource:ee,textController:we,eventBus:fe})).initializeForFirstUse(ie,Ze),V||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),V=!0),$e(J)}catch(ke){Ee.error(new ce.Z(Te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+ve)),_e(ke)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ge,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Ze){return H.extract(ie.id,Ze)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:Ke,getIsPruningInProgress:function(){return!1},reset:function(Ze){fe.off(T.Z.INIT_FRAGMENT_LOADED,Oe,P),!Ze&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,ee=null,B=!1,H=We(re).getInstance(),fe.on(T.Z.INIT_FRAGMENT_LOADED,Oe,P),P}Re.__dashjs_factory_name=Rt;var te=F.Z.getClassFactory(Re);function Ue(L){L=L||{};var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke=this.context,Oe=(0,m.Z)(Ke).getInstance(),Ze=L.dashMetrics,$e=L.mediaPlayerModel,_e=L.fragmentModel,ke=L.abrController,Ae=L.playbackController,Ge=L.textController,Z=L.type,le=L.bufferController,ae=L.representationController,ue=L.settings;function Q(){ve=!0}function Pe(){ve=!1}function be(jt){if(!le.getIsBufferingCompleted()){Fe();var qt=isNaN(jt)?0:jt;J=setTimeout(xe,qt)}}function Fe(){J&&(clearTimeout(J),J=null)}function xe(){try{if(function(){try{return Z===y.Z.TEXT&&!Ge.isTextEnabled()||Ae.isPaused()&&(!Ae.getStreamController().getInitialPlayback()||!Ae.getStreamController().getAutoPlay())&&!ue.get().streaming.scheduling.scheduleWhilePaused}catch(Ft){return!1}}())return void Fe();if(function(){try{return!!ve&&ae.getCurrentRepresentationInfo()&&(isNaN(we)||Ee||(Ft=B.id,Ut=ke.getMaxAllowedIndexFor(Z,Ft),!(!isNaN(fe)&&fe==Ut||(V.info("Top quality "+Z+" index has changed from "+fe+" to "+Ut),fe=Ut,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!Z||!An||Ze.getCurrentBufferLevel(Z)<pe()}())}catch(An){return!1}var Ft,Ut}()){var jt=!1;ge&&(jt=ke.checkPlaybackQuality(Z,B.id)),jt||(qt=ae.getCurrentRepresentationInfo(),ie||qt.quality!==we||Ee?(Ee?(V.debug("Switch track for "+Z+", representation id = "+qt.id),Ee=!1):V.debug("Quality has changed, get init request for representationid = "+qt.id),Oe.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:qt.id,sender:P},{streamId:B.id,mediaType:Z}),ge=!1,ie=!1):(V.debug("Media segment needed for ".concat(Z," and stream id ").concat(B.id)),Oe.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:Z}),ge=!0))}else be(Ae.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}catch(Ft){be(Ae.getLowLatencyModeEnabled()?ue.get().streaming.scheduling.lowLatencyTimeout:ue.get().streaming.scheduling.defaultTimeout)}var qt}function pe(){var jt=NaN,qt=ae.getCurrentRepresentationInfo();return Z&&qt&&(jt=Z===y.Z.TEXT?function(){try{if(Ge.isTextEnabled()){var Ft=ae.getCurrentRepresentationInfo();if(isNaN(Ft.fragmentDuration)){var Ut=Ze.getCurrentSchedulingInfo(D.Z.SCHEDULING_INFO);return Ut?Ut.duration:0}return Ft.fragmentDuration}return 0}catch(An){return 0}}():Z===y.Z.AUDIO&&H?function(){try{var Ft=Ze.getCurrentBufferLevel(y.Z.VIDEO),Ut=ae.getCurrentRepresentationInfo();return isNaN(Ut.fragmentDuration)?Ft+1:Math.max(Ft+1,Ut.fragmentDuration)}catch(An){return 0}}():function(){try{var Ft=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ke.isPlayingAtTopQuality(Ft)?Ft.manifestInfo.duration>=ue.get().streaming.buffer.longFormContentDurationThreshold?ue.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ue.get().streaming.buffer.bufferTimeAtTopQuality:$e.getStableBufferTime()}catch(Ut){return $e.getStableBufferTime()}}()),jt}function Ne(){Xe(!0)}function Xe(jt){if(Ae&&_e){var qt=_e.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ae.getTime(),threshold:0})[0];qt&&Ae.getTime()>=qt.startTime&&((!re.mediaInfo||qt.mediaInfo.type===re.mediaInfo.type&&qt.mediaInfo.index!==re.mediaInfo.index)&&jt&&Oe.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:Z,oldMediaInfo:re.mediaInfo,newMediaInfo:qt.mediaInfo,streamId:B.id}),qt.quality===re.quality&&qt.adaptationIndex===re.adaptationIndex||!jt||(V.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(Z)),Oe.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:Z,oldQuality:re.quality,newQuality:qt.quality,streamId:B.id})),re={mediaInfo:qt.mediaInfo,quality:qt.quality,adaptationIndex:qt.adaptationIndex})}}function dt(){_e.abortRequests(),Fe()}function ut(){ue.get().streaming.scheduling.scheduleWhilePaused||be()}function et(jt){Ze.updatePlayListTraceMetrics({playbackspeed:jt.playbackRate.toString()})}function ht(){ge=!0,ee=0,we=NaN,re={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},fe=NaN,Ee=!1,ie=!1,ve=!0}return P={initialize:function(jt){H=jt,Oe.on(T.Z.URL_RESOLUTION_FAILED,dt,P),Oe.on(_.Z.PLAYBACK_STARTED,ut,P),Oe.on(_.Z.PLAYBACK_RATE_CHANGED,et,P),Oe.on(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,P)},getType:function(){return Z},getStreamId:function(){return B.id},setTimeToLoadDelay:function(jt){ee=jt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(jt){Ee=jt},getSwitchTrack:function(){return Ee},startScheduleTimer:be,clearScheduleTimer:Fe,reset:function(){Oe.off(T.Z.URL_RESOLUTION_FAILED,dt,P),Oe.off(_.Z.PLAYBACK_STARTED,ut,P),Oe.off(_.Z.PLAYBACK_RATE_CHANGED,et,P),Oe.off(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,P),Fe(),Xe(!1),ht(),B=null},getBufferTarget:pe,getPlaybackController:function(){return Ae},setCheckPlaybackQuality:function(jt){ge=jt},setInitSegmentRequired:function(jt){ie=jt},setLastInitializedQuality:function(jt){we=jt}},V=(0,N.Z)(Ke).getInstance().getLogger(P),ht(),B=L.streamInfo,P}Ue.__dashjs_factory_name="ScheduleController";var O=F.Z.getClassFactory(Ue),M=w(7387);function q(L){var P,B,V,ee,J,H,re=(L=L||{}).eventBus,fe=L.events,we=L.abrController,Ee=L.dashMetrics,ie=L.playbackController,ve=L.timelineConverter,ge=L.type,Ke=L.streamInfo,Oe=L.dashConstants,Ze=L.segmentsController,$e=L.isDynamic,_e=L.adapter;function ke(){return ge}function Ae(){return V}function Ge(){return H}function Z(){B=null,V=!0,ee=[],J=null}function le(Fe){return new Promise(function(xe,pe){var Ne=Fe.hasInitialization(),Xe=Fe.hasSegments(),dt=[];dt.push(Ze.updateInitData(Fe,Ne)),dt.push(Ze.updateSegmentData(Fe,Xe)),Promise.all(dt).then(function(ut){var et;ut[0]&&!ut[0].error&&(Fe=function(ht,jt){return jt&&!jt.error&&jt.representation?jt.representation:ht}(Fe,ut[0])),ut[1]&&!ut[1].error&&(Fe=function(ht,jt){if(jt&&!jt.error){var qt,Ft,Ut,An,it=jt.segments,yt=[],$t=0;for(qt=0,Ft=it?it.length:0;qt<Ft;qt++)Ut=it[qt],(An=(0,M.TJ)(ve,$e,ht,Ut.startTime,Ut.duration,Ut.timescale,Ut.media,Ut.mediaRange,$t))&&(yt.push(An),An=null,$t++);return yt.length>0&&(ht.segments=yt),ht}}(Fe,ut[1])),(et=Fe).mediaFinishedInformation=Ze.getMediaFinishedInformation(et),function(ht){if(Ae()){var jt,qt,Ft=Ee.getCurrentManifestUpdate(),Ut=!1;if(Ft){for(var An=0;An<Ft.representationInfo.length;An++)if((jt=Ft.representationInfo[An]).index===ht.index&&jt.mediaType===ke()){Ut=!0;break}Ut||Ee.addManifestUpdateRepresentationInfo(ht,ke())}if(function(){for(var yt=0,$t=ee.length;yt<$t;yt++){var Nt=ee[yt].segmentInfoType;if(!ee[yt].hasInitialization()||(Nt===Oe.SEGMENT_BASE||Nt===Oe.BASE_URL)&&!ee[yt].segments)return!1}return!0}()){we.setPlaybackQuality(ge,Ke,(qt=H,ee.indexOf(qt)));var it=Ee.getCurrentDVRInfo(ge);it&&Ee.updateManifestUpdateInfo({latency:it.range.end-ie.getTime()}),Ee.getCurrentRepresentationSwitch(Ge().adaptation.type)||ae(),Q()}}}(Fe),xe()}).catch(function(ut){pe(ut)})})}function ae(){(function(){if(!(we&&Ee&&ie&&ve))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Fe=new Date,xe=Ge(),pe=1e3*ie.getTime();xe&&Ee.addRepresentationSwitch(xe.adaptation.type,Fe,pe,xe.id),re.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:ge,streamId:Ke.id,currentRepresentation:xe,numberOfRepresentations:ee.length},{streamId:Ke.id,mediaType:ge})}function ue(Fe){return Fe==null||Fe>=ee.length?null:ee[Fe]}function Q(Fe){V=!1,re.trigger(fe.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:Fe},{streamId:Ke.id,mediaType:ge})}function Pe(Fe){H=Fe,J=_e.convertRepresentationToRepresentationInfo(H)}function be(Fe){if(Fe.newDuration){var xe=Ge();xe&&xe.adaptation.period&&(xe.adaptation.period.duration=Fe.newDuration)}}return P={getStreamId:function(){return Ke.id},getType:ke,getData:function(){return B},isUpdating:Ae,updateData:function(Fe,xe,pe,Ne,Xe){return new Promise(function(dt,ut){if(V=!0,ee=xe,B=Fe,Pe(ue(Xe)),pe!==y.Z.VIDEO&&pe!==y.Z.AUDIO&&(pe!==y.Z.TEXT||!Ne))return Q(),void dt();for(var et=[],ht=0,jt=ee.length;ht<jt;ht++){var qt=ee[ht];et.push(le(qt))}Promise.all(et).then(function(){Pe(ue(Xe)),dt()}).catch(function(Ft){ut(Ft)})})},getCurrentRepresentation:Ge,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:ue,prepareQualityChange:function(Fe){Pe(ue(Fe)),ae()},reset:function(){re.off(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),Z()}},Z(),re.on(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),P}q.__dashjs_factory_name="RepresentationController";var K=F.Z.getClassFactory(q),he=w(3106),de=w(9326),Ve=w(7473),St=w(2594);function st(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var at=function L(){st(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};at.INITIAL_PLAYOUT_START_REASON="initial_playout",at.SEEK_START_REASON="seek",at.RESUME_FROM_PAUSE_START_REASON="resume",at.METRICS_COLLECTION_START_REASON="metrics_collection_start";var tt=function L(){st(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};tt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",tt.REBUFFERING_REASON="rebuffering",tt.USER_REQUEST_STOP_REASON="user_request",tt.END_OF_PERIOD_STOP_REASON="end_of_period",tt.END_OF_CONTENT_STOP_REASON="end_of_content",tt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",tt.FAILURE_STOP_REASON="failure";var ft=w(7802);function Et(){return{ntpToUTC:function(L){var P=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(P.getTime()+L).getTime()}}}Et.__dashjs_factory_name="TimeUtils";var Tt=F.Z.getSingletonFactory(Et);function Ct(L){L=L||{};var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze=this.context,$e=(0,m.Z)(Ze).getInstance(),_e=L.streamInfo,ke=L.type,Ae=L.errHandler,Ge=L.mimeType,Z=L.timelineConverter,le=L.adapter,ae=L.manifestModel,ue=L.mediaPlayerModel,Q=L.fragmentModel,Pe=L.abrController,be=L.playbackController,Fe=L.mediaController,xe=L.textController,pe=L.dashMetrics,Ne=L.settings,Xe=L.boxParser,dt=L.segmentBlacklistController;function ut(){return _e.id}function et(){return ke}function ht(){return le.getIsTextTrack(fe.getData())}function jt(){J=[],ee=null,Ke=0,we=!1,Ee=!1,ie=!1,Oe=null}function qt(lt){return!isNaN(lt)&&!isNaN(_e.duration)&&isFinite(_e.duration)&&lt>=_e.start+_e.duration}function Ft(lt){var nt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(lt.sender){if(be.getIsManifestUpdateInProgress())$t();else if((!ht()||xe.isTextEnabled())&&H&&lt.representationId&&!H.appendInitSegmentFromCache(lt.representationId)){var Kt=fe.getCurrentRepresentation();if(Kt.range===0)return void Ut();var Ye=ve?ve.getInitRequest(ee,Kt):null;Ye?Q.executeRequest(Ye):nt&&(re.setInitSegmentRequired(!0),$t())}}}function Ut(lt){var nt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(be.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())$t();else{var Kt=yt();Kt?(we=!1,Ee=!1,An(Kt)):it(nt)}}function An(lt){isNaN(lt.startTime+lt.duration)||(Ke=lt.startTime+lt.duration),lt.delayLoadingTime=new Date().getTime()+re.getTimeToLoadDelay(),re.setTimeToLoadDelay(0),function(nt){var Kt=nt.url;return nt.range&&(Kt=Kt.concat("_",nt.range)),dt.contains(Kt)}(lt)?(B.warn("Fragment request url ".concat(lt.url," for stream id ").concat(_e.id," and media type ").concat(ke," is on the ignore list and will be skipped")),$t()):(B.debug("Next fragment request url for stream id ".concat(_e.id," and media type ").concat(ke," is ").concat(lt.url)),Q.executeRequest(lt))}function it(lt){var nt,Kt=fe.getCurrentRepresentation();if(!Ne.get().streaming.gaps.enableSeekFix||!we&&be.getTime()!==0||(V?V&&Kt.segmentInfoType===v.Z.SEGMENT_TIMELINE&&(nt=ve.getValidTimeAheadOfTargetTime(Ke,ee,Kt,Ne.get().streaming.gaps.threshold)):nt=ve.getValidTimeAheadOfTargetTime(Ke,ee,Kt,Ne.get().streaming.gaps.threshold),isNaN(nt)||nt===Ke)){if(ve.isLastSegmentRequested(Kt,Ke)){var Ye=ve.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(_e.id," has finished")),$e.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Ye},{streamId:_e.id,mediaType:ke}),H.segmentRequestingCompleted(Ye),void re.clearScheduleTimer()}lt&&$t()}else be.isSeeking()||be.getTime()===0?(B.warn("Adjusting playback time ".concat(nt," because of gap in the manifest. Seeking by ").concat(nt-Ke)),be.seek(nt,!1,!1)):(B.warn("Adjusting buffering time ".concat(nt," because of gap in the manifest. Adjusting time by ").concat(nt-Ke)),On(nt),lt&&$t())}function yt(){var lt,nt=Nn();if(isNaN(Ke)||et()===y.Z.TEXT&&!xe.isTextEnabled())return null;if(ve){var Kt=fe&&nt?fe.getRepresentationForQuality(nt.quality):null;lt=we?ve.getSegmentRequestForTime(ee,Kt,Ke):Ee?ve.repeatSegmentRequest(ee,Kt):ve.getNextSegmentRequest(ee,Kt)}return lt}function $t(){re.startScheduleTimer(be.getLowLatencyModeEnabled()?Ne.get().streaming.scheduling.lowLatencyTimeout:Ne.get().streaming.scheduling.defaultTimeout)}function Nt(lt){lt.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(lt.currentRepresentation)}function en(lt){pe.addBufferState(ke,lt.state,re.getBufferTarget()),lt.state!==D.Z.BUFFER_EMPTY||be.isSeeking()||(B.info("Buffer is empty! Stalling!"),pe.pushPlayListTraceMetrics(new Date,tt.REBUFFERING_REASON))}function Jt(lt){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),_e.duration),lt.quotaExceeded&&lt.from>be.getTime()&&On(lt.from),lt.hasEnoughSpaceToAppend&&lt.quotaExceeded&&re.startScheduleTimer()}function Wt(lt){if(lt&&lt.lastRequestAppended&&lt.lastRequestAppended.url){var nt=lt.lastRequestAppended.url;lt.lastRequestAppended.range&&(nt=nt.concat("_",lt.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(nt)),dt.add(nt)}}function Dn(lt){if(B.debug("Appended bytes for ".concat(lt.mediaType," and stream id ").concat(lt.streamId)),lt.segmentType===ot.w.INIT_SEGMENT_TYPE){var nt=lt.quality;re.setLastInitializedQuality(nt),B.info("["+ke+"] lastInitializedRepresentationInfo changed to "+lt.quality)}Oe?xn(Oe):re.startScheduleTimer(0)}function xn(lt){var nt=Q.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(nt&&nt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Oe=lt);H.updateBufferTimestampOffset(lt).then(function(){re.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?re.startScheduleTimer():En(),Oe=null,ie=!1}).catch(function(){Oe=null,ie=!1})}function rr(lt){B.info("onFragmentLoadingAbandoned request: "+lt.request.url+" has been aborted"),be.isSeeking()||re.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+lt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),lt.request&&lt.request.isInitializationRequest()?re.setInitSegmentRequired(!0):On(lt.request.startTime+lt.request.duration/2),re.startScheduleTimer(0))}function ir(lt){B.info("OnFragmentLoadingCompleted for stream id "+_e.id+" and media type "+ke+" - Url:",lt.request?lt.request.url:"undefined",lt.request.range?", Range:"+lt.request.range:""),ht()&&re.startScheduleTimer(0),lt.error&&lt.request.serviceLocation&&function(nt){B.info("Fragment loading completed with an error"),nt&&nt.request&&nt.request.type&&(nt.request.type===ot.w.INIT_SEGMENT_TYPE?Ft({representationId:nt.request.representationId,sender:{}},!1):nt.request.type===ot.w.MEDIA_SEGMENT_TYPE&&(On(nt.request.startTime+nt.request.duration/2),Ut({},!1)))}(lt)}function At(){On(be.getTime()),Pn().startScheduleTimer()}function Xt(lt){var nt=lt.currentTrackInfo;if(nt){var Kt=J.find(function(Ye){return Ye.index===nt.index&&Ye.lang===nt.lang});Kt&&mn(Kt).then(function(){H.setIsBufferingCompleted(!1),On(be.getTime()),re.setInitSegmentRequired(!0),re.startScheduleTimer()})}}function Gt(lt){On(lt.quotaExceededTime),re.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function mn(lt){lt===ee||lt&&ee&&lt.type!==ee.type||(ee=lt);var nt=le.getRealAdaptation(_e,ee),Kt=le.getVoRepresentations(ee);if(fe){var Ye,ze=fe.getData(),Dt=Pe.getMaxAllowedIndexFor(ke,_e.id),fn=Pe.getMinAllowedIndexFor(ke,_e.id),Tn=null;return ze!==null&&ze.id===nt.id||ke===y.Z.TEXT?Ye=Pe.getQualityFor(ke,_e.id):(Tn=Pe.getThroughputHistory().getAverageThroughput(ke,V)||Pe.getInitialBitrateFor(ke,_e.id),Ye=Pe.getQualityForBitrate(ee,Tn,_e.id)),fn!==void 0&&Ye<fn&&(Ye=fn),Ye>Dt&&(Ye=Dt),fe.updateData(nt,Kt,ke,ee.isFragmented,Ye)}return Promise.resolve()}function Pn(){return re}function Nn(lt){var nt;return lt!==void 0?((0,he.SE)(lt),nt=fe?fe.getRepresentationForQuality(lt):null):nt=fe?fe.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(nt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(lt){if(Ne.get().streaming.enableManifestTimescaleMismatchFix){var nt=lt.chunk,Kt=nt.bytes,Ye=Nn(nt.quality),ze=fe&&Ye?fe.getRepresentationForQuality(Ye.quality):null;Ye&&ze&&(ze.timescale=Xe.getMediaTimescaleFromMoov(Kt))}}function It(lt){var nt=lt.chunk,Kt=nt.bytes,Ye=nt.quality,ze=Nn(Ye),Dt=fe&&ze?fe.getRepresentationForQuality(ze.quality):null;if(ze&&Dt){var fn;if(Ne.get().streaming.parseInbandPrft&&lt.request.type===ot.w.MEDIA_SEGMENT_TYPE){var Tn=function(io,Zi){var Bs=io.getBoxes("prft"),Qu=[];return Bs.forEach(function(Ju){Qu.push(function($a,js){var Po="unknown";switch($a.flags){case 0:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var Eu=1e3*$a.ntp_timestamp_sec+$a.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Po,ntpTimestamp:Eu=Tt(Ze).getInstance().ntpToUTC(Eu),mediaTime:$a.media_time/js}}(Ju,Zi))}),Qu}(fn=fn||Xe.parse(Kt),Dt.timescale);Tn&&Tn.length&&$e.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:_e.id,mediaType:ke})}var sr=le.getEventsFor(ze.mediaInfo,null,_e),Zr=le.getEventsFor(ze,Dt,_e);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ai=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:Ye,index:nt.index})[0],zr=function(io,Zi,Bs,Qu){try{for(var Ju={},$a=[],js=Bs.concat(Qu),Po=0,Eu=js.length;Po<Eu;Po++)Ju[js[Po].schemeIdUri+"/"+js[Po].value]=js[Po];var _u=io.getBoxes("emsg");if(!_u||_u.length===0)return $a;for(var ca=io.getBox("sidx"),Uc=!ca||isNaN(ca.earliest_presentation_time)||isNaN(ca.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:ca.earliest_presentation_time/ca.timescale,Wf=Math.max(Uc,0),el=fe.getCurrentRepresentation(),Xa=0,Bc=_u.length;Xa<Bc;Xa++){var Zs=le.getEvent(_u[Xa],Ju,Wf,el);Zs&&$a.push(Zs)}return $a}catch(Pt){return[]}}(fn=fn||Xe.parse(Kt),Ai,sr,Zr);$e.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:_e.id})}}}function Sn(){var lt=be.getTime();Ne.get().streaming.buffer.flushBufferAtTrackSwitch&&be.seek(lt+.001,!1,!0),On(lt),H.setSeekTarget(lt),re.startScheduleTimer()}function En(){var lt=be.getTime(),nt=H.getContinuousBufferTimeForTargetTime(lt);On(isNaN(nt)?lt:nt),re.startScheduleTimer()}function Lt(lt){lt&&!isNaN(lt.time)&&(On(lt.time),H.setSeekTarget(lt.time))}function On(lt){Ke=lt,we=!0}return P={initialize:function(lt,nt,Kt){ge=(0,ft.Z)(Ze).create({events:T.Z,eventBus:$e,streamInfo:_e,timelineConverter:Z,dashConstants:v.Z,segmentBaseController:L.segmentBaseController,type:ke}),ve=(0,de.Z)(Ze).create({streamInfo:_e,type:ke,timelineConverter:Z,dashMetrics:pe,mediaPlayerModel:ue,baseURLController:L.baseURLController,errHandler:Ae,segmentsController:ge,settings:Ne,boxParser:Xe,events:T.Z,eventBus:$e,errors:Te,debug:(0,N.Z)(Ze).getInstance(),requestModifier:(0,Ve.Z)(Ze).getInstance(),dashConstants:v.Z,constants:y.Z,urlUtils:(0,St.Z)(Ze).getInstance()}),V=_e.manifestInfo.isDynamic,ve.initialize(V),Pe.registerStreamType(ke,P),fe=K(Ze).create({streamInfo:_e,type:ke,abrController:Pe,dashMetrics:pe,playbackController:be,timelineConverter:Z,dashConstants:v.Z,events:T.Z,eventBus:$e,errors:Te,isDynamic:V,adapter:le,segmentsController:ge}),H=function(Ye,ze){return Ye?Ye!==y.Z.TEXT||ze?mt(Ze).create({streamInfo:_e,type:Ye,mediaPlayerModel:ue,manifestModel:ae,fragmentModel:Q,errHandler:Ae,mediaController:Fe,representationController:fe,adapter:le,textController:xe,abrController:Pe,playbackController:be,settings:Ne}):te(Ze).create({streamInfo:_e,type:Ye,mimeType:Ge,fragmentModel:Q,textController:xe,errHandler:Ae,settings:Ne}):(Ae.error(new ce.Z(Te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ke,Kt),H&&H.initialize(lt),(re=O(Ze).create({streamInfo:_e,type:ke,mimeType:Ge,adapter:le,dashMetrics:pe,mediaPlayerModel:ue,fragmentModel:Q,abrController:Pe,playbackController:be,textController:xe,mediaController:Fe,bufferController:H,representationController:fe,settings:Ne})).initialize(nt),Ke=0,we=!1,Ee=!1},getStreamId:ut,getType:et,isUpdating:function(){return!!fe&&fe.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return fe},getRepresentationInfo:Nn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(lt){var nt=un();return nt?Promise.resolve(nt):H?H.createBufferSink(ee,lt):Promise.resolve(null)},updateStreamInfo:function(lt){return _e=lt,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return _e},selectMediaInfo:mn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(lt){J.indexOf(lt)===-1&&J.push(lt)},prepareTrackSwitch:function(){return new Promise(function(lt){B.debug("Preparing track switch for type ".concat(ke));var nt=ke===y.Z.TEXT||Ne.get().streaming.trackSwitchMode[ke]===y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&be.getTimeToStreamEnd(_e)>Ne.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!nt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){$e.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:ke})}).catch(function(){$e.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:_e.id,mediaType:ke})}),void lt();re.clearScheduleTimer(),re.setSwitchTrack(!0),nt?($e.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:_e.id},{mediaType:ke,streamId:_e.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var Kt=Nn();return H.updateBufferTimestampOffset(Kt)}).then(function(){Sn(),lt()}).catch(function(){Sn(),lt()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),lt()}).catch(function(){En(),lt()})})},prepareQualityChange:function(lt){Oe&&B.warn("Canceling queued representation switch to ".concat(Oe.quality," for ").concat(ke)),B.debug("Preparing quality switch for type ".concat(ke));var nt=lt.newQuality;ie=!0,re.clearScheduleTimer(),fe.prepareQualityChange(nt);var Kt=Nn(nt);lt.reason&&lt.reason.forceReplace?function(Ye){Q.abortRequests(),$e.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:_e.id},{mediaType:ke,streamId:_e.id}),re.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(Ye).then(function(){Sn(),Oe=null,ie=!1}).catch(function(){Sn(),Oe=null,ie=!1})}(Kt):lt&&lt.reason&&lt.reason.forceAbandon?function(Ye){H.updateBufferTimestampOffset(Ye).then(function(){Q.abortRequests(),Ee=!0,re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1,Oe=null}).catch(function(){Oe=null,ie=!1})}(Kt):Ne.get().streaming.buffer.fastSwitchEnabled?function(Ye){var ze=be.getTime(),Dt=1.5*(isNaN(Ye.fragmentDuration)?1:Ye.fragmentDuration),fn=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:ze+Dt,threshold:0})[0];if(fn&&!ht()){var Tn=H.getBufferLevel(),sr=Pe.getAbandonmentStateFor(_e.id,ke);fn.quality<Ye.quality&&Tn>=Dt&&sr!==D.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(Ye).then(function(){Q.abortRequests(),On(ze+Dt),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):xn(Ye)}else xn(Ye)}(Kt):xn(Kt),pe.pushPlayListTraceMetrics(new Date,tt.REPRESENTATION_SWITCH_STOP_REASON),pe.createPlaylistTraceMetrics(Kt.id,1e3*be.getTime(),be.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(lt){return H.setMediaSource(lt,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(lt,nt){pe.pushPlayListTraceMetrics(lt,nt)},probeNextRequest:function(){var lt=Nn(),nt=fe&&lt?fe.getRepresentationForQuality(lt.quality):null;return ve.getNextSegmentRequestIdempotent(ee,nt)},prepareInnerPeriodPlaybackSeeking:function(lt){return new Promise(function(nt){if(H.hasBufferAtTime(lt.seekTime))return H.pruneBuffer(),qt(H.getContinuousBufferTimeForTargetTime(lt.seekTime))&&H.setIsBufferingCompleted(!0),void nt();re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var Kt=H.getAllRangesWithSafetyFactor(lt.seekTime);return H.clearBuffers(Kt)}).then(function(){var Kt=H.getContinuousBufferTimeForTargetTime(lt.seekTime);if(qt(Kt))H.setIsBufferingCompleted(!0),nt();else{var Ye=isNaN(Kt)?lt.seekTime:Kt;On(Ye),H.setSeekTarget(Ye);var ze=[];ze.push(H.updateAppendWindow());var Dt=Nn();ze.push(H.updateBufferTimestampOffset(Dt)),Promise.all(ze).then(function(){re.setInitSegmentRequired(!0),re.setCheckPlaybackQuality(!1),re.startScheduleTimer(),nt()})}}).catch(function(Kt){B.error(Kt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(lt,nt){try{re.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){lt()})}catch(Kt){nt(Kt)}})},reset:function(lt,nt){ve&&ve.reset(),H&&(H.reset(lt,nt),H=null),re&&(re.reset(),re=null),fe&&(fe.reset(),fe=null),ge&&(ge=null),Pe&&Pe.unRegisterStreamType(ut(),ke),$e.off(T.Z.DATA_UPDATE_COMPLETED,Nt,P),$e.off(T.Z.INIT_FRAGMENT_NEEDED,Ft,P),$e.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ut,P),$e.off(T.Z.INIT_FRAGMENT_LOADED,Gn,P),$e.off(T.Z.MEDIA_FRAGMENT_LOADED,It,P),$e.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),$e.off(T.Z.BUFFER_CLEARED,Jt,P),$e.off(T.Z.SEEK_TARGET,Lt,P),$e.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),$e.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),$e.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,At,P),$e.off(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,P),$e.off(T.Z.QUOTA_EXCEEDED,Gt,P),$e.off(T.Z.SOURCE_BUFFER_ERROR,Wt,P),$e.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),jt(),ke=null,_e=null}},B=(0,N.Z)(Ze).getInstance().getLogger(P),jt(),$e.on(T.Z.DATA_UPDATE_COMPLETED,Nt,P,{priority:m.Z.EVENT_PRIORITY_HIGH}),$e.on(T.Z.INIT_FRAGMENT_NEEDED,Ft,P),$e.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ut,P),$e.on(T.Z.INIT_FRAGMENT_LOADED,Gn,P),$e.on(T.Z.MEDIA_FRAGMENT_LOADED,It,P),$e.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),$e.on(T.Z.BUFFER_CLEARED,Jt,P),$e.on(T.Z.SEEK_TARGET,Lt,P),$e.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),$e.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),$e.on(T.Z.QUOTA_EXCEEDED,Gt,P),$e.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,At,P),$e.on(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,P),$e.on(T.Z.SOURCE_BUFFER_ERROR,Wt,P),$e.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),P}Ct.__dashjs_factory_name="StreamProcessor";var hn=F.Z.getClassFactory(Ct),Qt=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=w(9032);function Ot(L,P){if(L){if(typeof L=="string")return Un(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,P):void 0}}function Un(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function gr(L){L=L||{};var P,B,V=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,re=(0,je.Z)(V).getInstance();function fe(ie){var ve,ge=new Date,Ke=ie.request,Oe=new Headers;if(Ke.range&&Oe.append("Range","bytes="+Ke.range),ie.headers)for(var Ze in ie.headers){var $e=ie.headers[Ze];$e&&Oe.append(Ze,$e)}Ke.requestStartDate||(Ke.requestStartDate=ge),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(Z,le){Oe.append(Z,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(ve=new AbortController,ie.abortController=ve,ve.signal.onabort=ie.onabort);var _e={method:ie.method,headers:Oe,credentials:ie.withCredentials?"include":void 0,signal:ve?ve.signal:void 0},ke=re.get().streaming.abr.fetchThroughputCalculationMode,Ae=Date.now(),Ge=0;new Promise(function(Z){if(ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(Ge=J.getThroughputCapacityDelayMS(Ke,1e3*B.getCurrentBufferLevel(Ke.mediaType))))return setTimeout(Z,Ge);Z()}).then(function(){var Z=Date.now();fetch(ie.url,_e).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,ue="",Q=function(Nt,en){var Jt;if(typeof Symbol>"u"||Nt[Symbol.iterator]==null){if(Array.isArray(Nt)||(Jt=Ot(Nt))){Jt&&(Nt=Jt);var Wt=0,Dn=function(){};return{s:Dn,n:function(){return Wt>=Nt.length?{done:!0}:{done:!1,value:Nt[Wt++]}},e:function(At){throw At},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var xn,rr=!0,ir=!1;return{s:function(){Jt=Nt[Symbol.iterator]()},n:function(){var At=Jt.next();return rr=At.done,At},e:function(At){ir=!0,xn=At},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw xn}}}}(le.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Pe=ae.value;ue+=Pe+": "+le.headers.get(Pe)+"\r\n"}}catch(Nt){Q.e(Nt)}finally{Q.f()}if(ie.response.responseHeaders=ue,!le.body)return le.arrayBuffer().then(function(Nt){ie.response.response=Nt;var en={loaded:Nt.byteLength,total:Nt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var be,Fe,xe,pe,Ne=parseInt(le.headers.get("Content-Length"),10),Xe=0,dt=!1,ut=new Uint8Array,et=0;if(ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var ht=Z,jt=0,qt=(xe=le.body.tee(),pe=2,function(Nt){if(Array.isArray(Nt))return Nt}(xe)||function(Nt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(Nt)){var Jt=[],Wt=!0,Dn=!1,xn=void 0;try{for(var rr,ir=Nt[Symbol.iterator]();!(Wt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Wt=!0);}catch(At){Dn=!0,xn=At}finally{try{Wt||ir.return==null||ir.return()}finally{if(Dn)throw xn}}return Jt}}(xe,pe)||Ot(xe,pe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Ft=qt[0],Ut=qt[1];be=Ft.getReader(),Fe=[],be.read().then(function Nt(en){var Jt=en.value,Wt=en.done;if(jt=Date.now(),Jt&&Jt.length){var Dn=jt-ht,xn=Jt.length;Fe.push({chunkDownloadTimeRelativeMS:jt-Z,chunkDownloadDurationMS:Dn,chunkBytes:xn,kbps:Math.round(8*xn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(Ke.mediaType)})}if(Wt){var rr=jt-Z,ir=Fe.reduce(function(At,Xt){return At+Xt.chunkBytes},0);return J.addMeasurement(Ke,rr,Fe,Ae,Ge,ue),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(Ke),stream:!0})}return ht=Date.now(),be.read().then(Nt)}),ie.reader=Ut.getReader()}else ie.reader=le.body.getReader();var An=[],it=[],yt=[],$t=!0;we(ie,function Nt(en){var Jt=en.value;if(en.done){if(ut){if(ke!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Wt=null,Dn=null;ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Wt=function(At,Xt){try{var Gt,un;Gt=At.filter(function(Sn,En){return En<At.length-1}),un=Xt.filter(function(Sn,En){return En<Xt.length-1});var mn=[];if(Gt.length>1){for(var Pn=0,Nn=0,Fn=0;Fn<Gt.length;Fn++)if(Gt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Gt[Fn].ts;if(Gn>1)mn.push(8*un[Fn].bytes/Gn),Nn=0;else{Nn===0&&(Nn=Gt[Fn].ts,Pn=0);var It=un[Fn].ts-Nn;It>1?(Pn+=un[Fn].bytes,mn.push(8*Pn/It),Nn=0):Pn+=un[Fn].bytes}}if(mn.length>0)return mn.reduce(function(Sn,En){return Sn+En},0)/mn.length}return null}catch(Sn){return null}}(it,yt),Wt&&(Dn=8*Xe/Wt)):ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=Ee(An,Xe)),ie.progress({loaded:Xe,total:isNaN(Ne)?Xe:Ne,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=ut.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){ut=function(At,Xt){if(At.length===0)return Xt;var Gt=new Uint8Array(At.length+Xt.length);return Gt.set(At),Gt.set(Xt,At.length),Gt}(ut,Jt),Xe+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&$t&&H.findLastTopIsoBoxCompleted(["moof"],ut,et).found&&($t=!1,it.push({ts:performance.now(),bytes:Jt.length}));var xn=H.findLastTopIsoBoxCompleted(["moov","mdat"],ut,et);if(xn.found){var rr,ir=xn.lastCompletedOffset+xn.size;ke!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||$t||($t=!0,yt.push({ts:performance.now(),bytes:ut.length})),ir===ut.length?(rr=ut,ut=new Uint8Array):(rr=new Uint8Array(ut.subarray(0,ir)),ut=ut.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),et=0}else et=xn.lastCompletedOffset,dt||(ie.progress({lengthComputable:!1,noTrace:!0}),dt=!0)}we(ie,Nt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function we(ie,ve){ie.reader.read().then(ve).catch(function(ge){ie.onerror&&ie.response.status===200&&ie.onerror(ge)})}function Ee(ie,ve){try{if((ie=ie.filter(function(Oe){return Oe.bytes>ve/4/ie.length})).length>1){var ge=0,Ke=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(Oe,Ze){var $e=ie[Ze+1];if($e){var _e=$e.ts-Oe.ts;ge+=_e<Ke?_e:0}}),ge}return null}catch(Oe){return null}}return P={load:function(ie){ee&&ee.modifyRequest?(0,Ve.k)(ie,ee).then(function(){return fe(ie)}):fe(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(ve){}},calculateDownloadedTime:Ee,setup:function(ie){B=ie.dashMetrics}},P}gr.__dashjs_factory_name="FetchLoader";var Or=F.Z.getClassFactory(gr),dr=w(1180);function ei(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ji=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var P,B;return P=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==v.Z.BASE_URL&&this.segmentInfoType!==v.Z.SEGMENT_BASE&&!this.indexRange}}])&&ei(P.prototype,B),L}(),Lr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},eo=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};eo.DEFAULT_ID="defaultId";var _i=eo,Mi=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=w(2610),to=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ti=function L(P,B,V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||P||"",this.dvbPriority=V||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ti.DEFAULT_DVB_PRIORITY=1,Ti.DEFAULT_DVB_WEIGHT=1;var Qn=Ti,Pu=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var wt=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var P,B;return P=L,(B=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[v.Z.DVB_URL]&&(this.dvbUrl=V[v.Z.DVB_URL]),V[v.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[v.Z.DVB_MIMETYPE]),V[v.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[v.Z.DVB_FONTFAMILY])),this}}])&&an(P.prototype,B),L}(),Yt=w(3101),Mt=w.n(Yt);function zt(){return{areEqual:function(L,P){return Mt()(L,P)}}}zt.__dashjs_factory_name="ObjectUtils";var gn=F.Z.getSingletonFactory(zt),In=w(7803),Zn=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.queryParams={}},Cn=function L(P,B,V){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.ttl=V||NaN,this.queryParams={}};function Rn(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function on(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Rn(Object(B),!0).forEach(function(V){Bn(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bn(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function kn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){re=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function er(L,P){if(L){if(typeof L=="string")return Er(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,P):void 0}}function Er(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Ur(){var L,P,B,V,ee=this.context,J=(0,St.Z)(ee).getInstance(),H=Number.isInteger||function(Z){return typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z};function re(Z,le){if(!Z)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(Z.Representation_asArray&&Z.Representation_asArray.length){var ae=Ze(Z.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return le===y.Z.IMAGE}if(Z.ContentComponent_asArray&&Z.ContentComponent_asArray.length>0){if(Z.ContentComponent_asArray.length>1)return le===y.Z.MUXED;if(Z.ContentComponent_asArray[0].contentType===le)return!0}var ue=le===y.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(Z.Representation_asArray&&Z.Representation_asArray.length){var Q=Z.Representation_asArray[0].codecs;if(ue.test(Q))return!0}if(Z.hasOwnProperty(v.Z.MIME_TYPE))return ue.test(Z.mimeType);if(Z.Representation_asArray){for(var Pe,be=0;be<Z.Representation_asArray.length;be++)if((Pe=Z.Representation_asArray[be]).hasOwnProperty(v.Z.MIME_TYPE))return ue.test(Pe.mimeType)}return!1}function fe(Z){if(!Z)throw new Error("adaptation is not defined");if(Z.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||Z.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||Z.hasOwnProperty(v.Z.SEGMENT_LIST)||Z.hasOwnProperty(v.Z.SEGMENT_BASE))return!0;if(Z.Representation_asArray&&Z.Representation_asArray.length>0){var le=Z.Representation_asArray[0];if(le.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(v.Z.SEGMENT_LIST)||le.hasOwnProperty(v.Z.SEGMENT_BASE))return!0}return!1}function we(Z){return re(Z,y.Z.VIDEO)}function Ee(Z){return re(Z,y.Z.TEXT)}function ie(Z){return re(Z,y.Z.IMAGE)}function ve(Z){return Z&&Array.isArray(Z.Representation_asArray)&&Z.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),Z}function ge(Z,le){return Z&&Z.Period_asArray&&H(le)&&Z.Period_asArray[le]?Z.Period_asArray[le].AdaptationSet_asArray:[]}function Ke(Z){return Z&&Z.Period_asArray?Z.Period_asArray:[]}function Oe(Z){var le=!1;return Z&&Z.hasOwnProperty("type")&&(le=Z.type===v.Z.DYNAMIC),le}function Ze(Z){return Z&&Z.EssentialProperty_asArray&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function $e(Z){if(!Z||!Z.S_asArray)return NaN;var le=Z.S_asArray[0],ae=Z.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function _e(Z,le){if(!Z)throw new Error("Period cannot be null or undefined");var ae=_i.DEFAULT_ID+"_"+le;return Z.hasOwnProperty(v.Z.ID)&&Z.id.length>0&&Z.id!=="__proto__"&&(ae=Z.id),ae}function ke(Z,le,ae){var ue,Q=[];if(!Z)return Q;for(ue=0;ue<Z.length;ue++){var Pe=new Pu;if(Pe.timescale=1,Pe.representation=le,!Z[ue].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Pe.schemeIdUri=Z[ue].schemeIdUri,Z[ue].hasOwnProperty(v.Z.TIMESCALE)&&(Pe.timescale=Z[ue].timescale),Z[ue].hasOwnProperty(v.Z.VALUE)&&(Pe.value=Z[ue].value),Q.push(Pe),Pe.period=ae}return Q}function Ae(Z){var le=[],ae=Z.BaseURL_asArray||[Z.baseUri],ue=!1;return ae.some(function(Q){if(Q){var Pe=new Qn,be=Q.__text||Q;return J.isRelative(be)&&(ue=!0,Z.baseUri&&(be=J.resolve(be,Z.baseUri))),Pe.url=be,Q.hasOwnProperty(v.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Pe.serviceLocation=Q.serviceLocation:Pe.serviceLocation=be,Q.hasOwnProperty(v.Z.DVB_PRIORITY)&&(Pe.dvbPriority=Q[v.Z.DVB_PRIORITY]),Q.hasOwnProperty(v.Z.DVB_WEIGHT)&&(Pe.dvbWeight=Q[v.Z.DVB_WEIGHT]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)&&(Pe.availabilityTimeOffset=Q[v.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)&&(Pe.availabilityTimeComplete=Q[v.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(Pe),ue}}),le}function Ge(Z){var le=new sn;return le.serverUrl=Z.__text,Z.hasOwnProperty(v.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=Z[v.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),Z.hasOwnProperty(v.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=Z[v.Z.QUERY_BEFORE_START].toLowerCase()==="true"),Z.hasOwnProperty(v.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=Z[v.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return L={getIsTypeOf:re,getIsText:Ee,getIsFragmented:fe,getProducerReferenceTimesForAdaptation:function(Z){var le=Z&&Z.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)?Z[v.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(Z&&Z.hasOwnProperty(v.Z.REPRESENTATION_ASARRAY)?Z[v.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(ue){var Q;ue.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(Pe){if(Array.isArray(Pe))return Er(Pe)}(Q=ue[v.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Pe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Pe))return Array.from(Pe)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(ue){var Q=new tn;ue.hasOwnProperty(v.Z.ID)&&(Q[v.Z.ID]=ue[v.Z.ID],ue.hasOwnProperty(v.Z.WALL_CLOCK_TIME)&&(Q[v.Z.WALL_CLOCK_TIME]=ue[v.Z.WALL_CLOCK_TIME],ue.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(Q[v.Z.PRESENTATION_TIME]=ue[v.Z.PRESENTATION_TIME],ue.hasOwnProperty(v.Z.INBAND)&&(Q[v.Z.INBAND]=ue[v.Z.INBAND]!=="false"),ue.hasOwnProperty(v.Z.TYPE)&&(Q[v.Z.TYPE]=ue[v.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(Z){var le="";return Z&&Z.hasOwnProperty(v.Z.LANG)&&(le=Z.lang),le},getViewpointForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.VIEWPOINT_ASARRAY)&&Z[v.Z.VIEWPOINT_ASARRAY].length?Z[v.Z.VIEWPOINT_ASARRAY].map(function(le){return new wt().init(le)}):[]},getRolesForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ROLE_ASARRAY)&&Z[v.Z.ROLE_ASARRAY].length?Z[v.Z.ROLE_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAccessibilityForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ACCESSIBILITY_ASARRAY)&&Z[v.Z.ACCESSIBILITY_ASARRAY].length?Z[v.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAdaptationForIndex:function(Z,le,ae){var ue=ge(le,ae);return ue.length>0&&H(Z)?ue[Z]:null},getIndexForAdaptation:function(Z,le,ae){if(!Z)return-1;for(var ue=ge(le,ae),Q=0;Q<ue.length;Q++)if(gn(ee).getInstance().areEqual(ue[Q],Z))return Q;return-1},getAdaptationForId:function(Z,le,ae){var ue,Q,Pe=ge(le,ae);for(ue=0,Q=Pe.length;ue<Q;ue++)if(Pe[ue].hasOwnProperty(v.Z.ID)&&Pe[ue].id===Z)return Pe[ue];return null},getAdaptationsForType:function(Z,le,ae){var ue,Q,Pe=ge(Z,le),be=[];for(ue=0,Q=Pe.length;ue<Q;ue++)re(Pe[ue],ae)&&be.push(ve(Pe[ue]));return be},getRealPeriods:Ke,getRealPeriodForIndex:function(Z,le){var ae=Ke(le);return ae.length>0&&H(Z)?ae[Z]:null},getCodec:function(Z,le,ae){var ue=null;if(Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0){var Q=H(le)&&le>=0&&le<Z.Representation_asArray.length?Z.Representation_asArray[le]:Z.Representation_asArray[0];Q&&(ue=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(ue+=';width="'+Q.width+'";height="'+Q.height+'"'))}return ue&&(ue=ue.replace(/\sprofiles=[^;]*/g,"")),ue},getSelectionPriority:function(Z){try{var le=Z&&Z.selectionPriority!==void 0?parseInt(Z.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(Z){return Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0?Z.Representation_asArray[0].mimeType:null},getKID:function(Z){return Z&&Z.hasOwnProperty(v.Z.CENC_DEFAULT_KID)?Z[v.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(Z){if(!Z||!Array.isArray(Z.Label_asArray))return[];for(var le=[],ae=0;ae<Z.Label_asArray.length;ae++)le.push({lang:Z.Label_asArray[ae].lang,text:Z.Label_asArray[ae].__text||Z.Label_asArray[ae]});return le},getContentProtectionData:function(Z){return Z&&Z.hasOwnProperty(v.Z.CONTENTPROTECTION_ASARRAY)&&Z.ContentProtection_asArray.length!==0?Z.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function(Z){return Z&&Z[v.Z.ID]||null},hasProfile:function(Z,le){var ae=!1;return Z&&Z.profiles&&Z.profiles.length>0&&(ae=Z.profiles.indexOf(le)!==-1),ae},getDuration:function(Z){return Z&&Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)?Z.mediaPresentationDuration:Z&&Z.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(Z){return Z&&Z.bandwidth?Z.bandwidth:NaN},getManifestUpdatePeriod:function(Z){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return Z&&Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ae=Z.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(Z[v.Z.PUBLISH_TIME]):null},getRepresentationCount:function(Z){return Z&&Array.isArray(Z.Representation_asArray)?Z.Representation_asArray.length:0},getBitrateListForAdaptation:function(Z){var le=ve(Z);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(Z,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(Z)?le.Representation_asArray[Z]:null},getRepresentationsForAdaptation:function(Z){var le,ae,ue,Q,Pe=[],be=function(ut){if(ut&&ut.period&&H(ut.period.index)){var et=ut.period.mpd.manifest.Period_asArray[ut.period.index];if(et&&et.AdaptationSet_asArray&&H(ut.index))return ve(et.AdaptationSet_asArray[ut.index])}}(Z);if(be&&be.Representation_asArray){if(Z&&Z.period&&H(Z.period.index)){var Fe=Ae(Z.period.mpd.manifest);Fe&&(ae=Fe[0])}for(var xe=0,pe=be.Representation_asArray.length;xe<pe;++xe){var Ne=be.Representation_asArray[xe],Xe=new Ji;if(Xe.index=xe,Xe.adaptation=Z,Ne.hasOwnProperty(v.Z.ID)&&(Xe.id=Ne.id),Ne.hasOwnProperty(v.Z.CODECS)&&(Xe.codecs=Ne.codecs),Ne.hasOwnProperty(v.Z.MIME_TYPE)&&(Xe.mimeType=Ne[v.Z.MIME_TYPE]),Ne.hasOwnProperty(v.Z.CODEC_PRIVATE_DATA)&&(Xe.codecPrivateData=Ne.codecPrivateData),Ne.hasOwnProperty(v.Z.BANDWITH)&&(Xe.bandwidth=Ne.bandwidth),Ne.hasOwnProperty(v.Z.WIDTH)&&(Xe.width=Ne.width),Ne.hasOwnProperty(v.Z.HEIGHT)&&(Xe.height=Ne.height),Ne.hasOwnProperty(v.Z.SCAN_TYPE)&&(Xe.scanType=Ne.scanType),Ne.hasOwnProperty(v.Z.MAX_PLAYOUT_RATE)&&(Xe.maxPlayoutRate=Ne.maxPlayoutRate),Ne.hasOwnProperty(v.Z.SEGMENT_BASE)?(le=Ne.SegmentBase,Xe.segmentInfoType=v.Z.SEGMENT_BASE):Ne.hasOwnProperty(v.Z.SEGMENT_LIST)?(le=Ne.SegmentList).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Xe.segmentInfoType=v.Z.SEGMENT_TIMELINE:Xe.segmentInfoType=v.Z.SEGMENT_LIST:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)?((le=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Xe.segmentInfoType=v.Z.SEGMENT_TIMELINE:Xe.segmentInfoType=v.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(v.Z.INITIALIZATION_MINUS)&&(Xe.initialization=le.initialization.split("$Bandwidth$").join(Ne.bandwidth).split("$RepresentationID$").join(Ne.id))):Xe.segmentInfoType=v.Z.BASE_URL,Xe.essentialProperties=Ze(Ne),le){if(le.hasOwnProperty(v.Z.INITIALIZATION)){var dt=le.Initialization;dt.hasOwnProperty(v.Z.SOURCE_URL)&&(Xe.initialization=dt.sourceURL),dt.hasOwnProperty(v.Z.RANGE)&&(Xe.range=dt.range)}else Ee(be)&&fe(be)&&be.mimeType&&be.mimeType.indexOf("application/mp4")===-1&&(Xe.range=0);le.hasOwnProperty(v.Z.TIMESCALE)&&(Xe.timescale=le.timescale),le.hasOwnProperty(v.Z.DURATION)?Xe.segmentDuration=le.duration/Xe.timescale:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)&&(le=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)&&(Xe.segmentDuration=$e(le.SegmentTimeline)/Xe.timescale),le.hasOwnProperty(v.Z.MEDIA)&&(Xe.media=le.media),le.hasOwnProperty(v.Z.START_NUMBER)&&(Xe.startNumber=le.startNumber),le.hasOwnProperty(v.Z.INDEX_RANGE)&&(Xe.indexRange=le.indexRange),le.hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Xe.presentationTimeOffset=le.presentationTimeOffset/Xe.timescale),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)?Xe.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(Xe.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)?Xe.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(Xe.availabilityTimeComplete=ae.availabilityTimeComplete)}Xe.MSETimeOffset=(Q=(ue=Xe).presentationTimeOffset,ue.adaptation.period.start-Q),Xe.path=[Z.period.index,Z.index,xe],Pe.push(Xe)}}return Pe},getAdaptationsForPeriod:function(Z){var le,ae,ue,Q=Z&&H(Z.index)?Z.mpd.manifest.Period_asArray[Z.index]:null,Pe=[];if(Q&&Q.AdaptationSet_asArray)for(ue=0;ue<Q.AdaptationSet_asArray.length;ue++)ae=Q.AdaptationSet_asArray[ue],le=new Lr,ae.hasOwnProperty(v.Z.ID)&&(le.id=ae.id),le.index=ue,le.period=Z,re(ae,y.Z.MUXED)?le.type=y.Z.MUXED:re(ae,y.Z.AUDIO)?le.type=y.Z.AUDIO:we(ae)?le.type=y.Z.VIDEO:Ee(ae)?le.type=y.Z.TEXT:ie(ae)?le.type=y.Z.IMAGE:P.warn("Unknown Adaptation stream type"),Pe.push(le);return Pe},getRegularPeriods:function(Z){var le,ae,ue=!!Z&&Oe(Z.manifest),Q=[],Pe=null,be=null,Fe=null,xe=null;for(ae=0,le=Z&&Z.manifest&&Z.manifest.Period_asArray?Z.manifest.Period_asArray.length:0;ae<le;ae++)(be=Z.manifest.Period_asArray[ae]).hasOwnProperty(v.Z.START)?(xe=new _i).start=be.start:Pe!==null&&Pe.hasOwnProperty(v.Z.DURATION)&&Fe!==null?(xe=new _i).start=parseFloat((Fe.start+Fe.duration).toFixed(5)):ae!==0||ue||((xe=new _i).start=0),Fe!==null&&isNaN(Fe.duration)&&(xe!==null?Fe.duration=parseFloat((xe.start-Fe.start).toFixed(5)):P.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),xe!==null&&(xe.id=_e(be,ae),xe.index=ae,xe.mpd=Z,be.hasOwnProperty(v.Z.DURATION)&&(xe.duration=be.duration),Fe&&(Fe.nextPeriodId=xe.id),Q.push(xe),Pe=be,Fe=xe),be=null,xe=null;return Q.length===0||Fe!==null&&isNaN(Fe.duration)&&(Fe.duration=parseFloat((function(pe){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Ne,Xe=Oe(pe.mpd.manifest);return pe.mpd.manifest.mediaPresentationDuration?Ne=pe.mpd.manifest.mediaPresentationDuration:pe.duration?Ne=pe.duration:Xe?Ne=Number.POSITIVE_INFINITY:B.error(new ce.Z(Te.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),Ne}(Fe)-Fe.start).toFixed(5))),Q},getMpd:function(Z){var le=new Mi;return Z&&(le.manifest=Z,Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(Z.availabilityStartTime.getTime()):Z.loadedTime&&(le.availabilityStartTime=new Date(Z.loadedTime.getTime())),Z.hasOwnProperty(v.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(Z.availabilityEndTime.getTime())),Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=Z.minimumUpdatePeriod),Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=Z.mediaPresentationDuration),Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=Z.suggestedPresentationDelay),Z.hasOwnProperty(v.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=Z.timeShiftBufferDepth),Z.hasOwnProperty(v.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=Z.maxSegmentDuration),Z.hasOwnProperty(v.Z.PUBLISH_TIME)&&(le.publishTime=new Date(Z.publishTime))),le},getEventsForPeriod:function(Z){var le,ae,ue=Z&&Z.mpd&&Z.mpd.manifest?Z.mpd.manifest:null,Q=ue?ue.Period_asArray:null,Pe=Q&&Z&&H(Z.index)?Q[Z.index].EventStream_asArray:null,be=[];if(Pe)for(le=0;le<Pe.length;le++){var Fe=new Pu;if(Fe.period=Z,Fe.timescale=1,!Pe[le].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(Fe.schemeIdUri=Pe[le][y.Z.SCHEME_ID_URI],Pe[le].hasOwnProperty(v.Z.TIMESCALE)&&(Fe.timescale=Pe[le][v.Z.TIMESCALE]),Pe[le].hasOwnProperty(v.Z.VALUE)&&(Fe.value=Pe[le][v.Z.VALUE]),Pe[le].hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Fe.presentationTimeOffset=Pe[le][v.Z.PRESENTATION_TIME_OFFSET]),ae=0;Pe[le].Event_asArray&&ae<Pe[le].Event_asArray.length;ae++){var xe=Pe[le].Event_asArray[ae],pe=new to;pe.presentationTime=0,pe.eventStream=Fe,xe.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(pe.presentationTime=xe.presentationTime);var Ne=Fe.presentationTimeOffset?Fe.presentationTimeOffset/Fe.timescale:0;pe.calculatedPresentationTime=pe.presentationTime/Fe.timescale+Z.start-Ne,xe.hasOwnProperty(v.Z.DURATION)&&(pe.duration=xe.duration/Fe.timescale),xe.hasOwnProperty(v.Z.ID)?pe.id=xe.id:pe.id=null,xe.Signal&&xe.Signal.Binary?pe.messageData=V.decodeArray(xe.Signal.Binary.toString()):pe.messageData=xe.messageData||xe.__cdata||xe.__text,be.push(pe)}}return be},getEssentialPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,ue=kn(Z.EssentialProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return new wt().init(le)}):[]},getEssentialPropertiesForRepresentation:Ze,getEventStreamForAdaptationSet:function(Z,le,ae){var ue,Q,Pe;return Z&&Z.Period_asArray&&le&&le.period&&H(le.period.index)&&(Q=Z.Period_asArray[le.period.index])&&Q.AdaptationSet_asArray&&H(le.index)&&(Pe=Q.AdaptationSet_asArray[le.index])&&(ue=Pe.InbandEventStream_asArray),ke(ue,null,ae)},getEventStreamForRepresentation:function(Z,le,ae){var ue,Q,Pe,be;return Z&&Z.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(Q=Z.Period_asArray[le.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(le.adaptation.index)&&(Pe=Q.AdaptationSet_asArray[le.adaptation.index])&&Pe.Representation_asArray&&H(le.index)&&(be=Pe.Representation_asArray[le.index])&&(ue=be.InbandEventStream_asArray),ke(ue,le,ae)},getUTCTimingSources:function(Z){var le=Oe(Z),ae=!!Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME),ue=Z?Z.UTCTiming_asArray:null,Q=[];return(le||ae)&&ue&&ue.forEach(function(Pe){var be=new zi.Z;Pe.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(be.schemeIdUri=Pe.schemeIdUri,Pe.hasOwnProperty(v.Z.VALUE)&&(be.value=Pe.value.toString(),Q.push(be)))}),Q},getBaseURLsFromElement:Ae,getRepresentationSortFunction:function(){return function(Z,le){return Z.bandwidth-le.bandwidth}},getContentSteering:function(Z){if(Z&&Z.hasOwnProperty(v.Z.CONTENT_STEERING_AS_ARRAY))return Ge(Z[v.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.LOCATION_AS_ARRAY)?Z[v.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null;return new Zn(ae,ue)}):[]},getPatchLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.PATCH_LOCATION_AS_ARRAY)?Z[v.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,ue=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null,Q=le.hasOwnProperty(v.Z.TTL)?1e3*parseFloat(le[v.Z.TTL]):NaN;return new Cn(ae,ue,Q)}):[]},getSuggestedPresentationDelay:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)?Z.suggestedPresentationDelay:null},getAvailabilityStartTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)&&Z.availabilityStartTime!==null?Z.availabilityStartTime.getTime():null},getServiceDescriptions:function(Z){var le=[];if(Z&&Z.hasOwnProperty(v.Z.SERVICE_DESCRIPTION)){var ae,ue=kn(Z.ServiceDescription_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value,Pe=null,be=null,Fe=null,xe=null,pe=null,Ne=null,Xe=null;for(var dt in Q)Q.hasOwnProperty(dt)&&(dt===v.Z.ID?Pe=Q[dt]:dt===v.Z.SERVICE_DESCRIPTION_SCOPE?be=Q[dt].schemeIdUri:dt===v.Z.SERVICE_DESCRIPTION_LATENCY?Fe={target:parseInt(Q[dt].target),max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),referenceId:parseInt(Q[dt].referenceId)}:dt===v.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?xe={max:parseFloat(Q[dt].max),min:parseFloat(Q[dt].min)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?pe={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target),type:Q[dt].type,maxQualityDifference:parseInt(Q[dt].maxQualityDifference)}:dt===v.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Ne={mediaType:Q[dt].mediaType,max:parseInt(Q[dt].max),min:parseInt(Q[dt].min),target:parseInt(Q[dt].target)}:dt===v.Z.CONTENT_STEERING&&(Xe=Ge(Q[dt])));le.push({id:Pe,schemeIdUri:be,latency:Fe,playbackRate:xe,operatingQuality:pe,operatingBandwidth:Ne,contentSteering:Xe})}}catch(ut){ue.e(ut)}finally{ue.f()}}return le},getSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SEGMENT_ALIGNMENT))&&Z[v.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SUB_SEGMENT_ALIGNMENT))&&Z[v.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=kn(Z.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new wt().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,ue=kn(Z.SupplementalProperty_asArray);try{for(ue.s();!(ae=ue.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new wt().init(le)}):[]},setConfig:function(Z){Z&&(Z.errHandler&&(B=Z.errHandler),Z.BASE64&&(V=Z.BASE64))}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Vn=F.Z.getSingletonFactory(Ur),rn=w(703);function cn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(fe,we){if(fe){if(typeof fe=="string")return bn(fe,we);var Ee=Object.prototype.toString.call(fe).slice(8,-1);return Ee==="Object"&&fe.constructor&&(Ee=fe.constructor.name),Ee==="Map"||Ee==="Set"?Array.from(fe):Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee)?bn(fe,we):void 0}}(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(fe){throw fe},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,re=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var fe=B.next();return H=fe.done,fe},e:function(fe){re=!0,J=fe},f:function(){try{H||B.return==null||B.return()}finally{if(re)throw J}}}}function bn(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Jn(){var L,P,B,V,ee,J,H,re,fe,we,Ee=this.context,ie=(0,m.Z)(Ee).getInstance(),ve=(0,je.Z)(Ee).getInstance();function ge(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},fe={},re={},we={},Oe()}function Ke(){Oe()}function Oe(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Pe=Q.getActiveStream();Pe&&(H=Pe.getProcessors())}}}function Ze(Q,Pe){var be,Fe={},xe=cn(Pe);try{for(xe.s();!(be=xe.n()).done;){var pe=be.value;Q[pe]&&(Fe[pe]=Q[pe])}}catch(Ne){xe.e(Ne)}finally{xe.f()}return Fe}function $e(Q){var Pe=ve.get().streaming.cmcd.enabledKeys;return Q.filter(function(be){return Pe.includes(be)})}function _e(Q){try{return Q.type===ot.w.MPD_TYPE?((be=ke()).ot="m",be):Q.type===ot.w.MEDIA_SEGMENT_TYPE?(Pe=Q.mediaType,we.hasOwnProperty(Pe)||(we[Pe]=!1),re.hasOwnProperty(Pe)||(re[Pe]=!1),fe.hasOwnProperty(Pe)||(fe[Pe]=!1),function(Fe){var xe,pe=ke(),Ne=function(Ut){try{var An=Ut.quality,it=Ut.mediaInfo.bitrateList;return parseInt(it[An].bandwidth/1e3)}catch(yt){return null}}(Fe),Xe=function(Ut){try{return isNaN(Ut.duration)?NaN:Math.round(1e3*Ut.duration)}catch(An){return null}}(Fe),dt=function(Ut){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Ut)/100)}catch(An){return null}}(Fe.mediaType),ut=function(Ut){try{var An=B.pr,it=ee.getCurrentBufferLevel(Ut);return isNaN(An)||isNaN(it)?null:100*parseInt(it/An*10)}catch(yt){return null}}(Fe.mediaType),et=Ae(Fe.mediaType),ht=function(Ut){try{var An=V.getTopBitrateInfoFor(Ut);return Math.round(An.bitrate/1e3)}catch(it){return null}}(Fe.mediaType),jt=B.pr,qt=function(Ut){if(H&&H.length!==0){var An,it=cn(H);try{for(it.s();!(An=it.n()).done;){var yt=An.value;if(yt.getType()===Ut)return yt.probeNextRequest()}}catch($t){it.e($t)}finally{it.f()}}}(Fe.mediaType);Fe.mediaType===y.Z.VIDEO&&(xe="v"),Fe.mediaType===y.Z.AUDIO&&(xe="a"),Fe.mediaType===y.Z.TEXT&&(xe=Fe.mediaInfo.mimeType==="application/mp4"?"tt":"c");var Ft=ve.get().streaming.cmcd.rtp;return Ft||(Ft=function(Ut){try{var An=J.getPlaybackRate();An||(An=1);var it=Ut.quality,yt=Ut.mediaType,$t=Ut.mediaInfo,Nt=Ut.duration;if(!$t)return NaN;var en=Ae(yt);en===0&&(en=500);var Jt=$t.bitrateList[it].bandwidth*Nt/1e3/(en/An/1e3),Wt=ve.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(ve.get().streaming.cmcd.rtpSafetyFactor)?ve.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Wt/100)+1)}catch(Dn){return NaN}}(Fe)),isNaN(Ft)||(pe.rtp=Ft),qt&&(Fe.url!==qt.url?pe.nor=encodeURIComponent(rn.Z.getRelativeUrl(Fe.url,qt.url)):qt.range&&(pe.nrr=qt.range)),Ne&&(pe.br=Ne),xe&&(pe.ot=xe),isNaN(Xe)||(pe.d=Xe),isNaN(dt)||(pe.mtp=dt),isNaN(ut)||(pe.dl=ut),isNaN(et)||(pe.bl=et),isNaN(ht)||(pe.tb=ht),isNaN(jt)||jt===1||(pe.pr=jt),fe[Fe.mediaType]&&(pe.bs=!0,fe[Fe.mediaType]=!1),!re[Fe.mediaType]&&we[Fe.mediaType]||(pe.su=!0,re[Fe.mediaType]=!1,we[Fe.mediaType]=!0),pe}(Q)):Q.type===ot.w.INIT_SEGMENT_TYPE?function(){var Fe=ke();return Fe.ot="i",Fe.su=!0,Fe}():Q.type===ot.w.OTHER_TYPE||Q.type===ot.w.XLINK_EXPANSION_TYPE?function(){var Fe=ke();return Fe.ot="o",Fe}():Q.type===ot.w.LICENSE?function(Fe){var xe=ke();return xe.ot="k",xe}():null}catch(Fe){return null}var Pe,be}function ke(){var Q={},Pe=ve.get().streaming.cmcd.cid?ve.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=ve.get().streaming.cmcd.sid?ve.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Pe&&(Q.cid="".concat(Pe)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function Ae(Q){try{var Pe=ee.getCurrentBufferLevel(Q);return isNaN(Pe)?null:100*parseInt(10*Pe)}catch(be){return null}}function Ge(Q){try{B.pr=Q.playbackRate}catch(Pe){}}function Z(Q){try{var Pe=L.getIsDynamic(Q.data)?"l":"v",be=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Pe),B.sf="".concat(be)}catch(Fe){}}function le(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(fe[Q.mediaType]||(fe[Q.mediaType]=!0),re[Q.mediaType]||(re[Q.mediaType]=!0))}catch(Pe){}}function ae(){for(var Q in fe)fe.hasOwnProperty(Q)&&(fe[Q]=!0);for(var Pe in re)re.hasOwnProperty(Pe)&&(re[Pe]=!0)}function ue(Q){try{if(!Q)return null;var Pe=Object.keys(Q).sort(function(xe,pe){return xe.localeCompare(pe)}),be=Pe.length,Fe=Pe.reduce(function(xe,pe,Ne){return pe==="v"&&Q[pe]===1||(typeof Q[pe]=="string"&&pe!=="ot"&&pe!=="sf"&&pe!=="st"?xe+="".concat(pe,"=").concat(JSON.stringify(Q[pe])):xe+="".concat(pe,"=").concat(Q[pe]),Ne<be-1&&(xe+=",")),xe},"");return(Fe=Fe.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(xe){return null}}return P={getQueryParameter:function(Q){try{if(ve.get().streaming.cmcd&&ve.get().streaming.cmcd.enabled){var Pe=_e(Q),be=function(xe){try{var pe=ve.get().streaming.cmcd.enabledKeys;return Object.keys(xe).filter(function(Ne){return pe.includes(Ne)}).reduce(function(Ne,Xe){return Ne[Xe]=xe[Xe],Ne},{})}catch(Ne){return xe}}(Pe),Fe=ue(be);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Pe,cmcdString:Fe}),{key:"CMCD",value:Fe}}return null}catch(xe){return null}},getHeaderParameters:function(Q){try{if(ve.get().streaming.cmcd&&ve.get().streaming.cmcd.enabled){var Pe=_e(Q),be=Ze(Pe,$e(["br","d","ot","tb"])),Fe=Ze(Pe,$e(["bl","dl","mtp","nor","nrr","su"])),xe=Ze(Pe,$e(["bs","rtp"])),pe=Ze(Pe,$e(["cid","pr","sf","sid","st","v"])),Ne={"CMCD-Object":ue(be),"CMCD-Request":ue(Fe),"CMCD-Status":ue(xe),"CMCD-Session":ue(pe)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Pe,headers:Ne}),Ne}return null}catch(Xe){return null}},setConfig:function(Q){Q&&(Q.abrController&&(V=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,Ge,this),ie.off(_.Z.MANIFEST_LOADED,Z,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.off(_.Z.PLAYBACK_SEEKED,ae,P),ge()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,Ge,P),ie.on(_.Z.MANIFEST_LOADED,Z,P),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.on(_.Z.PLAYBACK_SEEKED,ae,P),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,Ke,P)}},L=Vn(Ee).getInstance(),ge(),P}Jn.__dashjs_factory_name="CmcdModel";var ar=F.Z.getSingletonFactory(Jn);function br(L){return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},br(L)}function kr(L,P){kr=function(re,fe){return new J(re,void 0,fe)};var B=no(RegExp),V=RegExp.prototype,ee=new WeakMap;function J(re,fe,we){var Ee=B.call(this,re,fe);return ee.set(Ee,we||ee.get(re)),Ee}function H(re,fe){var we=ee.get(fe);return Object.keys(we).reduce(function(Ee,ie){return Ee[ie]=re[we[ie]],Ee},Object.create(null))}return Yi(J,B),J.prototype.exec=function(re){var fe=V.exec.call(this,re);return fe&&(fe.groups=H(fe,this)),fe},J.prototype[Symbol.replace]=function(re,fe){if(typeof fe=="string"){var we=ee.get(this);return V[Symbol.replace].call(this,re,fe.replace(/\$<([^>]+)>/g,function(ie,ve){return"$"+we[ve]}))}if(typeof fe=="function"){var Ee=this;return V[Symbol.replace].call(this,re,function(){var ie=[];return ie.push.apply(ie,arguments),br(ie[ie.length-1])!=="object"&&ie.push(H(ie,Ee)),fe.apply(this,ie)})}return V[Symbol.replace].call(this,re,fe)},kr.apply(this,arguments)}function Yi(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&hi(L,P)}function no(L){var P=typeof Map=="function"?new Map:void 0;return no=function(B){if(B===null||(V=B,Function.toString.call(V).indexOf("[native code]")===-1))return B;var V;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(P!==void 0){if(P.has(B))return P.get(B);P.set(B,ee)}function ee(){return Br(B,arguments,vi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),hi(ee,B)},no(L)}function Br(L,P,B){return Br=qr()?Reflect.construct:function(V,ee,J){var H=[null];H.push.apply(H,ee);var re=new(Function.bind.apply(V,H));return J&&hi(re,J.prototype),re},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function hi(L,P){return hi=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},hi(L,P)}function vi(L){return vi=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},vi(L)}var So="static",ro="dynamic",ea="cmsd-",bi=ea+So,wl=ea+ro,uu="stream",vc=["mb","st","sf","v"],bf={video:"v",audio:"a",text:"tt",stream:uu},si=/^[-0-9]/;function Ms(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},V={}}function re(ge){ge&&Object.keys(ge).forEach(function(Ke){vc.includes(Ke)||delete ge[Ke]})}function fe(ge){return!ge||ge.toLowerCase()!=="false"&&(si.test(ge)?parseInt(ge,10):ge.replace(/["]+/g,""))}function we(ge){try{for(var Ke={},Oe=ge.split(","),Ze=0;Ze<Oe.length;Ze++){var $e=Oe[Ze].split("="),_e=$e[0],ke=fe($e[1]);Ke[_e]=ke}return Ke}catch(Ae){P.error("Failed to parse CMSD-Static response header value:",Ae)}}function Ee(ge){try{for(var Ke={},Oe=ge.split(","),Ze=Oe[Oe.length-1].split(";"),$e=1;$e<Ze.length;$e++){var _e=Ze[$e].split("="),ke=_e[0],Ae=fe(_e[1]);Ke[ke]=Ae}return Ke}catch(Ge){return P.error("Failed to parse CMSD-Dynamic response header value:",Ge),[]}}function ie(ge){return bf[ge]||"o"}function ve(ge,Ke,Oe){var Ze=ge===So?B:V,$e=Ze[Ke]||{},_e=Ze[uu]||{};return $e[Oe]||_e[Oe]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(ge,Ke){for(var Oe=null,Ze=null,$e=ge.split("\r\n"),_e=$e.length-1;_e>=0;_e--){var ke=$e[_e].match(kr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ke&&ke.groups){var Ae=ke.groups.key.toLowerCase(),Ge=ke.groups.value;switch(Ae){case bi:Oe=we(Ge),J.trigger(T.Z.CMSD_STATIC_HEADER,Oe);break;case wl:Ze||(Ze=Ee(Ge))}}}var Z=uu;return Oe&&Oe.ot?Z=Oe.ot:Ke&&(Z=ie(Ke)),re(B[Z]),re(V[Z]),Oe&&(B[Z]=Object.assign(B[Z]||{},Oe)),Ze&&(V[Z]=Object.assign(V[Z]||{},Ze)),{static:Oe,dynamic:Ze}},getMaxBitrate:function(ge){var Ke=ie(ge);return ve(ro,Ke,"mb")||-1},getEstimatedThroughput:function(ge){var Ke=ie(ge);return ve(ro,Ke,"etp")||null},getResponseDelay:function(ge){var Ke=ie(ge);return ve(ro,Ke,"rd")||null},getRoundTripTime:function(ge){var Ke=ie(ge);return ve(ro,Ke,"rtt")||null}},P=(0,N.Z)(ee).getInstance().getLogger(L),H(),L}Ms.__dashjs_factory_name="CmsdModel";var _n=F.Z.getSingletonFactory(Ms);function Xn(){var L,P,B=this.context,V={};function ee(){P=(0,N.Z)(B).getInstance().getLogger(L)}function J(re){for(var fe={},we=0,Ee=0,ie=0,ve=0,ge=re.length,Ke=0;Ke<ge;++Ke)we+=re[Ke].chunkDownloadTimeRelativeMS,Ee+=re[Ke].bufferLevel,ie+=re[Ke].chunkDownloadTimeRelativeMS*re[Ke].bufferLevel,ve+=re[Ke].chunkDownloadTimeRelativeMS*re[Ke].chunkDownloadTimeRelativeMS;return fe.m=(ie-we*Ee/ge)/(ve-we*we/ge),fe.b=Ee/ge-fe.m*we/ge,function(Oe){return fe.m*Oe+fe.b}}function H(re){var fe,we=!0,Ee=re.reduce(function(ie,ve){return ie+ve.bufferLevelAtSegmentEnd},0)/re.length;return re.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(we=!1),ie.bufferLevelAtSegmentEnd/Ee<.8&&(we=!1),fe?fe>ie.bitrate&&(we=!1):fe=ie.bitrate}),we}return L={setup:ee,addMeasurement:function(re,fe,we,Ee,ie){re&&re.mediaType&&!V[re.mediaType]&&(V[re.mediaType]=[]);var ve=re.mediaInfo.bitrateList.find(function(ge){return ge.id===re.representationId});V[re.mediaType].push({index:re.index,repId:re.representationId,mediaType:re.mediaType,requestTimeMS:Ee,adjustedAvailabilityStartTimeMS:re.availabilityStartTime.getTime(),segDurationMS:1e3*re.duration,chunksDurationMS:we.reduce(function(ge,Ke){return ge+Ke.chunkDownloadDurationMS},0),segmentBytes:we.reduce(function(ge,Ke){return ge+Ke.chunkBytes},0),bitrate:ve&&ve.bandwidth,bitrateList:re.mediaInfo.bitrateList,chunkMeasurements:we,fetchDownloadDurationMS:fe,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(we.slice(1))}),V[re.mediaType].length>10&&V[re.mediaType].shift()},getThroughputCapacityDelayMS:function(re,fe){var we=V[re.mediaType]&&V[re.mediaType].slice(-3);return!we||we.length<3?0:H(we)?fe/4>250?250:fe/4:0},getEstimatedDownloadDurationMS:function(re){var fe=V[re.mediaType].slice(-1).pop(),we=V[re.mediaType].slice(-3),Ee=fe.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;fe.bufferLevelAtSegmentStart=fe.getEstimatedBufferLevel(Ee/2),fe.bufferLevelAtSegmentEnd=fe.getEstimatedBufferLevel(Ee);var ie=H(we),ve=ie?.6:.8;if(fe.isBufferStable&&1.05*fe.segDurationMS<fe.fetchDownloadDurationMS)return fe.fetchDownloadDurationMS;if(!ie||fe.segDurationMS<fe.fetchDownloadDurationMS||fe.adjustedAvailabilityStartTimeMS<=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.segDurationMS)return .8*fe.fetchDownloadDurationMS;for(var ge=fe.requestTimeMS+fe.throughputCapacityDelayMS-fe.adjustedAvailabilityStartTimeMS,Ke=0,Oe=0,Ze=0,$e=0;$e<fe.chunkMeasurements.length;$e++){var _e=fe.chunkMeasurements[$e];if(ge<Oe+_e.chunkDownloadDurationMS)break;Oe+=_e.chunkDownloadDurationMS,Ke+=_e.chunkBytes,Ze++}if(ge<0&&P.warn("request time was before adjusted availibitly start time"),Ke&&Oe&&Ze>.2*fe.chunkMeasurements.length){var ke=Ke/Oe,Ae=fe.segmentBytes/ke;return fe.fetchDownloadDurationMS<Ae?fe.fetchDownloadDurationMS*ve:Ae*ve}var Ge=fe.bitrate;return fe.bitrateList.some(function(Z){if(Z.bandwidth>fe.bitrate)return Ge=Z.bandwidth,!0}),Ge===fe.bitrate?fe.fetchDownloadDurationMS*ve:ve*fe.segmentBytes*8*1e3/Ge}},ee(),L}Xn.__dashjs_factory_name="LowLatencyThroughputModel";var hr=F.Z.getSingletonFactory(Xn),ti=w(5717);function Mr(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Bi(L){L=L||{};var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve=this.context,ge=L.errHandler,Ke=L.dashMetrics,Oe=L.mediaPlayerModel,Ze=L.requestModifier,$e=L.boxParser,_e=L.errors,ke=L.requestTimeout||0,Ae=(0,m.Z)(ve).getInstance(),Ge=(0,je.Z)(ve).getInstance();function Z(le,ae){var ue,Q=le.request,Pe=[],be=!0,Fe=!0,xe=new Date,pe=xe,Ne=0,Xe=null,dt=null;if(!Ze||!Ke||!ge)throw new Error("config object is not correct or missing");var ut,et=function(en){Q.requestStartDate=xe,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||xe,Q.fileLoaderType=dt;var Jt=ue.response?ue.response.responseURL:null,Wt=ue.response?ue.response.status:null,Dn=ue.response&&ue.response.getAllResponseHeaders?ue.response.getAllResponseHeaders():ue.response?ue.response.responseHeaders:null,xn=Dn&&Ge.get().streaming.cmsd&&Ge.get().streaming.cmsd.enabled?re.parseResponseHeaders(Dn,Q.mediaType):null;Ke.addHttpRequest(Q,Jt,Wt,Dn,en?Pe:null,xn)},ht=function(en){Fe=!1,et(en),Q.type===ot.w.MPD_TYPE&&(Ke.addManifestUpdate(Q),Ae.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},jt=function(){if(Xe&&(clearTimeout(Xe),Xe=null),B.indexOf(ue)!==-1&&(B.splice(B.indexOf(ue),1),Fe))if(ht(!1),ae>0){try{Ge.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===ot.w.MEDIA_SEGMENT_TYPE&&Oe.getRetryAttemptsForType(ot.w.MEDIA_SEGMENT_TYPE)===ae&&Ae.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:le};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),Z(le,ae))},Oe.getRetryIntervalsForType(Q.type))}else{if(Q.type===ot.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ge.error(new ce.Z(J[Q.type],Q.url+" is not available",{request:Q,response:ue.response})),le.error&&le.error(Q,"error",ue.response.statusText,ue.response),le.complete&&le.complete(Q,ue.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===ot.w.MEDIA_SEGMENT_TYPE?((ut=Or(ve).create({requestModifier:Ze,lowLatencyThroughputModel:we,boxParser:$e})).setup({dashMetrics:Ke}),dt=y.Z.FILE_LOADER_TYPES.FETCH):(ut=(0,nn.Z)(ve).create({requestModifier:Ze}),dt=y.Z.FILE_LOADER_TYPES.XHR);var qt=null,Ft=Ze.modifyRequestURL?Ze.modifyRequestURL(Q.url):Q.url;if(Ge.get().streaming.cmcd&&Ge.get().streaming.cmcd.enabled){var Ut=Ge.get().streaming.cmcd.mode;if(Ut===y.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Wt=H.getQueryParameter(en);return Wt&&Jt.push(Wt),Jt}catch(Dn){return[]}}(Q);Ft=rn.Z.addAditionalQueryParameterToUrl(Ft,An)}else Ut===y.Z.CMCD_MODE_HEADER&&(qt=H.getHeaderParameters(Q))}var it=fe.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var yt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});Ft=rn.Z.addAditionalQueryParameterToUrl(Ft,yt)}Q.url=Ft,ue={url:Ft,method:ot.w.GET,withCredentials:it,request:Q,onload:function(){ue.response.status>=200&&ue.response.status<=299&&(ht(!0),le.success&&le.success(ue.response.response,ue.response.statusText,ue.response.responseURL),le.complete&&le.complete(Q,ue.response.statusText))},onend:jt,onerror:jt,progress:function(en){var Jt=new Date;be&&(be=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Pe.push({s:pe,d:en.time?en.time:Jt.getTime()-pe.getTime(),b:[en.loaded?en.loaded-Ne:0]}),pe=Jt,Ne=en.loaded),Xe&&(clearTimeout(Xe),Xe=null),Ge.get().streaming.fragmentRequestProgressTimeout>0&&(Xe=setTimeout(function(){Ee.warn("Abort request "+ue.url+" due to progress timeout"),ue.response.onabort=null,ue.loader.abort(ue),jt()},Ge.get().streaming.fragmentRequestProgressTimeout)),le.progress&&en&&le.progress(en)},onabort:function(){et(!0),Xe&&(clearTimeout(Xe),Xe=null),le.abort&&le.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Wt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Wt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";Ee.warn(Jt)},loader:ut,timeout:ke,headers:qt};var $t=new Date().getTime();if(isNaN(Q.delayLoadingTime)||$t>=Q.delayLoadingTime)B.push(ue),ut.load(ue);else{var Nt={httpRequest:ue};V.push(Nt),Nt.delayTimeout=setTimeout(function(){if(V.indexOf(Nt)!==-1){V.splice(V.indexOf(Nt),1);try{xe=new Date,pe=xe,B.push(Nt.httpRequest),ut.load(Nt.httpRequest)}catch(en){Nt.httpRequest.onerror()}}},Q.delayLoadingTime-$t)}}return P={load:function(le){le.request?Z(le,Oe.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){ee.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),ee=[],V.forEach(function(le){return clearTimeout(le.delayTimeout)}),V=[],B.forEach(function(le){le.request.type!==ot.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),B=[]}},Ee=(0,N.Z)(ve).getInstance().getLogger(P),B=[],V=[],ee=[],H=ar(ve).getInstance(),re=_n(ve).getInstance(),we=hr(ve).getInstance(),fe=(0,ti.Z)(ve).getInstance(),Mr(ie={},ot.w.MPD_TYPE,_e.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,ot.w.XLINK_EXPANSION_TYPE,_e.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,ot.w.INIT_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,ot.w.MEDIA_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,ot.w.INDEX_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,ot.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,ot.w.OTHER_TYPE,_e.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,P}Bi.__dashjs_factory_name="HTTPLoader";var Xr=F.Z.getClassFactory(Bi);function ta(){var L;function P(){L={}}function B(){P()}return B(),{getLoader:function(V){for(var ee in L)if(L.hasOwnProperty(ee)&&V.startsWith(ee))return L[ee];return Xr},registerLoader:function(V,ee){L[V]=ee},unregisterLoader:function(V){L[V]&&delete L[V]},unregisterAllLoader:P,reset:B}}ta.__dashjs_factory_name="SchemeLoaderFactory";var Di=F.Z.getSingletonFactory(ta);function ui(L){L=L||{};var P,B,V=this.context;return P=Di(V).getInstance(),{load:function(ee){if(!B){var J=P.getLoader(ee&&ee.request?ee.request.url:null);B=J(V).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}ui.__dashjs_factory_name="URLLoader";var wo=F.Z.getClassFactory(ui);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wi(L)}function Go(L,P){return Go=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Go(L,P)}function na(L,P){return!P||Wi(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function pt(L){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},pt(L)}var ra=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Go(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=pt(P);if(B){var re=pt(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return na(this,J)});function ee(J){var H;return function(re,fe){if(!(re instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=V.call(this,J)).checkForExistenceOnly=!0,H}return ee}(j.Z);function Ds(L){L=L||{};var P,B,V=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,re=L.errors,fe=L.streamId;return P={checkForExistence:function(we){var Ee=function(ve){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:we,exists:ve})};if(we){var ie=new ra(we.url);B.load({request:ie,success:function(){Ee(!0)},error:function(){Ee(!1)}})}else Ee(!1)},load:function(we){var Ee=function(ie,ve){ee.trigger(J.LOADING_COMPLETED,{request:we,response:ie||null,error:ve||null,sender:P})};we?B.load({request:we,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:we,stream:ie.stream,streamId:fe}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:we,response:ie.data||null,error:null,sender:P})},success:function(ie){Ee(ie)},error:function(ie,ve,ge){Ee(void 0,new ce.Z(re.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ge,ve))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:P})}}):Ee(void 0,new ce.Z(re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,re.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=wo(V).create({errHandler:L.errHandler,errors:re,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:y.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),P}Ds.__dashjs_factory_name="FragmentLoader";var pr=F.Z.getClassFactory(Ds);function Ao(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}Ao.__dashjs_factory_name="SegmentResponseModifier";var lu=F.Z.getSingletonFactory(Ao);function Al(L){L=L||{};var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,re=L.mediaPlayerModel,fe=L.dashMetrics,we=(0,N.Z)(ee).getInstance(),Ee=lu(ee).getInstance(),ie=L.streamInfo;function ve(){return ie.id}function ge(){for(var Oe in V)V[Oe].reset();V={}}function Ke(Oe){if(Oe.sender){var Ze=Oe.request,$e=Oe.response,_e=Ze.isInitializationRequest(),ke=Ze.mediaInfo.streamInfo;if(Oe.error&&(Ze.mediaType===y.Z.AUDIO||Ze.mediaType===y.Z.VIDEO||Ze.mediaType===y.Z.TEXT&&Ze.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Oe.request.serviceLocation}),$e&&ke){var Ae=function(Ge,Z,le,ae){var ue=new Qt;return ue.streamId=le,ue.mediaInfo=Z.mediaInfo,ue.segmentType=Z.type,ue.start=Z.startTime,ue.duration=Z.duration,ue.end=ue.start+ue.duration,ue.bytes=Ge,ue.index=Z.index,ue.quality=Z.quality,ue.representationId=Z.representationId,ue.endFragment=ae,ue}($e,Ze,ie.id,Oe.type!==T.Z.FRAGMENT_LOADING_PROGRESS);Ee.modifyResponseAsync(Ae).then(function(Ge){J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ge,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})}).catch(function(Ge){B.error(Ge),J.trigger(_e?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ae,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})})}else B.warn("No "+Ze.mediaType+" bytes to push or stream is inactive.")}}return P={getStreamId:ve,getModel:function(Oe){var Ze=V[Oe];return Ze||(Ze=X(ee).create({streamInfo:ie,type:Oe,dashMetrics:fe,fragmentLoader:pr(ee).create({dashMetrics:fe,mediaPlayerModel:re,errHandler:H,requestModifier:(0,Ve.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Te,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:ve()}),debug:we,eventBus:J,events:T.Z}),V[Oe]=Ze),Ze},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,Ke,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,Ke,this),ge()}},B=we.getLogger(P),ge(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,Ke,P),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,Ke,P),P}Al.__dashjs_factory_name="FragmentController";var gs=F.Z.getClassFactory(Al),Ga=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Ou=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Lu(L){var P,B,V=this.context,ee=L.streamInfo;function J(re){B.setTrackByIndex(re)}function H(){B&&B.reset()}return P={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var re=B.getTracks();re&&re.length>0&&J(0)},provide:function(re,fe){if(typeof fe=="function"){var we,Ee,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||re==null)fe(null);else{(Ee=B.getThumbnailRequestForTime(re))&&(ie.segmentDuration=Ee.duration),we=re%ie.segmentDuration;var ve=Math.floor(we*ie.tilesHor*ie.tilesVert/ie.segmentDuration),ge=new Ga;if(ge.width=Math.floor(ie.widthPerTile),ge.height=Math.floor(ie.heightPerTile),ge.x=Math.floor(ve%ie.tilesHor)*ie.widthPerTile,ge.y=Math.floor(ve/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(re,function(Oe){ge.url=Oe,fe(ge)});if(Ee)ge.url=Ee.url,ie.segmentDuration=NaN;else{var Ke=Math.floor(re/ie.segmentDuration);ge.url=function(Oe,Ze){var $e=Ze+Oe.startNumber,_e=(0,M.vi)(Oe.templateUrl,"Number",$e);return _e=(0,M.vi)(_e,"Time",($e-1)*Oe.segmentDuration*Oe.timescale),_e=(0,M.vi)(_e,"Bandwidth",Oe.bandwidth),(0,M.eR)(_e)}(ie,Ke)}fe(ge)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var re=B.getTracks(),fe=0;return re.map(function(we){var Ee=new Ou;return Ee.mediaType=y.Z.IMAGE,Ee.qualityIndex=fe++,Ee.bitrate=we.bitrate,Ee.width=we.width,Ee.height=we.height,Ee})},reset:H},H(),B=(0,In.Z)(V).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),P}Lu.__dashjs_factory_name="ThumbnailController";var ia=F.Z.getClassFactory(Lu),oa=w(7417);function cu(L){var P;L=L||{};var B=[],V=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(re){B.indexOf(re)===-1&&(B.push(re),V.trigger(ee,{entry:re}))}return P={add:H,contains:function(re){return!!(B.length&&re&&re.length)&&B.indexOf(re)!==-1},reset:function(){B=[]}},J&&V.on(J,function(re){H(re.entry)},P),P}cu.__dashjs_factory_name="BlackListController";var ms=F.Z.getClassFactory(cu),yc=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT,y.Z.MUXED,y.Z.IMAGE];function xr(L){L=L||{};var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e,ke=this.context,Ae=(0,m.Z)(ke).getInstance(),Ge=(0,St.Z)(ke).getInstance(),Z=L.manifestModel,le=L.mediaPlayerModel,ae=L.dashMetrics,ue=L.manifestUpdater,Q=L.adapter,Pe=L.timelineConverter,be=L.capabilities,Fe=L.errHandler,xe=L.abrController,pe=L.playbackController,Ne=L.eventController,Xe=L.mediaController,dt=L.protectionController,ut=L.textController,et=L.videoModel,ht=L.streamInfo,jt=L.settings;function qt(It,Sn){return new Promise(function(En,Lt){Jt(),Ee=!0,Dn();var On=et.getElement(),lt=[];yc.forEach(function(nt){(nt!==y.Z.TEXT||It)&&(nt!==y.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&lt.push(Ft(nt,It))}),Promise.all(lt).then(function(){return nt=Sn,new Promise(function(Kt){var Ye={},ze=V.map(function(Dt){return Dt.createBufferSinks(nt)});Promise.all(ze).then(function(Dt){Dt.forEach(function(fn){fn&&(Ye[fn.getType()]=fn)}),Kt(Ye)}).catch(function(){Kt(Ye)})});var nt}).then(function(nt){if(Ee=!1,V.length===0){var Kt="No streams to play.";Fe.error(new ce.Z(Te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Kt,Z.getValue())),B.fatal(Kt)}else xn();It&&ut.createTracks(ht),En(nt)}).catch(function(nt){Lt(nt)})})}function Ft(It,Sn){var En,Lt=Q.getAllMediaInfoForType(ht,It),On=[],lt=null;if(!Lt||Lt.length===0)return B.info("No "+It+" data."),Promise.resolve();It===y.Z.VIDEO&&(re=!0),It===y.Z.AUDIO&&(fe=!0);for(var nt=0,Kt=Lt.length;nt<Kt;nt++)lt=Lt[nt],It===y.Z.TEXT&&lt.isEmbedded&&(ut.addEmbeddedTrack(ht,lt),On.push(lt)),Ut(lt)&&Xe.addTrack(lt);if(On.length>0&&(Xe.setInitialMediaSettingsForType(It,ht),ut.addMediaInfosToBuffer(ht,It,On)),Lt=Lt.filter(function(ze){return!ze.isEmbedded}),Lt.length===0)return Promise.resolve();if(It===y.Z.IMAGE)return(ve=ia(ke).create({streamInfo:ht,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Ze,eventBus:Ae,events:T.Z,dashConstants:v.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();Ae.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:ht,mediaInfo:lt}),Xe.setInitialMediaSettingsForType(It,ht);var Ye=function(ze,Dt){var fn=ze&&ze.length>0?ze[0]:null,Tn=ie.getModel(fn?fn.type:null),sr=fn?fn.type:null,Zr=fn?fn.mimeType:null,Ai=fn?fn.isFragmented:null,zr=hn(ke).create({streamInfo:ht,type:sr,mimeType:Zr,timelineConverter:Pe,adapter:Q,manifestModel:Z,mediaPlayerModel:le,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:xe,playbackController:pe,mediaController:Xe,textController:ut,errHandler:Fe,settings:jt,boxParser:Oe,segmentBlacklistController:ge});zr.initialize(Dt,re,Ai),V.push(zr);for(var io=0;io<ze.length;io++)zr.addMediaInfo(ze[io]);return sr===y.Z.TEXT&&ut.addMediaInfosToBuffer(ht,sr,ze,Tn),zr}(Lt,Sn);return(En=Xe.getCurrentTrackFor(It,ht.id))?(xe.updateTopQualityIndex(En),Ye.selectMediaInfo(It===y.Z.TEXT&&En.isEmbedded?Lt[0]:En)):Promise.resolve()}function Ut(It){var Sn,En=It?It.type:null;return En===y.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),Fe.error(new ce.Z(Te.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,Z.getValue())),!1):!(En!==y.Z.TEXT&&En!==y.Z.IMAGE&&It.contentProtection&&!be.supportsEncryptedMedia()&&(Fe.error(new ce.Z(Te.CAPABILITY_MEDIAKEYS_ERROR_CODE,Te.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(It){for(var Sn=V?V.length:0,En=0;En<Sn;En++){var Lt=V[En].getFragmentModel();Lt.abortRequests(),Lt.resetInitialSettings(),V[En].reset(!1,It)}ut&&ut.deactivateStream(ht),V=[],J=!1,H=!1,Fn(!1),yt(!1),Ae.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:ht})}function it(It){An(It),ee=!1,re=!1,fe=!1,we={},Ee=!1,$e=!1,_e=[]}function yt(It){$e=It}function $t(){return ht?ht.start:NaN}function Nt(){return ht?ht.id:null}function en(){return ht}function Jt(){if(!et||!xe)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Wt(It){It.error&&(Fe.error(It.error),B.fatal(It.error.message))}function Dn(){if(Ne){var It=Q.getEventsFor(ht);It&&It.length>0&&Ne.addInlineEvents(It,ht.id)}}function xn(){for(var It=V.length,Sn=we.audio||we.video?new ce.Z(Te.DATA_UPDATE_FAILED_ERROR_CODE,Te.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<It;En++)if(V[En].isUpdating()||Ee)return;if(dt){dt.clearMediaInfoArray();for(var Lt=0;Lt<It&&V[Lt];Lt++){var On=V[Lt].getType(),lt=V[Lt].getMediaInfo();if(On===y.Z.AUDIO||On===y.Z.VIDEO||On===y.Z.TEXT&&lt.isFragmented){var nt=V[Lt].getMediaInfo();nt&&dt.initializeForMedia(nt)}}dt.handleKeySystemFromManifest()}Sn?Fe.error(Sn):ee||(ee=!0,et.waitForReadyState(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Ae.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:ht})}))}function rr(){var It=un(),Sn=It.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!It[En].isBufferingCompleted()&&(It[En].getType()===y.Z.AUDIO||It[En].getType()===y.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",It[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,Ae.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:ht},{streamInfo:ht})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(It){we[It.mediaType]=It.error,xn()}function At(It){Ne&&Ne.addInbandEvents(It.events,ht.id)}function Xt(It){return It&&It.type?Gt(It.type):null}function Gt(It){return It?un().filter(function(Sn){return Sn.getType()===It})[0]:null}function un(){for(var It,Sn,En=[],Lt=0;Lt<V.length;Lt++)(It=(Sn=V[Lt]).getType())!==y.Z.AUDIO&&It!==y.Z.VIDEO&&It!==y.Z.TEXT||En.push(Sn);return En}function mn(It,Sn){var En=en(),Lt=Sn.getStreamInfo();if(!Lt||!En)return!0;var On=Q.getAdaptationForType(Lt.index,It,Lt),lt=Q.getAdaptationForType(En.index,It,En);return On&&lt?!(!Pn(lt)&&Pn(On)):!On&&!lt}function Pn(It){return!!It&&!!(It.ContentProtection||It.Representation_asArray&&It.Representation_asArray.length>0&&It.Representation_asArray[0].ContentProtection)}function Nn(It,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!It||!It.hasOwnProperty("getStreamInfo"))return!1;var Lt=It.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Lt||!On)return!1;var lt=Q.getAdaptationForType(Lt.index,Sn,Lt),nt=Q.getAdaptationForType(On.index,Sn,On);if(!lt||!nt)return!lt&&!nt;var Kt=lt&&nt&&lt.mimeType===nt.mimeType,Ye=nt.Representation_asArray.map(function(Tn){return Tn.codecs}),ze=lt.Representation_asArray.map(function(Tn){return Tn.codecs}),Dt=ze.some(function(Tn){return Ye.indexOf(Tn)>-1}),fn=ze.some(function(Tn){return Ye.some(function(sr){return be.codecRootCompatibleWithCodec(sr,Tn)})});return Dt||fn&&Kt}function Fn(It){Ke=It}function Gn(){return Ke}return P={initialize:function(){Ae.on(T.Z.BUFFERING_COMPLETED,rr,P),Ae.on(T.Z.DATA_UPDATE_COMPLETED,ir,P),Ae.on(T.Z.INBAND_EVENTS,At,P),dt&&(Ae.on(T.Z.KEY_ERROR,Wt,P),Ae.on(T.Z.SERVER_CERTIFICATE_UPDATED,Wt,P),Ae.on(T.Z.LICENSE_REQUEST_COMPLETE,Wt,P),Ae.on(T.Z.KEY_SYSTEM_SELECTED,Wt,P),Ae.on(T.Z.KEY_SESSION_CREATED,Wt,P),Ae.on(T.Z.KEY_STATUSES_CHANGED,Wt,P)),ut.initializeForStream(ht),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht})},getStreamId:function(){return ht?ht.id:null},activate:function(It,Sn){return new Promise(function(En,Lt){if(!J)return Gn()?(J=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),void En(Sn)):void function(On,lt){return qt(On,lt)}(It,Sn).then(function(On){J=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:ht}),En(On)}).catch(function(On){Lt(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return ht?ht.duration:NaN},getStartTime:$t,getId:Nt,getStreamInfo:en,getHasAudioTrack:function(){return fe},getHasVideoTrack:function(){return re},startPreloading:function(It,Sn){return new Promise(function(En,Lt){Gn()?Lt():(B.info("[startPreloading] Preloading next stream with id ".concat(Nt())),Fn(!0),qt(It,Sn).then(function(){for(var On=0;On<V.length&&V[On];On++)V[On].setExplicitBufferingTime($t()),V[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Lt()}))})},initializeForTextWithMediaSource:function(It){return new Promise(function(Sn,En){Ft(y.Z.TEXT,It).then(function(){return(Lt=Gt(y.Z.TEXT))?Lt.createBufferSinks():Promise.resolve();var Lt}).then(function(){ut.createTracks(ht),Sn()}).catch(function(Lt){En(Lt)})})},getThumbnailController:function(){return ve},getBitrateListFor:function(It){if(Jt(),It===y.Z.IMAGE)return ve?ve.getBitrateList():[];var Sn=function(En){for(var Lt=null,On=0;On<V.length;On++)if((Lt=V[On]).getType()===En)return Lt.getMediaInfo();return null}(It);return xe.getBitrateList(Sn)},updateData:function(It){return new Promise(function(Sn){Ee=!0,ht=It,Ne&&Dn();for(var En=[],Lt=0,On=V.length;Lt<On;Lt++){var lt=V[Lt],nt=lt.getMediaInfo();En.push(lt.updateStreamInfo(ht));var Kt=Q.getAllMediaInfoForType(ht,lt.getType());if(Kt=Kt.filter(function(Dt){return!Dt.isEmbedded})){lt.clearMediaInfoArray();for(var Ye=0;Ye<Kt.length;Ye++){var ze=Kt[Ye];lt.addMediaInfo(Kt[Ye]),Q.areMediaInfosEqual(nt,ze)&&(xe.updateTopQualityIndex(ze),En.push(lt.selectMediaInfo(ze)))}}}Promise.all(En).then(function(){for(En=[];_e.length>0;){var Dt=_e.pop(),fn=Dt.newMediaInfo,Tn=Xt(Dt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(fn))}return Promise.all(En)}).then(function(){Ee=!1,xn(),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:ht}),Sn()})})},reset:function(It){ie&&(ie.reset(),ie=null),xe&&ht&&xe.clearDataForStream(ht.id),ge&&(ge.reset(),ge=null),it(It),ht=null,Ae.off(T.Z.DATA_UPDATE_COMPLETED,ir,P),Ae.off(T.Z.BUFFERING_COMPLETED,rr,P),Ae.off(T.Z.INBAND_EVENTS,At,P),dt&&(Ae.off(T.Z.KEY_ERROR,Wt,P),Ae.off(T.Z.SERVER_CERTIFICATE_UPDATED,Wt,P),Ae.off(T.Z.LICENSE_REQUEST_COMPLETE,Wt,P),Ae.off(T.Z.KEY_SYSTEM_SELECTED,Wt,P),Ae.off(T.Z.KEY_SESSION_CREATED,Wt,P),Ae.off(T.Z.KEY_STATUSES_CHANGED,Wt,P))},getProcessors:un,setMediaSource:function(It){return new Promise(function(Sn,En){for(var Lt=[],On=0;On<V.length;)Ut(V[On].getMediaInfo())?(Lt.push(V[On].setMediaSource(It)),On++):(V[On].reset(),V.splice(On,1));Promise.all(Lt).then(function(){for(var lt=0;lt<V.length;lt++)V[lt].dischargePreBuffer();if(V.length===0){var nt="No streams to play.";Fe.error(new ce.Z(Te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,nt+"nostreams",Z.getValue())),B.fatal(nt)}Sn()}).catch(function(lt){B.error(lt),En(lt)})})},isMediaCodecCompatible:function(It){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Nn(It,y.Z.VIDEO,Sn)&&Nn(It,y.Z.AUDIO,Sn)},isProtectionCompatible:function(It){return!It||mn(y.Z.VIDEO,It)&&mn(y.Z.AUDIO,It)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return $e},setIsEndedEventSignaled:yt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var It=V.length,Sn=0;Sn<It&&V[Sn];Sn++)V[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(It){if(J&&ht){H=!1;var Sn=It.newMediaInfo,En=Z.getValue();Q.setCurrentMediaInfo(ht.id,Sn.type,Sn);var Lt=Xt(Sn);if(Lt){var On=pe.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(_e.push(It),ue.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),ue.refreshManifest())):Lt.selectMediaInfo(Sn).then(function(){Sn.type!==y.Z.VIDEO&&Sn.type!==y.Z.AUDIO||xe.updateTopQualityIndex(Sn),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function(It){var Sn=Gt(It.mediaType);Sn&&Sn.prepareQualityChange(It)}},function(){try{Ze=(0,N.Z)(ke).getInstance(),B=Ze.getLogger(P),it(),Oe=(0,oa.Z)(ke).getInstance(),ge=ms(ke).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=gs(ke).create({streamInfo:ht,mediaPlayerModel:le,dashMetrics:ae,errHandler:Fe,settings:jt,boxParser:Oe,dashConstants:v.Z,urlUtils:Ge})}catch(It){throw It}}(),P}xr.__dashjs_factory_name="Stream";var vs=F.Z.getClassFactory(xr),ys=function L(P){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||null,this.type=ot.w.CONTENT_STEERING_TYPE,this.responseType="json"},Yr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Ec(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe=this.context,Ze=(0,St.Z)(Oe).getInstance();function $e(xe){Z(xe,"baseUrl")}function _e(xe){Z(xe,"location")}function ke(xe){if(xe&&xe.request&&xe.request.serviceLocation&&xe.request.requestStartDate&&xe.request.requestEndDate&&!isNaN(xe.request.bytesTotal)){var pe=xe.request.serviceLocation,Ne=xe.request.requestEndDate.getTime()-xe.request.requestStartDate.getTime();Ge(pe,parseInt(8*xe.request.bytesTotal/Ne*1e3))}}function Ae(xe){xe&&xe.httpRequest&&xe.httpRequest._serviceLocation&&!isNaN(xe.throughput)&&Ge(xe.httpRequest._serviceLocation,1e3*xe.throughput)}function Ge(xe,pe){ee[xe]||(ee[xe]=[]),ee[xe].push(pe),ee[xe].length>4&&ee[xe].shift()}function Z(xe,pe){if(xe&&xe.request&&xe.request.serviceLocation){var Ne=xe.request.serviceLocation;V[pe].all.indexOf(Ne)===-1&&V[pe].all.push(Ne),V[pe].current=Ne}}function le(){var xe=Ee.getValue(),pe=Ke.getContentSteering(xe);return pe||(pe=ve.getServiceDescriptionSettings().contentSteering),pe}function ae(){return new Promise(function(xe){try{var pe=le();if(!pe||!pe.serverUrl)return void xe();var Ne=function(dt){var ut=dt.serverUrl;B&&B.reloadUri&&(ut=Ze.isRelative(B.reloadUri)?Ze.resolve(B.reloadUri,dt.serverUrl):B.reloadUri);var et=[],ht=V.baseUrl.all.concat(V.location.all);if(ht.length>0){var jt=ht.map(function(Ut){var An=function(it){if(!it||!ee[it]||ee[it].length===0)return-1;var yt=ee[it].reduce(function($t,Nt){return $t+Nt})/ee[it].length;return parseInt(yt)}(Ut);return{serviceLocation:Ut,throughput:An}});jt.sort(function(Ut,An){return An.throughput-Ut.throughput});var qt="",Ft="";jt.forEach(function(Ut,An){An!==0&&(qt="".concat(qt,","),Ut.throughput>-1&&(Ft="".concat(Ft,","))),qt="".concat(qt).concat(Ut.serviceLocation),Ut.throughput>-1&&(Ft="".concat(Ft).concat(Ut.throughput))}),et.push({key:"_DASH_pathway",value:'"'.concat(qt,'"')}),et.push({key:"_DASH_throughput",value:Ft})}return ut=rn.Z.addAditionalQueryParameterToUrl(ut,et)}(pe),Xe=new ys(Ne);H.load({request:Xe,success:function(dt){(function(ut){ut&&ut[v.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(ut[v.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Yr).version=ut[v.Z.CONTENT_STEERING_RESPONSE.VERSION],ut[v.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ut[v.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=ut[v.Z.CONTENT_STEERING_RESPONSE.TTL]),ut[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=ut[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=ut[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(et){return function(ht){return ht[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.ID]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&ht[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST]}(et)})),Pe())})(dt),ge.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:Ne}),xe()},error:function(dt,ut,et,ht){(function(jt,qt){try{switch(P.warn("Error fetching data from content steering server",jt),qt.status){case 410:break;case 429:var Ft=qt&&qt.getResponseHeader?qt.getResponseHeader("retry-after"):null;Ft!==null&&(B||(B={}),B.ttl=parseInt(Ft)),Pe();break;default:Pe()}}catch(Ut){P.error(Ut)}})(dt,ht),xe(dt)},complete:function(){V.baseUrl.all=ue(V.baseUrl),V.location.all=ue(V.location)}})}catch(dt){xe(dt)}})}function ue(xe){return xe.all&&xe.all.length!==0&&xe.current?xe.all.filter(function(pe){return pe===xe.current}):[]}function Q(xe){try{var pe=[];return xe&&xe.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(Ne){var Xe=xe.filter(function(jt){return Ne[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===jt.serviceLocation}),dt=null;if(Xe&&Xe.length>0&&(dt=Xe[0]),dt){var ut=new URL(dt.url),et=Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST];et=rn.Z.stringHasProtocol(et)?et:"".concat(ut.protocol,"//").concat(et);var ht={synthesizedUrl:"".concat(et).concat(ut.pathname),serviceLocation:Ne[v.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:dt};pe.push(ht)}}),pe}catch(Ne){return P.error(Ne),[]}}function Pe(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function be(){J&&clearTimeout(J),J=null}function Fe(){B=null,ee={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},be()}return L={reset:function(){Fe(),ge.off(_.Z.FRAGMENT_LOADING_STARTED,$e,L),ge.off(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.off(_.Z.MANIFEST_LOADING_FINISHED,ke,L),ge.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,L)},setConfig:function(xe){xe&&(xe.adapter&&(Ke=xe.adapter),xe.errHandler&&(re=xe.errHandler),xe.dashMetrics&&(fe=xe.dashMetrics),xe.mediaPlayerModel&&(we=xe.mediaPlayerModel),xe.requestModifier&&(ie=xe.requestModifier),xe.manifestModel&&(Ee=xe.manifestModel),xe.serviceDescriptionController&&(ve=xe.serviceDescriptionController),xe.eventBus&&(ge=xe.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var xe=le();return!!xe&&xe.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:be,getSynthesizedBaseUrlElements:function(xe){try{return Q(xe).map(function(pe){var Ne=new Qn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne.dvbPriority=pe.reference.dvbPriority,Ne.dvbWeight=pe.reference.dvbWeight,Ne.availabilityTimeOffset=pe.reference.availabilityTimeOffset,Ne.availabilityTimeComplete=pe.reference.availabilityTimeComplete,Ne})}catch(pe){return P.error(pe),[]}},getSynthesizedLocationElements:function(xe){try{return Q(xe).map(function(pe){var Ne=new Zn(pe.synthesizedUrl,pe.serviceLocation);return Ne.queryParams=pe.queryParams,Ne})}catch(pe){return P.error(pe),[]}},initialize:function(){H=wo(Oe).create({errHandler:re,dashMetrics:fe,mediaPlayerModel:we,requestModifier:ie,errors:Te}),ge.on(_.Z.FRAGMENT_LOADING_STARTED,$e,L),ge.on(_.Z.MANIFEST_LOADING_STARTED,_e,L),ge.on(_.Z.MANIFEST_LOADING_FINISHED,ke,L),ge.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,L)}},P=(0,N.Z)(Oe).getInstance().getLogger(L),Fe(),L}Ec.__dashjs_factory_name="ContentSteeringController";var Sa=F.Z.getSingletonFactory(Ec);function Il(){var L,P,B,V=this.context,ee=(0,je.Z)(V).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(re){var fe=B.getCurrentSteeringResponseData();return fe&&fe.pathwayPriority&&fe.pathwayPriority.length>0?function(){for(var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,ve=null,ge=function(){var Ke=we[ie],Oe=Ee.findIndex(function(Ze){return Ze.serviceLocation&&Ze.serviceLocation===Ke});if(Oe!==-1&&!P.contains(Ee[Oe].serviceLocation))return ve=Ee[Oe],"break";ie+=1};ie<we.length&&ge()!=="break";);return ve}(fe.pathwayPriority,re):null}(J)),H||(H=function(re){return re[0]}(J)),H},setConfig:function(J){J.blacklistController&&(P=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){P.reset()}},P=ms(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Sa(V).getInstance(),L}Il.__dashjs_factory_name="LocationSelector";var aa=F.Z.getClassFactory(Il);function Es(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke=this.context,Oe=(0,m.Z)(Ke).getInstance(),Ze=(0,St.Z)(Ke).getInstance();function $e(){B=NaN,H=!1,ee=!0,J=!1,_e()}function _e(){V!==null&&(clearTimeout(V),V=null)}function ke(be){_e(),J||(isNaN(be)&&!isNaN(B)&&(be=1e3*B),isNaN(be)||(P.debug("Refresh manifest in "+be+" milliseconds."),V=setTimeout(le,be)))}function Ae(){var be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var Fe=fe.getValue(),xe=Fe.url,pe=null,Ne=Ee.getPatchLocation(Fe),Xe=we.select(Ne),dt=null;if(Xe&&!be)xe=Xe.url,pe=Xe.serviceLocation,dt=Xe.queryParams;else{var ut=Ge(Fe),et=we.select(ut);et&&(xe=et.url,pe=et.serviceLocation,dt=et.queryParams)}Ze.isRelative(xe)&&(xe=Ze.resolve(xe,Fe.url)),re.load(xe,pe,dt)}function Ge(be){var Fe=Ee.getLocation(be),xe=ve.getSynthesizedLocationElements(Fe);return Fe.concat(xe)}function Z(be){if(be){if(Ee.getIsPatch(be)){var Fe=be;be=fe.getValue();var xe=Ee.isPatchValid(be,Fe),pe=xe;if(xe){var Ne=Ee.getPublishTime(be);pe=Ee.applyPatchToManifest(be,Fe);var Xe=Ee.getPublishTime(be);pe=Ne.getTime()!=Xe.getTime()}if(!pe)return P.debug("Patch provided is invalid, performing full manifest refresh"),void Ae(!0);be.loadedTime=new Date}}else(be=fe.getValue()).loadedTime=new Date;if(fe.getValue()&&fe.getValue().type===v.Z.DYNAMIC&&be.type===v.Z.STATIC)return Oe.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);fe.setValue(be);var dt=new Date,ut=(dt.getTime()-be.loadedTime.getTime())/1e3;1e3*(B=Ee.getManifestUpdatePeriod(be,ut))>2147483647&&(B=2147483647e-3),Oe.trigger(T.Z.MANIFEST_UPDATED,{manifest:be}),P.info("Manifest has been refreshed at "+dt+"["+dt.getTime()/1e3+"] "),ee||ke()}function le(){ee||(H?ke(ge.get().streaming.manifestUpdateRetryInterval):Ae())}function ae(be){be.error?be.error.code===Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(be.error):Z(be.manifest)}function ue(){ee=!1,ke()}function Q(){(ee=!ge.get().streaming.scheduling.scheduleWhilePaused)&&_e()}function Pe(){H=!1}return L={initialize:function(){$e(),Oe.on(T.Z.STREAMS_COMPOSED,Pe,this),Oe.on(_.Z.PLAYBACK_STARTED,ue,this),Oe.on(_.Z.PLAYBACK_PAUSED,Q,this),Oe.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(be){Z(be)},refreshManifest:Ae,getIsUpdating:function(){return H},setConfig:function(be){be&&(be.manifestModel&&(fe=be.manifestModel),be.adapter&&(Ee=be.adapter),be.manifestLoader&&(re=be.manifestLoader),be.errHandler&&(ie=be.errHandler),be.locationSelector&&(we=be.locationSelector),be.settings&&(ge=be.settings),be.contentSteeringController&&(ve=be.contentSteeringController))},reset:function(){Oe.off(_.Z.PLAYBACK_STARTED,ue,this),Oe.off(_.Z.PLAYBACK_PAUSED,Q,this),Oe.off(T.Z.STREAMS_COMPOSED,Pe,this),Oe.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),$e()}},P=(0,N.Z)(Ke).getInstance().getLogger(L),we=aa(Ke).create(),L}Es.__dashjs_factory_name="ManifestUpdater";var Vr=F.Z.getClassFactory(Es);function qa(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze=this.context,$e=(0,m.Z)(Ze).getInstance(),_e=(0,St.Z)(Ze).getInstance();function ke(){re=[],fe=[],we=null,Ee=null,ve=null,ie=NaN,B=!1,V=!1,ge=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ae(){ee.get().streaming.utcSynchronization.enabled&&!B&&!V&&ve&&ve.value&&ve.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(Ee&&(Date.now()-Ee)/1e3<30||(re=[],V=!0,Ge(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function Ge(et){try{if(et<=0)return void dt();var ht=Date.now();J[ve.schemeIdUri](ve.value,function(jt){var qt=Date.now(),Ft=le(ht,qt,jt);re.push(Ft),Ge(et-1)},function(){dt()})}catch(jt){dt()}}function Z(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ht=et||0;if(!fe||fe.length===0||ht>=fe.length)ae();else{var jt=fe[ht];if(jt)if(J.hasOwnProperty(jt.schemeIdUri)){var qt=new Date().getTime();J[jt.schemeIdUri](jt.value,function(Ft){var Ut=new Date().getTime(),An=le(qt,Ut,Ft);ve=jt,ae(An)},function(){Z(ht+1)})}else Z(ht+1);else ae()}}function le(et,ht,jt){return jt-(ht-(ht-et)/2)}function ae(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ht=isNaN(et);ht&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Ne():Xe(ht,et)}function ue(et){var ht=Date.parse(et);return isNaN(ht)&&(ht=function(jt){var qt,Ft,Ut=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(jt);return qt=Date.UTC(parseInt(Ut[1],10),parseInt(Ut[2],10)-1,parseInt(Ut[3],10),parseInt(Ut[4],10),parseInt(Ut[5],10),Ut[6]&&(parseInt(Ut[6],10)||0),Ut[7]&&1e3*parseFloat(Ut[7])||0),Ut[9]&&Ut[10]&&(Ft=60*parseInt(Ut[9],10)+parseInt(Ut[10],10),qt+=(Ut[8]==="+"?-1:1)*Ft*60*1e3),new Date(qt).getTime()}(et)),ht}function Q(et){return Date.parse(et)}function Pe(et){return Date.parse(et)}function be(et,ht,jt){jt()}function Fe(et,ht,jt){var qt=ue(et);isNaN(qt)?jt():ht(qt)}function xe(et,ht,jt,qt,Ft){var Ut,An,it=!1,yt=new XMLHttpRequest,$t=Ft?ot.w.HEAD:ot.w.GET,Nt=ht.match(/\S+/g);if(ht=Nt.shift(),Ut=function(){it||(it=!0,Nt.length?xe(et,Nt.join(" "),jt,qt,Ft):qt())},An=function(){var Jt,Wt;yt.status===200&&(Jt=Ft?yt.getResponseHeader("Date"):yt.response,Wt=et(Jt),isNaN(Wt)||(jt(Wt),it=!0))},_e.isRelative(ht)){var en=Oe.resolve();en&&(ht=_e.resolve(ht,en.url))}yt.open($t,ht),yt.timeout=5e3,yt.onload=An,yt.onloadend=Ut,yt.send()}function pe(et,ht,jt){xe(Pe,et,ht,jt,!0)}function Ne(){var et=H.getLatestMPDRequestHeaderValueByID("Date"),ht=et!==null?new Date(et).getTime():Number.NaN;isNaN(ht)?Xe(!0):Xe(!1,ht-Date.now())}function Xe(et,ht){if(isNaN(ie)||isNaN(ht)||et||function(qt){try{var Ft,Ut=ut(qt),An=isNaN(ge)?30:ge,it=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,yt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,$t=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ut?(Ft=Math.min(An*it,yt),P.debug("Increasing timeBetweenSyncAttempts to ".concat(Ft))):(Ft=Math.max(An/it,$t),P.debug("Decreasing timeBetweenSyncAttempts to ".concat(Ft))),ge=Ft}catch(Nt){}}(ht),!et&&!isNaN(ht)){we=Date.now(),B=!1;var jt=isNaN(ie);ie=ht,jt&&Ae(),P.debug("Completed UTC sync. Setting client - server offset to ".concat(ht))}et&&(ve=null,B=!1,Ke.error(new ce.Z(Te.TIME_SYNC_FAILED_ERROR_CODE,Te.TIME_SYNC_FAILED_ERROR_MESSAGE))),$e.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ht}),$e.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function dt(){if(re&&re.length!==0){var et=re.reduce(function(ht,jt){return ht+jt},0)/re.length;ut(et)?P.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(P.debug("Completed background UTC sync. Setting client - server offset to ".concat(et)),ie=et,$e.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,Ee=Date.now()}}function ut(et){try{if(isNaN(ie))return!0;var ht=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return et>=ie-ht&&et<=ie+ht}catch(jt){return!0}}return L={initialize:function(){ke(),J={"urn:mpeg:dash:utc:http-head:2014":pe,"urn:mpeg:dash:utc:http-xsdate:2014":xe.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2014":xe.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":Fe,"urn:mpeg:dash:utc:http-head:2012":pe,"urn:mpeg:dash:utc:http-xsdate:2012":xe.bind(null,ue),"urn:mpeg:dash:utc:http-iso:2012":xe.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":Fe,"urn:mpeg:dash:utc:http-ntp:2014":be,"urn:mpeg:dash:utc:ntp:2014":be,"urn:mpeg:dash:utc:sntp:2014":be}},attemptSync:function(et,ht){fe=et,B||(function(jt){try{if(!jt||!ee.get().streaming.utcSynchronization.enabled)return!1;var qt=isNaN(ge)?30:ge;return!(we&&qt&&!isNaN(qt))||(Date.now()-we)/1e3>=qt}catch(Ft){return!0}}(ht)?(B=!0,Z()):$e.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(et){et&&(et.dashMetrics&&(H=et.dashMetrics),et.baseURLController&&(Oe=et.baseURLController),et.errHandler&&(Ke=et.errHandler),et.settings&&(ee=et.settings))},reset:function(){ke(),$e.off(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,L)}},P=(0,N.Z)(Ze).getInstance().getLogger(L),$e.on(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,L),L}qa.__dashjs_factory_name="TimeSyncController";var Ha=F.Z.getSingletonFactory(qa);Ha.HTTP_TIMEOUT_MS=5e3,F.Z.updateSingletonFactory(qa.__dashjs_factory_name,Ha);var Ka=Ha;function Cf(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(re){var fe=window.URL.createObjectURL(P);return re.setSource(fe),V==="managedMediaSource"&&(re.setDisableRemotePlayback(!0),P.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),P.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),fe},createMediaSource:function(){var re="WebKitMediaSource"in window,fe="MediaSource"in window;return"ManagedMediaSource"in window?(P=new ManagedMediaSource,V="managedMediaSource",ee.info("Created ManagedMediaSource")):fe?(P=new MediaSource,V="mediaSource",ee.info("Created MediaSource")):re&&(P=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),P},detachMediaSource:function(re){re.setSource(null)},setConfig:function(re){re&&re.settings&&(B=re.settings)},setDuration:function re(fe){P&&P.readyState==="open"&&(fe===null&&isNaN(fe)||P.duration!==fe&&(fe!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(fe=Math.pow(2,32)),function(we){for(var Ee=we.sourceBuffers,ie=0;ie<Ee.length;ie++)if(Ee[ie].updating)return!0;return!1}(P)?setTimeout(re.bind(null,fe),50):(ee.info("Set MediaSource duration:"+fe),P.duration=fe)))},setSeekable:function(re,fe){P&&typeof P.setLiveSeekableRange=="function"&&typeof P.clearLiveSeekableRange=="function"&&P.readyState==="open"&&re>=0&&re<fe&&(P.clearLiveSeekableRange(),P.setLiveSeekableRange(re,fe))},signalEndOfStream:function(re){if(re&&re.readyState==="open"){for(var fe=re.sourceBuffers,we=0;we<fe.length;we++)if(fe[we].updating||fe[we].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),re.endOfStream()}}},ee=(0,N.Z)(J).getInstance().getLogger(L),L}Cf.__dashjs_factory_name="MediaSourceController";var wh=F.Z.getSingletonFactory(Cf);function Io(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie="urn:mpeg:dash:event:2012",ve="discarded",ge="updated",Ke="added",Oe=this.context,Ze=(0,m.Z)(Oe).getInstance();function $e(){if(!H||!re)throw new Error("setConfig function has to be called previously")}function _e(){Ee=!1,B={},V={},ee=null,we=!1,J=Date.now()/1e3}function ke(){try{if(!we){we=!0;var be=re.getTime(),Fe=be-J;Fe=J>0?Math.max(0,Fe):0,Ae(V,Fe,be),Ae(B,Fe,be),Ge(V),Ge(B),J=be,we=!1}}catch(xe){we=!1,P.error(xe)}}function Ae(be,Fe,xe){try{ue(be,function(pe){if(pe!==void 0){var Ne=isNaN(pe.duration)?0:pe.duration;pe.calculatedPresentationTime<=xe&&pe.calculatedPresentationTime+Fe+Ne>=xe?Pe(pe,_.Z.EVENT_MODE_ON_START):(Q(xe,Ne+Fe,pe.calculatedPresentationTime)||function(Xe){try{var dt=Xe.eventStream.period.start+Xe.eventStream.period.duration;return Xe.calculatedPresentationTime>dt}catch(ut){return P.error(ut),!1}}(pe))&&(P.debug("Removing event ".concat(pe.id," from period ").concat(pe.eventStream.period.id," as it is expired or invalid")),function(Xe,dt){try{var ut=dt.eventStream.schemeIdUri,et=dt.eventStream.period.id,ht=dt.eventStream.value,jt=dt.id;Xe[et][ut]=Xe[et][ut].filter(function(qt){return ht&&qt.eventStream.value&&qt.eventStream.value!==ht||qt.id!==jt}),Xe[et][ut].length===0&&delete Xe[et][ut]}catch(qt){P.error(qt)}}(be,pe))}})}catch(pe){P.error(pe)}}function Ge(be){try{for(var Fe in be)be.hasOwnProperty(Fe)&&Object.keys(be[Fe]).length===0&&delete be[Fe]}catch(xe){P.error(xe)}}function Z(be,Fe){var xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],pe=be.eventStream.schemeIdUri,Ne=be.eventStream.value,Xe=be.id,dt=ve;Fe[pe]||(Fe[pe]=[]);var ut=Fe[pe].findIndex(function(ht){return(!Ne||ht.eventStream.value&&ht.eventStream.value===Ne)&&ht.id===Xe});if(ut===-1)Fe[pe].push(be),be.triggeredReceivedEvent=!1,be.triggeredStartEvent=!1,dt=Ke;else if(xe){var et=Fe[pe][ut];be.triggeredReceivedEvent=et.triggeredReceivedEvent,be.triggeredStartEvent=et.triggeredStartEvent,Fe[pe][ut]=be,dt=ge}return dt}function le(be){try{if(be.eventStream.value==1){var Fe,xe=be.calculatedPresentationTime;Fe=be.calculatedPresentationTime==4294967295?NaN:be.calculatedPresentationTime+be.duration,Ze.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:be.id,validUntil:xe,newDuration:Fe,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(pe){P.error(pe)}}function ae(be){try{var Fe=re.getTime();ue(be,function(xe){var pe=xe.eventStream&&xe.eventStream.period&&!isNaN(xe.eventStream.period.duration)?xe.eventStream.period.duration:NaN,Ne=xe.eventStream&&xe.eventStream.period&&!isNaN(xe.eventStream.period.start)?xe.eventStream.period.start:NaN;if(!isNaN(pe)&&!isNaN(Ne)){var Xe=xe.calculatedPresentationTime;Math.abs(Xe-Fe)<300&&Pe(xe,_.Z.EVENT_MODE_ON_START)}})}catch(xe){P.error(xe)}}function ue(be,Fe){try{if(be)for(var xe=Object.keys(be),pe=0;pe<xe.length;pe++)for(var Ne=be[xe[pe]],Xe=Object.keys(Ne),dt=0;dt<Xe.length;dt++)Ne[Xe[dt]].forEach(function(ut){ut!==void 0&&Fe(ut)})}catch(ut){P.error(ut)}}function Q(be,Fe,xe){try{return be-Fe>xe}catch(pe){return P.error(pe),!1}}function Pe(be,Fe){try{var xe=re.getTime(),pe=be.id;if(Fe===_.Z.EVENT_MODE_ON_RECEIVE&&!be.triggeredReceivedEvent)return P.debug("Received event ".concat(pe)),be.triggeredReceivedEvent=!0,void Ze.trigger(be.eventStream.schemeIdUri,{event:be},{mode:Fe});be.triggeredStartEvent||(be.eventStream.schemeIdUri===ie&&be.eventStream.value==1?be.duration===0&&be.presentationTimeDelta===0||(P.debug("Starting manifest refresh event ".concat(pe," at ").concat(xe)),function(){try{$e(),H.refreshManifest()}catch(Ne){P.error(Ne)}}()):be.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&be.eventStream.value==1?(P.debug("Starting callback event ".concat(pe," at ").concat(xe)),function(Ne){try{(0,nn.Z)(Oe).create({}).load({method:"get",url:Ne,request:{responseType:"arraybuffer"}})}catch(Xe){P.error(Xe)}}(be.messageData)):(P.debug("Starting event ".concat(pe," from period ").concat(be.eventStream.period.id," at ").concat(xe)),Ze.trigger(be.eventStream.schemeIdUri,{event:be},{mode:Fe})),be.triggeredStartEvent=!0)}catch(Ne){P.error(Ne)}}return L={addInlineEvents:function(be,Fe){try{if($e(),B[Fe]||(B[Fe]={}),be)for(var xe=0;xe<be.length;xe++){var pe=be[xe];if(!Q(re.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)){var Ne=Z(pe,B[Fe],!0);Ne===Ke?(P.debug("Added inline event with id ".concat(pe.id," from period ").concat(Fe)),Pe(pe,_.Z.EVENT_MODE_ON_RECEIVE)):Ne===ge&&P.debug("Updated inline event with id ".concat(pe.id," from period ").concat(Fe))}}}catch(Xe){throw Xe}},addInbandEvents:function(be,Fe){try{$e(),V[Fe]||(V[Fe]={});for(var xe=0;xe<be.length;xe++){var pe=be[xe];Q(re.getTime(),isNaN(pe.duration)?0:pe.duration,pe.calculatedPresentationTime)||(Z(pe,V[Fe],!1)===Ke?(pe.eventStream.schemeIdUri===ie&&le(pe),P.debug("Added inband event with id ".concat(pe.id," from period ").concat(Fe)),Pe(pe,_.Z.EVENT_MODE_ON_RECEIVE)):P.debug("Inband event with scheme_id_uri ".concat(pe.eventStream.schemeIdUri,", value ").concat(pe.eventStream.value,", period id ").concat(Fe," and event id ").concat(pe.id," was ignored because it has been added before.")))}ke()}catch(Ne){throw Ne}},getInbandEvents:function(){return V},getInlineEvents:function(){return B},start:function(){try{$e(),P.debug("Start Event Controller");var be=fe.get().streaming.eventControllerRefreshDelay;Ee||isNaN(be)||(Ee=!0,ee=setInterval(ke,be))}catch(Fe){throw Fe}},setConfig:function(be){try{if(!be)return;be.manifestUpdater&&(H=be.manifestUpdater),be.playbackController&&(re=be.playbackController),be.settings&&(fe=be.settings)}catch(Fe){throw Fe}},reset:function(){(function(){try{ee!==null&&Ee&&(clearInterval(ee),ee=null,Ee=!1,function(){try{ae(V),ae(B)}catch(be){P.error(be)}}())}catch(be){throw be}})(),_e()}},P=(0,N.Z)(Oe).getInstance().getLogger(L),_e(),L}Io.__dashjs_factory_name="EventController";var im=F.Z.getSingletonFactory(Io),Pi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Rf(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function fu(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,ue,Q,Pe,be,Fe,xe,pe,Ne,Xe,dt,ut,et,ht,jt,qt,Ft,Ut,An,it,yt,$t,Nt,en,Jt=this.context,Wt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&Ae&&Ae.hasOwnProperty("initialize")&&Ae.hasOwnProperty("reset")&&Ae.hasOwnProperty("getClientTimeOffset")&&H&&ke&&fe&&Ne))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function xn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Pt=re.getStreamsInfo();if(!Z&&Pt.length===0)throw new Error("There are no periods in the MPD");Z&&Pt.length>0&&fe.updateManifestUpdateInfo({currentTime:Ne.getTime(),buffered:pe.getBufferRange(),presentationStartTime:Pt[0].start,clientTimeOffset:Ae.getClientTimeOffset()}),Ge.length>0&&function(Ir){Ir.length!==0?Ge=Ge.filter(function(fr){var ri=Ir.filter(function(Qr){return Qr.id===fr.getId()}).length>0||fr.getId()===Z.getId();return ri||(P.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ri}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Pt);for(var yn=[],Hn=0,ur=Pt.length;Hn<ur;Hn++){var Tr=Pt[Hn];yn.push(At(Tr)),fe.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){Z?Ir():Xt(Pt,Ir,fr)})}).then(function(){Wt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){ke.error(new ce.Z(Te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),Fe=!0,Xa()}})()}function ir(){yt=!0}function At(Pt){var yn=Uc(Pt.id);return yn?yn.updateData(Pt):(yn=vs(Jt).create({manifestModel:H,mediaPlayerModel:dt,dashMetrics:fe,manifestUpdater:ee,adapter:re,timelineConverter:Ae,capabilities:B,capabilitiesFilter:V,errHandler:ke,baseURLController:ve,segmentBaseController:ge,textController:ae,abrController:Oe,playbackController:Ne,eventController:$e,mediaController:Ze,protectionController:le,videoModel:pe,streamInfo:Pt,settings:it}),Ge.push(yn),yn.initialize(),Promise.resolve())}function Xt(Pt,yn,Hn){try{On();var ur=fe.getCurrentDVRInfo().range;if(ur.end<ur.start){$t&&clearTimeout($t);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return P.debug("Waiting for ".concat(Tr," ms before playback can start")),Wt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void($t=setTimeout(function(){Xt(Pt,yn,Hn)},Tr))}it.get().streaming.applyProducerReferenceTime&&Xe.calculateProducerReferenceTimeOffsets(Pt);var Ir=Pt[0].manifestInfo;if(it.get().streaming.applyServiceDescription&&Xe.applyServiceDescription(Ir),re.getIsDynamic()){var fr=Qu(Pt,Ir);Ne.computeAndSetLiveDelay(fr,Ir)}(it.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ri=H.getValue();ri&&ve.update(ri),Gt(),yn()}).catch(function(ri){P.error(ri),Gt(),yn()})}catch(ri){Hn(ri)}}function Gt(){var Pt=function(){var ur;if(re.getIsDynamic()){var Tr=fe.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-Ne.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(Nt)&&Nt.toString().indexOf("posix:")===-1){var fr=io(!0);isNaN(fr)||(P.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{P.info("Start time provided by the app: ".concat(Nt));var ri=Zi(!0,Nt);isNaN(ri)||(ur=Math.min(ur,ri))}var Qr=it.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Qr)}}else if(ur=Zs()[0].getStreamInfo().start,isNaN(Nt)){var Gs=io(!1);isNaN(Gs)||(P.info("Start time from URI parameters: ".concat(Gs)),ur=Math.max(ur,Gs))}else{P.info("Start time provided by the app: ".concat(Nt));var qs=Zi(!1,Nt);isNaN(qs)||(ur=Math.max(ur,qs))}return ur}(),yn=Lt(Pt),Hn=yn!==null?yn:Ge[0];Wt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Pt}),un(Hn,null,Pt),qt||(qt=setInterval(function(){!Pe&&Ne.getTimeToStreamEnd()<=0&&!Ne.isSeeking()&&Wt.trigger(T.Z.PLAYBACK_ENDED,{isLast:ca().isLast})},200))}function un(Pt,yn,Hn){try{if(Pe||!Pt||yn===Pt&&Pt.getIsActive())return;Pe=!0,Wt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Pt.getStreamInfo()});var ur=!1;Z=Pt,yn&&(ur=Sn(Pt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Pt.getStreamInfo().start:NaN:Hn,P.info("Switch to stream ".concat(Pt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(Ne.getTime(),". Seamless period switch is set to ").concat(ur)),Ut=Ut.filter(function(Tr){return Tr.getId()!==Z.getId()}),Ne.initialize(ca(),!!yn),pe.getElement()?mn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Pe=!1}}function mn(Pt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(xe&&xe.readyState==="open"){P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),xe.removeEventListener("sourceopen",Tr),xe.removeEventListener("webkitsourceopen",Tr),zr();var fr=fe.getCurrentDVRInfo();we.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Pt)||Ne.seek(Pt,!0,!0),Z.setMediaSource(xe).then(function(){Z.initializeForTextWithMediaSource(xe)})):Pn(Pt,yn)}}function Ir(){xe.addEventListener("sourceopen",Tr,!1),xe.addEventListener("webkitsourceopen",Tr,!1),Hn=we.attachMediaSource(pe),P.debug("MediaSource attached to element.  Waiting on open...")}xe?yn?Pn(Pt,yn):(we.detachMediaSource(pe),Ir()):(xe=we.createMediaSource(),Ir())}function Pn(Pt,yn){Z.activate(xe,yn?Ft:void 0,Pt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),Ft=Hn}isNaN(Pt)||(Wt.trigger(T.Z.SEEK_TARGET,{time:Pt},{streamId:Z.getId()}),Ne.seek(Pt,!1,!0),Z.startScheduleControllers()),Pe=!1,Wt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ca()})})}function Nn(Pt){var yn=Lt(Pt.seekTime);yn&&yn!==Z?yn&&yn!==Z&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=Z.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,Z,Tr)}).catch(function(fr){ke.error(fr)})}(Pt,yn)):(Fn(),function(Hn){Z.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Po(tt.USER_REQUEST_STOP_REASON)}(Pt)),Eu(at.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ut&&Ut.length>0&&(Ut.forEach(function(Pt){Pt.deactivate(!0)}),Ut=[])}function It(Pt){if(Pt.newMediaInfo.streamInfo.id===Z.getId()){if(Gn(),it.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Pt.oldMediaInfo&&Pt.oldMediaInfo.codec!==Pt.newMediaInfo.codec){var yn=Ne.getTime();return Z.deactivate(!1),void mn(yn,!1,!1)}Z.prepareTrackChange(Pt)}}function Sn(Pt,yn){try{return it.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Pt)||yt)&&(An&&it.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Pt,yn))}catch(Hn){return!1}}function En(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(xe&&!Pt.getPreloaded()){var Hn=Sn(Pt,yn);Hn&&Pt.startPreloading(xe,Ft).then(function(){Ut.push(Pt)})}}function Lt(Pt){if(isNaN(Pt))return null;for(var yn=Ge.length,Hn=0;Hn<yn;Hn++){var ur=Ge[Hn];if(Pt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Pt=re.getIsDynamic(),yn=re.getStreamsInfo()[0].manifestInfo,Hn=Ne.getTime(),ur=Ae.calcTimeShiftBufferWindow(Ge,Pt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){fe.addDVRInfo(Ir.getType(),Hn,yn,ur)}):fe.addDVRInfo(y.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function lt(Pt){if(ht&&Q){var yn=dt.getInitialBufferLevel(),Hn=[y.Z.TEXT];(isNaN(yn)||yn<=Ne.getBufferLevel(Hn)||re.getIsDynamic()&&yn>Ne.getLiveDelay())&&(ht=!1,Eu(at.INITIAL_PLAYOUT_START_REASON),Ne.play())}Pt&&Pt.mediaType&&fe.addBufferLevel(Pt.mediaType,new Date,1e3*Pt.bufferLevel)}function nt(Pt){Pt.streamInfo.id===Z.getId()&&Pt.reason&&Pt.reason.forceReplace&&Gn(),Uc(Pt.streamInfo.id).prepareQualityChange(Pt)}function Kt(){if(re.getIsDynamic()&&Ne.getOriginalLiveDelay()!==0&&Z){var Pt=re.getStreamsInfo();if(Pt.length>0){var yn=Pt[0].manifestInfo,Hn=Qu(Pt,yn);Ne.computeAndSetLiveDelay(Hn,yn)}}}function Ye(){if($a()){var Pt=pe.getPlaybackQuality();Pt&&fe.addDroppedFrames(Pt)}}function ze(){P.debug("[onPlaybackStarted]"),!ht&&et&&Eu(at.RESUME_FROM_PAUSE_START_REASON),ht&&(ht=!1),jt&&(jt=!1,it.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),et=!1}function Dt(Pt){P.debug("[onPlaybackPaused]"),Pt.ended||(et=!0,Po(tt.USER_REQUEST_STOP_REASON))}function fn(Pt){P.debug("Stream with id ".concat(Pt.streamInfo.id," finished buffering"));var yn=Pt.streamInfo.isLast;xe&&yn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),we.signalEndOfStream(xe)):Tn()}function Tn(){if(Z&&Z.getHasFinishedBuffering())for(var Pt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||Z||null;if(Ir){var fr=Ir.getStreamInfo();return Ge.filter(function(ri){var Qr=ri.getStreamInfo();return Qr.start>fr.start&&fr.id!==Qr.id})}}catch(ri){return[]}}(Z),yn=0;yn<Pt.length;){var Hn=Pt[yn],ur=yn===0?Z:Pt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&xe&&En(Hn,ur),yn+=1}}function sr(){qt&&(clearInterval(qt),qt=null)}function Zr(){return Z?Z.getProcessors():[]}function Ai(Pt){if(Z&&!Z.getIsEndedEventSignaled()){Z.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||Z||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ri=-1,Qr=NaN;fr<Ge.length;){var Gs=Ge[fr].getStreamInfo(),qs=Gs.start-Ir;qs>0&&(isNaN(Qr)||qs<Qr)&&Tr.id!==Gs.id&&(Qr=qs,ri=fr),fr+=1}return ri>=0?Ge[ri]:null}();yn?(P.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(Z.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,Z,NaN)):(P.debug("StreamController no next stream found"),Z.setIsEndedEventSignaled(!1)),Po(yn?tt.END_OF_PERIOD_STOP_REASON:tt.END_OF_CONTENT_STOP_REASON)}Pt&&Pt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Pt){var yn=Pt||ca().manifestInfo.duration;we.setDuration(yn)}function io(Pt){var yn=Ke.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Zs()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],Bs(Pt,yn.t,Hn)}function Zi(Pt,yn){var Hn=0;return Pt||(Hn=Zs()[0].getStreamInfo().start),Bs(Pt,yn,Hn)}function Bs(Pt,yn,Hn){var ur=re.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Pt&&!isNaN(Ir)?Ae.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function Qu(Pt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Pt&&Pt.length===1){var ur=Pt[0],Tr=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT].reduce(function(fr,ri){var Qr=re.getMediaInfoForType(ur,ri);return Qr&&Qr.isFragmented!==!1&&fr.push(Qr),fr},[]).reduce(function(fr,ri){var Qr=re.getVoRepresentations(ri);return Qr&&Qr.length>0&&Qr.forEach(function(Gs){Gs&&fr.push(Gs)}),fr},[]).reduce(function(fr,ri){var Qr=re.convertRepresentationToRepresentationInfo(ri);return Qr&&Qr.fragmentDuration&&!isNaN(Qr.fragmentDuration)&&fr.push(Qr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return Rf(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ri){if(fr){if(typeof fr=="string")return Rf(fr,ri);var Qr=Object.prototype.toString.call(fr).slice(8,-1);return Qr==="Object"&&fr.constructor&&(Qr=fr.constructor.name),Qr==="Map"||Qr==="Set"?Array.from(fr):Qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qr)?Rf(fr,ri):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function Ju(Pt){if(Pt.error)Fe=!0,Xa();else{P.info("Manifest updated... updating data system wide.");var yn=Pt.manifest;re.updatePeriods(yn);var Hn=re.getUTCTimingSources();!re.getIsDynamic()||Hn&&Hn.length!==0||Wt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=re.getIsDynamic()?Hn.concat(ut.getUTCTimingSources()):Hn;V.filterUnsupportedFeatures(yn).then(function(){ve.initialize(yn),Ee.attemptSync(ur,re.getIsDynamic())})}}function $a(){return!!Z&&Z.getHasVideoTrack()}function js(){return!!Z&&Z.getHasAudioTrack()}function Po(Pt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Pt)}),fe.addPlayList()}function Eu(Pt){fe.createPlaylistMetrics(1e3*Ne.getTime(),Pt)}function _u(Pt){if(Pt.error){var yn="";switch(Pt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&it.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){P.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=Ne.getTime();Z.deactivate(!1),P.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),mn(Hn,!1,!1)}():(be=!0,Pt.error.message&&(yn+=" ("+Pt.error.message+")"),Pt.error.msExtendedCode&&(yn+=" (0x"+(Pt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+yn),Pt.error&&P.fatal(Pt.error),ke.error(new ce.Z(Pt.error.code,yn)),Xa())}}function ca(){return Z?Z.getStreamInfo():null}function Uc(Pt){for(var yn=0,Hn=Ge.length;yn<Hn;yn++)if(Ge[yn].getId()===Pt)return Ge[yn];return null}function Wf(Pt){isNaN(Pt.newDuration)||zr(Pt.newDuration)}function el(){Ge=[],Nt=NaN,le=null,Pe=!1,Z=null,be=!1,Fe=!1,ht=!0,jt=!0,et=!1,Q=!0,qt=null,yt=!1,An=!1,Ut=[],$t=null,en={counts:{mediaErrorDecode:0}}}function Xa(){Dn(),Ee.reset(),Po(be||Fe?tt.FAILURE_STOP_REASON:tt.USER_REQUEST_STOP_REASON);for(var Pt=0,yn=Ge?Ge.length:0;Pt<yn;Pt++)Ge[Pt].reset(be);Wt.off(_.Z.PLAYBACK_TIME_UPDATED,Ye,L),Wt.off(_.Z.PLAYBACK_SEEKING,Nn,L),Wt.off(_.Z.PLAYBACK_ERROR,_u,L),Wt.off(_.Z.PLAYBACK_STARTED,ze,L),Wt.off(_.Z.PLAYBACK_PAUSED,Dt,L),Wt.off(_.Z.PLAYBACK_ENDED,Ai,L),Wt.off(_.Z.METRIC_ADDED,Bc,L),Wt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Wf,L),Wt.off(_.Z.BUFFER_LEVEL_UPDATED,lt,L),Wt.off(_.Z.QUALITY_CHANGE_REQUESTED,nt,L),T.Z.KEY_SESSION_UPDATED&&Wt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Wt.off(T.Z.MANIFEST_UPDATED,Ju,L),Wt.off(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Wt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Wt.off(T.Z.CURRENT_TRACK_CHANGED,It,L),Wt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Wt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L),ve.reset(),ee.reset(),$e.reset(),fe.clearAllCurrentMetrics(),H.setValue(null),J.reset(),Ae.reset(),_e.reset(),xe&&(we.detachMediaSource(pe),xe=null),pe=null,le&&(le=null,ue=null,H.getValue()&&Wt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Wt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),el()}function Bc(Pt){if(Pt.metric===D.Z.DVR_INFO){var yn=js()?y.Z.AUDIO:y.Z.VIDEO;Pt.mediaType===yn&&we.setSeekable(Pt.value.range.start,Pt.value.range.end)}}function Zs(){return Ge}return L={initialize:function(Pt,yn){Dn(),Q=Pt,ue=yn,Ae.initialize(),(ee=Vr(Jt).create()).setConfig({manifestModel:H,adapter:re,manifestLoader:J,errHandler:ke,settings:it,contentSteeringController:ie}),ee.initialize(),($e=im(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:Ne,settings:it}),$e.start(),Ee.setConfig({dashMetrics:fe,baseURLController:ve,errHandler:ke,settings:it}),Ee.initialize(),we.setConfig({settings:it}),le&&(Wt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(pe.getElement()),ue&&le.setProtectionData(ue)),Wt.on(_.Z.PLAYBACK_TIME_UPDATED,Ye,L),Wt.on(_.Z.PLAYBACK_SEEKING,Nn,L),Wt.on(_.Z.PLAYBACK_ERROR,_u,L),Wt.on(_.Z.PLAYBACK_STARTED,ze,L),Wt.on(_.Z.PLAYBACK_PAUSED,Dt,L),Wt.on(_.Z.PLAYBACK_ENDED,Ai,L),Wt.on(_.Z.METRIC_ADDED,Bc,L),Wt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Wf,L),Wt.on(_.Z.BUFFER_LEVEL_UPDATED,lt,L),Wt.on(_.Z.QUALITY_CHANGE_REQUESTED,nt,L),T.Z.KEY_SESSION_UPDATED&&Wt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Wt.on(T.Z.MANIFEST_UPDATED,Ju,L),Wt.on(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Wt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Wt.on(T.Z.CURRENT_TRACK_CHANGED,It,L),Wt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Wt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L)},getActiveStreamInfo:ca,addDVRMetric:On,hasVideoTrack:$a,hasAudioTrack:js,getStreamById:Uc,getStreamForTime:Lt,getTimeRelativeToStreamId:function(Pt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<Ge.length;fr++){if(Tr=(Hn=Ge[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Pt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),Nt=yn,J.load(Pt)},loadWithManifest:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;xn(),Nt=yn,ee.setManifest(Pt)},getActiveStreamProcessors:Zr,setConfig:function(Pt){Pt&&(Pt.capabilities&&(B=Pt.capabilities),Pt.capabilitiesFilter&&(V=Pt.capabilitiesFilter),Pt.manifestLoader&&(J=Pt.manifestLoader),Pt.manifestModel&&(H=Pt.manifestModel),Pt.mediaPlayerModel&&(dt=Pt.mediaPlayerModel),Pt.customParametersModel&&(ut=Pt.customParametersModel),Pt.protectionController&&(le=Pt.protectionController),Pt.adapter&&(re=Pt.adapter),Pt.dashMetrics&&(fe=Pt.dashMetrics),Pt.errHandler&&(ke=Pt.errHandler),Pt.timelineConverter&&(Ae=Pt.timelineConverter),Pt.videoModel&&(pe=Pt.videoModel),Pt.playbackController&&(Ne=Pt.playbackController),Pt.serviceDescriptionController&&(Xe=Pt.serviceDescriptionController),Pt.contentSteeringController&&(ie=Pt.contentSteeringController),Pt.textController&&(ae=Pt.textController),Pt.abrController&&(Oe=Pt.abrController),Pt.mediaController&&(Ze=Pt.mediaController),Pt.settings&&(it=Pt.settings),Pt.baseURLController&&(ve=Pt.baseURLController),Pt.uriFragmentModel&&(Ke=Pt.uriFragmentModel),Pt.segmentBaseController&&(ge=Pt.segmentBaseController),Pt.manifestUpdater&&(ee=Pt.manifestUpdater))},setProtectionData:function(Pt){ue=Pt,le&&le.setProtectionData(ue)},getIsStreamSwitchInProgress:function(){return Pe},switchToVideoElement:function(Pt){Z&&(Ne.initialize(ca()),mn(Pt,!1,!0))},getHasMediaOrInitialisationError:function(){return be||Fe},getStreams:Zs,getActiveStream:function(){return Z},getInitialPlayback:function(){return ht},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:Xa},P=(0,N.Z)(Jt).getInstance().getLogger(L),Ee=Ka(Jt).getInstance(),we=wh(Jt).getInstance(),_e=We(Jt).getInstance(),el(),L}fu.__dashjs_factory_name="StreamController";var qo=F.Z.getSingletonFactory(fu);function du(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve=this.context,ge=(0,m.Z)(ve).getInstance();function Ke(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){ge.off(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ge.off(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.off(T.Z.PLAYBACK_SEEKING,Oe,this),ge.off(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,L),ge.off(T.Z.TRACK_CHANGE_RENDERED,$e,L)}(),ee=null,J=NaN,V=0,we=null,Ee={}}function Oe(){we&&(clearTimeout(we),we=null)}function Ze(ue){try{if(ue.streamId!==re.getActiveStreamInfo().id||ue.mediaType!==y.Z.VIDEO&&ue.mediaType!==y.Z.AUDIO)return;ue.streamId===re.getActiveStreamInfo().id&&(Ee[ue.mediaType]=!0)}catch(Q){ie.error(Q)}}function $e(ue){ue&&ue.mediaType&&(Ee[ue.mediaType]=!1)}function _e(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){Ae()&&ae(H.getTime())},100))}catch(ue){}}()}function ke(){if(Ae(B.get().streaming.gaps.enableSeekFix)&&++V>=10){var ue=H.getTime();P===ue?ae(ue,!0):(P=ue,J=NaN),V=0}}function Ae(){var ue=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!re.getActiveStream())return!1;var Q=Object.keys(Ee).some(function(be){return Ee[be]}),Pe=!!ue&&Ge();return!Q&&B.get().streaming.gaps.jumpGaps&&re.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Pe)&&!H.isPaused()&&!re.getIsStreamSwitchInProgress()&&!re.getHasMediaOrInitialisationError()}function Ge(){var ue=re.getActiveStream(),Q=parseFloat((ue.getStartTime()+ue.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function Z(ue,Q){try{if(!ue||ue.length<=1&&Q>0)return NaN;for(var Pe=NaN,be=0;isNaN(Pe)&&be<ue.length;){var Fe=be>0?ue.end(be-1):0;Q<ue.start(be)&&Fe-Q<B.get().streaming.gaps.threshold&&(Pe=be),be+=1}return Pe}catch(xe){return null}}function le(ue,Q){for(var Pe=0,be=ue.length;Pe<be;Pe++)if(Q>=ue.start(Pe)&&Q<=ue.end(Pe))return!0;return!1}function ae(ue){var Q,Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],be=B.get().streaming.gaps.enableStallFix,Fe=B.get().streaming.gaps.stallSeek,xe=B.get().streaming.gaps.smallGapLimit,pe=B.get().streaming.gaps.jumpLargeGaps,Ne=fe.getBufferRange(),Xe=NaN,dt=!1;if(Q=Z(Ne,ue),!isNaN(Q)){var ut=Ne.start(Q),et=ut-ue;et>0&&(et<=xe||pe)&&(Xe=ut)}var ht=H.getTimeToStreamEnd();if(isNaN(Xe)&&Pe&&isFinite(ht)&&!isNaN(ht)&&ht<xe&&(Xe=parseFloat(H.getStreamEndTime().toFixed(5)),dt=!0),be&&isNaN(Xe)&&Pe&&isNaN(Q)&&le(Ne,ue)&&(Fe===0?(ie.warn("Toggle play pause to break stall"),fe.pause(),fe.play()):(ie.warn("Jumping ".concat(Fe,"s to break stall")),Xe=ue+Fe)),Xe>0&&J!==Xe&&Xe>ue&&!we){var jt=Xe-ue;if(dt){var qt=re.getStreamForTime(Xe),Ft=qt&&!!qt.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(ue," to ").concat(Xe,". Gap duration: ").concat(jt)),H.seek(Xe,!0,Ft)}else{var Ut=H.getIsDynamic(),An=Q>0?Ne.end(Q-1):ue,it=Ut?1e3*Math.max(0,jt-.1):0;we=window.setTimeout(function(){H.seek(Xe,!0,!0),ie.warn("Jumping gap occuring in period ".concat(re.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(Xe,". Jumping by: ").concat(Xe-An)),we=null},it)}J=Xe}}return L={reset:Ke,setConfig:function(ue){ue&&(ue.settings&&(B=ue.settings),ue.playbackController&&(H=ue.playbackController),ue.streamController&&(re=ue.streamController),ue.videoModel&&(fe=ue.videoModel))},initialize:function(){(function(){ge.on(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),ge.on(T.Z.INITIAL_STREAM_SWITCH,_e,this),ge.on(T.Z.PLAYBACK_SEEKING,Oe,this),ge.on(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,L),ge.on(T.Z.TRACK_CHANGE_RENDERED,$e,L)})()}},ie=(0,N.Z)(ve).getInstance().getLogger(L),Ke(),L}du.__dashjs_factory_name="GapController";var Ps=F.Z.getSingletonFactory(du);function li(){var L,P,B,V,ee,J,H,re,fe,we,Ee=this.context,ie=(0,m.Z)(Ee).getInstance();function ve(){P=!1;var Ge=rn.Z.parseUserAgent();B=Ge&&Ge.browser&&Ge.browser.name&&Ge.browser.name.toLowerCase()==="safari"}function ge(){P=!1}function Ke(Ge){if(Ge.streamId===J.getActiveStreamInfo().id&&fe){var Z=H.getLiveDelay();H.getBufferLevel()>Z/2&&(fe=!1)}}function Oe(Ge){Ge.streamId===J.getActiveStreamInfo().id&&(fe=Ge.state===D.Z.BUFFER_EMPTY)}function Ze(){re.getCatchupModeEnabled()||V.setPlaybackRate(1)}function $e(){H.getIsDynamic()&&re.getCatchupModeEnabled()&&(re.getCatchupPlaybackRates().max>0||re.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||P)&&(ke()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Ge,Z){try{return Math.abs(_e())>0||Ge<Z}catch(le){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(_e())>0}catch(Ge){return!1}}())}catch(Ge){return!1}}()&&function(){if(!P&&V){var Ge,Z=V.getPlaybackRate(),le=re.getCatchupPlaybackRates(),ae=H.getBufferLevel(),ue=_e(),Q=re.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&ue>Q)we.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,H.seekToCurrentLive(!0,!1);else{var Pe=H.getCurrentLiveLatency(),be=H.getLiveDelay();Ge=ke()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(xe,pe,Ne,Xe,dt){var ut;if(dt<Xe){var et=Math.abs(xe.min),ht=5*(dt-Xe);ut=1-et+2*et/(1+Math.pow(Math.E,-ht)),we.debug("[LoL+ playback control_buffer-based] bufferLevel: "+dt+", newRate: "+ut)}else{if(Math.abs(pe-Ne)<=.02*Ne)ut=1;else{var jt=pe-Ne,qt=jt<0?Math.abs(xe.min):xe.max,Ft=5*jt;ut=1-qt+2*qt/(1+Math.pow(Math.E,-Ft))}we.debug("[LoL+ playback control_latency-based] latency: "+pe+", newRate: "+ut)}return ut}(le,Pe,be,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(xe,pe,Ne,Xe){if(fe)return 1;var dt=pe-Ne,ut=dt<0?Math.abs(xe.min):xe.max,et=5*dt,ht=1-ut+2*ut/(1+Math.pow(Math.E,-et));return H.getPlaybackStalled()&&Xe<=Ne/2&&dt>0&&(ht=1),ht}(le,Pe,be,ae);var Fe=B?.25:.02/(.5/le.max);Ge&&Math.abs(Z-Ge)>=Fe&&(we.debug("[CatchupController]: Setting playback rate to ".concat(Ge)),V.setPlaybackRate(Ge))}}}()}function _e(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function ke(){var Ge=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==y.Z.LIVE_CATCHUP_MODE_LOLP||Ge===null||isNaN(Ge)?y.Z.LIVE_CATCHUP_MODE_DEFAULT:y.Z.LIVE_CATCHUP_MODE_LOLP}function Ae(){re.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,Ke,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),ie.off(_.Z.PLAYBACK_PROGRESS,$e,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,$e,L),ie.off(_.Z.PLAYBACK_SEEKED,ge,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,L),ie.off(_.Z.STREAM_INITIALIZED,Ae,L),ve(),V.setPlaybackRate(1,!0)},setConfig:function(Ge){Ge&&(Ge.settings&&(ee=Ge.settings),Ge.videoModel&&(V=Ge.videoModel),Ge.streamController&&(J=Ge.streamController),Ge.playbackController&&(H=Ge.playbackController),Ge.mediaPlayerModel&&(re=Ge.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,Ke,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),ie.on(_.Z.PLAYBACK_PROGRESS,$e,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,$e,L),ie.on(_.Z.PLAYBACK_SEEKED,ge,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,L),ie.on(_.Z.STREAM_INITIALIZED,Ae,L),Ae()}},we=(0,N.Z)(Ee).getInstance().getLogger(L),ve(),L}li.__dashjs_factory_name="CatchupController";var co=F.Z.getSingletonFactory(li),ku=[y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Ah="video",Fu="audio";function bo(){var L,P,B,V,ee,J=this.context;function H(){P={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function re(fe,we,Ee){try{P[fe][we]=Ee/1e3}catch(ie){V.error(ie)}}return L={getServiceDescriptionSettings:function(){return P},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(fe){try{var we=[];if(fe&&fe.length>0){var Ee=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;fe.forEach(function(ve){var ge=Ee.reduce(function(Ke,Oe){return Ke.concat(ee.getAllMediaInfoForType(ve,Oe))},[]).reduce(function(Ke,Oe){return ee.getProducerReferenceTimes(ve,Oe).forEach(function(Ze){var $e=ee.getVoRepresentations(Oe);if($e&&$e.length>0&&$e[0].adaptation&&$e[0].segmentInfoType===v.Z.SEGMENT_TEMPLATE){var _e=$e[0],ke=new Date(Ze[v.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Ze[v.Z.PRESENTATION_TIME]/_e[v.Z.TIMESCALE]-_e[v.Z.PRESENTATION_TIME_OFFSET]+ve.start),Ae=ie-ke;Ke.push({id:Ze[v.Z.ID],to:Ae})}}),Ke},[]);we=we.concat(ge)})}B=we}catch(ve){V.error(ve),B=[]}},applyServiceDescription:function(fe){if(fe&&fe.serviceDescriptions){var we=fe.serviceDescriptions.filter(function(ve){return ku.includes(ve.schemeIdUri)}),Ee=fe.serviceDescriptions.filter(function(ve){return ve.schemeIdUri==null}),ie=we.length>0?we[we.length-1]:Ee[Ee.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(ve){var ge;if(ve.schemeIdUri,y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ge=function($e){return{liveDelay:$e.latency.target/1e3,maxDrift:!isNaN($e.latency.max)&&$e.latency.max>$e.latency.target?($e.latency.max-$e.latency.target+500)/1e3:NaN,referenceId:$e.latency.referenceId||NaN}}(ve),B.length>0){var Ke=function($e){var _e,ke=0,Ae=B.filter(function(Ge){return Ge.id===$e.referenceId});return Ae.length===0?(ke=B.length>0?B[0].to:0,_e=B[0].id||NaN):(ke=Ae[0].to||0,_e=Ae[0].id||NaN),{to:ke,id:_e}}(ge),Oe=Ke.to,Ze=Ke.id;P.liveDelay=ge.liveDelay-Oe,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Oe," from ProducerReferenceTime element with id ").concat(Ze,".\n                Live Delay: ").concat(ge.liveDelay-Oe,", Live catchup max drift: ").concat(ge.maxDrift,"\n            "))}else P.liveDelay=ge.liveDelay,P.liveCatchup.maxDrift=ge.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(ge.liveDelay,", Live catchup max drift: ").concat(ge.maxDrift))}(ie),ie.playbackRate&&function(ve){var ge=ve.playbackRate.min?Math.round(1e3*(ve.playbackRate.min-1))/1e3:NaN,Ke=ve.playbackRate.max?Math.round(1e3*(ve.playbackRate.max-1))/1e3:NaN;P.liveCatchup.playbackRate.min=ge,P.liveCatchup.playbackRate.max=Ke,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ge)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(Ke))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(ve){if(ve&&ve.operatingBandwidth&&ve.operatingBandwidth.mediaType&&ve.operatingBandwidth.mediaType!=="all"){var ge={};ge.minBandwidth=ve.operatingBandwidth.min,ge.maxBandwidth=ve.operatingBandwidth.max,ge.targetBandwidth=ve.operatingBandwidth.target;var Ke=[];ve.operatingBandwidth.mediaType===Ah||ve.operatingBandwidth.mediaType===Fu?Ke.push(ve.operatingBandwidth.mediaType):ve.operatingBandwidth.mediaType==="any"&&(Ke.push(Fu),Ke.push(Ah)),Ke.forEach(function(Oe){isNaN(ge.minBandwidth)||re("minBitrate",Oe,ge.minBandwidth),isNaN(ge.maxBandwidth)||re("maxBitrate",Oe,ge.maxBandwidth),isNaN(ge.targetBandwidth)||re("initialBitrate",Oe,ge.targetBandwidth)})}}(ie),ie.contentSteering&&function(ve){P.contentSteering=ve.contentSteering}(ie))}},reset:function(){H()},setConfig:function(fe){fe&&fe.adapter&&(ee=fe.adapter)}},V=(0,N.Z)(J).getInstance().getLogger(L),H(),L}bo.__dashjs_factory_name="ServiceDescriptionController";var Ih=F.Z.getSingletonFactory(bo),vr=w(3973),yi=w.n(vr),bh=w(3039);function _c(){var L,P,B,V,ee,J,H,re,fe=this.context,we=(0,m.Z)(fe).getInstance();function Ee(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].list:[]}function ie(pe,Ne){return pe&&B[Ne]&&B[Ne][pe]?B[Ne][pe].current:null}function ve(pe){var Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(pe&&pe.streamInfo){var Xe=pe.type,dt=pe.streamInfo,ut=dt.id,et=ie(Xe,ut);if(B[ut]&&B[ut][Xe]&&(B[ut][Xe].current=pe,B[ut][Xe].current&&(Xe!==y.Z.TEXT&&!Oe(pe,et)||Xe===y.Z.TEXT&&pe.isFragmented)&&we.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:et,newMediaInfo:pe,switchMode:V.get().streaming.trackSwitchMode[Xe]},{streamId:ut}),!Ne)){var ht=$e(pe);if(!ht||!B[ut][Xe].storeLastSettings)return;ht.roles&&(ht.role=ht.roles[0],delete ht.roles),ht.accessibility&&(ht.accessibility=ht.accessibility[0]),ht.audioChannelConfiguration&&(ht.audioChannelConfiguration=ht.audioChannelConfiguration[0]),J[Xe]=ht,re.setSavedMediaSettings(Xe,ht)}}}function ge(pe,Ne){pe&&Ne&&(ee[pe]=Ne)}function Ke(pe){return pe?ee[pe]:null}function Oe(pe,Ne){if(!pe&&!Ne)return!0;if(!pe||!Ne)return!1;var Xe=pe.id===Ne.id,dt=pe.viewpoint===Ne.viewpoint,ut=JSON.stringify(pe.viewpointsWithSchemeIdUri)===JSON.stringify(Ne.viewpointsWithSchemeIdUri),et=pe.lang===Ne.lang,ht=pe.codec===Ne.codec,jt=pe.roles.toString()===Ne.roles.toString(),qt=JSON.stringify(pe.rolesWithSchemeIdUri)===JSON.stringify(Ne.rolesWithSchemeIdUri),Ft=pe.accessibility.toString()===Ne.accessibility.toString(),Ut=JSON.stringify(pe.accessibilitiesWithSchemeIdUri)===JSON.stringify(Ne.accessibilitiesWithSchemeIdUri),An=pe.audioChannelConfiguration.toString()===Ne.audioChannelConfiguration.toString(),it=JSON.stringify(pe.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Ne.audioChannelConfigurationsWithSchemeIdUri);return Xe&&ht&&dt&&ut&&et&&jt&&qt&&Ft&&Ut&&An&&it}function Ze(){B={},J={},ee={audio:null,video:null,text:null}}function $e(pe){var Ne={lang:pe.lang,viewpoint:pe.viewpoint,roles:pe.roles,accessibility:pe.accessibility,audioChannelConfiguration:pe.audioChannelConfiguration,codec:pe.codec};return Ne.lang||Ne.viewpoint||Ne.role&&Ne.role.length>0||Ne.accessibility&&Ne.accessibility.length>0||Ne.audioChannelConfiguration&&Ne.audioChannelConfiguration.length>0?Ne:null}function _e(pe,Ne,Xe){var dt=[];return pe.forEach(function(ut){Ne(Xe,ut)&&dt.push(ut)}),dt.length!==0?dt:pe}function ke(pe,Ne){try{return!pe.lang||pe.lang instanceof RegExp?Ne.lang.match(pe.lang):Ne.lang!==""&&(0,bh.extendedFilter)(Ne.lang,yi()(pe.lang)).length>0}catch(Xe){return!1}}function Ae(pe,Ne){return pe.index===void 0||pe.index===null||Ne.index===pe.index}function Ge(pe,Ne){return!pe.viewpoint||pe.viewpoint===Ne.viewpoint}function Z(pe,Ne){var Xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],dt=!pe.role||!!Ne.roles.filter(function(ut){return ut===pe.role})[0];return dt||Ne.type===y.Z.AUDIO&&Xe}function le(pe,Ne){return pe.accessibility?!!Ne.accessibility.filter(function(Xe){return Xe===pe.accessibility})[0]:!Ne.accessibility.length}function ae(pe,Ne){return!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Xe){return Xe===pe.audioChannelConfiguration})[0]}function ue(pe,Ne){return!pe.codec||pe.codec===Ne.codec}function Q(pe){var Ne,Xe=0,dt=[];return pe.forEach(function(ut){(Ne=Math.max.apply(Math,ut.bitrateList.map(function(et){return et.bandwidth})))>Xe?(Xe=Ne,dt=[ut]):Ne===Xe&&dt.push(ut)}),dt}function Pe(pe){var Ne,Xe=1/0,dt=[];return pe.forEach(function(ut){var et=ut.bitrateList.reduce(function(ht,jt){var qt=Math.max(1,jt.width*jt.height);return ht+jt.bandwidth/qt},0);(Ne=et/ut.bitrateList.length)<Xe?(Xe=Ne,dt=[ut]):Ne===Xe&&dt.push(ut)}),dt}function be(pe){var Ne,Xe=0,dt=[];return pe.forEach(function(ut){(Ne=ut.representationCount)>Xe?(Xe=Ne,dt=[ut]):Ne===Xe&&dt.push(ut)}),dt}function Fe(pe,Ne){if(pe===y.Z.TEXT)return Ne[0];var Xe,dt=V.get().streaming.selectionModeForInitialTrack,ut=H.getCustomInitialTrackSelectionFunction();if(ut&&typeof ut=="function")Xe=ut(Ne);else switch(dt){case y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Xe=function(et){var ht,jt,qt=(ht=0,jt=[],et.forEach(function(Ft){isNaN(Ft.selectionPriority)||(Ft.selectionPriority>ht?(ht=Ft.selectionPriority,jt=[Ft]):Ft.selectionPriority===ht&&jt.push(Ft))}),jt);return qt.length>1&&(qt=Q(qt)),qt.length>1&&(qt=be(qt)),qt}(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Xe=function(et){var ht=Q(et);return ht.length>1&&(ht=be(ht)),ht}(Ne);break;case y.Z.TRACK_SELECTION_MODE_FIRST_TRACK:Xe=xe(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Xe=function(et){var ht=Pe(et);return ht.length>1&&(ht=Q(ht)),ht}(Ne);break;case y.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:Xe=function(et){var ht=be(et);return ht.length>1&&(ht=Q(et)),ht}(Ne);break;default:P.warn("Track selection mode ".concat(dt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Xe=xe(Ne)}return Xe.length>0?Xe[0]:Ne[0]}function xe(pe){return pe[0]}return L={setInitialMediaSettingsForType:function(pe,Ne){var Xe=J[pe]||Ke(pe),dt=Ee(pe,Ne.id),ut=[];Xe||((Xe=re.getSavedMediaSettings(pe))&&delete Xe.codec,ge(pe,Xe)),dt&&dt.length!==0&&(Xe&&(ut=_e(ut=Array.from(dt),ke,Xe),ut=_e(ut,Ae,Xe),ut=_e(ut,Ge,Xe),pe===y.Z.AUDIO&&J[pe]||(ut=_e(ut,Z,Xe)),ut=_e(ut,le,Xe),ut=_e(ut,ae,Xe),ut=_e(ut,ue,Xe)),ut.length===0?ve(Fe(pe,dt),!0):ut.length>1?ve(Fe(pe,ut)):ve(ut[0]))},addTrack:function(pe){if(pe){var Ne=pe.type;if((Xe=Ne)===y.Z.AUDIO||Xe===y.Z.VIDEO||Xe===y.Z.TEXT||Xe===y.Z.IMAGE){var Xe,dt,ut=pe.streamInfo.id;B[ut]||(B[ut]={audio:{list:[],storeLastSettings:dt=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:dt,current:null},text:{list:[],storeLastSettings:dt,current:null},image:{list:[],storeLastSettings:dt,current:null}});for(var et=B[ut][Ne].list,ht=0,jt=et.length;ht<jt;++ht)if(Oe(et[ht],pe))return;et.push(pe)}}},getTracksFor:Ee,getCurrentTrackFor:ie,isCurrentTrack:function(pe){if(!pe)return!1;var Ne=pe.type,Xe=pe.streamInfo.id;return B[Xe]&&B[Xe][Ne]&&Oe(B[Xe][Ne].current,pe)},setTrack:ve,selectInitialTrack:Fe,setInitialSettings:ge,getInitialSettings:Ke,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Pe,getTracksWithWidestRange:be,isTracksEqual:Oe,matchSettings:function(pe,Ne){var Xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var dt=!1;if(pe.lang){if(pe.lang instanceof RegExp)dt=Ne.lang.match(pe.lang);else if(Ne.lang!==""){var ut=yi()(pe.lang);ut&&(dt=(0,bh.extendedFilter)(Ne.lang,ut).length>0)}}else dt=!0;var et=pe.index===void 0||pe.index===null||Ne.index===pe.index,ht=!pe.viewpoint||pe.viewpoint===Ne.viewpoint,jt=!pe.role||!!Ne.roles.filter(function(Ut){return Ut===pe.role})[0],qt=!pe.accessibility||!!Ne.accessibility.filter(function(Ut){return Ut===pe.accessibility})[0],Ft=!pe.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ut){return Ut===pe.audioChannelConfiguration})[0];return dt&&et&&ht&&(jt||Ne.type===y.Z.AUDIO&&Xe)&&qt&&Ft}catch(Ut){return!1}},matchSettingsLang:ke,matchSettingsIndex:Ae,matchSettingsViewPoint:Ge,matchSettingsRole:Z,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){re.setSavedMediaSettings(y.Z.TEXT,null)},setConfig:function(pe){pe&&(pe.domStorage&&(re=pe.domStorage),pe.settings&&(V=pe.settings),pe.customParametersModel&&(H=pe.customParametersModel))},reset:Ze},P=(0,N.Z)(fe).getInstance().getLogger(L),Ze(),L}_c.__dashjs_factory_name="MediaController";var Si=F.Z.getSingletonFactory(_c);F.Z.updateSingletonFactory(_c.__dashjs_factory_name,Si);var Uu=Si,Os=NaN,om=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:P||null,selectedIdx:B||Os},this.children=[]};function xf(){var L,P,B,V,ee=this.context,J=gn(ee).getInstance();function H(Ee,ie,ve){var ge=re(ve);Ee[ie]?J.areEqual(ge,Ee[ie].data.baseUrls)||(Ee[ie].data.baseUrls=ge,Ee[ie].data.selectedIdx=Os):Ee[ie]=new om(ge)}function re(Ee){var ie=B.getBaseURLsFromElement(Ee),ve=V.getSynthesizedBaseUrlElements(ie);return ve&&ve.length>0&&(ie=ie.concat(ve)),ie}function fe(Ee,ie){var ve=ie||P;Ee(ve.data),ve.children&&ve.children.forEach(function(ge){return fe(Ee,ge)})}function we(){P=new om}return L={reset:we,update:function(Ee){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var ve=re(ie);J.areEqual(ve,P.data.baseUrls)||(P.data.baseUrls=ve,P.data.selectedIdx=Os),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(ge,Ke){H(P.children,Ke,ge),ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.forEach(function(Oe,Ze){H(P.children[Ke].children,Ze,Oe),Oe.Representation_asArray&&Oe.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function($e,_e){H(P.children[Ke].children[Ze].children,_e,$e)})})})})(Ee)},getForPath:function(Ee){var ie=P,ve=[ie.data];return Ee&&Ee.forEach(function(ge){(ie=ie.children[ge])&&ve.push(ie.data)}),ve.filter(function(ge){return ge.baseUrls.length})},invalidateSelectedIndexes:function(Ee){fe(function(ie){isNaN(ie.selectedIdx)||Ee===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Os)})},setConfig:function(Ee){Ee.adapter&&(B=Ee.adapter),Ee.contentSteeringController&&(V=Ee.contentSteeringController)},getBaseUrls:function(Ee){return re(Ee)}},we(),L}xf.__dashjs_factory_name="BaseURLTreeModel";var wa=F.Z.getClassFactory(xf);function Va(L){var P=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,re=0,fe=[],we=0;if((H=ee.sort(function(Ee,ie){var ve=Ee.dvbPriority-ie.dvbPriority;return isNaN(ve)?0:ve}).filter(function(Ee,ie,ve){return!ie||ve[0].dvbPriority&&Ee.dvbPriority&&ve[0].dvbPriority===Ee.dvbPriority})).length)return H.length>1&&(H.forEach(function(Ee){re+=Ee.dvbWeight,fe.push(re)}),J=Math.floor(Math.random()*(re-1)),fe.every(function(Ee,ie){return we=ie,!(J<Ee)})),H[we]}((V=[],B.filter(function(ee){return!P.contains(ee.serviceLocation)||(ee.dvbPriority&&V.push(ee.dvbPriority),!1)}).filter(function(ee){return!V.length||!ee.dvbPriority||V.indexOf(ee.dvbPriority)===-1})));var V}}}Va.__dashjs_factory_name="DVBSelector";var Aa=F.Z.getClassFactory(Va);function Do(L){var P=(L=L||{}).blacklistController;return{select:function(B){var V,ee=0;return B&&B.some(function(J,H){return ee=H,!P.contains(J.serviceLocation)})&&(V=B[ee]),V}}}Do.__dashjs_factory_name="BasicSelector";var am=F.Z.getClassFactory(Do);function Ch(){var L,P,B,V=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=0,fe=NaN,we=function(){var ie=J[re],ve=H.findIndex(function(ge){return ge.serviceLocation&&ge.serviceLocation===ie});if(ve!==-1&&!B.contains(H[ve].serviceLocation))return fe=ve,"break";re+=1};re<J.length;){var Ee=we();if(Ee==="break")break}return fe}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var re=P.getSteeringDataFromManifest();re&&re.defaultServiceLocationArray.length>0&&(H=ee(re.defaultServiceLocationArray,J.baseUrls))}var fe=P.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&fe&&fe.pathwayPriority&&fe.pathwayPriority.length&&(H=ee(fe.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(P=J.contentSteeringController)}},P=Sa(V).getInstance(),L}Ch.__dashjs_factory_name="ContentSteeringSelector";var mE=F.Z.getClassFactory(Ch);function hu(){var L,P,B,V,ee,J,H=this.context,re=(0,m.Z)(H).getInstance(),fe=(0,je.Z)(H).getInstance();function we(){P.reset()}return L={chooseSelector:function(Ee){(0,he.PS)(Ee,"boolean"),J=Ee?V:B},select:function(Ee){if(Ee){if(fe.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(Ee);isNaN(ie)||ie===-1||(Ee.selectedIdx=ie)}if(!isNaN(Ee.selectedIdx))return Ee.baseUrls[Ee.selectedIdx];var ve=J.select(Ee.baseUrls);return ve?(Ee.selectedIdx=Ee.baseUrls.indexOf(ve),ve):(re.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new ce.Z(Te.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Te.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&we()))}},reset:we,setConfig:function(Ee){Ee.selector&&(J=Ee.selector),Ee.contentSteeringSelector&&(ee=Ee.contentSteeringSelector)}},P=ms(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=am(H).create({blacklistController:P}),V=Aa(H).create({blacklistController:P}),(ee=mE(H).create()).setConfig({blacklistController:P}),J=B,L}hu.__dashjs_factory_name="BaseURLSelector";var Ls=F.Z.getClassFactory(hu);function bl(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance(),re=(0,St.Z)(J).getInstance();function fe(Ee){B.update(Ee),V.chooseSelector(P.getIsDVB(Ee)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:we(Ee)})}function we(Ee){return B.getBaseUrls(Ee)}return L={reset:function(){B.reset(),V.reset()},initialize:function(Ee){B.setConfig({adapter:P,contentSteeringController:ee}),fe(Ee)},resolve:function(Ee){var ie=B.getForPath(Ee).reduce(function(ve,ge){var Ke=V.select(ge);return Ke?(re.isRelative(Ke.url)?ve.url=re.resolve(Ke.url,ve.url):(ve.url=Ke.url,ve.serviceLocation=Ke.serviceLocation),ve.availabilityTimeOffset=Ke.availabilityTimeOffset,ve.availabilityTimeComplete=Ke.availabilityTimeComplete,ve.queryParams=Ke.queryParams,ve):new Qn},new Qn);if(!re.isRelative(ie.url))return ie},setConfig:function(Ee){Ee.baseURLTreeModel&&(B=Ee.baseURLTreeModel),Ee.baseURLSelector&&(V=Ee.baseURLSelector),Ee.adapter&&(P=Ee.adapter),Ee.contentSteeringController&&(ee=Ee.contentSteeringController)},getBaseUrls:we,update:fe},B=wa(J).create(),V=Ls(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Ee){B.invalidateSelectedIndexes(Ee.entry)},L),L}bl.__dashjs_factory_name="BaseURLController";var vE=F.Z.getClassFactory(bl);function Rh(L){return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Rh(L)}function Nf(L,P){return Nf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Nf(L,P)}function sm(L,P){return!P||Rh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Mf(L){return Mf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Mf(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Nf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Mf(P);if(B){var re=Mf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return sm(this,J)});function ee(J,H){var re;return function(fe,we){if(!(fe instanceof we))throw new TypeError("Cannot call a class as a function")}(this,ee),(re=V.call(this)).url=J||null,re.type=H||null,re.mediaType=y.Z.STREAM,re.responseType="",re}return ee}(j.Z);function um(L){L=L||{};var P=this.context,B=(0,m.Z)(P).getInstance(),V=wo(P).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Te});return{load:function(ee,J,H){var re=function(we,Ee){J.resolved=!0,J.resolvedContent=we||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:we||Ee?null:new ce.Z(Te.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Te.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")re(null,!0);else{var fe=new ji(ee,ot.w.XLINK_EXPANSION_TYPE);V.load({request:fe,success:function(we){re(we)},error:function(){re(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}um.__dashjs_factory_name="XlinkLoader";var lm=F.Z.getClassFactory(um),Bu=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function P(_e){var ke=_e.localName;return ke==null&&(ke=_e.baseName),ke!=null&&ke!=""||(ke=_e.nodeName),ke}function B(_e){return typeof _e=="string"?_e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):_e}function V(_e,ke,Ae,Ge){for(var Z=0;Z<_e.length;Z++){var le=_e[Z];if(typeof le=="string"){if(le==Ge)break}else if(le instanceof RegExp){if(le.test(Ge))break}else if(typeof le=="function"&&le(ke,Ae,Ge))break}return Z!=_e.length}function ee(_e,ke,Ae){L.arrayAccessForm==="property"&&(_e[ke]instanceof Array?_e[ke+"_asArray"]=_e[ke]:_e[ke+"_asArray"]=[_e[ke]]),!(_e[ke]instanceof Array)&&L.arrayAccessFormPaths.length>0&&V(L.arrayAccessFormPaths,_e,ke,Ae)&&(_e[ke]=[_e[ke]])}function J(_e){var ke=_e.split(/[-T:+Z]/g),Ae=new Date(ke[0],ke[1]-1,ke[2]),Ge=ke[5].split(".");if(Ae.setHours(ke[3],ke[4],Ge[0]),Ge.length>1&&Ae.setMilliseconds(Ge[1]),ke[6]&&ke[7]){var Z=60*ke[6]+Number(ke[7]);Z=0+((/\d\d-\d\d:\d\d$/.test(_e)?"-":"+")=="-"?-1*Z:Z),Ae.setMinutes(Ae.getMinutes()-Z-Ae.getTimezoneOffset())}else _e.indexOf("Z",_e.length-1)!==-1&&(Ae=new Date(Date.UTC(Ae.getFullYear(),Ae.getMonth(),Ae.getDate(),Ae.getHours(),Ae.getMinutes(),Ae.getSeconds(),Ae.getMilliseconds())));return Ae}function H(_e,ke,Ae,Ge){return!(ke==1&&L.xmlElementsFilter.length>0)||V(L.xmlElementsFilter,_e,Ae,Ge)}function re(_e,ke){if(_e.nodeType==9){for(var Ae=new Object,Ge=_e.childNodes,Z=0;Z<Ge.length;Z++)(ae=Ge[Z]).nodeType==1&&(L.ignoreRoot?Ae=re(ae):(Ae={})[ue=P(ae)]=re(ae));return Ae}if(_e.nodeType==1){(Ae=new Object).__cnt=0;var le=[];for(Ge=_e.childNodes,Z=0;Z<Ge.length;Z++){var ae,ue=P(ae=Ge[Z]);if(ae.nodeType!=8){var Q=ke+"."+ue;if(H(Ae,ae.nodeType,ue,Q))if(Ae.__cnt++,Ae[ue]==null){var Pe=re(ae,Q);(ue!="#text"||/[^\s]/.test(Pe))&&((be={})[ue]=Pe,le.push(be)),Ae[ue]=Pe,ee(Ae,ue,Q)}else{var be;Ae[ue]!=null&&(Ae[ue]instanceof Array||(Ae[ue]=[Ae[ue]],ee(Ae,ue,Q))),Pe=re(ae,Q),(ue!="#text"||/[^\s]/.test(Pe))&&((be={})[ue]=Pe,le.push(be)),Ae[ue][Ae[ue].length]=Pe}}}Ae.__children=le;for(var Fe=P(_e),xe=0;xe<_e.attributes.length;xe++){var pe=_e.attributes[xe];Ae.__cnt++;for(var Ne=pe.value,Xe=0,dt=L.matchers.length;Xe<dt;Xe++){var ut=L.matchers[Xe];ut.test(pe,Fe)&&(Ne=ut.converter(pe.value))}Ae[L.attributePrefix+pe.name]=Ne}var et=function(ht){return ht.prefix}(_e);return et!=null&&et!=""&&(Ae.__cnt++,Ae.__prefix=et),Ae["#text"]!=null&&(Ae.__text=Ae["#text"],Ae.__text instanceof Array&&(Ae.__text=Ae.__text.join("\n")),L.stripWhitespaces&&(Ae.__text=Ae.__text.trim()),delete Ae["#text"],L.arrayAccessForm=="property"&&delete Ae["#text_asArray"],Ae.__text=function(ht,jt,qt){if(L.datetimeAccessFormPaths.length>0){var Ft=qt.split(".#")[0];return V(L.datetimeAccessFormPaths,ht,jt,Ft)?J(ht):ht}return ht}(Ae.__text,ue,ke+"."+ue)),Ae["#cdata-section"]!=null&&(Ae.__cdata=Ae["#cdata-section"],delete Ae["#cdata-section"],L.arrayAccessForm=="property"&&delete Ae["#cdata-section_asArray"]),Ae.__cnt==0&&L.emptyNodeForm=="text"?Ae="":Ae.__cnt==1&&Ae.__text!=null?Ae=Ae.__text:Ae.__cnt!=1||Ae.__cdata==null||L.keepCData?Ae.__cnt>1&&Ae.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&Ae.__text==""||Ae.__text.trim()=="")&&delete Ae.__text:Ae=Ae.__cdata,delete Ae.__cnt,!L.enableToStringFunc||Ae.__text==null&&Ae.__cdata==null||(Ae.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),Ae}if(_e.nodeType==3||_e.nodeType==4)return _e.nodeValue}function fe(_e,ke,Ae,Ge){var Z="<"+(_e!=null&&_e.__prefix!=null?_e.__prefix+":":"")+ke;if(Ae!=null)for(var le=0;le<Ae.length;le++){var ae=Ae[le],ue=_e[ae];L.escapeMode&&(ue=B(ue)),Z+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?Z+='"'+ue+'"':Z+="'"+ue+"'"}return Z+(Ge?"/>":">")}function we(_e,ke){return"</"+(_e.__prefix!=null?_e.__prefix+":":"")+ke+">"}function Ee(_e,ke){return L.arrayAccessForm=="property"&&(Ge="_asArray",(Ae=ke.toString()).indexOf(Ge,Ae.length-Ge.length)!==-1)||ke.toString().indexOf(L.attributePrefix)==0||ke.toString().indexOf("__")==0||_e[ke]instanceof Function;var Ae,Ge}function ie(_e){var ke=0;if(_e instanceof Object)for(var Ae in _e)Ee(_e,Ae)||ke++;return ke}function ve(_e,ke,Ae){return L.jsonPropertiesFilter.length==0||Ae==""||V(L.jsonPropertiesFilter,_e,ke,Ae)}function ge(_e){var ke=[];if(_e instanceof Object)for(var Ae in _e)Ae.toString().indexOf("__")==-1&&Ae.toString().indexOf(L.attributePrefix)==0&&ke.push(Ae);return ke}function Ke(_e){var ke="";return _e instanceof Object?ke+=function(Ae){var Ge="";return Ae.__cdata!=null&&(Ge+="<![CDATA["+Ae.__cdata+"]]>"),Ae.__text!=null&&(L.escapeMode?Ge+=B(Ae.__text):Ge+=Ae.__text),Ge}(_e):_e!=null&&(L.escapeMode?ke+=B(_e):ke+=_e),ke}function Oe(_e,ke){return _e===""?ke:_e+"."+ke}function Ze(_e,ke,Ae,Ge){var Z="";if(_e.length==0)Z+=fe(_e,ke,Ae,!0);else for(var le=0;le<_e.length;le++)Z+=fe(_e[le],ke,ge(_e[le]),!1),Z+=$e(_e[le],Oe(Ge,ke)),Z+=we(_e[le],ke);return Z}function $e(_e,ke){var Ae="";if(ie(_e)>0){for(var Ge in _e)if(!Ee(_e,Ge)&&(ke==""||ve(_e,Ge,Oe(ke,Ge)))){var Z=_e[Ge],le=ge(Z);Z==null||Z==null?Ae+=fe(Z,Ge,le,!0):Z instanceof Object?Z instanceof Array?Ae+=Ze(Z,Ge,le,ke):Z instanceof Date?(Ae+=fe(Z,Ge,le,!1),Ae+=Z.toISOString(),Ae+=we(Z,Ge)):ie(Z)>0||Z.__text!=null||Z.__cdata!=null?(Ae+=fe(Z,Ge,le,!1),Ae+=$e(Z,Oe(ke,Ge)),Ae+=we(Z,Ge)):Ae+=fe(Z,Ge,le,!0):(Ae+=fe(Z,Ge,le,!1),Ae+=Ke(Z),Ae+=we(Z,Ge))}}return Ae+Ke(_e)}this.parseXmlString=function(_e){var ke;if(_e===void 0)return null;if(window.DOMParser){var Ae=new window.DOMParser;try{(ke=Ae.parseFromString(_e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ke=null)}catch(Ge){ke=null}}else _e.indexOf("<?")==0&&(_e=_e.substr(_e.indexOf("?>")+2)),(ke=new ActiveXObject("Microsoft.XMLDOM")).async="false",ke.loadXML(_e);return ke},this.asArray=function(_e){return _e===void 0||_e==null?[]:_e instanceof Array?_e:[_e]},this.toXmlDateTime=function(_e){return _e instanceof Date?_e.toISOString():typeof _e=="number"?new Date(_e).toISOString():null},this.asDateTime=function(_e){return typeof _e=="string"?J(_e):_e},this.xml2json=function(_e){return re(_e)},this.xml_str2json=function(_e){var ke=this.parseXmlString(_e);return ke!=null?this.xml2json(ke):null},this.json2xml_str=function(_e){return $e(_e,"")},this.json2xml=function(_e){var ke=this.json2xml_str(_e);return this.parseXmlString(ke)},this.getVersion=function(){return"1.2.0"}},go="onLoad";function ju(L){L=L||{};var P,B,V,ee,J,H,re=this.context,fe=(0,m.Z)(re).getInstance(),we=(0,St.Z)(re).getInstance();function Ee(Oe,Ze,$e){var _e,ke,Ae={};Ae.elements=Oe,Ae.type=Ze,Ae.resolveType=$e,Ae.elements.length===0&&ve(Ae);for(var Ge=0;Ge<Ae.elements.length;Ge++)_e=Ae.elements[Ge],ke=we.isHTTPURL(_e.url)?_e.url:_e.originalContent.BaseURL+_e.url,H.load(ke,_e,Ae)}function ie(Oe){var Ze,$e,_e="";if(Ze=Oe.element,$e=Oe.resolveObject,Ze.resolvedContent){var ke=0;Ze.resolvedContent.indexOf("<?xml")===0&&(ke=Ze.resolvedContent.indexOf("?>")+2),_e=Ze.resolvedContent.substr(0,ke)+"<response>"+Ze.resolvedContent.substr(ke)+"</response>",Ze.resolvedContent=J.xml_str2json(_e)}(function(Ae){var Ge;for(Ge=0;Ge<Ae.elements.length;Ge++)if(Ae.elements[Ge].resolved===!1)return!1;return!0})($e)&&ve($e)}function ve(Oe){var Ze,$e,_e=[];if(function(ke){var Ae,Ge,Z,le,ae,ue,Q=[];for(le=ke.elements.length-1;le>=0;le--){if(Ge=(Ae=ke.elements[le]).type+"_asArray",Ae.resolvedContent){if(Ae.resolvedContent)for(ae=0;ae<Ae.resolvedContent[Ge].length;ae++)Z=Ae.resolvedContent[Ge][ae],Q.push(Z)}else delete Ae.originalContent["xlink:actuate"],delete Ae.originalContent["xlink:href"],Q.push(Ae.originalContent);for(Ae.parentElement[Ge].splice(Ae.index,1),ue=0;ue<Q.length;ue++)Ae.parentElement[Ge].splice(Ae.index+ue,0,Q[ue]);Q=[]}ke.elements.length>0&&V.run(ee)}(Oe),Oe.resolveType==="onActuate"&&fe.trigger(T.Z.XLINK_READY,{manifest:ee}),Oe.resolveType===go)switch(Oe.type){case v.Z.PERIOD:for(Ze=0;Ze<ee[v.Z.PERIOD+"_asArray"].length;Ze++)($e=ee[v.Z.PERIOD+"_asArray"][Ze]).hasOwnProperty(v.Z.ADAPTATION_SET+"_asArray")&&(_e=_e.concat(ge($e[v.Z.ADAPTATION_SET+"_asArray"],$e,v.Z.ADAPTATION_SET,go))),$e.hasOwnProperty(v.Z.EVENT_STREAM+"_asArray")&&(_e=_e.concat(ge($e[v.Z.EVENT_STREAM+"_asArray"],$e,v.Z.EVENT_STREAM,go)));Ee(_e,v.Z.ADAPTATION_SET,go);break;case v.Z.ADAPTATION_SET:fe.trigger(T.Z.XLINK_READY,{manifest:ee})}}function ge(Oe,Ze,$e,_e){var ke,Ae,Ge,Z=[];for(Ae=Oe.length-1;Ae>=0;Ae--)(ke=Oe[Ae]).hasOwnProperty("xlink:href")&&ke["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&Oe.splice(Ae,1);for(Ae=0;Ae<Oe.length;Ae++)(ke=Oe[Ae]).hasOwnProperty("xlink:href")&&ke.hasOwnProperty("xlink:actuate")&&ke["xlink:actuate"]===_e&&(Ge=Ke(ke["xlink:href"],Ze,$e,Ae,_e,ke),Z.push(Ge));return Z}function Ke(Oe,Ze,$e,_e,ke,Ae){return{url:Oe,parentElement:Ze,type:$e,index:_e,resolveType:ke,originalContent:Ae,resolvedContent:null,resolved:!1}}return P={resolveManifestOnLoad:function(Oe){J=new Bu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=Oe).Period_asArray?Ee(ge(ee.Period_asArray,ee,v.Z.PERIOD,go),v.Z.PERIOD,go):fe.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(Oe){Oe&&(B=Oe)},setIron:function(Oe){Oe&&(V=Oe)},reset:function(){fe.off(T.Z.XLINK_ELEMENT_LOADED,ie,P),H&&(H.reset(),H=null)}},fe.on(T.Z.XLINK_ELEMENT_LOADED,ie,P),H=lm(re).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),P}ju.__dashjs_factory_name="XlinkController";var Tc=F.Z.getClassFactory(ju);function Zu(L){return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Zu(L)}function Cr(L){function P(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var re=0,fe=ee.length;re<fe;++re){var we=ee[re];if(J[we.name])if(H[we.name]){if(we.merge){var Ee=J[we.name],ie=H[we.name];Zu(Ee)==="object"&&Zu(ie)==="object"?P(Ee,ie):H[we.name]=Ee+ie}}else H[we.name]=J[we.name]}}function V(ee,J){for(var H=0,re=ee.children.length;H<re;++H){var fe=ee.children[H],we=J[fe.name+"_asArray"];if(we)for(var Ee=0,ie=we.length;Ee<ie;++Ee){var ve=we[Ee];B(ee.properties,J,ve),V(fe,ve)}}}return{run:function(ee){if(ee===null||Zu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,re=0,fe=H.length;re<fe;++re){var we=H[re];if(V(J,we),"adaptationset"in L){var Ee=we.AdaptationSet_asArray;if(Ee)for(var ie=L.adaptationset,ve=0,ge=Ee.length;ve<ge;++ve)V(ie,Ee[ve])}}return ee}}}Cr.__dashjs_factory_name="ObjectIron";var Gu=F.Z.getClassFactory(Cr);function xh(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var qu=function(){function L(V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=V,this._converter=ee}var P,B;return P=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&xh(P.prototype,B),L}();function Cl(L){return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Cl(L)}function ni(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function za(L,P){return za=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},za(L,P)}function cm(L,P){return!P||Cl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Sc(L){return Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Sc(L)}var fm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&za(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Sc(P);if(B){var re=Sc(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return cm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var re,fe=(ni(re={},v.Z.MPD,[v.Z.ID,v.Z.PROFILES]),ni(re,v.Z.PERIOD,[v.Z.ID]),ni(re,v.Z.BASE_URL,[v.Z.SERVICE_LOCATION,v.Z.BYTE_RANGE]),ni(re,v.Z.SEGMENT_BASE,[v.Z.INDEX_RANGE]),ni(re,v.Z.INITIALIZATION,[v.Z.RANGE]),ni(re,v.Z.REPRESENTATION_INDEX,[v.Z.RANGE]),ni(re,v.Z.SEGMENT_LIST,[v.Z.INDEX_RANGE]),ni(re,v.Z.BITSTREAM_SWITCHING,[v.Z.RANGE]),ni(re,v.Z.SEGMENT_URL,[v.Z.MEDIA_RANGE,v.Z.INDEX_RANGE]),ni(re,v.Z.SEGMENT_TEMPLATE,[v.Z.INDEX_RANGE,v.Z.MEDIA,v.Z.INDEX,v.Z.INITIALIZATION_MINUS,v.Z.BITSTREAM_SWITCHING_MINUS]),ni(re,v.Z.ASSET_IDENTIFIER,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.EVENT_STREAM,[v.Z.VALUE]),ni(re,v.Z.ADAPTATION_SET,[v.Z.PROFILES,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.CONTENT_TYPE]),ni(re,v.Z.FRAME_PACKING,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.AUDIO_CHANNEL_CONFIGURATION,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.CONTENT_PROTECTION,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ESSENTIAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.SUPPLEMENTAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.INBAND_EVENT_STREAM,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ACCESSIBILITY,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.ROLE,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.RATING,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.VIEWPOINT,[v.Z.VALUE,v.Z.ID]),ni(re,v.Z.CONTENT_COMPONENT,[v.Z.CONTENT_TYPE]),ni(re,v.Z.REPRESENTATION,[v.Z.ID,v.Z.DEPENDENCY_ID,v.Z.MEDIA_STREAM_STRUCTURE_ID]),ni(re,v.Z.SUBSET,[v.Z.ID]),ni(re,v.Z.METRICS,[v.Z.METRICS_MINUS]),ni(re,v.Z.REPORTING,[v.Z.VALUE,v.Z.ID]),re);if(fe.hasOwnProperty(H)){var we=fe[H];return we!==void 0&&we.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(qu);function Nh(L){return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Nh(L)}function Mh(L,P){return Mh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Mh(L,P)}function Df(L,P){return!P||Nh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function wc(L){return wc=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},wc(L)}var dm=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,hm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Mh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=wc(P);if(B){var re=wc(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Df(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){for(var H=[v.Z.MIN_BUFFER_TIME,v.Z.MEDIA_PRESENTATION_DURATION,v.Z.MINIMUM_UPDATE_PERIOD,v.Z.TIMESHIFT_BUFFER_DEPTH,v.Z.MAX_SEGMENT_DURATION,v.Z.MAX_SUBSEGMENT_DURATION,v.Z.SUGGESTED_PRESENTATION_DELAY,v.Z.START,y.Z.START_TIME,v.Z.DURATION],re=H.length,fe=0;fe<re;fe++)if(J.nodeName===H[fe])return dm.test(J.value);return!1},function(J){var H=dm.exec(J),re=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(re=-re),re})}return ee}(qu);function Dh(L){return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Dh(L)}function Pf(L,P){return Pf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Pf(L,P)}function pm(L,P){return!P||Dh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Of(L){return Of=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Of(L)}var Ph=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,gm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Pf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Of(P);if(B){var re=Of(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return pm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return Ph.test(J.value)},function(J){var H,re=Ph.exec(J);if(H=Date.UTC(parseInt(re[1],10),parseInt(re[2],10)-1,parseInt(re[3],10),parseInt(re[4],10),parseInt(re[5],10),re[6]&&parseInt(re[6],10)||0,re[7]&&1e3*parseFloat(re[7])||0),re[9]&&re[10]){var fe=60*parseInt(re[9],10)+parseInt(re[10],10);H+=(re[8]==="+"?-1:1)*fe*60*1e3}return new Date(H)})}return ee}(qu);function Hu(L){return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hu(L)}function Rl(L,P){return Rl=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Rl(L,P)}function yE(L,P){return!P||Hu(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Lf(L){return Lf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Lf(L)}var EE=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,xl=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Rl(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Lf(P);if(B){var re=Lf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return yE(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return EE.test(J.value)},function(J){return parseFloat(J)})}return ee}(qu);function Nl(L){return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Nl(L)}function Ku(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Ac(L,P){return Ac=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Ac(L,P)}function mm(L,P){return!P||Nl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ml(L){return Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ml(L)}var vm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Ac(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ml(P);if(B){var re=Ml(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return mm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var re,fe=(Ku(re={},v.Z.ADAPTATION_SET,[v.Z.LANG]),Ku(re,v.Z.REPRESENTATION,[v.Z.LANG]),Ku(re,v.Z.CONTENT_COMPONENT,[v.Z.LANG]),Ku(re,v.Z.LABEL,[v.Z.LANG]),Ku(re,v.Z.GROUP_LABEL,[v.Z.LANG]),re);if(fe.hasOwnProperty(H)){var we=fe[H];return we!==void 0&&we.indexOf(J.name)>=0}return!1},function(J){return yi()(J)||String(J)})}return ee}(qu);function kf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ff=function(){function L(V){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V,this._merge=(ee=V)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&kf(P.prototype,B),L}();function Ic(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Vu=function(){function L(V,ee,J){var H=this;(function(re,fe){if(!(re instanceof fe))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(re){H._properties.push(new Ff(re))})}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Ic(P.prototype,B),L}();function Uf(L){return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Uf(L)}function Oh(L,P){return Oh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Oh(L,P)}function _E(L,P){return!P||Uf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function zu(L){return zu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},zu(L)}var TE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Oh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=zu(P);if(B){var re=zu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return _E(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.PROFILES,v.Z.WIDTH,v.Z.HEIGHT,v.Z.SAR,v.Z.FRAMERATE,v.Z.AUDIO_SAMPLING_RATE,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.MAXIMUM_SAP_PERIOD,v.Z.START_WITH_SAP,v.Z.MAX_PLAYOUT_RATE,v.Z.CODING_DEPENDENCY,v.Z.SCAN_TYPE,v.Z.FRAME_PACKING,v.Z.AUDIO_CHANNEL_CONFIGURATION,v.Z.CONTENT_PROTECTION,v.Z.ESSENTIAL_PROPERTY,v.Z.ESSENTIAL_PROPERTY+"_asArray",v.Z.SUPPLEMENTAL_PROPERTY,v.Z.INBAND_EVENT_STREAM];return V.call(this,v.Z.ADAPTATION_SET,J,[new Vu(v.Z.REPRESENTATION,J,[new Vu(v.Z.SUB_REPRESENTATION,J)])])}return ee}(Vu);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hr(L)}function Bf(L,P){return Bf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Bf(L,P)}function Lh(L,P){return!P||Hr(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function jf(L){return jf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},jf(L)}var SE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Bf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=jf(P);if(B){var re=jf(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Lh(this,J)});function ee(){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.SEGMENT_BASE,v.Z.SEGMENT_TEMPLATE,v.Z.SEGMENT_LIST];return V.call(this,v.Z.PERIOD,J,[new Vu(v.Z.ADAPTATION_SET,J,[new Vu(v.Z.REPRESENTATION,J)])])}return ee}(Vu);function bc(L){L=L||{};var P,B,V,ee,J,H=this.context,re=L.debug;return P={parse:function(fe){var we,Ee=window.performance.now();if(!(we=ee.xml_str2json(fe)))throw new Error("parsing the manifest failed");var ie=window.performance.now();we.Patch?((we=we.Patch).add_asArray&&we.add_asArray.forEach(function(ge){return J.run(ge)}),we.replace_asArray&&we.replace_asArray.forEach(function(ge){return J.run(ge)})):(we=we.MPD,J.run(we));var ve=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-Ee).toPrecision(3)+"ms, objectiron: "+(ve-ie).toPrecision(3)+"ms, total: "+((ve-Ee)/1e3).toPrecision(3)+"s)"),we.protocol="DASH",we},getMatchers:function(){return V},getIron:function(){return J}},B=re.getLogger(P),V=[new hm,new gm,new xl,new vm,new fm],ee=new Bu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),J=Gu(H).create({adaptationset:new TE,period:new SE}),P}bc.__dashjs_factory_name="DashParser";var ym=F.Z.getClassFactory(bc);function kh(L){L=L||{};var P,B,V,ee,J,H=this.context,re=L.debug,fe=L.settings,we=(0,m.Z)(H).getInstance(),Ee=(0,St.Z)(H).getInstance(),ie=L.mssHandler,ve=L.errHandler;function ge(Oe){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:Oe.manifest})}function Ke(Oe){var Ze=null;return Oe.indexOf("SmoothStreamingMedia")>-1?(ie&&(Ze=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Ze):Oe.indexOf("MPD")>-1||Oe.indexOf("Patch")>-1?ym(H).create({debug:re}):Ze}return P={load:function(Oe){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,$e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_e=new Date,ke=new ji(Oe,ot.w.MPD_TYPE);Ze&&(ke.serviceLocation=Ze),$e&&(ke.queryParams=$e),ke.requestStartDate||(ke.requestStartDate=_e),we.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:ke}),V.load({request:ke,success:function(Ae,Ge,Z){var le,ae,ue;if(ee)if(Z&&Z!==Oe?(ae=Ee.parseBaseUrl(Z),le=Z):(Ee.isRelative(Oe)&&(Oe=Ee.resolve(Oe,window.location.href)),ae=Ee.parseBaseUrl(Oe)),Ge!="No Content")if(J===null&&(J=Ke(Ae)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{ue=J.parse(Ae)}catch(Pe){return void we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}if(ue){if(ue.url=le||Oe,ue.originalUrl||(ue.originalUrl=ue.url),fe&&fe.get().streaming.enableManifestDurationMismatchFix&&ue.mediaPresentationDuration&&ue.Period_asArray.length>1){var Q=ue.Period_asArray.reduce(function(Pe,be){return Pe+be.duration},0);!isNaN(Q)&&ue.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),ue.mediaPresentationDuration=Q)}ue.baseUri=ae,ue.loadedTime=new Date,ee.resolveManifestOnLoad(ue),we.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Ae})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))});else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Ae,Ge,Z){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ce.Z(Te.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Te.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Oe,", ").concat(Z))})}})},reset:function(){we.off(T.Z.XLINK_READY,ge,P),ie&&ie.reset(),ee&&(ee.reset(),ee=null),V&&(V.abort(),V=null)}},B=re.getLogger(P),we.on(T.Z.XLINK_READY,ge,P),V=wo(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:Ee,constants:y.Z,dashConstants:v.Z,errors:Te,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=Tc(H).create({errHandler:ve,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,P}kh.__dashjs_factory_name="ManifestLoader";var Em=F.Z.getClassFactory(kh);function Fh(){var L=this.context,P=(0,m.Z)(L).getInstance();return{error:function(B){P.trigger(T.Z.ERROR,{error:B})}}}Fh.__dashjs_factory_name="ErrorHandler";var Dl=F.Z.getSingletonFactory(Fh),_m=w(1715);function Tm(){var L,P,B,V,ee,J,H=this.context,re=(0,m.Z)(H).getInstance();function fe(we,Ee){if(!Ee||!Ee.Period_asArray||Ee.Period_asArray.length===0)return Promise.resolve();var ie=[];return Ee.Period_asArray.forEach(function(ve){ie.push(function(ge,Ke){return new Promise(function(Oe){if(ge&&ge.AdaptationSet_asArray&&ge.AdaptationSet_asArray.length!==0){var Ze=[];ge.AdaptationSet_asArray.forEach(function($e){P.getIsTypeOf($e,Ke)&&Ze.push(function(_e,ke){return new Promise(function(Ae){if(_e.Representation_asArray&&_e.Representation_asArray.length!==0){var Ge=[],Z=[];_e.Representation_asArray.forEach(function(le,ae){var ue=P.getCodec(_e,ae,!1),Q=function(Pe,be,Fe){switch(Pe){case y.Z.VIDEO:return function(xe,pe){return{codec:pe,width:xe.width||null,height:xe.height||null,framerate:xe.frameRate||null,bitrate:xe.bandwidth||null}}(be,Fe);case y.Z.AUDIO:return function(xe,pe){var Ne=xe.audioSamplingRate||null;return{codec:pe,bitrate:xe.bandwidth||null,samplerate:Ne}}(be,Fe);default:return null}}(ke,le,ue);Z.push(Q),Ge.push(B.supportsCodec(Q,ke))}),Promise.all(Ge).then(function(le){_e.Representation_asArray=_e.Representation_asArray.filter(function(ae,ue){return le[ue]||J.debug("[Stream] Codec ".concat(Z[ue].codec," not supported ")),le[ue]}),Ae()}).catch(function(){Ae()})}else Ae()})}($e,Ke))}),Promise.all(Ze).then(function(){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function($e){var _e=$e.Representation_asArray&&$e.Representation_asArray.length>0;return _e||(re.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:$e}),J.warn("AdaptationSet has been removed because of no supported Representation")),_e}),Oe()}).catch(function(){Oe()})}else Oe()})}(ve,we))}),Promise.all(ie)}return L={setConfig:function(we){we&&(we.adapter&&(P=we.adapter),we.capabilities&&(B=we.capabilities),we.settings&&(V=we.settings),we.customParametersModel&&(ee=we.customParametersModel))},filterUnsupportedFeatures:function(we){return new Promise(function(Ee){var ie=[];ie.push(fe(y.Z.VIDEO,we)),ie.push(fe(y.Z.AUDIO,we)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(ve){ve&&ve.Period_asArray&&ve.Period_asArray.length!==0&&ve.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(Ke){return!Ke.Representation_asArray||Ke.Representation_asArray.length===0||(Ke.Representation_asArray=Ke.Representation_asArray.filter(function(Oe){var Ze=P.getEssentialPropertiesForRepresentation(Oe);if(Ze&&Ze.length>0)for(var $e=0;$e<Ze.length;){if(!B.supportsEssentialProperty(Ze[$e]))return J.debug("[Stream] EssentialProperty not supported: "+Ze[$e].schemeIdUri),!1;$e+=1}return!0}),Ke.Representation_asArray&&Ke.Representation_asArray.length>0)})})}(we),function(ve){var ge=ee.getCustomCapabilitiesFilters();ge&&ge.length!==0&&ve&&ve.Period_asArray&&ve.Period_asArray.length!==0&&ve.Period_asArray.forEach(function(Ke){Ke.AdaptationSet_asArray=Ke.AdaptationSet_asArray.filter(function(Oe){return!Oe.Representation_asArray||Oe.Representation_asArray.length===0||(Oe.Representation_asArray=Oe.Representation_asArray.filter(function(Ze){return!ge.some(function($e){return!$e(Ze)})}),Oe.Representation_asArray&&Oe.Representation_asArray.length>0)})})}(we),Ee()}).catch(function(){Ee()})})}},J=(0,N.Z)(H).getInstance().getLogger(L),L}Tm.__dashjs_factory_name="CapabilitiesFilter";var wE=F.Z.getSingletonFactory(Tm),AE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Sm(){var L;return{initialize:function(P){if(L=new AE,!P)return null;var B=P.indexOf("#");if(B!==-1)for(var V=P.substr(B+1).split("&"),ee=0,J=V.length;ee<J;++ee){var H=V[ee],re=H.indexOf("=");if(re!==-1){var fe=H.substring(0,re);L.hasOwnProperty(fe)&&(L[fe]=H.substr(re+1))}}},getURIFragmentData:function(){return L}}}Sm.__dashjs_factory_name="URIFragmentModel";var IE=F.Z.getSingletonFactory(Sm);function wm(){var L,P=this.context,B=(0,m.Z)(P).getInstance();return{getValue:function(){return L},setValue:function(V){L=V,V&&B.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}wm.__dashjs_factory_name="ManifestModel";var bE=F.Z.getSingletonFactory(wm),Uh=-.5;function Bh(){var L,P,B,V,ee=this.context,J=(0,je.Z)(ee).getInstance();function H(we,Ee){return isNaN(we)?0:we>0?(Ee&&P.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we<Uh?(Ee&&P.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Uh,": ").concat(-50,"% playback speed.")),Uh):we}function re(we,Ee){return isNaN(we)?0:we<0?(Ee&&P.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we>1?(Ee&&P.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):we}function fe(){var we=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,Ee=B.getLiveDelay();return!isNaN(Ee)&&Ee>0?Math.min(we,Ee):we}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var we=V.getServiceDescriptionSettings();return we&&we.liveCatchup&&!isNaN(we.liveCatchup.maxDrift)&&we.liveCatchup.maxDrift>0?we.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:fe,getInitialBufferLevel:function(){var we=J.get().streaming.buffer.initialBufferLevel;return isNaN(we)||we<0?0:Math.min(fe(),we)},getRetryAttemptsForType:function(we){var Ee=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[we]*Ee:J.get().streaming.retryAttempts[we]},getRetryIntervalsForType:function(we){var Ee=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[we]/Ee:J.get().streaming.retryIntervals[we]},getCatchupPlaybackRates:function(we){var Ee=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(Ee.min)||!isNaN(Ee.max))return{min:H(Ee.min,we),max:re(Ee.max,we)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var ve=ie.liveCatchup.playbackRate;return{min:H(ve.min,we),max:re(ve.max,we)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(we,Ee){try{var ie=J.get().streaming.abr[we][Ee];if(!isNaN(ie)&&ie!==-1)return ie;var ve=V.getServiceDescriptionSettings();return ve&&ve[we]&&!isNaN(ve[we][Ee])?ve[we][Ee]:-1}catch(ge){return-1}},setConfig:function(we){we.playbackController&&(B=we.playbackController),we.serviceDescriptionController&&(V=we.serviceDescriptionController)},reset:function(){}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}Bh.__dashjs_factory_name="MediaPlayerModel";var Pl=F.Z.getSingletonFactory(Bh),Cc=w(1767);function jh(L){var P=(L=L||{}).abrController,B=L.switchHistory,V=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,re=L.useLoLPABR,fe=L.streamProcessor?L.streamProcessor.getScheduleController():null,we=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,Ee=L.videoModel?L.videoModel:null;function ie(){return we?we.mediaInfo:null}return{getMediaType:function(){var ve=ie();return ve?ve.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var ve=ie();return ve?ve.streamInfo:null},getScheduleController:function(){return fe},getAbrController:function(){return P},getRepresentationInfo:function(){return we},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return re},getVideoModel:function(){return Ee}}}jh.__dashjs_factory_name="RulesContext";var Zh=F.Z.getClassFactory(jh),sa=w(2068);function Rr(){var L=[],P=[];return{push:function(B){B.newValue===sa.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var V=B.newValue-B.oldValue,ee=V<0?1:0,J=ee?-V:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,P.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),P.length>8){var re=P.shift();L[re.idx].drops-=re.drop,L[re.idx].dropSize-=re.dropSize,L[re.idx].noDrops-=re.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],P=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var pi=F.Z.getClassFactory(Rr);function pu(){var L={},P={},B={};return{push:function(V,ee,J){if(ee){L[V]||(L[V]=[],P[V]=0,B[V]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,re=J&&J.totalVideoFrames?J.totalVideoFrames:0,fe=H-P[V];P[V]=H;var we=re-B[V];B[V]=re;var Ee=L[V];isNaN(ee)||(Ee[ee]?(Ee[ee].droppedVideoFrames+=fe,Ee[ee].totalVideoFrames+=we):Ee[ee]={droppedVideoFrames:fe,totalVideoFrames:we})}},getFrameHistory:function(V){return L[V]},clearForStream:function(V){try{delete L[V],delete P[V],delete B[V]}catch(ee){}},reset:function(){L={},P={},B={}}}}pu.__dashjs_factory_name="DroppedFramesHistory";var Gh=F.Z.getClassFactory(pu);function Yu(L){var P,B,V,ee,J,H=this.context,re=(L=L||{}).settings,fe=(0,m.Z)(H).getInstance();function we(Oe,Ze,$e,_e){var ke=Math.pow(.5,$e/_e.fast);Oe.fastEstimate=(1-ke)*Ze+ke*Oe.fastEstimate;var Ae=Math.pow(.5,$e/_e.slow);Oe.slowEstimate=(1-Ae)*Ze+Ae*Oe.slowEstimate,Oe.totalWeight+=$e}function Ee(Oe,Ze,$e){return re.get().streaming.abr.movingAverageMethod!==y.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(_e,ke){var Ae=_e?J.throughputHalfLife:J.latencyHalfLife,Ge=_e?V[ke]:ee[ke];if(!Ge||Ge.totalWeight<=0)return NaN;var Z=Ge.fastEstimate/(1-Math.pow(.5,Ge.totalWeight/Ae.fast)),le=Ge.slowEstimate/(1-Math.pow(.5,Ge.totalWeight/Ae.slow));return _e?Math.min(Z,le):Math.max(Z,le)}(Oe,Ze):function(_e,ke,Ae){var Ge=function(le,ae,ue){var Q,Pe;if(le?(Q=P[ae],Pe=ue?3:4):(Q=B[ae],Pe=4),Q){if(Pe>=Q.length)Pe=Q.length;else if(le)for(var be=1;be<Pe;++be){var Fe=Q[Q.length-be]/Q[Q.length-be-1];if((Fe>=1.3||Fe<=.7692307692307692)&&(Pe+=1)===Q.length)break}}else Pe=0;return Pe}(_e,ke,Ae),Z=(_e?P:B)[ke];return Ge!==0&&Z&&Z.length!==0?(Z=Z.slice(-Ge)).reduce(function(le,ae){return le+ae})/Z.length:NaN}(Oe,Ze,$e)}function ie(Oe,Ze){return Ee(!0,Oe,Ze)}function ve(Oe){P[Oe]=P[Oe]||[],B[Oe]=B[Oe]||[],V[Oe]=V[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[Oe]=ee[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ge(){P={},B={},V={},ee={}}var Ke={push:function(Oe,Ze,$e){if(Ze.trace&&Ze.trace.length){var _e,ke=Ze.tresponse.getTime()-Ze.trequest.getTime()||1,Ae=Ze._tfinish.getTime()-Ze.tresponse.getTime()||1,Ge=Ze.trace.reduce(function(ue,Q){return ue+Q.b[0]},0),Z=0;if((_e=Ze._fileLoaderType&&Ze._fileLoaderType===y.Z.FILE_LOADER_TYPES.FETCH?Ze.trace.reduce(function(ue,Q){return ue+Q.d},0):$e?Ae:ke+Ae)!==0&&(Z=Math.round(8*Ge/_e)),Ze.cmsd){var le=Ze.cmsd.dynamic&&Ze.cmsd.dynamic.etp?Ze.cmsd.dynamic.etp:null;if(le){var ae=re.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(Z=Z*(1-ae)+le*ae)}}if(ve(Oe),function(ue,Q,Pe){return ue===y.Z.VIDEO?Pe<re.get().streaming.cacheLoadThresholds[y.Z.VIDEO]:ue===y.Z.AUDIO?Pe<re.get().streaming.cacheLoadThresholds[y.Z.AUDIO]:void 0}(Oe,0,Ae)){if(P[Oe].length>0&&!P[Oe].hasCachedEntries)return;P[Oe].hasCachedEntries=!0}else P[Oe]&&P[Oe].hasCachedEntries&&function(ue){delete P[ue],delete B[ue],delete V[ue],delete ee[ue],ve(ue)}(Oe);P[Oe].push(Z),fe.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:Z,mediaType:Oe,httpRequest:Ze}),P[Oe].length>20&&P[Oe].shift(),B[Oe].push(ke),B[Oe].length>20&&B[Oe].shift(),we(V[Oe],Z,.001*Ae,J.throughputHalfLife),we(ee[Oe],ke,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(Oe,Ze){var $e=ie(Oe,Ze);return isNaN($e)||($e*=re.get().streaming.abr.bandwidthSafetyFactor),$e},getAverageLatency:function(Oe){return Ee(!1,Oe)},reset:ge};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ge(),Ke}Yu.__dashjs_factory_name="ThroughputHistory";var Am=F.Z.getClassFactory(Yu);function Zf(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,ue,Q,Pe=this.context,be=(0,N.Z)(Pe).getInstance(),Fe=(0,m.Z)(Pe).getInstance();function xe(){ee={},J={},re={},H={},ke={},Z={},le={},ae={},we===void 0&&(we=!1),Ae&&Ae.reset(),_e=void 0,Ae=void 0,Ge=void 0,clearTimeout(fe),fe=null}function pe(it){var yt=it.request.mediaType,$t=it.streamId;if(yt&&$t&&H[$t]&&Q.get().streaming.abr.autoSwitchBitrate[yt]){var Nt=H[$t][yt];if(Nt){var en=Zh(Pe).create({abrController:L,streamProcessor:Nt,currentRequest:it.request,useBufferOccupancyABR:Z[yt],useL2AABR:le[yt],useLoLPABR:ae[yt],videoModel:ge}),Jt=B.shouldAbandonFragment(en,$t);Jt.quality>sa.Z.NO_CHANGE&&Nt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:it.request.index})[0]&&(re[$t][yt].state=D.Z.ABANDON_LOAD,ke[$t][yt].reset(),ke[$t][yt].push({oldValue:et(yt,$t),newValue:Jt.quality,confidence:1,reason:Jt.reason}),ht(yt,V.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(fe),fe=setTimeout(function(){re[$t][yt].state=D.Z.ALLOW_LOAD,fe=null},Q.get().streaming.abandonLoadTimeout))}}}function Ne(it){it.mediaType===y.Z.VIDEO&&(_e!==void 0&&Ae.push(it.streamId,_e,ge.getPlaybackQuality()),_e=it.newQuality)}function Xe(it){var yt,$t;it.metric!==D.Z.HTTP_REQUEST||!it.value||it.value.type!==ot.w.MEDIA_SEGMENT_TYPE||it.mediaType!==y.Z.AUDIO&&it.mediaType!==y.Z.VIDEO||Ge.push(it.mediaType,it.value,Q.get().streaming.abr.useDeadTimeLatency),it.metric!==D.Z.BUFFER_LEVEL||it.mediaType!==y.Z.AUDIO&&it.mediaType!==y.Z.VIDEO||(yt=it.mediaType,$t=.001*it.value.level,Q.get().streaming.abr.ABRStrategy===y.Z.ABR_STRATEGY_DYNAMIC&&function(Nt,en){try{var Jt=Ke.getStableBufferTime(),Wt=Jt,Dn=.5*Jt,xn=Z[Nt],rr=en>(xn?Dn:Wt);Z[Nt]=rr,rr!==xn&&(rr?P.info("["+Nt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):P.info("["+Nt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){P.error(ir)}}(yt,$t))}function dt(it,yt){try{var $t;return ee[yt]=ee[yt]||{},ee[yt].hasOwnProperty(it)||(ee[yt][it]=0),$t=function(Nt,en){var Jt=ee[en][Nt],Wt=Jt;if(!H[en]||!H[en][Nt])return Wt;var Dn=ut(Nt,en);Dn!==void 0&&(Wt=Math.max(Jt,Dn));var xn=function(rr,ir){try{var At=Ke.getAbrBitrateParameter("maxBitrate",rr);return At>-1?Ft(H[ir][rr].getMediaInfo(),At,ir):void 0}catch(Xt){return}}(Nt,en);return xn!==void 0&&(Wt=Math.min(Wt,xn)),Wt}(it,yt),$t=function(Nt,en,Jt){var Wt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?Nt:Math.min(Nt,Math.round(Wt*Dn))}($t,it,yt),$t=function(Nt,en,Jt){if(en!==y.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return Nt;we||An();var Wt=H[Jt][en].getStreamInfo(),Dn=ve.getAdaptationForType(Wt.index,en,Wt).Representation_asArray,xn=Nt;if(Ee>0&&ie>0){for(;xn>0&&Dn[xn]&&Ee<Dn[xn].width&&Ee-Dn[xn-1].width<Dn[xn].width-Ee;)xn-=1;for(;xn<Dn.length-1&&Dn[xn].width===Dn[xn+1].width;)xn+=1}return xn}($t,it,yt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&($t=function(Nt,en,Jt){if(en!=="video")return Nt;var Wt=Ze.getMaxBitrate(en);if(Wt<0)return Nt;var Dn=qt(Jt,"audio",et("audio",Jt));Wt-=Dn?Dn.bitrate/1e3:0;var xn=Ft(H[Jt][en].getMediaInfo(),Wt,Jt);return P.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Wt),Math.min(Nt,xn)}($t,it,yt)),$t}catch(Nt){return}}function ut(it,yt){try{return function($t,Nt){try{var en=Ke.getAbrBitrateParameter("minBitrate",$t);if(en>-1){var Jt=H[Nt][$t].getMediaInfo(),Wt=Ut(Jt),Dn=Ft(Jt,en,Nt);return Wt[Dn]&&Dn<Wt.length-1&&Wt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(xn){return}}(it,yt)}catch($t){return}}function et(it){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return yt||(yt=V.getActiveStreamInfo().id),it&&H[yt]&&H[yt][it]&&yt?(J[yt]=J[yt]||{},J[yt].hasOwnProperty(it)||(J[yt][it]=0),J[yt][it]):0}catch($t){return 0}}function ht(it,yt,$t){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(yt&&yt.id&&it){var en=yt.id,Jt=et(it,en);(0,he.SE)($t);var Wt=dt(it,en);$t!==Jt&&$t>=0&&$t<=Wt&&jt(it,Jt,$t,Wt,Nt,en)}}function jt(it,yt,$t,Nt,en,Jt){if(it&&H[Jt]&&H[Jt][it]){var Wt=H[Jt][it].getStreamInfo(),Dn=Wt&&Wt.manifestInfo&&Wt.manifestInfo.isDynamic,xn=ue.getCurrentBufferLevel(it);P.info("Stream ID: "+Jt+" ["+it+"] switch from "+yt+" to "+$t+"/"+Nt+" (buffer: "+xn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][it]=$t;var rr=qt(Jt,it,$t);Fe.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:yt,newQuality:$t,reason:en,streamInfo:Wt,bitrateInfo:rr,maxIdx:Nt,mediaType:it},{streamId:Wt.id,mediaType:it});var ir=Ge.getAverageThroughput(it,Dn);isNaN(ir)||$e.setSavedBitrateSettings(it,ir)}}function qt(it,yt,$t){if(yt&&H&&H[it]&&H[it][yt]){var Nt=Ut(H[it][yt].getMediaInfo());return Nt[$t]?Nt[$t]:null}return null}function Ft(it,yt,$t){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=it&&it.type?H[$t][it.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&Nt&&en&&en.fragmentDuration){Nt/=1e3;var Jt=en.fragmentDuration;if(Nt>Jt)return 0;var Wt=Nt/Jt;yt*=1-Wt}for(var Dn=Ut(it),xn=Dn.length-1;xn>=0;xn--){var rr=Dn[xn];if(1e3*yt>=rr.bitrate)return xn}return 0}function Ut(it){var yt=[];if(!it||!it.bitrateList)return yt;for(var $t,Nt=it.bitrateList,en=it.type,Jt=0,Wt=Nt.length;Jt<Wt;Jt++)($t=new Ou).mediaType=en,$t.qualityIndex=Jt,$t.bitrate=Nt[Jt].bandwidth,$t.width=Nt[Jt].width,$t.height=Nt[Jt].height,$t.scanType=Nt[Jt].scanType,yt.push($t);return yt}function An(){if(ge){var it=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Ee=ge.getClientWidth()*it,ie=ge.getClientHeight()*it}}return L={initialize:function(){Ae=Gh(Pe).create(),Ge=Am(Pe).create({settings:Q}),(B=(0,Cc.Z)(Pe).create({dashMetrics:ue,customParametersModel:Oe,mediaPlayerModel:Ke,settings:Q})).initialize(),Fe.on(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),Fe.on(_.Z.METRIC_ADDED,Xe,L),Fe.on(T.Z.LOADING_PROGRESS,pe,L)},isPlayingAtTopQuality:function(it){var yt=it?it.id:null,$t=et(y.Z.AUDIO,yt),Nt=et(y.Z.VIDEO,yt);return $t===dt(y.Z.AUDIO,yt)&&Nt===dt(y.Z.VIDEO,yt)},updateTopQualityIndex:function(it){var yt=it.type,$t=it.streamInfo.id,Nt=it.representationCount-1;return ee[$t]=ee[$t]||{},ee[$t][yt]=Nt,Nt},clearDataForStream:function(it){Ae&&Ae.clearForStream(it),H[it]&&delete H[it],ke[it]&&delete ke[it],re[it]&&delete re[it]},getThroughputHistory:function(){return Ge},getBitrateList:Ut,getQualityForBitrate:Ft,getTopBitrateInfoFor:function(it){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(yt||(yt=V.getActiveStreamInfo().id),it&&H&&H[yt]&&H[yt][it]){var $t=dt(it,yt),Nt=Ut(H[yt][it].getMediaInfo());return Nt[$t]?Nt[$t]:null}return null},getMinAllowedIndexFor:ut,getMaxAllowedIndexFor:dt,getInitialBitrateFor:function(it,yt){if(function(){if(!$e||!$e.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}(),it===y.Z.TEXT)return NaN;var $t=$e.getSavedBitrateSettings(it),Nt=Ke.getAbrBitrateParameter("initialBitrate",it),en=Q.get().streaming.abr.initialRepresentationRatio[it];if(Nt===-1)if(en>-1){var Jt=H[yt][it].getStreamInfo(),Wt=ve.getAdaptationForType(Jt.index,it,Jt).Representation_asArray;Nt=Array.isArray(Wt)?Wt[Math.max(Math.round(Wt.length*en)-1,0)].bandwidth/1e3:0}else Nt=isNaN($t)?it===y.Z.VIDEO?1e3:100:$t;return Nt},getQualityFor:et,getAbandonmentStateFor:function(it,yt){return re[it]&&re[it][yt]?re[it][yt].state:null},setPlaybackQuality:ht,checkPlaybackQuality:function(it,yt){try{if(!(it&&H&&H[yt]&&H[yt][it]))return!1;if(Ae){var $t=ge.getPlaybackQuality();$t&&Ae.push(yt,_e,$t)}if(!Q.get().streaming.abr.autoSwitchBitrate[it])return!1;var Nt=et(it,yt),en=Zh(Pe).create({abrController:L,switchHistory:ke[yt][it],droppedFramesHistory:Ae,streamProcessor:H[yt][it],currentValue:Nt,useBufferOccupancyABR:Z[it],useL2AABR:le[it],useLoLPABR:ae[it],videoModel:ge}),Jt=ut(it,yt),Wt=dt(it,yt),Dn=B.getMaxQuality(en),xn=Dn.quality;return Jt!==void 0&&(xn>sa.Z.NO_CHANGE?xn:Nt)<Jt&&(xn=Jt),xn>Wt&&(xn=Wt),ke[yt][it].push({oldValue:Nt,newValue:xn}),xn>sa.Z.NO_CHANGE&&xn!==Nt&&(re[yt][it].state===D.Z.ALLOW_LOAD||xn<Nt)&&(jt(it,Nt,xn,Wt,Dn.reason,yt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(it){we=it},registerStreamType:function(it,yt){var $t=yt.getStreamInfo().id;H[$t]||(H[$t]={}),ke[$t]||(ke[$t]={}),re[$t]||(re[$t]={}),ke[$t][it]=pi(Pe).create(),H[$t][it]=yt,re[$t][it]={},re[$t][it].state=D.Z.ALLOW_LOAD,function(Nt){var en=Q.get().streaming.abr.ABRStrategy;en===y.Z.ABR_STRATEGY_L2A?(Z[Nt]=!1,ae[Nt]=!1,le[Nt]=!0):en===y.Z.ABR_STRATEGY_LoLP?(Z[Nt]=!1,ae[Nt]=!0,le[Nt]=!1):en===y.Z.ABR_STRATEGY_BOLA?(Z[Nt]=!0,ae[Nt]=!1,le[Nt]=!1):en===y.Z.ABR_STRATEGY_THROUGHPUT?(Z[Nt]=!1,ae[Nt]=!1,le[Nt]=!1):en===y.Z.ABR_STRATEGY_DYNAMIC&&(Z[Nt]=!(!Z||!Z[Nt])&&Z[Nt],ae[Nt]=!1,le[Nt]=!1)}(it),it===y.Z.VIDEO&&An()},unRegisterStreamType:function(it,yt){try{H[it]&&H[it][yt]&&delete H[it][yt],ke[it]&&ke[it][yt]&&delete ke[it][yt],re[it]&&re[it][yt]&&delete re[it][yt]}catch($t){}},setConfig:function(it){it&&(it.streamController&&(V=it.streamController),it.domStorage&&($e=it.domStorage),it.mediaPlayerModel&&(Ke=it.mediaPlayerModel),it.customParametersModel&&(Oe=it.customParametersModel),it.cmsdModel&&(Ze=it.cmsdModel),it.dashMetrics&&(ue=it.dashMetrics),it.adapter&&(ve=it.adapter),it.videoModel&&(ge=it.videoModel),it.settings&&(Q=it.settings))},reset:function(){xe(),Fe.off(T.Z.LOADING_PROGRESS,pe,L),Fe.off(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),Fe.off(_.Z.METRIC_ADDED,Xe,L),B&&B.reset()}},P=be.getLogger(L),xe(),L}Zf.__dashjs_factory_name="AbrController";var qh=F.Z.getSingletonFactory(Zf);qh.QUALITY_DEFAULT=0,F.Z.updateSingletonFactory(Zf.__dashjs_factory_name,qh);var Wn=qh,Im=new Map([[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Rc(){var L,P,B,V,ee,J,H,re,fe=this.context,we=(0,m.Z)(fe).getInstance(),Ee=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function ve(){return Ee.length>0}function ge(){if(B&&ve()&&B.playbackRate===0){var Ae=document.createEvent("Event");Ae.initEvent("waiting",!0,!1),B.dispatchEvent(Ae)}}function Ke(Ae,Ge){B&&B.addEventListener(Ae,Ge)}function Oe(Ae,Ge){B&&B.removeEventListener(Ae,Ge)}function Ze(){return B?B.readyState:NaN}function $e(){return B?B.buffered:null}function _e(Ae,Ge,Z,le,ae){if(B){for(var ue=0;ue<B.textTracks.length;ue++)if(B.textTracks[ue].kind===Ae&&(!Ge||B.textTracks[ue].label==Ge)&&B.textTracks[ue].language===Z&&B.textTracks[ue].isTTML===le&&B.textTracks[ue].isEmbedded===ae)return B.textTracks[ue]}return null}function ke(Ae,Ge){return Ae===y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ze()>=Ae?(Ge(),null):function(Z,le){var ae=function ue(){Oe(Z,ue),le(Z)};return Ke(Z,ae),{func:ae,event:Z}}(Im.get(Ae),Ge)}return L={addEventListener:Ke,addTextTrack:function(Ae,Ge,Z,le,ae){if(!B)return null;var ue=_e(Ae,Ge,Z,le,ae);return ue||((ue=B.addTextTrack(Ae,Ge,Z)).isEmbedded=ae,ue.isTTML=le),ue},appendChild:function(Ae){B&&(B.appendChild(Ae),Ae.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=Ae.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=Ae.isEmbedded))},getBufferRange:$e,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var Ae="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,Ge=null;return"getVideoPlaybackQuality"in B?Ge=B.getVideoPlaybackQuality():Ae&&(Ge={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),Ge},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Ze,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:_e,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(V)?B.currentTime:V:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var Ae=B.parentNode.host||B.parentNode;return Ae?B.getBoundingClientRect().left-Ae.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var Ae=B.parentNode.host||B.parentNode;return Ae?B.getBoundingClientRect().top-Ae.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){we.on(T.Z.PLAYBACK_PLAYING,ge,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(V):null},isStalled:ve,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var Ae=B.play();Ae&&Ae.catch&&typeof Promise<"u"&&Ae.catch(function(Ge){Ge.name==="NotAllowedError"&&we.trigger(T.Z.PLAYBACK_NOT_ALLOWED),P.warn("Caught pending play exception - continuing (".concat(Ge,")"))})}},removeChild:function(Ae){B&&B.removeChild(Ae)},removeEventListener:Oe,reset:function(){clearTimeout(re),we.off(T.Z.PLAYBACK_PLAYING,ge,this)},setCurrentTime:function(Ae,Ge){B&&(ee&&ee.func&&ee.event&&Oe(ee.event,ee.func),V=Ae,ee=ke(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==V)try{V=Ge?function(Z){var le=$e(),ae=Z,ue=9999999999;if(le)for(var Q=0;Q<le.length;Q++){var Pe=le.start(Q),be=le.end(Q),Fe=Math.abs(Pe-Z),xe=Math.abs(be-Z);if(Z>=Pe&&Z<=be)return Z;Fe<ue&&(ue=Fe,ae=Pe),xe<ue&&(ue=xe,ae=be)}return ae}(V):V,isNaN(V)||(B.currentTime=V),V=NaN}catch(Z){B.readyState===0&&Z.code===Z.INVALID_STATE_ERR&&(re=setTimeout(function(){B.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(Ae){if(!(Ae==null||Ae&&/^(VIDEO|AUDIO)$/i.test(Ae.nodeName)))throw"element is not video or audio DOM type!";(B=Ae)&&(B.preload="auto")},setPlaybackRate:function(Ae){var Ge=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!Ge&&B.readyState<=2&&Ae>0?B.addEventListener("canplay",ie):B.playbackRate=Ae)},setSource:function(Ae){B&&(Ae?B.src=Ae:(B.removeAttribute("src"),B.load()))},setStallState:function(Ae,Ge){(function(Z,le){le?function(ae){ae!==null&&B&&!B.seeking&&Ee.indexOf(ae)===-1&&Ee.push(ae)}(Z):function(ae){var ue=Ee.indexOf(ae);ae!==null&&ue!==-1&&Ee.splice(ue,1)}(Z)})(Ae,Ge)},setTTMLRenderingDiv:function(Ae){(J=Ae).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(Ae){H=Ae},waitForReadyState:ke,setDisableRemotePlayback:function(Ae){B&&(B.disableRemotePlayback=Ae)}},P=(0,N.Z)(fe).getInstance().getLogger(L),V=NaN,L}Rc.__dashjs_factory_name="VideoModel";var Sr=F.Z.getSingletonFactory(Rc),Ol=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],gu="dashjs_?_bitrate",Kr="dashjs_?_settings",Ho="localStorage",Oi="lastBitrate",bm="lastMediaSettings";function Hh(L){L=L||{};var P,B,V,ee=this.context,J=L.settings;function H(Ee){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[Ee])}catch(ve){return B.warn("DOMStorage access denied: "+ve.message),V}if(!ie||Ee!==Ho)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(ve){B.warn("DOMStorage is supported, but cannot be used: "+ve.message)}return V}function re(){var Ee=6e5;return Math.round(new Date().getTime()/Ee)*Ee}function fe(Ee,ie){return H(Ee)&&J.get().streaming[ie+"CachingInfo"].enabled}function we(){if(!J)throw new Error(y.Z.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(Ee){if(we(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(fe(Ho,Oi)){var ve=gu.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(ve))||{},Ke=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,Oe=parseFloat(ge.bitrate);isNaN(Oe)||Ke?Ke&&localStorage.removeItem(ve):(ie=Oe,B.debug("Last saved bitrate for "+Ee+" was "+Oe))}catch(Ze){return null}}return ie},setSavedBitrateSettings:function(Ee,ie){if(fe(Ho,Oi)&&ie){var ve=gu.replace(/\?/,Ee);try{localStorage.setItem(ve,JSON.stringify({bitrate:ie.toFixed(3),timestamp:re()}))}catch(ge){B.error(ge.message)}}},getSavedMediaSettings:function(Ee){if(we(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(fe(Ho,bm)){var ve=Kr.replace(/\?/,Ee);try{var ge=JSON.parse(localStorage.getItem(ve))||{},Ke=new Date().getTime()-parseInt(ge.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=ge.settings,Ke&&(localStorage.removeItem(ve),ie=null)}catch(Oe){return null}}return ie},setSavedMediaSettings:function(Ee,ie){if(fe(Ho,bm)){var ve=Kr.replace(/\?/,Ee);try{localStorage.setItem(ve,JSON.stringify({settings:ie,timestamp:re()}))}catch(ge){B.error(ge.message)}}}},B=(0,N.Z)(ee).getInstance().getLogger(P),H(Ho)&&Ol.forEach(function(Ee){var ie=localStorage.getItem(Ee.oldKey);if(ie){localStorage.removeItem(Ee.oldKey);try{localStorage.setItem(Ee.newKey,ie)}catch(ve){B.error(ve.message)}}}),P}Hh.__dashjs_factory_name="DOMStorage";var CE=F.Z.getSingletonFactory(Hh),Cm=w(2032),Kh=w(2011);function xc(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge=this.context;function Ke(_e,ke,Ae,Ge){var Z=null,le=_e?ve.resolve(_e.path):null,ae=Ge||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ke};P.debug("Start searching for initialization.");var ue=$e(ae);re.load({request:ue,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(Z=V.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,Ke(_e,ke,Ae,ae);_e.range=Z,Ae(_e)},error:function(){Ae(_e)}}),P.debug("Perform init search: "+ae.url)}function Oe(_e,ke,Ae,Ge,Z,le){if(Ae&&(Ae.start===void 0||Ae.end===void 0)){var ae=Ae?Ae.toString().split("-"):null;Ae=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}Z=Z||Ze;var ue=null,Q=null,Pe=!!Ae,be=_e?ve.resolve(_e.path):null,Fe={init:!1,url:be?be.url:void 0,range:Pe?Ae:{start:0,end:1500},searching:!Pe,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:ke},xe=$e(Fe);re.load({request:xe,success:function(pe){var Ne=Fe.bytesToLoad,Xe=pe.byteLength;if(Fe.bytesLoaded=Fe.range.end-Fe.range.start,ue=V.parse(pe),(Q=ue.getBox("sidx"))&&Q.isComplete){var dt,ut,et=Q.references;if(et!=null&&et.length>0&&(dt=et[0].reference_type===1),dt){var ht,jt,qt,Ft;P.debug("Initiate multiple SIDX load."),Fe.range.end=Fe.range.start+Q.size;var Ut=[],An=0,it=(Q.offset||Fe.range.start)+Q.size,yt=function(Nt){Nt?(Ut=Ut.concat(Nt),++An>=jt&&(Ut.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),Z(Ut,_e,Ge))):Z(null,_e,Ge)};for(ht=0,jt=et.length;ht<jt;ht++)qt=it,Ft=it+et[ht].referenced_size-1,it+=et[ht].referenced_size,Oe(_e,ke,{start:qt,end:Ft},Ge,yt,Fe)}else P.debug("Parsing segments from SIDX. representation "+ke+" - id: "+_e.id+" for range : "+Fe.range.start+" - "+Fe.range.end),ut=function(Nt,en){for(var Jt,Wt,Dn,xn,rr=Nt.references,ir=rr.length,At=Nt.timescale,Xt=Nt.earliest_presentation_time,Gt=en.range.start+Nt.offset+Nt.first_offset+Nt.size,un=[],mn=0;mn<ir;mn++)Dn=rr[mn].subsegment_duration,xn=rr[mn].referenced_size,(Jt=new Kh.Z).duration=Dn,Jt.startTime=Xt,Jt.timescale=At,Wt=Gt+xn-1,Jt.mediaRange=Gt+"-"+Wt,un.push(Jt),Xt+=Dn,Gt+=xn;return un}(Q,Fe),Z(ut,_e,Ge)}else{if(Q)Fe.range.start=Q.offset||Fe.range.start,Fe.range.end=Fe.range.start+(Q.size||Ne);else{if(Xe<Fe.bytesLoaded)return void Z(null,_e,Ge);var $t=ue.getLastBox();$t&&$t.size?(Fe.range.start=$t.offset+$t.size,Fe.range.end=Fe.range.start+Ne):Fe.range.end+=Ne}Oe(_e,ke,Fe.range,Ge,null,Fe)}},error:function(){Z(null,_e,Ge)}}),P.debug("Perform SIDX load for type ".concat(ke," : ").concat(Fe.url," with range ").concat(Fe.range.start," - ").concat(Fe.range.end))}function Ze(_e,ke,Ae){Ae({segments:_e,representation:ke,error:_e?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function $e(_e){if(_e.url){var ke=new j.Z;return ke.setInfo(_e),ke}}return L={setConfig:function(_e){_e.baseURLController&&(ve=_e.baseURLController),_e.dashMetrics&&(J=_e.dashMetrics),_e.mediaPlayerModel&&(H=_e.mediaPlayerModel),_e.errHandler&&(B=_e.errHandler),_e.boxParser&&(V=_e.boxParser),_e.debug&&(P=_e.debug.getLogger(L)),_e.requestModifier&&(ee=_e.requestModifier),_e.errors&&(fe=_e.errors),_e.urlUtils&&(ie=_e.urlUtils),_e.constants&&(we=_e.constants),_e.dashConstants&&(Ee=_e.dashConstants)},initialize:function(){re=wo(ge).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:V,errors:fe,urlUtils:ie,constants:we,dashConstants:Ee})},loadInitialization:function(_e,ke){return new Promise(function(Ae){Ke(_e,ke,Ae)})},loadSegments:function(_e,ke,Ae){return new Promise(function(Ge){Oe(_e,ke,Ae,Ge)})},reset:function(){re&&(re.abort(),re=null)}}}xc.__dashjs_factory_name="SegmentBaseLoader";var Ya=F.Z.getSingletonFactory(xc);function Vh(L){var P;L=L||{};var B=new DataView(L.data),V=0;function ee(H,re){var fe=!0,we=0;if(re===void 0&&(re=!1),H.tag>16777215?(B.getUint32(V)!==H.tag&&(fe=!1),we=4):H.tag>65535?(256*B.getUint16(V)+B.getUint8(V+2)!==H.tag&&(fe=!1),we=3):H.tag>255?(B.getUint16(V)!==H.tag&&(fe=!1),we=2):(B.getUint8(V)!==H.tag&&(fe=!1),we=1),!fe&&H.required&&!re)throw new Error("required tag not found");return fe&&(V+=we),fe}function J(H){var re=1,fe=128,we=-1,Ee=0,ie=B.getUint8(V),ve=0;for(ve=0;ve<8;ve+=1){if((ie&fe)===fe){Ee=H===void 0?ie&~fe:ie,we=ve;break}fe>>=1}for(ve=0;ve<we;ve+=1,re+=1)Ee=Ee<<8|255&B.getUint8(V+re);return V+=re,Ee}return P={getPos:function(){return V},setPos:function(H){V=H},consumeTag:ee,consumeTagAndSize:function(H,re){var fe=ee(H,re);return fe&&J(),fe},parseTag:function(H){var re;return ee(H),re=J(),P[H.parse](re)},skipOverElement:function(H,re){var fe,we=ee(H,re);return we&&(fe=J(),V+=fe),we},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var re;switch(H){case 4:re=B.getFloat32(V),V+=4;break;case 8:re=B.getFloat64(V),V+=8}return re},getMatroskaUint:function(H){if(H>4)return function(we){for(var Ee=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,ve=0;ve<we;ve+=1){if(ie>Ee)throw new Error("Value exceeds safe integer limit");ie*=256;var ge=B.getUint8(V+ve);if(ie>Number.MAX_SAFE_INTEGER-ge)throw new Error("Value exceeds safe integer limit");ie+=ge}return V+=we,ie}(H);for(var re=0,fe=0;fe<H;fe+=1)re<<=8,re|=255&B.getUint8(V+fe);return V+=H,re>>>0},moreData:function(){return V<B.byteLength}}}Vh.__dashjs_factory_name="EBMLParser";var Nc=F.Z.getClassFactory(Vh);function Wu(){var L,P,B,V,ee,J,H,re,fe,we,Ee=this.context;function ie(ve){var ge=new j.Z;return ge.setInfo(ve),ge}return L={setConfig:function(ve){if(!(ve.baseURLController&&ve.dashMetrics&&ve.mediaPlayerModel&&ve.errHandler))throw new Error(y.Z.MISSING_CONFIG_ERROR);we=ve.baseURLController,J=ve.dashMetrics,H=ve.mediaPlayerModel,V=ve.errHandler,fe=ve.errors,P=ve.debug.getLogger(L),ee=ve.requestModifier},initialize:function(){re=wo(Ee).create({errHandler:V,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:fe})},loadInitialization:function(ve,ge){return new Promise(function(Ke){var Oe=null,Ze=ve?we.resolve(ve.path):null,$e=ve?ve.range.split("-"):null,_e={range:{start:$e?parseFloat($e[0]):null,end:$e?parseFloat($e[1]):null},request:Oe,url:Ze?Ze.url:void 0,init:!0,mediaType:ge};P.info("Start loading initialization."),Oe=ie(_e),re.load({request:Oe,success:function(){Ke(ve)},error:function(){Ke(ve)}}),P.debug("Perform init load: "+_e.url)})},loadSegments:function(ve,ge,Ke){return new Promise(function(Oe){var Ze=null,$e=ve?we.resolve(ve.path):null,_e=$e?$e.url:void 0;Ze=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Ze,url:_e,init:!1,mediaType:ge}),P.debug("Parsing ebml header"),re.load({request:Ze,success:function(ke){(function(Ae,Ge,Z,le){if(Ae&&Ae.byteLength!==0){var ae,ue,Q,Pe,be=Nc(Ee).create({data:Ae}),Fe=Z?Z.split("-"):null,xe=null,pe={url:Ge,range:{start:Fe?parseFloat(Fe[0]):null,end:Fe?parseFloat(Fe[1]):null},request:xe};for(P.debug("Parse EBML header: "+pe.url),be.skipOverElement(B.EBML),be.consumeTag(B.Segment),Q=be.getMatroskaCodedNum(),Q+=be.getPos(),Pe=be.getPos();be.moreData()&&!be.consumeTagAndSize(B.Segment.Info,!0);)if(!(be.skipOverElement(B.Segment.SeekHead,!0)||be.skipOverElement(B.Segment.Tracks,!0)||be.skipOverElement(B.Segment.Cues,!0)||be.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var Ne=be.getMatroskaCodedNum(!0),Xe=be.getMatroskaCodedNum();Ne===B.Segment.Info.Duration.tag?ae=be[B.Segment.Info.Duration.parse](Xe):be.setPos(be.getPos()+Xe)}xe=ie(pe),re.load({request:xe,success:function(dt){ue=function(ut,et,ht,jt){var qt,Ft,Ut,An,it,yt,$t,Nt;for(Ut=[],it=0,yt=(Ft=function(en){var Jt,Wt,Dn=[],xn=Nc(Ee).create({data:en});for(xn.consumeTagAndSize(B.Segment.Cues);xn.moreData()&&xn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=xn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];xn.moreData()&&xn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=xn.getMatroskaCodedNum(),ir=xn.getPos();if((Wt={}).Track=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Wt.Track===0)throw new Error("Cue track cannot be 0");Wt.ClusterPosition=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Wt),xn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(ut)).length;it<yt;it+=1)An=new Kh.Z,qt=it<Ft.length-1?Ft[it+1].CueTime-Ft[it].CueTime:jt-Ft[it].CueTime,An.duration=qt,An.startTime=Ft[it].CueTime,An.timescale=1e3,$t=Ft[it].CueTracks[0].ClusterPosition+et,Nt=it<Ft.length-1?Ft[it+1].CueTracks[0].ClusterPosition+et-1:ht-1,An.mediaRange=$t+"-"+Nt,Ut.push(An);return P.debug("Parsed cues: "+Ut.length+" cues."),Ut}(dt,Pe,Q,ae),le(ue)},error:function(){P.error("Download Error: Cues "+pe.url),le(null)}}),P.debug("Perform cues load: "+pe.url+" bytes="+pe.range.start+"-"+pe.range.end)}else le(null)})(ke,_e,Ke,function(Ae){Oe({segments:Ae,representation:ve,error:Ae?void 0:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Oe({representation:ve,error:new ce.Z(fe.SEGMENT_BASE_LOADER_ERROR_CODE,fe.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){re&&(re.abort(),re=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}Wu.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=F.Z.getSingletonFactory(Wu);function Gf(L){L=L||{};var P,B,V,ee=this.context,J=L.eventBus,H=L.events,re=L.dashMetrics,fe=L.mediaPlayerModel,we=L.errHandler,Ee=L.baseURLController,ie=L.debug,ve=L.boxParser,ge=L.requestModifier,Ke=L.errors;function Oe(Ze){return(Ze?Ze.split("/")[1]:"").toLowerCase()==="webm"}return P={initialize:function(){B.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Ze){return Oe(Ze.representation.mimeType)?V.loadInitialization(Ze.representation,Ze.mediaType):B.loadInitialization(Ze.representation,Ze.mediaType)},getSegmentList:function(Ze){return Oe(Ze.mimeType)?V.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null):B.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null)},reset:function(){B.reset(),V.reset()}},B=Ya(ee).getInstance(),V=jr(ee).getInstance(),B.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:fe,errHandler:we,eventBus:J,events:H,errors:Ke,debug:ie,boxParser:ve,requestModifier:ge}),V.setConfig({baseURLController:Ee,dashMetrics:re,mediaPlayerModel:fe,errHandler:we,eventBus:J,events:H,errors:Ke,debug:ie,requestModifier:ge}),P}Gf.__dashjs_factory_name="SegmentBaseController";var RE=F.Z.getSingletonFactory(Gf),Ll=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Mc=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},ks=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Rm(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Fr=function(){function L(V){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=V[0]=="/",this.path=V.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},re=J.indexOf("[");if(re!=-1){H.name=J.substring(0,re);var fe=J.substring(re+1,J.length-1);ee.valid=ee.valid&&fe.indexOf("[")==-1;var we=fe.indexOf("=");we!=-1?(H.attribute={name:fe.substring(1,we),value:fe.substring(we+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(fe,10)-1}return H})}var P,B;return P=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,ee){for(var J=null,H=V,re=1,fe="MPD";re<this.path.length&&H!==null;){J=H;var we=this.path[re];if(fe=we.name,re!==this.path.length-1||!fe.startsWith("@")&&fe!=="text()"){var Ee=J[fe+"_asArray"]||[];Ee.length===0&&J[fe]&&Ee.push(J[fe]),we.position?H=Ee[we.position]||null:we.attribute?function(){var ie=we.attribute;H=Ee.filter(function(ve){return ve[ie.name]==ie.value})[0]||null}():H=Ee[0]||null}re++}return H===null?null:fe.startsWith("@")?{name:fe.substring(1),leaf:H,target:H}:fe==="text()"?{name:"__text",leaf:H,target:H}:{name:fe,leaf:H,target:ee?J:H}}}])&&Rm(P.prototype,B),L}();function yr(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var mu=function(){function L(V,ee,J){(function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=V,this.xpath=ee,this.value=J,this.position=null}var P,B;return P=L,(B=[{key:"getMpdTarget",value:function(V){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,ee)}}])&&yr(P.prototype,B),L}();function wi(){var L,P,B=this.context;return L={getIsPatch:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(V[v.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[v.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[v.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return P.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],re=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return P.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;re="".concat(re,"/").concat(H.type)}var fe=new Fr(re);if(!fe.isValid())return P.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(re)),null;var we=null;fe.findsAttribute()||fe.findsTextReplace()?we=H.__text||"":J!=="remove"&&(we=H.__children.reduce(function(ie,ve){var ge=Object.keys(ve)[0];return ge!=="#text"&&(ie[ge]=ie[ge]||[],ie[ge].push(ve[ge])),ie},{}));var Ee=new mu(J,fe,we);return J==="add"&&(Ee.position=H.pos),Ee}).filter(function(ee){return!!ee}):[]}},P=(0,N.Z)(B).getInstance().getLogger(L),L}wi.__dashjs_factory_name="PatchManifestModel";var zh=F.Z.getSingletonFactory(wi);function $u(){var L,P,B,V,ee,J,H,re=this.context;function fe(ae,ue,Q){var Pe,be=P.getAdaptationsForType(V[0].mpd.manifest,ae,ue);if(!be||be.length===0)return null;if(be.length>1&&Q){var Fe=ie(Q,ue);if(ee[Q.id]&&ee[Q.id][ue]){for(var xe=0,pe=be.length;xe<pe;xe++)if(we(ee[Q.id][ue],Fe[xe]))return be[xe]}for(var Ne=0,Xe=be.length;Ne<Xe;Ne++)if(Pe=be[Ne],P.getRolesForAdaptation(Pe).filter(function(dt){return dt.value===v.Z.MAIN})[0])return be[Ne]}return be[0]}function we(ae,ue){if(!ae||!ue)return!1;var Q=ae.id===ue.id,Pe=ae.codec===ue.codec,be=ae.viewpoint===ue.viewpoint,Fe=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(ue.viewpointsWithSchemeIdUri),xe=ae.lang===ue.lang,pe=ae.roles.toString()===ue.roles.toString(),Ne=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(ue.rolesWithSchemeIdUri),Xe=ae.accessibility.toString()===ue.accessibility.toString(),dt=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(ue.accessibilitiesWithSchemeIdUri),ut=ae.audioChannelConfiguration.toString()===ue.audioChannelConfiguration.toString(),et=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(ue.audioChannelConfigurationsWithSchemeIdUri);return Q&&Pe&&be&&Fe&&xe&&pe&&Ne&&Xe&&dt&&ut&&et}function Ee(ae,ue,Q,Pe,be,Fe){var xe,pe,Ne,Xe,dt,ut,et=[];if(!Pe||Pe.length===0)return[];var ht=P.getAdaptationsForPeriod(ue);for(Xe=0,ut=Pe.length;Xe<ut;Xe++)if(xe=Pe[Xe],pe=_e(ht[Ne=P.getIndexForAdaptation(xe,ae,Q.index)]),Fe){var jt=pe.accessibility.length;for(dt=0;dt<jt;dt++)if(pe){var qt=pe.accessibility[dt];if(qt.indexOf("cea-608:")===0){var Ft=qt.substring(8).split(";");if(Ft[0].substring(0,2)==="CC")for(dt=0;dt<Ft.length;dt++)pe||(pe=_e.call(this,ht[Ne])),ke(pe,Ft[dt].substring(0,3),Ft[dt].substring(4)),et.push(pe),pe=null;else for(dt=0;dt<Ft.length;dt++)pe||(pe=_e.call(this,ht[Ne])),ke(pe,"CC"+(dt+1),Ft[dt]),et.push(pe),pe=null}else qt.indexOf("cea-608")===0&&(ke(pe,J.CC1,"eng"),et.push(pe),pe=null)}}else be===J.IMAGE?(pe.type=J.IMAGE,et.push(pe),pe=null):pe&&et.push(pe);return et}function ie(ae,ue,Q){var Pe=V,be=Q,Fe=[];if(be)Ge(),Pe=ve(be);else{if(!(V.length>0))return Fe;be=V[0].mpd.manifest}var xe=$e(ae,Pe),pe=P.getAdaptationsForType(be,ae?ae.index:null,ue);return Fe=Ee(be,xe,ae,pe,ue),ue===J.TEXT&&(pe=P.getAdaptationsForType(be,ae?ae.index:null,J.VIDEO),Fe=Fe.concat(Ee(be,xe,ae,pe,ue,!0))),Fe}function ve(ae){var ue=ge(ae);return P.getRegularPeriods(ue)}function ge(ae){var ue=Oe(ae);return P.getMpd(ue)}function Ke(){V=[],ee={}}function Oe(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Ze(ae){try{var ue=$e(ae.streamInfo,V),Q=P.getAdaptationsForPeriod(ue);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Pe){return null}}function $e(ae,ue){for(var Q=ue.length,Pe=0;Pe<Q;Pe++){var be=ue[Pe];if(ae&&ae.id===be.id)return be}return null}function _e(ae){if(!ae)return null;var ue,Q,Pe,be,Fe,xe=new Mc,pe=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(xe.id=ae.id,xe.index=ae.index,xe.type=ae.type,xe.streamInfo=Ae(ae.period),xe.representationCount=P.getRepresentationCount(pe),xe.labels=P.getLabelsForAdaptation(pe),xe.lang=P.getLanguageForAdaptation(pe),xe.segmentAlignment=P.getSegmentAlignment(pe),xe.subSegmentAlignment=P.getSubSegmentAlignment(pe),ue=P.getViewpointForAdaptation(pe),xe.viewpoint=ue.length?ue[0].value:void 0,xe.viewpointsWithSchemeIdUri=ue,Fe=P.getAccessibilityForAdaptation(pe),xe.accessibility=Fe.map(function(et){var ht=et.value,jt=ht;return et.schemeIdUri&&et.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(jt=ht?"cea-608:"+ht:"cea-608",xe.embeddedCaptions=!0),jt}),xe.accessibilitiesWithSchemeIdUri=Fe,Q=P.getAudioChannelConfigurationForAdaptation(pe),xe.audioChannelConfiguration=Q.map(function(et){return et.value}),xe.audioChannelConfigurationsWithSchemeIdUri=Q,xe.audioChannelConfiguration.length===0&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0&&(Pe=P.getAudioChannelConfigurationForRepresentation(pe.Representation_asArray[0]),xe.audioChannelConfiguration=Pe.map(function(et){return et.value}),xe.audioChannelConfigurationsWithSchemeIdUri=Pe),be=P.getRolesForAdaptation(pe),xe.roles=be.map(function(et){return et.value}),xe.rolesWithSchemeIdUri=be,xe.codec=P.getCodec(pe),xe.mimeType=P.getMimeType(pe),xe.contentProtection=P.getContentProtectionData(pe),xe.bitrateList=P.getBitrateListForAdaptation(pe),xe.selectionPriority=P.getSelectionPriority(pe),xe.contentProtection){var Ne=xe.contentProtection.map(function(et){return P.getKID(et)}).filter(function(et){return et!==null});if(Ne.length){var Xe=Ne[0];xe.contentProtection.forEach(function(et){et.keyId=Xe})}}if(xe.isText=P.getIsText(pe),xe.supplementalProperties=P.getSupplementalPropertiesForAdaptation(pe),(!xe.supplementalProperties||Object.keys(xe.supplementalProperties).length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var dt=pe.Representation_asArray.map(function(et){return P.getSupplementalPropertiesForRepresentation(et)});dt.every(function(et){return JSON.stringify(et)===JSON.stringify(dt[0])})&&(xe.supplementalProperties=dt[0])}if(xe.supplementalPropertiesAsArray=P.getSupplementalPropertiesAsArrayForAdaptation(pe),(!xe.supplementalPropertiesAsArray||xe.supplementalPropertiesAsArray.length===0)&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.length>0){var ut=pe.Representation_asArray.map(function(et){return P.getSupplementalPropertiesAsArrayForRepresentation(et)});ut.every(function(et){return JSON.stringify(et)===JSON.stringify(ut[0])})&&(xe.supplementalPropertiesAsArray=ut[0])}return xe.essentialProperties=P.getEssentialPropertiesForAdaptation(pe),xe.essentialPropertiesAsArray=P.getEssentialPropertiesAsArrayForAdaptation(pe),xe.isFragmented=P.getIsFragmented(pe),xe.isEmbedded=!1,xe}function ke(ae,ue,Q){ae.id=ue,ae.index=100+parseInt(ue.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Pe=yi()(Q);ae.lang=Pe||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Ae(ae){var ue,Q,Pe=new Dr;return Pe.id=ae.id,Pe.index=ae.index,Pe.start=ae.start,Pe.duration=ae.duration,Pe.manifestInfo=(ue=ae.mpd,(Q=new ks).dvrWindowSize=ue.timeShiftBufferDepth,Q.loadedTime=ue.manifest.loadedTime,Q.availableFrom=ue.availabilityStartTime,Q.minBufferTime=ue.manifest.minBufferTime,Q.maxFragmentDuration=ue.maxSegmentDuration,Q.duration=P.getDuration(ue.manifest),Q.isDynamic=P.getIsDynamic(ue.manifest),Q.serviceDescriptions=P.getServiceDescriptions(ue.manifest),Q.protocol=ue.manifest.protocol,Q),Pe.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Pe.start+Pe.duration-Pe.manifestInfo.duration)<1,Pe}function Ge(){if(!J)throw new Error("setConfig function has to be called previously")}function Z(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,ue,Q){var Pe,be,Fe,xe,pe;if(ae){for(Pe=ae.AdaptationSet_asArray,xe=0;xe<Pe.length;xe+=1)for(Fe=Pe[xe].Representation_asArray,pe=0;pe<Fe.length;pe+=1)if(ue===(be=Fe[pe]).id)return Q?pe:be}return null}return L={getBandwidthForRepresentation:function(ae,ue){var Q;return(Q=le(Z(ue),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,ue){return function(Q,Pe){var be=le(Q,Pe,!0);return be!==null?be:-1}(Z(ue),ae)},getMaxIndexForBufferType:function(ae,ue){return function(Q,Pe){var be,Fe,xe,pe;if(!Q||!Pe)return-1;for(Fe=Q.AdaptationSet_asArray,pe=0;pe<Fe.length;pe+=1)if(xe=(be=Fe[pe]).Representation_asArray,P.getIsTypeOf(be,Pe))return xe.length;return-1}(Z(ue),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var ue=new Ll,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Pe=P.getRepresentationFor(ae.index,Q);return ue.id=ae.id,ue.quality=ae.index,ue.bandwidth=P.getBandwidth(Pe),ue.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),ue.MSETimeOffset=ae.MSETimeOffset,ue.mediaInfo=_e(ae.adaptation),ue}return null},getStreamsInfo:function(ae,ue){var Q=[],Pe=V;if(ae&&(Ge(),Pe=ve(ae)),Pe.length>0){(!ue||ue>Pe.length)&&(ue=Pe.length);for(var be=0;be<ue;be++)Q.push(Ae(Pe[be]))}return Q},getMediaInfoForType:function(ae,ue){if(V.length===0||!ae)return null;var Q=$e(ae,V);if(!Q)return null;var Pe=P.getAdaptationsForPeriod(Q),be=fe(ae.index,ue,ae);return be?_e(Pe[P.getIndexForAdaptation(be,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:fe,getRealAdaptation:function(ae,ue){var Q,Pe,be=$e(ae,V);return Q=ue?ue.id:null,V.length>0&&be&&(Pe=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,be.index)),Pe},getProducerReferenceTimes:function(ae,ue){var Q,Pe,be=$e(ae,V);return Q=ue?ue.id:null,V.length>0&&be&&(Pe=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(ue?ue.index:null,V[0].mpd.manifest,be.index)),Pe?P.getProducerReferenceTimesForAdaptation(Pe):[]},getRealPeriodByIndex:function(ae){return P.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return P.getEssentialPropertiesForRepresentation(ae)}catch(ue){return[]}},getVoRepresentations:function(ae){var ue=Ze(ae);return P.getRepresentationsForAdaptation(ue)},getEventsFor:function(ae,ue,Q){var Pe=[];if(V.length>0){var be=V[0].mpd.manifest;if(ae instanceof Dr){var Fe=$e(ae,V);Pe=P.getEventsForPeriod(Fe)}else if(ae instanceof Mc){var xe=$e(Q,V);Pe=P.getEventStreamForAdaptationSet(be,Ze(ae),xe)}else if(ae instanceof Ll){var pe=$e(Q,V);Pe=P.getEventStreamForRepresentation(be,ue,pe)}}return Pe},getEvent:function(ae,ue,Q,Pe){try{if(!ae||!ue||isNaN(Q)||!Pe)return null;var be=ae.scheme_id_uri,Fe=ae.value;if(!ue[be+"/"+Fe])return null;var xe,pe=new to,Ne=ae.timescale||1,Xe=Pe.adaptation.period.start,dt=ue[be+"/"+Fe],ut=isNaN(Pe.presentationTimeOffset)?isNaN(dt.presentationTimeOffset)?0:dt.presentationTimeOffset:Pe.presentationTimeOffset,et=ae.presentation_time_delta/Ne;xe=ae.version===0?Xe+Q-ut+et:Xe-ut+et;var ht=ae.event_duration/Ne,jt=ae.id,qt=ae.message_data;return pe.eventStream=dt,pe.eventStream.value=Fe,pe.eventStream.timescale=Ne,pe.duration=ht,pe.id=jt,pe.calculatedPresentationTime=xe,pe.messageData=qt,pe.presentationTimeDelta=et,pe}catch(Ft){return null}},getMpd:ge,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&P.setConfig({errHandler:ae.errHandler}),ae.BASE64&&P.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;Ge(),V=ve(ae)},getIsTextTrack:function(ae){return P.getIsText(ae)},getUTCTimingSources:function(){var ae=Oe();return P.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return P.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var ue=ge(ae);return P.getAvailabilityStartTime(ue)},getIsTypeOf:function(ae,ue){return P.getIsTypeOf(ae,ue)},getIsDynamic:function(ae){var ue=Oe(ae);return P.getIsDynamic(ue)},getDuration:function(ae){var ue=Oe(ae);return P.getDuration(ue)},getRegularPeriods:ve,getContentSteering:function(ae){return P.getContentSteering(ae)},getLocation:function(ae){return P.getLocation(ae)},getPatchLocation:function(ae){var ue=P.getPatchLocation(ae),Q=P.getPublishTime(ae);return ue&&ue.length!==0&&Q?ue.filter(function(Pe){return isNaN(Pe.ttl)||Q.getTime()+Pe.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return P.getManifestUpdatePeriod(ae,ue)},getPublishTime:function(ae){return P.getPublishTime(ae)},getIsDVB:function(ae){return P.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return P.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return P.getRepresentationSortFunction()},getCodec:function(ae,ue,Q){return P.getCodec(ae,ue,Q)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var ue=V.filter(function(Q){return Q.id===ae});return ue&&ue.length>0?ue[0]:null},setCurrentMediaInfo:function(ae,ue,Q){ee[ae]=ee[ae]||{},ee[ae][ue]=ee[ae][ue]||{},ee[ae][ue]=Q},isPatchValid:function(ae,ue){var Q=P.getId(ae),Pe=B.getMpdId(ue),be=P.getPublishTime(ae),Fe=B.getPublishTime(ue),xe=B.getOriginalPublishTime(ue);return!!(Q&&Pe&&Q==Pe&&be&&xe&&be.getTime()==xe.getTime()&&Fe&&be.getTime()<Fe.getTime())},applyPatchToManifest:function(ae,ue){B.getPatchOperations(ue).forEach(function(Q){var Pe=Q.getMpdTarget(ae);if(Pe!==null){var be=Pe.name,Fe=Pe.target,xe=Pe.leaf;if(Q.xpath.findsAttribute()||be==="__text")switch(Q.action){case"add":case"replace":Fe[be]=Q.value;break;case"remove":delete Fe[be]}else{var pe=(Fe[be+"_asArray"]||[]).indexOf(xe),Ne=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete Fe[be],pe!=-1)){var Xe=Fe[be+"_asArray"];Xe.splice(pe,1),Xe.length>1?Fe[be]=Xe:Xe.length==1?Fe[be]=Xe[0]:delete Fe[be+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(dt){var ut=Q.value[dt],et=Fe[dt+"_asArray"]||[];if(et.length===0&&Fe[dt]&&et.push(Fe[dt]),et.length===0)et=ut;else{var ht=et.length;ht=dt==be&&pe!=-1?pe+(Ne?0:1)+(Q.action=="replace"?-1:0):Ne?0:et.length,et.splice.apply(et,[ht,0].concat(ut))}Fe[dt+"_asArray"]=et,Fe[dt]=et.length==1?et[0]:et})}}})},areMediaInfosEqual:we,reset:Ke},P=Vn(re).getInstance(),B=zh(re).getInstance(),Ke(),L}$u.__dashjs_factory_name="DashAdapter";var xm=F.Z.getSingletonFactory($u);function qf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var kl=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var P,B;return P=L,B=[{key:"round10",value:function(V,ee){return function(J,H,re){return re===void 0||+re==0?Math[J](H):(re=+re,(H=+H)===null||isNaN(H)||typeof re!="number"||re%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-re:-re)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+re:re))))}("round",V,ee)}}],B&&qf(P,B),L}(),xE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Nm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},Mm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},Hf=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=D.Z.BUFFER_EMPTY},Yh=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Fl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Dc(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var NE=function L(){Dc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Kf=function L(){Dc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},ME=function L(){Dc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Wr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ci=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function vu(L){var P,B,V=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function re(ge){J.trigger(T.Z.METRIC_CHANGED,{mediaType:ge}),H()}function fe(ge,Ke,Oe){J.trigger(T.Z.METRIC_UPDATED,{mediaType:ge,metric:Ke,value:Oe}),re(ge)}function we(ge,Ke,Oe){J.trigger(T.Z.METRIC_ADDED,{mediaType:ge,metric:Ke,value:Oe}),re(ge)}function Ee(ge,Ke){var Oe=null;return ge&&(B.hasOwnProperty(ge)?Oe=B[ge]:Ke||(Oe=new xE,B[ge]=Oe)),Oe}function ie(ge,Ke,Oe){var Ze=Ee(ge);Ze!==null&&(Ze[Ke].push(Oe),Ze[Ke].length>V.get().streaming.metrics.maxListDepth&&Ze[Ke].shift())}function ve(ge,Ke,Oe){ie(ge,Ke,Oe),we(ge,Ke,Oe)}return P={clearCurrentMetricsForType:function(ge){delete B[ge],re(ge)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:Ee,addHttpRequest:function ge(Ke,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,ue,Q,Pe,be,Fe,xe){var pe=new ot.w;ke!=null&&ke!==$e&&(ge(Ke,null,Ze,$e,_e,null,null,Ge,Z,null,null,null,Q,null,null,Fe,xe),pe.actualurl=ke),pe.tcpid=Oe,pe.type=Ze,pe.url=$e,pe.range=Ge,pe.trequest=Z,pe.tresponse=le,pe.responsecode=ue,pe.cmsd=xe,pe._tfinish=ae,pe._stream=Ke,pe._mediaduration=Q,pe._quality=_e,pe._responseHeaders=Pe,pe._serviceLocation=Ae,pe._fileLoaderType=Fe,be?be.forEach(function(Ne){(function(Xe,dt,ut,et){var ht=new ot.O;ht.s=dt,ht.d=ut,ht.b=et,Xe.trace.push(ht),Xe.interval||(Xe.interval=0),Xe.interval+=ut})(pe,Ne.s,Ne.d,Ne.b)}):(delete pe.interval,delete pe.trace),ve(Ke,D.Z.HTTP_REQUEST,pe)},addRepresentationSwitch:function(ge,Ke,Oe,Ze,$e){var _e=new Nm;_e.t=Ke,_e.mt=Oe,_e.to=Ze,$e?_e.lto=$e:delete _e.lto,ve(ge,D.Z.TRACK_SWITCH,_e)},addBufferLevel:function(ge,Ke,Oe){var Ze=new Mm;Ze.t=Ke,Ze.level=Oe,ve(ge,D.Z.BUFFER_LEVEL,Ze)},addBufferState:function(ge,Ke,Oe){var Ze=new Hf;Ze.target=Oe,Ze.state=Ke,ve(ge,D.Z.BUFFER_STATE,Ze)},addDVRInfo:function(ge,Ke,Oe,Ze){var $e=new Yh;$e.time=Ke,$e.range=Ze,$e.manifestInfo=Oe,ve(ge,D.Z.DVR_INFO,$e)},addDroppedFrames:function(ge,Ke){var Oe=new Fl,Ze=Ee(ge).DroppedFrames;Ke&&(Oe.time=Ke.creationTime,Oe.droppedFrames=Ke.droppedVideoFrames,Ze.length>0&&Ze[Ze.length-1]==Oe||ve(ge,D.Z.DROPPED_FRAMES,Oe))},addSchedulingInfo:function(ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge){var Z=new Wr;Z.mediaType=ge,Z.t=Ke,Z.type=Oe,Z.startTime=Ze,Z.availabilityStartTime=$e,Z.duration=_e,Z.quality=ke,Z.range=Ae,Z.state=Ge,ve(ge,D.Z.SCHEDULING_INFO,Z)},addRequestsQueue:function(ge,Ke,Oe){var Ze=new Ci;Ze.loadingRequests=Ke,Ze.executedRequests=Oe,Ee(ge).RequestsQueue=Ze,we(ge,D.Z.REQUESTS_QUEUE,Ze)},addManifestUpdate:function(ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge,Z){var le=new NE;le.mediaType=ge,le.type=Ke,le.requestTime=Oe,le.fetchTime=Ze,le.availabilityStartTime=$e,le.presentationStartTime=_e,le.clientTimeOffset=ke,le.currentTime=Ae,le.buffered=Ge,le.latency=Z,ie(y.Z.STREAM,D.Z.MANIFEST_UPDATE,le),we(ge,D.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(ge,Ke){if(ge){for(var Oe in Ke)ge[Oe]=Ke[Oe];fe(ge.mediaType,D.Z.MANIFEST_UPDATE,ge)}},addManifestUpdateStreamInfo:function(ge,Ke,Oe,Ze,$e){if(ge){var _e=new Kf;_e.id=Ke,_e.index=Oe,_e.start=Ze,_e.duration=$e,ge.streamInfo.push(_e),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_STREAM_INFO,ge)}},addManifestUpdateRepresentationInfo:function(ge,Ke,Oe,Ze,$e,_e,ke,Ae){if(ge&&ge.representationInfo){var Ge=new ME;Ge.id=Ke,Ge.index=Oe,Ge.streamIndex=Ze,Ge.mediaType=$e,Ge.startNumber=ke,Ge.fragmentInfoType=Ae,Ge.presentationTimeOffset=_e,ge.representationInfo.push(Ge),fe(ge.mediaType,D.Z.MANIFEST_UPDATE_TRACK_INFO,ge)}},addPlayList:function(ge){ge.trace&&Array.isArray(ge.trace)?ge.trace.forEach(function(Ke){Ke.hasOwnProperty("subreplevel")&&!Ke.subreplevel&&delete Ke.subreplevel}):delete ge.trace,ve(y.Z.STREAM,D.Z.PLAY_LIST,ge)},addDVBErrors:function(ge){ve(y.Z.STREAM,D.Z.DVB_ERRORS,ge)}},B={},P}vu.__dashjs_factory_name="MetricsModel";var Ia=F.Z.getSingletonFactory(vu);function ua(L){L=L||{};var P,B,V,ee,J=this.context,H=L.metricsModel;function re(Ee){var ie=H.getMetricsFor(Ee,!0);if(!ie)return null;var ve,ge=ie.HttpList,Ke=null;if(!ge||ge.length<=0)return null;for(ve=ge.length-1;ve>=0;){if(ge[ve].responsecode){Ke=ge[ve];break}ve--}return Ke}function fe(Ee){var ie=H.getMetricsFor(Ee,!0);return ie&&ie.HttpList?ie.HttpList:[]}function we(Ee,ie){if(!Ee)return null;var ve=Ee[ie];return ve&&ve.length!==0?ve[ve.length-1]:null}return P={getCurrentRepresentationSwitch:function(Ee){return we(H.getMetricsFor(Ee,!0),D.Z.TRACK_SWITCH)},getCurrentBufferState:function(Ee){return we(H.getMetricsFor(Ee,!0),D.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Ee){var ie=we(H.getMetricsFor(Ee,!0),D.Z.BUFFER_LEVEL);return ie?kl.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:re,getHttpRequests:fe,getCurrentDroppedFrames:function(){return we(H.getMetricsFor(y.Z.VIDEO,!0),D.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Ee){return we(H.getMetricsFor(Ee,!0),D.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Ee){return we(Ee?H.getMetricsFor(Ee,!0):H.getMetricsFor(y.Z.VIDEO,!0)||H.getMetricsFor(y.Z.AUDIO,!0),D.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return we(H.getMetricsFor(y.Z.STREAM),D.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Ee,ie){if(!ie)return null;var ve={},ge=re(Ee);ge&&(ve=rn.Z.parseHttpHeaders(ge._responseHeaders));var Ke=ve[ie.toLowerCase()];return Ke===void 0?null:Ke},getLatestMPDRequestHeaderValueByID:function(Ee){if(!Ee)return null;var ie,ve,ge,Ke={};for(ge=(ie=fe(y.Z.STREAM)).length-1;ge>=0;ge--)if((ve=ie[ge]).type===ot.w.MPD_TYPE){Ke=rn.Z.parseHttpHeaders(ve._responseHeaders);break}var Oe=Ke[Ee.toLowerCase()];return Oe===void 0?null:Oe},addRepresentationSwitch:function(Ee,ie,ve,ge,Ke){H.addRepresentationSwitch(Ee,ie,ve,ge,Ke)},addDVRInfo:function(Ee,ie,ve,ge){H.addDVRInfo(Ee,ie,ve,ge)},updateManifestUpdateInfo:function(Ee){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,Ee)},addManifestUpdateStreamInfo:function(Ee){if(Ee){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,Ee.id,Ee.index,Ee.start,Ee.duration)}},addManifestUpdateRepresentationInfo:function(Ee,ie){if(Ee){var ve=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(ve,Ee.id,Ee.index,Ee.streamIndex,ie,Ee.presentationTimeOffset,Ee.startNumber,Ee.fragmentInfoType)}},addManifestUpdate:function(Ee){H.addManifestUpdate(y.Z.STREAM,Ee.type,Ee.requestStartDate,Ee.requestEndDate)},addHttpRequest:function(Ee,ie,ve,ge,Ke,Oe){H.addHttpRequest(Ee.mediaType,null,Ee.type,Ee.url,Ee.quality,ie,Ee.serviceLocation||null,Ee.range||null,Ee.requestStartDate,Ee.firstByteDate,Ee.requestEndDate,ve,Ee.duration,ge,Ke,Ee.fileLoaderType,Oe)},addSchedulingInfo:function(Ee,ie){H.addSchedulingInfo(Ee.mediaType,new Date,Ee.type,Ee.startTime,Ee.availabilityStartTime,Ee.duration,Ee.quality,Ee.range,ie)},addRequestsQueue:function(Ee,ie,ve){H.addRequestsQueue(Ee,ie,ve)},addBufferLevel:function(Ee,ie,ve){H.addBufferLevel(Ee,ie,ve)},addBufferState:function(Ee,ie,ve){H.addBufferState(Ee,ie,ve)},addDroppedFrames:function(Ee){H.addDroppedFrames(y.Z.VIDEO,Ee)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(Ee){H.addDVBErrors(Ee)},createPlaylistMetrics:function(Ee,ie){(ee=new at).start=new Date,ee.mstart=Ee,ee.starttype=ie},createPlaylistTraceMetrics:function(Ee,ie,ve){B===!0&&(B=!1,(V=new tt).representationid=Ee,V.start=new Date,V.mstart=ie,V.playbackspeed=ve!==null?ve.toString():null)},updatePlayListTraceMetrics:function(Ee){if(V)for(var ie in V)V[ie]=Ee[ie]},pushPlayListTraceMetrics:function(Ee,ie){if(B===!1&&ee&&V&&V.start){var ve=V.start,ge=Ee.getTime()-ve.getTime();V.duration=ge,V.stopreason=ie,ee.trace.push(V),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Ia(J).getInstance({settings:L.settings}),B=!0,V=null,ee=null,P}ua.__dashjs_factory_name="DashMetrics";var Fs=F.Z.getSingletonFactory(ua);function _r(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,je.Z)(ee).getInstance();function re($e){V=$e}function fe($e,_e,ke,Ae){var Ge,Z=_e.adaptation.period.mpd,le=Z.availabilityStartTime;if(Ae)Ge=ke&&Z.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*($e+Z.timeShiftBufferDepth)):Z.availabilityEndTime;else if(ke){var ae=_e.availabilityTimeOffset;Ge=new Date(le.getTime()+1e3*($e-ae))}else Ge=le;return Ge}function we($e,_e){return($e.getTime()-_e.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function Ee($e,_e){return $e+(_e.adaptation.period.start-_e.presentationTimeOffset)}function ie($e){var _e={start:NaN,end:NaN},ke=$e[0].getAdapter().getRegularPeriods()[0],Ae=we(new Date,ke);if(!$e||$e.length===0)return{range:_e,now:Ae};$e.forEach(function(Z){var le=Z.getAdapter(),ae=le.getMediaInfoForType(Z.getStreamInfo(),y.Z.VIDEO)||le.getMediaInfoForType(Z.getStreamInfo(),y.Z.AUDIO),ue=le.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(ue)if(ue.segmentInfoType===v.Z.SEGMENT_TIMELINE)Q=function(be){var Fe,xe,pe,Ne,Xe=be.adaptation.period.mpd.manifest.Period_asArray[be.adaptation.period.index].AdaptationSet_asArray[be.adaptation.index],dt=P.getRepresentationFor(be.index,Xe),ut=dt.SegmentTemplate||dt.SegmentList,et=ut.SegmentTimeline,ht=ut.timescale,jt=et.S_asArray,qt={start:0,end:0},Ft=jt[0].t,Ut=!isNaN(Ft),An=Ut?Ft:0,it=0;for(Ut&&(qt.start=Ee(An/ht,be)),pe=0,Ne=jt.length;pe<Ne;pe++)xe=0,(Fe=jt[pe]).hasOwnProperty("r")&&(xe=Fe.r),it+=Fe.d*(1+xe);return qt.end=Ee((An+it)/ht,be),qt}(ue);else{var Pe=ue.adaptation.period;Q.start=Pe.start,Q.end=Math.max(Ae,Pe.start+Pe.duration)}!isNaN(Q.start)&&(isNaN(_e.start)||_e.start>Q.start)&&(_e.start=Q.start),!isNaN(Q.end)&&(isNaN(_e.end)||_e.end<Q.end)&&(_e.end=Q.end)}),_e.end=Math.min(Ae,_e.end);var Ge=ge($e,_e.end,!0);return _e.end=isNaN(Ge)?_e.end:Ge,_e.start=ke&&ke.mpd&&ke.mpd.timeShiftBufferDepth&&!isNaN(ke.mpd.timeShiftBufferDepth)&&!isNaN(_e.end)?Math.max(_e.end-ke.mpd.timeShiftBufferDepth,_e.start):_e.start,_e.start=ge($e,_e.start),{range:_e,now:Ae}}function ve($e,_e){B=$e-_e.end}function ge($e,_e){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Ae=0,Ge=!1,Z=NaN;!Ge&&Ae<$e.length;){var le=$e[Ae].getStreamInfo();le.start<=_e&&(!isFinite(le.duration)||le.start+le.duration>=_e)?(Z=_e,Ge=!0):!ke&&le.start>_e&&(isNaN(Z)||le.start<Z)?Z=le.start:ke&&le.start+le.duration<_e&&(isNaN(Z)||le.start+le.duration>Z)&&(Z=le.start+le.duration),Ae+=1}return Z}catch(ae){return _e}}function Ke($e){$e.offset===void 0||isNaN($e.offset)||re($e.offset/1e3)}function Oe(){V=0,B=0}function Ze(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,Ke,this),Oe()}return L={initialize:function(){Oe(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,Ke,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:re,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function($e,_e,ke){return fe($e,_e,ke)},calcAvailabilityEndTimeFromPresentationTime:function($e,_e,ke){return fe($e,_e,ke,!0)},calcPresentationTimeFromWallTime:we,calcPresentationTimeFromMediaTime:Ee,calcPeriodRelativeTimeFromMpdRelativeTime:function($e,_e){return _e-$e.adaptation.period.start},calcMediaTimeFromPresentationTime:function($e,_e){return $e-_e.adaptation.period.start+_e.presentationTimeOffset},calcWallTimeForSegment:function($e,_e){var ke,Ae,Ge;return _e&&(ke=$e.representation.adaptation.period.mpd.suggestedPresentationDelay,Ae=$e.presentationStartTime+ke,Ge=new Date($e.availabilityStartTime.getTime()+1e3*Ae)),Ge},calcTimeShiftBufferWindow:function($e,_e){if(!_e)return function(Ae){var Ge={start:NaN,end:NaN},Z=0,le=NaN;return Ae.forEach(function(ae){var ue=ae.getStreamInfo();Z+=ue.duration,(isNaN(le)||ue.start<le)&&(le=ue.start)}),Ge.start=le,Ge.end=le+Z,Ge}($e);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ke=ie($e);return ve(ke.now,ke.range),ke.range}return function(Ae){var Ge={start:NaN,end:NaN};if(!Ae||Ae.length===0)return Ge;var Z=Ae[0].getAdapter().getRegularPeriods()[0],le=we(new Date,Z),ae=Z.mpd.timeShiftBufferDepth,ue=isNaN(ae)?0:le-ae;if(Ge.start=ge(Ae,ue),Ge.end=!isNaN(Ge.start)&&le<Ge.start?le:ge(Ae,le,!0),!isNaN(ae)&&Ge.end<le-ae&&(Ge.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(Ae);if(Q.range.end<Ge.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.INVALID_DVR_WINDOW}),ve(Q.now,Q.range),Q.range}return Ge}($e)},reset:Ze},P=Vn(ee).getInstance(),Ze(),L}_r.__dashjs_factory_name="TimelineConverter";var yu=F.Z.getSingletonFactory(_r),Vf=w(4593),la=w(6934);function zf(L){return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},zf(L)}function Wa(L,P){return Wa=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Wa(L,P)}function Yf(L,P){return!P||zf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Xu(L){return Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Xu(L)}var Us=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Wa(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Xu(P);if(B){var re=Xu(this).constructor;J=Reflect.construct(H,arguments,re)}else J=H.apply(this,arguments);return Yf(this,J)});function ee(){var J;return function(H,re){if(!(H instanceof re))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Mc),Co=w(2295);function Pc(){var L=0;function P(re){for(var fe="",we=0;we<re.length;++we)fe+=re[we].uchar;return fe.length-fe.replace(/^\s+/,"").length}function B(re){return"left: "+3.125*re.x+"%; top: "+6.66*re.y1+"%; width: "+(100-3.125*re.x)+"%; height: "+6.66*Math.max(re.y2-1-re.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(re){return re==="red"?"rgb(255, 0, 0)":re==="green"?"rgb(0, 255, 0)":re==="blue"?"rgb(0, 0, 255)":re==="cyan"?"rgb(0, 255, 255)":re==="magenta"?"rgb(255, 0, 255)":re==="yellow"?"rgb(255, 255, 0)":re==="white"?"rgb(255, 255, 255)":re==="black"?"rgb(0, 0, 0)":re}function ee(re,fe){var we=re.videoHeight/15;return fe?"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(fe.foreground?V(fe.foreground):"rgb(255, 255, 255)")+"; font-style: "+(fe.italics?"italic":"normal")+"; text-decoration: "+(fe.underline?"underline":"none")+"; white-space: pre; background-color: "+(fe.background?V(fe.background):"transparent")+";":"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(re){return re.replace(/^\s+/g,"")}function H(re){return re.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(re,fe,we,Ee){var ie,ve,ge=null,Ke=!1,Oe=-1,Ze={start:fe,end:we,spans:[]},$e="style_cea608_white_black",_e={},ke={},Ae=[];for(ie=0;ie<15;++ie){var Ge=Ee.rows[ie],Z="",le=null;if(Ge.isEmpty()===!1){var ae=P(Ge.chars);ge===null&&(ge={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==Oe&&Ke&&(ge.p.push(Ze),Ze={start:fe,end:we,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(Ae.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge={x:ae,y1:ie,y2:ie+1,p:[]});for(var ue=0;ue<Ge.chars.length;++ue){var Q=Ge.chars[ue],Pe=Q.penState;if(le===null||!Pe.equals(le)){Z.trim().length>0&&(Ze.spans.push({name:$e,line:Z,row:ie}),Z="");var be="style_cea608_"+Pe.foreground+"_"+Pe.background;Pe.underline&&(be+="_underline"),Pe.italics&&(be+="_italics"),ke.hasOwnProperty(be)||(ke[be]=JSON.parse(JSON.stringify(Pe))),le=Pe,$e=be}Z+=Q.uchar}Z.trim().length>0&&Ze.spans.push({name:$e,line:Z,row:ie}),Ke=!0,Oe=ae}else Ke=!1,Oe=-1,ge&&(ge.p.push(Ze),Ze={start:fe,end:we,spans:[]},ge.y2=ie,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(Ae.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null)}ge&&(ge.p.push(Ze),ge.y2=ie+1,ge.name="region_"+ge.x+"_"+ge.y1+"_"+ge.y2,_e.hasOwnProperty(ge.name)===!1?(Ae.push(ge),_e[ge.name]=ge):_e[ge.name].p.contat(ge.p),ge=null);var Fe=[];for(ie=0;ie<Ae.length;++ie){var xe=Ae[ie],pe="sub_cea608_"+L++,Ne=document.createElement("div");Ne.id=pe;var Xe=B(xe);Ne.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Xe;var dt=document.createElement("div");dt.className="paragraph bodyStyle",dt.style.cssText=ee(re);var ut=document.createElement("div");ut.className="cueUniWrapper",ut.style.cssText="unicode-bidi: normal; direction: ltr;";for(var et=0;et<xe.p.length;++et){var ht=xe.p[et],jt=0;for(ve=0;ve<ht.spans.length;++ve){var qt=ht.spans[ve];if(qt.line.length>0){if(ve!==0&&jt!=qt.row){var Ft=document.createElement("br");Ft.className="lineBreak",ut.appendChild(Ft)}var Ut=!1;jt===qt.row&&(Ut=!0),jt=qt.row;var An=ke[qt.name],it=document.createElement("span");it.className="spanPadding "+qt.name+" customSpanColor",it.style.cssText=ee(re,An),ve!==0&&Ut?ve===ht.spans.length-1?it.textContent=H(qt.line):it.textContent=qt.line:ht.spans.length>1&&ve<ht.spans.length-1&&qt.row===ht.spans[ve+1].row?it.textContent=J(qt.line):it.textContent=qt.line.trim(),ut.appendChild(it)}}}dt.appendChild(ut),Ne.appendChild(dt);var yt={bodyStyle:["%",90]};for(var $t in ke)ke.hasOwnProperty($t)&&(yt[$t]=["%",90]);Fe.push({type:"html",start:fe,end:we,cueHTMLElement:Ne,cueID:pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:yt,lineHeight:{},linePadding:{}})}return Fe}}}Pc.__dashjs_factory_name="EmbeddedTextHtmlRender";var Wh=F.Z.getSingletonFactory(Pc);function Dm(L){var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e=L.errHandler,ke=L.manifestModel,Ae=L.mediaController,Ge=L.videoModel,Z=L.textTracks,le=L.vttParser,ae=L.vttCustomRenderingParser,ue=L.ttmlParser,Q=L.streamInfo,Pe=L.settings,be=this.context,Fe=(0,m.Z)(be).getInstance(),xe=!1;function pe(){H=null,fe=NaN,we=[],Ee=null,re=!1,J=[],ee=null}function Ne(Ft){var Ut=new Us;for(var An in Ft)Ut[An]=Ft[An];Ut.labels=Ft.labels,Ut.defaultTrack=function(it){var yt=!1;return ve.length>1&&it.isEmbedded?yt=it.id&&it.id===y.Z.CC1:ve.length===1?it.id&&typeof it.id=="string"&&it.id.substring(0,2)==="CC"&&(yt=!0):ve.length===0&&(yt=it.index===J[0].index),yt}(Ft),Ut.isFragmented=Ft.isFragmented,Ut.isEmbedded=!!Ft.isEmbedded,Ut.isTTML=function(it){return it.codec&&it.codec.search(y.Z.STPP)>=0||it.mimeType&&it.mimeType.search(y.Z.TTML)>=0}(Ft),Ut.kind=function(it,yt){var $t=it.roles&&it.roles.length>0?yt[it.roles[0]]:yt.caption;return $t=$t===yt.caption||$t===yt.subtitle?$t:yt.caption}(Ft,{subtitle:"subtitles",caption:"captions"}),Z.addTextTrack(Ut)}function Xe(Ft){var Ut=Ft.chunk;Ut.mediaInfo.embeddedCaptions&&ut(Ut.bytes,Ut)}function dt(Ft){ie=Ft}function ut(Ft,Ut){var An=Ut.mediaInfo,it=An.type,yt=An.mimeType,$t=An.codec||yt;$t?An.codec.indexOf("application/mp4")!==-1?function(Nt,en,Jt){var Wt;if(en.segmentType==="InitializationSegment")re=!0,fe=V.getMediaTimescaleFromMoov(Nt);else{if(!re)return;(Wt=V.getSamplesInfo(Nt).sampleList).length>0&&(Ee=Wt[0].cts-en.start*fe),Jt.search(y.Z.STPP)>=0?function(Dn,xn,rr){var ir,At;for(ee=ee!==null?ee:jt(rr),ir=0;ir<xn.length;ir++){var Xt=xn[ir],Gt=Xt.cts,un=ht(),mn=un+Gt/fe,Pn=mn+Xt.duration/fe;P.buffered.add(mn,Pn);var Nn=new DataView(Dn,Xt.offset,Xt.subSizes[0]),Fn=la.Utils.dataViewToString(Nn,y.Z.UTF8),Gn=[],It=Xt.offset+Xt.subSizes[0];for(At=1;At<Xt.subSizes.length;At++){var Sn=new Uint8Array(Dn,It,Xt.subSizes[At]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),It+=Xt.subSizes[At]}try{var Lt=ke.getValue().ttmlTimeIsRelative?Gt/fe:0,On=ee.parse(Fn,Lt,Gt/fe,(Gt+Xt.duration)/fe,Gn);Z.addCaptions(ie,un,On)}catch(lt){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+lt.message)}}}(Nt,Wt,Jt):function(Dn,xn){var rr,ir,At,Xt=[];for(rr=0;rr<xn.length;rr++){var Gt=xn[rr];Gt.cts-=Ee;var un=ht()+Gt.cts/fe,mn=un+Gt.duration/fe;P.buffered.add(un,mn);var Pn=Dn.slice(Gt.offset,Gt.offset+Gt.size),Nn=la.parseBuffer(Pn);for(ir=0;ir<Nn.boxes.length;ir++){var Fn=Nn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(At=0;At<Fn.boxes.length;At++){var It=Fn.boxes[At];if(B.debug("VTT box2: "+It.type),It.type==="payl")Gn.start=Gt.cts/fe,Gn.end=(Gt.cts+Gt.duration)/fe,Gn.data=It.cue_text;else if(It.type==="sttg"&&It.settings&&It.settings!=="")try{var Sn=It.settings.split(" ");Gn.styles=le.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&(Xt.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}Xt.length>0&&Z.addCaptions(ie,0,Xt)}(Nt,Wt)}}(Ft,Ut,$t):it===y.Z.VIDEO?function(Nt,en){var Jt,Wt;if(en.segmentType===ot.w.INIT_SEGMENT_TYPE)ge===0&&(ge=V.getMediaTimescaleFromMoov(Nt));else if(en.segmentType===ot.w.MEDIA_SEGMENT_TYPE){if(ge===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Wt=V.getSamplesInfo(Nt)).lastSequenceNumber,xn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Ze[0]||Ze[1]||function(){for(var un,mn=0;mn<ve.length;mn++){if((un=Z.getTrackIdxForId(ve[mn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=et(un);Ze[mn]=new(C()).Cea608Parser(mn+1,{newCue:Pn},null)}}(),ge){if(function(un,mn,Pn,Nn,Fn){return un!==null&&mn!==null&&Nn!==null&&Fn!==null&&(mn===un?Nn!==Fn:mn!==un+Pn)}(Ke,Dn,Wt.numSequences,Oe,xn))for(Jt=0;Jt<Ze.length;Jt++)Ze[Jt]&&Ze[Jt].reset();for(var ir=function(un,mn){if(mn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},Nn=new DataView(un),Fn=0;Fn<mn.length;Fn++)for(var Gn=mn[Fn],It=C().findCea608Nalus(Nn,Gn.offset,Gn.size),Sn=null,En=0,Lt=0;Lt<It.length;Lt++)for(var On=C().extractCea608DataFromRange(Nn,It[Lt]),lt=0;lt<2;lt++)if(On[lt].length>0){Gn.cts!==Sn?En=0:En+=1;var nt=ht();Pn.fields[lt].push([Gn.cts+nt*ge,On[lt],En]),Sn=Gn.cts}return Pn.fields.forEach(function(Kt){Kt.sort(function(Ye,ze){return Ye[0]===ze[0]?Ye[2]-ze[2]:Ye[0]-ze[0]})}),Pn}(Nt,Wt.sampleList),At=0;At<Ze.length;At++){var Xt=ir.fields[At],Gt=Ze[At];if(Gt)for(Jt=0;Jt<Xt.length;Jt++)Gt.addData(Xt[Jt][0]/ge,Xt[Jt][1])}Ke=Dn,Oe=rr}}}(Ft,Ut):function(Nt,en,Jt){var Wt,Dn,xn=new DataView(Nt,0,Nt.byteLength);Dn=la.Utils.dataViewToString(xn,y.Z.UTF8);try{Wt=jt(Jt).parse(Dn,0),Z.addCaptions(Z.getCurrentTrackIdx(),0,Wt),P.buffered&&P.buffered.add(en.start,en.end)}catch(rr){_e.error(new ce.Z(Te.TIMED_TEXT_ERROR_ID_PARSE_CODE,Te.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(Ft,Ut,$t):B.error("No text type defined")}function et(Ft){return function(Ut,An,it){var yt;(yt=Ge.getTTMLRenderingDiv()?$e.createHTMLCaptionsFromScreen(Ge.getElement(),Ut,An,it):[{start:Ut,end:An,data:it.getDisplayText(),styles:{}}])&&Z.addCaptions(Ft,0,yt)}}function ht(){return isNaN(P.timestampOffset)?0:P.timestampOffset}function jt(Ft){var Ut;return Ft.search(y.Z.VTT)>=0?Ut=Pe.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(Ft.search(y.Z.TTML)>=0||Ft.search(y.Z.STPP)>=0)&&(Ut=ue),Ut}function qt(Ft){ve.forEach(function(Ut){var An=Z.getTrackIdxForId(Ut.id);An>=0&&Z.deleteCuesFromTrackIdx(An,Ft.from,Ft.to)})}return P={initialize:function(){xe||(ve=[],ie=null,ge=0,Ze=[],Ke=null,Oe=null,xe=!0,$e=Wh(be).getInstance(),Fe.on(T.Z.VIDEO_CHUNK_RECEIVED,Xe,P),Fe.on(T.Z.BUFFER_CLEARED,qt,P))},addMediaInfos:function(Ft,Ut,An){if(J=J.concat(Ut),Ft===y.Z.TEXT&&Ut[0].isFragmented&&!Ut[0].isEmbedded){H=An,P.buffered=(0,Co.Z)(be).create(),we=Ae.getTracksFor(y.Z.TEXT,Q.id).filter(function(Nt){return Nt.isFragmented});for(var it=Ae.getCurrentTrackFor(y.Z.TEXT,Q.id),yt=0;yt<we.length;yt++)if(we[yt]===it){dt(yt);break}}for(var $t=0;$t<Ut.length;$t++)Ne(Ut[$t])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:ut,abort:function(){},addEmbeddedTrack:function(Ft){if(xe&&Ft)if(Ft.id===y.Z.CC1||Ft.id===y.Z.CC3){for(var Ut=0;Ut<ve.length;Ut++)if(ve[Ut].id===Ft.id)return;ve.push(Ft)}else B.warn("Embedded track "+Ft.id+" not supported!")},resetEmbedded:function(){Fe.off(T.Z.VIDEO_CHUNK_RECEIVED,Xe,P),Fe.off(T.Z.BUFFER_CLEARED,qt,P),Z&&Z.deleteAllTextTracks(),xe=!1,ve=[],Ze=[null,null],Ke=null,Oe=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:we,videoModel:Ge}},setCurrentFragmentedTrackIdx:dt,remove:function(Ft,Ut){Ft===void 0&&Ft===Ut&&(Ft=P.buffered.start(0),Ut=P.buffered.end(P.buffered.length-1)),P.buffered.remove(Ft,Ut),Z.deleteCuesFromTrackIdx(ie,Ft,Ut)},reset:function(){pe(),J=[],V=null}},B=(0,N.Z)(be).getInstance().getLogger(P),V=(0,oa.Z)(be).getInstance(),pe(),P}Dm.__dashjs_factory_name="TextSourceBuffer";var $h=F.Z.getClassFactory(Dm),Oc=w(4403);function Lc(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}var DE=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Pm(L){var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge=this.context,Z=(0,m.Z)(Ge).getInstance(),le=L.videoModel,ae=L.streamInfo,ue=L.settings;function Q(At,Xt,Gt,un,mn,Pn){var Nn=0,Fn=0;At/Xt>Gt/un?Nn=(Fn=Xt)/un*Gt:Fn=(Nn=At)/Gt*un;var Gn,It,Sn=0,En=0;return Nn/Fn>mn?(En=Fn,Sn=Fn*mn):(Sn=Nn,En=Nn/mn),Gn=(At-Sn)/2,It=(Xt-En)/2,Pn?{x:Gn+.1*Sn,y:It+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:It,w:Sn,h:En}}function Pe(At,Xt){var Gt=le.getClientWidth(),un=le.getClientHeight(),mn=le.getVideoWidth(),Pn=le.getVideoHeight(),Nn=le.getVideoRelativeOffsetTop(),Fn=le.getVideoRelativeOffsetLeft();if(mn!==0&&Pn!==0){var Gn=mn/Pn,It=!1;At.isFromCEA608&&(Gn=1.1666666666666667,It=!0);var Sn=Q.call(this,Gt,un,mn,Pn,Gn,It),En=Sn.w,Lt=Sn.h,On=Sn.x,lt=Sn.y;if(En!=we||Lt!=Ee||On!=re||lt!=fe||Xt){if(re=On+Fn,fe=lt+Nn,we=En,Ee=Lt,ie){var nt=ie.style;nt&&(nt.left=re+"px",nt.top=fe+"px",nt.width=we+"px",nt.height=Ee+"px",nt.zIndex=Ke&&document[Ke]||Oe?$e:null,Z.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var Kt=At.activeCues;if(Kt)for(var Ye=Kt.length,ze=0;ze<Ye;++ze){var Dt=Kt[ze];Dt.scaleCue(Dt)}}}}function be(At){var Xt,Gt,un,mn,Pn,Nn=we,Fn=Ee;if(At.cellResolution){var Gn=[Nn/At.cellResolution[0],Fn/At.cellResolution[1]];if(At.linePadding){for(Xt in At.linePadding)if(At.linePadding.hasOwnProperty(Xt)){Gt=(At.linePadding[Xt]*Gn[0]).toString();for(var It=document.getElementsByClassName("spanPadding"),Sn=0;Sn<It.length;Sn++)It[Sn].style.cssText=It[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt),It[Sn].style.cssText=It[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}if(At.fontSize){for(Xt in At.fontSize)if(At.fontSize.hasOwnProperty(Xt)){At.fontSize[Xt][0]==="%"?un=At.fontSize[Xt][1]/100:At.fontSize[Xt][0]==="c"&&(un=At.fontSize[Xt][1]),Gt=(un*Gn[1]).toString(),Pn=Xt!=="defaultFontSize"?document.getElementsByClassName(Xt):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}if(At.lineHeight){for(Xt in At.lineHeight)if(At.lineHeight.hasOwnProperty(Xt)){At.lineHeight[Xt][0]==="%"?mn=At.lineHeight[Xt][1]/100:At.fontSize[Xt][0]==="c"&&(mn=At.lineHeight[Xt][1]),Gt=(mn*Gn[1]).toString(),Pn=document.getElementsByClassName(Xt);for(var Lt=0;Lt<Pn.length;Lt++)Pn[Lt].style.cssText=Pn[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}}}if(At.isd){var On=document.getElementById(At.cueID);On&&ie.removeChild(On),xe(At)}}function Fe(At,Xt){var Gt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Gt.test(Xt)){var mn=Gt.exec(Xt),Pn=parseInt(mn[4],10)-1;return"data:image/png;base64,"+btoa(At.images[Pn])}if(un.test(Xt)){var Nn=un.exec(Xt)[1];return"data:image/png;base64,"+At.embeddedImages[Nn]}return Xt}function xe(At){if(ie){ir.call(this);var Xt=document.createElement("div");ie.appendChild(Xt),Ze=(0,Oc.renderHTML)(At.isd,Xt,function(Gt){return Fe(At,Gt)},ie.clientHeight,ie.clientWidth,ue.get().streaming.text.imsc.displayForcedOnlyMode,function(Gt){B.info("renderCaption :",Gt)},Ze,ue.get().streaming.text.imsc.enableRollUp),Xt.id=At.cueID,Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:Xt,currentTrackIdx:H})}}function pe(At,Xt){return!!Xt&&Xt.endTime>=At.startTime}function Ne(At,Xt){return!!ue.get().streaming.text.extendSegmentedCues&&!!function(Gt,un,mn){for(var Pn=0;Pn<mn.length;Pn++){var Nn=mn[Pn];if(JSON.stringify(Gt[Nn])!==JSON.stringify(un[Nn]))return!1}return!0}(Xt,At,DE)&&(Xt.endTime=Math.max(Xt.endTime,At.endTime),!0)}function Xe(At,Xt){Xt&&Xt.forEach(function(Gt){Gt.kind&&Gt.kind==="image"&&(Gt.src=Fe(At,Gt.src)),Xe(At,Gt.contents)})}function dt(At,Xt,Gt){var un=yt(At),mn=ue.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Gt)&&Gt.length!==0)for(var Pn=0;Pn<Gt.length;Pn++){var Nn=null,Fn=Gt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(mn?Nn=ut(Fn,Xt):Ft(Fn)&&ie?Nn=jt(Fn,Xt,un):Fn.data&&(Nn=qt(Fn,Xt,un)));try{if(Nn){if(!en(un,Nn))if(ue.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(Nn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),pe(Nn,Gn)?Ne(Nn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)):un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)}var It=ue.get().streaming.buffer.bufferToKeep;Wt(un,0,le.getTime()-It)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(Nn),Sn}}}function ut(At,Xt){var Gt=Ut(At,Xt);return Gt.onenter=function(){Ft(At)&&Ae&&Ae.cueID!==Gt.cueID&&ht(Ae),delete Gt.type,Ae=Gt,et(Gt)},Gt.onexit=function(){ht(Gt),Ae=null},Gt}function et(At){Z.trigger(_.Z.CUE_ENTER,At)}function ht(At){Z.trigger(_.Z.CUE_EXIT,{cueID:At.cueID})}function jt(At,Xt,Gt){var un=this,mn=Ut(At,Xt);return ie.style.left=re+"px",ie.style.top=fe+"px",ie.style.width=we+"px",ie.style.height=Ee+"px",mn.onenter=function(){var Pn=this;Gt.mode===y.Z.TEXT_SHOWING&&(this.isd?(ke?requestAnimationFrame(function(){return xe(Pn)}):xe(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),be.call(un,this),Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},mn.onexit=function(){if(ie)for(var Pn=ie.childNodes,Nn=0;Nn<Pn.length;++Nn)Pn[Nn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[Nn].id),ie.removeChild(Pn[Nn]),--Nn)},mn}function qt(At,Xt,Gt){var un=Ut(At,Xt);if(un.isActive=!1,At.styles)try{At.styles.align!==void 0&&"align"in un&&(un.align=At.styles.align),At.styles.line!==void 0&&"line"in un&&(un.line=At.styles.line),At.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=At.styles.snapToLines),At.styles.position!==void 0&&"position"in un&&(un.position=At.styles.position),At.styles.size!==void 0&&"size"in un&&(un.size=At.styles.size)}catch(mn){B.error(mn)}return un.onenter=function(){Gt.mode===y.Z.TEXT_SHOWING&&Z.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function Ft(At){return At.type==="html"}function Ut(At,Xt){return Ft(At)?function(Gt,un){var mn=new V(Gt.start+un,Gt.end+un,"");return mn.cueHTMLElement=Gt.cueHTMLElement,mn.isd=Gt.isd,mn.images=Gt.images,mn.embeddedImages=Gt.embeddedImages,mn.cueID=Gt.cueID,mn.scaleCue=be.bind(self),mn.cellResolution=Gt.cellResolution,mn.lineHeight=Gt.lineHeight,mn.linePadding=Gt.linePadding,mn.fontSize=Gt.fontSize,mn.isd&&Xe(mn,mn.isd.contents),mn}(At,Xt):function(Gt,un){var mn=new V(Gt.start-un,Gt.end-un,Gt.data);return mn.cueID="".concat(mn.startTime,"_").concat(mn.endTime),mn}(At,Xt)}function An(At){if(ve)for(var Xt=ve.childNodes,Gt=0;Gt<Xt.length;++Gt)Xt[Gt].id===At.cueID&&(ve.removeChild(Xt[Gt]),--Gt)}function it(){var At,Xt=[],Gt=function(mn,Pn){var Nn;if(typeof Symbol>"u"||mn[Symbol.iterator]==null){if(Array.isArray(mn)||(Nn=function(Lt,On){if(Lt){if(typeof Lt=="string")return Lc(Lt,On);var lt=Object.prototype.toString.call(Lt).slice(8,-1);return lt==="Object"&&Lt.constructor&&(lt=Lt.constructor.name),lt==="Map"||lt==="Set"?Array.from(Lt):lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt)?Lc(Lt,On):void 0}}(mn))||Pn){Nn&&(mn=Nn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=mn.length?{done:!0}:{done:!1,value:mn[Fn++]}},e:function(Lt){throw Lt},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var It,Sn=!0,En=!1;return{s:function(){Nn=mn[Symbol.iterator]()},n:function(){var Lt=Nn.next();return Sn=Lt.done,Lt},e:function(Lt){En=!0,It=Lt},f:function(){try{Sn||Nn.return==null||Nn.return()}finally{if(En)throw It}}}}(le.getTextTracks());try{for(Gt.s();!(At=Gt.n()).done;){var un=At.value;un.manualMode===y.Z.TEXT_SHOWING&&Xt.push(un)}}catch(mn){Gt.e(mn)}finally{Gt.f()}return Xt}function yt(At){return At>=0&&ee[At]?le.getTextTrack(ee[At].kind,ee[At].id,ee[At].lang,ee[At].isTTML,ee[At].isEmbedded):null}function $t(At){var Xt=this;if(At!==H){var Gt=yt(H=At);Nt.call(this,Gt),ge&&(clearInterval(ge),ge=null),Gt&&Gt.renderingType==="html"&&(Pe.call(this,Gt,!0),window.ResizeObserver?(_e=new window.ResizeObserver(function(){Pe.call(Xt,Gt,!0)})).observe(le.getElement()):ge=setInterval(Pe.bind(this,Gt),500))}}function Nt(At){ir.call(this),At&&At.renderingType==="html"?xn.call(this):rr.call(this)}function en(At,Xt){if(!At.cues)return!1;for(var Gt=0;Gt<At.cues.length;Gt++)if(At.cues[Gt].startTime===Xt.startTime&&At.cues[Gt].endTime===Xt.endTime)return!0;return!1}function Jt(At,Xt,Gt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!At&&(isNaN(Xt)||(un?At.startTime:At.endTime)>=Xt)&&(isNaN(Gt)||(un?At.endTime:At.startTime)<=Gt)}function Wt(At,Xt,Gt){var un,mn;if(!(Gt<Xt)&&At&&(At.cues||At.manualCueList)){var Pn=At.cues&&At.cues.length>0?"native":"custom",Nn=Pn==="native"?At.cues:At.manualCueList;if(!Nn||Nn.length===0)return;for(var Fn=Nn.length-1;Fn>=0;Fn--)!Jt(Nn[Fn],Xt,Gt,!0)||(un=Nn[Fn],mn=le.getTime(),un.startTime>=mn&&un.endTime<=mn)||(Pn==="native"?At.removeCue(Nn[Fn]):(An(Nn[Fn]),delete At.manualCueList[Fn]))}}function Dn(At,Xt,Gt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(At&&(At.cues||At.manualCueList)){var mn=At.cues&&At.cues.length>0?"native":"custom",Pn=mn==="native"?At.cues:At.manualCueList;if(!Pn||Pn.length===0)return;for(var Nn=Pn.length-1,Fn=Nn;Fn>=0;Fn--)Jt(Pn[Fn],Xt,Gt,un)&&(mn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),At.removeCue(Pn[Fn])):(An(Pn[Fn]),delete At.manualCueList[Fn]))}}function xn(){var At=document.getElementById("native-cue-style");if(!At){(At=document.createElement("style")).id="native-cue-style",document.head.appendChild(At);var Xt=At.sheet,Gt=le.getElement();try{Gt&&(Gt.id?Xt.insertRule("#"+Gt.id+"::cue {background: transparent}",0):Gt.classList.length!==0?Xt.insertRule("."+Gt.className+"::cue {background: transparent}",0):Xt.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var At=document.getElementById("native-cue-style");At&&document.head.removeChild(At)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return P={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,re=0,fe=0,we=0,Ee=0,ie=null,ve=null,ge=null,Oe=!1,$e=2147483647,Ze=null,ke="requestAnimationFrame"in window,document.fullscreenElement!==void 0?Ke="fullscreenElement":document.webkitIsFullScreen!==void 0?Ke="webkitIsFullScreen":document.msFullscreenElement?Ke="msFullscreenElement":document.mozFullScreen&&(Ke="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(At){ee.push(At)},addCaptions:dt,createTracks:function(){var At=ue.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,lt){return On.index-lt.index}),ie=le.getTTMLRenderingDiv(),ve=le.getVttRenderingDiv();for(var Xt,Gt,un,mn,Pn,Nn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var It=(Gt=(Xt=ee[Gn]).kind,un=Xt.id!==void 0?Xt.id:Xt.lang,mn=Xt.lang,Pn=Xt.isTTML,Nn=Xt.isEmbedded,le.addTextTrack(Gt,un,mn,Pn,Nn));J.push(It),ee[Gn].defaultTrack&&(It.default=!0,Fn=Gn);var Sn=yt(Gn);Sn&&(Sn.mode=y.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),dt(Gn,0,ee[Gn].captionData),Z.trigger(_.Z.TEXT_TRACK_ADDED)}if($t.call(this,Fn),Fn>=0){Z.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var lt=yt(Fn);lt&&lt.renderingType==="html"&&Pe.call(this,lt,!0),Z.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Lt=yt(En);Lt&&(Lt.mode=En!==Fn||At?y.Z.TEXT_HIDDEN:y.Z.TEXT_SHOWING,Lt.manualMode=En===Fn?y.Z.TEXT_SHOWING:y.Z.TEXT_HIDDEN)}}Z.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:$t,getTrackIdxForId:function(At){for(var Xt=-1,Gt=0;Gt<ee.length;Gt++)if(ee[Gt].id===At){Xt=Gt;break}return Xt},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(At,Xt){var Gt=yt(At);Gt&&Gt.mode!==Xt&&(Gt.mode=Xt),Gt&&Gt.manualMode!==Xt&&(Gt.manualMode=Xt)},deleteCuesFromTrackIdx:function(At,Xt,Gt){var un=yt(At);un&&Dn(un,Xt,Gt)},deleteAllTextTracks:function(){for(var At=J?J.length:0,Xt=0;Xt<At;Xt++){var Gt=yt(Xt);Gt&&Dn.call(this,Gt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],ge&&(clearInterval(ge),ge=null),_e&&le&&(_e.unobserve(le.getElement()),_e=null),H=-1,ir.call(this)},manualCueProcessing:function(At){var Xt=it();if(Xt&&Xt.length>0){var Gt=Xt[0].manualCueList;Gt&&Gt.length>0&&Gt.forEach(function(un){un.startTime<=At&&un.endTime>=At&&!un.isActive?(un.isActive=!0,ue.get().streaming.text.dispatchForManualRendering?et(un):WebVTT.processCues(window,[un],ve,un.cueID)):un.isActive&&(un.startTime>At||un.endTime<At)&&(un.isActive=!1,ue.get().streaming.text.dispatchForManualRendering?ht(un):An(un))})}},disableManualTracks:function(){var At=it();if(At&&At.length>0){var Xt=At[0].manualCueList;Xt&&Xt.length>0&&Xt.forEach(function(Gt){if(Gt.isActive){if(Gt.isActive=!1,ue.get().streaming.text.dispatchForManualRendering)ht(Gt);else if(ve)for(var un=ve.childNodes,mn=0;mn<un.length;++mn)un[mn].id===Gt.cueID&&(ve.removeChild(un[mn]),--mn)}})}}},B=(0,N.Z)(Ge).getInstance().getLogger(P),P}Pm.__dashjs_factory_name="TextTracks";var Om=F.Z.getClassFactory(Pm);function Lm(){var L,P,B,V,ee,J,H=this.context;function re(ie){var ve=ie.split(":"),ge=ve.length-1;return ie=60*parseInt(ve[ge-1],10)+parseFloat(ve[ge]),ge===2&&(ie+=3600*parseInt(ve[0],10)),ie}function fe(ie){var ve=ie.split(V),ge=ve[1].split(J);return ge.shift(),ve[1]=ge[0],ge.shift(),{cuePoints:ve,styles:we(ge)}}function we(ie){var ve={};return ie.forEach(function(ge){if(ge.split(/:/).length>1){var Ke=ge.split(/:/)[1],Oe=!1;Ke&&Ke.search(/%/)!=-1&&(Oe=!0,Ke=parseInt(Ke.replace(/%/,""),10)),(ge.match(/align/)||ge.match(/A/))&&(ve.align=Ke),(ge.match(/line/)||ge.match(/L/))&&(ve.line=Ke==="auto"?Ke:parseInt(Ke,10),Oe&&(ve.snapToLines=!1)),(ge.match(/position/)||ge.match(/P/))&&(ve.position=Ke),(ge.match(/size/)||ge.match(/S/))&&(ve.size=Ke)}}),ve}function Ee(ie,ve){for(var ge,Ke=ve,Oe="",Ze="";ie[Ke]!==""&&Ke<ie.length;)Ke++;if((ge=Ke-ve)>1)for(var $e=0;$e<ge;$e++){if((Ze=ie[ve+$e]).match(V)){Oe="";break}Oe+=Ze,$e!==ge-1&&(Oe+="\n")}else(Ze=ie[ve]).match(V)||(Oe=Ze);return Oe}return L={parse:function(ie){var ve,ge,Ke=[];if(!ie)return Ke;ve=(ie=ie.split(B)).length,ge=-1;for(var Oe=0;Oe<ve;Oe++){var Ze=ie[Oe];if(Ze.length>0&&Ze!=="WEBVTT"&&Ze.match(V)){var $e=fe(Ze),_e=$e.cuePoints,ke=$e.styles,Ae=Ee(ie,Oe+1),Ge=re(_e[0].replace(ee,"")),Z=re(_e[1].replace(ee,""));!isNaN(Ge)&&!isNaN(Z)&&Ge>=ge&&Z>Ge?Ae!==""?(ge=Ge,Ke.push({start:Ge,end:Z,data:Ae,styles:ke})):P.error("Skipping cue due to empty/malformed cue text"):P.error("Skipping cue due to incorrect cue timing")}}return Ke},getCaptionStyles:we},P=(0,N.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,V=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}Lm.__dashjs_factory_name="VTTParser";var km=F.Z.getSingletonFactory(Lm);function Xh(){var L,P;return L={parse:function(B){var V=[];return P.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},V.push(ee)},P.parse(B),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(P=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}Xh.__dashjs_factory_name="VttCustomRenderingParser";var PE=F.Z.getSingletonFactory(Xh);function Fm(){var L,P,B=this.context,V=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,re,fe,we){var Ee,ie,ve,ge="",Ke=[],Oe={},Ze={},$e="",_e="",ke={onOpenTag:function(ae,ue,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.ERROR,event:Pi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),ue==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");$e=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){$e&&(Ze[$e]=_e.trim()),_e="",$e=""},onText:function(ae){$e&&(_e+=ae)}};if(!J)throw ge="no ttml data to parse",new Error(ge);Oe.data=J,V.trigger(T.Z.TTML_TO_PARSE,Oe);var Ae=(0,Oc.fromXML)(Oe.data,function(ae){ge=ae},ke);V.trigger(T.Z.TTML_PARSED,{ttmlString:Oe.data,ttmlDoc:Ae});var Ge,Z=Ae.getMediaTimeEvents();for(ve=0;ve<Z.length;ve++){var le=(0,Oc.generateISD)(Ae,Z[ve],function(ae){ge=ae});le.contents.some(function(ae){return ae.contents.length})&&(Ee=Z[ve]+H)<(ie=Z[ve+1]+H)&&Ke.push({start:Ee,end:ie,type:"html",cueID:(Ge="cue_TTML_"+ee,ee++,Ge),isd:le,images:we,embeddedImages:Ze})}if(ge!=="")throw P.error(ge),new Error(ge);return Ke}},P=(0,N.Z)(B).getInstance().getLogger(L),L}Fm.__dashjs_factory_name="TTMLParser";var OE=F.Z.getSingletonFactory(Fm);function Qh(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function Ul(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Qh(Object(B),!0).forEach(function(V){Um(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Qh(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Um(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Jh(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function ep(L){var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,St.Z)(ee).getInstance(),re=L.adapter,fe=L.baseURLController;function we(ve,ge){var Ke,Oe,Ze=!1;if(fe.resolve()){var $e=re.getVoRepresentations(ve);$e&&$e.length>0&&(Ke=fe.resolve($e[0].path).url)}var _e=ve.essentialPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME}),ke=ve.supplementalPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME});_e.length>0?(Ze=!0,Oe=_e):Oe=ke,Oe.forEach(function(Ae){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==y.Z.OFF_MIMETYPE&&ae.dvbMimeType!==y.Z.WOFF_MIMETYPE)}(Ae)){var Ge=(Z=Ae.dvbUrl,le=Ke,H.isPathAbsolute(Z)?Z:H.isRelative(Z)?le?H.resolve(Z,le):H.resolve(Z):Z);V.push({fontFamily:Ae.dvbFontFamily,url:Ge,mimeType:Ae.dvbMimeType,trackId:ve.id,streamId:ge,isEssential:Ze,status:"unloaded",fontFace:new FontFace(Ae.dvbFontFamily,"url(".concat(Ge,")"),{display:"swap"})})}var Z,le})}function Ee(ve,ge){var Ke=V[ve];V[ve]=Ul(Ul({},Ke),{},{status:ge})}function ie(){V=[]}return P={addFontsFromTracks:function(ve,ge){if(ve&&Array.isArray(ve)&&ge)for(var Ke=0;Ke<ve.length;Ke++)we(ve[Ke],ge)},downloadFonts:function(){for(var ve=function(Ke){var Oe=V[Ke];document.fonts.add(Oe.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,Oe),Oe.fontFace.load().then(function(){Ee(Ke,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,Oe)},function(Ze){Ee(Ke,"error"),B.debug("Font download error: ",Ze),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,Oe)})},ge=0;ge<V.length;ge++)ve(ge)},getFonts:function(){return V},getFontsForTrackId:function(ve){return V.filter(function(ge){return ge.trackId&&ge.trackId===ve})},reset:function(){(function(){var ve,ge=function(Ze,$e){var _e;if(typeof Symbol>"u"||Ze[Symbol.iterator]==null){if(Array.isArray(Ze)||(_e=function(ae,ue){if(ae){if(typeof ae=="string")return Jh(ae,ue);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?Jh(ae,ue):void 0}}(Ze))||$e){_e&&(Ze=_e);var ke=0,Ae=function(){};return{s:Ae,n:function(){return ke>=Ze.length?{done:!0}:{done:!1,value:Ze[ke++]}},e:function(ae){throw ae},f:Ae}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ge,Z=!0,le=!1;return{s:function(){_e=Ze[Symbol.iterator]()},n:function(){var ae=_e.next();return Z=ae.done,ae},e:function(ae){le=!0,Ge=ae},f:function(){try{Z||_e.return==null||_e.return()}finally{if(le)throw Ge}}}}(V);try{for(ge.s();!(ve=ge.n()).done;){var Ke=ve.value,Oe=document.fonts.delete(Ke.fontFace);B.debug("Removal of fontFamily: ".concat(Ke.fontFamily," was ").concat(Oe?"successful":"unsuccessful"))}}catch(Ze){ge.e(Ze)}finally{ge.f()}})(),ie()}},B=(0,N.Z)(ee).getInstance().getLogger(P),ie(),P}ep.__dashjs_factory_name="DVBFonts";var LE=F.Z.getClassFactory(ep);function Bm(L){var P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe=this.context,Ze=L.adapter,$e=L.errHandler,_e=L.manifestModel,ke=L.mediaController,Ae=L.baseURLController,Ge=L.videoModel,Z=L.settings;function le(Ne){if(Ke.error("Could not download ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Xe=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);ee[Ne.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_DISABLED)}}function ae(Ne){if(Ke.debug("Successfully downloaded ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Xe=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);Xe===ee[Ne.streamId].getCurrentTrackIdx()?ee[Ne.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_SHOWING):ee[Ne.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_HIDDEN)}}function ue(Ne){var Xe=Ne.tracks,dt=Ne.index,ut=Ne.streamId;if(Z.get().streaming.text.defaultEnabled===!1&&!be()||ve)Fe(ut,-1);else{var et=ke.getCurrentTrackFor(y.Z.TEXT,ut);if(et){var ht={lang:et.lang,role:et.roles[0],index:et.index,codec:et.codec,accessibility:et.accessibility[0]};Xe.some(function(jt,qt){if(ke.matchSettings(ht,jt))return Fe(ut,qt),dt=qt,!0})}we=!1}B[ut].lastEnabledIndex=dt,fe.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:be(),index:dt,tracks:Xe,streamId:ut}),ie=!0,ge.addFontsFromTracks(Xe,ut),ge.getFonts().forEach(function(jt){if(jt.isEssential){var qt=ee[jt.streamId].getTrackIdxForId(jt.trackId);ee[jt.streamId].setModeForTrackIdx(qt,y.Z.TEXT_DISABLED)}}),ge.downloadFonts()}function Q(Ne){try{var Xe=Ne.streamId;if(!ee[Xe]||isNaN(Ne.time))return;ee[Xe].manualCueProcessing(Ne.time)}catch(dt){}}function Pe(Ne){try{var Xe=Ne.streamId;if(!ee[Xe])return;ee[Xe].disableManualTracks()}catch(dt){}}function be(){var Ne=!0;return we&&!Ee&&(Ne=!1),Ne}function Fe(Ne,Xe){(we=Xe===-1)&&ke&&ke.saveTextSettingsDisabled();var dt=xe(Ne);if(dt!==Xe&&ee[Ne]){ee[Ne].disableManualTracks();var ut=ee[Ne].getCurrentTrackInfo(),et=ut?Ge.getTextTrack(ut.kind,ut.id,ut.lang,ut.isTTML,ut.isEmbedded):null;et&&et.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(dt,y.Z.TEXT_HIDDEN),ee[Ne].setCurrentTrackIdx(Xe),ut=ee[Ne].getCurrentTrackInfo();var ht=Z.get().streaming.text.dispatchForManualRendering;ut&&!ht&&ut.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(Xe,y.Z.TEXT_SHOWING),ut&&ut.isFragmented&&!ut.isEmbedded?function(jt,qt,Ft){if(V[jt])for(var Ut=V[jt].getConfig().fragmentedTracks,An=0;An<Ut.length;An++){var it=Ut[An];if(qt.lang===it.lang&&(it.id?qt.id===it.id:qt.index===it.index)){var yt=ke.getCurrentTrackFor(y.Z.TEXT,jt);(it.id?yt.id!==it.id:yt.index!==it.index)?(ee[jt].deleteCuesFromTrackIdx(Ft),V[jt].setCurrentFragmentedTrackIdx(An)):Ft===-1&&fe.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:jt,mediaType:y.Z.TEXT})}}}(Ne,ut,dt):ut&&!ut.isFragmented&&function(jt,qt){fe.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:qt},{streamId:jt,mediaType:y.Z.TEXT})}(Ne,ut),ke.setTrack(ut)}}function xe(Ne){return ee[Ne].getCurrentTrackIdx()}function pe(){V={},ee={},B={},we=!0,ie=!1,ve=!1}return P={deactivateStream:function(Ne){if(Ne){var Xe=Ne.id;V[Xe]&&V[Xe].resetMediaInfos(),ee[Xe]&&ee[Xe].deleteAllTextTracks()}},initialize:function(){ge=LE(Oe).create({adapter:Ze,baseURLController:Ae}),fe.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),fe.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(fe.on(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.on(T.Z.PLAYBACK_SEEKING,Pe,P))},initializeForStream:function(Ne){var Xe=Ne.id,dt=Om(Oe).create({videoModel:Ge,settings:Z,streamInfo:Ne});dt.initialize(),ee[Xe]=dt;var ut=$h(Oe).create({errHandler:$e,adapter:Ze,dvbFonts:ge,manifestModel:_e,mediaController:ke,videoModel:Ge,textTracks:dt,vttParser:J,vttCustomRenderingParser:H,ttmlParser:re,streamInfo:Ne,settings:Z});ut.initialize(),V[Xe]=ut,B[Xe]={},B[Xe].lastEnabledIndex=-1},createTracks:function(Ne){var Xe=Ne.id;ee[Xe]&&ee[Xe].createTracks()},getTextSourceBuffer:function(Ne){var Xe=Ne.id;if(V&&V[Xe])return V[Xe]},getAllTracksAreDisabled:function(){return we},addEmbeddedTrack:function(Ne,Xe){var dt=Ne.id;V[dt]&&V[dt].addEmbeddedTrack(Xe)},enableText:function(Ne,Xe){return(0,he.PS)(Xe,"boolean"),be()!==Xe&&(Xe&&Fe(Ne,B[Ne].lastEnabledIndex),Xe||(B[Ne].lastEnabledIndex=xe(Ne),ie?Fe(Ne,-1):ve=!0)),!0},isTextEnabled:be,setTextTrack:Fe,getCurrentTrackIdx:xe,enableForcedTextStreaming:function(Ne){return(0,he.PS)(Ne,"boolean"),Ee=Ne,!0},addMediaInfosToBuffer:function(Ne,Xe,dt){var ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,et=Ne.id;V[et]&&V[et].addMediaInfos(Xe,dt,ut)},reset:function(){ge.reset(),pe(),fe.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ue,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),fe.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(fe.off(T.Z.PLAYBACK_TIME_UPDATED,Q,P),fe.off(T.Z.PLAYBACK_SEEKING,Pe,P)),Object.keys(V).forEach(function(Ne){V[Ne].resetEmbedded(),V[Ne].reset()})}},Ee=!1,ie=!1,ve=!1,J=km(Oe).getInstance(),H=PE(Oe).getInstance(),re=OE(Oe).getInstance(),fe=(0,m.Z)(Oe).getInstance(),Ke=(0,N.Z)(Oe).getInstance().getLogger(P),pe(),P}Bm.__dashjs_factory_name="TextController";var kE=F.Z.getClassFactory(Bm);function kc(){var L,P,B,V,ee,J,H,re,fe,we,Ee,ie,ve,ge,Ke,Oe,Ze,$e,_e,ke,Ae,Ge,Z,le,ae,ue,Q,Pe,be,Fe,xe,pe,Ne,Xe,dt,ut,et,ht,jt,qt="You must first call initialize() and set a source before calling this method",Ft="You must first call initialize() and set a valid source and view before calling this method",Ut="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",it="MediaPlayer not initialized!",yt=this.context,$t=(0,m.Z)(yt).getInstance(),Nt=(0,je.Z)(yt).getInstance(),en=(0,N.Z)(yt).getInstance({settings:Nt});function Jt(){Gn(null),Nn(null),V=null,ge&&(ge.reset(),ge=null),Ke&&(Ke.reset(),Ke=null),ke&&ke.reset(),Nt.reset(),Ze&&(Ze.reset(),Ze=null)}function Wt(){return!!B&&!!ut.getElement()}function Dn(){return(0,Cm.e)()}function xn(){if(!H)throw Ft;return Pe.isPaused()}function rr(){if(!H)throw Ft;return Pe.getIsDynamic()}function ir(Ye){var ze=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(ze);if(!Dt)return 0;var fn=Pe.getOriginalLiveDelay(),Tn=Dt.range.start+Ye;return Tn>Dt.range.end-fn&&(Tn=Dt.range.end-fn),Tn}function At(Ye){if(!H)throw Ft;var ze=Pn().currentTime;if(Ye!==void 0)ze=ae.getTimeRelativeToStreamId(ze,Ye);else if(Pe.getIsDynamic()){var Dt=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,fn=pe.getCurrentDVRInfo(Dt);ze=fn===null||ze===0?0:Math.max(0,ze-fn.range.start)}return ze}function Xt(){if(!H)throw Ft;var Ye=Pn().duration;if(Pe.getIsDynamic()){var ze=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(ze);Ye=Dt?Dt.range.end-Dt.range.start:0}return Ye}function Gt(Ye){(0,he.PS)(Ye,"boolean"),re=Ye}function un(){ke.restoreDefaultUTCTimingSources()}function mn(){return pe}function Pn(){if(!ut.getElement())throw Ut;return ut.getElement()}function Nn(Ye){if(!ee)throw it;ut.setElement(Ye),Ye&&(On(),function(){if(!Ke){var ze=dashjs.MetricsReporting;if(typeof ze=="function"){var Dt=ze(yt).create();Ke=Dt.createMetricsReporting({debug:en,eventBus:$t,mediaElement:Pn(),adapter:$e,dashMetrics:pe,mediaPlayerModel:_e,events:T.Z,constants:y.Z,metricsConstants:D.Z})}}}(),function(){if(!Oe){var ze=dashjs.MssHandler;typeof ze=="function"&&(Te.extend(ze.errors),Oe=ze(yt).create({eventBus:$t,mediaPlayerModel:_e,dashMetrics:pe,manifestModel:Ne,playbackController:Pe,streamController:ae,protectionController:ge,baseURLController:Ge,errHandler:Ae,events:T.Z,constants:y.Z,debug:en,initSegmentType:ot.w.INIT_SEGMENT_TYPE,BASE64:Vf,ISOBoxer:la,settings:Nt}))}}(),ae&&ae.switchToVideoElement(fe)),H&&Sn(),Kt(fe)}function Fn(Ye){if(!J)throw qt;var ze=ae.getActiveStreamInfo();return ze?ve.getTracksFor(Ye,ze.id):[]}function Gn(Ye){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw it;typeof Ye=="string"&&et.initialize(Ye),ze==null&&(ze=NaN),isNaN(ze)||(ze=Math.max(0,ze)),fe=ze,B=Ye,(J||H)&&Sn(),Wt()&&Kt(fe)}function It(){if(!J)throw qt;var Ye=ae.getActiveStreamInfo();return Ye?ae.getStreamById(Ye.id):null}function Sn(){H=!1,J=!1,$e.reset(),ae.reset(),Q.reset(),xe.reset(),Pe.reset(),be.reset(),Fe.reset(),we.reset(),ve.reset(),jt.reset(),ge&&(Nt.get().streaming.protection.keepProtectionMediaKeys?ge.stop():(ge.reset(),ge=null,On())),ue.reset(),Xe.reset(),dt.reset()}function En(){var Ye=Lt();ae||(ae=qo(yt).getInstance()),ue||(ue=kE(yt).create({errHandler:Ae,manifestModel:Ne,adapter:$e,mediaController:ve,baseURLController:Ge,videoModel:ut,settings:Nt})),le.setConfig({capabilities:Z,customParametersModel:ke,adapter:$e,settings:Nt,manifestModel:Ne,errHandler:Ae}),ae.setConfig({capabilities:Z,capabilitiesFilter:le,manifestLoader:Ye,manifestModel:Ne,mediaPlayerModel:_e,customParametersModel:ke,protectionController:ge,textController:ue,adapter:$e,dashMetrics:pe,errHandler:Ae,timelineConverter:ie,videoModel:ut,playbackController:Pe,serviceDescriptionController:be,contentSteeringController:Fe,abrController:we,mediaController:ve,settings:Nt,baseURLController:Ge,uriFragmentModel:et,segmentBaseController:jt}),Q.setConfig({settings:Nt,playbackController:Pe,streamController:ae,videoModel:ut,timelineConverter:ie,adapter:$e}),Pe.setConfig({streamController:ae,serviceDescriptionController:be,dashMetrics:pe,adapter:$e,videoModel:ut,timelineConverter:ie,settings:Nt}),xe.setConfig({streamController:ae,playbackController:Pe,mediaPlayerModel:_e,videoModel:ut,settings:Nt}),we.setConfig({streamController:ae,domStorage:ht,mediaPlayerModel:_e,customParametersModel:ke,cmsdModel:dt,dashMetrics:pe,adapter:$e,videoModel:ut,settings:Nt}),Xe.setConfig({abrController:we,dashMetrics:pe,playbackController:Pe}),dt.setConfig({}),we.initialize(),ae.initialize(re,V),ue.initialize(),Q.initialize(),xe.initialize(),Xe.initialize(),dt.initialize(),Fe.initialize(),jt.initialize()}function Lt(){return Em(yt).create({debug:en,errHandler:Ae,dashMetrics:pe,mediaPlayerModel:_e,requestModifier:(0,Ve.Z)(yt).getInstance(),mssHandler:Oe,settings:Nt})}function On(){if(ge)return ge;var Ye=dashjs.Protection;if(typeof Ye=="function"){var ze=Ye(yt).create();return T.Z.extend(Ye.events),_.Z.extend(Ye.events,{publicOnly:!0}),Te.extend(Ye.errors),Z||(Z=(0,_m.Z)(yt).getInstance()),ge=ze.createProtectionSystem({debug:en,errHandler:Ae,videoModel:ut,customParametersModel:ke,capabilities:Z,eventBus:$t,events:T.Z,BASE64:Vf,constants:y.Z,cmcdModel:Xe,settings:Nt})}return null}function lt(){if(!ee)throw it;if(Ze)return Ze;var Ye=dashjs.OfflineController;if(typeof Ye=="function"){T.Z.extend(Ye.events),_.Z.extend(Ye.events,{publicOnly:!0}),Te.extend(Ye.errors);var ze=Lt(),Dt=Vr(yt).create();return Dt.setConfig({manifestModel:Ne,adapter:$e,manifestLoader:ze,errHandler:Ae,contentSteeringController:Fe}),Ze=Ye(yt).create({debug:en,manifestUpdater:Dt,baseURLController:Ge,manifestLoader:ze,manifestModel:Ne,mediaPlayerModel:_e,abrController:we,playbackController:Pe,adapter:$e,errHandler:Ae,dashMetrics:pe,timelineConverter:ie,segmentBaseController:jt,schemeLoaderFactory:Ee,eventBus:$t,events:T.Z,errors:Te,constants:y.Z,settings:Nt,dashConstants:v.Z,urlUtils:(0,St.Z)(yt).getInstance()})}return null}function nt(Ye){var ze=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=pe.getCurrentDVRInfo(ze);return Dt?Ye+(Dt.manifestInfo.availableFrom.getTime()/1e3+Dt.range.start):0}function Kt(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ze&&Ze.resetRecords(),!J&&B&&(J=!0,P.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,Ye):ae.loadWithManifest(B,Ye)),!H&&Wt()&&(H=!0,P.info("Playback Initialized"))}return L={initialize:function(Ye,ze,Dt){var fn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;Z||(Z=(0,_m.Z)(yt).getInstance()).setConfig({settings:Nt}),Ae||(Ae=Dl(yt).getInstance()),Z.supportsMediaSource()?(ee||(ee=!0,ie=yu(yt).getInstance(),we||(we=Wn(yt).getInstance()).setConfig({settings:Nt}),Ee||(Ee=Di(yt).getInstance()),Pe||(Pe=b(yt).getInstance()),ve||(ve=Uu(yt).getInstance()),ae||(ae=qo(yt).getInstance()),Q||(Q=Ps(yt).getInstance()),xe||(xe=co(yt).getInstance()),be||(be=Ih(yt).getInstance()),Fe||(Fe=Sa(yt).getInstance()),le||(le=wE(yt).getInstance()),$e=xm(yt).getInstance(),Ne=bE(yt).getInstance(),Xe=ar(yt).getInstance(),dt=_n(yt).getInstance(),pe=Fs(yt).getInstance({settings:Nt}),ht=CE(yt).getInstance({settings:Nt}),$e.setConfig({constants:y.Z,cea608parser:C(),errHandler:Ae,BASE64:Vf}),Ge||(Ge=vE(yt).create()),Ge.setConfig({adapter:$e,contentSteeringController:Fe}),be.setConfig({adapter:$e}),jt||(jt=RE(yt).getInstance({dashMetrics:pe,mediaPlayerModel:_e,errHandler:Ae,baseURLController:Ge,events:T.Z,eventBus:$t,debug:en,boxParser:(0,oa.Z)(yt).getInstance(),requestModifier:(0,Ve.Z)(yt).getInstance(),errors:Te})),ve.setConfig({domStorage:ht,settings:Nt,customParametersModel:ke}),_e.setConfig({playbackController:Pe,serviceDescriptionController:be}),Fe.setConfig({adapter:$e,errHandler:Ae,dashMetrics:pe,mediaPlayerModel:_e,manifestModel:Ne,serviceDescriptionController:be,eventBus:$t,requestModifier:(0,Ve.Z)(yt).getInstance()}),un(),Gt(Dt===void 0||Dt),lt()),Ye&&Nn(Ye),ze&&Gn(ze,fn),P.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):Ae.error(new ce.Z(Te.CAPABILITY_MEDIASOURCE_ERROR_CODE,Te.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(Ye){Ye&&(Ye.capabilities&&(Z=Ye.capabilities),Ye.capabilitiesFilter&&(le=Ye.capabilitiesFilter),Ye.streamController&&(ae=Ye.streamController),Ye.textController&&(ue=Ye.textController),Ye.gapController&&(Q=Ye.gapController),Ye.playbackController&&(Pe=Ye.playbackController),Ye.serviceDescriptionController&&(be=Ye.serviceDescriptionController),Ye.contentSteeringController&&(Fe=Ye.contentSteeringController),Ye.catchupController&&(xe=Ye.catchupController),Ye.mediaPlayerModel&&(_e=Ye.mediaPlayerModel),Ye.customParametersModel&&(ke=Ye.customParametersModel),Ye.abrController&&(we=Ye.abrController),Ye.schemeLoaderFactory&&(Ee=Ye.schemeLoaderFactory),Ye.mediaController&&(ve=Ye.mediaController),Ye.settings&&(Nt=Ye.settings))},on:function(Ye,ze,Dt,fn){$t.on(Ye,ze,Dt,fn)},off:function(Ye,ze,Dt){$t.off(Ye,ze,Dt)},extend:function(Ye,ze,Dt){F.Z.extend(Ye,ze,Dt,yt)},attachView:Nn,attachSource:Gn,refreshManifest:function(Ye){if(!ee)throw it;if(!Wt())return Ye(null,An);var ze=this;typeof Ye=="function"&&$t.on(T.Z.INTERNAL_MANIFEST_LOADED,function Dt(fn){$t.off(T.Z.INTERNAL_MANIFEST_LOADED,Dt,ze),fn.error?Ye(null,fn.error):Ye(fn.manifest)},ze),ae.refreshManifest()},isReady:Wt,preload:function(){if(!ut.getElement()&&!J){if(!B)throw An;Kt(fe)}},play:function(){if(!H)throw Ft;(!re||xn()&&H)&&Pe.play(!0)},isPaused:xn,pause:function(){if(!H)throw Ft;Pe.pause()},isSeeking:function(){if(!H)throw Ft;return Pe.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw Ft;return Pe.getLowLatencyModeEnabled()},seek:function(Ye){if(!H)throw Ft;if((0,he.PS)(Ye,"number"),isNaN(Ye))throw y.Z.BAD_ARGUMENT_ERROR;Ye<0&&(Ye=0);var ze=Pe.getIsDynamic()?ir(Ye):Ye,Dt=Pn();!Pe.getIsDynamic()&&Dt.duration&&(ze=Math.min(Dt.duration,ze)),Pe.seek(ze,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Pe.seekToOriginalLive()},setPlaybackRate:function(Ye){Pn().playbackRate=Ye},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(Ye){(0,he.PS)(Ye,"boolean"),Pn().muted=Ye},isMuted:function(){return Pn().muted},setVolume:function(Ye){if(typeof Ye!="number"||isNaN(Ye)||Ye<0||Ye>1)throw y.Z.BAD_ARGUMENT_ERROR;Pn().volume=Ye},getVolume:function(){return Pn().volume},time:At,duration:Xt,timeAsUTC:function(){if(!H)throw Ft;return At()<0?NaN:nt(At())},durationAsUTC:function(){if(!H)throw Ft;return nt(Xt())},getActiveStream:It,getDVRWindowSize:function(){var Ye=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,ze=pe.getCurrentDVRInfo(Ye);return ze?ze.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var Ye=Ne.getValue();return Ye?Ge.getBaseUrls(Ye):[]},getAvailableLocations:function(){var Ye=Ne.getValue();if(!Ye)return[];var ze=$e.getLocation(Ye),Dt=Fe.getSynthesizedLocationElements(ze);return ze.concat(Dt)},getTargetLiveDelay:function(){if(!H)throw Ft;return Pe.getOriginalLiveDelay()},convertToTimeCode:function(Ye){Ye=Math.max(Ye,0);var ze=Math.floor(Ye/3600),Dt=Math.floor(Ye%3600/60),fn=Math.floor(Ye%3600%60);return(ze===0?"":ze<10?"0"+ze.toString()+":":ze.toString()+":")+(Dt<10?"0"+Dt.toString():Dt.toString())+":"+(fn<10?"0"+fn.toString():fn.toString())},formatUTC:function(Ye,ze,Dt){var fn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*Ye),sr=Tn.toLocaleDateString(ze),Zr=Tn.toLocaleTimeString(ze,{hour12:Dt});return fn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(Ye){var ze=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT];if(Ye)return ze.indexOf(Ye)!==-1?mn().getCurrentBufferLevel(Ye)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);var Dt=ze.map(function(fn){return Fn(fn).length>0?mn().getCurrentBufferLevel(fn):Number.MAX_VALUE}).reduce(function(fn,Tn){return Math.min(fn,Tn)});return Dt===Number.MAX_VALUE?NaN:Dt},getTTMLRenderingDiv:function(){return ut?ut.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(Ye){B=Ye,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw it;return H?Pe.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(Ye){if(!J)throw qt;return we.getTopBitrateInfoFor(Ye)},setAutoPlay:Gt,getAutoPlay:function(){return re},getDashMetrics:mn,getQualityFor:function(Ye){if(!J)throw qt;if(Ye===y.Z.IMAGE){var ze=It();if(!ze)return-1;var Dt=ze.getThumbnailController();return Dt?Dt.getCurrentTrackIndex():-1}return we.getQualityFor(Ye)},setQualityFor:function(Ye,ze){var Dt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw qt;if(Ye===y.Z.IMAGE){var fn=It();if(!fn)return;var Tn=fn.getThumbnailController();Tn&&Tn.setTrackByIndex(ze)}we.setPlaybackQuality(Ye,ae.getActiveStreamInfo(),ze,{forceReplace:Dt})},updatePortalSize:function(){we.setElementSize(),we.setWindowResizeEventCalled(!0)},enableText:function(Ye){var ze=ae.getActiveStreamInfo();return!(!ze||!ue)&&ue.enableText(ze.id,Ye)},enableForcedTextStreaming:function(Ye){return!(!ae.getActiveStreamInfo()||!ue)&&ue.enableForcedTextStreaming(Ye)},isTextEnabled:function(){var Ye=ae.getActiveStreamInfo();return!(!Ye||!ue)&&ue.isTextEnabled(Ye)},setTextTrack:function(Ye){if(!H)throw Ft;var ze=ae.getActiveStreamInfo();ze&&ue&&ue.setTextTrack(ze.id,Ye)},getBitrateInfoListFor:function(Ye){if(!J)throw qt;var ze=It();return ze?ze.getBitrateListFor(Ye):[]},getStreamsFromManifest:function(Ye){if(!J)throw qt;return $e.getStreamsInfo(Ye)},getTracksFor:Fn,getTracksForTypeFromManifest:function(Ye,ze,Dt){if(!J)throw qt;return(Dt=Dt||$e.getStreamsInfo(ze,1)[0])?$e.getAllMediaInfoForType(Dt,Ye,ze):[]},getCurrentTrackFor:function(Ye){if(!J)throw qt;var ze=ae.getActiveStreamInfo();return ve.getCurrentTrackFor(Ye,ze.id)},setInitialMediaSettingsFor:function(Ye,ze){if(!ee)throw it;ve.setInitialSettings(Ye,ze)},getInitialMediaSettingsFor:function(Ye){if(!ee)throw it;return ve.getInitialSettings(Ye)},setCurrentTrack:function(Ye){var ze=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw qt;ve.setTrack(Ye,ze)},addABRCustomRule:function(Ye,ze,Dt){ke.addAbrCustomRule(Ye,ze,Dt)},removeABRCustomRule:function(Ye){ke.removeAbrCustomRule(Ye)},removeAllABRCustomRule:function(){ke.removeAllAbrCustomRule()},getABRCustomRules:function(){return ke.getAbrCustomRules()},getAverageThroughput:function(Ye){var ze=we.getThroughputHistory(),Dt=Pe.getIsDynamic();return ze?ze.getAverageThroughput(Ye,Dt):0},retrieveManifest:function(Ye,ze){var Dt=Lt(),fn=this;$t.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?ze(null,sr.error):ze(sr.manifest),$t.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,fn),Dt.reset()},fn),et.initialize(Ye),Dt.load(Ye)},addUTCTimingSource:function(Ye,ze){ke.addUTCTimingSource(Ye,ze)},removeUTCTimingSource:function(Ye,ze){ke.removeUTCTimingSource(Ye,ze)},clearDefaultUTCTimingSources:function(){ke.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(Ye,ze){ke.setXHRWithCredentialsForType(Ye,ze)},getXHRWithCredentialsForType:function(Ye){return ke.getXHRWithCredentialsForType(Ye)},getProtectionController:function(){return On()},attachProtectionController:function(Ye){ge=Ye},setProtectionData:function(Ye){V=Ye,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(Ye){ke.registerLicenseRequestFilter(Ye)},registerLicenseResponseFilter:function(Ye){ke.registerLicenseResponseFilter(Ye)},unregisterLicenseRequestFilter:function(Ye){ke.unregisterLicenseRequestFilter(Ye)},unregisterLicenseResponseFilter:function(Ye){ke.unregisterLicenseResponseFilter(Ye)},registerCustomCapabilitiesFilter:function(Ye){ke.registerCustomCapabilitiesFilter(Ye)},unregisterCustomCapabilitiesFilter:function(Ye){ke.unregisterCustomCapabilitiesFilter(Ye)},setCustomInitialTrackSelectionFunction:function(Ye){ke.setCustomInitialTrackSelectionFunction(Ye)},resetCustomInitialTrackSelectionFunction:function(){ke.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(Ye){if(!ut.getElement())throw Ut;ut.setTTMLRenderingDiv(Ye)},attachVttRenderingDiv:function(Ye){if(!ut.getElement())throw Ut;ut.setVttRenderingDiv(Ye)},getCurrentTextTrackIndex:function(){var Ye=ae.getActiveStreamInfo();if(Ye&&ue)return ue.getCurrentTrackIdx(Ye.id)},provideThumbnail:function(Ye,ze){if(typeof ze=="function")if(Ye<0)ze(null);else{var Dt=Pe.getIsDynamic()?ir(Ye):Ye,fn=ae.getStreamForTime(Dt);if(fn!==null){var Tn=fn.getThumbnailController();if(Tn)return Tn.provide(Dt,ze);ze(null)}else ze(null)}},getDashAdapter:function(){return $e},getOfflineController:function(){return lt()},triggerSteeringRequest:function(){if(Fe)return Fe.loadSteeringData()},getCurrentSteeringResponseData:function(){if(Fe)return Fe.getCurrentSteeringResponseData()},getSettings:function(){return Nt.get()},updateSettings:function(Ye){Nt.update(Ye)},resetSettings:function(){Nt.reset()},reset:Jt,destroy:function(){Jt(),F.Z.deleteSingletonInstances(yt)}},P=en.getLogger(L),ee=!1,H=!1,J=!1,re=!0,fe=NaN,ge=null,Ze=null,V=null,$e=null,jt=null,T.Z.extend(_.Z),_e=Pl(yt).getInstance(),ke=(0,ti.Z)(yt).getInstance(),ut=Sr(yt).getInstance(),et=IE(yt).getInstance(),L}kc.__dashjs_factory_name="MediaPlayer";var Fc=F.Z.getClassFactory(kc);Fc.events=_.Z,Fc.errors=Te,F.Z.updateClassFactory(kc.__dashjs_factory_name,Fc);var jm=Fc},8825:function(R,g,w){function U(m){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(m)}function C(m,T){return C=Object.setPrototypeOf||function(F,N){return F.__proto__=N,F},C(m,T)}function y(m,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(A,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),b&&C(A,b)})(_,m);var T,F,N=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}(),function(){var A,b=v(T);if(F){var j=v(this).constructor;A=Reflect.construct(b,arguments,j)}else A=b.apply(this,arguments);return y(this,A)});function _(){var A;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(A=N.call(this)).AST_IN_FUTURE="astInFuture",A.BASE_URLS_UPDATED="baseUrlsUpdated",A.BUFFER_EMPTY="bufferStalled",A.BUFFER_LOADED="bufferLoaded",A.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",A.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",A.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",A.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",A.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",A.DYNAMIC_TO_STATIC="dynamicToStatic",A.ERROR="error",A.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",A.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",A.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",A.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",A.LOG="log",A.MANIFEST_LOADING_STARTED="manifestLoadingStarted",A.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",A.MANIFEST_LOADED="manifestLoaded",A.METRICS_CHANGED="metricsChanged",A.METRIC_CHANGED="metricChanged",A.METRIC_ADDED="metricAdded",A.METRIC_UPDATED="metricUpdated",A.PERIOD_SWITCH_STARTED="periodSwitchStarted",A.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",A.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",A.QUALITY_CHANGE_RENDERED="qualityChangeRendered",A.TRACK_CHANGE_RENDERED="trackChangeRendered",A.STREAM_INITIALIZING="streamInitializing",A.STREAM_UPDATED="streamUpdated",A.STREAM_ACTIVATED="streamActivated",A.STREAM_DEACTIVATED="streamDeactivated",A.STREAM_INITIALIZED="streamInitialized",A.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",A.TEXT_TRACKS_ADDED="allTextTracksAdded",A.TEXT_TRACK_ADDED="textTrackAdded",A.CUE_ENTER="cueEnter",A.CUE_EXIT="cueExit",A.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",A.TTML_PARSED="ttmlParsed",A.TTML_TO_PARSE="ttmlToParse",A.CAPTION_RENDERED="captionRendered",A.CAPTION_CONTAINER_RESIZE="captionContainerResize",A.CAN_PLAY="canPlay",A.CAN_PLAY_THROUGH="canPlayThrough",A.PLAYBACK_ENDED="playbackEnded",A.PLAYBACK_ERROR="playbackError",A.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",A.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",A.PLAYBACK_LOADED_DATA="playbackLoadedData",A.PLAYBACK_PAUSED="playbackPaused",A.PLAYBACK_PLAYING="playbackPlaying",A.PLAYBACK_PROGRESS="playbackProgress",A.PLAYBACK_RATE_CHANGED="playbackRateChanged",A.PLAYBACK_SEEKED="playbackSeeked",A.PLAYBACK_SEEKING="playbackSeeking",A.PLAYBACK_STALLED="playbackStalled",A.PLAYBACK_STARTED="playbackStarted",A.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",A.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",A.PLAYBACK_WAITING="playbackWaiting",A.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",A.EVENT_MODE_ON_START="eventModeOnStart",A.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",A.CONFORMANCE_VIOLATION="conformanceViolation",A.REPRESENTATION_SWITCH="representationSwitch",A.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",A.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",A.INBAND_PRFT="inbandPrft",A.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",A.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",A}return _}(w(8342).Z));g.Z=D},3393:function(R,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&w(y.prototype,v),C}());g.Z=U},3860:function(R,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&w(y.prototype,v),C}());g.Z=U},8080:function(R,g,w){w.d(g,{default:function(){return q}});var U=function K(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};U.SSL_CONNECTION_FAILED_PREFIX="SSL",U.DNS_RESOLUTION_FAILED="C00",U.HOST_UNREACHABLE="C01",U.CONNECTION_REFUSED="C02",U.CONNECTION_ERROR="C03",U.CORRUPT_MEDIA_ISOBMFF="M00",U.CORRUPT_MEDIA_OTHER="M01",U.BASE_URL_CHANGED="F00",U.BECAME_REPORTER="S00";var C=U,y=w(1180);function v(K){var he,de,Ve=(K=K||{}).eventBus,St=K.dashMetrics,st=K.metricsConstants,at=K.events;function tt(Qt){var nn=new C;if(de){for(var Ot in Qt)Qt.hasOwnProperty(Ot)&&(nn[Ot]=Qt[Ot]);nn.mpdurl||(nn.mpdurl=de.originalUrl||de.url),nn.terror||(nn.terror=new Date),St.addDVBErrors(nn)}}function ft(Qt){Qt.error||(de=Qt.manifest)}function Et(Qt){tt({errorcode:C.BASE_URL_CHANGED,servicelocation:Qt.entry})}function Tt(){tt({errorcode:C.BECAME_REPORTER})}function Ct(Qt){var nn;Qt.metric===st.HTTP_REQUEST&&((nn=Qt.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&tt({errorcode:nn.responsecode||C.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function hn(Qt){var nn;switch(Qt.error?Qt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=C.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=C.CORRUPT_MEDIA_OTHER;break;default:return}tt({errorcode:nn})}return he={initialize:function(){Ve.on(at.MANIFEST_UPDATED,ft,he),Ve.on(at.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Et,he),Ve.on(at.METRIC_ADDED,Ct,he),Ve.on(at.METRIC_UPDATED,Ct,he),Ve.on(at.PLAYBACK_ERROR,hn,he),Ve.on(y.Z.BECAME_REPORTING_PLAYER,Tt,he)},reset:function(){Ve.off(at.MANIFEST_UPDATED,ft,he),Ve.off(at.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Et,he),Ve.off(at.METRIC_ADDED,Ct,he),Ve.off(at.METRIC_UPDATED,Ct,he),Ve.off(at.PLAYBACK_ERROR,hn,he),Ve.off(y.Z.BECAME_REPORTING_PLAYER,Tt,he)}}}v.__dashjs_factory_name="DVBErrorsTranslator";var D=dashjs.FactoryMaker.getSingletonFactory(v),m=w(2295);function T(K){K=K||{};var he,de,Ve=!1,St=this.context,st=K.mediaElement;return he={initialize:function(at){at&&at.length&&(at.forEach(function(tt){var ft=tt.starttime,Et=ft+tt.duration;de.add(ft,Et)}),Ve=!!at[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var at,tt=de.length;if(!tt)return!0;at=Ve?new Date().getTime()/1e3:st.currentTime;for(var ft=0;ft<tt;ft+=1){var Et=de.start(ft),Tt=de.end(ft);if(Et<=at&&at<Tt)return!0}return!1}},de=(0,m.Z)(St).create(),he}T.__dashjs_factory_name="RangeController";var F=dashjs.FactoryMaker.getClassFactory(T);function N(){return{serialise:function K(he){var de,Ve,St=[],st=[];for(de in he)if(he.hasOwnProperty(de)&&de.indexOf("_")!==0){if((Ve=he[de])==null&&(Ve=""),Array.isArray(Ve)){if(!Ve.length)continue;st=[],Ve.forEach(function(at){var tt=Object.prototype.toString.call(at).slice(8,-1)!=="Object";st.push(tt?at:K(at))}),Ve=st.map(encodeURIComponent).join(",")}else typeof Ve=="string"?Ve=encodeURIComponent(Ve):Ve instanceof Date?Ve=Ve.toISOString():typeof Ve=="number"&&(Ve=Math.round(Ve));St.push(de+"="+Ve)}return St.join("&")}}}N.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(N);function A(){var K,he,de,Ve=window.crypto||window.msCrypto,St=Uint32Array,st=Math.pow(2,8*St.BYTES_PER_ELEMENT)-1;function at(){Ve&&(K||(K=new St(10)),Ve.getRandomValues(K),he=0)}return de={random:function(tt,ft){var Et;return tt||(tt=0),ft||(ft=1),Ve?(he===K.length&&at(),Et=K[he]/st,he+=1):Et=Math.random(),Et*(ft-tt)+tt}},at(),de}A.__dashjs_factory_name="RNG";var b=dashjs.FactoryMaker.getSingletonFactory(A),j=w(5717);function Y(K){var he;K=K||{};var de,Ve,St,st,at,tt,ft,Et=this.context,Tt=[],Ct=K.metricsConstants;function hn(){st=!1,at=!1,tt=null,ft=null}return he={report:function(Qt,nn){Array.isArray(nn)||(nn=[nn]),at&&ft.isEnabled()&&nn.forEach(function(Ot){var Un=de.serialise(Ot);Qt!==Ct.DVB_ERRORS&&(Un="metricname=".concat(Qt,"&").concat(Un)),function(gr,Or,dr){var ei=new XMLHttpRequest;ei.withCredentials=Ve.getXHRWithCredentialsForType(Ct.HTTP_REQUEST_DVB_REPORTING_TYPE);var Ji=function(){var Lr=Tt.indexOf(ei);Lr!==-1&&(Tt.splice(Lr,1),!(ei.status>=200&&ei.status<300)&&dr&&dr())};Tt.push(ei);try{ei.open("GET",gr),ei.onloadend=Ji,ei.onerror=Ji,ei.send()}catch(Lr){ei.onerror()}}(Un="".concat(tt,"?").concat(Un),0,function(){at=!1})})},initialize:function(Qt,nn){var Ot;if(ft=nn,!(tt=Qt.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");st||((Ot=Qt.dvbProbability)&&(Ot===1e3||Ot/1e3>=St.random())&&(at=!0),st=!0)},reset:function(){hn()}},de=_(Et).getInstance(),St=b(Et).getInstance(),Ve=(0,j.Z)(Et).getInstance(),hn(),he}Y.__dashjs_factory_name="DVBReporting";var W=dashjs.FactoryMaker.getClassFactory(Y);function $(K){K=K||{};var he,de={"urn:dvb:dash:reporting:2014":W},Ve=this.context,St=K.debug?K.debug.getLogger(he):{},st=K.metricsConstants,at=K.mediaPlayerModel||{};return{create:function(tt,ft){var Et;try{(Et=de[tt.schemeIdUri](Ve).create({metricsConstants:st,mediaPlayerModel:at})).initialize(tt,ft)}catch(Tt){Et=null,St.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(tt.schemeIdUri," (").concat(Tt.message,")"))}return Et},register:function(tt,ft){de[tt]=ft},unregister:function(tt){delete de[tt]}}}$.__dashjs_factory_name="ReportingFactory";var se=dashjs.FactoryMaker.getSingletonFactory($);function x(K){var he=[],de=se(this.context).getInstance(K);return{initialize:function(Ve,St){Ve.some(function(st){var at=de.create(st,St);if(at)return he.push(at),!0})},reset:function(){he.forEach(function(Ve){return Ve.reset()}),he=[]},report:function(Ve,St){he.forEach(function(st){return st.report(Ve,St)})}}}x.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(x);function ce(){return{reconstructFullMetricName:function(K,he,de){var Ve=K;return he&&(Ve+="("+he,de&&de.length&&(Ve+=","+de),Ve+=")"),Ve},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}ce.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(ce);function me(K){var he,de,Ve,St,st;K=K||{};var at=this.context,tt=oe(at).getInstance(),ft=[],Et=K.metricsConstants;function Tt(){var Ct=function(){try{return Object.keys(ft).map(function(hn){return ft[hn]}).reduce(function(hn,Qt){return hn.level<Qt.level?hn:Qt})}catch(hn){return}}();Ct&&st!==Ct.t&&(st=Ct.t,he.report(Ve,Ct))}return{initialize:function(Ct,hn,Qt){hn&&(de=tt.validateN(Qt),he=hn,Ve=tt.reconstructFullMetricName(Ct,Qt),St=setInterval(Tt,de))},reset:function(){clearInterval(St),St=null,de=0,he=null,st=null},handleNewMetric:function(Ct,hn,Qt){Ct===Et.BUFFER_LEVEL&&(ft[Qt]=hn)}}}me.__dashjs_factory_name="BufferLevelHandler";var Ce=dashjs.FactoryMaker.getClassFactory(me),Je=dashjs.FactoryMaker.getClassFactory(function(K){var he,de=(K=K||{}).eventBus,Ve=K.metricsConstants;function St(){de.off(y.Z.METRICS_INITIALISATION_COMPLETE,St,this),de.trigger(y.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(st,at){at&&(he=at,de.on(y.Z.METRICS_INITIALISATION_COMPLETE,St,this))},reset:function(){he=null},handleNewMetric:function(st,at){st===Ve.DVB_ERRORS&&he&&he.report(st,at)}}});function Te(K){var he,de,Ve,St,st;K=K||{};var at=[],tt=oe(this.context).getInstance(),ft=K.metricsConstants;function Et(){var Tt=at;Tt.length&&he&&he.report(St,Tt),at=[]}return{initialize:function(Tt,Ct,hn,Qt){Ct&&(de=tt.validateN(hn),he=Ct,Qt&&Qt.length&&(Ve=Qt),St=tt.reconstructFullMetricName(Tt,hn,Qt),st=setInterval(Et,de))},reset:function(){clearInterval(st),st=null,de=null,Ve=null,at=[],he=null},handleNewMetric:function(Tt,Ct){Tt===ft.HTTP_REQUEST&&(Ve&&Ve!==Ct.type||at.push(Ct))}}}Te.__dashjs_factory_name="HttpListHandler";var je=dashjs.FactoryMaker.getClassFactory(Te);function ot(){var K,he;return{initialize:function(de,Ve){K=de,he=Ve},reset:function(){he=null,K=void 0},handleNewMetric:function(de,Ve){de===K&&he&&he.report(K,Ve)}}}ot.__dashjs_factory_name="GenericMetricHandler";var ct=dashjs.FactoryMaker.getClassFactory(ot);function Ie(K){var he,de=(K=K||{}).debug?K.debug.getLogger(he):{},Ve=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,St=this.context,st={BufferLevel:Ce,DVBErrors:Je,HttpList:je,PlayList:ct,RepSwitchList:ct,TcpList:ct};return{create:function(at,tt){var ft,Et=at.match(Ve);if(Et){try{(ft=st[Et[1]](St).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(Et[1],tt,Et[3],Et[5])}catch(Tt){ft=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(Et[1]," with args ").concat(Et[3],", ").concat(Et[5]," (").concat(Tt.message,")"))}return ft}},register:function(at,tt){st[at]=tt},unregister:function(at){delete st[at]}}}Ie.__dashjs_factory_name="MetricsHandlerFactory";var qe=dashjs.FactoryMaker.getSingletonFactory(Ie);function gt(K){K=K||{};var he,de=[],Ve=this.context,St=K.eventBus,st=K.events,at=qe(Ve).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function tt(ft){de.forEach(function(Et){Et.handleNewMetric(ft.metric,ft.value,ft.mediaType)})}return he={initialize:function(ft,Et){ft.split(",").forEach(function(Tt,Ct,hn){var Qt;if(Tt.indexOf("(")!==-1&&Tt.indexOf(")")===-1){var nn=hn[Ct+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(Tt+=","+nn,delete hn[Ct+1])}(Qt=at.create(Tt,Et))&&de.push(Qt)}),St.on(st.METRIC_ADDED,tt,he),St.on(st.METRIC_UPDATED,tt,he)},reset:function(){St.off(st.METRIC_ADDED,tt,he),St.off(st.METRIC_UPDATED,tt,he),de.forEach(function(ft){return ft.reset()}),de=[]}}}gt.__dashjs_factory_name="MetricsHandlersController";var Me=dashjs.FactoryMaker.getClassFactory(gt);function We(K){var he,de,Ve;K=K||{};var St=this.context;function st(){he&&he.reset(),de&&de.reset(),Ve&&Ve.reset()}return{initialize:function(at){try{(Ve=F(St).create({mediaElement:K.mediaElement})).initialize(at.Range),(de=X(St).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(at.Reporting,Ve),(he=Me(St).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(at.metrics,de)}catch(tt){throw st(),tt}},reset:st}}We.__dashjs_factory_name="MetricsController";var rt=dashjs.FactoryMaker.getClassFactory(We),Ht=function K(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},kt=function K(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},mt=function K(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Rt(K){var he=(K=K||{}).adapter,de=K.constants;return{getMetrics:function(Ve){var St=[];return Ve&&Ve.Metrics_asArray&&Ve.Metrics_asArray.forEach(function(st){var at=new Ht,tt=he.getIsDynamic(Ve);st.hasOwnProperty("metrics")&&(at.metrics=st.metrics,st.Range_asArray&&st.Range_asArray.forEach(function(ft){var Et=new kt;Et.starttime=function(Tt,Ct,hn){var Qt,nn,Ot=0;return Ct?Ot=he.getAvailabilityStartTime(Tt)/1e3:(Qt=he.getRegularPeriods(Tt)).length&&(Ot=Qt[0].start),nn=Ot,hn&&hn.hasOwnProperty(de.START_TIME)&&(nn+=hn.starttime),nn}(Ve,tt,ft),ft.hasOwnProperty("duration")?Et.duration=ft.duration:Et.duration=he.getDuration(Ve),Et._useWallClockTime=tt,at.Range.push(Et)}),st.Reporting_asArray&&(st.Reporting_asArray.forEach(function(ft){var Et=new mt;ft.hasOwnProperty(de.SCHEME_ID_URI)&&(Et.schemeIdUri=ft.schemeIdUri,ft.hasOwnProperty("value")&&(Et.value=ft.value),ft.hasOwnProperty(de.DVB_REPORTING_URL)&&(Et.dvbReportingUrl=ft[de.DVB_REPORTING_URL]),ft.hasOwnProperty(de.DVB_PROBABILITY)&&(Et.dvbProbability=ft[de.DVB_PROBABILITY]),at.Reporting.push(Et))}),St.push(at)))}),St}}}Rt.__dashjs_factory_name="ManifestParsing";var Re=dashjs.FactoryMaker.getSingletonFactory(Rt);function te(K){var he;K=K||{};var de={},Ve=this.context,St=K.eventBus,st=K.events;function at(ft){if(!ft.error){var Et=Object.keys(de);Re(Ve).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(ft.manifest).forEach(function(Tt){var Ct=JSON.stringify(Tt);if(de.hasOwnProperty(Ct))Et.splice(Ct,1);else try{var hn=rt(Ve).create(K);hn.initialize(Tt),de[Ct]=hn}catch(Qt){}}),Et.forEach(function(Tt){de[Tt].reset(),delete de[Tt]}),St.trigger(y.Z.METRICS_INITIALISATION_COMPLETE)}}function tt(){Object.keys(de).forEach(function(ft){de[ft].reset()}),de={}}return he={reset:function(){St.off(st.MANIFEST_UPDATED,at,he),St.off(st.STREAM_TEARDOWN_COMPLETE,tt,he)}},St.on(st.MANIFEST_UPDATED,at,he),St.on(st.STREAM_TEARDOWN_COMPLETE,tt,he),he}te.__dashjs_factory_name="MetricsCollectionController";var Ue=dashjs.FactoryMaker.getClassFactory(te);function O(){var K=this.context;return{createMetricsReporting:function(he){return D(K).getInstance({eventBus:he.eventBus,dashMetrics:he.dashMetrics,metricsConstants:he.metricsConstants,events:he.events}).initialize(),Ue(K).create(he)},getReportingFactory:function(){return se(K).getInstance()},getMetricsHandlerFactory:function(){return qe(K).getInstance()}}}O.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(O);M.events=y.Z,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,M);var q=M},1180:function(R,g,w){function U(m){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(m)}function C(m,T){return C=Object.setPrototypeOf||function(F,N){return F.__proto__=N,F},C(m,T)}function y(m,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(A,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),b&&C(A,b)})(_,m);var T,F,N=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}(),function(){var A,b=v(T);if(F){var j=v(this).constructor;A=Reflect.construct(b,arguments,j)}else A=b.apply(this,arguments);return y(this,A)});function _(){var A;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(A=N.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",A.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",A.CMCD_DATA_GENERATED="cmcdDataGenerated",A}return _}(w(8342).Z));g.Z=D},5717:function(R,g,w){var U=w(2610),C=w(5448),y=w(1264),v=w(3106),D=w(1767),m=w(3393);function T(){var F,N,_,A,b,j,Y,W,$=this.context,se=(0,y.Z)($).getInstance();function x(){A=[],b=[],j=[],W=[],Y=null,N=[]}function X(Ce,Je){var Te=-1;Ce.some(function(je,ot){if(je===Je)return Te=ot,!0}),Te<0||Ce.splice(Te,1)}function ce(Ce){var Je;for(Je=0;Je<W.length;Je++)if(W[Je].rulename===Ce)return Je;return-1}function oe(Ce,Je){me(Ce,Je);var Te=new U.Z;Te.schemeIdUri=Ce,Te.value=Je,N.push(Te)}function me(Ce,Je){(0,v.PS)(Ce,"string"),(0,v.PS)(Je,"string"),N.forEach(function(Te,je){Te.schemeIdUri===Ce&&Te.value===Je&&N.splice(je,1)})}return F={getCustomInitialTrackSelectionFunction:function(){return Y},setCustomInitialTrackSelectionFunction:function(Ce){Y=Ce},resetCustomInitialTrackSelectionFunction:function(){Y=null},getLicenseResponseFilters:function(){return b},getLicenseRequestFilters:function(){return A},getCustomCapabilitiesFilters:function(){return j},registerCustomCapabilitiesFilter:function(Ce){j.push(Ce)},registerLicenseResponseFilter:function(Ce){b.push(Ce)},registerLicenseRequestFilter:function(Ce){A.push(Ce)},unregisterCustomCapabilitiesFilter:function(Ce){X(j,Ce)},unregisterLicenseResponseFilter:function(Ce){X(b,Ce)},unregisterLicenseRequestFilter:function(Ce){X(A,Ce)},addAbrCustomRule:function(Ce,Je,Te){if(typeof Ce!="string"||Ce!==D.Z.ABANDON_FRAGMENT_RULES&&Ce!==D.Z.QUALITY_SWITCH_RULES||typeof Je!="string")throw m.Z.BAD_ARGUMENT_ERROR;var je=ce(Je);je===-1?W.push({type:Ce,rulename:Je,rule:Te}):(W[je].type=Ce,W[je].rule=Te)},removeAllAbrCustomRule:function(){W=[]},removeAbrCustomRule:function(Ce){if(Ce){var Je=ce(Ce);Je!==-1&&W.splice(Je,1)}else W=[]},getAbrCustomRules:function(){return W},addUTCTimingSource:oe,removeUTCTimingSource:me,getUTCTimingSources:function(){return N},clearDefaultUTCTimingSources:function(){N=[]},restoreDefaultUTCTimingSources:function(){var Ce=se.get().streaming.utcSynchronization.defaultTimingSource;oe(Ce.scheme,Ce.value)},setXHRWithCredentialsForType:function Ce(Je,Te){Je?_[Je]=!!Te:Object.keys(_).forEach(function(je){Ce(je,Te)})},getXHRWithCredentialsForType:function(Ce){var Je=_[Ce];return Je===void 0?_.default:Je},setConfig:function(){},reset:function(){x()}},_={default:!1},x(),F}T.__dashjs_factory_name="CustomParametersModel",g.Z=C.Z.getSingletonFactory(T)},9032:function(R,g,w){var U=w(5448),C=w(7473);function y(D){var m=(D=D||{}).requestModifier;function T(F){var N=new Date,_=F.request,A=new XMLHttpRequest;if(A.open(F.method,F.url,!0),_.responseType&&(A.responseType=_.responseType),_.range&&A.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=N),m&&m.modifyRequestHeader&&(A=m.modifyRequestHeader(A,{url:F.url})),F.headers)for(var b in F.headers){var j=F.headers[b];j&&A.setRequestHeader(b,j)}A.withCredentials=F.withCredentials,A.onload=F.onload,A.onloadend=F.onend,A.onerror=F.onerror,A.onprogress=F.progress,A.onabort=F.onabort,A.ontimeout=F.ontimeout,A.timeout=F.timeout,A.send(),F.response=A}return{load:function(F){m&&m.modifyRequest?(0,C.k)(F,m).then(function(){return T(F)}):T(F)},abort:function(F){var N=F.response;N.onloadend=N.onerror=N.onprogress=void 0,N.abort()}}}y.__dashjs_factory_name="XHRLoader";var v=U.Z.getClassFactory(y);g.Z=v},1737:function(R,g,w){function U(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}w.d(g,{default:function(){return Pu}});var C={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},y=function(){function tn(){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(wt){for(var Yt=null,Mt=0;Mt<wt.length;++Mt){var zt=wt[Mt];zt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||zt.value.toLowerCase()!=="cenc"&&zt.value.toLowerCase()!=="cbcs"||(Yt=zt)}return Yt}},{key:"getPSSHData",value:function(wt){var Yt=8,Mt=new DataView(wt),zt=Mt.getUint8(Yt);return Yt+=20,zt>0&&(Yt+=4+16*Mt.getUint32(Yt)),Yt+=4,wt.slice(Yt)}},{key:"getPSSHForKeySystem",value:function(wt,Yt){var Mt=tn.parsePSSHList(Yt);return wt&&Mt.hasOwnProperty(wt.uuid.toLowerCase())?Mt[wt.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(wt,Yt){return"pssh"in wt?(wt.pssh.__text=wt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Yt.decodeArray(wt.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(wt){if(wt==null)return[];for(var Yt=new DataView(wt.buffer||wt),Mt={},zt=0;;){var gn,In,Zn=void 0,Cn=zt;if(zt>=Yt.buffer.byteLength)break;if(gn=zt+Yt.getUint32(zt),zt+=4,Yt.getUint32(zt)===1886614376)if(zt+=4,(In=Yt.getUint8(zt))===0||In===1){zt++,zt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;zt+=6,zt+=4,Mt[Zn=Zn.toLowerCase()]=Yt.buffer.slice(Cn,gn),zt=gn}else zt=gn;else zt=gn}return Mt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(wt,Yt){try{if(!wt||wt.length===0)return null;for(var Mt=0,zt=null;Mt<wt.length&&!zt;){var gn=wt[Mt];if(gn&&gn.contentProtection&&gn.contentProtection.length>0){var In=gn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===Yt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!zt;){for(var Cn=In[Zn],Rn=0;Rn<C.attributes.length&&!zt;){for(var on=0,Bn=C.attributes[Rn];on<C.prefixes.length&&!zt;){var kn=C.prefixes[on];Cn[Bn]&&Cn[Bn].__prefix&&Cn[Bn].__prefix===kn&&Cn[Bn].__text&&(zt=Cn[Bn].__text),on+=1}Rn+=1}Zn+=1}}Mt+=1}return zt}catch(er){return null}}}],an&&U(sn,an),tn}(),v=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},D=function tn(sn,an,wt,Yt,Mt){(function(zt,gn){if(!(zt instanceof gn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=wt,this.persistentState=Yt,this.sessionTypes=Mt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},T(tn,sn)}function F(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function N(tn){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},N(tn)}var _=new(function(tn){(function(Mt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),zt&&T(Mt,zt)})(Yt,tn);var sn,an,wt=(sn=Yt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,zt=N(sn);if(an){var gn=N(this).constructor;Mt=Reflect.construct(zt,arguments,gn)}else Mt=zt.apply(this,arguments);return F(this,Mt)});function Yt(){var Mt;return function(zt,gn){if(!(zt instanceof gn))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Mt=wt.call(this)).MEDIA_KEYERR_CODE=100,Mt.MEDIA_KEYERR_UNKNOWN_CODE=101,Mt.MEDIA_KEYERR_CLIENT_CODE=102,Mt.MEDIA_KEYERR_SERVICE_CODE=103,Mt.MEDIA_KEYERR_OUTPUT_CODE=104,Mt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Mt.MEDIA_KEYERR_DOMAIN_CODE=106,Mt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Mt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Mt.KEY_SESSION_CREATED_ERROR_CODE=113,Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Mt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Mt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Mt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Mt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Mt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Mt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Mt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Mt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Mt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Mt}return Yt}(w(2230).Z)),A=w(5459),b=function tn(sn,an,wt,Yt,Mt,zt,gn,In){(function(Zn,Cn){if(!(Zn instanceof Cn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=wt,this.headers=Yt,this.withCredentials=Mt,this.messageType=zt,this.sessionId=gn,this.data=In},j=function tn(sn,an,wt){(function(Yt,Mt){if(!(Yt instanceof Mt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=wt},Y=w(7855),W=w(703),$=w(3393),se=w(5448);function x(tn){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},x(tn)}function X(tn){var sn,an,wt,Yt,Mt,zt,gn,In,Zn,Cn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Vn=tn.constants,rn=[],cn=tn.cmcdModel,bn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function br(_n,Xn){In||Zn?In&&kr():function(hr,ti){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Di,ui){return(Mt&&Mt[Di.ks.systemString]&&Mt[Di.ks.systemString].priority>=0?Mt[Di.ks.systemString].priority:hr.length)-(Mt&&Mt[ui.ks.systemString]&&Mt[ui.ks.systemString].priority>=0?Mt[ui.ks.systemString].priority:hr.length)});for(var Xr=0;Xr<hr.length;Xr++){var ta=So(hr[Xr]);Bi.push({ks:hr[Xr].ks,configs:[ta],protData:hr[Xr].protData})}Bn.requestKeySystemAccess(Bi).then(function(Di){var ui=(Mr=Di.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+ui+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Di){if(In=Di,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var ui=qr(In);ui&&ui.serverCertificate&&ui.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(ui.serverCertificate).buffer),kr()}}).catch(function(Di){In=null,Zn=!1,ti||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new A.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Di.error)})})}}(_n,Xn)}function kr(){for(var _n,Xn=0;Xn<wt.length;Xn++)for(_n=0;_n<wt[Xn].length;_n++)if(In===wt[Xn][_n].ks){Yi(wt[Xn][_n]);break}wt=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var Xn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(Xn))}_n.sessionId?no(_n):_n.initData!==null&&Br(_n)}function no(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var Xn=y.getPSSHForKeySystem(In,_n?_n.initData:null);if(Xn){if(function(hr){if(!hr)return!1;try{for(var ti=Bn.getSessions(),Mr=0;Mr<ti.length;Mr++)if(ti[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||hi(Xn))return;try{_n.initData=Xn,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var Xn=_n.systemString;if(Mt)return Xn in Mt?Mt[Xn]:null}return null}function hi(_n){if(!_n)return!1;try{for(var Xn=Bn.getAllInitData(),hr=0;hr<Xn.length;hr++)if(on.initDataEquals(_n,Xn[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ti){return!1}}function vi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Ms,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Ms,sn))}function So(_n){var Xn=_n.protData,hr=[],ti=[],Mr=Xn&&Xn.audioRobustness&&Xn.audioRobustness.length>0?Xn.audioRobustness:gn,Bi=Xn&&Xn.videoRobustness&&Xn.videoRobustness.length>0?Xn.videoRobustness:gn,Xr=_n.sessionType,ta=Xn&&Xn.distinctiveIdentifier?Xn.distinctiveIdentifier:"optional",Di=Xn&&Xn.persistentState?Xn.persistentState:Xr==="temporary"?"optional":"required";return Yt.forEach(function(ui){ui.type===Vn.AUDIO?hr.push(new v(ui.codec,Mr)):ui.type===Vn.VIDEO&&ti.push(new v(ui.codec,Bi))}),new D(hr,ti,ta,Di,[Xr])}function ro(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function ea(_n){an.debug("DRM: onKeyMessage");var Xn=_n.data;kn.trigger(er.KEY_MESSAGE,{data:Xn});var hr=Xn.messageType?Xn.messageType:"license-request",ti=Xn.message,Mr=Xn.sessionToken,Bi=qr(In),Xr=on.getLicenseServerModelInstance(In,Bi,hr),ta={sessionToken:Mr,messageType:hr};if(ti&&ti.byteLength!==0){if(!Xr)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void bi(ta);if(on.isClearKey(In)){var Di=on.processClearKeyLicenseRequest(In,Bi,ti);if(Di&&Di.keyPairs&&Di.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),bi(ta),void Bn.updateKeySession(Mr,Di)}(function(ui,wo,Wi){var Go=ui.sessionToken,na=ui.messageType?ui.messageType:"license-request",pt={sessionToken:Go,messageType:na},ra=In?In.systemString:null,Ds=function(xr,vs,ys,Yr,Ec){var Sa=null,Il=Yr.message;if(xr&&xr.serverURL){var aa=xr.serverURL;typeof aa=="string"&&aa!==""?Sa=aa:x(aa)==="object"&&aa.hasOwnProperty(vs)&&(Sa=aa[vs])}else if(xr&&xr.laURL&&xr.laURL!=="")Sa=xr.laURL;else if(!(Sa=y.getLicenseServerUrlFromMediaInfo(Yt,In.schemeIdURI))&&!on.isClearKey(In)){var Es=y.getPSSHData(ys.initData);(Sa=In.getLicenseServerURLFromInitData(Es))||(Sa=Yr.laURL)}return Sa=Ec.getServerURLFromMessage(Sa,Il,vs)}(Wi,na,Go,ui,wo);if(Ds){var pr={},Ao=!1;Wi&&vc(pr,Wi.httpRequestHeaders);var lu=ui.message;vc(pr,In.getRequestHeadersFromMessage(lu)),Object.keys(pr).forEach(function(xr){xr.toLowerCase()==="authorization"&&(Ao=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(Ao=Wi.withCredentials);var Al=function(xr){if(Bn)if(xr.status>=200&&xr.status<=299){var vs=W.Z.parseHttpHeaders(xr.getAllResponseHeaders?xr.getAllResponseHeaders():null),ys=new j(xr.responseURL,vs,xr.response);si(Jn.getLicenseResponseFilters(),ys).then(function(){var Yr=wo.getLicenseMessage(ys.data,ra,na);Yr!==null?(bi(pt),Bn.updateKeySession(Go,Yr)):bf(xr,pt,ra,na,wo)})}else bf(xr,pt,ra,na,wo)},gs=function(xr){bi(pt,new A.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ra+' update, XHR aborted. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},Ga=function(xr){bi(pt,new A.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ra+' update, XHR error. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},Ou=In.getLicenseRequestFromMessage(lu),Lu=wo.getHTTPMethod(na),ia=wo.getResponseType(ra,na),oa=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,cu=Go.getSessionId()||null,ms=new b(Ds,Lu,ia,pr,Ao,na,cu,Ou),yc=isNaN(bn.get().streaming.retryAttempts[Y.w.LICENSE])?3:bn.get().streaming.retryAttempts[Y.w.LICENSE];si(Jn.getLicenseRequestFilters(),ms).then(function(){wl(ms,yc,oa,Al,gs,Ga)})}else bi(pt,new A.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(Xn,Xr,Bi)}else bi(ta,new A.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function bi(_n,Xn){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:Xn})}function wl(_n,Xn,hr,ti,Mr,Bi){var Xr=new XMLHttpRequest;if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===$.Z.CMCD_MODE_QUERY){var ta=cn.getQueryParameter({url:_n.url,type:Y.w.LICENSE});ta&&(_n.url=W.Z.addAditionalQueryParameterToUrl(_n.url,[ta]))}for(var Di in Xr.open(_n.method,_n.url,!0),Xr.responseType=_n.responseType,Xr.withCredentials=_n.withCredentials,hr>0&&(Xr.timeout=hr),_n.headers)Xr.setRequestHeader(Di,_n.headers[Di]);if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===$.Z.CMCD_MODE_HEADER){var ui=cn.getHeaderParameters({url:_n.url,type:Y.w.LICENSE});if(ui)for(var wo in ui){var Wi=ui[wo];Wi&&Xr.setRequestHeader(wo,Wi)}}var Go=function(){Xn--;var na=isNaN(bn.get().streaming.retryIntervals[Y.w.LICENSE])?1e3:bn.get().streaming.retryIntervals[Y.w.LICENSE];Rn=setTimeout(function(){wl(_n,Xn,hr,ti,Mr,Bi)},na)};Xr.onload=function(){Cn=null,this.status>=200&&this.status<=299||Xn<=0?ti(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Xn),Go())},Xr.ontimeout=Xr.onerror=function(){Cn=null,Xn<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+Xn),Go())},Xr.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),Cn=Xr,Xr.send(_n.data)}function uu(){Cn&&(Cn.onloadend=Cn.onerror=Cn.onprogress=void 0,Cn.abort(),Cn=null),Rn&&(clearTimeout(Rn),Rn=null)}function vc(_n,Xn){if(Xn)for(var hr in Xn)_n[hr]=Xn[hr]}function bf(_n,Xn,hr,ti,Mr){var Bi="NONE",Xr=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ti),Xr={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),bi(Xn,new A.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,Xr))}function si(_n,Xn){return _n?_n.reduce(function(hr,ti){return hr.then(function(){return ti(Xn)})},Promise.resolve()):Promise.resolve()}function Ms(_n,Xn){if(!bn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(Yt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Xn=Xn===void 0?1:Xn+1)<5))return void rn.push(setTimeout(function(){Ms(_n,Xn)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ti=y.getPSSHForKeySystem(In,hr);if(ti&&hi(ti))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,Mt,zt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){wt.push(Bi),br(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),Yt.push(_n)},clearMediaInfoArray:function(){Yt=[]},handleKeySystemFromManifest:function(){if(Yt&&Yt.length!==0){var _n=[];Yt.forEach(function(Xn){var hr=on.getSupportedKeySystemsFromContentProtection(Xn.contentProtection,Mt,zt);hr.length>0&&(_n.length===0&&(_n=hr),wt.push(hr))}),_n&&_n.length>0&&br(_n,!0)}},createKeySession:Br,loadKeySession:no,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:vi,setSessionType:function(_n){zt=_n},setRobustnessLevel:function(_n){gn=_n},setProtectionData:function(_n){Mt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,Mt,zt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){uu(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,ea,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),ar(),uu(),vi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],Yt=[],wt=[]}},an=Er.getLogger(sn),wt=[],Yt=[],zt="temporary",gn="",Cn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,ea,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),sn}X.__dashjs_factory_name="ProtectionController";var ce=se.Z.getClassFactory(X),oe=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function me(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Ce=function(){function tn(wt,Yt){if(function(Mt,zt){if(!(Mt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,tn),Yt&&Yt!=="persistent"&&Yt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=wt,this.type=Yt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var wt,Yt=this.keyPairs.length,Mt={keys:[]};for(wt=0;wt<Yt;wt++){var zt={kty:"oct",alg:"A128KW",kid:this.keyPairs[wt].keyID,k:this.keyPairs[wt].key};Mt.keys.push(zt)}this.type&&(Mt.type=this.type);var gn=JSON.stringify(Mt),In=gn.length,Zn=new ArrayBuffer(In),Cn=new Uint8Array(Zn);for(wt=0;wt<In;wt++)Cn[wt]=gn.charCodeAt(wt);return Zn}}])&&me(sn.prototype,an),tn}();function Je(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Te=new(function(){function tn(){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Je(sn.prototype,an),tn}()),je="e2719d58-a985-b3c9-781a-b030af78d30e",ot=Te.CLEARKEY_KEYSTEM_STRING,ct="urn:uuid:"+je;function Ie(tn){var sn=(tn=tn||{}).BASE64;return{uuid:je,schemeIdURI:ct,systemString:ot,getInitData:function(an,wt){try{var Yt=y.parseInitDataFromContentProtection(an,sn);if(!Yt&&wt){var Mt={kids:[function(zt){try{var gn=zt.replace(/-/g,"");return(gn=btoa(gn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(wt["cenc:default_KID"])]};Yt=new TextEncoder().encode(JSON.stringify(Mt))}return Yt}catch(zt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,wt){var Yt=null;if(an){for(var Mt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(wt))),zt=[],gn=0;gn<Mt.kids.length;gn++){var In=Mt.kids[gn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");zt.push(new oe(In,Zn))}Yt=new Ce(zt)}return Yt}}}Ie.__dashjs_factory_name="KeySystemClearKey";var qe=dashjs.FactoryMaker.getSingletonFactory(Ie),gt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Me=Te.CLEARKEY_KEYSTEM_STRING,We="urn:uuid:"+gt;function rt(tn){var sn,an=tn.BASE64,wt=tn.debug.getLogger(sn);return{uuid:gt,schemeIdURI:We,systemString:Me,getInitData:function(Yt){return y.parseInitDataFromContentProtection(Yt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Yt){return new Uint8Array(Yt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Yt,Mt){var zt=null;if(Yt){for(var gn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Mt))),In=[],Zn=0;Zn<gn.kids.length;Zn++){var Cn=gn.kids[Zn],Rn=Yt.clearkeys&&Yt.clearkeys.hasOwnProperty(Cn)?Yt.clearkeys[Cn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+Cn+") is not known!");In.push(new oe(Cn,Rn))}zt=new Ce(In),wt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return zt}}}rt.__dashjs_factory_name="KeySystemW3CClearKey";var Ht=dashjs.FactoryMaker.getSingletonFactory(rt),kt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",mt=Te.WIDEVINE_KEYSTEM_STRING,Rt="urn:uuid:"+kt;function Re(tn){var sn=(tn=tn||{}).BASE64;return{uuid:kt,schemeIdURI:Rt,systemString:mt,getInitData:function(an){return y.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Re.__dashjs_factory_name="KeySystemWidevine";var te=dashjs.FactoryMaker.getSingletonFactory(Re),Ue="9a04f079-9840-4286-ab92-e65be0885f95",O=Te.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+Ue;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,wt=tn.settings;function Yt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Ue,schemeIdURI:M,systemString:O,getInitData:function(Mt){var zt,gn,In,Zn,Cn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(Yt(),!Mt)return null;if("pssh"in Mt)return y.parseInitDataFromContentProtection(Mt,an);if("pro"in Mt)kn=an.decodeArray(Mt.pro.__text);else{if(!("prheader"in Mt))return null;kn=an.decodeArray(Mt.prheader.__text)}return zt=kn.length,gn=4+Rn.length+on.length+4+zt,In=new ArrayBuffer(gn),Zn=new Uint8Array(In),(Cn=new DataView(In)).setUint32(Bn,gn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,Cn.setUint32(Bn,zt),Bn+=4,Zn.set(kn,Bn),Bn+=zt,Zn.buffer},getRequestHeadersFromMessage:function(Mt){var zt,gn,In={},Zn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var Cn=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);zt=String.fromCharCode.apply(null,Cn);for(var Rn=(gn=Zn.parseFromString(zt,"application/xml")).getElementsByTagName("name"),on=gn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(Mt){var zt=null,gn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return Mt;var In=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);Yt();var Zn=String.fromCharCode.apply(null,In),Cn=gn.parseFromString(Zn,"application/xml");if(!Cn.getElementsByTagName("PlayReadyKeyMessage")[0])return Mt;var Rn=Cn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(zt=an.decode(Rn)),zt},getLicenseServerURLFromInitData:function(Mt){if(Mt)for(var zt=new DataView(Mt),gn=zt.getUint16(4,!0),In=6,Zn=new DOMParser,Cn=0;Cn<gn;Cn++){var Rn=zt.getUint16(In,!0);In+=2;var on=zt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=Mt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(Mt){var zt,gn,In,Zn;if(Yt(),!Mt)return null;for(zt=[],Zn=0;Zn<Mt.length;++Zn)zt.push(Mt.charCodeAt(Zn)),zt.push(0);for(zt=String.fromCharCode.apply(null,zt),zt=an.encode(zt),gn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",zt),In=[],Zn=0;Zn<gn.length;++Zn)In.push(gn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(Mt){if(Mt!=="utf-8"&&Mt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=Mt}}}q.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(q);function he(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Te.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(wt){return sn.decodeArray(wt.license)},getErrorResponse:function(wt){return wt}},an[Te.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(wt){return wt},getErrorResponse:function(wt){return String.fromCharCode.apply(null,new Uint8Array(wt))}},{getServerURLFromMessage:function(wt){return wt},getHTTPMethod:function(){return"POST"},getResponseType:function(wt){return an[wt].responseType},getLicenseMessage:function(wt,Yt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[Yt].getLicenseMessage(wt)},getErrorResponse:function(wt,Yt){return an[Yt].getErrorResponse(wt)}}}he.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(he);function Ve(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(Yt){var Mt=String.fromCharCode.apply(null,new Uint8Array(Yt));return decodeURIComponent(escape(Mt))}function an(Yt){if(window.DOMParser){var Mt=sn(Yt),zt=new window.DOMParser().parseFromString(Mt,"text/xml"),gn=zt?zt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=gn?gn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return Yt}function wt(Yt){var Mt="",zt="",gn="",In=-1,Zn=-1;if(window.DOMParser){var Cn=sn(Yt),Rn=new window.DOMParser().parseFromString(Cn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return Cn;Mt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(zt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(gn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?gn.lastIndexOf("[")+1:-1,Zn=gn?gn.indexOf("]"):-1,gn=gn?gn.substring(In,Zn):"")}var Vn="code: ".concat(zt,", name: ").concat(Mt);return gn&&(Vn+=", message: ".concat(gn)),Vn}return{getServerURLFromMessage:function(Yt){return Yt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Yt){return an.call(this,Yt)},getErrorResponse:function(Yt){return wt.call(this,Yt)}}}Ve.__dashjs_factory_name="PlayReady";var St=se.Z.getSingletonFactory(Ve);function st(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}st.__dashjs_factory_name="Widevine";var at=dashjs.FactoryMaker.getSingletonFactory(st);function tt(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var wt=tn.keys[an],Yt=wt.kid.replace(/=/g,""),Mt=wt.k.replace(/=/g,"");sn.push(new oe(Yt,Mt))}return new Ce(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}tt.__dashjs_factory_name="ClearKey";var ft=dashjs.FactoryMaker.getSingletonFactory(tt);function Et(){var tn,sn,an,wt,Yt,Mt,zt,gn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function Cn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;wt=[],on=K(In).getInstance({BASE64:Yt,settings:Mt}),wt.push(on),on=te(In).getInstance({BASE64:Yt}),wt.push(on),on=qe(In).getInstance({BASE64:Yt}),wt.push(on),zt=on,on=Ht(In).getInstance({BASE64:Yt,debug:sn}),wt.push(on),gn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<wt.length;er++){var Er=wt[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===zt||on===gn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return wt},setKeySystems:function(on){wt=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<wt.length;Bn++)if(wt[Bn].systemString===on)return wt[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Vn,rn=[];if(on){var cn=y.findCencContentProtection(on);for(Ur=0;Ur<wt.length;++Ur){var bn=Zn((Er=wt[Ur]).systemString,Bn);for(Vn=0;Vn<on.length;++Vn)if((er=on[Vn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,cn);rn.push({ks:wt[Ur],keyId:er.keyId,initData:Jn,protData:bn,cdmData:Er.getCDMData(bn?bn.cdmData:null),sessionId:Cn(bn,er),sessionType:Rn(bn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=y.parsePSSHList(on),Vn=0;Vn<wt.length;++Vn){var rn=Zn((er=wt[Vn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:Cn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=de(In).getInstance({BASE64:Yt}):on.systemString===Te.WIDEVINE_KEYSTEM_STRING?er=at(In).getInstance():on.systemString===Te.PLAYREADY_KEYSTEM_STRING?er=St(In).getInstance():on.systemString===Te.CLEARKEY_KEYSTEM_STRING&&(er=ft(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(Yt=on.BASE64),on.settings&&(Mt=on.settings))}},tn}Et.__dashjs_factory_name="ProtectionKeyController";var Tt=dashjs.FactoryMaker.getSingletonFactory(Et);function Ct(tn){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Ct(tn)}function hn(tn,sn){return hn=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},hn(tn,sn)}function Qt(tn,sn){return!sn||Ct(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Ot=new(function(tn){(function(Mt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),zt&&hn(Mt,zt)})(Yt,tn);var sn,an,wt=(sn=Yt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,zt=nn(sn);if(an){var gn=nn(this).constructor;Mt=Reflect.construct(zt,arguments,gn)}else Mt=zt.apply(this,arguments);return Qt(this,Mt)});function Yt(){var Mt;return function(zt,gn){if(!(zt instanceof gn))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Mt=wt.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Mt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Mt.KEY_ADDED="public_keyAdded",Mt.KEY_ERROR="public_keyError",Mt.KEY_MESSAGE="public_keyMessage",Mt.KEY_SESSION_CLOSED="public_keySessionClosed",Mt.KEY_SESSION_CREATED="public_keySessionCreated",Mt.KEY_SESSION_REMOVED="public_keySessionRemoved",Mt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Mt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Mt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Mt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Mt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Mt.NEED_KEY="needkey",Mt.PROTECTION_CREATED="public_protectioncreated",Mt.PROTECTION_DESTROYED="public_protectiondestroyed",Mt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Mt.TEARDOWN_COMPLETE="protectionTeardownComplete",Mt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Mt.KEY_SESSION_UPDATED="public_keySessionUpdated",Mt}return Yt}(w(8342).Z)),Un=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,wt,Yt){(function(Mt,zt){if(!(Mt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=wt,this.messageType=Yt||"license-request"},Or=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ei(tn){tn=tn||{};var sn,an,wt,Yt,Mt,zt,gn,In,Zn=this.context,Cn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,cn,bn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var br=rn[cn].protData&&rn[cn].protData.systemStringPriority?rn[cn].protData.systemStringPriority:null,kr=rn[cn].configs,Yi=rn[cn].ks,no=Yi.systemString;(function(Br,qr){return new Promise(function(hi,vi){kn(Br,qr,0,hi,vi)})})(br||(dr[no]?dr[no]:[no]),kr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,hi=new Or(Yi,qr);hi.mksa=Br,Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:hi}),bn({data:hi})}).catch(function(Br){if(cn+1<rn.length)Bn(rn,cn+1,bn,Jn);else{var qr="Key system access denied! ";Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,cn,bn,Jn,ar){var br=rn[bn];an.debug("Requesting key system access for system string ".concat(br)),navigator.requestMediaKeySystemAccess(br,cn).then(function(kr){kr.selectedSystemString=br,Jn(kr)}).catch(function(kr){bn+1<rn.length?kn(rn,cn,bn+1,Jn,ar):ar(kr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var cn=rn.session;return cn.removeEventListener("keystatuseschange",rn),cn.removeEventListener("message",rn),cn.close()}function Er(rn){for(var cn=0;cn<zt.length;cn++)if(zt[cn]===rn){zt.splice(cn,1);break}}function Ur(rn){var cn,bn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?cn=rn[0]:bn=rn[0]),rn[1]&&(typeof rn[1]=="string"?cn=rn[1]:bn=rn[1])),{status:cn,keyId:bn}}function Vn(rn,cn){var bn={session:rn,keyId:cn.keyId,initData:cn.initData,sessionId:cn.sessionId,sessionType:cn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":Cn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var br=Ur(arguments);br.status==="expired"?Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new A.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,br)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;Cn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",bn),rn.addEventListener("message",bn),rn.closed.then(function(){Er(bn),an.debug("DRM: Session closed.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:bn.getSessionId()})}),zt.push(bn),bn}return sn={getAllInitData:function(){for(var rn=[],cn=0;cn<zt.length;cn++)zt[cn].initData&&rn.push(zt[cn].initData);return rn},getSessions:function(){return zt},requestKeySystemAccess:function(rn){return new Promise(function(cn,bn){Bn(rn,0,cn,bn)})},selectKeySystem:function(rn){return new Promise(function(cn,bn){rn.mksa.createMediaKeys().then(function(Jn){return wt=rn.keySystem,Mt=Jn,Yt?Yt.setMediaKeys(Mt):Promise.resolve()}).then(function(){cn(wt)}).catch(function(){bn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){Yt!==rn&&(Yt&&(Yt.removeEventListener("encrypted",gn),Yt.setMediaKeys&&Yt.setMediaKeys(null)),(Yt=rn)&&(Yt.addEventListener("encrypted",gn),Yt.setMediaKeys&&Mt&&Yt.setMediaKeys(Mt)))},setServerCertificate:function(rn){if(!wt||!Mt)throw new Error("Can not set server certificate until you have selected a key system");Mt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(cn){Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new A.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+cn.name)})})},createKeySession:function(rn){if(!wt||!Mt)throw new Error("Can not create sessions until you have selected a key system");var cn=Mt.createSession(rn.sessionType),bn=Vn(cn,rn),Jn=wt.systemString===Te.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Te.INITIALIZATION_DATA_TYPE_KEYIDS:Te.INITIALIZATION_DATA_TYPE_CENC;cn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:bn})}).catch(function(ar){Er(bn),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,cn){var bn=rn.session;In.isClearKey(wt)&&(cn=cn.toJWK()),bn.update(cn).then(function(){Cn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){Cn.trigger(Rn.KEY_ERROR,{error:new A.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!wt||!Mt)throw new Error("Can not load sessions until you have selected a key system");for(var cn=rn.sessionId,bn=0;bn<zt.length;bn++)if(cn===zt[bn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=Mt.createSession(rn.sessionType),ar=Vn(Jn,rn);Jn.load(cn).then(function(br){br?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+cn+")")}))}).catch(function(br){Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new A.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+cn+")! "+br.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(cn){Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+cn.name})})},closeKeySession:function(rn){er(rn).catch(function(cn){Er(rn),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+cn.name})})},stop:function(){for(var rn,cn=0;cn<zt.length;cn++)(rn=zt[cn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,cn=zt.length;cn!==0?function(){for(var bn=function(ar){Er(ar),zt.length===0&&(Yt?(Yt.removeEventListener("encrypted",gn),Yt.setMediaKeys(null).then(function(){Cn.trigger(Rn.TEARDOWN_COMPLETE)})):Cn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<cn;Jn++)(function(ar){er(rn),bn(ar)})(rn=zt[Jn])}():Cn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),wt=null,Yt=null,Mt=null,zt=[],In=Tt(Zn).getInstance(),gn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var cn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;Cn.trigger(Rn.NEED_KEY,{key:new Un(cn,rn.initDataType)})}}},sn}dr[Te.PLAYREADY_KEYSTEM_STRING]=[Te.PLAYREADY_KEYSTEM_STRING,Te.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Te.WIDEVINE_KEYSTEM_STRING]=[Te.WIDEVINE_KEYSTEM_STRING],dr[Te.CLEARKEY_KEYSTEM_STRING]=[Te.CLEARKEY_KEYSTEM_STRING],ei.__dashjs_factory_name="ProtectionModel_21Jan2015";var Ji=dashjs.FactoryMaker.getClassFactory(ei);function Lr(tn){tn=tn||{};var sn,an,wt,Yt,Mt,zt,gn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Vn=0;Vn<gn.length;Vn++)Er(gn[Vn]);wt&&wt.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Vn){var rn=Vn.session;rn.removeEventListener(kn.error,Vn),rn.removeEventListener(kn.message,Vn),rn.removeEventListener(kn.ready,Vn),rn.removeEventListener(kn.close,Vn);for(var cn=0;cn<gn.length;cn++)if(gn[cn]===Vn){gn.splice(cn,1);break}rn[kn.release]()}function Ur(){var Vn=null,rn=function(){wt.removeEventListener("loadedmetadata",Vn),wt[kn.setMediaKeys](Mt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};wt.readyState>=1?rn():(Vn=rn.bind(this),wt.addEventListener("loadedmetadata",Vn))}return sn={getAllInitData:function(){for(var Vn=[],rn=0;rn<gn.length;rn++)Vn.push(gn[rn].initData);return Vn},getSessions:function(){return gn},requestKeySystemAccess:function(Vn){return new Promise(function(rn,cn){for(var bn=!1,Jn=0;Jn<Vn.length;Jn++)for(var ar=Vn[Jn].ks.systemString,br=Vn[Jn].configs,kr=null,Yi=null,no=0;no<br.length;no++){var Br=br[no].audioCapabilities,qr=br[no].videoCapabilities;if(Br&&Br.length!==0){kr=[];for(var hi=0;hi<Br.length;hi++)window[kn.MediaKeys].isTypeSupported(ar,Br[hi].contentType)&&kr.push(Br[hi])}if(qr&&qr.length!==0){Yi=[];for(var vi=0;vi<qr.length;vi++)window[kn.MediaKeys].isTypeSupported(ar,qr[vi].contentType)&&Yi.push(qr[vi])}if(!(!kr&&!Yi||kr&&kr.length===0||Yi&&Yi.length===0)){bn=!0;var So=new D(kr,Yi),ro=Zn.getKeySystemBySystemString(ar),ea=new Or(ro,So);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ea}),rn({data:ea});break}}if(!bn){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),cn({error:bi})}})},selectKeySystem:function(Vn){return new Promise(function(rn,cn){try{Mt=Vn.mediaKeys=new window[kn.MediaKeys](Vn.keySystem.systemString),Yt=Vn.keySystem,zt=Vn,wt&&Ur(),rn(Yt)}catch(bn){cn({error:"Error selecting keys system ("+Yt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Vn){wt!==Vn&&(wt&&wt.removeEventListener(kn.needkey,In),(wt=Vn)&&(wt.addEventListener(kn.needkey,In),Mt&&Ur()))},createKeySession:function(Vn){if(!Yt||!Mt||!zt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(zt.ksConfiguration.videoCapabilities&&zt.ksConfiguration.videoCapabilities.length>0&&(rn=zt.ksConfiguration.videoCapabilities[0]),rn===null&&zt.ksConfiguration.audioCapabilities&&zt.ksConfiguration.audioCapabilities.length>0&&(rn=zt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var cn=rn.contentType,bn=Mt.createSession(cn,new Uint8Array(Vn.initData),Vn.cdmData?new Uint8Array(Vn.cdmData):null),Jn=function(ar,br){return{session:ar,keyId:br.keyId,initData:br.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(kr){switch(kr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new A.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(kr.message)?kr.message.buffer:kr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,kr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(bn,Vn);bn.addEventListener(kn.error,Jn),bn.addEventListener(kn.message,Jn),bn.addEventListener(kn.ready,Jn),bn.addEventListener(kn.close,Jn),gn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Vn,rn){var cn=Vn.session;Zn.isClearKey(Yt)?cn.update(new Uint8Array(rn.toJWK())):cn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),wt=null,Yt=null,Mt=null,zt=null,gn=[],Zn=Tt(Cn).getInstance(),In={handleEvent:function(Vn){if(Vn.type===kn.needkey&&Vn.initData){var rn=ArrayBuffer.isView(Vn.initData)?Vn.initData.buffer:Vn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Lr.__dashjs_factory_name="ProtectionModel_3Feb2014";var eo=dashjs.FactoryMaker.getClassFactory(Lr);function _i(tn){tn=tn||{};var sn,an,wt,Yt,Mt,zt,gn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){wt&&rn();for(var cn=0;cn<gn.length;cn++)Ur(gn[cn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(cn){try{wt[kn.cancelKeyRequest](Yt.systemString,cn.sessionId)}catch(bn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.sessionId+") "+bn.message})}}function Vn(cn,bn){if(bn&&cn){for(var Jn=cn.length,ar=0;ar<Jn;ar++)if(cn[ar].sessionId==bn)return cn[ar];return null}return null}function rn(){wt.removeEventListener(kn.keyerror,Zn),wt.removeEventListener(kn.needkey,Zn),wt.removeEventListener(kn.keymessage,Zn),wt.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var cn=[],bn=0;bn<zt.length;bn++)cn.push(zt[bn].initData);for(var Jn=0;Jn<gn.length;Jn++)cn.push(gn[Jn].initData);return cn},getSessions:function(){return gn.concat(zt)},requestKeySystemAccess:function(cn){return new Promise(function(bn,Jn){var ar=wt;ar||(ar=document.createElement("video"));for(var br=!1,kr=0;kr<cn.length;kr++)for(var Yi=cn[kr].ks.systemString,no=cn[kr].configs,Br=null,qr=0;qr<no.length;qr++){var hi=no[qr].videoCapabilities;if(hi&&hi.length!==0){Br=[];for(var vi=0;vi<hi.length;vi++)ar.canPlayType(hi[vi].contentType,Yi)!==""&&Br.push(hi[vi])}if(Br&&(!Br||Br.length!==0)){br=!0;var So=new D(null,Br),ro=Mt.getKeySystemBySystemString(Yi),ea=new Or(ro,So);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ea}),bn({data:ea});break}}if(!br){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),Jn({error:bi})}})},selectKeySystem:function(cn){return Yt=cn.keySystem,Promise.resolve(Yt)},setMediaElement:function(cn){if(wt!==cn){if(wt){rn();for(var bn=0;bn<gn.length;bn++)Ur(gn[bn]);gn=[]}(wt=cn)&&(wt.addEventListener(kn.keyerror,Zn),wt.addEventListener(kn.needkey,Zn),wt.addEventListener(kn.keymessage,Zn),wt.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(cn){if(!Yt)throw new Error("Can not create sessions until you have selected a key system");if(In||gn.length===0){var bn={sessionId:null,keyId:cn.keyId,initData:cn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return zt.push(bn),wt[kn.generateKeyRequest](Yt.systemString,new Uint8Array(cn.initData)),bn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(cn,bn){var Jn=cn.sessionId;if(Mt.isClearKey(Yt))for(var ar=0;ar<bn.keyPairs.length;ar++)wt[kn.addKey](Yt.systemString,bn.keyPairs[ar].key,bn.keyPairs[ar].keyID,Jn);else wt[kn.addKey](Yt.systemString,new Uint8Array(bn),new Uint8Array(cn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),wt=null,Yt=null,zt=[],gn=[],Mt=Tt(Cn).getInstance(),Zn={handleEvent:function(cn){var bn=null;switch(cn.type){case kn.needkey:var Jn=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((bn=Vn(gn,cn.sessionId))||(bn=Vn(zt,cn.sessionId)),bn){var ar=_.MEDIA_KEYERR_CODE,br="";switch(cn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,br+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,br+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,br+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,br+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,br+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,br+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}br+="  System Code = "+cn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new A.Z(ar,br,bn)})}else an.error("No session token found for key error");break;case kn.keyadded:(bn=Vn(gn,cn.sessionId))||(bn=Vn(zt,cn.sessionId)),bn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:bn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=cn.sessionId!==null&&cn.sessionId!==void 0)?!(bn=Vn(gn,cn.sessionId))&&zt.length>0&&(bn=zt.shift(),gn.push(bn),bn.sessionId=cn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:bn})):zt.length>0&&(bn=zt.shift(),gn.push(bn),zt.length!==0&&er.error(new A.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),bn){var kr=ArrayBuffer.isView(cn.message)?cn.message.buffer:cn.message;bn.keyMessage=kr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(bn,kr,cn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}_i.__dashjs_factory_name="ProtectionModel_01b";var Mi=dashjs.FactoryMaker.getClassFactory(_i),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],to=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ti(){var tn,sn=this.context;function an(wt,Yt){for(var Mt=0;Mt<Yt.length;Mt++){var zt=Yt[Mt];if(typeof wt[zt[Object.keys(zt)[0]]]=="function")return zt}return null}return tn={createProtectionSystem:function(wt){var Yt=null,Mt=Tt(sn).getInstance();Mt.setConfig({debug:wt.debug,BASE64:wt.BASE64,settings:wt.settings}),Mt.initialize();var zt=function(gn){var In=gn.debug,Zn=In.getLogger(tn),Cn=gn.eventBus,Rn=gn.errHandler,on=gn.videoModel?gn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,to)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),eo(sn).create({debug:In,eventBus:Cn,events:gn.events,api:an(on,to)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Mi(sn).create({debug:In,eventBus:Cn,errHandler:Rn,events:gn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Ji(sn).create({debug:In,eventBus:Cn,events:gn.events}))}(wt);return!Yt&&zt&&(Yt=ce(sn).create({protectionModel:zt,protectionKeyController:Mt,eventBus:wt.eventBus,debug:wt.debug,events:wt.events,BASE64:wt.BASE64,constants:wt.constants,cmcdModel:wt.cmcdModel,customParametersModel:wt.customParametersModel,settings:wt.settings}),wt.capabilities.setEncryptedMediaSupported(!0)),Yt}}}Ti.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Ti);Qn.events=Ot,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Ti.__dashjs_factory_name,Qn);var Pu=Qn},2068:function(R,g,w){var U=w(5448),C={DEFAULT:.5,STRONG:1,WEAK:0};function y(D,m,T){var F,N;return F=D===void 0?-1:D,N=function(_){var A=C.DEFAULT;return _!==C.DEFAULT&&_!==C.STRONG&&_!==C.WEAK||(A=_),A}(T),{quality:F,reason:m===void 0?null:m,priority:N}}y.__dashjs_factory_name="SwitchRequest";var v=U.Z.getClassFactory(y);v.NO_CHANGE=-1,v.PRIORITY=C,U.Z.updateClassFactory(y.__dashjs_factory_name,v),g.Z=v},1767:function(R,g,w){var U=w(5628),C=w(6535),y=w(7423),v=w(895),D=w(6070),m=w(3112),T=w(1914),F=w(5435),N=w(5448),_=w(2068),A=w(3393),b="qualitySwitchRules",j="abandonFragmentRules";function Y($){$=$||{};var se,x,X=this.context,ce=$.mediaPlayerModel,oe=$.customParametersModel,me=$.dashMetrics,Ce=$.settings;function Je(je){return je.filter(function(ot){return ot.quality>_.Z.NO_CHANGE})}function Te(je){var ot,ct,Ie,qe,gt,Me={},We=null;if(je.length!==0){for(Me[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Me[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Me[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},ot=0,ct=je.length;ot<ct;ot+=1)(Ie=je[ot]).quality!==_.Z.NO_CHANGE&&(Me[Ie.priority].quality===_.Z.NO_CHANGE||Me[Ie.priority].quality>Ie.quality)&&(Me[Ie.priority].quality=Ie.quality,Me[Ie.priority].reason=Ie.reason||null);return Me[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(We=Me[_.Z.PRIORITY.WEAK]),Me[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(We=Me[_.Z.PRIORITY.DEFAULT]),Me[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(We=Me[_.Z.PRIORITY.STRONG]),We&&(qe=We.quality,gt=We.reason),(0,_.Z)(X).create(qe,gt)}}return{initialize:function(){se=[],x=[],Ce.get().streaming.abr.useDefaultABRRules&&(Ce.get().streaming.abr.ABRStrategy===A.Z.ABR_STRATEGY_L2A?se.push((0,T.Z)(X).create({dashMetrics:me,settings:Ce})):Ce.get().streaming.abr.ABRStrategy===A.Z.ABR_STRATEGY_LoLP?se.push((0,F.Z)(X).create({dashMetrics:me})):(se.push((0,m.Z)(X).create({dashMetrics:me,mediaPlayerModel:ce,settings:Ce})),se.push((0,U.Z)(X).create({dashMetrics:me})),Ce.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&se.push((0,C.Z)(X).create({dashMetrics:me,settings:Ce})),Ce.get().streaming.abr.additionalAbrRules.switchHistoryRule&&se.push((0,D.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.droppedFramesRule&&se.push((0,v.Z)(X).create()),Ce.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&x.push((0,y.Z)(X).create({dashMetrics:me,mediaPlayerModel:ce,settings:Ce})))),oe.getAbrCustomRules().forEach(function(je){je.type===b&&se.push(je.rule(X).create()),je.type===j&&x.push(je.rule(X).create())})},reset:function(){[se,x].forEach(function(je){je&&je.length&&je.forEach(function(ot){return ot.reset&&ot.reset()})}),se=[],x=[]},getMaxQuality:function(je){return Te(Je(se.map(function(ot){return ot.getMaxIndex(je)})))||(0,_.Z)(X).create()},getMinSwitchRequest:Te,shouldAbandonFragment:function(je,ot){var ct=Te(Je(x.map(function(Ie){return Ie.shouldAbandon(je,ot)})));return ct&&(ct.reason.forceAbandon=!0),ct||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return se}}}Y.__dashjs_factory_name="ABRRulesCollection";var W=N.Z.getClassFactory(Y);W.QUALITY_SWITCH_RULES=b,W.ABANDON_FRAGMENT_RULES=j,N.Z.updateSingletonFactory(Y.__dashjs_factory_name,W),g.Z=W},7423:function(R,g,w){var U=w(2068),C=w(5448),y=w(6398);function v(D){D=D||{};var m,T,F,N,_,A=this.context,b=D.mediaPlayerModel,j=D.dashMetrics,Y=D.settings;function W(){F={},N={},_=[]}return m={shouldAbandon:function($){var se=(0,U.Z)(A).create(U.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(!($&&$.hasOwnProperty("getMediaInfo")&&$.hasOwnProperty("getMediaType")&&$.hasOwnProperty("getCurrentRequest")&&$.hasOwnProperty("getRepresentationInfo")&&$.hasOwnProperty("getAbrController")))return se;var x,X,ce=$.getMediaInfo(),oe=$.getMediaType(),me=$.getStreamInfo(),Ce=me?me.id:null,Je=$.getCurrentRequest();if(!isNaN(Je.index)){x=oe,X=Je.index,F[x]=F[x]||{},F[x][X]=F[x][X]||{};var Te=b.getStableBufferTime();if(j.getCurrentBufferLevel(oe)>Te)return se;var je=F[oe][Je.index];if(je===null||Je.firstByteDate===null||N.hasOwnProperty(je.id))return se;if(je.firstByteTime===void 0&&(_[oe]=[],je.firstByteTime=Je.firstByteDate.getTime(),je.segmentDuration=Je.duration,je.bytesTotal=Je.bytesTotal,je.id=Je.index),je.bytesLoaded=Je.bytesLoaded,je.elapsedTime=new Date().getTime()-je.firstByteTime,je.bytesLoaded>0&&je.elapsedTime>0&&function(rt,Ht){_[rt]=_[rt]||[],_[rt].push(Ht)}(oe,Math.round(8*je.bytesLoaded/je.elapsedTime)),_[oe].length>=Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&je.elapsedTime>Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&je.bytesLoaded<je.bytesTotal){var ot=_[oe].reduce(function(rt,Ht){return rt+Ht},0);if(je.measuredBandwidthInKbps=Math.round(ot/_[oe].length),je.estimatedTimeOfDownload=+(8*je.bytesTotal/je.measuredBandwidthInKbps/1e3).toFixed(2),je.estimatedTimeOfDownload<je.segmentDuration*Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||$.getRepresentationInfo().quality===0)return se;if(!N.hasOwnProperty(je.id)){var ct=$.getAbrController(),Ie=je.bytesTotal-je.bytesLoaded,qe=ct.getBitrateList(ce),gt=ct.getQualityForBitrate(ce,je.measuredBandwidthInKbps*Y.get().streaming.abr.bandwidthSafetyFactor,Ce),Me=ct.getMinAllowedIndexFor(oe,Ce),We=Me!==void 0?Math.max(Me,gt):gt;Ie>je.bytesTotal*qe[We].bitrate/qe[ct.getQualityFor(oe,Ce)].bitrate&&(se.quality=We,se.reason.throughput=je.measuredBandwidthInKbps,se.reason.fragmentID=je.id,se.reason.rule=this.getClassName(),N[je.id]=je,T.debug("["+oe+"] frag id",je.id," is asking to abandon and switch to quality to ",We," measured bandwidth was",je.measuredBandwidthInKbps),delete F[oe][je.id])}}else je.bytesLoaded===je.bytesTotal&&delete F[oe][je.id]}return se},reset:W},T=(0,y.Z)(A).getInstance().getLogger(m),W(),m}v.__dashjs_factory_name="AbandonRequestsRule",g.Z=C.Z.getClassFactory(v)},3112:function(R,g,w){var U=w(3860),C=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),F=w(8825),N=w(3393),_=10;function A(b){b=b||{};var j,Y,W,$=this.context,se=b.dashMetrics,x=b.mediaPlayerModel,X=(0,D.Z)($).getInstance();function ce(We,rt,Ht){var kt=Ht.reduce(function(Re,te,Ue){return te>Ht[Re]?Ue:Re},0);if(kt===0)return null;var mt=Math.max(We,_+2*rt.length),Rt=(Ht[kt]-1)/(mt/_-1);return{gp:Rt,Vp:_/Rt}}function oe(We){We.placeholderBuffer=0,We.mostAdvancedSegmentStart=NaN,We.lastSegmentWasReplacement=!1,We.lastSegmentStart=NaN,We.lastSegmentDurationS=NaN,We.lastSegmentRequestTimeMs=NaN,We.lastSegmentFinishTimeMs=NaN}function me(We,rt){var Ht=x.getStableBufferTime();if(We.stableBufferTime!==Ht){var kt=ce(Ht,We.bitrates,We.utilities);if(kt.Vp!==We.Vp||kt.gp!==We.gp){var mt=se.getCurrentBufferLevel(rt),Rt=mt+We.placeholderBuffer;Rt-=_,Rt*=kt.Vp/We.Vp,Rt+=_,We.stableBufferTime=Ht,We.Vp=kt.Vp,We.gp=kt.gp,We.placeholderBuffer=Math.max(0,Rt-mt)}}}function Ce(We,rt){return We.Vp*(We.utilities[rt]+We.gp)}function Je(We,rt){for(var Ht=We.bitrates[rt],kt=We.utilities[rt],mt=0,Rt=rt-1;Rt>=0;--Rt)if(We.utilities[Rt]<We.utilities[rt]){var Re=We.bitrates[Rt],te=We.utilities[Rt],Ue=We.Vp*(We.gp+(Ht*te-Re*kt)/(Ht-Re));mt=Math.max(mt,Ue)}return mt}function Te(We){var rt=We.mediaType===N.Z.AUDIO?[N.Z.AUDIO]:W;for(var Ht in rt)W.hasOwnProperty(Ht)&&W[Ht].state===2&&(W[Ht].placeholderBuffer=0)}function je(){for(var We in W)if(W.hasOwnProperty(We)){var rt=W[We];rt.state!==0&&(rt.state=1,oe(rt))}}function ot(We){if(We&&We.chunk&&We.chunk.mediaInfo){var rt=W[We.chunk.mediaInfo.type];if(rt&&rt.state!==0){var Ht=We.chunk.start;isNaN(rt.mostAdvancedSegmentStart)||Ht>rt.mostAdvancedSegmentStart?(rt.mostAdvancedSegmentStart=Ht,rt.lastSegmentWasReplacement=!1):rt.lastSegmentWasReplacement=!0,rt.lastSegmentStart=Ht,rt.lastSegmentDurationS=We.chunk.duration,rt.lastQuality=We.chunk.quality,Ie(rt,We.chunk.mediaInfo.type)}}}function ct(We){if(We&&We.metric===U.Z.HTTP_REQUEST&&We.value&&We.value.type===v.w.MEDIA_SEGMENT_TYPE&&We.value.trace&&We.value.trace.length){var rt=W[We.mediaType];rt&&rt.state!==0&&(rt.lastSegmentRequestTimeMs=We.value.trequest.getTime(),rt.lastSegmentFinishTimeMs=We.value._tfinish.getTime(),Ie(rt,We.mediaType))}}function Ie(We,rt){if(!isNaN(We.lastSegmentStart)&&!isNaN(We.lastSegmentRequestTimeMs)&&!isNaN(We.placeholderBuffer)){if(We.placeholderBuffer*=.99,!isNaN(We.lastSegmentFinishTimeMs)){var Ht=se.getCurrentBufferLevel(rt)+.001*(We.lastSegmentFinishTimeMs-We.lastSegmentRequestTimeMs),kt=Ce(We,We.lastQuality),mt=Math.max(0,kt-Ht);We.placeholderBuffer=Math.min(mt,We.placeholderBuffer)}We.lastSegmentWasReplacement&&!isNaN(We.lastSegmentDurationS)&&(We.placeholderBuffer+=We.lastSegmentDurationS),We.lastSegmentStart=NaN,We.lastSegmentRequestTimeMs=NaN}}function qe(We){if(We){var rt=W[We.mediaType];rt&&rt.state!==0&&(rt.abrQuality=We.newQuality)}}function gt(We){if(We){var rt=W[We.mediaType];if(rt&&rt.state!==0){var Ht,kt=se.getCurrentBufferLevel(We.mediaType);Ht=rt.abrQuality>0?Je(rt,rt.abrQuality):_;var mt=Math.max(0,Ht-kt);rt.placeholderBuffer=Math.min(rt.placeholderBuffer,mt)}}}function Me(){W={}}return j={getMaxIndex:function(We){var rt=(0,C.Z)($).create();if(!(We&&We.hasOwnProperty("getMediaInfo")&&We.hasOwnProperty("getMediaType")&&We.hasOwnProperty("getScheduleController")&&We.hasOwnProperty("getStreamInfo")&&We.hasOwnProperty("getAbrController")&&We.hasOwnProperty("useBufferOccupancyABR")))return rt;var Ht=We.getMediaInfo(),kt=We.getMediaType(),mt=We.getScheduleController(),Rt=We.getStreamInfo(),Re=We.getAbrController(),te=Re.getThroughputHistory(),Ue=Rt?Rt.id:null,O=Rt&&Rt.manifestInfo&&Rt.manifestInfo.isDynamic,M=We.useBufferOccupancyABR();if(rt.reason=rt.reason||{},!M)return rt;mt.setTimeToLoadDelay(0);var q=function(tt){var ft=tt.getMediaType(),Et=W[ft];return Et?Et.state!==0&&me(Et,ft):(Et=function(Tt){var Ct={},hn=Tt.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),Qt=function(Un){return Un.map(function(gr){return Math.log(gr)})}(hn);Qt=Qt.map(function(Un){return Un-Qt[0]+1});var nn=x.getStableBufferTime(),Ot=ce(nn,hn,Qt);return Ot?(Ct.state=1,Ct.bitrates=hn,Ct.utilities=Qt,Ct.stableBufferTime=nn,Ct.Vp=Ot.Vp,Ct.gp=Ot.gp,Ct.lastQuality=0,oe(Ct)):Ct.state=0,Ct}(tt),W[ft]=Et),Et}(We);if(q.state===0)return rt;var K,he=se.getCurrentBufferLevel(kt),de=te.getAverageThroughput(kt,O),Ve=te.getSafeAverageThroughput(kt,O),St=te.getAverageLatency(kt);if(rt.reason.state=q.state,rt.reason.throughput=de,rt.reason.latency=St,isNaN(de))return rt;switch(q.state){case 1:K=Re.getQualityForBitrate(Ht,Ve,Ue,St),rt.quality=K,rt.reason.throughput=Ve,q.placeholderBuffer=Math.max(0,Je(q,K)-he),q.lastQuality=K,!isNaN(q.lastSegmentDurationS)&&he>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(tt,ft){var Et=Date.now();if(isNaN(tt.lastSegmentFinishTimeMs)){if(!isNaN(tt.lastCallTimeMs)){var Tt=.001*(Et-tt.lastCallTimeMs);tt.placeholderBuffer+=Math.max(0,Tt)}}else{var Ct=.001*(Et-tt.lastSegmentFinishTimeMs);tt.placeholderBuffer+=Math.max(0,Ct)}tt.lastCallTimeMs=Et,tt.lastSegmentStart=NaN,tt.lastSegmentRequestTimeMs=NaN,tt.lastSegmentFinishTimeMs=NaN,me(tt,ft)})(q,kt),K=function(tt,ft){for(var Et=tt.bitrates.length,Tt=NaN,Ct=NaN,hn=0;hn<Et;++hn){var Qt=(tt.Vp*(tt.utilities[hn]+tt.gp)-ft)/tt.bitrates[hn];(isNaN(Ct)||Qt>=Ct)&&(Ct=Qt,Tt=hn)}return Tt}(q,he+q.placeholderBuffer);var st=Re.getQualityForBitrate(Ht,Ve,Ue,St);K>q.lastQuality&&K>st&&(K=Math.max(st,q.lastQuality));var at=Math.max(0,he+q.placeholderBuffer-Ce(q,K));at<=q.placeholderBuffer?(q.placeholderBuffer-=at,at=0):(at-=q.placeholderBuffer,q.placeholderBuffer=0,K<Re.getMaxAllowedIndexFor(kt,Ue)?mt.setTimeToLoadDelay(1e3*at):at=0),rt.quality=K,rt.reason.throughput=de,rt.reason.latency=St,rt.reason.bufferLevel=he,rt.reason.placeholderBuffer=q.placeholderBuffer,rt.reason.delay=at,q.lastQuality=K;break;default:Y.debug("BOLA ABR rule invoked in bad state."),rt.quality=Re.getQualityForBitrate(Ht,Ve,Ue,St),rt.reason.state=q.state,rt.reason.throughput=Ve,rt.reason.latency=St,q.state=1,oe(q)}return rt},reset:function(){Me(),X.off(F.Z.BUFFER_EMPTY,Te,j),X.off(F.Z.PLAYBACK_SEEKING,je,j),X.off(F.Z.METRIC_ADDED,ct,j),X.off(F.Z.QUALITY_CHANGE_REQUESTED,qe,j),X.off(F.Z.FRAGMENT_LOADING_ABANDONED,gt,j),X.off(m.Z.MEDIA_FRAGMENT_LOADED,ot,j)}},Y=(0,T.Z)($).getInstance().getLogger(j),Me(),X.on(F.Z.BUFFER_EMPTY,Te,j),X.on(F.Z.PLAYBACK_SEEKING,je,j),X.on(F.Z.METRIC_ADDED,ct,j),X.on(F.Z.QUALITY_CHANGE_REQUESTED,qe,j),X.on(F.Z.FRAGMENT_LOADING_ABANDONED,gt,j),X.on(m.Z.MEDIA_FRAGMENT_LOADED,ot,j),j}A.__dashjs_factory_name="BolaRule",g.Z=y.Z.getClassFactory(A)},895:function(R,g,w){var U=w(5448),C=w(2068),y=w(6398);function v(){var D,m,T=this.context;return D={getMaxIndex:function(F){var N=(0,C.Z)(T).create();if(!F||!F.hasOwnProperty("getDroppedFramesHistory"))return N;var _=F.getDroppedFramesHistory(),A=F.getStreamInfo().id;if(_){var b=_.getFrameHistory(A);if(!b||b.length===0)return N;for(var j=0,Y=0,W=C.Z.NO_CHANGE,$=1;$<b.length;$++)if(b[$]&&(j=b[$].droppedVideoFrames,(Y=b[$].totalVideoFrames)>375&&j/Y>.15)){W=$-1,m.debug("index: "+W+" Dropped Frames: "+j+" Total Frames: "+Y);break}return(0,C.Z)(T).create(W,{droppedFrames:j})}return N}},m=(0,y.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="DroppedFramesRule",g.Z=U.Z.getClassFactory(v)},6535:function(R,g,w){var U=w(5595),C=w(8512),y=w(5448),v=w(6398),D=w(2068),m=w(3393),T=w(3860),F=w(8825);function N(_){_=_||{};var A,b,j,Y=this.context,W=(0,U.Z)(Y).getInstance(),$=_.dashMetrics;function se(){(j={})[m.Z.VIDEO]={ignoreCount:2},j[m.Z.AUDIO]={ignoreCount:2}}function x(){se()}function X(ce){isNaN(ce.startTime)||ce.mediaType!==m.Z.AUDIO&&ce.mediaType!==m.Z.VIDEO||j[ce.mediaType].ignoreCount>0&&j[ce.mediaType].ignoreCount--}return A={getMaxIndex:function(ce){var oe=(0,D.Z)(Y).create();if(!ce||!ce.hasOwnProperty("getMediaType"))return oe;(function(){if(!$||!$.hasOwnProperty("getCurrentBufferLevel")||!$.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var me=ce.getMediaType(),Ce=$.getCurrentBufferState(me),Je=ce.getRepresentationInfo().fragmentDuration,Te=ce.getStreamInfo(),je=Te?Te.id:null,ot=ce.getScheduleController(),ct=Te&&Te.manifestInfo&&Te.manifestInfo.isDynamic;if(function(kt,mt){return!kt&&j[mt].ignoreCount>0}(ot.getPlaybackController().getLowLatencyModeEnabled(),me)||!Je)return oe;if(Ce&&Ce.state===T.Z.BUFFER_EMPTY)b.debug("["+me+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var Ie=ce.getMediaInfo(),qe=ce.getAbrController(),gt=qe.getThroughputHistory(),Me=$.getCurrentBufferLevel(me),We=gt.getAverageThroughput(me,ct),rt=gt.getAverageLatency(me),Ht=We*(Me/Je)*.5;oe.quality=qe.getQualityForBitrate(Ie,Ht,je,rt),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){se(),W.off(F.Z.PLAYBACK_SEEKING,x,A),W.off(C.Z.BYTES_APPENDED_END_FRAGMENT,X,A)}},b=(0,v.Z)(Y).getInstance().getLogger(A),se(),W.on(F.Z.PLAYBACK_SEEKING,x,A),W.on(C.Z.BYTES_APPENDED_END_FRAGMENT,X,A),A}N.__dashjs_factory_name="InsufficientBufferRule",g.Z=y.Z.getClassFactory(N)},1914:function(R,g,w){var U=w(3860),C=w(2068),y=w(5448),v=w(7855),D=w(5595),m=w(8512),T=w(6398),F=w(3393);function N(_){_=_||{};var A,b,j,Y,W=this.context,$=_.dashMetrics,se=(0,D.Z)(W).getInstance();function x(je){je.placeholderBuffer=0,je.mostAdvancedSegmentStart=NaN,je.lastSegmentWasReplacement=!1,je.lastSegmentStart=NaN,je.lastSegmentDurationS=NaN,je.lastSegmentRequestTimeMs=NaN,je.lastSegmentFinishTimeMs=NaN,je.lastSegmentUrl=""}function X(){for(var je in b)if(b.hasOwnProperty(je)){var ot=b[je];ot.state!==0&&(ot.state=1,x(ot))}}function ce(je){if(je&&je.chunk&&je.chunk.mediaInfo){var ot=b[je.chunk.mediaInfo.type],ct=j[je.chunk.mediaInfo.type];if(ot&&ot.state!==0){var Ie=je.chunk.start;isNaN(ot.mostAdvancedSegmentStart)||Ie>ot.mostAdvancedSegmentStart?(ot.mostAdvancedSegmentStart=Ie,ot.lastSegmentWasReplacement=!1):ot.lastSegmentWasReplacement=!0,ot.lastSegmentStart=Ie,ot.lastSegmentDurationS=je.chunk.duration,ot.lastQuality=je.chunk.quality,me(ot,ct)}}}function oe(je){if(je&&je.metric===U.Z.HTTP_REQUEST&&je.value&&je.value.type===v.w.MEDIA_SEGMENT_TYPE&&je.value.trace&&je.value.trace.length){var ot=b[je.mediaType],ct=j[je.mediaType];ot&&ot.state!==0&&(ot.lastSegmentRequestTimeMs=je.value.trequest.getTime(),ot.lastSegmentFinishTimeMs=je.value._tfinish.getTime(),me(ot,ct))}}function me(je,ot){isNaN(je.lastSegmentStart)||isNaN(je.lastSegmentRequestTimeMs)||(ot.segment_request_start_s=.001*je.lastSegmentRequestTimeMs,ot.segment_download_finish_s=.001*je.lastSegmentFinishTimeMs,je.lastSegmentStart=NaN,je.lastSegmentRequestTimeMs=NaN)}function Ce(je){if(je&&je.mediaType){var ot=b[je.mediaType];ot&&ot.state!==0&&(ot.abrQuality=je.newQuality)}}function Je(je,ot){if(je.length!==ot.length)return-1;for(var ct=0,Ie=0;Ie<je.length;Ie++)ct+=je[Ie]*ot[Ie];return ct}function Te(){b={},j={}}return A={getMaxIndex:function(je){var ot,ct=(0,C.Z)(W).create(),Ie=Math.pow(4,.99),qe=Math.max(Math.pow(4,1),Ie*Math.sqrt(4)),gt=je.getMediaInfo(),Me=je.getMediaType(),We=gt.bitrateList.map(function(Ot){return Ot.bandwidth}),rt=We.length,Ht=je.getScheduleController(),kt=je.getStreamInfo(),mt=je.getAbrController(),Rt=mt.getThroughputHistory(),Re=kt&&kt.manifestInfo&&kt.manifestInfo.isDynamic,te=je.useL2AABR(),Ue=$.getCurrentBufferLevel(Me,!0),O=Rt.getSafeAverageThroughput(Me,Re),M=Rt.getAverageThroughput(Me,Re),q=Rt.getAverageLatency(Me),K=je.getVideoModel().getPlaybackRate();if(!(je&&je.hasOwnProperty("getMediaInfo")&&je.hasOwnProperty("getMediaType")&&je.hasOwnProperty("getScheduleController")&&je.hasOwnProperty("getStreamInfo")&&je.hasOwnProperty("getAbrController")&&je.hasOwnProperty("useL2AABR"))||(ct.reason=ct.reason||{},!te||Me===F.Z.AUDIO))return ct;Ht.setTimeToLoadDelay(0);var he=function(Ot){var Un=Ot.getMediaType(),gr=b[Un];return gr||(gr=function(Or){var dr={},ei=Or.getMediaInfo(),Ji=ei.bitrateList.map(function(Lr){return Lr.bandwidth/1e3});return dr.state=1,dr.bitrates=Ji,dr.lastQuality=0,function(Lr){Lr&&Lr.type&&(j[Lr.type]={},j[Lr.type].w=[],j[Lr.type].prev_w=[],j[Lr.type].Q=0,j[Lr.type].segment_request_start_s=0,j[Lr.type].segment_download_finish_s=0,j[Lr.type].B_target=1.5)}(ei),x(dr),dr}(Ot),b[Un]=gr),gr}(je);if(he.state===0)return ct;var de=j[Me];if(!de||(ct.reason.state=he.state,ct.reason.throughput=M,ct.reason.latency=q,isNaN(M)))return ct;switch(he.state){case 1:if(ot=mt.getQualityForBitrate(gt,O,kt.id,q),ct.quality=ot,ct.reason.throughput=O,he.lastQuality=ot,!isNaN(he.lastSegmentDurationS)&&Ue>=de.B_target){he.state=2,de.Q=Ie;for(var Ve=0;Ve<rt;++Ve)Ve===he.lastQuality?de.prev_w[Ve]=1:de.prev_w[Ve]=0}break;case 2:var St=[],st=$.getCurrentHttpRequest(Me).trace.reduce(function(Ot,Un){return Ot+Un.d},0),at=$.getCurrentHttpRequest(Me).trace.reduce(function(Ot,Un){return Ot+Un.b[0]},0),tt=Math.round(8*at/st),ft=$.getCurrentHttpRequest(Me);if(tt<1&&(tt=1),ft.url===he.lastSegmentUrl||ft.type===v.w.INIT_SEGMENT_TYPE)ot=he.lastQuality;else{for(var Et=he.lastSegmentDurationS,Tt=1,Ct=0;Ct<rt;++Ct)We[Ct]=We[Ct]/1e3,K*We[Ct]>tt&&(Tt=-1),de.w[Ct]=de.prev_w[Ct]+Tt*(Et/(2*qe))*((de.Q+Ie)*(K*We[Ct]/tt));de.w=function(Ot){for(var Un=Ot.length,gr=!1,Or=[],dr=0;dr<Un;++dr)Or[dr]=Ot[dr];for(var ei=Ot.sort(function(zi,to){return to-zi}),Ji=0,Lr=0,eo=[],_i=0;_i<Un-1;++_i)if((Lr=((Ji+=ei[_i])-1)/(_i+1))>=ei[_i+1]){gr=!0;break}gr||(Lr=(Ji+ei[Un-1]-1)/Un);for(var Mi=0;Mi<Un;++Mi)eo[Mi]=Math.max(Or[Mi]-Lr,0);return eo}(de.w);for(var hn=0;hn<rt;++hn)St[hn]=de.w[hn]-de.prev_w[hn],de.prev_w[hn]=de.w[hn];de.Q=Math.max(0,de.Q-Et+Et*K*((Je(We,de.prev_w)+Je(We,St))/tt));for(var Qt=[],nn=0;nn<rt;++nn)Qt[nn]=Math.abs(We[nn]-Je(de.w,We));(ot=Qt.indexOf(Math.min.apply(Math,Qt)))>he.lastQuality&&We[he.lastQuality+1]<=tt&&(ot=he.lastQuality+1),We[ot]>=tt&&(de.Q=2*Math.max(Ie,de.Q)),he.lastSegmentUrl=ft.url}ct.quality=ot,ct.reason.throughput=M,ct.reason.latency=q,ct.reason.bufferLevel=Ue,he.lastQuality=ct.quality;break;default:Y.debug("L2A ABR rule invoked in bad state."),ct.quality=mt.getQualityForBitrate(gt,O,kt.id,q),ct.reason.state=he.state,ct.reason.throughput=O,ct.reason.latency=q,he.state=1,x(he)}return ct},reset:function(){Te(),se.off(m.Z.PLAYBACK_SEEKING,X,A),se.off(m.Z.MEDIA_FRAGMENT_LOADED,ce,A),se.off(m.Z.METRIC_ADDED,oe,A),se.off(m.Z.QUALITY_CHANGE_REQUESTED,Ce,A)}},Y=(0,T.Z)(W).getInstance().getLogger(A),Te(),se.on(m.Z.PLAYBACK_SEEKING,X,A),se.on(m.Z.MEDIA_FRAGMENT_LOADED,ce,A),se.on(m.Z.METRIC_ADDED,oe,A),se.on(m.Z.QUALITY_CHANGE_REQUESTED,Ce,A),A}N.__dashjs_factory_name="L2ARule",g.Z=y.Z.getClassFactory(N)},6070:function(R,g,w){var U=w(5448),C=w(6398),y=w(2068);function v(){var D,m,T=this.context;return D={getMaxIndex:function(F){for(var N=F?F.getSwitchHistory():null,_=N?N.getSwitchRequests():[],A=0,b=0,j=0,Y=(0,y.Z)(T).create(),W=0;W<_.length;W++)if(_[W]!==void 0&&(A+=_[W].drops,b+=_[W].noDrops,j+=_[W].dropSize,A+b>=6&&A/b>.075)){Y.quality=W>0&&_[W].drops>0?W-1:W,Y.reason={index:Y.quality,drops:A,noDrops:b,dropSize:j},m.debug("Switch history rule index: "+Y.quality+" samples: "+(A+b)+" drops: "+A);break}return Y}},m=(0,C.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="SwitchHistoryRule",g.Z=U.Z.getClassFactory(v)},5628:function(R,g,w){var U=w(5448),C=w(2068),y=w(3393),v=w(3860);function D(m){m=m||{};var T=this.context,F=m.dashMetrics;return{getMaxIndex:function(N){var _=(0,C.Z)(T).create();if(!(N&&N.hasOwnProperty("getMediaInfo")&&N.hasOwnProperty("getMediaType")&&N.hasOwnProperty("useBufferOccupancyABR")&&N.hasOwnProperty("getAbrController")&&N.hasOwnProperty("getScheduleController")))return _;(function(){if(!F||!F.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var A=N.getMediaInfo(),b=N.getMediaType(),j=F.getCurrentBufferState(b),Y=N.getScheduleController(),W=N.getAbrController(),$=N.getStreamInfo(),se=$?$.id:null,x=$&&$.manifestInfo?$.manifestInfo.isDynamic:null,X=W.getThroughputHistory(),ce=X.getSafeAverageThroughput(b,x),oe=X.getAverageLatency(b),me=N.useBufferOccupancyABR();return isNaN(ce)||!j||me||W.getAbandonmentStateFor(se,b)!==v.Z.ABANDON_LOAD&&(j.state===v.Z.BUFFER_LOADED||x)&&(_.quality=W.getQualityForBitrate(A,ce,se,oe),Y.setTimeToLoadDelay(0),_.reason={throughput:ce,latency:oe}),_},reset:function(){}}}D.__dashjs_factory_name="ThroughputRule",g.Z=U.Z.getClassFactory(D)},4722:function(R,g,w){var U=w(5448),C=w(6398);function y(){var v,D,m,T,F,N,_,A,b,j=this.context;function Y(){m=null,T=1,F=100,N=0,_=null,A=null,b="dynamic_weight_selection"}function W(){var ce=0;if(m)for(var oe=0;oe<m.length;oe++){var me=m[oe];me.state.throughput>ce&&(ce=me.state.throughput)}return ce}function $(ce,oe,me){var Ce=ce.map(function(Je,Te){return me[Te]*Math.pow(Je-oe[Te],2)}).reduce(function(Je,Te){return Je+Te});return(Ce<0?-1:1)*Math.sqrt(Math.abs(Ce))}function se(ce,oe){return $([ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function x(ce,oe,me){for(var Ce=0;Ce<oe.length;Ce++){var Je=oe[Ce],Te=se(Je,ce);X(Je,me,Math.exp(-1*Math.pow(Te,2)/(2*Math.pow(.1,2))))}}function X(ce,oe,me){var Ce=ce.state,Je=[.01,.01,.01,.01];Ce.throughput=Ce.throughput+(oe[0]-Ce.throughput)*Je[0]*me,Ce.latency=Ce.latency+(oe[1]-Ce.latency)*Je[1]*me,Ce.rebuffer=Ce.rebuffer+(oe[2]-Ce.rebuffer)*Je[2]*me,Ce.switch=Ce.switch+(oe[3]-Ce.switch)*Je[3]*me}return v={getNextQuality:function(ce,oe,me,Ce,Je,Te,je){var ot=me,ct=Ce,Ie=oe,qe=function(de){if(!m){m=[];var Ve=de.bitrateList,St=[];N=Ve[0].bandwidth,Ve.forEach(function(ft){St.push(ft.bandwidth),ft.bandwidth<N&&(N=ft.bandwidth)}),tt=St.map(function(ft){return Math.pow(ft,2)}).reduce(function(ft,Et){return ft+Et}),T=Math.sqrt(tt);for(var st=0;st<Ve.length;st++){var at={qualityIndex:st,bitrate:Ve[st].bandwidth,state:{throughput:Ve[st].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(at)}A=function(ft){var Et=[],Tt=function(Pu){for(var tn=[],sn=0;sn<Pu;sn++){var an=[Math.random()*W(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(ft.length,2));Et.push(Tt[0]);for(var Ct=[1,1,1,1],hn=1;hn<ft.length;hn++){for(var Qt=null,nn=null,Ot=0;Ot<Tt.length;Ot++){for(var Un=Tt[Ot],gr=null,Or=0;Or<Et.length;Or++){var dr=$(Un,Et[Or],Ct);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&(Qt=Un,nn=gr)}Et.push(Qt)}for(var ei=null,Ji=null,Lr=0;Lr<Et.length;Lr++){for(var eo=0,_i=0;_i<Et.length;_i++)Lr!==_i&&(eo+=$(Et[Lr],Et[_i],Ct));(ei===null||eo>ei)&&(ei=eo,Ji=Lr)}var Mi=[];for(Mi.push(Et[Ji]),Et.splice(Ji,1);Et.length>0;){for(var zi=null,to=null,Ti=0;Ti<Et.length;Ti++){var Qn=$(Mi[0],Et[Ti],Ct);(zi===null||Qn<zi)&&(zi=Qn,to=Ti)}Mi.push(Et[to]),Et.splice(to,1)}return Mi}(m)}var tt;return m}(ce),gt=oe/T;gt>1&&(gt=W()),me/=F,D.debug("getNextQuality called throughput:".concat(gt," latency:").concat(me," bufferSize:").concat(Ce," currentQualityIndex:").concat(Te," playbackRate:").concat(Je));var Me=qe[Te],We=Me.bitrate*je.getSegmentDuration()/Ie,rt=Math.max(0,We-ct);if(ct-We<je.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(Me.bitrate," downloadTime=").concat(We," currentBuffer=").concat(ct," rebuffer=").concat(rt)),function(de,Ve){var St=0,st=de;if(m)for(var at=0;at<m.length;at++){var tt=m[at];tt.bitrate<de.bitrate&&tt.bitrate>St&&Ve>tt.bitrate&&(St=tt.bitrate,st=tt)}return st}(Me,Ie).qualityIndex;switch(b){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){_=function(Ve,St){for(var st=[],at=Math.sqrt(2/Ve),tt=0;tt<4;tt++)st.push(Math.random()*at);return _=st}(de.length)})(qe);break;default:(function(de,Ve,St,st,at,tt,ft){_||(_=A[A.length-1]);var Et=de.findWeightVector(Ve,St,st,at,tt,ft);Et!==null&&Et!==-1&&(_=Et)})(je,qe,ot,ct,rt,Ie,Je)}for(var Ht=null,kt=null,mt=null,Rt=0;Rt<qe.length;Rt++){var Re=qe[Rt],te=Re.state,Ue=[te.throughput,te.latency,te.rebuffer,te.switch],O=_.slice(),M=je.getNextBufferWithBitrate(Re.bitrate,ct,Ie),q=M<je.getMinBuffer();q&&D.debug("Buffer is low for bitrate=".concat(Re.bitrate," downloadTime=").concat(We," currentBuffer=").concat(ct," nextBuffer=").concat(M)),(Re.bitrate>oe-1e4||q)&&Re.bitrate!==N&&(O[0]=100);var K=$(Ue,[gt,0,0,0],O);(Ht===null||K<Ht)&&(Ht=K,kt=Re.qualityIndex,mt=Re)}var he=Math.abs(Me.bitrate-mt.bitrate)/T;return x(Me,qe,[gt,me,rt,he]),x(mt,qe,[gt,0,0,he]),kt},reset:function(){Y()}},D=(0,C.Z)(j).getInstance().getLogger(v),Y(),v}y.__dashjs_factory_name="LearningAbrController",g.Z=U.Z.getClassFactory(y)},5317:function(R,g,w){var U=w(5448),C=w(2298);function y(){var v,D,m,T,F;function N(){D=null,m=null,T=null,F=null}function _(b,j,Y,W){var $=new C.Z;return $.type=b,$.weights.bitrateReward=j||1,$.weights.bitrateSwitchPenalty=1,$.weights.rebufferPenalty=Y||1e3,$.weights.latencyPenalty=[],$.weights.latencyPenalty.push({threshold:1.1,penalty:.05*W}),$.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),$.weights.playbackSpeedPenalty=W||200,$}function A(b,j,Y,W,$){$.bitrateWSum+=$.weights.bitrateReward*b,$.lastBitrate&&($.bitrateSwitchWSum+=$.weights.bitrateSwitchPenalty*Math.abs(b-$.lastBitrate)),$.lastBitrate=b,$.rebufferWSum+=$.weights.rebufferPenalty*j;for(var se=0;se<$.weights.latencyPenalty.length;se++){var x=$.weights.latencyPenalty[se];if(Y<=x.threshold){$.latencyWSum+=x.penalty*Y;break}}$.playbackSpeedWSum+=$.weights.playbackSpeedPenalty*Math.abs(1-W),$.totalQoe=$.bitrateWSum-$.bitrateSwitchWSum-$.rebufferWSum-$.latencyWSum-$.playbackSpeedWSum}return v={setupPerSegmentQoe:function(b,j,Y){D=_("segment",b,j,Y),m=b,T=j,F=Y},logSegmentMetrics:function(b,j,Y,W){D&&A(b,j,Y,W,D)},getPerSegmentQoe:function(){return D},calculateSingleUseQoe:function(b,j,Y,W){var $=null;return m&&T&&F&&($=_("segment",m,T,F)),$?(A(b,j,Y,W,$),$.totalQoe):0},reset:function(){N()}},N(),v}y.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=U.Z.getClassFactory(y)},5435:function(R,g,w){var U=w(6398),C=w(5448),y=w(4722),v=w(5317),D=w(2068),m=w(3860),T=w(6523),F=w(3393);function N(_){var A,b,j,Y,W=(_=_||{}).dashMetrics,$=this.context;return b={getMaxIndex:function(se){try{var x=(0,D.Z)($).create(),X=se.getMediaInfo().type,ce=se.getAbrController(),oe=se.getStreamInfo(),me=ce.getQualityFor(X,oe.id),Ce=se.getMediaInfo(),Je=W.getCurrentBufferState(X),Te=se.getScheduleController(),je=W.getCurrentBufferLevel(X,!0),ot=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,ct=Te.getPlaybackController(),Ie=ct.getCurrentLiveLatency();if(!se.useLoLPABR()||X===F.Z.AUDIO)return x;Ie||(Ie=0);var qe=ct.getPlaybackRate(),gt=ce.getThroughputHistory().getSafeAverageThroughput(X,ot);if(A.debug("Throughput ".concat(Math.round(gt)," kbps")),isNaN(gt)||!Je||ce.getAbandonmentStateFor(oe.id,X)===m.Z.ABANDON_LOAD)return x;for(var Me=Ce.bitrateList,We=se.getRepresentationInfo().fragmentDuration,rt=Me[0].bandwidth/1e3,Ht=Me[Me.length-1].bandwidth/1e3,kt=0;kt<Me.length;kt++){var mt=Me[kt].bandwidth/1e3;mt>Ht?Ht=mt:mt<rt&&(rt=mt)}var Rt=Me[me].bandwidth/1e3,Re=W.getCurrentHttpRequest(X,!0),te=(Re.tresponse.getTime()-Re.trequest.getTime())/1e3,Ue=te>We?te-We:0;Y.setupPerSegmentQoe(We,Ht,rt),Y.logSegmentMetrics(Rt,Ue,Ie,qe);var O=(0,T.Z)($).create({targetLatency:1.5,bufferMin:.3,segmentDuration:We,qoeEvaluator:Y});return x.quality=j.getNextQuality(Ce,1e3*gt,Ie,je,qe,me,O),x.reason={throughput:gt,latency:Ie},x.priority=D.Z.PRIORITY.STRONG,Te.setTimeToLoadDelay(0),x.quality!==me&&A.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",x.quality,"Average throughput",Math.round(gt),"kbps"),x}catch(M){throw M}},reset:function(){j.reset(),Y.reset()}},A=(0,U.Z)($).getInstance().getLogger(b),j=(0,y.Z)($).create(),Y=(0,v.Z)($).create(),b}N.__dashjs_factory_name="LoLPRule",g.Z=C.Z.getClassFactory(N)},6523:function(R,g,w){var U=w(5448);function C(y){var v,D,m,T,F=y.targetLatency,N=y.bufferMin,_=y.segmentDuration,A=y.qoeEvaluator;function b(){return _}function j(Y,W){var $=b();return W>$?Y-$:Y+$-W}return v={getMinBuffer:function(){return N},getSegmentDuration:b,getNextBufferWithBitrate:function(Y,W,$){return j(W,Y*_/$)},getNextBuffer:j,findWeightVector:function(Y,W,$,se,x,X){var ce=null,oe=null,me=null,Ce=Math.abs(W-m);return Y.forEach(function(Je){D.forEach(function(Te){Te[0];var je=Te[1],ot=Te[2],ct=(Te[3],Je.bitrate*_/x),Ie=j($,ct),qe=(ot===0?10:1/ot)*Math.max(1e-5,ct-Ie),gt=(je===0?10:1/je)*Je.state.latency,Me=A.calculateSingleUseQoe(Je.bitrate,qe,gt,X);(ce===null||Me>ce)&&function(We,rt,Ht){return!(We>F+Ht)&&rt>=N}(W,Ie,Ce)&&(ce=Me,oe=Te,me=Je.bitrate)})}),oe===null&&me===null&&(oe=-1),m=W,oe}},D=function Y(W,$,se){if(se===$)return W;for(var x=W.length,X=0;X<x;X++)for(var ce=W.shift(),oe=0;oe<T.length;oe++)W.push(ce.concat(T[oe]));return Y(W,$,se+1)}((T=[.2,.4,.6,.8,1]).map(function(Y){return[Y]}),4,1),m=0,v}C.__dashjs_factory_name="LoLpWeightSelector",g.Z=U.Z.getClassFactory(C)},2298:function(R,g){g.Z=function w(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(R,g,w){w.d(g,{Y:function(){return A}});var U=w(3393),C=w(1553),y=w(5448),v=w(2128),D=w(2594),m=w(7387),T=w(7417),F=w(9032),N=w(9326),_=w(7802),A=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function b(j){var Y,W,$,se,x,X,ce,oe,me=this.context,Ce=j.adapter,Je=j.baseURLController,Te=j.streamInfo,je=j.timelineConverter,ot=j.debug,ct=j.eventBus,Ie=j.events,qe=j.dashConstants,gt=(0,D.Z)(me).getInstance();function Me(rt,Ht){var kt=new v.Z;kt.id=rt.id,kt.bitrate=rt.bandwidth,kt.width=rt.width,kt.height=rt.height,kt.tilesHor=1,kt.tilesVert=1,rt.essentialProperties&&rt.essentialProperties.forEach(function(mt){if(A.indexOf(mt.schemeIdUri)>=0&&mt.value){var Rt=mt.value.split("x");Rt.length!==2||isNaN(Rt[0])||isNaN(Rt[1])||(kt.tilesHor=parseInt(Rt[0],10),kt.tilesVert=parseInt(Rt[1],10))}}),Ht?X.updateSegmentData(rt).then(function(mt){(function(Rt,Re,te){var Ue=[],O=function(M,q){var K,he,de,Ve,St=[],st=0;for(K=0,he=M.segments.length;K<he;K++)de=M.segments[K],(Ve=(0,m.TJ)(je,Ce.getIsDynamic(),q,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,st))&&(St.push(Ve),Ve=null,st++);return St}(te,Re);Re.segments=O,Rt.segmentDuration=Re.segments[0].duration,Rt.readThumbnail=function(M,q){var K=null;Ue.some(function(he){if(he.start<=M&&he.end>M)return K=he.url,!0}),K?q(K):Re.segments.some(function(he){if(he.mediaStartTime<=M&&he.mediaStartTime+he.duration>M){var de=Je.resolve(Re.path);return ce.load({method:"get",url:de.url,request:{range:he.mediaRange,responseType:"arraybuffer"},onload:function(Ve){var St=oe.getSamplesInfo(Ve.target.response),st=new Blob([Ve.target.response.slice(St.sampleList[0].offset,St.sampleList[0].offset+St.sampleList[0].size)],{type:"image/jpeg"}),at=window.URL.createObjectURL(st);Ue.push({start:he.mediaStartTime,end:he.mediaStartTime+he.duration,url:at}),q&&q(at)}}),!0}})}})(kt,rt,mt)}):(kt.startNumber=rt.startNumber,kt.segmentDuration=rt.segmentDuration,kt.timescale=rt.timescale,kt.templateUrl=function(mt){var Rt=gt.isRelative(mt.media)?gt.resolve(mt.media,Je.resolve(mt.path).url):mt.media;return Rt?(0,m.Aj)(Rt,mt.id):""}(rt)),kt.tilesHor>0&&kt.tilesVert>0&&(kt.widthPerTile=kt.width/kt.tilesHor,kt.heightPerTile=kt.height/kt.tilesVert,W.push(kt))}function We(){W=[],se=-1,x=null}return Y={getTracks:function(){return W},addTracks:function(){if(Te&&Ce&&(x=Ce.getMediaInfoForType(Te,U.Z.IMAGE))){var rt=Ce.getVoRepresentations(x);rt&&rt.length>0&&rt.forEach(function(Ht){(Ht.segmentInfoType===C.Z.SEGMENT_TEMPLATE&&Ht.segmentDuration>0&&Ht.media||Ht.segmentInfoType===C.Z.SEGMENT_TIMELINE)&&Me(Ht),Ht.segmentInfoType===C.Z.SEGMENT_BASE&&Me(Ht,!0)}),W.length>0&&W.sort(function(Ht,kt){return Ht.bitrate-kt.bitrate})}},reset:We,setTrackByIndex:function(rt){W&&W.length!==0&&(rt>=W.length&&(rt=W.length-1),se=rt)},getCurrentTrack:function(){return se<0?null:W[se]},getCurrentTrackIndex:function(){return se},getThumbnailRequestForTime:function(rt){for(var Ht,kt=Ce.getVoRepresentations(x),mt=0;mt<kt.length;mt++)if(W[se].id===kt[mt].id){Ht=kt[mt];break}return $.getSegmentRequestForTime(x,Ht,rt)}},We(),ce=(0,F.Z)(me).create({}),oe=(0,T.Z)(me).getInstance(),X=(0,_.Z)(me).create({events:Ie,eventBus:ct,streamInfo:Te,timelineConverter:je,dashConstants:qe,dashMetrics:j.dashMetrics,segmentBaseController:j.segmentBaseController,type:U.Z.IMAGE}),($=(0,N.Z)(me).create({streamInfo:Te,type:U.Z.IMAGE,timelineConverter:je,segmentsController:X,baseURLController:Je,debug:ot,eventBus:ct,events:Ie,dashConstants:qe,urlUtils:gt})).initialize(!!Ce&&Ce.getIsDynamic()),Y}b.__dashjs_factory_name="ThumbnailTracks",g.Z=y.Z.getClassFactory(b)},7417:function(R,g,w){var U=w(6398),C=w(8260),y=w(5448),v=w(6934),D=w(9597);function m(){var T,F,N=this.context;function _(j){if(!j)return null;j.fileStart===void 0&&(j.fileStart=0);var Y=v.parseBuffer(j),W=(0,C.Z)(N).create();return W.setData(Y),W}function A(j,Y){return j[Y+3]>>>0|j[Y+2]<<8>>>0|j[Y+1]<<16>>>0|j[Y]<<24>>>0}function b(j,Y){return String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y])}return F={parse:_,findLastTopIsoBoxCompleted:function(j,Y,W){if(W===void 0&&(W=0),!Y||W+8>=Y.byteLength)return new D.Z(0,!1);for(var $,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,x=0;W<se.byteLength;){var X=A(se,W),ce=b(se,W+4);if(X===0)break;W+X<=se.byteLength&&(j.indexOf(ce)>=0?$=new D.Z(W,!0,X):x=W+X),W+=X}return $||new D.Z(x,!1)},getMediaTimescaleFromMoov:function(j){var Y=_(j),W=Y?Y.getBox("mdhd"):void 0;return W?W.timescale:NaN},getSamplesInfo:function(j){if(!j||j.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Y,W,$,se,x,X,ce,oe,me,Ce,Je,Te,je,ot,ct,Ie,qe=_(j),gt=qe.getBoxes("moof"),Me=qe.getBoxes("mfhd");ct=qe.getBoxes("moof").length,ot=Me[Me.length-1].sequence_number,W=0,x=[];var We=-1,rt=-1;for(Ce=0;Ce<gt.length;Ce++){var Ht=gt[Ce],kt=Ht.getChildBoxes("traf");for(oe=0;oe<kt.length;oe++){var mt=kt[oe],Rt=mt.getChildBox("tfhd"),Re=mt.getChildBox("tfdt");se=Re.baseMediaDecodeTime;var te=mt.getChildBoxes("trun"),Ue=mt.getChildBoxes("subs");for(me=0;me<te.length;me++){var O=te[me];for(W=O.sample_count,je=(Rt.base_data_offset||0)+(O.data_offset||0),ce=0;ce<W;ce++){Y=(X=O.samples[ce]).sample_duration!==void 0?X.sample_duration:Rt.default_sample_duration,$=X.sample_size!==void 0?X.sample_size:Rt.default_sample_size;var M={dts:se,cts:se+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:Y,offset:Ht.offset+je,size:$,subSizes:[$]};if(Ue)for(Je=0;Je<Ue.length;Je++){var q=Ue[Je];if(We<q.entry_count-1&&ce>rt&&(We++,rt+=q.entries[We].sample_delta),ce==rt){M.subSizes=[];var K=q.entries[We];for(Te=0;Te<K.subsample_count;Te++)M.subSizes.push(K.subsamples[Te].subsample_size)}}x.push(M),je+=$,se+=Y}}Ie=se-Re.baseMediaDecodeTime}}return{sampleList:x,lastSequenceNumber:ot,totalDuration:Ie,numSequences:ct}},findInitRange:function(j){var Y=null,W=_(j);if(!W)return Y;var $=W.getBox("ftyp"),se=W.getBox("moov");return T.debug("Searching for initialization."),se&&se.isComplete&&(Y=($?$.offset:se.offset)+"-"+(se.offset+se.size-1),T.debug("Found the initialization.  Range: "+Y)),Y},parsePayload:function(j,Y,W){if(W===void 0&&(W=0),!Y||W+8>=Y.byteLength)return new D.Z(0,!1);for(var $,se=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,x=0;W<se.byteLength;){var X=A(se,W),ce=b(se,W+4);if(X===0)break;W+X<=se.byteLength&&(j.indexOf(ce)>=0?$=new D.Z(W,!0,X,ce):x=W+X),W+=X}return $||new D.Z(x,!1)}},T=(0,U.Z)(N).getInstance().getLogger(F),F}m.__dashjs_factory_name="BoxParser",g.Z=y.Z.getSingletonFactory(m)},1715:function(R,g,w){w.d(g,{B:function(){return D}});var U=w(5448),C=w(7803),y=w(3393),v=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var T="ManagedMediaSource"in window,F="WebKitMediaSource"in window,N="MediaSource"in window;return T||F||N}function m(){var T,F,N;return T={setConfig:function(_){_&&_.settings&&(F=_.settings)},supportsMediaSource:D,supportsEncryptedMedia:function(){return N},supportsCodec:function(_,A){return A!==y.Z.AUDIO&&A!==y.Z.VIDEO?Promise.resolve(!0):function(b,j){return F.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(b.codec&&j===y.Z.AUDIO||j===y.Z.VIDEO&&b.codec&&b.width&&b.height&&b.bitrate&&b.framerate)}(_,A)?function(b,j){return new Promise(function(Y){if(b&&b.codec){var W={type:"media-source"};W[j]={},W[j].contentType=b.codec,W[j].width=b.width,W[j].height=b.height,W[j].bitrate=parseInt(b.bitrate),W[j].framerate=parseFloat(b.framerate),navigator.mediaCapabilities.decodingInfo(W).then(function($){Y($.supported)}).catch(function(){Y(!1)})}else Y(!1)})}(_,A):function(b){return new Promise(function(j){if(b&&b.codec){var Y=b.codec;b.width&&b.height&&(Y+=';width="'+b.width+'";height="'+b.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Y)||"MediaSource"in window&&MediaSource.isTypeSupported(Y)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Y)?j(!0):j(!1)}else j(!1)})}(_)},setEncryptedMediaSupported:function(_){N=_},supportsEssentialProperty:function(_){try{return C.Y.indexOf(_.schemeIdUri)!==-1||y.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(A){return!0}},codecRootCompatibleWithCodec:function(_,A){for(var b,j=_.split(".")[0],Y=A.indexOf(j)===0,W=0;W<v.length;W++)if(v[W].codec===j){b=v[W];break}return b?Y||b.compatibleCodecs.some(function($){return A.indexOf($)===0}):Y}},N=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=U.Z.getSingletonFactory(m)},2295:function(R,g,w){var U=w(5448),C=w(3106);function y(){return{customTimeRangeArray:[],length:0,add:function(v,D){var m;for(m=0;m<this.customTimeRangeArray.length&&v>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:v,end:D}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(v,D){for(var m=0;m<this.customTimeRangeArray.length;m++)if(v<=this.customTimeRangeArray[m].start&&D>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(v>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:D,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=v;break}v>this.customTimeRangeArray[m].start&&v<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=v:D>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=D)}this.length=this.customTimeRangeArray.length},mergeRanges:function(v,D){var m=this.customTimeRangeArray[v],T=this.customTimeRangeArray[D];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(v,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(D,1),!0)},start:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].start},end:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].end}}}y.__dashjs_factory_name="CustomTimeRanges",g.Z=U.Z.getClassFactory(y)},5:function(R,g,w){var U=w(5448);function C(){var y,v=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,F=function($,se){try{return new window.URL($,se).toString()}catch(x){return $}},N=function($,se){var x=_;if(!se||!j($))return $;Y($)&&(x=A),W($)&&(x=b);var X=x(se),ce=X.charAt(X.length-1)!=="/"&&$.charAt(0)!=="/"?"/":"";return[X,$].join(ce)};function _($){var se=$.indexOf("/"),x=$.lastIndexOf("/");return se!==-1?x===se+1?$:($.indexOf("?")!==-1&&($=$.substring(0,$.indexOf("?"))),$.substring(0,x+1)):""}function A($){var se=$.match(T);return se?se[1]:""}function b($){var se=$.match(v);return se?se[0]:""}function j($){return!v.test($)}function Y($){return j($)&&$.charAt(0)==="/"}function W($){return $.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),y=F}catch($){}finally{y=y||N}}(),{parseBaseUrl:_,parseOrigin:A,parseScheme:b,isRelative:j,isPathAbsolute:Y,isSchemeRelative:W,isHTTPURL:function($){return D.test($)},isHTTPS:function($){return m.test($)},removeHostname:function($){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec($)[2].substring(1)},resolve:function($,se){return y($,se)}}}C.__dashjs_factory_name="DefaultURLUtils",g.Z=U.Z.getSingletonFactory(C)},8260:function(R,g,w){var U=w(2839),C=w(5448);function y(){var v;function D(T){var F=[];if(!T||!v||typeof v.fetchAll!="function")return F;for(var N,_=v.fetchAll(T),A=0,b=_.length;A<b;A++)(N=m(_[A]))&&F.push(N);return F}function m(T){if(!T)return null;var F=new U.Z(T);return T.hasOwnProperty("_incomplete")&&(F.isComplete=!T._incomplete),F}return{getBox:function(T){return T&&v&&v.boxes&&v.boxes.length!==0&&typeof v.fetch=="function"?m(v.fetch(T)):null},getBoxes:D,setData:function(T){v=T},getLastBox:function(){if(!v||!v.boxes||!v.boxes.length)return null;var T=D(v.boxes[v.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}y.__dashjs_factory_name="IsoFile",g.Z=C.Z.getClassFactory(y)},7473:function(R,g,w){w.d(g,{k:function(){return C}});var U=w(5448);function C(v,D){var m={url:v.url,method:v.method,headers:Object.assign({},v.headers),credentials:v.withCredentials?"include":void 0,range:v.request.range};return Promise.resolve(D.modifyRequest(m)).then(function(){return Object.assign(v,m,{withCredentials:m.credentials==="include"})})}function y(){return{modifyRequest:null,modifyRequestURL:function(v){return v},modifyRequestHeader:function(v,D){return D.url,v}}}y.__dashjs_factory_name="RequestModifier",g.Z=U.Z.getSingletonFactory(y)},3106:function(R,g,w){w.d(g,{PS:function(){return y},SE:function(){return v}});var U=w(3393);function C(D){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},C(D)}function y(D,m){if(C(D)!==m)throw U.Z.BAD_ARGUMENT_ERROR}function v(D){if(D===null||isNaN(D)||D%1!=0)throw U.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(R,g,w){var U=w(5448),C=w(5);function y(){var D,m=[],T=this.context;function F(N,_,A){var b=function(j){var Y;for(Y=0;Y<m.length;Y++)if(m[Y].regex.test(j))return m[Y].utils;return D}(A||_);return b&&typeof b[N]=="function"?b[N](_,A):D[N](_,A)}return D=(0,C.Z)(T).getInstance(),{registerUrlRegex:function(N,_){m.push({regex:N,utils:_})},parseBaseUrl:function(N){return F("parseBaseUrl",N)},parseOrigin:function(N){return F("parseOrigin",N)},parseScheme:function(N){return F("parseScheme",N)},isRelative:function(N){return F("isRelative",N)},isPathAbsolute:function(N){return F("isPathAbsolute",N)},isSchemeRelative:function(N){return F("isSchemeRelative",N)},isHTTPURL:function(N){return F("isHTTPURL",N)},isHTTPS:function(N){return F("isHTTPS",N)},removeHostname:function(N){return F("removeHostname",N)},resolve:function(N,_){return F("resolve",N,_)}}}y.__dashjs_factory_name="URLUtils";var v=U.Z.getSingletonFactory(y);g.Z=v},5459:function(R,g){g.Z=function w(U,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.code=U||null,this.message=C||null,this.data=y||null}},3186:function(R,g,w){var U=w(7855);function C(v,D){for(var m=0;m<D.length;m++){var T=D[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var y=function(){function v(T){(function(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")})(this,v),this.action=v.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var D,m;return D=v,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===U.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?U.w.INIT_SEGMENT_TYPE:U.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&C(D.prototype,m),v}();y.ACTION_DOWNLOAD="download",y.ACTION_COMPLETE="complete",g.Z=y},2839:function(R,g){function w(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=function(){function C(D){if(function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,C),this.offset=D._offset,this.type=D.type,this.size=D.size,this.boxes=[],D.boxes)for(var m=0;m<D.boxes.length;m++)this.boxes.push(new C(D.boxes[m]));switch(this.isComplete=!0,D.type){case"sidx":if(this.timescale=D.timescale,this.earliest_presentation_time=D.earliest_presentation_time,this.first_offset=D.first_offset,this.references=D.references,D.references){this.references=[];for(var T=0;T<D.references.length;T++){var F={reference_type:D.references[T].reference_type,referenced_size:D.references[T].referenced_size,subsegment_duration:D.references[T].subsegment_duration};this.references.push(F)}}break;case"emsg":this.id=D.id,this.version=D.version===1?1:0,this.value=D.value,this.timescale=D.timescale,this.scheme_id_uri=D.scheme_id_uri,this.presentation_time_delta=D.version===1?D.presentation_time:D.presentation_time_delta,this.event_duration=D.event_duration,this.message_data=D.message_data;break;case"mdhd":this.timescale=D.timescale;break;case"mfhd":this.sequence_number=D.sequence_number;break;case"subs":this.entry_count=D.entry_count,this.entries=D.entries;break;case"tfhd":this.base_data_offset=D.base_data_offset,this.sample_description_index=D.sample_description_index,this.default_sample_duration=D.default_sample_duration,this.default_sample_size=D.default_sample_size,this.default_sample_flags=D.default_sample_flags,this.flags=D.flags;break;case"tfdt":this.version=D.version,this.baseMediaDecodeTime=D.baseMediaDecodeTime,this.flags=D.flags;break;case"trun":if(this.sample_count=D.sample_count,this.first_sample_flags=D.first_sample_flags,this.data_offset=D.data_offset,this.flags=D.flags,this.samples=D.samples,D.samples){this.samples=[];for(var N=0,_=D.samples.length;N<_;N++){var A={sample_size:D.samples[N].sample_size,sample_duration:D.samples[N].sample_duration,sample_composition_time_offset:D.samples[N].sample_composition_time_offset};this.samples.push(A)}}break;case"prft":this.version=D.version,this.reference_track_ID=D.reference_track_ID,this.ntp_timestamp_sec=D.ntp_timestamp_sec,this.ntp_timestamp_frac=D.ntp_timestamp_frac,this.media_time=D.media_time,this.flags=D.flags}}var y,v;return y=C,(v=[{key:"getChildBox",value:function(D){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===D)return this.boxes[m]}},{key:"getChildBoxes",value:function(D){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===D&&m.push(this.boxes[T]);return m}}])&&w(y.prototype,v),C}();g.Z=U},9597:function(R,g){g.Z=function w(U,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w),this.lastCompletedOffset=U,this.found=C,this.size=y}},2128:function(R,g){g.Z=function w(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,w),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(R,g,w){function U(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}w.d(g,{O:function(){return y},w:function(){return C}});var C=function v(){U(this,v),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},y=function v(){U(this,v),this.s=null,this.d=null,this.b=[]};C.GET="GET",C.HEAD="HEAD",C.MPD_TYPE="MPD",C.XLINK_EXPANSION_TYPE="XLinkExpansion",C.INIT_SEGMENT_TYPE="InitializationSegment",C.INDEX_SEGMENT_TYPE="IndexSegment",C.MEDIA_SEGMENT_TYPE="MediaSegment",C.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",C.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",C.DVB_REPORTING_TYPE="DVBReporting",C.LICENSE="license",C.CONTENT_STEERING_TYPE="ContentSteering",C.OTHER_TYPE="other"},3039:function(R,g){function w(C,y){return function(v,D){for(var m,T,F,N=U(v,"tag"),_=U(D==null?"*":D,"range"),A=[],b=-1;++b<_.length;)if(m=_[b].toLowerCase(),y||m!=="*"){for(T=-1,F=[];++T<N.length;)if(C(N[T].toLowerCase(),m)){if(!y)return N[T];A.push(N[T])}else F.push(N[T]);N=F}return y?A:void 0}}function U(C,y){var v=C&&typeof C=="string"?[C]:C;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}g.basicFilter=w(function(C,y){return y==="*"||C===y||C.indexOf(y+"-")>-1},!0),g.extendedFilter=w(function(C,y){var v=C.split("-"),D=y.split("-"),m=0,T=0;if(D[T]!=="*"&&v[m]!==D[T])return!1;for(m++,T++;T<D.length;)if(D[T]!=="*"){if(!v[m])return!1;if(v[m]!==D[T]){if(v[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=w(function(C,y){for(var v,D=y;;){if(D==="*"||C===D)return!0;if((v=D.lastIndexOf("-"))<0)return!1;D.charAt(v-2)==="-"&&(v-=2),D=D.slice(0,v)}})},3973:function(R,g,w){R.exports=w(3854)},3854:function(R,g,w){var U=w(2415),C=w(3039),y=w(7778),v=w(5813),D=w(3165),m=w(9460);R.exports=function(Y,W){var $,se=W||{},x=U.parse(String(Y||"").toLowerCase(),se),X=U.stringify(x),ce=-1;if(!X)return X;for(;++ce<y.length;)C.extendedFilter(X,y[ce].from).length&&(_(x,y[ce].from,y[ce].to),X=U.stringify(x));for(ce=-1;++ce<v.length;)A(x,v[ce].from.field,v[ce].from.value)&&b(x,v[ce].to.field,v[ce].to.value);for(X=U.stringify(Object.assign({},x,N)),ce=-1;++ce<D.length;)X===D[ce]&&(_(x,D[ce],D[ce].split("-").slice(0,-1).join("-")),X=U.stringify(Object.assign({},x,N)));if(x.extensions.sort(j),se.warning)for($ in m)T.call(m[$],x[$])&&se.warning("Deprecated "+$+" `"+x[$]+"`, expected one of `"+m[$][x[$]].join("`, `")+"`",null,7);return x.script&&(x.script=x.script.charAt(0).toUpperCase()+x.script.slice(1)),x.region&&(x.region=x.region.toUpperCase()),U.stringify(x)};var T={}.hasOwnProperty,F=new Intl.Collator,N={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(Y,W,$){var se,x=U.parse(W),X=U.parse($),ce=[];for(se in x)x[se]&&x[se].length&&A(Y,se,x[se])&&ce.push(se);for(se in X)X[se]&&X[se].length&&(ce.indexOf(se)>-1||!Y[se]||!Y[se].length)&&b(Y,se,X[se])}function A(Y,W,$){var se,x,X,ce,oe=!1;if($){if(x=se=Y[W],se&&typeof se=="object")for(x=[],X=-1;++X<se.length;)ce=se[X],$.indexOf(ce)<0?x.push(ce):oe=!0;else se===$&&(x=null,oe=!0);Y[W]=x}return oe}function b(Y,W,$){var se,x,X,ce=Y[W];if(ce&&typeof ce=="object")for(se=[].concat($),x=-1;++x<se.length;)X=se[x],ce.indexOf(X)<0&&ce.push(X);else Y[W]=$}function j(Y,W){return F.compare(Y.singleton,W.singleton)}},2415:function(R,g,w){g.parse=w(6903),g.stringify=w(6713)},6903:function(R,g,w){var U=w(2219),C=w(3516),y=w(395),v=w(858),D=w(8589);R.exports=function T(F,N){var _,A,b,j=N||{},Y={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},W=String(F),$=W.toLowerCase(),se=0;if(F==null)throw new Error("Expected string, got `"+F+"`");if(m.call(D,$))return(j.normalize==null||j.normalize)&&D[$]?T(D[$]):(Y[v.indexOf($)===-1?"irregular":"regular"]=W,Y);for(;C($.charCodeAt(se))&&se<9;)se++;if(se>1&&se<9){if(Y.language=W.slice(0,se),se<4)for(A=0;$.charCodeAt(se)===45&&C($.charCodeAt(se+1))&&C($.charCodeAt(se+2))&&C($.charCodeAt(se+3))&&!C($.charCodeAt(se+4));){if(A>2)return x(se,3,"Too many extended language subtags, expected at most 3 subtags");Y.extendedLanguageSubtags.push(W.slice(se+1,se+4)),se+=4,A++}for($.charCodeAt(se)===45&&C($.charCodeAt(se+1))&&C($.charCodeAt(se+2))&&C($.charCodeAt(se+3))&&C($.charCodeAt(se+4))&&!C($.charCodeAt(se+5))&&(Y.script=W.slice(se+1,se+5),se+=5),$.charCodeAt(se)===45&&(C($.charCodeAt(se+1))&&C($.charCodeAt(se+2))&&!C($.charCodeAt(se+3))?(Y.region=W.slice(se+1,se+3),se+=3):y($.charCodeAt(se+1))&&y($.charCodeAt(se+2))&&y($.charCodeAt(se+3))&&!y($.charCodeAt(se+4))&&(Y.region=W.slice(se+1,se+4),se+=4));$.charCodeAt(se)===45;){for(b=_=se+1;U($.charCodeAt(b));){if(b-_>7)return x(b,1,"Too long variant, expected at most 8 characters");b++}if(!(b-_>4||b-_>3&&y($.charCodeAt(_))))break;Y.variants.push(W.slice(_,b)),se=b}for(;$.charCodeAt(se)===45&&$.charCodeAt(se+1)!==120&&U($.charCodeAt(se+1))&&$.charCodeAt(se+2)===45&&U($.charCodeAt(se+3));){for(b=se+2,A=0;$.charCodeAt(b)===45&&U($.charCodeAt(b+1))&&U($.charCodeAt(b+2));)for(b=(_=b+1)+2,A++;U($.charCodeAt(b));){if(b-_>7)return x(b,2,"Too long extension, expected at most 8 characters");b++}if(!A)return x(b,4,"Empty extension, extensions must have at least 2 characters of content");Y.extensions.push({singleton:W.charAt(se+1),extensions:W.slice(se+3,b).split("-")}),se=b}}else se=0;if(se===0&&$.charCodeAt(se)===120||$.charCodeAt(se)===45&&$.charCodeAt(se+1)===120)for(b=se=se?se+2:1;$.charCodeAt(b)===45&&U($.charCodeAt(b+1));){for(b=_=se+1;U($.charCodeAt(b));){if(b-_>7)return x(b,5,"Too long private-use area, expected at most 8 characters");b++}Y.privateuse.push(W.slice(se+1,b)),se=b}return se!==W.length?x(se,6,"Found superfluous content after tag"):Y;function x(X,ce,oe){return j.warning&&j.warning(oe,ce,X),j.forgiving?Y:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(R){R.exports=function(g){var w,U,C,y=g||{},v=[];if(y.irregular||y.regular)return y.irregular||y.regular;if(y.language)for(v=v.concat(y.language,y.extendedLanguageSubtags||[],y.script||[],y.region||[],y.variants||[]),w=y.extensions||[],U=-1;++U<w.length;)(C=w[U]).singleton&&C.extensions&&C.extensions.length&&(v=v.concat(C.singleton,C.extensions));return y.privateuse&&y.privateuse.length&&(v=v.concat("x",y.privateuse)),v.join("-")}},1549:function(R,g,w){var U=w(6693),C=w(2165),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(O){return+O!=O&&(O=0),m.alloc(+O)},g.INSPECT_MAX_BYTES=50;var v=2147483647;function D(O){if(O>v)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return Object.setPrototypeOf(M,m.prototype),M}function m(O,M,q){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(O)}return T(O,M,q)}function T(O,M,q){if(typeof O=="string")return function(de,Ve){if(typeof Ve=="string"&&Ve!==""||(Ve="utf8"),!m.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);var St=0|j(de,Ve),st=D(St),at=st.write(de,Ve);return at!==St&&(st=st.slice(0,at)),st}(O,M);if(ArrayBuffer.isView(O))return function(de){if(Re(de,Uint8Array)){var Ve=new Uint8Array(de);return A(Ve.buffer,Ve.byteOffset,Ve.byteLength)}return _(de)}(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Re(O,ArrayBuffer)||O&&Re(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(O,SharedArrayBuffer)||O&&Re(O.buffer,SharedArrayBuffer)))return A(O,M,q);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return m.from(K,M,q);var he=function(de){if(m.isBuffer(de)){var Ve=0|b(de.length),St=D(Ve);return St.length===0||de.copy(St,0,0,Ve),St}return de.length!==void 0?typeof de.length!="number"||te(de.length)?D(0):_(de):de.type==="Buffer"&&Array.isArray(de.data)?_(de.data):void 0}(O);if(he)return he;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return m.from(O[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function F(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function N(O){return F(O),D(O<0?0:0|b(O))}function _(O){for(var M=O.length<0?0:0|b(O.length),q=D(M),K=0;K<M;K+=1)q[K]=255&O[K];return q}function A(O,M,q){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=M===void 0&&q===void 0?new Uint8Array(O):q===void 0?new Uint8Array(O,M):new Uint8Array(O,M,q),Object.setPrototypeOf(K,m.prototype),K}function b(O){if(O>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|O}function j(O,M){if(m.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Re(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&q===0)return 0;for(var he=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return kt(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return mt(O).length;default:if(he)return K?-1:kt(O).length;M=(""+M).toLowerCase(),he=!0}}function Y(O,M,q){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return ct(this,M,q);case"utf8":case"utf-8":return Je(this,M,q);case"ascii":return je(this,M,q);case"latin1":case"binary":return ot(this,M,q);case"base64":return Ce(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,M,q);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function W(O,M,q){var K=O[M];O[M]=O[q],O[q]=K}function $(O,M,q,K,he){if(O.length===0)return-1;if(typeof q=="string"?(K=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),te(q=+q)&&(q=he?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(he)return-1;q=O.length-1}else if(q<0){if(!he)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,K)),m.isBuffer(M))return M.length===0?-1:se(O,M,q,K,he);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?he?Uint8Array.prototype.indexOf.call(O,M,q):Uint8Array.prototype.lastIndexOf.call(O,M,q):se(O,[M],q,K,he);throw new TypeError("val must be string, number or Buffer")}function se(O,M,q,K,he){var de,Ve=1,St=O.length,st=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;Ve=2,St/=2,st/=2,q/=2}function at(Tt,Ct){return Ve===1?Tt[Ct]:Tt.readUInt16BE(Ct*Ve)}if(he){var tt=-1;for(de=q;de<St;de++)if(at(O,de)===at(M,tt===-1?0:de-tt)){if(tt===-1&&(tt=de),de-tt+1===st)return tt*Ve}else tt!==-1&&(de-=de-tt),tt=-1}else for(q+st>St&&(q=St-st),de=q;de>=0;de--){for(var ft=!0,Et=0;Et<st;Et++)if(at(O,de+Et)!==at(M,Et)){ft=!1;break}if(ft)return de}return-1}function x(O,M,q,K){q=Number(q)||0;var he=O.length-q;K?(K=Number(K))>he&&(K=he):K=he;var de=M.length;K>de/2&&(K=de/2);for(var Ve=0;Ve<K;++Ve){var St=parseInt(M.substr(2*Ve,2),16);if(te(St))return Ve;O[q+Ve]=St}return Ve}function X(O,M,q,K){return Rt(kt(M,O.length-q),O,q,K)}function ce(O,M,q,K){return Rt(function(he){for(var de=[],Ve=0;Ve<he.length;++Ve)de.push(255&he.charCodeAt(Ve));return de}(M),O,q,K)}function oe(O,M,q,K){return Rt(mt(M),O,q,K)}function me(O,M,q,K){return Rt(function(he,de){for(var Ve,St,st,at=[],tt=0;tt<he.length&&!((de-=2)<0);++tt)St=(Ve=he.charCodeAt(tt))>>8,st=Ve%256,at.push(st),at.push(St);return at}(M,O.length-q),O,q,K)}function Ce(O,M,q){return M===0&&q===O.length?U.fromByteArray(O):U.fromByteArray(O.slice(M,q))}function Je(O,M,q){q=Math.min(O.length,q);for(var K=[],he=M;he<q;){var de,Ve,St,st,at=O[he],tt=null,ft=at>239?4:at>223?3:at>191?2:1;if(he+ft<=q)switch(ft){case 1:at<128&&(tt=at);break;case 2:(192&(de=O[he+1]))==128&&(st=(31&at)<<6|63&de)>127&&(tt=st);break;case 3:de=O[he+1],Ve=O[he+2],(192&de)==128&&(192&Ve)==128&&(st=(15&at)<<12|(63&de)<<6|63&Ve)>2047&&(st<55296||st>57343)&&(tt=st);break;case 4:de=O[he+1],Ve=O[he+2],St=O[he+3],(192&de)==128&&(192&Ve)==128&&(192&St)==128&&(st=(15&at)<<18|(63&de)<<12|(63&Ve)<<6|63&St)>65535&&st<1114112&&(tt=st)}tt===null?(tt=65533,ft=1):tt>65535&&(tt-=65536,K.push(tt>>>10&1023|55296),tt=56320|1023&tt),K.push(tt),he+=ft}return function(Et){var Tt=Et.length;if(Tt<=Te)return String.fromCharCode.apply(String,Et);for(var Ct="",hn=0;hn<Tt;)Ct+=String.fromCharCode.apply(String,Et.slice(hn,hn+=Te));return Ct}(K)}g.kMaxLength=v,m.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(O,M,q){return T(O,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(O,M,q){return function(K,he,de){return F(K),K<=0?D(K):he!==void 0?typeof de=="string"?D(K).fill(he,de):D(K).fill(he):D(K)}(O,M,q)},m.allocUnsafe=function(O){return N(O)},m.allocUnsafeSlow=function(O){return N(O)},m.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==m.prototype},m.compare=function(O,M){if(Re(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),Re(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(O)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var q=O.length,K=M.length,he=0,de=Math.min(q,K);he<de;++he)if(O[he]!==M[he]){q=O[he],K=M[he];break}return q<K?-1:K<q?1:0},m.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<O.length;++q)M+=O[q].length;var K=m.allocUnsafe(M),he=0;for(q=0;q<O.length;++q){var de=O[q];if(Re(de,Uint8Array))he+de.length>K.length?m.from(de).copy(K,he):Uint8Array.prototype.set.call(K,de,he);else{if(!m.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(K,he)}he+=de.length}return K},m.byteLength=j,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)W(this,M,M+1);return this},m.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)W(this,M,M+3),W(this,M+1,M+2);return this},m.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)W(this,M,M+7),W(this,M+1,M+6),W(this,M+2,M+5),W(this,M+3,M+4);return this},m.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?Je(this,0,O):Y.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(O){if(!m.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||m.compare(this,O)===0},m.prototype.inspect=function(){var O="",M=g.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},y&&(m.prototype[y]=m.prototype.inspect),m.prototype.compare=function(O,M,q,K,he){if(Re(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),!m.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),q===void 0&&(q=O?O.length:0),K===void 0&&(K=0),he===void 0&&(he=this.length),M<0||q>O.length||K<0||he>this.length)throw new RangeError("out of range index");if(K>=he&&M>=q)return 0;if(K>=he)return-1;if(M>=q)return 1;if(this===O)return 0;for(var de=(he>>>=0)-(K>>>=0),Ve=(q>>>=0)-(M>>>=0),St=Math.min(de,Ve),st=this.slice(K,he),at=O.slice(M,q),tt=0;tt<St;++tt)if(st[tt]!==at[tt]){de=st[tt],Ve=at[tt];break}return de<Ve?-1:Ve<de?1:0},m.prototype.includes=function(O,M,q){return this.indexOf(O,M,q)!==-1},m.prototype.indexOf=function(O,M,q){return $(this,O,M,q,!0)},m.prototype.lastIndexOf=function(O,M,q){return $(this,O,M,q,!1)},m.prototype.write=function(O,M,q,K){if(M===void 0)K="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")K=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,K===void 0&&(K="utf8")):(K=q,q=void 0)}var he=this.length-M;if((q===void 0||q>he)&&(q=he),O.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var de=!1;;)switch(K){case"hex":return x(this,O,M,q);case"utf8":case"utf-8":return X(this,O,M,q);case"ascii":case"latin1":case"binary":return ce(this,O,M,q);case"base64":return oe(this,O,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,O,M,q);default:if(de)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),de=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Te=4096;function je(O,M,q){var K="";q=Math.min(O.length,q);for(var he=M;he<q;++he)K+=String.fromCharCode(127&O[he]);return K}function ot(O,M,q){var K="";q=Math.min(O.length,q);for(var he=M;he<q;++he)K+=String.fromCharCode(O[he]);return K}function ct(O,M,q){var K=O.length;(!M||M<0)&&(M=0),(!q||q<0||q>K)&&(q=K);for(var he="",de=M;de<q;++de)he+=Ue[O[de]];return he}function Ie(O,M,q){for(var K=O.slice(M,q),he="",de=0;de<K.length-1;de+=2)he+=String.fromCharCode(K[de]+256*K[de+1]);return he}function qe(O,M,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>q)throw new RangeError("Trying to access beyond buffer length")}function gt(O,M,q,K,he,de){if(!m.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>he||M<de)throw new RangeError('"value" argument is out of bounds');if(q+K>O.length)throw new RangeError("Index out of range")}function Me(O,M,q,K,he,de){if(q+K>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function We(O,M,q,K,he){return M=+M,q>>>=0,he||Me(O,0,q,4),C.write(O,M,q,K,23,4),q+4}function rt(O,M,q,K,he){return M=+M,q>>>=0,he||Me(O,0,q,8),C.write(O,M,q,K,52,8),q+8}m.prototype.slice=function(O,M){var q=this.length;(O=~~O)<0?(O+=q)<0&&(O=0):O>q&&(O=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<O&&(M=O);var K=this.subarray(O,M);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(O,M,q){O>>>=0,M>>>=0,q||qe(O,M,this.length);for(var K=this[O],he=1,de=0;++de<M&&(he*=256);)K+=this[O+de]*he;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(O,M,q){O>>>=0,M>>>=0,q||qe(O,M,this.length);for(var K=this[O+--M],he=1;M>0&&(he*=256);)K+=this[O+--M]*he;return K},m.prototype.readUint8=m.prototype.readUInt8=function(O,M){return O>>>=0,M||qe(O,1,this.length),this[O]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(O,M){return O>>>=0,M||qe(O,2,this.length),this[O]|this[O+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(O,M){return O>>>=0,M||qe(O,2,this.length),this[O]<<8|this[O+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(O,M){return O>>>=0,M||qe(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(O,M){return O>>>=0,M||qe(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},m.prototype.readIntLE=function(O,M,q){O>>>=0,M>>>=0,q||qe(O,M,this.length);for(var K=this[O],he=1,de=0;++de<M&&(he*=256);)K+=this[O+de]*he;return K>=(he*=128)&&(K-=Math.pow(2,8*M)),K},m.prototype.readIntBE=function(O,M,q){O>>>=0,M>>>=0,q||qe(O,M,this.length);for(var K=M,he=1,de=this[O+--K];K>0&&(he*=256);)de+=this[O+--K]*he;return de>=(he*=128)&&(de-=Math.pow(2,8*M)),de},m.prototype.readInt8=function(O,M){return O>>>=0,M||qe(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},m.prototype.readInt16LE=function(O,M){O>>>=0,M||qe(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(O,M){O>>>=0,M||qe(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(O,M){return O>>>=0,M||qe(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},m.prototype.readInt32BE=function(O,M){return O>>>=0,M||qe(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},m.prototype.readFloatLE=function(O,M){return O>>>=0,M||qe(O,4,this.length),C.read(this,O,!0,23,4)},m.prototype.readFloatBE=function(O,M){return O>>>=0,M||qe(O,4,this.length),C.read(this,O,!1,23,4)},m.prototype.readDoubleLE=function(O,M){return O>>>=0,M||qe(O,8,this.length),C.read(this,O,!0,52,8)},m.prototype.readDoubleBE=function(O,M){return O>>>=0,M||qe(O,8,this.length),C.read(this,O,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||gt(this,O,M,q,Math.pow(2,8*q)-1,0);var he=1,de=0;for(this[M]=255&O;++de<q&&(he*=256);)this[M+de]=O/he&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||gt(this,O,M,q,Math.pow(2,8*q)-1,0);var he=q-1,de=1;for(this[M+he]=255&O;--he>=0&&(de*=256);)this[M+he]=O/de&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,1,255,0),this[M]=255&O,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeIntLE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var he=Math.pow(2,8*q-1);gt(this,O,M,q,he-1,-he)}var de=0,Ve=1,St=0;for(this[M]=255&O;++de<q&&(Ve*=256);)O<0&&St===0&&this[M+de-1]!==0&&(St=1),this[M+de]=(O/Ve>>0)-St&255;return M+q},m.prototype.writeIntBE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var he=Math.pow(2,8*q-1);gt(this,O,M,q,he-1,-he)}var de=q-1,Ve=1,St=0;for(this[M+de]=255&O;--de>=0&&(Ve*=256);)O<0&&St===0&&this[M+de+1]!==0&&(St=1),this[M+de]=(O/Ve>>0)-St&255;return M+q},m.prototype.writeInt8=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},m.prototype.writeInt16LE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeInt16BE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeInt32LE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},m.prototype.writeInt32BE=function(O,M,q){return O=+O,M>>>=0,q||gt(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeFloatLE=function(O,M,q){return We(this,O,M,!0,q)},m.prototype.writeFloatBE=function(O,M,q){return We(this,O,M,!1,q)},m.prototype.writeDoubleLE=function(O,M,q){return rt(this,O,M,!0,q)},m.prototype.writeDoubleBE=function(O,M,q){return rt(this,O,M,!1,q)},m.prototype.copy=function(O,M,q,K){if(!m.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q||(q=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<q&&(K=q),K===q||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-q&&(K=O.length-M+q);var he=K-q;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,K):Uint8Array.prototype.set.call(O,this.subarray(q,K),M),he},m.prototype.fill=function(O,M,q,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,q=this.length):typeof q=="string"&&(K=q,q=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var he=O.charCodeAt(0);(K==="utf8"&&he<128||K==="latin1")&&(O=he)}}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var de;if(M>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0),typeof O=="number")for(de=M;de<q;++de)this[de]=O;else{var Ve=m.isBuffer(O)?O:m.from(O,K),St=Ve.length;if(St===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(de=0;de<q-M;++de)this[de+M]=Ve[de%St]}return this};var Ht=/[^+/0-9A-Za-z-_]/g;function kt(O,M){var q;M=M||1/0;for(var K=O.length,he=null,de=[],Ve=0;Ve<K;++Ve){if((q=O.charCodeAt(Ve))>55295&&q<57344){if(!he){if(q>56319){(M-=3)>-1&&de.push(239,191,189);continue}if(Ve+1===K){(M-=3)>-1&&de.push(239,191,189);continue}he=q;continue}if(q<56320){(M-=3)>-1&&de.push(239,191,189),he=q;continue}q=65536+(he-55296<<10|q-56320)}else he&&(M-=3)>-1&&de.push(239,191,189);if(he=null,q<128){if((M-=1)<0)break;de.push(q)}else if(q<2048){if((M-=2)<0)break;de.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;de.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;de.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return de}function mt(O){return U.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(Ht,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function Rt(O,M,q,K){for(var he=0;he<K&&!(he+q>=M.length||he>=O.length);++he)M[he+q]=O[he];return he}function Re(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function te(O){return O!=O}var Ue=function(){for(var O="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var K=16*q,he=0;he<16;++he)M[K+he]=O[q]+O[he];return M}()},6693:function(R,g){g.byteLength=function(F){var N=m(F),_=N[0],A=N[1];return 3*(_+A)/4-A},g.toByteArray=function(F){var N,_,A=m(F),b=A[0],j=A[1],Y=new C(function(se,x,X){return 3*(x+X)/4-X}(0,b,j)),W=0,$=j>0?b-4:b;for(_=0;_<$;_+=4)N=U[F.charCodeAt(_)]<<18|U[F.charCodeAt(_+1)]<<12|U[F.charCodeAt(_+2)]<<6|U[F.charCodeAt(_+3)],Y[W++]=N>>16&255,Y[W++]=N>>8&255,Y[W++]=255&N;return j===2&&(N=U[F.charCodeAt(_)]<<2|U[F.charCodeAt(_+1)]>>4,Y[W++]=255&N),j===1&&(N=U[F.charCodeAt(_)]<<10|U[F.charCodeAt(_+1)]<<4|U[F.charCodeAt(_+2)]>>2,Y[W++]=N>>8&255,Y[W++]=255&N),Y},g.fromByteArray=function(F){for(var N,_=F.length,A=_%3,b=[],j=16383,Y=0,W=_-A;Y<W;Y+=j)b.push(T(F,Y,Y+j>W?W:Y+j));return A===1?(N=F[_-1],b.push(w[N>>2]+w[N<<4&63]+"==")):A===2&&(N=(F[_-2]<<8)+F[_-1],b.push(w[N>>10]+w[N>>4&63]+w[N<<2&63]+"=")),b.join("")};for(var w=[],U=[],C=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,D=y.length;v<D;++v)w[v]=y[v],U[y.charCodeAt(v)]=v;function m(F){var N=F.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=F.indexOf("=");return _===-1&&(_=N),[_,_===N?0:4-_%4]}function T(F,N,_){for(var A,b,j=[],Y=N;Y<_;Y+=3)A=(F[Y]<<16&16711680)+(F[Y+1]<<8&65280)+(255&F[Y+2]),j.push(w[(b=A)>>18&63]+w[b>>12&63]+w[b>>6&63]+w[63&b]);return j.join("")}U[45]=62,U[95]=63},2165:function(R,g){g.read=function(w,U,C,y,v){var D,m,T=8*v-y-1,F=(1<<T)-1,N=F>>1,_=-7,A=C?v-1:0,b=C?-1:1,j=w[U+A];for(A+=b,D=j&(1<<-_)-1,j>>=-_,_+=T;_>0;D=256*D+w[U+A],A+=b,_-=8);for(m=D&(1<<-_)-1,D>>=-_,_+=y;_>0;m=256*m+w[U+A],A+=b,_-=8);if(D===0)D=1-N;else{if(D===F)return m?NaN:1/0*(j?-1:1);m+=Math.pow(2,y),D-=N}return(j?-1:1)*m*Math.pow(2,D-y)},g.write=function(w,U,C,y,v,D){var m,T,F,N=8*D-v-1,_=(1<<N)-1,A=_>>1,b=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=y?0:D-1,Y=y?1:-1,W=U<0||U===0&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(T=isNaN(U)?1:0,m=_):(m=Math.floor(Math.log(U)/Math.LN2),U*(F=Math.pow(2,-m))<1&&(m--,F*=2),(U+=m+A>=1?b/F:b*Math.pow(2,1-A))*F>=2&&(m++,F/=2),m+A>=_?(T=0,m=_):m+A>=1?(T=(U*F-1)*Math.pow(2,v),m+=A):(T=U*Math.pow(2,A-1)*Math.pow(2,v),m=0));v>=8;w[C+j]=255&T,j+=Y,T/=256,v-=8);for(m=m<<v|T,N+=v;N>0;w[C+j]=255&m,j+=Y,m/=256,N-=8);w[C+j-Y]|=128*W}},6934:function(R,g){var w={parseBuffer:function(y){return new U(y).parse()},addBoxProcessor:function(y,v){typeof y=="string"&&typeof v=="function"&&(C.prototype._boxProcessors[y]=v)},createFile:function(){return new U},createBox:function(y,v,D){var m=C.create(y);return v&&v.append(m,D),m},createFullBox:function(y,v,D){var m=w.createBox(y,v,D);return m.version=0,m.flags=0,m},Utils:{}};w.Utils.dataViewToString=function(y,v){var D=v||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(D).decode(y);var m=[],T=0;if(D==="utf-8")for(;T<y.byteLength;){var F=y.getUint8(T++);F<128||(F<224?(F=(31&F)<<6,F|=63&y.getUint8(T++)):F<240?(F=(15&F)<<12,F|=(63&y.getUint8(T++))<<6,F|=63&y.getUint8(T++)):(F=(7&F)<<18,F|=(63&y.getUint8(T++))<<12,F|=(63&y.getUint8(T++))<<6,F|=63&y.getUint8(T++))),m.push(String.fromCharCode(F))}else for(;T<y.byteLength;)m.push(String.fromCharCode(y.getUint8(T++)));return m.join("")},w.Utils.utf8ToByteArray=function(y){var v,D;if(typeof TextEncoder<"u")v=new TextEncoder().encode(y);else for(v=[],D=0;D<y.length;++D){var m=y.charCodeAt(D);m<128?v.push(m):m<2048?(v.push(192|m>>6),v.push(128|63&m)):m<65536?(v.push(224|m>>12),v.push(128|63&m>>6),v.push(128|63&m)):(v.push(240|m>>18),v.push(128|63&m>>12),v.push(128|63&m>>6),v.push(128|63&m))}return v},w.Utils.appendBox=function(y,v,D){if(v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,D!==-1)if(D!=null){var m,T=-1;if(typeof D=="number")T=D;else{if(typeof D=="string")m=D;else{if(typeof D!="object"||!D.type)return void y.boxes.push(v);m=D.type}for(var F=0;F<y.boxes.length;F++)if(m===y.boxes[F].type){T=F+1;break}}y.boxes.splice(T,0,v)}else y.boxes.push(v)},g.parseBuffer=w.parseBuffer,g.addBoxProcessor=w.addBoxProcessor,g.createFile=w.createFile,g.createBox=w.createBox,g.createFullBox=w.createFullBox,g.Utils=w.Utils,w.Cursor=function(y){this.offset=y===void 0?0:y};var U=function(y){this._cursor=new w.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};U.prototype.fetch=function(y){var v=this.fetchAll(y,!0);return v.length?v[0]:null},U.prototype.fetchAll=function(y,v){var D=[];return U._sweep.call(this,y,D,v),D},U.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=C.parse(this);if(y.type===void 0)break;this.boxes.push(y)}return this},U._sweep=function(y,v,D){for(var m in this.type&&this.type==y&&v.push(this),this.boxes){if(v.length&&D)return;U._sweep.call(this.boxes[m],y,v,D)}},U.prototype.write=function(){var y,v=0;for(y=0;y<this.boxes.length;y++)v+=this.boxes[y].getLength(!1);var D=new Uint8Array(v);for(this._rawo=new DataView(D.buffer),this.bytes=D,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return D.buffer},U.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)};var C=function(){this._cursor=new w.Cursor};C.parse=function(y){var v=new C;return v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,v._parseBox(),y._cursor.offset=v._raw.byteOffset+v._raw.byteLength,v},C.create=function(y){var v=new C;return v.type=y,v.boxes=[],v},C.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],C.prototype._boxProcessors={},C.prototype._procField=function(y,v,D){this._parsing?this[y]=this._readField(v,D):this._writeField(v,D,this[y])},C.prototype._procFieldArray=function(y,v,D,m){var T;if(this._parsing)for(this[y]=[],T=0;T<v;T++)this[y][T]=this._readField(D,m);else for(T=0;T<this[y].length;T++)this._writeField(D,m,this[y][T])},C.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},C.prototype._procEntries=function(y,v,D){var m;if(this._parsing)for(this[y]=[],m=0;m<v;m++)this[y].push({}),D.call(this,this[y][m]);else for(m=0;m<v;m++)D.call(this,this[y][m])},C.prototype._procSubEntries=function(y,v,D,m){var T;if(this._parsing)for(y[v]=[],T=0;T<D;T++)y[v].push({}),m.call(this,y[v][T]);else for(T=0;T<D;T++)m.call(this,y[v][T])},C.prototype._procEntryField=function(y,v,D,m){this._parsing?y[v]=this._readField(D,m):this._writeField(D,m,y[v])},C.prototype._procSubBoxes=function(y,v){var D;if(this._parsing)for(this[y]=[],D=0;D<v;D++)this[y].push(C.parse(this));else for(D=0;D<v;D++)this._rawo?this[y][D].write():this.size+=this[y][D].getLength()},C.prototype._readField=function(y,v){switch(y){case"uint":return this._readUint(v);case"int":return this._readInt(v);case"template":return this._readTemplate(v);case"string":return v===-1?this._readTerminatedString():this._readString(v);case"data":return this._readData(v);case"utf8":return this._readUTF8String();default:return-1}},C.prototype._readInt=function(y){var v=null,D=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:v=this._raw.getInt8(D);break;case 16:v=this._raw.getInt16(D);break;case 32:v=this._raw.getInt32(D);break;case 64:var m=this._raw.getInt32(D),T=this._raw.getInt32(D+4);v=m*Math.pow(2,32)+T}return this._cursor.offset+=y>>3,v},C.prototype._readUint=function(y){var v,D,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((v=this._raw.getUint16(T))<<8)+(D=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:v=this._raw.getUint32(T),D=this._raw.getUint32(T+4),m=v*Math.pow(2,32)+D}return this._cursor.offset+=y>>3,m},C.prototype._readString=function(y){for(var v="",D=0;D<y;D++){var m=this._readUint(8);v+=String.fromCharCode(m)}return v},C.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},C.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var v=this._readUint(8);if(v===0)break;y+=String.fromCharCode(v)}return y},C.prototype._readData=function(y){var v=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(v>0){var D=new Uint8Array(this._raw.buffer,this._cursor.offset,v);return this._cursor.offset+=v,D}return null},C.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),v=null;return y>0&&(v=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),v&&w.Utils.dataViewToString(v)},C.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},C.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},C.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(C.parse(this))},C.prototype.append=function(y,v){w.Utils.appendBox(this,y,v)},C.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},C.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},C.prototype._writeInt=function(y,v){if(this._rawo){var D=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(D,v);break;case 16:this._rawo.setInt16(D,v);break;case 32:this._rawo.setInt32(D,v);break;case 64:var m=Math.floor(v/Math.pow(2,32)),T=v-m*Math.pow(2,32);this._rawo.setUint32(D,m),this._rawo.setUint32(D+4,T)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeUint=function(y,v){if(this._rawo){var D,m,T=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(T,v);break;case 16:this._rawo.setUint16(T,v);break;case 24:D=(16776960&v)>>8,m=255&v,this._rawo.setUint16(T,D),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,v);break;case 64:m=v-(D=Math.floor(v/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,D),this._rawo.setUint32(T+4,m)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeString=function(y,v){for(var D=0;D<y;D++)this._writeUint(8,v.charCodeAt(D))},C.prototype._writeTerminatedString=function(y){if(y.length!==0){for(var v=0;v<y.length;v++)this._writeUint(8,y.charCodeAt(v));this._writeUint(8,0)}},C.prototype._writeTemplate=function(y,v){var D=Math.floor(v),m=(v-D)*Math.pow(2,y/2);this._writeUint(y/2,D),this._writeUint(y/2,m)},C.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var v=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(v+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},C.prototype._writeUTF8String=function(y){var v=w.Utils.utf8ToByteArray(y);if(this._rawo)for(var D=new DataView(this._rawo.buffer,this._cursor.offset,v.length),m=0;m<v.length;m++)D.setUint8(m,v[m]);else this.size+=v.length},C.prototype._writeField=function(y,v,D){switch(y){case"uint":this._writeUint(v,D);break;case"int":this._writeInt(v,D);break;case"template":this._writeTemplate(v,D);break;case"string":v==-1?this._writeTerminatedString(D):this._writeString(v,D);break;case"data":this._writeData(D);break;case"utf8":this._writeUTF8String(D)}},C.prototype._boxProcessors.avc1=C.prototype._boxProcessors.avc2=C.prototype._boxProcessors.avc3=C.prototype._boxProcessors.avc4=C.prototype._boxProcessors.hvc1=C.prototype._boxProcessors.hev1=C.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},C.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",this.version===1?64:32),this._procEntryField(y,"media_time","int",this.version===1?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},C.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},C.prototype._boxProcessors.free=C.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},C.prototype._boxProcessors.ftyp=C.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},C.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},C.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},C.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},C.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},C.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},C.prototype._boxProcessors.mp4a=C.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},C.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},C.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},C.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},C.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},C.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},C.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},C.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},C.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},C.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(v){this._procEntryField(v,"level","uint",8),this._procEntryField(v,"range_size","uint",24)})})},C.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},C.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_delta","uint",32)})},C.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(v){this._procEntryField(v,"subsample_size","uint",this.version===1?32:16),this._procEntryField(v,"subsample_priority","uint",8),this._procEntryField(v,"discardable","uint",8),this._procEntryField(v,"codec_specific_parameters","uint",32)})})},C.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},C.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},C.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",this.version===1?64:32),this._procEntryField(y,"moof_offset","uint",this.version===1?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},C.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},C.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors["url "]=C.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},C.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},C.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},C.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},C.prototype._boxProcessors.vtte=function(){}},5530:function(R,g,w){R.exports=w(6146).polyfill()},6146:function(R,g,w){R.exports=function(){function U(mt){return typeof mt=="function"}var C=Array.isArray?Array.isArray:function(mt){return Object.prototype.toString.call(mt)==="[object Array]"},y=0,v=void 0,D=void 0,m=function(mt,Rt){j[y]=mt,j[y+1]=Rt,(y+=2)===2&&(D?D(Y):X())},T=typeof window<"u"?window:void 0,F=T||{},N=F.MutationObserver||F.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",A=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function b(){var mt=setTimeout;return function(){return mt(Y,1)}}var j=new Array(1e3);function Y(){for(var mt=0;mt<y;mt+=2)(0,j[mt])(j[mt+1]),j[mt]=void 0,j[mt+1]=void 0;y=0}var W,$,se,x,X=void 0;function ce(mt,Rt){var Re=this,te=new this.constructor(Ce);te[me]===void 0&&rt(te);var Ue=Re._state;if(Ue){var O=arguments[Ue-1];m(function(){return Me(Ue,te,O,Re._result)})}else qe(Re,te,mt,Rt);return te}function oe(mt){if(mt&&typeof mt=="object"&&mt.constructor===this)return mt;var Rt=new this(Ce);return je(Rt,mt),Rt}X=_?function(){return process.nextTick(Y)}:N?($=0,se=new N(Y),x=document.createTextNode(""),se.observe(x,{characterData:!0}),function(){x.data=$=++$%2}):A?((W=new MessageChannel).port1.onmessage=Y,function(){return W.port2.postMessage(0)}):T===void 0?function(){try{var mt=Function("return this")().require("vertx");return(v=mt.runOnLoop||mt.runOnContext)!==void 0?function(){v(Y)}:b()}catch(Rt){return b()}}():b();var me=Math.random().toString(36).substring(2);function Ce(){}var Je=void 0;function Te(mt,Rt,Re){Rt.constructor===mt.constructor&&Re===ce&&Rt.constructor.resolve===oe?function(te,Ue){Ue._state===1?ct(te,Ue._result):Ue._state===2?Ie(te,Ue._result):qe(Ue,void 0,function(O){return je(te,O)},function(O){return Ie(te,O)})}(mt,Rt):Re===void 0?ct(mt,Rt):U(Re)?function(te,Ue,O){m(function(M){var q=!1,K=function(he,de,Ve,St){try{he.call(de,Ve,St)}catch(st){return st}}(O,Ue,function(he){q||(q=!0,Ue!==he?je(M,he):ct(M,he))},function(he){q||(q=!0,Ie(M,he))},M._label);!q&&K&&(q=!0,Ie(M,K))},te)}(mt,Rt,Re):ct(mt,Rt)}function je(mt,Rt){if(mt===Rt)Ie(mt,new TypeError("You cannot resolve a promise with itself"));else if(Ue=typeof(te=Rt),te===null||Ue!=="object"&&Ue!=="function")ct(mt,Rt);else{var Re=void 0;try{Re=Rt.then}catch(O){return void Ie(mt,O)}Te(mt,Rt,Re)}var te,Ue}function ot(mt){mt._onerror&&mt._onerror(mt._result),gt(mt)}function ct(mt,Rt){mt._state===Je&&(mt._result=Rt,mt._state=1,mt._subscribers.length!==0&&m(gt,mt))}function Ie(mt,Rt){mt._state===Je&&(mt._state=2,mt._result=Rt,m(ot,mt))}function qe(mt,Rt,Re,te){var Ue=mt._subscribers,O=Ue.length;mt._onerror=null,Ue[O]=Rt,Ue[O+1]=Re,Ue[O+2]=te,O===0&&mt._state&&m(gt,mt)}function gt(mt){var Rt=mt._subscribers,Re=mt._state;if(Rt.length!==0){for(var te=void 0,Ue=void 0,O=mt._result,M=0;M<Rt.length;M+=3)te=Rt[M],Ue=Rt[M+Re],te?Me(Re,te,Ue,O):Ue(O);mt._subscribers.length=0}}function Me(mt,Rt,Re,te){var Ue=U(Re),O=void 0,M=void 0,q=!0;if(Ue){try{O=Re(te)}catch(K){q=!1,M=K}if(Rt===O)return void Ie(Rt,new TypeError("A promises callback cannot return that same promise."))}else O=te;Rt._state!==Je||(Ue&&q?je(Rt,O):q===!1?Ie(Rt,M):mt===1?ct(Rt,O):mt===2&&Ie(Rt,O))}var We=0;function rt(mt){mt[me]=We++,mt._state=void 0,mt._result=void 0,mt._subscribers=[]}var Ht=function(){function mt(Rt,Re){this._instanceConstructor=Rt,this.promise=new Rt(Ce),this.promise[me]||rt(this.promise),C(Re)?(this.length=Re.length,this._remaining=Re.length,this._result=new Array(this.length),this.length===0?ct(this.promise,this._result):(this.length=this.length||0,this._enumerate(Re),this._remaining===0&&ct(this.promise,this._result))):Ie(this.promise,new Error("Array Methods must be provided an Array"))}return mt.prototype._enumerate=function(Rt){for(var Re=0;this._state===Je&&Re<Rt.length;Re++)this._eachEntry(Rt[Re],Re)},mt.prototype._eachEntry=function(Rt,Re){var te=this._instanceConstructor,Ue=te.resolve;if(Ue===oe){var O=void 0,M=void 0,q=!1;try{O=Rt.then}catch(he){q=!0,M=he}if(O===ce&&Rt._state!==Je)this._settledAt(Rt._state,Re,Rt._result);else if(typeof O!="function")this._remaining--,this._result[Re]=Rt;else if(te===kt){var K=new te(Ce);q?Ie(K,M):Te(K,Rt,O),this._willSettleAt(K,Re)}else this._willSettleAt(new te(function(he){return he(Rt)}),Re)}else this._willSettleAt(Ue(Rt),Re)},mt.prototype._settledAt=function(Rt,Re,te){var Ue=this.promise;Ue._state===Je&&(this._remaining--,Rt===2?Ie(Ue,te):this._result[Re]=te),this._remaining===0&&ct(Ue,this._result)},mt.prototype._willSettleAt=function(Rt,Re){var te=this;qe(Rt,void 0,function(Ue){return te._settledAt(1,Re,Ue)},function(Ue){return te._settledAt(2,Re,Ue)})},mt}(),kt=function(){function mt(Rt){this[me]=We++,this._result=this._state=void 0,this._subscribers=[],Ce!==Rt&&(typeof Rt!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof mt?function(Re,te){try{te(function(Ue){je(Re,Ue)},function(Ue){Ie(Re,Ue)})}catch(Ue){Ie(Re,Ue)}}(this,Rt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return mt.prototype.catch=function(Rt){return this.then(null,Rt)},mt.prototype.finally=function(Rt){var Re=this,te=Re.constructor;return U(Rt)?Re.then(function(Ue){return te.resolve(Rt()).then(function(){return Ue})},function(Ue){return te.resolve(Rt()).then(function(){throw Ue})}):Re.then(Rt,Rt)},mt}();return kt.prototype.then=ce,kt.all=function(mt){return new Ht(this,mt).promise},kt.race=function(mt){var Rt=this;return C(mt)?new Rt(function(Re,te){for(var Ue=mt.length,O=0;O<Ue;O++)Rt.resolve(mt[O]).then(Re,te)}):new Rt(function(Re,te){return te(new TypeError("You must pass an array to race."))})},kt.resolve=oe,kt.reject=function(mt){var Rt=new this(Ce);return Ie(Rt,mt),Rt},kt._setScheduler=function(mt){D=mt},kt._setAsap=function(mt){m=mt},kt._asap=m,kt.polyfill=function(){var mt=void 0;if(w.g!==void 0)mt=w.g;else if(typeof self<"u")mt=self;else try{mt=Function("return this")()}catch(te){throw new Error("polyfill failed because global object is unavailable in this environment")}var Rt=mt.Promise;if(Rt){var Re=null;try{Re=Object.prototype.toString.call(Rt.resolve())}catch(te){}if(Re==="[object Promise]"&&!Rt.cast)return}mt.Promise=kt},kt.Promise=kt,kt}()},1159:function(R){var g,w=typeof Reflect=="object"?Reflect:null,U=w&&typeof w.apply=="function"?w.apply:function(Y,W,$){return Function.prototype.apply.call(Y,W,$)};g=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:function(Y){return Object.getOwnPropertyNames(Y)};var C=Number.isNaN||function(Y){return Y!=Y};function y(){y.init.call(this)}R.exports=y,R.exports.once=function(Y,W){return new Promise(function($,se){function x(ce){Y.removeListener(W,X),se(ce)}function X(){typeof Y.removeListener=="function"&&Y.removeListener("error",x),$([].slice.call(arguments))}j(Y,W,X,{once:!0}),W!=="error"&&function(ce,oe,me){typeof ce.on=="function"&&j(ce,"error",oe,{once:!0})}(Y,x)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var v=10;function D(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function m(Y){return Y._maxListeners===void 0?y.defaultMaxListeners:Y._maxListeners}function T(Y,W,$,se){var x,X,ce,oe;if(D($),(X=Y._events)===void 0?(X=Y._events=Object.create(null),Y._eventsCount=0):(X.newListener!==void 0&&(Y.emit("newListener",W,$.listener?$.listener:$),X=Y._events),ce=X[W]),ce===void 0)ce=X[W]=$,++Y._eventsCount;else if(typeof ce=="function"?ce=X[W]=se?[$,ce]:[ce,$]:se?ce.unshift($):ce.push($),(x=m(Y))>0&&ce.length>x&&!ce.warned){ce.warned=!0;var me=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");me.name="MaxListenersExceededWarning",me.emitter=Y,me.type=W,me.count=ce.length,oe=me,console&&console.warn&&console.warn(oe)}return Y}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(Y,W,$){var se={fired:!1,wrapFn:void 0,target:Y,type:W,listener:$},x=F.bind(se);return x.listener=$,se.wrapFn=x,x}function _(Y,W,$){var se=Y._events;if(se===void 0)return[];var x=se[W];return x===void 0?[]:typeof x=="function"?$?[x.listener||x]:[x]:$?function(X){for(var ce=new Array(X.length),oe=0;oe<ce.length;++oe)ce[oe]=X[oe].listener||X[oe];return ce}(x):b(x,x.length)}function A(Y){var W=this._events;if(W!==void 0){var $=W[Y];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}function b(Y,W){for(var $=new Array(W),se=0;se<W;++se)$[se]=Y[se];return $}function j(Y,W,$,se){if(typeof Y.on=="function")se.once?Y.once(W,$):Y.on(W,$);else{if(typeof Y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener(W,function x(X){se.once&&Y.removeEventListener(W,x),$(X)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");v=Y}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(Y){for(var W=[],$=1;$<arguments.length;$++)W.push(arguments[$]);var se=Y==="error",x=this._events;if(x!==void 0)se=se&&x.error===void 0;else if(!se)return!1;if(se){var X;if(W.length>0&&(X=W[0]),X instanceof Error)throw X;var ce=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ce.context=X,ce}var oe=x[Y];if(oe===void 0)return!1;if(typeof oe=="function")U(oe,this,W);else{var me=oe.length,Ce=b(oe,me);for($=0;$<me;++$)U(Ce[$],this,W)}return!0},y.prototype.addListener=function(Y,W){return T(this,Y,W,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(Y,W){return T(this,Y,W,!0)},y.prototype.once=function(Y,W){return D(W),this.on(Y,N(this,Y,W)),this},y.prototype.prependOnceListener=function(Y,W){return D(W),this.prependListener(Y,N(this,Y,W)),this},y.prototype.removeListener=function(Y,W){var $,se,x,X,ce;if(D(W),(se=this._events)===void 0)return this;if(($=se[Y])===void 0)return this;if($===W||$.listener===W)--this._eventsCount==0?this._events=Object.create(null):(delete se[Y],se.removeListener&&this.emit("removeListener",Y,$.listener||W));else if(typeof $!="function"){for(x=-1,X=$.length-1;X>=0;X--)if($[X]===W||$[X].listener===W){ce=$[X].listener,x=X;break}if(x<0)return this;x===0?$.shift():function(oe,me){for(;me+1<oe.length;me++)oe[me]=oe[me+1];oe.pop()}($,x),$.length===1&&(se[Y]=$[0]),se.removeListener!==void 0&&this.emit("removeListener",Y,ce||W)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(Y){var W,$,se;if(($=this._events)===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[Y]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete $[Y]),this;if(arguments.length===0){var x,X=Object.keys($);for(se=0;se<X.length;++se)(x=X[se])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(W=$[Y])=="function")this.removeListener(Y,W);else if(W!==void 0)for(se=W.length-1;se>=0;se--)this.removeListener(Y,W[se]);return this},y.prototype.listeners=function(Y){return _(this,Y,!0)},y.prototype.rawListeners=function(Y){return _(this,Y,!1)},y.listenerCount=function(Y,W){return typeof Y.listenerCount=="function"?Y.listenerCount(W):A.call(Y,W)},y.prototype.listenerCount=A,y.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(R){var g=Array.isArray,w=Object.keys,U=Object.prototype.hasOwnProperty;R.exports=function C(y,v){if(y===v)return!0;if(y&&v&&typeof y=="object"&&typeof v=="object"){var D,m,T,F=g(y),N=g(v);if(F&&N){if((m=y.length)!=v.length)return!1;for(D=m;D--!=0;)if(!C(y[D],v[D]))return!1;return!0}if(F!=N)return!1;var _=y instanceof Date,A=v instanceof Date;if(_!=A)return!1;if(_&&A)return y.getTime()==v.getTime();var b=y instanceof RegExp,j=v instanceof RegExp;if(b!=j)return!1;if(b&&j)return y.toString()==v.toString();var Y=w(y);if((m=Y.length)!==w(v).length)return!1;for(D=m;D--!=0;)if(!U.call(v,Y[D]))return!1;for(D=m;D--!=0;)if(!C(y[T=Y[D]],v[T]))return!1;return!0}return y!=y&&v!=v}},3362:function(R,g,w){(function(U,C,y,v,D){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[v.byName.ruby.qname]:null,K=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),he=M.contents.length-1;he>=0;he--)!K||"styleAttrs"in M.contents[he]&&v.byName.ruby.qname in M.contents[he].styleAttrs?m(M.contents[he]):delete M.contents[he]}function T(M,q,K,he){var de=he&&he.timeContainer==="seq",Ve=0;he&&(Ve=de&&K?K.end:he.begin),q.begin=q.explicit_begin?q.explicit_begin+Ve:Ve;var St=q.begin,st=null;if("sets"in q)for(var at=0;at<q.sets.length;at++)T(M,q.sets[at],st,q),St=q.timeContainer==="seq"?q.sets[at].end:Math.max(St,q.sets[at].end),st=q.sets[at];if("contents"in q){if("contents"in q)for(var tt=0;tt<q.contents.length;tt++)T(M,q.contents[tt],st,q),St=q.timeContainer==="seq"?q.contents[tt].end:Math.max(St,q.contents[tt].end),st=q.contents[tt]}else St=de?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,Ve+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=Ve+q.explicit_end:q.end=St,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function F(M){this.node=M}function N(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new A,this.layout=new Y}function A(){this.styles={},this.initials={}}function b(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function j(){this.styleAttrs=null}function Y(){this.regions={}}function W(M,q){$.call(this,"image"),this.src=M,this.type=q}function $(M){this.kind=M}function se(M){this.id=M}function x(M){this.regionID=M}function X(M){this.styleAttrs=M}function ce(M){this.sets=M}function oe(M){this.contents=M}function me(M,q,K){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=K}function Ce(){$.call(this,"body")}function Je(){$.call(this,"div")}function Te(){$.call(this,"p")}function je(){$.call(this,"span")}function ot(){$.call(this,"span")}function ct(){$.call(this,"br")}function Ie(){}function qe(){}function gt(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function Me(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function We(M,q){var K={};if(M!==null)for(var he in M.attributes){var de=M.attributes[he].uri+" "+M.attributes[he].local,Ve=v.byQName[de];if(Ve!==void 0){var St=Ve.parse(M.attributes[he].value);St!==null?(K[de]=St,Ve===v.byName.zIndex&&Re(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):te(q,"Cannot parse styling attribute "+de+" --> "+M.attributes[he].value)}}return K}function rt(M,q,K){for(var he in M.attributes)if(M.attributes[he].uri===q&&M.attributes[he].local===K)return M.attributes[he].value;return null}function Ht(M,q,K){var he,de=null;return(he=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?q!==null&&(de=parseFloat(he[1])/q):(he=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?M!==null&&(de=parseFloat(he[1])/M):(he=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?de=parseFloat(he[1])/1e3:(he=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?de=parseFloat(he[1]):(he=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?de=3600*parseFloat(he[1]):(he=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?de=60*parseFloat(he[1]):(he=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?de=3600*parseInt(he[1])+60*parseInt(he[2])+parseFloat(he[3]):(he=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&q!==null&&(de=3600*parseInt(he[1])+60*parseInt(he[2])+parseInt(he[3])+(he[4]===null?0:parseInt(he[4])/q)),de}function kt(M,q,K){for(;q.styleRefs.length>0;){var he=q.styleRefs.pop();he in M.styles?(kt(M,M.styles[he],K),Rt(M.styles[he].styleAttrs,q.styleAttrs)):te(K,"Non-existant style id referenced")}}function mt(M,q,K,he){for(var de=q.length-1;de>=0;de--){var Ve=q[de];Ve in M.styles?Rt(M.styles[Ve].styleAttrs,K):te(he,"Non-existant style id referenced")}}function Rt(M,q){for(var K in M)M.hasOwnProperty(K)&&(K in q||(q[K]=M[K]))}function Re(M,q){if(M&&M.warn&&M.warn(q))throw q}function te(M,q){if(M&&M.error&&M.error(q))throw q}function Ue(M,q){throw M&&M.fatal&&M.fatal(q),q}function O(M,q){for(var K,he=0,de=M.length-1;he<=de;){var Ve=M[K=Math.floor((he+de)/2)];if(Ve<q)he=K+1;else{if(!(Ve>q))return{found:!0,index:K};de=K-1}}return{found:!1,index:he}}U.fromXML=function(M,q,K){var he=C.parser(!0,{xmlns:!0}),de=[],Ve=[],St=[],st=0,at=null;he.onclosetag=function(Ct){if(de[0]instanceof Ie)at.head!==null&&at.head.styling!==null&&mt(at.head.styling,de[0].styleRefs,de[0].styleAttrs,q),delete de[0].styleRefs;else if(de[0]instanceof A)for(var hn in de[0].styles)de[0].styles.hasOwnProperty(hn)&&kt(de[0],de[0].styles[hn],q);else if(de[0]instanceof Te||de[0]instanceof je){if(de[0].contents.length>1){var Qt,nn=[de[0].contents[0]];for(Qt=1;Qt<de[0].contents.length;Qt++)de[0].contents[Qt]instanceof ot&&nn[nn.length-1]instanceof ot?nn[nn.length-1].text+=de[0].contents[Qt].text:nn.push(de[0].contents[Qt]);de[0].contents=nn}de[0]instanceof je&&de[0].contents.length===1&&de[0].contents[0]instanceof ot&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof F&&(de[0].node.uri===y.ns_tt&&de[0].node.local==="metadata"?st--:st>0&&K&&"onCloseTag"in K&&K.onCloseTag());St.shift(),Ve.shift(),de.shift()},he.ontext=function(Ct){if(de[0]!==void 0)if(de[0]instanceof je||de[0]instanceof Te){if(de[0]instanceof je){var hn=de[0].styleAttrs[v.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var Qt=new ot;Qt.initFromText(at,de[0],Ct,Ve[0],St[0],q),de[0].contents.push(Qt)}else de[0]instanceof F&&st>0&&K&&"onText"in K&&K.onText(Ct)},he.onopentag=function(Ct){var hn=Ct.attributes["xml:space"];hn?St.unshift(hn.value):St.length===0?St.unshift("default"):St.unshift(St[0]);var Qt=Ct.attributes["xml:lang"];if(Qt?Ve.unshift(Qt.value):Ve.length===0?Ve.unshift(""):Ve.unshift(Ve[0]),Ct.uri===y.ns_tt)if(Ct.local==="tt")at!==null&&Ue(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(at=new N).initFromNode(Ct,Ve[0],q),de.unshift(at);else if(Ct.local==="head")de[0]instanceof N||Ue(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(at.head);else if(Ct.local==="styling")de[0]instanceof _||Ue(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(at.head.styling);else if(Ct.local==="style"){var nn;de[0]instanceof A?((nn=new b).initFromNode(Ct,q),nn.id?at.head.styling.styles[nn.id]=nn:te(q,"<style> element missing @id attribute"),de.unshift(nn)):de[0]instanceof Ie?((nn=new b).initFromNode(Ct,q),Rt(nn.styleAttrs,de[0].styleAttrs),de.unshift(nn)):Ue(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Ct.local==="initial"){var Ot;if(de[0]instanceof A){for(var Un in(Ot=new j).initFromNode(Ct,q),Ot.styleAttrs)Ot.styleAttrs.hasOwnProperty(Un)&&(at.head.styling.initials[Un]=Ot.styleAttrs[Un]);de.unshift(Ot)}else Ue(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Ct.local==="layout")de[0]instanceof _||Ue(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(at.head.layout);else if(Ct.local==="region"){de[0]instanceof Y||Ue(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new Ie;gr.initFromNode(at,Ct,Ve[0],q),!gr.id||gr.id in at.head.layout.regions?te(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):at.head.layout.regions[gr.id]=gr,de.unshift(gr)}else if(Ct.local==="body"){de[0]instanceof N||Ue(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),at.body!==null&&Ue(q,"Second <body> element at "+this.line+","+this.column+")");var Or=new Ce;Or.initFromNode(at,Ct,Ve[0],q),at.body=Or,de.unshift(Or)}else if(Ct.local==="div"){de[0]instanceof Je||de[0]instanceof Ce||Ue(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new Je;dr.initFromNode(at,de[0],Ct,Ve[0],q);var ei=dr.styleAttrs[v.byName.backgroundImage.qname];ei&&(dr.contents.push(new W(ei)),delete dr.styleAttrs[v.byName.backgroundImage.qname]),de[0].contents.push(dr),de.unshift(dr)}else if(Ct.local==="image"){de[0]instanceof Je||Ue(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Ji=new W;Ji.initFromNode(at,de[0],Ct,Ve[0],q),de[0].contents.push(Ji),de.unshift(Ji)}else if(Ct.local==="p"){de[0]instanceof Je||Ue(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Lr=new Te;Lr.initFromNode(at,de[0],Ct,Ve[0],q),de[0].contents.push(Lr),de.unshift(Lr)}else if(Ct.local==="span"){de[0]instanceof je||de[0]instanceof Te||Ue(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var eo=new je;eo.initFromNode(at,de[0],Ct,Ve[0],St[0],q),de[0].contents.push(eo),de.unshift(eo)}else if(Ct.local==="br"){de[0]instanceof je||de[0]instanceof Te||Ue(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var _i=new ct;_i.initFromNode(at,de[0],Ct,Ve[0],q),de[0].contents.push(_i),de.unshift(_i)}else if(Ct.local==="set"){de[0]instanceof je||de[0]instanceof Te||de[0]instanceof Je||de[0]instanceof Ce||de[0]instanceof Ie||de[0]instanceof ct||Ue(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Mi=new qe;Mi.initFromNode(at,de[0],Ct,q),de[0].sets.push(Mi),de.unshift(Mi)}else de.unshift(new F(Ct));else de.unshift(new F(Ct));if(de[0]instanceof F){if(Ct.uri===y.ns_tt&&Ct.local==="metadata")st++;else if(st>0&&K&&"onOpenTag"in K){var zi=[];for(var to in Ct.attributes)zi[Ct.attributes[to].uri+" "+Ct.attributes[to].local]={uri:Ct.attributes[to].uri,local:Ct.attributes[to].local,value:Ct.attributes[to].value};K.onOpenTag(Ct.uri,Ct.local,zi)}}},he.write(M).close(),delete at.head.styling.styles;var tt=!1;for(var ft in at.head.layout.regions)if(at.head.layout.regions.hasOwnProperty(ft)){tt=!0;break}if(!tt){var Et=Ie.prototype.createDefaultRegion(at.lang);at.head.layout.regions[Et.id]=Et}for(var Tt in at.head.layout.regions)at.head.layout.regions.hasOwnProperty(Tt)&&T(at,at.head.layout.regions[Tt],null,null);return at.body&&T(at,at.body,null,null),at.body&&m(at.body),at},N.prototype.initFromNode=function(M,q,K){var he=function(st,at){var tt=rt(st,y.ns_ttp,"cellResolution"),ft=15,Et=32;if(tt!==null){var Tt=/(\d+) (\d+)/.exec(tt);Tt!==null?(Et=parseInt(Tt[1]),ft=parseInt(Tt[2])):Re(at,"Malformed cellResolution value (using initial value instead)")}return{w:Et,h:ft}}(M,K);this.cellLength={h:new D.ComputedLength(0,1/he.h),w:new D.ComputedLength(1/he.w,0)};var de=function(st,at){var tt,ft=rt(st,y.ns_ttp,"frameRate"),Et=30;ft!==null&&((tt=/(\d+)/.exec(ft))!==null?Et=parseInt(tt[1]):Re(at,"Malformed frame rate attribute (using initial value instead)"));var Tt=rt(st,y.ns_ttp,"frameRateMultiplier"),Ct=1;Tt!==null&&((tt=/(\d+) (\d+)/.exec(Tt))!==null?Ct=parseInt(tt[1])/parseInt(tt[2]):Re(at,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=Ct*Et,Qt=1,nn=rt(st,y.ns_ttp,"tickRate");return nn===null?ft!==null&&(Qt=hn):(tt=/(\d+)/.exec(nn))!==null?Qt=parseInt(tt[1]):Re(at,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:Qt}}(M,K);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=function(st,at){var tt=rt(st,y.ns_ittp,"aspectRatio");tt===null&&(tt=rt(st,y.ns_ttp,"displayAspectRatio"));var ft=null;if(tt!==null){var Et=/(\d+)\s+(\d+)/.exec(tt);if(Et!==null){var Tt=parseInt(Et[1]),Ct=parseInt(Et[2]);Tt!==0&&Ct!==0?ft=Tt/Ct:te(at,"Illegal aspectRatio values (ignoring)")}else te(at,"Malformed aspectRatio attribute (ignoring)")}return ft}(M,K);var Ve=rt(M,y.ns_ttp,"timeBase");Ve!==null&&Ve!=="media"&&Ue(K,"Unsupported time base");var St=function(st,at){var tt=rt(st,y.ns_tts,"extent");if(tt===null)return null;var ft=tt.split(" ");if(ft.length!==2)return Re(at,"Malformed extent (ignoring)"),null;var Et=D.parseLength(ft[0]),Tt=D.parseLength(ft[1]);return Tt&&Et?{h:Tt,w:Et}:(Re(at,"Malformed extent values (ignoring)"),null)}(M,K);St===null?this.pxLength={h:null,w:null}:(St.h.unit==="px"&&St.w.unit==="px"||Ue(K,"Extent on TT must be in px or absent"),this.pxLength={h:new D.ComputedLength(0,1/St.h.value),w:new D.ComputedLength(1/St.w.value,0)}),this.dimensions={h:new D.ComputedLength(0,1),w:new D.ComputedLength(1,0)},this.lang=q},N.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=O(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var K=O(this.events,M.end);K.found||this.events.splice(K.index,0,M.end)}}},N.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},N.prototype.getMediaTimeEvents=function(){return this.events},b.prototype.initFromNode=function(M,q){this.id=gt(M),this.styleAttrs=We(M,q),this.styleRefs=Me(M)},j.prototype.initFromNode=function(M,q){for(var K in this.styleAttrs={},M.attributes)if(M.attributes[K].uri===y.ns_itts||M.attributes[K].uri===y.ns_ebutts||M.attributes[K].uri===y.ns_tts){var he=M.attributes[K].uri+" "+M.attributes[K].local;this.styleAttrs[he]=M.attributes[K].value}},W.prototype.initFromNode=function(M,q,K,he,de){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||te(de,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||te(de,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,M,q,K,de),me.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),this.lang=he},se.prototype.initFromNode=function(M,q,K,he){this.id=gt(K)},x.prototype.initFromNode=function(M,q,K,he){this.regionID=function(de){return de&&"region"in de.attributes?de.attributes.region.value:""}(K)},X.prototype.initFromNode=function(M,q,K,he){this.styleAttrs=We(K,he),M.head!==null&&M.head.styling!==null&&mt(M.head.styling,Me(K),this.styleAttrs,he)},ce.prototype.initFromNode=function(M,q,K,he){this.sets=[]},oe.prototype.initFromNode=function(M,q,K,he){this.contents=[]},me.prototype.initFromNode=function(M,q,K,he){var de=function(Ve,St,st,at){var tt=null;st&&"begin"in st.attributes&&(tt=Ht(Ve.tickRate,Ve.effectiveFrameRate,st.attributes.begin.value))===null&&Re(at,"Malformed begin value "+st.attributes.begin.value+" (using 0)");var ft=null;st&&"dur"in st.attributes&&(ft=Ht(Ve.tickRate,Ve.effectiveFrameRate,st.attributes.dur.value))===null&&Re(at,"Malformed dur value "+st.attributes.dur.value+" (ignoring)");var Et=null;return st&&"end"in st.attributes&&(Et=Ht(Ve.tickRate,Ve.effectiveFrameRate,st.attributes.end.value))===null&&Re(at,"Malformed end value (ignoring)"),{explicit_begin:tt,explicit_end:Et,explicit_dur:ft}}(M,0,K,he);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=function(Ve,St){var st=Ve&&"timeContainer"in Ve.attributes?Ve.attributes.timeContainer.value:null;return st&&st!=="par"?st==="seq"?"seq":(te(St,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,he)},Ce.prototype.initFromNode=function(M,q,K,he){X.prototype.initFromNode.call(this,M,null,q,he),me.prototype.initFromNode.call(this,M,null,q,he),ce.prototype.initFromNode.call(this,M,null,q,he),x.prototype.initFromNode.call(this,M,null,q,he),oe.prototype.initFromNode.call(this,M,null,q,he),this.lang=K},Je.prototype.initFromNode=function(M,q,K,he,de){X.prototype.initFromNode.call(this,M,q,K,de),me.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=he},Te.prototype.initFromNode=function(M,q,K,he,de){X.prototype.initFromNode.call(this,M,q,K,de),me.prototype.initFromNode.call(this,M,q,K,de),ce.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=he},je.prototype.initFromNode=function(M,q,K,he,de,Ve){X.prototype.initFromNode.call(this,M,q,K,Ve),me.prototype.initFromNode.call(this,M,q,K,Ve),ce.prototype.initFromNode.call(this,M,q,K,Ve),x.prototype.initFromNode.call(this,M,q,K,Ve),oe.prototype.initFromNode.call(this,M,q,K,Ve),this.space=de,this.lang=he},ot.prototype.initFromText=function(M,q,K,he,de,Ve){me.prototype.initFromNode.call(this,M,q,null,Ve),this.text=K,this.space=de,this.lang=he},ct.prototype.initFromNode=function(M,q,K,he,de){x.prototype.initFromNode.call(this,M,q,K,de),me.prototype.initFromNode.call(this,M,q,K,de),this.lang=he},Ie.prototype.createDefaultRegion=function(M){var q=new Ie;return se.call(q,""),X.call(q,{}),ce.call(q,[]),me.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},Ie.prototype.initFromNode=function(M,q,K,he){se.prototype.initFromNode.call(this,M,null,q,he),me.prototype.initFromNode.call(this,M,null,q,he),ce.prototype.initFromNode.call(this,M,null,q,he),this.styleAttrs=We(q,he),this.styleRefs=Me(q),this.lang=K},qe.prototype.initFromNode=function(M,q,K,he){me.prototype.initFromNode.call(this,M,q,K,he);var de=We(K,he);for(var Ve in this.qname=null,this.value=null,de)if(de.hasOwnProperty(Ve)){if(this.qname){te(he,"More than one style specified on set");break}this.qname=Ve,this.value=de[Ve]}}})(g,typeof sax>"u"?w(5378):sax,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},506:function(R,g,w){var U=/firefox/i.test(navigator.userAgent);(function(C,y,v){function D(oe,me,Ce,Je){var Te;if(Ce.kind==="region")(Te=document.createElement("div")).style.position="absolute";else if(Ce.kind==="body")Te=document.createElement("div");else if(Ce.kind==="div")Te=document.createElement("div");else if(Ce.kind==="image"){if(Te=document.createElement("img"),oe.imgResolver!==null&&Ce.src!==null){var je=oe.imgResolver(Ce.src,Te);je&&(Te.src=je),Te.height=oe.regionH,Te.width=oe.regionW}}else if(Ce.kind==="p")Te=document.createElement("p");else if(Ce.kind==="span")if(Ce.styleAttrs[v.byName.ruby.qname]==="container")Te=document.createElement("ruby"),oe.ruby=!0;else if(Ce.styleAttrs[v.byName.ruby.qname]==="base")Te=document.createElement("span");else if(Ce.styleAttrs[v.byName.ruby.qname]==="text")Te=document.createElement("rt");else if(Ce.styleAttrs[v.byName.ruby.qname]==="baseContainer")Te=document.createElement("rbc");else if(Ce.styleAttrs[v.byName.ruby.qname]==="textContainer")Te=document.createElement("rtc");else{if(Ce.styleAttrs[v.byName.ruby.qname]==="delimiter")return;Te=document.createElement("span")}else Ce.kind==="br"&&(Te=document.createElement("br"));if(Te){if(Ce.lang&&(Ce.kind!=="region"&&Ce.lang===Je.lang||(Te.lang=Ce.lang)),me.appendChild(Te),Te.style.margin="0",Ce.kind==="region"){var ot=Ce.styleAttrs[v.byName.writingMode.qname];ot==="lrtb"||ot==="lr"?(oe.ipd="lr",oe.bpd="tb"):ot==="rltb"||ot==="rl"?(oe.ipd="rl",oe.bpd="tb"):ot==="tblr"?(oe.ipd="tb",oe.bpd="lr"):ot!=="tbrl"&&ot!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(Ce.kind==="p"&&oe.bpd==="tb"){var ct=Ce.styleAttrs[v.byName.direction.qname];oe.ipd=ct==="ltr"?"lr":"rl"}for(var Ie=0;Ie<j.length;Ie++){var qe=j[Ie],gt=Ce.styleAttrs[qe.qname];gt!==void 0&&qe.map!==null&&qe.map(oe,Te,Ce,gt)}var Me=Te,We=Ce.styleAttrs[v.byName.linePadding.qname];if(We&&!We.isZero()){var rt=We.toUsedLength(oe.w,oe.h);if(rt>0){var Ht=Math.ceil(rt)+"px";oe.bpd==="tb"?(Me.style.paddingLeft=Ht,Me.style.paddingRight=Ht):(Me.style.paddingTop=Ht,Me.style.paddingBottom=Ht),oe.lp=We}}var kt=Ce.styleAttrs[v.byName.multiRowAlign.qname];if(kt&&kt!=="auto"){var mt=document.createElement("span");mt.style.display="inline-block",mt.style.textAlign=kt,Te.appendChild(mt),Me=mt,oe.mra=kt}var Rt=Ce.styleAttrs[v.byName.rubyReserve.qname];if(Rt&&Rt[0]!=="none"&&(oe.rubyReserve=Rt),Ce.styleAttrs[v.byName.fillLineGap.qname]&&(oe.flg=!0),Ce.kind==="span"&&Ce.text){var Re=Ce.styleAttrs[v.byName.textEmphasis.qname];if(Re&&Re.style!=="none"&&(oe.textEmphasis=!0),v.byName.textCombine.qname in Ce.styleAttrs&&Ce.styleAttrs[v.byName.textCombine.qname]==="all")Te.textContent=Ce.text,Te._isd_element=Ce,Re&&A(oe,Te,0,Re);else for(var te="",Ue=0;Ue<Ce.text.length;Ue++){te+=Ce.text.charAt(Ue);var O=Ce.text.charCodeAt(Ue);if(O<55296||O>56319||Ue===Ce.text.length-1){var M=document.createElement("span");M.textContent=te,Re&&A(oe,M,0,Re),Te.appendChild(M),te="",M._isd_element=Ce}}}if("contents"in Ce)for(var q=0;q<Ce.contents.length;q++)D(oe,Me,Ce.contents[q],Ce);var K=[];if(Ce.kind==="p"&&(_(oe,Me,K,null),oe.rubyReserve&&(function(st,at){for(var tt=0;tt<st.length;tt++){var ft,Et,Tt=document.createElement("ruby"),Ct=document.createElement("span");Ct.textContent="",Tt.appendChild(Ct);var hn,Qt=at.rubyReserve[1].toUsedLength(at.w,at.h)+"px";at.rubyReserve[0]==="both"||at.rubyReserve[0]==="outside"&&st.length==1?((ft=document.createElement("rtc")).style[se]=$?"after":"under",ft.textContent="",ft.style.fontSize=Qt,(Et=document.createElement("rtc")).style[se]=$?"before":"over",Et.textContent="",Et.style.fontSize=Qt,Tt.appendChild(ft),Tt.appendChild(Et)):((ft=document.createElement("rtc")).textContent="",ft.style.fontSize=Qt,hn=at.rubyReserve[0]==="after"||at.rubyReserve[0]==="outside"&&tt>0?$?"after":at.bpd==="tb"||at.bpd==="rl"?"under":"over":$?"before":at.bpd==="tb"||at.bpd==="rl"?"over":"under",ft.style[se]=hn,Tt.appendChild(ft));for(var nn=null,Ot=0;Ot<st[tt].rbc.length;Ot++)if(st[tt].rbc[Ot].localName==="ruby"){nn=st[tt].rbc[Ot];for(var Un=0;Un<nn.style.length;Un++)Tt.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||st[tt].elements[0].node).parentElement.insertBefore(Tt,nn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(st,at){for(var tt=0;tt<st.length;tt++)for(var ft=0;ft<st[tt].rbc.length;ft++){var Et;st[tt].rbc[ft].style[se]||(Et=$?tt===0?"before":"after":at.bpd==="tb"||at.bpd==="rl"?tt===0?"over":"under":tt===0?"under":"over",st[tt].rbc[ft].style[se]=Et)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(st,at){for(var tt=0;tt<st.length;tt++)for(var ft=0;ft<st[tt].te.length;ft++){var Et;st[tt].te[ft].style[X]&&st[tt].te[ft].style[X]!=="none"||(Et=at.bpd==="tb"?tt===0?"left over":"left under":at.bpd==="rl"?tt===0?"right under":"left under":tt===0?"left under":"right under",st[tt].te[ft].style[X]=Et)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(st){for(var at=0;at<st.length-1;at++){var tt=st[at].elements.length;if(tt!==0&&st[at].br===!1){var ft=document.createElement("br"),Et=st[at].elements[tt-1].node;Et.parentElement.insertBefore(ft,Et.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(st,at,tt){if(st!==null)for(var ft=0;ft<st.length;ft++){var Et=st[ft].elements.length,Tt=Math.ceil(at)+"px",Ct="-"+Math.ceil(at)+"px";if(Et!==0){var hn=st[ft].elements[st[ft].start_elem],Qt=st[ft].elements[st[ft].end_elem];if(hn===Qt){var nn=hn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}tt.ipd==="lr"?(hn.node.style.marginLeft=Ct,hn.node.style.paddingLeft=Tt):tt.ipd==="rl"?(hn.node.style.paddingRight=Tt,hn.node.style.marginRight=Ct):tt.ipd==="tb"&&(hn.node.style.paddingTop=Tt,hn.node.style.marginTop=Ct),tt.ipd==="lr"?(U||(Qt.node.style.marginRight=Ct),Qt.node.style.paddingRight=Tt):tt.ipd==="rl"?(Qt.node.style.paddingLeft=Tt,U||(Qt.node.style.marginLeft=Ct)):tt.ipd==="tb"&&(Qt.node.style.paddingBottom=Tt,Qt.node.style.marginBottom=Ct)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(st,at){for(var tt=0;tt<st.length;tt++)for(var ft=st[tt],Et=1;Et<ft.elements.length;){var Tt=ft.elements[Et-1],Ct=ft.elements[Et];T(Tt.node,Ct.node,at)?ft.elements.splice(Et,1):Et++}for(var hn,Qt,nn=[],Ot=0;Ot<st.length;Ot++)for(var Un=0;Un<st[Ot].elements.length;Un++)(Qt=m(hn=st[Ot].elements[Un].node,nn,!1))&&(hn.style.backgroundColor=Qt);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(K,oe),oe.flg)){var he=N(Me.getBoundingClientRect(),oe);(function(st,at,tt,ft,Et){for(var Tt=Math.sign(tt-at),Ct=0;Ct<=st.length;Ct++){var hn,Qt,nn,Ot;if(hn=Ct===0?Math.round(at):Ct===st.length?Math.round(tt):Math.round((st[Ct-1].after+st[Ct].before)/2),Ct>0&&st[Ct-1])for(nn=0;nn<st[Ct-1].elements.length;nn++)Qt=Tt*(hn-(Ot=st[Ct-1].elements[nn]).after)+"px",ft.bpd==="lr"?Ot.node.style.paddingRight=Qt:ft.bpd==="rl"?Ot.node.style.paddingLeft=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingBottom=Qt);if(Ct<st.length)for(nn=0;nn<st[Ct].elements.length;nn++)Qt=Tt*((Ot=st[Ct].elements[nn]).before-hn)+"px",ft.bpd==="lr"?Ot.node.style.paddingLeft=Qt:ft.bpd==="rl"?Ot.node.style.paddingRight=Qt:ft.bpd==="tb"&&(Ot.node.style.paddingTop=Qt)}})(K,he.before,he.after,oe),oe.flg=null}if(Ce.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&Ce.contents.length>0&&Ce.styleAttrs[v.byName.displayAlign.qname]==="after"){_(oe,Me,K,null);var de=new F(Ce.id===""?"_":Ce.id,K);if(oe.currentISDState[de.id]=de,oe.previousISDState&&de.id in oe.previousISDState&&oe.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===oe.previousISDState[de.id].plist[oe.previousISDState[de.id].plist.length-1].text){var Ve=Te.firstElementChild,St=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;Ve.style.bottom="-"+St+"px",Ve.style.transition="transform 0.4s",Ve.style.position="relative",Ve.style.transform="translateY(-"+St+"px)"}}}else ce(oe.errorHandler,"Error processing ISD element kind: "+Ce.kind)}function m(oe,me,Ce){return oe.style.backgroundColor?(Ce&&!me.includes(oe)&&me.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,me,!0):void 0}function T(oe,me,Ce){if(oe.tagName==="SPAN"&&me.tagName==="SPAN"&&oe._isd_element===me._isd_element){if(!oe._isd_element)return ce(Ce.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=me.textContent;for(var Je=0;Je<me.style.length;Je++){var Te=me.style[Je];(Te.indexOf("border")>=0||Te.indexOf("padding")>=0||Te.indexOf("margin")>=0)&&(oe.style[Te]=me.style[Te])}return me.parentElement.removeChild(me),!0}return!1}function F(oe,me){this.id=oe,this.plist=me}function N(oe,me){var Ce={before:null,after:null,start:null,end:null};return me.bpd==="tb"?(Ce.before=oe.top,Ce.after=oe.bottom,me.ipd==="lr"?(Ce.start=oe.left,Ce.end=oe.right):(Ce.start=oe.right,Ce.end=oe.left)):me.bpd==="lr"?(Ce.before=oe.left,Ce.after=oe.right,Ce.start=oe.top,Ce.end=oe.bottom):me.bpd==="rl"&&(Ce.before=oe.right,Ce.after=oe.left,Ce.start=oe.top,Ce.end=oe.bottom),Ce}function _(oe,me,Ce,Je){if(me.localName!=="rt"&&me.localName!=="rtc"){var Te,je,ot,ct,Ie=me.style.backgroundColor||Je;if(me.childElementCount===0)if(me.localName==="span"||me.localName==="rb"){var qe=N(me.getBoundingClientRect(),oe);if(Ce.length!==0&&(Te=qe.before,je=qe.after,ot=Ce[Ce.length-1].before,je<(ct=Ce[Ce.length-1].after)&&Te>ot||ct<=je&&ot>=Te)){var gt=Math.sign(qe.after-qe.before),Me=Math.sign(qe.end-qe.start);gt*(qe.before-Ce[Ce.length-1].before)<0&&(Ce[Ce.length-1].before=qe.before),gt*(qe.after-Ce[Ce.length-1].after)>0&&(Ce[Ce.length-1].after=qe.after),Me*(qe.start-Ce[Ce.length-1].start)<0&&(Ce[Ce.length-1].start=qe.start,Ce[Ce.length-1].start_elem=Ce[Ce.length-1].elements.length),Me*(qe.end-Ce[Ce.length-1].end)>0&&(Ce[Ce.length-1].end=qe.end,Ce[Ce.length-1].end_elem=Ce[Ce.length-1].elements.length)}else Ce.push({before:qe.before,after:qe.after,start:qe.start,end:qe.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ce[Ce.length-1].text+=me.textContent,Ce[Ce.length-1].elements.push({node:me,bgcolor:Ie,before:qe.before,after:qe.after})}else me.localName==="br"&&Ce.length!==0&&(Ce[Ce.length-1].br=!0);else for(var We=me.firstChild;We;)We.nodeType===Node.ELEMENT_NODE&&(_(oe,We,Ce,Ie),We.localName==="ruby"||We.localName==="rtc"?Ce.length>0&&Ce[Ce.length-1].rbc.push(We):We.localName==="span"&&We.style[x]&&We.style[x]!=="none"&&Ce.length>0&&Ce[Ce.length-1].te.push(We)),We=We.nextSibling}}function A(oe,me,Ce,Je){var Te;Je.style!=="none"&&(Je.style==="auto"?me.style[x]="filled":me.style[x]=Je.style+" "+Je.symbol,(Je.position==="before"||Je.position==="after")&&(Te=oe.bpd==="tb"?Je.position==="before"?"left over":"left under":oe.bpd==="rl"?Je.position==="before"?"right under":"left under":Je.position==="before"?"left under":"right under",me.style[X]=Te))}function b(oe,me){this.qname=oe,this.map=me}C.render=function(oe,me,Ce,Je,Te,je,ot,ct,Ie){var qe=Je||me.clientHeight,gt=Te||me.clientWidth;if(oe.aspectRatio!==null){var Me=qe*oe.aspectRatio;Me>gt?qe=Math.round(gt/oe.aspectRatio):gt=Me}var We=document.createElement("div");We.style.position="relative",We.style.width=gt+"px",We.style.height=qe+"px",We.style.margin="auto",We.style.top=0,We.style.bottom=0,We.style.left=0,We.style.right=0,We.style.zIndex=0;var rt={h:qe,w:gt,regionH:null,regionW:null,imgResolver:Ce,displayForcedOnlyMode:je||!1,isd:oe,errorHandler:ot,previousISDState:ct,enableRollUp:Ie||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(me.appendChild(We),"contents"in oe)for(var Ht=0;Ht<oe.contents.length;Ht++)D(rt,We,oe.contents[Ht],oe);return rt.currentISDState};for(var j=[new b("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,me,Ce,Je){Je[3]!==0&&(me.style.backgroundColor="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")")}),new b("http://www.w3.org/ns/ttml#styling color",function(oe,me,Ce,Je){me.style.color="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")"}),new b("http://www.w3.org/ns/ttml#styling direction",function(oe,me,Ce,Je){me.style.direction=Je}),new b("http://www.w3.org/ns/ttml#styling display",function(oe,me,Ce,Je){}),new b("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,me,Ce,Je){me.style.display="flex",me.style.flexDirection="column",Je==="before"?me.style.justifyContent="flex-start":Je==="center"?me.style.justifyContent="center":Je==="after"&&(me.style.justifyContent="flex-end")}),new b("http://www.w3.org/ns/ttml#styling extent",function(oe,me,Ce,Je){oe.regionH=Je.h.toUsedLength(oe.w,oe.h),oe.regionW=Je.w.toUsedLength(oe.w,oe.h);var Te=0,je=0,ot=Ce.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];ot&&(Te=ot[0].toUsedLength(oe.w,oe.h)+ot[2].toUsedLength(oe.w,oe.h),je=ot[1].toUsedLength(oe.w,oe.h)+ot[3].toUsedLength(oe.w,oe.h)),me.style.height=oe.regionH-Te+"px",me.style.width=oe.regionW-je+"px"}),new b("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,me,Ce,Je){for(var Te=[],je=0;je<Je.length;je++)Je[je]=Je[je].trim(),Je[je]==="monospaceSerif"?(Te.push("Courier New"),Te.push('"Liberation Mono"'),Te.push("Courier"),Te.push("monospace")):Je[je]==="proportionalSansSerif"?(Te.push("Arial"),Te.push("Helvetica"),Te.push('"Liberation Sans"'),Te.push("sans-serif")):Je[je]==="monospace"?Te.push("monospace"):Je[je]==="sansSerif"?Te.push("sans-serif"):Je[je]==="serif"?Te.push("serif"):Je[je]==="monospaceSansSerif"?(Te.push("Consolas"),Te.push("monospace")):Je[je]==="proportionalSerif"?Te.push("serif"):Te.push(Je[je]);if(Te.length>0){for(var ot=[Te[0]],ct=1;ct<Te.length;ct++)ot.indexOf(Te[ct])==-1&&ot.push(Te[ct]);Te=ot}me.style.fontFamily=Te.join(",")}),new b("http://www.w3.org/ns/ttml#styling shear",function(oe,me,Ce,Je){if(Je!==0){var Te=-.9*Je;oe.bpd==="tb"?me.style.transform="skewX("+Te+"deg)":me.style.transform="skewY("+Te+"deg)"}}),new b("http://www.w3.org/ns/ttml#styling fontSize",function(oe,me,Ce,Je){me.style.fontSize=Je.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,me,Ce,Je){me.style.fontStyle=Je}),new b("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,me,Ce,Je){me.style.fontWeight=Je}),new b("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,me,Ce,Je){me.style.lineHeight=Je==="normal"?"normal":Je.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling opacity",function(oe,me,Ce,Je){me.style.opacity=Je}),new b("http://www.w3.org/ns/ttml#styling origin",function(oe,me,Ce,Je){me.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",me.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling overflow",function(oe,me,Ce,Je){me.style.overflow=Je}),new b("http://www.w3.org/ns/ttml#styling padding",function(oe,me,Ce,Je){var Te=[];Te[0]=Je[0].toUsedLength(oe.w,oe.h)+"px",Te[1]=Je[3].toUsedLength(oe.w,oe.h)+"px",Te[2]=Je[2].toUsedLength(oe.w,oe.h)+"px",Te[3]=Je[1].toUsedLength(oe.w,oe.h)+"px",me.style.padding=Te.join(" ")}),new b("http://www.w3.org/ns/ttml#styling position",function(oe,me,Ce,Je){me.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",me.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,me,Ce,Je){me.style.rubyAlign=Je==="spaceAround"?"space-around":"center"}),new b("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,me,Ce,Je){var Te;Je!=="before"&&Je!=="after"||(Te=$?Je:oe.bpd==="tb"||oe.bpd==="rl"?Je==="before"?"over":"under":Je==="before"?"under":"over",me.parentElement.style[se]=Te)}),new b("http://www.w3.org/ns/ttml#styling showBackground",null),new b("http://www.w3.org/ns/ttml#styling textAlign",function(oe,me,Ce,Je){var Te;Te=Je==="start"?oe.ipd==="rl"?"right":"left":Je==="end"?oe.ipd==="rl"?"left":"right":Je,me.style.textAlign=Te}),new b("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,me,Ce,Je){me.style.textDecoration=Je.join(" ").replace("lineThrough","line-through")}),new b("http://www.w3.org/ns/ttml#styling textOutline",function(oe,me,Ce,Je){}),new b("http://www.w3.org/ns/ttml#styling textShadow",function(oe,me,Ce,Je){var Te=Ce.styleAttrs[v.byName.textOutline.qname];if(Je==="none"&&Te==="none")me.style.textShadow="";else{var je=[];if(Te!=="none"){var ot="rgba("+Te.color[0].toString()+","+Te.color[1].toString()+","+Te.color[2].toString()+","+(Te.color[3]/255).toString()+")";je.push("1px 1px 1px "+ot),je.push("-1px 1px 1px "+ot),je.push("1px -1px 1px "+ot),je.push("-1px -1px 1px "+ot)}if(Je!=="none")for(var ct=0;ct<Je.length;ct++)je.push(Je[ct].x_off.toUsedLength(oe.w,oe.h)+"px "+Je[ct].y_off.toUsedLength(oe.w,oe.h)+"px "+Je[ct].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Je[ct].color[0].toString()+","+Je[ct].color[1].toString()+","+Je[ct].color[2].toString()+","+(Je[ct].color[3]/255).toString()+")");me.style.textShadow=je.join(",")}}),new b("http://www.w3.org/ns/ttml#styling textCombine",function(oe,me,Ce,Je){me.style.textCombineUpright=Je}),new b("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,me,Ce,Je){}),new b("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,me,Ce,Je){var Te;Te=Je==="bidiOverride"?"bidi-override":Je,me.style.unicodeBidi=Te}),new b("http://www.w3.org/ns/ttml#styling visibility",function(oe,me,Ce,Je){me.style.visibility=Je}),new b("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,me,Ce,Je){Je==="wrap"?Ce.space==="preserve"?me.style.whiteSpace="pre-wrap":me.style.whiteSpace="normal":Ce.space==="preserve"?me.style.whiteSpace="pre":me.style.whiteSpace="noWrap"}),new b("http://www.w3.org/ns/ttml#styling writingMode",function(oe,me,Ce,Je){Je==="lrtb"||Je==="lr"||Je==="rltb"||Je==="rl"?me.style.writingMode="horizontal-tb":Je==="tblr"?me.style.writingMode="vertical-lr":Je!=="tbrl"&&Je!=="tb"||(me.style.writingMode="vertical-rl")}),new b("http://www.w3.org/ns/ttml#styling zIndex",function(oe,me,Ce,Je){me.style.zIndex=Je}),new b("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,me,Ce,Je){oe.displayForcedOnlyMode&&Je===!1&&(me.style.visibility="hidden")})],Y={},W=0;W<j.length;W++)Y[j[W].qname]=j[W];var $="webkitRubyPosition"in window.getComputedStyle(document.documentElement),se=$?"webkitRubyPosition":"rubyPosition",x="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ce(oe,me){if(oe&&oe.error&&oe.error(me))throw me}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4080:function(R,g,w){(function(U,C,y,v){U.generateISD=function(b,j,Y){var W,$=new N(b),se={},x={},X=b.head.styling.initials[y.byName.showBackground.qname],ce=b.head.styling.initials[y.byName.backgroundColor.qname];for(var oe in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(oe)){var me=b.head.layout.regions[oe],Ce=me.styleAttrs[y.byName.showBackground.qname]||X,Je=me.styleAttrs[y.byName.backgroundColor.qname]||ce;x[me.id]=(Ce==="always"||Ce===void 0)&&Je!==void 0&&!(j<me.begin||j>=me.end)}for(var Te in b.body&&b.body.regionID&&(x[b.body.regionID]=!0),W=b.body!==null?function ot(ct,Ie){if(Ie.contents){var qe={};for(var gt in Ie)Ie.hasOwnProperty(gt)&&(qe[gt]=Ie[gt]);return qe.contents=[],Ie.contents.filter(function(Me){return!(ct<Me.begin||ct>=Me.end)}).forEach(function(Me){var We=ot(ct,Me);We.regionID&&(x[We.regionID]=!0),We!==null&&qe.contents.push(We)}),qe}return Ie}(j,b.body):null,x[""]!==void 0&&(x[""]=!0),x)if(x[Te]){var je=m(b,j,b.head.layout.regions[Te],W,null,"",b.head.layout.regions[Te],Y,se);je!==null&&$.contents.push(je.element)}return $};var D=[y.byName.color.qname,y.byName.textCombine.qname,y.byName.textDecoration.qname,y.byName.textEmphasis.qname,y.byName.textOutline.qname,y.byName.textShadow.qname];function m(b,j,Y,W,$,se,x,X,ce){if(j<x.begin||j>=x.end)return null;var oe="regionID"in x&&x.regionID!==""?x.regionID:se;if($!==null&&oe!==Y.id&&(!("contents"in x)||"contents"in x&&x.contents.length===0||oe!==""))return null;var me=new _(x);if("sets"in x)for(var Ce=0;Ce<x.sets.length;Ce++)j<x.sets[Ce].begin||j>=x.sets[Ce].end||(me.styleAttrs[x.sets[Ce].qname]=x.sets[Ce].value);var Je={};for(var Te in me.styleAttrs)if(me.styleAttrs.hasOwnProperty(Te)&&(Je[Te]=!0,me.kind==="region"&&Te===y.byName.writingMode.qname&&!(y.byName.direction.qname in me.styleAttrs))){var je=me.styleAttrs[Te];je==="lrtb"||je==="lr"?me.styleAttrs[y.byName.direction.qname]="ltr":je!=="rltb"&&je!=="rl"||(me.styleAttrs[y.byName.direction.qname]="rtl")}if($!==null)for(var ot=0;ot<y.all.length;ot++){var ct=y.all[ot];if(ct.qname===y.byName.textDecoration.qname){var Ie=$.styleAttrs[ct.qname],qe=me.styleAttrs[ct.qname],gt=[];qe===void 0?gt=Ie:qe.indexOf("none")===-1?((qe.indexOf("noUnderline")===-1&&Ie.indexOf("underline")!==-1||qe.indexOf("underline")!==-1)&&gt.push("underline"),(qe.indexOf("noLineThrough")===-1&&Ie.indexOf("lineThrough")!==-1||qe.indexOf("lineThrough")!==-1)&&gt.push("lineThrough"),(qe.indexOf("noOverline")===-1&&Ie.indexOf("overline")!==-1||qe.indexOf("overline")!==-1)&&gt.push("overline")):gt.push("none"),me.styleAttrs[ct.qname]=gt}else if(ct.qname!==y.byName.fontSize.qname||ct.qname in me.styleAttrs||me.kind!=="span"||me.styleAttrs[y.byName.ruby.qname]!=="textContainer")if(ct.qname!==y.byName.fontSize.qname||ct.qname in me.styleAttrs||me.kind!=="span"||me.styleAttrs[y.byName.ruby.qname]!=="text")ct.inherit&&ct.qname in $.styleAttrs&&!(ct.qname in me.styleAttrs)&&(me.styleAttrs[ct.qname]=$.styleAttrs[ct.qname]);else{var Me=$.styleAttrs[y.byName.fontSize.qname];$.styleAttrs[y.byName.ruby.qname]==="textContainer"?me.styleAttrs[ct.qname]=Me:me.styleAttrs[ct.qname]=new v.ComputedLength(.5*Me.rw,.5*Me.rh)}else{var We=$.styleAttrs[y.byName.fontSize.qname];me.styleAttrs[ct.qname]=new v.ComputedLength(.5*We.rw,.5*We.rh)}}for(var rt=0;rt<y.all.length;rt++){var Ht=y.all[rt];if(!(Ht.qname in me.styleAttrs)&&!(Ht.qname===y.byName.position.qname&&y.byName.origin.qname in me.styleAttrs||Ht.qname===y.byName.origin.qname&&y.byName.position.qname in me.styleAttrs)){var kt=b.head.styling.initials[Ht.qname]||Ht.initial;if(kt!==null&&(me.kind==="region"||Ht.inherit===!1&&kt!==null)){var mt=Ht.parse(kt);mt!==null?(me.styleAttrs[Ht.qname]=mt,Je[Ht.qname]=!0):A(X,"Invalid initial value for '"+Ht.qname+"' on element '"+me.kind)}}}for(var Rt=0;Rt<y.all.length;Rt++){var Re=y.all[Rt];if(Re.qname in Je&&Re.compute!==null){var te=Re.compute(b,$,me,me.styleAttrs[Re.qname],ce);te!==null?me.styleAttrs[Re.qname]=te:(me.styleAttrs[Re.qname]=Re.compute(b,$,me,Re.parse(Re.initial),ce),A(X,"Style '"+Re.qname+"' on element '"+me.kind+"' cannot be computed"))}}if(me.styleAttrs[y.byName.display.qname]==="none")return null;var Ue=null;$===null?Ue=W===null?[]:[W]:"contents"in x&&(Ue=x.contents);for(var O=0;Ue!==null&&O<Ue.length;O++){var M=m(b,j,Y,W,me,oe,Ue[O],X,ce);M!==null&&me.contents.push(M.element)}for(var q in me.styleAttrs)if(me.styleAttrs.hasOwnProperty(q)){var K=!1;if(me.kind==="span"){var he=me.styleAttrs[y.byName.ruby.qname];(K=(he==="container"||he==="textContainer"||he==="baseContainer")&&D.indexOf(q)!==-1)||(K=he!=="container"&&q===y.byName.rubyAlign.qname),K||(K=!(he==="textContainer"||he==="text")&&q===y.byName.rubyPosition.qname)}if(!K){var de=y.byQName[q];"applies"in de&&(K=de.applies.indexOf(me.kind)===-1)}K&&delete me.styleAttrs[q]}var Ve=me.styleAttrs[y.byName.ruby.qname];if(me.kind==="p"||me.kind==="span"&&(Ve==="textContainer"||Ve==="text")){var St=[];T(me,St),function(st){for(var at,tt=0;tt<st.length;)if((at=st[tt]).kind!=="br"&&at.space!=="preserve"){var ft=at.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ft)&&(tt===0||(Et=st[tt-1]).kind==="br"||/[\r\n\t ]$/.test(Et.text))&&(ft=ft.substring(1)),at.text=ft,ft.length===0?st.splice(tt,1):tt++}else tt++;var Et,Tt;for(tt=0;tt<st.length;tt++)(at=st[tt]).kind!=="br"&&at.space!=="preserve"?/[ ]$/.test(at.text)&&(tt===st.length-1||(Tt=st[tt+1]).kind==="br"||Tt.space==="preserve"&&/^[\r\n]/.test(Tt.text))&&(at.text=at.text.slice(0,-1)):tt++}(St),F(me)}return me.kind==="div"&&y.byName.backgroundImage.qname in me.styleAttrs||me.kind==="br"||me.kind==="image"||"contents"in me&&me.contents.length>0||me.kind==="span"&&me.text!==null||me.kind==="region"&&me.styleAttrs[y.byName.showBackground.qname]==="always"?{region_id:oe,element:me}:null}function T(b,j){if("contents"in b)for(var Y=0;Y<b.contents.length;Y++){var W=b.contents[Y],$=W.styleAttrs[y.byName.ruby.qname];(W.kind!=="span"||$!=="textContainer"&&$!=="text")&&("contents"in W?T(W,j):(W.kind==="span"&&W.text.length!==0||W.kind==="br")&&j.push(W))}}function F(b){if(b.kind==="br")return!1;if("text"in b)return b.text.length===0;if("contents"in b){for(var j=b.contents.length;j--;)F(b.contents[j])&&b.contents.splice(j,1);return b.contents.length===0}}function N(b){this.contents=[],this.aspectRatio=b.aspectRatio,this.lang=b.lang}function _(b){for(var j in this.kind=b.kind||"region",this.lang=b.lang,b.id&&(this.id=b.id),this.styleAttrs={},b.styleAttrs)b.styleAttrs.hasOwnProperty(j)&&(this.styleAttrs[j]=b.styleAttrs[j]);"src"in b&&(this.src=b.src),"type"in b&&(this.type=b.type),"text"in b?this.text=b.text:(this.kind==="region"||"contents"in b)&&(this.contents=[]),"space"in b&&(this.space=b.space)}function A(b,j){if(b&&b.error&&b.error(j))throw j}})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscStyles>"u"?w(6811):imscStyles,typeof imscUtils>"u"?w(5926):imscUtils)},4403:function(R,g,w){g.generateISD=w(4080).generateISD,g.fromXML=w(3362).fromXML,g.renderHTML=w(506).render},210:function(R,g){(function(w){w.ns_tt="http://www.w3.org/ns/ttml",w.ns_tts="http://www.w3.org/ns/ttml#styling",w.ns_ttp="http://www.w3.org/ns/ttml#parameter",w.ns_xml="http://www.w3.org/XML/1998/namespace",w.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",w.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",w.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",w.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(R,g,w){(function(U,C,y){function v(T,F,N,_,A,b,j,Y){this.name=F,this.ns=T,this.qname=T+" "+F,this.inherit=A,this.animatable=b,this.initial=N,this.applies=_,this.parse=j,this.compute=Y}for(var D in U.all=[new v(C.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,y.parseColor,null),new v(C.ns_tts,"color","white",["span"],!0,!0,y.parseColor,null),new v(C.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var F=T.split(" ");if(F.length!==2)return null;var N=y.parseLength(F[0]),_=y.parseLength(F[1]);return _&&N?{h:_,w:N}:null},function(T,F,N,_,A){var b,j;if(_==="auto")b=new y.ComputedLength(0,1);else if((b=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(1,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:j}}),new v(C.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var F=T.split(","),N=[],_=0;_<F.length;_++)F[_]=F[_].trim(),F[_].charAt(0)!=="'"&&F[_].charAt(0)!=='"'&&F[_]==="default"?N.push("monospaceSerif"):N.push(F[_]);return N},null),new v(C.ns_tts,"shear","0%",["p"],!0,!0,y.parseLength,function(T,F,N,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new v(C.ns_tts,"fontSize","1c",["span","p"],!0,!0,y.parseLength,function(T,F,N,_,A){return y.toComputedLength(_.value,_.unit,F!==null?F.styleAttrs[U.byName.fontSize.qname]:T.cellLength.h,F!==null?F.styleAttrs[U.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new v(C.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:y.parseLength(T)},function(T,F,N,_,A){var b;if(_==="normal")b=_;else if((b=y.toComputedLength(_.value,_.unit,N.styleAttrs[U.byName.fontSize.qname],N.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return b}),new v(C.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new v(C.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var F=T.split(" ");if(F.length!==2)return null;var N=y.parseLength(F[0]),_=y.parseLength(F[1]);return _&&N?{h:_,w:N}:null},function(T,F,N,_,A){var b,j;if(_==="auto")b=new y.ComputedLength(0,0);else if((b=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(0,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:j}}),new v(C.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"padding","0px",["region"],!1,!0,function(T){var F=T.split(" ");if(F.length>4)return null;for(var N=[],_=0;_<F.length;_++){var A=y.parseLength(F[_]);if(!A)return null;N.push(A)}return N},function(T,F,N,_,A){var b;if(_.length===1)b=[_[0],_[0],_[0],_[0]];else if(_.length===2)b=[_[0],_[1],_[0],_[1]];else if(_.length===3)b=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;b=[_[0],_[1],_[2],_[3]]}var j=N.styleAttrs[U.byName.writingMode.qname];if(j==="lrtb"||j==="lr")b=[b[0],b[3],b[2],b[1]];else if(j==="rltb"||j==="rl")b=[b[0],b[1],b[2],b[3]];else if(j==="tblr")b=[b[3],b[0],b[1],b[2]];else{if(j!=="tbrl"&&j!=="tb")return null;b=[b[3],b[2],b[1],b[0]]}for(var Y=[],W=0;W<b.length;W++)if(b[W].value===0)Y[W]=new y.ComputedLength(0,0);else if(Y[W]=y.toComputedLength(b[W].value,b[W].unit,N.styleAttrs[U.byName.fontSize.qname],W===0||W===2?N.styleAttrs[U.byName.extent.qname].h:N.styleAttrs[U.byName.extent.qname].w,W===0||W===2?T.cellLength.h:T.cellLength.w,W===0||W===2?T.pxLength.h:T.pxLength.w),Y[W]===null)return null;return Y}),new v(C.ns_tts,"position","top left",["region"],!1,!0,function(T){return y.parsePosition(T)},function(T,F,N,_){var A,b;return(A=y.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new y.ComputedLength(-N.styleAttrs[U.byName.extent.qname].h.rw,T.dimensions.h.rh-N.styleAttrs[U.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(A=new y.ComputedLength(-A.rw-N.styleAttrs[U.byName.extent.qname].h.rw,T.dimensions.h.rh-A.rh-N.styleAttrs[U.byName.extent.qname].h.rh)),b=y.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new y.ComputedLength(T.dimensions.w.rw-N.styleAttrs[U.byName.extent.qname].w.rw,-N.styleAttrs[U.byName.extent.qname].w.rh),null,T.pxLength.w),A===null?null:(_.h.edge==="right"&&(b=new y.ComputedLength(T.dimensions.w.rw-b.rw-N.styleAttrs[U.byName.extent.qname].w.rw,-b.rh-N.styleAttrs[U.byName.extent.qname].w.rh)),{h:A,w:b}))}),new v(C.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new v(C.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var F=T.split(" "),N=[null,null];if(F.length===0||F.length>2||F[0]!=="none"&&F[0]!=="both"&&F[0]!=="after"&&F[0]!=="before"&&F[0]!=="outside")return null;if(N[0]=F[0],F.length===2&&F[0]!=="none"){var _=y.parseLength(F[1]);if(!_)return null;N[1]=_}return N},function(T,F,N,_,A){if(_[0]==="none")return _;var b;return(b=_[1]===null?new y.ComputedLength(.5*N.styleAttrs[U.byName.fontSize.qname].rw,.5*N.styleAttrs[U.byName.fontSize.qname].rh):y.toComputedLength(_[1].value,_[1].unit,N.styleAttrs[U.byName.fontSize.qname],N.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],b]}),new v(C.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,F,N,_,A){return _==="left"?"start":_==="right"?"end":_}),new v(C.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new v(C.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new v(C.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var F=T.split(" "),N={style:null,symbol:null,color:null,position:null},_=0;_<F.length;_++)if(F[_]==="none"||F[_]==="auto")N.style=F[_];else if(F[_]==="filled"||F[_]==="open")N.style=F[_];else if(F[_]==="circle"||F[_]==="dot"||F[_]==="sesame")N.symbol=F[_];else if(F[_]==="current")N.color=F[_];else if(F[_]==="outside"||F[_]==="before"||F[_]==="after")N.position=F[_];else if(N.color=y.parseColor(F[_]),N.color===null)return null;return N.style==null&&N.symbol==null?N.style="auto":(N.symbol=N.symbol||"circle",N.style=N.style||"filled"),N.position=N.position||"outside",N.color=N.color||"current",N},null),new v(C.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var F={},N=T.split(" ");if(N.length===0||N.length>2)return null;var _=y.parseColor(N[0]);if(F.color=_,_!==null&&N.shift(),N.length!==1)return null;var A=y.parseLength(N[0]);return A?(F.thickness=A,F):null},function(T,F,N,_,A){if(_==="none")return _;var b={};return _.color===null?b.color=N.styleAttrs[U.byName.color.qname]:b.color=_.color,b.thickness=y.toComputedLength(_.thickness.value,_.thickness.unit,N.styleAttrs[U.byName.fontSize.qname],N.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),b.thickness===null?null:b}),new v(C.ns_tts,"textShadow","none",["span"],!0,!0,y.parseTextShadow,function(T,F,N,_){if(_==="none")return _;for(var A=[],b=0;b<_.length;b++){var j={};if(j.x_off=y.toComputedLength(_[b][0].value,_[b][0].unit,null,N.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.w),j.x_off===null||(j.y_off=y.toComputedLength(_[b][1].value,_[b][1].unit,null,N.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.h),j.y_off===null))return null;if(_[b][2]===null)j.b_radius=0;else if(j.b_radius=y.toComputedLength(_[b][2].value,_[b][2].unit,null,N.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.h),j.b_radius===null)return null;_[b][3]===null?j.color=N.styleAttrs[U.byName.color.qname]:j.color=_[b][3],A.push(j)}return A}),new v(C.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new v(C.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var F;return T==="auto"?F=T:(F=parseInt(T),isNaN(F)&&(F=null)),F},null),new v(C.ns_ebutts,"linePadding","0c",["p"],!0,!1,y.parseLength,function(T,F,N,_,A){return y.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new v(C.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new v(C.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new v(C.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new v(C.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],U.byQName={},U.all)U.byQName[U.all[D].qname]=U.all[D];for(var m in U.byName={},U.all)U.byName[U.all[m].name]=U.all[m]})(g,typeof imscNames>"u"?w(210):imscNames,typeof imscUtils>"u"?w(5926):imscUtils)},5926:function(R,g){(function(w){var U=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,C=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};w.parseColor=function(m){var T,F=null,N=v[m.toLowerCase()];return N!==void 0?F=N:(T=U.exec(m))!==null?F=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=C.exec(m))!==null?F=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=y.exec(m))!==null&&(F=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),F};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;w.parseLength=function(m){var T,F=null;return(T=D.exec(m))!==null&&(F={value:parseFloat(T[1]),unit:T[2]}),F},w.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),F=[],N=0;N<T.length;N++){var _=T[N].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var A=[null,null,null,null],b=w.parseLength(_.shift());if(b===null||(A[0]=b,(b=w.parseLength(_.shift()))===null))return null;if(A[1]=b,_.length===0){F.push(A);continue}if((b=w.parseLength(_[0]))!==null&&(A[2]=b,_.shift()),_.length===0){F.push(A);continue}var j=w.parseColor(_[0]);if(j===null)return null;A[3]=j,F.push(A)}}return F},w.parsePosition=function(m){var T=m.split(" "),F=function(W){return W==="center"||W==="left"||W==="top"||W==="bottom"||W==="right"};if(T.length>4)return null;for(var N=0;N<T.length;N++)if(!F(T[N])){var _=w.parseLength(T[N]);if(_===null)return null;T[N]=_}for(var A={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},b=0;b<T.length;){var j=T[b++];if(F(j)){var Y={value:0,unit:"%"};T.length!==2&&b<T.length&&!F(T[b])&&(Y=T[b++]),j==="right"?(A.h.edge=j,A.h.offset=Y):j==="bottom"?(A.v.edge=j,A.v.offset=Y):j==="left"?A.h.offset=Y:j==="top"&&(A.v.offset=Y)}else{if(T.length!==1&&T.length!==2)return null;b===1?A.h.offset=j:A.v.offset=j}}return A},w.ComputedLength=function(m,T){this.rw=m,this.rh=T},w.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},w.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},w.toComputedLength=function(m,T,F,N,_,A){return T==="%"&&N?new w.ComputedLength(N.rw*m/100,N.rh*m/100):T==="em"&&F?new w.ComputedLength(F.rw*m,F.rh*m):T==="c"&&_?new w.ComputedLength(m*_.rw,m*_.rh):T==="px"&&A?new w.ComputedLength(m*A.rw,m*A.rh):T==="rh"?new w.ComputedLength(0,m/100):T==="rw"?new w.ComputedLength(m/100,0):null}})(g)},3516:function(R){R.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=97&&w<=122||w>=65&&w<=90}},2219:function(R,g,w){var U=w(3516),C=w(395);R.exports=function(y){return U(y)||C(y)}},395:function(R){R.exports=function(g){var w=typeof g=="string"?g.charCodeAt(0):g;return w>=48&&w<=57}},3875:function(R){function g(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function w(C,y){for(var v,D="",m=0,T=-1,F=0,N=0;N<=C.length;++N){if(N<C.length)v=C.charCodeAt(N);else{if(v===47)break;v=47}if(v===47){if(!(T===N-1||F===1))if(T!==N-1&&F===2){if(D.length<2||m!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var _=D.lastIndexOf("/");if(_!==D.length-1){_===-1?(D="",m=0):m=(D=D.slice(0,_)).length-1-D.lastIndexOf("/"),T=N,F=0;continue}}else if(D.length===2||D.length===1){D="",m=0,T=N,F=0;continue}}y&&(D.length>0?D+="/..":D="..",m=2)}else D.length>0?D+="/"+C.slice(T+1,N):D=C.slice(T+1,N),m=N-T-1;T=N,F=0}else v===46&&F!==-1?++F:F=-1}return D}var U={resolve:function(){for(var C,y="",v=!1,D=arguments.length-1;D>=-1&&!v;D--){var m;D>=0?m=arguments[D]:(C===void 0&&(C=process.cwd()),m=C),g(m),m.length!==0&&(y=m+"/"+y,v=m.charCodeAt(0)===47)}return y=w(y,!v),v?y.length>0?"/"+y:"/":y.length>0?y:"."},normalize:function(C){if(g(C),C.length===0)return".";var y=C.charCodeAt(0)===47,v=C.charCodeAt(C.length-1)===47;return(C=w(C,!y)).length!==0||y||(C="."),C.length>0&&v&&(C+="/"),y?"/"+C:C},isAbsolute:function(C){return g(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,y=0;y<arguments.length;++y){var v=arguments[y];g(v),v.length>0&&(C===void 0?C=v:C+="/"+v)}return C===void 0?".":U.normalize(C)},relative:function(C,y){if(g(C),g(y),C===y||(C=U.resolve(C))===(y=U.resolve(y)))return"";for(var v=1;v<C.length&&C.charCodeAt(v)===47;++v);for(var D=C.length,m=D-v,T=1;T<y.length&&y.charCodeAt(T)===47;++T);for(var F=y.length-T,N=m<F?m:F,_=-1,A=0;A<=N;++A){if(A===N){if(F>N){if(y.charCodeAt(T+A)===47)return y.slice(T+A+1);if(A===0)return y.slice(T+A)}else m>N&&(C.charCodeAt(v+A)===47?_=A:A===0&&(_=0));break}var b=C.charCodeAt(v+A);if(b!==y.charCodeAt(T+A))break;b===47&&(_=A)}var j="";for(A=v+_+1;A<=D;++A)A!==D&&C.charCodeAt(A)!==47||(j.length===0?j+="..":j+="/..");return j.length>0?j+y.slice(T+_):(T+=_,y.charCodeAt(T)===47&&++T,y.slice(T))},_makeLong:function(C){return C},dirname:function(C){if(g(C),C.length===0)return".";for(var y=C.charCodeAt(0),v=y===47,D=-1,m=!0,T=C.length-1;T>=1;--T)if((y=C.charCodeAt(T))===47){if(!m){D=T;break}}else m=!1;return D===-1?v?"/":".":v&&D===1?"//":C.slice(0,D)},basename:function(C,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');g(C);var v,D=0,m=-1,T=!0;if(y!==void 0&&y.length>0&&y.length<=C.length){if(y.length===C.length&&y===C)return"";var F=y.length-1,N=-1;for(v=C.length-1;v>=0;--v){var _=C.charCodeAt(v);if(_===47){if(!T){D=v+1;break}}else N===-1&&(T=!1,N=v+1),F>=0&&(_===y.charCodeAt(F)?--F==-1&&(m=v):(F=-1,m=N))}return D===m?m=N:m===-1&&(m=C.length),C.slice(D,m)}for(v=C.length-1;v>=0;--v)if(C.charCodeAt(v)===47){if(!T){D=v+1;break}}else m===-1&&(T=!1,m=v+1);return m===-1?"":C.slice(D,m)},extname:function(C){g(C);for(var y=-1,v=0,D=-1,m=!0,T=0,F=C.length-1;F>=0;--F){var N=C.charCodeAt(F);if(N!==47)D===-1&&(m=!1,D=F+1),N===46?y===-1?y=F:T!==1&&(T=1):y!==-1&&(T=-1);else if(!m){v=F+1;break}}return y===-1||D===-1||T===0||T===1&&y===D-1&&y===v+1?"":C.slice(y,D)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(y,v){var D=v.dir||v.root,m=v.base||(v.name||"")+(v.ext||"");return D?D===v.root?D+m:D+"/"+m:m}(0,C)},parse:function(C){g(C);var y={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return y;var v,D=C.charCodeAt(0),m=D===47;m?(y.root="/",v=1):v=0;for(var T=-1,F=0,N=-1,_=!0,A=C.length-1,b=0;A>=v;--A)if((D=C.charCodeAt(A))!==47)N===-1&&(_=!1,N=A+1),D===46?T===-1?T=A:b!==1&&(b=1):T!==-1&&(b=-1);else if(!_){F=A+1;break}return T===-1||N===-1||b===0||b===1&&T===N-1&&T===F+1?N!==-1&&(y.base=y.name=F===0&&m?C.slice(1,N):C.slice(F,N)):(F===0&&m?(y.name=C.slice(1,T),y.base=C.slice(1,N)):(y.name=C.slice(F,T),y.base=C.slice(F,N)),y.ext=C.slice(T,N)),F>0?y.dir=C.slice(0,F-1):m&&(y.dir="/"),y},sep:"/",delimiter:":",win32:null,posix:null};U.posix=U,R.exports=U},8387:function(R,g,w){var U=w(1549),C=U.Buffer;function y(D,m){for(var T in D)m[T]=D[T]}function v(D,m,T){return C(D,m,T)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?R.exports=U:(y(U,g),g.Buffer=v),y(C,v),v.from=function(D,m,T){if(typeof D=="number")throw new TypeError("Argument must not be a number");return C(D,m,T)},v.alloc=function(D,m,T){if(typeof D!="number")throw new TypeError("Argument must be a number");var F=C(D);return m!==void 0?typeof T=="string"?F.fill(m,T):F.fill(m):F.fill(0),F},v.allocUnsafe=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return C(D)},v.allocUnsafeSlow=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return U.SlowBuffer(D)}},5378:function(R,g,w){(function(U){U.parser=function(O,M){return new v(O,M)},U.SAXParser=v,U.SAXStream=m,U.createStream=function(O,M){return new m(O,M)},U.MAX_BUFFER_LENGTH=65536;var C,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function v(O,M){if(!(this instanceof v))return new v(O,M);var q=this;(function(K){for(var he=0,de=y.length;he<de;he++)K[y[he]]=""})(q),q.q=q.c="",q.bufferCheckPosition=U.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!O,q.noscript=!(!O&&!q.opt.noscript),q.state=Te.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(U.XML_ENTITIES):Object.create(U.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(Y)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),ot(q,"onready")}U.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function M(){}return M.prototype=O,new M}),Object.keys||(Object.keys=function(O){var M=[];for(var q in O)O.hasOwnProperty(q)&&M.push(q);return M}),v.prototype={end:function(){Me(this)},write:function(O){var M=this;if(this.error)throw this.error;if(M.closed)return gt(M,"Cannot write after close. Assign an onready handler.");if(O===null)return Me(M);typeof O=="object"&&(O=O.toString());for(var q=0,K="";K=Ue(O,q++),M.c=K,K;)switch(M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++),M.state){case Te.BEGIN:if(M.state=Te.BEGIN_WHITESPACE,K==="\uFEFF")continue;te(M,K);continue;case Te.BEGIN_WHITESPACE:te(M,K);continue;case Te.TEXT:if(M.sawRoot&&!M.closedRoot){for(var he=q-1;K&&K!=="<"&&K!=="&";)(K=Ue(O,q++))&&M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=O.substring(he,q-1)}K!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,K)||M.sawRoot&&!M.closedRoot||We(M,"Text data outside of root node."),K==="&"?M.state=Te.TEXT_ENTITY:M.textNode+=K):(M.state=Te.OPEN_WAKA,M.startTagPosition=M.position);continue;case Te.SCRIPT:K==="<"?M.state=Te.SCRIPT_ENDING:M.script+=K;continue;case Te.SCRIPT_ENDING:K==="/"?M.state=Te.CLOSE_TAG:(M.script+="<"+K,M.state=Te.SCRIPT);continue;case Te.OPEN_WAKA:if(K==="!")M.state=Te.SGML_DECL,M.sgmlDecl="";else if(!ce(T,K))if(ce(W,K))M.state=Te.OPEN_TAG,M.tagName=K;else if(K==="/")M.state=Te.CLOSE_TAG,M.tagName="";else if(K==="?")M.state=Te.PROC_INST,M.procInstName=M.procInstBody="";else{if(We(M,"Unencoded <"),M.startTagPosition+1<M.position){var de=M.position-M.startTagPosition;K=new Array(de).join(" ")+K}M.textNode+="<"+K,M.state=Te.TEXT}continue;case Te.SGML_DECL:(M.sgmlDecl+K).toUpperCase()==="[CDATA["?(ct(M,"onopencdata"),M.state=Te.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+K==="--"?(M.state=Te.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(M.state=Te.DOCTYPE,(M.doctype||M.sawRoot)&&We(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):K===">"?(ct(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Te.TEXT):(ce(_,K)&&(M.state=Te.SGML_DECL_QUOTED),M.sgmlDecl+=K);continue;case Te.SGML_DECL_QUOTED:K===M.q&&(M.state=Te.SGML_DECL,M.q=""),M.sgmlDecl+=K;continue;case Te.DOCTYPE:K===">"?(M.state=Te.TEXT,ct(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=K,K==="["?M.state=Te.DOCTYPE_DTD:ce(_,K)&&(M.state=Te.DOCTYPE_QUOTED,M.q=K));continue;case Te.DOCTYPE_QUOTED:M.doctype+=K,K===M.q&&(M.q="",M.state=Te.DOCTYPE);continue;case Te.DOCTYPE_DTD:M.doctype+=K,K==="]"?M.state=Te.DOCTYPE:ce(_,K)&&(M.state=Te.DOCTYPE_DTD_QUOTED,M.q=K);continue;case Te.DOCTYPE_DTD_QUOTED:M.doctype+=K,K===M.q&&(M.state=Te.DOCTYPE_DTD,M.q="");continue;case Te.COMMENT:K==="-"?M.state=Te.COMMENT_ENDING:M.comment+=K;continue;case Te.COMMENT_ENDING:K==="-"?(M.state=Te.COMMENT_ENDED,M.comment=qe(M.opt,M.comment),M.comment&&ct(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+K,M.state=Te.COMMENT);continue;case Te.COMMENT_ENDED:K!==">"?(We(M,"Malformed comment"),M.comment+="--"+K,M.state=Te.COMMENT):M.state=Te.TEXT;continue;case Te.CDATA:K==="]"?M.state=Te.CDATA_ENDING:M.cdata+=K;continue;case Te.CDATA_ENDING:K==="]"?M.state=Te.CDATA_ENDING_2:(M.cdata+="]"+K,M.state=Te.CDATA);continue;case Te.CDATA_ENDING_2:K===">"?(M.cdata&&ct(M,"oncdata",M.cdata),ct(M,"onclosecdata"),M.cdata="",M.state=Te.TEXT):K==="]"?M.cdata+="]":(M.cdata+="]]"+K,M.state=Te.CDATA);continue;case Te.PROC_INST:K==="?"?M.state=Te.PROC_INST_ENDING:ce(T,K)?M.state=Te.PROC_INST_BODY:M.procInstName+=K;continue;case Te.PROC_INST_BODY:if(!M.procInstBody&&ce(T,K))continue;K==="?"?M.state=Te.PROC_INST_ENDING:M.procInstBody+=K;continue;case Te.PROC_INST_ENDING:K===">"?(ct(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Te.TEXT):(M.procInstBody+="?"+K,M.state=Te.PROC_INST_BODY);continue;case Te.OPEN_TAG:ce($,K)?M.tagName+=K:(rt(M),K===">"?mt(M):K==="/"?M.state=Te.OPEN_TAG_SLASH:(oe(T,K)&&We(M,"Invalid character in tag name"),M.state=Te.ATTRIB));continue;case Te.OPEN_TAG_SLASH:K===">"?(mt(M,!0),Rt(M)):(We(M,"Forward-slash in opening tag not followed by >"),M.state=Te.ATTRIB);continue;case Te.ATTRIB:if(ce(T,K))continue;K===">"?mt(M):K==="/"?M.state=Te.OPEN_TAG_SLASH:ce(W,K)?(M.attribName=K,M.attribValue="",M.state=Te.ATTRIB_NAME):We(M,"Invalid attribute name");continue;case Te.ATTRIB_NAME:K==="="?M.state=Te.ATTRIB_VALUE:K===">"?(We(M,"Attribute without value"),M.attribValue=M.attribName,kt(M),mt(M)):ce(T,K)?M.state=Te.ATTRIB_NAME_SAW_WHITE:ce($,K)?M.attribName+=K:We(M,"Invalid attribute name");continue;case Te.ATTRIB_NAME_SAW_WHITE:if(K==="=")M.state=Te.ATTRIB_VALUE;else{if(ce(T,K))continue;We(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",ct(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",K===">"?mt(M):ce(W,K)?(M.attribName=K,M.state=Te.ATTRIB_NAME):(We(M,"Invalid attribute name"),M.state=Te.ATTRIB)}continue;case Te.ATTRIB_VALUE:if(ce(T,K))continue;ce(_,K)?(M.q=K,M.state=Te.ATTRIB_VALUE_QUOTED):(We(M,"Unquoted attribute value"),M.state=Te.ATTRIB_VALUE_UNQUOTED,M.attribValue=K);continue;case Te.ATTRIB_VALUE_QUOTED:if(K!==M.q){K==="&"?M.state=Te.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=K;continue}kt(M),M.q="",M.state=Te.ATTRIB_VALUE_CLOSED;continue;case Te.ATTRIB_VALUE_CLOSED:ce(T,K)?M.state=Te.ATTRIB:K===">"?mt(M):K==="/"?M.state=Te.OPEN_TAG_SLASH:ce(W,K)?(We(M,"No whitespace between attributes"),M.attribName=K,M.attribValue="",M.state=Te.ATTRIB_NAME):We(M,"Invalid attribute name");continue;case Te.ATTRIB_VALUE_UNQUOTED:if(oe(A,K)){K==="&"?M.state=Te.ATTRIB_VALUE_ENTITY_U:M.attribValue+=K;continue}kt(M),K===">"?mt(M):M.state=Te.ATTRIB;continue;case Te.CLOSE_TAG:if(M.tagName)K===">"?Rt(M):ce($,K)?M.tagName+=K:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Te.SCRIPT):(oe(T,K)&&We(M,"Invalid tagname in closing tag"),M.state=Te.CLOSE_TAG_SAW_WHITE);else{if(ce(T,K))continue;oe(W,K)?M.script?(M.script+="</"+K,M.state=Te.SCRIPT):We(M,"Invalid tagname in closing tag."):M.tagName=K}continue;case Te.CLOSE_TAG_SAW_WHITE:if(ce(T,K))continue;K===">"?Rt(M):We(M,"Invalid characters in closing tag");continue;case Te.TEXT_ENTITY:case Te.ATTRIB_VALUE_ENTITY_Q:case Te.ATTRIB_VALUE_ENTITY_U:var Ve,St;switch(M.state){case Te.TEXT_ENTITY:Ve=Te.TEXT,St="textNode";break;case Te.ATTRIB_VALUE_ENTITY_Q:Ve=Te.ATTRIB_VALUE_QUOTED,St="attribValue";break;case Te.ATTRIB_VALUE_ENTITY_U:Ve=Te.ATTRIB_VALUE_UNQUOTED,St="attribValue"}K===";"?(M[St]+=Re(M),M.entity="",M.state=Ve):ce(M.entity.length?x:se,K)?M.entity+=K:(We(M,"Invalid character in entity name"),M[St]+="&"+M.entity+K,M.entity="",M.state=Ve);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(st){for(var at=Math.max(U.MAX_BUFFER_LENGTH,10),tt=0,ft=0,Et=y.length;ft<Et;ft++){var Tt=st[y[ft]].length;if(Tt>at)switch(y[ft]){case"textNode":Ie(st);break;case"cdata":ct(st,"oncdata",st.cdata),st.cdata="";break;case"script":ct(st,"onscript",st.script),st.script="";break;default:gt(st,"Max buffer length exceeded: "+y[ft])}tt=Math.max(tt,Tt)}var Ct=U.MAX_BUFFER_LENGTH-tt;st.bufferCheckPosition=Ct+st.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var O;Ie(O=this),O.cdata!==""&&(ct(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(ct(O,"onscript",O.script),O.script="")}};try{C=w(182).Stream}catch(O){C=function(){}}var D=U.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function m(O,M){if(!(this instanceof m))return new m(O,M);C.apply(this),this._parser=new v(O,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(K){q.emit("error",K),q._parser.error=null},this._decoder=null,D.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(he){if(!he)return q.removeAllListeners(K),q._parser["on"+K]=he,he;q.on(K,he)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(C.prototype,{constructor:{value:m}}),m.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var M=w(7503).s;this._decoder=new M("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},m.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},m.prototype.on=function(O,M){var q=this;return q._parser["on"+O]||D.indexOf(O)===-1||(q._parser["on"+O]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,O),q.emit.apply(q,K)}),C.prototype.on.call(q,O,M)};var T="\r\n	 ",F="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",A=T+">",b="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",Y={xml:b,xmlns:j};T=X(T),F=X(F),N=X(N);var W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,se=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(O){return O.split("").reduce(function(M,q){return M[q]=!0,M},{})}function ce(O,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(O)?!!M.match(O):O[M]}function oe(O,M){return!ce(O,M)}_=X(_),A=X(A);var me,Ce,Je,Te=0;for(var je in U.STATE={BEGIN:Te++,BEGIN_WHITESPACE:Te++,TEXT:Te++,TEXT_ENTITY:Te++,OPEN_WAKA:Te++,SGML_DECL:Te++,SGML_DECL_QUOTED:Te++,DOCTYPE:Te++,DOCTYPE_QUOTED:Te++,DOCTYPE_DTD:Te++,DOCTYPE_DTD_QUOTED:Te++,COMMENT_STARTING:Te++,COMMENT:Te++,COMMENT_ENDING:Te++,COMMENT_ENDED:Te++,CDATA:Te++,CDATA_ENDING:Te++,CDATA_ENDING_2:Te++,PROC_INST:Te++,PROC_INST_BODY:Te++,PROC_INST_ENDING:Te++,OPEN_TAG:Te++,OPEN_TAG_SLASH:Te++,ATTRIB:Te++,ATTRIB_NAME:Te++,ATTRIB_NAME_SAW_WHITE:Te++,ATTRIB_VALUE:Te++,ATTRIB_VALUE_QUOTED:Te++,ATTRIB_VALUE_CLOSED:Te++,ATTRIB_VALUE_UNQUOTED:Te++,ATTRIB_VALUE_ENTITY_Q:Te++,ATTRIB_VALUE_ENTITY_U:Te++,CLOSE_TAG:Te++,CLOSE_TAG_SAW_WHITE:Te++,SCRIPT:Te++,SCRIPT_ENDING:Te++},U.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},U.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(U.ENTITIES).forEach(function(O){var M=U.ENTITIES[O],q=typeof M=="number"?String.fromCharCode(M):M;U.ENTITIES[O]=q}),U.STATE)U.STATE[U.STATE[je]]=je;function ot(O,M,q){O[M]&&O[M](q)}function ct(O,M,q){O.textNode&&Ie(O),ot(O,M,q)}function Ie(O){O.textNode=qe(O.opt,O.textNode),O.textNode&&ot(O,"ontext",O.textNode),O.textNode=""}function qe(O,M){return O.trim&&(M=M.trim()),O.normalize&&(M=M.replace(/\s+/g," ")),M}function gt(O,M){return Ie(O),O.trackPosition&&(M+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),M=new Error(M),O.error=M,ot(O,"onerror",M),O}function Me(O){return O.sawRoot&&!O.closedRoot&&We(O,"Unclosed root tag"),O.state!==Te.BEGIN&&O.state!==Te.BEGIN_WHITESPACE&&O.state!==Te.TEXT&&gt(O,"Unexpected end"),Ie(O),O.c="",O.closed=!0,ot(O,"onend"),v.call(O,O.strict,O.opt),O}function We(O,M){if(typeof O!="object"||!(O instanceof v))throw new Error("bad call to strictFail");O.strict&&gt(O,M)}function rt(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var M=O.tags[O.tags.length-1]||O,q=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(q.ns=M.ns),O.attribList.length=0,ct(O,"onopentagstart",q)}function Ht(O,M){var q=O.indexOf(":")<0?["",O]:O.split(":"),K=q[0],he=q[1];return M&&O==="xmlns"&&(K="xmlns",he=""),{prefix:K,local:he}}function kt(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var M=Ht(O.attribName,!0),q=M.prefix,K=M.local;if(q==="xmlns")if(K==="xml"&&O.attribValue!==b)We(O,"xml: prefix must be bound to "+b+"\nActual: "+O.attribValue);else if(K==="xmlns"&&O.attribValue!==j)We(O,"xmlns: prefix must be bound to "+j+"\nActual: "+O.attribValue);else{var he=O.tag,de=O.tags[O.tags.length-1]||O;he.ns===de.ns&&(he.ns=Object.create(de.ns)),he.ns[K]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,ct(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function mt(O,M){if(O.opt.xmlns){var q=O.tag,K=Ht(O.tagName);q.prefix=K.prefix,q.local=K.local,q.uri=q.ns[K.prefix]||"",q.prefix&&!q.uri&&(We(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),q.uri=K.prefix);var he=O.tags[O.tags.length-1]||O;q.ns&&he.ns!==q.ns&&Object.keys(q.ns).forEach(function(hn){ct(O,"onopennamespace",{prefix:hn,uri:q.ns[hn]})});for(var de=0,Ve=O.attribList.length;de<Ve;de++){var St=O.attribList[de],st=St[0],at=St[1],tt=Ht(st,!0),ft=tt.prefix,Et=tt.local,Tt=ft===""?"":q.ns[ft]||"",Ct={name:st,value:at,prefix:ft,local:Et,uri:Tt};ft&&ft!=="xmlns"&&!Tt&&(We(O,"Unbound namespace prefix: "+JSON.stringify(ft)),Ct.uri=ft),O.tag.attributes[st]=Ct,ct(O,"onattribute",Ct)}O.attribList.length=0}O.tag.isSelfClosing=!!M,O.sawRoot=!0,O.tags.push(O.tag),ct(O,"onopentag",O.tag),M||(O.noscript||O.tagName.toLowerCase()!=="script"?O.state=Te.TEXT:O.state=Te.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function Rt(O){if(!O.tagName)return We(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=Te.TEXT);if(O.script){if(O.tagName!=="script")return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=Te.SCRIPT);ct(O,"onscript",O.script),O.script=""}var M=O.tags.length,q=O.tagName;O.strict||(q=q[O.looseCase]());for(var K=q;M--&&O.tags[M].name!==K;)We(O,"Unexpected close tag");if(M<0)return We(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=Te.TEXT);O.tagName=q;for(var he=O.tags.length;he-- >M;){var de=O.tag=O.tags.pop();O.tagName=O.tag.name,ct(O,"onclosetag",O.tagName);var Ve={};for(var St in de.ns)Ve[St]=de.ns[St];var st=O.tags[O.tags.length-1]||O;O.opt.xmlns&&de.ns!==st.ns&&Object.keys(de.ns).forEach(function(at){var tt=de.ns[at];ct(O,"onclosenamespace",{prefix:at,uri:tt})})}M===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=Te.TEXT}function Re(O){var M,q=O.entity,K=q.toLowerCase(),he="";return O.ENTITIES[q]?O.ENTITIES[q]:O.ENTITIES[K]?O.ENTITIES[K]:((q=K).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),he=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),he=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),he.toLowerCase()!==q?(We(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(M))}function te(O,M){M==="<"?(O.state=Te.OPEN_WAKA,O.startTagPosition=O.position):oe(T,M)&&(We(O,"Non-whitespace before first tag."),O.textNode=M,O.state=Te.TEXT)}function Ue(O,M){var q="";return M<O.length&&(q=O.charAt(M)),q}Te=U.STATE,String.fromCodePoint||(me=String.fromCharCode,Ce=Math.floor,Je=function(){var O,M,q=16384,K=[],he=-1,de=arguments.length;if(!de)return"";for(var Ve="";++he<de;){var St=Number(arguments[he]);if(!isFinite(St)||St<0||St>1114111||Ce(St)!==St)throw RangeError("Invalid code point: "+St);St<=65535?K.push(St):(O=55296+((St-=65536)>>10),M=St%1024+56320,K.push(O,M)),(he+1===de||K.length>q)&&(Ve+=me.apply(null,K),K.length=0)}return Ve},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Je,configurable:!0,writable:!0}):String.fromCodePoint=Je)})(g)},182:function(R,g,w){R.exports=C;var U=w(1159).EventEmitter;function C(){U.call(this)}w(1765)(C,U),C.Readable=w(2846),C.Writable=w(8318),C.Duplex=w(6138),C.Transform=w(9798),C.PassThrough=w(5472),C.finished=w(8800),C.pipeline=w(7295),C.Stream=C,C.prototype.pipe=function(y,v){var D=this;function m(j){y.writable&&y.write(j)===!1&&D.pause&&D.pause()}function T(){D.readable&&D.resume&&D.resume()}D.on("data",m),y.on("drain",T),y._isStdio||v&&v.end===!1||(D.on("end",N),D.on("close",_));var F=!1;function N(){F||(F=!0,y.end())}function _(){F||(F=!0,typeof y.destroy=="function"&&y.destroy())}function A(j){if(b(),U.listenerCount(this,"error")===0)throw j}function b(){D.removeListener("data",m),y.removeListener("drain",T),D.removeListener("end",N),D.removeListener("close",_),D.removeListener("error",A),y.removeListener("error",A),D.removeListener("end",b),D.removeListener("close",b),y.removeListener("close",b)}return D.on("error",A),y.on("error",A),D.on("end",b),D.on("close",b),y.on("close",b),y.emit("pipe",D),y}},1765:function(R){typeof Object.create=="function"?R.exports=function(g,w){w&&(g.super_=w,g.prototype=Object.create(w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:R.exports=function(g,w){if(w){g.super_=w;var U=function(){};U.prototype=w.prototype,g.prototype=new U,g.prototype.constructor=g}}},3690:function(R){var g={};function w(C,y,v){v||(v=Error);var D=function(m){var T,F;function N(_,A,b){return m.call(this,function(j,Y,W){return typeof y=="string"?y:y(j,Y,W)}(_,A,b))||this}return F=m,(T=N).prototype=Object.create(F.prototype),T.prototype.constructor=T,T.__proto__=F,N}(v);D.prototype.name=v.name,D.prototype.code=C,g[C]=D}function U(C,y){if(Array.isArray(C)){var v=C.length;return C=C.map(function(D){return String(D)}),v>2?"one of ".concat(y," ").concat(C.slice(0,v-1).join(", "),", or ")+C[v-1]:v===2?"one of ".concat(y," ").concat(C[0]," or ").concat(C[1]):"of ".concat(y," ").concat(C[0])}return"of ".concat(y," ").concat(String(C))}w("ERR_INVALID_OPT_VALUE",function(C,y){return'The value "'+y+'" is invalid for option "'+C+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(C,y,v){var D,m,T,F,N;if(typeof y=="string"&&(m="not ",y.substr(0,m.length)===m)?(D="must not be",y=y.replace(/^not /,"")):D="must be",function(A,b,j){return(j===void 0||j>A.length)&&(j=A.length),A.substring(j-b.length,j)===b}(C," argument"))T="The ".concat(C," ").concat(D," ").concat(U(y,"type"));else{var _=(typeof N!="number"&&(N=0),N+1>(F=C).length||F.indexOf(".",N)===-1?"argument":"property");T='The "'.concat(C,'" ').concat(_," ").concat(D," ").concat(U(y,"type"))}return T+". Received type ".concat(typeof v)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),R.exports.q=g},6138:function(R,g,w){var U=Object.keys||function(_){var A=[];for(var b in _)A.push(b);return A};R.exports=T;var C=w(2846),y=w(8318);w(1765)(T,C);for(var v=U(y.prototype),D=0;D<v.length;D++){var m=v[D];T.prototype[m]||(T.prototype[m]=y.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);C.call(this,_),y.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",F)))}function F(){this._writableState.ended||process.nextTick(N,this)}function N(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(R,g,w){R.exports=C;var U=w(9798);function C(y){if(!(this instanceof C))return new C(y);U.call(this,y)}w(1765)(C,U),C.prototype._transform=function(y,v,D){D(null,y)}},2846:function(R,g,w){var U;R.exports=me,me.ReadableState=oe,w(1159).EventEmitter;var C,y=function(Re,te){return Re.listeners(te).length},v=w(9299),D=w(1549).Buffer,m=w.g.Uint8Array||function(){},T=w(964);C=T&&T.debuglog?T.debuglog("stream"):function(){};var F,N,_,A=w(8393),b=w(6163),j=w(7269).getHighWaterMark,Y=w(3690).q,W=Y.ERR_INVALID_ARG_TYPE,$=Y.ERR_STREAM_PUSH_AFTER_EOF,se=Y.ERR_METHOD_NOT_IMPLEMENTED,x=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;w(1765)(me,v);var X=b.errorOrDestroy,ce=["error","close","destroy","pause","resume"];function oe(Re,te,Ue){U=U||w(6138),Re=Re||{},typeof Ue!="boolean"&&(Ue=te instanceof U),this.objectMode=!!Re.objectMode,Ue&&(this.objectMode=this.objectMode||!!Re.readableObjectMode),this.highWaterMark=j(this,Re,"readableHighWaterMark",Ue),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Re.emitClose!==!1,this.autoDestroy=!!Re.autoDestroy,this.destroyed=!1,this.defaultEncoding=Re.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Re.encoding&&(F||(F=w(7503).s),this.decoder=new F(Re.encoding),this.encoding=Re.encoding)}function me(Re){if(U=U||w(6138),!(this instanceof me))return new me(Re);var te=this instanceof U;this._readableState=new oe(Re,this,te),this.readable=!0,Re&&(typeof Re.read=="function"&&(this._read=Re.read),typeof Re.destroy=="function"&&(this._destroy=Re.destroy)),v.call(this)}function Ce(Re,te,Ue,O,M){C("readableAddChunk",te);var q,K=Re._readableState;if(te===null)K.reading=!1,function(he,de){if(C("onEofChunk"),!de.ended){if(de.decoder){var Ve=de.decoder.end();Ve&&Ve.length&&(de.buffer.push(Ve),de.length+=de.objectMode?1:Ve.length)}de.ended=!0,de.sync?ot(he):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,ct(he)))}}(Re,K);else if(M||(q=function(he,de){var Ve,St;return St=de,D.isBuffer(St)||St instanceof m||typeof de=="string"||de===void 0||he.objectMode||(Ve=new W("chunk",["string","Buffer","Uint8Array"],de)),Ve}(K,te)),q)X(Re,q);else if(K.objectMode||te&&te.length>0)if(typeof te=="string"||K.objectMode||Object.getPrototypeOf(te)===D.prototype||(te=function(he){return D.from(he)}(te)),O)K.endEmitted?X(Re,new x):Je(Re,K,te,!0);else if(K.ended)X(Re,new $);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!Ue?(te=K.decoder.write(te),K.objectMode||te.length!==0?Je(Re,K,te,!1):Ie(Re,K)):Je(Re,K,te,!1)}else O||(K.reading=!1,Ie(Re,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Je(Re,te,Ue,O){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,Re.emit("data",Ue)):(te.length+=te.objectMode?1:Ue.length,O?te.buffer.unshift(Ue):te.buffer.push(Ue),te.needReadable&&ot(Re)),Ie(Re,te)}Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Re){this._readableState&&(this._readableState.destroyed=Re)}}),me.prototype.destroy=b.destroy,me.prototype._undestroy=b.undestroy,me.prototype._destroy=function(Re,te){te(Re)},me.prototype.push=function(Re,te){var Ue,O=this._readableState;return O.objectMode?Ue=!0:typeof Re=="string"&&((te=te||O.defaultEncoding)!==O.encoding&&(Re=D.from(Re,te),te=""),Ue=!0),Ce(this,Re,te,!1,Ue)},me.prototype.unshift=function(Re){return Ce(this,Re,null,!0,!1)},me.prototype.isPaused=function(){return this._readableState.flowing===!1},me.prototype.setEncoding=function(Re){F||(F=w(7503).s);var te=new F(Re);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ue=this._readableState.buffer.head,O="";Ue!==null;)O+=te.write(Ue.data),Ue=Ue.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var Te=1073741824;function je(Re,te){return Re<=0||te.length===0&&te.ended?0:te.objectMode?1:Re!=Re?te.flowing&&te.length?te.buffer.head.data.length:te.length:(Re>te.highWaterMark&&(te.highWaterMark=function(Ue){return Ue>=Te?Ue=Te:(Ue--,Ue|=Ue>>>1,Ue|=Ue>>>2,Ue|=Ue>>>4,Ue|=Ue>>>8,Ue|=Ue>>>16,Ue++),Ue}(Re)),Re<=te.length?Re:te.ended?te.length:(te.needReadable=!0,0))}function ot(Re){var te=Re._readableState;C("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(C("emitReadable",te.flowing),te.emittedReadable=!0,process.nextTick(ct,Re))}function ct(Re){var te=Re._readableState;C("emitReadable_",te.destroyed,te.length,te.ended),te.destroyed||!te.length&&!te.ended||(Re.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,rt(Re)}function Ie(Re,te){te.readingMore||(te.readingMore=!0,process.nextTick(qe,Re,te))}function qe(Re,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var Ue=te.length;if(C("maybeReadMore read 0"),Re.read(0),Ue===te.length)break}te.readingMore=!1}function gt(Re){var te=Re._readableState;te.readableListening=Re.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:Re.listenerCount("data")>0&&Re.resume()}function Me(Re){C("readable nexttick read 0"),Re.read(0)}function We(Re,te){C("resume",te.reading),te.reading||Re.read(0),te.resumeScheduled=!1,Re.emit("resume"),rt(Re),te.flowing&&!te.reading&&Re.read(0)}function rt(Re){var te=Re._readableState;for(C("flow",te.flowing);te.flowing&&Re.read()!==null;);}function Ht(Re,te){return te.length===0?null:(te.objectMode?Ue=te.buffer.shift():!Re||Re>=te.length?(Ue=te.decoder?te.buffer.join(""):te.buffer.length===1?te.buffer.first():te.buffer.concat(te.length),te.buffer.clear()):Ue=te.buffer.consume(Re,te.decoder),Ue);var Ue}function kt(Re){var te=Re._readableState;C("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,process.nextTick(mt,te,Re))}function mt(Re,te){if(C("endReadableNT",Re.endEmitted,Re.length),!Re.endEmitted&&Re.length===0&&(Re.endEmitted=!0,te.readable=!1,te.emit("end"),Re.autoDestroy)){var Ue=te._writableState;(!Ue||Ue.autoDestroy&&Ue.finished)&&te.destroy()}}function Rt(Re,te){for(var Ue=0,O=Re.length;Ue<O;Ue++)if(Re[Ue]===te)return Ue;return-1}me.prototype.read=function(Re){C("read",Re),Re=parseInt(Re,10);var te=this._readableState,Ue=Re;if(Re!==0&&(te.emittedReadable=!1),Re===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return C("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?kt(this):ot(this),null;if((Re=je(Re,te))===0&&te.ended)return te.length===0&&kt(this),null;var O,M=te.needReadable;return C("need readable",M),(te.length===0||te.length-Re<te.highWaterMark)&&C("length less than watermark",M=!0),te.ended||te.reading?C("reading or ended",M=!1):M&&(C("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(Re=je(Ue,te))),(O=Re>0?Ht(Re,te):null)===null?(te.needReadable=te.length<=te.highWaterMark,Re=0):(te.length-=Re,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),Ue!==Re&&te.ended&&kt(this)),O!==null&&this.emit("data",O),O},me.prototype._read=function(Re){X(this,new se("_read()"))},me.prototype.pipe=function(Re,te){var Ue=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=Re;break;case 1:O.pipes=[O.pipes,Re];break;default:O.pipes.push(Re)}O.pipesCount+=1,C("pipe count=%d opts=%j",O.pipesCount,te);var M=te&&te.end===!1||Re===process.stdout||Re===process.stderr?at:q;function q(){C("onend"),Re.end()}O.endEmitted?process.nextTick(M):Ue.once("end",M),Re.on("unpipe",function tt(ft,Et){C("onunpipe"),ft===Ue&&Et&&Et.hasUnpiped===!1&&(Et.hasUnpiped=!0,C("cleanup"),Re.removeListener("close",St),Re.removeListener("finish",st),Re.removeListener("drain",K),Re.removeListener("error",Ve),Re.removeListener("unpipe",tt),Ue.removeListener("end",q),Ue.removeListener("end",at),Ue.removeListener("data",de),he=!0,!O.awaitDrain||Re._writableState&&!Re._writableState.needDrain||K())});var K=function(tt){return function(){var ft=tt._readableState;C("pipeOnDrain",ft.awaitDrain),ft.awaitDrain&&ft.awaitDrain--,ft.awaitDrain===0&&y(tt,"data")&&(ft.flowing=!0,rt(tt))}}(Ue);Re.on("drain",K);var he=!1;function de(tt){C("ondata");var ft=Re.write(tt);C("dest.write",ft),ft===!1&&((O.pipesCount===1&&O.pipes===Re||O.pipesCount>1&&Rt(O.pipes,Re)!==-1)&&!he&&(C("false write response, pause",O.awaitDrain),O.awaitDrain++),Ue.pause())}function Ve(tt){C("onerror",tt),at(),Re.removeListener("error",Ve),y(Re,"error")===0&&X(Re,tt)}function St(){Re.removeListener("finish",st),at()}function st(){C("onfinish"),Re.removeListener("close",St),at()}function at(){C("unpipe"),Ue.unpipe(Re)}return Ue.on("data",de),function(tt,ft,Et){if(typeof tt.prependListener=="function")return tt.prependListener(ft,Et);tt._events&&tt._events[ft]?Array.isArray(tt._events[ft])?tt._events[ft].unshift(Et):tt._events[ft]=[Et,tt._events[ft]]:tt.on(ft,Et)}(Re,"error",Ve),Re.once("close",St),Re.once("finish",st),Re.emit("pipe",Ue),O.flowing||(C("pipe resume"),Ue.resume()),Re},me.prototype.unpipe=function(Re){var te=this._readableState,Ue={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return Re&&Re!==te.pipes||(Re||(Re=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,Re&&Re.emit("unpipe",this,Ue)),this;if(!Re){var O=te.pipes,M=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var q=0;q<M;q++)O[q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=Rt(te.pipes,Re);return K===-1||(te.pipes.splice(K,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),Re.emit("unpipe",this,Ue)),this},me.prototype.on=function(Re,te){var Ue=v.prototype.on.call(this,Re,te),O=this._readableState;return Re==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):Re==="readable"&&(O.endEmitted||O.readableListening||(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,C("on readable",O.length,O.reading),O.length?ot(this):O.reading||process.nextTick(Me,this))),Ue},me.prototype.addListener=me.prototype.on,me.prototype.removeListener=function(Re,te){var Ue=v.prototype.removeListener.call(this,Re,te);return Re==="readable"&&process.nextTick(gt,this),Ue},me.prototype.removeAllListeners=function(Re){var te=v.prototype.removeAllListeners.apply(this,arguments);return Re!=="readable"&&Re!==void 0||process.nextTick(gt,this),te},me.prototype.resume=function(){var Re=this._readableState;return Re.flowing||(C("resume"),Re.flowing=!Re.readableListening,function(te,Ue){Ue.resumeScheduled||(Ue.resumeScheduled=!0,process.nextTick(We,te,Ue))}(this,Re)),Re.paused=!1,this},me.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},me.prototype.wrap=function(Re){var te=this,Ue=this._readableState,O=!1;for(var M in Re.on("end",function(){if(C("wrapped end"),Ue.decoder&&!Ue.ended){var K=Ue.decoder.end();K&&K.length&&te.push(K)}te.push(null)}),Re.on("data",function(K){C("wrapped data"),Ue.decoder&&(K=Ue.decoder.write(K)),Ue.objectMode&&K==null||(Ue.objectMode||K&&K.length)&&(te.push(K)||(O=!0,Re.pause()))}),Re)this[M]===void 0&&typeof Re[M]=="function"&&(this[M]=function(K){return function(){return Re[K].apply(Re,arguments)}}(M));for(var q=0;q<ce.length;q++)Re.on(ce[q],this.emit.bind(this,ce[q]));return this._read=function(K){C("wrapped _read",K),O&&(O=!1,Re.resume())},this},typeof Symbol=="function"&&(me.prototype[Symbol.asyncIterator]=function(){return N===void 0&&(N=w(7299)),N(this)}),Object.defineProperty(me.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(me.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(me.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Re){this._readableState&&(this._readableState.flowing=Re)}}),me._fromList=Ht,Object.defineProperty(me.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(me.from=function(Re,te){return _===void 0&&(_=w(6233)),_(me,Re,te)})},9798:function(R,g,w){R.exports=F;var U=w(3690).q,C=U.ERR_METHOD_NOT_IMPLEMENTED,y=U.ERR_MULTIPLE_CALLBACK,v=U.ERR_TRANSFORM_ALREADY_TRANSFORMING,D=U.ERR_TRANSFORM_WITH_LENGTH_0,m=w(6138);function T(A,b){var j=this._transformState;j.transforming=!1;var Y=j.writecb;if(Y===null)return this.emit("error",new y);j.writechunk=null,j.writecb=null,b!=null&&this.push(b),Y(A);var W=this._readableState;W.reading=!1,(W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}function F(A){if(!(this instanceof F))return new F(A);m.call(this,A),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,A&&(typeof A.transform=="function"&&(this._transform=A.transform),typeof A.flush=="function"&&(this._flush=A.flush)),this.on("prefinish",N)}function N(){var A=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(b,j){_(A,b,j)})}function _(A,b,j){if(b)return A.emit("error",b);if(j!=null&&A.push(j),A._writableState.length)throw new D;if(A._transformState.transforming)throw new v;return A.push(null)}w(1765)(F,m),F.prototype.push=function(A,b){return this._transformState.needTransform=!1,m.prototype.push.call(this,A,b)},F.prototype._transform=function(A,b,j){j(new C("_transform()"))},F.prototype._write=function(A,b,j){var Y=this._transformState;if(Y.writecb=j,Y.writechunk=A,Y.writeencoding=b,!Y.transforming){var W=this._readableState;(Y.needTransform||W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}},F.prototype._read=function(A){var b=this._transformState;b.writechunk===null||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},F.prototype._destroy=function(A,b){m.prototype._destroy.call(this,A,function(j){b(j)})}},8318:function(R,g,w){function U(Ie){var qe=this;this.next=null,this.entry=null,this.finish=function(){(function(gt,Me,We){var rt=gt.entry;for(gt.entry=null;rt;){var Ht=rt.callback;Me.pendingcb--,Ht(void 0),rt=rt.next}Me.corkedRequestsFree.next=gt})(qe,Ie)}}var C;R.exports=me,me.WritableState=oe;var y,v={deprecate:w(7839)},D=w(9299),m=w(1549).Buffer,T=w.g.Uint8Array||function(){},F=w(6163),N=w(7269).getHighWaterMark,_=w(3690).q,A=_.ERR_INVALID_ARG_TYPE,b=_.ERR_METHOD_NOT_IMPLEMENTED,j=_.ERR_MULTIPLE_CALLBACK,Y=_.ERR_STREAM_CANNOT_PIPE,W=_.ERR_STREAM_DESTROYED,$=_.ERR_STREAM_NULL_VALUES,se=_.ERR_STREAM_WRITE_AFTER_END,x=_.ERR_UNKNOWN_ENCODING,X=F.errorOrDestroy;function ce(){}function oe(Ie,qe,gt){C=C||w(6138),Ie=Ie||{},typeof gt!="boolean"&&(gt=qe instanceof C),this.objectMode=!!Ie.objectMode,gt&&(this.objectMode=this.objectMode||!!Ie.writableObjectMode),this.highWaterMark=N(this,Ie,"writableHighWaterMark",gt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Me=Ie.decodeStrings===!1;this.decodeStrings=!Me,this.defaultEncoding=Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(We){(function(rt,Ht){var kt=rt._writableState,mt=kt.sync,Rt=kt.writecb;if(typeof Rt!="function")throw new j;if(function(te){te.writing=!1,te.writecb=null,te.length-=te.writelen,te.writelen=0}(kt),Ht)(function(te,Ue,O,M,q){--Ue.pendingcb,O?(process.nextTick(q,M),process.nextTick(ct,te,Ue),te._writableState.errorEmitted=!0,X(te,M)):(q(M),te._writableState.errorEmitted=!0,X(te,M),ct(te,Ue))})(rt,kt,mt,Ht,Rt);else{var Re=je(kt)||rt.destroyed;Re||kt.corked||kt.bufferProcessing||!kt.bufferedRequest||Te(rt,kt),mt?process.nextTick(Je,rt,kt,Re,Rt):Je(rt,kt,Re,Rt)}})(qe,We)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ie.emitClose!==!1,this.autoDestroy=!!Ie.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new U(this)}function me(Ie){var qe=this instanceof(C=C||w(6138));if(!qe&&!y.call(me,this))return new me(Ie);this._writableState=new oe(Ie,this,qe),this.writable=!0,Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final)),D.call(this)}function Ce(Ie,qe,gt,Me,We,rt,Ht){qe.writelen=Me,qe.writecb=Ht,qe.writing=!0,qe.sync=!0,qe.destroyed?qe.onwrite(new W("write")):gt?Ie._writev(We,qe.onwrite):Ie._write(We,rt,qe.onwrite),qe.sync=!1}function Je(Ie,qe,gt,Me){gt||function(We,rt){rt.length===0&&rt.needDrain&&(rt.needDrain=!1,We.emit("drain"))}(Ie,qe),qe.pendingcb--,Me(),ct(Ie,qe)}function Te(Ie,qe){qe.bufferProcessing=!0;var gt=qe.bufferedRequest;if(Ie._writev&&gt&&gt.next){var Me=qe.bufferedRequestCount,We=new Array(Me),rt=qe.corkedRequestsFree;rt.entry=gt;for(var Ht=0,kt=!0;gt;)We[Ht]=gt,gt.isBuf||(kt=!1),gt=gt.next,Ht+=1;We.allBuffers=kt,Ce(Ie,qe,!0,qe.length,We,"",rt.finish),qe.pendingcb++,qe.lastBufferedRequest=null,rt.next?(qe.corkedRequestsFree=rt.next,rt.next=null):qe.corkedRequestsFree=new U(qe),qe.bufferedRequestCount=0}else{for(;gt;){var mt=gt.chunk,Rt=gt.encoding,Re=gt.callback;if(Ce(Ie,qe,!1,qe.objectMode?1:mt.length,mt,Rt,Re),gt=gt.next,qe.bufferedRequestCount--,qe.writing)break}gt===null&&(qe.lastBufferedRequest=null)}qe.bufferedRequest=gt,qe.bufferProcessing=!1}function je(Ie){return Ie.ending&&Ie.length===0&&Ie.bufferedRequest===null&&!Ie.finished&&!Ie.writing}function ot(Ie,qe){Ie._final(function(gt){qe.pendingcb--,gt&&X(Ie,gt),qe.prefinished=!0,Ie.emit("prefinish"),ct(Ie,qe)})}function ct(Ie,qe){var gt=je(qe);if(gt&&(function(We,rt){rt.prefinished||rt.finalCalled||(typeof We._final!="function"||rt.destroyed?(rt.prefinished=!0,We.emit("prefinish")):(rt.pendingcb++,rt.finalCalled=!0,process.nextTick(ot,We,rt)))}(Ie,qe),qe.pendingcb===0&&(qe.finished=!0,Ie.emit("finish"),qe.autoDestroy))){var Me=Ie._readableState;(!Me||Me.autoDestroy&&Me.endEmitted)&&Ie.destroy()}return gt}w(1765)(me,D),oe.prototype.getBuffer=function(){for(var Ie=this.bufferedRequest,qe=[];Ie;)qe.push(Ie),Ie=Ie.next;return qe},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ie){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(me,Symbol.hasInstance,{value:function(Ie){return!!y.call(this,Ie)||this===me&&Ie&&Ie._writableState instanceof oe}})):y=function(Ie){return Ie instanceof this},me.prototype.pipe=function(){X(this,new Y)},me.prototype.write=function(Ie,qe,gt){var Me,We=this._writableState,rt=!1,Ht=!We.objectMode&&(Me=Ie,m.isBuffer(Me)||Me instanceof T);return Ht&&!m.isBuffer(Ie)&&(Ie=function(kt){return m.from(kt)}(Ie)),typeof qe=="function"&&(gt=qe,qe=null),Ht?qe="buffer":qe||(qe=We.defaultEncoding),typeof gt!="function"&&(gt=ce),We.ending?function(kt,mt){var Rt=new se;X(kt,Rt),process.nextTick(mt,Rt)}(this,gt):(Ht||function(kt,mt,Rt,Re){var te;return Rt===null?te=new $:typeof Rt=="string"||mt.objectMode||(te=new A("chunk",["string","Buffer"],Rt)),!te||(X(kt,te),process.nextTick(Re,te),!1)}(this,We,Ie,gt))&&(We.pendingcb++,rt=function(kt,mt,Rt,Re,te,Ue){if(!Rt){var O=function(he,de,Ve){return he.objectMode||he.decodeStrings===!1||typeof de!="string"||(de=m.from(de,Ve)),de}(mt,Re,te);Re!==O&&(Rt=!0,te="buffer",Re=O)}var M=mt.objectMode?1:Re.length;mt.length+=M;var q=mt.length<mt.highWaterMark;if(q||(mt.needDrain=!0),mt.writing||mt.corked){var K=mt.lastBufferedRequest;mt.lastBufferedRequest={chunk:Re,encoding:te,isBuf:Rt,callback:Ue,next:null},K?K.next=mt.lastBufferedRequest:mt.bufferedRequest=mt.lastBufferedRequest,mt.bufferedRequestCount+=1}else Ce(kt,mt,!1,M,Re,te,Ue);return q}(this,We,Ht,Ie,qe,gt)),rt},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){var Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||Ie.corked||Ie.bufferProcessing||!Ie.bufferedRequest||Te(this,Ie))},me.prototype.setDefaultEncoding=function(Ie){if(typeof Ie=="string"&&(Ie=Ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ie+"").toLowerCase())>-1))throw new x(Ie);return this._writableState.defaultEncoding=Ie,this},Object.defineProperty(me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),me.prototype._write=function(Ie,qe,gt){gt(new b("_write()"))},me.prototype._writev=null,me.prototype.end=function(Ie,qe,gt){var Me=this._writableState;return typeof Ie=="function"?(gt=Ie,Ie=null,qe=null):typeof qe=="function"&&(gt=qe,qe=null),Ie!=null&&this.write(Ie,qe),Me.corked&&(Me.corked=1,this.uncork()),Me.ending||function(We,rt,Ht){rt.ending=!0,ct(We,rt),Ht&&(rt.finished?process.nextTick(Ht):We.once("finish",Ht)),rt.ended=!0,We.writable=!1}(this,Me,gt),this},Object.defineProperty(me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ie){this._writableState&&(this._writableState.destroyed=Ie)}}),me.prototype.destroy=F.destroy,me.prototype._undestroy=F.undestroy,me.prototype._destroy=function(Ie,qe){qe(Ie)}},7299:function(R,g,w){var U;function C($,se,x){return se in $?Object.defineProperty($,se,{value:x,enumerable:!0,configurable:!0,writable:!0}):$[se]=x,$}var y=w(8800),v=Symbol("lastResolve"),D=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),F=Symbol("lastPromise"),N=Symbol("handlePromise"),_=Symbol("stream");function A($,se){return{value:$,done:se}}function b($){var se=$[v];if(se!==null){var x=$[_].read();x!==null&&($[F]=null,$[v]=null,$[D]=null,se(A(x,!1)))}}function j($){process.nextTick(b,$)}var Y=Object.getPrototypeOf(function(){}),W=Object.setPrototypeOf((C(U={get stream(){return this[_]},next:function(){var $=this,se=this[m];if(se!==null)return Promise.reject(se);if(this[T])return Promise.resolve(A(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,me){process.nextTick(function(){$[m]?me($[m]):oe(A(void 0,!0))})});var x,X=this[F];if(X)x=new Promise(function(oe,me){return function(Ce,Je){oe.then(function(){me[T]?Ce(A(void 0,!0)):me[N](Ce,Je)},Je)}}(X,this));else{var ce=this[_].read();if(ce!==null)return Promise.resolve(A(ce,!1));x=new Promise(this[N])}return this[F]=x,x}},Symbol.asyncIterator,function(){return this}),C(U,"return",function(){var $=this;return new Promise(function(se,x){$[_].destroy(null,function(X){X?x(X):se(A(void 0,!0))})})}),U),Y);R.exports=function($){var se,x=Object.create(W,(C(se={},_,{value:$,writable:!0}),C(se,v,{value:null,writable:!0}),C(se,D,{value:null,writable:!0}),C(se,m,{value:null,writable:!0}),C(se,T,{value:$._readableState.endEmitted,writable:!0}),C(se,N,{value:function(X,ce){var oe=x[_].read();oe?(x[F]=null,x[v]=null,x[D]=null,X(A(oe,!1))):(x[v]=X,x[D]=ce)},writable:!0}),se));return x[F]=null,y($,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=x[D];return ce!==null&&(x[F]=null,x[v]=null,x[D]=null,ce(X)),void(x[m]=X)}var oe=x[v];oe!==null&&(x[F]=null,x[v]=null,x[D]=null,oe(A(void 0,!0))),x[T]=!0}),$.on("readable",j.bind(null,x)),x}},8393:function(R,g,w){function U(T,F){var N=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);F&&(_=_.filter(function(A){return Object.getOwnPropertyDescriptor(T,A).enumerable})),N.push.apply(N,_)}return N}function C(T,F,N){return F in T?Object.defineProperty(T,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):T[F]=N,T}function y(T,F){for(var N=0;N<F.length;N++){var _=F[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var v=w(1549).Buffer,D=w(9862).inspect,m=D&&D.custom||"inspect";R.exports=function(){function T(){(function(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var F,N;return F=T,N=[{key:"push",value:function(_){var A={data:_,next:null};this.length>0?this.tail.next=A:this.head=A,this.tail=A,++this.length}},{key:"unshift",value:function(_){var A={data:_,next:this.head};this.length===0&&(this.tail=A),this.head=A,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var A=this.head,b=""+A.data;A=A.next;)b+=_+A.data;return b}},{key:"concat",value:function(_){if(this.length===0)return v.alloc(0);for(var A,b,j,Y=v.allocUnsafe(_>>>0),W=this.head,$=0;W;)A=W.data,b=Y,j=$,v.prototype.copy.call(A,b,j),$+=W.data.length,W=W.next;return Y}},{key:"consume",value:function(_,A){var b;return _<this.head.data.length?(b=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):b=_===this.head.data.length?this.shift():A?this._getString(_):this._getBuffer(_),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var A=this.head,b=1,j=A.data;for(_-=j.length;A=A.next;){var Y=A.data,W=_>Y.length?Y.length:_;if(W===Y.length?j+=Y:j+=Y.slice(0,_),(_-=W)==0){W===Y.length?(++b,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=Y.slice(W));break}++b}return this.length-=b,j}},{key:"_getBuffer",value:function(_){var A=v.allocUnsafe(_),b=this.head,j=1;for(b.data.copy(A),_-=b.data.length;b=b.next;){var Y=b.data,W=_>Y.length?Y.length:_;if(Y.copy(A,A.length-_,0,W),(_-=W)==0){W===Y.length?(++j,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=Y.slice(W));break}++j}return this.length-=j,A}},{key:m,value:function(_,A){return D(this,function(b){for(var j=1;j<arguments.length;j++){var Y=arguments[j]!=null?arguments[j]:{};j%2?U(Object(Y),!0).forEach(function(W){C(b,W,Y[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(Y)):U(Object(Y)).forEach(function(W){Object.defineProperty(b,W,Object.getOwnPropertyDescriptor(Y,W))})}return b}({},A,{depth:0,customInspect:!1}))}}],N&&y(F.prototype,N),T}()},6163:function(R){function g(C,y){U(C,y),w(C)}function w(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function U(C,y){C.emit("error",y)}R.exports={destroy:function(C,y){var v=this,D=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return D||m?(y?y(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(U,this,C)):process.nextTick(U,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(T){!y&&T?v._writableState?v._writableState.errorEmitted?process.nextTick(w,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,T)):process.nextTick(g,v,T):y?(process.nextTick(w,v),y(T)):process.nextTick(w,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(C,y){var v=C._readableState,D=C._writableState;v&&v.autoDestroy||D&&D.autoDestroy?C.destroy(y):C.emit("error",y)}}},8800:function(R,g,w){var U=w(3690).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}R.exports=function y(v,D,m){if(typeof D=="function")return y(v,null,D);D||(D={}),m=function(se){var x=!1;return function(){if(!x){x=!0;for(var X=arguments.length,ce=new Array(X),oe=0;oe<X;oe++)ce[oe]=arguments[oe];se.apply(this,ce)}}}(m||C);var T=D.readable||D.readable!==!1&&v.readable,F=D.writable||D.writable!==!1&&v.writable,N=function(){v.writable||A()},_=v._writableState&&v._writableState.finished,A=function(){F=!1,_=!0,T||m.call(v)},b=v._readableState&&v._readableState.endEmitted,j=function(){T=!1,b=!0,F||m.call(v)},Y=function(se){m.call(v,se)},W=function(){var se;return T&&!b?(v._readableState&&v._readableState.ended||(se=new U),m.call(v,se)):F&&!_?(v._writableState&&v._writableState.ended||(se=new U),m.call(v,se)):void 0},$=function(){v.req.on("finish",A)};return function(se){return se.setHeader&&typeof se.abort=="function"}(v)?(v.on("complete",A),v.on("abort",W),v.req?$():v.on("request",$)):F&&!v._writableState&&(v.on("end",N),v.on("close",N)),v.on("end",j),v.on("finish",A),D.error!==!1&&v.on("error",Y),v.on("close",W),function(){v.removeListener("complete",A),v.removeListener("abort",W),v.removeListener("request",$),v.req&&v.req.removeListener("finish",A),v.removeListener("end",N),v.removeListener("close",N),v.removeListener("finish",A),v.removeListener("end",j),v.removeListener("error",Y),v.removeListener("close",W)}}},6233:function(R){R.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(R,g,w){var U,C=w(3690).q,y=C.ERR_MISSING_ARGS,v=C.ERR_STREAM_DESTROYED;function D(_){if(_)throw _}function m(_,A,b,j){j=function($){var se=!1;return function(){se||(se=!0,$.apply(void 0,arguments))}}(j);var Y=!1;_.on("close",function(){Y=!0}),U===void 0&&(U=w(8800)),U(_,{readable:A,writable:b},function($){if($)return j($);Y=!0,j()});var W=!1;return function($){if(!Y&&!W)return W=!0,function(se){return se.setHeader&&typeof se.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void j($||new v("pipe"))}}function T(_){_()}function F(_,A){return _.pipe(A)}function N(_){return _.length?typeof _[_.length-1]!="function"?D:_.pop():D}R.exports=function(){for(var _=arguments.length,A=new Array(_),b=0;b<_;b++)A[b]=arguments[b];var j,Y=N(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new y("streams");var W=A.map(function($,se){var x=se<A.length-1;return m($,x,se>0,function(X){j||(j=X),X&&W.forEach(T),x||(W.forEach(T),Y(j))})});return A.reduce(F)}},7269:function(R,g,w){var U=w(3690).q.ERR_INVALID_OPT_VALUE;R.exports={getHighWaterMark:function(C,y,v,D){var m=function(T,F,N){return T.highWaterMark!=null?T.highWaterMark:F?T[N]:null}(y,D,v);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new U(D?v:"highWaterMark",m);return Math.floor(m)}return C.objectMode?16:16384}}},9299:function(R,g,w){R.exports=w(1159).EventEmitter},7503:function(R,g,w){var U=w(8387).Buffer,C=U.isEncoding||function(b){switch((b=""+b)&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(b){var j;switch(this.encoding=function(Y){var W=function($){if(!$)return"utf8";for(var se;;)switch($){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return $;default:if(se)return;$=(""+$).toLowerCase(),se=!0}}(Y);if(typeof W!="string"&&(U.isEncoding===C||!C(Y)))throw new Error("Unknown encoding: "+Y);return W||Y}(b),this.encoding){case"utf16le":this.text=m,this.end=T,j=4;break;case"utf8":this.fillLast=D,j=4;break;case"base64":this.text=F,this.end=N,j=3;break;default:return this.write=_,void(this.end=A)}this.lastNeed=0,this.lastTotal=0,this.lastChar=U.allocUnsafe(j)}function v(b){return b<=127?0:b>>5==6?2:b>>4==14?3:b>>3==30?4:b>>6==2?-1:-2}function D(b){var j=this.lastTotal-this.lastNeed,Y=function(W,$,se){if((192&$[0])!=128)return W.lastNeed=0,"";if(W.lastNeed>1&&$.length>1){if((192&$[1])!=128)return W.lastNeed=1,"";if(W.lastNeed>2&&$.length>2&&(192&$[2])!=128)return W.lastNeed=2,""}}(this,b);return Y!==void 0?Y:this.lastNeed<=b.length?(b.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(b.copy(this.lastChar,j,0,b.length),void(this.lastNeed-=b.length))}function m(b,j){if((b.length-j)%2==0){var Y=b.toString("utf16le",j);if(Y){var W=Y.charCodeAt(Y.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],Y.slice(0,-1)}return Y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",j,b.length-1)}function T(b){var j=b&&b.length?this.write(b):"";if(this.lastNeed){var Y=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,Y)}return j}function F(b,j){var Y=(b.length-j)%3;return Y===0?b.toString("base64",j):(this.lastNeed=3-Y,this.lastTotal=3,Y===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",j,b.length-Y))}function N(b){var j=b&&b.length?this.write(b):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function _(b){return b.toString(this.encoding)}function A(b){return b&&b.length?this.write(b):""}g.s=y,y.prototype.write=function(b){if(b.length===0)return"";var j,Y;if(this.lastNeed){if((j=this.fillLast(b))===void 0)return"";Y=this.lastNeed,this.lastNeed=0}else Y=0;return Y<b.length?j?j+this.text(b,Y):this.text(b,Y):j||""},y.prototype.end=function(b){var j=b&&b.length?this.write(b):"";return this.lastNeed?j+"":j},y.prototype.text=function(b,j){var Y=function($,se,x){var X=se.length-1;if(X<x)return 0;var ce=v(se[X]);return ce>=0?(ce>0&&($.lastNeed=ce-1),ce):--X<x||ce===-2?0:(ce=v(se[X]))>=0?(ce>0&&($.lastNeed=ce-2),ce):--X<x||ce===-2?0:(ce=v(se[X]))>=0?(ce>0&&(ce===2?ce=0:$.lastNeed=ce-3),ce):0}(this,b,j);if(!this.lastNeed)return b.toString("utf8",j);this.lastTotal=Y;var W=b.length-(Y-this.lastNeed);return b.copy(this.lastChar,0,W),b.toString("utf8",j,W)},y.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length}},1067:function(R,g,w){var U;(function(C,y){var v="function",D="undefined",m="object",T="string",F="major",N="model",_="name",A="type",b="vendor",j="version",Y="architecture",W="console",$="mobile",se="tablet",x="smarttv",X="wearable",ce="embedded",oe="Amazon",me="Apple",Ce="ASUS",Je="BlackBerry",Te="Browser",je="Chrome",ot="Firefox",ct="Google",Ie="Huawei",qe="LG",gt="Microsoft",Me="Motorola",We="Opera",rt="Samsung",Ht="Sharp",kt="Sony",mt="Xiaomi",Rt="Zebra",Re="Facebook",te="Chromium OS",Ue="Mac OS",O=function(ft){for(var Et={},Tt=0;Tt<ft.length;Tt++)Et[ft[Tt].toUpperCase()]=ft[Tt];return Et},M=function(ft,Et){return typeof ft===T&&q(Et).indexOf(q(ft))!==-1},q=function(ft){return ft.toLowerCase()},K=function(ft,Et){if(typeof ft===T)return ft=ft.replace(/^\s\s*/,""),typeof Et===D?ft:ft.substring(0,500)},he=function(ft,Et){for(var Tt,Ct,hn,Qt,nn,Ot,Un=0;Un<Et.length&&!nn;){var gr=Et[Un],Or=Et[Un+1];for(Tt=Ct=0;Tt<gr.length&&!nn&&gr[Tt];)if(nn=gr[Tt++].exec(ft))for(hn=0;hn<Or.length;hn++)Ot=nn[++Ct],typeof(Qt=Or[hn])===m&&Qt.length>0?Qt.length===2?typeof Qt[1]==v?this[Qt[0]]=Qt[1].call(this,Ot):this[Qt[0]]=Qt[1]:Qt.length===3?typeof Qt[1]!==v||Qt[1].exec&&Qt[1].test?this[Qt[0]]=Ot?Ot.replace(Qt[1],Qt[2]):y:this[Qt[0]]=Ot?Qt[1].call(this,Ot,Qt[2]):y:Qt.length===4&&(this[Qt[0]]=Ot?Qt[3].call(this,Ot.replace(Qt[1],Qt[2])):y):this[Qt]=Ot||y;Un+=2}},de=function(ft,Et){for(var Tt in Et)if(typeof Et[Tt]===m&&Et[Tt].length>0){for(var Ct=0;Ct<Et[Tt].length;Ct++)if(M(Et[Tt][Ct],ft))return Tt==="?"?y:Tt}else if(M(Et[Tt],ft))return Tt==="?"?y:Tt;return ft},Ve={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},St={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,j],[/opios[\/ ]+([\w\.]+)/i],[j,[_,We+" Mini"]],[/\bopr\/([\w\.]+)/i],[j,[_,We]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[j,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,j],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[_,"UC"+Te]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[j,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[j,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[j,[_,"Smart Lenovo "+Te]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Te],j],[/\bfocus\/([\w\.]+)/i],[j,[_,ot+" Focus"]],[/\bopt\/([\w\.]+)/i],[j,[_,We+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[_,We+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[_,"MIUI "+Te]],[/fxios\/([-\w\.]+)/i],[j,[_,ot]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Te]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Te],j],[/samsungbrowser\/([\w\.]+)/i],[j,[_,rt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],j],[/metasr[\/ ]?([\d\.]+)/i],[j,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,j],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Re],j],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,j],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[j,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[_,je+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,je+" WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[_,"Android "+Te]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,j],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[j,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[j,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[j,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[_,ot+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,j],[/(cobalt)\/([\w\.]+)/i],[_,[j,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,q]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[N,[b,rt],[A,se]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[N,[b,rt],[A,$]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[N,[b,me],[A,$]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[N,[b,me],[A,se]],[/(macintosh);/i],[N,[b,me]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[N,[b,Ht],[A,$]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[N,[b,Ie],[A,se]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[N,[b,Ie],[A,$]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[N,/_/g," "],[b,mt],[A,$]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[N,/_/g," "],[b,mt],[A,se]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[N,[b,"OPPO"],[A,$]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[N,[b,"Vivo"],[A,$]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[N,[b,"Realme"],[A,$]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[N,[b,Me],[A,$]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[N,[b,Me],[A,se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[N,[b,qe],[A,se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[N,[b,qe],[A,$]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[N,[b,"Lenovo"],[A,se]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[N,/_/g," "],[b,"Nokia"],[A,$]],[/(pixel c)\b/i],[N,[b,ct],[A,se]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[N,[b,ct],[A,$]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[N,[b,kt],[A,$]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[N,"Xperia Tablet"],[b,kt],[A,se]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[N,[b,"OnePlus"],[A,$]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[N,[b,oe],[A,se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[N,/(.+)/g,"Fire Phone $1"],[b,oe],[A,$]],[/(playbook);[-\w\),; ]+(rim)/i],[N,b,[A,se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[N,[b,Je],[A,$]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[N,[b,Ce],[A,se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[N,[b,Ce],[A,$]],[/(nexus 9)/i],[N,[b,"HTC"],[A,se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[N,/_/g," "],[A,$]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[N,[b,"Acer"],[A,se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[N,[b,"Meizu"],[A,$]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[N,[b,"Ulefone"],[A,$]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,N,[A,$]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,N,[A,se]],[/(surface duo)/i],[N,[b,gt],[A,se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[N,[b,"Fairphone"],[A,$]],[/(u304aa)/i],[N,[b,"AT&T"],[A,$]],[/\bsie-(\w*)/i],[N,[b,"Siemens"],[A,$]],[/\b(rct\w+) b/i],[N,[b,"RCA"],[A,se]],[/\b(venue[\d ]{2,7}) b/i],[N,[b,"Dell"],[A,se]],[/\b(q(?:mv|ta)\w+) b/i],[N,[b,"Verizon"],[A,se]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[N,[b,"Barnes & Noble"],[A,se]],[/\b(tm\d{3}\w+) b/i],[N,[b,"NuVision"],[A,se]],[/\b(k88) b/i],[N,[b,"ZTE"],[A,se]],[/\b(nx\d{3}j) b/i],[N,[b,"ZTE"],[A,$]],[/\b(gen\d{3}) b.+49h/i],[N,[b,"Swiss"],[A,$]],[/\b(zur\d{3}) b/i],[N,[b,"Swiss"],[A,se]],[/\b((zeki)?tb.*\b) b/i],[N,[b,"Zeki"],[A,se]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],N,[A,se]],[/\b(ns-?\w{0,9}) b/i],[N,[b,"Insignia"],[A,se]],[/\b((nxa|next)-?\w{0,9}) b/i],[N,[b,"NextBook"],[A,se]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],N,[A,$]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],N,[A,$]],[/\b(ph-1) /i],[N,[b,"Essential"],[A,$]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[N,[b,"Envizen"],[A,se]],[/\b(trio[-\w\. ]+) b/i],[N,[b,"MachSpeed"],[A,se]],[/\btu_(1491) b/i],[N,[b,"Rotor"],[A,se]],[/(shield[\w ]+) b/i],[N,[b,"Nvidia"],[A,se]],[/(sprint) (\w+)/i],[b,N,[A,$]],[/(kin\.[onetw]{3})/i],[[N,/\./g," "],[b,gt],[A,$]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[N,[b,Rt],[A,se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[N,[b,Rt],[A,$]],[/smart-tv.+(samsung)/i],[b,[A,x]],[/hbbtv.+maple;(\d+)/i],[[N,/^/,"SmartTV"],[b,rt],[A,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,qe],[A,x]],[/(apple) ?tv/i],[b,[N,me+" TV"],[A,x]],[/crkey/i],[[N,je+"cast"],[b,ct],[A,x]],[/droid.+aft(\w+)( bui|\))/i],[N,[b,oe],[A,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[N,[b,Ht],[A,x]],[/(bravia[\w ]+)( bui|\))/i],[N,[b,kt],[A,x]],[/(mitv-\w{5}) bui/i],[N,[b,mt],[A,x]],[/Hbbtv.*(technisat) (.*);/i],[b,N,[A,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,K],[N,K],[A,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[A,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,N,[A,W]],[/droid.+; (shield) bui/i],[N,[b,"Nvidia"],[A,W]],[/(playstation [345portablevi]+)/i],[N,[b,kt],[A,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[N,[b,gt],[A,W]],[/((pebble))app/i],[b,N,[A,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[N,[b,me],[A,X]],[/droid.+; (glass) \d/i],[N,[b,ct],[A,X]],[/droid.+; (wt63?0{2,3})\)/i],[N,[b,Rt],[A,X]],[/(quest( 2| pro)?)/i],[N,[b,Re],[A,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[A,ce]],[/(aeobc)\b/i],[N,[b,oe],[A,ce]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[N,[A,$]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[N,[A,se]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[A,se]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[A,$]],[/(android[-\w\. ]{0,9});.+buil/i],[N,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,j],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,j],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[j,de,Ve]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[j,de,Ve],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,Ue],[j,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[j,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,j],[/\(bb(10);/i],[j,[_,Je]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[j,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[_,ot+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[j,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[j,[_,je+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,te],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,j],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],j],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,j]]},st=function(ft,Et){if(typeof ft===m&&(Et=ft,ft=y),!(this instanceof st))return new st(ft,Et).getResult();var Tt=typeof C!==D&&C.navigator?C.navigator:y,Ct=ft||(Tt&&Tt.userAgent?Tt.userAgent:""),hn=Tt&&Tt.userAgentData?Tt.userAgentData:y,Qt=Et?function(Ot,Un){var gr={};for(var Or in Ot)Un[Or]&&Un[Or].length%2==0?gr[Or]=Un[Or].concat(Ot[Or]):gr[Or]=Ot[Or];return gr}(St,Et):St,nn=Tt&&Tt.userAgent==Ct;return this.getBrowser=function(){var Ot,Un={};return Un[_]=y,Un[j]=y,he.call(Un,Ct,Qt.browser),Un[F]=typeof(Ot=Un[j])===T?Ot.replace(/[^\d\.]/g,"").split(".")[0]:y,nn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==v&&(Un[_]="Brave"),Un},this.getCPU=function(){var Ot={};return Ot[Y]=y,he.call(Ot,Ct,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[b]=y,Ot[N]=y,Ot[A]=y,he.call(Ot,Ct,Qt.device),nn&&!Ot[A]&&hn&&hn.mobile&&(Ot[A]=$),nn&&Ot[N]=="Macintosh"&&Tt&&typeof Tt.standalone!==D&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ot[N]="iPad",Ot[A]=se),Ot},this.getEngine=function(){var Ot={};return Ot[_]=y,Ot[j]=y,he.call(Ot,Ct,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[_]=y,Ot[j]=y,he.call(Ot,Ct,Qt.os),nn&&!Ot[_]&&hn&&hn.platform!="Unknown"&&(Ot[_]=hn.platform.replace(/chrome os/i,te).replace(/macos/i,Ue)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(Ot){return Ct=typeof Ot===T&&Ot.length>500?K(Ot,500):Ot,this},this.setUA(Ct),this};st.VERSION="1.0.37",st.BROWSER=O([_,j,F]),st.CPU=O([Y]),st.DEVICE=O([N,b,A,W,$,x,se,X,ce]),st.ENGINE=st.OS=O([_,j]),typeof g!==D?(R.exports&&(g=R.exports=st),g.UAParser=st):w.amdO?(U=(function(){return st}).call(g,w,g,R))===y||(R.exports=U):typeof C!==D&&(C.UAParser=st);var at=typeof C!==D&&(C.jQuery||C.Zepto);if(at&&!at.ua){var tt=new st;at.ua=tt.getResult(),at.ua.get=function(){return tt.getUA()},at.ua.set=function(ft){tt.setUA(ft);var Et=tt.getResult();for(var Tt in Et)at.ua[Tt]=Et[Tt]}}})(typeof window=="object"?window:this)},7839:function(R,g,w){function U(C){try{if(!w.g.localStorage)return!1}catch(v){return!1}var y=w.g.localStorage[C];return y!=null&&String(y).toLowerCase()==="true"}R.exports=function(C,y){if(U("noDeprecation"))return C;var v=!1;return function(){if(!v){if(U("throwDeprecation"))throw new Error(y);U("traceDeprecation")?console.trace(y):console.warn(y),v=!0}return C.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(R){R.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(R){R.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(R){R.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(R){R.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(R){R.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(R){R.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},d={};function p(R){var g=d[R];if(g!==void 0)return g.exports;var w=d[R]={exports:{}};return l[R].call(w.exports,w,w.exports,p),w.exports}p.amdO={},p.n=function(R){var g=R&&R.__esModule?function(){return R.default}:function(){return R};return p.d(g,{a:g}),g},p.d=function(R,g){for(var w in g)p.o(g,w)&&!p.o(R,w)&&Object.defineProperty(R,w,{enumerable:!0,get:g[w]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(R){if(typeof window=="object")return window}}(),p.o=function(R,g){return Object.prototype.hasOwnProperty.call(R,g)};var I={};return function(){p.d(I,{default:function(){return m}}),p(8416);var R,g=p(1715),w=p(8080),U=p(1737),C=p(1139),y=function(){var T,F="application/dash+xml";function N(A,b,j){if(!A||!/^VIDEO$/i.test(A.nodeName))return null;if(A._dashjs_player)return A._dashjs_player;var Y,W=A.id||A.name||"video element";if(!(b=b||[].slice.call(A.querySelectorAll("source")).filter(function($){return $.type==F})[0])&&A.src)(b=document.createElement("source")).src=A.src;else if(!b&&!A.src)return null;return j=j||{},(Y=(0,C.Z)(j).create()).initialize(A,b.src,A.autoplay),T||(T=Y.getDebug().getLogger()),T.debug("Converted "+W+" to dash.js player and added content: "+b.src),A._dashjs_player=Y,Y}function _(A){return/^VIDEO$/i.test(A.nodeName)?A:_(A.parentNode)}return{create:N,createAll:function(A,b){var j=[];A=A||"[data-dashjs-player]";for(var Y=(b=b||document).querySelectorAll(A),W=0;W<Y.length;W++){var $=N(Y[W],null);j.push($)}for(var se=b.querySelectorAll('source[type="'+F+'"]'),x=0;x<se.length;x++){var X=N(_(se[x]),null);j.push(X)}return j}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?y.createAll():R=window.setInterval(function(){window.dashjs&&(window.clearInterval(R),y.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),y.createAll()}));var v=y,D=p(6398);dashjs.Protection=U.default,dashjs.MetricsReporting=w.default,dashjs.MediaPlayerFactory=v,dashjs.Debug=D.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),I.default}()})})(wU);var qV=wU.exports;const HV=fb(qV);var Iu,Gi,bA,CA,dg={};dg.d=(i,o)=>{for(var l in o)dg.o(o,l)&&!dg.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:o[l]})},dg.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o);var uE={};function Wk(i,o){(o==null||o>i.length)&&(o=i.length);for(var l=0,d=Array(o);l<o;l++)d[l]=i[l];return d}function Xi(i){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),d.forEach(function(p){var I;I=l[p],p in i?Object.defineProperty(i,p,{value:I,enumerable:!0,configurable:!0,writable:!0}):i[p]=I})}return i}function so(i,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):function(l,d){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(l);p.push.apply(p,I)}return p}(Object(o)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(o,l))}),i}function $k(i,o){return function(l){if(Array.isArray(l))return l}(i)||function(l,d){var p,I,R=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(R!=null){var g=[],w=!0,U=!1;try{for(R=R.call(l);!(w=(p=R.next()).done)&&(g.push(p.value),!d||g.length!==d);w=!0);}catch(C){U=!0,I=C}finally{try{w||R.return==null||R.return()}finally{if(U)throw I}}return g}}(i,o)||function(l,d){if(l){if(typeof l=="string")return Wk(l,d);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Wk(l,d)}}(i,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}dg.d(uE,{GP:()=>bA,fZ:()=>VV,vn:()=>CA}),(Iu=bA||(bA={})).LOADED="loaded",Iu.SEEKING="seeking",Iu.SEEKED="seeked",Iu.BUFFERING="buffering",Iu.BUFFERED="buffered",Iu.PLAY="play",Iu.PLAYING="playing",Iu.PAUSE="pause",Iu.ENDED="ended",Iu.TIME_UPDATE="timeupdate",(Gi=CA||(CA={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var KV={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},VV=function(i){var o=i.mediaElement,l=i.callback,d=i.allowResumeAfterEnded,p=d!==void 0&&d,I=null,R=function(){typeof I=="number"&&clearTimeout(I)},g=Xi({},KV),w=function(){return p?g.loading:g.loading||g.ended},U=function(){!g.loading&&g.buffering&&o.playbackRate>0&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),g.loading&&(o.playbackRate===0?g=so(Xi({},g),{deferLoadedEvent:!0}):(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},C=function(){w()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=so(Xi({},g),{seeking:!0,buffering:!1}),l("seeking"))},y=function(){if(!w()&&g.seeking){if(o.playbackRate===0){g=so(Xi({},g),{deferSeekedEvent:!0});return}g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},v=function(){if(R(),!w()&&!g.seeking){if(o.seeking){C();return}g.buffering||(g=so(Xi({},g),{buffering:!0}),l("buffering"))}},D=function(){if(R(),o.playbackRate===0){g=so(Xi({},g),{deferPlayingEvent:!0});return}(g=so(Xi({},g),{deferPlayingEvent:!1})).loading&&U(),g.initialPlayFired?g.buffering?(g=so(Xi({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=so(Xi({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=so(Xi({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&o.playbackRate===0&&!o.seeking},T=[["canplaythrough",U],["playing",D],["waiting",v],["seeking",C],["seeked",y],["ended",function(){g=so(Xi({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),R(),l("ended")}],["timeupdate",function(){w()||(g.buffering&&!o.paused&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!w()&&g.paused&&g.initialPlayFired&&(g=so(Xi({},g),{playRequested:!0}),l("play"))}],["pause",function(){!o.ended&&(g.playRequested||!g.paused)&&((g=so(Xi({},g),{playRequested:!1})).deferLoadedEvent?(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),o.paused&&(g=so(Xi({},g),{paused:!0}),l("pause"))):(g=so(Xi({},g),{paused:!0}),l("pause")))}],["ratechange",function(){R();var F=o.playbackRate>0;g.deferLoadedEvent&&F&&U(),g.deferSeekedEvent&&F&&y(),g.deferPlayingEvent&&F&&D(),!w()&&(m()?I=window.setTimeout(function(){m()&&v()},50):g.buffering&&F&&(g=so(Xi({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(F){var N=$k(F,2),_=N[0],A=N[1];return o.addEventListener(_,A)}),{teardown:function(){R(),T.forEach(function(F){var N=$k(F,2),_=N[0],A=N[1];return o.removeEventListener(_,A)})}}},bu=uE.GP;uE.vn;var zV=uE.fZ;const YV={NEAR_END:"nearend"};class AU extends Sf{constructor(o){var l;super(),this.options=o,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(o){return{currentTime:o.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=zV({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:o=>{const l=this.createBaseEventPayload(this.video);switch(o){case bu.LOADED:{this.emit("loaded",l);break}case bu.SEEKING:{this.emit("seeking",l);break}case bu.SEEKED:{this.emit("seeked",l);break}case bu.BUFFERING:{this.emit("buffering",l);break}case bu.BUFFERED:{this.emit("buffered",l);break}case bu.PLAY:{this.emit("play",l);break}case bu.PLAYING:{this.emit("playing",l);break}case bu.PAUSE:{this.emit("pause",l);break}case bu.ENDED:{this.emit("ended",l);break}case bu.TIME_UPDATE:{const d=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&d>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&d<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit(YV.NEAR_END,{...l,remainingTime:d})),this.emit("timeupdate",l);break}}}})}destroy(){var o;(o=this.eventFilter)==null||o.teardown()}getStats(){const o=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:o.droppedVideoFrames,totalVideoFrames:o.totalVideoFrames}}}class WV extends Error{constructor(o,l){super(o),this.rawError=l}}class $V extends AU{constructor(o){var d,p;super(o),this.name="DashJSEngine",this.player=HV.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(I){return I+o.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(d=this.options)==null?void 0:d.widevineLicenseUrl,httpRequestHeaders:o.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(o,l){this.setupMediaEventFilter(),await new Promise((d,p)=>{var I;this.once("loaded",()=>{d()});try{this.player.attachSource(o,Math.max((I=l==null?void 0:l.startTimeSeconds)!=null?I:0,0))}catch(R){p(new WV("UnknownError",R))}})}}var IU={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(i){(function(){var o=typeof window<"u"?window:tu,l={};(function(p,I,R){var g;function w(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var U=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof I=="object"&&I];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=C(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&U(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,f){this.g=c,U(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&U(r.prototype,e,{configurable:!0,writable:!0,value:function(){return D(w(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:w(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var F=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},N;if(typeof Object.setPrototypeOf=="function")N=Object.setPrototypeOf;else{var _;e:{var A={a:!0},b={};try{b.__proto__=A,_=b.a;break e}catch(e){}_=!1}N=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var j=N;function Y(e,t){if(e.prototype=F(t.prototype),e.prototype.constructor=e,j)j(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Ij=t.prototype}function W(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function $(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}W.prototype.s=function(e){this.h=e};function se(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}W.prototype.return=function(e){this.i={return:e},this.g=this.j};function x(e,t,n){return e.g=n,{value:t}}W.prototype.u=function(e){this.g=e};function X(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function me(e,t,n){e.g=t,e.m=n||0}function Ce(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function Je(e){e.A=[e.i],e.m=0,e.j=0}function Te(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function je(e){this.g=new W,this.h=e}function ot(e,t){$(e.g);var n=e.g.l;return n?ct(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),Ie(e))}function ct(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(f){return e.g.l=null,se(e.g,f),Ie(e)}return e.g.l=null,r.call(e.g,c),Ie(e)}function Ie(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,se(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function qe(e){this.next=function(t){return $(e.g),e.g.l?t=ct(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Ie(e)),t},this.throw=function(t){return $(e.g),e.g.l?t=ct(e,e.g.l.throw,t,e.g.s):(se(e.g,t),t=Ie(e)),t},this.return=function(t){return ot(e,t)},this[Symbol.iterator]=function(){return this}}function gt(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(f){f.done?r(f.value):Promise.resolve(f.value).then(t,n).then(c,u)}c(e.next())})}function Me(e){return gt(new qe(new je(e)))}function We(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function r(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var u=y.setTimeout;n.prototype.i=function(f){u(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var E=f[h];f[h]=null;try{E()}catch(S){this.j(S)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(S){return function(k){E||(E=!0,S.call(h,k))}}var h=this,E=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;u(function(){if(f.B()){var h=y.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=y.CustomEvent,h=y.Event,E=y.dispatchEvent;return typeof E>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=y.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,E(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)c.h(this.g[f]);this.g=null}};var c=new n;return t.prototype.H=function(f){var h=this.j();f.Fd(h.resolve,h.reject)},t.prototype.I=function(f,h){var E=this.j();try{f.call(h,E.resolve,E.reject)}catch(S){E.reject(S)}},t.prototype.then=function(f,h){function E(ne,z){return typeof ne=="function"?function(ye){try{S(ne(ye))}catch(Le){k(Le)}}:z}var S,k,G=new t(function(ne,z){S=ne,k=z});return this.Fd(E(f,S),E(h,k)),G},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Fd=function(f,h){function E(){switch(S.h){case 1:f(S.i);break;case 2:h(S.i);break;default:throw Error("Unexpected state: "+S.h)}}var S=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=r,t.reject=function(f){return new t(function(h,E){E(f)})},t.race=function(f){return new t(function(h,E){for(var S=m(f),k=S.next();!k.done;k=S.next())r(k.value).Fd(h,E)})},t.all=function(f){var h=m(f),E=h.next();return E.done?r([]):new t(function(S,k){function G(ye){return function(Le){ne[ye]=Le,z--,z==0&&S(ne)}}var ne=[],z=0;do ne.push(void 0),z++,r(E.value).Fd(G(ne.length-1),k),E=h.next();while(!E.done)})},t});function rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var S;!(S=E.next()).done;)S=S.value,this.set(S[0],S[1])}}function n(){}function r(E){var S=typeof E;return S==="object"&&E!==null||S==="function"}function u(E){if(!rt(E,f)){var S=new n;U(E,f,{value:S})}}function c(E){var S=Object[E];S&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),S(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),S=Object.seal({}),k=new e([[E,2],[S,3]]);return k.get(E)!=2||k.get(S)!=3?!1:(k.delete(E),k.set(S,4),!k.has(E)&&k.get(S)==4)}catch(G){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,S){if(!r(E))throw Error("Invalid WeakMap key");if(u(E),!rt(E,f))throw Error("WeakMap key fail: "+E);return E[f][this.g]=S,this},t.prototype.get=function(E){return r(E)&&rt(E,f)?E[f][this.g]:void 0},t.prototype.has=function(E){return r(E)&&rt(E,f)&&rt(E[f],this.g)},t.prototype.delete=function(E){return r(E)&&rt(E,f)&&rt(E[f],this.g)?delete E[f][this.g]:!1},t}),v("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var S=h.g;return D(function(){if(S){for(;S.head!=h.g;)S=S.Ab;for(;S.next!=S.head;)return S=S.next,{done:!1,value:E(S)};S=null}return{done:!0,value:void 0}})}function r(h,E){var S=E&&typeof E;S=="object"||S=="function"?c.has(E)?S=c.get(E):(S=""+ ++f,c.set(E,S)):S="p_"+E;var k=h.h[S];if(k&&rt(h.h,S))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:S,list:k,index:h,entry:G}}return{id:S,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var S=E.entries(),k=S.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=S.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!S.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var S=r(this,h);return S.list||(S.list=this.h[S.id]=[]),S.entry?S.entry.value=E:(S.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},S.list.push(S.entry),this.g.Ab.next=S.entry,this.g.Ab=S.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var S=this.entries(),k;!(k=S.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var f=0;return u}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(f){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function Ht(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}v("Array.prototype.keys",function(e){return e||function(){return Ht(this,function(t){return t})}});function kt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return kt(this,t,n).gg}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function mt(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return mt(this,t,"includes").indexOf(t,n||0)!==-1}}),v("Array.prototype.find",function(e){return e||function(t,n){return kt(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var r=mt(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var f=0;f<c&&n<u;)if(r[n++]!=t[f++])return!1;return f>=c}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),v("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var f=0;!(c=t.next()).done;)u.push(n.call(r,c.value,f++))}else for(c=t.length,f=0;f<c;f++)u.push(n.call(r,t[f],f));return u}});var Rt=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)rt(r,u)&&(e[u]=r[u])}return e};v("Object.assign",function(e){return e||Rt}),v("Array.prototype.values",function(e){return e||function(){return Ht(this,function(t,n){return n})}}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return Ht(this,function(t,n){return[t,n]})}}),v("String.prototype.repeat",function(e){return e||function(t){var n=mt(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)rt(t,r)&&n.push(t[r]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)rt(t,r)&&n.push([r,t[r]]);return n}});var Re=this||self;function te(e,t){e=e.split(".");var n=Re;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Ue(){}function O(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function he(){}function de(){}function Ve(){}function St(e){var t=We.apply(1,arguments);ft.has(e)||(ft.add(e),Ve.apply(he,T(t)))}function st(){}function at(){}function tt(){}var ft=new Set;p.console&&(Ve=function(){return console.warn.apply(console,T(We.apply(0,arguments)))},de=function(){console.error.apply(console,T(We.apply(0,arguments)))});function Et(){this.g={}}g=Et.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function Tt(){this.g=new Et}g=Tt.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,r){this.g&&(e=new Ct(e,t,n,r),this.g.push(t,e))},g.na=function(e,t,n,r){function u(f){c.Kb(e,t,u),n(f)}var c=this;this.D(e,t,u,r)},g.Kb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},te("shaka.util.EventManager",Tt),Tt.prototype.removeAll=Tt.prototype.ib,Tt.prototype.unlisten=Tt.prototype.Kb,Tt.prototype.listenOnce=Tt.prototype.na,Tt.prototype.listen=Tt.prototype.D,Tt.prototype.release=Tt.prototype.release;function Ct(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=hn(e,r),this.target.addEventListener(t,n,this.g)}Ct.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function hn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Qt(e)?t:t.capture||!1}function Qt(e){var t=nn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Ot(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Or(e,t){this.g=e,this.h=t}Or.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Or(5,0),r=Lr,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function ei(e,t,n,r){Ve([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Ji(e,t,n,r){de([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Lr=null;function eo(){}eo.prototype.extract=function(){},eo.prototype.decode=function(){return[]},eo.prototype.clear=function(){},eo.prototype.getStreams=function(){return[]};function _i(){}_i.prototype.init=function(){},_i.prototype.parse=function(){return[]};function Mi(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(to(e)==to(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function to(e){return e instanceof ArrayBuffer?e:e.buffer}function Ti(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function Pu(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,r){var u=to(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,f))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}te("shaka.util.BufferUtils",Mi),Mi.toDataView=tn,Mi.toUint16=Pu,Mi.toUint8=Qn,Mi.toArrayBuffer=Ti,Mi.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},te("shaka.media.IClosedCaptionParser",an);function wt(e){this.l=new _i,(e=Yt[e.toLowerCase()])&&(this.l=e()),this.g=new eo,(e=Mt)&&(this.g=e())}wt.prototype.init=function(e){this.l.init(e)},wt.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},wt.prototype.h=function(){this.g.clear()},wt.prototype.j=function(){return this.g.getStreams()},te("shaka.media.ClosedCaptionParser",wt),wt.findDecoder=function(){return Mt},wt.unregisterDecoder=function(){Mt=null},wt.registerDecoder=function(e){Mt=e},wt.findParser=function(e){return Yt[e]},wt.unregisterParser=function(e){delete Yt[e]},wt.registerParser=function(e,t){Yt[e]=t};var Yt={},Mt=null;function zt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function gn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=zt),e.length!=t.length)return!1;t=t.slice();var r={};e=m(e);for(var u=e.next();!u.done;r={ne:r.ne},u=e.next()){if(r.ne=u.value,u=t.findIndex(function(c){return function(f){return n(c.ne,f)}}(r)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=zt),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Cn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Vn,this.writingMode=rn,this.lineInterpretation=cn,this.line=null,this.lineHeight="",this.lineAlign=bn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=kr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}Cn.prototype.clone=function(){var e=new Cn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}te("shaka.text.Cue",Cn),Cn.equal=on,Cn.prototype.clone=Cn.prototype.clone;var Bn="auto";Cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};Cn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};Cn.displayAlign=Ur;var Vn="ltr";Cn.direction={HORIZONTAL_LEFT_TO_RIGHT:Vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";Cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var cn=0;Cn.lineInterpretation={LINE_NUMBER:cn,PERCENTAGE:1};var bn="start",Jn={CENTER:"center",START:bn,END:"end"};Cn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Cn.defaultTextColor=ar;var br={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Cn.defaultTextBackgroundColor=br;var kr=400;Cn.fontWeight={NORMAL:kr,BOLD:700};var Yi="normal",no={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};Cn.fontStyle=no,Cn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=hi}te("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var hi="";Br.scrollMode={NONE:hi,UP:"up"};function vi(){}vi.prototype.destroy=function(){};function So(e,t,n){ea[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function ro(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([vc,uu,wl,bi]),u=r.next();!u.done;u=r.next())if(u=ea[n+"-"+u.value]){var c=u.ge(),f=c.isSupported(e,t);if(c.destroy(),f)return u.ge}return null}te("shaka.transmuxer.TransmuxerEngine",vi),vi.findTransmuxer=ro,vi.unregisterTransmuxer=function(e,t){delete ea[e.toLowerCase().split(";")[0]+"-"+t]},vi.registerTransmuxer=So,vi.prototype.destroy=vi.prototype.destroy;var ea={},bi=1,wl=2,uu=3,vc=4;vi.PluginPriority={FALLBACK:bi,PREFERRED_SECONDARY:wl,PREFERRED:uu,APPLICATION:vc};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var bf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function si(e){var t;e instanceof si?(Ms(this,e.kb),this.mc=e.mc,_n(this,e.wb),Xn(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(bf))?(Ms(this,t[1]||"",!0),this.mc=ti(t[2]||""),_n(this,t[3]||"",!0),Xn(this,t[4]),this.Pa=ti(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ti(t[7]||"")):this.g=new Wi(null)}g=si.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,Xr,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,Xr,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Di:ta,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,wo)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new si);var n=!!e.kb;n?Ms(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var r=e.Pa;if(n)Xn(t,e.Bc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.wb&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],f=0;f<r.length;){var h=r[f++];h=="."?u&&f==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&f==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new si(this)};function Ms(e,t,n){e.kb=n?ti(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ti(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,ui)),e.g=new Wi(t))}function ti(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Xr=/[#\/\?@]/g,ta=/[#\?:]/g,Di=/[#\?]/g,ui=/[#\?@]/g,wo=/#/g;function Wi(e){this.g=e||null}function Go(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function na(e){return Go(e),e.Zc}g.add=function(e,t){Go(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return Go(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return Go(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),r=this.Ca[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function pt(e,t,n){var r=We.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}pt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},te("shaka.util.Error",pt),pt.Severity={RECOVERABLE:1,CRITICAL:2},pt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},pt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function ra(e){this.h=e,this.g=void 0}ra.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ds(e){this.h=e,this.g=null}Ds.prototype.X=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){p.clearTimeout(r),n=!1},r=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ds.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ds(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ds(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},te("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function Ao(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function lu(e){return Ec().canPlayType(e)!=""}function Al(){return!!navigator.userAgent.match(/Edge?\//)}function gs(){return Yr("Xbox One")}function Ga(){return Yr("Tizen")}function Ou(){return Yr("Tizen 3")}function Lu(){return Yr("Tizen 2")}function ia(){return Yr("Web0S")}function oa(){return Yr("CrKey")}function cu(){if(!Yr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function ms(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ga()&&!Yr("PC=EOS")&&!Yr("PC=APL")&&!Yr("VirginMedia")&&!Yr("SOPOpenBrowser")&&!xr()&&!Yr("AFT")&&!Yr("WPE")}function yc(){return Yr("PlayStation 5")}function xr(){return Yr("PlayStation 4")}function vs(){return Yr("Hisense")||Yr("VIDAA")}function ys(){if(!ms())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yr(e){return(navigator.userAgent||"").includes(e)}function Ec(){return aa||(Il||(Il=new pr(function(){aa=null})),(aa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(aa=document.createElement("video")),Il.X(1),aa)}function Sa(){var e,t,n,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},oa()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(Ga()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){Ve("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(gs()){n=new Windows.Media.Protection.ProtectionCapabilities,r=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===r.maybe)}catch(G){u=r.notSupported}u===r.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(ia()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){Ve("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(vs()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!xr()&&!yc()){k.u(2);break}return f=!1,ce(k,8),x(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,f=h.resolution==="4K",me(k,9);break;case 8:return Ce(k),ce(k,11),x(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,f=E.resolution==="4K",me(k,9);break;case 11:S=Ce(k),Ve("PlayStation: Failed to get the display info:",S);case 9:f?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var Il=null,aa=null;function Es(){}function Vr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!xr())return e=new TextDecoder().decode(e),e.includes("")&&de('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function qa(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new pt(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return wh(r)}function Ha(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Vr(n);if(n[0]==254&&n[1]==255)return qa(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return qa(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return qa(e,!1);if(n[1]==0&&n[3]==0)return qa(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Vr(e);throw new pt(2,2,2003)}function Ka(e){if(p.TextEncoder&&!xr()){var t=new TextEncoder;return Ti(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ti(t)}function Cf(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function wh(e){return im.value()(e)}function Io(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}te("shaka.util.StringUtils",Es),Es.resetFromCharCode=function(){im.g=void 0},Es.toUTF16=Cf,Es.toUTF8=Ka,Es.fromBytesAutoDetect=Ha,Es.fromUTF16=qa,Es.fromUTF8=Vr;var im=new ra(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.Db)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.Db));return u}}(t);return null});function Pi(){}function Rf(e){return e=wh(Qn(e)),btoa(e)}function fu(e,t){return t=t==null?!0:t,e=Rf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function qo(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function du(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=p.parseInt(e.substr(2*r,2),16);return n}function Ps(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function li(){for(var e=We.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}te("shaka.util.Uint8ArrayUtils",Pi),Pi.concat=li,Pi.toHex=Ps,Pi.fromHex=du,Pi.fromBase64=qo,Pi.toBase64=fu,Pi.toStandardBase64=Rf;function co(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new si(e[0]);return t=new si(t[0]),[n.resolve(t).toString()]}t=t.map(function(f){return new si(f)}),n=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new si(r.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(r.resolve(c.value).toString())}return n}function ku(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function Ah(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(f,h){var E=h;E.length!=22&&(E=fu(du(h),!1));var S=f;S.length!=22&&(S=fu(du(f),!1)),f={kty:"oct",kid:E,k:S},n.push(f),r.push(f.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:Qn(Ka(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Fu(e,t){if(t.length==1)return t[0];if(e=bo(e,t),e!=null)return e;throw new pt(2,4,4025,t)}function bo(e,t){for(var n=m(bh[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==vr?"":null}function Ih(e,t){var n=[];e=m(bh[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var vr="text",yi={fa:"video",S:"audio",ma:vr,ue:"image",Gi:"application"},bh={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function _c(){}function Si(e,t){var n=e;return t&&!hu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Uu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Os(e,t,n){var r=Si(e,t);return t=Uu(e,t),ro(t)?(e=ro(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function om(e,t,n){var r=[t];return mE.forEach(function(u,c){var f=e[c];c=="codecs"?hu.includes(e.mimeType)||r.push('codecs="'+n+'"'):f&&r.push(u+'="'+f+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function xf(e){return e.split(";")[0].split("/")[1]}function wa(e){var t=Ch(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Va(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Ch(n.value),t.push(n[0]);return t.sort().join(",")}function Aa(e){return e.split(";")[0]}function Do(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function am(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Ch(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}te("shaka.util.MimeUtils",_c),_c.getFullTypeWithAllCodecs=Uu,_c.getFullType=Si;var mE=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),hu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ls(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function bl(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Mt:!1}Ls.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function vE(e,t,n,r,u){var c,f,h,E,S,k,G;return Me(function(ne){if(ne.g==1)return x(ne,Promise.resolve(),2);if(!e.i||!e.j)return ne.return();if(n==null||r==null)return e.i.parseInit(Qn(t)),ne.return();for(c=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(Qn(t),f,u),E=m(h),S=E.next();!S.done;S=E.next())k=S.value,e.A(k,u||null,f);G=h.filter(function(z){return z.startTime>=e.l&&z.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(ne)})}Ls.prototype.remove=function(e,t){var n=this;return Me(function(r){if(r.g==1)return x(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function Rh(e,t,n){e.l=t,e.m=n}function Nf(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function sm(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())sm(e,r.value,n)}function Mf(e,t,n,r,u){var c=n+" "+r,f=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,f.has(h)||f.set(h,new Map),f.get(h).has(c)||f.get(h).set(c,[]),sm(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(f.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(f.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(f.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=f.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}te("shaka.text.TextEngine",Ls),Ls.prototype.destroy=Ls.prototype.destroy,Ls.findParser=function(e){return ji[e]},Ls.unregisterParser=function(e){delete ji[e]},Ls.registerParser=function(e,t){ji[e]=t};var ji={};function um(e,t){return e.concat(t)}function lm(){}function Bu(e){return e!=null}function go(){}function ju(e,t){return e=Cr(e),t=Cr(t),e.split("-")[0]==t.split("-")[0]}function Tc(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Zu(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Cr(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ni.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Gu(e,t){return e=Cr(e),t=Cr(t),t==e?4:Tc(t,e)?3:Zu(t,e)?2:Tc(e,t)?1:0}function xh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ni.get(e)||e}function qu(e){return e.language?Cr(e.language):e.audio&&e.audio.language?Cr(e.audio.language):e.video&&e.video.language?Cr(e.video.language):"und"}function Cl(e,t){e=Cr(e);var n=new Set,r=m(t);for(t=r.next();!t.done;t=r.next())n.add(Cr(t.value));for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,t==e)return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Tc(t,e))return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Zu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Tc(e,t))return t;return null}te("shaka.util.LanguageUtils",go),go.findClosestLocale=Cl,go.getLocaleForVariant=qu,go.getLocaleForText=function(e){return Cr(e.language||"und")},go.getBase=xh,go.relatedness=Gu,go.areSiblings=function(e,t){var n=xh(e),r=xh(t);return e!=n&&t!=r&&n==r},go.normalize=Cr,go.isSiblingOf=Zu,go.isParentOf=Tc,go.areLanguageCompatible=ju,go.areLocaleCompatible=function(e,t){return e=Cr(e),t=Cr(t),e==t};var ni=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function za(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},f;for(f in r)c[f]=t(r[f]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function cm(e){var t={},n;for(n in e)t[n]=e[n];return t}function Sc(){}function fm(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=Nh(u,t,n)),r.length){for(t=new Et,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ye,Le){ye=0;var De=[],He={};Le=m(Le);for(var Se=Le.next();!Se.done;He={Uc:He.Uc},Se=Le.next())He.Uc=Se.value,Se=r.filter(function(Qe){return function(Be){return Qe.Uc.decodingInfos[0][Be]}}(He)).length,Se>ye?(ye=Se,De=[He.Uc]):Se==ye&&De.push(He.Uc);c.push.apply(c,T(De))}),u=c}n=new Set,t=new Set;var f=m(u);for(u=f.next();!u.done;u=f.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ye,Le){return ye.bandwidth-Le.bandwidth});var h=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){f=f.value;var E=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,S=u.get(E)||[];if(S.length){var k=S[S.length-1],G=wa(k.codecs),ne=wa(f.codecs);G==ne&&f.bandwidth>k.bandwidth&&(S.push(f),h.push(f.id))}else S.push(f),h.push(f.id);u.set(E,S)}n=Array.from(t).sort(function(ye,Le){return ye.bandwidth&&Le.bandwidth?ye.bandwidth-Le.bandwidth:ye.width-Le.width}),t=Un();var z=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){if(f=f.value,E=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,S=u.get(E)||[],S.length){if(k=S[S.length-1],!t&&(G=wa(k.codecs),ne=wa(f.codecs),G!==ne))continue;f.width>k.width||f.height>k.height?(S.push(f),z.push(f.id)):f.width==k.width&&f.height==k.height&&(G=wa(k.codecs),ne=wa(f.codecs),G==ne&&f.bandwidth>k.bandwidth&&(S.push(f),z.push(f.id)))}else S.push(f),z.push(f.id);u.set(E,S)}e.variants=e.variants.filter(function(ye){var Le=ye.audio;return ye=ye.video,!(Le&&!h.includes(Le.id)||ye&&!z.includes(ye.id))})}function Nh(e,t,n){var r={};t=m(t);for(var u=t.next();!u.done;r={te:r.te},u=t.next())if(r.te=u.value,u=e.filter(function(c){return function(f){return f.video&&f.video.codecs.startsWith(c.te)}}(r)),u.length){e=u;break}for(r={},n=m(n),t=n.next();!t.done;r={me:r.me},t=n.next())if(r.me=t.value,t=e.filter(function(c){return function(f){return f.audio&&f.audio.codecs.startsWith(c.me)}}(r)),t.length){e=t;break}return e}function Mh(e,t,n){e.variants=e.variants.filter(function(r){return Df(r,t,n)})}function Df(e,t,n){function r(h,E,S){return h>=E&&h<=S}var u=e.video;if(u&&u.width&&u.height){var c=u.width,f=u.height;if(f>c&&(f=m([f,c]),c=f.next().value,f=f.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(f,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function wc(e,t,n){var r=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Df(u,t,n),c!=u.allowedByApplication&&(r=!0)}return r}function dm(e,t,n){return n=n===void 0?[]:n,Me(function(r){return r.g==1?x(r,hm(e,t,0<t.offlineSessionIds.length,n),2):(yE(t),x(r,Lf(t),0))})}function hm(e,t,n,r){var u,c;return Me(function(f){if(f.g==1)return x(f,Ph(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=Dh(h,u);if(!E){var S=[];h.audio&&S.push(Uf(h.audio)),h.video&&S.push(Uf(h.video))}return E}),X(f)})}function Dh(e,t){var n=gs(),r=Yr("Firefox")&&Yr("Android"),u=e.video,c=u&&u.width||0,f=u&&u.height||0;if(n&&u&&(1920<c||1080<f)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=Rl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Fu("video",c),n=Rl(n),c=Fu("audio",c),c=Hu(c),f=Os(u.mimeType,c,"audio"),!Ot(f))return!1;n=[n,c].join()}if(c=Os(u.mimeType,n,"video"),!Ot(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=Hu(u.codecs),n=Os(u.mimeType,r,"audio"),!Ot(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function Pf(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=Pf(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function pm(e,t){var n,r,u,c,f,h,E;return Me(function(S){if(S.g==1){for(n=function(k,G){if(k){var ne=za(k);return ne.supported=k.supported&&G.supported,ne.powerEfficient=k.powerEfficient&&G.powerEfficient,ne.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!ne.keySystemAccess&&(ne.keySystemAccess=G.keySystemAccess),ne}return G},r=null,u=[],c={},f=m(t),h=f.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=f.next())E=h.value,c.Hc=Pf(E),c.Gc=Oh,c.Gc[c.Hc]?r=n(r,c.Gc[c.Hc]):u.push(Of(E).then(function(k){return function(G){var ne=null;G=m(G||[]);for(var z=G.next();!z.done;z=G.next())ne=n(ne,z.value);ne&&(k.Gc[k.Hc]=ne,r=n(r,ne))}}(c)));return x(S,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(S)})}function Of(e){var t=[""];e.video&&(t=Do(e.video.contentType).split(","));var n=[""];e.audio&&(n=Do(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},f=m(n),h=f.next();!h.done;c={Mb:c.Mb},h=f.next())h=h.value,c.Mb=za(e),e.video&&(c.Mb.video.contentType=Si(Aa(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=Si(Aa(c.Mb.audio.contentType),h)),r.push(new Promise(function(E){return function(S,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){S(G)}).catch(k)}}(c)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Ph(e,t,n,r){var u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe;return Me(function(Be){switch(Be.g){case 1:if(e.some(function(vt){return vt.decodingInfos.length}))return Be.return();u={},c=m(r),f=c.next();case 2:if(f.done){Be.u(4);break}u.oe=f.value,h=!1,E=m(e),S=E.next();case 5:if(S.done){Be.u(7);break}k=S.value,G=gm(k,t,n).filter(function(vt){return function(xt){return xt=xt[0],(xt.keySystemConfiguration&&xt.keySystemConfiguration.keySystem)===vt.oe}}(u)),ne=m(G),z=ne.next();case 8:if(z.done){Be.u(10);break}return ye=z.value,x(Be,pm(k,ye),9);case 9:z=ne.next(),Be.u(8);break;case 10:k.decodingInfos.length&&(h=!0),S=E.next(),Be.u(5);break;case 7:if(h)return Be.return();u={oe:u.oe},f=c.next(),Be.u(2);break;case 4:Le=m(e),S=Le.next();case 12:if(S.done){Be.u(0);break}De=S.value,He=gm(De,t,n).filter(function(vt){return vt=vt[0],vt=vt.keySystemConfiguration&&vt.keySystemConfiguration.keySystem,!vt||!r.includes(vt)}),Se=m(He),z=Se.next();case 15:if(z.done){S=Le.next(),Be.u(12);break}return Qe=z.value,x(Be,pm(De,Qe),16);case 16:z=Se.next(),Be.u(15)}})}function gm(e,t,n){var r=e.audio,u=e.video,c=[],f=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var S=Do(E);if(S.includes(",")&&!r){var k=S.split(",");S=Fu("video",k),k=Fu("audio",k),k=Hu(k),k=Os(Aa(E),k,"audio"),f.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(S=Rl(S),E={contentType:Os(Aa(E),S,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(r)for(h=m(r.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,S=Hu(Do(E)),E=Os(Aa(E),S,"audio"),f.push({contentType:E,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),f.length==0&&f.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,S=m(f),k=S.next();!k.done;k=S.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];e=[],n=new Map,f=m(f);for(var ne=f.next();!ne.done;ne=f.next())c=ne.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,S=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var z=n.get(E),ye={keySystem:E,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};for(z=m(z),ne=z.next();!ne.done;ne=z.next()){if(ne=ne.value,ne.initData&&ne.initData.length){for(var Le=new Set,De=m(ne.initData),He=De.next();!He.done;He=De.next())Le.add(He.value.initDataType);ye.initDataType=ne.initData[0].initDataType}ne.distinctiveIdentifierRequired&&(ye.distinctiveIdentifier="required"),ne.persistentStateRequired&&(ye.persistentState="required"),ne.sessionType&&(ye.sessionTypes=[ne.sessionType]),r&&(ne.audioRobustness!=""?ye.audio?ye.audio.robustness=ye.audio.robustness||ne.audioRobustness:ye.audio={robustness:ne.audioRobustness}:ye.audio||(ye.audio={})),u&&(ne.videoRobustness!=""?ye.video?ye.video.robustness=ye.video.robustness||ne.videoRobustness:ye.video={robustness:ne.videoRobustness}:ye.video||(ye.video={}))}G.keySystemConfiguration=ye,S.push(G)}e.push(S)}return e}function Hu(e){return e.toLowerCase()=="flac"?ys()?"fLaC":"flac":e==="Opus"?"opus":e}function Rl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function yE(e){e.textStreams=e.textStreams.filter(function(t){return t=Si(t.mimeType,t.codecs),bl(t)})}function Lf(e){var t,n,r,u,c,f,h;return Me(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){E.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),zu.has(c)){E.u(5);break}if(f=TE.get(c),!f){zu.set(c,!1),E.u(5);break}return x(E,EE(f),7);case 7:h=E.h,zu.set(c,h);case 5:zu.get(c)&&t.push(u),r=n.next(),E.u(2);break;case 4:e.imageStreams=t,X(E)}})}function EE(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function xl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var S=[];t&&S.push(t.kind),n&&S.push(n.kind),S=S[0]||null;var k=new Set;if(t)for(var G=m(t.roles),ne=G.next();!ne.done;ne=G.next())k.add(ne.value);if(n)for(G=m(n.roles),ne=G.next();!ne.done;ne=G.next())k.add(ne.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:S,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:f,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Nl(e){return{id:e.id,active:!1,type:vr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Ku(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Ac(e){return e.__shaka_id||(e.__shaka_id=_E++),e.__shaka_id}function mm(e){var t=vm(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Ml(e){var t=vm(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function vm(e){var t=e.language;return{id:Ac(e),active:!1,type:"",bandwidth:0,language:Cr(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function kf(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Ff(e){return e.filter(function(t){return kf(t)})}function Ic(e,t,n,r){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var f=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==f}),t){var h=Cl(Cr(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return Cr(E.language)==h}))}if(u=u.filter(function(E){return E.forced==r}),n){if(e=Vu(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(um,[]),e.length?Vu(u,e[0]):u}function Vu(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Uf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}te("shaka.util.StreamUtils",Sc),Sc.meetsRestrictions=Df;var Oh={},_E=0,zu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),TE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new K,this.F=new Tt,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*r),n=Math.min(n,this.l.clientWidth*r)}var u=this.m.filter(function(S){return!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)});if(u.length||(u=this.m),r=u,e&&u.length!=this.m.length&&(r=this.m.filter(function(S){return!!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)})),e=Lh(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=jf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=Lh(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=Lh(this,null,r,1/0,1/0),e=[e[0]]),n=e[0]||null,r=0;r<e.length;r++){u=e[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),f=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=r+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=f&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&Bf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&Bf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(SE)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Bf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Lh(e,t,n,r,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(f){return f.bandwidth&&c?f.bandwidth<=c:!0}))}return t&&(n=n.filter(function(f){return Df(f,t,{width:u,height:r})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function jf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}te("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var SE=1;te("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),te("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function bc(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}bc.prototype.add=function(e,t,n){return ym(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function ym(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!kh(u,c)||!Em(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||kh(e,t))&&Em(e.roles,t.roles))),!r}bc.prototype.values=function(){return this.g.values()};function kh(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return Va(r)}),t=t.codecs.split(",").map(function(r){return Va(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Em(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Fh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Dl(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Fh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),r=e.filter(function(u){return ym(t.i,u,!n,t.g)});return r.length?new bc(r[0],r,!n,this.g):this.j.create(e)};function Dl(e,t,n,r,u,c,f,h,E,S){this.s=e,this.A=t,this.h=n,this.i=r,this.B=u,this.l=c,this.g=f===void 0?"":f,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=S===void 0?!1:S}Dl.prototype.create=function(e){var t=[];t=_m(e,this.s);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=Tm(t,this.A),e.length&&(t=e),this.l&&(e=wm(t,this.l),e.length&&(t=e)),this.i&&(e=IE(t,this.i),e.length&&(t=e)),this.h&&(e=Sm(t,this.h),e.length&&(t=e)),this.g&&(e=wE(t,this.g),e.length&&(t=e)),this.j&&(e=AE(t,this.j),e.length&&(t=e)),e=bE(t,this.B),e.length&&(t=e),new bc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function _m(e,t){t=Cr(t);var n=Cl(t,e.map(function(r){return qu(r)}));return n?e.filter(function(r){return n==qu(r)}):[]}function Tm(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function wE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function AE(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Sm(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function IE(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function wm(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function bE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Uh(){this.g=Cc,this.i=new Map().set(Cc,2).set(Pl,1),this.h=0}function Bh(e,t,n){e.i.set(Cc,n).set(Pl,t)}var Pl=0,Cc=1;function jh(e,t){var n=sa();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Zh(e){var t,n;return Me(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new pt(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),x(r,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,X(r)})}function sa(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function pu(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function Gh(){var e=Promise.reject(new pt(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function Yu(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Am(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function Zf(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(f);else{var S=h?e:t;S?r=qh(S,E,c):(h?c.resolve:c.reject)(E)}}}function r(){return c.reject(f),u.abort()}var u=this,c=new Rr,f=new pt(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return r()})};function qh(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}te("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.va,pi.prototype.finally=pi.prototype.finally,pi.all=Zf,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Am,pi.completed=Yu,pi.aborted=Gh,pi.failed=pu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Im(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},te("shaka.util.FakeEvent",Wn);var Rc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new Et,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function Ol(){this.g=[]}function gu(e,t){e.g.push(t.finally(function(){gn(e.g,t)}))}Ol.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,r,u,c){Sr.call(this),this.i=!1,this.m=new Ol,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=r||null,this.C=u||null,this.B=c||null,this.o=!1}Y(Kr,Sr),g=Kr.prototype,g.Cf=function(e){this.o=e};function Ho(e,t,n,r){n=n||Vh;var u=Nc[e];(!u||n>=u.priority)&&(Nc[e]={priority:n,ge:t,bi:r===void 0?!1:r})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Oi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var r=this,u=new Kh;if(this.i){var c=Promise.reject(new pt(2,7,7001));return c.catch(function(){}),new xc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?za(t.retryParameters):sa(),t.uris=za(t.uris),c=bm(this,e,t,n);var f=c.va(function(){return Hh(r,e,t,n,new jh(t.retryParameters,!1),0,null,u)}),h=f.va(function(ne){return CE(r,e,ne,n)}),E=Date.now(),S=0;c.promise.then(function(){S=Date.now()-E},function(){});var k=0;f.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(ne){var z=Date.now()-k,ye=ne.response;return ye.timeMs+=S,ye.timeMs+=z,ne.Ih||!r.l||ye.fromCache||t.method=="HEAD"||e!=Ya||r.l(ye.timeMs,ye.data.byteLength,Cm(n)),r.B&&r.B(e,ye,n),ye},function(ne){throw ne&&(ne.severity=2),ne});return c=new xc(G.promise,function(){return G.abort()},u),gu(this.m,c),c};function bm(e,t,n,r){function u(h){c=c.va(function(){return n.body&&(n.body=Ti(n.body)),h(t,n,r)})}var c=Yu(void 0);e.A&&u(e.A),e=m(e.g);for(var f=e.next();!f.done;f=e.next())u(f.value);return c.va(void 0,function(h){throw h instanceof pt&&h.code==7001?h:new pt(2,1,1006,h)})}function Hh(e,t,n,r,u,c,f,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,r,n.uris[c],n.uris[c-1]);var E=new si(n.uris[c]),S=E.kb,k=!1;S||(S=location.protocol,S=S.slice(0,-1),Ms(E,S),n.uris[c]=E.toString()),S=S.toLowerCase();var G=(S=Nc[S])?S.ge:null;if(!G)return pu(new pt(2,1,1e3,E));var ne=S.bi,z=null,ye=null,Le=!1,De=!1,He;return Am(Zh(u)).va(function(){if(e.i)return Gh();He=Date.now();var Se=0;n.requestStartTime=Date.now();var Qe=G(n.uris[c],n,t,function(xt,Vt,Bt){z&&z.stop(),ye&&ye.X(vt/1e3),e.l&&t==Ya&&(Se++,n.packetNumber=Se,e.l(xt,Vt,Cm(r),n),k=!0,h.g=Bt)},function(xt){e.j&&e.j(xt,n,t),De=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!ne)return Qe;var Be=n.retryParameters.connectionTimeout;Be&&(z=new pr(function(){Le=!0,Qe.abort()}),z.X(Be/1e3));var vt=n.retryParameters.stallTimeout;return vt&&(ye=new pr(function(){Le=!0,Qe.abort()})),Qe}).va(function(Se){z&&z.stop(),ye&&ye.stop(),Se.timeMs==null&&(Se.timeMs=Date.now()-He);var Qe={response:Se,Ih:k};return!De&&e.j&&e.j(Se.headers,n,t),Qe},function(Se){if(z&&z.stop(),ye&&ye.stop(),e.s){var Qe=null,Be=0;Se instanceof pt&&(Qe=Se,Se.code==1001&&(Be=Se.data[1])),e.s(n,Qe,Be,Le)}if(e.i)return Gh();if(Le&&(Se=new pt(1,1,1003,n.uris[c],t)),Se instanceof pt){if(Se.code==7001)throw Se;if(Se.code==1010)throw f;if(Se.severity==1)return Qe=new Map().set("error",Se),Qe=new Wn("retry",Qe),e.dispatchEvent(Qe),c=(c+1)%n.uris.length,Hh(e,t,n,r,u,c,Se,h)}throw Se})}function CE(e,t,n,r){var u=Yu(void 0),c={};e=m(e.h);for(var f=e.next();!f.done;c={qe:c.qe},f=e.next())c.qe=f.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Ti(E.data)),h.qe(t,E,r)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof pt){if(h.code==7001)throw h;E=h.severity}throw new pt(E,1,1007,h)})}function Cm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}te("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Oi,Kr.defaultRetryParameters=function(){return sa()},Kr.prototype.clearAllResponseFilters=Kr.prototype.ah,Kr.prototype.unregisterResponseFilter=Kr.prototype.Ci,Kr.prototype.registerResponseFilter=Kr.prototype.fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.$g,Kr.prototype.unregisterRequestFilter=Kr.prototype.Bi,Kr.prototype.registerRequestFilter=Kr.prototype.ei,Kr.unregisterScheme=function(e){delete Nc[e]},Kr.registerScheme=Ho,Kr.prototype.setForceHTTPS=Kr.prototype.Cf;function Kh(){this.g=0}Kr.NumBytesRemainingClass=Kh;function xc(e,t,n){pi.call(this,e,t),this.h=n}Y(xc,pi),Kr.PendingRequest=xc;var Ya=1;Kr.RequestType={MANIFEST:0,SEGMENT:Ya,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var Vh=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Vh};var Nc={};function Wu(e){this.g=!1,this.h=new Rr,this.i=e}Wu.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof pt&&t.code==7003?t:new pt(2,7,7003,t)}function Gf(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function RE(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Ll(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Mc(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==Rm,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw ks()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw ks()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw ks()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw ks()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw ks()}if(2097151<t)throw new pt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw ks();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw ks();this.g+=e},g.mi=function(e){if(this.g<e)throw ks();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw ks();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Vr(e)};function ks(){return new pt(2,3,3e3)}te("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var Rm=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Rm};function Fr(){this.i=[],this.h=[],this.g=!1}g=Fr.prototype,g.box=function(e,t){return e=xm(e),this.i[e]=xE,this.h[e]=t,this},g.O=function(e,t){return e=xm(e),this.i[e]=Nm,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,r){var u=t.wa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.M(),f=t.M(),h=qf(f),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var S=this.h[f];if(S){var k=null,G=null;if(this.i[f]==Nm){if(r&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}f=u+c,n&&f>t.getLength()&&(f=t.getLength()),r&&f>t.getLength()?this.g=!0:(r=f-t.wa(),t=0<r?t.sb(r):new Uint8Array(0),t=new Dr(t,0),S({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function yr(e){for(var t=kl(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function mu(e){for(var t=kl(e),n=e.reader.M(),r=0;r<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function wi(e){var t=kl(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function zh(e){var t=kl(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function $u(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function xm(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function qf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function kl(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}te("shaka.util.Mp4Parser",Fr),Fr.headerSize=kl,Fr.typeToString=qf,Fr.allData=$u,Fr.audioSampleEntry=zh,Fr.visualSampleEntry=wi,Fr.sampleDescription=mu,Fr.children=yr,Fr.prototype.parseNext=Fr.prototype.Ac,Fr.prototype.parse=Fr.prototype.parse,Fr.prototype.stop=Fr.prototype.stop,Fr.prototype.fullBox=Fr.prototype.O,Fr.prototype.box=Fr.prototype.box;var xE=0,Nm=1;function Mm(e){var t=this;this.g=[],this.h=[],this.data=[],new Fr().box("moov",yr).box("moof",yr).O("pssh",function(n){if(!(1<n.version)){var r=Qn(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Ps(n.reader.sb(16))),0<n.version){r=n.reader.M();for(var u=0;u<r;u++){var c=Ps(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function Hf(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var f=new Uint8Array(c),h=tn(f),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>r?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,f.set(t,E),E+=t.length,0<r)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=du(n.value),f.set(n,E),E+=n.length;return h.setUint32(E,u),f.set(e,E+4),f}function Yh(e,t){return e=Ha(e),Fl(e,t)}function Fl(e,t){return e=NE(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Dc(e){return Oc.has(e)?Oc.get(e):""}function NE(e){function t(u,c){c=c===void 0?!1:c;for(var f=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){c=r+2,r=e.indexOf(">",r),c=e.substring(c,r);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",r),h==-1?(f.push(e.substr(r+9)),r=e.length):(f.push(e.substring(r+9,h)),r=h+3);continue}r++;continue}e:{E=c,r++;var S=n(),k={};for(h=[];e.charCodeAt(r)!==62&&e[r];){var G=e.charCodeAt(r);if(64<G&&91>G||96<G&&123>G){G=n();for(var ne=e.charCodeAt(r);ne&&ne!==39&&ne!==34&&!(64<ne&&91>ne||96<ne&&123>ne)&&ne!==62;)r++,ne=e.charCodeAt(r);var z=r+1;if(r=e.indexOf(e[r],z),z=e.slice(z,r),ne===39||ne===34){if(r===-1){for(E={tagName:S,attributes:k,children:h,parent:null},S=0;S<h.length;S++)typeof h[S]!="string"&&(h[S].parent=E);h=E;break e}}else z=null,r--;G.startsWith("xmlns:")&&Oc.set(z,G.split(":")[1]),S==="tt"&&G==="xml:space"&&z==="preserve"&&(E=!0),k[G]=z}r++}for(e.charCodeAt(r-1)!==47?(r++,h=t(S,E)):r++,E={tagName:S,attributes:k,children:h,parent:null},S=h.length,k=0;k<S;k++)G=h[k],typeof G!="string"?G.parent=E:k==S-1&&G=="\n"&&h.pop();h=E}if(f.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(f.push.apply(f,T(h.children)),h.children=[])}else h=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),h=e.slice(h,r+1),c?0<h.length&&f.push(h):(f.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&f.push(h),r++;return f}function n(){for(var u=r;"\r\n	>/= ".indexOf(e[r])===-1&&e[r];)r++;return e.slice(u,r)}var r=0;return t("")}function Kf(e){return typeof e=="string"}function ME(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Wr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Ci(e){return typeof e=="string"?Io(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Io(e))}function vu(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ci(e))&&(e=e.trim()),e):null}function Ia(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Ia(r.value,t,n)}return n}function ua(e,t){return e=Wr(e,t),e.length!=1?null:e[0]}function Fs(e,t,n){return e=Vf(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function yu(e,t,n){return t=Dc(t),e.attributes[t+":"+n]||null}function Vf(e,t,n){t=Dc(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function la(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=yu(e,r.value,n))return r;return null}function zf(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Wa(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Yf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Xu(e){return e=Number(e),e%1===0?e:null}function Us(e){return e=Number(e),e%1===0&&0<e?e:null}function Co(e){return e=Number(e),e%1===0&&0<=e?e:null}function Pc(e){return e=Number(e),isNaN(e)?null:e}function Wh(e){return e?e.toLowerCase()==="true":!1}function Dm(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function $h(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var r=document.createElement(e.tagName),u;for(u in e.attributes)r.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&$h(e.parent,!0,!1).appendChild(r),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=$h(t,!1,!0),r.appendChild(n);return r}var Oc=new Map([]);function Lc(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new Tt,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return V(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){Ee(t)}),this.l.catch(function(){}),this.j=new Wu(function(){return DE(t)}),this.ba=!1,this.F=this.G=null}g=Lc.prototype,g.destroy=function(){return this.j.destroy()};function DE(e){return Me(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,x(t,H(e),2);case 2:if(!e.m){t.u(3);break}return ce(t,4),x(t,e.m.setMediaKeys(null),6);case 6:me(t,5);break;case 4:Ce(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function Pm(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,km(e,t)}function Om(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.T=0<e.A.size,km(e,t)}function Lm(e,t,n,r,u,c){var f=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,u),ep(e,f,[])}function km(e,t){var n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se;return Me(function(Qe){if(Qe.g==1){if(n=kE(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(f=t.some(function(Be){return!!(Be.video&&Be.video.drmInfos.length||Be.audio&&Be.audio.drmInfos.length)}),f||(h=Ll(e.h.servers),ge(t,h)),E=new Set,S=m(t),u=S.next();!u.done;u=S.next())for(k=u.value,G=we(k),ne=m(G),z=ne.next();!z.done;z=ne.next())ye=z.value,E.add(ye);for(Le=m(E),z=Le.next();!z.done;z=Le.next())De=z.value,Oe(De,Ll(e.h.servers),Ll(e.h.advanced||{}),e.h.keySystemsMapping);return x(Qe,Ph(t,e.T,e.ba,e.h.preferredKeySystems),2)}return He=f||Object.keys(e.h.servers).length,He?(Se=ep(e,void 0,t),Qe.return(f?Se:Se.catch(function(){}))):(e.da=!0,Qe.return(Promise.resolve()))})}function Xh(e){var t;return Me(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return x(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return ce(n,4),e.G=e.m.setMediaKeys(e.s),x(n,e.G,6);case 6:me(n,5);break;case 4:t=Ce(n),e.o(new pt(2,6,6003,t.message));case 5:jr(e.j),X(n)}})}function PE(e,t){return Me(function(n){if(n.g==1)return x(n,Xh(e),2);Ul(e,t.initDataType,Qn(t.initData)),X(n)})}g.Vc=function(e){var t=this;return Me(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())P(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?x(n,Xh(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new pt(2,6,6010))}),n.return());Qh(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return PE(t,r)}),X(n)})};function Fm(e){var t,n,r,u,c;return Me(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Oi([e.g.serverCertificateUri],e.h.retryParameters),ce(f,3),n=e.C.zb.request(5,t),x(f,n.promise,5);case 5:r=f.h,e.g.serverCertificate=Qn(r.data),me(f,4);break;case 3:throw u=Ce(f),new pt(2,6,6017,u);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(ce(f,6),x(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:me(f,0);break;case 6:throw c=Ce(f),new pt(2,6,6004,c.message)}})}function OE(e,t){var n,r,u;return Me(function(c){if(c.g==1)return x(c,jm(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.ab=new Rr,r.push(u.ab)),r.push(n.remove()),x(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function Qh(e){var t,n,r,u,c;return Me(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,E){jm(e,E,h)}),x(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&ve(e))return f.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,Ul(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),f.return(e.l)})}function Ul(e,t,n){if(n.length){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function Um(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Jh(e){return e=e.i.keys(),e=Gf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=Gf(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Mc(this.ea)};function ep(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He;return Me(function(Se){switch(Se.g){case 1:if(r=new Map,n.length){u=LE(e,n,r),Se.u(2);break}return x(Se,Bm(e,t),3);case 3:u=Se.h;case 2:if(c=u,!c)throw new pt(2,6,6001);for(jr(e.j),ce(Se,4),e.H.clear(),f=c.getConfiguration(),h=f.audioCapabilities||[],E=f.videoCapabilities||[],S=m(h),k=S.next();!k.done;k=S.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(ne=m(E),k=ne.next();!k.done;k=ne.next())z=k.value,e.H.add(z.contentType.toLowerCase());if(n.length){var Qe=c.keySystem,Be=r.get(c.keySystem),vt=[],xt=[],Vt=[],Bt=[],_t=[],Zt=new Set;Ke(Be,vt,xt,Bt,Vt,_t,Zt);var ln=e.T?"persistent-license":"temporary";for(Qe={keySystem:Qe,encryptionScheme:vt[0],licenseServerUri:xt[0],distinctiveIdentifierRequired:Be[0].distinctiveIdentifierRequired,persistentStateRequired:Be[0].persistentStateRequired,sessionType:Be[0].sessionType||ln,audioRobustness:Be[0].audioRobustness||"",videoRobustness:Be[0].videoRobustness||"",serverCertificate:Bt[0],serverCertificateUri:Vt[0],initData:_t,keyIds:Zt},Be=m(Be),vt=Be.next();!vt.done;vt=Be.next())vt=vt.value,vt.distinctiveIdentifierRequired&&(Qe.distinctiveIdentifierRequired=vt.distinctiveIdentifierRequired),vt.persistentStateRequired&&(Qe.persistentStateRequired=vt.persistentStateRequired);Be=Qe}else Be=c.keySystem,Qe=t.get(c.keySystem),vt=[],xt=[],Vt=[],Bt=[],_t=[],Zt=new Set,Ke(Qe.drmInfos,vt,xt,Bt,Vt,_t,Zt),Be={keySystem:Be,encryptionScheme:vt[0],licenseServerUri:xt[0],distinctiveIdentifierRequired:Qe.distinctiveIdentifier=="required",persistentStateRequired:Qe.persistentState=="required",sessionType:Qe.sessionTypes[0]||"temporary",audioRobustness:(Qe.audioCapabilities?Qe.audioCapabilities[0].robustness:"")||"",videoRobustness:(Qe.videoCapabilities?Qe.videoCapabilities[0].robustness:"")||"",serverCertificate:Bt[0],serverCertificateUri:Vt[0],initData:_t,keyIds:Zt};if(e.g=Be,!e.g.licenseServerUri)throw new pt(2,6,6012,e.g.keySystem);return x(Se,c.createMediaKeys(),6);case 6:if(ye=Se.h,jr(e.j),e.s=ye,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Se.u(7);break}return ce(Se,8),x(Se,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Le=Se.h,Le!="usable")throw new pt(2,6,6018);jr(e.j),me(Se,7,4);break;case 8:throw De=Ce(Se,4),De instanceof pt?De:new pt(2,6,6019,De.message);case 7:return e.da=!0,x(Se,Fm(e),11);case 11:jr(e.j),me(Se,0);break;case 4:throw He=Ce(Se),jr(e.j,He),e.g=null,e.H.clear(),He instanceof pt?He:new pt(2,6,6002,He.message)}})}function LE(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){var c=m(we(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new pt(2,6,6e3);for(r={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;r={pe:r.pe},u=e.next())for(r.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(S){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==S.pe}}(r)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(r=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var f=m(u.value.decodingInfos);for(u=f.next();!u.done;u=f.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==r)return h.keySystemAccess}}}return null}function Bm(e,t){var n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De;return Me(function(He){switch(He.g){case 1:if(t.size==1&&t.has(""))throw new pt(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;f=m(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){He.u(4);break}if(E=h.value,!t.has(E)){He.u(3);break}return S=t.get(E),ce(He,6),x(He,navigator.requestMediaKeySystemAccess(E,[S]),8);case 8:return n=He.h,He.return(n);case 6:Ce(He);case 7:jr(e.j);case 3:h=f.next(),He.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){He.u(11);break}ne=G.value,z=m(t.keys()),h=z.next();case 12:if(h.done){G=k.next(),He.u(9);break}if(ye=h.value,Le=t.get(ye),De=Le.drmInfos.some(function(Se){return!!Se.licenseServerUri}),De!=ne){He.u(13);break}return ce(He,15),x(He,navigator.requestMediaKeySystemAccess(ye,[Le]),17);case 17:return n=He.h,He.return(n);case 15:Ce(He);case 16:jr(e.j);case 13:h=z.next(),He.u(12);break;case 11:return He.return(n)}})}function kE(e){return e=Ll(e.h.clearKeys),e.size==0?null:Ah(e)}function kc(e){ie(e)&&e.l.resolve()}function Fc(e,t){new pr(function(){t.loaded=!0,kc(e)}).X($e)}function jm(e,t,n){var r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:try{r=e.s.createSession("persistent-license")}catch(G){return u=new pt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(r,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):P(e,G)}),e.B.D(r,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(r,c),ce(k,2),x(k,r.load(t),4);case 4:return f=k.h,jr(e.j),f||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(h,6,6013)),c.loaded=!0),Fc(e,c),kc(e),k.return(r);case 2:E=Ce(k),jr(e.j,E),e.i.delete(r),S=e.h.persistentSessionOnlinePlayback?1:2,e.o(new pt(S,6,6005,E.message)),c.loaded=!0,kc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new pt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):P(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof pt||(t=new pt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&fu(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var f=c.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new pt(2,6,6006,c.message,c,h))}})}function P(e,t){var n,r,u,c,f,h,E,S,k,G,ne,z,ye;Me(function(Le){switch(Le.g){case 1:if(n=t.target,e.h.logLicenseExchange&&fu(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),f=Oi([u],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,r&&(f.initData=r.initData,f.initDataType=r.initDataType),Um(e.g.keySystem)){var De=qa(f.body,!0,!0);if(De.includes("PlayReadyKeyMessage")){De=Fl(De,"PlayReadyKeyMessage");var He=Ia(De,"HttpHeader");He=m(He);for(var Se=He.next();!Se.done;Se=He.next()){var Qe=Se.value;Se=Ia(Qe,"name")[0],Qe=Ia(Qe,"value")[0],f.headers[Ci(Se)]=Ci(Qe)}De=Ia(De,"Challenge")[0],f.body=qo(Ci(De))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),ce(Le,2),S=e.C.zb.request(2,f),x(Le,S.promise,4);case 4:E=Le.h,me(Le,3);break;case 2:return k=Ce(Le),e.j.g||(G=new pt(2,6,6007,k),e.i.size==1?(e.o(G),r&&r.ab&&r.ab.reject(G)):(r&&r.ab&&r.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Le.return();case 3:return e.j.g?Le.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&fu(E.data),ce(Le,5),x(Le,n.update(E.data),7));case 7:me(Le,6);break;case 5:return ne=Ce(Le),z=new pt(2,6,6008,ne.message),e.o(z),r&&r.ab&&r.ab.reject(z),Le.return();case 6:if(e.j.g)return Le.return();ye=new Wn("drmsessionupdate"),e.C.onEvent(ye),r&&(r.ab&&r.ab.resolve(),Fc(e,r)),X(Le)}})}function B(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,f){if(typeof f=="string"){var h=f;f=c,c=h}if(Um(e.g.keySystem)&&f.byteLength==16&&(Al()||xr())){h=tn(f);var E=h.getUint32(0,!0),S=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,S,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),f=Ps(f).slice(0,32),e.aa.set(f,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(_e))}function V(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new pt(2,6,6014)),e.C.ee(Mc(n))}function ee(){var e,t,n,r,u,c,f,h;return Me(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[r,n],c=new Map,f=function(S){var k,G,ne;return Me(function(z){switch(z.g){case 1:if(ce(z,2),S==="org.w3.clearkey"&&ys())throw Error("Unsupported keySystem");return x(z,navigator.requestMediaKeySystemAccess(S,u),4);case 4:return k=z.h,ne=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,Ou()&&(ne=!1),c.set(S,{persistentState:ne}),x(z,k.createMediaKeys(),5);case 5:me(z,0);break;case 2:Ce(z),c.set(S,null),X(z)}})},h=e.map(function(S){return f(S)}),x(E,Promise.all(h),2)):E.return(Mc(c))})}function J(e){var t;return Me(function(n){if(n.g==1)return t=new Promise(function(r,u){new pr(u).X(Ze)}),ce(n,2),x(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return me(n,0);Ce(n),X(n)})}function H(e){var t;return Me(function(n){return t=Array.from(e.i.entries()),e.i.clear(),x(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return Me(function(f){if(f.g==1)return ce(f,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?x(f,J(u),5):x(f,u.remove(),5);if(f.g!=2)return me(f,0);Ce(f),X(f)})})),0)})}function re(e,t){return e.length&&t.length&&e!==t?0<fe(e,t).length:!0}function fe(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var f=m((r.initData||[]).concat(c.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),f=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:f});break}}return n}function we(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ee(e){e.i.forEach(function(t,n){var r=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),RE(e,function(t){return t.loaded})}function ve(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function ge(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Ke(e,t,n,r,u,c,f){var h=[],E={};e=m(e);for(var S=e.next();!S.done;E={la:E.la},S=e.next()){if(E.la=S.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(r.some(function(ne){return function(z){return zi(z,ne.la.serverCertificate)}}(E))||r.push(E.la.serverCertificate)),E.la.initData){S={};for(var k=m(E.la.initData),G=k.next();!G.done;S={vd:S.vd},G=k.next())S.vd=G.value,c.some(function(ne){return function(z){var ye=ne.vd;return z.keyId&&z.keyId==ye.keyId?!0:z.initDataType==ye.initDataType&&zi(z.initData,ye.initData)}}(S))||c.push(S.vd)}if(E.la.keyIds)for(S=m(E.la.keyIds),k=S.next();!k.done;k=S.next())f.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),r=h.next();!r.done;r=h.next())r=p.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function Oe(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Ze=1,$e=5,_e=.5,ke=new ra(function(){return Ti(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Ae(e,t,n){this.h=e,this.i=t,this.g=n}function Ge(e,t){return Me(function(n){return n.g==1?x(n,Z(e,t),2):n.return(le(e,t))})}function Z(e,t){return Me(function(n){if(n.g==1)return x(n,dm(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(kf))throw new pt(2,4,4032);X(n)})}function le(e,t){var n=wc(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,r.keySystem,c.video),ae(e,r.keySystem,c.audio);ue(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,Ul(e.g,u.initDataType,u.initData)}}}function ue(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,f=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var S=E.next();!S.done;S=E.next())if(S=S.value,S.keyIds.size){S=m(S.keyIds);for(var k=S.next();!k.done;k=S.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&f.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(f)},new pt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Pe(){}function be(e,t){if(t){var n=Fe[t.toLowerCase()];if(n)return n}throw new pt(2,4,4e3,e,t)}te("shaka.media.ManifestParser",Pe),Pe.unregisterParserByMime=function(e){delete Fe[e]},Pe.registerParserByMime=function(e,t){Fe[e]=t},Pe.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Pe.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var Fe={};function xe(e){function t(){r=!0}function n(S){c.push(S),yr(S)}e=Qn(e);var r=!1,u,c=[],f=[];if(new Fr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(S){u=S,c.push(S),mu(S)}).O("encv",t).O("enca",t).O("dvav",function(S){f.push({box:S,Xa:1701733238})}).O("dva1",function(S){f.push({box:S,Xa:1701733238})}).O("dvh1",function(S){f.push({box:S,Xa:1701733238})}).O("dvhe",function(S){f.push({box:S,Xa:1701733238})}).O("hev1",function(S){f.push({box:S,Xa:1701733238})}).O("hvc1",function(S){f.push({box:S,Xa:1701733238})}).O("avc1",function(S){f.push({box:S,Xa:1701733238})}).O("avc3",function(S){f.push({box:S,Xa:1701733238})}).O("ac-3",function(S){f.push({box:S,Xa:1701733217})}).O("ec-3",function(S){f.push({box:S,Xa:1701733217})}).O("ac-4",function(S){f.push({box:S,Xa:1701733217})}).O("mp4a",function(S){f.push({box:S,Xa:1701733217})}).parse(e),r)return e;if(f.length==0||!u)throw Ps(e),new pt(2,3,3019);f.reverse();for(var h=m(f),E=h.next();!E.done;E=h.next())E=E.value,e=pe(e,u,E.box,c,E.Xa);return e}function pe(e,t,n,r,u){var c=Xe.value(),f=e.subarray(n.start,n.start+n.size),h=tn(f),E=new Uint8Array(n.size+c.byteLength);for(E.set(f,0),f=tn(E),f.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),f.setUint32(n.size+16,u),Ne(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=gs()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,Ne(u,r.start,r.size+E.byteLength);return E=tn(u,t.start),t=kl(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function Ne(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Xe=new ra(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function dt(e,t,n,r,u,c,f){this.$=e,this.Aa=t,this.ja=n,this.ff=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}dt.prototype.ac=function(){return this.Aa},dt.prototype.Yb=function(){return this.ja},dt.prototype.ed=function(){return this.g};function ut(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}te("shaka.media.InitSegmentReference",dt),dt.prototype.getEndByte=dt.prototype.Yb,dt.prototype.getStartByte=dt.prototype.ac;function et(e,t,n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le){for(S=S===void 0?[]:S,z=z===void 0?jt:z,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=r,this.ja=u,this.ca=c,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=S,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=ne===void 0?null:ne,this.status=z,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ye===void 0?null:ye,this.s=null,this.j=0,this.o=Le===void 0?!1:Le,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=et.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=qt},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?de("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function ht(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())ht(n.value,t)}te("shaka.media.SegmentReference",et),et.prototype.getSegmentData=et.prototype.ed,et.prototype.setSegmentData=et.prototype.yi,et.prototype.syncAgainst=et.prototype.Ff,et.prototype.offset=et.prototype.offset,et.prototype.getThumbnailSprite=et.prototype.Bh,et.prototype.setThumbnailSprite=et.prototype.Eg,et.prototype.hasByterangeOptimization=et.prototype.Jh,et.prototype.markAsByterangeOptimization=et.prototype.lg,et.prototype.isLastPartial=et.prototype.Nh,et.prototype.markAsLastPartial=et.prototype.mg,et.prototype.isPartial=et.prototype.Oh,et.prototype.markAsPartial=et.prototype.ng,et.prototype.isIndependent=et.prototype.Mh,et.prototype.markAsNonIndependent=et.prototype.Zd,et.prototype.isPreload=et.prototype.Ph,et.prototype.markAsPreload=et.prototype.ef,et.prototype.markAsUnavailable=et.prototype.Vh,et.prototype.getStatus=et.prototype.bc,et.prototype.getTileDuration=et.prototype.Ch,et.prototype.getTilesLayout=et.prototype.Dh,et.prototype.getEndByte=et.prototype.Yb,et.prototype.getStartByte=et.prototype.ac,et.prototype.getEndTime=et.prototype.mh,et.prototype.getStartTime=et.prototype.getStartTime,et.prototype.getUris=et.prototype.$;var jt=0,qt=1;et.Status={Hi:jt,xj:qt,$i:2};function Ft(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ut(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(yt(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function it(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=yt(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function yt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function $t(){}function Nt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Wt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Vr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var f=Vr(Qn(e.data,3+n,c)),h;return r==="-->"?h=Vr(Qn(e.data,4+n+c)):h=Ti(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Vr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ti(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Vr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ti(e.data),t):null}function Dn(e){for(var t=0,n=[];Nt(e,t);){var r=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Wt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function xn(e,t){for(var n=t=t===void 0?0:t,r=0;Nt(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Jt(e,t+6),en(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}te("shaka.util.Id3Utils",$t),$t.getID3Data=xn,$t.getID3Frames=Dn;function rr(e,t){var n=null,r=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(r=e.M()),{trackId:c,Wf:n,fh:r,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function At(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Xt(e,t,n){var r=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var f=0;f<r;f++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:r,vg:u,eh:c}}function Gt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:qf(e)}}function mn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function Nn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new Dr(n,0).M(),e.g=8*r,e.i-=r)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function It(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?r<<n|It(e,n):r}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Lt(e){var t=Sn(e);return It(e,t+1)-1}function On(e){return e=Lt(e),1&e?1+e>>>1:-1*(e>>>1)}function lt(e){return It(e,1)===1}function nt(e){return It(e,8)}function Kt(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=On(e),r=(n+r+256)%256),n=r===0?n:r}function Ye(e){return nt(e),Lt(e),Lt(e)}te("shaka.util.ExpGolomb",Nn);function ze(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=ze.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ai(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),f=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(f){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,f={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var S=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,ne=k;2<ne;){var z=c[G+1]+2;switch(c[G]){case 5:var ye=wh(c.subarray(G+2,G+z));f.audio==-1&&ye==="Opus"?(f.audio=S,f.audioCodec="opus"):f.video==-1&&ye==="AV01"&&(f.video=S,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=S,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=S,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=S,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(ye=null,c[G+2]===128&&(ye=c[G+3]),ye!=null&&(this.F={channelCount:ye&15?ye&15:2,Zg:ye,sampleRate:48e3}))}G+=z,ne-=z}break;case 15:f.audio==-1&&(f.audio=S,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=S,f.audioCodec="aac-loas");break;case 21:f.Sd==-1&&(f.Sd=S);break;case 27:f.video==-1&&(f.video=S,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=S,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=S,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=S,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=S,f.audioCodec="ec3")}h+=k+5}c=f,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function Dt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=sr(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var f=n||0,h=[],E=-1,S=0,k,G=0;G<u;++G){var ne=e[G];if(ne){if(2<=f&&ne==1){if(t&&!h.length&&E==-1&&(ne=G-(3<f?3:f),n&&ne!=0&&(ne=e.subarray(0,ne),t.data=li(t.data,ne),t.fullData=li(t.fullData,ne))),0<=E?(f=G-((3<f?3:f)+1),h.push({data:e.subarray(E+c,f+1),fullData:e.subarray(E,f+1),type:S,time:r})):t&&!h.length&&(E=G-f,0<E&&(E=e.subarray(0,E),t.data=li(t.data,E),t.fullData=li(t.fullData,E))),G>=u-c)return h;G++,E=G,S=this.m=="hvc"?e[G]>>1&63:e[G]&31}f=0}else f++;G>=u-1&&0<=E&&0<=f&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:S,time:r})}return k&&h.push(k),!h.length&&t&&(t.data=li(t.data,e),t.fullData=li(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=li.apply(Pi,T(n.value)),(n=Dt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=li.apply(Pi,T(n.value)),u=Dt(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=li(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,f){var h=(c.pts||0)-(f.pts||0);return(c.dts||0)-(f.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=li.apply(Pi,T(r.value)),c=Dt(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=li(r.data,u),this.g.push(r))}if(e){var f;for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.qf(r,f,void 0),r.nalus.length&&(f=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var S=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||S}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):fn(this)};function fn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(ne){return ne.type==7}),!e))return t;e=new Nn(e.data);var n=nt(e),r=nt(e),u=nt(e);if(En(e),zr.includes(n)){var c=Lt(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),lt(e)){c=c!==3?8:12;for(var f=0;f<c;f++)lt(e)&&(6>f?Kt(e,16):Kt(e,64))}}if(En(e),c=Lt(e),c===0)Lt(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Lt(e),f=0;f<c;f++)En(e);En(e),Gn(e,1),c=Lt(e),f=Lt(e);var h=It(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,S=0,k=0,G=0;return lt(e)&&(E=Lt(e),S=Lt(e),k=Lt(e),G=Lt(e)),t.height=String((2-h)*(f+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*S),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Be){return Be.type==33}),!e))return t;var n=new Nn(e.fullData,!0);nt(n),nt(n),It(n,4);var r=It(n,3);lt(n);var u=It(n,2),c=It(n,1),f=It(n,5),h=It(n,32);e=nt(n);for(var E=nt(n),S=nt(n),k=nt(n),G=nt(n),ne=nt(n),z=nt(n),ye=[],Le=[],De=0;De<r;De++)ye.push(lt(n)),Le.push(lt(n));if(0<r)for(De=r;8>De;De++)It(n,2);for(De=0;De<r;De++)ye[De]&&It(n,88),Le[De]&&nt(n);Lt(n),r=Lt(n),r==3&&It(n,1),ye=Lt(n),Le=Lt(n);var He=De=0,Se=0,Qe=0;return lt(n)&&(De+=Lt(n),He+=Lt(n),Se+=Lt(n),Qe+=Lt(n)),t.width=String(ye-(De+He)*(r===1||r===2?2:1)),t.height=String(Le-(Se+Qe)*(r===1?2:1)),n=function(Be){for(var vt=0,xt=0;32>xt;xt++)vt|=(Be>>xt&1)<<31-xt;return vt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+f),u+="."+n.toString(16).toUpperCase(),u+="."+c+z,ne&&(u+="."+ne.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),S&&(u+="."+S.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ai(e))}function Ai(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}te("shaka.util.TsParser",ze),ze.syncOffset=Ai,ze.probe=Zr,ze.prototype.getVideoInfo=ze.prototype.We,ze.prototype.getVideoResolution=ze.prototype.Gh,ze.prototype.getVideoNalus=ze.prototype.Od,ze.prototype.getCodecs=ze.prototype.bd,ze.prototype.getStartTime=ze.prototype.getStartTime,ze.prototype.getVideoData=ze.prototype.xc,ze.prototype.getAudioData=ze.prototype.Fb,ze.prototype.getMetadata=ze.prototype.getMetadata,ze.prototype.parseNalus=ze.prototype.qf,ze.prototype.parseAvcNalus=ze.prototype.ai,ze.prototype.parse=ze.prototype.parse,ze.prototype.clearData=ze.prototype.clearData,ze.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function io(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ve("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ve("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ve("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ve(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}io.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Bs(e,t,n){var r=Qu,u=Eu;switch(t.mimeType){case"video/webm":r=Ju;break;case"video/mp4":r=$a}switch(n){case"DASH":u=Po;break;case"HLS":u=js}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}te("shaka.lcevc.Dec",io),io.prototype.release=io.prototype.release;var Qu=0,Ju=1,$a=2,js=0,Po=1,Eu=-1;function _u(e,t,n,r){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=r||null,this.j={},this.o=new Tt,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=ca(this,this.L),this.C=!1,this.I=new Wu(function(){return Wf(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function ca(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Zm(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Zm(n),e.i.src=e.N,n}function Uc(e,t){var n,r,u,c,f,h,E,S,k,G,ne;return Me(function(z){if(z.g==1)return e.createSegmentIndex?x(z,e.createSegmentIndex(),2):z.u(2);if(!e.segmentIndex)return z.return(!1);if(e.segmentIndex.getNumReferences()==0)return z.return(!0);for(n=yi,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(f=c.value,h=f.mimeType||e.mimeType||"",E=f.codecs||e.codecs||"",S=h+":"+E,!r.has(S)){if(r.add(S),t==n.ma){if(k=Si(h,E),!bl(k))return z.return(!1)}else if(t==n.fa?E=Rl(E):t==n.S&&(E=Hu(E)),G=om(e,h,E),ne=Uu(h,E),!Ot(G)&&!ro(ne))return z.return(!1)}return z.return(!0)})}g=_u.prototype,g.destroy=function(){return this.I.destroy()};function Wf(e){var t,n,r,u,c,f,h,E;return Me(function(S){if(S.g==1){t=[];for(n in e.j)for(r=e.j[n],u=r[0],e.j[n]=r.slice(0,1),u&&t.push(u.p.catch(lm)),c=m(r.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new pt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return x(S,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,X(S)})}g.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:return c=yi,x(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=r,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,f=m(e.keys()),h=f.next();case 3:if(h.done){k.u(0);break}return E=h.value,S=e.get(E),x(k,el(u,E,S,S.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=f.next(),k.u(3)}})};function el(e,t,n,r){var u,c,f,h,E,S,k,G,ne,z,ye,Le;return Me(function(De){switch(De.g){case 1:return u=yi,c=Ue,f=O,x(De,Uc(n,t),2);case 2:if(f.call(c,De.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Si(n.mimeType,r),t==u.ma){Xa(e,h,e.B,n.external),De.u(0);break}if(E=e.A.forceTransmux,(!Ot(h)||!e.B&&hu.includes(h))&&(E=!0),S=Uu(n.mimeType,r),!E){De.u(4);break}if(k=bo(u.S,(r||"").split(",")),G=bo(u.fa,(r||"").split(",")),!k||!G){De.u(5);break}return e.s=!0,x(De,el(e,u.S,n,k),6);case 6:return x(De,el(e,u.fa,n,G),7);case 7:return De.return();case 5:(ne=ro(S))&&(z=ne(),e.m[t]=z,h=z.convertCodecs(t,S));case 4:ye=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Le=e.l.addSourceBuffer(ye)}catch(He){throw new pt(2,3,3015,He,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Le.mode=DB),e.o.D(Le,"error",function(){e.j[t][0].p.reject(new pt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Le,"updateend",function(){return tl(e,t)}),e.h[t]=Le,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,X(De)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Xa(e,t,n,r){e.g||(e.g=new Ls(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function Bc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Zs(e,t){return e.C||!Object.keys(e.h).length?e=null:t==vr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Pt(e,t){return e.C?null:t==vr?e.g.h:Ft(Hn(e,t))}function yn(e,t,n){return e.C?0:t==vr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:yt(this.i.buffered),audio:this.C?[]:yt(Hn(this,"audio")),video:this.C?[]:yt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,r,u,c){var f=null,h=Qn(n);if(hu.includes(u))c=Dn(h),c.length&&r&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.ta([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.ca&&r.ca.timescale){var E=r.ca.timescale;if(!isNaN(E)){var S=0,k=!1;new Fr().box("moof",yr).box("traf",yr).O("tfdt",function(G){S=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(f=S)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new ze,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length&&e.ta(h,c,r?r.endTime:null));return f}function Tr(e,t,n,r,u,c,f,h,E,S){f=f===void 0?!1:f,h=h===void 0?!1:h,E=E===void 0?!1:E,S=S===void 0?!1:S;var k,G,ne,z,ye,Le,De,He,Se,Qe,Be;return Me(function(vt){switch(vt.g){case 1:if(k=yi,t!=k.ma){vt.u(2);break}if(!e.B){vt.u(3);break}return x(vt,e.ia,4);case 4:G=vt.h,e.g.s=G;case 3:return x(vt,vE(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.$()[0]:null),5);case 5:return vt.return();case 2:if(S||!e.s){vt.u(6);break}return x(vt,Tr(e,k.S,n,r,u,c,f,h,E,!0),7);case 7:return x(vt,Tr(e,k.fa,n,r,u,c,f,h,E,!0),8);case 8:return vt.return();case 6:if(!e.h[t])return vt.return();if(ne=e.h[t].timestampOffset,z=e.G[t],e.m[t]&&(z=e.m[t].getOriginalMimeType()),r&&(ye=ur(e,t,n,r,z,ne),ye!=null&&(Le=r.startTime-ye,De=Math.abs(ne-Le),(.001<=De||f||h)&&(!E||0<Le||!ne)&&(ne=Le,e.pa&&($i(e,t,function(){return $f(e,t)}),$i(e,t,function(){return Xf(e,t,ne)}))),He=t==k.fa||!(k.fa in e.h),e.B&&He&&e.ia.resolve(ne))),c&&t==k.fa&&(e.g||Xa(e,"application/cea-608",e.B,!1),e.H||(Se=z.split(";",1)[0],e.H=new wt(Se)),r?(Qe=e.H.i(n),Qe.length&&Mf(e.g,Qe,r.startTime,r.endTime,ne)):e.H.init(n)),!e.m[t]){vt.u(9);break}return x(vt,e.m[t].transmux(n,u,r,e.l.duration,t),10);case 10:n=vt.h;case 9:return n=CB(e,n,r?r.startTime:null,t),r&&e.B&&t!=k.ma&&(f||h)&&(Be=r.startTime,$i(e,t,function(){return $f(e,t)}),$i(e,t,function(){return Xf(e,t,Be)})),x(vt,$i(e,t,function(){var xt=n;if(t=="video"&&e.T){var Vt=e.T;Vt.g&&Vt.g.appendBuffer(xt,"video",Vt.o,-ne)}e.h[t].appendBuffer(xt)}),11);case 11:X(vt)}})}function Ir(e,t){var n=Pt(e,"video")||0;Nf(e.g,t,n)}function fr(e){e.g&&Nf(e.g,"",0)}g.remove=function(e,t,n){var r=this,u;return Me(function(c){return c.g==1?(u=yi,e==u.ma?x(c,r.g.remove(t,n),0):x(c,$i(r,e,function(){return qs(r,e,t,n)}),4)):r.s?x(c,$i(r,u.S,function(){return qs(r,u.S,t,n)}),0):c.u(0)})};function ri(e,t){var n;return Me(function(r){return r.g==1?(n=yi,t==n.ma?e.g?x(r,e.g.remove(0,1/0),0):r.return():x(r,$i(e,t,function(){return qs(e,t,0,e.l.duration)}),4)):e.s?x(r,$i(e,n.S,function(){return qs(e,n.S,0,e.l.duration)}),0):r.u(0)})}g.flush=function(e){var t=this,n;return Me(function(r){return r.g==1?(n=yi,e==n.ma?r.return():x(r,$i(t,e,function(){t.i.currentTime-=.001,tl(t,e)}),2)):t.s?x(r,$i(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,tl(t,u)}),0):r.u(0)})};function Qr(e,t,n,r,u,c,f,h,E){var S,k,G;return Me(function(ne){return ne.g==1?(S=yi,t==S.ma?(c||(e.g.s=n),Rh(e.g,r,u),ne.return()):(k=[],x(ne,NB(e,t,f,h,E),2))):(G=ne.h,G||(k.push($i(e,t,function(){return $f(e,t)})),e.s&&k.push($i(e,S.S,function(){return $f(e,S.S)}))),c||(k.push($i(e,t,function(){return Xf(e,t,n)})),e.s&&k.push($i(e,S.S,function(){return Xf(e,S.S,n)}))),k.push($i(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,tl(e,t)})),e.s&&k.push($i(e,S.S,function(){var z=S.S;e.h[z].appendWindowStart=0,e.h[z].appendWindowEnd=u,e.h[z].appendWindowStart=r,tl(e,z)})),x(ne,Promise.all(k),0))})}function Gs(e,t,n){var r;return Me(function(u){return u.g==1?(r=yi,t==r.ma?u.return():(t==r.fa&&(e.ia=new Rr),$i(e,t,function(){return $f(e,t)}),e.s&&$i(e,r.S,function(){return $f(e,r.S)}),x(u,$i(e,t,function(){return Xf(e,t,n)}),2))):e.s?x(u,$i(e,r.S,function(){return Xf(e,r.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return Me(function(n){return x(n,FE(t,function(){Bc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return Me(function(n){return x(n,FE(t,function(){if(e<t.l.duration)for(var r in t.h){var u={start:function(){},p:new Rr};t.j[r].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function qs(e,t,n,r){r<=n?tl(e,t):e.h[t].remove(n,r)}function $f(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,tl(e,t)}function Xf(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,tl(e,t)}function tl(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),UE(e,t))}}function $i(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&YC(e,t),n.p}function FE(e,t){var n,r,u,c,f,h,E;return Me(function(S){switch(S.g){case 1:jr(e.I),n=[],r={};for(u in e.h)r.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(r),p:r.Mc},e.j[u].push(c),n.push(r.Mc),e.j[u].length==1&&c.start(),r={Mc:r.Mc};return ce(S,2),x(S,Promise.all(n),4);case 4:me(S,3);break;case 2:throw f=Ce(S),f;case 3:return ce(S,5,6),x(S,t(),6);case 6:Je(S);for(h in e.h)UE(e,h);Te(S,0);break;case 5:throw E=Ce(S),new pt(2,3,3015,E,e.i.error||"No error in the media element")}})}function UE(e,t){e.j[t].shift(),YC(e,t)}function YC(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new pt(2,3,3017,t)):n.p.reject(new pt(2,3,3015,r,e.i.error||"No error in the media element")),UE(e,t)}}function CB(e,t,n,r){var u=e.qa[r];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(Ga()||gs()||Yr("SOPOpenBrowser"))&&xf(e.G[r])=="mp4"&&(t=xe(t)),t}function RB(e,t,n,r){return $i(e,t,function(){t!==vr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),tl(e,t))})}function xB(e,t){var n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t;return Me(function(Zt){switch(Zt.g){case 1:n=yi,e.C=!0,e.s=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(Zt,2),e.o.ib(),f=[];for(h in e.m)f.push(e.m[h].destroy());for(E in e.j)for(S=e.j[E],k=S[0],e.j[E]=S.slice(0,1),k&&f.push(k.p.catch(lm)),G=m(S.slice(1)),ne=G.next();!ne.done;ne=G.next())z=ne.value,z.p.reject(new pt(2,7,7003,void 0));for(ye in e.h){Le=e.h[ye];try{e.l.removeSourceBuffer(Le)}catch(ln){}}return x(Zt,Promise.all(f),4);case 4:return e.m={},e.h={},De=e.l.duration,e.L=new Rr,e.l=ca(e,e.L),x(Zt,e.L,5);case 5:!isNaN(De)&&De?e.l.duration=De:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),He=new Rr,Se=e.l.sourceBuffers,Qe=t.size,Be=0,vt=function(){Be++,Be===Qe&&(He.resolve(),e.o.Kb(Se,"addsourcebuffer",vt))},e.o.D(Se,"addsourcebuffer",vt),xt=m(t.keys()),Vt=xt.next();case 6:return Vt.done?(e.i.currentTime=r,x(Zt,He,2)):(Bt=Vt.value,_t=t.get(Bt),x(Zt,el(e,Bt,_t,_t.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Bt]=[],Vt=xt.next(),Zt.u(6);break;case 2:Je(Zt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Te(Zt,0)}})}function WC(e,t){return FE(e,function(){return xB(e,t)})}function NB(e,t,n,r,u){var c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe;return Me(function(Be){return Be.g==1?(c=yi,t==c.ma||(f=Va(Do(e.G[t])),h=Aa(e.G[t]),S=!1,k=Si(n,r),G=e.A.forceTransmux,(!Ot(k)||!e.B&&hu.includes(k))&&(G=!0),G&&(ne=Uu(n,r),z=ro(ne))&&(E=z(),ye=bo(c.S,(r||"").split(",")),Le=bo(c.fa,(r||"").split(",")),ye&&Le?(S=!0,De=Le,t==c.S&&(De=ye),k=E.convertCodecs(t,Uu(n,De))):k=E.convertCodecs(t,ne)),He=Va(Do(k)),Se=Aa(k),f===He&&h===Se)?Be.return(!1):(Qe=!0,(e.s||S&&E&&!e.m[t])&&(Qe=!1),Qe&&e.A.codecSwitchingStrategy==="smooth"&&Un()?x(Be,RB(e,t,k,E),3):(E&&E.destroy(),x(Be,WC(e,u),3)))):Be.return(!0)})}function MB(e,t,n,r){if(t==vr)var u=!1;else{u=Va(Do(e.G[t]));var c=Aa(e.G[t]),f=Si(n,r),h=e.A.forceTransmux;(!Ot(f)||!e.B&&hu.includes(f))&&(h=!0),n=Uu(n,r),h&&(h=ro(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=Va(Do(f)),f=Aa(f),u=u!==t||c!==f}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var Zm=p.URL.createObjectURL,DB="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(r,u){return Math.max(r,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=r-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},te("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function $C(e,t,n){this.j=n,this.l=e,this.s=XC(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}$C.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function PB(e,t){e.i=t}function OB(e){this.g=e}function XC(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(yt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function BE(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new Tt,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return jE(c)}),this.m=new pr(function(){jE(c)}).$a(this.s.gapJumpTimerTime)}BE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},BE.prototype.mf=function(){this.o=!0,jE(this)};function jE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=XC(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=it(n,t,e.s.gapDetectionThreshold),r==null||r==0&&!e.o||(u=n.start(r),u>=e.B.pb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function Qf(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=LB.value().get(t),n.na(e,t,r))}var LB=new ra(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function QC(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Tt,this.i=new nR(e),Qf(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){eR(u,u.j())})}QC.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function ZE(e){return e.o?e.g.currentTime:e.j()}function JC(e,t){0<e.g.readyState?rR(e.i,t):Qf(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){eR(e,e.j())})}function eR(e,t){.001>Math.abs(e.g.currentTime-t)?tR(e):(e.h.na(e.g,"seeking",function(){tR(e)}),rR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function tR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function nR(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}nR.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function rR(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function iR(e){this.g=e,this.j=!1,this.h=null,this.i=new Tt}g=iR.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Qf(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function oR(e,t,n,r,u,c){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=kB(e,n,c),this.j=new BE(e,t.presentationTimeline,n,this.o,c),this.h=new QC(e,function(){e:{var h=f.j;h.j=!0,h.o=!1;var E=ZE(f.h);if(h=sR(f,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!f.s||f.s<E-1)){f.s=E,JC(f.h,h),h=void 0;break e}f.A(),h=void 0}return h},function(h){var E=f.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=r;return h==null?h=1/0>f.g.getDuration()?f.g.$b():f.g.pb():0>h&&(h=f.g.pb()+h),aR(f,uR(f,h))}),this.m=new pr(function(){if(f.i.readyState!=0&&!f.i.paused){var h=ZE(f.h),E=f.g.$b(),S=f.g.pb();3>S-E&&(E=S-3),h<E&&(h=sR(f,h),f.i.currentTime=h)}})}g=oR.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){JC(this.h,e)},g.Dd=function(){var e=ZE(this.h);return 0<this.i.readyState&&!this.i.paused?uR(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function aR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function sR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),f=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(r);return n=e.g.dd(n+r),t>=f?aR(e,t):t>c?c:t<u?Ut(e.i.buffered,E)?E:n:t>=h||Ut(e.i.buffered,t)?t:n}function uR(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function kB(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new $C(new OB(e),t.stallThreshold,n),PB(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new et(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;r--;var u=this.get(r+1),c=-1;if(u&&0<u.g.length)for(var f=u.g.length-1;0<=f;--f){var h=u.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=u.g[f];if(!h.l)return de("No independent partial segment found!"),null}r++,c=f-1;break}}return new ba(this,r,c,n)};function GE(e,t,n){return e=new et(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}te("shaka.media.SegmentIndex",wr),wr.forSingleSegment=GE,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function ba(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}ba.prototype.ie=function(e){this.reverse=e},ba.prototype.dh=function(){return this.h},ba.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},ba.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},te("shaka.media.SegmentIterator",ba),ba.prototype.next=ba.prototype.next,ba.prototype.current=ba.prototype.current,ba.prototype.currentPosition=ba.prototype.dh,ba.prototype.setReverse=ba.prototype.ie;function Ei(){wr.call(this,[]),this.h=[]}Y(Ei,wr),g=Ei.prototype,g.clone=function(){var e=new Ei;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},te("shaka.media.MetaSegmentIndex",Ei),Ei.prototype.updateEvery=Ei.prototype.ke,Ei.prototype.fit=Ei.prototype.sc,Ei.prototype.mergeAndEvict=Ei.prototype.kd,Ei.prototype.evict=Ei.prototype.La,Ei.prototype.merge=Ei.prototype.ae,Ei.prototype.offset=Ei.prototype.offset,Ei.prototype.get=Ei.prototype.get,Ei.prototype.find=Ei.prototype.find,Ei.prototype.forEachTopLevelReference=Ei.prototype.tc,Ei.prototype.release=Ei.prototype.release;function tp(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}tp.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},tp.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},tp.prototype.Xb=function(){return this.g.Xb()};function lR(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){cR(t,!1)}).$a(.25)}lR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function cR(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function FB(){this.g=null,this.h=[]}function qE(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function UB(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function BB(){this.i=this.h=null,this.g=[]}function HE(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Gm(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new FB,this.h=new BB}function KE(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function jB(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function np(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var r=t.next().value;if(n&&(r=t.next().value),r){for(;e.g.size<e.m&&r!=null&&(n=!0,r.preload&&r.ja!=null&&(n=!1),r.bc()==2&&(n=!1),n&&r.ca&&fR(e,r.ca),n&&!e.g.has(r)&&(n=new zE(e.j),pR(n,r,e.h),e.g.set(r,n)),e.l=r.startTime,!(e.h.fastSwitching&&r.md&&r.Wd));)r=t.next().value;VE(e)}}}function fR(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(r){return ut(r,t)})){var n=new zE(e.j);pR(n,t,e.h),e.i.set(t,n)}}function dR(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&rp(e,n)}function nl(e){dR(e,e.g),dR(e,e.i),e.l=0}KE.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&rp(this,r);t&&VE(this)};function VE(e){for(var t=Array.from(e.g.keys()),n={},r=m(e.i.keys()),u=r.next();!u.done;n={wd:n.wd},u=r.next())n.wd=u.value,t.some(function(c){return function(f){return ut(f.ca,c.wd)}}(n))||rp(e,n.wd)}function hR(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&rp(e,r)}VE(e)}function ZB(e,t){t&&t!==e.h&&(nl(e),e.h=t)}function rp(e,t){var n=e.g;t instanceof dt&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function zE(e){this.g=e,this.fe=this.Ef=null}function pR(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(u){return Me(function(c){if(c.g==1)return 0<r.byteLength?r=li(r,u):r=u,e.Ef?x(c,e.Ef(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}zE.prototype.abort=function(){this.fe&&this.fe.abort()};function YE(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}Y(YE,Sr),YE.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function qm(e){Sr.call(this),this.g=new Map,this.h=e}Y(qm,Sr),qm.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function GB(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function qB(e,t,n){var r=GB(e,t.contentType);HB(e,r),e={ff:t,position:n},r=r.nd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}qm.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.nd,u=r.length-1;0<=u;u--){var c=r[u];if(c.position<=e){r=c.ff;break e}}r=null}if((u=r)&&(u=n.Uf,u=!(u===r||u&&r&&u.bandwidth==r.bandwidth&&u.audioSamplingRate==r.audioSamplingRate&&u.codecs==r.codecs&&u.contentType==r.contentType&&u.frameRate==r.frameRate&&u.height==r.height&&u.mimeType==r.mimeType&&u.channelsCount==r.channelsCount&&u.pixelAspectRatio==r.pixelAspectRatio&&u.width==r.width)),u)e:{if(u=e,c=r.contentType,(c=this.h()[c])&&0<c.length){var f=c[c.length-1].end;if(u>=c[0].start&&u<f){u=!0;break e}}u=!1}u&&(n.Uf=r,JSON.stringify(r),n=new Wn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function HB(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,f){return!(c.position<=n&&f+1<u.length&&u[f+1].position<=n||c.position>=r)})}else t.nd=[]}function ip(e,t,n,r,u){return e=Oi(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function gR(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new Wu(function(){return KB(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=gR.prototype,g.destroy=function(){return this.l.destroy()};function KB(e){var t,n,r,u,c,f,h;return Me(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,op(u),t.push(ap(u));for(c=m(e.o.values()),f=c.next();!f.done;f=c.next())h=f.value,nl(h);return x(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,X(E)})}g.configure=function(e){if(this.h=e,this.I=new jh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(nl(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,nl(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(vr))&&t.W&&(nl(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(nl(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(hR(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=WE(this,n.stream));e.disableAudioPrefetch||$B(this)},g.start=function(e){var t=this;return Me(function(n){if(n.g==1)return x(n,WB(t,e||new Map),2);jr(t.l),t.C=!0,X(n)})};function VB(e,t){var n,r,u,c,f,h;Me(function(E){switch(E.g){case 1:return n=yi,e.H++,r=e.H,ce(E,2),x(E,ri(e.g.V,n.ma),4);case 4:me(E,3);break;case 2:u=Ce(E),e.g&&e.g.onError(u);case 3:c=Si(t.mimeType,t.codecs),Xa(e.g.V,c,e.m.sequenceMode,t.external),f=e.g.V.F,(f.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(h=yR(e,t),e.i.set(n.ma,h),_s(e,h,0)),X(E)}})}function zB(e){var t=e.i.get(vr);t&&(op(t),ap(t).catch(function(){}),e.i.delete(vr)),e.s=null}function mR(e,t){var n=0>e.g.eb(),r=e.i.get("video");r&&r.Z&&r.Z.ie(n),(r=e.i.get("audio"))&&r.Z&&r.Z.ie(n),(r=e.i.get(vr))&&r.Z&&r.Z.ie(n),(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.jc&&(Jf(e,t,!1,0,!1),n.jc=r):(t=n.jc)&&(n.jc=null,Jf(e,t,!0,0,!1)))}function vR(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&Jf(e,t.video,n,r,u,c),t.audio&&Jf(e,t.audio,n,r,u,c))}function Hm(e,t){Me(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):x(n,t.createSegmentIndex(),2):n.return();Jf(e,t,!0,0,!1),X(n)})}function Jf(e,t,n,r,u,c){var f=e.i.get(t.type);f||t.type!=vr?f&&(f.jc&&(t.trickModeVideo?(f.jc=t,t=t.trickModeVideo):f.jc=null),f.stream!=t||u)&&(e.o.has(t)?f.W=e.o.get(t):f.W&&ZB(f.W,t),t.type==vr&&(u=Si(t.mimeType,t.codecs),Xa(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(f.stream)||f.stream.closeSegmentIndex&&f.stream.closeSegmentIndex(),f.stream=t,f.Z=null,f.Of=!!c,n&&(f.Xc?f.le=!0:f.Qa?(f.Lb=!0,f.Id=r,f.le=!0):(op(f),JE(e,f,!0,r).catch(function(h){e.g&&e.g.onError(h)}))),YB(e,f).catch(function(h){e.g&&e.g.onError(h)})):VB(e,t)}function YB(e,t){var n,r;return Me(function(u){if(u.g==1)return t.Ya?(n=t.stream,r=t.Ya,n.segmentIndex?u.u(2):x(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=r||t.stream!=n)return u.return();var c=e.g.Ld(),f=Pt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(f||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),X(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:r==vr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,r),u=Ut(u,e)),u||((Pt(this.g.V,r)!=null||n.Qa)&&Km(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),r===vr&&(r=this.g.V,r.H&&r.H.h()),n.od=!0)}};function Km(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Zs(e.g.V,t.type)==null?t.ub==null&&_s(e,t,0):(op(t),JE(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function WB(e,t){var n,r,u,c,f,h,E,S,k,G;return Me(function(ne){if(ne.g==1){if(n=yi,!e.j)throw new pt(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.ma,e.s),u.add(e.s)),c=e.g.V,x(ne,c.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),f=m(r.keys()),h=f.next();!h.done;h=f.next())E=h.value,S=r.get(E),e.i.has(E)||(k=yR(e,S),t.has(S.id)&&(G=t.get(S.id),jB(G,function(z,ye,Le){return Vm(z,ye,Le||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),_s(e,k,0));X(ne)})}function yR(e,t){return{stream:t,type:t.type,Z:null,W:WE(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function WE(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===vr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===vr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new KE(e.h.segmentPrefetchLimit,t,function(r,u,c){return Vm(r,u,c||null,e.h.retryParameters,e.g.zb)}):null}function $B(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r={},u=m(e.m.variants),c=u.next();!c.done;r={Fa:r.Fa},c=u.next())if(r.Fa=c.value,r.Fa.audio)if(e.o.has(r.Fa.audio)){if(c=e.o.get(r.Fa.audio),hR(c,t),!(0<t&&n.some(function(h){return function(E){return ju(h.Fa.audio.language,E)}}(r)))){var f=e.i.get(r.Fa.audio.type);c!==(f&&f.W)&&nl(c),e.o.delete(r.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return ju(h.Fa.audio.language,E)}}(r))||!(c=WE(e,r.Fa.audio))||(r.Fa.audio.segmentIndex||r.Fa.audio.createSegmentIndex(),e.o.set(r.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function XB(e,t){var n,r,u,c,f;return Me(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return x(h,JE(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,x(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||_s(e,t,0),h.return();case 4:ce(h,6),r=QB(e,t),r!=null&&(_s(e,t,r),t.gd=!1),me(h,7);break;case 6:return u=Ce(h),x(h,ER(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return x(h,e.g.V.endOfStream(),10);case 10:jr(e.l),f=e.g.V.getDuration(),f!=0&&f<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(f),X(h)}})}function QB(e,t){if(XE(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==vr&&fr(e.g.V),!e.g.V.ea&&t.type!=vr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.La(n,!0),np(u,n);r=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),f=e.m.presentationTimeline.getDuration()-r,h=Pt(e.g.V,t.type);if(1e-6>f&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(vr))&&XE(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=JB(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,f=Array.from(e.i.values()),f=m(f),h=f.next();!h.done;h=f.next())h=h.value,XE(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return r>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),np(t.W,u.startTime)),e8(e,t,n,u).catch(function(){}),null)}function JB(e,t,n,r){if(t.Z)return t.Z.current();if(t.Oa||r)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:r,!1,0>e.g.eb()),t.Z&&t.Z.next().value;r=e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.eb();var c=null;return r&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function e8(e,t,n,r){var u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe;return Me(function(Be){switch(Be.g){case 1:if(u=yi,c=t.stream,f=t.Z,t.Qa=!0,ce(Be,2),r.bc()==2)throw new pt(1,1,1011);return x(Be,i8(e,t,r),4);case 4:return jr(e.l),e.A?Be.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||r.m)?(G=new Uint8Array(0),z=ne=!1,Le=function(vt){var xt,Vt,Bt;return Me(function(_t){switch(_t.g){case 1:if(ne||(z=!0,jr(e.l),e.A))return _t.return();if(ce(_t,2),G=n8(G,vt),xt=!1,Vt=0,new Fr().box("mdat",function(Zt){Vt=Zt.size+Zt.start,xt=!0}).parse(G,!1,!0),!xt){_t.u(4);break}return Bt=G.subarray(0,Vt),G=G.subarray(Vt),x(_t,$E(e,t,n,c,r,Bt,!0),5);case 5:t.W&&t.Z&&np(t.W,r.startTime,!0);case 4:me(_t,0);break;case 2:ye=Ce(_t),X(_t)}})},x(Be,QE(e,t,r,Le),9)):(S=QE(e,t,r),x(Be,S,7)));case 7:return k=Be.h,jr(e.l),e.A?Be.return():(jr(e.l),t.Lb?(t.Qa=!1,_s(e,t,0),Be.return()):x(Be,$E(e,t,n,c,r,k),6));case 9:if(De=Be.h,ye)throw ye;if(z){Be.u(10);break}return ne=!0,jr(e.l),e.A?Be.return():t.Lb?(t.Qa=!1,_s(e,t,0),Be.return()):x(Be,$E(e,t,n,c,r,De),10);case 10:t.W&&t.Z&&np(t.W,r.startTime,!0);case 6:if(jr(e.l),e.A)return Be.return();t.Oa=r,f.next(),t.Qa=!1,t.uf=!1,He=e.g.V.ob(),Se=He[t.type],JSON.stringify(Se),t.Lb||e.g.mf(r,t.stream),_s(e,t,0),me(Be,0);break;case 2:if(Qe=Ce(Be),jr(e.l,Qe),e.A)return Be.return();if(t.Qa=!1,Qe.code==7001)t.Qa=!1,op(t),_s(e,t,0),Be.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Be.u(0);else if(Qe.code==3017)r8(e,t,Qe),Be.u(0);else return t.gd=!0,Qe.category==1&&t.W&&rp(t.W,r),Qe.severity=2,x(Be,ER(e,t,Qe),0)}})}function t8(e,t,n){var r,u,c,f,h;return Me(function(E){if(E.g==1)return r=t,r.cryptoKey?E.u(2):x(E,r.fetchKey(),3);if(u=r.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,f=u.byteLength-1;0<=f;f--)u[f]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function n8(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function r8(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}_s(e,t,4)}function i8(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z,ye,Le;return Me(function(De){switch(De.g){case 1:if(r=yi,u=[],c=Math.max(0,n.appendWindowStart-.1),f=n.appendWindowEnd+.01,h=Va(t.stream.codecs),E=Aa(t.stream.mimeType),S=n.timestampOffset,S==t.cf&&c==t.af&&f==t.$e&&h==t.bf&&E==t.kg){De.u(2);break}if(k=t.bf&&t.kg&&MB(e.g.V,t.type,E,h),!k){De.u(3);break}if(G=null,t.type===r.fa?G=e.i.get(r.S):t.type===r.S&&(G=e.i.get(r.fa)),!G){De.u(3);break}return x(De,ap(G).catch(function(){}),5);case 5:G.ec=null,Km(e,G);case 3:return ne=function(){var He,Se,Qe;return Me(function(Be){if(Be.g==1)return He=new Map,e.j.audio&&He.set(r.S,e.j.audio),e.j.video&&He.set(r.fa,e.j.video),ce(Be,2),t.af=c,t.$e=f,t.bf=h,t.kg=E,t.cf=S,Se=e.m.sequenceMode||e.m.type=="HLS",x(Be,Qr(e.g.V,t.type,S,c,f,Se,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,He),4);if(Be.g!=2)return me(Be,0);throw Qe=Ce(Be),t.af=null,t.$e=null,t.bf=null,t.cf=null,Qe})},x(De,ne(),2);case 2:return ut(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(z=QE(e,t,n.ca),ye=function(){var He,Se,Qe,Be,vt,xt,Vt;return Me(function(Bt){switch(Bt.g){case 1:return ce(Bt,2),x(Bt,z,4);case 4:return He=Bt.h,jr(e.l),Se=null,Qe=new Map,Be={projection:null,hfov:null},vt=new Fr,vt.box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(_t){Se=At(_t.reader,_t.version).timescale}).box("hdlr",function(_t){switch(_t=_t.reader,_t.skip(8),_t.hc()){case"soun":Qe.set(r.S,Se);break;case"vide":Qe.set(r.fa,Se)}Se=null}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("encv",wi).box("avc1",wi).box("avc3",wi).box("hev1",wi).box("hvc1",wi).box("dvav",wi).box("dva1",wi).box("dvh1",wi).box("dvhe",wi).box("vexu",yr).box("proj",yr).O("prji",function(_t){_t=_t.reader.hc(),Be.projection=_t}).box("hfov",function(_t){_t=_t.reader.M()/1e3,Be.hfov=_t}).parse(He),s8(e,Be),Qe.has(t.type)?n.ca.timescale=Qe.get(t.type):Se!=null&&(n.ca.timescale=Se),xt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,x(Bt,e.g.Qf(t.type,He),5);case 5:return x(Bt,Tr(e.g.V,t.type,He,null,t.stream,xt),6);case 6:me(Bt,0);break;case 2:throw Vt=Ce(Bt),t.ec=null,Vt}})},e.g.Yh(n.startTime,n.ca),u.push(ye()))),e.m.sequenceMode&&(Le=t.Oa?t.Oa.j:null,n.j!=Le&&u.push(Gs(e.g.V,t.type,n.startTime))),x(De,Promise.all(u),0)}})}function $E(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h,E,S,k,G,ne;return Me(function(z){switch(z.g){case 1:return h=r.closedCaptions&&0<r.closedCaptions.size,S=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(S||k)&&(E=new Fr),S&&E.O("emsg",function(ye){var Le=r.emsgSchemeIdUris;if(ye.version===0)var De=ye.reader.hc(),He=ye.reader.hc(),Se=ye.reader.M(),Qe=ye.reader.M(),Be=ye.reader.M(),vt=ye.reader.M(),xt=u.startTime+Qe/Se;else Se=ye.reader.M(),xt=ye.reader.Cc()/Se+u.timestampOffset,Qe=xt-u.startTime,Be=ye.reader.M(),vt=ye.reader.M(),De=ye.reader.hc(),He=ye.reader.hc();ye=ye.reader.sb(ye.reader.getLength()-ye.reader.wa()),(Le&&Le.includes(De)||e.h.dispatchAllEmsgBoxes)&&(De=="urn:mpeg:dash:event:2012"?e.g.Zh():(Le=new Map().set("detail",{startTime:xt,endTime:xt+Be/Se,schemeIdUri:De,value:He,timescale:Se,presentationTimeDelta:Qe,eventDuration:Be,id:vt,messageData:ye}),Le=new Wn("emsg",Le),Le.cancelable=!0,e.g.onEvent(Le),Le.defaultPrevented||De!="https://aomedia.org/emsg/ID3"&&De!="https://developer.apple.com/streaming/emsg-id3"||(De=Dn(ye),De.length&&u&&e.g.$h([{cueTime:u.startTime,data:ye,frames:De,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ye){if(!e.F&&u.ca.timescale){var Le=ye.reader,De=ye.version;Le.M(),ye=Le.M();var He=Le.M();ye=1e3*ye+He/Math.pow(2,32)*1e3,De===0?Le=Le.M():(De=Le.M(),Le=Le.M(),Le=De*Math.pow(2,32)+Le),ye=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ye).getTime(),Le=new Map().set("detail",{wallClockTime:ye,programStartDate:new Date(ye-Le/u.ca.timescale*1e3)}),Le=new Wn("prft",Le),e.g.onEvent(Le),e.F=!0}}),(S||k)&&E.parse(c),x(z,o8(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,ne=t.Of,t.Of=!1,x(z,e.g.Qf(t.type,c),3);case 3:return x(z,Tr(e.g.V,t.type,c,u,r,h,G,ne,f),4);case 4:jr(e.l),X(z)}})}function o8(e,t,n){var r,u,c,f;return Me(function(h){if(h.g==1)return r=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Zs(e.g.V,t.type),u==null?h.return():(c=n-u,f=c-r,f<=e.h.evictionGoal?h.return():x(h,e.g.V.remove(t.type,u,u+f),2));jr(e.l),X(h)})}function XE(e){return e&&e.type==vr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function QE(e,t,n,r){var u,c,f,h,E;return Me(function(S){switch(S.g){case 1:if(u=n.ed())return S.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof dt&&(G=k.i),G.has(n)?(k=G.get(n),r&&(k.Ef=r),c=k.fe):c=null}return c||(c=Vm(n,t.stream,r||null,e.h.retryParameters,e.g.zb)),f=0,t.Z&&(f=t.Z.h),t.Ya=c,x(S,c.promise,2);case 2:if(h=S.h,t.Ya=null,E=h.data,!n.aesKey){S.u(3);break}return x(S,t8(E,n.aesKey,f),4);case 4:E=S.h;case 3:return S.return(E)}})}function Vm(e,t,n,r,u){var c=e instanceof et?e:void 0,f=c?1:0;return e=ip(e.$(),e.Aa,e.ja,r,n),e.contentType=t.type,u.request(Ya,e,{type:f,stream:t,segment:c})}function JE(e,t,n,r){var u,c;return Me(function(f){if(f.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&nl(t.W),r?(u=e.g.Ld(),c=e.g.V.getDuration(),x(f,e.g.V.remove(t.type,u+r,c),3)):x(f,ri(e.g.V,t.type),4);if(f.g!=3)return jr(e.l),n?x(f,e.g.V.flush(t.type),3):f.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||_s(e,t,0),X(f)})}function _s(e,t,n){var r=t.type;(r!=vr||e.i.has(r))&&(t.ub=new Ds(function(){var u;return Me(function(c){if(c.g==1)return ce(c,2),x(c,XB(e,t),4);if(c.g!=2)return me(c,0);u=Ce(c),e.g&&e.g.onError(u),X(c)})}).X(n))}function op(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function ap(e){return Me(function(t){return e.Ya?x(t,e.Ya.abort(),0):t.u(0)})}function ER(e,t,n){var r;return Me(function(u){if(u.g==1)return x(u,Zh(e.I),2);jr(e.l),r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<r&&(n.handled=e.g.Jd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function a8(e){var t,n,r,u,c,f;return Me(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,r=yi,(u=e.i.get(r.S))&&(u.ec=null,Km(e,u),ap(u).catch(function(){})),(c=e.i.get(r.fa))&&(c.ec=null,Km(e,c),ap(c).catch(function(){})),f=new Map,e.j.audio&&f.set(r.S,e.j.audio),e.j.video&&f.set(r.fa,e.j.video),x(h,WC(e.g.V,f),2))):h.return(!0)})}function s8(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function e_(){}function t_(e,t,n,r,u){var c=u in r,f=!0,h;for(h in t){var E=u+"."+h,S=c?r[u]:n[h];c||h in n?t[h]===void 0?S===void 0||c?delete e[h]:e[h]=za(S):S.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=za(S)),E=t_(e[h],t[h],S,r,E),f=f&&E):typeof t[h]!=typeof S||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=S.constructor?(de("Invalid config, wrong type for "+E),f=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&Ve("Unexpected number of arguments for "+E),e[h]=t[h]):(de("Invalid config, unrecognized key "+E),f=!1)}return f}function zm(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function ed(e,t){return e&&t}te("shaka.util.ConfigUtils",e_),e_.convertToConfigObject=zm,e_.mergeConfigObjects=t_;function Qa(){}function _R(e){return e=Ha(e),new si(e).wb}function sp(e,t,n){function r(h){tn(c).setUint32(f,h.byteLength,!0),f+=4,c.set(Qn(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new pt(2,6,6015);var u;typeof t=="string"?u=Cf(t,!0):u=t,e=Ha(e),e=Cf(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),f=0;return r(e),r(u),r(n),c}function TR(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ha(e).split("skd://").pop(),sp(e,n,t))}function n_(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}te("shaka.util.FairPlayUtils",Qa),Qa.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Vr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Ti(qo(n)))}},Qa.expressplayFairPlayRequest=function(e,t){n_(e,t)},Qa.conaxFairPlayRequest=function(e,t){n_(e,t)},Qa.ezdrmFairPlayRequest=function(e,t){n_(e,t)},Qa.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=fu(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ka("spc="+e))},Qa.expressplayInitDataTransform=function(e,t,n){return TR(e,t,n)},Qa.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Ha(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var r=new ArrayBuffer(2*n.length);r=Pu(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return sp(e,r,t)},Qa.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ha(e).split(";").pop(),sp(e,n,t))},Qa.verimatrixInitDataTransform=function(e,t,n){return TR(e,t,n)},Qa.initDataTransform=sp,Qa.defaultGetContentId=_R,Qa.isFairPlaySupported=function(){var e;return Me(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),x(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Ce(t),t.return(!1))})};function r_(){}function td(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:sa(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,S,k){return p.shakaMediaKeysPolyfill&&S=="skd"&&(S=k.serverCertificate,k=_R(E),E=sp(E,k,S)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:gs(),minHdcpVersion:"",ignoreDuplicateInitData:!Lu()};(gs()||xr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Lu()||Ou()||Yr("Tizen 4")||ia()&&cu()===38||ia()&&cu()===53||ia()&&cu()===68||oa()&&(!oa()||!Yr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&Al()||(n="smooth",r=!0),r={retryParameters:sa(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Ym,manifestPreprocessorTXml:Wm,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ou()||Lu()||ia()&&cu()===38||xr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Ym,manifestPreprocessorTXml:Wm,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:sa(),failureCallback:function(E){return ed([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(ia()||Ga()||oa()||vs())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return Me(function(S){return S.return(E)})},downloadSizeCallback:function(E){var S;return Me(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?x(k,navigator.storage.estimate(),3):k.return(!0):(S=k.h,k.return(S.usage+E<.95*S.quota))})},progressCallback:function(E,S){return ed([E,S])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return ed([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,S){return ed([E,S])}};var f=!1;(ia()||Ga()||oa()||vs()||yc()||xr()||gs())&&(f=!0);var h={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:f}};return c.trackSelectionCallback=function(E){return Me(function(S){return S.return(u8(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function jc(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return t_(e,t,n||td(),r,"")}function u8(e,t,n){var r=n;r=="AUTO"&&(r=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=Cl(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Cr(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,E){return E.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=vr&&n.type!="image"||t.push(n);return t}function Ym(e){return ed([e],e)}function Wm(e){return ed([e],e)}te("shaka.util.PlayerConfiguration",r_),r_.mergeConfigObjects=jc,r_.createDefault=td;function rl(e,t,n,r,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=r,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new Gm,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}Y(rl,Sr);function $m(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function l8(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function SR(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=rl.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function c8(e){return e.da=!0,e.i}function f8(e){return e.sa=!0,e.j}function d8(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function h8(e){return e.ea=!0,e.l}function p8(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return Me(function(n){switch(n.g){case 1:return x(n,Promise.resolve(),2);case 2:return ce(n,3),x(n,g8(e),5);case 5:return e.o?n.return():(e.qa.resolve(),x(n,m8(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Dl(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),fm(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var r=e.g.abrFactory;e.s=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Rb){r=e.h.presentationTimeline.R();var u=Ff(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&wR(e,u.video,r),u.audio&&wR(e,u.audio,r))}return x(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),me(n,0);break;case 3:throw t=Ce(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function i_(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function g8(e){var t,n,r,u,c;return Me(function(f){if(f.g==1)return i_(e,"manifest-parser"),e.j||(e.B=be(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,i_(e,"manifest"),e.h?f.u(2):(n=e,x(f,e.j.start(e.K,e.Ub),3));if(f.g!=2&&(n.h=f.h),r=new Wn("manifestparsed",void 0),e.dispatchEvent(r),e.h.variants.length==0)throw new pt(2,4,4036);v8(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,X(f)})}function m8(e){var t,n,r,u,c;return Me(function(f){switch(f.g){case 1:i_(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=wc(e.h.variants,h.h.restrictions,h.i),!t){f.u(2);break}return n=new Wn("trackschanged",void 0),x(f,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return r=Ff(e.h.variants),x(f,Om(e.l,r,e.h.offlineSessionIds),4);case 4:return x(f,Ge(e.A,e.h),5);case 5:if(u=f.h,!u){f.u(0);break}return c=new Wn("trackschanged",void 0),x(f,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(f)}})}g.configure=function(e,t){e=zm(e,t),jc(this.g,e)},g.getConfiguration=function(){return za(this.g)};function wR(e,t,n){var r,u,c,f,h;Me(function(E){if(E.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new KE(r,t,function(S,k,G){return Vm(S,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),x(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(f=t.segmentIndex.xb(c))?f.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&fR(u,h.ca):np(u,h.startTime)),X(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,r;return Me(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return x(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return x(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return x(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())r=n.value,nl(r);X(u)}})};function v8(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}te("shaka.media.PreloadManager",rl),rl.prototype.destroy=rl.prototype.destroy,rl.prototype.waitForFinish=rl.prototype.Fi;function Xm(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:nd,cc:function(r,u){return Zc(n,"enter",r,u)}},{oc:up,nc:nd,cc:function(r,u){return Zc(n,"enter",r,u)}},{oc:lp,nc:nd,cc:function(r,u){return Zc(n,"enter",r,u)}},{oc:nd,nc:up,cc:function(r,u){return Zc(n,"exit",r,u)}},{oc:nd,nc:lp,cc:function(r,u){return Zc(n,"exit",r,u)}},{oc:up,nc:lp,cc:function(r,u){return Zc(n,"skip",r,u)}},{oc:lp,nc:up,cc:function(r,u){return Zc(n,"skip",r,u)}}],this.h=new Tt,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Y(Xm,Sr),Xm.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},Xm.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?up:e>r.endTime?lp:nd;this.g.set(r,c);for(var f=m(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(r,t)}}};function Zc(e,t,n,r){t=new Wn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var up=1,nd=2,lp=3;function o_(e,t,n){var r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:var G=new si(e).Pa.split("/").pop().split(".");return r=G.length==1?"":G.pop().toLowerCase(),(u=y8[r])?k.return(u):(c=0,f=Oi([e],n),ce(k,2),f.method="HEAD",x(k,t.request(c,f).promise,4));case 4:h=k.h,u=h.headers["content-type"],me(k,3);break;case 2:if(E=Ce(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return f.method="GET",x(k,t.request(c,f).promise,6);case 6:S=k.h,u=S.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var y8={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function AR(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(f){return AR(f,e)}).join("");var n=[],r=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=IR(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=IR(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(f,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+f+"</"+h+">"},e.payload)}function IR(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function a_(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(a_(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=AR(r,t),n.push(u)}return n}function fa(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=fa.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(bR(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=a_(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=m(t);for(var u=t.next();!u.done;r={qc:r.qc},u=t.next())r.qc=u.value,e.some(function(c){return function(f){return f.startTime==c.qc.startTime&&f.endTime==c.qc.endTime&&f.text==c.qc.payload}}(r))||(u=E8(r.qc))&&n.push(u);for(e=n.slice().sort(function(c,f){return c.startTime!=f.startTime?c.startTime-f.startTime:c.endTime!=f.endTime?c.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(c):n.indexOf(c)-n.indexOf(f)}),e=m(e),r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},g.destroy=function(){return this.g&&(bR(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function E8(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function bR(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}te("shaka.text.SimpleTextDisplayer",fa),fa.prototype.setTextVisibility=fa.prototype.setTextVisibility,fa.prototype.isTextVisible=fa.prototype.isTextVisible,fa.prototype.destroy=fa.prototype.destroy,fa.prototype.append=fa.prototype.append,fa.prototype.remove=fa.prototype.remove,fa.prototype.configure=fa.prototype.configure;function da(){}g=da.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},te("shaka.text.StubTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function CR(){}function cp(e){for(;e.firstChild;)e.removeChild(e.firstChild)}te("shaka.util.Dom",CR),CR.removeAllChildren=cp;function ha(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){r.A.paused||rd(r)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Tt,this.j.D(document,"fullscreenchange",function(){rd(r,!0)}),this.j.D(this.A,"seeking",function(){rd(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){rd(r,!0)}),this.o.observe(this.g)),this.B=new Map}g=ha.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var r=e.next();!r.done;n={ud:n.ud},r=e.next())n.ud=r.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);rd(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),rd(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function _8(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function RR(e,t,n,r,u){var c=!1,f=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var S=e.i.get(E),k=E.startTime<=r&&E.endTime>r,G=S?S.Mg:null;S&&(f.push(S.Ce),S.ic&&f.push(S.ic),k||(c=!0,e.i.delete(E),S=null)),k&&(h.push(E),S?_8(e,G)||(c=!0):(T8(e,E,u),S=e.i.get(E),G=S.Mg,c=!0)),0<E.nestedCues.length&&G&&RR(e,E.nestedCues,G,r,u),u.pop()}if(c){for(r=m(f),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(ne,z){return ne.startTime!=z.startTime?ne.startTime-z.startTime:ne.endTime-z.endTime}),h=m(h),E=h.next();!E.done;E=h.next())r=e.i.get(E.value),r.ic?(r.ic.contains(n)&&r.ic.removeChild(n),n.appendChild(r.ic),r.ic.appendChild(r.Ce)):n.appendChild(r.Ce)}}function rd(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())cp(r.value);cp(e.g),e.i.clear(),e.B.clear()}e.m&&RR(e,e.h,e.g,n,[])}}function T8(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&w8(e,c,t,n,r),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var f=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(f))n=e.B.get(f);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",S=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+f,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+S),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,S=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,S-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=S+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(f,h),n=h}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function S8(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Vn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Vn?"line-right":"center"}function w8(e,t,n,r,u){var c=t.style,f=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return"".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=s_(n.linePadding,n,e.s),c.paddingRight=s_(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var S=t;else S=document.createElement("span"),t.appendChild(S);n.border&&(S.style.border=n.border),!u&&((t=xR(r,function(k){return k.backgroundColor}))?S.style.backgroundColor=t:E&&(S.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=xR(r,function(k){return k.fontFamily}))&&(S.style.fontFamily=t),E&&(S.textContent=E)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=s_(n.fontSize,n,e.s),r=n.line,r!=null&&(f=n.lineInterpretation,f==cn&&(f=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),f==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==bn?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==bn?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==bn?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=S8(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function s_(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function xR(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}te("shaka.text.UITextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.remove=ha.prototype.remove,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.configure=ha.prototype.configure;function A8(e,t){function n(c){for(var f=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(f+=E.end-E.start);return c=Math.floor(f/3600),h=Math.floor(f/60%60),E=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>f?10>f?"00":"0":"")+f}var r=a_(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var f=[];switch(c.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case kn:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(c.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}te("shaka.text.WebVttGenerator",function(){});function NR(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}NR.prototype.configure=function(e){this.g=e};function I8(e,t,n){try{if(!e.g.enabled)return t;var r=u_(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=Jm;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=tv;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=DR;break e}u=void 0}r.ot=u,r.su=!0;var c=Qm(r);return l_(t,c)}catch(f){return St("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function u_(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function id(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,u_(e)),n.pr=e.h.eb();var u=n.ot===ev||n.ot===tv;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=b8(e,n),r)r=N8(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=Qm(e);c&&(t.uris=t.uris.map(function(f){return l_(f,c)}))}}}function b8(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function C8(e){if(e.type===0)return M8;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?tv:ev;if(t=="audio")return Jm;if(t=="text")return e.mimeType==="application/mp4"?nv:c_}}function R8(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function MR(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function x8(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case ev:return e.videoBandwidth||NaN;case Jm:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Qm(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function r(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=m(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var E=e[h];if(r(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var S=c[h];S&&(E=S(E)),S=typeof E;var k=void 0;k=S==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):S==="boolean"?h:S==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function N8(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,u[c[f]!=null?c[f]:1][f]=e[f];for(e=0;e<u.length;e++)(c=Qm(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function l_(e,t){return!t||e.includes("offline:")?e:(e=new si(e),e.g.set("CMCD",t),e.toString())}var DR="m",Jm="a",ev="v",tv="av",M8="i",c_="c",nv="tt";te("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function Ja(e){this.h=e,this.g=null}g=Ja.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(LR)?1e3*this.g.get(LR):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(OR)?1e3*this.g.get(OR):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has(kR)?this.g.get(kR):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(FR)?this.g.get(FR):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function PR(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}te("shaka.util.CmsdManager",Ja),Ja.prototype.getBandwidthEstimate=Ja.prototype.getBandwidthEstimate,Ja.prototype.getRoundTripTime=Ja.prototype.yh,Ja.prototype.getResponseDelay=Ja.prototype.xh,Ja.prototype.getEstimatedThroughput=Ja.prototype.cg,Ja.prototype.getMaxBitrate=Ja.prototype.dg;var OR="etp",LR="mb",kR="rd",FR="rtt";function UR(){this.g=null,this.h=[]}function f_(e,t){return Me(function(n){if(n.g==1)return e.g?x(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}UR.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function dn(e,t){Sr.call(this);var n=this;this.l=__,this.Rd=this.g=null,this.da=!1,this.Vd=new Tt,this.Rb=new Tt,this.m=new Tt,this.ta=new Tt,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new UR,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=sd(this),this.ba={width:1/0,height:1/0},this.Pd=new Ae(this.h,this.ba,null),this.s=null,this.sa=new Dl(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=H8(this),this.aa=new Ja(this.h.cmsd),this.G=KR(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,uv&&(this.A=uv(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){v_(n),n.vf()}),this.Td=new pr(function(){return W8(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}Y(dn,Sr);function rv(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function D8(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(Al()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Ve("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),rv(e),e.K==null&&(e.K=new io(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else rv(e)}function Jr(e,t){return new Wn(e,t)}g=dn.prototype,g.destroy=function(){var e=this,t;return Me(function(n){switch(n.g){case 1:return e.l==Hs?n.return():(rv(e),t=e.detach(),e.l=Hs,x(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return x(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),X(n)}})};function od(e,t){e.dispatchEvent(Jr("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Me(function(f){switch(f.g){case 1:if(n.l==Hs)throw new pt(2,7,7e3);if(r=n.g&&n.g==e,!n.g||n.g==e){f.u(2);break}return x(f,n.detach(),2);case 2:return x(f,d_(n,"attach"),4);case 4:if(f.h)return f.return();if(ce(f,5,6),r||(od(n,"attach"),u=function(){var h=y_(n);h&&cd(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!Ao()||n.F){f.u(6);break}return x(f,h_(n),6);case 6:Je(f),n.Y.release(),Te(f,0);break;case 5:return c=Ce(f),x(f,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return Me(function(n){if(n.g==1){if(t.l==Hs)throw new pt(2,7,7e3);return x(n,t.lc(!1,e),2)}if(n.g!=3)return x(n,d_(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),od(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}X(n)})};function d_(e,t){var n;return Me(function(r){return r.g==1?(n=++e.Yd,x(r,f_(e.Y,t),2)):n!=e.Yd?(e.Y.release(),r.return(!0)):r.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,f,h,E,S,k,G;return Me(function(ne){switch(ne.g){case 1:return n.l!=Hs&&(n.l=__),x(ne,d_(n,"unload"),2);case 2:return ne.h?ne.return():(oe(ne,3),n.Ia=!1,od(n,"unload"),e&&!Ao()&&(e=!1),rv(n),r=n.Tb.map(function(z){return z()}),n.Tb=[],x(ne,Promise.all(r),5));case 5:if(n.dispatchEvent(Jr("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){ne.u(6);break}return x(ne,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){ne.u(8);break}return x(ne,n.o.stop(),8);case 8:if(!n.j){ne.u(10);break}return x(ne,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){ne.u(12);break}return x(ne,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&cp(n.g),!n.g||!n.g.src){ne.u(14);break}return x(ne,new Promise(function(z){return new pr(z).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){ne.u(16);break}return x(ne,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(f=c.value,h=m([f.audio,f.video]),E=h.next();!E.done;E=h.next())(S=E.value)&&S.segmentIndex&&S.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new Gm,n.kf=null,n.$c=[],n.N=NaN,m_(n);case 3:Je(ne),n.Y.release(),Te(ne,4);break;case 4:if(e&&Ao()&&!n.F)return x(ne,h_(n),0);ne.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,f,h,E,S,k,G,ne,z,ye,Le,De;return Me(function(He){switch(He.g){case 1:if(r.l==Hs)throw new pt(2,7,7e3);return u=null,c="",e instanceof rl?(u=e,c=u.ad()||""):c=e||"",x(He,f_(r.Y,"load"),2);case 2:if(r.Y.release(),!r.g)throw new pt(2,7,7002);if(!r.qa){He.u(3);break}return x(He,r.lc(!1),3);case 3:if(f=++r.Yd,h=function(){return Me(function(Se){if(Se.g==1)return r.Yd==f?Se.u(0):u?x(Se,u.destroy(),3):Se.u(3);throw new pt(2,7,7e3)})},E=function(Se,Qe){return Me(function(Be){switch(Be.g){case 1:return oe(Be,2),x(Be,f_(r.Y,Qe),4);case 4:return x(Be,h(),5);case 5:return x(Be,Se(),6);case 6:return x(Be,h(),7);case 7:u&&r.h&&(u.g=r.h);case 2:Je(Be),r.Y.release(),Te(Be,0)}})},ce(He,5,6),t==null&&u&&(t=u.getStartTime()),r.ea=t,r.Ia=!1,r.dispatchEvent(Jr("loading")),u){n=u.Y,He.u(8);break}if(n){He.u(8);break}return x(He,E(function(){return Me(function(Se){if(Se.g==1)return x(Se,ZR(r,c),2);n=Se.h,X(Se)})},"guessMimeType_"),8);case 8:if(S=!!u,u){SR(u,r),r.s=u.getStats(),He.u(11);break}return x(He,BR(r,c,t,n,!0),12);case 12:if(u=He.h,!u){r.s=new Gm,He.u(11);break}return SR(u,r),r.s=u.getStats(),x(He,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,r.s=u?u.getStats():new Gm,r.qa=c,r.gf=n||null,k)return x(He,E(function(){return Me(function(Se){return x(Se,k8(r,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(r.F){He.u(17);break}return x(He,E(function(){return Me(function(Se){return x(Se,h_(r),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return x(He,E(function(){return u.qa},"waitForManifest"),19);case 19:return r.h=u.getConfiguration(),r.Pd=u.A,r.Ga=u.B,r.I=f8(u),r.mb=d8(u),r.lb=u.lb,r.i=u.Te(),(ne=u.m)&&(r.sa=ne),S&&r.g&&r.g.nodeName==="AUDIO"&&(P8(r),r.configure("manifest.disableVideo",!0)),x(He,E(function(){return u.pa},"waitForDrm"),20);case 20:return r.B=h8(u),x(He,E(function(){return Me(function(Se){return x(Se,r.B.Vc(r.g),0)})},"drmEngine_.attach"),21);case 21:return x(He,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(z=u.s)||r.pa&&r.pa==z||(r.o=c8(u),r.pa=u.s,typeof r.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),ye=p8(u),Le=u.ta,x(He,E(function(){return Me(function(Se){return x(Se,L8(r,G,Le,ye),0)})},"loadInner_"),23);case 23:l8(u),He.u(16);break;case 24:return x(He,E(function(){return Me(function(Se){return x(Se,F8(r,G,n),0)})},"srcEqualsInner_"),16);case 16:r.dispatchEvent(Jr("loaded"));case 6:if(Je(He),!u){He.u(26);break}return x(He,u.destroy(),26);case 26:Te(He,0);break;case 5:if(De=Ce(He),De.code==7e3){He.u(28);break}return x(He,r.lc(!1),28);case 28:throw De}})};function P8(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c;return Me(function(f){switch(f.g){case 1:if(r=null,!(n.i&&n.I&&n.Ga&&n.qa)){f.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,x(f,jR(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=r=f.h,E=n.I,S=n.Ga;h.h=n.i,h.j=E,h.B=S,h=r,E=n.pa,h.i=n.o,h.s=E,r.m=n.sa,r.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return x(f,n.lc(e,t),4);case 4:return f.return(r)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Me(function(c){return c.g==1?x(c,BR(r,e,t,n),2):((u=c.h)?u.start().catch(function(){}):cd(r,new pt(2,7,7005)),c.return(u))})};function BR(e,t,n,r,u){u=u===void 0?!1:u;var c,f,h;return Me(function(E){return E.g==1?(c=Date.now()/1e3,r?E.u(2):x(E,ZR(e,t),3)):(E.g!=2&&(r=E.h),O8(e,r)?E.return(null):(f=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(f=!0)),E.return(jR(e,t,n,r||null,c,!u,f,h))))})}function jR(e,t,n,r,u,c,f,h){c=c===void 0?!0:c,f=f===void 0?!1:f,h=h===void 0?!0:h;var E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt;return Me(function(Vt){return Vt.g==1?(E=null,S=za(e.h),f&&(S.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},ne=function(Bt,_t){k()?E.configure(Bt,_t):e.configure(Bt,_t)},e.ba.width!=1/0||e.ba.height!=1/0?Vt.u(2):x(Vt,Sa(),3)):(Vt.g!=2&&(z=Vt.h,e.ba.width=z.width,e.ba.height=z.height),ye=new Ae(S,e.ba,null),Le={networkingEngine:e.G,filter:function(Bt){var _t,Zt;return Me(function(ln){if(ln.g==1)return x(ln,Ge(ye,Bt),2);if(ln.g!=4)return _t=ln.h,_t?(Zt=Jr("trackschanged"),x(ln,Promise.resolve(),4)):ln.u(0);E.dispatchEvent(Zt),X(ln)})},makeTextStreamsForClosedCaptions:function(Bt){return z8(e,Bt)},onTimelineRegionAdded:function(Bt){var _t=E.C;e:{for(var Zt=m(_t.g),ln=Zt.next();!ln.done;ln=Zt.next())if(ln=ln.value,ln.schemeIdUri==Bt.schemeIdUri&&ln.id==Bt.id&&ln.startTime==Bt.startTime&&ln.endTime==Bt.endTime){Zt=ln;break e}Zt=null}Zt==null&&(_t.g.add(Bt),Bt=new Wn("regionadd",new Map([["region",Bt]])),_t.dispatchEvent(Bt))},onEvent:function(Bt){return E.dispatchEvent(Bt)},onError:function(Bt){return E.onError(Bt)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){ne("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Bt){var _t=E.l,Zt=_t?_t.g:null;Zt&&_t.s&&ae(ye,Zt.keySystem,Bt)},onManifestUpdated:function(){var Bt=new Map().set("isLive",e.R());E.dispatchEvent(Jr("manifestupdated",Bt)),$m(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},De=new YE(function(){return e.Ib()}),De.addEventListener("regionadd",function(Bt){var _t=Bt.region;dp(e,"timelineregionadded",_t,E),$m(E,!1,function(){e.A&&e.A.onDashTimedMetadata(_t)})}),He=null,S.streaming.observeQualityChanges&&(He=new qm(function(){return e.ob()}),He.addEventListener("qualitychange",function(Bt){var _t=Bt.quality;Bt=Bt.position,_t=new Map().set("mediaQuality",{bandwidth:_t.bandwidth,audioSamplingRate:_t.audioSamplingRate,codecs:_t.codecs,contentType:_t.contentType,frameRate:_t.frameRate,height:_t.height,mimeType:_t.mimeType,channelsCount:_t.channelsCount,pixelAspectRatio:_t.pixelAspectRatio,width:_t.width}).set("position",Bt),e.dispatchEvent(Jr("mediaqualitychanged",_t))})),Se=!0,Qe={zb:e.G,onError:function(Bt){return E.onError(Bt)},ee:function(Bt){$m(E,!0,function(){e:{var _t=Jr("keystatuschanged");e.dispatchEvent(_t);var Zt=Object.keys(Bt);_t=Zt.length==1&&Zt[0]=="00";var ln=!1;if(Zt.length){Zt=m(e.i.variants);for(var pn=Zt.next();!pn.done;pn=Zt.next()){pn=pn.value;var Ln=[];pn.audio&&Ln.push(pn.audio),pn.video&&Ln.push(pn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=pn.allowedByKeySystem,qn.keyIds.size){pn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Bt[_t?"00":Yn])||e.B.F)&&(pn.allowedByKeySystem=pn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=pn.allowedByKeySystem&&(ln=!0)}}}if(ln&&(es(e),!ud(e)))break e;(_t=e.j.j)&&!_t.allowedByKeySystem&&ld(e)}})},onExpirationUpdated:function(Bt,_t){var Zt=Jr("expirationupdated");E.dispatchEvent(Zt),(Zt=E.j)&&Zt.onExpirationUpdated&&Zt.onExpirationUpdated(Bt,_t)},onEvent:function(Bt){E.dispatchEvent(Bt),Bt.type=="drmsessionupdate"&&Se&&(Se=!1,Bt=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Bt,e.K&&Zi(e.K))}},Be=KR(e,k),vt=function(){return e.rc(Qe)},xt={config:S,Uh:Le,di:De,ci:He,rc:vt,Th:ye,networkingEngine:Be,Vg:c,Ug:h},E=new rl(t,r,u,n,xt),Vt.return(E))})}function ZR(e,t){var n,r;return Me(function(u){return u.g==1?(n=e.h.manifest.retryParameters,x(u,o_(t,e.G,n),2)):(r=u.h,r=="application/x-mpegurl"&&ms()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function O8(e,t){if(!Ao())return!0;if(t){if((e.g||Ec()).canPlayType(t)=="")return!1;if(!(Ao()&&t in Fe))return!0;if(am(t)){if(e.h.streaming.preferNativeHls)return!0;if(ms()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(ms())return e.h.streaming.useNativeHlsOnSafari}}return!1}function h_(e){var t,n,r,u,c;return Me(function(f){if(f.g==1)return od(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,r=q8(e.g,n,function(h,E,S){GR(e,h,E,S)},e.K),r.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,r.ba=c,x(f,r.L,2);e.F=r,X(f)})}function L8(e,t,n,r){var u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt;return Me(function(_t){switch(_t.g){case 1:for(od(e,"load"),u=e.g,e.H=new tp({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(Zt){u.playbackRate=Zt},og:function(Zt){u.currentTime+=Zt}}),c=function(){return iv(e)},f=function(){return QR(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",f),D8(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,E_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(Zt,ln,pn){e.j&&Zt!=e.j.j&&av(e,Zt,!0,ln===void 0?!1:ln,pn===void 0?0:pn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=K8(e),e.j.configure(e.h.streaming),e.l=Oo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(Zt){if(Zt.track)switch(Zt=Zt.track,Zt.kind){case"chapters":HR(e,Zt)}}),e.dispatchEvent(Jr("streaming")),h=n,(E=e.j.j)||h||(h=ex(e,!0)),S=[],k=E||h,G=m([k.video,k.audio]),ne=G.next();!ne.done;ne=G.next())(z=ne.value)&&!z.segmentIndex&&S.push(z.createSegmentIndex());if(!(0<S.length)){_t.u(2);break}return x(_t,Promise.all(S),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),E_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ye=function(Zt){e.C=Z8(e,Zt),e.bb=G8(e,t),VR(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ye(e.ea),E){_t.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){_t.u(5);break}return Le=e.i.presentationTimeline,De=e.ea||e.g.currentTime,He=Le.$b(),Se=Le.pb(),De<He?De=He:De>Se&&(De=Se),x(_t,Y8(h,De),6);case 6:Qe=_t.h,ye(Qe);case 5:av(e,h,!0,!1,0);case 4:return e.C.ve(),Be=e.wc().find(function(Zt){return Zt.active}),Be||((vt=Ic(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&HE(e.s.h,vt,!0),h&&(vt?(h.audio&&$8(e,h.audio,vt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),rx(e)):e.da=!1),vt&&(e.h.streaming.alwaysStreamText||e.Ze())&&Hm(e.j,vt)),x(_t,e.j.start(r),7);case 7:e.h.abr.enabled&&(e.o.enable(),ix(e)),es(e),ud(e),e.i.variants.some(function(Zt){return Zt.primary}),(xt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Vt=function(){return JR(e)},e.m.D(u,"timeupdate",Vt)):xt||(Bt=function(){return ov(e)},e.m.D(u,"timeupdate",Bt),ov(e)),e.A&&e.A.onManifestUpdated(xt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(_t)}})}function k8(e,t){var n,r,u,c;return Me(function(f){return f.g==1?(n=yi,r=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){cd(e,h)},ee:function(){},onExpirationUpdated:function(){var h=Jr("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Aa(t):"",codecs:t?Do(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(Si(c.video.mimeType,c.video.codecs)),e.B.ba=!0,x(f,Om(e.B,[c],[]),2)):x(f,e.B.Vc(e.g),0)})}function F8(e,t,n){var r,u,c,f,h,E,S,k,G,ne;return Me(function(z){if(z.g==1)return od(e,"src-equals"),r=e.g,e.C=new iR(r),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new tp({Md:function(){return r.playbackRate},Xb:function(){return r.defaultPlaybackRate},Df:function(ye){r.playbackRate=ye},og:function(ye){r.currentTime+=ye}}),c=e.h.streaming.rebufferingGoal,VR(e,r,c),f=function(){return iv(e)},h=function(){return QR(e)},e.m.D(r,"playing",f),e.m.D(r,"pause",f),e.m.D(r,"ended",f),e.m.D(r,"ratechange",h),r.preload!="none"&&e.m.na(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return es(e)}),e.m.D(r.audioTracks,"removetrack",function(){return es(e)}),e.m.D(r.audioTracks,"change",function(){return es(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(ye){if(ye.track)switch(ye=ye.track,ye.kind){case"metadata":j8(e,ye);break;case"chapters":HR(e,ye);break;default:es(e)}}),e.m.D(r.textTracks,"removetrack",function(){return es(e)}),e.m.D(r.textTracks,"change",function(){return es(e)})),r.src=I8(e.T,e.qa,n),(Ga()||ia())&&r.load(),r.preload!="none"&&!r.autoplay&&am(n)&&ys()&&r.load(),e.l=pa,e.dispatchEvent(Jr("streaming")),E=new Rr,Qf(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),Qf(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ye;return Me(function(Le){if(Le.g==1)return U8(e),ye=fp(e),ye.find(function(De){return De.mode!="disabled"})?(0<ye.length&&(e.da=!0),Le.u(2)):x(Le,new Promise(function(De){e.m.na(r.textTracks,"change",De),new pr(De).X(1)}),2);if(u)return Le.return();B8(e),X(Le)})}),r.error?E.reject(y_(e)):r.preload=="none"&&(Ve('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(r,"error",function(){E.reject(y_(e))}),x(z,E,2);(S=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return JR(e)},e.m.D(r,"timeupdate",k)):S||(G=function(){return ov(e)},e.m.D(r,"timeupdate",G),ov(e)),e.A&&(e.A.onManifestUpdated(S),S&&(ne=e.Ib().end,e.m.D(r,"progress",function(){var ye=e.Ib().end;ne!=ye&&(e.A.onManifestUpdated(e.R()),ne=ye)}))),e.Ia=!0,X(z)})}function U8(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function B8(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function j8(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,qR(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var r=V8(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function GR(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,f=r;f&&c>f&&(f=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())qR(e,c,f,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function qR(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(Jr("metadata",t))}function HR(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new Lc(e)};function KR(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?$m(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,f,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,f,h)},function(u,c,f){c=new Map().set("headers",u).set("request",c).set("requestType",f),n(Jr("downloadheadersreceived",c)),r(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var S=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");S.set(G[0],PR(G[1]))}}catch(De){}if(S=u["cmsd-dynamic"]){try{var ne=new Map,z=S.split(";");for(S=1;S<z.length;S++){var ye=z[S].split("=");ne.set(ye[0],PR(ye[1]))}var Le=ne}catch(De){Le=null}Le&&(h.g=Le)}}}})},function(u,c,f,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",f).set("aborted",h),n(Jr("downloadfailed",u))},function(u,c,f){r(function(){var h=e.T,E=f;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")id(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var S="d";break e;case 3:case 2:S="h";break e;case 5:S="s";break e}S=void 0}h.m=S}id(h,c,{ot:DR,su:!h.i})}}catch(Mn){St("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case Ya:try{if(h.g.enabled){var k=E.segment;S=0,k&&(S=k.endTime-k.startTime);var G={d:1e3*S,st:h.h.R()?"l":"v"};G.ot=C8(E);var ne=G.ot===ev||G.ot===Jm||G.ot===tv||G.ot===nv,z=E.stream;if(z){var ye=h.h.eb();if(ne&&(G.bl=R8(h,z.type),G.ot!==nv)){var Le=MR(h,z.type);G.dl=ye?Le/Math.abs(ye):Le}if(z.bandwidth&&(G.br=z.bandwidth/1e3),z.segmentIndex&&k){var De=z.segmentIndex.xb(k.endTime,!0,0>ye);if(De){var He=De.next().value;if(He&&He!=k){if(!Zn(k.$(),He.$())){var Se=He.$()[0],Qe=c.uris[0],Be=new URL(Se),vt=new URL(Qe);if(Be.origin!==vt.origin)var xt=Se;else{for(var Vt=Be.pathname.split("/").slice(1),Bt=vt.pathname.split("/").slice(1,-1);Vt[0]===Bt[0];)Vt.shift(),Bt.shift();for(;Bt.length;)Bt.shift(),Vt.unshift("..");xt=Vt.join("/")}G.nor=xt}if((He.Aa||He.ja)&&(k.Aa!=He.Aa||k.ja!=He.ja)){var _t=He.Aa+"-";He.ja&&(_t+=He.ja),G.nrr=_t}}}var Zt=h.h.eb()||1,ln=MR(h,z.type)||500,pn=z.bandwidth,Ln=pn?pn*(k.endTime-k.startTime)/1e3/(ln/Zt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}ne&&G.ot!==nv&&(G.tb=x8(h,G.ot)/1e3),id(h,c,G)}}catch(Mn){St("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:id(h,c,{ot:"k"});break;case 4:id(h,c,{ot:"o"})}})},function(u,c,f,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function Z8(e,t){return new oR(e.g,e.i,e.h.streaming,t,function(){e.bb&&cR(e.bb,!0),e.j&&e.j.od(),e.L&&ad(e)},function(n){return e.dispatchEvent(n)})}function G8(e,t){t=new Xm(e.mb,e.R()||0<t),t.addEventListener("enter",function(r){dp(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){dp(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(dp(e,"timelineregionenter",u),dp(e,"timelineregionexit",u))});var n=new lR(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function VR(e,t,n){e.L=new Uh,e.L.g=Pl,Bh(e.L,n,Math.min(.5,n/2)),m_(e),e.m.D(t,"waiting",function(){return ad(e)}),e.m.D(t,"stalled",function(){return ad(e)}),e.m.D(t,"canplaythrough",function(){return ad(e)}),e.m.D(t,"progress",function(){return ad(e)})}function ad(e){switch(e.l){case pa:if(e.g.ended)var t=!0;else{var n=Ft(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Oo:e:if(e.g.ended||Bc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var r=Ft(e.g.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?Cc:Pl,n.g=r,(t=t!=r)&&r===Cc&&(n.h=Date.now()),t&&m_(e)}function q8(e,t,n,r){return new _u(e,t,n,r)}function H8(e){return new NR({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function K8(e){return new gR(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return cd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var r=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var f=Zs(e.F,c);!e.R()&&e.g.paused&&f!=null&&0<f&&e.C.Dd()<f&&e.C.we(f)}ad(e),r=new Map().set("start",r).set("end",u).set("contentType",c),e.dispatchEvent(Jr("segmentappended",r)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&qB(e.lb,n,t)},Qf:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new Mm(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)r=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;Ul(r,"cenc",u),r=r.l}}else r=Promise.resolve();return r},$h:function(t,n,r){GR(e,t,n,r)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=zm(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var r=jc(this.h,e,sd(this));return zR(this),r};function zR(e){if(e.Pd=new Ae(e.h,e.ba,e.B),e.I){var t=za(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=Hs&&le(e.Pd,e.i)&&es(e)}catch(c){cd(e,c)}e.o&&ud(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||ld(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.F,u=r.F;r.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),r.g&&(r.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(vr))&&Jf(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),ix(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Bh(e.L,t,Math.min(.5,t/2))),e.i&&E_(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=sd(this);return jc(e,this.h,sd(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];jc(this.h,sd(this),sd(this)),zR(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Pl:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?Ve("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Oo&&(this.o.playbackRateChanged(e),mR(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,r=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Wc():Math.floor(n)<=Math.floor(r.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==pa&&this.H.set(e),this.l==Oo&&(this.H.set(e),this.o.playbackRateChanged(e),mR(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,kf(u)){var c=xl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(f){return Ml(f)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=Nl(r);u.active=r==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?fp(this).map(function(c){return mm(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Ku(t)})},g.gh=function(e){var t=this,n,r,u,c;return Me(function(f){return f.g==1?t.l!=Oo&&t.l!=pa?f.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?f.u(2):x(f,r.createSegmentIndex(),2):f.return(null)):f.g!=4?(u=[],r.segmentIndex.tc(function(h){var E=YR(h.tilesLayout||r.tilesLayout);if(E){E=E.rows*E.Sb;for(var S=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+S*k/E))}}),x(f,Promise.all(u),4)):(c=f.h,f.return(c.filter(function(h){return h})))})};function YR(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be;return Me(function(vt){return vt.g==1?n.l!=Oo&&n.l!=pa?vt.return(null):(r=n.$c,n.i&&(r=n.i.imageStreams),(u=r.find(function(xt){return xt.id==e}))?u.segmentIndex?vt.u(2):x(vt,u.createSegmentIndex(),2):vt.return(null)):(c=u.segmentIndex.find(t),c==null||(f=u.segmentIndex.get(c),h=YR(f.tilesLayout||u.tilesLayout),!h)?vt.return(null):(E=u.width||0,S=u.height||0,k=E/h.Sb,G=S/h.rows,ne=h.Sb*h.rows,z=f.i-f.startTime,ye=f.A||z/ne,Le=f.startTime,He=De=0,1<ne&&(Se=Math.floor((t-f.startTime)/ye),Le=f.startTime+Se*ye,De=Se%h.Sb*k,He=Math.floor(Se/h.Sb)*G),Qe=!1,(Be=f.s)&&(Qe=!0,G=Be.height,De=Be.positionX,He=Be.positionY,k=Be.width),vt.return({segment:f,imageHeight:S,imageWidth:E,height:G,positionX:De,positionY:He,startTime:Le,duration:ye,uris:f.$(),width:k,sprite:Qe})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(HE(this.s.h,t,!1),Hm(this.j,t),sv(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=fp(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Ac(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";sv(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&Ve("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(u){return u.id==e.id});r&&kf(r)&&(av(this,r,!1,t,n),this.sa=new Fh(r,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),ud(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,Ac(n)==e.id){tx(this,n);break}}},g.ih=function(){return ax(this.Hb())},g.Ah=function(){return ax(this.wc())},g.hh=function(){return Array.from(ox(this.Hb()))},g.zh=function(){return Array.from(ox(this.wc()))},g.wg=function(e,t,n,r){if(n=n===void 0?0:n,r=r===void 0?0:r,this.i&&this.C){this.sa=new Dl(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=xl(n),this.zf(e,!0,r)):ld(this)}else this.g&&this.g.audioTracks&&(r=Ic(this.Hb(),e,t||"",!1)[0])&&this.zf(r)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=Ic(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&(HE(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&(Hm(this.j,e),sv(this))):(e=Ic(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.sa=new Dl(r.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),ld(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&tx(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Oo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?fp(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?WR(this).map(function(e){return mm(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=Cr(e),n=WR(this).filter(function(h){return Cr(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var f=c.value;(c=f.id)&&c!=""||(c=f.startTime+"-"+f.endTime+"-"+f.text),f={id:c,title:f.text,startTime:f.startTime,endTime:f.endTime},r.has(c)||(e.push(f),r.add(c))}}return e};function fp(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function V8(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function WR(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Oo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=Ic(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&(Hm(this.j,e[0]),sv(this))):zB(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=fp(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}rx(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Oo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==pa&&(e.total=yt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Oo&&this.l!=pa)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};iv(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=r,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Oo){if(n=this.j.j,t=this.j.s,n){r=this.H?this.H.h:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==pa&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.I,u=c.K;var f=c.H,h=c.N,E=c.L,S=c.A,k=c.i,G=c.m,ne=c.F,z=c.j,ye=qE(c.g,"playing"),Le=qE(c.g,"paused"),De=qE(c.g,"buffering"),He=c.s,Se=c.C,Qe=c.G,Be=c.Ed,vt=UB(c.g),xt=[];c=m(c.h.g);for(var Vt=c.next();!Vt.done;Vt=c.next())Vt=Vt.value,xt.push({timestamp:Vt.timestamp,id:Vt.id,type:Vt.type,fromAdaptation:Vt.fromAdaptation,bandwidth:Vt.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:f,stallsDetected:h,gapsJumped:E,estimatedBandwidth:S,completionPercent:k,loadLatency:G,manifestTimeSeconds:ne,drmTimeSeconds:z,playTime:ye,pauseTime:Le,bufferingTime:De,licenseTime:He,liveLatency:Se,maxSegmentDuration:Qe,bytesDownloaded:Be,stateHistory:vt,switchHistory:xt}},g.Rg=function(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h=this,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe;return Me(function(Be){switch(Be.g){case 1:if(h.l!=Oo&&h.l!=pa)throw new pt(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ve("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Be.u(2);break}return x(Be,p_(h,e),3);case 3:r=Be.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=pa){Be.u(4);break}return f&&(n="forced"),x(Be,$R(h,e,t,n,r,c||"",E),5);case 5:if(S=Cr(t),k=h.wc(),G=k.find(function(vt){return Cr(vt.language)==S&&vt.label==(c||"")&&vt.kind==n}))return es(h),Be.return(G);throw new pt(1,2,2012);case 4:if(ne=yi,z=h.g.duration,h.i&&(z=h.i.presentationTimeline.getDuration()),z==1/0)throw new pt(1,4,4033);if(!E.length){Be.u(6);break}return x(Be,g_(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ye=Be.h,Le=XR(h,ye,r,E),De=new Blob([Le],{type:"text/vtt"}),e=Zm(De),r="text/vtt";case 6:if(He={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:GE(0,z,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:ne.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(r||"",u||"")])},Se=Si(He.mimeType,He.codecs),Qe=bl(Se),!Qe)throw new pt(2,2,2014,r);return h.i.textStreams.push(He),es(h),Be.return(Nl(He))}})},g.Sg=function(e,t){var n=this,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se;return Me(function(Qe){switch(Qe.g){case 1:if(n.l!=Oo&&n.l!=pa)throw new pt(1,7,7004);if(t){Qe.u(2);break}return x(Qe,p_(n,e),3);case 3:t=Qe.h;case 2:if(t!="text/vtt")throw new pt(1,2,2017,e);if(r=yi,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new pt(1,4,4045);return x(Qe,g_(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=Qe.h,f=ji[t],!f)throw new pt(2,2,2014,t);for(h=f(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},S=Qn(c),k=h.parseMedia(S,E,e),G=[],ne={},z=m(k),ye=z.next();!ye.done;ne={Rc:ne.Rc,Nb:ne.Nb},ye=z.next())ne.Nb=ye.value,ne.Rc=null,Le=function(Be){return function(){return Be.Rc==null&&(Be.Rc=co([e],[Be.Nb.payload])),Be.Rc||[]}}(ne),De=new et(ne.Nb.startTime,ne.Nb.endTime,Le,0,null,null,0,0,1/0),ne.Nb.payload.includes("#xywh")&&(He=ne.Nb.payload.split("#xywh=")[1].split(","),He.length===4&&De.Eg({height:parseInt(He[3],10),positionX:parseInt(He[0],10),positionY:parseInt(He[1],10),width:parseInt(He[2],10)})),G.push(De);return Se={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(t||"","")])},n.l==pa?n.$c.push(Se):n.i.imageStreams.push(Se),es(n),Qe.return(Ku(Se))}})},g.Qg=function(e,t,n){var r=this,u,c,f,h;return Me(function(E){switch(E.g){case 1:if(r.l!=Oo&&r.l!=pa)throw new pt(1,7,7004);if(n){E.u(2);break}return x(E,p_(r,e),3);case 3:n=E.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),x(E,$R(r,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,f=r.bg(),h=f.find(function(S){return S.language==t}),!h){E.u(5);break}return x(E,new Promise(function(S,k){r.m.na(c,"load",S),r.m.na(c,"error",function(){k(new pt(1,2,2015))})}),6);case 6:return es(r),E.return(h);case 5:throw new pt(1,2,2012)}})};function p_(e,t){var n;return Me(function(r){switch(r.g){case 1:return ce(r,2),x(r,o_(t,e.G,e.h.streaming.retryParameters),4);case 4:n=r.h,me(r,3);break;case 2:Ce(r);case 3:if(n)return r.return(n);throw new pt(1,2,2011,t)}})}function $R(e,t,n,r,u,c,f){var h,E,S,k;return Me(function(G){if(G.g==1)return u!="text/vtt"||f.length?x(G,g_(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=XR(e,h,u,f),S=new Blob([E],{type:"text/vtt"}),t=Zm(S),u="text/vtt"),k=document.createElement("track");var ne=e.T,z=t;try{if(ne.g.enabled){var ye=u_(ne);ye.ot=c_,ye.su=!0;var Le=Qm(ye),De=l_(z,Le)}else De=z}catch(He){St("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",He),De=z}return k.src=De,k.label=c,k.kind=r,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function g_(e,t,n,r){var u,c,f;return Me(function(h){if(h.g==1){u=Ya,c=Oi([t],r),c.method="GET";var E=e.T;try{E.g.enabled&&id(E,c,{ot:c_,su:!0})}catch(S){St("CMCD_TEXT_ERROR","Could not generate text CMCD data.",S)}return x(h,n.request(u,c).promise,2)}return f=h.h,h.return(f.data)})}function XR(e,t,n,r){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),A8(t,r);throw new pt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Oo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.gd||r.Qa||r.ub||(r.gd=!1,_s(t,r,e));t=!0}}else t=!1;return t},g.Te=function(){return Ve("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function sd(e){var t=td();return t.streaming.failureCallback=function(n){if(e.R()){var r=null;n.code==1001||n.code==1002?r=1:n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.vf(r))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new ha(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new fa(e.g,"Shaka Player TextTrack"):new da},t}g.Hg=function(e){this.Rd=e};function z8(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),f=c.next();!f.done;f=c.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",E=new Ei,S=u.closedCaptions.get(f);h={id:e.nf++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:S,originalLanguage:S,label:null,type:vr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(h,"")])},t.textStreams.push(h),n.add(f)}}}function Y8(e,t){var n,r,u,c,f;return Me(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(E,S){var k,G,ne;return Me(function(z){return z.g==1?E?x(z,E.createSegmentIndex(),2):z.return(null):(G=(k=E.segmentIndex.xb(S))?k.next().value:null,G?(ne=G.startTime,z.return(ne)):z.return(null))})},x(h,u(n,t),2)):h.g!=3?(c=h.h,x(h,u(r,t),3)):(f=h.h,f!=null&&c!=null?h.return(Math.max(f,c)):f!=null?h.return(f):c!=null?h.return(c):h.return(t))})}function m_(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}iv(e)}t=new Map().set("buffering",t),e.dispatchEvent(Jr("buffering",t))}function QR(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=Jr("ratechange"),e.dispatchEvent(t))}function iv(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Pl?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Jr("statechanged",n)))}}function JR(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var r=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.sd(r):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,f=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,f=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,r=0,e.l==pa){var S=e.g.buffered;0<S.length&&(r=S.end(S.length-1),r=Math.max(f,r-u.end))}u=e.h.streaming.liveSyncPanicMode,S=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=S?t!=E&&e.sd(E):c&&f&&n-r>c?t!=f&&e.sd(f):h&&E&&n-r<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function ov(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var r;e.N==0?r=Jr("started"):e.N==25?r=Jr("firstquartile"):e.N==50?r=Jr("midpoint"):e.N==75?r=Jr("thirdquartile"):e.N==100&&(r=Jr("complete")),r&&e.dispatchEvent(r)}}}function ud(e){try{ue(e.Pd,e.i)}catch(n){return cd(e,n),!1}var t=Ff(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function ex(e,t){return t=t===void 0?!1:t,ud(e)?e.o.chooseVariant(t):null}function W8(e){function t(f){var h="";return f.video&&(h+="video:"+f.video.id),f.audio&&(h=h+(h?"&":"")+("audio:"+f.audio.id)),h}for(var n=Date.now()/1e3,r=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,r=!0,""+t(c),void 0);e.i.variants.every(function(f){return f.disabledUntilTime===0})&&e.Td.stop(),r&&ld(e,!0,void 0,!1,!1)}function ld(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c=ex(e);c&&av(e,c,u,t,n,r)}function av(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e.j.j;if(t==f)r&&vR(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),vR(e.j,t,r,u,c,n),r=null,f&&(r=xl(f)),t=xl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&Bs(e.K,t,e.Ue()),n=Jr("adaptation",n),fd(e,n)):nx(e,r,t)}}function tx(e,t){var n=Array.from(e.g.audioTracks).find(function(r){return r.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Ml(n),t=Ml(t),nx(e,n,t)}function $8(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var r=Cr(e.h.preferredTextLanguage);return n=Cr(n.language),e.h.autoShowText==2?ju(n,r):e.h.autoShowText==3?(e=Cr(t.language),ju(n,r)&&!ju(e,n)):(Ve("Invalid autoShowText setting!"),!1)}function es(e){var t=Jr("trackschanged");fd(e,t)}function nx(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&Bs(e.K,n,e.Ue()),n=Jr("variantchanged",t),fd(e,n)}function sv(e){var t=Jr("textchanged");fd(e,t)}function rx(e){var t=Jr("texttrackvisibility");fd(e,t)}function ix(e){e.h.abr.enabled||v_(e);var t=new Map().set("newStatus",e.h.abr.enabled);fd(e,Jr("abrstatuschanged",t))}function v_(e,t){if(t=t===void 0?!0:t,e.l==Oo){e.Td.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&ud(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===Hs||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var u=r[e.type];u&&u.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,f){return c+f.end-f.start},0),ld(this,!0,t,!0,!1),!0}return!1};function cd(e,t){var n,r,u;return Me(function(c){switch(c.g){case 1:if(e.l==Hs)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return ce(c,3),x(c,a8(e.j),5);case 5:r=c.h,n=!r,me(c,2);break;case 3:Ce(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&v_(e,!1),u=Jr("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),X(c)}})}function dp(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Jr(t,e))}function y_(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pt(2,3,3016,t,n,e.g.error.message)}function E_(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function fd(e,t){Me(function(n){if(n.g==1)return x(n,Promise.resolve(),2);e.l!=Hs&&e.dispatchEvent(t),X(n)})}function ox(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Cr(n.language)):t.add("und");return t}function ax(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Cr(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var f=c.next();!f.done;f=c.next())f=f.value,t.get(u).add(f),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(f,r.label))}var h=[];return t.forEach(function(E,S){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(S)&&n.get(S).has(k)&&(G=n.get(S).get(k)),h.push({language:S,role:k,label:G})}}),h}te("shaka.Player",dn),dn.prototype.setVideoContainer=dn.prototype.Hg,dn.prototype.getManifestParserFactory=dn.prototype.rh,dn.prototype.getManifest=dn.prototype.Te,dn.prototype.retryStreaming=dn.prototype.vf,dn.prototype.setMaxHardwareResolution=dn.prototype.xi,dn.prototype.addChaptersTrack=dn.prototype.Qg,dn.prototype.addThumbnailsTrack=dn.prototype.Sg,dn.prototype.addTextTrackAsync=dn.prototype.Rg,dn.prototype.getStats=dn.prototype.getStats,dn.prototype.getBufferedInfo=dn.prototype.ob,dn.prototype.getSegmentAvailabilityDuration=dn.prototype.Nd,dn.prototype.getPresentationStartTimeAsDate=dn.prototype.eg,dn.prototype.getPlayheadTimeAsDate=dn.prototype.vh,dn.prototype.setTextTrackVisibility=dn.prototype.Dg,dn.prototype.getChapters=dn.prototype.jh,dn.prototype.getChaptersTracks=dn.prototype.bg,dn.prototype.isTextTrackVisible=dn.prototype.Ze,dn.prototype.selectVariantsByLabel=dn.prototype.si,dn.prototype.selectTextLanguage=dn.prototype.yf,dn.prototype.selectAudioLanguage=dn.prototype.wg,dn.prototype.getTextLanguages=dn.prototype.zh,dn.prototype.getAudioLanguages=dn.prototype.hh,dn.prototype.getTextLanguagesAndRoles=dn.prototype.Ah,dn.prototype.getAudioLanguagesAndRoles=dn.prototype.ih,dn.prototype.selectVariantTrack=dn.prototype.zf,dn.prototype.selectTextTrack=dn.prototype.xg,dn.prototype.getThumbnails=dn.prototype.fg,dn.prototype.getAllThumbnails=dn.prototype.gh,dn.prototype.getImageTracks=dn.prototype.oh,dn.prototype.getTextTracks=dn.prototype.wc,dn.prototype.getVariantTracks=dn.prototype.Hb,dn.prototype.cancelTrickPlay=dn.prototype.Wc,dn.prototype.trickPlay=dn.prototype.sd,dn.prototype.getPlaybackRate=dn.prototype.eb,dn.prototype.isBuffering=dn.prototype.Xe,dn.prototype.getKeyStatuses=dn.prototype.Kd,dn.prototype.getActiveSessionsMetadata=dn.prototype.Se,dn.prototype.getExpiration=dn.prototype.cd,dn.prototype.drmInfo=dn.prototype.drmInfo,dn.prototype.keySystem=dn.prototype.keySystem,dn.prototype.goToLive=dn.prototype.Hh,dn.prototype.seekRange=dn.prototype.Ib,dn.prototype.isAudioOnly=dn.prototype.Kh,dn.prototype.isInProgress=dn.prototype.dc,dn.prototype.isLive=dn.prototype.R,dn.prototype.getAdManager=dn.prototype.$f,dn.prototype.getAssetUri=dn.prototype.ad,dn.prototype.getNetworkingEngine=dn.prototype.Zb,dn.prototype.getMediaElement=dn.prototype.th,dn.prototype.getManifestType=dn.prototype.Ue,dn.prototype.getLoadMode=dn.prototype.qh,dn.prototype.resetConfiguration=dn.prototype.li,dn.prototype.getBufferFullness=dn.prototype.ag,dn.prototype.getConfiguration=dn.prototype.getConfiguration,dn.prototype.configure=dn.prototype.configure,dn.prototype.releaseAllMutexes=dn.prototype.hi,dn.prototype.preload=dn.prototype.preload,dn.prototype.unloadAndSavePreload=dn.prototype.Ai,dn.prototype.load=dn.prototype.load,dn.prototype.updateStartTime=dn.prototype.Ei,dn.prototype.unload=dn.prototype.lc,dn.prototype.detach=dn.prototype.detach,dn.prototype.attachCanvas=dn.prototype.Wg,dn.prototype.attach=dn.prototype.Vc,dn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,f;return Me(function(h){if(h.g==1)return t={},e?x(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(Ao())for(var S in Fe)E[S]=!0;S=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=S.next();!k.done;k=S.next())k=k.value,E[k]=Ao()?!!Fe[k]:lu(k);for(n=E,S='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(hu)),E={},S=m(S),k=S.next();!k.done;k=S.next()){k=k.value,E[k]=Ao()?bl(k)?!0:Ot(k)||!!ro(k):lu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}r=E,u={manifest:n,media:r,drm:t},c=T_;for(f in c)u[f]=c[f]();return h.return(u)})},dn.isBrowserSupported=function(){if(p.Promise||Ve("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Yr("Trident/"))return!1;var e=ys();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:Ao()?!0:lu("application/x-mpegurl")},dn.setAdManagerFactory=function(e){uv=e},dn.registerSupportPlugin=function(e,t){T_[e]=t},dn.prototype.destroy=dn.prototype.destroy;var Hs=0,__=1,Oo=2,pa=3;dn.LoadMode={DESTROYED:Hs,NOT_LOADED:__,MEDIA_SOURCE:Oo,SRC_EQUALS:pa},dn.version="v4.8.2";var sx=["4","8"];Lr=new function(e){this.g=e,this.i=ei,this.h=Ji}(new Or(Number(sx[0]),Number(sx[1])));var T_={},uv=null;function ux(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Tt,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},te("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function lv(e,t,n,r,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new Tt,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){X8(c,f)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){lx(c,f)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}lv.prototype.configure=function(e){this.s=e},lv.prototype.stop=function(){this.g&&this.g.stop(),this.o&&cp(this.o)},lv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function lx(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),fv(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function X8(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}Q8(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,cv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){fv(e,null)}}function cv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function Q8(e){function t(n,r){n=new Map().set("originalEvent",n),e.m(new Wn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){lx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){cx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){cx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){fv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){fv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function cx(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ve("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function fv(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,r,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=r}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},te("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function hp(e,t,n,r){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new Tt}hp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);dd(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},hp.prototype.release=function(){this.stop(),this.o&&this.o.release()},hp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(e6(this,this.G,this.T),this.T=!1)},hp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function J8(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z;Me(function(ye){if(ye.g==1)return r=Oi([t],sa()),r.method="POST",n&&(u=JSON.stringify(n),r.body=Ka(u)),c=e.K.request(7,r),ce(ye,2),x(ye,c.promise,4);if(ye.g!=2){if(f=ye.h,h=Vr(f.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)S=new si(t),k=new si(E.trackingUrl),e.G=S.resolve(k).toString(),G=Date.now()/1e3,ne=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",ne))),z=new si(E.manifestUrl),e.l.resolve(S.resolve(z).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return me(ye,0)}if(Ce(ye),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ye.return();e.l.resolve(e.H),e.l=null,X(ye)})}function e6(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He;Me(function(Se){if(Se.g==1)return r=Oi([t],sa()),u=e.K.request(7,r),ce(Se,2),x(Se,u.promise,4);if(Se.g!=2){if(c=Se.h,f=[],h=Vr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,S=m(e.j),k=S.next();!k.done;k=S.next())for(G=k.value,ne=m(G.nonLinearAdsList),z=ne.next();!z.done;z=ne.next())for(ye=z.value,Le=m(ye.nonLinearAdList),De=Le.next();!De.done;De=Le.next())He=De.value,t6(e,He);f=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f))),dd(e),e.j=[];return n&&(e.I||0<f.length)&&n6(e),me(Se,0)}Ce(Se),X(Se)})}function t6(e,t){var n,r,u,c,f,h,E;Me(function(S){if(S.g==1)return!t.staticResource||(n=fx(t),e.F.get(n))?S.return():(r=Oi([t.staticResource],sa()),u=e.K.request(7,r),ce(S,2),e.F.set(n,[]),x(S,u.promise,4));if(S.g!=2)return c=S.h,f=Vr(c.data),h=JSON.parse(f),E=h.apps,e.F.set(n,E),me(S,0);Ce(S),e.F.delete(n),X(S)})}function fx(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function n6(e){hx(e),e.I||(dx(e),e.o.D(e.g,"seeked",function(){dx(e)}),e.o.D(e.g,"ended",function(){dd(e)})),e.o.D(e.g,"timeupdate",function(){hx(e)})}function dx(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var f=m(c.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function hx(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),ga(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),ga(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),ga(e,"thirdQuartile")),r=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=r||r>u)&&dd(e)}if(!e.h||!e.h.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var f=u.ads[c],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}dd(e),e.L=u,e.h=new or(f,c+1,u.ads.length,!0,e.g),e.C=f,c===0&&ga(e,"breakStart"),px(e);break}}if(!e.h){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.h);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(f=u.nonLinearAdsList[c],f.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(fx(f.nonLinearAdList[0]));if(h<=t&&E&&E.length){dd(e),h=e,E=m(E);for(var S=E.next();!S.done;S=E.next())if(S=S.value,S.data.source.length){var k=document.createElement("img");k.src=S.data.source[0].url,k.style.top=(S.placeholder.top||0)+"%",k.style.height=100-(S.placeholder.top||0)+"%",k.style.left=(S.placeholder.left||0)+"%",k.style.maxWidth=100-(S.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(f,c+1,u.ads.length,!1,e.g),e.C=f,c===0&&ga(e,"breakStart"),px(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function dd(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),ga(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&ga(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function px(e){var t=!1;e.g.paused?t=!0:(ga(e,"impression"),ga(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&ga(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||ga(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(ga(e,"impression"),ga(e,"start"),t=!1):ga(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){ga(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function ga(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Oi([r],sa()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},te("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function gx(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Tt,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){r6(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var f=c.getStreamData();c=[],f=m(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=gx.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function r6(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function $n(){Sr.call(this),this.g=this.h=this.i=null,this.j=new ux,this.m=navigator.language,this.l=null}Y($n,Sr),g=$n.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var r=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new pt(2,10,1e4);this.i&&this.i.release(),this.i=new lv(e,t,this.m,n,function(u){return S_(r,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new ux},g.requestClientSideAds=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new pt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new hp(e,t,n,function(u){return S_(r,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new pt(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new pt(1,10,10004)):(r.l=new Rr,J8(r,e,t),r.H=n||"",r.Y=Date.now()/1e3,e=r.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new pt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new pt(2,10,10002);this.g&&this.g.release(),this.g=new gx(e,t,this.m,function(r){return S_(n,r)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new pt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ve('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new pt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new pt(1,10,10003);(e.mpt||e.mpv)&&Ve('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function S_(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}te("shaka.ads.AdManager",$n),$n.prototype.onCueMetadataChange=$n.prototype.onCueMetadataChange,$n.prototype.onHlsTimedMetadata=$n.prototype.onHlsTimedMetadata,$n.prototype.onDashTimedMetadata=$n.prototype.onDashTimedMetadata,$n.prototype.onManifestUpdated=$n.prototype.onManifestUpdated,$n.prototype.getStats=$n.prototype.getStats,$n.prototype.getCuePoints=$n.prototype.getCuePoints,$n.prototype.getServerSideCuePoints=$n.prototype.getServerSideCuePoints,$n.prototype.replaceServerSideAdTagParameters=$n.prototype.replaceServerSideAdTagParameters,$n.prototype.requestServerSideStream=$n.prototype.requestServerSideStream,$n.prototype.initServerSide=$n.prototype.initServerSide,$n.prototype.addMediaTailorTrackingUrl=$n.prototype.addMediaTailorTrackingUrl,$n.prototype.requestMediaTailorStream=$n.prototype.requestMediaTailorStream,$n.prototype.initMediaTailor=$n.prototype.initMediaTailor,$n.prototype.updateClientSideAdsRenderingSettings=$n.prototype.updateClientSideAdsRenderingSettings,$n.prototype.requestClientSideAds=$n.prototype.requestClientSideAds,$n.prototype.onAssetUnload=$n.prototype.onAssetUnload,$n.prototype.release=$n.prototype.release,$n.prototype.initClientSide=$n.prototype.initClientSide,$n.prototype.configure=$n.prototype.configure,$n.prototype.setLocale=$n.prototype.setLocale,$n.ADS_LOADED="ads-loaded",$n.AD_STARTED="ad-started",$n.AD_FIRST_QUARTILE="ad-first-quartile",$n.AD_MIDPOINT="ad-midpoint",$n.AD_THIRD_QUARTILE="ad-third-quartile",$n.AD_COMPLETE="ad-complete",$n.AD_STOPPED="ad-stopped",$n.AD_SKIPPED="ad-skipped",$n.AD_VOLUME_CHANGED="ad-volume-changed",$n.AD_MUTED="ad-muted",$n.AD_PAUSED="ad-paused",$n.AD_RESUMED="ad-resumed",$n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$n.CUEPOINTS_CHANGED="ad-cue-points-changed",$n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$n.AD_CLICKED="ad-clicked",$n.AD_PROGRESS="ad-progress",$n.AD_BUFFERING="ad-buffering",$n.AD_IMPRESSION="ad-impression",$n.AD_DURATION_CHANGED="ad-duration-changed",$n.AD_CLOSED="ad-closed",$n.AD_LOADED="ad-loaded",$n.ALL_ADS_COMPLETED="all-ads-completed",$n.AD_LINEAR_CHANGED="ad-linear-changed",$n.AD_METADATA="ad-metadata",$n.AD_RECOVERABLE_ERROR="ad-recoverable-error",$n.AD_ERROR="ad-error",$n.AD_BREAK_READY="ad-break-ready",$n.AD_INTERACTION="ad-interaction",uv=function(){return new $n};function mx(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(t=m(Object.getOwnPropertyNames(n)),r=t.next();!r.done;r=t.next())u.add(r.value);for(t={},u=m(u),r=u.next();!r.done;r=u.next())r=r.value,t[r]=n[r];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(yt(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function w_(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=i6(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function i6(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var vx="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),o6="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),A_=["loop","playbackRate"],a6=["pause","play"],dv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},hv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},I_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},yx=[["getConfiguration","configure"]],Ex=[["isTextTrackVisible","setTextTrackVisibility"]],s6="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),u6=["attach","attachCanvas","detach","load","unload"];function b_(e,t,n,r,u,c,f){var h=this;this.G=e,this.K=f,this.l=new pr(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return C_(h)},this.C=function(E,S){switch(E=w_(S),E.type){case"event":var k=E.targetName,G=Im(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var ne in k[G])E[ne]=k[G][ne]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,ne=E.error,E=h.i[G],delete h.i[G],E)if(ne){G=new pt(ne.severity,ne.category,ne.code);for(k in ne)G[k]=ne[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,gp.add(this)}g=b_.prototype,g.destroy=function(){return gp.delete(this),R_(this),Ts&&Tx(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(gp),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Rr,r.s=!0,pv(r,u)}},function(t){for(var n=m(gp),r=n.next();!r.done;r=n.next())r=r.value,gv=t=="available",r.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),gv&&this.l.X(c6),(e=Ts)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,pv(this,e)):Ts=null}else p.__onGCastApiAvailable!==Sx&&(mv=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=Sx)},g.Af=function(e){this.o=e,this.h&&pp(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return Me(function(t){if(!e.m)throw new pt(1,8,8e3);if(!gv)throw new pt(1,8,8001);if(e.h)throw new pt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return pv(e,n)},function(n){return _x(e,n)}),x(t,e.j,0)})};function l6(e){e.h&&chrome.cast.requestSession(function(t){return pv(e,t)},function(t){return _x(e,t)})}g.uc=function(){if(this.h){if(R_(this),Ts){Tx(this);try{Ts.stop(function(){},function(){})}catch(e){}Ts=null}C_(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(a6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(We.apply(0,arguments))))}}else if(e=="player"){if(I_[t]&&!this.get("player","isLive")())return function(){};if(s6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(We.apply(0,arguments))))};if(u6.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(We.apply(0,arguments))))};if(dv[t]||hv[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,pp(this,{type:"set",targetName:e,property:t,value:n})};function pv(e,t){var n=e.N();Ts=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),C_(e),pp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function _x(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new pt(2,8,n,t))}g.ug=function(e,t){pp(this,{type:"call",targetName:e,methodName:t,args:We.apply(2,arguments)})},g.ii=function(e,t){var n=We.apply(2,arguments),r=new Rr,u=this.H.toString();this.H++,this.i[u]=r;try{pp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function Tx(e){var t=Ts;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function C_(e){var t=Ts?Ts.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};R_(e)}e.h=t,e.I=t?Ts.receiver.friendlyName:"",e.l.kc()}function R_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new pt(1,7,7e3))}}function pp(e,t){t=mx(t);var n=Ts;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},st)}catch(r){throw t=new pt(2,8,8005,r),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var c6=.02,gv=!1,Ts=null,mv=null,gp=new Set;function Sx(e){if(mv?p.__onGCastApiAvailable=mv:delete p.__onGCastApiAvailable,mv=null,e)for(var t=m(gp),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function Ri(e,t,n,r){r=r===void 0?!1:r,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new b_(n,function(){return Ix(u)},function(){return bx(u)},function(c,f){return Rx(u,c,f)},function(){return Cx(u)},function(){return Ax(u)},r),f6(this)}Y(Ri,Sr),g=Ri.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&gv},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return Me(function(t){return t.g==1?x(t,e.g.cast(),2):e.h?x(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){l6(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return Me(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.uc(),x(r,n.g.destroy(),2));n.g=null,n.g=new b_(e,function(){return Ix(n)},function(){return bx(n)},function(u,c){return Rx(n,u,c)},function(){return Cx(n)},function(){return Ax(n)},t),n.g.init(),X(r)})};function f6(e){e.g.init(),e.m=new Tt;for(var t=m(vx),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=Im(c),e.j.dispatchEvent(c))});for(var r in Rc)e.m.D(e.h,Rc[r],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return h6(e,c.Kc)}}(t),set:function(c){return function(f){var h=c.Kc;e.g.Ua()?e.g.set("video",h,f):e.i[h]=f}}(t)}),t={Kc:t.Kc};e.s={},wx(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return p6(e,c)}})}),d6(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function d6(e){var t=new Map;wx(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function wx(e,t){function n(E){return E=="constructor"||typeof r[E]!="function"?!1:!u.has(E)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var f=m(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function Ax(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(A_),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(yx),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(Ex),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function Ix(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function bx(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Cx(e){for(var t=m(yx),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var f;(r=e.g.get("player","getTextTracks")())&&r.length&&(f=r.find(function(S){return S.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(A_),r=n.next();!r.done;r=n.next())r=r.value,E[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var S=m(A_),k=S.next();!k.done;k=S.next())k=k.value,e.i[k]=E[k];for(S=m(Ex),k=S.next();!k.done;k=S.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),f&&e.h.yf(f.language,f.roles,f.forced),e.i.autoplay=c,u&&e.i.play()}},function(S){S=new Map().set("detail",S),S=new Wn("error",S),e.h.dispatchEvent(S)})}function h6(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function p6(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return Ve(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ve(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(dv[t]||hv[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function Rx(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}te("shaka.cast.CastProxy",Ri),Ri.prototype.changeReceiverId=Ri.prototype.Yg,Ri.prototype.forceDisconnect=Ri.prototype.uc,Ri.prototype.suggestDisconnect=Ri.prototype.zi,Ri.prototype.setAppData=Ri.prototype.Af,Ri.prototype.cast=Ri.prototype.cast,Ri.prototype.receiverName=Ri.prototype.tf,Ri.prototype.isCasting=Ri.prototype.Ua,Ri.prototype.canCast=Ri.prototype.Xg,Ri.prototype.getPlayer=Ri.prototype.uh,Ri.prototype.getVideo=Ri.prototype.Fh,Ri.prototype.destroy=Ri.prototype.destroy;function mo(e,t,n,r){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new Tt,this.H={video:e,player:t},this.C=n||function(){},this.I=r||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){x_(u)}),g6(this)}Y(mo,Sr),g=mo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return Me(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),x(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function g6(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return xx(e)},t.onSenderDisconnected=function(){return xx(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&il(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),il(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return y6(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return v6(e,u)},t.start(),t=m(vx);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return Nx(e,"video",u)});for(var r in Rc)e.j.D(e.h,Rc[r],function(u){return Nx(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,hd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,hd(e)}),e.j.D(e.g,"pause",function(){hd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,hd(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,hd(e))}).X(_6)})}function xx(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,hd(e)}function hd(e){var t;Me(function(n){if(n.g==1)return x(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),Mx(e)||ol(e),X(n)})}function m6(e,t,n){var r,u,c,f,h,E,S,k,G,ne;Me(function(z){switch(z.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ce(z,5),x(z,e.h.load(t.manifest,t.startTime),7)):x(z,Promise.resolve(),3);case 7:me(z,3);break;case 5:return f=Ce(z),h=new Map().set("detail",f),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),z.return();case 3:if(!e.h)return z.return();for(S in t.video)k=t.video[S],e.g[S]=k;for(G in t.playerAfterLoad)ne=t.playerAfterLoad[G],e.h[G](ne);e.g.autoplay=c,t.manifest&&(e.g.play(),ol(e)),X(z)}})}function Nx(e,t,n){e.h&&(x_(e),il(e,{type:"event",targetName:t,event:n},e.l))}function x_(e){e.G.X(E6);for(var t={video:{},player:{}},n=m(o6),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.R())for(var u in I_)e.m%I_[u]==0&&(t.player[u]=e.h[u]());for(var c in dv)e.m%dv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),il(e,{type:"update",update:t},e.l);for(var f in hv)e.m%hv[f]==0&&(t={player:{}},t.player[f]=e.h[f](),il(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),Mx(e)}function Mx(e){return e.A&&(e.g.duration||e.h.R())?(N_(e),e.A=!1,!0):!1}function N_(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),ol(e,t===void 0?0:t,n)}function v6(e,t){var n=w_(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,m6(e,n.initState,n.appData),x_(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,f=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return Dx(e,f,c,null)},function(h){return Dx(e,f,c,h)})}}function y6(e,t){var n=w_(t.data);switch(n.type){case"PLAY":e.g.play(),ol(e);break;case"PAUSE":e.g.pause(),ol(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),ol(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),ol(e));break;case"STOP":e.h.lc().then(function(){e.h&&ol(e)});break;case"GET_STATUS":N_(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||ol(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&N_(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),il(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:il(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Dx(e,t,n,r){e.h&&il(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function il(e,t,n,r){e.F&&(e=mx(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function ol(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?T6:e.h.Xe()?w6:e.g.paused?A6:S6,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),il(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}te("shaka.cast.CastReceiver",mo),mo.prototype.destroy=mo.prototype.destroy,mo.prototype.setContentArtist=mo.prototype.ti,mo.prototype.setContentImage=mo.prototype.ui,mo.prototype.setContentTitle=mo.prototype.wi,mo.prototype.clearContentMetadata=mo.prototype.bh,mo.prototype.setContentMetadata=mo.prototype.vi,mo.prototype.isIdle=mo.prototype.Lh,mo.prototype.isConnected=mo.prototype.isConnected;var E6=.5,_6=5,T6="IDLE",S6="PLAYING",w6="BUFFERING",A6="PAUSED";function Px(e,t,n,r,u){if(r>=u)return null;for(var c=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(Be){return Be!=null&&Be.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Be){return Be!=null&&Be.g.trim()!=""})){f=h;break}if(c===-1||f===-1)return null;for(var E=h=!1,S="white",k="black",G=M_(r,u,h,E,S,k);c<=f;c++){for(var ne=n[c],z=-1,ye=-1,Le=0;Le<ne.length;Le++)if(ne[Le]!=null&&ne[Le].g.trim()!==""){z=Le;break}for(Le=ne.length-1;0<=Le;Le--)if(ne[Le]!=null&&ne[Le].g.trim()!==""){ye=Le;break}if(z===-1||ye===-1)ne=Ox(r,u),e.nestedCues.push(ne);else{for(;z<=ye;z++)if(Le=ne[z]){var De=Le.l,He=Le.i,Se=Le.j,Qe=Le.h;(De!=h||He!=E||Se!=S||Qe!=k)&&(G.payload&&e.nestedCues.push(G),G=M_(r,u,De,He,Se,Qe),h=De,E=He,S=Se,k=Qe),G.payload+=Le.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==f&&(G=Ox(r,u),e.nestedCues.push(G)),G=M_(r,u,h,E,S,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function M_(e,t,n,r,u,c){return e=new Cn(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function Ox(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}function Lx(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function D_(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",mp(this)}function vv(e,t,n){var r="CC"+((e.A<<1|e.s)+1),u=new Cn(t,n,"");u.lineInterpretation=1;var c=R6.get(e.g);return c&&(u.line=c),Px(u,r,e.i,t,n)}function mp(e){al(e,0,15),e.g=1}function pd(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case vp:r=jx.has(n)?jx.get(n):String.fromCharCode(n);break;case Fx:r=I6.get(n);break;case Ux:e.i[e.g].pop(),r=b6.get(n);break;case Bx:e.i[e.g].pop(),r=C6.get(n)}r&&e.i[e.g].push(new Lx(r,e.m,e.j,e.o,e.l))}}function kx(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function al(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var vp=0,Fx=1,Ux=2,Bx=3,jx=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),I6=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),b6=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),C6=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),R6=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function yv(e,t){this.h=qx,this.o=new D_(e,t),this.i=new D_(e,t),this.g=this.j=new D_(e,t),this.l=0,this.m=null}function P_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==Ev&&e.h!==yp&&(u=vv(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,al(n,0,15),n=e.j,n.g=0<n.h?n.h:0,al(n,0,15),r.g=15),e.h=Ev,r.h=t,u}function Zx(e){e.h=x6,e.g=e.j,e.g.h=0}function Gx(e){St("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=yp}var qx=0,x6=1,Ev=3,yp=4,N6="black green blue cyan red yellow magenta black".split(" "),Hx="white green blue cyan red yellow magenta white_italics".split(" ");function Kx(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=P6,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",O_(this)}function O_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(L_())}function L_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Gc(e,t){Vx(e)&&(e.i[e.h][e.g]=new Lx(t,e.C,e.A,e.s,e.B),e.g++)}function Vx(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}Kx.prototype.isVisible=function(){return this.l};function qc(e,t,n){var r=new Cn(e.j,t,"");r.textAlign=e.F===M6?"left":e.F===D6?"right":kn;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case O6:u.regionAnchorX=0,u.regionAnchorY=0;break;case L6:u.regionAnchorX=50,u.regionAnchorY=0;break;case k6:u.regionAnchorX=100,u.regionAnchorY=0;break;case F6:u.regionAnchorX=0,u.regionAnchorY=50;break;case U6:u.regionAnchorX=50,u.regionAnchorY=50;break;case B6:u.regionAnchorX=100,u.regionAnchorY=50;break;case j6:u.regionAnchorX=0,u.regionAnchorY=100;break;case Z6:u.regionAnchorX=50,u.regionAnchorY=100;break;case G6:u.regionAnchorX=100,u.regionAnchorY=100}return(n=Px(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var M6=0,D6=1,P6=2,O6=0,L6=1,k6=2,F6=3,U6=4,B6=5,j6=6,Z6=7,G6=8;function q6(){this.i=[],this.h=null,this.g=0}function H6(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new _v(e.h)),e.h=null,e.g=0))}function _v(e){this.g=0,this.h=e}_v.prototype.ka=function(){return this.g<this.h.length},_v.prototype.wa=function(){return this.g};function oo(e){if(!e.ka())throw new pt(2,2,3e3);return e.h[e.g++]}_v.prototype.skip=function(e){if(this.g+e>this.h.length)throw new pt(2,2,3e3);this.g+=e};function K6(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function V6(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=oo(t).value,t=null,n=m(Ep(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=qc(u,r,e.i)),O_(u);return t}if(n===137)for(t=oo(t).value,t=m(Ep(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=oo(t).value,t=null,n=m(Ep(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=qc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=oo(t).value,t=null,n=m(Ep(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=qc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=oo(t).value,zx(e,t,r);if(n===143)return r=zx(e,255,r),Yx(e),r;if(n===144)t.skip(1),r=oo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=oo(t).value,n=oo(t).value,t.skip(1),e.g&&(t=Wx((n&48)>>4,(n&12)>>2,n&3),e.g.B=Wx((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=oo(t).value,t=oo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=oo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new Kx(n,e.i);c.j=r,e.h[n]=c}r=oo(t).value,c=oo(t).value;var f=oo(t).value,h=oo(t).value,E=oo(t).value;t=oo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=f,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function Ep(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function zx(e,t,n){var r=null;t=m(Ep(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=qc(c,n,e.i)),e.h[u]=null}return r}function Yx(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Wx(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],z6[e<<2|t<<1|n]}var $x=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),z6="black blue green cyan red magenta yellow white".split(" ");function gd(){this.h=[],this.g=[],this.i=new q6,this.l=0,this.m=new Map([["CC1",new yv(0,0)],["CC2",new yv(0,1)],["CC3",new yv(1,0)],["CC4",new yv(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,k_(this)}gd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,k_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())Yx(t.value)};function k_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=qx,n.g=n.j,n.m=null,mp(n.i),mp(n.j),mp(n.o);e.B=!0}gd.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.P(),c=(u&4)>>2,f=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:f,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},gd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=Y6(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())H6(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=W6(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function Y6(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!Xx(t.cb)||!Xx(t.vb))return 45<=++e.l&&k_(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(r),e=null,(t.cb&112)===16)e:{if(r=t.cb,e=t.vb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white";var c=!1;7>u?r=Hx[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==yp&&(u=n.g,n.h===Ev&&t!==u.g&&(n=1+t-u.h,kx(u,n,1+u.g-u.h,u.h),al(u,0,n-1),al(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",pd(n.g,vp,32),r=!1,t=Hx[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=N6[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)pd(n.g,Fx,e);else if((r&246)===18&&(e&224)===32)pd(n.g,r&1?Bx:Ux,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.vb){case 32:Zx(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=P_(n,2,e);break;case 38:r=P_(n,3,e);break;case 39:r=P_(n,4,e);break;case 40:pd(n.g,vp,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:mp(n.o),Gx(n);break;case 43:Gx(n);break;case 44:t=n.i,r=null,n.h!==yp&&(r=vv(t,n.l,e)),al(t,0,15);break;case 45:t=n.g,n.h!==Ev?r=null:(r=vv(t,n.l,e),c=t.g-t.h+1,kx(t,c-1,c,t.h),al(t,0,c-1),al(t,t.g,15-t.g),n.l=e);break;case 46:al(n.j,0,15);break;case 47:t=null,n.h!==yp&&(t=vv(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,Zx(n),n.l=e,r=t}e=r;break e}e=null}else r=t.vb,pd(n.g,vp,t.cb),pd(n.g,vp,r);return e}function W6(e,t){var n=[];try{for(;t.ka();){var r=oo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=oo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new K6(u));for(var f=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=oo(u),S=E.value,k=E.pts;if(S===16){var G=oo(u);S=S<<16|G.value}if(0<=S&&31>=S){var ne=k;if(f.g){var z=f.g;switch(u=null,S){case 8:!Vx(z)||0>=z.g&&0>=z.h||(0>=z.g?(z.g=z.m-1,z.h--):z.g--,z.i[z.h][z.g]=null);break;case 13:if(z.isVisible()&&(u=qc(z,ne,f.i)),z.h+1>=z.o){ne=z;for(var ye=0,Le=1;16>Le;Le++,ye++)ne.i[ye]=ne.i[Le];for(Le=0;1>Le;Le++,ye++)ne.i[ye]=L_()}else z.h++;z.g=0;break;case 14:z.isVisible()&&(u=qc(z,ne,f.i)),z.i[z.h]=L_(),z.g=0;break;case 12:z.isVisible()&&(u=qc(z,ne,f.i)),O_(z),ne=z,ne.h=0,ne.g=0}var De=u}else De=null}else if(128<=S&&159>=S)De=V6(f,u,S,k);else{if(4096<=S&&4127>=S)ne=S&255,8<=ne&&15>=ne?u.skip(1):16<=ne&&23>=ne?u.skip(2):24<=ne&&31>=ne&&u.skip(3);else if(4224<=S&&4255>=S)ne=S&255,128<=ne&&135>=ne?u.skip(4):136<=ne&&143>=ne&&u.skip(5);else if(32<=S&&127>=S)u=S,f.g&&(u===127?Gc(f.g,""):Gc(f.g,String.fromCharCode(u)));else if(160<=S&&255>=S)f.g&&Gc(f.g,String.fromCharCode(S));else if(4128<=S&&4223>=S){if(u=S&255,f.g)if($x.has(u)){var He=$x.get(u);Gc(f.g,He)}else Gc(f.g,"_")}else 4256<=S&&4351>=S&&f.g&&((S&255)!=160?Gc(f.g,"_"):Gc(f.g,"[CC]"));De=null}(u=De)&&n.push(u)}}}}catch(Se){if(Se instanceof pt&&Se.code===3e3)St("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Se}return n}function Xx(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}gd.prototype.getStreams=function(){return Array.from(this.A)},te("shaka.cea.CeaDecoder",gd),Mt=function(){return new gd};function Qx(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function Tv(){this.j=new Map,this.i=this.h=0,this.g=F_}Tv.prototype.init=function(e){function t(c){c=c.name,c in Sv&&(n.g=Sv[c])}var n=this,r=[],u=[];if(new Fr().box("moov",yr).box("mvex",yr).O("trex",function(c){var f=c.reader;f.skip(4),f.skip(4),c=f.M(),f=f.M(),n.h=c,n.i=f}).box("trak",yr).O("tkhd",function(c){c=Gt(c.reader,c.version),r.push(c.trackId)}).box("mdia",yr).O("mdhd",function(c){c=At(c.reader,c.version),u.push(c.timescale)}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",wi).box("sinf",yr).box("frma",function(c){c=un(c.reader).Ea,c in Sv&&(n.g=Sv[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new pt(2,2,2010);this.g==F_&&Ve("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,f){n.j.set(c,u[f])})},Tv.prototype.parse=function(e){var t=this;if(this.g==F_)return[];var n=[],r=this.h,u=this.i,c=0,f=[],h=null,E=9e4;return new Fr().box("moof",function(S){c=S.start,f=[],yr(S)}).box("traf",yr).O("trun",function(S){S=Xt(S.reader,S.version,S.flags),f.push(S)}).O("tfhd",function(S){S=rr(S.reader,S.flags),r=S.Wf||t.h,u=S.fh||t.i,S=S.trackId,t.j.has(S)&&(E=t.j.get(S))}).O("tfdt",function(S){h=ir(S.reader,S.version).baseMediaDecodeTime}).box("mdat",function(S){if(h===null)throw Ve("Unable to find base media decode time for CEA captions!"),new pt(2,2,2010);$6(t,S.reader,h,E,r,u,c-S.start-8,f,n)}).parse(e,!1),n};function $6(e,t,n,r,u,c,f,h,E){var S=0,k=c,G=h.map(function(ye){return ye.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(f+h[0].eh);t.ka();){f=t.M();var ne=t.P(),z=null;switch(z=!1,h=1,e.g){case _p:z=ne&31,z=z==6;break;case Tp:h=2,t.skip(1),z=ne>>1&63,z=z==39||z==40;break;default:return}if(z)for(ne=0,S<G.length&&(ne=G[S].he||0),ne=(n+ne)/r,h=m(Qx(t.sb(f-h))),z=h.next();!z.done;z=h.next())E.push({packet:z.value,pts:ne});else try{t.skip(f-h)}catch(ye){break}k-=f+4,k==0&&(n=S<G.length?n+(G[S].wf||u):n+u,S++,S<G.length?k=G[S].sampleSize||c:k=c)}}te("shaka.cea.Mp4CeaParser",Tv);var F_=0,_p=1,Tp=2,Sv={avc1:_p,avc3:_p,hev1:Tp,hvc1:Tp,dvav:_p,dva1:_p,dvh1:Tp,dvhe:Tp};Yt["video/mp4"]=function(){return new Tv};function wv(){this.g=null}wv.prototype.init=function(){},wv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new ze;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),r=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(Qx(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},te("shaka.cea.TsCeaParser",wv),Yt["video/mp2t"]=function(){return new wv};function Jx(e,t,n){var r=t5(e),u=null;e=[];var c=[],f=null,h=new Set(r.map(function(S){return S.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new pt(2,4,4010);if(!t){if(c=r.filter(function(S){return S.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new pt(2,4,4050);c.length&&(f=r5(c[0])),(c=r.find(function(S){return S.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=r.filter(function(S){return S.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=S.init||u,!1):S.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=e5(u,E,c,n,h),e.length==0&&(e=[ku("",E,u)]))}if(r.length&&!f&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(ku(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:f,Zf:!0}}function X6(e,t,n,r){var u=Jx(e,n,r);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(f){return f.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new pt(2,4,4008);return u.Vf||t.Vf}function Q6(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function J6(e){e=m(Ia(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ci(n)}return""}function Av(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Fs(e.node,"urn:microsoft:playready","pro"),!e||!Ci(e)||(e=Ci(e),e=qo(e),e=Q6(e).filter(function(n){return n.type===i5})[0],!e)?"":(e=qa(e.value,!0),(e=Fl(e,"WRMHEADER"))?J6(e):""))}function e5(e,t,n,r,u){var c=[];n=m(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=r[f.Dc];if(h){var E;if((E=Fs(f.node,"urn:microsoft:playready","pro"))&&Ci(E)){E=Ci(E),E=qo(E);var S=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:Hf(E,S,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else E=null;if(S=null,f.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(S=u,S.size==0)S=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);S=[{initData:Hf(G,k,S,1),initDataType:"cenc",keyId:f.keyId}]}E=ku(h,t,f.init||e||E||S),(h=o5.get(h))&&(E.licenseServerUri=h(f)),c.push(E)}}return c}function t5(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n5(n.value))&&t.push(n);return t}function n5(e){var t=e.attributes.schemeIdUri,n=yu(e,"urn:mpeg:cenc:2013","default_KID"),r=Vf(e,"urn:mpeg:cenc:2013","pssh").map(vu),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new pt(2,4,4009);var c=[];try{c=r.map(function(f){return{initDataType:"cenc",initData:qo(f),keyId:null}})}catch(f){throw new pt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function r5(e){if(!p.crypto||!p.crypto.subtle)throw Ve("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var t=Fs(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new pt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new pt(2,4,4051);if(t=Fs(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new pt(2,4,4051);if(e=t.attributes.IV,t=Io(t.attributes.keyUriTemplate),!e||!t)throw new pt(2,4,4051);if(e=du(e.substr(2)),e.byteLength!=16)throw new pt(2,4,4048);return{Rh:t,iv:e}}var i5=1,o5=new Map().set("com.widevine.alpha",function(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Fs(e.node,"urn:microsoft","laurl"))&&Io(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Av).set("com.microsoft.playready.recommendation",Av).set("com.microsoft.playready.software",Av).set("com.microsoft.playready.hardware",Av).set("org.w3.clearkey",function(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Fs(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ci(e))?e:""});function Iv(e,t,n,r,u,c){var f={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,S,k){if(h=="$$")return"$";var G=f[E];if(G==null)return h;switch(E=="RepresentationID"&&S&&(S=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&Ve("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return S=p.parseInt(S,10)||1,Array(Math.max(0,S-h.length)+1).join("0")+h})}function eN(e,t){var n=Tu(e,t,"timescale"),r=1;n&&(r=Us(n)||1),n=Tu(e,t,"duration"),(n=Us(n||""))&&(n/=r);var u=Tu(e,t,"startNumber"),c=Number(Tu(e,t,"presentationTimeOffset"))||0,f=Co(u||"");(u==null||f==null)&&(f=1);var h=bv(e,t,"SegmentTimeline");if(t=null,h){t=r,e=e.ha.duration||1/0,u=f,h=Wr(h,"S");for(var E=[],S=-c,k=0;k<h.length;++k){var G=h[k],ne=h[k+1],z=_r(G,"t",Co),ye=_r(G,"d",Co),Le=_r(G,"r",Xu);if(G=_r(G,"k",Xu)||0,z!=null&&(z-=c),!ye)break;if(z=z!=null?z:S,Le=Le||0,0>Le)if(ne){if(ne=_r(ne,"t",Co),ne==null)break;if(z>=ne)break;Le=Math.ceil((ne-z)/ye)-1}else{if(e==1/0)break;if(z/t>=e)break;Le=Math.ceil((e*t-z)/ye)-1}for(0<E.length&&z!=S&&(E[E.length-1].end=z/t),ne=0;ne<=Le;++ne)S=z+ye,E.push({start:z/t,end:S/t,Kf:z,rb:G,ri:E.length+u}),z=S}t=E}return{timescale:r,Da:n,rd:f,Bb:c/r||0,Jf:c,timeline:t}}function tN(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(Bu)}function Tu(e,t,n){t=tN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function bv(e,t,n){t=tN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=ua(r.value,n));r=t.next());return e}function a5(e,t,n,r,u,c){for(var f=yu(e,"http://www.w3.org/1999/xlink","href"),h=yu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),S=E.next();!S.done;S=E.next()){S=S.value;var k=S.split(":"),G=Dc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[S]}if(5<=c)return pu(new pt(2,4,4028));if(h!="onLoad")return pu(new pt(2,4,4027));var ne=co([r],[f]);return u.request(0,Oi(ne,t)).va(function(z){if(z=Yh(z.data,e.tagName),!z)return pu(new pt(2,4,4001,f));for(e.children=[];z.children.length;){var ye=z.children.shift();ye.tagName&&(ye.parent=e),e.children.push(ye)}ye=m(Object.keys(z.attributes));for(var Le=ye.next();!Le.done;Le=ye.next())Le=Le.value,e.attributes[Le]=z.attributes[Le];return Cv(e,t,n,ne[0],u,c+1)})}function Cv(e,t,n,r,u,c){if(c=c===void 0?0:c,yu(e,"http://www.w3.org/1999/xlink","href")){var f=a5(e,t,n,r,u,c);return n&&(f=f.va(void 0,function(){return Cv(e,t,n,r,u,c)})),f}f=[];for(var h={},E=m(ME(e)),S=E.next();!S.done;h={pc:h.pc},S=E.next())h.pc=S.value,yu(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&f.push(Cv(h.pc,t,n,r,u,c));return Zf(f).va(function(){return e})}function s5(e,t,n,r,u,c,f){var h,E=new Fr().O("sidx",function(S){h=u5(t,r,u,c,f,n,S)});if(e&&E.parse(e),h)return h;throw new pt(2,3,3004)}function u5(e,t,n,r,u,c,f){var h=[];f.reader.skip(4);var E=f.reader.M();if(E==0)throw new pt(2,3,3005);if(f.version==0)var S=f.reader.M(),k=f.reader.M();else S=f.reader.Cc(),k=f.reader.Cc();f.reader.skip(2);var G=f.reader.ra();for(e=e+f.size+k,k=0;k<G;k++){var ne=f.reader.M(),z=(ne&2147483648)>>>31;ne&=2147483647;var ye=f.reader.M();if(f.reader.skip(4),z==1)throw new pt(2,3,3006);h.push(new et(S/E+n,(S+ye)/E+n,function(){return c},e,e+ne-1,t,n,r,u)),S+=ye,e+=ne}return f.parser.stop(),h}function Bl(e){this.h=tn(e),this.g=new Dr(this.h,0)}Bl.prototype.ka=function(){return this.g.ka()};function sl(e){var t=nN(e);if(7<t.length)throw new pt(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=nN(e);e:{r=m(l5);for(var u=r.next();!u.done;u=r.next())if(zi(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new pt(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),r=tn(e.h,e.g.wa(),t),e.g.skip(t),new c5(n,r)}function nN(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new pt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var l5=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function c5(e,t){this.id=e,this.g=t}function U_(e){if(8<e.g.byteLength)throw new pt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new pt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function f5(e,t,n,r,u,c,f,h,E){function S(){return u}var k=[];e=new Bl(e.g);for(var G=null,ne=null;e.ka();){var z=sl(e);if(z.id==187){var ye=d5(z);ye&&(z=n*ye.Di,ye=t+ye.gi,G!=null&&k.push(new et(G+f,z+f,S,ne,ye-1,c,f,h,E)),G=z,ne=ye)}}return G!=null&&k.push(new et(G+f,r+f,S,ne,null,c,f,h,E)),k}function d5(e){var t=new Bl(e.g);if(e=sl(t),e.id!=179)throw new pt(2,3,3013);if(e=U_(e),t=sl(t),t.id!=183)throw new pt(2,3,3012);t=new Bl(t.g);for(var n=0;t.ka();){var r=sl(t);if(r.id==241){n=U_(r);break}}return{Di:e,gi:n}}function rN(e,t,n){if(t=bv(e,t,"Initialization"),!t)return null;var r=e.J.nb(),u=t.attributes.sourceURL;u&&(r=co(r,[Io(u)])),u=0;var c=null;return(t=_r(t,"range",Yf))&&(u=t.start,c=t.end),n=new dt(function(){return r},u,c,sN(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function h5(e,t,n){var r=Number(Tu(e,md,"presentationTimeOffset"))||0,u=Tu(e,md,"timescale"),c=1;u&&(c=Us(u)||1);var f=r/c||0,h=rN(e,md,n);p5(e,h);var E=cm(e);return{vc:function(){var S=bv(E,md,"RepresentationIndex"),k=E.J.nb();return S&&(S=Io(S.attributes.sourceURL))&&(k=co(k,[S])),S=oN(E),iN(E,t,h,k,S.start,S.end,f)}}}function iN(e,t,n,r,u,c,f){var h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt;return Me(function(_t){if(_t.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,S=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],ne=t,z=null,ye=[ne(r,u,c,!1),G=="webm"?ne(n.$(),n.Aa,n.ja,!0):null],ne=null,x(_t,Promise.all(ye),2);if(Le=_t.h,De=Le[0],He=Le[1]||null,Se=null,Qe=S-f,Be=S,vt=k?S+k:1/0,G=="mp4")var Zt=s5(De,u,r,n,Qe,Be,vt);else{if(Zt=new Bl(He),sl(Zt).id!=440786851)throw new pt(2,3,3008);var ln=sl(Zt);if(ln.id!=408125543)throw new pt(2,3,3009);Zt=ln.g.byteOffset,ln=new Bl(ln.g);for(var pn=null;ln.ka();){var Ln=sl(ln);if(Ln.id==357149030){pn=Ln;break}}if(!pn)throw new pt(2,3,3010);for(pn=new Bl(pn.g),Ln=1e6,ln=null;pn.ka();){var Mn=sl(pn);if(Mn.id==2807729)Ln=U_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)ln=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)ln=Mn.g.getFloat64(0);else throw new pt(2,3,3003)}if(ln==null)throw new pt(2,3,3011);if(pn=Ln/1e9,ln*=pn,Ln=sl(new Bl(De)),Ln.id!=475249515)throw new pt(2,3,3007);Zt=f5(Ln,Zt,pn,ln,r,n,Qe,Be,vt)}for(Se=Zt,xt=m(Se),Vt=xt.next();!Vt.done;Vt=xt.next())Bt=Vt.value,Bt.codecs=e.J.codecs,Bt.mimeType=e.J.mimeType;return h.ld(Se),z=new wr(Se),E&&z.sc(Be,vt,!0),_t.return(z)})}function md(e){return e.pd}function oN(e){var t=bv(e,md,"RepresentationIndex");return e=Tu(e,md,"indexRange"),e=Yf(e||""),t&&(e=_r(t,"range",Yf,e)),e}function p5(e,t){if(aN(e,t),!oN(e))throw new pt(2,4,4002)}function aN(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=vr&&n!="mp4"&&n!="webm")throw new pt(2,4,4006);if(n=="webm"&&!t)throw new pt(2,4,4005)}function sN(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function g5(e,t,n){var r=rN(e,uN,n),u=m5(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new pt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new pt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new pt(2,4,4002);var c=null,f=null;e.za.id&&e.J.id&&(f=t[e.za.id+","+e.J.id])&&(c=f.segmentIndex);var h=v5(e.ha.start,e.ha.duration,e.J.nb,u,r,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),f&&(f.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function uN(e){return e.Jb}function m5(e){var t=y5(e);e=eN(e,uN);var n=e.rd;n==0&&(n=1);var r=0;return e.Da?r=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Da:e.Da,startTime:r,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function v5(e,t,n,r,u,c,f,h){var E=r.yc.length;r.timeline&&r.timeline.length!=r.yc.length&&(E=Math.min(r.timeline.length,r.yc.length));for(var S=e-r.Bb,k=t?e+t:1/0,G=[],ne=r.startTime,z={},ye=0;ye<E;z={Sc:z.Sc,Oc:z.Oc},ye++){z.Oc=r.yc[ye];var Le=ne;ne=void 0,ne=r.Da!=null?Le+r.Da:r.timeline?r.timeline[ye].end:Le+t,z.Sc=null,Le=new et(e+Le,e+ne,function(De){return function(){return De.Sc==null&&(De.Sc=co(n(),[De.Oc.Xh])),De.Sc}}(z),z.Oc.start,z.Oc.end,u,S,e,k,[],"",null,null,jt,c),Le.codecs=h,Le.mimeType=f,G.push(Le)}return G}function y5(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(Bu).map(function(t){return Wr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=Io(t.attributes.media);return t=_r(t,"mediaRange",Yf,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function E5(e,t,n,r,u,c,f,h){var E=w5(e,f),S=_5(e);T5(S);var k=cm(e);if(S.hd)return aN(e,E),{vc:function(){var Le=Iv(S.hd,k.J.id,null,null,k.bandwidth||null,null);return Le=co(k.J.nb(),[Le]),iN(k,t,E,Le,0,null,S.Bb)}};if(S.Da)return r||e.ua.contentType==="image"||(e.presentationTimeline.hf(S.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return S5(k,S,u,E,c,f,h)}};var G=null;r=r=null,e.za.id&&e.J.id&&(r=e.za.id+","+e.J.id,r=n[r])&&(G=r.segmentIndex);var ne=e.ha.start,z=e.ha.duration?ne+e.ha.duration:1/0,ye=!(e.Eb&&e.ha.Ye);return G?(n=G,lN(n,S,ne,z,ye,E),n.La(e.presentationTimeline.qb())):G=new xv(S,e.J.id,e.bandwidth,e.J.nb,ne,z,E,ye,f,e.J.xf),S.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(S.timeline,ne),r&&e.Eb&&(r.segmentIndex=G),{vc:function(){return G instanceof xv&&G.getNumReferences()==0&&lN(G,S,ne,z,ye,E),Promise.resolve(G)}}}function Rv(e){return e.qd}function _5(e){var t=eN(e,Rv),n=Tu(e,Rv,"media"),r=Tu(e,Rv,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&Io(n),hd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function T5(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new pt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new pt(2,4,4002)}function S5(e,t,n,r,u,c,f){function h(ln){var pn=(ln-Le)*ye,Ln=pn+t.Bb,Mn=pn+G;pn=Mn+ye;var qn=Math.min(pn,S());return Mn=new et(Mn,qn,function(){var Yn=Ln*De;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(De)),Yn=Iv(He,Qe,ln,null,Se,Yn),co(Be(),[Yn])},0,null,r,vt,G,S(),[],"",null,null,jt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=pn,Mn}function E(){var ln=[Math.max(k.qb(),G),Math.min(k.Gb(),S())].map(function(pn){return pn-G});return ln=[Math.ceil(ln[0]/ye),Math.ceil(ln[1]/ye)-1],e.J.Qb&&ln[1]++,ln.map(function(pn){return pn+Le})}function S(){var ln=ne!=null&&u[ne]||z;return ln?G+ln:1/0}var k=e.presentationTimeline,G=e.ha.start,ne=e.za.id,z=e.ha.duration,ye=t.Da,Le=t.rd,De=t.timescale,He=t.zc,Se=e.bandwidth||null,Qe=e.J.id,Be=e.J.nb,vt=G-t.Bb,xt=E();n=e.Eb?Math.max(xt[0],xt[1]-n+1):xt[0],f=f||xt[1],xt=[];for(var Vt=n;Vt<=f;++Vt){var Bt=h(Vt);xt.push(Bt)}var _t=new wr(xt);if(xt=k.Gb()<S(),Vt=k.R(),xt||Vt){var Zt=Math.max(n,f+1);_t.ke(ye,function(){var ln=k.qb();_t.La(ln);var pn=m(E());pn.next(),pn=pn.next().value;for(var Ln=[];Zt<=pn;){var Mn=h(Zt);Ln.push(Mn),Zt++}return ln>S()&&!Ln.length?null:Ln})}return Promise.resolve(_t)}function w5(e,t){var n=Tu(e,Rv,"initialization");if(!n)return null;n=Io(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new dt(function(){var f=Iv(n,r,null,null,u,null);return co(c(),[f])},0,null,sN(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function xv(e,t,n,r,u,c,f,h,E,S){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.i=u,this.l=c,this.s=f,this.A=E,this.G=S,h&&cN(this)}Y(xv,wr),g=xv.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.i<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function lN(e,t,n,r,u,c){if(A5(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;u&&cN(e)}function A5(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ht(n,t)}}function cN(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.i;if(u=r<n?t[r+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return r+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.zc,u=this.h.timeline[e],c=u.ri,f=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var S=this.h.codecs,k=this.h.mimeType,G=[],ne=(u.end-u.start)/u.rb,z={},ye=0;ye<u.rb;z={Tc:z.Tc,se:z.se},ye++){var Le=u.start+ne*ye,De=Le+ne;z.se=ye+1,z.Tc=null,Le=new et(this.i+Le,this.i+De,function(He){return function(){return t.h?(He.Tc==null&&(He.Tc=fN(t.h.zc,t.F,c,t.B,f,He.se,t.C)),He.Tc):[]}}(z),0,null,this.s,n,this.i,this.l,[],"",null,null,jt,this.A),Le.codecs=S,Le.mimeType=k,this.G==0?0<ye&&Le.Zd():ye%this.G!=0&&Le.Zd(),G.push(Le)}n=new et(this.i+u.start,E,function(){return 0<u.rb?[]:fN(r,t.F,c,t.B,f,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,jt,this.A,0<u.rb),n.codecs=S,n.mimeType=k,n.i=h,this.g[e]=n}return n};function fN(e,t,n,r,u,c,f){return e=Iv(e,t,n,c,r||null,u),co(f(),[e]).map(function(h){return h.toString()})}function vd(e){this.o=null,this.A=e,this.G=new Ol,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}vd.prototype.configure=function(e){this.o=e},vd.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},vd.prototype.setManifestType=function(e){this.s=e};function Sp(e,t){var n,r,u,c,f,h,E;return Me(function(S){if(S.g==1)return n=co(e.i,[I5(e,t)]),r=Oi(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),gu(e.G,u),ce(S,2),x(S,u.promise,4);if(S.g!=2)return c=S.h,f=Vr(c.data),h=JSON.parse(f),h.VERSION==1&&b5(e,h,c.uri),me(S,0);if((E=Ce(S))&&E.code==7001)return S.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){Sp(e,t)}),e.g.X(e.C),X(S)})}function I5(e,t){if(!e.m.length)return t;t=new si(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),na(u)&&hr(t,u),t.toString()}function b5(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new pr(function(){Sp(e,r)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function yd(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}vd.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function wp(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u={},c=m(e.m),f=c.next();!f.done;u={Pb:u.Pb},f=c.next())if(u.Pb=f.value,f=t.get(u.Pb))r.push({rf:u.Pb,location:f});else if(f=e.F.find(function(E){return function(S){return S.Vi==E.Pb}}(u))){var h=t.get(f["BASE-ID"]);h&&(f["URI-REPLACEMENT"].Ng?(h=new si(h),_n(h,f["URI-REPLACEMENT"].Ng),r.push({rf:u.Pb,location:h.toString()})):r.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),f=c.next();!f.done;f=c.next())f=f.value,h=e.j.get(f),u>h&&e.j.delete(f);if(r=r.filter(function(E){for(var S=m(e.j.keys()),k=S.next();!k.done;k=S.next())if(k.value.includes(new si(E.location).wb))return!1;return!0}),r.length&&(e.B=r[0].rf),r=r.map(function(E){return E.location}),!r.length&&e.h)for(u=m(e.h.split(",")),f=u.next();!f.done;f=u.next())(c=t.get(f.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:co(e.i,r)}function Ko(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Ko.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function dN(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(G){return[G_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[Z_(G),G]})),S=new Map(h.textStreams.map(function(G){return[Cp(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[Rp(G),G]})),t){var k=yN(vr);S.set(Cp(k),k),k=yN("image"),h.set(Rp(k),k)}n.push(f),r.push(E),u.push(S),c.push(h)}return{Pf:n,Lg:r,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn;return Me(function(Yn){if(Yn.g==1){if(r=yi,!t&&e.length==1)return u=dN(e,!1),c=u.Pf,f=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(f[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(S=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),S==-1&&(S=k));return S==-1?Yn.return():(ne=dN(e,!0),z=ne.Pf,ye=ne.Lg,Le=ne.Ig,De=ne.hg,x(Yn,Promise.all([jl(n,n.h,z,S,Ap,Ed),jl(n,n.g,ye,S,Ap,Ed),jl(n,n.l,Le,S,Ap,Ed),jl(n,n.i,De,S,Ap,Ed)]),2))}if(He=0,Se=[],n.g.length&&n.h.length)for(Bt=m(n.h),_t=Bt.next();!_t.done;_t=Bt.next())for(Zt=_t.value,ln=m(n.g),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=fe(Zt.drmInfos,Ln.drmInfos),Zt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=He++,Se.push({id:qn,language:Zt.language,disabledUntilTime:0,primary:Zt.primary,audio:Zt,video:Ln,bandwidth:(Zt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(Qe=n.g.length?n.g:n.h,Be=m(Qe),vt=Be.next();!vt.done;vt=Be.next())xt=vt.value,Vt=He++,Se.push({id:Vt,language:xt.language,disabledUntilTime:0,primary:xt.primary,audio:xt.type==r.S?xt:null,video:xt.type==r.fa?xt:null,bandwidth:xt.bandwidth||0,drmInfos:xt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Se,X(Yn)})};function hN(e){var t,n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return Me(function(qn){switch(qn.g){case 1:if(t=yi,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.S}).map(function(Kn){return[G_(Kn),Kn]}))}),r=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.fa}).map(function(Kn){return[Z_(Kn),Kn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ma}).map(function(Kn){return[Cp(Kn),Kn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ue}).map(function(Kn){return[Rp(Kn),Kn]}))}),f=m(u),h=f.next();!h.done;h=f.next())E=h.value,S=vN(t.ma),E.set(Cp(S),S);for(k=m(c),G=k.next();!G.done;G=k.next())ne=G.value,z=vN(t.ue),ne.set(Rp(z),z);return ye=new Ko,x(qn,jl(ye,[],n,0,Nv,Mv),2);case 2:return Le=qn.h,x(qn,jl(ye,[],r,0,Nv,Mv),3);case 3:return De=qn.h,x(qn,jl(ye,[],u,0,Nv,Mv),4);case 4:return He=qn.h,x(qn,jl(ye,[],c,0,Nv,Mv),5);case 5:if(Se=qn.h,Qe=0,De.length&&Le.length)for(Bt=m(Le),_t=Bt.next();!_t.done;_t=Bt.next())for(Zt=_t.value,ln=m(De),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=Qe++,Ln.variantIds.push(Mn),Zt.variantIds.push(Mn);else for(Be=De.concat(Le),vt=m(Be),xt=vt.next();!xt.done;xt=vt.next())Vt=xt.value,Vt.variantIds=[Qe++];return qn.return(De.concat(Le).concat(He).concat(Se))}})}function jl(e,t,n,r,u,c){var f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt;return Me(function(Bt){switch(Bt.g){case 1:for(f=[],h=0;h<r;h++)f.push(new Set);for(E=r;E<n.length;E++)f.push(new Set(n[E].values()));S=m(t),k=S.next();case 2:if(k.done){Bt.u(4);break}return G=k.value,x(Bt,C5(e,G,n,r,c,f),5);case 5:if(ne=Bt.h,!ne)throw new pt(2,4,4037);k=S.next(),Bt.u(2);break;case 4:for(z=m(f),ye=z.next();!ye.done;ye=z.next())for(Le=ye.value,De=m(Le),He=De.next();!He.done;He=De.next())Se=He.value,(Qe=R5(e,Se,n,u,c,f))&&t.push(Qe);for(Be=m(f),ye=Be.next();!ye.done;ye=Be.next())for(vt=ye.value,xt={},Vt=m(vt),He=Vt.next();!He.done;xt={Bd:xt.Bd},He=Vt.next())if(xt.Bd=He.value,!j_(xt.Bd)&&t.some(function(_t){return function(Zt){return B_(e,_t.Bd,Zt)}}(xt)))throw new pt(2,4,4037);return Bt.return(t)}})}function C5(e,t,n,r,u,c){return Me(function(f){return f.g==1?(mN(e,n,t),t.matchedStreams?t.segmentIndex?x(f,pN(t,r),2):f.u(2):f.return(!1)):(gN(t,r,u,c),f.return(!0))})}function pN(e,t){var n,r,u,c,f,h,E;return Me(function(S){if(S.g==1){for(n=[],r=e.matchedStreams,u=m(r),c=u.next();!c.done;c=u.next())f=c.value,n.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&n.push(f.trickModeVideo.createSegmentIndex());return x(S,Promise.all(n),2)}if(e.segmentIndex instanceof Ei)for(h=t;h<r.length;h++)E=r[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);X(S)})}function R5(e,t,n,r,u,c){if(j_(t))return null;var f=r(t);return mN(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return Me(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new Ei,x(h,pN(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(gN(f,0,u,c),f)}function gN(e,t,n,r){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var f=!0;if(e.type=="audio"&&Gu(e.language,c.language)==0&&(f=!1),f&&(r[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),f=c.next();!f.done;f=c.next())e.fullMimeTypes.add(f.value)}}function Ap(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Nv(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Ed(e,t){function n(f,h){f||(f=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,f.includes(E)||f.push(E);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=fe(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new pt(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Ap(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Ed(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Ed(e.trickModeVideo,t)}function Mv(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function mN(e,t,n){var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=x5(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function x5(e,t,n){var r={audio:G_,video:Z_,text:Cp,image:Rp}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(S,k){return B_(e,S,k)},video:function(S,k){return B_(e,S,k)},text:N5,image:M5}[n.type];for(var f={audio:D5,video:P5,text:O5,image:L5}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!f(n,u,E)||(u=E)}return e.o&&!j_(u)&&t.delete(r(u)),u}function Ip(e,t){function n(r){if(!q_.has(r)){var u=wa(r);q_.set(r,u)}return q_.get(r)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function B_(e,t,n){return!(!Ip(t,n)&&!e.m||t.drmInfos&&!re(t.drmInfos,n.drmInfos))}function N5(e,t){return t.language?!(e.forced!==t.forced||Gu(e.language,t.language)==0||t.kind!=e.kind):!0}function M5(){return!0}function D5(e,t,n){var r=Ip(e,t),u=Ip(e,n);if(r&&!u)return!1;if(!r&&u||(r=Gu(e.language,t.language),u=Gu(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length?!0:u.length<r.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=bp(e.channelsCount,t.channelsCount,n.channelsCount),r==Ks?!0:r==ul?!1:(r=bp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Ks?!0:r==ul?!1:!!(e.bandwidth&&EN(e.bandwidth,t.bandwidth,n.bandwidth)==Ks)))}function P5(e,t,n){var r=Ip(e,t),u=Ip(e,n);if(r&&!u)return!1;if(!r&&u||(r=bp(e.width*e.height,t.width*t.height,n.width*n.height),r==Ks))return!0;if(r==ul)return!1;if(e.frameRate){if(r=bp(e.frameRate,t.frameRate,n.frameRate),r==Ks)return!0;if(r==ul)return!1}return!!(e.bandwidth&&EN(e.bandwidth,t.bandwidth,n.bandwidth)==Ks)}function O5(e,t,n){var r=Gu(e.language,t.language),u=Gu(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function L5(e,t,n){return bp(e.width*e.height,t.width*t.height,n.width*n.height)==Ks}function vN(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function yN(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function bp(e,t,n){if(t==e&&e!=n)return ul;if(n==e&&e!=t)return Ks;if(t>e){if(n<=e||n-e<t-e)return Ks;if(n-e>t-e)return ul}else{if(n>e)return ul;if(e-n<e-t)return Ks;if(e-n>e-t)return ul}return _N}function EN(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Ks:t<e?ul:_N}function j_(e){switch(e.type){case vr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Z_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function G_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Cp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Rp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}te("shaka.util.PeriodCombiner",Ko),Ko.prototype.setUseStreamOnce=Ko.prototype.Fg,Ko.prototype.setAllowMultiTypeVariants=Ko.prototype.yg,Ko.prototype.combinePeriods=Ko.prototype.Sf,Ko.prototype.getImageStreams=Ko.prototype.nh,Ko.prototype.getTextStreams=Ko.prototype.Ve,Ko.prototype.getVariants=Ko.prototype.Eh;var Ks=1,_N=0,ul=-1,q_=new Map;function k5(e,t){var n=new DOMParser,r=F5.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function TN(e,t){try{var n=Ha(e);return k5(n,t)}catch(r){return null}}var F5=new ra(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Dv(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Ko,this.G=0,this.H=new M(5),this.A=new pr(function(){H5(e)}),this.F=new Ol,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=Dv.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,r;return Me(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,x(u,H_(n),2);if(r=u.h,n.i&&K_(n,r),!n.i)throw new pt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return Me(function(n){if(n.g==1)return ce(n,2),x(n,H_(e),4);if(n.g!=2)return me(n,0);if(t=Ce(n),!e.i||!t)return n.return();e.i.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,K_(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function H_(e){var t,n,r,u,c,f,h;return Me(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=wp(e.h,"Location",!0),n.length&&(t=n)),r=Oi(t,e.g.retryParameters),u=Date.now(),x(E,z_(e,r,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),x(E,U5(e,c.data,c.uri),3)):E.return(0)):(f=Date.now(),h=(f-u)/1e3,e.H.sample(1,h),E.return(h))})}function U5(e,t,n){var r,u,c,f,h,E,S,k,G,ne;return Me(function(z){if(z.g==1){if(r=t,u=e.g.dash.manifestPreprocessor,c=Ym,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),f=TN(r,"MPD"),!f)throw new pt(2,4,4001,n);u(f),r=Ka(f.outerHTML)}if(h=Yh(r,"MPD"),!h)throw new pt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,S=Wm,E!=S&&E(h),e.g.dash.disableXlinkProcessing?z.return(SN(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=Cv(h,e.g.retryParameters,k,n,e.i.networkingEngine),gu(e.F,G),x(z,G.promise,2))}return ne=z.h,z.return(SN(e,ne,n))})}function SN(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi,Gr,fo,Fo,ai,zs,Yc,Wc,Rd,ll,Ys,cl,Kl,xd,Nd,py,Md,Hp,gy;return Me(function(Ss){switch(Ss.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,f=Wr(t,"Location"),h=m(f),E=h.next();!E.done;E=h.next())S=E.value,k=S.attributes.serviceLocation,(G=vu(S))&&(ne=co(r,[G])[0],k&&(e.h?yd(e.h,"Location",k,ne):c.set(k,ne)),u.push(ne));if(e.h?(z=wp(e.h,"Location",!0),0<z.length&&(r=e.o=z)):u.length&&(r=e.o=u),ye=Promise.resolve(),(Le=ua(t,"ContentSteering"))&&e.i)for(De=Le.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=De):(e.h=new vd(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=De,(He=vu(Le))&&(_r(Le,"queryBeforeStart",Wh,!1)?ye=Sp(e.h,He):Sp(e.h,He))),Se=m(c.keys()),Qe=Se.next();!Qe.done;Qe=Se.next())Be=Qe.value,vt=c.get(Be),yd(e.h,"Location",Be,vt);if(xt=Wr(t,"BaseURL"),Bt=!1,e.h)for(_t=m(xt),Zt=_t.next();!Zt.done;Zt=_t.next())ln=Zt.value,pn=ln.attributes.serviceLocation,Ln=vu(ln),pn&&Ln&&(yd(e.h,"BaseURL",pn,Ln),Bt=!0);if(Bt&&e.h||(Mn=xt.map(vu),Vt=co(r,Mn)),qn=function(){return e.h&&Bt?wp(e.h,"BaseURL"):Vt||[]},Yn=0,xt&&xt.length&&(Yn=_r(xt[0],"availabilityTimeOffset",Pc)||0),Kn=e.g.dash.ignoreMinBufferTime,Nr=0,Kn||(Nr=_r(t,"minBufferTime",Wa)||0),e.G=_r(t,"minimumUpdatePeriod",Wa,-1),fi=_r(t,"availabilityStartTime",zf),Li=_r(t,"timeShiftBufferDepth",Wa),ci=e.g.dash.ignoreSuggestedPresentationDelay,gi=null,ci||(gi=_r(t,"suggestedPresentationDelay",Wa)),Gr=e.g.dash.ignoreMaxSegmentDuration,fo=null,Gr||(fo=_r(t,"maxSegmentDuration",Wa)),Fo=t.attributes.type||"static",e.j)for(ai=e.j.presentationTimeline,zs=m(Object.values(e.m)),Yc=zs.next();!Yc.done;Yc=zs.next())Wc=Yc.value,Wc.segmentIndex&&Wc.segmentIndex.La(ai.qb());else Rd=e.g.defaultPresentationDelay||1.5*Nr,ll=gi!=null?gi:Rd,ai=new tr(fi,ll,e.g.dash.autoCorrectDrift);return ai.Ec(Fo=="static"),ai.R()&&!isNaN(e.g.availabilityWindowOverride)&&(Li=e.g.availabilityWindowOverride),Li==null&&(Li=1/0),ai.je(Li),Ys=t.attributes.profiles||"",cl={Eb:Fo!="static",presentationTimeline:ai,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Ys.split(",")},Kl=j5(e,cl,qn,t),xd=Kl.duration,Nd=Kl.periods,Fo!="static"&&Kl.Xf||ai.Za(xd||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?ai.zg(e.C):e.C&&Ve("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ai.hf(fo||1),x(Ss,e.l.Sf(Nd,cl.Eb),2);case 2:return x(Ss,ye,3);case 3:if(e.s&&(Nr=0,py=gi!=null?gi:e.g.defaultPresentationDelay,ai.Bf(py)),e.j){e.j.variants=e.l.j,Md=e.l.Ve(),0<Md.length&&(e.j.textStreams=Md),e.j.imageStreams=e.l.i,e.i.filter(e.j),Ss.u(4);break}if(e.j={presentationTimeline:ai,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:Nr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:B5(t)},!ai.Kg()){Ss.u(5);break}return Hp=Wr(t,"UTCTiming"),x(Ss,Y5(e,qn,Hp),6);case 6:if(gy=Ss.h,!e.i)return Ss.return();ai.Ag(gy);case 5:ai.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),X(Ss)}})}function B5(e){var t=ua(e,"ServiceDescription");return t?(e=ua(t,"Latency"),t=ua(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function j5(e,t,n,r){var u=_r(r,"mediaPresentationDuration",Wa),c=[],f=0;r=Wr(r,"Period");for(var h=0;h<r.length;h++){var E=r[h],S=r[h+1],k=_r(E,"start",Wa,f),G=E.attributes.id,ne=_r(E,"duration",Wa),z=null;if(S){var ye=_r(S,"start",Wa);ye!=null&&(z=ye-k)}else u!=null&&(z=u-k);if(z==null&&(z=ne),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==r.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),f=Z5(e,t,n,{start:k,duration:z,node:E,Ye:z==null||!S}),c.push(f),t.za.id&&z&&(e.L[t.za.id]=z),z==null){f=null;break}f=k+z}}return e.K=c.map(function(Le){return Le.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:f,Xf:!0}}function Z5(e,t,n,r){t.za=V_(e,r.node,null,n),t.ha=r,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+r.start);var u=Wr(r.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())W5(e,r.start,r.duration,c.value,n);if(n=Wr(r.node,"AdaptationSet").map(function(k){return G5(e,t,k)}).filter(Bu),t.Eb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var f=c.next();!f.done;f=c.next())r.push(f.value)}if(r.length!=new Set(r).size)throw new pt(2,4,4018)}for(r=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),f=m(r);for(var h=f.next();!h.done;h=f.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var S=E.next();!S.done;h={Cd:h.Cd},S=E.next())h.Cd=S.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return wa(k.Cd.codecs)==wa(G.codecs)}}(h))}}}if(n=Pv(e.g.disableAudio,r,"audio"),u=Pv(e.g.disableVideo,r,"video"),c=Pv(e.g.disableText,r,vr),r=Pv(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new pt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function Pv(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function G5(e,t,n){function r(_t){switch(_t){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=V_(e,n,t.za,null);var u=!1,c=Wr(n,"Role"),f=c.map(function(_t){return _t.attributes.value}).filter(Bu),h=void 0,E=t.ua.contentType==vr;E&&(h="subtitle"),c=m(c);for(var S=c.next();!S.done;S=c.next()){S=S.value;var k=S.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(S=S.attributes.value,S){case"main":u=!0;break;case"caption":case"subtitle":h=S}}var G;k=Wr(n,"EssentialProperty"),c=null;var ne=!1;S=!1,k=m(k);for(var z=k.next();!z.done;z=k.next()){z=z.value;var ye=z.attributes.schemeIdUri;ye=="http://dashif.org/guidelines/trickmode"?c=z.attributes.value:ye=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=r(parseInt(z.attributes.value,10)):ye!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ye!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ye=="urn:mpeg:dash:ssr:2023"?ne=!0:S=!0)}var Le=null;for(k=Wr(n,"SupplementalProperty"),k=m(k),z=k.next();!z.done;z=k.next())z=z.value,ye=z.attributes.schemeIdUri,ye=="http://dashif.org/guidelines/last-segment-number"?Le=parseInt(z.attributes.value,10)-1:ye=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=r(parseInt(z.attributes.value,10)));k=Wr(n,"Accessibility");var De=new Map,He;for(k=m(k),z=k.next();!z.done;z=k.next())if(ye=z.value,z=ye.attributes.schemeIdUri,ye=ye.attributes.value,z=="urn:scte:dash:cc:cea-608:2015")if(z=1,ye!=null){ye=ye.split(";");for(var Se=m(ye),Qe=Se.next();!Qe.done;Qe=Se.next()){var Be=Qe.value,vt=Qe=void 0;Be.includes("=")?(Be=Be.split("="),Qe=Be[0].startsWith("CC")?Be[0]:"CC"+Be[0],vt=Be[1]||"und"):(Qe="CC"+z,ye.length==2?z+=2:z++,vt=Be),De.set(Qe,Cr(vt))}}else De.set("CC1","und");else if(z=="urn:scte:dash:cc:cea-708:2015")if(z=1,ye!=null)for(ye=m(ye.split(";")),Qe=ye.next();!Qe.done;Qe=ye.next())Qe=Qe.value,Be=Se=void 0,Qe.includes("=")?(Qe=Qe.split("="),Se="svc"+Qe[0],Be=Qe[1].split(",")[0].split(":").pop()):(Se="svc"+z,z++,Be=Qe),De.set(Se,Cr(Be));else De.set("svc1","und");else z=="urn:mpeg:dash:role:2011"?ye!=null&&(f.push(ye),ye=="captions"&&(h="caption")):z=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ye=="1"?He="visually impaired":ye=="2"&&(He="hard of hearing"));if(S)return null;S=Wr(n,"ContentProtection");var xt=Jx(S,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Vt=Cr(t.ua.language||"und"),Bt=n.attributes.label;if((S=Wr(n,"Label"))&&S.length&&(S=Ci(S[0]))&&(Bt=S),S=Wr(n,"Representation"),n=S.map(function(_t){return(_t=q5(e,t,xt,h,Vt,Bt,u,f,De,_t,He,Le))&&(_t.hdr=_t.hdr||G,_t.fastSwitching=ne),_t}).filter(function(_t){return!!_t}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new pt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=AN(n[0].mimeType,n[0].codecs),E=m(n),z=E.next();!z.done;z=E.next())z.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),z=k.next();!z.done;z=k.next()){for(z=z.value,ye=m(xt.drmInfos),Se=ye.next();!Se.done;Se=ye.next())Se=Se.value,Se.keyIds=Se.keyIds&&z.keyIds?new Set([].concat(T(Se.keyIds),T(z.keyIds))):Se.keyIds||z.keyIds;e.g.dash.enableAudioGroups&&(z.groupId=E)}return S=S.map(function(_t){return _t.attributes.id}).filter(Bu),{id:E,contentType:t.ua.contentType,language:Vt,Dj:u,streams:n,drmInfos:xt.drmInfos,If:c,ki:S}}function q5(e,t,n,r,u,c,f,h,E,S,k,G){if(t.J=V_(e,S,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!z5(t.J))return null;var ne=t.ha.start;t.bandwidth=_r(S,"bandwidth",Us)||0;var z=t.J.contentType,ye=z==vr||z=="application";z=z=="image";try{var Le=void 0;if(n.xe){var De=t.J.nb,He=co(De(),[n.xe.Rh]),Se=Oi(He,e.g.retryParameters);Le={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var _t,Zt,ln;return Me(function(pn){if(pn.g==1)return x(pn,z_(e,Se,6),2);if(pn.g!=3){if(_t=pn.h,!_t.data||_t.data.byteLength!=16)throw new pt(2,4,4049);return Zt={name:"AES-CBC"},ln=Le,x(pn,p.crypto.subtle.importKey("raw",_t.data,Zt,!0,["decrypt"]),3)}ln.cryptoKey=pn.h,Le.fetchKey=void 0,X(pn)})}}}if(De=function(_t,Zt,ln,pn){return $5(e,_t,Zt,ln,pn)},t.J.pd)var Qe=h5(t,De,Le);else if(t.J.Jb)Qe=g5(t,e.m,Le);else if(t.J.qd)Qe=E5(t,De,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Le,G);else{var Be=t.ha.duration||0,vt=t.J.nb;Qe={vc:function(){var _t=GE(ne,Be,vt());return _t.tc(function(Zt){Zt.mimeType=t.J.mimeType,Zt.codecs=t.J.codecs}),Promise.resolve(_t)}}}}catch(_t){if((ye||z)&&_t.code==4002)return null;throw _t}G=Wr(S,"ContentProtection"),G=X6(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),De=!1,Wr(S,"SupplementalProperty").some(function(_t){return _t.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&_t.attributes.value=="JOC"})&&(De=!0),He=!1,ye&&(He=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var xt;if(z&&((S=Wr(S,"EssentialProperty").find(function(_t){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(_t.attributes.schemeIdUri)}))&&(xt=S.attributes.value),!xt))return null;var Vt;S=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(S.includes("hvc1.2.4.L153.B0")||S.includes("hev1.2.4.L153.B0"))&&(Vt="PQ"),ye=t.J.id?t.za.id+","+t.J.id:"";var Bt=ye&&e.m[ye]?e.m[ye]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Bt.segmentIndex&&(Bt.segmentIndex.release(),Bt.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:S,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:He,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:De,closedCaptions:E,hdr:Vt,videoLayout:void 0,tilesLayout:xt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(t.J.mimeType,t.J.codecs)])};return Bt.createSegmentIndex=function(){var _t;return Me(function(Zt){if(Zt.g==1)return Bt.segmentIndex?Zt.u(0):(_t=Bt,x(Zt,Qe.vc(),3));_t.segmentIndex=Zt.h,X(Zt)})},ye&&t.Eb&&!e.m[ye]&&(e.m[ye]=Bt),Bt}function H5(e){var t,n;Me(function(r){switch(r.g){case 1:return t=0,ce(r,2),x(r,H_(e),4);case 4:t=r.h,me(r,3);break;case 2:if(n=Ce(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),K_(e,t),X(r)}})}function K_(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function V_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},r=r||n.nb;var u=t.attributes.id,c=Wr(t,"BaseURL"),f,h=!1;if(e.h)for(var E=m(c),S=E.next();!S.done;S=E.next()){var k=S.value;S=k.attributes.serviceLocation,k=vu(k),S&&k&&(yd(e.h,u,S,k),h=!0)}h&&e.h||(f=c.map(vu)),E=t.attributes.contentType||n.contentType,S=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",Dm)||n.frameRate,ne=t.attributes.sar||n.pixelAspectRatio,z=K5(Wr(t,"InbandEventStream"),n.emsgSchemeIdUris),ye=Wr(t,"AudioChannelConfiguration");ye=V5(ye)||n.de;var Le=_r(t,"audioSamplingRate",Co)||n.audioSamplingRate;E||(E=AN(S,k));var De=ua(t,"SegmentBase"),He=ua(t,"SegmentTemplate"),Se=De&&_r(De,"availabilityTimeOffset",Pc)||0,Qe=He&&_r(He,"availabilityTimeOffset",Pc)||0,Be=c&&c.length&&_r(c[0],"availabilityTimeOffset",Pc)||0;return Se=n.Qb+Be+Se+Qe,Qe=null,(Be=ua(t,"SegmentSequenceProperties"))&&(Be=ua(Be,"SAP"))&&(Qe=_r(Be,"cadence",Xu)),{nb:function(){return co(r(),c.length?e.h&&h?wp(e.h,u):f||[]:[])},pd:De||n.pd,Jb:ua(t,"SegmentList")||n.Jb,qd:He||n.qd,width:_r(t,"width",Co)||n.width,height:_r(t,"height",Co)||n.height,contentType:E,mimeType:S,codecs:k,frameRate:G,pixelAspectRatio:ne,emsgSchemeIdUris:z,id:u,language:t.attributes.lang,de:ye,audioSamplingRate:Le,Qb:Se,xf:Qe||n.xf}}function K5(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function V5(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function z5(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==vr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function wN(e,t,n,r){var u,c,f,h,E,S,k;return Me(function(G){if(G.g==1)return u=[Io(n)],c=co(t(),u),f=Oi(c,e.g.retryParameters),f.method=r,h=e.i.networkingEngine.request(4,f),gu(e.F,h),x(G,h.promise,2);if(E=G.h,r=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);S=E.headers.date}else S=Vr(E.data);return k=Date.parse(S),isNaN(k)?G.return(0):G.return(k-Date.now())})}function Y5(e,t,n){var r,u,c,f,h,E,S,k;return Me(function(G){switch(G.g){case 1:r=n.map(function(ne){return{scheme:ne.attributes.schemeIdUri,value:ne.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),f=c.next();case 2:if(f.done){G.u(4);break}switch(h=f.value,ce(G,5),E=h.scheme,S=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(S),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ve("NTP UTCTiming scheme is not supported");break;default:Ve("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return x(G,wN(e,t,S,"HEAD"),10);case 10:return G.return(G.h);case 8:return x(G,wN(e,t,S,"GET"),11);case 11:return G.return(G.h);case 9:me(G,3);break;case 5:Ce(G);case 3:f=c.next(),G.u(2);break;case 4:return Ve("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function W5(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",f=r.attributes.value||"",h=_r(r,"timescale",Co)||1;r=m(Wr(r,"Event"));for(var E=r.next();!E.done;E=r.next()){E=E.value;var S=_r(E,"presentationTime",Co)||0,k=_r(E,"duration",Co)||0;S=S/h+t,k=S+k/h,n!=null&&(S=Math.min(S,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:f,startTime:S,endTime:k,id:E.attributes.id||"",eventElement:$h(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function $5(e,t,n,r,u){var c,f,h,E;return Me(function(S){return S.g==1?(c=Ya,f=u?0:1,h=ip(t,n,r,e.g.retryParameters),x(S,z_(e,h,c,{type:f}),2)):(E=S.h,S.return(E.data))})}function AN(e,t){return t=Si(e,t),bl(t)?vr:e.split("/")[0]}function z_(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),gu(e.F,t),t.promise}te("shaka.dash.DashParser",Dv),Fe["application/dash+xml"]=function(){return new Dv},Fe["video/vnd.mpeg.dash.mpd"]=function(){return new Dv};function Ov(){}te("shaka.dependencies",Ov),Ov.has=function(e){return Y_.has(e)},Ov.add=function(e,t){if(!bN[e])throw Error(e+" is not supported");e==IN?dr("mux.js","mux.js is no longer used in Shaka Player."):Y_.set(e,function(){return t})};var IN="muxjs",bN={Ej:IN,ISOBoxer:"ISOBoxer"};Ov.Allowed=bN;var Y_=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function CN(e,t,n){this.type=e,this.g=t,this.segments=n||null}function RN(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}RN.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function xN(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function xp(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=xp(e,t))?e.value:n||null}function ii(e,t){if(e=xp(e,t),!e)throw new pt(2,4,4023,t);return e.value}function NN(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function MN(e,t){this.name=e,this.value=t}function Vs(e,t){return e.filter(function(n){return n.name==t})}function DN(e,t){return e.filter(function(n){return ii(n,"TYPE")==t})}function Ro(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function _d(e,t,n){return n=n===void 0?0:n,(e=Ro(e,t))?Number(e.value):n}function Zl(e,t,n){return t?PN(e,[t],n):[]}function PN(e,t,n){if(!t.length)return[];t=co(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=e,c=u.push,f=r.value;if((r=n)&&r.size){f=String(f).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=f.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var S=E.slice(2,E.length-1),k=r.get(S);if(k)f=f.replace(E,k);else throw new pt(2,4,4039,S)}}r=f}else r=f;c.call(u,r)}return e}function Hc(e){this.h=e||"",this.g=0}function Td(e){Gl(e,/[ \t]+/gm)}function Gl(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Kc(e){return e.g==e.h.length?null:(e=Gl(e,/[^ \t\n]*/gm))?e[0]:null}function X5(){this.g=0}function W_(e,t){t=Vr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new pt(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=$_(e,c),--e.g,ON.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var f=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(f)||r)r=!1;else{if(f=$_(e,f),Q5.includes(f.name)){if(t!=1)throw new pt(2,4,4017);f=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,f=m(f);for(var E=f.next();!E.done;E=f.next())E=E.value,/^(#EXT)/.test(E)?(E=$_(e,E),ON.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):r.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&r.push(h),n.push(new NN(E,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new NN("",r,c))),new CN(t,u,n)}u.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new MN("URI",h)),r=!0)}}return new CN(t,u)}function $_(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new pt(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new Hc(r);var c;(c=Gl(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Gl(r,f);)n.push(new MN(c[1],c[2]||c[3])),Td(r)}return new RN(e,t,n,u)}var ON="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),Q5="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function LN(){}function kN(e){try{var t=X_(e);return Yu({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return pu(n)}}function X_(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new pt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new pt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=qo(e):u=Ka(e),{data:u,contentType:n}}te("shaka.net.DataUriPlugin",LN),LN.parse=kN,Ho("data",kN);function FN(e){var t=Aa(e),n=t.split("/")[0];return e=Do(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function J5(e,t){function n(Se){return r(Se.name)}function r(Se){switch(Se=Se.toLowerCase(),Se){case"avc1":case"avc3":c.push(Se+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Se+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Se+".05.04"),h=!0;break;case"vp09":c.push(Se+".00.10.08"),h=!0;break;case"av01":c.push(Se+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),f=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Se),f=!0}}var u=[],c=[],f=!1,h=!1,E=null,S=null,k=null,G=null,ne=null,z=null,ye;if(new Fr().box("moov",yr).box("trak",yr).O("tkhd",function(Se){Se=Gt(Se.reader,Se.version),S=String(Se.height),k=String(Se.width)}).box("mdia",yr).O("mdhd",function(Se){E=At(Se.reader,Se.version).language}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("mp4a",function(Se){var Qe=Se.reader;Qe.skip(6),Qe.skip(2),Qe.skip(8);var Be=Qe.ra();Qe.skip(2),Qe.skip(2),Qe.skip(2),Qe=Qe.ra()+Qe.ra()/65536,G=Be,ne=Qe,Se.reader.ka()?yr(Se):n(Se)}).box("esds",function(Se){Se=Se.reader;for(var Qe="mp4a",Be,vt;Se.ka();){Be=Se.P();for(var xt=Se.P();xt&128;)xt=Se.P();if(Be==3)Se.ra(),xt=Se.P(),xt&128&&Se.ra(),xt&64&&Se.skip(Se.P()),xt&32&&Se.ra();else if(Be==4)vt=Se.P(),Se.skip(12);else if(Be==5)break}vt&&(Qe+="."+mn(vt),Be==5&&Se.ka()&&(Be=Se.P(),vt=(Be&248)>>3,vt===31&&Se.ka()&&(vt=32+((Be&7)<<3)+((Se.P()&224)>>5)),Qe+="."+vt)),u.push(Qe),f=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Se){ye=Se.name,wi(Se)}).box("avc3",function(Se){ye=Se.name,wi(Se)}).box("hev1",function(Se){ye=Se.name,wi(Se)}).box("hvc1",function(Se){ye=Se.name,wi(Se)}).box("dva1",function(Se){ye=Se.name,wi(Se)}).box("dvav",function(Se){ye=Se.name,wi(Se)}).box("dvh1",function(Se){ye=Se.name,wi(Se)}).box("dvhe",function(Se){ye=Se.name,wi(Se)}).box("vp09",function(Se){ye=Se.name,wi(Se)}).box("av01",function(Se){ye=Se.name,wi(Se)}).box("avcC",function(Se){var Qe=ye||"";switch(ye){case"dvav":Qe="avc3";break;case"dva1":Qe="avc1"}Se=Se.reader,Se.skip(1),Se=Qe+"."+mn(Se.P())+mn(Se.P())+mn(Se.P()),c.push(Se),h=!0}).box("hvcC",function(Se){var Qe=ye||"";switch(ye){case"dvh1":Qe="hvc1";break;case"dvhe":Qe="hev1"}var Be=Se.reader;Be.skip(1),Se=Be.P();var vt=["","A","B","C"][Se>>6],xt=Se&31,Vt=Be.M(),Bt=(Se&32)>>5?"H":"L";Se=[Be.P(),Be.P(),Be.P(),Be.P(),Be.P(),Be.P()],Be=Be.P();for(var _t=0,Zt=0;32>Zt&&(_t|=Vt&1,Zt!=31);Zt++)_t<<=1,Vt>>=1;for(Qe=Qe+("."+vt+xt)+("."+mn(_t,!0)),Qe+="."+Bt+Be,vt="",xt=Se.length;xt--;)((Bt=Se[xt])||vt)&&(vt="."+Bt.toString(16).toUpperCase()+vt);Qe+=vt,c.push(Qe),h=!0}).box("dvcC",function(Se){var Qe=ye||"";switch(ye){case"hvc1":Qe="dvh1";break;case"hev1":Qe="dvhe";break;case"avc1":Qe="dva1";break;case"avc3":Qe="dvav"}var Be=Se.reader;Be.skip(2),Se=Be.P(),Be=Be.P(),c.push(Qe+"."+Pn(Se>>1&127)+"."+Pn(Se<<5&32|Be>>3&31)),h=!0}).O("vpcC",function(Se){var Qe=ye||"",Be=Se.reader;Se=Be.P();var vt=Be.P();Be=Be.P()>>4&15,c.push(Qe+"."+Pn(Se)+"."+Pn(vt)+"."+Pn(Be)),h=!0}).box("av1C",function(Se){var Qe=ye||"",Be=Se.reader;Be.skip(1),Se=Be.P(),Be=Be.P();var vt=Se>>>5,xt=(Be&64)>>6;c.push(Qe+"."+vt+"."+Pn(Se&31)+(Be>>>7?"H":"M")+"."+Pn(vt===2&&xt?(Be&32)>>5?12:10:xt?10:8)+"."+((Be&16)>>4)+"."+((Be&8)>>3)+((Be&4)>>2)+(Be&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",zh).box("encv",wi).box("sinf",yr).box("frma",function(Se){Se=un(Se.reader).Ea,r(Se)}).box("colr",function(Se){Se=Se.reader;var Qe=null,Be=Se.sb(4),vt=String.fromCharCode(Be[0]);if(vt+=String.fromCharCode(Be[1]),vt+=String.fromCharCode(Be[2]),vt+=String.fromCharCode(Be[3]),vt==="nclx")switch(Se.ra(),Be=Se.ra(),Se.ra(),Be){case 1:case 6:case 13:case 14:case 15:Qe="SDR";break;case 16:Qe="PQ";break;case 18:Qe="HLG"}z=Qe}).parse(e||t,!0),!u.length&&!c.length)return null;var Le=f&&!h,De=new Map;if(h){var He=new wt("video/mp4");for(e&&He.init(e),He.i(t),e=m(He.j()),t=e.next();!t.done;t=e.next())t=t.value,De.set(t,t);He.h()}return{type:Le?"audio":"video",mimeType:Le?"audio/mp4":"video/mp4",codecs:UN(u.concat(c)).join(", "),language:E,height:S,width:k,channelCount:G,sampleRate:ne,closedCaptions:De,Lf:z}}function UN(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=Va(r);t.has(u)||(n.push(r),t.add(u))}return t=Ih("audio",n),r=Ih("video",n),e=Ih(vr,n),r=ej(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function ej(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Ot('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function tj(e){var t=null;return new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",mu).box("encv",wi).box("enca",zh).box("sinf",yr).box("schi",yr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=Ps(n.sb(16))}).parse(e,!0),t}function Lv(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(vr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new X5,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){Sj(e)}),this.qa=jv,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new Ol,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=Lv.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,r;return Me(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),x(u,o1(n,[e]),2)):u.g!=3?(r=u.h,n.aa=r.uri,x(u,ij(n,r.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,r,u,c,f,h,E,S;return Me(function(k){if(k.g==1){if(!Ca(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,r=n.filter(function(G){return G.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())f=c.value,t.push(nj(e,f));return x(k,Promise.all(t),2)}WN(e,r.map(function(G){return G.stream})),h=r.some(function(G){return G.fd==0}),r.length&&!h&&(E=wj,Uv(e,E.Pg),S=r.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(S))),e.i.updateDuration()),h&&J_(e),X(k)})};function Q_(e,t){return Ca(e)?e.K.get(t.type):t.$d}function nj(e,t){var n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return Me(function(qn){if(qn.g==1){for(n=[],r=m(t.$()),u=r.next();!u.done;u=r.next())c=u.value,f=new si(c),h=f.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),na(h)&&hr(f,h),n.push(f.toString());return x(qn,o1(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(S=W_(e.Ga,E.data),S.type!=1)throw new pt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=Vs(S.g,"EXT-X-DEFINE"),ne=GN(e,G,k),z=t.stream,ye=Q_(e,t),x(qn,JN(e,S,z.mimeType,t.$,ne),3)}Le=qn.h,De=Le.keyIds,He=Le.drmInfos,Se=function(Yn,Kn){return Yn.size===Kn.size&&[].concat(T(Yn)).every(function(Nr){return Kn.has(Nr)})},Se(z.keyIds,De)||(z.keyIds=De,z.drmInfos=He,e.i.newDrmInfo(z)),Qe=rM(e,S,z,ye,ne,t.$,t.type),Be=Qe.segments,(vt=Qe.bandwidth)&&(z.bandwidth=vt),z.segmentIndex.kd(Be,e.l.qb()),Be.length&&(xt=_d(S.g,"EXT-X-MEDIA-SEQUENCE",0),Bt=(Vt=Ro(S.g,"EXT-X-SKIP"))?Number(zn(Vt,"SKIPPED-SEGMENTS")):0,_t=XN(xt,Be),Zt=_t.gb,ln=_t.hb,t.gb=Zt+Bt,t.hb=ln,pn=ye.get(xt),z.segmentIndex.La(pn)),Ln=Be[0],t.fc=Ln.startTime,Mn=Be[Be.length-1],t.yb=Mn.endTime,Ro(S.g,"EXT-X-ENDLIST")&&(t.fd=!0),t1(e,S),X(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function BN(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,f=Q_(e,u);if(c=c.g[0]||null){f=m(f);for(var h=f.next();!h.done;h=f.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,Fv(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(r.g.splice(0,u),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),jN(e,n,r)))}function rj(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;r!=null&&r.h!=null&&(e.T=Math.min(e.T,r.h))}}if(t=e.T,t!=1/0){for(r=m(e.h.values()),n=r.next();!n.done;n=r.next())if(n=n.value,!Fv(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)de("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(jN(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function jN(e,t,n){t.fc+=n,t.yb+=n,e=Q_(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function ij(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi;return Me(function(Gr){switch(Gr.g){case 1:return r=W_(e.Ga,t),u=Vs(r.g,"EXT-X-DEFINE"),c=[],f=[],h=[],E=function(){return[n]},r.type==1?x(Gr,ZN(e,r,E),7):(oj(e,u),S=Vs(r.g,"EXT-X-MEDIA"),k=Vs(r.g,"EXT-X-STREAM-INF"),G=Vs(r.g,"EXT-X-IMAGE-STREAM-INF"),ne=Vs(r.g,"EXT-X-I-FRAME-STREAM-INF"),z=Vs(r.g,"EXT-X-SESSION-KEY"),ye=Vs(r.g,"EXT-X-SESSION-DATA"),Le=Vs(r.g,"EXT-X-CONTENT-STEERING"),sj(e,ye),x(Gr,uj(e,Le),4));case 4:return aj(e,k),gj(e,S),x(Gr,dj(e,k,z,S,E,e.o),5);case 5:return c=Gr.h,f=lj(e,S),x(Gr,cj(e,G,ne),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return De=Gr.h,He=De.type,Se=De.mimeType,Qe=De.codecs,Be=De.language,vt=De.height,xt=De.width,Vt=De.channelCount,Bt=De.sampleRate,_t=De.closedCaptions,Zt=De.Lf,x(Gr,$N(e,e.A++,r,E,n,Qe,He,Be,!0,"Media Playlist",Vt,_t,null,!1,Bt,!1,Se),8);case 8:ln=Gr.h,e.h.set(n,ln),He=="video"&&iM(ln.stream,xt,vt,null,Zt,null),c.push({id:0,language:Cr(Be||"und"),disabledUntilTime:0,primary:!0,audio:He=="audio"?ln.stream:null,video:He=="video"?ln.stream:null,bandwidth:ln.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new pt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),r.type==1&&(Ca(e)&&(tM(e,r),pn=e.m,e.s.X(pn)),Ln=Array.from(e.h.values()),e1(e,Ln),J_(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:f,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Kn=Yn.value,Kn.audio&&Kn.audio.codecs===""&&Mn.push(Kn.audio.createSegmentIndex()),Kn.video&&Kn.video.codecs===""&&Mn.push(Kn.video.createSegmentIndex());return x(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(Nr=[],fi=c[0],Li=m([fi.video,fi.audio]),ci=Li.next();!ci.done;ci=Li.next())(gi=ci.value)&&!gi.segmentIndex&&Nr.push(gi.createSegmentIndex());if(0<Nr.length)return x(Gr,Promise.all(Nr),0)}Gr.u(0)}})}function ZN(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be;return Me(function(vt){switch(vt.g){case 1:if(r=FN(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return vt.return(r);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],f=Zl(n(),t.segments[0].h),h=f[0],E=new si(h),S=E.Pa.split(".").pop(),k=aM[S])return vt.return(FN(k));if(G=Ya,ne=null,z=n1(e,t,c.g,n),e.Y.clear(),!z){vt.u(2);break}return ye=ip(z.$(),z.ac(),z.Yb(),e.g.retryParameters),x(vt,ql(e,ye,G,{type:0}),3);case 3:Le=vt.h,ne=Le.data;case 2:return De=Oi(f,e.g.retryParameters),x(vt,ql(e,De,G,{type:1}),4);case 4:if(He=vt.h,(Se=He.headers["content-type"])&&(Se=Se.split(";")[0].toLowerCase()),S=="ts"||Se=="video/mp2t"){var xt=He.data,Vt=Qn(xt);Vt=new ze().parse(Vt);var Bt=Vt.bd();Vt=Vt.We();var _t=[],Zt=!1,ln=!1;switch(Bt.audio){case"aac":case"aac-loas":_t.push("mp4a.40.2"),Zt=!0;break;case"mp3":_t.push("mp4a.40.34"),Zt=!0;break;case"ac3":_t.push("ac-3"),Zt=!0;break;case"ec3":_t.push("ec-3"),Zt=!0;break;case"opus":_t.push("opus"),Zt=!0}switch(Bt.video){case"avc":Vt.Ea?_t.push(Vt.Ea):_t.push("avc1.42E01E"),ln=!0;break;case"hvc":Vt.Ea?_t.push(Vt.Ea):_t.push("hvc1.1.6.L93.90"),ln=!0;break;case"av1":_t.push("av01.0.01M.08"),ln=!0}if(_t.length){if(Bt=Zt&&!ln,Zt=new Map,ln){ln=new wt("video/mp2t"),ln.i(xt),xt=m(ln.j());for(var pn=xt.next();!pn.done;pn=xt.next())pn=pn.value,Zt.set(pn,pn);ln.h()}Vt={type:Bt?"audio":"video",mimeType:"video/mp2t",codecs:_t.join(", "),language:null,height:Vt.height,width:Vt.width,channelCount:null,sampleRate:null,closedCaptions:Zt,Lf:null}}else Vt=null;if(Qe=Vt)return vt.return(Qe)}else if((S=="mp4"||S=="cmfv"||S=="m4s"||Se=="video/mp4"||Se=="audio/mp4"||Se=="video/iso.segment")&&(Be=J5(ne,He.data)))return vt.return(Be);return vt.return(r)}})}function J_(e){if(Ca(e)){if(e.qa==Zv){for(var t,n=t=1/0,r=m(e.h.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za(YN(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function oj(e,t){var n=new si(e.aa).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),r&&c&&(e.o.has(r)||e.o.set(r,c)),u&&(r=n.get(u)[0])&&!e.o.has(r)&&e.o.set(u,r)}}function GN(e,t,n){n=new si(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,f=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),f&&h&&(r.has(f)||r.set(f,h)),u&&(f=n.get(u)[0])&&!r.has(f)&&r.set(u,f),c&&(u=e.o.get(c))&&r.set(c,u)}return r}function aj(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"AUDIO");n=zn(r,"VIDEO");var c=zn(r,"SUBTITLES");if(r=qN(e,r),c){var f=bo(vr,r);e.G.set(c,f),gn(r,f)}u&&(c=bo("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=bo("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function sj(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"DATA-ID");n=zn(r,"URI");var c=zn(r,"LANGUAGE");r=zn(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",Zl([e.aa],n,e.o)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function uj(e,t){var n,r,u,c,f,h;return Me(function(E){if(!e.i||!e.g)return E.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,f=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),f&&h){e.j=new vd(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=f,n=Sp(e.j,h);break}return x(E,n,0)})}function lj(e,t){var n=DN(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return zN(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=ii(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=r1(vr,r)||i1(vr),Sd(c.stream)}}return t.filter(function(f){return f})}function Sd(e){e.fullMimeTypes=new Set([Si(e.mimeType,e.codecs)])}function cj(e,t,n){var r,u;return Me(function(c){return c.g==1?(r=t.map(function(f){var h,E;return Me(function(S){if(S.g==1)return e.g.disableThumbnails?S.return(null):(ce(S,2),x(S,mj(e,f),4));if(S.g!=2)return h=S.h,S.return(h.stream);if(E=Ce(S),e.g.hls.ignoreImageStreamFailures)return S.return(null);throw E})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=ii(f,"URI"),E=zn(f,"CODECS")||"";if(e.h.has(h))var S=e.h.get(h);else{var k=zn(f,"LANGUAGE"),G=zn(f,"NAME"),ne=zn(f,"CHARACTERISTICS"),z=kv(e,e.A++,[h],E,"image",k,!1,G,null,null,ne,!1,null,!1),ye=zn(f,"RESOLUTION"),Le=m(ye?ye.split("x"):[null,null]),De=Le.next().value,He=Le.next().value;z.stream.width=Number(De)||void 0,z.stream.height=Number(He)||void 0;var Se=zn(f,"BANDWIDTH");Se&&(z.stream.bandwidth=Number(Se)),e.h.set(h,z),S=z}return f=S,f.stream.codecs!=="mjpg"?null:f.stream}catch(Qe){if(e.g.hls.ignoreImageStreamFailures)return null;throw Qe}})),x(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(f){return f})))})}function fj(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=xN(u);r[c]?r[c].push(u):r[c]=[u]}for(var f in r)zN(e,r[f],n)}function dj(e,t,n,r,u,c){var f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li;return Me(function(ci){switch(ci.g){case 1:if(f=[],h=new Set,!(0<n.length)){ci.u(2);break}E=m(n),S=E.next();case 3:if(S.done){ci.u(2);break}if(k=S.value,G=ii(k,"METHOD"),ne=zn(k,"KEYFORMAT")||"identity",z=null,G=="NONE"||Bv(G)){ci.u(4);break}if(ne!="identity"){z=(ye=uM[ne])?ye(k,""):null,ci.u(6);break}return x(ci,oM(e,k,"",u,null,c),8);case 8:z=ci.h;case 6:if(z){if(z.keyIds)for(Le=m(z.keyIds),De=Le.next();!De.done;De=Le.next())He=De.value,h.add(He);f.push(z)}case 4:S=E.next(),ci.u(3);break;case 2:for(Se={},Qe=m(t),Be=Qe.next();!Be.done;Be=Qe.next())vt=Be.value,xt=xN(vt),Se[xt]?Se[xt].push(vt):Se[xt]=[vt];Vt=[];for(Bt in Se)_t=Se[Bt],Zt=_t[0],ln=zn(Zt,"FRAME-RATE"),pn=Number(zn(Zt,"AVERAGE-BANDWIDTH"))||Number(ii(Zt,"BANDWIDTH")),Ln=zn(Zt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Kn=zn(Zt,"VIDEO-RANGE"),(Nr=zn(Zt,"REQ-VIDEO-LAYOUT"))&&Nr.includes(",")&&(fi=Nr.split(",").filter(function(gi){return gi=="CH-STEREO"||gi=="CH-MONO"}),Nr=fi[0]),Nr=Nr||"CH-MONO",Li=hj(e,_t,r,pn),Vt.push.apply(Vt,T(pj(e,Li.audio,Li.video,pn,qn,Yn,ln,Kn,Nr,f,h)));return ci.return(Vt.filter(function(gi){return gi!=null}))}})}function hj(e,t,n,r){for(var u={audio:[],video:[]},c=new Map,f=[],h=!1,E=!1,S=m(t),k=S.next();!k.done;k=S.next()){var G=k.value;k=zn(G,"AUDIO");var ne=zn(G,"VIDEO"),z=k||ne;z&&(f.includes(z)||f.push(z),(G=zn(G,"PATHWAY-ID"))&&c.set(z,G),k?h=!0:ne&&(E=!0))}f.length&&n.length&&(S=n.filter(function(De){return f.includes(ii(De,"GROUP-ID"))}),fj(e,S,c)),S=(c=f.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(S)):E&&u.video.push.apply(u.video,T(S)),k=!1;var ye=t.map(function(De){return ii(De,"URI")});if(E=u.audio.find(function(De){return De&&De.$().find(function(He){return ye.includes(He)})}),h=qN(e,t[0]),ne=bo("video",h),(z=bo("audio",h))&&!ne?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&z&&ne?(E="video",h=[[ne,z].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Le=G=z=ne=k=null;!S.length&&(n=n.find(function(De){var He=zn(De,"URI")||"",Se=zn(De,"TYPE");return De=ii(De,"GROUP-ID"),Se!="SUBTITLES"&&He==""&&f.includes(De)}))&&(k=zn(n,"LANGUAGE"),ne=zn(n,"NAME"),z=HN(n),VN(n),G=zn(n,"CHARACTERISTICS"),Le=KN(n)),e=vj(e,t,h,E,k,ne,z,G,Le),c&&(e.stream.groupId=c),S.length||(e.stream.bandwidth=r),u[e.stream.type]=[e]}return u}function qN(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),UN(e)}function HN(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function KN(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function VN(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function pj(e,t,n,r,u,c,f,h,E,S,k){for(var G=m(n),ne=G.next();!ne.done;ne=G.next())iM(ne.value.stream,u,c,f,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,f=m(n),h=f.next();!h.done;h=f.next()){var z=h.value;(h=c?c.stream:null)&&(h.drmInfos=S,h.keyIds=k),(E=z?z.stream:null)&&(E.drmInfos=S,E.keyIds=k),G=c?c.stream.drmInfos:null,ne=z?z.stream.drmInfos:null,z=z?z.$().sort().join(","):"";var ye=c?c.$().sort().join(","):"";z=z+" - "+ye,h&&E&&!re(G,ne)||e.Ia.has(z)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(z))}return u}function gj(e,t){t=DN(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"LANGUAGE");n=Cr(u||"und"),u||(u=zn(r,"NAME"))&&(n=u),u=ii(r,"GROUP-ID"),r=ii(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function zN(e,t,n){for(var r=[],u=[],c=new Map,f=m(t),h=f.next();!h.done;h=f.next()){var E=h.value;h=ii(E,"URI"),E=ii(E,"GROUP-ID"),r.push(h),u.push(E),c.set(E,h)}if(f=u.sort().join(","),h=t[0],t="",E=ii(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=vr),E==vr)t=zn(h,"CODECS")||"";else{u=m(u);for(var S=u.next();!S.done;S=u.next())if(S=S.value,e.G.has(S)){t=e.G.get(S);break}}if(u=r.sort().join(","),e.h.has(u))return e.h.get(u);if(S=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&yd(e.j,S,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?HN(h):null;var ne=E=="audio"?VN(h):!1,z=zn(h,"CHARACTERISTICS"),ye=zn(h,"FORCED")=="YES";return h=E=="audio"?KN(h):null,r=kv(e,S,r,t,E,n,k,c,G,null,z,ye,h,ne),r.stream&&(r.stream.groupId=f),e.H.has(f)?e.H.get(f).push(r):e.H.set(f,[r]),e.h.set(u,r),r}function mj(e,t){var n,r,u,c,f,h,E,S,k,G;return Me(function(ne){return ne.g==1?(n=ii(t,"URI"),r=zn(t,"CODECS","jpeg")||"",e.h.has(n)?ne.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),f=zn(t,"CHARACTERISTICS"),h=kv(e,e.A++,[n],r,"image",u,!1,c,null,null,f,!1,null,!1),(E=zn(t,"RESOLUTION"))?x(ne,h.stream.createSegmentIndex(),3):ne.u(2))):(ne.g!=2&&(S=h.stream.segmentIndex.get(0),k=S.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),ne.return(h))})}function vj(e,t,n,r,u,c,f,h,E){for(var S=e.A++,k=[],G=m(t),ne=G.next();!ne.done;ne=G.next()){var z=ne.value;ne=ii(z,"URI"),z=zn(z,"PATHWAY-ID"),e.j&&z&&yd(e.j,S,z,ne),k.push(ne)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),r=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Fu(r,n),r=kv(e,S,k,n,r,u,!1,c,f,t,h,!1,E,!1),e.h.set(G,r),r}function kv(e,t,n,r,u,c,f,h,E,S,k,G,ne,z){function ye(vt){var xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi;return Me(function(Gr){switch(Gr.g){case 1:return xt=Se.$(),x(Gr,o1(e,Se.$(),!0),2);case 2:if(Vt=Gr.h,vt.aborted)return Gr.return();if(Bt=Vt.uri,Bt==Vt.originalUri||xt.includes(Bt)||He.push(Bt),_t=W_(e.Ga,Vt.data),Zt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return x(Gr,ZN(e,_t,Le),4);case 4:ln=Gr.h,Zt=ln.mimeType,r=ln.codecs;case 3:return pn=Ca(e),x(Gr,$N(e,0,_t,Le,Bt,r,u,c,f,h,E,S,k,G,ne,z,Zt),5);case 5:if(Ln=Gr.h,vt.aborted)return Gr.return();if(Mn=Ln.stream,Ca(e)&&!pn&&tM(e,_t),Se.fc=Ln.fc,Se.yb=Ln.yb,Se.Hd=Ln.Hd,Se.Gd=Ln.Gd,Se.fd=Ln.fd,Se.$d=Ln.$d,Se.gb=Ln.gb,Se.hb=Ln.hb,Se.df=!0,De.segmentIndex=Mn.segmentIndex,De.encrypted=Mn.encrypted,De.drmInfos=Mn.drmInfos,De.keyIds=Mn.keyIds,De.mimeType=Mn.mimeType,De.bandwidth=De.bandwidth||Mn.bandwidth,De.codecs=De.codecs||Mn.codecs,Sd(De),De.drmInfos.length&&e.i.newDrmInfo(De),qn=yi,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Kn=Yn.next();!Kn.done;Kn=Yn.next())Nr=Kn.value,Nr.df||Nr.type!=u||(Nr.stream.mimeType=Mn.mimeType,Sd(Nr.stream));u==qn.ma&&(fi=Mn.segmentIndex.get(0))&&fi.ca&&(De.mimeType="application/mp4",Sd(De)),yj(e)&&(e.mb?e1(e,[Se]):(e.mb=!0,Li=Array.from(e.h.values()),ci=Li.filter(function(fo){return fo.stream.segmentIndex}),e1(e,ci),J_(e),gi=e.m,0<gi&&e.s.X(gi))),X(Gr)}})}function Le(){return e.j&&1<n.length?wp(e.j,t):He.concat(PN([e.aa],n,e.o))}var De=QN(e,r,u,c,f,h,E,S,k,G,ne,z),He=[],Se={stream:De,type:u,tg:He,$:Le,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},Qe=null,Be=new AbortController;return De.createSegmentIndex=function(){return Qe||(Be=new AbortController,Qe=new Promise(function(vt){vt(ye(Be.signal))}))},De.closeSegmentIndex=function(){Qe&&!De.segmentIndex&&Be.abort(),De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null),Qe=null},Se}function YN(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function WN(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function e1(e,t){if(!Ca(e))for(var n=YN(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.sc(0,n);WN(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?BN(e,t):(rj(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&BN(e,t))}function Fv(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function yj(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function $N(e,t,n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De){var He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi,Gr;return Me(function(fo){switch(fo.g){case 1:if(n.type!=1)throw new pt(2,4,4017);He=Vs(n.g,"EXT-X-DEFINE"),Se=GN(e,He,u);var Fo=Ro(n.g,"EXT-X-PLAYLIST-TYPE"),ai=Ro(n.g,"EXT-X-ENDLIST");if(ai=Fo&&Fo.value=="VOD"||ai,Fo=Fo&&Fo.value=="EVENT"&&!ai,Fo=!ai&&!Fo,ai?Uv(e,jv):Fo?Uv(e,Zv):Uv(e,lM),Ca(e)&&t1(e,n),De){fo.u(2);break}return x(fo,Tj(e,f,c,n,Se,r),3);case 3:De=fo.h;case 2:return x(fo,JN(e,n,De,r,Se),4);case 4:if(Qe=fo.h,Be=Qe.drmInfos,vt=Qe.keyIds,xt=Qe.encrypted,Vt=Qe.Tg,xt&&!Be.length&&!Vt)throw new pt(2,4,4026);return Bt=QN(e,c,f,h,E,S,k,G,ne,z,ye,Le),Bt.encrypted=xt,Bt.drmInfos=Be,Bt.keyIds=vt,Bt.mimeType=De,Sd(Bt),_t=Ca(e)?e.K.get(f):new Map,Zt=rM(e,n,Bt,_t,Se,r,f),ln=Zt.segments,(pn=Zt.bandwidth)&&(Bt.bandwidth=pn),Ca(e)&&t1(e,n),Ln=ln[0].startTime,Mn=ln[ln.length-1],qn=Mn.endTime,Yn=new wr(ln),Bt.segmentIndex=Yn,Nr=(Kn=Ro(n.g,"EXT-X-SERVER-CONTROL"))?xp(Kn,"CAN-SKIP-UNTIL")!=null:!1,fi=Kn?xp(Kn,"CAN-BLOCK-RELOAD")!=null:!1,Li=_d(n.g,"EXT-X-MEDIA-SEQUENCE",0),ci=XN(Li,ln),gi=ci.gb,Gr=ci.hb,fo.return({stream:Bt,type:f,tg:[],$:r,fc:Ln,yb:qn,Hd:Nr,Gd:fi,fd:!1,De:-1,gb:gi,hb:Gr,$d:_t,df:!1})}})}function XN(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function QN(e,t,n,r,u,c,f,h,E,S,k,G){var ne=r1(n,t)||i1(n),z=[];if(E){E=m(E.split(","));for(var ye=E.next();!ye.done;ye=E.next())z.push(ye.value)}return E=void 0,ye=null,n==vr?E=z.includes("public.accessibility.transcribes-spoken-dialog")&&z.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":z.includes("public.accessibility.describes-video")&&(ye="visually impaired"),z.length||E!=="subtitle"||z.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:ne,codecs:t,kind:n==vr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Cr(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:z,forced:S,channelsCount:f,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ye,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Sd(e),e}function JN(e,t,n,r,u){var c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn;return Me(function(Kn){switch(Kn.g){case 1:if(c=new Map,t.segments){for(f=m(t.segments),h=f.next();!h.done;h=f.next())if(E=h.value,S=Vs(E.g,"EXT-X-KEY"),k=null,S.length)for(k=n1(e,t,E.g,r,u),G=m(S),ne=G.next();!ne.done;ne=G.next())z=ne.value,c.set(z,k)}Le=ye=!1,De=[],He=new Set,Se=m(c),Qe=Se.next();case 2:if(Qe.done){Kn.u(4);break}if(Be=Qe.value,vt=m(Be),xt=vt.next().value,Vt=vt.next().value,Bt=xt,_t=Vt,Zt=ii(Bt,"METHOD"),Zt=="NONE"){Kn.u(3);break}if(ye=!0,ln=zn(Bt,"KEYFORMAT")||"identity",pn=null,Bv(Zt)){Le=!0,Kn.u(3);break}if(ln!="identity"){pn=(Ln=uM[ln])?Ln(Bt,n):null,Kn.u(6);break}return x(Kn,oM(e,Bt,n,r,_t,u),8);case 8:pn=Kn.h;case 6:if(pn){if(pn.keyIds)for(Mn=m(pn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,He.add(Yn);De.push(pn)}case 3:Qe=Se.next(),Kn.u(2);break;case 4:return Kn.return({drmInfos:De,keyIds:He,encrypted:ye,Tg:Le})}})}function eM(e,t,n,r,u){if(!p.crypto||!p.crypto.subtle)throw Ve("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new pt(2,4,4042);var c=0,f=zn(t,"IV","");if(f){var h=du(f.substr(2));if(h.byteLength!=16)throw new pt(2,4,4048)}else c=_d(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(ii(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var S,k,G,ne,z,ye,Le;return Me(function(De){if(De.g==1)return S=Zl(r(),ii(t,"URI"),u),k=S.sort().join(""),e.da.has(k)||(G=Oi(S,e.g.retryParameters),ne=ql(e,G,6),e.da.set(k,ne)),x(De,e.da.get(k),2);if(De.g!=3){if(z=De.h,!z.data||z.data.byteLength!=E.bitsKey/8)throw new pt(2,4,4049);return ye={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Le=E,x(De,p.crypto.subtle.importKey("raw",z.data,ye,!0,["decrypt"]),3)}Le.cryptoKey=De.h,E.fetchKey=void 0,X(De)})},e.ba.set(n,E)}return e.ba.get(n)}function t1(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=Ro(r[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=Ro(t.g,"EXT-X-TARGETDURATION"),!r)throw new pt(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=Ro(t.g,"EXT-X-PART-INF"))&&(e.L=Number(ii(u,"PART-TARGET"))),t=Ro(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(ii(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?xp(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(r,e.Ha)}function tM(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function n1(e,t,n,r,u){var c=Ro(n,"EXT-X-MAP");if(!c)return null;var f=ii(c,"URI"),h=Zl(r(),f,u);if(f=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(f)){var E=void 0,S=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?Bv(ii(k,"METHOD"))&&k.id<c.id&&(E=eM(e,k,t,r,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(S=k);t=Ej(h,c,S,E),e.Y.set(f,t)}return e.Y.get(f)}function Ej(e,t,n,r){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new dt(function(){return e},u,c,null,null,null,r)}function _j(e,t,n,r,u,c,f,h,E){var S=r.g,k=Ro(S,"EXTINF"),G=0,ne=0,z=null;r.rb.length&&!e.B&&Ve("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ye=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Le=Ro(S,"EXT-X-PROGRAM-DATE-TIME");Le&&Le.value&&(ye=zf(Le.value))}var De=jt;if(Ro(S,"EXT-X-GAP")&&(De=2),!k){if(r.rb.length==0)throw new pt(2,4,4024,"EXTINF");if(!e.B)return null}var He=[];Le=!1;var Se=null,Qe=!1,Be=!1;if(e.B&&r.rb.length){G=(f.mimeType=="video/mp4"||f.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var vt=ye,xt={},Vt=0;Vt<r.rb.length;xt={Qc:xt.Qc,yd:xt.yd},Vt++){var Bt=r.rb[Vt],_t=Vt==0?n:He[He.length-1],Zt=Vt==0?u:_t.endTime,ln=Number(zn(Bt,"DURATION"))||e.L;if(ln){var pn=Zt+ln,Ln=0,Mn=null;if(Bt.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Bt,"BYTERANGE-START"))?Number(Ln):0,(_t=zn(Bt,"BYTERANGE-LENGTH"))?Mn=Ln+Number(_t)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Bt,"BYTERANGE"),Mn=m(nM(_t,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),xt.yd=zn(Bt,"URI"),xt.yd){_t=jt,zn(Bt,"GAP")=="YES"&&(_t=2,Qe=!0),xt.Qc=null;var qn=function(Kn){return function(){return Kn.Qc==null&&(Kn.Qc=Zl(h(),Kn.yd,c)),Kn.Qc}}(xt);G&&0<=Ln&&Mn!=null&&(Se=qn,Le=!0),Zt=new et(Zt,pn,qn,Ln,Mn,t,0,0,1/0,[],"",null,vt,_t,E),Bt.name=="EXT-X-PRELOAD-HINT"&&(Zt.ef(),Be=!0),zn(Bt,"INDEPENDENT")!="YES"&&0<Vt&&Zt.Zd(),He.push(Zt),vt&&(vt+=ln)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(He.length)G=He[He.length-1].endTime;else return null;Le&&(Qe||He[0].Aa!=0?(Le=!1,Se=null):He=[]),(k=Ro(S,"EXT-X-BYTERANGE"))?(z=m(nM(n,k.value)),ne=z.next().value,z=z.next().value):He.length&&(ne=He[0].Aa,z=He[He.length-1].ja),n="",k=null,f.type=="image"&&(n="1x1",f=Ro(S,"EXT-X-TILES"))&&(n=ii(f,"LAYOUT"),(f=zn(f,"DURATION"))&&(k=Number(f)));var Yn=null;return t=new et(u,G,function(){return Se?Se():(Yn==null&&(Yn=Zl(h(),r.h,c)),Yn||[])},ne,z,t,0,0,1/0,He,n,k,ye,De,E,0<He.length&&!!r.h),Le&&(e.lb=!0,t.lg(),Be&&t.ef()),t}function nM(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,r=n+t-1),[n,r]}function rM(e,t,n,r,u,c,f){var h=t.segments,E=void 0,S=_d(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=_d(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=Ro(t.g,"EXT-X-SKIP"),ne=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,z=k+ne,ye=0;Ca(e)&&r.has(z)&&(ye=r.get(z)),ye===0&&e.qa==Zv&&0<r.size&&!r.has(z)&&(ye=e.l.qb());var Le=[],De=null;G=[];for(var He=0;He<h.length;He++){var Se=h[He],Qe=He==0?ye:De.endTime;z=k+ne+He,Ro(Se.g,"EXT-X-DISCONTINUITY")&&S++;for(var Be=m(Se.g),vt=Be.next();!vt.done;vt=Be.next())vt=vt.value,vt.name=="EXT-X-KEY"&&(Bv(ii(vt,"METHOD"))?E=eM(e,vt,t,c,u):E=void 0);r.set(z,Qe),Be=n1(e,t,Se.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),(Qe=_j(e,Be,De,Se,Qe,u,n,c,E))&&((De=_d(Se.g,"EXT-X-BITRATE"))?G.push({bitrate:De,duration:Qe.endTime-Qe.startTime}):G.length&&(De=G.pop(),De.duration+=Qe.endTime-Qe.startTime,G.push(De)),De=Qe,Qe.j=S,Fv(e,f)&&e.I!=null&&z<e.I||Le.push(Qe))}if(t=void 0,G.length&&(t=G.reduce(function(xt,Vt){return xt+Vt.duration},0),t=Math.round(G.reduce(function(xt,Vt){return xt+Vt.bitrate*Vt.duration},0)/t*1e3)),G=Le.some(function(xt){return xt.h!=null})){for(n={},r=0;r<Le.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},r++)if(n.Cb=Le[r],n.Cb.h==null)for(n.Ic=0,n.Jc=r,u=function(xt){return function(){var Vt=Le[xt.Jc];if(Vt){if(Vt.h!=null)return Vt.h+xt.Ic;xt.Ic-=Vt.endTime-Vt.startTime,xt.Jc+=1}return null}}(n),n.Fc=0,n.td=r,c=function(xt){return function(){var Vt=Le[xt.td];if(Vt){if(Vt!=xt.Cb&&(xt.Fc+=Vt.endTime-Vt.startTime),Vt.h!=null)return Vt.h+xt.Fc;--xt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Le),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!Fv(e,f))for(e=m(Le),r=e.next();!r.done;r=e.next())r.value.Ff(n);return{segments:Le,bandwidth:t}}function r1(e,t){if(e==vr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function i1(e){return e==vr?"text/vtt":sM[e].mp4}function Tj(e,t,n,r,u,c){var f,h,E,S,k,G,ne,z,ye,Le,De,He,Se;return Me(function(Qe){switch(Qe.g){case 1:return f=Ya,h=Math.trunc((r.segments.length-1)/2),E=Zl(c(),r.segments[h].h,u),S=new si(E[0]),k=S.Pa.split(".").pop(),G=sM[t],(ne=G[k])||(ne=aM[k])||(ne=r1(t,n))?Qe.return(ne):(ye=1,Le=Oi(E,e.g.retryParameters),ce(Qe,2),Le.method="HEAD",x(Qe,ql(e,Le,f,{type:ye}),4));case 4:De=Qe.h,z=De.headers["content-type"],me(Qe,3);break;case 2:if(He=Ce(Qe),!He||He.code!=1002&&He.code!=1001){Qe.u(3);break}return Le.method="GET",x(Qe,ql(e,Le,f,{type:ye}),6);case 6:Se=Qe.h,z=Se.headers["content-type"];case 3:return z?Qe.return(z.split(";")[0]):Qe.return(i1(t))}})}function iM(e,t,n,r,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function o1(e,t,n){return ql(e,Oi(t,e.g.retryParameters),0,{type:n?2:3})}function Sj(e){var t,n,r,u,c,f;Me(function(h){switch(h.g){case 1:return e.i?(ce(h,2),t=Date.now(),x(h,e.update(),4)):h.return();case 4:n=Date.now(),Ca(e)&&(r=(n-t)/1e3,e.bb.sample(1,r),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),me(h,3);break;case 2:if(f=Ce(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(f),h.return();f.severity=1,e.i.onError(f),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),X(h)}})}function Ca(e){return e.qa!=jv}function Uv(e,t){e.qa=t,e.l&&e.l.Ec(!Ca(e)),Ca(e)||e.s.stop()}function ql(e,t,n,r){if(!e.N)throw new pt(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),gu(e.N,t),t.promise}function Bv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function oM(e,t,n,r,u,c){var f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be;return Me(function(vt){switch(vt.g){case 1:if(n=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);if(f=ii(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return vt.return(null);if(E=Zl(r(),ii(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){S=Ps(qo(E[0].split("data:text/plain;base64,").pop())),vt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Oi(E,e.g.retryParameters),ne=ql(e,G,6),e.ia.set(k,ne)),x(vt,e.ia.get(k),3);case 3:z=vt.h,S=Ps(z.data);case 2:if(ye="00000000000000000000000000000000",!u){vt.u(4);break}if(e.pa.has(u)){Le=e.pa.get(u),vt.u(5);break}return De=ip(u.$(),u.ac(),u.Yb(),e.g.retryParameters),He=Ya,x(vt,ql(e,De,He,{type:0}),6);case 6:Se=vt.h,Le=tj(Se.data),e.pa.set(u,Le);case 5:Le&&(ye=Le);case 4:return Qe=new Map,Qe.set(ye,S),Be="cenc",f=="SAMPLE-AES"&&(Be="cbcs"),vt.return(Ah(Qe,Be))}})}te("shaka.hls.HlsParser",Lv);var aM={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},sM={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},uM={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new pt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new pt(2,4,4041);return e=ii(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),ku("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=ii(e,"URI"),t=X_(t),t=Qn(t.data),n=ku("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=ii(e,"URI"),e=X_(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Hf(e,t,new Set,0),ku("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},jv="VOD",lM="EVENT",Zv="LIVE",wj={Pg:jv,Pi:lM,Xi:Zv};Fe["application/x-mpegurl"]=function(){return new Lv},Fe["application/vnd.apple.mpegurl"]=function(){return new Lv};function Aj(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function Gv(e){if(e=cM(e))e:{e=m(Ia(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=ua(t.value,"LA_URL")){e=Ci(t);break e}e=""}else e="";return e}function cM(e){return e=qo(Ci(e)),e=Aj(e).filter(function(t){return t.type===Ij})[0],e?(e=qa(e.value,!0),(e=Fl(e,"WRMHEADER"))?e:null):null}var Ij=1,bj=new Map().set("com.microsoft.playready",Gv).set("com.microsoft.playready.recommendation",Gv).set("com.microsoft.playready.software",Gv).set("com.microsoft.playready.hardware",Gv);function wd(e){if(!pM){pM=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);qv=mr("ftyp",t,r,t,n),t=mr("dref",Fj),a1=mr("dinf",t)}this.g=e}function Ad(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,f=r.value;r=mr;var h=f.id+1,E=f.stream.width||0,S=f.stream.height||0;f.type=="audio"&&(S=E=0);var k=f.duration*f.timescale,G=Math.floor(k/(Hl+1));switch(k=Math.floor(k%(Hl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(h,4)),[0,0,0,0],T(oi(G,4)),T(oi(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(oi(E,2)),[0,0],T(oi(S,2)),[0,0])),h=mr("tkhd",h),E=mr,G=f.duration*f.timescale,S=Math.floor(G/(Hl+1)),G=Math.floor(G%(Hl+1)),k=f.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,S=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(f.timescale,4)),T(oi(S,4)),T(oi(G,4)),T(oi(k,2)),[0,0])),S=mr("mdhd",S),G=f,k=new Uint8Array([]),G.type){case"video":k=Rj;break;case"audio":k=xj}G=mr("hdlr",k);e:{switch(f.type){case"video":f=mr("minf",mr("vmhd",Oj),a1,fM(f));break e;case"audio":f=mr("minf",mr("smhd",Lj),a1,fM(f));break e}f=new Uint8Array([])}f=E("mdia",S,G,f),r=r("trak",h,f),c.call(u,r)}for(t=li.apply(Pi,T(t)),c=e.g[0],n=mr,r=c.duration*c.timescale,u=Math.floor(r/(Hl+1)),r=Math.floor(r%(Hl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(c.timescale,4)),T(oi(u,4)),T(oi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),r=[],e=m(e.g),E=e.next();!E.done;E=e.next())f=r,h=f.push,E=new Uint8Array([0,0,0,0].concat(T(oi(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(f,E);if(e=li.apply(Pi,T(r)),e=mr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),f=c.next();!f.done;f=c.next())if(f=f.value,f.initData)for(f=m(f.initData),h=f.next();!h.done;h=f.next())r.push(h.value.initData);c=li.apply(Pi,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(qv.byteLength+e.byteLength),t.set(qv),t.set(e,qv.byteLength),t}function fM(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,f=[],h=[],E=0,S=0,k=0,G=0;G<e.Sa.length;G++){var ne=hM(e.Sa[G]);switch(ne[0]&31){case 7:f.push(ne),c+=ne.length+2;break;case 8:h.push(ne),c+=ne.length+2}}for(0<f.length&&(E=f[0][1],k=f[0][2],S=f[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=S,c[G++]=255,c[G++]=224|f.length,E=0;E<f.length;E++)c[G++]=(f[E].length&65280)>>8,c[G++]=f[E].length&255,c.set(f[E],G),G+=f[E].length;for(c[G++]=h.length,f=0;f<h.length;f++)c[G++]=(h[f].length&65280)>>8,c[G++]=h[f].length&255,c.set(h[f],G),G+=h[f].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(n,2)),T(oi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=dM(e),f=new Uint8Array([]),e.encrypted&&(f=Id(e),r="encv"),n=mr(r,n,u,h,f)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(r,2)),T(oi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=dM(e),f=new Uint8Array([]),e.encrypted&&(f=Id(e),u="encv"),n=mr(u,r,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",Np(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Id(e),r="enca"),e=mr(r,Np(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Id(e),r="enca"),e=mr(r,Np(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=Id(e),r="enca"),e=mr(r,Np(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,r=e.id+1,u=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,E=Fu("audio",e.codecs.split(",")),S={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=S[f],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=S[2*f]),f=parseInt(E.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(oi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Id(e),r="enca"),e=mr(r,Np(e),n,u)),n=e}return e=mr("stsd",kj,n),t("stbl",e,mr("stts",Nj),mr("stsc",Mj),mr("stsz",Pj),mr("stco",Dj))}function dM(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(oi(e.xa,4)),T(oi(t,4)))),mr("pasp",e)}function Np(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(oi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Id(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(oi(r,4)))),n=mr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=mr("schm",r),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=m(f.keyIds);for(var h=f.next();!h.done;h=f.next())c=hM(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Mp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=mr,f=new Uint8Array([0,0,0,0].concat(T(oi(n.data?n.data.jb:0,4))));f=mr("mfhd",f);var h,E=n.data?n.data.Ra:[],S=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;S[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",S);var G=E.length+92;S=mr,h=new Uint8Array([0,0,0,58].concat(T(oi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var ne=Math.floor(k%(Hl+1));k=new Uint8Array([1,0,0,0].concat(T(oi(Math.floor(k/(Hl+1)),4)),T(oi(ne,4)))),k=mr("tfdt",k);var z=G;G=n.data?n.data.Ra:[],ne=G.length;var ye=12+16*ne,Le=new Uint8Array(ye);for(z+=8+ye,Le.set([n.type==="video"?1:0,0,15,1].concat(T(oi(ne,4)),T(oi(z,4))),0),z=0;z<ne;z++){var De=G[z];ye=oi(De.duration,4);var He=oi(De.size,4),Se=De.flags;De=oi(De.Ta,4),Le.set([].concat(T(ye),T(He),[Se.Va<<2|Se.Ka,Se.Na<<6|Se.Ma<<4|Se.Wa,Se.Ja&61440,Se.Ja&15],T(De)),12+16*z)}G=mr("trun",Le),E=S("traf",h,k,G,E),c=c("moof",f,E),u.call(r,t,[c,Cj(n)])}return li.apply(Pi,T(t))}function Cj(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=li.apply(Pi,T(e)),mr("mdat",e)}function oi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function hM(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=We.apply(1,arguments),n=gM[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],gM[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var pM=!1,Hl=Math.pow(2,32)-1,gM={},Rj=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),xj=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Nj=new Uint8Array([0,0,0,0,0,0,0,0]),Mj=new Uint8Array([0,0,0,0,0,0,0,0]),Dj=new Uint8Array([0,0,0,0,0,0,0,0]),Pj=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Oj=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Lj=new Uint8Array([0,0,0,0,0,0,0,0]),kj=new Uint8Array([0,0,0,0,0,0,0,1]),qv=new Uint8Array([]),Fj=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a1=new Uint8Array([]);function s1(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){Uj(e)}),this.A=new Ol,this.m=new Map}g=s1.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return Me(function(r){if(r.g==1)return n.l=[e],n.h=t,x(r,u1(n),2);if(!n.h)throw new pt(2,7,7001);return r.return(n.j)})};function Uj(e){var t;Me(function(n){switch(n.g){case 1:return ce(n,2),x(n,u1(e),4);case 4:me(n,3);break;case 2:t=Ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return Me(function(n){if(n.g==1)return ce(n,2),x(n,u1(e),4);if(n.g!=2)return me(n,0);if(t=Ce(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function u1(e){var t,n,r,u,c,f,h;return Me(function(E){if(E.g==1)return t=Oi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5}),gu(e.A,u),x(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var S=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=Ym){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=TN(k,"SmoothStreamingMedia"),!k)throw new pt(2,4,4046,S);G(k),k=Ka(k.outerHTML)}var ne=Yh(k,"SmoothStreamingMedia");if(!ne)throw new pt(2,4,4046,S);if(S=e.g.mss.manifestPreprocessorTXml,S!=Wm&&S(ne),e.i||(e.i=new tr(null,0)),S=_r(ne,"IsLive",Wh,!1))throw new pt(2,4,4047);e.i.Ec(!S),G=_r(ne,"TimeScale",Co,1e7),k=_r(ne,"DVRWindowLength",Co),S&&(k===0||isNaN(k))&&(k=1/0);var z=_r(ne,"CanSeek",Wh,!1);k===0&&z&&(k=1/0),z=null,k&&0<k&&(z=k/G),S&&!isNaN(e.g.availabilityWindowOverride)&&(z=e.g.availabilityWindowOverride),z==null&&(z=1/0),e.i.je(z),k=_r(ne,"Duration",Co,1/0),S||e.i.Za(k/G),S={variants:[],textStreams:[],timescale:G,duration:k/G},z=Wr(ne,"Protection");var ye;for(G=e.g.mss.keySystemsBySystemId,k=[],z=m(z),ye=z.next();!ye.done;ye=z.next())k=k.concat(Wr(ye.value,"ProtectionHeader"));if(k.length){for(z=[],ye=0;ye<k.length;ye++){var Le=k[ye],De=Le.attributes.SystemID.toLowerCase(),He=G[De];if(He){var Se=cM(Le);if(Se)e:{Se=m(Ia(Se,"DATA"));for(var Qe=Se.next();!Qe.done;Qe=Se.next())if(Qe=ua(Qe.value,"KID")){Se=qo(Ci(Qe)),Se=new Uint8Array([Se[3],Se[2],Se[1],Se[0],Se[5],Se[4],Se[7],Se[6]].concat(T(Se.slice(8)))),Se=Ps(Se);break e}Se=null}else Se=null;Qe=qo(Ci(Le)),De=du(De.replace(/-/g,"")),De=[{initData:Hf(Qe,De,new Set,0),initDataType:"cenc",keyId:Se}],De=ku(He,"cenc",De),Se&&De.keyIds.add(Se),(He=bj.get(He))&&(De.licenseServerUri=He(Le)),z.push(De)}}G=z}else G=[];for(ye=G,z=[],G=[],k=[],ne=Wr(ne,"StreamIndex"),ne=m(ne),Le=ne.next();!Le.done;Le=ne.next()){Le=Le.value,He=Wr(Le,"QualityLevel"),De=S.timescale,Se=S.duration,Qe=Wr(Le,"c");for(var Be=[],vt=0,xt=0;xt<Qe.length;++xt){var Vt=Qe[xt],Bt=Qe[xt+1],_t=_r(Vt,"t",Co),Zt=_r(Vt,"d",Co);if(Vt=_r(Vt,"r",Xu),!Zt)break;if(_t=_t!=null?_t:vt,Vt=Vt||0,0>Vt)if(Bt){if(Bt=_r(Bt,"t",Co),Bt==null)break;if(_t>=Bt)break;Vt=Math.ceil((Bt-_t)/Zt)-1}else{if(Se==1/0)break;if(_t/De>=Se)break;Vt=Math.ceil((Se*De-_t)/Zt)-1}for(Bt=0;Bt<=Vt;++Bt)vt=_t+Zt,Be.push({start:_t/De,end:vt/De,Kf:_t}),_t=vt}for(De=Be,He=m(He),Se=He.next();!Se.done;Se=He.next())(Se=Bj(e,Le,Se.value,De,ye,S))&&(Se.type!="audio"||e.g.disableAudio?Se.type!="video"||e.g.disableVideo?Se.type!=vr||e.g.disableText||k.push(Se):G.push(Se):z.push(Se))}for(ne=[],z=m(0<z.length?z:[null]),ye=z.next();!ye.done;ye=z.next())for(ye=ye.value,Le=m(0<G.length?G:[null]),Se=Le.next();!Se.done;Se=Le.next())He=ne,De=He.push,Se=Se.value,Qe=0,ye&&ye.bandwidth&&0<ye.bandwidth&&(Qe+=ye.bandwidth),Se&&Se.bandwidth&&0<Se.bandwidth&&(Qe+=Se.bandwidth),Se={id:e.s++,language:ye?ye.language:"und",disabledUntilTime:0,primary:!!ye&&ye.primary||!!Se&&Se.primary,audio:ye,video:Se,bandwidth:Qe,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},De.call(He,Se);S.variants=ne,S.textStreams=k,e.j?(e.j.variants=S.variants,e.j.textStreams=S.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:S.variants,textStreams:S.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),f=Date.now(),h=(f-r)/1e3,e.B.sample(1,h),X(E)})}function Bj(e,t,n,r,u,c){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return Ve("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,E=e.s++,S=_r(n,"Bitrate",Us),k=_r(n,"MaxWidth",Us),G=_r(n,"MaxHeight",Us),ne=_r(n,"Channels",Us),z=_r(n,"SamplingRate",Us),ye=c.duration;r.length&&(ye=r[r.length-1].end-r[0].start);var Le=e.i.getDuration();e.i.Za(Math.min(ye,Le));var De={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:S||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Cr(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:ne,audioSamplingRate:z,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ye,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=Kj[u])&&De.roles.push(u),u==="main"&&(De.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(f==="audio")u="AAC";else if(f==="video")return Ve('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!Hj.includes(u.toUpperCase()))return Ve("Codec not supported:",u),null;switch(n=jj(n,f,u,De),De.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return Ve("Quality unsupported without CodecPrivateData",f),null;De.type="audio",De.mimeType="mss/audio/mp4",De.codecs=Zj(u,n);break;case"video":if(!n)return Ve("Quality unsupported without CodecPrivateData",f),null;De.type="video",De.mimeType="mss/video/mp4",De.codecs=Gj(n);break;case"text":De.type=vr,De.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(De.codecs="stpp")}return De.fullMimeTypes.add(Si(De.mimeType,De.codecs)),De.createSegmentIndex=function(){if(De.segmentIndex)return Promise.resolve();if(e.m.has(De.id))var He=e.m.get(De.id);else He=[],De.type=="video"&&(He=De.mssPrivateData.codecPrivateData.split("00000001").slice(1)),He={id:De.id,type:De.type,codecs:De.codecs,encrypted:De.encrypted,timescale:De.mssPrivateData.timescale,duration:De.mssPrivateData.duration,Sa:He,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:De},He=Ad(new wd([He])),e.m.set(De.id,He);return He=qj(e,new dt(function(){return[]},0,null,null,void 0,He),De,t,r),De.segmentIndex=new wr(He),Promise.resolve()},De.closeSegmentIndex=function(){De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null)},De}function jj(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function Zj(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function Gj(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function qj(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];var f={};u=m(u);for(var h=u.next();!h.done;f={Pc:f.Pc},h=u.next())f.Pc=h.value,r.push(new et(f.Pc.start,f.Pc.end,function(E){return function(){return co(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(f),0,null,t,0,0,n.mssPrivateData.duration));return r}te("shaka.mss.MssParser",s1);var Hj="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Kj={CAPT:"main",SUBT:"alternate",DESC:"main"};Fe["application/vnd.ms-sstr+xml"]=function(){return new s1};function mM(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=Ha(t)}catch(f){}throw new pt(n==401||n==403?2:1,1,1001,r,n,u,e,c)}function l1(){}function Hv(e,t,n,r,u){var c=new $j;Ll(t.headers).forEach(function(S,k){c.append(k,S)});var f=new Yj,h={Rf:!1,Jg:!1};if(e=Vj(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:f.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,r,u,t.streamDataCallback),e=new pi(e,function(){return h.Rf=!0,f.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,f.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function Vj(e,t,n,r,u,c,f){var h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe;return Me(function(Be){switch(Be.g){case 1:return h=zj,E=Wj,ne=G=0,z=Date.now(),ce(Be,2),x(Be,h(e,n),4);case 4:if(S=Be.h,c(vM(S.headers)),n.method=="HEAD"){Be.u(5);break}return ye=S.clone().body.getReader(),De=(Le=S.headers.get("Content-Length"))?parseInt(Le,10):0,He=function(vt){function xt(){var Vt,Bt;return Me(function(_t){switch(_t.g){case 1:return ce(_t,2),x(_t,ye.read(),4);case 4:Vt=_t.h,me(_t,3);break;case 2:return Ce(_t),_t.return();case 3:if(Vt.done){_t.u(5);break}if(G+=Vt.value.byteLength,!f){_t.u(5);break}return x(_t,f(Vt.value),5);case 5:Bt=Date.now(),(100<Bt-z||Vt.done)&&(u(Bt-z,G-ne,De-G),ne=G,z=Bt),Vt.done?vt.close():(vt.enqueue(Vt.value),xt()),X(_t)}})}xt()},new E({start:He}),x(Be,S.arrayBuffer(),6);case 6:k=Be.h;case 5:me(Be,3);break;case 2:throw Se=Ce(Be),r.Rf?new pt(1,1,7001,e,t):r.Jg?new pt(1,1,1003,e,t):new pt(1,1,1002,e,Se,t);case 3:return Qe=vM(S.headers),Be.return(mM(Qe,k,S.status,e,S.url,t))}})}function vM(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function yM(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}te("shaka.net.HttpFetchPlugin",l1),l1.isSupported=yM,l1.parse=Hv;var zj=p.fetch,Yj=p.AbortController,Wj=p.ReadableStream,$j=p.Headers;yM()&&(Ho("http",Hv,2,!0),Ho("https",Hv,2,!0),Ho("blob",Hv,2,!0));function EM(){}function Kv(e,t,n,r,u){var c=new Xj,f=Date.now(),h=0,E=new Promise(function(S,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new pt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var z=_M(c);u(z),G=!0}},c.onload=function(){var z=_M(c),ye=c.response;try{var Le=mM(z,ye,c.status,e,c.responseURL,n);S(Le)}catch(De){k(De)}},c.onerror=function(z){k(new pt(1,1,1002,e,z,n))},c.ontimeout=function(){k(new pt(1,1,1003,e,n))},c.onprogress=function(z){var ye=Date.now();(100<ye-f||z.lengthComputable&&z.loaded==z.total)&&(r(ye-f,z.loaded-h,z.total-z.loaded),h=z.loaded,f=ye)};for(var ne in t.headers)c.setRequestHeader(ne.toLowerCase(),t.headers[ne]);c.send(t.body)});return new pi(E,function(){return c.abort(),Promise.resolve()})}function _M(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}te("shaka.net.HttpXHRPlugin",EM),EM.parse=Kv;var Xj=p.XMLHttpRequest;Ho("http",Kv,1,!0),Ho("https",Kv,1,!0),Ho("blob",Kv,1,!0);function TM(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function c1(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function Qj(e,t){return ip(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function SM(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function wM(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}SM.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function AM(e){var t=this;this.o=e,this.j=new Map,this.i=new Wu(function(){return f1(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new SM}AM.prototype.destroy=function(){return this.i.destroy()};function Jj(e,t,n){e.m=t,e.l=n}function f1(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function eZ(e,t,n,r,u,c){jr(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,S,k,G,ne,z;return Me(function(ye){if(ye.g==1)return x(ye,nZ(e,n),2);if(h=ye.h,e.i.g)throw new pt(2,9,7001);if(u)for(k in E=Qn(h),S=new Mm(E),S.data)G=Number(k),ne=S.data[G],z=S.g[G],e.l(ne,z);e.g.close(r,h.byteLength);var Le=e.g;return e.m(Le.i==0?0:Le.j/Le.i,e.g.h),ye.return(c(h))})});e.j.set(t,f)}function tZ(e){return Me(function(t){return t.g==1?x(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function nZ(e,t){var n,r,u,c;return Me(function(f){return f.g==1?(n=Ya,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),x(f,r.promise,2)):(c=f.h,gn(e.h,u),f.return(c.data))})}function Vv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Vv.prototype.abort=function(){var e=this;return Me(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return ce(t,2),x(t,e.g,4)}if(t.g!=2)return me(t,0);Ce(t),X(t)})};function d1(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Me(function(f){if(f.g==1)return u.result==null?(n(),f.return()):(c=u.result,x(f,t(c.key,c.value,c),2));c.continue(),X(f)})}})}Vv.prototype.store=function(){return this.h},Vv.prototype.promise=function(){return this.g};function h1(e){this.h=e,this.g=[]}h1.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Vc(e,t){return zv(e,t,"readwrite")}function zv(e,t,n){n=e.h.transaction([t],n);var r=new Vv(n,t);return e.g.push(r),r.promise().then(function(){gn(e.g,r)},function(){gn(e.g,r)}),r}function zc(e,t,n){this.h=new h1(e),this.i=t,this.g=n}g=zc.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return IM(this.i)},g.removeSegments=function(e,t){return bM(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return Me(function(r){return r.g==1?x(r,CM(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return IM(this.g)},g.updateManifest=function(){return Promise.reject(new pt(2,9,9016,"Cannot modify values in "+this.g))};function rZ(e,t,n){e=Vc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=Vc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},g.removeManifests=function(e,t){return bM(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return Me(function(r){return r.g==1?x(r,CM(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return Me(function(r){return r.g==1?(t=zv(e.h,e.g,"readonly"),n=new Map,x(r,d1(t,function(u,c){var f;return Me(function(h){if(h.g==1)return x(h,e.Yc(c),2);f=h.h,n.set(u,f),X(h)})}),2)):r.g!=3?x(r,t.promise(),3):r.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function IM(e){return Promise.reject(new pt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,r,u,c,f,h,E,S;return Me(function(k){if(k.g==1){for(r=Vc(n.h,e),u=r.store(),c=[],f={},h=m(t),E=h.next();!E.done;f={zd:f.zd},E=h.next())S=E.value,f.zd=u.add(S),f.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(f);return x(k,r.promise(),2)}return k.return(c)})};function bM(e,t,n,r){e=Vc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(f){return function(){return r(f.xd)}}(u);return e.promise()}function CM(e,t,n){var r,u,c,f,h,E,S;return Me(function(k){if(k.g==1){for(r=zv(e.h,t,"readonly"),u=r.store(),c={},f=[],h={},E=m(n),S=E.next();!S.done;h={Nc:h.Nc,Lc:h.Lc},S=E.next())h.Lc=S.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&f.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return x(k,r.promise(),2)}if(f.length)throw new pt(2,9,9012,"Could not find values for "+f);return k.return(n.map(function(G){return c[G]}))})}function Dp(e){this.g=new h1(e)}Dp.prototype.destroy=function(){return this.g.destroy()},Dp.prototype.getAll=function(){var e=this,t,n;return Me(function(r){return r.g==1?(t=zv(e.g,"session-ids","readonly"),n=[],x(r,d1(t,function(u,c){n.push(c)}),2)):r.g!=3?x(r,t.promise(),3):r.return(n)})},Dp.prototype.add=function(e){var t=Vc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},Dp.prototype.remove=function(e){var t=this,n;return Me(function(r){return r.g==1?(n=Vc(t.g,"session-ids"),x(r,d1(n,function(u,c,f){e.includes(c.sessionId)&&f.delete()}),2)):x(r,n.promise(),0)})};function Vo(){this.g=new Map}Vo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Vo.prototype.init=function(){var e=this;Pp.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function RM(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:r,Ba:c},Ba:u})})}),t)return t;throw new pt(2,9,9013,"Could not find a cell that supports add-operations")}function iZ(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({fb:r,Ba:c},u)})})}function Yv(e,t,n){if(e=e.g.get(t),!e)throw new pt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new pt(2,9,9013,"Could not find cell with name "+n);return t}function oZ(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function aZ(e){var t=Array.from(e.g.keys());if(!t.length)throw new pt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function sZ(e){var t,n,r;return Me(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Pp,r.forEach(function(c){(c=c())&&t.push(c)})),x(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):x(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function xM(e,t){Pp.set(e,t)}te("shaka.offline.StorageMuxer",Vo),Vo.unregister=function(e){Pp.delete(e)},Vo.register=xM,Vo.prototype.destroy=Vo.prototype.destroy;var Pp=new Map;function Op(){zc.apply(this,arguments)}Y(Op,zc),Op.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Me(function(f){return r=Vc(n.h,n.g),u=r.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new pt(2,9,9012,"Could not find values for "+e))},x(f,Promise.all([r.promise(),c]),0)})},Op.prototype.Yc=function(e){var t,n,r,u,c,f;return Me(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=uZ(e.periods[n],u),t.push(c);return x(h,hN(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function uZ(e,t){cZ(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return lZ(u,e.startTime,t)})}function lZ(e,t,n){var r=e.initSegmentUri?NM(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=NM(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Op.prototype.Tf=function(e){return{data:e.data}};function NM(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new pt(2,9,9004,"Could not parse uri "+e)}function cZ(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(r=c.next();!r.done;r=c.next())r.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),r=c.next();!r.done;r=c.next())r.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var f=n++;r.variantIds.push(f),c.variantIds.push(f)}}}function Wv(){zc.apply(this,arguments)}Y(Wv,zc),Wv.prototype.Yc=function(e){var t,n,r,u,c,f;return Me(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var E=e.periods[n],S=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&S.push(fZ(G,E.startTime,E.startTime+u));c=S,t.push(c)}return x(h,hN(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function fZ(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function p1(){zc.apply(this,arguments)}Y(p1,zc),g=p1.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return rZ(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function MM(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=MM.prototype,g.init=function(){var e=this,t=new Rr,n=!1,r=new pr(function(){n=!0,t.reject(new pt(2,9,9017))});r.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var f=c.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Op(c,"segment","manifest"):null,e.g=f,f=c.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new Wv(c,"segment-v2","manifest-v2"):null,e.h=f,f=c.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new Wv(c,"segment-v3","manifest-v3"):null,e.i=f,f=c.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new p1(c,"segment-v5","manifest-v5"):null,e.j=f,c=c.objectStoreNames.contains("session-ids")?new Dp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,f=m(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new pt(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return Me(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return x(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return Me(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),x(t,dZ(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,x(t,e.init(),0)}})};function dZ(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new pt(2,9,9001,t.error)),n.preventDefault()},e}xM("idb",function(){return oa()||gs()||!p.indexedDB?null:new MM});function Su(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}Su.prototype.fb=function(){return this.i},Su.prototype.Ba=function(){return this.h},Su.prototype.key=function(){return this.l},Su.prototype.toString=function(){return this.j};function g1(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new Su(t,n,r,Number(e[4])):null}function DM(e,t){this.h=e,this.g=t}function PM(e,t){var n=new tr(null,0);n.Za(t.duration);var r=t.streams.filter(function(S){return S.type=="audio"}),u=t.streams.filter(function(S){return S.type=="video"});r=hZ(e,r,u,n),u=t.streams.filter(function(S){return S.type==vr}).map(function(S){return $v(e,S,n)});var c=t.streams.filter(function(S){return S.type=="image"}).map(function(S){return $v(e,S,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=f),E.video&&E.video.encrypted&&(E.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function hZ(e,t,n,r){for(var u=new Set,c=m(t),f=c.next();!f.done;f=c.next()){var h=m(f.value.variantIds);for(f=h.next();!f.done;f=h.next())u.add(f.value)}for(c=m(n),f=c.next();!f.done;f=c.next())for(h=m(f.value.variantIds),f=h.next();!f.done;f=h.next())u.add(f.value);for(c=new Map,u=m(u),f=u.next();!f.done;f=u.next())f=f.value,c.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,f=$v(e,u,r),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=f.language,u.primary=u.primary||f.primary,u.audio=f;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=$v(e,u,r),f=m(u.variantIds),u=f.next();!u.done;u=f.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function $v(e,t,n){var r=t.segments.map(function(u){return pZ(e,u,t)});return n.ld(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Si(t.mimeType,t.codecs)])}}function pZ(e,t,n){var r=new Su("segment",e.h,e.g,t.dataKey);return e=new et(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?gZ(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function gZ(e,t){var n=new Su("segment",e.h,e.g,t);return new dt(function(){return[n.toString()]},0,null)}function OM(){this.g=null}g=OM.prototype,g.configure=function(){},g.start=function(e,t){var n=this,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:if(r=g1(e),n.g=r,r==null||r.g!="manifest")throw new pt(2,1,9004,e);return u=new Vo,oe(k,2),x(k,u.init(),4);case 4:return x(k,Yv(u,r.fb(),r.Ba()),5);case 5:return c=k.h,x(k,c.getManifests([r.key()]),6);case 6:return f=k.h,h=f[0],E=new DM(r.fb(),r.Ba()),S=PM(E,h),t.makeTextStreamsForClosedCaptions(S),k.return(S);case 2:return Je(k),x(k,u.destroy(),7);case 7:Te(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:return r=n.g,u=new Vo,ce(k,2,3),x(k,u.init(),5);case 5:return x(k,Yv(u,r.fb(),r.Ba()),6);case 6:return c=k.h,x(k,c.getManifests([r.key()]),7);case 7:if(f=k.h,h=f[0],E=h.sessionIds.includes(e),S=h.expiration==null||h.expiration>t,!E||!S){k.u(3);break}return x(k,c.updateManifestExpiration(r.key(),t),3);case 3:return Je(k),x(k,u.destroy(),10);case 10:Te(k,0);break;case 2:Ce(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},Fe["application/x-offline-manifest"]=function(){return new OM};function LM(){}function kM(e){var t=g1(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Yu(e)):e=t&&t.g=="segment"?mZ(t.key(),t):pu(new pt(2,1,9004,e)),e}function mZ(e,t){var n=new Vo;return Yu(void 0).va(function(){return n.init()}).va(function(){return Yv(n,t.fb(),t.Ba())}).va(function(r){return r.getSegments([t.key()])}).va(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}te("shaka.offline.OfflineScheme",LM),LM.plugin=kM,Ho("offline",kM);function FM(e,t,n){var r,u,c,f,h,E;return Me(function(S){switch(S.g){case 1:r=[];for(var k=[],G=m(n),ne=G.next();!ne.done;ne=G.next()){ne=ne.value;for(var z=!1,ye=m(k),Le=ye.next();!Le.done;Le=ye.next())if(Le=Le.value,yZ(Le.info,ne)){Le.sessionIds.push(ne.sessionId),z=!0;break}z||k.push({info:ne,sessionIds:[ne.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){S.u(4);break}return f=c.value,h=vZ(e,t,f),x(S,h,5);case 5:E=S.h,r=r.concat(E),c=u.next(),S.u(2);break;case 4:return S.return(r)}})}function vZ(e,t,n){var r,u;return Me(function(c){switch(c.g){case 1:return r=new Lc({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(c,2),r.configure(e),x(c,Lm(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:me(c,3);break;case 2:return Ce(c),x(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],x(c,Promise.all(n.sessionIds.map(function(f){return Me(function(h){if(h.g==1)return ce(h,2),x(h,OE(r,f),4);if(h.g!=2)return u.push(f),me(h,0);Ce(h),X(h)})})),6);case 6:return x(c,r.destroy(),7);case 7:return c.return(u)}})}function yZ(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function EZ(e,t,n){var r=t.presentationTimeline.getDuration();return t=UM(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function m1(e,t){var n=PM(new DM(e.fb(),e.Ba()),t),r=t.appMetadata||{};return n=UM(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function UM(e){var t=[],n=Ff(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(xl(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Nl(n.value));return t}function _Z(){this.g={}}function TZ(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function SZ(e,t){e.g[t.id]=t.bandwidth||2048}function BM(e,t){return e=e.g[t],e==null&&(e=0),e}function ao(e){var t=this;if(e&&e.constructor!=dn)throw new pt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=td(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new Wu(function(){var r,u,c,f,h;return Me(function(E){switch(E.g){case 1:return x(E,Promise.all(t.j.map(function(S){return f1(S)})),2);case 2:for(r=function(){},u=[],c=m(t.i),f=c.next();!f.done;f=c.next())h=f.value,u.push(h.then(r,r));return x(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return x(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(E)}})})}function v1(){if(Ao())e:{for(var e=m(Pp.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=ao.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=zm(e,t)),jc(this.h,e)},g.getConfiguration=function(){var e=td();return jc(e,this.h,td()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new AM(this.g);return this.j.push(c),t=wZ(this,e,t||{},function(){var f;return Me(function(h){return h.g==1?n?h.u(2):x(h,o_(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=be(e,n||null),h.return(f()))})},u,c),t=new pi(t,function(){return f1(c)}),t.finally(function(){gn(r.j,c)}),kZ(this,t)};function wZ(e,t,n,r,u,c){var f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe;return Me(function(Be){switch(Be.g){case 1:return Xv(),h=f=null,E=new Vo,G=k=S=null,ce(Be,2,3),x(Be,r(),5);case 5:return f=Be.h,x(Be,DZ(e,t,f,u),6);case 6:if(ne=Be.h,vo(e),z=!ne.presentationTimeline.R()&&!ne.presentationTimeline.dc(),!z)throw new pt(2,9,9005,t);return x(Be,e.rc(ne,function(vt){G=G||vt},u),7);case 7:if(h=Be.h,vo(e),G)throw G;return x(Be,IZ(ne,h,u),8);case 8:return x(Be,E.init(),9);case 9:return vo(e),x(Be,RM(E),10);case 10:return S=Be.h,vo(e),ye=bZ(h,ne,t,n,u,c),Le=ye.Sh,De=ye.Hf,x(Be,S.Ba.addManifests([Le]),11);case 11:if(He=Be.h,vo(e),k=He[0],vo(e),G)throw G;return x(Be,AZ(e,De,k,Le,c,u,S.Ba,ne,h),12);case 12:return vo(e),qM(ne,Le,h,u),x(Be,S.Ba.updateManifest(k,Le),13);case 13:return vo(e),Se=new Su("manifest",S.path.fb,S.path.Ba,k),Be.return(m1(Se,Le));case 3:return Je(Be),x(Be,E.destroy(),14);case 14:if(!f){Be.u(15);break}return x(Be,f.stop(),15);case 15:if(!h){Be.u(17);break}return x(Be,h.destroy(),17);case 17:Te(Be,0);break;case 2:if(Qe=Ce(Be),k==null){Be.u(19);break}return x(Be,jM(k),19);case 19:throw G||Qe}})}function AZ(e,t,n,r,u,c,f,h,E){var S,k,G,ne,z,ye,Le,De,He,Se;return Me(function(Qe){switch(Qe.g){case 1:if(S={},k=0,G=function(Be,vt){var xt,Vt,Bt,_t,Zt,ln,pn;return Me(function(Ln){if(Ln.g==1){for(xt={},Vt=m(Be),Bt=Vt.next();!Bt.done;xt={Ob:xt.Ob},Bt=Vt.next())xt.Ob=Bt.value,_t=Qj(xt.Ob,c),Zt=xt.Ob.i,ln=xt.Ob.h,pn=function(Mn){return function(qn){var Yn,Kn,Nr;return Me(function(fi){if(fi.g==1)return x(fi,f.addSegments([{data:qn}]),2);Yn=fi.h,vo(e),Kn=Mn.Ob.g,Nr=c1(Kn),S[Nr]=Yn[0],k+=qn.byteLength,X(fi)})}}(xt),eZ(u,xt.Ob.groupId,_t,Zt,ln,pn);return x(Ln,tZ(u),2)}return vt?(vo(e),qM(h,r,E,c),x(Ln,f.updateManifest(n,r),0)):Ln.u(0)})},ne=!1,ce(Qe,2),!y1(h)||!ne||GM(h)){Qe.u(4);break}return x(Qe,G(t.filter(function(Be){return Be.h}),!0),5);case 5:return vo(e),t=t.filter(function(Be){return!Be.h}),z=S,ye=k,S={},k=0,x(Qe,ZM(f,n,r,z,ye,function(){return vo(e)}),6);case 6:vo(e);case 4:if(ne){Qe.u(7);break}return x(Qe,G(t,!1),8);case 8:return vo(e),Le=S,De=k,S={},k=0,x(Qe,ZM(f,n,r,Le,De,function(){return vo(e)}),9);case 9:vo(e);case 7:me(Qe,0);break;case 2:return He=Ce(Qe),Se=Object.values(S),x(Qe,f.removeSegments(Se,function(){}),10);case 10:throw He}})}function jM(e){var t,n,r,u;return Me(function(c){switch(c.g){case 1:return t=new Vo,x(c,t.init(),2);case 2:return x(c,RM(t),3);case 3:return n=c.h,r=new Su("manifest",n.path.fb,n.path.Ba,e),x(c,t.destroy(),4);case 4:return u=new ao,x(c,u.remove(r.toString()),0)}})}function ZM(e,t,n,r,u,c){var f,h,E,S,k,G,ne,z,ye,Le,De;return Me(function(He){switch(He.g){case 1:for(f=!1,ce(He,2),h=!0,E=m(n.streams),S=E.next();!S.done;S=E.next())for(k=S.value,G=m(k.segments),ne=G.next();!ne.done;ne=G.next())z=ne.value,ye=z.pendingSegmentRefId?r[z.pendingSegmentRefId]:null,ye!=null&&(z.dataKey=ye,z.pendingSegmentRefId=void 0),ye=z.pendingInitSegmentRefId?r[z.pendingInitSegmentRefId]:null,ye!=null&&(z.initSegmentKey=ye,z.pendingInitSegmentRefId=void 0),z.pendingSegmentRefId&&(h=!1),z.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),x(He,e.updateManifest(t,n),4);case 4:f=!0,c(),me(He,0);break;case 2:return Le=Ce(He),x(He,jM(t),5);case 5:if(f){He.u(6);break}return De=Object.values(r),x(He,e.removeSegments(De,function(){}),6);case 6:throw Le}})}function IZ(e,t,n){var r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe,Be,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return Me(function(qn){switch(qn.g){case 1:return r={width:1/0,height:1/0},Mh(e,n.restrictions,r),x(qn,hm(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,fm(e,f,h,c),E=m(e.variants),S=E.next();!S.done;S=E.next())k=S.value,u.push(xl(k));for(G=m(e.textStreams),ne=G.next();!ne.done;ne=G.next())z=ne.value,u.push(Nl(z));for(ye=m(e.imageStreams),Le=ye.next();!Le.done;Le=ye.next())De=Le.value,u.push(Ku(De));return x(qn,n.offline.trackSelectionCallback(u),3);case 3:for(He=qn.h,Se=e.presentationTimeline.getDuration(),Qe=0,Be=m(He),vt=Be.next();!vt.done;vt=Be.next())xt=vt.value,Vt=xt.bandwidth*Se/8,Qe+=Vt;return ce(qn,4),x(qn,n.offline.downloadSizeCallback(Qe),6);case 6:if(Bt=qn.h,!Bt)throw new pt(2,9,9014);me(qn,5);break;case 4:throw _t=Ce(qn),_t instanceof pt?_t:new pt(2,9,9015);case 5:for(Zt=new Set,ln=new Set,pn=new Set,Ln=m(He),vt=Ln.next();!vt.done;vt=Ln.next())Mn=vt.value,Mn.type=="variant"&&Zt.add(Mn.id),Mn.type=="text"&&ln.add(Mn.id),Mn.type=="image"&&pn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return Zt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return ln.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return pn.has(Yn.id)}),BZ(e),X(qn)}})}function bZ(e,t,n,r,u,c){var f=EZ(n,t,r),h=u.offline.progressCallback;Jj(c,function(z,ye){f.size=ye,h(f,z)},function(z,ye){E&&u.offline.usePersistentLicense&&S==ye&&Ul(e,"cenc",z)});var E=y1(t)&&!GM(t),S=null;E&&(S=jZ.get(e.g.keySystem));for(var k=new _Z,G=m(t.textStreams),ne=G.next();!ne.done;ne=G.next())k.g[ne.value.id]=52;for(G=m(t.imageStreams),ne=G.next();!ne.done;ne=G.next())SZ(k,ne.value);for(ne=m(t.variants),G=ne.next();!G.done;G=ne.next())TZ(k,G.value);return k=PZ(c,k,t,u),c=k.streams,k=k.Hf,ne=e.g,G=u.offline.usePersistentLicense,ne&&G&&(ne.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?Jh(e):[],drmInfo:ne,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function y1(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function GM(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function qM(e,t,n,r){if(t.expiration=n.cd(),n=Jh(n),t.sessionIds=r.offline.usePersistentLicense?n:[],y1(e)&&r.offline.usePersistentLicense&&!n.length)throw new pt(2,9,9007)}g.remove=function(e){return E1(this,CZ(this,e))};function CZ(e,t){var n,r,u,c,f,h;return Me(function(E){switch(E.g){case 1:if(Xv(),n=g1(t),n==null||n.g!="manifest")throw new pt(2,9,9004,t);return r=n,u=new Vo,oe(E,2),x(E,u.init(),4);case 4:return x(E,Yv(u,r.fb(),r.Ba()),5);case 5:return c=E.h,x(E,c.getManifests([r.key()]),6);case 6:return f=E.h,h=f[0],x(E,Promise.all([RZ(e,h,u),xZ(c,r,h)]),2);case 2:return Je(E),x(E,u.destroy(),8);case 8:Te(E,0)}})}function HM(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function RZ(e,t,n){return Me(function(r){return x(r,UZ(e.g,e.h.drm,n,t),0)})}function xZ(e,t,n){function r(){}var u=FZ(n);return m1(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}g.ji=function(){return E1(this,NZ(this))};function NZ(e){var t,n,r,u,c,f,h,E,S,k;return Me(function(G){switch(G.g){case 1:return Xv(),t=e.g,n=e.h.drm,r=new Vo,u=!1,oe(G,2),x(G,r.init(),4);case 4:c=[],oZ(r,function(ne){return c.push(ne)}),f=m(c),h=f.next();case 5:if(h.done){G.u(2);break}return E=h.value,x(G,E.getAll(),8);case 8:return S=G.h,x(G,FM(n,t,S),9);case 9:return k=G.h,x(G,E.remove(k),10);case 10:k.length!=S.length&&(u=!0),h=f.next(),G.u(5);break;case 2:return Je(G),x(G,r.destroy(),11);case 11:Te(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return E1(this,MZ())};function MZ(){var e,t,n;return Me(function(r){switch(r.g){case 1:return Xv(),e=[],t=new Vo,oe(r,2),x(r,t.init(),4);case 4:return n=Promise.resolve(),iZ(t,function(u,c){n=n.then(function(){var f;return Me(function(h){if(h.g==1)return x(h,c.getAllManifests(),2);f=h.h,f.forEach(function(E,S){E=m1(new Su("manifest",u.fb,u.Ba,S),E),e.push(E)}),X(h)})})}),x(r,n,2);case 2:return Je(r),x(r,t.destroy(),6);case 6:Te(r,3);break;case 3:return r.return(e)}})}function DZ(e,t,n,r){var u,c,f,h,E;return Me(function(S){if(S.g==1)return u=null,c=e.g,f={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),vo(e),x(S,n.start(t,f),2);if(S.g!=3)return h=S.h,vo(e),E=KM(h),x(S,Promise.all(Gf(E,function(k){return k.createSegmentIndex()})),3);if(vo(e),u)throw u;return S.return(h)})}g.rc=function(e,t,n){var r=this,u;return Me(function(c){return c.g==1?(u=new Lc({zb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),x(c,Pm(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?x(c,Qh(u),3):c.return(u)})};function PZ(e,t,n,r){var u=new Map,c=KM(n),f=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=OZ(e,t,n,h,r,u);f.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Hf:Array.from(u.values())}}function OZ(e,t,n,r,u,c){var f={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return LZ(r,n.presentationTimeline.qb(),function(S){var k=c1(S),G=void 0;if(!c.has(k)){var ne=S.endTime-S.startTime;ne=BM(t,r.id)*ne,ne=wM(e.g,ne),c.set(k,new TM(S,ne,E,!1))}S.ca&&(G=c1(S.ca),c.has(G)||(ne=.5*BM(t,r.id),ne=wM(e.g,ne),c.set(G,new TM(S.ca,ne,E,!0)))),f.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:S.startTime,endTime:S.endTime,appendWindowStart:S.appendWindowStart,appendWindowEnd:S.appendWindowEnd,timestampOffset:S.timestampOffset,tilesLayout:S.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:S.mimeType,codecs:S.codecs}),E=(E+1)%h}),f}function LZ(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function vo(e){if(e.l.g)throw new pt(2,9,7001)}function Xv(){if(!v1())throw new pt(2,9,9e3)}function E1(e,t){return Me(function(n){return n.g==1?(e.i.push(t),oe(n,2),x(n,t,4)):n.g!=2?n.return(n.h):(Je(n),gn(e.i,t),Te(n,0))})}function kZ(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){gn(e.i,n)})}function FZ(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function UZ(e,t,n,r){var u,c,f;return Me(function(h){return h.g==1?r.drmInfo?(u=aZ(n),c=r.sessionIds.map(function(E){return{sessionId:E,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:HM(r,!1),videoCapabilities:HM(r,!0)}}),x(h,FM(t,e,c),2)):h.return():h.g!=3?(f=h.h,x(h,u.remove(f),3)):x(h,u.add(c.filter(function(E){return!f.includes(E.sessionId)})),0)})}function KM(e){for(var t=new Set,n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=m(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function BZ(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}te("shaka.offline.Storage",ao),ao.deleteAll=function(){var e;return Me(function(t){return t.g==1?(e=new Vo,oe(t,2),x(t,sZ(e),2)):t.g!=5?(Je(t),x(t,e.destroy(),5)):Te(t,0)})},ao.prototype.list=ao.prototype.list,ao.prototype.removeEmeSessions=ao.prototype.ji,ao.prototype.remove=ao.prototype.remove,ao.prototype.store=ao.prototype.store,ao.prototype.getNetworkingEngine=ao.prototype.Zb,ao.prototype.getConfiguration=ao.prototype.getConfiguration,ao.prototype.configure=ao.prototype.configure,ao.prototype.destroy=ao.prototype.destroy,ao.support=v1;var jZ=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");T_.offline=v1;function yo(){}function zo(e,t){for(e={priority:t||0,callback:e},t=0;t<Lp.length;t++)if(Lp[t].priority<e.priority){Lp.splice(t,0,e);return}Lp.push(e)}te("shaka.polyfill",yo),yo.register=zo,yo.installAll=function(){for(var e=m(Lp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ve("Error installing polyfill!",n)}}};var Lp=[];function kp(){this.g=new Qv}function VM(){p.AbortController||(p.AbortController=kp,p.AbortSignal=Qv)}kp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(kp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),yo.AbortController=kp,kp.install=VM;function Qv(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}Y(Qv,Sr),y.Object.defineProperties(Qv.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),zo(VM);function zM(){}function YM(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())ZZ(t.value)}function ZZ(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}yo.Aria=zM,zM.install=YM,zo(YM);function WM(){}function $M(){dD()}yo.EncryptionScheme=WM,WM.install=$M,zo($M,-2);function XM(){}function QM(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",bd),document.addEventListener("webkitfullscreenerror",bd),document.addEventListener("mozfullscreenchange",bd),document.addEventListener("mozfullscreenerror",bd),document.addEventListener("MSFullscreenChange",bd),document.addEventListener("MSFullscreenError",bd)}}function bd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}yo.Fullscreen=XM,XM.install=QM,zo(QM);function Fp(){}function JM(){var e=!0;(ms()||yc()||xr()||ia()||Ga()||oa()||Yr("PC=EOS")||vs())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),e2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=GZ)}function GZ(e){var t,n,r,u,c,f,h,E,S,k,G,ne,z,ye,Le,De,He,Se,Qe;return Me(function(Be){switch(Be.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Be.return(t);if(n=e.video,r=e.audio,e.type=="media-source"){if(!Ao())return Be.return(t);if(n){if(oa())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var vt=n.contentType;if(n.width&&n.height&&(vt+="; width="+n.width+"; height="+n.height),n.framerate&&(vt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(vt+="; eotf=smpte2084"),vt in ey)var xt=ey[vt];else xt=cast.__platform__.canDisplayType(vt),ey[vt]=xt;u=xt}else u=Ot(n.contentType);else Ga()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Ot(c)):u=Ot(n.contentType);if(!u)return Be.return(t)}if(r&&(oa()&&r.spatialRendering?(h=r.contentType+"; spatialRendering=true",f=Ot(h)):f=Ot(r.contentType),!f))return Be.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,S=lu(E),!S)||r&&(k=r.contentType,G=lu(k),!G))return Be.return(t)}else return Be.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Be.return(Promise.resolve(t));if(ne=e.keySystemConfiguration,z=[],ye=[],ne.audio&&(Le={robustness:ne.audio.robustness||"",contentType:e.audio.contentType},Ga()&&e.audio.contentType.includes('codecs="ac-3"')&&(Le={robustness:Le.robustness,contentType:'audio/mp4; codecs="ec-3"'}),ne.audio.encryptionScheme&&(Le={robustness:Le.robustness,contentType:Le.contentType,encryptionScheme:ne.audio.encryptionScheme}),z.push(Le)),ne.video&&(De={robustness:ne.video.robustness||"",contentType:e.video.contentType},ne.video.encryptionScheme&&(De={robustness:De.robustness,contentType:De.contentType,encryptionScheme:ne.video.encryptionScheme}),ye.push(De)),He={initDataTypes:[ne.initDataType],distinctiveIdentifier:ne.distinctiveIdentifier,persistentState:ne.persistentState,sessionTypes:ne.sessionTypes},z.length&&(He.audioCapabilities=z),ye.length&&(He.videoCapabilities=ye),Se=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,ce(Be,3),Se in Jv){Qe=Jv[Se],Be.u(5);break}return x(Be,navigator.requestMediaKeySystemAccess(ne.keySystem,[He]),6);case 6:Qe=Be.h,Jv[Se]=Qe;case 5:me(Be,4);break;case 3:Ce(Be);case 4:Qe&&(t.supported=!0,t.keySystemAccess=Qe);case 2:return Be.return(t)}})}yo.MediaCapabilities=Fp,Fp.install=JM;var e2=null;Fp.originalMcap=e2;var Jv={};Fp.memoizedMediaKeySystemAccessRequests_=Jv;var ey={};Fp.memoizedCanDisplayTypeRequests_=ey,zo(JM,-1);function t2(){}function n2(){var e=ys();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(r2(),qZ()):15>=e&&r2():(Lu()||Ou()||Yr("Tizen 4"))&&KZ()),(p.MediaSource||p.ManagedMediaSource)&&HZ(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&VZ()}function r2(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,We.apply(0,arguments));return t.abort=function(){},t}}function qZ(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function HZ(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return xf(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return xf(n)!="mp2t"&&t(n)}}}function KZ(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Va(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Va(n)!="opus"&&t(n)}}}function VZ(){var e=MediaSource.isTypeSupported;ia()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(f){return f.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}yo.MediaSource=t2,t2.install=n2,zo(n2);function i2(){}function o2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?zZ():p.orientation!=null&&YZ())}function zZ(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function YZ(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new ty;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}yo.Orientation=i2,i2.install=o2;function ty(){Sr.call(this),this.type="",this.angle=0}Y(ty,Sr),ty.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},ty.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},zo(o2);function _1(){}var T1,S1,w1,A1,I1,b1;function WZ(e,t){try{var n=new ny(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function $Z(e){var t=this.mediaKeys;return t&&t!=e&&a2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?a2(e,this):Promise.resolve()}function XZ(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=qa(e.subarray(4),!0),e=Ka(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ti(e),this.dispatchEvent(t)}yo.PatchedMediaKeysApple=_1,_1.uninstall=function(){T1&&(T1=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",S1),HTMLMediaElement.prototype.setMediaKeys=w1,p.MediaKeys=A1,p.MediaKeySystemAccess=I1,navigator.requestMediaKeySystemAccess=b1,S1=b1=w1=I1=A1=null,p.shakaMediaKeysPolyfill=!1)},_1.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(T1=!0,S1=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),w1=HTMLMediaElement.prototype.setMediaKeys,A1=p.MediaKeys,I1=p.MediaKeySystemAccess,b1=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$Z,p.MediaKeys=Up,p.MediaKeySystemAccess=ny,navigator.requestMediaKeySystemAccess=WZ,p.shakaMediaKeysPolyfill=!0)};function ny(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),f=c.next();!f.done;f=c.next())f=f.value,f.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),f=n.next();!f.done;f=n.next())c=f.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}ny.prototype.createMediaKeys=function(){var e=new Up(this.keySystem);return Promise.resolve(e)},ny.prototype.getConfiguration=function(){return this.g};function Up(e){this.h=new WebKitMediaKeys(e),this.g=new Tt}Up.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new C1(this.h)},Up.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function a2(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",XZ);try{return Qf(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Up.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function C1(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Tt,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new s2}Y(C1,Sr),g=C1.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var r=this.l.createSession("video/mp4",Qn(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Ti(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(ry(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ry(n,"output-not-allowed");break;default:ry(n,"internal-error")}}),ry(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function ry(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function s2(){this.size=0,this.g=void 0}g=s2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,ke.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=ke.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function u2(){}function l2(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=QZ,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=JZ,p.MediaKeys=iy,p.MediaKeySystemAccess=R1,p.shakaMediaKeysPolyfill=!0)}function QZ(){return Promise.reject(Error("The key system specified is not supported."))}function JZ(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}yo.PatchedMediaKeysNop=u2,u2.install=l2;function iy(){throw new TypeError("Illegal constructor.")}iy.prototype.createSession=function(){},iy.prototype.setServerCertificate=function(){},iy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function R1(){throw this.keySystem="",new TypeError("Illegal constructor.")}R1.prototype.getConfiguration=function(){},R1.prototype.createMediaKeys=function(){},zo(l2,-10);function c2(){}function f2(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)P1="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=eG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=tG,p.MediaKeys=Bp,p.MediaKeySystemAccess=oy,p.shakaMediaKeysPolyfill=!0}}function x1(e){var t=P1;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function eG(e,t){try{var n=new oy(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function tG(e){var t=this.mediaKeys;return t&&t!=e&&d2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&d2(e,this),Promise.resolve()}yo.PatchedMediaKeysWebkit=c2,c2.install=f2;function oy(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),S=E.next();!S.done;S=E.next())S=S.value,S.contentType&&(h=!0,u.canPlayType(S.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(S),r=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),S=E.next();!S.done;S=E.next())S=S.value,S.contentType&&(h=!0,u.canPlayType(S.contentType,this.g)&&(f.videoCapabilities.push(S),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):r=!1),r){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}oy.prototype.createMediaKeys=function(){var e=new Bp(this.g);return Promise.resolve(e)},oy.prototype.getConfiguration=function(){return this.h};function Bp(e){this.l=e,this.h=null,this.g=new Tt,this.i=[],this.j=new Map}function d2(e,t){e.h=t,e.g.ib();var n=P1;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ti(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=N1(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Wn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=N1(e,r.sessionId))&&(ay(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.g.D(t,n+"keyerror",function(r){var u=N1(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),f=r.errorCode;f.systemCode=r.systemCode,c.errorCode=f,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ay(u,"output-restricted"):c==1?ay(u,"expired"):ay(u,"internal-error"))}}))}Bp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new M1(t,this.l,e),this.i.push(e),e},Bp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Bp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function N1(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function M1(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new p2}Y(M1,Sr);function h2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Qn(Ka("LOAD_SESSION|"+n));else{var u=Ka("PERSISTENT|");r=li(u,t)}else r=Qn(t)}catch(f){return Promise.reject(f)}e.h=new Rr;var c=x1("generateKeyRequest");try{e.j[c](e.i,r)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new pr(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function D1(e,t,n){if(e.g)e.g.then(function(){return D1(e,t,n)}).catch(function(){return D1(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Vr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=qo(u.keys[0].k),u=qo(u.keys[0].kid)}else r=Qn(n),u=null;var c=x1("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function ay(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=M1.prototype,g.generateRequest=function(e,t){return h2(this,t,null)},g.load=function(e){return this.l=="persistent-license"?h2(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return D1(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=x1("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function p2(){this.size=0,this.g=void 0}g=p2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,ke.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=ke.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var P1="";zo(f2);function g2(){}function m2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=rG,Object.defineProperty(e,"disablePictureInPicture",{get:oG,set:aG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=iG,document.addEventListener("webkitpresentationmodechanged",nG,!0))}}function nG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function rG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function iG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function oG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function aG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}yo.PiPWebkit=g2,g2.install=m2,zo(m2);function v2(){}function y2(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=sG))}function sG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}yo.RandomUUID=v2,v2.install=y2,zo(y2);function E2(){}function _2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:uG})}function uG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}yo.Symbol=E2,E2.install=_2,zo(_2);function T2(){}function S2(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}yo.VideoPlayPromise=T2,T2.install=S2,zo(S2);function w2(){}function A2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||ia()&&cu()===38)&&(e.getVideoPlaybackQuality=lG)}}function lG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}yo.VideoPlaybackQuality=w2,w2.install=A2,zo(A2);function I2(){}function b2(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=O1;else if(t==6)e=cG;else{try{var n=!!O1(1,2,"")}catch(r){n=!1}n&&(e=O1)}e&&(p.VTTCue=function(r,u,c){return e(r,u,c)})}}function O1(e,t,n){return new p.TextTrackCue(e,t,n)}function cG(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}yo.VTTCue=I2,I2.install=b2,zo(b2);function Ra(){}Ra.prototype.parseInit=function(){},Ra.prototype.setSequenceMode=function(){},Ra.prototype.setManifestType=function(){},Ra.prototype.parseMedia=function(e,t){var n=null,r=[];e=Vr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=fG.exec(u))){var c=dG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new Cn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},te("shaka.text.LrcTextParser",Ra),Ra.prototype.parseMedia=Ra.prototype.parseMedia,Ra.prototype.setManifestType=Ra.prototype.setManifestType,Ra.prototype.setSequenceMode=Ra.prototype.setSequenceMode,Ra.prototype.parseInit=Ra.prototype.parseInit;var fG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,dG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new Ra};function ma(){}ma.prototype.parseInit=function(){},ma.prototype.setSequenceMode=function(){},ma.prototype.setManifestType=function(){},ma.prototype.parseMedia=function(e,t,n){var r=Vr(e);if(e=[],r=="")return e;var u=Fl(r,"tt");if(!u)throw new pt(2,2,2005,"Failed to parse TTML.");if(r=Ia(u,"body")[0],!r)return[];var c=la(u,jp,"frameRate"),f=la(u,jp,"subFrameRate"),h=la(u,jp,"frameRateMultiplier"),E=la(u,jp,"tickRate"),S=la(u,jp,"cellResolution"),k=u.attributes["xml:space"]||"default",G=la(u,ly,"extent");if(k!="default"&&k!="preserve")throw new pt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new gG(c,f,h,E),S=S&&(S=/^(\d+) (\d+)$/.exec(S))?{Sb:parseInt(S[1],10),rows:parseInt(S[2],10)}:null,f=(f=Ia(u,"metadata")[0])?f.children:[],h=Ia(u,"style"),u=Ia(u,"region"),E=[];for(var ne=m(u),z=ne.next();!z.done;z=ne.next()){var ye=z.value;z=new Br;var Le=ye.attributes["xml:id"];if(Le){z.id=Le;var De=null;G&&(De=U1.exec(G)||B1.exec(G)),Le=De?Number(De[1]):null,De=De?Number(De[2]):null;var He,Se=sy(ye,h,"extent");if(Se){var Qe=(He=U1.exec(Se))||B1.exec(Se);Qe!=null&&(z.width=Number(Qe[1]),z.height=Number(Qe[2]),He||(Le!=null&&(z.width=100*z.width/Le),De!=null&&(z.height=100*z.height/De)),z.widthUnits=He||Le!=null?qr:0,z.heightUnits=He||De!=null?qr:0)}(ye=sy(ye,h,"origin"))&&(Qe=(He=U1.exec(ye))||B1.exec(ye),Qe!=null&&(z.viewportAnchorX=Number(Qe[1]),z.viewportAnchorY=Number(Qe[2]),He?Se||(z.width=100-z.viewportAnchorX,z.widthUnits=qr,z.height=100-z.viewportAnchorY,z.heightUnits=qr):(De!=null&&(z.viewportAnchorY=100*z.viewportAnchorY/De),Le!=null&&(z.viewportAnchorX=100*z.viewportAnchorX/Le)),z.viewportAnchorUnits=He||Le!=null?qr:0))}else z=null;z&&E.push(z)}if(Wr(r,"p").length)throw new pt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m(Wr(r,"div")),ne=G.next();!ne.done;ne=G.next())if(Wr(ne.value,"span").length)throw new pt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=C2(r,t,c,f,h,u,E,k,S,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function C2(e,t,n,r,u,c,f,h,E,S,k,G){var ne=S;if(Kf(e)){if(!k)return null;var z={tagName:"span",children:[Ci(e)],attributes:{},parent:null}}else z=e;for(var ye=null,Le=m(F2),De=Le.next();!De.done&&!(ye=uy(z,"backgroundImage",r,"#",De.value)[0]);De=Le.next());Le=null;var He=la(z,F2,"backgroundImage");if(G&&He&&!He.startsWith("#")&&(De=new si(G),He=new si(He),(De=De.resolve(He).toString())&&(Le=De)),(e.tagName=="p"||ye||Le)&&(k=!0),e=k,De=(z.attributes["xml:space"]||(h?"default":"preserve"))=="default",He=z.children.every(Kf),h=[],!He)for(var Se=m(z.children),Qe=Se.next();!Qe.done;Qe=Se.next())(Qe=C2(Qe.value,t,n,r,u,c,f,De,E,z,k,G))&&h.push(Qe);if(r=S!=null,G=Ci(z),G=z.children.length&&G&&/\S/.test(G),Qe=z.attributes.begin||z.attributes.end||z.attributes.dur,!(Qe||G||z.tagName=="br"||h.length!=0||r&&!De))return null;for(Se=N2(z,n),G=Se.start,Se=Se.end;ne&&ne.tagName&&ne.tagName!="tt";)Se=pG(ne,n,G,Se),G=Se.start,Se=Se.end,ne=ne.parent;if(G==null&&(G=0),G+=t.periodStart,Se=Se==null?1/0:Se+t.periodStart,G=Math.max(G,t.segmentStart),Se=Math.min(Se,t.segmentEnd),!Qe&&0<h.length)for(G=1/0,Se=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Se=Math.max(Se,n.endTime);if(z.tagName=="br")return u=new Cn(G,Se,""),u.lineBreak=!0,u;if(t="",He&&(t=Io(Ci(z)||""),De&&(t=t.replace(/\s+/g," "))),t=new Cn(G,Se,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=uy(z,"region",c,"")[0],z.attributes.region&&E&&E.attributes["xml:id"]){var Be=E.attributes["xml:id"];t.region=f.filter(function(vt){return vt.id==Be})[0]}return f=E,S&&r&&!z.attributes.region&&!z.attributes.style&&(f=uy(S,"region",c,"")[0]),hG(t,z,f,ye,Le,u,e,h.length==0),t}function hG(e,t,n,r,u,c,f,h){if(f=f||h,Eo(t,n,c,"direction",f)=="rtl"&&(e.direction="rtl"),h=Eo(t,n,c,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Vn),(h=Eo(t,n,c,"textAlign",!0))?(e.positionAlign=yG[h],e.lineAlign=vG[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=Eo(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=Eo(t,n,c,"color",f))&&(e.color=h),(h=Eo(t,n,c,"backgroundColor",f))&&(e.backgroundColor=h),(h=Eo(t,n,c,"border",f))&&(e.border=h),h=Eo(t,n,c,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=Eo(t,n,c,"fontWeight",f))&&h=="bold"&&(e.fontWeight=700),h=Eo(t,n,c,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=Eo(t,n,c,"lineHeight",f))&&h.match(Cd)&&(e.lineHeight=h),(h=Eo(t,n,c,"fontSize",f))&&(h.match(Cd)||h.match(mG))&&(e.fontSize=h),(h=Eo(t,n,c,"fontStyle",f))&&(e.fontStyle=no[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=Ci(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=Eo(t,n,c,"textOutline",f))&&(r=r.split(" "),r[0].match(Cd)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(Cd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=Eo(t,n,c,"letterSpacing",f))&&r.match(Cd)&&(e.letterSpacing=r),(r=Eo(t,n,c,"linePadding",f))&&r.match(Cd)&&(e.linePadding=r),(r=Eo(t,n,c,"opacity",f))&&(e.opacity=parseFloat(r)),(r=sy(n,c,"textDecoration"))&&R2(e,r),(r=L1(t,c,"textDecoration"))&&R2(e,r),(r=Eo(t,n,c,"textCombine",f))&&(e.textCombineUpright=r),Eo(t,n,c,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function R2(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&gn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&gn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&gn(e.textDecoration,"overline")}}function Eo(e,t,n,r,u){return u=u===void 0?!0:u,(e=L1(e,n,r))?e:u?sy(t,n,r):null}function sy(e,t,n){if(!e)return null;var r=la(e,ly,n);return r||x2(e,t,n)}function L1(e,t,n){var r=la(e,ly,n);return r||x2(e,t,n)}function x2(e,t,n){e=uy(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=yu(e[u],"urn:ebu:tt:style",n);c||(c=la(e[u],ly,n)),c||(c=L1(e[u],t,n)),c&&(r=c)}return r}function uy(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var f=e;for(e=null;!e&&!(e=u?yu(f,u,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),f=e.next();!f.done;f=e.next())if(f=f.value,r+f.attributes["xml:id"]==u){c.push(f);break}}return c}function pG(e,t,n,r){return e=N2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function N2(e,t){var n=k1(e.attributes.begin,t),r=k1(e.attributes.end,t);return e=k1(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function k1(e,t){var n=null;if(M2.test(e)){e=M2.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(D2.test(e))n=F1(D2,e);else if(P2.test(e))n=F1(P2,e);else if(O2.test(e))e=O2.exec(e),n=Number(e[1])/t.frameRate;else if(L2.test(e))e=L2.exec(e),n=Number(e[1])/t.g;else if(k2.test(e))n=F1(k2,e);else if(e)throw new pt(2,2,2001,"Could not parse cue time range in TTML");return n}function F1(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}te("shaka.text.TtmlTextParser",ma),ma.prototype.parseMedia=ma.prototype.parseMedia,ma.prototype.setManifestType=ma.prototype.setManifestType,ma.prototype.setSequenceMode=ma.prototype.setSequenceMode,ma.prototype.parseInit=ma.prototype.parseInit;function gG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var U1=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,mG=/^(\d{1,2}(?:\.\d+)?|100)%$/,Cd=/^(\d+px|\d+em|\d*\.?\d+c)$/,B1=/^(\d+)px (\d+)px$/,M2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,D2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,P2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,O2=/^(\d*(?:\.\d*)?)f$/,L2=/^(\d*(?:\.\d*)?)t$/,k2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),vG={left:bn,center:"center",right:"end",start:bn,end:"end"},yG={left:"line-left",center:"center",right:"line-right"},jp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],ly=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],F2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new ma};function Lo(){this.g=new ma}Lo.prototype.parseInit=function(e){var t=!1;if(new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",mu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new pt(2,2,2007)},Lo.prototype.setSequenceMode=function(){},Lo.prototype.setManifestType=function(){},Lo.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[];if(new Fr().box("mdat",$u(function(f){u=!0,c=c.concat(r.g.parseMedia(f,t,n))})).parse(e,!1),!u)throw new pt(2,2,2007);return c},te("shaka.text.Mp4TtmlParser",Lo),Lo.prototype.parseMedia=Lo.prototype.parseMedia,Lo.prototype.setManifestType=Lo.prototype.setManifestType,Lo.prototype.setSequenceMode=Lo.prototype.setSequenceMode,Lo.prototype.parseInit=Lo.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Lo},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Lo};function ko(){this.h=!1,this.g="UNKNOWN"}ko.prototype.parseInit=function(){},ko.prototype.setSequenceMode=function(e){this.h=e},ko.prototype.setManifestType=function(e){this.g=e},ko.prototype.parseMedia=function(e,t){e=Vr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new pt(2,2,2e3);if(e=cy(new Hc(e[1])),e==null)throw new pt(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=m(n[0].split("\n"));for(var u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new Hc(u);var c=new Br;Kc(u),Td(u);for(var f=Kc(u);f;){var h=c,E=f;(f=/^id=(.*)$/.exec(E))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(E))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),Td(u),f=Kc(u)}t.push(c)}for(r=new Map,U2(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],f=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(c[E]),c[E].includes("}")&&(f=-1));for(h=m(h),f=h.next();!f.done;f=h.next()){var S=f.value;f="global",(E=S[0].match(/\((.*)\)/))&&(f=E.pop()),E=S.slice(1,-1),S[0].includes("}")&&(S=/\{(.*?)\}/.exec(S[0]))&&(E=S[1].split(";")),(S=r.get(f))||(S=new Cn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var ne=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(ne){var z=ne[2].trim().replace(";","");switch(ne[1].trim()){case"background-color":case"background":k=!0,S.backgroundColor=z;break;case"color":k=!0,S.color=z;break;case"font-family":k=!0,S.fontFamily=z;break;case"font-size":k=!0,S.fontSize=z;break;case"font-weight":(700<=parseInt(z,10)||z=="bold")&&(k=!0,S.fontWeight=700);break;case"font-style":switch(z){case"normal":k=!0,S.fontStyle=Yi;break;case"italic":k=!0,S.fontStyle="italic";break;case"oblique":k=!0,S.fontStyle="oblique"}break;case"opacity":k=!0,S.opacity=parseFloat(z);break;case"text-combine-upright":k=!0,S.textCombineUpright=z;break;case"text-shadow":k=!0,S.textShadow=z;break;case"white-space":k=!0,S.wrapLine=z!="noWrap"}}}k&&r.set(f,S)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),f=new Hc(c[0]),E=cy(f),G=Gl(f,/[ \t]+--\x3e[ \t]+/g),S=cy(f),E==null||G==null||S==null)Ve("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,S+=k,c=c.slice(1).join("\n").trim(),r.has("global")?(k=r.get("global").clone(),k.startTime=E,k.endTime=S,k.payload=""):k=new Cn(E,S,""),Td(f),E=Kc(f);E;)Z2(k,E,t),Td(f),E=Kc(f);B2(c,k,r),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function U2(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new Cn(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(br)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new Cn(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function B2(e,t,n){if(e.includes("<")){n.size===0&&U2(n);var r=e;e=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(G2)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e=r;e:{c=e,u=[];var f=-1;e="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){r=!0;var S=null;if(u.length&&(S=u[u.length-1]),S){if(S===E)e+="/"+E+">";else{if(!S.startsWith("v")){e+=c[h];continue}e+="/"+S+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(f=h+1,c[f]!="v"&&(f=-1)):c[h]===">"&&0<f&&(u.push(c.substr(f,h-f)),f=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,f=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+f+">"),e=e.replace("</"+u+">","</"+f+">"),r||(e+="</"+f+">")}e=EG(e);try{var k=Fl("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())j2(e.value,t,n);else t.payload=Io(e);else t.payload=Io(e)}else t.payload=Io(e)}function EG(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Zp(e,t){return e&&0<e.length?e:t}function j2(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Br,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var f=c=c.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(f=n.get(f))&&(r.backgroundColor=Zp(f.backgroundColor,r.backgroundColor),r.color=Zp(f.color,r.color),r.fontFamily=Zp(f.fontFamily,r.fontFamily),r.fontSize=Zp(f.fontSize,r.fontSize),r.textShadow=Zp(f.textShadow,r.textShadow),r.fontWeight=f.fontWeight,r.fontStyle=f.fontStyle,r.opacity=f.opacity,r.rubyTag=f.rubyTag,r.textCombineUpright=f.textCombineUpright,r.wrapLine=f.wrapLine),c){case"br":r=Rn(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=cy(new Hc(c)))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,Kf(e)||u.length==1&&Kf(u[0]))for(n=Ci(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=Io(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())j2(e.value,r,n)}function Z2(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(r=/^region:(.*)$/.exec(t))?(t=_G(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=cn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function _G(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function cy(e){if(e=Gl(e,G2),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}te("shaka.text.VttTextParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit;var G2=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new ko},ji['text/vtt; codecs="vtt"']=function(){return new ko},ji['text/vtt; codecs="wvtt"']=function(){return new ko};function xa(){this.g=null}xa.prototype.parseInit=function(e){var t=this,n=!1;if(new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(r){r=At(r.reader,r.version),t.g=r.timescale}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new pt(2,2,2008);if(!n)throw new pt(2,2,2008)},xa.prototype.setSequenceMode=function(){},xa.prototype.setManifestType=function(){},xa.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new pt(2,2,2008);var n=0,r=[],u,c=[],f=!1,h=!1,E=!1,S=null;if(new Fr().box("moof",yr).box("traf",yr).O("tfdt",function(Qe){f=!0,n=ir(Qe.reader,Qe.version).baseMediaDecodeTime}).O("tfhd",function(Qe){S=rr(Qe.reader,Qe.flags).Wf}).O("trun",function(Qe){h=!0,r=Xt(Qe.reader,Qe.version,Qe.flags).vg}).box("mdat",$u(function(Qe){E=!0,u=Qe})).parse(e,!1),!E&&!f&&!h)throw new pt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(r),ne=G.next();!ne.done;ne=G.next()){ne=ne.value;var z=ne.wf||S,ye=ne.he?n+ne.he:e;e=ye+(z||0);var Le=0;do{var De=k.M();Le+=De;var He=k.M(),Se=null;qf(He)=="vttc"?8<De&&(Se=k.sb(De-8)):k.skip(De-8),z&&Se&&(De=TG(Se,t.periodStart+ye/this.g,t.periodStart+e/this.g),c.push(De))}while(ne.sampleSize&&Le<ne.sampleSize)}return c.filter(Bu)};function TG(e,t,n){var r,u,c;return new Fr().box("payl",$u(function(f){r=Vr(f)})).box("iden",$u(function(f){u=Vr(f)})).box("sttg",$u(function(f){c=Vr(f)})).parse(e),r?SG(r,u,c,t,n):null}function SG(e,t,n,r,u){if(r=new Cn(r,u,""),B2(e,r,new Map),t&&(r.id=t),n)for(e=new Hc(n),t=Kc(e);t;)Z2(r,t,[]),Td(e),t=Kc(e);return r}te("shaka.text.Mp4VttParser",xa),xa.prototype.parseMedia=xa.prototype.parseMedia,xa.prototype.setManifestType=xa.prototype.setManifestType,xa.prototype.setSequenceMode=xa.prototype.setSequenceMode,xa.prototype.parseInit=xa.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new xa};function Na(){}Na.prototype.parseInit=function(){},Na.prototype.setSequenceMode=function(){},Na.prototype.setManifestType=function(){},Na.prototype.parseMedia=function(e){var t=Vr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new Hc(n[0]),u=q2(r),c=Gl(r,/,/g);if(r=q2(r),u==null||c==null||r==null)throw new pt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Cn(u,r,n.slice(1).join("\n").trim()))}return e};function q2(e){if(e=Gl(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}te("shaka.text.SbvTextParser",Na),Na.prototype.parseMedia=Na.prototype.parseMedia,Na.prototype.setManifestType=Na.prototype.setManifestType,Na.prototype.setSequenceMode=Na.prototype.setSequenceMode,Na.prototype.parseInit=Na.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Na};function va(){this.g=new ko}va.prototype.parseInit=function(){},va.prototype.setSequenceMode=function(){},va.prototype.setManifestType=function(){},va.prototype.parseMedia=function(e,t,n){return e=Vr(e),e=H2(e),e=Qn(Ka(e)),this.g.parseMedia(e,t,n)};function H2(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}te("shaka.text.SrtTextParser",va),va.srt2webvtt=H2,va.prototype.parseMedia=va.prototype.parseMedia,va.prototype.setManifestType=va.prototype.setManifestType,va.prototype.setSequenceMode=va.prototype.setSequenceMode,va.prototype.parseInit=va.prototype.parseInit,ji["text/srt"]=function(){return new va};function Ma(){}Ma.prototype.parseInit=function(){},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e){var t="",n="";e=Vr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next()){var u=AG.exec(r.value);u&&(r=u[1],u=u[2],r=="V4 Styles"||r=="V4+ Styles"?t=u:r=="Events"&&(n=u))}e=[],r=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=z2.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")r=c.split(fy);else if(u=="Style"){u=c.split(fy),c={};for(var f=0;f<r.length&&f<u.length;f++)c[r[f]]=u[f];e.push(c)}}for(r=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(f=z2.exec(c))){if(c=f[1].trim(),f=f[2].trim(),c=="Format")t=f.split(fy);else if(c=="Dialogue"){f=f.split(fy),c={};for(var h=0;h<t.length&&h<f.length;h++)c[t[h]]=f[h];h=V2(c.Start);var E=V2(c.End);f=new Cn(h,E,f.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(S){return function(k){return k.Name==S.re}}(u)))&&wG(f,c),r.push(f)}}return r};function wG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=K2(n))&&(e.color=n),(n=t.BackColour)&&(n=K2(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function K2(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function V2(e){return e=IG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}te("shaka.text.SsaTextParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit;var AG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,z2=/^\s*([^:]+):\s*(.*)/,fy=/\s*,\s*/,IG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new Ma};function Y2(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function W2(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,Ea:"mp4a.40."+u}}function $2(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function bG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Da(e){this.i=e,this.h=0,this.g=new Map}g=Da.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Do(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){for(var u=Qn(e),c=xn(u),f=c.length;f<u.length&&!$2(u,f);f++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=W2(u,f),!n)return Promise.reject(new pt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];f<u.length;){var h=Y2(u,f);if(!h)return Promise.reject(new pt(2,3,3018));var E=h.Qd+h.U;f+E<=u.length&&c.push({data:u.subarray(f+h.Qd,f+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),f+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new wd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Ad(e),this.g.set(t.id,r)),t=Mp(e),this.h++,t=li(r,t),Promise.resolve(t)},te("shaka.transmuxer.AacTransmuxer",Da),Da.prototype.transmux=Da.prototype.transmux,Da.prototype.getOriginalMimeType=Da.prototype.getOriginalMimeType,Da.prototype.convertCodecs=Da.prototype.convertCodecs,Da.prototype.isSupported=Da.prototype.isSupported,Da.prototype.destroy=Da.prototype.destroy,So("audio/aac",function(){return new Da("audio/aac")},bi);function X2(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,f=0;c===2?f+=2:(c&1&&c!==1&&(f+=2),c&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|f<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+f,ga:e,U:u}}function CG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var f=Math.min(r,8),h=8-f;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<f|u:u,t+=1,r-=f}if(16>n)return!0}return!1}function ts(e){this.i=e,this.h=0,this.g=new Map}g=ts.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&!CG(e,c);c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=X2(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new wd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Ad(e),this.g.set(t.id,r)),t=Mp(e),this.h++,t=li(r,t),Promise.resolve(t)},te("shaka.transmuxer.Ac3Transmuxer",ts),ts.prototype.transmux=ts.prototype.transmux,ts.prototype.getOriginalMimeType=ts.prototype.getOriginalMimeType,ts.prototype.convertCodecs=ts.prototype.convertCodecs,ts.prototype.isSupported=ts.prototype.isSupported,ts.prototype.destroy=ts.prototype.destroy,So("audio/ac3",function(){return new ts("audio/ac3")},bi);function Q2(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Nn(e.subarray(t+2));Gn(n,2),Gn(n,3);var r=It(n,11)+1<<1,u=It(n,2);if(u==3){u=It(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=It(n,2);var f=It(n,3),h=It(n,1);return n=It(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][f]+h,ga:e,U:r})}function ns(e){this.i=e,this.h=0,this.g=new Map}g=ns.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=Q2(e,c);if(!E)return Promise.reject(new pt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new wd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Ad(e),this.g.set(t.id,r)),t=Mp(e),this.h++,t=li(r,t),Promise.resolve(t)},te("shaka.transmuxer.Ec3Transmuxer",ns),ns.prototype.transmux=ns.prototype.transmux,ns.prototype.getOriginalMimeType=ns.prototype.getOriginalMimeType,ns.prototype.convertCodecs=ns.prototype.convertCodecs,ns.prototype.isSupported=ns.prototype.isSupported,ns.prototype.destroy=ns.prototype.destroy,So("audio/ec3",function(){return new ns("audio/ec3")},bi);function RG(e){if(!e.length)return null;var t=e.find(function(Le){return Le.type==7});if(e=e.find(function(Le){return Le.type==8}),!t||!e)return null;var n=new Nn(t.data),r=nt(n);if(nt(n),nt(n),En(n),NG.includes(r)&&(r=Lt(n),r===3&&Gn(n,1),En(n),En(n),Gn(n,1),lt(n))){r=r!==3?8:12;for(var u=0;u<r;u++)lt(n)&&(6>u?Kt(n,16):Kt(n,64))}if(En(n),r=Lt(n),r===0)Lt(n);else if(r===1)for(Gn(n,1),En(n),En(n),r=Lt(n),u=0;u<r;u++)En(n);En(n),Gn(n,1);var c=Lt(n),f=Lt(n),h=It(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,S=0,k=0,G=0;if(lt(n)&&(E=Lt(n),S=Lt(n),k=Lt(n),G=Lt(n)),u=r=1,lt(n)&&lt(n)){var ne=nt(n),z=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ye=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<ne&&16>=ne?(r=z[ne-1],u=ye[ne-1]):ne===255&&(r=It(n,16),u=It(n,16))}return n=(2-h)*(f+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*S,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:r,ya:u}}function xG(e){var t=!1,n=[],r=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var f=!1;switch(c.type){case 1:f=u=!0;var h=c.data;r&&4<h.length&&(h=Ye(new Nn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=u=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:u=f=!0;break;case 12:f=!0;break;default:f=!1}u&&f&&(f=c.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(c.fullData))}return n.length?{data:li.apply(Pi,T(n)),jd:t}:null}var NG=[100,110,122,244,44,83,86,118,128,138,139,134];function MG(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),r=e.find(function(f){return f.type==34});if(!t||!n||!r)return null;var u=DG(t.fullData);e=PG(n.fullData);var c=OG(r.fullData);return t=LG(t.fullData,n.fullData,r.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function DG(e){var t=new Nn(e,!0);return nt(t),nt(t),It(t,4),It(t,2),It(t,6),e=It(t,3),t=lt(t),{jf:e+1,Gf:t}}function PG(e){e=new Nn(e,!0),nt(e),nt(e);var t=0,n=0,r=0,u=0;It(e,4);var c=It(e,3);lt(e);for(var f=It(e,2),h=It(e,1),E=It(e,5),S=nt(e),k=nt(e),G=nt(e),ne=nt(e),z=nt(e),ye=nt(e),Le=nt(e),De=nt(e),He=nt(e),Se=nt(e),Qe=nt(e),Be=[],vt=[],xt=0;xt<c;xt++)Be.push(lt(e)),vt.push(lt(e));if(0<c)for(xt=c;8>xt;xt++)It(e,2);for(xt=0;xt<c;xt++)Be[xt]&&It(e,88),vt[xt]&&nt(e);Lt(e),Be=Lt(e),Be==3&&It(e,1),vt=Lt(e),xt=Lt(e),lt(e)&&(t+=Lt(e),n+=Lt(e),r+=Lt(e),u+=Lt(e));var Vt=Lt(e),Bt=Lt(e),_t=Lt(e);if(lt(e))for(var Zt=0;Zt<=c;Zt++)Lt(e),Lt(e),Lt(e);else Lt(e),Lt(e),Lt(e);if(Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),lt(e)&&lt(e))for(Zt=0;4>Zt;Zt++)for(var ln=0;ln<(Zt===3?2:6);ln++)if(lt(e)){var pn=Math.min(64,1<<4+(Zt<<1));1<Zt&&On(e);for(var Ln=0;Ln<pn;Ln++)On(e)}else Lt(e);for(lt(e),lt(e),lt(e)&&(nt(e),Lt(e),Lt(e),lt(e)),Zt=Lt(e),pn=ln=0;pn<Zt;pn++)if(Ln=!1,pn!==0&&(Ln=lt(e)),Ln){pn===Zt&&Lt(e),lt(e),Lt(e);for(var Mn=Ln=0;Mn<=ln;Mn++){var qn=lt(e),Yn=!1;qn||(Yn=lt(e)),(qn||Yn)&&Ln++}ln=Ln}else{for(Mn=Lt(e),Ln=Lt(e),ln=Mn+Ln,qn=0;qn<Mn;qn++)Lt(e),lt(e);for(Mn=0;Mn<Ln;Mn++)Lt(e),lt(e)}if(lt(e))for(Zt=Lt(e),ln=0;ln<Zt;ln++){for(pn=0;pn<_t+4;pn++)It(e,1);It(e,1)}if(Zt=_t=1,ln=0,lt(e),lt(e),lt(e)){if(lt(e)&&(pn=nt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<pn&&16>=pn?(_t=Ln[pn-1],Zt=Mn[pn-1]):pn===255&&(_t=It(e,16),Zt=It(e,16))),lt(e)&&lt(e),lt(e)&&(It(e,3),lt(e),lt(e)&&(nt(e),nt(e),nt(e))),lt(e)&&(Lt(e),Lt(e)),lt(e),lt(e),lt(e),(pn=lt(e))&&(Lt(e),Lt(e),Lt(e),Lt(e)),lt(e)&&(It(e,32),It(e,32),lt(e)&&Lt(e),lt(e)))for(Mn=!1,pn=lt(e),Ln=lt(e),(pn||Ln)&&((Mn=lt(e))&&(nt(e),It(e,5),lt(e),It(e,5)),It(e,4),It(e,4),Mn&&It(e,4),It(e,5),It(e,5),It(e,5)),qn=0;qn<=c;qn++){var Kn=!0;Yn=1,lt(e)||(Kn=lt(e));var Nr=!1;if(Kn?Lt(e):Nr=lt(e),Nr||(Yn=Lt(e)+1),pn){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));lt(e)}if(Ln){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));lt(e)}}lt(e)&&(lt(e),lt(e),lt(e),ln=Lt(e),Lt(e),Lt(e),Lt(e),Lt(e))}return{Ke:Qe,Qe:f,Re:h,Pe:E,Le:S,Me:k,Ne:G,Oe:ne,Ee:z,Fe:ye,Ge:Le,He:De,Ie:He,Je:Se,be:ln,Be:0,Ae:Be,ze:Vt,ye:Bt,width:vt-(t+n)*(Be===1||Be===2?2:1),height:xt-(r+u)*(Be===1?2:1),pi:_t,oi:Zt}}function OG(e){var t=new Nn(e,!0);nt(t),nt(t),Lt(t),Lt(t),lt(t),lt(t),It(t,3),lt(t),lt(t),Lt(t),Lt(t),On(t),lt(t),lt(t),lt(t)&&Lt(t),On(t),On(t),lt(t),lt(t),lt(t),lt(t),e=lt(t),t=lt(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function LG(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.Qe&3)<<6|(r.Re?1:0)<<5|r.Pe&31,u[2]=r.Le,u[3]=r.Me,u[4]=r.Ne,u[5]=r.Oe,u[6]=r.Ee,u[7]=r.Fe,u[8]=r.Ge,u[9]=r.He,u[10]=r.Ie,u[11]=r.Je,u[12]=r.Ke,u[13]=240|(r.be&3840)>>8,u[14]=r.be&255,u[15]=252|r.pf&3,u[16]=252|r.Ae&3,u[17]=248|r.ze&7,u[18]=248|r.ye&7,u[19]=0,u[20]=0,u[21]=(r.Be&3)<<6|(r.jf&7)<<3|(r.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function dy(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var f=e[t+3]>>6;u=1e3*kG[14*(n===3?3-r:r===3?3:4)+u-1],c=FG[3*(n===3?0:n===2?1:2)+c],n=UG[n][r];var h=BG[r],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(S=S?parseInt(S[1],10):0)&&87>=S&&r===2&&224e3<=u&&f===0&&(e[t+3]|=128),{sampleRate:c,channelCount:f===3?1:2,U:E,ni:8*n*h}}return null}function J2(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function eD(e,t){if(t+1<e.length&&J2(e,t)){var n=dy(e,t),r=4;return n&&n.U&&(r=n.U),t+=r,t===e.length||t+1<e.length&&J2(e,t)}return!1}var kG=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],FG=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],UG=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BG=[0,1,1,4];function rs(e){this.i=e,this.h=0,this.g=new Map}g=rs.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){n=Qn(e);for(var u=xn(n).length;u<n.length&&!eD(n,u);u++);var c;for(e=[];u<n.length;){var f=dy(n,u);if(!f)return Promise.reject(new pt(2,3,3018));c||(c=f),u+f.U<=n.length&&e.push({data:n.subarray(u,u+f.U),size:f.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=f.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new wd([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=Ad(c),this.g.set(t.id,r)),t=Mp(c),this.h++,t=li(r,t),Promise.resolve(t)):Promise.reject(new pt(2,3,3018))},te("shaka.transmuxer.Mp3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,So("audio/mpeg",function(){return new rs("audio/mpeg")},bi);function is(e){this.h=e,this.g=null}g=is.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Do(e).split(","),n=bo("audio",t);return t=bo("video",t),!n||t||wa(n)!="mp3"?!1:Ot(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new ze,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new pt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(r=dy(t,n))?(n+r.U<=t.length&&(u=li(u,t.subarray(n,n+r.U))),n+=r.U):n++;return Promise.resolve(u)},te("shaka.transmuxer.MpegTsTransmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,So("video/mp2t",function(){return new is("video/mp2t")},wl);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Pa(e){this.h=e,(this.g=Y_.get("ISOBoxer")())&&jG(this)}function jG(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==ZG[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=Pa.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new pt(2,3,3020));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var f=u.fetch("tfdt"),h=u.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,c),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),S=u.fetch("tfxd");S&&S._parent.boxes.splice(S._parent.boxes.indexOf(S),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var ne=u.fetch("saio");if(ne===null){ne=this.g.createFullBox("saio",h),ne.version=0,ne.flags=0,ne.entry_count=1,ne.offset=[0];var z=this.g.createFullBox("saiz",h);if(z.version=0,z.flags=0,z.sample_count=G.sample_count,z.default_sample_info_size=0,z.sample_info_size=[],G.flags&2)for(r=0;r<G.sample_count;r+=1)z.sample_info_size[r]=10+6*G.entry[r].NumberOfEntries;else z.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ye=u.fetch("moof");E.data_offset=ye.getLength()+8;var Le=u.fetch("saio");Le!==null&&(Le.offset[0]=tD(ye,"traf")+tD(h,"senc")+16);var De=Qn(u.write());return Promise.resolve(De)}catch(He){return He instanceof pt?Promise.reject(He):Promise.reject(new pt(2,3,3022))}};function tD(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}te("shaka.transmuxer.MssTransmuxer",Pa),Pa.prototype.transmux=Pa.prototype.transmux,Pa.prototype.getOriginalMimeType=Pa.prototype.getOriginalMimeType,Pa.prototype.convertCodecs=Pa.prototype.convertCodecs,Pa.prototype.isSupported=Pa.prototype.isSupported,Pa.prototype.destroy=Pa.prototype.destroy;var ZG=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);So("mss/audio/mp4",function(){return new Pa("mss/audio/mp4")},bi),So("mss/video/mp4",function(){return new Pa("mss/video/mp4")},bi);function os(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=os.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Do(n).split(",");return n=bo("audio",r),r=bo("video",r),n&&(n=wa(n),!GG.includes(n))||r&&(n=wa(r),!qG.includes(n))?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Do(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,r,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var f=xn(c),h=f.length;h<c.length;h++)if(eD(c,h))return Promise.reject(new pt(2,3,3018));for(h=f.length;h<c.length;h++)if($2(c,h))return this.h||(this.h=new Da("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new pt(2,3,3018))}this.j?this.j.clearData():this.j=new ze;var E=this.j.parse(c),S=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var ne=[],z=null,ye=[],Le=E.xc();if(!Le.length)throw new pt(2,3,3023);for(var De=0;De<Le.length;De++){var He=Le[De],Se=He.nalus;ye.push.apply(ye,T(Se));var Qe=xG(Se);if(Qe){z==null&&(z=He.dts);var Be=void 0;Be=De+1<Le.length?(Le[De+1].dts||0)-(He.dts||0):1<Le.length?(He.dts||0)-(Le[De-1].dts||0):9e4*(n.endTime-n.startTime),ne.push({data:Qe.data,size:Qe.data.byteLength,duration:Be,Ta:Math.round((He.pts||0)-(He.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:Qe.jd?2:1,Wa:Qe.jd?0:1}})}}var vt=RG(ye);if(!vt||z==null)throw new pt(2,3,3018);t.height=vt.height,t.width=vt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:vt.oa,xa:vt.xa,ya:vt.ya,data:{jb:this.g,baseMediaDecodeTime:z,Ra:ne},stream:t};break;case"hvc":var xt=[],Vt=null,Bt=[],_t=E.xc();if(!_t.length)throw new pt(2,3,3023);for(var Zt=0;Zt<_t.length;Zt++){var ln=_t[Zt],pn=ln.nalus;Bt.push.apply(Bt,T(pn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(pn),Kn=Yn.next();!Kn.done;Kn=Yn.next()){var Nr=Kn.value;switch(Nr.type){case 1:case 0:var fi=qn=!0;break;case 19:case 20:case 21:Ln=fi=qn=!0;break;case 32:fi=!0;break;case 33:fi=!0;break;case 34:fi=!0;break;case 35:qn=fi=!0;break;case 39:case 40:fi=!0;break;default:fi=!1}if(qn&&fi){var Li=Nr.fullData.byteLength,ci=new Uint8Array(4);ci[0]=Li>>24&255,ci[1]=Li>>16&255,ci[2]=Li>>8&255,ci[3]=Li&255,Mn.push(ci),Mn.push(Nr.fullData)}}var gi=Mn.length?{data:li.apply(Pi,T(Mn)),jd:Ln}:null;if(gi){Vt==null&&ln.dts!=null&&(Vt=ln.dts);var Gr=void 0;Gr=Zt+1<_t.length?(_t[Zt+1].dts||0)-(ln.dts||0):1<_t.length?(ln.dts||0)-(_t[Zt-1].dts||0):9e4*(n.endTime-n.startTime),xt.push({data:gi.data,size:gi.data.byteLength,duration:Gr,Ta:Math.round((ln.pts||0)-(ln.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:gi.jd?2:1,Wa:gi.jd?0:1}})}}var fo=MG(Bt);if(!fo||Vt==null)throw new pt(2,3,3018);t.height=fo.height,t.width=fo.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:fo.oa,xa:fo.xa,ya:fo.ya,data:{jb:this.g,baseMediaDecodeTime:Vt,Ra:xt},stream:t}}G&&(S.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Fo=[],ai,zs=null,Yc=m(E.Fb()),Wc=Yc.next();!Wc.done;Wc=Yc.next()){var Rd=Wc.value,ll=Rd.data;if(ll){var Ys=0;if(ai=W2(ll,Ys),!ai)throw new pt(2,3,3018);for(t.audioSamplingRate=ai.sampleRate,t.channelsCount=ai.channelCount,zs==null&&Rd.pts!==null&&(zs=Rd.pts);Ys<ll.length;){var cl=Y2(ll,Ys);if(cl){var Kl=cl.Qd+cl.U;Ys+Kl<=ll.length&&Fo.push({data:ll.subarray(Ys+cl.Qd,Ys+Kl),size:cl.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ys+=Kl}else Ys++}}}if(!ai||zs==null){if(!E.xc().length)throw new pt(2,3,3018);zs=9e4*n.startTime;var xd=bo("audio",t.codecs.split(","));if(!xd||!t.channelsCount||!t.audioSamplingRate)throw new pt(2,3,3018);ai={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:xd};var Nd=bG(xd,t.channelsCount);if(!Nd)throw new pt(2,3,3018);for(var py=zs+9e4*(n.endTime-n.startTime),Md=zs;Md<py;)Fo.push({data:Nd,size:Nd.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Md+=1024/ai.sampleRate*9e4}var Hp=ai.sampleRate,gy=zs/9e4*Hp;G={id:t.id,type:"audio",codecs:ai.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Hp,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:gy,Ra:Fo},stream:t};break;case"ac3":for(var Ss=[],my=0,Z1=new Uint8Array([]),vy=null,hD=m(E.Fb()),G1=hD.next();!G1.done;G1=hD.next()){var q1=G1.value,H1=q1.data;vy==null&&q1.pts!==null&&(vy=q1.pts);for(var Dd=0;Dd<H1.length;){var Vl=X2(H1,Dd);Vl?(t.audioSamplingRate=Vl.sampleRate,t.channelsCount=Vl.channelCount,my=Vl.sampleRate,Z1=Vl.ga,Ss.push({data:H1.subarray(Dd,Dd+Vl.U),size:Vl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Dd+=Vl.U):Dd++}}if(my==0||Z1.byteLength==0||vy==null)throw new pt(2,3,3018);var VG=vy/9e4*my;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:my,duration:r,Sa:[],ga:Z1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:VG,Ra:Ss},stream:t};break;case"ec3":for(var pD=[],yy=0,K1=new Uint8Array([]),Ey=null,gD=m(E.Fb()),V1=gD.next();!V1.done;V1=gD.next()){var z1=V1.value,Y1=z1.data;Ey==null&&z1.pts!==null&&(Ey=z1.pts);for(var Pd=0;Pd<Y1.length;){var zl=Q2(Y1,Pd);zl?(t.audioSamplingRate=zl.sampleRate,t.channelsCount=zl.channelCount,yy=zl.sampleRate,K1=zl.ga,pD.push({data:Y1.subarray(Pd,Pd+zl.U),size:zl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Pd+=zl.U):Pd++}}if(yy==0||K1.byteLength==0||Ey==null)throw new pt(2,3,3018);var zG=Ey/9e4*yy;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:yy,duration:r,Sa:[],ga:K1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:zG,Ra:pD},stream:t};break;case"mp3":for(var mD=[],_y,Ty=null,vD=m(E.Fb()),W1=vD.next();!W1.done;W1=vD.next()){var $1=W1.value,Kp=$1.data;if(Kp){Ty==null&&$1.pts!==null&&(Ty=$1.pts);for(var $c=0;$c<Kp.length;){var Od=dy(Kp,$c);Od?(_y||(_y=Od),$c+Od.U<=Kp.length&&mD.push({data:Kp.subarray($c,$c+Od.U),size:Od.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),$c+=Od.U):$c++}}}if(!_y||Ty==null)throw new pt(2,3,3018);var yD=_y.sampleRate,YG=Ty/9e4*yD;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:yD,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:YG,Ra:mD},stream:t};break;case"opus":var ED=[],Sy=null,wu=E.F;if(!wu)throw new pt(2,3,3018);var Uo=[];switch(wu.Zg){case 1:case 2:Uo=[0];break;case 0:Uo=[255,1,1,0,1];break;case 128:Uo=[255,2,0,0,1];break;case 3:Uo=[1,2,1,0,2,1];break;case 4:Uo=[1,2,2,0,1,2,3];break;case 5:Uo=[1,3,2,0,4,1,2,3];break;case 6:Uo=[1,4,2,0,4,1,2,3,5];break;case 7:Uo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Uo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Uo=[1,1,2,0,1];break;case 131:Uo=[1,1,3,0,1,2];break;case 132:Uo=[1,1,4,0,1,2,3];break;case 133:Uo=[1,1,5,0,1,2,3,4];break;case 134:Uo=[1,1,6,0,1,2,3,4,5];break;case 135:Uo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Uo=[1,1,8,0,1,2,3,4,5,6,7]}for(var _D=new Uint8Array([0,wu.channelCount,0,0,wu.sampleRate>>>24&255,wu.sampleRate>>>17&255,wu.sampleRate>>>8&255,wu.sampleRate>>>0&255,0,0].concat(T(Uo))),TD=wu.sampleRate,SD=m(E.Fb()),X1=SD.next();!X1.done;X1=SD.next()){var Q1=X1.value,Ld=Q1.data;Sy==null&&Q1.pts!==null&&(Sy=Q1.pts);for(var Vp=0;Vp<Ld.length;){for(var WG=(Ld[Vp+1]&16)!==0,$G=(Ld[Vp+1]&8)!==0,fl=Vp+2,wy=0;Ld[fl]===255;)wy+=255,fl+=1;wy+=Ld[fl],fl+=1,fl+=WG?2:0,fl+=$G?2:0;var wD=Ld.slice(fl,fl+wy);ED.push({data:wD,size:wD.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Vp=fl+wy}}if(_D.byteLength==0||Sy==null)throw new pt(2,3,3018);t.audioSamplingRate=wu.sampleRate,t.channelsCount=wu.channelCount;var XG=Sy/9e4*TD;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:TD,duration:r,Sa:[],ga:_D,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:XG,Ra:ED},stream:t}}G&&(S.push(G),G=null)}}catch(eT){return eT&&eT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(eT)}if(!S.length)return Promise.reject(new pt(2,3,3018));var AD=new wd(S);if(this.i.has(t.id))var J1=this.i.get(t.id);else J1=Ad(AD),this.i.set(t.id,J1);var QG=Mp(AD);this.g++;var JG=li(J1,QG);return Promise.resolve(JG)},te("shaka.transmuxer.TsTransmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy;var GG=["aac","ac-3","ec-3","mp3","opus"],qG=["avc","hevc"];So("video/mp2t",function(){return new os("video/mp2t")},uu);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function nD(){}var Gp;function rD(){Gp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Gp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=HG):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function HG(e,t){var n=this,r;return Me(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),x(u,Gp.call(n,e,t),2)):(r=u.h,fD(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Gp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=iD,u.return(iD.call(n,e,t))))})}function iD(e,t){var n=this,r,u,c,f,h,E,S,k,G,ne;return Me(function(z){if(z.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=cD(e),u=[],c=m(t),f=c.next();!f.done;f=c.next())h=f.value,E=oD(h.videoCapabilities,r),S=oD(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!S.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=S,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return x(z,Gp.call(n,e,u),2)}return ne=z.h,z.return(new hy(ne,r))})}function oD(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}te("EmeEncryptionSchemePolyfill",nD),nD.install=rD;function aD(){}var qp;function sD(){qp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(qp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=KG):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function KG(e){var t=this,n,r,u;return Me(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),x(c,qp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((r=n.keySystemAccess)&&fD(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=qp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=uD,r){c.u(3);break}return u=n,x(c,lD(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(uD.call(t,e))}})}function uD(e){var t=this,n,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,u=r.keySystem,c=r.audio&&r.audio.encryptionScheme,f=r.video&&r.video.encryptionScheme,n=cD(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||f&&f!=n)?k.return(h):x(k,qp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new hy(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return S=E,x(k,lD(e),5);case 5:S.keySystemAccess=k.h;case 3:return k.return(E)}})}function lD(e){var t,n;return Me(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],f=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&f.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),f.length&&(u.videoCapabilities=f),t=u,x(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}te("McEncryptionSchemePolyfill",aD),aD.install=sD;function hy(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}hy.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},hy.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function cD(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function fD(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function j1(){}function dD(){rD(),sD()}te("EncryptionSchemePolyfills",j1),j1.install=dD,typeof R<"u"&&R.exports&&(R.exports=j1)}).call(l,o,o,void 0);for(var d in l.shaka)i[d]=l.shaka[d]})()})(IU);const Gy=fb(IU),tf=class tf{static async setup_stream(o,l,d){if(this.licenseUrl=l,this.customDrmHeaders=d,!o.mediaKeys)try{const p=await this.get_media_keys(o);if(p){await o.setMediaKeys(p.mediaKey);const I=p.mediaKey.createSession();this.on_handle_license_messageEvent=async R=>{await this.handle_license_messageEvent(p.mediaKey,I,R)},this.on_handle_encrypted_event=async R=>{await this.handle_encrypted_event(p,I,R)},I.addEventListener("message",this.on_handle_license_messageEvent),o.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(o){for(let l=0;l<o;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(o){const l=this.mediaKey_pool.find(d=>d.htmlMediaElement===o);this.mediaKey_pool.length>0&&l&&(await o.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(o){const l=this.mediaKey_pool.find(d=>d.mediaKey===o);return l?l.id:null}static async get_media_keys(o){let l=this.mediaKey_pool.find(d=>d.htmlMediaElement===o);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(d=>d.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(d=>!d.htmlMediaElement),l)return l.htmlMediaElement=o,l;throw new Error("No media keys available")}static async handle_license_messageEvent(o,l,d){try{const p=d.message.byteLength;console.log(p,"byteLength");let I;p===2?I=p.toString():I="".concat(this.get_mediaKey_id(o),"-").concat(p);let R;this.license_cache.has(I)?(console.log("using cached licence"),R=this.license_cache.get(I)):(R=await(await fetch(this.licenseUrl,{method:"POST",body:d.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),R?this.license_cache.set(I,R):console.error("License response is null")),R?await l.update(R):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(o,l,d){if(d.initDataType&&d.initData)try{if(!o.isInitialized){o.isInitialized=!0;const p=this.mediaKey_pool.findIndex(I=>I.id===o.id);p!==-1&&(this.mediaKey_pool[p]=o),await l.generateRequest(d.initDataType,d.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};tf.licenseUrl="",tf.customDrmHeaders={},tf.license_cache=new Map,tf.mediaKey_pool=[],tf.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let QI=tf;class XV extends AU{constructor(o){var l;super(o),this.name="ShakaEngine",this.addPolicyToRequests=(d,p)=>{switch(d){case Gy.net.NetworkingEngine.RequestType.MANIFEST:case Gy.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case Gy.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([I,R])=>{p.headers[I]=R});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new Gy.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(o){var l;if(this.player&&o){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await QI.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(d){console.log(d)}await this.player.attach(this.options.element),await this.player.load(o,void 0)}}}class QV extends Sf{constructor(o){super(),this.options=o,this.options.preferredTech==="shaka"?this.engine=new XV(o):this.engine=new $V(o),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(o,l){this.emit(o,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(o,l){this.currentSource=o,await this.engine.load(o,l)}}class JV extends Sf{constructor(o){var l;super(),this.options=o,this._eventsEmitted=!1,this.eventClock=o.eventClock,this.containerElement=o.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new QV({autoPlay:!1,...o.playerOptions,element:this.videoElement})}get currentSource(){var o;return(o=this.player)==null?void 0:o.currentSource}get currentCamera(){return this._currentCamera}get stats(){var o;return(o=this.player)==null?void 0:o.engine.getStats()}logPlayerStuff(){console.log("Bitrate",this.player.engine.video.getVideoPlaybackQuality()),console.log("Time",this.player.engine.video.currentTime),console.log("Paused",this.player.engine.video.paused)}propagateEvent(o,l){this.emit(o,l)}async load(o,l,d){return new Promise((p,I)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),this.player.load(l,d).then(()=>{this.player.once("playing",()=>{this._currentCamera=o,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0))});const R=((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0),g=this.eventClock.getExpectedPositionInSeconds()-R;Math.sign(g)<0?setTimeout(()=>{this.videoElement.play(),p()},Math.abs(g)*1e3):(this.videoElement.currentTime=g,this.videoElement.play(),p())})}catch(R){console.error(R),I(R)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.player.destroy()}}var ng=function(i){return i&&i.Math===Math&&i},ja=ng(typeof globalThis=="object"&&globalThis)||ng(typeof window=="object"&&window)||ng(typeof self=="object"&&self)||ng(typeof tu=="object"&&tu)||ng(typeof tu=="object"&&tu)||function(){return this}()||Function("return this")(),IC={},ps=function(i){try{return!!i()}catch(o){return!0}},ez=ps,gc=!ez(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),tz=ps,bC=!tz(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),nz=bC,qy=Function.prototype.call,Sl=nz?qy.bind(qy):function(){return qy.apply(qy,arguments)},bU={},CU={}.propertyIsEnumerable,RU=Object.getOwnPropertyDescriptor,rz=RU&&!CU.call({1:2},1);bU.f=rz?function(o){var l=RU(this,o);return!!l&&l.enumerable}:CU;var xU=function(i,o){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:o}},NU=bC,MU=Function.prototype,JI=MU.call,iz=NU&&MU.bind.bind(JI,JI),Ta=NU?iz:function(i){return function(){return JI.apply(i,arguments)}},DU=Ta,oz=DU({}.toString),az=DU("".slice),lE=function(i){return az(oz(i),8,-1)},sz=Ta,uz=ps,lz=lE,RA=Object,cz=sz("".split),fz=uz(function(){return!RA("z").propertyIsEnumerable(0)})?function(i){return lz(i)==="String"?cz(i,""):RA(i)}:RA,cE=function(i){return i==null},dz=cE,hz=TypeError,tm=function(i){if(dz(i))throw new hz("Can't call method on "+i);return i},pz=fz,gz=tm,fE=function(i){return pz(gz(i))},xA=typeof document=="object"&&document.all,Za=typeof xA>"u"&&xA!==void 0?function(i){return typeof i=="function"||i===xA}:function(i){return typeof i=="function"},mz=Za,Sh=function(i){return typeof i=="object"?i!==null:mz(i)},NA=ja,vz=Za,yz=function(i){return vz(i)?i:void 0},CC=function(i,o){return arguments.length<2?yz(NA[i]):NA[i]&&NA[i][o]},Ez=Ta,PU=Ez({}.isPrototypeOf),_z=typeof navigator<"u"&&String(navigator.userAgent)||"",OU=ja,MA=_z,Xk=OU.process,Qk=OU.Deno,Jk=Xk&&Xk.versions||Qk&&Qk.version,e3=Jk&&Jk.v8,eu,P0;e3&&(eu=e3.split("."),P0=eu[0]>0&&eu[0]<4?1:+(eu[0]+eu[1]));!P0&&MA&&(eu=MA.match(/Edge\/(\d+)/),(!eu||eu[1]>=74)&&(eu=MA.match(/Chrome\/(\d+)/),eu&&(P0=+eu[1])));var Tz=P0,t3=Tz,Sz=ps,wz=ja,Az=wz.String,LU=!!Object.getOwnPropertySymbols&&!Sz(function(){var i=Symbol("symbol detection");return!Az(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t3&&t3<41}),Iz=LU,kU=Iz&&!Symbol.sham&&typeof Symbol.iterator=="symbol",bz=CC,Cz=Za,Rz=PU,xz=kU,Nz=Object,FU=xz?function(i){return typeof i=="symbol"}:function(i){var o=bz("Symbol");return Cz(o)&&Rz(o.prototype,Nz(i))},Mz=String,Dz=function(i){try{return Mz(i)}catch(o){return"Object"}},Pz=Za,Oz=Dz,Lz=TypeError,kz=function(i){if(Pz(i))return i;throw new Lz(Oz(i)+" is not a function")},Fz=kz,Uz=cE,RC=function(i,o){var l=i[o];return Uz(l)?void 0:Fz(l)},DA=Sl,PA=Za,OA=Sh,Bz=TypeError,jz=function(i,o){var l,d;if(o==="string"&&PA(l=i.toString)&&!OA(d=DA(l,i))||PA(l=i.valueOf)&&!OA(d=DA(l,i))||o!=="string"&&PA(l=i.toString)&&!OA(d=DA(l,i)))return d;throw new Bz("Can't convert object to primitive value")},UU={exports:{}},n3=ja,Zz=Object.defineProperty,xC=function(i,o){try{Zz(n3,i,{value:o,configurable:!0,writable:!0})}catch(l){n3[i]=o}return o},Gz=ja,qz=xC,r3="__core-js_shared__",i3=UU.exports=Gz[r3]||qz(r3,{});(i3.versions||(i3.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var NC=UU.exports,o3=NC,MC=function(i,o){return o3[i]||(o3[i]=o||{})},Hz=tm,Kz=Object,BU=function(i){return Kz(Hz(i))},Vz=Ta,zz=BU,Yz=Vz({}.hasOwnProperty),mc=Object.hasOwn||function(o,l){return Yz(zz(o),l)},Wz=Ta,$z=0,Xz=Math.random(),Qz=Wz(1 .toString),jU=function(i){return"Symbol("+(i===void 0?"":i)+")_"+Qz(++$z+Xz,36)},Jz=ja,eY=MC,a3=mc,tY=jU,nY=LU,rY=kU,Jd=Jz.Symbol,LA=eY("wks"),iY=rY?Jd.for||Jd:Jd&&Jd.withoutSetter||tY,Af=function(i){return a3(LA,i)||(LA[i]=nY&&a3(Jd,i)?Jd[i]:iY("Symbol."+i)),LA[i]},oY=Sl,s3=Sh,u3=FU,aY=RC,sY=jz,uY=Af,lY=TypeError,cY=uY("toPrimitive"),fY=function(i,o){if(!s3(i)||u3(i))return i;var l=aY(i,cY),d;if(l){if(o===void 0&&(o="default"),d=oY(l,i,o),!s3(d)||u3(d))return d;throw new lY("Can't convert object to primitive value")}return o===void 0&&(o="number"),sY(i,o)},dY=fY,hY=FU,ZU=function(i){var o=dY(i,"string");return hY(o)?o:o+""},pY=ja,l3=Sh,eb=pY.document,gY=l3(eb)&&l3(eb.createElement),GU=function(i){return gY?eb.createElement(i):{}},mY=gc,vY=ps,yY=GU,qU=!mY&&!vY(function(){return Object.defineProperty(yY("div"),"a",{get:function(){return 7}}).a!==7}),EY=gc,_Y=Sl,TY=bU,SY=xU,wY=fE,AY=ZU,IY=mc,bY=qU,c3=Object.getOwnPropertyDescriptor;IC.f=EY?c3:function(o,l){if(o=wY(o),l=AY(l),bY)try{return c3(o,l)}catch(d){}if(IY(o,l))return SY(!_Y(TY.f,o,l),o[l])};var nm={},CY=gc,RY=ps,HU=CY&&RY(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),xY=Sh,NY=String,MY=TypeError,If=function(i){if(xY(i))return i;throw new MY(NY(i)+" is not an object")},DY=gc,PY=qU,OY=HU,Hy=If,f3=ZU,LY=TypeError,kA=Object.defineProperty,kY=Object.getOwnPropertyDescriptor,FA="enumerable",UA="configurable",BA="writable";nm.f=DY?OY?function(o,l,d){if(Hy(o),l=f3(l),Hy(d),typeof o=="function"&&l==="prototype"&&"value"in d&&BA in d&&!d[BA]){var p=kY(o,l);p&&p[BA]&&(o[l]=d.value,d={configurable:UA in d?d[UA]:p[UA],enumerable:FA in d?d[FA]:p[FA],writable:!1})}return kA(o,l,d)}:kA:function(o,l,d){if(Hy(o),l=f3(l),Hy(d),PY)try{return kA(o,l,d)}catch(p){}if("get"in d||"set"in d)throw new LY("Accessors not supported");return"value"in d&&(o[l]=d.value),o};var FY=gc,UY=nm,BY=xU,DC=FY?function(i,o,l){return UY.f(i,o,BY(1,l))}:function(i,o,l){return i[o]=l,i},KU={exports:{}},tb=gc,jY=mc,VU=Function.prototype,ZY=tb&&Object.getOwnPropertyDescriptor,PC=jY(VU,"name"),GY=PC&&(function(){}).name==="something",qY=PC&&(!tb||tb&&ZY(VU,"name").configurable),HY={EXISTS:PC,PROPER:GY,CONFIGURABLE:qY},KY=Ta,VY=Za,nb=NC,zY=KY(Function.toString);VY(nb.inspectSource)||(nb.inspectSource=function(i){return zY(i)});var YY=nb.inspectSource,WY=ja,$Y=Za,d3=WY.WeakMap,XY=$Y(d3)&&/native code/.test(String(d3)),QY=MC,JY=jU,h3=QY("keys"),zU=function(i){return h3[i]||(h3[i]=JY(i))},OC={},eW=XY,YU=ja,tW=Sh,nW=DC,jA=mc,ZA=NC,rW=zU,iW=OC,p3="Object already initialized",rb=YU.TypeError,oW=YU.WeakMap,O0,qg,L0,aW=function(i){return L0(i)?qg(i):O0(i,{})},sW=function(i){return function(o){var l;if(!tW(o)||(l=qg(o)).type!==i)throw new rb("Incompatible receiver, "+i+" required");return l}};if(eW||ZA.state){var Cu=ZA.state||(ZA.state=new oW);Cu.get=Cu.get,Cu.has=Cu.has,Cu.set=Cu.set,O0=function(i,o){if(Cu.has(i))throw new rb(p3);return o.facade=i,Cu.set(i,o),o},qg=function(i){return Cu.get(i)||{}},L0=function(i){return Cu.has(i)}}else{var Fd=rW("state");iW[Fd]=!0,O0=function(i,o){if(jA(i,Fd))throw new rb(p3);return o.facade=i,nW(i,Fd,o),o},qg=function(i){return jA(i,Fd)?i[Fd]:{}},L0=function(i){return jA(i,Fd)}}var WU={set:O0,get:qg,has:L0,enforce:aW,getterFor:sW},LC=Ta,uW=ps,lW=Za,Ky=mc,ib=gc,cW=HY.CONFIGURABLE,fW=YY,$U=WU,dW=$U.enforce,hW=$U.get,g3=String,i0=Object.defineProperty,pW=LC("".slice),gW=LC("".replace),mW=LC([].join),vW=ib&&!uW(function(){return i0(function(){},"length",{value:8}).length!==8}),yW=String(String).split("String"),EW=KU.exports=function(i,o,l){pW(g3(o),0,7)==="Symbol("&&(o="["+gW(g3(o),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(o="get "+o),l&&l.setter&&(o="set "+o),(!Ky(i,"name")||cW&&i.name!==o)&&(ib?i0(i,"name",{value:o,configurable:!0}):i.name=o),vW&&l&&Ky(l,"arity")&&i.length!==l.arity&&i0(i,"length",{value:l.arity});try{l&&Ky(l,"constructor")&&l.constructor?ib&&i0(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch(p){}var d=dW(i);return Ky(d,"source")||(d.source=mW(yW,typeof o=="string"?o:"")),i};Function.prototype.toString=EW(function(){return lW(this)&&hW(this).source||fW(this)},"toString");var _W=KU.exports,TW=Za,SW=nm,wW=_W,AW=xC,XU=function(i,o,l,d){d||(d={});var p=d.enumerable,I=d.name!==void 0?d.name:o;if(TW(l)&&wW(l,I,d),d.global)p?i[o]=l:AW(o,l);else{try{d.unsafe?i[o]&&(p=!0):delete i[o]}catch(R){}p?i[o]=l:SW.f(i,o,{value:l,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return i},QU={},IW=Math.ceil,bW=Math.floor,CW=Math.trunc||function(o){var l=+o;return(l>0?bW:IW)(l)},RW=CW,dE=function(i){var o=+i;return o!==o||o===0?0:RW(o)},xW=dE,NW=Math.max,MW=Math.min,DW=function(i,o){var l=xW(i);return l<0?NW(l+o,0):MW(l,o)},PW=dE,OW=Math.min,JU=function(i){var o=PW(i);return o>0?OW(o,9007199254740991):0},LW=JU,kW=function(i){return LW(i.length)},FW=fE,UW=DW,BW=kW,m3=function(i){return function(o,l,d){var p=FW(o),I=BW(p);if(I===0)return!i&&-1;var R=UW(d,I),g;if(i&&l!==l){for(;I>R;)if(g=p[R++],g!==g)return!0}else for(;I>R;R++)if((i||R in p)&&p[R]===l)return i||R||0;return!i&&-1}},jW={includes:m3(!0),indexOf:m3(!1)},ZW=Ta,GA=mc,GW=fE,qW=jW.indexOf,HW=OC,v3=ZW([].push),eB=function(i,o){var l=GW(i),d=0,p=[],I;for(I in l)!GA(HW,I)&&GA(l,I)&&v3(p,I);for(;o.length>d;)GA(l,I=o[d++])&&(~qW(p,I)||v3(p,I));return p},kC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],KW=eB,VW=kC,zW=VW.concat("length","prototype");QU.f=Object.getOwnPropertyNames||function(o){return KW(o,zW)};var tB={};tB.f=Object.getOwnPropertySymbols;var YW=CC,WW=Ta,$W=QU,XW=tB,QW=If,JW=WW([].concat),e$=YW("Reflect","ownKeys")||function(o){var l=$W.f(QW(o)),d=XW.f;return d?JW(l,d(o)):l},y3=mc,t$=e$,n$=IC,r$=nm,i$=function(i,o,l){for(var d=t$(o),p=r$.f,I=n$.f,R=0;R<d.length;R++){var g=d[R];!y3(i,g)&&!(l&&y3(l,g))&&p(i,g,I(o,g))}},o$=ps,a$=Za,s$=/#|\.prototype\./,rm=function(i,o){var l=l$[u$(i)];return l===f$?!0:l===c$?!1:a$(o)?o$(o):!!o},u$=rm.normalize=function(i){return String(i).replace(s$,".").toLowerCase()},l$=rm.data={},c$=rm.NATIVE="N",f$=rm.POLYFILL="P",d$=rm,Vy=ja,h$=IC.f,p$=DC,g$=XU,m$=xC,v$=i$,y$=d$,nB=function(i,o){var l=i.target,d=i.global,p=i.stat,I,R,g,w,U,C;if(d?R=Vy:p?R=Vy[l]||m$(l,{}):R=Vy[l]&&Vy[l].prototype,R)for(g in o){if(U=o[g],i.dontCallGetSet?(C=h$(R,g),w=C&&C.value):w=R[g],I=y$(d?g:l+(p?".":"#")+g,i.forced),!I&&w!==void 0){if(typeof U==typeof w)continue;v$(U,w)}(i.sham||w&&w.sham)&&p$(U,"sham",!0),g$(R,g,U,i)}},E$=Sh,_$=lE,T$=Af,S$=T$("match"),w$=function(i){var o;return E$(i)&&((o=i[S$])!==void 0?!!o:_$(i)==="RegExp")},A$=Af,I$=A$("toStringTag"),rB={};rB[I$]="z";var b$=String(rB)==="[object z]",C$=b$,R$=Za,o0=lE,x$=Af,N$=x$("toStringTag"),M$=Object,D$=o0(function(){return arguments}())==="Arguments",P$=function(i,o){try{return i[o]}catch(l){}},O$=C$?o0:function(i){var o,l,d;return i===void 0?"Undefined":i===null?"Null":typeof(l=P$(o=M$(i),N$))=="string"?l:D$?o0(o):(d=o0(o))==="Object"&&R$(o.callee)?"Arguments":d},L$=O$,k$=String,hE=function(i){if(L$(i)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return k$(i)},F$=If,iB=function(){var i=F$(this),o="";return i.hasIndices&&(o+="d"),i.global&&(o+="g"),i.ignoreCase&&(o+="i"),i.multiline&&(o+="m"),i.dotAll&&(o+="s"),i.unicode&&(o+="u"),i.unicodeSets&&(o+="v"),i.sticky&&(o+="y"),o},U$=Sl,B$=mc,j$=PU,Z$=iB,E3=RegExp.prototype,G$=function(i){var o=i.flags;return o===void 0&&!("flags"in E3)&&!B$(i,"flags")&&j$(E3,i)?U$(Z$,i):o},FC=Ta,q$=BU,H$=Math.floor,qA=FC("".charAt),K$=FC("".replace),HA=FC("".slice),V$=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,z$=/\$([$&'`]|\d{1,2})/g,oB=function(i,o,l,d,p,I){var R=l+i.length,g=d.length,w=z$;return p!==void 0&&(p=q$(p),w=V$),K$(I,w,function(U,C){var y;switch(qA(C,0)){case"$":return"$";case"&":return i;case"`":return HA(o,0,l);case"'":return HA(o,R);case"<":y=p[HA(C,1,-1)];break;default:var v=+C;if(v===0)return U;if(v>g){var D=H$(v/10);return D===0?U:D<=g?d[D-1]===void 0?qA(C,1):d[D-1]+qA(C,1):U}y=d[v-1]}return y===void 0?"":y})},Y$=nB,W$=Sl,UC=Ta,_3=tm,$$=Za,X$=cE,Q$=w$,rg=hE,J$=RC,eX=G$,tX=oB,nX=Af,rX=nX("replace"),iX=TypeError,KA=UC("".indexOf);UC("".replace);var T3=UC("".slice),oX=Math.max;Y$({target:"String",proto:!0},{replaceAll:function(o,l){var d=_3(this),p,I,R,g,w,U,C,y,v,D=0,m=0,T="";if(!X$(o)){if(p=Q$(o),p&&(I=rg(_3(eX(o))),!~KA(I,"g")))throw new iX("`.replaceAll` does not allow non-global regexes");if(R=J$(o,rX),R)return W$(R,o,d,l)}for(g=rg(d),w=rg(o),U=$$(l),U||(l=rg(l)),C=w.length,y=oX(1,C),D=KA(g,w);D!==-1;)v=U?rg(l(w,D,g)):tX(w,g,D,[],void 0,l),T+=T3(g,m,D)+v,m=D+C,D=D+y>g.length?-1:KA(g,w,D+y);return m<g.length&&(T+=T3(g,m)),T}});var BC=ps,aX=ja,jC=aX.RegExp,ZC=BC(function(){var i=jC("a","y");return i.lastIndex=2,i.exec("abcd")!==null}),sX=ZC||BC(function(){return!jC("a","y").sticky}),uX=ZC||BC(function(){var i=jC("^r","gy");return i.lastIndex=2,i.exec("str")!==null}),lX={BROKEN_CARET:uX,MISSED_STICKY:sX,UNSUPPORTED_Y:ZC},aB={},cX=eB,fX=kC,dX=Object.keys||function(o){return cX(o,fX)},hX=gc,pX=HU,gX=nm,mX=If,vX=fE,yX=dX;aB.f=hX&&!pX?Object.defineProperties:function(o,l){mX(o);for(var d=vX(l),p=yX(l),I=p.length,R=0,g;I>R;)gX.f(o,g=p[R++],d[g]);return o};var EX=CC,_X=EX("document","documentElement"),TX=If,SX=aB,S3=kC,wX=OC,AX=_X,IX=GU,bX=zU,w3=">",A3="<",ob="prototype",ab="script",sB=bX("IE_PROTO"),VA=function(){},uB=function(i){return A3+ab+w3+i+A3+"/"+ab+w3},I3=function(i){i.write(uB("")),i.close();var o=i.parentWindow.Object;return i=null,o},CX=function(){var i=IX("iframe"),o="java"+ab+":",l;return i.style.display="none",AX.appendChild(i),i.src=String(o),l=i.contentWindow.document,l.open(),l.write(uB("document.F=Object")),l.close(),l.F},zy,a0=function(){try{zy=new ActiveXObject("htmlfile")}catch(o){}a0=typeof document<"u"?document.domain&&zy?I3(zy):CX():I3(zy);for(var i=S3.length;i--;)delete a0[ob][S3[i]];return a0()};wX[sB]=!0;var RX=Object.create||function(o,l){var d;return o!==null?(VA[ob]=TX(o),d=new VA,VA[ob]=null,d[sB]=o):d=a0(),l===void 0?d:SX.f(d,l)},xX=ps,NX=ja,MX=NX.RegExp,DX=xX(function(){var i=MX(".","s");return!(i.dotAll&&i.test("\n")&&i.flags==="s")}),PX=ps,OX=ja,LX=OX.RegExp,kX=PX(function(){var i=LX("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"}),eh=Sl,pE=Ta,FX=hE,UX=iB,BX=lX,jX=MC,ZX=RX,GX=WU.get,qX=DX,HX=kX,KX=jX("native-string-replace",String.prototype.replace),k0=RegExp.prototype.exec,sb=k0,VX=pE("".charAt),zX=pE("".indexOf),YX=pE("".replace),zA=pE("".slice),ub=function(){var i=/a/,o=/b*/g;return eh(k0,i,"a"),eh(k0,o,"a"),i.lastIndex!==0||o.lastIndex!==0}(),lB=BX.BROKEN_CARET,lb=/()??/.exec("")[1]!==void 0,WX=ub||lb||lB||qX||HX;WX&&(sb=function(o){var l=this,d=GX(l),p=FX(o),I=d.raw,R,g,w,U,C,y,v;if(I)return I.lastIndex=l.lastIndex,R=eh(sb,I,p),l.lastIndex=I.lastIndex,R;var D=d.groups,m=lB&&l.sticky,T=eh(UX,l),F=l.source,N=0,_=p;if(m&&(T=YX(T,"y",""),zX(T,"g")===-1&&(T+="g"),_=zA(p,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&VX(p,l.lastIndex-1)!=="\n")&&(F="(?: "+F+")",_=" "+_,N++),g=new RegExp("^(?:"+F+")",T)),lb&&(g=new RegExp("^"+F+"$(?!\\s)",T)),ub&&(w=l.lastIndex),U=eh(k0,m?g:l,_),m?U?(U.input=zA(U.input,N),U[0]=zA(U[0],N),U.index=l.lastIndex,l.lastIndex+=U[0].length):l.lastIndex=0:ub&&U&&(l.lastIndex=l.global?U.index+U[0].length:w),lb&&U&&U.length>1&&eh(KX,U[0],g,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(U[C]=void 0)}),U&&D)for(U.groups=y=ZX(null),C=0;C<D.length;C++)v=D[C],y[v[0]]=U[v[1]];return U});var GC=sb,$X=nB,b3=GC;$X({target:"RegExp",proto:!0,forced:/./.exec!==b3},{exec:b3});var XX=bC,cB=Function.prototype,C3=cB.apply,R3=cB.call,QX=typeof Reflect=="object"&&Reflect.apply||(XX?R3.bind(C3):function(){return R3.apply(C3,arguments)}),x3=Sl,N3=XU,JX=GC,M3=ps,fB=Af,eQ=DC,tQ=fB("species"),YA=RegExp.prototype,nQ=function(i,o,l,d){var p=fB(i),I=!M3(function(){var U={};return U[p]=function(){return 7},""[i](U)!==7}),R=I&&!M3(function(){var U=!1,C=/a/;return i==="split"&&(C={},C.constructor={},C.constructor[tQ]=function(){return C},C.flags="",C[p]=/./[p]),C.exec=function(){return U=!0,null},C[p](""),!U});if(!I||!R||l){var g=/./[p],w=o(p,""[i],function(U,C,y,v,D){var m=C.exec;return m===JX||m===YA.exec?I&&!D?{done:!0,value:x3(g,C,y,v)}:{done:!0,value:x3(U,y,C,v)}:{done:!1}});N3(String.prototype,i,w[0]),N3(YA,p,w[1])}d&&eQ(YA[p],"sham",!0)},qC=Ta,rQ=dE,iQ=hE,oQ=tm,aQ=qC("".charAt),D3=qC("".charCodeAt),sQ=qC("".slice),P3=function(i){return function(o,l){var d=iQ(oQ(o)),p=rQ(l),I=d.length,R,g;return p<0||p>=I?i?"":void 0:(R=D3(d,p),R<55296||R>56319||p+1===I||(g=D3(d,p+1))<56320||g>57343?i?aQ(d,p):R:i?sQ(d,p,p+2):(R-55296<<10)+(g-56320)+65536)}},uQ={codeAt:P3(!1),charAt:P3(!0)},lQ=uQ.charAt,cQ=function(i,o,l){return o+(l?lQ(i,o).length:1)},O3=Sl,fQ=If,dQ=Za,hQ=lE,pQ=GC,gQ=TypeError,mQ=function(i,o){var l=i.exec;if(dQ(l)){var d=O3(l,i,o);return d!==null&&fQ(d),d}if(hQ(i)==="RegExp")return O3(pQ,i,o);throw new gQ("RegExp#exec called on incompatible receiver")},vQ=QX,L3=Sl,gE=Ta,yQ=nQ,EQ=ps,_Q=If,TQ=Za,SQ=cE,wQ=dE,AQ=JU,Ud=hE,IQ=tm,bQ=cQ,CQ=RC,RQ=oB,xQ=mQ,NQ=Af,cb=NQ("replace"),MQ=Math.max,DQ=Math.min,PQ=gE([].concat),WA=gE([].push),k3=gE("".indexOf),F3=gE("".slice),OQ=function(i){return i===void 0?i:String(i)},LQ=function(){return"a".replace(/./,"$0")==="$0"}(),U3=function(){return/./[cb]?/./[cb]("a","$0")==="":!1}(),kQ=!EQ(function(){var i=/./;return i.exec=function(){var o=[];return o.groups={a:"7"},o},"".replace(i,"$<a>")!=="7"});yQ("replace",function(i,o,l){var d=U3?"$":"$0";return[function(I,R){var g=IQ(this),w=SQ(I)?void 0:CQ(I,cb);return w?L3(w,I,g,R):L3(o,Ud(g),I,R)},function(p,I){var R=_Q(this),g=Ud(p);if(typeof I=="string"&&k3(I,d)===-1&&k3(I,"$<")===-1){var w=l(o,R,g,I);if(w.done)return w.value}var U=TQ(I);U||(I=Ud(I));var C=R.global,y;C&&(y=R.unicode,R.lastIndex=0);for(var v=[],D;D=xQ(R,g),!(D===null||(WA(v,D),!C));){var m=Ud(D[0]);m===""&&(R.lastIndex=bQ(g,AQ(R.lastIndex),y))}for(var T="",F=0,N=0;N<v.length;N++){D=v[N];for(var _=Ud(D[0]),A=MQ(DQ(wQ(D.index),g.length),0),b=[],j,Y=1;Y<D.length;Y++)WA(b,OQ(D[Y]));var W=D.groups;if(U){var $=PQ([_],b,A,g);W!==void 0&&WA($,W),j=Ud(vQ(I,void 0,$))}else j=RQ(_,g,A,b,W,I);A>=F&&(T+=F3(g,F,A)+j,F=A+_.length)}return T+F3(g,F)}]},!kQ||!LQ||U3);var FQ=ja,UQ=Ta,BQ=function(i,o){return UQ(FQ[i].prototype[o])},jQ=BQ;jQ("String","replaceAll");function HC(){const i=su(),o=wf(),[l]=SU();return vn.useCallback(async(d,p)=>{var g;if(!l||!i)return;const I=(g=o==null?void 0:o.distributionUrl)!=null?g:"";let R=l.cameraURLTemplate;if(R=R.replace("{{baseURL}}",I),R=R.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),R=R.replaceAll("{{assetName}}",p.camera.assetName||""),R!==d.currentSource&&o)return await d.load(p,R,{startTimeSeconds:i.getExpectedPositionInSeconds()-mi(p.camera.span.time,o.frameRate),eventOffset:mi(p.camera.span.time,o.frameRate),reelOffset:mi(p.camera.reelOffset,o.frameRate)})},[i,l,o])}function ZQ(){const i=HC();return vn.useCallback(async(o,l)=>await i(o,l).then(),[i])}function GQ(){const i=su(),o=Th(),l=wC();vn.useEffect(()=>{if(!i||!o||!l)return;const d=({command:p,reference:I,start:R})=>{i.pausePlayStream(p,I,R)};return o.on("pausePlayStream",d),()=>{o.off("pausePlayStream",d)}},[i,o,l])}function qQ(i){const o=su(),l=wf(),d=Th(),p=ZQ(),I=HC();vn.useEffect(()=>{if(!d||!l||!o||!i)return;let R,g=[void 0,-1];const w=()=>{const T=o.getExpectedPositionInSeconds()<=0?0:o.getExpectedPositionInSeconds();return sE(l,T)[0]},U=T=>{g[0]=I(i,T),g[1]=T.index},C=T=>{if(g[0]&&g[1]===T.index){g[0].then(()=>{}),g=[void 0,-1];return}try{p(i,T)}catch(F){console.error("failed to play stream",F)}},y=()=>{const T=w();T&&U(T)},v=()=>{const T=w();T&&C(T)},D=({index:T})=>{var N;const F=(N=Kk(T,l))!=null?N:XI(T,l,o);F&&U(F)},m=({index:T})=>{var N;const F=(N=Kk(T,l))!=null?N:XI(T,l,o);F&&(U(F),R=setTimeout(()=>{C(F)},1900))};return d.on("prepareCast",D),d.on("cast",m),o.on("prepareStart",y),o.on("start",v),o.isLive?(o.preparePlayback(),v()):o.isInPrepare?y():console.log("HRRR"),()=>{d.off("prepareCast",D),d.off("cast",m),o.off("prepareStart",y),o.off("start",v),clearTimeout(R)}},[d,l,o,i,p,I])}function HQ(i){const o=em();vn.useEffect(()=>{if(!i||!o)return;const l=()=>{i.currentCamera&&o.updatePlaying(i.currentCamera)};return i.on("playing",l),()=>{i.off("playing",l)}},[i,o])}function KQ(i){const o=em(),l=su(),d=wf(),p=HC();vn.useEffect(()=>{if(!d||!l||!i||!o)return;const I=({remainingTime:R})=>{const g=yU(d,l.getExpectedPositionInSeconds(),R,i.currentCamera);if(g)try{const w=p(i,g);o.once("ended",()=>{w.then(()=>{})})}catch(w){console.error("failed to load stream",w)}else o.once("ended",()=>{o.endEvent()})};return o.on("nearEnd",I),()=>{o.off("nearEnd",I)}},[d,l,i,p,o])}function VQ(i,o,l){const d=kV(),p=su(),[I,R]=vn.useState(null);return vn.useEffect(()=>{const g=document.querySelector(i);if(g==null||!p||!l)return;const w=new JV({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:o,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:d}},eventClock:p});return R(w),()=>{w.destroy()}},[d,i,o,l,p]),I}function zQ(i){const o=su(),l=Th(),d=wf(),p=em(),[I,R]=vn.useState(),[g,w]=vn.useState();return vn.useEffect(()=>{if(!d||!o||!i||!l||!p)return;const U=({index:y})=>{w(XI(y,d,o)),R(i.currentCamera)},C=()=>{const y=i.currentCamera;(y==null?void 0:y.camera.transition)==="mapAndClosing"&&(w(yU(d,o.getExpectedPositionInSeconds(),2,y)),R(y))};return l.on("cast",U),p.on("transition",C),()=>{l.off("cast",U),p.off("transition",C)}},[d,o,i,l,p]),[I,g]}function dB({x:i,y:o,mapScale:l}){const[d,p]=vn.useState(0),[I,R]=vn.useState(0),[g,w]=vn.useState(0),[U,C]=vn.useState(0),[y,v]=vn.useState(0);return vn.useEffect(()=>{const D=window.innerWidth,m=window.innerHeight,T=D/12,F=m/12;C(m/2-m*.05),v(D/m),p(i*T),R(o*F),w(T*l)},[i,o,l]),{scaledX:d,scaledY:I,size:g,baseY:U,aspectRatio:y}}const YQ="_container_zht4e_1",WQ="_fadeIn_zht4e_1",$Q="_scrollWrapper_zht4e_15",XQ="_scrollContainer_zht4e_29",$A={container:YQ,fadeIn:WQ,scrollWrapper:$Q,scrollContainer:XQ};function QQ(){const i=SC();return bt.jsxs("div",{className:$A.container,children:[bt.jsx("h1",{children:i==null?void 0:i.postScreen.title}),bt.jsx("p",{className:"body-text",style:{opacity:.5},children:i==null?void 0:i.postScreen.body}),bt.jsx("div",{className:$A.scrollWrapper,children:bt.jsx("div",{className:$A.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>bt.jsx("img",{src:o.image.url},l))})})]})}const JQ="_transitionWrapper_jyngr_1",eJ="_active_jyngr_17",tJ="_transition_jyngr_1",nJ="_fadeOut_jyngr_1",rJ="_hidden_jyngr_57",iJ="_visible_jyngr_67",oJ="_videoTitle_jyngr_77",aJ="_fadeIn_jyngr_1",ig={transitionWrapper:JQ,active:eJ,transition:tJ,fadeOut:nJ,hidden:rJ,visible:iJ,videoTitle:oJ,fadeIn:aJ},sJ="_placeContainer_ywyae_1",uJ="_place_ywyae_1",lJ="_background_ywyae_45",cJ="_activePlace_ywyae_57",fJ="_fadeOut_ywyae_1",dJ="_normalPlace_ywyae_79",hJ="_selectedPlace_ywyae_99",pJ="_fadeIn_ywyae_1",gJ="_pulseEffect_ywyae_1",mJ="_title_ywyae_153",Xc={placeContainer:sJ,place:uJ,background:lJ,activePlace:cJ,fadeOut:fJ,normalPlace:dJ,selectedPlace:hJ,fadeIn:pJ,pulseEffect:gJ,title:mJ};var Is=(i=>(i.ACTIVE_PLACE="ActivePlace",i.SELECTED_PLACE="SelectedPlace",i.NORMAL_PLACE="NormalPlace",i))(Is||{});const vJ=({place:i,mapPlacesLength:o})=>{const l=dB({x:i.mapPosition.x,y:i.mapPosition.y,mapScale:i.mapScale}),d=vn.useMemo(()=>{switch(i.placeType){case Is.ACTIVE_PLACE:return Xc.activePlace;case Is.SELECTED_PLACE:return Xc.selectedPlace;case Is.NORMAL_PLACE:default:return Xc.normalPlace}},[i]);return bt.jsx("div",{className:Xc.placeContainer,children:bt.jsxs("div",{className:"".concat(Xc.place," ").concat(d),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(o>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(o>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[bt.jsx("div",{className:Xc.background}),(i.placeType===Is.ACTIVE_PLACE||i.placeType===Is.SELECTED_PLACE)&&bt.jsx("div",{className:"subheader-light ".concat(Xc.title),children:i.title})]})})},yJ="_followContainer_1h8ds_1",EJ="_follow_1h8ds_1",_J="_selectedFollow_1h8ds_35",TJ="_pulseEffect_1h8ds_1",SJ="_notSelectedFollow_1h8ds_79",wJ="_iconContainer_1h8ds_97",AJ="_labelContainer_1h8ds_131",Bd={followContainer:yJ,follow:EJ,selectedFollow:_J,pulseEffect:TJ,notSelectedFollow:SJ,iconContainer:wJ,labelContainer:AJ},IJ="_label_svzic_1",bJ={label:IJ},CJ=({content:i,classNames:o=""})=>bt.jsx("div",{className:"".concat(bJ.label," ").concat(o," label"),children:i}),RJ=({style:i})=>bt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:i,children:bt.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),hB=({classNames:i,styles:o,color:l,stroke:d})=>bt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[bt.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),xJ=({classNames:i,styles:o,color:l,stroke:d})=>bt.jsxs("svg",{className:i,style:o,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[bt.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),bt.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),bt.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),bt.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"})]}),NJ=()=>bt.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[bt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),MJ=()=>bt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[bt.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),DJ=()=>bt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[bt.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),bt.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),PJ=()=>bt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:bt.jsxs("g",{children:[bt.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),bt.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),bt.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),bt.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),OJ=()=>bt.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:bt.jsxs("g",{children:[bt.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),bt.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),bt.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),bt.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),LJ=({follow:i})=>{var p,I,R,g;const o=dB({x:(I=(p=i.mapPosition)==null?void 0:p.x)!=null?I:0,y:(g=(R=i.mapPosition)==null?void 0:R.y)!=null?g:0,mapScale:.6}),[l,d]=vn.useState(0);return vn.useEffect(()=>{function w(U,C,y){return-Math.atan2((U.x-C.x)*y,U.y-C.y)*(180/Math.PI)}i.mapPosition&&d(w(i.mapPositions[0],i.mapPositions[i.mapPositions.length-1],o.aspectRatio))},[i.mapPosition,i.mapPositions,o]),bt.jsxs("div",{className:Bd.followContainer,style:{width:o.size,height:o.size,left:"calc(50% + ".concat(o.scaledX,"px)"),top:"calc(50% - ".concat(o.scaledY,"px)")},children:[bt.jsx("div",{className:"".concat(Bd.follow," ").concat(i.isSelectedFollow?Bd.selectedFollow:Bd.notSelectedFollow," ").concat(Bd.iconContainer),children:bt.jsx(RJ,{style:{transform:"rotate(".concat(l,"deg)")}})}),i.isSelectedFollow&&bt.jsx(CJ,{classNames:Bd.labelContainer,content:i.title})]})},kJ=({fromCamera:i,toCamera:o})=>{const l=wf(),d=su(),p=4200,I=p+3950,R=1900,[g,w]=vn.useState([]),[U,C]=vn.useState([]),[y,v]=vn.useState(!1),[D,m]=vn.useState(!1),[T,F]=vn.useState(""),N=vn.useRef([]),_=vn.useMemo(()=>{function se(x,X){const ce=x.jumpSpots.map(je=>je.camera.span),me=ce.map(je=>je.time).map(je=>mi(je,X.frameRate)),Ce=Math.min(...me),Je=ce.map(je=>mi(je.time,X.frameRate)+mi(je.duration,X.frameRate)),Te=Math.max(...Je);return{start:Ce,end:Te}}return l==null?void 0:l.places.filter(x=>x.jumpSpots.length>0).map((x,X)=>({...x,span:se(x,l),placeType:Is.NORMAL_PLACE,placeIndex:X}))},[l]),A=vn.useMemo(()=>(l==null?void 0:l.follows.map(se=>({...se,isSelectedFollow:!1})))||[],[l]),b=vn.useCallback((se,x)=>{const X=mi(se.camera.span.time,x.frameRate)+2;return(_==null?void 0:_.filter(ce=>ce.span.start<=X&&X<=ce.span.end))||[]},[_]),j=vn.useCallback(se=>{const x=se.mapPositions[0]||{x:0,y:0};if(l&&d){const X=d.getExpectedPositionInSeconds()-mi(se.camera.span.time,l.frameRate),ce=mi(se.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/ce);return X===ce&&(oe-=1),se.mapPositions[oe]||x}return x},[d,l]),Y=vn.useCallback((se,x)=>{const X=mi(se.camera.span.time,x.frameRate)+2;return A.filter(ce=>mi(ce.camera.span.time,x.frameRate)<=X&&X<=mi(ce.camera.span.time,x.frameRate)+mi(ce.camera.span.duration,x.frameRate)).map(ce=>({...ce,mapPosition:j(ce)}))},[A,j]),W=vn.useCallback(se=>_==null?void 0:_.find(x=>x.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName)),[_]),$=(se,x)=>x.jumpSpots.some(X=>X.camera.assetName===se.camera.assetName);return vn.useEffect(()=>{if(!_||!i||!o||!l||i.camera.assetName===o.camera.assetName)return;const se=N.current;let x=[],X=[],ce=[],oe=[];if(F(o.placeTitle?o.placeTitle:o.title),i.type===ef.JUMPSPOT&&o.type===ef.JUMPSPOT&&i.placeIndex===o.placeIndex)m(!1),v(!0);else{switch(m(!0),i.type){case ef.JUMPSPOT:X=Y(o,l),x=b(i,l).map(je=>$(i,je)?{...je,placeType:Is.ACTIVE_PLACE}:je);break;case ef.FOLLOW:x=b(i,l),X=Y(i,l).map(je=>({...je,isSelectedFollow:i.camera.assetName===je.camera.assetName}));break}switch(w(x),C(X),o.type){case ef.JUMPSPOT:oe=Y(i,l);const je=x.find(ct=>$(o,ct));if(je)ce=x.map(ct=>({...ct,placeType:ct.placeIndex===je.placeIndex?Is.SELECTED_PLACE:Is.NORMAL_PLACE}));else{const ct=W(o);ct&&(ct.placeType=Is.SELECTED_PLACE,ce=[...x.map(Ie=>({...Ie,placeType:Is.NORMAL_PLACE})),ct])}break;case ef.FOLLOW:ce=b(i,l),oe=Y(i,l);const ot=X.find(ct=>ct.camera.assetName===o.camera.assetName);if(ot)oe=X.map(ct=>({...ct,isSelectedFollow:ct.camera.assetName===ot.camera.assetName}));else{const ct=A.find(Ie=>Ie.camera.assetName===o.camera.assetName);if(ct){const Ie={...ct,isSelectedFollow:!0,mapPosition:j(ct)};oe=[...X.map(qe=>({...qe,isSelectedFollow:!1})),Ie]}}break}}const me=setTimeout(()=>{C(oe)},R);se.push(me);const Ce=setTimeout(()=>{w(ce)},R);se.push(Ce);const Je=setTimeout(()=>{m(!1),v(!0)},p);se.push(Je);const Te=setTimeout(()=>{v(!1)},I);return se.push(Te),()=>{se.forEach(je=>{clearTimeout(je)}),N.current=[]}},[i,o,_,A,Y,W,l,b,j,I]),bt.jsxs("div",{className:"".concat(ig.transitionWrapper," ").concat(D?ig.active:""),children:[D&&bt.jsxs("div",{className:"".concat(ig.transition," ").concat(ig.visible),children:[g.map((se,x)=>bt.jsx(vJ,{place:se,mapPlacesLength:g.length},"place-".concat(x.toString()))),U.filter(se=>se.camera.assetName===(i==null?void 0:i.camera.assetName)||se.camera.assetName===(o==null?void 0:o.camera.assetName)).map((se,x)=>bt.jsx(LJ,{follow:se},"follow-".concat(x.toString())))]}),y&&bt.jsx("h1",{className:ig.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},FJ="_playerPage_s22qw_1",UJ="_playerContainer_s22qw_13",BJ="_fadeIn_s22qw_1",B3={playerPage:FJ,playerContainer:UJ,fadeIn:BJ},jJ="_attention_1xh5o_1",ZJ="_ripple1_1xh5o_1",GJ="_ripple2_1xh5o_1",qJ="_thirdRipple_1xh5o_81",HJ="_ripple3_1xh5o_1",KJ="_iconWrapper_1xh5o_105",XA={attention:jJ,ripple1:ZJ,ripple2:GJ,thirdRipple:qJ,ripple3:HJ,iconWrapper:KJ},VJ=()=>{const i=em(),[o,l]=vn.useState(!1),d=5e3;if(vn.useEffect(()=>{if(!i)return;let p;const I=()=>{l(!0),p=setTimeout(()=>{l(!1)},d)};return i.on("attention",I),()=>{i.off("attention",I),clearTimeout(p)}},[i]),!!o)return bt.jsxs("div",{className:XA.attention,children:[bt.jsx("span",{className:XA.iconWrapper,children:bt.jsx(DJ,{})}),bt.jsx("span",{className:XA.thirdRipple})]})};var zJ=Object.defineProperty,F0=Object.getOwnPropertySymbols,pB=Object.prototype.hasOwnProperty,gB=Object.prototype.propertyIsEnumerable,j3=(i,o,l)=>o in i?zJ(i,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[o]=l,Hg=(i,o)=>{for(var l in o||(o={}))pB.call(o,l)&&j3(i,l,o[l]);if(F0)for(var l of F0(o))gB.call(o,l)&&j3(i,l,o[l]);return i},KC=(i,o)=>{var l={};for(var d in i)pB.call(i,d)&&o.indexOf(d)<0&&(l[d]=i[d]);if(i!=null&&F0)for(var d of F0(i))o.indexOf(d)<0&&gB.call(i,d)&&(l[d]=i[d]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var vf;(i=>{const o=class{constructor(w,U,C,y){if(this.version=w,this.errorCorrectionLevel=U,this.modules=[],this.isFunction=[],w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let v=[];for(let m=0;m<this.size;m++)v.push(!1);for(let m=0;m<this.size;m++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(C);if(this.drawCodewords(D),y==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const F=this.getPenaltyScore();F<m&&(y=T,m=F),this.applyMask(T)}}I(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(w,U){const C=i.QrSegment.makeSegments(w);return o.encodeSegments(C,U)}static encodeBinary(w,U){const C=i.QrSegment.makeBytes(w);return o.encodeSegments([C],U)}static encodeSegments(w,U,C=1,y=40,v=-1,D=!0){if(!(o.MIN_VERSION<=C&&C<=y&&y<=o.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let m,T;for(m=C;;m++){const A=o.getNumDataCodewords(m,U)*8,b=g.getTotalBits(w,m);if(b<=A){T=b;break}if(m>=y)throw new RangeError("Data too long")}for(const A of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])D&&T<=o.getNumDataCodewords(m,A)*8&&(U=A);let F=[];for(const A of w){d(A.mode.modeBits,4,F),d(A.numChars,A.mode.numCharCountBits(m),F);for(const b of A.getData())F.push(b)}I(F.length==T);const N=o.getNumDataCodewords(m,U)*8;I(F.length<=N),d(0,Math.min(4,N-F.length),F),d(0,(8-F.length%8)%8,F),I(F.length%8==0);for(let A=236;F.length<N;A^=253)d(A,8,F);let _=[];for(;_.length*8<F.length;)_.push(0);return F.forEach((A,b)=>_[b>>>3]|=A<<7-(b&7)),new o(m,U,_,v)}getModule(w,U){return 0<=w&&w<this.size&&0<=U&&U<this.size&&this.modules[U][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),U=w.length;for(let C=0;C<U;C++)for(let y=0;y<U;y++)C==0&&y==0||C==0&&y==U-1||C==U-1&&y==0||this.drawAlignmentPattern(w[C],w[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const U=this.errorCorrectionLevel.formatBits<<3|w;let C=U;for(let v=0;v<10;v++)C=C<<1^(C>>>9)*1335;const y=(U<<10|C)^21522;I(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,p(y,v));this.setFunctionModule(8,7,p(y,6)),this.setFunctionModule(8,8,p(y,7)),this.setFunctionModule(7,8,p(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,p(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,p(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,p(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const U=this.version<<12|w;I(U>>>18==0);for(let C=0;C<18;C++){const y=p(U,C),v=this.size-11+C%3,D=Math.floor(C/3);this.setFunctionModule(v,D,y),this.setFunctionModule(D,v,y)}}drawFinderPattern(w,U){for(let C=-4;C<=4;C++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(C)),D=w+y,m=U+C;0<=D&&D<this.size&&0<=m&&m<this.size&&this.setFunctionModule(D,m,v!=2&&v!=4)}}drawAlignmentPattern(w,U){for(let C=-2;C<=2;C++)for(let y=-2;y<=2;y++)this.setFunctionModule(w+y,U+C,Math.max(Math.abs(y),Math.abs(C))!=1)}setFunctionModule(w,U,C){this.modules[U][w]=C,this.isFunction[U][w]=!0}addEccAndInterleave(w){const U=this.version,C=this.errorCorrectionLevel;if(w.length!=o.getNumDataCodewords(U,C))throw new RangeError("Invalid argument");const y=o.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][U],v=o.ECC_CODEWORDS_PER_BLOCK[C.ordinal][U],D=Math.floor(o.getNumRawDataModules(U)/8),m=y-D%y,T=Math.floor(D/y);let F=[];const N=o.reedSolomonComputeDivisor(v);for(let A=0,b=0;A<y;A++){let j=w.slice(b,b+T-v+(A<m?0:1));b+=j.length;const Y=o.reedSolomonComputeRemainder(j,N);A<m&&j.push(0),F.push(j.concat(Y))}let _=[];for(let A=0;A<F[0].length;A++)F.forEach((b,j)=>{(A!=T-v||j>=m)&&_.push(b[A])});return I(_.length==D),_}drawCodewords(w){if(w.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let U=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const D=C-v,T=(C+1&2)==0?this.size-1-y:y;!this.isFunction[T][D]&&U<w.length*8&&(this.modules[T][D]=p(w[U>>>3],7-(U&7)),U++)}}I(U==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let U=0;U<this.size;U++)for(let C=0;C<this.size;C++){let y;switch(w){case 0:y=(C+U)%2==0;break;case 1:y=U%2==0;break;case 2:y=C%3==0;break;case 3:y=(C+U)%3==0;break;case 4:y=(Math.floor(C/3)+Math.floor(U/2))%2==0;break;case 5:y=C*U%2+C*U%3==0;break;case 6:y=(C*U%2+C*U%3)%2==0;break;case 7:y=((C+U)%2+C*U%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[U][C]&&y&&(this.modules[U][C]=!this.modules[U][C])}}getPenaltyScore(){let w=0;for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[v][F]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[v][F],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][v]==D?(m++,m==5?w+=o.PENALTY_N1:m>5&&w++):(this.finderPenaltyAddHistory(m,T),D||(w+=this.finderPenaltyCountPatterns(T)*o.PENALTY_N3),D=this.modules[F][v],m=1);w+=this.finderPenaltyTerminateAndCount(D,m,T)*o.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let D=0;D<this.size-1;D++){const m=this.modules[v][D];m==this.modules[v][D+1]&&m==this.modules[v+1][D]&&m==this.modules[v+1][D+1]&&(w+=o.PENALTY_N2)}let U=0;for(const v of this.modules)U=v.reduce((D,m)=>D+(m?1:0),U);const C=this.size*this.size,y=Math.ceil(Math.abs(U*20-C*10)/C)-1;return I(0<=y&&y<=9),w+=y*o.PENALTY_N4,I(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,U=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let y=this.size-7;C.length<w;y-=U)C.splice(1,0,y);return C}}static getNumRawDataModules(w){if(w<o.MIN_VERSION||w>o.MAX_VERSION)throw new RangeError("Version number out of range");let U=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;U-=(25*C-10)*C-55,w>=7&&(U-=36)}return I(208<=U&&U<=29648),U}static getNumDataCodewords(w,U){return Math.floor(o.getNumRawDataModules(w)/8)-o.ECC_CODEWORDS_PER_BLOCK[U.ordinal][w]*o.NUM_ERROR_CORRECTION_BLOCKS[U.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let U=[];for(let y=0;y<w-1;y++)U.push(0);U.push(1);let C=1;for(let y=0;y<w;y++){for(let v=0;v<U.length;v++)U[v]=o.reedSolomonMultiply(U[v],C),v+1<U.length&&(U[v]^=U[v+1]);C=o.reedSolomonMultiply(C,2)}return U}static reedSolomonComputeRemainder(w,U){let C=U.map(y=>0);for(const y of w){const v=y^C.shift();C.push(0),U.forEach((D,m)=>C[m]^=o.reedSolomonMultiply(D,v))}return C}static reedSolomonMultiply(w,U){if(w>>>8||U>>>8)throw new RangeError("Byte out of range");let C=0;for(let y=7;y>=0;y--)C=C<<1^(C>>>7)*285,C^=(U>>>y&1)*w;return I(C>>>8==0),C}finderPenaltyCountPatterns(w){const U=w[1];I(U<=this.size*3);const C=U>0&&w[2]==U&&w[3]==U*3&&w[4]==U&&w[5]==U;return(C&&w[0]>=U*4&&w[6]>=U?1:0)+(C&&w[6]>=U*4&&w[0]>=U?1:0)}finderPenaltyTerminateAndCount(w,U,C){return w&&(this.finderPenaltyAddHistory(U,C),U=0),U+=this.size,this.finderPenaltyAddHistory(U,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,U){U[0]==0&&(w+=this.size),U.pop(),U.unshift(w)}};let l=o;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=l;function d(w,U,C){if(U<0||U>31||w>>>U)throw new RangeError("Value out of range");for(let y=U-1;y>=0;y--)C.push(w>>>y&1)}function p(w,U){return(w>>>U&1)!=0}function I(w){if(!w)throw new Error("Assertion error")}const R=class{constructor(w,U,C){if(this.mode=w,this.numChars=U,this.bitData=C,U<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let U=[];for(const C of w)d(C,8,U);return new R(R.Mode.BYTE,w.length,U)}static makeNumeric(w){if(!R.isNumeric(w))throw new RangeError("String contains non-numeric characters");let U=[];for(let C=0;C<w.length;){const y=Math.min(w.length-C,3);d(parseInt(w.substr(C,y),10),y*3+1,U),C+=y}return new R(R.Mode.NUMERIC,w.length,U)}static makeAlphanumeric(w){if(!R.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let U=[],C;for(C=0;C+2<=w.length;C+=2){let y=R.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;y+=R.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),d(y,11,U)}return C<w.length&&d(R.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,U),new R(R.Mode.ALPHANUMERIC,w.length,U)}static makeSegments(w){return w==""?[]:R.isNumeric(w)?[R.makeNumeric(w)]:R.isAlphanumeric(w)?[R.makeAlphanumeric(w)]:[R.makeBytes(R.toUtf8ByteArray(w))]}static makeEci(w){let U=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)d(w,8,U);else if(w<16384)d(2,2,U),d(w,14,U);else if(w<1e6)d(6,3,U),d(w,21,U);else throw new RangeError("ECI assignment value out of range");return new R(R.Mode.ECI,0,U)}static isNumeric(w){return R.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return R.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,U){let C=0;for(const y of w){const v=y.mode.numCharCountBits(U);if(y.numChars>=1<<v)return 1/0;C+=4+v+y.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let U=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?U.push(w.charCodeAt(C)):(U.push(parseInt(w.substr(C+1,2),16)),C+=2);return U}};let g=R;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=g})(vf||(vf={}));(i=>{(o=>{const l=class{constructor(p,I){this.ordinal=p,this.formatBits=I}};let d=l;d.LOW=new l(0,1),d.MEDIUM=new l(1,0),d.QUARTILE=new l(2,3),d.HIGH=new l(3,2),o.Ecc=d})(i.QrCode||(i.QrCode={}))})(vf||(vf={}));(i=>{(o=>{const l=class{constructor(p,I){this.modeBits=p,this.numBitsCharCount=I}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let d=l;d.NUMERIC=new l(1,[10,12,14]),d.ALPHANUMERIC=new l(2,[9,11,13]),d.BYTE=new l(4,[8,16,16]),d.KANJI=new l(8,[8,10,12]),d.ECI=new l(7,[0,0,0]),o.Mode=d})(i.QrSegment||(i.QrSegment={}))})(vf||(vf={}));var th=vf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var mB={L:th.QrCode.Ecc.LOW,M:th.QrCode.Ecc.MEDIUM,Q:th.QrCode.Ecc.QUARTILE,H:th.QrCode.Ecc.HIGH},vB=128,yB="L",EB="#FFFFFF",_B="#000000",TB=!1,VC=4,YJ=.1;function SB(i,o=0){const l=[];return i.forEach(function(d,p){let I=null;d.forEach(function(R,g){if(!R&&I!==null){l.push("M".concat(I+o," ").concat(p+o,"h").concat(g-I,"v1H").concat(I+o,"z")),I=null;return}if(g===d.length-1){if(!R)return;I===null?l.push("M".concat(g+o,",").concat(p+o," h1v1H").concat(g+o,"z")):l.push("M".concat(I+o,",").concat(p+o," h").concat(g+1-I,"v1H").concat(I+o,"z"));return}R&&I===null&&(I=g)})}),l.join("")}function wB(i,o){return i.slice().map((l,d)=>d<o.y||d>=o.y+o.h?l:l.map((p,I)=>I<o.x||I>=o.x+o.w?p:!1))}function AB(i,o,l,d){if(d==null)return null;const p=l?VC:0,I=i.length+p*2,R=Math.floor(o*YJ),g=I/o,w=(d.width||R)*g,U=(d.height||R)*g,C=d.x==null?i.length/2-w/2:d.x*g,y=d.y==null?i.length/2-U/2:d.y*g;let v=null;if(d.excavate){let D=Math.floor(C),m=Math.floor(y),T=Math.ceil(w+C-D),F=Math.ceil(U+y-m);v={x:D,y:m,w:T,h:F}}return{x:C,y,h:U,w,excavation:v}}var WJ=function(){try{new Path2D().addPath(new Path2D)}catch(i){return!1}return!0}();function $J(i){const o=i,{value:l,size:d=vB,level:p=yB,bgColor:I=EB,fgColor:R=_B,includeMargin:g=TB,style:w,imageSettings:U}=o,C=KC(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),y=U==null?void 0:U.src,v=vn.useRef(null),D=vn.useRef(null),[m,T]=vn.useState(!1);vn.useEffect(()=>{if(v.current!=null){const _=v.current,A=_.getContext("2d");if(!A)return;let b=th.QrCode.encodeText(l,mB[p]).getModules();const j=g?VC:0,Y=b.length+j*2,W=AB(b,d,g,U),$=D.current,se=W!=null&&$!==null&&$.complete&&$.naturalHeight!==0&&$.naturalWidth!==0;se&&W.excavation!=null&&(b=wB(b,W.excavation));const x=window.devicePixelRatio||1;_.height=_.width=d*x;const X=d/Y*x;A.scale(X,X),A.fillStyle=I,A.fillRect(0,0,Y,Y),A.fillStyle=R,WJ?A.fill(new Path2D(SB(b,j))):b.forEach(function(ce,oe){ce.forEach(function(me,Ce){me&&A.fillRect(Ce+j,oe+j,1,1)})}),se&&A.drawImage($,W.x+j,W.y+j,W.w,W.h)}}),vn.useEffect(()=>{T(!1)},[y]);const F=Hg({height:d,width:d},w);let N=null;return y!=null&&(N=ru.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{T(!0)},ref:D})),ru.createElement(ru.Fragment,null,ru.createElement("canvas",Hg({style:F,height:d,width:d,ref:v},C)),N)}function XJ(i){const o=i,{value:l,size:d=vB,level:p=yB,bgColor:I=EB,fgColor:R=_B,includeMargin:g=TB,imageSettings:w}=o,U=KC(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=th.QrCode.encodeText(l,mB[p]).getModules();const y=g?VC:0,v=C.length+y*2,D=AB(C,d,g,w);let m=null;w!=null&&D!=null&&(D.excavation!=null&&(C=wB(C,D.excavation)),m=ru.createElement("image",{xlinkHref:w.src,height:D.h,width:D.w,x:D.x+y,y:D.y+y,preserveAspectRatio:"none"}));const T=SB(C,y);return ru.createElement("svg",Hg({height:d,width:d,viewBox:"0 0 ".concat(v," ").concat(v)},U),ru.createElement("path",{fill:I,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),ru.createElement("path",{fill:R,d:T,shapeRendering:"crispEdges"}),m)}var zC=i=>{const o=i,{renderAs:l}=o,d=KC(o,["renderAs"]);return l==="svg"?ru.createElement(XJ,Hg({},d)):ru.createElement($J,Hg({},d))};const QJ="_container_1l3tn_1",JJ="_qrCode_1l3tn_25",eee="_text_1l3tn_35",QA={container:QJ,qrCode:JJ,text:eee},tee=({url:i})=>bt.jsxs("div",{className:QA.container,children:[bt.jsx("p",{className:"body-text ".concat(QA.text),style:{opacity:.75},children:"Scan the QR code with the app."}),bt.jsx(zC,{className:QA.qrCode,bgColor:"white",fgColor:"black",value:i,size:500})]}),nee="_controlsWrapper_1v4q3_1",ree="_hidden_1v4q3_21",iee="_iconWrapper_1v4q3_29",JA={controlsWrapper:nee,hidden:ree,iconWrapper:iee},oee=({visible:i,eventPlayer:o})=>{const[l,d]=vn.useState(!1),p=()=>{o&&(l?o.exitFullscreen().then(()=>{d(!1)}):o.requestFullscreen().then(()=>{d(!0)}))};return bt.jsx("div",{className:"".concat(JA.controlsWrapper," ").concat(i?"":JA.hidden),children:bt.jsx("div",{className:JA.iconWrapper,onClick:p,children:l?bt.jsx(OJ,{}):bt.jsx(PJ,{})})})},aee="_warningContainer_1tqkb_1",see={warningContainer:aee},IB=()=>bt.jsxs("div",{className:see.warningContainer,children:[bt.jsx(hB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),bt.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),uee="_messageContainer_1jzyd_3",lee="_message_1jzyd_3",Z3={messageContainer:uee,message:lee},cee=({message:i})=>bt.jsx("div",{className:Z3.messageContainer,children:bt.jsx("div",{className:"".concat(Z3.message," subheader-light"),children:i})});function fee(){const[i,o,l]=SU(),d=wC(),p=VQ("#playerContainer",o,l),[I,R]=vn.useState(!1),[g,w]=vn.useState(),U=AC(),C=vn.useRef(),y=vn.useMemo(()=>{const F=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(F)},[]);vn.useEffect(()=>{const F=U==null?void 0:U.find(N=>N.deviceId===gh);w(F)},[U]);const v=!!(U!=null&&U.filter(F=>F.deviceId!==gh));qQ(p),HQ(p),KQ(p);const[D,m]=zQ(p);GQ();const T=()=>{y||(R(!0),clearTimeout(C.current),C.current=setTimeout(()=>{R(!1)},3e3))};return bt.jsxs("div",{className:B3.playerPage,onMouseMove:T,children:[bt.jsxs("div",{id:"playerContainer",className:B3.playerContainer,children:[d&&bt.jsx(GV,{eventPlayer:p}),bt.jsx(VJ,{}),bt.jsx(oee,{visible:I,eventPlayer:p}),(g==null?void 0:g.stateInfo.state)==="showQrCode"&&bt.jsx(tee,{url:"".concat(vC,":").concat(g.stateInfo.qrCodeDeviceId)}),bt.jsx(kJ,{fromCamera:D,toCamera:m})]}),!v&&bt.jsx(cee,{message:bt.jsx(IB,{})})]})}const dee="_gradientBackground_b6nct_1",hee="_container_b6nct_15",pee="_fadeIn_b6nct_1",gee="_connectedTV_b6nct_45",mee="_disconnectedTV_b6nct_47",vee="_popIn_b6nct_1",yee="_iconContainer_b6nct_105",Eee="_connectedText_b6nct_121",jd={gradientBackground:dee,container:hee,fadeIn:pee,connectedTV:gee,disconnectedTV:mee,popIn:vee,iconContainer:yee,connectedText:Eee},_ee=({isDisconnected:i})=>bt.jsx("div",{className:jd.gradientBackground,children:bt.jsxs("div",{className:jd.container,children:[bt.jsx("div",{className:i?jd.disconnectedTV:jd.connectedTV,children:bt.jsx("div",{className:jd.iconContainer,children:i?bt.jsx(MJ,{}):bt.jsx(NJ,{})})}),bt.jsx("h1",{className:jd.connectedText,children:i?"TV disconnected":"TV connected"})]})}),Tee="_hidden_zykq7_1",See={hidden:Tee},wee="_gradientBackground_14xmh_1",Aee="_container_14xmh_15",Iee="_fadeIn_14xmh_1",bee="_imageWrapper_14xmh_45",Cee="_listText_14xmh_57",Ree="_boldText_14xmh_57",xee="_image_14xmh_45",Nee="_glow_14xmh_91",Mee="_dividerWrapper_14xmh_119",Dee="_divider_14xmh_119",Pee="_buttonsWrapper_14xmh_149",Oee="_testButton_14xmh_185",Lee="_demoButton_14xmh_195",kee="_logoutButton_14xmh_203",Fee="_title_14xmh_215",Uee="_countdownWrapper_14xmh_225",Bee="_timeSectionContainer_14xmh_253",jee="_timeSection_14xmh_253",Zee="_countdownTitle_14xmh_277",Gee="_label_14xmh_285",qee="_logos_14xmh_293",Hee="_warning_14xmh_339",ki={gradientBackground:wee,container:Aee,fadeIn:Iee,imageWrapper:bee,listText:Cee,boldText:Ree,image:xee,glow:Nee,dividerWrapper:Mee,divider:Dee,buttonsWrapper:Pee,testButton:Oee,demoButton:Lee,logoutButton:kee,title:Fee,countdownWrapper:Uee,timeSectionContainer:Bee,timeSection:jee,countdownTitle:Zee,label:Gee,logos:qee,warning:Hee},Kee="_errorContainer_1vpqa_1",Vee={errorContainer:Kee},bB=({errorIcon:i,errorMessage:o,errorName:l})=>bt.jsxs("div",{className:Vee.errorContainer,children:[i&&bt.jsx("div",{children:i}),bt.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(o)})]}),zee="_gradientBackground_1pfse_1",Yee="_container_1pfse_19",Wee="_qrCode_1pfse_33",eI={gradientBackground:zee,container:Yee,qrCode:Wee},$ee=({url:i})=>bt.jsxs("div",{className:"".concat(eI.gradientBackground," ").concat(eI.container),children:[bt.jsx(zC,{className:eI.qrCode,bgColor:"white",fgColor:"black",value:i,size:500}),bt.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),Xee=({timeToLive:i})=>{const o=BV(),l=su(),d=SC(),p=wC(),I=AC(),[R,g]=vn.useState(),[w,U]=vn.useState("00:00:00:00"),[C,y]=vn.useState(!1),v=vn.useRef(null),D=5;vn.useEffect(()=>{const b=I==null?void 0:I.filter(j=>j.deviceId!==gh);y(!!(b!=null&&b.length))},[I]),vn.useEffect(()=>{const b=I==null?void 0:I.find(j=>j.deviceId===gh);g(b)},[I]);let m;(b=>{b.BEFORE="before",b.MIDDLE="middle",b.END="end"})(m||(m={}));const T=b=>{if(l){let j=new Date;switch(b){case"end":j=new Date(l.demoEndtime);break;case"middle":j.setMinutes(j.getMinutes()-22);break;default:case"before":j.setSeconds(j.getSeconds()+D);break}l.updateStartTime(j,!0)}};vn.useEffect(()=>{if(i&&i>0){const b=$=>{const se=Date.parse($.toString())-Date.parse(new Date().toString()),x=Math.floor(se/1e3%60),X=Math.floor(se/1e3/60%60),ce=Math.floor(se/1e3/60/60%24),oe=Math.floor(se/1e3/60/60/24);return{total:se,days:oe,hours:ce,minutes:X,seconds:x}},j=$=>{const{total:se,days:x,hours:X,minutes:ce,seconds:oe}=b($);se>=0&&U((x>9?x:"0"+x)+":"+(X>9?X:"0"+X)+":"+(ce>9?ce:"0"+ce)+":"+(oe>9?oe:"0"+oe))};($=>{v.current&&clearInterval(v.current),j($);const se=setInterval(()=>{j($)},1e3);v.current=se})(($=>{const se=new Date;return se.setSeconds(se.getSeconds()+Math.floor($/1e3)),se})(i))}},[i]);const[F,N,_,A]=w.split(":");if(R&&R.stateInfo.state==="showQrCode"){const b="".concat(vC,":").concat(R.stateInfo.qrCodeDeviceId);return bt.jsx($ee,{url:b})}return bt.jsxs("div",{className:ki.container,children:[p&&bt.jsx("div",{className:ki.buttonsWrapper,children:bt.jsxs("div",{children:[bt.jsx($o,{className:"".concat(ki.demoButton," ").concat(ki.testButton),onClick:()=>{T("before")},selfFocus:!0,children:"Before"}),bt.jsx($o,{className:ki.testButton,onClick:()=>{T("middle")},children:"Middle"}),bt.jsx($o,{className:ki.testButton,onClick:()=>{T("end")},children:"End"})]})}),o.map((b,j)=>bt.jsx(bB,{errorMessage:b.toString},"".concat(b.name,"-error-").concat(j.toString()))),bt.jsxs("div",{className:ki.imageWrapper,children:[bt.jsx("div",{className:ki.glow}),bt.jsx("img",{className:ki.image,src:"".concat(d==null?void 0:d.preScreen.backgroundLandscape.url)})]}),bt.jsxs("div",{className:ki.countdownWrapper,children:[bt.jsx("div",{className:"".concat(ki.title," subheader-bold"),children:d==null?void 0:d.preScreen.showTitle}),bt.jsx("div",{className:ki.dividerWrapper,children:bt.jsx("div",{className:ki.divider})}),bt.jsx("p",{className:"body-text ".concat(ki.countdownTitle),children:"Starts in"}),bt.jsxs("div",{className:ki.timeSectionContainer,children:[bt.jsxs("div",{className:ki.timeSection,children:[bt.jsx("div",{className:"subheader-bold",children:F}),bt.jsx("div",{className:"".concat(ki.label," label"),children:"days"})]}),bt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),bt.jsxs("div",{className:ki.timeSection,children:[bt.jsx("div",{className:"subheader-bold",children:N}),bt.jsx("div",{className:"".concat(ki.label," label"),children:"hours"})]}),bt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),bt.jsxs("div",{className:ki.timeSection,children:[bt.jsx("div",{className:"subheader-bold",children:_}),bt.jsx("div",{className:"".concat(ki.label," label"),children:"mins"})]}),bt.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),bt.jsxs("div",{className:ki.timeSection,children:[bt.jsx("div",{className:"subheader-bold",children:A}),bt.jsx("div",{className:"".concat(ki.label," label"),children:"secs"})]})]})]}),bt.jsx("div",{className:ki.warning,children:!C&&M0==="new"&&bt.jsx(IB,{})})]})},Qee="_wrapper_f3bpf_1",Jee="_container_f3bpf_21",ete="_qrCodeContainer_f3bpf_41",tte="_qrCode_f3bpf_41",nte="_listContainer_f3bpf_67",rte="_list_f3bpf_67",ite="_listItemContainer_f3bpf_101",ote="_listNumber_f3bpf_115",ate="_listText_f3bpf_137",ste="_circleRightCorner_f3bpf_149",ute="_circleLeftCorner_f3bpf_173",lte="_circleCenter_f3bpf_195",cte="_fadeIn_f3bpf_1",xo={wrapper:Qee,container:Jee,qrCodeContainer:ete,qrCode:tte,listContainer:nte,list:rte,listItemContainer:ite,listNumber:ote,listText:ate,circleRightCorner:ste,circleLeftCorner:ute,circleCenter:lte,fadeIn:cte},fte=({url:i})=>bt.jsxs("div",{className:xo.wrapper,children:[bt.jsx("div",{className:xo.circleRightCorner}),bt.jsx("div",{className:xo.circleLeftCorner}),bt.jsx("div",{className:xo.circleCenter}),bt.jsxs("div",{className:xo.container,children:[bt.jsxs("div",{className:"".concat(xo.listContainer," body-text"),children:[bt.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),bt.jsxs("div",{className:xo.list,children:[bt.jsxs("span",{className:xo.listItemContainer,children:[bt.jsx("span",{className:xo.listNumber,children:"1"}),bt.jsxs("span",{className:xo.listText,children:["Download the ",bt.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),bt.jsxs("span",{className:xo.listItemContainer,children:[bt.jsx("span",{className:xo.listNumber,children:"2"}),bt.jsx("span",{className:xo.listText,children:"Enter the ticket code from your confirmation email."})]}),bt.jsxs("span",{className:xo.listItemContainer,children:[bt.jsx("span",{className:xo.listNumber,children:"3"}),bt.jsx("span",{className:xo.listText,children:"Scan the QR code with the app."})]})]})]}),bt.jsx("div",{className:xo.qrCodeContainer,children:bt.jsx("div",{className:xo.qrCode,children:bt.jsx(zC,{bgColor:"white",fgColor:"black",value:i!=null?i:"",size:512})})})]})]}),dte="_container_zht4e_1",hte="_fadeIn_zht4e_1",pte="_scrollWrapper_zht4e_15",gte="_scrollContainer_zht4e_29",tI={container:dte,fadeIn:hte,scrollWrapper:pte,scrollContainer:gte};function mte(){const i=SC();return bt.jsxs("div",{className:tI.container,children:[bt.jsx("h1",{children:"Oh no! This event has been canceled."}),bt.jsx("div",{className:tI.scrollWrapper,children:bt.jsx("div",{className:tI.scrollContainer,children:i&&i.postScreen.offersCollection.items.map((o,l)=>bt.jsx("img",{src:o.image.url},l))})})]})}const vte=()=>{const[i,o]=vn.useState(0);return vn.useEffect(()=>{const l=p=>{o(p.keyCode)},d=()=>{o(null)};return document.addEventListener("keydown",l),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",d)}},[]),i};function yte(){switch(mC()){case lc.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case lc.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case lc.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const Ete=yte(),_te="_popupWrapper_19u5b_1",Tte="_popup_19u5b_1",Ste="_controls_19u5b_59",wte="_focused_19u5b_93",og={popupWrapper:_te,popup:Tte,controls:Ste,focused:wte};function Ate({close:i}){const o=()=>{switch(mC()){case lc.TIZEN:window.tizen.application.getCurrentApplication().exit();break;case lc.WEBOS:window.close();break}};return bt.jsx("div",{className:og.popupWrapper,children:bt.jsxs("div",{className:og.popup,children:[bt.jsx("h3",{children:"Would you like to exit app?"}),bt.jsxs("div",{className:og.controls,children:[bt.jsx($o,{onClick:i,selfFocus:!0,focusstile:og.focused,children:"Back"}),bt.jsx($o,{onClick:o,focusstile:og.focused,children:"Confirm"})]})]})})}const Ite={};function bte(){return bt.jsx("div",{className:Ite.popup,children:"Network Error Popup"})}function G3(){const i=vte(),[o,l]=vn.useState(),d=()=>{l(void 0)};switch(vn.useEffect(()=>{i===Ete.KEY_BACK&&l("exit")},[i]),o){case"exit":return bt.jsx(Ate,{close:d});case"network":return bt.jsx(bte,{});default:return}}function Cte(){const i=su();UV();const o=em(),l=LV(),d=Th(),p=AC(),[I,R]=vn.useState(!1),[g,w]=vn.useState(!1),[U,C]=vn.useState(!1),[y,v]=vn.useState(),[D,m]=vn.useState(!1),[T,F]=vn.useState(!1),[N,_]=vn.useState(!1),[A,b]=vn.useState(),[j,Y]=vn.useState(),[W,$]=vn.useState(),se="".concat(vC,":").concat(gh);vn.useEffect(()=>{p&&b(p.find(ce=>ce.deviceId===gh)||p[0])},[p]),vn.useEffect(()=>{Y(A==null?void 0:A.stateInfo.state)},[A]);const x=W&&W.code===404?bt.jsx(xJ,{color:"#ff4646"}):bt.jsx(hB,{stroke:"10",color:"#ff4646",styles:{width:"5rem",height:"5rem"}}),X=W&&W.code===404?"No Internet connection. Try scanning the code again.":"".concat(W==null?void 0:W.name,". Try scanning the code again.");if(vn.useEffect(()=>{if(!i)return;const ce=()=>{console.log($),i.adjustedEndTime&&i.adjustedEndTime<Date.now()?w(!0):i.adjustedStartTime&&(w(!1),v(i.adjustedStartTime-Date.now()))};return i.on("startTimeUpdated",ce),()=>{i.off("startTimeUpdated",ce)}},[i]),vn.useEffect(()=>{if(!o)return;const ce=()=>{w(!0)};return o.on("eventEnded",ce),()=>{o.off("eventEnded",ce)}},[o]),vn.useEffect(()=>{if(!d)return;const ce=()=>{C(!0)};return d.on("eventCanceled",ce),()=>{d.off("eventCanceled",ce)}},[d]),vn.useEffect(()=>{if(!D)return;F(!0);const ce=setTimeout(()=>{m(!1)},1500);return()=>{clearTimeout(ce)}},[D]),vn.useEffect(()=>{if(y)if(y>0){R(!1);const ce=setTimeout(()=>{R(!0)},y);return()=>{clearTimeout(ce)}}else R(!0)},[y]),vn.useEffect(()=>{j==="hostTv"?(_(!0),m(!0)):l===WI.CONNECTED_STATE&&M0!=="new"&&m(!0)},[j,l]),U)return bt.jsx(mte,{});if(g)return bt.jsx(QQ,{});{if(!N&&j===void 0)return bt.jsxs(bt.Fragment,{children:[bt.jsx(fte,{url:se}),W&&bt.jsx(bB,{errorMessage:X,errorIcon:x}),bt.jsx(G3,{})]});if(D&&!T)return bt.jsx(_ee,{})}return bt.jsxs("div",{children:[bt.jsx("div",{className:I?"":See.hidden,children:bt.jsx(fee,{})}),!I&&bt.jsx(Xee,{timeToLive:y}),bt.jsx(G3,{})]})}hU.init({debug:!1,shouldUseNativeEvents:!0});function Rte(){const i=localStorage.getItem("ticketCode"),[o,l]=vn.useState(i!=null?i:"");return bt.jsx("div",{className:RK.pageContainer,children:bt.jsxs(DV,{baseUrl:TK,preferredProfile:"dash-drm",contentfulAccessToken:SK,contentfulSpaceId:wK,newSetupToggle:M0==="new",ticketCodeProp:o,children:[M0!=="new",bt.jsx(Cte,{})]})})}nI.createRoot(document.getElementById("root")).render(bt.jsx(Rte,{}));export{xte as __vite_legacy_guard};
